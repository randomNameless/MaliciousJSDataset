<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>event_calendar.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGqIKAgAAyfwBBAQt/AEEQC38AQSALfwBBLgt/AEE4C38AQc4AC38AQeoAC38AQf4AC38AQZQBC38AQaQBC38AQbYBC38AQcYBC38AQdgBC38AQeoBC38AQYACC38AQZACC38AQZ4CC38AQa4CC38AQbwCC38AQcwCC38AQd4CC38AQe4CC38AQfwCC38AQYwDC38AQZ4DC38AQbgDC38AQdADC38AQeADC38AQfQDC38AQYYEC38AQZQEC38AQZYEC38AQZgEC38AQZ4EC38AQaQEC38AQaYEC38AQbQEC38AQboEC38AQcAEC38AQcYEC38AQdIEC38AQeAEC38AQeoEC38AQfYEC38AQfgEC38AQYwFC38AQZwFC38AQa4FC38AQcwFC38AQdQFCwfCg4CAADMGbWVtb3J5AgAFZGF0YTADAAVkYXRhMQMBBWRhdGEyAwIFZGF0YTMDAwVkYXRhNAMEBWRhdGE1AwUFZGF0YTYDBgVkYXRhNwMHBWRhdGE4AwgFZGF0YTkDCQZkYXRhMTADCgZkYXRhMTEDCwZkYXRhMTIDDAZkYXRhMTMDDQZkYXRhMTQDDgZkYXRhMTUDDwZkYXRhMTYDEAZkYXRhMTcDEQZkYXRhMTgDEgZkYXRhMTkDEwZkYXRhMjADFAZkYXRhMjEDFQZkYXRhMjIDFgZkYXRhMjMDFwZkYXRhMjQDGAZkYXRhMjUDGQZkYXRhMjYDGgZkYXRhMjcDGwZkYXRhMjgDHAZkYXRhMjkDHQZkYXRhMzADHgZkYXRhMzEDHwZkYXRhMzIDIAZkYXRhMzMDIQZkYXRhMzQDIgZkYXRhMzUDIwZkYXRhMzYDJAZkYXRhMzcDJQZkYXRhMzgDJgZkYXRhMzkDJwZkYXRhNDADKAZkYXRhNDEDKQZkYXRhNDIDKgZkYXRhNDMDKwZkYXRhNDQDLAZkYXRhNDUDLQZkYXRhNDYDLgZkYXRhNDcDLwZkYXRhNDgDMAZkYXRhNDkDMQvLh4CAADIAQQELDXVzZSUyMHN0cmljdAAAQRALDy5qcy1kYXRlLXJhbmdlAABBIAsNLmpzLWNhbGVuZGFyAABBLgsILmpzLWRheQAAQTgLFS5qcy1ldmVudHMtY29udGFpbmVyAABBzgALGy5qcy1ldmVudC1jYWxlbmRhci10b29sdGlwAABB6gALEy5qcy1ldmVudC10ZW1wbGF0ZQAAQf4ACxRvdmVybGF5VmlzaWJsZUNsYXNzAABBlAELDmV2ZW50U2VsZWN0b3IAAEGkAQsQZXZlbnRTbWFsbENsYXNzAABBtgELD2V2ZW50UGFzdENsYXNzAABBxgELEWV2ZW50RnV0dXJlQ2xhc3MAAEHYAQsRZXZlbnRFbmRpbmdDbGFzcwAAQeoBCxVldmVudENvbG9yQ2xhc3NTdGFydAAAQYACCw5pbWFnZVNlbGVjdG9yAABBkAILDWljb25TZWxlY3RvcgAAQZ4CCw9pY29uQ2xhc3NTdGFydAAAQa4CCwx0YWdTZWxlY3RvcgAAQbwCCw90YWdIaWRkZW5DbGFzcwAAQcwCCxB0YWdUZXh0U2VsZWN0b3IAAEHeAgsOdGl0bGVTZWxlY3RvcgAAQe4CCw1saW5rU2VsZWN0b3IAAEH8AgsOaW1hZ2VTZWxlY3RvcgAAQYwDCxFjYXRlZ29yeVNlbGVjdG9yAABBngMLGGNhdGVnb3J5Q29sb3JDbGFzc1N0YXJ0AABBuAMLF2NhdGVnb3J5SWNvbkNsYXNzU3RhcnQAAEHQAwsOdGl0bGVTZWxlY3RvcgAAQeADCxJkYXRlU3RhcnRTZWxlY3RvcgAAQfQDCxBkYXRlRW5kU2VsZWN0b3IAAEGGBAsNbGlua1NlbGVjdG9yAABBlAQLAQAAQZYECwEAAEGYBAsEc3JjAABBngQLBWhyZWYAAEGkBAsBAABBpgQLDGdyaWQtY29sdW1uAABBtAQLBCUyRgAAQboECwVocmVmAABBwAQLBHNyYwAAQcYECwttb3VzZWVudGVyAABB0gQLDC5qcy13ZWVrZGF5AABB4AQLCS5qcy1kYXRlAABB6gQLCmRheU9mZnNldAAAQfYECwEAAEH4BAsSLmpzLWhvLWNvbnRyb2xsZXIAAEGMBQsPYnV0dG9uU2VsZWN0b3IAAEGcBQsQZ2FybGFuZFNlbGVjdG9yAABBrgULHWV2ZW50LWNhbGVuZGFyX2dhcmxhbmQtbW9kZS0AAEHMBQsGY2xpY2sAAEHUBQsYc2VydmVydGltZXN5bmMlM0FzeW5jZWQA'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
(() => {
    const __callInstance45 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                (function ($, amplify, ServerTimeSync) {
                    lS(0, 0);
                    function EventsCalendar(options) {
                        const MS_IN_A_DAY = 1000 * 60 * 60 * 24, STARTING_SOON_TIME = MS_IN_A_DAY * 2, ENDING_SOON_TIME = MS_IN_A_DAY * 2;
                        const serverTimeSync = new ServerTimeSync(), $dateRange = $(lS(0, 1), options.widget), $calendar = $(lS(0, 2), options.widget), $days = $(lS(0, 3), options.widget), $eventsContainer = $(lS(0, 4), options.widget), $tooltip = $(lS(0, 5), options.widget), $eventTemplate = $(lS(0, 6), options.widget), daysInCalendar = $days.length, overlayVisibleClass = $calendar.data(lS(0, 7)), eventSelector = $eventTemplate.data(lS(0, 8)), eventSmallClass = $eventTemplate.data(lS(0, 9)), eventPastClass = $eventTemplate.data(lS(0, 10)), eventFutureClass = $eventTemplate.data(lS(0, 11)), eventEndingClass = $eventTemplate.data(lS(0, 12)), eventColorClassStart = $eventTemplate.data(lS(0, 13)), eventImageSelector = $eventTemplate.data(lS(0, 14)), eventIconSelector = $eventTemplate.data(lS(0, 15)), eventIconClassStart = $eventTemplate.data(lS(0, 16)), eventTagSelector = $eventTemplate.data(lS(0, 17)), eventTagHiddenClass = $eventTemplate.data(lS(0, 18)), eventTagTextSelector = $eventTemplate.data(lS(0, 19)), eventTitleSelector = $eventTemplate.data(lS(0, 20)), eventLinkSelector = $eventTemplate.data(lS(0, 21)), tooltipImageSelector = $tooltip.data(lS(0, 22)), tooltipCategorySelector = $tooltip.data(lS(0, 23)), tooltipCategoryColorClassStart = $tooltip.data(lS(0, 24)), tooltipCategoryIconClassStart = $tooltip.data(lS(0, 25)), tooltipTitleSelector = $tooltip.data(lS(0, 26)), tooltipDateStartSelector = $tooltip.data(lS(0, 27)), tooltipDateEndSelector = $tooltip.data(lS(0, 28)), tooltipLinkSelector = $tooltip.data(lS(0, 29)), $tooltipImage = $(tooltipImageSelector, $tooltip), $tooltipCategory = $(tooltipCategorySelector, $tooltip), $tooltipTitle = $(tooltipTitleSelector, $tooltip), $tooltipDateStart = $(tooltipDateStartSelector, $tooltip), $tooltipDateEnd = $(tooltipDateEndSelector, $tooltip), $tooltipLink = $(tooltipLinkSelector, $tooltip);
                        let minEventEndTime = 0, maxEventStartTime = Number.MAX_SAFE_INTEGER, dayStartDates = [], eventTimeUpdaters = [], eventTimeUpdateInterval = null, tooltipCategoryColorClass = lS(0, 30), tooltipCategoryIconClass = lS(0, 31);
                        function prepareTooltip(event) {
                            (() => {
                                const __callInstance44 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipCategory.removeClass(tooltipCategoryColorClass).removeClass(tooltipCategoryIconClass);
                                        }
                                    }
                                });
                                const __exports = __callInstance44.exports;
                                return __exports.data();
                            })();
                            tooltipCategoryColorClass = tooltipCategoryColorClassStart + event.color;
                            tooltipCategoryIconClass = tooltipCategoryIconClassStart + event.icon;
                            (() => {
                                const __callInstance43 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipImage.attr(lS(0, 32), event.image);
                                        }
                                    }
                                });
                                const __exports = __callInstance43.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance42 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipCategory.addClass(tooltipCategoryColorClass).addClass(tooltipCategoryIconClass).text(event.category);
                                        }
                                    }
                                });
                                const __exports = __callInstance42.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance41 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipTitle.text(event.title);
                                        }
                                    }
                                });
                                const __exports = __callInstance41.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance40 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipDateStart.text(window.interpolate(options.dateTimeText, {
                                                date: event.start.wotToLocaleDateStringShortWithoutYear(),
                                                time: event.start.wotFormatTimeHM()
                                            }, true));
                                        }
                                    }
                                });
                                const __exports = __callInstance40.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance39 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipDateEnd.text(window.interpolate(options.dateTimeText, {
                                                date: event.end.wotToLocaleDateStringShortWithoutYear(),
                                                time: event.end.wotFormatTimeHM()
                                            }, true));
                                        }
                                    }
                                });
                                const __exports = __callInstance39.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance38 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $tooltipLink.attr(lS(0, 33), event.link);
                                        }
                                    }
                                });
                                const __exports = __callInstance38.exports;
                                return __exports.data();
                            })();
                        }
                        function createEvent(now, event) {
                            const startDate = new Date(event.start.getFullYear(), event.start.getMonth(), event.start.getDate());
                            const endDate = new Date(event.end.getFullYear(), event.end.getMonth(), event.end.getDate());
                            const endsOnMidnight = event.end.getHours() === 0 && event.end.getMinutes() === 0 && event.end.getSeconds() === 0;
                            const startColumn = Math.round((startDate - dayStartDates[0]) / MS_IN_A_DAY) + 1;
                            const endColumn = Math.round((endDate - dayStartDates[0]) / MS_IN_A_DAY) - (endsOnMidnight ? 1 : 0) + 1;
                            const realStartColumn = Math.max(startColumn, 1);
                            const realEndColumn = Math.min(endColumn, daysInCalendar);
                            const isSmall = realStartColumn === realEndColumn;
                            const today = new Date();
                            (() => {
                                const __callInstance37 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            today.setHours(0, 0, 0, 0);
                                        }
                                    }
                                });
                                const __exports = __callInstance37.exports;
                                return __exports.data();
                            })();
                            const finishedBeforeToday = event.end <= today;
                            const $fragment = $($eventTemplate[0].content.cloneNode(true));
                            const $event = $(eventSelector, $fragment);
                            const updateTime = function (now) {
                                const finished = event.end <= now;
                                const activeNow = event.start <= now && event.end > now;
                                const startingSoon = event.start > now && event.start - now <= STARTING_SOON_TIME;
                                const endingSoon = event.start <= now && event.end > now && event.end - now <= ENDING_SOON_TIME;
                                let tagText = lS(0, 34);
                                (() => {
                                    const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    tagText = options.finishedText;
                                                }
                                            },
                                            impFunc2: () => {
                                                (() => {
                                                    const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    tagText = window.interpolate(options.endsInText, { time: new Date(event.end - now).wotFormatAsTimeSpan(isSmall) }, true);
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                                {
                                                                    (() => {
                                                                        const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                                                            env: {
                                                                                impFunc1: () => {
                                                                                    {
                                                                                        tagText = window.interpolate(options.startsInText, { time: new Date(event.start - now).wotFormatAsTimeSpan(isSmall) }, true);
                                                                                    }
                                                                                },
                                                                                impFunc2: () => {
                                                                                    (() => {
                                                                                        const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                                                                            env: {
                                                                                                impFunc1: () => {
                                                                                                    {
                                                                                                        tagText = event.start.wotToLocaleDateStringShortWithoutYear();
                                                                                                    }
                                                                                                },
                                                                                                impFunc2: () => {
                                                                                                    {
                                                                                                        tagText = window.interpolate(options.dateRangeText, {
                                                                                                            startDay: event.start.wotToLocaleDateStringShortWithoutYear(),
                                                                                                            endDay: event.end.wotToLocaleDateStringShortWithoutYear()
                                                                                                        }, true);
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        });
                                                                                        const __exports = __ifInstance3.exports;
                                                                                        return __exports.data(isSmall ? 1 : 0);
                                                                                    })();
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __ifInstance2.exports;
                                                                        return __exports.data(startingSoon ? 1 : 0);
                                                                    })();
                                                                }
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance1.exports;
                                                    return __exports.data(activeNow ? 1 : 0);
                                                })();
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance0.exports;
                                    return __exports.data(finished ? 1 : 0);
                                })();
                                (() => {
                                    const __callInstance36 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                $event.toggleClass(eventEndingClass, endingSoon);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance36.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                $(eventTagTextSelector, $fragment).text(tagText);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance35.exports;
                                    return __exports.data();
                                })();
                            };
                            (() => {
                                const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $event.css(lS(0, 35), realStartColumn + lS(0, 36) + (isSmall ? realEndColumn : realEndColumn + 1)).toggleClass(eventSmallClass, isSmall).toggleClass(eventPastClass, startColumn < realStartColumn).toggleClass(eventFutureClass, endColumn > realEndColumn).addClass(eventColorClassStart + event.color);
                                        }
                                    }
                                });
                                const __exports = __callInstance34.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(eventLinkSelector, $fragment).attr(lS(0, 37), event.link);
                                        }
                                    }
                                });
                                const __exports = __callInstance33.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(eventImageSelector, $fragment).attr(lS(0, 38), event.image);
                                        }
                                    }
                                });
                                const __exports = __callInstance32.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(eventIconSelector, $fragment).addClass(eventIconClassStart + event.icon);
                                        }
                                    }
                                });
                                const __exports = __callInstance31.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(eventTagSelector, $fragment).toggleClass(eventTagHiddenClass, !event.tag || finishedBeforeToday);
                                        }
                                    }
                                });
                                const __exports = __callInstance30.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(eventTitleSelector, $fragment).text(event.title);
                                        }
                                    }
                                });
                                const __exports = __callInstance29.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            eventTimeUpdaters.push(updateTime);
                                        }
                                    }
                                });
                                const __exports = __callInstance28.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            updateTime(now);
                                        }
                                    }
                                });
                                const __exports = __callInstance27.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $event.on(lS(0, 39), function () {
                                                (() => {
                                                    const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                prepareTooltip(event);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance25.exports;
                                                    return __exports.data();
                                                })();
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance26.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $eventsContainer.append($fragment);
                                        }
                                    }
                                });
                                const __exports = __callInstance24.exports;
                                return __exports.data();
                            })();
                        }
                        function processDays(now) {
                            let firstDayText, lastDayText;
                            (() => {
                                const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $days.each(function (index) {
                                                const $day = $(this);
                                                const $weekday = $(lS(0, 40), $day);
                                                const $date = $(lS(0, 41), $day);
                                                const dayOffset = Number($day.data(lS(0, 42)));
                                                const date = new Date(now + dayOffset * MS_IN_A_DAY);
                                                (() => {
                                                    const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                date.setHours(0);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance22.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                date.setMinutes(0);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance21.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                date.setSeconds(0);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance20.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                date.setMilliseconds(0);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance19.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                dayStartDates.push(date);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance18.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                $weekday.text(date.wotToLocaleShortDayOfWeek());
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance17.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                $date.text(date.getDate());
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance16.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    firstDayText = date.wotToLocaleDateStringShortWithoutYear();
                                                                    minEventEndTime = new Date(date.getTime() + 1);
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance4.exports;
                                                    return __exports.data(index === 0 ? 1 : 0);
                                                })();
                                                (() => {
                                                    const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    lastDayText = date.wotToLocaleDateStringShortWithoutYear();
                                                                    maxEventStartTime = new Date(date.getTime() + MS_IN_A_DAY - 1);
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance5.exports;
                                                    return __exports.data(index === daysInCalendar - 1 ? 1 : 0);
                                                })();
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance23.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $dateRange.text(window.interpolate(options.dateRangeText, {
                                                startDay: firstDayText,
                                                endDay: lastDayText
                                            }, true));
                                        }
                                    }
                                });
                                const __exports = __callInstance15.exports;
                                return __exports.data();
                            })();
                        }
                        function processEvents(now) {
                            let eventsShown = 0;
                            const allEvents = options.events.map(event => {
                                const startDate = new Date(event.start * 1000);
                                const endDate = new Date(event.end * 1000);
                                const editedDate = new Date(event.edited * 1000);
                                return {
                                    ...event,
                                    start: startDate,
                                    end: endDate,
                                    edited: editedDate
                                };
                            }).filter(e => e.end >= minEventEndTime && e.start <= maxEventStartTime).sort((a, b) => {
                                if (a.end.getTime() !== b.end.getTime()) {
                                    return a.end.getTime() - b.end.getTime();
                                }
                                if (a.start.getTime() !== b.start.getTime()) {
                                    return a.start.getTime() - b.start.getTime();
                                }
                                if (a.edited.getTime() !== b.edited.getTime()) {
                                    return a.edited.getTime() - b.edited.getTime();
                                }
                                return a.title.localeCompare(b.title);
                            });
                            eventsShown = 0;
                            eventTimeUpdaters = [];
                            (() => {
                                const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $eventsContainer.html(lS(0, 43));
                                        }
                                    }
                                });
                                const __exports = __callInstance14.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            allEvents.forEach(event => {
                                                (() => {
                                                    const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                createEvent(now, event);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance12.exports;
                                                    return __exports.data();
                                                })();
                                                eventsShown += 1;
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance13.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $calendar.toggleClass(overlayVisibleClass, eventsShown < 1);
                                        }
                                    }
                                });
                                const __exports = __callInstance11.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                clearInterval(eventTimeUpdateInterval);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance10.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance6.exports;
                                return __exports.data(eventTimeUpdateInterval ? 1 : 0);
                            })();
                            eventTimeUpdateInterval = setInterval(() => {
                                const now = Date.now();
                                (() => {
                                    const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                eventTimeUpdaters.forEach(updateTime => updateTime(now));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance9.exports;
                                    return __exports.data();
                                })();
                            }, 60000);
                        }
                        function processCalendar(now) {
                            (() => {
                                const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                now += serverTimeSync.getDelta();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance7.exports;
                                return __exports.data(serverTimeSync && serverTimeSync.isTimestampSynced() ? 1 : 0);
                            })();
                            (() => {
                                const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            processDays(now);
                                        }
                                    }
                                });
                                const __exports = __callInstance8.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            processEvents(now);
                                        }
                                    }
                                });
                                const __exports = __callInstance7.exports;
                                return __exports.data();
                            })();
                        }
                        function handleThemes() {
                            const $HOcontroller = $(lS(0, 44), options.widget), HObuttonSelector = $HOcontroller.data(lS(0, 45)), HOgarlandSelector = $HOcontroller.data(lS(0, 46)), $HObutton = $(HObuttonSelector, $HOcontroller), $HOgarland = $(HOgarlandSelector, options.widget), HOmodeClassBase = lS(0, 47), HOmodesCount = 7;
                            let mode = 1;
                            (() => {
                                const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $HObutton.on(lS(0, 48), function () {
                                                const currentModeClass = HOmodeClassBase + mode;
                                                mode = mode === HOmodesCount ? 0 : mode + 1;
                                                const nextModeClass = HOmodeClassBase + mode;
                                                (() => {
                                                    const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                $HOgarland.removeClass(currentModeClass);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance5.exports;
                                                    return __exports.data();
                                                })();
                                                $HOgarland[$HOgarland.length - 1].clientHeight;
                                                (() => {
                                                    const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                $HOgarland.addClass(nextModeClass);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance4.exports;
                                                    return __exports.data();
                                                })();
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance6.exports;
                                return __exports.data();
                            })();
                        }
                        (() => {
                            const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        handleThemes();
                                    }
                                }
                            });
                            const __exports = __callInstance3.exports;
                            return __exports.data();
                        })();
                        const now = Date.now();
                        (() => {
                            const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        processCalendar(now);
                                    }
                                }
                            });
                            const __exports = __callInstance2.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        amplify.subscribe(lS(0, 49), () => {
                                            (() => {
                                                const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            processCalendar(now);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance0.exports;
                                                return __exports.data();
                                            })();
                                        });
                                    }
                                }
                            });
                            const __exports = __callInstance1.exports;
                            return __exports.data();
                        })();
                    }
                    window.EventsCalendar = EventsCalendar;
                }(jQuery, amplify, ServerTimeSync));
            }
        }
    });
    const __exports = __callInstance45.exports;
    return __exports.data();
})();</script>
</body>
</html>
