/*!
 * Play GIF
 *
 * by Jesse Young
 *
 * a jQuery plugin to play GIF animations on mouseover (or any other event).
 *
 * Examples:
 *    $('img[src$=".gif"]').playGIF();             // default is mouseover
 *    $('img[src$=".gif"]').playGIF({on:'click'}); // play animation on click
 */
function BrightcoveWrapper(e,t,n){var i=this,r=function(){},o="4063572901001";this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.meta.type="brightcove",this.options=n=jQuery.extend({autoplay:!1,account_id:o,callback:r,onAdsPlayed:r,onCreate:r,onPlay:r},window.brightcove_options||{},n||{}),this.insertVideoTag.call(this,this.$el),this.perfMark("brightcoveInitializeStart"),yepnope({load:i.getPlayerUrl(n),complete:function(){i.setupPlayer(n),i.options.callback()}})}function YoutubeWrapper(e,t,n){function i(e){e.data===YT.PlayerState.PLAYING?(n.onPlay(r.player),o||(Chorus.Analytics.event(r.formatEvent("play")),r.pub("youtubeVideoPlay"),o=!0)):e.data===YT.PlayerState.PAUSED&&n.onPause(r.player)}var r=this,o=!1,a=function(){};t.type=t.type||"youtube";var s=jQuery("<div>").attr("id","youtube-video-inside-wrapper-"+e);jQuery("#"+e).html(s),e=s.attr("id"),this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,controls:1,modestbranding:1,rel:0,showInfo:0,onAdsPlayed:a,onCreate:a,onPause:a,onPlay:a,onPlayerReady:a,onPreRollEnd:a,timedEvents:{},start:n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},n||{}),n.autoplay=n.autoplay?1:0,Chorus.Video.youtubeApiLoaded||Chorus.Video.loadYoutubeApi(),this.init=function(){r.player=new YT.Player(e,{videoId:t.youtube_id||t.provider_video_id,playerVars:n,events:{onReady:n.onCreate,onStateChange:i},width:"100%",height:"100%"})},"undefined"!=typeof YT&&YT.Player?r.init():(YoutubeWrapper.initQueue.push(r),window.onYouTubeIframeAPIReady=function(){for(var e=0;e<YoutubeWrapper.initQueue.length;e++)YoutubeWrapper.initQueue[e].init()})}function EmbedWrapper(e,t,n){this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=n||this.options;var i=t.provider_video_id;n.autoplay&&(i=Util.addQueryParam("autoplay","1",i));this.$el.html(i).find("iframe")}var PLAYGIF_DISABLE_FLAG;!function(e){e.fn.playGIF=function(t){var n=e.extend({on:"touchstart mouseenter",off:"touchstart mouseleave",autoResize:!1,enable:!0,circleBackgroundColor:"FFF200",circleTextColor:"4C4E4D",gifText:"GIF",removeAnchor:!0},t);"undefined"!=typeof PLAYGIF_DISABLE_FLAG&&(n.enable=!PLAYGIF_DISABLE_FLAG);var i=function(e,t,i){t=Math.floor(t),i=Math.floor(i);var r=35;e.fillStyle="#"+n.circleBackgroundColor,e.beginPath(),e.arc(t,i,r,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="#"+n.circleTextColor,e.font="15px 'Gotham SSm A', 'Gotham SSm B', sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(n.gifText,t,i)};return this.each(function(){if(n.enable!==!1){var t=e(this);if(!t.is("img")||!/\.gif$/i.test(t.attr("src")))return!0;var r=document.createElement("canvas");if("undefined"==typeof r.getContext)return!0;var o=r.getContext("2d"),a=new Image,s=function(e,t){t.on(n.off,function(){l(e,t)});var i=t.attr("src");t.attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),t.css({width:e.attr("width"),height:e.attr("height")}),setTimeout(function(){t.attr("src",i)},0),e.replaceWith(t)},l=function(e,t){e.on(n.on,function(){s(e,t)}),t.replaceWith(e)};a.onload=function(){var l=t.width(),u=t.height();r.width=l,r.height=u,o.drawImage(a,0,0,l,u);var d=e(r);if(n.autoResize===!0){r.setAttribute("data-src",t.attr("src")),r.setAttribute("class","gif");var c=e('<span class="faux-image">');c.css({"float":t.css("float"),margin:t.css("margin"),padding:t.css("padding"),"max-width":"100%",position:"relative",display:"block",height:r.height}),d.css({position:"absolute",top:0,left:0}),d=c.append(d)}else d.css({"float":t.css("float"),margin:t.css("margin"),padding:t.css("padding"),display:t.css("display")});t.replaceWith(d);var f=d.parent();f.is("p")||"none"===f.css("max-width")&&"none"===f.css("max-height")||(l=f.width(),u=f.height()),n.removeAnchor&&f.is("a")&&/\.gif$/i.test(f.attr("href"))&&f.replaceWith(d),l>150&&u>150&&i(o,l/2,u/2),d.on(n.on,function(){s(d,t)})},a.src=t.attr("src")}})}}(jQuery),/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.0.sbn
 * - Hacked so that it lazy loads non-IMG tags
 * - Hacked so that the scroll event that ends up firing lazyload:appear is debounced
 * - Hacked so resize event is debounced
 * - Hacked so data attributes are not cached via jQuery (neccesary for optimization)
 *
 */
function(e,t){var n=e(t);e.fn.lazyload=function(i){function r(e,t){return"undefined"!=typeof _?_.debounce(e,t):e}function o(){var t=0;s.each(function(){var n=e(this);if(!l.skip_invisible||n.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("lazyload:appear")})}var a,s=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,scrollInterval:200,resizeInterval:250};if(i&&(void 0!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),void 0!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(l,i)),a=void 0===l.container||l.container===t?n:e(l.container),0===l.event.indexOf("scroll")){var u=function(){return o()};a.bind(l.event,r(u,l.scrollInterval))}this.each(function(){var n=this,i=e(n);n.loaded=!1,n.error_event_set=!1;var o=4e3,a=4,u=0,d=function(){if(!this.loaded){if(l.appear){var r=s.length;l.appear.call(n,r,l)}if("IMG"===this.tagName)e("<img />").bind("load",function(){i.hide().attr("src",i.attr("data-"+l.data_attribute))[l.effect](l.effect_speed),n.loaded=!0;var t=e.grep(s,function(e){return!e.loaded});if(s=e(t),l.load){var r=s.length;l.load.call(n,r,l)}}).bind("error",function(){n.error_event_set||t.setTimeout(e.proxy(c,this),o),n.error_event_set=!0}).attr("src",i.attr("data-"+l.data_attribute));else{i.css("background-image","url('"+i.attr("data-"+l.data_attribute)+"')")[l.effect](l.effect_speed),n.loaded=!0;var a=e.grep(s,function(e){return!e.loaded});if(s=e(a),l.load){var r=s.length;l.load.call(n,r,l)}}}},c=function(){if(u+=1,u<=a){e(this).bind("error",function(){t.setTimeout(e.proxy(c,this),o)});var n=this.src.split("?")[0];this.src=n+"?"+(new Date).getTime()}};if(i.one("lazyload:appear",d),0!==l.event.indexOf("scroll")){var f=function(){n.loaded||i.trigger("lazyload:appear")};i.bind(l.event,r(f,l.scrollInterval))}});var d=function(){o()};return n.bind("resize",r(d,l.resizeInterval)),o(),this},e.belowthefold=function(i,r){var o;return o=void 0===r.container||r.container===t?n.height()+n.scrollTop():e(r.container).offset().top+e(r.container).height(),o<=e(i).offset().top-r.threshold},e.rightoffold=function(i,r){var o;return o=void 0===r.container||r.container===t?n.width()+n.scrollLeft():e(r.container).offset().left+e(r.container).width(),o<=e(i).offset().left-r.threshold},e.abovethetop=function(i,r){var o;return o=void 0===r.container||r.container===t?n.scrollTop():e(r.container).offset().top,o>=e(i).offset().top+r.threshold+e(i).height()},e.leftofbegin=function(i,r){var o;return o=void 0===r.container||r.container===t?n.scrollLeft():e(r.container).offset().left,o>=e(i).offset().left+r.threshold+e(i).width()},e.inviewport=function(t,n){return!(e.rightofscreen(t,n)||e.leftofscreen(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window),function(e){e.fn.swipeEvents=function(){return this.each(function(){function t(e){var t=e.originalEvent.touches;t&&t.length&&(i=t[0].pageX,r=t[0].pageY,o.bind("touchmove",n)),e.preventDefault()}function n(e){var t=e.originalEvent.touches;if(t&&t.length){var a=i-t[0].pageX,s=r-t[0].pageY;a>=50&&o.trigger("swipeLeft"),a<=-50&&o.trigger("swipeRight"),s>=50&&o.trigger("swipeUp"),s<=-50&&o.trigger("swipeDown"),(Math.abs(a)>=50||Math.abs(s)>=50)&&o.unbind("touchmove",n)}e.preventDefault()}var i,r,o=e(this);o.bind("touchstart",t)})}}(jQuery),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(i){var r,o,a,s,l,u;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var d=i.data("ujs:submit-button");d&&(a.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);return u={type:r||"GET",data:a,dataType:l,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),!!n.fire(i,"ajax:beforeSend",[e,r])&&void i.trigger("ajax:send",e)},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(o)},s&&(u.xhrFields={withCredentials:s}),o&&(u.url=o),n.ajax(u)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!n.protocol||!n.host||t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(e){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),u=e('<form method="post" action="'+r+'"></form>'),d='<input name="_method" value="'+o+'" type="hidden" />';l===t||s===t||n.isCrossDomain(r)||(d+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&u.attr("target",a),u.hide().append(d).appendTo("body"),u.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),i!==t&&e[n](i),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return!i||(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t)},blankInputs:function(t,n,i){var r,o,a=e(),s=n||"input,textarea",l=t.find(s);return l.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),!!a.length&&a},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");e.data("ujs:enable-with",e.html()),i!==t&&e.html(i),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),a=r.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!s&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(s&&(!o||"GET"===o)&&!a)return!0;var l=n.handleRemote(r);return l===!1?n.enableElement(r):l.fail(function(){n.enableElement(r)}),!1}return o?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=e(this),s=a.data("remote")!==t;if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")==t&&(r=n.blankInputs(a,n.requiredInputSelector),r&&n.fire(a,"ajax:aborted:required",[r])))return n.stopEverything(i);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var l=n.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(a)},13),l}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery);var SBN=SBN||{};SBN.Nav=function(e){function t(){var t=e(".m-site-nav__logo img"),n=t.attr("data-logo-url");t.attr("src",n)}function n(t,n){var i=e(".m-site-nav__logo img"),o=i.attr("data-dark-logo-url"),a=i.attr("data-light-logo-url");if(r(),_.delay(r,1e3),o&&a&&(i.attr("src",t?a:o),n)){var s=i.attr("data-bw-logo-url");s?i.attr("src",s):console.log("Tried to apply third logo/black and white logo, but none was available for this site/network.")}}function i(t,n){t.children("li").css({visibility:"hidden"}).removeClass("is-hidden-desktop");var i=t.find(".m-site-nav__more-link"),r=i.find("ul").empty(),o=n-i.width()-S,a=0,s=0;t.children(".is-pinned").css("visibility","visible").each(function(){a+=e(this).width()}),t.children("li").not(".is-pinned").each(function(){var t=e(this);if(!t.is(i))if(a+=t.width(),a<o)t.css("visibility","visible");else{s++;var n=t.children("a");n.length>0&&r.append("<li>"+n[0].outerHTML+"</li>"),t.addClass("is-hidden-desktop"),t.css("visibility","visible")}}),s>0&&i.css("visibility","visible")}function r(){if(Chorus.Environment.currentBreakpoint().index>1){var t=A.width()-E.width();A.find(".m-site-nav__network, .m-site-nav__community").each(function(){i(e(this),t)})}else A.find("> ul > li").css({visibility:"visible"})}function o(){x.toggleClass("is-mobile-nav-active")}function a(){clearTimeout(k),Chorus.Environment.currentBreakpoint().index>1&&x.hasClass("has-both-navs")===!0&&x.addClass("is-network-nav-active")}function s(){x.removeClass("is-network-nav-active"),clearTimeout(k)}function l(e){n(e.useLightLogo===!0,e.useThirdLogo===!0,e.useSolidBackground===!0)}function u(e){Chorus.Environment.currentBreakpoint().index>1&&e.toggleClass("is-active")}function d(e){Chorus.Environment.currentBreakpoint().index<2&&e.hasClass("has-dropdown")&&(A.find(".is-active").not(e).removeClass("is-active"),e.toggleClass("is-active"))}function c(t){u(e(t.currentTarget))}function f(t){var n=e(t.currentTarget);n.hasClass("has-dropdown")===!0&&n.hasClass("is-active")===!1&&t.preventDefault(),d(n)}function h(){r()}function p(){a()}function m(){k=setTimeout(s,2e3)}function v(){s()}function g(){e(".m-site-nav__search").addClass("is-focus")}function y(){e(".m-site-nav__search").removeClass("is-focus")}function b(){o()}function w(t){var n=e(t.currentTarget);n.find("iframe").css({"background-color":n.css("background-color")}),FB.XFBML.parse(document.getElementById("nav-fb-like-btn"))}function C(){x=e(".m-site-nav"),A=x.find("nav"),t(),E=e(".m-site-nav__right-side"),e(".m-site-nav nav > ul > li").on("mouseenter",c).on("mouseleave",c),e(".m-site-nav nav .m-site-nav__community > li").on("click",f),Chorus.EventDispatcher.subscribe("campaignReskinApplied",l),e(window).on("resize",_.debounce(h,100)),e(".m-site-nav__netnav-trigger, .m-site-nav__network").on("mouseenter",p),A.on("mouseleave",m),e(".m-site-nav__logo").on("mouseenter",v),e(".m-site-nav__search__input").on("focus",g).on("blur",y),e(".m-site-nav__mobile-trigger").on("click",b),e(".m-site-nav__social-btn").on("mouseenter",w),r()}var k,x,A,E,S=10;return{init:function(){C()}}}(jQuery),jQuery(function(){SBN.Nav.init()});var SBN=SBN||{};SBN.DelayedLoadGlobalNav=function(e){return{init:function(){var t=e("#delayedLoadGlobalNavSubItems");t.find(".m-site-nav__dropdown").each(function(t,n){var i=e(n);e("#"+i.data("nav-id")).append(i)}),t.remove()}}}(jQuery);var SBN=SBN||{};SBN.UserNav=function(e){return{init:function(){this.config(function(){SBN.UserNav.mySbnToggle.off("click",SBN.UserNav.showMySbnModal),SBN.UserNav.mySbnToggle.on("click",SBN.UserNav.showMySbnModal)})},config:function(t){this.mySbnToggle=e("#user-nav-my-sbn"),t()},showMySbnModal:function(e){Chorus.EventDispatcher.publish("modal_open",{url:"/modal/mysbn"}),e.preventDefault()}}}(jQuery),jQuery(function(){SBN.UserNav.init()}),function(e){function t(e){var t={};e=(e||"").replace(/^(\?|\&)/,"").split("&");for(var n=0;n<e.length;n++){var i=e[n].split("=");i.length>1&&(t[i[0]]=i[1])}return t}function n(n,i){var o=n.attr("href"),a=n.attr("data-url");if(a&&r[i]&&(o=r[i]+encodeURIComponent(a)),o&&"#"!==o[0]){var s=o.match(/(.*(?:\?|\&)(?:url|u)=)([^&]+)(.*)/),l=n.closest("[data-analytics-placement]").attr("data-analytics-placement"),u=decodeURIComponent(s[2]).split("?"),d=u[0].split("#"),c=d[0]||u[0],f=d[1]||"",h=e.extend({utm_campaign:location.hostname.replace(/(www\.)?(.+)\.com/,"$2"),utm_content:Chorus.Analytics.contentType()+(l?":"+l:""),utm_medium:"social",utm_source:i},t(u[1]),t(n.attr("data-params")));o=""==f.trim()?s[1]+encodeURIComponent(c+"?"+e.param(h))+s[3]:s[1]+encodeURIComponent(c+"?"+e.param(h)+"#"+f)+s[3],n.attr("href",o)}return o}var i,r={facebook:"http://www.facebook.com/share.php?u=",twitter:"https://twitter.com/intent/tweet?url=",pinterest:"https://www.pinterest.com/pin/create/button/?url="};e("[data-analytics-social]").on("click",function(t){var r,o,a=e(this),s=a.attr("data-analytics-social"),l=n(a,s),u=570,d=570;if(Chorus.Context.is_preview)return t.stopPropagation(),alert("Social buttons cannot be used during preview.");switch(s){case"facebook":d=279;break;case"twitter":d=279;break;case"linkedin":d=520;break;case"pinterest":u=d=750;break;case"reddit":d=500}if("#"!==l[0]&&"_blank"!==a.attr("target")&&"whatsapp"!==s){i&&i.close&&i.close(),o=screen.width/2-u/2,r=screen.height/2-d/2,i=window.open(l,"","width="+u+", height="+d+", top="+r+", left="+o),t.preventDefault();var c=window.open;window.open=function(){},setTimeout(function(){window.open=c},0)}}),function(e,t,n){function i(){var e,i=t.getElementsByTagName(n)[0],r=function(r,o){t.getElementById(o)||(e=t.createElement(n),e.src=r,e.id=o,i.parentNode.insertBefore(e,i))};Util.UserAgentProfiler.isAndroidLt3()||(r("https://connect.facebook.net/en_US/sdk.js","fbjs"),r("https://platform.twitter.com/widgets.js","tweetjs"))}e.addEventListener?e.addEventListener("load",i,!1):e.attachEvent&&e.attachEvent("onload",i)}(window,document,"script"),function(){function t(){d();var e=u,t=i.scrollTop(),r=t>=a,o=!s||t<=s;u=r&&o&&!l,u!==e&&(Chorus.EventDispatcher.publish("fixedSocial",{isFixed:u,position:n.position()}),n.toggleClass("fixed",u))}var n=e("#chorus-social-fixed");if(n.length){n.appendTo("body");var i=e(window),r=e("#chorus-social-fixed-threshold"),o=e("#comments"),a=0,s=0,l=!1,u=!1,d=_.throttle(function(){Chorus.Environment.touch()&&(l=screen.width>window.innerWidth),r.length&&(a=r.offset().top),o.length&&(s=o.offset().top)},1500);e(document).on("scroll",_.throttle(t,150)),t()}}(),e("[data-shareable-content]").each(function(){var t=e(this),n=t.attr("data-original")||t.attr("src");if(!n){var i=this.currentStyle||window.getComputedStyle(this,!1);n=i&&i.backgroundImage.slice(4,-1)}if(n){var o="m-shareable-content",a=o+"__wrap",s=r.pinterest+encodeURIComponent(location.href)+"&media="+encodeURIComponent(n),l=Chorus.Environment.touch()?" touch":"";if(t.is("img")){var u=t.closest("."+a);t=u.length?u:t.wrap('<div class="'+a+'"></div>').parent()}else t.toggleClass(a,!0);t.prepend('<a href="'+s+'" class="'+o+"__pinterest"+l+'" data-analytics-social="pinterest"></a>')}})}(jQuery);var Chorus=Chorus||{};Chorus.DynamicSizedImages=function(e){function t(t,n){var s={failure_limit:20,load:function(){var t=e(this),n=t.parent(".image-window");if(t.is("img")&&(n.length>0?(t.css({position:"absolute",top:Math.round((n.outerHeight()-t.outerHeight())/2),left:Math.round((n.outerWidth()-t.outerWidth())/2)}),"undefined"==typeof t.attr("height")&&t.css("height","auto")):"undefined"==typeof t.attr("height")&&t.css("height","auto")),t.addClass(o),t.removeClass(a),t.removeClass("m-chorus-asset__in-entry-body"),e.fn.playGIF){var i=Chorus.Context.gif_opts||{};if(Chorus.Context&&Chorus.Context.main_link_color&&(i.circleBackgroundColor=Chorus.Context.main_link_color,i.circleTextColor="FFFFFF"),"undefined"==typeof PLAYGIF_DISABLE_FLAG){var r=e('.m-entry__body img[src*=".gif"], .m-entry__body img[data-original*=".gif"], .m-block__fanshot-media img[src*=".gif"]'),s=e('.m-entry__top-hero .m-entry__photo img[data-original*=".gif"]');r.length+s.length===1?PLAYGIF_DISABLE_FLAG=!0:r&&r.length>0&&(PLAYGIF_DISABLE_FLAG=!1,r.playGIF(i))}t.playGIF(i)}},threshold:800};n&&e.extend(s,n),t=e("undefined"!=typeof t&&null!==t?t:"body");var l=t.find(r+":visible").not("."+a+", ."+o),u=[],d=[];l.each(function(){var t,n,r,o,l,c=e(this),f=c.attr("data-imgkey"),h=c.data("chorus-asset-id");if("undefined"!=typeof f){if(s.parentDimensionSlc){var p=c.closest(s.parentDimensionSlc);t=p.outerWidth(),n=p.outerHeight()}t||(t=c.outerWidth()),n||(n=c.outerHeight()),0==n&&(r=c.data("ratio"),n="undefined"!=typeof r&&r>0?Math.ceil(t/r):t),c.is("img")&&(r=c.data("ratio"),o=c.parent(".image-window"),"undefined"!=typeof r&&r>0&&(n=Math.ceil(t/r)),o.length>0&&(t=Math.ceil(o.outerWidth()),n=Math.ceil(o.outerHeight())),n>0&&c.css("height",n)),"undefined"!=typeof window.devicePixelRatio&&(t=Math.ceil(t*window.devicePixelRatio),n=Math.ceil(n*window.devicePixelRatio)),Chorus.Context&&"racked"===Chorus.Context.network_slug&&(t=Math.ceil(1.3*t),n=Math.ceil(1.3*n)),/\.(png|jpg|jpeg)$/i.test(c.attr("data-original"))&&i.webp&&!Chorus.Modernizr.touch&&(l="webp");var m=f+":"+t+"x"+n+(l?":"+l:"");u.push(m),c.attr("data-dim",t+"x"+n),c.addClass(a)}else if("undefined"!=typeof h){t=c.outerWidth(),n=c.outerHeight(),c.is("img")&&(r=c.data("ratio"),o=c.parent(".image-window"),"undefined"!=typeof r&&r>0&&(n=Math.ceil(t/r)),o.length>0&&(t=Math.ceil(o.outerWidth()),n=Math.ceil(o.outerHeight())),n>0&&c.css("height",n)),"undefined"!=typeof window.devicePixelRatio&&(t=Math.ceil(t*window.devicePixelRatio),n=Math.ceil(n*window.devicePixelRatio)),"racked"===Chorus.Context.network_slug&&(t=Math.ceil(1.3*t),n=Math.ceil(1.3*n));var v=h+":"+t+":"+n;d.push(v),c.data("asset-key",v),c.addClass(a)}else c.lazyload(s)}),0===u.length&&0===d.length||(e.each([d,u],function(e,t){t.sort(function(e,t){return+e.split(":")[0]-+t.split(":")[0]})}),e.ajax({type:"GET",url:"/services/optimally_sized_images",dataType:"json",contentType:"application/json",timeout:1e4,data:{imgkeys:u.join(","),asset_keys:d.join(",")},success:function(t){var n=t.urls,i={};_.forEach(n,function(e,t){var n=t.replace(/\:webp|\:jp2/,"");i[n]=e}),n=i,l.each(function(){var t,i=e(this);t=i.attr("data-imgkey")?i.attr("data-imgkey")+":"+i.attr("data-dim"):i.data("asset-key");var r=n[t];"undefined"!=typeof r&&(i.attr("data-original",r),i.lazyload(s))})}}))}e(document).ready(function(){Chorus.DynamicSizedImages.init(),Chorus.EventDispatcher&&Chorus.EventDispatcher.publish("dynamic-images-available",{},!0)});var n={},i={webp:!1,jp2:!1},r=".vox-lazy-load",o="lazy-loaded",a="lazy-loading";return n.init=function(){function e(){if(Chorus.Modernizr.localstorage&&window.localStorage.getItem("supportsWebp"))i.webp="true"===window.localStorage.getItem("supportsWebp"),r();else{var e=new Image;e.onload=function(){i.webp=!!(e.height>0&&e.width>0),Chorus.Modernizr.localstorage&&window.localStorage.setItem("supportsWebp",i.webp),r()},e.onerror=function(){i.webp=!1,Chorus.Modernizr.localstorage&&window.localStorage.setItem("supportsWebp",i.webp),r()},e.src="data:image/webp;base64,UklGRiYAAABXRUJQVlA4IBoAAAAwAQCdASoBAAEAAIAOJaQAA3AA/v89WAAAAA=="}}function r(){Chorus&&Chorus.Context&&Chorus.Context.defer_image_loading?Chorus.Context.defer_image_loading=!1:n.initUI(),Chorus.EventDispatcher&&Chorus.EventDispatcher.subscribe("moduleInserted",function(e){t(e.modules)})}e()},n.initUI=function(e,n){t(e,n)},n.applyTo=function(e,n){t(e,n)},n}(jQuery);var SBN=SBN||{};SBN.EmcAdmin=function(e){function t(t,n){var i=t.find("input"),r=n.find("input");i.each(function(t){var n=e(this),i=e(r[t]),o=i.val();i.val(n.val()),n.val(o)})}function n(n){var i=e(n.currentTarget).closest("li"),r=i.prev("li");t(i,r)}function i(n){var i=e(n.currentTarget).closest("li"),r=i.next("li");t(i,r)}return{init:function(){0!=Chorus.Context.emc_admin&&($doc=e(document),$doc.on("click",".m-emc-admin__reorderable-list .up",n),$doc.on("click",".m-emc-admin__reorderable-list .down",i))}}}(jQuery),jQuery(function(){SBN.EmcAdmin.init()});var SBN=SBN||{};SBN.FighterMediaCarousel=function(e){function t(t,n){var i=t.data("carousel-current-pane")||0,r=t.data("carousel-panes-count"),o=t.find(".m-mmaf-pte-media__carousel-inner");i=n===!0?i-1:i+1,i<0?i=r-1:i>=r&&(i=0),t.find(".m-mmaf-pte-media__carousel-item").css({left:0-i*o.width()+"px"}),t.data("carousel-current-pane",i),_.delay(e(window).trigger("resize"),1e3)}function n(n){n.stopPropagation(),t(e(n.currentTarget).closest(".m-mmaf-pte-media__carousel"),n.data.back)}return{init:function(){var t=e(".m-mmaf-pte-media__carousel");t.length>0&&t.each(function(){var t=0,i=e(this),r=i.find(".m-mmaf-pte-media__carousel-inner");if(r.children().each(function(){t=t+e(this).width()-4}),t>i.width())if(i.data("carousel-panes-count",Math.ceil(t/r.width())),Chorus.Environment.touch()===!0)r.swipeEvents(),r.on("swipeLeft",{back:!0},n),r.bind("swipeRight",{back:!1},n);else{i.addClass("has-controls");var o=e('<div class="m-mmaf-pte-media__carousel-back">&lang;</div>').css({lineHeight:i.height()-40+"px"});o.on("click",{back:!0},n),i.append(o);var a=e('<div class="m-mmaf-pte-media__carousel-next">&rang;</div>').css({lineHeight:i.height()-40+"px"});a.on("click",{back:!1},n),i.append(a)}})}}}(jQuery),jQuery(function(){SBN.FighterMediaCarousel.init()});var SBN=SBN||{};SBN.FighterIndex=function(e){function t(t){n(),e("a.is-selected").removeClass("is-selected"),e(".m-mmaf-pte-fighter-index__head").remove(),e('a[data-fighter-letter="'+t+'"]').addClass("is-selected"),e.post("/fighters",{letter:t},o)}function n(){var t=e(".m-mmaf-pte-fighter-index__items");t.css("min-height",t.height()),t.html('<li class="loading"><span class="msg">Loading...</span></li>')}function i(t){for(var n=[],i=t.length-1;i>0;i--){var r=t[i].data;n.unshift('<li><a href="/fighter/'+r.id+"/"+r.slug+'">'+r.name+"</a></li>")}e(".m-mmaf-pte-fighter-index__items").html(n.join(""))}function r(n){t(e(n.currentTarget).data("fighter-letter"))}function o(e){i(e)}return{init:function(){e(".m-mmaf-pte-fighter-index").length<1||e("a[data-fighter-letter]").on("click",r)}}}(jQuery),jQuery(SBN.FighterIndex.init);var Chorus=Chorus||{};Chorus.EditoriallyManagedCell=function(e,t){"use strict";function n(e){for(var t={},n=e.serializeArray(),i=n.length-1;i>-1;i--){var r=n[i].name,o=n[i].value;t[r]?t[r]=_.flatten([t[r],o]):t[r]=o}return t}function i(){alert("There was an error updating this cell. Please check your URL and/or that all fields are completed.")}function r(t){t.preventDefault();var n=e(t.currentTarget);a(n.closest(".chorus-emc__admin"),n.data("emc-action"),n.data("emc-data"))}function o(t){t.preventDefault();var i=e(t.currentTarget),r=i.closest("form");a(e('.chorus-emc__admin[data-emc-slug="'+r.data("emc-slug")+'"]'),"update",_.extend(n(r),{button_action:i.data("emc-action")}))}function a(t,n,r){var r=_.extend({slug:t.data("emc-slug"),bucket:t.data("emc-bucket")},r),o=u[n];if("edit"===n||"help"===n)Chorus.EventDispatcher.publish("modal_open",{method:a,url:o,data:r});else{var a="update"==n?"POST":"GET";s(t),e.ajax({method:a,url:o,data:r,success:function(n){Chorus.EventDispatcher.publish("modal_close");var i=e('.chorus-emc__content[data-emc-slug="'+t.data("emc-slug")+'"]');i.length>0&&i.replaceWith(n)},error:i})}}function s(t){e(t).find(".chorus-emc__content").html("Loading...")}function l(){e(t).on("click",".chorus-emc__admin *[data-emc-action]",r),e(t).on("click",".chorus-emc__form *[data-emc-action]",o)}var u={edit:"/editorially_managed_cells/handle_edit",update:"/editorially_managed_cells/handle_update",preview:"/editorially_managed_cells/preview",show_live:"/editorially_managed_cells/refresh",help:"/editorially_managed_cells/help"};return{init:l,urls:u}}(jQuery,document),jQuery(function(){Chorus.EditoriallyManagedCell.init()});var Chorus=Chorus||{};Chorus.Modal=function(e){"use strict";function t(){if(null===w){var t=e(b());g.append(t),t.on("click",p),w=t.find(".m-chorus-modal__root").addBack(".m-chorus-modal__root").first()}}function n(){t(),g.addClass("chorus-modal-loading")}function i(){g.removeClass("chorus-modal-loading")}function r(){t(),g.addClass("chorus-modal-open")}function o(){g.removeClass("chorus-modal-open")}function a(t){n();t.data||{};t.success=function(e){t.content=e,s(t)},t.error=function(e,t){"abort"!==t&&alert("There was an error recieving data from the server."),i()},C.push(e.ajax(t))}function s(t){i(),r();var n=e(y(t));if(n.find(".m-chorus-modal__window-root").append(t.content),t.includeCloseButton){var o=e('<div class="m-chorus-modal__close">&times;</div>');o.on("click",v),n.find(".m-chorus-modal__window-root").append(o)}n.addClass(t.modalClass),n.data("chorus-modal-callbacks",t.callbacks),w.prepend(n),n.on("click","*[data-chorus-modal-action]",h),d("attach",n)}function l(e){e.remove(),0===w.children().length&&(o(),i())}function u(e){e.callbacks=e.callbacks||{},e.title=e.title||"Untitled Modal",e.content=e.content||null,e.modalClass=e.modalClass||null,e.url?a(e):null!==e.content&&s(e)}function d(e,t){var n=t.data("chorus-modal-callbacks");if("cancel_confirm"===e){if(!confirm("Are you sure you want to close this window?"))return;e="cancel"}"function"==typeof n[e]&&n[e](t),"cancel"!=e&&"close"!=e||l(t)}function c(){for(Chorus.EventDispatcher.publish("modal_closed_by_modaljs"),e(".m-chorus-modal__window").each(function(){d("cancel",e(this))}),null!==w&&w.empty(),o(),i();C.length>0;)C.pop().abort()}function f(){k=!0;var t=e("#chorus-modal-window-template").html()||"",n=e("#chorus-modal-wrapper-template").html()||"";g=e("body"),y=_.template(t),b=_.template(n)}function h(t){t.preventDefault(),d(e(t.target).data("chorus-modal-action").toString().trim(),e(t.delegateTarget))}function p(t){e(t.target).is(w)&&c()}function m(e){k===!1&&f(),u(e)}function v(){c()}var g,y,b,w=null,C=[],k=!1;return{init:function(){Chorus.EventDispatcher.subscribe("modal_open",m),Chorus.EventDispatcher.subscribe("modal_close",v)},open:function(e){Chorus.EventDispatcher.publish("modal_open",e)},close:function(e){Chorus.EventDispatcher.publish("modal_close",e)}}}(jQuery),Chorus.Modal.init();var Chorus=Chorus||{};Chorus.RemoteEntryAdminPermissions=function(e){"use strict";function t(){var t=e(s).map(function(t,n){return e(n).data(o)});t=_.uniq(_.compact(t)).sort(),t.length&&e.ajax({method:"GET",url:a,dataType:"json",data:{entry_ids:t.join(":")},success:n,error:i})}function n(e){r=_.extend(r,{loaded:!0},e),Chorus.EventDispatcher.publish("permissionsLoaded",_.clone(r),!0)}function i(){console&&console.error("there was an error loading the permissions object from the client controls")}var r={loaded:!1},o="remote-admin-entry-id",a="/services/entry_permissions",s="*[data-"+o+"]";return{init:function(){Chorus.Context.logged_in!==!1&&t()},getPermissions:function(){return r}}}(jQuery),jQuery(Chorus.RemoteEntryAdminPermissions.init);var Chorus=Chorus||{};Chorus.EntryAdminControls=function(e){"use strict";function t(t){e(m).each(function(n,i){var r=e(i),o=r.data(h),a=t[o];if(a&&a.permitted===!0){var s=r.data(p);"button"===s&&(r.append(b(a)),r.on("click",l)),"pane"===s&&r.load(v,{entry_id:o},function(){r.on("mouseenter",u),r.on("mouseleave",d)})}}),e("body").on("click","#inspect-images-link",c),e("body").on("click","#hide-entry-link",f)}function n(e){Chorus.EventDispatcher.publish("modal_open",{url:g,data:{entry_id:e}})}function i(e){return"*[data-"+h+'="'+e+'"][data-'+p+'="pane"]'}function r(t){e(i(t)).addClass("is-active")}function o(t){e(i(t)).removeClass("is-active")}function a(t){var n="Hidden"===t.text();t.text(n?"Unhiding":"Hiding"),e.ajax({method:"POST",url:t.attr("href"),dataType:"text",complete:function(){location.reload(!0)}})}function s(e){t(e)}function l(t){if(Util.UserAgentProfiler.isMobile()===!1){var r=e(t.delegateTarget).data(h);e(i(r)).length<1&&(t.preventDefault(),n(r))}}function u(t){r(e(t.delegateTarget).data(h))}function d(t){o(e(t.delegateTarget).data(h))}function c(t){t.preventDefault(),Chorus.EventDispatcher.publish("modal_open",{url:y+"/"+e(t.target).data(h)})}function f(t){var n=confirm("Are you sure?");return!!n&&(t.preventDefault(),void a(e(t.target)))}var h="remote-admin-entry-id",p="remote-admin-entry-type",m="*[data-"+p+"]",v="/remote_entry_admin/pane",g="/services/entry_admin_modal",y="/remote_entry_admin/image_sizes_modal",b=_.template('<a href="[%= data.edit_url%]">Edit Entry</a>');return{init:function(){Chorus.Context.logged_in!==!1&&Chorus.EventDispatcher.subscribe("permissionsLoaded",s)}}}(jQuery),jQuery(Chorus.EntryAdminControls.init);var Chorus=Chorus||{};Chorus.RemoteHeadlineEdit=function(e){"use strict";function t(t){var n=t.data("remote-headline-promo-headine"),i=e(b({current_headline:t.text().replace(/"/g,"&quot;"),headline_save_url:g,field:t.data(m),entry_id:t.data(p),include_buttons:!n}));if(t.after(i),t.addClass("is-editing"),i.on("change",'input[type="text"]',f),i.on("click",'input[type="submit"]',c),i.on("click",'input[value="cancel"]',d),i.on("submit",function(e){e.preventDefault()}),n){var r=e(b({current_headline:n.replace(/"/g,"&quot;"),
headline_save_url:g,field:v,entry_id:t.data(p),include_buttons:!0}));i.after(r),r.on("change",'input[type="text"]',f),r.on("click",'input[type="submit"]',c),r.on("click",'input[value="cancel"]',d),r.on("submit",function(e){e.preventDefault()})}}function n(t,n){return n===v&&(n="title"),e("*[data-"+m+'="'+n+'"][data-'+p+'="'+t+'"]')}function i(e){n(e.data(p),e.data(m)).removeClass("is-editing"),e.siblings(".m-inline-headline-edit__form").remove(),e.remove()}function r(e){e.find('input[type="text"], input[type="submit"]').prop("disabled",!0)}function o(e){e.find('input[type="text"], input[type="submit"]').prop("disabled",!1)}function a(e){e.data("remote-headline-edit-submit",!0)}function s(t){t.add(t.siblings(".m-inline-headline-edit__form")).each(function(t,a){var s=e(a);if(s.data("remote-headline-edit-submit")===!0){var l=s.find('input[name="entry_id"]').val(),u=s.find('input[name="new_value"]').val(),d=s.find('input[name="field"]').val();r(s),e.ajax({method:"POST",url:g,dataType:"json",data:{entry_id:l,field:d,value:u},success:function(){d===v?n(l,"title").data("remote-headline-promo-headine",u):n(l,d).text(u),i(s),alert(Util.stringToTitleCase(d.replace(/_/g," "))+" saved!")},error:function(){o(s),alert("There was an error recieving data from the server.")}})}})}function l(t){e("*[data-"+m+"]").each(function(n,i){var r=e(i),o=t[r.data(p)];o&&o.permitted===!0&&(r.addClass("is-editable"),r.on("click",u))})}function u(n){n.preventDefault();var i=e(n.delegateTarget);i.hasClass("is-editing")===!1&&t(i)}function d(t){t.preventDefault(),i(e(t.delegateTarget))}function c(t){t.preventDefault(),s(e(t.delegateTarget))}function f(t){a(e(t.delegateTarget))}function h(e){e.is_headline_editor===!0&&l(e)}var p="remote-admin-entry-id",m="remote-headline-edit",v="promo_headline_field",g="/remote_entry_admin/update_title",y=['<form action="[%= data.headline_save_url %]" data-'+p+'="[%= data.entry_id %]" data-'+m+'= "[%= data.field %]" method="post" class="m-inline-headline-edit__form">','<label for="new_value">[%= data.field.replace(/_/g, " ")  %]</label>','<input type="text" name="new_value" value="[%= data.current_headline %]" />','<input type="hidden" name="entry_id" value="[%= data.entry_id %]" />','<input type="hidden" name="field" value="[%= data.field %]" />','[% if (data.include_buttons === true) { %]<input type="submit" value="Save" class="p-button"/>','<input type="button" value="cancel" class="p-button" /> [% } %]',"</form>"].join(""),b=_.template(y);return{init:function(){Chorus.Context.logged_in!==!1&&Util.UserAgentProfiler.isMobile()!==!0&&Chorus.EventDispatcher.subscribe("permissionsLoaded",h)}}}(jQuery),jQuery(Chorus.RemoteHeadlineEdit.init);var Chorus=Chorus||{};Chorus.HubAdminMenu=function(e){"use strict";function t(){n.on("click",function(){n.toggleClass("is-open")})}var n=e("#hub-admin-menu");return{init:function(){t()}}}(jQuery),jQuery(Chorus.HubAdminMenu.init);var Util=Util||{};Util.UserAgentProfiler=function(){var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,t=window.innerWidth,n=window.navigator.userAgent,i=e&&t<728||window.location.href.indexOf("mobile=true")>0,r=e&&t>=728,o=!i&&!r,a=/(iPad|iPhone|iPod)/g.test(n),s=a&&/OS\s(7|6_1_4)/g.test(n),l=/Android/g.test(n),u=!1,d=i?"mobile":r?"tablet":"desktop";if(n.indexOf("Android")>0)for(var c=n.split(";"),f=0,h=c.length;f<h;f++)if(c[f].indexOf("Android")>0){var p=c[f].split(" ");if(parseInt(p[p.length-1].split(".")[0])<3){u=!0;break}}return{screenWidth:function(){return t},profile:function(){return d},isTablet:function(){return r},isMobile:function(){return i},isDesktop:function(){return o},isAndroid:function(){return l},isAndroidLt3:function(){return u},isIOS:function(){return a},isIOS7:function(){return s},deviceTypeForAds:function(){return this.profile()},browserWidthForAds:function(){return Chorus.Environment.currentBreakpoint().name},doNotTrack:function(){var e;if(void 0!==navigator.doNotTrack)e=navigator.doNotTrack;else if(void 0!==window.doNotTrack)e=window.doNotTrack;else{if(void 0===navigator.msDoNotTrack)return"unsupported";e=navigator.msDoNotTrack}return/1|yes|true/.test(e)?"1":"0"}}}(),/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.0.sbn
 * - Hacked so that it lazy loads non-IMG tags
 * - Hacked so that the scroll event that ends up firing lazyload:appear is debounced
 * - Hacked so resize event is debounced
 * - Hacked so data attributes are not cached via jQuery (neccesary for optimization)
 *
 */
function(e,t){var n=e(t);e.fn.lazyload=function(i){function r(e,t){return"undefined"!=typeof _?_.debounce(e,t):e}function o(){var t=0;s.each(function(){var n=e(this);if(!l.skip_invisible||n.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("lazyload:appear")})}var a,s=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,scrollInterval:200,resizeInterval:250};if(i&&(void 0!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),void 0!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(l,i)),a=void 0===l.container||l.container===t?n:e(l.container),0===l.event.indexOf("scroll")){var u=function(){return o()};a.bind(l.event,r(u,l.scrollInterval))}this.each(function(){var n=this,i=e(n);n.loaded=!1,n.error_event_set=!1;var o=4e3,a=4,u=0,d=function(){if(!this.loaded){if(l.appear){var r=s.length;l.appear.call(n,r,l)}if("IMG"===this.tagName)e("<img />").bind("load",function(){i.hide().attr("src",i.attr("data-"+l.data_attribute))[l.effect](l.effect_speed),n.loaded=!0;var t=e.grep(s,function(e){return!e.loaded});if(s=e(t),l.load){var r=s.length;l.load.call(n,r,l)}}).bind("error",function(){n.error_event_set||t.setTimeout(e.proxy(c,this),o),n.error_event_set=!0}).attr("src",i.attr("data-"+l.data_attribute));else{i.css("background-image","url('"+i.attr("data-"+l.data_attribute)+"')")[l.effect](l.effect_speed),n.loaded=!0;var a=e.grep(s,function(e){return!e.loaded});if(s=e(a),l.load){var r=s.length;l.load.call(n,r,l)}}}},c=function(){if(u+=1,u<=a){e(this).bind("error",function(){t.setTimeout(e.proxy(c,this),o)});var n=this.src.split("?")[0];this.src=n+"?"+(new Date).getTime()}};if(i.one("lazyload:appear",d),0!==l.event.indexOf("scroll")){var f=function(){n.loaded||i.trigger("lazyload:appear")};i.bind(l.event,r(f,l.scrollInterval))}});var d=function(){o()};return n.bind("resize",r(d,l.resizeInterval)),o(),this},e.belowthefold=function(i,r){var o;return o=void 0===r.container||r.container===t?n.height()+n.scrollTop():e(r.container).offset().top+e(r.container).height(),o<=e(i).offset().top-r.threshold},e.rightoffold=function(i,r){var o;return o=void 0===r.container||r.container===t?n.width()+n.scrollLeft():e(r.container).offset().left+e(r.container).width(),o<=e(i).offset().left-r.threshold},e.abovethetop=function(i,r){var o;return o=void 0===r.container||r.container===t?n.scrollTop():e(r.container).offset().top,o>=e(i).offset().top+r.threshold+e(i).height()},e.leftofbegin=function(i,r){var o;return o=void 0===r.container||r.container===t?n.scrollLeft():e(r.container).offset().left,o>=e(i).offset().left+r.threshold+e(i).width()},e.inviewport=function(t,n){return!(e.rightofscreen(t,n)||e.leftofscreen(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window);var Chorus=Chorus||{};Chorus.DynamicSizedImages=function(e){function t(t,n){var s={failure_limit:20,load:function(){var t=e(this),n=t.parent(".image-window");if(t.is("img")&&(n.length>0?(t.css({position:"absolute",top:Math.round((n.outerHeight()-t.outerHeight())/2),left:Math.round((n.outerWidth()-t.outerWidth())/2)}),"undefined"==typeof t.attr("height")&&t.css("height","auto")):"undefined"==typeof t.attr("height")&&t.css("height","auto")),t.addClass(o),t.removeClass(a),t.removeClass("m-chorus-asset__in-entry-body"),e.fn.playGIF){var i=Chorus.Context.gif_opts||{};if(Chorus.Context&&Chorus.Context.main_link_color&&(i.circleBackgroundColor=Chorus.Context.main_link_color,i.circleTextColor="FFFFFF"),"undefined"==typeof PLAYGIF_DISABLE_FLAG){var r=e('.m-entry__body img[src*=".gif"], .m-entry__body img[data-original*=".gif"], .m-block__fanshot-media img[src*=".gif"]'),s=e('.m-entry__top-hero .m-entry__photo img[data-original*=".gif"]');r.length+s.length===1?PLAYGIF_DISABLE_FLAG=!0:r&&r.length>0&&(PLAYGIF_DISABLE_FLAG=!1,r.playGIF(i))}t.playGIF(i)}},threshold:800};n&&e.extend(s,n),t=e("undefined"!=typeof t&&null!==t?t:"body");var l=t.find(r+":visible").not("."+a+", ."+o),u=[],d=[];l.each(function(){var t,n,r,o,l,c=e(this),f=c.attr("data-imgkey"),h=c.data("chorus-asset-id");if("undefined"!=typeof f){if(s.parentDimensionSlc){var p=c.closest(s.parentDimensionSlc);t=p.outerWidth(),n=p.outerHeight()}t||(t=c.outerWidth()),n||(n=c.outerHeight()),0==n&&(r=c.data("ratio"),n="undefined"!=typeof r&&r>0?Math.ceil(t/r):t),c.is("img")&&(r=c.data("ratio"),o=c.parent(".image-window"),"undefined"!=typeof r&&r>0&&(n=Math.ceil(t/r)),o.length>0&&(t=Math.ceil(o.outerWidth()),n=Math.ceil(o.outerHeight())),n>0&&c.css("height",n)),"undefined"!=typeof window.devicePixelRatio&&(t=Math.ceil(t*window.devicePixelRatio),n=Math.ceil(n*window.devicePixelRatio)),Chorus.Context&&"racked"===Chorus.Context.network_slug&&(t=Math.ceil(1.3*t),n=Math.ceil(1.3*n)),/\.(png|jpg|jpeg)$/i.test(c.attr("data-original"))&&i.webp&&!Chorus.Modernizr.touch&&(l="webp");var m=f+":"+t+"x"+n+(l?":"+l:"");u.push(m),c.attr("data-dim",t+"x"+n),c.addClass(a)}else if("undefined"!=typeof h){t=c.outerWidth(),n=c.outerHeight(),c.is("img")&&(r=c.data("ratio"),o=c.parent(".image-window"),"undefined"!=typeof r&&r>0&&(n=Math.ceil(t/r)),o.length>0&&(t=Math.ceil(o.outerWidth()),n=Math.ceil(o.outerHeight())),n>0&&c.css("height",n)),"undefined"!=typeof window.devicePixelRatio&&(t=Math.ceil(t*window.devicePixelRatio),n=Math.ceil(n*window.devicePixelRatio)),"racked"===Chorus.Context.network_slug&&(t=Math.ceil(1.3*t),n=Math.ceil(1.3*n));var v=h+":"+t+":"+n;d.push(v),c.data("asset-key",v),c.addClass(a)}else c.lazyload(s)}),0===u.length&&0===d.length||(e.each([d,u],function(e,t){t.sort(function(e,t){return+e.split(":")[0]-+t.split(":")[0]})}),e.ajax({type:"GET",url:"/services/optimally_sized_images",dataType:"json",contentType:"application/json",timeout:1e4,data:{imgkeys:u.join(","),asset_keys:d.join(",")},success:function(t){var n=t.urls,i={};_.forEach(n,function(e,t){var n=t.replace(/\:webp|\:jp2/,"");i[n]=e}),n=i,l.each(function(){var t,i=e(this);t=i.attr("data-imgkey")?i.attr("data-imgkey")+":"+i.attr("data-dim"):i.data("asset-key");var r=n[t];"undefined"!=typeof r&&(i.attr("data-original",r),i.lazyload(s))})}}))}e(document).ready(function(){Chorus.DynamicSizedImages.init(),Chorus.EventDispatcher&&Chorus.EventDispatcher.publish("dynamic-images-available",{},!0)});var n={},i={webp:!1,jp2:!1},r=".vox-lazy-load",o="lazy-loaded",a="lazy-loading";return n.init=function(){function e(){if(Chorus.Modernizr.localstorage&&window.localStorage.getItem("supportsWebp"))i.webp="true"===window.localStorage.getItem("supportsWebp"),r();else{var e=new Image;e.onload=function(){i.webp=!!(e.height>0&&e.width>0),Chorus.Modernizr.localstorage&&window.localStorage.setItem("supportsWebp",i.webp),r()},e.onerror=function(){i.webp=!1,Chorus.Modernizr.localstorage&&window.localStorage.setItem("supportsWebp",i.webp),r()},e.src="data:image/webp;base64,UklGRiYAAABXRUJQVlA4IBoAAAAwAQCdASoBAAEAAIAOJaQAA3AA/v89WAAAAA=="}}function r(){Chorus&&Chorus.Context&&Chorus.Context.defer_image_loading?Chorus.Context.defer_image_loading=!1:n.initUI(),Chorus.EventDispatcher&&Chorus.EventDispatcher.subscribe("moduleInserted",function(e){t(e.modules)})}e()},n.initUI=function(e,n){t(e,n)},n.applyTo=function(e,n){t(e,n)},n}(jQuery),/*! usertiming v0.1.6 */
!function(e){"use strict";"undefined"==typeof e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var t,n,i=[],r=[],o=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,r=["webkitNow","msNow","mozNow"],t=0;t<r.length;t++)if("function"==typeof e.performance[r[t]]){e.performance.now=e.performance[r[t]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart&&(a=e.performance.timing.navigationStart),"function"!=typeof e.performance.now&&(e.performance.now=Date.now?function(){return Date.now()-a}:function(){return+new Date-a})}var s=function(){},l=function(){},u=[],d=!1,c=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(c=!0),e.performance.userTimingJsPerformanceTimeline=!0,i=["webkit","moz"],r=["getEntries","getEntriesByName","getEntriesByType"],t=0;t<r.length;t++)for(n=0;n<i.length;n++)o=i[n]+r[t].substr(0,1).toUpperCase()+r[t].substr(1),"function"==typeof e.performance[o]&&(e.performance[r[t]]=e.performance[o],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);s=function(e){u.push(e),"measure"===e.entryType&&(d=!0)};var f=function(){d&&(u.sort(function(e,t){return e.startTime-t.startTime}),d=!1)};if(l=function(e,n){for(t=0;t<u.length;)u[t].entryType!==e||"undefined"!=typeof n&&u[t].name!==n?t++:u.splice(t,1)},"function"!=typeof e.performance.getEntries||c){var h=e.performance.getEntries;e.performance.getEntries=function(){f();var t=u.slice(0);return c&&h&&(Array.prototype.push.apply(t,h.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}}if("function"!=typeof e.performance.getEntriesByType||c){var p=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if("undefined"==typeof n||"mark"!==n&&"measure"!==n)return c&&p?p.call(e.performance,n):[];"measure"===n&&f();var i=[];for(t=0;t<u.length;t++)u[t].entryType===n&&i.push(u[t]);return i}}if("function"!=typeof e.performance.getEntriesByName||c){var m=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,i){if(i&&"mark"!==i&&"measure"!==i)return c&&m?m.call(e.performance,n,i):[];"undefined"!=typeof i&&"measure"===i&&f();var r=[];for(t=0;t<u.length;t++)("undefined"==typeof i||u[t].entryType===i)&&u[t].name===n&&r.push(u[t]);return c&&m&&(Array.prototype.push.apply(r,m.call(e.performance,n,i)),r.sort(function(e,t){return e.startTime-t.startTime})),r}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,i=["webkit","moz","ms"],r=["mark","measure","clearMarks","clearMeasures"],t=0;t<r.length;t++)for(n=0;n<i.length;n++)o=i[n]+r[t].substr(0,1).toUpperCase()+r[t].substr(1),"function"==typeof e.performance[o]&&(e.performance[r[t]]=e.performance[o],e.performance.userTimingJsUserTimingPrefixed=!0);var v={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var n=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");v[t]||(v[t]=[]),v[t].push(n),s({entryType:"mark",name:t,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?v[e]=[]:v={},l("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,n,i){var r=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Measure must be specified");if(!n)return void s({entryType:"measure",name:t,startTime:0,duration:r});var o=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");o=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in v))throw new Error(n+" mark not found");o=v[n][v[n].length-1]}var a=r;if(i)if(a=0,e.performance.timing&&i in e.performance.timing){if("navigationStart"!==i&&0===e.performance.timing[i])throw new Error(i+" has a timing of 0");a=e.performance.timing[i]-e.performance.timing.navigationStart}else{if(!(i in v))throw new Error(i+" mark not found");a=v[i][v[i].length-1]}var l=a-o;s({entryType:"measure",name:t,startTime:o,duration:l})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){l("measure",e)})}"undefined"!=typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0),/*!
 * IframeClient v0.0.5
 * Copyright 2015, Vox Media
 * Released under MIT license
 */
function(e,t){var n={debug:!1,create:function(n,i){return t(this,n,i,e)},isInIframe:function(){try{return e.parent&&e.self!==e.top}catch(e){return!0}},error:function(e){if(this.debug)throw e}};"object"==typeof module&&module.exports?module.exports=n:e.IframeClient=n}(window,function(e,t,n,i){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var o=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r(),a="@app",s=t||"xframe",l="@res",u=200,d=[],c={},f={},h=0,p=null,m=null;return{host:n||"*",get id(){return o},src:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e&&e instanceof Element&&e.contentWindow&&(e=e.contentWindow),e&&"function"==typeof e.postMessage?e:null},post:function(t,n,i){if(t=this.src(t),!t||!n)return e.error("invalid post");var r="string"==typeof n?{message:n}:n;if(void 0!==i&&(r.value=i),r.message){r[a]=s;try{t.postMessage(JSON.stringify(r),this.host)}catch(t){e.error(t)}}},request:function(t,n,i,r,a){function s(){var e=!1;for(var t in c)if(c.hasOwnProperty(t)){var n=c[t];n.attempts++<n.timeout/u?(l.post(n.src,n.data),e=!0):l.end(t,new Error("request timeout"))}p=e?setTimeout(s,u):null}if(t=this.src(t),!t||!n)return e.error("invalid request");var l=this,d=o+"-"+("0000"+h++).slice(-4),f=c[d]={timeout:a||15e3,attempts:0,src:t,cb:r,data:{message:n,value:i,id:d}};return p?this.post(t,f.data):s(),d},end:function(e,t){var n=e.id||e,i=t&&t.abort;if(c.hasOwnProperty(n)){var r=c[n];delete c[n],i||"function"!=typeof r.cb||r.cb(t||null,e.value)}},on:function(e,t,n){return d.push({message:e,fn:t,ctx:n}),this},listen:function(){function e(e,t){for(var n,i=0;i<d.length;i++){var r=d[i];r.message===t.message&&(n=r.fn.call(r.ctx,e,t.value))}return n}if(!m){var t=this;m=function(n){var i,r="*"===t.host||String(n.origin).indexOf(t.host)>=0;if(r&&/^\{.*\}$/.test(n.data))try{i=JSON.parse(n.data)}catch(e){i=null}if(r&&i&&i[a]===s)if(i.id){var o=i.message===l;o&&c.hasOwnProperty(i.id)?t.end(i):o||f.hasOwnProperty(i.id)||(f[i.id]=!0,t.post(n.source,{message:l,value:e(n,i)||"success",id:i.id}))}else e(n,i)},i.addEventListener("message",m)}return this},stopListening:function(){return m&&(i.removeEventListener("message",m),m=null),this},dispose:function(){clearInterval(p),this.stopListening()}}}),function(e){function t(e){return new n(e)}function n(e){if(!i)throw"volume is not installed";this.el=i.src(e)}var i,r={production:"https://volume.vox-cdn.com",sandbox:"https://volume-staging.vox-cdn.com",development:"http://volume.local.sbndev.net:4000"};t.embedHost=r[Chorus.Context.environment],t.selectAllEmbeds=function(){return document.querySelectorAll('iframe[src^="'+this.embedHost+'/embed"]')},t.install=function(e){e&&(this.embedHost=e);var n,r=(this.selectAllEmbeds(),document.querySelectorAll(".volume-video"));for(i?i.host=this.embedHost:i=IframeClient.create("volume",this.embedHost).on("analytics",function(e,n){t.reportEvent(n)}).on("pauseOthers",function(e){t.postToAll("pause",null,e.source)}).on("host",function(){return{url:location.href,origin:location.origin,title:document.title,api:!0}}).listen(),n=0;n<r.length;n+=1)this.embedVideo(r[n]);return this},t.uninstall=function(){i&&(i.dispose(),i=null)},t.reportEvent=function(e){Chorus.Analytics.event(e)},t.embedVideo=function(e){if(e){var t=e.getAttribute("data-volume-uuid");if(t){var n={placement:e.getAttribute("data-volume-placement"),tracking:e.getAttribute("data-analytics-placement"),player_type:e.getAttribute("data-volume-player-choice"),start_time:e.getAttribute("data-volume-start-time")},i=String(e.getAttribute("data-volume-autoplay"));"1"!==i&&"true"!==i||(n.autoplay=!0);var r=Object.keys(n).filter(function(e){return void 0!==n[e]}).map(function(e){return e+"="+encodeURIComponent(n[e])});e.className=e.className.replace(/volume-video|p-scalable-video/g,"")+" p-scalable-video",e.innerHTML='<iframe src="'+this.embedHost+"/embed/"+t+"?"+r.join("&")+'" frameborder="0" allowfullscreen></iframe>'}}},t.postToAll=function(e,t,n){for(var r=this.selectAllEmbeds(),o=0;o<r.length;o++){var a=i.src(r[o]);a!==n&&i.post(a,e,t)}},n.prototype={play:function(e){var t="play";return e&&e.request?this.request(t):this.post(t)},pause:function(e){var t="pause";return e&&e.request?this.request(t):this.post(t)},post:function(e,t){return i&&i.post(this.el,e,t),this},request:function(e,t,n){return i&&i.request(this.el,e,t,n),this}},jQuery(document).ready(function(){e.volume=t.install()})}(this);var Volume=Volume||{};Volume.Config=function(){function e(e){if(0!==Object.keys(e).length){s=e.configs;var t=Util.UserAgentProfiler;if(t.isMobile())var n="mobile";else if(t.isTablet())var n="tablet";else var n="desktop";var i=e.device[n];i&&(a=i)}}function t(e){if("undefined"!=typeof a&&a.hasOwnProperty(e))return a[e]}function n(e){var n=t(e);if("undefined"!=typeof n)return n.preferred}function i(e,n){var i=t(e);if("undefined"!=typeof i){var r=n||i.preferred,o=i[r];return o?s[o]:void 0}}function r(e){"function"==typeof e?l=e:"undefined"==typeof e&&l()}function o(t){"undefined"!=typeof t&&(e(t),Volume.Config.ready())}var a,s,l=function(){};return{init:o,ready:r,placementConfig:i,preferredPlacementPlayer:n}}(jQuery);var Volume=Volume||{};Volume.Player=function(e){function t(){var t=e(i);t.each(function(t,i){var r=e(i),o=r.attr("id");"undefined"==typeof r.data("volume-uuid")&&n(o)})}function n(t){var n=e("#"+t),i=n.data("volume-id"),r=(n.data("volume-placement"),n.data());"undefined"!=typeof r&&(r.autoplay=r.volumeAutoplay),"undefined"!=typeof t&&"undefined"!=typeof i&&Chorus&&Chorus.VideoContext&&Chorus.VideoContext.createVolumePlayer(t,i,r)}var i=".volume-video:not(.prevent-init)";return{init:t,create:n}}(jQuery),Volume.Config.ready(function(){Volume.Player.init()});var Chorus=Chorus||{};!function(e){function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];o[n]=function(){return console.log('[VideoContext]: The "'+n+'" method is deprecated. Please use "'+e+'" instead.'),o[e].apply(o,arguments)}}}function n(){function e(e){return function(){for(var t in o.players)"function"==typeof o.players[t][e]&&o.players[t][e]()}}n.init||(n.init=!0,jQuery(document).on("pause",e("suspend")).on("resume",e("resume")).find("head").append('<script src="https://resources.amazonwebapps.com/v1/latest/Amazon-Web-App-API.min.js" async></script>'))}var i="viewedVideos",r=1e5,o=Chorus.VideoContext={videos:{},players:{},getVideo:function(e){return this.videos[e]||null},getVideoById:function(e){for(var t in this.videos)if(this.videos[t].id===e)return this.videos[t]},addPlacementForId:function(t,n){var i=this.getVideoById(t);i&&(i=e.extend({},i),i.placement=n,this.addVideo(i))},addVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];n.preview_urls=n.preview_urls||{},n.provider_video_data=n.provider_video_data||{},n.provider_video_id=n.provider_video_id||"",n.placement=n.placement||null,n.type=n.provider_video_type=n.provider_video_type||"other",n.title=n.title||"No Title",delete n.hasViewport,this.videos[n.placement||n.id]=n}return this},addVolumeVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.videos[n.id]=n}return this},createVolumePlayer:function(t,i,r){var o=this.getVideo(i);if(o){for(var a=e("#"+t),s=a.data("volume-placement"),l=r.volumePlayerChoice,u=Volume.Config.preferredPlacementPlayer(s),d=["youtube","brightcove"],c=l||u,f=o[c+"_id"],h=0;null==f&&h<d.length;h++)c=d[h],f=o[c+"_id"];if(null!=f){var r=e.extend(Volume.Config.placementConfig(s,c),r),p={youtube:YoutubeWrapper,brightcove:BrightcoveWrapper,embed:EmbedWrapper}[c];if(p){var m,v=a.attr("id");p!==BrightcoveWrapper&&(v=a.attr("id")+"-target",m='<div id="'+v+'"></div>'),this.destroyPlacement(v),a.addClass("p-scalable-video"),a.append(m),this.players[i]=new p(v,o,r),this.createViewport(v,i,r)}n()}}},destroyPlayer:function(e){var t=this.players[e];t&&"function"==typeof t.destroy&&t.destroy(),delete this.players[e]},destroyAllPlayers:function(){for(var e in this.players)this.destroyPlayer(e)},destroyPlacement:function(e){for(var t in this.players){var n=this.players[t];if(n.elementId===e)return this.destroyPlayer(t)}},createPlayer:function(e,t,i){i=i||{};var r=this.getVideo(t);if(r){var o={brightcove:BrightcoveWrapper,youtube:YoutubeWrapper,embed:EmbedWrapper}[r.type];o&&(this.destroyPlacement(e),this.players[t]=new o(e,r,i),this.createViewport(e,t,i)),n()}},createViewport:function(t,n,i){if(i=i||{},!i.disableViewport){var r=this.getVideo(n);r&&!r.hasViewport&&(r.hasViewport=!0,"string"==typeof t&&(t=e("#"+t)),Chorus.Analytics.trackElementView(t))}},createViewportProxy:function(t,n,i){var r="data-analytics-placement",o=e(n).attr(r,e(t).attr(r));return this.createViewport(o,i)},createViewportGroup:function(t,n,i){"function"==typeof n&&(i=n,n=null),n=n||"data-placement",e(t).each(function(){var t=e(this);Chorus.Analytics.onElementView(t,function(){var e=t.find("["+n+"]").map(function(){return this.getAttribute(n)});o.trackPlacementsInViewport(e),"function"==typeof i&&i()})})},trackPlacementsInViewport:function(e){for(var t=0;t<e.length;t++){var n=this.getVideo(e[t]);n&&!n.hasViewport&&(n.hasViewport=!0,Chorus.Analytics.event(this.formatVideoEvent("view",n)))}},formatVideoEvent:function(t,n,i,r){var o=n.placement;!o&&i&&(o="data-analytics-placement",i=e("string"==typeof i?"#"+i:i),o=i.closest("["+o+"]").attr(o));var a="embed"===n.type,s=a?n.provider_video_id.replace(/.*embed\/([^"']+).*/,"$1"):n.id;return{eventCategory:a?"videotemp":"video",eventAction:[n.type||"volume",t,o||"other"].join(":"),eventLabel:[n.title,s].join(" | "),nonInteraction:"view"===t,eventCallback:r}},getViewedVideos:function(){return Chorus.Modernizr.localstorage?JSON.parse(localStorage.getItem(i)||"[]"):[]},addViewedVideo:function(e){var t=this.getViewedVideos();t.unshift(e),Chorus.Modernizr.localstorage&&localStorage.setItem(i,JSON.stringify(t.slice(0,6)))},findUnviewedVideo:function(e,t){var n=this.getViewedVideos(),i={};n.push(t||{}),n.forEach(function(e){e.id&&(i[e.id]=1),e.provider_video_id&&(i[e.provider_video_id]=1)});for(var r=0;r<e.length;r++){var o=e[r];if(!i[o.id]&&!i[o.provider_video_id])return o}return e[0]}};t("addVideo","addVideos","addChorusVideos"),t("addCustomVideo"),o.Wrapper={$el:null,elementId:"",meta:{},options:{},player:null,played:!1,destroy:function(){},suspend:function(){},resume:function(){},pub:function(e,t){var n=Chorus.EventDispatcher;n&&n.publish(e,t||{player:this.player})},perfMark:function(){var e=window.performance;e&&e.mark&&e.mark.apply(e,arguments)},perfMeasure:function(e){var t=window.performance;if(t&&t.measure){t.measure.apply(t,arguments);var n=t.getEntriesByName(e),i=n[n.length-1],o=Math.floor(i.duration);if(o>r)return;var a=[this.meta.type,e].join(":"),s=[this.meta.title,this.meta.id].join(" | ");Chorus.Analytics.event("video",a,s,o,!0)}},perfLoadStart:function(){"undefined"==typeof BOOMR||this._timer||(this._timer=BOOMR.requestStart("tag"))},perfLoadComplete:function(){this._timer&&(this._timer.loaded(),delete this._timer)},markAsViewed:function(e){e&&!this.options.setPlayedVideos||o.addViewedVideo(this.meta)},formatEvent:function(e,t){return o.formatVideoEvent(e,this.meta,this.$el,t)}}}(jQuery),BrightcoveWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{THUMB_FALLBACK:"http://assets.volume.voxmedia.com/static-images/default-thumb.jpg",insertVideoTag:function(e){var t=this.getVideoClass(),n='<video class="video-js '+t+'"';n+=' id="brightcove_'+this.meta.id+'"',n+=' data-player="'+this.options.player_id+'"',n+=' data-account="'+this.options.account_id+'"',n+=' data-embed="default"',n+="></video>",jQuery(n).appendTo(e)},getVideoClass:function(){var e=[Chorus.Context.network_slug];return"true"===this.options.hideAdOverlay&&e.push("hide-ad-overlay"),"true"===this.options.hideAdCountdown&&e.push("hide-ad-countdown"),e.join(" ")},setupPlayer:function(e){var t=this;videojs("brightcove_"+t.meta.id).ready(function(){var n=this,i=t.getEmbedCode(),r=function(){this.currentTime()>0&&(this.off("timeupdate",r),t.perfMark("playbackStart"),t.perfMeasure("ttff","playbackRequest","playbackStart"))};t.player=n,t.options.onCreate(),"true"==t.options.enableSocialSharing&&"function"==typeof this.social&&n.social({title:t.meta.title,displayAfterVideo:!0,description:t.meta.description,services:{facebook:!0,twitter:!0,pinterest:!1,tumblr:!1,linkedin:!1,google:!1}}),n.preload("metadata"),e.autoplay?n.autoplay(!0):null!=t.meta.brightcove_thumbnail?n.poster(t.meta.brightcove_thumbnail):n.poster(t.THUMB_FALLBACK),this.one("loadedmetadata",function(){t.perfMark("brightcoveReady"),t.perfMeasure("loadtime","brightcoveInitializeStart","brightcoveReady")}),this.one("firstplay",function(){t.perfMark("playbackRequest"),t.options.onPlay(),Chorus.Analytics.event(t.formatEvent("play")),this.on("timeupdate",r)}),this.one("error",function(e){console.log("Brightcove: error"),console.log(e),Chorus.Analytics.event(t.formatEvent("error"))}),i.indexOf("onceux.unicornmedia.com")>=0?n.onceux({metadataUri:i,contentHeaders:!0}):n.src({src:i})})},getEmbedCode:function(){var e=this.options,t=this.meta;if(null!==e.applicationId&&null!==e.deliveryType&&null!==e.fileType&&null!==e.extension){var n="0c2129c5-42b8-49e0-aa4c-f560c7bc0ba7",i="",r=["http://onceux.unicornmedia.com/now/ads/vmap",e.deliveryType,e.fileType,n,e.applicationId,t.brightcove_uuid,"content."+e.extension].join("/");return null!==t.brightcove_query_params&&null!==e.umoprofiles?i=t.brightcove_query_params+"&umoprofiles="+e.umoprofiles:null!==e.umoprofiles?i="?umoprofiles="+e.umoprofiles:null!==t.brightcove_query_params&&(i=t.brightcove_query_params),r+i}return t.brightcove_id},destroy:function(){this.player&&this.player.dispose()},getPlayerUrl:function(e){var t=["//players.brightcove.net",e.account_id,e.player_id+"_default","index.min.js"];return t.join("/")}}),YoutubeWrapper.initQueue=[],YoutubeWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getPlayerState(),this.player.stopVideo())},resume:function(){var e=this.suspendState;!this.player||e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||(this.player.playVideo(),this.suspendState=null)}}),EmbedWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.$el.empty()}});var Chorus=Chorus||{};Chorus.Video=Chorus.Video||{},Chorus.Video.youtubeApiLoaded=!1,Chorus.Video.loadYoutubeApi=function(){jQuery.getScript("//www.youtube.com/iframe_api"),Chorus.Video.youtubeApiLoaded=!0},Chorus.Video.wrapVideoIframe=function(){var e=jQuery,t=e(this),n="",i=t.attr("src");if(!t.parent().hasClass("chorus-video-embed")&&!t.parent().attr("data-volume-uuid")){if(!i||!/youtube|livestream|vimeo|vine|hulu|dailymotion|instagram/.test(i))return!0;/hulu\.com/.test(i)?(t.attr("width","100%"),t.attr("height","100%")):/instagram\.com/.test(i)?n=" instagram":/vine\.co/.test(i)&&(n=" vine"),t.attr("src",i),t.wrap('<div class="video-wrap'+n+'"></div>')}},Chorus.Video.playInViewport=function(e){var t=500,n=[],i=[];e.each(function(){this.pause(),n.push(this)});var r=function(){for(var e,o=[];e=n.pop();)Util.inViewport(e)?(e.play(),i.push(e)):o.push(e);for(n=o,o=[];e=i.pop();)Util.inViewport(e)?o.push(e):(e.pause(),n.push(e));i=o,setTimeout(r,t)};r()},Chorus.Video.autoplay=!1,Chorus.Video.checkForAutoplay=function(){return!(window.history.length<=1)&&(!!Chorus.Video.autoplay||Util.isReferrerCurrentDomain()&&jQuery("body").hasClass("video-entry")&&Util.UserAgentProfiler.isDesktop())},Chorus.Video.init=function(e){e=e||{};var t=jQuery,n=e.callback;e=t.extend({checkForExistingPlayer:!1},e),t(".chorus-video-embed").each(function(i,r){if(!e.checkForExistingPlayer||!t(r).hasClass("chorus-video-player-loaded")){var o=t.extend({},e,{autoplay:0===i&&Chorus.Video.checkForAutoplay(),callback:function(e){Chorus.VideoContext.activePlayer=e,t(r).addClass("chorus-video-player-loaded"),"function"==typeof n&&n.call(r,e)}});Chorus.VideoContext.createPlayer(r.id,t(r).data("chorus-video-id"),o)}})},window.jQuery&&jQuery(function(){Chorus.Video.init()});