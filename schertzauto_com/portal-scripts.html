<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>portal-scripts.html</title>
</head>
<body>

<script>
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AutoOps=e.AutoOps||{})}(this,function(e){"use strict";if(Object.keys(e).length)return;const l={PORTAL_CLASSNAME:"portal-class",PORTAL_ELEMENT_ID:"portal-id",PORTAL_EMBED_ELEMENT_ID:"portal-embed-id"},c={VISIBLE:"1",HIDDEN:"0"},p={VISIBLE:"visible",HIDDEN:"hidden"},m={modal:{isEnabled:!1,isLoaded:!1,delayedLoadIframeUrl:"",delayedLoadSourceTracking:{}},embed:{isEnabled:!1,isLoaded:!1},gaEvents:{},nonce:Math.random()},i={LocationSelected:"ao-location-selected",IssueBack:"ao-issue-back",IssueAdvanced:"ao-issue-advanced",IssueStepBack:"ao-issue-step-back",IssueCompleted:"ao-issue-completed",CustomerPhoneBack:"ao-customer-phone-back",CustomerBack:"ao-customer-back",CustomerCompleted:"ao-customer-completed",VehicleBack:"ao-vehicle-back",VehicleCompleted:"ao-vehicle-completed",DeferredWorkBack:"ao-deferred-work-back",DeferredWorkCompleted:"ao-deferred-work-completed",AddressBack:"ao-address-back",AddressCompleted:"ao-address-completed",WaiterDropOffBack:"ao-waiter-drop-off-back",WaiterDropOffCompleted:"ao-waiter-drop-off-completed",ScheduleBack:"ao-schedule-back",DateSelected:"ao-date-selected",TransportationBack:"ao-transportation-back",TransportationCompleted:"ao-transportation-completed",ConfirmBack:"ao-confirm-back",AppointmentBooked:"ao-appointment-booked",PortalLoaded:"portal-loaded",PortalEmbedLoaded:"portal-embed-loaded",EmbedResize:"ao-embed-resize",Opened:"ao-opened",Closed:"ao-closed",HidePortal:"hide-portal",BookingRedirect:"ao-booking-redirect",ExitFormSubmit:"ao-exit-form-submit"},u=[i.LocationSelected,i.IssueBack,i.IssueAdvanced,i.IssueStepBack,i.IssueCompleted,i.CustomerPhoneBack,i.CustomerBack,i.CustomerCompleted,i.VehicleBack,i.VehicleCompleted,i.DeferredWorkBack,i.DeferredWorkCompleted,i.AddressBack,i.AddressCompleted,i.WaiterDropOffBack,i.WaiterDropOffCompleted,i.ScheduleBack,i.DateSelected,i.TransportationBack,i.TransportationCompleted,i.ConfirmBack,i.AppointmentBooked],y=()=>{var e,t=document.getElementById(l.PORTAL_ELEMENT_ID);t&&((e=t.dataset.overflow)?document.documentElement.style.overflow=e:document.documentElement.style.removeProperty("overflow"),t.style.zIndex="0",t.style.setProperty("visibility",p.HIDDEN,"important"),t.style.setProperty("opacity",c.HIDDEN,"important"))};const h={AddSourceTracking:"ao-add-source-tracking",Show:"show-portal"},f=(t=void 0)=>{var o,a,r,d,n=document.getElementById(l.PORTAL_ELEMENT_ID);if(n){let e;if(e="string"==typeof t?{type:h.Show,clientKey:t}:"object"==typeof t?({clientKey:o,prefill:a,settings:r,destinationUrl:d}=t,t=function(e,t){var o={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(o[r[a]]=e[r[a]]);return o}(t,["clientKey","prefill","settings","destinationUrl"]),{type:h.Show,clientKey:o,prefill:a,settings:Object.assign({destinationUrl:d},r),sourceTracking:t}):{type:h.Show},""===n.src){n.src=m.modal.delayedLoadIframeUrl,n.style.backgroundColor="#00000040";for(var[s,i]of Object.entries(m.modal.delayedLoadSourceTracking))e.sourceTracking=e.sourceTracking||{},e.sourceTracking[s]=i}document.documentElement.style.overflow="hidden",n.style.zIndex="2147483647",n.style.setProperty("visibility",p.VISIBLE,"important"),n.style.setProperty("opacity",c.VISIBLE,"important"),g(0,n,e)}},g=(e,t,o)=>{var a;m.modal.isLoaded?null!=(a=t.contentWindow)&&a.postMessage(o,"https://portal.autoops.com"):e<100&&setTimeout(()=>{g(e+1,t,o)},100)},b=()=>!(!window.gtag||"function"!=typeof window.gtag),R=()=>!(!window.dataLayer||"object"!=typeof window.dataLayer),x=()=>!(!window.ga||"function"!=typeof window.ga);const r=(t,o)=>{window.addEventListener("message",e=>{"https://portal.autoops.com"===e.origin&&"object"==typeof e.data&&e.data.type===t&&o(e.data)})};const o=(e,t)=>{if(!("string"!=typeof t||250<t.length)){var o=[];m.modal.isEnabled&&o.push(l.PORTAL_ELEMENT_ID),m.embed.isEnabled&&o.push(l.PORTAL_EMBED_ELEMENT_ID);for(const r of o){var a=document.getElementById(r);a&&(a.id===l.PORTAL_ELEMENT_ID&&""===a.src&&(m.modal.delayedLoadSourceTracking[e]=t),d(0,a,{type:h.AddSourceTracking,sourceTracking:{[e]:t}}))}}},d=(e,t,o)=>{var a;t.id===l.PORTAL_ELEMENT_ID&&m.modal.isLoaded||t.id===l.PORTAL_EMBED_ELEMENT_ID&&m.embed.isLoaded?null!=(a=null==t?void 0:t.contentWindow)&&a.postMessage(o,"https://portal.autoops.com"):e<100&&setTimeout(()=>{d(e+1,t,o)},100)};const n=e=>{var t,o=e.quote,a=[];if(o.appointment_number?a.push(`TireConnect Order #${o.appointment_number}:`):a.push("TireConnect Order:"),null!=(t=null==o?void 0:o.tires)&&t.length){for(const d of o.tires){var r=[d.quantity?d.quantity+"x":"",null==(r=d.category)?void 0:r.label,d.size,d.model,d.part_number?"Part # "+d.part_number:""];a.push("- "+r.filter(Boolean).join(" "))}a.push("Quoted Price: "+o.price),null!=(t=e.customer)&&t.notes&&a.push("Customer Notes: "+e.customer.notes)}return a.join("\n")};var t=Object.freeze({__proto__:null,enable:e=>{"object"!=typeof e||"function"!=typeof e.on?console.error("Invalid TireConnect widget object"):e.on("onAppointmentSubmitted",e=>{const{data:t,resolve:o,reject:a}=e;f({prefill:{services:[{idOrKey:"tire",issueDescription:["Tires with Install"],customerNotes:n(t)}],customer:null!=(e=null==t?void 0:t.customer)&&e.name&&null!=(e=null==t?void 0:t.customer)&&e.phone?{firstName:t.customer.name.split(" ")[0],lastName:null!=(e=t.customer.name.split(" ")[1])?e:"---",phone:"+1"+t.customer.phone.replace(/\D/g,""),email:t.customer.email||void 0}:void 0,vehicle:null!=(e=null==t?void 0:t.customer)&&e.vehicle?{year:parseInt(t.customer.vehicle.year),make:t.customer.vehicle.make,model:t.customer.vehicle.model}:void 0,requestedStartAt:null!=(e=null==t?void 0:t.customer)&&e.preferred_time?new Date(t.customer.preferred_time).toISOString():void 0}}),r("ao-closed",()=>{a()}),r("ao-appointment-booked",()=>{o(),y()})})},buildAppointmentNotes:n}),t=Object.freeze({__proto__:null,tireConnect:t});const a={Loaded:"ao-portal-chat.loaded",Resize:"ao-portal-chat.resize"},s="ao-portal-chat",E=()=>{var e=document.getElementById(s);return null!=e?e:void 0},j=()=>{var e=document.querySelectorAll("script[id='portal-scripts']");return e.length?e[0]:void 0};const V=e=>{switch(e.data.type){case a.Loaded:break;case a.Resize:var t=E();t?(void 0!==e.data.width&&(t.style.width=e.data.width),void 0!==e.data.height&&(t.style.height=e.data.height),void 0!==e.data.left&&(t.style.left=e.data.left),void 0!==e.data.top&&(t.style.top=e.data.top),void 0!==e.data.right&&(t.style.right=e.data.right),void 0!==e.data.bottom&&(t.style.bottom=e.data.bottom)):console.error("Chat <iframe> not found.")}},k=e=>{var t=E();t?null!=(t=t.contentWindow)&&t.postMessage(e,"https://portal.autoops.com"):console.error("Chat <iframe> not found.")};E()?console.warn("AutoOps chat <iframe> already exists."):(v=j())?(v=v.dataset.apiKey)?((I=document.createElement("iframe")).id=s,I.src="https://portal.autoops.com"+"/chat?apiKey="+v,I.style.position="fixed",I.style.border="0px",I.style.zIndex="2147483646",I.style.colorScheme="normal",I.style.width="0px",I.style.height="0px",I.style.left="auto",I.style.top="auto",I.style.right="0px",I.style.bottom="0px",document.body.insertBefore(I,document.body.firstElementChild)):console.error("AutoOps API key required on <script> tag."):console.error("AutoOps <script> tag not found."),window.addEventListener("message",V);var v=Object.freeze({__proto__:null,show:()=>{k({type:"ao-portal-chat.set-show",show:!0})},hide:()=>{k({type:"ao-portal-chat.set-show",show:!1})},open:()=>{k({type:"ao-portal-chat.set-open",open:!0})},close:()=>{k({type:"ao-portal-chat.set-open",open:!1})}});if(0===(I=document.querySelectorAll("script[id='portal-scripts']")).length)console.error("AutoOps script tag not found.",m);else{var w=I[0];if(w.dataset.apiKey){let a=!1,t=!1,o=!0;I.forEach(e=>{e.dataset.googleAnalyticsEnabled&&"false"!==e.dataset.googleAnalyticsEnabled&&(a=!0),e.dataset.delayedLoad&&"false"!==e.dataset.delayedLoad&&(t=!0),"true"!==e.dataset.embedMode&&(o=!1)});const P=document.getElementById("ao-embed-id");var _,L,I=!!P,A=!o||!I,C=window.location.search.slice(1).split("&"),B=window.location.hash.split("?");if(1<B.length)for(const N of B[1].split("&")){var T=N.split("=");2===T.length&&0<T[0].length&&0<T[1].length&&C.push(N)}let e="",r=!1,d=null,n="";for(const M of C)""!==M&&([_,L]=M.split("="),["utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","gclsrc","wbraid","gbraid","fbclid","yclid","msclkid","ttclid","rwg_token","ao_leadSource","ao_campaign","ao_affiliate","ao_promo","ao_coupon","ao_custom1","ao_custom2","ao_custom3","ao_link"].includes(_)&&(_.startsWith("ao_")&&w.getAttribute(_)?e+=`&${_}=`+w.getAttribute(_):e+="&"+M),"ao_auto_show"===_&&"true"===L&&(r=!0),"ao_client_key"===_&&(n=L),"bookingSessionId"===_)&&(d=L);!window.location.hash.includes("ao_auto_show=true")&&"#book"!==window.location.hash||(r=!0),document.referrer&&(e+="&clientReferrer="+encodeURIComponent(document.referrer));let s="";(s=location.host&&location.pathname?location.host+location.pathname:s)&&(e+="&bookingPage="+encodeURIComponent(s));var O,D,S,B="?apiKey="+(w.dataset.apiKey||"")+(w.dataset.skipVerificationKey?"&skipVerificationKey="+w.dataset.skipVerificationKey:"")+(w.dataset.loadingColor?"&loadingColor="+w.dataset.loadingColor:"")+(d?"&bookingSessionId="+d:"")+e;A&&(A=B,S=r,D=t,m.modal.isEnabled=!0,m.modal.delayedLoadIframeUrl="https://portal.autoops.com"+A,(O=document.createElement("iframe")).className=l.PORTAL_CLASSNAME,O.id=l.PORTAL_ELEMENT_ID,D&&!S||(O.src="https://portal.autoops.com"+A),O.style.border="0px",O.style.position="fixed",O.style.zIndex="0",O.style.width="100vw",O.style.height="100%",O.style.inset="0px",O.style.transition="opacity 0.38s",O.style.opacity=c.HIDDEN,O.style.colorScheme="normal",O.style.setProperty("visibility",p.HIDDEN,"important"),O.style.setProperty("opacity",c.HIDDEN,"important"),O.dataset.overflow=document.documentElement.style.overflow,document.body.insertBefore(O,document.body.firstElementChild)),I&&(D=B,m.embed.isEnabled=!0,(S=document.createElement("iframe")).className=l.PORTAL_CLASSNAME,S.id=l.PORTAL_EMBED_ELEMENT_ID,S.src="https://portal.autoops.com/embed/"+D,S.style.border="0px",S.style.width="100%",S.style.height="100%",S.style.visibility=p.VISIBLE,D=document.getElementById("ao-embed-id"))&&D.appendChild(S),window.addEventListener("message",e=>{switch(e.data.type){case i.PortalLoaded:m.modal.isLoaded=!0,r&&f(n?{clientKey:n}:void 0);break;case i.PortalEmbedLoaded:m.embed.isLoaded=!0;break;case i.HidePortal:y();break;case i.BookingRedirect:var t=e.data.destinationTarget||"_parent";window.open(e.data.destinationUrl,t);break;case i.EmbedResize:t=document.getElementById(l.PORTAL_EMBED_ELEMENT_ID);t&&(t.style.height=e.data.height+"px")}var o;u.includes(e.data.type)&&P&&P.getBoundingClientRect&&P.getBoundingClientRect().top<-15&&P.scrollIntoView({behavior:"smooth",block:"start"}),a&&(o=e.data.type,[i.LocationSelected,i.IssueCompleted,i.CustomerCompleted,i.VehicleCompleted,i.DeferredWorkCompleted,i.AddressCompleted,i.WaiterDropOffCompleted,i.DateSelected,i.TransportationCompleted,i.AppointmentBooked,i.Closed,i.ExitFormSubmit].includes(o))&&(b()&&!m.gaEvents[o]?window.gtag("event",o,{event_category:"AO Appointment Booking",event_label:o,value:1}):x()&&!m.gaEvents[o]?window.ga("send","event","AO Appointment Booking",o,"AO Appointment Booking",1):R()&&!m.gaEvents[o]&&window.dataLayer.push({event:o}),m.gaEvents[o]=!0,o===i.Closed)&&(m.gaEvents={})})}else console.error("AutoOps api key required.")}e.addSourceTracking=o,e.apps=t,e.chat=v,e.hide=y,e.onEvent=r,e.show=f,e.trackMarketingValue=(e,t)=>o(e,t),Object.defineProperty(e,"__esModule",{value:!0})});
</script>

</body>
</html>
