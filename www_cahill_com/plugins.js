/* PLUGIN DIRECTORY -- add/edit plugins here as needed keep directory updated -- 
*
*  1) jQuery FlexSlider v2.7.2
*  2) jQuery ScrollTo @version 1.4.2 http://flesler.blogspot.com/2007/10/jqueryscrollto.html
*  3) jQuery SerialScroll @version 1.2.2 http://flesler.blogspot.com/2008/02/jqueryserialscroll.html
*  4) Video.js v7.4.1 http://videojs.com
*/

/*
 * 1) jQuery FlexSlider v2.7.2
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */!function($){var e=!0;$.flexslider=function(t,a){var n=$(t);void 0===a.rtl&&"rtl"==$("html").attr("dir")&&(a.rtl=!0),n.vars=$.extend({},$.flexslider.defaults,a);var i=n.vars.namespace,r=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,s=("ontouchstart"in window||r||window.DocumentTouch&&document instanceof DocumentTouch)&&n.vars.touch,o="click touchend MSPointerUp keyup",l="",c,d="vertical"===n.vars.direction,u=n.vars.reverse,v=n.vars.itemWidth>0,p="fade"===n.vars.animation,m=""!==n.vars.asNavFor,f={};$.data(t,"flexslider",n),f={init:function(){n.animating=!1,n.currentSlide=parseInt(n.vars.startAt?n.vars.startAt:0,10),isNaN(n.currentSlide)&&(n.currentSlide=0),n.animatingTo=n.currentSlide,n.atEnd=0===n.currentSlide||n.currentSlide===n.last,n.containerSelector=n.vars.selector.substr(0,n.vars.selector.search(" ")),n.slides=$(n.vars.selector,n),n.container=$(n.containerSelector,n),n.count=n.slides.length,n.syncExists=$(n.vars.sync).length>0,"slide"===n.vars.animation&&(n.vars.animation="swing"),n.prop=d?"top":n.vars.rtl?"marginRight":"marginLeft",n.args={},n.manualPause=!1,n.stopped=!1,n.started=!1,n.startTimeout=null,n.transitions=!n.vars.video&&!p&&n.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var a in t)if(void 0!==e.style[t[a]])return n.pfx=t[a].replace("Perspective","").toLowerCase(),n.prop="-"+n.pfx+"-transform",!0;return!1}(),n.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,n.ensureAnimationEnd="",""!==n.vars.controlsContainer&&(n.controlsContainer=$(n.vars.controlsContainer).length>0&&$(n.vars.controlsContainer)),""!==n.vars.manualControls&&(n.manualControls=$(n.vars.manualControls).length>0&&$(n.vars.manualControls)),""!==n.vars.customDirectionNav&&(n.customDirectionNav=2===$(n.vars.customDirectionNav).length&&$(n.vars.customDirectionNav)),n.vars.randomize&&(n.slides.sort(function(){return Math.round(Math.random())-.5}),n.container.empty().append(n.slides)),n.doMath(),n.setup("init"),n.vars.controlNav&&f.controlNav.setup(),n.vars.directionNav&&f.directionNav.setup(),n.vars.keyboard&&(1===$(n.containerSelector).length||n.vars.multipleKeyboard)&&$(document).bind("keyup",function(e){var t=e.keyCode;if(!n.animating&&(39===t||37===t)){var a=n.vars.rtl?37===t?n.getTarget("next"):39===t&&n.getTarget("prev"):39===t?n.getTarget("next"):37===t&&n.getTarget("prev");n.flexAnimate(a,n.vars.pauseOnAction)}}),n.vars.mousewheel&&n.bind("mousewheel",function(e,t,a,i){e.preventDefault();var r=t<0?n.getTarget("next"):n.getTarget("prev");n.flexAnimate(r,n.vars.pauseOnAction)}),n.vars.pausePlay&&f.pausePlay.setup(),n.vars.slideshow&&n.vars.pauseInvisible&&f.pauseInvisible.init(),n.vars.slideshow&&(n.vars.pauseOnHover&&n.hover(function(){n.manualPlay||n.manualPause||n.pause()},function(){n.manualPause||n.manualPlay||n.stopped||n.play()}),n.vars.pauseInvisible&&f.pauseInvisible.isHidden()||(n.vars.initDelay>0?n.startTimeout=setTimeout(n.play,n.vars.initDelay):n.play())),m&&f.asNav.setup(),s&&n.vars.touch&&f.touch(),(!p||p&&n.vars.smoothHeight)&&$(window).bind("resize orientationchange focus",f.resize),n.find("img").attr("draggable","false"),setTimeout(function(){n.vars.start(n)},200)},asNav:{setup:function(){n.asNav=!0,n.animatingTo=Math.floor(n.currentSlide/n.move),n.currentItem=n.currentSlide,n.slides.removeClass(i+"active-slide").eq(n.currentItem).addClass(i+"active-slide"),r?(t._slider=n,n.slides.each(function(){var e=this;e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),e.addEventListener("MSGestureTap",function(e){e.preventDefault();var t=$(this),a=t.index();$(n.vars.asNavFor).data("flexslider").animating||t.hasClass("active")||(n.direction=n.currentItem<a?"next":"prev",n.flexAnimate(a,n.vars.pauseOnAction,!1,!0,!0))})})):n.slides.on(o,function(e){e.preventDefault();var t=$(this),a=t.index(),r;r=n.vars.rtl?-1*(t.offset().right-$(n).scrollLeft()):t.offset().left-$(n).scrollLeft(),r<=0&&t.hasClass(i+"active-slide")?n.flexAnimate(n.getTarget("prev"),!0):$(n.vars.asNavFor).data("flexslider").animating||t.hasClass(i+"active-slide")||(n.direction=n.currentItem<a?"next":"prev",n.flexAnimate(a,n.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){n.manualControls?f.controlNav.setupManual():f.controlNav.setupPaging()},setupPaging:function(){var e="thumbnails"===n.vars.controlNav?"control-thumbs":"control-paging",t=1,a,r;if(n.controlNavScaffold=$('<ol class="'+i+"control-nav "+i+e+'"></ol>'),n.pagingCount>1)for(var s=0;s<n.pagingCount;s++){if(r=n.slides.eq(s),void 0===r.attr("data-thumb-alt")&&r.attr("data-thumb-alt",""),a=$("<a></a>").attr("href","#").text(t),"thumbnails"===n.vars.controlNav&&(a=$("<img/>").attr("src",r.attr("data-thumb"))),""!==r.attr("data-thumb-alt")&&a.attr("alt",r.attr("data-thumb-alt")),"thumbnails"===n.vars.controlNav&&!0===n.vars.thumbCaptions){var c=r.attr("data-thumbcaption");if(""!==c&&void 0!==c){var d=$("<span></span>").addClass(i+"caption").text(c);a.append(d)}}var u=$("<li>");a.appendTo(u),u.append("</li>"),n.controlNavScaffold.append(u),t++}n.controlsContainer?$(n.controlsContainer).append(n.controlNavScaffold):n.append(n.controlNavScaffold),f.controlNav.set(),f.controlNav.active(),n.controlNavScaffold.delegate("a, img",o,function(e){if(e.preventDefault(),""===l||l===e.type){var t=$(this),a=n.controlNav.index(t);t.hasClass(i+"active")||(n.direction=a>n.currentSlide?"next":"prev",n.flexAnimate(a,n.vars.pauseOnAction))}""===l&&(l=e.type),f.setToClearWatchedEvent()})},setupManual:function(){n.controlNav=n.manualControls,f.controlNav.active(),n.controlNav.bind(o,function(e){if(e.preventDefault(),""===l||l===e.type){var t=$(this),a=n.controlNav.index(t);t.hasClass(i+"active")||(a>n.currentSlide?n.direction="next":n.direction="prev",n.flexAnimate(a,n.vars.pauseOnAction))}""===l&&(l=e.type),f.setToClearWatchedEvent()})},set:function(){var e="thumbnails"===n.vars.controlNav?"img":"a";n.controlNav=$("."+i+"control-nav li "+e,n.controlsContainer?n.controlsContainer:n)},active:function(){n.controlNav.removeClass(i+"active").eq(n.animatingTo).addClass(i+"active")},update:function(e,t){n.pagingCount>1&&"add"===e?n.controlNavScaffold.append($('<li><a href="#">'+n.count+"</a></li>")):1===n.pagingCount?n.controlNavScaffold.find("li").remove():n.controlNav.eq(t).closest("li").remove(),f.controlNav.set(),n.pagingCount>1&&n.pagingCount!==n.controlNav.length?n.update(t,e):f.controlNav.active()}},directionNav:{setup:function(){var e=$('<ul class="'+i+'direction-nav"><li class="'+i+'nav-prev"><a class="'+i+'prev" href="#">'+n.vars.prevText+'</a></li><li class="'+i+'nav-next"><a class="'+i+'next" href="#">'+n.vars.nextText+"</a></li></ul>");n.customDirectionNav?n.directionNav=n.customDirectionNav:n.controlsContainer?($(n.controlsContainer).append(e),n.directionNav=$("."+i+"direction-nav li a",n.controlsContainer)):(n.append(e),n.directionNav=$("."+i+"direction-nav li a",n)),f.directionNav.update(),n.directionNav.bind(o,function(e){e.preventDefault();var t;""!==l&&l!==e.type||(t=$(this).hasClass(i+"next")?n.getTarget("next"):n.getTarget("prev"),n.flexAnimate(t,n.vars.pauseOnAction)),""===l&&(l=e.type),f.setToClearWatchedEvent()})},update:function(){var e=i+"disabled";1===n.pagingCount?n.directionNav.addClass(e).attr("tabindex","-1"):n.vars.animationLoop?n.directionNav.removeClass(e).removeAttr("tabindex"):0===n.animatingTo?n.directionNav.removeClass(e).filter("."+i+"prev").addClass(e).attr("tabindex","-1"):n.animatingTo===n.last?n.directionNav.removeClass(e).filter("."+i+"next").addClass(e).attr("tabindex","-1"):n.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=$('<div class="'+i+'pauseplay"><a href="#"></a></div>');n.controlsContainer?(n.controlsContainer.append(e),n.pausePlay=$("."+i+"pauseplay a",n.controlsContainer)):(n.append(e),n.pausePlay=$("."+i+"pauseplay a",n)),f.pausePlay.update(n.vars.slideshow?i+"pause":i+"play"),n.pausePlay.bind(o,function(e){e.preventDefault(),""!==l&&l!==e.type||($(this).hasClass(i+"pause")?(n.manualPause=!0,n.manualPlay=!1,n.pause()):(n.manualPause=!1,n.manualPlay=!0,n.play())),""===l&&(l=e.type),f.setToClearWatchedEvent()})},update:function(e){"play"===e?n.pausePlay.removeClass(i+"pause").addClass(i+"play").html(n.vars.playText):n.pausePlay.removeClass(i+"play").addClass(i+"pause").html(n.vars.pauseText)}},touch:function(){function e(e){e.stopPropagation(),n.animating?e.preventDefault():(n.pause(),t._gesture.addPointer(e.pointerId),w=0,c=d?n.h:n.w,f=Number(new Date),l=v&&u&&n.animatingTo===n.last?0:v&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:v&&n.currentSlide===n.last?n.limit:v?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*c:(n.currentSlide+n.cloneOffset)*c)}function a(e){e.stopPropagation();var a=e.target._slider;if(a){var n=-e.translationX,i=-e.translationY;if(w+=d?i:n,m=(a.vars.rtl?-1:1)*w,x=d?Math.abs(w)<Math.abs(-n):Math.abs(w)<Math.abs(-i),e.detail===e.MSGESTURE_FLAG_INERTIA)return void setImmediate(function(){t._gesture.stop()});(!x||Number(new Date)-f>500)&&(e.preventDefault(),!p&&a.transitions&&(a.vars.animationLoop||(m=w/(0===a.currentSlide&&w<0||a.currentSlide===a.last&&w>0?Math.abs(w)/c+2:1)),a.setProps(l+m,"setTouch")))}}function i(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!x&&null!==m){var a=u?-m:m,n=a>0?t.getTarget("next"):t.getTarget("prev");t.canAdvance(n)&&(Number(new Date)-f<550&&Math.abs(a)>50||Math.abs(a)>c/2)?t.flexAnimate(n,t.vars.pauseOnAction):p||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}s=null,o=null,m=null,l=null,w=0}}var s,o,l,c,m,f,g,h,S,x=!1,y=0,b=0,w=0;r?(t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",e,!1),t._slider=n,t.addEventListener("MSGestureChange",a,!1),t.addEventListener("MSGestureEnd",i,!1)):(g=function(e){n.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(n.pause(),c=d?n.h:n.w,f=Number(new Date),y=e.touches[0].pageX,b=e.touches[0].pageY,l=v&&u&&n.animatingTo===n.last?0:v&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:v&&n.currentSlide===n.last?n.limit:v?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*c:(n.currentSlide+n.cloneOffset)*c,s=d?b:y,o=d?y:b,t.addEventListener("touchmove",h,!1),t.addEventListener("touchend",S,!1))},h=function(e){y=e.touches[0].pageX,b=e.touches[0].pageY,m=d?s-b:(n.vars.rtl?-1:1)*(s-y),x=d?Math.abs(m)<Math.abs(y-o):Math.abs(m)<Math.abs(b-o);var t=500;(!x||Number(new Date)-f>500)&&(e.preventDefault(),!p&&n.transitions&&(n.vars.animationLoop||(m/=0===n.currentSlide&&m<0||n.currentSlide===n.last&&m>0?Math.abs(m)/c+2:1),n.setProps(l+m,"setTouch")))},S=function(e){if(t.removeEventListener("touchmove",h,!1),n.animatingTo===n.currentSlide&&!x&&null!==m){var a=u?-m:m,i=a>0?n.getTarget("next"):n.getTarget("prev");n.canAdvance(i)&&(Number(new Date)-f<550&&Math.abs(a)>50||Math.abs(a)>c/2)?n.flexAnimate(i,n.vars.pauseOnAction):p||n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,!0)}t.removeEventListener("touchend",S,!1),s=null,o=null,m=null,l=null},t.addEventListener("touchstart",g,!1))},resize:function(){!n.animating&&n.is(":visible")&&(v||n.doMath(),p?f.smoothHeight():v?(n.slides.width(n.computedW),n.update(n.pagingCount),n.setProps()):d?(n.viewport.height(n.h),n.setProps(n.h,"setTotal")):(n.vars.smoothHeight&&f.smoothHeight(),n.newSlides.width(n.computedW),n.setProps(n.computedW,"setTotal")))},smoothHeight:function(e){if(!d||p){var t=p?n:n.viewport;e?t.animate({height:n.slides.eq(n.animatingTo).innerHeight()},e):t.innerHeight(n.slides.eq(n.animatingTo).innerHeight())}},sync:function(e){var t=$(n.vars.sync).data("flexslider"),a=n.animatingTo;switch(e){case"animate":t.flexAnimate(a,n.vars.pauseOnAction,!1,!0);break;case"play":t.playing||t.asNav||t.play();break;case"pause":t.pause();break}},uniqueID:function(e){return e.filter("[id]").add(e.find("[id]")).each(function(){var e=$(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=f.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){f.pauseInvisible.isHidden()?n.startTimeout?clearTimeout(n.startTimeout):n.pause():n.started?n.play():n.vars.initDelay>0?setTimeout(n.play,n.vars.initDelay):n.play()})}},isHidden:function(){var e=f.pauseInvisible.getHiddenProp();return!!e&&document[e]},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(c),c=setTimeout(function(){l=""},3e3)}},n.flexAnimate=function(e,t,a,r,o){if(n.vars.animationLoop||e===n.currentSlide||(n.direction=e>n.currentSlide?"next":"prev"),m&&1===n.pagingCount&&(n.direction=n.currentItem<e?"next":"prev"),!n.animating&&(n.canAdvance(e,o)||a)&&n.is(":visible")){if(m&&r){var l=$(n.vars.asNavFor).data("flexslider");if(n.atEnd=0===e||e===n.count-1,l.flexAnimate(e,!0,!1,!0,o),n.direction=n.currentItem<e?"next":"prev",l.direction=n.direction,Math.ceil((e+1)/n.visible)-1===n.currentSlide||0===e)return n.currentItem=e,n.slides.removeClass(i+"active-slide").eq(e).addClass(i+"active-slide"),!1;n.currentItem=e,n.slides.removeClass(i+"active-slide").eq(e).addClass(i+"active-slide"),e=Math.floor(e/n.visible)}if(n.animating=!0,n.animatingTo=e,t&&n.pause(),n.vars.before(n),n.syncExists&&!o&&f.sync("animate"),n.vars.controlNav&&f.controlNav.active(),v||n.slides.removeClass(i+"active-slide").eq(e).addClass(i+"active-slide"),n.atEnd=0===e||e===n.last,n.vars.directionNav&&f.directionNav.update(),e===n.last&&(n.vars.end(n),n.vars.animationLoop||n.pause()),p)s?(n.slides.eq(n.currentSlide).css({opacity:0,zIndex:1}),n.slides.eq(e).css({opacity:1,zIndex:2}),n.wrapup(c)):(n.slides.eq(n.currentSlide).css({zIndex:1}).animate({opacity:0},n.vars.animationSpeed,n.vars.easing),n.slides.eq(e).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing,n.wrapup));else{var c=d?n.slides.filter(":first").height():n.computedW,g,h,S;v?(g=n.vars.itemMargin,S=(n.itemW+g)*n.move*n.animatingTo,h=S>n.limit&&1!==n.visible?n.limit:S):h=0===n.currentSlide&&e===n.count-1&&n.vars.animationLoop&&"next"!==n.direction?u?(n.count+n.cloneOffset)*c:0:n.currentSlide===n.last&&0===e&&n.vars.animationLoop&&"prev"!==n.direction?u?0:(n.count+1)*c:u?(n.count-1-e+n.cloneOffset)*c:(e+n.cloneOffset)*c,n.setProps(h,"",n.vars.animationSpeed),n.transitions?(n.vars.animationLoop&&n.atEnd||(n.animating=!1,n.currentSlide=n.animatingTo),n.container.unbind("webkitTransitionEnd transitionend"),n.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(n.ensureAnimationEnd),n.wrapup(c)}),clearTimeout(n.ensureAnimationEnd),n.ensureAnimationEnd=setTimeout(function(){n.wrapup(c)},n.vars.animationSpeed+100)):n.container.animate(n.args,n.vars.animationSpeed,n.vars.easing,function(){n.wrapup(c)})}n.vars.smoothHeight&&f.smoothHeight(n.vars.animationSpeed)}},n.wrapup=function(e){p||v||(0===n.currentSlide&&n.animatingTo===n.last&&n.vars.animationLoop?n.setProps(e,"jumpEnd"):n.currentSlide===n.last&&0===n.animatingTo&&n.vars.animationLoop&&n.setProps(e,"jumpStart")),n.animating=!1,n.currentSlide=n.animatingTo,n.vars.after(n)},n.animateSlides=function(){!n.animating&&e&&n.flexAnimate(n.getTarget("next"))},n.pause=function(){clearInterval(n.animatedSlides),n.animatedSlides=null,n.playing=!1,n.vars.pausePlay&&f.pausePlay.update("play"),n.syncExists&&f.sync("pause")},n.play=function(){n.playing&&clearInterval(n.animatedSlides),n.animatedSlides=n.animatedSlides||setInterval(n.animateSlides,n.vars.slideshowSpeed),n.started=n.playing=!0,n.vars.pausePlay&&f.pausePlay.update("pause"),n.syncExists&&f.sync("play")},n.stop=function(){n.pause(),n.stopped=!0},n.canAdvance=function(e,t){var a=m?n.pagingCount-1:n.last;return!!t||(!(!m||n.currentItem!==n.count-1||0!==e||"prev"!==n.direction)||(!m||0!==n.currentItem||e!==n.pagingCount-1||"next"===n.direction)&&(!(e===n.currentSlide&&!m)&&(!!n.vars.animationLoop||(!n.atEnd||0!==n.currentSlide||e!==a||"next"===n.direction)&&(!n.atEnd||n.currentSlide!==a||0!==e||"next"!==n.direction))))},n.getTarget=function(e){return n.direction=e,"next"===e?n.currentSlide===n.last?0:n.currentSlide+1:0===n.currentSlide?n.last:n.currentSlide-1},n.setProps=function(e,t,a){var i=function(){var a=e||(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo;return function(){if(v)return"setTouch"===t?e:u&&n.animatingTo===n.last?0:u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:n.animatingTo===n.last?n.limit:a;switch(t){case"setTotal":return u?(n.count-1-n.currentSlide+n.cloneOffset)*e:(n.currentSlide+n.cloneOffset)*e;case"setTouch":return e;case"jumpEnd":return u?e:n.count*e;case"jumpStart":return u?n.count*e:e;default:return e}}()*(n.vars.rtl?1:-1)+"px"}();n.transitions&&(i=n.isFirefox?d?"translate3d(0,"+i+",0)":"translate3d("+parseInt(i)+"px,0,0)":d?"translate3d(0,"+i+",0)":"translate3d("+(n.vars.rtl?-1:1)*parseInt(i)+"px,0,0)",a=void 0!==a?a/1e3+"s":"0s",n.container.css("-"+n.pfx+"-transition-duration",a),n.container.css("transition-duration",a)),n.args[n.prop]=i,(n.transitions||void 0===a)&&n.container.css(n.args),n.container.css("transform",i)},n.setup=function(e){if(p)n.vars.rtl?n.slides.css({width:"100%",float:"right",marginLeft:"-100%",position:"relative"}):n.slides.css({width:"100%",float:"left",marginRight:"-100%",position:"relative"}),"init"===e&&(s?n.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+n.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(n.currentSlide).css({opacity:1,zIndex:2}):0==n.vars.fadeFirstSlide?n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).css({opacity:1}):n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing)),n.vars.smoothHeight&&f.smoothHeight();else{var t,a;"init"===e&&(n.viewport=$('<div class="'+i+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(n).append(n.container),n.cloneCount=0,n.cloneOffset=0,u&&(a=$.makeArray(n.slides).reverse(),n.slides=$(a),n.container.empty().append(n.slides))),n.vars.animationLoop&&!v&&(n.cloneCount=2,n.cloneOffset=1,"init"!==e&&n.container.find(".clone").remove(),n.container.append(f.uniqueID(n.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(f.uniqueID(n.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),n.newSlides=$(n.vars.selector,n),t=u?n.count-1-n.currentSlide+n.cloneOffset:n.currentSlide+n.cloneOffset,d&&!v?(n.container.height(200*(n.count+n.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){n.newSlides.css({display:"block"}),n.doMath(),n.viewport.height(n.h),n.setProps(t*n.h,"init")},"init"===e?100:0)):(n.container.width(200*(n.count+n.cloneCount)+"%"),n.setProps(t*n.computedW,"init"),setTimeout(function(){n.doMath(),n.vars.rtl&&n.isFirefox?n.newSlides.css({width:n.computedW,marginRight:n.computedM,float:"right",display:"block"}):n.newSlides.css({width:n.computedW,marginRight:n.computedM,float:"left",display:"block"}),n.vars.smoothHeight&&f.smoothHeight()},"init"===e?100:0))}v||n.slides.removeClass(i+"active-slide").eq(n.currentSlide).addClass(i+"active-slide"),n.vars.init(n)},n.doMath=function(){var e=n.slides.first(),t=n.vars.itemMargin,a=n.vars.minItems,i=n.vars.maxItems;n.w=void 0===n.viewport?n.width():n.viewport.width(),n.isFirefox&&(n.w=n.width()),n.h=e.height(),n.boxPadding=e.outerWidth()-e.width(),v?(n.itemT=n.vars.itemWidth+t,n.itemM=t,n.minW=a?a*n.itemT:n.w,n.maxW=i?i*n.itemT-t:n.w,n.itemW=n.minW>n.w?(n.w-t*(a-1))/a:n.maxW<n.w?(n.w-t*(i-1))/i:n.vars.itemWidth>n.w?n.w:n.vars.itemWidth,n.visible=Math.floor(n.w/n.itemW),n.move=n.vars.move>0&&n.vars.move<n.visible?n.vars.move:n.visible,n.pagingCount=Math.ceil((n.count-n.visible)/n.move+1),n.last=n.pagingCount-1,n.limit=1===n.pagingCount?0:n.vars.itemWidth>n.w?n.itemW*(n.count-1)+t*(n.count-1):(n.itemW+t)*n.count-n.w-t):(n.itemW=n.w,n.itemM=t,n.pagingCount=n.count,n.last=n.count-1),n.computedW=n.itemW-n.boxPadding,n.computedM=n.itemM},n.update=function(e,t){n.doMath(),v||(e<n.currentSlide?n.currentSlide+=1:e<=n.currentSlide&&0!==e&&(n.currentSlide-=1),n.animatingTo=n.currentSlide),n.vars.controlNav&&!n.manualControls&&("add"===t&&!v||n.pagingCount>n.controlNav.length?f.controlNav.update("add"):("remove"===t&&!v||n.pagingCount<n.controlNav.length)&&(v&&n.currentSlide>n.last&&(n.currentSlide-=1,n.animatingTo-=1),f.controlNav.update("remove",n.last))),n.vars.directionNav&&f.directionNav.update()},n.addSlide=function(e,t){var a=$(e);n.count+=1,n.last=n.count-1,d&&u?void 0!==t?n.slides.eq(n.count-t).after(a):n.container.prepend(a):void 0!==t?n.slides.eq(t).before(a):n.container.append(a),n.update(t,"add"),n.slides=$(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.added(n)},n.removeSlide=function(e){var t=isNaN(e)?n.slides.index($(e)):e;n.count-=1,n.last=n.count-1,isNaN(e)?$(e,n.slides).remove():d&&u?n.slides.eq(n.last).remove():n.slides.eq(e).remove(),n.doMath(),n.update(t,"remove"),n.slides=$(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.removed(n)},f.init()},$(window).blur(function(t){e=!1}).focus(function(t){e=!0}),$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,isFirefox:!1,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){},rtl:!1},$.fn.flexslider=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){var t=$(this),a=e.selector?e.selector:".slides > li",n=t.find(a);1===n.length&&!1===e.allowOneSlide||0===n.length?(n.fadeIn(400),e.start&&e.start(t)):void 0===t.data("flexslider")&&new $.flexslider(this,e)});var t=$(this).data("flexslider");switch(e){case"play":t.play();break;case"pause":t.pause();break;case"stop":t.stop();break;case"next":t.flexAnimate(t.getTarget("next"),!0);break;case"prev":case"previous":t.flexAnimate(t.getTarget("prev"),!0);break;default:"number"==typeof e&&t.flexAnimate(e,!0)}}}(jQuery);

/** 
 * 4) @license
 * Video.js 7.4.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("global/document"),require("global/window")):"function"==typeof define&&define.amd?define(["global/document","global/window"],e):t.videojs=e(t.document,t.window)}(this,function(t,e){t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var i="7.4.1";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t,e){return(r=Object.setPrototypeOf||function t(e,i){return e.__proto__=i,e})(t,e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t,e,i){return(s=a()?Reflect.construct:function t(e,i,n){var a=[null];a.push.apply(a,i);var s,o=new(Function.bind.apply(e,a));return n&&r(o,n.prototype),o}).apply(null,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return e||(e=t.slice(0)),t.raw=e,t}var l=[],c=function t(i,n){return function(t,r,a){var s=n.levels[r],o=new RegExp("^("+s+")$");if("log"!==t&&a.unshift(t.toUpperCase()+":"),a.unshift(i+":"),l&&l.push([].concat(a)),e.console){var u=e.console[t];u||"debug"!==t||(u=e.console.info||e.console.log),u&&s&&o.test(t)&&u[Array.isArray(a)?"apply":"call"](e.console,a)}}};function h(t){var e="info",i,n=function t(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];i("log",e,r)};return i=c(t,n),n.createLogger=function(e){return h(t+": "+e)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(t){if("string"==typeof t){if(!n.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');e=t}return e},n.history=function(){return l?[].concat(l):[]},n.history.filter=function(t){return(l||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},n.history.clear=function(){l&&(l.length=0)},n.history.disable=function(){null!==l&&(l.length=0,l=null)},n.history.enable=function(){null===l&&(l=[])},n.error=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i("error",e,n)},n.warn=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i("warn",e,n)},n.debug=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i("debug",e,n)},n}var d=h("VIDEOJS"),p=d.createLogger;function f(t){return t.replace(/\n\r?\s*/g,"")}var m=function t(e){for(var i="",n=0;n<arguments.length;n++)i+=f(e[n])+(arguments[n+1]||"");return i},g=Object.prototype.toString,y=function t(e){return T(e)?Object.keys(e):[]};function v(t,e){y(t).forEach(function(i){return e(t[i],i)})}function _(t,e,i){return void 0===i&&(i=0),y(t).reduce(function(i,n){return e(i,t[n],n)},i)}function b(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[t].concat(i)):(i.forEach(function(e){e&&v(e,function(e,i){t[i]=e})}),t)}function T(t){return!!t&&"object"==typeof t}function S(t){return T(t)&&"[object Object]"===g.call(t)&&t.constructor===Object}function k(t,i){if(!t||!i)return"";if("function"==typeof e.getComputedStyle){var n=e.getComputedStyle(t);return n?n[i]:""}return""}function w(){var t=u(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return w=function e(){return t},t}function C(t){return"string"==typeof t&&/\S/.test(t)}function E(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function A(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function L(){return t===e.document}function O(t){return T(t)&&1===t.nodeType}function P(){try{return e.parent!==e.self}catch(t){return!0}}function U(e){return function(i,n){if(!C(i))return t[e](null);C(n)&&(n=t.querySelector(n));var r=O(n)?n:t;return r[e]&&r[e](i)}}function I(e,i,n,r){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===n&&(n={});var a=t.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(t){var e=i[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(d.warn(m(w(),t,e)),a.setAttribute(t,e)):"textContent"===t?x(a,e):a[t]=e}),Object.getOwnPropertyNames(n).forEach(function(t){a.setAttribute(t,n[t])}),r&&J(a,r),a}function x(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function D(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function R(t,e){return E(e),t.classList?t.classList.contains(e):A(e).test(t.className)}function M(t,e){return t.classList?t.classList.add(e):R(t,e)||(t.className=(t.className+" "+e).trim()),t}function B(t,e){return t.classList?t.classList.remove(e):(E(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function N(t,e,i){var n=R(t,e);if("function"==typeof i&&(i=i(t,e)),"boolean"!=typeof i&&(i=!n),i!==n)return i?M(t,e):B(t,e),t}function j(t,e){Object.getOwnPropertyNames(e).forEach(function(i){var n=e[i];null==n||!1===n?t.removeAttribute(i):t.setAttribute(i,!0===n?"":n)})}function F(t){var e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var n=t.attributes,r=n.length-1;r>=0;r--){var a=n[r].name,s=n[r].value;"boolean"!=typeof t[a]&&-1===i.indexOf(","+a+",")||(s=null!==s),e[a]=s}return e}function V(t,e){return t.getAttribute(e)}function H(t,e,i){t.setAttribute(e,i)}function q(t,e){t.removeAttribute(e)}function z(){t.body.focus(),t.onselectstart=function(){return!1}}function W(){t.onselectstart=function(){return!0}}function G(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(i[t]=e[t])}),i.height||(i.height=parseFloat(k(t,"height"))),i.width||(i.width=parseFloat(k(t,"width"))),i}}function X(i){var n;if(i.getBoundingClientRect&&i.parentNode&&(n=i.getBoundingClientRect()),!n)return{left:0,top:0};var r=t.documentElement,a=t.body,s=r.clientLeft||a.clientLeft||0,o=e.pageXOffset||a.scrollLeft,u=n.left+o-s,l=r.clientTop||a.clientTop||0,c=e.pageYOffset||a.scrollTop,h=n.top+c-l;return{left:Math.round(u),top:Math.round(h)}}function Y(t,e){var i={},n=X(t),r=t.offsetWidth,a=t.offsetHeight,s=n.top,o=n.left,u=e.pageY,l=e.pageX;return e.changedTouches&&(l=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(s-u+a)/a)),i.x=Math.max(0,Math.min(1,(l-o)/r)),i}function $(t){return T(t)&&3===t.nodeType}function K(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Q(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),O(e)||$(e)?e:"string"==typeof e&&/\S/.test(e)?t.createTextNode(e):void 0}).filter(function(t){return t})}function J(t,e){return Q(e).forEach(function(e){return t.appendChild(e)}),t}function Z(t,e){return J(K(t),e)}function tt(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||0===t.button&&1===t.buttons)}var et=U("querySelector"),it=U("querySelectorAll"),nt=Object.freeze({isReal:L,isEl:O,isInFrame:P,createEl:I,textContent:x,prependTo:D,hasClass:R,addClass:M,removeClass:B,toggleClass:N,setAttributes:j,getAttributes:F,getAttribute:V,setAttribute:H,removeAttribute:q,blockTextSelection:z,unblockTextSelection:W,getBoundingClientRect:G,findPosition:X,getPointerPosition:Y,isTextNode:$,emptyEl:K,normalizeContent:Q,appendContent:J,insertContent:Z,isSingleLeftClick:tt,$:et,$$:it}),rt=1;function at(){return rt++}var st={},ot="vdata"+(new Date).getTime();function ut(t){var e=t[ot];return e||(e=t[ot]=at()),st[e]||(st[e]={}),st[e]}function lt(t){var e=t[ot];return!!e&&!!Object.getOwnPropertyNames(st[e]).length}function ct(t){var e=t[ot];if(e){delete st[e];try{delete t[ot]}catch(e){t.removeAttribute?t.removeAttribute(ot):t[ot]=null}}}function ht(t,e){var i=ut(t);0===i.handlers[e].length&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&ct(t)}function dt(t,e,i,n){i.forEach(function(i){t(e,i,n)})}function pt(i){function n(){return!0}function r(){return!1}if(!i||!i.isPropagationStopped){var a=i||e.event;for(var s in i={},a)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&("returnValue"===s&&a.preventDefault||(i[s]=a[s]));if(i.target||(i.target=i.srcElement||t),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){a.preventDefault&&a.preventDefault(),i.returnValue=!1,a.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),i.cancelBubble=!0,a.cancelBubble=!0,i.isPropagationStopped=n},i.isPropagationStopped=r,i.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),i.isImmediatePropagationStopped=n,i.stopPropagation()},i.isImmediatePropagationStopped=r,null!==i.clientX&&void 0!==i.clientX){var o=t.documentElement,u=t.body;i.pageX=i.clientX+(o&&o.scrollLeft||u&&u.scrollLeft||0)-(o&&o.clientLeft||u&&u.clientLeft||0),i.pageY=i.clientY+(o&&o.scrollTop||u&&u.scrollTop||0)-(o&&o.clientTop||u&&u.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i}var ft=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function t(){ft=!0}});e.addEventListener("test",null,t),e.removeEventListener("test",null,t)}catch(t){}}();var mt=["touchstart","touchmove"];function gt(t,e,i){if(Array.isArray(e))return dt(gt,t,e,i);var n=ut(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=at()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,i){if(!n.disabled){e=pt(e);var r=n.handlers[e.type];if(r)for(var a=r.slice(0),s=0,o=a.length;s<o&&!e.isImmediatePropagationStopped();s++)try{a[s].call(t,e,i)}catch(t){d.error(t)}}}),1===n.handlers[e].length)if(t.addEventListener){var r=!1;ft&&mt.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,n.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function yt(t,e,i){if(lt(t)){var n=ut(t);if(n.handlers){if(Array.isArray(e))return dt(yt,t,e,i);var r=function t(e,i){n.handlers[i]=[],ht(e,i)};if(void 0!==e){var a=n.handlers[e];if(a)if(i){if(i.guid)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);ht(t,e)}else r(t,e)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&r(t,o)}}}function vt(t,e,i){var n=lt(t)?ut(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=pt(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&!0===e.bubbles)vt.call(null,r,e,i);else if(!r&&!e.defaultPrevented){var a=ut(e.target);e.target[e.type]&&(a.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function _t(t,e,i){if(Array.isArray(e))return dt(_t,t,e,i);var n=function n(){yt(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||at(),gt(t,e,n)}var bt=Object.freeze({fixEvent:pt,on:gt,off:yt,trigger:vt,one:_t}),Tt=!1,St,kt=function e(){if(L()&&!1!==St.options.autoSetup){var i=Array.prototype.slice.call(t.getElementsByTagName("video")),n=Array.prototype.slice.call(t.getElementsByTagName("audio")),r=Array.prototype.slice.call(t.getElementsByTagName("video-js")),a=i.concat(n,r);if(a&&a.length>0)for(var s=0,o=a.length;s<o;s++){var u=a[s],l;if(!u||!u.getAttribute){wt(1);break}void 0===u.player&&null!==u.getAttribute("data-setup")&&St(u)}else Tt||wt(1)}};function wt(t,i){i&&(St=i),e.setTimeout(kt,t)}L()&&"complete"===t.readyState?Tt=!0:_t(e,"load",function(){Tt=!0});var Ct=function e(i){var n=t.createElement("style");return n.className=i,n},Et=function t(e,i){e.styleSheet?e.styleSheet.cssText=i:e.textContent=i},At=function t(e,i,n){i.guid||(i.guid=at());var r=function t(){return i.apply(e,arguments)};return r.guid=n?n+"_"+i.guid:i.guid,r},Lt=function t(e,i){var n=Date.now(),r;return function t(){var r=Date.now();r-n>=i&&(e.apply(void 0,arguments),n=r)}},Ot=function t(i,n,r,a){var s;void 0===a&&(a=e);var o=function t(){a.clearTimeout(s),s=null},u=function t(){var e=this,o=arguments,u=function t(){s=null,u=null,r||i.apply(e,o)};!s&&r&&i.apply(e,o),a.clearTimeout(s),s=a.setTimeout(u,n)};return u.cancel=o,u},Pt=function t(){},Ut;Pt.prototype.allowedEvents_={},Pt.prototype.on=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},gt(this,t,e),this.addEventListener=i},Pt.prototype.addEventListener=Pt.prototype.on,Pt.prototype.off=function(t,e){yt(this,t,e)},Pt.prototype.removeEventListener=Pt.prototype.off,Pt.prototype.one=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},_t(this,t,e),this.addEventListener=i},Pt.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=pt(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),vt(this,t)},Pt.prototype.dispatchEvent=Pt.prototype.trigger,Pt.prototype.queueTrigger=function(t){var i=this;Ut||(Ut=new Map);var n=t.type||t,r=Ut.get(this);r||(r=new Map,Ut.set(this,r));var a=r.get(n);r.delete(n),e.clearTimeout(a);var s=e.setTimeout(function(){0===r.size&&(r=null,Ut.delete(i)),i.trigger(t)},0);r.set(n,s)};var It=function t(e){return e instanceof Pt||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},xt=function t(e,i){It(e)?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))},Dt=function t(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Rt=function t(e){if(!e.nodeName&&!It(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Mt=function t(e){if(!Dt(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Bt=function t(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},Nt=function t(e,i){var n=i.length<3||i[0]===e||i[0]===e.eventBusEl_,r,a,s;return n?(r=e.eventBusEl_,i.length>=3&&i.shift(),a=i[0],s=i[1]):(r=i[0],a=i[1],s=i[2]),Rt(r),Mt(a),Bt(s),{isTargetingSelf:n,target:r,type:a,listener:s=At(e,s)}},jt=function t(e,i,n,r){Rt(e),e.nodeName?bt[i](e,n,r):e[i](n,r)},Ft={on:function t(){for(var e=this,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=Nt(this,n),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(jt(o,"on",u,l),!s){var c=function t(){return e.off(o,u,l)};c.guid=l.guid;var h=function t(){return e.off("dispose",c)};h.guid=l.guid,jt(this,"on","dispose",c),jt(o,"on","dispose",h)}},one:function t(){for(var e=this,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=Nt(this,n),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s)jt(o,"one",u,l);else{var c=function t(){e.off(o,u,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};c.guid=l.guid,jt(o,"one",u,c)}},off:function t(e,i,n){if(!e||Dt(e))yt(this.eventBusEl_,e,i);else{var r=e,a=i;Rt(r),Mt(a),Bt(n),n=At(this,n),this.off("dispose",n),r.nodeName?(yt(r,a,n),yt(r,"dispose",n)):It(r)&&(r.off(a,n),r.off("dispose",n))}},trigger:function t(e,i){return vt(this.eventBusEl_,e,i)}};function Vt(t,i){void 0===i&&(i={});var n,r=i.eventBusKey;if(r){if(!t[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');t.eventBusEl_=t[r]}else t.eventBusEl_=I("span",{className:"vjs-event-bus"});return b(t,Ft),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(t){t()}),t.on("dispose",function(){t.off(),e.setTimeout(function(){t.eventBusEl_=null},0)}),t}var Ht={state:{},setState:function t(e){var i=this,n;return"function"==typeof e&&(e=e()),v(e,function(t,e){i.state[e]!==t&&((n=n||{})[e]={from:i.state[e],to:t}),i.state[e]=t}),n&&It(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function qt(t,e){return b(t,Ht),t.state=b({},t.state,e),"function"==typeof t.handleStateChanged&&It(t)&&t.on("statechanged",t.handleStateChanged),t}function zt(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function Wt(t,e){return zt(t)===zt(e)}function Gt(){for(var t={},e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach(function(e){e&&v(e,function(e,i){S(e)?(S(t[i])||(t[i]={}),t[i]=Gt(t[i],e)):t[i]=e})}),t}var Xt=function(){function t(t,e,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.options_=Gt({},this.options_),e=this.options_=Gt(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+at()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&Vt(this,{eventBusKey:this.el_?"el_":null}),qt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==e.initChildren&&this.initChildren(),this.ready(i),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var i=t.prototype;return i.dispose=function t(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ct(this.el_),this.el_=null),this.player_=null},i.player=function t(){return this.player_},i.options=function t(e){return d.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=Gt(this.options_,e),this.options_):this.options_},i.el=function t(){return this.el_},i.createEl=function t(e,i,n){return I(e,i,n)},i.localize=function t(e,i,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),s=a&&a[r],o=r&&r.split("-")[0],u=a&&a[o],l=n;return s&&s[e]?l=s[e]:u&&u[e]&&(l=u[e]),i&&(l=l.replace(/\{(\d+)\}/g,function(t,e){var n=i[e-1],r=n;return void 0===n&&(r=t),r})),l},i.contentEl=function t(){return this.contentEl_||this.el_},i.id=function t(){return this.id_},i.name=function t(){return this.name_},i.children=function t(){return this.children_},i.getChildById=function t(e){return this.childIndex_[e]},i.getChild=function t(e){if(e)return e=zt(e),this.childNameIndex_[e]},i.addChild=function e(i,n,r){var a,s;if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof i){s=zt(i);var o=n.componentClass||s;n.name=s;var u=t.getComponent(o);if(!u)throw new Error("Component "+o+" does not exist");if("function"!=typeof u)return null;a=new u(this.player_||this,n)}else a=i;if(this.children_.splice(r,0,a),"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(s=s||a.name&&zt(a.name()))&&(this.childNameIndex_[s]=a),"function"==typeof a.el&&a.el()){var l,c=this.contentEl().children[r]||null;this.contentEl().insertBefore(a.el(),c)}return a},i.removeChild=function t(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var i=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){i=!0,this.children_.splice(n,1);break}if(i){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},i.initChildren=function e(){var i=this,n=this.options_.children;if(n){var r=this.options_,a=function t(e){var n=e.name,a=e.opts;if(void 0!==r[n]&&(a=r[n]),!1!==a){!0===a&&(a={}),a.playerOptions=i.options_.playerOptions;var s=i.addChild(n,a);s&&(i[n]=s)}},s,o=t.getComponent("Tech");(s=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(t){return!s.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var e,r;return"string"==typeof t?r=n[e=t]||i.options_[e]||{}:(e=t.name,r=t),{name:e,opts:r}}).filter(function(e){var i=t.getComponent(e.opts.componentClass||zt(e.name));return i&&!o.isTech(i)}).forEach(a)}},i.buildCSSClass=function t(){return""},i.ready=function t(e,i){if(void 0===i&&(i=!1),e)return this.isReady_?void(i?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},i.triggerReady=function t(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},i.$=function t(e,i){return et(e,i||this.contentEl())},i.$$=function t(e,i){return it(e,i||this.contentEl())},i.hasClass=function t(e){return R(this.el_,e)},i.addClass=function t(e){M(this.el_,e)},i.removeClass=function t(e){B(this.el_,e)},i.toggleClass=function t(e,i){N(this.el_,e,i)},i.show=function t(){this.removeClass("vjs-hidden")},i.hide=function t(){this.addClass("vjs-hidden")},i.lockShowing=function t(){this.addClass("vjs-lock-showing")},i.unlockShowing=function t(){this.removeClass("vjs-lock-showing")},i.getAttribute=function t(e){return V(this.el_,e)},i.setAttribute=function t(e,i){H(this.el_,e,i)},i.removeAttribute=function t(e){q(this.el_,e)},i.width=function t(e,i){return this.dimension("width",e,i)},i.height=function t(e,i){return this.dimension("height",e,i)},i.dimensions=function t(e,i){this.width(e,!0),this.height(i)},i.dimension=function t(e,i,n){if(void 0!==i)return null!==i&&i==i||(i=0),-1!==(""+i).indexOf("%")||-1!==(""+i).indexOf("px")?this.el_.style[e]=i:this.el_.style[e]="auto"===i?"":i+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],a=r.indexOf("px");return-1!==a?parseInt(r.slice(0,a),10):parseInt(this.el_["offset"+zt(e)],10)},i.currentDimension=function t(i){var n=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if("function"==typeof e.getComputedStyle){var r=e.getComputedStyle(this.el_);n=r.getPropertyValue(i)||r[i]}if(0===(n=parseFloat(n))){var a="offset"+zt(i);n=this.el_[a]}return n},i.currentDimensions=function t(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function t(){return this.currentDimension("width")},i.currentHeight=function t(){return this.currentDimension("height")},i.focus=function t(){this.el_.focus()},i.blur=function t(){this.el_.blur()},i.emitTapEvents=function t(){var e=0,i=null,n=10,r=200,a;this.on("touchstart",function(t){1===t.touches.length&&(i={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},e=(new Date).getTime(),a=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)a=!1;else if(i){var e=t.touches[0].pageX-i.pageX,n=t.touches[0].pageY-i.pageY,r;Math.sqrt(e*e+n*n)>10&&(a=!1)}});var s=function t(){a=!1};this.on("touchleave",s),this.on("touchcancel",s),this.on("touchend",function(t){var n;(i=null,!0===a)&&((new Date).getTime()-e<200&&(t.preventDefault(),this.trigger("tap")))})},i.enableTouchActivity=function t(){if(this.player()&&this.player().reportUserActivity){var e=At(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){e(),this.clearInterval(i),i=this.setInterval(e,250)});var n=function t(n){e(),this.clearInterval(i)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},i.setTimeout=function t(i,n){var r=this,a,s;return i=At(this,i),a=e.setTimeout(function(){r.off("dispose",s),i()},n),(s=function t(){return r.clearTimeout(a)}).guid="vjs-timeout-"+a,this.on("dispose",s),a},i.clearTimeout=function t(i){e.clearTimeout(i);var n=function t(){};return n.guid="vjs-timeout-"+i,this.off("dispose",n),i},i.setInterval=function t(i,n){var r=this;i=At(this,i);var a=e.setInterval(i,n),s=function t(){return r.clearInterval(a)};return s.guid="vjs-interval-"+a,this.on("dispose",s),a},i.clearInterval=function t(i){e.clearInterval(i);var n=function t(){};return n.guid="vjs-interval-"+i,this.off("dispose",n),i},i.requestAnimationFrame=function t(i){var n=this,r,a;return this.supportsRaf_?(i=At(this,i),r=e.requestAnimationFrame(function(){n.off("dispose",a),i()}),(a=function t(){return n.cancelAnimationFrame(r)}).guid="vjs-raf-"+r,this.on("dispose",a),r):this.setTimeout(i,1e3/60)},i.cancelAnimationFrame=function t(i){if(this.supportsRaf_){e.cancelAnimationFrame(i);var n=function t(){};return n.guid="vjs-raf-"+i,this.off("dispose",n),i}return this.clearTimeout(i)},t.registerComponent=function e(i,n){if("string"!=typeof i||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var r=t.getComponent("Tech"),a=r&&r.isTech(n),s=t===n||t.prototype.isPrototypeOf(n.prototype),o;if(a||!s)throw o=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+i+'"; '+o+".");i=zt(i),t.components_||(t.components_={});var u=t.getComponent("Player");if("Player"===i&&u&&u.players){var l=u.players,c=Object.keys(l);if(l&&c.length>0&&c.map(function(t){return l[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[i]=n,n},t.getComponent=function e(i){if(i)return i=zt(i),t.components_&&t.components_[i]?t.components_[i]:void 0},t}();Xt.prototype.supportsRaf_="function"==typeof e.requestAnimationFrame&&"function"==typeof e.cancelAnimationFrame,Xt.registerComponent("Component",Xt);var Yt=e.navigator&&e.navigator.userAgent||"",$t=/AppleWebKit\/([\d.]+)/i.exec(Yt),Kt=$t?parseFloat($t.pop()):null,Qt=/iPad/i.test(Yt),Jt=/iPhone/i.test(Yt)&&!Qt,Zt=/iPod/i.test(Yt),te=Jt||Qt||Zt,ee=(ie=Yt.match(/OS (\d+)_/i))&&ie[1]?ie[1]:null,ie,ne=/Android/i.test(Yt),re=function(){var t=Yt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return e&&i?parseFloat(t[1]+"."+t[2]):e||null}(),ae=ne&&re<5&&Kt<537,se=/Firefox/i.test(Yt),oe=/Edge/i.test(Yt),ue=!oe&&(/Chrome/i.test(Yt)||/CriOS/i.test(Yt)),le=function(){var t=Yt.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ce=function(){var t=/MSIE\s(\d+)\.\d/.exec(Yt),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(Yt)&&/rv:11.0/.test(Yt)&&(e=11),e}(),he=/Safari/i.test(Yt)&&!ue&&!ne&&!oe,de=(he||te)&&!ue,pe=L()&&("ontouchstart"in e||e.navigator.maxTouchPoints||e.DocumentTouch&&e.document instanceof e.DocumentTouch),fe=Object.freeze({IS_IPAD:Qt,IS_IPHONE:Jt,IS_IPOD:Zt,IS_IOS:te,IOS_VERSION:ee,IS_ANDROID:ne,ANDROID_VERSION:re,IS_NATIVE_ANDROID:ae,IS_FIREFOX:se,IS_EDGE:oe,IS_CHROME:ue,CHROME_VERSION:le,IE_VERSION:ce,IS_SAFARI:he,IS_ANY_SAFARI:de,TOUCH_ENABLED:pe});function me(t,e,i){if("number"!=typeof e||e<0||e>i)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+i+").")}function ge(t,e,i,n){return me(t,n,i.length-1),i[n][e]}function ye(t){return void 0===t||0===t.length?{length:0,start:function t(){throw new Error("This TimeRanges object is empty")},end:function t(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:ge.bind(null,"start",0,t),end:ge.bind(null,"end",1,t)}}function ve(t,e){return Array.isArray(t)?ye(t):void 0===t||void 0===e?ye():ye([[t,e]])}function _e(t,e){var i=0,n,r;if(!e)return 0;t&&t.length||(t=ve(0,0));for(var a=0;a<t.length;a++)n=t.start(a),(r=t.end(a))>e&&(r=e),i+=r-n;return i/e}for(var be={},Te=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Se=Te[0],ke,we=0;we<Te.length;we++)if(Te[we][1]in t){ke=Te[we];break}if(ke)for(var Ce=0;Ce<ke.length;Ce++)be[Se[Ce]]=ke[Ce];function Ee(t){if(t instanceof Ee)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:T(t)&&("number"==typeof t.code&&(this.code=t.code),b(this,t)),this.message||(this.message=Ee.defaultMessages[this.code]||"")}Ee.prototype.code=0,Ee.prototype.message="",Ee.prototype.status=null,Ee.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Ee.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ae=0;Ae<Ee.errorTypes.length;Ae++)Ee[Ee.errorTypes[Ae]]=Ae,Ee.prototype[Ee.errorTypes[Ae]]=Ae;var Le=Oe;function Oe(t,e){var i,n=null;try{i=JSON.parse(t,e)}catch(t){n=t}return[n,i]}function Pe(t){return null!=t&&"function"==typeof t.then}function Ue(t){Pe(t)&&t.then(null,function(t){})}var Ie=function t(e){var i;return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,n){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},xe,De,Re=function t(e){var i=e.$$("track"),n=Array.prototype.map.call(i,function(t){return t.track}),r;return Array.prototype.map.call(i,function(t){var e=Ie(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(e.textTracks(),function(t){return-1===n.indexOf(t)}).map(Ie))},Me=function t(e,i){return e.forEach(function(t){var e=i.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return e.addCue(t)})}),i.textTracks()},Be=Ie,Ne="vjs-modal-dialog",je=27,Fe=function(i){function r(t,e){var n;return(n=i.call(this,t,e)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=I("div",{className:Ne+"-content"},{role:"document"}),n.descEl_=I("p",{className:Ne+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),x(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}n(r,i);var a=r.prototype;return a.createEl=function t(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},a.dispose=function t(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},a.buildCSSClass=function t(){return Ne+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},a.handleKeyPress=function t(e){27===e.which&&this.closeable()&&this.close()},a.label=function t(){return this.localize(this.options_.label||"Modal Window")},a.description=function t(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},a.open=function t(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),
this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",At(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},a.opened=function t(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},a.close=function t(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",At(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},a.closeable=function t(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},a.fill=function t(){this.fillWith(this.content())},a.fillWith=function t(e){var i=this.contentEl(),n=i.parentNode,r=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(i),this.empty(),Z(i,e),this.trigger("modalfill"),r?n.insertBefore(i,r):n.appendChild(i);var a=this.getChild("closeButton");a&&n.appendChild(a.el_)},a.empty=function t(){this.trigger("beforemodalempty"),K(this.contentEl()),this.trigger("modalempty")},a.content=function t(e){return void 0!==e&&(this.content_=e),this.content_},a.conditionalFocus_=function e(){var i=t.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(i)||n===i)&&(this.previouslyActiveEl_=i,this.focus(),this.on(t,"keydown",this.handleKeyDown))},a.conditionalBlur_=function e(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(t,"keydown",this.handleKeyDown)},a.handleKeyDown=function e(i){if(9===i.which){for(var n=this.focusableEls_(),r=this.el_.querySelector(":focus"),a,s=0;s<n.length;s++)if(r===n[s]){a=s;break}t.activeElement===this.el_&&(a=0),i.shiftKey&&0===a?(n[n.length-1].focus(),i.preventDefault()):i.shiftKey||a!==n.length-1||(n[0].focus(),i.preventDefault())}},a.focusableEls_=function t(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(t){return(t instanceof e.HTMLAnchorElement||t instanceof e.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof e.HTMLInputElement||t instanceof e.HTMLSelectElement||t instanceof e.HTMLTextAreaElement||t instanceof e.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof e.HTMLIFrameElement||t instanceof e.HTMLObjectElement||t instanceof e.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},r}(Xt);Fe.prototype.options_={pauseOnOpen:!0,temporary:!0},Xt.registerComponent("ModalDialog",Fe);var Ve=function(t){function e(e){var i;void 0===e&&(e=[]),(i=t.call(this)||this).tracks_=[],Object.defineProperty(o(o(i)),"length",{get:function t(){return this.tracks_.length}});for(var n=0;n<e.length;n++)i.addTrack(e[n]);return i}n(e,t);var i=e.prototype;return i.addTrack=function t(e){var i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function t(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},i.removeTrack=function t(e){for(var i,n=0,r=this.length;n<r;n++)if(this[n]===e){(i=this[n]).off&&i.off(),this.tracks_.splice(n,1);break}i&&this.trigger({track:i,type:"removetrack"})},i.getTrackById=function t(e){for(var i=null,n=0,r=this.length;n<r;n++){var a=this[n];if(a.id===e){i=a;break}}return i},e}(Pt);for(var He in Ve.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ve.prototype.allowedEvents_)Ve.prototype["on"+He]=null;var qe=function t(e,i){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&i.id!==e[n].id&&(e[n].enabled=!1)},ze=function(t){function e(e){var i;void 0===e&&(e=[]);for(var n=e.length-1;n>=0;n--)if(e[n].enabled){qe(e,e[n]);break}return(i=t.call(this,e)||this).changing_=!1,i}var i;return n(e,t),e.prototype.addTrack=function e(i){var n=this;i.enabled&&qe(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&i.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,qe(n,i),n.changing_=!1,n.trigger("change"))})},e}(Ve),We=function t(e,i){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&i.id!==e[n].id&&(e[n].selected=!1)},Ge=function(t){function e(e){var i;void 0===e&&(e=[]);for(var n=e.length-1;n>=0;n--)if(e[n].selected){We(e,e[n]);break}return(i=t.call(this,e)||this).changing_=!1,Object.defineProperty(o(o(i)),"selectedIndex",{get:function t(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function t(){}}),i}var i;return n(e,t),e.prototype.addTrack=function e(i){var n=this;i.selected&&We(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&i.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,We(n,i),n.changing_=!1,n.trigger("change"))})},e}(Ve),Xe=function(t){function e(){return t.apply(this,arguments)||this}var i;return n(e,t),e.prototype.addTrack=function e(i){var n;t.prototype.addTrack.call(this,i),i.addEventListener("modechange",At(this,function(){this.queueTrigger("change")})),-1===["metadata","chapters"].indexOf(i.kind)&&i.addEventListener("modechange",At(this,function(){this.trigger("selectedlanguagechange")}))},e}(Ve),Ye=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function t(){return this.trackElements_.length}});for(var e=0,i=t.length;e<i;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function t(e){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function t(){return this.trackElements_[i]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.getTrackElementByTrack_=function t(e){for(var i,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){i=this.trackElements_[n];break}return i},e.removeTrackElement_=function t(e){for(var i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i]){this.trackElements_.splice(i,1);break}},t}(),$e=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function t(){return this.length_}})}var e=t.prototype;return e.setCues_=function t(e){var i=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var a=function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function t(){return this.cues_[e]}})};if(i<r)for(n=i;n<r;n++)a.call(this,n)},e.getCueById=function t(e){for(var i=null,n=0,r=this.length;n<r;n++){var a=this[n];if(a.id===e){i=a;break}}return i},t}(),Ke={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Qe={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Je={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ze={disabled:"disabled",hidden:"hidden",showing:"showing"},ti=function(t){function e(e){var i;void 0===e&&(e={}),i=t.call(this)||this;var n={id:e.id||"vjs_track_"+at(),kind:e.kind||"",label:e.label||"",language:e.language||""},r=function t(e){Object.defineProperty(o(o(i)),e,{get:function t(){return n[e]},set:function t(){}})};for(var a in n)r(a);return i}return n(e,t),e}(Pt),ei=function i(n){var r=["protocol","hostname","port","pathname","search","hash","host"],a=t.createElement("a");a.href=n;var s=""===a.host&&"file:"!==a.protocol,o;s&&((o=t.createElement("div")).innerHTML='<a href="'+n+'"></a>',a=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),t.body.appendChild(o));for(var u={},l=0;l<r.length;l++)u[r[l]]=a[r[l]];return"http:"===u.protocol&&(u.host=u.host.replace(/:80$/,"")),"https:"===u.protocol&&(u.host=u.host.replace(/:443$/,"")),u.protocol||(u.protocol=e.location.protocol),s&&t.body.removeChild(o),u},ii=function e(i){if(!i.match(/^https?:\/\//)){var n=t.createElement("div");n.innerHTML='<a href="'+i+'">x</a>',i=n.firstChild.href}return i},ni=function t(e){if("string"==typeof e){var i,n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(n)return n.pop().toLowerCase()}return""},ri=function t(i){var n=e.location,r=ei(i),a,s;return(":"===r.protocol?n.protocol:r.protocol)+r.host!==n.protocol+n.host},ai=Object.freeze({parseUrl:ei,getAbsoluteURL:ii,getFileExtension:ni,isCrossOrigin:ri}),si=ui,oi=Object.prototype.toString;function ui(t){var e=oi.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var li="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ci(t,e){return t(e={exports:{}},e.exports),e.exports}var hi=ci(function(t,e){function i(t){return t.replace(/^\s*|\s*$/g,"")}(e=t.exports=i).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}),di=hi.left,pi=hi.right,fi=Function.prototype.toString,mi=/^\s*class\b/,gi=function t(e){try{var i=fi.call(e);return mi.test(i)}catch(t){return!1}},yi=function t(e){try{return!gi(e)&&(fi.call(e),!0)}catch(t){return!1}},vi=Object.prototype.toString,_i="[object Function]",bi="[object GeneratorFunction]",Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Si=function t(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(Ti)return yi(e);if(gi(e))return!1;var i=vi.call(e);return i===_i||i===bi},ki=Object.prototype.toString,wi=Object.prototype.hasOwnProperty,Ci=function t(e,i,n){for(var r=0,a=e.length;r<a;r++)wi.call(e,r)&&(null==n?i(e[r],r,e):i.call(n,e[r],r,e))},Ei=function t(e,i,n){for(var r=0,a=e.length;r<a;r++)null==n?i(e.charAt(r),r,e):i.call(n,e.charAt(r),r,e)},Ai=function t(e,i,n){for(var r in e)wi.call(e,r)&&(null==n?i(e[r],r,e):i.call(n,e[r],r,e))},Li,Oi=function t(e,i,n){if(!Si(i))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=n),"[object Array]"===ki.call(e)?Ci(e,i,r):"string"==typeof e?Ei(e,i,r):Ai(e,i,r)},Pi=function t(e){return"[object Array]"===Object.prototype.toString.call(e)},Ui=function t(e){if(!e)return{};var i={};return Oi(hi(e).split("\n"),function(t){var e=t.indexOf(":"),n=hi(t.slice(0,e)).toLowerCase(),r=hi(t.slice(e+1));void 0===i[n]?i[n]=r:Pi(i[n])?i[n].push(r):i[n]=[i[n],r]}),i},Ii=Di,xi=Object.prototype.hasOwnProperty;function Di(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)xi.call(i,n)&&(t[n]=i[n])}return t}var Ri=ji;function Mi(t,e){for(var i=0;i<t.length;i++)e(t[i])}function Bi(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ni(t,e,i){var n=t;return si(e)?(i=e,"string"==typeof t&&(n={uri:t})):n=Ii(e,{uri:t}),n.callback=i,n}function ji(t,e,i){return Fi(e=Ni(t,e,i))}function Fi(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,i=function i(n,r,a){e||(e=!0,t.callback(n,r,a))};function n(){4===o.readyState&&setTimeout(s,0)}function r(){var t=void 0;if(t=o.response?o.response:o.responseText||Vi(o),m)try{t=JSON.parse(t)}catch(t){}return t}function a(t){return clearTimeout(g),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,i(t,y)}function s(){if(!l){var e;clearTimeout(g),e=t.useXDR&&void 0===o.status?200:1223===o.status?204:o.status;var n=y,a=null;return 0!==e?(n={body:r(),statusCode:e,method:h,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&(n.headers=Ui(o.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),i(a,n,n.body)}}var o=t.xhr||null,u,l;o||(o=t.cors||t.useXDR?new ji.XDomainRequest:new ji.XMLHttpRequest);var c=o.url=t.uri||t.url,h=o.method=t.method||"GET",d=t.body||t.data,p=o.headers=t.headers||{},f=!!t.sync,m=!1,g,y={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:o};if("json"in t&&!1!==t.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),d=JSON.stringify(!0===t.json?d:t.json))),o.onreadystatechange=n,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=a,o.open(h,c,!f,t.username,t.password),f||(o.withCredentials=!!t.withCredentials),!f&&t.timeout>0&&(g=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",a(t)}},t.timeout)),o.setRequestHeader)for(u in p)p.hasOwnProperty(u)&&o.setRequestHeader(u,p[u]);else if(t.headers&&!Bi(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(o),o.send(d||null),o}function Vi(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function Hi(){}ji.XMLHttpRequest=e.XMLHttpRequest||Hi,ji.XDomainRequest="withCredentials"in new ji.XMLHttpRequest?ji.XMLHttpRequest:e.XDomainRequest,Mi(["get","put","post","patch","head","delete"],function(t){ji["delete"===t?"del":t]=function(e,i,n){return(i=Ni(e,i,n)).method=t.toUpperCase(),Fi(i)}});var qi=function t(i,n){var r=new e.WebVTT.Parser(e,e.vttjs,e.WebVTT.StringDecoder()),a=[];r.oncue=function(t){n.addCue(t)},r.onparsingerror=function(t){a.push(t)},r.onflush=function(){n.trigger({type:"loadeddata",target:n})},r.parse(i),a.length>0&&(e.console&&e.console.groupCollapsed&&e.console.groupCollapsed("Text Track parsing errors for "+n.src),a.forEach(function(t){return d.error(t)}),e.console&&e.console.groupEnd&&e.console.groupEnd()),r.flush()},zi=function t(i,n){var r={uri:i},a=ri(i);a&&(r.cors=a),Ri(r,At(this,function(t,i,r){if(t)return d.error(t,i);if(n.loaded_=!0,"function"!=typeof e.WebVTT){if(n.tech_){var a=function t(){return qi(r,n)};n.tech_.on("vttjsloaded",a),n.tech_.on("vttjserror",function(){d.error("vttjs failed to load, stopping trying to process "+n.src),n.tech_.off("vttjsloaded",a)})}}else qi(r,n)}))},Wi=function(t){function i(e){var i;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Gt(e,{kind:Je[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=Ze[n.mode]||"disabled",a=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=t.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[];var s=new $e(i.cues_),u=new $e(i.activeCues_),l=!1,c=At(o(o(i)),function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return"disabled"!==r&&i.tech_.ready(function(){i.tech_.on("timeupdate",c)},!0),Object.defineProperties(o(o(i)),{default:{get:function t(){return a},set:function t(){}},mode:{get:function t(){return r},set:function t(e){var i=this;Ze[e]&&("disabled"!==(r=e)?this.tech_.ready(function(){i.tech_.on("timeupdate",c)},!0):this.tech_.off("timeupdate",c),this.trigger("modechange"))}},cues:{get:function t(){return this.loaded_?s:null},set:function t(){}},activeCues:{get:function t(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var e=this.tech_.currentTime(),i=[],n=0,r=this.cues.length;n<r;n++){var a=this.cues[n];a.startTime<=e&&a.endTime>=e?i.push(a):a.startTime===a.endTime&&a.startTime<=e&&a.startTime+.5>=e&&i.push(a)}if(l=!1,i.length!==this.activeCues_.length)l=!0;else for(var s=0;s<i.length;s++)-1===this.activeCues_.indexOf(i[s])&&(l=!0);return this.activeCues_=i,u.setCues_(this.activeCues_),u},set:function t(){}}}),n.src?(i.src=n.src,zi(n.src,o(o(i)))):i.loaded_=!0,i}n(i,t);var r=i.prototype;return r.addCue=function t(i){var n=i;if(e.vttjs&&!(i instanceof e.vttjs.VTTCue)){for(var r in n=new e.vttjs.VTTCue(i.startTime,i.endTime,i.text),i)r in n||(n[r]=i[r]);n.id=i.id,n.originalCue_=i}for(var a=this.tech_.textTracks(),s=0;s<a.length;s++)a[s]!==this&&a[s].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},r.removeCue=function t(e){for(var i=this.cues_.length;i--;){var n=this.cues_[i];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}},i}(ti);Wi.prototype.allowedEvents_={cuechange:"cuechange"};var Gi=function(t){function e(e){var i;void 0===e&&(e={});var n=Gt(e,{kind:Qe[e.kind]||""});i=t.call(this,n)||this;var r=!1;return Object.defineProperty(o(o(i)),"enabled",{get:function t(){return r},set:function t(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return n(e,t),e}(ti),Xi=function(t){function e(e){var i;void 0===e&&(e={});var n=Gt(e,{kind:Ke[e.kind]||""});i=t.call(this,n)||this;var r=!1;return Object.defineProperty(o(o(i)),"selected",{get:function t(){return r},set:function t(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return n(e,t),e}(ti),Yi=0,$i=1,Ki=2,Qi=3,Ji=function(t){function e(e){var i,n;void 0===e&&(e={}),i=t.call(this)||this;var r=new Wi(e);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(o(o(i)),{readyState:{get:function t(){return n}},track:{get:function t(){return r}}}),n=Yi,r.addEventListener("loadeddata",function(){n=Ki,i.trigger({type:"load",target:o(o(i))})}),i}return n(e,t),e}(Pt);Ji.prototype.allowedEvents_={load:"load"},Ji.NONE=Yi,Ji.LOADING=1,Ji.LOADED=Ki,Ji.ERROR=3;var Zi={audio:{ListClass:ze,TrackClass:Gi,capitalName:"Audio"},video:{ListClass:Ge,TrackClass:Xi,capitalName:"Video"},text:{ListClass:Xe,TrackClass:Wi,capitalName:"Text"}};Object.keys(Zi).forEach(function(t){Zi[t].getterName=t+"Tracks",Zi[t].privateName=t+"Tracks_"});var tn={remoteText:{ListClass:Xe,TrackClass:Wi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ye,TrackClass:Ji,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},en=Gt(Zi,tn);tn.names=Object.keys(tn),Zi.names=Object.keys(Zi),en.names=[].concat(tn.names).concat(Zi.names);var nn=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function rn(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function an(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function sn(){this.values=nn(null)}function on(t,e,i,n){var r=n?t.split(n):[t];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(i),o,u;if(2===s.length)e(s[0],s[1])}}function un(t,e,i){var n=t;function r(){var e=an(t);if(null===e)throw new rn(rn.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(t,e){var n=new sn;on(t,function(t,e){switch(t){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===e){n.set(t,i[r].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),s=a[0];n.integer(t,s),n.percent(t,s)&&n.set("snapToLines",!1),n.alt(t,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=e.split(","),n.percent(t,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical",""),e.line=n.get("line","auto"),e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align","middle"),e.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=r(),s(),"--\x3e"!==t.substr(0,3))throw new rn(rn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),s(),e.endTime=r(),s(),a(t,e)}rn.prototype=nn(Error.prototype),rn.prototype.constructor=rn,rn.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},sn.prototype={set:function t(e,i){this.get(e)||""===i||(this.values[e]=i)},get:function t(e,i,n){return n?this.has(e)?this.values[e]:i[n]:this.has(e)?this.values[e]:i},has:function t(e){return e in this.values},alt:function t(e,i,n){for(var r=0;r<n.length;++r)if(i===n[r]){this.set(e,i);break}},integer:function t(e,i){/^-?\d+$/.test(i)&&this.set(e,parseInt(i,10))},percent:function t(e,i){var n;return!!((n=i.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(i=parseFloat(i))>=0&&i<=100)&&(this.set(e,i),!0)}};var ln={"&":"&","<":"<",">":">","&lrm;":"","&rlm;":"","&nbsp;":""},cn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},hn={v:"title",lang:"lang"},dn={rt:"ruby"};function pn(t,e){function i(){if(!e)return null;function t(t){return e=e.substr(t.length),t}var i=e.match(/^([^<]*)(<[^>]*>?)?/);return t(i[1]?i[1]:i[2])}function n(t){return ln[t]}function r(t){for(;p=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(p[0],n);return t}function a(t,e){return!dn[e.localName]||dn[e.localName]===t.localName}function s(e,i){var n=cn[e];if(!n)return null;var r=t.document.createElement(n);r.localName=n;var a=hn[e];return a&&i&&(r[a]=i.trim()),r}for(var o=t.document.createElement("div"),u=o,l,c=[];null!==(l=i());)if("<"!==l[0])u.appendChild(t.document.createTextNode(r(l)));else{if("/"===l[1]){c.length&&c[c.length-1]===l.substr(2).replace(">","")&&(c.pop(),u=u.parentNode);continue}var h=an(l.substr(1,l.length-2)),d;if(h){d=t.document.createProcessingInstruction("timestamp",h),u.appendChild(d);continue}var p=l.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=s(p[1],p[3])))continue;if(!a(u,d))continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),c.push(p[1]),u.appendChild(d),u=d}return o}var fn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function mn(t){for(var e=0;e<fn.length;e++){var i=fn[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function gn(t){var e=[],i="",n;if(!t||!t.childNodes)return"ltr";function r(t,e){for(var i=e.childNodes.length-1;i>=0;i--)t.push(e.childNodes[i])}function a(t){if(!t||!t.length)return null;var e=t.pop(),i=e.textContent||e.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?(t.length=0,n[0]):i}return"ruby"===e.tagName?a(t):e.childNodes?(r(t,e),a(t)):void 0}for(r(e,t);i=a(e);)for(var s=0;s<i.length;s++)if(mn(n=i.charCodeAt(s)))return"rtl";return"ltr"}function yn(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,n=0,r=0;r<i.length&&i[r]!==e;r++)"showing"===i[r].mode&&n++;return-1*++n}function vn(){}function _n(t,e,i){vn.call(this),this.cue=e,this.cueDiv=pn(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:gn(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"middle":r=e.position-e.size/2;break;case"end":r=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function bn(t){var e,i,n,r;if(t.div){i=t.div.offsetHeight,n=t.div.offsetWidth,r=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight}function Tn(t,e,i,n){function r(t,e){for(var r,a=new bn(t),s=1,o=0;o<e.length;o++){for(;t.overlapsOppositeAxis(i,e[o])||t.within(i)&&t.overlapsAny(n);)t.move(e[o]);if(t.within(i))return t;var u=t.intersectPercentage(i);s>u&&(r=new bn(t),s=u),t=new bn(a)}return r||a}var a=new bn(e),s=e.cue,o=yn(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width"}var c=a.lineHeight,h=c*Math.round(o),d=i[l]+c,p=u[0];Math.abs(h)>d&&(h=h<0?-1:1,h*=Math.ceil(d/c)*c),o<0&&(h+=""===s.vertical?i.height:i.width,u=u.reverse()),a.move(p,h)}else{var f=a.lineHeight/i.height*100;switch(s.lineAlign){case"middle":o-=f/2;break;case"end":o-=f}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")})}u=["+y","-x","+x","-y"],a=new bn(e)}var m=r(a,u);e.move(m.toCSSCompatValues(i))}function Sn(){}vn.prototype.applyStyles=function(t,e){for(var i in e=e||this.div,t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},vn.prototype.formatStyle=function(t,e){return 0===t?0:t+e},_n.prototype=nn(vn.prototype),_n.prototype.constructor=_n,bn.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},bn.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},bn.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},bn.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},bn.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},bn.prototype.intersectPercentage=function(t){var e,i,n;return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},bn.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},bn.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0,r;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||i}},Sn.StringDecoder=function(){return{decode:function t(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Sn.convertCueToDOMTree=function(t,e){return t&&e?pn(t,e):null};var kn=.05,wn="sans-serif",Cn="1.5%";Sn.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=t.document.createElement("div");function r(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),r(e)){var a=[],s=bn.getSimpleBoxPosition(n),o,u={font:Math.round(.05*s.height*100)/100+"px "+wn};!function(){for(var i,r,o=0;o<e.length;o++)r=e[o],i=new _n(t,r,u),n.appendChild(i.div),Tn(t,i,s,a),r.displayState=i.div,a.push(bn.getSimpleBoxPosition(i))}()}else for(var l=0;l<e.length;l++)n.appendChild(e[l].displayState)},Sn.Parser=function(t,e,i){i||(i=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},Sn.Parser.prototype={reportOrThrowError:function t(e){if(!(e instanceof rn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function t(e){var i=this;function n(){for(var t=i.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}function r(t){var e=new sn;if(on(t,function(t,i){switch(t){case"id":e.set(t,i);break;case"width":e.percent(t,i);break;case"lines":e.integer(t,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var r=new sn;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;e.set(t+"X",r.get("x")),e.set(t+"Y",r.get("y"));break;case"scroll":e.alt(t,i,["up"])}},/=/,/\s/),e.has("id")){var n=new(i.vttjs.VTTRegion||i.window.VTTRegion);n.width=e.get("width",100),n.lines=e.get("lines",3),n.regionAnchorX=e.get("regionanchorX",0),n.regionAnchorY=e.get("regionanchorY",100),n.viewportAnchorX=e.get("viewportanchorX",0),n.viewportAnchorY=e.get("viewportanchorY",100),n.scroll=e.get("scroll",""),i.onregion&&i.onregion(n),i.regionList.push({id:e.get("id"),region:n})}}function a(t){var e=new sn;on(t,function(t,i){switch(t){case"MPEGT":e.integer(t+"S",i);break;case"LOCA":e.set(t+"L",an(i))}},/[^\d]:/,/,/),
i.ontimestampmap&&i.ontimestampmap({MPEGTS:e.get("MPEGTS"),LOCAL:e.get("LOCAL")})}function s(t){t.match(/X-TIMESTAMP-MAP/)?on(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":a(e)}},/=/):on(t,function(t,e){switch(t){case"Region":r(e)}},/:/)}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{var o;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var u=(o=n()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new rn(rn.Errors.BadSignature);i.state="HEADER"}for(var l=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(l?l=!1:o=n(),i.state){case"HEADER":/:/.test(o)?s(o):o||(i.state="ID");continue;case"NOTE":o||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){i.state="NOTE";break}if(!o)continue;if(i.cue=new(i.vttjs.VTTCue||i.window.VTTCue)(0,0,""),i.state="CUE",-1===o.indexOf("--\x3e")){i.cue.id=o;continue}case"CUE":try{un(o,i.cue,i.regionList)}catch(t){i.reportOrThrowError(t),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var c=-1!==o.indexOf("--\x3e");if(!o||c&&(l=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=o;continue;case"BADCUE":o||(i.state="ID");continue}}}catch(t){i.reportOrThrowError(t),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function t(){var e=this;try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new rn(rn.Errors.BadSignature)}catch(t){this.reportOrThrowError(t)}return this.onflush&&this.onflush(),this}};var En=Sn,An="auto",Ln={"":1,lr:1,rl:1},On={start:1,middle:1,end:1,left:1,right:1};function Pn(t){return"string"==typeof t&&(!!Ln[t.toLowerCase()]&&t.toLowerCase());var e}function Un(t){return"string"==typeof t&&(!!On[t.toLowerCase()]&&t.toLowerCase());var e}function In(t,e,i){this.hasBeenReset=!1;var n="",r=!1,a=t,s=e,o=i,u=null,l="",c=!0,h="auto",d="start",p=50,f="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function t(){return n},set:function t(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function t(){return r},set:function t(e){r=!!e}},startTime:{enumerable:!0,get:function t(){return a},set:function t(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function t(){return s},set:function t(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function t(){return o},set:function t(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function t(){return u},set:function t(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function t(){return l},set:function t(e){var i=Pn(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");l=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function t(){return c},set:function t(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function t(){return h},set:function t(e){if("number"!=typeof e&&e!==An)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function t(){return d},set:function t(e){var i=Un(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");d=i,this.hasBeenReset=!0}},position:{enumerable:!0,get:function t(){return p},set:function t(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function t(){return f},set:function t(e){var i=Un(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");f=i,this.hasBeenReset=!0}},size:{enumerable:!0,get:function t(){return m},set:function t(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function t(){return g},set:function t(e){var i=Un(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}}}),this.displayState=void 0}In.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var xn=In,Dn={"":!0,up:!0};function Rn(t){return"string"==typeof t&&(!!Dn[t.toLowerCase()]&&t.toLowerCase());var e}function Mn(t){return"number"==typeof t&&t>=0&&t<=100}function Bn(){var t=100,e=3,i=0,n=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function e(){return t},set:function e(i){if(!Mn(i))throw new Error("Width must be between 0 and 100.");t=i}},lines:{enumerable:!0,get:function t(){return e},set:function t(i){if("number"!=typeof i)throw new TypeError("Lines must be set to a number.");e=i}},regionAnchorY:{enumerable:!0,get:function t(){return n},set:function t(e){if(!Mn(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function t(){return i},set:function t(e){if(!Mn(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function t(){return a},set:function t(e){if(!Mn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function t(){return r},set:function t(e){if(!Mn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function t(){return s},set:function t(e){var i=Rn(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");s=i}}})}var Nn=Bn,jn=ci(function(t){var i=t.exports={WebVTT:En,VTTCue:xn,VTTRegion:Nn};e.vttjs=i,e.WebVTT=i.WebVTT;var n=i.VTTCue,r=i.VTTRegion,a=e.VTTCue,s=e.VTTRegion;i.shim=function(){e.VTTCue=n,e.VTTRegion=r},i.restore=function(){e.VTTCue=a,e.VTTRegion=s},e.VTTCue||i.shim()}),Fn=jn.WebVTT,Vn=jn.VTTCue,Hn=jn.VTTRegion;function qn(t,e,i,n,r){void 0===r&&(r={});var a=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;var s=new en.text.TrackClass(r);return a.addTrack(s),s}var zn=function(i){function r(t,e){var n;return void 0===t&&(t={}),void 0===e&&(e=function t(){}),t.reportTouchActivity=!1,(n=i.call(this,null,t,e)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),en.names.forEach(function(e){var i=en[e];t&&t[i.getterName]&&(n[i.privateName]=t[i.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new en.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}n(r,i);var a=r.prototype;return a.triggerSourceset=function t(e){var i=this;this.isReady_||this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},a.manualProgressOn=function t(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},a.manualProgressOff=function t(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},a.trackProgress=function t(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(At(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},a.onDurationChange=function t(e){this.duration_=this.duration()},a.buffered=function t(){return ve(0,0)},a.bufferedPercent=function t(){return _e(this.buffered(),this.duration_)},a.stopTrackingProgress=function t(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function t(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},a.manualTimeUpdatesOff=function t(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},a.trackCurrentTime=function t(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},a.stopTrackingCurrentTime=function t(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.dispose=function t(){this.clearTracks(Zi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},a.clearTracks=function t(e){var i=this;(e=[].concat(e)).forEach(function(t){for(var e=i[t+"Tracks"]()||[],n=e.length;n--;){var r=e[n];"text"===t&&i.removeRemoteTextTrack(r),e.removeTrack(r)}})},a.cleanupAutoTextTracks=function t(){for(var e=this.autoRemoteTextTracks_||[],i=e.length;i--;){var n=e[i];this.removeRemoteTextTrack(n)}},a.reset=function t(){},a.error=function t(e){return void 0!==e&&(this.error_=new Ee(e),this.trigger("error")),this.error_},a.played=function t(){return this.hasStarted_?ve(0,0):ve()},a.setCurrentTime=function t(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.initTrackListeners=function t(){var e=this;Zi.names.forEach(function(t){var i=Zi[t],n=function i(){e.trigger(t+"trackchange")},r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},a.addWebVttScript_=function i(){var n=this;if(!e.WebVTT)if(t.body.contains(this.el())){if(!this.options_["vtt.js"]&&S(jn)&&Object.keys(jn).length>0)return void this.trigger("vttjsloaded");var r=t.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",r.onload=function(){n.trigger("vttjsloaded")},r.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){r.onload=null,r.onerror=null}),e.WebVTT=!0,this.el().parentNode.appendChild(r)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function t(){var e=this,i=this.textTracks(),n=this.remoteTextTracks(),r=function t(e){return i.addTrack(e.track)},a=function t(e){return i.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",a),this.addWebVttScript_();var s=function t(){return e.trigger("texttrackchange")},o=function t(){s();for(var e=0;e<i.length;e++){var n=i[e];n.removeEventListener("cuechange",s),"showing"===n.mode&&n.addEventListener("cuechange",s)}};o(),i.addEventListener("change",o),i.addEventListener("addtrack",o),i.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",a),i.removeEventListener("change",o),i.removeEventListener("addtrack",o),i.removeEventListener("removetrack",o);for(var t=0;t<i.length;t++){var e;i[t].removeEventListener("cuechange",s)}})},a.addTextTrack=function t(e,i,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return qn(this,e,i,n)},a.createRemoteTextTrack=function t(e){var i=Gt(e,{tech:this});return new tn.remoteTextEl.TrackClass(i)},a.addRemoteTextTrack=function t(e,i){var n=this;void 0===e&&(e={});var r=this.createRemoteTextTrack(e);return!0!==i&&!1!==i&&(d.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==i&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(r.track)}),r},a.removeRemoteTextTrack=function t(e){var i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},a.getVideoPlaybackQuality=function t(){return{}},a.setPoster=function t(){},a.playsinline=function t(){},a.setPlaysinline=function t(){},a.overrideNativeAudioTracks=function t(){},a.overrideNativeVideoTracks=function t(){},a.canPlayType=function t(){return""},r.canPlayType=function t(){return""},r.canPlaySource=function t(e,i){return r.canPlayType(e.type)},r.isTech=function t(e){return e.prototype instanceof r||e instanceof r||e===r},r.registerTech=function t(e,i){if(r.techs_||(r.techs_={}),!r.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!r.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!r.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=zt(e),r.techs_[e]=i,"Tech"!==e&&r.defaultTechOrder_.push(e),i},r.getTech=function t(i){if(i)return i=zt(i),r.techs_&&r.techs_[i]?r.techs_[i]:e&&e.videojs&&e.videojs[i]?(d.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.videojs[i]):void 0},r}(Xt);en.names.forEach(function(t){var e=en[t];zn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),zn.prototype.featuresVolumeControl=!0,zn.prototype.featuresMuteControl=!0,zn.prototype.featuresFullscreenResize=!1,zn.prototype.featuresPlaybackRate=!1,zn.prototype.featuresProgressEvents=!1,zn.prototype.featuresSourceset=!1,zn.prototype.featuresTimeupdateEvents=!1,zn.prototype.featuresNativeTextTracks=!1,zn.withSourceHandlers=function(t){var e;t.registerSourceHandler=function(e,i){var n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,e)},t.canPlayType=function(e){for(var i=t.sourceHandlers||[],n,r=0;r<i.length;r++)if(n=i[r].canPlayType(e))return n;return""},t.selectSourceHandler=function(e,i){for(var n=t.sourceHandlers||[],r,a=0;a<n.length;a++)if(r=n[a].canHandleSource(e,i))return n[a];return null},t.canPlaySource=function(e,i){var n=t.selectSourceHandler(e,i);return n?n.canHandleSource(e,i):""},["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var i=t.selectSourceHandler(e,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:d.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=i.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Xt.registerComponent("Tech",zn),zn.registerTech("Tech",zn),zn.defaultTechOrder_=[];var Wn={},Gn={},Xn={};function Yn(t,e){Wn[t]=Wn[t]||[],Wn[t].push(e)}function $n(t,e,i){t.setTimeout(function(){return or(e,Wn[e.type],i,t)},1)}function Kn(t,e){t.forEach(function(t){return t.setTech&&t.setTech(e)})}function Qn(t,e,i){return t.reduceRight(nr(i),e[i]())}function Jn(t,e,i,n){return e[i](t.reduce(nr(i),n))}function Zn(t,e,i,n){void 0===n&&(n=null);var r="call"+zt(i),a=t.reduce(nr(r),n),s=a===Xn,o=s?null:e[i](a);return rr(t,i,o,s),o}var tr={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},er={setCurrentTime:1},ir={play:1,pause:1};function nr(t){return function(e,i){return e===Xn?Xn:i[t]?i[t](e):e}}function rr(t,e,i,n){for(var r=t.length-1;r>=0;r--){var a=t[r];a[e]&&a[e](n,i)}}function ar(t){Gn[t.id()]=null}function sr(t,e){var i=Gn[t.id()],n=null;if(null==i)return n=e(t),Gn[t.id()]=[[e,n]],n;for(var r=0;r<i.length;r++){var a=i[r],s=a[0],o=a[1];s===e&&(n=o)}return null===n&&(n=e(t),i.push([e,n])),n}function or(t,e,i,n,r,a){void 0===t&&(t={}),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var s=e,o=s[0],u=s.slice(1);if("string"==typeof o)or(t,Wn[o],i,n,r,a);else if(o){var l=sr(n,o);if(!l.setSource)return r.push(l),or(t,u,i,n,r,a);l.setSource(b({},t),function(e,s){if(e)return or(t,u,i,n,r,a);r.push(l),or(s,t.type===s.type?u:Wn[s.type],i,n,r,a)})}else u.length?or(t,u,i,n,r,a):a?i(t,r):or(t,Wn["*"],i,n,r,!0)}var ur={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},lr=function t(e){void 0===e&&(e="");var i=ni(e),n;return ur[i.toLowerCase()]||""},cr=function t(e,i){if(!i)return"";if(e.cache_.source.src===i&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(t){return t.src===i});if(n.length)return n[0].type;for(var r=e.$$("source"),a=0;a<r.length;a++){var s=r[a];if(s.type&&s.src&&s.src===i)return s.type}return lr(i)},hr=function t(e){if(Array.isArray(e)){var i=[];e.forEach(function(e){e=t(e),Array.isArray(e)?i=i.concat(e):T(e)&&i.push(e)}),e=i}else e="string"==typeof e&&e.trim()?[dr({src:e})]:T(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[dr(e)]:[];return e};function dr(t){var e=lr(t.src);return!t.type&&e&&(t.type=e),t}var pr=function(t){function e(e,i,n){var r,a=Gt({createEl:!1},i);if(r=t.call(this,e,a,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)e.src(i.playerOptions.sources);else for(var s=0,o=i.playerOptions.techOrder;s<o.length;s++){var u=zt(o[s]),l=zn.getTech(u);if(u||(l=Xt.getComponent(u)),l&&l.isSupported()){e.loadTech_(u);break}}return r}return n(e,t),e}(Xt);Xt.registerComponent("MediaLoader",pr);var fr=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).emitTapEvents(),n.enable(),n}n(i,e);var r=i.prototype;return r.createEl=function t(i,n,r){void 0===i&&(i="div"),void 0===n&&(n={}),void 0===r&&(r={}),n=b({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===i&&d.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),r=b({role:"button"},r),this.tabIndex_=n.tabIndex;var a=e.prototype.createEl.call(this,i,n,r);return this.createControlTextEl(a),a},r.dispose=function t(){this.controlTextEl_=null,e.prototype.dispose.call(this)},r.createControlTextEl=function t(e){return this.controlTextEl_=I("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},r.controlText=function t(e,i){if(void 0===i&&(i=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,x(this.controlTextEl_,n),this.nonIconControl||i.setAttribute("title",n)},r.buildCSSClass=function t(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},r.enable=function t(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},r.disable=function t(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},r.handleClick=function t(e){},r.handleFocus=function e(i){gt(t,"keydown",At(this,this.handleKeyPress))},r.handleKeyPress=function t(i){32===i.which||13===i.which?(i.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,i)},r.handleBlur=function e(i){yt(t,"keydown",At(this,this.handleKeyPress))},i}(Xt);Xt.registerComponent("ClickableComponent",fr);var mr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update(),e.on("posterchange",At(o(o(n)),n.update)),n}n(e,t);var i=e.prototype;return i.dispose=function e(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},i.createEl=function t(){var e;return I("div",{className:"vjs-poster",tabIndex:-1})},i.update=function t(e){var i=this.player().poster();this.setSrc(i),i?this.show():this.hide()},i.setSrc=function t(e){var i="";e&&(i='url("'+e+'")'),this.el_.style.backgroundImage=i},i.handleClick=function t(e){this.player_.controls()&&(this.player_.paused()?Ue(this.player_.play()):this.player_.pause())},e}(fr);Xt.registerComponent("PosterImage",mr);var gr="#222",yr="#ccc",vr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function _r(t,e){var i;if(4===t.length)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");i=t.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function br(t,e,i){try{t.style[e]=i}catch(t){return}}var Tr=function(t){function i(i,n,r){var a;a=t.call(this,i,n,r)||this;var s=At(o(o(a)),a.updateDisplay);return i.on("loadstart",At(o(o(a)),a.toggleDisplay)),i.on("texttrackchange",s),i.on("loadedmetadata",At(o(o(a)),a.preselectTrack)),i.ready(At(o(o(a)),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",s),i.on("playerresize",s),e.addEventListener("orientationchange",s),i.on("dispose",function(){return e.removeEventListener("orientationchange",s)});for(var t=this.options_.playerOptions.tracks||[],n=0;n<t.length;n++)this.player_.addRemoteTextTrack(t[n],!0);this.preselectTrack()}})),a}n(i,t);var r=i.prototype;return r.preselectTrack=function t(){for(var e={captions:1,subtitles:1},i=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,r,a,s,o=0;o<i.length;o++){var u=i[o];n&&n.enabled&&n.language&&n.language===u.language&&u.kind in e?u.kind===n.kind?s=u:s||(s=u):n&&!n.enabled?(s=null,r=null,a=null):u.default&&("descriptions"!==u.kind||r?u.kind in e&&!a&&(a=u):r=u)}s?s.mode="showing":a?a.mode="showing":r&&(r.mode="showing")},r.toggleDisplay=function t(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function t(){"function"==typeof e.WebVTT&&e.WebVTT.processCues(e,[],this.el_)},r.updateDisplay=function t(){var e=this.player_.textTracks();this.clearDisplay();for(var i=null,n=null,r=e.length;r--;){var a=e[r];"showing"===a.mode&&("descriptions"===a.kind?i=a:n=a)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):i&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))},r.updateForTrack=function t(i){if("function"==typeof e.WebVTT&&i.activeCues){for(var n=[],r=0;r<i.activeCues.length;r++)n.push(i.activeCues[r]);if(e.WebVTT.processCues(e,n,this.el_),this.player_.textTrackSettings)for(var a=this.player_.textTrackSettings.getValues(),s=n.length;s--;){var o=n[s];if(o){var u=o.displayState;if(a.color&&(u.firstChild.style.color=a.color),a.textOpacity&&br(u.firstChild,"color",_r(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(u.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&br(u.firstChild,"backgroundColor",_r(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?br(u,"backgroundColor",_r(a.windowColor,a.windowOpacity)):u.style.backgroundColor=a.windowColor),a.edgeStyle&&("dropshadow"===a.edgeStyle?u.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===a.edgeStyle?u.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===a.edgeStyle?u.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===a.edgeStyle&&(u.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),a.fontPercent&&1!==a.fontPercent){var l=e.parseFloat(u.style.fontSize);u.style.fontSize=l*a.fontPercent+"px",u.style.height="auto",u.style.top="auto",u.style.bottom="2px"}a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=vr[a.fontFamily])}}}},i}(Xt);Xt.registerComponent("TextTrackDisplay",Tr);var Sr=function(t){function e(){return t.apply(this,arguments)||this}var i;return n(e,t),e.prototype.createEl=function e(){var i=this.player_.isAudio(),n=this.localize(i?"Audio Player":"Video Player"),r=I("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),a=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return a.appendChild(r),a},e}(Xt);Xt.registerComponent("LoadingSpinner",Sr);var kr=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.createEl=function t(e,i,n){void 0===i&&(i={}),void 0===n&&(n={}),e="button",i=b({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i),n=b({type:"button"},n);var r=Xt.prototype.createEl.call(this,e,i,n);return this.createControlTextEl(r),r},i.addChild=function t(e,i){void 0===i&&(i={});var n=this.constructor.name;return d.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Xt.prototype.addChild.call(this,e,i)},i.enable=function e(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function e(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyPress=function e(i){32!==i.which&&13!==i.which&&t.prototype.handleKeyPress.call(this,i)},e}(fr);Xt.registerComponent("Button",kr);var wr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function t(){return"vjs-big-play-button"},i.handleClick=function t(e){var i=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)Ue(i);else{var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var a=function t(){return r.focus()};Pe(i)?i.then(a,function(){}):this.setTimeout(a,1)}else this.player_.focus()}},i.handleKeyPress=function e(i){this.mouseused_=!1,t.prototype.handleKeyPress.call(this,i)},i.handleMouseDown=function t(e){this.mouseused_=!0},e}(kr);wr.prototype.controlText_="Play Video",Xt.registerComponent("BigPlayButton",wr);var Cr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},i.handleClick=function t(e){this.trigger({type:"close",bubbles:!1})},e}(kr);Xt.registerComponent("CloseButton",Cr);var Er=function(t){function e(e,i){var n;return void 0===i&&(i={}),n=t.call(this,e,i)||this,i.replay=void 0===i.replay||i.replay,n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),i.replay&&n.on(e,"ended",n.handleEnded),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function t(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleSeeked=function t(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function t(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function t(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function t(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(kr);Er.prototype.controlText_="Play",Xt.registerComponent("PlayToggle",Er);var Ar=function t(e,i){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(i/60%60),o=Math.floor(i/3600);return(isNaN(e)||e===1/0)&&(a=r=n="-"),(a=a>0||o>0?a+":":"")+(r=((a||s>=10)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)},Lr=Ar;function Or(t){Lr=t}function Pr(){Lr=Ar}function Ur(t,e){return void 0===e&&(e=t),Lr(t,e)}var Ir=function(e){function i(t,i){var n;return(n=e.call(this,t,i)||this).throttledUpdateContent=Lt(At(o(o(n)),n.updateContent),25),n.on(t,"timeupdate",n.throttledUpdateContent),n}n(i,e);var r=i.prototype;return r.createEl=function t(i){var n=this.buildCSSClass(),r=e.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"</span>"});return this.contentEl_=I("span",{className:n+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),r.appendChild(this.contentEl_),r},r.dispose=function t(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},r.updateTextNode_=function e(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=t.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},r.formatTime_=function t(e){return Ur(e)},r.updateFormattedTime_=function t(e){var i=this.formatTime_(e);i!==this.formattedTime_&&(this.formattedTime_=i,this.requestAnimationFrame(this.updateTextNode_))},r.updateContent=function t(e){},i}(Xt);Ir.prototype.labelText_="Time",Ir.prototype.controlText_="Time",Xt.registerComponent("TimeDisplay",Ir);var xr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"ended",n.handleEnded),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function t(){return"vjs-current-time"},i.updateContent=function t(e){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(i)},i.handleEnded=function t(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(Ir);xr.prototype.labelText_="Current Time",xr.prototype.controlText_="Current Time",Xt.registerComponent("CurrentTimeDisplay",xr);var Dr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"durationchange",n.updateContent),n.on(e,"loadstart",n.updateContent),n.on(e,"loadedmetadata",n.throttledUpdateContent),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function t(){return"vjs-duration"},i.updateContent=function t(e){var i=this.player_.duration();this.duration_!==i&&(this.duration_=i,this.updateFormattedTime_(i))},e}(Ir);Dr.prototype.labelText_="Duration",Dr.prototype.controlText_="Duration",Xt.registerComponent("DurationDisplay",Dr);var Rr=function(t){function e(){return t.apply(this,arguments)||this}var i;return n(e,t),e.prototype.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},e}(Xt);Xt.registerComponent("TimeDivider",Rr);var Mr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"durationchange",n.throttledUpdateContent),n.on(e,"ended",n.handleEnded),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function t(){
return"vjs-remaining-time"},i.formatTime_=function e(i){return"-"+t.prototype.formatTime_.call(this,i)},i.updateContent=function t(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},i.handleEnded=function t(e){this.player_.duration()&&this.updateFormattedTime_(0)},e}(Ir);Mr.prototype.labelText_="Remaining Time",Mr.prototype.controlText_="Remaining Time",Xt.registerComponent("RemainingTimeDisplay",Mr);var Br=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}n(e,t);var i=e.prototype;return i.createEl=function e(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=I("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),i.appendChild(this.contentEl_),i},i.dispose=function e(){this.contentEl_=null,t.prototype.dispose.call(this)},i.updateShowing=function t(e){this.player().duration()===1/0?this.show():this.hide()},e}(Xt);Xt.registerComponent("LiveDisplay",Br);var Nr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}n(e,t);var i=e.prototype;return i.createEl=function e(){var i=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=I("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},i.updateLiveEdgeStatus=function t(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function t(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function e(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,t.prototype.dispose.call(this)},e}(kr);Nr.prototype.controlText_="Seek to live, currently playing live",Xt.registerComponent("SeekToLive",Nr);var jr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}n(e,t);var i=e.prototype;return i.enabled=function t(){return this.enabled_},i.enable=function t(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function t(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function e(i,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=b({tabIndex:0},n),r=b({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),t.prototype.createEl.call(this,i,n,r)},i.handleMouseDown=function t(e){var i=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||ue||e.preventDefault(),z(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchmove",this.handleMouseMove),this.on(i,"touchend",this.handleMouseUp),this.handleMouseMove(e)},i.handleMouseMove=function t(e){},i.handleMouseUp=function t(){var e=this.bar.el_.ownerDocument;W(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},i.update=function t(){if(this.el_){var e=this.getPercent(),i=this.bar;if(i){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",r=i.el().style;return this.vertical()?r.height=n:r.width=n,e}}},i.calculateDistance=function t(e){var i=Y(this.el_,e);return this.vertical()?i.y:i.x},i.handleFocus=function t(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},i.handleKeyPress=function t(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},i.handleBlur=function t(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},i.handleClick=function t(e){e.stopImmediatePropagation(),e.preventDefault()},i.vertical=function t(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Xt);Xt.registerComponent("Slider",jr);var Fr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).partEls_=[],n.on(e,"progress",n.update),n}n(e,t);var i=e.prototype;return i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},i.dispose=function e(){this.partEls_=null,t.prototype.dispose.call(this)},i.update=function t(e){var i=this.player_.liveTracker,n=this.player_.buffered(),r=i&&i.isLive()?i.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),s=this.partEls_,o=this.$(".vjs-control-text-loaded-percentage"),u=function t(e,i,n){var r=e/i||0;return r=100*(r>=1?1:r),n&&(r=r.toFixed(2)),r+"%"};this.el_.style.width=u(a,r),x(o,u(a,r,!0));for(var l=0;l<n.length;l++){var c=n.start(l),h=n.end(l),d=s[l];d||(d=this.el_.appendChild(I()),s[l]=d),d.style.left=u(c,a),d.style.width=u(h-c,a)}for(var p=s.length;p>n.length;p--)this.el_.removeChild(s[p-1]);s.length=n.length},e}(Xt);Xt.registerComponent("LoadProgressBar",Fr);var Vr=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function t(e,i,n){var r=G(this.el_),a=G(this.player_.el()),s=e.width*i;if(a&&r){var o=e.left-a.left+s,u=e.width-s+(a.right-e.right),l=r.width/2;o<l?l+=l-o:u<l&&(l=u),l<0?l=0:l>r.width&&(l=r.width),this.el_.style.right="-"+l+"px",x(this.el_,n)}},i.updateTime=function t(e,i,n,r){var a=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t,s=a.player_.duration();if(a.player_.liveTracker&&a.player_.liveTracker.isLive()){var o=a.player_.liveTracker.liveWindow(),u=o-i*o;t=(u<1?"":"-")+Ur(u,o)}else t=Ur(n,s);a.update(e,i,t),r&&r()})},e}(Xt);Xt.registerComponent("TimeTooltip",Vr);var Hr=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function t(e,i){var n=this.getChild("timeTooltip");if(n){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,i,r)}},e}(Xt);Hr.prototype.options_={children:[]},te||ne||Hr.prototype.options_.children.push("timeTooltip"),Xt.registerComponent("PlayProgressBar",Hr);var qr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).update=Lt(At(o(o(n)),n.update),25),n}n(e,t);var i=e.prototype;return i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function t(e,i){var n=this,r=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,r,function(){n.el_.style.left=e.width*i+"px"})},e}(Xt);qr.prototype.options_={children:["timeTooltip"]},Xt.registerComponent("MouseTimeDisplay",qr);var zr=5,Wr=30,Gr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).setEventHandlers_(),n}n(e,t);var i=e.prototype;return i.setEventHandlers_=function t(){var e=this;this.update=Lt(At(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(t){e.player_.liveTracker&&e.player_.liveTracker.isLive()&&"ended"!==t.type||e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update_=function t(e,i){var n=this.player_.liveTracker,r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),n&&n.seekableEnd()===1/0?this.disable():this.enable(),this.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ur(e,r),Ur(r,r)],"{1} of {2}")),this.bar.update(G(this.el_),i)},i.update=function e(i){var n=t.prototype.update.call(this);return this.update_(this.getCurrentTime_(),n),n},i.getCurrentTime_=function t(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.handleEnded=function t(e){this.update_(this.player_.duration(),1)},i.getPercent=function t(){var e=this.getCurrentTime_(),i,n=this.player_.liveTracker;return n&&n.isLive()?(i=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i>=1?1:i||0},i.handleMouseDown=function e(i){tt(i)&&(i.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,i))},i.handleMouseMove=function t(e){if(tt(e)){var i,n=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){var a=r.seekableStart(),s=r.liveCurrentTime();if((i=a+n*r.liveWindow())>=s&&(i=s),i<=a&&(i=a+.1),i===1/0)return}else(i=n*this.player_.duration())===this.player_.duration()&&(i-=.1);this.player_.currentTime(i)}},i.enable=function e(){t.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.show()},i.disable=function e(){t.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.hide()},i.handleMouseUp=function e(i){t.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Ue(this.player_.play())},i.stepForward=function t(){this.player_.currentTime(this.player_.currentTime()+5)},i.stepBack=function t(){this.player_.currentTime(this.player_.currentTime()-5)},i.handleAction=function t(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyPress=function e(i){32===i.which||13===i.which?(i.preventDefault(),this.handleAction(i)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,i)},e}(jr);Gr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},te||ne||Gr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Gr.prototype.playerEvent="timeupdate",Xt.registerComponent("SeekBar",Gr);var Xr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).handleMouseMove=Lt(At(o(o(n)),n.handleMouseMove),25),n.throttledHandleMouseSeek=Lt(At(o(o(n)),n.handleMouseSeek),25),n.enable(),n}n(e,t);var i=e.prototype;return i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function t(e){var i=this.getChild("seekBar");if(i){var n=i.getChild("mouseTimeDisplay"),r=i.el(),a=G(r),s=Y(r,e).x;s>1?s=1:s<0&&(s=0),n&&n.update(a,s)}},i.handleMouseSeek=function t(e){var i=this.getChild("seekBar");i&&i.handleMouseMove(e)},i.enabled=function t(){return this.enabled_},i.disable=function t(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},i.enable=function t(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.handleMouseDown=function t(e){var i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},i.handleMouseUp=function t(e){var i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},e}(Xt);Xr.prototype.options_={children:["seekBar"]},Xt.registerComponent("ProgressControl",Xr);var Yr=function(e){function i(i,n){var r;return(r=e.call(this,i,n)||this).on(i,"fullscreenchange",r.handleFullscreenChange),!1===t[be.fullscreenEnabled]&&r.disable(),r}n(i,e);var r=i.prototype;return r.buildCSSClass=function t(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function t(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function t(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},i}(kr);Yr.prototype.controlText_="Fullscreen",Xt.registerComponent("FullscreenToggle",Yr);var $r=function t(e,i){i.tech_&&!i.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Kr=function(t){function e(){return t.apply(this,arguments)||this}var i;return n(e,t),e.prototype.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(Xt);Xt.registerComponent("VolumeLevel",Kr);var Qr=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}n(e,t);var i=e.prototype;return i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function e(i){tt(i)&&t.prototype.handleMouseDown.call(this,i)},i.handleMouseMove=function t(e){tt(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function t(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function t(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function t(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function t(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function t(e){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")},i.volumeAsPercentage_=function t(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function t(){var e=this,i=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(i)})},e}(jr);Qr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Qr.prototype.playerEvent="volumechange",Xt.registerComponent("VolumeBar",Qr);var Jr=function(t){function e(e,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||S(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=t.call(this,e,i)||this,$r(o(o(n)),e),n.throttledHandleMouseMove=Lt(At(o(o(n)),n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}n(e,t);var i=e.prototype;return i.createEl=function e(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},i.handleMouseDown=function t(e){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},i.handleMouseUp=function t(e){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},i.handleMouseMove=function t(e){this.volumeBar.handleMouseMove(e)},e}(Xt);Jr.prototype.options_={children:["volumeBar"]},Xt.registerComponent("VolumeControl",Jr);var Zr=function t(e,i){i.tech_&&!i.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(i,"loadstart",function(){i.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},ta=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,Zr(o(o(n)),e),n.on(e,["loadstart","volumechange"],n.update),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},i.handleClick=function t(e){var i=this.player_.volume(),n=this.player_.lastVolume_();if(0===i){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function t(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function t(){var e=this.player_.volume(),i=3;te&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?i=0:e<.33?i=1:e<.67&&(i=2);for(var n=0;n<4;n++)B(this.el_,"vjs-vol-"+n);M(this.el_,"vjs-vol-"+i)},i.updateControlText_=function t(){var e,i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},e}(kr);ta.prototype.controlText_="Mute",Xt.registerComponent("MuteToggle",ta);var ea=function(t){function e(e,i){var n;return void 0===i&&(i={}),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||S(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=t.call(this,e,i)||this).on(e,["loadstart"],n.volumePanelState_),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}n(e,t);var i=e.prototype;return i.sliderActive_=function t(){this.addClass("vjs-slider-active")},i.sliderInactive_=function t(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function t(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function e(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},e}(Xt);ea.prototype.options_={children:["muteToggle","volumeControl"]},Xt.registerComponent("VolumePanel",ea);var ia=function(e){function i(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}n(i,e);var r=i.prototype;return r.addItem=function t(e){this.addChild(e),e.on("blur",At(this,this.handleBlur)),e.on(["tap","click"],At(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},r.createEl=function t(){var i=this.options_.contentElType||"ul";this.contentEl_=I(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),gt(n,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),n},r.dispose=function t(){this.contentEl_=null,e.prototype.dispose.call(this)},r.handleBlur=function e(i){var n=i.relatedTarget||t.activeElement;if(!this.children().some(function(t){return t.el()===n})){var r=this.menuButton_;r&&r.buttonPressed_&&n!==r.el().firstChild&&r.unpressButton()}},r.handleKeyPress=function t(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},r.stepForward=function t(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.stepBack=function t(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.focus=function t(e){void 0===e&&(e=0);var i=this.children().slice(),n;i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className)&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())},i}(Xt);Xt.registerComponent("Menu",ia);var na=function(e){function i(t,i){var n;void 0===i&&(i={}),(n=e.call(this,t,i)||this).menuButton_=new kr(t,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=kr.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on(n.menuButton_,"mouseenter",function(){n.menu.show()}),n.on("keydown",n.handleSubmenuKeyPress),n}n(i,e);var r=i.prototype;return r.update=function t(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},r.createMenu=function t(){var e=new ia(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var i=I("li",{className:"vjs-menu-title",innerHTML:zt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(i),D(i,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},r.createItems=function t(){},r.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function t(){var i="vjs-menu-button",n;return!0===this.options_.inline?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+kr.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},r.buildCSSClass=function t(){var i="vjs-menu-button";return!0===this.options_.inline?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+e.prototype.buildCSSClass.call(this)},r.controlText=function t(e,i){return void 0===i&&(i=this.menuButton_.el()),this.menuButton_.controlText(e,i)},r.handleClick=function t(e){this.buttonPressed_?this.unpressButton():this.pressButton()},r.focus=function t(){this.menuButton_.focus()},r.blur=function t(){this.menuButton_.blur()},r.handleFocus=function e(){gt(t,"keydown",At(this,this.handleKeyPress))},r.handleBlur=function e(){yt(t,"keydown",At(this,this.handleKeyPress))},r.handleKeyPress=function t(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):13!==e.which&&38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},r.handleSubmenuKeyPress=function t(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},r.pressButton=function t(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),te&&P())return;this.menu.focus()}},r.unpressButton=function t(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function t(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function t(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(Xt);Xt.registerComponent("MenuButton",na);var ra=function(t){function e(e,i){var n,r=i.tracks;if((n=t.call(this,e,i)||this).items.length<=1&&n.hide(),!r)return o(n);var a=At(o(o(n)),n.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),n.player_.on("ready",a),n.player_.on("dispose",function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a)}),n}return n(e,t),e}(na);Xt.registerComponent("TrackButton",ra);var aa=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}n(e,t);var i=e.prototype;return i.createEl=function e(i,n,r){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",b({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),r)},i.handleClick=function t(e){this.selected(!0)},i.selected=function t(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(fr);Xt.registerComponent("MenuItem",aa);var sa=function(i){function r(n,r){var a,s=r.track,u=n.textTracks();r.label=s.label||s.language||"Unknown",r.selected="showing"===s.mode,(a=i.call(this,n,r)||this).track=s;var l=function t(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];a.handleTracksChange.apply(o(o(a)),i)},c=function t(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];a.handleSelectedLanguageChange.apply(o(o(a)),i)},h;(n.on(["loadstart","texttrackchange"],l),u.addEventListener("change",l),u.addEventListener("selectedlanguagechange",c),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],l),u.removeEventListener("change",l),u.removeEventListener("selectedlanguagechange",c)}),void 0===u.onchange)&&a.on(["tap","click"],function(){if("object"!=typeof e.Event)try{h=new e.Event("change")}catch(t){}h||(h=t.createEvent("Event")).initEvent("change",!0,!0),u.dispatchEvent(h)});return a.handleTracksChange(),a}n(r,i);var a=r.prototype;return a.handleClick=function t(e){var n=this.track.kind,r=this.track.kinds,a=this.player_.textTracks();if(r||(r=[n]),i.prototype.handleClick.call(this,e),a)for(var s=0;s<a.length;s++){var o=a[s];o===this.track&&r.indexOf(o.kind)>-1?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},a.handleTracksChange=function t(e){var i="showing"===this.track.mode;i!==this.isSelected_&&this.selected(i)},a.handleSelectedLanguageChange=function t(e){if("showing"===this.track.mode){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},a.dispose=function t(){this.track=null,i.prototype.dispose.call(this)},r}(aa);Xt.registerComponent("TextTrackMenuItem",sa);var oa=function(t){function e(e,i){return i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,e,i)||this}n(e,t);var i=e.prototype;return i.handleTracksChange=function t(e){for(var i=this.player().textTracks(),n=!0,r=0,a=i.length;r<a;r++){var s=i[r];if(this.options_.kinds.indexOf(s.kind)>-1&&"showing"===s.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},i.handleSelectedLanguageChange=function t(e){for(var i=this.player().textTracks(),n=!0,r=0,a=i.length;r<a;r++){var s=i[r];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&"showing"===s.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(sa);Xt.registerComponent("OffTextTrackMenuItem",oa);var ua=function(t){function e(e,i){return void 0===i&&(i={}),i.tracks=e.textTracks(),t.call(this,e,i)||this}var i;return n(e,t),e.prototype.createItems=function t(e,i){var n;void 0===e&&(e=[]),void 0===i&&(i=sa),this.label_&&(n=this.label_+" off"),e.push(new oa(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var a=0;a<r.length;a++){var s=r[a];if(this.kinds_.indexOf(s.kind)>-1){var o=new i(this.player_,{track:s,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+s.kind+"-menu-item"),e.push(o)}}return e},e}(ra);Xt.registerComponent("TextTrackButton",ua);var la=function(t){function e(e,i){var n,r=i.track,a=i.cue,s=e.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=a.text,i.selected=a.startTime<=s&&s<a.endTime,(n=t.call(this,e,i)||this).track=r,n.cue=a,r.addEventListener("cuechange",At(o(o(n)),n.update)),n}n(e,t);var i=e.prototype;return i.handleClick=function e(i){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},i.update=function t(e){var i=this.cue,n=this.player_.currentTime();this.selected(i.startTime<=n&&n<i.endTime)},e}(aa);Xt.registerComponent("ChaptersTrackMenuItem",la);var ca=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},i.update=function e(i){this.track_&&(!i||"addtrack"!==i.type&&"removetrack"!==i.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},i.setTrack=function t(e){if(this.track_!==e){
if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},i.findChaptersTrack=function t(){for(var e=this.player_.textTracks()||[],i=e.length-1;i>=0;i--){var n=e[i];if(n.kind===this.kind_)return n}},i.getMenuCaption=function t(){return this.track_&&this.track_.label?this.track_.label:this.localize(zt(this.kind_))},i.createMenu=function e(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},i.createItems=function t(){var e=[];if(!this.track_)return e;var i=this.track_.cues;if(!i)return e;for(var n=0,r=i.length;n<r;n++){var a=i[n],s=new la(this.player_,{track:this.track_,cue:a});e.push(s)}return e},e}(ua);ca.prototype.kind_="chapters",ca.prototype.controlText_="Chapters",Xt.registerComponent("ChaptersButton",ca);var ha=function(t){function e(e,i,n){var r;r=t.call(this,e,i,n)||this;var a=e.textTracks(),s=At(o(o(r)),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",function(){a.removeEventListener("change",s)}),r}n(e,t);var i=e.prototype;return i.handleTracksChange=function t(e){for(var i=this.player().textTracks(),n=!1,r=0,a=i.length;r<a;r++){var s=i[r];if(s.kind!==this.kind_&&"showing"===s.mode){n=!0;break}}n?this.disable():this.enable()},i.buildCSSClass=function e(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(ua);ha.prototype.kind_="descriptions",ha.prototype.controlText_="Descriptions",Xt.registerComponent("DescriptionsButton",ha);var da=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(ua);da.prototype.kind_="subtitles",da.prototype.controlText_="Subtitles",Xt.registerComponent("SubtitlesButton",da);var pa=function(t){function e(e,i){var n;return i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=t.call(this,e,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}var i;return n(e,t),e.prototype.handleClick=function t(e){this.player().getChild("textTrackSettings").open()},e}(sa);Xt.registerComponent("CaptionSettingsMenuItem",pa);var fa=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function e(){var i=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(i.push(new pa(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,i)},e}(ua);fa.prototype.kind_="captions",fa.prototype.controlText_="Captions",Xt.registerComponent("CaptionsButton",fa);var ma=function(t){function e(){return t.apply(this,arguments)||this}var i;return n(e,t),e.prototype.createEl=function e(i,n,r){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label),s;return"captions"===this.options_.track.kind&&(a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),a+="</span>",t.prototype.createEl.call(this,i,b({innerHTML:a},n),r)},e}(sa);Xt.registerComponent("SubsCapsMenuItem",ma);var ga=function(t){function e(e,i){var n;return void 0===i&&(i={}),(n=t.call(this,e,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(zt(n.label_)),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function e(){var i=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(i.push(new pa(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=t.prototype.createItems.call(this,i,ma)},e}(ua);ga.prototype.kinds_=["captions","subtitles"],ga.prototype.controlText_="Subtitles",Xt.registerComponent("SubsCapsButton",ga);var ya=function(t){function e(e,i){var n,r=i.track,a=e.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(n=t.call(this,e,i)||this).track=r,n.addClass("vjs-"+r.kind+"-menu-item");var s=function t(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];n.handleTracksChange.apply(o(o(n)),i)};return a.addEventListener("change",s),n.on("dispose",function(){a.removeEventListener("change",s)}),n}n(e,t);var i=e.prototype;return i.createEl=function e(i,n,r){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label),s;return"main-desc"===this.options_.track.kind&&(a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),a+="</span>",t.prototype.createEl.call(this,i,b({innerHTML:a},n),r)},i.handleClick=function e(i){var n=this.player_.audioTracks();t.prototype.handleClick.call(this,i);for(var r=0;r<n.length;r++){var a=n[r];a.enabled=a===this.track}},i.handleTracksChange=function t(e){this.selected(this.track.enabled)},e}(aa);Xt.registerComponent("AudioTrackMenuItem",ya);var va=function(t){function e(e,i){return void 0===i&&(i={}),i.tracks=e.audioTracks(),t.call(this,e,i)||this}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},i.createItems=function t(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var i=this.player_.audioTracks(),n=0;n<i.length;n++){var r=i[n];e.push(new ya(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},e}(ra);va.prototype.controlText_="Audio Track",Xt.registerComponent("AudioTrackButton",va);var _a=function(t){function e(e,i){var n,r=i.rate,a=parseFloat(r,10);return i.label=r,i.selected=1===a,i.selectable=!0,i.multiSelectable=!1,(n=t.call(this,e,i)||this).label=r,n.rate=a,n.on(e,"ratechange",n.update),n}n(e,t);var i=e.prototype;return i.handleClick=function e(i){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function t(e){this.selected(this.player().playbackRate()===this.rate)},e}(aa);_a.prototype.contentElType="button",Xt.registerComponent("PlaybackRateMenuItem",_a);var ba=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}n(e,t);var i=e.prototype;return i.createEl=function e(){var i=t.prototype.createEl.call(this);return this.labelEl_=I("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),i.appendChild(this.labelEl_),i},i.dispose=function e(){this.labelEl_=null,t.prototype.dispose.call(this)},i.buildCSSClass=function e(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function e(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},i.createMenu=function t(){var e=new ia(this.player()),i=this.playbackRates();if(i)for(var n=i.length-1;n>=0;n--)e.addChild(new _a(this.player(),{rate:i[n]+"x"}));return e},i.updateARIAAttributes=function t(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function t(e){for(var i=this.player().playbackRate(),n=this.playbackRates(),r=n[0],a=0;a<n.length;a++)if(n[a]>i){r=n[a];break}this.player().playbackRate(r)},i.playbackRates=function t(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},i.playbackRateSupported=function t(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function t(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function t(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(na);ba.prototype.controlText_="Playback Rate",Xt.registerComponent("PlaybackRateMenuButton",ba);var Ta=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(Xt);Xt.registerComponent("Spacer",Ta);var Sa=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function e(){var i=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return i.innerHTML="",i},e}(Ta);Xt.registerComponent("CustomControlSpacer",Sa);var ka=function(t){function e(){return t.apply(this,arguments)||this}var i;return n(e,t),e.prototype.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Xt);ka.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Xt.registerComponent("ControlBar",ka);var wa=function(t){function e(e,i){var n;return(n=t.call(this,e,i)||this).on(e,"error",n.open),n}n(e,t);var i=e.prototype;return i.buildCSSClass=function e(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},i.content=function t(){var e=this.player().error();return e?this.localize(e.message):""},e}(Fe);wa.prototype.options_=Gt(Fe.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Xt.registerComponent("ErrorDisplay",wa);var Ca="vjs-text-track-settings",Ea=["#000","Black"],Aa=["#00F","Blue"],La=["#0FF","Cyan"],Oa=["#0F0","Green"],Pa=["#F0F","Magenta"],Ua=["#F00","Red"],Ia=["#FFF","White"],xa=["#FF0","Yellow"],Da=["1","Opaque"],Ra=["0.5","Semi-Transparent"],Ma=["0","Transparent"],Ba={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ea,Ia,Ua,Oa,Aa,xa,Pa,La]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Da,Ra,Ma]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ia,Ea,Ua,Oa,Aa,xa,Pa,La]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function t(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Da,Ra]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ma,Ra,Da]}};function Na(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}function ja(t,e){var i;return Na(t.options[t.options.selectedIndex].value,e)}function Fa(t,e,i){if(e)for(var n=0;n<t.options.length;n++)if(Na(t.options[n].value,i)===e){t.selectedIndex=n;break}}Ba.windowColor.options=Ba.backgroundColor.options;var Va=function(i){function r(t,e){var n;return e.temporary=!1,(n=i.call(this,t,e)||this).updateDisplay=At(o(o(n)),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=I("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===e.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),v(Ba,function(t){n.on(n.$(t.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}n(r,i);var a=r.prototype;return a.dispose=function t(){this.endDialog=null,i.prototype.dispose.call(this)},a.createElSelect_=function t(e,i,n){var r=this;void 0===i&&(i=""),void 0===n&&(n="label");var a=Ba[e],s=a.id.replace("%s",this.id_),o=[i,s].join(" ").trim();return["<"+n+' id="'+s+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(a.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(a.options.map(function(t){var e=s+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+o+" "+e+'">',r.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},a.createElFgColor_=function t(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},a.createElBgColor_=function t(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},a.createElWinColor_=function t(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},a.createElColors_=function t(){return I("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},a.createElFont_=function t(){return I("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},a.createElControls_=function t(){var e=this.localize("restore all settings to the default values");return I("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},a.content=function t(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},a.label=function t(){return this.localize("Caption Settings Dialog")},a.description=function t(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},a.buildCSSClass=function t(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},a.getValues=function t(){var e=this;return _(Ba,function(t,i,n){var r=ja(e.$(i.selector),i.parser);return void 0!==r&&(t[n]=r),t},{})},a.setValues=function t(e){var i=this;v(Ba,function(t,n){Fa(i.$(t.selector),e[n],t.parser)})},a.setDefaults=function t(){var e=this;v(Ba,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},a.restoreSettings=function t(){var i;try{i=JSON.parse(e.localStorage.getItem(Ca))}catch(t){d.warn(t)}i&&this.setValues(i)},a.saveSettings=function t(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?e.localStorage.setItem(Ca,JSON.stringify(i)):e.localStorage.removeItem(Ca)}catch(t){d.warn(t)}}},a.updateDisplay=function t(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},a.conditionalBlur_=function e(){this.previouslyActiveEl_=null,this.off(t,"keydown",this.handleKeyDown);var i=this.player_.controlBar,n=i&&i.subsCapsButton,r=i&&i.captionsButton;n?n.focus():r&&r.focus()},r}(Fe);Xt.registerComponent("TextTrackSettings",Va);var Ha=function(t){function i(i,n){var r,a=n.ResizeObserver||e.ResizeObserver;null===n.ResizeObserver&&(a=!1);var s=Gt({createEl:!a,reportTouchActivity:!1},n);return(r=t.call(this,i,s)||this).ResizeObserver=n.ResizeObserver||e.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=Ot(function(){r.resizeHandler()},100,!1,o(o(r))),a?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(i.el())):(r.loadListener_=function(){r.el_&&r.el_.contentWindow&&gt(r.el_.contentWindow,"resize",r.debouncedHandler_)},r.one("load",r.loadListener_)),r}n(i,t);var r=i.prototype;return r.createEl=function e(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},r.resizeHandler=function t(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},r.dispose=function t(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&yt(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},i}(Xt);Xt.registerComponent("ResizeManager",Ha);var qa=function(t){function e(e,i){var n,r=Gt({createEl:!1},i);return(n=t.call(this,e,r)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),n}n(e,t);var i=e.prototype;return i.isBehind_=function t(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),i=this.player_.currentTime(),n=this.seekableIncrement_,r;return e!==1/0&&e-(2*n+.07)>=i},i.trackLive_=function t(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var i=this.seekableEnd();i!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(i-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=i,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},i.handleDurationchange=function t(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},i.startTracking=function t(){var e=this;this.isTracking()||(this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.one(this.player_,"play",this.handlePlay),this.timeupdateSeen_||(this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},i.handlePlay=function t(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},i.reset_=function t(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},i.stopTracking=function t(){this.isTracking()&&this.reset_()},i.seekableEnd=function t(){for(var e=this.player_.seekable(),i=[],n=e?e.length:0;n--;)i.push(e.end(n));return i.length?i.sort()[i.length-1]:1/0},i.seekableStart=function t(){for(var e=this.player_.seekable(),i=[],n=e?e.length:0;n--;)i.push(e.start(n));return i.length?i.sort()[0]:0},i.liveWindow=function t(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},i.isLive=function t(){return this.isTracking()},i.atLiveEdge=function t(){return!this.behindLiveEdge()},i.liveCurrentTime=function t(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function t(){return this.pastSeekEnd_},i.behindLiveEdge=function t(){return this.behindLiveEdge_},i.isTracking=function t(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function t(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},i.dispose=function e(){this.stopTracking(),t.prototype.dispose.call(this)},e}(Xt);Xt.registerComponent("LiveTracker",qa);var za=function t(e){var i=e.el();if(i.hasAttribute("src"))return e.triggerSourceset(i.src),!0;var n=e.$$("source"),r=[],a="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var o=n[s].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(a=r[0]),e.triggerSourceset(a),!0)},Wa=Object.defineProperty({},"innerHTML",{get:function t(){return this.cloneNode(!0).innerHTML},set:function i(n){var r=t.createElement(this.nodeName.toLowerCase());r.innerHTML=n;for(var a=t.createDocumentFragment();r.childNodes.length;)a.appendChild(r.childNodes[0]);return this.innerText="",e.Element.prototype.appendChild.call(this,a),this.innerHTML}}),Ga=function t(e,i){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],i))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},Xa=function t(i){return Ga([i.el(),e.HTMLMediaElement.prototype,e.Element.prototype,Wa],"innerHTML")},Ya=function t(e){var i=e.el();if(!i.resetSourceWatch_){var n={},r=Xa(e),a=function t(n){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=n.apply(i,r);return za(e),s}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){i[t]&&(n[t]=i[t],i[t]=a(n[t]))}),Object.defineProperty(i,"innerHTML",Gt(r,{set:a(r.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(n).forEach(function(t){i[t]=n[t]}),Object.defineProperty(i,"innerHTML",r)},e.one("sourceset",i.resetSourceWatch_)}},$a=Object.defineProperty({},"src",{get:function t(){return this.hasAttribute("src")?ii(e.Element.prototype.getAttribute.call(this,"src")):""},set:function t(i){return e.Element.prototype.setAttribute.call(this,"src",i),i}}),Ka=function t(i){return Ga([i.el(),e.HTMLMediaElement.prototype,$a],"src")},Qa=function t(e){if(e.featuresSourceset){var i=e.el();if(!i.resetSourceset_){var n=Ka(e),r=i.setAttribute,a=i.load;Object.defineProperty(i,"src",Gt(n,{set:function t(r){var a=n.set.call(i,r);return e.triggerSourceset(i.src),a}})),i.setAttribute=function(t,n){var a=r.call(i,t,n);return/src/i.test(t)&&e.triggerSourceset(i.src),a},i.load=function(){var t=a.call(i);return za(e)||(e.triggerSourceset(""),Ya(e)),t},i.currentSrc?e.triggerSourceset(i.currentSrc):za(e)||Ya(e),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=a,i.setAttribute=r,Object.defineProperty(i,"src",n),i.resetSourceWatch_&&i.resetSourceWatch_()}}}};function Ja(){var t=u(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Ja=function e(){return t},t}var Za=function(i){function r(t,e){var n;n=i.call(this,t,e)||this;var r=t.source,a=!1;if(r&&(n.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var s=n.el_.childNodes,o=s.length,u=[];o--;){var l=s[o],c;"track"===l.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),a||n.el_.hasAttribute("crossorigin")||!ri(l.src)||(a=!0)):u.push(l))}for(var h=0;h<u.length;h++)n.el_.removeChild(u[h])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&a&&d.warn(m(Ja())),n.restoreMetadataTracksInIOSNativePlayer_(),(pe||Jt||ae)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}n(r,i);var a=r.prototype;return a.dispose=function t(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),r.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},a.setupSourcesetHandling_=function t(){Qa(this)},a.restoreMetadataTracksInIOSNativePlayer_=function t(){var e=this.textTracks(),i,n=function t(){i=[];for(var n=0;n<e.length;n++){var r=e[n];"metadata"===r.kind&&i.push({track:r,storedMode:r.mode})}};n(),e.addEventListener("change",n),this.on("dispose",function(){return e.removeEventListener("change",n)});var r=function t(){for(var n=0;n<i.length;n++){var r=i[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}e.removeEventListener("change",t)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)})},a.overrideNative_=function t(e,i){var n=this;if(i===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach(function(t){var e;n.el()[r+"Tracks"].removeEventListener(t,n[r+"TracksListeners_"][t])}),this["featuresNative"+e+"Tracks"]=!i,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},a.overrideNativeAudioTracks=function t(e){this.overrideNative_("Audio",e)},a.overrideNativeVideoTracks=function t(e){this.overrideNative_("Video",e)},a.proxyNativeTracksForType_=function t(e){var i=this,n=Zi[e],r=this.el()[n.getterName],a=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var s={change:function t(e){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function t(e){a.addTrack(e.track)},removetrack:function t(e){a.removeTrack(e.track)}},o=function t(){for(var e=[],i=0;i<a.length;i++){for(var n=!1,s=0;s<r.length;s++)if(r[s]===a[i]){n=!0;break}n||e.push(a[i])}for(;e.length;)a.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(t){var e=s[t];r.addEventListener(t,e),i.on("dispose",function(i){return r.removeEventListener(t,e)})}),this.on("loadstart",o),this.on("dispose",function(t){return i.off("loadstart",o)})}},a.proxyNativeTracks_=function t(){var e=this;Zi.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},a.createEl=function e(){var i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){var n=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(n,i),r.disposeMediaElement(i),i=n}else{i=t.createElement("video");var a,s=Gt({},this.options_.tag&&F(this.options_.tag));pe&&!0===this.options_.nativeControlsForTouch||delete s.controls,j(i,b(s,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&H(i,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],u=0;u<o.length;u++){var l=o[u],c=this.options_[l];void 0!==c&&(c?H(i,l,l):q(i,l),i[l]=c)}return i},a.handleLateInit_=function t(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var i=!1,n=function t(){i=!0};this.on("loadstart",n);var r=function t(){i||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),i||this.trigger("loadstart")})}var a=["loadstart"];a.push("loadedmetadata"),e.readyState>=2&&a.push("loadeddata"),e.readyState>=3&&a.push("canplay"),e.readyState>=4&&a.push("canplaythrough"),this.ready(function(){a.forEach(function(t){this.trigger(t)},this)})}},a.setCurrentTime=function t(e){try{this.el_.currentTime=e}catch(t){d(t,"Video is not ready. (Video.js)")}},a.duration=function t(){var e=this;if(this.el_.duration===1/0&&ne&&ue&&0===this.el_.currentTime){var i=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",i),NaN}return this.el_.duration||NaN},a.width=function t(){return this.el_.offsetWidth},a.height=function t(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function t(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var i=function t(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function t(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",i),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",i)})}},a.supportsFullScreen=function t(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=e.navigator&&e.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},a.enterFullScreen=function t(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},a.exitFullScreen=function t(){this.el_.webkitExitFullScreen()},a.src=function t(e){if(void 0===e)return this.el_.src;this.setSrc(e)},a.reset=function t(){r.resetMediaElement(this.el_)},a.currentSrc=function t(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function t(e){this.el_.controls=!!e},a.addTextTrack=function t(e,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,r):i.prototype.addTextTrack.call(this,e,n,r)},a.createRemoteTextTrack=function e(n){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,n);var r=t.createElement("track");return n.kind&&(r.kind=n.kind),n.label&&(r.label=n.label),(n.language||n.srclang)&&(r.srclang=n.language||n.srclang),n.default&&(r.default=n.default),n.id&&(r.id=n.id),n.src&&(r.src=n.src),r},a.addRemoteTextTrack=function t(e,n){var r=i.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},a.removeRemoteTextTrack=function t(e){if(i.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)e!==n[r]&&e!==n[r].track||this.el().removeChild(n[r])},
a.getVideoPlaybackQuality=function t(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),e.performance&&"function"==typeof e.performance.now?i.creationTime=e.performance.now():e.performance&&e.performance.timing&&"number"==typeof e.performance.timing.navigationStart&&(i.creationTime=e.Date.now()-e.performance.timing.navigationStart),i},r}(zn);if(L()){Za.TEST_VID=t.createElement("video");var ts=t.createElement("track");ts.kind="captions",ts.srclang="en",ts.label="English",Za.TEST_VID.appendChild(ts)}Za.isSupported=function(){try{Za.TEST_VID.volume=.5}catch(t){return!1}return!(!Za.TEST_VID||!Za.TEST_VID.canPlayType)},Za.canPlayType=function(t){return Za.TEST_VID.canPlayType(t)},Za.canPlaySource=function(t,e){return Za.canPlayType(t.type)},Za.canControlVolume=function(){try{var t=Za.TEST_VID.volume;return Za.TEST_VID.volume=t/2+.1,t!==Za.TEST_VID.volume}catch(t){return!1}},Za.canMuteVolume=function(){try{var t=Za.TEST_VID.muted;return Za.TEST_VID.muted=!t,Za.TEST_VID.muted?H(Za.TEST_VID,"muted","muted"):q(Za.TEST_VID,"muted","muted"),t!==Za.TEST_VID.muted}catch(t){return!1}},Za.canControlPlaybackRate=function(){if(ne&&ue&&le<58)return!1;try{var t=Za.TEST_VID.playbackRate;return Za.TEST_VID.playbackRate=t/2+.1,t!==Za.TEST_VID.playbackRate}catch(t){return!1}},Za.canOverrideAttributes=function(){try{var e=function t(){};Object.defineProperty(t.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return!1}return!0},Za.supportsNativeTextTracks=function(){return de||te&&ue},Za.supportsNativeVideoTracks=function(){return!(!Za.TEST_VID||!Za.TEST_VID.videoTracks)},Za.supportsNativeAudioTracks=function(){return!(!Za.TEST_VID||!Za.TEST_VID.audioTracks)},Za.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Za.prototype.featuresVolumeControl=Za.canControlVolume(),Za.prototype.featuresMuteControl=Za.canMuteVolume(),Za.prototype.featuresPlaybackRate=Za.canControlPlaybackRate(),Za.prototype.featuresSourceset=Za.canOverrideAttributes(),Za.prototype.movingMediaElementInDOM=!te,Za.prototype.featuresFullscreenResize=!0,Za.prototype.featuresProgressEvents=!0,Za.prototype.featuresTimeupdateEvents=!0,Za.prototype.featuresNativeTextTracks=Za.supportsNativeTextTracks(),Za.prototype.featuresNativeVideoTracks=Za.supportsNativeVideoTracks(),Za.prototype.featuresNativeAudioTracks=Za.supportsNativeAudioTracks();var es=Za.TEST_VID&&Za.TEST_VID.constructor.prototype.canPlayType,is=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;function ns(){var t=u(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return ns=function e(){return t},t}Za.patchCanPlayType=function(){re>=4&&!se&&!ue&&(Za.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&is.test(t)?"maybe":es.call(this,t)})},Za.unpatchCanPlayType=function(){var t=Za.TEST_VID.constructor.prototype.canPlayType;return Za.TEST_VID.constructor.prototype.canPlayType=es,t},Za.patchCanPlayType(),Za.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Za.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),i=e.length;i--;)t.removeChild(e[i]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Za.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Za.prototype["set"+zt(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Za.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Za.prototype["set"+zt(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Za.prototype[t]=function(){return this.el_[t]()}}),zn.withSourceHandlers(Za),Za.nativeSourceHandler={},Za.nativeSourceHandler.canPlayType=function(t){try{return Za.TEST_VID.canPlayType(t)}catch(t){return""}},Za.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Za.nativeSourceHandler.canPlayType(t.type);if(t.src){var i=ni(t.src);return Za.nativeSourceHandler.canPlayType("video/"+i)}return""},Za.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)},Za.nativeSourceHandler.dispose=function(){},Za.registerSourceHandler(Za.nativeSourceHandler),zn.registerTech("Html5",Za);var rs=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],as={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ss=["tiny","xsmall","small","medium","large","xlarge","huge"],os={};ss.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;os[t]="vjs-layout-"+e});var us={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ls=function(r){function a(t,e,n){var s;if(t.id=t.id||e.id||"vjs_video_"+at(),(e=b(a.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof t.closest){var u=t.closest("[lang]");u&&u.getAttribute&&(e.language=u.getAttribute("lang"))}else for(var l=t;l&&1===l.nodeType;){if(F(l).hasOwnProperty("lang")){e.language=l.getAttribute("lang");break}l=l.parentNode}if((s=r.call(this,null,e,n)||this).log=p(s.id_),s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=t,s.tagAttributes=t&&F(t),s.language(s.options_.language),e.languages){var c={};Object.getOwnPropertyNames(e.languages).forEach(function(t){c[t.toLowerCase()]=e.languages[t]}),s.languages_=c}else s.languages_=a.prototype.options_.languages;s.cache_={},s.poster_=e.poster||"",s.controls_=!!e.controls,s.cache_.lastVolume=1,t.controls=!1,t.removeAttribute("controls"),t.hasAttribute("autoplay")?s.options_.autoplay=!0:s.autoplay(s.options_.autoplay),s.scrubbing_=!1,s.el_=s.createEl(),s.cache_.lastPlaybackRate=s.defaultPlaybackRate(),Vt(o(o(s)),{eventBusKey:"el_"}),s.fluid_&&s.on("playerreset",s.updateStyleEl_);var h=Gt(s.options_);if(e.plugins){var d=e.plugins;Object.keys(d).forEach(function(t){if("function"!=typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](d[t])},o(o(s)))}s.options_.playerOptions=h,s.middleware_=[],s.initChildren(),s.isAudio("audio"===t.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),te||s.addClass("vjs-workinghover"),a.players[s.id_]=o(o(s));var f=i.split(".")[0];return s.addClass("vjs-v"+f),s.userActive(!0),s.reportUserActivity(),s.one("play",s.listenForUserActivity_),s.on("fullscreenchange",s.handleFullscreenChange_),s.on("stageclick",s.handleStageClick_),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.changingSrc_=!1,s.playWaitingForReady_=!1,s.playOnLoadstart_=null,s}n(a,r);var s=a.prototype;return s.dispose=function t(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),a.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),ar(this),r.prototype.dispose.call(this)},s.createEl=function i(){var n=this.tag,a,s=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();s?a=this.el_=n.parentNode:o||(a=this.el_=r.prototype.createEl.call(this,"div"));var u=F(n);if(o){for(a=this.el_=n,n=this.tag=t.createElement("video");a.children.length;)n.appendChild(a.firstChild);R(a,"video-js")||M(a,"video-js"),a.appendChild(n),s=this.playerElIngest_=a,Object.keys(a).forEach(function(t){n[t]=a[t]})}if(n.setAttribute("tabindex","-1"),u.tabindex="-1",ce&&(n.setAttribute("role","application"),u.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in u&&delete u.width,"height"in u&&delete u.height,Object.getOwnPropertyNames(u).forEach(function(t){o&&"class"===t||a.setAttribute(t,u[t]),o&&n.setAttribute(t,u[t])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=a.player=this,this.addClass("vjs-paused"),!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ct("vjs-styles-dimensions");var l=et(".vjs-styles-defaults"),c=et("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var h=n.getElementsByTagName("a"),d=0;d<h.length;d++){var p=h.item(d);M(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!s&&n.parentNode.insertBefore(a,n),D(n,a),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=a,a},s.width=function t(e){return this.dimension("width",e)},s.height=function t(e){return this.dimension("height",e)},s.dimension=function t(e,i){var n=e+"_";if(void 0===i)return this[n]||0;if(""===i)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(i);isNaN(r)?d.error('Improper value "'+i+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},s.fluid=function t(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,It(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),xt(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},s.fill=function t(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},s.aspectRatio=function t(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},s.updateStyleEl_=function t(){if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){var i,n,r,a,s=(r=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),o=s[1]/s[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,n=void 0!==this.height_?this.height_:i*o,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),Et(this.styleEl_,"\n      ."+a+" {\n        width: "+i+"px;\n        height: "+n+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*o+"%;\n      }\n    ")}else{var u="number"==typeof this.width_?this.width_:this.options_.width,l="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(u>=0&&(c.width=u),l>=0&&(c.height=l))}},s.loadTech_=function t(e,i){var n=this;this.tech_&&this.unloadTech_();var r=zt(e),a=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(zn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var s,o={source:i,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};en.names.forEach(function(t){var e=en[t];o[e.getterName]=n[e.privateName]}),b(o,this.options_[r]),b(o,this.options_[a]),b(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var u=zn.getTech(e);if(!u)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new u(o),this.tech_.ready(At(this,this.handleTechReady_),!0),Me(this.textTracksJson_||[],this.tech_),rs.forEach(function(t){n.on(n.tech_,t,n["handleTech"+zt(t)+"_"])}),Object.keys(as).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+as[t]+"_"].bind(n),event:e}):n["handleTech"+as[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||D(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},s.unloadTech_=function t(){var e=this;en.names.forEach(function(t){var i=en[t];e[i.privateName]=e[i.getterName]()}),this.textTracksJson_=Re(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},s.tech=function t(e){return void 0===e&&d.warn(m(ns())),this.tech_},s.addTechControlsListeners_=function t(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},s.removeTechControlsListeners_=function t(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},s.handleTechReady_=function t(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},s.handleTechLoadStart_=function t(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},s.manualAutoplay_=function t(e){var i=this;if(this.tech_&&"string"==typeof e){var n=function t(){var e=i.muted();i.muted(!0);var n=i.play();if(n&&n.then&&n.catch)return n.catch(function(t){i.muted(e)})},r;if("any"===e?(r=this.play())&&r.then&&r.catch&&r.catch(function(){return n()}):r="muted"===e?n():this.play(),r&&r.then&&r.catch)return r.then(function(){i.trigger({type:"autoplay-success",autoplay:e})}).catch(function(t){i.trigger({type:"autoplay-failure",autoplay:e})})}},s.updateSourceCaches_=function t(e){void 0===e&&(e="");var i=e,n="";"string"!=typeof i&&(i=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!n&&(n=cr(this,i)),this.cache_.source=Gt({},e,{src:i,type:n});for(var r=this.cache_.sources.filter(function(t){return t.src&&t.src===i}),a=[],s=this.$$("source"),o=[],u=0;u<s.length;u++){var l=F(s[u]);a.push(l),l.src&&l.src===i&&o.push(l.src)}o.length&&!r.length?this.cache_.sources=a:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i},s.handleTechSourceset_=function t(e){var i=this;if(!this.changingSrc_){var n=function t(e){return i.updateSourceCaches_(e)},r=this.currentSource().src,a=e.src;if(r&&!/^blob:/.test(r)&&/^blob:/.test(a)&&(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==r)&&(n=function t(){}),n(a),!e.src){var s=function t(e){if("sourceset"!==e.type){var n=i.techGet("currentSrc");i.lastSource_.tech=n,i.updateSourceCaches_(n)}i.tech_.off(["sourceset","loadstart"],t)};this.tech_.one(["sourceset","loadstart"],s)}}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},s.hasStarted=function t(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},s.handleTechPlay_=function t(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},s.handleTechRateChange_=function t(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},s.handleTechWaiting_=function t(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var i=this.currentTime(),n=function t(){i!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",t))};this.on("timeupdate",n)},s.handleTechCanPlay_=function t(){this.removeClass("vjs-waiting"),this.trigger("canplay")},s.handleTechCanPlayThrough_=function t(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},s.handleTechPlaying_=function t(){this.removeClass("vjs-waiting"),this.trigger("playing")},s.handleTechSeeking_=function t(){this.addClass("vjs-seeking"),this.trigger("seeking")},s.handleTechSeeked_=function t(){this.removeClass("vjs-seeking"),this.trigger("seeked")},s.handleTechFirstPlay_=function t(){this.options_.starttime&&(d.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},s.handleTechPause_=function t(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},s.handleTechEnded_=function t(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},s.handleTechDurationChange_=function t(){this.duration(this.techGet_("duration"))},s.handleTechClick_=function t(e){tt(e)&&this.controls_&&(this.paused()?Ue(this.play()):this.pause())},s.handleTechDoubleClick_=function t(e){var i;this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},s.handleTechTap_=function t(){this.userActive(!this.userActive())},s.handleTechTouchStart_=function t(){this.userWasActive=this.userActive()},s.handleTechTouchMove_=function t(){this.userWasActive&&this.reportUserActivity()},s.handleTechTouchEnd_=function t(e){e.preventDefault()},s.handleFullscreenChange_=function t(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},s.handleStageClick_=function t(){this.reportUserActivity()},s.handleTechFullscreenChange_=function t(e,i){i&&this.isFullscreen(i.isFullscreen),this.trigger("fullscreenchange")},s.handleTechError_=function t(){var e=this.tech_.error();this.error(e)},s.handleTechTextData_=function t(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},s.getCache=function t(){return this.cache_},s.techCall_=function t(e,i){this.ready(function(){if(e in er)return Jn(this.middleware_,this.tech_,e,i);if(e in ir)return Zn(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(t){throw d(t),t}},!0)},s.techGet_=function t(e){if(this.tech_&&this.tech_.isReady_){if(e in tr)return Qn(this.middleware_,this.tech_,e);if(e in ir)return Zn(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw d("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw d("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw d(t),t}}},s.play=function t(){var i=this,n=this.options_.Promise||e.Promise;return n?new n(function(t){i.play_(t)}):this.play_()},s.play_=function t(e){var i=this;if(void 0===e&&(e=Ue),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void e(this.techGet_("play"));this.playOnLoadstart_=function(){i.playOnLoadstart_=null,e(i.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){i.playWaitingForReady_=!1,e(i.play())})}},s.pause=function t(){this.techCall_("pause")},s.paused=function t(){return!1!==this.techGet_("paused")},s.played=function t(){return this.techGet_("played")||ve(0,0)},s.scrubbing=function t(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},s.currentTime=function t(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},s.duration=function t(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},s.remainingTime=function t(){return this.duration()-this.currentTime()},s.remainingTimeDisplay=function t(){return Math.floor(this.duration())-Math.floor(this.currentTime())},s.buffered=function t(){var t=this.techGet_("buffered");return t&&t.length||(t=ve(0,0)),t},s.bufferedPercent=function t(){return _e(this.buffered(),this.duration())},s.bufferedEnd=function t(){var e=this.buffered(),i=this.duration(),n=e.end(e.length-1);return n>i&&(n=i),n},s.volume=function t(e){var i;return void 0!==e?(i=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=i,this.techCall_("setVolume",i),void(i>0&&this.lastVolume_(i))):(i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i)},s.muted=function t(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},s.defaultMuted=function t(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},s.lastVolume_=function t(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},s.supportsFullScreen=function t(){return this.techGet_("supportsFullScreen")||!1},s.isFullscreen=function t(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},s.requestFullscreen=function e(){var i=be;this.isFullscreen(!0),i.requestFullscreen?(gt(t,i.fullscreenchange,At(this,function e(n){this.isFullscreen(t[i.fullscreenElement]),!1===this.isFullscreen()&&yt(t,i.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[i.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},s.exitFullscreen=function e(){var i=be;this.isFullscreen(!1),i.requestFullscreen?t[i.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},s.enterFullWindow=function e(){this.isFullWindow=!0,this.docOrigOverflow=t.documentElement.style.overflow,gt(t,"keydown",At(this,this.fullWindowOnEscKey)),t.documentElement.style.overflow="hidden",M(t.body,"vjs-full-window"),this.trigger("enterFullWindow")},s.fullWindowOnEscKey=function t(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},s.exitFullWindow=function e(){this.isFullWindow=!1,yt(t,"keydown",this.fullWindowOnEscKey),t.documentElement.style.overflow=this.docOrigOverflow,B(t.body,"vjs-full-window"),this.trigger("exitFullWindow")},s.canPlayType=function t(e){for(var i,n=0,r=this.options_.techOrder;n<r.length;n++){var a=r[n],s=zn.getTech(a);if(s||(s=Xt.getComponent(a)),s){if(s.isSupported()&&(i=s.canPlayType(e)))return i}else d.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.')}return""},s.selectSource=function t(e){var i=this,n=this.options_.techOrder.map(function(t){return[t,zn.getTech(t)]}).filter(function(t){var e=t[0],i=t[1];return i?i.isSupported():(d.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function t(e,i,n){var r;return e.some(function(t){return i.some(function(e){if(r=n(t,e))return!0})}),r},a,s=function t(e){return function(t,i){return e(i,t)}},o=function t(e,n){var r=e[0],a;if(e[1].canPlaySource(n,i.options_[r.toLowerCase()]))return{source:n,tech:r}};return(a=this.options_.sourceOrder?r(e,n,s(o)):r(n,e,o))||!1},s.src=function t(e){var i=this;if(void 0===e)return this.cache_.src||"";var n=hr(e);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),$n(this,n[0],function(t,e){var r;if(i.middleware_=e,i.cache_.sources=n,i.updateSourceCaches_(t),i.src_(t))return n.length>1?i.src(n.slice(1)):(i.changingSrc_=!1,i.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void i.triggerReady());Kn(e,i.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},s.src_=function t(e){var i=this,n=this.selectSource([e]);return!n||(Wt(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){i.changingSrc_=!1}),!1))},s.load=function t(){this.techCall_("load")},s.reset=function t(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),It(this)&&this.trigger("playerreset")},s.currentSources=function t(){var e=this.currentSource(),i=[];return 0!==Object.keys(e).length&&i.push(e),this.cache_.sources||i},s.currentSource=function t(){return this.cache_.source||{}},s.currentSrc=function t(){return this.currentSource()&&this.currentSource().src||""},s.currentType=function t(){return this.currentSource()&&this.currentSource().type||""},s.preload=function t(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},s.autoplay=function t(e){if(void 0===e)return this.options_.autoplay||!1;var i;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),i=!1):this.options_.autoplay=!!e,i=i||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",i)},s.playsinline=function t(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},s.loop=function t(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},s.poster=function t(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},s.handleTechPosterChange_=function t(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},s.controls=function t(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},s.usingNativeControls=function t(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},s.error=function t(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Ee(e),this.addClass("vjs-error"),d.error("(CODE:"+this.error_.code+" "+Ee.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},s.reportUserActivity=function t(e){this.userActivity_=!0},s.userActive=function t(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},s.listenForUserActivity_=function t(){var e,i,n,r=At(this,this.reportUserActivity),a=function t(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,r())},s=function t(){r(),this.clearInterval(e),e=this.setInterval(r,250)},o=function t(i){r(),this.clearInterval(e)},u;this.on("mousedown",s),this.on("mousemove",a),this.on("mouseup",o),
this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);var t=this.options_.inactivityTimeout;t<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},s.playbackRate=function t(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},s.defaultPlaybackRate=function t(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},s.isAudio=function t(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},s.addTextTrack=function t(e,i,n){if(this.tech_)return this.tech_.addTextTrack(e,i,n)},s.addRemoteTextTrack=function t(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)},s.removeRemoteTextTrack=function t(e){void 0===e&&(e={});var i,n=e.track;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)},s.getVideoPlaybackQuality=function t(){return this.techGet_("getVideoPlaybackQuality")},s.videoWidth=function t(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},s.videoHeight=function t(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},s.language=function t(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},s.languages=function t(){return Gt(a.prototype.options_.languages,this.languages_)},s.toJSON=function t(){var e=Gt(this.options_),i=e.tracks;e.tracks=[];for(var n=0;n<i.length;n++){var r=i[n];(r=Gt(r)).player=void 0,e.tracks[n]=r}return e},s.createModal=function t(e,i){var n=this;(i=i||{}).content=e||"";var r=new Fe(this,i);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},s.updateCurrentBreakpoint_=function t(){if(this.responsive())for(var e=this.currentBreakpoint(),i=this.currentWidth(),n=0;n<ss.length;n++){var r=ss[n],a;if(i<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(os[e]),this.addClass(os[r]),this.breakpoint_=r;break}}},s.removeCurrentBreakpoint_=function t(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},s.breakpoints=function t(e){return void 0===e?b(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=b({},us,e),this.updateCurrentBreakpoint_(),b(this.breakpoints_))},s.responsive=function t(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0;var i},s.currentBreakpoint=function t(){return this.breakpoint_},s.currentBreakpointClass=function t(){return os[this.breakpoint_]||""},a.getTagSettings=function t(e){var i={sources:[],tracks:[]},n=F(e),r=n["data-setup"];if(R(e,"vjs-fill")&&(n.fill=!0),R(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var a=Le(r||"{}"),s=a[0],o=a[1];s&&d.error(s),b(n,o)}if(b(i,n),e.hasChildNodes())for(var u=e.childNodes,l=0,c=u.length;l<c;l++){var h=u[l],p=h.nodeName.toLowerCase();"source"===p?i.sources.push(F(h)):"track"===p&&i.tracks.push(F(h))}return i},s.flexNotSupported_=function e(){var i=t.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},a}(Xt);en.names.forEach(function(t){var e=en[t];ls.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),ls.players={};var cs=e.navigator;ls.prototype.options_={techOrder:zn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:cs&&(cs.languages&&cs.languages[0]||cs.userLanguage||cs.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){ls.prototype[t]=function(){return this.techGet_(t)}}),rs.forEach(function(t){ls.prototype["handleTech"+zt(t)+"_"]=function(){return this.trigger(t)}}),Xt.registerComponent("Player",ls);var hs="plugin",ds="activePlugins_",ps={},fs=function t(e){return ps.hasOwnProperty(e)},ms=function t(e){return fs(e)?ps[e]:void 0},gs=function t(e,i){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[i]=!0},ys=function t(e,i,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,i),e.trigger(r+":"+i.name,i)},vs=function t(e,i){var n=function t(){ys(this,{name:e,plugin:i,instance:null},!0);var n=i.apply(this,arguments);return gs(this,e),ys(this,{name:e,plugin:i,instance:n}),n};return Object.keys(i).forEach(function(t){n[t]=i[t]}),n},_s=function t(e,i){return i.prototype.name=e,function(){ys(this,{name:e,plugin:i,instance:null},!0);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=s(i,[this].concat(n));return this[e]=function(){return a},ys(this,a.getEventHash()),a}},bs=function(){function t(e){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,Vt(this),delete this.trigger,qt(this,this.constructor.defaultState),gs(e,this.name),this.dispose=At(this,this.dispose),e.on("dispose",this.dispose)}var e=t.prototype;return e.version=function t(){return this.constructor.VERSION},e.getEventHash=function t(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.trigger=function t(e,i){return void 0===i&&(i={}),vt(this.eventBusEl_,e,this.getEventHash(i))},e.handleStateChanged=function t(e){},e.dispose=function t(){var e=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i.activePlugins_[e]=!1,this.player=this.state=null,i[e]=_s(e,ps[e])},t.isBasic=function e(i){var n="string"==typeof i?ms(i):i;return"function"==typeof n&&!t.prototype.isPrototypeOf(n.prototype)},t.registerPlugin=function e(i,n){if("string"!=typeof i)throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(fs(i))d.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(ls.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof n+".");return ps[i]=n,"plugin"!==i&&(t.isBasic(n)?ls.prototype[i]=vs(i,n):ls.prototype[i]=_s(i,n)),n},t.deregisterPlugin=function t(e){if("plugin"===e)throw new Error("Cannot de-register base plugin.");fs(e)&&(delete ps[e],delete ls.prototype[e])},t.getPlugins=function t(e){var i;return void 0===e&&(e=Object.keys(ps)),e.forEach(function(t){var e=ms(t);e&&((i=i||{})[t]=e)}),i},t.getPluginVersion=function t(e){var i=ms(e);return i&&i.VERSION||""},t}();bs.getPlugin=ms,bs.BASE_PLUGIN_NAME="plugin",bs.registerPlugin("plugin",bs),ls.prototype.usingPlugin=function(t){return!!this.activePlugins_&&!0===this.activePlugins_[t]},ls.prototype.hasPlugin=function(t){return!!fs(t)};var Ts=function t(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(e.super_=i)},Ss=function t(e,i){void 0===i&&(i={});var n=function t(){e.apply(this,arguments)},r={};for(var a in"object"==typeof i?(i.constructor!==Object.prototype.constructor&&(n=i.constructor),r=i):"function"==typeof i&&(n=i),Ts(n,e),r)r.hasOwnProperty(a)&&(n.prototype[a]=r[a]);return n},ks=function t(e){return 0===e.indexOf("#")?e.slice(1):e};function ws(e,i,n){var r=ws.getPlayer(e);if(r)return i&&d.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var a="string"==typeof e?et("#"+ks(e)):e;if(!O(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");t.body.contains(a)||d.warn("The element supplied is not included in the DOM"),i=i||{},ws.hooks("beforesetup").forEach(function(t){var e=t(a,Gt(i));T(e)&&!Array.isArray(e)?i=Gt(i,e):d.error("please return an object in beforesetup hooks")});var s=Xt.getComponent("Player");return r=new s(a,i,n),ws.hooks("setup").forEach(function(t){return t(r)}),r}if(ws.hooks_={},ws.hooks=function(t,e){return ws.hooks_[t]=ws.hooks_[t]||[],e&&(ws.hooks_[t]=ws.hooks_[t].concat(e)),ws.hooks_[t]},ws.hook=function(t,e){ws.hooks(t,e)},ws.hookOnce=function(t,e){ws.hooks(t,[].concat(e).map(function(e){var i;return function i(){return ws.removeHook(t,i),e.apply(void 0,arguments)}}))},ws.removeHook=function(t,e){var i=ws.hooks(t).indexOf(e);return!(i<=-1)&&(ws.hooks_[t]=ws.hooks_[t].slice(),ws.hooks_[t].splice(i,1),!0)},!0!==e.VIDEOJS_NO_DYNAMIC_STYLE&&L()){var Cs=et(".vjs-styles-defaults");if(!Cs){Cs=Ct("vjs-styles-defaults");var Es=et("head");Es&&Es.insertBefore(Cs,Es.firstChild),Et(Cs,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}wt(1,ws),ws.VERSION=i,ws.options=ls.prototype.options_,ws.getPlayers=function(){return ls.players},ws.getPlayer=function(t){var e=ls.players,i;if("string"==typeof t){var n=ks(t),r=e[n];if(r)return r;i=et("#"+n)}else i=t;if(O(i)){var a=i,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}},ws.getAllPlayers=function(){return Object.keys(ls.players).map(function(t){return ls.players[t]}).filter(Boolean)},ws.players=ls.players,ws.getComponent=Xt.getComponent,ws.registerComponent=function(t,e){zn.isTech(e)&&d.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Xt.registerComponent.call(Xt,t,e)},ws.getTech=zn.getTech,ws.registerTech=zn.registerTech,ws.use=Yn,Object.defineProperty(ws,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ws.middleware,"TERMINATOR",{value:Xn,writeable:!1,enumerable:!0}),ws.browser=fe,ws.TOUCH_ENABLED=pe,ws.extend=Ss,ws.mergeOptions=Gt,ws.bind=At,ws.registerPlugin=bs.registerPlugin,ws.deregisterPlugin=bs.deregisterPlugin,ws.plugin=function(t,e){return d.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),bs.registerPlugin(t,e)},ws.getPlugins=bs.getPlugins,ws.getPlugin=bs.getPlugin,ws.getPluginVersion=bs.getPluginVersion,ws.addLanguage=function(t,e){var i;return t=(""+t).toLowerCase(),ws.options.languages=Gt(ws.options.languages,((i={})[t]=e,i)),ws.options.languages[t]},ws.log=d,ws.createLogger=p,ws.createTimeRange=ws.createTimeRanges=ve,ws.formatTime=Ur,ws.setFormatTime=Or,ws.resetFormatTime=Pr,ws.parseUrl=ei,ws.isCrossOrigin=ri,ws.EventTarget=Pt,ws.on=gt,ws.one=_t,ws.off=yt,ws.trigger=vt,ws.xhr=Ri,ws.TextTrack=Wi,ws.AudioTrack=Gi,ws.VideoTrack=Xi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){ws[t]=function(){return d.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),nt[t].apply(null,arguments)}}),ws.computedStyle=k,ws.dom=nt,ws.url=ai;var As=ci(function(t,e){var i,n,r,a,s,o;i=li,n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function t(e,i,n){if(n=n||{},e=e.trim(),!(i=i.trim())){if(!n.alwaysNormalize)return e;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var s=o.parseURL(i);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):i;var u=o.parseURL(e);if(!u)throw new Error("Error trying to parse base URL.");if(!u.netLoc&&u.path&&"/"!==u.path[0]){var l=r.exec(u.path);u.netLoc=l[1],u.path=l[2]}u.netLoc&&!u.path&&(u.path="/");var c={scheme:u.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=u.netLoc,"/"!==s.path[0]))if(s.path){var h=u.path,d=h.substring(0,h.lastIndexOf("/")+1)+s.path;c.path=o.normalizePath(d)}else c.path=u.path,s.params||(c.params=u.params,s.query||(c.query=u.query));return null===c.path&&(c.path=n.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(c)},parseURL:function t(e){var i=n.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function t(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function t(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},t.exports=o}),Ls=function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},Os=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Ps=function t(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)},Us=function t(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?e:i},Is=function(){function t(){Ls(this,t),this.listeners={}}return t.prototype.on=function t(e,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i)},t.prototype.off=function t(e,i){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(i);return this.listeners[e].splice(n,1),n>-1},t.prototype.trigger=function t(e){var i=this.listeners[e],n=void 0,r=void 0,a=void 0;if(i)if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else for(a=Array.prototype.slice.call(arguments,1),r=i.length,n=0;n<r;++n)i[n].apply(this,a)},t.prototype.dispose=function t(){this.listeners={}},t.prototype.pipe=function t(e){this.on("data",function(t){e.push(t)})},t}(),xs=function(t){function e(){Ls(this,e);var i=Us(this,t.call(this));return i.buffer="",i}return Ps(e,t),e.prototype.push=function t(e){var i=void 0;for(this.buffer+=e,i=this.buffer.indexOf("\n");i>-1;i=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)},e}(Is),Ds=function t(){var e="[^=]*",i,n;return new RegExp("(?:^|,)("+("(?:[^=]*)=(?:"+'"[^"]*"|[^,]*'+")")+")")},Rs=function t(e){for(var i=e.split(Ds()),n={},r=i.length,a=void 0;r--;)""!==i[r]&&((a=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),n[a[0]]=a[1]);return n},Ms=function(t){function e(){Ls(this,e);var i=Us(this,t.call(this));return i.customParsers=[],i}return Ps(e,t),e.prototype.push=function t(e){var i=void 0,n=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var r=0;r<this.customParsers.length;r++)if(this.customParsers[r].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),i=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},i[1]&&(n.duration=parseFloat(i[1])),i[2]&&(n.title=i[2]),void this.trigger("data",n);if(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},i[1]&&(n.duration=parseInt(i[1],10)),void this.trigger("data",n);if(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},i[1]&&(n.duration=parseInt(i[1],10)),void this.trigger("data",n);if(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},i[1]&&(n.version=parseInt(i[1],10)),void this.trigger("data",n);if(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},i[1]&&(n.number=parseInt(i[1],10)),void this.trigger("data",n);if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(n.number=parseInt(i[1],10)),void this.trigger("data",n);if(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},i[1]&&(n.playlistType=i[1]),void this.trigger("data",n);if(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},i[1]&&(n.length=parseInt(i[1],10)),i[2]&&(n.offset=parseInt(i[2],10)),void this.trigger("data",n);if(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},i[1]&&(n.allowed=!/NO/.test(i[1])),void this.trigger("data",n);if(i=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},i[1]){var a=Rs(i[1]);if(a.URI&&(n.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],u=s[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),u&&(n.byterange.offset=parseInt(u,10))}}this.trigger("data",n)}else if(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},i[1]){if(n.attributes=Rs(i[1]),n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),n.attributes.RESOLUTION=c}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(i=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},i[1]&&(n.attributes=Rs(i[1])),void this.trigger("data",n);if(i=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(i=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(i=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},i[1]&&(n.dateTimeString=i[1],n.dateTimeObject=new Date(i[1])),void this.trigger("data",n);if(i=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},i[1]&&(n.attributes=Rs(i[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(i=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},i[1]&&(n.attributes=Rs(i[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(i=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},i[1]?n.data=i[1]:n.data="",void this.trigger("data",n);if(i=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},i[1]?n.data=i[1]:n.data="",void this.trigger("data",n);if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},i[1]?n.data=i[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},e.prototype.addParser=function t(e){var i=this,n=e.expression,r=e.customType,a=e.dataParser,s=e.segment;"function"!=typeof a&&(a=function t(e){return e}),this.customParsers.push(function(t){var e;if(n.exec(t))return i.trigger("data",{type:"custom",data:a(t),customType:r,segment:s}),!0})},e}(Is),Bs=function(t){function e(){Ls(this,e);var i=Us(this,t.call(this));i.lineStream=new xs,i.parseStream=new Ms,i.lineStream.pipe(i.parseStream);var n=i,r=[],a={},s=void 0,o=void 0,u=function t(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},i.parseStream.on("data",function(t){var e=void 0,i=void 0;({tag:function h(){({"allow-cache":function e(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function e(){var e={};"length"in t&&(a.byterange=e,e.length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(a.byterange=e,e.offset=t.offset)},endlist:function t(){this.manifest.endList=!0},inf:function e(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key:function e(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(o.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):o=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function e(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function e(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function e(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function e(){s={},t.uri&&(s.uri=t.uri),t.byterange&&(s.byterange=t.byterange)},"stream-inf":function e(){this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes?(a.attributes||(a.attributes={}),Os(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function n(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var r=this.manifest.mediaGroups[t.attributes.TYPE];r[t.attributes["GROUP-ID"]]=r[t.attributes["GROUP-ID"]]||{},e=r[t.attributes["GROUP-ID"]],(i={default:/yes/i.test(t.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(i.language=t.attributes.LANGUAGE),t.attributes.URI&&(i.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(i.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(i.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(i.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function t(){c+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time":function e(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),a.dateTimeString=t.dateTimeString,a.dateTimeObject=t.dateTimeObject},targetduration:function e(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function e(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function e(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function e(){a.cueOut=t.data},"cue-out-cont":function e(){a.cueOutCont=t.data},"cue-in":function e(){a.cueIn=t.data}}[t.tagType]||u).call(n)},uri:function e(){a.uri=t.uri,r.push(a),!this.manifest.targetDuration||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),o&&(a.key=o),a.timeline=c,s&&(a.map=s),a={}},comment:function t(){},custom:function e(){t.segment?(a.custom=a.custom||{},a.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(n)}),i}return Ps(e,t),e.prototype.push=function t(e){this.lineStream.push(e)},e.prototype.end=function t(){this.lineStream.push("\n")},e.prototype.addParser=function t(e){this.parseStream.addParser(e)},e}(Is),Ns=function t(e){return!!e&&"object"==typeof e},js=function t(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.reduce(function(e,i){return Object.keys(i).forEach(function(n){Array.isArray(e[n])&&Array.isArray(i[n])?e[n]=e[n].concat(i[n]):Ns(e[n])&&Ns(i[n])?e[n]=t(e[n],i[n]):e[n]=i[n]}),e},{})},Fs=function t(e){return Object.keys(e).map(function(t){return e[t]})},Vs=function t(e,i){for(var n=[],r=e;r<i;r++)n.push(r);return n},Hs=function t(e){return e.reduce(function(t,e){return t.concat(e)},[])},qs=function t(e){if(!e.length)return[];for(var i=[],n=0;n<e.length;n++)i.push(e[n]);return i},zs=function t(e,i){return e.reduce(function(t,e,n){return e[i]&&t.push(n),t},[])},Ws=function t(e){var i;return Fs(e.reduce(function(t,e){var i=e.attributes.id+(e.attributes.lang||""),n;t[i]?(e.segments[0].discontinuity=!0,(n=t[i].segments).push.apply(n,e.segments),e.attributes.contentProtection&&(t[i].attributes.contentProtection=e.attributes.contentProtection)):t[i]=e;return t},{})).map(function(t){return t.discontinuityStarts=zs(t.segments,"discontinuity"),t})},Gs=function t(e){var i,n=e.attributes,r=e.segments,a={attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),a},Xs=function t(e){var i,n=e.attributes,r=e.segments;return void 0===r&&(r=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1}},Ys=function t(e){return e.reduce(function(t,e){var i=e.attributes.role&&e.attributes.role.value||"main",n=e.attributes.lang||"",r="main";return n&&(r=e.attributes.lang+" ("+i+")"),t[r]&&t[r].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth?t:(t[r]={language:n,autoselect:!0,default:"main"===i,playlists:[Gs(e)],uri:""},t)},{})},$s=function t(e){return e.reduce(function(t,e){var i=e.attributes.lang||"text";return t[i]?t:(t[i]={language:i,default:!1,autoselect:!1,playlists:[Xs(e)],uri:""},t)},{})},Ks=function t(e){var i,n=e.attributes,r=e.segments,a={attributes:(i={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),a},Qs=function t(e){var i;if(!e.length)return{};var n=e[0].attributes,r=n.sourceDuration,a=n.minimumUpdatePeriod,s=void 0===a?0:a,o=function t(e){var i=e.attributes;return"video/mp4"===i.mimeType||"video"===i.contentType},u=function t(e){var i=e.attributes;return"audio/mp4"===i.mimeType||"audio"===i.contentType},l=function t(e){var i=e.attributes;return"text/vtt"===i.mimeType||"text"===i.contentType},c=Ws(e.filter(o)).map(Ks),h=Ws(e.filter(u)),d=e.filter(l),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:r,playlists:c,minimumUpdatePeriod:1e3*s};return h.length&&(p.mediaGroups.AUDIO.audio=Ys(h)),d.length&&(p.mediaGroups.SUBTITLES.subs=$s(d)),p},Js="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Zs(t,e){return t(e={exports:{}},e.exports),e.exports}var to=Zs(function(t,e){var i,n,r,a,s,o;i=Js,n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function t(e,i,n){if(n=n||{},e=e.trim(),!(i=i.trim())){if(!n.alwaysNormalize)return e;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var s=o.parseURL(i);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):i;var u=o.parseURL(e);if(!u)throw new Error("Error trying to parse base URL.");if(!u.netLoc&&u.path&&"/"!==u.path[0]){var l=r.exec(u.path);u.netLoc=l[1],u.path=l[2]}u.netLoc&&!u.path&&(u.path="/");var c={scheme:u.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=u.netLoc,"/"!==s.path[0]))if(s.path){var h=u.path,d=h.substring(0,h.lastIndexOf("/")+1)+s.path;c.path=o.normalizePath(d)}else c.path=u.path,s.params||(c.params=u.params,s.query||(c.query=u.query));return null===c.path&&(c.path=n.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(c)},parseURL:function t(e){var i=n.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function t(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function t(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},t.exports=o}),eo=function t(i,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(i)||(i=to.buildAbsoluteURL(e.location.href,i)),to.buildAbsoluteURL(i,n))},io=function t(e){var i=e.baseUrl,n=void 0===i?"":i,r=e.source,a=void 0===r?"":r,s=e.range,o=void 0===s?"":s,u={uri:a,resolvedUri:eo(n||"",a)};if(o){var l=o.split("-"),c=parseInt(l[0],10),h=parseInt(l[1],10);u.byterange={length:h-c,offset:c}}return u},no=function t(e,i,n){var r=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,u=void 0===o?1:o,l=e.start,c=void 0===l?0:l,h=e.minimumUpdatePeriod,d,p,f,m,g=(r+a)/1e3+(void 0===h?0:h)-(s+c);return Math.ceil((g*u-i)/n)},ro=function t(e,i){for(var n=e.type,r=void 0===n?"static":n,a=e.minimumUpdatePeriod,s=void 0===a?0:a,o=e.media,u=void 0===o?"":o,l=e.sourceDuration,c=e.timescale,h=void 0===c?1:c,d=e.startNumber,p=void 0===d?1:d,f=e.periodIndex,m=[],g=-1,y=0;y<i.length;y++){var v=i[y],_=v.d,b=v.r||0,T=v.t||0;g<0&&(g=T),T&&T>g&&(g=T);var S=void 0;if(b<0){var k=y+1;S=k===i.length?"dynamic"===r&&s>0&&u.indexOf("$Number$")>0?no(e,g,_):(l*h-g)/_:(i[k].t-g)/_}else S=b+1;for(var w=p+m.length+S,C=p+m.length;C<w;)m.push({number:C,duration:_/h,time:g,timeline:f}),g+=_,C++}return m},ao={
static:function t(e){var i=e.duration,n=e.timescale,r=void 0===n?1:n,a=e.sourceDuration;return{start:0,end:Math.ceil(a/(i/r))}},dynamic:function t(e){var i=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,a=e.timescale,s=void 0===a?1:a,o=e.duration,u=e.start,l=void 0===u?0:u,c=e.minimumUpdatePeriod,h=void 0===c?0:c,d=e.timeShiftBufferDepth,p=void 0===d?1/0:d,f=(i+n)/1e3,m=r+l,g,y=f+h-m,v=Math.ceil(y*s/o),_=Math.floor((f-m-p)*s/o),b=Math.floor((f-m)*s/o);return{start:Math.max(0,_),end:Math.min(v,b)}}},so=function t(e){return function(t,i){var n=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.periodIndex,o=e.startNumber,u;return{number:(void 0===o?1:o)+t,duration:n/a,timeline:s,time:i*n}}},oo=function t(e){var i=e.type,n=void 0===i?"static":i,r=e.duration,a=e.timescale,s=void 0===a?1:a,o=e.sourceDuration,u=ao[n](e),l=u.start,c=u.end,h=Vs(l,c).map(so(e));if("static"===n){var d=h.length-1;h[d].duration=o-r/s*d}return h},uo=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,lo=function t(e){return function(t,i,n,r){if("$$"===t)return"$";if(void 0===e[i])return t;var a=""+e[i];return"RepresentationID"===i?a:(r=n?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}},co=function t(e,i){return e.replace(uo,lo(i))},ho=function t(e,i){return e.duration||i?e.duration?oo(e):ro(e,i):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]},po=function t(e,i){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,a=void 0===r?{sourceURL:"",range:""}:r,s=io({baseUrl:e.baseUrl,source:co(a.sourceURL,n),range:a.range}),o;return ho(e,i).map(function(t){n.Number=t.number,n.Time=t.time;var i=co(e.media||"",n);return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:eo(e.baseUrl||"",i),map:s,number:t.number}})},fo="INVALID_NUMBER_OF_PERIOD",mo="DASH_EMPTY_MANIFEST",go="DASH_INVALID_XML",yo="NO_BASE_URL",vo="MISSING_SEGMENT_INFORMATION",_o="SEGMENT_TIME_UNSPECIFIED",bo="UNSUPPORTED_UTC_TIMING_SCHEME",To=function t(e,i){var n=e.baseUrl,r=e.initialization,a=void 0===r?{}:r,s=io({baseUrl:n,source:a.sourceURL,range:a.range}),o=io({baseUrl:n,source:i.media,range:i.mediaRange});return o.map=s,o},So=function t(e,i){var n=e.duration,r=e.segmentUrls,a=void 0===r?[]:r;if(!n&&!i||n&&i)throw new Error(_o);var s=a.map(function(t){return To(e,t)}),o,u;return n&&(o=oo(e)),i&&(o=ro(e,i)),o.map(function(t,e){if(s[e]){var i=s[e];return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i}}).filter(function(t){return t})},ko=function t(e){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,a=e.sourceDuration,s=e.timescale,o=void 0===s?1:s,u=e.indexRange,l=void 0===u?"":u,c=e.duration;if(!i)throw new Error(yo);var h=io({baseUrl:i,source:r.sourceURL,range:r.range}),d=io({baseUrl:i,source:i,range:l});if(d.map=h,c){var p=oo(e);p.length&&(d.duration=p[0].duration,d.timeline=p[0].timeline)}else a&&(d.duration=a/o,d.timeline=0);return d.number=0,[d]},wo=function t(e){var i=e.attributes,n=e.segmentInfo,r,a;if(n.template?(a=po,r=js(i,n.template)):n.base?(a=ko,r=js(i,n.base)):n.list&&(a=So,r=js(i,n.list)),!a)return{attributes:i};var s=a(r,n.timeline);if(r.duration){var o=r,u=o.duration,l=o.timescale,c=void 0===l?1:l;r.duration=u/c}else s.length?r.duration=s.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):r.duration=0;return{attributes:r,segments:s}},Co=function t(e){return e.map(wo)},Eo=function t(e,i){return qs(e.childNodes).filter(function(t){var e;return t.tagName===i})},Ao=function t(e){return e.textContent.trim()},Lo=function t(e){var i=31536e3,n=2592e3,r=86400,a=3600,s=60,o,u=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!u)return 0;var l=u.slice(1),c=l[0],h=l[1],d=l[2],p=l[3],f=l[4],m=l[5];return 31536e3*parseFloat(c||0)+2592e3*parseFloat(h||0)+86400*parseFloat(d||0)+3600*parseFloat(p||0)+60*parseFloat(f||0)+parseFloat(m||0)},Oo=function t(e){var i;return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)},Po={mediaPresentationDuration:function t(e){return Lo(e)},availabilityStartTime:function t(e){return Oo(e)/1e3},minimumUpdatePeriod:function t(e){return Lo(e)},timeShiftBufferDepth:function t(e){return Lo(e)},start:function t(e){return Lo(e)},width:function t(e){return parseInt(e,10)},height:function t(e){return parseInt(e,10)},bandwidth:function t(e){return parseInt(e,10)},startNumber:function t(e){return parseInt(e,10)},timescale:function t(e){return parseInt(e,10)},duration:function t(e){var i=parseInt(e,10);return isNaN(i)?Lo(e):i},d:function t(e){return parseInt(e,10)},t:function t(e){return parseInt(e,10)},r:function t(e){return parseInt(e,10)},DEFAULT:function t(e){return e}},Uo=function t(e){return e&&e.attributes?qs(e.attributes).reduce(function(t,e){var i=Po[e.name]||Po.DEFAULT;return t[e.name]=i(e.value),t},{}):{}};function Io(t){for(var i=e.atob(t),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}var xo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Do=function t(e,i){return i.length?Hs(e.map(function(t){return i.map(function(e){return eo(t,Ao(e))})})):e},Ro=function t(e){var i=Eo(e,"SegmentTemplate")[0],n=Eo(e,"SegmentList")[0],r=n&&Eo(n,"SegmentURL").map(function(t){return js({tag:"SegmentURL"},Uo(t))}),a=Eo(e,"SegmentBase")[0],s=n||i,o=s&&Eo(s,"SegmentTimeline")[0],u=n||a||i,l=u&&Eo(u,"Initialization")[0],c=i&&Uo(i);c&&l?c.initialization=l&&Uo(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var h={template:c,timeline:o&&Eo(o,"S").map(function(t){return Uo(t)}),list:n&&js(Uo(n),{segmentUrls:r,initialization:Uo(l)}),base:a&&js(Uo(a),{initialization:Uo(l)})};return Object.keys(h).forEach(function(t){h[t]||delete h[t]}),h},Mo=function t(e,i,n){return function(t){var r=Eo(t,"BaseURL"),a=Do(i,r),s=js(e,Uo(t)),o=Ro(t);return a.map(function(t){return{segmentInfo:js(n,o),attributes:js(s,{baseUrl:t})}})}},Bo=function t(e){return e.reduce(function(t,e){var i=Uo(e),n=xo[i.schemeIdUri];if(n){t[n]={attributes:i};var r=Eo(e,"cenc:pssh")[0];if(r){var a=Ao(r),s=a&&Io(a);t[n].pssh=s}}return t},{})},No=function t(e,i,n){return function(t){var r=Uo(t),a=Do(i,Eo(t,"BaseURL")),s=Eo(t,"Role")[0],o={role:Uo(s)},u=js(e,r,o),l=Bo(Eo(t,"ContentProtection"));Object.keys(l).length&&(u=js(u,{contentProtection:l}));var c=Ro(t),h=Eo(t,"Representation"),d=js(n,c);return Hs(h.map(Mo(u,a,d)))}},jo=function t(i,n){return function(t,r){var a=Do(n,Eo(t,"BaseURL")),s=Uo(t),o=parseInt(s.id,10),u=e.isNaN(o)?r:o,l=js(i,{periodIndex:u}),c=Eo(t,"AdaptationSet"),h=Ro(t);return Hs(c.map(No(l,a,h)))}},Fo=function t(e,i){void 0===i&&(i={});var n=i,r=n.manifestUri,a=void 0===r?"":r,s=n.NOW,o=void 0===s?Date.now():s,u=n.clientOffset,l=void 0===u?0:u,c=Eo(e,"Period");if(!c.length)throw new Error(fo);var h=Uo(e),d=Do([a],Eo(e,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=o,h.clientOffset=l,Hs(c.map(jo(h,d)))},Vo=function t(i){if(""===i)throw new Error(mo);var n,r=(new e.DOMParser).parseFromString(i,"application/xml"),a=r&&"MPD"===r.documentElement.tagName?r.documentElement:null;if(!a||a&&a.getElementsByTagName("parsererror").length>0)throw new Error(go);return a},Ho=function t(e){var i=Eo(e,"UTCTiming")[0];if(!i)return null;var n=Uo(i);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(bo)}return n},qo=function t(e,i){return Qs(Co(Fo(Vo(e),i)))},zo=function t(e){return Ho(Vo(e))},Wo,Go,Xo=function t(e){return e>>>0},Yo,$o,Ko,Qo,Jo;Ko=function t(e){var i={},n;return Yo(e,["moov","trak"]).reduce(function(t,e){var i,n,r,a,s;return(i=Yo(e,["tkhd"])[0])?(n=i[0],a=Xo(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(s=Yo(e,["mdia","mdhd"])[0])?(r=0===(n=s[0])?12:20,t[a]=Xo(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),t):null):null},i)},Qo=function t(e,i){var n,r,a;return n=Yo(i,["moof","traf"]),r=[].concat.apply([],n.map(function(t){return Yo(t,["tfhd"]).map(function(i){var n,r,a;return n=Xo(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=e[n]||9e4,(a=(a=Yo(t,["tfdt"]).map(function(t){var e,i;return e=t[0],i=Xo(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(i*=Math.pow(2,32),i+=Xo(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),i})[0])||1/0)/r})})),a=Math.min.apply(null,r),isFinite(a)?a:0},Jo=function t(e){var i=Yo(e,["moov","trak"]),n=[];return i.forEach(function(t){var e=Yo(t,["mdia","hdlr"]),i=Yo(t,["tkhd"]);e.forEach(function(t,e){var r=$o(t.subarray(8,12)),a=i[e],s,o,u;"vide"===r&&(u=0===(o=(s=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0))?s.getUint32(12):s.getUint32(20),n.push(u))})}),n};var Zo={findBox:Yo=function t(e,i){var n=[],r,a,s,o,u;if(!i.length)return null;for(r=0;r<e.byteLength;)a=Xo(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),s=$o(e.subarray(r+4,r+8)),o=a>1?r+a:e.byteLength,s===i[0]&&(1===i.length?n.push(e.subarray(r+8,o)):(u=Yo(e.subarray(r+8,o),i.slice(1))).length&&(n=n.concat(u))),r=o;return n},parseType:$o=function t(e){var i="";return i+=String.fromCharCode(e[0]),i+=String.fromCharCode(e[1]),i+=String.fromCharCode(e[2]),i+=String.fromCharCode(e[3])},timescale:Ko,startTime:Qo,videoTrackIds:Jo},tu=Math.pow(2,32)-1,eu,iu,nu,ru,au,su,ou,uu,lu,cu,hu,du,pu,fu,mu,gu,yu,vu,_u,bu,Tu,Su,ku,wu,Cu,Eu,Au,Lu,Ou,Pu,Uu,Iu,xu,Du,Ru,Mu,Bu,Nu,ju,Fu,Vu;!function(){var t;if(ku={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in ku)ku.hasOwnProperty(t)&&(ku[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);wu=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Eu=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Cu=new Uint8Array([0,0,0,1]),Au=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Lu=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Ou={video:Au,audio:Lu},Iu=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Uu=new Uint8Array([0,0,0,0,0,0,0,0]),xu=new Uint8Array([0,0,0,0,0,0,0,0]),Du=xu,Ru=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Mu=xu,Pu=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),eu=function t(e){var i=[],n=0,r,a,s;for(r=1;r<arguments.length;r++)i.push(arguments[r]);for(r=i.length;r--;)n+=i[r].byteLength;for(a=new Uint8Array(n+8),(s=new DataView(a.buffer,a.byteOffset,a.byteLength)).setUint32(0,a.byteLength),a.set(e,4),r=0,n=8;r<i.length;r++)a.set(i[r],n),n+=i[r].byteLength;return a},iu=function t(){return eu(ku.dinf,eu(ku.dref,Iu))},nu=function t(e){return eu(ku.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},gu=function t(e){return eu(ku.hdlr,Ou[e])},mu=function t(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),eu(ku.mdhd,i)},fu=function t(e){return eu(ku.mdia,mu(e),gu(e.type),ou(e))},su=function t(e){return eu(ku.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},ou=function t(e){return eu(ku.minf,"video"===e.type?eu(ku.vmhd,Pu):eu(ku.smhd,Uu),iu(),vu(e))},uu=function t(e,i){for(var n=[],r=i.length;r--;)n[r]=bu(i[r]);return eu.apply(null,[ku.moof,su(e)].concat(n))},lu=function t(e){for(var i=e.length,n=[];i--;)n[i]=du(e[i]);return eu.apply(null,[ku.moov,hu(4294967295)].concat(n).concat(cu(e)))},cu=function t(e){for(var i=e.length,n=[];i--;)n[i]=Tu(e[i]);return eu.apply(null,[ku.mvex].concat(n))},hu=function t(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return eu(ku.mvhd,i)},yu=function t(e){var i=e.samples||[],n=new Uint8Array(4+i.length),r,a;for(a=0;a<i.length;a++)r=i[a].flags,n[a+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return eu(ku.sdtp,n)},vu=function t(e){return eu(ku.stbl,_u(e),eu(ku.stts,Mu),eu(ku.stsc,Du),eu(ku.stsz,Ru),eu(ku.stco,xu))},_u=function t(e){return eu(ku.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?Bu(e):Nu(e))},Bu=function t(e){var i=e.sps||[],n=e.pps||[],r=[],a=[],s;for(s=0;s<i.length;s++)r.push((65280&i[s].byteLength)>>>8),r.push(255&i[s].byteLength),r=r.concat(Array.prototype.slice.call(i[s]));for(s=0;s<n.length;s++)a.push((65280&n[s].byteLength)>>>8),a.push(255&n[s].byteLength),a=a.concat(Array.prototype.slice.call(n[s]));return eu(ku.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),eu(ku.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length]).concat(r).concat([n.length]).concat(a))),eu(ku.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},Nu=function t(e){return eu(ku.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),nu(e))},pu=function t(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return eu(ku.tkhd,i)},bu=function t(e){var i,n,r,a,s,o,u;return i=eu(ku.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/(tu+1)),u=Math.floor(e.baseMediaDecodeTime%(tu+1)),n=eu(ku.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),s=92,"audio"===e.type?(r=Su(e,92),eu(ku.traf,i,n,r)):(a=yu(e),r=Su(e,a.length+92),eu(ku.traf,i,n,r,a))},du=function t(e){return e.duration=e.duration||4294967295,eu(ku.trak,pu(e),fu(e))},Tu=function t(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),eu(ku.trex,i)},Vu=function t(e,i){var n=0,r=0,a=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(a=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|r|a|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&i)>>>24,(16711680&i)>>>16,(65280&i)>>>8,255&i]},Fu=function t(e,i){var n,r,a,s;for(i+=20+16*(r=e.samples||[]).length,n=Vu(r,i),s=0;s<r.length;s++)a=r[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return eu(ku.trun,new Uint8Array(n))},ju=function t(e,i){var n,r,a,s;for(i+=20+8*(r=e.samples||[]).length,n=Vu(r,i),s=0;s<r.length;s++)a=r[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return eu(ku.trun,new Uint8Array(n))},Su=function t(e,i){return"audio"===e.type?ju(e,i):Fu(e,i)};var Hu={ftyp:ru=function t(){return eu(ku.ftyp,wu,Cu,wu,Eu)},mdat:au=function t(e){return eu(ku.mdat,e)},moof:uu,moov:lu,initSegment:function t(e){var i=ru(),n=lu(e),r;return(r=new Uint8Array(i.byteLength+n.byteLength)).set(i),r.set(n,i.byteLength),r}},qu=function t(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),n>-1)},this.trigger=function(e){var i,n,r,a;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){t={}}}};qu.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},qu.prototype.push=function(t){this.trigger("data",t)},qu.prototype.flush=function(t){this.trigger("done",t)};var zu=qu,Wu,Gu,Xu,Yu=function t(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},$u=function t(e,i){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=i,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},Ku,Qu,Ju=function t(e){var i,n,r=[],a=[];for(r.byteLength=0,i=0;i<e.length;i++)"access_unit_delimiter_rbsp"===(n=e[i]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,a.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return a.length&&(!r.duration||r.duration<=0)&&(r.duration=a[a.length-1].duration),a.push(r),a},Zu=function t(e){var i,n,r=[],a=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,a.byteLength=0,a.nalCount=0,a.duration=0,a.pts=e[0].pts,a.dts=e[0].dts,i=0;i<e.length;i++)(n=e[i]).keyFrame?(r.length&&(a.push(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return a.length&&r.duration<=0&&(r.duration=a[a.length-1].duration),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.duration+=r.duration,a.push(r),a},tl=function t(e){var i;return!e[0][0].keyFrame&&e.length>1&&(i=e.shift(),e.byteLength-=i.byteLength,e.nalCount-=i.nalCount,e[0][0].dts=i.dts,e[0][0].pts=i.pts,e[0][0].duration+=i.duration),e},el=function t(e,i){var n,r,a,s,o,u=i||0,l=[];for(n=0;n<e.length;n++)for(s=e[n],r=0;r<s.length;r++)o=s[r],u+=(a=$u(o,u)).size,l.push(a);return l},il=function t(e){var i,n,r,a,s,o,u=0,l=e.byteLength,c=e.nalCount,h,d=new Uint8Array(l+4*c),p=new DataView(d.buffer);for(i=0;i<e.length;i++)for(a=e[i],n=0;n<a.length;n++)for(s=a[n],r=0;r<s.length;r++)o=s[r],p.setUint32(u,o.data.byteLength),u+=4,d.set(o.data,u),u+=o.data.byteLength;return d},nl=[33,16,5,32,164,27],rl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],al=function t(e){for(var i=[];e--;)i.push(0);return i},sl,ol,ul=function t(e){return Object.keys(e).reduce(function(t,i){return t[i]=new Uint8Array(e[i].reduce(function(t,e){return t.concat(e)},[])),t},{})}({96000:[nl,[227,64],al(154),[56]],88200:[nl,[231],al(170),[56]],64000:[nl,[248,192],al(240),[56]],48000:[nl,[255,192],al(268),[55,148,128],al(54),[112]],44100:[nl,[255,192],al(268),[55,163,128],al(84),[112]],32000:[nl,[255,192],al(268),[55,234],al(226),[112]],24000:[nl,[255,192],al(268),[55,255,128],al(268),[111,112],al(126),[224]],16000:[nl,[255,192],al(268),[55,255,128],al(268),[111,255],al(269),[223,108],al(195),[1,192]],12000:[rl,al(268),[3,127,248],al(268),[6,255,240],al(268),[13,255,224],al(268),[27,253,128],al(259),[56]],11025:[rl,al(268),[3,127,248],al(268),[6,255,240],al(268),[13,255,224],al(268),[27,255,192],al(268),[55,175,128],al(108),[112]],8000:[rl,al(268),[3,121,16],al(47),[7]]}),ll=9e4,cl,hl,dl,pl,fl,ml;fl=function t(e,i){return cl(pl(e,i))},ml=function t(e,i){return hl(dl(e),i)};var gl=cl=function t(e){return 9e4*e},yl=hl=function t(e,i){return e*i},vl=dl=function t(e){return e/9e4},_l=pl=function t(e,i){return e/i},bl=fl,Tl=ml,Sl=9e4,kl=function t(e){var i,n,r=0;for(i=0;i<e.length;i++)r+=(n=e[i]).data.byteLength;return r},wl,Cl,El,Al,Ll=function t(e,i,n,r){var a,s=0,o=0,u=0,l=0,c,h;if(i.length&&(a=bl(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(9e4/(e.samplerate/1024)),n&&r&&(o=a-Math.max(n,r),l=(u=Math.floor(o/s))*s),!(u<1||l>45e3))){for((c=ul[e.samplerate])||(c=i[0].data),h=0;h<u;h++)i.splice(h,0,{data:c});e.baseMediaDecodeTime-=Math.floor(Tl(l,e.samplerate))}},Ol=function t(e,i,n){return i.minSegmentDts>=n?e:(i.minSegmentDts=1/0,e.filter(function(t){return t.dts>=n&&(i.minSegmentDts=Math.min(i.minSegmentDts,t.dts),i.minSegmentPts=i.minSegmentDts,!0)}))},Pl=function t(e){var i,n,r=[];for(i=0;i<e.length;i++)n=e[i],r.push({size:n.data.byteLength,duration:1024});return r},Ul=function t(e){var i,n,r=0,a=new Uint8Array(kl(e));for(i=0;i<e.length;i++)n=e[i],a.set(n.data,r),r+=n.data.byteLength;return a},Il=9e4,xl,Dl,Rl,Ml=function t(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Bl=function t(e,i){var n,r,a=e.minSegmentDts;return i||(a-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=a,n=Math.max(0,n),"audio"===e.type&&(n*=r=e.samplerate/9e4,n=Math.floor(n)),n},Nl=function t(e,i){"number"==typeof i.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=i.pts),void 0===e.minSegmentPts?e.minSegmentPts=i.pts:e.minSegmentPts=Math.min(e.minSegmentPts,i.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=i.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,i.pts)),"number"==typeof i.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=i.dts),void 0===e.minSegmentDts?e.minSegmentDts=i.dts:e.minSegmentDts=Math.min(e.minSegmentDts,i.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=i.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,i.dts))},jl=4,Fl=128,Vl,Hl,ql,zl,Wl=function t(e){for(var i=0,n={payloadType:-1,payloadSize:0},r=0,a=0;i<e.byteLength&&128!==e[i];){for(;255===e[i];)r+=255,i++;for(r+=e[i++];255===e[i];)a+=255,i++;if(a+=e[i++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=a,n.payload=e.subarray(i,i+a);break}i+=a,r=0,a=0}return n},Gl=function t(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Xl=function t(e,i){var n=[],r,a,s,o;if(!(64&i[0]))return n;for(a=31&i[0],r=0;r<a;r++)o={type:3&i[(s=3*r)+2],pts:e},4&i[s+2]&&(o.ccData=i[s+3]<<8|i[s+4],n.push(o));return n},Yl=function t(e){for(var i=e.byteLength,n=[],r=1,a,s;r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;a=i-n.length,s=new Uint8Array(a);var o=0;for(r=0;r<a;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=e[o];return s},$l=4,Kl=function t(){t.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ic(0,0),new ic(0,1),new ic(1,0),new ic(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};Kl.prototype=new zu,Kl.prototype.push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=Wl(t.escapedRBSP)).payloadType===$l&&(i=Gl(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Xl(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},Kl.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},Kl.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},Kl.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},Kl.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},Kl.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};var Ql={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Jl=function t(e){return null===e?"":(e=Ql[e]||e,String.fromCharCode(e))},Zl=14,tc=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ec=function t(){for(var e=[],i=15;i--;)e.push("");return e},ic=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=ec();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ec();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=ec()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))a=Jl((n=(3&n)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Jl((n=(3&n)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=tc.indexOf(7968&e);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(t.pts,s)),s!==this.row_&&(this.clearFormatting(t.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=Jl(n),a+=Jl(r),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};ic.prototype=new zu,ic.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){try{return t.trim()}catch(t){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},ic.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ec(),this.nonDisplayed_=ec(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ic.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ic.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},ic.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},ic.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},ic.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},ic.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},ic.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},ic.prototype.isNormalChar=function(t){return t>=32&&t<=127},ic.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=ec(),this.displayed_=ec()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},ic.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,i)},ic.prototype.clearFormatting=function(t){if(this.formatting_.length){
var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},ic.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},ic.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},ic.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},ic.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var nc={CaptionStream:Kl,Cea608Stream:ic},rc={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ac=8589934592,sc=4294967296,oc=function t(e,i){var n=1;for(e>i&&(n=-1);Math.abs(i-e)>sc;)e+=n*ac;return e},uc=function t(e){var i,n;t.prototype.init.call(this),this.type_=e,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=oc(t.dts,n),t.pts=oc(t.pts,n),i=t.dts,this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.discontinuity=function(){n=void 0,i=void 0}};uc.prototype=new zu;var lc=uc,cc=oc,hc=function t(e,i,n){var r,a="";for(r=i;r<n;r++)a+="%"+("00"+e[r].toString(16)).slice(-2);return a},dc=function t(e,i,n){return decodeURIComponent(hc(e,i,n))},pc=function t(e,i,n){return unescape(hc(e,i,n))},fc=function t(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},mc={TXXX:function t(e){var i;if(3===e.data[0]){for(i=1;i<e.data.length;i++)if(0===e.data[i]){e.description=dc(e.data,1,i),e.value=dc(e.data,i+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function t(e){var i;if(3===e.data[0])for(i=1;i<e.data.length;i++)if(0===e.data[i]){e.description=dc(e.data,1,i),e.url=dc(e.data,i+1,e.data.length);break}},PRIV:function t(e){var i;for(i=0;i<e.data.length;i++)if(0===e.data[i]){e.owner=pc(e.data,0,i);break}e.privateData=e.data.subarray(i+1),e.data=e.privateData}},gc;(gc=function t(e){var i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0,s;if(gc.prototype.init.call(this),this.dispatchType=rc.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(s=0;s<i.descriptor.length;s++)this.dispatchType+=("00"+i.descriptor[s].toString(16)).slice(-2);this.push=function(t){var e,s,o,u,l,c;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(t),a+=t.data.byteLength,1===r.length&&(n=fc(t.data.subarray(6,10)),n+=10),!(a<n)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<n;)e.data.set(r[0].data.subarray(0,n-l),l),l+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();s=10,64&e.data[5]&&(s+=4,s+=fc(e.data.subarray(10,14)),n-=fc(e.data.subarray(16,20)));do{if((o=fc(e.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((u={id:c=String.fromCharCode(e.data[s],e.data[s+1],e.data[s+2],e.data[s+3]),data:e.data.subarray(s+10,s+o+10)}).key=u.id,mc[u.id]&&(mc[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var h=u.data,d=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;d*=4,d+=3&h[7],u.timeStamp=d,void 0===e.pts&&void 0===e.dts&&(e.pts=u.timeStamp,e.dts=u.timeStamp),this.trigger("timestamp",u)}e.frames.push(u),s+=10,s+=o}while(s<n);this.trigger("data",e)}}}).prototype=new zu;var yc=gc,vc=lc,_c,bc,Tc,Sc=188,kc=71;(_c=function t(){var e=new Uint8Array(188),i=0;_c.prototype.init.call(this),this.push=function(t){var n=0,r=188,a;for(i?((a=new Uint8Array(t.byteLength+i)).set(e.subarray(0,i)),a.set(t,i),i=0):a=t;r<a.byteLength;)71!==a[n]||71!==a[r]?(n++,r++):(this.trigger("data",a.subarray(n,r)),n+=188,r+=188);n<a.byteLength&&(e.set(a.subarray(n),0),i=a.byteLength-n)},this.flush=function(){188===i&&71===e[0]&&(this.trigger("data",e),i=0),this.trigger("done")}}).prototype=new zu,(bc=function t(){var e,i,n,r;bc.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function t(e,r){var a=0;r.payloadUnitStartIndicator&&(a+=e[a]+1),"pat"===r.type?i(e.subarray(a),r):n(e.subarray(a),r)},i=function t(e,i){i.section_number=e[7],i.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],i.pmtPid=r.pmtPid},n=function t(e,i){var n,a,s,o;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},a=3+(n=(15&e[1])<<8|e[2])-4,o=12+(s=(15&e[10])<<8|e[11]);o<a;){var u=e[o],l=(31&e[o+1])<<8|e[o+2];u===rc.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=l:u===rc.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=l:u===rc.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][l]=u),o+=5+((15&e[o+3])<<8|e[o+4])}i.programMapTable=r.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=rc.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=rc.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new zu,bc.STREAM_TYPES={h264:27,adts:15},(Tc=function t(){var e=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},a=function t(e,i){var n;i.packetLength=6+(e[4]<<8|e[5]),i.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(i.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,i.pts*=4,i.pts+=(6&e[13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,i.dts*=4,i.dts+=(6&e[18])>>>1)),i.data=e.subarray(9+e[8])},s=function t(i,n,r){var s=new Uint8Array(i.size),o={type:n},u=0,l=0,c=!1,h;if(i.data.length&&!(i.size<9)){for(o.trackId=i.data[0].pid,u=0;u<i.data.length;u++)h=i.data[u],s.set(h.data,l),l+=h.data.byteLength;a(s,o),c="video"===n||o.packetLength<=i.size,(r||c)&&(i.size=0,i.data.length=0),c&&e.trigger("data",o)}};Tc.prototype.init.call(this),this.push=function(t){({pat:function t(){},pes:function e(){var a,o;switch(t.streamType){case rc.H264_STREAM_TYPE:case rc.H264_STREAM_TYPE:a=i,o="video";break;case rc.ADTS_STREAM_TYPE:a=n,o="audio";break;case rc.METADATA_STREAM_TYPE:a=r,o="timed-metadata";break;default:return}t.payloadUnitStartIndicator&&s(a,o,!0),a.data.push(t),a.size+=t.data.byteLength},pmt:function i(){var n={type:"metadata",tracks:[]},r=t.programMapTable;null!==r.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.video,codec:"avc",type:"video"}),null!==r.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.audio,codec:"adts",type:"audio"}),e.trigger("data",n)}})[t.type]()},this.flush=function(){s(i,"video"),s(n,"audio"),s(r,"timed-metadata"),this.trigger("done")}}).prototype=new zu;var wc={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:_c,TransportParseStream:bc,ElementaryStream:Tc,TimestampRolloverStream:vc,CaptionStream:nc.CaptionStream,Cea608Stream:nc.Cea608Stream,MetadataStream:yc};for(var Cc in rc)rc.hasOwnProperty(Cc)&&(wc[Cc]=rc[Cc]);var Ec=wc,Ac,Lc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ac=function t(){var e;Ac.prototype.init.call(this),this.push=function(t){var i=0,n=0,r,a,s,o,u,l;if("audio"===t.type)for(e?(o=e,(e=new Uint8Array(o.byteLength+t.data.byteLength)).set(o),e.set(t.data,o.byteLength)):e=t.data;i+5<e.length;)if(255===e[i]&&240==(246&e[i+1])){if(a=2*(1&~e[i+1]),r=(3&e[i+3])<<11|e[i+4]<<3|(224&e[i+5])>>5,l=9e4*(u=1024*(1+(3&e[i+6])))/Lc[(60&e[i+2])>>>2],s=i+r,e.byteLength<s)return;if(this.trigger("data",{pts:t.pts+n*l,dts:t.dts+n*l,sampleCount:u,audioobjecttype:1+(e[i+2]>>>6&3),channelcount:(1&e[i+2])<<2|(192&e[i+3])>>>6,samplerate:Lc[(60&e[i+2])>>>2],samplingfrequencyindex:(60&e[i+2])>>>2,samplesize:16,data:e.subarray(i+7+a,s)}),e.byteLength===s)return void(e=void 0);n++,e=e.subarray(s)}else i++},this.flush=function(){this.trigger("done")}}).prototype=new zu;var Oc=Ac,Pc,Uc=Pc=function t(e){var i=e.byteLength,n=0,r=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+r},this.loadWord=function(){var t=e.byteLength-i,a=new Uint8Array(4),s=Math.min(4,i);if(0===s)throw new Error("no bytes available");a.set(e.subarray(t,t+s)),n=new DataView(a.buffer).getUint32(0),r=8*s,i-=s},this.skipBits=function(t){var e;r>t?(n<<=t,r-=t):(t-=r,t-=8*(e=Math.floor(t/8)),i-=e,this.loadWord(),n<<=t,r-=t)},this.readBits=function(t){var e=Math.min(r,t),a=n>>>32-e;return(r-=e)>0?n<<=e:i>0&&this.loadWord(),(e=t-e)>0?a<<e|this.readBits(e):a},this.skipLeadingZeros=function(){var t;for(t=0;t<r;++t)if(0!=(n&2147483648>>>t))return n<<=t,r-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},Ic,xc,Dc;(xc=function t(){var e=0,i,n;xc.prototype.init.call(this),this.push=function(t){var r;for(n?((r=new Uint8Array(n.byteLength+t.data.byteLength)).set(n),r.set(t.data,n.byteLength),n=r):n=t.data;e<n.byteLength-3;e++)if(1===n[e+2]){i=e+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}e+3!==i-2&&this.trigger("data",n.subarray(e+3,i-2));do{i++}while(1!==n[i]&&i<n.length);e=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}this.trigger("data",n.subarray(e+3,i-2)),e=i-2,i+=3;break;default:i+=3}n=n.subarray(e),i-=e,e=0},this.flush=function(){n&&n.byteLength>3&&this.trigger("data",n.subarray(e+3)),n=null,e=0,this.trigger("done")}}).prototype=new zu,Dc={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Ic=function t(){var e=new xc,i,n,r,a,s,o,u;Ic.prototype.init.call(this),i=this,this.push=function(t){"video"===t.type&&(n=t.trackId,r=t.pts,a=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:n,pts:r,dts:a,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=s(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=s(t.subarray(1)),e.config=o(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",e)}),e.on("done",function(){i.trigger("done")}),this.flush=function(){e.flush()},u=function t(e,i){var n=8,r=8,a,s;for(a=0;a<e;a++)0!==r&&(r=(n+(s=i.readExpGolomb())+256)%256),n=0===r?n:r},s=function t(e){for(var i=e.byteLength,n=[],r=1,a,s;r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;a=i-n.length,s=new Uint8Array(a);var o=0;for(r=0;r<a;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=e[o];return s},o=function t(e){var i=0,n=0,r=0,a=0,s=1,o,l,c,h,d,p,f,m,g,y,v,_,b,T;if(l=(o=new Uc(e)).readUnsignedByte(),h=o.readUnsignedByte(),c=o.readUnsignedByte(),o.skipUnsignedExpGolomb(),Dc[l]&&(3===(d=o.readUnsignedExpGolomb())&&o.skipBits(1),o.skipUnsignedExpGolomb(),o.skipUnsignedExpGolomb(),o.skipBits(1),o.readBoolean()))for(v=3!==d?8:12,T=0;T<v;T++)o.readBoolean()&&u(T<6?16:64,o);if(o.skipUnsignedExpGolomb(),0===(p=o.readUnsignedExpGolomb()))o.readUnsignedExpGolomb();else if(1===p)for(o.skipBits(1),o.skipExpGolomb(),o.skipExpGolomb(),f=o.readUnsignedExpGolomb(),T=0;T<f;T++)o.skipExpGolomb();if(o.skipUnsignedExpGolomb(),o.skipBits(1),m=o.readUnsignedExpGolomb(),g=o.readUnsignedExpGolomb(),0===(y=o.readBits(1))&&o.skipBits(1),o.skipBits(1),o.readBoolean()&&(i=o.readUnsignedExpGolomb(),n=o.readUnsignedExpGolomb(),r=o.readUnsignedExpGolomb(),a=o.readUnsignedExpGolomb()),o.readBoolean()&&o.readBoolean()){switch(b=o.readUnsignedByte()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()]}_&&(s=_[0]/_[1])}return{profileIdc:l,levelIdc:c,profileCompatibility:h,width:Math.ceil((16*(m+1)-2*i-2*n)*s),height:(2-y)*(g+1)*16-2*r-2*a}}}).prototype=new zu;var Rc={H264Stream:Ic,NalByteStream:xc},Mc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Bc,Nc=function t(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},jc=function t(e,i,n){var r,a="";for(r=i;r<n;r++)a+="%"+("00"+e[r].toString(16)).slice(-2);return a},Fc=function t(e,i,n){return unescape(jc(e,i,n))},Vc,Hc,qc,zc,Wc,Gc={isLikelyAacData:function t(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function t(e,i){var n=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],r,a;return(16&e[i+5])>>4?n+20:n+10},parseAdtsSize:function t(e,i){var n=(224&e[i+5])>>5,r=e[i+4]<<3,a;return 6144&e[i+3]|r|n},parseType:function t(e,i){return e[i]==="I".charCodeAt(0)&&e[i+1]==="D".charCodeAt(0)&&e[i+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[i]&&240==(240&e[i+1])?"audio":null},parseSampleRate:function t(e){for(var i=0;i+5<e.length;){if(255===e[i]&&240==(246&e[i+1]))return Mc[(60&e[i+2])>>>2];i++}return null},parseAacTimestamp:function t(e){var i,n,r,a;i=10,64&e[5]&&(i+=4,i+=Nc(e.subarray(10,14)));do{if((n=Nc(e.subarray(i+4,i+8)))<1)return null;if("PRIV"===(a=String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]))){r=e.subarray(i+10,i+n+10);for(var s=0;s<r.byteLength;s++)if(0===r[s]){var o;if("com.apple.streaming.transportStreamTimestamp"===Fc(r,0,s)){var u=r.subarray(s+1),l=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;return l*=4,l+=3&u[7]}break}}i+=10,i+=n}while(i<e.byteLength);return null}},Xc;(Xc=function t(){var e=new Uint8Array,i=0;Xc.prototype.init.call(this),this.setTimestamp=function(t){i=t},this.push=function(t){var n=0,r=0,a,s,o,u;for(e.length?(u=e.length,(e=new Uint8Array(t.byteLength+u)).set(e.subarray(0,u)),e.set(t,u)):e=t;e.length-r>=3;)if(e[r]!=="I".charCodeAt(0)||e[r+1]!=="D".charCodeAt(0)||e[r+2]!=="3".charCodeAt(0))if(255!=(255&e[r])||240!=(240&e[r+1]))r++;else{if(e.length-r<7)break;if(r+(n=Gc.parseAdtsSize(e,r))>e.length)break;o={type:"audio",data:e.subarray(r,r+n),pts:i,dts:i},this.trigger("data",o),r+=n}else{if(e.length-r<10)break;if(r+(n=Gc.parseId3TagSize(e,r))>e.length)break;s={type:"timed-metadata",data:e.subarray(r,r+n)},this.trigger("data",s),r+=n}a=e.length-r,e=a>0?e.subarray(r):new Uint8Array}}).prototype=new zu;var Yc=Xc,$c=Rc.H264Stream,Kc=Gc.isLikelyAacData,Qc=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Jc=["width","height","profileIdc","levelIdc","profileCompatibility"],Zc,th,eh,ih,nh=function t(e,i){var n;if(e.length!==i.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==i[n])return!1;return!0};(th=function t(e,i){var n=[],r=0,a=0,s=0,o=1/0;i=i||{},th.prototype.init.call(this),this.push=function(t){Nl(e,t),e&&Qc.forEach(function(i){e[i]=t[i]}),n.push(t)},this.setEarliestDts=function(t){a=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var t,u,l,c;0!==n.length?(t=Ol(n,e,a),e.baseMediaDecodeTime=Bl(e,i.keepOriginalTimestamps),Ll(e,t,s,o),e.samples=Pl(t),l=Hu.mdat(Ul(t)),n=[],u=Hu.moof(r,[e]),c=new Uint8Array(u.byteLength+l.byteLength),r++,c.set(u),c.set(l,u.byteLength),Ml(e),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")}}).prototype=new zu,(Zc=function t(e,i){var n=0,r=[],a=[],s,o;i=i||{},Zc.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Nl(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||s||(s=t.config,e.sps=[t.data],Jc.forEach(function(t){e[t]=s[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||o||(o=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){for(var t,s,o,u,l,c;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(t=Ju(r),(o=Zu(t))[0][0].keyFrame||((s=this.getGopForFusion_(r[0],e))?(o.unshift(s),o.byteLength+=s.byteLength,o.nalCount+=s.nalCount,o.pts=s.pts,o.dts=s.dts,o.duration+=s.duration):o=tl(o)),a.length){var h;if(!(h=i.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ml(e),o=h}Nl(e,o),e.samples=el(o),l=Hu.mdat(il(o)),e.baseMediaDecodeTime=Bl(e,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=Hu.moof(n,[e]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){Ml(e),s=void 0,o=void 0},this.getGopForFusion_=function(t){var i=45e3,n=1e4,r=1/0,a,s,o,u,l;for(l=0;l<this.gopCache_.length;l++)o=(u=this.gopCache_[l]).gop,e.pps&&nh(e.pps[0],u.pps[0])&&e.sps&&nh(e.sps[0],u.sps[0])&&(o.dts<e.timelineStartInfo.dts||(a=t.dts-o.dts-o.duration)>=-1e4&&a<=45e3&&(!s||r>a)&&(s=u,r=a));return s?s.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,s,o,u,l;for(s=t.byteLength,o=t.nalCount,u=t.duration,e=i=0;e<a.length&&i<t.length&&(n=a[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,s-=r.byteLength,o-=r.nalCount,u-=r.duration);return 0===i?t:i===t.length?null:((l=t.slice(i)).byteLength=s,l.duration=u,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,i,n,r,s,o,u;for(e=a.length-1,i=t.length-1,s=null,o=!1;e>=0&&i>=0;){if(n=a[e],r=t[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?e--:(e===a.length-1&&(s=i),i--)}if(!o&&null===s)return null;if(0===(u=o?i:s))return t;var l=t.slice(u),c=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){a=t}}).prototype=new zu,(ih=function t(e,i){this.numberOfTracks=0,this.metadataStream=i,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ih.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new zu,ih.prototype.flush=function(t){var e=0,i={captions:[],captionStreams:{},metadata:[],info:{}},n,r,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Jc.forEach(function(t){i.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Qc.forEach(function(t){i.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?i.type=this.pendingTracks[0].type:i.type="combined",this.emittedTracks+=this.pendingTracks.length,a=Hu.initSegment(this.pendingTracks),i.initSegment=new Uint8Array(a.byteLength),i.initSegment.set(a),i.data=new Uint8Array(this.pendingBytes),o=0;o<this.pendingBoxes.length;o++)i.data.set(this.pendingBoxes[o],e),e+=this.pendingBoxes[o].byteLength;for(o=0;o<this.pendingCaptions.length;o++)(n=this.pendingCaptions[o]).startTime=n.startPts,this.keepOriginalTimestamps||(n.startTime-=s),n.startTime/=9e4,n.endTime=n.endPts,this.keepOriginalTimestamps||(n.endTime-=s),n.endTime/=9e4,i.captionStreams[n.stream]=!0,i.captions.push(n);for(o=0;o<this.pendingMetadata.length;o++)(r=this.pendingMetadata[o]).cueTime=r.pts,this.keepOriginalTimestamps||(r.cueTime-=s),r.cueTime/=9e4,i.metadata.push(r);i.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",i),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(eh=function t(e){var i=this,n=!0,r,a;eh.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new Ec.MetadataStream,t.aacStream=new Yc,t.audioTimestampRolloverStream=new Ec.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Ec.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Oc,t.coalesceStream=new ih(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(n){"timed-metadata"!==n.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new th(a,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="ts",t.metadataStream=new Ec.MetadataStream,t.packetStream=new Ec.TransportPacketStream,t.parseStream=new Ec.TransportParseStream,t.elementaryStream=new Ec.ElementaryStream,t.videoTimestampRolloverStream=new Ec.TimestampRolloverStream("video"),t.audioTimestampRolloverStream=new Ec.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Ec.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Oc,t.h264Stream=new $c,t.captionStream=new Ec.CaptionStream,t.coalesceStream=new ih(e,t.metadataStream),t.headOfPipeline=t.packetStream,t.packetStream.pipe(t.parseStream).pipe(t.elementaryStream),t.elementaryStream.pipe(t.videoTimestampRolloverStream).pipe(t.h264Stream),t.elementaryStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.elementaryStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.h264Stream.pipe(t.captionStream).pipe(t.coalesceStream),t.elementaryStream.on("data",function(n){var s;if("metadata"===n.type){for(s=n.tracks.length;s--;)r||"video"!==n.tracks[s].type?a||"audio"!==n.tracks[s].type||((a=n.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(r=n.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;r&&!t.videoSegmentStream&&(t.coalesceStream.numberOfTracks++,t.videoSegmentStream=new Zc(r,e),t.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,t.audioSegmentStream.setEarliestDts(e.dts))}),t.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),t.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&t.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),t.h264Stream.pipe(t.videoSegmentStream).pipe(t.coalesceStream)),a&&!t.audioSegmentStream&&(t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new th(a,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=t),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,Ml(a),e.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=t),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),r&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[],i.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Ml(r),i.captionStream.reset(),e.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=t)),i.timedMetadataTimestampRolloverStream&&i.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(n){var e=Kc(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new zu;var rh={Transmuxer:eh,VideoSegmentStream:Zc,AudioSegmentStream:th,AUDIO_PROPERTIES:Qc,VIDEO_PROPERTIES:Jc},ah,sh,oh=Zo.parseType,uh=function t(e){return new Date(1e3*e-20828448e5)},lh=function t(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},ch=function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],r,a;for(r=0;r+4<e.length;r+=a)if(a=i.getUint32(r),r+=4,a<=0)n.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[r]){case 1:n.push("slice_layer_without_partitioning_rbsp");break;case 5:n.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:n.push("sei_rbsp");break;case 7:n.push("seq_parameter_set_rbsp");break;case 8:n.push("pic_parameter_set_rbsp");break;case 9:n.push("access_unit_delimiter_rbsp");break;default:n.push("UNKNOWN NAL - "+e[r]&31)}return n},hh={avc1:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:i.getUint16(6),width:i.getUint16(24),height:i.getUint16(26),horizresolution:i.getUint16(28)+i.getUint16(30)/16,vertresolution:i.getUint16(32)+i.getUint16(34)/16,frameCount:i.getUint16(40),depth:i.getUint16(74),config:ah(e.subarray(78,e.byteLength))}},avcC:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},r=31&e[5],a,s,o,u;for(o=6,u=0;u<r;u++)s=i.getUint16(o),o+=2,n.sps.push(new Uint8Array(e.subarray(o,o+s))),o+=s;for(a=e[o],o++,u=0;u<a;u++)s=i.getUint16(o),o+=2,n.pps.push(new Uint8Array(e.subarray(o,o+s))),o+=s;return n},btrt:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:i.getUint32(0),maxBitrate:i.getUint32(4),avgBitrate:i.getUint32(8)}},esds:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function t(e){for(var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:oh(e.subarray(0,4)),minorVersion:i.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(oh(e.subarray(r,r+4))),r+=4;return n},dinf:function t(e){return{boxes:ah(e)}},dref:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:ah(e.subarray(8))}},hdlr:function t(e){var i,n={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:oh(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}n.name+=String.fromCharCode(e[r])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function t(e){return{byteLength:e.byteLength,nals:ch(e)}},mdhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r,a={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===a.version?(n+=4,a.creationTime=uh(i.getUint32(n)),n+=8,a.modificationTime=uh(i.getUint32(n)),n+=4,a.timescale=i.getUint32(n),n+=8,a.duration=i.getUint32(n)):(a.creationTime=uh(i.getUint32(n)),n+=4,a.modificationTime=uh(i.getUint32(n)),n+=4,a.timescale=i.getUint32(n),n+=4,a.duration=i.getUint32(n)),n+=4,r=i.getUint16(n),a.language+=String.fromCharCode(96+(r>>10)),a.language+=String.fromCharCode(96+((992&r)>>5)),a.language+=String.fromCharCode(96+(31&r)),a},mdia:function t(e){return{boxes:ah(e)}},mfhd:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function t(e){return{boxes:ah(e)}},mp4a:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:i.getUint16(6),channelcount:i.getUint16(16),samplesize:i.getUint16(18),samplerate:i.getUint16(24)+i.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=ah(e.subarray(28))[0]),n},moof:function t(e){return{boxes:ah(e)}},moov:function t(e){return{boxes:ah(e)}},mvex:function t(e){return{boxes:ah(e)}},mvhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=uh(i.getUint32(n)),n+=8,r.modificationTime=uh(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=8,r.duration=i.getUint32(n)):(r.creationTime=uh(i.getUint32(n)),n+=4,r.modificationTime=uh(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=4,r.duration=i.getUint32(n)),n+=4,r.rate=i.getUint16(n)+i.getUint16(n+2)/16,n+=4,r.volume=i.getUint8(n)+i.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=i.getUint32(n),r},pdin:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:i.getUint32(4),initialDelay:i.getUint32(8)}},sdtp:function t(e){var i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n;for(n=4;n<e.byteLength;n++)i.samples.push({
dependsOn:(48&e[n])>>4,isDependedOn:(12&e[n])>>2,hasRedundancy:3&e[n]});return i},sidx:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22),a;for(a=24;r;a+=12,r--)n.references.push({referenceType:(128&e[a])>>>7,referencedSize:2147483647&i.getUint32(a),subsegmentDuration:i.getUint32(a+4),startsWithSap:!!(128&e[a+8]),sapType:(112&e[a+8])>>>4,sapDeltaTime:268435455&i.getUint32(a+8)});return n},smhd:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function t(e){return{boxes:ah(e)}},stco:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4),a;for(a=8;r;a+=4,r--)n.chunkOffsets.push(i.getUint32(a));return n},stsc:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},a;for(a=8;n;a+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(a),samplesPerChunk:i.getUint32(a+4),sampleDescriptionIndex:i.getUint32(a+8)});return r},stsd:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:ah(e.subarray(8))}},stsz:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]},r;for(r=12;r<e.byteLength;r+=4)n.entries.push(i.getUint32(r));return n},stts:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4),a;for(a=8;r;a+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(a),sampleDelta:i.getUint32(a+4)});return n},styp:function t(e){return hh.ftyp(e)},tfdt:function t(e){var i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===i.version&&(i.baseMediaDecodeTime*=Math.pow(2,32),i.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),i},tfhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],u=32&n.flags[2],l=65536&n.flags[0],c=131072&n.flags[0],h;return h=8,r&&(h+=4,n.baseDataOffset=i.getUint32(12),h+=4),a&&(n.sampleDescriptionIndex=i.getUint32(h),h+=4),s&&(n.defaultSampleDuration=i.getUint32(h),h+=4),o&&(n.defaultSampleSize=i.getUint32(h),h+=4),u&&(n.defaultSampleFlags=i.getUint32(h)),l&&(n.durationIsEmpty=!0),!r&&c&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=uh(i.getUint32(n)),n+=8,r.modificationTime=uh(i.getUint32(n)),n+=4,r.trackId=i.getUint32(n),n+=4,n+=8,r.duration=i.getUint32(n)):(r.creationTime=uh(i.getUint32(n)),n+=4,r.modificationTime=uh(i.getUint32(n)),n+=4,r.trackId=i.getUint32(n),n+=4,n+=4,r.duration=i.getUint32(n)),n+=4,n+=8,r.layer=i.getUint16(n),n+=2,r.alternateGroup=i.getUint16(n),n+=2,r.volume=i.getUint8(n)+i.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=i.getUint16(n)+i.getUint16(n+2)/16,n+=4,r.height=i.getUint16(n)+i.getUint16(n+2)/16,r},traf:function t(e){return{boxes:ah(e)}},trak:function t(e){return{boxes:ah(e)}},trex:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4),defaultSampleDescriptionIndex:i.getUint32(8),defaultSampleDuration:i.getUint32(12),defaultSampleSize:i.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:i.getUint16(22)}},trun:function t(e){var i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],u=4&i.flags[1],l=8&i.flags[1],c=n.getUint32(4),h=8,d;for(r&&(i.dataOffset=n.getInt32(h),h+=4),a&&c&&(d={flags:lh(e.subarray(h,h+4))},h+=4,s&&(d.duration=n.getUint32(h),h+=4),o&&(d.size=n.getUint32(h),h+=4),l&&(d.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(d),c--);c--;)d={},s&&(d.duration=n.getUint32(h),h+=4),o&&(d.size=n.getUint32(h),h+=4),u&&(d.flags=lh(e.subarray(h,h+4)),h+=4),l&&(d.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(d);return i},"url ":function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:i.getUint16(4),opcolor:new Uint16Array([i.getUint16(6),i.getUint16(8),i.getUint16(10)])}}},dh={inspect:ah=function t(e){for(var i=0,n=[],r,a,s,o,u,l=new ArrayBuffer(e.length),c=new Uint8Array(l),h=0;h<e.length;++h)c[h]=e[h];for(r=new DataView(l);i<e.byteLength;)a=r.getUint32(i),s=oh(e.subarray(i+4,i+8)),o=a>1?i+a:e.byteLength,(u=(hh[s]||function(t){return{data:t}})(e.subarray(i+8,o))).size=a,u.type=s,n.push(u),i=o;return n},textify:sh=function t(e,i){var n;return i=i||0,n=new Array(2*i+1).join(" "),e.map(function(t,e){return n+t.type+"\n"+Object.keys(t).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(e){var i=n+"  "+e+": ",r=t[e];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?i+"<"+a.join("").slice(1)+">":i+"<\n"+a.map(function(t){return n+"  "+t}).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map(function(t,e){return 0===e?t:n+"  "+t}).join("\n")}).join("\n")+(t.boxes?"\n"+sh(t.boxes,i+1):"")}).join("\n")},parseTfdt:hh.tfdt,parseHdlr:hh.hdlr,parseTfhd:hh.tfhd,parseTrun:hh.trun},ph=Yl,fh=nc.CaptionStream,mh=function t(e,i){for(var n=e,r=0;r<i.length;r++){var a=i[r];if(n<a.size)return a;n-=a.size}return null},gh=function t(e,i,n){var r=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],s,o,u,l;for(o=0;o+4<e.length;o+=u)if(u=r.getUint32(o),o+=4,!(u<=0))switch(31&e[o]){case 6:var c=e.subarray(o+1,o+1+u),h=mh(o,i);s={nalUnitType:"sei_rbsp",size:u,data:c,escapedRBSP:ph(c),trackId:n},h?(s.pts=h.pts,s.dts=h.dts,l=h):(s.pts=l.pts,s.dts=l.dts),a.push(s)}return a},yh=function t(e,i,n){var r=i,a=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,u=[];return e.forEach(function(t){var e,i=dh.parseTrun(t).samples;i.forEach(function(t){void 0===t.duration&&(t.duration=a),void 0===t.size&&(t.size=s),t.trackId=o,t.dts=r,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=r+t.compositionTimeOffset,r+=t.duration}),u=u.concat(i)}),u},vh=function t(e,i){var n=Zo.findBox(e,["moof","traf"]),r=Zo.findBox(e,["mdat"]),a={},s=[];return r.forEach(function(t,e){var i=n[e];s.push({mdat:t,traf:i})}),s.forEach(function(t){var e=t.mdat,n=t.traf,r=Zo.findBox(n,["tfhd"]),s=dh.parseTfhd(r[0]),o=s.trackId,u=Zo.findBox(n,["tfdt"]),l=u.length>0?dh.parseTfdt(u[0]).baseMediaDecodeTime:0,c=Zo.findBox(n,["trun"]),h,d;i===o&&c.length>0&&(h=yh(c,l,s),d=gh(e,h,o),a[o]||(a[o]=[]),a[o]=a[o].concat(d))}),a},_h=function t(e,i,n){var r;return i?{seiNals:(r=vh(e,i))[i],timescale:n}:null},bh,Th=function t(){var e=!1,i,n,r,a,s;this.isInitialized=function(){return e},this.init=function(){i=new fh,e=!0,i.on("data",function(t){t.startTime=t.startPts/a,t.endTime=t.endPts/a,s.captions.push(t),s.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length)&&(r!==t[0]||a!==e[r])},this.parse=function(t,e,i){var o;if(!this.isInitialized())return null;if(!e||!i)return null;if(this.isNewInit(e,i))r=e[0],a=i[r];else if(!r||!a)return n.push(t),null;for(;n.length>0;){var u=n.shift();this.parse(u,e,i)}return null!==(o=_h(t,r,a))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),s):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){i.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;i.flush()},this.clearParsedCaptions=function(){s.captions=[],s.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;i.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){n=[],r=null,a=null,s?this.clearParsedCaptions():s={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Sh,kh={generator:Hu,probe:Zo,Transmuxer:rh.Transmuxer,AudioSegmentStream:rh.AudioSegmentStream,VideoSegmentStream:rh.VideoSegmentStream,CaptionParser:Th}.CaptionParser,wh=function t(e){var i=31&e[1];return i<<=8,i|=e[2]},Ch=function t(e){return!!(64&e[1])},Eh=function t(e){var i=0;return(48&e[3])>>>4>1&&(i+=e[4]+1),i},Ah,Lh,Oh,Ph,Uh=function t(e){var i;if(!Ch(e))return null;var n=4+Eh(e);if(n>=e.byteLength)return null;var r=null,a;return 192&(a=e[n+7])&&((r={}).pts=(14&e[n+9])<<27|(255&e[n+10])<<20|(254&e[n+11])<<12|(255&e[n+12])<<5|(254&e[n+13])>>>3,r.pts*=4,r.pts+=(6&e[n+13])>>>1,r.dts=r.pts,64&a&&(r.dts=(14&e[n+14])<<27|(255&e[n+15])<<20|(254&e[n+16])<<12|(255&e[n+17])<<5|(254&e[n+18])>>>3,r.dts*=4,r.dts+=(6&e[n+18])>>>1)),r},Ih=function t(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},xh,Dh={parseType:function t(e,i){var n=wh(e);return 0===n?"pat":n===i?"pmt":i?"pes":null},parsePat:function t(e){var i=Ch(e),n=4+Eh(e);return i&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function t(e){var i={},n=Ch(e),r=4+Eh(e);if(n&&(r+=e[r]+1),1&e[r+5]){var a,s,o;s=3+(a=(15&e[r+1])<<8|e[r+2])-4;for(var u=12+(o=(15&e[r+10])<<8|e[r+11]);u<s;){var l=r+u;i[(31&e[l+1])<<8|e[l+2]]=e[l],u+=5+((15&e[l+3])<<8|e[l+4])}return i}},parsePayloadUnitStartIndicator:Ch,parsePesType:function t(e,i){var n,r;switch(i[wh(e)]){case rc.H264_STREAM_TYPE:return"video";case rc.ADTS_STREAM_TYPE:return"audio";case rc.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:Uh,videoPacketContainsKeyFrame:function t(e){for(var i=4+Eh(e),n=e.subarray(i),r=0,a=0,s=!1,o;a<n.byteLength-3;a++)if(1===n[a+2]){r=a+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}a+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===(o=Ih(31&n[a+3]))&&(s=!0);do{r++}while(1!==n[r]&&r<n.length);a=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===(o=Ih(31&n[a+3]))&&(s=!0),a=r-2,r+=3;break;default:r+=3}return n=n.subarray(a),r-=a,a=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===(o=Ih(31&n[a+3]))&&(s=!0),s}},Rh=cc,Mh={};Mh.ts=Dh,Mh.aac=Gc;var Bh=9e4,Nh=188,jh=71,Fh=function t(e,i){for(var n=0,r=188,a,s;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(a=e.subarray(n,r),s=Mh.ts.parseType(a,i.pid)){case"pat":i.pid||(i.pid=Mh.ts.parsePat(a));break;case"pmt":i.table||(i.table=Mh.ts.parsePmt(a))}if(i.pid&&i.table)return;n+=188,r+=188}},Vh=function t(e,i,n){for(var r=0,a=188,s,o,u,l,c,h=!1;a<=e.byteLength;)if(71!==e[r]||71!==e[a]&&a!==e.byteLength)r++,a++;else{switch(s=e.subarray(r,a),o=Mh.ts.parseType(s,i.pid)){case"pes":u=Mh.ts.parsePesType(s,i.table),l=Mh.ts.parsePayloadUnitStartIndicator(s),"audio"===u&&l&&(c=Mh.ts.parsePesTime(s))&&(c.type="audio",n.audio.push(c),h=!0)}if(h)break;r+=188,a+=188}for(r=(a=e.byteLength)-188,h=!1;r>=0;)if(71!==e[r]||71!==e[a]&&a!==e.byteLength)r--,a--;else{switch(s=e.subarray(r,a),o=Mh.ts.parseType(s,i.pid)){case"pes":u=Mh.ts.parsePesType(s,i.table),l=Mh.ts.parsePayloadUnitStartIndicator(s),"audio"===u&&l&&(c=Mh.ts.parsePesTime(s))&&(c.type="audio",n.audio.push(c),h=!0)}if(h)break;r-=188,a-=188}},Hh=function t(e,i,n){for(var r=0,a=188,s,o,u,l,c,h,d,p,f=!1,m={data:[],size:0};a<e.byteLength;)if(71!==e[r]||71!==e[a])r++,a++;else{switch(s=e.subarray(r,a),o=Mh.ts.parseType(s,i.pid)){case"pes":if(u=Mh.ts.parsePesType(s,i.table),l=Mh.ts.parsePayloadUnitStartIndicator(s),"video"===u&&(l&&!f&&(c=Mh.ts.parsePesTime(s))&&(c.type="video",n.video.push(c),f=!0),!n.firstKeyFrame)){if(l&&0!==m.size){for(h=new Uint8Array(m.size),d=0;m.data.length;)p=m.data.shift(),h.set(p,d),d+=p.byteLength;Mh.ts.videoPacketContainsKeyFrame(h)&&(n.firstKeyFrame=Mh.ts.parsePesTime(h),n.firstKeyFrame.type="video"),m.size=0}m.data.push(s),m.size+=s.byteLength}}if(f&&n.firstKeyFrame)break;r+=188,a+=188}for(r=(a=e.byteLength)-188,f=!1;r>=0;)if(71!==e[r]||71!==e[a])r--,a--;else{switch(s=e.subarray(r,a),o=Mh.ts.parseType(s,i.pid)){case"pes":u=Mh.ts.parsePesType(s,i.table),l=Mh.ts.parsePayloadUnitStartIndicator(s),"video"===u&&l&&(c=Mh.ts.parsePesTime(s))&&(c.type="video",n.video.push(c),f=!0)}if(f)break;r-=188,a-=188}},qh=function t(e,i){if(e.audio&&e.audio.length){var n=i;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(t){t.dts=Rh(t.dts,n),t.pts=Rh(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})}if(e.video&&e.video.length){var r=i;if(void 0===r&&(r=e.video[0].dts),e.video.forEach(function(t){t.dts=Rh(t.dts,r),t.pts=Rh(t.pts,r),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=Rh(a.dts,r),a.pts=Rh(a.pts,r),a.dtsTime=a.dts/9e4,a.ptsTime=a.dts/9e4}}},zh=function t(e){for(var i=!1,n=0,r=null,a=null,s=0,o=0,u;e.length-o>=3;){var l;switch(Mh.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){i=!0;break}if((s=Mh.aac.parseId3TagSize(e,o))>e.length){i=!0;break}null===a&&(u=e.subarray(o,o+s),a=Mh.aac.parseAacTimestamp(u)),o+=s;break;case"audio":if(e.length-o<7){i=!0;break}if((s=Mh.aac.parseAdtsSize(e,o))>e.length){i=!0;break}null===r&&(u=e.subarray(o,o+s),r=Mh.aac.parseSampleRate(u)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var c=9e4/r,h;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*c,pts:a+1024*n*c}]}},Wh=function t(e){var i={pid:null,table:null},n={};for(var r in Fh(e,i),i.table){var a;if(i.table.hasOwnProperty(r))switch(i.table[r]){case rc.H264_STREAM_TYPE:n.video=[],Hh(e,i,n),0===n.video.length&&delete n.video;break;case rc.ADTS_STREAM_TYPE:n.audio=[],Vh(e,i,n),0===n.audio.length&&delete n.audio}}return n},Gh,Xh=function t(e,i){var n,r;return(r=Mh.aac.isLikelyAacData(e)?zh(e):Wh(e))&&(r.audio||r.video)?(qh(r,i),r):null},Yh=Vh;function $h(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}var Kh=function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},Qh=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Jh=function t(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)},Zh=function t(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?e:i},td=function t(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],i=e[0],n=e[1],r=i[4],a=n[4],s=void 0,o=void 0,u=void 0,l=[],c=[],h=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(o=u=0;!r[o];o^=h||1,u=c[u]||1)for(f=(f=u^u<<1^u<<2^u<<3^u<<4)>>8^255&f^99,r[o]=f,a[f]=o,g=16843009*(p=l[d=l[h=l[o]]])^65537*d^257*h^16843008*o,m=257*l[f]^16843008*f,s=0;s<4;s++)i[s][o]=m=m<<24^m>>>8,n[s][f]=g=g<<24^g>>>8;for(s=0;s<5;s++)i[s]=i[s].slice(0),n[s]=n[s].slice(0);return e},ed=null,id=function(){function t(e){Kh(this,t),ed||(ed=td()),this._tables=[[ed[0][0].slice(),ed[0][1].slice(),ed[0][2].slice(),ed[0][3].slice(),ed[0][4].slice()],[ed[1][0].slice(),ed[1][1].slice(),ed[1][2].slice(),ed[1][3].slice(),ed[1][4].slice()]];var i=void 0,n=void 0,r=void 0,a=void 0,s=void 0,o=this._tables[0][4],u=this._tables[1],l=e.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(a=e.slice(0),s=[],this._key=[a,s],i=l;i<4*l+28;i++)r=a[i-1],(i%l==0||8===l&&i%l==4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],i%l==0&&(r=r<<8^r>>>24^c<<24,c=c<<1^283*(c>>7))),a[i]=a[i-l]^r;for(n=0;i;n++,i--)r=a[3&n?i:i-4],s[n]=i<=4||n<4?r:u[0][o[r>>>24]]^u[1][o[r>>16&255]]^u[2][o[r>>8&255]]^u[3][o[255&r]]}return t.prototype.decrypt=function t(e,i,n,r,a,s){var o=this._key[1],u=e^o[0],l=r^o[1],c=n^o[2],h=i^o[3],d=void 0,p=void 0,f=void 0,m=o.length/4-2,g=void 0,y=4,v=this._tables[1],_=v[0],b=v[1],T=v[2],S=v[3],k=v[4];for(g=0;g<m;g++)d=_[u>>>24]^b[l>>16&255]^T[c>>8&255]^S[255&h]^o[y],p=_[l>>>24]^b[c>>16&255]^T[h>>8&255]^S[255&u]^o[y+1],f=_[c>>>24]^b[h>>16&255]^T[u>>8&255]^S[255&l]^o[y+2],h=_[h>>>24]^b[u>>16&255]^T[l>>8&255]^S[255&c]^o[y+3],y+=4,u=d,l=p,c=f;for(g=0;g<4;g++)a[(3&-g)+s]=k[u>>>24]<<24^k[l>>16&255]<<16^k[c>>8&255]<<8^k[255&h]^o[y++],d=u,u=l,l=c,c=h,h=d},t}(),nd=function(){function t(){Kh(this,t),this.listeners={}}return t.prototype.on=function t(e,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i)},t.prototype.off=function t(e,i){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(i);return this.listeners[e].splice(n,1),n>-1},t.prototype.trigger=function t(e){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,arguments[1]);else for(var a=Array.prototype.slice.call(arguments,1),s=i.length,o=0;o<s;++o)i[o].apply(this,a)},t.prototype.dispose=function t(){this.listeners={}},t.prototype.pipe=function t(e){this.on("data",function(t){e.push(t)})},t}(),rd=function(t){function e(){Kh(this,e);var i=Zh(this,t.call(this,nd));return i.jobs=[],i.delay=1,i.timeout_=null,i}return Jh(e,t),e.prototype.processJob_=function t(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},e.prototype.push=function t(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(nd),ad=function t(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},sd=function t(e,i,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new id(Array.prototype.slice.call(i)),s=new Uint8Array(e.byteLength),o=new Int32Array(s.buffer),u=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0;for(u=n[0],l=n[1],c=n[2],h=n[3],g=0;g<r.length;g+=4)d=ad(r[g]),p=ad(r[g+1]),f=ad(r[g+2]),m=ad(r[g+3]),a.decrypt(d,p,f,m,o,g),o[g]=ad(o[g]^u),o[g+1]=ad(o[g+1]^l),o[g+2]=ad(o[g+2]^c),o[g+3]=ad(o[g+3]^h),u=d,l=p,c=f,h=m;return s},od=function(){function t(e,i,n,r){Kh(this,t);var a=t.STEP,s=new Int32Array(e.buffer),o=new Uint8Array(e.byteLength),u=0;for(this.asyncStream_=new rd,this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),i,n,o)),u=a;u<s.length;u+=a)n=new Uint32Array([ad(s[u-4]),ad(s[u-3]),ad(s[u-2]),ad(s[u-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),i,n,o));this.asyncStream_.push(function(){r(null,$h(o))})}return t.prototype.decryptChunk_=function t(e,i,n,r){return function(){var t=sd(e,i,n);r.set(t,e.byteOffset)}},Qh(t,null,[{key:"STEP",get:function t(){return 32e3}}]),t}(),ud=function t(i,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(i)||(i=As.buildAbsoluteURL(e.location.href,i)),As.buildAbsoluteURL(i,n))},ld=function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},cd=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),hd=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},dd=function t(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)},pd=function t(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?e:i},fd=function(){function t(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),md=ws.mergeOptions,gd=ws.EventTarget,yd=ws.log,vd=function t(e,i){["AUDIO","SUBTITLES"].forEach(function(t){for(var n in e.mediaGroups[t])for(var r in e.mediaGroups[t][n]){var a=e.mediaGroups[t][n][r];i(a,t,n,r)}})},_d=function t(e,i,n){var r=i.slice();n=n||0;for(var a=Math.min(e.length,i.length+n),s=n;s<a;s++)r[s-n]=md(e[s],r[s-n]);return r},bd=function t(e,i){e.resolvedUri||(e.resolvedUri=ud(i,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ud(i,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ud(i,e.map.uri))},Td=function t(e,i){var n=md(e,{}),r=n.playlists[i.uri];if(!r)return null;if(r.segments&&i.segments&&r.segments.length===i.segments.length&&r.mediaSequence===i.mediaSequence)return null;var a=md(r,i);r.segments&&(a.segments=_d(r.segments,i.segments,i.mediaSequence-r.mediaSequence)),a.segments.forEach(function(t){bd(t,a.resolvedUri)});for(var s=0;s<n.playlists.length;s++)n.playlists[s].uri===i.uri&&(n.playlists[s]=a);return n.playlists[i.uri]=a,n},Sd=function t(e){for(var i=e.playlists.length;i--;){var n=e.playlists[i];e.playlists[n.uri]=n,n.resolvedUri=ud(e.uri,n.uri),n.id=i,n.attributes||(n.attributes={},yd.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},kd=function t(e){vd(e,function(t){t.uri&&(t.resolvedUri=ud(e.uri,t.uri))})},wd=function t(e,i){var n=e.segments[e.segments.length-1],r=void 0;return r=i&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},Cd=function(t){function i(t,e,n){ld(this,i);var r=pd(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(r.srcUrl=t,r.hls_=e,r.withCredentials=n,!r.srcUrl)throw new Error("A non-empty playlist URL is required");return r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.hls_.xhr({uri:ud(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(t,e){if(r.request)return t?r.playlistRequestError(r.request,r.media().uri,"HAVE_METADATA"):void r.haveMetadata(r.request,r.media().uri)}))}),r}return dd(i,t),cd(i,[{key:"playlistRequestError",value:function t(e,i,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+i,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function t(i,n){var r=this;this.request=null,this.state="HAVE_METADATA";var a=new Bs;a.push(i.responseText),a.end(),a.manifest.uri=n,a.manifest.attributes=a.manifest.attributes||{};var s=Td(this.master,a.manifest);this.targetDuration=a.manifest.targetDuration,s?(this.master=s,this.media_=this.master.playlists[a.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(e.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.setTimeout(function(){r.trigger("mediaupdatetimeout")},wd(this.media(),!!s))),this.trigger("loadedplaylist")}},{key:"dispose",value:function t(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function t(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function t(e){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if(ud(this.master.uri,e.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:ud(this.master.uri,e.uri),withCredentials:this.withCredentials},function(t,r){if(i.request){if(t)return i.playlistRequestError(i.request,e.uri,n);i.haveMetadata(r,e.uri),"HAVE_MASTER"===n?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},{key:"pause",value:function t(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function t(i){var n=this;e.clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(i){var a=r?r.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout(function(){return n.load()},a)}else this.started?r&&!r.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function t(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,n){if(i.request){if(i.request=null,t)return i.error={status:n.status,message:"HLS playlist request error at URL: "+i.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var r=new Bs;return r.push(n.responseText),r.end(),i.state="HAVE_MASTER",r.manifest.uri=i.srcUrl,r.manifest.playlists?(i.master=r.manifest,Sd(i.master),kd(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(r.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.location.href,playlists:[{uri:i.srcUrl,id:0}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.master.playlists[0].resolvedUri=i.srcUrl,i.master.playlists[0].attributes=i.master.playlists[0].attributes||{},i.haveMetadata(n,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),i}(gd),Ed=ws.createTimeRange,Ad=function t(e,i){var n=0,r=i-e.mediaSequence,a=e.segments[r];if(a){if(void 0!==a.start)return{result:a.start,precise:!0};if(void 0!==a.end)return{result:a.end-a.duration,precise:!0}}for(;r--;){if(void 0!==(a=e.segments[r]).end)return{result:n+a.end,precise:!0};if(n+=a.duration,void 0!==a.start)return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},Ld=function t(e,i){for(var n=0,r=void 0,a=i-e.mediaSequence;a<e.segments.length;a++){if(void 0!==(r=e.segments[a]).start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}},Od=function t(e,i,n){var r=void 0,a=void 0;return void 0===i&&(i=e.mediaSequence+e.segments.length),i<e.mediaSequence?0:(r=Ad(e,i)).precise?r.result:(a=Ld(e,i)).precise?a.result:r.result+n},Pd=function t(i,n,r){if(!i)return 0;if("number"!=typeof r&&(r=0),void 0===n){if(i.totalDuration)return i.totalDuration;if(!i.endList)return e.Infinity}return Od(i,n,r)},Ud=function t(e,i,n){var r=0;if(i>n){var a=[n,i];i=a[0],n=a[1]}if(i<0){for(var s=i;s<Math.min(0,n);s++)r+=e.targetDuration;i=0}for(var o=i;o<n;o++)r+=e.segments[o].duration;return r},Id=function t(e){if(!e.segments.length)return 0;for(var i=e.segments.length-1,n=e.segments[i].duration||e.targetDuration,r=n+2*e.targetDuration;i--&&!((n+=e.segments[i].duration)>=r););return Math.max(0,i)},xd=function t(e,i,n){if(!e||!e.segments)return null;if(e.endList)return Pd(e);if(null===i)return null;i=i||0;var r=n?Id(e):e.segments.length;return Od(e,e.mediaSequence+r,i)},Dd=function t(e,i){var n=!0,r=i||0,a=xd(e,i,!0);return null===a?Ed():Ed(r,a)},Rd=function t(e){return e-Math.floor(e)==0},Md=function t(e,i){if(Rd(i))return i+.1*e;for(var n=i.toString().split(".")[1].length,r=1;r<=n;r++){var a=Math.pow(10,r),s=i*a;if(Rd(s)||r===n)return(s+e)/a}},Bd=Md.bind(null,1),Nd=Md.bind(null,-1),jd,Fd=function t(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Vd=function t(e){return e.excludeUntil&&e.excludeUntil===1/0},Hd=function t(e){var i=Fd(e);return!e.disabled&&!i},qd,zd,Wd,Gd=function t(e,i){return i.attributes&&i.attributes[e]},Xd=function t(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a;return Gd("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/i:NaN},Yd=function t(e,i){if(1===e.playlists.length)return!0;var n=i.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(t){return!!Hd(t)&&(t.attributes.BANDWIDTH||0)<n}).length},$d={duration:Pd,seekable:Dd,safeLiveIndex:Id,getMediaInfoForTime:function t(e,i,n,r){var a=void 0,s=void 0,o=e.segments.length,u=i-r;if(u<0){if(n>0)for(a=n-1;a>=0;a--)if(s=e.segments[a],(u+=Nd(s.duration))>0)return{mediaIndex:a,startTime:r-Ud(e,n,a)};return{mediaIndex:0,startTime:i}}if(n<0){for(a=n;a<0;a++)if((u-=e.targetDuration)<0)return{mediaIndex:0,startTime:i};n=0}for(a=n;a<o;a++)if(s=e.segments[a],(u-=Bd(s.duration))<0)return{mediaIndex:a,startTime:r+Ud(e,n,a)};return{mediaIndex:o-1,startTime:i}},isEnabled:Hd,isDisabled:function t(e){return e.disabled},isBlacklisted:Fd,isIncompatible:Vd,playlistEnd:xd,isAes:function t(e){for(var i=0;i<e.segments.length;i++)if(e.segments[i].key)return!0;return!1},isFmp4:function t(e){for(var i=0;i<e.segments.length;i++)if(e.segments[i].map)return!0;return!1},hasAttribute:Gd,estimateSegmentRequestTime:Xd,isLowestEnabledRendition:Yd},Kd=ws.xhr,Qd=ws.mergeOptions,Jd=function t(){var e;return function t(e,i){e=Qd({timeout:45e3},e);var n=t.beforeRequest||ws.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(e);r&&(e=r)}var a=Kd(e,function(t,e){var n=a.response;!t&&n&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=n.byteLength||n.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),e.headers&&(a.responseHeaders=e.headers),t&&"ETIMEDOUT"===t.code&&(a.timedout=!0),t||a.aborted||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))),i(t,a)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=e.uri,a.requestTime=Date.now(),a}},Zd=function t(e,i){return e.start(i)+"-"+e.end(i)},tp=function t(e,i){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(i%2?" ":"")},ep=function t(e){return e>=32&&e<126?String.fromCharCode(e):"."},ip=function t(e){var i={};return Object.keys(e).forEach(function(t){var n=e[t];ArrayBuffer.isView(n)?i[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:i[t]=n}),i},np=function t(e){var i=e.byterange||{length:1/0,offset:0};return[i.length,i.offset,e.resolvedUri].join(",")},rp=function t(e){
for(var i=Array.prototype.slice.call(e),n=16,r="",a=void 0,s=void 0,o=0;o<i.length/16;o++)r+=(a=i.slice(16*o,16*o+16).map(tp).join(""))+" "+(s=i.slice(16*o,16*o+16).map(ep).join(""))+"\n";return r},ap=function t(e){var i=e.bytes;return rp(i)},sp=function t(e){var i="",n=void 0;for(n=0;n<e.length;n++)i+=Zd(e,n)+" ";return i},op=Object.freeze({createTransferableMessage:ip,initSegmentId:np,hexDump:rp,tagDump:ap,textRanges:sp}),up=function t(e,i,n,r){var a=void 0;if("stream"===i){a=new Date(1e3*r+n.getTime());var s=e.toISOString(),o=n.toISOString(),u=a.toISOString();return o<=s&&s<=u}if("player"===i)return a=r+n,n<=e&&e<=a},lp=function t(e,i,n){if(!n.segments||0===n.segments.length)return null;if("player"!==i&&"stream"!==i)return null;for(var r=0,a=0;a<n.segments.length;a++){var s=n.segments[a],o=r+s.duration,u=void 0,l=void 0;"player"===i?(u=s.start,l=r):(u=s.dateTimeObject,l=s.dateTimeObject);var c=void 0!==s.start&&void 0!==s.end&&up(e,i,u,s.end-s.start),h=up(e,i,l,s.duration);if(c)return{segment:s,estimatedStart:l,type:"accurate"};if(h)return{segment:s,estimatedStart:l,type:"estimate"};r=o}return null},cp=function t(e,i){return lp(e,"player",i)},hp=function t(e,i){var n=void 0;try{n=new Date(e)}catch(t){return null}return lp(n,"stream",i)},dp=function t(e,i){var n=void 0,r=void 0;try{n=new Date(e),r=new Date(i)}catch(t){}var a=n.getTime(),s;return(r.getTime()-a)/1e3},pp=function t(e){if(!e.segments||0===e.segments.length)return!1;for(var i=0;i<e.segments.length;i++){var n;if(!e.segments[i].dateTimeObject)return!1}return!0},fp=function t(e){var i=e.playlist,n=e.time,r=void 0===n?void 0:n,a=e.callback;if(!a)throw new Error("getStreamTime: callback must be provided");if(!i||void 0===r)return a({message:"getStreamTime: playlist and time must be provided"});var s=cp(r,i);if(!s)return a({message:"valid streamTime was not found"});if("estimate"===s.type)return a({message:"Accurate streamTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:r};return s.segment.dateTimeObject&&(o.programDateTime=s.segment.dateTimeObject.toISOString()),a(null,o)},mp=function t(e){var i=e.streamTime,n=e.playlist,r=e.retryCount,a=void 0===r?2:r,s=e.seekTo,o=e.pauseAfterSeek,u=void 0===o||o,l=e.tech,c=e.callback;if(!c)throw new Error("seekToStreamTime: callback must be provided");if(void 0===i||!n||!s)return c({message:"seekToStreamTime: streamTime, seekTo and playlist must be provided"});if(!n.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!pp(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=hp(i,n);if(!h)return c({message:i+" was not found in the stream"});if("estimate"===h.type)return 0===a?c({message:i+" is not buffered yet. Try again"}):t({streamTime:i,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:c});var d=h.segment,p=dp(d.dateTimeObject,i),f=d.start+p,m=function t(){return c(null,l.currentTime())};l.one("seeked",m),u&&l.pause(),s(f)},gp=1/30,yp=.1,vp=function t(e,i){var n=[],r=void 0;if(e&&e.length)for(r=0;r<e.length;r++)i(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return ws.createTimeRanges(n)},_p=function t(e,i){return vp(e,function(t,e){return t-1/30<=i&&e+1/30>=i})},bp=function t(e,i){return vp(e,function(t){return t-1/30>=i})},Tp=function t(e){if(e.length<2)return ws.createTimeRanges();for(var i=[],n=1;n<e.length;n++){var r=e.end(n-1),a=e.start(n);i.push([r,a])}return ws.createTimeRanges(i)},Sp=function t(e){var i=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)i.push(e.start(n)+" => "+e.end(n));return i.join(", ")},kp=function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r;return((e.length?e.end(e.length-1):0)-i)/n},wp=function t(e){for(var i=[],n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i},Cp=function t(e,i,n){var r=i.player_;if(n.captions&&n.captions.length)for(var a in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[a]){r.tech_.trigger({type:"usage",name:"hls-608"});var s=r.textTracks().getTrackById(a);e.inbandTextTracks_[a]=s||r.addRemoteTextTrack({kind:"captions",id:a,label:a},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},Ep=function t(e,i,n){var r=void 0,a=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(a=n.cues[r]).startTime<=i&&a.endTime>=e&&n.removeCue(a)},Ap=function t(e){Object.defineProperties(e.frame,{id:{get:function t(){return ws.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function t(){return ws.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function t(){return ws.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},Lp=function t(e){var i=void 0;return i=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},Op=function t(i,n,r){var a=e.WebKitDataCue||e.VTTCue;if(n&&n.forEach(function(t){var e=t.stream;this.inbandTextTracks_[e].addCue(new a(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},i),r){var s=Lp(i.mediaSource_.duration);if(r.forEach(function(t){var e=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var i=new a(e,e,t.value||t.url||t.data||"");i.frame=t,i.value=t,Ap(i),this.metadataTrack_.addCue(i)},this)},i),i.metadataTrack_&&i.metadataTrack_.cues&&i.metadataTrack_.cues.length){for(var o=i.metadataTrack_.cues,u=[],l=0;l<o.length;l++)o[l]&&u.push(o[l]);var c=u.reduce(function(t,e){var i=t[e.startTime]||[];return i.push(e),t[e.startTime]=i,t},{}),h=Object.keys(c).sort(function(t,e){return Number(t)-Number(e)});h.forEach(function(t,e){var i=c[t],n=Number(h[e+1])||s;i.forEach(function(t){t.endTime=n})})}}},Pp="undefined"!=typeof window?window:{},Up="undefined"==typeof Symbol?"__target":Symbol(),Ip="application/javascript",xp=Pp.BlobBuilder||Pp.WebKitBlobBuilder||Pp.MozBlobBuilder||Pp.MSBlobBuilder,Dp=Pp.URL||Pp.webkitURL||Dp&&Dp.msURL,Rp=Pp.Worker;function Mp(t,e){return function i(n){var r=this;if(!e)return new Rp(t);if(Rp&&!n){var a,s=Fp(e.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Up]=new Rp(s),Vp(this[Up],s),this[Up]}var o={postMessage:function t(e){r.onmessage&&setTimeout(function(){r.onmessage({data:e,target:o})})}};e.call(o),this.postMessage=function(t){setTimeout(function(){o.onmessage({data:t,target:r})})},this.isThisThread=!0}}if(Rp){var Bp,Np=Fp("self.onmessage = function () {}"),jp=new Uint8Array(1);try{(Bp=new Rp(Np)).postMessage(jp,[jp.buffer])}catch(t){Rp=null}finally{Dp.revokeObjectURL(Np),Bp&&Bp.terminate()}}function Fp(t){try{return Dp.createObjectURL(new Blob([t],{type:Ip}))}catch(i){var e=new xp;return e.append(t),Dp.createObjectURL(e.getBlob(type))}}function Vp(t,e){if(t&&e){var i=t.terminate;t.objURL=e,t.terminate=function(){t.objURL&&Dp.revokeObjectURL(t.objURL),i.call(t)}}}var Hp=new Mp("./transmuxer-worker.worker.js",function(t,e){var i=this,n=function(){var t=Math.pow(2,32)-1,e,n,r,a,s,o,u,l,c,h,d,p,f,m,g,y,v,_,b,T,S,k,w,C,E,A,L,O,P,U,I,x,D,R,M,B,N,j,F,V,H;!function(){var t;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in w)w.hasOwnProperty(t)&&(w[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:L,audio:O},x=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),R=D,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=D,U=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function t(e){var i=[],n=0,r,a,s;for(r=1;r<arguments.length;r++)i.push(arguments[r]);for(r=i.length;r--;)n+=i[r].byteLength;for(a=new Uint8Array(n+8),(s=new DataView(a.buffer,a.byteOffset,a.byteLength)).setUint32(0,a.byteLength),a.set(e,4),r=0,n=8;r<i.length;r++)a.set(i[r],n),n+=i[r].byteLength;return a},n=function t(){return e(w.dinf,e(w.dref,x))},r=function t(i){return e(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,i.audioobjecttype<<3|i.samplingfrequencyindex>>>1,i.samplingfrequencyindex<<7|i.channelcount<<3,6,1,2]))},y=function t(i){return e(w.hdlr,P[i])},g=function t(i){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,i.duration>>>24&255,i.duration>>>16&255,i.duration>>>8&255,255&i.duration,85,196,0,0]);return i.samplerate&&(n[12]=i.samplerate>>>24&255,n[13]=i.samplerate>>>16&255,n[14]=i.samplerate>>>8&255,n[15]=255&i.samplerate),e(w.mdhd,n)},m=function t(i){return e(w.mdia,g(i),y(i.type),u(i))},o=function t(i){return e(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))},u=function t(i){return e(w.minf,"video"===i.type?e(w.vmhd,U):e(w.smhd,I),n(),_(i))},l=function t(i,n){for(var r=[],a=n.length;a--;)r[a]=T(n[a]);return e.apply(null,[w.moof,o(i)].concat(r))},c=function t(i){for(var n=i.length,r=[];n--;)r[n]=p(i[n]);return e.apply(null,[w.moov,d(4294967295)].concat(r).concat(h(i)))},h=function t(i){for(var n=i.length,r=[];n--;)r[n]=S(i[n]);return e.apply(null,[w.mvex].concat(r))},d=function t(i){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(w.mvhd,n)},v=function t(i){var n=i.samples||[],r=new Uint8Array(4+n.length),a,s;for(s=0;s<n.length;s++)a=n[s].flags,r[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return e(w.sdtp,r)},_=function t(i){return e(w.stbl,b(i),e(w.stts,B),e(w.stsc,R),e(w.stsz,M),e(w.stco,D))},b=function t(i){return e(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?N(i):j(i))},N=function t(i){var n=i.sps||[],r=i.pps||[],a=[],s=[],o;for(o=0;o<n.length;o++)a.push((65280&n[o].byteLength)>>>8),a.push(255&n[o].byteLength),a=a.concat(Array.prototype.slice.call(n[o]));for(o=0;o<r.length;o++)s.push((65280&r[o].byteLength)>>>8),s.push(255&r[o].byteLength),s=s.concat(Array.prototype.slice.call(r[o]));return e(w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&i.width)>>8,255&i.width,(65280&i.height)>>8,255&i.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(w.avcC,new Uint8Array([1,i.profileIdc,i.profileCompatibility,i.levelIdc,255].concat([n.length]).concat(a).concat([r.length]).concat(s))),e(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},j=function t(i){return e(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&i.channelcount)>>8,255&i.channelcount,(65280&i.samplesize)>>8,255&i.samplesize,0,0,0,0,(65280&i.samplerate)>>8,255&i.samplerate,0,0]),r(i))},f=function t(i){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,0,(4278190080&i.duration)>>24,(16711680&i.duration)>>16,(65280&i.duration)>>8,255&i.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&i.width)>>8,255&i.width,0,0,(65280&i.height)>>8,255&i.height,0,0]);return e(w.tkhd,n)},T=function i(n){var r,a,s,o,u,l,c;return r=e(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&n.id)>>24,(16711680&n.id)>>16,(65280&n.id)>>8,255&n.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),l=Math.floor(n.baseMediaDecodeTime/(t+1)),c=Math.floor(n.baseMediaDecodeTime%(t+1)),a=e(w.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c])),u=92,"audio"===n.type?(s=k(n,92),e(w.traf,r,a,s)):(o=v(n),s=k(n,o.length+92),e(w.traf,r,a,s,o))},p=function t(i){return i.duration=i.duration||4294967295,e(w.trak,f(i),m(i))},S=function t(i){var n=new Uint8Array([0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==i.type&&(n[n.length-1]=0),e(w.trex,n)},H=function t(e,i){var n=0,r=0,a=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(a=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|r|a|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&i)>>>24,(16711680&i)>>>16,(65280&i)>>>8,255&i]},V=function t(i,n){var r,a,s,o;for(n+=20+16*(a=i.samples||[]).length,r=H(a,n),o=0;o<a.length;o++)s=a[o],r=r.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return e(w.trun,new Uint8Array(r))},F=function t(i,n){var r,a,s,o;for(n+=20+8*(a=i.samples||[]).length,r=H(a,n),o=0;o<a.length;o++)s=a[o],r=r.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return e(w.trun,new Uint8Array(r))},k=function t(e,i){return"audio"===e.type?F(e,i):V(e,i)};var q={ftyp:a=function t(){return e(w.ftyp,C,E,C,A)},mdat:s=function t(i){return e(w.mdat,i)},moof:l,moov:c,initSegment:function t(e){var i=a(),n=c(e),r;return(r=new Uint8Array(i.byteLength+n.byteLength)).set(i),r.set(n,i.byteLength),r}},z,W,G=function t(e){return e>>>0},X,Y,$,K,Q;$=function t(e){var i={},n;return X(e,["moov","trak"]).reduce(function(t,e){var i,n,r,a,s;return(i=X(e,["tkhd"])[0])?(n=i[0],a=G(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(s=X(e,["mdia","mdhd"])[0])?(r=0===(n=s[0])?12:20,t[a]=G(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),t):null):null},i)},K=function t(e,i){var n,r,a;return n=X(i,["moof","traf"]),r=[].concat.apply([],n.map(function(t){return X(t,["tfhd"]).map(function(i){var n,r,a;return n=G(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),r=e[n]||9e4,(a=(a=X(t,["tfdt"]).map(function(t){var e,i;return e=t[0],i=G(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(i*=Math.pow(2,32),i+=G(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),i})[0])||1/0)/r})})),a=Math.min.apply(null,r),isFinite(a)?a:0},Q=function t(e){var i=X(e,["moov","trak"]),n=[];return i.forEach(function(t){var e=X(t,["mdia","hdlr"]),i=X(t,["tkhd"]);e.forEach(function(t,e){var r=Y(t.subarray(8,12)),a=i[e],s,o,u;"vide"===r&&(u=0===(o=(s=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0))?s.getUint32(12):s.getUint32(20),n.push(u))})}),n};var J={findBox:X=function t(e,i){var n=[],r,a,s,o,u;if(!i.length)return null;for(r=0;r<e.byteLength;)a=G(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),s=Y(e.subarray(r+4,r+8)),o=a>1?r+a:e.byteLength,s===i[0]&&(1===i.length?n.push(e.subarray(r+8,o)):(u=X(e.subarray(r+8,o),i.slice(1))).length&&(n=n.concat(u))),r=o;return n},parseType:Y=function t(e){var i="";return i+=String.fromCharCode(e[0]),i+=String.fromCharCode(e[1]),i+=String.fromCharCode(e[2]),i+=String.fromCharCode(e[3])},timescale:$,startTime:K,videoTrackIds:Q},Z=function t(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),n>-1)},this.trigger=function(e){var i,n,r,a;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){t={}}}};Z.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},Z.prototype.push=function(t){this.trigger("data",t)},Z.prototype.flush=function(t){this.trigger("done",t)};var tt=Z,et,it,nt,rt=function t(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},at=function t(e,i){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=i,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},st,ot,ut=function t(e){var i,n,r=[],a=[];for(r.byteLength=0,i=0;i<e.length;i++)"access_unit_delimiter_rbsp"===(n=e[i]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,a.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return a.length&&(!r.duration||r.duration<=0)&&(r.duration=a[a.length-1].duration),a.push(r),a},lt=function t(e){var i,n,r=[],a=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,a.byteLength=0,a.nalCount=0,a.duration=0,a.pts=e[0].pts,a.dts=e[0].dts,i=0;i<e.length;i++)(n=e[i]).keyFrame?(r.length&&(a.push(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return a.length&&r.duration<=0&&(r.duration=a[a.length-1].duration),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.duration+=r.duration,a.push(r),a},ct=function t(e){var i;return!e[0][0].keyFrame&&e.length>1&&(i=e.shift(),e.byteLength-=i.byteLength,e.nalCount-=i.nalCount,e[0][0].dts=i.dts,e[0][0].pts=i.pts,e[0][0].duration+=i.duration),e},ht=function t(e,i){var n,r,a,s,o,u=i||0,l=[];for(n=0;n<e.length;n++)for(s=e[n],r=0;r<s.length;r++)o=s[r],u+=(a=at(o,u)).size,l.push(a);return l},dt=function t(e){var i,n,r,a,s,o,u=0,l=e.byteLength,c=e.nalCount,h,d=new Uint8Array(l+4*c),p=new DataView(d.buffer);for(i=0;i<e.length;i++)for(a=e[i],n=0;n<a.length;n++)for(s=a[n],r=0;r<s.length;r++)o=s[r],p.setUint32(u,o.data.byteLength),u+=4,d.set(o.data,u),u+=o.data.byteLength;return d},pt=[33,16,5,32,164,27],ft=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],mt=function t(e){for(var i=[];e--;)i.push(0);return i},gt,yt,vt=function t(e){return Object.keys(e).reduce(function(t,i){return t[i]=new Uint8Array(e[i].reduce(function(t,e){return t.concat(e)},[])),t},{})}({96000:[pt,[227,64],mt(154),[56]],88200:[pt,[231],mt(170),[56]],64000:[pt,[248,192],mt(240),[56]],48000:[pt,[255,192],mt(268),[55,148,128],mt(54),[112]],44100:[pt,[255,192],mt(268),[55,163,128],mt(84),[112]],32000:[pt,[255,192],mt(268),[55,234],mt(226),[112]],24000:[pt,[255,192],mt(268),[55,255,128],mt(268),[111,112],mt(126),[224]],16000:[pt,[255,192],mt(268),[55,255,128],mt(268),[111,255],mt(269),[223,108],mt(195),[1,192]],12000:[ft,mt(268),[3,127,248],mt(268),[6,255,240],mt(268),[13,255,224],mt(268),[27,253,128],mt(259),[56]],11025:[ft,mt(268),[3,127,248],mt(268),[6,255,240],mt(268),[13,255,224],mt(268),[27,255,192],mt(268),[55,175,128],mt(108),[112]],8000:[ft,mt(268),[3,121,16],mt(47),[7]]}),_t=9e4,bt,Tt,St,kt,wt,Ct;wt=function t(e,i){return bt(kt(e,i))},Ct=function t(e,i){return Tt(St(e),i)};var Et=bt=function t(e){return 9e4*e},At=Tt=function t(e,i){return e*i},Lt=St=function t(e){return e/9e4},Ot=kt=function t(e,i){return e/i},Pt=wt,Ut=Ct,It=9e4,xt=function t(e){var i,n,r=0;for(i=0;i<e.length;i++)r+=(n=e[i]).data.byteLength;return r},Dt,Rt,Mt,Bt,Nt=function t(e,i,n,r){var a,s=0,o=0,u=0,l=0,c,h;if(i.length&&(a=Pt(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(9e4/(e.samplerate/1024)),n&&r&&(o=a-Math.max(n,r),l=(u=Math.floor(o/s))*s),!(u<1||l>45e3))){for((c=vt[e.samplerate])||(c=i[0].data),h=0;h<u;h++)i.splice(h,0,{data:c});e.baseMediaDecodeTime-=Math.floor(Ut(l,e.samplerate))}},jt=function t(e,i,n){return i.minSegmentDts>=n?e:(i.minSegmentDts=1/0,e.filter(function(t){return t.dts>=n&&(i.minSegmentDts=Math.min(i.minSegmentDts,t.dts),i.minSegmentPts=i.minSegmentDts,!0)}))},Ft=function t(e){var i,n,r=[];for(i=0;i<e.length;i++)n=e[i],r.push({size:n.data.byteLength,duration:1024});return r},Vt=function t(e){var i,n,r=0,a=new Uint8Array(xt(e));for(i=0;i<e.length;i++)n=e[i],a.set(n.data,r),r+=n.data.byteLength;return a},Ht=9e4,qt,zt,Wt,Gt=function t(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Xt=function t(e,i){var n,r,a=e.minSegmentDts;return i||(a-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=a,n=Math.max(0,n),"audio"===e.type&&(n*=r=e.samplerate/9e4,n=Math.floor(n)),n},Yt=function t(e,i){"number"==typeof i.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=i.pts),void 0===e.minSegmentPts?e.minSegmentPts=i.pts:e.minSegmentPts=Math.min(e.minSegmentPts,i.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=i.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,i.pts)),"number"==typeof i.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=i.dts),void 0===e.minSegmentDts?e.minSegmentDts=i.dts:e.minSegmentDts=Math.min(e.minSegmentDts,i.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=i.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,i.dts))},$t=4,Kt=128,Qt,Jt,Zt,te,ee=function t(e){for(var i=0,n={payloadType:-1,payloadSize:0},r=0,a=0;i<e.byteLength&&128!==e[i];){for(;255===e[i];)r+=255,i++;for(r+=e[i++];255===e[i];)a+=255,i++;if(a+=e[i++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=a,n.payload=e.subarray(i,i+a);break}i+=a,r=0,a=0}return n},ie=function t(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},ne=function t(e,i){var n=[],r,a,s,o;if(!(64&i[0]))return n;for(a=31&i[0],r=0;r<a;r++)o={type:3&i[(s=3*r)+2],pts:e},4&i[s+2]&&(o.ccData=i[s+3]<<8|i[s+4],n.push(o));return n},re=function t(e){for(var i=e.byteLength,n=[],r=1,a,s;r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;a=i-n.length,s=new Uint8Array(a);var o=0;for(r=0;r<a;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=e[o];return s},ae=4,se=function t(){t.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new de(0,0),new de(0,1),new de(1,0),new de(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};se.prototype=new tt,se.prototype.push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=ee(t.escapedRBSP)).payloadType===ae&&(i=ie(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=ne(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},se.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},se.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},se.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},se.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},se.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};var oe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ue=function t(e){return null===e?"":(e=oe[e]||e,String.fromCharCode(e))},le=14,ce=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],he=function t(){for(var e=[],i=15;i--;)e.push("");return e},de=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=he();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=he();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=he()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))a=ue((n=(3&n)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ue((n=(3&n)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=ce.indexOf(7968&e);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(t.pts,s)),s!==this.row_&&(this.clearFormatting(t.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=ue(n),a+=ue(r),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};de.prototype=new tt,de.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){try{return t.trim()}catch(t){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},de.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=he(),this.nonDisplayed_=he(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},de.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},de.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},de.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},de.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},de.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},de.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},de.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},de.prototype.isNormalChar=function(t){return t>=32&&t<=127},de.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=he(),this.displayed_=he()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},de.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,i)},de.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},de.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},de.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},de.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},de.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var pe={CaptionStream:se,Cea608Stream:de},fe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},me=8589934592,ge=4294967296,ye=function t(e,i){var n=1;for(e>i&&(n=-1);Math.abs(i-e)>ge;)e+=n*me;return e},ve=function t(e){var i,n;t.prototype.init.call(this),this.type_=e,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=ye(t.dts,n),t.pts=ye(t.pts,n),i=t.dts,this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.discontinuity=function(){
n=void 0,i=void 0}};ve.prototype=new tt;var _e=ve,be=ye,Te=function t(e,i,n){var r,a="";for(r=i;r<n;r++)a+="%"+("00"+e[r].toString(16)).slice(-2);return a},Se=function t(e,i,n){return decodeURIComponent(Te(e,i,n))},ke=function t(e,i,n){return unescape(Te(e,i,n))},we=function t(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ce={TXXX:function t(e){var i;if(3===e.data[0]){for(i=1;i<e.data.length;i++)if(0===e.data[i]){e.description=Se(e.data,1,i),e.value=Se(e.data,i+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function t(e){var i;if(3===e.data[0])for(i=1;i<e.data.length;i++)if(0===e.data[i]){e.description=Se(e.data,1,i),e.url=Se(e.data,i+1,e.data.length);break}},PRIV:function t(e){var i;for(i=0;i<e.data.length;i++)if(0===e.data[i]){e.owner=ke(e.data,0,i);break}e.privateData=e.data.subarray(i+1),e.data=e.privateData}},Ee;(Ee=function t(e){var i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,r=[],a=0,s;if(Ee.prototype.init.call(this),this.dispatchType=fe.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(s=0;s<i.descriptor.length;s++)this.dispatchType+=("00"+i.descriptor[s].toString(16)).slice(-2);this.push=function(t){var e,s,o,u,l,c;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(r.push(t),a+=t.data.byteLength,1===r.length&&(n=we(t.data.subarray(6,10)),n+=10),!(a<n)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<n;)e.data.set(r[0].data.subarray(0,n-l),l),l+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();s=10,64&e.data[5]&&(s+=4,s+=we(e.data.subarray(10,14)),n-=we(e.data.subarray(16,20)));do{if((o=we(e.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((u={id:c=String.fromCharCode(e.data[s],e.data[s+1],e.data[s+2],e.data[s+3]),data:e.data.subarray(s+10,s+o+10)}).key=u.id,Ce[u.id]&&(Ce[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var h=u.data,d=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;d*=4,d+=3&h[7],u.timeStamp=d,void 0===e.pts&&void 0===e.dts&&(e.pts=u.timeStamp,e.dts=u.timeStamp),this.trigger("timestamp",u)}e.frames.push(u),s+=10,s+=o}while(s<n);this.trigger("data",e)}}}).prototype=new tt;var Ae=Ee,Le=_e,Oe,Pe,Ue,Ie=188,xe=71;(Oe=function t(){var e=new Uint8Array(188),i=0;Oe.prototype.init.call(this),this.push=function(t){var n=0,r=188,a;for(i?((a=new Uint8Array(t.byteLength+i)).set(e.subarray(0,i)),a.set(t,i),i=0):a=t;r<a.byteLength;)71!==a[n]||71!==a[r]?(n++,r++):(this.trigger("data",a.subarray(n,r)),n+=188,r+=188);n<a.byteLength&&(e.set(a.subarray(n),0),i=a.byteLength-n)},this.flush=function(){188===i&&71===e[0]&&(this.trigger("data",e),i=0),this.trigger("done")}}).prototype=new tt,(Pe=function t(){var e,i,n,r;Pe.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function t(e,r){var a=0;r.payloadUnitStartIndicator&&(a+=e[a]+1),"pat"===r.type?i(e.subarray(a),r):n(e.subarray(a),r)},i=function t(e,i){i.section_number=e[7],i.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],i.pmtPid=r.pmtPid},n=function t(e,i){var n,a,s,o;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},a=3+(n=(15&e[1])<<8|e[2])-4,o=12+(s=(15&e[10])<<8|e[11]);o<a;){var u=e[o],l=(31&e[o+1])<<8|e[o+2];u===fe.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=l:u===fe.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=l:u===fe.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][l]=u),o+=5+((15&e[o+3])<<8|e[o+4])}i.programMapTable=r.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=fe.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=fe.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new tt,Pe.STREAM_TYPES={h264:27,adts:15},(Ue=function t(){var e=this,i={data:[],size:0},n={data:[],size:0},r={data:[],size:0},a=function t(e,i){var n;i.packetLength=6+(e[4]<<8|e[5]),i.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(i.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,i.pts*=4,i.pts+=(6&e[13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,i.dts*=4,i.dts+=(6&e[18])>>>1)),i.data=e.subarray(9+e[8])},s=function t(i,n,r){var s=new Uint8Array(i.size),o={type:n},u=0,l=0,c=!1,h;if(i.data.length&&!(i.size<9)){for(o.trackId=i.data[0].pid,u=0;u<i.data.length;u++)h=i.data[u],s.set(h.data,l),l+=h.data.byteLength;a(s,o),c="video"===n||o.packetLength<=i.size,(r||c)&&(i.size=0,i.data.length=0),c&&e.trigger("data",o)}};Ue.prototype.init.call(this),this.push=function(t){({pat:function t(){},pes:function e(){var a,o;switch(t.streamType){case fe.H264_STREAM_TYPE:case fe.H264_STREAM_TYPE:a=i,o="video";break;case fe.ADTS_STREAM_TYPE:a=n,o="audio";break;case fe.METADATA_STREAM_TYPE:a=r,o="timed-metadata";break;default:return}t.payloadUnitStartIndicator&&s(a,o,!0),a.data.push(t),a.size+=t.data.byteLength},pmt:function i(){var n={type:"metadata",tracks:[]},r=t.programMapTable;null!==r.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.video,codec:"avc",type:"video"}),null!==r.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.audio,codec:"adts",type:"audio"}),e.trigger("data",n)}})[t.type]()},this.flush=function(){s(i,"video"),s(n,"audio"),s(r,"timed-metadata"),this.trigger("done")}}).prototype=new tt;var De={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Oe,TransportParseStream:Pe,ElementaryStream:Ue,TimestampRolloverStream:Le,CaptionStream:pe.CaptionStream,Cea608Stream:pe.Cea608Stream,MetadataStream:Ae};for(var Re in fe)fe.hasOwnProperty(Re)&&(De[Re]=fe[Re]);var Me=De,Be,Ne=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Be=function t(){var e;Be.prototype.init.call(this),this.push=function(t){var i=0,n=0,r,a,s,o,u,l;if("audio"===t.type)for(e?(o=e,(e=new Uint8Array(o.byteLength+t.data.byteLength)).set(o),e.set(t.data,o.byteLength)):e=t.data;i+5<e.length;)if(255===e[i]&&240==(246&e[i+1])){if(a=2*(1&~e[i+1]),r=(3&e[i+3])<<11|e[i+4]<<3|(224&e[i+5])>>5,l=9e4*(u=1024*(1+(3&e[i+6])))/Ne[(60&e[i+2])>>>2],s=i+r,e.byteLength<s)return;if(this.trigger("data",{pts:t.pts+n*l,dts:t.dts+n*l,sampleCount:u,audioobjecttype:1+(e[i+2]>>>6&3),channelcount:(1&e[i+2])<<2|(192&e[i+3])>>>6,samplerate:Ne[(60&e[i+2])>>>2],samplingfrequencyindex:(60&e[i+2])>>>2,samplesize:16,data:e.subarray(i+7+a,s)}),e.byteLength===s)return void(e=void 0);n++,e=e.subarray(s)}else i++},this.flush=function(){this.trigger("done")}}).prototype=new tt;var je=Be,Fe,Ve=Fe=function t(e){var i=e.byteLength,n=0,r=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+r},this.loadWord=function(){var t=e.byteLength-i,a=new Uint8Array(4),s=Math.min(4,i);if(0===s)throw new Error("no bytes available");a.set(e.subarray(t,t+s)),n=new DataView(a.buffer).getUint32(0),r=8*s,i-=s},this.skipBits=function(t){var e;r>t?(n<<=t,r-=t):(t-=r,t-=8*(e=Math.floor(t/8)),i-=e,this.loadWord(),n<<=t,r-=t)},this.readBits=function(t){var e=Math.min(r,t),a=n>>>32-e;return(r-=e)>0?n<<=e:i>0&&this.loadWord(),(e=t-e)>0?a<<e|this.readBits(e):a},this.skipLeadingZeros=function(){var t;for(t=0;t<r;++t)if(0!=(n&2147483648>>>t))return n<<=t,r-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},He,qe,ze;(qe=function t(){var e=0,i,n;qe.prototype.init.call(this),this.push=function(t){var r;for(n?((r=new Uint8Array(n.byteLength+t.data.byteLength)).set(n),r.set(t.data,n.byteLength),n=r):n=t.data;e<n.byteLength-3;e++)if(1===n[e+2]){i=e+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}e+3!==i-2&&this.trigger("data",n.subarray(e+3,i-2));do{i++}while(1!==n[i]&&i<n.length);e=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}this.trigger("data",n.subarray(e+3,i-2)),e=i-2,i+=3;break;default:i+=3}n=n.subarray(e),i-=e,e=0},this.flush=function(){n&&n.byteLength>3&&this.trigger("data",n.subarray(e+3)),n=null,e=0,this.trigger("done")}}).prototype=new tt,ze={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(He=function t(){var e=new qe,i,n,r,a,s,o,u;He.prototype.init.call(this),i=this,this.push=function(t){"video"===t.type&&(n=t.trackId,r=t.pts,a=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:n,pts:r,dts:a,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=s(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=s(t.subarray(1)),e.config=o(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",e)}),e.on("done",function(){i.trigger("done")}),this.flush=function(){e.flush()},u=function t(e,i){var n=8,r=8,a,s;for(a=0;a<e;a++)0!==r&&(r=(n+(s=i.readExpGolomb())+256)%256),n=0===r?n:r},s=function t(e){for(var i=e.byteLength,n=[],r=1,a,s;r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;a=i-n.length,s=new Uint8Array(a);var o=0;for(r=0;r<a;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=e[o];return s},o=function t(e){var i=0,n=0,r=0,a=0,s=1,o,l,c,h,d,p,f,m,g,y,v,_,b,T;if(l=(o=new Ve(e)).readUnsignedByte(),h=o.readUnsignedByte(),c=o.readUnsignedByte(),o.skipUnsignedExpGolomb(),ze[l]&&(3===(d=o.readUnsignedExpGolomb())&&o.skipBits(1),o.skipUnsignedExpGolomb(),o.skipUnsignedExpGolomb(),o.skipBits(1),o.readBoolean()))for(v=3!==d?8:12,T=0;T<v;T++)o.readBoolean()&&u(T<6?16:64,o);if(o.skipUnsignedExpGolomb(),0===(p=o.readUnsignedExpGolomb()))o.readUnsignedExpGolomb();else if(1===p)for(o.skipBits(1),o.skipExpGolomb(),o.skipExpGolomb(),f=o.readUnsignedExpGolomb(),T=0;T<f;T++)o.skipExpGolomb();if(o.skipUnsignedExpGolomb(),o.skipBits(1),m=o.readUnsignedExpGolomb(),g=o.readUnsignedExpGolomb(),0===(y=o.readBits(1))&&o.skipBits(1),o.skipBits(1),o.readBoolean()&&(i=o.readUnsignedExpGolomb(),n=o.readUnsignedExpGolomb(),r=o.readUnsignedExpGolomb(),a=o.readUnsignedExpGolomb()),o.readBoolean()&&o.readBoolean()){switch(b=o.readUnsignedByte()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()]}_&&(s=_[0]/_[1])}return{profileIdc:l,levelIdc:c,profileCompatibility:h,width:Math.ceil((16*(m+1)-2*i-2*n)*s),height:(2-y)*(g+1)*16-2*r-2*a}}}).prototype=new tt;var We={H264Stream:He,NalByteStream:qe},Ge=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Xe,Ye=function t(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},$e=function t(e,i,n){var r,a="";for(r=i;r<n;r++)a+="%"+("00"+e[r].toString(16)).slice(-2);return a},Ke=function t(e,i,n){return unescape($e(e,i,n))},Qe,Je,Ze,ti,ei,ii=function t(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ni=function t(e,i){var n=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],r,a;return(16&e[i+5])>>4?n+20:n+10},ri=function t(e,i){var n=(224&e[i+5])>>5,r=e[i+4]<<3,a;return 6144&e[i+3]|r|n},ai=function t(e,i){return e[i]==="I".charCodeAt(0)&&e[i+1]==="D".charCodeAt(0)&&e[i+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[i]&&240==(240&e[i+1])?"audio":null},si=function t(e){for(var i=0;i+5<e.length;){if(255===e[i]&&240==(246&e[i+1]))return Ge[(60&e[i+2])>>>2];i++}return null},oi=function t(e){var i,n,r,a;i=10,64&e[5]&&(i+=4,i+=Ye(e.subarray(10,14)));do{if((n=Ye(e.subarray(i+4,i+8)))<1)return null;if("PRIV"===(a=String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]))){r=e.subarray(i+10,i+n+10);for(var s=0;s<r.byteLength;s++)if(0===r[s]){var o;if("com.apple.streaming.transportStreamTimestamp"===Ke(r,0,s)){var u=r.subarray(s+1),l=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;return l*=4,l+=3&u[7]}break}}i+=10,i+=n}while(i<e.byteLength);return null},ui;(ui=function t(){var e=new Uint8Array,i=0;ui.prototype.init.call(this),this.setTimestamp=function(t){i=t},this.push=function(t){var n=0,r=0,a,s,o,u;for(e.length?(u=e.length,(e=new Uint8Array(t.byteLength+u)).set(e.subarray(0,u)),e.set(t,u)):e=t;e.length-r>=3;)if(e[r]!=="I".charCodeAt(0)||e[r+1]!=="D".charCodeAt(0)||e[r+2]!=="3".charCodeAt(0))if(255!=(255&e[r])||240!=(240&e[r+1]))r++;else{if(e.length-r<7)break;if(r+(n=ri(e,r))>e.length)break;o={type:"audio",data:e.subarray(r,r+n),pts:i,dts:i},this.trigger("data",o),r+=n}else{if(e.length-r<10)break;if(r+(n=ni(e,r))>e.length)break;s={type:"timed-metadata",data:e.subarray(r,r+n)},this.trigger("data",s),r+=n}a=e.length-r,e=a>0?e.subarray(r):new Uint8Array}}).prototype=new tt;var li=ui,ci=We.H264Stream,hi=ii,di=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],pi=["width","height","profileIdc","levelIdc","profileCompatibility"],fi,mi,gi,yi,vi=function t(e,i){var n;if(e.length!==i.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==i[n])return!1;return!0};(mi=function t(e,i){var n=[],r=0,a=0,s=0,o=1/0;i=i||{},mi.prototype.init.call(this),this.push=function(t){Yt(e,t),e&&di.forEach(function(i){e[i]=t[i]}),n.push(t)},this.setEarliestDts=function(t){a=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var t,u,l,c;0!==n.length?(t=jt(n,e,a),e.baseMediaDecodeTime=Xt(e,i.keepOriginalTimestamps),Nt(e,t,s,o),e.samples=Ft(t),l=q.mdat(Vt(t)),n=[],u=q.moof(r,[e]),c=new Uint8Array(u.byteLength+l.byteLength),r++,c.set(u),c.set(l,u.byteLength),Gt(e),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")}}).prototype=new tt,(fi=function t(e,i){var n=0,r=[],a=[],s,o;i=i||{},fi.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Yt(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||s||(s=t.config,e.sps=[t.data],pi.forEach(function(t){e[t]=s[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||o||(o=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){for(var t,s,o,u,l,c;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(t=ut(r),(o=lt(t))[0][0].keyFrame||((s=this.getGopForFusion_(r[0],e))?(o.unshift(s),o.byteLength+=s.byteLength,o.nalCount+=s.nalCount,o.pts=s.pts,o.dts=s.dts,o.duration+=s.duration):o=ct(o)),a.length){var h;if(!(h=i.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Gt(e),o=h}Yt(e,o),e.samples=ht(o),l=q.mdat(dt(o)),e.baseMediaDecodeTime=Xt(e,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=q.moof(n,[e]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){Gt(e),s=void 0,o=void 0},this.getGopForFusion_=function(t){var i=45e3,n=1e4,r=1/0,a,s,o,u,l;for(l=0;l<this.gopCache_.length;l++)o=(u=this.gopCache_[l]).gop,e.pps&&vi(e.pps[0],u.pps[0])&&e.sps&&vi(e.sps[0],u.sps[0])&&(o.dts<e.timelineStartInfo.dts||(a=t.dts-o.dts-o.duration)>=-1e4&&a<=45e3&&(!s||r>a)&&(s=u,r=a));return s?s.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,s,o,u,l;for(s=t.byteLength,o=t.nalCount,u=t.duration,e=i=0;e<a.length&&i<t.length&&(n=a[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,s-=r.byteLength,o-=r.nalCount,u-=r.duration);return 0===i?t:i===t.length?null:((l=t.slice(i)).byteLength=s,l.duration=u,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,i,n,r,s,o,u;for(e=a.length-1,i=t.length-1,s=null,o=!1;e>=0&&i>=0;){if(n=a[e],r=t[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?e--:(e===a.length-1&&(s=i),i--)}if(!o&&null===s)return null;if(0===(u=o?i:s))return t;var l=t.slice(u),c=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){a=t}}).prototype=new tt,(yi=function t(e,i){this.numberOfTracks=0,this.metadataStream=i,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,yi.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new tt,yi.prototype.flush=function(t){var e=0,i={captions:[],captionStreams:{},metadata:[],info:{}},n,r,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,pi.forEach(function(t){i.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,di.forEach(function(t){i.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?i.type=this.pendingTracks[0].type:i.type="combined",this.emittedTracks+=this.pendingTracks.length,a=q.initSegment(this.pendingTracks),i.initSegment=new Uint8Array(a.byteLength),i.initSegment.set(a),i.data=new Uint8Array(this.pendingBytes),o=0;o<this.pendingBoxes.length;o++)i.data.set(this.pendingBoxes[o],e),e+=this.pendingBoxes[o].byteLength;for(o=0;o<this.pendingCaptions.length;o++)(n=this.pendingCaptions[o]).startTime=n.startPts,this.keepOriginalTimestamps||(n.startTime-=s),n.startTime/=9e4,n.endTime=n.endPts,this.keepOriginalTimestamps||(n.endTime-=s),n.endTime/=9e4,i.captionStreams[n.stream]=!0,i.captions.push(n);for(o=0;o<this.pendingMetadata.length;o++)(r=this.pendingMetadata[o]).cueTime=r.pts,this.keepOriginalTimestamps||(r.cueTime-=s),r.cueTime/=9e4,i.metadata.push(r);i.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",i),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(gi=function t(e){var i=this,n=!0,r,a;gi.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new Me.MetadataStream,t.aacStream=new li,t.audioTimestampRolloverStream=new Me.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Me.TimestampRolloverStream("timed-metadata"),t.adtsStream=new je,t.coalesceStream=new yi(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(n){"timed-metadata"!==n.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new mi(a,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="ts",t.metadataStream=new Me.MetadataStream,t.packetStream=new Me.TransportPacketStream,t.parseStream=new Me.TransportParseStream,t.elementaryStream=new Me.ElementaryStream,t.videoTimestampRolloverStream=new Me.TimestampRolloverStream("video"),t.audioTimestampRolloverStream=new Me.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Me.TimestampRolloverStream("timed-metadata"),t.adtsStream=new je,t.h264Stream=new ci,t.captionStream=new Me.CaptionStream,t.coalesceStream=new yi(e,t.metadataStream),t.headOfPipeline=t.packetStream,t.packetStream.pipe(t.parseStream).pipe(t.elementaryStream),t.elementaryStream.pipe(t.videoTimestampRolloverStream).pipe(t.h264Stream),t.elementaryStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.elementaryStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.h264Stream.pipe(t.captionStream).pipe(t.coalesceStream),t.elementaryStream.on("data",function(n){var s;if("metadata"===n.type){for(s=n.tracks.length;s--;)r||"video"!==n.tracks[s].type?a||"audio"!==n.tracks[s].type||((a=n.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(r=n.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;r&&!t.videoSegmentStream&&(t.coalesceStream.numberOfTracks++,t.videoSegmentStream=new fi(r,e),t.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,t.audioSegmentStream.setEarliestDts(e.dts))}),t.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),t.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&t.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),t.h264Stream.pipe(t.videoSegmentStream).pipe(t.coalesceStream)),a&&!t.audioSegmentStream&&(t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new mi(a,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=t),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,Gt(a),e.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=t),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),r&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[],i.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Gt(r),i.captionStream.reset(),e.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=t)),i.timedMetadataTimestampRolloverStream&&i.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(n){var e=hi(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new tt;var _i={Transmuxer:gi,VideoSegmentStream:fi,AudioSegmentStream:mi,AUDIO_PROPERTIES:di,VIDEO_PROPERTIES:pi},bi,Ti,Si=J.parseType,ki=function t(e){return new Date(1e3*e-20828448e5)},wi=function t(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Ci=function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],r,a;for(r=0;r+4<e.length;r+=a)if(a=i.getUint32(r),r+=4,a<=0)n.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[r]){case 1:n.push("slice_layer_without_partitioning_rbsp");break;case 5:n.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:n.push("sei_rbsp");break;case 7:n.push("seq_parameter_set_rbsp");break;case 8:n.push("pic_parameter_set_rbsp");break;case 9:n.push("access_unit_delimiter_rbsp");break;default:n.push("UNKNOWN NAL - "+e[r]&31)}return n},Ei={avc1:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:i.getUint16(6),width:i.getUint16(24),height:i.getUint16(26),horizresolution:i.getUint16(28)+i.getUint16(30)/16,vertresolution:i.getUint16(32)+i.getUint16(34)/16,frameCount:i.getUint16(40),depth:i.getUint16(74),config:bi(e.subarray(78,e.byteLength))}},avcC:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},r=31&e[5],a,s,o,u;for(o=6,u=0;u<r;u++)s=i.getUint16(o),o+=2,n.sps.push(new Uint8Array(e.subarray(o,o+s))),o+=s;for(a=e[o],o++,u=0;u<a;u++)s=i.getUint16(o),o+=2,n.pps.push(new Uint8Array(e.subarray(o,o+s))),o+=s;return n},btrt:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:i.getUint32(0),maxBitrate:i.getUint32(4),avgBitrate:i.getUint32(8)}},esds:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function t(e){for(var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:Si(e.subarray(0,4)),minorVersion:i.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(Si(e.subarray(r,r+4))),r+=4;return n},dinf:function t(e){return{boxes:bi(e)}},dref:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:bi(e.subarray(8))}},hdlr:function t(e){var i,n={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Si(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}n.name+=String.fromCharCode(e[r])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function t(e){return{byteLength:e.byteLength,nals:Ci(e)}},mdhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r,a={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===a.version?(n+=4,a.creationTime=ki(i.getUint32(n)),n+=8,a.modificationTime=ki(i.getUint32(n)),n+=4,a.timescale=i.getUint32(n),n+=8,a.duration=i.getUint32(n)):(a.creationTime=ki(i.getUint32(n)),n+=4,a.modificationTime=ki(i.getUint32(n)),n+=4,a.timescale=i.getUint32(n),n+=4,a.duration=i.getUint32(n)),n+=4,r=i.getUint16(n),a.language+=String.fromCharCode(96+(r>>10)),a.language+=String.fromCharCode(96+((992&r)>>5)),a.language+=String.fromCharCode(96+(31&r)),a},mdia:function t(e){return{boxes:bi(e)}},mfhd:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function t(e){return{boxes:bi(e)}},mp4a:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:i.getUint16(6),channelcount:i.getUint16(16),samplesize:i.getUint16(18),samplerate:i.getUint16(24)+i.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=bi(e.subarray(28))[0]),n},moof:function t(e){return{boxes:bi(e)}},moov:function t(e){return{boxes:bi(e)}},mvex:function t(e){return{boxes:bi(e)}},mvhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=ki(i.getUint32(n)),n+=8,r.modificationTime=ki(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=8,r.duration=i.getUint32(n)):(r.creationTime=ki(i.getUint32(n)),n+=4,r.modificationTime=ki(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=4,r.duration=i.getUint32(n)),n+=4,r.rate=i.getUint16(n)+i.getUint16(n+2)/16,n+=4,r.volume=i.getUint8(n)+i.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=i.getUint32(n),r},pdin:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:i.getUint32(4),initialDelay:i.getUint32(8)}},sdtp:function t(e){var i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n;for(n=4;n<e.byteLength;n++)i.samples.push({dependsOn:(48&e[n])>>4,isDependedOn:(12&e[n])>>2,hasRedundancy:3&e[n]});return i},sidx:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22),a;for(a=24;r;a+=12,r--)n.references.push({referenceType:(128&e[a])>>>7,referencedSize:2147483647&i.getUint32(a),subsegmentDuration:i.getUint32(a+4),startsWithSap:!!(128&e[a+8]),sapType:(112&e[a+8])>>>4,sapDeltaTime:268435455&i.getUint32(a+8)});return n},smhd:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function t(e){return{boxes:bi(e)}},stco:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4),a;for(a=8;r;a+=4,r--)n.chunkOffsets.push(i.getUint32(a));return n},stsc:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},a;for(a=8;n;a+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(a),samplesPerChunk:i.getUint32(a+4),sampleDescriptionIndex:i.getUint32(a+8)});return r},
stsd:function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:bi(e.subarray(8))}},stsz:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]},r;for(r=12;r<e.byteLength;r+=4)n.entries.push(i.getUint32(r));return n},stts:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4),a;for(a=8;r;a+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(a),sampleDelta:i.getUint32(a+4)});return n},styp:function t(e){return Ei.ftyp(e)},tfdt:function t(e){var i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===i.version&&(i.baseMediaDecodeTime*=Math.pow(2,32),i.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),i},tfhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],u=32&n.flags[2],l=65536&n.flags[0],c=131072&n.flags[0],h;return h=8,r&&(h+=4,n.baseDataOffset=i.getUint32(12),h+=4),a&&(n.sampleDescriptionIndex=i.getUint32(h),h+=4),s&&(n.defaultSampleDuration=i.getUint32(h),h+=4),o&&(n.defaultSampleSize=i.getUint32(h),h+=4),u&&(n.defaultSampleFlags=i.getUint32(h)),l&&(n.durationIsEmpty=!0),!r&&c&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=ki(i.getUint32(n)),n+=8,r.modificationTime=ki(i.getUint32(n)),n+=4,r.trackId=i.getUint32(n),n+=4,n+=8,r.duration=i.getUint32(n)):(r.creationTime=ki(i.getUint32(n)),n+=4,r.modificationTime=ki(i.getUint32(n)),n+=4,r.trackId=i.getUint32(n),n+=4,n+=4,r.duration=i.getUint32(n)),n+=4,n+=8,r.layer=i.getUint16(n),n+=2,r.alternateGroup=i.getUint16(n),n+=2,r.volume=i.getUint8(n)+i.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=i.getUint16(n)+i.getUint16(n+2)/16,n+=4,r.height=i.getUint16(n)+i.getUint16(n+2)/16,r},traf:function t(e){return{boxes:bi(e)}},trak:function t(e){return{boxes:bi(e)}},trex:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4),defaultSampleDescriptionIndex:i.getUint32(8),defaultSampleDuration:i.getUint32(12),defaultSampleSize:i.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:i.getUint16(22)}},trun:function t(e){var i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],u=4&i.flags[1],l=8&i.flags[1],c=n.getUint32(4),h=8,d;for(r&&(i.dataOffset=n.getInt32(h),h+=4),a&&c&&(d={flags:wi(e.subarray(h,h+4))},h+=4,s&&(d.duration=n.getUint32(h),h+=4),o&&(d.size=n.getUint32(h),h+=4),l&&(d.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(d),c--);c--;)d={},s&&(d.duration=n.getUint32(h),h+=4),o&&(d.size=n.getUint32(h),h+=4),u&&(d.flags=wi(e.subarray(h,h+4)),h+=4),l&&(d.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(d);return i},"url ":function t(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function t(e){var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:i.getUint16(4),opcolor:new Uint16Array([i.getUint16(6),i.getUint16(8),i.getUint16(10)])}}},Ai={inspect:bi=function t(e){for(var i=0,n=[],r,a,s,o,u,l=new ArrayBuffer(e.length),c=new Uint8Array(l),h=0;h<e.length;++h)c[h]=e[h];for(r=new DataView(l);i<e.byteLength;)a=r.getUint32(i),s=Si(e.subarray(i+4,i+8)),o=a>1?i+a:e.byteLength,(u=(Ei[s]||function(t){return{data:t}})(e.subarray(i+8,o))).size=a,u.type=s,n.push(u),i=o;return n},textify:Ti=function t(e,i){var n;return i=i||0,n=new Array(2*i+1).join(" "),e.map(function(t,e){return n+t.type+"\n"+Object.keys(t).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(e){var i=n+"  "+e+": ",r=t[e];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?i+"<"+a.join("").slice(1)+">":i+"<\n"+a.map(function(t){return n+"  "+t}).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map(function(t,e){return 0===e?t:n+"  "+t}).join("\n")}).join("\n")+(t.boxes?"\n"+Ti(t.boxes,i+1):"")}).join("\n")},parseTfdt:Ei.tfdt,parseHdlr:Ei.hdlr,parseTfhd:Ei.tfhd,parseTrun:Ei.trun},Li=re,Oi=pe.CaptionStream,Pi=function t(e,i){for(var n=e,r=0;r<i.length;r++){var a=i[r];if(n<a.size)return a;n-=a.size}return null},Ui=function t(e,i,n){var r=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],s,o,u,l;for(o=0;o+4<e.length;o+=u)if(u=r.getUint32(o),o+=4,!(u<=0))switch(31&e[o]){case 6:var c=e.subarray(o+1,o+1+u),h=Pi(o,i);s={nalUnitType:"sei_rbsp",size:u,data:c,escapedRBSP:Li(c),trackId:n},h?(s.pts=h.pts,s.dts=h.dts,l=h):(s.pts=l.pts,s.dts=l.dts),a.push(s)}return a},Ii=function t(e,i,n){var r=i,a=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,u=[];return e.forEach(function(t){var e,i=Ai.parseTrun(t).samples;i.forEach(function(t){void 0===t.duration&&(t.duration=a),void 0===t.size&&(t.size=s),t.trackId=o,t.dts=r,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=r+t.compositionTimeOffset,r+=t.duration}),u=u.concat(i)}),u},xi=function t(e,i){var n=J.findBox(e,["moof","traf"]),r=J.findBox(e,["mdat"]),a={},s=[];return r.forEach(function(t,e){var i=n[e];s.push({mdat:t,traf:i})}),s.forEach(function(t){var e=t.mdat,n=t.traf,r=J.findBox(n,["tfhd"]),s=Ai.parseTfhd(r[0]),o=s.trackId,u=J.findBox(n,["tfdt"]),l=u.length>0?Ai.parseTfdt(u[0]).baseMediaDecodeTime:0,c=J.findBox(n,["trun"]),h,d;i===o&&c.length>0&&(h=Ii(c,l,s),d=Ui(e,h,o),a[o]||(a[o]=[]),a[o]=a[o].concat(d))}),a},Di=function t(e,i,n){var r;return i?{seiNals:(r=xi(e,i))[i],timescale:n}:null},Ri,Mi=function t(){var e=!1,i,n,r,a,s;this.isInitialized=function(){return e},this.init=function(){i=new Oi,e=!0,i.on("data",function(t){t.startTime=t.startPts/a,t.endTime=t.endPts/a,s.captions.push(t),s.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length)&&(r!==t[0]||a!==e[r])},this.parse=function(t,e,i){var o;if(!this.isInitialized())return null;if(!e||!i)return null;if(this.isNewInit(e,i))r=e[0],a=i[r];else if(!r||!a)return n.push(t),null;for(;n.length>0;){var u=n.shift();this.parse(u,e,i)}return null!==(o=Di(t,r,a))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),s):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){i.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;i.flush()},this.clearParsedCaptions=function(){s.captions=[],s.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;i.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){n=[],r=null,a=null,s?this.clearParsedCaptions():s={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Bi={generator:q,probe:J,Transmuxer:_i.Transmuxer,AudioSegmentStream:_i.AudioSegmentStream,VideoSegmentStream:_i.VideoSegmentStream,CaptionParser:Mi},Ni=function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},ji=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Fi=function t(e,i){i.on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),i.captionStream&&i.captionStream.on("data",function(t){e.postMessage({action:"caption",data:t})}),i.on("done",function(t){e.postMessage({action:"done"})}),i.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})})},Vi=function(){function t(e,i){Ni(this,t),this.options=i||{},this.self=e,this.init()}return ji(t,[{key:"init",value:function t(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Bi.Transmuxer(this.options),Fi(this.self,this.transmuxer)}},{key:"push",value:function t(e){var i=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(i)}},{key:"reset",value:function t(){this.init()}},{key:"setTimestampOffset",value:function t(e){var i=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*i))}},{key:"setAudioAppendStart",value:function t(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function t(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function t(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function t(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),t}(),Hi,qi;return new function t(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Vi(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new Vi(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(i)}()}),qp={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},zp=function t(e){return e.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,i){var n,r;return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})},Wp=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i={codecCount:0},n=void 0;return i.codecCount=e.split(",").length,i.codecCount=i.codecCount||2,(n=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e))&&(i.videoCodec=n[2],i.videoObjectTypeIndicator=n[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),i.audioProfile=i.audioProfile&&i.audioProfile[2],i},Gp=function t(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return zp([t])[0]})},Xp=function t(e,i,n){return e+"/"+i+'; codecs="'+n.filter(function(t){return!!t}).join(", ")+'"'},Yp=function t(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"},$p=function t(e){var i=e.attributes||{};return i.CODECS?Wp(i.CODECS):qp},Kp=function t(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var n=e.mediaGroups.AUDIO[i];if(!n)return null;for(var r in n){var a=n[r];if(a.default&&a.playlists)return Wp(a.playlists[0].attributes.CODECS).audioProfile}return null},Qp=function t(e,i){var n=Yp(i),r=$p(i),a=i.attributes||{},s=!0,o=!1;if(!i)return[];if(e.mediaGroups.AUDIO&&a.AUDIO){var u=e.mediaGroups.AUDIO[a.AUDIO];if(u)for(var l in o=!0,s=!1,u)if(!u[l].uri&&!u[l].playlists){s=!0;break}}o&&!r.audioProfile&&(s||(r.audioProfile=Kp(e,a.AUDIO)),r.audioProfile||(ws.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=qp.audioProfile));var c={};r.videoCodec&&(c.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(c.audio="mp4a.40."+r.audioProfile);var h=Xp("audio",n,[c.audio]),d=Xp("video",n,[c.video]),p=Xp("video",n,[c.video,c.audio]);return o?!s&&c.video?[d,h]:s||c.video?[p,h]:[h,h]:c.video?[p]:[h]},Jp=function t(e){var i={type:"",parameters:{}},n=e.trim().split(";");return i.type=n.shift().trim(),n.forEach(function(t){var e=t.trim().split("=");if(e.length>1){var n=e[0].replace(/"/g,"").trim(),r=e[1].replace(/"/g,"").trim();i.parameters[n]=r}}),i},Zp=function t(e){return/mp4a\.\d+.\d+/i.test(e)},tf=function t(e){return/avc1\.[\da-f]+/i.test(e)},ef=function t(e,i,n){if(null==i||!e.length)return[];var r=Math.ceil(9e4*(i-n+3)),a=void 0;for(a=0;a<e.length&&!(e[a].pts>r);a++);return e.slice(a)},nf=function t(e,i,n){if(!i.length)return e;if(n)return i.slice();for(var r=i[0].pts,a=0;a<e.length&&!(e[a].pts>=r);a++);return e.slice(0,a).concat(i)},rf=function t(e,i,n,r){for(var a=Math.ceil(9e4*(i-r)),s=Math.ceil(9e4*(n-r)),o=e.slice(),u=e.length;u--&&!(e[u].pts<=s););if(-1===u)return o;for(var l=u+1;l--&&!(e[l].pts<=a););return l=Math.max(l,0),o.splice(l,u-l+1),o},af=function t(e,i,n){var r=null,a=null,s=0,o=[],u=[];if(!e&&!i)return ws.createTimeRange();if(!e)return i.buffered;if(!i)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===i.buffered.length)return ws.createTimeRange();for(var l=e.buffered,c=i.buffered,h=l.length;h--;)o.push({time:l.start(h),type:"start"}),o.push({time:l.end(h),type:"end"});for(h=c.length;h--;)o.push({time:c.start(h),type:"start"}),o.push({time:c.end(h),type:"end"});for(o.sort(function(t,e){return t.time-e.time}),h=0;h<o.length;h++)"start"===o[h].type?2===++s&&(r=o[h].time):"end"===o[h].type&&1===--s&&(a=o[h].time),null!==r&&null!==a&&(u.push([r,a]),r=null,a=null);return ws.createTimeRanges(u)},sf=function t(e,i){var n=e.addSourceBuffer(i),r=Object.create(null);r.updating=!1,r.realBuffer_=n;var a=function t(e){"function"==typeof n[e]?r[e]=function(){return n[e].apply(n,arguments)}:void 0===r[e]&&Object.defineProperty(r,e,{get:function t(){return n[e]},set:function t(i){return n[e]=i}})};for(var s in n)a(s);return r},of=function(t){function e(t,i){ld(this,e);var n=pd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ws.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=t,n.codecs_=i,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=ws.browser.IE_VERSION>=11;var r={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(t){Zp(t)?n.audioCodec_=t:tf(t)&&(n.videoCodec_=t)}),n.transmuxer_=new Hp,n.transmuxer_.postMessage({action:"init",options:r}),n.transmuxer_.onmessage=function(t){return"data"===t.data.action?n.data_(t):"done"===t.data.action?n.done_(t):"gopInfo"===t.data.action?n.appendGopInfo_(t):void 0},Object.defineProperty(n,"timestampOffset",{get:function t(){return this.timestampOffset_},set:function t(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function t(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function t(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function t(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function t(){return af(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return dd(e,t),cd(e,[{key:"data_",value:function t(e){var i=e.data.segment;i.data=new Uint8Array(i.data,e.data.byteOffset,e.data.byteLength),i.initSegment=new Uint8Array(i.initSegment.data,i.initSegment.byteOffset,i.initSegment.byteLength),Cp(this,this.mediaSource_,i),this.pendingBuffers_.push(i)}},{key:"done_",value:function t(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function t(){var e=this,i=["audio","video"];i.forEach(function(t){if(e[t+"Codec_"]&&!e[t+"Buffer_"]){var n=null;if(e.mediaSource_[t+"Buffer_"])(n=e.mediaSource_[t+"Buffer_"]).updating=!1;else{var r,a=t+'/mp4;codecs="'+e[t+"Codec_"]+'"';n=sf(e.mediaSource_.nativeMediaSource_,a),e.mediaSource_[t+"Buffer_"]=n}e[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(r){n.addEventListener(r,function(){var n;if("audio"!==t||!e.audioDisabled_)return"updateend"===r&&(e[t+"Buffer_"].updating=!1),i.every(function(i){return!("audio"!==i||!e.audioDisabled_)||(t===i||!e[i+"Buffer_"]||!e[i+"Buffer_"].updating)})?e.trigger(r):void 0})})}})}},{key:"appendBuffer",value:function t(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var i=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:i.end(i.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:ef(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function t(e){this.gopBuffer_=nf(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function t(e,i){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,i),this.gopBuffer_=rf(this.gopBuffer_,e,i,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,i)),Ep(e,i,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Ep(e,i,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function t(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(t,e){var i=e.type,n=e.data,r=e.initSegment;return t[i].segments.push(n),t[i].bytes+=n.byteLength,t[i].initSegment=r,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[i].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var i=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),Op(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(i=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,i&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function t(e,i){var n=0,r=void 0;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach(function(t){r.set(t,n),n+=t.byteLength});try{i.updating=!0,i.appendBuffer(r)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function t(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),e}(ws.EventTarget),uf=function(i){function n(){ld(this,n);var i=pd(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=void 0;for(r in i.nativeMediaSource_=new e.MediaSource,i.nativeMediaSource_)r in n.prototype||"function"!=typeof i.nativeMediaSource_[r]||(i[r]=i.nativeMediaSource_[r].bind(i.nativeMediaSource_));return i.duration_=NaN,Object.defineProperty(i,"duration",{get:function t(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function t(e){this.duration_=e,e===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(i,"seekable",{get:function t(){return this.duration_===1/0?ws.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(i,"readyState",{get:function t(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(i,"activeSourceBuffers",{get:function t(){return this.activeSourceBuffers_}}),i.sourceBuffers=[],i.activeSourceBuffers_=[],i.updateActiveSourceBuffers_=function(){if(i.activeSourceBuffers_.length=0,1===i.sourceBuffers.length){var t=i.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void i.activeSourceBuffers_.push(t)}for(var e=!1,n=!0,r=0;r<i.player_.audioTracks().length;r++){var a=i.player_.audioTracks()[r];if(a.enabled&&"main"!==a.kind){e=!0,n=!1;break}}i.sourceBuffers.forEach(function(t,r){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=e;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,n=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=r?n:!n,t.audioDisabled_))return;i.activeSourceBuffers_.push(t)})},i.onPlayerMediachange_=function(){i.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},i.onHlsReset_=function(){i.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},i.onHlsSegmentTimeMapping_=function(t){i.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},i),i.on("sourceopen",function(e){var n=t.querySelector('[src="'+i.url_+'"]');n&&(i.player_=ws(n.parentNode),i.player_&&(i.player_.tech_.on("hls-reset",i.onHlsReset_),i.player_.tech_.on("hls-segment-time-mapping",i.onHlsSegmentTimeMapping_),i.player_.audioTracks&&i.player_.audioTracks()&&(i.player_.audioTracks().on("change",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("addtrack",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("removetrack",i.updateActiveSourceBuffers_)),i.player_.on("mediachange",i.onPlayerMediachange_)))}),i.on("sourceended",function(t){for(var e=Lp(i.duration),n=0;n<i.sourceBuffers.length;n++){var r=i.sourceBuffers[n],a=r.metadataTrack_&&r.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=e)}}),i.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),i}return dd(n,i),cd(n,[{key:"addSeekableRange_",value:function t(e,i){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(i>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=i)}},{key:"addSourceBuffer",value:function t(e){var i=void 0,n=Jp(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=(r=zp(r)).filter(function(t){return Zp(t)||tf(t)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),i=new of(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else i=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(i),i}}]),n}(ws.EventTarget),lf=0;ws.mediaSources={};var cf=function t(e,i){var n=ws.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:i})},hf=function t(){return!!e.MediaSource&&!!e.MediaSource.isTypeSupported&&e.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},df=function t(){if(this.MediaSource={open:cf,supportsNativeMediaSources:hf},hf())return new uf;throw new Error("Cannot use create a virtual MediaSource for this video")};df.open=cf,df.supportsNativeMediaSources=hf;var pf={createObjectURL:function t(i){var n="blob:vjs-media-source/",r=void 0;return i instanceof uf?(r=e.URL.createObjectURL(i.nativeMediaSource_),i.url_=r,r):i instanceof uf?(r=n+lf,lf++,ws.mediaSources[r]=i,r):(r=e.URL.createObjectURL(i),i.url_=r,r)}};ws.MediaSource=df,ws.URL=pf;var ff=ws.EventTarget,mf=ws.mergeOptions,gf=function t(e,i){for(var n=mf(e,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod}),r=0;r<i.playlists.length;r++){var a=Td(n,i.playlists[r]);a&&(n=a)}return vd(i,function(t,e,i,r){if(t.playlists&&t.playlists.length){var a=t.playlists[0].uri,s=Td(n,t.playlists[0]);s&&((n=s).mediaGroups[e][i][r].playlists[0]=n.playlists[a])}}),n},yf=function(t){function i(t,n,r,a){ld(this,i);var s=pd(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(s.hls_=n,s.withCredentials=r,!t)throw new Error("A non-empty playlist URL or playlist is required");return s.on("minimumUpdatePeriod",function(){s.refreshXml_()}),s.on("mediaupdatetimeout",function(){s.refreshMedia_()}),"string"==typeof t?(s.srcUrl=t,s.state="HAVE_NOTHING",pd(s)):(s.masterPlaylistLoader_=a,s.state="HAVE_METADATA",s.started=!0,s.media(t),e.setTimeout(function(){s.trigger("loadedmetadata")},0),s)}return dd(i,t),cd(i,[{key:"dispose",value:function t(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function t(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function t(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var n=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",n&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==i&&this.trigger("mediachange"))}},{key:"pause",value:function t(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function t(i){var n=this;e.clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(i){var a=r?r.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout(function(){return n.load()},a)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function t(){var e=qo(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var i=0;i<e.playlists.length;i++){var n="placeholder-uri-"+i;e.playlists[i].uri=n,e.playlists[n]=e.playlists[i]}return vd(e,function(t,i,n,r){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+i+"-"+n+"-"+r;t.playlists[0].uri=a,e.playlists[a]=t.playlists[0]}}),Sd(e),kd(e),e}},{key:"start",value:function t(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?e.masterLoaded_=Date.parse(i.responseHeaders.date):e.masterLoaded_=Date.now(),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})}},{key:"syncClientServerClock_",value:function t(e){var i=this,n=zo(this.masterXml_);return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:ud(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},function(t,r){if(i.request){if(t)return i.clientOffset_=i.masterLoaded_-Date.now(),e();var a=void 0;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):i.masterLoaded_:Date.parse(r.responseText),i.clientOffset_=a-Date.now(),e()}}))}},{key:"onClientServerClockSync_",value:function t(){var i=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),e.setTimeout(function(){i.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&e.setTimeout(function(){i.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function t(){var i=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,n){if(i.request){if(i.request=null,t)return i.error={status:n.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=n.responseText;var r=i.parseMasterXml();i.master=gf(i.master,r),e.setTimeout(function(){i.trigger("minimumUpdatePeriod")},i.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function t(){var i=this,n=void 0,r=void 0;this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,r=this.parseMasterXml());var a=gf(n,r);a?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=a:this.master=a,this.media_=a.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=e.setTimeout(function(){i.trigger("mediaupdatetimeout")},wd(this.media(),!!a))),this.trigger("loadedplaylist")}}]),i}(ff),vf=function t(e){return ws.log.debug?ws.log.debug.bind(ws,"VHS:",e+" >"):function(){}};function _f(){}var bf=function(){function t(e,i,n,r){ld(this,t),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=n,this.mimeType_=i,this.logger_=vf("SourceUpdater["+n+"]["+i+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,r)):this.createSourceBuffer_(i,r)}return cd(t,[{key:"createSourceBuffer_",value:function t(e,i){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),i&&(i.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?i.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function t(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.logger_("buffered ["+Sp(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function t(e){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function t(e,i){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},i)}},{key:"buffered",value:function t(){return this.sourceBuffer_?this.sourceBuffer_.buffered:ws.createTimeRanges()}},{key:"remove",value:function t(e,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_f;this.processedAppend_&&this.queueCallback_(function(){n.logger_("remove ["+e+" => "+i+"]"),n.sourceBuffer_.remove(e,i)},r)}},{key:"updating",value:function t(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",
value:function t(e){var i=this;return void 0!==e&&(this.queueCallback_(function(){i.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function t(e,i){this.callbacks_.push([e.bind(this),i]),this.runCallback_()}},{key:"runCallback_",value:function t(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function t(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),t}(),Tf={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Sf=2,kf=-101,wf=-102,Cf=function t(e){var i=void 0,n=void 0;return n=e.offset+e.length-1,"bytes="+(i=e.offset)+"-"+n},Ef=function t(e){var i={};return e.byterange&&(i.Range=Cf(e.byterange)),i},Af=function t(e){e.forEach(function(t){t.abort()})},Lf=function t(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},Of=function t(e){var i=e.target,n,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},Pf=function t(e,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:kf,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:wf,xhr:i}:e?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:Sf,xhr:i}:null},Uf=function t(e,i){return function(t,n){var r=n.response,a=Pf(t,n);if(a)return i(a,e);if(16!==r.byteLength)return i({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Sf,xhr:n},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),i(null,e)}},If=function t(e,i,n){return function(t,r){var a=r.response,s=Pf(t,r);return s?n(s,e):0===a.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Sf,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),i.isInitialized()||i.init(),e.map.timescales=Zo.timescale(e.map.bytes),e.map.videoTrackIds=Zo.videoTrackIds(e.map.bytes),n(null,e))}},xf=function t(e,i,n){return function(t,r){var a=r.response,s=Pf(t,r),o=void 0;return s?n(s,e):0===a.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Sf,xhr:r},e):(e.stats=Lf(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),e.map&&e.map.bytes&&(i.isInitialized()||i.init(),(o=i.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&o.captions&&(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),n(null,e))}},Df=function t(e,i,n){var r=function t(r){if(r.data.source===i.requestId){e.removeEventListener("message",t);var a=r.data.decrypted;return i.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),n(null,i)}};e.addEventListener("message",r),e.postMessage(ip({source:i.requestId,encrypted:i.encryptedBytes,key:i.key.bytes,iv:i.key.iv}),[i.encryptedBytes.buffer,i.key.bytes.buffer])},Rf=function t(e,i,n){var r=0,a=!1;return function(t,s){if(!a)return t?(a=!0,Af(e),n(t,s)):(r+=1)===e.length?(s.endOfAllRequests=Date.now(),s.encryptedBytes?Df(i,s,n):n(null,s)):void 0}},Mf=function t(e,i){return function(t){return e.stats=ws.mergeOptions(e.stats,Of(t)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),i(t,e)}},Bf=function t(e,i,n,r,a,s,o){var u=[],l=Rf(u,n,o);if(a.key){var c,h,d=e(ws.mergeOptions(i,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),Uf(a,l));u.push(d)}if(a.map&&!a.map.bytes){var p,f,m=e(ws.mergeOptions(i,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Ef(a.map)}),If(a,r,l));u.push(m)}var g,y,v=e(ws.mergeOptions(i,{uri:a.resolvedUri,responseType:"arraybuffer",headers:Ef(a)}),xf(a,r,l));return v.addEventListener("progress",Mf(a,s)),u.push(v),function(){return Af(u)}},Nf=function t(i,n){var r=void 0;return i&&(r=e.getComputedStyle(i))?r[n]:""},jf=function t(e,i){var n=e.slice();e.sort(function(t,e){var r=i(t,e);return 0===r?n.indexOf(t)-n.indexOf(e):r})},Ff=function t(i,n){var r=void 0,a=void 0;return i.attributes.BANDWIDTH&&(r=i.attributes.BANDWIDTH),r=r||e.Number.MAX_VALUE,n.attributes.BANDWIDTH&&(a=n.attributes.BANDWIDTH),r-(a=a||e.Number.MAX_VALUE)},Vf=function t(i,n){var r=void 0,a=void 0;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(r=i.attributes.RESOLUTION.width),r=r||e.Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(a=n.attributes.RESOLUTION.width),r===(a=a||e.Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?i.attributes.BANDWIDTH-n.attributes.BANDWIDTH:r-a},Hf=function t(i,n,r,a,s){var o=i.playlists.map(function(t){var i=void 0,n=void 0,r=void 0;return i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:r=(r=t.attributes.BANDWIDTH)||e.Number.MAX_VALUE,width:i,height:n,playlist:t}});jf(o,function(t,e){return t.bandwidth-e.bandwidth});var u=(o=o.filter(function(t){return!$d.isIncompatible(t.playlist)})).filter(function(t){return $d.isEnabled(t.playlist)});u.length||(u=o.filter(function(t){return!$d.isDisabled(t.playlist)}));var l=u.filter(function(t){return t.bandwidth*Tf.BANDWIDTH_VARIANCE<n}),c=l[l.length-1],h=l.filter(function(t){return t.bandwidth===c.bandwidth})[0];if(!1===s){var d=h||u[0]||o[0];return d?d.playlist:null}var p=l.filter(function(t){return t.width&&t.height});jf(p,function(t,e){return t.width-e.width});var f=p.filter(function(t){return t.width===r&&t.height===a});c=f[f.length-1];var m=f.filter(function(t){return t.bandwidth===c.bandwidth})[0],g=void 0,y=void 0,v=void 0;m||(y=(g=p.filter(function(t){return t.width>r||t.height>a})).filter(function(t){return t.width===g[0].width&&t.height===g[0].height}),c=y[y.length-1],v=y.filter(function(t){return t.bandwidth===c.bandwidth})[0]);var _=v||m||h||u[0]||o[0];return _?_.playlist:null},qf=function t(){return Hf(this.playlists.master,this.systemBandwidth,parseInt(Nf(this.tech_.el(),"width"),10),parseInt(Nf(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},zf=function t(e){var i=e.master,n=e.currentTime,r=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,u=e.currentTimeline,l=e.syncController,c=i.playlists.filter(function(t){return!$d.isIncompatible(t)}),h=c.filter($d.isEnabled);h.length||(h=c.filter(function(t){return!$d.isDisabled(t)}));var d,p=h.filter($d.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var e,i=l.getSyncPoint(t,a,u,n)?1:2,c,h;return{playlist:t,rebufferingImpact:$d.estimateSegmentRequestTime(s,r,t)*i-o}}),f=p.filter(function(t){return t.rebufferingImpact<=0});return jf(f,function(t,e){return Ff(e.playlist,t.playlist)}),f.length?f[0]:(jf(p,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),p[0]||null)},Wf=function t(){var e=this.playlists.master.playlists.filter($d.isEnabled),i;return jf(e,function(t,e){return Ff(t,e)}),e.filter(function(t){return Wp(t.attributes.CODECS).videoCodec})[0]||null},Gf=function t(e,i,n){for(var r in n)if(!e[r]){i.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);e[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}},Xf=function t(e){var i=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var a=window.WebKitDataCue||window.VTTCue;n.forEach(function(t){var e=t.stream,n=t.startTime,s=t.endTime;i[e]&&(n+=r,s+=r,i[e].addCue(new a(n,s,t.text)))})}},Yf=500,$f=function t(e,i,n){if(!e||!i)return!1;var r,a=n===e.segments.length;return e.endList&&"open"===i.readyState&&a},Kf=function t(e){return"number"==typeof e&&isFinite(e)},Qf=function t(e,i,n){return"main"===e&&i&&n?n.containsAudio||n.containsVideo?i.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},Jf=function t(e,i,n){var r=void 0;return r=e.length&&e.start(0)>0&&e.start(0)<i?e.start(0):i-30,Math.min(r,i-n)},Zf=function t(e){var i=e.segment,n=i.start,r=i.end,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=void 0===u?[]:u,c=e.mediaIndex,h=e.timeline;return["appending ["+c+"] of ["+s+", "+(s+l.length)+"] from playlist ["+o+"]","["+n+" => "+r+"] in timeline ["+h+"]"].join(" ")},tm=function(t){function i(t){ld(this,i);var e=pd(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return e.bandwidth=t.bandwidth,e.throughput={rate:0,count:0},e.roundTrip=NaN,e.resetStats_(),e.mediaIndex=null,e.hasPlayed_=t.hasPlayed,e.currentTime_=t.currentTime,e.seekable_=t.seekable,e.seeking_=t.seeking,e.duration_=t.duration,e.mediaSource_=t.mediaSource,e.hls_=t.hls,e.loaderType_=t.loaderType,e.startingMedia_=void 0,e.segmentMetadataTrack_=t.segmentMetadataTrack,e.goalBufferLength_=t.goalBufferLength,e.sourceType_=t.sourceType,e.inbandTextTracks_=t.inbandTextTracks,e.state_="INIT",e.checkBufferTimeout_=null,e.error_=void 0,e.currentTimeline_=-1,e.pendingSegment_=null,e.mimeType_=null,e.sourceUpdater_=null,e.xhrOptions_=null,e.activeInitSegmentId_=null,e.initSegments_={},e.captionParser_=new kh,e.decrypter_=t.decrypter,e.syncController_=t.syncController,e.syncPoint_={segmentIndex:0,time:0},e.syncController_.on("syncinfoupdate",function(){return e.trigger("syncinfoupdate")}),e.mediaSource_.addEventListener("sourceopen",function(){return e.ended_=!1}),e.fetchAtBuffer_=!1,e.logger_=vf("SegmentLoader["+e.loaderType_+"]"),Object.defineProperty(e,"state",{get:function t(){return this.state_},set:function t(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),e}return dd(i,t),cd(i,[{key:"resetStats_",value:function t(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function t(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function t(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function t(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function t(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function t(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function t(){return this.sourceUpdater_?this.sourceUpdater_.buffered():ws.createTimeRanges()}},{key:"initSegment",value:function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=np(e),r=this.initSegments_[n];return i&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"couldBeginLoading_",value:function t(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function t(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function t(){return this.state="READY",this.sourceUpdater_=new bf(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var a=n?n.id:null;if(this.logger_("playlist update ["+a+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===e.uri){var s=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),r&&(r.mediaIndex-=s,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function t(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function t(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function t(e,i){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function t(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function t(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function t(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function t(e,i,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,i,n),Ep(e,i,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var r in this.inbandTextTracks_)Ep(e,i,this.inbandTextTracks_[r])}},{key:"monitorBuffer_",value:function t(){this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function t(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function t(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_),i;if(e)$f(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(e))}}},{key:"checkBuffer_",value:function t(e,i,n,r,a,s){var o=0,u=void 0;e.length&&(o=e.end(e.length-1));var l=Math.max(0,o-a);if(!i.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!r&&l>=1)return null;if(null===s)return n=this.getSyncSegmentCandidate_(i),this.generateSegmentInfo_(i,n,null,!0);if(null!==n){var c=i.segments[n];return u=c&&c.end?c.end:o,this.generateSegmentInfo_(i,n+1,u,!1)}if(this.fetchAtBuffer_){var h=$d.getMediaInfoForTime(i,o,s.segmentIndex,s.time);n=h.mediaIndex,u=h.startTime}else{var d=$d.getMediaInfoForTime(i,a,s.segmentIndex,s.time);n=d.mediaIndex,u=d.startTime}return this.generateSegmentInfo_(i,n,u,!1)}},{key:"getSyncSegmentCandidate_",value:function t(e){var i=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===i.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function t(e,i,n,r){if(i<0||i>=e.segments.length)return null;var a=e.segments[i];return{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:i,isSyncRequest:r,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a}}},{key:"abortRequestEarly_",value:function t(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var i=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,a=$d.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),s=kp(this.buffered_(),i,this.hls_.tech_.playbackRate())-1;if(a<=s)return!1;var o=zf({master:this.hls_.playlists.master,currentTime:i,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var u,l=a-s-o.rebufferingImpact,c=.5;return s<=1/30&&(c=1),!o.playlist||o.playlist.uri===this.playlist_.uri||l<c?!1:(this.bandwidth=o.playlist.attributes.BANDWIDTH*Tf.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function t(e,i){this.pendingSegment_&&i.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(i.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function t(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Bf(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function t(e){var i=Jf(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}},{key:"createSimplifiedSegmentObj_",value:function t(e){var i=e.segment,n={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:e.requestId};if(i.key){var r=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key={resolvedUri:i.key.resolvedUri,iv:r}}return i.map&&(n.map=this.initSegment(i.map)),n}},{key:"segmentRequestFinished_",value:function t(e,i){if(this.mediaRequests+=1,i.stats&&(this.mediaBytesTransferred+=i.stats.bytesReceived,this.mediaTransferDuration+=i.stats.roundTripTime),this.pendingSegment_){if(i.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===wf?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===kf?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=i.stats.bandwidth,this.roundTrip=i.stats.roundTripTime,i.map&&(i.map=this.initSegment(i.map,!0)),this.processSegmentResponse_(i)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function t(e){var i=this.pendingSegment_;i.bytes=e.bytes,e.map&&(i.segment.map.bytes=e.map.bytes),i.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(Gf(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),Xf({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function t(){var e=this;if(this.pendingSegment_){var i=this.pendingSegment_,n=i.segment,r=this.syncController_.probeSegmentInfo(i);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var a=Qf(this.loaderType_,this.startingMedia_,r);if(a)return this.error({message:a,blacklistDuration:1/0}),void this.trigger("error");if(i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==i.timestampOffset&&i.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(i.timestampOffset),this.trigger("timestampoffset"));var s=this.syncController_.mappingForTimeline(i.timeline);if(null!==s&&this.trigger({type:"segmenttimemapping",mapping:s}),this.state="APPENDING",n.map){var o=np(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==o){var u=this.initSegment(n.map);this.sourceUpdater_.appendBuffer(u.bytes,function(){e.activeInitSegmentId_=o})}}i.byteLength=i.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_(Zf(i)),this.sourceUpdater_.appendBuffer(i.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function t(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,i=e.segment,n=null!==this.mediaIndex,r;(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),i.end&&this.currentTime_()-i.end>3*e.playlist.targetDuration)?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),$f(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function t(e){var i=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-i)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function t(i){if(this.segmentMetadataTrack_){var n=i.segment,r=n.start,a=n.end;if(Kf(r)&&Kf(a)){Ep(r,a,this.segmentMetadataTrack_);var s=e.WebKitDataCue||e.VTTCue,o={dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.uri,start:r,end:a},u,l=new s(r,a,JSON.stringify(o));l.value=o,this.segmentMetadataTrack_.addCue(l)}}}}]),i}(ws.EventTarget),em=function t(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},im=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),nm=function(t){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ld(this,i);var n=pd(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return dd(i,t),cd(i,[{key:"buffered_",value:function t(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return ws.createTimeRanges();var e=this.subtitlesTrack_.cues,i=e[0].startTime,n=e[e.length-1].startTime;return ws.createTimeRanges([[i,n]])}},{key:"initSegment",value:function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=np(e),r=this.initSegments_[n];if(i&&!r&&e.bytes){var a=im.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(im,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}},{key:"couldBeginLoading_",value:function t(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function t(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function t(e){return void 0===e?this.subtitlesTrack_:(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function t(e,i){Ep(e,i,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function t(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(i=this.skipEmptySegments_(i)){if(null===this.syncController_.timestampOffsetForTimeline(i.timeline)){var n=function t(){e.state="READY",e.paused()||e.monitorBuffer_()};return this.syncController_.one("timestampoffset",n),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(i)}}},{key:"skipEmptySegments_",value:function t(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function t(){var i=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var n=this.pendingSegment_,r=n.segment;if("function"!=typeof e.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a=function t(){i.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",a),void this.subtitlesTrack_.tech_.one("vttjserror",function(){i.subtitlesTrack_.tech_.off("vttjsloaded",a),i.error({message:"Error loading vtt.js"}),i.state="READY",i.pause(),i.trigger("error")})}r.requested=!0;try{this.parseVTTCues_(n)}catch(t){return this.error({message:t.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach(function(t){i.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function t(i){var n=void 0,r=!1;"function"==typeof e.TextDecoder?n=new e.TextDecoder("utf8"):(n=e.WebVTT.StringDecoder(),r=!0);var a=new e.WebVTT.Parser(e,e.vttjs,n);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},a.oncue=i.cues.push.bind(i.cues),a.ontimestampmap=function(t){return i.timestampmap=t},a.onparsingerror=function(t){ws.log.warn("Error encountered when parsing cues: "+t.message)},i.segment.map){var s=i.segment.map.bytes;r&&(s=em(s)),a.parse(s)}var o=i.bytes;r&&(o=em(o)),a.parse(o),a.flush()}},{key:"updateTimeMapping_",value:function t(e,i,n){var r=e.segment;if(i)if(e.cues.length){var a=e.timestampmap,s=a.MPEGTS/9e4-a.LOCAL+i.mapping;if(e.cues.forEach(function(t){t.startTime+=s,t.endTime+=s}),!n.syncInfo){var o=e.cues[0].startTime,u=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,u-r.duration)}}}else r.empty=!0}}]),i}(tm),rm=function t(e,i){for(var n=e.cues,r=0;r<n.length;r++){var a=n[r];if(i>=a.adStartTime&&i<=a.adEndTime)return a}return null},am=function t(i,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(i.segments)for(var a=r,s=void 0,o=0;o<i.segments.length;o++){var u=i.segments[o];if(s||(s=rm(n,a+u.duration/2)),s){if("cueIn"in u){s.endTime=a,s.adEndTime=a,a+=u.duration,s=null;continue}if(a<s.endTime){a+=u.duration;continue}s.endTime+=u.duration}else if("cueOut"in u&&((s=new e.VTTCue(a,a+u.duration,u.cueOut)).adStartTime=a,s.adEndTime=a+parseFloat(u.cueOut),n.addCue(s)),"cueOutCont"in u){var l=void 0,c=void 0,h=u.cueOutCont.split("/").map(parseFloat),d=fd(h,2);l=d[0],c=d[1],(s=new e.VTTCue(a,a+u.duration,"")).adStartTime=a-l,s.adEndTime=s.adStartTime+c,n.addCue(s)}a+=u.duration}},sm=Xh,om=[{name:"VOD",run:function t(e,i,n,r,a){var s;return n!==1/0?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function t(e,i,n,r,a){if(!e.datetimeToDisplayTime)return null;var s=i.segments||[],o=null,u=null;a=a||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.dateTimeObject){var h,d=c.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,p=Math.abs(a-d);if(null!==u&&u<p)break;u=p,o={time:d,segmentIndex:l}}}return o}},{name:"Segment",run:function t(e,i,n,r,a){var s=i.segments||[],o=null,u=null;a=a||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.timeline===r&&void 0!==c.start){var h=Math.abs(a-c.start);if(null!==u&&u<h)break;(!o||null===u||u>=h)&&(u=h,o={time:c.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function t(e,i,n,r,a){var s=null;if(a=a||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,u=0;u<i.discontinuityStarts.length;u++){var l=i.discontinuityStarts[u],c=i.discontinuitySequence+u+1,h=e.discontinuities[c];if(h){var d=Math.abs(a-h.time);if(null!==o&&o<d)break;(!s||null===o||o>=d)&&(o=d,s={time:h.time,segmentIndex:l})}}return s}},{name:"Playlist",run:function t(e,i,n,r,a){var s;return i.syncInfo?{time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence}:null}}],um=function(t){function e(){ld(this,e);var t=pd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.inspectCache_=void 0,t.timelines=[],t.discontinuities=[],t.datetimeToDisplayTime=null,t.logger_=vf("SyncController"),t}return dd(e,t),cd(e,[{key:"getSyncPoint",value:function t(e,i,n,r){var a=this.runStrategies_(e,i,n,r);return a.length?this.selectSyncPoint_(a,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function t(e,i){if(!e||!e.segments)return null;var n=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Ud(e,r.segmentIndex,0))}},{key:"runStrategies_",value:function t(e,i,n,r){for(var a=[],s=0;s<om.length;s++){var o=om[s],u=o.run(this,e,i,n,r);u&&(u.strategy=o.name,a.push({strategy:o.name,syncPoint:u}))}return a}},{key:"selectSyncPoint_",value:function t(e,i){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[i.key]-i.value),a=e[0].strategy,s=1;s<e.length;s++){var o=Math.abs(e[s].syncPoint[i.key]-i.value);o<r&&(r=o,n=e[s].syncPoint,a=e[s].strategy)}return this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy ["+a+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function t(e,i){for(var n,r=i.mediaSequence-e.mediaSequence-1;r>=0;r--){var a=e.segments[r];if(a&&void 0!==a.start){i.syncInfo={mediaSequence:e.mediaSequence+r,time:a.start},this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+", mediaSequence: "+i.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function t(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var i=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}}},{key:"reset",value:function t(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function t(e){var i=e.segment,n=e.playlist,r=void 0;return(r=i.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,r)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:i.start})),r}},{key:"probeMp4Segment_",value:function t(e){var i=e.segment,n=Zo.timescale(i.map.bytes),r=Zo.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+i.duration}}},{key:"probeTsSegment_",value:function t(e){var i=sm(e.bytes,this.inspectCache_),n=void 0,r=void 0;return i?(i.video&&2===i.video.length?(this.inspectCache_=i.video[1].dts,n=i.video[0].dtsTime,r=i.video[1].dtsTime):i.audio&&2===i.audio.length&&(this.inspectCache_=i.audio[1].dts,n=i.audio[0].dtsTime,r=i.audio[1].dtsTime),{start:n,end:r,containsVideo:i.video&&2===i.video.length,containsAudio:i.audio&&2===i.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function t(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function t(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{
key:"calculateSegmentTimeMapping_",value:function t(e,i){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-i.start},this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]"),n.start=e.startOfSegment,n.end=i.end+r.mapping;else{if(!r)return!1;n.start=i.start+r.mapping,n.end=i.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function t(e){var i=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(var r=0;r<i.discontinuityStarts.length;r++){var a=i.discontinuityStarts[r],s=i.discontinuitySequence+r+1,o=a-e.mediaIndex,u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){var l=void 0;l=o<0?n.start-Ud(i,e.mediaIndex,a):n.end+Ud(i,e.mediaIndex+1,a),this.discontinuities[s]={time:l,accuracy:u}}}}}]),e}(ws.EventTarget),lm=new Mp("./decrypter-worker.worker.js",function(t,e){var i=this,n=function(){function t(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}var e=function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)},a=function t(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?e:i},s=function t(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],i=e[0],n=e[1],r=i[4],a=n[4],s=void 0,o=void 0,u=void 0,l=[],c=[],h=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(o=u=0;!r[o];o^=h||1,u=c[u]||1)for(f=(f=u^u<<1^u<<2^u<<3^u<<4)>>8^255&f^99,r[o]=f,a[f]=o,g=16843009*(p=l[d=l[h=l[o]]])^65537*d^257*h^16843008*o,m=257*l[f]^16843008*f,s=0;s<4;s++)i[s][o]=m=m<<24^m>>>8,n[s][f]=g=g<<24^g>>>8;for(s=0;s<5;s++)i[s]=i[s].slice(0),n[s]=n[s].slice(0);return e},o=null,u=function(){function t(i){e(this,t),o||(o=s()),this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var n=void 0,r=void 0,a=void 0,u=void 0,l=void 0,c=this._tables[0][4],h=this._tables[1],d=i.length,p=1;if(4!==d&&6!==d&&8!==d)throw new Error("Invalid aes key size");for(u=i.slice(0),l=[],this._key=[u,l],n=d;n<4*d+28;n++)a=u[n-1],(n%d==0||8===d&&n%d==4)&&(a=c[a>>>24]<<24^c[a>>16&255]<<16^c[a>>8&255]<<8^c[255&a],n%d==0&&(a=a<<8^a>>>24^p<<24,p=p<<1^283*(p>>7))),u[n]=u[n-d]^a;for(r=0;n;r++,n--)a=u[3&r?n:n-4],l[r]=n<=4||r<4?a:h[0][c[a>>>24]]^h[1][c[a>>16&255]]^h[2][c[a>>8&255]]^h[3][c[255&a]]}return t.prototype.decrypt=function t(e,i,n,r,a,s){var o=this._key[1],u=e^o[0],l=r^o[1],c=n^o[2],h=i^o[3],d=void 0,p=void 0,f=void 0,m=o.length/4-2,g=void 0,y=4,v=this._tables[1],_=v[0],b=v[1],T=v[2],S=v[3],k=v[4];for(g=0;g<m;g++)d=_[u>>>24]^b[l>>16&255]^T[c>>8&255]^S[255&h]^o[y],p=_[l>>>24]^b[c>>16&255]^T[h>>8&255]^S[255&u]^o[y+1],f=_[c>>>24]^b[h>>16&255]^T[u>>8&255]^S[255&l]^o[y+2],h=_[h>>>24]^b[u>>16&255]^T[l>>8&255]^S[255&c]^o[y+3],y+=4,u=d,l=p,c=f;for(g=0;g<4;g++)a[(3&-g)+s]=k[u>>>24]<<24^k[l>>16&255]<<16^k[c>>8&255]<<8^k[255&h]^o[y++],d=u,u=l,l=c,c=h,h=d},t}(),l=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function t(e,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i)},t.prototype.off=function t(e,i){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(i);return this.listeners[e].splice(n,1),n>-1},t.prototype.trigger=function t(e){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,arguments[1]);else for(var a=Array.prototype.slice.call(arguments,1),s=i.length,o=0;o<s;++o)i[o].apply(this,a)},t.prototype.dispose=function t(){this.listeners={}},t.prototype.pipe=function t(e){this.on("data",function(t){e.push(t)})},t}(),c=function(t){function i(){e(this,i);var n=a(this,t.call(this,l));return n.jobs=[],n.delay=1,n.timeout_=null,n}return r(i,t),i.prototype.processJob_=function t(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function t(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(l),h=function t(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},d=function t(e,i,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new u(Array.prototype.slice.call(i)),s=new Uint8Array(e.byteLength),o=new Int32Array(s.buffer),l=void 0,c=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0,y=void 0,v=void 0;for(l=n[0],c=n[1],d=n[2],p=n[3],v=0;v<r.length;v+=4)f=h(r[v]),m=h(r[v+1]),g=h(r[v+2]),y=h(r[v+3]),a.decrypt(f,m,g,y,o,v),o[v]=h(o[v]^l),o[v+1]=h(o[v+1]^c),o[v+2]=h(o[v+2]^d),o[v+3]=h(o[v+3]^p),l=f,c=m,d=g,p=y;return s},p=function(){function i(n,r,a,s){e(this,i);var o=i.STEP,u=new Int32Array(n.buffer),l=new Uint8Array(n.byteLength),d=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(u.subarray(d,d+o),r,a,l)),d=o;d<u.length;d+=o)a=new Uint32Array([h(u[d-4]),h(u[d-3]),h(u[d-2]),h(u[d-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(d,d+o),r,a,l));this.asyncStream_.push(function(){s(null,t(l))})}return i.prototype.decryptChunk_=function t(e,i,n,r){return function(){var t=d(e,i,n);r.set(t,e.byteOffset)}},n(i,null,[{key:"STEP",get:function t(){return 32e3}}]),i}(),f=function t(e){var i={};return Object.keys(e).forEach(function(t){var n=e[t];ArrayBuffer.isView(n)?i[t]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:i[t]=n}),i},m,g;return new function t(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new p(n,r,a,function(t,n){e.postMessage(f({source:i.source,decrypted:n}),[n.buffer])})}}(i)}()}),cm=function t(e){var i=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i},hm=function t(e,i){e.abort(),e.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)},dm=function t(e,i){i.activePlaylistLoader=e,e.load()},pm=function t(e,i){return function(){var t=i.segmentLoaders,n=t[e],r=t.main,a=i.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;hm(n,a),o&&(o.playlistLoader?(n.resyncLoader(),dm(o.playlistLoader,a)):u&&r.resetEverything())}},fm=function t(e,i){return function(){var t=i.segmentLoaders,n=t[e],r=t.main,a=i.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;hm(n,a),o&&(o.playlistLoader?u!==o.playlistLoader?(n.track&&n.track(s),n.resetEverything(),dm(o.playlistLoader,a)):dm(o.playlistLoader,a):r.resetEverything())}},mm={AUDIO:function t(e,i){return function(){var t=i.segmentLoaders[e],n=i.mediaTypes[e],r=i.blacklistCurrentPlaylist;hm(t,n);var a=n.activeTrack(),s=n.activeGroup(),o=(s.filter(function(t){return t.default})[0]||s[0]).id,u=n.tracks[o];if(a!==u){for(var l in ws.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[l].enabled=n.tracks[l]===u;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function t(e,i){return function(){var t=i.segmentLoaders[e],n=i.mediaTypes[e];ws.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),hm(t,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},gm={AUDIO:function t(e,i,n){if(i){var r=n.tech,a=n.requestOptions,s=n.segmentLoaders[e];i.on("loadedmetadata",function(){var t=i.media();s.playlist(t,a),(!r.paused()||t.endList&&"none"!==r.preload())&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),a),r.paused()||s.load()}),i.on("error",mm[e](e,n))}},SUBTITLES:function t(e,i,n){var r=n.tech,a=n.requestOptions,s=n.segmentLoaders[e],o=n.mediaTypes[e];i.on("loadedmetadata",function(){var t=i.media();s.playlist(t,a),s.track(o.activeTrack()),(!r.paused()||t.endList&&"none"!==r.preload())&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),a),r.paused()||s.load()}),i.on("error",mm[e](e,n))}},ym=function t(e,i){return function(t){return t.attributes[e]===i}},vm=function t(e){return function(t){return t.resolvedUri===e}},_m={AUDIO:function t(e,i){var n=i.hls,r=i.sourceType,a=i.segmentLoaders[e],s=i.requestOptions.withCredentials,o=i.master,u=o.mediaGroups,l=o.playlists,c=i.mediaTypes[e],h=c.groups,d=c.tracks,p=i.masterPlaylistLoader;for(var f in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}}),u[e]){h[f]||(h[f]=[]);var m=l.filter(ym(e,f));for(var g in u[e][f]){var y=u[e][f][g],v;m.filter(vm(y.resolvedUri)).length&&delete y.resolvedUri;var _=void 0;if(_=y.resolvedUri?new Cd(y.resolvedUri,n,s):y.playlists&&"dash"===r?new yf(y.playlists[0],n,s,p):null,y=ws.mergeOptions({id:g,playlistLoader:_},y),gm[e](e,y.playlistLoader,i),h[f].push(y),void 0===d[g]){var b=new ws.AudioTrack({id:g,kind:cm(y),enabled:!1,language:y.language,default:y.default,label:g});d[g]=b}}}a.on("error",mm[e](e,i))},SUBTITLES:function t(e,i){var n=i.tech,r=i.hls,a=i.sourceType,s=i.segmentLoaders[e],o=i.requestOptions.withCredentials,u=i.master.mediaGroups,l=i.mediaTypes[e],c=l.groups,h=l.tracks,d=i.masterPlaylistLoader;for(var p in u[e])for(var f in c[p]||(c[p]=[]),u[e][p])if(!u[e][p][f].forced){var m=u[e][p][f],g=void 0;if("hls"===a?g=new Cd(m.resolvedUri,r,o):"dash"===a&&(g=new yf(m.playlists[0],r,o,d)),m=ws.mergeOptions({id:f,playlistLoader:g},m),gm[e](e,m.playlistLoader,i),c[p].push(m),void 0===h[f]){var y=n.addRemoteTextTrack({id:f,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:f},!1).track;h[f]=y}}s.on("error",mm[e](e,i))},"CLOSED-CAPTIONS":function t(e,i){var n=i.tech,r=i.master.mediaGroups,a=i.mediaTypes[e],s=a.groups,o=a.tracks;for(var u in r[e])for(var l in s[u]||(s[u]=[]),r[e][u]){var c=r[e][u][l];if(c.instreamId.match(/CC\d/)&&(s[u].push(ws.mergeOptions({id:l},c)),void 0===o[l])){var h=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default&&c.autoselect,language:c.language,label:l},!1).track;o[l]=h}}}},bm=function t(e,i){return function(t){var n=i.masterPlaylistLoader,r=i.mediaTypes[e].groups,a=n.media();if(!a)return null;var s=null;return a.attributes[e]&&(s=r[a.attributes[e]]),s=s||r.main,void 0===t?s:null===t?null:s.filter(function(e){return e.id===t.id})[0]||null}},Tm={AUDIO:function t(e,i){return function(){var t=i.mediaTypes[e].tracks;for(var n in t)if(t[n].enabled)return t[n];return null}},SUBTITLES:function t(e,i){return function(){var t=i.mediaTypes[e].tracks;for(var n in t)if("showing"===t[n].mode)return t[n];return null}}},Sm=function t(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){_m[t](t,e)});var i=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,a=e.hls;["AUDIO","SUBTITLES"].forEach(function(t){i[t].activeGroup=bm(t,e),i[t].activeTrack=Tm[t](t,e),i[t].onGroupChanged=pm(t,e),i[t].onTrackChanged=fm(t,e)});var s=i.AUDIO.activeGroup(),o=(s.filter(function(t){return t.default})[0]||s[0]).id;i.AUDIO.tracks[o].enabled=!0,i.AUDIO.onTrackChanged(),n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return i[t].onGroupChanged()})});var u=function t(){i.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};for(var l in r.audioTracks().addEventListener("change",u),r.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),a.on("dispose",function(){r.audioTracks().removeEventListener("change",u),r.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),i.AUDIO.tracks)r.audioTracks().addTrack(i.AUDIO.tracks[l])},km=function t(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:_f,activeTrack:_f,onGroupChanged:_f,onTrackChanged:_f}}),e},wm=120,Cm=void 0,Em=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Am=function t(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Lm=function(t){function i(t){ld(this,i);var e=pd(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),n=t.url,r=t.withCredentials,a=t.tech,s=t.bandwidth,o=t.externHls,u=t.useCueTags,l=t.blacklistDuration,c=t.enableLowInitialPlaylist,h=t.sourceType,d=t.seekTo;if(!n)throw new Error("A non-empty playlist URL is required");Cm=o,e.withCredentials=r,e.tech_=a,e.hls_=a.hls,e.seekTo_=d,e.sourceType_=h,e.useCueTags_=u,e.blacklistDuration=l,e.enableLowInitialPlaylist=c,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:e.withCredentials,timeout:null},e.mediaTypes_=km(),e.mediaSource=new ws.MediaSource,e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_.bind(e)),e.seekable_=ws.createTimeRanges(),e.hasPlayed_=function(){return!1},e.syncController_=new um(t),e.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new lm,e.inbandTextTracks_={};var p={hls:e.hls_,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function t(){return e.seekable()},seeking:function t(){return e.tech_.seeking()},duration:function t(){return e.mediaSource.duration},hasPlayed:function t(){return e.hasPlayed_()},goalBufferLength:function t(){return e.goalBufferLength()},bandwidth:s,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_};return e.masterPlaylistLoader_="dash"===e.sourceType_?new yf(n,e.hls_,e.withCredentials):new Cd(n,e.hls_,e.withCredentials),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new tm(ws.mergeOptions(p,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),t),e.audioSegmentLoader_=new tm(ws.mergeOptions(p,{loaderType:"audio"}),t),e.subtitleSegmentLoader_=new nm(ws.mergeOptions(p,{loaderType:"vtt"}),t),e.setupSegmentLoaderListeners_(),Em.forEach(function(t){e[t+"_"]=Am.bind(e,t)}),e.logger_=vf("MPC"),e.masterPlaylistLoader_.load(),e}return dd(i,t),cd(i,[{key:"setupMasterPlaylistLoaderListeners_",value:function t(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;Yd(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Sm({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return ws.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var i=void 0;return e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var n=function t(){var i=e.seekable();0!==i.length&&e.mediaSource.addSeekableRange_(i.start(0),i.end(0))};if(e.duration()!==1/0){var r=function t(){e.duration()===1/0?n():e.tech_.one("durationchange",t)};e.tech_.one("durationchange",r)}else n()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;Yd(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media(),i;e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function t(e,i){var n=e.mediaGroups||{},r=!0,a=Object.keys(n.AUDIO);for(var s in n.AUDIO)for(var o in n.AUDIO[s]){var u;n.AUDIO[s][o].uri||(r=!1)}r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Cm.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Cm.Playlist.isFmp4(i)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.length&&Object.keys(n.AUDIO[a[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function t(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),r=n.length?n.end(n.length-1)-e.tech_.currentTime():0,a=e.bufferLowWaterLine();(!i.endList||e.duration()<Tf.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<i.attributes.BANDWIDTH||r>=a)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function t(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function t(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function t(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function t(){var e=this,i=this.selectPlaylist();i!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(i),this.mainSegmentLoader_.resetEverything(function(){ws.browser.IE_VERSION||ws.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function t(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function t(){var e=this,i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_())return!1;if(!i.endList){var n=this.seekable();if(!n.length)return!1;if(ws.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function t(){try{this.setupSourceBuffers_()}catch(t){return ws.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(t){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function t(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function t(e){var i;if(!this.seekable().length)return!1;var n=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===n)return!1;var r=Cm.Playlist.playlistEnd(e,n),a=this.tech_.currentTime(),s=this.tech_.buffered();if(!s.length)return r-a<=.1;var o=s.end(s.length-1);return o-a<=.1&&r-o<=.1}},{key:"blacklistCurrentPlaylist",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=void 0,r=void 0;if(n=e.playlist||this.masterPlaylistLoader_.media(),i=i||e.blacklistDuration||this.blacklistDuration,!n){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var a=1===this.masterPlaylistLoader_.master.playlists.filter(Hd).length;return a?(ws.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a)):(n.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),r=this.selectPlaylist(),ws.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(r))}},{key:"pauseLoading",value:function t(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function t(e){var i=_p(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?i&&i.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function t(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Cm.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function t(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function t(){var e=void 0,i=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var r=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==r&&0!==(e=Cm.Playlist.seekable(n,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(i=Cm.Playlist.seekable(n,r)).length)return}i?i.start(0)>e.end(0)||e.start(0)>i.end(0)?this.seekable_=e:this.seekable_=ws.createTimeRanges([[i.start(0)>e.start(0)?i.start(0):e.start(0),i.end(0)<e.end(0)?i.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+Sp(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function t(){var e=this,i=this.mediaSource.duration,n=Cm.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),a=function t(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};r.length>0&&(n=Math.max(n,r.end(r.length-1))),i!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",a):a())}},{key:"dispose",value:function t(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function t(){return this.masterPlaylistLoader_.master}},{key:"media",value:function t(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function t(){var e=this.masterPlaylistLoader_.media(),i=void 0;if(e&&"open"===this.mediaSource.readyState){if((i=Qp(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(i),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function t(e){var i=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new ws.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],i),e[1]&&this.audioSegmentLoader_.mimeType(e[1],i)}},{key:"excludeUnsupportedVariants_",value:function t(){this.master().playlists.forEach(function(t){t.attributes.CODECS&&e.MediaSource&&e.MediaSource.isTypeSupported&&!e.MediaSource.isTypeSupported('video/mp4; codecs="'+Gp(t.attributes.CODECS)+'"')&&(t.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function t(e){var i=2,n=null,r=void 0;e.attributes.CODECS&&(r=Wp(e.attributes.CODECS),n=r.videoCodec,i=r.codecCount),this.master().playlists.forEach(function(t){var e={codecCount:2,videoCodec:null};t.attributes.CODECS&&(e=Wp(t.attributes.CODECS)),e.codecCount!==i&&(t.excludeUntil=1/0),e.videoCodec!==n&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function t(e){var i=0,n=this.seekable();n.length&&(i=n.start(0)),am(e,this.cueTagsTrack_,i)}},{key:"goalBufferLength",value:function t(){var e=this.tech_.currentTime(),i=Tf.GOAL_BUFFER_LENGTH,n=Tf.GOAL_BUFFER_LENGTH_RATE,r=Math.max(i,Tf.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*n,r)}},{key:"bufferLowWaterLine",value:function t(){var e=this.tech_.currentTime(),i=Tf.BUFFER_LOW_WATER_LINE,n=Tf.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(i,Tf.MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*n,r)}}]),i}(ws.EventTarget),Om=function t(e,i,n){return function(t){var r=e.master.playlists[i],a=Vd(r),s=Hd(r);return void 0===t?s:(t?delete r.disabled:r.disabled=!0,t===s||a||(n(),t?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),t)}},Pm=function t(e,i,n){ld(this,t);var r=e.masterPlaylistController_,a,s,o=r[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(r);if(i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=n,this.enabled=Om(e.playlists,i.uri,o)},Um=function t(e){var i=e.playlists;e.representations=function(){return i.master.playlists.filter(function(t){return!Vd(t)}).map(function(t,i){return new Pm(e,t,t.uri)})}},Im=["seeking","seeked","pause","playing","error"],xm=function(){function t(i){var n=this;ld(this,t),this.tech_=i.tech,this.seekable=i.seekable,this.seekTo=i.seekTo,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=vf("PlaybackWatcher"),this.logger_("initialize");var r=function t(){return n.monitorCurrentTime_()},a=function t(){return n.techWaiting_()},s=function t(){return n.cancelTimer_()},o=function t(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",o),this.tech_.on("waiting",a),this.tech_.on(Im,s),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",o),n.tech_.off("waiting",a),n.tech_.off(Im,s),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&e.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return cd(t,[{key:"monitorCurrentTime_",value:function t(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&e.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=e.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function t(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===e&&(!i.length||e+.1>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function t(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function t(){var e=this.tech_.seeking(),i=this.seekable(),n=this.tech_.currentTime(),r=void 0,a,s;e&&this.afterSeekableWindow_(i,n)&&(r=i.end(i.length-1));e&&this.beforeSeekableWindow_(i,n)&&(r=i.start(0)+.1);return void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+Sp(i)+". Seeking to "+r+"."),this.seekTo(r),!0)}},{key:"waiting_",value:function t(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),i=this.tech_.buffered(),n=_p(i,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function t(){var e=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,i)){var n=e.end(e.length-1)
;return this.logger_("Fell out of live window at time "+i+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),a=bp(r,i);if(this.videoUnderflow_(a,r,i))return this.cancelTimer_(),this.seekTo(i),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(a.length>0){var s=a.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+s+", seeking to "+a.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,i),!0}return!1}},{key:"afterSeekableWindow_",value:function t(e,i){return!!e.length&&i>e.end(e.length-1)+.1}},{key:"beforeSeekableWindow_",value:function t(e,i){return!!(e.length&&e.start(0)>0&&i<e.start(0)-.1)}},{key:"videoUnderflow_",value:function t(e,i,n){if(0===e.length){var r=this.gapFromVideoUnderflow_(i,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function t(e){var i=this.tech_.buffered(),n=this.tech_.currentTime(),r=bp(i,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.seekTo(r.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function t(e,i){for(var n=Tp(e),r=0;r<n.length;r++){var a=n.start(r),s=n.end(r);if(i-a<4&&i-a>2)return{start:a,end:s}}return null}}]),t}(),Dm={errorInterval:30,getSource:function t(e){var i,n;return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Rm=function t(e,i){var n=0,r=0,a=ws.mergeOptions(Dm,i);e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function t(){r&&e.currentTime(r)},o=function t(i){null!=i&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(i),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function t(){if(Date.now()-n<1e3*a.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return n=Date.now(),a.getSource.call(e,o);ws.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function t(){e.off("loadedmetadata",s),e.off("error",u),e.off("dispose",t)},c=function i(n){l(),t(e,n)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=c},Mm=function t(e){Rm(this,e)},Bm="1.5.1";ws.use("*",function(t){return{setSource:function t(e,i){i(null,e)},setCurrentTime:function e(i){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(i),i},play:function e(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.currentTime())}}});var Nm={PlaylistLoader:Cd,Playlist:$d,Decrypter:od,AsyncStream:rd,decrypt:sd,utils:op,STANDARD_PLAYLIST_SELECTOR:qf,INITIAL_PLAYLIST_SELECTOR:Wf,comparePlaylistBandwidth:Ff,comparePlaylistResolution:Vf,xhr:Jd()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(Nm,t,{get:function e(){return ws.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Tf[t]},set:function e(i){ws.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof i||i<0?ws.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Tf[t]=i}})});var jm="videojs-vhs",Fm=function t(e){var i,n;return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null},Vm=function t(e,i){for(var n=i.media(),r=-1,a=0;a<e.length;a++)if(e[a].id===n.uri){r=a;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},Hm=function t(e,i){i.representations().forEach(function(t){e.addQualityLevel(t)}),Vm(e,i.playlists)};Nm.canPlaySource=function(){return ws.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var qm=function t(e,i,n){if(!e)return e;var r={};for(var a in e)r[a]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+i.attributes.CODECS+'"'},i.contentProtection&&i.contentProtection[a]&&i.contentProtection[a].pssh&&(r[a].pssh=i.contentProtection[a].pssh),"string"==typeof e[a]&&(r[a].url=e[a]);return ws.mergeOptions(e,r)},zm=function t(e){if("dash"===e.options_.sourceType){var i=ws.players[e.tech_.options_.playerId];if(i.eme){var n=qm(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(i.currentSource().keySystems=n,i.eme.initializeMediaKeys&&i.eme.initializeMediaKeys())}}},Wm=function t(){if(!window.localStorage)return null;var e=window.localStorage.getItem("videojs-vhs");if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},Gm=function t(e){if(!window.localStorage)return!1;var i=Wm();i=i?ws.mergeOptions(i,e):e;try{window.localStorage.setItem("videojs-vhs",JSON.stringify(i))}catch(t){return!1}return i},Xm,Ym;Nm.supportsNativeHls=(Xm=t.createElement("video"),!!ws.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(Xm.canPlayType(t))})),Nm.supportsNativeDash=!!ws.getTech("Html5").isSupported()&&/maybe|probably/i.test(t.createElement("video").canPlayType("application/dash+xml")),Nm.supportsTypeNatively=function(t){return"hls"===t?Nm.supportsNativeHls:"dash"===t&&Nm.supportsNativeDash},Nm.isSupported=function(){return ws.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var $m,Km=function(e){function i(e,n,r){ld(this,i);var a=pd(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,r.hls));if(n.options_&&n.options_.playerId){var s=ws(n.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function t(){return ws.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),a},configurable:!0}),s.vhs=a,s.dash=a,a.player_=s}if(a.tech_=n,a.source_=e,a.stats={},a.setOptions_(),a.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(t,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var i=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;i&&i.contains(a.tech_.el())&&a.masterPlaylistController_.smoothQualityChange_()}),a.on(a.tech_,"seeking",function(){this.tech_.seeking()&&0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),a.on(a.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}return dd(i,e),cd(i,[{key:"setOptions_",value:function t(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var i=Wm();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Tf.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Tf.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function t(e,i){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Nm,this.options_.sourceType=Fm(i),this.options_.seekTo=function(t){n.tech_.setCurrentTime(t),n.setCurrentTime(t)},this.masterPlaylistController_=new Lm(this.options_),this.playbackWatcher_=new xm(ws.mergeOptions(this.options_,{seekable:function t(){return n.seekable()}})),this.masterPlaylistController_.on("error",function(){var t;ws.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Nm.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Nm.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function t(){return this.masterPlaylistController_.selectPlaylist},set:function t(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function t(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function t(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function t(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function t(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function t(){var e=1/(this.bandwidth||1),i=void 0,n;return i=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+i))},set:function t(){ws.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function t(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function t(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function t(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function t(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function t(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function t(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function t(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function t(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function t(){return wp(n.tech_.buffered())},enumerable:!0},currentTime:{get:function t(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function t(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function t(){return n.tech_.name_},enumerable:!0},duration:{get:function t(){return n.tech_.duration()},enumerable:!0},master:{get:function t(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function t(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function t(){return wp(n.tech_.seekable())},enumerable:!0},timestamp:{get:function t(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function t(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&Gm({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Um(n),zm(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(ws.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function t(){var e=this,i=ws.players[this.tech_.options_.playerId];i&&i.qualityLevels&&(this.qualityLevels_=i.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Hm(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Vm(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function t(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function t(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function t(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function t(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function t(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,hd(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"dispose",this).call(this)}},{key:"convertToStreamTime",value:function t(e,i){return fp({playlist:this.masterPlaylistController_.media(),time:e,callback:i})}},{key:"seekToStreamTime",value:function t(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return mp({streamTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}]),i}(ws.getComponent("Component")),Qm={name:"videojs-http-streaming",VERSION:"1.5.1",canHandleSource:function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ws.mergeOptions(ws.options,i);return Qm.canPlayType(e.type,n)},handleSource:function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ws.mergeOptions(ws.options,n);return i.hls=new Km(e,i,r),i.hls.xhr=Jd(),i.hls.src(e.src,e.type),i.hls},canPlayType:function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n,r=ws.mergeOptions(ws.options,i).hls.overrideNative,a=Fm(e),s;return a&&(!Nm.supportsTypeNatively(a)||r)?"maybe":""}};return void 0!==ws.MediaSource&&void 0!==ws.URL||(ws.MediaSource=df,ws.URL=pf),df.supportsNativeMediaSources()&&ws.getTech("Html5").registerSourceHandler(Qm,0),ws.HlsHandler=Km,ws.HlsSourceHandler=Qm,ws.Hls=Nm,ws.use||ws.registerComponent("Hls",Nm),ws.options.hls=ws.options.hls||{},ws.registerPlugin?ws.registerPlugin("reloadSourceOnError",Mm):ws.plugin("reloadSourceOnError",Mm),ws}),function(){var t,e;t=window,(e=t&&t.videojs)&&(e.CDN_VERSION="7.4.1")}();