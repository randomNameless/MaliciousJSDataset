!function(){"use strict";var n={91257:function(e,t,n){n.r(t),n.d(t,{ErrorBoundary:function(){return o},useErrorBoundary:function(){return r}});var i=n(41594);class o extends i.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){var n,i=null==(i=window.abebooks)?void 0:i.awsRum;i&&i.recordError(e),null!=(n=(i=this.props).onError)&&n.call(i,e,t)}render(){var e;return this.state.hasError?null!=(e=this.props.showIfError)?e:null:this.props.children}}function r(){const[e,t]=(0,i.useState)({error:null,hasError:!1}),n=(0,i.useMemo)(()=>({showBoundary:e=>t({error:e,hasError:!0})}),[]);if(e.hasError)throw e.error;return n}},81111:function(e,t,n){var i,o,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},u=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},g=(Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelectAutoSuggestForm=void 0,p(n(88810))),d=l(n(41594)),p=(o=d.Component,r(f,o),f.prototype.componentDidUpdate=function(){this.addUlSuggestionsListAttributes(),this.removeInputAriaControlsAttribute()},f.prototype.componentDidMount=function(){this.removeInputAriaControlsAttribute()},f.prototype.render=function(){var t=this,e=0<this.state.suggestions.length,n=c({},e&&((n={})["aria-controls"]=this.suggestionsListId,n)),i=this.state.selections.length>=this.props.selectionLimit,o=0<this.state.selections.length,r=i?d.createElement("div",{id:"".concat(this.props.idPrefix,"-selection-limit-warning"),className:"".concat(this.props.idPrefix,"-selection-limit")},this.props.selectionLimitWarning):null,a=o&&!i?d.createElement("div",{id:"".concat(this.props.idPrefix,"-selection-limit-label"),className:"".concat(this.props.idPrefix,"-selection-limit")},this.props.selectionLimitLabel):null,s=i?"".concat(this.props.idPrefix,"-selection-limit-warning"):o?"".concat(this.props.idPrefix,"-selection-limit-label"):null,o=this.props.hiddenFormInputProps&&o?d.createElement("input",{id:"".concat(this.props.idPrefix,"-selection-input"),type:"hidden",name:this.props.hiddenFormInputProps.inputName,value:this.props.hiddenFormInputProps.selectionsToHiddenFormInputValue(this.state.selections),"data-preference-param":this.props.relevantToSearchPreferences&&!this.state.selectionsEdited?"on":null}):null,l=this.state.selections.map(function(e){return d.createElement("div",{className:"selected-pill",key:e},d.createElement("strong",null,e),d.createElement("button",{className:"selected-pill-remove",type:"button","aria-label":t.props.selectedPillRemoveAriaLabel.replace(/\{.*\}/,e),onClick:function(){t.removeSelection(e)}},d.createElement("img",{width:"13px",height:"13px",src:"/cdn/shared/images/common/icons/icon_close_delete.svg","aria-hidden":!0,alt:""})))}),u=this.props.inputClassName||"react-autosuggest__input",i=(i&&(u=u.concat(" error-focus")),c(c({},n),{"aria-label":this.props.inputAriaLabel,"aria-expanded":e,"aria-describedby":s,className:u,id:"".concat(this.props.idPrefix,"-input"),onChange:this.onInputChange,placeholder:this.props.inputPlaceholder,role:"combobox",spellCheck:!1,tabIndex:this.props.inputTabIndex,type:this.props.inputType,value:this.state.value}));return d.createElement("div",null,d.createElement(g.default,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:f.getSuggestionValue,shouldRenderSuggestions:function(){return!0},renderSuggestion:this.props.renderSuggestion,renderSuggestionsContainer:this.renderSuggestionsContainer,focusInputOnSuggestionClick:!1,inputProps:i,id:"".concat(this.props.idPrefix,"-autosuggest"),ref:this.autoSuggestInputRef}),a,r,o,d.createElement("div",{id:"".concat(this.props.idPrefix,"-selected-pills-container")},l),d.createElement("div",{id:"".concat(this.props.idPrefix,"-buttons-container")},this.props.applyButtonProps&&d.createElement("button",{id:"".concat(this.props.idPrefix,"-apply-button"),className:"btn btn-primary","data-test-id":"".concat(this.props.idPrefix,"-apply-button"),"aria-label":this.props.applyButtonProps.ariaLabel,onClick:function(){return t.props.applyButtonProps.execute(t.state.selections)}},this.props.applyButtonProps.text),this.props.cancelButtonProps&&d.createElement("button",{id:"".concat(this.props.idPrefix,"-cancel-button"),className:"btn btn-default","data-test-id":"".concat(this.props.idPrefix,"-cancel-button"),"aria-label":this.props.cancelButtonProps.ariaLabel,onClick:function(){return t.props.cancelButtonProps.execute(t.state.selections)}},this.props.cancelButtonProps.text),this.props.clearButtonProps&&d.createElement("button",{id:"".concat(this.props.idPrefix,"-clear-button"),"data-test-id":"".concat(this.props.idPrefix,"-clear-button"),"aria-label":this.props.clearButtonProps.ariaLabel,onClick:function(){t.clearSelections(),t.props.clearButtonProps.execute([])}},this.props.clearButtonProps.text)))},f.defaultRenderSuggestion=function(e,t){for(var t=t.query,n=new RegExp(t,"i"),i=e.split(n),o=t.length,r=0,a=0;a<i.length-1;a+=2)r+=i[a].length,i.splice(a+1,0,d.createElement("b",null,e.substring(r,r+o))),r+=o;return d.createElement("div",null,i)},f.getSuggestionValue=function(e){return e},f.defaultProps={idPrefix:"multiselect-autosuggest",renderSuggestion:f.defaultRenderSuggestion,inputType:"search"},f);function f(e){var n=o.call(this,e)||this;return n.autoSuggestInputRef=d.createRef(),n.onInputChange=function(e,t){t=t.newValue;n.setState({value:t})},n.onSuggestionsFetchRequested=function(e){e=e.value;n.setState({suggestions:n.props.getSuggestions(e).filter(function(e){return n.props.convertSuggestionIntoSelection&&(e=n.props.convertSuggestionIntoSelection(e)),!n.state.selections.includes(e)})})},n.onSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.onSuggestionSelected=function(e,t){e.preventDefault();e=n.props.convertSuggestionIntoSelection?n.props.convertSuggestionIntoSelection(t.suggestionValue):t.suggestionValue;n.addSelection(e),n.clearInput()},n.clearInput=function(){n.setState({value:""})},n.addSelection=function(e){n.setState({selectionsEdited:!0}),n.state.selections.length<n.props.selectionLimit&&n.state.selections.push(e)},n.removeSelection=function(e){n.setState({selectionsEdited:!0}),n.state.selections.splice(n.state.selections.indexOf(e),1)},n.clearSelections=function(){n.setState({selections:[],selectionsEdited:!0})},n.removeInputAriaControlsAttribute=function(){var e=document.getElementById("react-autowhatever-".concat(n.props.idPrefix,"-input")),e=("false"===(null==e?void 0:e.getAttribute("aria-expanded"))&&e.removeAttribute("aria-controls"),document.querySelector("[aria-owns=react-autowhatever-".concat(n.props.idPrefix,"-input]")));null!=e&&e.removeAttribute("role")},n.addUlSuggestionsListAttributes=function(){var e=document.getElementById("react-autowhatever-".concat(n.props.idPrefix,"-autosuggest"));e&&0<(e=e.getElementsByClassName("react-autosuggest__suggestions-list")).length&&((e=e[0]).hasAttribute("aria-label")||e.setAttribute("aria-label","suggestions"),e.hasAttribute("id")||e.setAttribute("id",n.suggestionsListId))},n.renderSuggestionsContainer=function(e){var t=e.containerProps,e=e.children,t=(t.role,u(t,["role"]));return d.createElement("div",c({},t),e)},n.state={value:e.inputValue||"",suggestions:[],selections:Array.from(e.initialSelections)||[],selectionsEdited:!1},n.suggestionsListId="".concat(e.idPrefix,"-suggestions-list"),n}t.MultiSelectAutoSuggestForm=p},92798:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.getLangParamValue=t.applySelection=t.removeFacetCounts=t.getSuggestions=t.LANGUAGE_FILTER_LIMIT=void 0,r(n(41594))),s=r(n(75206)),l=n(81111),u=n(91257);t.LANGUAGE_FILTER_LIMIT=5;var c,p=window.autoSuggestLanguageNamesList,g=window.autoSuggestLanguageNameToSearchLanguageMap,d=window.languageFilterTranslationsMap,f=window.initialFilteredLanguageNames,r=document.getElementById("language-refinement-container");function h(t){return t?(t=t.toLowerCase(),p.filter(function(e){return m(e).toLowerCase().includes(t)})):p}function m(e){return e.replace(/\[.*\]/,"").trim()}function b(e){var t=new Map,n=(0<window.location.search.length&&(t=new Map(window.location.search.substring(1).split("&").map(function(e){return e.split("=")}).map(function(e){return[e[0],e[1]]}))).delete("lang"),0<e.length&&t.set("lang",v(e)),"?");t.forEach(function(e,t){n=n.concat("".concat(t,"=").concat(e,"&"))}),n=n.substring(0,n.length-1),window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+n}function v(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n],o=g[m(o)];o&&t.push(o)}return t.join(",")}function S(){s.unmountComponentAtNode(document.getElementById("language-refinement-container")),document.getElementById("language-refinement-container").outerHTML=c.outerHTML,y()}function y(){var e=document.getElementById("open-language-edit-panel-button");e&&(e.onclick=function(){s.render(a.createElement("div",{id:"language-refinement-container",className:"language-refinement-container-multiselect-autosuggest","data-test-id":"language-refinement-container","aria-labelledby":"language-refinement-heading"},a.createElement("h3",{id:"language-refinement-heading"},d.language," (",p.length,")"),a.createElement(u.ErrorBoundary,null,a.createElement(l.MultiSelectAutoSuggestForm,{idPrefix:"language-filter",inputAriaLabel:d.language,inputType:"search",inputValue:"",inputClassName:"language-filter-input",inputTabIndex:0,inputPlaceholder:d["language-autosuggest-placeholder"],selectionLimit:t.LANGUAGE_FILTER_LIMIT,selectionLimitLabel:d["language-limit-info"],selectionLimitWarning:d["language-limit-warning"],initialSelections:f,selectedPillRemoveAriaLabel:d["language-pill-remove-aria"],applyButtonProps:{execute:b,ariaLabel:d["language-apply-filters-accessible-text"],text:d["language-apply-filters"]},cancelButtonProps:{execute:S,text:d["language-cancel-edit"]},clearButtonProps:{execute:b,text:d["language-clear"]},getSuggestions:h,convertSuggestionIntoSelection:m}))),document.getElementById("language-refinement-container"))})}r&&(c=r.cloneNode(!0)),t.getSuggestions=h,t.removeFacetCounts=m,t.applySelection=b,t.getLangParamValue=v,y();var P=document.getElementsByClassName("language-filter");Object.keys(P).forEach(function(e){e=P[e];s.render(a.createElement(u.ErrorBoundary,null,a.createElement(l.MultiSelectAutoSuggestForm,{idPrefix:"language-filter",inputAriaLabel:d.language,inputType:"search",inputValue:"",inputClassName:"language-filter-input",inputTabIndex:0,inputPlaceholder:d["language-autosuggest-placeholder"],selectionLimit:t.LANGUAGE_FILTER_LIMIT,selectionLimitLabel:d["language-limit-info"],selectionLimitWarning:d["language-limit-warning"],initialSelections:f,selectedPillRemoveAriaLabel:d["language-pill-remove-aria"],applyButtonProps:{execute:b,ariaLabel:d["language-apply-filters-accessible-text"],text:d["language-apply-filters"]},getSuggestions:h,convertSuggestionIntoSelection:m})),e)})},88810:function(e){e.exports=Autosuggest},41594:function(e){e.exports=React},75206:function(e){e.exports=ReactDOM}},i={};function o(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},n[e].call(t.exports,t,t.exports,o)),t.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(92798)}();