!function(e){window.Edu=window.Edu||{},window.Edu.cache={prefix:"educ-"},window.Edu.api={invalidateStudentsCache:function(){window.Edu.memberId&&window.Edu.api._invalidate("api.getStudents.v1."+window.Edu.memberId)},getStudents:function(e,n){return new Promise(function(i,d){var o=function(n,o){e&&e(n,o),n?d(Error(n)):i(o)};if(window.Edu.memberId){var t="api.getStudents.v1."+window.Edu.memberId;window.Edu.api._get(t,"/api/children",{},function(e){return e.children},o,n)}else o("No member id")})},invalidateAllGroupsCache:function(){window.Edu.memberId&&window.Edu.api._invalidate("api.getAllGroups.v1."+window.Edu.memberId)},getAllGroups:function(e){return new Promise(function(n,i){var d=function(e,d){e?i(Error(e)):n(d)};if(window.Edu.memberId){var o="api.getAllGroups.v1."+window.Edu.memberId;window.Edu.api._get(o,"/api/children/groups",{},function(e){return e.groups},d,e)}else d("No member id")})},invalidateStudentGroupsCache:function(){window.Edu.memberId&&window.Edu.api._invalidate("api.getStudentGroups.v1."+window.Edu.memberId)},getStudentGroups:function(e,n){return new Promise(function(i,d){var o=function(n,o){e&&e(n,o),n?d(Error(n)):i(o)};if(window.Edu.memberId){var t="api.getStudentGroups.v1."+window.Edu.memberId;window.Edu.api._get(t,"/api/children/groups",{},function(e){return e.groups},o,n)}else o("No member id")})},_invalidate:function(e){e&&"fetching"!==window.Edu.cache[e]&&(window.Edu.cache[e]=null,window.localStorage.removeItem(window.Edu.cache.prefix+e))},_get:function(n,i,d,o,t,r){if(n){if(!r&&window.Edu.cache[n])return"fetching"===window.Edu.cache[n]?void window.setTimeout(function(){window.Edu.api._get(n,i,d,o,t,r)},200):void t(null,window.Edu.cache[n]);window.Edu.cache[n]="fetching"}if(window.location.href.match(/\bnocache\b/)&&(r=!0),!r){var u=window.localStorage.getItem(window.Edu.cache.prefix+n);if(u){var w=JSON.parse(u);if(w&&w.data&&w.expires&&w.expires>(new Date).getTime())return window.Edu.cache[n]=w.data,void t(null,window.Edu.cache[n]);window.localStorage.removeItem(window.Edu.cache.prefix+n)}}e.get(i,d,function(e){if(e){if(o)try{e=o(e)}catch(e){return void t(e)}if(n){window.Edu.cache[n]=e;try{window.localStorage.setItem(window.Edu.cache.prefix+n,JSON.stringify({data:e,timeCached:(new Date).getTime()/1e3,expires:(new Date).getTime()+12e5}))}catch(e){}}t(null,e)}else t("Failed to load "+n)}).fail(function(){t("Failed to load "+n)})}},e(document).ajaxSend(function(e,n,i){-1!==window.jQuery.inArray(i.type.toLowerCase(),["post","put","patch","delete"])&&"/api/"===i.url.substring(0,5).toLowerCase()&&(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.data&&i.data.length?i.data+="&"+window.jQuery.param({csrfToken:window.Edu.csrfToken}):i.data=window.jQuery.param({csrfToken:window.Edu.csrfToken}))}),e(document).ajaxComplete(function(e,n,i){if(!("expiredSessionRefresh"in window.Edu.queryString)&&n&&403===n.status&&i&&"POST"===i.type&&"expiredSessionRefresh"in n.responseJSON){var d=window.location.href;window.Edu.queryString.length?d+="&expiredSessionRefresh=true":d+="?expiredSessionRefresh=true",window.location=d}}),window.Edu.openOnboarding=function(n){n=n||{},e(".new-ppo-confirmation").hide(),window.Edu.reactDispatch("openOnboardingOverlay",Object.assign(n))},window.Edu.queryString={},document.location.search.replace(/(^\?)/,"").split("&").map(function(e){(e=e.split("="))[0]&&e[1]&&(window.Edu.queryString[e[0]]=e[1])});var n=["trackPurchase","trackEvent","reactDispatch","openLogin","openSignup","modal","lazyload","lazyloadall","assignment","openOnboarding"];window.EduQueue=[];for(var i=0;i<n.length;i++)!function(e){window.Edu[n[e]]=function(){window.EduQueue.push([n[e],arguments])}}(i);jQuery.fn.modal=function(e){return window.Edu.modal(this,e,Array.prototype.slice.call(arguments,1)),this},jQuery.fn.lazyloadall=function(){return window.Edu.lazyloadall(this),this},window.Edu.prefixCDN=function(e){if(!e)return"";if(window.CDNfail)return e;var n="http://"===e.substring(0,7)||"https://"===e.substring(0,8);return n||"/"===e[0]||(e="/"+e),window.Edu.cdn&&(n?"http://www.education.com"===e.substring(0,24)?e=window.Edu.cdn+e.substring(24):"https://www.education.com"===e.substring(0,25)&&(e=window.Edu.cdn+e.substring(25)):e=window.Edu.cdn+e),e}}(window.jQuery||window.Zepto);
//# sourceMappingURL=utilities.de2a58e277.js.map