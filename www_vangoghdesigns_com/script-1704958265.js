var variantImageAutomator=function(){function find_current_variant(section){var variant_id,element=section||document;default_variant=0==default_variant?Object.keys(product_variants)[0]:default_variant;var queries={};if(document.location.search.substr(1).split("&").forEach((function(q){var i=q.split("=");try{queries[i[0].toString()]=i[1].toString()}catch(err){}})),isNaN(queries.variant)){let selector=element.querySelector('form[action="/cart/add"] [name="id"]:checked')||element.querySelector('form[action="/cart/add"] [name="id"]')||element.querySelector('select[name="id"]')||element.querySelector('[name="id"]');variant_id=selector?selector.value:default_variant}else variant_id=queries.variant?queries.variant:element.querySelector("select option[value='"+default_variant+"']").parentNode.value;return variant_id||default_variant}function is_variant_in_url(){return document.location.search.indexOf("variant=")>=0}function find_current_variant_from_url(){var variant_id,queries={};return document.location.search.substr(1).split("&").forEach((function(q){var i=q.split("=");try{queries[i[0].toString()]=i[1].toString()}catch(err){}})),isNaN(queries.variant)?variant_id=null:queries.variant&&(variant_id=queries.variant),variant_id}function find_variant_images(variant_id){var variant_images;if(variant_id||(variant_id=find_current_variant()),variants.hasOwnProperty(variant_id)?variant_images=variants[variant_id]:(variant_id=find_current_variant_from_url(),variant_images=variants.hasOwnProperty(variant_id)?variants[variant_id]:variants[default_variant]),(!variant_images||0==variant_images.length)&&skip_showcase_image>=product_images.length)return product_images;if(!is_home&&"no_action"!=only_run_if_variant_in_url&&!is_variant_in_url()){function showcase_images(){return variants.g.length?variants.g:variant_assigned_images}function skipped_and_showcase_images(){let images=variants.skipped.concat(variants.g);return images.length?images:variant_assigned_images}if(selection_vid=0,"showcase_only"==only_run_if_variant_in_url)return showcase_images();if("showcase_and_variants"==only_run_if_variant_in_url)return variants.g.concat(variant_assigned_images);if("featured_only"==only_run_if_variant_in_url)return[product_images[0]];if("featured_and_showcase"==only_run_if_variant_in_url)return skip_showcase_image>0?[product_images[0]].concat(variants.g):showcase_images();if("skipped_and_showcase"==only_run_if_variant_in_url)return skipped_and_showcase_images();if("show_all"==only_run_if_variant_in_url)return product_images}return"at_start"==general_images_position?variant_images=variants.g.concat(variant_images):"at_end"==general_images_position&&(variant_images=variant_images.concat(variants.g)),variant_images&&0!=variant_images.length?variant_images:product_images}function is_array_equal(a1,a2){return JSON.stringify(a1)===JSON.stringify(a2)}function find_variant_media(variant_id){var variant_media;if(variant_id||(variant_id=find_current_variant()),variants_media.hasOwnProperty(variant_id)?variant_media=variants_media[variant_id]:(variant_id=find_current_variant_from_url(),variant_media=variants_media.hasOwnProperty(variant_id)?variants_media[variant_id]:variants_media[default_variant]),(!variant_media||0==variant_media.length)&&skip_showcase_image>=product_media.length)return product_media;if(!is_home&&"no_action"!=only_run_if_variant_in_url&&!is_variant_in_url()){function showcase_images(){return variants_media.g.length?variants_media.g:variant_assigned_media}function skipped_and_showcase_images(){let images=variants_media.skipped.concat(variants_media.g);return images.length?images:variant_assigned_media}if(selection_vid=0,"showcase_only"==only_run_if_variant_in_url)return showcase_images();if("showcase_and_variants"==only_run_if_variant_in_url)return variants_media.g.concat(variant_assigned_media);if("featured_only"==only_run_if_variant_in_url)return[product_media[0]];if("featured_and_showcase"==only_run_if_variant_in_url)return skip_showcase_image>0?[product_media[0]].concat(variants_media.g):showcase_images();if("skipped_and_showcase"==only_run_if_variant_in_url)return skipped_and_showcase_images();if("show_all"==only_run_if_variant_in_url)return product_media}return"at_start"==general_images_position?variant_media=variants_media.g.concat(variant_media):"at_end"==general_images_position&&(variant_media=variant_media.concat(variants_media.g)),variant_media&&0!=variant_media.length?priority_video?moveVideoToFront(variant_media):variant_media:product_media}function moveVideoToFront(arr){const videoIndex=arr.findIndex((obj=>"video"===obj.media_type||"external_video"===obj.media_type));if(videoIndex>-1){const videoObj=arr.splice(videoIndex,1)[0];arr.unshift(videoObj)}return arr}function destroyFlexslider(slider){if(slider&&slider.data("flexslider")){var classNamespace="."+(slider=slider.data("flexslider")).vars.namespace;slider.vars.controlNav&&slider.controlNav.closest(classNamespace+"control-nav").remove(),slider.vars.directionNav&&slider.directionNav.closest(classNamespace+"direction-nav").remove(),slider.vars.pausePlay&&slider.pausePlay.closest(classNamespace+"pauseplay").remove(),slider.find(".clone").remove(),slider.unbind(slider.vars.eventNamespace),"fade"!=slider.vars.animation&&slider.container.unwrap(),slider.container.removeAttr("style"),slider.container.unbind(slider.vars.eventNamespace),slider.slides.removeAttr("style"),slider.slides.filter(classNamespace+"active-slide").removeClass(slider.vars.namespace+"active-slide"),slider.slides.unbind(slider.vars.eventNamespace),$(document).unbind(slider.vars.eventNamespace+"-"+slider.id),$(window).unbind(slider.vars.eventNamespace+"-"+slider.id),slider.stop(),slider.removeData("flexslider")}$(".flex-control-nav").remove()}var quick_view_enabled=!1,skip_showcase_image=0,selected_theme_name="ShowTime",priority_video=!1,can_execute_script=!1,is_home=!1,only_run_if_variant_in_url="no_action",limit_on_product="none",product_url="",is_product_preview=window.location.href.toLowerCase().indexOf("/products_preview")>=0,is_product_page=/\/products\/|\/produkty\/|\/produkte\//.test(window.location.href.toLowerCase()),is_pages=(is_home="/"==window.location.pathname,window.location.pathname.indexOf("/pages/")>=0),variant_id=0,selection_vid=0,last_variant_images={};if((is_home||is_pages||is_product_page||is_product_preview)&&(can_execute_script=!0),quick_view_enabled)var jTimer=setInterval((function(){window.$&&window.jQuery&&clearInterval(jTimer)}),10);if(can_execute_script){if(is_home){if("Startup"==selected_theme_name)product_url=document.querySelector('[data-section-type="featured-product"] .product-title a')?document.querySelector('[data-section-type="featured-product"] .product-title a').href:"";else if("Flow"==selected_theme_name)product_url=document.querySelector("#product-box .product-details--form-wrapper a")?document.querySelector("#product-box .product-details--form-wrapper a").href:"";else if("Debut"==selected_theme_name);else if("Success theme"==selected_theme_name);else if("Supply V2"==selected_theme_name)product_url=document.querySelector('[data-section-type="product-template"] a.full-details')?document.querySelector('[data-section-type="product-template"] a.full-details').href:"";else if("Launch"==selected_theme_name)product_url=document.querySelector(".home-featured-product .product-title a")?document.querySelector(".home-featured-product .product-title a").href:"";else if("Responsive"==selected_theme_name)product_url=document.querySelector(".featured-product-section .product_name a")?document.querySelector(".featured-product-section .product_name a").href:"";else if("Streamline"==selected_theme_name);else if("Broadcast"==selected_theme_name)product_url=document.querySelector('[data-section-type="product"] .product__title a')?document.querySelector('[data-section-type="product"] .product__title a').href:"";else if("Palo Alto V2"==selected_theme_name)product_url=document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a')?document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a').href:"";else if("Startup V3"==selected_theme_name)product_url=document.querySelector(".product-title a")?document.querySelector(".product-title a").href:"";else if(["Turbo","Turbo Seoul","Turbo Florence","Turbo Portland","Turbo Chicago","Turbo Dubai","Turbo Tennessee"].indexOf(selected_theme_name)>=0)product_url=document.querySelector(".product_section .product_name a")?document.querySelector(".product_section .product_name a").href:"";else if("Palo Alto V3"==selected_theme_name)product_url=document.querySelector('[data-section-type="featured-product"] .featured-product-title a')?document.querySelector('[data-section-type="featured-product"] .featured-product-title a').href:"";else if("Warehouse"==selected_theme_name)product_url=document.querySelector('[data-section-type="product"]:last-child .product-meta__title a')?document.querySelector('[data-section-type="product"]:last-child .product-meta__title a').href:"";else if("Flex"==selected_theme_name)product_url=document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a")?document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a").href:"";else if(["Empire V5.1","Superstore V2"].indexOf(selected_theme_name)>=0){let product_links=document.querySelectorAll(".featured-product--container .product-link");product_url=product_links.length?product_links[product_links.length-1].href:""}product_url=product_url.replace(/\/$/,"").split("?")[0].split("#")[0]}else is_pages?("Broadcast"==selected_theme_name&&(product_url=document.querySelector('[data-section-type="product"] .product__title a')?document.querySelector('[data-section-type="product"] .product__title a').href:""),product_url=product_url.replace(/\/$/,"").split("?")[0].split("#")[0]):product_url=window.location.pathname.replace(/\/$/,"").replace("//","/");if(product_url.length&&(void 0===window.via_product_handle||window.via_product_handle!=product_url)){var productJson;window.via_product_handle=product_url;var variants={},product_variants={};variants.g=[],variants.skipped=[];var product_images=[],default_variant=0,general_images_position="at_end",variant_assigned_images=[],variants_media={},product_media=[];variants_media.g=[],variants_media.skipped=[];var variant_assigned_media=[],product_tags="",variant_assigned_images_ids=[],variant_assigned_media_ids=[],all_variant_media=[],all_variant_images=[];function assign_variants_media(productJson){product_media=productJson.media,productJson.variants.forEach((function(variant){variant.featured_image&&-1==variant_assigned_images_ids.indexOf(variant.featured_image.id)&&(variant_assigned_images_ids.push(variant.featured_image.id),variant_assigned_images.push(variant.featured_image)),variant.featured_media&&-1==variant_assigned_media_ids.indexOf(variant.featured_media.id)&&(variant_assigned_media_ids.push(variant.featured_media.id),variant_assigned_media.push(variant.featured_media)),!default_variant&&variant.available&&(default_variant=variant.id),variant.featured_media&&(all_variant_media[variant.featured_media.id]||(all_variant_media[variant.featured_media.id]=[]),all_variant_media[variant.featured_media.id].push(variant.id)),variants_media[variant.id]=[],variant.featured_image&&(all_variant_images[variant.featured_image.id]||(all_variant_images[variant.featured_image.id]=[]),all_variant_images[variant.featured_image.id].push(variant.id)),variants[variant.id]=[],product_variants[variant.id]=variant}));var general_media=!0,current_variant_ids=[];product_media.forEach((function(media,index){general_media&&-1==variant_assigned_media_ids.indexOf(media.id)?skip_showcase_image>0&&index<skip_showcase_image?variants_media.skipped.push(media):variants_media.g.push(media):(general_media=!1,(current_variant_ids=all_variant_media[media.id]?all_variant_media[media.id]:current_variant_ids).forEach((function(variant_id){variants_media[variant_id].push(media)})))}))}function assign_variant_images(images){var general_images=!0,current_variant_ids=[];(product_images=images).forEach((function(image,index){general_images&&-1==variant_assigned_images_ids.indexOf(image.id)?skip_showcase_image>0&&index<skip_showcase_image?variants.skipped.push(image):variants.g.push(image):(general_images=!1,(current_variant_ids=all_variant_images[image.id]?all_variant_images[image.id]:current_variant_ids).forEach((function(variant_id){variants[variant_id].push(image)})))}))}function is_correct_theme_selected(){let excluded_theme_names="Shogun Page Builder App, GemPages Page Builder App, LayoutHub Easy Page Builder App, MagicZoomPlus App, MyCustomTheme, PageFly Advanced Page Builder App",excluded_stores_domains=["e28ecc.myshopify.com"];if(window.BOOMR&&window.BOOMR.themeName){let theme_name="ShowTime".toLowerCase(),boomr_theme=window.BOOMR.themeName.toLowerCase();if(excluded_theme_names.includes(theme_name))return!0;if(!theme_name.includes(boomr_theme)&&"mycustomtheme"!==theme_name&&!excluded_stores_domains.includes(Shopify.shop))return console.log(`If StarApps Variant Image app is not working, please select ${window.BOOMR.themeName} as theme in app dashboard.`),!1}return!0}function is_restrictable(){return"include_selected"==limit_on_product&&0==/via_enabled|viaenabled|via-enabled|__via_enabled/.test(product_tags.toLowerCase())||"exclude_selected"==limit_on_product&&1==/via_disabled|via-disabled|viadisabled|__via_disabled/.test(product_tags.toLowerCase())}function get_ready_with_data(_callback){var DONE=4,OK=200,xhr_for_js=new XMLHttpRequest;return xhr_for_js.open("GET",product_url+".js",!0),xhr_for_js.send(),xhr_for_js.onreadystatechange=function(){if(xhr_for_js.readyState===DONE&&xhr_for_js.status===OK){if(productJson=JSON.parse(xhr_for_js.responseText),product_tags=productJson.tags.join(),(void 0===productJson.media||0==productJson.media.length)&&0==productJson.images.length)return;assign_variants_media(productJson);var xhr_for_json=new XMLHttpRequest;xhr_for_json.open("GET",product_url+".json",!0),xhr_for_json.send(),xhr_for_json.onreadystatechange=function(){xhr_for_json.readyState===DONE&&(xhr_for_json.status===OK&&(assign_variant_images(JSON.parse(xhr_for_json.responseText).product.images),_callback()))}}},!0}function processJSONInformation(){product_tags=productJson.tags.join(),assign_variants_media(productJson),assign_variant_images(productJson.product_images),execute_app_code()}function run(){if(is_product_preview)try{productJson=JSON.parse(document.querySelector("[sa-product-json]").innerText),processJSONInformation()}catch(e){setTimeout((function(){run()}),100)}else if(document.querySelector("[sa-product-json]"))try{(productJson=JSON.parse(document.querySelector("[sa-product-json]").innerText)).media&&processJSONInformation()}catch(e){}is_product_preview||productJson&&productJson.media||get_ready_with_data(execute_app_code)}function execute_app_code(){if(!(is_restrictable()||1==product_media.length&&1==product_images.length)){is_correct_theme_selected();var nTimer=setInterval((function(){if(("interactive"==document.readyState||"complete"==document.readyState)&&"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&"string"==typeof jQuery.fn.jquery){if(void 0===$)var $=jQuery;clearInterval(nTimer),$("body").append("<div id='multi-variant-info' style='display:none'></div>"),$("body").append("<div id='multi-variant-carousel' style='display:none'></div>");var media_used=$(".product_images [data-product-single-media-wrapper]").length>0;$("#multi-variant-info").html($(".product_images .slides").html()),$("#multi-variant-carousel").html($("#carousel .slides").html()),$("#multi-variant-info img.lazyloading").removeClass("lazyloading").addClass("lazyload");var zTimer=setInterval((function(){"function"==typeof $.fn.flexslider&&"function"==typeof $.fn.magnificPopup&&(clearInterval(zTimer),showtime_change_images(),$("body").on("change click",".single-option-selector, label",(function(){setTimeout((function(){variant_id=find_current_variant(),selection_vid!=variant_id&&(showtime_change_images(variant_id),selection_vid=variant_id)}),100)})))}),10);function showtime_change_images(variant_id){if(variant_images=media_used?find_variant_media(variant_id):find_variant_images(variant_id),!is_array_equal(last_variant_images,variant_images)){last_variant_images=variant_images;var slide_images="",carousel_images="";if($.each(variant_images,(function(v_index,v_image){slide_images+=$("#multi-variant-info li img[data-image-id='"+v_image.id+"']").closest("li","#multi-variant-info").clone().wrap("<div></div>").parent().html(),carousel_images+=$("#multi-variant-carousel li[data-image-id='"+v_image.id+"']").clone().wrap("<div></div>").parent().html()})),destroyFlexslider($(".product_images")),destroyFlexslider($("#carousel")),slide_images='<div class="main-slider"><ul class="slides">'+slide_images+"</ul></div>",$(".product_images").html(slide_images),$(".product_images ol.flex-control-nav").remove(),$("#carousel").length){carousel_images='<div class="nav-slider"><ul class="slides">'+carousel_images+"</ul></div>",$("#carousel").html(carousel_images),$(".nav-slider").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:150,itemMargin:5,asNavFor:".main-slider"});var controlNav=!1;sync_v=".nav-slider"}else{controlNav="thumbnails";sync_v=""}if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))var animationVar="slide";else animationVar="fade";if($(".main-slider").flexslider({startAt:0,touch:!0,animationLoop:!1,pauseOnHover:!0,controlNav:controlNav,directionNav:!1,animation:animationVar,slideshow:!1,slideshowSpeed:1e4,sync:sync_v}),"function"==typeof $.zoom&&"disabled"==$("#image-block").data("zoom")){var imageBlock=$("#image-block");if(imageBlock.length){var imageSlideLinks=imageBlock.find("a.image-slide-link");imageSlideLinks.length&&imageSlideLinks.each((function(){var t=$(this),url=t[0].href;t.zoom({url:url,touch:!1})}))}}$(".slides").magnificPopup({delegate:"a",type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:!0},gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(element){return element.find("img")}}})}}}}),10)}}run()}}};variantImageAutomator();