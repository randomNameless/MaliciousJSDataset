(self.webpackChunkpublic=self.webpackChunkpublic||[]).push([[712],{670:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});class s{constructor(e,t,i){this.options=e,this.userToken=t,this.kibanaTracking=i}getTrackerUrl(e){var t;return`${this.options.baseUrl}/tracker/${e}/${null!==(t=this.userToken.get())&&void 0!==t?t:""}`}async sendPOSTEvent(e){var t,i,s;null===(i=(t=this.options).onTrackerRequestStart)||void 0===i||i.call(t);const{method:n,data:a}=e,o=this.getTrackerUrl(n),r=Date.now();try{const t=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return!t.ok&&this.isLoggedTrackerError(t.status)&&this.kibanaTracking.sendErrorEvent(e,{statusCode:t.status,statusText:t.statusText,url:o,timestamp:r}),t}catch(t){throw this.kibanaTracking.sendErrorEvent(e,{statusCode:0,statusText:null!==(s=null==t?void 0:t.toString())&&void 0!==s?s:"Unknown Network Error",url:o,timestamp:r}),t}}sendBeaconEvent({method:e,data:t}){var i,s;return null===(s=(i=this.options).onTrackerRequestStart)||void 0===s||s.call(i),navigator.sendBeacon(this.getTrackerUrl(e),JSON.stringify(t))}isHandledTrackerError(e){return e>=400&&e<600}isLoggedTrackerError(e){return 429===e||e>=500&&e<600}async handleError(e){const t=await e;if(!t.ok&&this.isHandledTrackerError(t.status))throw new Error(t.status.toString());return t}}class n{constructor(e,t){this.storage=e,this.tokenName=t,this.tokenValue=this.storage.getItem(this.tokenName)}get(){return this.tokenValue}set(e){this.storage.setItem(this.tokenName,e),this.tokenValue=e}clean(){this.storage.removeItem(this.tokenName),this.tokenValue=null}}var a=i(1025);const o=String(1);class r extends n{constructor(e){super(sessionStorage,`accessKey-${e}`)}get(){const e=super.get();return e===o?o:null}set(e){super.set(o),"string"==typeof e&&sessionStorage.setItem(a.Z.sessionId,e)}clean(){super.clean(),sessionStorage.removeItem(a.Z.sessionId)}}class d{constructor(e,t,i,s){this.options=e,this.sessionToken=new r(this.options.userId),this.userToken=t,this.requestService=i,this.trackerDelay=s}async start(){return this.userToken.get()?this.sessionToken.get()?void 0:this.refresh():this.refreshToken()}async refresh(){var e,t;this.sessionToken.clean();const i=await this.sendInitEvent();return this.sessionToken.set(i),null===(t=(e=this.options).onNewSessionStart)||void 0===t||t.call(e),this.trackerDelay.reset()}async refreshToken(){this.userToken.clean();try{await this.userToken.refresh()}catch(e){return this.trackerDelay.run((()=>this.refreshToken()))}return this.refresh()}async sendInitEvent(){try{const e=await this.requestService.handleError(this.requestService.sendPOSTEvent({method:"init",data:this.options.createInitEvent()})),{data:{session_id:t}}=await e.json();return t}catch(e){return e instanceof Error&&"401"===e.message?this.refreshToken():this.trackerDelay.run((()=>this.sendInitEvent()))}}}class l{constructor(){this.queue=[]}enqueue(e){this.queue.push(e)}dequeue(){var e;return null!==(e=this.queue.shift())&&void 0!==e?e:null}clean(){this.queue.splice(0,this.queue.length)}}class c extends n{constructor(e,t,i){super(localStorage,`token-for-${e}-${i}`),this.refreshAccessToken=t}async refresh(){this.clean(),this.set(await this.refreshAccessToken())}}class h{constructor(){this.currentNumber=0,this.nextNumber=1}getNext(){const e=this.currentNumber,t=this.currentNumber+this.nextNumber;return this.currentNumber=this.nextNumber,this.nextNumber=t,e}setState(e,t){this.currentNumber=e,this.nextNumber=t}reset(){this.currentNumber=0,this.nextNumber=1}}class u{constructor(){this.fibonacciEmitter=new h,this.reset()}run(e){const t=Math.min(this.fibonacciEmitter.getNext(),600);return 600===t&&this.reset(),new Promise(((i,s)=>{window.setTimeout((()=>{e().then(i).catch(s)}),1e3*t)}))}reset(){this.fibonacciEmitter.setState(3,5)}}var m=i(1041);class g{constructor(e){this.options=e,this.kibanaLogData=this.getKibanaLogData()}getKibanaLogData(){const e={deviceId:this.options.did};return this.options.userId&&(e.userId=this.options.userId),e}sendErrorEvent(e,t){m.Z.sendCmsWebError("CMS_TRACKER_ERROR_LOGS",{...this.kibanaLogData,...t,payload:e.data})}}class p{constructor(e){this.isQueueActive=!1,this.isQueueExpired=!1,this.aliveTimeoutId=null,this.options=e,this.queue=new l,this.userToken=new c(this.options.userId,this.options.refresherAccessToken,this.options.did),this.trackerDelay=new u,this.trackerKibana=new g(this.options),this.requestService=new s(this.options,this.userToken,this.trackerKibana),this.session=new d(this.options,this.userToken,this.requestService,this.trackerDelay),this.start()}async start(){var e,t;return await this.sendWithQueueBlocking(this.session.start()),null===(t=(e=this.options).onTrackerStart)||void 0===t||t.call(e),this.sendNextEventInQueue()}enqueueEvent(e,t){"object_click"!==e.method&&!(null==t?void 0:t.useBeacon)||!("sendBeacon"in navigator)?(this.queue.enqueue({record:e,options:t}),this.isQueueActive||this.sendNextEventInQueue()):this.requestService.sendBeaconEvent(e)}async sendNextEventInQueue(){this.clearAliveEventTimeout();const e=this.queue.dequeue();if(e)return await this.sendWithQueueBlocking(this.sendEvent(e)),this.sendNextEventInQueue();this.isQueueActive=!1,this.setAliveEventTimeout()}async sendEvent(e){var t;try{await this.requestService.handleError(this.requestService.sendPOSTEvent(e.record))}catch(t){if(this.isQueueExpired)return this.trackerDelay.run((()=>this.session.refresh()));if(t instanceof Error)switch(t.message){case"401":return await this.session.refreshToken(),this.sendEvent(e);case"402":case"403":return await this.session.refresh(),this.sendEvent(e)}return this.trackerDelay.run((()=>this.sendEvent(e)))}this.trackerDelay.reset();const i=null===(t=e.options)||void 0===t?void 0:t.onSuccess;null==i||i()}async sendWithQueueBlocking(e){this.isQueueActive=!0;const t=window.setInterval((()=>{this.queue.clean(),this.isQueueExpired=!0}),6e5),i=await e;return this.isQueueActive=!1,this.isQueueExpired=!1,window.clearInterval(t),i}clearAliveEventTimeout(){"number"==typeof this.aliveTimeoutId&&(window.clearTimeout(this.aliveTimeoutId),this.aliveTimeoutId=null)}setAliveEventTimeout(){"number"!=typeof this.aliveTimeoutId&&(this.aliveTimeoutId=window.setTimeout((()=>{this.enqueueEvent({method:"alive",data:this.createAliveEvent()})}),3e5))}createAliveEvent(){return{event_created_client_ts:Date.now()}}}},8275:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(1025);const n={tb_b:s.Z.tryAndBuyTag,ds_b:s.Z.promoDeactivationTag};class a{constructor(e){this.tag=e,this.storageField=n[this.tag]}getCurrentTagValue(){return window.sessionStorage.getItem(this.storageField)}setCurrentTagValue(e){null===e?window.sessionStorage.removeItem(this.storageField):window.sessionStorage.setItem(this.storageField,e)}setValueIfNeed(e){return this.getCurrentTagValue()!==e&&(this.setCurrentTagValue(e),!0)}clearTagIfNeed(){return this.setValueIfNeed(null)}}},7553:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(1025),n=i(4261);function a(){var e;return null!==(e=window.sessionStorage.getItem(s.Z.sessionId))&&void 0!==e?e:n.R}},7995:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const s={horizontal:"horizontal",landscape:"horizontal",vertical:"vertical",portrait:"vertical",square:"square"},n=s},4261:(e,t,i)=>{"use strict";i.d(t,{R:()=>s});const s="not set"},6346:(e,t,i)=>{"use strict";i.d(t,{L:()=>s});const s={promocodeData:"promocodeData",serviceId:"service_id",tariffId:"tariff_id",categoryId:"category_id",videoId:"video_id",systemType:"system_type",systemType2:"system-type",paymentStep:"payment_step",channelSlug:"channel_slug",promocode:"promocode",shouldActivate:"shouldActivate",q:"q",mainTab:"main_tab",sort:"sort",convertFilters:"be_convert_keys",viewType:"view_type",viewAction:"view_action",fromMainPage:"fromMainPage",isEditMode:"isEditMode",from:"from",targetUrl:"targetUrl",tab:"tab",est:"est",eet:"eet"}},6775:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});const s={fromTryAndBuyBtn:"#fromTryAndBuyBtn",paymentData:"#paymentdata",profileEdit:"#profileEdit",profileDevices:"#profileDevices"}},248:(e,t,i)=>{"use strict";i.d(t,{M:()=>s});const s={interactiveTokenPointer:"interactiveTokenPointer",isFromQuickBuyPopup:"isFromQuickBuyPopup",isFromVideoEmbed:"isFromVideoEmbed",openObjectFromSlider:"openObjectFromSlider"}},1025:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});const s={ignoreStartScreen:"ignoreStartScreen",tryAndBuyTag:"tryAndBuyTag",promoDeactivationTag:"promoDeactivationTag",uncompletedETCustomEvent:"uncompletedETCustomEvent",sessionId:"sessionId",mggFromSearchPage:"mgg:from-search-page",mggPopupShowed:"mgg:popup-showed",mggInitialSearchReferrer:"mgg:initial-search-referrer",defaultProfileToggle:"defaultProfileToggle",delayedLoginEvent:"DELAYED_LOGIN_EVENT"}},4844:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});class s{constructor(){}static uint8ToBase64(e){return btoa(String.fromCharCode(...e))}static base64ToUint8(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}static unicodeToBase64(e){return s.uint8ToBase64((new TextEncoder).encode(e))}static base64ToUnicode(e){return(new TextDecoder).decode(s.base64ToUint8(e))}}const n=s},7334:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});class s{constructor(){}static get(){var e;return null!==(e=document.documentElement.dataset.csrfToken)&&void 0!==e?e:""}static async refresh(e){document.documentElement.dataset.csrfToken=await this.request(),null==e||e()}static async withCSRFRetry(e){const t=await e();return 403===t.status&&t.headers.has("X-CSRF")?(await this.refresh(),e()):t}static getHeaders(){return{"Csrf-Token":this.get(),"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}static async request(){const e=await fetch("/r/csrf");if(e.ok)return e.text();throw new Error}}},1041:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(7553);class n{constructor(){}static activateFacebookPixelEvents(){var e;window.sendFbKibana!==n.sendFacebookPixelInfo&&(window.sendFbKibana=n.sendFacebookPixelInfo,null===(e=window.fbKibanaEvents)||void 0===e||e.forEach((e=>{n.sendFacebookPixelInfo(e)})),delete window.fbKibanaEvents)}static sendCmsWebError(e,t){return n.sendToKibana("cms_web",e,t)}static sendFacebookPixelInfo(e){const{user_id:t,...i}=e;return n.sendToKibana("cms_web","FACEBOOK_PIXEL_EVENT",{url:location.href,statusCode:0,statusText:"",user_id:t,session_id:(0,s.Z)(),fbPixelEvent:i})}static sendToKibana(e,t,i){return fetch(`https://log.cnt.re/log/${e}`,{method:"POST",body:new URLSearchParams({text:t,data:JSON.stringify(i)})})}}const a=n},7399:(e,t,i)=>{"use strict";var s;i.d(t,{x:()=>s,Z:()=>a}),function(e){e.AUTHORIZATION="authorization"}(s||(s={}));class n{constructor(){}}n.getInstance=()=>window.BroadcastChannel?(n._instance||(n._instance=new BroadcastChannel("megogo")),n._instance):{postMessage:()=>{},onmessage:()=>{}},n.sendMessage=e=>{n.getInstance().postMessage(e)},n.onMessage=(e,t)=>{n.getInstance().onmessage=i=>{i.data.messageName===e&&t(i)}};const a=n},342:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var s=i(6808);class n{constructor(e,t){this.name=e,this.expire=t}get(){const e=s.get(this.name);return e?Number(atob(e)):null}set(e){switch(this.name){case"default_profile":s.remove("active_profile");break;case"active_profile":s.remove("default_profile")}s.set(this.name,btoa(e.toString()),{expires:this.expire})}delete(){s.remove(this.name)}}class a{constructor(){}static loginIntoProfile(e,t){t?this.default.set(e):this.active.set(e)}static prologActiveProfile(){const e=this.active.get();e&&this.active.set(e)}static setShowedOnboarding(e){s.set("onboarding_shown",e.toString(),{expires:365})}static isOnboardingShowed(e){return Number(s.get("onboarding_shown"))===e}}a.default=new n("default_profile",365),a.active=new n("active_profile",.125);const o=a},8099:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var s=i(1025),n=i(3847);class a{constructor(){}static blockStartScreenOnNextPage(){this.setStorage()}static extract(){this.extractedValue=this.checkStorage(),this.extractedValue&&this.cleanStorage()}static check(){return this.extractedValue||this.checkStorage()}static setStorage(){sessionStorage.setItem(s.Z.ignoreStartScreen,n.oq)}static checkStorage(){return sessionStorage.getItem(s.Z.ignoreStartScreen)===n.oq}static cleanStorage(){sessionStorage.removeItem(s.Z.ignoreStartScreen)}}a.extractedValue=!1;const o=a},2074:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});class s{constructor(){}static getPathWithoutLang(e){return(null!=e?e:window.location.pathname).split(this.PATH_SEPARATOR).filter(Boolean).slice(1).join(this.PATH_SEPARATOR)}}s.PATH_SEPARATOR="/";const n=s},1260:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});const s=(e,t,i)=>{var s;if(e){const n=e.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight;let o=window.innerWidth||document.documentElement.clientWidth,r=n.left;if(i){const e=i.wrapper.getBoundingClientRect();o=e.width-(null!==(s=i.padding)&&void 0!==s?s:0),r=n.left-e.left}const d=n.top+n.height*t<=a&&n.top+n.height*t>=0,l=r<=o&&r+n.width>=0;return d&&l}return!1}},8511:(e,t,i)=>{"use strict";var s=i(2074),n=i(4772),a=i(6346),o=i(3816),r=i(4551),d=i(3099),l=i(9634),c=i(5802),h=i(6163),u=i(7317),m=i(8e3);class g extends o.Z{constructor(e){super(e),this.tracker=r.Z.getInstance(),this.promoCodeData={},this.addGlobalLoader=()=>{this.$wrapper.addClass(h.m)},this.removeGlobalLoader=()=>{this.$wrapper.removeClass(h.m)},this.getTrackerFeedObj=()=>{const e=s.Z.getPathWithoutLang();return{type:"landing",algorithm:"cms_landing",id:(0,d.Gv)(this.staticId,!0),code:this.staticId,objects_extended:[{root_id:(0,d.Gv)(e,!0),root_code:e}]}},this.getCodePageUrl=({url:e=`/${n.Z.CODE}`,withParams:t=!1}={})=>{const{promocode:i}=this.promoCodeData,s=`?${a.L.promocode}=${i}&${a.L.shouldActivate}=1`;return`${e}${t?s:""}`},this.activatePromocode=()=>{const{promocode:e,successLink:t,successText:i,successDescription:s,successTitle:n}=this.promoCodeData;if(!e)return void(window.location.href=this.getCodePageUrl());this.addGlobalLoader();const a=new FormData;a.append("promocode",e),a.append("link",null!=t?t:""),a.append("text",null!=i?i:""),a.append("description",null!=s?s:""),a.append("title",null!=n?n:""),(0,l.Z)(this,"code",{url:"/wb/light_promocode_v1/activate",data:a,method:"POST",contentType:!1,processData:!1},{ajaxDelayTime:500,connectedWidgets:[{pWidget:this,pAction:"code",pOptions:{}}]})},this["[data-promocode] click"]=e=>{var t;if(this.promoCodeData=null!==(t=m(e).data())&&void 0!==t?t:{},c.Z.isAuthorized)return this.activatePromocode();const i=`${location.pathname}?${a.L.promocodeData}=${encodeURIComponent(JSON.stringify(this.promoCodeData))}`;this.isMobile?window.location.href=`/${n.Z.AUTH_LOGIN}?${a.L.targetUrl}=${encodeURIComponent(i)}`:this.event.emit(u.K.USER_UNAUTHORIZED,{type:"auth_phone",targetUrl:i})},this['[data-dismiss="modal"] click']=()=>{var e;this.isMobile&&(null===(e=this.$promoCodeModal)||void 0===e||e.remove())},this["[data-track-ui-click] click"]=e=>{const{target:t,ui:i}=e.data("trackUiClick"),s={event_created_client_ts:Date.now(),ui:{element_type:"button",element_text:e.text().trim(),...i},feed:this.getTrackerFeedObj(),target:t};this.tracker.sendUiClick(s,{useBeacon:!0})},this["[data-track-popup-show] shown.bs.modal"]=()=>{const e={event_created_client_ts:Date.now(),target:{object_type:"POP_UP",object_code:"cms_landing"},feed:this.getTrackerFeedObj()};this.tracker.sendPopupShow(e)},this.isMobile=m(".analytics_v1").data("mobile"),this.$wrapper=m("[class*=wrapper_v1]"),this.staticId=this.element.data("staticId");const t=new URLSearchParams(window.location.search).get(a.L.promocodeData);t&&(this.promoCodeData=JSON.parse(decodeURIComponent(t||"")),this.activatePromocode()),this.eventMap(this)}widgetUpdateAlways(){this.removeGlobalLoader()}widgetUpdateDone(e,t,i){var s,n;if("code"===t){if("ok"===i&&e.html&&e.html)return null===(s=this.$promoCodeModal)||void 0===s||s.remove(),this.element.append(e.html),this.$promoCodeModal=this.element.find(".js-promo-code-modal"),this.isMobile||this.$promoCodeModal.modal("show"),this.eventMap(this);const t=null===(n=e.json)||void 0===n?void 0:n.url;("error"===i||t)&&(window.location.href=this.getCodePageUrl({withParams:!0,url:t}))}}widgetUpdateFail(){}}const p=new class{constructor(){this.type="unknown",this.type=this.getType()}find(e){return window.navigator.userAgent.toLowerCase().includes(e)}getType(){return this.mobile()?"mobile":this.tablet()?"tablet":this.desktop()?"desktop":"unknown"}iphone(){return!this.windows()&&this.find("iphone")}ipod(){return this.find("ipod")}ipad(){return this.find("ipad")}android(){return!this.windows()&&this.find("android")}androidPhone(){return this.android()&&this.find("mobile")}androidTablet(){return this.android()&&!this.find("mobile")}blackberry(){return this.find("blackberry")||this.find("bb10")||this.find("rim")}blackberryPhone(){return this.blackberry()&&!this.find("tablet")}blackberryTablet(){return this.blackberry()&&this.find("tablet")}windows(){return this.find("windows")}windowsPhone(){return this.windows()&&this.find("phone")}windowsTablet(){return this.windows()&&this.find("touch")&&!this.windowsPhone()}fxos(){return(this.find("(mobile")||this.find("(tablet"))&&this.find(" rv:")}fxosPhone(){return this.fxos()&&this.find("mobile")}fxosTablet(){return this.fxos()&&this.find("tablet")}meego(){return this.find("meego")}desktop(){return!this.tablet()&&!this.mobile()}mobile(){return this.androidPhone()||this.iphone()||this.ipod()||this.windowsPhone()||this.blackberryPhone()||this.fxosPhone()||this.meego()}tablet(){return this.ipad()||this.androidTablet()||this.blackberryTablet()||this.windowsTablet()||this.fxosTablet()}},_=p;var v=i(8275),f=i(248),E=i(6775),T=i(6808),w=i.n(T);const I={main:"main",premiere:"premiere",films:"films",mult:"multfilms",series:"series",show:"show",live:"live",kino_i_tv:"subscription_kino_tv",cashback100:"cashback",featured:"featured_list",view:"view","search-extended":"search_extended"};var S=i(1041),y=i(342),b=i(6980),C=i(3788),A=i(4043);var k=i(9773),P=i(8e3);class D extends o.Z{constructor(e){super(e),this.getGAId=()=>{const e=w().get("_ga");if(!e)return;const t=e.match(/(\d+\.\d+)$/);return t?t[1]:void 0},this.mobile=this.element.data("mobile"),this.userId=this.element.data("user-id"),this.userProfileId=this.element.data("user-profile-id"),this.userProfileTypeId=this.element.data("user-profile-type-id"),this.did=this.element.data("did"),this.trackerUserAnonId=this.element.data("tracker-anon-user-id"),this.trackerBaseV3Url=this.element.data("mgg-tracker-v3-baseurl"),this.activeSubscriptions=this.element.data("active-subscriptions"),this.availableTryAndBuyPrimarySubscriptions=this.element.data("available-try-and-buy-primary-subscriptions"),C.Z.initGTM({uid:this.userId,anonUid:this.trackerUserAnonId,did:this.did,isMobile:this.mobile,getGAId:this.getGAId}),!window.viewedCarouselItems&&(window.viewedCarouselItems=[]),!window.promoSlidesShown&&(window.promoSlidesShown=[]),!window.promoSlidesToHit&&(window.promoSlidesToHit=[]),this.event.on(u.K.RESEND_PAGE_VIEW,this.initAndSendPageView.bind(this)),this.event.on(u.K.RESET_DATA_POSITION,this.resetPositionHelper.bind(this)),this.sendPromoSlidesHit(),this.initVclicks(),this.event.on(u.K.SEND_PROMO_SLIDES_HIT,this.sendPromoSlidesHit),this.event.on(u.K.USER_SUBSCRIPTION_SUCCESS_PAYMENT,(e=>{this.updateUserSubscriptions({subscriptionId:e})})),this.event.on(u.K.DEACTIVATE_SUBSCRIPTION_SUCCESS,(e=>{this.updateUserSubscriptions({auto_cancelable:e})})),this.eventMap(this)}widgetUpdateDone(e,t,i,s){var n;if("getUserSubscriptions"===t)"ok"===i&&(this.activeSubscriptions=e.json.userSubscriptions,(null==s?void 0:s.subscriptionId)&&this.sendGTMSubscriptionEvent(s.subscriptionId),(null==s?void 0:s.auto_cancelable)&&!(null===(n=this.activeSubscriptions)||void 0===n?void 0:n.length)&&C.Z.sendGTMSessionEvent("no_sub_session"));this.eventMap(this)}get isLogged(){return this.userId>0}getInitData(e){var t,i;const s={app_language:c.Z.lang,show_score:!w().get("hses")},n={browser_name:this.element.data("browser"),browser_version:null===(t=this.element.data("browser-version"))||void 0===t?void 0:t.toString(),os_name:this.element.data("os-name"),os_version:null===(i=this.element.data("os-version"))||void 0===i?void 0:i.toString(),screen_height:screen.height,screen_width:screen.width,system_language:navigator.language.substring(0,2),app_geo:c.Z.geo},a=this.element.data("subscriber"),o={event_created_client_ts:Date.now(),platform_type:e,is_subscriber:a,device:n,configuration:s,source_channel:"",source_code:r.Z.getPageCode(),feature:{keys:[2e4]}};return this.userProfileId&&(o.profile={id:this.userProfileId,type:this.userProfileTypeId,profiling_activated:!0,auto_login:Boolean(y.Z.default.get())}),o}resetPositionHelper(){this.trackerContainerSelector&&(0,d.Kx)(this.trackerContainerSelector)}setSourceData(){const e=location.pathname.slice(4,location.pathname.length),t=I[e];t?r.Z.setSourceInLocalStorage(t,e):e||r.Z.setSourceInLocalStorage("","main")}getPageViewData(){const e={event_created_client_ts:Date.now(),page:r.Z.getPageData(),...r.Z.getSourceData()},t=(0,A.Xf)();if((null==t?void 0:t.object_id)&&(e.target=t),window.location.href.includes("search-extended")){const t=P('[class*="searchExtended_v1"]'),i=P('[class*="filteredContent_v1"]');if(i.length)e.feed=(0,d.Ty)();else if(t.length){const{total:i,request:s}=t.data();s&&(e.search={total:i,request:s})}}return e}sendPageView(e){this.applyPageViewTags(e),this.setReferrer(e),this.tracker.sendPageView(e),this.setSourceData()}applyPageViewTags(e){!b.Z.getCurrentTagValue()&&b.Z.clearTagIfNeed()&&(e.tags={...e.tags,tb_b:b.Z.getCurrentTagValue()})}getPageViewPaymentData(e){const t={masks:[]};return e.each((function(){var e;const i=(0,d.Y3)(P(this).text());null===(e=t.masks)||void 0===e||e.push(i)})),t}updateUserSubscriptions(e){(0,l.Z)(this,"getUserSubscriptions",{method:"POST",url:`/wb/${this.widgetConfig.class}/getUserSubscriptions`},{backendRequest:!0,ajaxDelayTime:500},e)}sendPromoSlidesHit(){const e=P(".promoSlidesList_v1");if(e.length){const t=[],i=e.data("hitBatchUrl"),s=[];e.each(((e,i)=>{var n;const a=P(i),o=a.data("uniqueName");(null===(n=window.promoSlidesToHit)||void 0===n?void 0:n.includes(o))||(t.push(o),a.find(".promoSliderItem").each(((e,t)=>{const i=P(t).data("hitEvent");if(Array.isArray(i))for(const e of i)s.push(e)})))})),s.length&&(0,k.Z)(i,{links:s}).then((e=>{var i;e.ok&&(window.promoSlidesToHit=null===(i=window.promoSlidesToHit)||void 0===i?void 0:i.concat(t))}))}}setReferrer(e){const t=this.element.data("referer");if(t)try{const{hostname:i}=new URL(t),s=i!==document.location.hostname;s&&(e.source_channel=t)}catch(e){}}setGDPREventListener(){var e;window.AdlCmp&&(e=this.sendConscentIdChange.bind(this),window.AdlCmp.addEventListener("user_action_complete",((t,i)=>{e(i,Date.now())})))}sendConscentIdChange(e,t){null!==e&&this.tracker.sendInfoChange({event_created_client_ts:t,conscent_id:e,info:{code:"conscent_id",action:"assign"}})}initVclicks(){const e=new URLSearchParams(window.location.search),t=new URLSearchParams(window.location.hash.substring(1)).get("v_user"),i="vclicks"===e.get("utm_medium")?e.get("utm_source"):"",s=null!=t?t:i;s&&w().set("vclicks",s,{expires:30})}sendClientId(){const e=this.getGAId();e&&this.tracker.sendInfoChange({event_created_client_ts:Date.now(),info:{action:"assign",code:"ga_client_id"},target:{object_id:0,root_code:e,object_type:"OTHER"}})}onTrackerStartEvent(){C.Z.sendGTMLoginEvent(),S.Z.activateFacebookPixelEvents()}onNewSessionStartEvent(){this.sendGTMSessionEvents()}onTrackerRequestStartEvent(){y.Z.prologActiveProfile()}sendGTMSubscriptionEvent(e){const t=this.splitActiveSubscriptionsByExpireGroup();["try_session","sub_session_end","sub_session","sub_session_long"].forEach((i=>{const s=t[i];if(s.length>0)if(e){const t=s.find((t=>t.id===e));t&&(C.Z.sendGTMSessionSubEvent(i),C.Z.sendGTMSessionSubEvent(i,t))}else C.Z.sendGTMSessionSubEvent(i),s.forEach((e=>{C.Z.sendGTMSessionSubEvent(i,e)}))}))}sendGTMSessionEvents(){var e,t;C.Z.sendGTMSessionEvent("session"),C.Z.sendGTMSessionEvent(this.isLogged?"logged_in_session":"anon_session"),(null===(e=this.activeSubscriptions)||void 0===e?void 0:e.length)?this.sendGTMSubscriptionEvent():this.isLogged&&C.Z.sendGTMSessionEvent("no_sub_session"),null===(t=this.availableTryAndBuyPrimarySubscriptions)||void 0===t||t.forEach((e=>{C.Z.sendGTMSessionTryEvent(e)}))}splitActiveSubscriptionsByExpireGroup(){var e;const t={try_session:[],sub_session_end:[],sub_session:[],sub_session_long:[]};return null===(e=this.activeSubscriptions)||void 0===e||e.forEach((e=>{e.isTryAndBuy?t.try_session.push(e):e.daysLeft<=7?t.sub_session_end.push(e):e.daysLeft>=45?t.sub_session_long.push(e):t.sub_session.push(e)})),t}}var R=i(8e3);class N extends o.Z{constructor(){super(...arguments),this.widgetUpdateAlways=()=>{},this.widgetUpdateDone=(e,t,i)=>{},this.widgetUpdateFail=()=>{}}}var O=i(2904),U=i(8e3),L=i.n(U),x=i(7334);class M extends o.Z{constructor(e){super(e),this.tracker=r.Z.getInstance(),this[".support-phone_extended click"]=(e,t)=>{if(e.hasClass("open")){const i=L()(t.target);!i.hasClass(".support-phone_extended")&&i.parents(".support-phone_popup").length||(e.removeClass("open"),L()(document).off("click",this.clickThrowExtendedPhones))}else e.addClass("open"),L()(document).on("click",this.clickThrowExtendedPhones)},this[".jsListReset .cookies_settings click"]=(e,t)=>{var i;t.preventDefault(),null===(i=window.AdlCmp)||void 0===i||i.showConfigDialog()},this['.jsListReset [href$="account#profileDevices"] click']=(e,t)=>{t.preventDefault();const i=(0,d.OF)({element_code:"link_tv",element_type:"menu_button",element_text:e.text().trim()});this.tracker.sendUiClick(i,{useBeacon:!0});const s=e.attr("href");window.location.href=s},this[".back-to-mobile-version click"]=(e,t)=>{t.preventDefault();const i=e.data("href"),s=x.Z.get();i&&s&&(window.location.href=i+"&csrfToken="+s)},this.eventMap(this)}checkLinksPath(){const e=this.element.find(".footer-links a");return L().each(e,(function(){const e=L()(this).attr("href");if(e){const t=e.replace(/http:\/\//g,"").split("/");t.length<3&&L()(this).attr("disabled","disabled")}}))}clickThrowExtendedPhones(e){const t="support-phone_extended",i=L()(e.target);i.closest(`.${t}`).length||L()(`.${t}`).trigger("click")}}var F=i(2975);const $=("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&(_.tablet()||_.mobile())?(document.body.className=document.body.className.replace("is-hover","is-touch"),{isHover:!1,isTouch:!0}):{isHover:!0,isTouch:!1};i(8557);const H="is-fixed";class V extends o.Z{constructor(e){super(e),this.ABColorTestEnable=!1,this.isTargetButtonImpressionSend=!1,this.tracker=r.Z.getInstance(),this.sendFeedInViewport=()=>{window.clearTimeout(this.scrollTimer),this.isTargetButtonImpressionSend||(this.scrollTimer=window.setTimeout((()=>{const e=(0,d.PZ)(this.$tryAndBuyBtn[0],1);if(e){const e={event_created_client_ts:Date.now(),feed:{code:"header_menu",type:"menu"},target:{access:1,object_type:"OTHER",object_title:this.$tryAndBuyBtn.text().trim()||""}};this.ABColorTestEnable&&this.ABColorTestData&&(e.ab_tests=[(0,F.g)(this.ABColorTestData,1)]),this.tracker.sendImpression(e),this.isTargetButtonImpressionSend=!0,L()(window).off("scroll",this.sendFeedInViewport),L()(".wrapper_v1").off("scroll",this.sendFeedInViewport)}}),1e3))},this[".menu-item click"]=()=>{r.Z.setSourceInLocalStorage("top_menu",r.Z.getPageCode())},this[".menu-link, .submenu-link click"]=e=>{this.sendMenuItemUiClick(e)},this[".menu-item mouseenter"]=e=>{$.isHover&&(e.hasClass("show")||e.find(".dropdown-toggle").dropdown("toggle"))},this[".menu-item mouseleave"]=e=>{$.isHover&&e.hasClass("show")&&e.find(".dropdown-toggle").dropdown("toggle")},this[".menu-item hidden.bs.dropdown"]=()=>{this.isMenuOpen=!1},this[".menu-item shown.bs.dropdown"]=()=>{this.isMenuOpen=!0},this[".userToggle shown.bs.dropdown"]=()=>{this.$userAvatar.hasClass("without-border")||this.$userAvatar.addClass("active-border")},this[".userToggle hidden.bs.dropdown"]=()=>{this.$userAvatar.hasClass("without-border")||this.$userAvatar.removeClass("active-border")},this[".languages shown.bs.dropdown"]=()=>{const e={event_created_client_ts:Date.now(),target:{object_code:"app_language_settings",object_type:"POP_UP"}};this.tracker.sendPopupShow(e)},this[".menu-link mouseup"]=(e,t)=>{const i=e.attr("href");0===t.button&&i&&this.isMenuOpen&&(window.location.href=i)},this[".jsTryAndBuyBtn click"]=(e,t)=>{t.preventDefault();const i=e.attr("href"),s="used",n=(0,d.OF)({element_code:"try_buy_button",element_type:"sidebar_button",element_text:b.Z.tryAndBuyBtnText});b.Z.hasTryAndBuyBtn&&b.Z.getCurrentTagValue()!==s&&(c.Z.isAuthorized&&(n.tags={tb_b:s}),b.Z.setCurrentTagValue(s)),this.ABColorTestEnable&&this.ABColorTestData&&(n.ab_tests=[(0,F.g)(this.ABColorTestData,2)]),this.tracker.sendUiClick(n,{useBeacon:!0}),window.location.href=i},this[".jsAuthByTemplate click"]=(e,t)=>{t.preventDefault();const i=(0,d.OF)({element_code:"login_header",element_type:"menu_button",element_text:e.text().trim()});this.tracker.sendUiClick(i)},this["[data-lang] click"]=(e,t)=>{t.preventDefault();const i=e.data("lang"),s=window.location.pathname+window.location.search+window.location.hash,n=s.split("/");n[1]=i;const a=n.join("/");w().set("lang",i,{expires:365});const o={event_created_client_ts:Date.now(),target:{object_code:"app_language_settings",object_type:"POP_UP"},configuration:{app_language:i},info:{code:"app_language",action:"change"}};this.tracker.sendInfoChange(o),window.location.href=a},this[".mgg-logo a click"]=()=>{r.Z.setSourceInLocalStorage("top_menu",r.Z.getPageCode())},this["{window} resize"]=()=>{var e;null===(e=this.greedyNav)||void 0===e||e.trigger("greedyNav:recalc")},this["{window} load"]=()=>{this.initGreedyNav(),this.observer.disconnect(),this.ABColorTestEnable&&this.sendFeedInViewport()},this.eventMap(this),this.bodyPaddingTop=0,setTimeout((()=>{this.initGreedyNav()}),500),this.element.find(".header-nav").removeClass("overflow-hidden"),this.event.on("user:avatar-update",(e=>{this.userAvatarUpdate(e)})),this.$pageElement=L()("#page"),this.$mainCustomScroll=L()(".main-custom-scroll"),this.$tryAndBuyBtn=this.element.find(".jsTryAndBuyBtn"),this.$userAvatar=this.element.find(".user-avatar-js"),this.setHeaderFixedForScroll(),this.checkPaddingTop(),this.ABColorTestData=(0,F.J)("try-button-color-test"),this.ABColorTestEnable=c.Z.isAuthorized&&Boolean(this.ABColorTestData)&&b.Z.hasTryAndBuyBtn,this.ABColorTestEnable&&(L()(window).on("scroll",this.sendFeedInViewport),L()(".wrapper_v1").on("scroll",this.sendFeedInViewport)),this.event.on(u.K.SHOW_STARTSCREEEN_WITH_HEADER,(()=>{this.element.find(".realHeader").addClass("realHeader--fixed")})),this.event.on(u.K.ROTATOR_CLOSE,(()=>{this.element.find(".realHeader").removeClass("realHeader--fixed")}))}setHeaderFixedForScroll(){$.isHover&&(this.$mainCustomScroll.length?(this.checkWidgetFixedforCustomScroll(),this.$mainCustomScroll.on("scroll",(()=>{this.checkWidgetFixedforCustomScroll()}))):(this.checkWidgetFixed(),L()(window).on("scroll",(()=>{this.checkWidgetFixed()}))))}toggleFixedMenu(e){this.element.toggleClass(H,e),this.isFixed=e}checkPaddingTop(){const e=L()("body")[0];this.observer=new MutationObserver((e=>{e.forEach((e=>{this.bodyPaddingTop=parseInt(L()(e.target).css("paddingTop"),10),window.scrollY<this.bodyPaddingTop&&this.element.removeClass(H)}))})),this.observer.observe(e,{attributes:!0,attributeFilter:["style"]})}checkWidgetFixed(){const e=this.$pageElement.offset();e&&(window.scrollY>e.top+this.element.position().top?!this.isFixed&&window.scrollY>this.bodyPaddingTop&&this.toggleFixedMenu(!0):this.isFixed&&this.toggleFixedMenu(!1))}checkWidgetFixedforCustomScroll(){const e=this.$mainCustomScroll.scrollTop();isNaN(e)||(e>this.$pageElement.position().top+Math.floor(this.element.position().top+e)?this.toggleFixedMenu(!0):this.isFixed&&this.toggleFixedMenu(!1))}userAvatarUpdate(e){return this.element.find(".userToggle img").attr("src",e.url)}initGreedyNav(){this.greedyNav?this.greedyNav.trigger("greedyNav:recalc"):this.greedyNav=this.element.find(".header-nav").greedyNav({btn:this.element.find(".header-nav .menu-list .type-more"),vlinks:this.element.find(".header-nav .menu-list").children().not(".type-more"),hlinks:this.element.find(".greedyItem"),buttonShowAlways:!1})}sendMenuItemUiClick(e){var t;const i=null===(t=e.parent().data("menu-id"))||void 0===t?void 0:t.toString(),s=e.text().trim();this.tracker.sendUiClick({event_created_client_ts:Date.now(),ui:{element_code:i,element_type:"menu_button",element_text:s}},{useBeacon:!0})}}var Z=i(2430),B=i(1578),W=i(8e3);class G extends o.Z{constructor(e){super(e),this.nextPage="",this.paramBlurTimeout=200,this.searchResultsScrollableOffset=500,this.tracker=r.Z.getInstance(),this.trackerSourceChannel="fast_search",this.viewedCards=[],this[".search-results scroll"]=()=>{clearTimeout(this.impressionScrollTimeout),this.impressionScrollTimeout=window.setTimeout((()=>{this.sendImpression()}),1e3)},this[".search-results .search-results-content scroll"]=e=>{var t;if(4!==(null===(t=this.searchRequest)||void 0===t?void 0:t.readyState)||!this.nextPage)return;const i=e[0];i.scrollHeight-i.scrollTop-this.searchResultsScrollableOffset<=i.clientHeight&&this.search(!0)},this["[type=text] blur"]=()=>{this.blurTimeout=window.setTimeout((()=>{this.isShowSearchForm=!1,this.toggleSearchMenu(),this.toggleActive(),this.toggleSearchFormShowing(),this.clearInputValue(!1)}),this.paramBlurTimeout)},this["[type=text] focus"]=e=>{W(document).trigger("click"),clearTimeout(this.blurTimeout),this.isShowSearchForm=!0,this.toggleSearchFormShowing(),this.toggleSearchMenu(),this.setInputValue();const t=e.val(),i=(0,d.OF)({element_type:"bar",element_code:"fast_search",element_text:e.text().trim()});t.length&&(i.search={request:t,total:this.getTotalItemsInResult()}),this.tracker.sendUiClick(i),this.toggleFormNotEmptyClass()},this["[type=text] input"]=()=>{clearTimeout(this.searchTimeout),this.toggleFormNotEmptyClass(),this.searchTimeout=window.setTimeout((()=>{this.search()}),this.paramSearchTimeout)},this["[type=text] keydown"]=(e,t)=>{switch(t.keyCode){case this.keyCode.DOWN:return this.moveSelection("next");case this.keyCode.ENTER:return this.enterSelection();case this.keyCode.UP:return this.moveSelection("prev")}},this["[type=reset] click"]=(e,t)=>{t.preventDefault(),this.getInputValue().length?(this.searchInput.trigger("focus"),this.clearInputValue(!0),this.stateResults=!1,this.toggleSearchMenu(),this.toggleFormNotEmptyClass()):this.searchInput.trigger("blur")},this["[type=submit] click"]=(e,t)=>{t.preventDefault(),this.searchInput.trigger("focus")},this[".search-results-content .card mouseenter"]=e=>{this.element.find(".keyboard-hover").removeClass("keyboard-hover hover"),e.addClass("mouse-hover hover")},this[".search-results-content .card mouseleave"]=e=>{e.removeClass("mouse-hover hover")},this[".search-menu mousemove"]=()=>{this.keyboardMode&&(this.keyboardMode=!1,this.element.find(".cards-list").removeClass("block-pointer"))},this[".search-results-more a click"]=()=>{r.Z.setSourceInLocalStorage(this.trackerSourceChannel,r.Z.getPageCode()),this.searchForm.trigger("submit")},this[".search-results-content .card click"]=e=>{const t=(0,d.L7)(e,this.trackerSourceChannel,"init","feed");t.search={request:this.searchQuery,total:this.getTotalItemsInResult()},t.feed.algorithm="fast_search_result",delete t.feed.id,t.sources=[{ch:this.trackerSourceChannel,pc:r.Z.getPageCode(),ts:Math.floor(Date.now()/1e3)}],r.Z.setSourceInLocalStorage(this.trackerSourceChannel,r.Z.getPageCode()),this.tracker.sendObjectClick(t)},this[".search-more a click"]=()=>{r.Z.setSourceInLocalStorage(this.trackerSourceChannel,r.Z.getPageCode())},this[".js-filters click"]=(e,t)=>{t.preventDefault();const i=e.attr("href");r.Z.setSourceInLocalStorage(this.trackerSourceChannel,r.Z.getPageCode());const s=(0,d.OF)({element_code:"filters",element_text:e.text().trim()});this.tracker.sendUiClick(s,{useBeacon:!0}),window.location.href=i},this[".js-quick-search-form submit"]=()=>{r.Z.setSourceInLocalStorage(this.trackerSourceChannel,r.Z.getPageCode())},this.eventMap(this),this.paramMinChars=2,this.blurTimeout=200,this.paramSearchTimeout=300,this.searchQuery="",this.isShowSearchForm=!1,this.stateResults=!1,this.keyboardMode=!1,this.keyCode={DOWN:40,ENTER:13,UP:38},this.searchContainer=this.element.find(".search"),this.searchForm=this.element.find("form"),this.searchInput=this.element.find("[type=text]"),this.searchResultsContainer=this.element.find(".search-menu")}widgetUpdateAlways(){}widgetUpdateDone(e,t,i,s){const n=null==s?void 0:s.request;switch(t){case"search":"ok"===i&&(this.viewedCards=[],e.html&&n&&(this.parseResults(e.html,n),this.eventMap(this)));break;case"search-more":"ok"===i&&e.html&&n&&(this.parseResults(e.html,n,!1),this.eventMap(this))}}widgetUpdateFail(e,t,i,s,n){var a;["search","search-more"].includes(s)&&"abort"!==t&&(this.tracker.sendSearch({event_created_client_ts:Date.now(),search:{request:null!==(a=null==n?void 0:n.request)&&void 0!==a?a:"",total:0},error:{code:"error",info:t}}),this.viewedCards=[])}clearSearchResults(){this.stateResults=!1,this.searchResultsContainer.html("")}clearInputValue(e=!1){e&&(this.searchQuery=""),this.searchInput.val("")}enterSelection(){const e=this.element.find(".videoItem.hover").find("a:first").attr("href");e?window.location.href=e:this.searchForm.trigger("submit")}getInputValue(){let e="";try{e=this.searchInput.val().toString().replace(/^\s+|\s+$/g,"").trim()}catch(e){}return e}encodeURIComponent(e){let t="";try{t=encodeURIComponent(e)}catch(e){}return t}moveSelection(e){this.keyboardMode||(this.keyboardMode=!0,this.element.find(".cards-list").addClass("block-pointer"));const t=this.element.find(".nano"),i=this.element.find(".videoItem"),{length:s}=i;let n=i.index(i.filter(".hover"));n+="prev"===e?-1:1,n<0?n=s-1:n>=s&&(n=0);const a=i.eq(n),o=t.find(W(".search-results-title")).outerHeight(),r=t.find(W(".card")).outerHeight(),d=()=>{0===n?t.scrollTop(0):r&&o&&t.scrollTop(n*r+o)};switch(e){case"prev":case"next":d()}i.removeClass("mouse-hover keyboard-hover hover"),a.addClass("keyboard-hover hover")}parseResults(e,t,i=!0){this.stateResults=!0;const s=W("<div />").html(e),n=s.find("[data-next-page]").data("next-page");if(this.nextPage=n||"",i)this.searchResultsContainer.empty().append(s);else{const e=s.find(".card");this.searchResultsContainer.find(".search-results-content").append(e)}const a=this.getTotalItemsInResult(),o={event_created_client_ts:Date.now(),search:{request:t,total:a}};if(a){const e=[];this.searchResultsContainer.find(".search-results-content .card").each(((t,i)=>{if(10===t)return!1;const s=W(i).data(),n=s.trackerObjectType,a=(0,d.MM)(s,n);e.push({id:a,type:n,position:t+1,discounted:s.discount?1:0})})),o.feed={algorithm:"fast_search_result",type:"feed",source_action:"search",objects_extended:e}}this.tracker.sendSearch(o),this.sendImpression(t),this.scrollbarInit(),this.toggleSearchMenu()}search(e=!1){const t=this.getInputValue(),i=this.encodeURIComponent(t);if(t!==this.searchQuery||i)if(this.searchQuery=t,t.length<this.paramMinChars)this.stateResults=!1,this.toggleSearchMenu();else{this.searchRequest&&this.searchRequest.abort();let s="search";const n={q:i,view_type:"list"};e&&this.nextPage&&(s="search-more",n.quick_search_page=this.nextPage),this.searchRequest=(0,l.Z)(this,s,{url:(0,Z.Z)(null,this.widgetConfig.id,n),method:"GET"},{},{request:t})}}setInputValue(e){this.searchInput.val(e||this.searchQuery)}scrollbarInit(){(0,B.f)()}toggleFormNotEmptyClass(){const e=this.getInputValue().length>=1;this.searchContainer.toggleClass("formNotEmpty",e)}toggleActive(){this.element.find(".videoItem.hover").removeClass("hover")}toggleSearchFormShowing(){this.searchContainer.toggleClass("showSearchForm",this.isShowSearchForm)}toggleSearchMenu(){this.searchContainer.toggleClass("show",this.isShowSearchForm&&this.stateResults)}getTotalItemsInResult(){const e=this.searchResultsContainer.find(".search-results-content"),t=e.find(".search-results-title"),i=e.find(".card");return t.length?0:i.length}sendImpression(e){const t=this.searchResultsContainer.find(".search-results"),i=t.find(".search-results-content .card"),s=[];i.toArray().filter(d.Ao).map((e=>{var t;const i=W(e),n=i.data(),a=n.trackerObjectType,o=(0,d.MM)(n,a),r=`${o}${null!==(t=n.catchupStartTime)&&void 0!==t?t:""}`;this.viewedCards.includes(r)||(this.viewedCards.push(r),s.push({id:o,type:a,position:i.index()+1}))})),this.viewedCards.filter((e=>!!e)),s.length&&this.tracker.sendImpression({event_created_client_ts:Date.now(),feed:{algorithm:"fast_search_result",type:"feed",position:1,source_action:"search",objects_extended:s},search:{request:null!=e?e:this.searchQuery,total:this.getTotalItemsInResult()}})}}var j=i(2732),q=i.n(j),K=i(1025),Q=i(3847);const z={0:"not_remind",1:"remind_last_moment",11:"remind_in_15_min",21:"remind_in_30_min",31:"remind_in_60_min"};var Y=i(8099),J=i(7399),X=i(3463),ee=i(7209);const te=()=>{const e=document.createElement("div");e.innerHTML="&nbsp;",e.className="AdsBox ads-box Ad300 AdHeader DisplayAd HomeAds SponsoredContent TmnAdsense XEad _ads abMessage ad-abc",e.id="AdsDiv",e.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -5000px !important; top: -5000px !important;");let t=!1;try{document.body.appendChild(e);const i=document.getElementsByClassName("AdsBox")[0];if(0===i.offsetHeight||0===i.clientHeight)t=!0;else{const e=window.getComputedStyle(i,null);!e||"none"!==e.getPropertyValue("display")&&"hidden"!==e.getPropertyValue("visibility")||(t=!0)}document.body.removeChild(e)}catch(e){}return t};i(614);const ie=L()(document);class se extends o.Z{constructor(e){super(e),this.catchupI18n={},this.tracker=r.Z.getInstance(),this.showNotify=()=>{const e=L()("[data-adbanner-hide]"),t=L()(".agreement-notify_v1:visible"),i=this.element.data("shownotify"),s=te();if(this.tracker.sendInfoChange({event_created_client_ts:Date.now(),info:{action:"status",code:"adblock"},configuration:{adblock_status:s}}),!i||e.length||!this.$notification.length||t.length)return this.showVpnBanner();s?(this.$notification.slideDown(200,(()=>{this.$mgg_wrapper.trigger("banner:toggle"),this.tracker.sendPopupShow({event_created_client_ts:Date.now(),target:{object_id:0,object_type:"POP_UP",object_code:"adblock_banner"}})})),this.$body.trigger("scroll"),this.$mainCustomScroll.trigger("scroll")):this.showVpnBanner()},this.updateCatchupLabel=()=>{this.eventMap(this),L()(".cards-list .catchup-item").each(((e,t)=>{const i=L()(t),s=i.find(".catchup-status"),n=Number(i.attr("data-catchup-start-time")),a=Number(i.attr("data-catchup-end-time")),o=(0,ee.wo)(n,a);if(o){const e=o in this.catchupI18n?this.catchupI18n[o]:o;s.text(e),o===ee.e0.soon&&s.addClass("soon"),o===ee.e0.onAir&&s.addClass("soon on-air"),s.fadeIn(0)}}))},this.showRemindPopup=e=>{var t;const i=null!==(t=e.attr("title"))&&void 0!==t?t:"",s=e.attr("data-catchup-start-time"),n=e.attr("data-catchup-end-time");this.$selectedNotifyElement=e,this.event.emit(u.K.CATCHUP_SET_POPUP_TITLE,{objectTitle:i,epgStart:s}),this.event.emit(u.K.CATCHUP_SET_NOTIFICATION,{action:"catchupRemindView",params:{epg_start:s,epg_end:n}})},this.clearRemindNotification=()=>{const e=this.$selectedNotifyElement.attr("data-catchup-start-time"),t=this.$selectedNotifyElement.attr("data-video-id"),i=L()(`[data-video-id="${t}"][data-catchup-start-time="${e}"]`),s=this.$announceNotifyModal.data("default-cover-text");i.find(".notification-title").text(s),i.removeAttr("data-current-notify-id").removeAttr("data-current-notify-time-id"),this.$selectedNotifyElement.find(".event-overlay-catchup").removeClass("has-notify")},this[".modal show.bs.modal"]=(e,t)=>{L()(".popover").popover("hide"),e.addClass("delay"),(0,d.gE)(e,t)},this[".modal shown.bs.modal"]=(e,t)=>{(0,d.gE)(e,t)},this[".modal hidden.bs.modal"]=e=>{L()(".modal:visible").length>0?this.$body.addClass("modal-open"):this.header.hasClass("is-fixed")&&this.header.removeClass("is-modal-open"),e.removeClass("delay"),e.removeClass("center"),e.find(".modal-dialog").css("top","auto")},this["[data-item-router] click"]=e=>{if(e.closest("main.main").length>0&&0===e.closest(".modal").length){const t=e.data("item-router"),i=e.data(t);if(null==i?void 0:i.id){const e=i.id;let s=document.location.origin+document.location.pathname+document.location.search;e&&(s+=`#r=${t}_${e}`),(0,d.lO)({url:s})}}},this[".notifyBanner_v1 .agree-btn click"]=e=>{const t=e.attr("data-notify-type"),i=()=>{this.$body.trigger("scroll"),this.$mgg_wrapper.trigger("banner:toggle")};"vpn"===t&&(w().set("vpn_notification_accept",Q.oq),L()(".vpnNotification_v1").slideUp(200,i)),this.element.removeClass("hasCookiesNotify")},this[".notifications > div:first-child click"]=e=>{this.$notification.slideUp(200,(()=>{if(this.$body.trigger("scroll"),this.$mainCustomScroll.trigger("scroll"),this.$mgg_wrapper.trigger("banner:toggle"),e.hasClass("adBlock_banner")){const e=(0,d.OF)({element_type:"button",element_code:"close"});e.target={object_id:0,object_type:"POP_UP",object_code:"adblock_banner"},this.tracker.sendUiClick(e)}}))},this[".agreement-notify_v1 .close-button click"]=()=>{setTimeout((()=>{this.$mgg_wrapper.trigger("banner:toggle")}),201)},this["{window} load"]=()=>{this.lazyImages.image.update()},this.$announceNotifyModal=L()("#announceNotification"),this.catchupI18n=this.element.data("catchup-i18n"),this.updateCatchupLabel(),this.initEventListeners(),this.eventMap(this),this.isTablet=this.element.data("istablet"),this.$body=L()("body"),this.$mainCustomScroll=L()(".main-custom-scroll"),this.$notification=this.element.find(".notifications > div:first-child"),this.$mgg_wrapper=L()(".wrapper"),function(){const e=new Date;w().set("u_timezone_offset",String(e.getTimezoneOffset()))}(),this.header=L()(".header"),this.realHeader=this.header.find(".realHeader"),this.objectsHistory(),this.initLazyLoad(),this.event.on("browser:set-cookie",(function(e){const t=null==e?void 0:e.cookies;t&&Object.keys(t).forEach((function(e){const i=t[e].value,s=t[e].expiresAt;i&&s&&w().set(e,i,{expires:new Date(1e3*+s)})}))})),Y.Z.extract(),J.Z.onMessage(J.x.AUTHORIZATION,(e=>{(0,d.c4)(e.data.callbackUrl)}));const t=window.sessionStorage.getItem(K.Z.uncompletedETCustomEvent);if(t){const{trackerAction:e,eventData:i}=JSON.parse(t);this.tracker.sendCustomAction(i,e),window.sessionStorage.removeItem(K.Z.uncompletedETCustomEvent)}setTimeout(this.showNotify,500)}widgetUpdateDone(e,t,i){const s=this.$selectedNotifyElement.attr("data-catchup-start-time");switch(t){case"catchupRemindView":if("ok"===i&&e.html){const t=this.$announceNotifyModal.find(".notification-time-list"),i=this.$selectedNotifyElement.attr("data-current-notify-time-id");t.html(e.html),i&&t.find(`[data-notify-time-id='${i}']`).addClass("active"),this.$announceNotifyModal.modal("show"),this.tracker.sendPopupShow({event_created_client_ts:Date.now(),target:this.getTargetData()})}break;case"catchupRemindAdd":if("ok"===i){if(this.$selectedNotifyElement.is('[class*="videoEmbed_v"]'))window.mggPlayer.set("player:remindInfo",{visible:!0,hasNotification:!0}),this.$selectedNotifyElement.attr("data-current-notify-id",e.html);else{const t=this.$selectedNotifyElement.attr("data-video-id"),i=L()(`[data-video-id="${t}"][data-catchup-start-time="${s}"]`);this.$selectedNotifyElement.hasClass("videoInfoPanel_v1")?L()(".notification-icon").toggleClass("active"):i.find(".notification-icon").toggleClass("active"),i.attr("data-current-notify-id",e.html)}this.$announceNotifyModal.modal("hide")}break;case"catchupRemindDelete":if("ok"===i){if(this.$selectedNotifyElement.is('[class*="videoEmbed_v"]'))window.mggPlayer.set("player:remindInfo",{visible:!0,hasNotification:!1});else{const e=this.$selectedNotifyElement.attr("data-video-id"),t=L()(`[data-video-id="${e}"][data-catchup-start-time="${s}"]`);this.$selectedNotifyElement.hasClass("videoInfoPanel_v1")?L()(".notification-icon").toggleClass("active"):t.find(".notification-icon").toggleClass("active")}this.clearRemindNotification(),this.$announceNotifyModal.modal("hide")}break;case"catchupRemindUpdate":const t=this.$selectedNotifyElement.attr("data-current-notify-time-id"),n=this.$selectedNotifyElement.attr("data-video-id"),a=L()(`[data-video-id="${n}"][data-catchup-start-time="${s}"]`);t&&a.attr("data-current-notify-time-id",t),"ok"===i&&this.$announceNotifyModal.modal("hide")}this.eventMap(this)}initEventListeners(){this.event.on(u.K.CATCHUP_SET_NOTIFICATION,(e=>{const{action:t,params:i,$element:s}=e;i.lang=c.Z.lang,s&&(this.$selectedNotifyElement=s),(0,l.Z)(this,t,{url:(0,Z.Z)(`/wb/${this.widgetConfig.class}/${t}`,this.widgetConfig.id,i)},{backendRequest:!0,loadingClass:"fake-loading-class"})})),this.event.on(u.K.CATCHUP_SET_POPUP_TITLE,(({objectTitle:e,epgStart:t})=>{const i=L()(".announceNotification .object-title");let s=i.attr("data-popup-title");s&&e&&(s=s.replace("[objectTitle]",e),s=s.replace("[epgStart]",X.Z.unix(Number(t)).format("HH:mm, D MMMM")),i.text(s))})),this.event.on(u.K.CATCHUP_UPDATE_LABELS,this.updateCatchupLabel),ie.on("click",".is-notifiable:not(.live) .invisible-overlay",(e=>{e.preventDefault(),e.stopPropagation();const t=L()(e.target).closest(".catchup-item");t.length&&this.showRemindPopup(t)})),ie.on("click",".is-notifiable:not(.live)",(e=>{const t=L()(e.currentTarget);t.is('[class*="videoEmbed_v"]')||(e.preventDefault(),this.showRemindPopup(t))})),ie.on("click",".live.is-notifiable .notification-icon",(e=>{e.stopPropagation();const t=L()(e.currentTarget),i=t.closest(".catchup-item");i.length&&this.showRemindPopup(i)})),ie.on("click","[data-notify-time-id]",(e=>{const t=L()(e.currentTarget),i=this.$selectedNotifyElement.attr("data-video-id"),s=this.$selectedNotifyElement.attr("data-catchup-start-time"),n=this.$selectedNotifyElement.attr("data-live-start-time"),a=this.$selectedNotifyElement.attr("data-current-notify-id"),o=t.attr("data-notify-time-id");this.sendNotifyTimeAction(z[+o],t.text().trim()),a?this.event.emit(u.K.CATCHUP_SET_NOTIFICATION,{action:"catchupRemindUpdate",params:{notify_id:a,notify_time_id:o}}):this.event.emit(u.K.CATCHUP_SET_NOTIFICATION,{action:"catchupRemindAdd",params:{video_id:i,epg_start:null!=s?s:n,notify_time_id:t.data("notify-time-id")}});const r=L()(`[data-video-id="${i}"][data-catchup-start-time="${s}"]`),d=t.text();if(r.find(".notification-title").text(d),this.$selectedNotifyElement.find(".notification-title").text(d),o){this.$selectedNotifyElement.attr("data-current-notify-time-id",o),r.attr("data-current-notify-time-id",o),this.$selectedNotifyElement.find(".notification-actual-time-text").text(t.text());const e=this.$selectedNotifyElement.find(".event-overlay-catchup");e.hasClass("has-notify")||e.addClass("has-notify")}})),ie.on("click",".remind-delete",(e=>{const t=L()(e.currentTarget);this.sendNotifyTimeAction(z[0],t.text().trim());const i=this.$selectedNotifyElement.attr("data-current-notify-id");i?this.event.emit(u.K.CATCHUP_SET_NOTIFICATION,{action:"catchupRemindDelete",params:{notify_id:i}}):this.$announceNotifyModal.modal("hide")}))}initLazyLoad(){this.lazyImages={image:new(q())({elements_selector:".lazy_image",threshold:125,data_src:"original",data_srcset:"original-set"}),slider:new(q())({elements_selector:".lazy_slider_image",threshold:0,data_src:"original"}),list:new(q())({elements_selector:".type-list img",threshold:125,data_src:"original"}),catalog:new(q())({elements_selector:".type-catalog img",threshold:125,data_src:"original",data_srcset:"original-set"}),normal:new(q())({elements_selector:".card img",threshold:125,data_src:"original",data_srcset:"original-set"}),carousel:new(q())({elements_selector:".type-carousel .cards-list",threshold:125,data_src:"original",data_srcset:"original-set"})},this.event.on(u.K.UPDATE_LAZY_LOAD,(e=>{e.view_type&&this.lazyImages[e.view_type].update()}))}objectsHistory(){const e=location.hash;if(e){const t=this.hashParse(e);if("r"in t){const e=t.r.split("_")[0],i=parseInt(t.r.split("_")[1],10);if(e&&i){const t=this.element.find(`[data-${e}]`);for(let s=0;t.length>s;s++){const n=t.eq(s),a=n.data(e);if("id"in a){const e=parseInt(a.id,10);i===e&&ie.on("ready",(()=>{const e=n.closest(".cards"),t=n.closest(".cards-row"),i=n.offset();if(i){let s=i.top-75;if(e.hasClass("type-carousel")){let i;const a=e.offset();a&&(s=a.top-75,i=t.length>0?t.index():n.index(),e.mggCarousel(i))}setTimeout((()=>{L()("html, body").animate({scrollTop:s},300)}),200)}}))}}}}}}showVpnBanner(){const e=L()(".vpnNotification_v1");e.length&&(e.slideDown(200,(()=>{this.$mgg_wrapper.trigger("banner:toggle")})),this.$mgg_wrapper.addClass("hasCookiesNotify"))}hashParse(e){const t=e.slice(1),i=t.split("&"),s={};return i.forEach((function(e){const t=e.split("=")[0],i=e.split("=")[1];s[t]=i||""})),s}getTargetData(){const{catchupStartTime:e,catchupEndTime:t}=this.$selectedNotifyElement.data();return{object_type:"POP_UP",object_code:"broadcast_reminder",object_start_time_ts:+e,object_end_time_ts:+t,object_title:this.$selectedNotifyElement.attr("title"),object_root_code:(0,ee.i9)(e,t)}}sendNotifyTimeAction(e,t){const i=(0,d.OF)({element_type:"pop_up_button",element_code:e,element_text:t});i.target=this.getTargetData(),this.tracker.sendUiClick(i)}}class ne extends o.Z{constructor(e){super(e),this.tracker=r.Z.getInstance(),this[".scrollTop-link click"]=(e,t)=>{t.preventDefault(),L()("html, body").animate({scrollTop:0},500)},this[".unavailableKidContent-page .unavailableKidContent_linkItem click"]=(e,t)=>{this.tracker.sendUiClick({event_created_client_ts:Date.now(),ui:r.Z.buildUI("button",e.hasClass("unavailableKidContent_linkItem_main")?"to_main_page":"change_profile",e[0])})},this.eventMap(this)}}var ae=i(8e3);class oe extends o.Z{constructor(e){super(e),this.submitIframeForm=()=>{this.element.find("#iframeProcessingForm").trigger("submit")},this.requestPaymentForm=e=>{var t;this.updateWidgetData();const i=encodeURIComponent(null!==(t=ae(".wrapper_v1").data("referrer"))&&void 0!==t?t:""),s=(0,Z.Z)(`/wb/${this.widgetConfig.class}/get_iframe_form`,this.widgetConfig.id,{...e,referrer:i});(0,l.Z)(this,"paymentForm",{method:"GET",url:s},{backendRequest:!0,loadingClass:"fake-loading-class"})},this.requestFacebookPixelData=e=>{const t=document.location.search.includes("fbpe");t&&(0,d.$I)("fbpe"),this.updateWidgetConfig();const i=(0,Z.Z)(`/wb/${this.widgetConfig.class}/get_facebook_pixel_script`,this.widgetConfig.id,{...e,...t&&{fbpe:1}});(0,l.Z)(this,"facebookPixel",{method:"GET",url:i},{backendRequest:!0})},this.removeLoader=()=>this.element.removeClass("is-loading"),this.updateWidgetConfig=()=>{this.element=ae(`#${this.widgetConfig.id.replace("#","")}`),this.widgetConfig=this.element.data("widget")},this.updatePaymentForm=e=>{var t;if(null===(t=this.$iframe)||void 0===t?void 0:t.length){const e=this.$iframe[0].outerHTML;this.$iframe.remove(),this.$iframeWrapper.html(e),this.setIframe()}this.$formWrapper.html(e),this.submitIframeForm()},this.event.on(u.K.CARD_IFRAME_RELOAD,this.requestPaymentForm),this.event.on(u.K.CARD_IFRAME_UPDATE_FB_PIXEL,this.requestFacebookPixelData)}widgetUpdateDone(e,t){if(e.html)switch(t){case"paymentForm":this.updatePaymentForm(e.html);break;case"facebookPixel":this.element.find("#paymentFacebookPixelPlace").html(e.html)}}widgetUpdateAlways(){}widgetUpdateFail(){}updateWidgetData(){this.updateWidgetConfig(),this.element.addClass("is-loading"),this.$formWrapper=this.element.find("#iframeProcessingFormPlace"),this.$iframeWrapper=this.element.find("#iframeProcessingFramePlace"),this.setIframe()}setIframe(){var e;(null===(e=this.$iframe)||void 0===e?void 0:e.length)&&this.$iframe.off("load",this.removeLoader),this.$iframe=this.element.find('[name="processingFrame"]'),this.$iframe.on("load",this.removeLoader)}}const re="userFavoritesHandler_v1",de="active";class le extends o.Z{constructor(e){super(e,re),this.requestFired=!1,this.event.on(u.K.FAVORITE_WILL_CHANGE,((e,t)=>{this.toggleUserFavorites(this.getFavoriteAction(t),e)}))}widgetUpdateDone(e,t,i){}widgetUpdateAlways(){this.requestFired=!1}toggleUserFavorites(e,t,i){if(this.requestFired)return;this.requestFired=!0,this.createETFavoriteEvent(e,i);const s={favoriteData:t,element:i};(0,l.Z)(this,e,{data:{...t},method:"POST",url:`/wb/${re}/${e}`},{backendRequest:!0},s)}getFavoriteAction(e){return e?"delete":"add"}}var ce=i(8e3);class he extends o.Z{}var ue=i(8e3);class me extends o.Z{constructor(e){var t;super(e),this.tracker=r.Z.getInstance(),this.sendImpression=(e="init")=>{clearTimeout(this.feedTimeout),this.feedTimeout=window.setTimeout((()=>{const t=this.element.find(".cards-list .card");if(t.length){const i=t.toArray().reduce(((e,t,i)=>{if((0,d.Ao)(t)){const s=(0,d.tU)(ue(t)),n={id:s.object_id,type:s.object_type,access:s.access,discounted:s.discounted?1:0,position:i+1,..."object_start_time_ts"in s&&{start_time_ts:s.object_start_time_ts},..."object_end_time_ts"in s&&{end_time_ts:s.object_end_time_ts}};e.push(n)}return e}),[]),s=i.filter((e=>e.id&&!this.viewedPopupItems.includes(e.id)));if(s.length){const t={event_created_client_ts:Date.now(),feed:{source_action:e,algorithm:"user_history",type:"collection",position:1,objects_extended:s}};s.forEach((e=>this.viewedPopupItems.push(e.id))),this.tracker.sendImpression(t)}}}),1e3)},this.widgetUpdateDone=(e,t,i)=>{if("list"===t)"ok"===i&&e.html&&(this.setContent(e.html),(0,B.f)(this.element.find(".nano")),this.sendImpression(),this.toolTipInit(),this.eventMap(this))},this.widgetUpdateFail=()=>{},this.widgetUpdateAlways=()=>{},this[".watching mouseenter"]=e=>{this.showTimeout=window.setTimeout((()=>{this.isWatchingOpen||(ue(document).trigger("click"),this.isWatchingOpen=!0,this.toggleActive(this.isWatchingOpen),(0,l.Z)(this,"list",{url:(0,Z.Z)(null,this.widgetConfig.id,{view_type:"list"})},{ajaxDelayTime:this.options.ajaxDelayTime}))}),200),$.isHover&&e.addClass("show")},this[".watching mouseleave"]=e=>{clearTimeout(this.showTimeout),clearTimeout(this.feedTimeout),this.isWatchingOpen=!1,this.toggleActive(this.isWatchingOpen),$.isHover&&e.removeClass("show"),this.setContent("")},this["[data-video] mouseenter"]=e=>{this.element.find(".keyboard-hover").removeClass("keyboard-hover hover"),e.addClass("mouse-hover hover")},this["[data-video] mouseleave"]=e=>{e.removeClass("mouse-hover hover")},this[".watching-menu mousemove"]=()=>{this.keyboardMode&&(this.keyboardMode=!1,this.element.find(".cards-list").removeClass("block-pointer"))},this[".watching-toggle click"]=(e,t)=>{this.isWatchingOpen||t.preventDefault(),r.Z.setSourceInLocalStorage("top_menu",r.Z.getPageCode())},this["[type=text] keydown"]=(e,t)=>{switch(t.keyCode){case this.keyCode.DOWN:this.moveSelection("next");break;case this.keyCode.ENTER:this.enterSelection();break;case this.keyCode.UP:this.moveSelection("prev");break;case this.keyCode.ESCAPE:this.element.find(".watching-toggle").trigger("mouseleave")}},this[".videoItem  click"]=e=>{const t=(0,d.L7)(e,"watching","init","collection",void 0,"user_history");r.Z.setSourceInLocalStorage("watching",r.Z.getPageCode()),this.tracker.sendObjectClick(t)},this[".nano scroll"]=e=>{var t;const i=null!==(t=e.scrollTop())&&void 0!==t?t:0,s=i>this.lastTopScrollPosition;this.lastTopScrollPosition=i,this.sendImpression(s?"click_forward":"click_backward")},this.options={ajaxDelayTime:500},this.eventMap(this),this.keyboardMode=!1,this.isWatchingOpen=!1,this.keyCode={DOWN:40,ENTER:13,ESCAPE:27,UP:38},this.contentContainer=this.element.find(".watching-menu-content"),this.watchingContainer=this.element.find("[type=text]"),this.lastTopScrollPosition=null!==(t=this.element.find(".nano").scrollTop())&&void 0!==t?t:0,this.event.on("watched:delete",(e=>{this.actionElementDelete(e.video_id),this.toggleActive(!0)})),this.viewedPopupItems=[]}toolTipInit(){this.element.find('[data-toggle="tooltip"]').tooltip({trigger:"hover",animation:!0,delay:{show:1e3,hide:0}})}actionElementDelete(e){if(!e)return;const t=this.element.find("[data-video]");t.each(((i,s)=>{const n=ue(s),a=ue(s).data("video");a.id&&a.id===e&&(this.removePopOver(),1===t.length&&this.lastElementWillDeleteFromDom(),n.slideUp({duration:300,complete:()=>{n.remove(),this.removePopOver()}}))}))}toggleActive(e){this.watchingContainer.trigger(e?"focus":"blur")}lastElementWillDeleteFromDom(){this.element.find(".watching-results_history_title, hr").slideUp(300)}removePopOver(){const e=ue("[aria-describedby], .popover"),t=ue(".tooltip");e.length>0&&e.popover("hide"),t.length>0&&t.tooltip("hide")}moveSelection(e){this.keyboardMode||(this.keyboardMode=!0,this.element.find(".cards-list").addClass("block-pointer"));const t=this.element.find(".videoItem"),i=t.length,s=t.index(t.filter(".hover"));let n=s;n+="prev"===e?-1:1,n<0?n=i-1:n>=i&&(n=0);const a=t.eq(n),o=this.element.find(".nano"),r=this.element.find(".watching-results-title").outerHeight(),d=a[0].offsetTop;switch(e){case"prev":0===s||0===n?o.scrollTop(d):r&&d+r<o[0].scrollTop&&o.scrollTop(d+r/2);break;case"next":0===n?o.scrollTop(d):r&&d+a[0].clientHeight+r>=o[0].scrollTop+o[0].clientHeight&&o.scrollTop(d+r/2)}t.removeClass("mouse-hover keyboard-hover hover"),a.addClass("keyboard-hover hover")}enterSelection(){const e=this.element.find(".videoItem.hover").find("a:first").attr("href");e&&(window.location.href=e)}setContent(e){this.contentContainer.html(e||"")}}var ge=i(8e3);class pe extends o.Z{constructor(e){super(e),this.widgetUpdateDone=(e,t,i)=>{if("delete"===t)"ok"===i&&(this.element.removeClass("active"),this.event.emit("watched:delete",{video_id:this.videoId}))},this.widgetUpdateFail=()=>{},this.widgetUpdateAlways=()=>{};const t=this;this.eventMap(this),ge(document).on("click",".mgg-history-delete",(function(e){e.preventDefault();const i=ge(this),s=i.data("watched");t.element=i,t.videoId=s.video_id,(0,l.Z)(t,"delete",{data:{video_id:s.video_id},method:"POST",url:"/wb/userHistoryHandler_v1/delete"},{backendRequest:!0})}))}}var _e=i(9609),ve=i(4460);var fe,Ee;!function(e){e.GET_STARTSCREEN_DATA="GET_STARTSCREEN_DATA"}(fe||(fe={})),function(e){e.CLICK="rotatorTracker:click_event",e.CLOSE="close",e.ET_IMPRESSION="eventTracker:impression",e.ET_UI_CLICK="eventTracker:ui_click",e.LOADED="loaded",e.NAVIGATE="navigate",e.SHOW="rotatorTracker:show_event",e.START="start",e.INTERACTIVE_TOKEN="interactiveToken"}(Ee||(Ee={}));class Te extends o.Z{constructor(e){super(e),this.loadingTimerValue=5e3,this.analyticsRequestsCounter=0,this.forceNavigate=null,this.isIPad=!1,this.initStartscreen=(e,t)=>{if(this.trackingData=e.tracking_data,this.idHash=e.id_hash,this.landingType=e.type,this.isPopup=this.element.data("display-as-popup"),this.headerHide=this.element.data("header-hide"),e.url&&t){const e=this.landingRotatorFrameWrapper.data("is-mobile"),i=document.createElement("iframe");i.src="about:blank",i.srcdoc=t,i.name="landingRotatorFrame",i.allowFullscreen=!0,i.frameBorder="0",i.dataset.adtConsent="ignore",e&&(i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%"),this.landingRotatorFrameWrapper.length&&this.landingRotatorFrameWrapper[0].append(i),this.landingRotatorFrame=i.contentWindow}this.landingRotatorFrame&&(this.setLoadingTimer(),this.getHeightFromIframe()),this.eventMap(this)},this.widgetUpdateFail=()=>{},this.widgetUpdateAlways=()=>{},this.getHeightFromIframe=()=>{this.landingRotatorFrame&&this.landingRotatorFrame.postMessage({message:"getHeight"},"*")},this.sendTrackingData=()=>{if(this.landingRotatorFrame){const e={lang:this.trackingData.ctx_params.lang,platform:this.trackingData.ctx_params.platform,partner:this.trackingData.ctx_params.partner,endpointPath:this.landingsBaseUrl,tracking_data:this.trackingData};this.postMessage({name:"init",data:e})}},this.setLoadingTimer=()=>{this.loadingTimer=window.setTimeout((()=>{this.closeIframe()}),this.loadingTimerValue)},this.clearLoadingTimer=()=>{this.isPopup||this.event.emit(u.K.SHOW_STARTSCREEEN_WITH_HEADER),this.overflowElement.addClass("overflow-hidden"),clearTimeout(this.loadingTimer)},this["{window} message"]=(e,t)=>{this.msgListener(t)},this["{window} resize"]=()=>{(0,d.Ds)(this.getHeightFromIframe,300,!1)},this.getStartScreenContentPath=this.element.data("get-startscreen-content"),this.getStartScreenContentPath&&!Y.Z.check()&&(this.tracker=r.Z.getInstance(),this.isIPad=(0,d.rP)(),this.landingsBaseUrl=this.element.data("landings-base-url"),this.landingRotatorFrameWrapper=this.element.find(".jsLandingRotatorFrameWrapper"),(0,l.Z)(this,fe.GET_STARTSCREEN_DATA,{url:(0,Z.Z)(`${this.getStartScreenContentPath}${this.isIPad?"&device_key=cms_webipad":""}`,this.widgetConfig.id)},{backendRequest:!0,useBB:!0}),this.eventMap(this))}widgetUpdateDone(e,t,i){if(t===fe.GET_STARTSCREEN_DATA)if("ok"===i){const{html:t,json:i}=e;this.initStartscreen(i,t)}else"error"===i&&e.errors&&(this.element.remove(),this.event.emit(u.K.ROTATOR_ERROR));this.eventMap(this)}closeIframe(){this.element.remove(),this.overflowElement.removeClass("overflow-hidden"),window.__isRotatorVisible__=!1,this.event.emit(u.K.ROTATOR_CLOSE)}loadedHandler(e){this.sendTrackingData(),this.getHeightFromIframe(),window.__isRotatorVisible__=!0,this.element.addClass("is-loading"),this.setLoadingTimer()}async interactiveTokenHandler(){const e=await ve.Z.get();this.postMessage({name:Ee.INTERACTIVE_TOKEN,data:e})}showEventAnalyticHandler(){(0,k.Z)(this.trackingData.show_event[0]);const e={event_created_client_ts:Date.now(),target:{object_code:this.trackingData.entity_meta.campaign.id,object_id:this.trackingData.entity_meta.campaign.id_hash,object_type:"CAMPAIGN",object_title:this.trackingData.entity_meta.campaign.title},feed:{type:"landing",algorithm:"rotator",code:this.trackingData.entity_meta.landing.id,id:this.trackingData.entity_meta.landing.id_hash,title:this.trackingData.entity_meta.landing.title},page:{code:this.landingType}};this.tracker.sendPageView(e,{onSuccess:()=>{this.finishAnalyticHandler()}})}async clickEventAnalyticHandler(){try{await(0,k.Z)(this.trackingData.click_event[0])}finally{this.finishAnalyticHandler()}}impressionAnalyticHandler(e){const t={event_created_client_ts:Date.now(),feed:e.data.feed,target:e.data.target};this.tracker.sendImpression(t,{onSuccess:()=>{this.finishAnalyticHandler()}})}uiClickAnalyticHandler(e){const t={...e.data,event_created_client_ts:Date.now(),source_code:this.landingType,source_channel:this.landingType,page:{code:this.landingType}};this.tracker.sendUiClick(t,{onSuccess:()=>{this.finishAnalyticHandler()}})}finishAnalyticHandler(){this.analyticsRequestsCounter--,this.forceNavigate&&0===this.analyticsRequestsCounter&&this.forceNavigate()}navigateHandler(e){0===this.analyticsRequestsCounter?_e.Z.redirectToTargetUrl(e):(window.clearTimeout(this.navigateTimeout),this.forceNavigate=()=>{window.clearTimeout(this.navigateTimeout),this.forceNavigate=null,_e.Z.redirectToTargetUrl(e)},this.navigateTimeout=window.setTimeout((()=>{var e;null===(e=this.forceNavigate)||void 0===e||e.call(this)}),2e3))}postMessage(e){var t;null===(t=this.landingRotatorFrame)||void 0===t||t.postMessage({megogoApp:e},"*")}msgListener(e){var t;const i=e.originalEvent,s=null===(t=i.data)||void 0===t?void 0:t.megogoApp;if(s)if("string"==typeof s)switch(s){case Ee.LOADED:this.element.removeClass("hidden"),this.clearLoadingTimer(),this.loadedHandler(e),this.isIPad&&window.scroll(0,0);break;case Ee.START:this.element.removeClass("is-loading"),this.clearLoadingTimer();break;case Ee.CLOSE:this.closeIframe();break;case Ee.SHOW:this.analyticsRequestsCounter++,this.showEventAnalyticHandler();break;case Ee.CLICK:this.analyticsRequestsCounter++,this.clickEventAnalyticHandler();break;case Ee.INTERACTIVE_TOKEN:this.interactiveTokenHandler()}else if(null==s?void 0:s.name)switch(s.name){case Ee.NAVIGATE:this.element.addClass("is-loading"),this.navigateHandler(s.data.href);break;case Ee.ET_IMPRESSION:this.analyticsRequestsCounter++,this.impressionAnalyticHandler(s);break;case Ee.ET_UI_CLICK:this.analyticsRequestsCounter++,this.uiClickAnalyticHandler(s)}}}var we=i(8e3);i(3734);var Ie=i(8e3);class Se extends o.Z{constructor(e){super(e),this.tracker=r.Z.getInstance(),this[".profile-list-item .user-avatar click"]=e=>{const t=Ie("html").attr("lang"),i=e.closest(".profile-list-item"),s=i.data("profile-id"),n=i.data("profile-type-id");if(!s)return;const a=new FormData;a.set("profile_id",s),(0,l.Z)(this,"changeProfile",{contentType:!1,data:a,method:"POST",processData:!1,url:(0,Z.Z)(`/wb/${this.widgetConfig.class}/switchProfile`,this.widgetConfig.id,{lang:t}),timeout:15e3},{backendRequest:!0},{profileId:s,profileTypeId:n,coldStartUrl:e.data("cold-start-url"),mainPageUrl:e.data("main-page-url")})},this[".profile-list-item .plus-button click"]=(e,t)=>{const i=e.closest(".profile-list-item").find(".profile-list-name").text().trim(),s=(0,d.OF)({element_text:i,element_code:"add_profile"});this.tracker.sendUiClick(s,{useBeacon:!0})},this.eventMap(this)}widgetUpdateAlways(){}widgetUpdateDone(e,t,i,s){if("changeProfile"===t)if("ok"===i){s&&this.tracker.sendChangeProfile({event_created_client_ts:Date.now(),profile:{id:s.profileId,type:s.profileTypeId},info:{action:"changed_dropdown",code:"profile"}},{useBeacon:!0});const{coldStartUrl:e,mainPageUrl:t}=null!=s?s:{};J.Z.sendMessage({messageName:J.x.AUTHORIZATION,callbackUrl:t}),(0,d.c4)(null!=e?e:t)}}widgetUpdateFail(){}}var ye=i(8e3);class be extends o.Z{constructor(e){super(e,"voteButtonsHandler_v1"),this.tracker=r.Z.getInstance(),this.optimisticUpdateVoteButtons=e=>{var t;const i=this.element.parent();if(i.data("userLoginned")){const s=null===(t=this.element.data("vote"))||void 0===t?void 0:t.video_id,n=ye(".vote-button").filter(((e,t)=>{var i;return(null===(i=ye(t).data("vote"))||void 0===i?void 0:i.video_id)===s})),a=n.filter(".is-like"),o=n.filter(".is-dislike"),r=null!=e?e:i.data("currentVote");o.toggleClass("active",-1===r),a.toggleClass("active",1===r)}},this.createETVoteEvent=(e,t)=>{},this.eventMap(this),ye(document).on("click","[data-vote]",(0,d.Ds)((e=>{e.preventDefault();const t=ye(e.currentTarget);if(t.hasClass("active"))return;const i=t.data("vote");this.element=t,this.optimisticUpdateVoteButtons(i.vote),this.createETVoteEvent(i,t),(0,l.Z)(this,"action",{data:i,method:"POST",url:"/wb/voteButtonsHandler_v1/vote"},{backendRequest:!0})}),1e3,!0))}widgetUpdateAlways(){}widgetUpdateDone(e,t,i){var s;if("action"===t){const t=this.element.parent(),n=null===(s=this.element.data("vote"))||void 0===s?void 0:s.video_id,a=ye(".vote-button").filter(((e,t)=>{var i;return(null===(i=ye(t).data("vote"))||void 0===i?void 0:i.video_id)===n}));if(!a.length)return;const o=a.filter(".is-dislike"),r=a.filter(".is-like");if("ok"===i&&e.json){const i=e.json;o.find(".value").text(i.textDislike),r.find(".value").text(i.textLike),t.data("currentVote",i.vote);const s=window.uncompletedETVoteFavoriteEvent;if(window.uncompletedETVoteFavoriteEvent){const{eventData:e,trackerAction:t}=s;this.tracker.sendCustomAction(e,t),window.uncompletedETVoteFavoriteEvent=null}}else{const e=t.data("currentVote");o.toggleClass("active",-1===e),r.toggleClass("active",1===e)}}delete this.element}widgetUpdateFail(e,t,i,s){"action"===s&&"error"===t&&this.optimisticUpdateVoteButtons(),delete this.element}}var Ce=i(8e3);var Ae=i(8e3);class ke extends o.Z{constructor(e){super(e),this["{document} [data-video] mouseenter"]=e=>{this.showPopoverItem(e,"video")},this["{document} [data-tv] mouseenter"]=e=>{this.showPopoverItem(e,"tv")},this["{document} [data-video] mouseleave"]=()=>{this.hidePopoverItem()},this["{document} [data-tv] mouseleave"]=()=>{this.hidePopoverItem()},this["{document} .popover mouseenter"]=()=>{this.elementActive&&clearTimeout(this.hideTimeout)},this["{document} .popover mouseleave"]=()=>{this.hideTimeout=window.setTimeout((()=>{this.elementActive&&this.popoverHide(this.elementActive),this.elementActive=null}),this.hideTimeoutDelay)},this["{document} .modal hide.bs.modal"]=()=>{this.elementActive&&this.popoverHide(this.elementActive)},this.ajax=!1,this.hideTimeoutDelay=200,this.showTimeoutDelay=1200,this.eventMap(this),this.event.on(u.K.UPDATE_VIDEO_QUICK_INFO_POPOVER_LISTENERS,(()=>this.eventMap(this)))}widgetUpdateAlways(){this.ajax=!1}widgetUpdateDone(e,t,i){if("info"===t)"ok"===i&&this.elementActive&&e.html&&(this.popoverShow(this.elementActive,e.html),this.eventMap(this));this.eventMap(this)}popoverHide(e){if(e&&e.length>0){e.removeClass("hover");const t=e.find(".thumbnail");if(t.length)return t.popover("hide")}}popoverShow(e,t){if(Ae(document).trigger("click"),e){e.addClass("hover");const i=e.find(".thumbnail");i.length&&(e.data("content",t),i.popover({constraints:[{attachment:"together",to:"scrollParent"}],content:()=>{const t=Ae(e.data("content").trim());return t||""},html:!0,placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-body"></div></div>',trigger:"manual"}),i.popover("show"))}}hidePopoverItem(){if($.isTouch)return!1;clearTimeout(this.showTimeout),this.hideTimeout=window.setTimeout((()=>{this.elementActive&&this.popoverHide(this.elementActive),this.elementActive=null}),this.hideTimeoutDelay)}showPopoverItem(e,t){if(this.ajax||$.isTouch)return;const i=e.data(t);if((null==i?void 0:i.id)&&(null==i?void 0:i.showVideoPopover)){if(this.elementActive){const e=this.elementActive.data(t);e&&i.id&&i.id===e.id&&clearTimeout(this.hideTimeout)}this.elementHover=e,this.showTimeout=window.setTimeout((()=>{this.elementActive=e,this.ajax=!0,(0,l.Z)(this,"info",{url:(0,Z.Z)(c.Z.lang,this.widgetConfig.id,{video_id:i.id})})}),this.showTimeoutDelay)}}}class Pe extends o.Z{}class De extends o.Z{constructor(e){super(e),this.eventMap(this)}widgetUpdateAlways(){}widgetUpdateDone(e,t,i){}widgetUpdateFail(){}}class Re extends o.Z{constructor(e){super(e),this.eventMap(this)}widgetUpdateAlways(){}widgetUpdateDone(e,t,i){}widgetUpdateFail(){}}window.analytics_v1=class extends D{constructor(e){super(e),this["{window} load"]=()=>{this.setGDPREventListener()},this.eventMap(this),this.trackerContainerSelector=".page_v1",this.resetPositionHelper(),this.checkDocumentReferrer(),this.tracker=r.Z.getInstance({userId:this.userId,did:this.did,baseUrl:this.trackerBaseV3Url,createInitEvent:()=>this.getInitData(_.type),onTrackerStart:()=>this.onTrackerStartEvent(),onNewSessionStart:()=>this.onNewSessionStartEvent(),onTrackerRequestStart:()=>this.onTrackerRequestStartEvent(),isDesktop:!0}),R(".desktop-megogo-accountProfile_v1").length||this.initAndSendPageView(),this.sendClientId()}checkDocumentReferrer(){document.referrer||r.Z.refreshSourceInLocalStorage()}applyPageViewTags(e){super.applyPageViewTags(e);const t=new v.Z("ds_b");t.clearTagIfNeed()&&(e.tags={...e.tags,ds_b:t.getCurrentTagValue()}),b.Z.hasTryAndBuyBtn&&c.Z.isAuthorized&&!b.Z.isFromTryAndBuy&&"sended"!==b.Z.getCurrentTagValue()&&b.Z.setValueIfNeed("on")&&(e.tags={...e.tags,tb_b:b.Z.getCurrentTagValue()})}initAndSendPageView(e){const t=this.getPageViewData(),i=e?(0,d.Ee)(t,e):t,s=R(".paymentCard .paymentCard-mask"),{code:n}=i.page;n===`profile${E.e.paymentData}`&&s.length&&(i.payment=this.getPageViewPaymentData(s)),window.localStorage.getItem(f.M.isFromQuickBuyPopup)&&(i.target={...i.target,object_type:"OTHER",object_code:"quick_purchase"}),this.sendPageView(i)}},window.applicationLinks_v1=N,window.authForm_v3=O.Z,window.footer_v1=M,window.header_v2=V,window.quickSearch_v1=G,window.wrapper_v1=se,window.static_v1=g,window.page_v1=ne,window.cardIframe_v1=class extends oe{},window.userFavoritesHandler_v1=class extends le{constructor(e){super(e),this.tracker=r.Z.getInstance(),this.eventMap(this),this.event.on(u.K.FAVORITE_DID_CHANGE,((e,t)=>{this.favoriteChangedHandler(e,t.video_id)})),this.initFavoriteClickHandler()}widgetUpdateDone(e,t,i,s){const n=null==s?void 0:s.favoriteData;if("ok"===i){switch(t){case"add":this.favoriteStateChangeHandler({state:!0,el:null==s?void 0:s.element,favoriteData:n});break;case"delete":this.favoriteStateChangeHandler({state:!1,el:null==s?void 0:s.element,favoriteData:n})}const e=window.uncompletedETVoteFavoriteEvent;if(e){const{eventData:t,trackerAction:i}=e;this.tracker.sendCustomAction(t,i),window.uncompletedETVoteFavoriteEvent=null}}}createETFavoriteEvent(e,t){const i="add"===e?"favourites_add":"favourites_remove",s=ce('[class*="tvVideoView_v"]'),n=s.length?s:ce('[class*="videoView_v"]'),a=null==t?void 0:t.closest(".card.videoTvItem"),o=(null==a?void 0:a.length)?a:null==t?void 0:t.closest(".videoItem"),r={event_created_client_ts:Date.now()};if(null==o?void 0:o.length){r.target=(0,A.xg)(o),r.target.access=o.data("access");const e=o.index()+1;r.target.object_position=e,o.hasClass("videoTvItem")&&(r.target.object_position+=2*o.closest(".cards-row").index())}else n.length&&(r.target=(0,A.ND)());r.target&&(window.uncompletedETVoteFavoriteEvent={trackerAction:i,eventData:r})}favoriteStateChangeHandler({state:e,favoriteData:t,el:i}){this.event.emit(u.K.FAVORITE_DID_CHANGE,e,t),e||this.event.emit(u.K.FAVORITE_DELETE,null==t?void 0:t.video_id),null==i||i.toggleClass(de,e)}favoriteChangedHandler(e,t){ce(`.mgg-favorite[data-favorite*="${t}"]`).each(((i,s)=>{const n=ce(s),a=n.data("favorite");a.video_id===t&&n.toggleClass(de,e)}))}initFavoriteClickHandler(){ce(document).on("click",".mgg-favorite, .mgg-favorite-delete",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const t=ce(e.currentTarget);let i,s,n;t.find('[data-toggle="tooltip"]').tooltip("hide"),t.hasClass("mgg-favorite")?(i=this.getFavoriteAction(t.hasClass("active")),s=t.data("favorite"),n=t):t.hasClass("mgg-favorite-delete")&&(i=this.getFavoriteAction(!0),s={video_id:t.data("watched").video_id,tv:!1}),i&&this.toggleUserFavorites(i,s,n)}))}},window.voteButtons_v1=he,window.userWatchingPopup_v1=me,window.userHistoryHandler_v1=pe,window["desktop-megogo-rotatorLanding_v1"]=class extends Te{constructor(e){super(e),this.hideNotificationsClass="notifications-hide",this.showNotificationsClass="notifications-show",this.setHeightFromIframeData=e=>{const t=this.element.find(".rotatorLanding-container");t.css({height:e,width:"","padding-top":""})},this["{window} orientationchange"]=()=>{this.scrollToTop()},this.eventMap(this),this.overflowElement=we("body, html"),this.container=this.element.find(".rotatorLanding-container")}scrollToTop(){this.isIPad&&(window.scroll(0,0),this.overflowElement.scrollTop(0))}setNotificationsStyles(e){if(this.isPopup||document.body.classList.toggle(this.hideNotificationsClass,e),!this.headerHide&&(document.body.classList.toggle(this.showNotificationsClass,e),this.isPopup&&(this.setSidesAndTopValues(),e))){const e=we(".wrapper");e.on("banner:toggle",(()=>{this.setSidesAndTopValues()}))}}closeIframe(){super.closeIframe(),this.setNotificationsStyles(!1)}loadedHandler(e){super.loadedHandler(e),this.setNotificationsStyles(!0);const t=e.originalEvent;window.addEventListener("load",(()=>{setTimeout((()=>{var e;(null===(e=t.data)||void 0===e?void 0:e.contentHeight)&&this.setHeightFromIframeData(t.data.contentHeight)}),0)})),this.scrollToTop()}msgListener(e){var t;super.msgListener(e);const i=e.originalEvent;(null===(t=i.data)||void 0===t?void 0:t.contentHeight)&&this.setHeightFromIframeData(i.data.contentHeight)}setSidesAndTopValues(){this.calculateAndSetProperTopValue(),this.calculateAndSetProperSideValues()}calculateAndSetProperTopValue(){this.element.css({top:this.partOfHeaderInVieport()})}partOfHeaderInVieport(){const e=we(".header_v2")[0];let t=0;if(e){const{top:i,height:s}=e.getBoundingClientRect();t=i+s}return t>0?t:0}calculateAndSetProperSideValues(){var e,t;const i=null!==(e=this.element.width())&&void 0!==e?e:0,s=null!==(t=this.element.height())&&void 0!==t?t:0;if(0===i||0===s)return;const n=.8*i,a=.8*s,o=n/16*9,r=a/9*16;a>o?this.setProportions(n,o):this.setProportions(r,a)}setProportions(e,t){this.container.css({width:Math.round(e),height:Math.round(t),"padding-top":"0px"})}},window.userInfo_v1=Se,window.voteButtonsHandler_v1=class extends be{constructor(){super(...arguments),this.createETVoteEvent=(e,t)=>{const i=1===e.vote?"like_add":"dislike_add",s=Boolean(Ce('[class*="videoView_v"]').length),n=Boolean(t.closest(".video-popover").length),a={event_created_client_ts:Date.now()};if(n){const t=Ce(`[data-toggle="popover"][data-obj-id=${e.video_id}]`);a.target=(0,A.xg)(t),a.target.access=t.data("access"),a.target.object_position=t.index()+1,a.feed={code:"like_dislike",type:"pop-up",position:0,id:0}}else s&&(a.target=(0,A.ND)());a.target&&(window.uncompletedETVoteFavoriteEvent={trackerAction:i,eventData:a})}}},window.videoQuickInfo_v1=ke,window.videoItem_v1=Pe,window.tvItem_v1=De,window.staticWidgets_v1=Re},6163:(e,t,i)=>{"use strict";i.d(t,{m:()=>s});const s="is-loading loader-bg-black"},2975:(e,t,i)=>{"use strict";i.d(t,{J:()=>a,g:()=>o});var s=i(6808),n=i.n(s);const a=e=>{const t=n().get("ab_tests_data"),i=t?JSON.parse(atob(t)):[],s=i.find((t=>t.code===e));return null!=s?s:null},o=(e,t)=>({id:e.id,code:e.code,ver:e.assigned_option.ab_test_version_num,opt:e.assigned_option.ab_test_option_num,goal:t,bk:e.assigned_option.user_bucket_num})},4043:(e,t,i)=>{"use strict";i.d(t,{Xf:()=>n,xg:()=>a,ND:()=>o});var s=i(8e3);const n=()=>{const e=s('[class*="tvVideoView_v"]'),t=e.length?e:s('[class*="videoView_v"]'),i=s('[class*="hierarchyMenu_v1"]');return t.length?o():i.length?d(i):null},a=e=>{const t=e.data("obj-id"),i=e.data("tracker-object-type"),s=e.data("title"),n=e.data("vod-rule")||e.data("obj-type"),a=e.data("access"),o=e.data("discount")?1:0;return{object_id:t,object_type:i,object_title:s,vod_rule:n,access:a,discounted:o}},o=()=>{const e=s('[class*="videoEmbed_v"]'),t=a(e);return e.data("is-catch-up")?{...t,...r(e)}:t},r=e=>{const t=e.data("virtual-id"),i=e.data("object-title"),s=e.data("tracker-catchup-object-type");return{virtual_object_id:t,object_title:i,object_type:s}},d=e=>{const t=e.find(".hierarchy-header-item.active").data("elementCode");return{object_id:t,object_type:"COLLECTION"}}},3788:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var s=i(1025),n=i(4261),a=i(7553);const o={purchasePopUp:1,TariffPage:2,payment:3,purchaseFailed:4,mobileSubscriptionLandingPage:1,mobileTariffPage:2,mobileChoiceOfPayment:3,paymentMobile:4,mobilePurchaseFailed:5},r={try_session:e=>`try_parent_${e}`,sub_session:e=>`sub_parent_${e}`,sub_session_long:e=>`sub_long_parent_${e}`,sub_session_end:e=>`sub_end_parent_${e}`};const d=new class{initGTM({uid:e,anonUid:t,did:i,isMobile:s,getGAId:n}){this.uid=e,this.anonUid=t,this.did=i,this.isMobile=s,this.getGAId=n}delayGTMLoginEvent({isRegistration:e,method:t}){sessionStorage.setItem(s.Z.delayedLoginEvent,JSON.stringify({name:e?"registration":"login",method:t}))}sendGTMLoginEvent(){const e=sessionStorage.getItem(s.Z.delayedLoginEvent);if(e){const{name:t,method:i}=JSON.parse(e);this.sendGTMEvent({event:t,method:i,...this.getGTMSessionParams()}),sessionStorage.removeItem(s.Z.delayedLoginEvent)}}sendGTMSessionEvent(e){this.sendGTMEvent({event:e,...this.getGTMSessionParams()})}sendGTMSessionSubEvent(e,t){const i={event:t?r[e](t.id):e,...this.getGTMSessionParams()};t&&(i.is_autoprolong=t.isAutoprolongEnabled),this.sendGTMEvent(i)}sendGTMSessionTryEvent(e){this.sendGTMEvent({event:`is_try_avail_${e}`,...this.getGTMSessionParams()})}sendGTMSuccessPayment(e,t){this.sendGTMEvent({event:e,ecommerce:{...this.getGTMSessionParams(),...t}})}sendGTMSuccessPristavkaPayment(e){this.sendGTMSuccessPayment("ecom_pristavka",{transaction_id:Date.now(),value:e,currency:"UAH",items:[{price:e,item_name:" MEGOGO",item_id:"0001",item_category:"pristavka"}]})}sendGTMCheckoutEvent(e,t,i,s){this.sendGTMEvent({event:e,ecommerce:{checkout:{uid:this.uidValue,anon_user_id:this.anonUidValue,actionField:{step:o[e],...s},products:t,...i}}})}sendGTMEvent(e){var t;null===(t=window.dataLayer)||void 0===t||t.push(e)}get uidValue(){return this.uid}get anonUidValue(){return this.anonUid}get didValue(){return this.did}get sessionIdValue(){return(0,a.Z)()}get googleClientIdValue(){var e;return null!==(e=this.getGAId())&&void 0!==e?e:n.R}getGTMSessionParams(){return{uid:this.uidValue,anon_user_id:this.anonUidValue,device_id:this.didValue,session_id:this.sessionIdValue,google_client_id:this.googleClientIdValue}}}},4460:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var s=i(248);class n{constructor(){}static checkApiResponse(e){return"ok"===e.result&&200===e.code}}var a=i(7334);var o=i(5802);const r=new class{constructor({lang:e,geo:t,uid:i,profileId:s}){this.pointer=`${e}${t}${i}${s}`,this.lang=e}getInteractiveToken(e){return e.interactive_token}async get(){var e;try{return null!==(e=this.getFromStorage())&&void 0!==e?e:await this.refresh()}catch(e){return""}}getFromStorage(){const e=this.getPointerFromStorage();if(this.pointer===e){const e=window.localStorage.getItem(this.pointer);if(e)try{const t=JSON.parse(e),i=1e3*t.expires_at<Date.now();if(!i)return this.getInteractiveToken(t)}catch(e){}}return null}async refresh(){const e=this.getPointerFromStorage();e&&(window.localStorage.removeItem(s.M.interactiveTokenPointer),window.localStorage.removeItem(e));const t=await this.request();return window.localStorage.setItem(s.M.interactiveTokenPointer,this.pointer),window.localStorage.setItem(this.pointer,JSON.stringify(t)),this.getInteractiveToken(t)}async request(){const e=await a.Z.withCSRFRetry((()=>fetch(`/r/interactive_token?lang=${this.lang}`,{headers:a.Z.getHeaders()})));if(e.ok){const t=await e.json();if(n.checkApiResponse(t))return t.data}throw new Error}getPointerFromStorage(){return window.localStorage.getItem(s.M.interactiveTokenPointer)}}({lang:o.Z.lang,geo:o.Z.geo,uid:o.Z.uid,profileId:o.Z.profileId})},9609:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var s=i(6346),n=i(6775);const a="";class o{constructor({lang:e,changedHost:t,isMobile:i}){this.urlMapping={collection:({values:e})=>{const t=e[0];return t?`/collection/${t}`:a},video:({values:e})=>{const t=e[0];return t?`/view/${t}`:a},sport:({values:e})=>{const[t,i]=e,s=i||t;return s?`/sport/${s}`:a},subscription:({values:e})=>{const[t,i]=e,n=Boolean(i),a=new URLSearchParams;return this.isMobile&&a.set(s.L.paymentStep,n?"pay":"tariffs"),a.set(s.L.serviceId,t),n&&a.set(s.L.tariffId,i),`/payment?${a.toString()}`},actor:({values:e})=>{const t=e[0];return t?`/name/${t}`:a},premieres:()=>"/premiere?",tvchannel:({values:e})=>{const t=e[0];return t?`/tv/channels/${t}`:a},category:({values:e})=>({16:"/films",4:"/series",6:"/mult",9:"/show",22:"/football"}[e[0]||""]||a),profile:({values:e})=>"manage"===e[0]?"/profile":"email"===e[0]?`/auth_login?${s.L.viewAction}=login_email`:this.isMobile?`/account?${s.L.viewType}=account_settings${n.e.profileEdit}`:`/account${n.e.profileEdit}`,pair:()=>this.isMobile?`/account?${s.L.viewType}=devices${n.e.profileDevices}`:`/account${n.e.profileDevices}`,promocode:({values:e})=>{const[t,i]=e;let n=t?`?${s.L.promocode}=${t}`:"";return t&&i&&(n+=`&${s.L.shouldActivate}=1`),`/code${n}`},main:()=>a,catchup:({values:e})=>{const[t,i]=e;if(!t)return a;if(!i)return`/tv/channels/${t}`;const n=Number.parseInt(i,10);return`/tv/channels/${t}?${s.L.est}=${n}&${s.L.eet}=${n+120}`},static:({values:e})=>({tv_section:"/tv/channels/",films_section:"/films/main",cartoons_section:"/mult/main",series_section:"/series/main",live_section:"/show/main"}[e[0]||""]||a),auth:()=>"/auth_login",search:({values:e})=>{const t=e[0];return"/search-extended"+(t?`?${s.L.q}=${t}`:"")},custom:({url:e})=>`${e.pathname}${e.hash}`,filters:({values:e,url:t})=>{const i=e[0]+t.search,n=`/search-extended?${s.L.mainTab}=filters`,a="results?",o=i.startsWith(a);if(!o)return"/";if(a===i)return n;const r=(e=>{const t=[];return e.forEach((e=>t.push(e))),t})(t.searchParams).some((e=>e.split(",").some((e=>!isNaN(Number(e))))));return`${n}${r?`&${s.L.convertFilters}=true`:""}`},default:()=>a},this.lang=e,this.isMobile=i,this.changedHost=null!=t?t:window.location.origin}getParsedUrl(e){const t=e.replace(/^megogo:\/\//,"").replace(/###/g,""),i=new URL(t,location.origin),[s,...n]=i.pathname.replace(/^\//,"").split("/"),a=this.urlMapping[s];let o=null!=a?a:this.urlMapping.default;!a&&s.length&&(o=this.urlMapping.custom);const r=o({values:n,url:i}),d=this.lang?`/${this.lang}`:"",l=new URL(`${this.changedHost}${d}${r}`);return i.searchParams.forEach(((e,t)=>l.searchParams.append(t,e))),l.href}redirectToTargetUrl(e){window.location.href=e.startsWith("http")?e:this.getParsedUrl(e)}}var r,d=i(5802),l=i(8e3);class c{constructor(){}}r=c,c.getInstance=()=>(c._instance||(c._instance=new o({lang:d.Z.lang,isMobile:d.Z.isMobile,changedHost:l("[data-changed-host]").data("changed-host")})),c._instance),c.getParsedUrl=e=>{r.getInstance().getParsedUrl(e)},c.redirectToTargetUrl=e=>{r.getInstance().redirectToTargetUrl(e)};const h=c},5802:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var s=i(8e3);const n=s("html"),a=s(".analytics_v1"),o=a.data("user-id");class r{}r.lang=n.attr("lang"),r.locale=n.data("locale"),r.geo=n.data("geo"),r.uid=o,r.profileId=a.data("user-profile-id"),r.profileTypeId=a.data("user-profile-type-id"),r.isMobile=a.data("mobile"),r.isAuthorized=o>0;const d=r},7882:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const s="g-recaptcha-response",n=new Promise((e=>{"object"==typeof grecaptcha?grecaptcha.ready(e):window.reCaptchaOnloadCallback=e}));var a=i(8e3);class o{constructor(e){this.id=e}async check({action:e,container:t}){const i=this.getSiteKey(t);if(!i)return;await n;const s=await grecaptcha.execute(i,{action:e});this.findRecaptchaInput(t).val(s)}showError(e,t){const i=null==t?void 0:t.form;(null==i?void 0:i[s])&&e.text(i[s]).css("display","block")}resetError(e){e.empty().removeAttr("style")}getSiteKey(e){return this.findRootElement(e).data("sitekey-v3")}findRootElement(e){const t=`.recaptcha_v1_${this.id}`;return(null==e?void 0:e.length)?e.find(t):a(t)}findRecaptchaInput(e){return this.findRootElement(e).find(`input[name="${s}"]`)}}},6980:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var s=i(8275),n=i(6775),a=i(5802),o=i(8e3);class r extends s.Z{constructor(){super("tb_b"),this.hasTryAndBuyBtn=!1,this.isFromTryAndBuy=!1,this.tryAndBuyBtnText="";const e=o(".jsTryAndBuyBtn");this.hasTryAndBuyBtn=e.length>0,this.isFromTryAndBuy=window.location.hash.includes(n.e.fromTryAndBuyBtn),this.tryAndBuyBtnText=e.text().trim()}setValueIfNeed(e){const t=this.getCurrentTagValue()===e;return!(t||!this.hasTryAndBuyBtn&&null!==e)&&super.setValueIfNeed(e)}clearTagIfNeed(){return!this.isFromTryAndBuy&&a.Z.isAuthorized&&super.clearTagIfNeed()}}const d=new r},2430:(e,t,i)=>{"use strict";function s(e,t,i={ajax:!0}){const s=window.location,n=[];let a=null!=e?e:"";e||(a=s.origin+s.pathname),a+=a.includes("?")?"&":"?";try{i.origin=encodeURIComponent(window.location.pathname)}catch(e){}return i.ajax=!0,t&&(i.widget=t.replace("#","")),Object.keys(i).forEach((e=>{const t=i[e];n.push(e+(t?`=${t}`:""))})),a+n.join("&")}i.d(t,{Z:()=>s})},4795:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var s=i(7189);class n{constructor(){}static prepareRequest(e){const t={url:e.url};return"POST"===e.method&&(t.body=e.data),{...e,method:"POST",url:s.Z.BINARY_BACKEND_URL,contentType:!1,processData:!1,xhrFields:{responseType:"text"},data:s.Z.encode(t)}}static parseResponse(e){return s.Z.decode(e)}}},6831:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});class s{static getMessageFromRawErrors(e){var t,i,s;return null!==(s=null!==(t=e.message)&&void 0!==t?t:null===(i=e.form)||void 0===i?void 0:i.message)&&void 0!==s?s:""}static getFormErrorsFromRawErrors(e){var t,i;const n=e.form,a=[];if(n)for(const e in n){const o=!e.endsWith(s.ERROR_CODE_SUFFIX)||!(e.slice(0,-s.ERROR_CODE_SUFFIX.length)in n);if(o){const o=null!==(t=n[e])&&void 0!==t?t:"",r=null!==(i=n[e+s.ERROR_CODE_SUFFIX])&&void 0!==i?i:"";a.push({field:e,code:r,message:o})}}return a}constructor(e){this.message=s.getMessageFromRawErrors(e),this.formErrors=s.getFormErrorsFromRawErrors(e)}}s.ERROR_CODE_SUFFIX="_code";const n=s},8905:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(8e3),n=i.n(s);function a(e,t,i){const s="function"==typeof history[i.historyUpdateMethod];if(i.history&&s){const s={href:e,widgetId:t.widgetConfig.id};n().extend(s,i.pushToState),history[i.historyUpdateMethod](s,"",e)}}},9958:(e,t,i)=>{"use strict";function s(e){}i.d(t,{Z:()=>s})},3538:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var s=i(8e3),n=i.n(s);var a=i(8905);const o={page:{stateUpdate(e,t,i){var s,o;e.title&&(s=e.title,document.title=s),e.ogtags&&(o=e.ogtags,o.url&&n()('meta[property="og:url"]').attr("content",o.url),o.title?n()('meta[property="og:title"]').attr("content",o.title):o.description?n()('meta[property="og:description"]').attr("content",o.description):o.image&&n()('meta[property="og:image"]').attr("content",o.image)),e.url&&(0,a.Z)(e.url,t,i)}}},r=o},3463:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var s=i(7484),n=i.n(s),a=i(4110),o=i.n(a),r=i(660),d=i.n(r),l=i(6833),c=i.n(l),h=i(9542),u=i.n(h),m=i(7124),g=i.n(m),p=i(5802);i(600),i(4144),i(5054),i(8768),i(953),i(2921),i(9670),i(8146),i(8092),i(6622),i(1987),i(7763);const _={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")},v=(e,t,i)=>i?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1],f=(e,t,i)=>e+" "+v(_[i],e,t),E=(e,t,i)=>v(_[i],e,t),T={relativeTime:{future:"pc %s",past:"pirms %s",s:(e,t)=>t?"daas sekundes":"dam sekundm",ss:f,m:E,mm:f,h:E,hh:f,d:E,dd:f,M:E,MM:f,y:E,yy:f}},w=p.Z.locale.substring(0,2);n().extend(o()),n().locale({ge:"ka"}[w]||w),n().extend(d()),n().extend(c()),n().extend(u()),n().extend(g()),n().updateLocale("lv",T);const I=n()},1578:(e,t,i)=>{"use strict";i.d(t,{f:()=>n});var s=i(8e3);s.fn.isolatedScroll=function(){return this.bind("mousewheel DOMMouseScroll touchmove MozMousePixelScroll",(function(e){const t=Number(e.wheelDelta||e.detail&&-e.detail||e.originalEvent.wheelDelta),i=this.scrollTop+s(this).outerHeight()-this.scrollHeight>=0,n=this.scrollTop<=0;t&&(t<0&&i||t>0&&n)&&e.preventDefault()})),this};const n=e=>{const t=(null==e?void 0:e.length)?e:s(".nano");return t.isolatedScroll()}},7317:(e,t,i)=>{"use strict";i.d(t,{K:()=>s});const s={CARD_IFRAME_REINIT:"CARD_IFRAME_REINIT",CARD_IFRAME_RELOAD:"CARD_IFRAME_RELOAD",CARD_IFRAME_UPDATE_FB_PIXEL:"CARD_IFRAME_UPDATE_FB_PIXEL",CARD_IFRAME_UPDATE_FORM:"CARD_IFRAME_UPDATE_FORM",CATCHUP_SET_NOTIFICATION:"CATCHUP_SET_NOTIFICATION",CATCHUP_SET_POPUP_TITLE:"CATCHUP_SET_POPUP_TITLE",CATCHUP_UPDATE_LABELS:"CATCHUP_UPDATE_LABELS",CATCHUP_WAS_UPDATED:"CATCHUP_WAS_UPDATED",CLOSE_PROFILE_POPUP:"CLOSE_PROFILE_POPUP",CREATE_ET_FAVORITE_EVENT:"CREATE_ET_FAVORITE_EVENT",DEACTIVATE_SUBSCRIPTION:"DEACTIVATE_SUBSCRIPTION",DEACTIVATE_SUBSCRIPTION_SUCCESS:"DEACTIVATE_SUBSCRIPTION_SUCCESS",EPG_INIT:"EPG_INIT",EPG_CHANGE_DESCRIPTION:"EPG_CHANGE_DESCRIPTION",FAVORITE_DELETE:"FAVORITE_DELETE",FAVORITE_DID_CHANGE:"FAVORITE_DID_CHANGE",FAVORITE_WILL_CHANGE:"FAVORITE_WILL_CHANGE",FOOTER_TOGGLE_SHOW:"FOOTER_TOGGLE_SHOW",IGNORE_SEARCH_REFERRER:"IGNORE_SEARCH_REFERRER",ON_MGG_PLAYER_READY:"ON_MGG_PLAYER_READY",OPEN_PAYMENT_DATA_TAB:"OPEN_PAYMENT_DATA_TAB",OPEN_PAYMENT_DATA_TAB_ADD:"OPEN_PAYMENT_DATA_TAB_ADD",PARENTAL_CONTROL_FORM_REQUEST:"PARENTAL_CONTROL_FORM_REQUEST",PARENTAL_CONTROL_CLOSE_STUB:"PARENTAL_CONTROL_CLOSE_STUB",PAYMENT_SETTINGS:"PAYMENT_SETTINGS",POKER_SEND_AUTH_EVENT:"POKER_SEND_AUTH_EVENT",PROFILE_PAGE_VIEW:"PROFILE_PAGE_VIEW",RESEND_PAGE_VIEW:"RESEND_PAGE_VIEW",RESEND_FEED_IN_VIEWPORT:"RESEND_FEED_IN_VIEWPORT",RESET_DATA_POSITION:"RESET_DATA_POSITION",ROTATOR_CLOSE:"ROTATOR_CLOSE",ROTATOR_ERROR:"ROTATOR_ERROR",SEND_PROMO_SLIDES_HIT:"SEND_PROMO_SLIDES_HIT",SEND_SOCIAL_SHARE_CLICK:"SEND_SOCIAL_SHARE_CLICK",SHOW_PAYMENT_MODAL:"SHOW_PAYMENT_MODAL",SHOW_STARTSCREEEN_WITH_HEADER:"SHOW_STARTSCREEEN_WITH_HEADER",SUBSCRIPTION_RENEW_ADD:"SUBSCRIPTION_RENEW_ADD",SUBSCRIPTION_SETTINGS_UPDATE:"SUBSCRIPTION_SETTINGS_UPDATE",TIMETABLE_GET_HEADER:"TIMETABLE_GET_HEADER",TIMETABLE_SCORE_CHANGE_VISIBILITY:"TIMETABLE_SCORE_CHANGE_VISIBILITY",TIMETABLE_SEND_HEADER:"TIMETABLE_SEND_HEADER",TIMETABLE_TOGGLE_HEADER:"TIMETABLE_TOGGLE_HEADER",TV_COLLECTION_UPDATE:"TV_COLLECTION_UPDATE",SEARCH_EXTENDED_SEND_IMPRESSION:"SEARCH_EXTENDED_SEND_IMPRESSION",SWITCH_CHANNEL_START:"SWITCH_CHANNEL_START",SWITCH_CHANNEL_END:"TV_STREAM_INIT",UPDATE_HEADER_TITLE:"UPDATE_HEADER_TITLE",UPDATE_LAZY_LOAD:"UPDATE_LAZY_LOAD",UPDATE_OBJECT_CLICK_HANDLERS:"UPDATE_OBJECT_CLICK_HANDLERS",UPDATE_PASSWORD_FORM_REQUEST:"UPDATE_PASSWORD_FORM_REQUEST",UPDATE_PAYMENT_FORM:"UPDATE_PAYMENT_FORM",UPDATE_RENEW_SUBSCRIPTION:"UPDATE_RENEW_SUBSCRIPTION",UPDATE_SUBSCRIPTION_DETAILS_POPUP_HANDLERS:"UPDATE_SUBSCRIPTION_DETAILS_POPUP_HANDLERS",UPDATE_SHARE_LINKS:"UPDATE_SHARE_LINKS",UPDATE_VIDEO_QUICK_INFO_POPOVER_LISTENERS:"UPDATE_VIDEO_QUICK_INFO_POPOVER_LISTENERS",UPDATE_VIDEO_OBJECT_RECOMMENDED_LISTENERS:"UPDATE_VIDEO_OBJECT_RECOMMENDED_LISTENERS",USER_SUBSCRIPTION_SETTINGS_UPDATE:"USER_SUBSCRIPTION_SETTINGS_UPDATE",USER_SUBSCRIPTION_SUCCESS_PAYMENT:"USER_SUBSCRIPTION_SUCCESS_PAYMENT",USER_UPDATE_PASSWORD:"USER_UPDATE_PASSWORD",USER_PARENTAL_CONTROLS_SHOW:"USER_PARENTAL_CONTROLS_SHOW",USER_PARENTAL_CONTROLS_UPDATE:"USER_PARENTAL_CONTROLS_UPDATE",VIDEO_EMBED_CHANGE:"VIDEO_EMBED_CHANGE",VIDEO_INFO_PANEL_ANIMATION_ENABLE:"VIDEO_INFO_PANEL_ANIMATION_ENABLE",VIDEO_INFO_PANEL_ANIMATION_DISABLE:"VIDEO_INFO_PANEL_ANIMATION_DISABLE",VIDEO_SEASONS_CHANGE_EMBED:"VIDEO_SEASONS_CHANGE_EMBED",VIDEO_SEASONS_CHANGE_SEASON:"VIDEO_SEASONS_CHANGE_SEASON",VIDEO_SEASONS_GET_META:"VIDEO_SEASONS_GET_META",VIDEO_SEASONS_UPDATE_VIDEO_INFO:"VIDEO_SEASONS_UPDATE_VIDEO_INFO",VIDEO_VIEW_HEADER_CHANGE_VISIBILITY:"VIDEO_VIEW_HEADER_CHANGE_VISIBILITY",USER_UNAUTHORIZED:"user:unauthorized",USER_PROFILE_ID_REQUIRED:"user:profile-id-required"}},5037:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var s=i(1025),n=i(5913),a=i(7399),o=i(3816),r=i(3099),d=i(3788),l=i(7882),c=i(7303),h=i(4551),u=i(8e3);class m extends o.Z{constructor(e){super(e),this.requestFired=!1,this.tracker=h.Z.getInstance(),this.isdnQueryParam="isdn",this.partnerKeyQueryParam="partner_key",this.tokenQueryParam="token",this.reloadAuthorizationStatus=()=>{a.Z.sendMessage({messageName:a.x.AUTHORIZATION}),window.uncompletedETVoteFavoriteEvent&&window.sessionStorage.setItem(s.Z.uncompletedETCustomEvent,JSON.stringify(window.uncompletedETVoteFavoriteEvent)),window.location.reload()},this["{window} message"]=(e,t)=>{try{const e=t.originalEvent.data,i={isRegistration:e.isRegistration,method:e.method};"loggedByNetwork"===e.event&&this.complete(i)}catch(e){}},this.$rootNode=this.element,this.recaptcha=new l.Z(this.widgetConfig.id)}widgetUpdateDone(e,t,i,s,n,a){var o,r;const{login_code:d,code_code:l}=null!==(r=null===(o=e.errors)||void 0===o?void 0:o.form)&&void 0!==r?r:{};"error"===i&&[d,l].includes("433")&&u.ajax({url:"/r/did"}).always((e=>{var i,s;const{osName:o,osVersion:r,browser:d,browserVersion:l,trackerAnonUserId:c,did:h}=null!==(i=u(".analytics_v1").data())&&void 0!==i?i:{},m=null!==(s=null==n?void 0:n.getResponseHeader("x-b3-trace-id"))&&void 0!==s?s:void 0,g="string"==typeof e?e:void 0;u.post("https://log.cnt.re/log/cms_web",{text:"CMS_433_FRAUD_DETECTOR_AUTH_ERROR",data:JSON.stringify({statusCode:433,statusText:"Fraud Detector Error",browser:d,browserVersion:l,cookiesDid:g,did:h,osName:o,osVersion:r,pAction:t,timestamp:Date.now(),traceId:m,trackerAnonUserId:c,url:null==a?void 0:a.url})})}))}getQueryParamsFormData(e){const t=new URLSearchParams(window.location.search),i=e.serializeArray();return[this.isdnQueryParam,this.partnerKeyQueryParam,this.tokenQueryParam].forEach((e=>{const s=t.get(e);s&&i.push({name:e,value:s})})),i}resendCodeButtonHandler(e){const{$button:t,$count:i,count:s}=e,n=t.find(".timeResend");let a=60;t.attr("disabled","disabled"),i.text(s);const o=()=>{a>0?(a--,n.text(a)):(this.clearIntervalResendCode(),n.text("").removeClass("inprogress"),t.removeAttr("disabled"))};s>0?(n.text(60).addClass("inprogress"),this.resendCodeCountdownId=window.setInterval((()=>o()),1e3)):(t.addClass("disable"),n.text("").removeClass("inprogress"))}clearIntervalResendCode(){this.resendCodeCountdownId&&window.clearInterval(this.resendCodeCountdownId)}validateAndShowError(e,t){var i,s;const n=null!==(s=null===(i=e.val())||void 0===i?void 0:i.toString())&&void 0!==s?s:"",a=e.attr("name"),o=e.data("errors");let r="";return""===n?r=o.enterValue:t(n,e)||(r=o.invalidValue),r.length&&a&&(0,c.ru)({formElement:e.closest("form"),errorsObj:{form:(0,c.P8)(a,r)}}),!r}parseTrackerErrors(e){return Object.keys(e).filter((e=>!e.includes("_code")&&"message"!==e)).map((t=>{var i,s;return{event_created_client_ts:Date.now(),error:{code:null!==(i=e[t+"_code"])&&void 0!==i?i:"",info:null!==(s=e[t])&&void 0!==s?s:""}}}))}sendPageView(e){this.tracker.sendPageView({event_created_client_ts:Date.now(),page:h.Z.getPageData(e)})}getRecaptchaAction({isModal:e}={}){return e?"Login_pop_up":"Login_page"}getGTMParamsFromAuthData(e){var t;return{isRegistration:Boolean(e.is_registration),method:null!==(t=e.auth_method)&&void 0!==t?t:""}}getFormStep(e){return this.$rootNode.find(`[data-form-step=${e}]`)}getVisibleFormStep(){return this.$rootNode.find("[data-form-step]:not(.hidden)")}complete(e){const t=this.targetUrl||this.element.find("[name=targetUrl]").val();if(d.Z.delayGTMLoginEvent(e),t)return a.Z.sendMessage({messageName:a.x.AUTHORIZATION}),void(window.location.href=t+window.location.hash);this.reloadAuthorizationStatus()}validatePhone(e){return n._D.test(e)&&(0,r.kM)((0,r.os)(e).length)}validateCode(e,t){var i;const s=parseInt(null!==(i=t.attr("maxLength"))&&void 0!==i?i:"",10);return e.length>=(s||n.Hq)}validateEmail(e){return n.CU.test(String(e).toLowerCase())}validatePassword(e){return e.length>=n.lo}isFormValid(e){const t=e.find("#loginPhone"),i=e.find("#codeInput"),s=e.find("#emailInput"),n=e.find("#passwordInput");return t.length&&!this.validateAndShowError(t,this.validatePhone)?(this.sendInputTrackerError({input:t,emptyCode:"validation.phone.empty",invalidCode:"validation.phoneNumber.invalidFormat"}),!1):i.length&&!this.validateAndShowError(i,this.validateCode)?(this.sendInputTrackerError({input:i,emptyCode:"validation.otp.empty",invalidCode:"validation.otp.invalid"}),!1):n.length&&!this.validateAndShowError(n,this.validatePassword)?(this.sendInputTrackerError({input:n,emptyCode:"validation.password.empty",invalidCode:"validation.password.invalidLength"}),!1):!(s.length&&!this.validateAndShowError(s,this.validateEmail))||(this.sendInputTrackerError({input:s,emptyCode:"validation.email.empty",invalidCode:"validation.email.invalid"}),!1)}sendErrors(e){this.parseTrackerErrors(e).forEach((e=>this.tracker.sendError(e)))}sendInputTrackerError({input:e,emptyCode:t,invalidCode:i}){var s;const n=!(null===(s=e.val())||void 0===s?void 0:s.toString().trim().length),a=e.data("errors");this.sendErrors({error:n?a.enterValue:a.invalidValue,error_code:n?t:i})}toggleFormStep(e){const{prevStep:t,nextStep:i}=e;this.$rootNode.find(`.step-${t}`).addClass("hidden"),this.$rootNode.find(`.step-${i}`).removeClass("hidden")}}},3816:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h,ee:()=>l});var s=i(8e3),n=i.n(s),a=i(3099),o=i(7187),r=i.n(o);let d;n().cachedScript=a.j0;const l=(d||(d=new(r())),d);class c{constructor(e,t,i){this.widget=e,this.item=t,this.itemEventName=String(i.pop());const s=t.match(/^\{.*?\}/);if(s){const e=s[0].slice(1,-1),t="document"===e?n()(document):n()(window);i.shift(),this.itemElements=i.length?t.find(i.join(" ")):t}else this.itemElements=e.element.find(i.join(" "));this.itemElements.on(this.itemEventName,this.onItemEvent.bind(this))}onItemEvent(e){this.item&&"function"==typeof this.widget[this.item]&&this.widget[this.item](n()(e.currentTarget),e)}dispose(){this.itemElements&&this.itemEventName&&this.itemElements.off(this.itemEventName,this.onItemEvent),delete this.item,delete this.itemElements,delete this.itemEventName}widgetUpdateAlways(){}widgetUpdateDone(){}widgetUpdateFail(){}}const h=class{constructor(e,t){this.element=n()(e),this.widgetConfig=this.element.data("widget")||{class:t,id:e,options:{}},this.widgetItems=[],this.event=l}eventMap(e){this.disposeWidgetItems(),Object.keys(e).forEach((t=>{const i=String(t).split(" ");i.length>1&&this.widgetItems.push(new c(e,t,i))}))}buildWbActionUrl(e,t){const i=`/wb/${this.widgetConfig.class}/${e}`,s=t?`?${t}`:"";return`${i}${s}`}disposeWidgetItems(){for(;this.widgetItems.length;){const e=this.widgetItems.shift();e&&e.dispose()}}dispose(){this.disposeWidgetItems()}}},614:(e,t,i)=>{var s,n;s=[i(8e3)],n=function(e){return function(e,t,i){"use strict";var s="mgg.carousel",n="."+s,a={NEXT:"next",PREVIOUS:"prev",TO:"to"},o={INIT:"init"+n,SLIDE:"slide"+n,SLID:"slid"+n,KEYDOWN:"keydown"+n,LOAD_ITEMS:"load_items"+n},r=function(t,i){var s=this;if(this._element=e(t),this._options=i,this._list=this._element.find(this._options.listSelector),0!==this._list.length&&(this._listItems=this._list.children(),0!==this._listItems.length)){this._listPosLeft=0,this._listWidth=parseInt(this._listItems.last().position().left+this._listItems.last().width()),this._wrapper=this._list.parent(),this._wrapperWidth=this._wrapper.width(),this._activeIndex=0,this._next=this._element.find(this._options.nextSelector),this._prev=this._element.find(this._options.prevSelector),this._sliding=null,this._options.keyboard&&this._element.on("keydown.mgg.carousel",e.proxy(this.keydown,this)),this._listWidth>this._wrapperWidth&&(this._next.removeClass("disabled").fadeIn(),this._prev.addClass("disabled").fadeIn());var n=e.Event(o.INIT,{relatedTarget:this._list[0]});setTimeout((function(){s._element.trigger(n)}),0)}};function d(t){return this.each((function(){var i=e(this),s=i.data("mgg.carousel"),n=e.extend({},r.DEFAULTS,i.data(),"object"==typeof t&&t),a="string"==typeof t?t:n.mggAction;!s&&/destroy/.test(a)||!s&&/resize/.test(a)||(s||i.data("mgg.carousel",s=new r(this,n)),"number"==typeof t?s.setVisible(t):a&&s[a]())}))}r.DEFAULTS={listSelector:".cards-list",itemSelector:".card",nextSelector:".next",prevSelector:".prev",keyboard:!0},r.prototype.destroy=function(){var t=this;this._next.toggleClass("disabled",!1),this._prev.toggleClass("disabled",!1),this._element.attr("no-fade-controls")||(this._next.fadeOut(),this._prev.fadeOut()),this._list.css("left","0"),this._element.removeData("mgg.carousel");var i=e.Event(o.INIT,{relatedTarget:this._list[0]});return setTimeout((function(){t._element.trigger(i)}),0),this},r.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},r.prototype.next=function(){if(!this._sliding)return this.slide(a.NEXT)},r.prototype.prev=function(){if(!this._sliding)return this.slide(a.PREVIOUS)},r.prototype.resize=function(){var e=parseInt(this._listItems.last().position().left+this._listItems.last().width()),t=this._wrapper.width();if(e!=this._listWidth||t!=this._wrapperWidth){this._listWidth=e,this._wrapperWidth=t;const i=this._listWidth>this._wrapperWidth;return i?(this._next.removeClass("disabled").fadeIn(),this._prev.addClass("disabled").fadeIn()):(this._next.fadeOut(),this._prev.fadeOut()),this.slide(i?void 0:a.PREVIOUS)}},r.prototype.refresh=function(){if(this._listItems=this._list.children(),this._listWidth-=this._listItems.first().outerWidth(!0),null==this._listItems[this._activeIndex]&&(this._activeIndex=this._activeIndex-1),1==this._isEnd&&this.slide(),this._listWidth<=this._wrapperWidth)this._list.css("left","0"),this._next.fadeOut(),this._prev.fadeOut();else{for(var e=this._wrapper.get(0).getBoundingClientRect(),t=[],i=0;i<this._listItems.length;i++)this._hasIntersection(this._listItems[i].getBoundingClientRect(),e)&&t.push(i);this._lazyLoadImages(t[0],t[t.length-1])}},r.prototype.preloadVisibleImages=function(){if(this._wrapper)for(var e=this._wrapper.get(0).getBoundingClientRect(),t=0;t<this._listItems.length;t++){if(!this._hasIntersection(this._listItems[t].getBoundingClientRect(),e)){this._lazyLoadImages(0,t-1);break}t===this._listItems.length-1&&this._lazyLoadImages(0,t)}},r.prototype._hasIntersection=function(e,t){return Math.max(e.left,t.left)<Math.min(e.left+e.width,t.left+t.width)&&Math.max(e.top,t.top)<Math.min(e.top+e.height,t.top+t.height)},r.prototype._lazyLoadImages=function(t,i){for(var s=t;s<=i;s++)this._listItems.eq(s).find("img").each((function(){var t=e(this);if(!t.hasClass("loaded")){var i=t.data("original"),s=t.data("original-set");i&&t.attr("src",i),s&&t.attr("srcset",s),t.addClass("loaded")}}))},r.prototype.refreshControls=function(){var e=0;return this._isBegin=!1,this._isEnd=!1,this._listItems=this._list.children(),this._listWidth=parseInt(this._listItems.last().position().left+this._listItems.last().width()),this._wrapperWidth=this._wrapper.width(),e=this._listItems[this._activeIndex].offsetLeft,e<0&&(e=0),0==e&&(this._isBegin=!0),this._listWidth>this._wrapperWidth&&e>this._listWidth-this._wrapperWidth&&(e=this._listWidth-this._wrapperWidth),e==this._listWidth-this._wrapperWidth&&(this._isEnd=!0),this._next.toggleClass("disabled",this._isEnd),this._prev.toggleClass("disabled",this._isBegin),this},r.prototype.slide=function(t,s){var n=e.Event(o.SLIDE,{relatedTarget:this._element[0]});if(this._element.trigger(n),!n.isDefaultPrevented()){this._sliding=!0;var r=0;switch(this._isBegin=!1,this._isEnd=!1,this._needToLoadItems=!1,t){case a.NEXT:r=this._listWidth-this._wrapperWidth;for(var d=0,l=this._listItems.length;d<l;d++)if(this._listItems[d].offsetLeft>this._wrapperWidth+Math.abs(this._listPosLeft)){this._lazyLoadImages(d,2*d-this._activeIndex),this._activeIndex=d,r=this._listItems[d].offsetLeft;break}r>this._listWidth-this._wrapperWidth&&(r=this._listWidth-this._wrapperWidth),r==this._listWidth-this._wrapperWidth&&(this._isEnd=!0),r>=this._listWidth-3*this._wrapperWidth&&(this._needToLoadItems=!0);break;case a.PREVIOUS:for(r=0,d=0,l=this._listItems.length;d<l;d++)this._listItems[d].offsetLeft<Math.abs(this._listPosLeft)-this._wrapperWidth&&(this._activeIndex=d,r=this._listItems[d].offsetLeft);r<0&&(r=0),0==r&&(this._isBegin=!0),this._isBegin&&this._prev.attr("data-prev-page")&&(this._needToLoadItems=!0);break;case a.TO:r=this._listItems[s.scrollTo].offsetLeft,r<0&&(r=0),0==r&&(this._isBegin=!0),this._listWidth>this._wrapperWidth&&r>this._listWidth-this._wrapperWidth&&(r=this._listWidth-this._wrapperWidth),r==this._listWidth-this._wrapperWidth&&(this._isEnd=!0),this._lazyLoadImages(0,this._listItems.length-1);break;default:if(this._element.attr("prevent-slide"))return;r=this._listItems[this._activeIndex].offsetLeft,r<0&&(r=0),0==r&&(this._isBegin=!0),this._listWidth>this._wrapperWidth&&r>this._listWidth-this._wrapperWidth&&(r=this._listWidth-this._wrapperWidth),r==this._listWidth-this._wrapperWidth&&(this._isEnd=!0),this._lazyLoadImages(0,this._listItems.length-1)}if(this._needToLoadItems){var c=e.Event(o.LOAD_ITEMS+this._next.attr("href").replace(/^#/,""),{relatedTarget:this._element[0]});e(i).trigger(c,{action:t})}this._next.toggleClass("disabled",this._isEnd),this._prev.toggleClass("disabled",this._isBegin);var h=e.Event(o.SLID,{relatedTarget:this._element[0]});return this._sliding=!1,this._element.trigger(h),this._list.css("left",(this._listPosLeft=-r)+"px"),this}},r.prototype.setVisible=function(e){var t=this._listItems.eq(e);if(0!==t.length){var i=t.position().left;i>Math.abs(this._listPosLeft)&&i<this._wrapperWidth+Math.abs(this._listPosLeft)||this.slide(a.TO,{scrollTo:e})}};var l=e.fn.mggCarousel;e.fn.mggCarousel=d,e.fn.mggCarousel.Constructor=r,e.fn.mggCarousel.noConflict=function(){return e.fn.mggCarousel=l,this};var c=function(t){var i,s=e(this),n=e(s.attr("data-target")||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),a=e.extend({},n.data(),s.data());d.call(n,a),t.preventDefault()};e(i).on("click.mgg.carousel.data-api","[data-mgg-action]",c);var h=null;e(t).on("load",(function(){e('[data-mgg-init="carousel"]').each((function(){var t=e(this);d.call(t,t.data())}))})).on("resize",(function(){clearTimeout(h),h=setTimeout((function(){e('[data-mgg-init="carousel"]').each((function(){var t=e(this);d.call(t,{mggAction:"resize"})}))}),250)}))}(e,window,document)}.apply(t,s),void 0===n||(e.exports=n)},8557:(e,t,i)=>{var s,n;s=[i(8e3)],n=function(e){return function(e,t,i){var s=function(e,t){this.$nav=e,this.$btn=t.btn,this.$vlinks=t.vlinks,this.$hlinks=t.hlinks,this.$allDropDownlinks=this.$hlinks.first().parent().children(),this.buttonShowAlways=t.buttonShowAlways,this.breakWidths=[],this.numOfItems=this.$vlinks.length,this.totalSpace=0,this.availableSpace=null,this.numOfVisibleItems=null,this.requiredSpace=null,this.init()};s.prototype={init:function(){var t=this;this.$nav.on("greedyNav:recalc",(function(){t.check()})),this.$vlinks.each((function(){t.totalSpace+=e(this).outerWidth(!0),t.breakWidths.push(t.totalSpace)})),t.check()},check:function(){return this.availableSpace=this.$nav.width()-this.$btn.outerWidth(!0),this.numOfVisibleItems=this.$vlinks.not(".hidden").length,this.requiredSpace=this.breakWidths[this.numOfVisibleItems-1],this.requiredSpace>this.availableSpace?(this.$vlinks.not(".hidden").last().addClass("hidden"),this.$hlinks.filter(".hidden").last().removeClass("hidden"),this.numOfVisibleItems-=1,this.check()):this.availableSpace>this.breakWidths[this.numOfVisibleItems]?(this.$vlinks.filter(".hidden").first().removeClass("hidden"),this.$hlinks.not(".hidden").first().addClass("hidden"),this.numOfVisibleItems+=1,this.check()):(this.numOfVisibleItems===this.$allDropDownlinks.length?this.$btn.addClass("invisible"):this.$btn.removeClass("invisible"),void this.$nav.removeClass("invisible"))}},e.fn.greedyNav=function(t){return this.each((function(){return new s(e(this),t)}))}}(e,window,document)}.apply(t,s),void 0===n||(e.exports=n)}}]);