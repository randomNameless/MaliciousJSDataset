<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mol-adverts-delayed.html</title>
</head>
<body>

<script>
/*! For license information please see mol-adverts-delayed.js.LICENSE.txt */
(()=>{var __webpack_modules__={4964:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l});var r=n(692);const i={},o=(e,t)=>{let n=(e.match(t)||[])[1]||"";return n=n.split(/[._]/g),{build:parseInt(n[2]||-1,10),major:parseInt(n[0]||-1,10),minor:parseInt(n[1]||-1,10)}},a=()=>{const e=navigator.userAgent;i.ua=e,i.isWindows=Boolean(e.match(/Windows Phone|iemobile|WPDesktop/i));try{i.isIPad=(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!i.isWindows}catch(e){i.isIPad=!1}i.isIDevice=(Boolean(e.match(/(iPad|iPhone|iPod)/i))||i.isIPad)&&!i.isWindows,i.isIPhone=Boolean(e.match(/iPhone/i))&&!i.isWindows,i.isAndroid=Boolean(e.match(/Android/i))&&!i.isWindows,i.isChrome=Boolean(e.match(/Chrome/i)),i.isFirefox=Boolean(e.match(/Firefox/i)),i.isKindleSilk=Boolean(e.match(/Silk|Kindle/i)),i.isAndroidPhone=i.isAndroid&&Boolean(e.match(/Mobile/i)),i.isAndroidTablet=i.isAndroid&&!Boolean(e.match(/Mobile/i)),i.isMobile=i.isIDevice||i.isAndroid||i.isWindows,i.isAndroidStock=i.isAndroid&&!i.isChrome&&!i.isFirefox&&!i.isKindleSilk;try{i.isIDevice?(i.mobileName=e.match(/(iPad|iPhone|iPod)/i)?e.match(/(iPad|iPhone|iPod)/i)[0]:"iPad",i.mobileVersion=o(e,/OS ((?:\d+[._]?)+)/i)):i.isAndroid?(i.mobileName="Android",i.mobileVersion=o(e,/Android ((?:\d+[._]?)+)/i)):i.isWindows?(i.mobileName="Windows Phone",i.mobileVersion=o(e,/Windows Phone ((?:\d+[._]?)+)/i)):(i.mobileName=null,i.mobileVersion={build:-1,major:-1,minor:-1})}catch(e){r.logger.error("Failed to parse mobile name and version",e),i.mobileName="unknown"}},s=()=>(r.logger.warn('"getZoom" function has been deprecated as it does not provide reliable values'),screen.deviceXDPI&&screen.logicalXDPI?screen.deviceXDPI/screen.logicalXDPI:document.width?document.width/window.innerWidth:screen.width&&window.innerWidth?screen.width/window.innerWidth:Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.body.scrollWidth)/(window.innerWidth||document.documentElement.clientWidth)),d=()=>window.matchMedia?window.matchMedia("(orientation:landscape)").matches:(window.innerWidth||document.documentElement.clientWidth)>(window.innerHeight||document.documentElement.clientHeight);try{a(),i.isAndroidStock&&(r.logger.debug("Executing Android Stock browser Orientation bug fix"),window.addEventListener("orientationchange",(()=>{const e=document.querySelector("meta[name=viewport]");if(e){const t=e.getAttribute("content");e.setAttribute("content","width=10000, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"),setTimeout((()=>{e.setAttribute("content",t)}),0)}})))}catch(e){r.logger.error("Error parsing user agent",e)}const l={deviceData:i,disableScroll:()=>{document.body.style.overflow="hidden",document.ontouchmove=e=>e.preventDefault()},enableScroll:()=>{document.body.style.overflow="auto",document.ontouchmove=()=>!0},getMobileVersion:()=>i.mobileVersion,getZoom:s,isAndroid:()=>i.isAndroid,isAndroidPhone:()=>i.isAndroidPhone,isAndroidStock:()=>i.isAndroidStock,isAndroidTablet:()=>i.isAndroidTablet,isChrome:()=>i.isChrome,isFirefox:()=>i.isFirefox,isIDevice:()=>i.isIDevice,isIPad:()=>i.isIPad,isIPhone:()=>i.isIPhone,isKindleSilk:()=>i.isKindleSilk,isLandscape:d,isMobile:()=>i.isMobile,isPortrait:()=>!d(),isWindows:()=>i.isWindows,isZoomed:()=>s()>1,onTouchEnd:e=>(setTimeout(e,400),e()),parseUserAgent:a,setupMobileClass:()=>{if(r.logger.warn('"setupMobileClass" has been deprecated and "features detection" should be prefered over "device detection"'),i.mobileName){const e=i.mobileName.toLowerCase().replace(/ /,"-");document.body.classList.add(e)}}}},4250:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AD_ATTRIBUTE:()=>d,TAGS_ATTRIBUTE:()=>l,addLoadListener:()=>u,onAdLoaded:()=>w,parse:()=>f,refreshAdvert:()=>v,refreshAdvertsWithNewTags:()=>y,requestAdvert:()=>m,requestDelayedAdvert:()=>_,reset:()=>T,stringify:()=>h});var r=n(7759),i=n(7303),o=n(6353),a=n(6964);const s=n(7830),d="data-adverts-ad",l="data-adverts-tags",c=n(7225),u=n(2864),p=(0,a.h)("AdsRenderer"),h=s.stringify,f=s.parse;function g(){return o}function m(e){if(p("requestAdvert",e.pos,e),["gpt","oop"].some((t=>e.slotTypes.includes(t)))){if(e.id){const t=document.getElementById(e.id);t&&(t.setAttribute(d,s.stringify(e)),t.matches(".adHolder *")||t.classList.contains("dmg-ads-ad")||t.classList.add("adHolder"))}return g().requestAd(e)}p("unsupported slot type, bailing",e.pos,e.slotTypes)}function v(e){g().refreshAdvert(e)}function y(e,t){const n=e.map(b).filter(Boolean).map((e=>e.ad));g().refreshAdvertsWithNewTags(n,t)}function b(e){const t=document.getElementById(e);if(t){const e=t.getAttribute(d),n=t.getAttribute(l);let r,o,a;if(e)return o=s.parse(e),r=(0,i.get)(o.pos)||o,a=n?s.parse(n):null,{ad:r,tags:a,container:t}}return null}async function _(e){}function w(e){for(let t=0,n=c.length;t<n;t++)c[t](e)}const S=r.Ay.broker("AdsRenderer");function T(){c.length=0}S.on("slot ready",m),S.on("ad rendered",((e,t)=>w(t))),S.on("refresh ads",(e=>{let{ids:t,plugins:n}=e;return y(t,n)}))},2864:(e,t,n)=>{const r=n(7225);e.exports=function(e){"function"==typeof e&&r.push(e)}},7225:e=>{e.exports=[]},6353:(e,t,n)=>{"use strict";n.r(t),n.d(t,{name:()=>b,refreshAdvert:()=>m,refreshAdvertsWithNewTags:()=>v,requestAd:()=>g,reset:()=>y});var r=n(7759),i=n(5446),o=n(6642),a=n(6964),s=n(7314);const d=(e,t)=>new Promise(((n,r)=>{const o=(0,i.Jt)("auction.maxTime",2e3),a=[];e.openStream({message:["get tags",{slot:t,timeout:o-100}],timeout:o,controlHandler:n=>{let{type:r,...i}=n;e.emit("auction event",t.pos,r,i)}}).on("data",(e=>{a.push(e)})).on("end",(()=>{e.emit("auction event",t.pos,"end"),n(a)})).on("error",(e=>r(e)))}));function l(e,t){t("formTags",e);const n=e.flat().map((e=>e?e.tags?e.tags:e:{}));return(0,s.x5)(n.reduce(((e,t)=>({...e,...Array.isArray(t)&&t.reduce(((e,t)=>({...e,...t})),{})||t})),{}))}async function c(e,t,n){const r=await d(e,n),i=await e.invokeAll("get tags based on tags",r);return[{...l(r,t),...i.reduce(((e,t)=>({...e,...t})),{})}]}const u=r.Ay.broker("DfpServer"),p=(0,a.h)("DfpServer");let h={};u.on("destroy slot",(e=>{delete h[e]}));let f=Promise.resolve();async function g(e){if(h[e.pos])return h[e.pos];u.emit("start bidding",e.pos);let t=[];if(e.skipHeaderBiders)p("skipping header biders for",e.pos);else{p("starting auction for",e.pos);const n=(0,i.Jt)("auction.maxTime",2e3),[r]=await Promise.all([c(u,p,e),(0,o.s5)(n,[f])]);t=r,p("auction ended for",e.pos,t),u.emit("bidding ended",e.pos)}return u.emit("slot ready for ad",e,t),h[e.pos]={tags:t},{tags:t}}function m(e){u.emit("bidding ended",e.pos),u.emit("gpt refreshAdvert",e.pos)}function v(e,t){const n=[];e.forEach((async t=>{p("starting auction for",t.pos);const r=await c(u,p,t);n.push({ad:t,tags:r}),p("auction ended for",t.pos,r),u.emit("bidding ended",t.pos),n.length===e.length&&u.emit("slot ready to refresh",n)}))}function y(){h={}}u.on("set page level targeting",(e=>{p("new page level targeting:",e),f=f.then((()=>e)).then((()=>{}))}));const b="DfpServer"},9515:(e,t,n)=>{"use strict";var r=n(7759),i=n(395),o=n(7303),a=n(1970),s=n(7838),d=n(6964);function l(e,t){if(Array.isArray(e))e.forEach(t);else{if("object"!=typeof e||null===e)throw new Error(`dont know how to iterate on ${e}`);for(const[n,r]of Object.entries(e))t(r,n)}}const{onBodyAvailable:c}=n(3575),u=r.Ay.broker("DfpAsyncHandler"),p=(0,d.h)("dfpAsyncHandler"),h={},f={},g=["sky_right_top","sky_left_top","mpu_top","billboard","sticky_banner"],m=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]);function v(e,t){if(e&&e.slots&&e.slots.length)return e.slots.forEach((function(r){const i=document.getElementById(r.slot.getSlotElementId()),o=!!i&&!i.classList.contains("watermark");var a;r.slot.addService(googletag.pubads()).setTargeting("pos",e.dfpPos||e.pos).setCollapseEmptyDiv(o,o&&function(e){const t="billboard"===e&&"home"===(n.g.PageCriteria.channel||"").slice(-4);return!g.includes(e)&&!t}(e.pos)),e.targeting&&l(e.targeting,((e,t)=>{r.slot.setTargeting(t,e)})),e.custom&&e.custom.length&&(a=r.slot,e.custom,l((function(e){Object.keys(e).forEach((function(t){a.setTargeting(t,e[t])}))}))),"number"==typeof window.orientation&&r.slot.setTargeting("orientation",MobileUtils.isLandscape()?"landscape":"portrait"),MobileUtils.isMobile()&&r.slot.setTargeting("lat",PageCriteria.latitude||"").setTargeting("lon",PageCriteria.longitude||""),p(`setting targeting for pos: ${e.pos}`,t),function(e,t){t.forEach((function(t){t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.setTargeting(n,t[n]+"")}))}))}(r.slot,t)})),e}u.on("api message","metadata",(e=>{p("metadata api call:",e);const{ico:t,...n}=e;t&&(n.referrer=t),u.emit("set page level targeting",n)})),u.on({message:"prepare to refresh ads",sync:!0},(e=>{const t=googletag.pubads().getSlots().reduce(((e,t)=>{const n=t.getTargeting("pos")[0];return e[n]=e[n]||t,e}),{});e.map((e=>({pos:e,slot:t[e]}))).forEach((e=>{let{pos:t,slot:n}=e;n?n.clearTargeting?n.clearTargeting():console.warn("-----\x3e NO slot.clearTargeting when refreshing ads",t):console.warn("-----\x3e NO SLOT to clear targeting when refreshing ads",t)}))})),u.on("slot ready for ad",((e,t)=>{!function(e,t){e.parentId=e.parentId||e.id,e.slots=e.slots||[],e.slots.forEach((function(t){t.parentId=t.parentId||t.id||e.parentId})),y((function(){!function(e){const t=(0,o.get)(e.pos)||e;t&&t.slots&&t.slots.length?e.slots=t.slots:_(e)}(e),v(e,t)})),y((function(){e.slots.forEach((t=>{u.emit("request slot",{pos:e.pos,slotType:t.type,type:e.type,parentId:t.parentId,adUnit:e.adUnit,slot:t.slot})}))}))}(e,t)}));const y=e=>googletag.cmd.push(e);u.on("set slot state",((e,t)=>{const n=f[e];n?n.molAd.state=t:h[e]=t})),u.on("request slot",(e=>{"gptSlot"===e.slotType&&(f[e.pos]=e.slot),e.slot.molAd={pos:e.pos,type:e.type,slotType:e.slotType,parentId:e.parentId,adUnit:e.adUnit,state:h[e.pos]},delete h[e.pos],u.invoke("googletag.display",e.parentId,e.slot),u.emit("ad requested",e.pos)})),u.on("slot ready to refresh",(function(e){e.forEach((e=>v(e.ad,e.tags))),T(e.map((e=>e.ad)))})),u.on("destroy slot",(e=>{const t=(0,o.get)(e);t?.slots?.length&&(googletag.destroySlots(t.slots.map((e=>e.slot))),delete t.slots)}));const b={gpt:function(e){const t=(0,a.CA)(e),n=e.sizeMapping,r=e.id,i=e.adUnit;p("define slot for",e.pos,{sizes:t,sizeMapping:n,adUnit:i,id:r});const o=googletag.defineSlot(i,t,r);if(!o)throw new k(e);e.sizeMapping&&function(e,t){const n=t.reduce(((e,t)=>{let[n,r]=t;return e.addSize(n,r)}),googletag.sizeMapping());e.defineSizeMapping(n.build())}(o,e.sizeMapping),e.slots.push({type:"gptSlot",slot:o,parentId:e.id}),u.emit("slot created",e,o)},gptOOP:function(e){const t=e.slotTypes.includes("gpt")?function(e){const t=e.parentId+"-oop";if(document.getElementById(t))return t;const n=document.getElementById(e.parentId),r=document.createElement("div");return r.id=t,n?n.parentNode.insertBefore(r,n.nextSibling):c((function(){document.body.appendChild(r)})),t}(e):e.parentId,n=(0,a.CA)(e),r=e.sizeMapping,i=e.adUnit;p("define oop slot for",e.pos,{sizes:n,sizeMapping:r,adUnit:i,id:t});const o=googletag.defineOutOfPageSlot(i,t);if(!o)throw new k(e);e.slots.push({type:"oopGptSlot",slot:o,parentId:t})}};function _(e){return e.adUnit=e.adUnit||(0,i.A)(e.pos),e.slots=e.slots||[],p(`${e.pos}: creating slots using slotTypes definition`),e.slotTypes.forEach((t=>{const n=b[t];n&&n(e)})),u.emit("update description",e.pos,e),e.slots.length&&v(e,[]),e}const w=e=>{let{slot:{molAd:{pos:t,parentId:n}}}=e;return n&&"string"==typeof n&&n.includes("-oop")?`${t}-oop`:t};function S(e){m.has(e)||y((function(){const t=(0,o.get)(e);t&&!t.gptSlot&&!t.oopGptSlot&&t.earlyBidding&&_(t)}))}function T(e){const t=e.map((function(e){return I(e.pos)}));u.invoke("googletag.pubads.refresh",t)}function I(e){return f[e]}u.on("slots initialized",(e=>{var t;t=e,y((function(){const e=googletag.pubads();e.set("page_url",location.hostname+location.pathname).setTargeting("article",adArticleId).setTargeting("environment",adEnvironment).setTargeting("country",PageCriteria.geo.toLowerCase()).addEventListener("slotRequested",(e=>e.slot.molAd&&u.emit("dfp slot requested",w(e),e))).addEventListener("slotRenderEnded",(e=>e.slot.molAd&&u.emit("ad rendered",w(e),e))).addEventListener("slotOnload",(e=>e.slot.molAd&&u.emit("ad loaded",e,w(e)))).addEventListener("impressionViewable",(e=>e.slot.molAd&&u.emit("ad viewable",w(e),e))).addEventListener("slotVisibilityChanged",(e=>e.slot.molAd&&u.emit("slot visibility changed",w(e),e))).addEventListener("slotResponseReceived",(e=>e.slot.molAd&&u.emit("slot response received",w(e),e))).setCentering(PageCriteria.isMobile&&!PageCriteria.isTablet),s.fX.testmode&&e.setTargeting("testmode",s.fX.testmode),u.emit("gpt initialized",googletag)})),t.forEach(S),y((function(){googletag.pubads().enableAsyncRendering(),googletag.enableServices()}))})),u.on("gpt refreshAdvert",(e=>{!function(e){const t=I(e);t&&(t.setTargeting("refresh","true"),u.invoke("googletag.pubads.refresh",[t]))}(e)})),u.on("gpt refreshAdverts",(e=>{T(e)}));class k extends Error{constructor(e){super(`Could not create a slot. googletag.defineSlot returned null. Probably because it has already been defined. Pos: ${e.pos}. ID: ${e.id}`)}}},7830:module=>{const omit=function(e,t){const n={};if(t=t||[],"object"==typeof e)for(const r in e)e.hasOwnProperty(r)&&-1===t.indexOf(r)&&(n[r]=DM.molFeMiniLodash.clone(e[r]));return n},stringify=function(e){return jsonStringify(omit(e,["slots"]))};var jsonStringify=JSON&&"function"==typeof JSON.stringify?JSON.stringify:function(e){switch(typeof e){case"string":return'"'+e.replace(/("|\\)/g,"\\$1")+'"';case"boolean":case"number":return e.toString();case"object":if("[object Array]"===Object.prototype.toString.call(e))return"["+e.map(stringify).join(",")+"]";if(e)return"{"+Object.keys(e).map((function(t){return stringify(t)+":"+stringify(e[t])})).join(",")+"}";case"undefined":case"function":return"null"}};const parse=JSON&&"function"==typeof JSON.parse?JSON.parse:function(value){return eval("data="+value)};module.exports={stringify,parse}},7892:(e,t,n)=>{const r=n(5517),i=function(e,t){this.eventsMap={},this.eventName=e,this.getDomCallback=t,this.domElement={};const n=this;DM.later("DOM_READY",(function(){s.call(n)}))};function o(e){const t=this.eventsMap[e];this.domElement[e]=this.getDomCallback(e),null!==this.domElement[e]&&this.on(this.domElement[e],this.eventName,(function(e){e.stopPropagation();const n=MobileUtils.isLandscape()?"landscape":"portrait";t.call(this,n)}))}function a(e){r.getElementById(e)?e in this.eventsMap&&o.call(this,e):delete this.eventsMap[e]}function s(){for(const e in this.eventsMap)a.call(this,e)}i.on=function(e,t,n){e.addEventListener(t,n)},i.fireEvent=document.createEvent?function(e,t){const n=e.ownerDocument.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}:function(e,t){const n=e.ownerDocument.createEventObject();n.eventType=t,e.fireEvent("on"+n.eventType,n)},i.prototype={constructor:i,registerEvent:function(e,t){this.eventsMap[e]=t,a.call(this,e)},getEvent:function(e){return this.eventsMap[e]},on:i.on,fireEvent:i.fireEvent},e.exports=i},6852:(e,t,n)=>{const r=n(7892),i=n(5517),o="data-impression-url",a="data-ted-tracking",s=new r("onImpression",(function(e){return function(e){return i.getElementById(e)}(e)}));e.exports={DATA_IMPRESSION_URL:o,onImpression:function(){s.registerEvent.apply(s,arguments)},registerImpression:function(e,t){const n=Array.prototype.filter.call(i.getAdContainer(e).getElementsByTagName("div"),(function(e){return e.getAttribute(o)}));n.length&&(function(e){const t=e.getAttribute(o);(new Image).src=t,e.getAttribute(a)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"}))}(n[0]),function(e){setTimeout((function(){!function(){s.fireEvent.apply(s,arguments)}(e,"onImpression"),e.getAttribute(a)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"}))}),0)}(n[0]),t.call(this,e))}}},4610:(e,t,n)=>{"use strict";n.d(t,{Ai:()=>i,FF:()=>u,HV:()=>o,Z:()=>c,k4:()=>d,sb:()=>s,su:()=>p,wg:()=>a,x1:()=>r,yU:()=>l});const r=(e,t,n)=>{const r=new Array(n.length);let i=0;for(let o=0,{length:a}=n;o<a;o++){const a=n[o];e(a)&&(r[i++]=t(a))}return r.length=i,r},i=(e,t)=>{const n=t.indexOf(e);return-1===n?t:[...t.slice(0,n),...t.slice(n+1)]},o=e=>e[e.length-1],a=e=>void 0===e?[]:Array.isArray(e)?e:[e],s=e=>{const t=new Set(e);return Array.from(t)},d=e=>{let t=e.length;const n=[...e];for(;t;){const e=Math.floor(Math.random()*t--),r=n[t];n[t]=n[e],n[e]=r}return n};function l(e,t){return e.map(((e,n)=>[e,t[n]]))}function c(e,t){const n=[...e];return n.sort(((e,n)=>e[t]-n[t])),n}function u(e,t){const n=new Set(t);return e.filter((e=>!n.has(e)))}const p=e=>e.find((e=>void 0!==e))},6642:(e,t,n)=>{"use strict";n.d(t,{G0:()=>h,Mi:()=>c,QZ:()=>o,nz:()=>a,s5:()=>l,tN:()=>d,v6:()=>p,wR:()=>i});class r extends Error{constructor(e){super(`Exceeded ${e}`)}}const i=e=>new Promise((t=>setTimeout(t,e))),o=e=>new Promise((t=>0===e?t(u(void 0,10)):setTimeout(t,e))),a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r(e);throw await o(e),t},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r(e);throw await i(e),t},d=(e,t,n)=>Promise.race([t,s(e,n)]),l=async(e,t)=>{const n=[],r=[];return await Promise.race([i(e),Promise.all(t.map((e=>e.then((e=>n.push(e))).catch((e=>r.push(e))))))]),{errors:r,results:n}};function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;const o=Date.now(),a=s=>Promise.resolve(e()).then((e=>{if(e)return e;if(Date.now()-o<n){const e=Math.min(1e3,2**s/2);return i(t+e).then((()=>a(s+1)))}throw new r(n)}));return a(0)}const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((n=>{n(t?u(e,t-1):e)}))};function p(){let e,t,n=!1;return{promise:new Promise(((n,r)=>{e=r,t=n})),reject(t){n||(n=!0,e(t))},resolve(e){n||(n=!0,t(e))}}}async function h(e,t,n){let r=e;return await Promise.all(n.map((e=>e.then((e=>{r=t(r,e)}))))),r}},7929:(e,t,n)=>{"use strict";n.d(t,{EY:()=>d,MR:()=>l,jG:()=>h,q2:()=>c});var r=n(4610);function i(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,s(t,e),n),n}function a(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,s(t,e))}function s(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}const d=e=>{if("function"==typeof Event)return new e.constructor(e.type,e);{const t=document.createEvent("Event");return t.initEvent(e.type,e.bubbles,e.cancelable),t}};function l(e,t,n){return e.on(t,n),()=>e.off(t,n)}function c(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}var u=new WeakMap,p=new WeakMap;class h{constructor(){i(this,u,{writable:!0,value:[]}),i(this,p,{writable:!0,value:[]})}on(e,t,n){return this.add(l(e,t,n))}one(e,t,n){return this.add(function(e,t,n){return e.one(t,n),()=>e.off(t,n)}(e,t,n))}onDispose(e){a(this,p).push(e)}addEventListener(e,t,n,r){return this.add(c(e,t,n,r))}add(e){return a(this,u).push((()=>{this.remove(e),e()})),e}remove(e){o(this,u,(0,r.Ai)(e,a(this,u)))}onBrokerEvent(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=e.on(t,...r);return this.add((()=>o.cancel()))}onceBrokerEvent(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=e.once(t,...r);return this.add((()=>o.cancel()))}dispose(){try{for(const e of a(this,u))e();for(const e of a(this,p))e()}catch(e){console.error(e)}finally{o(this,u,[]),o(this,p,[])}}}},1359:(e,t,n)=>{"use strict";function r(e,t){let n,r=0,i=!1;const o=a=>{if(i){r=a,clearTimeout(n),i=!1;const s=!n;n=setTimeout(o,t),e(s)}else n=void 0};return()=>{i=!0;const e=Date.now&&Date.now()||(new Date).getTime();(!n||e-r>=t)&&o(e)}}function i(e){let t=!1;return function(){if(!t){t=!0;try{return e(...arguments)}finally{t=!1}}}}n.d(t,{$G:()=>d,Ai:()=>r,Ed:()=>l,Gr:()=>o,iH:()=>c,l$:()=>s,mz:()=>i,sg:()=>a});const o=e=>{let t,n=!1;return function(){return n||(n=!0,t=e(...arguments)),t}},a=(e,t)=>{let n,r;const i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r=o,n&&clearTimeout(n),n=setTimeout((()=>{n=void 0,e(...r),r=void 0}),t)};return i.callNow=function(){n&&(clearTimeout(n),n=void 0);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e(...i||r||[]),r=void 0},i};function s(e){let t=0;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e(++t,...r)}}function d(e){let t=!0;return function(){if(!t)return e(...arguments);t=!1}}function l(){let{min:e=1,max:t=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){let n=1;for(;;)yield Math.min(t,Math.max(e,Math.round(n++**2/10)))}()}function c(e,t){return function(){const n=t(...arguments);return e(n),n}}},7759:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>_,I$:()=>m,Nn:()=>b,QY:()=>u,eC:()=>c});var r=n(6642),i=n(4610),o=n(9667),a=n(4531),s=n.n(a),d=n(7314);function l(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}class c{constructor(e,t){var n,r,i,o=this;n=this,i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.bus.intercept(o,e,...n)},(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(r="intercept"))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.bus=e,this.id=t,this.options={}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.emit(this,e,...n)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.on(this,e,...n)}onInvoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.on(this,e,...n)}once(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.pop();let o=!1;const a=[...n,function(){o||(s.cancel(),o=!0,i(...arguments))}],s=this.on(e,...a);return s}until(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t=>{const r=[...n,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(n)}];this.once(e,...r)}))}untilInvoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.until(e,...n)}register(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.register(this,e,...n)}hasSubscriber(e){return this.bus.hasSubscriber(e)}interceptInvoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.intercept(this,e,...n)}interceptOnce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.interceptOnce(this,e,...n)}interceptInvokeOnce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.interceptOnce(this,e,...n)}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.invoke(this,e,...n)}invokeAll(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.bus.invokeAll(this,e,...n)}invokeAllWithin(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.bus.invokeAll(this,{message:[e,...r],timeout:t})}registerStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerStream(this,...t)}registerUnboundedStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerUnboundedStream(this,...t)}openStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.openStream(this,...t)}createReadObjectStream(){return this.bus.createReadObjectStream()}createTransformObjectStream(e){return this.bus.createTransformObjectStream(e)}collectStreamAsPromise(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.collectStreamAsPromise(this,...t)}invokeChainMutable(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.invokeChainMutable(this,...t)}}class u{constructor(){this.subscriptions=[],this.interceptors=[],this.queued=[],this.started=!1,this.dispatcher=e=>e(),this.firedMessages=new Set,this.system=this.broker("MessageBus"),this.emitImmediately=this.emitImmediately.bind(this),this.showUncaughtErrors=!0,this.globalTimeoutOverride=void 0,this.logCall=()=>{}}queuePublish(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];const{promise:a,resolve:s}=(0,r.v6)();return this.queued.push((()=>s(e(t,...i)))),a}queueStream(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const[a,s]=o.Kv();return this.queued.push((()=>{e(t,...r).pipe(s)})),a}broker(e){return new c(this,e)}emit(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.started?this.emitWithInterceptors(e,t.toString(),...r):this.queuePublish(this.emitWithInterceptors.bind(this),e,t,...r)}doesMessageMatch(e,t){let n=0;for(;n<e.length;n++){const r=e[n],i=t[n];if(r instanceof f){if(!r.matches(i))return!1}else if(r!==i)return!1}return n}emitWithInterceptors(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.callInterceptors(e,"emit",this.emitImmediately,...n)}callInterceptors(e,t,n){for(var r=this,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return new Promise(((i,a)=>{try{if(this.interceptors.length){const a=this.interceptors.filter((e=>!1!==this.doesMessageMatch(e.msg,o)));let s=!1;const d=function(){const i=a.shift();for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return o=c.length>0?c:o,i?(s=!0,r.logCall(e,t,i.broker,o,!0),r.callInterceptor(i.callback,o,d,i.broker)):(s&&r.logCall(e,t,void 0,o,!0,!0),n(e,t,o))};i(d())}else i(n(e,t,o))}catch(e){a(e)}}))}callInterceptor(e,t,n,r){return e(t,n)}emitImmediately(e,t,n){return Promise.all(this.subscriptions.reduce(((r,i)=>{const o=this.doesMessageMatch(i.msg,n);return!1!==o&&r.push(this.callSubscriber(e,t,i,o,n)),r}),[]))}callSubscriber(e,t,n,r,i){const o=i.slice(r);return new Promise(((r,a)=>{const s=()=>{try{this.logCall(e,t,n.broker,i),r(n.callback.apply(n.broker,o))}catch(e){"error"===i[0]?(console.error("Exception thrown while handling error for",i,e),a(e)):(this.system.emit("error",...i,e),a(e))}};n.sync?s():this.dispatcher(s)}))}addSubscription(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t[t.length-1],a=t.splice(0,t.length-1);return this.subscribe(e,a,o,n,r,i)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.addSubscription(e,n,!1)}register(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.addSubscription(e,[t,...r],!0)}getOptions(e){let t=e&&e.options||{};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=r[0];return"object"==typeof o?t={...t,...o}:t.message=r,Array.isArray(t.message)||(t.message=[t.message]),t.timeout=this.localTimeout(t.timeout),t}getSubscriptionsInterestedIn(e){return this.subscriptions.map((t=>({subscription:t,matchCount:this.doesMessageMatch(t.msg,e.message)}))).filter((e=>!1!==e.matchCount))}callFilteredSubscription(e,t,n,r){let{message:i,map:o}=n,{matchCount:a,subscription:s}=r;const d=this.callSubscriber(e,t,s,a,i);return o&&s.expectReturn?o(d,s):d}callFilteredSubscriptions(e,t,n,r){return r.reduce(((r,i)=>{const o=this.callFilteredSubscription(e,t,n,i);return i.subscription.expectReturn&&r.push(o),r}),[])}async invoke(e,t){var n=this;const i=async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];const a=n.getOptions(e,...i),[s,...d]=n.getSubscriptionsInterestedIn(a).filter((e=>e.subscription.expectReturn));if(!s)return Promise.reject(new h(i));d.length>0&&console.warn("Total of",d.length+1,"endpoints registered for message",i);const l=n.callInterceptors(e,"invoke",((e,t,r)=>n.callFilteredSubscription(e,t,{...a,message:r},s)),...a.message);return void 0!==a.timeout?Promise.race([l,(0,r.nz)(a.timeout)]):l};for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return this.started?i(e,t,...a):this.queuePublish(i.bind(this),e,t,...a)}localTimeout(e){return this.globalTimeoutOverride??e}async invokeAll(e,t){var n=this;const i=async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];const a=n.getOptions(e,...i),s=await n.callInterceptors(e,"invokeAll",((e,t,r)=>{const i={...a,message:r},o=n.getSubscriptionsInterestedIn(i);a.controlHandler&&a.controlHandler({type:"interested endpoint",endpoints:o.reduce(((e,t)=>{let{subscription:{broker:{id:n},expectReturn:r,unbounded:i}}=t;return r&&!i?[...e,n]:e}),[])});const s=n.callFilteredSubscriptions(e,t,i,o);return a.subscriptionsCalledCallback&&a.subscriptionsCalledCallback(o),s}),...a.message);let d=s?s.filter((e=>e)):[];const l=[];d=d.map((e=>e.then((e=>{l.push(e)}),(e=>{if(a.catch)try{a.catch(e)}catch(e){n.system.emit("error",e)}else n.system.emit("error",e)}))));let c=Promise.all(d).then((e=>e.filter((e=>e))));return void 0!==a.timeout&&(c=Promise.race([c,(0,r.QZ)(a.timeout)])),c.then((()=>l))};for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return this.started?i(e,t,...a):this.queuePublish(i.bind(this),e,t,...a)}subscribe(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t[0],d="object"==typeof s?(0,i.wg)(s.message):t,l="object"==typeof s&&!!s.sync;if(n&&"function"!=typeof n)throw new Error(`Callback has to be a function, but a "${typeof n}" was passed`);const c={broker:e,msg:d,callback:n,sync:l,expectReturn:r,isStream:o,unbounded:a,cancel:()=>{this.subscriptions=(0,i.Ai)(c,this.subscriptions)}};return this.subscriptions.push(c),c}hasSubscriber(e){return-1!==this.subscriptions.findIndex((t=>{let{msg:[n]}=t;return n===e}))}interceptOnce(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=r.pop();let a=!1;const s=[...r,function(){a||(d(),a=!0,o(...arguments))}],d=this.intercept(e,t,...s);return d}intercept(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];const a=[t,...r];let s=!1;const d=a.pop(),l={msg:a,callback:function(){if(!s)return d(...arguments)},broker:e};return this.interceptors.push(l),()=>{s=!0,this.interceptors=(0,i.Ai)(l,this.interceptors)}}start(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(this.system.on("error",(function(){e.showUncaughtErrors&&console.error(...arguments)})),this.started=!0;this.queued.length;)this.queued.shift()?.();this.system.emit("system ready"),t&&n.g.DM?.later?.go?.("mol-adverts")}setDispatcher(e){this.dispatcher=e}registerStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.addSubscription(e,n,!0,!0)}registerUnboundedStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.addSubscription(e,n,!0,!0,!0)}openStream(e){var t=this;const n=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];const d=t.getOptions(e,...i),l=o.uh();let c=!1,u=0;const p=()=>{c||0!=--u||(c=!0,l.push(null))};return void 0!==d.timeout&&((0,r.QZ)(d.timeout).then((()=>{!c&&l.push(null),c=!0})),delete d.timeout),t.invokeAll(e,{...d,map:(e,n)=>{let{broker:r,unbounded:a}=n;return a||u++,e.then((e=>{const t=e instanceof s().Readable?e:o.ci(e?[e]:[]);t.on("data",(e=>!c&&l.push(e))),a||t.on("end",(()=>{d.controlHandler&&d.controlHandler({type:"stream done",endpoint:r.id}),p()}))}),(e=>{d.emitErrors?l.emit("error",e):t.system.emit("error",...i,e),a||p()}))},subscriptionsCalledCallback:()=>{c||0!==u||(c=!0,l.push(null))}}),l};for(var i=arguments.length,a=new Array(i>1?i-1:0),d=1;d<i;d++)a[d-1]=arguments[d];return this.started?n(e,...a):this.queueStream(n.bind(this),e,...a)}createReadObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.uh(e)}createTransformObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.M7(e)}collectStreamAsPromise(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.gV(this.openStream(e,...n))}invokeChainMutable(e){var t=this;const n=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a=t.getOptions(e,...i),s=t.getSubscriptionsInterestedIn(a).filter((e=>e.subscription.expectReturn)),d=t.callInterceptors(e,"invokeChainMutable",((e,n,r)=>new Promise((o=>{const d=[...r],l=d.pop();o(s.reduce((async(r,o)=>{const s=await r,{matchCount:l,subscription:c}=o;return t.callSubscriber(e,n,c,l,[...d,s]).catch((e=>(a.onError&&a.onError(e,i),t.system.emit("error",...i,e),s)))}),Promise.resolve(l)))}))),...a.message);return void 0!==a.timeout?Promise.race([d,(0,r.nz)(a.timeout)]):d};for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return this.started?n(e,...o):this.queuePublish(n.bind(this),e,...o)}}class p extends Error{}class h extends p{constructor(e){super("No end point registered: "+JSON.stringify(e)),this.endpoint=e}}class f{matches(e){}}class g extends f{constructor(e){super(e),this.filter=e}matches(e){return function e(t,n){return null!=n&&"object"==typeof n&&Object.entries(t).every((t=>{let[r,i]=t;return"object"==typeof i&&null!==i?e(i,n[r]):n[r]===i}))}(this.filter,e)}}function m(e){return new g(e)}var v=new WeakMap;class y extends f{constructor(e){var t,n,r;super(),r={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,n=v),n.set(t,r),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,l(t,e),n)}(this,v,e)}matches(e){return(0,d.Gv)(e)&&(this,t=v,function(e,t){return t.get?t.get.call(e):t.value}(this,l(t,this))).every((t=>t in e));var t}}function b(e){return new y(e)}const _=new u},9180:(e,t,n)=>{"use strict";function r(){const e=document.cookie.indexOf("x-loc=");if(-1===e)return;const t=document.cookie.indexOf(";",e);if(-1===t)return;const n=document.cookie.substring(e+6,t);return n.length>0&&"none"!==n.toLowerCase()?n:void 0}n.d(t,{$:()=>r})},7314:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>y,Gv:()=>h,I6:()=>u,Im:()=>s,NC:()=>g,Qf:()=>o,Sm:()=>m,Tj:()=>f,Up:()=>i,_M:()=>l,cJ:()=>a,jO:()=>b,mQ:()=>v,ns:()=>d,x5:()=>p});var r=n(4610);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.reduce(((t,r)=>(n.ignoreUndefined&&!(r in e)||(t[r]=e[r]),t)),{})}function o(e,t){return Object.entries(t).reduce(((t,n)=>{let[r,i]=n;return t[r]=e[i],t}),{})}function a(e,t){const n={...e};for(const e of(0,r.wg)(t))delete n[e];return n}function s(e){for(const t in e)return!1;return!0}const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g;for(const n of e)void 0===t[n]&&(t[n]={}),t=t[n];return t},l=(e,t)=>n=>{if(t&&(0,r.FF)(Object.keys(n),Object.keys(e)).length)return!1;for(const t in e){const r=e[t];if("function"==typeof r&&!r(n[t]))return!1}return!0};function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(const n in e)if(c(e,n)&&t(e[n],n))return e[n]}function p(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];h(r)?t[n]=p(r):void 0!==r&&(t[n]=r)})),t}function h(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function f(e,t){const n={};for(const r in e)c(e,r)&&(n[r]=t(e[r],r));return n}function g(e){return e instanceof HTMLElement||e instanceof WeakMap||e instanceof Function||e instanceof Error||h(e)&&"function"==typeof e.then}function m(e){let t=0;const n="___MARK_",r={};return JSON.parse(JSON.stringify(e,(function(e,i){if(g(i)){const e=t++;return r[e]=i,`${n}${e}`}return i})),(function(e,t){return"string"==typeof t&&t.startsWith(n)?r[t.substr(8)]:t}))}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e){const t=new Date;return t.setMonth(t.getMonth()+e),t}function b(e){return Object.entries(e)}},9231:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(4610);function i(e,t,n){o(e,t),t.set(e,n)}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,d(t,e))}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,d(t,e),n),n}function d(e,t){return e.get(l(e,t))}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var c=new WeakMap,u=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakSet;class m{constructor(e,t,n){var r;o(this,r=g),r.add(this),i(this,c,{writable:!0,value:!1}),i(this,u,{writable:!0,value:[]}),i(this,p,{writable:!0,value:void 0}),i(this,h,{writable:!0,value:void 0}),i(this,f,{writable:!0,value:!1}),s(this,p,n),s(this,h,e),this.state=Object.freeze(t)}deinit(){this.dispatch({type:"__DEINIT__"}),s(this,f,!1)}init(){s(this,f,!0),this.dispatch({type:"__INIT__"})}dispatch(e){if(a(this,p).call(this,e,"dispatch"),!a(this,f))return void a(this,p).warn("Cannot dispatch actions before store has been initiated.");if(a(this,c))throw new Error("You shouldnt dispatch actions from a reducer");s(this,c,!0);const t=a(this,h).call(this,e,this.state);var n,r;s(this,c,!1),t===this.state?a(this,p).call(this,e,"NO_CHANGE"):(this.state=Object.freeze(t),a(this,p).call(this,e,this.state),(this,n=g,r=v,l(n,this),r).call(this,e))}subscribe(e){return a(this,u).push(e),setTimeout((()=>e({type:"__INIT__"},this.state))),()=>{s(this,u,(0,r.Ai)(e,a(this,u)))}}}function v(e){for(const t of a(this,u))t(e,this.state)}},9667:(e,t,n)=>{"use strict";n.d(t,{Kv:()=>a,M7:()=>l,T0:()=>f,Tj:()=>p,ci:()=>c,gV:()=>o,h1:()=>u,pb:()=>h,uh:()=>d,vC:()=>s});var r=n(4531),i=n.n(r);const o=e=>new Promise(((t,n)=>{const r=[];e.on("data",(e=>r.push(e))),e.on("end",(()=>t(r))),e.on("error",(e=>n(e)))})),a=()=>{const e=new(i().Readable)({objectMode:!0,read(){}}),t=new(i().Writable)({objectMode:!0,write(t,n,r){e.push(t),r()},final(t){e.push(null),t()}});return[e,t]},s=(e,t)=>d({start(){e.on("data",(e=>this.push(e))).on("end",(()=>{this.push(null),t()})).on("error",(e=>{console.log("------\x3e STREAM Error",e),this.destroy(e),t(e)}))}}),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new(i().Readable)({objectMode:!0,read(){}});return e.start&&e.start.apply(t),t},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(i().Transform)({objectMode:!0,...e})},c=e=>{let t=0;return new(i().Readable)({objectMode:!0,read(){e.length&&this.push(e[t++]),t===e.length&&this.push(null)}})},u=e=>{const t=d();let n=e.length;return n?(e.forEach((e=>{const r=e=>t.push(e),i=()=>{0==--n&&t.push(null)},o=e=>t.emit("error",e);e.on("data",r).on("end",i).on("error",o);const a=(e.off||e.removeListener).bind(e);t.on("close",(()=>{a("data",r),a("end",i),a("error",o)}))})),t):(t.push(null),t)},p=(e,t)=>d({start(){e.on("data",(e=>this.push(t(e)))).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),h=(e,t)=>d({start(){e.on("data",(e=>{t(e)&&this.push(e)})).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),f=(e,t)=>{const n=d(),r=e=>n.push(e);t.on("data",r);let i=!1;const o=(t.off||t.removeListener).bind(t);e.on("end",(()=>{i||(o("data",r),i=!0),n.push(null)}));const a=u([e,n]);return a.on("close",(()=>{i||(o("data",r),i=!0)})),a}},7620:(e,t,n)=>{"use strict";function r(e){const t=i(new URL(e).search.substring(1));return t?{specific:i(t.prev_scp),cust_params:i(t.cust_params)}:{}}function i(e){return e&&Object.fromEntries(e.split("&").map((e=>e.split("=").map(decodeURIComponent))))||void 0}function o(e,t){const n=e.startsWith("?"),r=e.substr(n?1:0).split("&").filter((e=>e.split("=")[0]!==t)).join("&");return r?`${n?"?":""}${r}`:""}function a(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}n.d(t,{BU:()=>r,ks:()=>o,tW:()=>a})},1970:(e,t,n)=>{"use strict";n.d(t,{CA:()=>r,O$:()=>s,nq:()=>i,uj:()=>a,w1:()=>o,y:()=>d});const r=e=>e.size||DM.molFeMiniLodash.map((e.type||"").split(","),(e=>DM.molFeMiniLodash.map(e.split("x"),Number)));function i(e,t,n){const r=e=>Array.isArray(e)&&2===e.length;if(!((i=e)&&Array.isArray(i)&&i.length&&i.every((e=>e&&r(e)&&r(e[0])&&Array.isArray(e[1])&&e[1].every(r)))))return t;var i;const o=(e=>e.sort(((e,t)=>t[0][0]-e[0][0])))([...e]),[a,s]=n,d=o.find((e=>{let[[t,n]]=e;return a>=t&&s>=n}));return d&&d[1]||t}function o(e){return t=e,Array.isArray(t)&&Array.isArray(t[0])?e.reduce(((e,t)=>{let[n,r]=e;return Array.isArray(t)?[Math.max(n,t[0]),Math.max(r,t[1])]:[n,r]}),[0,0]):e;var t}function a(e){return e.map((e=>`${e[0]}x${e[1]}`)).join("|")}function s(e,t){return t.reduce(((t,n)=>{const r=new RegExp(n.replace(/\*/g,".*"));return t.push(...Object.keys(e).filter((e=>r.exec(e)))),t}),[])}function d(e){return e&&{creativeId:e.creativeId||e.sourceAgnosticCreativeId,lineItemId:e.lineItemId||e.sourceAgnosticLineItemId,advertiserId:e.advertiser,campaignId:e.campaignId,companyId:e.companyIds}}},395:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,l:()=>d});var r=n(5446),i=n(7200);const o="/5765/dm.video/dm_video_home/preroll",a=(0,r.Jt)("adUnit.excludeSponsoredCondition",!1);function s(e,t){const n=(0,r.Jt)("dfpAccountCode",5765),i=function(e,t,n){if(e)try{return e.replace("{{networkCode}}",t.toString()).replace("{{pos}}",n)}catch(e){console.error()}}((0,r.Jt)("gpt.adUnit"),n,e);return i||l(e,t)}function d(e,t){return l(e,t)}function l(e,t){const s=(0,r.Jt)("dfpAccountCode",5765),d=n.g.dartSiteId,l=n.g.PageCriteria.sponsored&&!a?"dm_dmnative":"money"===n.g.adAreaId?`${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adSubareaId}${n.g.adPageType}`:`${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adAreaId}${n.g.adPageType}`;if(["native_fff_accessorise","native_fff_overlay_accessorise"].some((t=>e===t)))return`/${s}/dailymail.uk/dm_native/${e}`;const{autoplay:c=!1,fbiaEmbed:u=!1,flyaway:p=!1,isMobile:h=!1,offset:f=0,original:g=!1,syndicationService:m=!1,videoAdServerUrl:v="https://pubads.g.doubleclick.net/gampad/ads?iu=%2F5765%2Fdm.video%2Fdm_video_home/preroll"}=t||{},y=(0,r.Jt)("videoDescription.verticalvideo.adUnit");switch(e){case"video":return(0,i.Y)(n.g.adAreaId?`/${s}/dm.video/dm_video_${n.g.adAreaId}/${0===f?"preroll":"midroll"}`:function(e){try{return new URL(e).searchParams.get("iu")||o}catch(e){console.error(e)}return o}(v),{autoplay:c,fbiaEmbed:u,flyaway:p,isMobile:h,original:g,syndicationService:m});case"jwplayer":return`/${s}/dm.chromelessvideo/${(0,r.Jt)("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros")}/${(0,r.Jt)("players.chromeless.dmplayer.v3.adRoll",[]).find((e=>e.offset===f))?.pos||"preroll"}`;case"verticalvideo":return y?`/${s}/${y}`:`/${s}/${n.g.adAreaSiteId}.${e}/${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adSubareaId}`;case"hero":return`/${s}/${(0,r.Jt)("videoDescription.hero.adUnit","dm.video.hero")}`;default:return`/${s}/${d}/${l}/${e}`}}},7838:(e,t,n)=>{"use strict";n.d(t,{$M:()=>y,$R:()=>S,G_:()=>v,MO:()=>u,N0:()=>w,O:()=>_,Qr:()=>f,Ri:()=>d,TV:()=>c,YC:()=>o,Yj:()=>p,Yw:()=>g,fX:()=>a,j1:()=>T,jy:()=>h,pr:()=>b,pz:()=>m});var r=n(7620);function i(e){return window["inner"+e]||document.documentElement["client"+e]||document.body["client"+e]}function o(){let{usePixelRatio:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e&&window.devicePixelRatio||1;return{width:i("Width")*t,height:i("Height")*t}}const a=(()=>{let e={};try{e=window.location.search.substr(1).split("&").reduce(((e,t)=>{let[n,r]=t.split("=");switch(n=decodeURIComponent(n),!0){case n.startsWith("!"):e[n.substr(1)]=!1;break;case n.endsWith("[]"):n=n.substr(0,n.length-2),e[n]=!r||decodeURIComponent(r).split(",");break;case n.endsWith("[0]"):n=n.substr(0,n.length-3),e[n]=!r||decodeURIComponent(r).split(",");break;case/\[[-+]\]$/.test(n):e[n]=[...e[n]||[],...(r||"").split(",").map(decodeURIComponent)];break;default:e[n]=r?decodeURIComponent(r):"string"!=typeof r||r}return e}),{})}catch(t){console.error("ads",t),e={}}return e})(),s=/(%[0-9A-Z]{2})+/g,d=e=>{let t;const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length>1){const e=n.pop().split(";").shift();t='"'===e.charAt(0)?e.slice(1,-1):e,t=t.replace(s,decodeURIComponent)}return t},l=e=>{const t=new Date;switch(typeof e){case"undefined":return t.setMonth(t.getMonth()+1),t;case"number":return t.setDate(t.getDate()+e),t;case"string":return new Date(e);case"function":return l(e());case"object":if(e instanceof Date)return e;if(null===e)return l();default:throw new Error("Invalid expire time when setting cookie")}},c=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=arguments.length>4?arguments[4]:void 0,o=`${e}=${t};expires=${l(n).toUTCString()};path=${r}`;i&&(o+=`;domain=${i}`),document.cookie=o},u=(e,t)=>{const n=`${e}Expire`,r=l(d(n)).toUTCString();c(e,t,r),c(n,r,r)},p=e=>{c(e,"","Thu, 01 Jan 1970 00:00:01 GMT")};function h(){const e=/(Windows\s*[a-zA-Z]*)\s+([^;\s)]+)/i.exec(navigator.userAgent);return e&&"windows nt"===e[1].toLowerCase()&&parseFloat(e[2])>=6.4}const f="Microsoft Internet Explorer"===navigator.appName||!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv:11/)),g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),m=/(?:iPod|iPhone|iPad).*(?:OS)/i.test(navigator.userAgent),v=/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/.test(navigator.userAgent),y=/Firefox\/([0-9.]+)(?:\s|$)/.test(navigator.userAgent),b=/Edge\/([0-9._]+)/.test(navigator.userAgent);function _(){try{if(/iP(hone|od|ad)/.test(navigator.platform)){const e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}catch(e){console.error(e)}return[-1,-1,-1]}function w(e){const{origin:t,pathname:i,search:o}=n.g.location,a=`${t}${i}${(0,r.ks)(o,e)}`;window.history.pushState(null,"",a)}function S(e){const t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,o=window.pageXOffset||r.scrollLeft||n.scrollLeft,a=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,d=t.top+i-a,l=t.left+o-s;return{top:Math.round(d),left:Math.round(l)}}function T(){return n.g.performance?.getEntriesByType?.("navigation")?.[0]}},9860:(e,t,n)=>{"use strict";n.r(t);var r=n(1359),i=n(7838),o=n(7759),a=n(2257),s=n(8510),d=n.n(s);const l=o.Ay.broker("debug-output"),c=window.PageCriteria&&window.PageCriteria.pageViewId||(0,a.zE)();localStorage.getItem("mol.ads.debug")&&localStorage.removeItem("mol.ads.debug");const u=localStorage.getItem("dmg.ads.debug.label"),p=i.fX.adsDebugRemote||i.fX["ac.adsDebugRemote"]||n.g.adverts?.config?.adsDebugRemote||u,h=i.fX.adsBugReport||i.fX["ac.adsBugReport"]||n.g.adverts?.config?.adsBugReport||u,f="boolean"!=typeof p&&p;let g=[],m=0;const v=(0,r.sg)((()=>{l.emit("send to bidmax",{_:{topic:"debug"},type:"multi",pvid:c,label:f,eventId:m++,payload:g}),g=[]}),1e3),y=[];function b(e){y.push(e)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of y)try{const r=n(e,t);if(void 0!==r)return r}catch(e){console.error("Error in object replacer",e)}return function(e){if("string"==typeof e&&e.length>4048)return`[truncated ${e.length} bytes string: ${e.slice(0,100)}...]`;if(e instanceof Map){const t=Array.from(e,(e=>{let[t,n]=e;return[w(t),n]}));return Object.fromEntries(t)}if(e instanceof Set)return Array.from(e);if(e instanceof WeakMap||e instanceof WeakSet)return e.toString();if(e instanceof Error)return{type:"Error",message:e.message,stack:e.stack};if(e instanceof HTMLElement){const{id:n,src:r,classList:i}=e;return`HTMLElement[<${e.tagName.toLowerCase()} ${t={id:n,src:r,class:[...i].join(" ")},Object.entries(t).map((e=>{let[t,n]=e;return null==n||""===n?"":`${t}="${n}"`})).filter(Boolean).join(" ")}/>]`}var t;return function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}(e)?"[DOM Node]":void 0}(e)}function w(e){return"object"==typeof e?_(e):e}function S(e){try{return JSON.stringify(e,((e,t)=>_(t)||t))}catch(e){return"[error serializing value: "+e.message+"]"}}b(((e,t)=>{if("object"==typeof e&&null!==e){if(t.has(e))return"[circular reference]";t.add(e)}}));const T=(e,t)=>{g.push({type:e,timestamp:(new Date).toISOString(),payload:t}),g.length>=100?v.callNow():v()},I=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];T("log",{level:e,log:n.map(S).map((e=>{if(void 0===e)return e;if(e.length>1e4)return"[object too long: "+e.length+"]";try{return JSON.parse(e)}catch(t){k.error("Error parsing",e,t)}}))}),k[e](...n)},k={log:console.log,warn:console.warn,error:console.error,info:console.info};p&&(l.on("register remote debug object replacer",b),console.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return I("log",...t)},console.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return I("info",...t)},console.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return I("warn",...t)},console.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return I("error",...t)},window.onerror=function(e,t,n,r,i){return console.error("[UNCAUGHT]",{message:e,source:t,lineno:n,colno:r,error:i}),!1},window.addEventListener("unhandledrejection",(e=>{let{reason:t}=e;console.error("[PromiseRejectionUncaught]",{reason:t})})),l.on("send remote debug",T),l.on("system ready",(()=>{const{config:e}=n.g.adverts;T("config",{config:e})})),l.once("dom ready",(()=>{n.g.PageCriteria&&T("PageCriteria",n.g.PageCriteria),n.g.pagemeta&&T("pagemeta",n.g.pagemeta),l.invoke("get page level analytics").then((e=>T("bidmax",e)))}))),h&&l.once("dom ready",(()=>{const e=document.createElement("div");e.innerHTML=d()(),document.body.appendChild(e);const t=e.querySelector("#debugRemoteButtonText"),n=t.querySelector("textarea");t.querySelector("button").addEventListener("click",(e=>{e.preventDefault(),T("bugreport",{log:[n.value]}),console.info("bugreport",n.value),n.value="",t.style.display="none"})),u&&(window.leaveRemoteDebug.style.display="block",window.leaveRemoteDebug.addEventListener("click",(e=>{e.preventDefault(),localStorage.removeItem("dmg.ads.debug.label"),location.reload()})))}))},6964:(e,t,n)=>{"use strict";n.d(t,{h:()=>d});var r=n(7838),i=n(4610);const o=function(){let e=new Set;if(r.fX.adsDebug)e=new Set(((!0===r.fX.adsDebug?"all":r.fX.adsDebug)||"").toLowerCase().split(","));else if(localStorage.getItem("dmg.ads.debug.label"))e=new Set(["all"]);else{const t=r.fX["ac.adsDebug"]||n.g.adverts?.config?.adsDebug;"boolean"==typeof t?e=new Set(["all"]):Array.isArray(t)&&(e=new Set(t.map((e=>e.toLowerCase()))))}return e}(),a=o.has("all"),s=()=>{};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[`%c${e}`,l()],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=a||o.has(e.toLowerCase()),u=r?console.log.bind(console,...(0,i.wg)(t)):s;return u.debugName=e,u.label=t,u.enabled=r,u.log=p("log"),u.trace=p("trace"),u.debug=p("debug"),u.info=p("info"),u.warn=p("warn"),u.error=p("error",!0),u.table=r?function(){u("Table:"),console.table(...arguments)}:s,u.time=r?e=>console.time(c(e?[...t,e]:t).join(" / ")):s,u.timeEnd=r?e=>console.timeEnd(c(e?[...t,e]:t).join(" / ")):s,u.extend=r=>{const[o,...a]=(0,i.wg)(t),s=n+1;return d(e,[`${o} %c${r}`,...a,l(s)],s)},u;function p(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r)&&"function"==typeof console[e]?console[e].bind(console,...(0,i.wg)(t)):s}}function l(){return`display: inline-block; color: #fff; background: hsl(214deg 100% ${35+10*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}%); padding: 1px 4px; border-radius: 3px;`}function c(e){return[e[0].replace(/^%c/,""),...e.slice(1)].filter((e=>!e.startsWith("display: inline-block; color: #")))}},2257:(e,t,n)=>{"use strict";function r(e,t){return d(e,o(t,e))}function i(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,o(t,e),n),n}function o(e,t){return e.get(s(e,t))}function a(e,t,n){return s(t,e),function(e,t){if(void 0===e)throw new TypeError("attempted to get private static field before its declaration")}(n),d(e,n)}function s(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function d(e,t){return t.get?t.get.call(e):t.value}n.d(t,{E:()=>f,pX:()=>l,ph:()=>m,yT:()=>c,zE:()=>u});const l=2147483647;function c(e,t){const n=t-e+1+e;return Math.floor(Math.random()*n)}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return function(e){const t=16*Math.random()|0;return"x"===e?t:3&t|8}(e).toString(16)}))}function p(e,t){if(null==e)return;let n=e/(t/100);return n>99&&(n=99),n<0&&(n=0),Math.round(n)}const h=/(.*)P(\d+)(s|k|m|gb|ms|px)$/;function f(e,t){const{cap:n}=function(e){const t=e.match(h),[,n,r,i]=t||[],o=function(e,t){return{m:e=>60*e*1e3,s:e=>1e3*e,k:e=>1e3*e,gb:e=>1e9*e,ms:e=>e,px:e=>e}[t](e)}(Number(r),i);return{fieldName:n,period:r,unit:i,cap:o}}(e);return{[e]:p(t,n)}}var g=new WeakMap;class m{static get(e,t){return a(this,m,v)[e]=a(this,m,v)[e]||new m(t),a(this,m,v)[e]}static inc(e,t){return this.get(e,t).inc()}static dec(e,t){return this.get(e,t).dec()}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t,n,r;r={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,n=g),n.set(t,r),i(this,g,e)}get value(){return r(this,g)}inc(){var e;return i(this,g,(e=r(this,g),++e))}dec(){var e;return i(this,g,(e=r(this,g),--e))}}var v={writable:!0,value:{}}},3465:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!=e?e[t]:e),e),i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return void 0===i||i===e?n:i}n.d(t,{A:()=>r})},1525:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>i(e,t)))}function i(e,t){if(e===t)return e;const n=typeof t;if("undefined"===n)return e;const r=Array.isArray(t);if(null===t||"string"===n||"number"===n||"boolean"===n||"function"===n||!r&&"object"===n&&null!==t&&t.constructor!==Object)return t;if(null===e)return i(void 0,t);const o=typeof e,a=Array.isArray(e);if(n!==o)return a?e:"function"===o&&"object"===n?(Object.entries(t).forEach((t=>{let[n,r]=t;e[n]=r})),e):"undefined"===o?r?i([],t):"object"===n?i({},t):t:"undefined"===n?e:t;if(a){const n=e.length,r=t.length;let o;for(o=0;o<n&&o<r;o++)e[o]=i(e[o],t[o]);for(o=n;o<r;o++)e[o]=i(void 0,t[o]);return e}if(r)return[...t];const s=Object.entries(t).sort(((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)})),d=s.length,l=Object.entries(e).sort(((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)}));let c=0;for(const[t,n]of l){let r,o,a=-1;for(;a<0&&c<d;)[r,o]=s[c],a=r.localeCompare(t),a<0&&(e[r]=i(void 0,o),c++);0===a&&(e[t]=i(n,o),c++)}for(;c<d;){const[t,n]=s[c++];e[t]=i(void 0,n)}return e}n.d(t,{A:()=>r})},9149:(e,t,n)=>{"use strict";function r(e,t,n){const r=Array.isArray(t)?t:t.match(/([^[.\]])+/g)||[];for(let t=e,i=0;i<r.length;i++){let e=r[i];const o=e.endsWith("?");if(o&&(e=e.slice(0,-1)),i===r.length-1)o&&!(e in t)||(t[e]=n);else if(void 0===t[e]){if(o)break;t[e]={}}t=t[e]}}n.d(t,{A:()=>r})},6485:(e,t,n)=>{"use strict";var r=n(6964),i=n(7838);(i.fX.adsDebugRemote||i.fX["ac.adsDebugRemote"]||n.g.adverts.config&&n.g.adverts.config.adsDebugRemote||localStorage.getItem("dmg.ads.debug.label"))&&n(9860),(0,r.h)("bootstrap").log("loading",window.location.href)},567:(e,t,n)=>{const r=n(5474);function i(e){if(!e)throw new TypeError("Missing videoAdServerUrl");this.base_url=e,this.params={env:"vp",gdfp_req:1,impl:"s",output:"xml_vast4",unviewed_position_start:1,hl:"en"}}i.encodeCustomParams=function(e){if("object"==typeof e)return Object.keys(e).forEach((t=>{const n=e[t];Array.isArray(n)?e[t]=n.join(","):e[t]=n})),encodeURIComponent(r.objToQueryString(e));throw new TypeError("encodeCustomParams only accepts an object map of key value pairs.")},i.prototype.iu=function(e){if(!/^\/[a-zA-z0-9\-_.~]+(\/[a-zA-z0-9\-_.~]+)*/.test(e))throw new TypeError("'iu' param must follow format: /network_id/directory_tree.../ad_unit");return this.params.iu=encodeURIComponent(e),this},i.prototype.sz=function(e){if(!/^[0-9]+x[0-9]+/.test(e))throw new TypeError("'sz' param must follow format like: 300x400.");return this.params.sz=e,this},i.prototype.url=function(e){return this.params.url=encodeURIComponent(r.urlParts(e).href),this},i.prototype.correlator=function(e){if("number"==typeof e&&!isNaN(e))return this.params.correlator=e,this;throw new TypeError("the passed correlator is not a number")},i.prototype.description_url=function(e){return this.params.description_url=encodeURIComponent(r.urlParts(e).href),this},i.prototype.hl=function(e){return this.params.hl=e,this},i.prototype.ciu_szs=function(e){return this.params.ciu_szs=e,this},i.prototype.scp=function(e){return this.params.scp=e,this},i.prototype.cust_params=function(e){return this.params.cust_params=i.encodeCustomParams(e),this},i.prototype.setRequestNonPersonalizedAds=function(e){return e&&(this.params.npa=1),this},i.prototype.setRestrictDataProcessing=function(e){return e&&(this.params.rdp=1),this},i.prototype.setPpid=function(e){return e&&(this.params.ppid=e),this},i.prototype.scor=function(e){if("number"==typeof e&&!isNaN(e))return this.params.scor=e,this;throw new TypeError("the passed scor is not a number")},i.prototype.addParam=function(e,t){return this.params[e]=t,this},i.prototype.build=function(){const e=this.params;return["env","gdfp_req","impl","output","unviewed_position_start","hl","url","correlator","description_url"].forEach((t=>{if(!e[t])throw new TypeError("Error building url, missing required param '"+t+"'")})),this.base_url+"?"+r.objToQueryString(this.params)},e.exports=i},5739:e=>{e.exports=e=>{const t=(e=>{const{cust_params:t,domain:n,embed:r,flyaway:i,muted:o,screen:a,source:s,title:d,videoId:l,videoStarts:c}=e,u="number"==typeof e.duration?e.duration/1e3:0,p={length:u>120?120:30*Math.floor(u/30),videoWidth:a.width,videoHeight:a.height,play:c,embed:r,ttid:l,domain:n,flyaway:i,s:o?"off":"on"};d&&(p.videoTitle=d.replace(/\s/g,"_").replace(/[^_\w]/g,"")),s&&(p.video=s.replace(/\s/g,"_")),window.adEnvironment&&(p.environment=window.adEnvironment);const h=t||{};return Object.keys(h).forEach((e=>{p[e]=h[e]})),p.sz=a.width+"x"+a.height,p})({...e,cust_params:{...e.cust_params}});return{customParams:t}}},7200:(e,t,n)=>{"use strict";function r(e,t){const{autoplay:n=!1,fbiaEmbed:r=!1,flyaway:i=!1,isMobile:o=!1,original:a=!1,syndicationService:s=!1}=t;let d=e;r&&-1===d.indexOf("dm.videofb")||"fbia"===s&&-1===d.indexOf("dm.videofb")?d=d.replace(/dm\.video/g,"dm.videofb"):"gamp"===s&&-1===d.indexOf("dm.videoamp")?d=d.replace(/dm\.video/g,"dm.videoamp"):o&&a&&!n&&!i&&(d=d.replace(/dm\.video/g,"dm.video.original"));let l="";return n&&(l+="ap"),i&&(l+="fa"),l.length&&(d=d.replace(/(dm\.video)([^&]+)?/,"$1$2_"+l)),d}n.d(t,{Y:()=>r})},5474:(e,t,n)=>{const r=n(9837),i=document.createElement("a"),o=document.documentMode,a={appendGeolocation:function(e){try{return a.appendKeyToURL(e,"geo",window.PageCriteria.geo)}catch(t){return e}},appendKeyToURL:function(e,t,n){let r;r=/\?/.test(e)?"&":"?",r+=t+"="+encodeURIComponent(n.toString());const i=e.split("#");return 2===i.length?i[0]+r+"#"+i[1]:i[0]+r},objToQueryString:function(e){const t=[];return r.forEach(e,((e,n)=>{t.push(n+"="+e)})),t.join("&")},queryStringToObj:function(e,t){if(t=r.isFunction(t)?t:function(){return!0},!("string"==typeof e||e instanceof String))return{};const n=(e=e.trim().replace(/^\?/,"")).split("&"),i={};return r.forEach(n,(e=>{let n,r,o;""!==e&&(r=e.split("="),n=r[0],o=r[1],t(n,o)&&(i[n]=o))})),i},urlParts:function(e){let t,n=e;return o&&(i.setAttribute("href",n),n=i.href,/(.*):(\d+)/.test(i.host)&&(t=i.host.split(":"),i.host=t[0],i.port=t[1])),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:r.isNotEmptyString(i.port)?i.port:80,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}};e.exports=a},9837:e=>{function t(e){return"function"==typeof e}const n={forEach:function e(n,r,i){let o,a;if(n)if(t(n))for(o in n)"prototype"===o||"length"===o||"name"===o||n.hasOwnProperty&&!n.hasOwnProperty(o)||r.call(i,n[o],o,n);else if(s=n,"[object Array]"===Object.prototype.toString.call(s)){const e="object"!=typeof n;for(o=0,a=n.length;o<a;o++)(e||o in n)&&r.call(i,n[o],o,n)}else if(n.forEach&&n.forEach!==e)n.forEach(r,i,n);else for(o in n)n.hasOwnProperty(o)&&r.call(i,n[o],o,n);var s;return n},isFunction:t,isNotEmptyString:function(e){return function(e){return"string"==typeof e}(e)&&0!==e.length}};e.exports=n},812:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,Z:()=>a});var r=n(3575),i=n(7314);const o="\n.mpu_puff_wrapper.watermark,\n.adHolder.watermark,\n#mobile-content .adHolder.watermark,\n#content .billboard-container.watermark,\n.dmg-ads,\n.mol-ads-label-container {\n  display: none;\n}\n";function a(e){e("slots.enabled",{}),(0,r.appendStyle)(o)}function s(e,t,n){t("slots.enabled",(0,i.Up)(e("slots.enabled",{}),n)),(0,r.appendStyle)(o)}},4488:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(1970);const i=e=>{const t=e.sizeMapping?(0,r.nq)(e.sizeMapping,e.sizes||e.size,[document.documentElement.clientWidth,document.documentElement.clientHeight]):e.sizes||e.size,[n,i]=(0,r.w1)(t);return[n,i]}},5446:(e,t,n)=>{"use strict";n.d(t,{Jt:()=>p,Ts:()=>f,hZ:()=>h,th:()=>g});var r=n(3465),i=n(9149),o=n(7838),a=n(4610),s=n(497),d=n(6964),l=n(1525);n.g.adverts.config=n.g.adverts.config||{};const c=(0,d.h)("config"),u={},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=(0,r.A)(u,...t);return"object"==typeof i?JSON.parse(JSON.stringify(i)):i},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.A)(u,...t)};function f(){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.adverts.config;Object.entries(e).forEach((e=>{let[t,n]=e;try{if((0,s.E)(n)){const e=(0,s.n)(n);void 0!==e&&h(t,e)}else h(t,n)}catch(e){console.error(e)}})),n.g.adverts.config=u}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.adverts.config),function(){const e=JSON.parse(localStorage.getItem("mol-ads-control-panel-config")||"null");"object"==typeof e&&null!==e&&(0,l.A)(u,e)}(),g(),function(e){if("string"!=typeof e.setPlugin)return;const t=e=>["on","true","1","enabled"].includes(e),[n,r,i]=e.setPlugin.split(",").reduce(((e,n)=>{let[r,i,o]=e;const[a,s]=n.split(":");if(void 0===s)return[r,i,o];if(a.includes("*")){const[e,n]=a.split("*");!t(s)&&""===n&&o.push(e)}else t(s)?r.add(a):i.add(a);return[r,i,o]}),[new Set([]),new Set([]),[]]),o=p("plugins.enabled",[]).filter((e=>!((e=>i.some((t=>e.includes(t)))&&!n.has(e))(e)||r.has(e)))),a=o.indexOf("debug.setPlugin")+1;o.splice(a,0,...n),h("plugins.enabled",[...new Set(o)])}(o.fX)}const g=()=>{Object.entries(o.fX).forEach((e=>{let[t,n]=e;if(t.startsWith("ac."))if(t.endsWith("[+]")){const e=t.substring(3,t.length-3);h(e,(0,a.sb)(p(e,[]).concat(n)))}else if(t.endsWith("[-]")){const e=t.substring(3,t.length-3);h(e,p(e,[]).filter((e=>!n.includes(e))))}else if(t.endsWith("{}")){const e=t.substring(3,t.length-2);h(e,(e=>{try{return JSON.parse(e)}catch(e){return c.error(e),{}}})(n))}else h(t.slice(3),(e=>""===e||"boolean"==typeof e?e:isNaN(e)?(e=>{const t="true"===e;return"false"===e||t?t:e})(e):parseFloat(e))(n))}))}},1442:(e,t,n)=>{"use strict";(0,n(5446).Ts)()},497:(e,t,n)=>{"use strict";n.d(t,{E:()=>c,n:()=>l});var r=n(7838),i=n(7314),o=n(4610),a=n(3465),s=n(4964),d=n(7167);function l(e){let{__targeting:t}=e;return((0,o.wg)(t).find(u)||{}).payload}function c(e){return"object"==typeof e&&!!e?.__targeting}const u=(0,i._M)({browser:p((function(e){switch(e){case"chrome":return r.G_;case"edge":return r.pr;case"ie":return r.Qr;case"firefox":return r.$M;case"safari":return r.Yw;default:return!1}})),cookie:p((function(e){return Object.entries(e).some((e=>{let[t,n]=e;return n.includes((0,r.Ri)(t)||"")}))})),device:p((function(e){switch(e){case"tablet":return s.Ay.isIPad()||s.Ay.isAndroidTablet();case"desktop":return!s.Ay.isMobile()}})),iOSVersion:p((function(e){let{min:t,max:n}=e;const[i]=(0,r.O)();return(void 0===t||t<=i)&&(void 0===n||n>=i)})),minInnerWindowHeight:p((function(e){return window.innerHeight>=e})),minInnerWindowWidth:p((function(e){return window.innerWidth>=e})),minDocumentWidth:p((function(e){return document.documentElement.clientWidth>=e})),pageCriteria:p(function(){const e=(0,i._M)((0,i.Tj)(window.PageCriteria||{},(e=>p(Array.isArray(e)?t=>e.includes(t):t=>t===e))),!0);return t=>e((0,i.cJ)(t,"payload"))}()),timeRange:p((function(e){let{end:t,start:n}=e;const r=new Date,i=t&&h(t)<=r,o=n&&h(n)>r;return!i&&!o})),globalContext:p((function(e){let{prop:t,op:r,value:i}=e;const s=(0,a.A)(n.g,t);switch(r){case"includes":return"string"==typeof s?s.includes(i):(0,o.wg)(s).includes(i);case"startsWith":return"string"==typeof s&&s.startsWith(i)}})),topWindow:p((function(e){return e?window.top===window:window.top!==window})),paywalled:p((function(e){return e===(0,d.H)({pageCriteria:n.g.PageCriteria,win:n.g})})),entitlements:p((function(e){const t=n.g.getPaywallEntitlements?.();return t?.includes?.(e)}))});function p(e){return t=>void 0===t||(Array.isArray(t)?t.some(e):e(t))}function h(e){const[t,n,r]=e.split(":").map(Number),i=new Date;return i.setHours(t),i.setMinutes(n),i.setSeconds(r),i}},3575:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyle:()=>m,closest:()=>f,contains:()=>v,createIframe:()=>T,elementReady:()=>o,getElementBottomOffset:()=>d,getElementComputedHeight:()=>w,getElementComputedWidth:()=>_,getElementScaledHeight:()=>b,getElementWidthScale:()=>S,getOffset:()=>s,getPageSize:()=>p,getParent:()=>y,getRelativeContainer:()=>c,getVisibleText:()=>I,getWindow:()=>u,insertAfter:()=>k,isElement:()=>g,loaded:()=>a,onBodyAvailable:()=>r,untilBodyAvailable:()=>i,walk:()=>h});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;t.body?e():n.g.requestAnimationFrame((()=>{r(e,t)}))},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return new Promise((t=>r(t,e)))},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise(((r,i)=>{let o=!1;setTimeout((()=>{o=!0}),t);const a=()=>{const s=document.querySelector(e);s?r(s):o?i(new Error(`Element "${e}" not found after ${t}ms`)):setTimeout((()=>a()),n)};a()}))},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return new Promise((t=>{["complete","loaded","interactive"].includes(e.readyState)?t():e.addEventListener("DOMContentLoaded",t)}))},s=e=>{let t,n,r={top:0,left:0};const i=e&&e.ownerDocument;if(i)return t=i.documentElement,e.getBoundingClientRect&&(r=e.getBoundingClientRect()),n=u(i),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}};function d(e){return s(e).top+w(e)}const l=e=>{const t=getComputedStyle(e).getPropertyValue("position");return["relative","absolute"].includes(t)},c=e=>h(e,l,(e=>e.parentNode)),u=e=>{let t=null;return e&&(e===e.window?t=e:9===e.nodeType?t=e.defaultView||e.parentWindow:e.ownerDocument&&(t=e.ownerDocument.defaultView||e.ownerDocument.parentWindow)),t},p=()=>[document.body.scrollWidth,window.innerHeight+window.scrollMaxY,window.innerWidth,window.innerHeight],h=(e,t,n)=>{let r=e;for(;r;){if(t(r))return r;r=n(r)}},f=(e,t)=>h(e,t,(e=>{let{parentNode:t}=e;return t!==document&&t})),g=e=>e&&1===e.nodeType,m=e=>{if(!e)return;const t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.innerText=e,(document.body||document.head).appendChild(t)},v=(e,t)=>e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY,y=(e,t)=>h(e,(e=>e.matches(t)),(e=>e.parentNode)),b=e=>(e=>{const t=getComputedStyle(e),n=t.getPropertyValue("transform");if(n&&"none"!==n){const e=n.split("(")[1].split(")")[0].split(",");return parseFloat(e[3])}const r=t.getPropertyValue("zoom");return parseFloat(r||1)})(e)*w(e),_=e=>parseInt(getComputedStyle(e).getPropertyValue("width")),w=e=>parseInt(getComputedStyle(e).getPropertyValue("height")),S=e=>{const t=_(e);return _(document.body)/t};function T(e){let{content:t,insertMethod:n=(e=>{document.body.appendChild(e)}),width:r=0,height:i=0,log:o=(()=>{})}=e;const a=document.createElement("iframe");return a.border="0",a.style.width=`${r}px`,a.style.height=`${i}px`,a.style.border="none",o("inserting iframe"),n(a),o("writing iframe content",a),a.contentDocument.open(),a.contentDocument.domain=document.domain,a.contentDocument.write(t),a.contentDocument.close(),a}function I(e){window.getSelection().removeAllRanges();const t=document.createRange();t.selectNode(e),window.getSelection().addRange(t);const n=window.getSelection().toString().trim();return window.getSelection().removeAllRanges(),n}function k(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},2279:(e,t,n)=>{"use strict";n.d(t,{x:()=>l});var r=n(6642),i=n(7838),o=n(9180),a=n(5446);const s=(0,r.Mi)((()=>window.RTA?.ids),300,3e3).then((e=>e.user||e.visit?{rta:{user:e.user,visit:e.visit}}:{})).catch((()=>({}))).then((e=>{const{PageCriteria:t={},pagemeta:r={}}=window;return{account:"mol",adsFreeUser:n.g.isAdFreeEntitled?.(),articleId:t.articleId,channel:t.channel,configVersion:(0,a.Jt)("__generated.commit.sha"),bundle:"facade",cmVersion:(0,a.Jt)("__generated.rulesJs.version"),cmCluster:(0,a.Jt)("__generated.rulesJs.cluster"),device:t.device,embed:!0,event_type:"bidmax",fbapp:!!t.fbapp,geo:t.geo,isMobile:t.isMobile,isTablet:t.isTablet,office:(0,o.$)(),pageType:t.pageType,pageViewId:t.pageViewId,referrer:document.referrer,sponsored:t.sponsored,subchannel:t.subchannel,timeAtSend:0,type_version:2,url:location.href,version:i.fX.bidmax||r.adsBundleVersion||"absent",...e}}));let d={};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(arguments.length>1?arguments[1]:void 0)||!!(0,a.Jt)("bidmax.dispatcher.useCurrentUrl");return s.then((r=>new Promise(((i,o)=>{const s=new XMLHttpRequest,l=t?`${n.g.location.origin}${n.g.location.pathname}`:(0,a.Jt)("bidmax.dispatcher.url","//crta.dailymail.co.uk");s.open("POST",l,!0),s.addEventListener("abort",o),s.addEventListener("error",o),s.addEventListener("load",i),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify({...r,...d,...e,timestamp:Date.now()}))})))).catch((e=>console.error(e)))}},7843:(e,t,n)=>{void 0===n.g.adverts&&(n.g.adverts={}),n.g.adverts.queue=n.g.adverts.queue||[],n.g.DM=n.g.DM||{}},9454:(e,t,n)=>{"use strict";n.d(t,{F3:()=>a,g3:()=>s,sd:()=>d,xy:()=>l});const r=(0,n(6964).h)("plugin-registry"),i={},o={};function a(e,t){r("registering plugin:",e),i[e]=t}function s(e,t){r("registering sync plugin:",e),o[e]=t}function d(e){return i[e]}function l(){return{...i}}},124:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DELAYED:()=>d,IMMEDIATE:()=>a,LAZY:()=>s,getEnabledRenderedSlots:()=>v,getEnabledSlots:()=>y,getLoadingSettings:()=>m,initEmergencyRules:()=>I,initSlots:()=>S,isAdEnabled:()=>f,resetSlots:()=>w,setSupportedSlots:()=>T});var r=n(7838),i=n(7314);(0,n(9454).F3)("adListLoader",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:r,setConfig:i,log:a}=e;const s=_(r("slots.enabled",{}),b),d=Object.keys(s),f=new Set(d),m=u.filter((e=>!f.has(e))),v=d.reduce(((e,t)=>({...e,[t]:g(a,s[t])})),{}),y=r("slotDescription",{});l=d.filter((e=>!y[e]||!!y[e].id)),c=m,o=v,a("Enabled slots: ",l),a("Disabled slots: ",c),a("Loading settings: ",o),i("slots.enabled",v),t.emit("slots initialized",l),p(),t.on("system ready",(()=>{n.g.DM.later("DOM_READY",(()=>{document.write=document.writeln=e=>{try{throw new Error(e)}catch(e){a("Error: there was an attempt to document.write in a rendered page: ",e)}}}))})),t.on("set slots enabled",((e,t)=>{h(e,t)}))}});let o={};const a="immediate",s="lazy",d="delayed";let l=[],c=[];const u=["adx_page_skins","adx_tracking","banner_top","billboard","bvp_puff_26","bvp_puff_29","fff","fff_overlay","half_mpu_top","inread_player","inread_player_mw","inread_player_top","intro_ad","leader_bottom","leader_lower_middle","leader_middle","leader_top","leader_very_bottom","leader_wide","mpu_bottom","mpu_bottom_right","mpu_channel","mpu_comments_1","mpu_comments_2","mpu_home","mpu_middle","mpu_mobile","mpu_mobile_bottom","mpu_mobile_lower_middle","mpu_mobile_top","mpu_mobile_upper_middle","mpu_puff_10","mpu_puff_15","mpu_puff_20","mpu_puff_30","mpu_puff_45","mpu_puff_5","mpu_top","native_fff_accessorise","native_fff_overlay_accessorise","network_banner","para_top","puff_ad_3","puff_ad_6","puff_ad_9","sky_left_bottom","sky_left_top","sky_right_bottom","sky_right_top","sticky_banner","video_ad","video_carousel"],p=()=>{h(c,!1),h(l,!0)},h=function(e,t){e.forEach((e=>{const n=`molads_${e}_on`,r=`molads_${e}_off`;document.documentElement.classList.add(t?n:r),document.documentElement.classList.remove(t?r:n)}))},f=e=>{const t=e&&(e.dfpPos||e.pos);return!(window.disableAds&&!r.fX.ignoreDisableAds)&&(!t||!u.includes(t)||l.includes(t))},g=(e,t)=>{let{loadingOffset:n,loadingTrigger:r,loadingType:i=a}=t;const o={type:i||a,trigger:r,offset:isNaN(n)?0:Number(n)};return o.type===a||o.type===d||o.type===s&&o.trigger||(e("Unknown loading type or invalid loading trigger, falling back to immediate loading :",o),o.type=a),o},m=e=>o[e]||{type:a,trigger:void 0,offset:0},v=()=>l.slice(),y=v,b=(r.fX.setSlot&&r.fX.setSlot.split(",")||[]).reduce(((e,t)=>{const[n,r]=t.split(":").map((e=>e.trim()));return e[n]="on,true,1,enabled".includes(r||"true"),e}),{}),_=(e,t)=>!t||t&&(0,i.Im)(t)?e:Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return r?e[n]={}:delete e[n],e}),e),w=()=>{l=[],c=[]},S=()=>{},T=e=>{},I=()=>{}},829:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>init});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8867);const showThankYouMessage=(getConfig,log)=>{try{log("Showing thank you message"),eval(getConfig("abe.thankYouMessage.js","DM.later('bundle', function(){window.top.DM.molFeAdblockerDialog.thanks()})"))}catch(e){console.error(e)}};function init(e){let{broker:t,getConfig:n,log:r}=e;const i=JSON.parse(localStorage.getItem("mol.abe.data")||"{}"),o=new Promise((e=>{t.once("ad block detection result",(o=>{let{adblocker:a}=o;a&&(void 0===i.v&&(i.i=(new Date).toISOString(),i.v=2,i.u=(0,uuid__WEBPACK_IMPORTED_MODULE_0__.A)(),i.n=!0),i.v++,i.l=(new Date).toISOString(),localStorage.setItem("mol.abe.data",JSON.stringify(i))),i.i&&(r(a?"Ad blocker detected":"No ad blocker detected"),a||i.c&&!(i.c<i.l)||(i.c=(new Date).toISOString(),i.n=!0,r("First page load with no ad blocker, saving:",i),localStorage.setItem("mol.abe.data",JSON.stringify(i)),showThankYouMessage(n,r)),t.emit("ex ad blocker user",a,!!i.c),i.c?e({exabd:!a}):e({}))}))}));if(!i.i)return;r("ABE ran at last once, waiting for to ad blocker detection");let a={};void 0!==i.c&&(a.exabd=i.c>i.l),o.then((e=>a=e));const s=e=>({[i.n?"exabd2":"exabd"]:!!e});t.emit("set page level targeting",s(a.exabd)),t.emit("set page level targeting",o.then((e=>{let{exabd:t}=e;return s(t)}))),t.register("call for page analytics",(()=>a))}init.ccpa={enabledIfDissent:!0},init.gdpr={enabledIfDissent:!0}},4350:(e,t,n)=>{"use strict";n(6642),n(9231),n(2279),n(2257),n(3721);var r=n(6964);n(7929),(0,r.h)("abe.detectAdBlocker")},3721:(e,t,n)=>{"use strict";(0,n(9454).F3)("scriptTagsMonitor",{init:function(e){let{broker:t,getConfig:n,log:i}=e;n("abe.detection.enabled",!1)?i("abd enabled, bailing"):n("__generated.modifiers.applied",[]).some((e=>e.startsWith("campaigns.rules-linteItem")))?i("takeover applied, bailing"):(i("loading"),function(e){const t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("error",(()=>{r++})),t.apply(this,arguments)}}(),t.register("call for page-unload",(()=>(i("reporting:",{xhrErrors:r}),{stm:{xe:r}}))))},isAdsFreeSupported:!1,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});let r=0},5517:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyles:()=>j,default:()=>V,enableSlot:()=>P,getAdContainer:()=>L,getElementById:()=>M,getElementContainerById:()=>x,getElementOrIframeById:()=>k,isEmpty:()=>C,log:()=>R,nativeLoaded:()=>D,openAd:()=>B});var r=n(4250),i=n(124),o=n(7759);const a=n(2864),s=n(7830),d=n(5517);let l;o.Ay.broker("NativeRenderer").on("system ready",(()=>{const e=window.location.href.match(/[&?]enable_native=([^&]+)/),t=e&&e[1];if(t){const e=i.initSlots;i.initSlots=function(n){n[t]={enabled:!0,state:"on"},e.apply(i,arguments)}}l=t,a((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}))}));const c="\f\t",u=c.length;function p(e){const t=document.getElementById(e.parentId),n=d.getAdContainer(t);let r=!1;function i(){if(!r){r=!0;try{!function(e,t,n){const r=document.createElement("div");r.innerHTML=n;const i=r.childNodes;if("none"!==t.style.display){t.style.display="none";let n,r=t;const o=t.parentNode,a=e.pos.replace(/_dfp$/,"");for(let e=i.length;e--;)n=i[e],1===n.nodeType&&"SCRIPT"!==n.nodeName&&(o.insertBefore(n,t),r=n);const s=r,d=r;switch(e.pos){case"native_fff_overlay_accessorise":o.style.display="none";case"native_fff_accessorise":document.body.classList.add("fff-has-accessorise")}d&&s.hasAttribute("data-track-module")&&DM&&DM.externalLinkTracker&&(d.setAttribute("data-track-type","cl"),DM.externalLinkTracker(s.id,"cl")),l&&window.opener&&window.opener!==window&&window.opener.postMessage&&(window.addEventListener("message",h.bind(null,r,a)),f(window.opener,"isLoaded",!0,a))}}(e,t,n.body.innerHTML)}catch(e){console.error("Error moving native article: ",e)}}}n.body&&((n.defaultView||n.parentWindow).addEventListener("load",i),setTimeout(i,2e3))}function h(e,t,n){if(n.data.slice(0,u)===c){const r="data-native-ad-field";let i;try{i=s.parse(n.data.slice(u))}catch(e){console.error("Invalid message",e)}if(i&&i.type){const o=[].slice.call(e.querySelectorAll("["+r+"]"));let a;switch(i.type){case"getValues":a=o.map((function(e){return{name:e.getAttribute(r),value:e.textContent}}));break;case"setValues":o.forEach((function(e){const t=e.getAttribute(r);t in i.values&&(e.textContent=i.values[t])}))}a&&f(n.source,i.type,a,t,n.origin)}}}function f(e,t,n,r,i){const o={type:"response",query:t,position:r,value:n};e.postMessage(c+s.stringify(o),i||"*")}a((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}));var g=n(3575),m=n(6964);function v(e){return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e]}class y{constructor(){this.subscriptions={}}clone(){return{emit:this.emit.bind(this),off:this.off.bind(this),on:this.on.bind(this),once:this.once.bind(this)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v.call(this,e).slice().forEach((e=>e(...n)))}off(e,t){const n=v.call(this,e);if(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}else n.length=0}on(e,t){v.call(this,e).push(t)}once(e,t){var n=this;const r=function(){n.off(e,r),t(...arguments)};this.on(e,r)}}var b=n(7303),_=n(1970),w=n(4610);const S=(e,t)=>{let n;try{n=e.contentDocument||e.contentWindow.document}catch(e){}return n||t},T=e=>t=>{const n=t&&S(t);return n&&n.getElementById(e)},I=e=>{const t=(e||document).getElementsByTagName("iframe");return Array.prototype.filter.call(t,A)},k=e=>{const t=T(e);return E(I(),(e=>t(e)&&e))},A=e=>e.id&&"google_ads_iframe_"===e.id.slice(0,18),E=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return e[n]},C=e=>{const t=document.getElementById(e),n=["a","iframe","object","img","video"];let r=!0;if(t)for(let e=n.length;r&&e--;)r=!t.getElementsByTagName(n[e]).length;return r},x=e=>{const t=k(e),n=/\badHolder\b/;if(!t)return;let r=t;for(;r&&!n.test(r.className||"");)r=r.parentNode;return r||(r=t),r},O=(e,t)=>{R("Disabling",t);const n=document.documentElement,r="molads_"+t;if("billboard"===t){q("billboard",R.extend("watermark")),e.emit("unstick position","billboard");const{DM:t}=window;t&&t.Rotator&&t.Rotator.initMiniCarousel()}n.classList.add(`collapse-${t}`),n.classList.remove(r+"_on"),n.classList.add(r+"_off")},P=e=>{const t="molads_"+e,n=document.documentElement;n.classList.remove(t+"_off"),n.classList.add(t+"_on")},D=(e,t,n)=>{const i=E(I(),(t=>t.contentWindow.name===e.name));if(i){const e=(0,g.closest)(i,(e=>e.hasAttribute(r.AD_ATTRIBUTE)));if(e){const t=r.parse(e.getAttribute(r.AD_ATTRIBUTE)||"{}");t&&p(t)}}},R=(0,m.h)("ad-integrator"),j=e=>{const t=e.match(/<style[^>]*\sclass="?integrate"?[^>]*>[^\f]*?<\/style>/gi);for(let e=0,n=t?t.length:0;e<n;e++)(0,g.appendStyle)(t[e].slice(t[e].indexOf(">")+1,-8))},M=e=>{let t=null;const n=I(),r=T(e);for(let e=0;!t&&e<n.length;e++)t=r(n[e]);return t},N=(e,t)=>{R(`collapseAd("#${t}")`);const n=(0,b.getById)(t);if(n)return void O(e,n.pos);R.warn("collapseAd - cannot find description of slot with id:",t);const i=x(t);if(i){R("collapsing",t);const n=r.parse(i.getAttribute(r.AD_ATTRIBUTE)||"{}");n&&n.pos?O(e,n.pos):i.style.display="none"}else R.warn("collapseAd: id",t,"is unknown")};function U(e,t){for(const n of(0,_.O$)((0,b.allDescriptions)(),(0,w.wg)(t)))R(`collapseAd({ pos: "${n}" })`),O(e,n)}const L=e=>{const t=I(e)[0];return t?S(t,document):e},B=e=>{const t=x(e),n=r.parse(t.getAttribute(r.AD_ATTRIBUTE)||"{}");n&&n.pos?P(n.pos):(t.style.height="auto",t.style.display="block")};function q(e,t){const n=(0,b.get)(e);if(!n)return void t.warn("Cannot find description");const r=document.getElementById(n.id);if(!r)return void t.warn("Cannot find element");const i=(0,g.closest)(r,(e=>e.classList.contains("watermark")));i?(t("removing watermark",i),i.classList.remove("watermark")):t.warn("Couldn't find an watermarked element")}const F=e=>{let{broker:t}=e;n.g.addEventListener("message",(e=>{let{data:n}=e;if("object"==typeof n&&"string"==typeof n.func)switch(R("received message",n),n.func){case"molads.addSkinToPage":return t.emit("add skin to page",n);case"molads.addSkinLabel":return t.emit("add skin label to page");case"molads.disableSticky":return t.emit("disable sticky position",n.pos)}}));const r=new y;let i=[];t.on("external subscription",(function(){return r.on(...arguments)})),n.g.adverts.getRendered=()=>i,n.g.AdIntegrator=n.g.AdIntegrator||{},n.g.adverts.collapseAd=n.g.AdIntegrator.collapseAd=N.bind(null,t),n.g.adverts.collapseAdByPos=n.g.AdIntegrator.collapseAdByPos=U.bind(null,t),n.g.AdIntegrator.disableSlot=O.bind(null,t),t.on("ad rendered",((e,t)=>{t.isEmpty||(i.push(t.slot.molAd),r.emit("rendered",t),r.emit("rendered."+e,t))})),t.on("destroy slot",(e=>{i=i.filter((t=>t.pos!==e))})),t.on("remove watermark",(e=>{q(e,R.extend("remove watermark").extend(e))})),t.on("collapseAdByPos",(e=>U(t,e)))},V=F;F.isAdsFreeSupported=!0,F.ccpa={enabledIfDissent:!0},F.gdpr={enabledIfDissent:!0},F.disableIfNoAdsServable=!0},8305:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(7314);function i(e,t,n){for(const r of n)if(r["config-changes"])for(const[n,i]of Object.entries(r["config-changes"]))i.omit&&o(e,t,n,i.omit)}function o(e,t,n,i){const o=e(n);(0,r.Gv)(o)&&t(n,(0,r.cJ)(o,i))}},9937:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});const r=(0,n(6964).h)("mvt"),i=(e,t,n)=>{const i=(e=>e.map((e=>(r(`From scenario "${e.name}", loading config:`,e.config||{}),e.config||[]))).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e)).reduce(((e,t)=>(Object.entries(t).forEach((t=>{let[n,r]=t;e[n]=r})),e)),{}))(n);Object.entries(i).forEach((e=>{let[n,r]=e;t(n,r)}))}},4239:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});const r=(0,n(6964).h)("mvt"),i=(e,t,n,i)=>{let o=e("plugins.enabled",[]),a=[],s=[];n.forEach((e=>{Array.isArray(e.plugins)?(r(`From scenario "${e.name}", adding plugins:`,e.plugins),a=[...a,...e.plugins]):"object"==typeof e.plugins&&(Array.isArray(e.plugins.add)&&(r(`From scenario "${e.name}", adding plugins:`,e.plugins.add),a=[...a,...e.plugins.add]),Array.isArray(e.plugins.remove)&&(r(`From scenario "${e.name}", removing plugins:`,e.plugins.remove),s=[...s,...e.plugins.remove]))}));const d=o.indexOf(i)+1;o.splice(d,0,...a);const l=new Set(s);o=o.filter((e=>!l.has(e))),t("plugins.enabled",[...new Set(o)])}},7065:(e,t,n)=>{"use strict";n.d(t,{UQ:()=>u});var r=n(7838);const i="page",o="mol.ads.mvt.tests",a="apl.sk.op",s=e=>{let[t,n]=e;return{...n,name:t}},d=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(/^(-?[0-9.]+)\s*(%?)$/);if(e){let t=parseFloat(e[1]);return"%"===e[2]&&(t/=100),t}return 0},l=function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=`${o}.${t.name}.selected`;let a=t.forceScenario;if(a&&!t.scenarios.find((e=>e.name===a)))return e.warn(`Test "${t.name}" has a forceScenario "${a}" that is not defined in the scenarios`),void(a=void 0);a&&e.info(`Test "${t.name}" is forced to use scenario "${a}"`);const s=a||r[i],l=t.scenarios.find((e=>e.name===s)),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${o}.${e.name}.probabilityDraw`,r=e.size||e.scenarios.reduce(((e,t)=>{let{size:n}=t;return e+d(String(n))}),0),i=c(Math.min(Math.max(0,d(String(r))),1));let a=Number(t[n]);return isNaN(a)&&(a=Math.random(),t[n]=a.toString()),a<i}(t,r);if(a||u){if(l)n=l;else{const o=t.scenarios.filter((e=>{let{size:t}=e;return t}));if(t.scenarios.length===o.length){const e=Math.random();let t=0;n=o.find((n=>{let{size:r}=n;return t+=r,c(t)>e}))}else o.length&&e.warn(`Test "${t.name}" has some scenarios with size and some without, falling back to global scope size`),n=t.scenarios[Math.floor(Math.random()*t.scenarios.length)];n&&(r[i]=n.name)}return n}};function c(e){return Math.round(1e4*e)/1e4}function u(e,t){if(!window.adsMVTResults){const n={},o={},d=Object.entries(t).map(s).filter((e=>e.scenarios)).map((e=>({...e,scenarios:Object.entries(e.scenarios).map(s)}))),c=p();(0,r.TV)(a,"",new Date(0),"/",window.location.hostname);const u=d.reduce(((t,s)=>{const d=s.scope||i,c="page"===d?n:"session"===d?sessionStorage:localStorage,u=l(e,s,c);if(u){!function(e,t,n){const r=e.setCookie??t.setCookie;if(!0===r)e.setCookie={name:t.name,value:e.name};else if("string"==typeof r)if(r.includes("=")){const[t,n]=r.split("=");e.setCookie={name:t,value:n}}else e.setCookie={name:r,value:e.name};else"object"==typeof r&&(e.setCookie={name:r.name,value:r.value});!0===t.applyOnlyIfCookieNameExists?e.setCookie?e.requiredCookieName=e.setCookie.name:n("Invalid MVT configuration. applyOnlyIfCookieNameExists is true but setCookie is not defined"):"string"==typeof t.applyOnlyIfCookieNameExists&&(e.requiredCookieName=t.applyOnlyIfCookieNameExists),n("MVT scenario",e)}(u,s,e);const n=function(e){return!e.requiredCookieName||!!(0,r.Ri)(e.requiredCookieName)}(u);return function(e,t){const n=p();if(!e.setCookie)return!0;t("Applying cookie",e.setCookie),(0,r.TV)(e.setCookie.name,e.setCookie.value,new Date((new Date).getFullYear()+1,0,1),"/",window.location.hostname),(0,r.TV)(a,[e.setCookie.name,...n].join(","),new Date((new Date).getFullYear()+1,0,1),"/",window.location.hostname)}(u,e),n?(o[s.name]=u.name,[...t,u]):(e("Cookie "+u.requiredCookieName+" is required but not set. Removing Scenario."),t)}return t}),[]);!function(e,t){const n=p();e.filter((e=>-1===n.indexOf(e))).forEach((e=>{t("Removing expired cookie",e),(0,r.Yj)(e)})),0===n.length&&(t("MVT Cookie Expired."),(0,r.Yj)(a))}(c,e),window.adsMVTResults={pageStorage:n,selectedScenarios:o,scenarios:u,tests:d}}return window.adsMVTResults}function p(){const e=document.cookie.split(";").filter((e=>e.trim().startsWith(a)));return e.length?e.map((e=>e.split("=")[1])).filter((e=>!!e)):[]}},7167:(e,t,n)=>{"use strict";function r(e){let{pageCriteria:t,win:n}=e;const{isPaywalled:r,hasBeenPaywalled:i}=t||{},o=n.getIsPaywallEligible?.();return void 0===t?"invalid":r||i?!r&&i?"hasBeenPaywalled":r&&!o?"isPaywalledForOthers":r&&o?"isPaywalled":"invalid":"none"}n.d(t,{H:()=>r})},7303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{allDescriptions:()=>u,get:()=>l,getById:()=>c});var r=n(7838),i=n(395),o=n(7314);(0,n(9454).F3)("slots.descriptions",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,init:function(e){let{getConfig:t,setConfig:n,log:r}=e;const o=Object.entries(t("slotDescription",{})).reduce(((e,n)=>{let[o,a]=n;const s=t(`slotDescription.${o}.earlyBidding`,!0);return a.conditionalSizes&&(r("conditionalSizes found",o,a),function(e){e.conditionalSizes?.wideSkies&&e.conditionalSizes?.sizes&&d&&(e.size=e.conditionalSizes.sizes)}(a)),{...e,[o]:["openweb","googleAdSense","amazon","widgets","perform-player"].some((e=>a?.slotTypes?.includes(e)))?{id:o,pos:o,...a}:{type:(l=a.size,l.map((e=>{let[t,n]=e;return`${t}x${n}`})).join(",")),adUnit:(0,i.A)(a.unit||o),pos:o,parentId:a.id,slots:[],slotTypes:["gpt"],earlyBidding:s,...a}};var l}),{});r("descriptionsFromSlotDescription",o),a={...a,...o},n("slotDescriptions.initial",a)},run:function(e){let{broker:t,getConfig:n}=e;a=n("slotDescriptions.initial"),t.on("update description",((e,n)=>{a[e]=n,t.emit("slot descriptions updated",a)})),t.emit("slot descriptions updated",a)}});let a={};const{width:s}=(0,r.YC)(),d=s>1580,l=e=>{const t=a[e];return t&&!t.pos&&(t.pos=e),t};function c(e){return(0,o.I6)(a,(t=>t.id===e))}const u=()=>a},5424:(e,t,n)=>{"use strict";n.d(t,{Cl:()=>h,V_:()=>o,Z:()=>d,et:()=>c,gF:()=>u,q_:()=>i,uL:()=>p});var r=n(5446);const i="mol.ads.cmp.tcf.cache",o="mol-reject-all",a=u(),s=n.g.DM?.userId,d=e=>s&&!!(e||u())?.includes?.(o),l=(0,r.Jt)("tcfv2.consentOrPay.enabled",!1),c=()=>{const e=s&&l&&`dmg.ads.consentOrPay.${function(e){let t=`${e}`;return u().includes(o)&&(t+="."+o),t}(s)}.tcf.cache`;return s&&l?e:i};function u(){return n.g.getPaywallEntitlements?.()||[]}const p=()=>a,h=e=>e.location.pathname.startsWith("/embed/gamp-video/")},560:(e,t,n)=>{"use strict";n.d(t,{IL:()=>T,NH:()=>_,xs:()=>S});var r=n(5424),i=n(5446);const o="__tcfapiLocator",a=["getTCData","hasUserConsentedToAll","hasUserDissentedToAll","getPurposesByVendorMap","getConsentDegree","getValidTCData","consentedVendors","getNonRegisteredVendorsConsents","getNonRegisteredVendors","getStoredRepromptVersion","hasUserConsentedToMandatory"],s=location.search.match(/adsDebug=[^&]*tcfv2/)?function(){return console.info(...arguments)}:()=>{},d=[],l=window;let c=!1;const u=!(0,i.Jt)("tcfv2.consentOrPay.enabled",!1)||!n.g.getPaywallEntitlementsMightChange();function p(){const e=l.document;if(!l.frames[o])if("interactive"===e.readyState||"complete"===e.readyState){const t=e.createElement("iframe");t.style.display="none",t.name=o,e.body.appendChild(t),c&&(e.removeEventListener("readystatechange",p),c=!1)}else"function"==typeof e.addEventListener?(e.addEventListener("readystatechange",p),c=!0):setTimeout(p,5)}s("consentOrPay: canUseCache",u),s("creating");let h={};if(u){const e=localStorage.getItem((0,r.et)());e&&(h=JSON.parse(e))}let f=0;const g={},m=(e,t)=>{const n=h.getTCData,r=f++;s("adding provisional listener:",r),g[r]={},d.push(["addEventListener",2,(e,n)=>{const i=e.listenerId;g[r]?(g[r].realListenerId=i,g[r].listenerId=i,t({...e,listenerId:r},n)):s("ignoring event coz already removed listener:",{listenerId:r,realListenerId:i})}]),n&&t({...n,listenerId:r,eventStatus:"tcloaded",cached:!0},!0)},v=(e,t)=>{const n=e[3];s("removing provisional listener:",n);const r=g[n];if(!r)return s("unknown listener:",n),void t(!1);const i=r.realListenerId;delete g[n],i&&d.push(["removeEventListener",2,e=>t(e),i]),t(!0)};function y(){let e;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return d;const i=n[2],o=n[0];switch(o){case"setGdprApplies":n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof i&&i("set",!0));break;case"ping":"function"==typeof i&&i({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"});break;default:if(a.length){if("addEventListener"===o)return m(n,i);if("removeEventListener"===o)return v(n,i)}if(u){if(~a.indexOf(o)){n[3]&&s("cache method called with argument:",n[3]);const e=h[o];if(void 0!==e)return s("returning cached value for",o),void i(e,!0)}}else s("consentOrPay, not using cache");s("queueing",o),d.push(n)}}function b(e){const t=e&&e.source;if(!t||"function"!=typeof t.postMessage)return void(t&&"function"!=typeof t.postMessage&&s("Message event.source.postMessage is not a function, bailing"));const n="string"==typeof e.data;let r=e.data;if(n)try{r=JSON.parse(e.data)}catch(e){return}if("object"==typeof r&&r.__tcfapiCall){const e=r.__tcfapiCall;window.__tcfapi(e.command,e.version,((r,i)=>{const o={__tcfapiReturn:{returnValue:r,success:i,callId:e.callId}};t.postMessage(n?JSON.stringify(o):o,"*")}),e.parameter)}}function _(){n.g.adverts.tcfv2Installed||(n.g.adverts.tcfv2Installed=!0,p(),l.__tcfapi=y,l.addEventListener("message",b,!1),n.g.adverts.updateCache=w)}async function w(e,t){if(e.tcString.length){const e=(0,r.et)();t("consentorpay: using cacheKey",e);const i=a.map((r=>new Promise((i=>{n.g.__tcfapi(r,2,((n,o)=>{if(t("caching",r),o){const t=JSON.parse(localStorage.getItem(e))||{};t[r]=n,localStorage.setItem(e,JSON.stringify(t))}else t("error caching method:",r);i()}))}))));await Promise.all(i)}}const S=()=>u&&!!localStorage.getItem((0,r.et)());function T(){localStorage.removeItem((0,r.et)())}},9873:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(7620),i=n(7838),o=n(8818);function a(e){const t=localStorage.getItem("mol.ads.watchdog");let n;try{n=t&&JSON.parse(t)}catch(t){e("error parsing last state",t)}return{ps:n,nt:(0,i.j1)()?.type||"unknown",st:o.S,u:(0,r.tW)(window.location.href)}}},8818:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const r=Date.now()},6516:(e,t,n)=>{var r=n(223),i=[];e.exports=function(){var e=new Worker(URL.createObjectURL(new Blob(['(()=>{let e;onmessage=t=>{let{data:s}=t;if("setPattern"===s.cmd)e=new RegExp(s.pattern);else if("testMatch"===s.cmd){const{id:t,href:a}=s,n=e.test(a);postMessage({id:t,match:n})}},addEventListener("message",(function(e){var t,s=e.data,a=s.type,n=s.method,o=s.id,r=s.params;"RPC"===a&&n&&((t=__webpack_exports__[n])?Promise.resolve().then((function(){return t.apply(__webpack_exports__,r)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:o,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:o,error:t})}))})),postMessage({type:"RPC",method:"ready"})})();'])),{name:"[fullhash].worker.js"});return URL.revokeObjectURL(URL.createObjectURL(new Blob(['(()=>{let e;onmessage=t=>{let{data:s}=t;if("setPattern"===s.cmd)e=new RegExp(s.pattern);else if("testMatch"===s.cmd){const{id:t,href:a}=s,n=e.test(a);postMessage({id:t,match:n})}},addEventListener("message",(function(e){var t,s=e.data,a=s.type,n=s.method,o=s.id,r=s.params;"RPC"===a&&n&&((t=__webpack_exports__[n])?Promise.resolve().then((function(){return t.apply(__webpack_exports__,r)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:o,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:o,error:t})}))})),postMessage({type:"RPC",method:"ready"})})();']))),r(e,i),e}},8547:(e,t,n)=>{"use strict";const r=n(2936),i=n(2918),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=function(e){return+e!=e&&(e=0),d.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let r=s(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);const i=function(e){if(d.isBuffer(e)){const t=0|f(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),s(e<0?0:0|f(e))}function p(e){const t=e.length<0?0:0|f(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,d.prototype),r}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return r?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,a=1,s=e.length,d=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,d/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===d)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+d>s&&(n=s-d),o=n;o>=0;o--){let n=!0;for(let r=0;r<d;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function _(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(K(r))return a;e[n+a]=r}return a}function w(e,t,n,r){return X(H(t,e.length-n),e,n,r)}function S(e,t,n,r){return X(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return X(G(t),e,n,r)}function I(e,t,n,r){return X(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,d;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(d=(31&t)<<6|63&n,d>127&&(o=d));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(d=(15&t)<<12|(63&n)<<6|63&r,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(d=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,d>65535&&d<1114112&&(o=d))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.kMaxLength=a,d.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},d.allocUnsafe=function(e){return u(e)},d.allocUnsafeSlow=function(e){return u(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(J(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=d.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))i+t.length>r.length?(d.isBuffer(t)||(t=d.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!d.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},d.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},d.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},d.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(d.prototype[o]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,i){if(J(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==c[e]){o=l[e],a=c[e];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function C(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Y[e[r]];return i}function P(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function M(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return t=+t,n>>>=0,o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return t=+t,n>>>=0,o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),d.prototype.readBigUInt64BE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),d.prototype.readBigInt64BE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=Q((function(e){return j(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=Q((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=Q((function(e){return j(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=Q((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=d.isBuffer(e)?e:d.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const B={};function q(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function V(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||$(t,e.length-(n+1))}(r,i,o)}function z(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=F(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function H(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Q(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},7579:(e,t,n)=>{var r=n(185);e.exports=function(e){var t,n="",i=e||{};return function(e,i,o,a,s,d,l,c){n=n+'<div class="branded-content"><div class="branded-content__title">'+r.escape(null==(t=l)?"":t)+'</div><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+r.attr("id",s,!0,!0)+r.attr("controls",!0,!0,!0)+' preload="false"'+r.attr("width",c,!0,!0)+r.attr("height",a,!0,!0)+r.attr("data-opts",i,!0,!0)+"><source"+r.attr("src",d,!0,!0)+' type="video/mp4"></video></div><div class="branded-content__description"><a'+r.attr("href",e,!0,!0)+' rel="nofollow" target="_blank">'+r.escape(null==(t=o)?"":t)+"</a></div></div>"}.call(this,"click"in i?i.click:"undefined"!=typeof click?click:void 0,"dataOpts"in i?i.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"description"in i?i.description:"undefined"!=typeof description?description:void 0,"height"in i?i.height:"undefined"!=typeof height?height:void 0,"id"in i?i.id:"undefined"!=typeof id?id:void 0,"src"in i?i.src:"undefined"!=typeof src?src:void 0,"title"in i?i.title:"undefined"!=typeof title?title:void 0,"width"in i?i.width:"undefined"!=typeof width?width:void 0),n}},8866:(e,t,n)=>{var r=n(185);e.exports=function(e){var t="",n=e||{};return function(e,n,i,o,a){t=t+'<div class="branded-content"><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+r.attr("id",i,!0,!0)+r.attr("controls",!0,!0,!0)+' preload="false"'+r.attr("width",a,!0,!0)+r.attr("height",n,!0,!0)+r.attr("data-opts",e,!0,!0)+"><source"+r.attr("src",o,!0,!0)+' type="video/mp4"></video></div></div>'}.call(this,"dataOpts"in n?n.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"height"in n?n.height:"undefined"!=typeof height?height:void 0,"id"in n?n.id:"undefined"!=typeof id?id:void 0,"src"in n?n.src:"undefined"!=typeof src?src:void 0,"width"in n?n.width:"undefined"!=typeof width?width:void 0),t}},8510:(e,t,n)=>{n(185),e.exports=function(e){return""+'<div style="position:fixed; z-index:999999; top:20px; left:20px; display: flex; flex-direction: column; "><div style="display: flex; flex-direction: row; gap: 10px;"><button id="debugRemoteButton" style="background-color:red; color:white; border:1px solid darkred; padding:10px;" onclick="debugRemoteButtonText.style.display = (debugRemoteButtonText.style.display === \'none\' ? \'flex\' : \'none\')">Mark as buggy</button><button id="leaveRemoteDebug" style="background-color:green; color:white; border:1px solid darkgreen; padding:10px; display: none">Leave debug mode</button></div><div id="debugRemoteButtonText" style="display:none; flex-direction: column; gap: 10px; align-items: flex-end; background-color: #ffebeb; padding: 15px; align-items: flex-end;"><textarea style="display:block; width:100%" placeholder="Description"></textarea><button style="background-color:red; color:white; display:block; border:1px solid darkred; padding:10px;">Confirm</button></div></div>'}},5732:(e,t,n)=>{n(185),e.exports=function(e){return""+'<div id="enterDebugRemoteContainer" style="margin:0 auto; position:fixed; left: 0; top: 0; width: 100%;height: 100%;z-index: 2147483647; display: flex; align-items: center; justify-content: center;"><div style="left: 0;top: 0;position: fixed;width: 100%;height: 100%;background-color: white;opacity: 0.8;z-index: -1;"></div><div style="border: 1px solid black; padding: 10px; background-color: white; display: flex; flex-direction: column; gap: 10px; padding: 15px;"><span style="font-size: 2em">Enter Ads debug mode</span><textarea id="debugRemoteLabel" style="font-size: 3em; display:block; width:100%" placeholder="Label" rows="1" onkeydown="if (event.key === \'Escape\') {closeDebugRemoteButton.click()}"></textarea><div style="font-size: 2em; display: flex; flex-direction: row; gap: 10px; align-items: flex-end; gap: 5px; justify-content: flex-end;"><button id="closeDebugRemoteButton" style="padding:10px;" onclick="window.enterDebugRemoteContainer.style.display = \'none\'">Cancel</button><button id="enterDebugRemoteButton" style="background-color:green; color:white; padding:10px;">Confirm</button></div></div></div>'}},7296:(e,t,n)=>{var r=n(185);e.exports=function(e){var t="",n=e||{};return function(e,n,i,o){t=t+'<video class="video-js"'+r.attr("controls",!0,!0,!0)+r.attr("disablePictureInPicture",!0,!0,!0)+r.attr("height",e,!0,!0)+r.attr("id",i,!0,!0)+r.attr("poster",n,!0,!0)+' preload="auto"'+r.attr("width",o,!0,!0)+'><p class="vjs-no-js">To view this video please enable JavaScript, \nand consider upgrading to a web browser that <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p></video>'}.call(this,"height"in n?n.height:"undefined"!=typeof height?height:void 0,"poster"in n?n.poster:"undefined"!=typeof poster?poster:void 0,"videoId"in n?n.videoId:"undefined"!=typeof videoId?videoId:void 0,"width"in n?n.width:"undefined"!=typeof width?width:void 0),t}},4314:(e,t,n)=>{var r=n(185);e.exports=function(e){var t="",n=e||{};return function(e,n,i,o){t=t+"<script>window.dataLayer = window.dataLayer || []\nwindow.dataLayer.push({\n  'gtm.start': new Date().getTime(),\n  event: 'gtm.js'\n})\nconst analytics = window['$$mm-analytics'] = window['$$mm-analytics'] || {}\nif (typeof analytics.firstEmbed === 'undefined') {\n  analytics.firstEmbed = Date.now()\n}\n<\/script><script"+r.attr("src",i,!0,!0)+'><\/script><iframe height="0" width="0"'+r.attr("src",n,!0,!0)+"></iframe><script"+(r.attr("async",!0,!0,!0)+r.attr("src",e,!0,!0))+"><\/script><script"+(r.attr("async",!0,!0,!0)+r.attr("src",o,!0,!0))+"><\/script>"}.call(this,"configScript"in n?n.configScript:"undefined"!=typeof configScript?configScript:void 0,"googleTagManagerIframeScript"in n?n.googleTagManagerIframeScript:"undefined"!=typeof googleTagManagerIframeScript?googleTagManagerIframeScript:void 0,"googleTagManagerScript"in n?n.googleTagManagerScript:"undefined"!=typeof googleTagManagerScript?googleTagManagerScript:void 0,"injectorScript"in n?n.injectorScript:"undefined"!=typeof injectorScript?injectorScript:void 0),t}},223:e=>{e.exports=function(e,t){var n=0,r={};e.addEventListener("message",(function(t){var n=t.data;if("RPC"===n.type)if(n.id){var i=r[n.id];i&&(delete r[n.id],n.error?i[1](Object.assign(Error(n.error.message),n.error)):i[0](n.result))}else{var o=document.createEvent("Event");o.initEvent(n.method,!1,!1),o.data=n.params,e.dispatchEvent(o)}})),t.forEach((function(t){e[t]=function(){var i=arguments;return new Promise((function(o,a){var s=++n;r[s]=[o,a],e.postMessage({type:"RPC",id:s,method:t,params:[].slice.call(i)})}))}}))}},5452:function(e,t){var n,r,i;!function(o,a){"use strict";r=[],void 0===(i="function"==typeof(n=function(){return function(){var e,t=navigator,n=t.connection||t.mozConnection||t.webkitConnection||{downlinkMax:1/0};if(!("downlinkMax"in n))if("bandwidth"in n)n.downlinkMax=8*n.bandwidth;else{switch(n.type){case"none":e=0;break;case"2g":e=.134;break;case"bluetooth":case"cellular":e=2;break;case"3g":e=8.95;break;case"4g":e=100;break;case"ethernet":e=550;break;case"wifi":e=600;break;default:e=1/0}n.downlinkMax=e}return n.downlinkMax}})?n.apply(t,r):n)||(e.exports=i)}()},3344:(e,t,n)=>{"use strict";var r=n(1024);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,i,o){if(n)e(n);else if(i.statusCode>=400&&i.statusCode<=599){var a=o;if(t)if(r.TextDecoder){var s=(void 0===(d=i.headers&&i.headers["content-type"])&&(d=""),d.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),r=n[0],i=n[1];return"charset"===r.trim()?i.trim():e}),"utf-8"));try{a=new TextDecoder(s).decode(o)}catch(e){}}else a=String.fromCharCode.apply(null,new Uint8Array(o));e({cause:a})}else e(null,o);var d}}},2705:(e,t,n)=>{"use strict";var r=n(1024),i=n(9162),o=n(685);d.httpHandler=n(3344);var a=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t};function s(e,t,n){var r=e;return o(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=i({},t,{uri:e}),r.callback=n,r}function d(e,t,n){return l(t=s(e,t,n))}function l(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),v)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function o(){if(!l){var t;clearTimeout(u),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=y,o=null;return 0!==t?(i={body:r(),statusCode:t,method:h,headers:{},url:p,rawRequest:c},c.getAllResponseHeaders&&(i.headers=a(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,i,i.body)}}var s,l,c=e.xhr||null;c||(c=e.cors||e.useXDR?new d.XDomainRequest:new d.XMLHttpRequest);var u,p=c.url=e.uri||e.url,h=c.method=e.method||"GET",f=e.body||e.data,g=c.headers=e.headers||{},m=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:h,url:p,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(o,0)},c.onload=o,c.onerror=i,c.onprogress=function(){},c.onabort=function(){l=!0},c.ontimeout=i,c.open(h,p,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(u=setTimeout((function(){if(!l){l=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),c.setRequestHeader)for(s in g)g.hasOwnProperty(s)&&c.setRequestHeader(s,g[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(f||null),c}e.exports=d,e.exports.default=d,d.XMLHttpRequest=r.XMLHttpRequest||function(){},d.XDomainRequest="withCredentials"in new d.XMLHttpRequest?d.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){d["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),l(n)}}))},2615:(e,t)=>{"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var r=n({HTML:"text/html",isHTML:function(e){return e===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var r=0;r<e.length;r++)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(t.call(void 0,i,r,e))return i}},t.freeze=n,t.MIME_TYPE=r,t.NAMESPACE=i},6279:(e,t,n)=>{var r=n(2615),i=n(5431),o=n(7172),a=n(8099),s=i.DOMImplementation,d=r.NAMESPACE,l=a.ParseError,c=a.XMLReader;function u(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function p(e){this.options=e||{locator:{}}}function h(){this.cdata=!1}function f(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function m(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function v(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}p.prototype.parseFromString=function(e,t){var n=this.options,r=new c,i=n.domBuilder||new h,a=n.errorHandler,s=n.locator,l=n.xmlns||{},p=/\/x?html?$/.test(t),f=p?o.HTML_ENTITIES:o.XML_ENTITIES;s&&i.setDocumentLocator(s),r.errorHandler=function(e,t,n){if(!e){if(t instanceof h)return t;e=t}var r={},i=e instanceof Function;function o(t){var o=e[t];!o&&i&&(o=2==e.length?function(n){e(t,n)}:e),r[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+g(n))}||function(){}}return n=n||{},o("warning"),o("error"),o("fatalError"),r}(a,i,s),r.domBuilder=n.domBuilder||i,p&&(l[""]=d.HTML),l.xml=l.xml||d.XML;var m=n.normalizeLineEndings||u;return e&&"string"==typeof e?r.parse(m(e),l,f):r.errorHandler.error("invalid doc source"),i.doc},h.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,o=i.createElementNS(e,n||t),a=r.length;v(this,o),this.currentElement=o,this.locator&&f(this.locator,o);for(var s=0;s<a;s++){e=r.getURI(s);var d=r.getValue(s),l=(n=r.getQName(s),i.createAttributeNS(e,n));this.locator&&f(r.getLocator(s),l),l.value=l.nodeValue=d,o.setAttributeNode(l)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&f(this.locator,n),v(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=m.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&f(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=m.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&f(this.locator,r),v(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&f(this.locator,i),v(this,i),this.doc.doctype=i}},warning:function(e){console.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new l(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){h.prototype[e]=function(){return null}})),t.DOMParser=p},5431:(e,t,n)=>{var r=n(2615),i=r.find,o=r.NAMESPACE;function a(e){return""!==e}function s(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function d(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(a):[]}(e);return Object.keys(t.reduce(s,{}))}function l(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function c(e,t){var n=e.prototype;if(!(n instanceof t)){function r(){}r.prototype=t.prototype,l(n,r=new r),e.prototype=n=r}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var u={},p=u.ELEMENT_NODE=1,h=u.ATTRIBUTE_NODE=2,f=u.TEXT_NODE=3,g=u.CDATA_SECTION_NODE=4,m=u.ENTITY_REFERENCE_NODE=5,v=u.ENTITY_NODE=6,y=u.PROCESSING_INSTRUCTION_NODE=7,b=u.COMMENT_NODE=8,_=u.DOCUMENT_NODE=9,w=u.DOCUMENT_TYPE_NODE=10,S=u.DOCUMENT_FRAGMENT_NODE=11,T=u.NOTATION_NODE=12,I={},k={},A=(I.INDEX_SIZE_ERR=(k[1]="Index size error",1),I.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2),I.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3)),E=(I.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),I.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),I.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),I.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7),I.NOT_FOUND_ERR=(k[8]="Not found",8)),C=(I.NOT_SUPPORTED_ERR=(k[9]="Not supported",9),I.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10));function x(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,k[e]),this.message=k[e],Error.captureStackTrace&&Error.captureStackTrace(this,x);return n.code=e,t&&(this.message=this.message+": "+t),n}function O(){}function P(e,t){this._node=e,this._refresh=t,D(this)}function D(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var n=e._refresh(e._node);if(ye(e,"length",n.length),!e.$$length||n.length<e.$$length)for(var r=n.length;r in e;r++)Object.prototype.hasOwnProperty.call(e,r)&&delete e[r];l(n,e),e._inc=t}}function R(){}function j(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function M(e,t,n,r){if(r?t[j(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&V(i,e,r),function(e,t,n){e&&e._inc++,n.namespaceURI===o.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function N(e,t,n){var r=j(t,n);if(!(r>=0))throw new x(E,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var o=e.ownerDocument;o&&(V(o,e,n),n.ownerElement=null)}}function U(){}function L(){}function B(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function q(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(q(e,t))return!0}while(e=e.nextSibling)}function F(){this.ownerDocument=this}function V(e,t,n,r){e&&e._inc++,n.namespaceURI===o.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function z(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o,delete r[r.length]}}}function $(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,z(e.ownerDocument,e),t}function W(e){return e&&e.nodeType===L.DOCUMENT_TYPE_NODE}function H(e){return e&&e.nodeType===L.ELEMENT_NODE}function G(e){return e&&e.nodeType===L.TEXT_NODE}function X(e,t){var n=e.childNodes||[];if(i(n,H)||W(t))return!1;var r=i(n,W);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function J(e,t){var n=e.childNodes||[];if(i(n,(function(e){return H(e)&&e!==t})))return!1;var r=i(n,W);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function K(e,t,n){var r=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===L.DOCUMENT_FRAGMENT_NODE){var a=o.filter(H);if(a.length>1||i(o,G))throw new x(A,"More than one element or text in fragment");if(1===a.length&&!X(e,n))throw new x(A,"Element in fragment can not be inserted before doctype")}if(H(t)&&!X(e,n))throw new x(A,"Only one element can be added and only after doctype");if(W(t)){if(i(r,W))throw new x(A,"Only one doctype is allowed");var s=i(r,H);if(n&&r.indexOf(s)<r.indexOf(n))throw new x(A,"Doctype can only be inserted before an element");if(!n&&s)throw new x(A,"Doctype can not be appended since element is present")}}function Y(e,t,n){var r=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===L.DOCUMENT_FRAGMENT_NODE){var a=o.filter(H);if(a.length>1||i(o,G))throw new x(A,"More than one element or text in fragment");if(1===a.length&&!J(e,n))throw new x(A,"Element in fragment can not be inserted before doctype")}if(H(t)&&!J(e,n))throw new x(A,"Only one element can be added and only after doctype");if(W(t)){if(i(r,(function(e){return W(e)&&e!==n})))throw new x(A,"Only one doctype is allowed");var s=i(r,H);if(n&&r.indexOf(s)<r.indexOf(n))throw new x(A,"Doctype can only be inserted before an element")}}function Q(e,t,n,r){(function(e,t,n){if(!function(e){return e&&(e.nodeType===L.DOCUMENT_NODE||e.nodeType===L.DOCUMENT_FRAGMENT_NODE||e.nodeType===L.ELEMENT_NODE)}(e))throw new x(A,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new x(E,"child not in parent");if(!function(e){return e&&(H(e)||G(e)||W(e)||e.nodeType===L.DOCUMENT_FRAGMENT_NODE||e.nodeType===L.COMMENT_NODE||e.nodeType===L.PROCESSING_INSTRUCTION_NODE)}(t)||W(t)&&e.nodeType!==L.DOCUMENT_NODE)throw new x(A,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,n),e.nodeType===L.DOCUMENT_NODE&&(r||K)(e,t,n);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===S){var o=t.firstChild;if(null==o)return t;var a=t.lastChild}else o=a=t;var s=n?n.previousSibling:e.lastChild;o.previousSibling=s,a.nextSibling=n,s?s.nextSibling=o:e.firstChild=o,null==n?e.lastChild=a:n.previousSibling=a;do{o.parentNode=e}while(o!==a&&(o=o.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==S&&(t.firstChild=t.lastChild=null),t}function Z(){this._nsMap={}}function ee(){}function te(){}function ne(){}function re(){}function ie(){}function oe(){}function ae(){}function se(){}function de(){}function le(){}function ce(){}function ue(){}function pe(e,t){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return ge(this,n,e,t,a),n.join("")}function he(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!i)return!1;if("xml"===r&&i===o.XML||i===o.XMLNS)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix===r)return s.namespace!==i}return!0}function fe(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,B),'"')}function ge(e,t,n,r,i){if(i||(i=[]),r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case p:var a=e.attributes,s=a.length,d=e.firstChild,l=e.tagName,c=l;if(!(n=o.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var u,v=0;v<a.length;v++)if("xmlns"===a.item(v).name){u=a.item(v).value;break}if(!u)for(var T=i.length-1;T>=0;T--)if(""===(I=i[T]).prefix&&I.namespace===e.namespaceURI){u=I.namespace;break}if(u!==e.namespaceURI)for(T=i.length-1;T>=0;T--){var I;if((I=i[T]).namespace===e.namespaceURI){I.prefix&&(c=I.prefix+":"+l);break}}}t.push("<",c);for(var k=0;k<s;k++)"xmlns"==(A=a.item(k)).prefix?i.push({prefix:A.localName,namespace:A.value}):"xmlns"==A.nodeName&&i.push({prefix:"",namespace:A.value});for(k=0;k<s;k++){var A,E,C;he(A=a.item(k),0,i)&&(fe(t,(E=A.prefix||"")?"xmlns:"+E:"xmlns",C=A.namespaceURI),i.push({prefix:E,namespace:C})),ge(A,t,n,r,i)}if(l===c&&he(e,0,i)&&(fe(t,(E=e.prefix||"")?"xmlns:"+E:"xmlns",C=e.namespaceURI),i.push({prefix:E,namespace:C})),d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;d;)d.data?t.push(d.data):ge(d,t,n,r,i.slice()),d=d.nextSibling;else for(;d;)ge(d,t,n,r,i.slice()),d=d.nextSibling;t.push("</",c,">")}else t.push("/>");return;case _:case S:for(d=e.firstChild;d;)ge(d,t,n,r,i.slice()),d=d.nextSibling;return;case h:return fe(t,e.name,e.value);case f:return t.push(e.data.replace(/[<&>]/g,B));case g:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case w:var x=e.publicId,O=e.systemId;if(t.push("<!DOCTYPE ",e.name),x)t.push(" PUBLIC ",x),O&&"."!=O&&t.push(" ",O),t.push(">");else if(O&&"."!=O)t.push(" SYSTEM ",O,">");else{var P=e.internalSubset;P&&t.push(" [",P,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function me(e,t,n){var r;switch(t.nodeType){case p:(r=t.cloneNode(!1)).ownerDocument=e;case S:break;case h:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(me(e,i,n)),i=i.nextSibling;return r}function ve(e,t,n){var r=new t.constructor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];"object"!=typeof o&&o!=r[i]&&(r[i]=o)}switch(t.childNodes&&(r.childNodes=new O),r.ownerDocument=e,r.nodeType){case p:var a=t.attributes,s=r.attributes=new R,d=a.length;s._ownerElement=r;for(var l=0;l<d;l++)r.setAttributeNode(ve(e,a.item(l),!0));break;case h:n=!0}if(n)for(var c=t.firstChild;c;)r.appendChild(ve(e,c,n)),c=c.nextSibling;return r}function ye(e,t,n){e[t]=n}I.INVALID_STATE_ERR=(k[11]="Invalid state",11),I.SYNTAX_ERR=(k[12]="Syntax error",12),I.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),I.NAMESPACE_ERR=(k[14]="Invalid namespace",14),I.INVALID_ACCESS_ERR=(k[15]="Invalid access",15),x.prototype=Error.prototype,l(I,x),O.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ge(this[r],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},P.prototype.item=function(e){return D(this),this[e]||null},c(P,O),R.prototype={length:0,item:O.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new x(C);var n=this.getNamedItem(e.nodeName);return M(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new x(C);return t=this.getNamedItemNS(e.namespaceURI,e.localName),M(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return N(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return N(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},U.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var r=new F;if(r.implementation=this,r.childNodes=new O,r.doctype=n||null,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new oe;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=n||"",r}},L.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Q(this,e,t)},replaceChild:function(e,t){Q(this,e,t,Y),t&&this.removeChild(t)},removeChild:function(e){return $(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ve(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==f&&e.nodeType==f?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===e)return r;t=t.nodeType==h?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==h?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},l(u,L),l(u,L.prototype),F.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==S){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return Q(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===p&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),$(this,e)},replaceChild:function(e,t){Q(this,e,t,Y),e.ownerDocument=this,t&&this.removeChild(t),H(e)&&(this.documentElement=e)},importNode:function(e,t){return me(this,e,t)},getElementById:function(e){var t=null;return q(this.documentElement,(function(n){if(n.nodeType==p&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=d(e);return new P(this,(function(n){var r=[];return t.length>0&&q(n.documentElement,(function(i){if(i!==n&&i.nodeType===p){var o=i.getAttribute("class");if(o){var a=e===o;if(!a){var s=d(o);a=t.every((l=s,function(e){return l&&-1!==l.indexOf(e)}))}a&&r.push(i)}}var l})),r}))},createElement:function(e){var t=new Z;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new O,(t.attributes=new R)._ownerElement=t,t},createDocumentFragment:function(){var e=new le;return e.ownerDocument=this,e.childNodes=new O,e},createTextNode:function(e){var t=new ne;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ce;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ee;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new de;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Z,r=t.split(":"),i=n.attributes=new R;return n.childNodes=new O,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new ee,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},c(F,L),Z.prototype={nodeType:p,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===S?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new P(this,(function(t){var n=[];return q(t,(function(r){r===t||r.nodeType!=p||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new P(this,(function(n){var r=[];return q(n,(function(i){i===n||i.nodeType!==p||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}},F.prototype.getElementsByTagName=Z.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=Z.prototype.getElementsByTagNameNS,c(Z,L),ee.prototype.nodeType=h,c(ee,L),te.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(k[A])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},c(te,L),ne.prototype={nodeName:"#text",nodeType:f,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},c(ne,te),re.prototype={nodeName:"#comment",nodeType:b},c(re,te),ie.prototype={nodeName:"#cdata-section",nodeType:g},c(ie,te),oe.prototype.nodeType=w,c(oe,L),ae.prototype.nodeType=T,c(ae,L),se.prototype.nodeType=v,c(se,L),de.prototype.nodeType=m,c(de,L),le.prototype.nodeName="#document-fragment",le.prototype.nodeType=S,c(le,L),ce.prototype.nodeType=y,c(ce,L),ue.prototype.serializeToString=function(e,t,n){return pe.call(e,t,n)},L.prototype.toString=pe;try{if(Object.defineProperty){function be(e){switch(e.nodeType){case p:case S:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(be(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(P.prototype,"length",{get:function(){return D(this),this.$$length}}),Object.defineProperty(L.prototype,"textContent",{get:function(){return be(this)},set:function(e){switch(this.nodeType){case p:case S:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ye=function(e,t,n){e["$$"+t]=n}}}catch(_e){}t.DocumentType=oe,t.DOMException=x,t.DOMImplementation=U,t.Element=Z,t.Node=L,t.NodeList=O,t.XMLSerializer=ue},7172:(e,t,n)=>{"use strict";var r=n(2615).freeze;t.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=r({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES},6039:(e,t,n)=>{var r=n(5431);r.DOMImplementation,r.XMLSerializer,t.DOMParser=n(6279).DOMParser},8099:(e,t,n)=>{var r=n(2615).NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+i.source+o.source+"*(?::"+i.source+o.source+"*)?$");function s(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function d(){}function l(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,n,i,o,a){function s(e,t,r){n.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,o),r)}for(var d,l=++t,c=0;;){var u=e.charAt(l);switch(u){case"=":if(1===c)d=e.slice(t,l),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(a.warning('attribute value must after "="'),d=e.slice(t,l)),t=l+1,!((l=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");s(d,p=e.slice(t,l),t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');s(d,p=e.slice(t,l),t),a.warning('attribute "'+d+'" missed start quot('+u+")!!"),t=l+1,c=5}break;case"/":switch(c){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:c=7,n.closed=!0;case 4:case 1:break;case 2:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==c&&n.setTagName(e.slice(t,l)),l;case">":switch(c){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,l)).slice(-1)&&(n.closed=!0,p=p.slice(0,-1));case 2:2===c&&(p=d),4==c?(a.warning('attribute "'+p+'" missed quot(")!'),s(d,p,t)):(r.isHTML(i[""])&&p.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),s(p,p,t));break;case 3:throw new Error("attribute value missed!!")}return l;case"":u=" ";default:if(u<=" ")switch(c){case 0:n.setTagName(e.slice(t,l)),c=6;break;case 1:d=e.slice(t,l),c=2;break;case 4:var p=e.slice(t,l);a.warning('attribute "'+p+'" missed quot(")!!'),s(d,p,t);case 5:c=6}else switch(c){case 2:n.tagName,r.isHTML(i[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),s(d,d,t),t=l,c=1;break;case 5:a.warning('attribute space is required"'+d+'"!!');case 6:c=1,t=l;break;case 3:c=4,t=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function u(e,t,n){for(var i=e.tagName,o=null,a=e.length;a--;){var s=e[a],d=s.qName,l=s.value;if((h=d.indexOf(":"))>0)var c=s.prefix=d.slice(0,h),u=d.slice(h+1),p="xmlns"===c&&u;else u=d,c=null,p="xmlns"===d&&"";s.localName=u,!1!==p&&(null==o&&(o={},f(n,n={})),n[p]=o[p]=l,s.uri=r.XMLNS,t.startPrefixMapping(p,l))}for(a=e.length;a--;)(c=(s=e[a]).prefix)&&("xml"===c&&(s.uri=r.XML),"xmlns"!==c&&(s.uri=n[c||""]));var h;(h=i.indexOf(":"))>0?(c=e.prefix=i.slice(0,h),u=e.localName=i.slice(h+1)):(c=null,u=e.localName=i);var g=e.uri=n[c||""];if(t.startElement(g,u,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(g,u,i),o)for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&t.endPrefixMapping(c)}function p(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return t+1}function h(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function f(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function g(e,t,n,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var o=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],d=!1,l=!1;a>3&&(/^public$/i.test(o[2][0])?(d=o[3][0],l=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(l=o[3][0]));var c=o[a-1];return n.startDTD(s,d,l),n.endDTD(),c.index+c[0].length}return-1}function m(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function v(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,d.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),f(t,t={}),function(e,t,n,i,o){function a(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function d(t){if(t>I){var n=e.substring(I,t).replace(/&#?\w+;/g,a);w&&f(I),i.characters(n,0,t-I),I=t}}function f(t,n){for(;t>=b&&(n=_.exec(e));)y=n.index,b=y+n[0].length,w.lineNumber++;w.columnNumber=t-y+1}for(var y=0,b=0,_=/.*(?:\r\n?|\n)|.*$/g,w=i.locator,S=[{currentNSMap:t}],T={},I=0;;){try{var k=e.indexOf("<",I);if(k<0){if(!e.substr(I).match(/^\s*$/)){var A=i.doc,E=A.createTextNode(e.substr(I));A.appendChild(E),i.currentElement=E}return}switch(k>I&&d(k),e.charAt(k+1)){case"/":var C=e.indexOf(">",k+3),x=e.substring(k+2,C).replace(/[ \t\n\r]+$/g,""),O=S.pop();C<0?(x=e.substring(k+2).replace(/[\s<].*/,""),o.error("end tag name: "+x+" is not complete:"+O.tagName),C=k+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,""),o.error("end tag name: "+x+" maybe not complete"),C=k+1+x.length);var P=O.localNSMap,D=O.tagName==x;if(D||O.tagName&&O.tagName.toLowerCase()==x.toLowerCase()){if(i.endElement(O.uri,O.localName,x),P)for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&i.endPrefixMapping(R);D||o.fatalError("end tag name: "+x+" is not match the current start tagName:"+O.tagName)}else S.push(O);C++;break;case"?":w&&f(k),C=m(e,k,i);break;case"!":w&&f(k),C=g(e,k,i,o);break;default:w&&f(k);var j=new v,M=S[S.length-1].currentNSMap,N=(C=c(e,k,j,M,a,o),j.length);if(!j.closed&&h(e,C,j.tagName,T)&&(j.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),w&&N){for(var U=l(w,{}),L=0;L<N;L++){var B=j[L];f(B.offset),B.locator=l(w,{})}i.locator=U,u(j,i,M)&&S.push(j),i.locator=w}else u(j,i,M)&&S.push(j);r.isHTML(j.uri)&&!j.closed?C=p(e,C,j.tagName,a,i):C++}}catch(e){if(e instanceof s)throw e;o.error("element parse error: "+e),C=-1}C>I?I=C:d(Math.max(k,I)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},v.prototype={setTagName:function(e){if(!a.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!a.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=d,t.ParseError=s},2936:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],d=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,d)),c=0,u=d>0?a-4:a;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===d&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===d&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,l=r-i;s<l;s+=a)o.push(d(e,s,s+a>l?l:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},1563:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=d(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,l=c,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var d=o[e];if(void 0===d)return!1;if("function"==typeof d)r(d,this,t);else{var l=d.length,c=f(d,l);for(n=0;n<l;++n)r(c[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},381:e=>{s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks",n=Object.freeze({useProxy:!0,ready:0}),r=new WeakMap,i="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,r=Object(this),i=r.length>>>0,o=0;if(t)n=t;else{for(;o<i&&!(o in r);)o++;n=r[o++]}for(;o<i;)o in r&&(n=e(n,r[o],o,r)),o++;return n};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function s(e){var d,l={},c=[];function u(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,n){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var i={},o=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==o.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var r=t.split(":"),o=r[0],a=r[1]||"sync";if(!i[o]){var s=e[o];i[o]=e[o]=g(a,s,n?[n,o]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return i}function h(e){var n=Array.isArray(e)?e:e.split(".");return i.call(n,(function(r,i,o){var a=r[i],s=!1;return a||(o===n.length-1?(d||c.push((function(){s||console.warn(t+": referenced '"+e+"' but it was never created")})),r[i]=f((function(e){r[i]=e,s=!0}))):r[i]={})}),l)}function f(e){var t=[],n=[],i=function(){},o={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,n,"after",e,t)},getHooks:function(e){var r=t.concat(n);"object"==typeof e&&(r=r.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{a(r,{remove:function(){return r.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},s={install:function(r,o,a){this.type=r,i=a,a(t,n),e&&e(o)}};return r.set(o.after,s),o;function d(e,r,o,a){var s={hook:o,type:r,priority:a||10,remove:function(){var r=e.indexOf(s);-1!==r&&(e.splice(r,1),i(t,n))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),i(t,n),this}}function g(n,i,l){var u=i.after&&r.get(i.after);if(u){if(u.type!==n)throw t+": recreated hookable with different type";return i}var p,g,m=l?h(l):f(),v={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return d||c.push(y),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?g=new Proxy(i,v):(g=function(){return v.apply?v.apply(i,this,o(arguments)):i.apply(this,arguments)},a(g,m)),r.get(g.after).install(n,g,(function(e,t){var r,i=[];function a(e){i.push(e.hook)}e.length||t.length?(e.forEach(a),r=i.push(void 0)-1,t.forEach(a),p=function(e,t,a){var s,d=0,l="async"===n&&"function"==typeof a[a.length-1]&&a.pop();function c(e){"sync"===n?s=e:l&&l.apply(null,arguments)}function u(e){if(i[d]){var r=o(arguments);return u.bail=c,r.unshift(u),i[d++].apply(t,r)}"sync"===n?s=e:l&&l.apply(null,arguments)}return i[r]=function(){var r=o(arguments,1);"async"===n&&l&&(delete u.bail,r.push(u));var i=e.apply(t,r);"sync"===n&&u(i)},u.apply(null,a),s}):p=void 0,y()})),g;function y(){!d&&("sync"!==n||e.ready&s.SYNC)&&("async"!==n||e.ready&s.ASYNC)?"sync"!==n&&e.ready&s.QUEUE?v.apply=function(){var e=arguments;c.push((function(){g.apply(e[1],e[2])}))}:v.apply=function(){throw t+": hooked function not ready"}:v.apply=p}}return(e=a({},n,e)).ready?u.ready=function(){d=!0,function(e){for(var t;t=e.shift();)t()}(c)}:d=!0,u.get=h,u}e.exports=s},5889:(e,t,n)=>{var r,i=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},o=n(2498);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=r},1024:(e,t,n)=>{var r;r="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=r},2918:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,d=(1<<s)-1,l=d>>1,c=-7,u=n?i-1:0,p=n?-1:1,h=e[t+u];for(u+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+u],u+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+u],u+=p,c-=8);if(0===o)o=1-l;else{if(o===d)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,d,l=8*o-i-1,c=(1<<l)-1,u=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),(t+=a+u>=1?p/d:p*Math.pow(2,1-u))*d>=2&&(a++,d/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(t*d-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=f,a/=256,l-=8);e[n+h-f]|=128*g}},6433:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},685:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},4278:(e,t)=>{function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,o=String(e);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var o;if(o=r[t.toLowerCase()])return o===n;if(o=i[t.toLowerCase()])return o===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=t.names=t.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]},8841:function(e){!function(t){var n,r={},i={16:!1,18:!1,17:!1,91:!1},o="all",a={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},d=function(e){return s[e]||e.toUpperCase().charCodeAt(0)},l=[];for(n=1;n<20;n++)s["f"+n]=111+n;function c(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function u(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var p={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function h(e){for(n in i)i[n]=e[p[n]]}function f(e,t,n){var i,o;i=m(e),void 0===n&&(n=t,t="all");for(var a=0;a<i.length;a++)o=[],(e=i[a].split("+")).length>1&&(o=v(e),e=[e[e.length-1]]),e=e[0],(e=d(e))in r||(r[e]=[]),r[e].push({shortcut:i[a],scope:t,method:n,key:i[a],mods:o})}for(n in a)f[n]=!1;function g(){return o||"all"}function m(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=a[t[n]];return t}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}y(document,"keydown",(function(e){!function(e){var t,n,o,s,d,u;if(t=e.keyCode,-1==c(l,t)&&l.push(t),93!=t&&224!=t||(t=91),t in i)for(o in i[t]=!0,a)a[o]==t&&(f[o]=!0);else if(h(e),f.filter.call(this,e)&&t in r)for(u=g(),s=0;s<r[t].length;s++)if((n=r[t][s]).scope==u||"all"==n.scope){for(o in d=n.mods.length>0,i)(!i[o]&&c(n.mods,+o)>-1||i[o]&&-1==c(n.mods,+o))&&(d=!1);(0!=n.mods.length||i[16]||i[18]||i[17]||i[91])&&!d||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),y(document,"keyup",(function(e){var t,n=e.keyCode,r=c(l,n);if(r>=0&&l.splice(r,1),93!=n&&224!=n||(n=91),n in i)for(t in i[n]=!1,a)a[t]==n&&(f[t]=!1)})),y(window,"focus",(function(){for(n in i)i[n]=!1;for(n in a)f[n]=!1}));var b=t.key;t.key=f,t.key.setScope=function(e){o=e||"all"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,i;for(t in r)for(n=r[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=d(e)),-1!=c(l,e)},t.key.getPressedKeyCodes=function(){return l.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var n,i,o,a,s,l=[];for(n=m(e),a=0;a<n.length;a++){if((i=n[a].split("+")).length>1&&(l=v(i),e=i[i.length-1]),e=d(e),void 0===t&&(t=g()),!r[e])return;for(o=0;o<r[e].length;o++)(s=r[e][o]).scope===t&&u(s.mods,l)&&(r[e][o]={})}},e.exports=f}(this)},7294:(e,t,n)=>{var r,i="__lodash_hash_undefined__",o=1/0,a="[object Function]",s="[object GeneratorFunction]",d="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,m="object"==typeof self&&self&&self.Object===Object&&self,v=g||m||Function("return this")(),y=Array.prototype,b=Function.prototype,_=Object.prototype,w=v["__core-js_shared__"],S=(r=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",T=b.toString,I=_.hasOwnProperty,k=_.toString,A=RegExp("^"+T.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=v.Symbol,C=y.splice,x=L(v,"Map"),O=L(Object,"create"),P=E?E.prototype:void 0,D=P?P.toString:void 0;function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function N(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function U(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function L(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!z(e)||S&&S in e)return!1;var t=function(e){var t=z(e)?k.call(e):"";return t==a||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?A:f;return t.test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}R.prototype.clear=function(){this.__data__=O?O(null):{}},R.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},R.prototype.get=function(e){var t=this.__data__;if(O){var n=t[e];return n===i?void 0:n}return I.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:I.call(t,e)},R.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?i:t,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(e){var t=this.__data__,n=N(t,e);return!(n<0||(n==t.length-1?t.pop():C.call(t,n,1),0))},j.prototype.get=function(e){var t=this.__data__,n=N(t,e);return n<0?void 0:t[n][1]},j.prototype.has=function(e){return N(this.__data__,e)>-1},j.prototype.set=function(e,t){var n=this.__data__,r=N(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new R,map:new(x||j),string:new R}},M.prototype.delete=function(e){return U(this,e).delete(e)},M.prototype.get=function(e){return U(this,e).get(e)},M.prototype.has=function(e){return U(this,e).has(e)},M.prototype.set=function(e,t){return U(this,e).set(e,t),this};var B=F((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if($(e))return D?D.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(p,(function(e,t,r,i){n.push(r?i.replace(h,"$1"):t||e)})),n}));function q(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function F(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(F.Cache||M),n}F.Cache=M;var V=Array.isArray;function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&k.call(e)==d}e.exports=function(e,t,n){var r=null==e?void 0:function(e,t){var n;t=function(e,t){if(V(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!$(e))||c.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:V(n=t)?n:B(n);for(var r=0,i=t.length;null!=e&&r<i;)e=e[q(t[r++])];return r&&r==i?e:void 0}(e,t);return void 0===r?n:r}},6704:(e,t,n)=>{var r="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,l=s||d||Function("return this")();function c(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,p);for(var r=-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t)>-1}function u(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function p(e){return e!=e}function h(e,t){return e.has(t)}var f,g=Array.prototype,m=Function.prototype,v=Object.prototype,y=l["__core-js_shared__"],b=(f=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",_=m.toString,w=v.hasOwnProperty,S=v.toString,T=RegExp("^"+_.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=g.splice,k=Math.max,A=Math.min,E=N(l,"Map"),C=N(Object,"create");function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.__data__=new P;++t<n;)this.add(e[t])}function R(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function j(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!q(e)}(e)}(e)?e:[]}function M(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!F(e)||b&&b in e)return!1;var t=q(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?T:a;return t.test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}x.prototype.clear=function(){this.__data__=C?C(null):{}},x.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},x.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return n===r?void 0:n}return w.call(t,e)?t[e]:void 0},x.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:w.call(t,e)},x.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?r:t,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(e){var t=this.__data__,n=R(t,e);return!(n<0||(n==t.length-1?t.pop():I.call(t,n,1),0))},O.prototype.get=function(e){var t=this.__data__,n=R(t,e);return n<0?void 0:t[n][1]},O.prototype.has=function(e){return R(this.__data__,e)>-1},O.prototype.set=function(e,t){var n=this.__data__,r=R(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},P.prototype.clear=function(){this.__data__={hash:new x,map:new(E||O),string:new x}},P.prototype.delete=function(e){return M(this,e).delete(e)},P.prototype.get=function(e){return M(this,e).get(e)},P.prototype.has=function(e){return M(this,e).has(e)},P.prototype.set=function(e,t){return M(this,e).set(e,t),this},D.prototype.add=D.prototype.push=function(e){return this.__data__.set(e,r),this},D.prototype.has=function(e){return this.__data__.has(e)};var U,L,B=(U=function(e){var t=u(e,j);return t.length&&t[0]===e[0]?function(e,t,n){for(var r=c,i=e[0].length,o=e.length,a=o,s=Array(o),d=1/0,l=[];a--;){var u=e[a];d=A(u.length,d),s[a]=i>=120&&u.length>=120?new D(a&&u):void 0}u=e[0];var p=-1,f=s[0];e:for(;++p<i&&l.length<d;){var g=u[p],m=g;if(g=0!==g?g:0,!(f?h(f,m):r(l,m,n))){for(a=o;--a;){var v=s[a];if(!(v?h(v,m):r(e[a],m,n)))continue e}f&&f.push(m),l.push(g)}}return l}(t):[]},L=k(void 0===L?U.length-1:L,0),function(){for(var e=arguments,t=-1,n=k(e.length-L,0),r=Array(n);++t<n;)r[t]=e[L+t];t=-1;for(var i=Array(L+1);++t<L;)i[t]=e[t];return i[L]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(U,this,i)});function q(e){var t=F(e)?S.call(e):"";return t==i||t==o}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=B},4042:(e,t,n)=>{var r,i="__lodash_hash_undefined__",o="[object Function]",a="[object GeneratorFunction]",s=/^\[object .+?Constructor\]$/,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=d||l||Function("return this")(),u=Array.prototype,p=Function.prototype,h=Object.prototype,f=c["__core-js_shared__"],g=(r=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",m=p.toString,v=h.hasOwnProperty,y=h.toString,b=RegExp("^"+m.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=u.splice,w=C(c,"Map"),S=C(Object,"create");function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function E(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function C(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!O(e)||g&&g in e)return!1;var t=function(e){var t=O(e)?y.call(e):"";return t==o||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?b:s;return t.test(function(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function x(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(x.Cache||k),n}function O(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}T.prototype.clear=function(){this.__data__=S?S(null):{}},T.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},T.prototype.get=function(e){var t=this.__data__;if(S){var n=t[e];return n===i?void 0:n}return v.call(t,e)?t[e]:void 0},T.prototype.has=function(e){var t=this.__data__;return S?void 0!==t[e]:v.call(t,e)},T.prototype.set=function(e,t){return this.__data__[e]=S&&void 0===t?i:t,this},I.prototype.clear=function(){this.__data__=[]},I.prototype.delete=function(e){var t=this.__data__,n=A(t,e);return!(n<0||(n==t.length-1?t.pop():_.call(t,n,1),0))},I.prototype.get=function(e){var t=this.__data__,n=A(t,e);return n<0?void 0:t[n][1]},I.prototype.has=function(e){return A(this.__data__,e)>-1},I.prototype.set=function(e,t){var n=this.__data__,r=A(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new T,map:new(w||I),string:new T}},k.prototype.delete=function(e){return E(this,e).delete(e)},k.prototype.get=function(e){return E(this,e).get(e)},k.prototype.has=function(e){return E(this,e).has(e)},k.prototype.set=function(e,t){return E(this,e).set(e,t),this},x.Cache=k,e.exports=x},2149:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",d="[object GeneratorFunction]",l="[object Null]",c="[object Object]",u="[object Proxy]",p="[object Undefined]",h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[o]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g[s]=g["[object Map]"]=g["[object Number]"]=g[c]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;var m,v,y,b="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,w=b||_||Function("return this")(),S=t&&!t.nodeType&&t,T=S&&e&&!e.nodeType&&e,I=T&&T.exports===S,k=I&&b.process,A=function(){try{return T&&T.require&&T.require("util").types||k&&k.binding&&k.binding("util")}catch(e){}}(),E=A&&A.isTypedArray,C=Array.prototype,x=Function.prototype,O=Object.prototype,P=w["__core-js_shared__"],D=x.toString,R=O.hasOwnProperty,j=(m=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",M=O.toString,N=D.call(Object),U=RegExp("^"+D.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=I?w.Buffer:void 0,B=w.Symbol,q=w.Uint8Array,F=(L&&L.allocUnsafe,v=Object.getPrototypeOf,y=Object,function(e){return v(y(e))}),V=Object.create,z=O.propertyIsEnumerable,$=C.splice,W=B?B.toStringTag:void 0,H=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),G=L?L.isBuffer:void 0,X=Math.max,J=Date.now,K=pe(w,"Map"),Y=pe(Object,"create"),Q=function(){function e(){}return function(t){if(!Ie(t))return{};if(V)return V(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function re(e,t,n){(void 0!==n&&!ve(e[t],n)||void 0===n&&!(t in e))&&ae(e,t,n)}function ie(e,t,n){var r=e[t];R.call(e,t)&&ve(r,n)&&(void 0!==n||t in e)||ae(e,t,n)}function oe(e,t){for(var n=e.length;n--;)if(ve(e[n][0],t))return n;return-1}function ae(e,t,n){"__proto__"==t&&H?H(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Z.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},Z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Z.prototype.get=function(e){var t=this.__data__;if(Y){var n=t[e];return n===r?void 0:n}return R.call(t,e)?t[e]:void 0},Z.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:R.call(t,e)},Z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Y&&void 0===t?r:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=oe(t,e);return!(n<0||(n==t.length-1?t.pop():$.call(t,n,1),--this.size,0))},ee.prototype.get=function(e){var t=this.__data__,n=oe(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return oe(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,r=oe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(K||ee),string:new Z}},te.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ue(this,e).get(e)},te.prototype.has=function(e){return ue(this,e).has(e)},te.prototype.set=function(e,t){var n=ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};function se(e){return null==e?void 0===e?p:l:W&&W in Object(e)?function(e){var t=R.call(e,W),n=e[W];try{e[W]=void 0;var r=!0}catch(e){}var i=M.call(e);return r&&(t?e[W]=n:delete e[W]),i}(e):function(e){return M.call(e)}(e)}function de(e){return ke(e)&&se(e)==o}function le(e,t,n,r,i){e!==t&&function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}}(t,(function(o,a){if(i||(i=new ne),Ie(o))!function(e,t,n,r,i,o,a){var s=ge(e,n),d=ge(t,n),l=a.get(d);if(l)re(e,n,l);else{var u,p,h,f,g,m=o?o(s,d,n+"",e,t,a):void 0,v=void 0===m;if(v){var y=be(d),b=!y&&we(d),_=!y&&!b&&Ae(d);m=d,y||b||_?be(s)?m=s:ke(g=s)&&_e(g)?m=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):b?(v=!1,m=function(e,t){return e.slice()}(d)):_?(v=!1,f=new(h=(u=d).buffer).constructor(h.byteLength),new q(f).set(new q(h)),p=f,m=new u.constructor(p,u.byteOffset,u.length)):m=[]:function(e){if(!ke(e)||se(e)!=c)return!1;var t=F(e);if(null===t)return!0;var n=R.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&D.call(n)==N}(d)||ye(d)?(m=s,ye(s)?m=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],d=void 0;void 0===d&&(d=e[s]),i?ae(n,s,d):ie(n,s,d)}return n}(e,Ee(e))}(s):Ie(s)&&!Se(s)||(m=function(e){return"function"!=typeof e.constructor||fe(e)?{}:Q(F(e))}(d))):v=!1}v&&(a.set(d,m),i(m,d,r,o,a),a.delete(d)),re(e,n,m)}}(e,t,a,n,le,r,i);else{var s=r?r(ge(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),re(e,a,s)}}),Ee)}var ce=H?function(e,t){return H(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Oe;function ue(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ie(e)||function(e){return!!j&&j in e}(e))&&(Se(e)?U:h).test(function(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function he(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&f.test(e))&&e>-1&&e%1==0&&e<t}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function ge(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var me=function(e){var t=0,n=0;return function(){var r=J(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);function ve(e,t){return e===t||e!=e&&t!=t}var ye=de(function(){return arguments}())?de:function(e){return ke(e)&&R.call(e,"callee")&&!z.call(e,"callee")},be=Array.isArray;function _e(e){return null!=e&&Te(e.length)&&!Se(e)}var we=G||function(){return!1};function Se(e){if(!Ie(e))return!1;var t=se(e);return t==s||t==d||t==a||t==u}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ie(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ke(e){return null!=e&&"object"==typeof e}var Ae=E?function(e){return function(t){return e(t)}}(E):function(e){return ke(e)&&Te(e.length)&&!!g[se(e)]};function Ee(e){return _e(e)?function(e,t){var n=be(e),r=!n&&ye(e),i=!n&&!r&&we(e),o=!n&&!r&&!i&&Ae(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],d=s.length;for(var l in e)!t&&!R.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||he(l,d))||s.push(l);return s}(e,!0):function(e){if(!Ie(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=fe(e),n=[];for(var r in e)("constructor"!=r||!t&&R.call(e,r))&&n.push(r);return n}(e)}var Ce,xe=(Ce=function(e,t,n){le(e,t,n)},function(e,t){return me(function(e,t,n){return t=X(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=X(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,Oe),e+"")}((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Ce.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!Ie(n))return!1;var r=typeof t;return!!("number"==r?_e(n)&&he(t,n.length):"string"==r&&t in n)&&ve(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Ce(e,a,n)}return e})));function Oe(e){return e}e.exports=xe},9396:(e,t,n)=>{var r,i="__lodash_hash_undefined__",o=1/0,a=9007199254740991,s="[object Function]",d="[object GeneratorFunction]",l="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,p=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,v="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,y="object"==typeof self&&self&&self.Object===Object&&self,b=v||y||Function("return this")(),_=Array.prototype,w=Function.prototype,S=Object.prototype,T=b["__core-js_shared__"],I=(r=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",k=w.toString,A=S.hasOwnProperty,E=S.toString,C=RegExp("^"+k.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=b.Symbol,O=_.splice,P=F(b,"Map"),D=F(Object,"create"),R=x?x.prototype:void 0,j=R?R.toString:void 0;function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function U(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function L(e,t,n){var r=e[t];A.call(e,t)&&H(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function B(e,t){for(var n=e.length;n--;)if(H(e[n][0],t))return n;return-1}function q(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function F(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!X(e)||I&&I in e)return!1;var t=function(e){var t=X(e)?E.call(e):"";return t==s||t==d}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:g;return t.test(function(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function V(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}M.prototype.clear=function(){this.__data__=D?D(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var t=this.__data__;if(D){var n=t[e];return n===i?void 0:n}return A.call(t,e)?t[e]:void 0},M.prototype.has=function(e){var t=this.__data__;return D?void 0!==t[e]:A.call(t,e)},M.prototype.set=function(e,t){return this.__data__[e]=D&&void 0===t?i:t,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(e){var t=this.__data__,n=B(t,e);return!(n<0||(n==t.length-1?t.pop():O.call(t,n,1),0))},N.prototype.get=function(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]},N.prototype.has=function(e){return B(this.__data__,e)>-1},N.prototype.set=function(e,t){var n=this.__data__,r=B(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},U.prototype.clear=function(){this.__data__={hash:new M,map:new(P||N),string:new M}},U.prototype.delete=function(e){return q(this,e).delete(e)},U.prototype.get=function(e){return q(this,e).get(e)},U.prototype.has=function(e){return q(this,e).has(e)},U.prototype.set=function(e,t){return q(this,e).set(e,t),this};var z=W((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(J(e))return j?j.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return p.test(e)&&n.push(""),e.replace(h,(function(e,t,r,i){n.push(r?i.replace(f,"$1"):t||e)})),n}));function $(e){if("string"==typeof e||J(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function W(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(W.Cache||U),n}function H(e,t){return e===t||e!=e&&t!=t}W.Cache=U;var G=Array.isArray;function X(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function J(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&E.call(e)==l}e.exports=function(e,t,n){return null==e?e:function(e,t,n,r){if(!X(e))return e;t=function(e,t){if(G(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!J(e))||u.test(e)||!c.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return G(e)?e:z(e)}(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var d=$(t[i]),l=n;if(i!=a){var p=s[d];void 0===(l=r?r(p,d,s):void 0)&&(l=X(p)?p:V(t[i+1])?[]:{})}L(s,d,l),s=s[d]}return e}(e,t,n)}},8430:(e,t,n)=>{var r=n(1006).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=r(e.subarray(i)),n.firstOffset=r(e.subarray(i+8)),i+=16),i+=2;var o=t.getUint16(i);for(i+=2;o>0;i+=12,o--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n}},7898:e=>{var t,n,r,i,o,a,s,d=9e4;t=function(e){return e*d},n=function(e,t){return e*t},r=function(e){return e/d},i=function(e,t){return e/t},o=function(e,n){return t(i(e,n))},a=function(e,t){return n(r(e),t)},s=function(e,t,n){return r(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:d,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:i,audioTsToVideoTs:o,videoTsToAudioTs:a,metadataTsToSeconds:s}},1006:e=>{var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getBigUint64?(n=r.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:r.getUint32(0)*t+r.getUint32(4)},MAX_UINT32:t}},1558:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,d=[],l=!1,c=-1;function u(){l&&s&&(l=!1,s.length?d=s.concat(d):c=-1,d.length&&p())}function p(){if(!l){var e=a(u);l=!0;for(var t=d.length;t;){for(s=d,d=[];++c<t;)s&&s[c].run();c=-1,t=d.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new h(e,t)),1!==d.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},185:(e,t,n)=>{"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return Array.isArray(e)?function(e,t){for(var n,r="",o="",a=Array.isArray(t),s=0;s<e.length;s++)(n=i(e[s]))&&(a&&t[s]&&(n=d(n)),r=r+o+n,o=" ");return r}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var i in e)i&&e[i]&&r.call(e,i)&&(t=t+n+i,n=" ");return t}(e):e||""}function o(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)r.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function a(e,t,n,r){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(r?e:e+'="'+e+'"');var i=typeof t;return"object"!==i&&"function"!==i||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=d(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var r=t[0],i=1;i<t.length;i++)r=e(r,t[i]);return r}for(var a in n)if("class"===a){var s=t[a]||[];t[a]=(Array.isArray(s)?s:[s]).concat(n[a]||[])}else if("style"===a){s=(s=o(t[a]))&&";"!==s[s.length-1]?s+";":s;var d=o(n[a]);d=d&&";"!==d[d.length-1]?d+";":d,t[a]=s+d}else t[a]=n[a];return t},t.classes=i,t.style=o,t.attr=a,t.attrs=function(e,t){var n="";for(var s in e)if(r.call(e,s)){var d=e[s];if("class"===s){n=a(s,d=i(d),!1,t)+n;continue}"style"===s&&(d=o(d)),n+=a(s,d,!1,t)}return n};var s=/["&<>]/;function d(e){var t=""+e,n=s.exec(t);if(!n)return e;var r,i,o,a="";for(r=n.index,i=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}i!==r&&(a+=t.substring(i,r)),i=r+1,a+=o}return i!==r?a+t.substring(i,r):a}t.escape=d,t.rethrow=function e(t,r,i,o){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&r||o))throw t.message+=" on line "+i,t;var a,s,d,l;try{o=o||n(6014).readFileSync(r,{encoding:"utf8"}),a=3,s=o.split("\n"),d=Math.max(i-a,0),l=Math.min(s.length,i+a)}catch(n){return t.message+=" - could not read from "+r+" ("+n.message+")",void e(t,null,i)}a=s.slice(d,l).map((function(e,t){var n=t+d+1;return(n==i?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=r;try{t.message=(r||"Pug")+":"+i+"\n"+a+"\n\n"+t.message}catch(e){}throw t}},5831:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,a,s,d;if("string"==typeof t&&(o="not ",t.substr(0,4)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var l=("number"!=typeof d&&(d=0),d+1>(s=e).length||-1===s.indexOf(".",d)?"argument":"property");a='The "'.concat(e,'" ').concat(l," ").concat(i," ").concat(r(t,"type"))}return a+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},8861:(e,t,n)=>{"use strict";var r=n(1558),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var o=n(5379),a=n(3287);n(6433)(c,o);for(var s=i(a.prototype),d=0;d<s.length;d++){var l=s[d];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},2937:(e,t,n)=>{"use strict";e.exports=i;var r=n(2867);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(6433)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},5379:(e,t,n)=>{"use strict";var r,i=n(1558);e.exports=k,k.ReadableState=I,n(1563).EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=n(7228),d=n(8547).Buffer,l=n.g.Uint8Array||function(){},c=n(7615);o=c&&c.debuglog?c.debuglog("stream"):function(){};var u,p,h,f=n(206),g=n(147),m=n(1932).getHighWaterMark,v=n(5831).F,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(6433)(k,s);var S=g.errorOrDestroy,T=["error","close","destroy","pause","resume"];function I(e,t,i){r=r||n(8861),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(6533).I),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function k(e){if(r=r||n(8861),!(this instanceof k))return new k(e);var t=this instanceof r;this._readableState=new I(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function A(e,t,n,r,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,s);else if(i||(a=function(e,t){var n,r;return r=t,d.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),a)S(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=function(e){return d.from(e)}(t)),r)s.endEmitted?S(e,new w):E(e,s,t,!0);else if(s.ended)S(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?E(e,s,t,!1):D(e,s)):E(e,s,t,!1)}else r||(s.reading=!1,D(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function E(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),D(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=g.destroy,k.prototype._undestroy=g.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),A(this,e,t,!1,n)},k.prototype.unshift=function(e){return A(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){u||(u=n(6533).I);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(P,e))}function P(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,U(e)}function D(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){o("readable nexttick read 0"),e.read(0)}function N(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(q,t,e))}function q(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?L(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){S(this,new _("_read()"))},k.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,o("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===i.stdout||e===i.stderr?g:d;function d(){o("onend"),e.end()}r.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",(function t(i,a){o("onunpipe"),i===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",t),n.removeListener("end",d),n.removeListener("end",g),n.removeListener("data",u),c=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,U(e))}}(n);e.on("drain",l);var c=!1;function u(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==F(r.pipes,e))&&!c&&(o("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function p(t){o("onerror",t),g(),e.removeListener("error",p),0===a(e,"error")&&S(e,t)}function h(){e.removeListener("finish",f),g()}function f(){o("onfinish"),e.removeListener("close",h),g()}function g(){o("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",f),e.emit("pipe",n),r.flowing||(o("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,o("on readable",r.length,r.reading),r.length?O(this):r.reading||i.nextTick(M,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(j,this),n},k.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(j,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(N,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<T.length;a++)e.on(T[a],this.emit.bind(this,T[a]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(7810)),p(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=L,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===h&&(h=n(5888)),h(k,e,t)})},2867:(e,t,n)=>{"use strict";e.exports=c;var r=n(5831).F,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,d=n(8861);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);d.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,n){p(e,t,n)}))}function p(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(6433)(c,d),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new i("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},3287:(e,t,n)=>{"use strict";var r,i=n(1558);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=k,k.WritableState=I;var a,s={deprecate:n(8962)},d=n(7228),l=n(8547).Buffer,c=n.g.Uint8Array||function(){},u=n(147),p=n(1932).getHighWaterMark,h=n(5831).F,f=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,v=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,S=u.errorOrDestroy;function T(){}function I(e,t,a){r=r||n(8861),e=e||{},"boolean"!=typeof a&&(a=t instanceof r),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(P,e,t),e._writableState.errorEmitted=!0,S(e,r)):(o(r),e._writableState.errorEmitted=!0,S(e,r),P(e,t))}(e,n,r,t,o);else{var a=x(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||C(e,n),r?i.nextTick(E,e,n,a,o):E(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function k(e){var t=this instanceof(r=r||n(8861));if(!t&&!a.call(k,this))return new k(e);this._writableState=new I(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function A(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function E(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),P(e,t)}function C(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,d=!0;n;)i[s]=n,n.isBuf||(d=!1),n=n.next,s+=1;i.allBuffers=d,A(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback;if(A(e,t,!1,t.objectMode?1:l.length,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(n){t.pendingcb--,n&&S(e,n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=x(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(6433)(k,d),I.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(I.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===k&&e&&e._writableState instanceof I}})):a=function(e){return e instanceof this},k.prototype.pipe=function(){S(this,new v)},k.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,s=!o.objectMode&&(r=e,l.isBuffer(r)||r instanceof c);return s&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=T),o.ending?function(e,t){var n=new _;S(e,n),i.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new f("chunk",["string","Buffer"],n)),!o||(S(e,o),i.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,s,r,i,o);return d}(this,o,s,e,t,n)),a},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new g("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(e,t){t(e)}},7810:(e,t,n)=>{"use strict";var r,i=n(1558);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(6073),s=Symbol("lastResolve"),d=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[u]=null,e[s]=null,e[d]=null,t(f(n,!1)))}}function m(e){i.nextTick(g,e)}var v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(r={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,r=this[u];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(void 0,!0)):t[p](n,r)}),r)}}(r,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(f(o,!1));n=new Promise(this[p])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),v);e.exports=function(e){var t,n=Object.create(y,(o(t={},h,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,d,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,p,{value:function(e,t){var r=n[h].read();r?(n[u]=null,n[s]=null,n[d]=null,e(f(r,!1))):(n[s]=e,n[d]=t)},writable:!0}),t));return n[u]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[d];return null!==t&&(n[u]=null,n[s]=null,n[d]=null,t(e)),void(n[l]=e)}var r=n[s];null!==r&&(n[u]=null,n[s]=null,n[d]=null,r(f(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}},206:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(8547).Buffer,s=n(4307).inspect,d=s&&s.custom||"inspect";function l(e,t,n){a.prototype.copy.call(e,t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)l(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:d,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),e}()},147:(e,t,n)=>{"use strict";var r=n(1558);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,e)):r.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(o,n),t(e)):r.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},6073:(e,t,n)=>{"use strict";var r=n(5831).F.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,d=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){s=!1,l=!0,a||o.call(t)},u=t._readableState&&t._readableState.endEmitted,p=function(){a=!1,u=!0,s||o.call(t)},h=function(e){o.call(t,e)},f=function(){var e;return a&&!u?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",f),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",d),t.on("close",d)),t.on("end",p),t.on("finish",c),!1!==n.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",c),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",f)}}},5888:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},8075:(e,t,n)=>{"use strict";var r,i=n(5831).F,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function d(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var c,u=function(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var p=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(6073)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var d=!1;return function(t){if(!s&&!d)return d=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}(e,o,i>0,(function(e){c||(c=e),e&&p.forEach(d),o||(p.forEach(d),u(c))}))}));return t.reduce(l)}},1932:(e,t,n)=>{"use strict";var r=n(5831).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},7228:(e,t,n)=>{e.exports=n(1563).EventEmitter},2911:(e,t,n)=>{var r=n(8547),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},9996:e=>{e.exports=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}},4531:(e,t,n)=>{e.exports=i;var r=n(1563).EventEmitter;function i(){r.call(this)}n(6433)(i,r),i.Readable=n(5379),i.Writable=n(3287),i.Duplex=n(8861),i.Transform=n(2867),i.PassThrough=n(2937),i.finished=n(6073),i.pipeline=n(8075),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",d));var a=!1;function s(){a||(a=!0,e.end())}function d(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",d),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},6533:(e,t,n)=>{"use strict";var r=n(2911).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=u,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.I=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2081:function(e){var t,n,r,i,o;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var d=n.exec(s.path);s.netLoc=d[1],s.path=d[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,u=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(u)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},8962:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},8346:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},6784:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>o});const i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},8476:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}},8867:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8346),i=n(6784),o=n(8476);const a=function(e,t,n){if(r.A.randomUUID&&!t&&!e)return r.A.randomUUID();const a=(e=e||{}).random||(e.rng||i.A)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,o.k)(a)}},9765:(e,t,n)=>{var r=n(1024),i=e.exports={WebVTT:n(6554),VTTCue:n(8515),VTTRegion:n(5826)};r.vttjs=i,r.WebVTT=i.WebVTT;var o=i.VTTCue,a=i.VTTRegion,s=r.VTTCue,d=r.VTTRegion;i.shim=function(){r.VTTCue=o,r.VTTRegion=a},i.restore=function(){r.VTTCue=s,r.VTTRegion=d},r.VTTCue||i.shim()},6554:(e,t,n)=>{var r=n(5889),i=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function o(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function a(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function s(){this.values=i(null)}function d(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);2===a.length&&t(a[0].trim(),a[1].trim())}}function l(e,t,n){var r=e;function i(){var t=a(e);if(null===t)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=i(),l(),"--\x3e"!==e.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),l(),t.endTime=i(),l(),function(e,t){var r=new s;d(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}o.prototype=i(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=r.createElement&&r.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},p={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},h={v:"title",lang:"lang"},f={rt:"ruby"};function g(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e,t){return!f[t.localName]||f[t.localName]===e.localName}function i(t,n){var r=u[t];if(!r)return null;var i=e.document.createElement(r),o=h[t];return o&&n&&(i[o]=n.trim()),i}for(var o,s,d=e.document.createElement("div"),l=d,g=[];null!==(o=n());)if("<"!==o[0])l.appendChild(e.document.createTextNode((s=o,c.innerHTML=s,s=c.textContent,c.textContent="",s)));else{if("/"===o[1]){g.length&&g[g.length-1]===o.substr(2).replace(">","")&&(g.pop(),l=l.parentNode);continue}var m,v=a(o.substr(1,o.length-2));if(v){m=e.document.createProcessingInstruction("timestamp",v),l.appendChild(m);continue}var y=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=i(y[1],y[3])))continue;if(!r(l,m))continue;if(y[2]){var b=y[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(p.hasOwnProperty(n)){var r=t?"background-color":"color",i=p[n];m.style[r]=i}})),m.className=b.join(" ")}g.push(y[1]),l.appendChild(m),l=m}return d}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<m.length;t++){var n=m[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var o=0;o<n.length;o++)if(v(n.charCodeAt(o)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=g(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":case"line-left":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":case"line-right":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function S(e,t,n,r){var i=new w(t),o=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(o),s=[];if(o.snapToLines){var d;switch(o.vertical){case"":s=["+y","-y"],d="height";break;case"rl":s=["+x","-x"],d="width";break;case"lr":s=["-x","+x"],d="width"}var l=i.lineHeight,c=l*Math.round(a),u=n[d]+l,p=s[0];Math.abs(c)>u&&(c=c<0?-1:1,c*=Math.ceil(u/l)*l),a<0&&(c+=""===o.vertical?n.height:n.width,s=s.reverse()),i.move(p,c)}else{var h=i.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=h/2;break;case"end":a-=h}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new w(t)}var f=function(e,t){for(var i,o=new w(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var d=e.intersectPercentage(n);a>d&&(i=new w(e),a=d),e=new w(o)}return i||o}(i,s);t.move(f.toCSSCompatValues(n))}function T(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=i(b.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},T.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},T.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null},T.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],o=w.getSimpleBoxPosition(r),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,d=0;d<t.length;d++)s=t[d],n=new _(e,s,a),r.appendChild(n.div),S(0,n,o,i),s.displayState=n.div,i.push(w.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},T.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},T.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof o))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function r(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var c=(i=r()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new o(o.Errors.BadSignature);n.state="HEADER"}for(var u=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(u?u=!1:i=r(),n.state){case"HEADER":/:/.test(i)?(t=i).match(/X-TIMESTAMP-MAP/)?d(t,(function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new s;d(e,(function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",a(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}),/=/):d(t,(function(e,t){"Region"===e&&function(e){var t=new s;if(d(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var i=new s;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var r=new(n.vttjs.VTTRegion||n.window.VTTRegion);r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}(t)}),/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{l(i,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var p=-1!==i.indexOf("--\x3e");if(!i||p&&(u=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new o(o.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=T},8515:e=>{var t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function i(e,n,i){this.hasBeenReset=!1;var o="",a=!1,s=e,d=n,l=i,c=null,u="",p=!0,h="auto",f="start",g="auto",m="auto",v=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(e){a=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=r(e);t?(f=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=r(e);t?(m=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=t,this.hasBeenReset=!0}}}),this.displayState=void 0}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},5826:e=>{var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,r=3,i=0,o=100,a=0,s=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");r=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return d},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):d=n}}})}},9557:(e,t,n)=>{"use strict";async function r({getConfig:e,setConfig:t,log:n}){const r=window.getPaywallEntitlements?.();if(function(e,t){const n=t("adlite.bounceOnEntitlements",["mol-reject-all"]);return e?.some((e=>n.includes(e)))}(r,e))return n("bouncing as ad experience trumped by other entitlement",r),void function(e,t){t("plugins.enabled",e("plugins.enabled",[]).filter((e=>"adlite"!==e)))}(e,t);!function(e,t){return t("entitlements",e),!!e?.includes("mailplus-ad-lite")}(r,n)?n("is not entitled"):(n("is entitled"),function({getConfig:e,setConfig:t,log:n}){const r=e("slotDescription",{}),i=e("slots.enabled",{}),o=e("adlite.positionsToWhitelist",["billboard"]),a={},s={};for(const e of Object.keys(r))o.includes(e)&&(a[e]=r[e],s[e]=i[e]);n({newSlotDescriptions:a,newSlotsEnabled:s}),t("slotDescription",a),t("slots.enabled",s)}({getConfig:e,setConfig:t,log:n}),function({getConfig:e,setConfig:t,log:n}){const r=e("plugins.enabled",[]),i=[...e("adlite.removePlugins",[]),"reconfigureSlotsEnabled"],o=r.filter((e=>!i.includes(e)));n({newPluginsEnabled:o}),t("plugins.enabled",o)}({getConfig:e,setConfig:t,log:n}),document.documentElement.classList.add("molads_adlite"))}n.d(t,{G:()=>r}),(0,n(9454).g3)("adlite",{run:r})},7779:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],d=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);d=!0);}catch(e){l=!0,i=e}finally{try{if(!d&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}function d(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{default:()=>pN});var l=window,c=l.pbjs=l.pbjs||{};function u(){return c}function p(e){c.installedModules.push(e)}function h(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,n){return e&&e.includes(t,n)||!1}function g(e,t,n){return e&&e.find(t,n)}c.cmd=c.cmd||[],c.que=c.que||[],l===window&&(l._pbjsGlobals=l._pbjsGlobals||[],l._pbjsGlobals.push("pbjs"));var m=2,v={buckets:[{max:5,increment:.5}]},y={buckets:[{max:20,increment:.1}]},b={buckets:[{max:20,increment:.01}]},_={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},w={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":T(e,v,n),med:""===r?"":T(e,y,n),high:""===r?"":T(e,b,n),auto:""===r?"":T(e,w,n),dense:""===r?"":T(e,_,n),custom:""===r?"":T(e,t,n)}}function T(e,t,n){var r="";if(!I(t))return r;var i=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),o=0,a=g(t.buckets,(function(t){if(e>i.max*n){var a=t.precision;void 0===a&&(a=m),r=(t.max*n).toFixed(a)}else{if(e<=t.max*n&&e>=o*n)return t.min=o,t;o=t.max}}));return a&&(r=k(e,a,n)),r}function I(e){if(ut(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}function k(e,t,n){var r=void 0!==t.precision?t.precision:m,i=t.increment*n,o=t.min*n,a=Math.floor,s=Z.getConfig("cpmRoundingFunction");"function"==typeof s&&(a=s);var d,l,c=Math.pow(10,r+2),u=(e*c-o*c)/(i*c);try{d=a(u)*i+o}catch(e){l=!0}return(l||"number"!=typeof d)&&(Je("Invalid rounding function passed in config"),d=Math.floor(u)*i+o),(d=Number(d.toFixed(10))).toFixed(r)}function A(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var E={PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},C={GOOD:1},x={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",BILLABLE_EVENT:"billableEvent",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError"},O={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},P={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp"},D={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},R={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},j="s2s",M={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},N={INVALID:"Bid has missing or invalid properties",INVALID_REQUEST_ID:"Invalid request ID",BIDDER_DISALLOWED:"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",FLOOR_NOT_MET:"Bid does not meet price floor",CANNOT_CONVERT_CURRENCY:"Unable to convert currency",DSA_REQUIRED:"Bid does not provide required DSA transparency info",DSA_MISMATCH:"Bid indicates inappropriate DSA rendering method",PRICE_TOO_HIGH:"Bid price exceeds maximum value"},U={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},L={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},B={ICON:1,MAIN:3},q=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],F="Prebid Request",V="Prebid Response",z="Prebid Native",$="Prebid Event",W="__pb_locator__";function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G="TRUE"===rt("pbjs_debug").toUpperCase(),X={},J="random",K={};K[J]=!0,K.fixed=!0;var Y=J,Q={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},Z=function(){var e,t,n,r=[],i=null;function s(){function r(e){return a[e].val}function i(e,t){a[e].val=t}e={};var a={publisherDomain:{set:function(e){null!=e&&Je("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{val:Q.MEDIUM,set:function(e){l(e)&&("string"==typeof e?i("priceGranularity",d(e)?e:Q.MEDIUM):lt(e)&&(i("customPriceBucket",e),i("priceGranularity",Q.CUSTOM),Ge("Using custom price granularity")))}},customPriceBucket:{val:{},set:function(){}},mediaTypePriceGranularity:{val:{},set:function(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce((function(t,n){return l(e[n])?"string"==typeof e?t[n]=d(e[n])?e[n]:r("priceGranularity"):lt(e)&&(t[n]=e[n],Ge("Using custom price granularity for ".concat(n))):Je("Invalid price granularity for media type: ".concat(n)),t}),{}))}},bidderSequence:{val:Y,set:function(e){K[e]?i("bidderSequence",e):Je("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{val:{},set:function(e){(function(e){if(!lt(e))return Je("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("secondaryBidders"!==r&&"suppressStaleRender"!==r)return Je("Auction Options given an incorrect param: ".concat(r)),!1;if("secondaryBidders"===r){if(!st(e[r]))return Je("Auction Options ".concat(r," must be of type Array")),!1;if(!e[r].every(at))return Je("Auction Options ".concat(r," must be only string")),!1}else if("suppressStaleRender"===r&&!ct(e[r]))return Je("Auction Options ".concat(r," must be of type boolean")),!1}return!0})(e)&&i("auctionOptions",e)}}},s={debug:G,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:X}};function d(e){return g(Object.keys(Q),(function(t){return e===Q[t]}))}function l(e){if(!e)return Ke("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)d(e)||Je("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(lt(e)&&!I(e))return Ke("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(s,Object.fromEntries(Object.entries(a).map((function(e){var t=o(e,2),n=t[0],a=t[1];return[n,Object.assign({get:r.bind(null,n),set:i.bind(null,n),enumerable:!0},a)]})))),t&&S(Object.keys(t).reduce((function(e,n){return t[n]!==s[n]&&(e[n]=s[n]||{}),e}),{})),t=s,n={}}function l(){if(i&&n&&lt(n[i])){var e=n[i];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(t).concat(Object.keys(e)))).reduce((function(n,r){return void 0===e[r]?n[r]=t[r]:void 0===t[r]?n[r]=e[r]:lt(e[r])?n[r]=Xt({},t[r],e[r]):n[r]=e[r],n}),{})}return Object.assign({},t)}var c=[l,function(){var e=l();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?A(e(),t):l()}return w.apply(void 0,arguments)}})),u=o(c,2),p=u[0],h=u[1],m=[h,p].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===a(t)&&(t=Ct(t)),t}})),v=o(m,2),y=v[0],b=v[1];function _(n){if(lt(n)){var r=Object.keys(n),i={};r.forEach((function(r){var o=n[r];lt(e[r])&&lt(o)&&(o=Object.assign({},e[r],o));try{i[r]=t[r]=o}catch(e){Je("Cannot set config for property ".concat(r," : "),e)}})),S(i)}else Ke("setConfig options must be an object")}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if("string"!=typeof e&&(i=e,e="*",n=t||{}),"function"==typeof i){var o={topic:e,callback:i};return r.push(o),n.init&&i("*"===e?h():d({},e,h(e))),function(){r.splice(r.indexOf(o),1)}}Ke("listener must be a function")}function S(e){var t=Object.keys(e);r.filter((function(e){return f(t,e.topic)})).forEach((function(t){t.callback(d({},t.topic,e[t.topic]))})),r.filter((function(e){return"*"===e.topic})).forEach((function(t){return t.callback(e)}))}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!lt(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!lt(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((function(r){n[r]||(n[r]={}),Object.keys(e.config).forEach((function(i){var o=e.config[i];if(lt(o)){var a=t?Xt:Object.assign;n[r][i]=a({},n[r][i]||{},o)}else n[r][i]=o}))}))}catch(e){Ke(e)}}function k(e,t){i=e;try{return t()}finally{E()}}function E(){i=null}return s(),{getCurrentBidder:function(){return i},resetBidder:E,getConfig:h,getAnyConfig:p,readConfig:y,readAnyConfig:b,setConfig:_,mergeConfig:function(e){if(lt(e)){var t=Xt(l(),e);return _(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),t}Ke("mergeConfig input must be an object")},setDefaults:function(n){lt(e)?(Object.assign(e,n),Object.assign(t,n)):Ke("defaults must be an object")},resetConfig:s,runWithBidder:k,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return k(e,t.bind.apply(t,[this].concat(r)))}Je("config.callbackWithBidder callback is not a function")}}},setBidderConfig:T,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return T(e,!0)}}}();function ee(e){var t,n,r;if(Array.isArray(e)){for(n=Array(t=e.length);t--;)n[t]=(r=e[t])&&"object"==typeof r?ee(r):r;return n}if("[object Object]"===Object.prototype.toString.call(e)){for(t in n={},e)"__proto__"===t?Object.defineProperty(n,t,{value:ee(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=(r=e[t])&&"object"==typeof r?ee(r):r;return n}return e}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function re(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function oe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ie(e,t,"get"))}function ae(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ie(e,t,"set"),n),n}function se(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function de(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}var le=0,ce=1,ue=new WeakMap,pe=new WeakMap,he=function(){function e(t){if(te(this,e),se(this,ue,{writable:!0,value:void 0}),se(this,pe,{writable:!0,value:void 0}),"function"!=typeof t)throw new Error("resolver not a function");var n=[],r=[],i=o([le,ce].map((function(e){return function(t){if(e===le&&"function"==typeof(null==t?void 0:t.then))t.then(a,s);else if(!n.length)for(n.push(e,t);r.length;)r.shift()()}})),2),a=i[0],s=i[1];try{t(a,s)}catch(e){s(e)}ae(this,ue,n),ae(this,pe,r)}return re(e,[{key:"then",value:function(e,t){var n=this,r=oe(this,ue);return new this.constructor((function(i,a){var s=function(){var n=r[1],s=o(r[0]===le?[e,i]:[t,a],2),d=s[0],l=s[1];if("function"==typeof d){try{n=d(n)}catch(e){return void a(e)}l=i}l(n)};r.length?s():oe(n,pe).push(s)}))}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,n=this;return this.then((function(n){return t=n,e()}),(function(r){return t=n.constructor.reject(r),e()})).then((function(){return t}))}}],[{key:"timeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e((function(e){0===t?e():setTimeout(e,t)}))}},{key:"race",value:function(t){var n=this;return new this((function(r,i){de(n,e,fe).call(n,t,(function(e,t){return e?r(t):i(t)}))}))}},{key:"all",value:function(t){var n=this;return new this((function(r,i){var o=[];de(n,e,fe).call(n,t,(function(e,t,n){return e?o[n]=t:i(t)}),(function(){return r(o)}))}))}},{key:"allSettled",value:function(t){var n=this;return new this((function(r){var i=[];de(n,e,fe).call(n,t,(function(e,t,n){return i[n]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}}),(function(){return r(i)}))}))}},{key:"resolve",value:function(e){return new this((function(t){return t(e)}))}},{key:"reject",value:function(e){return new this((function(t,n){return n(e)}))}}]),e}();function fe(e,t,n){var r=this,i=e.length;function o(){t.apply(this,arguments),--i<=0&&n&&n()}0===e.length&&n?n():e.forEach((function(e,t){return r.resolve(e).then((function(e){return o(!0,e,t)}),(function(e){return o(!1,e,t)}))}))}function ge(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).promiseFactory;function r(e){return function(t){return e(t)}}return{promise:(void 0===n?function(e){return new he(e)}:n)((function(n,r){e=n,t=r})),resolve:r(e),reject:r(t)}}var me,ve="String",ye="Function",be="Number",_e="Object",we="Boolean",Se=Object.prototype.toString,Te=Boolean(window.console),Ie=Boolean(Te&&window.console.log),ke=Boolean(Te&&window.console.info),Ae=Boolean(Te&&window.console.warn),Ee=Boolean(Te&&window.console.error),Ce=u();function xe(){null!=me&&me.apply(void 0,arguments)}var Oe={checkCookieSupport:Rt,createTrackPixelIframeHtml:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=encodeURI(e)),t&&(t='sandbox="'.concat(t,'"')),"<iframe ".concat(t,' id="').concat(Me(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""},getWindowSelf:We,getWindowTop:$e,canAccessWindowTop:function(){try{if(Oe.getWindowTop().location.href)return!0}catch(e){return!1}},getWindowLocation:He,insertUserSyncIframe:yt,insertElement:gt,isFn:ot,triggerPixel:vt,logError:Ke,logWarn:Je,logMessage:Ge,logInfo:Xe,parseQS:zt,formatQS:$t,deepEqual:Gt},Pe={};function De(){return Pe}var Re,je=(Re=0,function(){return++Re});function Me(){return je()+Math.random().toString(16).substr(2)}function Ne(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,Ne)}function Ue(e,t){return(null==t?void 0:t[e])||""}function Le(e){return"string"==typeof e?e.split(/\s*,\s*/).map((function(e){return e.match(/^(\d+)x(\d+)$/i)})).filter((function(e){return e})).map((function(e){var t=o(e,3),n=(t[0],t[1]),r=t[2];return[parseInt(n,10),parseInt(r,10)]})):Array.isArray(e)?ze(e)?[e]:e.filter(ze):[]}function Be(e){return Le(e).map(qe)}function qe(e){return e[0]+"x"+e[1]}function Fe(e){return{w:e[0],h:e[1]}}function Ve(e){if(ze(e))return Fe(e)}function ze(e){return st(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function $e(){return window.top}function We(){return window.self}function He(){return window.location}function Ge(){Ze()&&Ie&&console.log.apply(console,Qe(arguments,"MESSAGE:"))}function Xe(){Ze()&&ke&&console.info.apply(console,Qe(arguments,"INFO:"))}function Je(){Ze()&&Ae&&console.warn.apply(console,Qe(arguments,"WARNING:")),xe(x.AUCTION_DEBUG,{type:"WARNING",arguments})}function Ke(){Ze()&&Ee&&console.error.apply(console,Qe(arguments,"ERROR:")),xe(x.AUCTION_DEBUG,{type:"ERROR",arguments})}function Ye(e){function t(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(void 0,[e].concat(r))}}return{logError:t(Ke),logWarn:t(Je),logMessage:t(Ge),logInfo:t(Xe)}}function Qe(e,t){e=[].slice.call(e);var n=Z.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function r(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function Ze(){return!!Z.getConfig("debug")}var et,tt=(et={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.createElement("iframe");return Object.assign(r,Object.assign({},et,t)),Object.assign(r.style,n),r});function nt(){return tt(document,{id:Me(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function rt(e){return zt(He().search)[e]||""}function it(e,t){return Se.call(e)==="[object "+t+"]"}function ot(e){return it(e,ye)}function at(e){return it(e,ve)}var st=Array.isArray.bind(Array);function dt(e){return it(e,be)}function lt(e){return it(e,_e)}function ct(e){return it(e,we)}function ut(e){return!e||(st(e)||at(e)?!(e.length>0):Object.keys(e).length<=0)}function pt(e){return at(e)&&(!e||0===e.length)}function ht(e,t){var n=this;if(ot(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach((function(e){var r=o(e,2),i=r[0],a=r[1];return t.call(n,a,i)}))}function ft(e,t){return ot(null==e?void 0:e.includes)&&e.includes(t)}function gt(e,t,n,r){var i;t=t||document,i=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){i=i[0];var o=r?null:i.firstChild;return i.insertBefore(e,o)}}catch(e){}}function mt(e,t){var n=null;return new he((function(r){var i=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=n&&window.clearTimeout(n),r()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(n=window.setTimeout(i,t))}))}function vt(e,t,n){var r=new Image;t&&Oe.isFn(t)&&mt(r,n).then(t),r.src=e}function yt(e,t,n){var r=Oe.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=r;var o=i.firstChild;t&&Oe.isFn(t)&&mt(o,n).then(t),Oe.insertElement(o,document,"html",!0)}function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;">'+'<img src="'+t(e)+'"></div>':""}function _t(e){var t=Array.from(e.matchAll(/\$({[^}]+})/g)).map((function(e){return e[1]}));return t.reduce((function(e,t){return e.replace("$"+encodeURIComponent(t),"$"+t)}),encodeURI(e))}function wt(e,t,n){return n.indexOf(e)===t}function St(e,t){return e.concat(t)}function Tt(e,t){if(e)return t.flatMap((function(e){return e.bids})).find((function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}))}function It(e,t){return e[t]}function kt(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce.adUnits).map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(St,[])})).reduce(St,[]).filter((function(e){return void 0!==e})).filter(wt)}function At(){if(window.googletag&&ot(window.googletag.pubads)&&ot(window.googletag.pubads().getSlots))return!0}function Et(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}function Ct(e){return ee(e)||{}}function xt(){try{return Oe.getWindowSelf()!==Oe.getWindowTop()}catch(e){return!0}}function Ot(e,t){if(e)return Object.entries(t).reduce((function(e,t){var n=o(t,2),r=n[0],i=n[1];return e.replace(new RegExp("\\$\\{"+r+"\\}","g"),i||"")}),e)}function Pt(){return(new Date).getTime()}function Dt(){return!1!==Z.getConfig("deviceAccess")}function Rt(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function jt(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}function Mt(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function Nt(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return Object.assign(t,d({},n,e[n]))}),{})}function Ut(e,t,n){return e.filter((function(e){return e.code===t})).flatMap((function(e){return e.bids})).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}function Lt(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}var Bt=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t},qt=Number.isInteger.bind(Number);function Ft(e,t){return"object"!==a(e)?{}:t.reduce((function(n,r,i){if("function"==typeof r)return n;var o=r,a=r.match(/^(.+?)\sas\s(.+?)$/i);a&&(r=a[1],o=a[2]);var s=e[r];return"function"==typeof t[i+1]&&(s=t[i+1](s,n)),void 0!==s&&(n[o]=s),n}),{})}function Vt(e,t){return st(e)&&(!t||e.length===t)&&e.every((function(e){return qt(e)}))}function zt(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=o(t.split("="),2),r=n[0],i=n[1];return/\[\]$/.test(r)?(e[r=r.replace("[]","")]=e[r]||[],e[r].push(i)):e[r]=i||"",e}),{}):{}}function $t(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function Wt(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r?n.search:Oe.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function Ht(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(Oe.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function Gt(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkTypes,r=void 0!==n&&n;if(e===t)return!0;if("object"!==a(e)||null===e||"object"!==a(t)||null===t||r&&e.constructor!==t.constructor)return!1;var i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(var o=0,s=i;o<s.length;o++){var d=s[o];if(!t.hasOwnProperty(d))return!1;if(!Gt(e[d],t[d],{checkTypes:r}))return!1}return!0}function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(lt(e)&&lt(i)){var o=function(t){lt(i[t])?(e[t]||Object.assign(e,d({},t,{})),Xt(e[t],i[t])):st(i[t])?e[t]?st(e[t])&&i[t].forEach((function(n){for(var r=1,i=0;i<e[t].length;i++)if(Gt(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,d({},t,h(i[t]))):Object.assign(e,d({},t,i[t]))};for(var a in i)o(a)}return Xt.apply(void 0,[e].concat(n))}function Jt(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function(e,t){if(ot(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},i=3735928559^n,o=1103547991^n,a=0;a<e.length;a++)i=r(i^(t=e.charCodeAt(a)),2654435761),o=r(o^t,1597334677);return i=r(i^i>>>16,2246822507)^r(o^o>>>13,3266489909),(4294967296*(2097151&(o=r(o^o>>>16,2246822507)^r(i^i>>>13,3266489909)))+(i>>>0)).toString()}function Kt(e){try{return JSON.parse(e)}catch(e){}}function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Map,r=function(){var r=t.apply(this,arguments);return n.has(r)||n.set(r,e.apply(this,arguments)),n.get(r)};return r.clear=n.clear.bind(n),r}function Qt(e,t){for(var n,r=0;r<e.length;r++)if(n=A(e[r],t))return n}function Zt(e,t,n){t.split&&(t=t.split("."));for(var r,i,o=0,a=t.length,s=e;o<a&&"__proto__"!==(i=t[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?n:typeof(r=s[i])==typeof t?r:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}var en={fetch:window.fetch.bind(window),makeRequest:function(e,t){return new Request(e,t)},timeout:function(e,t){var n=new AbortController,r=setTimeout((function(){n.abort(),Ke("Request timeout after ".concat(e,"ms"),t),r=null}),e);return{signal:n.signal,done:function(){r&&clearTimeout(r)}}}},tn="GET",nn="Content-Type";function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,r=t.done,i=function(t,n){var r,i,o;null==e||null!=(null===(r=n)||void 0===r?void 0:r.signal)||Z.getConfig("disableAjaxTimeout")||(o=en.timeout(e,t),n=Object.assign({signal:o.signal},n));var a=en.fetch(t,n);return null!=(null===(i=o)||void 0===i?void 0:i.done)&&(a=a.finally(o.done)),a};return null==n&&null==r||(i=function(e){return function(t,i){var o=new URL(null==(null==t?void 0:t.url)?t:t.url,document.location).origin,a=e(t,i);return n&&n(o),r&&(a=a.finally((function(){return r(o)}))),a}}(i)),i}function on(e,t){var n=e.status,r=e.statusText,i=void 0===r?"":r,o=e.headers,a=e.url,s=0;function d(e){if(0===s)try{var n,r;s=(new DOMParser).parseFromString(t,null==o||null===(n=o.get(nn))||void 0===n||null===(r=n.split(";"))||void 0===r?void 0:r[0])}catch(t){s=null,e&&e(t)}return s}return{readyState:XMLHttpRequest.DONE,status:n,statusText:i,responseText:t,response:t,responseType:"",responseURL:a,get responseXML(){return d(Ke)},getResponseHeader:function(e){return null!=o&&o.has(e)?o.get(e):null},toJSON:function(){return Object.assign({responseXML:d()},this)},timedOut:!1}}function an(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=rn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:e.request,done:e.done});return function(e,n,r){!function(e,t){var n="object"===a(t)&&null!=t?t:{success:"function"==typeof t?t:function(){return null},error:function(e,t){return Ke("Network error",e,t)}},r=n.success,i=n.error;e.then((function(e){return e.text().then((function(t){return[e,t]}))})).then((function(e){var t=o(e,2),n=t[0],a=t[1],s=on(n,a);n.ok||304===n.status?r(a,s):i(n.statusText,s)}),(function(e){return i("",Object.assign(on({status:0},""),{reason:e,timedOut:"AbortError"===(null==e?void 0:e.name)}))}))}(t(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.method||(t?"POST":tn);if(r===tn&&t){var i=Wt(e,n);Object.assign(i.search,t),e=Ht(i)}var o=new Headers(n.customHeaders);o.set(nn,n.contentType||"text/plain");var a={method:r,headers:o};return r!==tn&&t&&(a.body=t),n.withCredentials&&(a.credentials="include"),n.browsingTopics&&isSecureContext&&(a.browsingTopics=!0),n.keepalive&&(a.keepalive=!0),en.makeRequest(e,a)}(e,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})),n)}}var sn=an(),dn=rn();function ln(e){var t,n,r,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,o=void 0===i?wa.index:i,a=e.vastXml?e.vastXml:(t=e.vastUrl,r=(n=(n=e.vastImpUrl)&&(Array.isArray(n)?n:[n]))?n.map((function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")})).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        ").concat(r,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")),s=o.getAuction(e),d={type:"xml",value:a,ttlseconds:Number(e.ttl)+15};return Z.getConfig("cache.vasttrack")&&(d.bidder=e.bidder,d.bidid=e.requestId,d.aid=e.auctionId),null!=s&&(d.timestamp=s.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(d.key=e.customCacheKey),d}var cn,un,pn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:an,r={puts:e.map(ln)};n(Z.getConfig("cache.timeout"))(Z.getConfig("cache.url"),function(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}(t),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})};function hn(e){var t=e.map((function(e){return e.bidResponse}));pn(t,(function(n,r){n?Ke("Failed to save to the video cache: ".concat(n,". Video bids will be discarded:"),t):e.length!==r.length?Ke("expected ".concat(e.length," cache IDs, got ").concat(r.length," instead")):r.forEach((function(t,n){var r=e[n],i=r.auctionInstance,o=r.bidResponse,a=r.afterBidAdded;""===t.uuid?Je("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(o.videoCacheKey=t.uuid,o.vastUrl||(o.vastUrl=function(e){return"".concat(Z.getConfig("cache.url"),"?uuid=").concat(e)}(o.videoCacheKey)),na(i,o),a())}))}))}Z.getConfig("cache",(function(e){cn="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,un="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));var fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn,n=[[]],r=!1,i=function(e){return e()};return function(o,a,s){var d=un>0?e:i;n[n.length-1].length>=cn&&n.push([]),n[n.length-1].push({auctionInstance:o,bidResponse:a,afterBidAdded:s}),r||(r=!0,d((function(){n.forEach(t),n=[[]],r=!1}),un))}}(),gn=new WeakMap,mn=["debugging","outstream","improvedigital","showheroes-bs","aaxBlockmeter","adagio","adloox","akamaidap","arcspan","airgrid","browsi","brandmetrics","clean.io","confiant","contxtful","hadron","mediafilter","medianet","azerionedge","a1Media","geoedge","qortex","dynamicAdBoost","51Degrees","symitridap","wurfl","justtag","tncId","ftrackId","id5"];function vn(e,t,n,r,i){if(t&&e){if(f(mn,t)){r||(r=document);var a=l(r,e);if(a)return n&&"function"==typeof n&&(a.loaded?n():a.callbacks.push(n)),a.tag;var s=gn.get(r)||{},d={loaded:!1,tag:null,callbacks:[]};return s[e]=d,gn.set(r,s),n&&"function"==typeof n&&d.callbacks.push(n),Je("module ".concat(t," is loading external JavaScript")),function(t,n,r,i){r||(r=document);var a=r.createElement("script");a.type="text/javascript",a.async=!0;var s=l(r,e);return s&&(s.tag=a),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,n())}:a.onload=function(){n()},a.src=t,i&&function(e,t){Object.entries(t).forEach((function(t){var n=o(t,2),r=n[0],i=n[1];return e.setAttribute(r,i)}))}(a,i),gt(a,r),a}(e,(function(){d.loaded=!0;try{for(var e=0;e<d.callbacks.length;e++)d.callbacks[e]()}catch(e){Ke("Error executing callback","adloader.js:loadExternalScript",e)}}),r,i)}Ke("".concat(t," not whitelisted for loading external JavaScript"))}else Ke("cannot load external script without url and moduleCode");function l(e,t){var n=gn.get(e);return n&&n[t]?n[t]:null}}var yn=u(),bn="outstream";function _n(e){var t=this,n=e.url,r=e.config,i=e.id,o=e.callback,a=e.loaded,s=e.adUnitCode,d=e.renderNow;this.url=n,this.config=r,this.handlers={},this.id=i,this.renderNow=d,this.loaded=a,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):Ke("Commands given to Renderer.push must be wrapped in a function")},this.callback=o||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,r=function(){e._render?e._render.apply(e,t):Je("No render function was provided, please use .setRender on the renderer")};!function(e){var t=g(yn.adUnits,(function(t){return t.code===e}));if(!t)return!1;var n=A(t,"renderer"),r=!!(n&&n.url&&n.render),i=A(t,"mediaTypes.video.renderer"),o=!!(i&&i.url&&i.render);return!!(r&&!0!==n.backupOnly||o&&!0!==i.backupOnly)}(s)?d?r():(this.cmd.unshift(r),vn(n,bn,this.callback,this.documentContext)):(Je("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(s)),r())}.bind(this)}function wn(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}_n.install=function(e){return new _n({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},_n.prototype.getConfig=function(){return this.config},_n.prototype.setRender=function(e){this._render=e},_n.prototype.setEventHandlers=function(e){this.handlers=e},_n.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),Ge("Prebid Renderer event for id ".concat(t," type ").concat(n))},_n.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){Ke("Error processing Renderer command: ",e)}};var Sn=new WeakSet,Tn=function(){function e(t,n){te(this,e),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,Sn),this.getSettings=t,this.defaultScope=n}return re(e,[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=wn(this,Sn,In).call(this,e),A(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return Xt({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=wn(this,Sn,In).call(this,e),this.getSettings()[e]||{}}}]),e}();function In(e){return null==e?this.defaultScope:e}var kn=new Tn((function(){return u().bidderSettings||{}}),E.BD_SETTING_STANDARD),An="prebid",En="bidder",Cn="userId",xn="rtd",On="analytics",Pn=n(381),Dn=n.n(Pn),Rn=Dn()({ready:Dn().SYNC|Dn().ASYNC|Dn().QUEUE}),jn=ge();Rn.ready=function(){var e=Rn.ready;return function(){try{return e.apply(Rn,arguments)}finally{jn.resolve()}}}();var Mn=jn.promise,Nn=Rn.get,Un={};function Ln(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).postInstallAllowed,r=void 0!==n&&n;Rn("async",(function(n){n.forEach((function(e){return t.apply(void 0,h(e))})),r&&(Un[e]=t)}),e)([])}function Bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Un[e];if(i)return i.apply(void 0,n);Nn(e).before((function(e,t){t.push(n),e(t)}))}var qn="component",Fn=qn+"Type",Vn=qn+"Name",zn="adapterCode",$n="storageType",Wn="syncType";function Hn(e){return function(t,n,r){var i,o=(d(i={},Fn,t),d(i,Vn,n),d(i,qn,"".concat(t,".").concat(n)),i);return t===En&&(o[zn]=e(n)),Gn(Object.assign(o,r))}}var Gn=Rn("sync",(function(e){return e}));function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye("Activity control:"),t={};function n(e){return t[e]=t[e]||[]}function r(t,n,r,i){var o;try{o=r(i)}catch(r){e.logError("Exception in rule ".concat(n," for '").concat(t,"'"),r),o={allow:!1,reason:r}}return o&&Object.assign({activity:t,name:n,component:i[qn]},o)}var i={};function a(t){var n=t.activity,r=t.name,o=t.allow,a=t.reason,s=t.component,d="".concat(r," ").concat(o?"allowed":"denied"," '").concat(n,"' for '").concat(s,"'").concat(a?":":""),l=i.hasOwnProperty(d);if(l&&clearTimeout(i[d]),i[d]=setTimeout((function(){return delete i[d]}),1e3),!l){var c=[d];a&&c.push(a),(o?e.logInfo:e.logWarn).apply(e,c)}}return[function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=n(e),s=a.findIndex((function(e){var t=o(e,1)[0];return i<t})),d=[i,t,r];return a.splice(s<0?a.length:s,0,d),function(){var e=a.indexOf(d);e>=0&&a.splice(e,1)}},function(e,t){var i,s,d,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n(e));try{for(l.s();!(d=l.n()).done;){var c=o(d.value,3),u=c[0],p=c[1],h=c[2];if(i!==u&&s)break;i=u;var f=r(e,p,h,t);if(f){if(!f.allow)return a(f),!1;s=f}}}catch(e){l.e(e)}finally{l.f()}return s&&a(s),!0}]}(),Kn=o(Jn,2),Yn=Kn[0],Qn=Kn[1],Zn="accessDevice",er="syncUser",tr="enrichUfpd",nr="enrichEids",rr="fetchBids",ir="transmitEids",or="transmitUfpd",ar="transmitPreciseGeo",sr="transmitTid";function dr(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}function lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,r=void 0===n?"client":n,i=t.bidder,o=void 0===i?"":i,a=t.bidId,s=t.transactionId,d=t.adUnitId,l=t.auctionId,c=r,u=e||0;Object.assign(this,{bidderCode:o,width:0,height:0,statusMessage:function(){switch(u){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:Me(),requestId:a,transactionId:s,adUnitId:d,auctionId:l,mediaType:"banner",source:c}),this.getStatusCode=function(){return u},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}function cr(e,t){return new lr(e,t)}var ur="outstream",pr="instream",hr=new Map([["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e}))}],["minduration",qt],["maxduration",qt],["startdelay",qt],["maxseq",qt],["poddur",qt],["protocols",Vt],["w",qt],["h",qt],["podid",at],["podseq",qt],["rqddurs",Vt],["placement",qt],["plcmt",qt],["linearity",qt],["skip",function(e){return[1,0].includes(e)}],["skipmin",qt],["skipafter",qt],["sequence",qt],["slotinpod",qt],["mincpmpersec",dt],["battr",Vt],["maxextended",qt],["minbitrate",qt],["maxbitrate",qt],["boxingallowed",qt],["playbackmethod",Vt],["playbackend",qt],["delivery",Vt],["pos",qt],["api",Vt],["companiontype",Vt],["poddedupe",Vt]]),fr=Rn("sync",(function(e,t,n,r,i){return n&&(i||r!==ur)?Z.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(Ke('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(r===ur&&!i&&!(e.renderer||t&&t.renderer||n.renderer))}),"checkVideoBidSetup"),gr=null,mr=0,vr=[];function yr(e,t){var n=mr,r=setTimeout((function(){mr===n&&null==gr?e():null!=gr?vr.push({callback:e,startTime:n,setTimerId:function(e){r=e}}):r=yr(e,mr-n)()}),t);return function(){return r}}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _r(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.startTime,a=void 0===i?Pt:i,s=r.ttl,l=void 0===s?function(){return null}:s,c=r.monotonic,u=void 0!==c&&c,p=r.slack,h=void 0===p?5e3:p,f=new Map,g=[],m=[],v=u?function(e){return m.push(e)}:function(e){return m.splice(function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=0,i=e.length&&e.length-1,o=n(t);i-r>1;){var a=r+Math.round((i-r)/2);o>n(e[a])?r=a:i=a}for(;e.length>r&&o>n(e[r]);)r++;return r}(m,e,(function(e){return e.expiry})),0,e)};function y(){if(n&&clearTimeout(n),m.length>0){var e=Pt();t=Math.max(e,m[0].expiry+h),n=yr((function(){for(var e=Pt(),t=0,r=function(){var n=o[i];if(n.expiry>e)return"break";g.forEach((function(e){try{e(n.item)}catch(e){Ke(e)}})),f.delete(n.item),t++},i=0,o=m;i<o.length&&"break"!==r();i++);m.splice(0,t),n=null,y()}),t-e)}else n=null}var b={};return d(e={},Symbol.iterator,(function(){return f.keys()})),d(e,"add",(function(e){!f.has(e)&&f.set(e,function(e){var r,i={},s=b,d=Object.entries({start:a,delta:l}).map((function(a){var d,l=o(a,2),c=l[0],u=l[1];return function(){var o=d={};he.resolve(u(e)).then((function(e){o===d&&(i[c]=e,s===b&&null!=i.start&&null!=i.delta&&(r=i.start+i.delta,v(f),(null==n||t>r+h)&&y()))}))}})),c=o(d,2),u=c[0],p=c[1],f={item:e,refresh:p,get expiry(){return r}};return u(),p(),f}(e))})),d(e,"clear",(function(){m.length=0,y(),f.clear(),b={}})),d(e,"toArray",(function(){return Array.from(f.keys())})),d(e,"refresh",(function(){m.length=0,y();var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return br(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(f.values());try{for(t.s();!(e=t.n()).done;)e.value.refresh()}catch(e){t.e(e)}finally{t.f()}})),d(e,"onExpiry",(function(e){return g.push(e),function(){var t=g.indexOf(e);t>=0&&g.splice(t,1)}})),e}document.addEventListener("visibilitychange",(function(){var e;document.hidden?gr=Date.now():(mr+=Date.now()-(null!==(e=gr)&&void 0!==e?e:0),gr=null,vr.forEach((function(e){var t=e.callback,n=e.startTime;return(0,e.setTimerId)(yr(t,mr-n)())})),vr=[])}));var wr="eventHistoryTTL",Sr=null,Tr=_r({monotonic:!0,ttl:function(){return Sr}});Z.getConfig(wr,(function(e){var t,n=Sr;e=null===(t=e)||void 0===t?void 0:t[wr],n!==(Sr="number"==typeof e?1e3*e:null)&&Tr.refresh()}));var Ir,kr=Array.prototype.slice,Ar=Array.prototype.push,Er=Object.values(x),Cr={bidWon:"adUnitCode"},xr=function(){var e={},t={};function n(e){return Er.includes(e)}return t.has=n,t.on=function(t,r,i){if(n(t)){var o=e[t]||{que:[]};i?(o[i]=o[i]||{que:[]},o[i].que.push(r)):o.que.push(r),e[t]=o}else Ke("Wrong event name : "+t+" Valid event names :"+Er)},t.emit=function(t){!function(t,n){Ge("Emitting event for: "+t);var r=n[0]||{},i=r[Cr[t]],o=e[t]||{que:[]},a=Object.keys(o),s=[];Tr.add({eventType:t,args:r,id:i,elapsedTime:window.performance&&window.performance.now&&window.performance.now()||0}),i&&a.includes(i)&&Ar.apply(s,o[i].que),Ar.apply(s,o.que),(s||[]).forEach((function(e){if(e)try{e.apply(null,n)}catch(e){Ke("Error executing handler:","events.js",e,t)}}))}(t,kr.call(arguments,1))},t.off=function(t,n,r){var i=e[t];ut(i)||ut(i.que)&&ut(i[r])||r&&(ut(i[r])||ut(i[r].que))||(r?(i[r].que||[]).forEach((function(e){var t=i[r].que;e===n&&t.splice(t.indexOf(e),1)})):(i.que||[]).forEach((function(e){var t=i.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=i)},t.get=function(){return e},t.addEvents=function(e){Er=Er.concat(e)},t.getEvents=function(){return Tr.toArray().map((function(e){return Object.assign({},e)}))},t}();Ir=xr.emit.bind(xr),me=Ir;var Or=xr.on,Pr=xr.off,Dr=(xr.get,xr.getEvents),Rr=xr.emit;function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}xr.addEvents,xr.has;var Mr="performanceMetrics",Nr=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},Ur=new WeakMap;function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,n=void 0===t?Nr:t,r=e.mkNode,i=void 0===r?Fr:r,o=e.mkTimer,a=void 0===o?qr:o,s=e.mkRenamer,d=void 0===s?function(e){return e}:s,l=e.nodes,c=void 0===l?Ur:l;return function(){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};r=d(r);var o=("timestamps",function(e){return t.dfWalk({visit:function(t,n){var r=n.timestamps;if(r.hasOwnProperty(e))return r[e]}})});function s(e,n){var i=r(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach((function(r){null==e?t.metrics[r]=n:(t.groups.hasOwnProperty(r)||(t.groups[r]=[]),t.groups[r].push(n))}))}})}function l(e){return a(n,(function(t){return s(e,t)}))}function u(){var e={};return t.dfWalk({visit:function(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}var p={startTiming:l,measureTime:function(e,t){return l(e).stopAfter(t)()},measureHookTime:function(e,t,n){var r=l(e);return n(function(e){var t=r.stopBefore(e);return t.bail=e.bail&&r.stopBefore(e.bail),t.stopTiming=r,t.untimed=e,t}(t))},checkpoint:function(e){t.timestamps[e]=n()},timeSince:function(e,t){var r=o(e),i=null!=r?n()-r:null;return null!=t&&s(t,i),i},timeBetween:function(e,t,n){var r=o(e),i=o(t),a=null!=r&&null!=i?i-r:null;return null!=n&&s(n,a),a},setMetric:s,getMetrics:u,fork:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.propagate,a=void 0===o||o,s=n.stopPropagation,d=void 0!==s&&s,l=n.includeGroups;return e(i([[t,{propagate:a,stopPropagation:d,includeGroups:void 0!==l&&l}]]),r)},join:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.propagate,i=void 0===r||r,o=n.stopPropagation,a=void 0!==o&&o,s=n.includeGroups,d=void 0!==s&&s,l=c.get(e);null!=l&&l.addParent(t,{propagate:i,stopPropagation:a,includeGroups:d})},newMetrics:function(){return e(t.newSibling(),r)},renameWith:function(n){return e(t,n)},toJSON:function(){return u()}};return c.set(p,t),p}(i([]))}}function Br(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function qr(e,t){var n=e(),r=!1;function i(){r||(t(e()-n),r=!0)}return i.stopBefore=function(e){return Br(e,i)},i.stopAfter=function(e){return Br(e,null,i)},i}function Fr(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,n){e.push([t,n])},newSibling:function(){return Fr(e.slice())},dfWalk:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.visit,i=n.follow,a=void 0===i?function(){return!0}:i,s=n.visited,d=void 0===s?new Set:s,l=n.inEdge;if(!d.has(this)){if(d.add(this),null!=(t=r(l,this)))return t;var c,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(u.s();!(c=u.n()).done;){var p=o(c.value,2),h=p[0],f=p[1];if(a(l,f)&&null!=(t=h.dfWalk({visit:r,follow:a,visited:d,inEdge:f})))return t}}catch(e){u.e(e)}finally{u.f()}}}}}var Vr=function(){var e=function(){},t=function(){return{}},n={forEach:e},r=function(){return null};r.stopBefore=function(e){return e},r.stopAfter=function(e){return e};var i=Object.defineProperties({dfWalk:e,newSibling:function(){return i},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return Lr({now:function(){return 0},mkNode:function(){return i},mkRenamer:function(){return function(){return n}},mkTimer:function(){return r},nodes:{get:e,set:e}})()}(),zr=!0;function $r(e){return zr&&e||Vr}Z.getConfig(Mr,(function(e){zr=!!e[Mr]}));var Wr,Hr=(Wr=Lr(),function(){return zr?Wr():Vr});function Gr(e,t){return function(n,r){return function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var d=this;return $r(t.apply(d,a)).measureHookTime(e+n,i,(function(e){return r.call.apply(r,[d,e].concat(a))}))}}}var Xr=Gr("requestBids.",(function(e){return e.metrics})),Jr=Gr("addBidResponse.",(function(e,t){return t.metrics})),Kr=Hn((function(e){return Co.resolveAlias(e)})),Yr=["cpm","ttl","creativeId","netRevenue","currency"],Qr=["auctionId","transactionId"];function Zr(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=ei(e);Co.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var r,i,o=t;lt(t)&&(o=t.code,r=t.gvlid,i=t.skipPbsAliasing),Co.aliasRegistry[o]=e.code,n(Object.assign({},e,{code:o,gvlid:r,skipPbsAliasing:i}))}))}function ei(e){return Object.assign(new dr(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(n,r,i,a,s,d){if(Array.isArray(n.bids)){var l=function(e){if(Qn(sr,Kr(En,e)))return{bidRequest:function(e){return e},bidderRequest:function(e){return e}};function t(e,t,n){return Qr.includes(t)?null:Reflect.get(e,t,n)}function n(e,t){var n=new Proxy(e,t);return Object.entries(e).filter((function(e){var t=o(e,2);return t[0],"function"==typeof t[1]})).forEach((function(t){var r=o(t,2),i=r[0],a=r[1];return n[i]=a.bind(e)})),n}var r=Yt((function(e){return n(e,{get:t})}),(function(e){return e.bidId}));return{bidRequest:r,bidderRequest:function(e){return n(e,{get:function(n,i,o){return"bids"===i?e.bids.map(r):t(n,i,o)}})}}}(n.bidderCode),c={},u=[],p=ai(n).measureTime("validate",(function(){return n.bids.filter((function(t){return n=l.bidRequest(t),!!e.isBidRequestValid(n)||(Je("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(n))),!1);var n}))}));if(0!==p.length){var h={};p.forEach((function(e){h[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),ni(e,p.map(l.bidRequest),l.bidderRequest(n),a,d,{onRequest:function(e){return Rr(x.BEFORE_BIDDER_HTTP,n,e)},onResponse:function(t){s(e.code),u.push(t)},onPaapi:function(e){var t=h[e.bidId];t?ii(t,e):Je("Received fledge auction configuration for an unknown bidId",e)},onError:function(t,r){r.timedOut||s(e.code),Co.callBidderError(e.code,r,n),Rr(x.BIDDER_ERROR,{error:r,bidderRequest:n}),Ke("Server call for ".concat(e.code," failed: ").concat(t," ").concat(r.status,". Continuing without bids."))},onBid:function(t){var n,i,o,a,s=h[t.requestId];if(s){if(t.adapterCode=s.bidder,n=t.bidderCode,i=s.bidder,o=kn.get(i,"allowAlternateBidderCodes")||!1,a=kn.get(i,"allowedAlternateBidderCodes"),n&&i&&i!==n&&(a=st(a)?a.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(wt):a,!o||st(a)&&"*"!==a[0]&&!a.includes(n)))return Je("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(s.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void r.reject(s.adUnitCode,t,N.BIDDER_DISALLOWED);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[s.bidder]);var d=Object.assign(cr(C.GOOD,s),t,Ft(s,Qr));!function(e,t){var n=$r(t.metrics);n.checkpoint("addBidResponse"),c[e]=!0,n.measureTime("addBidResponse.validate",(function(){return oi(e,t)}))?r(e,t):r.reject(e,t,N.INVALID)}(s.adUnitCode,d)}else Je("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),r.reject(null,t,N.INVALID_REQUEST_ID)},onCompletion:f})}else f()}function f(){i(),Z.runWithBidder(e.code,(function(){Rr(x.BIDDER_DONE,n),t(u,n.gdprConsent,n.uspConsent,n.gppConsent)}))}}});function t(t,n,r,i){ri(e,t,n,r,i)}}var ti=["bids","paapi"],ni=Rn("sync",(function(e,t,n,r,i,o){var s=o.onRequest,d=o.onResponse,l=o.onPaapi,c=o.onError,u=o.onBid,p=o.onCompletion,h=ai(n);p=h.startTiming("total").stopBefore(p);var f=h.measureTime("buildRequests",(function(){return e.buildRequests(t,n)}));if(f&&0!==f.length){Array.isArray(f)||(f=[f]);var g=jt(p,f.length);f.forEach((function(t){var n=h.fork();function o(e){null!=e&&(e.metrics=n.fork().renameWith()),u(e)}var p=i((function(r,i){m();try{r=JSON.parse(r)}catch(e){}r={body:r,headers:{get:i.getResponseHeader.bind(i)}},d(r);try{r=n.measureTime("interpretResponse",(function(){return e.interpretResponse(r,t)}))}catch(t){return Ke("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void g()}var a,s;r&&!Object.keys(r).some((function(e){return!ti.includes(e)}))?(a=r.bids,s=r.paapi):a=r,st(s)&&s.forEach(l),a&&(st(a)?a.forEach(o):o(a)),g()})),f=i((function(e,t){m(),c(e,t),g()}));s(t);var m=n.startTiming("net");function v(n){var r,i=t.options;return Object.assign(n,i,{browsingTopics:!(null!=i&&i.hasOwnProperty("browsingTopics")&&!i.browsingTopics)&&(null===(r=kn.get(e.code,"topicsHeader"))||void 0===r||r)&&Qn(or,Kr(En,e.code))})}switch(t.method){case"GET":r("".concat(t.url).concat(function(e){return e?"?".concat("object"===a(e)?function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.replace(/&$/,"")}(e):e):""}(t.data)),{success:p,error:f},void 0,v({method:"GET",withCredentials:!0}));break;case"POST":r(t.url,{success:p,error:f},"string"==typeof t.data?t.data:JSON.stringify(t.data),v({method:"POST",contentType:"text/plain",withCredentials:!0}));break;default:Je("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),g()}}))}else p()}),"processBidderRequests"),ri=Rn("async",(function(e,t,n,r,i){var o=Z.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!Co.aliasRegistry[e.code])){var a=Z.getConfig("userSync.filterSettings"),s=e.getUserSyncs({iframeEnabled:!(!a||!a.iframe&&!a.all),pixelEnabled:!(!a||!a.image&&!a.all)},t,n,r,i);s&&(Array.isArray(s)||(s=[s]),s.forEach((function(t){Bo.registerSync(t.type,e.code,t.url)})),Bo.bidderDone(e.code))}}),"registerSyncs"),ii=Rn("sync",(function(e,t){}),"addPaapiConfig");function oi(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===r?wa.index:r;function a(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(n=Object.keys(t),Yr.every((function(e){return f(n,e)&&!f([void 0,null],t[e])}))?"native"!==t.mediaType||function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=(void 0===n?wa.index:n).getAdUnit(e);if(!r)return!1;var i=r.nativeOrtbRequest;return function(e,t){if(!A(e,"link.url"))return Ke("native response doesn't have 'link' property. Ortb response: ",e),!1;var n=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),r=e.assets.map((function(e){return e.id})),i=n.every((function(e){return f(r,e)}));return i||Ke("didn't receive a bid with all required assets. Required ids: ".concat(n,", but received ids in response: ").concat(r)),i}((null===(t=e.native)||void 0===t?void 0:t.ortb)||ds(e.native,i),i)}(t,{index:i})?"video"!==t.mediaType||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?wa.index:t,r=A(n.getMediaTypes(e),"video"),i=r&&A(r,"context"),o=r&&A(r,"useCacheKey"),a=n.getAdUnit(e);return fr(e,a,r,i,o)}(t,{index:i})?!("banner"===t.mediaType&&!function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?wa.index:n;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var i=r.getBidRequest(t),a=r.getMediaTypes(t),s=Be(i&&i.sizes||a&&a.banner&&a.banner.sizes);if(1===s.length){var d=o(s[0].split("x"),2),l=d[0],c=d[1];return t.width=parseInt(l,10),t.height=parseInt(c,10),!0}return!1}(e,t,{index:i})&&(Ke(a("Banner bids require a width and height")),1)):(Ke(a("Video bid does not have required vastUrl or renderer property")),!1):(Ke(a("Native bid missing some required properties.")),!1):(Ke(a("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)):(Je("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):(Je("No adUnitCode was supplied to addBidResponse."),!1)}function ai(e){return $r(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}var si={};function di(e,t,n){var r=function(e,t){var n=si[e]=si[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return r[t]=(r[t]||0)+1,r[t]}function li(e){return A(si,"".concat(e,".requestsCounter"))||0}function ci(e,t){return A(si,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0}function ui(e,t){return A(si,"".concat(e,".bidders.").concat(t,".winsCounter"))||0}function pi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noLeadingWww,r=void 0!==n&&n,i=t.noPort,o=void 0!==i&&i;try{e=new URL(pi(e))}catch(e){return}return e=o?e.hostname:e.host,r&&e.startsWith("www.")&&(e=e.substring(4)),e}function fi(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}var gi,mi=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var o=fi(i.document),a=i.location.href;return t===o&&a===n||(t=o,n=a,r=e()),r}}((gi=window,function(){var e,t,n,r,i=[],o=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(gi),a=Z.getConfig("maxNestedIframes"),s=!1,d=0,l=!1,c=!1,u=!1;do{var p=e,h=c,f=void 0,g=!1,m=null;c=!1,e=e?e.parent:gi;try{f=e.location.href||null}catch(e){g=!0}if(g)if(h){var v=p.context;try{t=m=v.sourceUrl,u=!0,l=!0,e===gi.top&&(s=!0),v.canonicalUrl&&(n=v.canonicalUrl)}catch(e){}}else{Je("Trying to access cross domain iframe. Continuing without referrer and location");try{var y=p.document.referrer;y&&(m=y,e===gi.top&&(s=!0))}catch(e){}!m&&o&&o[d-1]&&(m=o[d-1],e===gi.top&&(u=!0)),m&&!l&&(t=m)}else{if(f&&(t=m=f,l=!1,e===gi.top)){s=!0;var b=fi(e.document);b&&(n=b)}e.context&&e.context.sourceUrl&&(c=!0)}i.push(m),d++}while(e!==gi.top&&d<a);i.reverse();try{r=gi.top.document.referrer}catch(e){}var _=s||u?t:null,w=Z.getConfig("pageUrl")||n||null,S=Z.getConfig("pageUrl")||_||pi(w,gi);return _&&_.indexOf("?")>-1&&-1===S.indexOf("?")&&(S="".concat(S).concat(_.substring(_.indexOf("?")))),{reachedTop:s,isAmp:l,numIframes:d-1,stack:i,topmostLocation:t||null,location:_,canonicalUrl:w,page:S,domain:hi(S)||null,ref:r||null,legacy:{reachedTop:s,isAmp:l,numIframes:d-1,stack:i,referer:t||null,canonicalUrl:w}}}));function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yi(e,t){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yi(e,t)}function bi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yi(e,t)}function _i(e){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(e)}function wi(e){var t=Si();return function(){var n,r=_i(e);if(t){var i=_i(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vi(e)}(this,n)}}function Si(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Si=function(){return!!e})()}function Ti(e,t,n){Ii(e,t),t.set(e,n)}function Ii(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ki(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}var Ai=Object.freeze({}),Ei=new WeakMap,Ci=new WeakMap,xi=new WeakMap,Oi=new WeakMap,Pi=new WeakMap,Di=new WeakMap,Ri=new WeakSet,ji=function(){function e(){te(this,e),function(e,t){Ii(e,t),t.add(e)}(this,Ri),Ti(this,Ei,{writable:!0,value:void 0}),Ti(this,Ci,{writable:!0,value:void 0}),Ti(this,xi,{writable:!0,value:void 0}),Ti(this,Oi,{writable:!0,value:void 0}),Ti(this,Pi,{writable:!0,value:!0}),Ti(this,Di,{writable:!0,value:void 0}),d(this,"generatedTime",void 0),d(this,"hashFields",void 0),this.reset()}return re(e,[{key:"reset",value:function(){ae(this,xi,ge()),ae(this,Ei,!1),ae(this,Ci,null),ae(this,Oi,!1),this.generatedTime=null}},{key:"enable",value:function(){ae(this,Ei,!0)}},{key:"enabled",get:function(){return oe(this,Ei)}},{key:"ready",get:function(){return oe(this,Oi)}},{key:"promise",get:function(){return oe(this,Oi)?he.resolve(oe(this,Ci)):(oe(this,Ei)||ki(this,Ri,Mi).call(this,null),oe(this,xi).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt();this.generatedTime=t,ae(this,Pi,!0),ki(this,Ri,Mi).call(this,e)}},{key:"getConsentData",value:function(){return oe(this,Ci)}},{key:"hash",get:function(){var e=this;return oe(this,Pi)&&(ae(this,Di,Jt(JSON.stringify(oe(this,Ci)&&this.hashFields?this.hashFields.map((function(t){return oe(e,Ci)[t]})):oe(this,Ci)))),ae(this,Pi,!1)),oe(this,Di)}}]),e}();function Mi(e){ae(this,Oi,!0),ae(this,Ci,e),oe(this,xi).resolve(e)}var Ni,Ui,Li,Bi=function(e){bi(n,e);var t=wi(n);function n(){return te(this,n),t.apply(this,arguments)}return re(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),n}(ji),qi=function(e){bi(n,e);var t=wi(n);function n(){var e;te(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return d(vi(e=t.call.apply(t,[this].concat(i))),"hashFields",["gdprApplies","consentString"]),e}return re(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:at(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),n}(ji),Fi=function(e){bi(n,e);var t=wi(n);function n(){var e;te(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return d(vi(e=t.call.apply(t,[this].concat(i))),"hashFields",["applicableSections","gppString"]),e}return re(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),n}(ji),Vi=new qi,zi=new Bi,$i=new Fi,Wi=function(){function e(){return!!Z.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset:function(){},get promise(){return he.resolve(e())},get hash(){return e()?"1":"0"}}}(),Hi=(Ni={},Ui={},Li={},{register:function(e,t,n){n&&((Ni[t]=Ni[t]||{})[e]=n,Ui.hasOwnProperty(t)?Ui[t]!==n&&(Ui[t]=Li):Ui[t]=n)},get:function(e){var t={modules:Ni[e]||{}};return Ui.hasOwnProperty(e)&&Ui[e]!==Li&&(t.gvlid=Ui[e]),t}}),Gi={gdpr:Vi,usp:zi,gpp:$i,coppa:Wi},Xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi;return e=Object.entries(e),Object.assign({get promise(){return he.all(e.map((function(e){var t=o(e,2),n=t[0];return t[1].promise.then((function(e){return[n,e]}))}))).then((function(e){return Object.fromEntries(e)}))},get hash(){return Jt(e.map((function(e){var t=o(e,2);return t[0],t[1].hash})).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((function(t){return[t,(n=t,function(){return Object.fromEntries(e.map((function(e){var t=o(e,2);return[t[0],t[1][n]()]})))})];var n}))))}();function Ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ki=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map((function(e){return"user.".concat(e)})).concat("device.ext.cdep"),Yi=["user.eids","user.ext.eids"],Qi=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"];function Zi(e){return Object.assign({get:function(){},run:function(e,t,n,r,i){var o=n&&n[r];if(no(o)&&i()){var a=this.get(o);void 0===a?delete n[r]:n[r]=a}}},e)}function eo(e){return e.forEach((function(e){e.paths=e.paths.map((function(e){var t=e.split("."),n=t.pop();return[t.length>0?t.join("."):null,n]}))})),function(t,n){for(var r=[],i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];var d=to.apply(void 0,[t].concat(a));return e.forEach((function(e){if(!1!==t[e.name]){var i,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ji(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ji(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.paths);try{for(a.s();!(i=a.n()).done;){var s=o(i.value,2),l=s[0],c=s[1],u=null==l?n:A(n,l);if(r.push(e.run(n,l,u,c,d.bind(null,e))),!1===t[e.name])return}}catch(e){a.e(e)}finally{a.f()}}})),r.filter((function(e){return null!=e}))}}function to(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t){return e.hasOwnProperty(t.name)||(e[t.name]=!!t.applies.apply(t,n)),e[t.name]}}function no(e){return null!=e&&("object"!==a(e)||Object.keys(e).length>0)}function ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn;return function(n){return!t(e,n)}}function io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn;return[{name:or,paths:Ki,applies:ro(or,e)},{name:ir,paths:Yi,applies:ro(ir,e)},{name:ar,paths:Qi,applies:ro(ar,e),get:function(e){return Math.round(100*(e+Number.EPSILON))/100}},{name:sr,paths:["source.tid"],applies:ro(sr,e)}].map(Zi)}var oo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=eo(io(e)),n=eo(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn;return[{name:ir,paths:["userId","userIdAsEids"],applies:ro(ir,e)},{name:sr,paths:["ortb2Imp.ext.tid"],applies:ro(sr,e)}].map(Zi)}(e));return function(e){var r={};return{ortb2:function(n){return t(r,n,e),n},bidRequest:function(t){return n(r,t,e),t}}}}();function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yn(sr,"enableTIDs config",(function(){if(!Z.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}}));var lo="pbsBidAdapter",co="client",uo="server",po={isAllowed:Qn,redact:oo},ho={},fo=ho.bidderRegistry={},go=ho.aliasRegistry={},mo=[];Z.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(mo=st(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var vo={},yo=Hn((function(e){return ho.resolveAlias(e)}));function bo(e){return yo(An,lo,d({},"configName",e.configName))}var _o=Rn("sync",(function(e){var t=e.bidderCode,n=e.auctionId,r=e.bidderRequestId,i=e.adUnits,o=e.src,a=e.metrics;return i.reduce((function(e,i){var s=i.bids.filter((function(e){return e.bidder===t}));return null==t&&0===s.length&&null!=i.s2sBid&&s.push({bidder:null}),e.push(s.reduce((function(e,s){var d=null==(s=Object.assign({},s,{ortb2Imp:Xt({},i.ortb2Imp,s.ortb2Imp)},Nt(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:s.mediaTypes;return function(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return f(t,e)}))&&(!e.video||!e.video.context||f(["instream","outstream","adpod"],e.video.context))}(d)?s=Object.assign({},s,{mediaTypes:d}):Ke("mediaTypes is not correctly configured for adunit ".concat(i.code)),"client"===o&&function(e,t){di(e,"requestsCounter",t)}(i.code,t),e.push(Object.assign({},s,{adUnitCode:i.code,transactionId:i.transactionId,adUnitId:i.adUnitId,sizes:A(d,"banner.sizes")||A(d,"video.playerSize")||[],bidId:s.bid_id||Me(),bidderRequestId:r,auctionId:n,src:o,metrics:a,bidRequestsCount:li(i.code),bidderRequestsCount:ci(i.code,s.bidder),bidderWinsCount:ui(i.code,s.bidder)})),e}),[])),e}),[]).reduce(St,[]).filter((function(e){return""!==e}))}),"getBids"),wo=Rn("sync",(function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders;if(null==t)return e;var r=(void 0===n?To:n)(t);return e.filter((function(e){return r.has(e.bidder)}))}),"filterBidsForAdUnit"),So=Rn("sync",(function(e,t){return e}),"setupAdUnitMediaTypes");function To(e){st(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var Io=Rn("sync",(function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders,i=(void 0===r?To:r)(t);return kt(e).reduce((function(e,t){return e[i.has(t)?uo:co].push(t),e}),(d(n={},co,[]),d(n,uo,[]),n))}),"partitionBidders");function ko(e,t){var n=fo[e],r=(null==n?void 0:n.getSpec)&&n.getSpec();if(r&&r[t]&&"function"==typeof r[t])return[r,r[t]]}function Ao(e,t,n,r){try{Xe("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];Z.runWithBidder(e,r.bind.apply(r,[n].concat(o)))}catch(n){Je("Error calling ".concat(t," of ").concat(e))}}function Eo(e,t,n){if((null==n?void 0:n.src)!==j){var r=ko(e,t);null!=r&&Ao.apply(void 0,[e,t].concat(h(r),[n]))}}ho.makeBidRequests=Rn("sync",(function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6?arguments[6]:void 0;a=$r(a),Rr(x.BEFORE_REQUEST_BIDS,e),function(e){e.forEach((function(e){var t=e.nativeParams||A(e,"mediaTypes.native");t&&(e.nativeParams=Ya(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(e||lt(e)){var t={ver:"1.2",assets:[]};for(var n in e)if(!q.includes(n))if(R.hasOwnProperty(n))if("privacyLink"!==n){var r=e[n],i=0;r.required&&ct(r.required)&&(i=Number(r.required));var o={id:t.assets.length,required:i};if(n in U)o.data={type:L[U[n]]},r.len&&(o.data.len=r.len);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?B.ICON:B.MAIN},r.aspect_ratios)if(st(r.aspect_ratios))if(r.aspect_ratios.length){var a=r.aspect_ratios[0],s=a.min_width,d=a.min_height;qt(s)&&qt(d)?(o.img.wmin=s,o.img.hmin=d):Ke("image.aspect_ratios min_width or min_height are invalid: ",s,d);var l=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));l.length>0&&(o.img.ext={aspectratios:l})}else Ke("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else Ke("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&qt(r.sizes[0])&&qt(r.sizes[1])?(o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):Ke("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===n?o.title={len:r.len||140}:"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}else t.privacy=1;else Ke("Unrecognized native asset code: ".concat(n,". Asset will be ignored."));return t}Ke("Native assets object is empty or not an object: ",e)}(e.nativeParams))}))}(e),e.forEach((function(e){lt(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter((function(e){return!e.bidder||po.isAllowed(rr,yo(En,e.bidder))})),di(e.code,"requestsCounter")})),e=So(e,i);var s=Io(e,mo),d=s[co],l=s[uo];Z.getConfig("bidderSequence")===J&&(d=Et(d));var c=mi(),u=[],p=o.global||{},h=o.bidder||{};function f(e,t){var r=po.redact(null!=t?t:yo(En,e.bidderCode)),i=Object.freeze(r.ortb2(Xt({source:{tid:n}},p,h[e.bidderCode])));return e.ortb2=i,e.bids=e.bids.map((function(e){return e.ortb2=i,r.bidRequest(e)})),e}mo.forEach((function(r){var i=bo(r);if(r&&r.enabled&&po.isAllowed(rr,i)){var o=function(e,t){var n=Ct(e),r=!1;return n.forEach((function(e){var n=e.bids.filter((function(e){var n;return e.module===lo&&(null===(n=e.params)||void 0===n?void 0:n.configName)===t.configName}));1===n.length?(e.s2sBid=n[0],r=!0,e.ortb2Imp=Xt({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&Je('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=wo(e.bids,t).map((function(e){return e.bid_id=Me(),e}))})),{adUnits:n=n.filter((function(e){return 0!==e.bids.length||null!=e.s2sBid})),hasModuleBids:r}}(e,r),s=o.adUnits,d=o.hasModuleBids,p=Ne();(0===l.length&&d?[null]:l).forEach((function(e){var o=Me(),d=a.fork(),l=f({bidderCode:e,auctionId:n,bidderRequestId:o,uniquePbsTid:p,bids:_o({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:Ct(s),src:j,metrics:d}),auctionStart:t,timeout:r.timeout,src:j,refererInfo:c,metrics:d},i);0!==l.bids.length&&u.push(l)})),s.forEach((function(e){var t=e.bids.filter((function(e){return g(u,(function(t){return g(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),u.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=s.filter((function(e){return e.bids.length>0||null!=e.s2sBid})))}))}}));var m=function(e){var t=Ct(e);return t.forEach((function(e){e.bids=wo(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}(e);return d.forEach((function(e){var o=Me(),s=a.fork(),d=f({bidderCode:e,auctionId:n,bidderRequestId:o,bids:_o({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:Ct(m),labels:i,src:"client",metrics:s}),auctionStart:t,timeout:r,refererInfo:c,metrics:s}),l=fo[e];l||Ke("Trying to make a request for bidder that does not exist: ".concat(e)),l&&d.bids&&0!==d.bids.length&&u.push(d)})),u.forEach((function(e){Vi.getConsentData()&&(e.gdprConsent=Vi.getConsentData()),zi.getConsentData()&&(e.uspConsent=zi.getConsentData()),$i.getConsentData()&&(e.gppConsent=$i.getConsentData())})),u}),"makeBidRequests"),ho.callBids=function(e,t,n,r,i,a,s){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var l=o(t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===j)].push(t),e}),[[],[]]),2),c=l[0],u=l[1],p=[];u.forEach((function(e){for(var t=-1,n=0;n<p.length;++n)if(e.uniquePbsTid===p[n].uniquePbsTid){t=n;break}t<=-1&&p.push(e)}));var h=0;mo.forEach((function(e){if(e&&p[h]&&To(e).has(p[h].bidderCode)){var t=an(a,i?{request:i.request.bind(null,"s2s"),done:i.done}:void 0),o=e.bidders,l=fo[e.adapter],c=p[h].uniquePbsTid,f=p[h].adUnitsS2SCopy,g=u.filter((function(e){return e.uniquePbsTid===c}));if(l){var m={ad_units:f,s2sConfig:e,ortb2Fragments:d,requestBidsTimeout:a};if(m.ad_units.length){var v=g.map((function(e){return e.start=Pt(),function(t){t||s(e.bidderRequestId),r.apply(e,arguments)}})),y=kt(m.ad_units).filter((function(e){return o.includes(e)}));Ge("CALLING S2S HEADER BIDDERS ==== ".concat(y.length>0?y.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),g.forEach((function(e){Rr(x.BID_REQUESTED,so(so({},e),{},{tid:e.auctionId}))})),l.callBids(m,u,n,(function(e){return v.forEach((function(t){return t(e)}))}),t)}}else Ke("missing "+e.adapter);h++}})),c.forEach((function(e){e.start=Pt();var t=fo[e.bidderCode];Z.runWithBidder(e.bidderCode,(function(){Ge("CALLING BIDDER"),Rr(x.BID_REQUESTED,e)}));var o=an(a,i?{request:i.request.bind(null,e.bidderCode),done:i.done}:void 0),d=r.bind(e);try{Z.runWithBidder(e.bidderCode,t.callBids.bind(t,e,n,d,o,(function(){return s(e.bidderRequestId)}),Z.callbackWithBidder(e.bidderCode)))}catch(t){Ke("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),d()}}))}else Je("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},ho.videoAdapters=[],ho.registerBidAdapter=function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,i=void 0===r?[]:r;e&&t?"function"==typeof e.callBids?(fo[t]=e,Hi.register(En,t,null===(n=e.getSpec)||void 0===n?void 0:n.call(e).gvlid),f(i,"video")&&ho.videoAdapters.push(t),f(i,"native")&&$a.push(t)):Ke("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):Ke("bidAdapter or bidderCode not specified")},ho.aliasBidAdapter=function(e,t,n){if(void 0===fo[t]){var r=fo[e];if(void 0===r){var i=[];mo.forEach((function(n){if(n.bidders&&n.bidders.length){var r=n&&n.bidders;n&&f(r,t)?go[t]=e:i.push(e)}})),i.forEach((function(e){Ke('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var o,a=function(e){var t=[];return f(ho.videoAdapters,e)&&t.push("video"),f($a,e)&&t.push("native"),t}(e);if(r.constructor.prototype!=Object.prototype)(o=new r.constructor).setBidderCode(t);else{var s=r.getSpec(),d=n&&n.gvlid;null!=s.gvlid&&null==d&&Je("Alias '".concat(t,"' will NOT re-use the GVL ID of the original adapter ('").concat(s.code,"', gvlid: ").concat(s.gvlid,"). Functionality that requires TCF consent may not work as expected."));var l=n&&n.skipPbsAliasing;o=ei(Object.assign({},s,{code:t,gvlid:d,skipPbsAliasing:l})),go[t]=e}ho.registerBidAdapter(o,t,{supportedMediaTypes:a})}catch(t){Ke(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else Ge('alias name "'+t+'" has been already specified.')},ho.resolveAlias=function(e){for(var t,n=e;go[n]&&(!t||!t.has(n));)n=go[n],(t=t||new Set).add(n);return n},ho.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,r=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,vo[n]={adapter:t,gvlid:r},Hi.register(On,n,r)):Ke('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):Ke("Prebid Error: analyticsAdapter or analyticsCode not specified")},ho.enableAnalytics=function(e){st(e)||(e=[e]),e.forEach((function(e){var t=vo[e.provider];t&&t.adapter?po.isAllowed("reportAnalytics",yo(On,e.provider,d({},"_config",e)))&&t.adapter.enableAnalytics(e):Ke("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},ho.getBidAdapter=function(e){return fo[e]},ho.getAnalyticsAdapter=function(e){return vo[e]},ho.callTimedOutBidders=function(e,t,n){t=Mt(t=t.map((function(t){return t.params=Ut(e,t.adUnitCode,t.bidder),t.timeout=n,t})),"bidder"),Object.keys(t).forEach((function(e){Eo(e,"onTimeout",t[e])}))},ho.callBidWonBidder=function(e,t,n){t.params=Ut(n,t.adUnitCode,t.bidder),di(t.adUnitCode,"winsCounter",t.bidder),Eo(e,"onBidWon",t)},ho.callBidBillableBidder=function(e){Eo(e.bidder,"onBidBillable",e)},ho.callSetTargetingBidder=function(e,t){Eo(e,"onSetTargeting",t)},ho.callBidViewableBidder=function(e,t){Eo(e,"onBidViewable",t)},ho.callBidderError=function(e,t,n){Eo(e,"onBidderError",{error:t,bidderRequest:n})},ho.callAdRenderSucceededBidder=function(e,t){Eo(e,"onAdRenderSucceeded",t)},ho.callDataDeletionRequest=Rn("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="onDataDeletionRequest";Object.keys(fo).filter((function(e){return!go.hasOwnProperty(e)})).forEach((function(e){var n=ko(e,r);if(null!=n){var i=wa.getBidsRequested().filter((function(t){return function(e){for(var t=new Set;go.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=go[e];return e}(t.bidderCode)===e}));Ao.apply(void 0,[e,r].concat(h(n),[i],t))}})),Object.entries(vo).forEach((function(e){var n,i=o(e,2),a=i[0],s=i[1],d=null==s||null===(n=s.adapter)||void 0===n?void 0:n[r];if("function"==typeof d)try{d.apply(s.adapter,t)}catch(e){Ke("error calling ".concat(r," of ").concat(a),e)}}))}));const Co=ho;function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Po="html5",Do="cookie",Ro=[];function jo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,n=e.moduleType,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isAllowed,i=void 0===r?Qn:r;function o(e,r){var o=t,a=Z.getCurrentBidder();return a&&n===En&&Co.aliasRegistry[a]===t&&(o=a),e({valid:i(Zn,Kr(n,o,d({},$n,r)))})}function a(e,t,n){if(!n||"function"!=typeof n)return o(e,t);Ro.push((function(){var r=o(e,t);n(r)}))}function s(e){var t,n=e.charAt(0).toUpperCase()+e.substring(1),r=function(){return window[e]},i=function(t){return a((function(t){if(t&&t.valid)try{return!!r()}catch(t){Ke("".concat(e," api disabled"))}return!1}),Po,t)};return d(t={},"has".concat(n),i),d(t,"".concat(e,"IsEnabled"),(function(e){return a((function(e){if(e&&e.valid)try{return r().setItem("prebid.cookieTest","1"),"1"===r().getItem("prebid.cookieTest")}catch(e){}finally{try{r().removeItem("prebid.cookieTest")}catch(e){}}return!1}),Po,e)})),d(t,"setDataIn".concat(n),(function(e,t,n){return a((function(n){n&&n.valid&&i()&&r().setItem(e,t)}),Po,n)})),d(t,"getDataFrom".concat(n),(function(e,t){return a((function(t){return t&&t.valid&&i()?r().getItem(e):null}),Po,t)})),d(t,"removeDataFrom".concat(n),(function(e,t){return a((function(t){t&&t.valid&&i()&&r().removeItem(e)}),Po,t)})),t}return Oo(Oo(Oo({setCookie:function(e,t,n,r,i,o){return a((function(o){if(o&&o.valid){var a=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=n&&""!==n?" ;expires=".concat(n):"",d=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(a).concat(r?"; SameSite=".concat(r):"").concat(d)}}),Do,o)},getCookie:function(e,t){return a((function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null}),Do,t)},cookiesAreEnabled:function(e){return a((function(e){return!(!e||!e.valid)&&Rt()}),Do,e)}},s("localStorage")),s("sessionStorage")),{},{findSimilarCookies:function(e,t){return a((function(t){if(t&&t.valid){var n=[];if(Dt())for(var r=document.cookie.split(";");r.length;){var i=r.pop(),o=i.indexOf("=");o=o<0?i.length:o,decodeURIComponent(i.slice(0,o).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(i.slice(o+1)))}return n}}),Do,t)}})}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,n=e.moduleName,r=e.bidderCode;function i(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return r?((t&&t!==En||n)&&i(),t=En,n=r):n&&t||i(),jo({moduleType:t,moduleName:n})}function No(e){return jo({moduleName:e,moduleType:An})}Yn(Zn,"deviceAccess config",(function(){if(!Dt())return{allow:!1}})),Yn(Zn,"bidderSettings.*.storageAllowed",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kn;if(e[Fn]===En){var n=t.get(e[zn],"storageAllowed");if(n&&!0!==n){var r=e[$n];n=Array.isArray(n)?n.some((function(e){return e===r})):n===r}else n=!!n;return n?void 0:{allow:n}}}));var Uo={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:500};Z.setDefaults({userSync:Ct(Uo)});var Lo=No("usersync"),Bo=function(e){var t={},n={image:[],iframe:[]},r=new Set,i={},a={image:!0,iframe:!1},s=e.config;function l(){if(s.syncEnabled&&e.browserSupportsCookies){try{a.iframe&&c(n.iframe,(function(e){var t=o(e,2),r=t[0],i=t[1];Ge("Invoking iframe user sync for bidder: ".concat(r)),yt(i),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,r)})),a.image&&c(n.image,(function(e){var t=o(e,2),n=t[0],r=t[1];Ge("Invoking image pixel user sync for bidder: ".concat(n)),vt(r)}))}catch(e){return Ke("Error firing user syncs",e)}n={image:[],iframe:[]}}}function c(e,t){Et(e).forEach(t)}return Z.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;lt(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}s=Object.assign(s,e.userSync)})),e.regRule(er,"userSync config",(function(e){if(!s.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[Fn]===En){var n=e[Wn],r=e[Vn];if(!t.canBidderRegisterSync(n,r))return{allow:!1,reason:"".concat(n," syncs are not enabled for ").concat(r)}}})),t.registerSync=function(t,o,a){var l;return r.has(o)?Ge('already fired syncs for "'.concat(o,'", ignoring registerSync call')):s.syncEnabled&&st(n[t])?o?0!==s.syncsPerBidder&&Number(i[o])>=s.syncsPerBidder?Je('Number of user syncs exceeded for "'.concat(o,'"')):void(e.isAllowed(er,Kr(En,o,(l={},d(l,Wn,t),d(l,"syncUrl",a),l)))&&(n[t].push([o,a]),i=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(i,o))):Je("Bidder is required for registering sync"):Je('User sync type "'.concat(t,'" not supported'))},t.bidderDone=r.add.bind(r),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(l,Number(e));l()},t.triggerUserSyncs=function(){s.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!s.filterSettings||!function(e,t){var n=s.filterSettings;if(function(e,t){if(e.all&&e[t])return Je('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;var i=n.filter,o=n.bidders;return i&&"include"!==i&&"exclude"!==i?(Je('UserSync "filterSettings.'.concat(r,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every((function(e){return at(e)&&"*"!==e})))||(Je('Detected an invalid setup in userSync "filterSettings.'.concat(r,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(n,e)){a[e]=!0;var r=n.all?n.all:n[e],i="*"===r.bidders?[t]:r.bidders,o={include:function(e,t){return!f(e,t)},exclude:function(e,t){return f(e,t)}};return o[r.filter||"include"](i,t)}return!a[e]}(e,t)},t}(Object.defineProperties({config:Z.getConfig("userSync"),isAllowed:Qn,regRule:Yn},{browserSupportsCookies:{get:function(){return!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&Lo.cookiesAreEnabled()}}})),qo="native",Fo="video",Vo="banner",zo="adpod";function $o(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.index,a=void 0===o?wa.index:o,s=i.bs,d=void 0===s?kn:s;n=n||a.getBidRequest(t);var l=null==t?void 0:t.adapterCode,c=(null==t?void 0:t.bidderCode)||(null===(r=n)||void 0===r?void 0:r.bidder),u=d.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),p=d.getOwn(c,"bidCpmAdjustment")||d.get(u?l:c,"bidCpmAdjustment");if(p&&"function"==typeof p)try{return p(e,Object.assign({},t),n)}catch(e){Ke("Error during bid adjustment",e)}return e}var Wo=Bo.syncUsers,Ho="completed";Or(x.BID_ADJUSTMENT,(function(e){!function(e){var t=$o(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));var Go={},Xo={},Jo=[],Ko=u();function Yo(e){var t=e.adUnits,n=e.adUnitCodes,r=e.callback,i=e.cbTimeout,o=e.labels,s=e.auctionId,d=e.ortb2Fragments,l=e.metrics;l=$r(l);var c,u,p,g,m=t,v=o,y=n,b=s||Ne(),_=i,w=new Set,T=ge(),I=[],k=r,E=[],C=[],O=[],P=[],D=[];function R(){return{auctionId:b,timestamp:c,auctionEnd:u,auctionStatus:g,adUnits:m,adUnitCodes:y,labels:v,bidderRequests:E,noBids:O,bidsReceived:C,bidsRejected:I,winningBids:P,timeout:_,metrics:l,seatNonBids:D}}function M(e){if(e?Rr(x.AUCTION_TIMEOUT,R()):clearTimeout(p),void 0===u){var n=[];e&&(Ge("Auction ".concat(b," timedOut")),(n=E.filter((function(e){return!w.has(e.bidderRequestId)})).flatMap((function(e){return e.bids}))).length&&Rr(x.BID_TIMEOUT,n)),g=Ho,u=Date.now(),l.checkpoint("auctionEnd"),l.timeBetween("requestBids","auctionEnd","requestBids.total"),l.timeBetween("callBids","auctionEnd","requestBids.callBids"),T.resolve(),Rr(x.AUCTION_END,R()),ta(m,(function(){try{if(null!=k){var r=C.filter((function(e){return y.includes(e.adUnitCode)})).reduce(ha,{});k.apply(Ko,[r,e,b]),k=null}}catch(e){Ke("Error executing bidsBackHandler",null,e)}finally{n.length&&Co.callTimedOutBidders(t,n,_);var i=Z.getConfig("userSync")||{};i.enableOverride||Wo(i.syncDelay)}}))}}function N(){Z.resetBidder(),Xe("Bids Received for Auction with id: ".concat(b),C),g=Ho,M(!1)}function U(e){w.add(e)}function L(e){var t=this;e.forEach((function(e){var t;t=e,E=E.concat(t)}));var n={},r={bidRequests:e,run:function(){p=setTimeout((function(){return M(!0)}),_),g="inProgress",Rr(x.AUCTION_INIT,R());var r=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?wa.index:n,i=0,o=!1,s=new Set,d={};function l(){i--,o&&0===i&&e()}function c(e,t,n){return d[t.requestId]=!0,function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?wa.index:n,i=r.getBidderRequest(e),o=r.getAdUnit(e),a=i&&i.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||Pt(),requestTimestamp:e.requestTimestamp||a,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==o?void 0:o.ttlBuffer)&&(e.ttlBuffer=o.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),i++,n(l)}function u(e,n){c(e,n,(function(e){var i=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,r=void 0===n?wa.index:n;Rr(x.BID_ADJUSTMENT,e);var i=(null===(t=r.getBidRequest(e))||void 0===t?void 0:t.renderer)||r.getAdUnit(e).renderer,o=e.mediaType,s=r.getMediaTypes(e),d=s&&s[o],l=d&&d.renderer,c=null;l&&l.url&&l.render&&(!0!==l.backupOnly||!e.renderer)?c=l:i&&i.url&&i.render&&(!0!==i.backupOnly||!e.renderer)&&(c=i),c&&(e.renderer=_n.install({url:c.url,config:c.options}),e.renderer.setRender(c.render));var u=ia(e.mediaType,s,Z.getConfig("mediaTypePriceGranularity")),p=S(e.cpm,"object"===a(u)?u:Z.getConfig("customPriceBucket"),Z.getConfig("currency.granularityMultiplier"));return e.pbLg=p.low,e.pbMg=p.med,e.pbHg=p.high,e.pbAg=p.auto,e.pbDg=p.dense,e.pbCg=p.custom,e}(n);Rr(x.BID_ACCEPTED,i),i.mediaType===Fo?function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,i=!0,o=A((void 0===r?wa.index:r).getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId}),"video"),a=o&&A(o,"context"),s=o&&A(o,"useCacheKey");Z.getConfig("cache.url")&&(s||a!==ur)&&(!t.videoCacheKey||Z.getConfig("cache.ignoreBidderCacheKey")?(i=!1,ra(e,t,n,o)):t.vastUrl||(Ke("videoCacheKey specified but not required vastUrl for video bid"),i=!1)),i&&(na(e,t),n())}(t,i,e):(function(e){return e.native&&"object"===a(e.native)}(i)&&function(e,t){var n,r=null==t?void 0:t.nativeOrtbRequest,i=null===(n=e.native)||void 0===n?void 0:n.ortb;if(r&&i){var o=function(e,t){var n={},r=(null==t?void 0:t.assets)||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;var i,o=qa((null==e?void 0:e.assets)||[]);try{var a=function(){var e=i.value,t=r.find((function(t){return e.id===t.id}));e.title?n.title=e.title.text:e.img?n[t.img.type===B.MAIN?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}:e.data&&(n[Ga[Xa[t.data.type]]]=e.data.value)};for(o.s();!(i=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}n.impressionTrackers=[];var s,d=[];e.imptrackers&&(s=n.impressionTrackers).push.apply(s,h(e.imptrackers));var l,c=qa((null==e?void 0:e.eventtrackers)||[]);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.event===Ka.impression&&u.method===Ja.img&&n.impressionTrackers.push(u.url),u.event===Ka.impression&&u.method===Ja.js&&d.push(u.url)}}catch(e){c.e(e)}finally{c.f()}return d=d.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&d.push(e.jstracker),d.length&&(n.javascriptTrackers=d.join("\n")),n}(i,r);Object.assign(e.native,o)}["rendererUrl","adTemplate"].forEach((function(n){var r,i=null==t||null===(r=t.nativeParams)||void 0===r?void 0:r[n];i&&(e.native[n]=is(i))}))}(i,r.getAdUnit(i)),na(t,i),e())}))}function p(e,n,r){return c(e,n,(function(e){n.rejectionReason=r,Je("Bid from ".concat(n.bidder||"unknown bidder"," was rejected: ").concat(r),n),Rr(x.BID_REJECTED,n),t.addBidRejected(n),e()}))}function g(){var n=t.getBidRequests(),r=Z.getConfig("auctionOptions");if(s.add(this),r&&!ut(r)){var a=r.secondaryBidders;a&&!n.every((function(e){return f(a,e.bidderCode)}))&&(n=n.filter((function(e){return!f(a,e.bidderCode)})))}o=n.every((function(e){return s.has(e)})),this.bids.forEach((function(e){d[e.bidId]||(t.addNoBid(e),Rr(x.NO_BID,e))})),o&&0===i&&e()}return{addBidResponse:function(){function e(e,t){var n;Qo.call({dispatch:u},e,t,(n=!1,function(r){n||(p(e,t,r),n=!0)}))}return e.reject=p,e}(),adapterDone:function(){var e=this;Zo(he.resolve()).finally((function(){return g.call(e)}))}}}(N,t);Co.callBids(m,e,r.addBidResponse,r.adapterDone,{request:function(e,t){o(Go,t),o(n,e),Xo[e]||(Xo[e]={SRA:!0,origin:t}),n[e]>1&&(Xo[e].SRA=!1)},done:function(e){Go[e]--,Jo[0]&&i(Jo[0])&&Jo.shift()}},_,U,d)}};function i(e){var t=!0,n=Z.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((function(e){var r=1,i=void 0!==e.src&&e.src===j?"s2s":e.bidderCode;return Xo[i]&&(!1===Xo[i].SRA&&(r=Math.min(e.bids.length,n)),Go[Xo[i].origin]+r>n&&(t=!1)),!t})),t&&e.run(),t}function o(e,t){void 0===e[t]?e[t]=1:e[t]++}i(r)||(Je("queueing auction due to limited endpoint capacity"),Jo.push(r))}return Or(x.SEAT_NON_BID,(function(e){var t;e.auctionId===b&&(t=e.seatnonbid,D=D.concat(t))})),{addBidReceived:function(e){C=C.concat(e)},addBidRejected:function(e){I=I.concat(e)},addNoBid:function(e){O=O.concat(e)},callBids:function(){g="started",c=Date.now();var e=l.measureTime("requestBids.makeRequests",(function(){return Co.makeBidRequests(m,c,b,_,v,d,l)}));Xe("Bids Requested for Auction with id: ".concat(b),e),l.checkpoint("callBids"),e.length<1?(Je("No valid bid requests returned for auction"),N()):ea.call({dispatch:L,context:this},e)},addWinningBid:function(e){var n,r,i,o=t.find((function(t){return t.adUnitId===e.adUnitId}));P=P.concat(e),r=(n=e).source,i=n.burl,r===j&&i&&Oe.triggerPixel(i),Co.callBidWonBidder(e.adapterCode||e.bidder,e,t),o&&!o.deferBilling&&Co.callBidBillableBidder(e)},setBidTargeting:function(e){Co.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return P},getAuctionStart:function(){return c},getAuctionEnd:function(){return u},getTimeout:function(){return _},getAuctionId:function(){return b},getAuctionStatus:function(){return g},getAdUnits:function(){return m},getAdUnitCodes:function(){return y},getBidRequests:function(){return E},getBidsReceived:function(){return C},getNoBids:function(){return O},getNonBids:function(){return D},getFPD:function(){return d},getMetrics:function(){return l},end:T.promise}}var Qo=Rn("sync",(function(e,t,n){!function(e){var t=Z.getConfig("maxBid");return!t||!e.cpm||t>=Number(e.cpm)}(t)?n(N.PRICE_TOO_HIGH):this.dispatch.call(null,e,t)}),"addBidResponse"),Zo=Rn("sync",(function(e){return e}),"responsesReady"),ea=Rn("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),ta=Rn("async",(function(e,t){t&&t()}),"bidsBackCallback");function na(e,t){var n,r,i;n=t,i=!0===kn.get(n.bidderCode,"allowZeroCpmBids")?n.cpm>=0:n.cpm>0,n.bidderCode&&(i||n.dealId)&&(r=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?wa.index:n;if(!t)return{};var i=r.getBidRequest(t),o={};return pa(o,ua(t.mediaType,e),t,i),e&&kn.getOwn(e,E.ADSERVER_TARGETING)&&(pa(o,kn.ownSettingsFor(e),t,i),t.sendStandardTargeting=kn.get(e,"sendStandardTargeting")),t.native&&(o=Object.assign({},o,function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?wa.index:t,r={},i=n.getAdUnit(e),o=!1!==A(i,"nativeParams.sendTargetingKeys"),a=function(e){var t={};return A(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)})),za(za({},R),t)}(i),s=za(za({},e.native),e.native.ext);return delete s.ext,Object.keys(s).forEach((function(t){var n=a[t],s=is(e.native[t])||is(A(e,"native.ext.".concat(t)));if("adTemplate"!==t&&n&&s){var d=A(i,"nativeParams.".concat(t,".sendId"));"boolean"!=typeof d&&(d=A(i,"nativeParams.ext.".concat(t,".sendId"))),d&&(s="".concat(n,":").concat(e.adId));var l=A(i,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof l&&(l=A(i,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof l?l:o)&&(r[n]=s)}})),r}(t))),o}(n.bidderCode,n)),n.adserverTargeting=Object.assign(n.adserverTargeting||{},r),$r(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),Rr(x.BID_RESPONSE,t)}var ra=Rn("async",(function(e,t,n,r){fn(e,t,n)}),"callPrebidCache");function ia(e,t,n){if(e&&n){if(e===Fo){var r=A(t,"".concat(Fo,".context"),"instream");if(n["".concat(Fo,"-").concat(r)])return n["".concat(Fo,"-").concat(r)]}return n[e]}}var oa=function(e){return function(t){var n=e||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?wa.index:t,r=ia(e.mediaType,n.getMediaTypes(e),Z.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&r?"string"==typeof r?r:"custom":Z.getConfig("priceGranularity")}(t);return"auto"===n?t.pbAg:"dense"===n?t.pbDg:"low"===n?t.pbLg:"medium"===n?t.pbMg:"high"===n?t.pbHg:"custom"===n?t.pbCg:void 0}},aa=function(){return function(e){return e.creativeId?e.creativeId:""}},sa=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},da=function(){return function(e){return e.meta&&(e.meta.networkId||e.meta.networkName)?A(e,"meta.networkName")||A(e,"meta.networkId"):""}},la=function(){return function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}};function ca(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return It(e,t)}}}function ua(e,t){var n=Object.assign({},kn.settingsFor(null));if(n[E.ADSERVER_TARGETING]||(n[E.ADSERVER_TARGETING]=[ca(P.BIDDER,"bidderCode"),ca(P.AD_ID,"adId"),ca(P.PRICE_BUCKET,oa()),ca(P.SIZE,"size"),ca(P.DEAL,"dealId"),ca(P.SOURCE,"source"),ca(P.FORMAT,"mediaType"),ca(P.ADOMAIN,sa()),ca(P.ACAT,la()),ca(P.DSP,da()),ca(P.CRID,aa())]),"video"===e){var r=n[E.ADSERVER_TARGETING].slice();if(n[E.ADSERVER_TARGETING]=r,[P.UUID,P.CACHE_ID].forEach((function(e){void 0===g(r,(function(t){return t.key===e}))&&r.push(ca(e,"videoCacheKey"))})),Z.getConfig("cache.url")&&(!t||!1!==kn.get(t,"sendStandardTargeting"))){var i=Wt(Z.getConfig("cache.url"));void 0===g(r,(function(e){return e.key===P.CACHE_HOST}))&&r.push(ca(P.CACHE_HOST,(function(e){return A(e,"adserverTargeting.".concat(P.CACHE_HOST))?e.adserverTargeting[P.CACHE_HOST]:i.hostname})))}}return n}function pa(e,t,n,r){var i=t[E.ADSERVER_TARGETING];return n.size=n.getSize(),(i||[]).forEach((function(i){var o=i.key,a=i.val;if(e[o]&&Je("The key: "+o+" is being overwritten"),ot(a))try{a=a(n,r)}catch(e){Ke("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==P.DEAL&&o!==P.ACAT&&o!==P.DSP&&o!==P.CRID||!pt(a)&&null!=a?e[o]=a:Xe("suppressing empty key '"+o+"' from adserver targeting")})),e}function ha(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function fa(e){Object.assign(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.adUnitId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.adUnitId===n}))},getMediaTypes:function(e){var t=e.adUnitId,n=e.requestId;if(null!=n){var r=this.getBidRequest({requestId:n});if(null!=r&&(null==t||r.adUnitId===t))return r.mediaTypes}else if(null!=t){var i=this.getAdUnit({adUnitId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,r=t.bidderRequestId;if(null!=n||null!=r){var i=e().flatMap((function(e){return e.getBidRequests()}));return null!=r&&(i=i.filter((function(e){return e.bidderRequestId===r}))),null==n?i[0]:i.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var ga=1,ma=[];function va(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:ga)}function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Z.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?ga!==(ga=e.ttlBuffer)&&ma.forEach((function(e){return e(ga)})):Ke("Invalid value for ttlBuffer",e.ttlBuffer)}));var ba,_a="minBidCacheTTL",wa=function(){var e,t=null,n=_r({startTime:function(e){return e.end.then((function(){return e.getAuctionEnd()}))},ttl:function(e){return null==t?null:e.end.then((function(){return 1e3*Math.max.apply(Math,[t].concat(h(e.getBidsReceived().map(va))))}))}});e=function(){null!=t&&n.refresh()},ma.push(e),Z.getConfig(_a,(function(e){t!==(t="number"==typeof(t=null==e?void 0:e[_a])?t:null)&&n.refresh()}));var r={onExpiry:n.onExpiry};function i(e){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ya(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ya(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.getAuctionId()===e)return i}}catch(e){r.e(e)}finally{r.f()}}function a(){return n.toArray().flatMap((function(e){return e.getBidsReceived()}))}return r.addWinningBid=function(e){var t=$r(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");var n=i(e.auctionId);n?(e.status=M.RENDERED,n.addWinningBid(e)):Je("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===Ho}},getAdUnitCodes:{post:wt}}).forEach((function(e){var t=o(e,2),i=t[0],a=t[1],s=a.name,d=void 0===s?i:s,l=a.pre,c=a.post,u=null==l?function(e){return e[d]()}:function(e){return l(e)?e[d]():[]},p=null==c?function(e){return e}:function(e){return e.filter(c)};r[i]=function(){return p(n.toArray().flatMap(u))}})),r.getAllBidsForAdUnitCode=function(e){return a().filter((function(t){return t&&t.adUnitCode===e}))},r.createAuction=function(e){var t=Yo(e);return function(e){n.add(e)}(t),t},r.findBidByAdId=function(e){return a().find((function(t){return t.adId===e}))},r.getStandardBidderAdServerTargeting=function(){return ua()[E.ADSERVER_TARGETING]},r.setStatusForBids=function(e,t){var n=r.findBidByAdId(e);if(n&&(n.status=t),n&&t===M.BID_TARGETING_SET){var o=i(n.auctionId);o&&o.setBidTargeting(n)}},r.getLastAuctionId=function(){var e=n.toArray();return e.length&&e[e.length-1].getAuctionId()},r.clearAllAuctions=function(){n.clear()},r.index=new fa((function(){return n.toArray()})),r}(),Sa=Rn("sync",(function(e){return'(()=>{"use strict";window.render=function({ad:d,adUrl:e,width:i,height:r},{mkFrame:n},o){if(!d&&!e)throw{reason:"noAd",message:"Missing ad markup or URL"};{const s=o.document,t={width:i,height:r};e&&!d?t.src=e:t.srcdoc=d,s.body.appendChild(n(s,t))}}})();'})),Ta=(ba={},function(e){var t=Sa(e);return ba.hasOwnProperty(t)||(ba[t]=new he((function(e){var n=nt();n.srcdoc="<script>".concat(t,"<\/script>"),n.onload=function(){return e(n.contentWindow.render)},document.body.appendChild(n)}))),ba[t]}),Ia=x.AD_RENDER_FAILED,ka=x.AD_RENDER_SUCCEEDED,Aa=x.STALE_RENDER,Ea=x.BID_WON,Ca=O.EXCEPTION,xa=Rn("sync",(function(e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:he.resolve()).then((function(t){return null!=t?t:wa.findBidByAdId(e)})).catch((function(){}))})),Oa=Rn("sync",(function(e){Rr(Ea,e),wa.addWinningBid(e)}));function Pa(e){var t=e.reason,n=e.message,r=e.bid,i=e.id,o={reason:t,message:n};r&&(o.bid=r,o.adId=r.adId),i&&(o.adId=i),Ke("Error rendering ad (id: ".concat(i,"): ").concat(n)),Rr(Ia,o)}function Da(e){var t=e.doc,n=e.bid,r=e.id,i={doc:t};n&&(i.bid=n),r&&(i.adId=r),Co.callAdRenderSucceededBidder(n.adapterCode||n.bidder,n),Rr(ka,i)}function Ra(e,t){switch(e.event){case x.AD_RENDER_FAILED:Pa({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case x.AD_RENDER_SUCCEEDED:Da({doc:null,bid:t,id:t.adId});break;default:Ke("Received event request for unsupported event: '".concat(e.event,"' (adId: '").concat(t.adId,"')"))}}function ja(e,t,n){var r=n.resizeFn,i=n.fireTrackers,o=void 0===i?Za:i;"resizeNativeHeight"===e.action?r(e.width,e.height):o(e,t)}var Ma=d({},$,Ra);Ma[z]=ja;var Na=Rn("sync",(function(e,t){var n=e.ad,r=e.adUrl,i=e.cpm,o=e.originalCpm,a=e.width,s=e.height,d={AUCTION_PRICE:o||i,CLICKTHROUGH:(null==t?void 0:t.clickUrl)||""};return{ad:Ot(n,d),adUrl:Ot(r,d),width:a,height:s}})),Ua=Rn("sync",(function(e){var t=e.renderFn,n=e.resizeFn,r=e.bidResponse,i=e.options;if(r.mediaType!==Fo){var o=Na(r,i);t(Object.assign({adId:r.adId},o));var a=o.width,s=o.height;null!=(null!=a?a:s)&&n(a,s)}else Pa({reason:O.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"Cannot render video ad",bid:r,id:r.adId})}));function La(e){var t=e.renderFn,n=e.resizeFn,r=e.adId,i=e.options,o=e.bidResponse,a=e.doc;if(null!=o){if(o.status!==M.RENDERED||(Je("Ad id ".concat(r," has been rendered before")),Rr(Aa,o),!A(Z.getConfig("auctionOptions"),"suppressStaleRender"))){try{Ua({renderFn:t,resizeFn:n,bidResponse:o,options:i,doc:a})}catch(e){Pa({reason:O.EXCEPTION,message:e.message,id:r,bid:o})}Oa(o)}}else Pa({reason:O.CANNOT_FIND_AD,message:"Cannot find ad '".concat(r,"'"),id:r})}function Ba(){if(!window.frames[W])if(document.body){var e=nt();e.name=W,document.body.appendChild(e)}else window.requestAnimationFrame(Ba)}function qa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ua.before((function(e,t){var n=t.bidResponse,r=t.doc;!function(e){return!(!e||!e.url&&!e.renderNow)}(n.renderer)?e(t):(function(e,t,n){var r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,n)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}(n.renderer,n,r),Da({doc:r,bid:n,id:n.adId}),e.bail())}),100);var $a=[],Wa=Object.keys(R).map((function(e){return R[e]})),Ha={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},Ga=ls(U),Xa=ls(L),Ja={img:1,js:2,1:"img",2:"js"},Ka={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function Ya(e){if(e&&e.type&&(!(!(t=e.type)||!f(Object.keys(Ha),t))||(Ke("".concat(t," nativeParam is not supported")),!1))&&(e=Ha[e.type]),!e||!e.ortb||Qa(e.ortb))return e;var t}function Qa(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return Ke("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?(Ke("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(Ke("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!lt(e))return Ke("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!dt(e.img.w)&&!dt(e.img.wmin))return Ke("for img asset there must be 'w' or 'wmin' property"),!1;if(!dt(e.img.h)&&!dt(e.img.hmin))return Ke("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!dt(e.title.len))return Ke("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!dt(e.data.type))return Ke("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&dt(e.video.minduration)&&dt(e.video.maxduration)))return Ke("video asset is not properly configured"),!1;return!0}(e)}))}function Za(e,t){var n=t.native.ortb||ss(t.native);return"click"===e.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetchURL,r=void 0===n?vt:n;if(t){var i,o=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),a=(null===(i=e.link)||void 0===i?void 0:i.clicktrackers)||[],s=o[t],d=a;s&&(d=s.clicktrackers||[]),d.forEach((function(e){return r(e)}))}else{var l;((null===(l=e.link)||void 0===l?void 0:l.clicktrackers)||[]).forEach((function(e){return r(e)}))}}(n,null==e?void 0:e.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,r=void 0===n?function(e){return function(e){if(e){var t,n=nt();Oe.insertElement(n,document,"body"),(t=n.contentWindow.document).open(),t.write(e),t.close()}}(e)}:n,i=t.fetchURL,o=void 0===i?vt:i,a=(e.eventtrackers||[]).filter((function(e){return e.event===Ka.impression})).reduce((function(e,t){return Ja.hasOwnProperty(t.method)&&e[Ja[t.method]].push(t.url),e}),{img:[],js:[]}),s=a.img,d=a.js;e.imptrackers&&(s=s.concat(e.imptrackers)),s.forEach((function(e){return o(e)})),d=d.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(d=d.concat([e.jstracker])),d.length&&r(d.join("\n"))}(n),e.action}function es(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return Object.entries(e).filter((function(e){var r=o(e,2),i=r[0];return r[1]&&(!1===n&&"ext"===i||null==t||t.includes(i))})).forEach((function(e){var i=o(e,2),a=i[0],s=i[1];!1===n&&"ext"===a?r.push.apply(r,h(es(s,t,!0))):(n||R.hasOwnProperty(a))&&r.push({key:a,value:is(s)})})),r}function ts(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,i=void 0===r?wa.index:r,o={message:"assetResponse",adId:e.adId},a=Na(t).native;return a?(o.native=Object.assign({},a),o.renderer=Sa(t),null!=n&&(a.assets=a.assets.filter((function(e){var t=e.key;return n.includes(t)})))):a=function(e,t,n){var r,i,o=za(za({},Nt(e.native,["rendererUrl","adTemplate"])),{},{assets:es(e.native,n),nativeKeys:R});return e.native.ortb?o.ortb=e.native.ortb:null!==(r=t.mediaTypes)&&void 0!==r&&null!==(i=r.native)&&void 0!==i&&i.ortb&&(o.ortb=ds(e.native,t.nativeOrtbRequest)),o}(t,i.getAdUnit(t),n),Object.assign(o,a)}var ns,rs=Object.fromEntries(Object.entries(R).map((function(e){var t=o(e,2),n=t[0];return[t[1],n]})));function is(e){return(null==e?void 0:e.url)||e}function os(e){if(Qa(e)){var t,n={},r=qa(e.assets);try{var i=function(){var r=t.value;if(r.title){var i={required:!!r.required&&Boolean(r.required),len:r.title.len};n.title=i}else if(r.img){var o={required:!!r.required&&Boolean(r.required)};if(r.img.w&&r.img.h)o.sizes=[r.img.w,r.img.h];else if(r.img.wmin&&r.img.hmin){var a=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(r.img.wmin,r.img.hmin);o.aspect_ratios=[{min_width:r.img.wmin,min_height:r.img.hmin,ratio_width:r.img.wmin/a,ratio_height:r.img.hmin/a}]}r.img.type===B.MAIN?n.image=o:n.icon=o}else if(r.data){var s=Object.keys(L).find((function(e){return L[e]===r.data.type})),d=Object.keys(U).find((function(e){return U[e]===s}));n[d]={required:!!r.required&&Boolean(r.required)},r.data.len&&(n[d].len=r.data.len)}e.privacy&&(n.privacyLink={required:!1})};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return n}}function as(e){if(!e||!st(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[qo])||void 0===t?void 0:t.ortb})))return e;var t,n=Ct(e),r=qa(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[qo]&&i.mediaTypes[qo].ortb&&(i.mediaTypes[qo]=Object.assign(Ft(i.mediaTypes[qo],q),os(i.mediaTypes[qo].ortb)),i.nativeParams=Ya(i.mediaTypes[qo]))}}catch(e){r.e(e)}finally{r.f()}return n}function ss(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=o(e,2),r=n[0],i=n[1];switch(r){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach((function(e){t.eventtrackers.push({event:Ka.impression,method:Ja.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}})),t}function ds(e,t){var n=za(za({},ss(e)),{},{assets:[]});function r(e,r){var i=t.assets.find(e);null!=i&&(r(i=Ct(i)),n.assets.push(i))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=is(e[t]);switch(t){case"title":r((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var i="image"===t?B.MAIN:B.ICON;r((function(e){return null!=e.img&&e.img.type===i}),(function(e){e.img={url:n}}));break;default:t in U&&r((function(e){return null!=e.data&&e.data.type===L[U[t]]}),(function(e){e.data={value:n}}))}})),n}function ls(e){var t={};for(var n in e)t[e[n]]=n;return t}function cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ps=V,hs=z,fs=$,gs=(d(ns={},F,(function(e,t,n){La({renderFn:function(t){e(Object.assign({message:ps,renderer:Sa(n)},t))},resizeFn:ms(t.adId,n),options:t.options,adId:t.adId,bidResponse:n})})),d(ns,fs,(function(e,t,n){if(null!=n){if(n.status===M.RENDERED)return Ra(t,n);Je("Received x-origin event request without corresponding render request for ad '".concat(n.adId,"'"))}else Ke("Cannot find ad '".concat(t.adId,"' for x-origin event request"))})),ns);function ms(e,t){return function(n,r){!function(e){var t=e.adId,n=e.adUnitCode,r=e.width,i=e.height;function o(e){return e?e+"px":"100%"}function a(e){var r=function(e,t){return At()?function(e){var t=g(window.googletag.pubads().getSlots(),(function(t){return g(t.getTargetingKeys(),(function(n){return f(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):function(){if(window.apntag&&ot(window.apntag.getTag))return!0}()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),i=document.getElementById(r);return i&&i.querySelector(e)}["div","iframe"].forEach((function(e){var t=a(e+':not([style*="display: none"])');if(t){var s=t.style;s.width=o(r),s.height=o(i)}else Ke("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}(us(us({},t),{},{width:n,height:r,adId:e}))}}function vs(e,t){return e===t?0:e<t?-1:1}function ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,n){return vs(e(t),e(n))}}function bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vs;return function(t,n){return-e(t,n)||0}}function _s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=0,i=t;r<i.length;r++){var o=(0,i[r])(e,n);if(0!==o)return o}return 0}}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vs;return function(t,n){return e(n,t)<0?n:t}}function Ss(){return ws(bs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:vs))}Object.assign(gs,d({},hs,(function(e,t,n){if(null!=n)switch(n.status!==M.RENDERED&&Oa(n),t.action){case"assetRequest":e(function(e,t){var n=e.assets.map((function(e){return rs[e]}));return ts(e,t,n)}(t,n));break;case"allAssetRequest":e(function(e,t){return ts(e,t,null)}(t,n));break;default:ja(t,n,{resizeFn:ms(t.adId,n)})}else Ke("Cannot find ad for x-origin event request: '".concat(t.adId,"'"))})));var Ts=ys((function(e){return e.cpm})),Is=ys((function(e){return e.responseTimestamp})),ks=Ss(_s(Ts,bs(ys((function(e){return e.timeToRespond}))))),As=Ss(_s(Ts,bs(Is))),Es=(Ss(_s(Ts,Is)),[]),Cs="targetingControls.allowTargetingKeys",xs="targetingControls.addTargetingKeys",Os='Only one of "'.concat(Cs,'" or "').concat(xs,'" can be set'),Ps=Object.keys(P).map((function(e){return P[e]})),Ds={isActualBid:function(e){return e.getStatusCode()===C.GOOD},isBidNotExpired:function(e){return e.responseTimestamp+1e3*va(e)>Pt()},isUnusedBid:function(e){return e&&(e.status&&!f([M.RENDERED],e.status)||!e.status)}};function Rs(e){return!Object.values(Ds).some((function(t){return!t(e)}))}var js=Rn("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var r=[],i=Z.getConfig("sendBidsControl.dealPrioritization"),o=Mt(e,"adUnitCode");return Object.keys(o).forEach((function(e){var a=[],s=Mt(o[e],"bidderCode");Object.keys(s).forEach((function(e){return a.push(s[e].reduce(t))})),n>0?(a=i?a.sort(Ms(!0)):a.sort((function(e,t){return t.cpm-e.cpm})),r.push.apply(r,h(a.slice(0,n)))):r.push.apply(r,h(a))})),r}return e}));function Ms(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}function Ns(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return window.googletag.pubads().getSlots()})().reduce((function(e,n){var r=ot(t)&&t(n);return Object.keys(e).filter(ot(r)?r:function(e){return function(t){return Bt(e,t)}}(n)).forEach((function(t){return e[t].push(n)})),e}),Object.fromEntries(e.map((function(e){return[e,[]]}))))}var Us=function(e){var t={},n={};function r(e,t){return e.adserverTargeting&&t&&(st(t)&&f(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function i(t){return"string"==typeof t?[t]:st(t)?t:e.getAdUnitCodes()||[]}function a(){var t=e.getBidsReceived();if(Z.getConfig("useBidCache")){var r=Z.getConfig("bidCacheFilterFunction");"function"==typeof r&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!r(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return(t=t.filter((function(e){return A(e,"video.context")!==zo})).filter(Rs)).forEach((function(e){return e.latestTargetedAuctionId=n[e.adUnitCode],e})),js(t,As)}function s(e,n){var r=t.getWinningBids(e,n),i=l();return r=r.map((function(e){return d({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===i.indexOf(t)})).reduce((function(t,n){var r=[e.adserverTargeting[n]],i=d({},n.substring(0,20),r);if(n===P.DEAL){var o=d({},"".concat(n,"_").concat(e.bidderCode).substring(0,20),r);return[].concat(h(t),[i,o])}return[].concat(h(t),[i])}),[]))})),r}function l(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(Ps).filter(wt)}function c(e,t,n,r){return Object.keys(t.adserverTargeting).filter(u()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){st(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(wt),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function u(){var e=l();return e=e.concat(Wa),function(t){return-1===e.indexOf(t)}}function p(e){return d({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(u()).map((function(t){return d({},t.substring(0,20),[e.adserverTargeting[t]])})))}function m(e,t){return t.map((function(t){return d({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(e,t){if(At()){var n=i(e),r=Es.reduce((function(e,t){return e[t]=null,e}),{});Object.values(Ns(n,t)).forEach((function(e){e.forEach((function(e){return e.updateTargetingFromMap(r)}))}))}},t.resetPresetTargetingAST=function(e){i(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),r={};n.forEach((function(e){f(Es,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a(),o=i(t),l=s(o,n).concat(function(e,t){return t.filter((function(t){return f(e,t.adUnitCode)})).map((function(e){return Object.assign({},e)})).reduce(c,[]).map(p).filter((function(e){return e}))}(o,n)).concat(Z.getConfig("enableSendAllBids")?function(e,t){var n=Ps.concat(Wa),i=Z.getConfig("sendBidsControl.bidLimit"),o=js(t,ks,i),a=Z.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),s=a?a.map((function(e){return P[e]})):n;return o.map((function(t){if(r(t,e))return d({},t.adUnitCode,m(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==s.indexOf(e)}))))})).filter((function(e){return e}))}(o,n):function(e,t){if(!0===Z.getConfig("targetingControls.alwaysIncludeDeals")){var n=Ps.concat(Wa);return js(t,ks).map((function(t){if(t.dealId&&r(t,e))return d({},t.adUnitCode,m(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}(o,n)).concat(function(t){function n(e){return A(e,E.ADSERVER_TARGETING)}return e.getAdUnits().filter((function(e){return f(t,e.code)&&n(e)})).map((function(e){return d({},e.code,function(e){var t=n(e);return Object.keys(t).map((function(e){return at(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),st(t[e])||(t[e]=[t[e]]),d({},e,t[e])}))}(e))}))}(o));l.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===Es.indexOf(Object.keys(e)[0])&&(Es=Object.keys(e).concat(Es))}))}))}));var u=Object.keys(Object.assign({},D,R)),h=Z.getConfig(Cs),v=Z.getConfig(xs);if(null!=v&&null!=h)throw new Error(Os);h=null!=v?u.concat(v):h||u,Array.isArray(h)&&h.length>0&&(l=function(e,t){var n=Object.assign({},P,R),r=Object.keys(n),i={};Xe("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var o=Object.keys(e)[0],a=e[o].filter((function(e){var o=Object.keys(e)[0],a=0===r.filter((function(e){return 0===o.indexOf(n[e])})).length||g(t,(function(e){var t=n[e];return 0===o.indexOf(t)}));return i[o]=!a,a}));e[o]=a}));var o=Object.keys(i).filter((function(e){return i[e]}));return Xe("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}(l,h)),l=function(e){var t=e.map((function(e){return d({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return d({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{});return t}(l);var y=Z.getConfig("targetingControls.auctionKeyMaxChars");return y&&(Xe("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(y," characters.  Running checks on auction keys...")),l=function(e,t){var n=Ct(e),r=Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(Ms());return r.reduce((function(e,r,i,o){var a,s=(a=r.adserverTargeting,Object.keys(a).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(a[t]),"%26")}),""));i+1===o.length&&(s=s.slice(0,-3));var d=r.adUnitCode,l=s.length;return l<=t?(t-=l,Xe("AdUnit '".concat(d,"' auction keys comprised of ").concat(l," characters.  Deducted from running threshold; new limit is ").concat(t),n[d]),e[d]=n[d]):Je("The following keys for adUnitCode '".concat(d,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(l,", the current allotted amount was ").concat(t,".\n"),n[d]),i+1===o.length&&0===Object.keys(e).length&&Ke("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(l,y)),o.forEach((function(e){l[e]||(l[e]={})})),l},Z.getConfig("targetingControls",(function(e){null!=A(e,Cs)&&null!=A(e,xs)&&Ke(Os)})),t.setTargetingForGPT=Rn("sync",(function(n,r){var i=t.getAllTargeting(n),a=Object.fromEntries(Es.map((function(e){return[e,null]})));Object.entries(Ns(Object.keys(i),r)).forEach((function(e){var t=o(e,2),n=t[0];t[1].forEach((function(e){Object.keys(i[n]).forEach((function(e){var t=i[n][e];"string"==typeof t&&-1!==t.indexOf(",")&&(t=t.split(",")),i[n][e]=t})),Ge("Attempting to set targeting-map for slot: ".concat(e.getSlotElementId()," with targeting-map:"),i[n]),e.updateTargetingFromMap(Object.assign({},a,i[n]))}))})),Object.keys(i).forEach((function(t){Object.keys(i[t]).forEach((function(n){"hb_adid"===n&&e.setStatusForBids(i[t][n],M.BID_TARGETING_SET)}))})),t.targetingDone(i),Rr(x.SET_TARGETING,i)}),"setTargetingForGPT"),t.targetingDone=Rn("sync",(function(e){return e}),"targetingDone"),t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a(),n=i(e);return t.filter((function(e){return f(n,e.adUnitCode)})).filter((function(e){return!0===kn.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(wt).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce(ks)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){Ke("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if(Ge("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),at(n[e][t])||st(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&ot(window.apntag.setKeywords))return!0},t}(wa),Ls="__pbjs_debugging__";function Bs(){return u().installedModules.includes("debugging")}function qs(e){return new he((function(t){vn(e,"debugging",t)}))}function Fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?Bs:t,r=e.script,i=void 0===r?qs:r,o=null;return function(){return null==o&&(o=new he((function(e,t){setTimeout((function(){if(n())e();else{var r="https://cdn.jsdelivr.net/npm/prebid.js@9.10.0/dist/debugging-standalone.js";Ge('Debugging module not installed, loading it from "'.concat(r,'"...')),u()._installDebugging=!0,i(r).then((function(){u()._installDebugging({DEBUG_KEY:Ls,hook:Rn,config:Z,createBid:cr,logger:Ye("DEBUG:")})})).then(e,t)}}))}))),o}}var Vs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?Fs():t,r=e.hook,i=void 0===r?Nn("requestBids"):r,o=null,a=!1;function s(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(o||he.resolve()).then((function(){return e.apply(t,r)}))}function d(){i.getHooks({hook:s}).remove(),a=!1}return{enable:function(){a||(o=n(),i.before(s,99),a=!0)},disable:d,reset:function(){o=null,d()}}}();Vs.reset,Z.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?Vs.enable():Vs.disable()}));var zs=No("fpdEnrichment"),$s=Yt((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!zs.cookiesAreEnabled())return e;var t,n,r=e.split(".");if(2===r.length)return e;var i=-2,o="_rdc".concat(Date.now()),a="writeable";do{t=r.slice(i).join(".");var s=new Date(Pt()+1e4).toUTCString();zs.setCookie(o,a,s,"Lax",t,void 0),zs.getCookie(o,void 0)===a?(n=!1,zs.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(i+=-1,n=Math.abs(i)<=r.length)}while(n);return t})),Ws=["architecture","bitness","model","platformVersion","fullVersionList"],Hs=["brands","mobile","platform"],Gs=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=t&&Hs.some((function(e){return void 0!==t[e]}))?Object.freeze(Js(1,t)):null;return function(){return n}}(),Xs=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},r=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws;if(!r.has(e)){var i=Array.from(e);i.sort(),r.set(e,i.join("|"))}var o=r.get(e);if(!n.hasOwnProperty(o))try{n[o]=t.getHighEntropyValues(e).then((function(e){return ut(e)?null:Object.freeze(Js(2,e))})).catch((function(){return null}))}catch(e){n[o]=he.resolve(null)}return n[o]}}();function Js(e,t){function n(e,t){var n={brand:e};return at(t)&&!pt(t)&&(n.version=t.split(".")),n}var r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),void 0!==t.mobile&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];at(n)&&(r[e]=n)})),r}var Ks=["dooh","app","site"];function Ys(e){return function(t){return Ks.reduce((function(n,r){return Qs(t,r)&&(null!=n?(Je("".concat(e," specifies both '").concat(n,"' and '").concat(r,"'; dropping the latter.")),delete t[r]):n=r),n}),null),t}}function Qs(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ed={getRefererInfo:mi,findRootDomain:$s,getWindowTop:$e,getWindowSelf:We,getHighEntropySUA:Xs,getLowEntropySUA:Gs},td=Ys("FPD"),nd=Rn("sync",(function(e){var t,n=[e,(t=Z.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?ed.getHighEntropySUA(t):he.resolve(ed.getLowEntropySUA())).catch((function(){return null})),he.resolve("cookieDeprecationLabel"in navigator&&Qn(Zn,Kr(An,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((function(){return null}))];return he.all(n).then((function(e){var t=o(e,3),n=t[0],r=t[1],i=t[2],a=ed.getRefererInfo();if(Object.entries(od).forEach((function(e){var t=o(e,2),r=t[0],i=(0,t[1])(n,a);i&&Object.keys(i).length>0&&(n[r]=Xt({},i,n[r]))})),r&&Zt(n,"device.sua",Object.assign({},r,n.device.sua)),i){var s={cdep:i};Zt(n,"device.ext",Object.assign({},s,n.device.ext))}n=td(n);var d,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(Ks);try{for(l.s();!(d=l.n()).done;){var c=d.value;if(Qs(n,c)){n[c]=Xt({},ad(0,a),n[c]);break}}}catch(e){l.e(e)}finally{l.f()}return n}))}));function rd(e){try{return e(ed.getWindowTop())}catch(t){return e(ed.getWindowSelf())}}function id(e){return Nt(e,Object.keys(e))}var od={site:function(e,t){if(!Ks.filter((function(e){return"site"!==e})).some(Qs.bind(null,e)))return id({page:t.page,ref:t.ref})},device:function(){return rd((function(e){var t,n=e.screen.width,r=e.screen.height,i=e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,o=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,a={w:n,h:r,dnt:Lt()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift(),ext:{vpw:i,vph:o}};return null!==(t=e.navigator)&&void 0!==t&&t.webdriver&&Zt(a,"ext.webdriver",!0),a}))},regs:function(){var e={};rd((function(e){return e.navigator.globalPrivacyControl}))&&Zt(e,"ext.gpc",1);var t=Z.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function ad(e,t){var n,r,i,o=hi(t.page,{noLeadingWww:!0}),a=null===(n=rd((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===n||null===(r=n.content)||void 0===r||null===(i=r.replace)||void 0===i?void 0:i.call(r,/\s/g,"");return id({domain:o,keywords:a,publisher:id({domain:ed.findRootDomain(o)})})}var sd=u(),dd=Bo.triggerUserSyncs,ld=x.ADD_AD_UNITS,cd=x.REQUEST_BIDS,ud=x.SET_TARGETING,pd={bidWon:function(e){if(wa.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(St).filter(wt).includes(e))return!0;Ke('The "'+e+'" placement is not defined.')}};function hd(e,t){var n=[];return st(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return Vt(e,2)}))?n=e:Vt(e,2)&&n.push(e)),n}function fd(e){var t=Ct(e),n=t.mediaTypes.banner,r=hd(n.sizes);return r.length>0?(n.sizes=r,t.sizes=r):(Ke("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function gd(e){var t=Ct(e),n=t.mediaTypes.video;if(n.playerSize){var r="number"==typeof n.playerSize[0]?2:1,i=hd(n.playerSize,r);i.length>0?(2===r&&Xe("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=i,t.sizes=i):(Ke("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return function(e,t){var n,r=null==e||null===(n=e.mediaTypes)||void 0===n?void 0:n.video;lt(r)?null!=r&&Object.entries(r).forEach((function(t){var n=o(t,2),i=n[0],a=n[1];hr.has(i)&&(hr.get(i)(a)||(delete r[i],Je('Invalid prop in adUnit "'.concat(e.code,'": Invalid value for mediaTypes.video.').concat(i," ORTB property. The property has been removed."))))})):Je("validateOrtbVideoFields: videoParams must be an object.")}(t),t}function md(e){function t(t){return Ke('Error in adUnit "'.concat(e.code,'": ').concat(t,". Removing native request from ad unit"),e),delete r.mediaTypes.native,r}function n(e){for(var t=0,n=["sendTargetingKeys","types"];t<n.length;t++){var r=n[t];if(i.hasOwnProperty(r)){var o=e(r);if(o)return o}}}var r=Ct(e),i=r.mediaTypes.native;if(i.ortb){var o;if(null!==(o=i.ortb.assets)&&void 0!==o&&o.some((function(e){return!dt(e.id)||e.id<0||e.id%1!=0})))return t("native asset ID must be a nonnegative integer");if(n((function(e){return t('ORTB native requests cannot specify "'.concat(e,'"'))})))return r;var a=Object.keys(R).filter((function(e){return R[e].includes("hb_native_")})),s=Object.keys(i).filter((function(e){return a.includes(e)}));s.length>0&&(Ke("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(s," keys from request.")),s.forEach((function(e){return delete r.mediaTypes.native[e]})))}else n((function(e){return"mediaTypes.native.".concat(e," is deprecated, consider using native ORTB instead")}));return i.image&&i.image.sizes&&!Array.isArray(i.image.sizes)&&(Ke("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete r.mediaTypes.native.image.sizes),i.image&&i.image.aspect_ratios&&!Array.isArray(i.image.aspect_ratios)&&(Ke("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete r.mediaTypes.native.image.aspect_ratios),i.icon&&i.icon.sizes&&!Array.isArray(i.icon.sizes)&&(Ke("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete r.mediaTypes.native.icon.sizes),r}function vd(e,t){var n=A(e,"mediaTypes.".concat(t,".pos"));if(!dt(n)||isNaN(n)||!isFinite(n)){var r="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");Je(r),Rr(x.AUCTION_DEBUG,{type:"WARNING",arguments:r}),delete e.mediaTypes[t].pos}return e}function yd(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,r=e.bids;return null==r||st(r)?null==r&&null==e.ortb2Imp?(Ke(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],Ge(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(Ke(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(Ke(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=Vs,n=null;try{n=e.getItem(Ls)}catch(e){}null!==n&&t.enable()}}(),sd.bidderSettings=sd.bidderSettings||{},sd.libLoaded=!0,sd.version="v9.10.0",Xe("Prebid.js v9.10.0 loaded"),sd.installedModules=sd.installedModules||[],sd.adUnits=sd.adUnits||[],sd.triggerUserSyncs=dd;var bd={validateAdUnit:yd,validateBannerMediaType:fd,validateSizes:hd};Object.assign(bd,{validateNativeMediaType:md}),Object.assign(bd,{validateVideoMediaType:gd});var _d,wd=Rn("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=yd(e))){var n,r,i,o=e.mediaTypes;o.banner&&(n=fd(e),o.banner.hasOwnProperty("pos")&&(n=vd(n,"banner"))),o.video&&(r=gd(n||e),o.video.hasOwnProperty("pos")&&(r=vd(r,"video"))),o.native&&(i=md(r||n||e));var a=Object.assign({},n,r,i);t.push(a)}})),t}),"checkAdUnitSetup");function Sd(e){var t=wa[e]().filter((function(e){return wa.getAdUnitCodes().includes(e.adUnitCode)})),n=wa.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(wt).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return d({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}sd.getAdserverTargetingForAdUnitCodeStr=function(e){if(Xe("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e)return function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"):""}(sd.getAdserverTargetingForAdUnitCode(e));Ge("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},sd.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=wa.getAllBidsForAdUnitCode(e).filter(Rs);return t.length?t.reduce(ks):{}}Ge("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},sd.getAdserverTargetingForAdUnitCode=function(e){return sd.getAdserverTargeting(e)[e]},sd.getAdserverTargeting=function(e){return Xe("Invoking pbjs.getAdserverTargeting",arguments),Us.getAllTargeting(e)},sd.getConsentMetadata=function(){return Xe("Invoking pbjs.getConsentMetadata"),Xi.getConsentMeta()},sd.getNoBids=function(){return Xe("Invoking pbjs.getNoBids",arguments),Sd("getNoBids")},sd.getNoBidsForAdUnitCode=function(e){return{bids:wa.getNoBids().filter((function(t){return t.adUnitCode===e}))}},sd.getBidResponses=function(){return Xe("Invoking pbjs.getBidResponses",arguments),Sd("getBidsReceived")},sd.getBidResponsesForAdUnitCode=function(e){return{bids:wa.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},sd.setTargetingForGPTAsync=function(e,t){Xe("Invoking pbjs.setTargetingForGPTAsync",arguments),At()?Us.setTargetingForGPT(e,t):Ke("window.googletag is not defined on the page")},sd.setTargetingForAst=function(e){Xe("Invoking pbjs.setTargetingForAn",arguments),Us.isApntagDefined()?(Us.setTargetingForAst(e),Rr(ud,Us.getAllTargeting())):Ke("window.apntag is not defined on the page")},sd.renderAd=Rn("async",(function(e,t,n){Xe("Invoking pbjs.renderAd",arguments),Ge("Calling renderAd with adId :"+t),function(e,t,n){var r;function i(e,n){Pa(Object.assign({id:t,bid:r},{reason:e,message:n}))}function o(t,n){e.defaultView&&e.defaultView.frameElement&&(t&&(e.defaultView.frameElement.width=t),n&&(e.defaultView.frameElement.height=n))}var a,s=(a={resizeFn:o},function(e,t,n){Ma.hasOwnProperty(e)&&Ma[e](t,n,a)});function d(t){t.ad?(e.write(t.ad),e.close(),Da({doc:e,bid:r,adId:r.adId})):Ta(r).then((function(n){return n(t,{sendMessage:function(e,t){return s(e,t,r)},mkFrame:tt},e.defaultView)})).then((function(){return Da({doc:e,bid:r,adId:r.adId})}),(function(e){i((null==e?void 0:e.reason)||O.EXCEPTION,null==e?void 0:e.message),(null==e?void 0:e.stack)&&Ke(e)})),gt(document.createComment("Creative ".concat(r.creativeId," served by ").concat(r.bidder," Prebid.js Header Bidding")),e,"html")}try{t&&e?e!==document||xt()?xa(t).then((function(i){r=i,La({renderFn:d,resizeFn:o,adId:t,options:{clickUrl:null==n?void 0:n.clickThrough},bidResponse:i,doc:e})})):i(O.PREVENT_WRITING_ON_MAIN_DOCUMENT,"renderAd was prevented from writing to the main document."):i(O.MISSING_DOC_OR_ADID,"missing ".concat(t?"doc":"adId"))}catch(e){i(Ca,e.message)}}(e,t,n)})),sd.removeAdUnit=function(e){Xe("Invoking pbjs.removeAdUnit",arguments),e?(st(e)?e:[e]).forEach((function(e){for(var t=sd.adUnits.length-1;t>=0;t--)sd.adUnits[t].code===e&&sd.adUnits.splice(t,1)})):sd.adUnits=[]},sd.requestBids=(_d=Rn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.adUnitCodes,a=e.labels,s=e.auctionId,d=e.ttlBuffer,l=e.ortb2,c=e.metrics,u=e.defer;Rr(cd);var p=n||Z.getConfig("bidderTimeout");Xe("Invoking pbjs.requestBids",arguments),i&&i.length?r=r.filter((function(e){return f(i,e.code)})):i=r&&r.map((function(e){return e.code}));var h={global:Xt({},Z.getAnyConfig("ortb2")||{},l||{}),bidder:Object.fromEntries(Object.entries(Z.getBidderConfig()).map((function(e){var t=o(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=o(e,2);return t[0],null!=t[1]})))};return nd(he.resolve(h.global)).then((function(e){return h.global=e,Td({bidsBackHandler:t,timeout:p,adUnits:r,adUnitCodes:i,labels:a,auctionId:s,ttlBuffer:d,ortb2Fragments:h,metrics:c,defer:u})}))}),"requestBids"),function(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t}(_d,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||sd.adUnits;return e.adUnits=st(t)?t.slice():[t],e.metrics=Hr(),e.metrics.checkpoint("requestBids"),e.defer=ge({promiseFactory:function(e){return new Promise(e)}}),_d.call(this,e),e.defer.promise})));var Td=Rn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.ttlBuffer,o=e.adUnitCodes,a=e.labels,s=e.auctionId,d=e.ortb2Fragments,l=e.metrics,c=e.defer,u=To(Z.getConfig("s2sConfig")||[]);function p(e,n,r){if("function"==typeof t)try{t(e,n,r)}catch(e){Ke("Error executing bidsBackHandler",null,e)}c.resolve({bids:e,timedOut:n,auctionId:r})}(function(e){e.forEach((function(e){var t,n,r;null!=(r=null==(t=e)||null===(n=t.mediaTypes)||void 0===n?void 0:n.video)&&null==r.plcmt&&(r.context===ur||[2,3,4].includes(r.placement)?r.plcmt=4:r.context!==ur&&[2,6].includes(r.playbackmethod)&&(r.plcmt=2))}))})(r),r=$r(l).measureTime("requestBids.validate",(function(){return wd(r)}));var h={};if(r.forEach((function(e){var t,n,r=Object.keys(e.mediaTypes||{banner:"banner"}),o=e.bids.map((function(e){return e.bidder})),a=Co.bidderRegistry,s=o.filter((function(e){return!u.has(e)}));e.adUnitId=Ne();var d=null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid;d&&(h.hasOwnProperty(e.code)?Je("Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '".concat(e.code,"'")):h[e.code]=d),null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),s.forEach((function(t){var n=a[t],i=n&&n.getSpec&&n.getSpec(),o=i&&i.supportedMediaTypes||["banner"];r.some((function(e){return f(o,e)}))||(Je(function(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))}))})),r&&0!==r.length){r.forEach((function(e){var t,n,r=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid)||h[e.code]||Ne();h.hasOwnProperty(e.code)||(h[e.code]=r),e.transactionId=r,Zt(e,"ortb2Imp.ext.tid",r)}));var g=wa.createAuction({adUnits:r,adUnitCodes:o,callback:p,cbTimeout:n,labels:a,auctionId:s,ortb2Fragments:d,metrics:l}),m=r.length;m>15&&Xe("Current auction ".concat(g.getAuctionId()," contains ").concat(m," adUnits."),r),o.forEach((function(e){return Us.setLatestAuctionForAdUnit(e,g.getAuctionId())})),g.callBids()}else Ge("No adUnits configured. No bids requested."),p()}),"startAuction");sd.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(Ro),n(Id),e.call(this,t)}),49),sd.addAdUnits=function(e){Xe("Invoking pbjs.addAdUnits",arguments),sd.adUnits.push.apply(sd.adUnits,st(e)?e:[e]),Rr(ld)},sd.onEvent=function(e,t,n){Xe("Invoking pbjs.onEvent",arguments),ot(t)?!n||pd[e].call(null,n)?Or(e,t,n):Ke('The id provided is not valid for event "'+e+'" and no handler was set.'):Ke('The event handler provided is not a function and was not set on event "'+e+'".')},sd.offEvent=function(e,t,n){Xe("Invoking pbjs.offEvent",arguments),n&&!pd[e].call(null,n)||Pr(e,t,n)},sd.getEvents=function(){return Xe("Invoking pbjs.getEvents"),Dr()},sd.registerBidAdapter=function(e,t){Xe("Invoking pbjs.registerBidAdapter",arguments);try{Co.registerBidAdapter(e(),t)}catch(e){Ke("Error registering bidder adapter : "+e.message)}},sd.registerAnalyticsAdapter=function(e){Xe("Invoking pbjs.registerAnalyticsAdapter",arguments);try{Co.registerAnalyticsAdapter(e)}catch(e){Ke("Error registering analytics adapter : "+e.message)}},sd.createBid=function(e){return Xe("Invoking pbjs.createBid",arguments),cr(e)};var Id=[],kd=Rn("async",(function(e){e&&!ut(e)?(Xe("Invoking pbjs.enableAnalytics for: ",e),Co.enableAnalytics(e)):Ke("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");sd.enableAnalytics=function(e){Id.push(kd.bind(this,e))},sd.aliasBidder=function(e,t,n){Xe("Invoking pbjs.aliasBidder",arguments),e&&t?Co.aliasBidAdapter(e,t,n):Ke("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},sd.aliasRegistry=Co.aliasRegistry,Z.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete sd.aliasRegistry})),sd.getAllWinningBids=function(){return wa.getAllWinningBids()},sd.getAllPrebidWinningBids=function(){return wa.getBidsReceived().filter((function(e){return e.status===M.BID_TARGETING_SET}))},sd.getHighestCpmBids=function(e){return Us.getWinningBids(e)},sd.clearAllAuctions=function(){wa.clearAllAuctions()},sd.markWinningBidAsUsed=function(e){var t=Ad(e,"Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function.");t.length>0&&wa.addWinningBid(t[0])};var Ad=function(e,t){var n=[];return e.adUnitCode&&e.adId?n=wa.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?n=Us.getWinningBids(e.adUnitCode):e.adId?n=wa.getBidsReceived().filter((function(t){return t.adId===e.adId})):Je(t),n};function Ed(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){Ke("Error processing command :","prebid.js",e)}}))}sd.getConfig=Z.getAnyConfig,sd.readConfig=Z.readAnyConfig,sd.mergeConfig=Z.mergeConfig,sd.mergeBidderConfig=Z.mergeBidderConfig,sd.setConfig=Z.setConfig,sd.setBidderConfig=Z.setBidderConfig,sd.que.push((function(){window.addEventListener("message",(function(e){!function(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}n&&n.adId&&n.message&&gs.hasOwnProperty(n.message)&&xa(n.adId,n.message===F).then((function(t){var r,i;gs[n.message]((r=n.adId,i=function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw Ke(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,[Object.assign({},e,{adId:r})].concat(n))}),n,t)}))}(e)}),!1)})),sd.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){Ke("Error processing command :",e.message,e.stack)}else Ke("Commands written into pbjs.cmd.push must be wrapped in a function")},sd.que.push=sd.cmd.push,sd.processQueue=function(){Ba(),Rn.ready(),Ed(sd.que),Ed(sd.cmd)},sd.triggerBilling=function(e){var t=Ad(e,"Improper use of triggerBilling. It requires a bid with at least an adUnitCode or an adId to function."),n=t.find((function(t){return t.requestId===e.requestId}))||t[0];if(t.length>0&&n)try{Co.callBidBillableBidder(n)}catch(e){Ke("Error when triggering billing :",e)}else Je("The bid provided to triggerBilling did not match any bids received.")};const Cd=sd;function xd(e){return function(t){return Bt(t,e)}}function Od(e){var t=function(e){var t;return At()&&(t=g(window.googletag.pubads().getSlots(),xd(e))),t}(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function Pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pd(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rd="33across",jd=["33across_mgni"],Md="USD",Nd=/^[a-zA-Z0-9_-]{22}$/,Ud={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},Ld=["mimes","minduration","maxduration","placement","plcmt","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],Bd={uniqueSiteIds:[]};function qd(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function Fd(e){return"".concat(e.bidId)}function Vd(e){var t,n=e.bidRequests,r=e.gdprConsent,i=void 0===r?{}:r,o=e.uspConsent,a=e.gppConsent,s=void 0===a?{}:a,d=e.pageUrl,l=e.referer,c=e.ttxSettings,u=e.bidderRequest,p={},h=n[0],f=h.params,g=f.siteId,m=f.test,v=Z.getConfig("coppa");return p.imp=[],n.forEach((function(e){var t,n,r;p.imp.push((n=A(t=e,"ortb2Imp.ext.gpid"),r={id:t.bidId,ext:Dd({ttx:{prod:A(t,"params.productId")}},n?{gpid:n}:{})},A(t,"mediaTypes.banner")&&(r.banner=Dd({},function(e){var t,n,r=A(e,"mediaTypes.banner",{}),i=(n=e.adUnitCode,document.getElementById(n)||document.getElementById(function(e){if(At())for(var t=googletag.pubads().getSlots(),n=xd(e),r=0;r<t.length;r++)if(n(t[r])){var i=t[r].getSlotElementId();return Xe("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(i)),i}return Je("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(n))),o=function(e){return st(e)&&2===e.length&&!st(e[0])?[$d(e)]:e.map($d)}(r.sizes);t="function"==typeof e.getFloor?o.map((function(t){var n,r=Gd(e,t,Vo);return r&&(n={ext:{ttx:{bidfloors:[r]}}}),Object.assign({},t,n)})):o;var a,s=function(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}(o),d=(a=function(e){return!function(){try{return We()!==$e()}catch(e){return!0}}()&&null!==e}(i)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.w,i=n.h;return"visible"===t.document.visibilityState?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.w,r=t.h,i=e.getBoundingClientRect(),o=i.width,a=i.height,s=i.left,d=i.top,l=i.right,c=i.bottom;return(0===o||0===a)&&n&&r&&(o=n,a=r,l=s+n,c=d+r),{width:o,height:a,left:s,top:d,right:l,bottom:c}}(e,{w:n.w,h:n.h}),i=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},r]);return null!==i?i.width*i.height/(r.width*r.height)*100:0}(e,t,{w:r,h:i}):0}(i,$e(),s):"nm",{ttx:{viewability:{amount:isNaN(a)?a:Math.round(a)}}});return{format:t,ext:d}}(t))),A(t,"mediaTypes.video")&&(r.video=function(e){var t,n=A(e,"mediaTypes.video",{}),r=A(e,"params.video",{}),i=Dd(Dd({},n),r),o={},a=$d(i.playerSize[0]),s=a.w,d=a.h;o.w=s,o.h=d,Ld.forEach((function(e){i.hasOwnProperty(e)&&(o[e]=i[e])}));var l=Hd(e);if(null!==(t=o.plcmt)&&void 0!==t||(o.plcmt=o.placement?(Je("[33Across Adapter] The ORTB field `placement` is deprecated, please use `plcmt` instead"),o.placement):2),l===Ud.INSTREAM&&(o.startdelay=o.startdelay||0),"function"==typeof e.getFloor){var c=Gd(e,{w:o.w,h:o.h},Fo);c&&Object.assign(o,{ext:{ttx:{bidfloors:[c]}}})}return o}(t)),r))})),p.site={id:g},p.device=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=We(),r={ext:{ttx:Dd(Dd({},Xd()),{},{pxr:n.devicePixelRatio,vp:(e=function(){var e=We();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement,{w:e.clientWidth,h:e.clientHeight}),ah:n.screen.availHeight,mtp:n.navigator.maxTouchPoints})}};return t.sua&&(r.sua=Ft(t.sua,["browsers","platform","model","mobile"])),r}(null===(t=h.ortb2)||void 0===t?void 0:t.device),d&&(p.site.page=d),l&&(p.site.ref=l),p.id=null==u?void 0:u.bidderRequestId,i.consentString&&(p.user=zd(p.user,{consent:i.consentString})),Array.isArray(h.userIdAsEids)&&h.userIdAsEids.length>0&&(p.user=zd(p.user,{eids:h.userIdAsEids})),p.regs=zd(p.regs,{gdpr:Number(i.gdprApplies)}),o&&(p.regs=zd(p.regs,{us_privacy:o})),s.gppString&&Object.assign(p.regs,{gpp:s.gppString,gpp_sid:s.applicableSections}),void 0!==v&&(p.regs.coppa=Number(!!v)),p.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"9.10.0"}]}},h.schain&&(p.source=zd(p.source,{schain:h.schain})),1===m&&(p.test=1),{method:"POST",url:c&&c.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(g),data:JSON.stringify(p),options:{contentType:"text/plain",withCredentials:!0}}}function zd(){return Xt({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{ext:arguments.length>1?arguments[1]:void 0})}function $d(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function Wd(e){return Xt({},e,{params:{productId:Hd(e)}})}function Hd(e){var t=e.params,n=e.mediaTypes,r=n.banner,i=n.video;return i&&!r&&"instream"===i.context?Ud.INSTREAM:t.productId===Ud.INVIEW?t.productId:Ud.SIAB}function Gd(e,t,n){var r=e.getFloor({currency:Md,mediaType:n,size:[t.w,t.h]});if(!isNaN(r.floor)&&r.currency===Md)return r.floor}function Xd(){var e=We(),t=e.innerWidth,n=e.innerHeight,r=e.screen,i=[Math.max(r.width,r.height),Math.min(r.width,r.height)],o=i[0],a=i[1];return n>t?{w:a,h:o}:{w:o,h:a}}var Jd={NON_MEASURABLE:"nm",code:Rd,aliases:jd,supportedMediaTypes:[Vo,Fo],gvlid:58,isBidRequestValid:function(e){return function(e){return!(e.bidder!==Rd&&!jd.includes(e.bidder)||!e.params)&&!!function(e){return null!==(A(e,"params.siteId","")||"").trim().match(Nd)}(e)}(e)&&function(e){var t=A(e,"mediaTypes.banner");return void 0===t||!!Array.isArray(t.sizes)}(e)&&function(e){var t=A(e,"mediaTypes.video"),n=A(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;var r=Dd(Dd({},t),n);return!(!Array.isArray(r.mimes)||0===r.mimes.length)&&(!(!Array.isArray(r.protocols)||0===r.protocols.length)&&(![r.placement,r.plcmt].some((function(e){return void 0!==e&&"number"!=typeof e}))&&("instream"!==t.context||void 0===r.startdelay||"number"==typeof r.startdelay)))}(e)},buildRequests:function(e,t){var n=function(e,t){var n,r,i=Object.assign({},Z.getConfig("ttxSettings")),o=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent);return Bd.uniqueSiteIds=e.map((function(e){return e.params.siteId})).filter(wt),{ttxSettings:i,gdprConsent:o,uspConsent:null==t?void 0:t.uspConsent,gppConsent:null==t?void 0:t.gppConsent,pageUrl:null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.page,referer:null==t||null===(r=t.refererInfo)||void 0===r?void 0:r.ref}}(e,t),r=n.ttxSettings,i=n.gdprConsent,o=n.uspConsent,a=n.gppConsent,s=n.pageUrl,d=n.referer,l=function(e,t){return function(e,t){var n={};return e.forEach((function(e){var r=t(e);n[r]=n[r]||[],n[r].push(e)})),n}(t.map(Wd),!0===(e&&e.enableSRAMode)?qd:Fd)}(r,e),c=[];for(var u in l)c.push(Vd({bidRequests:l[u],gdprConsent:i,uspConsent:o,gppConsent:a,pageUrl:s,referer:d,ttxSettings:r,bidderRequest:t}));return c},interpretResponse:function(e,t){var n=e.body,r=n.seatbid,i=n.cur,o=void 0===i?"USD":i;return st(r)?r.filter((function(e){return st(e.bid)&&e.bid.length>0})).reduce((function(e,t){return e.concat(t.bid.map((function(e){return function(e,t){var n=e.adomain&&e.adomain.length,r={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:A(e,"ext.ttx.mediaType",Vo),currency:t,netRevenue:!0};return n&&(r.meta={advertiserDomains:e.adomain}),r.mediaType===Fo&&("xml"===A(e,"ext.ttx.vastType","xml")?r.vastXml=r.ad:r.vastUrl=r.ad),r}(e,o)})))}),[]):[]},getUserSyncs:function(e,t,n,r,i){var o=e.iframeEnabled?Bd.uniqueSiteIds.map((function(e){return function(e){var t=e.siteId,n=void 0===t?"zzz000000000003zzz":t,r=e.gdprConsent,i=void 0===r?{}:r,o=e.uspConsent,a=e.gppConsent,s=void 0===a?{}:a,d=Z.getConfig("ttxSettings"),l=d&&d.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",c=i.consentString,u=i.gdprApplies,p=s.gppString,h=void 0===p?"":p,f=s.applicableSections,g=void 0===f?[]:f,m={type:"iframe",url:"".concat(l,"&id=").concat(n,"&gdpr_consent=").concat(encodeURIComponent(c),"&us_privacy=").concat(encodeURIComponent(o),"&gpp=").concat(encodeURIComponent(h),"&gpp_sid=").concat(encodeURIComponent(g.join(",")))};return"boolean"==typeof u&&(m.url+="&gdpr=".concat(Number(u))),m}({gdprConsent:n,uspConsent:r,gppConsent:i,siteId:e})})):[];return Bd.uniqueSiteIds=[],o}};function Kd(e,t){return function(){for(var n,r,i=document.domain.split("."),o="_gd".concat(Date.now(),"_").concat(t),a=0;a<i.length;a++){var s=i.slice(a).join(".");if(e.setCookie(o,"1",void 0,void 0,s),r=e.getCookie(o),e.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,s),"1"!==r)return n;n=s}}}Zr(Jd),p("33acrossBidAdapter");var Yd="33acrossId",Qd="33acrossIdFp",Zd="33acrossIdTp",el=Mo({moduleType:Cn,moduleName:Yd}),tl={domainOverride:Kd(el,Yd)};function nl(e){if(el.cookiesAreEnabled()){var t=new Date(0).toUTCString();el.setCookie(e,"",t,"Lax",tl.domainOverride())}el.removeDataFromLocalStorage(e)}function rl(e,t){var n;return t.find((function(t){return t===Do?n=el.getCookie(e):t===Po&&(n=el.getDataFromLocalStorage(e)),!!n})),n}function il(e,t,n){t?function(e,t,n){var r=n.enabledStorageTypes,i=n.expires;r.forEach((function(n){if(n===Do){var r=864e5*i,o=new Date(Date.now()+r);el.setCookie(e,t,o.toUTCString(),"Lax",tl.domainOverride())}else n===Po&&el.setDataInLocalStorage(e,t)}))}(e,t,n):nl(e)}var ol={name:Yd,gvlid:58,decode:function(e){return d({},Yd,{envelope:e})},getId:function(e,t){var n=e.params,r=void 0===n?{}:n,i=e.enabledStorageTypes,o=void 0===i?[]:i,a=e.storage,s=void 0===a?{}:a;if("string"==typeof r.pid){if(!0!==(null==t?void 0:t.gdprApplies)){var d=r.pid,l=r.storeFpid,c=void 0===l||l,u=r.storeTpid,p=void 0===u||u,h=r.apiUrl,f=void 0===h?"https://lexicon.33across.com/v1/envelope":h;return{callback:function(e){an(1e4)(f,{success:function(t){var n={};try{n=function(e){return e.succeeded?e.data.envelope?{envelope:e.data.envelope,fp:e.data.fp,tp:e.data.tp}:(Ge("".concat(Yd,": No envelope was received")),{}):("Cookied User"==e.error?Ge("".concat(Yd,": Unsuccessful response").concat(" ",e.error)):Ke("".concat(Yd,": Unsuccessful response").concat(" ",e.error)),{})}(JSON.parse(t))}catch(e){Ke("".concat(Yd,": ID reading error:"),e)}n.envelope||nl(Yd),c&&il(Qd,n.fp,{enabledStorageTypes:o,expires:s.expires}),p&&il(Zd,n.tp,{enabledStorageTypes:o,expires:s.expires}),e(n.envelope)},error:function(t){Ke("".concat(Yd,": ID error response"),t),e()}},function(e,t,n){var r=zi.getConsentData(),i=Wi.getCoppa(),o=$i.getConsentData(),a={pid:e,gdpr:0,src:"pbjs",ver:"9.10.0",coppa:Number(i)};if(r&&(a.us_privacy=r),o){var s=o.gppString,d=void 0===s?"":s,l=o.applicableSections,c=void 0===l?[]:l;a.gpp=d,a.gpp_sid=encodeURIComponent(c.join(","))}null!=t&&t.consentString&&(a.gdpr_consent=t.consentString);var u=rl(Qd,n);u&&(a.fp=encodeURIComponent(u));var p=rl(Zd,n);return p&&(a.tp=encodeURIComponent(p)),a}(d,t,o),{method:"GET",withCredentials:!0})}}}Je("".concat(Yd,": Submodule cannot be used where GDPR applies"))}else Ke("".concat(Yd,": Submodule requires a partner ID to be defined"))},domainOverride:tl.domainOverride,eids:{"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}}}};Bn("userId",ol),p("33acrossIdSystem");var al=Z.getConfig,sl={code:"adf",aliases:[{code:"adformOpenRTB",gvlid:50},{code:"adform",gvlid:50}],gvlid:50,supportedMediaTypes:[qo,Vo,Fo],isBidRequestValid:function(e){var t=e.params||{},n=t.mid,r=t.inv,i=t.mname;return!!(n||r&&i)},buildRequests:function(e,t){var n,r,i,s,d,l,c=t.ortb2||{},u=c.user;"object"===a(al("app"))?(d=al("app")||{},c.app&&Xt(d,c.app)):(l=al("site")||{},c.site&&Xt(l,c.site),l.page||(l.page=t.refererInfo.page));var p=al("device")||{};p.w=p.w||window.innerWidth,p.h=p.h||window.innerHeight,p.ua=p.ua||navigator.userAgent;var h=Qt(e,"params.adxDomain")||"adx.adform.net",f=Qt(e,"params.pt")||Qt(e,"params.priceType")||"net",g=null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid,m=Qt(e,"params.test"),v=al("currency.adServerCurrency"),y=v&&[v],b=Qt(e,"userIdAsEids"),_=Qt(e,"schain"),w=null===(i=c.regs)||void 0===i||null===(s=i.ext)||void 0===s?void 0:s.dsa,S=e.map((function(e,t){var n,r;e.netRevenue=f;var i=e.getFloor?e.getFloor({currency:v||"USD",size:"*",mediaType:"*"}):{},a=i.floor,s=i.currency,d=e.params,l=d.mid,c=d.inv,u=d.mname,p={id:t+1,tagid:l,bidfloor:a,bidfloorcur:s,ext:{data:null===(n=e.ortb2Imp)||void 0===n||null===(r=n.ext)||void 0===r?void 0:r.data,bidder:{inv:c,mname:u}}};if(e.nativeOrtbRequest&&e.nativeOrtbRequest.assets){for(var h=e.nativeOrtbRequest.assets,g=[],m=0;m<h.length;m++){var y=Ct(h[m]),b=y.img;if(b){var _=b.ext&&b.ext.aspectratios;if(_){var w=parseInt(_[0].split(":")[0],10),S=parseInt(_[0].split(":")[1],10);b.wmin=b.wmin||0,b.hmin=S*b.wmin/w|0}}g.push(y)}p.native={request:{assets:g}}}var T=A(e,"mediaTypes.banner");if(T&&T.sizes){var I=Be(T.sizes).map((function(e){var t=o(e.split("x"),2),n=t[0],r=t[1];return{w:parseInt(n,10),h:parseInt(r,10)}}));p.banner={format:I}}var k=A(e,"mediaTypes.video");return k&&(p.video=k),p})),T={id:t.bidderRequestId,site:l,app:d,user:u,device:p,source:{tid:g,fd:1},ext:{pt:f},cur:y,imp:S};return m&&(T.is_debug=!!m,T.test=1),Z.getConfig("coppa")&&Zt(T,"regs.coppa",1),void 0!==A(t,"gdprConsent.gdprApplies")&&(Zt(T,"user.ext.consent",t.gdprConsent.consentString),Zt(T,"regs.ext.gdpr",1&t.gdprConsent.gdprApplies)),t.uspConsent&&Zt(T,"regs.ext.us_privacy",t.uspConsent),b&&Zt(T,"user.ext.eids",b),_&&Zt(T,"source.ext.schain",_),w&&Zt(T,"regs.ext.dsa",w),{method:"POST",url:"https://"+h+"/adx/openrtb",data:JSON.stringify(T),bids:e}},interpretResponse:function(e,t){var n=t.bids;if(e.body){var r,i,o=e.body,a=o.seatbid,s=o.cur,d=(r=a.map((function(e){return e.bid})),(i=[]).concat.apply(i,h(r))).reduce((function(e,t){return e[t.impid-1]=t,e}),[]);return n.map((function(e,t){var n=d[t];if(n){var r=A(n,"ext.prebid.type"),i=A(n,"ext.dsa"),o={requestId:e.bidId,cpm:n.price,creativeId:n.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:s,mediaType:r,width:n.w,height:n.h,dealId:n.dealid,meta:{mediaType:r,advertiserDomains:n.adomain,dsa:i}};return n.native?o.native={ortb:n.native}:r===Fo?(o.vastXml=n.adm,n.nurl&&(o.vastUrl=n.nurl)):o.ad=n.adm,e.renderer||r!==Fo||"outstream"!==A(e,"mediaTypes.video.context")||(o.renderer=_n.install({id:e.bidId,url:"https://s2.adform.net/banners/scripts/video/outstream/render.js",adUnitCode:e.adUnitCode}),o.renderer.setRender(dl)),o}})).filter(Boolean)}}};function dl(e){e.renderer.push((function(){window.Adform.renderOutstream(e)}))}function ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zr(sl),p("adfBidAdapter");var ul=["pos","context","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","startdelay","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend","boxingallowed"],pl=["battr","pos"],hl=["battr","api"],fl=["pos"],gl=["btype","battr","pos","api"],ml={1:"iframe",2:"image"},vl="__mf",yl="b"+vl,bl="v"+vl,_l="n"+vl,wl={code:"adkernel",gvlid:14,aliases:[{code:"headbidding"},{code:"adsolut"},{code:"oftmediahb"},{code:"audiencemedia"},{code:"waardex_ak"},{code:"roqoon"},{code:"adbite"},{code:"houseofpubs"},{code:"torchad"},{code:"stringads"},{code:"bcm"},{code:"engageadx"},{code:"converge",gvlid:248},{code:"adomega"},{code:"denakop"},{code:"rtbanalytica"},{code:"unibots"},{code:"ergadx"},{code:"turktelekom"},{code:"felixads"},{code:"motionspots"},{code:"sonic_twist"},{code:"displayioads"},{code:"rtbdemand_com"},{code:"bidbuddy"},{code:"didnadisplay"},{code:"qortex"},{code:"adpluto"},{code:"headbidder"},{code:"digiad"},{code:"monetix"},{code:"hyperbrainz"},{code:"voisetech"},{code:"global_sun"}],supportedMediaTypes:[Vo,Fo,qo],isBidRequestValid:function(e){return"params"in e&&void 0!==e.params.host&&"zoneId"in e.params&&!isNaN(Number(e.params.zoneId))&&e.params.zoneId>0&&e.mediaTypes&&(e.mediaTypes.banner||e.mediaTypes.video||e.mediaTypes.native&&Al((t=e.mediaTypes.native).image)&&Al(t.icon)&&!A(t,"privacyLink.required")&&!A(t,"privacyIcon.required"));var t},buildRequests:function(e,t){var n=function(e,t){var n,r=t&&0===(null===(n=t.page)||void 0===n?void 0:n.indexOf("https:"));return Object.values(e.map((function(e){return function(e,t){var n={id:e.bidId,tagid:e.adUnitCode};t&&(n.secure=1);var r,i=[],o=e.mediaTypes,a=~~!(null==o||!o.banner)+~~!(null==o||!o.video)+~~!(null==o||!o.native)>1,s=[];if(null!=o&&o.banner){a?(r=cl({},n)).id=n.id+yl:r=n,i=function(e){if(e){var t=[];if(e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)){var n=e.mediaTypes.banner.sizes;Array.isArray(n[0])?t=n:t.push(n)}else Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes));return t}}(e);var d=o.banner;r.banner=cl(cl(cl({},Tl(e.ortb2Imp,gl)),Tl(d,fl)),{},{format:i.map((function(e){return Ve(e)})),topframe:0}),Sl(r,e,i,a?"*":Vo),s.push(r)}if(null!=o&&o.video){a?(r=cl({},n)).id=r.id+bl:r=n;var l=o.video;r.video=cl(cl({},Tl(e.ortb2Imp,pl)),Tl(l,ul)),l.playerSize?(i=l.playerSize[0],r.video=Object.assign(r.video,Ve(i)||{})):l.w&&l.h&&(r.video.w=l.w,r.video.h=l.h),Sl(r,e,i,a?"*":Fo),s.push(r)}return null!=o&&o.native&&(a?(r=cl({},n)).id=r.id+_l:r=n,r.native=cl(cl({},Tl(e.ortb2Imp,hl)),{},{request:JSON.stringify(e.nativeOrtbRequest)}),Sl(r,e,i,a?"*":qo),s.push(r)),s}(e,r)})).reduce((function(t,n,r){var i,o=e[r].params,a=o.zoneId,s=o.host,d="".concat(s,"_").concat(a);return t[d]=t[d]||{host:s,zoneId:a,imps:[]},(i=t[d].imps).push.apply(i,h(n)),t}),{}))}(e,t.refererInfo),r=[],i=e[0].schain;return ht(n,(function(e){var n=e.host,o=e.zoneId,a=function(e,t,n){var r=t.ortb2||{},i=Xt(function(e,t,n){var r={id:e.bidderRequestId,imp:t,at:1,tmax:parseInt(e.timeout)};return ut(n.bcat)||(r.bcat=n.bcat),ut(n.badv)||(r.badv=n.badv),r}(t,e,r),function(e){var t,n=Xt({ip:"caller",ipv6:"caller",ua:"caller",js:1,language:(t=navigator.language?"language":"userLanguage",navigator[t].split("-")[0])},e.device||{});return Lt()&&(n.dnt=1),{device:n}}(r),function(e,t){var n=e.refererInfo,r=Z.getConfig("app");return ut(r)?{site:kl(n,t)}:{app:r}}(t,r),function(e,t){var n=e.gdprConsent,r=t.user||{};n&&void 0!==n.consentString&&Zt(r,"ext.consent",n.consentString);var i=function(e){var t=A(e,"bids.0.userIdAsEids");if(st(t))return t}(e);if(i&&Zt(r,"ext.eids",i),!ut(r))return{user:r}}(t,r),function(e){var t=e.gdprConsent,n=e.uspConsent,r=e.gppConsent,i={};if(t&&void 0!==t.gdprApplies&&Zt(i,"regs.ext.gdpr",~~t.gdprApplies),r&&(Zt(i,"regs.gpp",r.gppString),Zt(i,"regs.gpp_sid",r.applicableSections)),n&&Zt(i,"regs.ext.us_privacy",n),Z.getConfig("coppa")&&Zt(i,"regs.coppa",1),!ut(i))return i}(t),function(e){var t=function(e){if(Z.getConfig("userSync.syncEnabled")){var t=Z.getConfig("userSync.filterSettings");return Il(t.all,e)||Il(t.iframe,e)?1:Il(t.image,e)?2:void 0}}(e.bidderCode);if(t){var n={};return Zt(n,"ext.adk_usersync",t),n}}(t));return n&&Zt(i,"source.ext.schain",n),i}(e.imps,t,i);r.push({method:"POST",url:"https://".concat(n,"/hb?zone=").concat(o,"&v=").concat("1.7"),data:JSON.stringify(a)})})),r},interpretResponse:function(e,t){var n=e.body;if(!n.seatbid)return[];var r=JSON.parse(t.data),i=n.seatbid.map((function(e){return e.bid})).reduce((function(e,t){return e.concat(t)}),[]);return i.map((function(e){var t,i,o,a=g(r.imp,(function(t){return t.id===e.impid})),s={requestId:e.impid,cpm:e.price,creativeId:e.crid,currency:n.cur||"USD",ttl:360,netRevenue:!0};return s.requestId.endsWith(vl)&&(s.requestId=(t=s.requestId).substr(0,t.length-4-1)),1===e.mtype?(s.mediaType=Vo,s.width=e.w,s.height=e.h,s.ad=(o=(i=e).adm,"nurl"in i&&(o+=bt("".concat(i.nurl,"&px=1"))),o)):2===e.mtype?(s.mediaType=Fo,s.vastUrl=e.nurl,s.width=a.video.w,s.height=a.video.h):4===e.mtype&&(s.mediaType=qo,s.native={ortb:El(e.adm)}),at(e.dealid)&&(s.dealId=e.dealid),st(e.adomain)&&Zt(s,"meta.advertiserDomains",e.adomain),st(e.cat)&&Zt(s,"meta.secondaryCatIds",e.cat),lt(e.ext)&&(dt(e.ext.advertiser_id)&&Zt(s,"meta.advertiserId",e.ext.advertiser_id),at(e.ext.advertiser_name)&&Zt(s,"meta.advertiserName",e.ext.advertiser_name),at(e.ext.agency_name)&&Zt(s,"meta.agencyName",e.ext.agency_name)),s}))},getUserSyncs:function(e,t){return t&&0!==t.length&&(e.iframeEnabled||e.pixelEnabled)?t.filter((function(e){return e.body&&e.body.ext&&e.body.ext.adk_usersync})).map((function(e){return e.body.ext.adk_usersync})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){var t=e.url,n=e.type;return{type:ml[n],url:t}})):[]}};function Sl(e,t,n,r){var i=function(e,t,n){var r,i=1===n.length?n[0]:"*";if("function"==typeof e.getFloor){var o=e.getFloor({currency:"USD",mediaType:t,size:i});"object"!==a(o)||"USD"!==o.currency||isNaN(parseFloat(o.floor))||(r=parseFloat(o.floor))}return r}(t,r,n);i&&(e.bidfloor=i)}function Tl(e,t){return void 0===e?{}:Nt(e,t)}function Il(e,t){if(!e)return!1;var n=st(e.bidders)?e.bidders:[t],r="include"===e.filter;return ft(n,t)===r}function kl(e,t){var n={domain:e.domain,page:e.page};return Xt(n,t.site),null!=e.ref?n.ref=e.ref:delete n.ref,n}function Al(e){return!e||(e.sizes?Vt(e.sizes,2):!st(e.aspect_ratios)||e.aspect_ratios.length>0&&e.aspect_ratios[0].min_height&&e.aspect_ratios[0].min_width)}function El(e){var t=JSON.parse(e);return"native"in t&&(t=t.native),t}Zr(wl),p("adkernelBidAdapter");var Cl="USD",xl={image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},cta:{required:!1}},Ol={code:"adyoulike",gvlid:259,supportedMediaTypes:[Vo,qo,Fo],aliases:["ayl"],isBidRequestValid:function(e){var t=Ml(jl(e)),n=t.width>0&&t.height>0;return e.params&&e.params.placement&&(n||e.mediaTypes&&e.mediaTypes.native)},buildRequests:function(e,t){e=as(e);var n,r=!1,i={Version:"1.0",Bids:e.reduce((function(e,t){var i,o,a,s=A(a=t,"mediaTypes.banner")?Vo:A(a,"mediaTypes.video")?Fo:A(a,"mediaTypes.native")?qo:void 0,d=jl(t),l=Ml(d);if(e[t.bidId]={},e[t.bidId].PlacementID=t.params.placement,e[t.bidId].TransactionID=null===(i=t.ortb2Imp)||void 0===i||null===(o=i.ext)||void 0===o?void 0:o.tid,e[t.bidId].Width=l.width,e[t.bidId].Height=l.height,e[t.bidId].AvailableSizes=d.join(","),"function"==typeof t.getFloor&&(e[t.bidId].Pricing=function(e,t,n){var r=e.getFloor({currency:Cl,mediaType:n,size:[t.width,t.height]});if(!isNaN(r.floor)&&r.currency===Cl)return r.floor}(t,l,s)),t.schain&&(e[t.bidId].SChain=t.schain),!n&&t.userIdAsEids&&t.userIdAsEids.length&&(n=t.userIdAsEids),s===qo){var c=t.mediaTypes.native;"image"===c.type&&(c=Object.assign({},xl,c)),c.clickUrl={required:!0},e[t.bidId].Native=c}if(s===Fo){r=!0,e[t.bidId].Video=t.mediaTypes.video;var u=t.mediaTypes.video.playerSize;Array.isArray(u)&&!Array.isArray(u[0])&&(e[t.bidId].Video.playerSize=[u])}return e}),{}),PageRefreshed:Pl()};t.gdprConsent&&(i.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:"boolean"==typeof t.gdprConsent.gdprApplies?t.gdprConsent.gdprApplies:null}),t.uspConsent&&(i.uspConsent=t.uspConsent),t.ortb2&&(i.ortb2=t.ortb2),n&&(i.eids=n),i.pbjs_version="9.10.0";var o=JSON.stringify(i);return{method:"POST",url:Dl(e,t,r),data:o,options:{withCredentials:!0}}},interpretResponse:function(e,t){var n=[],r={};if(!e||!e.body)return n;try{r=JSON.parse(t.data).Bids}catch(e){}return e.body.forEach((function(e){var t=function(e,t){if(e&&(e.Ad||e.Native||e.Vast)){var n=t&&t[e.BidID];n&&(e.Width&&"0"!==e.Width||(e.Width=n.Width),e.Height&&"0"!==e.Height||(e.Height=n.Height));var r={requestId:e.BidID,ttl:3600,creativeId:e.CreativeID,cpm:e.Price,netRevenue:!0,currency:Cl,meta:e.Meta||{advertiserDomains:[]}},i=e.Vast;return i?(r.width=e.Width,r.height=e.Height,r.vastXml=window.atob(i),r.mediaType="video"):n.Native?(r.native=function(e,t){if("object"===a(e.Native))return e.Native;var n={},r={},i={};if("string"==typeof e.Ad){r=JSON.parse(e.Ad.match(/\/\*PREBID\*\/(.*)\/\*PREBID\*\//)[1]),i=r.Content.Preview.Text;var o=r.TrackingPrefix+"/pixel?event_kind=IMPRESSION&attempt="+r.Attempt,s=r.TrackingPrefix+"/pixel?event_kind=INSERTION&attempt="+r.Attempt;r.Campaign&&(o+="&campaign="+r.Campaign,s+="&campaign="+r.Campaign),n.clickUrl=r.TrackingPrefix+"/ar?event_kind=CLICK&attempt="+r.Attempt+"&campaign="+r.Campaign+"&url="+encodeURIComponent(r.Content.Landing.Url),r.OnEvents?(n.clickTrackers=Ll(r.OnEvents.CLICK),n.impressionTrackers=Ll(r.OnEvents.IMPRESSION),n.javascriptTrackers=Ll(r.OnEvents.IMPRESSION,!0)):n.impressionTrackers=[],n.impressionTrackers.push(o,s)}return Object.keys(t).map((function(o,a){switch(o){case"title":n[o]=i.TITLE;break;case"body":n[o]=i.DESCRIPTION;break;case"cta":n[o]=i.CALLTOACTION;break;case"sponsoredBy":n[o]=r.Content.Preview.Sponsor.Name;break;case"image":var s=t.image.sizes||[];s.length||(s[0]=e.Width||300,s[1]=e.Height||250);var d=Ul(r,A(r,"Content.Preview.Thumbnail.Image"),s[0],s[1]);d&&(n[o]={url:d,width:s[0],height:s[1]});break;case"icon":var l=t.icon.sizes||[];l.length||(l[0]=50,l[1]=50);var c=Ul(r,A(r,"Content.Preview.Sponsor.Logo.Resource"),l[0],l[1]);c&&(n[o]={url:c,width:l[0],height:l[1]});break;case"privacyIcon":n[o]=Ul(r,A(r,"Content.Preview.Credit.Logo.Resource"),25,25);break;case"privacyLink":n[o]=A(r,"Content.Preview.Credit.Url")}})),n}(e,n.Native),r.mediaType="native"):(r.width=e.Width,r.height=e.Height,r.ad=e.Ad),r}}(e,r);t&&n.push(t)})),n},getUserSyncs:function(e,t,n,r,i){var o;if(!e.iframeEnabled)return[];var a,s="";return n&&(s+="&gdpr="+(n.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),!0===Z.getConfig("coppa")&&(s+="&coppa=1"),r&&(s+="&us_privacy="+encodeURIComponent(r)),null!=i&&i.gppString&&null!=i&&null!==(o=i.applicableSections)&&void 0!==o&&o.length&&(s+="&gpp="+encodeURIComponent(i.gppString),s+="&gpp_sid="+encodeURIComponent(null==i||null===(a=i.applicableSections)||void 0===a?void 0:a.join(","))),[{type:"iframe",url:"https://visitor.omnitagjs.com/visitor/isync?uid=19340f4f097d16f41f34fc0274981ca4".concat(s)}]}};function Pl(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1}function Dl(e,t,n){var r=function(e){var t=g(e,(function(e){return e.params.DC}));return t?"-"+t.params.DC:""}(e),i=n?"/hb-api/prebid-video/v1":"/hb-api/prebid/v1";return Ht({protocol:"https",host:"".concat("hb-api").concat(r,".omnitagjs.com"),pathname:i,search:Rl(t)})}function Rl(e){var t,n={};if(e){var r,i=e.refererInfo;i&&(i.location&&(n.RefererUrl=encodeURIComponent(i.location),i.reachedTop||(n.SafeFrame=!0)),n.PageUrl=encodeURIComponent(i.topmostLocation),n.PageReferrer=encodeURIComponent(i.location));var o=null===(r=e.ortb2)||void 0===r?void 0:r.site;o&&(n.PageUrl=encodeURIComponent(o.page||(null==i?void 0:i.topmostLocation)),n.PageReferrer=encodeURIComponent(o.ref||(null==i?void 0:i.location)))}var a=null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.canonicalUrl;return a&&(n.CanonicalUrl=encodeURIComponent(a)),n}function jl(e){var t=e.sizes||[];return e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes||[]),e.params&&Array.isArray(e.params.size)&&(t=e.params.size,Array.isArray(t[0])||(t=[t])),Be(t)}function Ml(e){var t={},n=e[0];if("string"!=typeof n)return t;var r=n.toUpperCase().split("X"),i=parseInt(r[0],10);i&&(t.width=i);var o=parseInt(r[1],10);return o&&(t.height=o),t}function Nl(e){return e?"https://blobs.omnitagjs.com/blobs/"+e.substr(16,2)+"/"+e.substr(16)+"/"+e:""}function Ul(e,t,n,r){var i="";if(t&&t.Kind)switch(t.Kind){case"INTERNAL":i=Nl(t.Data.Internal.BlobReference.Uid);break;case"EXTERNAL":var o=e.DynamicPrefix,a=t.Data.External.Url;if((a=(a=a.replace(/\[height\]/i,""+r)).replace(/\[width\]/i,""+n)).indexOf(o)>=0){var s=/.*url=([^&]*)/gm.exec(a);(i=s?s[1]:"")||(i=Nl(/.*key=([^&]*)/gm.exec(a)[1]))}else i=a}return i}function Ll(e,t){var n=[];return e?(e.map((function(e,r){(t&&"JAVASCRIPT_URL"===e.Kind||!t&&"PIXEL_URL"===e.Kind)&&n.push(e.Url)})),n):n}function Bl(e){return null==e||!e.gdprApplies||!0===A(e,"vendorData.purpose.consents.1")}Zr(Ol),p("adyoulikeBidAdapter");var ql={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"},Fl=["user.keywords"].concat(Ks.flatMap((function(e){return["keywords","content.keywords"].map((function(t){return"".concat(e,".").concat(t)}))})));function Vl(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.filter((function(e){return e})).flatMap((function(e){return Array.isArray(e)?e:e.split(",")})).map((function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")})).filter((function(e){return e})).forEach((function(t){return e.add(t)})),Array.from(e.keys())}function zl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vl.apply(void 0,h(Fl.map((function(t){return A(e,t)}))).concat(n))}var $l={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid"},Wl=["user.data"].concat(Ks.map((function(e){return"".concat(e,".content.data")})));function Hl(e,t,n){return null==t?n:at(t)?t:dt(t)?t.toString():void Je("Unsuported type for param: "+e+" required type: String")}function Gl(e){var t={};return e.forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),r=n[0],i=n[1];t.hasOwnProperty(r)?t[r].push(i):t[r]=[i]}else t.hasOwnProperty(e)||(t[e]=[])})),t}function Xl(e){return Gl(zl(e))}function Jl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return ht(e,(function(e,r){if(st(e)){var i=[];ht(e,(function(e){((e=Hl(t+"."+r,e))||""===e)&&i.push(e)})),e=i}else{if(!at(e=Hl(t+"."+r,e)))return;e=[e]}e=e.filter((function(e){return""!==e}));var o={key:r};e.length>0&&(o.value=e),n.push(o)})),n}(Xt.apply(void 0,h(t.map((function(e){return Object.fromEntries(Object.entries(e||{}).map((function(e){var t=o(e,2),n=t[0],r=t[1];return[n,dt(r)||at(r)?[r]:r]})))})))))}function Kl(e){var t={};return Wl.forEach((function(n){(A(e,n)||[]).forEach((function(e){var n=$l[A(e,"ext.segtax")];n&&e.segment.forEach((function(e){t[n]?t[n].push(e.id):t[n]=[e.id]}))}))})),t}function Yl(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function Ql(e,t){for(var n=[],r=0;r<t;r++){var i=lt(e)?Ct(e):e;n.push(i)}return n}function Zl(e,t){for(var n=[],r=0;r<Math.ceil(e.length/t);r++){var i=r*t,o=i+t;n.push(e.slice(i,o))}return n}var ec="appnexus",tc=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],nc=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],rc=["age","externalUid","external_uid","segments","gender","dnt","language"],ic=["geo","device_id"],oc=["enabled","dongle","member_id","debug_timeout"],ac={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},sc={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},dc={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},lc=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,cc=Mo({bidderCode:ec}),uc=new Map([[1,"Mobile/Tablet - General"],[2,"Personal Computer"],[3,"Connected TV"],[4,"Phone"],[5,"Tablet"],[6,"Connected Device"],[7,"Set Top Box"],[8,"OOH Device"]]),pc={code:ec,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"stailamedia",gvlid:32},{code:"uol",gvlid:32},{code:"adzymic",gvlid:723}],supportedMediaTypes:[Vo,Fo,qo],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var n,r,i,o,a,s,d=(e=as(e)).map(hc),l=g(e,gc),c={};!0===Z.getConfig("coppa")&&(c={coppa:!0}),l&&Object.keys(l.params.user).filter((function(e){return f(rc,e)})).forEach((function(e){var t=Yl(e);if("segments"===e&&st(l.params.user[e])){var n=[];l.params.user[e].forEach((function(e){dt(e)?n.push({id:e}):lt(e)&&n.push(e)})),c[t]=n}else"segments"!==e&&(c[t]=l.params.user[e])}));var u,p=g(e,vc);p&&p.params&&p.params.app&&(u={},Object.keys(p.params.app).filter((function(e){return f(ic,e)})).forEach((function(e){return u[e]=p.params.app[e]})));var m,v=g(e,yc);v&&v.params&&p.params.app&&p.params.app.id&&(m={appid:v.params.app.id});var y={},b={},_=cc.getCookie("apn_prebid_debug")||null;if(_)try{y=JSON.parse(_)}catch(e){Ke("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(ac).forEach((function(e){var t=rt(e);at(t)&&""!==t&&(y[ac[e]]=t,y.enabled=!0)})),y=function(e,t){return Object.keys(e).forEach((function(n){var r,i;t[n]&&(ot(e[n])?t[n]=e[n](t[n]):t[n]=(r=e[n],i=t[n],"string"===r?i&&i.toString():"number"===r?Number(i):i),isNaN(t[n])&&delete t.key)})),t}({member_id:"number",debug_timeout:"number"},y);var w=g(e,bc);w&&w.debug&&(y=w.debug)}y&&y.enabled&&Object.keys(y).filter((function(e){return f(oc,e)})).forEach((function(e){b[e]=y[e]}));var S,T,I=g(e,mc),k=I?parseInt(I.params.member,10):0,A=e[0].schain,E=g(e,wc),C={tags:h(d),user:c,sdk:{source:"pbjs",version:"9.10.0"},schain:A};E&&(C.iab_support={omidpn:"Appnexus",omidpv:"9.10.0"}),k>0&&(C.member_id=k),p&&(C.device=u),v&&(C.app=m),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&n.device&&(C.device=C.device||{},Xt(C.device,(S=t.ortb2.device,T={useragent:S.ua,devicetype:uc.get(S.devicetype),make:S.make,model:S.model,os:S.os,os_version:S.osv,w:S.w,h:S.h,ppi:S.ppi,pxratio:S.pxratio},Object.keys(T).reduce((function(e,t){return T[t]&&(e[t]=T[t]),e}),{}))));var x=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jl.apply(void 0,[Xl(e),Kl(e)].concat(n))}(Ct(t&&t.ortb2),Ct(Z.getConfig("appnexusAuctionKeywords"))||{});if(x.length>0&&(C.keywords=x),Z.getConfig("adpod.brandCategoryExclusion")&&(C.brand_category_uniqueness=!0),b.enabled&&(C.debug=b,Xe("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(b,null,4))),t&&t.gdprConsent&&(C.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var O=t.gdprConsent.addtlConsent,P=O.substring(O.indexOf("~")+1);C.gdpr_consent.addtl_consent=P.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(C.us_privacy=t.uspConsent),null!=t&&t.gppConsent?C.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(r=t.ortb2)&&void 0!==r&&null!==(i=r.regs)&&void 0!==i&&i.gpp&&(C.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var D={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},R=t.refererInfo.canonicalUrl;at(R)&&""!==R&&(D.rd_can=R),C.referrer_detection=D}if(g(e,_c)&&e.filter(_c).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,r=n.durationRangeSec,i=n.requireExactDuration,o=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,r=e.requireExactDuration,i=Math.min.apply(Math,h(n)),o=Math.floor(t/i);return r?Math.max(o,n.length):o}(t.mediaTypes.video),a=Math.max.apply(Math,h(r)),s=e.filter((function(e){return e.uuid===t.bidId})),d=Ql.apply(void 0,h(s).concat([o]));if(i){var l=Zl(d,Math.ceil(o/r.length));r.forEach((function(e,t){l[t].map((function(t){Sc(t,"minduration",e),Sc(t,"maxduration",e)}))}))}else d.map((function(e){return Sc(e,"maxduration",a)}));return d}(d,e),n=C.tags.filter((function(t){return t.uuid!==e.bidId}));C.tags=[].concat(h(n),h(t))})),e[0].userId){var j=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var n={source:e.source,id:t.id};"adserver.org"==e.source?n.rti_partner="TDID":"uidapi.com"==e.source&&(n.rti_partner="UID2"),j.push(n)}))})),j.length&&(C.eids=j)}if(null!=t&&null!==(o=t.ortb2)&&void 0!==o&&null!==(a=o.regs)&&void 0!==a&&null!==(s=a.ext)&&void 0!==s&&s.dsa){var M=t.ortb2.regs.ext.dsa,N={};if(["dsarequired","pubrender","datatopub"].forEach((function(e){dt(M[e])&&(N[e]=M[e])})),st(M.transparency)&&M.transparency.every((function(e){return lt(e)}))){var U=[];M.transparency.forEach((function(e){at(e.domain)&&""!=e.domain&&st(e.dsaparams)&&e.dsaparams.every((function(e){return dt(e)}))&&U.push(e)})),U.length>0&&(N.transparency=U)}ut(N)||(C.dsa=N)}d[0].publisher_id&&(C.publisher_id=d[0].publisher_id);var L=function(e,t){var n=[],r={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if(Bl(null==t?void 0:t.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==rt("apn_test").toUpperCase()&&!0!==Z.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1}),e.tags.length>15){var o=Ct(e);Zl(e.tags,15).forEach((function(e){o.tags=e;var a=JSON.stringify(o);n.push({method:"POST",url:i,data:a,bidderRequest:t,options:r})}))}else{var a=JSON.stringify(e);n={method:"POST",url:i,data:a,bidderRequest:t,options:r}}return n}(C,t);return L},interpretResponse:function(e,t){var n=this,r=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(r.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),Ke(o),i}if(e.tags&&e.tags.forEach((function(e){var t,o=(t=e)&&t.ads&&t.ads.length&&g(t.ads,(function(e){return e.rtb}));if(o&&(!0===kn.get(r.bidderCode,"allowZeroCpmBids")?o.cpm>=0:o.cpm>0)&&f(n.supportedMediaTypes,o.ad_type)){var a=function(e,t,n){var r=Tt(e.uuid,[n]),i=Me(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id})),t.dsa&&(o.meta=Object.assign({},o.meta,{dsa:t.dsa})),t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)})),t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),A(r,"mediaTypes.video.context")){case zo:var a=ql[t.brand_category_id]?ql[t.brand_category_id]:null;o.meta=Object.assign({},o.meta,{primaryCatId:a});var s=t.deal_priority;o.video={context:zo,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:s},o.vastUrl=t.rtb.video.asset_url;break;case ur:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var d=g(n.bids,(function(t){return t.bidId===e.uuid})),l=A(d,"mediaTypes.video.renderer.options");l||(l=A(d,"renderer.options")),o.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=_n.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(Tc)}catch(e){Je("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:function(){return Ge("AppNexus outstream video impression event")},loaded:function(){return Ge("AppNexus outstream video loaded event")},ended:function(){Ge("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),r}(o.adUnitCode,t,l)}break;case pr:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[qo]){var c,u=t.rtb[qo];if(function(e){if(!e||""===e)return!1;var t=e.match(lc),n=null!=t&&t.length>=1,r=e.match("trk.js"),i=null!=r&&r.length>=1;return e.startsWith("<script")&&i&&n}(t.viewability.config)){var p="pbjs_adid="+i+";pbjs_auc="+r.adUnitCode;c=t.viewability.config.replace("dom_id=%native_dom_id%",p)}var h=u.javascript_trackers;null==h?h=c:at(h)?h=[h,c]:h.push(c),o[qo]={title:u.title,body:u.desc,body2:u.desc2,cta:u.ctatext,rating:u.rating,sponsoredBy:u.sponsored,privacyLink:u.privacy_link,address:u.address,downloads:u.downloads,likes:u.likes,phone:u.phone,price:u.price,salePrice:u.saleprice,clickUrl:u.link.url,displayUrl:u.displayurl,clickTrackers:u.link.click_trackers,impressionTrackers:u.impression_trackers,video:u.video,javascriptTrackers:h},u.main_img&&(o.native.image={url:u.main_img.url,height:u.main_img.height,width:u.main_img.width}),u.icon&&(o.native.icon={url:u.icon.url,height:u.icon.height,width:u.icon.width})}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var f=0;f<t.rtb.trackers[0].impression_urls.length;f++){var m=bt(t.rtb.trackers[0].impression_urls[f]);o.ad+=m}}catch(e){Ke("Error appending tracking pixel",e)}}return o}(e,o,r);a.mediaType=function(e){var t=e.ad_type;return t===Fo?Fo:t===qo?qo:Vo}(o),i.push(a)}})),e.debug&&e.debug.debug_info){var a="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;a=a.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),Ge("https://console.appnexus.com/docs/understanding-the-debug-auction"),Ge(a)}return i},getUserSyncs:function(e,t,n,r,i){if(e.iframeEnabled&&Bl(n))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]}};function hc(e){var t,n={};Object.keys(e.params).forEach((function(t){var n=Yl(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),n.sizes=fc(e.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=e.bidId,e.params.placement_id?n.id=parseInt(e.params.placement_id,10):n.code=e.params.inv_code;var r=rt("ast_override_div");if(at(r)&&""!==r){var i=decodeURIComponent(r).split(",").find((function(t){return t.startsWith("".concat(e.adUnitCode,":"))}));if(i){var o=i.split(":")[1];o&&(n.force_creative_id=parseInt(o,10))}}n.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,n.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,n.prebid=!0,n.disable_psa=!0;var a=function(e){if(!ot(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return lt(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(a&&(n.reserve=a),e.params.position)n.position={above:1,below:2}[e.params.position]||0;else{var s=A(e,"mediaTypes.banner.pos")||A(e,"mediaTypes.video.pos");0!==s&&1!==s&&3!==s||(n.position=3===s?2:s)}e.params.traffic_source_code&&(n.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(n.private_sizes=fc(e.params.private_sizes)),e.params.supply_type&&(n.supply_type=e.params.supply_type),e.params.pub_click&&(n.pubclick=e.params.pub_click),e.params.ext_inv_code&&(n.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(n.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(n.external_imp_id=e.params.external_imp_id);var d,l=Jl(at(d=A(e,"ortb2Imp.ext.data.keywords"))&&""!==d?Gl(d.split(/\s*(?:,)\s*/)):{},null===(t=e.params)||void 0===t?void 0:t.keywords);l.length>0&&(n.keywords=l);var c,u,p=A(e,"ortb2Imp.ext.gpid")||A(e,"ortb2Imp.ext.data.pbadslot");if(p&&(n.gpid=p),(e.mediaType===qo||A(e,"mediaTypes.".concat(qo)))&&(n.ad_types.push(qo),0===n.sizes.length&&(n.sizes=fc([1,1])),e.nativeParams)){var h=(c=e.nativeParams,u={},Object.keys(c).forEach((function(e){var t=dc[e]&&dc[e].serverName||dc[e]||e,n=dc[e]&&dc[e].requiredParams;if(u[t]=Object.assign({},n,c[e]),(t===dc.image.serverName||t===dc.icon.serverName)&&u[t].sizes){var r=u[t].sizes;(Vt(r)||st(r)&&r.length>0&&r.every((function(e){return Vt(e)})))&&(u[t].sizes=fc(u[t].sizes))}t===dc.privacyLink&&(u.privacy_supported=!0)})),u);n[qo]={layouts:[h]}}var g=A(e,"mediaTypes.".concat(Fo)),m=A(e,"mediaTypes.video.context");return n.hb_source=g&&"adpod"===m?7:1,(e.mediaType===Fo||g)&&n.ad_types.push(Fo),(e.mediaType===Fo||g&&"outstream"!==m)&&(n.require_asset_url=!0),e.params.video&&(n.video={},Object.keys(e.params.video).filter((function(e){return f(tc,e)})).forEach((function(t){switch(t){case"context":case"playback_method":var r=e.params.video[t];r=st(r)?r[0]:r,n.video[t]=sc[t][r];break;case"frameworks":break;default:n.video[t]=e.params.video[t]}})),e.params.video.frameworks&&st(e.params.video.frameworks)&&(n.video_frameworks=e.params.video.frameworks)),g&&(n.video=n.video||{},Object.keys(g).filter((function(e){return f(nc,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof n.video[e]&&(n.video[e]=g[e]);break;case"skip":"boolean"!=typeof n.video.skippable&&(n.video.skippable=1===g[e]);break;case"skipafter":"number"!=typeof n.video.skipoffset&&(n.video.skippoffset=g[e]);break;case"playbackmethod":if("number"!=typeof n.video.playback_method){var t=g[e];(t=st(t)?t[0]:t)>=1&&t<=4&&(n.video.playback_method=t)}break;case"api":if(!n.video_frameworks&&st(g[e])){var r=g[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));n.video_frameworks=r}break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof n.video.context){var i=g.plcmt,o=g.placement,a=g.startdelay,s=function(e,t){if(e)if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";if(-2===t)return"accompanying_content_post_roll"}else{if(3===e)return"interstitial";if(4===e)return"outstream"}}(i,a)||function(e){if(e)return 2===e?"in-banner":3===e?"outstream":4===e?"in-feed":5===e?"intersitial":void 0}(o)||function(e){if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0}(a);n.video.context=sc.context[s]}}}))),e.renderer&&(n.video=Object.assign({},n.video,{custom_renderer_present:!0})),e.params.frameworks&&st(e.params.frameworks)&&(n.banner_frameworks=e.params.frameworks),A(e,"mediaTypes.".concat(Vo))&&n.ad_types.push(Vo),0===n.ad_types.length&&delete n.ad_types,n}function fc(e){var t=[],n={};if(st(e)&&2===e.length&&!st(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===a(e))for(var r=0;r<e.length;r++){var i=e[r];(n={}).width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}function gc(e){return!!e.params.user}function mc(e){return!!parseInt(e.params.member,10)}function vc(e){if(e.params)return!!e.params.app}function yc(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function bc(e){return!!e.debug}function _c(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===zo}function wc(e){var t=!1,n=e.params,r=e.params.video;return n.frameworks&&st(n.frameworks)&&(t=f(e.params.frameworks,6)),!t&&r&&r.frameworks&&st(r.frameworks)&&(t=f(e.params.video.frameworks,6)),t}function Sc(e,t,n){ut(e.video)&&(e.video={}),e.video[t]=n}function Tc(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Ic.bind(null,e))}))}function Ic(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}Zr(pc),p("appnexusBidAdapter");var kc,Ac=["request","imp","bidResponse","response"],Ec=["default","pbs"],Cc=Ac[0],xc=Ac[1],Oc=Ac[2],Pc=Ac[3],Dc=Ec[0],Rc=Ec[1],jc=new Set(Ac),Mc=(kc={},{registerOrtbProcessor:function(e){var t=e.type,n=e.name,r=e.fn,i=e.priority,o=void 0===i?0:i,a=e.dialects,s=void 0===a?[Dc]:a;if(!jc.has(t))throw new Error("ORTB processor type must be one of: ".concat(Ac.join(", ")));s.forEach((function(e){kc.hasOwnProperty(e)||(kc[e]={}),kc[e].hasOwnProperty(t)||(kc[e][t]={}),kc[e][t][n]={priority:o,fn:r}}))},getProcessors:function(e){return kc[e]||{}}}),Nc=Mc.registerOrtbProcessor,Uc=Mc.getProcessors;function Lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lc(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qc(e){var t=e.apiName,n=e.apiVersion,r=e.apiArgs,i=void 0===r?["command","callback","parameter","version"]:r,a=e.callbackArgs,s=void 0===a?["returnValue","success"]:a,l=e.mode,c=void 0===l?0:l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,p={},f="".concat(t,"Call"),g="".concat(t,"Return");function m(e){var t,n="string"==typeof e.data&&e.data.includes(g)?JSON.parse(e.data):e.data;if(null!=n&&null!==(t=n[g])&&void 0!==t&&t.callId){var r=n[g];p.hasOwnProperty(r.callId)&&p[r.callId].apply(p,h(s.map((function(e){return r[e]}))))}}var v,y=function(){for(var e,n=u,r=!1;null!=n;){try{if("function"==typeof n[t]){e=n,r=!0;break}}catch(e){}try{if(n.frames["".concat(t,"Locator")]){e=n;break}}catch(e){}if(n===u.top)break;n=n.parent}return[e,r]}(),b=o(y,2),_=b[0],w=b[1];if(_)return w?v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new he((function(n,r){var i=_[t].apply(_,h(S(Bc(Bc({},e),{},{callback:e.callback||2===c?T(e.callback,n,r):void 0})).map((function(e){var t=o(e,2);return t[0],t[1]}))));(1===c||null==e.callback&&0===c)&&n(i)}))}:(u.addEventListener("message",m,!1),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new he((function(n,r){var i=Math.random().toString(),a=d({},f,Bc(Bc({},Object.fromEntries(S(e).filter((function(e){return"callback"!==o(e,1)[0]})))),{},{callId:i}));p[i]=T(null==e?void 0:e.callback,n,r,(t||null==(null==e?void 0:e.callback))&&function(){delete p[i]}),_.postMessage(a,"*"),1===c&&n()}))}),Object.assign(v,{isDirect:w,close:function(){!w&&u.removeEventListener("message",m)}});function S(e){return e=Object.assign({version:n},e),i.map((function(t){return[t,e[t]]}))}function T(e,t,n,r){var i="function"==typeof e;return function(o,a){r&&r(),1!==c&&(null==a||a?t:n)(i?void 0:o),i&&e.apply(this,arguments)}}}var Fc,Vc,zc,$c,Wc,Hc,Gc=2,Xc=!1,Jc=!1,Kc={iab:function(e){var t=e.onSuccess,n=e.onError,r=e.onEvent,i=qc({apiName:"__tcfapi",apiVersion:Gc,apiArgs:["command","version","callback","parameter"]});if(!i)return n("TCF2 CMP not found.");i.isDirect?Xe("Detected CMP API is directly accessible, calling it now..."):Xe("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),i({command:"addEventListener",callback:function(e,i){Xe("Received a response from CMP",e),i?(r(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||Zc(e,{onSuccess:t,onError:n})):n("CMP unable to register callback function.  Please check CMP setup.")}})},static:function(e){var t=e.onSuccess,n=e.onError;Zc($c,{onSuccess:t,onError:n})}};function Yc(e){var t,n,r=!1,i=null,o=!1;function a(e){null!=i&&clearTimeout(i),r||null==e||(0===e?t():i=setTimeout(t,e))}function s(t,n,i){if(a(null),r=!0,Vi.setConsentData(t),"function"==typeof e){for(var o=arguments.length,s=new Array(o>3?o-3:0),d=3;d<o;d++)s[d-3]=arguments[d];e.apply(void 0,[n,i].concat(s))}}if(f(Object.keys(Kc),Fc)){var d={onSuccess:function(e){return s(e,!1)},onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.apply(void 0,[null,!0,e].concat(n))},onEvent:function(e){n=e,o||(o=!0,null!=Wc&&a(Wc))}};t=function(){var e=function(e){s(e,!1,"".concat(o?"Timeout waiting for user action on CMP":"CMP did not load",", continuing auction..."))};Zc(n,{onSuccess:e,onError:function(){return e(eu(void 0))}})},Kc[Fc](d),null!=Wc&&o||a(Vc)}else s(null,!1,"CMP framework (".concat(Fc,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}var Qc=function(e,t,n){return Xr("gdpr",(function(e,t){var r;r=function(n,r){if(r){var i=Je;n&&(i=Ke,r="".concat(r," Canceling auction as per consentManagement config."));for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];i.apply(void 0,[r].concat(a))}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():Ke("Error executing bidsBackHandler")):e.call(this,t)},Hc?(Xe("User consent information already known.  Pulling internally stored information..."),r(!1)):n(r)}))}(0,0,Yc);function Zc(e,t){var n=t.onSuccess,r=t.onError;!function(){var t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:zc,n=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||n&&at(n)))}()?n(eu(e)):r("CMP returned unexpected value during lookup process.",e)}function eu(e){return Hc={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:zc},e&&e.addtlConsent&&at(e.addtlConsent)&&(Hc.addtlConsent=e.addtlConsent),Hc.apiVersion=Gc,Hc}Z.getConfig("consentManagement",(function(e){return function(e){var t;(e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"===a(e)?(at(e.cmpApi)?Fc=e.cmpApi:(Fc="iab",Xe("consentManagement config did not specify cmp.  Using system default setting (".concat("iab",")."))),dt(e.timeout)?Vc=e.timeout:(Vc=1e4,Xe("consentManagement config did not specify timeout.  Using system default setting (".concat(1e4,")."))),Wc=dt(e.actionTimeout)?e.actionTimeout:null,zc=!0===e.defaultGdprScope,Xc=!!e.dsaPlatform,Xe("consentManagement module has been activated..."),"static"===Fc&&(lt(e.consentData)?(null!=(null===(t=$c=e.consentData)||void 0===t?void 0:t.getTCData)&&($c=$c.getTCData),Vc=0):Ke("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Jc||u().requestBids.before(Qc,50),Jc=!0,Vi.enable(),Yc()):Je("consentManagement (gdpr) config not defined, exiting consent manager")}(e.consentManagement)})),nd.before((function(e,t){return e(t.then((function(e){var t=Vi.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&Zt(e,"regs.ext.gdpr",t.gdprApplies?1:0),Zt(e,"user.ext.consent",t.consentString)),Xc&&Zt(e,"regs.ext.dsa.dsarequired",3),e})))})),Nc({type:Cc,name:"gdprAddtlConsent",fn:function(e,t){var n,r=null===(n=t.gdprConsent)||void 0===n?void 0:n.addtlConsent;r&&"string"==typeof r&&Zt(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}}),p("consentManagementTcf");var tu,nu,ru="iab",iu=ru,ou=50,au=!1,su={iab:function(e){var t,n=e.onSuccess,r=e.onError,i=(t={},{consentDataCallback:function(e,i){i&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?cu(t,{onSuccess:n,onError:r}):r("Unable to get USP consent string.")}}),o=qc({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});if(!o)return r("USP CMP not found.");o.isDirect?Xe("Detected USP CMP is directly accessible, calling it now..."):Xe("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),o({command:"getUSPData",callback:i.consentDataCallback}),o({command:"registerDeletion",callback:function(e,t){return(null==t||t)&&Co.callDataDeletionRequest(e)}}).catch((function(e){Ke("Error invoking CMP `registerDeletion`:",e)}))},static:function(e){var t=e.onSuccess,n=e.onError;cu(tu,{onSuccess:t,onError:n})}};function du(e){var t=null,n=!1;function r(r,i){if(null!=t&&clearTimeout(t),n=!0,zi.setConsentData(r),null!=e){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e.apply(void 0,[i].concat(a))}}if(su[iu]){var i={onSuccess:r,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(n))}};su[iu](i),n||(0===ou?cu(void 0,i):t=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),ou))}else r(null,"USP framework (".concat(iu,") is not a supported framework. Aborting consentManagement module and resuming auction."))}var lu=Xr("usp",(function(e,t){var n=this;au||uu(),du((function(r){if(null!=r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];Je.apply(void 0,[r].concat(o))}e.call(n,t)}))}));function cu(e,t){var n=t.onSuccess,r=t.onError;e&&e.usPrivacy?(function(e){e&&e.usPrivacy&&(nu=e.usPrivacy)}(e),n(nu)):r("USPAPI returned unexpected value during lookup process.",e)}function uu(){au||(Xe("USPAPI consentManagement module has been activated".concat(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"":" using default values (api: '".concat(iu,"', timeout: ").concat(ou,"ms)"))),au=!0,zi.enable()),du()}Z.getConfig("consentManagement",(function(e){return function(e){(e=e&&e.usp)&&"object"===a(e)||Je("consentManagement.usp config not defined, using defaults"),e&&at(e.cmpApi)?iu=e.cmpApi:(iu=ru,Xe("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(ru,")."))),e&&dt(e.timeout)?ou=e.timeout:(ou=50,Xe("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===iu&&(lt(e.consentData)&&lt(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(tu={usPrivacy:e.consentData.getUSPData.uspString}),ou=0):Ke("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),uu(!0)}(e.consentManagement)})),Nn("requestBids").before(lu,50),nd.before((function(e,t){return e(t.then((function(e){var t=zi.getConsentData();return t&&Zt(e,"regs.ext.us_privacy",t),e})))})),p("consentManagementUsp");var pu,hu=new WeakMap,fu={1:Vo,2:Fo,4:qo},gu=(d(pu={},Cc,{fpd:{priority:99,fn:function(e,t){Xt(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:Ys("ORTB request")},props:{fn:function(e,t){Object.assign(e,{id:e.id||Ne(),test:e.test||0});var n=parseInt(t.timeout,10);isNaN(n)||(e.tmax=n)}}}),d(pu,xc,{fpd:{priority:99,fn:function(e,t){Xt(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:function(e,t,n){if(!n.mediaType||n.mediaType===Vo){var r=A(t,"mediaTypes.banner");if(r){var i={topframe:!0===xt()?0:1};r.sizes&&(i.format=Le(r.sizes).map(Fe)),r.hasOwnProperty("pos")&&(i.pos=r.pos),e.banner=Xt(i,e.banner)}}}},pbadslot:{fn:function(e){var t,n,r,i,o=null===(t=e.ext)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.pbadslot;o&&"string"==typeof o||null===(r=e.ext)||void 0===r||null===(i=r.data)||void 0===i||delete i.pbadslot}}}),d(pu,Oc,{mediaType:{priority:99,fn:function(e,t,n){if(!e.mediaType){var r=n.mediaType;if(!r&&!fu.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||fu[t.mtype]}}},banner:{fn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,t=void 0===e?function(e){return bt(decodeURIComponent(e),_t)}:e;return function(e,n){e.mediaType===Vo&&(n.adm&&n.nurl?(e.ad=n.adm,e.ad+=t(n.nurl)):n.adm?e.ad=n.adm:n.nurl&&(e.adUrl=n.nurl))}}()},props:{fn:function(e,t,n){var r,i;Object.entries({requestId:null===(r=n.bidRequest)||void 0===r?void 0:r.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((function(e){var t=o(e,2);return t[0],void 0!==t[1]})).forEach((function(t){var n=o(t,2),r=n[0],i=n[1];return e[r]=i})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),null!==(i=t.ext)&&void 0!==i&&i.dsa&&(e.meta.dsa=t.ext.dsa)}}}),pu);function mu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=t.length>1?mu.apply(void 0,t):t[0];return Object.fromEntries(Ac.map((function(e){return[e,Object.assign({},r[e],i[e])]})))}function vu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,r=e.processors,i=void 0===r?yu:r,a=e.overrides,s=void 0===a?{}:a,d=e.imp,l=e.request,c=e.bidResponse,u=e.response,p=new WeakMap;function h(e,t,n,r){var a;return function(){return null==a&&(a=function(){var a=n.bind(this,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!hu.has(e)){var n=Object.entries(e);n.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),hu.set(e,n.map((function(e){var t=o(e,2);return[t[0],t[1].fn]})))}var r=hu.get(e).filter((function(e){var n=o(e,1)[0];return!t.hasOwnProperty(n)||t[n]})).map((function(e){var n=o(e,2),r=n[0],i=n[1];return t.hasOwnProperty(r)?t[r].bind(this,i):i}));return function(){var e=this,t=Array.from(arguments);r.forEach((function(n){n.apply(e,t)}))}}(i()[e]||{},s[e]||{}));return t&&(a=t.bind(this,a)),function(){try{return a.apply(this,arguments)}catch(e){r.call.apply(r,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),a.apply(this,arguments)}}var f=h(xc,d,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){Ke("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),g=h(Cc,l,(function(e,t,n,r){var i={imp:t};return e(i,n,r),i}),(function(e,t,n,r){throw Ke("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:r}),e})),m=h(Oc,c,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){Ke("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),v=h(Pc,u,(function(e,t,n,r){var i={bids:t};return e(i,n,r),i}),(function(e,t,n,r){throw Ke("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:r}),e}));return{toORTB:function(e){var t=e.bidderRequest,r=e.bidRequests,i=e.context,o=void 0===i?{}:i;r=r||t.bids;var a={req:Object.assign({bidRequests:r},n,o),imp:{}};a.req.impContext=a.imp;var s=r.map((function(e){var r=Object.assign({bidderRequest:t,reqContext:a.req},n,o),i=f(e,r);if(null!=i){if(i.hasOwnProperty("id"))return Object.assign(r,{bidRequest:e,imp:i}),a.imp[i.id]=r,i;Ke("Converted ORTB imp does not specify an id, ignoring bid request",e,i)}})).filter(Boolean),d=g(s,t,a.req);return a.req.bidderRequest=t,null!=d&&p.set(d,a),d},fromORTB:function(e){var t=e.request,n=e.response,r=p.get(t);if(null==r)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},n)}var o=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),a=(n.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(o.hasOwnProperty(t.impid)&&r.imp.hasOwnProperty(t.impid))return m(t,i(r.imp[t.impid],{imp:o[t.impid],seatbid:e,ortbResponse:n}));Ke("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return v(a,n,i(r.req))}}}gu[xc].native={fn:function(e,t,n){if(!n.mediaType||n.mediaType===qo){var r,i=t.nativeOrtbRequest;i&&(null!==(r=(i=Object.assign({},n.nativeRequest,i)).assets)&&void 0!==r&&r.length?e.native=Xt({},{request:JSON.stringify(i),ver:i.ver},e.native):Je("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}}},gu[Oc].native={fn:function(e,t){if(e.mediaType===qo){var n;if(!lt(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},gu[xc].video={fn:function(e,t,n){if(!n.mediaType||n.mediaType===Fo){var r=A(t,"mediaTypes.video");if(!ut(r)){var i=Object.fromEntries(Object.entries(r).filter((function(e){var t=o(e,1)[0];return hr.has(t)})));if(r.playerSize){var a=Le(r.playerSize).map(Fe);a.length>1&&Je("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(i,a[0])}e.video=Xt(i,e.video)}}}},gu[Oc].video={fn:function(e,t,n){if(e.mediaType===Fo){if(A(n.imp,"video.w")&&A(n.imp,"video.h")){var r=[n.imp.video.w,n.imp.video.h];e.playerWidth=r[0],e.playerHeight=r[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}}};var yu=Yt((function(){return mu(gu,Uc(Dc))})),bu=Object.freeze([].concat(h(["device.sua","source.schain","regs.gdpr","regs.us_privacy","regs.gpp","regs.gpp_sid","user.consent","user.eids"].map((function(e){return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return"".concat(e,".ext.").concat(t)},r=o([(t=e.split(".")).slice(0,t.length-1).join("."),t[t.length-1]],2),i=r[0],a=r[1];return n=n(i,a),function(e){var t=A(e,i);if(null!=(null==t?void 0:t[a]))return Zt(e,n,t[a]),function(){return delete t[a]}}}(e)}))),h(["app","content","site","user"].map((function(e){return function(t){var n,r=null===(n=t[e])||void 0===n?void 0:n.kwarray;if(null!=r){var i=(t[e].keywords||"").split(",");return Array.isArray(r)&&i.push.apply(i,h(r)),t[e].keywords=i.join(","),function(){return delete t[e].kwarray}}}})))));function _u(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu;return function(n){return t.forEach((function(t){try{var r=t(n);"function"==typeof r&&e&&r()}catch(e){Ke("Error translating request to ORTB 2.5",e)}})),n}}function wu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Su(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Su(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Su(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tu(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_u();var ku="criteo",Au=Mo({bidderCode:ku}),Eu="Criteo: ",Cu=_u(),xu="cto_optout",Ou="cto_bundle",Pu=vu({context:{netRevenue:!0,ttl:60},imp:function(e,t,n){var r,i=e(t,n),o=t.params;if(i.tagid=t.adUnitCode,Zt(i,"ext",Iu(Iu(Iu({},t.params.ext),i.ext),{},{rwdd:i.rwdd,floors:Bu(t),bidder:{publishersubid:null==o?void 0:o.publisherSubId,zoneid:null==o?void 0:o.zoneId,uid:null==o?void 0:o.uid}})),delete i.rwdd,!n.fledgeEnabled&&null!==(r=i.ext.igs)&&void 0!==r&&r.ae&&delete i.ext.igs.ae,Lu(t)){var a=t.params.video;void 0!==a&&Zt(i,"video",Iu(Iu({},i.video),{},{skip:i.video.skip||a.skip||0,placement:i.video.placement||a.placement,minduration:i.video.minduration||a.minduration,playbackmethod:i.video.playbackmethod||a.playbackmethod,startdelay:i.video.startdelay||a.startdelay||0})),Zt(i,"video.ext",{context:t.mediaTypes.video.context,playersizes:Nu(A(t,"mediaTypes.video.playerSize"),Uu),plcmt:t.mediaTypes.video.plcmt,poddur:t.mediaTypes.video.adPodDurationSec,rqddurs:t.mediaTypes.video.durationRangeSec})}if(i.native&&void 0!==i.native.request){var s=JSON.parse(i.native.request);s.assets&&(1!==s.assets.length||Object.keys(s.assets[0]).length)||delete s.assets,Zt(i,"native.request_native",s),delete i.native.request}return i},request:function(e,t,n,r){var i=e(t,n,r);return void 0!==r.publisherId&&(void 0!==i.app?Zt(i,"app.publisher.id",r.publisherId):Zt(i,"site.publisher.id",r.publisherId)),n&&n.gdprConsent&&Zt(i,"regs.ext.gdprversion",n.gdprConsent.apiVersion),i=Cu(i)},bidResponse:function(e,t,n){n.mediaType=A(t,"ext.mediatype"),n.mediaType===qo&&void 0!==t.adm_native&&(t.adm=t.adm_native,delete t.adm_native);var r,i=e(t,n),o=n.bidRequest;(i.currency=A(t,"ext.cur"),void 0!==A(t,"ext.meta")&&Zt(i,"meta",Iu(Iu({},i.meta),t.ext.meta)),void 0!==A(t,"ext.paf.content_id")&&Zt(i,"meta.paf.content_id",t.ext.paf.content_id),i.mediaType===Fo)&&(i.vastUrl=null===(r=t.ext)||void 0===r?void 0:r.displayurl,A(o,"mediaTypes.video.context")===ur&&(i.renderer=function(e){var t,n;if(void 0!==(null===(t=e.ext)||void 0===t?void 0:t.videoPlayerConfig)&&void 0!==(null===(n=e.ext)||void 0===n?void 0:n.videoPlayerType)){var r=_n.install({url:"https://static.criteo.net/js/ld/publishertag.renderer.js",config:{documentResolver:function(e,t,n){return null!=n?n:t}}});return r.setRender((function(t,n){var r,i={slotid:e.id,vastUrl:null===(r=e.ext)||void 0===r?void 0:r.displayurl,vastXml:e.adm,documentContext:n},o=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(i,o)})),r}}(t)));return i},response:function(e,t,n,r){var i=e(t,n,r),o=A(n,"ext.paf.transmission");return i.bids.forEach((function(e){void 0!==o&&void 0!==A(e,"meta.paf.content_id")?Zt(e,"meta.paf.transmission",o):delete e.meta.paf})),i}}),Du={code:ku,gvlid:91,supportedMediaTypes:[Vo,Fo,qo],getUserSyncs:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.gppString,a=void 0===o?"":o,s=i.applicableSections,d=void 0===s?[]:s,l=mi(),c="criteoPrebidAdapter";if(e.iframeEnabled&&Bl(n)){var u=[];if(u.push("origin=".concat(c)),u.push("topUrl=".concat(l.domain)),n&&(n.gdprApplies&&u.push("gdpr=".concat(1==n.gdprApplies?1:0)),n.consentString&&u.push("gdpr_consent=".concat(n.consentString))),r&&u.push("us_privacy=".concat(r)),u.push("gpp=".concat(a)),Array.isArray(d)){var p,h=wu(d);try{for(h.s();!(p=h.n()).done;){var f=p.value;u.push("gpp_sid=".concat(f))}}catch(e){h.e(e)}finally{h.f()}}var g=Math.random().toString(),m={bundle:Ru(Ou),cw:Au.cookiesAreEnabled(),lsw:Au.localStorageIsEnabled(),optoutCookie:Ru(xu),origin:c,requestId:g,tld:l.domain,topUrl:l.domain,version:"9.10.0".replace(/\./g,"_")};window.addEventListener("message",(function e(t){if(t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===g){this.removeEventListener("message",e),t.stopImmediatePropagation();var n=t.data;n.optout?(Mu(Ou),ju(xu,!0,43200)):n.bundle&&ju(Ou,n.bundle,9360)}}),!0);var v=JSON.stringify(m).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(u.join("&"),"#").concat(v)}]}if(e.pixelEnabled&&Bl(n)){var y=[];if(y.push("profile=207"),n&&(!0===n.gdprApplies&&y.push("gdprapplies=true"),n.consentString&&y.push("gdpr=".concat(n.consentString))),r&&y.push("ccpa=".concat(r)),y.push("gpp=".concat(a)),Array.isArray(d)){var b,_=wu(d);try{for(_.s();!(b=_.n()).done;){var w=b.value;y.push("gpp_sid=".concat(w))}}catch(e){_.e(e)}finally{_.f()}}return[{type:"image",url:"https://ssp-sync.criteo.com/user-sync/redirect?".concat(y.join("&"))}]}return[]},isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||Lu(e)&&!function(e){var t=!0;return["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){"placement"===n?void 0===A(e,"mediaTypes.video."+n)&&void 0===A(e,"params.video."+n)&&void 0===A(e,"mediaTypes.video.plcmt")&&void 0===A(e,"params.video.plcmt")&&(t=!1,Ke("Criteo Bid Adapter: mediaTypes.video."+n+" or mediaTypes.video.plcmt is required")):void 0===A(e,"mediaTypes.video."+n)&&void 0===A(e,"params.video."+n)&&(t=!1,Ke("Criteo Bid Adapter: mediaTypes.video."+n+" is required"))})),t}(e))},buildRequests:function(e,t){e.forEach((function(e){(function(e){return void 0!==A(e,"mediaTypes.native")})(e)&&(function(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}(e)||Je(Eu+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),null==A(e,"nativeOrtbRequest.assets")&&(Je(Eu+"native asset requirements are missing"),Zt(e,"nativeOrtbRequest.assets",[{}])))}));var n=function(e,t){var n,r,i,o,a,s=Wt(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search;return{url:(null==t||null===(r=t.refererInfo)||void 0===r?void 0:r.page)||"",debug:"1"===s.pbt_debug,noLog:"1"===s.pbt_nolog,fledgeEnabled:null===(i=t.paapi)||void 0===i?void 0:i.enabled,amp:e.some((function(e){return"amp"===e.params.integrationMode})),networkId:null===(o=e.find((function(e){var t;return null===(t=e.params)||void 0===t?void 0:t.networkId})))||void 0===o?void 0:o.params.networkId,publisherId:null===(a=e.find((function(e){var t;return null===(t=e.params)||void 0===t?void 0:t.pubid})))||void 0===a?void 0:a.params.pubid}}(e,t),r=function(e){var t="https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request";t+="?profileId=207",t+="&av="+String(37),t+="&wv="+encodeURIComponent("9.10.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),Au.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var n=Ru(Ou);return n&&(t+="&bundle=".concat(n)),Ru(xu)&&(t+="&optout=1"),e.networkId&&(t+="&networkId="+e.networkId),t}(n),i=Pu.toORTB({bidderRequest:t,bidRequests:e,context:n});if(i)return{method:"POST",url:r,data:i,bidRequests:e}},interpretResponse:function(e,t){var n;if(void 0===(null==e?void 0:e.body))return[];var r=Pu.fromORTB({response:e.body,request:t.data}).bids||[],i=null===(n=A(e.body,"ext.igi"))||void 0===n?void 0:n.filter((function(e){return st(null==e?void 0:e.igs)})).flatMap((function(e){return e.igs}));return null!=i&&i.length?{bids:r,paapi:i}:r},onDataDeletionRequest:function(e){var t=Ru(Ou);t&&(Mu(Ou),sn("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function Ru(e){var t=Au.getCookie(e),n=Au.getDataFromLocalStorage(e);return t||n||void 0}function ju(e,t,n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3);var i="expires=".concat(r.toUTCString());Au.setCookie(e,t,i),Au.setDataInLocalStorage(e,t)}function Mu(e){Au.setCookie(e,"",0),Au.removeDataFromLocalStorage(e)}function Nu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return null==e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function Uu(e){return e[0]+"x"+e[1]}function Lu(e){return void 0!==A(e,"mediaTypes.video")}function Bu(e){try{var t,n,r,i={},o=function(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}(e);if(o)return null!==(t=e.mediaTypes)&&void 0!==t&&t.banner&&(i.banner={},Nu(A(e,"mediaTypes.banner.sizes")).forEach((function(t){return i.banner[Uu(t).toString()]=o.call(e,{size:t,mediaType:Vo})}))),null!==(n=e.mediaTypes)&&void 0!==n&&n.video&&(i.video={},Nu(A(e,"mediaTypes.video.playerSize")).forEach((function(t){return i.video[Uu(t).toString()]=o.call(e,{size:t,mediaType:Fo})}))),null!==(r=e.mediaTypes)&&void 0!==r&&r.native&&(i.native={},i.native["*"]=o.call(e,{size:"*",mediaType:qo})),i}catch(e){Ke("Could not parse floors from Prebid: "+e)}}Zr(Du),p("criteoBidAdapter");var qu,Fu,Vu=4,zu=[],$u={},Wu=!1,Hu=!0,Gu="USD",Xu=!1,Ju={},Ku={},Yu=ge();function Qu(e){Fu?(Je(e),Je("Currency failed loading rates, falling back to currency.defaultRates")):Ke(e)}function Zu(){Hu?(Hu=!1,Wu=!1,sn(qu,{success:function(e){try{Ju=JSON.parse(e),Xe("currencyRates set to "+JSON.stringify(Ju)),$u={},Wu=!0,rp()}catch(t){Qu("Failed to parse currencyRates response: "+e)}},error:function(){Qu.apply(void 0,arguments),Wu=!0,rp(),Hu=!0}})):rp()}function ep(e,t){e(t.then((function(){return Yu.promise})))}Z.getConfig("currency",(function(e){return function(e){if(qu="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$","object"===a(e.rates)&&(Ju.conversions=e.rates,Wu=!0,Hu=!1),"object"===a(e.defaultRates)&&(Fu=e.defaultRates,Ju.conversions=Fu,Wu=!0),"string"==typeof e.adServerCurrency){Xe("enabling currency support",arguments),Gu=e.adServerCurrency,e.conversionRateFile&&(Xe("currency using override conversionRateFile:",e.conversionRateFile),qu=e.conversionRateFile);var t=qu.indexOf("$$TODAY$$");if(-1!==t){var n=new Date,r="".concat(n.getMonth()+1),i="".concat(n.getDate());r.length<2&&(r="0".concat(r)),i.length<2&&(i="0".concat(i));var o="".concat(n.getFullYear()).concat(r).concat(i);qu="".concat(qu.substring(0,t)).concat(o).concat(qu.substring(t+9,qu.length))}$u={},Xu||(Xu=!0,u().convertCurrency=function(e,t,n){return parseFloat(e)*ip(t,n)},Nn("addBidResponse").before(tp,100),Nn("responsesReady").before(ep),Or(x.AUCTION_TIMEOUT,np),Or(x.AUCTION_INIT,Zu),Zu())}else Xe("disabling currency support"),Xu&&(Nn("addBidResponse").getHooks({hook:tp}).remove(),Nn("responsesReady").getHooks({hook:ep}).remove(),Pr(x.AUCTION_TIMEOUT,np),Pr(x.AUCTION_INIT,Zu),delete u().convertCurrency,Gu="USD",$u={},Xu=!1,Wu=!1,Hu=!0,Ju={},Ku={},Yu=ge());"object"===a(e.bidderCurrencyDefault)&&(Ku=e.bidderCurrencyDefault)}(e.currency)}));var tp=Jr("currency",(function(e,t,n,r){if(!n)return e.call(this,t,n,r);var i=n.bidderCode||n.bidder;if(Ku[i]){var o=Ku[i];n.currency&&o!==n.currency?Je("Currency default '".concat(i,": ").concat(o,"' ignored. adapter specified '").concat(n.currency,"'")):n.currency=o}if(n.currency||(Je('Currency not specified on bid.  Defaulted to "USD"'),n.currency="USD"),n.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*ip(this.currency,e)).toFixed(3)},n.currency===Gu)return e.call(this,t,n,r);zu.push([e,this,t,n,r]),Xu&&!Wu||rp()}));function np(e){var t=e.auctionId;zu=zu.filter((function(e){var n=o(e,5),r=(n[0],n[1],n[2],n[3]),i=n[4];if(r.auctionId!==t)return!0;i(N.CANNOT_CONVERT_CURRENCY)}))}function rp(){for(;zu.length>0;){var e=o(zu.shift(),5),t=e[0],n=e[1],r=e[2],i=e[3],a=e[4];if(void 0!==i&&"currency"in i&&"cpm"in i){var s=i.currency;try{var d=ip(s);1!==d&&(i.cpm=(parseFloat(i.cpm)*d).toFixed(4),i.currency=Gu)}catch(e){Je("getCurrencyConversion threw error: ",e),a(N.CANNOT_CONVERT_CURRENCY);continue}}t.call(n,r,i,a)}Yu.resolve()}function ip(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gu,r=null,i="".concat(e,"->").concat(n);if(i in $u)Ge("Using conversionCache value "+(r=$u[i])+" for "+i);else if(!1===Xu){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");r=1}else if(e===n)r=1;else if(e in Ju.conversions){if(!(n in(t=Ju.conversions[e])))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");Xe("getCurrencyConversion using direct "+e+" to "+n+" conversionRate "+(r=t[n]))}else if(n in Ju.conversions){if(!(e in(t=Ju.conversions[n])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");Xe("getCurrencyConversion using reciprocal "+e+" to "+n+" conversionRate "+(r=op(1/t[e],Vu)))}else{var o=Object.keys(Ju.conversions)[0];if(!(e in Ju.conversions[o]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var a=1/Ju.conversions[o][e];if(!(n in Ju.conversions[o]))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");Xe("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+n+" conversionRate "+(r=op(a*Ju.conversions[o][n],Vu)))}return i in $u||(Ge("Adding conversionCache value "+r+" for "+i),$u[i]=r),r}function op(e,t){for(var n=1,r=0;r<t;r++)n+="0";return Math.round(e*n)/n}Nc({type:Cc,name:"currency",fn:function(e,t,n){Xu&&(e.cur=e.cur||[n.currency||Gu])}}),p("currency");var ap,sp="paapiForGpt";Z.getConfig("paapi",(function(e){A(e,"paapi.gpt.configWithTargeting",!0)?(Xe(sp,"enabling PAAPI configuration with setTargetingForGPTAsync"),Us.setTargetingForGPT.before(pp)):Us.setTargetingForGPT.getHooks({hook:pp}).remove()}));var dp,lp,cp=(dp={},function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.length>0){var i,a=null!==(i=dp[e])&&void 0!==i?i:{},s=Object.fromEntries(n.map((function(e){return[e.seller,e]}))),d=Object.keys(s);r?(s=Object.assign(a,s),a=Object.fromEntries(d.map((function(e){return[e,null]})))):d.forEach((function(e){a[e]=null})),Object.keys(a).length?dp[e]=a:delete dp[e];var l=Object.entries(s).map((function(e){var t=o(e,2);return{configKey:t[0],auctionConfig:t[1]}}));l.length>0&&t.forEach((function(t){t.setConfig({componentAuction:l}),Xe(sp,"register component auction configs for: ".concat(e,": ").concat(t.getAdUnitPath()),n)}))}else n.length>0&&Je(sp,"unable to register component auction config for ".concat(e),n)}),up=(lp=[[728,90],[336,280],[300,250],[300,50],[160,600],[1024,768],[970,250],[970,90],[768,1024],[480,320],[468,60],[320,480],[320,100],[320,50],[300,600],[300,100],[250,250],[234,60],[200,200],[180,150],[125,125],[120,600],[120,240],[120,60],[88,31],[980,120],[980,90],[950,90],[930,180],[750,300],[750,200],[750,100],[580,400],[250,360],[240,400]].sort(ys((function(e){var t=o(e,2);return-t[0]*t[1]}))).map((function(e){return[e,qe(e)]})),function(e,t){if(null!=t&&t.length){var n=new Set(t.map(qe)),r=lp.find((function(e){var t=o(e,2),r=(t[0],t[1]);return n.has(r)}));if(r)return void e.bail(r[0])}e(t)});u().setPAAPIConfigForGPT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return ap(e,!0)},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ns;return function(){var r=arguments.length>1?arguments[1]:void 0,i=!1,a=e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})||{},s=n(Object.keys(a),r);Object.entries(a).forEach((function(e){var n=o(e,2),r=n[0],a=n[1];null!=a&&(i=!0),t(r,s[r],(null==a?void 0:a.componentAuctions)||[],!0)})),i||Xe("".concat(sp,": No component auctions available to set"))}}();var pp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u().setPAAPIConfigForGPT;return function(t,n,r){(Array.isArray(n)?n:[n]).map((function(e){return null==e?void 0:{adUnitCode:e}})).forEach((function(t){return e(t,r)})),t(n,r)}}();function hp(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}Bn("paapi",{name:"gpt",init:function(e){ap=e.getPAAPIConfig,Nn("getPAAPISize").before(up)}}),p("paapiForGpt");var fp=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function gp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vp="grid",yp="https://grid.bidswitch.net/hbjson",bp="tmguid",_p=Mo({bidderCode:vp}),wp={noAdid:"Bid from response has no adid parameter - ",noAdm:"Bid from response has no adm parameter - ",noBid:"Array of bid objects is empty",emptyUids:"Uids should be not empty",emptySeatbid:"Seatbid array from response has empty item",emptyResponse:"Response is empty",hasEmptySeatbidArray:"Response has empty seatbid array",hasNoArrayOfBids:"Seatbid from response has no array of bid objects - "},Sp={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},Tp=!1,Ip={code:vp,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[Vo,Fo],isBidRequestValid:function(e){return e&&Boolean(e.params.uid||e.params.secid)},buildRequests:function(e,t){var n,r,i,s;if(!e.length)return null;var d=null,l=null,c=null,u=null,p=null,f=null,g=null,m=!1,v=t||{},y=v.bidderRequestId,b=v.gdprConsent,_=v.uspConsent,w=v.timeout,S=v.refererInfo,T=v.gppConsent,I=S?encodeURIComponent(S.page):"",k=parseInt(w)||null,E=[],C={},x=[],O=[],P=[];e.forEach((function(e){var n={bid:e,savedPrebidBid:null};if(e.params.uid||e.params.secid){y||(y=e.bidderRequestId),c||(c=e.schain),u||(u=e.userIdAsEids),g||(g=Sp[e.bidder]&&Sp[e.bidder].endpoint);var r=e.params,i=e.mediaTypes,s=e.bidId,p=e.adUnitCode,h=e.rtd,f=e.ortb2Imp,v=mp(mp({},(Sp[e.bidder]||{}).defaultParams),r),b=v.secid,_=v.pubid,w=v.source,S=v.uid,T=v.keywords,A=v.forceBidder,D=v.multiRequest,R=v.content,j=v.video,M=function(e,t){var n=e.video?"video":"banner",r=parseFloat(t.params.bidFloor||t.params.floorcpm||0)||null;if("function"==typeof t.getFloor){var i=t.getFloor({currency:"USD",mediaType:n,size:t.sizes.map((function(e){var t=o(e,2);return{w:t[0],h:t[1]}}))});"object"!==a(i)||"USD"!==i.currency||isNaN(parseFloat(i.floor))||(r=Math.max(r,parseFloat(i.floor)))}return r}(i||{},e),N=h&&h.jwplayer&&h.jwplayer.targeting;N&&!l&&N.content&&(l=N.content);var U,L,B,q,F,V,z={id:s.toString(),tagid:(b||S).toString(),ext:{divid:p.toString()}};if(f&&(f.instl&&(z.instl=parseInt(f.instl)||null),f.ext&&(z.ext.gpid=(null===(U=f.ext.gpid)||void 0===U?void 0:U.toString())||(null===(L=f.ext.data)||void 0===L||null===(B=L.pbadslot)||void 0===B?void 0:B.toString())||(null===(q=f.ext.data)||void 0===q||null===(F=q.adserver)||void 0===F||null===(V=F.adslot)||void 0===V?void 0:V.toString()),f.ext.data&&(z.ext.data=f.ext.data))),ut(T)||(d||(d=T),z.ext.bidder={keywords:T}),M&&(z.bidfloor=M),!i||i[Vo]){var $=function(e,t){var n=t.sizes||e.sizes;if(n&&n.length){var r=n.map((function(e){return Ve(e)})),i=Ve(n[0]);return r.length&&(i.format=r),i}}(e,i?i[Vo]:{});$&&(z.banner=$)}if(i&&i[Fo]){var W=function(e,t,n){var r=mp(mp({},t),e),i=r.mind,o=r.maxd,a=r.size,s=r.playerSize,d=r.protocols,l=r.durationRangeSec,c=void 0===l?[]:l,u=hp(r,fp);if(a&&at(a)){var p=a.split("x");2===p.length&&parseInt(p[0])&&parseInt(p[1])&&(u.w=parseInt(p[0]),u.h=parseInt(p[1]))}if(!u.w||!u.h){var h=((s||n||[]).toString().match(/^\d+,\d+/)||[])[0],f=h&&h.split(",").map((function(e){return parseInt(e)}));f&&2===f.length&&Object.assign(u,Ve(f))}if(u.w&&u.h){var g=i||c[0]||parseInt(u.minduration)||null,m=o||c[1]||parseInt(u.maxduration)||null;return g&&(u.minduration=g),m&&(u.maxduration=m),d&&d.length&&(u.protocols=d),u}}(j,i[Fo],e.sizes);W&&(z.video=W)}if(z.banner||z.video)if(D){var H,G,X,J,K={tid:null==t||null===(H=t.ortb2)||void 0===H||null===(G=H.source)||void 0===G||null===(X=G.tid)||void 0===X||null===(J=X.toString)||void 0===J?void 0:J.call(X),ext:{wrapper:"Prebid_js",wrapper_version:"9.10.0"}};e.schain&&(K.ext.schain=e.schain);var Y={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:I},tmax:k,source:K,imp:[z]};_&&(Y.site.publisher={id:_});var Q=R||N&&N.content;Q&&(Y.site.content=Q),x.push(Y),O.push(w),P.push(n)}else C[s]=n,E.push(z);!m&&A&&Sp[A]&&(m=A)}})),(m=Z.getConfig("forceBidderName")||m)&&Sp[m]&&(g=Sp[m].endpoint,this.forceBidderName=m);var D={tid:null==t||null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r||null===(i=r.tid)||void 0===i||null===(s=i.toString)||void 0===s?void 0:s.call(i),ext:{wrapper:"Prebid_js",wrapper_version:"9.10.0"}};c&&(D.ext.schain=c);var R=E.length||!x.length?{id:y&&y.toString(),site:{page:I},tmax:k,source:D,imp:E}:null;return l&&(R.site.content=l),[].concat(x,[R]).forEach((function(e){var n;if(e){p=null;var r=A(t,"ortb2.user.data");r&&r.length&&(p={data:h(r)}),b&&b.consentString&&(f={consent:b.consentString});var i=A(t,"ortb2.user.ext.device");i&&((f=f||{}).device=mp({},i)),u&&u.length&&((f=f||{}).eids=h(u)),f&&Object.keys(f).length&&((p=p||{}).ext=f);var o=_p.getDataFromLocalStorage(bp)||function(){if(Z.getConfig("localStorageWriteAllowed")){var e=Ne().replace(/-/g,"");return _p.setDataInLocalStorage(bp,e),e}return null}();o&&((p=p||{}).id=o.toString()),p&&(e.user=p);var s=A(t,"ortb2.user.keywords")||null,l=A(t,"ortb2.site.keywords")||null;s&&((d=d||{}).user=d.user||{},d.user.ortb2=[{name:"keywords",keywords:s.split(",")}]),l&&((d=d||{}).site=d.site||{},d.site.ortb2=[{name:"keywords",keywords:l.split(",")}]),d&&(d=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(r)if("site"===n||"user"===n){var i={};Object.keys(r).forEach((function(e){if(Array.isArray(r[e])){var t=[];r[e].forEach((function(e){if("object"===a(e)&&e.name){var n={name:e.name,segments:[]};Object.keys(e).forEach((function(t){Array.isArray(e[t])&&e[t].forEach((function(e){e&&("string"==typeof e?n.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&n.segments.push(e))}))})),n.segments.length&&t.push(n)}})),t.length&&(i[e]=t)}})),t[n]=i}else t[n]=r})),Object.keys(t).length&&t}(d),d&&(e.ext={keywords:d})),b&&b.gdprApplies&&(e.regs={ext:{gdpr:b.gdprApplies?1:0}});var c=A(t,"ortb2.regs")||{};if(T||null!=c&&c.gpp){var g,m,v,y={gpp:null!==(g=null==T?void 0:T.gppString)&&void 0!==g?g:null==c?void 0:c.gpp,gpp_sid:null!==(m=null==T?void 0:T.applicableSections)&&void 0!==m?m:null==c?void 0:c.gpp_sid};e.regs=Xt(null!==(v=null==e?void 0:e.regs)&&void 0!==v?v:{},y)}_&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=_),!0===Z.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1),null!=c&&null!==(n=c.ext)&&void 0!==n&&n.dsa&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.dsa=c.ext.dsa);var w=A(t,"ortb2.site");if(w){var S=[].concat(h(w.cat||[]),h(w.pagecat||[])).filter((function(e){return e&&"string"==typeof e}));S.length&&(e.site.cat=S);var I=A(w,"content.genre");I&&"string"==typeof I&&(e.site.content=mp(mp({},e.site.content),{},{genre:I}));var k=A(w,"content.data");if(k&&k.length){var E=e.site.content||{};e.site.content=Xt(E,{data:k})}var C=A(w,"content.id");C&&(e.site.content=mp(mp({},e.site.content),{},{id:C}))}}})),[].concat(h(x.map((function(e,t){var n,r=(g||yp).replace(/[?&]sp=([^?&=]+)/,(function(e,t){return t&&(n=t),""})),i=O[t]||n;return{method:"POST",url:r+(r.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(i?"&sp=".concat(i):""),data:JSON.stringify(e),bidObject:P[t]}}))),h(R?[{method:"POST",url:g||yp,data:JSON.stringify(R),bidsMap:C}]:[]))},interpretResponse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_n;e=e&&e.body;var r,i=[];e?e.seatbid&&!e.seatbid.length&&(r=wp.hasEmptySeatbidArray):r=wp.emptyResponse;var o=this.forceBidderName||this.code;return!r&&e.seatbid&&e.seatbid.forEach((function(e){!function(e,t,n,r,i){if(e){var o,a,s;if(e.adid||(o=wp.noAdid+JSON.stringify(e)),o||e.adm||e.nurl){var d=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,l=d||{},c=l.bid,u=l.savedPrebidBid;if(c&&(a=e.price,!dt(s=u&&u.cpm)||a>s||a===s&&Math.random()>.5)){var p={requestId:c.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.adid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};d.savedPrebidBid=p,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(p.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},p.meta.demandSource=e.ext.bidder.grid.demandSource),e.ext&&e.ext.dsa&&(p.meta.dsa=e.ext.dsa),"video"===e.content_type?(e.adm?(p.vastXml=e.adm,p.adResponse={content:p.vastXml}):e.nurl&&(p.vastUrl=e.nurl),p.mediaType=Fo,c.renderer||c.mediaTypes&&c.mediaTypes.video&&"outstream"!==c.mediaTypes.video.context||(p.renderer=function(e,t,n){var r=n.install({id:t.id,url:t.url,loaded:!1});try{r.setRender(kp)}catch(e){Je("Prebid Error calling setRender on renderer",e)}return r}(0,{id:c.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},r))):(p.ad=e.adm,p.mediaType=Vo);var h=Sp[i]&&Sp[i].bidResponseExternal||{};n.push(Xt(p,h))}}else o=wp.noAdm+JSON.stringify(e);o&&Ke(o)}}(function(e,t){return e?e.bid?e.bid[0]||Ke(t.noBid):Ke(t.hasNoArrayOfBids+JSON.stringify(e)):Ke(t.emptySeatbid),e&&e.bid&&e.bid[0]}(e,wp),t,i,n,o)})),r&&Ke(r),i},getUserSyncs:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[2],o=t[3];if(!Tp&&r.pixelEnabled){var a="";i&&("boolean"==typeof i.gdprApplies&&(a+="&gdpr=".concat(Number(i.gdprApplies))),"string"==typeof i.consentString&&(a+="&gdpr_consent=".concat(i.consentString))),o&&(a+="&us_privacy=".concat(o));var s=this.forceBidderName||this.code,d=Sp[s]&&Sp[s].syncurl||"https://x.bidswitch.net/sync?ssp=themediagrid";return Tp=!0,{type:"image",url:d+a}}},ajaxCall:function(e,t,n,r){return r.browsingTopics=!1,sn(e,t,n,r)},onDataDeletionRequest:function(e){Ip.ajaxCall("https://media.grid.bidswitch.net/uspapi_delete_c2s",null,null,{method:"GET"})}};function kp(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}function Ap(e,t,n,r,i,o,a){try{var s=e[o](a),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(r,i)}function Ep(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ap(o,r,i,a,s,"next",e)}function s(e){Ap(o,r,i,a,s,"throw",e)}a(void 0)}))}}Zr(Ip),p("gridBidAdapter");var Cp=n(9442),xp=n.n(Cp);function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dp(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function Rp(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}var jp="id5id",Mp="User ID - ID5 submodule: ",Np="https://id5-sync.com/api/config/prebid",Up="id5-sync.com",Lp=Mo({moduleType:Cn,moduleName:"id5Id"}),Bp={name:"id5Id",gvlid:131,decode:function(e,t){var n,r,i={};if(e&&"string"==typeof e.universal_uid){n=e.universal_uid,i=e.ext||i,r=e.publisherTrueLinkId;var o={id5id:{uid:n,ext:i}};switch(lt(i.euid)&&(o.euid={uid:i.euid.uids[0].id,source:i.euid.source,ext:{provider:Up}}),r&&(o.trueLinkId={uid:r}),A(e,"ab_testing.result")){case"control":Xe(Mp+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),Zt(o,"id5id.ext.abTestingControlGroup",!0);break;case"error":Ke(Mp+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":Xe(Mp+"A/B Testing - user is NOT in the Control Group"),Zt(o,"id5id.ext.abTestingControlGroup",!1)}return Xe(Mp+"Decoded ID",o),o}},getId:function(e,t,n){if(function(e){if(!e||!e.params||!e.params.partner)return Ke(Mp+"partner required to be defined"),!1;var t=e.params.partner;if("string"==typeof t||t instanceof String){var n=parseInt(t);if(isNaN(n)||n<0)return Ke(Mp+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=n}else if("number"!=typeof t)return Ke(Mp+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.name!==jp&&Je(Mp+"storage name recommended to be '".concat(jp,"'.")),!0):(Ke(Mp+"storage required to be set"),!1)}(e)){if(hh(t))return{callback:function(r){new Jp(e,t,n,zi.getConsentData(),$i.getConsentData()).execute().then((function(e){r(e)})).catch((function(e){Ke(Mp+"getId fetch encountered an error",e),r()}))}};Xe(Mp+"Skipping ID5 local storage write because no consent given.")}},extendId:function(e,t,n){return hh(t)?(Xe(Mp+"using cached ID",n),n&&(n.nbPage=ph(n)),n):(Xe(Mp+"No consent given for ID5 local storage writing, skipping nb increment."),n)},eids:{id5id:{getValue:function(e){return e.uid},source:Up,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}},trueLinkId:{getValue:function(e){return e.uid},getSource:function(e){return"true-link-id5-sync.com"},atype:1,getUidExt:function(e){if(e.ext)return e.ext}}}},qp=new WeakSet,Fp=new WeakSet,Vp=new WeakSet,zp=new WeakSet,$p=new WeakSet,Wp=new WeakSet,Hp=new WeakSet,Gp=new WeakSet,Xp=new WeakSet,Jp=function(){function e(t,n,r,i,o){te(this,e),Dp(this,Xp),Dp(this,Gp),Dp(this,Hp),Dp(this,Wp),Dp(this,$p),Dp(this,zp),Dp(this,Vp),Dp(this,Fp),Dp(this,qp),this.submoduleConfig=t,this.gdprConsentData=n,this.cacheIdObj=r,this.usPrivacyData=i,this.gppData=o}var t;return re(e,[{key:"execute",value:(t=Ep(xp().mark((function e(){var t;return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Rp(this,$p,nh).call(this),!Rp(this,qp,Kp).call(this)){e.next=14;break}return e.prev=2,e.next=5,Rp(this,Fp,Yp).call(this,t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),Ke(Mp+"Error while performing ID5 external module flow. Continuing with regular flow.",e.t0),e.abrupt("return",Rp(this,zp,eh).call(this,t));case 12:e.next=15;break;case 14:return e.abrupt("return",Rp(this,zp,eh).call(this,t));case 15:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})}]),e}();function Kp(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}function Yp(e){return Qp.apply(this,arguments)}function Qp(){return(Qp=Ep(xp().mark((function e(t){var n;return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ch(this.submoduleConfig.params.externalModuleUrl);case 2:return e.next=4,t;case 4:return n=e.sent,e.abrupt("return",Rp(this,Vp,Zp).call(this).fetchId5Id(n,this.submoduleConfig.params,mi(),this.gdprConsentData,this.usPrivacyData,this.gppData));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Zp(){return window.id5Prebid&&window.id5Prebid.integration}function eh(e){return th.apply(this,arguments)}function th(){return(th=Ep(xp().mark((function e(t){var n,r,i;return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,Rp(this,Wp,ih).call(this,n.extensionsCall);case 5:return r=e.sent,e.next=8,Rp(this,Hp,ah).call(this,n.fetchCall,r);case 8:return i=e.sent,e.abrupt("return",Rp(this,Xp,lh).call(this,i));case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function nh(){return rh.apply(this,arguments)}function rh(){return(rh=Ep(xp().mark((function e(){var t,n,r;return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.submoduleConfig.params.configUrl||Np,e.next=3,dn(t,{method:"POST",body:JSON.stringify(Pp(Pp({},this.submoduleConfig),{},{bounce:!0})),credentials:"include"});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Error while calling config endpoint: ",n);case 6:return e.next=8,n.json();case 8:return r=e.sent,Xe(Mp+"config response received from the server",r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ih(e){return oh.apply(this,arguments)}function oh(){return(oh=Ep(xp().mark((function e(t){var n,r,i,o,a;return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",void 0);case 2:return n=t.url,r=t.method||"GET",i="GET"===r?void 0:JSON.stringify(t.body||{}),e.next=7,dn(n,{method:r,body:i});case 7:if((o=e.sent).ok){e.next=10;break}throw new Error("Error while calling extensions endpoint: ",o);case 10:return e.next=12,o.json();case 12:return a=e.sent,Xe(Mp+"extensions response received from the server",a),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ah(e,t){return sh.apply(this,arguments)}function sh(){return(sh=Ep(xp().mark((function e(t,n){var r,i,o,a,s;return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.overrides||{},o=JSON.stringify(Pp(Pp(Pp({},Rp(this,Gp,dh).call(this)),i),{},{extensions:n})),e.next=5,dn(r,{method:"POST",body:o,credentials:"include"});case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("Error while calling fetch endpoint: ",a);case 8:return e.next=10,a.json();case 10:return s=e.sent,Xe(Mp+"fetch response received from the server",s),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function dh(){var e=this.submoduleConfig.params,t=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,n=mi(),r=this.cacheIdObj?this.cacheIdObj.signature:void 0,i=ph(this.cacheIdObj),o=window.id5Bootstrap?window.id5Bootstrap.getTrueLinkInfo():{booted:!1},a={partner:e.partner,gdpr:t,nbPage:i,o:"pbjs",tml:n.topmostLocation,ref:n.ref,cu:n.canonicalUrl,top:n.reachedTop?1:0,u:n.stack[0]||window.location.href,v:"9.10.0",storage:this.submoduleConfig.storage,localStorage:Lp.localStorageIsEnabled()?1:0,true_link:o};!t||void 0===this.gdprConsentData.consentString||ut(this.gdprConsentData.consentString)||pt(this.gdprConsentData.consentString)||(a.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||ut(this.usPrivacyData)||pt(this.usPrivacyData)||(a.us_privacy=this.usPrivacyData),this.gppData&&(a.gpp_string=this.gppData.gppString,a.gpp_sid=this.gppData.applicableSections),void 0===r||pt(r)||(a.s=r),void 0===e.pd||pt(e.pd)||(a.pd=e.pd),void 0===e.provider||pt(e.provider)||(a.provider=e.provider);var s=e.abTesting||{enabled:!1};return s.enabled&&(a.ab_testing={enabled:!0,control_group_pct:s.controlGroupPct}),a}function lh(e){try{e.privacy&&window.id5Bootstrap&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e.privacy)}catch(e){Ke(Mp+"Error while writing privacy info into local storage.",e)}return e}function ch(e){return uh.apply(this,arguments)}function uh(){return(uh=Ep(xp().mark((function e(t){return xp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new he((function(e,n){if(window.id5Prebid)e();else try{vn(t,"id5",e)}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ph(e){return e&&void 0!==e.nbPage?e.nbPage+1:1}function hh(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,n=A(e,"vendorData.purpose.consents.1"),r=A(e,"vendorData.vendor.consents.".concat(131..toString()));return!!(!t||n&&r)}function fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fh(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Bn("userId",Bp),p("id5IdSystem");var mh="improvedigital",vh={DEFAULT_MIMES:["video/mp4"]},yh={code:mh,gvlid:253,aliases:["id"],supportedMediaTypes:[Vo,qo,Fo],syncStore:{extendMode:!1,placementId:null},isBidRequestValid:function(e){return!!(e&&e.params&&e.params.placementId&&e.params.publisherId)},buildRequests:function(e,t){return this.syncStore.placementId=this.syncStore.placementId||e[0].params.placementId,_h.buildServerRequests(e,t)},interpretResponse:function(e,t){var n=t.ortbRequest;return bh.fromORTB({request:n,response:e.body}).bids},getUserSyncs:function(e,t,n,r){if(!0===Z.getConfig("coppa")||!Bl(n))return[];var i=[];if(!this.syncStore.extendMode&&e.pixelEnabled||!e.iframeEnabled)e.pixelEnabled&&t.forEach((function(e){A(e,"body.ext.".concat(mh,".sync"),[]).forEach((function(e){i.some((function(t){return t.url===e}))||i.push({type:"image",url:e})}))}));else{var o=n||{},a=o.gdprApplies,s=o.consentString,d=new Set;this.syncStore.extendMode&&t&&t.forEach((function(e){var t,n;null!=e&&null!==(t=e.body)&&void 0!==t&&null!==(n=t.ext)&&void 0!==n&&n.responsetimemillis&&Object.keys(e.body.ext.responsetimemillis).forEach((function(e){return d.add(e)}))})),i.push({type:"iframe",url:"https://hb.360yield.com/prebid-universal-creative/load-cookie.html"+"?placement_id=".concat(this.syncStore.placementId)+(this.syncStore.extendMode?"&pbs=1":"")+("boolean"==typeof a?"&gdpr=".concat(Number(a)):"")+(s?"&gdpr_consent=".concat(s):"")+(r?"&us_privacy=".concat(encodeURIComponent(r)):"")+(d.size?"&bidders=".concat(h(d).join(",")):"")})}return i}};Zr(yh);var bh=vu({context:{ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp:function(e,t,n){var r=e(t,n);r.secure=Number("https:"===window.location.protocol),!r.bidfloor&&t.params.bidFloor&&(r.bidfloor=t.params.bidFloor,r.bidfloorcur=Ue("bidFloorCur",t.params).toUpperCase()||"USD");var i=n.extendMode?"ext.prebid.bidder.improvedigital":"ext.bidder",o=t.params.placementId,a=t.params.publisherId;return Zt(r,"".concat(i,".placementId"),o),Zt(r,"".concat(i,".publisherId"),a),n.extendMode&&Zt(r,"ext.prebid.storedrequest.id",""+o),Zt(r,"".concat(i,".keyValues"),Ue("keyValues",t.params)||void 0),r},request:function(e,t,n,r){var i=e(t,n,r);return Xt(i,{id:Me(),source:{},ext:{improvedigital:{sdk:{name:"pbjs",version:"9.10.0"}}}}),i},bidResponse:function(e,t,n){if(t.adm&&t.price&&!t.hasOwnProperty("errorCode")){var r,i=n.bidRequest;n.mediaType=1===(r=Object.keys(i.mediaTypes)).length?r[0]:-1!==t.adm.search(/^(<\?xml|<vast)/i)?Fo:"{"===t.adm[0]?qo:Vo;var o=e(t,n),a=A(t,"ext.".concat(mh),{});return 1===a.pg&&(o.adserverTargeting={hb_deal_type_improve:"pg"}),Object.assign(o,{dealId:"string"==typeof a.buying_type&&"rtb"!==a.buying_type?a.line_item_id:void 0,netRevenue:a.is_net||!1}),o.mediaType===Fo&&_h.isOutstreamVideo(i)&&Object.assign(o,{adResponse:{content:o.vastXml},renderer:wh.createRenderer(i)}),Sh.forwardBid({bidRequest:i,bid:o}),o}},overrides:{imp:{banner:function(e,t,n,r){if(n.mediaTypes[Vo]){if(!1===Z.getConfig("improvedigital.usePrebidSizes")){var i=Object.assign({},n.mediaTypes[Vo],{sizes:null});n=gh(gh({},n),{},{mediaTypes:d({},Vo,i)})}e(t,n,r)}},video:function(e,t,n,r){var i;if(n.mediaTypes[Fo]){var o=Object.assign({mimes:vh.DEFAULT_MIMES},n.mediaTypes[Fo],null===(i=n.params)||void 0===i?void 0:i.video);e(t,gh(gh({},n),{},{mediaTypes:d({},Fo,o)}),r),Zt(t,"ext.is_rewarded_inventory",1===o.rewarded||1===A(o,"ext.rewarded")||void 0)}}}}}),_h={buildServerRequests:function(e,t){var n=this,r=!0===Z.getConfig("improvedigital.extend"),i=[],o=!0===Z.getConfig("improvedigital.singleRequest"),a=[],s=[];function d(e,n){if(e)return"https://pbs.360yield.com/openrtb2/auction";var r=[];return r.push(Bl(null==t?void 0:t.gdprConsent)?"https://ad.360yield.com":"https://ad.360yield-basic.com"),n&&r.push(n),r.push("pb"),r.join("/")}function l(e,n,r){var i=bh.toORTB({bidRequests:e,bidderRequest:t,context:{extendMode:r}});return{method:"POST",url:d(r,n),data:JSON.stringify(i),ortbRequest:i,bidderRequest:t}}var c=null;return e.map((function(e){var t=e.params.publisherId,d=n.isExtendModeEnabled(r,e.params);if(o){if(c){if(t&&c!==t)throw new Error("All Improve Digital placements in a single call must have the same publisherId. Please check your 'params.publisherId' or turn off the single request mode.")}else c=t;d?a.push(e):s.push(e)}else i.push(l([e],t,d))})),o?(a.length&&i.push(l(a,c,!0)),s.length&&i.push(l(s,c,!1)),i):i},isExtendModeEnabled:function(e,t){var n="boolean"==typeof t.extend?t.extend:e;return n&&!yh.syncStore.extendMode&&(yh.syncStore.extendMode=!0),n},isOutstreamVideo:function(e){return"outstream"===A(e,"mediaTypes.video.context")}},wh={RENDERER_URL:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",createRenderer:function(e){var t=_n.install({id:e.adUnitCode,url:this.RENDERER_URL,config:A(e,"renderer.options"),adUnitCode:e.adUnitCode});try{t.setRender(this.render)}catch(e){Je("Prebid Error calling setRender on renderer",e)}return t},render:function(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},wh.handleRendererEvents.bind(null,e))}))},handleRendererEvents:function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}},Sh={RENDERER_URL:"https://cdn.360yield.com/razr/tag.js",forwardBid:function(e){var t=e.bidRequest,n=e.bid;if(n.mediaType===Vo){var r={prebid:{bidRequest:t,bid:n}},i=JSON.stringify(r).replace(/<\/script>/gi,"\\x3C/script>"),o="<script>window.__razr_config = ".concat(i,";<\/script>");n.ad=o+n.ad,this.installListener()}},installListener:function(){this._listenerInstalled||(window.addEventListener("message",(function(e){var t,n,r=null===(t=e.data)||void 0===t||null===(n=t.razr)||void 0===n?void 0:n.load;if(r){e.source&&(r.source=e.source,r.id&&e.source.postMessage({razr:{id:r.id}},"*"));var i=window.razr=window.razr||{};i.q=i.q||[],i.q.push(r),i.loaded||vn(Sh.RENDERER_URL,mh)}})),this._listenerInstalled=!0)}};function Th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Th(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Th(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ah(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ah(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}p("improvedigitalBidAdapter");var Eh="ix",Ch=[Vo,Fo,qo],xh=[144,144],Oh={JPY:1},Ph={PBJS:"p",IX:"x"},Dh={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},Rh={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID"},jh=["lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],Mh=["mimes","minduration","maxduration"],Nh=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],Uh="".concat(Eh,"_features"),Lh=Mo({bidderCode:Eh}),Bh={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return A(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(Lh.localStorageIsEnabled()){var e=Kt(Lh.getDataFromLocalStorage(Uh));A(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,r=A(t,"ext.features");r&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:r},Lh.localStorageIsEnabled()&&Lh.setDataInLocalStorage(Uh,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},Lh.localStorageIsEnabled()&&Lh.removeDataFromLocalStorage(Uh)}},qh=0,Fh="",Vh="",zh=!1;function $h(e){var t=Wh(e,Fo),n=A(e,"mediaTypes.video"),r=A(e,"params.video");if(Kh(n,r).length)return{};t.video=r?Ct(e.params.video):{};var i=A(e,"ortb2Imp.ext.tid");for(var o in i&&Zt(t,"ext.tid",i),function(e,t){if(A(t,"mediaTypes.video.context")===ur){var n=A(t,"mediaTypes.video.renderer");if(n||(n=A(t,"renderer")),A(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(n&&"object"===a(n)){if(void 0!==n.url){var r="";try{r=new URL(n.url).hostname}catch(e){return}r.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=n.url}}else e.displaymanager="ix"}}(t,e),rf(t,e),n)-1===Nh.indexOf(o)||t.video.hasOwnProperty(o)||(t.video[o]=n[o]);if(t.video.minduration>t.video.maxduration)return Ke("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]")),{};var s=r&&r.context||n&&n.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!qt(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&(Je("IX Bid Adapter: video.plcmt [".concat(e.video.plcmt,"] must be an integer between 1-4 inclusive")),delete e.video.plcmt)}(t),s&&!t.video.hasOwnProperty("placement")&&(s===pr?t.video.placement=1:s===ur?A(r,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,zh=!0):Je("IX Bid Adapter: Video context '".concat(s,"' is not supported"))),!t.video.w||!t.video.h){var d=Yh(A(t,"video.playerSize"))||Yh(A(e,"params.size"));if(!d)return Je("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=d[0],t.video.h=d[1]}return Hh(e,t,Fo),t}function Wh(e,t){var n={};if(n.id=e.bidId,ff()&&A(e,"params.externalId")&&Zt(n,"ext.externalID",e.params.externalId),A(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case Vo:Zt(n,"ext.siteID",e.params.banner.siteId.toString());break;case Fo:Zt(n,"ext.siteID",e.params.video.siteId.toString());break;case qo:Zt(n,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&Zt(n,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||Zt(n,"ext.sid",String(e.params.id)),n}function Hh(e,t,n){var r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),ot(e.getFloor)){var o="*",a="*";if(n&&ft(Ch,n)){var s=t[n];o=n,a=[s.w,s.h]}try{i=e.getFloor({mediaType:o,size:a})}catch(e){Je("priceFloors module call getFloor failed, error : ",e)}}var d=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,Zt(t,"ext.fl",Ph.PBJS),d=!0):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,Zt(t,"ext.fl",Ph.IX),d=!0),d&&(n==Vo?(Zt(t,"banner.ext.bidfloor",t.bidfloor),Zt(t,"banner.ext.fl",t.ext.fl)):n==Fo?(Zt(t,"video.ext.bidfloor",t.bidfloor),Zt(t,"video.ext.fl",t.ext.fl)):(Zt(t,"native.ext.bidfloor",t.bidfloor),Zt(t,"native.ext.fl",t.ext.fl)))}function Gh(e,t,n){var r,i={},o=!(!A(e,"exp")||!qt(e.exp)),a=A(e,"dealid")||A(e,"ext.dealid");Oh.hasOwnProperty(t)?i.cpm=e.price/Oh[t]:i.cpm=e.price/100,i.requestId=e.impid,a&&(i.dealId=a),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl):i.vastXml=e.adm;var s=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{s=JSON.parse(e.adm)}catch(e){Je("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(i.width=n.video.w,i.height=n.video.h,i.mediaType=Fo,i.mediaTypes=n.mediaTypes,i.ttl=o?e.exp:3600):s&&s.native?(i.native={ortb:s.native},i.width=e.w?e.w:1,i.height=e.h?e.h:1,i.mediaType=qo,i.ttl=o?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=Vo,i.ttl=o?e.exp:300),i.meta={},i.meta.networkId=A(e,"ext.dspid"),i.meta.brandId=A(e,"ext.advbrandid"),i.meta.brandName=A(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(i.meta.advertiserDomains=e.adomain),null!==(r=e.ext)&&void 0!==r&&r.dsa&&(i.meta.dsa=e.ext.dsa),i}function Xh(e){return Array.isArray(e)&&2===e.length&&qt(e[0])&&qt(e[1])}function Jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Xh(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Kh(e,t){var n=[];e||Je("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var r,i=kh(Mh);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);a||s||n.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){i.e(e)}finally{i.f()}var d=e&&e.hasOwnProperty("protocol"),l=e&&e.hasOwnProperty("protocols"),c=t&&t.hasOwnProperty("protocol"),u=t&&t.hasOwnProperty("protocols");return d||l||c||u||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Xh(e)?e:!!Xh(e[0])&&e[0]}function Qh(e,t,n){if(e)return Ih(Ih({},g(n,(function(t){return t.bidId===e}))),g(t,(function(t){return t.id===e})))}function Zh(e,t,n,r){var i="https://htlb.casalemedia.com/openrtb/pbjs",o=function(e){var t=[],n={};if(st(e)){var r,i=kh(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=Rh.hasOwnProperty(o.source);if(A(o,"uids.0")&&(n[o.source]=!0,a&&""!==Rh[o.source]&&(o.uids[0].ext={rtiPartner:Rh[o.source]}),t.push(o),t.length>=50))break}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:n}}(A(e,"0.userIdAsEids")),s=o.toSend;window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var n=window.headertag.getIdentityInfo();if(n&&"object"===a(n))for(var r in n){if(e.length>=50)return;if(n.hasOwnProperty(r)){var i=n[r];!i.responsePending&&i.data&&"object"===a(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}}(s,o);var d=[],l=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=Lh.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);l=function(e,t){return t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:Bh.isFeatureEnabled(t)}}))),e}(l,Bh.REQUESTED_FEATURE_TOGGLES);var c=function(e,t){var n,r,i,o=e.map((function(e){return e.adUnitCode})).filter((function(e,t,n){return n.indexOf(e)===t})),a=A(e,"0.userIdAsEids",[]),s={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"9.10.0",userIds:(r=e[0],i=r.userId||{},jh.filter((function(e){return i[e]}))),url:window.location.href.split("?")[0],vpd:zh,ae:t,eidLength:a.length},d=kh(o);try{var l=function(){var t=n.value,r=e.filter((function(e){return e.adUnitCode===t}))[0];A(r,"mediaTypes")&&(Object.keys(r.mediaTypes).length>1&&s.mfu++,A(r,"mediaTypes.native")&&s.nu++,A(r,"mediaTypes.banner")&&s.bu++,"outstream"===A(r,"mediaTypes.video.context")&&(s.ou++,hf(r)&&(s.ren=!0)),"instream"===A(r,"mediaTypes.video.context")&&s.iu++,s.allu++)};for(d.s();!(n=d.n()).done;)l()}catch(e){d.e(e)}finally{d.f()}return s}(e,A(t,"paapi.enabled"));for(var u in c)l.ext.ixdiag[u]=c[u];l=function(e,t,n,r,i){var o,a,s=A(t,"timeout");return s&&(e.ext.ixdiag.tmax=s),Z.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=Z.getConfig("userSync").syncsPerBidder),e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:null==t||null===(o=t.ortb2)||void 0===o||null===(a=o.source)||void 0===a?void 0:a.tid},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain),i.length>0&&(e.user={},e.user.eids=i),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}(l,t,n,e,s),l=function(e,t){if(t){t.gdprConsent&&((Fh=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:Fh.gdprApplies?1:0}}),Fh.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:Fh.consentString||""},Fh.hasOwnProperty("addtlConsent")&&Fh.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:Fh.addtlConsent}))),t.uspConsent&&(Zt(e,"regs.ext.us_privacy",t.uspConsent),Vh=t.uspConsent);var n=A(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(Zt(e,"regs.gpp",t.gppConsent.gppString),Zt(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return Z.getConfig("coppa")&&Zt(e,"regs.coppa",1),e}(l,t);var p={};e[0].params.siteId&&(qh=e[0].params.siteId,p.s=qh);for(var h=Object.keys(n),f=!1,g=0;g<h.length&&!(d.length>=4);g++){l=ef(n,h,l,g);var m=A(t,"ortb2")||{},v=Ih({},m.site||m.context);v.page=tf(t);var y=Ih({},m.user);ut(m)||f||((l=nf(t,l,m,v,y)).site=Xt({},l.site,v),l.user=Xt({},l.user,y),f=!0),l=of(n,l,h,g);var b=g===h.length-1;if(l=yf(l=vf(l=_f(l))),b){var _="".concat(i,"?");0!==qh&&(_+="s=".concat(qh)),ff()&&(_+=0!==qh?"&":"",_+="p=".concat(Z.getConfig("exchangeId"))),d.push({method:"POST",url:_,data:Ct(l),option:{contentType:"text/plain"},validBidRequests:e}),l.imp=[],f=!1}}return d}function ef(e,t,n,r){var i=e[t[r]],o=i.missingImps,a=void 0===o?[]:o,s=i.ixImps,d={ixImps:void 0===s?[]:s,missingBannerImpressions:a},l=Object.keys(d).map((function(e){return d[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,h(t))}),[]),c=e[t[r]].gpid,u=e[t[r]].dfp_ad_unit_code,p=e[t[r]].tid,f=e[t[r]].sid,g=e[t[r]].ae,m=e[t[r]].paapi,v=l.filter((function(e){return Vo in e})),y=l.filter((function(e){return!(Vo in e)}));if(v.length>0){var b=v.reduce((function(e,t){return e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e}),{});for(var _ in b){for(var w=b[_],S=w[0],T=S.id,I=S.banner.topframe,k=A(w[0],"ext.externalID"),E={id:T,banner:{topframe:I,format:w.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},C=0;C<E.banner.format.length;C++)null!=E.banner.format[C].ext&&(null!=E.banner.format[C].ext.sid&&delete E.banner.format[C].ext.sid,null!=E.banner.format[C].ext.externalID&&delete E.banner.format[C].ext.externalID),"bidfloor"in w[C]&&(E.banner.format[C].ext.bidfloor=w[C].bidfloor),"{}"===JSON.stringify(E.banner.format[C].ext)&&delete E.banner.format[C].ext;var x=e[t[r]].pos;qt(x)&&(E.banner.pos=x),(u||c||p||f||g||k||m)&&(E.ext={},E.ext.dfp_ad_unit_code=u,E.ext.gpid=c,E.ext.tid=p,E.ext.sid=f,E.ext.externalID=k,1==g&&(E.ext.ae=1,E.ext.paapi=m)),"bidfloor"in w[0]&&(E.bidfloor=w[0].bidfloor),"bidfloorcur"in w[0]&&(E.bidfloorcur=w[0].bidfloorcur);var O=e[t[r]].adUnitFPD;O&&Zt(E,"ext.data",O),n.imp.push(E)}}return y.length>0&&y.forEach((function(e){if(c&&Zt(e,"ext.gpid",c),n.imp.length>0){var t=!1;n.imp.forEach((function(r,i){e.id===r.id&&Fo in e?(r.video=e.video,r.video.ext=Object.assign({},e.video.ext,e.ext),A(r,"video.ext.bidfloor",!1)&&A(r,"bidfloor",!1)&&r.video.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.video.ext.bidfloor),!A(r,"ext.siteID",!1)&&A(e,"video.ext.siteID")&&(Zt(r,"ext.siteID",e.video.ext.siteID),Zt(n,"ext.ixdiag.usid",!0)),t=!0):e.id===r.id&&qo in e&&(r.native=e.native,r.native.ext=Object.assign({},e.native.ext,e.ext),A(r,"native.ext.bidfloor",!1)&&A(r,"bidfloor",!1)&&r.native.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.native.ext.bidfloor),!A(r,"ext.siteID",!1)&&A(e,"native.ext.siteID",!1)&&(Zt(r,"ext.siteID",e.native.ext.siteID),Zt(n,"ext.ixdiag.usid",!0)),t=!0)})),t||n.imp.push(e)}else n.imp.push(e)})),n}function tf(e){var t,n=e&&e.bidderCode||"ix",r=Z.getConfig(n);return t=A(e,"ortb2.site.page")?e.ortb2.site.page:A(e,"refererInfo.page"),r&&"object"===a(r.firstPartyData)?function(e,t,n){var r;try{r=new URL(t)}catch(n){Je("IX Bid Adapter: Invalid URL set in ortb2.site.page: ".concat(t,". Using referer URL instead.")),r=new URL(A(e,"refererInfo.page"))}for(var i=new URLSearchParams(r.search),a=0,s=Object.entries(n);a<s.length;a++){var d=o(s[a],2),l=d[0],c=d[1];i.has(l)||i.append(l,c)}return r.search=i.toString(),r.toString()}(e,t,r.firstPartyData):t}function nf(e,t,n,r,i){if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((function(e){-1===Dh.SITE.indexOf(e)&&delete r[e]})),Object.keys(i).forEach((function(e){-1===Dh.USER.indexOf(e)&&delete i[e]})),n.device){var o=Ih({},n.device.sua);ut(o)||Zt(t,"device.sua",o)}var a;if(n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&Zt(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&Zt(t,"regs.gpp_sid",n.regs.gpp_sid),null!==(a=n.regs.ext)&&void 0!==a&&a.dsa)){var s=n.regs.ext.dsa,d={};if(["dsarequired","pubrender","datatopub"].forEach((function(e){dt(s[e])&&(d[e]=s[e])})),st(s.transparency)){var l=[];s.transparency.forEach((function(e){lt(e)&&at(e.domain)&&""!=e.domain&&st(e.dsaparams)&&e.dsaparams.every((function(e){return dt(e)}))&&l.push(e)})),l.length>0&&(d.transparency=l)}ut(d)||Zt(t,"regs.ext.dsa",d)}return t}function rf(e,t){var n=A(t,"ortb2Imp.ext.data");n&&Zt(e,"ext.data",n)}function of(e,t,n,r,i,o){var a=e[n[r]].pbadslot,s=e[n[r]].tagId,d=e[n[r]].adUnitCode,l=e[n[r]].divId;return(a||s||d||l)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=l),t}function af(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];if(t[0]===r[0]&&t[1]===r[1]){e.splice(n,1);break}}}function sf(e,t){var n=function(e){var t=Wh(e,qo),n=e.nativeOrtbRequest;n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"};var r=A(e,"ortb2Imp.ext.tid");return r&&Zt(t,"ext.tid",r),rf(t,e),Hh(e,t,qo),t}(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=A(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=A(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=A(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=A(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:Od(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function df(e,t){var n=$h(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=A(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=A(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=A(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=A(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:Od(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function lf(e,t,n,r){var i=function(e){var t=Wh(e,Vo);t.banner={},t.adunitCode=e.adUnitCode;var n=A(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=xt()?0:1,Hh(e,t,Vo),t}(e),o=Jh(A(e,"mediaTypes.banner.sizes"),A(e,"params.size"));if(n.hasOwnProperty(e.adUnitCode)||(n[e.adUnitCode]={}),n[e.adUnitCode].gpid=A(e,"ortb2Imp.ext.gpid"),n[e.adUnitCode].dfp_ad_unit_code=A(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.adUnitCode].tid=A(e,"ortb2Imp.ext.tid"),n[e.adUnitCode].pbadslot=A(e,"ortb2Imp.ext.data.pbadslot"),n[e.adUnitCode].tagId=A(e,"params.tagId"),n[e.adUnitCode].pos=A(e,"mediaTypes.banner.pos"),A(r,"paapi.enabled")){var a=A(e,"ortb2Imp.ext.ae"),s=A(e,"ortb2Imp.ext.paapi");s&&(n[e.adUnitCode].paapi=s),a&&(qt(a)?n[e.adUnitCode].ae=a:Je("error setting auction environment flag - must be an integer"))}var d=A(e,"ortb2Imp.ext.data");d&&(n[e.adUnitCode].adUnitFPD=d);var l=A(e,"params.id");!l||"string"!=typeof l&&"number"!=typeof l||(n[e.adUnitCode].sid=String(l));var c=e.adUnitCode,u=document.getElementById(c)?c:Od(c).divId;n[e.adUnitCode].adUnitCode=c,n[e.adUnitCode].divId=u,o&&(n[e.adUnitCode].hasOwnProperty("ixImps")||(n[e.adUnitCode].ixImps=[]),n[e.adUnitCode].ixImps.push(i)),function(e,t,n){if(t.hasOwnProperty(e.adUnitCode)){var r=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(r=t[e.adUnitCode].missingSizes),af(r,e.params.size),t[e.adUnitCode].missingSizes=r}else if(A(e,"mediaTypes.banner.sizes")){var i=Ct(e.mediaTypes.banner.sizes);af(i,e.params.size);var o={missingSizes:i,impression:n};t[e.adUnitCode]=o}}(e,t,i)}function cf(e,t,n){var r=Ct(t);return r.banner.w=n[0],r.banner.h=n[1],Hh(e,r,Vo),r}function uf(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:Od(t).divId;n?window.createIXPlayer(n,e):Je("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function pf(e,t){var n=_n.install({id:e,url:t,loaded:!1});try{n.setRender(uf)}catch(e){return Je("Prebid Error calling setRender on renderer",e),null}return t?n:(Je("Outstream renderer URL not found"),null)}function hf(e){if("outstream"!==A(e,"mediaTypes.video.context"))return!1;var t=A(e,"mediaTypes.video.renderer");return t||(t=A(e,"renderer")),!("object"===a(t)&&t.url&&t.render)||t.backupOnly}function ff(){var e=Z.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}var gf={code:Eh,gvlid:10,supportedMediaTypes:Ch,isBidRequestValid:function(e){var t,n,r=A(e,"params.video"),i=A(e,"params.size"),o=A(e,"mediaTypes.banner.sizes"),a=A(e,"mediaTypes.video"),s=A(e,"mediaTypes.video.playerSize"),d=e.params.hasOwnProperty("bidFloor"),l=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!ft(Ch,e.mediaType))return Je("IX Bid Adapter: media type is not supported."),!1;if(A(e,"mediaTypes.banner")&&!o)return!1;if(i){var c=Yh(i);if(!c)return Ke("IX Bid Adapter: size has invalid format."),!1;if(!Jh(e.sizes,c)&&!Jh(s,c)&&!Jh(o,c))return Ke("IX Bid Adapter: bid size is not included in ad unit sizes or player size."),!1}if(!ff()&&null==e.params.siteId)return Ke("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return Ke("IX Bid Adapter: siteId must be string or number type."),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return Ke("IX Bid Adapter: siteId must valid value"),!1}if((d||l)&&!(d&&l&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return Ke("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format."),!1;if(a&&r){var u=$h(e).video,p=Kh(a,r);if(A(e,"mediaTypes.video.context")===ur&&hf(e)&&u){var h=[A(u,"w"),A(u,"h")];if(!(h[0]>=xh[0]&&h[1]>=xh[1]))return Ke("IX Bid Adapter: ".concat(h," is an invalid size for IX outstream renderer")),!1}if(p.length)return p.forEach((function(e){Ke(e)})),!1}return function(e){return void 0===A(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:function(){qh=0},buildRequests:function(e,t){var n=[],r={},i={},o={},a={};for(var s in Bh.getFeatureToggles(),e.forEach((function(e){var n=Object.keys(A(e,"mediaTypes",{}));for(var s in n)switch(n[s]){case Vo:lf(e,a,r,t);break;case Fo:df(e,i);break;case qo:sf(e,o);break;default:Je("IX Bid Adapter: ad unit mediaTypes ".concat(s," is not supported"))}})),a)if(a.hasOwnProperty(s)){var d=a[s].missingSizes;r.hasOwnProperty(s)||(r[s]={}),r[s].hasOwnProperty("missingImps")||(r[s].missingImps=[],r[s].missingCount=0);for(var l=a[s].impression,c=0;c<d.length;c++){var u=cf(e[0],l,d[c]);r[s].missingImps.push(u),r[s].missingCount++}}var p,f=[];return Object.keys(r).length>0&&f.push(r),Object.keys(i).length>0&&f.push(i),Object.keys(o).length>0&&f.push(o),Bh.isFeatureEnabled("pbjs_enable_multiformat")?n.push.apply(n,h(Zh(e,t,(p={},f.forEach((function(e){Object.keys(e).forEach((function(t){Object.keys(p).includes(t)?p[t].hasOwnProperty("ixImps")&&e[t].hasOwnProperty("ixImps")?p[t].ixImps=[].concat(h(p[t].ixImps),h(e[t].ixImps)):p[t].hasOwnProperty("missingImps")&&e[t].hasOwnProperty("missingImps")?p[t].missingImps=[].concat(h(p[t].missingImps),h(e[t].missingImps)):e[t].hasOwnProperty("ixImps")?p[t].ixImps=e[t].ixImps:e[t].hasOwnProperty("missingImps")&&(p[t].missingImps=e[t].missingImps):p[t]=e[t]}))})),p)))):(Object.keys(r).length>0&&n.push.apply(n,h(Zh(e,t,r))),Object.keys(i).length>0&&n.push.apply(n,h(Zh(e,t,i))),Object.keys(o).length>0&&n.push.apply(n,h(Zh(e,t,o)))),n},interpretResponse:function(e,t){var n=[],r=null,i=A(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(Bh.setFeatureToggles(e),!e.hasOwnProperty("body"))return n;for(var o=e.body,s=o.seatbid||[],d=0;d<s.length;d++)if(s[d].hasOwnProperty("bid")){for(var l=s[d].bid,c=t.data,u=0;u<l.length;u++){var p=Qh(l[u].impid,c.imp,t.validBidRequests);if((r=Gh(l[u],o.cur,p)).mediaType===Fo&&hf(p)){var h=A(o,"ext.videoplayerurl");if(r.renderer=pf(l[u].bidId,h),!r.renderer)continue}n.push(r)}if(A(c,"ext.ixdiag.err")&&Lh.localStorageIsEnabled())try{Lh.removeDataFromLocalStorage("ixdiag")}catch(e){Ke("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(i)&&i.length>0))return n;i=i.filter((function(e){return!!function(e){return"object"===a(e)&&null!==e}(e)||(Je("Malformed auction config detected:",e),!1)}));try{return{bids:n,paapi:i}}catch(e){return Je("Error attaching AuctionConfigs",e),n}},getUserSyncs:function(e,t){var n=[],r=null;if(t.length>0&&(r=A(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;Z.getConfig("userSync")&&(i=Z.getConfig("userSync").syncsPerBidder),0===i&&(i=r),i=r&&(0===i||i)?r>i?i:r:1;for(var o=0;o<i;o++)n.push({type:"image",url:mf(i,o)})}return n}};function mf(e,t){var n="",r="0";return Fh&&Fh.hasOwnProperty("gdprApplies")&&(r=Fh.gdprApplies?"1":"0"),Fh&&Fh.hasOwnProperty("consentString")&&(n=Fh.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==qh?"&site_id="+qh.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+n+"&us_privacy="+(Vh||"")}function vf(e){return e.imp.forEach((function(t,n){var r=t.ext;if(null==r)return e;bf(t)<2||Object.keys(r).forEach((function(i){if(Vo in t){var o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].banner.ext[i],void 0!==t.banner.format)for(var a=0;a<t.banner.format.length;a++)null!=t.banner.format[a].ext&&null!=t.banner.format[a].ext[i]&&t.banner.format[a].ext[i]==r[i]&&delete e.imp[n].banner.format[a].ext[i]}if(Fo in t){var s=t.video.ext;void 0!==s&&void 0!==s[i]&&s[i]==r[i]&&delete e.imp[n].video.ext[i]}if(qo in t){var d=t.native.ext;void 0!==d&&void 0!==d[i]&&d[i]==r[i]&&delete e.imp[n].native.ext[i]}}))})),e}function yf(e){return e.imp.forEach((function(t,n){if(null==t.ext)return e;if(!(bf(t)<2)){if(Vo in t){var r=t.banner.ext;if(void 0!==r&&void 0!==r.siteID&&delete e.imp[n].banner.ext.siteID,void 0!==t.banner.format)for(var i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&(Zt(e.imp[n],"ext.siteID",t.banner.format[i].ext.siteID),Zt(e,"ext.ixdiag.usid",!0),delete e.imp[n].banner.format[i].ext.siteID)}if(Fo in t){var o=t.video.ext;void 0!==o&&void 0!==o.siteID&&delete e.imp[n].video.ext.siteID}if(qo in t){var a=t.native.ext;void 0!==a&&void 0!==a.siteID&&delete e.imp[n].native.ext.siteID}}})),e}function bf(e){var t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function _f(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}Zr(gf),p("ixBidAdapter");var wf={code:"justpremium",gvlid:62,time:6e4,isBidRequestValid:function(e){return!!(e&&e.params&&e.params.zone)},buildRequests:function(e,t){var n=function(e){var t={},n={};return e.forEach((function(e){var r=e.params,i=r.zone;if(1!==t[i]){var o=r.allow||r.formats||[],a=r.exclude||[];if(0===o.length&&0===a.length)return t[r.zone]=1;t[i]=t[i]||[[],{}],t[i][0]=function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)t[n]===t[r]&&t.splice(r--,1);return t}(t[i][0].concat(o)),a.forEach((function(e){t[i][1][e]?t[i][1][e]++:t[i][1][e]=1})),n[i]=n[i]||0,a.length&&n[i]++}})),Object.keys(n).forEach((function(e){if(1!==t[e]){var r=[];Object.keys(t[e][1]).forEach((function(i){t[e][1][i]===n[e]&&r.push(i)})),t[e][1]=r}})),Object.keys(t).forEach((function(e){1!==t[e]&&t[e][1].length&&(t[e][0].forEach((function(n){var r=t[e][1].indexOf(n);r>-1&&t[e][1].splice(r,1)})),t[e][0].length=0),1===t[e]||t[e][0].length||t[e][1].length||(t[e]=1)})),t}(e),r=function(){var e;try{e=window.top}catch(t){e=window}return{screenWidth:e.screen.width,screenHeight:e.screen.height,innerWidth:e.innerWidth,innerHeight:e.innerHeight}}(),i=function(){if(!window.top)return null;var e,t=new URLSearchParams(window.top.location.search);return function(e){return 0===Object.keys(e).length?null:e}((e={ggAdbuyid:t.get("gg_adbuyid"),ggDealid:t.get("gg_dealid"),ggEadbuyid:t.get("gg_eadbuyid")},Object.fromEntries(Object.entries(e).filter((function(e){var t=o(e,2);return t[0],null!=t[1]})))))}(),a={zone:e.map((function(e){return parseInt(e.params.zone)})).filter((function(e,t,n){return n.indexOf(e)===t})),referer:t.refererInfo.page,sw:r.screenWidth,sh:r.screenHeight,ww:r.innerWidth,wh:r.innerHeight,c:n,id:e[0].params.zone,sizes:{},ggExt:i};e.forEach((function(e){var t=e.params.zone,n=a.sizes;n[t]=n[t]||[],n[t].push.apply(n[t],e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes)})),A(e[0],"userId.pubcid")?a.pubcid=A(e[0],"userId.pubcid"):A(e[0],"crumbs.pubcid")&&(a.pubcid=A(e[0],"crumbs.pubcid")),a.uids=e[0].userId,t&&t.gdprConsent&&(a.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies}),t&&t.uspConsent&&(a.us_privacy=t.uspConsent),a.version={prebid:"9.10.0",jp_adapter:"1.8.3"},e[0].schain&&(a.schain=e[0].schain);var s=JSON.stringify(a);return{method:"POST",url:"https://pre.ads.justpremium.com/v/2.0/t/xhr?i="+ +new Date,data:s,bids:e}},interpretResponse:function(e,t){var n=e.body,r=[];return t.bids.forEach((function(e){var t=function(e,t){var n=e.zone;if(t[n])for(var r=t[n].length;r--;)if(Sf(e,t[n][r]))return t[n].splice(r,1).pop();return!1}(e.params,n.bid);if(t){var i=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes&&e.mediaTypes.banner.sizes.length&&e.mediaTypes.banner.sizes[0]||[],o={requestId:e.bidId,creativeId:t.id,width:i[0]||t.width,height:i[1]||t.height,ad:t.adm,cpm:t.price,netRevenue:!0,currency:t.currency||"USD",ttl:t.ttl||wf.time,format:t.format,meta:{advertiserDomains:t.adomain&&t.adomain.length>0?t.adomain:[]}};t.ext&&t.ext.pg&&(o.adserverTargeting={hb_deal_justpremium:"jp_pg"}),r.push(o)}})),r},getUserSyncs:function(e,t,n,r){var i="https://pre.ads.justpremium.com/v/1.0/t/sync?_c=a"+Math.random().toString(36).substring(7)+Date.now(),o=[];if(n&&"boolean"==typeof n.gdprApplies&&n.gdprApplies&&n.consentString&&(i=i+"&consentString="+encodeURIComponent(n.consentString)),r&&(i=i+"&usPrivacy="+encodeURIComponent(r)),e.iframeEnabled&&o.push({type:"iframe",url:i}),e.pixelEnabled&&0!==t.length){var a=t.map((function(e){var t;return null==e||null===(t=e.body)||void 0===t?void 0:t.pxs})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0!==e}));o=[].concat(h(o),h(a))}return o}};function Sf(e,t){var n=t.format;return e.allow&&e.allow.length?e.allow.indexOf(n)>-1:!e.exclude||!e.exclude.length||e.exclude.indexOf(n)<0}Zr(wf),p("justpremiumBidAdapter");var Tf,If,kf,Af=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[Vo,Fo]}),Ef=Mo({bidderCode:Af.CODE}),Cf=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),xf=Object.freeze({USER_DATA:"ortb2.user.data",SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),Of=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),Pf=[Of.BROWSERS,Of.MOBILE,Of.MODEL,Of.SOURCE,Of.PLATFORM],Df=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function Rf(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function jf(){return Tf||(Tf=Rf()),Tf}function Mf(e){try{return Ef.getDataFromLocalStorage(e)}catch(e){return null}}function Nf(e,t,n,r,i){var o=Uf._getCrb(),a={crbIDs:o.syncIds||{}};if(!e&&o.tdID?a.tdID=o.tdID:e&&(a.tdID=e),t&&(a.usp=t),n&&(a.gdpr={consent:n.consentString||"",applies:!!n.gdprApplies}),null!=o.lexId&&(a.kargoID=o.lexId),null!=o.clientId&&(a.clientID=o.clientId),null!=o.optOut&&(a.optOut=o.optOut),null!=r&&(a.sharedIDEids=r),i){var s={};i.consentString&&(s.gppString=i.consentString),i.applicableSections&&(s.applicableSections=i.applicableSections),ut(s)||(a.gpp=s)}return a}var Uf={gvlid:Af.GVLID,code:Af.CODE,isBidRequestValid:function(e){return!(!e||!e.params||!e.params.placementId)},buildRequests:function(e,t){var n,r,i=Z.getConfig(Cf.KEY),o=i&&i.adServerCurrency?i.adServerCurrency:null,s=[];ht(e,(function(e){s.push(function(e){var t,n,r={id:e.bidId,tid:null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid,pid:e.params.placementId,code:e.adUnitCode};e.bidRequestsCount>0&&(r.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(r.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(r.bidderWinCount=e.bidderWinsCount);var i=A(e,"ortb2Imp.ext.gpid")||A(e,"ortb2Imp.ext.data.pbadslot");if(i&&(r.fpd={gpid:i}),e.ortb2Imp&&(r.ext={ortb2Imp:e.ortb2Imp}),e.mediaTypes){var o=e.mediaTypes,s=o.banner,d=o.video,l=o.native;if(s&&(r.banner=s),d&&(r.video=d),l&&(r.native=l),"function"==typeof e.getFloor){var c;try{c=e.getFloor({currency:"USD",mediaType:"*",size:"*"})}catch(e){Ke("Kargo: getFloor threw an error: ",e)}r.floor="object"!==a(c)||"USD"!==c.currency||isNaN(parseInt(c.floor))?void 0:c.floor}}return r}(e))}));var d,l,c,u=e[0],p=A(u,xf.TDID_ADAPTER),h=function(e){var t;return{pageURL:null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.page,rawCRB:Ef.getCookie(Df.KEY),rawCRBLocalStorage:Mf(Df.KEY)}}(t),f=Object.assign({},{pbv:"9.10.0",aid:u.auctionId,sid:jf(),url:h.pageURL,timeout:t.timeout,ts:(new Date).getTime(),device:{size:[window.screen.width,window.screen.height]},imp:s,user:Nf(p,t.uspConsent,t.gdprConsent,u.userIdAsEids,t.gppConsent),ext:(d=u.ortb2,l=null==t?void 0:t.refererInfo,c={},d&&(c.ortb2=d),l&&(c.refererInfo=l),c)});null!=(null===(n=u.ortb2)||void 0===n||null===(r=n.site)||void 0===r?void 0:r.cat)&&(f.site={cat:u.ortb2.site.cat}),u.schain&&u.schain.nodes&&(f.schain=u.schain),f.user.data=A(u,xf.USER_DATA)||[];var g=If===window.location.pathname?++kf:(If=window.location.pathname,kf=0);null!=g&&(f.requestCount=g),null!=o&&o!=Cf.US_DOLLAR&&(f.cur=o),null!=h.rawCRB&&(f.rawCRB=h.rawCRB),null!=h.rawCRBLocalStorage&&(f.rawCRBLocalStorage=h.rawCRBLocalStorage);var m=A(u,xf.SOCIAL_CANVAS);null!=m&&(f.socan=m);var v=A(u,xf.SUA);if(v){var y=[];Pf.forEach((function(e){var t=v[e];if(t&&("string"!=typeof t||""!==t.trim()))switch(e){case Of.MOBILE&&t<1:case Of.SOURCE&&t<1:break;default:y.push(e)}})),f.device.sua=Ft(v,y)}var b=null!=Mf(Df.PAGE_VIEW_ID),_=null!=Mf(Df.PAGE_VIEW_TIMESTAMP),w=null!=Mf(Df.PAGE_VIEW_URL),S={};return b&&(S.id=Mf(Df.PAGE_VIEW_ID)),_&&(S.timestamp=Number(Mf(Df.PAGE_VIEW_TIMESTAMP))),w&&(S.url=Mf(Df.PAGE_VIEW_URL)),ut(S)||(f.page=S),f.ext&&0===Object.keys(f.ext).length&&delete f.ext,Object.assign({},t,{method:Af.REQUEST_METHOD,url:"https://".concat(Af.HOST).concat(Af.REQUEST_ENDPOINT),data:f,currency:o})},interpretResponse:function(e,t){var n=e.body,r=[],i=[];if(ut(n)||"object"!==a(n))return i;for(var s=0,d=Object.entries(n);s<d.length;s++){var l,c=o(d[s],2),u=c[0],p=c[1],h={mediaType:p.mediaType&&Af.SUPPORTED_MEDIA_TYPES.includes(p.mediaType)?p.mediaType:Vo};null!==(l=p.metadata)&&void 0!==l&&l.landingPageDomain&&(h.clickUrl=p.metadata.landingPageDomain[0],h.advertiserDomains=p.metadata.landingPageDomain);var f={requestId:u,cpm:Number(p.cpm),width:p.width,height:p.height,ttl:300,creativeId:p.creativeID,dealId:p.targetingCustom,netRevenue:!0,currency:p.currency||t.currency,mediaType:h.mediaType,meta:h};h.mediaType==Fo?p.admUrl?f.vastUrl=p.admUrl:f.vastXml=p.adm:f.ad=p.adm,i.push(f),p.auctionConfig&&r.push({bidId:u,config:p.auctionConfig})}return r.length>0?{bids:i,paapi:r}:i},getUserSyncs:function(e,t,n,r,i){var o=[],a=Rf(),s=Uf._getCrb().clientId,d=n&&n.gdprApplies?1:0,l=n&&n.consentString?n.consentString:"",c=i&&i.consentString?i.consentString:"",u=i&&i.applicableSections&&Array.isArray(i.applicableSections)?i.applicableSections.join(","):"";return"string"==typeof r&&4==r.length&&1==r[0]&&"Y"==r[2]||e.iframeEnabled&&a&&s&&o.push({type:"iframe",url:Df.SYNC_URL.replace("{UUID}",s).replace("{SEED}",a).replace("{GDPR}",d).replace("{GDPR_CONSENT}",l).replace("{US_PRIVACY}",r||"").replace("{GPP_STRING}",c).replace("{GPP_SID}",u)}),o},supportedMediaTypes:Af.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach((function(e){!function(e,t){var n={aid:e,ato:t};try{vt(Ht({protocol:"https",hostname:Af.HOST,pathname:Af.TIMEOUT_ENDPOINT,search:n}))}catch(e){}}(e.auctionId,e.timeout)}))},_getCrb:function(){var e=function(){try{return JSON.parse(atob(Mf(Df.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{var e=JSON.parse(Ef.getCookie(Df.KEY));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:jf};Zr(Uf),p("kargoBidAdapter");var Lf,Bf={ajax:sn},qf=Object.values(x).filter((function(e){return e!==x.AUCTION_DEBUG}));function Ff(e){var t,n,r,i,s,d=e.url,l=e.analyticsType,c=e.global,u=e.handler,p=[],h=!1,f=(i=!1,s=function(){if(!i){i=!0;try{for(var e=0,t=0;p.length>0;){e++;var r=p.length;if(p.shift()(),p.length>=r?t++:t=0,t>=10)return Ke("Detected probable infinite loop, discarding events",p),void(p.length=0)}Ge("".concat(n," analytics: processed ").concat(e," events"))}finally{i=!1}}},function(){null!=r&&(clearTimeout(r),r=null),r=setTimeout(s,100)});return Object.defineProperties({track:function(e){var t=e.eventType,n=e.args;"bundle"===this.getAdapterType()&&window[c](u,t,n),"endpoint"===this.getAdapterType()&&g.apply(void 0,arguments)},enqueue:m,enableAnalytics:v,disableAnalytics:function(){Object.entries(t||{}).forEach((function(e){var t=o(e,2),n=t[0],r=t[1];Pr(n,r)})),this.enableAnalytics=this._oldEnable?this._oldEnable:v,h=!1},getAdapterType:function(){return l},getGlobal:function(){return c},getHandler:function(){return u},getUrl:function(){return d}},{enabled:{get:function(){return h}}});function g(e){var t=e.eventType,n=e.args,r=e.callback;Bf.ajax(d,r,JSON.stringify({eventType:t,args:n}))}function m(e){var t=this,n=e.eventType,r=e.args;p.push((function(){t.track({eventType:n,args:r})})),f()}function v(e){var r=this;n=null==e?void 0:e.provider;var i,o,s,d,l,u=this;if("object"!==a(e)||"object"!==a(e.options)||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)){var p=(o=(i=e||{}).includeEvents,s=void 0===o?qf:o,d=i.excludeEvents,l=void 0===d?[]:d,new Set(Object.values(x).filter((function(e){return s.includes(e)})).filter((function(e){return!l.includes(e)}))));Dr().forEach((function(e){if(e&&p.has(e.eventType)){var t=e.eventType,n=e.args;m.call(u,{eventType:t,args:n})}})),t=Object.fromEntries(Array.from(p).map((function(e){var t=function(t){return r.enqueue({eventType:e,args:t})};return Or(e,t),[e,t]})))}else Ge('Analytics adapter for "'.concat(c,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return Ge('Analytics adapter for "'.concat(c,'" already enabled, unnecessary call to `enableAnalytics`.'))},h=!0}}var Vf=(d(Lf={},x.AUCTION_INIT,$f),d(Lf,x.AUCTION_END,$f),d(Lf,x.BID_REQUESTED,(function(e){return{bidderCode:e.bidderCode,time:e.start,bids:e.bids.map((function(e){return{transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId,startTime:e.startTime,sizes:Be(e.sizes).toString(),params:e.params}}))}})),d(Lf,x.BID_TIMEOUT,(function(e){return e.map((function(e){return e.bidder})).filter(wt)})),d(Lf,x.BID_RESPONSE,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.bidId,requestId:e.requestId,creativeId:e.creativeId}})),d(Lf,x.BID_WON,(function(e){return{adId:e.adId,bidderCode:e.bidder,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.requestId,dealId:e.dealId,status:e.status,creativeId:e.creativeId}})),d(Lf,x.NO_BID,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId}})),Lf);var zf=Object.assign(Ff({analyticsType:"endpoint"}),{track:function(e){var t,n,r=e.eventType,i=e.args;if(x.AUCTION_INIT===r&&zf.context.aggregatedEvents.splice(0),Vf[r]&&zf.context.aggregatedEvents.push({eventType:r,data:Vf[r](i)}),r===x.AUCTION_END){if(!zf.context.aggregatedEvents.filter((function(e){return e.eventType===x.BID_WON}))[0]&&Us.getWinningBids()[0]){var o=Vf[x.BID_WON](Us.getWinningBids()[0]);zf.context.aggregatedEvents.push({eventType:x.BID_WON,data:o})}!function(e){var t=e.host,n=e.method,r=e.payload,i={protocol:"https",hostname:void 0===t?"tracker.konduit.me":t,pathname:e.path};"GET"===n&&(i.search=r);var o,a,s=((o=i).protocol||"http")+"://"+(o.host||o.hostname+(o.port?":".concat(o.port):""))+(o.pathname||"")+(o.search?"?".concat((a=o.search||"",Object.keys(a).map((function(e){return Array.isArray(a[e])?a[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(a[e])})).join("&"))):"")+(o.hash?"#".concat(o.hash):"");sn(s,void 0,"POST"===n?JSON.stringify(r):null,{contentType:"application/json",method:n,withCredentials:!0})}({method:"POST",path:"/analytics-initial-event",payload:(t=Z.getConfig("konduit.konduitId"),n=window.screen,{konduitId:t,prebidVersion:"9.10.0",konduitPrebidModuleVersion:"1.0.0",environment:{screen:{width:n.width,height:n.height},language:navigator.language},events:zf.context.aggregatedEvents})})}}});function $f(e){return{auctionId:e.auctionId,timestamp:e.timestamp,auctionEnd:e.auctionEnd,auctionStatus:e.auctionStatus,adUnitCodes:e.adUnitCodes,labels:e.labels,timeout:e.timeout}}zf.originEnableAnalytics=zf.enableAnalytics,zf.enableAnalytics=function(e){Z.getConfig("konduit.konduitId")?(zf.context={aggregatedEvents:[]},zf.originEnableAnalytics(e)):Ke("A konduitId in config is required to use konduitAnalyticsAdapter")},Co.registerAnalyticsAdapter({adapter:zf,code:"konduit"}),p("konduitAnalyticsAdapter");var Wf=u(),Hf="Konduit",Gf="enableSendAllBids",Xf="A konduitId param is required to be in configs",Jf="No bids received in the auction";function Kf(e){return(e=[].slice.call(e)).unshift("".concat(Hf,": ")),e}function Yf(){Ke.apply(void 0,h(Kf(arguments)))}!function(e,t){Wf.adServers=Wf.adServers||{},Wf.adServers[e]=Wf.adServers[e]||{},Object.keys(t).forEach((function(n){Wf.adServers[e][n]?Je("Attempting to add an already registered function property ".concat(n," for AdServer ").concat(e,".")):Wf.adServers[e][n]=t[n]}))}("konduit",{processBids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Z.getConfig("konduit.konduitId");if(e=e||{},!t)return Yf(Xf),e.callback&&e.callback(new Error(Xf),[]),null;var n=e.bids||wa.getBidsReceived(),r=e.bid||Us.getWinningBids(e.adUnitCode,n)[0],i=[];if(Z.getConfig(Gf)?i.push.apply(i,h(n)):r&&i.push(r),!i.length)return Yf(Jf),e.callback&&e.callback(new Error(Jf),[]),null;var o=Z.getConfig("priceGranularity"),a=[];i.forEach((function(e){!function(e,t,n){e.kCpm=e.cpm,e.adserverTargeting||(e.adserverTargeting={});var r=oa(n)(e);Z.getConfig(Gf)&&(e.adserverTargeting["k_cpm_".concat(e.bidderCode)]=r),t.bidderCode===e.bidderCode&&t.creativeId===e.creativeId&&(e.adserverTargeting.k_cpm=r)}(e,r,o),a.push(function(e){return{auctionId:e.auctionId,vastUrl:e.vastUrl,bidderCode:e.bidderCode,creativeId:e.creativeId,adUnitCode:e.adUnitCode,cpm:e.cpm,currency:e.currency}}(e))})),function(e){var t=e.host,n=e.protocol,r=e.method,i=void 0===r?"GET":r,o=e.payload,a=e.callbacks,s=e.timeout,d={protocol:void 0===n?"https":n,hostname:void 0===t?"p.konduit.me":t,pathname:e.path};"GET"===i&&(d.search=o);var l,c,u=((l=d).protocol||"http")+"://"+(l.host||l.hostname+(l.port?":".concat(l.port):""))+(l.pathname||"")+(l.search?"?".concat((c=l.search||"",Object.keys(c).map((function(e){return Array.isArray(c[e])?c[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(c[e])})).join("&"))):"")+(l.hash?"#".concat(l.hash):"");an(s)(u,a,"POST"===i?JSON.stringify(o):null,{contentType:"application/json",method:i,withCredentials:!0})}({method:"POST",path:"/api/bidsProcessor",timeout:e.timeout||1e3,payload:{clientId:t,konduitPrebidModuleVersion:"1.0.0",enableSendAllBids:Z.getConfig(Gf),bids:a,bidResponsesCount:wa.getBidsReceived().length},callbacks:{success:function(n){var a=null;!function(){Xe.apply(void 0,h(Kf(arguments)))}("Bids processed successfully ",n);try{var s=JSON.parse(n),d=s.kCpmData,l=s.cacheData;if(ut(l))throw new Error("A bid was not cached");r.adserverTargeting.konduit_id=t,r.adserverTargeting.k_id=t,i.forEach((function(e){var t="".concat(e.bidderCode,":").concat(e.creativeId);!function(e,t,n,r){if(dt(e)){t.kCpm=e;var i=S(e,Z.getConfig("customPriceBucket"),Z.getConfig("currency.granularityMultiplier")),o=i.custom||i[r]||i.med;Z.getConfig(Gf)&&(t.adserverTargeting["k_cpm_".concat(t.bidderCode)]=o),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cpm=o)}}(d[t],e,r,o),function(e,t,n){at(e)&&(t.konduitCacheKey=e,Z.getConfig(Gf)&&(t.adserverTargeting["k_cache_key_".concat(t.bidderCode)]=e),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cache_key=e,t.adserverTargeting.konduit_cache_key=e))}(l[t],e,r)}))}catch(e){a=e,Yf("Error parsing JSON response for bidsProcessor data: ",e)}e.callback&&e.callback(a,i)},error:function(t){Yf("Bids were not processed successfully ",t),e.callback&&e.callback(at(t)?new Error(t):t,i)}}})}}),p("konduitWrapper");var Qf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Zf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eg={exports:{}},tg=function(e){return e&&e.Math===Math&&e},ng=tg("object"==typeof globalThis&&globalThis)||tg("object"==typeof window&&window)||tg("object"==typeof self&&self)||tg("object"==typeof Qf&&Qf)||tg("object"==typeof Qf&&Qf)||function(){return this}()||Function("return this")(),rg=function(e){try{return!!e()}catch(e){return!0}},ig=!rg((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),og=ig,ag=Function.prototype,sg=ag.apply,dg=ag.call,lg="object"==typeof Reflect&&Reflect.apply||(og?dg.bind(sg):function(){return dg.apply(sg,arguments)}),cg=ig,ug=Function.prototype,pg=ug.call,hg=cg&&ug.bind.bind(pg,pg),fg=cg?hg:function(e){return function(){return pg.apply(e,arguments)}},gg=fg,mg=gg({}.toString),vg=gg("".slice),yg=function(e){return vg(mg(e),8,-1)},bg=yg,_g=fg,wg=function(e){if("Function"===bg(e))return _g(e)},Sg="object"==typeof document&&document.all,Tg=void 0===Sg&&void 0!==Sg?function(e){return"function"==typeof e||e===Sg}:function(e){return"function"==typeof e},Ig={},kg=!rg((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),Ag=ig,Eg=Function.prototype.call,Cg=Ag?Eg.bind(Eg):function(){return Eg.apply(Eg,arguments)},xg={},Og={}.propertyIsEnumerable,Pg=Object.getOwnPropertyDescriptor,Dg=Pg&&!Og.call({1:2},1);xg.f=Dg?function(e){var t=Pg(this,e);return!!t&&t.enumerable}:Og;var Rg,jg,Mg=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ng=rg,Ug=yg,Lg=Object,Bg=fg("".split),qg=Ng((function(){return!Lg("z").propertyIsEnumerable(0)}))?function(e){return"String"===Ug(e)?Bg(e,""):Lg(e)}:Lg,Fg=function(e){return null==e},Vg=Fg,zg=TypeError,$g=function(e){if(Vg(e))throw new zg("Can't call method on "+e);return e},Wg=qg,Hg=$g,Gg=function(e){return Wg(Hg(e))},Xg=Tg,Jg=function(e){return"object"==typeof e?null!==e:Xg(e)},Kg={},Yg=Kg,Qg=ng,Zg=Tg,em=function(e){return Zg(e)?e:void 0},tm=function(e,t){return arguments.length<2?em(Yg[e])||em(Qg[e]):Yg[e]&&Yg[e][t]||Qg[e]&&Qg[e][t]},nm=fg({}.isPrototypeOf),rm=ng,im="undefined"!=typeof navigator&&String(navigator.userAgent)||"",om=rm.process,am=rm.Deno,sm=om&&om.versions||am&&am.version,dm=sm&&sm.v8;dm&&(jg=(Rg=dm.split("."))[0]>0&&Rg[0]<4?1:+(Rg[0]+Rg[1])),!jg&&im&&(!(Rg=im.match(/Edge\/(\d+)/))||Rg[1]>=74)&&(Rg=im.match(/Chrome\/(\d+)/))&&(jg=+Rg[1]);var lm=jg,cm=lm,um=rg,pm=ng.String,hm=!!Object.getOwnPropertySymbols&&!um((function(){var e=Symbol("symbol detection");return!pm(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&cm&&cm<41})),fm=hm&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,gm=tm,mm=Tg,vm=nm,ym=Object,bm=fm?function(e){return"symbol"==typeof e}:function(e){var t=gm("Symbol");return mm(t)&&vm(t.prototype,ym(e))},_m=String,wm=function(e){try{return _m(e)}catch(e){return"Object"}},Sm=Tg,Tm=wm,Im=TypeError,km=function(e){if(Sm(e))return e;throw new Im(Tm(e)+" is not a function")},Am=km,Em=Fg,Cm=Cg,xm=Tg,Om=Jg,Pm=TypeError,Dm={exports:{}},Rm=ng,jm=Object.defineProperty,Mm=ng,Nm="__core-js_shared__",Um=Dm.exports=Mm[Nm]||function(e,t){try{jm(Rm,e,{value:t,configurable:!0,writable:!0})}catch(n){Rm[e]=t}return t}(Nm,{});(Um.versions||(Um.versions=[])).push({version:"3.37.0",mode:"pure",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Lm=Dm.exports,Bm=Lm,qm=function(e,t){return Bm[e]||(Bm[e]=t||{})},Fm=$g,Vm=Object,zm=function(e){return Vm(Fm(e))},$m=zm,Wm=fg({}.hasOwnProperty),Hm=Object.hasOwn||function(e,t){return Wm($m(e),t)},Gm=fg,Xm=0,Jm=Math.random(),Km=Gm(1..toString),Ym=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Km(++Xm+Jm,36)},Qm=qm,Zm=Hm,ev=Ym,tv=hm,nv=fm,rv=ng.Symbol,iv=Qm("wks"),ov=nv?rv.for||rv:rv&&rv.withoutSetter||ev,av=function(e){return Zm(iv,e)||(iv[e]=tv&&Zm(rv,e)?rv[e]:ov("Symbol."+e)),iv[e]},sv=Cg,dv=Jg,lv=bm,cv=TypeError,uv=av("toPrimitive"),pv=function(e,t){if(!dv(e)||lv(e))return e;var n,r,i=(r=e[uv],Em(r)?void 0:Am(r));if(i){if(void 0===t&&(t="default"),n=sv(i,e,t),!dv(n)||lv(n))return n;throw new cv("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&xm(n=e.toString)&&!Om(r=Cm(n,e)))return r;if(xm(n=e.valueOf)&&!Om(r=Cm(n,e)))return r;if("string"!==t&&xm(n=e.toString)&&!Om(r=Cm(n,e)))return r;throw new Pm("Can't convert object to primitive value")}(e,t)},hv=bm,fv=function(e){var t=pv(e,"string");return hv(t)?t:t+""},gv=Jg,mv=ng.document,vv=gv(mv)&&gv(mv.createElement),yv=function(e){return vv?mv.createElement(e):{}},bv=yv,_v=!kg&&!rg((function(){return 7!==Object.defineProperty(bv("div"),"a",{get:function(){return 7}}).a})),wv=kg,Sv=Cg,Tv=xg,Iv=Mg,kv=Gg,Av=fv,Ev=Hm,Cv=_v,xv=Object.getOwnPropertyDescriptor;Ig.f=wv?xv:function(e,t){if(e=kv(e),t=Av(t),Cv)try{return xv(e,t)}catch(e){}if(Ev(e,t))return Iv(!Sv(Tv.f,e,t),e[t])};var Ov=rg,Pv=Tg,Dv=/#|\.prototype\./,Rv=function(e,t){var n=Mv[jv(e)];return n===Uv||n!==Nv&&(Pv(t)?Ov(t):!!t)},jv=Rv.normalize=function(e){return String(e).replace(Dv,".").toLowerCase()},Mv=Rv.data={},Nv=Rv.NATIVE="N",Uv=Rv.POLYFILL="P",Lv=Rv,Bv=km,qv=ig,Fv=wg(wg.bind),Vv=function(e,t){return Bv(e),void 0===t?e:qv?Fv(e,t):function(){return e.apply(t,arguments)}},zv={},$v=kg&&rg((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Wv=Jg,Hv=String,Gv=TypeError,Xv=function(e){if(Wv(e))return e;throw new Gv(Hv(e)+" is not an object")},Jv=kg,Kv=_v,Yv=$v,Qv=Xv,Zv=fv,ey=TypeError,ty=Object.defineProperty,ny=Object.getOwnPropertyDescriptor,ry="enumerable",iy="configurable",oy="writable";zv.f=Jv?Yv?function(e,t,n){if(Qv(e),t=Zv(t),Qv(n),"function"==typeof e&&"prototype"===t&&"value"in n&&oy in n&&!n[oy]){var r=ny(e,t);r&&r[oy]&&(e[t]=n.value,n={configurable:iy in n?n[iy]:r[iy],enumerable:ry in n?n[ry]:r[ry],writable:!1})}return ty(e,t,n)}:ty:function(e,t,n){if(Qv(e),t=Zv(t),Qv(n),Kv)try{return ty(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new ey("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var ay=zv,sy=Mg,dy=kg?function(e,t,n){return ay.f(e,t,sy(1,n))}:function(e,t,n){return e[t]=n,e},ly=ng,cy=lg,uy=wg,py=Tg,hy=Ig.f,fy=Lv,gy=Kg,my=Vv,vy=dy,yy=Hm,by=function(e){var t=function(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return cy(e,this,arguments)};return t.prototype=e.prototype,t},_y=function(e,t){var n,r,i,o,a,s,d,l,c,u=e.target,p=e.global,h=e.stat,f=e.proto,g=p?ly:h?ly[u]:ly[u]&&ly[u].prototype,m=p?gy:gy[u]||vy(gy,u,{})[u],v=m.prototype;for(o in t)r=!(n=fy(p?o:u+(h?".":"#")+o,e.forced))&&g&&yy(g,o),s=m[o],r&&(d=e.dontCallGetSet?(c=hy(g,o))&&c.value:g[o]),a=r&&d?d:t[o],(n||f||typeof s!=typeof a)&&(l=e.bind&&r?my(a,ly):e.wrap&&r?by(a):f&&py(a)?uy(a):a,(e.sham||a&&a.sham||s&&s.sham)&&vy(l,"sham",!0),vy(m,o,l),f&&(yy(gy,i=u+"Prototype")||vy(gy,i,{}),vy(gy[i],o,a),e.real&&v&&(n||!v[o])&&vy(v,o,a)))},wy=_y,Sy=kg,Ty=zv.f;wy({target:"Object",stat:!0,forced:Object.defineProperty!==Ty,sham:!Sy},{defineProperty:Ty});var Iy=Kg.Object,ky=eg.exports=function(e,t,n){return Iy.defineProperty(e,t,n)};Iy.defineProperty.sham&&(ky.sham=!0);var Ay=Zf(eg.exports),Ey=yg,Cy=Array.isArray||function(e){return"Array"===Ey(e)},xy=Math.ceil,Oy=Math.floor,Py=Math.trunc||function(e){var t=+e;return(t>0?Oy:xy)(t)},Dy=Py,Ry=function(e){var t=+e;return t!=t||0===t?0:Dy(t)},jy=Ry,My=Math.min,Ny=function(e){return t=e.length,(n=jy(t))>0?My(n,9007199254740991):0;var t,n},Uy=TypeError,Ly=kg,By=zv,qy=Mg,Fy={};Fy[av("toStringTag")]="z";var Vy="[object z]"===String(Fy),zy=Vy,$y=Tg,Wy=yg,Hy=av("toStringTag"),Gy=Object,Xy="Arguments"===Wy(function(){return arguments}()),Jy=zy?Wy:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Gy(e),Hy))?n:Xy?Wy(t):"Object"===(r=Wy(t))&&$y(t.callee)?"Arguments":r},Ky=Tg,Yy=Lm,Qy=fg(Function.toString);Ky(Yy.inspectSource)||(Yy.inspectSource=function(e){return Qy(e)});var Zy=Yy.inspectSource,eb=fg,tb=rg,nb=Tg,rb=Jy,ib=Zy,ob=function(){},ab=tm("Reflect","construct"),sb=/^\s*(?:class|function)\b/,db=eb(sb.exec),lb=!sb.test(ob),cb=function(e){if(!nb(e))return!1;try{return ab(ob,[],e),!0}catch(e){return!1}},ub=function(e){if(!nb(e))return!1;switch(rb(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return lb||!!db(sb,ib(e))}catch(e){return!0}};ub.sham=!0;var pb,hb=!ab||tb((function(){var e;return cb(cb.call)||!cb(Object)||!cb((function(){e=!0}))||e}))?ub:cb,fb=Cy,gb=hb,mb=Jg,vb=av("species"),yb=Array,bb=function(e,t){return new(function(e){var t;return fb(e)&&(t=e.constructor,(gb(t)&&(t===yb||fb(t.prototype))||mb(t)&&null===(t=t[vb]))&&(t=void 0)),void 0===t?yb:t}(e))(0===t?0:t)},_b=rg,wb=lm,Sb=av("species"),Tb=_y,Ib=rg,kb=Cy,Ab=Jg,Eb=zm,Cb=Ny,xb=function(e){if(e>9007199254740991)throw Uy("Maximum allowed index exceeded");return e},Ob=function(e,t,n){Ly?By.f(e,t,qy(0,n)):e[t]=n},Pb=bb,Db=lm,Rb=av("isConcatSpreadable"),jb=Db>=51||!Ib((function(){var e=[];return e[Rb]=!1,e.concat()[0]!==e})),Mb=function(e){if(!Ab(e))return!1;var t=e[Rb];return void 0!==t?!!t:kb(e)};Tb({target:"Array",proto:!0,arity:1,forced:!(jb&&(pb="concat",wb>=51||!_b((function(){var e=[];return(e.constructor={})[Sb]=function(){return{foo:1}},1!==e[pb](Boolean).foo}))))},{concat:function(e){var t,n,r,i,o,a=Eb(this),s=Pb(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(Mb(o=-1===t?a:arguments[t]))for(i=Cb(o),xb(d+i),n=0;n<i;n++,d++)n in o&&Ob(s,d,o[n]);else xb(d+1),Ob(s,d++,o);return s.length=d,s}});var Nb=Jy,Ub=String,Lb=function(e){if("Symbol"===Nb(e))throw new TypeError("Cannot convert a Symbol value to a string");return Ub(e)},Bb={},qb=Ry,Fb=Math.max,Vb=Math.min,zb=Gg,$b=Ny,Wb=function(e){return function(t,n,r){var i=zb(t),o=$b(i);if(0===o)return!e&&-1;var a,s=function(e,t){var n=qb(e);return n<0?Fb(n+t,0):Vb(n,t)}(r,o);if(e&&n!=n){for(;o>s;)if((a=i[s++])!=a)return!0}else for(;o>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Hb={includes:Wb(!0),indexOf:Wb(!1)},Gb={},Xb=Hm,Jb=Gg,Kb=Hb.indexOf,Yb=Gb,Qb=fg([].push),Zb=function(e,t){var n,r=Jb(e),i=0,o=[];for(n in r)!Xb(Yb,n)&&Xb(r,n)&&Qb(o,n);for(;t.length>i;)Xb(r,n=t[i++])&&(~Kb(o,n)||Qb(o,n));return o},e_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],t_=Zb,n_=e_,r_=Object.keys||function(e){return t_(e,n_)},i_=kg,o_=$v,a_=zv,s_=Xv,d_=Gg,l_=r_;Bb.f=i_&&!o_?Object.defineProperties:function(e,t){s_(e);for(var n,r=d_(t),i=l_(t),o=i.length,a=0;o>a;)a_.f(e,n=i[a++],r[n]);return e};var c_,u_=tm("document","documentElement"),p_=Ym,h_=qm("keys"),f_=function(e){return h_[e]||(h_[e]=p_(e))},g_=Xv,m_=Bb,v_=e_,y_=Gb,b_=u_,__=yv,w_="prototype",S_="script",T_=f_("IE_PROTO"),I_=function(){},k_=function(e){return"<"+S_+">"+e+"</"+S_+">"},A_=function(e){e.write(k_("")),e.close();var t=e.parentWindow.Object;return e=null,t},E_=function(){try{c_=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;E_="undefined"!=typeof document?document.domain&&c_?A_(c_):(t=__("iframe"),n="java"+S_+":",t.style.display="none",b_.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(k_("document.F=Object")),e.close(),e.F):A_(c_);for(var r=v_.length;r--;)delete E_[w_][v_[r]];return E_()};y_[T_]=!0;var C_=Object.create||function(e,t){var n;return null!==e?(I_[w_]=g_(e),n=new I_,I_[w_]=null,n[T_]=e):n=E_(),void 0===t?n:m_.f(n,t)},x_={},O_=Zb,P_=e_.concat("length","prototype");x_.f=Object.getOwnPropertyNames||function(e){return O_(e,P_)};var D_={},R_=fg([].slice),j_=yg,M_=Gg,N_=x_.f,U_=R_,L_="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];D_.f=function(e){return L_&&"Window"===j_(e)?function(e){try{return N_(e)}catch(e){return U_(L_)}}(e):N_(M_(e))};var B_={};B_.f=Object.getOwnPropertySymbols;var q_=dy,F_=function(e,t,n,r){return r&&r.enumerable?e[t]=n:q_(e,t,n),e},V_=zv,z_={},$_=av;z_.f=$_;var W_,H_,G_,X_=Kg,J_=Hm,K_=z_,Y_=zv.f,Q_=function(e){var t=X_.Symbol||(X_.Symbol={});J_(t,e)||Y_(t,e,{value:K_.f(e)})},Z_=Cg,ew=tm,tw=av,nw=F_,rw=function(){var e=ew("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=tw("toPrimitive");t&&!t[r]&&nw(t,r,(function(e){return Z_(n,this)}),{arity:1})},iw=Jy,ow=Vy?{}.toString:function(){return"[object "+iw(this)+"]"},aw=Vy,sw=zv.f,dw=dy,lw=Hm,cw=ow,uw=av("toStringTag"),pw=function(e,t,n,r){var i=n?e:e&&e.prototype;i&&(lw(i,uw)||sw(i,uw,{configurable:!0,value:t}),r&&!aw&&dw(i,"toString",cw))},hw=Tg,fw=ng.WeakMap,gw=hw(fw)&&/native code/.test(String(fw)),mw=ng,vw=Jg,yw=dy,bw=Hm,_w=Lm,ww=f_,Sw=Gb,Tw="Object already initialized",Iw=mw.TypeError,kw=mw.WeakMap;if(gw||_w.state){var Aw=_w.state||(_w.state=new kw);Aw.get=Aw.get,Aw.has=Aw.has,Aw.set=Aw.set,W_=function(e,t){if(Aw.has(e))throw new Iw(Tw);return t.facade=e,Aw.set(e,t),t},H_=function(e){return Aw.get(e)||{}},G_=function(e){return Aw.has(e)}}else{var Ew=ww("state");Sw[Ew]=!0,W_=function(e,t){if(bw(e,Ew))throw new Iw(Tw);return t.facade=e,yw(e,Ew,t),t},H_=function(e){return bw(e,Ew)?e[Ew]:{}},G_=function(e){return bw(e,Ew)}}var Cw={set:W_,get:H_,has:G_,enforce:function(e){return G_(e)?H_(e):W_(e,{})},getterFor:function(e){return function(t){var n;if(!vw(t)||(n=H_(t)).type!==e)throw new Iw("Incompatible receiver, "+e+" required");return n}}},xw=Vv,Ow=qg,Pw=zm,Dw=Ny,Rw=bb,jw=fg([].push),Mw=function(e){var t=1===e,n=2===e,r=3===e,i=4===e,o=6===e,a=7===e,s=5===e||o;return function(d,l,c,u){for(var p,h,f=Pw(d),g=Ow(f),m=Dw(g),v=xw(l,c),y=0,b=u||Rw,_=t?b(d,m):n||a?b(d,0):void 0;m>y;y++)if((s||y in g)&&(h=v(p=g[y],y,f),e))if(t)_[y]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:jw(_,p)}else switch(e){case 4:return!1;case 7:jw(_,p)}return o?-1:r||i?i:_}},Nw={forEach:Mw(0),map:Mw(1),filter:Mw(2),some:Mw(3),every:Mw(4),find:Mw(5),findIndex:Mw(6),filterReject:Mw(7)},Uw=_y,Lw=ng,Bw=Cg,qw=fg,Fw=kg,Vw=hm,zw=rg,$w=Hm,Ww=nm,Hw=Xv,Gw=Gg,Xw=fv,Jw=Lb,Kw=Mg,Yw=C_,Qw=r_,Zw=x_,eS=D_,tS=B_,nS=Ig,rS=zv,iS=Bb,oS=xg,aS=F_,sS=qm,dS=Gb,lS=Ym,cS=av,uS=z_,pS=Q_,hS=rw,fS=pw,gS=Cw,mS=Nw.forEach,vS=f_("hidden"),yS="Symbol",bS="prototype",_S=gS.set,wS=gS.getterFor(yS),SS=Object[bS],TS=Lw.Symbol,IS=TS&&TS[bS],kS=Lw.RangeError,AS=Lw.TypeError,ES=Lw.QObject,CS=nS.f,xS=rS.f,OS=eS.f,PS=oS.f,DS=qw([].push),RS=sS("symbols"),jS=sS("op-symbols"),MS=sS("wks"),NS=!ES||!ES[bS]||!ES[bS].findChild,US=function(e,t,n){var r=CS(SS,t);r&&delete SS[t],xS(e,t,n),r&&e!==SS&&xS(SS,t,r)},LS=Fw&&zw((function(){return 7!==Yw(xS({},"a",{get:function(){return xS(this,"a",{value:7}).a}})).a}))?US:xS,BS=function(e,t){var n=RS[e]=Yw(IS);return _S(n,{type:yS,tag:e,description:t}),Fw||(n.description=t),n},qS=function(e,t,n){e===SS&&qS(jS,t,n),Hw(e);var r=Xw(t);return Hw(n),$w(RS,r)?(n.enumerable?($w(e,vS)&&e[vS][r]&&(e[vS][r]=!1),n=Yw(n,{enumerable:Kw(0,!1)})):($w(e,vS)||xS(e,vS,Kw(1,Yw(null))),e[vS][r]=!0),LS(e,r,n)):xS(e,r,n)},FS=function(e,t){Hw(e);var n=Gw(t),r=Qw(n).concat(WS(n));return mS(r,(function(t){Fw&&!Bw(VS,n,t)||qS(e,t,n[t])})),e},VS=function(e){var t=Xw(e),n=Bw(PS,this,t);return!(this===SS&&$w(RS,t)&&!$w(jS,t))&&(!(n||!$w(this,t)||!$w(RS,t)||$w(this,vS)&&this[vS][t])||n)},zS=function(e,t){var n=Gw(e),r=Xw(t);if(n!==SS||!$w(RS,r)||$w(jS,r)){var i=CS(n,r);return!i||!$w(RS,r)||$w(n,vS)&&n[vS][r]||(i.enumerable=!0),i}},$S=function(e){var t=OS(Gw(e)),n=[];return mS(t,(function(e){$w(RS,e)||$w(dS,e)||DS(n,e)})),n},WS=function(e){var t=e===SS,n=OS(t?jS:Gw(e)),r=[];return mS(n,(function(e){!$w(RS,e)||t&&!$w(SS,e)||DS(r,RS[e])})),r};Vw||(aS(IS=(TS=function(){if(Ww(IS,this))throw new AS("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Jw(arguments[0]):void 0,t=lS(e),n=function(e){var r=void 0===this?Lw:this;r===SS&&Bw(n,jS,e),$w(r,vS)&&$w(r[vS],t)&&(r[vS][t]=!1);var i=Kw(1,e);try{LS(r,t,i)}catch(e){if(!(e instanceof kS))throw e;US(r,t,i)}};return Fw&&NS&&LS(SS,t,{configurable:!0,set:n}),BS(t,e)})[bS],"toString",(function(){return wS(this).tag})),aS(TS,"withoutSetter",(function(e){return BS(lS(e),e)})),oS.f=VS,rS.f=qS,iS.f=FS,nS.f=zS,Zw.f=eS.f=$S,tS.f=WS,uS.f=function(e){return BS(cS(e),e)},Fw&&function(e,t,n){V_.f(e,t,n)}(IS,"description",{configurable:!0,get:function(){return wS(this).description}})),Uw({global:!0,constructor:!0,wrap:!0,forced:!Vw,sham:!Vw},{Symbol:TS}),mS(Qw(MS),(function(e){pS(e)})),Uw({target:yS,stat:!0,forced:!Vw},{useSetter:function(){NS=!0},useSimple:function(){NS=!1}}),Uw({target:"Object",stat:!0,forced:!Vw,sham:!Fw},{create:function(e,t){return void 0===t?Yw(e):FS(Yw(e),t)},defineProperty:qS,defineProperties:FS,getOwnPropertyDescriptor:zS}),Uw({target:"Object",stat:!0,forced:!Vw},{getOwnPropertyNames:$S}),hS(),fS(TS,yS),dS[vS]=!0;var HS=hm&&!!Symbol.for&&!!Symbol.keyFor,GS=_y,XS=tm,JS=Hm,KS=Lb,YS=qm,QS=HS,ZS=YS("string-to-symbol-registry"),eT=YS("symbol-to-string-registry");GS({target:"Symbol",stat:!0,forced:!QS},{for:function(e){var t=KS(e);if(JS(ZS,t))return ZS[t];var n=XS("Symbol")(t);return ZS[t]=n,eT[n]=t,n}});var tT=_y,nT=Hm,rT=bm,iT=wm,oT=HS,aT=qm("symbol-to-string-registry");tT({target:"Symbol",stat:!0,forced:!oT},{keyFor:function(e){if(!rT(e))throw new TypeError(iT(e)+" is not a symbol");if(nT(aT,e))return aT[e]}});var sT=Cy,dT=Tg,lT=yg,cT=Lb,uT=fg([].push),pT=_y,hT=tm,fT=lg,gT=Cg,mT=fg,vT=rg,yT=Tg,bT=bm,_T=R_,wT=hm,ST=String,TT=hT("JSON","stringify"),IT=mT(/./.exec),kT=mT("".charAt),AT=mT("".charCodeAt),ET=mT("".replace),CT=mT(1..toString),xT=/[\uD800-\uDFFF]/g,OT=/^[\uD800-\uDBFF]$/,PT=/^[\uDC00-\uDFFF]$/,DT=!wT||vT((function(){var e=hT("Symbol")("stringify detection");return"[null]"!==TT([e])||"{}"!==TT({a:e})||"{}"!==TT(Object(e))})),RT=vT((function(){return'"\\udf06\\ud834"'!==TT("\udf06\ud834")||'"\\udead"'!==TT("\udead")})),jT=function(e,t){var n=_T(arguments),r=function(e){if(dT(e))return e;if(sT(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?uT(n,i):"number"!=typeof i&&"Number"!==lT(i)&&"String"!==lT(i)||uT(n,cT(i))}var o=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if(sT(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}}(t);if(yT(r)||void 0!==e&&!bT(e))return n[1]=function(e,t){if(yT(r)&&(t=gT(r,this,ST(e),t)),!bT(t))return t},fT(TT,null,n)},MT=function(e,t,n){var r=kT(n,t-1),i=kT(n,t+1);return IT(OT,e)&&!IT(PT,i)||IT(PT,e)&&!IT(OT,r)?"\\u"+CT(AT(e,0),16):e};TT&&pT({target:"JSON",stat:!0,arity:3,forced:DT||RT},{stringify:function(e,t,n){var r=_T(arguments),i=fT(DT?jT:TT,null,r);return RT&&"string"==typeof i?ET(i,xT,MT):i}});var NT=B_,UT=zm;_y({target:"Object",stat:!0,forced:!hm||rg((function(){NT.f(1)}))},{getOwnPropertySymbols:function(e){var t=NT.f;return t?t(UT(e)):[]}}),Q_("asyncIterator"),Q_("hasInstance"),Q_("isConcatSpreadable"),Q_("iterator"),Q_("match"),Q_("matchAll"),Q_("replace"),Q_("search"),Q_("species"),Q_("split");var LT=rw;Q_("toPrimitive"),LT();var BT=tm,qT=pw;Q_("toStringTag"),qT(BT("Symbol"),"Symbol"),Q_("unscopables"),pw(ng.JSON,"JSON",!0);var FT,VT,zT,$T=Kg.Symbol,WT={},HT=kg,GT=Hm,XT=Function.prototype,JT=HT&&Object.getOwnPropertyDescriptor,KT=GT(XT,"name"),YT={EXISTS:KT,PROPER:KT&&"something"===function(){}.name,CONFIGURABLE:KT&&(!HT||HT&&JT(XT,"name").configurable)},QT=!rg((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ZT=Hm,eI=Tg,tI=zm,nI=QT,rI=f_("IE_PROTO"),iI=Object,oI=iI.prototype,aI=nI?iI.getPrototypeOf:function(e){var t=tI(e);if(ZT(t,rI))return t[rI];var n=t.constructor;return eI(n)&&t instanceof n?n.prototype:t instanceof iI?oI:null},sI=rg,dI=Tg,lI=Jg,cI=C_,uI=aI,pI=F_,hI=av("iterator"),fI=!1;[].keys&&("next"in(zT=[].keys())?(VT=uI(uI(zT)))!==Object.prototype&&(FT=VT):fI=!0);var gI=!lI(FT)||sI((function(){var e={};return FT[hI].call(e)!==e}));dI((FT=gI?{}:cI(FT))[hI])||pI(FT,hI,(function(){return this}));var mI={IteratorPrototype:FT,BUGGY_SAFARI_ITERATORS:fI},vI=mI.IteratorPrototype,yI=C_,bI=Mg,_I=pw,wI=WT,SI=function(){return this},TI=_y,II=Cg,kI=aI,AI=pw,EI=F_,CI=WT,xI=YT.PROPER,OI=mI.BUGGY_SAFARI_ITERATORS,PI=av("iterator"),DI="keys",RI="values",jI="entries",MI=function(){return this},NI=function(e,t,n,r,i,o,a){!function(e,t,n,r){var i=t+" Iterator";e.prototype=yI(vI,{next:bI(+!r,n)}),_I(e,i,!1,!0),wI[i]=SI}(n,t,r);var s,d,l,c=function(e){if(e===i&&g)return g;if(!OI&&e&&e in h)return h[e];switch(e){case DI:case RI:case jI:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",p=!1,h=e.prototype,f=h[PI]||h["@@iterator"]||i&&h[i],g=!OI&&f||c(i),m="Array"===t&&h.entries||f;if(m&&(s=kI(m.call(new e)))!==Object.prototype&&s.next&&(AI(s,u,!0,!0),CI[u]=MI),xI&&i===RI&&f&&f.name!==RI&&(p=!0,g=function(){return II(f,this)}),i)if(d={values:c(RI),keys:o?g:c(DI),entries:c(jI)},a)for(l in d)(OI||p||!(l in h))&&EI(h,l,d[l]);else TI({target:t,proto:!0,forced:OI||p},d);return a&&h[PI]!==g&&EI(h,PI,g,{name:i}),CI[t]=g,d},UI=function(e,t){return{value:e,done:t}},LI=Gg,BI=WT,qI=Cw;zv.f;var FI=NI,VI=UI,zI="Array Iterator",$I=qI.set,WI=qI.getterFor(zI);FI(Array,"Array",(function(e,t){$I(this,{type:zI,target:LI(e),index:0,kind:t})}),(function(){var e=WI(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,VI(void 0,!0);switch(e.kind){case"keys":return VI(n,!1);case"values":return VI(t[n],!1)}return VI([n,t[n]],!1)}),"values"),BI.Arguments=BI.Array;var HI=ng,GI=pw,XI=WT;for(var JI in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})GI(HI[JI],JI),XI[JI]=XI.Array;var KI=$T,YI=av,QI=zv.f,ZI=YI("metadata"),ek=Function.prototype;void 0===ek[ZI]&&QI(ek,ZI,{value:null}),Q_("asyncDispose"),Q_("dispose"),Q_("metadata");var tk=KI,nk=fg,rk=tm("Symbol"),ik=rk.keyFor,ok=nk(rk.prototype.valueOf),ak=rk.isRegisteredSymbol||function(e){try{return void 0!==ik(ok(e))}catch(e){return!1}};_y({target:"Symbol",stat:!0},{isRegisteredSymbol:ak});for(var sk=qm,dk=tm,lk=fg,ck=bm,uk=av,pk=dk("Symbol"),hk=pk.isWellKnownSymbol,fk=dk("Object","getOwnPropertyNames"),gk=lk(pk.prototype.valueOf),mk=sk("wks"),vk=0,yk=fk(pk),bk=yk.length;vk<bk;vk++)try{var _k=yk[vk];ck(pk[_k])&&uk(_k)}catch(e){}var wk=function(e){if(hk&&hk(e))return!0;try{for(var t=gk(e),n=0,r=fk(mk),i=r.length;n<i;n++)if(mk[r[n]]==t)return!0}catch(e){}return!1};_y({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:wk}),Q_("customMatcher"),Q_("observable"),_y({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:ak}),_y({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:wk}),Q_("matcher"),Q_("metadataKey"),Q_("patternMatch"),Q_("replaceAll");var Sk=Zf(tk),Tk=fg,Ik=Ry,kk=Lb,Ak=$g,Ek=Tk("".charAt),Ck=Tk("".charCodeAt),xk=Tk("".slice),Ok=function(e){return function(t,n){var r,i,o=kk(Ak(t)),a=Ik(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=Ck(o,a))<55296||r>56319||a+1===s||(i=Ck(o,a+1))<56320||i>57343?e?Ek(o,a):r:e?xk(o,a,a+2):i-56320+(r-55296<<10)+65536}},Pk=(Ok(!1),Ok(!0)),Dk=Lb,Rk=Cw,jk=NI,Mk=UI,Nk="String Iterator",Uk=Rk.set,Lk=Rk.getterFor(Nk);jk(String,"String",(function(e){Uk(this,{type:Nk,string:Dk(e),index:0})}),(function(){var e,t=Lk(this),n=t.string,r=t.index;return r>=n.length?Mk(void 0,!0):(e=Pk(n,r),t.index+=e.length,Mk(e,!1))}));var Bk=Zf(z_.f("iterator"));function qk(e){return qk="function"==typeof Sk&&"symbol"==typeof Bk?function(e){return typeof e}:function(e){return e&&"function"==typeof Sk&&e.constructor===Sk&&e!==Sk.prototype?"symbol":typeof e},qk(e)}var Fk=Zf(z_.f("toPrimitive"));function Vk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qk(e)||!e)return e;var n=e[Fk];if(void 0!==n){var r=n.call(e,"string");if("object"!=qk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qk(t)?t:t+""}(t))in e?Ay(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zk=new RegExp("^".concat("[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","$"),"i"),$k=!!String.prototype.trim;function Wk(e,t){return null!=e?t(e):e}function Hk(e){return"object"==typeof e?JSON.stringify(e):""+e}function Gk(e){return null!=e}function Xk(e){return!!e&&zk.test(Kk(e))}function Jk(e){return"[object Array]"===Object.prototype.toString.call(e)}function Kk(e){return $k?(""+e).trim():(""+e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function Yk(e){return"string"==typeof e}function Qk(e,t){return Yk(e)&&Yk(t)&&Kk(e.toLowerCase())===Kk(t.toLowerCase())}function Zk(e){return!!e&&"object"==typeof e&&!Jk(e)}function eA(e){return!!e&&"function"==typeof e}function tA(e){return function(e,t){return new Date((new Date).getTime()+864e5*e)}(e)}function nA(e,t,n){if(Zk(t)){let r;return r="message"in t&&"string"==typeof t.message?new Error(n||t.message):new Error(n),r.name=e,"stack"in t&&"string"==typeof t.stack&&(r.stack=t.stack),"lineNumber"in t&&"number"==typeof t.lineNumber&&(r.lineNumber=t.lineNumber),"columnNumber"in t&&"number"==typeof t.columnNumber&&(r.columnNumber=t.columnNumber),r}{const t=Error(n);return t.name=e,t}}const rA="li_errors";class iA{constructor(e){Vk(this,"data",void 0);const t=parseInt(e.toString())||5;this.data={h:{},q:{},size:t}}on(e,t,n){const r={callback:t.bind(n),unbound:t};return this.data={...this.data,h:{...this.data.h,[e]:[...this.data.h[e]||[],r]}},(this.data.q[e]||[]).forEach((e=>t.call(n,e))),this}once(e,t,n){const r=this.data.q[e]||[];if(r.length>0)return t.call(n,r[0]),this;{const r=i=>{this.off(e,r),t.call(n,i)};return r._=t,this.on(e,r,n)}}emit(e,t){(this.data.h[e]||[]).forEach((e=>e.callback(t)));const n=this.data.q[e]||[];return this.data={...this.data,q:{...this.data.q,[e]:[...n.length<this.data.size?n:n.slice(1),t]}},this}off(e,t){const n=this.data.h[e],r=n&&t&&n.filter((e=>e.unbound!==t))||[];if(r.length)this.data={...this.data,h:{...this.data.h,[e]:r}};else{const{[e]:t,...n}=this.data.h;this.data={...this.data,h:n}}return this}emitErrorWithMessage(e,t,n){const r=nA(e,n,t);return this.emit(rA,r)}emitError(e,t){const n=nA(e,t);return this.emit(rA,n)}}class oA{constructor(e){var t,n,r;Vk(this,"url",void 0),Vk(this,"timeout",void 0),Vk(this,"calls",void 0),Vk(this,"eventBus",void 0),Vk(this,"retries",void 0),this.url=null!==(t=e.collectorUrl)&&void 0!==t?t:"https://rp.liadm.com",this.timeout=null!==(n=e.ajaxTimeout)&&void 0!==n?n:0,this.calls=e.callHandler,this.eventBus=e.eventBus,this.retries=null!==(r=e.ajaxRetries)&&void 0!==r?r:3}callBakers(e){try{const t=JSON.parse(e).bakers;if(Jk(t))for(let e=0;e<t.length;e++)this.calls.pixelGet("".concat(t[e],"?dtstmp=").concat(Date.now()))}catch(t){this.eventBus.emitErrorWithMessage("CallBakers","Error while calling bakers with ".concat(e),t)}}sendState(e,t,n,r){if(e.sendsPixel()){r&&eA(r)&&r();const i=e.asQuery().add("dtstmp",Date.now(),{prepend:!0}).toQueryString();n("".concat(this.url,"/").concat(t).concat(i))}}sendAjax(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sendState(e,"j",(n=>{const r=i=>{this.calls.ajaxGet(n,(e=>{t.onLoad&&eA(t.onLoad)&&t.onLoad(),this.callBakers(e)}),(n=>{i<=0?(this.sendPixel(e,t),this.eventBus.emitError("AjaxFailed",n)):r(i-1)}),this.timeout)};r(this.retries)}),t.onPreSend)}sendPixel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sendState(e,"p",(e=>this.calls.pixelGet(e,t.onLoad)),t.onPreSend)}}const aA="__li__evt_bus",sA="lips",dA="pre_lips",lA="_li_duid",cA=[],uA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function pA(e){const t=function(e){e="".concat(e);for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let t="";for(let r=0;r<e.length;r+=3){const i=[void 0,void 0,void 0,void 0];i[0]=e.charCodeAt(r)>>2,i[1]=(3&e.charCodeAt(r))<<4,e.length>r+2?(i[1]|=e.charCodeAt(r+1)>>4,i[2]=(15&e.charCodeAt(r+1))<<2,i[2]|=e.charCodeAt(r+2)>>6,i[3]=63&e.charCodeAt(r+2)):e.length>r+1&&(i[1]|=e.charCodeAt(r+1)>>4,i[2]=(15&e.charCodeAt(r+1))<<2);for(let e=0;e<i.length;e++){const r=i[e];t+=void 0===r?"=":(n=r)>=0&&n<64?uA[n]:void 0}}var n;return t}(e);return t||""}const hA=/[+/]|=+$/g,fA={"+":"-","/":"_"};function gA(e){return fA[e]||""}function mA(e){let t=null;const n=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt("0x"+t,16))));try{t=window&&eA(window.btoa)?window.btoa:pA}catch(e){t=pA}return t(n).replace(hA,gA)}for(var vA=[],yA=0;yA<64;)vA[yA]=0|4294967296*Math.sin(++yA%Math.PI);function bA(e){var t,n,r,i=[t=1732584193,n=4023233417,~t,~n],o=[],a=unescape(encodeURI(e))+"",s=a.length;for(e=--s/4+2|15,o[--e]=8*s;~s;)o[s>>2]|=a.charCodeAt(s)<<8*s--;for(yA=a=0;yA<e;yA+=16){for(s=i;a<64;s=[r=s[3],t+((r=s[0]+[t&n|~t&r,r&t|~r&n,t^n^r,n^(t|~r)][s=a>>4]+vA[a]+~~o[yA|15&[a,5*a+1,3*a+5,7*a][s]])<<(s=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*s+a++%4])|r>>>-s),t,n])t=0|s[1],n=s[2];for(a=4;a;)i[--a]+=s[a]}for(e="";a<32;)e+=(i[a>>3]>>4*(1^a++)&15).toString(16);return e}function _A(e){var t,n,r,i,o,a=[],s=[n=1732584193,r=4023233417,~n,~r,3285377520],d=[],l=unescape(encodeURI(e))+"",c=l.length;for(d[e=--c/4+2|15]=8*c;~c;)d[c>>2]|=l.charCodeAt(c)<<8*~c--;for(t=c=0;t<e;t+=16){for(n=s;c<80;n=[n[4]+(a[c]=c<16?~~d[t+c]:2*l|l<0)+1518500249+[r&i|~r&o,l=341275144+(r^i^o),882459459+(r&i|r&o|i&o),l+1535694389][c++/5>>2]+((l=n[0])<<5|l>>>27),l,r<<30|r>>>2,i,o])l=a[c-3]^a[c-8]^a[c-14]^a[c-16],r=n[1],i=n[2],o=n[3];for(c=5;c;)s[--c]+=n[c]}for(l="";c<40;)l+=(s[c>>3]>>4*(7-c++)&15).toString(16);return l}for(var wA,SA=18,TA=[],IA=[];SA>1;SA--)for(wA=SA;wA<320;)TA[wA+=SA]=1;function kA(e,t){return 4294967296*Math.pow(e,1/t)|0}for(wA=0;wA<64;)TA[++SA]||(IA[wA]=kA(SA,2),TA[wA++]=kA(SA,3));function AA(e,t){return e>>>t|e<<-t}function EA(e){var t=IA.slice(SA=wA=0,8),n=[],r=unescape(encodeURI(e))+"",i=r.length;for(n[e=--i/4+2|15]=8*i;~i;)n[i>>2]|=r.charCodeAt(i)<<8*~i--;for(i=[];SA<e;SA+=16){for(kA=t.slice();wA<64;kA.unshift(r+(AA(r=kA[0],2)^AA(r,13)^AA(r,22))+(r&kA[1]^kA[1]&kA[2]^kA[2]&r)))kA[3]+=r=0|(i[wA]=wA<16?~~n[wA+SA]:(AA(r=i[wA-2],17)^AA(r,19)^r>>>10)+i[wA-7]+(AA(r=i[wA-15],7)^AA(r,18)^r>>>3)+i[wA-16])+kA.pop()+(AA(r=kA[4],6)^AA(r,11)^AA(r,25))+(r&kA[5]^~r&kA[6])+TA[wA++];for(wA=8;wA;)t[--wA]+=kA[wA]}for(r="";wA<64;)r+=(t[wA>>3]>>4*(7-wA++)&15).toString(16);return r}const CA=()=>/(\s+)?[a-f0-9]{32,64}(\s+)?/gi,xA=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function OA(e){const t=PA(e);return!!t&&xA.has(t.length)}function PA(e){const t=e.match(CA());return t&&t.map(Kk)[0]}function DA(e){const t=e.toLowerCase();return{md5:bA(t),sha1:_A(t),sha256:EA(t)}}const RA=()=>/\S+(@|%40)\S+\.\S+/;function jA(e){return RA().test(e)}function MA(e){const t=e.match(RA());return t&&t.map(Kk)[0]}function NA(e){const t=function(e){const t=[],n=new RegExp("([\\w\\d.+-]+(@|%40)[\\w\\d-]+.[\\w\\d.-]+)","g");let r=n.exec(e);for(;r;)t.push(Kk(r[1])),r=n.exec(e);return t}(e),n=[];let r=e;for(let e=0;e<t.length;e++){const i=t[e],o=DA(i);r=r.replace(i,o.md5),n.push(o)}return{stringWithoutRawEmails:r,hashesFromOriginalString:n}}function UA(e,t){return"string"==typeof t&&jA(Kk(t))?"*********":t}function LA(e){return function(e){return"false"!==e&&("true"===e||e)}(function(e){return"null"===e||"undefined"===e?null:e}(function(e){return isNaN(+e)?e:+e}(e)))}function BA(e,t){if(t in e){const n=e[t];return Jk(n)?n.map((e=>LA(FA(e)))):LA(FA(n))}}function qA(e){let t,n,r;const i={};return e&&-1!==(t=e.indexOf("?"))&&(n=e.slice(t+1))&&(-1===(r=n.indexOf("#"))||(n=n.slice(0,r)))?(n.split("&").forEach((function(e){if(e){let t;const n=e.split("=");t=n[0];const r=2===n.length?n[1]:"true";if("[]"===t.slice(-2)&&(t=t.slice(0,-2)),t in i){const e=i[t];Jk(e)?e.push(r):i[t]=[e,r]}else i[t]=r}})),i):i}function FA(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}class VA{constructor(e){Vk(this,"hash",void 0),Vk(this,"host",void 0),Vk(this,"hostname",void 0),Vk(this,"pathname",void 0),Vk(this,"port",void 0),Vk(this,"protocol",void 0),Vk(this,"search",void 0);const t=e.match(/^(https?\:\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(null===t)throw new TypeError("Failed to parse URL: ".concat(e));this.protocol=t[1]||"",this.host=t[2]||"",this.hostname=t[3]||"",this.port=t[4]||"",this.pathname=t[5]||"",this.search=t[6]||"",this.hash=t[7]||""}toString(){return"".concat(this.protocol).concat(this.host).concat(this.pathname).concat(this.search).concat(this.hash)}}const zA=["items","itemids"],$A=["email","emailhash","hash","hashedemail"],WA=[function(e){const t=e.eventSource||{},n=Object.keys(t);for(const r of n){const n=r.toLowerCase();if($A.indexOf(n)>-1){const n=Kk(Hk(t[r])),i=MA(n),o=PA(n);if(i){const t=DA(FA(i));return HA({hashedEmail:[t.md5,t.sha1,t.sha256]},e)}if(o&&OA(o))return HA({hashedEmail:[o.toLowerCase()]},e)}}return e},function(e){const t=e.eventSource||{};return Object.keys(t).forEach((e=>{const n=e.toLowerCase(),r=t[e];zA.indexOf(n)>-1&&Jk(r)&&r.length>10&&(r.length=10)})),{}}];function HA(e,t){const n={};function r(e){return Zk(e)?e:{}}function i(e){return Object.keys(e)}const o=r(e),a=r(t);return i(o).forEach((e=>{n[e]=o[e]})),i(a).forEach((e=>{n[e]=a[e]})),n}class GA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Vk(this,"tuples",void 0),this.tuples=e}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{stripEmpty:r=!0,prepend:i=!1}=n;return""===e||r&&""===t?this:i?(this.tuples.unshift([e,t]),this):(this.tuples.push([e,t]),this)}addOptional(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Gk(t)?this.add(e,t,n):this}addParamsMap(e){return Object.keys(e).forEach((t=>{const n=e[t];Gk(n)&&(Jk(n)?n.forEach((e=>this.add(t,e))):this.add(t,n))})),this}copy(){return new GA(this.tuples.slice())}filteredCopy(e){return new GA(this.tuples.filter((t=>{let[n,r]=t;return e(n,r)})))}toQueryString(){let e="";return this.tuples.forEach((t=>{let[n,r]=t;const i=0===e.length?"?":"&";e="".concat(e).concat(i).concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))})),e}}function XA(e){return null===e?"":e}const JA="full",KA="no_path";function YA(e){if(0!==e.length){const t=new VA(e);return t.pathname="",t.search="",t.toString()}}const QA=["setemail","setemailhash","sethashedemail"];class ZA{constructor(e,t){Vk(this,"data",void 0),Vk(this,"eventBus",void 0),this.data=ZA.safeFiddle(e,t),this.eventBus=t}static safeFiddle(e,t){try{return Zk((n=JSON.parse(JSON.stringify(e))).eventSource)?WA.reduce((function(e,t){return HA(e,t(e))}),n):n}catch(e){return console.error(e),t.emitErrorWithMessage("StateCombineWith","Error while extracting event data",e),{}}var n}combineWith(e){return new ZA(HA(this.data,e),this.eventBus)}sendsPixel(){const e=Zk(this.data.eventSource)?this.data.eventSource:{},t=Object.keys(e).filter((e=>"eventname"===e.toLowerCase()||"event"===e.toLowerCase())),n=t&&t.length>=1&&t[0],r=n&&Kk(e[n]);return!r||-1===QA.indexOf(r.toLowerCase())}asQuery(){var e,t,n;const r=this.data,i=(new GA).addOptional("aid",r.appId).addOptional("did",r.distributorId).addOptional("se",Wk(r.eventSource,(e=>mA(JSON.stringify(e,UA))))).addOptional("duid",r.liveConnectId).addOptional("tv",r.trackerVersion);if(Gk(r.pageUrl)){const[e,t,n]=function(e){if(void 0===e.pageUrl||0===e.pageUrl.length)return["",!1,[]];if(function(e){return!(void 0!==e.urlCollectionMode&&e.urlCollectionMode!==JA||void 0!==e.queryParametersFilter&&""!==e.queryParametersFilter)}(e))return[e.pageUrl,!1,[]];const t=new VA(e.pageUrl),n=function(e){const t=qA(e),n=[];return Object.keys(t).forEach((e=>{n.push([e,BA(t,e)])})),n}(t.search),r=function(e,t){return t.urlCollectionMode===KA&&e.pathname.length>1}(t,e),i=function(e,t){if(void 0===t.queryParametersFilter||""===t.queryParametersFilter)return[];const n=new RegExp(t.queryParametersFilter);return e.map((e=>e[0])).filter((e=>n.test(e)))}(n,e);return r&&(t.pathname="/"),i.length>0&&(t.search=function(e,t){const n=e.filter((e=>-1===t.indexOf(e[0]))).map((e=>"".concat(e[0],"=").concat(e[1])));return n.length>0?"?".concat(n.join("&")):""}(n,i)),[t.toString(),r,i]}(r);i.add("pu",e).addOptional("pu_rp",t?"1":void 0).add("pu_rqp",n.join(","))}return i.addOptional("ae",Wk(r.errorDetails,(e=>mA(JSON.stringify(e))))),Jk(r.retrievedIdentifiers)&&r.retrievedIdentifiers.forEach((e=>i.add("ext_".concat(e.name),e.value))),Jk(r.hashesFromIdentifiers)&&r.hashesFromIdentifiers.forEach((e=>i.add("scre","".concat(e.md5,",").concat(e.sha1,",").concat(e.sha256)))),i.addOptional("li_did",null===(e=r.decisionIds)||void 0===e?void 0:e.join(",")).addOptional("e",null===(t=r.hashedEmail)||void 0===t?void 0:t.join(",")).addOptional("us_privacy",r.usPrivacyString).addOptional("wpn",r.wrapperName).addOptional("gdpr",Wk(r.gdprApplies,(e=>e?"1":"0"))).addOptional("gdpr_consent",r.gdprConsent).addOptional("refr",r.referrer).addOptional("gpp_s",r.gppString).addOptional("gpp_as",null===(n=r.gppApplicableSections)||void 0===n?void 0:n.join(",")).addOptional("cd",r.cookieDomain).addOptional("ic",XA(r.resolvedIdCookie),{stripEmpty:!1}).addOptional("c",r.contextElements),i}}function eE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return rE((()=>e.top.document.referrer))}function tE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=rE((()=>e.location.ancestorOrigins))||[],n=[];let r,i=e;for(;i!==top;)n.push(i),i=i.parent;n.push(i);for(let e=n.length-1;e>=0&&!r;e--)r=rE((()=>n[e].location.href)),0!==e&&(r||(r=rE((()=>n[e-1].document.referrer))),r||(r=t[e-1]));return r}function nE(e,t,n){if(!e&&t&&""!==t&&n){const e=function(e,t){const n=window.document.querySelectorAll(e);let r="";for(let e=0;e<n.length;e++){const o=r+NA(n[e].outerHTML).stringWithoutRawEmails;if(i=o,!(Math.ceil(4*new Blob([i]).size/3)<=t))return r;r=o}var i;return r}(t,n);return mA(e)}return""}function rE(e){try{return e()}catch(e){return}}const iE=e=>({...e,pageUrl:tE(),referrer:eE(),contextElements:nE(e.privacyMode,e.contextSelectors,e.contextElementsLength)});function oE(e){let t=[];e&&(Jk(e)?t=e:Yk(e)&&(t=e.split(",")));for(let e=0;e<t.length;e++)t[e]=t[e].trim();return t}function aE(e,t){const n=[];let r=[];for(let i=0;i<e.length;i++){const o=e[i],a=t.getCookie(o)||t.getDataFromLocalStorage(o);if(a){const e=NA(Hk(a));n.push({name:o,value:e.stringWithoutRawEmails}),r=r.concat(e.hashesFromOriginalString)}}return{retrievedIdentifiers:n,hashesFromIdentifiers:sE(r)}}function sE(e){const t=new Set,n=[];for(let r=0;r<e.length;r++)t.has(e[r].md5)||(n.push(e[r]),t.add(e[r].md5));return n}const dE=e=>{var t;return{...e,privacyMode:!!e.gdprApplies||(null!==(t=e.gppApplicableSections)&&void 0!==t?t:[]).indexOf(2)>-1}};function lE(e,t){if(e&&e.appId&&e.distributorId){const n=e.distributorId;delete e.distributorId,t.emitError("AppIdAndDistributorIdPresent",new Error("Event contains both appId: ".concat(e.appId," and distributorId: ").concat(n,". Ignoring distributorId")))}return e}const cE="idCookie";class uE{constructor(e,t,n){var r,i;Vk(this,"eventBus",void 0),Vk(this,"calls",void 0),Vk(this,"idexConfig",void 0),Vk(this,"externalIds",void 0),Vk(this,"source",void 0),Vk(this,"publisherId",void 0),Vk(this,"url",void 0),Vk(this,"timeout",void 0),Vk(this,"requestedAttributes",void 0),Vk(this,"query",void 0),Vk(this,"privacyMode",void 0),Vk(this,"resolvedIdCookie",void 0),Vk(this,"generateIdCookie",void 0),Vk(this,"peopleVerifiedId",void 0),Vk(this,"pageUrl",void 0);const o=e||{identityResolutionConfig:{}};this.eventBus=n,this.calls=t,this.idexConfig=o.identityResolutionConfig||{},this.externalIds=o.retrievedIdentifiers||[],this.source=this.idexConfig.source||"unknown",this.publisherId=this.idexConfig.publisherId||"any",this.url=this.idexConfig.url||"https://idx.liadm.com/idex",this.timeout=this.idexConfig.ajaxTimeout||o.ajaxTimeout||5e3,this.requestedAttributes=this.idexConfig.requestedAttributes||cA,this.privacyMode=null!==(r=o.privacyMode)&&void 0!==r&&r,this.resolvedIdCookie=o.resolvedIdCookie,this.generateIdCookie="generated"===this.idexConfig.idCookieMode,this.peopleVerifiedId=o.peopleVerifiedId,this.pageUrl=o.pageUrl,this.query=(new GA).addOptional("duid",o.peopleVerifiedId).addOptional("us_privacy",o.usPrivacyString).addOptional("gdpr",Wk(o.gdprApplies,(e=>e?1:0))).addOptional("gdpr_consent",o.gdprConsent).addOptional("did",o.distributorId).addOptional("gpp_s",o.gppString).addOptional("gpp_as",null===(i=o.gppApplicableSections)||void 0===i?void 0:i.join(",")).addOptional("cd",o.cookieDomain).addOptional("ic",XA(o.resolvedIdCookie),{stripEmpty:!1}).addOptional("pu",Wk(o.pageUrl,YA)),this.externalIds.forEach((e=>{this.query.add(e.name,e.value)})),this.requestedAttributes.forEach((e=>{this.query.add("resolve",e)}))}attributeResolutionAllowed(e){return"uid2"===e?!this.privacyMode:e!==cE}filterParams(e){return e.filteredCopy(((e,t)=>"resolve"!==e||!!Yk(t)&&this.attributeResolutionAllowed(t)))}enrichExtraIdentifiers(e,t){const n=t.tuples.filter((e=>{let[t]=e;return"resolve"===t})).map((e=>{let[,t]=e;return t})),r={...e};var i;return i=cE,n.indexOf(i)>-1&&(this.generateIdCookie&&this.peopleVerifiedId?r[cE]=this.peopleVerifiedId:this.resolvedIdCookie&&(r[cE]=this.resolvedIdCookie)),r}responseReceived(e,t){return(n,r)=>{let i={};if(n)try{const e=JSON.parse(n);Zk(e)&&(i=e)}catch(e){console.error("Error parsing response",e),this.eventBus.emitError("IdentityResolverParser",e)}const o=function(e){if(Zk(e)&&"getResponseHeader"in e&&eA(e.getResponseHeader)){const t=e.getResponseHeader("expires");if(t)return new Date(t)}}(r);e(this.enrichExtraIdentifiers(i,t),{expiresAt:o})}}buildUrl(e){return"".concat(this.url,"/").concat(this.source,"/").concat(this.publisherId).concat(this.filterParams(e).toQueryString())}getUrl(e){const t=this.query.copy().addParamsMap(null!=e?e:{});return this.buildUrl(t)}resolve(e,t,n){try{const r=this.query.copy().addParamsMap(null!=n?n:{});this.calls.ajaxGet(this.buildUrl(r),this.responseReceived(e,r),t,this.timeout)}catch(e){console.error("IdentityResolve",e),t&&eA(t)&&t(e),this.eventBus&&this.eventBus.emitError("IdentityResolve",e)}}}function pE(){return new iA("number"==typeof(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5)&&e>=0?e:5);var e}function hE(e){const t=window[e].eventBus||window[aA];return eA((n=t).emitErrorWithMessage)&&eA(n.emitError)||(n.emitErrorWithMessage=function(e,t){const r=nA(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return n.emit(rA,r)},n.emitError=function(e,t){return n.emitErrorWithMessage(e,t.message,t)}),t;var n}const fE="_li_dcdm_c";function gE(e){const t=e.getCookie(fE);if(t)return t;const n=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",r=n.split(".");for(let t=r.length;t>0;t--){const n=".".concat(r.slice(t-1,r.length).join("."));if(e.setCookie(fE,n,void 0,"Lax",n),e.getCookie(fE))return n}return".".concat(n)}const mE={cookie:"cookie",localStorage:"ls",none:"none",disabled:"disabled"},vE=e=>{const t=e.privacyMode?mE.disabled:e.storageStrategy||mE.cookie;return{...e,storageStrategy:t}},yE=tA(30),bE="li_did",_E="lidids.",wE=(e,t,n)=>n.indexOf(e)===t,SE=e=>e&&Kk(e).length>0;const TE="0123456789ABCDEFGHJKMNPQRSTVWXYZ",IE=TE.length,kE=Math.pow(2,48)-1,AE=10,EE=16,CE=function(){const e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);return t?()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255}:()=>Math.random()}();function xE(){let e=Math.floor(CE()*IE);return e===IE&&(e=IE-1),TE.charAt(e)}function OE(){return function(e,t){if(e>kE)throw function(e){const t=new Error(e);return t.source="Ulid",t}("cannot encode time greater than "+kE);let n,r="";for(;t>0;t--)n=e%IE,r=TE.charAt(n)+r,e=(e-n)/IE;return r}(Date.now(),AE)+function(e){let t="";for(;e>0;e--)t=xE()+t;return t}(EE)}const PE="_lc2_fpi";const DE=120,RE={errorDetails:{message:"Unknown message",name:"Unknown name"}};function jE(e){try{const t=1*e;return isNaN(t)?void 0:t}catch{}}function ME(e){try{return Yk(e)&&e.length&&e.length>DE?"".concat(e.substr(0,DE),"..."):"".concat(e)}catch{}}function NE(e){return Zk(e)?{errorDetails:{message:ME(e.message)||"",name:ME(e.name)||"",stackTrace:ME(e.stack),lineNumber:jE(e.lineNumber),columnNumber:jE(e.columnNumber),fileName:ME(e.fileName)}}:RE}const UE=()=>{};class LE{constructor(e,t,n){Vk(this,"obj",void 0),Vk(this,"name",void 0),Vk(this,"errors",void 0),Vk(this,"eventBus",void 0),this.obj=e,this.name=t,this.errors=[],this.eventBus=n}wrap(e){var t=this;if(Zk(this.obj)){const n=this.obj[e];if(eA(n))return function(){try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.call(t.obj,...i)}catch(n){t.eventBus.emitErrorWithMessage(t.name,"Failed calling ".concat(e),n)}}}return this.errors.push(e),UE}reportErrors(){this.errors.length>0&&this.eventBus.emitErrorWithMessage(this.name,"The functions '".concat(JSON.stringify(this.errors),"' were not provided"))}}const BE=()=>{};function qE(e,t,n){return Qk(t,mE.disabled)?BE:e.wrap(n)}function FE(e,t,n){return Qk(t,mE.none)?BE:qE(e,t,n)}class VE{constructor(e,t){Vk(this,"minimalFunctions",void 0),this.minimalFunctions={getCookie:qE(t,e,"getCookie"),getDataFromLocalStorage:qE(t,e,"getDataFromLocalStorage"),localStorageIsEnabled:FE(t,e,"localStorageIsEnabled")}}static make(e,t,n){const r=new LE(t,"ReadOnlyStorageHandler",n),i=new VE(e,r);return r.reportErrors(),i}localStorageIsEnabled(){return!!this.minimalFunctions.localStorageIsEnabled()}getCookie(e){return this.minimalFunctions.getCookie(e)||null}getDataFromLocalStorage(e){return this.minimalFunctions.getDataFromLocalStorage(e)||null}}class zE extends VE{constructor(e,t){super(e,t),Vk(this,"storageStrategy",void 0),Vk(this,"functions",void 0),this.storageStrategy=e,this.functions={setCookie:FE(t,e,"setCookie"),removeDataFromLocalStorage:FE(t,e,"removeDataFromLocalStorage"),setDataInLocalStorage:FE(t,e,"setDataInLocalStorage"),findSimilarCookies:qE(t,e,"findSimilarCookies")}}static make(e,t,n){const r=new LE(t,"StorageHandler",n),i=new zE(e,r);return r.reportErrors(),i}setCookie(e,t,n,r,i){this.functions.setCookie(e,t,n,r,i)}setDataInLocalStorage(e,t){this.functions.setDataInLocalStorage(e,t)}removeDataFromLocalStorage(e){this.functions.removeDataFromLocalStorage(e)}findSimilarCookies(e){return this.functions.findSimilarCookies(e)||[]}}class $E extends Error{constructor(e){super(e),this.name="ParseError"}}class WE{constructor(e){Vk(this,"handler",void 0),Vk(this,"cookieDomain",void 0),Vk(this,"eventBus",void 0),this.handler=e.storageHandler,this.cookieDomain=e.cookieDomain,this.eventBus=e.eventBus}deleteCookie(e){this.handler.setCookie(e,"",new Date(0),"Lax",this.cookieDomain)}parseMetaRecord(e){const t=JSON.parse(e);if(!Zk(t))throw new $E("Meta record is not an object");let n;if("e"in t&&(n=new Date(t.e),isNaN(n.getTime())))throw new $E("Invalid expiresAt");if(!("w"in t))throw new $E("Missing writtenAt");const r=new Date(t.w);if(isNaN(r.getTime()))throw new $E("Invalid writtenAt");return{expiresAt:n,writtenAt:r}}serializeMetaRecord(e){let t;return e.expiresAt&&(t=e.expiresAt.getTime()),JSON.stringify({w:e.writtenAt.getTime(),e:t})}getCookieRecord(e,t){const n=this.handler.getCookie(t);if(!n||0===n.length)return null;let r;try{r=this.parseMetaRecord(n)}catch(n){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from cookies",n),this.deleteCookie(e),this.deleteCookie(t),null}const i=r.expiresAt;if(i&&i.getTime()<=Date.now())return null;const o=this.handler.getCookie(e);return o?{data:o,meta:r}:null}getLSRecord(e,t){const n=this.handler.getDataFromLocalStorage(t);if(!n||0===n.length)return null;let r;try{r=this.parseMetaRecord(n)}catch(n){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from ls",n),this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null}const i=r.expiresAt;if(i&&i.getTime()<=Date.now())return this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null;const o=this.handler.getDataFromLocalStorage(e);return o?{data:o,meta:r}:null}get(e){const t=HE(e),n=this.getCookieRecord(e,t),r=this.getLSRecord(e,t);return n&&r?n.meta.writtenAt.getTime()===r.meta.writtenAt.getTime()?n:n.meta.writtenAt>r.meta.writtenAt?(this.handler.setDataInLocalStorage(e,n.data),this.handler.setDataInLocalStorage(t,this.serializeMetaRecord(n.meta)),n):(this.handler.setCookie(e,r.data,r.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(t,this.serializeMetaRecord(r.meta),r.meta.expiresAt,"Lax",this.cookieDomain),r):n?(this.handler.setDataInLocalStorage(e,n.data),this.handler.setDataInLocalStorage(t,this.serializeMetaRecord(n.meta)),n):r?(this.handler.setCookie(e,r.data,r.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(t,this.serializeMetaRecord(r.meta),r.meta.expiresAt,"Lax",this.cookieDomain),r):null}set(e,t,n){const r=HE(e),i=this.serializeMetaRecord({writtenAt:new Date,expiresAt:n});this.handler.setDataInLocalStorage(e,t),this.handler.setDataInLocalStorage(r,i);const o=n||tA(730);this.handler.setCookie(e,t,o,"Lax",this.cookieDomain),this.handler.setCookie(r,i,o,"Lax",this.cookieDomain)}}function HE(e){return"".concat(e,"_meta")}const GE=()=>{};function XE(e,t,n){return t?GE:e.wrap(n)}class JE{constructor(e,t,n){Vk(this,"functions",void 0);const r=new LE(e,"CallHandler",t);this.functions={ajaxGet:XE(r,n,"ajaxGet"),pixelGet:XE(r,n,"pixelGet")},r.reportErrors()}ajaxGet(e,t,n,r){this.functions.ajaxGet(e,t,n,r)}pixelGet(e,t){this.functions.pixelGet(e,t)}}function KE(e){return t=>{var n,r,i,o;return"cookie"===(null===(n=t.idCookie)||void 0===n?void 0:n.strategy)&&"string"==typeof(null===(r=t.idCookie)||void 0===r?void 0:r.name)?{...t,resolvedIdCookie:e.getCookie(t.idCookie.name)}:"localStorage"===(null===(i=t.idCookie)||void 0===i?void 0:i.strategy)&&"string"==typeof(null===(o=t.idCookie)||void 0===o?void 0:o.name)?{...t,resolvedIdCookie:e.getDataFromLocalStorage(t.idCookie.name)}:t}}const YE={};function QE(e,t,n,r){if(e&&Zk(e))if("config"in e)r.emitErrorWithMessage("StrayConfig","Received a config after LC has already been initialised",new Error(JSON.stringify(e)));else{const i=new ZA(n,r),o=i.combineWith({eventSource:e});YE.hashedEmail=YE.hashedEmail||o.data.hashedEmail;const a=HA({eventSource:e},YE),s=()=>r.emit(dA,"0"),d=()=>r.emit(sA,n);t.sendAjax(i.combineWith(a),{onPreSend:s,onLoad:d})}else r.emitErrorWithMessage("EventNotAnObject","Received event was not an object",new Error(e))}function ZE(e,t,n,r){try{const i={...lE(e,r),identifiersToResolve:e.identifiersToResolve||[],contextSelectors:e.contextSelectors||"",contextElementsLength:e.contextElementsLength||0},o=iE(vE(dE(i))),a=new JE(n,r,o.privacyMode),s=zE.make(o.storageStrategy,t,r),d=function(e){return t=>({...t,cookieDomain:gE(e)})}(s)(o),l=new WE({storageHandler:s,eventBus:r,cookieDomain:d.cookieDomain}),c=KE(s)(function(e,t){return n=>{let r;const i=e.get(PE);if(i)r=i.data;else{const i=t.getCookie(PE);if(i)e.set(PE,i),r=i;else{var o;const t="".concat(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return _A(e.replace(/^\./,"")).substring(0,t)}(n.cookieDomain),"--").concat(OE()).toLocaleLowerCase();e.set(PE,t),r=null===(o=e.get(PE))||void 0===o?void 0:o.data}}return r&&t.setDataInLocalStorage(lA,r),{...n,liveConnectId:r,peopleVerifiedId:r}}}(l,s)(function(e,t){return n=>{function r(e,n){try{return n()}catch(n){return t.emitErrorWithMessage("DecisionsResolve",e,n),[]}}const i=r("Error while extracting new decision ids",(()=>[].concat(n.pageUrl&&function(e,t){return BA(qA(e),t)}(n.pageUrl,bE)||[]).map(Kk).filter(SE).filter(Xk).filter(wE))),o=r("Error while retrieving stored decision ids",(()=>e.findSimilarCookies(_E).map(Kk).filter(SE).filter(Xk)));return i.forEach((r=>{try{(i=r)&&e.setCookie("".concat(_E).concat(i),i,yE,"Lax",n.cookieDomain)}catch(e){t.emitErrorWithMessage("DecisionsResolve","Error while storing new decision id",e)}var i})),{...n,decisionIds:i.concat(o).filter(wE)}}}(s,r)(function(e,t){return n=>{try{return{...n,...aE(oE(n.identifiersToResolve),e)}}catch(e){return t.emitError("IdentifiersEnricher",e),{...n,retrievedIdentifiers:[],hashesFromIdentifiers:[]}}}}(s,r)(d)))),u=new oA({collectorUrl:i.collectorUrl,ajaxTimeout:i.ajaxTimeout,eventBus:r,callHandler:a});!function(e,t,n){try{n.on(rA,(r=>{t.sendPixel(new ZA({...e,...NE(r)},n))}))}catch(e){console.error("handlers.error.register",e)}}(c,u,r);const p=new uE(c,a,r),h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t,n,r){try{e.forEach((e=>{const i=e;Jk(i)?i.forEach((e=>QE(e,t,n,r))):QE(i,t,n,r)}))}catch(e){console.error("Error sending events",e),r.emitErrorWithMessage("LCPush","Failed sending an event",e)}}(t,u,c,r)};return{push:h,fire:()=>h({}),peopleVerifiedId:c.peopleVerifiedId,ready:!0,resolve:p.resolve.bind(p),resolutionCallUrl:p.getUrl.bind(p),config:i,eventBus:r,storageHandler:s,cache:l}}catch(e){console.error(e),r.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}}function eC(e,t,n,r){const i=Zk(e)&&e||{},o=r||pE();let a;try{a=i.globalVarName?function(e,t,n,r){const i=window[e.globalVarName]||[],o=function(e){try{if(window&&window[e.globalVarName]&&window[e.globalVarName].ready){const t=window[e.globalVarName].config&&function(e,t){if(e.appId!==t.appId||e.wrapperName!==t.wrapperName||e.collectorUrl!==t.collectorUrl)return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName],collectorUrl:[e.collectorUrl,t.collectorUrl]}}(window[e.globalVarName].config,e);if(t){const n=new Error;n.name="ConfigSent",n.message="Additional configuration received";const r=hE(e.globalVarName);window[e.globalVarName].eventBus=r,r.emitErrorWithMessage("LCDuplication",JSON.stringify(t),n)}return window[e.globalVarName]}}catch(e){console.error("Could not initialize error bus")}}(e)||ZE(e,t,n,r)||i;if(Jk(i))for(let e=0;e<i.length;e++)o.push(i[e]);return window[o.config.globalVarName]=o,window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter((e=>e.config.globalVarName===o.config.globalVarName)).length&&window.liQ_instances.push(o),o}(i,t,n,o):function(e,t,n,r){const i=ZE(e,t,n,r);return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(i,t,n,o)}catch(e){console.error(e),o.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}return a}function tC(e,t){const n=Jk(e)?e:Hk(e).split(","),r=[];for(let e=0;e<n.length;e++){const o=Kk(n[e]),a=t.getCookie(o)||t.getDataFromLocalStorage(o);!a||(i=Hk(a),RA().test(i))||jA(Hk(a))||r.push({name:o,value:Hk(a)})}var i;return r}function nC(e,t,n,r,i){try{const o={...lE(e,r),identifiersToResolve:e.identifiersToResolve||[]},a=vE(dE(o)),s=VE.make(a.storageStrategy,t,r),d=new JE(n,r,a.privacyMode),l=function(e,t){return n=>{try{return{...n,retrievedIdentifiers:tC(n.identifiersToResolve,e)}}catch(e){return t.emitError("IdentifiersEnrich",e),{...n,retrievedIdentifiers:[]}}}}(s,r)(KE(s)(function(e,t){return n=>{try{return{...n,peopleVerifiedId:n.peopleVerifiedId||e.getDataFromLocalStorage(lA)||void 0}}catch(e){return t.emitError("PeopleVerifiedEnrich",e),n}}}(s,r)(a))),c=new uE(l,d,r);return{push:e=>i(e),fire:()=>i({}),peopleVerifiedId:l.peopleVerifiedId,ready:!0,resolve:c.resolve.bind(c),resolutionCallUrl:c.getUrl.bind(c),config:o,eventBus:r,storageHandler:s}}catch(e){console.error(e)}}function rC(e,t,n,r){const i=Zk(e)&&e||{},o=r||pE();try{return i.globalVarName?function(e,t,n,r){const i=window[e.globalVarName]=window[e.globalVarName]||[],o=nC(e,t,n,r,i.push.bind(i));return window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter((e=>e.config.globalVarName===o.config.globalVarName)).length&&window.liQ_instances.push(o),o}(i,t,n,o):function(e,t,n,r){const i=nC(e,t,n,r,(()=>{}));return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(i,t,n,o)}catch(e){console.error(e)}return{}}const iC=function(e,t,n,r,i){const o="minimal"===r,a=i||pE();return(o?rC:eC)(Zk(e)&&e||{},t,n,a)};function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oC(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sC={tdid:{source:"adserver.org",atype:1,getValue:function(e){return e.id?e.id:e},getUidExt:function(e){return aC(aC({},{rtiPartner:"TDID"}),e.ext)}}};function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dC(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cC="liveIntentId",uC="liveintent.com",pC=Mo({moduleType:Cn,moduleName:cC}),hC={nonId:!0},fC={ajaxGet:function(e,t,n,r){an(r)(e,{success:t,error:n},void 0,{method:"GET",withCredentials:!0})},pixelGet:function(e,t){return vt(e,t)}},gC=!1,mC=null;function vC(){gC=!0}function yC(e){function t(e){return Object.entries(e).flatMap((function(e){var t,n=o(e,2),r=n[0],i=n[1];return"boolean"==typeof i&&i?[(t=r,"fpid"===t?"idCookie":t)]:[]}))}return"object"===a(e)?t(lC(lC({},hC),e)):t(hC)}function bC(e){if(mC)return mC;var t=(e=e||{}).fpid||{},n={publisherId:e.publisherId||"any",requestedAttributes:yC(e.requestedAttributesOverrides)};e.url&&(n.url=e.url),n.ajaxTimeout=e.ajaxTimeout||5e3;var r=function(e){var t={};return(e=e||{}).appId&&(t.appId=e.appId),e.fpiStorageStrategy&&(t.storageStrategy=e.fpiStorageStrategy),e.fpiExpirationDays&&(t.expirationDays=e.fpiExpirationDays),e.collectorUrl&&(t.collectorUrl=e.collectorUrl),t.ajaxTimeout=e.ajaxTimeout||5e3,t}(e.liCollectConfig);!r.appId&&e.distributorId?(r.distributorId=e.distributorId,n.source=e.distributorId):n.source=e.partner||"prebid",r.wrapperName="prebid",r.trackerVersion="9.10.0",r.identityResolutionConfig=n,r.identifiersToResolve=e.identifiersToResolve||[],r.fireEventDelay=e.fireEventDelay,r.idCookie={},r.idCookie.name=t.name,r.idCookie.strategy="html5"==t.strategy?"localStorage":t.strategy;var i=zi.getConsentData();i&&(r.usPrivacyString=i);var o=Vi.getConsentData();o&&(r.gdprApplies=o.gdprApplies,r.gdprConsent=o.consentString);var a=$i.getConsentData();return a&&(r.gppString=a.gppString,r.gppApplicableSections=a.applicableSections),mC=wC.getInitializer()(r,pC,fC),e.emailHash&&mC.push({hash:e.emailHash}),mC}function _C(){if(!gC&&mC){var e=mC.config.fireEventDelay||500;setTimeout((function(){window.liQ_instances.forEach((function(e){return e.eventBus.once("pre_lips",vC)})),!gC&&mC&&mC.fire()}),e)}}var wC={moduleMode:"standard",name:cC,gvlid:148,setModuleMode:function(e){this.moduleMode=e},getInitializer:function(){var e=this;return function(t,n,r){return iC(t,n,r,e.moduleMode)}},decode:function(e,t){var n=t&&t.params||{};return mC||bC(n),_C(),function(e){var t={},n=e.nonId||e.unifiedId;if(n){var r=lC(lC({},e),{},{lipbid:n});delete r.unifiedId,t.lipb=r}return e.uid2&&(t.uid2={id:e.uid2,ext:{provider:uC}}),e.bidswitch&&(t.bidswitch={id:e.bidswitch,ext:{provider:uC}}),e.medianet&&(t.medianet={id:e.medianet,ext:{provider:uC}}),e.magnite&&(t.magnite={id:e.magnite,ext:{provider:uC}}),e.index&&(t.index={id:e.index,ext:{provider:uC}}),e.openx&&(t.openx={id:e.openx,ext:{provider:uC}}),e.pubmatic&&(t.pubmatic={id:e.pubmatic,ext:{provider:uC}}),e.sovrn&&(t.sovrn={id:e.sovrn,ext:{provider:uC}}),e.idCookie&&(Wi.getCoppa()||(t.lipb=lC(lC({},t.lipb),{},{fpid:e.idCookie}),t.fpid={id:e.idCookie}),delete t.lipb.idCookie),e.thetradedesk&&(t.lipb=lC(lC({},t.lipb),{},{tdid:e.thetradedesk}),t.tdid={id:e.thetradedesk,ext:{rtiPartner:"TDID",provider:mi().domain||uC}},delete t.lipb.thetradedesk),t}(e)},getId:function(e){var t=bC(e&&e.params||{});if(t)return _C(),{callback:function(e){t.resolve((function(t){e(t)}),(function(t){Ke("".concat(cC,": ID fetch encountered an error: "),t),e()}))}}},eids:lC(lC(lC({},sC),{uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}),{},{lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},magnite:{source:"rubiconproject.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},index:{source:"liveintent.indexexchange.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},openx:{source:"openx.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},pubmatic:{source:"pubmatic.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sovrn:{source:"liveintent.sovrn.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},fpid:{source:"fpid.liveintent.com",atype:1,getValue:function(e){return e.id}}})};function SC(e,t){if(!ot(e.getFloor))return 0;var n=e.getFloor({currency:"USD",mediaType:t,size:"*"});return"USD"===n.currency&&n.floor?n.floor:0}function TC(e){return""!==e&&void 0!==e?encodeURIComponent(e):""}function IC(e,t){if(!e)return!1;var n="include"===e.filter,r=st(e.bidders)?e.bidders:[t];return n&&ft(r,t)}function kC(e,t,n){var r=t.startsWith("http")?"":"https://",i=t.endsWith("/")?t:"".concat(t,"/");return e?"".concat(r).concat(i).concat(n.TEST):"".concat(r).concat(i).concat(n.PRODUCTION)}function AC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Bn("userId",wC),p("liveIntentIdSystem");var EC="6.0.0",CC={PRODUCTION:"hb-mm-multi",TEST:"hb-multi-mm-test"},xC={code:"minutemedia",gvlid:918,version:EC,supportedMediaTypes:[Vo,Fo],isBidRequestValid:function(e){return e.params?!!e.params.org||(Je("org is a mandatory param for MinuteMedia adapter"),!1):(Je("no params have been set to MinuteMedia adapter"),!1)},buildRequests:function(e,t){var n={},r=e[0],i=r.params.testMode;return n.params=function(e,t,n){var r,i,o,a=window.location.hostname,s=Z.getConfig("userSync")||{},d=s.syncEnabled,l=s.filterSettings,c=t.bidderCode,u=e.params,p=t.timeout,h={wrapper_type:"prebidjs",wrapper_vendor:"pbjs",wrapper_version:"9.10.0",adapter_version:n||"6.0.0",auction_start:t.auctionStart,publisher_id:u.org,publisher_name:a,site_domain:a,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,device_type:(o=navigator.userAgent,/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(o.toLowerCase())?"5":/iphone|ipod|android|blackberry|opera|mini|windows\\sce|palm|smartphone|iemobile/i.test(o.toLowerCase())?"4":/smart[-_\\s]?tv|hbbtv|appletv|googletv|hdmi|netcast|viera|nettv|roku|\\bdtv\\b|sonydtv|inettvbrowser|\\btv\\b/i.test(o.toLowerCase())?"3":"1"),ua:navigator.userAgent,is_wrapper:!!u.isWrapper,session_id:u.sessionId||Ue("bidderRequestId",e),tmax:p},f=Ue("userId",e);f&&(h.userIds=JSON.stringify(f));var g=t.ortb2||{};if(g.site&&(h.site_metadata=JSON.stringify(g.site)),g.user&&(h.user_metadata=JSON.stringify(g.user)),d){var m=function(e,t){var n="image";return e&&["all","iframe"].some((function(n){return IC(e[n],t)}))?"iframe":e&&e[n]&&!IC(e[n],t)?void 0:"pixel"}(l,c);m&&(h.cs_method=m)}return t.uspConsent&&(h.us_privacy=t.uspConsent),t&&t.gdprConsent&&t.gdprConsent.gdprApplies&&(h.gdpr=t.gdprConsent.gdprApplies,h.gdpr_consent=t.gdprConsent.consentString),t.gppConsent?(h.gpp=t.gppConsent.gppString,h.gpp_sid=t.gppConsent.applicableSections):null!==(r=t.ortb2)&&void 0!==r&&null!==(i=r.regs)&&void 0!==i&&i.gpp&&(h.gpp=t.ortb2.regs.gpp,h.gpp_sid=t.ortb2.regs.gpp_sid),u.ifa&&(h.ifa=u.ifa),e.schain&&(h.schain=function(e){if(ut(e))return"";var t="".concat(e.ver,",").concat(e.complete);return e.nodes.forEach((function(e){t+="!",t+="".concat(TC(e.asi),","),t+="".concat(TC(e.sid),","),t+="".concat(TC(e.hp),","),t+="".concat(TC(e.rid),","),t+="".concat(TC(e.name),","),t+="".concat(TC(e.domain))})),t}(e.schain)),t&&t.refererInfo&&(h.referrer=A(t,"refererInfo.ref"),h.page_url=A(t,"refererInfo.page")||A(window,"location.href"),h.site_domain=A(t,"refererInfo.domain")||A(window,"location.hostname")),h}(r,t,EC),n.bids=function(e,t){var n=[];return e.length&&e.forEach((function(e){n.push(function(e,t){var n,r,i=e.params,o=function(e){return e.mediaTypes&&e.mediaTypes.banner}(e)?Vo:Fo,a=function(e,t){var n=[];return A(e,"mediaTypes.".concat(t,".sizes"))?n=e.mediaTypes[t].sizes:Array.isArray(e.sizes)&&e.sizes.length>0&&(n=e.sizes),n}(e,o);isNaN(i.floorPrice)&&(i.floorPrice=0);var s={mediaType:o,adUnitCode:Ue("adUnitCode",e),sizes:a,floorPrice:Math.max(SC(e,o),i.floorPrice),bidId:Ue("bidId",e),loop:e.bidderRequestsCount||0,bidderRequestId:Ue("bidderRequestId",e),transactionId:(null===(n=e.ortb2Imp)||void 0===n||null===(r=n.ext)||void 0===r?void 0:r.tid)||"",coppa:0},d=A(e,"mediaTypes.".concat(o,".pos"));d&&(s.pos=d);var l=A(e,"ortb2Imp.ext.gpid");l&&(s.gpid=l);var c=i.placementId||A(e,"mediaTypes.".concat(o,".name"));c&&(s.placementId=c);var u=A(e,"mediaTypes.".concat(o,".mimes"));u&&(s.mimes=u);var p=A(e,"mediaTypes.".concat(o,".api"));p&&(s.api=p);var h=A(e,"ortb2.device.sua");if(h&&(s.sua=h),A(e,"ortb2.regs.coppa")&&(s.coppa=1),o===Fo){var f,g=A(e,"mediaTypes.video.playbackmethod");Array.isArray(g)&&qt(g[0])?f=g[0]:qt(g)&&(f=g),f&&(s.playbackMethod=f);var m=A(e,"mediaTypes.video.placement");m&&(s.placement=m);var v=A(e,"mediaTypes.video.minduration");v&&(s.minDuration=v);var y=A(e,"mediaTypes.video.maxduration");y&&(s.maxDuration=y);var b=A(e,"mediaTypes.video.skip");b&&(s.skip=b);var _=A(e,"mediaTypes.video.linearity");_&&(s.linearity=_);var w=A(e,"mediaTypes.video.protocols");w&&(s.protocols=w);var S=A(e,"mediaTypes.video.plcmt");S&&(s.plcmt=S)}return s}(e))})),n}(e),{method:"POST",url:kC(i,"https://hb.minutemedia-prebid.com/",CC),data:n}},interpretResponse:function(e){var t=e.body,n=[];return t.bids&&t.bids.forEach((function(e){var t=function(e,t,n,r,i){var o={requestId:e.requestId,cpm:e.cpm,currency:e.currency||"USD",width:e.width,height:e.height,ttl:e.ttl||360,creativeId:e.creativeId,netRevenue:e.netRevenue||!0,nurl:e.nurl,mediaType:e.mediaType,meta:{mediaType:e.mediaType}};return e.mediaType===r?o.vastXml=e.vastXml:e.mediaType===i&&(o.ad=e.ad),e.adomain&&e.adomain.length&&(o.meta.advertiserDomains=e.adomain),o}(e,0,0,Fo,Vo);n.push(t)})),n},getUserSyncs:function(e,t){var n,r=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return AC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AC(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e.iframeEnabled&&A(o,"body.params.userSyncURL")&&r.push({type:"iframe",url:A(o,"body.params.userSyncURL")}),e.pixelEnabled&&st(A(o,"body.params.userSyncPixels"))){var a=o.body.params.userSyncPixels.map((function(e){return{type:"image",url:e}}));r.push.apply(r,h(a))}}}catch(e){i.e(e)}finally{i.f()}return r},onBidWon:function(e){null!=e&&(Xe("onBidWon:",e),e.hasOwnProperty("nurl")&&e.nurl.length>0&&vt(e.nurl))}};function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OC(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zr(xC),p("minutemediaBidAdapter");var DC={code:"openx",gvlid:69,supportedMediaTypes:[Vo,Fo],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return A(e,"mediaTypes.banner")&&t?!!e.params.unit||A(e,"mediaTypes.banner.sizes.length")>0:!(!e.params.unit||!t)},buildRequests:function(e,t){var n=e.filter((function(e){return MC(e)})),r=e.filter((function(e){return function(e){return A(e,"mediaTypes.banner")||!MC(e)}(e)})),i=r.length?[jC(r,t,Vo)]:[];return n.forEach((function(e){i.push(jC([e],t,Fo))})),i},interpretResponse:function(e,t){return e.body||(e.body={nbr:0}),RC.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,n,r){if(e.iframeEnabled||e.pixelEnabled){var i=e.iframeEnabled?"iframe":"image",o=[],a="https://u.openx.net/w/1.0/pd";if(n&&(o.push("gdpr="+(n.gdprApplies?1:0)),o.push("gdpr_consent="+encodeURIComponent(n.consentString||""))),r&&o.push("us_privacy="+encodeURIComponent(r)),t.length>0&&t[0].body&&t[0].body.ext){var s=t[0].body.ext;s.delDomain?a="https://".concat(s.delDomain,"/w/1.0/pd"):s.platform&&o.push("ph="+s.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:i,url:"".concat(a).concat(o.length>0?"?"+o.join("&"):"")}]}}};Zr(DC);var RC=vu({context:{netRevenue:!0,ttl:300},imp:function(e,t,n){var r=e(t,n);return Xt(r,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&Zt(r,"ext.customParams",t.params.customParams),t.params.customFloor&&!r.bidfloor&&(r.bidfloor=t.params.customFloor),r},request:function(e,t,n,r){var i=e(t,n,r);Xt(i,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0"),pv:"9.10.0"}});var o=r.bidRequests[0];return o.params.coppa&&Zt(i,"regs.coppa",1),o.params.doNotTrack&&Zt(i,"device.dnt",1),o.params.platform&&Zt(i,"ext.platform",o.params.platform),o.params.delDomain&&Zt(i,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&Zt(i,"ext.response_template_name",o.params.response_template_name),o.params.test&&(i.test=1),i},bidResponse:function(e,t,n){var r=e(t,n);return t.ext&&(r.meta.networkId=t.ext.dsp_id,r.meta.advertiserId=t.ext.buyer_id,r.meta.brandId=t.ext.brand_id),r},response:function(e,t,n,r){var i=r.ortbRequest;i.ext&&(i.ext.delDomain&&Zt(n,"ext.delDomain",i.ext.delDomain),i.ext.platform&&Zt(n,"ext.platform",i.ext.platform));var a=e(t,n,r),s=A(n,"ext.fledge_auction_configs");return s?(s=Object.entries(s).map((function(e){var t,n=o(e,2),i=n[0],a=n[1];return{bidId:i,config:Xt(Object.assign({},a),{auctionSignals:{ortb2Imp:null===(t=r.impContext[i])||void 0===t?void 0:t.imp}})}})),{bids:a.bids,paapi:s}):a},overrides:{imp:{bidfloor:function(e,t,n,r){var i={};e(i,n,PC(PC({},r),{},{currency:"USD"})),"USD"===i.bidfloorcur&&Object.assign(t,i)},video:function(e,t,n,r){var i=n.mediaTypes[Fo];i&&(i=Object.assign({},i,n.params.video),n=PC(PC({},n),{},{mediaTypes:d({},Fo,i)})),e(t,n,r)}}}});function jC(e,t,n){return{method:"POST",url:Z.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:RC.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:n}})}}function MC(e){return A(e,"mediaTypes.video")}function NC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}p("openxBidAdapter");var UC="https://elb.the-ozone-project.com",LC="/openrtb2/auction",BC="/static/load-cookie.html",qC="https://test.ozpr.net",FC="2.9.3",VC={gvlid:524,aliases:[{code:"lmc",gvlid:524},{code:"venatus",gvlid:524}],version:FC,code:"ozone",supportedMediaTypes:[Fo,Vo],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:UC+LC,cookieSyncUrl:UC+BC,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js",batchRequests:!1},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var n=Z.getConfig(t)||{};Xe("got bidderConfig: ",Ct(n)),n.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=n.kvpPrefix);var r=this.getGetParametersAsObject();if(n.endpointOverride&&(n.endpointOverride.origin&&(this.propertyBag.endpointOverride=n.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.origin+LC,this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.origin+BC),r.hasOwnProperty("renderer")?r.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(r.renderer):this.propertyBag.whitelabel.rendererUrl=r.renderer:n.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=n.endpointOverride.rendererUrl),n.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.cookieSyncUrl),n.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=n.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.auctionUrl)),n.hasOwnProperty("batchRequests")&&(this.batchValueIsValid(n.batchRequests)?this.propertyBag.whitelabel.batchRequests=n.batchRequests:Ke("bidderConfig.batchRequests must be boolean or a number. Found & ignored data type: "+a(n.batchRequests))),n.hasOwnProperty("videoParams")&&(this.propertyBag.whitelabel.videoParams=n.videoParams),r.hasOwnProperty("batchRequests")){var i=parseInt(r.batchRequests);this.batchValueIsValid(i)?this.propertyBag.whitelabel.batchRequests=i:Ke("Ignoring query param: batchRequests - this must be a positive number")}try{r.hasOwnProperty("auction")&&"dev"===r.auction&&(Xe("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=qC+LC),r.hasOwnProperty("cookiesync")&&"dev"===r.cookiesync&&(Xe("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=qC+BC)}catch(e){}Xe("set propertyBag.whitelabel to",this.propertyBag.whitelabel)}},batchValueIsValid:function(e){return"boolean"==typeof e||"number"==typeof e&&e>0},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},getVideoPlacementValue:function(e){return["instream","outstream"].indexOf(e)<0?null:A(this.propertyBag,"whitelabel.videoParams.".concat(e),null)},getBatchRequests:function(){return Xe("getBatchRequests going to return ",this.propertyBag.whitelabel.batchRequests),!0===this.propertyBag.whitelabel.batchRequests?10:"number"==typeof this.propertyBag.whitelabel.batchRequests&&this.propertyBag.whitelabel.batchRequests>0&&this.propertyBag.whitelabel.batchRequests},isBidRequestValid:function(e){this.loadWhitelabelData(e),Xe("isBidRequestValid : ",Z.getConfig(),e);var t=e.adUnitCode,n="VALIDATION FAILED : missing {param} : siteId, placementId and publisherId are REQUIRED";if(!e.params.hasOwnProperty("placementId"))return Ke(n.replace("{param}","placementId"),t),!1;if(!this.isValidPlacementId(e.params.placementId))return Ke("VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return Ke(n.replace("{param}","publisherId"),t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return Ke("VALIDATION FAILED : publisherId must be exactly 12 alphanumeric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return Ke(n.replace("{param}","siteId"),t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return Ke("VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return Ke("VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return Ke("VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return Ke("VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return Ke('VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=a(e.params.customData[0].targeting))return Ke("VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(Fo)){if(!e.mediaTypes[Fo].hasOwnProperty("context"))return Ke("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[Fo].context&&"outstream"!==e.mediaTypes[Fo].context)return Ke("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var n,r,i=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=(new Date).getTime();var o=this.propertyBag.whitelabel.bidder,s=this.propertyBag.whitelabel.keyPrefix;if(Xe("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(FC," validBidRequests"),Ct(e),"bidderRequest",Ct(t)),this.blockTheRequest())return[];var d=!!t.fledgeEnabled,l={publisherId:"",siteId:""};e.length>0&&(this.cookieSyncBag.userIdObject=Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIdsFromEids(e[0])),this.cookieSyncBag.siteId=A(e[0],"params.siteId"),this.cookieSyncBag.publisherId=A(e[0],"params.publisherId"),l=e[0].params),Xe("cookie sync bag",this.cookieSyncBag);var c=this.getWhitelabelConfigItem("ozone.singleRequest");c=!1!==c,Xe("config ".concat(o,".singleRequest : "),c);var u={};Xe("going to get ortb2 from bidder request...");var p=A(t,"ortb2",null);Xe("got fpd: ",p),p&&A(p,"user")&&(Xe("added FPD user object"),u.user=p.user);var h=this.getGetParametersAsObject(),f=s+"testmode",g=h[f]||null;u.device={w:window.innerWidth,h:window.innerHeight};var m=this.getPlacementIdOverrideFromGetParam(),v=null,y=e.map((function(e){var t={},n=m||i.getPlacementId(e);t.id=e.bidId,t.tagid=n;var r=Wt(i.getRefererInfo().page);t.secure="https"===r.protocol?1:0;var s,l,c=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(Vo)&&(c=e.mediaTypes[Vo].sizes,Xe("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",c)),e.mediaTypes.hasOwnProperty(Fo)){if(Xe("openrtb 2.5 compliant video"),"object"==a(e.mediaTypes[Fo])){var u=A(e,"params.video",{});t.video=i.unpackVideoConfigIntoIABformat(e.mediaTypes[Fo],u),t.video=i.addVideoDefaults(t.video,e.mediaTypes[Fo],u)}var h=(s=t.video,(l=JC(s))?l[0]&&"object"===a(l[0])&&(Xe("getWidthAndHeightFromVideoObject found nested array inside playerSize.",l[0]),"number"!=typeof(l=l[0])[0]&&"string"!=typeof l[0])?(Xe("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",l[0]),null):2!==l.length?(Xe("getWidthAndHeightFromVideoObject found playerSize with length of "+l.length+". This is totally wrong - cannot continue."),null):{w:l[0],h:l[1]}:null);Xe("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",h),h&&"object"===a(h)?(t.video.w=h.w,t.video.h=h.h,function(e){var t=JC(e);return t?t.length<1?null:t[0]&&"object"===a(t[0]):null}(t.video)?(Xe("setting obj.video.format to be an array of objects"),t.video.ext.format=[h]):(Xe("setting obj.video.format to be an object"),t.video.ext.format=h)):Je("cannot set w, h & format values for video; the config is not right")}e.mediaTypes.hasOwnProperty(qo)&&(t.native=e.mediaTypes[qo],Xe("setting native object from the mediaTypes.native element: "+t.id+":",t.native)),e.hasOwnProperty("getFloor")?(Xe("This bidRequest object has property: getFloor"),t.floor=i.getFloorObjectForAuction(e),Xe("obj.floor is : ",t.floor)):Xe("This bidRequest object DOES NOT have property: getFloor")}else e.hasOwnProperty("sizes")?(Xe("no mediaTypes detected - will use the sizes array in the config root"),c=e.sizes):Xe("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type");if(c.length>0&&(t.banner={topframe:1,w:c[0][0]||0,h:c[0][1]||0,format:c.map((function(e){return{w:e[0],h:e[1]}}))}),t.placementId=n,Zt(t,"ext.prebid",{storedrequest:{id:n}}),t.ext[o]={},t.ext[o].adUnitCode=e.adUnitCode,e.params.hasOwnProperty("customData")&&(t.ext[o].customData=e.params.customData),Xe("obj.ext.".concat(o," is "),t.ext[o]),null!=g)if(Xe("setting isTestMode to ",g),t.ext[o].hasOwnProperty("customData"))for(var y=0;y<t.ext[o].customData.length;y++)t.ext[o].customData[y].targeting[f]=g;else t.ext[o].customData=[{settings:{},targeting:{}}],t.ext[o].customData[0].targeting[f]=g;p&&A(p,"site")&&(Xe("adding fpd.site"),A(t,"ext."+o+".customData.0.targeting",!1)?t.ext[o].customData[0].targeting=Object.assign(t.ext[o].customData[0].targeting,p.site):Zt(t,"ext."+o+".customData.0.targeting",p.site)),!v&&A(e,"schain")&&(v=e.schain);var b=A(e,"ortb2Imp.ext.gpid");if(b&&Zt(t,"ext.gpid",b),d){var _=A(e,"ortb2Imp.ext.ae");qt(_)?Zt(t,"ext.ae",_):Ke("ortb2Imp.ext.ae is not an integer - ignoring it for obj.id="+t.id)}return t})),b={};if(b[o]={},b[o][s+"_pb_v"]=FC,b[o][s+"_rw"]=m?1:0,e.length>0){var _=this.cookieSyncBag.userIdObject;_.hasOwnProperty("pubcid.org")&&(b[o].pubcid=_["pubcid.org"])}b[o].pv=this.getPageId();var w=this.getWhitelabelConfigItem("ozone.oz_omp_floor");Xe("".concat(s,"_omp_floor dollar value = "),w),"number"==typeof w?b[o][s+"_omp_floor"]=w:void 0!==w&&Ke("".concat(s,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(s,"_omp_floor: 1.55. You have it set as a ")+a(w));var S=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),T=st(S)&&S.length>0;b[o][s+"_kvp_rw"]=T?1:0,"ozone"!==o&&(Xe("setting aliases object"),b.prebid={aliases:{ozone:o}}),h.hasOwnProperty("ozf")&&(b[o].ozf="true"===h.ozf||"1"===h.ozf?1:0),h.hasOwnProperty("ozpf")&&(b[o].ozpf="true"===h.ozpf||"1"===h.ozpf?1:0),h.hasOwnProperty("ozrp")&&h.ozrp.match(/^[0-3]$/)&&(b[o].ozrp=parseInt(h.ozrp)),h.hasOwnProperty("ozip")&&h.ozip.match(/^\d+$/)&&(b[o].ozip=parseInt(h.ozip)),null!=this.propertyBag.endpointOverride&&(b[o].origin=this.propertyBag.endpointOverride);var I=A(e,"0.userIdAsEids",[]);if(u.site={publisher:{id:l.publisherId},page:this.getRefererInfo().page,id:l.siteId},u.test=Z.getConfig("debug")?1:0,t&&t.gdprConsent){Xe("ADDING GDPR info");var k=A(t,"gdprConsent.apiVersion",1);u.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0,apiVersion:k}},A(u,"regs.ext.gdpr")?Zt(u,"user.ext.consent",t.gdprConsent.consentString):Xe("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else Xe("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");t&&t.uspConsent?(Xe("ADDING USP consent info"),Zt(u,"regs.ext.us_privacy",t.uspConsent)):Xe("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(Zt(u,"regs.gpp",t.ortb2.regs.gpp),Zt(u,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),v&&(Xe("schain found"),Zt(u,"source.ext.schain",v)),!0===Z.getConfig("coppa")&&Zt(u,"regs.coppa",1),b[o].cookieDeprecationLabel=A(t,"ortb2.device.ext.cdep","none"),Xe("cookieDeprecationLabel from bidderRequest object = "+b[o].cookieDeprecationLabel);var E=Ne(),C=this.getBatchRequests();if("number"==typeof C){Xe("going to batch the requests");for(var x=[],O=0;O<y.length;O+=C)t.auctionId?(Xe("Found bidderRequest.auctionId - will pass these values through & not generate our own id"),u.id=t.auctionId,u.auctionId=t.auctionId,Zt(u,"source.tid",A(t,"ortb2.source.tid"))):(Xe("Did not find bidderRequest.auctionId - will generate our own id"),u.id=E),Zt(u,"user.ext.eids",I),u.imp=y.slice(O,O+C),u.ext=b,u.imp.length>0&&x.push({method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(u),bidderRequest:t});return Xe("batch request going to return : ",x),x}if(Xe("requests will not be batched."),c){Xe("buildRequests starting to generate response for a single request"),t.auctionId?(Xe("Found bidderRequest.auctionId - will pass these values through & not generate our own id"),u.id=t.auctionId,u.auctionId=t.auctionId,Zt(u,"source.tid",A(t,"ortb2.source.tid"))):(Xe("Did not find bidderRequest.auctionId - will generate our own id"),u.id=E),u.imp=y,u.ext=b,Zt(u,"user.ext.eids",I);var P={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(u),bidderRequest:t};return Xe("buildRequests request data for single = ",Ct(u)),this.propertyBag.buildRequestsEnd=(new Date).getTime(),Xe("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),P),P}var D=y.map((function(e){Xe("buildRequests starting to generate non-single response, working on imp : ",e);var n=Object.assign({},u);return n.id=Ne(),n.imp=[e],n.ext=b,Zt(n,"user.ext.eids",I),Xe("buildRequests RequestSingle (for non-single) = ",n),{method:"POST",url:i.getAuctionUrl(),data:JSON.stringify(n),bidderRequest:t}}));return this.propertyBag.buildRequestsEnd=(new Date).getTime(),Xe("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),D),D},getFloorObjectForAuction:function(e){var t={banner:A(e,"mediaTypes.banner.sizes",null),video:A(e,"mediaTypes.video.playerSize",null),native:A(e,"mediaTypes.native.image.sizes",null)};Xe("getFloorObjectForAuction mediaTypesSizes : ",t);var n={};return t.banner&&(n.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner})),t.video&&(n.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video})),t.native&&(n.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native})),Xe("getFloorObjectForAuction returning : ",Ct(n)),n},interpretResponse:function(e,t){var n=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var r=(new Date).getTime(),i=this.propertyBag.whitelabel.bidder,o=this.propertyBag.whitelabel.keyPrefix;Xe("interpretResponse time: ".concat(r," . Time between buildRequests done and interpretResponse start was ").concat(r-this.propertyBag.buildRequestsEnd,"ms")),Xe("serverResponse, request",Ct(e),Ct(t));var s=(e=e.body||{}).id;if(!e.hasOwnProperty("seatbid"))return[];if("object"!==a(e.seatbid))return[];var d=[],l=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");Xe("enhancedAdserverTargeting",l),void 0===l&&(l=!0),Xe("enhancedAdserverTargeting",l),e.seatbid=function(e){Xe("injectAdIdsIntoAllBidResponses",Ct(e));for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.bid.length;r++)n.bid[r].adId="".concat(n.bid[r].impid,"-").concat(t,"-").concat(VC.propertyBag.whitelabel.keyPrefix,"-").concat(r);return e}(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var c=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),u="number"==typeof c,p=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),h=st(p)&&p.length>0,f=0;f<e.seatbid.length;f++)for(var g=e.seatbid[f],m=function(r){var a=n.getBidRequestForBidId(g.bid[r].impid,t.bidderRequest.bids);Xe("seatbid:".concat(f,", bid:").concat(r," Going to set default w h for seatbid/bidRequest"),g.bid[r],a);var m=$C(a),v=m.defaultWidth,y=m.defaultHeight,b=XC(g.bid[r],v,y);b.meta={advertiserDomains:b.adomain||[]};var _=null,w=!1,S=A(b,"ext.prebid.type");Xe("this bid type is : ".concat(S),r);var T={};if(S===Fo)if(w=!0,n.setBidMediaTypeIfNotExist(b,Fo),"outstream"===(_=n.getVideoContextForBidId(b.bidId,t.bidderRequest.bids)))Xe("going to set thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video : ",r),b.renderer=KC(b.bidId);else if(Xe("bid is not an outstream video, will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer: ",r),b.vastUrl="https://".concat(A(b,"ext.prebid.targeting.hb_cache_host","missing_host")).concat(A(b,"ext.prebid.targeting.hb_cache_path","missing_path"),"?id=").concat(A(b,"ext.prebid.targeting.hb_cache_id","missing_id")),T.hb_cache_host=A(b,"ext.prebid.targeting.hb_cache_host","no-host"),T.hb_cache_path=A(b,"ext.prebid.targeting.hb_cache_path","no-path"),b.hasOwnProperty("videoCacheKey"))Xe("videoCacheKey already exists on the bid object, will not add it");else{var I=A(b,"ext.prebid.targeting.hb_uuid","no_hb_uuid");Xe("Adding videoCacheKey: ".concat(I)),b.videoCacheKey=I}else n.setBidMediaTypeIfNotExist(b,Vo);if(l){var k=HC(b.bidId,e.seatbid,v,y);Xe("Going to iterate allBidsForThisBidId",Ct(k)),Object.keys(k).forEach((function(e,t,n){Xe("adding adserverTargeting for ".concat(e," for bidId ").concat(b.bidId)),T[o+"_"+e]=e,T[o+"_"+e+"_crid"]=String(k[e].crid),T[o+"_"+e+"_adv"]=String(k[e].adomain),T[o+"_"+e+"_adId"]=String(k[e].adId),T[o+"_"+e+"_pb_r"]=GC(k[e].price,k[e].ext.prebid.type),T[o+"_"+e+"_size"]=String(k[e].width)+"x"+String(k[e].height),k[e].hasOwnProperty("dealid")&&(T[o+"_"+e+"_dealid"]=String(k[e].dealid)),u&&(T[o+"_"+e+"_omp"]=k[e].price>=c?"1":"0"),w&&(T[o+"_"+e+"_vid"]=_);var r=A(k[e],"ext.bidder.".concat(i,".floor"),null);null!=r&&(T[o+"_"+e+"_flr"]=r);var a=A(k[e],"ext.bidder.".concat(i,".ruleId"),null);null!=a&&(T[o+"_"+e+"_rid"]=a),e.match(/^ozappnexus/)&&(T[o+"_"+e+"_sid"]=String(k[e].cid))}))}else h?Je("You have set a whitelist of adserver keys but this will be ignored because ".concat(i,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):Xe("".concat(i,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var E=WC(b.bidId,e.seatbid),C=E.seat,x=E.bid;x=XC(x,v,y),T[o+"_auc_id"]=String(s),T[o+"_winner"]=String(C),T[o+"_bid"]="true",T[o+"_cache_id"]=A(b,"ext.prebid.targeting.hb_cache_id","no-id"),T[o+"_uuid"]=A(b,"ext.prebid.targeting.hb_uuid","no-id"),l&&(T[o+"_imp_id"]=String(x.impid),T[o+"_pb_v"]=FC,T[o+"_pb"]=x.price,T[o+"_pb_r"]=GC(x.price,S),T[o+"_adId"]=String(x.adId),T[o+"_size"]="".concat(x.width,"x").concat(x.height)),h&&(Xe("Going to filter out adserver targeting keys not in the whitelist: ",p),Object.keys(T).forEach((function(e){-1===p.indexOf(e)&&delete T[e]}))),b.adserverTargeting=T,d.push(b)},v=0;v<g.bid.length;v++)m(v);var y=d,b=A(e,"ext.igi")||[];Array.isArray(b)&&b.length>0&&(b=b.filter((function(e){return!!n.isValidAuctionConfig(e)||(Je("Malformed auction config detected:",e),!1)})),y={bids:d,fledgeAuctionConfigs:b});var _=(new Date).getTime();return Xe("interpretResponse going to return at time ".concat(_," (took ").concat(_-r,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(_-this.propertyBag.buildRequestsStart,"ms")),Xe("interpretResponse arrAllBids (serialised): ",Ct(y)),y},isValidAuctionConfig:function(e){return"object"===a(e)&&null!==e},setBidMediaTypeIfNotExist:function(e,t){e.hasOwnProperty("mediaType")?Xe("found value for thisBid.mediaType: ".concat(e.mediaType)):(Xe("setting thisBid.mediaType = ".concat(t)),e.mediaType=t)},getWhitelabelConfigItem:function(e){if("ozone"===this.propertyBag.whitelabel.bidder)return Z.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),Z.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],i={seat:r.seat,bid:[]},o=[],a=0;a<r.bid.length;a++){var s=r.bid[a];if(!ft(o,s.impid)){o.push(s.impid);for(var d=a+1;d<r.bid.length;d++)r.bid[d].impid===s.impid&&r.bid[d].price>s.price&&(s=r.bid[d]);i.bid.push(s)}}t.push(i)}return t},getUserSyncs:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(Xe("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",n,"usPrivacy",r,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];var o=i.gppString,a=void 0===o?"":o,s=i.applicableSections,d=void 0===s?[]:s;if(e.iframeEnabled){var l=[];for(var c in Z.getConfig("debug")&&l.push("pbjs_debug=true"),l.push("gdpr="+(A(n,"gdprApplies",!1)?"1":"0")),l.push("gdpr_consent="+A(n,"consentString","")),l.push("usp_consent="+(r||"")),l.push("gpp="+a),Array.isArray(d)&&l.push("gpp_sid=".concat(d.join())),this.cookieSyncBag.userIdObject)l.push(c+"="+this.cookieSyncBag.userIdObject[c]);l.push("publisherId="+this.cookieSyncBag.publisherId),l.push("siteId="+this.cookieSyncBag.siteId),l.push("cb="+Date.now()),l.push("bidder="+this.propertyBag.whitelabel.bidder);var u=l.join("&");return u.length>0&&(u="?"+u),Xe("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+u),[{type:"iframe",url:this.getCookieSyncUrl()+u}]}},getBidRequestForBidId:function(e,t){for(var n=0;n<t.length;n++)if(t[n].bidId===e)return t[n];return null},getVideoContextForBidId:function(e,t){var n=this.getBidRequestForBidId(e,t);return null!=n?A(n,"mediaTypes.video.context","unknown"):null},findAllUserIdsFromEids:function(e){var t={};if(!e.hasOwnProperty("userIdAsEids"))return Xe("findAllUserIdsFromEids - no bidRequest.userIdAsEids object - will quit"),this.tryGetPubCidFromOldLocation(t,e),t;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return NC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NC(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.userIdAsEids);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.source]=A(i,"uids.0.id")}}catch(e){r.e(e)}finally{r.f()}return this.tryGetPubCidFromOldLocation(t,e),t},tryGetPubCidFromOldLocation:function(e,t){if(!e.hasOwnProperty("pubcid")){var n=A(t,"crumbs.pubcid");n&&(e["pubcid.org"]=n)}},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return Xe("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];Ke("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},getGetParametersAsObject:function(){var e=Wt(this.getRefererInfo().location);return Xe("getGetParametersAsObject found:",e.search),e.search},getRefererInfo:function(){if(mi().hasOwnProperty("location"))return Xe("FOUND location on getRefererInfo OK (prebid >= 7); will use getRefererInfo for location & page"),mi();Xe("DID NOT FIND location on getRefererInfo (prebid < 7); will use legacy code that ALWAYS worked reliably to get location & page ;-)");try{return{page:top.location.href,location:top.location.href}}catch(e){return{page:window.location.href,location:window.location.href}}},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&(Je("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=(new Date).getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var n={ext:{}};return n=this._unpackVideoConfigIntoIABformat(n,e),this._unpackVideoConfigIntoIABformat(n,t)},_unpackVideoConfigIntoIABformat:function(e,t){var n=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","plcmt","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],r=function(r){o=!1,n.forEach((function(n){n===r&&(e[r]=t[r],o=!0)})),o||(e.ext[r]=t[r])};for(var i in t){var o;r(i)}return t.hasOwnProperty("ext")&&"object"===a(t.ext)&&(t.hasOwnProperty("ext")?e.ext=Xt(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,n){return e=this._addVideoDefaults(e,t,!1),this._addVideoDefaults(e,n,!0)},_addVideoDefaults:function(e,t,n){var r=this.getVideoPlacementValue(A(t,"context"));r&&(e.placement=r);var i=A(t,"skippable",null);return null==i?n&&!e.hasOwnProperty("skip")&&(e.skip=i?1:0):e.skip=i?1:0,e},getLoggableBidObject:function(e){var t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function zC(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function $C(e){if(!e)return Xe("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,n={};return n.defaultWidth=zC(t)[0],n.defaultHeight=zC(t)[1],n}function WC(e,t){for(var n=null,r=null,i=0;i<t.length;i++)for(var o=t[i].bid,a=t[i].seat,s=0;s<o.length;s++)if(o[s].impid===e&&(null==n||n.price<o[s].price)){n=o[s],r=a;break}return{seat:r,bid:n}}function HC(e,t,n,r){for(var i={},o=0;o<t.length;o++)for(var a=t[o].bid,s=t[o].seat,d=0;d<a.length;d++)a[d].impid===e&&(i.hasOwnProperty(s)?i[s].price<a[d].price&&(i[s]=XC(a[d],n,r)):(i[s]=a[d],i[s]=XC(a[d],n,r)));return i}function GC(e,t){var n=Z.getConfig("mediaTypePriceGranularity.".concat(t)),r=Z.getConfig("customPriceBucket"),i=Z.getConfig("priceGranularity"),o=function(e,t,n,r){return"object"===a(t)?t:"custom"===n?r:""}(0,n,i,r),s=function(e,t,n){return"string"==typeof t?t:"object"===a(t)?"custom":"string"==typeof n?n:"auto"}(0,n,i);Xe("getRoundedBid. price:",e,"mediaType:",t,"configkey:",s,"configObject:",o,"mediaTypeGranularity:",n,"strBuckets:",i);var d=S(e,o,Z.getConfig("currency.granularityMultiplier"));Xe("priceStringsObj",d);var l={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(l.hasOwnProperty(s)){var c=l[s];return Xe("getRoundedBid: looking for priceStringsKey:",c),d[c]}return d.auto}function XC(e,t,n){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||n,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function JC(e){Xe("getPlayerSizeFromObject received object",e);var t=A(e,"playerSize");return t||(t=A(e,"ext.playerSize")),t?"object"!==a(t)?(Ke("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:(Ke("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function KC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.ozoneVideo;Xe("newRenderer going to set loaded to ".concat(n?"true":"false"));var r=_n.install({url:VC.getRendererUrl(),config:t,loaded:n,adUnitCode:e});try{r.setRender(YC)}catch(e){Ke("Prebid Error when calling setRender on renderer",r,e)}return Xe("returning renderer object"),r}function YC(e){Xe("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid = (first static, then reference)"),Xe(Ct(VC.getLoggableBidObject(e))),e.renderer.push((function(){Xe("Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)}))}Zr(VC),Xe("*BidAdapter ".concat(FC," was loaded")),p("ozoneBidAdapter");var QC="permutive",ZC=Ye("[PermutiveRTD]"),ex="p_standard",tx="permutive",nx="p_standard_aud",rx=Mo({moduleType:xn,moduleName:QC});function ix(e){return lt(e)?{params:e}:{}}var ox={};function ax(e){return Xt({waitForIt:!1,params:{maxSegs:500,acBidders:[],overwrites:{}}},function(){try{return ix(window.permutive.addons.prebid.getPermutiveRtdConfig())}catch(e){return null}}()||ox,e)}function sx(e){try{return e()}catch(e){Ke(e)}}function dx(e,t){try{return JSON.parse(rx.getDataFromLocalStorage(e))||t}catch(e){return t}}var lx="_unknown_",cx={iab:function(e,t){return{name:e.name,ext:{segtax:t.segtax},segment:(e.segment||[]).map((function(e){return{id:(n=e.id,r=t.iabIds,r[n]||lx)};var n,r})).filter((function(e){return e.id!==lx}))}}};function ux(e,t){var n=function(e){var t={ac:sx((function(){var e=sx((function(){return dx("_psegs",[]).map(Number).filter((function(e){return e>=1e6})).map(String)}))||[],t=sx((function(){return dx("_ppam",[]).map(String)}))||[],n=sx((function(){return dx("_pcrprs",[]).map(String)}))||[];return[].concat(h(n),h(t),h(e))}))||[],ix:sx((function(){return dx("_pindexs",[]).map(String)}))||[],rubicon:sx((function(){return dx("_prubicons",[]).map(String)}))||[],appnexus:sx((function(){return dx("_papns",[]).map(String)}))||[],gam:sx((function(){return dx("_pdfps",[]).map(String)}))||[],ssp:sx((function(){var e=dx("_pssps",{cohorts:[],ssps:[]});return{cohorts:sx((function(){return e.cohorts.map(String)}))||[],ssps:sx((function(){return e.ssps.map(String)}))||[]}})),topics:sx((function(){for(var e=dx("_ppsts",{}),t={},n=function(){var e=o(i[r],2),n=e[0],a=e[1];t[n]=sx((function(){return a.map(String)}))||[]},r=0,i=Object.entries(e);r<i.length;r++)n();return t}))||{}};for(var n in t)if("ssp"===n)t[n].cohorts&&Array.isArray(t[n].cohorts)&&(t[n].cohorts=t[n].cohorts.slice(0,e));else if("topics"===n)for(var r in t[n])t[n][r]=t[n][r].slice(0,e);else t[n]=t[n].slice(0,e);return ZC.logInfo("Read segments",t),t}(A(t,"params.maxSegs"));sx((function(){!function(e,t,n){var r=e&&e.adUnits||u().adUnits,i={deepSetValue:Zt,deepAccess:A,isFn:ot,mergeDeep:Xt},o={appnexusAst:"appnexus"};r&&r.forEach((function(e){e.bids.forEach((function(e){var r=e.bidder;void 0!==o[r]&&(r=o[r]);var a=function(e,t){return f(A(e,"params.acBidders")||[],t)}(t,r),s=function(e,t){var n=A(e,"params.overwrites.".concat(t));return n&&ot(n)?n:null}(t,r);s&&s(e,n,a,i,(function(e){return e}))}))}))}(e,t,n)})),sx((function(){var r;!function(e,t,n){var r,i,a,s,l,c=A(t,"params.acBidders"),u=A(t,"params.maxSegs"),p=A(t,"params.transformations")||[],f=null!==(r=null==n||null===(i=n.ssp)||void 0===i?void 0:i.ssps)&&void 0!==r?r:[],g=null!==(a=null==n||null===(s=n.ssp)||void 0===s?void 0:s.cohorts)&&void 0!==a?a:[],m=null!==(l=null==n?void 0:n.topics)&&void 0!==l?l:{};new Set([].concat(h(c),h(f))).forEach((function(t){var r={ortb2:e[t]||{}},i=[];c.indexOf(t)>-1&&(i=n.ac),f.indexOf(t)>-1&&(i=h(new Set([].concat(h(i),h(g)))).slice(0,u));var a=function(e,t,n,r,i,a,s){var l;ZC.logInfo("Current ortb2 config",{bidder:e,config:t});for(var c=A(s,e)||[],u="permutive.com",p={name:u,segment:n.map((function(e){return{id:e}}))},f=a.filter((function(e){var t=e.id;return cx.hasOwnProperty(t)})).map((function(e){var t=e.id,n=e.config;return cx[t](p,n)})),g={name:tx,segment:c.map((function(e){return{id:e}}))},m=Xt({},t),v=A(m,"ortb2.user.data")||[],y=[],b=0,_=Object.entries(i);b<_.length;b++){var w=o(_[b],2),S=w[0],T=w[1];y.push({name:u,ext:{segtax:Number(S)},segment:T.map((function(e){return{id:e.toString()}}))})}var I=v.filter((function(e){return e.name!==p.name&&e.name!==g.name})).concat(p,f,g).concat(y);ZC.logInfo("Updating ortb2.user.data",{bidder:e,user_data:I}),Zt(m,"ortb2.user.data",I);var k=A(m,"ortb2.user.keywords"),E=(d(l={},ex,n),d(l,nx,r),d(l,tx,c),l),C=Object.entries(E).flatMap((function(e){var t=o(e,2),n=t[0];return t[1].map((function(e){return"".concat(n,"=").concat(e)}))})),x=[k].concat(h(C)).filter(Boolean).join(",");return ZC.logInfo("Updating ortb2.user.keywords",{bidder:e,keywords:x}),Zt(m,"ortb2.user.keywords",x),n.length>0&&(Zt(m,"ortb2.user.ext.data.".concat(ex),n),ZC.logInfo('Extending ortb2.user.ext.data with "'.concat(ex,'"'),n)),c.length>0&&(Zt(m,"ortb2.user.ext.data.".concat(tx),c.map(String)),ZC.logInfo('Extending ortb2.user.ext.data with "'.concat(tx,'"'),c)),n.length>0&&(Zt(m,"ortb2.site.ext.permutive.".concat(ex),n),ZC.logInfo('Extending ortb2.site.ext.permutive with "'.concat(ex,'"'),n)),ZC.logInfo("Updated ortb2 config",{bidder:e,config:m}),m}(t,r,i,g,m,p,n);e[t]=a.ortb2}))}(null===(r=e.ortb2Fragments)||void 0===r?void 0:r.bidder,t,n)}))}var px=!1,hx={name:QC,getBidRequestData:function(e,t,n){var r=function(){ZC.logInfo("Request data updated"),t()},i=ax(n);ux(e,i),sx((function(){if(px||!i.waitForIt||void 0===window.permutive||"function"!=typeof window.permutive.ready)return r();window.permutive.ready((function(){ZC.logInfo("SDK is realtime, updating cohorts"),px=!0,ux(e,ax(n)),r()}),"realtime"),ZC.logInfo("Registered cohort update when SDK is realtime")}))},init:function(e,t){var n;return n=Kt(rx.getDataFromLocalStorage("permutive-prebid-rtd")),ox=ix(n),!0}};Bn("realTimeData",hx),p("permutiveRtdProvider");var fx,gx,mx={appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},maxTimeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},maxTimeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},maxTimeout:1e3},openwrap:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs",noP1Consent:"https://ow.pubmatic.com/openrtb2/auction?source=pbjs"},maxTimeout:500}},vx=(d(fx={},Vo,"banner"),d(fx,qo,"native"),d(fx,Fo,"video"),fx);function yx(e,t){var n=t.params;n&&Zt(e,"ext.prebid.bidder.".concat(t.bidder),n)}var bx,_x=(d(gx={},Cc,{extPrebid:{fn:function(e,t){var n;Zt(e,"ext.prebid",Xt({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(n=e.ext)||void 0===n?void 0:n.prebid)),Z.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t,n;Zt(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:u().version},null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n?void 0:n.channel))}},extPrebidAliases:{fn:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,i=void 0===r?Co:r;if(i.aliasRegistry[t.bidderCode]){var o=i.bidderRegistry[t.bidderCode];if(!o||!o.getSpec().skipPbsAliasing){var a;Zt(e,"ext.prebid.aliases.".concat(t.bidderCode),i.aliasRegistry[t.bidderCode]);var s=Z.getConfig("gvlMapping.".concat(t.bidderCode))||(null==o||null===(a=o.getSpec)||void 0===a?void 0:a.call(o).gvlid);s&&Zt(e,"ext.prebid.aliasgvlids.".concat(t.bidderCode),s)}}}}}),d(gx,xc,{params:{fn:yx},adUnitCode:{fn:function(e,t){var n=t.adUnitCode;n&&Zt(e,"ext.prebid.adunitcode",n)}}}),d(gx,Oc,{mediaType:{fn:function(e,t,n){var r,i,o=n.mediaType;o||(o=fu.hasOwnProperty(t.mtype)?fu[t.mtype]:null===(r=t.ext)||void 0===r||null===(i=r.prebid)||void 0===i?void 0:i.type,vx.hasOwnProperty(o)||(o=Vo)),e.mediaType=o},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===Fo){var n=A(t,"ext.prebid.cache.vastXml")||{},r=n.cacheId,i=n.url;if(!r||!i){var o=A(t,"ext.prebid.targeting")||{},a=o.hb_uuid,s=o.hb_cache_host,d=o.hb_cache_path;a&&s&&d&&(r=a,i="https://".concat(s).concat(d,"?uuid=").concat(a))}r&&i&&Object.assign(e,{videoCacheKey:r,vastUrl:i})}},priority:-10},bidderCode:{fn:function(e,t,n){var r;e.bidderCode=n.seatbid.seat,e.adapterCode=A(t,"ext.prebid.meta.adaptercode")||(null===(r=n.bidRequest)||void 0===r?void 0:r.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var n=A(t,"ext.prebid.bidid");at(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,t){var n=A(t,"ext.prebid.targeting");lt(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,t){e.meta=Xt({},A(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var n=A(t,"ext.prebid.events.win");at(n)&&(e.pbsWurl=n)}}}),d(gx,Pc,{serverSideStats:{fn:function(e,t,n){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var r=o(e,2),i=r[0],a=r[1],s=A(t,"ext.".concat(i,".").concat(n.bidderRequest.bidderCode));s&&(n.bidderRequest[a]=s,n.bidRequests.forEach((function(e){return e[a]=s})))}))}}}),gx),wx=Yt((function(){return mu(yu(),_x,Uc(Rc))}));function Sx(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t===n)return e;var i=e;try{i=u().convertCurrency(e,t,n)}catch(e){if(!r)throw e}return i}function Tx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return[e.cpm,e.currency]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sx;return function(r,i){return null==e&&(e=i),n(r,i,e,t)}}();return ys((function(n){return t.apply(null,e(n))}))}function Ix(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return kx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kx(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function kx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ax(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ax(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ax(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cx=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),xx=vu({processors:wx,context:{netRevenue:!0},imp:function(e,t,n){Object.assign(n,t.pbsData);var r=e(t,n);if((t.bids||[]).forEach((function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&Zt(r,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)})),Object.values(vx).some((function(e){return r[e]})))return r.secure=n.s2sBidRequest.s2sConfig.secure,r},request:function(e,t,n,r){if(t.length){var i,o,a=r.s2sBidRequest,s=r.requestedBidders,d=r.eidPermissions,l=e(t,n,r);return l.tmax=null!==(i=a.s2sConfig.timeout)&&void 0!==i?i:Math.min(.75*a.requestBidsTimeout,null!==(o=a.s2sConfig.maxTimeout)&&void 0!==o?o:Nx.maxTimeout),l.ext.tmaxmax=l.ext.tmaxmax||a.requestBidsTimeout,[l.app,l.dooh,l.site].forEach((function(e){var t;!e||null!==(t=e.publisher)&&void 0!==t&&t.id||Zt(e,"publisher.id",a.s2sConfig.accountId)})),st(d)&&d.length>0&&(s&&st(s)&&(d=d.map((function(e){return Ex(Ex({},e),{},{bidders:e.bidders.filter((function(e){return s.includes(e)}))})}))),Zt(l,"ext.prebid.data.eidpermissions",d)),r.transmitTids||Zt(l,"ext.prebid.createtids",!1),l}Ke("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,n){var r,i,o=n.actualBidRequests.get(n.seatbid.seat);null==o&&(o=n.actualBidRequests.get(null)),o&&Object.assign(n,{bidRequest:o,bidderRequest:n.actualBidderRequests.find((function(e){return e.bidderCode===o.bidder}))});var a=e(t,n);return a.requestBidder=null===(r=o)||void 0===r?void 0:r.bidder,null!==(i=a.native)&&void 0!==i&&i.ortb&&(a.adm=a.native.ortb),a.requestTimestamp=n.requestTimestamp,{bid:Object.assign(cr(C.GOOD,{src:j,bidId:o?o.bidId||o.bid_Id:null,transactionId:n.adUnit.transactionId,adUnitId:n.adUnit.adUnitId,auctionId:n.bidderRequest.auctionId}),a),adUnit:n.adUnit.code}},overrides:(bx={},d(bx,xc,{id:function(e,t,n,r){t.id=r.impId},params:function(e,t,n,r){var i,o=r.s2sBidRequest.s2sConfig.adapterOptions,a=Ix(r.actualBidRequests.values());try{for(a.s();!(i=a.n()).done;){var s=i.value;yx(t,s),o&&o[s.bidder]&&Object.assign(t.ext.prebid.bidder[s.bidder],o[s.bidder])}}catch(e){a.e(e)}finally{a.f()}},bidfloor:function(e,t,n,r){var i,o,a=ws(Tx((function(e){return[e.bidfloor,e.bidfloorcur]}))),s=Ix(r.actualBidRequests.values());try{for(s.s();!(o=s.n()).done;){var d=o.value,l={};if(e(l,d,r),null==l.bidfloorcur||null==l.bidfloor){i=null;break}i=null==i?l:a(i,l)}}catch(e){s.e(e)}finally{s.f()}null!=i&&Object.assign(t,i)}}),d(bx,Cc,{fpd:function(e,t,n,r){var i,s,d;r.transmitTids&&Zt(t,"source.tid",n.auctionId),Xt(t,null===(i=r.s2sBidRequest.ortb2Fragments)||void 0===i?void 0:i.global),r.s2sBidRequest.s2sConfig.extPrebid&&"object"===a(r.s2sBidRequest.s2sConfig.extPrebid)&&Zt(t,"ext.prebid",Xt((null===(d=t.ext)||void 0===d?void 0:d.prebid)||{},r.s2sBidRequest.s2sConfig.extPrebid)),r.getRedactor().ortb2(t);var l=Object.entries((null===(s=r.s2sBidRequest.ortb2Fragments)||void 0===s?void 0:s.bidder)||{}).filter((function(e){var t=o(e,1)[0],n=r.s2sBidRequest.s2sConfig.bidders;return r.s2sBidRequest.s2sConfig.allowUnknownBidderCodes||n&&n.includes(t)})).map((function(e){var t=o(e,2),n=t[0],i=t[1];return{bidders:[n],config:{ortb2:r.getRedactor(n).ortb2(i)}}}));l.length&&Zt(t,"ext.prebid.bidderconfig",l)},extPrebidAliases:function(e,t,n,r){r.actualBidderRequests.forEach((function(n){return e(t,n,r)}))},sourceExtSchain:function(e,t,n,r){var i=A(t,"ext.prebid.schains")||[],o=new Set(i.flatMap((function(e){return e.bidders})));(i=Object.values(i.concat(r.actualBidderRequests.filter((function(e){return!o.has(e.bidderCode)})).map((function(e){return{bidders:[e.bidderCode],schain:A(e,"bids.0.schain")}}))).filter((function(e){var t=e.bidders,n=e.schain;return(null==t?void 0:t.length)>0&&n})).reduce((function(e,t){var n=t.bidders,r=t.schain,i=JSON.stringify(r);return e.hasOwnProperty(i)||(e[i]={bidders:new Set,schain:r}),n.forEach((function(t){return e[i].bidders.add(t)})),e}),{})).map((function(e){var t=e.bidders,n=e.schain;return{bidders:Array.from(t),schain:n}}))).length&&Zt(t,"ext.prebid.schains",i)}}),d(bx,Pc,{serverSideStats:function(e,t,n,r){r.actualBidderRequests.forEach((function(i){return e(t,n,Ex(Ex({},r),{},{bidderRequest:i,bidRequests:i.bids}))}))},paapiConfigs:function(e,t,n,r){var i=Object.values(r.impContext).flatMap((function(e){return(e.paapiConfigs||[]).map((function(t){var n=e.actualBidderRequests.find((function(e){return e.bidderCode===t.bidder})),r=e.actualBidRequests.get(t.bidder);return{adUnitCode:e.adUnit.code,ortb2:null==n?void 0:n.ortb2,ortb2Imp:null==r?void 0:r.ortb2Imp,bidder:t.bidder,config:t.config}}))}));i.length>0&&(t.paapi=i)}}),bx)});function Ox(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Px,Dx,Rx=Z.getConfig,jx=j,Mx=0,Nx={bidders:Object.freeze([]),syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]},maxTimeout:1500};function Ux(e,t,n,r,i){if(Px.length!==Mx){Mx++;var o={},a=Rx("userSync.filterSettings");if(a){var s=a.all,d=a.iframe||s,l=a.image||s;d&&(o=Object.assign({iframe:d},o)),l&&(o=Object.assign({image:l},o))}var c={uuid:Ne(),bidders:e,account:i.accountId,filterSettings:o},u=i.userSyncLimit;dt(u)&&u>0&&(c.limit=u),t&&(c.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(c.gdpr_consent=t.consentString)),n&&(c.us_privacy=n),r&&(c.gpp_sid=r.applicableSections.join(),c.gpp=r.gppString),"boolean"==typeof i.coopSync&&(c.coopSync=i.coopSync);var p=JSON.stringify(c);sn(Fx(i.syncEndpoint,t),(function(e){try{Lx((e=JSON.parse(e)).bidder_status,i)}catch(e){Ke(e)}}),p,{contentType:"text/plain",withCredentials:!0})}}function Lx(e,t){if(0!==e.length){var n=e.shift();n.no_cookie?function(e,t,n,r,i){i.syncUrlModifier&&"function"==typeof i.syncUrlModifier[n]&&(t=i.syncUrlModifier[n](e,t,n)),function(e,t,n,r,i){t?"image"===e||"redirect"===e?(Ge('Invoking image pixel user sync for bidder: "'.concat(n,'"')),vt(t,r,i)):"iframe"===e?(Ge('Invoking iframe user sync for bidder: "'.concat(n,'"')),yt(t,r,i)):(Ke('User sync type "'.concat(e,'" not supported for bidder: "').concat(n,'"')),r()):(Ke('No sync url for bidder "'.concat(n,'": ').concat(t)),r())}(e,t,n,r,i.syncTimeout)}(n.usersync.type,n.usersync.url,n.bidder,Lx.bind(null,e,t),t):Lx(e,t)}}Z.setDefaults({s2sConfig:Nx}),Rx("s2sConfig",(function(e){return function(e){if(e){var t=Array.isArray(e)?e:[e],n=[],r=t.every((function(e,t,r){!function(e){["endpoint","syncEndpoint"].forEach((function(t){if(at(e[t])){var n=e[t];e[t]={p1Consent:n,noP1Consent:n}}!lt(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach((function(n){e[t][n]||Je("s2sConfig.".concat(t,".").concat(n," not defined.  PBS request will be skipped in some P1 scenarios."))}))}))}(e);var i=function(e){if(e.defaultVendor){var t=e.defaultVendor,n=Object.keys(e);if(!mx[t])return Ke("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(mx[t]).forEach((function(r){Nx[r]!==e[r]&&f(n,r)||(e[r]=mx[t][r])}))}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(e);if(!1!==i){var o=function(e){var t=Object.keys(e);if(["accountId","endpoint"].filter((function(e){return!f(t,e)&&(Ke(e+" missing in server to server config"),!0)})).length>0)return!1}(e);if(!1!==o)return Array.isArray(e.bidders)&&(r[t].bidders=e.bidders.filter((function(e){return-1===n.indexOf(e)&&(n.push(e),!0)}))),!0}return Je("prebidServer: s2s config is disabled"),!1}));return r?Px=t:void 0}}(e.s2sConfig)}));var Bx={};function qx(e){var t,n,r=function(e,t){if([e,t].every(at))return Bx["".concat(e).concat(t)]}(e.auctionId,e.adId);at(r)&&(Ge('Invoking image pixel for wurl on BID_WIN: "'.concat(r,'"')),vt(r),[t=e.auctionId,n=e.adId].every(at)&&(Bx["".concat(t).concat(n)]=void 0))}function Fx(e,t){var n=Bl(t),r=n?e.p1Consent:e.noP1Consent;return r||Je("Missing matching consent URL when gdpr="+n),r}function Vx(e){var t,n,r;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,n=e[0].uspConsent,r=e[0].gppConsent),{gdprConsent:t,uspConsent:n,gppConsent:r}}var zx=Rn("sync",(function(e,t,n,r){var i=r.onResponse,a=r.onError,s=r.onBid,d=r.onFledge,l=Vx(t).gdprConsent,c=Ct(e.ad_units),u=c.map((function(e){return e.bids.map((function(e){return e.bidder})).filter(wt)})).reduce(St,[]).filter(wt),p=e.metrics.measureTime("buildRequests",(function(){return function(e,t,n,r,i){var a=Pt(),s=new Set,d=[],l=bo(e.s2sConfig),c=function(){var e=oo(l),t={};return function(n){return null==n?e:(t.hasOwnProperty(n)||(t[n]=oo(Kr(En,n))),t[n])}}();(n=n.map((function(e){return c().bidRequest(e)}))).forEach((function(e){var r=new Map;n.bids=e.bids.map((function(e){return c(e.bidder).bidRequest(e)})),e.bids.forEach((function(n){null!=n.mediaTypes&&Je("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(e.code,", bidder: ").concat(n.bidder)),r.set(n.bidder,Tt(n.bid_id,t))}));for(var i=e.code,o=1;s.has(i);)o++,i="".concat(e.code,"-").concat(o);s.add(i),d.push(Ex(Ex(Ex({},e),{},{adUnitCode:e.code},Nt(r.values().next().value||{},["userId","userIdAsEids","schain"])),{},{pbsData:{impId:i,actualBidRequests:r,adUnit:e}}))}));var u=Ex(Ex({},Object.fromEntries(Object.entries(t[0]).filter((function(e){var t=o(e,1)[0];return!Cx.has(t)})))),{},{paapi:{enabled:t.some((function(e){var t;return null===(t=e.paapi)||void 0===t?void 0:t.enabled}))}});return xx.toORTB({bidderRequest:u,bidRequests:d,context:{currency:Z.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:a,s2sBidRequest:e,requestedBidders:r,actualBidderRequests:t,eidPermissions:i,nativeRequest:e.s2sConfig.ortbNative,getRedactor:c,transmitTids:Qn(sr,l)}})}(e,t,c,u,Dx)})),h=p&&JSON.stringify(p);Xe("BidRequest: "+h);var g=Fx(e.s2sConfig.endpoint,l),m=A(e,"s2sConfig.customHeaders",{});if(p&&h&&g){var v=e.metrics.startTiming("net");n(g,{success:function(t){var n;v();try{n=JSON.parse(t);var r=e.metrics.measureTime("interpretResponse",(function(){return function(e,t){return xx.fromORTB({response:e,request:t})}(n,p)})),o=r.bids,a=r.paapi;o.forEach(s),a&&a.forEach(d)}catch(e){Ke(e)}!n||n.status&&f(n.status,"Error")?(Ke("error parsing response: ",n?n.status:"not valid JSON"),i(!1,u)):i(!0,u,n)},error:function(){v(),a.apply(this,arguments)}},h,{contentType:"text/plain",withCredentials:!0,browsingTopics:Qn(or,bo(e.s2sConfig)),customHeaders:m})}else Ke("PBS request not made.  Check endpoints.")}),"processPBSRequest");function $x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$x(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}De().setEidPermissions=function(e){Dx=e},Co.registerBidAdapter(new function(){var e=new dr("prebidServer");return e.callBids=function(e,t,n,r,i){var o=e.metrics=$r(A(t,"0.metrics")).newMetrics().renameWith((function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]}));r=o.startTiming("total").stopBefore(r),t.forEach((function(e){return $r(e.metrics).join(o,{continuePropagation:!1})}));var a=Vx(t),s=a.gdprConsent,l=a.uspConsent,c=a.gppConsent;Array.isArray(Px)&&(e.s2sConfig&&e.s2sConfig.syncEndpoint&&Fx(e.s2sConfig.syncEndpoint,s)&&Ux(e.s2sConfig.bidders.map((function(e){return Co.aliasRegistry[e]||e})).filter((function(e,t,n){return n.indexOf(e)===t})),s,l,c,e.s2sConfig),zx(e,t,i,{onResponse:function(n,i,a){n&&t.forEach((function(e){return Rr(x.BIDDER_DONE,e)})),function(e,t){var n,r;return(null==e||null===(n=e.extPrebid)||void 0===n?void 0:n.returnallbidstatus)&&(null==t||null===(r=t.ext)||void 0===r?void 0:r.seatnonbid)}(e.s2sConfig,a)&&Rr(x.SEAT_NON_BID,{seatnonbid:a.ext.seatnonbid,auctionId:t[0].auctionId,requestedBidders:i,response:a,adapterMetrics:o}),r(!1),function(e,t,n,r){e.forEach((function(e){var i=Co.getBidAdapter(e);i&&i.registerSyncs&&Z.runWithBidder(e,i.registerSyncs.bind(i,[],t,n,r))}))}(i,s,l,c)},onError:function(n,i){var o,a=(null==e||null===(o=e.s2sConfig)||void 0===o?void 0:o.endpoint)||{},s=a.p1Consent,d=void 0===s?"":s,l=a.noP1Consent,c=void 0===l?"":l;Ke(d===c?"Prebid server call failed: '".concat(n,"'. Endpoint: \"").concat(d,'"}'):"Prebid server call failed: '".concat(n,"'. Endpoints: p1Consent \"").concat(d,'", noP1Consent "').concat(c,'"}'),i),t.forEach((function(e){return Rr(x.BIDDER_ERROR,{error:i,bidderRequest:e})})),r(i.timedOut)},onBid:function(t){var r,i,o,a=t.adUnit,s=t.bid,d=s.metrics=e.metrics.fork().renameWith();d.checkpoint("addBidResponse"),null!=s.requestId&&null!=s.requestBidder||e.s2sConfig.allowUnknownBidderCodes?d.measureTime("addBidResponse.validate",(function(){return oi(a,s)}))?(n(a,s),s.pbsWurl&&(r=s.auctionId,i=s.adId,o=s.pbsWurl,[r,i].every(at)&&(Bx["".concat(r).concat(i)]=o))):n.reject(a,s,N.INVALID):(Je("PBS adapter received bid from unknown bidder (".concat(s.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),n.reject(a,s,N.BIDDER_DISALLOWED))},onFledge:function(e){Z.runWithBidder(e.bidder,(function(){ii(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ox(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ox(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({auctionId:t[0].auctionId},e),{config:e.config})}))}}))},Or(x.BID_WON,qx),Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:jx})},"prebidServer"),p("prebidServerBidAdapter");var Hx="pubmatic",Gx="PubMatic: ",Xx="USD",Jx=void 0,Kx="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Yx="Video.plcmt param missing",Qx={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},Zx={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},eO={mimes:Zx.ARRAY,minduration:Zx.NUMBER,maxduration:Zx.NUMBER,startdelay:Zx.NUMBER,playbackmethod:Zx.ARRAY,api:Zx.ARRAY,protocols:Zx.ARRAY,w:Zx.NUMBER,h:Zx.NUMBER,battr:Zx.ARRAY,linearity:Zx.NUMBER,placement:Zx.NUMBER,plcmt:Zx.NUMBER,minbitrate:Zx.NUMBER,maxbitrate:Zx.NUMBER,skip:Zx.NUMBER},tO={ICON:1,IMAGE:3},nO={battr:Zx.ARRAY},rO={1:"PMP",5:"PREF",6:"PMPG"},iO={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,r=iO.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),o=0;o<window.bluebillywig.renderers.length;o++)if(window.bluebillywig.renderers[o]._id===r){n=window.bluebillywig.renderers[o];break}n?n.bootstrap(t,i):Je("".concat(Gx,": Couldn't find a renderer with ").concat(r))}else Je("".concat(Gx,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=Kx.replace("$RENDERER",e),r=_n.install({url:n,loaded:!1,adUnitCode:t});try{r.setRender(iO.outstreamRender)}catch(e){Je("".concat(Gx,": Error tying to setRender on renderer"),e)}return r},outstreamRender:function(e){e.renderer.push((function(){iO.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},oO=[Vo,Fo,qo],aO=0,sO=!1,dO=["pubmatic"],lO=["all"];function cO(e,t){if(!at(t))return t&&Je(Gx+"Ignoring param key: "+e+", expects string-value, found "+a(t)),Jx;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||Jx;case"yob":return parseInt(t)||Jx;default:return t}}function uO(){var e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);switch(null==e?void 0:e.effectiveType){case"ethernet":return 1;case"wifi":return 2;case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;default:return 0}}function pO(e,t,n){var r,i="Ignoring param key: "+e+", expects "+n+", found "+a(t);switch(n){case Zx.BOOLEAN:r=ct;break;case Zx.NUMBER:r=dt;break;case Zx.STRING:r=at;break;case Zx.ARRAY:r=st}return r(t)?t:(Je(Gx+i),Jx)}var hO={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},fO=Object.values(hO);function gO(e){var t;if(e.ortb){e=e.ortb,t=Wx(Wx({ver:"1.2"},e),{},{assets:[]});var n=e.assets,r=function(e){return e.title||e.img||e.data||e.video};if(n.length<1||!n.some((function(e){return r(e)})))return Je("".concat(Gx,": Native assets object is empty or contains some invalid object")),sO=!0,t;n.forEach((function(e){var n=e;n.img&&(n.img.type==tO.IMAGE?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:Jx),n.h=n.h||n.height||(n.sizes?n.sizes[1]:Jx),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:Jx),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:Jx)):n.img.type==tO.ICON&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:Jx),n.h=n.h||n.height||(n.sizes?n.sizes[1]:Jx))),n&&void 0!==n.id&&r(n)&&t.assets.push(n)}))}else t=function(e){if(!e&&!lt(e))return Je("".concat(Gx,": Native assets object is empty or not an object: ").concat(e)),void(sO=!0);var t={ver:"1.2",assets:[]};for(var n in e)if(!q.includes(n))if(R.hasOwnProperty(n)||fO.includes(n)){var r=e[n],i=0;r.required&&ct(r.required)&&(i=Number(r.required));var o={id:t.assets.length,required:i};if(n in hO)o.data={type:L[hO[n]]},(r.len||r.length)&&(o.data.len=r.len||r.length),r.ext&&(o.data.ext=r.ext);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?B.ICON:B.MAIN},r.aspect_ratios)if(st(r.aspect_ratios))if(r.aspect_ratios.length){var a=r.aspect_ratios[0],s=a.min_width,d=a.min_height;qt(s)&&qt(d)?(o.img.wmin=s,o.img.hmin=d):Je("".concat(Gx,": image.aspect_ratios min_width or min_height are invalid: ").concat(s,", ").concat(d));var l=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));l.length>0&&(o.img.ext={aspectratios:l})}else Je("".concat(Gx,": image.aspect_ratios was passed, but it's empty: ").concat(r.aspect_ratios));else Je("".concat(Gx,": image.aspect_ratios was passed, but it's not a an array: ").concat(r.aspect_ratios));o.img.w=r.w||r.width,o.img.h=r.h||r.height,o.img.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:Jx),o.img.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:Jx),r.sizes&&(2===r.sizes.length&&qt(r.sizes[0])&&qt(r.sizes[1])?(Xe("".concat(Gx,": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):Je("".concat(Gx,": image.sizes was passed, but its value is not an array of integers: ").concat(r.sizes))),r.ext&&(o.img.ext=r.ext),r.mimes&&(o.img.mimes=r.mimes)}else"title"===n?(o.title={len:r.len||r.length||140},r.ext&&(o.title.ext=r.ext)):"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}else Je("".concat(Gx,": Unrecognized native asset code: ").concat(n,". Asset will be ignored."));return t.assets.length<1?(Je("".concat(Gx,": Could not find any valid asset")),void(sO=!0)):t}(e);return t}function mO(e){var t,n=e.mediaTypes.banner.sizes,r=[];if(n!==Jx&&st(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=Jx,Je(Gx+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(r=[],n.forEach((function(e){e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=xt()?0:1;var i=Wx({},A(e,"ortb2Imp.banner"));for(var o in nO)i.hasOwnProperty(o)&&(t[o]=pO(o,i[o],nO[o]))}else Je(Gx+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=Jx;return t}function vO(e){var t,n=Xt(A(e.mediaTypes,"video"),e.params.video);if(n!==Jx){for(var r in t={},function(e,t){A(e,"plcmt")||Je(Yx+" for "+t)}(n,e.adUnitCode),eO)n.hasOwnProperty(r)&&(t[r]=pO(r,n[r],eO[r]));st(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):dt(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=Jx,Je(Gx+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function yO(e,t){(t=t.filter((function(e){return"string"==typeof e||(Je(Gx+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&(Je(Gx+"acat: Selected: ",t),e.ext.acat=t)}function bO(e){return!0===st(e)&&e.length>0}var _O={code:Hx,gvlid:76,supportedMediaTypes:[Vo,Fo,qo],isBidRequestValid:function(e){if(e&&e.params){if(!at(e.params.publisherId))return Je(Gx+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(Fo)){var t=A(e.mediaTypes,"video.mimes"),n=A(e,"params.video.mimes");if(!1===bO(t)&&!1===bO(n))return Je(Gx+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[Fo].hasOwnProperty("context"))return Ke("".concat(Gx,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[Fo].context&&!at(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[Fo].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(Vo)||e.mediaTypes.hasOwnProperty(qo)?(delete e.mediaTypes[Fo],Je("".concat(Gx,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(Ke("".concat(Gx,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,r,i,o,s,d,l,c,u,p,f,g,m,v;t&&t.refererInfo&&(v=t.refererInfo);var y,b=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(v),_=function(e){return{id:""+(new Date).getTime(),at:1,cur:[Xx],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language,connectiontype:uO()},user:{},ext:{}}}(b),w="",S=[],T=[],I=[],k=Ne();if(e.forEach((function(e){var n,r;if(e.params.wiid=e.params.wiid||t.auctionId||k,(y=Ct(e)).params.adSlot=y.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=at(t=e.params.adSlot)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&Je(Hx+": adSlot must be a string. Ignoring adSlot"),"");var n=e.params.adSlot,r=n.split(":");if(n=r[0],2==r.length&&(e.params.adUnitIndex=r[1]),r=n.split("@"),e.params.adUnit=r[0],r.length>1){if(2!=(r=r[1].split("x")).length)return void Je(Gx+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(r[0],10),e.params.height=parseInt(r[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(Vo)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,o=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&o.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(y),y.mediaTypes&&y.mediaTypes.hasOwnProperty("video")||y.params.hasOwnProperty("video"));else if(!(y.hasOwnProperty("mediaTypes")&&y.mediaTypes.hasOwnProperty(qo)||0!==y.params.width||0!==y.params.height))return void Je(Gx+"Skipping the non-standard adslot: ",y.params.adSlot,JSON.stringify(y));b.pubId=b.pubId||y.params.publisherId,(b=function(e,t){var n,r,i;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),Qx)Qx.hasOwnProperty(n)&&(r=e[n])&&("object"===a(i=Qx[n])&&(r=i.f(r,t)),at(r)?t[n]=r:Je(Gx+"Ignoring param : "+n+" with value : "+Qx[n]+", expects string-value, found "+a(r)));return t}(y.params,b)).transactionId=null===(n=y.ortb2Imp)||void 0===n||null===(r=n.ext)||void 0===r?void 0:r.tid,""===w?w=y.params.currency||Jx:y.params.hasOwnProperty("currency")&&w!==y.params.currency&&Je(Gx+"Currency specifier ignored. Only one currency permitted."),y.params.currency=w,y.params.hasOwnProperty("dctr")&&at(y.params.dctr)&&S.push(y.params.dctr),y.params.hasOwnProperty("bcat")&&st(y.params.bcat)&&(T=T.concat(y.params.bcat)),y.params.hasOwnProperty("acat")&&st(y.params.acat)&&(I=I.concat(y.params.acat));var i=function(e,t){var n,r,i,o,s={},d={},l=e.hasOwnProperty("sizes")?e.sizes:[],c="",u=[],p=null==t||null===(n=t.paapi)||void 0===n?void 0:n.enabled;if(function(e,t){t.params.deals&&(st(t.params.deals)?t.params.deals.forEach((function(t){at(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):Je(Gx+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):Je(Gx+"Error: bid.params.deals should be an array of strings."))}(s={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:cO("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:cO("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?cO("currency",e.params.currency):Xx,displaymanager:"Prebid.js",displaymanagerver:"9.10.0",pmp:(null===(r=e.ortb2Imp)||void 0===r?void 0:r.pmp)||void 0},e),function(e,t){var n,r="";if(t.params.dctr)if(at(r=t.params.dctr)&&r.length>0){var i=r.split("|");r="",i.forEach((function(e){r+=e.length>0?e.trim()+"|":""})),n=r.length,"|"===r.substring(n,n-1)&&(r=r.substring(0,n-1)),e.ext.key_val=r.trim()}else Je(Gx+"Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")}(s,e),function(e,t){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var i,o=n.segments.length;r+="jw-id="+n.content.id;for(var a=0;a<o;a++)r+="|jw-"+n.segments[a]+"=1";(i=e.ext)&&void 0===i.key_val?i.key_val=r:i.key_val+="|"+r}}(s,e),e.hasOwnProperty("mediaTypes"))for(c in e.mediaTypes)switch(c){case Vo:(i=mO(e))!==Jx&&(s.banner=i);break;case qo:d.request=JSON.stringify(gO(e.nativeParams)),sO?(Je(Gx+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),sO=!1):s.native=d;break;case Fo:(o=vO(e))!==Jx&&(s.video=o)}else i={pos:0,w:e.params.width,h:e.params.height,topframe:xt()?0:1},st(l)&&l.length>1&&((l=l.splice(1,l.length-1)).forEach((function(e){u.push({w:e[0],h:e[1]})})),i.format=u),s.banner=i;return function(e,t){var n=Wx({},A(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&Zt(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var r=A(n,"adserver.".concat(t));"string"==typeof r&&r&&(Zt(e,"ext.data.adserver.".concat(t.toLowerCase()),r),"adslot"===t&&Zt(e,"ext.dfp_ad_unit_code",r))})):Zt(e,"ext.data.".concat(t),n[t])}));var r=A(t,"ortb2Imp.ext.gpid");r&&Zt(e,"ext.gpid",r)}(s,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||Z.getConfig("pubmatic.disableFloors")||[Vo,Fo,qo].forEach((function(r){if(e.hasOwnProperty(r)){var i=[];"banner"===r&&(e[r].w&&e[r].h&&i.push([e[r].w,e[r].h]),st(e[r].format)&&e[r].format.forEach((function(e){return i.push([e.w,e.h])}))),0===i.length&&i.push("*"),i.forEach((function(i){var o=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:i});if(Xe(Gx,"floor from floor module returned for mediatype:",r," and size:",i," is: currency",o.currency,"floor",o.floor),"object"===a(o)&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){var s=parseFloat(o.floor);Xe(Gx,"floor from floor module:",s,"previous floor value",n,"Min:",Math.min(s,n)),n=-1===n?s:Math.min(s,n),Xe(Gx,"new floor value:",n)}}))}})),e.bidfloor&&(Xe(Gx,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:Jx,Xe(Gx,"new impObj.bidfloor value:",e.bidfloor)}(s,e),function(e,t,n){var r,i,o;n?(e.ext=e.ext||{},void 0!==(null==t||null===(r=t.ortb2Imp)||void 0===r||null===(i=r.ext)||void 0===i?void 0:i.ae)&&(e.ext.ae=t.ortb2Imp.ext.ae)):null!==(o=e.ext)&&void 0!==o&&o.ae&&delete e.ext.ae}(s,e,p),s.hasOwnProperty(Vo)||s.hasOwnProperty(qo)||s.hasOwnProperty(Fo)?s:Jx}(y,t);i&&_.imp.push(i)})),0!=_.imp.length){_.site.publisher.id=b.pubId.trim(),aO=b.pubId.trim(),_.ext.wrapper={},_.ext.wrapper.profile=parseInt(b.profId)||Jx,_.ext.wrapper.version=parseInt(b.verId)||Jx,_.ext.wrapper.wiid=b.wiid||t.auctionId,_.ext.wrapper.wv="prebid_prebid_9.10.0",_.ext.wrapper.transactionId=b.transactionId,_.ext.wrapper.wp="pbjs";var E,C,x=t?kn.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==x){if(_.ext.marketplace={},t&&1==x){var O=kn.get(t.bidderCode,"allowedAlternateBidderCodes");st(O)?(O=O.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(wt),dO=O.includes("*")?lO:[].concat(h(dO),h(O))):dO=lO}_.ext.marketplace.allowedbidders=dO.filter(wt)}_.user.gender=b.gender?b.gender.trim():Jx,_.user.geo={},_.user.yob=cO("yob",b.yob),_.site.page=b.kadpageurl.trim()||_.site.page.trim(),_.site.domain=(E=_.site.page,(C=document.createElement("a")).href=E,C.hostname),"object"===a(Z.getConfig("content"))&&(_.site.content=Z.getConfig("content")),"object"===a(Z.getConfig("device"))&&(_.device=Object.assign(_.device,Z.getConfig("device"))),_.device.language=_.device.language&&_.device.language.split("-")[0],Zt(_,"source.tid",null==t||null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(_.test=1),e[0].schain&&Zt(_,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(Zt(_,"user.ext.consent",t.gdprConsent.consentString),Zt(_,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&Zt(_,"regs.ext.us_privacy",t.uspConsent),null!=t&&null!==(i=t.gppConsent)&&void 0!==i&&i.gppString?(Zt(_,"regs.gpp",t.gppConsent.gppString),Zt(_,"regs.gpp_sid",t.gppConsent.applicableSections)):null!=t&&null!==(o=t.ortb2)&&void 0!==o&&null!==(s=o.regs)&&void 0!==s&&s.gpp&&(Zt(_,"regs.gpp",t.ortb2.regs.gpp),Zt(_,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===Z.getConfig("coppa")&&Zt(_,"regs.coppa",1),null!=t&&null!==(d=t.ortb2)&&void 0!==d&&null!==(l=d.regs)&&void 0!==l&&null!==(c=l.ext)&&void 0!==c&&c.dsa&&Zt(_,"regs.ext.dsa",t.ortb2.regs.ext.dsa),function(e,t){var n=A(t,"0.userIdAsEids");st(n)&&n.length>0&&Zt(e,"user.eids",n)}(_,e);var P,D,R,j=t&&t.ortb2||{},M=j.user,N=j.device,U=j.site,L=j.bcat,B=j.badv;if(U){var q=_.site,F=q.page,V=q.domain,z=q.ref;Xt(_,{site:U}),_.site.page=F,_.site.domain=V,_.site.ref=z}if(M&&Xt(_,{user:M}),B&&Xt(_,{badv:B}),L&&(T=T.concat(L)),null!=N&&N.sua&&(_.device.sua=null==N?void 0:N.sua),null!=N&&null!==(u=N.ext)&&void 0!==u&&u.cdep&&Zt(_,"device.ext.cdep",N.ext.cdep),null!=M&&M.geo&&null!=N&&N.geo?(_.device.geo=Wx(Wx({},_.device.geo),N.geo),_.user.geo=Wx(Wx({},_.user.geo),M.geo)):(null!=M&&M.geo||null!=N&&N.geo)&&(_.user.geo=_.device.geo=null!=M&&M.geo?Wx(Wx({},_.user.geo),M.geo):Wx(Wx({},_.user.geo),N.geo)),null!==(p=j.ext)&&void 0!==p&&null!==(f=p.prebid)&&void 0!==f&&null!==(g=f.bidderparams)&&void 0!==g&&null!==(m=g[t.bidderCode])&&void 0!==m&&m.acat){var $=j.ext.prebid.bidderparams[t.bidderCode].acat;yO(_,$)}else I.length&&yO(_,I);return function(e,t){(t=t.filter((function(e){return"string"==typeof e||(Je(Gx+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;Je(Gx+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(Je(Gx+"bcat: Selected: ",t),e.bcat=t)}(_,T),null!=t&&t.timeout?_.tmax=t.timeout:_.tmax=null===(P=window)||void 0===P||null===(D=P.PWT)||void 0===D||null===(R=D.versionDetails)||void 0===R?void 0:R.timeout,_.ext.epoch=(new Date).getTime(),"object"===a(Z.getConfig("app"))&&(_.app=Z.getConfig("app"),_.app.publisher=_.site.publisher,_.app.ext=_.site.ext||Jx,"object"!==a(_.app.content)&&(_.app.content=_.site.content||Jx),delete _.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(_),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],r=Xx,i=JSON.parse(t.data),a=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&st(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((function(e){e.bid&&st(e.bid)&&e.bid.forEach((function(o){var s={requestId:o.impid,cpm:parseFloat((o.price||0).toFixed(2)),width:o.w,height:o.h,creativeId:o.crid||o.id,dealId:o.dealid,currency:r,netRevenue:!0,ttl:300,referrer:a,ad:o.adm,pm_seat:e.seat||null,pm_dspid:o.ext&&o.ext.dspid?o.ext.dspid:null,partnerImpId:o.id||""};i.imp&&i.imp.length>0&&i.imp.forEach((function(e){if(o.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=oO[e.ext.bidtype];else{Xe(Gx+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,r="",i=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=Vo;else if(i.test(n))t.mediaType=Fo;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=qo)}catch(e){Je(Gx+"Error: Cannot parse native reponse for ad response: "+n)}}}(o,s),s.mediaType){case Vo:break;case Fo:s.width=o.hasOwnProperty("w")?o.w:e.video.w,s.height=o.hasOwnProperty("h")?o.h:e.video.h,s.vastXml=o.adm,function(e,t){var n,r,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(n=t.bidderRequest.bids[o].params,r=t.bidderRequest.bids[o].mediaTypes[Fo].context,i=t.bidderRequest.bids[o].adUnitCode);r&&"outstream"===r&&n&&n.outstreamAU&&i&&(e.rendererCode=n.outstreamAU,e.renderer=iO.newRenderer(e.rendererCode,i))}}(s,t),function(e,t,n){var r,i,o;if(null!=t&&null!==(r=t.ext)&&void 0!==r&&r.prebiddealpriority){var a=A(Tt(e.requestId,[n.bidderRequest]),"mediaTypes.video");if((null==a?void 0:a.context)==zo){var s=(null==t||null===(i=t.ext)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.duration)||(null==a?void 0:a.maxduration);e.video={context:zo,durationSeconds:s,dealTier:t.ext.prebiddealpriority}}}}(s,o,t);break;case qo:!function(e,t){if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void Je(Gx+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:Wx({},n.native)},t.mediaType=qo,t.width||(t.width=0),t.height||(t.height=0)}}(o,s)}})),o.ext&&o.ext.deal_channel&&(s.dealChannel=rO[o.ext.deal_channel]||null),function(e,t,n){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var r=n||t.ext&&t.ext.advid;r&&(e.meta.advertiserId=r,e.meta.agencyId=r,e.meta.buyerId=r),t.adomain&&bO(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&bO(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0]),t.ext&&t.ext.dsa&&Object.keys(t.ext.dsa).length&&(e.meta.dsa=t.ext.dsa)}(s,o,e.seat),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),o.ext&&o.ext.marketplace&&(s.bidderCode=o.ext.marketplace),n.push(s)}))})));var s=A(e.body,"ext.fledge_auction_configs");if(s)return s=Object.entries(s).map((function(e){var t=o(e,2),n=t[0],r=t[1];return{bidId:n,config:Object.assign({auctionSignals:{}},r)}})),{bids:n,paapi:s}}catch(e){Ke(e)}return n},getUserSyncs:function(e,t,n,r,i){var o,a,s=""+aO;return n&&(s+="&gdpr="+(n.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),r&&(s+="&us_privacy="+encodeURIComponent(r)),null!=i&&i.gppString&&null!=i&&null!==(o=i.applicableSections)&&void 0!==o&&o.length&&(s+="&gpp="+encodeURIComponent(i.gppString),s+="&gpp_sid="+encodeURIComponent(null==i||null===(a=i.applicableSections)||void 0===a?void 0:a.join(","))),!0===Z.getConfig("coppa")&&(s+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+s}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+s}]}};Zr(_O),p("pubmaticBidAdapter");var wO={name:"pubProvidedId",gvlid:Ai,decode:function(e){var t=e?{pubProvidedId:e}:void 0;return Xe("PubProvidedId: Decoded value "+JSON.stringify(t)),t},getId:function(e){var t=e&&e.params||{},n=[];return st(t.eids)&&(n=n.concat(t.eids)),"function"==typeof t.eidsFunction&&(n=n.concat(t.eidsFunction())),{id:n}}};Bn("userId",wO),p("pubProvidedIdSystem");var SO="__qca",TO="11",IO=["1","10"],kO=["1"],AO=["1"],EO=Vi.getConsentData(),CO=zi.getConsentData(),xO="quantcastId",OO=Mo({moduleType:Cn,moduleName:xO});function PO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:392;if(!window._qevents&&e&&""!=e){var n,r,i=OO.getCookie(SO),o="0",a=DO.findRootDomain(),s=new Date,d="";if(!i){var l=s.getTime(),c=new Date(l+864e5*t).toGMTString(),u=Math.round(2147483647*Math.random());i="B0-".concat(u,"-").concat(l),o="1",OO.setCookie(SO,i,c,"/",a,null)}n="&fpan=".concat(o,"&fpa=").concat(i),r="&gdpr=0",EO&&"boolean"==typeof EO.gdprApplies&&EO.gdprApplies&&(r="gdpr=1&gdpr_consent=".concat(EO.consentString)),CO&&"string"==typeof CO&&(d="&us_privacy=".concat(CO)),vt("https://pixel.quantserve.com/pixel?d="+a+"&client_id="+e+"&a=p-KceJUEvXN48CE"+d+r+n)}}var DO={name:xO,gvlid:TO,decode:function(e){return e},getId:function(e){var t,n=OO.getCookie(SO);if(Wi.getCoppa()||(t=CO)&&"string"==typeof t&&4==t.length&&"Y"==t.charAt(1)&&"Y"==t.charAt(2)||!function(e){return!e||"boolean"!=typeof e.gdprApplies||!e.gdprApplies||!!e.vendorData&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IO,n=e.gdprApplies,r=e.purpose,i=e.vendor,o=i&&i.consents&&i.consents[TO],a=i&&i.legitimateInterests&&i.legitimateInterests[TO],s=e.publisher?e.publisher.restrictions:{};return!n||t.map((function(e){var t=!!r.consents&&r.consents[e],n=!!r.legitimateInterests&&r.legitimateInterests[e],i=s&&s[e]?s[e][TO]:null;return!(0===i||(!o||!t||2===i||-1==kO.indexOf(e)&&1!==i)&&(1===i||!a||!n||-1!=AO.indexOf(e)||-1!=kO.indexOf(e)&&2!==i))})).reduce((function(e,t){return e&&t}),!0)}(e.vendorData)}(EO)){var r=new Date(0).toUTCString(),i=DO.findRootDomain();return Xe("QuantcastId: Necessary consent not present for Id, exiting QuantcastId"),void OO.setCookie(SO,"",r,"/",i,null)}var o=e&&e.params||{},a=e&&e.storage||{},s=o.clientId||"",d=a.expires||392;return"complete"===document.readyState?PO(s,d):window.addEventListener("load",(function(){PO(s,d)})),{id:n?{quantcastId:n}:void 0}},eids:{quantcastId:{source:"quantcast.com",atype:1}}};function RO(e){return Object.assign({wp:!0,run:function(e,t,n,r,i){var o=n&&n.hasOwnProperty(r),s=o?n[r]:void 0,d=o&&null!=s&&"object"===a(s)?Ct(s):s;return function(){var n=null==t?e:A(e,t),a=n&&no(n[r]),l=a?n[r]:void 0;!o&&a&&i()?delete n[r]:o===a&&l===s&&Gt(l,d)||!i()||Zt(e,(null==t?[]:[t]).concat(r).join("."),d)}}},e)}Bn("userId",DO),p("quantcastIdSystem");var jO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn;return function(e){var t={},n=[];e.forEach((function(e){e.wp&&n.push(e),e.get&&e.paths.forEach((function(n){var r=t;n.split(".").forEach((function(e){r.children=r.children||{},r.children[e]=r.children[e]||{},r=r.children[e]})),r.rule=e}))}));var r=eo(n);function i(e,t,n){return new Proxy(e,{get:function(e,r,o){var s=Reflect.get(e,r,o);if(t.hasOwnProperty(r)){var d=t[r],l=d.children,c=d.rule;if(l&&null!=s&&"object"===a(s))return i(s,l,n);if(c&&no(s)&&n(c))return c.get(s)}return s}})}return function(e){for(var n,o={},a=arguments.length,s=new Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return{obj:i(e,t.children||{},to.apply(void 0,[o].concat(s))),verify:(n=r.apply(void 0,[o,e].concat(s)),function(){n.forEach((function(e){return e()}))})}}}(io(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn;return[{name:nr,paths:Yi,applies:ro(nr,e)},{name:tr,paths:Ki,applies:ro(tr,e)}].map(RO)}(e)))}(),MO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jO;return function(t,n){t.global=t.global||{},t.bidder=t.bidder||{};var r=new Set(Object.keys(t.bidder)),i=[];function a(t){var r=e(t,n);return i.push(r.verify),r.obj}var s={global:a(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map((function(e){var t=o(e,2);return[t[0],a(t[1])]})))};return{obj:s,verify:function(){Object.entries(s.bidder).filter((function(e){var t=o(e,1)[0];return!r.has(t)})).forEach((function(r){var i=o(r,2),a=i[0],s=i[1],d={},l=e(d,n);Xt(l.obj,s),l.verify(),t.bidder[a]=d})),i.forEach((function(e){return e()}))}}}}();function NO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NO(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var LO,BO,qO,FO=Hn((function(e){return Co.resolveAlias(e)})),VO=[],zO=[],$O=[],WO=(qO=!1,function(){var e;qO||(Object.entries((e={},d(e,x.AUCTION_INIT,["onAuctionInitEvent"]),d(e,x.AUCTION_END,["onAuctionEndEvent",JO]),d(e,x.BID_RESPONSE,["onBidResponseEvent"]),d(e,x.BID_REQUESTED,["onBidRequestEvent"]),d(e,x.BID_ACCEPTED,["onBidAcceptedEvent"]),e)).forEach((function(e){var t=o(e,2),n=t[0],r=o(t[1],2),i=r[0],a=r[1];Or(n,(function(e){a&&a(e),zO.forEach((function(t){try{t[i]&&t[i](e,t.config,BO)}catch(e){Ke("RTD provider '".concat(t.name,"': error in '").concat(i,"':"),e)}}))}))})),qO=!0)});function HO(){return{gdpr:Vi.getConsentData(),usp:zi.getConsentData(),gpp:$i.getConsentData(),coppa:!!Z.getConfig("coppa")}}function GO(){BO=HO();var e=[];$O.forEach((function(t){var n=g(VO,(function(e){return e.name===t.name}));n&&n.init&&n.init(t,BO)&&e.push(Object.assign(n,{config:t}))})),Xe("Real time data module enabled, using submodules: ".concat((zO=e).map((function(e){return e.name})).join(", ")))}var XO=Xr("rtd",(function(e,t){BO=HO();var n=[],r=[];zO.forEach((function(e){if("function"==typeof e.getBidRequestData){n.push(e);var t=e.config;t&&t.waitForIt&&r.push(e)}}));var i,o=r.length&&LO.auctionDelay&&LO.auctionDelay>0,a=r.length,s=!1,d=[];if(!n.length)return c();function l(){s||(this.config&&this.config.waitForIt&&a--,0===a&&setTimeout(c,0))}function c(){s||(s=!0,clearTimeout(i),d.forEach((function(e){return e()})),e.call(this,t))}i=setTimeout(c,o?LO.auctionDelay:0),n.forEach((function(e){var n=MO(t.ortb2Fragments||{},FO(xn,e.name));d.push(n.verify),e.getBidRequestData(UO(UO({},t),{},{ortb2Fragments:n.obj}),l.bind(e),e.config,BO)}))}));function JO(e){var t,n=zO.filter((function(e){return"function"==typeof e.getTargetingData}));if(n.length){var r=e.adUnitCodes;if(r){for(var i=[],o=n.length-1;o>=0;o--){var s=n[o].getTargetingData(r,n[o].config,BO,e);s&&"object"===a(s)?i.push(s):Je("invalid getTargetingData response for sub module",n[o].name)}var d=(t=i,Array.isArray(t)&&t.length?t.reduce((function(e,t){for(var n in t)if(t.hasOwnProperty(n))if(e.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(e[n][i]=r[i])}else e[n]=t[n];return e}),{}):{});return e.adUnits.forEach((function(e){var t=e.code&&d[e.code];t&&(Xe("RTD set ad unit targeting of",t,"for",e),e[E.ADSERVER_TARGETING]=Object.assign(e[E.ADSERVER_TARGETING]||{},t))})),e.adUnits}}}function KO(e){zO.forEach((function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){Ke("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}}));for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.apply(this,n)}function YO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YO(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ln("realTimeData",(function(e){return VO.push(e),Hi.register(xn,e.name,e.gvlid),function(){var t=VO.indexOf(e);t>=0&&(VO.splice(t,1),GO())}})),function(e){var t=e.getConfig("realTimeData",(function(e){var n=e.realTimeData;n.dataProviders?(t(),LO=n,$O=n.dataProviders,WO(),Nn("startAuction").before(XO,20),Co.callDataDeletionRequest.before(KO),GO()):Ke("missing parameters for real time module")}))}(Z),p("rtdModule");var ZO=Z.getConfig("rubicon")||{};Z.getConfig("rubicon",(function(e){Xt(ZO,e.rubicon)}));var eP={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450"};ht(eP,(function(e,t){return eP[e]=t}));var tP=vu({request:function(e,t,n,r){var i,o,s=r.bidRequests,d=e(t,n,r);d.cur=["USD"],d.test=Z.getConfig("debug")?1:0,Zt(d,"ext.prebid.cache",{vastxml:{returnCreative:!0===ZO.returnVast}}),Zt(d,"ext.prebid.bidders",{rubicon:{integration:ZO.int_type||"pbjs"}}),Zt(d,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}(Z));var l=u().installedModules;return!l||l.length&&-1===l.indexOf("rubiconAnalyticsAdapter")||Zt(d,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t,n){var r,i,o={},a=zl.apply(void 0,[n].concat(h(t.map((function(e){return e.params.keywords})))));t.forEach((function(t){var n,r,i,a,s,d={user:{ext:{data:QO({},t.params.visitor)}},site:{ext:{data:QO({},t.params.inventory)}}},l=e.imp.find((function(e){var t,n,r,i,o;return null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n||null===(r=n.bidder)||void 0===r||null===(i=r.rubicon)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.language}));l&&(d.site.content={language:null===(n=l.ext)||void 0===n||null===(r=n.prebid)||void 0===r||null===(i=r.bidder)||void 0===i||null===(a=i.rubicon)||void 0===a||null===(s=a.video)||void 0===s?void 0:s.language}),o=Xt(o,t.ortb2||{},d);var c=Z.getConfig("user.id");o.user.id=o.user.id||c})),Xt(e,o),a&&a.length&&Zt(e,"site.keywords",a.join(",")),null==e||null===(r=e.ext)||void 0===r||null===(i=r.prebid)||void 0===i||delete i.storedrequest}(d,s,n.ortb2),null==d||null===(i=d.ext)||void 0===i||null===(o=i.prebid)||void 0===o||delete o.storedrequest,!0===ZO.disableFloors&&delete d.ext.prebid.floors,s.filter((function(e){return"object"===a(e.floorData)})).length>0&&(d.ext.prebid.floors={enabled:!1}),d},imp:function(e,t,n){var r,i,o=dP(t);if(!o.includes(Vo)||1!=o.length){var a=e(t,n);return a.id=t.adUnitCode,delete a.banner,"atf"===t.params.position&&a.video&&(a.video.pos=1),"btf"===t.params.position&&a.video&&(a.video.pos=3),null===(r=a.ext)||void 0===r||null===(i=r.prebid)||void 0===i||delete i.storedrequest,!0===t.params.bidonmultiformat&&o.length>1&&Zt(a,"ext.prebid.bidder.rubicon.formats",o),function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){var n=parseFloat(A(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,a),a}},bidResponse:function(e,t,n){var r,i=e(t,n);i.meta.mediaType=A(t,"ext.prebid.type");var a=n.bidRequest,s=o("outstream"===(null===(r=a.mediaTypes.video)||void 0===r?void 0:r.context)?oP(a,Fo):[void 0,void 0],2),d=s[0],l=s[1];return i.width=t.w||d||i.playerWidth||0,i.height=t.h||l||i.playerHeight||0,i.mediaType===Fo&&"outstream"===a.mediaTypes.video.context&&(i.renderer=function(e){var t=_n.install({id:e.adId,url:ZO.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:ZO.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(iP)}catch(e){Je("Prebid Error calling setRender on renderer",e)}return t}(i)),A(t,"ext.bidder.rp.advid")&&Zt(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==ZO.netRevenue,ttl:360},processors:wx}),nP={code:"rubicon",gvlid:52,supportedMediaTypes:[Vo,Fo,qo],isBidRequestValid:function(e){var t=!0;if("object"!==a(e.params))return!1;for(var n=0,r=["accountId","siteId","zoneId"];n<r.length;n++)if(e.params[r[n]]=parseInt(e.params[r[n]]),isNaN(e.params[r[n]]))return Ke("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=dP(e,!0);if(!i.length)return!1;i.includes(Fo)&&(t=function(e){var t=!0,n=Object.prototype.toString.call([]),r={mimes:n,protocols:n,linearity:Object.prototype.toString.call(0)};return Object.keys(r).forEach((function(n){Object.prototype.toString.call(A(e,"mediaTypes.video."+n))!==r[n]&&(t=!1,Ke("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+r[n]))})),t}(e));var o=[Vo,qo].filter((function(e){return i.includes(e)})).length>0;return o?t&&o:t},buildRequests:function(e,t){var n,r=[],i=[];if((n=e.filter((function(e){var t=dP(e)||[],n=t.length,r=e.params||{},i=r.bidonmultiformat,o=r.video;return 1===n&&(t.includes(Fo)||t.includes(qo))||2===n&&!t.includes(Vo)||o&&t.includes(Fo)||i&&(t.includes(Fo)||t.includes(qo))})))&&n.length){var o=tP.toORTB({bidRequests:n,bidderRequest:t});i.push({method:"POST",url:"https://".concat(ZO.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:n})}var a=e.filter((function(e){var t=dP(e)||[],n=e.params||{},r=n.bidonmultiformat,i=n.video;return t.includes(Vo)&&(1===t.length||r||!r&&!i||!r&&i&&!t.includes(Fo))}));if(!0!==ZO.singleRequest)r=i.concat(a.map((function(e){var n=nP.createSlotParams(e,t);return{method:"GET",url:"https://".concat(ZO.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:nP.getOrderedParams(n).reduce((function(e,t){var r=n[t];return at(r)&&""!==r||dt(r)?"".concat(e).concat(cP(t,r),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var s=a.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});r=i.concat(Object.keys(s).reduce((function(e,n){var r;return(r=s[n],10,r.map((function(e,t){return t%10==0?r.slice(t,t+10):null})).filter((function(e){return e}))).forEach((function(n){var r=nP.combineSlotUrlParams(n.map((function(e){return nP.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(ZO.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:nP.getOrderedParams(r).reduce((function(e,t){var n=r[t];return at(n)&&""!==n||dt(n)?"".concat(e).concat(cP(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return r},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,r=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,r){return Object.keys(n).forEach((function(i){t.hasOwnProperty(i)||(t[i]=new Array(e.length)),t[i].splice(r,1,n[i])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var r=t[e].join(";"),i=r.match(n);t[e]=i?i[1]:r})),t},createSlotParams:function(e,t){var n,r,i,s,d,l,c,u,p,h;e.startTime=(new Date).getTime();var f=e.params,m=oP(e,"banner"),v=o(f.latLong||[],2),y=v[0],b=v[1],_={account_id:f.accountId,site_id:f.siteId,zone_id:f.zoneId,size_id:m[0],alt_size_ids:m.slice(1).join(",")||void 0,rp_floor:(f.floor=parseFloat(f.floor))>=.01?f.floor:void 0,rp_secure:"1",tk_flint:"".concat(ZO.int_type||"pbjs_lite","_v9.10.0"),"x_source.tid":null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid,"x_imp.ext.tid":null===(i=e.ortb2Imp)||void 0===i||null===(s=i.ext)||void 0===s?void 0:s.tid,l_pb_bid_id:e.bidId,o_cdep:null===(d=e.ortb2)||void 0===d||null===(l=d.device)||void 0===l||null===(c=l.ext)||void 0===c?void 0:c.cdep,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:f.userId,"p_geo.latitude":isNaN(parseFloat(y))?void 0:parseFloat(y).toFixed(4),"p_geo.longitude":isNaN(parseFloat(b))?void 0:parseFloat(b).toFixed(4),"tg_fl.eid":e.code,rf:rP(e,t)};if("function"==typeof e.getFloor&&!ZO.disableFloors){var w;try{w=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){Ke("Rubicon: getFloor threw an error: ",e)}_.rp_hard_floor="object"!==a(w)||"USD"!==w.currency||isNaN(parseInt(w.floor))?void 0:w.floor}!0===f.bidonmultiformat&&A(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(_.p_formats=Object.keys(e.mediaTypes).join(","));var S={1:"atf",3:"btf"}[A(e,"mediaTypes.banner.pos")]||"";_.p_pos="atf"===f.position||"btf"===f.position?f.position:S;var T,I,k=Z.getConfig("user.id");return k&&(_.ppuid=k),null!=e&&null!==(u=e.ortb2Imp)&&void 0!==u&&null!==(p=u.ext)&&void 0!==p&&p.ae&&(_.o_ae=1),function(e,t){var n,r,i,o,a,s,d;if(!1!==ZO.readTopics){var l=[1,2,5,6,7,507].concat((null===(n=ZO.sendSiteSegtax)||void 0===n?void 0:n.map((function(e){return Number(e)})))||[]),c=[4,508].concat((null===(r=ZO.sendUserSegtax)||void 0===r?void 0:r.map((function(e){return Number(e)})))||[]),u=(null===(i=e.ortb2)||void 0===i||null===(o=i.user)||void 0===o?void 0:o.data)||[],p=(null===(a=e.ortb2)||void 0===a||null===(s=a.site)||void 0===s||null===(d=s.content)||void 0===d?void 0:d.data)||[];u.forEach(aP(t,"v",c)),p.forEach(aP(t,"i",l))}}(t,_),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source)_.tpid_tdid=e.uids[0].id,_["eid_adserver.org"]=e.uids[0].id;else if("liveintent.com"===e.source)_["tpid_liveintent.com"]=e.uids[0].id,_["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(_["tg_v.LIseg"]=e.ext.segments.join(","));else if("liveramp.com"===e.source)_.x_liverampidl=e.uids[0].id;else if("id5-sync.com"===e.source)_["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||"");else{var t="rubiconproject.com"===e.source?e.uids[0].id:"".concat(e.uids[0].id,"^").concat(e.uids[0].atype||"");_["eid_".concat(e.source)]=t}if(!_.ppuid){var n=g(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));n&&n.id&&(_.ppuid=n.id)}}catch(t){Je("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(_.gdpr=Number(t.gdprConsent.gdprApplies)),_.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(_.us_privacy=encodeURIComponent(t.uspConsent)),null!==(h=t.gppConsent)&&void 0!==h&&h.gppString&&(_.gpp=t.gppConsent.gppString,_.gpp_sid=null===(T=t.gppConsent)||void 0===T||null===(I=T.applicableSections)||void 0===I?void 0:I.toString()),_.rp_maxbids=t.bidLimit||1,function(e,t,n){var r={user:{ext:{data:QO({},e.params.visitor)}},site:{ext:{data:QO({},e.params.inventory)}}};e.params.keywords&&(r.site.keywords=st(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=Xt({},e.ortb2||{},r),s=A(e.ortb2Imp,"ext")||{},d=A(e.ortb2Imp,"ext.data")||{},l=A(e,"ortb2Imp.ext.gpid"),c=A(i,"regs.ext.dsa"),u={user:[4],site:[1,2,5,6]},p={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},h=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&A(e,"ext.segtax")&&u[n]&&-1!==u[n].indexOf(A(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():"object"===a(e)&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter((function(e){if("object"!==a(e)&&void 0!==e)return e.toString();Je("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()}(e,r,t),s=p[r]&&i?"".concat(p[r]):"data"===r?"".concat(p[t],"iab"):"".concat(p[t]).concat(r);n[s]=n[s]?n[s].concat(",",o):o};if(t===Vo){["site","user"].forEach((function(e){Object.keys(i[e]).forEach((function(t){"site"===e&&"content"===t&&i[e][t].data?h(i[e][t].data,e,"data"):"ext"!==t?h(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach((function(t){h(i[e].ext.data[t],e,t,!1)}))}))})),Object.keys(d).forEach((function(e){"adserver"!==e?h(d[e],"site",e):"gam"===d[e].name&&h(d[e].adslot,name,e)})),l&&(n.p_gpid=l),c&&Object.keys(c).length&&Ft(c,["dsainfo",function(e){return n.dsainfo=e},"dsarequired",function(e){return n.dsarequired=e},"pubrender",function(e){return n.dsapubrender=e},"datatopub",function(e){return n.dsadatatopubs=e},"transparency",function(e){Array.isArray(e)&&e.length&&(n.dsatransparency=e.reduce((function(e,t){var n=t.domain||"";if(!n)return e;var r=t.dsaparams||t.params;return Array.isArray(r)&&0!==r.length?(e&&(e+="~~"),e+"".concat(n,"~").concat(r.join("_"))):e}),""))}]),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"];var f=A(i,"device.sua");f&&!1!==ZO.chEnabled&&Ft(f,["architecture",function(e){return n.m_ch_arch=e},"bitness",function(e){return n.m_ch_bitness=e},"browsers",function(e){var t,r;if(Array.isArray(e)){var i=o(e.reduce((function(e,t){var n,r,i;return e[0].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(n=t.version)||void 0===n?void 0:n[0],'"')),e[1].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(r=t.version)||void 0===r||null===(i=r.join)||void 0===i?void 0:i.call(r,"."),'"')),e}),[[],[]]),2),a=i[0],s=i[1];n.m_ch_ua=null==a||null===(t=a.join)||void 0===t?void 0:t.call(a,","),n.m_ch_full_ver=null==s||null===(r=s.join)||void 0===r?void 0:r.call(s,",")}},"mobile",function(e){return n.m_ch_mobile="?".concat(e)},"model",function(e){return n.m_ch_model=e},"platform",function(e){var t,r;n.m_ch_platform=null==e?void 0:e.brand,n.m_ch_platform_ver=null==e||null===(t=e.version)||void 0===t||null===(r=t.join)||void 0===r?void 0:r.call(t,".")}])}else Object.keys(s).length&&Xt(n.imp[0].ext,s),l&&(n.imp[0].ext.gpid=l),Xt(n,i)}(e,Vo,_),!0===Z.getConfig("coppa")&&(_.coppa=1),e.schain&&lP(e.schain)&&(_.rp_schain=nP.serializeSupplyChain(e.schain)),_},serializeSupplyChain:function(e){if(!lP(e))return"";var t=e.ver,n=e.complete,r=e.nodes;return"".concat(t,",").concat(n,"!").concat(nP.serializeSupplyChainNodes(r))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){var n;e=e.body;var r=t.data;if(!e||"object"!==a(e))return[];if(e.seatbid){var i=A(e,"ext.errors.rubicon");return Array.isArray(i)&&i.length>0&&Je("Rubicon: Error in video response"),tP.fromORTB({request:r,response:e}).bids}var s,d=e.ads,l=0,c=t.bidRequest;if("object"===a(c)&&!Array.isArray(c)&&dP(c).includes(Fo)&&"object"===a(d)&&(d=d[c.adUnitCode]),!Array.isArray(d)||d.length<1)return[];var u=d.reduce((function(t,n,r){if(n.impression_id&&s===n.impression_id?l++:s=n.impression_id,"ok"!==n.status)return t;var i,d,u=Array.isArray(c)?c[r-l]:c;if(u&&"object"===a(u)){var p={requestId:u.bidId,currency:"USD",creativeId:n.creative_id||"".concat(n.network||"","-").concat(n.advertiser||""),cpm:n.cpm||0,dealId:n.deal,ttl:360,netRevenue:!1!==ZO.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:Vo}};if(n.creative_type&&(p.mediaType=n.creative_type),n.dsa&&Object.keys(n.dsa).length&&(p.meta.dsa=n.dsa),n.adomain&&(p.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.creative_type===Fo)p.width=u.params.video.playerWidth,p.height=u.params.video.playerHeight,p.vastUrl=n.creative_depot_url,p.impression_id=n.impression_id,p.videoCacheKey=n.impression_id;else{p.ad=(i=n.script,d=n.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(d,"'>\n<script type='text/javascript'>").concat(i,"<\/script>\n</div>\n</body>\n</html>"));var h=o(eP[n.size_id].split("x").map((function(e){return Number(e)})),2);p.width=h[0],p.height=h[1]}p.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:u.adUnitCode}),t.push(p)}else Ke("Rubicon: bidRequest undefined at index position:".concat(r),c,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)})),p=null===(n=e.component_auction_config)||void 0===n?void 0:n.map((function(e){return{config:e,bidId:e.bidId}}));return p?{bids:u,paapi:p}:u},getUserSyncs:function(e,t,n,r,i){if(!uP&&e.iframeEnabled){var o,a={};return n&&("boolean"==typeof n.gdprApplies&&(a.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(a.gdpr_consent=n.consentString)),r&&(a.us_privacy=encodeURIComponent(r)),null!=i&&i.gppString&&(a.gpp=i.gppString,a.gpp_sid=null===(o=i.applicableSections)||void 0===o?void 0:o.toString()),a=Object.keys(a).length?"?".concat($t(a)):"",uP=!0,{type:"iframe",url:"https://".concat(ZO.syncHost||"eus",".rubiconproject.com/usync.html")+a}}}};function rP(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function iP(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var r=QO(QO({},{align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0}),e.renderer.getConfig());e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:r.align,position:r.position},closeButton:r.closeButton,label:r.label,collapse:r.collapse})}))}function oP(e,t){var n=e.params;if(t===Fo){var r=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?r=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(A(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?r=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(r=e.sizes[0]),r}var i=[];return Array.isArray(n.sizes)?i=n.sizes:void 0!==A(e,"mediaTypes.banner.sizes")?i=sP(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=sP(e.sizes):Je("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var r=t.indexOf(e),i=t.indexOf(n);return r>-1||i>-1?-1===r?1:-1===i?-1:r-i:e-n}))}(i)}function aP(e,t,n){return function(r){var i,o,a=Number(null===(i=r.ext)||void 0===i?void 0:i.segtax);n.includes(a)&&(e["tg_".concat(t,".tax").concat(a)]=null===(o=r.segment)||void 0===o?void 0:o.map((function(e){return e.id})).join(","))}}function sP(e){return Be(e).reduce((function(e,t){var n=parseInt(eP[t],10);return n&&e.push(n),e}),[])}function dP(e){var t,n,r,i,o,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=[];if(n=void 0!==A(t=e,"mediaTypes.".concat(Fo)),r=void 0!==A(t,"mediaTypes.".concat(Vo)),i=void 0!==A(t,"params.bidonmultiformat"),o="object"!==a(A(t,"params.video")),n&&i||(r&&o&&(n=!1),n&&o&&Zt(t,"params.video",{}),n)){if(-1===["outstream","instream"].indexOf(A(e,"mediaTypes.".concat(Fo,".context"))))return s&&Ke("Rubicon: mediaTypes.video.context must be outstream or instream"),d;if(oP(e,Fo).length<2)return s&&Ke("Rubicon: could not determine the playerSize of the video"),d;s&&Ge("Rubicon: making video request for adUnit",e.adUnitCode),d.push(Fo)}if(void 0!==A(e,"mediaTypes.".concat(qo))&&d.push(qo),void 0!==A(e,"mediaTypes.".concat(Vo))){if(0===oP(e,Vo).length)return s&&Ke("Rubicon: could not determine the sizes for banner request"),d;s&&Ge("Rubicon: making banner request for adUnit",e.adUnitCode),d.push(Vo)}return d}function lP(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||Ke("Rubicon: required schain params missing"),t):t}function cP(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var uP=!1;Zr(nP),p("rubiconBidAdapter");var pP=Mo({moduleType:Cn,moduleName:"sharedId"}),hP="cookie",fP="html5",gP="_pubcid_optout",mP="PublisherCommonId";function vP(e,t){if(t===hP)return pP.getCookie(e);if(t===fP&&pP.hasLocalStorage()){var n=pP.getDataFromLocalStorage("".concat(e,"_exp"));if(!n)return pP.getDataFromLocalStorage(e);if(new Date(n).getTime()-Date.now()>0)return pP.getDataFromLocalStorage(e)}}function yP(e,t){return function(n,r){t?bP(t,e,(function(){n(r()||e)}))():n(e)}}function bP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(e){var r=Wt(e);r.search.id=encodeURIComponent("pubcid:"+t);var i=Ht(r);return function(){vt(i,n)}}}function _P(){return!!(pP.cookiesAreEnabled()&&vP(gP,hP)||pP.hasLocalStorage()&&vP(gP,fP))}var wP={name:"sharedId",aliasName:"pubCommonId",gvlid:Ai,decode:function(e,t){if(!_P())return Xe(" Decoded value PubCommonId "+e),{pubcid:e};Xe("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(_P())Xe("PubCommonId: Has opted-out");else{if(!Wi.getCoppa()){var n=e.params,r=(n=void 0===n?{}:n).create,i=void 0===r||r,o=n.pixelUrl,s=t;if(!s){try{"object"===a(window[mP])&&(s=window[mP].getId())}catch(e){}s||(s=i&&Dt()?Ne():void 0)}return{id:s,callback:yP(s,o)}}Xe("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(_P())return Xe("PubCommonId: Has opted-out"),{id:void 0};if(Wi.getCoppa())Xe("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var n=e.params,r=(n=void 0===n?{}:n).extend,i=void 0!==r&&r,o=n.pixelUrl;if(i)return o?{callback:bP(o,t)}:{id:t}}},domainOverride:Kd(pP,"sharedId"),eids:{pubcid:{source:"pubcid.org",atype:1}}};function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SP(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Bn("userId",wP),p("sharedIdSystem");var IP="sharethrough",kP="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),AP=function(){return window.location.protocol},EP={code:IP,supportedMediaTypes:[Fo,Vo],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===IP},buildRequests:function(e,t){var n,r,i,a,s,d,l,c,u,p,h,f,g=t.timeout,m=t.ortb2||{},v=AP().indexOf("http")<0||AP().indexOf("https")>-1,y={id:Ne(),at:1,cur:["USD"],tmax:g,site:TP({domain:A(t,"refererInfo.domain",window.location.hostname),page:A(t,"refererInfo.page",window.location.href),ref:A(t,"refererInfo.ref")},m.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:!0===Z.getConfig("coppa")?1:0,ext:{}},source:{tid:null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid,ext:{version:"9.10.0",str:"4.3.0",schain:e[0].schain}},bcat:A(t.ortb2,"bcat")||e[0].params.bcat||[],badv:A(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(null!==(i=t.ortb2)&&void 0!==i&&null!==(a=i.device)&&void 0!==a&&null!==(s=a.ext)&&void 0!==s&&s.cdep&&(y.device.ext.cdep=t.ortb2.device.ext.cdep),null!=t&&null!==(d=t.ortb2)&&void 0!==d&&d.device&&Xt(y.device,t.ortb2.device),y.user=xP(m.user,{}),y.user.ext||(y.user.ext={}),y.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var b=!0===t.gdprConsent.gdprApplies;y.regs.ext.gdpr=b?1:0,b&&(y.user.ext.consent=t.gdprConsent.consentString)}t.uspConsent&&(y.regs.ext.us_privacy=t.uspConsent),null!=t&&null!==(l=t.gppConsent)&&void 0!==l&&l.gppString?(y.regs.gpp=t.gppConsent.gppString,y.regs.gpp_sid=t.gppConsent.applicableSections):null!=t&&null!==(c=t.ortb2)&&void 0!==c&&null!==(u=c.regs)&&void 0!==u&&u.gpp&&(y.regs.ext.gpp=t.ortb2.regs.gpp,y.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),null!=t&&null!==(p=t.ortb2)&&void 0!==p&&null!==(h=p.regs)&&void 0!==h&&null!==(f=h.ext)&&void 0!==f&&f.dsa&&(y.regs.ext.dsa=t.ortb2.regs.ext.dsa);var _=e.map((function(e){var n,r={ext:{}},i=A(e,"ortb2Imp.ext.tid");i&&(r.ext.tid=i);var a=A(e,"ortb2Imp.ext.gpid")||A(e,"ortb2Imp.ext.data.pbadslot");a&&(r.ext.gpid=a);var s,d,l,c,u,p=A(e,"mediaTypes.video");if(null!==(n=t.paapi)&&void 0!==n&&n.enabled&&e.mediaTypes.banner&&Xt(r,{ext:{ae:1}}),p){var h=640,f=360;if(p.playerSize&&p.playerSize[0]&&p.playerSize[0][0]&&p.playerSize[0][1]){var g=o(p.playerSize[0],2);h=g[0],f=g[1]}r.video={pos:xP(p.pos,0),topframe:xt()?0:1,skip:xP(p.skip,0),linearity:xP(p.linearity,1),minduration:xP(p.minduration,5),maxduration:xP(p.maxduration,60),playbackmethod:p.playbackmethod||[2],api:(c=p,u=c.api,u&&Array.isArray(u)&&u.length>0?u:[2]),mimes:p.mimes||["video/mp4"],protocols:(d=p,l=d.protocols,l&&Array.isArray(l)&&l.length>0?l:[2,3,5,6,7,8]),w:h,h:f,startdelay:xP(p.startdelay,0),skipmin:xP(p.skipmin,0),skipafter:xP(p.skipafter,0),placement:(s=p,s.plcmt?s.placement:"instream"===s.context?1:+A(s,"placement",4)),plcmt:p.plcmt?p.plcmt:null},p.delivery&&(r.video.delivery=p.delivery),p.companiontype&&(r.video.companiontype=p.companiontype),p.companionad&&(r.video.companionad=p.companionad)}else r.banner={pos:A(e,"mediaTypes.banner.pos",0),topframe:xt()?0:1,format:e.sizes.map((function(e){return{w:+e[0],h:+e[1]}}))};return TP({id:e.bidId,tagid:String(e.params.pkey),secure:v?1:0,bidfloor:CP(e)},r)})).filter((function(e){return!!e}));return _.map((function(e){return{method:"POST",url:kP,data:TP(TP({},y),{},{imp:[e]})}}))},interpretResponse:function(e,t){var n,r=e.body;if(!r||!r.seatbid||0===r.seatbid.length||!r.seatbid[0].bid||0===r.seatbid[0].bid.length)return[];var i,o=null===(n=r.ext)||void 0===n?void 0:n.auctionConfigs,a=r.seatbid[0].bid.map((function(e){var n,i,o,a,s,d,l,c,u,p,h,f,g,m={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?Fo:Vo,currency:r.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:(null===(n=e.ext)||void 0===n?void 0:n.networkId)||null,networkName:(null===(i=e.ext)||void 0===i?void 0:i.networkName)||null,agencyId:(null===(o=e.ext)||void 0===o?void 0:o.agencyId)||null,agencyName:(null===(a=e.ext)||void 0===a?void 0:a.agencyName)||null,advertiserId:(null===(s=e.ext)||void 0===s?void 0:s.advertiserId)||null,advertiserName:(null===(d=e.ext)||void 0===d?void 0:d.advertiserName)||null,brandId:(null===(l=e.ext)||void 0===l?void 0:l.brandId)||null,brandName:(null===(c=e.ext)||void 0===c?void 0:c.brandName)||null,demandSource:(null===(u=e.ext)||void 0===u?void 0:u.demandSource)||null,dchain:(null===(p=e.ext)||void 0===p?void 0:p.dchain)||null,primaryCatId:(null===(h=e.ext)||void 0===h?void 0:h.primaryCatId)||null,secondaryCatIds:(null===(f=e.ext)||void 0===f?void 0:f.secondaryCatIds)||null,mediaType:(null===(g=e.ext)||void 0===g?void 0:g.mediaType)||null}};return m.mediaType===Fo&&(m.ttl=3600,m.vastXml=e.adm),m}));return o?{bids:a,paapi:(null===(i=r.ext)||void 0===i?void 0:i.auctionConfigs)||{}}:a},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==A(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map((function(e){return{type:"image",url:e}})):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function CP(e){var t=null;if("function"==typeof e.getFloor){var n=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((function(e){return{w:e[0],h:e[1]}}))});"object"!==a(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}return null!==t?t:e.params.floor}function xP(e,t){return null==e?t:e}function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OP(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zr(EP),p("sharethroughBidAdapter");var DP={code:"smartadserver",gvlid:45,aliases:["smart"],supportedMediaTypes:[Vo,Fo],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){if(!e||!e.nodes)return null;var t=["asi","sid","hp","rid","name","domain"];return"".concat(e.ver,",").concat(e.complete,"!")+e.nodes.map((function(e){return t.map((function(t){return e[t]?encodeURIComponent(e[t]):""})).join(",")})).join("!")},adaptBannerSizes:function(e){return e.map((function(e){return{w:e[0],h:e[1]}}))},fillPayloadForVideoBidRequest:function(e,t,n){var r=t.playerSize[0];e.mediaType=Fo,e.isVideo="instream"===t.context,e.videoData={};for(var i=0,a=Object.entries({maxbitrate:"vbrmax",maxduration:"vdmax",minbitrate:"vbrmin",minduration:"vdmin",placement:"vpt",plcmt:"vplcmt",skip:"skip"});i<a.length;i++){var s=o(a[i],2),d=s[0],l=s[1];e.videoData=PP(PP({},e.videoData),this.getValuableProperty(l,t[d]))}e.videoData=PP(PP(PP(PP(PP(PP(PP({},e.videoData),this.getValuableProperty("playerWidth",r[0])),this.getValuableProperty("playerHeight",r[1])),this.getValuableProperty("adBreak",this.getStartDelayForVideoBidRequest(t,n))),this.getValuableProperty("videoProtocol",this.getProtocolForVideoBidRequest(t,n))),Vt(t.api)&&t.api.length?{iabframeworks:t.api.toString()}:{}),Vt(t.playbackmethod)&&t.playbackmethod.length?{vpmt:t.playbackmethod}:{})},getValuableProperty:function(e,t){return"string"==typeof e&&qt(t)&&t?d({},e,t):{}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(null!=t&&t.startDelay)return t.startDelay;if(null!=e&&e.startdelay){if(e.startdelay>0||-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 1},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e),options:{browsingTopics:!1}}},buildRequests:function(e,t){var n=Z.getConfig("currency.adServerCurrency"),r=A(t,"ortb2.user.data",Z.getAnyConfig("ortb2.user.data")),i=A(t,"ortb2.site.content.data",Z.getAnyConfig("ortb2.site.content.data"));return e.reduce((function(e,o){var a,s,d={siteid:o.params.siteId,pageid:o.params.pageId,formatid:o.params.formatId,currencyCode:n,targeting:o.params.target&&""!==o.params.target?o.params.target:void 0,buid:o.params.buId&&""!==o.params.buId?o.params.buId:void 0,appname:o.params.appName&&""!==o.params.appName?o.params.appName:void 0,ckid:o.params.ckId||0,tagId:o.adUnitCode,pageDomain:t&&t.refererInfo&&t.refererInfo.page?t.refererInfo.page:void 0,transactionId:null===(a=o.ortb2Imp)||void 0===a||null===(s=a.ext)||void 0===s?void 0:s.tid,timeout:Z.getConfig("bidderTimeout"),bidId:o.bidId,prebidVersion:"9.10.0",schain:DP.serializeSupplyChain(o.schain),sda:r,sdc:i},l=A(o,"ortb2Imp.ext.gpid")||A(o,"ortb2Imp.ext.data.pbadslot");l&&(d.gpid=l),t&&(t.gdprConsent&&(d.addtl_consent=t.gdprConsent.addtlConsent,d.gdpr_consent=t.gdprConsent.consentString,d.gdpr=t.gdprConsent.gdprApplies),t.gppConsent&&(d.gpp=t.gppConsent.gppString,d.gpp_sid=t.gppConsent.applicableSections),t.uspConsent&&(d.us_privacy=t.uspConsent)),o&&o.userIdAsEids&&(d.eids=o.userIdAsEids),t&&t.uspConsent&&(d.us_privacy=t.uspConsent);var c=A(o,"mediaTypes.banner"),u=A(o,"mediaTypes.video"),p=u&&("instream"===u.context||"outstream"===u.context);if(c||p){var h;if(c){if(h=Vo,d.sizes=DP.adaptBannerSizes(c.sizes),p){var f=Ct(d);DP.fillPayloadForVideoBidRequest(f,u,o.params.video),f.bidfloor=o.params.bidfloor||DP.getBidFloor(o,n,Fo),e.push(DP.createServerRequest(f,o.params.domain))}}else h=Fo,DP.fillPayloadForVideoBidRequest(d,u,o.params.video);d.bidfloor=o.params.bidfloor||DP.getBidFloor(o,n,h),e.push(DP.createServerRequest(d,o.params.domain))}else e.push({});return e}),[])},interpretResponse:function(e,t){var n=[],r=e.body;try{if(r&&!r.isNoAd&&(r.ad||r.adUrl)){var i=JSON.parse(t.data),o={requestId:i.bidId,cpm:r.cpm,width:r.width,height:r.height,creativeId:r.creativeId,dealId:r.dealId,currency:r.currency,netRevenue:r.isNetCpm,ttl:r.ttl,dspPixels:r.dspPixels,meta:{advertiserDomains:r.adomain?r.adomain:[]}};i.mediaType===Fo?(o.mediaType=Fo,o.vastUrl=r.adUrl,o.vastXml=r.ad,o.content=r.ad):(o.adUrl=r.adUrl,o.ad=r.ad),n.push(o)}}catch(e){Ke("Error while parsing smart server response",e)}return n},getBidFloor:function(e,t,n){if(!ot(e.getFloor))return 0;var r=e.getFloor({currency:t||"USD",mediaType:n,size:"*"});return lt(r)&&!isNaN(r.floor)?r.floor:0},getUserSyncs:function(e,t){var n=[];return e.iframeEnabled&&t.length>0&&null!=t[0].body.cSyncUrl?n.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&t.length>0&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach((function(e){n.push({type:"image",url:e})})),n}};Zr(DP),p("smartadserverBidAdapter");var RP=null,jP=function(){return!1!==RP};function MP(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.history.length}catch(t){e=void 0}return e}function NP(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.hardwareConcurrency}catch(t){e=void 0}return e}function UP(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.deviceMemory}catch(t){e=void 0}return e}function LP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LP(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){var e=navigator.userAgent.match(/iPhone OS (\d+)_(\d+)/);if(!(null!==e&&parseInt(e[1])<17)||navigator.userAgent.includes("Safari")){var t=document.createElement("video");t.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==",t.setAttribute("playsinline","true"),t.muted=!0,t.play().then((function(){RP=!0,t.src=""})).catch((function(){RP=!1}))}}();var qP="teads",FP=Mo({bidderCode:qP}),VP={code:qP,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var n=XP(It(e.params,"placementId")),r=XP(It(e.params,"pageId"));t=n&&r}return t||Ke("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var n,r,i,o,a=e.map(GP),s=window.top,d=BP(BP({referrer:zP(t),pageReferrer:document.referrer,pageTitle:$P().slice(0,300),pageDescription:WP().slice(0,300),networkBandwidth:(o=window.navigator,o&&o.connection&&o.connection.downlink>=0?o.connection.downlink.toString():""),timeToFirstByte:HP(window),data:a,deviceWidth:screen.width,deviceHeight:screen.height,devicePixelRatio:s.devicePixelRatio,screenOrientation:null===(n=screen.orientation)||void 0===n?void 0:n.type,historyLength:MP(),viewportHeight:null===(r=s.visualViewport)||void 0===r?void 0:r.height,viewportWidth:null===(i=s.visualViewport)||void 0===i?void 0:i.width,hardwareConcurrency:NP(),deviceMemory:UP(),hb_version:"9.10.0"},function(e){var t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"},n={};for(var r in t){var i=A(e,"0.userId.".concat(t[r]));i&&(n[r]=i)}return n}(e)),function(e){var t=A(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(FP.cookiesAreEnabled(null)){var n=FP.getCookie("_tfpvi",null);if(n)return{firstPartyCookieTeadsId:n}}return{}}(e)),l=e[0];l.schain&&(d.schain=l.schain);var c=t.gppConsent;if(t&&c){var u="string"==typeof c.gppString,p=Array.isArray(c.applicableSections)&&c.applicableSections.every((function(e){return"number"==typeof e}));d.gpp={consentString:u?c.gppString:"",applicableSectionIds:p?c.applicableSections:[]}}var h=t.gdprConsent;if(t&&h){var f="boolean"==typeof h.gdprApplies,g="string"==typeof h.consentString,m=f?function(e,t){var n=12;return e?t&&!t.isServiceSpecific&&(n=11):n=0,n}(h.gdprApplies,h.vendorData):22;d.gdpr_iab={consent:g?h.consentString:"",status:m,apiVersion:h.apiVersion}}t&&t.uspConsent&&(d.us_privacy=t.uspConsent);var v=A(l,"ortb2.device.sua");v&&(d.userAgentClientHints=v);var y=A(t,"ortb2.regs.ext.dsa");return y&&(d.dsa=y),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(d)}},interpretResponse:function(e,t){if(!(e=e.body).responses)return[];var n=jP();return e.responses.filter((function(e){return!e.needAutoplay||n})).map((function(e){var t,n={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};return e.dealId&&(n.dealId=e.dealId),null!=e&&null!==(t=e.ext)&&void 0!==t&&t.dsa&&(n.meta.dsa=e.ext.dsa),n}))}};function zP(e){var t="";return e&&e.refererInfo&&e.refererInfo.page&&(t=e.refererInfo.page),t}function $P(){try{var e=window.top.document.querySelector('meta[property="og:title"]');return window.top.document.title||e&&e.content||""}catch(e){var t=document.querySelector('meta[property="og:title"]');return document.title||t&&t.content||""}}function WP(){var e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e&&e.content||""}function HP(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,n=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(n)return n.toString();var r=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return r?r.toString():""}function GP(e){var t,n,r={},i=It(e.params,"placementId"),o=It(e.params,"pageId"),a=A(e,"ortb2Imp.ext.gpid"),s=A(e,"mediaTypes.video.plcmt");return r.sizes=function(e){return Be(function(e){var t=A(e,"mediaTypes.video.playerSize"),n=A(e,"mediaTypes.video.sizes"),r=A(e,"mediaTypes.banner.sizes");return st(r)||st(t)||st(n)?[r,n,t].reduce((function(e,t){return st(t)&&(st(t[0])?t.forEach((function(t){e.push(t)})):e.push(t)),e}),[]):e.sizes}(e))}(e),r.bidId=Ue("bidId",e),r.bidderRequestId=Ue("bidderRequestId",e),r.placementId=parseInt(i,10),r.pageId=parseInt(o,10),r.adUnitCode=Ue("adUnitCode",e),r.transactionId=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid)||"",a&&(r.gpid=a),s&&(r.videoPlcmt=s),r}function XP(e){return parseInt(e)>0}function JP(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}function KP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KP(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zr(VP),p("teadsBidAdapter");var QP="triplelift",ZP=null,eD=null,tD=Mo({bidderCode:QP}),nD={gvlid:28,code:QP,supportedMediaTypes:[Vo,Fo],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n,r="https://tlx.3lift.com/header/auction?",i=function(e,t){var n,r,i={},o=e[0].schain,a=function(e){var t={},n={},r={},i=e.ortb2||{},o=function(){var e=tD.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return Ke("Triplelift: error parsing JSON: ",e),null}}(),a=Object.assign({},i.site),s=Object.assign({},i.user);if(o){s.data=s.data||[];try{s.data.push({name:"www.1plusx.com",ext:o})}catch(e){Ke("Triplelift: error adding 1plusX segments: ",e)}}return sD(n,a),sD(r,s),ut(n)||(t.context=n),ut(r)||(t.user=r),t}(t);i.imp=e.map((function(e,t){var n,r,i,o,a={id:t,tagid:e.params.inventoryCode,floor:aD(e)};return rD(e)&&(a.video=function(e){var t=YP(YP({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){Je("Video size not defined",e)}return t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!iD(e)&&(a.banner={format:(o=e.sizes,o.filter(dD).map((function(e){return{w:e[0],h:e[1]}})))}),ut(e.ortb2Imp)||(a.fpd=(n=e.ortb2Imp,r={},sD(i={},n.ext),ut(i)||(r.context=i),r),ut(e.ortb2Imp.ext)||(a.ext=YP({},e.ortb2Imp.ext))),a}));var s=[];e[0].userIdAsEids&&(s=A(e[0],"userIdAsEids"),i.user={ext:{eids:s}});var d=function(e,t){var n={};return ut(e)||(n.schain=YP({},e)),ut(t)||(n.fpd=YP({},t)),n}(o,a);return ut(d)||(i.ext=d),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(i.regs=Object.assign({},t.ortb2.regs)),null!=t&&t.ortb2&&(i.ext.ortb2=Object.assign({},t.ortb2)),i}(e,t);return r=JP(r,"lib","prebid"),r=JP(r,"v","9.10.0"),t&&t.refererInfo&&(r=JP(r,"referrer",t.refererInfo.page)),t&&t.timeout&&(r=JP(r,"tmax",t.timeout)),t&&t.gdprConsent&&(r=JP(r,"gdpr",(ZP=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies).toString()),void 0!==t.gdprConsent.consentString&&(r=JP(r,"cmp_cs",eD=t.gdprConsent.consentString))),t&&t.uspConsent&&(r=JP(r,"us_privacy",t.uspConsent)),null!=t&&null!==(n=t.paapi)&&void 0!==n&&n.enabled&&(r=JP(r,"fledge",t.paapi.enabled)),!0===Z.getConfig("coppa")&&(r=JP(r,"coppa",!0)),r.lastIndexOf("&")===r.length-1&&(r=r.substring(0,r.length-1)),Ge("tlCall request built: "+r),{method:"POST",url:r,data:i,bidderRequest:t}},interpretResponse:function(e,t){var n=t.bidderRequest,r=e.body.bids||[],i=e.body.paapi||[];if(r=r.map((function(e){return function(e,t){var n={},r=t.width||1,i=t.height||1,o=t.deal_id||"",a=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(n={requestId:s.bidId,cpm:t.cpm,width:r,height:i,netRevenue:!0,ad:t.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},rD(s)&&"video"===t.media_type&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(rD(s)&&"video"===t.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native"),a&&(n.meta.networkId=a.slice(0,a.indexOf("_")))),n}(n,e)})),i.length>0){var o=i.map((function(e){return{bidId:n.bids[e.imp_id].bidId,config:e.auctionConfig}}));return Ge("Response with FLEDGE:",{bids:r,fledgeAuctionConfigs:o}),{bids:r,paapi:o}}return r},getUserSyncs:function(e,t,n,r,i){var o=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(o){var a="https://eb2.3lift.com/sync?";return"image"===o&&(a=JP(a,"px",1),a=JP(a,"src","prebid")),(null!==eD||ZP)&&(a=JP(a,"gdpr",ZP),a=JP(a,"cmp_cs",eD)),r&&(a=JP(a,"us_privacy",r)),i&&(i.gppString&&(a=JP(a,"gpp",i.gppString)),i.applicableSections&&0!==i.applicableSections.length&&(a=JP(a,"gpp_sid",i.applicableSections.filter((function(e){return Number.isInteger(e)})).join(",")))),[{type:o,url:a}]}}};function rD(e){return oD(e)&&(iD(e)||function(e){return oD(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function iD(e){return oD(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function oD(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function aD(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:rD(e)?"video":"banner",size:"*"});"object"!==a(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){Ke("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function sD(e,t){ut(t)||Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])}))}function dD(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function lD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Zr(nD),p("tripleliftBidAdapter");var cD="unifiedId",uD={name:cD,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(t&&("string"==typeof t.partner||"string"==typeof t.url)){var n=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){sn(n,{success:function(t){var n;if(t)try{n=JSON.parse(t)}catch(e){Ke(e)}e(n)},error:function(t){Ke("".concat(cD,": ID fetch encountered an error"),t),e()}},void 0,{method:"GET",withCredentials:!0})}}}Ke("User ID - unifiedId submodule requires either partner or url to be defined")},eids:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lD(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},sC)};Bn("userId",uD),p("unifiedIdSystem");var pD=["bids","bidderRequestId","bidderCode"];function hD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hD(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gD={code:"unruly",supportedMediaTypes:[Fo,Vo],gvlid:36,isBidRequestValid:function(e){var t=A(e,"params.siteId")&&function(e){var t=A(e,"mediaTypes.video"),n=A(e,"mediaTypes.banner"),r=!(!t&&!n);return r&&t&&(r=function(e){return!!e.context&&-1!==["outstream","instream"].indexOf(e.context)}(t)),r&&n&&(r=function(e){return e.sizes}(n)),r}(e);return!!t},buildRequests:function(e,t){var n,r="https://targeting.unrulymedia.com/unruly_prebid";return e[0]&&(r=A(e[0],"params.endpoint")||r),function(e,t,n){n.bids,n.bidderRequestId,n.bidderCode;var r=hp(n,pD),i=n.bids.length-t.length,o={};t.forEach((function(t){var n=t.params.siteId;!function(e){Object.keys(e.mediaTypes).forEach((function(t){var n;n="function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:t,size:"*"}).floor||0:e.params.floor||0,e.mediaTypes[t].floor=n}))}(t),function(e){var t=A(e,"mediaTypes.banner");if(t){var n={},r=[];t.sizes.forEach((function(e){n[e.toString()]||(n[e.toString()]=!0,r.push(e))})),t.sizes=r}}(t),function(e,t){!t&&e.ortb2Imp&&e.ortb2Imp.ext&&delete e.ortb2Imp.ext.ae}(t,e.protectedAudienceEnabled),o[n]=o[n]||[],o[n].push(t)}));var a=[];return Object.keys(o).forEach((function(t){var n={bidderRequest:Object.assign({},fD({bids:o[t],invalidBidsCount:i,prebidVersion:"9.10.0"},r))};a.push(Object.assign({},fD({data:n},e)))})),a}({url:r,method:"POST",options:{contentType:"application/json"},protectedAudienceEnabled:null===(n=t.paapi)||void 0===n?void 0:n.enabled},e,t)},interpretResponse:function(e){if(!e||!e.body||!e.body.auctionConfigs&&!e.body.bids)return[];var t=e.body,n=[],r=null;if(t.bids.length&&(n=function(e){var t=[];return e.forEach((function(e){var n,r=A(e,"meta.mediaType");if(r&&"banner"===r.toLowerCase())e.mediaType=Vo,n=function(e){if(e.ad)return e;Ke(new Error("UnrulyBidAdapter: Missing ad config."))}(e);else if(r&&"video"===r.toLowerCase()){var i=A(e,"meta.videoContext");e.mediaType=Fo,"instream"===i?n=function(e){if(e.vastUrl||e.vastXml)return e;Ke(new Error("UnrulyBidAdapter: Missing vastUrl or vastXml config."))}(e):"outstream"===i&&(n=function(e){var t=!!A(e,"ext.renderer.config"),n=!!A(e,"ext.renderer.config.siteId");if(t){if(n){var r=A(e,"ext.renderer");!function(e,t){if(!e.config)throw new Error("UnrulyBidAdapter: Missing renderer config.");if(!e.config.siteId)throw new Error("UnrulyBidAdapter: Missing renderer siteId.");parent.window.unruly=parent.window.unruly||{},parent.window.unruly.native=parent.window.unruly.native||{},parent.window.unruly.native.siteId=parent.window.unruly.native.siteId||e.config.siteId,parent.window.unruly.native.adSlotId=t,parent.window.unruly.native.supplyMode="prebid"}(r,e.requestId),parent.window.unruly.native.prebid=parent.window.unruly.native.prebid||{},parent.window.unruly.native.prebid.uq=parent.window.unruly.native.prebid.uq||[];var i=_n.install(Object.assign({},r)),o=Object.assign({},e,{renderer:i,adUnitCode:A(e,"ext.adUnitCode")});return i.setRender((function(){var e;e=o,parent.window.unruly.native.prebid.uq.push(["render",e])})),e.renderer=e.renderer||i,e}Ke(new Error("UnrulyBidAdapter: Missing renderer siteId."))}else Ke(new Error("UnrulyBidAdapter: Missing renderer config."))}(e))}n&&t.push(n)})),t}(t.bids)),t.auctionConfigs){var i=t.auctionConfigs,o=Object.keys(i);o.length&&o.forEach((function(e){r=[{bidId:e,config:i[e]}]}))}return r?{bids:n,paapi:r}:n}};Zr(gD),p("unrulyBidAdapter");var mD=new Map;function vD(e){var t={};function n(e){var n,r,i=JSON.stringify([null===(n=e.source)||void 0===n?void 0:n.toLowerCase(),e.ext]);t.hasOwnProperty(i)?(r=t[i].uids).push.apply(r,h(e.uids)):t[i]=e}return Object.entries(e).forEach((function(e){var t=o(e,2),r=t[0],i=t[1];i=Array.isArray(i)?i:[i];var a="pubProvidedId"===r?Ct(i):i.map((function(e){return function(e,t){var n=mD.get(t);if(n&&e){var r={};r.source=ot(n.getSource)?n.getSource(e):n.source;var i=ot(n.getValue)?n.getValue(e):e;if(at(i)){var o={id:i,atype:n.atype};if(ot(n.getUidExt)){var a=n.getUidExt(e);a&&(o.ext=a)}if(r.uids=[o],ot(n.getEidExt)){var s=n.getEidExt(e);s&&(r.ext=s)}return r}}return null}(e,r)}));a.filter((function(e){return null!=e})).forEach(n)})),Object.values(t)}var yD,bD,_D,wD,SD,TD,ID=Rn("sync",(function(){})),kD="User ID",AD=Do,ED=Po,CD="_pbjs_id_optout",xD=No("userId"),OD={isAllowed:Qn},PD=!1,DD=[],RD=[],jD={},MD=[],ND=function(){return null==TD&&(TD=Hr()),TD};function UD(e){return ND().fork().renameWith((function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]}))}function LD(e,t){t=t||e.storageMgr;var n="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,r=e.config.storage.name;return function(e,i,o){t.setCookie(r+(e||""),i,o,"Lax",n)}}function BD(e,t){var n=e.config.storage;try{var r=new Date(Date.now()+864e5*n.expires).toUTCString(),i=lt(t)?JSON.stringify(t):t;e.enabledStorageTypes.forEach((function(t){switch(t){case AD:!function(e,t,n){var r=e.config.storage,i=LD(e);i(null,t,n),i("_cst",rR(),n),"number"==typeof r.refreshInSeconds&&i("_last",(new Date).toUTCString(),n)}(e,i,r);break;case ED:!function(e,t,n){var r=e.config.storage,i=e.storageMgr;i.setDataInLocalStorage("".concat(r.name,"_exp"),n),i.setDataInLocalStorage("".concat(r.name,"_cst"),rR()),i.setDataInLocalStorage(r.name,encodeURIComponent(t)),"number"==typeof r.refreshInSeconds&&i.setDataInLocalStorage("".concat(r.name,"_last"),(new Date).toUTCString())}(e,i,r)}}))}catch(e){Ke(e)}}function qD(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.config.storage,i=n?"".concat(r.name,"_").concat(n):r.name;try{e.enabledStorageTypes.find((function(n){switch(n){case AD:t=function(e,t){return e.storageMgr.getCookie(t)}(e,i);break;case ED:t=function(e,t){var n=e.storageMgr,r=e.config.storage,i=n.getDataFromLocalStorage("".concat(r.name,"_exp"));return""===i?n.getDataFromLocalStorage(t):i&&new Date(i).getTime()-Date.now()>0?decodeURIComponent(n.getDataFromLocalStorage(t)):void 0}(e,i)}return!!t})),"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){Ke(e)}return t}function FD(e,t,n){t=ND().fork().startTiming("userId.callbacks.total").stopBefore(t);var r=jt((function(){clearTimeout(undefined),t()}),e.length);e.forEach((function(e){var t=UD(e.submodule.name).startTiming("callback").stopBefore(r);try{e.callback((function(r){r?(e.config.storage&&BD(e,r),e.idObj=e.submodule.decode(r,e.config),iR(VD(n))):Xe("".concat(kD,": ").concat(e.submodule.name," - request id responded with an empty value")),t()}),qD.bind(null,e))}catch(n){Ke("Error in userID module '".concat(e.submodule.name,"':"),n),t()}e.callback=void 0}))}function VD(e){return Array.isArray(e)&&e.length?$D(e):{}}function zD(e,t,n){return Object.fromEntries(Object.entries(e.reduce((function(e,r){var i=t(r);return i&&Object.keys(i).forEach((function(t){var o,a=null===(o=jD[t])||void 0===o?void 0:o.indexOf(n(r)),s={priority:dt(a)?a:-1,value:i[t]};if(e[t]){var d=s.priority>e[t].priority?s:e[t];e[t]=d}else e[t]=s})),e}),{})).map((function(e){var t=o(e,2);return[t[0],t[1].value]})))}function $D(e){return zD(e.filter((function(e){return lt(e.idObj)&&Object.keys(e.idObj).length})),(function(e){return e.idObj}),(function(e){return e.submodule.name}))}var WD,HD={};function GD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KD()||[],t=wD&&e.find((function(e){return e.source===wD}));if(t&&"string"==typeof A(t,"uids.0.id")){var n=t.uids[0].id.replace(/[\W_]/g,"");if(n.length>=32&&n.length<=150)return n;Je("User ID - Googletag Publisher Provided ID for ".concat(wD," is not between 32 and 150 characters - ").concat(n))}}var XD=Xr("userId",(function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.delay,o=void 0===i?he.timeout:i,a=r.getIds,s=void 0===a?nR:a;he.race([s().catch((function(){return null})),o(_D)]).then((function(){(function(e,t){[e].some((function(e){return!Array.isArray(e)||!e.length}))||e.forEach((function(e){e.bids&&st(e.bids)&&e.bids.forEach((function(e){var n=function(e,t){if(!Array.isArray(e)||!e.length||!t)return{};var n=e.filter((function(e){return!e.config.bidders||!st(e.config.bidders)||f(e.config.bidders,t)}));return $D(n)}(t,e.bidder);Object.keys(n).length&&(e.userId=n,e.userIdAsEids=vD(n))}))}))})(t.adUnits||u().adUnits,yD),ND().join($r(t.metrics),{propagate:!1,includeGroups:!0}),e.call(n,t)}))}));function JD(){return VD(yD)}function KD(){return vD(JD())}function YD(e){return vD(function(e,t){if(!Array.isArray(e)||!e.length)return{};var n=$D(e),r=Object.keys(n).find((function(e){var n=mD.get(e);return(null==n?void 0:n.source)===t||ot(null==n?void 0:n.getSource)&&n.getSource()===t}));return r?d({},r,n[r]):[]}(yD,e))[0]}function QD(e,t,n){return WD().then((function(){var r={};if(ot(n)){Xe("".concat(kD," - Getting encrypted signal from custom function : ").concat(n.name," & source : ").concat(e," "));var i=n(e);r[e]=i?ZD(i):null}else{var o=YD(e);Xe("".concat(kD," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),ut(o)||(r[o.source]=!0===t?ZD(o):o.uids[0].id)}return Xe("".concat(kD," - Fetching encrypted eids: ").concat(r[e])),r[e]}))}function ZD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";return 1===t&&(n="object"===a(e)?window.btoa(JSON.stringify(e)):window.btoa(e)),"".concat(t,"||").concat(n)}function eR(){if(At()){window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];var e=Z.getConfig("userSync.encryptedSignalSources");if(e){var t=e.registerDelay||0;setTimeout((function(){e.sources&&e.sources.forEach((function(e){var t=e.source,n=e.encrypt,r=e.customFunc;t.forEach((function(e){window.googletag.secureSignalProviders.push({id:e,collectorFunction:function(){return QD(e,n,r)}})}))}))}),t)}else Je("".concat(kD," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function tR(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).submoduleNames,t=arguments.length>1?arguments[1]:void 0;return WD({refresh:!0,submoduleNames:e}).then((function(){return t&&ot(t)&&t(),JD()}))}function nR(){return WD().then((function(){return JD()}),(function(e){return e===HD?Promise.resolve().then(nR):(Ke("Error initializing userId",e),he.reject(e))}))}function rR(){for(var e=Number(Xi.hash),t=[];e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function iR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JD();if(e&&wD){var t=GD(vD(e));t&&(At()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(t)}))))}}function oR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ND().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];if(t.forEach((function(e){return lR(e)})),t=t.filter((function(e){return(!e.config.storage||function(e){return!!e.enabledStorageTypes.length}(e))&&OD.isAllowed(nr,Kr(Cn,e.config.name))})),!t.length)return Je("".concat(kD," - no ID module configured")),[];var r=t.reduce((function(e,r){return UD(r.submodule.name).measureTime("init",(function(){try{(function(e,t,n){var r=Vi.getConsentData();if(e.config.storage){var i,o=qD(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){var s=new Date(qD(e,"last"));a=s&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds}if(!o||a||t||function(e){var t=qD(e,"cst");return!t||t!==rR()}(e)){var d=Object.assign({enabledStorageTypes:e.enabledStorageTypes},e.config);i=e.submodule.getId(d,r,o)}else"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,r,o));lt(i)&&(i.id&&(BD(e,i.id),o=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var l=e.submodule.getId(e.config,r,void 0);lt(l)&&("function"==typeof l.callback&&(e.callback=l.callback),l.id&&(e.idObj=e.submodule.decode(l.id,e.config)))}iR(VD(n))})(r,n,t),e.push(r)}catch(e){Ke("Error in userID module '".concat(r.submodule.name,"':"),e)}return e}))}),[]);return r.length&&function(e){var t=De().setEidPermissions;"function"==typeof t&&st(e)&&t(function(e){var t=[];return e.filter((function(e){return lt(e.idObj)&&Object.keys(e.idObj).length})).forEach((function(e){Object.keys(e.idObj).forEach((function(n){var r=mD.get(n)||{};A(e,"config.bidders")&&Array.isArray(e.config.bidders)&&r.source&&t.push({source:r.source,bidders:e.config.bidders})}))})),t}(e))}(r),r.forEach(aR.bind(null,e)),r}))}function aR(e,t){for(var n=!1,r=0;r<e.length;r++)if(t.config.name.toLowerCase()===e[r].config.name.toLowerCase()){n=!0,e[r]=t;break}n||e.push(t)}function sR(e){var t,n;return(null==e||null===(t=e.storage)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.trim().split(/\s*&\s*/))||[]}var dR=new Set([ED,AD]);function lR(e){if(!e.enabledStorageTypes){var t=sR(e.config);e.enabledStorageTypes=t.filter((function(t){switch(t){case ED:return function(e){return!(!e.storageMgr.localStorageIsEnabled()||xD.getDataFromLocalStorage(CD)&&(Xe("".concat(kD," - opt-out localStorage found, storage disabled")),1))}(e);case AD:return function(e){return!(!e.storageMgr.cookiesAreEnabled()||xD.getCookie(CD)&&(Xe("".concat(kD," - opt-out cookie found, storage disabled")),1))}(e)}return!1}))}}function cR(){!function(e){mD.clear(),Object.entries(zD(e,(function(e){return e.eids}),(function(e){return e.name}))).forEach((function(e){var t=o(e,2),n=t[0],r=t[1];return mD.set(n,r)}))}(MD);var e=function(e){function t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Je.apply(void 0,["Invalid userSync.userId config: ".concat(e)].concat(n))}return Array.isArray(e)?e.filter((function(e){if(null==e||!e.name)return t('must specify "name"',e);if(e.storage){if(!e.storage.name||!e.storage.type)return t('must specify "storage.name" and "storage.type"',e);if(!function(e){return sR(e).every((function(e){return dR.has(e)}))}(e))return t('invalid "storage.type"',e);["expires","refreshInSeconds"].forEach((function(n){var r=e.storage[n];null!=r&&"number"!=typeof r&&(r=Number(r),isNaN(r)?(t("storage.".concat(n," must be a number and will be ignored"),e),delete e.storage[n]):e.storage[n]=r)}))}return!0})):(null!=e&&t("must be an array",e),[])}(RD);if(e.length){var t=MD.filter((function(e){return!g(DD,(function(t){return t.name===e.name}))}));DD.splice(0,DD.length),t.map((function(t){var n=g(e,(function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())}));return n&&t.name!==n.name&&(n.name=t.name),n?{submodule:t,config:n,callback:void 0,idObj:void 0,storageMgr:Mo({moduleType:Cn,moduleName:n.name})}:null})).filter((function(e){return null!==e})).forEach((function(e){return DD.push(e)})),!PD&&DD.length&&(u().requestBids.before(XD,40),Co.callDataDeletionRequest.before(uR),ID.after((function(e){return e(GD())})),Xe("".concat(kD," - usersync config updated for ").concat(DD.length," submodules: "),DD.map((function(e){return e.submodule.name}))),PD=!0)}}function uR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xe("UserID: received data deletion request; deleting all stored IDs..."),DD.forEach((function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var t;(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(n))}catch(t){Ke("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}!function(e){lR(e),e.enabledStorageTypes.forEach((function(t){switch(t){case AD:!function(e){var t=LD(e,xD),n=new Date(Date.now()-864e5).toUTCString();["","_last","_cst"].forEach((function(e){try{t(e,"",n)}catch(e){Ke(e)}}))}(e);break;case ED:!function(e){["","_last","_exp","_cst"].forEach((function(t){try{xD.removeDataFromLocalStorage(e.config.storage.name+t)}catch(e){Ke(e)}}))}(e)}}))}(e)})),e.apply(this,n)}function pR(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function hR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delay,n=void 0===t?he.timeout:t;wD=void 0,DD=[],RD=[],PD=!1,yD=[],WD=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delay,r=void 0===n?he.timeout:n,i=ge(),o=ge(),a=!1;function s(n){return t=ND().fork(),null!=e&&e.reject(HD),e=ge(),he.race([n,e.promise]).finally(t.startTiming("userId.total"))}var d=yD,l=DD;function c(e){return function(){if(d===yD&&l===DD)return e.apply(void 0,arguments)}}function u(){return Xi.promise.finally(t.startTiming("userId.init.consent"))}var p=s(he.all([Mn,i.promise]).then(u).then(c((function(){oR(d,l)}))).then((function(){return o.promise.finally(t.startTiming("userId.callbacks.pending"))})).then(c((function(){var e=d.filter((function(e){return ot(e.callback)}));if(e.length)return new he((function(t){return FD(e,t,d)}))}))));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,n=void 0!==t&&t,h=e.submoduleNames,f=void 0===h?null:h,g=e.ready;return void 0!==g&&g&&!a&&(a=!0,i.resolve(),_D>0?o.resolve():Or(x.AUCTION_END,(function e(){Pr(x.AUCTION_END,e),r(bD).then(o.resolve)}))),n&&a&&(p=s(p.catch((function(){return null})).then(u).then(c((function(){var e=oR(d,l.filter((function(e){return null==f||f.includes(e.submodule.name)})),!0).filter((function(e){return null!=e.callback}));if(e.length)return new he((function(t){return FD(e,t,d)}))}))))),p}}({delay:n}),null!=SD&&SD(),MD=[],SD=e.getConfig("userSync",(function(e){var t=e.userSync;t&&(wD=t.ppid,t.userIds&&(RD=t.userIds,bD=dt(t.syncDelay)?t.syncDelay:Uo.syncDelay,_D=dt(t.auctionDelay)?t.auctionDelay:Uo.auctionDelay,cR(),function(e,t){if(e){var n={},r=new Map(t.map((function(e){return e.submodule.aliasName?[e.submodule.aliasName,e.submodule.name]:[]})));Object.keys(e).forEach((function(t){var i=st(e[t])?h(e[t]).reverse():[];n[t]=i.map((function(e){return r.has(e)?r.get(e):e}))})),jD=n}else jD={}}(t.idPriority,DD),WD({ready:!0})))})),u().getUserIds=JD,u().getUserIdsAsEids=KD,u().getEncryptedEidsForSource=pR(QD),u().registerSignalSources=eR,u().refreshUserIds=pR(tR),u().getUserIdsAsync=pR(nR),u().getUserIdsAsEidBySource=YD}(Z),Ln("userId",(function(e){e.findRootDomain=$s,g(MD,(function(t){return t.name===e.name}))||(MD.push(e),Hi.register(Cn,e.name,e.gvlid),cR(),WD({refresh:!0,submoduleNames:[e.name]}))}),{postInstallAllowed:!0}),Nc({type:Cc,name:"userExtEids",fn:function(e,t,n){var r,i,o=A(n,"bidRequests.0.userIdAsEids");o&&Object.keys(o).length>0&&Zt(e,"user.ext.eids",o.concat((null===(r=e.user)||void 0===r||null===(i=r.ext)||void 0===i?void 0:i.eids)||[]))}}),p("userId");var fR="9.10.0",gR=300,mR="USD",vR=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","yahoo.com","zeotap.com"];function yR(e,t){var n=e.bidder||e.bidderCode;return Z.getConfig("".concat(n,".").concat(t))}function bR(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function _R(e){return st(e)&&2===e.length&&!st(e[0])?[bR(e)]:e.map(bR)}function wR(e){return st(A(e,"userIdAsEids"))?e.userIdAsEids.filter((function(e){return-1!==vR.indexOf(e.source)})):[]}function SR(e){return A(e,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0}function TR(e){var t;return A(e,"params.pubId")?t=!0:A(e,"params.dcn")&&A(e,"params.pos")&&(t=!1),t}function IR(e){var t=yR(e,"mode");return void 0===(t=t?t.toLowerCase():void 0)||t===Vo?Vo:t===Fo?Fo:"all"===t?"*":void 0}function kR(e){var t=IR(e),n={currency:A(e,"params.bidOverride.cur")||mR,mediaType:t,size:"*"};return!!ot(e.getFloor)&&e.getFloor(n)}function AR(e,t,n,r){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hR(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);for(var o in n)switch(e){case"string":-1!==t.indexOf(o)&&at(n[o])&&(i[o]=n[o]);break;case"number":-1!==t.indexOf(o)&&dt(n[o])&&(i[o]=n[o]);break;case"array":-1!==t.indexOf(o)&&st(n[o])&&(i[o]=n[o]);break;case"object":-1!==t.indexOf(o)&&lt(n[o])&&(i[o]=n[o]);break;case"objectAllKeys":lt(n)&&(i[o]=n[o])}return i}function ER(e){var t,n=yR(e,"ttl");return dt(t=n||A(e,"params.ttl"))&&t>0&&t<3600?t:gR}function CR(e){return at(e)&&e.length>0}function xR(e,t){if(e){var n,r,i={id:Ne(),cur:[kR(e).currency||A(t,"params.bidOverride.cur")||mR],imp:[],site:{page:A(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:A(t,"params.bidOverride.device.ip")||A(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0,gpp:e.gppConsent?e.gppConsent.gppString:"",gpp_sid:e.gppConsent?e.gppConsent.applicableSections:[]}},source:{ext:{hb:1,adapterver:"1.1.0",prebidver:fR,integration:{name:"prebid.js",ver:fR}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:wR(t)}}};!0===TR(t)?(i.site.publisher={id:t.params.pubId},(A(t,"params.bidOverride.site.id")||A(t,"params.siteId"))&&(i.site.id=A(t,"params.bidOverride.site.id")||t.params.siteId)):i.site.id=t.params.dcn,null!==(n=e.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(i.regs.ext.gpp=e.ortb2.regs.gpp,i.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(i=function(e,t){var n=t.ortb2,r=A(n,"site")||void 0,i=A(r,"content")||void 0,o=A(r,"publisher")||void 0,a=A(r,"content.data")||void 0,s=A(n,"app.content")||void 0,d=A(n,"app.content.data")||void 0,l=A(n,"user")||void 0;if(r&&lt(r)){e.site=AR("string",["name","domain","page","ref","keywords","search"],r,e.site),e.site=AR("array",["cat","sectioncat","pagecat"],r,e.site),e.site=AR("object",["ext"],r,e.site)}if(o&&lt(o)){e.site.publisher=AR("object",["ext"],o,e.site.publisher)}if(i&&lt(i)){e.site.content=AR("string",["id","title","series","season","genre","contentrating","language"],i,e.site.content),e.site.content=AR("number",["episode","prodq","context","livestream","len"],i,e.site.content),e.site.content=AR("array",["cat"],i,e.site.content),e.site.content=AR("object",["ext"],i,e.site.content),a&&st(a)&&a.every((function(t){var n={};n=AR("string",["id","name"],t,n),n=AR("array",["segment"],t,n),n=AR("object",["ext"],t,n),e.site.content.data=[],e.site.content.data.push(n)}))}if(s&&lt(s)&&d&&st(d)&&d.every((function(t){var n={};n=AR("string",["id","name"],t,n),n=AR("array",["segment"],t,n),n=AR("object",["ext"],t,n),e.app={content:{data:[]}},e.app.content.data.push(n)})),l&&lt(l)){e.user=AR("string",["id","buyeruid","gender","keywords","customdata"],l,e.user),e.user=AR("number",["yob"],l,e.user),e.user=AR("array",["data"],l,e.user),e.user.ext=AR("object",["ext"],l,e.user.ext)}return e}(i,t));var o=A(t,"schain.nodes");return st(o)&&o.length>0&&(i.source.ext.schain=t.schain,i.source.ext.schain.nodes[0].rid=i.id),i}}function OR(e,t){var n=IR(e);if(t&&e){var r={id:e.bidId,secure:SR(e),bidfloor:kR(e).floor||A(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==n&&n!==Vo&&"*"!==n||(r.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:_R(e.sizes)},e.mediaTypes.banner.pos&&(r.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(n===Fo||"*"===n)){var i=_R(e.mediaTypes.video.playerSize);r.video={mimes:A(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:A(e,"params.bidOverride.imp.video.w")||i[0].w,h:A(e,"params.bidOverride.imp.video.h")||i[0].h,maxbitrate:A(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:A(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:A(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:A(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:A(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:A(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:A(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:A(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,plcmt:A(e,"params.bidOverride.imp.video.plcmt")||e.mediaTypes.video.plcmt||void 0,linearity:A(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:A(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:A(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:A(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(r.ext={dfp_ad_unit_code:e.adUnitCode},A(e,"params.kvp")&&lt(e.params.kvp))for(var o in r.ext.kvs={},e.params.kvp)if(at(e.params.kvp[o])||dt(e.params.kvp[o]))r.ext.kvs[o]=e.params.kvp[o];else if(st(e.params.kvp[o])){var a=e.params.kvp[o];(a.every((function(e){return at(e)}))||a.every((function(e){return dt(e)})))&&(r.ext.kvs[o]=e.params.kvp[o])}A(e,"ortb2Imp.ext.data")&&lt(e.ortb2Imp.ext.data)&&(r.ext.data=e.ortb2Imp.ext.data),A(e,"ortb2Imp.instl")&&dt(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(r.instl=e.ortb2Imp.instl),!1===TR(e)?(r.tagid=e.params.pos,r.ext.pos=e.params.pos):A(e,"params.placementId")&&(r.tagid=e.params.placementId),t.imp.push(r)}}function PR(e){var t=e.payload,n=e.requestOptions,r=e.bidderRequest,i=TR(r),o=yR(r,"endpoint"),a=o||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===i&&(a=o||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===A(r,"params.testing.e2etest"))if(Xe("Adapter e2etest mode is active"),n.withCredentials=!1,!0===i)t.site.id="1234567";else{var s=IR(r);t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach((function(e){if(e.ext.e2eTestMode=!0,s===Vo)e.tagid="8a969978017a7aaabab4ab0bc01a0009";else if(s===Fo)e.tagid="8a96958a017a7a57ac375d50c0c700cc";else{var t=r.bidderCode;Je("e2etest mode does not support ".concat(t,'.mode="all". \n Please specify either "banner" or "video"')),Je("Adapter e2etest mode: Please make sure your adUnit matches the ".concat(t,".mode video or banner"))}}))}return{url:a,method:"POST",data:t,options:n,bidderRequest:r}}var DR={code:"yahooAds",gvlid:25,aliases:[{code:"yahoossp",gvlid:25},{code:"yahooAdvertising",gvlid:25}],supportedMediaTypes:[Vo,Fo],isBidRequestValid:function(e){var t=e.params;return!0===A(t,"testing.e2etest")||!(!lt(t)||!(CR(t.pubId)||CR(t.dcn)&&CR(t.pos)))||(Je("Bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){if(!ut(e)&&!ut(t)){var n={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};n.withCredentials=Bl(t.gdprConsent);var r=function(e){var t=IR(e[0]),n=[];return t===Vo?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===Vo}))})):t===Fo?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===Fo}))})):"*"===t&&(n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===Vo||e===Fo}))}))),n}(e);if(!0===yR(t,"singleRequestMode")){var i=xR(t,r[0]);return r.forEach((function(e){OR(e,i)})),[PR({payload:i,requestOptions:n,bidderRequest:t})]}return r.map((function(e){var r=xR(t,e);return OR(e,r),PR({payload:r,requestOptions:n,bidderRequest:e})}))}Je('buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){var n=t.bidderRequest,r=[];return e.body&&Array.isArray(e.body.seatbid)?(e.body.seatbid.forEach((function(e){var t;try{t=e.bid[0]}catch(e){return r}var i=t.ext&&t.ext.encp?t.ext.encp:t.price,o={adId:A(t,"adId")?t.adId:t.impid||t.crid,requestId:t.impid,cpm:i,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||mR,dealId:t.dealid?t.dealid:null,netRevenue:!0,ttl:ER(n),meta:{advertiserDomains:t.adomain}},a=function(e){var t=e.adm;return-1!==t.indexOf("o2playerSettings")||-1!==t.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==t.indexOf("AdPlacement")?Vo:-1!==t.indexOf("VAST")?Fo:void 0}(t);a===Vo?(o.mediaType=Vo,o.ad=t.adm,o.meta.mediaType=Vo):a===Fo&&(o.mediaType=Fo,o.meta.mediaType=Fo,o.vastXml=t.adm,t.nurl&&(o.vastUrl=t.nurl)),"outstream"!==A(n,"mediaTypes.video.context")||n.renderer||(o.renderer=function(e,t){var n=_n.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{n.setRender((function(t){setTimeout((function(){o2PlayerRender(t)}),A(e,"params.testing.renderer.setTimeout")||700)}))}catch(e){Je("Renderer error: setRender() failed",e)}return n}(n)||void 0),r.push(o)})),r):r},getUserSyncs:function(e,t,n,r,i){var a=!ut(t)&&t[0].body;if(a&&a.ext&&a.ext.pixels){var s=function(e,t){var n=/\w*(?=\s)/,r=/src=("|')(.*?)\1/,i=[];if(t){var o=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);o&&o.forEach((function(t){var o=t.match(n)[0],a=t.match(r)[2];if(o&&a){var s="img"===o.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===s||!e.pixelEnabled&&"image"===s)return;i.push({type:s,url:a})}}))}return i}(e,a.ext.pixels);return s.forEach((function(e){e.url=function(e,t){for(var n={gdpr_consent:t.gdpr?t.gdpr.consentString:"",gdpr:t.gdpr&&t.gdpr.gdprApplies?"1":"0",us_privacy:t.uspConsent?t.uspConsent:"",gpp:t.gpp?t.gpp.gppString:"",gpp_sid:t.gpp&&Array.isArray(t.gpp.applicableSections)?t.gpp.applicableSections.join(","):""},r=new URL(e),i=r.searchParams,a=0,s=Object.entries(n);a<s.length;a++){var d=o(s[a],2),l=d[0],c=d[1];i.set(l,c)}return r.search=i.toString(),r.toString()}(e.url,{gpp:i,gdpr:n,uspConsent:r})})),s}return[]}};function RR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RR(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zr(DR),p("yahooAdsBidAdapter");var MR="greenbidsRtdProvider",NR={};function UR(e,t,n){var r=rt("greenbids_force_filtering");e.forEach((function(e){var i=LR(t,e.code);i&&(Zt(e,"ortb2Imp.ext.greenbids",{greenbidsId:n,keptInAuction:i.bidders,isExploration:i.isExploration}),r?(e.bids=[],Xe("Greenbids Rtd: filtering flag detected, forcing filtering of Rtd module.")):i.isExploration||BR(e,i))}))}function LR(e,t){return e.find((function(e){return e.code===t}))}function BR(e,t){var n=qR(t.bidders);e.bids=e.bids.filter((function(e){return!n.includes(e.bidder)}))}function qR(e){return Object.entries(e).filter((function(e){var t=o(e,2);return t[0],!t[1]})).map((function(e){return o(e,1)[0]}))}function FR(e){return Ct(e).map((function(e){return e.bids=e.bids.map((function(e){return{bidder:e.bidder}})),e}))}var VR={name:MR,init:function(e){var t=null==e?void 0:e.params;return null!=t&&t.pbuid?(NR.pbuid=null==t?void 0:t.pbuid,NR.timeout=(null==t?void 0:t.timeout)||200,!0):(Ke("Greenbids pbuid is not set!"),!1)},onAuctionInitEvent:function(e){var t="default_id";A(e.adUnits[0],"ortb2Imp.ext.greenbids.greenbidsId",t)!==t&&Rr(x.BILLABLE_EVENT,{type:"auction",billingId:Ne(),auctionId:e.auctionId,vendor:MR})},getBidRequestData:function(e,t,n,r){var i=function(e,t){return new Promise((function(n){var r=setTimeout((function(){Je("GreenbidsRtdProvider: Greenbids API timeout, skipping shaping"),n(e)}),NR.timeout);sn("https://t.greenbids.ai",{success:function(i){!function(e,t,n,r){clearTimeout(t);try{var i=JSON.parse(e);UR(n.adUnits,i,r)}catch(e){Je("GreenbidsRtdProvider: Greenbids API response parsing error, skipping shaping")}}(i,r,e,t),n(e)},error:function(){clearTimeout(r),Je("GreenbidsRtdProvider: Greenbids API response error, skipping shaping"),n(e)}},function(e,t){return JSON.stringify(jR(jR({version:"2.0.1"},NR),{},{referrer:window.location.href,prebid:"9.10.0",greenbidsId:t,adUnits:FR(e.adUnits)}))}(e,t),{contentType:"application/json",customHeaders:{"Greenbids-Pbuid":NR.pbuid}})}))}(e,Ne());i.then(t)},updateAdUnitsBasedOnResponse:UR,findMatchingAdUnit:LR,removeFalseBidders:BR,getFalseBidders:qR,stripAdUnits:FR};function zR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zR(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Bn("realTimeData",VR),p("greenbidsRtdProvider");var WR="https://a.greenbids.ai",HR=x.AUCTION_INIT,GR=x.AUCTION_END,XR=x.BID_TIMEOUT,JR=x.BILLABLE_EVENT,KR="bid",YR="timeout",QR={},ZR=Object.assign(Ff({ANALYTICS_SERVER:WR,analyticsType:"endpoint"}),{cachedAuctions:{},exploratorySamplingSplit:.9,initConfig:function(e){return QR.options=Ct(e.options),"string"!=typeof QR.options.pbuid||QR.options.pbuid.length<1?(Ke('"options.pbuid" is required.'),!1):("number"==typeof QR.options.sampling&&(Je('"options.sampling" is deprecated, please use "greenbidsSampling" instead.'),QR.options.greenbidsSampling=QR.options.sampling),("number"!=typeof QR.options.greenbidsSampling||QR.options.greenbidsSampling>=1)&&(Je('"options.greenbidsSampling" is not set or >=1, using this analytics module unsampled is discouraged.'),QR.options.greenbidsSampling=1),"number"==typeof QR.options.exploratorySamplingSplit&&(Xe('Greenbids Analytics: Overriding "exploratorySamplingSplit".'),this.exploratorySamplingSplit=QR.options.exploratorySamplingSplit),QR.pbuid=e.options.pbuid,QR.server=WR,!0)},sendEventMessage:function(e,t){Xe("AJAX: ".concat(e,": ")+JSON.stringify(t)),sn("".concat(QR.server).concat(e),null,JSON.stringify(t),{contentType:"application/json"})},createCommonMessage:function(e){var t=this.getCachedAuction(e);return{version:"2.3.1",auctionId:e,referrer:window.location.href,sampling:QR.options.greenbidsSampling,prebid:"9.10.0",greenbidsId:t.greenbidsId,pbuid:QR.pbuid,billingId:t.billingId,adUnits:[]}},serializeBidResponse:function(e,t){return{bidder:e.bidder,isTimeout:t===YR,hasBid:t===KR,params:e.params&&Object.keys(e.params).length>0?e.params:{}}},addBidResponseToMessage:function(e,t,n){var r=t.adUnitCode.toLowerCase(),i=e.adUnits.findIndex((function(e){return e.code===r}));if(-1!==i){var o=e.adUnits[i].bidders.findIndex((function(e){return e.bidder===t.bidder}));-1===o?e.adUnits[i].bidders.push(this.serializeBidResponse(t,n)):(e.adUnits[i].bidders[o].params=t.params&&Object.keys(t.params).length>0?t.params:{},n===KR?(e.adUnits[i].bidders[o].hasBid=!0,e.adUnits[i].bidders[o].cpm=t.cpm,e.adUnits[i].bidders[o].currency=t.currency):n===YR&&(e.adUnits[i].bidders[o].isTimeout=!0))}else Ke("Trying to add to non registered adunit")},createBidMessage:function(e){var t=this,n=e.auctionId,r=e.timestamp,i=e.auctionEnd,o=e.adUnits,a=e.bidsReceived,s=e.noBids,d=this.getCachedAuction(n),l=this.createCommonMessage(n),c=d.timeoutBids||[];return l.auctionElapsed=i-r,o.forEach((function(e){var t,n,r,i,o=(null===(t=e.code)||void 0===t?void 0:t.toLowerCase())||"unknown_adunit_code";l.adUnits.push({code:o,mediaTypes:$R($R($R({},void 0!==(null===(n=e.mediaTypes)||void 0===n?void 0:n.banner)&&{banner:e.mediaTypes.banner}),void 0!==(null===(r=e.mediaTypes)||void 0===r?void 0:r.video)&&{video:e.mediaTypes.video}),void 0!==(null===(i=e.mediaTypes)||void 0===i?void 0:i.native)&&{native:e.mediaTypes.native}),ortb2Imp:e.ortb2Imp||{},bidders:[]})})),s.forEach((function(e){return t.addBidResponseToMessage(l,e,"noBid")})),a.forEach((function(e){return t.addBidResponseToMessage(l,e,KR)})),c.forEach((function(e){return t.addBidResponseToMessage(l,e,YR)})),l},getCachedAuction:function(e){return this.cachedAuctions[e]=this.cachedAuctions[e]||{timeoutBids:[],greenbidsId:null,billingId:null,isSampled:!0},this.cachedAuctions[e]},handleAuctionInit:function(e){var t=this.getCachedAuction(e.auctionId);try{t.greenbidsId=e.adUnits[0].ortb2Imp.ext.greenbids.greenbidsId}catch(e){Xe("Couldn't find Greenbids RTD info, assuming analytics only"),t.greenbidsId=Ne()}t.isSampled=function(e,t,n){if(rt("greenbids_force_sampling"))return Xe("Greenbids Analytics: sampling flag detected, forcing analytics"),!0;if(t<0||t>1)return Je("Sampling rate must be between 0 and 1"),!0;var r=t*n,i=t*(1-n),o=parseInt(e.slice(-4),16);return o<65536*r||o>=65536*(1-i)}(t.greenbidsId,QR.options.greenbidsSampling,this.exploratorySamplingSplit)},handleAuctionEnd:function(e){var t=this.getCachedAuction(e.auctionId);rt("greenbids_force_filtering")||this.sendEventMessage("/",this.createBidMessage(e,t))},handleBidTimeout:function(e){var t=this;e.forEach((function(e){t.getCachedAuction(e.auctionId).timeoutBids.push(e)}))},handleBillable:function(e){var t=this.getCachedAuction(e.auctionId);"greenbidsRtdProvider"===e.vendor&&(t.billingId=e.billingId||"unknown_billing_id")},track:function(e){var t=e.eventType,n=e.args;try{var r,i;if(t===HR&&this.handleAuctionInit(n),null===(r=null===(i=this.getCachedAuction(null==n?void 0:n.auctionId))||void 0===i?void 0:i.isSampled)||void 0===r||r)switch(t){case XR:this.handleBidTimeout(n);break;case GR:this.handleAuctionEnd(n);break;case JR:this.handleBillable(n)}}catch(e){Je("There was an error handling event "+t)}},getAnalyticsOptions:function(){return QR}});function ej(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ZR.originEnableAnalytics=ZR.enableAnalytics,ZR.enableAnalytics=function(e){this.initConfig(e),"number"==typeof e.options.sampling&&(e.options.sampling=1),Xe("loading greenbids analytics"),ZR.originEnableAnalytics(e)},Co.registerAnalyticsAdapter({adapter:ZR,code:"greenbids"}),p("greenbidsAnalyticsAdapter");var rj="gumgum",ij=Mo({bidderCode:rj}),oj={t:0,rq:8,pbv:"9.10.0"},aj=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"],sj={},dj=null;function lj(e,t){var r,i,o,a,s,d,l,c,u,p,h,f=function(e){return new RegExp("[?#&](".concat(e,"=(.*?))($|&)"),"i")},g={};try{i=(r=n.g.top).screen,o=e||"",a=t||""}catch(e){return Ke(e),g}return g={vw:r.innerWidth,vh:r.innerHeight,sw:i.width,sh:i.height,pu:(u=o,["ggad","ggdeal"].reduce((function(e,t){var n=u.match(f(t));return n?(n[1]&&(e=e.replace(n[1],"")),n[3]&&(e=e.replace(n[3],"")),e):e}),u)),tpl:a,ce:ij.cookiesAreEnabled(),dpr:r.devicePixelRatio||1,jcsi:JSON.stringify(oj),ogu:(c=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']"),c?c.content:null)},(l=(h=(p=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection))&&(p.downlink||p.bandwidth))?Math.round(1024*h):null)&&(g.ns=l),(s=(o.match(f("ggad"))||[0,0,0])[2])&&(g[isNaN(s)?"eAdBuyId":"adBuyId"]=s),(d=(o.match(f("ggdeal"))||[0,0,0])[2])&&(g.ggdeal=d),g}function cj(e,t){return e.replace("AD_JSON",window.btoa(JSON.stringify(t)))}function uj(e){var t=0,n=0,r=0;return e.forEach((function(e){var i=o(e,2),a=i[0],s=i[1],d=a>s?a:s;(d>r||d===r&&a>=t&&s>=n)&&(r=d,t=a,n=s)})),[t,n]}var pj={code:rj,gvlid:61,aliases:["gg"],isBidRequestValid:function(e){var t=e.params,n=e.adUnitCode,r=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(sj[r])return Je("[GumGum] Please check the implementation for ".concat(r," for the placement ").concat(n)),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return Je("[GumGum] No product selected for the placement ".concat(n,", please check your implementation.")),!1}return!(t.bidfloor&&("number"!=typeof t.bidfloor||!isFinite(t.bidfloor))&&(Je("[GumGum] bidfloor must be a Number"),1))},buildRequests:function(e,t){var n=[],r=t&&t.gdprConsent,i=t&&t.uspConsent,s=t&&t.gppConsent,d=t&&t.timeout,l=!0===Z.getConfig("coppa")?1:0,c=t&&t.refererInfo&&t.refererInfo.page,u=t&&t.refererInfo&&t.refererInfo.topmostLocation;return ht(e,(function(e){var p,h,f,g=e.bidId,m=e.mediaTypes,v=void 0===m?{}:m,y=e.params,b=void 0===y?{}:y,_=e.schain,w=e.userId,S=void 0===w?{}:w,T=e.ortb2Imp,I=e.adUnitCode,k=void 0===I?"":I,E=function(e,t,n){var r=Object.keys(e)[0]||"banner",i={floor:0,currency:"USD"};if("function"==typeof n.getFloor){var o=n.getFloor({mediaType:r,size:"*"}),a=o.currency,s=o.floor;s&&(i.floor=s),a&&(i.currency=a),t&&s&&"USD"===a&&(i.floor=Math.max(t,parseFloat(s)))}else t&&(i.floor=t);return i}(v,b.bidfloor,e),C=E.currency,x=E.floor,O=function(e){var t=["uid","eid","lipbid","envelope"];return Object.keys(e).reduce((function(n,r){var i=e[r];switch(a(i)){case"string":n[r]=i;break;case"object":var o=t.filter((function(e){return i.hasOwnProperty(e)}));o.length&&(n[r]=i[o[0]])}return n}),{})}(S),P=A(T,"ext.gpid")||A(T,"ext.data.pbadslot"),D=1===A(T,"ext.ae"),R=[1,1],j={displaymanager:"Prebid.js - gumgum",displaymanagerver:"9.10.0"},M=new Date,N=M.getTime(),U=M.getTimezoneOffset();if(j.lt=N,j.to=U,S&&S.pubProvidedId){var L=function(e,t){var n=JSON.stringify(e);if(n.length<=1800)return n;var r=e.slice(0,Math.floor(e.length*(1800/n.length)));return JSON.stringify(r)}(S.pubProvidedId.filter((function(e){return aj.includes(e.source)})));j.pubProvidedId=L}for(var B in S&&S.id5id&&S.id5id.uid&&S.id5id.ext&&(j.id5Id=S.id5id.uid||null,j.id5IdLinkType=S.id5id.ext.linkType||null),k&&(j.aun=k),O)j[B]=O[B];if(v.banner?R=v.banner.sizes:v.video&&(R=v.video.playerSize,j=function(e){var t=e.minduration,n=e.maxduration,r=e.linearity,i=e.startdelay,a=e.placement,s=e.plcmt,d=e.protocols,l=void 0===d?[]:d,c=e.playerSize,u=Be(void 0===c?[]:c),p=o(u[0]&&u[0].split("x"),2),h=p[0],f=p[1],g="";l.length&&(g=l.join(","));var m={mind:t,maxd:n,li:r,sd:i,pt:a,pr:g,viw:h,vih:f};return null!=s&&(m.vplcmt=s),m}(v.video)),P&&(j.gpid=P),dj&&(j.pv=dj),x&&(j.fp=x,j.fpc=C),t&&t.ortb2&&t.ortb2.site&&function(e,t,n){var r=function(e){if(e.content&&Array.isArray(e.content.data)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ej(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ej(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.content.data);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.name.includes("iris.com")||r.name.includes("iris.tv"))return r.ext.cids.join(",")}}catch(e){n.e(e)}finally{n.f()}}return null}(t);r?e.irisid=r:n.irisid&&"string"==typeof n.irisid&&(e.irisid=n.irisid)}(j,t.ortb2.site,b),b.iriscat&&"string"==typeof b.iriscat&&(j.iriscat=b.iriscat),b.zone||b.pubId)if(b.zone?j.t=b.zone:j.pubId=b.pubId,j.pi=2,b.slot){var q=o(uj(R),2),F=q[0],V=q[1];j.maxw=F,j.maxh=V,j.si=b.slot,j.pi=3,j.bf=R.reduce((function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])}),"")}else b.native?(j.ni=b.native,j.pi=5):v.video?j.pi=2===v.video.linearity?6:7:b.product&&"skins"===b.product.toLowerCase()&&(j.pi=8);else j=nj(nj({},j),function(e,t){var n={};if(e.inScreenPubID&&(n.pubId=e.inScreenPubID,n.pi=2),e.inScreen&&(n.t=e.inScreen,n.pi=2),e.inSlot){var r=o(uj(t),2),i=r[0],a=r[1];n.maxw=i,n.maxh=a,n.si=e.inSlot,n.pi=3,n.bf=t.reduce((function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])}),"")}return e.ICV&&(n.ni=e.ICV,n.pi=5),e.videoPubID&&(n.pubId=e.videoPubID,n.pi=7),e.video&&(n.t=e.video,n.pi=7),e.inVideo&&(n.t=e.inVideo,n.pi=6),n}(b,R));D&&(j.ae=D),r&&(j.gdprApplies=r.gdprApplies?1:0),j.gdprApplies&&(j.gdprConsent=r.consentString),i&&(j.uspConsent=i),s?(j.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",j.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!s&&null!=t&&null!==(p=t.ortb2)&&void 0!==p&&null!==(h=p.regs)&&void 0!==h&&h.gpp&&(j.gppString=t.ortb2.regs.gpp,j.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):"");var z,$,W=A(t,"ortb2.regs.ext.dsa");W&&(j.dsa=JSON.stringify(W)),l&&(j.coppa=l),_&&_.nodes&&(j.schain=($="".concat((z=_).ver,",").concat(z.complete),z.nodes.map((function(e){$+="!".concat(encodeURIComponent(e.asi||""),","),$+="".concat(encodeURIComponent(e.sid||""),","),$+="".concat(encodeURIComponent(e.hp||""),","),$+="".concat(encodeURIComponent(e.rid||""),","),$+="".concat(encodeURIComponent(e.name||""),","),$+="".concat(encodeURIComponent(e.domain||""))})),$)),n.push({id:g,tmax:d,tId:null==T||null===(f=T.ext)||void 0===f?void 0:f.tid,pi:j.pi,selector:b.selector,sizes:R,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:Object.assign(j,lj(c,u))})})),n},interpretResponse:function(e,t){var n=[],r=e.body;if(!r||r.err){var i=t.data||{},a=i.si||i.ni||i.t||i.pubId,s=r?r.err.drt:18e5;sj[a]={productId:i.pi,timestamp:(new Date).getTime()},setTimeout((function(){sj[a]&&delete sj[a]}),s),Je("[GumGum] Please check the implementation for ".concat(a))}var d=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},r),l=d.ad,c=l.price,u=l.id,p=l.markup,h=l.cur,g=l.width,m=l.height,v=l.maxw,y=l.maxh,b=d.cw,_=d.pag.pvid,w=d.jcsi,S=d.meta,T=S.adomain,I=S.mediaType,k=t.data||{},A=k.pi,E=6===A||7===A?Fo:Vo,C=3===A&&9===k.si,x={advertiserDomains:T||[],mediaType:I||E},O=Be(t.sizes);if(v&&y)O=["".concat(v,"x").concat(y)];else if(5===A&&f(O,"1x1"))O=["1x1"];else if(2===A&&f(O,"1x1")||3===A){var P=t.sizes&&t.sizes.reduce((function(e,t){var n=o(t,2),r=n[0],i=n[1];return g===r&&m===i&&e.push(t.join("x")),e}),[])||[];O=P.length?P:Be(t.sizes)}var D=o(O[0].split("x"),2),R=D[0],j=D[1];return w&&(r.jcsi=oj),dj=_,u&&n.push(nj(nj({ad:b?cj(b,Object.assign({},r,{bidRequest:t})):p},E===Fo&&{ad:p,vastXml:p}),{},{mediaType:E,cpm:C?.1:c,creativeId:u,currency:h||"USD",height:j,netRevenue:!0,requestId:t.id,ttl:60,width:R,meta:x})),n},getUserSyncs:function(e,t){return t.map((function(e){return e.body&&e.body.pxs&&e.body.pxs.scr||[]})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return{type:"f"===e.t?"iframe":"image",url:e.u}}))},supportedMediaTypes:[Vo,Fo]};Zr(pj),p("gumgumBidAdapter");var hj,fj=["modelGroups"];function gj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gj(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vj,yj={NOT_FOUND:"not_found",RANDOM:"random"},bj="Price Floors",_j=an(1e4),wj=Symbol(),Sj=[wj,"gptSlot","adUnitCode","size","domain","mediaType"],Tj=!1,Ij=!1,kj={},Aj=[],Ej={};function Cj(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?wa.index:n;return(null==e?void 0:e.adUnitCode)||r.getAdUnit(t).code}var xj=(d(hj={},wj,(function(){return"*"})),d(hj,"size",(function(e,t){return function(e){if(ze(e))return qe(e)}(t.size)||"*"})),d(hj,"mediaType",(function(e,t){return t.mediaType||"banner"})),d(hj,"gptSlot",(function(e,t){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=(void 0===t?wa.index:t).getAdUnit({adUnitId:e});return"gam"===A(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).adUnitId)||Od(Cj(e,t)).gptSlot})),d(hj,"domain",(function(){return null==vj&&(vj=Wt(mi().topmostLocation,{noDecodeWholeURL:!0}).hostname),vj})),d(hj,"adUnitCode",(function(e,t){return Cj(e,t)})),hj);function Oj(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e,t,n){return e.length?e.reduce((function(e,r){var i=xj[r](t,n)||"*";return e.push("*"===i?["*"]:[i.toLowerCase(),"*"]),e}),[]):[]}(A(e,"schema.fields")||[],t,r);if(!i.length)return{matchingFloor:void 0};var o=i.map((function(e){return e[0]})).join("-"),a=A(e,"matchingInputs.".concat(o));if(a)return mj({},a);var s,d,l=(s=i,d=A(e,"schema.delimiter")||"|",s.reduce((function(e,t){var n=[];return e.map((function(e){t.map((function(t){n.push(e+d+t)}))})),n})).sort((function(e,t){return e.split("*").length-t.split("*").length}))),c=g(l,(function(t){return e.values.hasOwnProperty(t)})),u={floorMin:e.floorMin||0,floorRuleValue:e.values[c],matchingData:l[0],matchingRule:c===(null===(n=e.meta)||void 0===n?void 0:n.defaultRule)?void 0:c},p=A(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof p&&(u.floorMin=p),u.matchingFloor=Math.max(u.floorMin,u.floorRuleValue),Zt(e,"matchingInputs.".concat(o),mj({},u)),u}function Pj(e,t,n){return parseFloat($o(e,mj(mj({},t),{},{cpm:e}),n))}var Dj={banner:function(e){return A(e,"mediaTypes.banner.sizes")||[]},video:function(e){return A(e,"mediaTypes.video.playerSize")||[]},native:function(e){return A(e,"mediaTypes.native.image.sizes")?[A(e,"mediaTypes.native.image.sizes")]:[]}};function Rj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},t=this,n=Ej[t.auctionId];if(!n||n.skipped)return{};e=function(e,t){var n=Object.keys(e.mediaTypes||{});return"*"===t.mediaType&&1===n.length&&(t.mediaType=n[0]),"*"===t.size&&-1!==n.indexOf(t.mediaType)&&Dj[t.mediaType]&&1===Dj[t.mediaType](e).length&&(t.size=Dj[t.mediaType](e)[0]),t}(t,e);var r,i,o,a,s=Oj(n.data,mj({},t),{mediaType:e.mediaType,size:e.size}),d=e.currency||n.data.currency;if(s.matchingFloor&&d!==n.data.currency)try{s.matchingFloor=u().convertCurrency(s.matchingFloor,n.data.currency,d)}catch(e){Je("".concat(bj,": Unable to get currency conversion for getFloor for bidder ").concat(t.bidder,". You must have currency module enabled with defaultRates in your currency config")),d=n.data.currency}if(n.enforcement.bidAdjustment&&s.matchingFloor){var l=kn.get(t.bidder,"inverseBidAdjustment");if(l)s.matchingFloor=l(s.matchingFloor,t);else{var c=Pj(s.matchingFloor,null,t);s.matchingFloor=c?(i=c,(r=s.matchingFloor)*(o=Math.pow(10,10))/(i*o)*(r*o)/o):s.matchingFloor}}return s.matchingFloor?{floor:(a=s.matchingFloor,4,Math.ceil((parseFloat(a)*Math.pow(10,4)).toFixed(1))/Math.pow(10,4)),currency:d}:{}}function jj(e,t){var n=Ct(e);return n.schema.delimiter=e.schema.delimiter||"|",n.values=function(e,t){var n=e.schema.fields,r=e.schema.delimiter,i=t&&-1===n.indexOf("adUnitCode")&&n.unshift("adUnitCode");return Object.keys(e.values).reduce((function(n,o){return n[(i?"".concat(t).concat(r).concat(o):o).toLowerCase()]=e.values[o],n}),{})}(n,t),n.currency=n.currency||"USD",n}function Mj(e){e.hasExited||(Aj=Aj.filter((function(t){return t.timer!==e.timer})),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||Ne(),Ej[e.reqBidsConfigObj.auctionId]=function(e,t){var n=Ct(kj);if(2===A(n,"data.floorsSchemaVersion")){var r=n.data,i=r.modelGroups,o=hp(r,fj);n.data=Object.assign(o,function(e,t){for(var n=Math.floor(Math.random()*t+1),r=0;r<e.length;r++)if((n-=e[r].modelWeight)<=0)return e[r]}(i,o.modelWeightSum))}var a=0===Object.keys(A(n,"data.values")||{}).length;if(n.data=a?function(e){var t=e.find((function(e){var t;return null!=(null===(t=e.floors)||void 0===t?void 0:t.schema)}));return e.reduce((function(e,n){var r,i;if(null!=(null===(r=n.floors)||void 0===r?void 0:r.schema)&&!Gt(n.floors.schema,null==t||null===(i=t.floors)||void 0===i?void 0:i.schema))return Ke("".concat(bj,": adUnit '").concat(n.code,"' declares a different schema from one previously declared by adUnit '").concat(t.code,"'. Floor config for '").concat(n.code,"' will be ignored.")),e;var o=Object.assign({},null==t?void 0:t.floors,{values:void 0},n.floors);if(Lj(o))if(e.values){var a=jj(o,n.code).values;Object.assign(e.values,a)}else(e=jj(o,n.code)).location="adUnit";else null!=n.floors&&Je("adUnit '".concat(n.code,"' provides an invalid `floor` definition, it will be ignored for floor calculations"),n);return e}),{})}(e):jj(n.data),0===Object.keys(A(n,"data.values")||{}).length)n.skipped=!0,n.skippedReason=yj.NOT_FOUND;else{var s,d=rt("pbjs_skipRate")||(null!==(s=A(n,"data.skipRate"))&&void 0!==s?s:n.skipRate),l=100*Math.random()<parseFloat(d);n.skipped=l,l&&(n.skippedReason=yj.RANDOM)}return n.hasOwnProperty("floorMin")&&(n.data.floorMin=n.floorMin),function(e,t,n){var r=function(e){var t,n,r=e.data,i=e.enforcement;return(null==r||null===(t=r.noFloorSignalBidders)||void 0===t?void 0:t.length)>0?r.noFloorSignalBidders:(null==i||null===(n=i.noFloorSignalBidders)||void 0===n?void 0:n.length)>0?i.noFloorSignalBidders:[]}(t);e.forEach((function(e){e.bids.forEach((function(e){var i,o=r.some((function(t){return t===e.bidder}));t.skipped||o?(o&&Xe("noFloorSignal to ".concat(e.bidder)),delete e.getFloor):e.getFloor=Rj,e.auctionId=n,e.floorData={noFloorSignaled:o,skipped:t.skipped,skipRate:null!==(i=A(t,"data.skipRate"))&&void 0!==i?i:t.skipRate,skippedReason:t.skippedReason,floorMin:t.floorMin,modelVersion:A(t,"data.modelVersion"),modelWeight:A(t,"data.modelWeight"),modelTimestamp:A(t,"data.modelTimestamp"),location:A(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:kj.fetchStatus}}))}))}(e,n,t),n}(e.reqBidsConfigObj.adUnits||u().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function Nj(e){return e=function(e){if(dt(e.default)){var t,n,r="*",i=((null===(t=e.schema)||void 0===t?void 0:t.fields)||[]).length;i?r=Array(i).fill("*").join((null===(n=e.schema)||void 0===n?void 0:n.delimiter)||"|"):Zt(e,"schema.fields",[wj]),e.values=e.values||{},null==e.values[r]&&(e.values[r]=e.default,e.meta={defaultRule:r})}return e}(e),!!function(e){if(Array.isArray(e)&&e.length>0){if(e.every((function(e){return Sj.includes(e)})))return!0;Ke("".concat(bj,": Fields received do not match allowed fields"))}return!1}(A(e,"schema.fields"))&&(t=e,n=e.schema.fields.length,r=e.schema.delimiter||"|","object"===a(t.values)&&(t.values=Object.keys(t.values).reduce((function(e,i){return function(e,t,n,r){return"string"==typeof e&&e.split(r).length===n&&"number"==typeof t}(i,t.values[i],n,r)&&(e[i]=t.values[i]),e}),{}),Object.keys(t.values).length>0));var t,n,r}var Uj={1:function(e){return Nj(e)},2:function(e){return!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((function(t){return!("number"!=typeof t.modelWeight||!Nj(t)||(e.modelWeightSum+=t.modelWeight,0))})))}};function Lj(e){return"object"===a(e)&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof Uj[e.floorsSchemaVersion]?(Ke("".concat(bj,": Unknown floorsSchemaVersion: "),e.floorsSchemaVersion),!1):Uj[e.floorsSchemaVersion](e))}function Bj(e,t){if(e&&"object"===a(e)&&Lj(e))return Xe("".concat(bj,": A ").concat(t," set the auction floor data set to "),e),mj(mj({},e),{},{location:t});Ke("".concat(bj,": The floors data did not contain correct values"),e)}var qj=Xr("priceFloors",(function(e,t){var n={reqBidsConfigObj:t,context:this,nextFn:e,haveExited:!1,timer:null};kj.auctionDelay>0&&Tj?(n.timer=setTimeout((function(){Je("".concat(bj,": Fetch attempt did not return in time for auction")),kj.fetchStatus="timeout",Mj(n)}),kj.auctionDelay),Aj.push(n)):Mj(n)}));function Fj(){Aj.forEach((function(e){clearTimeout(e.timer),Mj(e)})),Aj=[]}function Vj(e){var t;Tj=!1,kj.fetchStatus="success";try{t=JSON.parse(e)}catch(n){t=e}var n=Bj(t,"fetch");n&&(kj.data=n,kj.skipRate=dt(n.skipRate)?n.skipRate:kj.skipRate,kj.floorProvider=n.floorProvider||kj.floorProvider),Fj()}function zj(e){Tj=!1,kj.fetchStatus="error",Ke("".concat(bj,": Fetch errored with: "),e),Fj()}var $j=Jr("priceFloors",(function(e,t,n,r){var i=Ej[n.auctionId];if(!i||!n||i.skipped)return e.call(this,t,n,r);var o,a=wa.index.getBidRequest(n),s=Oj(i.data,a,mj(mj({},n),{},{size:[n.width,n.height]}));if(!s.matchingFloor)return 0!==s.matchingFloor&&Je("".concat(bj,": unable to determine a matching price floor for bidResponse"),n),e.call(this,t,n,r);var d,l=i.data.currency.toUpperCase(),c=n.currency||"USD";if(l===c.toUpperCase())o=n.cpm;else if(n.originalCurrency&&l===n.originalCurrency.toUpperCase())o=n.originalCpm;else try{o=u().convertCurrency(n.cpm,c.toUpperCase(),l)}catch(i){return Ke("".concat(bj,": Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ").concat(n)),e.call(this,t,n,r)}return function(e,t,n,r){n.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:r,enforcements:mj({},e.enforcement),matchedFields:{}},e.data.schema.fields.forEach((function(r,i){var o=t.matchingData.split(e.data.schema.delimiter)[i];n.floorData.matchedFields[r]=o}))}(i,s,n,o=Pj(o,n,a)),function(e,t,n){var r=!1!==A(e,"enforcement.enforceJS"),i=!0===A(e,"enforcement.floorDeals")||!n.dealId,o=n.floorData.cpmAfterAdjustments<t.matchingFloor;return r&&o&&i}(i,s,n)?(r(N.FLOOR_NOT_MET),void Je("".concat(bj,": ").concat(n.bidderCode,"'s Bid Response for ").concat(t," was rejected due to floor not met (adjusted cpm: ").concat(null==n||null===(d=n.floorData)||void 0===d?void 0:d.cpmAfterAdjustments,", floor: ").concat(null==s?void 0:s.matchingFloor,")"),n)):e.call(this,t,n,r)}));function Wj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wj(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Z.getConfig("floors",(function(e){return function(e){var t;kj=Ft(e,["floorMin","enabled",function(e){return!1!==e},"auctionDelay",function(e){return e||0},"floorProvider",function(t){return A(e,"data.floorProvider",t)},"endpoint",function(e){return e||{}},"skipRate",function(){return isNaN(A(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate},"enforcement",function(e){return Ft(e||{},["enforceJS",function(e){return!1!==e},"enforcePBS",function(e){return!0===e},"floorDeals",function(e){return!0===e},"bidAdjustment",function(e){return!1!==e},"noFloorSignalBidders",function(e){return e||[]}])},"additionalSchemaFields",function(e){return"object"===a(e)&&Object.keys(e).length>0?(t=e,void Object.keys(t).forEach((function(e){-1===Sj.indexOf(e)&&"function"==typeof t[e]&&(Sj.push(e),xj[e]=t[e])}))):void 0;var t},"data",function(e){return e&&Bj(e,"setConfig")||void 0}]),kj.enabled?((t=kj.endpoint).url&&!Tj?"GET"!==(t.method||"GET")?Ke("".concat(bj,": 'GET' is the only request method supported at this time!")):(_j(t.url,{success:Vj,error:zj},null,{method:"GET"}),Tj=!0):Tj&&Je("".concat(bj,": A fetch is already occuring. Skipping.")),Ij||(Or(x.AUCTION_END,(function(e){setTimeout((function(){return delete Ej[e.auctionId]}),3e3)})),u().requestBids.before(qj,50),Nn("addBidResponse").before($j,Ze()?4:50),Ij=!0)):(Xe("".concat(bj,": Turning off module")),kj={},Ej={},Nn("addBidResponse").getHooks({hook:$j}).remove(),u().requestBids.getHooks({hook:qj}).remove(),Ij=!1)}(e.floors)})),Nc({type:xc,name:"bidfloor",fn:function(e,t,n){if("function"==typeof t.getFloor){var r,i;try{var o=t.getFloor({currency:n.currency||Z.getConfig("currency.adServerCurrency")||"USD",mediaType:n.mediaType||"*",size:"*"});r=o.currency,i=o.floor}catch(e){return void Je("Cannot compute floor for bid",t)}i=parseFloat(i),null==r||null==i||isNaN(i)||Object.assign(e,{bidfloor:i,bidfloorcur:r})}}}),Nc({type:xc,name:"extPrebidFloors",fn:function(e,t,n){if(null!=e.bidfloor){var r,i,o,a,s,d,l,c,u,p,h=n.reqContext.floorMin||{},f=h.floorMinCur,g=h.floorMin;null==f&&(f=e.bidfloorcur);var m=(null===(r=e.ext)||void 0===r||null===(i=r.prebid)||void 0===i||null===(o=i.floors)||void 0===o?void 0:o.floorMinCur)||(null===(a=e.ext)||void 0===a||null===(s=a.prebid)||void 0===s?void 0:s.floorMinCur)||f,v=(null===(d=e.ext)||void 0===d||null===(l=d.prebid)||void 0===l||null===(c=l.floors)||void 0===c?void 0:c.floorMin)||(null===(u=e.ext)||void 0===u||null===(p=u.prebid)||void 0===p?void 0:p.floorMin),y=Sx(e.bidfloor,e.bidfloorcur,f),b=!(!v||!m)&&Sx(v,m,f),_=b&&b<y?b:y;Zt(e,"ext.prebid.floors.floorMin",_),(null==g||g>_)&&(g=_),n.reqContext.floorMin={floorMin:g,floorMinCur:f}}},dialects:[Rc],priority:-1}),Nc({type:Cc,name:"extPrebidFloors",fn:function(e,t,n){var r,i,o;Ij&&Zt(e,"ext.prebid.floors.enabled",(null===(r=e.ext)||void 0===r||null===(i=r.prebid)||void 0===i||null===(o=i.floors)||void 0===o?void 0:o.enabled)||!1),null!=n&&n.floorMin&&Xt(e,{ext:{prebid:{floors:n.floorMin}}})},dialects:[Rc]}),p("priceFloors");var Gj=["prebid-eu","prebid-us","prebid-asia"],Xj=["USD"],Jj=[Vo,qo],Kj=[{name:"dsarequired",min:0,max:3},{name:"pubrender",min:0,max:2},{name:"datatopub",min:0,max:2}],Yj={NATIVE:{IMAGE_TYPE:{ICON:1,MAIN:3},ASSET_ID:{TITLE:1,IMAGE:2,ICON:3,BODY:4,SPONSORED:5,CTA:6},DATA_ASSET_TYPE:{SPONSORED:1,DESC:2,CTA_TEXT:12}}};function Qj(e){if("banner"===e.mediaType||A(e,"mediaTypes.banner")||!e.mediaType&&!e.mediaTypes){var t=e.sizes||e.mediaTypes.banner.sizes;return{w:t[0][0],h:t[0][1],format:t.map((function(e){return{w:e[0],h:e[1]}}))}}}function Zj(e,t){var n="unknown",r=null;e&&e.length>0&&(n=e[0].params.publisherId,r=e[0].params.channel&&e[0].params.channel.toString().slice(0,50));var i={publisher:{id:n.toString()},page:t.refererInfo.page,name:window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")};return r&&(i.channel=r),i}function eM(e,t){return{tid:(null==t?void 0:t.auctionId)||""}}function tM(e){if("native"===e.mediaType||A(e,"mediaTypes.native"))return{request:{assets:nM(e)},ver:"1.1"}}function nM(e){var t=e.nativeParams||A(e,"mediaTypes.native"),n=[];return t.title&&n.push({id:Yj.NATIVE.ASSET_ID.TITLE,required:t.title.required?1:0,title:{len:t.title.len||25}}),t.image&&n.push({id:Yj.NATIVE.ASSET_ID.IMAGE,required:t.image.required?1:0,img:rM(t.image,Yj.NATIVE.IMAGE_TYPE.MAIN)}),t.icon&&n.push({id:Yj.NATIVE.ASSET_ID.ICON,required:t.icon.required?1:0,img:rM(t.icon,Yj.NATIVE.IMAGE_TYPE.ICON)}),t.sponsoredBy&&n.push({id:Yj.NATIVE.ASSET_ID.SPONSORED,required:t.sponsoredBy.required?1:0,data:{type:Yj.NATIVE.DATA_ASSET_TYPE.SPONSORED,len:t.sponsoredBy.len}}),t.body&&n.push({id:Yj.NATIVE.ASSET_ID.BODY,required:t.body.request?1:0,data:{type:Yj.NATIVE.DATA_ASSET_TYPE.DESC,len:t.body.len}}),t.cta&&n.push({id:Yj.NATIVE.ASSET_ID.CTA,required:t.cta.required?1:0,data:{type:Yj.NATIVE.DATA_ASSET_TYPE.CTA_TEXT,len:t.cta.len}}),n}function rM(e,t){var n={type:t};if(e.aspect_ratios){var r=e.aspect_ratios[0],i=r.min_width||100;n.wmin=i,n.hmin=i/r.ratio_width*r.ratio_height}if(e.sizes){var o=Array.isArray(e.sizes[0])?e.sizes[0]:e.sizes;n.w=o[0],n.h=o[1]}return n}Zr({code:"rtbhouse",supportedMediaTypes:Jj,gvlid:16,isBidRequestValid:function(e){return!(!f(Gj,e.params.region)||!e.params.publisherId)},buildRequests:function(e,t){var n;e=as(e);var r={id:t.bidderRequestId,imp:e.map((function(e){return function(e,t){var n,r,i,o,a={id:e.bidId,banner:Qj(e),native:tM(e),tagid:e.adUnitCode.toString()},s=function(e){var t=[];return"function"==typeof e.getFloor&&Object.keys(e.mediaTypes).forEach((function(n){f(Jj,n)&&t.push(e.getFloor({currency:Xj[0],mediaType:n,size:e.sizes||"*"}).floor)})),t.length>0?Math.max.apply(Math,t):parseFloat(e.params.bidfloor)}(e);(s&&(a.bidfloor=s),null!==(n=t.paapi)&&void 0!==n&&n.enabled)?(a.ext=a.ext||{},a.ext.ae=null==e||null===(r=e.ortb2Imp)||void 0===r||null===(i=r.ext)||void 0===i?void 0:i.ae):null!==(o=a.ext)&&void 0!==o&&o.ae&&delete a.ext.ae;var d=A(e,"ortb2Imp.ext.tid");return d&&(a.ext=a.ext||{},a.ext.tid=d),a}(e,t)})),site:Zj(e,t),cur:Xj,test:e[0].params.test||0,source:eM(e[0],t)};if(t&&t.gdprConsent&&t.gdprConsent.gdprApplies){var i=t.gdprConsent.consentString?t.gdprConsent.consentString.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):"",o=t.gdprConsent.gdprApplies?1:0;r.regs={ext:{gdpr:o}},r.user={ext:{consent:i}}}if(e[0].schain){var a=function(e){return e?function(e){if(!e.nodes)return!1;var t=["asi","sid","hp"];return e.nodes.every((function(e){return t.every((function(t){return e[t]}))}))}(e)?e:(Ke("RTB House: required schain params missing"),null):null}(e[0].schain);a&&(r.ext={schain:a})}if(e[0].userIdAsEids){var s={eids:e[0].userIdAsEids};r.user&&r.user.ext?r.user.ext=Hj(Hj({},r.user.ext),s):r.user={ext:s}}var l=(null==t?void 0:t.ortb2)||{};["site","user","device","bcat","badv"].forEach((function(e){var t=l[e];t&&Xt(r,d({},e,t))}));var c=A(l,"regs.ext.dsa");(function(e){return!(ut(e)||!lt(e))&&Kj.reduce((function(t,n){var r=e[n.name];return t&&(!e.hasOwnProperty(n.name)||dt(r)&&r>=n.min&&r<=n.max)}),!0)&&(!e.hasOwnProperty("transparency")||st(e.transparency)&&e.transparency.every((function(e){return lt(e)&&at(e.domain)&&e.domain&&st(e.dsaparams)&&e.dsaparams.every((function(e){return dt(e)}))})))})(c)&&Xt(r,{regs:{ext:{dsa:c}}});var u="creativecdn.com/bidder/prebid/bids";if(null!==(n=t.paapi)&&void 0!==n&&n.enabled){var p=Z.getConfig("fledgeConfig")||{seller:"https://fledge-ssp.creativecdn.com",decisionLogicUrl:"https://fledge-ssp.creativecdn.com/component-seller-prebid.js",sellerTimeout:500};Xt(r,{ext:{fledge_config:p}}),u="creativecdn.com/bidder/prebidfledge/bids"}return{method:"POST",url:"https://"+e[0].params.region+"."+u,data:JSON.stringify(r)}},interpretOrtbResponse:function(e,t){var n=e.body;if(!st(n))return[];var r=[];return n.forEach((function(e){var t;e.price&&(t=0===e.adm.indexOf("{")?function(e){return{requestId:e.impid,mediaType:qo,cpm:e.price,creativeId:e.adid,width:1,height:1,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD",native:(t=e.adm,n=JSON.parse(t).native,r={clickUrl:encodeURI(n.link.url),impressionTrackers:n.imptrackers},n.assets.forEach((function(e){switch(e.id){case Yj.NATIVE.ASSET_ID.TITLE:r.title=e.title.text;break;case Yj.NATIVE.ASSET_ID.IMAGE:r.image={url:encodeURI(e.img.url),width:e.img.w,height:e.img.h};break;case Yj.NATIVE.ASSET_ID.ICON:r.icon={url:encodeURI(e.img.url),width:e.img.w,height:e.img.h};break;case Yj.NATIVE.ASSET_ID.BODY:r.body=e.data.value;break;case Yj.NATIVE.ASSET_ID.SPONSORED:r.sponsoredBy=e.data.value;break;case Yj.NATIVE.ASSET_ID.CTA:r.cta=e.data.value}})),r)};var t,n,r}(e):function(e){return{requestId:e.impid,mediaType:Vo,cpm:e.price,creativeId:e.adid,ad:e.adm,width:e.w,height:e.h,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD"}}(e),e.ext&&(t.ext=Ct(e.ext),e.ext.dsa&&(t.meta=Object.assign({},t.meta,{dsa:e.ext.dsa}))),r.push(t))})),r},interpretResponse:function(e,t){var n,r,i=Z.getConfig("fledgeConfig.interestGroupBuyers")||[],a=e.body,s=null;if(a.bidid&&st(null==a||null===(n=a.ext)||void 0===n?void 0:n.igbid)){var d;r=this.interpretOrtbResponse({body:null===(d=a.seatbid[0])||void 0===d?void 0:d.bid},t);var l=a.ext.seller,c=a.ext.decisionLogicUrl,u="sellerTimeout"in a.ext?{sellerTimeout:a.ext.sellerTimeout}:{};a.ext.igbid.forEach((function(e){var t={};e.igbuyer.forEach((function(e){t[e.igdomain]=e.buyersignal})),(s=s||{})[e.impid]=Xt({seller:l,decisionLogicUrl:c,interestGroupBuyers:[].concat(h(i),h(Object.keys(t))),perBuyerSignals:t},u)}))}else r=this.interpretOrtbResponse(e,t);return s?(Xe("Response with FLEDGE:",{bids:r,fledgeAuctionConfigs:s=Object.entries(s).map((function(e){var t=o(e,2),n=t[0],r=t[1];return{bidId:n,config:Object.assign({auctionSignals:{}},r)}}))}),{bids:r,paapi:s}):r}}),p("rtbhouseBidAdapter");var iM="airgrid",oM=Mo({moduleType:xn,moduleName:iM}),aM={name:iM,init:function(e,t){return function(e){var t,n=window.edktInitializor=window.edktInitializor||{};n.invoked||(n.accountId=e.params.accountId,n.publisherId=e.params.publisherId,n.apiKey=e.params.apiKey,n.invoked=!0,vn((t=e.params.accountId,"https://cdn.edkt.io/".concat(null!=t?t:"sdk","/edgekit.min.js")),iM))}(e),!0},getBidRequestData:function(e,t,n,r){var i=function(){var e=oM.getDataFromLocalStorage("edkt_matched_audience_ids");if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}}();i.length>0&&function(e,t,n){var r,i=A(t,"params.bidders");if(i&&0!==i.length&&n&&0!==n.length){var o={},a=[{id:String(782),ext:{segtax:540},name:"airgrid",segment:n.map((function(e){return{id:e}}))}];Zt(o,"user.data",a);var s=Object.fromEntries(i.map((function(e){return[e,o]})));Xt(null==e||null===(r=e.ortb2Fragments)||void 0===r?void 0:r.bidder,s)}}(e,n,i),t()},gvlid:782};function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sM(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Bn("realTimeData",aM),p("airgridRtdProvider");var lM={mimes:function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e}))},minduration:function(e){return qt(e)},maxduration:function(e){return qt(e)},protocols:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=10}))},w:function(e){return qt(e)},h:function(e){return qt(e)},startdelay:function(e){return qt(e)},placement:function(e){return qt(e)&&e>=1&&e<=5},plcmt:function(e){return qt(e)&&e>=1&&e<=4},linearity:function(e){return-1!==[1,2].indexOf(e)},skip:function(e){return-1!==[0,1].indexOf(e)},skipmin:function(e){return qt(e)},skipafter:function(e){return qt(e)},sequence:function(e){return qt(e)},battr:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=17}))},maxextended:function(e){return qt(e)},minbitrate:function(e){return qt(e)},maxbitrate:function(e){return qt(e)},boxingallowed:function(e){return-1!==[0,1].indexOf(e)},playbackmethod:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=6}))},playbackend:function(e){return-1!==[1,2,3].indexOf(e)},delivery:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=3}))},pos:function(e){return qt(e)&&e>=1&&e<=7},api:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=6}))}},cM={context:function(e){return e!==zo},mimes:lM.mimes,maxduration:lM.maxduration,protocols:lM.protocols},uM={code:"sovrn",supportedMediaTypes:[Vo,Fo],gvlid:13,isBidRequestValid:function(e){var t,n=null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video;return!(!e.params.tagid||isNaN(parseFloat(e.params.tagid))||!isFinite(e.params.tagid)||n&&!Object.keys(cM).every((function(e){return cM[e](n[e])})))},buildRequests:function(e,t){try{var n,r,i,o,a=[];ht(e,(function(e){var s,d,l;!i&&e.userIdAsEids&&(i=e.userIdAsEids).forEach((function(e){e.uids&&e.uids[0]&&"criteo.com"===e.source&&(o=e.uids[0].id)})),e.schain&&(r=r||e.schain),n=n||Ue("iv",e.params);var c={adunitcode:e.adUnitCode,id:e.bidId,tagid:String(Ue("tagid",e.params)),bidfloor:pM(e)};if(A(e,"mediaTypes.banner")){var u=A(e,"mediaTypes.banner.sizes")||e.sizes,p=(u=(u=st(u)&&st(u[0])?u:[u]).filter((function(e){return st(e)}))).map((function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}));c.banner={format:p,w:1,h:1}}A(e,"mediaTypes.video")&&(c.video=function(e){var t={},n=A(e,"sizes"),r=A(e,"mediaTypes.video",{}),i=A(e,"params.video",{}),o={};if(n){var a=Array.isArray(n[0])?n[0]:n;o.w=a[0],o.h=a[1]}else if(Array.isArray(r.playerSize)){var s=Array.isArray(r.playerSize[0])?r.playerSize[0]:r.playerSize;o.w=s[0],o.h=s[1]}var d=dM(dM(dM({},o),r),i);return Object.keys(lM).forEach((function(e){d.hasOwnProperty(e)&&(lM[e](d[e])?t[e]=d[e]:Je("The OpenRTB video param ".concat(e," has been skipped due to misformating. Please refer to OpenRTB 2.5 spec.")))})),t}(e)),c.ext=Ue("ext",e.ortb2Imp)||void 0;var h=Ue("segments",e.params);h&&(c.ext=c.ext||{},c.ext.deals=h.split(",").map((function(e){return e.trim()})));var f,g=null==e||null===(s=e.ortb2Imp)||void 0===s||null===(d=s.ext)||void 0===d?void 0:d.ae;null!==(l=t.paapi)&&void 0!==l&&l.enabled&&qt(g)?(c.ext=c.ext||{},c.ext.ae=g):null!==(f=c.ext)&&void 0!==f&&f.ae&&delete c.ext.ae,a.push(c)}));var s=t.ortb2||{},d=s.site||{};d.page=t.refererInfo.page,d.domain=t.refererInfo.domain;var l=A(t,"timeout"),c={id:Me(),imp:a,site:d,user:s.user||{},tmax:l};r&&(c.source={ext:{schain:r}});var u=A(t,"ortb2.source.tid");u&&Zt(c,"source.tid",u),A(t,"ortb2.regs.coppa")&&Zt(c,"regs.coppa",1),t.gdprConsent&&(Zt(c,"regs.ext.gdpr",+t.gdprConsent.gdprApplies),Zt(c,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&Zt(c,"regs.ext.us_privacy",t.uspConsent),t.gppConsent&&(Zt(c,"regs.gpp",t.gppConsent.gppString),Zt(c,"regs.gpp_sid",t.gppConsent.applicableSections)),i&&(Zt(c,"user.ext.eids",i),o&&Zt(c,"user.ext.prebid_criteoid",o));var p="https://ap.lijit.com/rtb/bid?src=prebid_prebid_9.10.0";return n&&(p+="&iv=".concat(n)),{method:"POST",url:p,data:JSON.stringify(c),options:{contentType:"text/plain"}}}catch(e){Ke("Could not build bidrequest, error deatils:",e)}},interpretResponse:function(e){var t=e.body,n=t.id,r=t.seatbid,i=t.ext;if(!n||!r||!Array.isArray(r))return[];try{var a=r.filter((function(e){return e})).map((function(e){return e.bid.map((function(e){var t,n={requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,mediaType:e.nurl?Vo:Fo,ttl:(null===(t=e.ext)||void 0===t?void 0:t.ttl)||90,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}};return e.nurl?n.ad=decodeURIComponent("".concat(e.adm,'<img src="').concat(e.nurl,'">')):n.vastXml=decodeURIComponent(e.adm),n}))})).flat(),s=null;if(st(null==i?void 0:i.igbid)){var d=i.seller,l=i.decisionLogicUrl,c=i.sellerTimeout;i.igbid.filter((function(e){return!pt((t=e).impid)&&st(t.igbuyer)&&t.igbuyer.length;var t})).forEach((function(e){var t={};e.igbuyer.filter((function(e){return!pt(e.igdomain)})).forEach((function(e){t[e.igdomain]=e.buyerdata}));var n=h(Object.keys(t));n.length&&((s=s||{})[e.impid]={seller:d,decisionLogicUrl:l,sellerTimeout:c,interestGroupBuyers:n,perBuyerSignals:t})}))}return s?{bids:a,paapi:s=Object.entries(s).map((function(e){var t=o(e,2),n=t[0],r=t[1];return{bidId:n,config:Object.assign({auctionSignals:{}},r)}}))}:a}catch(e){return Ke("Could not interpret bidresponse, error details:",e),e}},getUserSyncs:function(e,t,n,r,i){try{var o=[];if(t&&0!==t.length){if(e.iframeEnabled){var a=t.filter((function(e){return A(e,"body.ext.iid")})).map((function(e){return e.body.ext.iid})),s=[];n&&n.gdprApplies&&"string"==typeof n.consentString&&s.push(["gdpr_consent",n.consentString]),r&&s.push(["us_privacy",r]),i&&(s.push(["gpp",i.gppString]),s.push(["gpp_sid",i.applicableSections])),a[0]&&(s.push(["informer",a[0]]),o.push({type:"iframe",url:"https://ce.lijit.com/beacon?"+s.map((function(e){return e.join("=")})).join("&")}))}e.pixelEnabled&&t.filter((function(e){return A(e,"body.ext.sync.pixels")})).reduce((function(e,t){return e.concat(t.body.ext.sync.pixels)}),[]).map((function(e){return e.url})).forEach((function(e){return o.push({type:"image",url:e})}))}return o}catch(e){return[]}}};function pM(e){var t=e.getFloor&&"function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.banner?"banner":"video",size:"*"}):{},n=parseFloat(t.floor);if(!isNaN(n))return n;var r=parseFloat(Ue("bidfloor",e.params));return isNaN(r)?void 0:r}Zr(uM),p("sovrnBidAdapter");var hM={BIDDER_CODE:"invibes",BID_ENDPOINT:".videostep.com/Bid/VideoAdContent",BID_SUBDOMAIN:"https://bid",SYNC_ENDPOINT:"https://k.r66net.com/GetUserSync",TIME_TO_LIVE:300,DEFAULT_CURRENCY:"EUR",PREBID_VERSION:12,METHOD:"GET",INVIBES_VENDOR_ID:436,USERID_PROVIDERS:["pubcid","pubProvidedId","uid2","zeotapIdPlus","id5id"],META_TAXONOMY:["networkId","networkName","agencyId","agencyName","advertiserId","advertiserName","advertiserDomains","brandId","brandName","primaryCatId","secondaryCatIds","mediaType"],DISABLE_USER_SYNC:!0},fM=Mo({bidderCode:hM.BIDDER_CODE}),gM={code:hM.BIDDER_CODE,gvlid:hM.INVIBES_VENDOR_ID,isBidRequestValid:function(e){return"object"===a(e.params)&&null!=e.params.placementId},buildRequests:function(e,t){t=t||{};var n,r,i,o=[],a=[],s=Date.now();window.invibes=window.invibes||{},window.invibes.placementIds=window.invibes.placementIds||[],0==wM&&function(){var e=document.documentElement.scrollHeight;if(void 0!==vM.originalURL)if(void 0!==vM.originalScrollHeight){var t=window.location.href;e>vM.originalScrollHeight&&vM.originalURL!==t&&(wM=!0)}else vM.originalScrollHeight=e;else vM.originalURL=window.location.href}(),e.forEach((function(e){var t;e.startTime=(new Date).getTime(),window.invibes.placementIds.includes(e.params.placementId)&&(SM=!0),window.invibes.placementIds.push(e.params.placementId),o.push(e.params.placementId),a.push(e.adUnitCode),i=i||e.params.domainId,n=n||e.params.customEndpoint,yM=yM||e.params.customUserSync,bM=null==e||null===(t=e.params)||void 0===t?void 0:t.disableUserSyncs,r=r||e.userId})),vM.optIn=vM.optIn||function(e){if(e&&e.vendorData){if(vM.GdprModuleInstalled=!0,vM.gdpr_consent=(s=e.vendorData).purpose&&s.purpose.consents&&null!=s.tcString?s.tcString:s.consentData,!e.vendorData.gdprApplies||e.vendorData.hasGlobalConsent){var t;for(t=0;t<vM.purposes.length;++t)vM.purposes[t]=!0;for(t=0;t<vM.legitimateInterests.length;++t)vM.legitimateInterests[t]=!0;return 2}var n=function(e){return e.purpose&&e.purpose.consents?e.purpose.consents:e.purposeConsents?e.purposeConsents:null}(e.vendorData);if(null==n)return 0;var r=function(e){return e.purpose&&e.purpose.consents?e.tcfPolicyVersion>=4?11:10:5}(e.vendorData);if(!DM(n,vM.purposes,r))return 0;DM(function(e){return e.purpose&&e.purpose.legitimateInterests?e.purpose.legitimateInterests:null}(e.vendorData),vM.legitimateInterests,r);var i=hM.INVIBES_VENDOR_ID.toString(10),o=function(e){return e.vendor&&e.vendor.consents?e.vendor.consents:e.vendorConsents?e.vendorConsents:null}(e.vendorData),a=!0===function(e){return e.vendor&&e.vendor.legitimateInterests?e.vendor.legitimateInterests:{}}(e.vendorData)[i];return null==o||null==o[i]?4:!1===o[i]&&!1===a?0:2}var s;return vM.GdprModuleInstalled=!1,0}(t.gdprConsent),vM.visitId=vM.visitId||EM();var d,l,c=function(){var e={};try{var t=fM.getDataFromLocalStorage("ivbs");null!=t&&(e=JSON.parse(t))}catch(e){}for(var n,r=/[\\?&]([^=]+)=([^\\?&#]+)/g;null!=(n=r.exec(window.location.href));)n.index===r.lastIndex&&r.lastIndex++,e[n[1].toLowerCase()]=n[2];return e}(),u=((d=r)&&hM.USERID_PROVIDERS.forEach((function(e){d[e]&&((l=l||{})[e]=d[e])})),l),p={placementIds:o,adUnitCodes:a,auctionStartTime:s,bidVersion:hM.PREBID_VERSION};u&&(p.userId=u);var h={location:CM(t),videoAdHtmlId:EM(),showFallback:"0"===c.advs,ivbsCampIdsLocal:OM("IvbsCampIdsLocal"),bidParamsJson:JSON.stringify(p),capCounts:PM(),pcids:Object.keys(vM.pushedCids).join(","),vId:vM.visitId,width:mM.innerWidth,height:mM.innerHeight,oi:vM.optIn,kw:RM,purposes:vM.purposes.toString(),li:vM.legitimateInterests.toString(),tc:vM.gdpr_consent,isLocalStorageEnabled:fM.hasLocalStorage(),preventPageViewEvent:_M,isPlacementRefresh:SM,isInfiniteScrollPage:wM};t.refererInfo&&t.refererInfo.ref&&(h.pageReferrer=t.refererInfo.ref.substring(0,300));var f=vM.getCookie("handIid");f&&(h.handIid=f);var g=OM("ivbsdid");if(!g){var m=vM.getCookie("ivbsdid");if(m)try{var v=JSON.parse(m);g=v.id?v.id:v}catch(e){}}g&&(h.lId=g);var y="videoaddebug,advs,bvci,bvid,istop,trybvid,trybvci".split(",");for(var b in c)if(c.hasOwnProperty(b)){var _=c[b];(y.indexOf(b)>-1||/^vs|^invib/i.test(b))&&(h[b]=_)}var w=function(e,t,n){if(null!=e)return e;if(null!=t)return IM(t-1e3);if(n.length>0)for(var r=0;r<n.length;r++){var i=kM(n[r]);if(null!=i)return IM(i)}return IM(1)}(n,i,o);return _M=!0,{method:hM.METHOD,url:w,data:h,options:{withCredentials:!0},bidRequests:e}},interpretResponse:function(e,t){return function(e,t){if(null==t||0===t.length)return Xe("Invibes Adapter - No bids have been requested"),[];if(!e)return Xe("Invibes Adapter - Bid response is empty"),[];var n;if((e=(e=e.body||e).videoAdContentResult||e).ShouldSetLId&&e.LId&&(vM.optIn&&vM.purposes[0]||!e.PrivacyPolicyRule||!e.TcModel||!e.TcModel.PurposeConsents||(vM.optIn=e.PrivacyPolicyRule,vM.purposes=e.TcModel.PurposeConsents),n=e.LId,vM.optIn&&vM.purposes[0]&&fM.setDataInLocalStorage("ivbsdid",n)),"object"===a(vM.bidResponse)){if(!0!==e.MultipositionEnabled)return Xe("Invibes Adapter - Bid response already received. Invibes only responds to one bid request per user visit"),[];vM.bidResponse.AdPlacements=vM.bidResponse.AdPlacements.concat(e.AdPlacements)}else vM.bidResponse=e;for(var r=[],i=0;i<t.length;i++){var o=t[i],s=!0===e.UseAdUnitCode?o.params.placementId+"_"+o.adUnitCode:o.params.placementId;if(vM.placementBids.indexOf(s)>-1)Xe("Invibes Adapter - Placement was previously bid on "+s);else{var d=null;if(null!=e.AdPlacements)for(var l=0;l<e.AdPlacements.length;l++){var c=e.AdPlacements[l].BidModel;if(null!=c&&c.PlacementId==s){d=e.AdPlacements[l];break}}else{var u=e.BidModel;null!=u&&u.PlacementId==s&&(d=e)}var p=TM(o,d,e.MultipositionEnabled,s);null!==p&&(vM.placementBids.push(s),r.push(p))}}return r}(e,null!=t?t.bidRequests:null)},getUserSyncs:function(e){if(e.iframeEnabled&&!(null==bM||null==bM?hM.DISABLE_USER_SYNC:bM))return{type:"iframe",url:function(){var e=yM||hM.SYNC_ENDPOINT;e+="?visitId="+vM.visitId,e+="&optIn="+vM.optIn;var t=OM("ivbsdid");if(!t){var n=vM.getCookie("ivbsdid");if(n)try{var r=JSON.parse(n);t=r.id?r.id:r}catch(e){}}return t&&(e+="&ivbsdid="+encodeURIComponent(t)),e}()}}};Zr(gM);var mM=function(){var e=window;try{for(;top!==e;)e.parent.location.href.length&&(e=e.parent)}catch(e){}return e}(),vM=mM.invibes=mM.invibes||{};vM.purposes=vM.purposes||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],vM.legitimateInterests=vM.legitimateInterests||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],vM.placementBids=vM.placementBids||[],vM.pushedCids=vM.pushedCids||{};var yM,bM,_M=!1,wM=!1,SM=!1;function TM(e,t,n,r){if(null===t||null===t.BidModel)return Xe("Invibes Adapter - Placement not configured for bidding "+r),null;var i=t.BidModel,o=t.Ads;if(!Array.isArray(o)||o.length<1)return null!=t.AdReason&&Xe("Invibes Adapter - No ads "+t.AdReason),Xe("Invibes Adapter - No ads available"),null;var a=o[0],s=function(e){for(var t=[0,0],n=0;n<e.length;n++)e[n][0]*e[n][1]>t[0]*t[1]&&(t=e[n]);return t}(e.sizes);if(!0===n&&Object.keys(vM.pushedCids).length>0){if(null!=a.Blcids&&a.Blcids.length>0&&Object.keys(vM.pushedCids).some((function(e){return a.Blcids.indexOf(parseInt(e))>-1})))return Xe("Invibes Adapter - Ad blacklists pushed ids"),null;if(Object.keys(vM.pushedCids).some((function(e){return vM.pushedCids[e].indexOf(a.Cid)>-1})))return Xe("Invibes Adapter - Ad is blacklisted"),null}vM.pushedCids[a.Cid]=a.Blcids||[];var d=Date.now();return Xe("Bid auction started at "+i.AuctionStartTime+" . Invibes registered the bid at "+d+" ; bid request took a total of "+(d-i.AuctionStartTime)+" ms."),{requestId:e.bidId,cpm:a.BidPrice,width:i.Width||s[0],height:i.Height||s[1],creativeId:a.VideoExposedId,currency:i.Currency||hM.DEFAULT_CURRENCY,netRevenue:!0,ttl:hM.TIME_TO_LIVE,ad:xM(i),meta:AM(i.Meta)}}function IM(e){return e<2?hM.BID_SUBDOMAIN+hM.BID_ENDPOINT:hM.BID_SUBDOMAIN+e+hM.BID_ENDPOINT}function kM(e){if(null==e)return null;var t=/_ivbs([0-9]+)/g.exec(e);return null!=t&&null!=t[1]?parseInt(t[1]):null}function AM(e){var t={};if(null!=e)for(var n=0;n<hM.META_TAXONOMY.length;n++)e.hasOwnProperty(hM.META_TAXONOMY[n])&&(t[hM.META_TAXONOMY[n]]=e[hM.META_TAXONOMY[n]]);return t}function EM(){return"10000000100040008000100000000000".replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function CM(e){return e.refererInfo.page.substring(0,300)}function xM(e){return"<html>\n        <head><script type='text/javascript'>inDapIF=true;<\/script></head>\n          <body style='margin : 0; padding: 0;'>\n          creativeHtml\n          </body>\n        </html>".replace("creativeHtml",e.CreativeHtml)}function OM(e){if(!vM.GdprModuleInstalled||vM.optIn&&vM.purposes[0])return fM.getDataFromLocalStorage(e)||""}function PM(){var e="ivvcap";if(!vM.optIn||!vM.purposes[0])return"";var t=function(){try{return JSON.parse(fM.getDataFromLocalStorage(e))||{}}catch(e){return{}}};return function(){!function(){var n=(new Date).getTime(),r=t(),i=!1;Object.keys(r).forEach((function(e){r[e][1]<=n&&(delete r[e],i=!0)})),i&&function(t){fM.setDataInLocalStorage(e,JSON.stringify(t))}(r)}();var n=t();return Object.keys(n).filter((function(e){return n.hasOwnProperty(e)})).sort().map((function(e){return[e,n[e][0]]}))}().map((function(e){return e.join("=")})).join(",")}function DM(e,t,n){if(e instanceof Array){for(var r=0;r<n&&r<e.length;r++)t[r]=!(!1===e[r]||"false"===e[r]||null==e[r]);return!0}if("object"===a(e)&&null!==e){var i=0;for(var o in e){if(i===n)break;if(e.hasOwnProperty(o)){var s=parseInt(o);isNaN(s)?t[i]=!(!1===e[o]||"false"===e[o]||null==e[o]):t[s-1]=!(!1===e[o]||"false"===e[o]||null==e[o]),i++}}return!0}return!1}vM.Uid={generate:function(){var e=parseInt("zzzzzz",36),t=function(){return Math.floor(Math.random()*e).toString(36)};return t()+t()}},vM.getCookie=function(e){if(fM.cookiesAreEnabled()&&(!vM.GdprModuleInstalled||vM.optIn&&vM.purposes[0]))return fM.getCookie(e)};var RM=function(){var e=document.getElementsByTagName("head")[0],t=e?e.getElementsByTagName("meta"):[];function n(e,t){var n=e.replace(/[<>~|\\"`!@#$%^&*()=+?]/g,""),r=n.split(/[\s,;.:]+/).filter((function(e,t,n){return""!==e&&n.indexOf(e)===t}));n="";for(var i=0;i<r.length;i++){if((n+=r[i]).length>=t)return n;i<r.length-1&&(n+=",")}return n}function r(e,r,i){e=e||"keywords",r=r||100;for(var o=i=i||"",a=0;a<t.length;a++){if(t[a].name&&t[a].name.toLowerCase()===e.toLowerCase())return n(i+","+t[a].content||"",r);t[a].name&&t[a].name.toLowerCase().indexOf(e.toLowerCase())>-1&&(o=i+","+t[a].content||"")}return n(o,r)}var i=r("keywords",300);return(!i||i.length<292)&&(!(i=r("description",300,i))||i.length<292)&&(i=function(t,r){return t=t||300,n((r=r||"")+","+((document.title||e)&&e.getElementsByTagName("title")[0]?e.getElementsByTagName("title")[0].innerHTML:""),t)}(300,i)),i}();function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}p("invibesBidAdapter");var NM=/^[a-z0-9.+-]+:/i,UM=function(e){if(!(e.requestId&&e.cpm&&e.creativeId&&e.ttl&&e.currency))return!1;switch(e.mediaType){case Vo:return Boolean(e.width&&e.height&&e.ad);case Fo:return Boolean(e.vastUrl||e.vastXml);case qo:return Boolean(e.native&&e.native.impressionTrackers&&e.native.impressionTrackers.length);default:return!1}},LM=function(e,t,n){var r=e.params,i=r.placementId,o=r.endpointId;i?(n.placementId=i,n.type="publisher"):o&&(n.endpointId=o,n.type="network")},BM=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).addtlBidValidation,t=void 0===e?function(e){return!0}:e;return function(e){for(var n=[],r=0;r<e.body.length;r++){var i=e.body[r];if(UM(i)&&t(i)){var o=i.adomain&&i.adomain.length?i.adomain:[];i.meta=MM(MM({},i.meta),{},{advertiserDomains:o}),n.push(i)}}return n}}(),qM=function(e){return function(t,n){var r,i=null!==(r=null==e?void 0:e.addPlacementType)&&void 0!==r?r:LM,o=function(e){var t=e.bidId,n=e.mediaTypes,r=e.transactionId,i=e.userIdAsEids,o=e.schain||{},a=function(e){try{return e.getFloor({currency:"USD",mediaType:"*",size:"*"}).floor}catch(e){return 0}}(e),s={bidId:t,schain:o,bidfloor:a};return n&&n[Vo]?(s.adFormat=Vo,s.sizes=n[Vo].sizes):n&&n[Fo]?(s.adFormat=Fo,s.playerSize=n[Fo].playerSize,s.minduration=n[Fo].minduration,s.maxduration=n[Fo].maxduration,s.mimes=n[Fo].mimes,s.protocols=n[Fo].protocols,s.startdelay=n[Fo].startdelay,s.placement=n[Fo].placement,s.plcmt=n[Fo].plcmt,s.skip=n[Fo].skip,s.skipafter=n[Fo].skipafter,s.minbitrate=n[Fo].minbitrate,s.maxbitrate=n[Fo].maxbitrate,s.delivery=n[Fo].delivery,s.playbackmethod=n[Fo].playbackmethod,s.api=n[Fo].api,s.linearity=n[Fo].linearity):n&&n[qo]&&(s.native=n[qo],s.adFormat=qo),r&&(s.ext=s.ext||{},s.ext.tid=r),i&&i.length&&(s.eids=i),s}(t);return i(t,n,o),null!=e&&e.addCustomFieldsToPlacement&&e.addCustomFieldsToPlacement(t,n,o),o}},FM={code:"pgamssp",supportedMediaTypes:[Vo,Fo,qo],isBidRequestValid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["placementId","endpointId"],t=arguments.length>1?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.params,i=n.bidId,o=n.mediaTypes,a=Boolean(i&&r&&function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"some",r=0;r<e.length;r++){var i=t[e[r]];if("some"===n&&i)return!0;if("every"===n&&!i)return!1}return"every"===n}(e,r,t));return o&&o[Vo]?a&&Boolean(o[Vo]&&o[Vo].sizes):o&&o[Fo]?a&&Boolean(o[Fo]&&o[Fo].playerSize):!(!o||!o[qo])&&a&&Boolean(o[qo])}}(),buildRequests:("https://us-east.pgammedia.com/pbjs",function(){return function(e){var t,n,r,i=e.adUrl,o=e.validBidRequests,a=e.bidderRequest,s=e.placementProcessingFunction||qM(),d=A(a,"ortb2.device"),l=A(a,"refererInfo.page",""),c=NM.exec(l),u=null==c?void 0:c[0],p=[],h={deviceWidth:(null==d?void 0:d.w)||0,deviceHeight:(null==d?void 0:d.h)||0,language:(null==d||null===(t=d.language)||void 0===t?void 0:t.split("-")[0])||"",secure:"https:"===u?1:0,host:A(a,"refererInfo.domain",""),page:l,placements:p,coppa:A(a,"ortb2.regs.coppa")?1:0,tmax:a.timeout};a.uspConsent&&(h.ccpa=a.uspConsent),a.gdprConsent&&(h.gdpr={consentString:a.gdprConsent.consentString}),a.gppConsent?(h.gpp=a.gppConsent.gppString,h.gpp_sid=a.gppConsent.applicableSections):null!==(n=a.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(h.gpp=a.ortb2.regs.gpp,h.gpp_sid=a.ortb2.regs.gpp_sid);for(var f=o.length,g=0;g<f;g++){var m=o[g];p.push(s(m,a))}return{method:"POST",url:i,data:h}}({adUrl:"https://us-east.pgammedia.com/pbjs",validBidRequests:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],bidderRequest:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},placementProcessingFunction:qM()})}),interpretResponse:BM,getUserSyncs:("https://cs.pgammedia.com",function(e,t,n,r,i){var o,a=e.iframeEnabled?"iframe":"image",s="https://cs.pgammedia.com"+"/".concat(a,"?pbjs=1");n&&n.consentString&&("boolean"==typeof n.gdprApplies?s+="&gdpr=".concat(Number(n.gdprApplies),"&gdpr_consent=").concat(n.consentString):s+="&gdpr=0&gdpr_consent=".concat(n.consentString)),r&&r.consentString&&(s+="&ccpa_consent=".concat(r.consentString)),null!=i&&i.gppString&&null!=i&&null!==(o=i.applicableSections)&&void 0!==o&&o.length&&(s+="&gpp="+i.gppString,s+="&gpp_sid="+i.applicableSections.join(","));var d=Z.getConfig("coppa")?1:0;return[{type:a,url:s+="&coppa=".concat(d)}]})};Zr(FM),p("pgamsspBidAdapter");var VM=function(){return e=new WeakMap,function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(n=t,wa.index.getAuction({auctionId:n}));if(null!=i)return e.has(i)||e.set(i,r),e.get(i)};var e};function zM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zM(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WM="PAAPI",HM=[],GM=new WeakSet;Ln("paapi",(function(e){HM.push(e),e.init&&e.init({getPAAPIConfig:aN,expandFilters:oN})}));var XM=VM(),JM=VM(),KM=VM(),YM={},QM={};function ZM(e,t,n){!e.hasOwnProperty(t)&&(e[t]=[]),e[t].push(n)}function eN(e,t){var n,r,i=t.ortb2,o=t.ortb2Imp;return null!=i&&Zt(e,"prebid.ortb2",Xt({},i,null===(n=e.prebid)||void 0===n?void 0:n.ortb2)),null!=o&&Zt(e,"prebid.ortb2Imp",Xt({},o,null===(r=e.prebid)||void 0===r?void 0:r.ortb2Imp)),e}Z.getConfig("paapi",(function(e){var t;(t=e.paapi)&&!0===t.enabled?(QM=t,Xe("".concat(WM," enabled (browser ").concat(sN()?"supports":"does NOT support"," runAdAuction)"),t)):(QM={},Xe("".concat(WM," disabled"),t))})),Nn("addPaapiConfig").before((function(e,t,n){if(dN(Z.getCurrentBidder()).enabled){var r=function(e,t){var n=e(o);null!=n?ZM(n,i,t):Je(WM,"Received PAAPI config for auction that has closed (auction '".concat(o,"', adUnit '").concat(i,"')"),t)},i=t.adUnitCode,o=t.auctionId,a=n.config,s=n.igb;if(a){var d;a.auctionSignals=eN(a.auctionSignals||{},t);var l=a.perBuyerSignals=null!==(d=a.perBuyerSignals)&&void 0!==d?d:{};(a.interestGroupBuyers||[]).forEach((function(e){var n;l[e]=eN(null!==(n=l[e])&&void 0!==n?n:{},t)})),r(XM,a)}s&&nN(s)&&(s.pbs=eN(s.pbs||{},t),r(KM,[t,s]))}e(t,n)})),Nn("makeBidRequests").before((function(e,t){sN()&&QM.enabled&&t.forEach((function(e){var t,n,r,i,o,a=null!=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.igs)?e.ortb2Imp.ext.igs.ae||1:null,s=null===(r=e.ortb2Imp)||void 0===r||null===(i=r.ext)||void 0===i?void 0:i.ae;a!==s&&null!=a&&null!=s&&Je(WM,"Ad unit defines conflicting ortb2Imp.ext.ae and ortb2Imp.ext.igs, using the latter",e);var d=null!==(o=null!=a?a:s)&&void 0!==o?o:QM.defaultForSlots;if(d){Zt(e,"ortb2Imp.ext.ae",d),e.ortb2Imp.ext.igs=Object.assign({ae:d,biddable:1},e.ortb2Imp.ext.igs);var l=cN(e);l&&Zt(e,"ortb2Imp.ext.paapi.requestedSize",l),e.bids.forEach((function(e){dN(e.bidder).enabled||(Zt(e,"ortb2Imp.ext.ae",0),e.ortb2Imp.ext.igs={ae:0,biddable:0})}))}}));for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e.apply(void 0,[t].concat(r))})),Nn("makeBidRequests").after((function(e,t){sN()&&t.forEach((function(e){var t,n=dN(e.bidderCode).enabled;Object.assign(e,{paapi:{enabled:n,componentSeller:!(null===(t=QM.componentSeller)||void 0===t||!t.auctionConfig)}})})),e(t)})),Or(x.AUCTION_END,(function(e){var t=e.auctionId,n=e.bidsReceived,r=e.bidderRequests,i=e.adUnitCodes,a=e.adUnits,s=Object.fromEntries((null==a?void 0:a.map((function(e){return[e.code,e]})))||[]),d=null==r?void 0:r.flatMap((function(e){return e.bids})),l={};(i||[]).forEach((function(e){l[e]=null,!YM.hasOwnProperty(e)&&(YM[e]=null)}));var c=XM(t),u=KM(t);c&&u&&Object.entries(u).forEach((function(e){var t=o(e,2),n=t[0];(function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!==(t=null===(n=QM)||void 0===n?void 0:n.componentSeller)&&void 0!==t?t:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{compact:function(e){return(t=e.map((function(e){return e[1]})),t.reduce((function(e,t){if(nN(t)){var n=e.find((function(e){return!e.hasOwnProperty(t.origin)||Gt(e[t.origin],t)}));n||(n={},e.push(n)),n[t.origin]=t}return e}),[]).map((function(e){return Object.values(e)}))).map((function(e){return[{},e]}));var t},expand:iN};return i.auctionConfig?(0,a[i.separateAuctions?"expand":"compact"])(e).map((function(e){var t=o(e,2),n=t[0],a=t[1],s=Xt(r(a),i.auctionConfig);return s.auctionSignals=eN(s.auctionSignals||{},n),s})):(Je(WM,"Cannot use IG buyers: paapi.componentSeller.auctionConfig not set",e.map((function(e){return e[1]}))),[])})(t[1]).forEach((function(e){return ZM(c,n,e)}))})),Object.entries(c||{}).forEach((function(e){var r=o(e,2),i=r[0],a=r[1],c=function(e){return e.adUnitCode===i},u=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(r.length>0){var o=r.reduce(Ss(Tx((function(e){return[e.cpm,e.currency]}))));e=o.cpm,t=o.currency}else{var a=i.map((function(e){return"function"==typeof e.getFloor&&e.getFloor()})).filter((function(e){return e})),s=a.length&&a.reduce(ws(Tx((function(e){return[e.floor,e.currency]}))));e=null==s?void 0:s.floor,t=null==s?void 0:s.currency}var d={};e&&(Zt(d,"auctionSignals.prebid.bidfloor",e),t&&Zt(d,"auctionSignals.prebid.bidfloorcur",t));var l=cN(n);return l&&(d.requestedSize=l),d}(s[i],null==n?void 0:n.filter(c),null==d?void 0:d.filter(c));l[i]=$M($M({},u),{},{componentAuctions:a.map((function(e){return Xt({},u,e)}))}),YM[i]=t})),JM(t,l),HM.forEach((function(e){var n;return null===(n=e.onAuctionConfig)||void 0===n?void 0:n.call(e,t,l,(function(e){return null!=l[e]&&GM.add(l[e])}))}))}));var tN={cur:"perBuyerCurrencies",pbs:"perBuyerSignals",ps:"perBuyerPrioritySignals",maxbid:"auctionSignals.prebid.perBuyerMaxbid"};function nN(e){if(e.origin)return!0;Je("PAAPI buyer does not specify origin and will be ignored",e)}function rN(e){var t=new Set;return Object.assign(e.reduce((function(n,r){return nN(r)&&(t.has(r.origin)?Je(WM,"Duplicate buyer: ".concat(r.origin,". All but the first will be ignored"),e):(t.add(r.origin),Object.entries(tN).forEach((function(e){var t=o(e,2),i=t[0],a=t[1];if(null!=r[i]){var s=A(n,a)||{};s[r.origin]=r[i],Zt(n,a,s)}})))),n}),{}),{interestGroupBuyers:Array.from(t.keys())})}function iN(e){var t={},n={};return e.forEach((function(e){var r=o(e,2),i=r[0],a=r[1];!t.hasOwnProperty(i.bidder)&&(t[i.bidder]=i),ZM(n,i.bidder,a)})),Object.entries(n).map((function(e){var n=o(e,2),r=n[0],i=n[1];return[t[r],i]}))}function oN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.auctionId,n=e.adUnitCode,r=[];return null==n?r=Object.keys(YM):YM.hasOwnProperty(n)&&(r=[n]),Object.fromEntries(r.map((function(e){return[e,null!=t?t:YM[e]]})))}function aN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.entries(oN(e)).forEach((function(e){var r=o(e,2),i=r[0],a=r[1],s=JM(a);if(null!=s&&s.hasOwnProperty(i)){var d=s[i];d&&!GM.has(d)?(n[i]=d,GM.add(d)):t&&(n[i]=null)}else null==a&&t&&(n[i]=null)})),n}function sN(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function dN(e){var t,n,r=QM.enabled&&(null==e||!(null!==(t=QM.bidders)&&void 0!==t&&t.length)||(null===(n=QM.bidders)||void 0===n?void 0:n.includes(e)));return{enabled:r,ae:r?QM.defaultForSlots:void 0}}u().getPAAPIConfig=function(e){return aN(e)};var lN=Rn("sync",(function(e){if(null!=e&&e.length)return e.filter((function(e){var t=o(e,2),n=t[0];return!(n===t[1]&&n<=5)})).reduce(Ss(ys((function(e){var t=o(e,2);return t[0]*t[1]}))))}),"getPAAPISize");function cN(e){var t,n,r;return(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n||null===(r=n.paapi)||void 0===r?void 0:r.requestedSize)||function(t,n){var r=lN(Le(null===(t=e.mediaTypes)||void 0===t||null===(n=t.banner)||void 0===n?void 0:n.sizes));if(r)return{width:r[0],height:r[1]}}()}function uN(e,t,n){e.forEach((function(e){var t,r,i=n.impContext[e.impid];null!=i&&null!==(t=i.imp)&&void 0!==t&&null!==(r=t.ext)&&void 0!==r&&r.ae?(i.paapiConfigs=i.paapiConfigs||[],i.paapiConfigs.push(e)):Je(WM,"Received auction configuration for an impression that was not in the request or did not ask for it",e,null==i?void 0:i.imp)}))}Nc({type:xc,name:"impExtAe",fn:function(e,t,n){var r,i,o;null!==(r=n.bidderRequest.paapi)&&void 0!==r&&r.enabled||(null===(i=e.ext)||void 0===i||delete i.ae,null===(o=e.ext)||void 0===o||delete o.igs)}}),Nc({type:Pc,name:"extPrebidFledge",fn:function(e,t,n){var r,i,o;uN((null===(r=t.ext)||void 0===r||null===(i=r.prebid)||void 0===i||null===(o=i.fledge)||void 0===o?void 0:o.auctionconfigs)||[],0,n)},dialects:[Rc]}),Nc({type:Pc,name:"extIgiIgs",fn:function(e,t,n){var r;uN(((null===(r=t.ext)||void 0===r?void 0:r.igi)||[]).flatMap((function(e){return((null==e?void 0:e.igs)||[]).map((function(t){var n;return t.impid!==e.impid&&null!=t.impid&&null!=e.impid&&Je(WM,"ORTB response ext.igi.igs.impid conflicts with parent's impid",e),{config:t.config,impid:null!==(n=t.impid)&&void 0!==n?n:e.impid}})).concat(((null==e?void 0:e.igb)||[]).map((function(t){return{igb:t,impid:e.impid}})))})),0,n)}}),Nc({type:Pc,name:"paapiConfigs",priority:-1,fn:function(e,t,n){var r=Object.values(n.impContext).flatMap((function(e){return(e.paapiConfigs||[]).map((function(t){return $M({bidId:e.bidRequest.bidId},t)}))}));r.length>0&&(e.paapi=r)}}),p("paapi"),Cd.processQueue();const pN=Cd},692:e=>{"use strict";e.exports=DM.molFeClientLogger},2498:()=>{},6014:()=>{},4307:()=>{},7615:()=>{},9162:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4351:(e,t,n)=>{var r=n(9144).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},d=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),s=new C(r||[]);return a(o,"_invoke",{value:I(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var f={};function g(){}function m(){}function v(){}var y={};u(y,d,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(x([])));_&&_!==n&&o.call(_,d)&&(y=_);var w=v.prototype=g.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,s,d){var l=h(e[i],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==r(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,d)}),(function(e){n("throw",e,s,d)})):t.resolve(u).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,d)}))}d(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function I(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var d=h(e,t,n);if("normal"===d.type){if(r=n.done?"completed":"suspendedYield",d.arg===f)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(r="completed",n.method="throw",n.arg=d.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(e){if(e){var t=e[d];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new T(p(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),u(w,c,"Generator"),u(w,d,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=x,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),d=o.call(i,"finallyLoc");if(s&&d){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9144:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9442:(e,t,n)=>{var r=n(4351)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+".js",__webpack_require__.miniCssF=e=>e+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="@mailonline/mol-ads:",__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var d=a[s];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==dataWebpackPrefix+n){i=d;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=e),inProgress[e]=[t];var l=(t,n)=>{i.onerror=i.onload=null,clearTimeout(c);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},c=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{if("undefined"!=typeof document){var e={586:0};__webpack_require__.f.miniCss=(t,n)=>{e[t]?n.push(e[t]):0!==e[t]&&{208:1}[t]&&n.push(e[t]=(e=>new Promise(((t,n)=>{var r=__webpack_require__.miniCssF(e),i=__webpack_require__.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var a;if((i=(a=o[r]).getAttribute("data-href"))===e||i===t)return a}})(r,i))return t();((e,t,n,r,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",__webpack_require__.nc&&(o.nonce=__webpack_require__.nc),o.onerror=o.onload=n=>{if(o.onerror=o.onload=null,"load"===n.type)r();else{var a=n&&n.type,s=n&&n.target&&n.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+s+")");d.name="ChunkLoadError",d.code="CSS_CHUNK_LOAD_FAILED",d.type=a,d.request=s,o.parentNode&&o.parentNode.removeChild(o),i(d)}},o.href=t,document.head.appendChild(o)})(e,i,0,t,n)})))(t).then((()=>{e[t]=0}),(n=>{throw delete e[t],n})))}}})(),(()=>{var e={586:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,a,s]=n,d=0;if(o.some((t=>0!==e[t]))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);s&&s(__webpack_require__)}for(t&&t(n);d<o.length;d++)i=o[d],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk_mailonline_mol_ads=self.webpackChunk_mailonline_mol_ads||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{addFBRemarketingPixel:()=>he,addTaboolaPosition:()=>pe,addToArray:()=>ae,appendToInfiniteList:()=>se,forceRefreshAds:()=>oe,getBannerFallbackPromise:()=>me,getRequestedAds:()=>ye,getRtaReport:()=>ge,getScriptContainer:()=>te,getSyncVideoTags:()=>be,getVideoAdsSetup:()=>Y,init:()=>le,initEmergencyRules:()=>Q.initEmergencyRules,initSlots:()=>Q.initSlots,on:()=>we,openControlPanel:()=>_e,q:()=>ue,reg:()=>de,removeWatermark:()=>Te,setStickyBannerZoomThresholds:()=>re,setSupportedSlots:()=>Q.setSupportedSlots,startVideoAuction:()=>Ie,stopRefreshingAds:()=>ie,unstick:()=>Se});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{isClickThrough:()=>Ne,onClick:()=>je,onDeactivate:()=>Me,onInteraction:()=>Ue});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{brandedVideoPlayer:()=>mt,gpt:()=>yt,sessionDepth:()=>Ct});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{conversion:()=>xt.A});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{abtest:()=>Dt,bidmax:()=>Wt,bidmaxSendBeacon:()=>Ht,bidmaxSendBeaconMigration:()=>Gt,cacheIndication:()=>Kt,cmp:()=>cn,connection:()=>Wn,customTracking:()=>hn,entryPoint:()=>_n,externalData:()=>An,headerbidderWinner:()=>En,inputDelays:()=>Cn,memory:()=>On,rtaIds:()=>Pn,storage:()=>Dn,timing:()=>Ln,viewability:()=>qn});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{adyoulike:()=>Er,brightroll:()=>Cr,collective564:()=>Or,groupmSkin:()=>Pr,mediagridVideo:()=>Xr,openx:()=>Dr,openxVideo:()=>Jr,pxyz:()=>Rr,rubiMM:()=>Ur,rubiTTD:()=>Lr,rubiconSkin:()=>Nr,teads:()=>Br,triplelift:()=>qr});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{dmplayer:()=>ao});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{availabilityNotification:()=>xo,hackyDelayer:()=>Oo,reprompt:()=>jo,rtaTracking:()=>Mo});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{indexedDBUsage:()=>Fo,targeting:()=>Bo,video:()=>qo});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{permutive:()=>d});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{dmplayer:()=>Ta});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{leaderTop:()=>$a,puffAdOthers:()=>Ha,refreshInfo:()=>Ja});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{mpus:()=>rd});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{load:()=>gd});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{adxChannel:()=>Pd,device:()=>Rd,impid:()=>jd,ixIdentity:()=>Nd,smartclip:()=>Ud});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{abe:()=>r,adIntegrator:()=>Ce.default,adsRefresherV2:()=>xl,adxChannelPlugin:()=>Pd,analytics:()=>i,arrowKeysScroll:()=>Pl,bidders:()=>o,chromelessv2:()=>a,cmp:()=>s,cmpAvailabilityNotification:()=>xo,cmpRtaTracking:()=>Mo,devicePlugin:()=>Rd,dmp:()=>l,impIDPlugin:()=>jd,irisTv:()=>Nl,messagePluginsFromCreatives:()=>Ll,nativo:()=>ql,nonPersonalizedAds:()=>Fl,pageVisibility:()=>zl,paidSessions:()=>Xl,performance:()=>Zl,permutive:()=>Bo,pixelSync:()=>ec,players:()=>c,programmaticCampaign:()=>vc,quantcast:()=>yc,revenueReporter:()=>bc,rtaPageEventDispatcher:()=>wc,runtimeMessages:()=>Sc,skins:()=>Ec,slots:()=>u,smartBanner:()=>Dc,smartScheduler:()=>Pc,sticky:()=>p,tcfv2:()=>h,trackers:()=>f,version:()=>Rc,videoEvents:()=>jc});var m=__webpack_require__(8818),v=(__webpack_require__(7843),__webpack_require__(1442),__webpack_require__(6485),__webpack_require__(5446)),y=__webpack_require__(7759),b=__webpack_require__(7838),_=__webpack_require__(6964),w=__webpack_require__(2149),S=__webpack_require__.n(w),T=__webpack_require__(7314),I=__webpack_require__(1359),k=__webpack_require__(5739),A=__webpack_require__.n(k),E=__webpack_require__(567),C=__webpack_require__.n(E),x=__webpack_require__(1970);const O=e=>{const t=e.getWrapperAdSystems(),n=e.getWrapperAdIds(),r=e.getWrapperCreativeIds();return{adPodInfo:{maxDuration:e.getAdPodInfo().getMaxDuration()},adSDK:"IMA",adSystem:t,advertiserId:e.getAdSystem(),advertiserName:e.getAdvertiserName(),adWrapperIds:n,adWrapperSystems:t,contentType:e.getContentType(),creativeId:r?.[t?.indexOf("GDFP")]||e.getCreativeId(),dealId:e.getDealId(),height:e.getVastMediaHeight(),lineItemId:n?.[t?.indexOf("GDFP")]||e.getAdId(),mediaUrl:e.getMediaUrl(),skippable:1!==e.getSkipTimeOffset(),title:e.getTitle(),width:e.getVastMediaWidth()}};var P=__webpack_require__(6642),D=__webpack_require__(2257);const R=(0,_.h)("players.tags"),j=y.Ay.broker("players.tags"),M=(0,I.l$)(((e,t)=>{let{args:n,observable:r,broker:i,log:o}=t,a={cust_params:{}};const{pos:s,offset:d}=n,l=o.extend(`${e}-${s}-${d}`);l("startAuction requested",n),i.emit("collect video tags",{...n,getVideoTagsNum:e},((e,t)=>{const n=t&&t.tags?t.tags:t;if(!n)return l("Video targeting ended with:",a),void r(n);a=(0,T.x5)({...a,...n,cust_params:{...a.cust_params,...n.cust_params}}),r(e,a)}))}));let N={cust_params:{}};function U(){return N}j.on("sync video tags update",(e=>{N=S()({},N,e)}));const L=e=>{let{allTargeting:t,syncVideoTags:n}=e;const r=t.reduce(((e,t)=>{const n=(e=>e&&"tags"in e)(t)?(e=>e.tags||{})(t):(e=>e&&"targeting"in e)(t)?(e=>e.targeting||{})(t):t||{},r=(0,T.x5)(n);return{...e,...r,cust_params:{...e.cust_params,...r.cust_params}}}),{cust_params:{}}),i=S()({},r.cust_params,n.cust_params),{npa:o,rdp:a,ppid:s,plcmt:d}=S()({},r,n);return{cust_params:i,npa:o,rdp:a,ppid:s,plcmt:d}},B=(0,I.l$)(((e,t)=>{let{videoTagsRequestOpts:n,targetingHandler:r=L,_broker:i=j}=t;const o=D.ph.inc(n.pos),a=(0,v.Jt)(`videoDescription.${n.pos}.provideAdTagAfterRequestNum`,1);if(R({counter:o,provideAdTagAfterRequestNum:a}),o%a!=0)return R(`${n.pos} has not reached expected request number. Expecting ${a}.`),{pAuctionEnded:Promise.resolve(),buildAdTagUrl:()=>{},onImpression:()=>{},onFailure:()=>{}};const{autoplay:s,duration:d,offset:l,pos:c,videoId:u,videoStarts:p}=n,h=R.extend(`${e}-${c}-${l}`);h("startAuction requested",n);const f=Number.isInteger(d)?d/1e3:void 0,g=c?[{cust_params:{pos:c}}]:[];let m;const y=Date.now(),{resolve:b,promise:_}=(0,P.v6)();i.emit("collect video tags",{...(0,T.Up)(n,["autoplay","cust_params","muted","offset","platform","pos","screen","videoId"]),getVideoTagsNum:e},((e,t)=>{t?g.push(t):(h("targeting",g),b())}));const w={adSDK:"IMA",autoplay:s,offset:l,platform:n.impressionEventPlatform||"dmplayer",play:p,targeting:{pos:[c]},timeSinceStartOfPlayer:Date.now()-y,videoId:u};return j.on("bid request",c,((e,t)=>{j.emit("video.bid-request",{...w,bidder:t.bidder,playerId:n.playerId,userIds:t.userids})})),{pAuctionEnded:_,buildAdTagUrl:()=>{h("building adTagUrl with targeting:",g);const{cust_params:t={},npa:i,rdp:o,ppid:a,plcmt:s}=r({allTargeting:g,syncVideoTags:N,getVideoTagsNum:e,videoTagsRequestOpts:n});return R({pos:c}),m=(e=>{const{cust_params:t,domain:n,embed:r,flyaway:i,iu:o,linkBaseURL:a,muted:s,scor:d,screen:l,source:c,title:u,videoId:p,videoStarts:h,npa:f,rdp:g,plcmt:m,ppid:v,videoAdServerBaseUrl:y,duration:b}=e,{customParams:_}=A()({cust_params:t,domain:n,duration:b,embed:r,flyaway:i,muted:s,screen:l,source:c,title:u,videoId:p,videoStarts:h}),w=function(e){const{videoAdServerBaseUrl:t,linkBaseURL:n,plcmt:r,scor:i,screen:o,videoId:a,customParams:s,duration:d}=e,l=new(C())(t).correlator(Date.now()).cust_params(s).description_url(n).url(`${location.protocol}//${location.hostname}${location.pathname}`).scor(i).sz(e.size?(0,x.uj)(e.size):o.width+"x"+o.height).setRequestNonPersonalizedAds(Boolean(e.npa)).setRestrictDataProcessing(Boolean(e.rdp)).setPpid(e.ppid).addParam("vid",a).addParam("vid_d",d).iu(e.iu);return void 0!==r&&l.addParam("plcmt",r),l.build()}({customParams:_,iu:o,linkBaseURL:a,npa:f,plcmt:m,ppid:v,rdp:g,scor:d,screen:l,size:e.size,videoAdServerBaseUrl:y,videoId:p,duration:b});return w})({...n,cust_params:t,size:(0,v.Jt)(`videoDescription.${c}.size`),pos:c,npa:i,rdp:o,ppid:a,videoAdServerBaseUrl:"https://pubads.g.doubleclick.net/gampad/ads",plcmt:s,duration:f}),h("returning adTagUrl:",m),m},onImpression:e=>{let{adUnit:t,videoOpts:r}=e;const o={...w,...r,adImpression:O(t.creativeAd),playerId:n.playerId,tag:m};h("adImpression received",o),i.emit("video.ad-impression",o)},onFailure:e=>{let{videoOpts:t}=e;const n={...w,...t,tag:m};h("onFailure received",n),i.emit("video.no-ad-shown",n)}}}));var q=__webpack_require__(4610),F=__webpack_require__(395);const V={jwplayer:"chromeless",video:"dmplayer"},z={hero:"video",verticalvideo:"video"},$={jwplayer:{prefix:"jw_"}},W={hero:"hero",video:"dmplayer",jwplayer:"dmplayer",verticalvideo:"verticalvideo"};var H=__webpack_require__(5424);const G=(0,_.h)("videoBidding"),X=(0,_.h)("videoPlayer"),J=(e,t,n)=>({videoAdServerUrl:n.replace(/(&iu=[^&]*)/,`$1/${e}`),...t}),K=(e,t)=>{if((0,T.Im)(e))return[];const n=t.duration/1e3,{preRoll:r,midRollRepeat:i}=e,o=[],a=t.plugins["ads-setup"].videoAdServerUrl;if(r&&o.push(J("preroll",{offset:0},a)),i){const{each:e,videoDurationExceeds:t}=i;let r=e,s=r+t;for(;s<n;)o.push(J("midroll",{offset:r,minVideoDuration:s},a)),r+=e,s=r+t}return o.sort(((e,t)=>e.offset-t.offset))};function Y(e,t){G("request for video options");const n=(0,v.Jt)("plugins.enabled",[]).includes("adsFree")&&__webpack_require__.g.isAdFreeEntitled?.()||(0,H.Z)();G("isAdFreeUser",n);const r=(0,v.Jt)("players.editorial.v2",{}),i=(0,v.Jt)("plugins.forceFlyawayPlayerConfiguration.styleVariant","letterbox"),o=(0,v.Jt)("player.setup.flyoutFromParagraph"),[a]=(0,b.O)(),s=(0,v.Jt)("players.setup.earlyAdFactoryInit",!0),d=-1!==a&&(0,v.Jt)("players.setup.userActionTimeout"),l=-1!==a&&(0,v.Jt)("players.setup.earlyBidding"),c=new Set((0,v.Jt)("plugins.enabled",[])),u=e=>{const t=(0,v.Jt)(`players.setup.${e}`);return void 0!==t&&t||Boolean(c.has(e))},p=u("mobileFlyawayPlayer"),{tracking:h={},"ads-setup":f={}}=t.plugins||{},g=f.schedule||!h.sponsored&&f.adsEnabled&&K(r,t)||[];G("schedule",g);const m=u("chromelessv2.dmplayer")||u("players.commercial"),y=!m&&u("videoFlyout"),_=!m&&u("videoForceFlyout"),w=n||(0,v.Jt)("videoBidding.biddingDisabled",!u("imaSDK"))?{adsEnabled:!1,earlyAdFactoryInit:!1,earlyBidding:!1,schedule:[],useIMASDK:!1,userActionTimeout:!1,vpaidEnabled:!1,disableAllAds:!0}:{earlyAdFactoryInit:!!s,earlyBidding:l,schedule:g,useIMASDK:u("imaSDK"),userActionTimeout:d,vpaidEnabled:u("vpaid"),disableAllAds:!1},S={"ads-setup":{...f,...w,bidmax:!0},flyout:{enabled:y,active:y,forceFlyout:{enabled:_,active:_}},flyawayPlayer:{enabled:p,fromParagraph:o,...p?{adhesiveStyleVariant:i}:{}},debugOn:X.enabled};return G("new opts:",S),S}var Q=__webpack_require__(124);const Z=(0,_.h)("AdsManager"),ee=[],te=()=>__webpack_require__.g.DM.molFeMiniLodash.filter(__webpack_require__.g.document.documentElement.childNodes,(e=>1===e.nodeType))[0]||document.body,ne=y.Ay.broker("AdsManager"),re=()=>{},ie=e=>{ne.emit("stop refreshing ads",e)},oe=()=>ne.emit("force ads refresh"),ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){const t=document.currentScript||(0,q.HV)(document.querySelectorAll(`*[id^=${e.pos}] script`))||(0,q.HV)(document.scripts);if(!t?.parentElement||"BODY"===t.parentElement.nodeName)throw new Error(`Cannot find current script for ${e.pos}`);return t.parentElement}(e);const{id:n}=t,r={...e,containerId:n};ne.emit("api message","adSlotMount",r)},se=e=>{ne.emit("infinite-list append",e)},de=e=>ee.push(e),le=()=>{if(document.getElementById("content"))for(const e of ee){const t=document.getElementById(e),n=document.getElementById(e),r=n.getAttribute("style");t.className=n.className,r&&t.setAttribute("style",n.getAttribute("style"))}},ce=ne.until("gpt loaded"),ue=e=>ce.then(e),pe=()=>{},he=()=>{ne.emit("add fb-marketing-pixel")};ne.on("error",(function(){return console.error(...arguments)}));let fe={version:1};ne.on("send with rta page unload",(e=>{Z("will send to rta on page unload:",e),fe={...fe,...e}}));const ge=()=>fe;try{const e=()=>!!Object.keys(b.fX).some((e=>e.includes("debug")));"production"!==__webpack_require__.g.adEnvironment||e()||(y.Ay.showUncaughtErrors=!1)}catch(e){console.error(e)}const me=e=>Object.keys((0,v.Jt)("slots.enabled",{})).includes("mpu_player")?(ne.emit("chromeless player event","bannerFallbackAd",e),ne.until("bannerFallbackAd destroyed")):(Z("fallback banner ad disabled, resolving"),Promise.resolve());let ve=[];function ye(){return ve}ne.on("ads rendered update",(e=>{ve=e}));const be=U;function _e(){ne.emit("open control panel")}function we(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ne.emit("external subscription",e,...n)}function Se(e){ne.emit("unstick position",e)}function Te(e){ne.emit("remove watermark",e)}function Ie(e){if((0,H.Z)())return{pAuctionEnded:Promise.resolve(),buildAdTagUrl:()=>{},onImpression:()=>{},onFailure:()=>{}};const t=function(e){const{autoplay:t,cust_params:n,fbiaEmbed:r,flyaway:i,isMobile:o,muted:a,offset:s,original:d,platform:l,pos:c,syndicationService:u,videoAdServerUrl:p}=e,h="verticalvideo"===l?"verticalvideo":c||"video",f=(0,v.Jt)(`videoDescription.${h}.screen`,e.screen),g=$?.[h]?.prefix?`${$?.[h]?.prefix||""}${0===s?"preroll":"midroll"}`:h,m={...(0,T.Up)(n,["playerListOffset"]),pos:g,player:h},{muted:y,autoplay:b}="jwplayer"===h?{autoplay:!0,muted:!0}:{autoplay:t,muted:a};return{...(0,T.Up)(e,["domain","duration","embed","flyaway","linkBaseURL","offset","scor","source","title","videoId","videoStarts"]),autoplay:b,cust_params:m,muted:y,pos:h,screen:f,impressionEventPlatform:V[h]||h,platform:W[h],playerId:z[h]||h,iu:(0,F.l)(h,{autoplay:b,fbiaEmbed:r,flyaway:i,isMobile:o,offset:s,original:d,syndicationService:u,videoAdServerUrl:p})}}(e);return Z("startVideoAuction",t.videoId,t.pos,t.offset,t),B({videoTagsRequestOpts:t})}var ke=__webpack_require__(7303),Ae=__webpack_require__(4250),Ee=__webpack_require__(6353),Ce=__webpack_require__(5517),xe=__webpack_require__(3575);const Oe=__webpack_require__(7892),Pe=__webpack_require__(5517),De=new Oe("click",(function(e){const t=Pe.getElementOrIframeById(e),n=t.classList.contains("slide")?t:(0,xe.closest)(t,(function(e){return e.classList.contains("slide")}));let r;return document.querySelectorAll?r=n.querySelectorAll(".adLinkLabel a"):(r=n.getElementsByTagName("a"),r=Array.prototype.filter.call(r,(function(e){return(0,xe.closest)(e,(function(e){return e.classList.contains("adLinkLabel")}))}))),r[0]})),Re=new Oe("adDeactivate",(function(e){return(0,xe.closest)(Pe.getElementOrIframeById(e),(function(e){return"mobileGalleryModal"===e.id}))}));function je(){const e=Array.prototype.slice.call(arguments),t=e[1];e[1]=function(){window.open(t,"_blank")},De.registerEvent.apply(De,e)}function Me(e,t){Re.registerEvent(e,t)}function Ne(e){"string"==typeof e?e=Pe.getElementById(e):(0,xe.isElement)(e)||(e=e[0]);let t=(e=Pe.getAdContainer(e)).getElementsByTagName("div");return t=Array.prototype.filter.call(t,(function(e){const t=De.getEvent(e.id);return t&&-1!==t.toString().indexOf("window.open")})),t.length>0}function Ue(){De.registerEvent.apply(De,arguments)}var Le=__webpack_require__(6852),Be=__webpack_require__.n(Le),qe=__webpack_require__(7892),Fe=__webpack_require__.n(qe);const Ve={},ze=e=>{if(e in Ve)return Ve[e];let t=!0,n=(0,v.Jt)("headerBidders",{});"string"==typeof n&&(n=JSON.parse(n));const r=n[window.location.hostname];return r&&(r.blacklist&&r.blacklist.includes(e)&&(t=!1),r.whitelist&&!r.whitelist.includes(e)&&(t=!1)),Ve[e]=t,t};function $e(){return(0,v.Jt)("plugins.enabled",[]).filter((e=>ze(e)))}var We=__webpack_require__(9454);const He=(0,_.h)("plugin-manager");let Ge,Xe,Je,Ke={},Ye=[];const Qe=e=>{He("adding plugins:",e);const t=new Set([...(0,v.Jt)("plugins.enabled",[]),...e]);(0,v.hZ)("plugins.enabled",[...t])},Ze=e=>{He("removing plugins:",e);const t=new Set((0,v.Jt)("plugins.enabled",[]));e.forEach((e=>{t.delete(e)})),(0,v.hZ)("plugins.enabled",[...t])},et=[],tt=e=>et.push(e),nt=async(e,t)=>(await Promise.all(et.map((n=>n(e,t))))).every((e=>e)),rt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{addPlugins:Qe,broker:Ge.broker(e),doc:document,getConfig:v.Jt,setConfig:v.hZ,localStorage,sessionStorage,log:(0,_.h)(e),removePlugins:Ze,registerPluginBouncer:tt,checkPluginBouncer:nt,ownName:e,win:window,...t}},it=e=>"object"==typeof e&&e.default?e.default:e,ot=(e,t,n)=>{if(!ze(t))return;if(Je.includes(t))return;let r=it(e[t]);if("function"!=typeof r&&(r=it(e[t])),Je.push(t),"function"==typeof r)try{r(rt(t,n))}catch(e){console.error(`Error initializing plugin "${t}":`,e)}},at=async(e,t)=>{const n=(0,v.Jt)("pluginManager.setupTimeout",5e3),r=async(e,r,i)=>{try{const o={...rt(e,t),pluginsAlreadyRun:i};(0,v.hZ)("pluginManager.setupTimeout",r.plugiSetupTimeout||n);const a=r.pluginSetup(o),s=(0,v.Jt)("pluginManager.setupTimeout",n);return await(0,P.tN)(s,a)}catch(t){console.error(`Error calling pluginSetup on plugin '${e}':`,t)}},i=new Set;let o=null;for(;;){const t=(0,v.Jt)("plugins.enabled").filter((e=>!i.has(e))).shift();if(!t)break;if(o===t){He.warn("Plugin",t,"just ran and its asking to run again, ignoring it"),i.add(t);continue}o=t;let n="object"==typeof(a=e[t])&&a.default?a.default:a;if(n="object"==typeof n?n.default:n,n&&"function"==typeof n.pluginSetup){if(!await nt(t,n)){He("plugin bounced during init",t),i.add(t);continue}He("setup plugin",t),"not yet"!==await r(t,n,i)?(He("ran:",t),i.add(t)):He("plugin",t,"asked to be called again")}else i.add(t)}var a};function st(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,{run:n,init:r,initTimeout:i,...o}]=e;const a=n||(()=>{});return a.pluginSetup=r,a.plugiSetupTimeout=i||5e3,Object.entries(o).forEach((e=>{let[t,n]=e;return a[t]=n})),[t,a]})))}function dt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:__webpack_require__.g.document,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.head;return new Promise(((i,o)=>{"async"in t||(t.async=!0);const a=n.createElement("script");a.src=e,Object.entries(t).forEach((e=>{let[t,n]=e;return!1!==n&&a.setAttribute(t,!0===n?"":n)})),a.addEventListener("load",i),a.addEventListener("error",o),"function"==typeof r?r(a):r.appendChild(a)}))}(0,We.F3)("adzouk",{run:function(e){let{broker:t}=e;const{top:n}=__webpack_require__.g;if(n.location.hostname.includes("combotag.com"))return;const r=encodeURIComponent(location.href),i=n.ct_t_init;t.invoke("load script",`//serve.combotag.com/show_ad?id=994&url=${r}&t=${i}`,null,{},(()=>!0))},vendorIds:{gdpr:!1}}),(0,We.F3)("scriptLoader",{run:function(e){let{broker:t,log:n}=e;const r={};t.register("load script",((e,t,i,o,a)=>new Promise(((s,d)=>{n("load script:",e,t,i,o);const l=o||(()=>window[t]);t&&l()&&(n("variable already defined:",t),s(l()));const c=t||e;if(r[c]||(n("adding script tag to load",e),dt(e,i,document,a).then((()=>{n("script loaded:",e);const t=r[c];n("calling",t.length,"listeners");const i=e=>e();r[c]={push:i},t.forEach(i)}),d),r[c]=[]),t||o)try{(0,P.Mi)((()=>l())).then((e=>{n("tracking variable found:",t,o,e),s(e)}))}catch(r){n("error while loading",e,":",r),d(new Error(`Error loading ${e} (trackingVariable: ${t}): ${r}`))}else n("no tracking variable given for",e,"waiting on script load"),r[c].push(s)})))),t.register("import script",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{document:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return dt(e,t,n,arguments.length>3?arguments[3]:void 0)})),t.register("import script in iframe",(e=>{let{url:t}=e;return new Promise(((e,n)=>{const r=document.createElement("iframe");r.display="none",r.onload=()=>dt(t,{},r.contentWindow.document).then(e,n),document.head.appendChild(r)}))})),t.register("import stylesheet",(e=>{const t=document.createElement("link"),{head:n}=document;t.href=e,t.setAttribute("rel","stylesheet"),n.appendChild(t)}))},isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});var lt=__webpack_require__(7579),ct=__webpack_require__.n(lt),ut=__webpack_require__(8866),pt=__webpack_require__.n(ut);const ht=e=>{let t,n,r="GET",i=3e3,o={};"string"==typeof e?t=e:({method:r="GET",url:t,timeout:i=3e3,headers:o={},data:n}=e);const a=new XMLHttpRequest,s=new Promise(((e,i)=>{a.onreadystatechange=function(){4===this.readyState&&(this.status>199&&this.status<300?e(this.responseText):i(new Error(`Error status ${this.status}: ${this.statusText}`)))},a.open(r,t,!0),Object.entries(o).forEach((e=>{let[t,n]=e;return a.setRequestHeader(t,n)})),n?a.send(n):a.send()}));return i?(0,P.tN)(i,s):s},ft={purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[95]}};async function gt(){let e,t=`/api/player/${PageCriteria.pageType}/${PageCriteria.channel}`;"article"===PageCriteria.pageType&&(t+=`/article-${PageCriteria.articleId}`),t+="/player-config.json";try{e=await ht({url:t,timeout:5e3})}catch(e){console.error(e)}return e}function mt(e){let{broker:t,checkPluginBouncer:n}=e;const r=(0,v.Jt)("pos.bvp_puff_26.editorialVideoURL","//video.dailymail.co.uk/video/mol/test/2017/10/17/8934813711130511437/1024x576_MP4_8934813711130511437.mp4");function i(e,n,r,i,o,a){const s=document.getElementById(e),d=e+"_player",l={id:d,width:640,height:264,dataOpts:n,src:r,click:a,description:o,title:(0,v.Jt)("pos.bvp_puff_26.title","SPONSORED")},c=document.createElement("div"),u=i(l);c.innerHTML=u,function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(s),s.appendChild(c.firstElementChild),"none"===s.style.display&&(s.style.display="");const p=DM.molFeVideoplayer.init(document.getElementById(d));t.emit("video player inited",e,p)}__webpack_require__.g.addEventListener("message",(async function(e){if(!e.data||"function"!=typeof e.data.indexOf)return;const n=e.data.indexOf("_dm\n");if(0===n){let o;const a=e.data.substring(n+4),s=JSON.parse(a);b.fX["bvp-force-editorial"]&&(o=await gt())?(console.log("Forcing editorial instead of campaign in BVP"),i(s.targeting.pos[0],o,r,pt(),"","")):t.emit("video",s.type,s)}}),!1),t.on("ad rendered",(async(e,t)=>{if(t.isEmpty&&e.startsWith("bvp_")&&(0,v.Jt)("pos.bvp_puff_26.editorialFallback")){const t=await gt();t&&i(e,t,r,pt(),"","")}})),t.on("video","playBrandedVideo",(e=>{const r=e.targeting.pos[0];if(!document.getElementById(r))return void t.emit("log","BVP",`Element #${r} not found`);const o=e.videoObject;let a=[];n("brandedVideoPlayer",ft)&&(a=[...a,...e.lotome.filter((e=>e.id&&e.id.length)).map((e=>({time:e.time,uri:`//bcp.crwdcntrl.net/5/c=991/b=${e.id}`})))]),e.impTracker&&e.impTracker.length&&a.push({time:9,uri:e.impTracker});const s=`${e.clickPrefix}${o.clickThroughUrl}`,d={title:o.pageTitle,poster:o.stillImageUrl,isMobile:PageCriteria.isMobile,playerId:"default",videoId:o.videoId,preload:"none",referenceId:o.referenceId,linkBaseURL:"",initialVideo:!1,plugins:{"branded-content":{clickThroughUri:s,endStatePoster:o.endStateImageUrl,trackingPixels:a},"ads-setup":{adsEnabled:!1},tracking:{channelShortName:PageCriteria.channel,sponsored:!0,referenceId:o.referenceId,trackingType:"commercialVideoPlayer"}}};i(r,JSON.stringify(d),o.videoUrl,ct(),o.description,s)}))}mt.ccpa={enabledIfDissent:!0},mt.gdpr={enabledIfDissent:!0};const vt=()=>{const e=document.createTextNode((0,v.Jt)("label.text","ADVERTISEMENT")),t=document.createElement("span");t.classList.add("mol-ads-label"),t.appendChild(e);const n=document.createElement("span");return n.classList.add("mol-ads-label-container"),n.appendChild(t),n};function yt(e){let{broker:t,log:n,getConfig:r}=e;__webpack_require__(9515);const i=__webpack_require__.g.googletag=__webpack_require__.g.googletag||{};i.cmd=i.cmd||[];const o=new Promise((e=>i.cmd.push((()=>e()))));t.emit("import script","https://securepubads.g.doubleclick.net/tag/js/gpt.js"),t.on("system ready",(async()=>{await o,t.emit("gpt loaded",i)}));const a=new Set,s=e=>{let{slot:t}=e;const n=document.getElementById(t.getSlotElementId());n&&(n.classList.contains("noAdLabel")||n.classList.contains("dmg-ads-ad"))||a.delete(t)&&n&&n.appendChild(vt())};o.then((()=>i.pubads().addEventListener("slotRenderEnded",s))),t.register("googletag.pubads.refresh",(async e=>{await o,e.forEach((e=>{a.add(e),n.enabled&&n("refresh",e.molAd.pos,"targeting",e.getTargetingMap())})),i.pubads().refresh(e)})).sync=!0,t.register("googletag.display",(async e=>{if(await o,n.enabled)try{const t=i.pubads().getSlots().find((t=>t.getSlotElementId()===e)),r=t&&t.getTargetingMap()||void 0;n("display",e,"targeting",r)}catch(e){n.warn(e)}return i.display(e)})).sync=!0;const d=e=>(Array.isArray(e)?e:[e]).map((e=>String(e)));t.on("set page level targeting",(async e=>{const t=await e;await o,Object.entries(t||{}).map((e=>{let[t,n]=e;return[t,d(n)]})).forEach((e=>{let[t,r]=e;n("page level targeting:",t,"=",r),i.pubads().setTargeting(t,r)}))}))}yt.ccpa={enabledIfDissent:!0},yt.gdpr={enabledIfDissent:!0},yt.disableIfNoAdsServable=!0;const bt=e=>__webpack_require__.g.sessionStorage.getItem(e),_t=(e,t)=>{__webpack_require__.g.sessionStorage.setItem(e,t),wt()},wt=()=>{__webpack_require__.g.localStorage.setItem("mol.ads.session.publish",JSON.stringify(sessionStorage)),__webpack_require__.g.localStorage.removeItem("mol.ads.session.publish")},St=e=>{for(const t in e)__webpack_require__.g.sessionStorage.setItem(t,e[t])},Tt=e=>{let{key:t,newValue:n}=e;if(n)switch(t){case"mol.ads.session.request":__webpack_require__.g.localStorage.setItem("mol.ads.session.response",JSON.stringify(__webpack_require__.g.sessionStorage)),__webpack_require__.g.localStorage.removeItem("mol.ads.session.response");break;case"mol.ads.session.publish":St(JSON.parse(n))}};let It;const kt=()=>(It||(__webpack_require__.g.addEventListener("storage",Tt),It=new Promise((e=>{const t=n=>{let{key:r,newValue:i}=n;if("mol.ads.session.response"!==r)return;__webpack_require__.g.removeEventListener("storage",t);const o=i?JSON.parse(i):{};e(o)};__webpack_require__.g.addEventListener("storage",t),__webpack_require__.g.localStorage.setItem("mol.ads.session.request","mol.ads.session.request"),__webpack_require__.g.localStorage.removeItem("mol.ads.session.request")})).then(St)),It),At=()=>{let e=parseInt(bt("mol.ads.sessionDepth")||0);return isNaN(e)&&(e=0),e++,_t("mol.ads.sessionDepth",e),e},Et=async()=>{const e=kt();return await Promise.race([e,(0,P.wR)(1)]),{session:await At()}};async function Ct(e){let{broker:t}=e;t.emit("set page level targeting",Et())}Ct.isAdsFreeSupported=!0,Ct.ccpa={enabledIfDissent:!0},Ct.gdpr={enabledIfDissent:!0},__webpack_require__(3721);var xt=__webpack_require__(829);(0,We.F3)("analytics.bidsHunting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=new Set(n("analytics.bidsHunting.positions",[])),o=new Set(n("analytics.bidsHunting.bidders",[]));t.on("bid",((e,n)=>{!n.cpm||i.size>0&&!i.has(e)||o.size>0&&!o.has(n.bidder)||(r("🍔 adding bid to stack",e,n),t.emit("send event to bidmax",{type:"custom",payload:{...n,event:"bid-hunt",pos:e}}))}))}}),(0,We.F3)("analytics.coreMetrics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t}=e;const n=__webpack_require__.g.performance?.getEntries()?.[0]?.serverTiming?.find((e=>"cdn-cache"===e.name))?.description?.toLowerCase();t.register("call for page analytics",(()=>{const{width:e,height:t}=(0,b.YC)();return{ss:{w:e,h:t},pageCache:n}}))}}),(0,We.F3)("analytics.cwv",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n}=e;function r(){const e=__webpack_require__.g.DM.molFeWebVitals.getStandard(),{CLS:t,FCP:n,FID:r,LCP:i,TTFB:a}=e;return o({cls:1e3*(t||0),fcp:n,fid:r,lcp:i,ttfb:a})}function i(){const e=__webpack_require__.g.DM.molFeWebVitals.getUpdated(),{CLS:t,FCP:n,FID:r,LCP:i,TTFB:a}=e;return o({cls:1e3*(t||0),fcp:n,fid:r,lcp:i,ttfb:a})}function o(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[,t]=e;return null!=t})).map((e=>{let[t,n]=e;return[t,Math.round(n)]})))}__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeWebVitals?(t.register("call for page analytics",(()=>({cwv:r()}))),__webpack_require__.g.DM.molFeWebVitals.getUpdated&&t.register("call for page-unload",(()=>({cwv:i()}))),__webpack_require__.g.DM.later("mol-fe-web-vitals-standard",(()=>{const e=function(){const e=r(),{cls:t,fcp:n,fid:i,lcp:o,ttfb:a}=e;return{...(0,D.E)("clsP1k",t),...(0,D.E)("fcpP10s",n),...(0,D.E)("fidP1s",i),...(0,D.E)("lcpP10s",o),...(0,D.E)("ttfbP10s",a)}}();n("mol-fe-web-vitals-standard fired, cwv:",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"cwv",...e}})}))):n.warn("cwv metrics cannot be used because window.DM.molFeWebVitals is unavailable")}}),(0,We.F3)("analytics.pageUnload",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n,setConfig:r}=e;const i={capture:!0,passive:!0},o=__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart||__webpack_require__.g.adverts.startTime;n("Starting at:",__webpack_require__.g.adverts.startTime-o);const a=localStorage.getItem("mol.ads.previousDwellTime"),s=(0,b.j1)()?.type||"unknown";setInterval((()=>{localStorage.setItem("mol.ads.previousDwellTime",Date.now()-o)}),1e4);let d=!1,l=0,c=0;const u=new Set,p=new Set;t.on("ad rendered",(e=>{u.add(e),l++})),t.on("bid",((e,t)=>{let{bidder:n}=t;p.add(n),c++}));const h=async()=>{if(d)return;d=!0,n("force sync dispatcher"),t.bus.setDispatcher((e=>e())),t.bus.globalTimeoutOverride=0,n("about to call for page-unload");const e=await t.invokeAll("call for page-unload"),r=Date.now()-o;localStorage.setItem("mol.ads.previousDwellTime",r);const i=e.reduce(((e,t)=>({...e,...t})),{t:r,pdt:a,autorefresh:!!(0,b.Ri)("autorefresh"),pnt:s,chp:window.location.href.includes("comments"),imp:l,bids:c,pr:u.size,ub:p.size});n("got:",i),t.emit("send event to bidmax",{type:"page-unload",payload:i},!0)};window.addEventListener("pagehide",h,i),window.addEventListener("beforeunload",h,i),window.addEventListener("unload",h,i)}}),(0,We.F3)("analytics.partners",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.once("permutive ready",(()=>a({event:"permutive-load"}))),t.once("new minute media player",(()=>a({event:"mm-load"}))),t.once("admantx loaded",(()=>a({event:"admantx-load"}))),document.addEventListener("spot-im-api-ready",(()=>a({event:"openweb-load"}))),document.addEventListener("spot-im-conversation-loaded",(()=>a({event:"openweb-conv-loaded"}))),document.addEventListener("spot-im-conversation-viewed",(()=>a({event:"openweb-conv-viewed"}))),document.addEventListener("spot-im-current-user-sent-message",(()=>o("powms"))),Ot.forEach((e=>document.addEventListener(e,(()=>o("powui"))))),t.once("outbrain container render",(()=>a({event:"outbrain-container-render"}))),t.once("outbrain render",(()=>a({event:"outbrain-first-widget-render"}))),t.once("outbrain visible",(()=>a({event:"outbrain-first-view"}))),t.on("outbrain render",(()=>o("poi"))),t.on("outbrain visible",(()=>o("pov"))),t.on("outbrain nocontent",(()=>o("ponc"))),t.on("outbrain failed to load",(()=>o("poftl"))),t.on("outbrain click",(()=>o("poc"))),t.on("outbrain issue",(()=>o("pop")));let r=0;t.on("new perform player",((e,n)=>{0===r&&a({event:"dazn-load"});const i="peformPlayer-"+r++;t.emit("track viewability",i,n),t.once("ad viewable",i,(()=>o("pdv")))}));const i={};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!Pt[e])throw new Error(`Metric '${e}' not registered in 'knownMetric'. Please do so.`);n("inc counter:",e);const r=i[e]||0;i[e]=r+t}function a(e){n("sending event:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}t.register("call for page-unload",(()=>i))}});const Ot=["spot-im-clicked-delete-message","spot-im-clicked-edit-message","spot-im-clicked-flag","spot-im-clicked-message-context-menu","spot-im-clicked-mute-user","spot-im-share-drop-down","spot-im-share-type","spot-im-hover-like-details","spot-im-show-more-comments-clicked","spot-im-show-more-replies-clicked","spot-im-user-down-vote-click","spot-im-user-up-vote-click","spot-im-login-start","spot-im-post-login","spot-im-notification-drop-down-link","spot-im-user-notifications-click","spot-im-clicked-cog-menu","spot-im-clicked-privacy","spot-im-clicked-settings","spot-im-profile-drop-down","spot-im-sort-by-drop-down","spot-im-sort-by-select","spot-im-clicked-article-link-profile","spot-im-open-user-profile"],Pt={poi:"outbrain impression",pov:"outbrain view",ponc:"outbrain no content",poftl:"outbrain failed to load",poc:"outbrain click",pop:"outbrain issue",powui:"openWeb user interaction",powms:"openWeb message sent",pdv:"dazn view"};function Dt(e){let{broker:t}=e;t.register("call for page analytics",(()=>({abtest:__webpack_require__.g.molABTest})))}(0,We.F3)("analytics.reportPlugins",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const r=new Set(n("bidmax.reportPlugins",[]));r.size>0&&t.register("call for page analytics",(()=>({plugins:n("plugins.enabled").filter((e=>r.has(e)))})))}}),(0,We.F3)("analytics.scrollDepth",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t}=e,n=0;function r(){n=Math.max(n,Math.round(window.pageYOffset+window.innerHeight))}document.addEventListener("scroll",(0,I.Ai)(r,300),{passive:!0,capture:!1}),t.register("call for page-unload",(()=>(r(),{sd:n})))}}),(0,We.F3)("analytics.takeover",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e,i=!1;n("__generated.modifiers.applied",[]).some((e=>e.startsWith("campaigns.rules-linteItem")))?(t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}})):__webpack_require__.g.addEventListener("message",(function e(n){!i&&n.data&&"function"==typeof n.data.indexOf&&0===n.data.indexOf("_dm_ads_takeover")&&(r("Marking page as containing takeover"),t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}}),i=!0,"function"==typeof __webpack_require__.g.removeEventListener&&__webpack_require__.g.removeEventListener("message",e,!1))}),!1)}}),(0,We.F3)("analytics.timeSpent",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n,getConfig:r}=e;const i={capture:!0,passive:!0},o=r("bidmax.inactiveTime",1e4),a=__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart||__webpack_require__.g.adverts.startTime;n("Starting at:",__webpack_require__.g.adverts.startTime-a);let s=0,d=0,l=a,c=a;const u=function(){const e=Date.now(),t=e-c-o;t>0&&(n("Adding inactive time:",t),s+=t,c=e)},p=()=>{const e=Date.now(),t=e-l;d+=t,n("Adding hidden time:",t),l=e},h=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],f=(0,I.Ai)((e=>{const t=Date.now();e&&u(),c=t}),1e3);for(const[e,t]of h)t.forEach((t=>e.addEventListener(t,f,i)));t.register("call for page-unload",(()=>(u(),m()&&p(),{i:s,h:d})));const g=()=>void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychanged":"",m=()=>{try{return __webpack_require__.g.top.document.hidden||__webpack_require__.g.top.document.msHidden||__webpack_require__.g.top.document.webkitHidden||!1}catch(e){return!!g()}};let v=m();document.addEventListener(g(),(e=>{m()!==v&&(v=m(),v?l=Date.now():p())}),!1)}}),(0,We.F3)("analytics.videoFailures",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;n("Starting");const r=function(){let{videoId:e,adErrorCode:r,autoplay:i,errorMessage:o,offset:a,trackingType:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={videoId:e,adErrorCode:r,autoplay:i,errorMessage:o,offset:a,trackingType:s};n("Error detected:",e,d),t.emit("send event to bidmax",{type:"video-ad-error",payload:d}),n("error:",d)},i=()=>{n("subscribing to 'video.advert-failed' events"),__webpack_require__.g.DM.pageEvents.subscribe("video.advert-failed",(function(e){r(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}))};t.on("video.advert-failed",(function(){r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})})),__webpack_require__.g?.DM?.pageEvents&&i()||(n("waiting for chromeless player to load"),t.on("mol-fe-sync bundle loaded",(()=>{n("mol-fe-sync bundle loaded"),__webpack_require__.g?.DM?.pageEvents&&i()})))}}),Dt.isAdsFreeSupported=!0,Dt.ccpa={enabledIfDissent:!0},Dt.gdpr={enabledIfDissent:!0};var Rt=__webpack_require__(7620);let jt,Mt,Nt,Ut;const Lt=["advertiserId","campaignId","creativeId","isEmpty","lineItemId","serviceName"],Bt=["adDurationSecs","adSystem","adTitle","advertiserId","autoplay","contentType","creativeId","isEmpty","lineItemId","mediaUrl","offset","platform","play","skippable","targeting","timeAtRender","timeSinceStartOfPlayer","videoHeight","videoWidth","winner","winningCPM"],qt=()=>Date.now()-__webpack_require__.g.adverts.startTime,Ft=e=>{if(e.slot&&e.slot.molAd&&void 0!==e.slot.molAd.state)return e.slot.molAd.state};function Vt(e){if(Array.isArray(e.size)&&2===e.size.length){const{size:[t,n]}=e;return`${t}x${n}`}}const zt=()=>{const e={};let t;const n={};let r=0;const i=async function(r){let{auction:i,pos:o,adImpressionData:a,offset:s}=r,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!d)return delete e[o][s],n[o]&&delete n[o][s],delete i.pendingImpressions,delete i.lastPosTime,void(t=void 0);const l=i.slots[o];if(l.impression=a,void 0!==s?(i.pendingImpressions.delete(o+s),l.bids=n[o][s]?[...n[o][s]]:[],delete e[o][s],delete n[o][s]):(i.pendingImpressions.delete(o),l.bids=n[o],delete e[o],delete n[o]),!(i.pendingImpressions.size>0)&&(delete i.pendingImpressions,delete i.lastPosTime,t=void 0,d)){const e={...await $t(),auction:i};jt.emit("send to bidmax",e)}},o=e=>({auctionTime:e,startTime:qt(),auctionId:r++,slots:{},pendingImpressions:new Set}),a=(t,n,r)=>{n.lastPosTime=qt(),n.pendingImpressions.add(t+(void 0!==r?r:"")),n.slots[t]={},void 0!==r?(n.offset=r,e[t]||(e[t]={}),e[t][r]=n):e[t]=n},s=(e,n)=>((!t||t.lastPosTime<qt()-2e3)&&(t=o(e)),a(n,t),t.slots[n].auctionStart=qt(),t);jt.on("get tags",(t=>{let{slot:{pos:n},timeout:r}=t;e[n]?Mt(`Auction is pending for ${n}`):s(r,n)})),jt.on("bidding ended",(t=>{Mt("bidding ended",t);const n=e[t];n.slots?n.slots[t].biddingEnded=qt():Object.keys(n).forEach((e=>{n[e].slots[t].biddingEnded=qt()}))})),jt.on("get video tags",(t=>{let{platform:r="dmplayer",offset:i=0,slot:{pos:s},timeout:d}=t;e[s]&&e[s][i]&&(e[s][i].pendingImpressions.delete(s+i),delete e[s][i],delete n[s][i]),a(s,o(d),i),n[s]||(n[s]={}),n[s][i]=[]})),jt.on("bid",((t,r)=>{let i,{platform:s,offset:d,bidder:l,cpm:c,cached:u,requestSizes:p,extraAnalyticsData:h}=r;if(Mt("on bid",t),s="jwplayer"===t&&"dmplayer"===s?"chromeless":s,void 0!==d?(n[t]||(n[t]={}),i=n[t][d]=n[t][d]||[]):i=n[t]=n[t]||[],!i)return void Mt.warn("Got a bid after auction finished:",{pos:t,bidder:l,cpm:c,platform:s,offset:d,cached:u});void 0===d||e[t][d]||a(t,o(5e3),d);const f={bidder:l,cpm:Math.round(c),time:qt(),platform:s,offset:d,cached:u,requestSizes:p,...h};i.push(f)})),jt.on("ad requested",(t=>{const n=e[t];n&&(n.slots[t].adRequestTime=qt())})),jt.on("ad loaded",(t=>{const n=e[t];n&&(n.slots[t].adLoadedTime=qt())})),jt.on("headerbidder winner",((t,n)=>{const r=e[t];r&&(r.slots[t].winner=n)}));const d=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM.molFeTracking.pageEvents,l=(t,r)=>{const s=r.playerId||(r.targeting&&r.targeting.pos?r.targeting.pos[0]:"video"),d="preroll"===r.offset?0:"midroll"===r.offset?20:r.offset,l=r.tag&&(0,Rt.BU)(r.tag)||{cust_params:{}},c=Object.fromEntries(Object.entries(l.cust_params).filter((e=>{let[t,n]=e;return!t.startsWith("gdpr")&&!t.startsWith("hb_")&&n?.length<=20}))),u=r.adImpression;let p;let h,f;u&&!(0,T.Im)(u)&&(n[s]=n[s]||{},n[s][d]=n[s][d]||[],jt.emit("video ad viewable",{pos:s,bids:n[s][d],videoId:r.videoId}),h=(e=>{let t="undetermined";return!e.adWrapperIds||!e.adWrapperIds[0]||e&&e.adWrapperSystems&&"DCM"===e.adWrapperSystems[0]?t="Other":e.traffickingParameters&&e.traffickingParameters.vu&&(t="tia"),t})(u),f={}[h]||0,p={adDurationSecs:u?.adPodInfo?.maxDuration,adSystem:u?.adSystem,adTitle:u.title,advertiserId:u.adSystem,autoplay:r.autoplay,contentType:u.contentType,creativeId:u.creativeId,isEmpty:!1,lineItemId:u.lineItemId,mediaUrl:u.mediaUrl,offset:r.offset,play:r.play,platform:r.platform,skippable:u.skippable,targeting:{...c,pos:[s]},timeSinceStartOfPlayer:r.timeSinceStartOfPlayer,videoHeight:u.height,videoWidth:u.width,winner:h,winningCPM:f},Mt("targeting",p.targeting),Mt("imaEventData.targeting",u.targeting)),void 0===d||e[s]&&e[s][d]||a(s,o(5e3),d);const g={...e[s][d]};if(delete e[s][d],g)if(g.platform=r.platform,g.offset=d,p&&!(0,T.Im)(p)){const e=(0,T.Up)({...p,timeAtRender:qt()},Bt);i({auction:g,pos:s,adImpressionData:e,offset:d})}else i({auction:g,pos:s,offset:d},!1);else Mt(`Current auction not found for ${s}${d}`)};jt.on("video.bid-request",(async e=>{Mt("sending bid request data",e),jt.emit("send event to bidmax",{...await $t(),...e})})),d&&(jt.on("dom ready",(()=>{d.subscribe("video.ad-impression",l),d.subscribe("video.no-ad-shown",l)})),jt.on("video.ad-impression",(e=>l(0,e))),jt.on("video.no-ad-shown",(e=>l(0,e)))),jt.on("ad rendered",((t,n)=>{if(t.endsWith("-oop"))return;const r=(e=>({...(0,T.Up)(e,Lt),...e.isEmpty?{}:{creativeId:e.creativeId||e.sourceAgnosticCreativeId,lineItemId:e.lineItemId||e.sourceAgnosticLineItemId,advertiserId:e.advertiser,campaignId:e.campaignId,companyId:e.companyIds},targeting:e.slot?{...e.slot.getTargetingMap()}:{},timeAtRender:qt(),slotState:Ft(e),size:Vt(e)}))(n),o=e[t]||s(0,t);Mt("ad rendered, processImpression",t,o),i({auction:o,pos:t,adImpressionData:r})}))},$t=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const t=(await jt.invokeAll({message:["call for page analytics"],timeout:e})).reduce(((e,t)=>({...e,...t})),{});return{...Nt,...t}};function Wt(e){let{broker:t,getConfig:n,log:r}=e;Mt=r,jt=t,Ut=n,Nt={timestamp:__webpack_require__.g.adverts.startTime,referrer:document.referrer,url:window.location.href},__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart&&(Nt.adsStart=__webpack_require__.g.adverts.startTime-__webpack_require__.g.performance.timing.navigationStart),jt.register("get page level analytics",(()=>$t())),function(){const e=Ut("bidmax.debounceTime",1e3),t=Ut("bidmax.pageTimeout",1e3);let n=[];const r=(0,I.sg)((async function(){let e={...await $t(t)};if(n.length){if(Mt.enabled){const e=n.find((e=>"page-unload"===e.type))?JSON.stringify(n):n;Mt("dispatching",n.length,"events:",e)}e=1===n.length?{...e,...n[0]}:{...e,type:"events",payload:n},jt.emit("send to bidmax",e),n=[]}}),e);jt.on("send event to bidmax",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.push({...e,timeAtSend:qt()}),t||!e.type?r.callNow():r()}))}(),jt.on("send to bidmax",(e=>{try{const t={...e,event_type:"bidmax",type_version:2,timeAtSend:qt(),version:b.fX.bidmax||"9.15.0"},n={"Content-type":"text/plain"};jt.emit("dispatch to bidmax",{headers:n,body:t})}catch(e){console.warn(e)}}));const i=window.mol_ads_famab;jt.on("plugins enabled",(async()=>jt.emit("send event to bidmax",{type:"page",famab:i}))),zt()}function Ht(e){let{broker:t,getConfig:n,log:r}=e,i=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);const o=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk"),a=(0,b.O)()[0];a<13&&a>0&&(r("force disabling beacon for iOS < 13"),i=!1),t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(i)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(o,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",o,!0),Object.entries(n).forEach((t=>{let[n,r]=t;return e.setRequestHeader(n,r)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}function Gt(e){let{broker:t,getConfig:n}=e;const r=n("bidmax.migrationChance",0);if(Math.random()>=r)return;const i=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);let o=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk");o.endsWith("/")||(o+="/"),o+="migration",t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(i)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(o,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",o,!0),Object.entries(n).forEach((t=>{let[n,r]=t;return e.setRequestHeader(n,r)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}Wt.isAdsFreeSupported=!0,Wt.ccpa={enabledIfDissent:!0},Wt.gdpr={enabledIfDissent:!0},Ht.isAdsFreeSupported=!0,Ht.ccpa={enabledIfDissent:!0},Ht.gdpr={enabledIfDissent:!0},Gt.isAdsFreeSupported=!0,Gt.ccpa={enabledIfDissent:!0},Gt.gdpr={enabledIfDissent:!0};const Xt=e=>{let[t,n]=e;return n>Date.now()-2628e6},Jt=(e,t)=>{let[n,r]=t;return{...e,[n]:r}};function Kt(e){let{broker:t}=e;const n="mol.ads.knownBundles",r=JSON.parse(localStorage.getItem(n)||"{}"),i=Object.entries(r).filter(Xt).reduce(Jt,{}),o=!!i["9.15.0"];i["9.15.0"]=Date.now(),localStorage.setItem(n,JSON.stringify(i)),t.register("call for page analytics",(()=>({abcache:o})))}Kt.isAdsFreeSupported=!0,Kt.ccpa={enabledIfDissent:!0},Kt.gdpr={enabledIfDissent:!0};const Yt="mol.ads.cmp.consent",Qt="1YYN",Zt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(((n,r)=>{an()(e,t,((i,o)=>{o?n(i):r(new Error(`Failed to call __cmp(${e}, ${t})`))}))}))},en=(0,I.Gr)((()=>Zt("hasConsentedToAll"))),tn=(0,I.Gr)((()=>Zt("hasChoiceBeenMade"))),nn=()=>rn()&&(0,v.Jt)("ccpa.scriptBaseUrl")&&(0,v.Jt)("plugins.enabled").includes("cmp")&&(0,v.Jt)("cmp.enable.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))),rn=()=>"US"===PageCriteria.geo,on=()=>(0,v.Jt)("ccpa.consentManagementRegions",["CA","VA"]).includes(__webpack_require__.g.PageCriteria.region),an=()=>__webpack_require__.g.__uspapi,sn=()=>"yes"===localStorage.getItem("mol.ads.cmp.consent"),dn=()=>null!==localStorage.getItem("mol.ads.cmp.consent"),ln=()=>(0,v.Jt)("ccpa.gpc.forced",navigator.globalPrivacyControl)&&(0,v.Jt)("ccpa.gpc.signal.enabled",!1);function cn(e){let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;const o=Date.now(),a="ccpa"===n("cmp.model"),s=ln(),d=on()&&s,l=n("ccpa.scriptBase")?.split("/").pop()||void 0,c={cmpVersion:n("ccpa.version",l),cmpEnforced:rn()&&on(),cmpRegion:i.region};d&&(c.gpcEnabled=!!s),__webpack_require__.g[n("cmp.apiHandler")]("getUSPData",null,((e,n)=>{n&&(r("encoded data:",e),(e=>{let{uspString:t}=e;c.uspString=t})(e),t.emit("send event to bidmax",{type:"custom",payload:{event:"loaded",module:"cmp",...(0,D.E)("loadTimeP1s",Date.now()-o)}}))})),t.register("call for page analytics",(()=>(c.consent=localStorage.getItem("mol.ads.cmp.consent"),c.cmp=a?"ccpa":void 0,r("sending",c),c)))}cn.isAdsFreeSupported=!0,cn.ccpa={enabledIfDissent:!0};const un="__bidmax\n",pn=(0,_.h)("custom-tracking");async function hn(e){let{broker:t,getConfig:n}=e;const r=n("bidmax.customTracking.max",1024);pn("MAX:",r),window.addEventListener("message",(async e=>{let{data:n}=e;if("string"!=typeof n||!n.startsWith(un))return;const i=n.substring(un.length);pn("message received size:",i.length),i.length>r&&pn("message too long, max",r);try{const e=JSON.parse(i);pn("message:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}catch(e){pn("Error parsing:",i),console.error(e)}}))}hn.isAdsFreeSupported=!0,hn.ccpa={enabledIfDissent:!0},hn.gdpr={enabledIfDissent:!0};const fn="mol.ads.entryPoint.sessionId",gn="mol.ads.entryPoint.data",mn=function(){return{id:(0,D.zE)(),lastVisit:Date.now()}},vn=(0,_.h)("entry-point"),yn=async()=>{if(__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then){const{visit:e}=await __webpack_require__.g.RTA.ids;if("string"==typeof e){const t=e.split(".");return vn("Using RTA visit id"),t[0]}}},bn=async e=>{vn("Using own session");let t=JSON.parse(localStorage.getItem(fn)||"{}");return t.id?t.lastVisit<Date.now()-60*e*1e3&&(vn("Session found in storage but it is too old:",new Date(t.lastVisit).toISOString(),"and max session is",e,"mins"),t=mn()):(vn("No session found in storage, creating a new one"),t=mn()),t.lastVisit=Date.now(),localStorage.setItem(fn,JSON.stringify(t)),t.id};async function _n(e){let{broker:t,getConfig:n}=e;const r=n("bidmax.entryPoint.sessionDurationInMins",28),i=(async()=>{let e=JSON.parse(localStorage.getItem(gn)||"{}");const t=await(async()=>await yn()||bn(r))();if(vn("Id",t),e.sessionId!==t){vn("Entry Point new or too old. Creating another.");const n=__webpack_require__.g.PageCriteria;e={sessionId:t,ep:{pt:n.pageType,c:n.channel,s:n.subchannel,r:document.referrer}},localStorage.setItem(gn,JSON.stringify(e))}return vn("Entry Point:",e.ep),{ep:e.ep}})();t.register("call for page analytics",(()=>i))}_n.isAdsFreeSupported=!0,_n.ccpa={enabledIfDissent:!0},_n.gdpr={enabledIfDissent:!0};const wn=async()=>{const e=(0,P.Mi)((()=>__webpack_require__.g.pagemeta)),t=await e;return{bundle:t.bundleVersion,sync:t.syncBundleVersion,async:t.asyncBundleVersion,video:t.videoBundleVersion}},Sn=e=>{let{broker:t}=e;return new Promise((e=>{t.once("gpt initialized",(t=>{e({gpt:t.getVersion()})}))}))},Tn=e=>{let{broker:t}=e;return new Promise((e=>{t.once("prebid loaded",(t=>{e({prebid:t.version})}))}))},In=async()=>{const e=(0,P.Mi)((()=>__webpack_require__.g.google&&__webpack_require__.g.google.ima&&__webpack_require__.g.google.ima.VERSION));return{ima:await e}},kn=e=>{const{broker:t,getConfig:n,log:r}=e,i={},o={pageMeta:wn,gpt:Sn,prebid:Tn,ima:In},a=n("analytics.external.bundleVersions",[]);r("finding versions for",a),a.forEach((t=>{const n=o[t]&&o[t](e);n?n.then((e=>{r(`assigning ${t} version`,e),Object.assign(i,e)}),(()=>r("error waiting for",t))):r.error(`unable to find handler for ${t} version`)})),t.register("call for page analytics",(()=>({externals:{versions:i}})))};kn.isAdsFreeSupported=!0,kn.ccpa={enabledIfDissent:!0},kn.gdpr={enabledIfDissent:!0};const An=kn;async function En(e){let{broker:t}=e;const n={};await t.until("prebid loaded");const r=__webpack_require__.g.pbjs.renderAd;__webpack_require__.g.pbjs.renderAd=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const[,a]=i,{pos:s,bidder:d}=n[a];t.emit("headerbidder winner",s,d),r.apply(__webpack_require__.g.pbjs,i)},__webpack_require__.g.pbjs.onEvent("bidResponse",(e=>{n[e.adserverTargeting.hb_adid]={pos:e.adUnitCode,bidder:e.bidderCode}}))}function Cn(e){let{broker:t,getConfig:n}=e;const r={},i=n("bidmax.inputDelay.monitorMax",!1),o=e=>{const t=n=>{const o=(n.timeStamp>=1e12?(new Date).getTime():performance.now())-n.timeStamp|0;if(o){i||e.removeEventListener(n.type,t,a);const s="f"+n.type[0],d="m"+n.type[0];r[s]?i&&r[d]<o&&(r[d]=o):(r[s]=o,i&&(r[d]=o))}};return t},a={capture:!0,passive:!0};window.addEventListener("scroll",o(window),a),document.addEventListener("mousemove",o(document),a),document.addEventListener("click",o(document),a),t.register("call for page analytics",(()=>({latency:r})))}En.ccpa={enabledIfDissent:!0},En.gdpr={enabledIfDissent:!0},Cn.isAdsFreeSupported=!0,Cn.ccpa={enabledIfDissent:!0},Cn.gdpr={enabledIfDissent:!0};const xn=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"];function On(e){let{broker:t}=e;__webpack_require__.g.performance&&__webpack_require__.g.performance.memory&&t.register("call for page analytics",(()=>Promise.resolve({memory:xn.reduce(((e,t)=>(e[t]=__webpack_require__.g.performance.memory[t],e)),{})})))}function Pn(e){let{broker:t}=e;t.register("call for page analytics",(async()=>{if(!__webpack_require__.g.RTA||!__webpack_require__.g.RTA.ids||!__webpack_require__.g.RTA.ids.then)return{};try{const{user:e,visit:t}=await(0,P.tN)(3e3,__webpack_require__.g.RTA.ids,new Error),n={rta:{user:e}};if("string"==typeof t){const e=t.split(".");5===e.length&&(n.rta.visit=e[0])}return n}catch(e){return console.error("RTA.ids not available"),{}}}))}function Dn(e){let{broker:t}=e;t.register("call for page analytics",(()=>Promise.resolve({localStorage:{total:Object.keys(localStorage).map((e=>localStorage.getItem(e))).reduce(((e,t)=>e+t.length),0),top10:Object.keys(localStorage).map((e=>[e,localStorage.getItem(e).length])).sort(((e,t)=>t[1]-e[1])).slice(0,10)}})))}On.isAdsFreeSupported=!0,On.ccpa={enabledIfDissent:!0},On.gdpr={enabledIfDissent:!0},Pn.isAdsFreeSupported=!0,Pn.ccpa={enabledIfDissent:!0},Pn.gdpr={enabledIfDissent:!0},Dn.isAdsFreeSupported=!0,Dn.ccpa={enabledIfDissent:!0},Dn.gdpr={enabledIfDissent:!0};const Rn=(0,_.h)("timing"),jn=["navigationStart","responseEnd","domInteractive","domContentLoadedEventStart","domComplete","fetchStart"],Mn={"first-paint":"paint","first-contentful-paint":"firstContentfulPaint"},Nn=()=>{if(performance.getEntriesByType){const e=performance.getEntriesByType("paint").filter((e=>Mn[e.name])).map((e=>[Mn[e.name],Math.round(e.startTime)]));return Object.fromEntries(e)}},Un=()=>{if(!__webpack_require__.g.performance||!__webpack_require__.g.performance.timing||!__webpack_require__.g.performance.timing.navigationStart)return{};const e=[...jn.map((e=>[e,__webpack_require__.g.performance.timing[e]])).filter((e=>0!==e[1])),["adsBundleStart",adverts.startTime]].sort(((e,t)=>e[1]-t[1])),t=e[0],n=e.map((e=>[e[0],e[1]-t[1]])).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:r}}),{});return n[t[0]]=t[1],n};function Ln(e){let{broker:t}=e;const n=t.until("page network data").then((e=>{let[t]=e;return t.network}));t.on("page load",(async()=>{Rn("page load happened, sending timing data to bidmax");const e=await(0,P.tN)(1e3,n).catch((()=>({}))),r={...Un(),...Nn(),...e};Rn("sending:",r),t.emit("send event to bidmax",{type:"page-load",payload:r})}))}Ln.isAdsFreeSupported=!0,Ln.ccpa={enabledIfDissent:!0},Ln.gdpr={enabledIfDissent:!0};class Bn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"__ads_viewability";this.startTimestamp=e,this.key=t;const n=JSON.parse(__webpack_require__.g.localStorage.getItem(t)||"{}"),r=Object.keys(n.pending||{}).reduce(((e,t)=>({...e,[t]:{misses:((n.ready[t]||{}).misses||0)+1}})),{});this.state={ready:Object.keys(n.ready||{}).reduce(((e,t)=>({...e,[t]:{...n.ready[t],...e[t]}})),r),pending:{}}}save(){__webpack_require__.g.localStorage.setItem(this.key,JSON.stringify(this.state))}adRendered(e){if(this.state.pending[e]){const t=this.state.ready[e]||(this.state.ready[e]={});t.misses=(t.misses||0)+1}this.state.pending[e]=1,this.save()}adViewed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();delete this.state.pending[e];const n=this.state.ready[e]||(this.state.ready[e]={});(n.views||(n.views=[])).push(t-this.startTimestamp),this.save()}snapshot(){const e=this.state.ready;return this.state.ready={},this.save(),e}}function qn(e){let{broker:t,getConfig:n}=e;if(!__webpack_require__.g.localStorage)return;const r=n("viewability.waitBeforeForcing",3e3),i=new Bn(Date.now());let o;const a=function(){o&&(clearTimeout(o),o=void 0)},s=()=>{a(),o=setTimeout(d,r)},d=()=>{t.emit("send event to bidmax",{type:"ping"}),o=void 0},l=new Set;let c;t.on("ad rendered",(e=>i.adRendered(e))),t.on("ad viewable",(e=>{i.adViewed(e,Date.now()),"billboard"!==e&&!e.startsWith("sky_")||l.has(e)||(l.add(e),s())})),t.once("ad viewable",(e=>{c=!0,s()})),t.intercept("send to bidmax",((e,t)=>{let[n,r]=e;a();const o=i.snapshot();if((0,T.Im)(o))return t();t(n,{...r,viewability:o,first:c}),c=void 0}))}qn.ccpa={enabledIfDissent:!0},qn.gdpr={enabledIfDissent:!0};var Fn=__webpack_require__(7294),Vn=__webpack_require__.n(Fn);const zn=(0,_.h)("connection-type"),$n=async e=>{let{broker:t}=e;const n=Vn()(navigator,"connection.type");zn("fetching edgedata from akamai");const r=await((e,t,n)=>{const r=new Headers;Object.keys(t).forEach((e=>{r.append(e,t[e])}));const i={method:"get",headers:r};return window.fetch("https://www.dailymail.co.uk/geo/edgedata.html",i)})(0,{pragma:"no-cache","cache-control":"no-cache"}).then((e=>e.text())).then((e=>e)),i={};r.match(/>(.*?)</g).forEach((e=>{const[t,n]=e.replace(/>|<|\s+/g,"").split(":");i[t]=n}));const o={connection:n,akamaiConnectionType:i.network_type,akamaiThroughput:i.throughput,akamaiNetwork:i.network};zn(o),t.emit("page network data",{network:o})};$n.isAdsFreeSupported=!0,$n.ccpa={enabledIfDissent:!0},$n.gdpr={enabledIfDissent:!0};const Wn=$n;(0,We.F3)("bidders.33across",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.33across.display",{adUnits:{}}),i=n("slotDescriptions.initial",{}),o=(0,q.x1)((e=>{let[t,n]=e;return!!(n.sizes||i[t]&&i[t].size)}),(e=>{let[t,n]=e;return{code:t,siteId:n.siteId,sizes:n.sizes||i[t]&&i[t].size}}),Object.entries(r.adUnits)).map((e=>{let{code:t,siteId:n,sizes:r}=e;return{code:t,bids:[{bidder:"33across",params:{siteId:n,productId:"siab"}}],mediaTypes:{banner:{sizes:r}}}}));t.register("provide prebid adUnits",(()=>o))}}),(0,We.F3)("bidders.adform.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.adform.adxDomain","adx.adform.net"),o=Object.entries(n("plugins.bidders.adform.v2.display.adUnits",{})).map((e=>{let[t,{mid:r,sizes:o}]=e;return{code:t,bids:[{bidder:"adf",params:{adxDomain:i,mid:r}}],mediaTypes:{banner:{sizes:o||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o))},vendorIds:{gdpr:[50]}});function Hn(e){const{getConfig:t,log:n}=e;if(!t("plugins.enabled",[]).includes("trackers.pubcommon")||!t("amazon.pubcommon.enabled",!1))return n("PubCommonId is disabled"),{addPubcommonId:e=>e};(function(e){let{broker:t,getConfig:n}=e;window.pubcid_options={type:"cookie",create:!1};const r=n("amazon.pubcommon.pubcidScript","//www.dailymail.co.uk/static/mol-adverts/demo/mol-21682/dist/pubcid.min.js");return t.invoke("import script",r)})(e).catch(n.error);const r=(0,P.Mi)((()=>(0,b.Ri)("_pubcid")),300,t("amazon.pubcommon.loadTimeout",3e3)).then((e=>({"pubcid.org":e}))).catch((()=>({})));return{async addPubcommonId(e){const t=await r;return e.map((e=>({...e,slotParams:{...e.slotParams||{},...t}})))}}}const Gn={},Xn={},Jn={sticky_banner_gallery_top:"sticky_banner_gallery_top",sticky_banner_gallery_bottom:"sticky_banner_gallery_bottom",ibv_desktop:"ibv",jw_video_desktop:"jwplayer",jw_video_tablet:"jwplayer",jw_video_mobile:"jwplayer",ctp_video_desktop:"video",ctp_video_tablet:"video",ctp_video_mobile:"video",ap_video_desktop:"video",ap_video_tablet:"video",ap_video_mobile:"video"},Kn=e=>"sizes"in e,Yn=e=>{const{width:t,height:n}=(0,b.YC)();if(Kn(e)){const r=e.sizeMapping?(0,x.nq)(e.sizeMapping,e.sizes,[t,n]):e.sizes,{slotID:i,slotName:o}=e;return o?{slotID:i,slotName:o,sizes:r,slotParams:{}}:{slotID:i,sizes:r,slotParams:{}}}{const{mediaType:t,slotID:n,platform:r,offset:i,slotParams:o}=e;return{slotID:n,mediaType:t,platform:r,offset:i,slotParams:o}}},Qn=(e,t,n)=>{const[r]=e.filter((e=>{let{provider:t}=e;return"permutive"===t}));return r?.segments?{ortb2:{site:{ext:{data:{segments:n.map((e=>{let{label:t}=e;return t}))}}},user:{data:[(i=r.segments,{name:"permutive.com",segment:i.map((e=>({id:e}))).slice(0,t)})]}}}:{ortb2:{}};var i};async function Zn(e,t){const{getConfig:n,log:r,broker:i,pApstagInitialised:o,addPubcommonId:a}=e;r("requesting bids for:",t.map((e=>{let{slotID:t}=e;return t})).join(", "));const s=n("tia.bidKeys",["amznbid","amznbid_sp"]),d=n("amazon.priceLookup","/abe/a9/price"),l={};let c=t.map((e=>Yn(e))).filter((e=>e));function u(e){for(const t of s)if(e[t])return ht({url:`${d}/${e[t]}`});return 0}c.forEach((e=>{let{slotID:t}=e;(Gn[t]||(Gn[t]=[])).push(new Promise((e=>{l[t]=e})))})),c=await a(c),o.then((async()=>{r("fetching bids",c),i.invoke("fetch amazon bids",{slots:c}).then((async e=>{r("bids response for:",e.map((e=>e.slotID)),e);const{noBids:t,realBids:n}=e.reduce(((e,t)=>{let{noBids:n,realBids:r}=e;return function(e,t){if(t?.targeting?.amzndeals)return!0;for(const n of e){const e=t[n]&&!("1"===t[n]||"2"===t[n]),r=t.targeting&&t.targeting[n]&&!("1"===t.targeting[n]||"2"===t.targeting[n]);if(e||r)return!0}return!1}(s,t)?r.push(t):n.push(t),{realBids:r,noBids:n}}),{noBids:[],realBids:[]}),o=n?.[0]?.targeting?n.map((e=>{const{targeting:t,...n}=e;return{...n,...t}})):n;o?.[0]&&r("bids targeting unwrapped:",o);const a=(await Promise.all(o.map(u))).map(Number.parseFloat);await function(e,t){const{broker:n,log:r}=e;t.map((async e=>{try{const{cpm:t,bid:i}=e;if(t>=0){const o=Kn(e)?{...(0,T.Up)(e,["slotID","slotParams"]),sizes:e.sizes,requestSizes:e.sizes.map((e=>{let[t,n]=e;return`${t}x${n}`}))}:{...(0,T.Up)(e,["slotID","slotParams","mediaType","offset","platform"]),sizes:[],requestSizes:[]},a=Jn[i.slotID]||i.slotID,s=!!i.amzndeals,d={bidder:"tia",cpm:Math.floor(100*t),amazonDeal:s,...o},l="slotName"in e&&i.slotID||a;r("broadcast bid received",a,d,l),n.emit("bid",l,d)}else r.warn(`Invalid lookup value ${t} for code ${i.amznbid}`)}catch(t){r.error("error broadcasting slot:",e,t)}}))}({broker:i,log:r},o.map(((e,t)=>({...c.find((t=>{let{slotID:n}=t;return n===e.slotID})),cpm:a[t],bid:e})))),o.forEach(((e,t)=>{const n={cpm:a[t],bid:e};return r(`bid for ${e.slotID}:`,n),(0,l[e.slotID])(n)})),t.forEach((e=>(r(`no bid for ${e.slotID}`),(0,l[e.slotID])({}))))}))}))}async function er(e,t){let{pos:n,id:r}=t;const{log:i}=e;let o=Gn[r]&&Gn[r].shift();if(!o){if(i(`No available bid for '${r}', requesting new one`),Zn(e,[Xn[r]||Xn[n]]),!Gn[r])return i("no bid promise for id",r),Promise.resolve({});o=Gn[r].shift()}return i(`Taking bid for '${r}':`,o),o||Promise.resolve({})}function tr(e){let{pos:t,dfpPos:n,id:r,size:i,isTemplate:o}=e;const a=Xn[t]={...Xn[t],slotID:r,sizes:i};return Kn(a)&&o&&(a.slotName=n),a}async function nr(e,t){const{broker:n,log:r}=e;try{const e=(0,T.Qf)(await(0,P.tN)(1e3,n.invoke("get IrisTV tags",t),`Failed to get IrisTV tags for videoId ${t} in 1000ms`),{irisid:"iris_id",iriscat:"categories"});return e.iriscat=e.iriscat.join?.(","),e}catch(e){return r.error(e),{}}}function rr(e){if(!e||!e.bid)return{};const t=e?.bid?.helpers?.qsParams();return t?t.replace(/^&/,"").split("&").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{}):{}}(0,We.F3)("bidders.amazon",{disableIfNoAdsServable:!0,run:function(e){!async function(e){const{broker:t,getConfig:n,log:r}=e,i=n("slots.enabled",{}),o=n("amazon.supportedVideoPositions",["video","jwplayer","ibv"]),a=n("plugins.enabled").includes("irisTv"),s=n("slotDescriptions.initial",{}),d=Object.entries(i).filter((e=>{let[t,n]=e;return"immediate"===n.type})).map((e=>{let[t,n]=e;return t})),l=(0,T.Up)(s,d.filter((e=>s[e]&&s[e].earlyBidding)));!function(e){let{broker:t,getConfig:n}=e;const r=n("tia.timeout",.9*n("auction.maxTime",2e3));t.register("fetch amazon bids",(e=>{let{slots:t}=e;return new Promise((e=>{__webpack_require__.g.apstag.fetchBids({slots:t,timeout:r},(async t=>{e(t)}))}))}))}({broker:t,getConfig:n,log:r});const c=function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("bidders.amazon.url","//c.aps.amazon-adsystem.com/apstag.js"),a=n("amazon.deal",!0);let s;return rn()&&(r("In CCPA"),s=Zt("getUSPData")),t.invoke("load script",o,"apstag",{fetchpriority:"high"}).then((async e=>{if(!e)return void r.warn("Could not load apstag");let o=[],d=[];n("amazon.usePageTaxononmy")?[o,d]=await Promise.all([t.invokeAll("provide user bidder segments"),(0,P.tN)(n("amazon.millisWaitForPageTaxonomy",1e3),t.invokeAll("provide page taxonomy")).catch((()=>[]))]):o=await t.invokeAll("provide user bidder segments");const l={signals:Qn(o,n("amazon.ortb2.segmentsLimit",100),d.flatMap((e=>{let{taxonomy:t}=e;return t})).sort(((e,t)=>t.score-e.score))),pubID:"3065",adServer:"googletag",videoAdServer:"DFP",deals:a,params:{}};i.PageCriteria&&(l.params.si_section=i.adAreaId||i.PageCriteria.channel,l.params.subchannel=i.PageCriteria.subchannel);try{s&&(l.params.us_privacy=(await(0,P.tN)(n("amazon.millisWaitForUspData",1500),s)).uspString,r(l))}catch(e){r.warn("Error while calling getUSPData, us_privacy will be omitted",e)}r({initConfig:{...l}}),e.init(l)}))}(e),u={...e,pApstagInitialised:c};[{pos:"ibv",configItem:"amazonPreroll.ibv"},{pos:"jwplayer",configItem:"amazonPreroll.jwplayer"},{pos:"video.ap",configItem:"amazonPreroll.auto-play"},{pos:"video.ctp",configItem:"amazonPreroll"}].forEach((e=>{let{pos:t,configItem:r}=e;const{slotId:i}=n(r);i&&(Xn[t]={slotID:i,mediaType:"video",platform:"dmplayer",offset:0,slotParams:{}})})),Object.values(l).forEach((e=>{r("creating slot for",e.id,e.pos),t.emit("amazon banner slot created",tr(e))})),t.register("get tags",(async e=>{let{slot:n}=e;if(n.omitBidding)return void r(`bidding not supported for ${n.pos}, bailing`);const i=n.dfpPos||n.pos,o=n.id;Xn[i]?r("no slot created",n):(r("creating slot for",n.id,n.pos,n),t.emit("amazon banner slot created",tr(n))),Jn[o]=i;try{const e=await er(u,{id:o,pos:i}),t=rr(e);return r(`display params for ${i}`,t),(0,T.Im)(t)?{}:{type:"bid",pos:i,cpm:e.cpm&&Math.round(100*e.cpm)/100,bidderCode:"tia",tags:t}}catch(e){r.error(e)}})),t.on("prepare to refresh ads",(e=>{r("prepare to refresh ads",e);const t=e.map((e=>Xn[e]));r("preparing to refresh:",t),Zn(u,t)})),t.register("get video tags",(async t=>{let{slot:{pos:i},autoplay:s,platform:d="dmplayer",offset:l=0,videoId:c,auctionId:p}=t;if(i=n(`videoDescription.${i}.biddingProfile`,i),!o.includes(i))return;const h="video"===i?s?"video.ap":"video.ctp":i,f={...Xn[h],platform:d,offset:l,slotParams:c&&a?await nr(e,c):{}};r(`get video tags, auctionId: ${p}, offset: ${l}, slotId: ${f.slotID}`),r("video requestBidsFor",f),Zn(u,[f]);const g=await er(u,{pos:h,id:f.slotID});r(`bid response auctionId: ${p}, offset: ${l}, slotId: ${f.slotID}`,g);const m=rr(g);return r(`video params, auctionId: ${p}, offset: ${l}, slotId: ${f.slotID}`,m),(0,T.Im)(m)?{}:{type:"bid",pos:h,offset:l,auctionId:p,cpm:g.cpm&&Math.round(100*g.cpm)/100,bidderCode:"tia",tags:{cust_params:m}}})),function(e,t){const{log:n}=e,r=t.map((e=>[e,Xn[e]])).filter((e=>{let[t,n]=e;return n})).filter((e=>{let[t,n]=e;return!Gn[n.slotID]}));r.length?(n("early bidding for",r.map((e=>{let[t,n]=e;return`pos: ${t}, id: ${n.slotID}`}))),r.forEach((e=>{let[t,n]=e;Jn[n.slotID]=t})),Zn(e,r.map((e=>{let[t,n]=e;return n})))):n("no early bidding")}(u,Object.keys(l))}({...e,...Hn({...e,log:e.log.extend("pubcommon")})})},vendorIds:{gdpr:[793]},purposeIds:{gdpr:[1]}});const ir=(b.fX.debugBidder||"").split(",").map((e=>e.trim()))||[];function or(e){return e.match(/(\d+x\d+,?\s*)+$/g)[0].trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}const ar=(e,t)=>{const{width:n}=(0,b.YC)(),{adUnits:r={},wideSkiesAdUnits:i}=e(t,{adUnits:{}});let o=r;return n>=1580&&i&&(o={...r,...i}),o};function sr(e,t,n){const r=[],i=(t,i)=>r.push({code:t,bids:[{bidder:e,params:n(i,t)}],mediaTypes:{banner:{sizes:or(i)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>i(e,t))):i(e,n)})),r}function dr(e,t,n){const r=[],i=(t,i)=>r.push({code:t,bids:[{bidder:e,params:n(i.split(" ").filter((e=>e)),t)}],mediaTypes:{banner:{sizes:or(i)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>i(e,t.trim()))):i(e,n)})),r}function lr(e){if(function(e){const t=t=>{throw new Error(`providePrebidDisplayConfig error for '${e.bidder}': ${t}`)};("object"!=typeof e||Array.isArray(e))&&t("`config` must be an object."),["broker","getConfig","configKeys","bidder"].forEach((n=>{e[n]||t(`'config' must contain mandatory key '${n}'.`)}));const n={adapterName:n=>{"string"!=typeof n&&t("`adapterName` must be a string."),e.aliasedName||t("with `adapterName`, `aliasedName` is mandatory.")},aliasedName:n=>{"string"!=typeof n&&t("`aliasedName` must be a string."),e.adapterName||t("with `aliasedName`, `adapterName` is mandatory.")},broker:e=>{e instanceof y.eC||t("`broker` must be an instance of the class `Broker`.")},getConfig:e=>{"function"!=typeof e&&t("`getConfig` error: must be a function.")},configKeys:e=>{("string"!=typeof e&&!Array.isArray(e)||Array.isArray(e)&&e.find((e=>"string"!=typeof e)))&&t("`configKeys` must be a string or an array of strings.")},configKey:e=>{"string"!=typeof e&&t("`configKey` must be a string.")},bidder:e=>{"string"!=typeof e&&t("`bidder` must be a string.")},chance:e=>{isNaN(e)&&t("`chance` must be a number.")},getBidsParams:e=>{"function"!=typeof e&&t("`getBidParams` must be a function.")},bidderSettings:e=>{const n="`bidderSettings` must be an Object or an array of Objects { key : <String>, val: <Function> }.";"object"==typeof e||Array.isArray(e)||t(n);const r=e=>{const r=["key","val"];Object.entries(e).forEach((e=>{let[i,o]=e;r.find((e=>e===i))||t(n),"key"===i&&"string"!=typeof o&&t(n),"val"===i&&"function"!=typeof o&&t(n)}))};"object"!=typeof e||Array.isArray(e)||r(e),Array.isArray(e)&&e.forEach((e=>r(e)))}};Object.entries(e).forEach((e=>{let[t,r]=e;n[t]&&n[t](r)}))}(e),e.chance&&e.chance<=Math.random())return;const{broker:t,getConfig:n,configKeys:r,bidder:i,paramsPerSize:o,getBidsParams:a}=e,s=o?cr:dr;let d=null;const l={};if(Array.isArray(r)){if(d=[],d=r.map((e=>(l[e]=ar(n,e),d.concat(s(i,l[e],a))))),!d.length)return!1}else{if(l[r]=ar(n,r),(0,T.Im)(l[r]))return!1;d=s(i,l[r],a)}return function(e,t,n,r){const{bidder:i}=t;ir.find((e=>"*"===e||e===i))&&(console.log(`--------------\x3e ${i} configs <--------------`),[...t.configKeys||t.configKey].forEach((t=>{console.log(`-> ${t}:`,e(t))})),console.log(`--------------\x3e ${i} adUnits <--------------`),Object.entries(n).forEach((e=>{let[t,n]=e;console.log(`-> ${t}:`,n)})),console.log(`--------------\x3e ${i} prebid config <--------------`),console.log("->",r))}(n,e,l,d),t.register("provide prebid adUnits",(()=>d)),function(e){let{adapterName:t,aliasedName:n,broker:r}=e;t&&n&&r.register("provide bidder alias",(()=>({adapterName:t,aliasedName:n})))}(e),function(e){let{broker:t,bidderSettings:n,bidder:r,adapterName:i,aliasedName:o}=e;if(n){const e=i&&o||r;t.register("prebid reduce bidderSettings",(t=>(t[e]=t[e]||{},t[e].adserverTargeting=t[e].adserverTargeting||[],Array.isArray(n)?t[e].adserverTargeting.concat(n):t[e].adserverTargeting.push(n),t)))}}(e),function(e){let{bidder:t,asyncUpdate:n,broker:r}=e;n&&r.emit("prebid config async update",{[t]:n})}(e),!0}function cr(e,t,n){const r=[],i=(t,i)=>{const o=or(i);r.push({code:t,bids:o.map((r=>({bidder:e,params:n(i.split(" ").filter((e=>e)),r,t)}))),mediaTypes:{banner:{sizes:o}}})};return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>i(e,t))):i(e,n)})),r}(0,We.F3)("bidders.appnexusOutstream",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},run(e){let{broker:t,getConfig:n,queryParams:r}=e;const i=r["mol.ads.appNexus.debug"],o=r.testmode,a={area:[__webpack_require__.g.adAreaId],...o?{testmode:o.split(",")}:void 0},{adUnits:s}=n("plugins.bidders.appnexus.outstream",{adUnits:[]});(0,T.Im)(s)||t.register("provide prebid adUnits",(()=>function(e,t,n,r){const o=[],s=(t,n)=>{return o.push({code:t,bids:[{bidder:"appnexus",params:(r=n.split(" ").filter((e=>e)),s=t,{placementId:r[0],keywords:{...i?{pos:s}:void 0,...a}})}],mediaTypes:{video:{...e("plugins.slots.outstream.default.mediaTypes.video",{}),playerSize:or(n)[0]}}});var r,s};return Object.keys(n).forEach((e=>{const t=n[e];Array.isArray(t)?t.forEach((t=>s(e,t.trim()))):s(e,t)})),o}(n,0,s)))}});const ur={admantx:e=>({"ias-bsp":e.map(String)})};function pr(e){return e.reduce(((e,t)=>{let[n,r]=t;const i=ur[n];return i?{...e,...i(r)}:e}),{})}async function hr(e){const t=await async function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.appnexus.dependenciesTimeout",2e3),o=n("plugins.bidders.appnexus.dmps",["admantx"]);r("providing prebid adUnits");const a=pr((o.length?await Promise.all(o.map((async e=>{const n=(await t.invokeAllWithin("dmp",i,e))[0];return n&&[e,n]}))):[]).filter((e=>!!e)));return r("dmpData",a),a}(e);return e.win.adAreaId&&(t.area=e.win.adAreaId),e.pageCriteria?.articleId&&(t.article=e.pageCriteria.articleId),t}(0,We.F3)("bidders.appnexus",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r,pageCriteria:i,win:o}=e,{adUnits:a,wideSkiesAdUnits:s}=n("plugins.bidders.appnexus.display",{adUnits:[]});if(!(0,T.Im)(a)){const e=hr({broker:t,getConfig:n,log:r,pageCriteria:i,win:o});t.register("provide prebid adUnits",(async()=>{const t=await e;gr&&s&&(a={...a,...s});const n=Object.entries(a).map((e=>{let[n,r]=e;return(Array.isArray(r)?r:[r]).map((e=>vr(t,n,e)))})).flat();return r("adUnits",n),n}))}},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const{width:fr}=(0,b.YC)(),gr=fr>1580,mr=e=>e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e))))),vr=(e,t,n)=>({code:t,bids:[{bidder:"appnexus",params:{keywords:e,placementId:n.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:mr(n)}}});(0,We.F3)("bidders.appnexusSkin",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:async function(e){let{broker:t,getConfig:n,log:r,pageCriteria:i,win:o}=e;const a=n("plugins.appnexus.minWidth",1224),s=n("plugins.appnexus.skin",yr);if(r("config:",{minWidth:a,adUnits:s}),__webpack_require__.g.innerWidth<a)return void r("bailing, viewport width too small:",__webpack_require__.g.innerWidth);const d=s.map((e=>{let{bids:t}=e;return t.map((e=>{let{params:{placementId:t}}=e;return t}))})).flat();r("known skins:",d);const l=new Set(d),c=hr({broker:t,getConfig:n,log:r,pageCriteria:i,win:o});t.register("provide prebid adUnits",(async()=>{const e=await c;return s.map((t=>({...t,bids:t.bids.map((t=>(t.params.keywords=e,t)))})))}));const u={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"appnexus"===t&&n.forEach((e=>{let{bidId:t,params:{placementId:n}}=e;u[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.appnexus||(e.appnexus={}),e.appnexus.adserverTargeting||(e.appnexus.adserverTargeting=[]),e.appnexus.adserverTargeting.push({key:"hb_skin",val:e=>{const t=u[e.requestId];return l.has(t)}}),e)))},vendorIds:{gdpr:[32]}});const yr=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"appnexus",params:{placementId:19451012}}]}];(0,We.F3)("bidders.groupm.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Math.random(),o=n("plugins.bidders.groupm.v3.chance",.1);if(r(`groupm chance: ${i}, 'request? ${i<o}`),o<=i)return void r("chance condition not met, bailing");const a=Object.entries(n("plugins.bidders.groupm.v3.adUnits",{})).map((e=>{let[t,{placementId:r,sizes:i}]=e;return{code:t,bids:[{bidder:"groupm",params:{placementId:r.toString()}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(a),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"groupm"}))),t.register("provide prebid adUnits",(()=>a)),t.register("prebid reduce bidderSettings",(e=>(e.groupm||(e.groupm={}),e.groupm.adserverTargeting||(e.groupm.adserverTargeting=[]),e.groupm.adserverTargeting.push({key:"hb_deal_groupm"}),e)))},vendorIds:{gdpr:[98]}}),(0,We.F3)("bidders.collectiveImprove",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.collectiveImprove.display",{adUnits:{}});if((0,T.Im)(r))return;const i=sr("collectiveImprove",r,(e=>({placementId:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>i)),t.register("provide bidder alias",(()=>({adapterName:"improvedigital",aliasedName:"collectiveImprove"}))),t.register("prebid reduce bidderSettings",(e=>(e.collectiveImprove=e.collectiveImprove||{},e.collectiveImprove.adserverTargeting=e.collectiveImprove.adserverTargeting||[],e.collectiveImprove.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[253]}}),(0,We.F3)("bidders.improveDisplay",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("bidders.improveDisplay.publisherId",1906),o=n("plugins.bidders.improveDisplay",[]).map((e=>({code:e.code,mediaTypes:{banner:{sizes:e.sizes||(0,ke.get)(e.code)?.size}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId,publisherId:i}}]})));r.extend("adUnits")(o),t.register("provide prebid adUnits",(()=>o))}}),(0,We.F3)("bidders.improveSkins",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("bidders.improveSkins.publisherId",1906),o=n("plugins.bidders.improveSkins",[]).map((e=>({code:e.code,mediaTypes:{banner:{sizes:e.sizes||(0,ke.get)(e.code)?.size}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId,publisherId:i}}]})));r.extend("adUnits")(o),t.register("provide prebid adUnits",(()=>o)),t.register("prebid reduce bidderSettings",(e=>({...e,improvedigital:{...e.improvedigital||{},adserverTargeting:[...e.improvedigital?.adserverTargeting||[],{key:"hb_skin",val:()=>!0}]}})))}}),(0,We.F3)("bidders.ix.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.ix.v2.display.adUnits",{})).map((e=>{let[t,{siteId:r,sizes:i}]=e;return{code:t,bids:[{bidder:"ix",params:{siteId:r}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(i),t.register("provide prebid adUnits",(()=>i))},vendorIds:{gdpr:[10]}}),(0,We.F3)("bidders.justPremium",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.justpremium.display",{adUnits:{}});if((0,T.Im)(r))return;const i=sr("justpremium",r,(e=>({zone:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>i)),t.register("prebid reduce bidderSettings",(e=>(e.justpremium=e.justpremium||{},e.justpremium.adserverTargeting=e.justpremium.adserverTargeting||[],e.justpremium.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[62]}}),(0,We.F3)("bidders.kargo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.kargo.display",{adUnits:[]}),i=e=>({code:e,bids:[{bidder:"kargo",params:{placementId:r[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:r[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(t.invoke("load script","https://storage.cloud.kargo.com/ad/network/klick/klick-dailymail.js",null,{},(()=>!0)),!(0,T.Im)(r)){const e=Object.keys(r).map(i);t.register("provide prebid adUnits",(()=>e)),t.register("prebid reduce bidderSettings",(e=>(e.kargo||(e.kargo={}),e.kargo.storageAllowed=!0,e)))}},vendorIds:{gdpr:[972]}}),(0,We.F3)("bidders.mediagrid.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.mediagrid.v2.display.adUnits",{})).map((e=>{let[t,{sizes:r,uid:i}]=e;return{code:t,bids:[{bidder:"grid",params:{uid:i}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(i),t.register("provide prebid adUnits",(()=>i))},vendorIds:{gdpr:[686]}});const br=e=>Array.isArray(e)&&2===e.length;class _r{constructor(e){this.adsDescriptions=e;const{width:t,height:n}=(0,b.YC)();this.browserWidth=t,this.browserHeight=n}getSizes(e){const t=this.adsDescriptions[e];if(t)return t.sizeMapping?(0,x.nq)(t.sizeMapping,t.size,[this.browserWidth,this.browserHeight]):t.size.filter(br)}}const wr=MobileUtils.isMobile()?{sticky_banner:1420432285}:{billboard:1420432282,sky_right_top:1420432283,sky_left_top:1420432284};(0,We.F3)("bidders.ozone",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[524]},run(e){let{broker:t,getConfig:n,pageCriteria:r={},log:i}=e;const o=new _r(n("slotDescriptions.initial",{})),a=n("plugins.bidders.ozone.configVersion",!1),s=n("plugins.bidders.ozone.publisherId","OZONEDMGT002"),d=n(a?`plugins.bidders.ozone.v${a}.siteId`:"plugins.bidders.ozone.siteId","4204204250"),l=n("plugins.bidders.ozone.smartBidstream.enabled",!1),c=`${Math.floor(100*Math.random())}`;l&&(i("applying testgroup",c),t.emit("set page level targeting",{testgroup:c}));const u=Object.entries(n(a?`plugins.bidders.ozone.v${a}.display.adUnits`:"plugins.bidders.ozone.display.adUnits",wr)).map((e=>{let[t,r]=e;const i={banner:{sizes:n(`slotDescription.${t}.size`,o.getSizes(t))}},a={placementId:r,publisherId:s,siteId:`${d}`};return{code:t,mediaTypes:i,bids:[{bidder:"ozone",params:l?{...a,customData:[{targeting:{testgroup:c}}]}:{...a}}]}}));t.register("provide prebid adUnits",(()=>(i.info("adUnits",u),u))),t.register("provide prebid bidder config",(()=>[["ozone"],{ortb2:{site:{page:"article"===r.pageType?"art":"hp"}}}]))}}),(0,We.F3)("bidders.pubmatic",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const{width:o}=(0,b.YC)(),a=o>1580;let{adUnits:s,wideSkiesAdUnits:d,publisherId:l}=n("plugins.bidders.pubmatic.display.v2",{adUnits:{},wideSkiesAdUnits:[]});if(a&&d&&(s={...s,...d}),r.extend("ad units")(s),(0,T.Im)(s))return;const c=n("plugins.bidders.pubmatic.display.v2.dependenciesTimeout",2e3),u=t.invokeAll({message:["dmp","admantx"],timeout:c});t.register("provide prebid adUnits",(async()=>{const e=(await u)[0];r("ias-bsp",e);const t=[["area",i.adAreaId],["ias-bsp",e],["article",i.pagemeta?.articleId]].reduce(((e,t)=>{let[n,r]=t;const i=Array.isArray(r)&&r.length||r?`${n}=${r}`:"";return i?e.length?`${e}|${i}`:`${i}`:e}),""),n=sr("pubmatic",s,(e=>({publisherId:`${l}`,adSlot:e.split(" ")[0],dctr:t})));return r("adUnits",n),n})),t.register("prebid reduce bidderSettings",(e=>{const t=n("plugins.bidders.pubmatic.display.netMultiplier",.93);return e.pubmatic||(e.pubmatic={}),e.pubmatic.bidCpmAdjustment=(e,n)=>e*t,e}))}}),(0,We.F3)("bidders.rhythmOne",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;r.warn("DEPRECATED: use unruly plugin");const i=n("plugins.bidders.rhythmOne.adUnits",{}),o=new _r(n("slotDescriptions.initial",{})),a=Object.entries(i).map((e=>{let[t,{placementId:n,sizes:i}]=e;const a=i||o.getSizes(t);if(a)return{code:t,sizes:a,mediaTypes:{banner:{sizes:a}},bids:[{bidder:"rhythmone",params:{placementId:n}}]};r(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>a))},vendorIds:{gdpr:[36]}}),(0,We.F3)("bidders.rubiMM2",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{getConfig:t,broker:n,log:r}=e;const{width:i}=(0,b.YC)(),o=i>1580;let{accountId:a,siteId:s,adUnits:d,wideSkiesAdUnits:l}=t("plugins.bidders.rubiMM2.display",{adUnits:{},wideSkiesAdUnits:[]});if(r("adUnits",d),(0,T.Im)(d))return;o&&l&&(d={...d,...l});const c=sr("rubi_mm2",d,(e=>{const t={area:[__webpack_require__.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:s.toString(),accountId:a.toString()}}));r("transformed",c),n.register("provide prebid adUnits",(()=>c)),n.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm2"}))),n.emit("prebid config async update",{rubi_mm2:{singleRequest:!0}})},vendorIds:{gdpr:[52]}}),(0,We.F3)("bidders.sharethrough.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.sharethrough.v2.display.adUnits",{}));r("adUnitConfig",i);const o=i.filter((e=>{let[t]=e;return n(`slotDescriptions.initial.${t}`)})).map((e=>{let[t,{pkey:r,sizes:i}]=e;return{code:t,bids:[{bidder:"sharethrough",params:{pkey:r}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o));const a=o.reduce(((e,t)=>{let{code:n,mediaTypes:{banner:{sizes:r}}}=t;return{...e,[n]:Sr(r).join("x")}}),{});r("largestSizeForPos",a),t.register("prebid reduce bidderSettings",(e=>(e.sharethrough||(e.sharethrough={}),e.sharethrough.adserverTargeting||(e.sharethrough.adserverTargeting=[]),e.sharethrough.adserverTargeting.push({key:"hb_size",val:e=>a?.[e.adUnitCode]||e.size}),e)))},vendorIds:{gdpr:[80]}});const Sr=e=>e.sort(((e,t)=>{let[n,r]=e,[i,o]=t;return i*o-n*r}))[0];(0,We.F3)("bidders.smartAdServer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.smartAdServer.adUnits",{}),o=new _r(n("slotDescriptions.initial",{})),a=n("plugins.bidders.smartAdServer.siteId",395440),s=n("plugins.bidders.smartAdServer.pageId",1352205),d=Object.entries(i).map((e=>{let[t,{formatId:n,sizes:i}]=e;const d=i||o.getSizes(t);if(d)return{code:t,sizes:d,mediaTypes:{banner:{sizes:d}},bids:[{bidder:"smartadserver",params:{formatId:n,pageId:s,siteId:a}}]};r(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>d))},vendorIds:{gdpr:[45]}}),(0,We.F3)("teads-cookieless",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[132]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.teads.tagId","PUB_7442");r("tagId:",i),__webpack_require__.g.teads_analytics=__webpack_require__.g.teads_analytics||{},__webpack_require__.g.teads_analytics.analytics_tag_id=i,__webpack_require__.g.teads_analytics.share=__webpack_require__.g.teads_analytics.share||function(){const e=__webpack_require__.g.teads_analytics.shared_data=__webpack_require__.g.teads_analytics.shared_data||[];r("share current:",e),r("share adding:",arguments),e.push(arguments)},t.emit("import script","//a.teads.tv/analytics/tag.js",{async:!0})}});const{width:Tr}=(0,b.YC)(),Ir=Tr>1580;(0,We.F3)("bidders.rubicon",{vendorIds:{gdpr:[52]},purposeIds:{gdpr:[1]},disableIfNoAdsServable:!0,run:async function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const{accountId:o,siteId:a,adUnits:s,wideSkiesAdUnits:d,atf:l}=n("plugins.bidders.rubicon.display.v2",{adUnits:{},wideSkiesAdUnits:{},atf:[]}),c=new Set(l);if((0,T.Im)(s))return;const u=Ir&&d?{...s,...d}:s,p=n("plugins.bidders.rubicon.display.v2.dependenciesTimeout",2e3),h=t.invokeAll({message:["dmp","admantx"],timeout:p});t.register("provide prebid adUnits",(async()=>{const e=(await h)[0];r("ias-bsp",e);const t=(i.adAreaId?[["area",JSON.stringify([i.adAreaId])],["ias-bsp",e]]:[["ias-bsp",e]]).reduce(((e,t)=>{let[n,r]=t;return r?{...e,[n]:r}:e}),{}),n=sr("rubicon",u,((e,n)=>{const r={zoneId:e.split(" ")[0],inventory:t,siteId:a.toString(),accountId:o.toString()};return c.has(n)&&(r.position="atf"),r}));return r("adUnits",n),n})),t.emit("prebid config async update",{rubicon:{singleRequest:!0}})}});const{width:kr}=(0,b.YC)(),Ar=kr>1580;function Er(e){let{broker:t,getConfig:n}=e,{adUnits:r,wideSkiesAdUnits:i}=n("plugins.bidders.adyoulike.display",{adUnits:[]});const o=e=>({code:e,bids:[{bidder:"adyoulike",params:{placement:r[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:r[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(Ar&&i&&(r={...r,...i}),!(0,T.Im)(r)){const e=Object.keys(r).map(o);t.register("provide prebid adUnits",(()=>e))}}function Cr(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.verizon.display",{}),i=r.adUnits&&Object.entries(r.adUnits).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"brightroll",params:{publisher:"dailymail"}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));i&&i.length>0&&t.register("provide prebid adUnits",(()=>i))}Er.vendorIds={gdpr:[259]},Er.purposeIds={gdpr:[1]},Er.disableIfNoAdsServable=!0,Cr.vendorIds={gdpr:[25]},Cr.purposeIds={gdpr:[1]},Cr.disableIfNoAdsServable=!0;const xr=(e,t)=>({code:e,bids:[{bidder:"collective564",params:{placementId:t.split(" ")[0].trim(),usePaymentRule:!0}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});function Or(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.collective564.display",{adUnits:{}}).adUnits,i=[];(0,T.Im)(r)||(Object.keys(r).map((e=>{i.push(xr(e,r[e]))})),t.register("provide prebid adUnits",(()=>i)),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"collective564"}))),t.register("prebid reduce bidderSettings",(e=>(e.collective564=e.collective564||{},e.collective564.adserverTargeting=e.collective564.adserverTargeting||[],e.collective564.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e))))}function Pr(e){let{broker:t,getConfig:n}=e;if(n("plugins.bidders.groupm.skin.chance",.1)<=Math.random())return;const r=n("plugins.bidders.groupm.skin.adUnits",[]);r.length&&t.register("provide prebid adUnits",(()=>r))}function Dr(e){let{broker:t,getConfig:n}=e;const{adUnits:r,delDomain:i}=n("plugins.bidders.openx.display.v2",{adUnits:[]}),o=e=>({code:e,bids:[{bidder:"openx",params:{unit:r[e].split(" ")[0].trim(),delDomain:i}}],mediaTypes:{banner:{sizes:r[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(i&&!(0,T.Im)(r)){const e=Object.keys(r).map(o);t.register("provide prebid adUnits",(()=>e))}}function Rr(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.pxyz.display",{adUnits:{}}),i=(e,t)=>({code:e,bids:[{bidder:"pxyz",params:{placementId:t.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(!(0,T.Im)(r)){const e=[];Object.entries(r).map((t=>{let[n,r]=t;"string"==typeof r?e.push(i(n,r)):r.forEach((t=>{e.push(i(n,t))}))})),t.register("provide prebid adUnits",(()=>e))}}Or.vendorIds={gdpr:[179]},Or.purposeIds={gdpr:[1]},Or.disableIfNoAdsServable=!0,Pr.vendorIds={gdpr:[98]},Pr.purposeIds={gdpr:[1]},Pr.disableIfNoAdsServable=!0,Dr.vendorIds={gdpr:[69]},Dr.purposeIds={gdpr:[1]},Dr.disableIfNoAdsServable=!0,Rr.vendorIds={gdpr:[490]},Rr.purposeIds={gdpr:[1]},Rr.disableIfNoAdsServable=!0;const jr=e=>{for(const t of e)for(const e of t.bids)"rubicon"===e.bidder&&((0,T.ns)(["params","inventory"],e).area=[__webpack_require__.g.adAreaId])},Mr=e=>e.adUnits.reduce(((e,t)=>(t.bids&&t.bids.forEach((t=>{t.params&&t.params.zoneId&&e.push(t.params.zoneId)})),e)),[]);function Nr(e){let{broker:t,getConfig:n}=e,r=new Set;const i=n("plugins.rubicon.skin",{});i.adUnits&&i.adUnits.length&&(jr(i.adUnits),r=new Set(Mr(i)),t.register("provide prebid adUnits",(()=>i.adUnits)));const o={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"rubicon"===t&&n.forEach((e=>{let{bidId:t,params:{zoneId:n}}=e;o[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_skin",val:e=>{const t=o[e.requestId];return r.has(t)}}),e)))}function Ur(e){let{getConfig:t,broker:n}=e;const{width:r}=(0,b.YC)(),i=r>1580;let{accountId:o,siteId:a,adUnits:s,wideSkiesAdUnits:d}=t("plugins.bidders.rubiMM.display",{adUnits:{},wideSkiesAdUnits:[]});if((0,T.Im)(s))return;i&&d&&(s={...s,...d});const l=sr("rubi_mm",s,(e=>{const t={area:[__webpack_require__.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:a.toString(),accountId:o.toString()}}));n.register("provide prebid adUnits",(()=>l)),n.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),n.emit("prebid config async update",{rubi_mm:{singleRequest:!0}})}function Lr(e){let{getConfig:t,broker:n}=e;const{accountId:r,siteId:i}=t("plugins.bidders.rubicon.display.v2",{});lr({broker:n,getConfig:t,bidder:"rubi_ttd",adapterName:"rubicon",aliasedName:"rubi_ttd",getBidsParams:e=>{let[t]=e;return{zoneId:t,inventory:{area:[__webpack_require__.g.adAreaId]},siteId:`${i}`,accountId:`${r}`}},asyncUpdate:{singleRequest:!0}})}function Br(e){let{broker:t,getConfig:n}=e;const{adUnits:r}=n("plugins.bidders.teads.display",{adUnits:{}});t.register("provide prebid adUnits",(()=>sr("teads",r,(e=>{const t=e.split(/[ ]+/);return{placementId:t[0],pageId:t[1]}}))))}function qr(e){let{broker:t,getConfig:n}=e;lr({broker:t,getConfig:n,configKeys:"plugins.bidders.triplelift.display",bidder:"triplelift",getBidsParams:e=>{let[t]=e;return{inventoryCode:t}}})}Nr.vendorIds={gdpr:[52]},Nr.purposeIds={gdpr:[1]},Nr.disableIfNoAdsServable=!0,Ur.vendorIds={gdpr:[79]},Ur.purposeIds={gdpr:[1]},Ur.disableIfNoAdsServable=!0,Lr.vendorIds={gdpr:[21]},Lr.purposeIds={gdpr:[1]},Lr.disableIfNoAdsServable=!0,Br.vendorIds={gdpr:[132]},Br.purposeIds={gdpr:[1]},Br.disableIfNoAdsServable=!0,qr.vendorIds={gdpr:[28]},qr.purposeIds={gdpr:[1]},qr.disableIfNoAdsServable=!0,(0,We.F3)("bidders.adform.video",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.adform.adxDomain","adx.adform.net");t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.adform.video.${e}`);if(r.info("code",e),r.info("mid",t),!t)return r.warn(`no mid found for pos ${e}`),{};const o={bids:[{bidder:"adf",params:{adxDomain:i,mid:t}}]};return r.info("providing ad unit",o),o}))},purposeIds:{gdpr:[1]},vendorIds:{gdpr:[50]}}),(0,We.F3)("bidders.appnexusVideo",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.appnexus.dependenciesTimeout",2e3),o=n("plugins.bidders.appnexus.dmps",["admantx"]),a=n("plugins.bidders.appnexus.video",{adUnits:{}});t.register("provide video adUnits",(async(e,n)=>{if(!a.adUnits?.[e])return;const s=pr((o.length?await Promise.all(o.map((async e=>{const n=(await t.invokeAll({message:["dmp",e],timeout:i}))[0];return n&&[e,n]}))):[]).filter((e=>e)));r("dmpData",s);const d={area:[__webpack_require__.g.adAreaId],...s},l=Fr(a,d,e,n);return r("adUnits",l),l}))},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const Fr=(e,t,n,r)=>{let i="";if(e.adUnits[n]&&"object"==typeof e.adUnits[n]&&e.adUnits[n][r?"autoplay":"ctp"])i=e.adUnits[n][r?"autoplay":"ctp"];else{if(!e.adUnits[n]||"string"!=typeof e.adUnits[n])return{};i=e.adUnits[n]}const o=i.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"appnexus",params:{accountId:parseInt(o[0]),placementId:parseInt(o[1]),keywords:t,video:{skipable:!1,playback_methods:r?["auto_play_sound_off"]:["click_to_play"]}}}]}};(0,We.F3)("bidders.criteo.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.criteo.video.adUnits",{}),o=n("plugins.bidders.criteo.video.sendPublisherSubId",!1),a={skip:1},s=n("plugins.bidders.criteo.video.mediaTypes",{});r({adUnits:i}),t.register("provide video adUnits",(async e=>{const t=i[e],d=n(Vr[e]),l=s[e]||{};if(t){const e={...d.mediaTypes?.video,...a,...l},n={code:d.code,mediaTypes:{video:e},bids:[{bidder:"criteo",params:{zoneId:t,video:e}}]};return o&&(n.bids[0].params.publisherSubId=d.code),r({videoAdUnit:n}),n}}))},vendorIds:{gdpr:[91]}});const Vr={hero:"plugins.slots.video.v2",ibv:"plugins.slots.ibv",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,We.F3)("bidders.improveVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("bidders.improveVideo.publisherId",1906);t.register("provide video adUnits",((e,t)=>{const o="video"===e?t?"video.autoplay":"video.ctp":e,a=n(`plugins.bidders.improveVideo.${o}`),[s,d]=n(`plugins.slots.${e}.v2`)?.mediaTypes?.video?.playerSize||[];return r({configCode:o,placementId:a,w:s,h:d}),a?{bids:[{bidder:"improvedigital",params:{placementId:a,publisherId:i,size:{w:s,h:d}}}]}:{}}))}});const zr={hero:"plugins.slots.video.v2",ibv:"plugins.slots.ibv",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,We.F3)("bidders.ixVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[10]},run(e){let{broker:t,getConfig:n,queryParams:r}=e;const i=n("plugins.bidders.ix.video.adUnits",[]),o=n("plugins.bidders.ix.video.default",{}),{mimes:a=["video/mp4","application/javascript"],minduration:s=0}=o;t.register("provide video adUnits",(async(e,t)=>{r.ix_sandbox&&pbjs.setConfig({ix:{sandboxMode:!0}});try{const r=i[e]&&"object"==typeof i[e]?i[e][t?"autoplay":"ctp"]:i[e];if(!r)return;const o=n(`${zr[e]}.mediaTypes.video`,{}),{maxduration:d=61,protocols:l=[1,2,3,4,5,6],api:c=[1,2],playerSize:u=[636,358]}=o,p=(0,x.w1)(u);return{bids:[{bidder:"ix",params:{siteId:r,size:u,video:{startdelay:0,mimes:a,minduration:s,maxduration:d,protocols:l,api:c,playerSize:u,w:p[0],h:p[1]}}}]}}catch(e){console.log("[IX Video] transform error ",e)}}))}});const $r={hero:"plugins.slots.video.v2",ibv:"plugins.slots.ibv",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,We.F3)("bidders.oathVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.oath.video",{pubId:"MailOnline"}),o=n("plugins.bidders.oath.video.supportedPositions",["jwplayer","video"]);t.register("provide video adUnits",(e=>{if(!o.includes(e))return;const t=n($r[e]);if(2===t?.mediaTypes?.video?.playerSize?.length&&t.mediaTypes.video.context){const[e,n]=t.mediaTypes.video.playerSize;return{bids:[{bidder:"oneVideo",params:{pubId:i.pubId,video:{playerWidth:e,playerHeight:n,mimes:["video/mp4","application/javascript"],protocols:[1,2,3,4,5,6],api:[1,2],delivery:[2]}}}]}}r.warn(`Video adUnit misconfigured for pos: ${e}`,t)}))}}),(0,We.F3)("bidders.rhythmOne.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;r.warn("DEPRECATED: use unruly plugin"),t.register("provide video adUnits",(async(e,t)=>{const r=n(`plugins.bidders.rhythmOne.video.adUnits.${"video"===e?t?"autoplay":"ctp":e}`);if(r)return{bids:[{bidder:"rhythmone",params:{placementId:r}}]}}))},vendorIds:{gdpr:[36]}}),(0,We.F3)("bidders.video.rubiMM",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.rubiMM.video.accountId"),o={area:[__webpack_require__.g.adAreaId]};i?(t.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),t.register("prebid reduce bidderSettings",(e=>(e.rubi_mm={adserverTargeting:[{key:"hb_vast",val:e=>e.impression_id}]},e))),t.register("provide video adUnits",(function(e,t){const a="video"===e?t?"video.autoplay":"video.ctp":e,s=n(`plugins.bidders.rubiMM.video.adUnits.${a}`);if(!s)return r.warn(`config for ${a} does not exist`),{};const[d,l]=s.split(/\s+/,2);if(!d)return r.warn(`No site id for ${a}`),{};if(!l)return r.warn(`No zone id for ${a}`),{};const c=n(Wr[e]),u={language:"en",playerWidth:c.mediaTypes.video.playerSize[0],playerHeight:c.mediaTypes.video.playerSize[1],size_id:201},p=[{bidder:"rubi_mm",params:{accountId:i,inventory:o,siteId:Number(d),zoneId:Number(l),video:u}}];return r("providing auction info",p),{bids:p}}))):r.warn("no account id set")},vendorIds:{gdpr:[52]}});const Wr={hero:"plugins.slots.video.v2",ibv:"plugins.slots.ibv",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"},Hr={hero:"plugins.slots.video.v2",ibv:"plugins.slots.ibv",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,We.F3)("bidders.rubiconVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[52]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.bidders.rubicon.video.dependenciesTimeout",2e3),a=t.invokeAll({message:["dmp","admantx"],timeout:o}),s=new Promise((async e=>{const t=(await a)[0];r("ias-bsp",t),e((i.adAreaId?[["area",[i.adAreaId]],["ias-bsp",t]]:[["ias-bsp",t]]).reduce(((e,t)=>{let[n,r]=t;return r?{...e,[n]:r}:e}),{}))}));t.register("provide video adUnits",(async(e,t)=>{const r=(async(e,t)=>{const r=n("plugins.bidders.rubicon.video",{adUnits:{}}),i=n(Hr[e]);let o="";const a=await s;if(r.adUnits[e]&&"object"==typeof r.adUnits[e]&&r.adUnits[e][t?"autoplay":"ctp"])o=r.adUnits[e][t?"autoplay":"ctp"];else{if(!r.adUnits[e]||"string"!=typeof r.adUnits[e])return{};o=r.adUnits[e]}const d=o.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"rubicon",params:{accountId:r.accountId,siteId:parseInt(d[0]),zoneId:parseInt(d[1]),inventory:a,video:{language:"en",playerWidth:i.mediaTypes.video.playerSize[0],playerHeight:i.mediaTypes.video.playerSize[1],size_id:201}}}]}})(e,t);return r})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_vast",val:e=>e.impression_id}),e)))}}),(0,We.F3)("bidders.smartAdServer.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.smartAdServer.siteId",395440),i=n("plugins.bidders.smartAdServer.pageId",1352205),o=n("plugins.bidders.smartAdServer.video.formatId",93390),a=n("plugins.bidders.smartAdServer.video.supportedPositions",["video","jwplayer"]),s={bids:[{bidder:"smartadserver",params:{formatId:o,pageId:i,siteId:r}}]};t.register("provide video adUnits",(async e=>{if(a.includes(e))return s}))},vendorIds:{gdpr:[45]}}),(0,We.F3)("bidders.tripleliftVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[28]},run(e){let{broker:t,getConfig:n}=e;const r=n("plugins.bidders.triplelift.video.adUnits",{jwplayer:"dailymail_prebid_commercial_player_ctp_intstream",video:{ctp:"dailymail_prebid_editorial_player_ctp_intstream",autoplay:"dailymail_prebid_editorial_player_ap_intstream"}}),i=Object.keys(r);t.register("provide video adUnits",((e,t)=>{if(i.includes(e))return{bids:[{bidder:"triplelift",params:{inventoryCode:r[e]&&"object"==typeof r[e]?r[e][t?"autoplay":"ctp"]:r[e]}}]}}))}}),(0,We.F3)("bidders.pubmaticVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.bidders.pubmatic.video.publisherId"),a=n("plugins.bidders.pubmatic.video.adUnits"),s=n("plugins.bidders.pubmatic.video.irisTv.enabled",!1),d=n("plugins.bidders.pubmatic.video.irisTv.timeout",1e3),l=n("plugins.bidders.pubmatic.video.dependenciesTimeout",2e3),c=n("plugins.bidders.pubmatic.video.outstreamAUs",{jwplayer:"jwplayer"}),u=t.invokeAll({message:["dmp","admantx"],timeout:l}),p=new Promise((async e=>{const t=(await u)[0];r("ias-bsp",t),e([["area",i.adAreaId],["ias-bsp",t]].reduce(((e,t)=>{let[n,r]=t;const i=Array.isArray(r)&&r.length||r?`${n}=${r}`:"";return i?e.length?`${e}|${i}`:`${i}`:e}),""))}));t.register("provide video adUnits",(async(e,n,i,l)=>{const u=((e,t,n,r)=>{if(e&&e[t]){const i=n=>0===n?e[t].preroll:e[t].midroll,o=n=>e[t]?.[n?"autoplay":"ctp"],a=t.includes("jwplayer")||t.includes("ibv")?i(r):o(n);return a&&a.trim().replace(/\s+/,"@")}})(a,e,n,i);if(!u)return{};s&&r("requesting irisTV segments for videoId:",l);const h=s&&(0,P.s5)(d,[t.invokeAll("get IrisTV tags",l)]),f=await h||{},{results:g=[]}=f,m=await p;r("dctr",m);const{context:v,iris_id:y}=g.length&&g[0].length&&!(0,T.Im)(g[0][0])&&g[0][0],{params:b,pbjsConfig:_}=v?.length?{params:{adSlot:u,dctr:m.length?`${m}|iris_context=${v.join(",")}`:`iris_context=${v.join(",")}`,publisherId:o},pbjsConfig:{content:{id:y}}}:{params:{adSlot:u,dctr:m,publisherId:o},pbjsConfig:{}};return c[e]&&(b.outstreamAU=c[e]),r("bid params",b),{bids:[{bidder:"pubmatic",params:b}],pbjsConfig:_}}))}});const Gr={hero:"plugins.slots.video.v2",ibv:"plugins.slots.ibv",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};function Xr(e){let{broker:t,getConfig:n,log:r}=e;r.info("enabled"),t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.mediagrid.video.${e}`);if(r.info("code",e),r.info("uid",t),!t)return r.warn(`no uid found for pos ${e}`),{};if(!n(Gr[e]))return r.warn(`no template found for pos ${e}`),{};const i={bids:[{bidder:"grid",params:{uid:t}}]};return r.info("providing ad unit",i),i}))}function Jr(e){let{broker:t,getConfig:n}=e;t.register("provide video adUnits",(async(e,t)=>{const r=((e,t)=>{const r=n("plugins.bidders.openx.video",{adUnits:{}});let i="";const o=r.delDomain;if(r.adUnits[e]&&"object"==typeof r.adUnits[e]&&r.adUnits[e][t?"autoplay":"ctp"])i=r.adUnits[e][t?"autoplay":"ctp"];else{if(void 0===r.adUnits[e])return{};i=r.adUnits[e].toString()}return{bids:[{bidder:"openx",params:{unit:i,delDomain:o,openrtb:{imp:[{video:{mimes:["video/x-ms-wmv","video/mp4"]}}]}}}]}})(e,t);return r}))}Xr.vendorIds={gdpr:[686]},Xr.purposeIds={gdpr:[1]},Xr.disableIfNoAdsServable=!0,Jr.vendorIds={gdpr:[69]},Jr.purposeIds={gdpr:[1]},Jr.disableIfNoAdsServable=!0;var Kr=function(e,t){return Kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Kr(e,t)};function Yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Kr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Qr(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Zr(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ei(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ti(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function ni(e){return this instanceof ni?(this.v=e,this):new ni(e)}Object.create,Object.create;var ri=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ii(e){return"function"==typeof e}var oi,ai=((oi=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),oi.prototype.constructor=oi,oi);function si(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var di=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Zr(o),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(ii(d))try{d()}catch(e){i=e instanceof ai?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var c=Zr(l),u=c.next();!u.done;u=c.next()){var p=u.value;try{ci(p)}catch(e){i=null!=i?i:[],e instanceof ai?i=ti(ti([],ei(i)),ei(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}if(i)throw new ai(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ci(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&si(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function li(e){return e instanceof di||e&&"closed"in e&&ii(e.remove)&&ii(e.add)&&ii(e.unsubscribe)}function ci(e){ii(e)?e():e.unsubscribe()}di.EMPTY;var ui={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},pi={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=pi.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,ti([e,t],ei(n))):setTimeout.apply(void 0,ti([e,t],ei(n)))},clearTimeout:function(e){var t=pi.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function hi(e){pi.setTimeout((function(){var t=ui.onUnhandledError;if(!t)throw e;t(e)}))}function fi(){}var gi=mi("C",void 0,void 0);function mi(e,t,n){return{kind:e,value:t,error:n}}var vi=null,yi=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,li(t)&&t.add(n)):n.destination=ki,n}return Yr(t,e),t.create=function(e,t,n){return new Si(e,t,n)},t.prototype.next=function(e){this.isStopped?Ii(function(e){return mi("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Ii(mi("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Ii(gi,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(di),bi=Function.prototype.bind;function _i(e,t){return bi.call(e,t)}var wi=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Ti(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Ti(e)}else Ti(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Ti(e)}},e}(),Si=function(e){function t(t,n,r){var i,o,a=e.call(this)||this;return ii(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&ui.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&_i(t.next,o),error:t.error&&_i(t.error,o),complete:t.complete&&_i(t.complete,o)}):i=t,a.destination=new wi(i),a}return Yr(t,e),t}(yi);function Ti(e){var t;ui.useDeprecatedSynchronousErrorHandling?(t=e,ui.useDeprecatedSynchronousErrorHandling&&vi&&(vi.errorThrown=!0,vi.error=t)):hi(e)}function Ii(e,t){var n=ui.onStoppedNotification;n&&pi.setTimeout((function(){return n(e,t)}))}var ki={closed:!0,next:fi,error:function(e){throw e},complete:fi},Ai="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ei(e){return e}var Ci=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof yi||function(e){return e&&ii(e.next)&&ii(e.error)&&ii(e.complete)}(r)&&li(r)?e:new Si(e,t,n);return function(e){if(ui.useDeprecatedSynchronousErrorHandling){var t=!vi;if(t&&(vi={errorThrown:!1,error:null}),e(),t){var n=vi,r=n.errorThrown,i=n.error;if(vi=null,r)throw i}}else e()}((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=xi(t))((function(t,r){var i=new Si({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Ai]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(n=e).length?Ei:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=xi(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function xi(e){var t;return null!==(t=null!=e?e:ui.Promise)&&void 0!==t?t:Promise}var Oi="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Pi(e){if(e instanceof Ci)return e;if(null!=e){if(function(e){return ii(e[Ai])}(e))return o=e,new Ci((function(e){var t=o[Ai]();if(ii(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ri(e))return i=e,new Ci((function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()}));if(ii(null==(r=e)?void 0:r.then))return n=e,new Ci((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,hi)}));if(function(e){return Symbol.asyncIterator&&ii(null==e?void 0:e[Symbol.asyncIterator])}(e))return Di(e);if(function(e){return ii(null==e?void 0:e[Oi])}(e))return t=e,new Ci((function(e){var n,r;try{for(var i=Zr(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return ii(null==e?void 0:e.getReader)}(e))return Di(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof ni?Promise.resolve(n.value.v).then(d,l):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function d(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}(this,arguments,(function(){var t,n,r;return Qr(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,ni(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,ni(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,ni(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,r,i,o;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function Di(e){return new Ci((function(t){(function(e,t){var n,r,i,o,a,s,d,l;return a=this,s=void 0,l=function(){var a,s;return Qr(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Zr(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}(e),d.label=1;case 1:return[4,n.next()];case 2:if((r=d.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=d.sent(),i={error:s},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((d=void 0)||(d=Promise))((function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof d?i:new d((function(e){e(i)}))).then(n,r)}i((l=l.apply(a,s||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function Ri(e){return function(t){if(function(e){return ii(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function ji(e,t,n,r,i){return new Mi(e,t,n,r,i)}var Mi=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return Yr(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(yi);function Ni(e,t){return Ri((function(n,r){var i=0;n.subscribe(ji(r,(function(n){r.next(e.call(t,n,i++))})))}))}function Ui(e,t,n){return void 0===n&&(n=1/0),ii(t)?Ui((function(n,r){return Ni((function(e,i){return t(n,e,r,i)}))(Pi(e(n,r)))}),n):("number"==typeof t&&(n=t),Ri((function(t,r){return function(e,t,n,r,i,o,a,s){var d=[],l=0,c=0,u=!1,p=function(){!u||d.length||l||t.complete()},h=function(e){return l<r?f(e):d.push(e)},f=function(e){l++;var i=!1;Pi(n(e,c++)).subscribe(ji(t,(function(e){t.next(e)}),(function(){i=!0}),void 0,(function(){if(i)try{l--;for(var e=function(){var e=d.shift();f(e)};d.length&&l<r;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(ji(t,h,(function(){u=!0,p()}))),function(){}}(t,r,e,n)})))}var Li=Array.isArray;var Bi=["addListener","removeListener"],qi=["addEventListener","removeEventListener"],Fi=["on","off"];function Vi(e,t,n,r){if(ii(n)&&(r=n,n=void 0),r)return Vi(e,t,n).pipe((i=r,Ni((function(e){return function(e,t){return Li(t)?e.apply(void 0,ti([],ei(t))):e(t)}(i,e)}))));var i,o=ei(function(e){return ii(e.addEventListener)&&ii(e.removeEventListener)}(e)?qi.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return ii(e.addListener)&&ii(e.removeListener)}(e)?Bi.map(zi(e,t)):function(e){return ii(e.on)&&ii(e.off)}(e)?Fi.map(zi(e,t)):[],2),a=o[0],s=o[1];if(!a&&ri(e))return Ui((function(e){return Vi(e,t,n)}))(Pi(e));if(!a)throw new TypeError("Invalid event target");return new Ci((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return s(t)}}))}function zi(e,t){return function(n){return function(r){return e[n](t,r)}}}var $i=function(e){function t(t,n){return e.call(this)||this}return Yr(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(di),Wi={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Wi.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,ti([e,t],ei(n))):setInterval.apply(void 0,ti([e,t],ei(n)))},clearInterval:function(e){var t=Wi.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Hi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Yr(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Wi.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Wi.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}($i),Gi={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=Gi.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new di((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Gi.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,ti([],ei(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Gi.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,ti([],ei(e)))},delegate:void 0},Xi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Yr(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=Gi.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,r){var i;if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o=t.actions;null!=n&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==n&&(Gi.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Hi),Ji={now:function(){return(Ji.delegate||Date).now()},delegate:void 0},Ki=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Ji.now,e}(),Yi=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yr(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(function(e){function t(t,n){void 0===n&&(n=Ki.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return Yr(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ki)))(Xi);const Qi=(e,t)=>(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY),Zi=e=>e.touches[0],eo=(e,t,n)=>{e.style.transform=`translate(${t}px, ${n}px)`};class to{constructor(e,t,n,r){this.broker=e,this.playerConfig=t,this.playlist=n,this.config={...t},this.log=r,this.containerInitialised=this.containerInitialised.bind(this),this.playerRemove=this.playerRemove.bind(this),this.getPlaylistItem=this.getPlaylistItem.bind(this),this.handleRenderMpuAd=this.handleRenderMpuAd.bind(this),e.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&this.playerRemove()})),e.on("disable chromeless-player",(()=>{console.log("removing chromeless player"),this.playerRemove()}))}handlePlay(e){this.videoPlayerRef.handlePlay(e)}handleAdPlay(e){this.videoPlayerRef.handleAdPlay(e)}handleError(e){}handleRenderMpuAd(e,t){const n=e.bannerFallback.pos;this.log(`rendering ${n}`),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!0);const r=async()=>{this.videoPlayerRef.clearMpuAd(t),this.broker.emit("destroy slot",n),i.removeAttribute("data-adverts-ad");const r=await this.broker.invoke("is page visible?");e.pauseOnBlur&&!r&&(this.log("page not visible... waiting"),await this.broker.until("page visible")),this.log("restarting player"),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!1),this.broker.emit("bannerFallbackAd destroyed")},i=document.getElementById(n),o=this.broker.register("get tags",(e=>{let{slot:{pos:r}}=e;if(r!==n)return;o.cancel();const{offset:i}=t;return[{offset:i}]})),{pos:a,id:s,parentId:d}=e.bannerFallback;this.broker.emit("slot mounted",{pos:a,id:s,parentId:d}),this.broker.once("ad rendered",n,(i=>{let{isEmpty:o}=i;if(this.log(`${n} rendered`),o)return this.log(`${n} empty`),void r();this.videoPlayerRef.handleMpuAd(t),setTimeout((()=>{this.log(`destroying ${n}`),r()}),e.bannerFallback.displayTimeout)}))}getPlaylistItem(){return this.player.options_}monitorEvents(){const{broker:e,config:t}=this,{bannerFallback:n={},pauseOnBlur:r=!0}=t;e.on("chromeless player event","adPlay",(e=>this.handleAdPlay(e))),e.on("chromeless player event","play",(e=>this.handlePlay(e))),e.on("chromeless player event","error",(e=>this.handleError(e))),t.bannerFallback&&t.bannerFallback.enabled&&e.on("chromeless player event","bannerFallbackAd",(e=>this.handleRenderMpuAd({bannerFallback:n,pauseOnBlur:r},e)))}async createPlayerLayout(){const{width:e,height:t,ui:n}=this.config;this.timer=+new Date,this.monitorEvents(),this.targetBody=document.createElement("div"),this.targetBody.id="chromelessPlayer",this.targetBody.className="jwplayer_body",this.targetBody.style.width=`${e}px`,this.targetBody.style.height=`${t}px`,this.targetBody.style.background=`url(${this.config.ui.backgroundImage})`,document.body.appendChild(this.targetBody);const r={ref:e=>{this.videoPlayerRef=e},broker:this.broker,containerInitialised:this.containerInitialised,targetBody:this.targetBody,onClose:this.playerRemove,config:{width:e,ui:n},getPlaylistItem:this.getPlaylistItem};this.videoPlayerRef=function(e){let{broker:t,containerInitialised:n,getPlaylistItem:r,onClose:i}=e,o=!0;const a=MobileUtils.isMobile()?"touchstart":"click",s=document.createElement("img");s.src="//i.dailymail.co.uk/video/chromeless_closer.png";const d=document.createElement("div");d.id="closeButton",d.appendChild(s),d.addEventListener(a,(function(e){e&&e.preventDefault(),i()}));const l=document.createElement("video");l.setAttribute("defaultMuted","defaultMuted"),l.setAttribute("muted","muted");const c=document.createElement("div");c.id="playerDiv",c.classList.add("vjs-video-container"),c.classList.add("vjs-responsive"),c.style.visibility="hidden",c.appendChild(l);const u=document.createElement("div");u.id="readMoreWrapper",u.addEventListener(a,(function(e){e.preventDefault(),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),i(),__webpack_require__.g.top.location=r().linkBaseURL+"?ito=chromelessDM_0"})),u.addEventListener("mouseover",(function(){v(r().title)})),u.addEventListener("mouseout",(function(){g()}));const p=document.createElement("div");p.id="mpu_player",p.style.marginTop="0",p.style.left="73px";const h=document.createElement("div");h.classList.add("mpu_player_wrapper"),h.appendChild(p),h.style.display="none",h.addEventListener(a,(function(e){e.preventDefault()}));const f=document.createElement("div");f.id="outerWrapper",f.addEventListener("mouseover",(function(){f.querySelector(".jw-playlist-btn")&&(f.querySelector(".jw-playlist-btn").style.display="none",f.querySelector(".jw-icon-fullscreen").style.display="none")})),f.appendChild(d),f.appendChild(c),f.appendChild(u),f.appendChild(h),n(c,l);const g=(0,I.sg)((()=>{u.innerText="Read more"}),5e3);return{clearMpuAd:function(){h.style.display="none"},handleAdPlay:function(){o&&m(),u.style.display="none"},handleMpuAd:function(){u.style.display="none",h.style.display="block"},handlePlay:function(){const e=r();o&&m(),v(e.title),u.style.display="inline"},outerWrapper:f,revealPlayer:m};function m(){c.style.visibility="visible",o=!1}function v(e){u.innerText=e,g()}}(r),this.targetBody.appendChild(this.videoPlayerRef.outerWrapper)}playerRemove(){this.videoPlayerRef&&this.videoPlayerRef.outerWrapper.parentNode.removeChild(this.videoPlayerRef.outerWrapper),this.targetBody&&this.targetBody.remove(),this.broker.emit("set slots enabled",["chromeless"],!1),this.broker.emit("chromeless player closed"),this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}initialisePlayer(){this.broker.emit("set slots enabled",["chromeless"],!0),__webpack_require__.g.DM.later("videoplayer-ready",(async()=>{this.player=await async function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{width:i,height:o,bannerFallback:a={},ensureSnapshotSrcDefined:s}=e,d=await n,l={isMobile:MobileUtils.isMobile(),playerId:"default",preload:"none",initialVideo:!0,syndicationService:null,plugins:{tracking:{disableMolTracking:e.disableMolTracking,channelShortName:e.pageCriteraVideoChannel,sponsored:null,referenceId:"",videoId:"",trackingType:"chromeless",recommendationModel:""},"video-advertising-mode":{autoplay:r},"autoplay-next-video":{},"ads-setup":{snapshot:{ensureSrcDefined:s},bidmax:!0,cust_params:{pos:"jw_preroll"},headerBiddingParams:{platform:"dmplayer",pos:"jwplayer"},schedule:e.schedule,adsEnabled:!0,vpaidEnabled:!0,useIMASDK:e.useImaSdk,adsCancelTimeout:15e3,screen:{width:i,height:o},bannerFallback:!!a.enabled},"related-videos":{videos:d,playlistHistory:!1}}},c=await __webpack_require__.g.DM.molFeVideoplayer.initializeVideo(t,l);return r&&await new Promise((e=>c.one("play",e))),c}(this.playerConfig,this.videoEl,this.playlist,!await this.broker.invoke("editorialVideo.autoplay").catch((()=>!0)));const{delayBeforeMakingPlayerVisible:e,nonOptimisedMobileHomePage:t}=this.config;var n,r;setTimeout((()=>{this.targetBody.style.visibility="visible",this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})}),e),t&&((e,t)=>new Promise((n=>{const r=Vi(e,"touchstart"),i=Vi(document,"touchmove"),o=Vi(document,"touchend");var a;r.pipe((a=r=>{const a=Zi(r);r.preventDefault(),r.stopPropagation();const s=o.pipe(Ni((e=>e.preventDefault()||Qi(e.changedTouches[0],a))),(u=ii(d=r=>{r>=4e4?(t.userActive(!0),n()):(eo(e,0,0),t.userActive(!0))})?{next:d,error:l,complete:c}:d)?Ri((function(e,t){var n;null===(n=u.subscribe)||void 0===n||n.call(u);var r=!0;e.subscribe(ji(t,(function(e){var n;null===(n=u.next)||void 0===n||n.call(u,e),t.next(e)}),(function(){var e;r=!1,null===(e=u.complete)||void 0===e||e.call(u),t.complete()}),(function(e){var n;r=!1,null===(n=u.error)||void 0===n||n.call(u,e),t.error(e)}),(function(){var e,t;r&&(null===(e=u.unsubscribe)||void 0===e||e.call(u)),null===(t=u.finalize)||void 0===t||t.call(u)})))})):Ei);var d,l,c,u,p,h,f;return i.pipe(Ni((e=>{return t=Zi(e),n=a,{x:t.clientX-n.clientX,y:t.clientY-n.clientY,distSQ:Qi(t,n)};var t,n})),(f=s,Ri((function(e,t){Pi(f).subscribe(ji(t,(function(){return t.complete()}),fi)),!t.closed&&e.subscribe(t)}))),(p=Yi,void 0===h&&(h=0),Ri((function(e,t){t.add(p.schedule((function(){return e.subscribe(t)}),h))}))))},Ri((function(e,t){var n=null,r=!1,i=function(){return r&&!n&&t.complete()};e.subscribe(ji(t,(function(e){null==n||n.unsubscribe(),Pi(a(e)).subscribe(n=ji(t,(function(e){return t.next(e)}),(function(){n=null,i()})))}),(function(){r=!0,i()})))})))).subscribe((t=>{t.distSQ>=1e4?eo(e,t.x,t.y):eo(e,0,0)}))})))(this.targetBody,this.player).then((()=>this.playerRemove())),this.broker.emit("chromeless player ready",this.player),n=this.broker,(r=this.player).on("videoAd.start",(e=>{n.emit("chromeless player event","adPlay",e)})),r.on("play",(e=>{n.emit("chromeless player event","play",e)})),r.on("error",(e=>n.emit("chromeless player event","error",e))),r.on("videoAd.contentPauseRequested",(e=>{n.emit("chromeless player event","adPlay",e)})),r.on("videoAd.contentResumeRequested",(e=>{n.emit("chromeless player event","play",e)})),r.on("request-reset",(e=>n.emit("chromeless player event","playlistItem",e))),r.on("time",(e=>n.emit("chromeless player event","time",e))),r.on("videoAd.error",(e=>n.emit("chromeless player event","adError",e))),r.on("videoAd.impression",(e=>{n.emit("video ad impression",e),n.emit("chromeless player event","adImpression",e)}))}))}async containerInitialised(e,t){const{broker:n,config:r}=this;this.videoEl=t;const{width:i,height:o,videoAdServerUrl:a,pageLoadTimeout:s}=r,d=(await this.playlist)[0];n.emit("chromeless videoPlayer container ready",{broker:n,adEl:e,videoEl:t,videoId:d.videoId,config:{width:i,height:o,videoAdServerUrl:a,pageLoadTimeout:s}})}}const no=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),ro=(e,t)=>e&&no&&"desktop"===t.renderPlatform,io=e=>e("players.chromeless.dmplayer.v3.adRoll",[]).map((e=>{let{offset:t,minVideoDuration:n}=e;return n?{offset:t,minVideoDuration:n}:{offset:t}})),oo=e=>{let t,{broker:n,getConfig:r,isHomepage:i,log:o,pageMeta:a}=e;const s=((e,t,n)=>{const r=e("plugins.slots.jwplayer.v3",{}),i=e("plugins.slots.jwplayer.v3.useIMASSDK",!0),o=e("players.commercial.pauseOnBlur",!0),a=new Set(["news","tvshowbiz","femail","health","sciencetech","travel","money"]).has(__webpack_require__.g.PageCriteria.channel)?__webpack_require__.g.PageCriteria.channel:"news",s=r.mediaType&&r.mediaType.video&&r.mediaType.video.playerSize||[401,225],d=Object.keys(e("slots.enabled",{})).includes("mpu_player"),l=e("slotDescriptions.initial",{}).mpu_player,{playerSize:c=[445,250],displayTimeout:u=5e3}=l?.bannerFallback||{},[p,h]=d?c:s,f=d?((e,t)=>{const{id:n,parentId:r,pos:i}=e;return{displayTimeout:t,enabled:!0,id:n,parentId:r,pos:i}})(l,u):{};return{width:p,height:h,delayBeforeMakingPlayerVisible:e("players.chromeless.dmplayer.v3.delayBeforeMakingPlayerVisible",4e3),...r,nonOptimisedMobileHomePage:ro(t,n),trackingData:{videoChannel:a},schedule:io(e),disableMolTracking:e("players.chromeless.dmplayer.v3.disableMolTracking",!0),pageCriteraVideoChannel:__webpack_require__.g.PageCriteria.channel,useImaSdk:i,bannerFallback:{enabled:!1,...f},pauseOnBlur:o,ensureSnapshotSrcDefined:e("players.chromeless.dmplayer.v3.ensureSnapshotSrcDefined")}})(r,i,a);o("player config",s);const{ui:d,disableMolTracking:l,pageCriteraVideoChannel:c,trackingData:u}=s,p=new Promise((e=>{n.once("ad rendered","billboard",(()=>setTimeout(e,500)))}));n.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&(t=!0)})),n.on("disable chromeless-player",(()=>{t=!0})),n.on("plugins enabled",(async()=>{if(t)return;const e=new Promise((e=>{n.on("chromeless videoPlayer container ready",(t=>{(async e=>{let{broker:t,videoId:n,config:r}=e;const{width:i,height:o,pageLoadTimeout:a}=r;t.emit("start early video bid",{articleURL:`${__webpack_require__.g.location.protocol}//${__webpack_require__.g.location.host}${__webpack_require__.g.location.pathname}`,autoplay:!0,muted:!0,offset:0,platform:"dmplayer",pos:"jwplayer",screen:{height:o,width:i},timeout:a,videoId:n})})(t),e()}))}));n.register("get video tags",(e=>{let{pos:t}=e;const n=__webpack_require__.g.PageCriteria.channel;if("jwplayer"===t)return{cust_params:{channel:n}}}));const i=(async e=>{const t=await async function(e){const t=await ht({url:e,timeout:18e3});return JSON.parse(t)}(e.ui.playlistUrl).catch((e=>{console.log("No jwplayer playlist available due to ",e.message)}));if(!t)return;const n=t[e.trackingData.videoChannel];return((e,t,n,r)=>e.filter((e=>e.duration<=t.maxVideoDuration)).map((e=>({linkBaseURL:e.articleUrl,isMobile:!1,duration:e.duration,src:e.url,source:e.source,playerId:"default",title:e.headline,preload:"none",initialVideo:!1,thumbnail:e.stillImageUrl,poster:t.backgroundImage,syndicationService:!1,plugins:{tracking:{disableMolTracking:n,channelShortName:r,sponsored:null,referenceId:e.id,videoId:e.externalVideoIdent,trackingType:"chromeless",recommendationModel:""},"ads-setup":{adsEnabled:!0,screen:{width:401,height:225},adsCancelTimeout:15e3},"autoplay-inline":{enabled:!1,alwaysOn:!1}},videoId:e.externalVideoIdent,descr:e.headline,referenceId:e.id,grapeshot:{article:{articleURL:e.articleUrl}}}))))(e.ui.shufflePlaylist?(0,q.k4)(n):n,e.ui,e.disableMolTracking,e.pageCriteraVideoChannel)})({ui:d,disableMolTracking:l,pageCriteraVideoChannel:c,trackingData:u}),a=new to(n,s,i,o);__webpack_require__.g.DM.later("DOM_READY",(async()=>{await n.invoke("is page visible?")||!s.pauseOnBlur?(o("Page has focus - rendering player"),a.createPlayerLayout()):(o("Waiting for page to focus"),n.once("page visible",(()=>{o("Page has focus - rendering player"),a.createPlayerLayout()})))}));let h=r("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(r("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await p;const t=Date.now()-e;h=t>h?0:h-t}setTimeout((async()=>{if(!t)try{await e,a.initialisePlayer()}catch(e){throw console.log("Unable to start chromeless player due to",e.message),e}}),h)}))};oo.pluginSetup=e=>{let{log:t,getConfig:n,isHomepage:r,pageMeta:i,addPlugins:o,removePlugins:a}=e;const s=n("players.chromeless.dmplayer.v3.domainExclusions",[]),d=n("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),l=s.length&&(s.includes(__webpack_require__.g.location.hostname)||s.includes(__webpack_require__.g.location.hostname.replace(/www./,"")))||__webpack_require__.g.PageCriteria.articleId&&d.length&&d.includes(__webpack_require__.g.PageCriteria.articleId),c=n("players.chromeless.dmplayer.v3.enableWifiDetection",!1),u=navigator.connection&&"wifi"===navigator.connection.type;l||no&&!ro(r,i)||c&&!u||!c&&no?(t("removing dmplayer"),a(["chromelessv2.dmplayer"])):(t("removing videoFlyout and videoForceFlyout"),a(["videoForceFlyout","videoFlyout"]),o(["players.onlyOneActivePlayer"]))};const ao=oo;oo.ccpa={enabledIfDissent:!0},oo.gdpr={enabledIfDissent:!0},oo.disableIfNoAdsServable=!0;var so=__webpack_require__(7929);const lo=DM.molFeComponents,co=e=>{try{if("string"==typeof e)return new URL(e).hostname}catch(e){}},uo=["dmgmediaprivacy.co.uk","dmgprivacyint.co.uk","localhost","127.0.0.1"],po=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),ho={getUSPData:"__cachedUSPData"},fo=async(e,t,n,r)=>{const[i,o]=await Promise.all([en(),tn()]);i||n(r),(async(e,t,n)=>{if(!n&&!b.pz&&!t("cmp.isEmbeddedVideo",!1)){await Zt("rendered");const t=(e=>{const t=t=>{if(!(e=>{if(void 0!==e.dataset.cmpNoConsent||/(cookie\s+policy|privacy\s+settings)/i.test(e.textContent))return!0;const t=document.querySelectorAll("*[data-cmp-no-consent]");for(const n of t)if((0,xe.contains)(n,e))return!0;return!1})(t.target)){const r=(0,so.EY)(t);t.preventDefault(),n(),e.emit("extra cmp ui tracking event","site clicked"),Zt("consentToAll").then((()=>{t.target.dispatchEvent(r)})).catch((e=>{console.error(e),t.target.dispatchEvent(r)}))}},n=()=>{document.body.removeEventListener("click",t)};return document.body.addEventListener("click",t),n})(e);await Zt("onUpdate"),t()}})(e,t,o)},go=async e=>{const t=an();return Promise.all(Object.entries(ho).map((e=>{let[n,r]=e;return new Promise((e=>{t.a.push([n,null,(t,i)=>{i&&(localStorage.setItem(r,JSON.stringify(t)),e({[n]:t}))}])}))})))},mo=async e=>{let{broker:t,getConfig:n,log:r,registerPluginBouncer:i}=e;const o=on(),a=ln();r("gpcEnabled",a);const s="no"===localStorage.getItem(Yt),d=a&&!s?Qt:void 0;function l(e,t){return!t?.ccpa?.enabledIfDissent&&r("bouncing",e),t?.ccpa?.enabledIfDissent}lo.setConfig("molFeHomeChannel/showGDPRControls",{enabled:!b.pz&&o}),b.fX["mol.ads.cmp.stubConsent"]?localStorage.setItem(Yt,"yes"):b.fX["mol.ads.cmp.stubDissent"]&&localStorage.setItem(Yt,"no");const c=function(e){const t=an()||((e,t,n)=>{const r=ho[e];let i;r&&(i=localStorage.getItem(r))?n(JSON.parse(i),!0):an().a.push([e,t,n])});return(e=>{__webpack_require__.g.__uspapi=e})(t),t.a=t.a||[],t}();if(o&&dn()&&a&&(r("gpc enabled"),!s)){localStorage.setItem(Yt,"no");const e=JSON.parse(localStorage.getItem(ho.getUSPData)||"{}");localStorage.setItem(ho.getUSPData,JSON.stringify({...e,uspString:Qt}))}switch(go(),c("onUpdate",null,(async(e,n)=>{if(r("onUpdate",e),n){o&&localStorage.setItem(Yt,e?"yes":"no");const n=(await go()).find((e=>e.getUSPData));r("consentData",n);const i=n&&n.getUSPData;if(i){const n={...i,hasConsent:e};r("cmp updated",n),t.emit("cmp updated",n)}}})),o&&Zt("onDissent").then((async()=>{r("user dissented"),localStorage.setItem(Yt,"no"),await go(),a||__webpack_require__.g.location.reload()})),(async(e,t,n)=>{let r=e("ccpa.scriptBaseUrl");if(i=(e=>{const t=document.createElement("a");return t.href=e,t})(r).hostname,!Boolean(uo.find((e=>i.endsWith(e)))))throw new Error(`CMP script base "${r}" is not allowed.`);var i;(b.Yw||b.Qr)&&(r=r.replace(/^https?:/,""));const o=document.createElement("script"),a=e("cmp.isEmbeddedVideo",!1);if(a){const e=".vjs-flyout-wrapper-fixed .vjs-video-container";await Promise.race([(0,xe.elementReady)(e,4500),(0,P.wR)(4e3)]),o.dataset.renderIn=e,o.dataset.renderVideo=!0}else o.dataset.render=!0;__webpack_require__.g.PageCriteria?.region&&(o.dataset.region=__webpack_require__.g.PageCriteria.region);const s=e("cmp.renderConfig");s&&(o.dataset.renderConfig=JSON.stringify(s)),on()&&t&&(o.dataset.clientConsentString=t,o.dataset.forceSetConsentString=!0);const d=e("ccpa.version");r=d?`${r}/${d}`:r,o.dataset.gvlUiVersion=e("ccpa.gvlUiVersion",186),o.dataset.cvlUiVersion=e("ccpa.cvlUiVersion",1),o.dataset.nrvUiVersion=e("ccpa.nrvUiVersion",5),o.dataset.vendorListBaseUrl=e("ccpa.vendorListBaseUrl","//cmp.dmgmediaprivacy.co.uk"),o.dataset.i18nVersion=e("ccpa.i18nVersion",7),o.dataset.backendBaseUrl=e("ccpa.backendBaseUrl","//cmp.dmgmediaprivacy.co.uk"),o.dataset.consentManagementRegions=JSON.stringify(e("ccpa.consentManagementRegions",["CA","VA"])),n("script dataset",o.dataset),o.id="mol-ads-cmp",o.src=`${r}/iife/mol-ads-cmp.js`;const l=document.createElement("link"),c=document.head.querySelector('link[rel="stylesheet"]')||document.head.lastChild,u=(()=>{switch(!0){case a:return"video";case po:return"mobile";default:return"desktop"}})();l.setAttribute("rel","stylesheet"),l.setAttribute("href",`${r}/css/${u}.css`),document.head.insertBefore(l,c),document.head.appendChild(o)})(n,d,r),(async()=>{const[e,t]=await Promise.all([en(),tn()]);t?localStorage.setItem(Yt,e?"yes":"no"):localStorage.removeItem(Yt)})(),localStorage.getItem(Yt)){case"yes":break;case"no":r("user dissented..."),i(l);break;default:on()&&await fo(t,n,i,l)}an()("onReset",null,(()=>{localStorage.removeItem(Yt)}))};function vo(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function yo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_o(t,e))}function bo(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_o(t,e),n),n}function _o(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}mo.isAdsFreeSupported=!0;var wo=new WeakMap,So=new WeakMap,To=new WeakMap;class Io{constructor(e){let{target:t=window,ns:n,sender:r,id:i}=e;var o,a,s;vo(this,wo,{writable:!0,value:void 0}),vo(this,So,{writable:!0,value:void 0}),o=this,s=void 0,(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(a="id"))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,vo(this,To,{writable:!0,value:void 0}),bo(this,To,t),this.id=i&&String(i)||Math.random().toString(36).substring(2),bo(this,wo,n),bo(this,So,r)}emit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i]=t;const o={ns:yo(this,wo),id:this.id,sender:yo(this,So),action:r,payload:i};yo(this,To).postMessage(o,"*")}on(e,t){const n=n=>{const r=n.data;r.ns===yo(this,wo)&&r.id===this.id&&r.action===e&&r.sender!==yo(this,So)&&t(r.payload,e)};return yo(this,To).addEventListener("message",n),()=>yo(this,To).removeEventListener("message",n)}once(e,t){const n=this.on(e,((e,r)=>{t(e,r),n()}))}}const ko=!!localStorage.getItem(ho.getUSPData),Ao={ccpa:{enabledIfDissent:!0},init:async function(e){let{broker:t,getConfig:n,log:r,registerPluginBouncer:i,doc:o,win:a}=e;nn()&&(function(e){let{doc:t,log:n,win:r,broker:i,queryParams:o,getConfig:a}=e;const s=a("ccpa.embedded.policyUrls",["/home/article-7759273/Privacy-Cookies-Policy-Policy.html"]).some((e=>e===r.location.pathname));if(!(s&&r.opener&&o.brokerId))return void n("page not opened by embedded video, bailing",s,!!r.opener,o.brokerId);const d=new URL(window.location.href);d.searchParams.delete("brokerId"),history.replaceState(history.state,"",d.href),n("opened");const l=new Io({target:r.opener,ns:"@mol-ads/mol-ads-cmp",sender:"@mol-ads",id:o.brokerId});i.on("cmp updated",(()=>{n("cache updated"),t.querySelector(".mol-ads-cmp--open")?n("banner still open, bailing"):Zt("getUSPData").then((e=>{l.emit("ccpa:user_preference",e.uspString),n("notifying")}))}))}({doc:o,log:r,win:a,broker:t,queryParams:b.fX,getConfig:n}),!ko&&r("provisional insufficient"),await mo({broker:t,getConfig:n,log:r,registerPluginBouncer:i}),r("ccpa loaded"))},run:async function(e){let{broker:t,log:n}=e;if(!an())return;const r={gdpr:"0",cmp:"ccpa"},i=t.until("gpt initialized"),o=e=>{const n=e.hasConsent,o={...r,us_privacy:e.uspString,consent:n},a=n||!dn()?0:1,s=1===a?{...o,rdp:a}:o;t.emit("set page level targeting",s);const d={cust_params:{...o},rdp:a};t.emit("sync video tags update",d),Co(n,i)};t.on("cmp updated",(async e=>{n("user consentData updated",e),o(e)})),t.on("openCmpBanner",(()=>__webpack_require__.g.__uspapi.a.push(["openSettings"]))),t.register("check vendor consent",(async()=>({isConsented:dn()?sn():!on()||"1YNN"===(await Zt("getUSPData")).uspString})));try{const e=await Zt("getUSPData"),t=sn();n("setting initial user consentData",e,t),o({...e,hasConsent:t})}catch(e){console.error("[mol-ads]: There was a problem fetching consent data")}window.__uspapi&&b.fX.privacy&&((0,b.N0)("privacy"),window.__uspapi.a.push(["openSettings"])),__webpack_require__.g.openCcpaUi=()=>{window.__uspapi.a.push(["openSettings"])}},isAdsFreeSupported:!0},Eo=ko?Ao:{...Ao,initTimeout:D.pX};(0,We.F3)("cmp",Eo);const Co=async(e,t)=>{if(!e&&dn()){const e=await t,n=e&&e[0];n&&n.pubads().setPrivacySettings({restrictDataProcessing:!0})}};function xo(e){let{broker:t}=e;__webpack_require__.g.__promised_cmp=new Promise(((e,n)=>{t.on("plugins enabled",(t=>{if(!__webpack_require__.g.__cmp)return e();__webpack_require__.g.__cmp("hasChoiceBeenMade",null,((t,r)=>{if(!r)return n(new Error("hasChoiceBeenMade failed"));t?__webpack_require__.g.__cmp("hasConsentedToAll",null,((t,r)=>{if(!r)return n(new Error("hasConsentedToAll failed"));e(t)})):__webpack_require__.g.__cmp("onUpdate",null,((t,r)=>{if(!r)return n(new Error("onUpdate failed"));e(t)}))}))}))})),__webpack_require__.g.postMessage("__promised_cmp:available","*")}function Oo(){}xo.isAdsFreeSupported=!0,xo.ccpa={enabledIfDissent:!0};const Po="home ushome auhome".split(" "),Do=(0,_.h)("Delayer");Oo.pluginSetup=async e=>{let{broker:t,setConfig:n}=e;const r=!dn(),i=b.pz,o=PageCriteria.isMobile,a=navigator.cookieEnabled,s="channel"===PageCriteria.pageType,d=Po.includes(PageCriteria.channel),l=on()&&rn();if(Do("Initializing:",{newCmpUser:r,ios:i,ccpa:l,mobile:o,cookieEnabled:a,channel:s,home:d}),!(r&&i&&l&&o&&a&&s&&d))return void Do("Not delaying");Do("Possible");const c=(0,b.Ri)("mol-home");if(Do("Cookie:",c),c)Do("Not delaying");else{Do("Active"),n("pluginManager.setupTimeout",6e5),Do("Change timeout to 10 minutes");try{await new Promise(((e,t)=>{let n=!1;const r=Date.now(),i=()=>{if(document.querySelector("#homePageCover"))n||Do("homePageCover detected"),n=!0;else{if(n)return Do("homePageCover closed"),e();{const e=Date.now()-r;if(e>5e3)return Do("homePageCover never showed up after",e),t(new Error(`homePageCover never showed up after ${e} ms`))}}setTimeout(i,200)};i()}))}catch(e){t.register("call for page analytics",(()=>({missingHomePageCover:!0})))}}},Oo.isAdsFreeSupported=!0,Oo.ccpa={enabledIfDissent:!0};const Ro="mol.ads.ccpa.reprompt";function jo(e){let{getConfig:t,log:n}=e;const r=t("ccpa.gpc.constrainReprompt",!1),i=t("ccpa.gpc.forced",navigator.globalPrivacyControl);if(!rn()||ln()||r&&!i)return void n("user not eligble for reprompt, bailing");localStorage.removeItem("__ads_cmp_reprompt");const o=t("ccpa.reprompt",{version:0,chance:0});n("Goal:",o);const a=localStorage.getItem(Ro),s=a&&JSON.parse(a)||{version:0,chance:Math.random()},d=()=>{n("Saving config"),localStorage.setItem(Ro,JSON.stringify(s))};n("Current:",s),s.version<o.version&&s.chance<o.chance?(n("Resetting CMP cookie"),an()("reset",null,((e,t)=>{t?(n("Cookie removed"),s.version=o.version,s.ts=(new Date).toISOString(),d()):n("Failed resetting CMP")}))):a||d()}function Mo(e){let{broker:t}=e;if(!nn())return;const n={"overlay accepted":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPTED,"overlay open settings":DM.molFeTracking.pageEvents.GDPR_OVERLAY_PRIVACY,"overlay displayed":DM.molFeTracking.pageEvents.GDPR_OVERLAY_DISPLAYED,"settings functional tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_TAB_CLICKED,"settings advertising tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_TAB_CLICKED,"settings functional panel advertising link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_LINK_CLICKED,"settings functional panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel disallow":DM.molFeTracking.pageEvents.GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS,"settings advertising panel disallow confirmed":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_DISALLOW,"settings advertising panel disallow declined":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_ALLOW,"settings functional panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_ALLOW_ALL,"settings advertising panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_ALLOW_ALL,"site clicked":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE};__webpack_require__.g.addEventListener("message",(e=>{let{data:t}=e;if(!t||"function"!=typeof t.startsWith)return;if(!t.startsWith("__cmp_ui_tracking\n"))return;const r=t.substring(18),i=n[r];i?DM.molFeTracking.pageEvents.publish(i):console.warn("Unknown CMP UI Tracking event:",r)}),!1),t.on("extra cmp ui tracking event",(e=>DM.molFeTracking.pageEvents.publish(n[e])))}jo.isAdsFreeSupported=!0,jo.ccpa={enabledIfDissent:!0},Mo.isAdsFreeSupported=!0,Mo.ccpa={enabledIfDissent:!0},(0,We.F3)("permutive.vault",{run:async function(e){let{broker:t,log:n}=e;n("waiting for permutive..."),await t.until("permutive ready"),n("starting");const r=(0,b.Ri)("permutive-id");if(!r)return void n("no permutive id found");if(!DM.isLoggedIn||!DM.userId)return void n("not logged in");const i=localStorage.getItem("mol.ads.lkui"),o=DM.userId;if(o!==i){n("userId changed",{lastKnownUserId:i,newUserId:o});const e=await fetch("/registration/p/external-references/v1",{method:"PUT",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendor:"permutive",id:r})});202===e.status?(localStorage.setItem("mol.ads.lkui",o),n("updated permutive id:",r)):n.warn("failed sending external reference:",e.status,e.statusText)}else n("userId unchanged",o)},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[361]}});const No=(0,I.Gr)((async e=>{const{broker:t,getConfig:n,win:r}=e;if(!r.permutive){const i=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),o=n("plugins.permutive.webScriptSrc","https://5f42864d-a421-4f37-9478-00266f871d68.edge.permutive.app/{{WORKSPACE_ID}}-web.js"),a=n("plugins.permutive.delayedInitialisation",!1);await(async e=>{let{broker:t,getConfig:n,delayedInitialisation:r,log:i,pageMeta:o,pageCriteria:a,win:s}=e;const d=Date.now();i("initializing");const l=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),c=n("plugins.permutive.publisherUserId","TheDailyMail"),u=n("plugins.permutive.apiKey","ed45e86d-a09e-4d2b-85c0-fbbd6857373e"),p=n("plugins.permutive.environment","production"),h=n("plugins.permutive.eventsCacheLimitBytes",25e5),f=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];g.q.push({functionName:e,arguments:n})},g=s.permutive={config:{apiKey:u,environment:p,projectId:l,eventsCacheLimitBytes:h,delayedInitialisation:r,viewId:a?.pageViewId||(0,D.zE)()},q:[],addon:f("addon"),consent:f("consent"),identify:f("identify"),on:f("on"),once:f("once"),query:f("query"),ready:f("ready"),segment:f("segment"),segments:f("segments"),track:f("track"),trigger:f("trigger"),user:f("user"),init:f("init")};g.ready((()=>{i(`ready in ${Date.now()-d}ms`),t.emit("permutive ready",g)})),t.on("track in permutive",(async(e,t)=>{i("track:",e,t),s.permutive.track(e,t)}));const m=n("plugins.permutive.dependenciesTimeout",2e3),v=t.invokeAll({message:["dmp","admantx"],timeout:m}).then((e=>{let[t]=e;return{page:{admants:t}}})),y=s.RTA?.ids?.then((e=>({user:{id:e.user,status:"logged out"}})))||Promise.resolve({}),b=(0,P.tN)(m,y),_=await Promise.all([v,b]),w=S()({page:{type:o?.contentType,tags:o?.topics,article:{id:o?.articleId,title:o?.articleTitle,authors:o?.authorsShortNames,categories:o?.channel?[o.channel.substring(1)]:void 0,publishedAt:o?.publishedDate?.toISOString()||void 0,modifiedAt:o?.updatedDate?.toISOString()||void 0,paywall:a?.isPaywalled,sponsorname:a?.sponsorName}}},..._);if(i("web context:",w),w.user){const e={id:w.user.id,tag:c};i("identity:",e),s.permutive.identify([e])}s.permutive.addon("web",w)})({...e,delayedInitialisation:a}),await t.invoke("import script",o.replace("{{WORKSPACE_ID}}",i)),a&&r.permutive.init()}return r.permutive}));(0,We.F3)("permutive",{vendorIds:{gdpr:[361]},purposeIds:{gdpr:"N/A"},run:Bo});const Uo=()=>JSON.parse(__webpack_require__.g.localStorage.getItem("_pdfps")||"[]"),Lo=e=>{let t=[];try{const e=localStorage.getItem("_ppam"),n=localStorage.getItem("_pcrprs"),r=localStorage.getItem("_psegs"),i=r?JSON.parse(r).map(Number).filter((e=>e>=1e6)).map(String):[],o=e?JSON.parse(e):[];t=[...n?JSON.parse(n):[],...o,...i]}catch(t){e.error("unable to parse permutive segments")}return t};async function Bo(e){const{broker:t,getConfig:n,log:r,win:i}=e;r.time("fetching taxonomy"),r.time("loading permutive");const o=Lo(r);r("bidder segments",o);const a=No(e);t.register("provide user bidder segments",(()=>({provider:"permutive",segments:o})));const s=Date.now(),d=fetch(n("permutive.taxonomyURL","https://api.permutive.com/v2.0/watson?k=3ef52308-86bd-4d8a-a2f7-802b6c3d62a9"),{body:JSON.stringify({url:`${location.protocol}//${location.host}${location.pathname}`,classify:!0}),credentials:"omit",method:"POST",mode:"cors",referrer:`${location.protocol}//${location.host}${location.pathname}`,referrerPolicy:"strict-origin-when-cross-origin"}).then((e=>e.json())).catch((()=>{})),l=t.until("permutive ready").then((()=>(r.timeEnd("loading permutive"),Date.now()-s))),c=d.then((()=>(r.timeEnd("fetching taxonomy"),Date.now()-s)));function u(){const e=window.localStorage.getItem("permutive-id");e&&(t.emit("external user ids",{permutive:e}),t.emit("sync userId","permutive",e,location.hostname))}t.register("provide page taxonomy",(()=>d)),window.localStorage.getItem("permutive-id")?u():a.then(u),t.register("call for page analytics",(async()=>{if(i.permutive?.config){const{config:{apiVersion:e,sdkType:t},sdkVersion:n}=i.permutive;return{perm:{a:e,st:t,sv:n}}}})),t.register("call for page-unload",(async()=>({prt:await l,trt:await c}))),t.emit("set page level targeting",a.then((e=>{const t=Uo();r("gam segments",t);const n=window.localStorage.getItem("permutive-id"),i={permutive:t,pvid:e.config.viewId};return n?{...i,puid:n,ptime:Date.now().toString()}:i})))}async function qo(e){const{broker:t,DM:n,win:r}=e,i=n?.pageEvents,o=(0,_.h)("permutive");if(!i)return;const a=No(e),s={},d={};let l=1;await a;const c=e=>{const t=e.videoId,n={...s[t]};e.ratio>0&&(n.progress=e.ratio,o(`Sending VideoProgress Event, id: ${t}`,n),r.permutive.track("VideoProgress",n))},u=e=>{const t=e.videoId,{lineItemId:n,advertiserName:i,creativeId:a,dealId:l}=e.adImpression||{},c={id:n&&String(n)||void 0,advertiserName:i,creativeId:String(a),deal_id:String(l)};d[t]=c;const u={...s[t],ad:c};o(`Sending VideoAdPlay Event, id: ${t}`,u),r.permutive.track("VideoAdPlay",u)},p={[i.VIDEO_DATA_READY]:e=>{const t=e.videoId;s[t]=((e,t)=>{const{title:n,referenceId:r,autoplay:i}=e;return{video:{name:n,id:String(r)},autoStart:i,playId:t}})(e,String(l)),o(`videoDataReady Event, id: ${t}`,s[t]),l++},[i.VIDEO_CONTENT_STARTED]:e=>{let{videoId:t}=e;const n=s[t];o(`Sending VideoPlay Event, id: ${t}`,n),r.permutive.track("VideoPlay",n)},[i.VIDEO_PROGRESS]:c,[i.VIDEO_ADVERT_IMPRESSION]:u,[i.VIDEO_ADVERT_COMPLETED]:e=>{let{videoId:t}=e;const n={...s[t],ad:{...d[t]}};o(`Sending VideoAdComplete Event, id: ${t}`,n),r.permutive.track("VideoAdComplete",n),delete d[t]},[i.VIDEO_CONTENT_COMPLETED]:e=>{e={...e,ratio:1},c(e),delete s[e.videoId]}};Object.entries(p).forEach((e=>{let[n,r]=e;o("Registering",`video page event ${n}`),t.on(`video page event ${n}`,((e,t)=>{r(t)}))})),t.on("video.ad-impression",u)}function Fo(e){let{broker:t,getConfig:n}=e;const r=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),i=n("plugins.permutive.indexedDBVersion",2),o=new Promise((e=>{const t=indexedDB.open(r,i);t.onsuccess=async()=>{const n=t.result,r=await Promise.all(Object.values(n.objectStoreNames).map((e=>{const t=n.transaction(e,"readonly").objectStore(e).getAll();return new Promise((e=>{t.onsuccess=()=>{const n=t.result.reduce(((e,t)=>t.byteLength?e+t.byteLength:t.length?e+t.length:e),0);e(n)}}))})));n.close(),e(r.reduce(((e,t)=>e+t),0))}}));t.register("call for page analytics",(async()=>({indexedDB:{permutive:await o}})))}function Vo(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),function(e,t){if(void 0===e)throw new TypeError("attempted to get private static field before its declaration")}(n),function(e,t){return t.get?t.get.call(e):t.value}(e,n)}qo.vendorIds={gdpr:[361]},qo.purposeIds={gdpr:"N/A"},Fo.ccpa={enabledIfDissent:!0},Fo.gdpr={enabledIfDissent:!0},(0,We.F3)("dmp.moat",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("dmp.moat.url","https://z.moatads.com/mailonlineprebidheader526476985912/moatheader.js");r("config:",{URL:i});const o=new Promise((e=>{__webpack_require__.g.moatYieldReady=()=>{r.enabled&&__webpack_require__.g.moatPrebidApi.enableLogging(),e(__webpack_require__.g.moatPrebidApi)}}));t.emit("set page level targeting",o.then((e=>{const t=e.getMoatTargetingForPage();return r("page targeting",t),t||{}}))),t.register("get tags",(async e=>{let{slot:t}=e;const n=(await o).getMoatTargetingForSlot(t.pos);return r({[t.pos]:n}),n||{}})),await t.invoke("import script",i)},vendorIds:{gdpr:[772]}});const zo=()=>{};class $o{constructor(e){var t,n,r;t=this,r=e=>{e.forEach((e=>{(this.callbacks.get(e.target)||zo)(e,e.intersectionRatio>=Math.min(...this.intersectionObserver.thresholds))}))},(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n="_onIntersect"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.callbacks=new WeakMap,this.intersectionObserver=new IntersectionObserver(this._onIntersect,e)}observe(e,t){return this.callbacks.set(e,t),this.intersectionObserver.observe(e),()=>this.unobserve(e)}unobserve(e){this.callbacks.delete(e),this.intersectionObserver.unobserve(e)}}function Wo(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}class Ho{static get(e){const t=`${e}px`;return t in Vo(this,Ho,Go)||(Vo(this,Ho,Go)[t]=new $o({rootMargin:t})),Vo(this,Ho,Go)[t]}}var Go={writable:!0,value:{}};function Xo(e){return e.playerState&&["contentWaiting","contentPlaying","adPlaying","adsWaiting","started"].includes(e.playerState.getStateName())}function Jo(){return Array.from(document.querySelectorAll("[id^=vjs_video]:not(.vjs-tech)")).filter((e=>e instanceof HTMLElement&&"player"in e))}var Ko=__webpack_require__(9231);function Yo(e,t,n){return e.has(t)?e.get(t):n}function Qo(e,t,n){return function(e,t,n){return new Map(e).set(t,n)}(e,t,n(Yo(e,t)))}function Zo(e,t){const n=new Map;for(const[r,i]of e)n.set(r,t(r,i));return n}function ea(e,t){return Yo(e.molFeVideoPlayers,t,{})?.playing}function ta(e){return function(e,t){for(const[n,r]of e)if(t(0,r))return!0;return!1}(e,((e,t)=>{let{playing:n}=t;return!!n}))}function na(e,t){return t.playing||e.seeking||t.mpuPlayerDisplayed?t:{...t,adInteraction:!1,playing:t.focused,shouldResume:!0,molFeVideoPlayers:Zo(t.molFeVideoPlayers,((e,t)=>({...t,playing:!1,shouldResume:!1})))}}function ra(e,t){return!t.playing||e.seeking?t:{...t,playing:!1,shouldResume:!(t.focused&&!t.adInteraction)&&t.shouldResume}}function ia(e){return"molFeVideoPlayers"in e.state}function oa(e){let{broker:t,getConfig:n,log:r,player:i,store:o}=e;const a=new so.jG;if(a.add(function(e,t){const n=new so.jG;return n.addEventListener(window,"blur",(()=>{const n=document.hasFocus();t("Blurred",{"has focus?":n}),n||e.dispatch({type:"blur"})})),n.addEventListener(document,"visibilitychange",(()=>{const{hidden:n}=document;t("Visibility change",{"hidden?":n}),n&&e.dispatch({type:"blur"})})),n.addEventListener(window,"focus",(()=>{setTimeout((()=>{e.dispatch({type:"focus"})}),100)})),()=>n.dispose()}(o,r.extend("window"))),a.add(function(e,t,n){if(!ia(t))return()=>{};const{DM:r}=__webpack_require__.g;if(!r)return n("no mol-fe video players"),()=>{};const i=new $o({threshold:.5}),o=new so.jG,a=new WeakSet;return r.later("videoplayer-ready",(()=>{function s(e){if(!ia(t)||a.has(e))return;a.add(e),n("setupHandlers",e);const r=o.on(e,"play",(()=>{t.dispatch({type:"playMolFeVideoPlayer",molFeVideoPlayer:e})})),i=o.on(e,"pause",(()=>{e.seeking()||t.dispatch({type:"pauseMolFeVideoPlayer",molFeVideoPlayer:e})}));e.on("dispose",(()=>{n("DISPOSING",e.id()),r(),i(),o.remove(r),o.remove(i),t.dispatch({type:"disposeMolFeVideoPlayer",molFeVideoPlayer:e}),a.delete(e)}))}Jo().forEach((e=>{s(e.player),t.dispatch({type:"newMolFeVideoPlayerDetected",molFeVideoPlayer:e.player,isInPortraitVideoCarousel:e.player.el().matches("[data-mol-fe-xpmodule-originals] *")}),o.add(i.observe(e,((n,r)=>{r?t.dispatch({type:"scrollMolFeVideoPlayerInToView",molFeVideoPlayer:e.player}):t.dispatch({type:"scrollMolFeVideoPlayerOutOfView",molFeVideoPlayer:e.player})})))})),t.state.molFeVideoPlayers&&n("molFeVideoPlayers Found",t.state.molFeVideoPlayers.size),r.molFeVideoplayer.on("videoPlaying",(r=>{n("playing",r.player.id()),a.has(r.player)||r.player.id()===e.id()||(n("new molFeVideoPlayer detected",r.player.id()),s(r.player),t.dispatch({type:"newMolFeVideoPlayerDetected",molFeVideoPlayer:r.player,isInPortraitVideoCarousel:r.player.el().matches("[data-mol-fe-xpmodule-originals] *")}),t.dispatch({type:"playMolFeVideoPlayer",molFeVideoPlayer:r.player}))}))})),()=>o.dispose()}(i,o,r)),a.add(function(e,t,n){const r=new so.jG;return r.on(e,"play",(function(){t.dispatch({type:"loading"})})),r.on(e,"playing",(function(){t.dispatch({type:"loaded"})})),r.on(e,"play/pause toggle",(function(){t.dispatch({type:"togglePlay",seeking:e.seeking()})})),r.on(e,"ads-manager",(e=>function(e,n){let{adsManager:r}=e;const{google:i}=window;t.dispatch({type:"startAdMode"}),r.addEventListener(i.ima.AdEvent.Type.CLICK,(()=>{!function(e){t.dispatch({type:"ad click"}),e.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"videoAdClicked"}})}(n)})),r.addEventListener(i.ima.AdEvent.Type.RESUMED,(()=>t.dispatch({type:"play",seeking:!1}))),r.addEventListener(i.ima.AdEvent.Type.PAUSED,(()=>t.dispatch({type:"pause",seeking:!1})))}(e,n))),r.on(e,"adstart",(function(){t.dispatch({type:"startAdMode"})})),r.on(e,"adend",i),r.on(e,"adskip",i),r.on(e,"ads-ad-started",(function(){t.dispatch({type:"adHasStarted"})})),()=>r.dispose();function i(){t.dispatch({type:"finishAdMode"})}}(i,o,t)),ia(o)){const{cancel:e}=t.on("display mpu_player",(()=>{o.dispatch({type:"displayMpuPlayer"})}));a.add(e);const{cancel:n}=t.on("destroy mpu_player",(()=>{o.dispatch({type:"destroyMpuPlayer"})}));a.add(n)}i.on("dispose",(()=>a.dispose())),n("players.mediator.fullScreenOverlaySignalEnabled",!1)&&(t.on("fullScreenOverlayStarted",(()=>{o.dispatch({type:"fullScreenOverlayStarted"})})),t.on("fullScreenOverlayEnded",(()=>{o.dispatch({type:"fullScreenOverlayEnded"})})))}function aa(e){let{log:t,player:n}=e;try{n.ads?.isInAdMode?.()?(t.extend("ad")("⏸"),n.ima?.pauseAd?.()):(t.extend("player")("⏸"),n.pause())}catch(e){t.error(e)}}function sa(e,t,n){let{playing:r}=e;r?function(e,t){Xo(e)||(t?.("play"),e.play())}(t,n):function(e,t){Xo(e)&&(t?.("pause"),e.pause())}(t,n)}function da(e){let{broker:t,getConfig:n,log:r,store:i}=e;t.emit("register remote debug object replacer",(e=>{if("VIDEO"===e?.tag?.tagName)return`VideoPlayer[id="${e.tag.id}"]`}));const o=async function(e){let{broker:t,getConfig:n,log:r}=e;const i=t.until("ad rendered","billboard");let o=n("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(n("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await i;const t=Date.now()-e;o=t>o?0:o-t}r(`Waiting ${o}ms until I allow you to play`),await(0,P.wR)(o)}({broker:t,getConfig:n,log:r});return e=>(i.subscribe(((t,n)=>function(e,t,n,r){if("molFeVideoPlayers"in r)for(const[e,n]of r.molFeVideoPlayers)sa(n,e,t.extend(`mol-fe[${e.id()}]`));!function(e,t,n){let{adMode:r,focused:i,playing:o}=n;o?function(e){let{log:t,player:n}=e;n.ima&&n.ads?.inAdBreak?.()?(t.extend("ad")("▶️"),n.ima.resumeAd()):n.paused()&&(t.extend("player")("▶️"),n.play())}({log:t,player:e}):i||o||!r?aa({log:t,player:e}):setTimeout((()=>aa({log:t,player:e})),300)}(e,t,r)}(e,r,0,n))),o.then((()=>{r("init store"),i.init(),oa({broker:t,getConfig:n,log:r,player:e,store:i})})))}function la(e,t){return t.playing||e.seeking?t:{...t,adInteraction:!1,playing:t.focused,shouldResume:!0}}function ca(e,t){return!t.playing||e.seeking?t:{...t,playing:!1,shouldResume:!(t.focused&&!t.adInteraction)&&t.shouldResume}}const ua={floating:function(e){let{log:t,pauseOnBlur:n,hasFullScreenOverlay:r}=e;return new Ko.A(function(e){let{pauseOnBlur:t,hasFullScreenOverlay:n}=e;return(e,r)=>{let i,o;switch(e.type){case"ad click":return{...r,adInteraction:!0,shouldResume:!0};case"blur":return r.focused?{...r,focused:!1,playing:!t&&r.playing,molFeVideoPlayers:Zo(r.molFeVideoPlayers,((e,n)=>({...n,playing:!t&&n.playing})))}:r;case"focus":return r.focused?r:(i=Zo(r.molFeVideoPlayers,((e,t)=>({...t,playing:t.inView&&t.shouldResume&&(!r.hasFullScreenOverlay||t.isInPortraitVideoCarousel)}))),{...r,adInteraction:!1,focused:!0,molFeVideoPlayers:i,playing:r.shouldResume&&!ta(i)&&!r.mpuPlayerDisplayed&&!r.hasFullScreenOverlay});case"play":return na(e,r);case"pause":return ra(e,r);case"togglePlay":return r.playing?ra(e,r):na(e,r);case"startAdMode":return r.adMode?r:{...r,adMode:!0,loading:!0};case"adHasStarted":return{...r,loading:!1};case"finishAdMode":return r.adMode?{...r,adInteraction:!1,adMode:!1,loading:!0}:r;case"loading":return r.loading?r:{...r,loading:!0};case"loaded":return r.loading?{...r,loading:!1}:r;case"scrollMolFeVideoPlayerInToView":return r.molFeVideoPlayers.get(e.molFeVideoPlayer)?.isInPortraitVideoCarousel||ea(r,e.molFeVideoPlayer)&&!r.playing?r:(i=Qo(r.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!0,playing:r.focused&&e.shouldResume&&!r.hasFullScreenOverlay}})),{...r,molFeVideoPlayers:i,playing:r.focused&&r.playing&&!ta(i)&&!r.hasFullScreenOverlay,shouldResume:r.focused&&!r.hasFullScreenOverlay?r.playing:r.shouldResume});case"scrollMolFeVideoPlayerOutOfView":return r.molFeVideoPlayers.get(e.molFeVideoPlayer)?.isInPortraitVideoCarousel||!ea(r,e.molFeVideoPlayer)&&r.playing?r:(i=Qo(r.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!1,playing:!1,shouldResume:r.focused&&!r.hasFullScreenOverlay?e.playing:e.shouldResume}})),{...r,molFeVideoPlayers:i,playing:r.focused&&r.shouldResume&&!ta(i)&&!r.hasFullScreenOverlay});case"playMolFeVideoPlayer":return ea(r,e.molFeVideoPlayer)?r:{...r,playing:!1,shouldResume:r.playing||r.mpuPlayerDisplayed,molFeVideoPlayers:Qo(r.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!0,shouldResume:!0}}))};case"pauseMolFeVideoPlayer":return ea(r,e.molFeVideoPlayer)?{...r,playing:r.shouldResume&&!r.hasFullScreenOverlay,molFeVideoPlayers:Qo(r.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!1,shouldResume:!1}}))}:r;case"newMolFeVideoPlayerDetected":return r.molFeVideoPlayers.has(e.molFeVideoPlayer)?r:(o=r.focused&&Xo(e.molFeVideoPlayer),i=r.molFeVideoPlayers.set(e.molFeVideoPlayer,{inView:Wo(e.molFeVideoPlayer.el()),playing:o,shouldResume:o,isInPortraitVideoCarousel:e.isInPortraitVideoCarousel}),{...r,playing:r.focused&&!ta(i),shouldResume:r.hasFullScreenOverlay||ta(i)?r.shouldResume:r.focused?r.playing:r.shouldResume,molFeVideoPlayers:i});case"disposeMolFeVideoPlayer":return r.molFeVideoPlayers.has(e.molFeVideoPlayer)?(a=r.molFeVideoPlayers,s=e.molFeVideoPlayer,i=function(e,t){const n=new Map;for(const[r,i]of e)t(r)&&n.set(r,i);return n}(a,(e=>e!==s)),ea(r,e.molFeVideoPlayer)?{...r,molFeVideoPlayers:i,playing:r.shouldResume&&!r.hasFullScreenOverlay&&r.focused}:{...r,molFeVideoPlayers:i}):r;case"displayMpuPlayer":return{...r,mpuPlayerDisplayed:!0,playing:!1};case"destroyMpuPlayer":return{...r,mpuPlayerDisplayed:!1,playing:r.shouldResume&&r.focused&&!r.hasFullScreenOverlay&&!ta(r.molFeVideoPlayers)};case"fullScreenOverlayStarted":return r.hasFullScreenOverlay?r:{...r,hasFullScreenOverlay:!0,playing:!1,molFeVideoPlayers:Zo(r.molFeVideoPlayers,((e,t)=>({...t,playing:!1})))};case"fullScreenOverlayEnded":return r.hasFullScreenOverlay?(i=Zo(r.molFeVideoPlayers,((e,t)=>({...t,shouldResume:!t.isInPortraitVideoCarousel&&t.shouldResume,playing:!t.isInPortraitVideoCarousel&&t.inView&&t.shouldResume}))),{...r,hasFullScreenOverlay:!1,molFeVideoPlayers:i,playing:r.shouldResume&&!ta(i)&&!r.mpuPlayerDisplayed}):r;case"__INIT__":i=new Map;try{for(const e of Jo()){const t=Xo(e.player);i.set(e.player,{inView:Wo(e),playing:t,shouldResume:t})}}catch(e){}return{...r,adInteraction:!1,adMode:!1,focused:document.hasFocus(),loading:!1,molFeVideoPlayers:i,playing:document.hasFocus()&&!ta(i),shouldResume:!0,mpuPlayerDisplayed:!1,hasFullScreenOverlay:n()};default:return r}var a,s}}({pauseOnBlur:n,hasFullScreenOverlay:r}),{adInteraction:!1,adMode:!1,focused:!1,loading:!1,playing:!1,shouldResume:!1,molFeVideoPlayers:new Map,mpuPlayerDisplayed:!1,hasFullScreenOverlay:!1},t)},slotted:function(e){let{log:t,pauseOnBlur:n,hasFullScreenOverlay:r}=e;return new Ko.A(function(e){let{pauseOnBlur:t,hasFullScreenOverlay:n}=e;return(e,r)=>{switch(e.type){case"ad click":return{...r,adInteraction:!0,shouldResume:!0};case"blur":return r.focused?{...r,focused:!1,playing:!t&&r.playing}:r;case"focus":return r.focused?r:{...r,adInteraction:!1,focused:!0,playing:r.shouldResume&&!r.hasFullScreenOverlay};case"play":return la(e,r);case"pause":return ca(e,r);case"togglePlay":return r.playing?ca(e,r):la(e,r);case"startAdMode":return r.adMode?r:{...r,adMode:!0,loading:!0};case"adHasStarted":return{...r,loading:!1};case"finishAdMode":return r.adMode?{...r,adInteraction:!1,adMode:!1,loading:!1}:r;case"loading":return r.loading?r:{...r,loading:!0};case"loaded":return r.loading?{...r,loading:!1}:r;case"fullScreenOverlayStarted":return r.hasFullScreenOverlay?r:{...r,hasFullScreenOverlay:!0,playing:!1};case"fullScreenOverlayEnded":return r.hasFullScreenOverlay?{...r,hasFullScreenOverlay:!1,playing:r.shouldResume}:r;case"__INIT__":return{adInteraction:!1,adMode:!1,focused:document.hasFocus(),loading:!1,playing:document.hasFocus(),shouldResume:!0,hasFullScreenOverlay:n()};default:return r}}}({pauseOnBlur:n,hasFullScreenOverlay:r}),{adInteraction:!1,adMode:!1,focused:!1,loading:!1,playing:!1,shouldResume:!1,hasFullScreenOverlay:!1},t)}};function pa(e){let{broker:t,getConfig:n,log:r,pos:i}=e;const o=n(`slotDescription.${i}.behaviour`,"floating");r("loading the",o,"behaviour store for pos:",i);const a=ua[o],s=n("jwplayer"===i?"players.commercial.pauseOnBlur":`videoDescription.${i}.pauseOnBlur`,!0);r("pauseOnBlur",s);let d=!1;return t.on("fullScreenOverlayStarted",(()=>{d=!0})),t.on("fullScreenOverlayEnded",(()=>{d=!1})),a?.({hasFullScreenOverlay:()=>d,log:r,pauseOnBlur:s})}function ha(e){return Array.from(e.querySelectorAll(".perform-player"))}function fa(e){let t=0;return(0,xe.walk)(e,(e=>!e.previousSibling),(e=>{const n=e.previousElementSibling;return n?.classList?.contains("mol-para-with-font")&&t++,n})),t}(0,We.F3)("players.onlyOneActivePlayer",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){const t=da({...e,store:pa({...e,pos:"jwplayer"})});e.broker.on("chromeless player ready",(n=>{n.el()._player=n,delete n.el().player;const r=e.win.MobileUtils?.isMobile()?"touchend":"click";n.on(r,(e=>{e.target.classList.contains("vjs-play-control")&&n.trigger("play/pause toggle")})),t(n)}))}}),(0,We.F3)("performPlayer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[323]},async run(e){let{broker:t,doc:n,getConfig:r,log:i,ownName:o,win:a}=e;const s="footballCoPlayerRender",d=r("performplayer",{enabled:!1,moveToSuitablePara:!0,rerender:300,id:"",idOverride:"",url:""});if(i("config:",d),!d.enabled)return void i("turned off via config, bailing");const l=t.until("dom ready");if(t.on("new perform player",(()=>{setTimeout((()=>{s in a?a[s]?.():i.error(`window.${s} does not exist!`)}),d.rerender||300)})),d.moveToSuitablePara)t.register("placement requests",(async()=>(await l,ha(n).map((e=>(i("found player",e.dataset.trackingId),{broker:t,log:i,sourcePlugin:o,targetParagraphIndex:fa(e),insertMethod:t=>{i("inserting",e,"after",t),t.insertAdjacentElement("afterend",e),c(e).catch(i.error)}}))))));else{await l;for(const e of ha(n))i("found player",e.dataset.trackingId),c(e).catch(i.error)}async function c(e){const n=d.id||d.idOverride||e.dataset.trackingId;n?(await t.invoke("load script",`${d.url}#${n}`,s,{},void 0,(t=>e.insertAdjacentElement("afterend",t))),t.emit("new perform player",n,e)):i.warn("Cannot find a tracking id")}}});var ga=__webpack_require__(9667),ma=__webpack_require__(8867);(0,We.F3)("players.targeting",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("auction.maxTime",2e3),o={},a=ga.uh(),s={broker:t,log:r,pageLevelTargetingStream:a,defaultTargetingCollectionTimeout:i};t.on("set page level targeting",(async e=>{const t=await e;t&&S()(o,t),a.push(t)}));const d=Promise.race([t.until("configure and start prebid"),(0,P.wR)(va)]),l=Promise.race([t.until("prebid ready"),(0,P.wR)(va)]);t.on("collect video tags",(async(e,t)=>{r("collect video args",e);const{cust_params:n,getVideoTagsNum:i}=e,a=r.extend(`${i}-${e.pos}-${e.offset}`),c={...s,log:a};await Promise.race([d,l]);const u=_a(c,e),{pos:p,autoplay:h,offset:f,videoId:g}=u;a(`requesting video bid for ${p}, ${h?"autoplay":"ctp"}, offset: ${f}, videoId: ${g}`);const m=wa(c,u);Object.keys(o).length&&(a("Dispatching known page level targeting:",o),t(null,{cust_params:{...o}})),n&&t(null,{cust_params:n}),function(e,t){e.on("data",(e=>{t(null,e)})).on("end",(()=>t(null,null)))}(m,((e,n)=>{t(e,n)}))})),t.on("start early video bid",(async e=>{await d;const t=_a(s,e),{pos:n,offset:i}=t,o=r.extend(`earlybid-${n}-${i}`);o("starting auction");const a=wa({...s,log:o},t);ya[e.pos]=a}))}});const va=(0,v.Jt)("players.targeting.prebidTimeout",1e3),ya={},ba=(e,t,n)=>{const r=ga.T0(e,ga.Tj(t,(e=>({cust_params:e}))));return e.on("end",(()=>n("Bidders finished, disconnecting pageLevelTargetingStream"))),r.on("close",(()=>n("Auction ended, disconnecting pageLevelTargetingStream"))),r};function _a(e,t){return t.pos=t.pos||"video",t.timeout=t.timeout||e.defaultTargetingCollectionTimeout,t.dfpPos=t.pos,(0,T.Up)(t,["autoplay","dfpPos","getVideoTagsNum","muted","offset","platform","pos","screen","timeout","videoId"])}function wa(e,t){const{broker:n,log:r}=e,{pos:i,autoplay:o,offset:a}=t;if(ya[i]){r(`found stream for ${i}, ${o?"autoplay":"ctp"}, offset: ${a}`);const e=ya[i];return delete ya[i],n.emit("cached video bid consumed",i,o?"autoplay":"ctp"),e}return(()=>{const s=(0,ma.A)();r(`creating bidStream for: ${i}, ${o?"autoplay":"ctp"}, offset: ${a}, auctionId: ${s}, timeout: ${t.timeout}`),t.auctionId=s;const d=function(e,t){const{broker:n,pageLevelTargetingStream:r}=e,{pos:i,timeout:o}=t,a={slot:{pos:i},...t};n.emit("start bidding",i);const s=[];return s.push(n.openStream({message:["get video tags",a],timeout:o,controlHandler:e=>{let{type:t,...r}=e;return n.emit("auction event",i,t,r)}})),ba(ga.h1(s),r,e.log)}(e,t),[l,c]=ga.Kv();return function(e,t,n,r,i){ga.vC(ga.pb(n,(e=>"object"==typeof e)),(r=>{r&&console.warn("video bidding ended with error:",r),e.emit("auction event",t,"end"),e.emit("video bidding ended",t,i),n.destroy()})).pipe(r)}(n,i,d,c,s),l})()}const Sa=e=>{!function(e){let{broker:t,getConfig:n,log:r}=e;if(!__webpack_require__.g.PageCriteria.containsVideo&&!__webpack_require__.g.document.querySelector('meta[property="og:video"]'))return;const i=n("plugins.slots.video.v2.pageLoadTimeout",4e3),[o,a]=n("plugins.slots.video.v2.mediaTypes.video.playerSize",[640,360]),s=()=>{const e=document.createElement("div");e.style.visibility="hidden";const n=document.createElement("video");n.setAttribute("muted","muted"),n.setAttribute("width",o),n.setAttribute("height",o),e.id="playerDiv_x",e.appendChild(n),document.body.appendChild(e);const s={articleURL:__webpack_require__.g.location.protocol+"//"+__webpack_require__.g.location.host+__webpack_require__.g.location.pathname,autoplay:!1,offset:0,platform:"dmplayer",pos:"video",screen:{width:o,height:a},timeout:i};r("start early video bid"),t.emit("start early video bid",s),setTimeout((()=>{document.body.removeChild(e)}),5e3)};t.on("cached video bid consumed","video","ctp",(()=>s())),t.on("plugins enabled",(()=>{__webpack_require__.g.DM.later("DOM_READY").then((()=>{r("trigger early bid"),s()}))}))}(e)},Ta=Sa;function Ia(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function ka(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ea(t,e))}function Aa(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ea(t,e),n),n}function Ea(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}Sa.ccpa={enabledIfDissent:!0},Sa.gdpr={enabledIfDissent:!0},Sa.disableIfNoAdsServable=!0;var Ca=new WeakMap,xa=new WeakMap;class Oa{constructor(e){Ia(this,Ca,{writable:!0,value:void 0}),Ia(this,xa,{writable:!0,value:void 0}),Aa(this,Ca,new Set([])),Aa(this,xa,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(0,I.Ai)((()=>{if(!e.size)return;const t=window.pageYOffset+(0,xe.getPageSize)()[3];for(const o of e){const[a,s]=o;n=a.element,r=a.offset,i=t,n&&"none"!==n.style.display&&i>=((0,xe.getOffset)(n)?.top||0)-r&&(s(),e.delete(o))}var n,r,i}),t)}(ka(this,Ca),e)),this.add=this.add.bind(this),this.dispose=this.dispose.bind(this);const t=this.disposable=new so.jG;t.addEventListener(__webpack_require__.g,"scroll",ka(this,xa)),"ontouchmove"in document&&t.addEventListener(document.documentElement,"touchmove",ka(this,xa))}add(e){ka(this,Ca).add(e)}dispose(){this.disposable.dispose(),ka(this,Ca).clear()}reset(){ka(this,Ca).clear()}size(){return ka(this,Ca).size}}function Pa(e,t){return"lazy"===t.type&&function(e,t){let n=null;try{n="$this"===t.trigger?document.getElementById(e.id):document.querySelector(t.trigger)}catch(e){console.error("ads","Invalid css selector in the loading trigger:",t.trigger)}return{id:e.parentId||e.id,element:n||document.getElementById(e.parentId||e.id),offset:t.offset,slot:e}}(e,t)||void 0}function Da(){return(0,b.Ri)("mol-home")}const Ra=(0,I.Gr)((function(e,t){return new Promise((n=>{const r=Da();if(r)t("cookie read from storage",r),n(r);else{const r=e=>{i(),t("homepage cookie set",e),n(e)},{unsubscribe:i}=e.pageEvents.subscribe(e.pageEvents.MOBILE_HOME_PAGE_VIEW,(e=>(n,r)=>{if(!r.swipe&&!r.swipe){const n=Da();t("user made mobile-home-page choice",n),n&&e(n)}})(r));__webpack_require__.g.DM?.later(["MOBILE_HOMEPAGE_DONE"],(()=>{r(Da()||"news")}))}}))})),ja="hp-panel",Ma=["news","puff"];function Na(e,t){const n="puff"===t?"dontmiss":__webpack_require__.g.adAreaId||"home";e.emit("set adSubareaId",n)}function Ua(e){return e.classList.contains(ja)}(0,We.F3)("slots.delayMount",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){const{log:t,...n}=e;(e=>{let{isHomepage:t,pageMeta:n}=e;return t&&"mobile"===n.renderPlatform})(e)?function(e){let{broker:t,DM:n,getConfig:r,log:i}=e;const o=new Map,a=r("slots.enabled",{}),s=Ra(n,i),d=function(e,t){return new Promise((n=>{e.once("dom ready",(async()=>{const r=Array.from(document.getElementsByClassName(ja)),i=await t,o=i&&{news:"news",showbiz:"puff"}[i],a=o&&r[Ma.indexOf(o)]||void 0;Na(e,o),n([r,a])}))}))}(t,s),l=new Oa;let c;n.pageEvents.subscribe(n.pageEvents.MOBILE_HOME_PAGE_SWIPE,(async(e,n)=>{i(`${e} event received, user on ${n.label} panel`);const[r]=await d,a=r[Ma.indexOf(n.label)];!function(e){let{broker:t,log:n,loadTracking:r,newPanel:i,slots:o}=e;Na(t,i),n("resetting loadTracking for panel:",i),r.reset();const a=[];o.forEach((e=>{let{slotDefinition:t,resolve:s,panelName:d,loadTrackingSettings:l}=e;if(d===i)if(l&&s){const e=()=>{o.set(t.id,{panelName:d,slotDefinition:t}),n(t.id," loadTrigger reached, resolving"),s()};n("adding loadTracking for",t.id),r.add([l,e])}else s?(n(t.id," resolving"),o.set(t.id,{panelName:d,slotDefinition:t}),s()):a.push([t.pos,t.id])}));const s=a.map((e=>{let[t]=e;return t})),d=a.map((e=>{let[,t]=e;return t}));s.length&&(n("refresh positions",s),t.emit("prepare to refresh ads",s),t.emit("refresh ads",{ids:d,positions:s,reason:"swipe"}))}({broker:t,log:i,loadTracking:l,newPanel:n.label,slots:o}),t.emit("panel updated",a,n.label)})),t.on("panel updated",(e=>{c=e})),d.then((e=>{let[,t]=e;c=t})),t.register("verify slot ready",(e=>function(e){let{currentPanel:t,enabledAds:n,loadTracking:r,log:i,pHomepageCookie:o,pPanelsRendered:a,slotDefinition:s,slots:d}=e;return new Promise((async e=>{await o;const[l,c]=await a;i("verifying slot",s.id);const u=document.getElementById(s.id),p=(0,xe.closest)(u,Ua),h=Ma[l.indexOf(p)],f=t||c;i("panelName:",s.id,h,f);const g=Pa(s,n[s.dfpPos||s.pos]);if(p&&p!==f)i(s.id," not in this panel: delaying"),d.set(s.id,{loadTrackingSettings:g,panelName:h,slotDefinition:s,resolve:e});else if(g){i(s.id," loadTracking",g);const t=()=>{d.set(s.id,{panelName:h,slotDefinition:s}),i(s.id," loadTrigger reached, resolving"),e()};r.add([g,t]),d.set(s.id,{loadTrackingSettings:g,panelName:h,slotDefinition:s,resolve:e})}else i(s.id," no loadTracking, resolving"),d.set(s.id,{panelName:h,slotDefinition:s}),e()}))}({currentPanel:c,enabledAds:a,loadTracking:l,log:i,pHomepageCookie:s,pPanelsRendered:d,slotDefinition:e,slots:o}))),((e,t)=>{let n="unset";t.then((e=>{n=e})),e.register("call for page analytics",(()=>({homepageCookie:n})))})(t,s),t.register("call for page-unload",(()=>{if(!l)return;let e=0;for(const t of o.values())t.resolve&&e++;return{sdm:e}}))}({...n,log:t.extend("mobileHomePage")}):function(e){let{broker:t,getConfig:n,log:r}=e;r("using default delay-mount");const i=n("slots.delayMount.checkInterval",500),o=new Oa(i),a=n("slots.enabled",{});t.register("verify slot ready",(e=>new Promise((t=>{const n=a[e.dfpPos||e.pos],i=Pa(e,n);i?(r(`delay mounting slot id: ${e.id}, pos: ${e.pos}, triggerId: ${i.element?.id}, offset: ${i.offset}`),o.add([i,function(){r("mounting",e.id,e.pos),t(...arguments)}])):(r("mounting slot",e.id,e.pos),t())})))),t.register("call for page-unload",(()=>o&&{sdm:o.size()}))}({...n,log:t.extend("default")})}});var La=__webpack_require__(4314),Ba=__webpack_require__.n(La);(0,We.F3)("slots.minuteMedia",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[918]},async run(e){let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;if(r("enabled"),"article"!==i.pageType)return void r("Not suitable for PageCriteria.pageType:",i.pageType);__webpack_require__.g.addEventListener("voltaxPlayerLoaded",(e=>{let{detail:n}=e;const r=n.playerName,i=__webpack_require__.g.voltax.getPlayersByName(r);t.emit("new minute media player",i[0])})),__webpack_require__.g.voltax&&__webpack_require__.g.voltax.getAllPlayersOnPage().forEach((e=>t.emit("new minute media player",e)));const o={insertMethod:async function(e){await async function(e){let{getConfig:t,log:n}=e;const r=t("pos.minuteMedia.tcfEventBarrier",!1);var i;r&&__webpack_require__.g.__tcfapi&&(n("waiting for TCF event",r),await(i=r,new Promise((e=>{__webpack_require__.g.__tcfapi("addEventListener",2,(t=>{i===t.eventStatus&&(__webpack_require__.g.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId),e(t))}))}))),n("received TCF event",r))}({getConfig:n,log:r.extend("tcf")});const t=document.createElement("div");t.classList.add("minute-media-container");const i=document.createElement("div");i.classList.add("minute-media"),n("pos.minuteMedia.watermark",!0)&&i.classList.add("watermark"),t.appendChild(i),n("pos.minuteMedia.addLabel")&&i.classList.add("minute-media-label"),e.parentElement.insertBefore(t,e);const o=n("pos.minuteMedia.googleTagManagerId","GTM-PL4PD49"),a=`https://www.googletagmanager.com/gtm.js?id=${o}`,s=`https://www.googletagmanager.com/ns.html?id=${o}`;(0,xe.createIframe)({content:Ba()({configScript:n("pos.minuteMedia.configScript","https://bucket1.mm-syringe.com/prod/configs/c4e65ff4-b385-d838-b9da-8cc3d8d9dfdb.js"),googleTagManagerScript:a,googleTagManagerIframeScript:s,injectorScript:n("pos.minuteMedia.injectorScript","https://bucket1.mm-syringe.com/prod/injector/injector.1.5.3.js")}),insertMethod:e=>i.appendChild(e),log:r.extend("🏗")})},log:r,margin:n("pos.minuteMedia.margin",{top:30,bottom:60}),sourcePlugin:"minutemedia",targetParagraphIndex:n("pos.minuteMedia.paragraphIndex",4)};t.register("placement requests",(()=>o))}}),(0,We.F3)("slots.mpuComments",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,pageMeta:i,pageCriteria:o}=e;if("mobile"!==i.renderPlatform||"article"!==o.pageType)return void r("mpu_comments not rendered on this page type, bailing");const a=n("slots.enabled",{}),s=Object.keys(a).filter((e=>e.startsWith("mpu_comments")));s.length?(t.on("slots initialized",(()=>{DM.later("bundle",(()=>DM.molFeComments&&DM.molFeComments.events.subscribe("loaded",(()=>{Fa=!0,qa.clear();const e=function(e,t){const n=()=>{t("running cleanupHandler"),__webpack_require__.g.location.hash.match(/^#comments-\d+$/)||(Fa=!1,__webpack_require__.g.removeEventListener("hashchange",n),t("cleaning up slots"),qa.forEach((n=>{t("destroying",n),e.emit("destroy slot",n)})))};return n}(t,r);__webpack_require__.g.addEventListener("hashchange",e),Va(t,s,n,r)}))))})),t.on("ad rendered",((e,n)=>{const i=n.slot.getSlotElementId();s.includes(i)&&(Fa?(r("ad rendered, id:",i),qa.add(i)):(r("ad no longer in comments panel, destroying",i),t.emit("destroy slot",i)))}))):r("no mpu_comments positions enabled, bailing")}});const qa=new Set;let Fa=!1;const Va=(e,t,n,r)=>{const i=n("slotDescription.mpu_comments.positions",[3,8]),o=document.querySelectorAll("#comments .comment"),a=o.length;t.filter(((e,t)=>i[t]<a)).forEach(((t,n)=>{r(`inserting ad, id: ${t}, in comment position ${i[n]}`),((e,t,n)=>{const r=e[n],i=(e=>{const t=document.createElement("div");t.id=e,t.className=`adHolder mpu molads_${e}`,t.appendChild(vt());const n=document.createElement("li");return n.appendChild(t),n})(t);r.parentNode.insertBefore(i,r)})(o,t,i[n]),e.emit("slot mounted",{pos:t,id:t})}))};(0,We.F3)("slots.rendered",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n={};t.on("ad rendered",((e,r)=>{if("publisher_ads"===r.serviceName&&!r.isEmpty){const e=r.slot.molAd,t=e.type||"1x1",i=[e.pos,e.parentId,t].join("|");n[i]={pos:e.pos,id:e.parentId,sz:t,cid:r.creativeId,lid:r.lineItemId}}t.emit("ads rendered update",Object.values(n))}))}});const za=e=>{let t,n,{broker:r,getConfig:i}=e,{offsetBelowElement:o,triggerElementId:a}=i("plugins.slots.leaderTop",{offsetBelowElement:0,triggerElementId:"billBoard"});o=parseInt(o);const s=()=>{const e=document.getElementById(a);if(!e)return;const r=(0,xe.getOffset)(e),i=(0,xe.getElementComputedHeight)(e),s=(0,xe.getOffset)(document.getElementById("page-container"));if(!t&&document.getElementById("smartBanner")){const e=document.getElementById("smartBanner").getElementsByTagName("a")[0];t=e.addEventListener("click",(n=>{e.removeEventListener("click",t),document.getElementById("leader_top").classList.remove("below-smart-banner")}))}n&&document.getElementById("leader_top").classList.add("styled"),__webpack_require__.g.scrollY<r.top+i-s.top+o?setTimeout((()=>{document.getElementById("leader_top").style.display="none"})):(document.getElementById("smartBanner")&&"block"===__webpack_require__.g.getComputedStyle(document.getElementById("smartBanner")).getPropertyValue("display")?document.getElementById("leader_top").classList.add("below-smart-banner"):document.getElementById("leader_top").classList.remove("below-smart-banner"),setTimeout((()=>{d&&(d(),d=void 0),document.getElementById("leader_top").style.display="block"})))};let d;r.intercept("slot ready for ad",((e,t)=>{let[n,r,i]=e;"leader_top"===r.pos?d=t:t()}));const l=document.createElement("div");r.once("slot defined",(()=>{l.id="leader_top",l.style.display="none",document.body.appendChild(l),r.emit("slot mounted",{pos:"leader_top"}),r.on("ad rendered","leader_top",(()=>{n=!0,s()})),r.on("dom ready",(()=>{s(),[1e3,2e3,3e3].forEach((e=>setTimeout(s,e))),document.addEventListener("scroll",__webpack_require__.g.DM.molFeMiniLodash.debounce(s,200),{passive:!0,capture:!0}),document.addEventListener("touchmove",__webpack_require__.g.DM.molFeMiniLodash.debounce(s,200),{passive:!0,capture:!0})}))}))};za.ccpa={enabledIfDissent:!0},za.gdpr={enabledIfDissent:!0},za.disableIfNoAdsServable=!0;const $a=za,Wa="puff_ad_others";function Ha(e){let{broker:t,getConfig:n}=e;if(n("plugins.slots.puffAdOthers.renderInfiniteList",{enabled:!1}).enabled){const e=n("slotDescriptions.initial")[Wa],r=e&&(0,x.w1)(e.size);t.on("infinite-list append",(e=>{const i=r&&n("plugins.slots.puffAdOthers.addWatermark",!0);for(const n of e.getElementsByClassName("puff-ad-other"))i&&Ga(n,r[0],r[1]),t.emit("slot mounted",{pos:Wa,containerId:n.id})}))}}function Ga(e,t,n){e.classList.remove("puff-ad");const r=document.createElement("div");r.classList.add("ad-exp-container"),r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.clip=`rect(0,${t}px,${n}px,0)`;const i=document.createElement("div");i.classList.add("adHolder"),i.classList.add("puff-ad"),i.classList.add("watermark"),i.style.position="relative",i.style.width=`${t}px`,i.style.height=`${n}px`,i.appendChild(r);const o=e.parentNode;return o.parentNode.replaceChild(i,o),r.appendChild(e),i}Ha.ccpa={enabledIfDissent:!0},Ha.gdpr={enabledIfDissent:!0},Ha.disableIfNoAdsServable=!0;const Xa={refreshCount:0};async function Ja(e){let{broker:t}=e;const n={};t.intercept("slot defined",((e,t)=>{let[r,{pos:i}]=e;n[i]=Xa,t()})),t.on("destroy slot",(e=>{delete n[e]})),t.register("get tags",(e=>{let{slot:{pos:t}}=e;return[n[t]]})),t.register("get video tags",(e=>{let{slot:{pos:t}}=e;return{cust_params:{...n[t]||Xa}}})),t.intercept("refresh ads",((e,t)=>{let[r,{positions:i,plugins:o,reason:a}]=e;try{i.forEach((e=>{n[e]={refresh:!0,refreshCount:n[e].refreshCount+1,refreshReason:a}}))}finally{t()}})),await t.until("dom ready");const r=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM.molFeTracking.pageEvents;r&&r.subscribe("video.ad-impression",((e,t)=>{let{tag:r}=t;const i=(0,Rt.BU)(r),{cust_params:{player:o,refreshCount:a=0}}=i;n[o]={refresh:!0,refreshCount:Number(a)+1}})),t.on("video.ad-impression",(e=>{let{playerId:t}=e;const{refresh:r,refreshCount:i}=n[t]||{refresh:!0,refreshCount:0};n[t]={refresh:r,refreshCount:i+1}}))}function Ka(e){const{activeElement:t}=e.document;if("IFRAME"===t?.tagName)try{const e=t.contentWindow;if(!e)throw new Error("cant access win");return Ka(e)}catch(e){return}return e}function Ya(e){let{log:t,dataPrefix:n="_dm_ads_message\n",scope:r,win:i=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,so.q2)(i,"message",(i=>{let{data:o}=i;if("string"==typeof o&&o.startsWith(n)){let i;try{i=JSON.parse(o.substring(n.length))}catch(e){return void t?.error(e)}if(a=i,(0,T.Gv)(a)&&"scope"in a&&"string"==typeof a.scope&&"data"in a){if(r&&i.scope!==r)return;e(i)}}var a}))}function Qa(){return document.querySelector(".billboard-container")}function Za(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa();return e?.querySelector(".sticky-container")}function es(e,t){switch(e.type){case"__DEINIT__":case"disable stickyness":return t.sticky?{...t,sticky:!1}:t;case"pause":return t.paused?t:{...t,paused:!0};case"resume":return t.paused?{...t,paused:!1}:t;default:return t}}Ja.ccpa={enabledIfDissent:!0},Ja.gdpr={enabledIfDissent:!0},Ja.disableIfNoAdsServable=!0,(0,We.F3)("sticky.billboard",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},async run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=new so.jG;let a;function s(){a&&(o.add(a.subscribe(((e,t)=>function(e,t,n){if(document.querySelector("#billBoard"))if(!n.sticky||n.paused){const e=Za();e&&(e.style.height="100%")}else if(n.sticky){const e=Qa(),t=Za(e),n=(0,v.Jt)("sticky.billboard.stickyLength",300);var r=(0,xe.getElementComputedHeight)(e);if(!n||!r||!t)return;t.style.height=`${n+r}px`}}(0,0,t)))),a.init(),async function(e){let{broker:t,disposable:n,store:r}=e;(function(e,t,n){e.onceBrokerEvent(t,"unstick position","billboard",(()=>{n.deinit()})),e.onBrokerEvent(t,"disable sticky position","billboard",(()=>{n.dispatch({type:"disable stickyness"})}))})(n,t,r),function(e,t,n){e.addEventListener(window,"message",(e=>{let{data:t}=e;var r;r=t,(0,T.Gv)(r)&&"mol-fe-reader-comments-overlay"===r.scope&&(0,T.Gv)(r.data)&&"boolean"==typeof r.data.isMolFeReaderCommentsOverlayOpen&&(t.data.isMolFeReaderCommentsOverlayOpen?n.dispatch({type:"pause"}):n.dispatch({type:"resume"}))}))}(n,0,r)}({broker:t,disposable:o,getConfig:n,store:a}))}t.on("dfp slot requested","billboard",(e=>(o.dispose(),a?.deinit(),async function(e){const t=e.slot?.molAd?.parentId;r("billboard rendered, id:",t);const d=document.getElementById(t);if(!d)return;a=function(e){let{log:t}=e;return new Ko.A(es,{paused:!1,sticky:!0},t)}({log:r.extend("store")}),d.classList.add("sticky");const l=n("sticky.billboard.enableFromMessage",!1);if(r("waitForDMAdsMessage",l),l){r("waiting for dm_ads_message to enable sticky");const e=o.add(Ya((t=>{(0,T.Gv)(t.data)&&"billboard"===t.data.pos&&(r("heard dm_ads_message"),e(),s())}),{log:r,scope:"retain_stickiness",win:i}))}else s()}(e))))}}),(0,We.F3)("sticky.gallery",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.sticky.gallery.ads",["sticky_banner_gallery_top","sticky_banner_gallery_bottom"]),o=n("slots.enabled",{}),a=Object.keys(o),s=i.filter((e=>a.includes(e)));if(!s.length)return void r("no gallery ads enabled... bailing");const d=n("slotDescriptions.initial",{}),l=(0,T.Up)(d,s);r("enabledAds",l);const c={};let u=null,p=null,h=null,f=null,g=null,m=null;const v={sticky_banner_gallery_top:e=>{p.style.top=`${e.height}px`},sticky_banner_gallery_bottom:e=>{h.style.bottom=`${e.height}px`,g.style.bottom=`${e.height+f.height}px`}},y=e=>{const t={width:["left","right"],height:["top","bottom"]},n="width"===e?0:1,r=Object.keys(l).filter((n=>n.includes(t[e][0])||n.includes(t[e][1])));if(r.length)return r.map((e=>{if(l[e].size.length)return 1===l[e].size.length?l[e].size[0][n]:l[e].size.reduce(((e,t)=>t[n]>e[n]?t[n]:e[n]))})).reduce(((e,t)=>t>e?t:e))},b=()=>{r("Gallery openned"),(()=>{const e=y("width"),t=y("height"),{innerWidth:n,innerHeight:r}=window,i=e?n-2*(e+rs):n,o=t?r-2*t:r;Array.from(document.querySelectorAll("#mobileGallerySwipeWrap > div > div:first-child")).filter((e=>e.firstElementChild)).map((e=>e.firstElementChild)).forEach((e=>{const t=ns(e);let n=Math.min(o/t.height,i/t.width);e.classList.contains(".vjs-video-container")&&o<i&&(n*=.78),e.style.transform=`scale(${n})`}))})(),Object.entries(l).forEach((e=>{let[n,i]=e;const o=(0,T.Up)(i,["pos","id"]);r("creating gallery ad",o),c[n]={container:ts({broker:t,rootElement:u,ad:o})},v[n]&&v[n](ns(c[n].container)),MobileUtils.isMobile()&&(n.includes("top")&&(c[n].addEl=p),n.includes("bottom")&&(c[n].addEl=h))})),m=t.on("ad rendered",(e=>{const t=c[e]&&c[e].container.querySelector(".placeholder");t&&t.remove()}))},_=()=>{m.cancel(),MobileUtils.isMobile()&&MobileUtils.isLandscape()&&(p.style.top="0",h.style.bottom="0",g.style.bottom=`${f.height}px`),Object.entries(c).forEach((e=>{let[n,r]=e;r.container.remove(),t.emit("destroy slot",n)}))};MobileUtils.isMobile()&&window.addEventListener("orientationchange",(()=>{setTimeout((()=>{MobileUtils.isLandscape()?_():b()}),200)})),t.on("dom ready",(()=>{const e=document.getElementById("mobileGalleryModal");e&&(DM.pageEvents.subscribe("gallery.opened",b),DM.pageEvents.subscribe("gallery.closed",_),u=document.getElementById("mobileGallerySlider"),p=e.querySelector(".top-bar"),h=e.querySelector(".navigation-bar"),f=ns(h),g=e.querySelector(".caption-bar"))}))},disableIfNoAdsServable:!0});const ts=e=>{let{broker:t,rootElement:n=document.body,ad:r,className:i,cssText:o}=e;const a=document.createElement("div");a.id=r.pos;const s=document.createElement("div");return s.className="placeholder",a.appendChild(s),i&&(a.className=i),o&&(a.style.cssText=o),n.appendChild(a),t.emit("slot mounted",r),a},ns=e=>{const t=getComputedStyle(e,"");return{width:(parseFloat(t.width)||0)+(parseFloat(t.borderLeftWidth)||0)+(parseFloat(t.borderRightWidth)||0),height:(parseFloat(t.height)||0)+(parseFloat(t.borderTopWidth)||0)+(parseFloat(t.borderBottomWidth)||0)}},rs=20;function is(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function os(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ss(t,e))}function as(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ss(t,e),n),n}function ss(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}(0,We.F3)("sticky.mpuLeft",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n,getConfig:r}=e;n("init");const i=r("slots.enabled",{});if(!Object.keys(i).includes("mpu_left"))return void n("mpu_left isn't enabled, bailing");const o=r("slotDescriptions.initial",{}),a=o.mpu_left;if(!a||(0,T.Im)(a))return void n("insufficient config to render mpu_left... bailing",a);const s=new Promise((e=>{t.on("slot defined",(t=>{let{pos:n}=t;n.includes("sky_left_top")&&e()}))}));n("waiting for let sky container"),await s;const d=document.getElementById(o.sky_left_top.id);if(!d)return void n.error("no sky left element, bailing");const l=document.createElement("div");l.id=a.id,(0,xe.insertAfter)(l,d);const c={...a};t.emit("slot mounted",c),n("slot created",c,l),document.documentElement.classList.add("mpu_left_on"),await t.until("ad rendered","mpu_left"),n("slot rendered")}}),(0,We.F3)("sticky.psuedoClasses",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},async run(){await(0,xe.loaded)();const e=new fs(gs),t=document.querySelectorAll(".sticky");for(const n of t)e.observe(n);const n=new MutationObserver((t=>function(e,t){for(const r of t){const t=r.target;t instanceof HTMLElement&&((n=t)instanceof Element&&n.classList.contains("sticky")?e.observe(t):e.unobserve(t))}var n}(e,t)));n.observe(document.body,{attributeFilter:["class"],attributes:!0,subtree:!0})}});var ds=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,ps=new WeakMap,hs=new WeakMap;class fs{constructor(e){is(this,ds,{writable:!0,value:[]}),is(this,ls,{writable:!0,value:[]}),is(this,cs,{writable:!0,value:void 0}),is(this,us,{writable:!0,value:e=>!os(this,ls).includes(e)&&(0,xe.getOffset)(e).top<=window.scrollY}),is(this,ps,{writable:!0,value:e=>(0,xe.getOffset)(e).top>window.scrollY}),is(this,hs,{writable:!0,value:()=>{const e=os(this,ds).filter(os(this,us)),t=os(this,ls).filter(os(this,ps));os(this,ls).push(...e),as(this,ls,os(this,ls).filter((e=>!t.includes(e)))),(e.length||t.length)&&os(this,cs).call(this,{in:e,out:t})}}),as(this,cs,e),window.addEventListener("scroll",(0,I.Ai)(os(this,hs),300),{passive:!0})}observe(e){os(this,ds).includes(e)||os(this,ds).push(e)}unobserve(e){as(this,ds,(0,q.Ai)(e,os(this,ds)))}}function gs(e){for(const t of e.in)t.setAttribute("stuck","stuck");for(const t of e.out)t.removeAttribute("stuck")}function ms(e,t){bs(e,t),t.add(e)}function vs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(e,t,n){bs(e,t),t.set(e,n)}function bs(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _s(e,t,n){return Is(t,e),n}function ws(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ts(t,e))}function Ss(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ts(t,e),n),n}function Ts(e,t){return e.get(Is(e,t))}function Is(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const ks="affix-off",As="affix-on",Es=e=>{const t=window.getComputedStyle(e),n=parseInt(t.getPropertyValue("margin-left")),r=parseInt(t.getPropertyValue("margin-right")),i=parseInt(t.getPropertyValue("margin-top")),o=parseInt(t.getPropertyValue("margin-bottom")),a=parseInt(t.getPropertyValue("padding-left")),s=parseInt(t.getPropertyValue("padding-right")),d=parseInt(t.getPropertyValue("padding-top")),l=parseInt(t.getPropertyValue("padding-bottom")),c=(parseInt(t.getPropertyValue("border-left")),parseInt(t.getPropertyValue("border-right")),parseInt(t.getPropertyValue("border-top")),parseInt(t.getPropertyValue("border-bottom"))),u=e.getBoundingClientRect(),p={left:u.left-n,right:u.right-r-a-s,top:u.top-i,bottom:u.bottom-o-d-l-c,width:0,height:0};return p.width=p.right-p.left,p.height=p.bottom-p.top,p};const Cs=()=>{};var xs=new WeakMap,Os=new WeakMap,Ps=new WeakMap,Ds=new WeakMap,Rs=new WeakMap,js=new WeakMap,Ms=new WeakMap,Ns=new WeakMap,Us=new WeakMap,Ls=new WeakMap,Bs=new WeakMap,qs=new WeakMap,Fs=new WeakMap,Vs=new WeakSet,zs=new WeakSet,$s=new WeakSet,Ws=new WeakSet,Hs=new WeakSet;class Gs{constructor(e){let{element:t,log:n,onAffix:r,onUnfix:i,onStopfix:o,relativeHorizontalElement:a,startStickyOffset:s=0,stopStickyOffset:d=Number.MAX_SAFE_INTEGER,stoppedPosition:l}=e;ms(this,Hs),ms(this,Ws),ms(this,$s),ms(this,zs),ms(this,Vs),ys(this,xs,{writable:!0,value:void 0}),ys(this,Os,{writable:!0,value:void 0}),ys(this,Ps,{writable:!0,value:void 0}),ys(this,Ds,{writable:!0,value:void 0}),ys(this,Rs,{writable:!0,value:void 0}),ys(this,js,{writable:!0,value:void 0}),ys(this,Ms,{writable:!0,value:void 0}),ys(this,Ns,{writable:!0,value:void 0}),ys(this,Us,{writable:!0,value:void 0}),ys(this,Ls,{writable:!0,value:void 0}),vs(this,"started",void 0),ys(this,Bs,{writable:!0,value:void 0}),ys(this,qs,{writable:!0,value:void 0}),ys(this,Fs,{writable:!0,value:void 0}),vs(this,"disable",void 0),Ss(this,xs,t),Ss(this,Ns,n),Ss(this,Os,r||Cs),Ss(this,Ps,i||Cs),Ss(this,Ds,o||Cs),Ss(this,js,a||t),Ss(this,Rs,Es(ws(this,js)).left),Ss(this,Ms,"stopFix");const c=window.getComputedStyle(ws(this,xs),null);Ss(this,Ls,c.getPropertyValue("position")),Ss(this,Us,c.getPropertyValue("top")),Ss(this,Bs,s),Ss(this,qs,d),Ss(this,Fs,l||ws(this,qs)),this.start=this.start.bind(this),this.setOffsets=this.setOffsets.bind(this),this.getOffsets=this.getOffsets.bind(this),this.started=!1,this.disable=Cs}start(){if(this.started)return;const e=_s(this,Ws,Ys).bind(this),t=(0,I.Ai)((()=>setTimeout(e)),200),n=_s(this,Hs,Qs).bind(this),r=(0,I.Ai)(n,200);return this.disable=()=>{ws(this,Ns).call(this,"cancelling sticky",ws(this,xs)),Ss(this,Ms,"cancelled"),this.started=!1,_s(this,$s,Ks).call(this),document.removeEventListener("scroll",t),window.removeEventListener("resize",r)},this.disable.bind(this),document.addEventListener("scroll",t),window.addEventListener("resize",r),this.started=!0,this.disable}setOffsets(e){let{startStickyOffset:t,stopStickyOffset:n,stoppedPosition:r}=e;Ss(this,Bs,t||ws(this,Bs)),Ss(this,qs,n||ws(this,qs)),Ss(this,Fs,r||ws(this,Fs)||ws(this,qs)),_s(this,Ws,Ys).call(this)}getOffsets(){return{startStickyOffset:ws(this,Bs),stopStickyOffset:ws(this,qs),stoppedPosition:ws(this,Fs)}}}function Xs(){ws(this,xs).style.display="none",ws(this,xs).classList.remove(ks),ws(this,xs).classList.add(As),ws(this,xs).style.left=ws(this,Rs)+"px",ws(this,xs).style.position="fixed",ws(this,xs).style.top="0",Ss(this,Ms,"affix"),ws(this,Os).call(this),setTimeout((()=>{ws(this,xs).style.display="block"}))}function Js(e){ws(this,xs).style.display="none",ws(this,xs).classList.remove(As),ws(this,xs).classList.add(ks),ws(this,xs).style.left="auto",ws(this,xs).style.position="absolute",ws(this,xs).style.top=`${e}px`,ws(this,Ds).call(this),Ss(this,Ms,"stopFix"),setTimeout((()=>{ws(this,xs).style.display="block"}))}function Ks(){ws(this,xs).style.display="none",ws(this,xs).classList.remove(As),ws(this,xs).classList.remove(ks),ws(this,xs).style.left="auto",ws(this,xs).style.position=ws(this,Ls),ws(this,xs).style.top=ws(this,Us),Ss(this,Ms,"unfix"),ws(this,Ps).call(this),setTimeout((()=>{ws(this,xs).style.display="block"}))}function Ys(){if("cancelled"===ws(this,Ms))return;const e=__webpack_require__.g.pageYOffset;ws(this,qs)<e?"stopFix"!==ws(this,Ms)&&(ws(this,Ns).call(this,"stop stickiness"),_s(this,zs,Js).call(this,ws(this,Fs))):ws(this,Bs)<e?"affix"!==ws(this,Ms)&&(ws(this,Ns).call(this,"enabling stickiness"),_s(this,Vs,Xs).call(this)):"unfix"!==ws(this,Ms)&&(ws(this,Ns).call(this,"reseting element"),_s(this,$s,Ks).call(this))}function Qs(){const e=Es(ws(this,js)).left;ws(this,Ns).call(this,"checkHorizontalPlacement triggered",ws(this,xs).id,e),Ss(this,Rs,e),"fixed"===ws(this,xs).style.position&&(ws(this,Ns).call(this,"checkHorizontalPlacement",e),ws(this,xs).style.left=e+"px")}const Zs=(e,t)=>{const n=e+"on",r=e+"off",i=document.documentElement;i.classList.remove(n),i.classList.remove(r),i.classList.add(t?n:r)};(0,We.F3)("sticky.skies",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:n,log:r}=e;if(window.getComputedStyle){try{ed(t)}catch(e){r("Missing configuration for leaderboard")}td(n("stickyAds",[]),t,r),await async function(){await(0,xe.loaded)();const e=document.querySelector(".puff li:nth-child(20)"),t=e?(0,xe.getOffset)(e)?.top:5e3,n=Array.from(document.querySelectorAll("\n    #sky-left-container .sticky-container:first-child,\n    #sky-right-container .sticky-container:first-child\n  "));for(const e of n)e?.parentNode?.querySelectorAll?.(".sticky-container")?.length&&(e.style.height=`${t}px`)}()}}});const ed=e=>{const t="molads_leader_top_";if(Zs(t,!1),(0,Q.isAdEnabled)({pos:"leader_top"})){const n=e.on("ad rendered","leader_top",(e=>{"leader_top"===(e.slot?e.slot.molAd:{}).parentId&&(n.cancel(),Zs(t,!e.isEmpty))}))}},td=(e,t,n)=>{e.forEach((e=>{/mpu_puff_\d{2,}/.test(e)&&((e,t,n)=>{if((0,Q.isAdEnabled)({pos:e})){n("init sliding mpu",e);const r=t.on("ad rendered",e,(t=>{if(!t.isEmpty&&(!(i=t)||i.isEmpty||!i.size||2!==i.size.length||300!==i.size[0]||600!==i.size[1])){r.cancel();const t=document.getElementById(e);if(t){const e=(0,xe.closest)(t,(e=>e.classList.contains("mpu_puff_wrapper")));e&&(e.classList.add("sliding_mpu"),((e,t,n)=>{n(e.id);const r=((e,t)=>{const n=window.getComputedStyle(t,null),r=(0,xe.getOffset)(t)?.top,i=parseInt(n.getPropertyValue("height")),o=r+i,a=window.getComputedStyle(e,null),s=parseInt(a.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,xe.getOffset)(e).top-r;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0).toString()}return{elementTop:r+parseInt(e.dataset.originalPadding),parentBottom:o,parentHeight:i,elementHeight:s,parentTop:r,marginBottom:parseInt(n.getPropertyValue("margin-bottom"))}})(e,t),i=r.elementTop,o=r.parentBottom-r.elementHeight;new Gs({element:e,startStickyOffset:i,stopStickyOffset:o,log:n.extend(e.id),relativeHorizontalElement:t,onAffix:()=>{e.style.bottom="",e.style.left=t.getBoundingClientRect().left+"px"},onStopfix:()=>{e.style.top="",e.style.bottom="0"}}).start()})(t,e,n))}}var i}))}})(e,t,n)}))},nd=e=>{let{broker:t,getPuffListStart:n,getOffElement:r,pos:i,id:o=i}=e;const a=t.on("ad rendered",i,(e=>{if(!e.isEmpty){a.cancel();const e=document.getElementById(o);if(!e)return;((e,t,n)=>{const r=e.parentNode,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;const n=getComputedStyle(t,null),r=(0,xe.getOffset)(t).top,i=parseInt(n.getPropertyValue("height")),o=r+i,a=getComputedStyle(e,null),s=parseInt(a.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,xe.getOffset)(e).top-r;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0)}return{elementTop:r+parseInt(e.dataset.originalPadding),parentBottom:o,parentHeight:i,elementHeight:s,parentTop:r,marginBottom:parseInt(n.getPropertyValue("margin-bottom")),marginTop:parseInt(a.getPropertyValue("margin-top"))}}(e,r),o=i.elementTop,a=(()=>{const r=t&&t()||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;return(0,xe.walk)(t,(e=>e.classList.contains("mpu_puff_wrapper")&&e.querySelector("iframe")),(e=>e.nextElementSibling))}(e,n);return r?((e,t)=>{const n=e.previousElementSibling,r=getComputedStyle(n,null);return(0,xe.getOffset)(n).top+parseInt(r.getPropertyValue("height"))-t})(r,i.elementHeight):1/0})(),s=a===1/0?a:(()=>{const e=(0,xe.getRelativeContainer)(r);return e?a-(0,xe.getOffset)(e).top:a})();r.style.height=i.parentHeight+"px",r.style.marginTop=i.marginTop+"px",new Gs({element:e,log:()=>{},relativeHorizontalElement:r,startStickyOffset:o,stopStickyOffset:a,stoppedPosition:s}).start()})(e,r,n(e))}}))};function rd(e){let{broker:t,getConfig:n,log:r}=e;if(!window.getComputedStyle)return;const i=n("stickyAds",[]);i.includes("mpu_puff_5")&&nd({broker:t,pos:"mpu_puff_5",getPuffListStart:e=>(0,xe.getParent)(e,".item")}),i.includes("mpu_top")&&nd({broker:t,pos:"mpu_top",getPuffListStart:e=>{const t=(0,xe.getParent)(e,".item"),n=(0,xe.walk)(t,(e=>e.querySelector(".puff")),(e=>e.nextElementSibling));return n?n.querySelector(".puff li"):t}})}rd.ccpa={enabledIfDissent:!0},rd.gdpr={enabledIfDissent:!0},rd.disableIfNoAdsServable=!0;var id=__webpack_require__(560);const od=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t=>__webpack_require__.g.__tcfapi(e,2,(function(){return t(...arguments)}),...n)))};let ad=()=>()=>{},sd=(e,t)=>"function"==typeof t?t():t;if(performance.mark&&performance.measure){let e=0;ad=t=>{const n="benchmark-"+e++;return performance.mark(`${n}-begin`),()=>{performance.mark(`${n}-end`),performance.measure(t,`${n}-begin`,`${n}-end`)}},(e,t)=>{const n=ad(e);try{return"function"==typeof t.then?(t.then(n),t):t()}finally{n()}}}var dd=__webpack_require__(8547).Buffer;function ld(e,t,n){return parseInt(e.substr(t,n),2)}function cd(e){const t=ld(e);return String.fromCharCode(t+65).toLowerCase()}function ud(e,t,n){const r=e.substr(t,n);return cd(r.slice(0,n/2))+cd(r.slice(n/2))}function pd(e){let t=e;for(;t.length%4!=0;)t+="=";t=t.replace(/-/g,"+").replace(/_/g,"/");const n=dd.from(t,"base64");let r="";for(let e=0;e<n.length;e+=1){const t=n[e].toString(2);r+=(i=t,o=8-t.length,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="";for(let r=0;r<e;r+=1)n+=t;return n}(Math.max(0,o))+i)}var i,o;return function(e){const{decodedObject:t}=function(e){let{input:t,fields:n,startPosition:r=0}=e,i=r;const o=n.reduce(((e,n)=>{const{name:r,numBits:o}=n,{fieldValue:a,newPosition:s}=function(e){let{input:t,output:n,startPosition:r,field:i}=e;const{type:o,numBits:a,decoder:s,validator:d}=i;if("function"==typeof d&&!d(n))return{newPosition:r};if("function"==typeof s)return s(t,n,r);const l="function"==typeof a?a(n):a;switch(o){case"int":return{fieldValue:ld(t,r,l)};case"date":return{fieldValue:(c=t,u=r,p=l,new Date(100*ld(c,u,p)))};case"bits":return{fieldValue:t.substr(r,l)};case"language":return{fieldValue:ud(t,r,l)};default:throw new Error(`ConsentString - Unknown field type ${o} for decoding`)}var c,u,p}({input:t,output:e,startPosition:i,field:n});return void 0!==a&&(e[r]=a),void 0!==s?i=s:"number"==typeof o&&(i+=o),e}),{});return{decodedObject:o,newPosition:i}}({input:e,fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16}]});return t}(r)}var hd=__webpack_require__(2279);async function fd(e){const{broker:t,device:n,getConfig:r,isTCFV2Jurisdiction:i,log:o,pageCriteria:a,setConfig:s,queryParams:d,addPlugins:l,removePlugins:c}=e,u=(e.tcfv2Opts,o.extend("main"));await i(r)?(o("tcfv2 deprecated, replacing with tcfv2-v2"),l(["tcfv2-v2"]),c(["tcfv2"])):u("tcfv2 is not supported for this geo, bailing")}(0,We.F3)("tcfv2",{gdpr:{enabledIfDissent:!0},init:fd,initTimeout:D.pX}),fd.isAdsFreeSupported=!0;const gd=fd;(0,We.F3)("botsPlugin",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init:function(e){let{getConfig:t,setConfig:n}=e;const r=function(e){return e("bots",[]).some((e=>{let{ip:t,ua:n}=e;const r=PageCriteria.clientIP===t;return n?r&&navigator.userAgent===n:r}))}(t)||/(?:[bB]ot|BOT|GrapeshotCrawler)s?\b/.test(navigator.userAgent);n("bots.isBotDetected",r)},run:function(e){let{broker:t,getConfig:n}=e;t.emit("set page level targeting",{bot:n("bots.isBotDetected")})}}),(0,We.F3)("browserResolutionPlugin",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;if(n("bots.isBotDetected"))return;const i=()=>{const{width:e,height:n}=(0,b.YC)();r("setting browserResolution page-level targeting",e,n),t.emit("set page level targeting",{sw:e,sh:n}),t.emit("sync video tags update",{cust_params:{sw:e,sh:n}})};window.addEventListener("resize",(0,I.sg)(i,300)),i()}}),(0,We.F3)("pageArea",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n=()=>{t.emit("set page level targeting",{area:__webpack_require__.g.adAreaId,subarea:__webpack_require__.g.adSubareaId})};t.on("set adSubareaId",(e=>{__webpack_require__.g.adSubareaId=e,n()})),n()}}),(0,We.F3)("visits",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},isAdsFreeSupported:!0,run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=await async function(e,t){let[n,r,i]=await Promise.all([yd(e)?bd(t):{},_d(e,t),wd(t)]);t("cmpData",n),t("rtaData",r),t("visits",i);const{visitId:o}=r,a=localStorage.getItem(vd);return o&&a!==o&&(t("visitId changed:",{lastKnownVisitId:a,visitId:o}),localStorage.setItem(vd,o),i++,t("bumping visit count",i),localStorage.setItem(md,""+i)),{...n,...r,visits:i}}(n,r),{visits:o}=i;r("targeting",i),t.emit("set page level targeting",{visits:o}),t.register("call for page analytics",(()=>i))}});const md="mol.ads.visits.counterInt",vd="mol.ads.visits.lastKnownVisitId",yd=e=>(e("plugins.enabled").includes("tcfv2")||e("plugins.enabled").includes("tcfv2-v2"))&&e("tcfv2.enabled")||e("plugins.enabled").includes("cmp");async function bd(e){const t=pd(await new Promise((e=>{__webpack_require__.g.__tcfapi?__webpack_require__.g.__tcfapi("getTCData",2,(t=>{let{tcString:n}=t;e(n)})):__webpack_require__.g.__cmp&&__webpack_require__.g.__cmp("getConsentData",null,(t=>{let{consentData:n}=t;e(n)}))}))).created,n=Math.floor((Date.now()-t.getTime())/1e3/60/60/24);return e("days since cmp created:",n),{cmpCreated:t,cmpDays:n}}async function _d(e,t){if(__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then){const n=e("visits.rtaDataTimeout",5e3),{results:r}=await(0,P.s5)(n,[__webpack_require__.g.RTA.ids]);if(r.length){const{created:e,visitId:n}=r[0],i=Math.floor((Date.now()-e)/1e3/60/60/24);return t("days since RTA created:",i),{rtaCreated:e,rtaDays:i,visitId:n}}}return{}}async function wd(e){const t=parseInt(localStorage.getItem(md));return isNaN(t)?(async()=>{e("no local storage found, trying to fetch visits count from cookie"),await Promise.race([kt(),(0,P.wR)(200)]);const t=function(){const e=bt("mol.ads.sessionStarted")||!1;let t=parseInt((0,b.Ri)("mol.ads.visits"));return isNaN(t)&&(t=0),e||(_t("mol.ads.sessionStarted",!0),(0,b.MO)("mol.ads.visits",t)),t}();return e("cookie visits:",t),localStorage.setItem(md,""+t),t})():t}(0,We.F3)("trackers.quantcast.userSync",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,log:n}=e;t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"quantcastId"}]}})))},vendorIds:{gdpr:[11]}});const Sd=(0,_.h)("AdsRefresher");class Td{constructor(){let{broker:e,inactiveTime:t=1e4,events:n=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],log:r=Sd}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.priv={broker:e,events:n,inactiveTime:t,handleUserActivity:(0,I.Ai)(Id.bind(this),t-10),lastActive:new Date,log:r}}get active(){const e=this.priv;return new Date-e.lastActive<e.inactiveTime}start(){const e=this.priv;Ed.call(this,((t,n)=>{t.addEventListener(n,e.handleUserActivity)})),Ad.call(this)}stop(){const e=this.priv;Ed.call(this,((t,n)=>{t.removeEventListener(n,e.handleUserActivity)})),e.timer=clearTimeout(e.timer)}whenActive(){return new Promise((e=>{this.active?e():this.priv.broker.once("user active",e)}))}}function Id(){const e=this.priv,t=!this.active;e.lastActive=new Date,t&&(this.priv.log("user became active"),e.broker.emit("user active"))}function kd(){const{broker:e}=this.priv;this.active?(this.priv.log.debug("user is still active"),Ad.call(this)):(this.priv.log("user became inactive"),e.emit("user inactive"),e.once("user active",Ad.bind(this)))}function Ad(){this.priv.timer=setTimeout(kd.bind(this),this.priv.inactiveTime)}function Ed(e){for(const[t,n]of this.priv.events)if(t)for(const r of n)e(t,r)}(0,We.F3)("trackers.viewability",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run(e){let{broker:t,doc:n,log:r,getConfig:i}=e;const o=new $o({threshold:[0,.5,1]}),a=i("viewability.activityMonitor","mol");r("starting");const s="mol"===a?new Td({broker:t}):(()=>{let e,t;if(void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),!e)throw new Error("Can't create activity monitor");const n={capture:!0,passive:!0};let r,i,o=0;const a=function(){i=new Promise((e=>{r=e}))};a();const s=()=>{if(document[e]){if(r)return;a()}else{if(!r)return;o=Date.now();const e=r;r=void 0;try{e()}catch(e){console.warn(e)}}};return s(),document.addEventListener(t,s,n),window.addEventListener("pagehide",s,n),window.addEventListener("pageshow",s,n),{whenActive:()=>i,start:()=>{},stop:()=>{},get active(){return Date.now()-o}}})(),d=new Map;t.on("track viewability",((e,n)=>{(async(e,n)=>{let i;r("tracking viewability for:",e),d.set(e,n);let a=0;o.observe(n,(async n=>{a=n.intersectionRatio,i&&a<.5&&(r("container left viewport too soon:",e),clearTimeout(i),i=void 0),await s.whenActive(),n.isIntersecting?!i&&n.intersectionRatio>=.5&&(r("container entered viewport:",e),i=setTimeout((()=>{i=void 0,r("container viewable",e),t.emit("ad viewable",e)}),1e3)):i&&(clearTimeout(i),i=void 0)}))})(e,n)})),t.on("untrack viewability",(e=>(e=>{r("untracking viewability for:",e);const t=d.get(e);t&&(o.unobserve(t),d.delete(e))})(e))),t.once("dom ready",(()=>{s.start()}));const l={};t.on("track component viewability",((e,n)=>{r("start tracking viewability for:",e,n),l[e]=t.once("ad viewable",e,(()=>{t.emit("untrack component viewability",e),t.emit("send event to bidmax",{type:"custom",payload:{module:"component",event:"view",component:e}})})),t.emit("track viewability",e,n),t.emit("send event to bidmax",{type:"custom",payload:{module:"component",event:"render",component:e}})})),t.on("untrack component viewability",(e=>{t.emit("untrack viewability",e),l[e]?.cancel(),delete l[e],r("stopped tracking viewability for:",e)})),function(){const e=i("trackers.viewability.positions",[]);r.extend("configured ad slots")(e);for(const i of e){const e=t.on("slot defined",(o=>{if(o.pos!==i)return;e.cancel();const a=n.getElementById(o.id);a?t.emit("track component viewability",i,a):r.warn(`pos ${i} cannot be found on this page (#${o.id})`)}))}}(),(0,xe.loaded)().then((function(){const e=i("trackers.viewability.components",{});r.extend("configured components")(e);for(const[i,o]of Object.entries(e)){const e=n.querySelector(o);e?t.emit("track component viewability",i,e):r.warn(`Component ${i}(${o}) cannot be found in this page`)}}))}}),(0,We.F3)("trackers.admantx",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:r}=e;if(new RegExp(n("plugins.disable-ias-bsp.domainRegex","^(live-uk|live-us|cc).mol.dmgt.net$")).test(__webpack_require__.g.location.hostname))return void r("Bailout  since domain doesn't match");r("starting");const{request:i,endPoint:o}=n("trackers.admantx",Cd),{href:a}=window.location;i.body=a.substring(0,a.indexOf("?"))||a;const s=JSON.stringify(i),d=`${o}?request=${s}`,l={"Content-Type":"text/plain","Content-Length":s.length,Connection:"keep-alive"},c=new Promise(((e,t)=>{fetch(d,{method:"GET",headers:l}).then((async n=>{const r=await n.json(),{info:o}=r;if("OK"!==o)t(new Error(`Admantx fetch error: ${o}.`));else{const t=(i.filter.includes("default")?xd:i.filter).map((e=>r[e])).filter((e=>e)).reduce(((e,t)=>[...e,...t.map((e=>e.name))]),[]);e(t)}})).catch(t)})).catch((e=>r(e)));t.register("dmp","admantx",(async()=>await c)),t.emit("set page level targeting",c.then((e=>({"ias-bsp":e}))));const u=await c||[];r("targeting:",u),t.emit("admantx loaded"),t.register("call for page analytics",(()=>({admantx:u}))),t.emit("send with rta page unload",{brandSafety:u.includes("ias_safe")?"safe":"unsafe"})},vendorIds:{gdpr:[278]}});const Cd={endPoint:"https://euasync01.admantx.com/admantx/service",request:{key:"d4d1cdf427f06ebc6ee7e0a3ffbcaecdfbfe517eca18a41d9126f88bdb16e7f0",type:"url",method:"descriptor",mode:"async",decorator:"json",filter:["admants"]}},xd=["categories","feelings","entities","admants"],Od=function(){const e=function(){const e=[];for(let t=1;t<=20;t++)e.push(t);return e}();return{getTags:function(){const t=function(){if(e.length){const t=(0,D.yT)(0,e.length-1);return e.splice(t,1)}}();if(t)return{adx_channel:t}}}};function Pd(e){let{broker:t}=e;const n=Od();t.register("get tags",(()=>{const e=n.getTags();return e&&[e]})),t.register("get video tags",(e=>{const{pos:t}=e,r=n.getTags();if("jwplayer"===t&&r)return{cust_params:r}}))}Pd.ccpa={enabledIfDissent:!0},Pd.gdpr={enabledIfDissent:!0},Pd.disableIfNoAdsServable=!0;const Dd=()=>{const e=[window.screen.width,window.screen.height],t=t=>t[0]===e[0]&&t[1]===e[1];__webpack_require__.g.DM.molFeMobileutils.isLandscape()&&e.reverse();const n={iphone:{iphone6:()=>t([375,667]),iphone6p:()=>t([414,736]),iphone5:()=>t([320,568])},other:{ipad:__webpack_require__.g.DM.molFeMobileutils.isIPad,other:()=>!__webpack_require__.g.DM.molFeMobileutils.isMobile()&&!(0,b.jy)(),windows10:b.jy}},r={touch:()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0};function i(){const e=n[PageCriteria.device]||{};return Object.keys(e).find((t=>e[t]()))||PageCriteria.device}return{getTags:()=>[{device:i(),device_features:Object.keys(r).filter((e=>r[e]()))}]}};function Rd(e){let{broker:t,log:n,pageCriteria:r}=e;const i=Dd(),[o]=i.getTags();r?.fbapp&&(o.fbapp=!0),n(o),t.emit("set page level targeting",o)}function jd(e){let{broker:t,getConfig:n}=e;n("bots.isBotDetected")||t.emit("set page level targeting",{random:[window.PageCriteria.pageViewId],impid:[(0,D.zE)()]})}function Md(e){let{broker:t,getConfig:n}=e;const r=n("plugins.ixIdentify.scriptUrl","//js-sec.indexww.com/ht/p/184669-186298276891027.js"),i=t.invoke("load script",r,"headertag");t.register("prebid prerequisites",(()=>i))}Rd.ccpa={enabledIfDissent:!0},Rd.gdpr={enabledIfDissent:!0},Rd.disableIfNoAdsServable=!0,jd.ccpa={enabledIfDissent:!0},jd.gdpr={enabledIfDissent:!0},jd.disableIfNoAdsServable=!0,Md.pluginSetup=e=>{let{getConfig:t,setConfig:n}=e;const r=t("plugins.enabled"),i=r.findIndex((e=>"prebid"===e));if(~i){const e=i-1;n("plugins.enabled",[...new Set([...r.slice(0,e),"trackers.ixIdentity",...r.slice(e)])])}};const Nd=Md;async function Ud(e){let{getConfig:t}=e;const n=t("plugins.smartclip.url","https://sync.sxp.smartclip.net/sync?type=red&dsp=10");ht({url:n})}Md.vendorIds={gdpr:[10]},Md.purposeIds={gdpr:"N/A"},Ud.vendorIds={gdpr:[115]},Ud.purposeIds={gdpr:"N/A"};const Ld=[{size:[300,600],url:"https://scripts.dailymail.co.uk/static/mol-fe/static/mol-fe-xpmodule-news-search/1.13.0/mpuCarousel.html?forceIto=Mol-Carousel&startTab=entertainment"},{size:[970,250],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-billboard.jpeg"},{size:[160,600],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-skyscrapper.png"}],Bd={vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]},legIntPurposeIds:{gdpr:[3,4]}};(0,We.F3)("adserver",{init:async function(e){let{broker:t,log:n,addPlugins:r,removePlugins:i,getConfig:o,setConfig:a,pluginsAlreadyRun:s,ownName:d,checkPluginBouncer:l}=e;const c=o("bidmax.dispatcher.url","//crta.dailymail.co.uk");function u(){$d&&($d(),$d=null),i([d]),n("bailing")}if(!s.has("tcfv2")){if(zd++>10||$d)return void u();n("tcfv2 hasnt ran yet");const e=o("plugins.enabled");e.splice(e.indexOf(d),1);const r=["tcfv2","mvt"].filter((e=>!s.has(e))).find((t=>e.includes(t)));let i;return r?(n("re-queing just after",r),i=e.indexOf(r)):(n("cant find tcfv2 or any way to dynamically enable it, holding off gpt.js loading"),$d=function(e,t){const n=[];let r=e.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",((e,i)=>{r&&(n.push(i),t("holding off gpt loading"))}));return()=>{r(),r=null,n.length&&(t("resume loading real gpt"),n.forEach((e=>e())))}}(t,n),n("re-queuing as last plugin"),i=e.length-1),e.splice(i+1,0,d),a("plugins.enabled",e),"not yet"}if(n("starting"),await l("adserver",Bd))return n("google enabled"),void u();n("user seems to have dissented to google, running own adserver"),$d||t.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",(()=>{n("intercepting real gpt loading")}));const p=o("adserver.ads",Ld);r(["analytics.headerbidderWinner"]);const h=__webpack_require__.g.googletag=__webpack_require__.g.googletag||{};h.cmd=h.cmd||[];const f={},g={setTargeting:(e,t)=>(void 0!==t&&(f[e]=[t]),g),addEventListener:(e,n)=>(t.on("gpt event",e,n),g),setCentering:e=>g,enableAsyncRendering:()=>g,getTargetingKeys:()=>Object.keys(f),getTargeting:e=>f[e]||[],setRequestNonPersonalizedAds:()=>{},setPrivacySettings:()=>{},getSlots:()=>Object.values(m)};h.pubads=()=>g;const m={};h.enableServices=()=>{n("enableServices")},h.getVersion=()=>"proprietary",h.display=e=>{const r=m[e];if(r.displayed)return void n.warn("slot",e,"already displayed, ignoring multiple calls");r.displayed=!0,n("display:",e,r.sizes);const i=e,[o]=r.getTargeting("hb_pb");if(o>0&&"oopGptSlot"!==r.slotType){n("prebid bid",o,"rendering ad:",e);const{document:a,size:s,adElement:d}=qd(i),[l]=r.getTargeting("hb_adid");r.adElement=d,__webpack_require__.g.pbjs.renderAd(a,l);const c=!1;t.emit("gpt event","slotRenderEnded",{size:s,slot:r,isEmpty:c})}else{const e=document.getElementById(i),o=p.filter((e=>{let{size:t}=e;return r.sizes.find((e=>{let[n,r]=e;return t[0]===n&&t[1]===r}))}));if(o.length){const i=o[Math.floor(o.length*Math.random())];n("found house ad for size:",i.size),async function(e,t,n,r,i,o){const a=document.createElement("div"),{size:s,id:d,click:l}=e,[c,u]=s;if(e.url){const t=document.createElement("iframe");t.width=c,t.height=u,t.scrolling="no",t.marginHeight=0,t.marginWidth=0,t.frameBorder=0,t.src=e.url,a.appendChild(t)}else if(e.image){const t=document.createElement("img");t.width=c,t.height=u,t.src=e.image;const n=document.createElement("a");l&&(n.href=await async function(e,t,n,r){Vd||(Vd=new Promise((async t=>{const n=await e.invokeAll({message:["call for page analytics"],timeout:2e3});t({timestamp:__webpack_require__.g.adverts.startTime,referrer:document.referrer,localStorage:void 0,memory:void 0,indexedDB:void 0,viewability:void 0,...n.reduce(((e,t)=>({...e,...t})),{}),event_type:"bidmax",type_version:2,version:b.fX.bidmax||"9.15.0"})})));const i={timeAtSend:Date.now()-__webpack_require__.g.adverts.startTime,...await Vd,type:"custom",payload:{module:"adserver",event:"click",id:n}};return`${t}/_/e?r=${encodeURIComponent(r)}&e=${btoa(JSON.stringify(i))}`}(i,o,d,l)),n.appendChild(t),a.appendChild(n)}else{if(!e.html)return void t.warn("unsupported creative:",e);a.innerHTML=e.html}n.appendChild(a),r.adElement=a;const p={size:s,slot:r,isEmpty:!1,creativeId:d,serviceName:"proprietary"};i.emit("gpt event","slotRenderEnded",p)}(i,n,e,r,t,c)}else"oopGptSlot"===r.slotType?n("no header bidder or house ad found for out of page slot"):r.getCollapseEmptyDiv()?(n("no header bidder or house ad found, collapsing:",e),e.style.height="0px",e.style.display="none"):n("no header bidder or house ad found, but NOT collapsing it"),t.emit("gpt event","slotRenderEnded",{slot:r,isEmpty:!0})}},g.refresh=(e,t)=>{n("refresh:",e,t)},h.defineSlot=(e,t,r)=>{n("defineSlot:",r);const i=Fd(n,e,r,t);return m[r]=i,i},h.defineOutOfPageSlot=(e,t)=>{n("defineOutOfPageSlot:",t);const r={...Fd(n,e,t,[]),slotType:"oopGptSlot"};return m[t]=r,r},h.destroySlots=e=>{n("destroySlots:",e),e.forEach((t=>{const n=t.adElement;n&&n.parentNode.removeChild(n),delete e[t]}))}},run:function(e){let{log:t}=e;const n=googletag.cmd,r=e=>{try{e()}catch(e){t.warn("Error running function queued up in googletag.cmd:",e)}};googletag.cmd.push=r,n.forEach(r)}});const qd=e=>{const t=document.getElementById(e),[n]=t.getClientRects(),r=n?Math.ceil(n.width):0,i=n?Math.ceil(n.height):0,o=document.createElement("div");o.style.border="0pt none",o.style.margin="0 auto",o.style.padding="0",o.style.minHeight="1px",t.appendChild(o);const a=document.createElement("iframe");return n&&(a.width=r+"",a.height=i+""),a.scrolling="no",a.marginWidth="0",a.marginHeight="0",a.style.marginTop="0px",a.style.marginLeft="0px",a.style.border="0pt none",o.appendChild(a),{document:a.contentDocument,size:[r,i],adElement:o}},Fd=(e,t,n,r)=>{const i={};let o=!1;const a={getAdUnitPath:()=>t,getSlotElementId:()=>n,getTargetingMap:()=>i,setTargeting:function(e,t){return void 0!==t&&(i[e]=[t]),a},getTargeting:e=>i[e]||[],addService:()=>a,setCollapseEmptyDiv:e=>(o=e,a),getCollapseEmptyDiv:()=>o,sizes:r,getTargetingKeys:()=>Object.keys(i),targeting:i};return a};let Vd,zd=0,$d=null;(0,We.F3)("adsFree",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,isAdsFreeUser:n,log:r,registerPluginBouncer:i,setConfig:o,getConfig:a}=e;if(!a("plugins.adsFree.enabled",!1))return;r("Starting..");const s=n();s&&(i(((e,t)=>{r(`checking ${e}`,Object.keys(t));const n=t.isAdsFreeSupported;return!n&&r("bouncing",e),n})),o("slots.enabled",{}),document.documentElement.classList.add("molads_ads_free")),t.register("call for page analytics",(()=>({adsFreeUser:s})))},isAdsFreeSupported:!0}),(0,We.F3)("blockthrough",{init:async function(e){let{getConfig:t,setConfig:n,removePlugins:r,broker:i,log:o,ownName:a}=e;n("bidmax.reportPlugins",[...t("bidmax.reportPlugins",[]),a]);const s=t("plugins.enabled").filter((e=>e.startsWith("abe.")));o("removing plugins:",s),r(s),o("loading blockthrough script"),i.invoke("import script","//btloader.com/tag?o=5761266544017408&upapi=true").then((()=>{o("blockthrough script loaded")})),i.on("ad delayed",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-delayed:"+t,"*")})),i.on("resuming delayed ad",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-resumed:"+t,"*")}))},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[815]}}),(0,We.F3)("conditionalLoad",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:n,log:r}=e;r("starting"),t.register("call for page-unload",(()=>({sdoc:Wd.length})));const i=n("plugins.slots.loadConditions.constants",{});t.on("ad rendered",((e,t)=>{let{size:n,slot:r,isEmpty:i}=t,o=r.molAd.pos;"oopGptSlot"===r.molAd.slotType&&(o+="-oop"),Hd.renderedAds[o]={size:n,isEmpty:i},Xd()})),t.intercept("slot defined",((e,t)=>{let[n,{pos:o}]=e;const a=(0,ke.get)(o);if(Hd.definedPositions.push(o),a&&void 0!==a.loadCondition){const e="string"==typeof a.loadCondition?i[a.loadCondition]:a.loadCondition;r("delaying slot",o,"due to condition:",e),Jd(new Gd(e,{pos:o}),t)}else t();Xd()})),t.intercept("request slot",((e,t)=>{let[n,{pos:o,slotType:a}]=e;const s=(0,ke.get)(o);if("oopGptSlot"===a&&void 0!==s.oopLoadCondition){const e="string"==typeof s.oopLoadCondition?i[s.oopLoadCondition]:s.oopLoadCondition;r("delaying oop slot",o,"due to condition:",e),Jd(new Gd(e,{pos:o}),t)}else t();Xd()}))},disableIfNoAdsServable:!0});let Wd=[];const Hd={renderedAds:{},definedPositions:[]};class Gd{constructor(e,t){this.context=t,this.rootDescriptor=e,this.do=this.do.bind(this),this.not=this.not.bind(this)}do(e){if("object"==typeof e){const t=Object.keys(e)[0];if("function"==typeof this[t])return this[t](e[t]);throw new Error("error calling fnName "+t)}return e}not(e){return!this.do(e)}and(e){return!e.find(this.not)}or(e){return!!e.find(this.do)}isAdSmallerThan(e){let{pos:t,size:n}=e;return((e,t)=>{let[n,r]=e,[i,o]=t;return n<i&&r<o})(Hd.renderedAds[t].size,n)}isMasterRendered(){return!!Hd.renderedAds[this.context.pos]}isPosDefined(e){return!!~Hd.definedPositions.indexOf(e)}isPosEmpty(e){return Hd.renderedAds[e].isEmpty||!Hd.renderedAds[e].size}isPosRendered(e){return Hd.renderedAds.hasOwnProperty(e)}isViewPortWidthLargerThan(e){return(0,b.YC)().width>e}isViewPortHeightLargerThan(e){return(0,b.YC)().height>e}isIE(){return b.Qr}run(){return this.do(this.rootDescriptor)}}const Xd=(0,I.mz)((()=>{Wd=Wd.filter((e=>{let{condition:t,done:n}=e;try{return!t.run()||(n(),!1)}catch(e){return console.error("conditional-load: ",e),!1}}))}));function Jd(e,t){Wd.push({condition:e,done:t})}(0,We.F3)("domain",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;const n=(e=>{const t=e.match(/(www[0-9]*?\.)?(.[^/:]+)/i);return t?.[2]&&"string"==typeof t[2]&&t[2].length>0&&t[2]})(__webpack_require__.g.location.hostname),r=n&&n.replace(/\./g,"_");t.emit("set page level targeting",{location:r}),t.register("provide domain",(()=>n))}});const Kd=(0,I.Gr)((e=>{let{getConfig:t,broker:n,pageCriteria:r,inlineModuleIdsString:i=""}=e;return new Promise((e=>{const o=n.until("dom ready");if("femail"===r?.channel&&"femailfashionhub"===r?.subchannel)e(!0);else{const n=t("plugins.fff.inlineModuleIds",["62328562","62328544","62032338","62451577","62451566","62451576","62451540","62257892"]);i.split(/\s+/).some((e=>n.includes(e)))?e(!0):o.then((()=>{e(!!document.getElementById("fff-inline")||!!document.querySelector(".fff-m-inline"))}))}}))}));(0,We.F3)("fff",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;Kd({getConfig:n,broker:t,pageCriteria:i,inlineModuleIdsString:__webpack_require__.g.inlineModules}).then((e=>{e?(r("fff found in page"),t.emit("set page level targeting",{fff:!0})):r("fff not found in page")}))}}),(0,We.F3)("imageGallery",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.on("image gallery open",(()=>{t.emit("pause refreshing ads")})),t.on("image gallery close",(()=>{t.emit("resume refreshing ads")}))}}),(0,We.F3)("page.homepageRenderPlatform",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,isHomepage:n,log:r,pageMeta:i}=e;if(!n)return void r("not homepage, bailing");const o="mobile"===i.renderPlatform;t.register("call for page analytics",(()=>({homepage:!0,renderPlatform:i.renderPlatform}))),r("setting page-level targeting",{mobile:o}),t.emit("set page level targeting",{mobile:o})}});const Yd="mol-ads-control-panel",Qd={abv:"mol-ads-control-panel-abv",cluster:"mol-ads-control-panel-cluster"},Zd="mol-ads-control-panel-config";function el(e){let{broker:t,getConfig:n,doc:r,log:i,win:o}=e;const a=n("controlPanel.scriptURL");a?o.DM.later("molFeReact_LOADED",(async()=>{const{React:e,ReactDOM:s}=o.DM.molFeReact;try{const[i,o]=await Promise.all([t.invoke("load script",a,"MOLAdsControlPanel"),t.invoke("get all plugins")]),d=document.getElementById(Yd)||function(e){const t=document.createElement("div");return t.id=Yd,e.body.appendChild(t),t}(r);s.unmountComponentAtNode(d),s.render(e.createElement(i,{abvCookieName:Qd.abv,allPlugins:Object.keys(o),clusterCookieName:Qd.cluster,configStorageKey:Zd,enabledPlugins:n("plugins.enabled",[]),onClose:()=>s.unmountComponentAtNode(d)}),d),r.body.classList.add("mol-ads-control-panel-on"),await __webpack_require__.e(208).then(__webpack_require__.bind(__webpack_require__,9208))}catch(e){Object.values(Qd).forEach(b.Yj),localStorage.removeItem(Zd),i.error("\n        MOL Ads Control Panel has been requested to load, but cannot. \n        I have deleted the control panel cookies that will affect the behaviour of this site.\n      "),i.error(e)}})):i.error("No configured script url")}(0,We.F3)("controlPanel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){(Object.values(Qd).some(b.Ri)||b.fX.acp||b.fX.adsControlPanel||localStorage.getItem(Zd))&&el(e),e.broker.on("open control panel",(()=>el(e)))}}),(0,We.F3)("performanceMonitor",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const r=n("performance.sampleSize",100);n("performance.pageLoad.offsets",[0,5,15]).forEach((e=>setTimeout(function(e){return async()=>{let n=await t.invoke("is page visible?");const i=t.on("page hidden",(()=>{n=!1})),o=await async function(e){return new Promise((t=>{const n=(new Date).getTime();!function e(r){if(0===r){const e=(new Date).getTime()-n;t(e)}else setTimeout((()=>e(r-1)),0)}(e)}))}(r);i.cancel();const a=o/r,s={offset:e,sampleSize:r,visible:n,...(0,D.E)("delayP1s",a),...(0,D.E)("delayP100ms",a)};t.emit("send event to bidmax",{type:"custom",payload:{module:"perf-monitor",event:"measure",...s}})}}(e),1e3*e)))}}),(0,We.F3)("adNami",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n}=e;const r=n("plugins.adnami.scriptTimeout",500),i={adNami:"off"},o=(0,P.s5)(r,[new Promise((e=>{window.adsmtag=window.adsmtag||{},window.adsmtag.cmd=window.adsmtag.cmd||[],window.adsmtag.cmd.push((()=>{i.adNami="on",e()}))}))]);t.invoke("import script","https://macro.adnami.io/macro/spec/adsm.macro.4111597d-dc70-4fd8-b25e-7d24d8423e73.js"),t.intercept("slot ready for ad",(async(e,t)=>{let[n,r,a]=e;await o,a.push(i),t(n,r,a)}))},vendorIds:{gdpr:[612]}}),(0,We.F3)("fbRemarketingPixel",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:r,win:i}=e;const o=r("plugins.fbRemarketingPixel.id","252852585682786"),a=r("plugins.fbRemarketingPixel.sendPageView",!0),s=r("plugins.fbRemarketingPixel.waitForRequest",!1),d=r("plugins.fbRemarketingPixel.url","https://connect.facebook.net/en_US/fbevents.js");if(n("starting:",{id:o,sendPageView:a,waitForRequest:s,script:d}),s&&(n("waiting for request from html"),await t.until("add fb-marketing-pixel"),n("got request to add tracking")),i.fbq)return void n.warn("fbq already defined, bailing");const l=i.fbq=function(){l.callMethod?l.callMethod.apply(l,arguments):l.queue.push(arguments)};i._fbq||(i._fbq=l),l.push=l,l.loaded=!0,l.version="2.0",l.queue=[],t.invoke("import script",d).then((()=>n("pixel loaded"))),l("init",o),a&&l("track","PageView")},vendorIds:{google:[89],gdpr:"N/A"}}),(0,We.F3)("bidCount",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const r={},i=e=>(0,q.sb)(e.map((e=>{let{bidderCode:t}=e;return t})));t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>e&&"bid"===e.type));if(t.length){const e=i(t),{pos:r}=t[0];n(`${r} - unique bidders`,e);const o=e.length;return n(`${r} - bidCount`,o),{bidCount:o}}return n("no bids found"),{bidCount:0}})),t.intercept("collect video tags",((e,t)=>{let[o,a,s]=e;const d=(e,t)=>{if(t&&"bid"===t.type){const{pos:e,offset:o,auctionId:a}=t;r[a]=r[a]||[],r[a].push(t);const s=i(r[a]),d=s.length;n(`${e} - bid received for auctionId: ${a}, offset: ${o}, uniqueBidders: ${s}, bidCount: ${d}`),t.tags.cust_params.bidCount=d}s(e,t)};d(null,{cust_params:{bidCount:0}}),t(o,a,d)})),t.on("bidding ended",((e,t)=>{r[t]&&(n("video auction ended, removing auctionId",t),delete r[t])}))},vendorIds:{gdpr:"N/A"}}),(0,We.F3)("maxbid",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const r={},i=e=>!isNaN(parseFloat(e))&&isFinite(e),o=e=>[...e].sort(((e,t)=>t.cpm-e.cpm)),a=e=>{const{bidderCode:t,cpm:n,cachedBid:r}=e;if(r){const{bidderCode:e,cpm:t}=r;return{bidderCode:e,cpm:parseFloat(t)}}return{bidderCode:t,cpm:parseFloat(n)}};t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>"bid"===e?.type&&i(e?.cpm)));if(!t.length)return;const{pos:r}=t[0],s=t.map(a);n(`${r} - bids:`,s);const d=o(s);n(`${r} - sorted:`,d);const{bidderCode:l,cpm:c}=d[0];return n(`${r} - highest bidder`,l,c),{maxbid:c,maxbidpk:tl.findIndex((e=>{let[t,n]=e;return t<=c&&c<=n}))+1,maxbid_bidder:l}})),t.intercept("collect video tags",((e,t)=>{let[s,d,l]=e;t(s,d,((e,t)=>{if(t&&"bid"===t.type&&t.cpm&&i(t.cpm)){r[t.auctionId]=r[t.auctionId]||[];const e=a(t),{auctionId:i,offset:s}=t;n(`bid received, auctionId: ${i}, offset: ${s}, bid:`,e),r[t.auctionId].push(e);const d=o(r[t.auctionId]);n(`sorted bids, auctionId: ${i}, offset: ${s}`,d);const{cpm:l,bidderCode:c}=d[0];n(`hightest bid, auctionId: auctionId: ${i}, offset: ${s}`,c,l);const u={...t.tags.cust_params,maxbid:l,maxbidpk:tl.findIndex((e=>{let[t,n]=e;return t<=l&&l<=n}))+1,maxbid_bidder:c};t.tags.cust_params=u}l(e,t)}))})),t.on("bidding ended",((e,t)=>{r[t]&&(n("video auction ended, removing auctionId",t),delete r[t])}))},vendorIds:{gdpr:"N/A"}});const tl=[[.01,.5],[.51,1],[1.01,1.5],[1.51,2],[2.01,2.5],[2.51,3],[3.01,3.5],[3.51,4],[4.01,4.5],[4.51,5],[5.01,6],[6.01,7],[7.01,8],[8.01,9],[9.01,10],[10.01,12],[12.01,14],[14.01,16],[16.01,18],[18.01,20]];(0,We.F3)("bidsReceived",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t}=e;t.register("get tags based on tags",(e=>e.flat().filter((e=>e&&"bid"===e.type)).length?{nobids:!1}:{nobids:!0}))},vendorIds:{gdpr:"N/A"}}),(0,We.F3)("prebid.sharedId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=`${n("plugins.sharedid.pixelUrl.endpoint","https://www.dailymail.co.uk/cvx/client/sync/fpc")}?fpc_domain=${n("plugins.sharedid.pixelUrl.fpcDomain","dailymail.co.uk")}`,o=n("plugins.sharedid.extend",!1),a=!o&&n("plugins.sharedid.refreshInSeconds",!1),s=rl(a);t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"pubCommonId",params:{extend:o,syncTime:60,pixelUrl:i},storage:s}],syncDelay:n("plugins.prebid.syncDelay",3e3)}}))),t.register("get shared id",(()=>{try{return(0,P.Mi)((()=>(0,b.Ri)("sharedid")),300,1500)}catch(e){return}}))},vendorIds:{gdpr:"N/A"}});const nl={name:"_pubcid",type:"cookie",expires:28},rl=e=>"number"==typeof e?{...nl,refreshInSeconds:e}:nl;(0,We.F3)("message-trace",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n,queryParams:r}=e;const i=Object.entries(r).filter((e=>{let[t]=e;return t.startsWith(il)}));if(!i.length)return void n("no message filter, bailing");n("filters:",Object.fromEntries(i)),t.bus.logCall=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:""},r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(o(r,e,n)){const[o,...d]=r,l=[["Message",sl],[e.id,s(2)],[t,s(1)],[o,s(0)],[i?a?"resuming":"intercepted by":"->",s(i?a?4:3:1)],[n.id,s(2)]],{text:c,styles:u}=l.reduce(((e,t)=>{let[n,r]=t;return e.text.length&&(e.text+="%c ",e.styles.push(dl)),e.text+=`%c${n}`,e.styles.push(r),e}),{text:"",styles:[]});let p=d;try{p=(0,T.Sm)(d)}catch(e){}console.log(c,...u,p)}};let o=()=>!1;i.forEach((e=>{let[t,n]=e;const[r,...i]=t.split(".").slice(3);if(!r&&"boolean"==typeof n&&n)return void d((()=>!0));const o=new RegExp(`^${n.replace(/\*/g,".*")}$`,"i");switch(r){case"path":l(i.join("."),n);break;case"slot":l("",n),l("pos",n),l("slot.pos",n);break;case"fulltext":a=new RegExp(n,"igm"),d((e=>a.test(JSON.stringify(e,ll))));break;case"broker":c(o,o);break;case"sender":c(o);break;case"receiver":c(void 0,o)}var a}));const a=ol.split(" ").map((e=>(0,q.yU)(["background-color","color"],e.split("/")).map((e=>e.join(": "))).join("; "))),s=e=>al+a[e];function d(e){const t=o;o=(r,i,o)=>{let a;try{a=e(r,i,o)}catch(e){n.warn("Error while filtering message:",e)}return a||t(r,i,o)}}function l(e,t){d((n=>n.find((n=>{const r=e?Vn()(n,e):n;return r&&(void 0===t||new RegExp(`^${t.replace(/\*/g,".*")}$`).test(r))}))))}function c(e,t){d(((n,r,i)=>e&&e.test(r.id)||t&&t.test(i.id)))}}});const il="ads.debug.messageTrace",ol="#FFEFD3/black #FFFEE4/black #D0ECEA/black #FBC3BC/black #C8FFBE/black",al="display: inline-block; padding: 1px 4px; border-radius: 3px;",sl=al+"color: #fff; background: hsl(214deg 100% 55%); ",dl="color: black; background: none;";function ll(e,t){if(!(0,T.NC)(t))return t}var cl=__webpack_require__(8305),ul=__webpack_require__(9937),pl=__webpack_require__(4239),hl=__webpack_require__(7065);let fl="";(0,We.F3)("mvt",{isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,setConfig:n,log:r,ownName:i}=e;r("Initialising MVT plugin");const{selectedScenarios:o,scenarios:a,tests:s}=(0,hl.UQ)(r,t("mvt.tests",[]));t("mvt.__applied")||((0,pl.H)(t,n,a,i),(0,ul.x)(t,n,a),(0,cl.u)(t,n,a),(0,v.th)()),fl=s.map((e=>[e.name,o[e.name]])).filter((e=>{let[,t]=e;return t})).map((e=>e.join("="))).join(",")},run(e){let{broker:t}=e;const n=()=>{try{return(__webpack_require__.g.molMVTest||"").split(",").map((e=>e.trim()))}catch(e){return[]}},r=()=>[...fl.split(","),...n()].filter((e=>e)).join(",");t.register("call for page analytics",(()=>({mvt:r()}))),t.emit("send with rta page unload",{mvt:r().split("=").join("_")}),t.emit("set page level targeting",{mvt:r().split("=").join("_").split(",")})}});const gl={mediaTrust:"//scripts.webcontentassessor.com/scripts/bc585bfefc95184247617f742a451b7f4f99b8d4f250b51c2fabb00dee8e855d",ticio:"//d2tuygj4en2za2.cloudfront.net/script.js",confiant:"//confiant-integrations.global.ssl.fastly.net/pkity_Tu7korz-AKdcG26RZexkw/gpt_and_prebid/config.js"};function ml(){const e=new Date;return{watershed:String(e.getHours()>=21||e.getHours()+e.getMinutes()/60<5.5)}}(0,We.F3)("scanner",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},async init(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.scanner.sync",!1),o=n("plugins.scanner.setupTimeout",2e3),a=n("plugins.scanner.provider"),s=n("plugins.scanner.scriptUrl",gl)[a];if(r("config:",{provider:a,sync:i,timeout:o}),!s)return void r.warn("unknown provider:",a);const d=dt(s,{async:!i}),l={scanner:{provider:a}};t.register("call for page analytics",(()=>l)),d.then((()=>{r("provider script loaded"),l.scanner.enabled=!0})),await(0,P.tN)(o,d).catch((()=>{r.warn("provider script did not load fast enough, continue loading ads bundle..."),l.scanner.timeout=!0}))}}),(0,We.F3)("watershed",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.emit("set page level targeting",ml()),t.register("get prebid tags",ml)}});const vl=Symbol("private properties"),yl=1e3;class bl{constructor(e){let{broker:t,pos:n}=e;const r=this[vl]={};r.broker=t,r.pos=n,r.inView=!1}get inView(){return this[vl].inView}start(){const e=this[vl];e.slotVisibilityChangedSub=e.broker.on("slot visibility changed",e.pos,Sl.bind(this)),e.adViewableSub=e.broker.on("ad viewable",e.pos,_l.bind(this))}stop(){const e=this[vl];e.slotVisibilityChangedSub.cancel(),e.adViewableSub.cancel(),Il.call(this)}}function _l(){if(this.inView)return;const e=this[vl];e.inView=!0,e.broker.emit("ad active view",e.pos)}function wl(){if(!this.inView)return;const e=this[vl];e.inView=!1,Il.call(this),e.broker.emit("ad out of view",this[vl].pos)}function Sl(e){let{inViewPercentage:t}=e;t<50?wl.call(this):this[vl].timer||Tl.call(this)}function Tl(){this[vl].timer=setTimeout(_l.bind(this),yl)}function Il(){const e=this[vl];e.timer=clearTimeout(e.timer)}class kl{constructor(e){let{interval:t=3e4,broker:n,positions:r,ids:i,activeViewTracker:o,userInactivityMonitor:a=new Td({broker:n})}=e;const s={};this.interval=t,s.broker=n,s.positions=r,s.ids=i,s.userInactivityMonitor=a,s.activeSub=s.broker.on("user active",Al.bind(this)),o&&(s.activeViewTracker=o,s.activeViewSub=s.broker.on("ad active view",s.positions[0],Al.bind(this)),s.activeViewTracker.start()),this.stopped=!1,this.priv=s,this.refresh=El.bind(this),n.on("force ads refresh",(async()=>{this.refresh(),await n.until("ad rendered"),Sd("Ads force-refreshed")})),n.on("ad rendered",(e=>{s.positions.includes(e)&&s.timer&&this.start()}))}start(){const e=this.priv;e.timer=clearTimeout(e.timer),e.stopped=!1,e.remaining=e.remaining||this.interval,e.timer=setTimeout(this.refresh,e.remaining)}stop(){const e=this.priv;e.activeSub.cancel(),e.activeViewTracker&&(e.activeViewSub.cancel(),e.activeViewTracker.stop()),e.timer=clearTimeout(e.timer),e.remaining=0,this.stopped=!0}}function Al(){0===this.priv.remaining&&El.call(this)}function El(){const e=this.priv;if(Sd("Refresh: ",{positions:e.positions.join(" "),ids:e.ids.join(" "),active:e.userInactivityMonitor.active,inView:e.activeViewTracker?e.activeViewTracker.inView:"N/A"}),!e.userInactivityMonitor.active||e.activeViewTracker&&!e.activeViewTracker.inView)return e.timer=clearTimeout(e.timer),void(e.remaining=0);Sd("Refreshing",{positions:e.positions.join(" "),ids:e.ids.join(" ")}),e.broker.emit("prepare to refresh ads",e.positions),e.broker.emit("refresh ads",{ids:e.ids,reason:"periodic",positions:e.positions}),this.start()}const Cl=e=>{let{broker:t,pos:n,type:r,adRefresher:i,slotViewedPromise:o}=e;return"activeView"===r?t.once("ad viewable",n,a).cancel:(o.then(a),()=>{});function a(){i.stopped?Sd(`adRefresher for ${n} already stopped, and won't be started`):(i.start(),Sd(`Refreshing position ${n}`))}};function xl(e){let{broker:t,getConfig:n,log:r}=e;const i=n("adsRefresh.cancelOn1x1Billboard",!0),{intervalRefreshSlots:o,activeViewRefreshSlots:a}=function(e){const t=e("adsRefresh.interval",6e4);return{intervalRefreshSlots:e("adsRefresh.slots",[]).reduce(((e,n)=>({...e,[n]:{pos:n,interval:t,type:"interval"}})),{}),activeViewRefreshSlots:e("adsRefresh.activeViewSlots",[]).reduce(((e,t)=>{let{pos:n,interval:r}=t;return{...e,[n]:{pos:n,interval:r,type:"activeView"}}}),{})}}(n);if((0,T.Im)(o)&&(0,T.Im)(a))return void r("no slot refresh config provided, bailing");const s=new Promise((e=>t.once("ad viewable",(t=>{r(`Position "${t}" viewed, refreshes will start immediately`),e()})))),d=n("adsRefresh.inactiveTime",1e4),l=new Td({broker:t,inactiveTime:d});l.start();const c={broker:t,userInactivityMonitor:l,log:r,slotViewedPromise:s},u={...o,...a};i&&(r("will cancel refreshing ads upon 1x1 billboard"),t.on("ad rendered","billboard",(e=>{!e.isEmpty&&e.size&&e.size.every((e=>1===e))&&(r("1x1 billbaord received, cancel refreshing"),t.emit("stop refreshing ads",{reason:"billboard is size 1x1"}))}))),t.on("slot defined",(e=>{let{pos:t,id:n}=e;if(u[t]){r("slot defined, found refresher",u[t]),u[t].id=n;const e=function(e){let{broker:t,userInactivityMonitor:n,pos:r,id:i,interval:o,type:a}=e;Sd(`Start refreshing: ${r}, id: ${i}, with ${a} refresh of ${o}ms`);const s="activeView"===a&&new bl({broker:t,pos:r});return new kl({broker:t,interval:o,positions:[r],ids:[i],userInactivityMonitor:n,activeViewTracker:s})}({...c,...u[t]});u[t].adRefresher=e,u[t].cancel=Cl({...c,...u[t]})}})),t.on("pause refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=r.extend("pause");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?t.warn(`"${n}" position has already stopped refreshing.`):(u[n].adRefresher.stop(),t.info(`"${n}" position refresh is paused`)):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh and is therefore probably not refreshing.`)})),t.on("resume refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=r.extend("resume");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?(u[n].adRefresher.start(),t.info(`"${n}" position refresh is resumed`)):t.warn(`"${n}" position isn't paused.`):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh.`)}));let p=!1;t.on("stop refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("Received request to stop ads refreshing altogether",e);const{positions:n=[],activeView:i=!0,reason:a}=e,s=i?u:o,d=n.length?(0,x.O$)(s,n):Object.keys(s);p||(p=!0,t.emit("send event to bidmax",{type:"custom",payload:{module:"adsRefresherV2",event:"stop",reason:a}})),d.forEach((e=>{const{id:t,type:n}=u[e];r(`stopping ${n} refresh for ${e}, id: ${t}`),u[e].adRefresher&&u[e].adRefresher.stop(),u[e].cancel&&u[e].cancel(),delete u[e]})),(0,T.Im)(u)&&(t.emit("send event to bidmax",{type:"custom",payload:{module:"refreshManager",event:"fullStop"}}),l.stop())}))}xl.ccpa={enabledIfDissent:!0},xl.gdpr={enabledIfDissent:!0},xl.disableIfNoAdsServable=!1;const Ol=()=>{};Ol.pluginSetup=e=>{let{broker:t,getConfig:n,log:r}=e;if(!n("arrowKeysScroll.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))))return;(0,T.ns)(["DM"],__webpack_require__.g).arrowKeysScrollEnabled=!0;const i=n("arrowKeysScroll.stride",40);if(document.addEventListener("keydown",(e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.target!==document.body)return;let t;switch(e.keyCode){case 38:t=-i;break;case 40:t=i}t&&(event.preventDefault(),event.stopPropagation(),window.scrollBy(0,t))})),"scrollRestoration"in history){history.scrollRestoration="manual";const e=history.state;e&&"arrow-keys-scroll"===e.name&&(r("state stored:",e),t.once("dom loaded",(()=>{0===window.pageYOffset?(r("restoring scroll offset to:",e.pageYOffset),window.scrollTo(window.pageXOffset,e.pageYOffset)):r("page scrolled to",window.pageYOffset,", ignoring scroll restore")})));const n=()=>{const e={name:"arrow-keys-scroll",version:1,pageYOffset:window.pageYOffset};history.replaceState(e,document.title)};window.addEventListener("scroll",DM.molFeMiniLodash.debounce(n,200),{passive:!0,capture:!0})}},Ol.isAdsFreeSupported=!0,Ol.ccpa={enabledIfDissent:!0},Ol.gdpr={enabledIfDissent:!0};const Pl=Ol;var Dl=__webpack_require__(4042),Rl=__webpack_require__.n(Dl);const jl="https://ovp.iris.tv/libs/context/iris-context.min.js",Ml="W491AUI45FTTFWD";function Nl(e){let t,{broker:n,log:r}=e;const i=new Promise((e=>{window.addEventListener("IrisContextAPI",(()=>{r("Loaded"),t=window.IrisContextAPI({client_token:Ml}),e(t)}))})),o=Rl()((async e=>{if(!e)return{};await i;const n=await t.getVideoInfo(e);return r(`Info for video ${e}`,n),(0,T.Up)(n,["context","categories","iris_id"])}));n.invoke("import script",jl),n.register("get IrisTV tags",o),n.register("get video tags",(async e=>{let{videoId:n}=e;if(!t)return void r("Video auction started but IrisTV still not available");if(!n)return void r("IrisTV loaded but no videoId provided");r("Auction for video:",n);const i=(0,T.Up)(await o(n),["context","categories"]);return r("cust_params:",i),{cust_params:i}}))}Nl.vendorIds={gdpr:"N/A"},Nl.purposeIds={gdpr:[1]},Nl.disableIfNoAdsServable=!0;const Ul=e=>{let{broker:t,getConfig:n}=e,r=[];t.on("plugins enabled",(e=>{r.lengh&&t.emit("creative updated plugins",r)})),t.register("get plugins set by creative",(async()=>r)),__webpack_require__.g.addEventListener("message",(async e=>{let{data:n}=e;"object"==typeof n&&"managePlugins"===n.callId&&(r=n.plugins||[],__webpack_require__.g.postMessage("managePluginsReceived","*"),t.emit("creative updated plugins",r),b.fX.hasOwnProperty("setPlugin")&&console.log(`message from creative ${JSON.stringify(r)}`))}))};Ul.ccpa={enabledIfDissent:!0},Ul.gdpr={enabledIfDissent:!0};const Ll=Ul,Bl=e=>{let{broker:t}=e;const n=(0,v.Jt)("plugins.nativo.scriptSrc","//s.ntv.io/serve/load.js");t.invoke("import script",n)},ql=Bl;function Fl(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.nonPersonalizedAds.sendNPA",!0),o=n("plugins.nonPersonalizedAds.sendIllegalAttempts",!0),a={npa:!1,npaIllegalAttempts:[]};let s=e=>{t.once("gpt loaded",(()=>{googletag.pubads().setRequestNonPersonalizedAds(e)}))};t.once("gpt loaded",(()=>{const e=googletag.pubads();s=e.setRequestNonPersonalizedAds.bind(e),e.setRequestNonPersonalizedAds=e=>{const t=new Error(`Illegal attempt to call setRequestNonPersonalizedAds(${JSON.stringify(e)})`);a.npaIllegalAttempts.push(t.stack),r.warn(t)}})),t.register("call for page analytics",(()=>{const e={};return i&&(e.npa=a.npa),o&&(e.npaIllegalAttempts=[...a.npaIllegalAttempts]),a.npaIllegalAttempts=[],e})),t.on("set non personalized ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a.npa=!!e,s(e)}))}Bl.vendorIds={gdpr:[263]},Bl.purposeIds={gdpr:"N/A"},Fl.ccpa={enabledIfDissent:!0},Fl.gdpr={enabledIfDissent:!0};const Vl=(0,_.h)("page-visibility");function zl(e){let{broker:t}=e;t.register("is page visible?",(()=>new Promise(((e,t)=>e((()=>{const e=document.hasFocus();return Vl("isPageVisible",e),e})()))))),__webpack_require__.g.top.addEventListener("blur",(()=>{setTimeout((()=>{Vl("Blur event - page hidden"),t.emit("page hidden")}))})),__webpack_require__.g.top.addEventListener("focus",(()=>{setTimeout((()=>{Vl("Focus event - page visible"),t.emit("page visible")}))}))}zl.isAdsFreeSupported=!0,zl.ccpa={enabledIfDissent:!0},zl.gdpr={enabledIfDissent:!0};const $l="mol.ads.paidSession",Wl=()=>JSON.parse(localStorage.getItem($l))||{},Hl=e=>localStorage.setItem($l,JSON.stringify(e)),Gl=()=>localStorage.removeItem($l);function Xl(e){let{broker:t,getConfig:n}=e;const r=Wl();let i="none",o="none";const a=1e3*n("plugins.paidSessions.maxIntervalInSeconds",900);r&&r.lastUpdate&&r.lastUpdate>=Date.now()-a?(r.lastUpdate=Date.now(),Hl(r),o=r.utm_source,i=r.session_page_ID):b.fX.utm_source?(o=b.fX.utm_source,i=PageCriteria.articleId,Hl({lastUpdate:Date.now(),utm_source:o,session_page_ID:i})):Gl();const s={session_page_ID:i,utm_source:o};t.emit("set page level targeting",s),t.register("call for page analytics",(()=>s))}Xl.ccpa={enabledIfDissent:!0},Xl.gdpr={enabledIfDissent:!0},Xl.disableIfNoAdsServable=!0;var Jl=__webpack_require__(5732),Kl=__webpack_require__.n(Jl);const Yl="38384040373937396665",Ql="211242";function Zl(e){let{broker:t,getConfig:n}=e;const r=n("remoteDebugHooks",!0);localStorage.removeItem("mol.ads.debug.label");const i={auctions:[],auctionByPos:{},started:{},queue:[],bids:{},kv:{},gkv:{}},o=function(e){return i.auctionByPos[e]||i.auctionByPos[e.substr(0,e.lastIndexOf("-"))]},a=(e,t)=>{if(!o(e))return;const n=o(e);n.slots[e]||(n.slots[e]={}),n.slots[e][t]||(n.slots[e][t]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:__webpack_require__.g.adverts.startTime;return parseFloat(((Date.now()-e)/1e3).toFixed(1))}())},s=e=>Array.isArray(e)?1===e.length?s(e[0]):e.join(", "):"boolean"==typeof e||isNaN(e)?e:parseFloat(e),d=e=>Object.keys(e).reduce(((t,n)=>(Object.keys(e[n]).forEach((r=>{t[r]=t[r]||{},t[r][n]=e[n][r]})),t)),{}),l=function(e){console.group("Auction Performance"),console.table(d(Object.fromEntries(Object.entries(e.streamAuctions).map((e=>{let[t,{endpoints:n}]=e;return[t,Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,n>1e3?"ready":n]})))]}))))),console.groupEnd()},c=function(e){return(!i.currentAuction||i.currentAuction.lastPosTime<Date.now()-5e3)&&(i.currentAuction={id:i.auctions.length,slots:{},ads:{},kv:{},bids:{},streamAuctions:{}},i.auctions.push(i.currentAuction)),i.currentAuction.lastPosTime=Date.now(),i.currentAuction.streamAuctions[e]||(i.currentAuction.streamAuctions[e]={start:0,endpoints:{}}),i.auctionByPos[e]=i.currentAuction};t.on("get tags",(e=>{let{slot:{pos:t}}=e;c(t).streamAuctions[t].start=Date.now()})),t.on("get video tags",(e=>{let{slot:{pos:t}}=e;c(t)})),t.on("ad rendered",((e,t)=>{a(e,"ad rendered");let n=e,r=0;const i=o(e);for(;i.ads[n];)r++,n=`${e} ${r}`;const s=i.ads[n]={};s.creativeId=t.creativeId||t.sourceAgnosticCreativeId,s.lineItem=t.lineItemId||t.sourceAgnosticLineItemId,s.adUnit=t.slot.molAd.adUnit,t.sourceAgnosticLineItemId&&t.creativeId!==t.sourceAgnosticCreativeId&&(s["reservation or backfil"]=!0)})),t.on("headerbidder winner",((e,t)=>{const n=o(e);n&&n.ads[e]&&(n.ads[e]["headerbidder winner"]=t)})),t.on("ad viewable",((e,t)=>{a(e,"ad viewable")})),t.on("ad loaded",((e,t)=>{a(t,"ad loaded")})),t.on("slot defined",(e=>{e.slotTypes.includes("gpt")&&!e.slotTypes.includes("gptOOP")&&(c(e.pos),a(e.pos,"slot defined"))})),t.on("start bidding",(e=>{c(e),a(e,"start bidding"),i.started[e]=Date.now()})),t.on("ready to request",(e=>a(e,"ready to request"))),t.on("ad requested",(e=>a(e,"ad requested"))),t.on("bidding ended",(e=>a(e,"bidding ended"))),t.on("bids requested",(e=>{let{positions:t}=e;t.forEach((e=>{c(e),a(e,"prebid called")}))})),t.on("bid",((e,t)=>{let{bidder:n,cpm:r}=t;const i=r,o=c(e),a=o.bids[e]=o.bids[e]||{},s=i/100;(!a[n]||a[n]<s)&&(a[n]=s)})),t.on("set key value",((e,t,n)=>{const r=c(e);(r.kv[e]=r.kv[e]||{})[s(t)]=s(n)}));const u=e=>c(e).streamAuctions[e],p=(e,t)=>{e.endpoints[t]=Math.round((Date.now()-e.start)/10)/100};function h(){const e=document.createElement("div");e.innerHTML=Kl()();const t=e.firstChild;document.body.appendChild(t),setTimeout((()=>{window.debugRemoteLabel.focus(),window.debugRemoteLabel.addEventListener("keyPress",(e=>{"Enter"===e.key&&window.enterDebugRemoteButton.click()})),window.enterDebugRemoteButton.addEventListener("click",(()=>{localStorage.setItem("dmg.ads.debug.label",window.debugRemoteLabel.value),location.reload()}))}))}t.on("auction event",((e,t,n)=>{const r=u(e);if(!r.ended)if("interested endpoint"===t){0===r.start&&(r.start=Date.now(),Object.keys(r.endpoints).forEach((e=>{const t=r.endpoints[e];Number.isFinite(t)&&(r.endpoints[e]=Math.round((1e3*t-r.start)/10)/100)})));const e=(n.endpoints||[]).filter((e=>void 0===r.endpoints[e])),t=Object.fromEntries(e.map((e=>[e,"pending"])));r.endpoints={...r.endpoints,...t}}else"stream done"===t?p(r,n.endpoint):"end"===t&&(r.ended=!0,Object.entries(r.endpoints).forEach((e=>{let[t,n]=e;"string"==typeof n&&(r.endpoints[t]="missing")})))})),t.on("plugin done",((e,t)=>{const n=u(e);n.ended||p(n,t)})),__webpack_require__.g.openAdsControlPanel=()=>{const e=n("controlPanel.url");e&&t.emit("load script",e,null,{},(()=>!0))},r&&setTimeout((()=>(function(){let e="";document.addEventListener("keydown",(t=>{const{keyCode:n}=t;e+=""+n,e===Yl&&(t.preventDefault(),h()),Yl.indexOf(e)&&(e=""+n)}))}(),void t.once("ad rendered","sticky_banner",(()=>{const e=__webpack_require__.g.stickyBannerUnderlay;e&&function(e){const t=[],n=__webpack_require__.g.MobileUtils?.isMobile()?"touchstart":"mousedown";e.addEventListener(n,(e=>{if(e.stopPropagation(),e.preventDefault(),t.push(e.timeStamp),7===t.length){const e=[...t];for(let t=e.length-1;t>0;t--)e[t]=e[t]-e[t-1];t.shift(),e.shift();const n=(e[1]+e[2])/2;e.map((e=>Math.round(e/n))).join("")===Ql&&h()}}),{capture:!0,passive:!1})}(e)}))))),__webpack_require__.g.adverts.performance={state:i,print:()=>{i.auctions.forEach((e=>{console.group(`Auction ${e.id}`),console.group("Slots performance"),console.table(e.slots),console.table(e.ads),console.groupEnd(),console.group("Key+values"),console.table(d(e.kv)),console.groupEnd(),console.group("Bids"),console.table(e.bids),console.groupEnd(),l(e),console.groupEnd()})),console.group("Page level Key+values"),console.table(i.gkv),console.groupEnd()},printAuctionPerformance:()=>{i.auctions.forEach((e=>{console.group(`Auction ${e.id}`),l(e),console.groupEnd()}))}}}async function ec(){const e=(0,v.Jt)("plugins.pixelSync.byCMPVendor",{}),t=Object.keys(e),n=await tc(t);for(const r of t)n(r,e[r])}Zl.ccpa={enabledIfDissent:!0},Zl.gdpr={enabledIfDissent:!0};const tc=async e=>{const{vendorConsents:t}=await Zt("getVendorConsents",e);return(e,n)=>t[e]&&nc(n)},nc=e=>{(new Image).src=e};ec.vendorIds={gdpr:!1};var rc=__webpack_require__(1558),ic=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},oc=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},ac=function(e){this.version=e,this.type="node",this.name="node",this.os=rc.platform},sc=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},dc=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},lc=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},cc=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,uc=3,pc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],hc=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function fc(e){var t=function(e){return""!==e&&pc.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new dc;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<uc&&(i=ic(ic([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(uc-i.length),!0)):i=[];var o=i.join("."),a=function(e){for(var t=0,n=hc.length;t<n;t++){var r=hc[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=cc.exec(e);return s&&s[1]?new sc(n,o,a,s[1]):new oc(n,o,a)}const gc=b.fX["mol.ads.programmatic.debug"],mc=(e,t)=>({chrome:e("prog.campaign.percentage.chrome",.7),crios:e("prog.campaign.percentage.crios",.7)}[t]);function vc(e){let{broker:t,getConfig:n}=e;const r=a?fc(a):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new lc:"undefined"!=typeof navigator?fc(navigator.userAgent):void 0!==rc&&rc.version?new ac(rc.version.slice(1)):null,i=Math.random(),o=r&&r.name&&mc(n,r.name)||0;var a;gc&&console.log(`[PROG CAMPAIGN] browser: ${r&&r.name}, chance: ${o}, rand: ${i}`),o>i&&t.emit("set page level targeting",{prog:!0})}async function yc(e){let{broker:t,getConfig:n}=e;__webpack_require__.g.window._qevents=__webpack_require__.g.window._qevents||[],__webpack_require__.g.window._qevents.push({qacct:"p-yVg_z7_Zx4fHs"}),t.invoke("import script","https://secure.quantserve.com/quant.js")}function bc(e){let{broker:t,log:n}=e;const r={},i={},o={total:0,auction:{},video:{}};function a(e,t,a){let s;return!i[a]&&r[a]&&(n("[",a,"] ad viewable, but bidding in progress - assuming the auction ended",r[a]),i[a]=r[a],delete r[a]),i[a]?(s=i[a].cpm,o.total+=s,o[e][t]=(o[e][t]||0)+s,n("[",a,"] ad viewable",i[a],"summary.total",o.total),delete i[a]):n("[",a,"] ad viewable - no winner"),s}window.adverts.getRevenueSummary=()=>o,t.on("bids requested",(e=>{e.positions.forEach((e=>{n("[",e,"] start auction"),delete r[e]}))})),t.on("bid",((e,t)=>{let{bidder:i,cpm:o}=t;(!r[e]||r[e].cpm<o)&&(r[e]={bidder:i,cpm:o}),n("[",e,"]",i,"offers to pay",o)})),t.on("bidding ended",(e=>{r[e]?(i[e]=r[e],delete r[e],n("[",e,"] bidding ended",i[e])):n("[",e,"] bidding ended - no bids")})),t.on("video ad viewable",(e=>{let{pos:t,videoId:n}=e;return a("video",n||"unknown",t)})),t.on("ad viewable",(e=>a("auction",e,e)))}vc.ccpa={enabledIfDissent:!0},vc.gdpr={enabledIfDissent:!0},vc.disableIfNoAdsServable=!0,yc.vendorIds={gdpr:[11]},yc.purposeIds={gdpr:"N/A"},bc.ccpa={enabledIfDissent:!0},bc.gdpr={enabledIfDissent:!0},bc.disableIfNoAdsServable=!0;const _c=(0,_.h)("rta");function wc(e){let{broker:t}=e;t.on("send to rta",(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"store";if(__webpack_require__.g.RTA&&"function"==typeof __webpack_require__.g.RTA.tedEvent){const r={action:n,name:e,value:t};_c("Sending:",r),__webpack_require__.g.RTA.tedEvent("page_event",r)}}))}function Sc(e){let{broker:t}=e;(0,xe.loaded)().then((()=>t.emit("dom loaded"))),DM.later("DOM_READY",(()=>t.emit("dom ready"))),window.addEventListener("load",(()=>t.emit("page load")))}wc.isAdsFreeSupported=!0,wc.ccpa={enabledIfDissent:!0},wc.gdpr={enabledIfDissent:!0},Sc.isAdsFreeSupported=!0,Sc.ccpa={enabledIfDissent:!0},Sc.gdpr={enabledIfDissent:!0};const Tc=(e,t)=>{let{isEmpty:n,slot:r}=t;if(!n)switch(e){case"billboard-oop":return kc();case"billboard":return Ic(document.getElementById(r.getSlotElementId()))}},Ic=e=>{if(!e)return;const t=e.querySelector(".mol-ads-label-container");t&&e.parentNode.appendChild(t)},kc=()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createTextNode((0,v.Jt)("label.text","ADVERTISEMENT"));t.classList.add("mol-ads-skin-label"),t.appendChild(n),e.classList.add("mol-ads-skin-label-container"),e.appendChild(t),document.body.appendChild(e)},Ac=e=>{let{imageURL:t,clickURL:n}=e;const{body:r}=document;document.documentElement.classList.add("mol-ads-skin-enabled");const i=document.createElement("a");i.className="mol-ads-skin-click-target",i.href=n;const o=document.createElement("div");o.className="mol-ads-skin-pad",r.insertBefore(i,r.firstChild),r.insertBefore(o,i),(0,xe.appendStyle)(`\nbody { background-image: url(${t}); }\n`),adverts.stopRefreshingAds(),kc()};function Ec(e){let{broker:t}=e;t.on("add skin to page",Ac),t.on("add skin label to page",kc),t.on("ad rendered",Tc)}Ec.ccpa={enabledIfDissent:!0},Ec.gdpr={enabledIfDissent:!0},Ec.disableIfNoAdsServable=!0;const Cc=function(){let{delay:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return n=>{t.push(n),setTimeout((()=>t.shift()()),e)}},xc={sync:()=>e=>e(),async:Cc,serial:()=>{const e=[];let t;const n=()=>{t=e.length&&setTimeout(r,0)},r=()=>{e.shift()(),n()},i=r=>{e.push(r),t||n()};return i.pause=()=>{t&&(clearTimeout(t),t=!1)},i.resume=()=>{t||n()},i.queue=e,i},idle:()=>__webpack_require__.g.requestIdleCallback?e=>__webpack_require__.g.requestIdleCallback(e):Cc(),nextFrame:()=>__webpack_require__.g.requestAnimationFrame?e=>__webpack_require__.g.requestAnimationFrame(e):Cc(),fps:__webpack_require__.g.requestAnimationFrame?function(){let e,{fps:t=20,count:n=1,internalExecuter:r="serial",...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=parseInt(t),n=parseInt(n);let o=0,a=[];const s=xc[r](i);let d=0;function l(e){s((()=>{e()}))}return requestAnimationFrame((function r(i){requestAnimationFrame(r),e?(d=1e3/(i-e),d>=t?(o++,o===n&&function(){const e=a;a={push:l},e.forEach(l),!e.length&&s.resume&&s.resume()}()):(o>=n&&(s.pause&&s.pause(),a=[]),o=0),e=i):e=i})),e=>{a.push(e)}}:Cc};function Oc(e){let{broker:t,getConfig:n}=e;const{type:r,...i}=n("scheduler.executer",{type:"async"}),o=(0,xc[r])(i);t.register("call for page analytics",(()=>({executer:r}))),t.bus.setDispatcher(o),i.debug&&console.log("Message dispatcher strategy:",r,i)}Oc.isAdsFreeSupported=!0,Oc.ccpa={enabledIfDissent:!0},Oc.gdpr={enabledIfDissent:!0};const Pc=Oc;async function Dc(e){let{broker:t,getConfig:n}=e;const r=/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer),i="newzit.app"===b.fX.source,o=n("molFeSmartBanner");t.once("dom ready",(async()=>{!MobileUtils.isMobile()&&!(0,b.jy)()||(0,b.Ri)("smart-banner")||r||i||DM.molFeComponents.setConfig("molFeSmartBanner",o)}))}function Rc(e){let{broker:t}=e;t.emit("set page level targeting",{abv:"9.15.0"})}function jc(e){let{broker:t,log:n}=e;n("video-events starting");const r=DM&&DM.pageEvents,i=[r.VIDEO_ADVERT_ABORTED,r.VIDEO_ADVERT_COMPLETED,r.VIDEO_ADVERT_FAILED,r.VIDEO_ADVERT_IMPRESSION,r.VIDEO_ADVERT_NOT_SHOWN,r.VIDEO_ADVERT_STARTED,r.VIDEO_CONTENT_ABORTED,r.VIDEO_CONTENT_COMPLETED,r.VIDEO_CONTENT_STARTED,r.VIDEO_DATA_READY,r.VIDEO_PLAYER_READY,r.VIDEO_PROGRESS,r.VIDEO_STREAM_FAILED,r.VIDEO_STREAM_STARTED];r&&i.forEach((e=>{r.subscribe(e,((r,i)=>{n("firing:",e),t.emit(`video page event ${e}`,e,i)}))}))}Dc.isAdsFreeSupported=!0,Dc.ccpa={enabledIfDissent:!0},Dc.gdpr={enabledIfDissent:!0},Rc.isAdsFreeSupported=!0,Rc.ccpa={enabledIfDissent:!0},Rc.gdpr={enabledIfDissent:!0},jc.ccpa={enabledIfDissent:!0},jc.gdpr={enabledIfDissent:!0},jc.disableIfNoAdsServable=!0;var Mc=__webpack_require__(4964);const Nc=(0,_.h)("context"),Uc=(async()=>{const e="https://cmp.dmgmediaprivacy.co.uk/locationjson.html";try{return(await fetch(e)).json()}catch(t){Nc.warn("error loading",e)}})(),Lc=Mc.Ay.isAndroidTablet()||Mc.Ay.isIPad()&&!Mc.Ay.isIPhone()?"tablet":Mc.Ay.isMobile()?"mobile":"desktop",Bc="channel"===__webpack_require__.g.PageCriteria.pageType&&(0,v.Jt)("page.homepages",["home","ushome","auhome","mailonsunday"]).includes(__webpack_require__.g.PageCriteria.channel)&&__webpack_require__.g.PageCriteria.subchannel===__webpack_require__.g.PageCriteria.channel,qc={adPageType:__webpack_require__.g.adPageType,device:Lc,DM:__webpack_require__.g.DM,isAdsFreeUser:()=>__webpack_require__.g.isAdFreeEntitled&&__webpack_require__.g.isAdFreeEntitled(),isHomepage:Bc,isTCFV2Jurisdiction:async e=>e("tcfv2.enabled",!1),pageCriteria:{...__webpack_require__.g.PageCriteria},pageMeta:{...__webpack_require__.g.DM.getPageMetadata()},pageGeoInfo:function(){return Uc},queryParams:b.fX};var Fc=__webpack_require__(1024),Vc=__webpack_require__.n(Fc),zc=__webpack_require__(5889),$c=__webpack_require__.n(zc),Wc=__webpack_require__(4278),Hc=__webpack_require__.n(Wc),Gc=__webpack_require__(9996),Xc=__webpack_require__.n(Gc),Jc=__webpack_require__(2705),Kc=__webpack_require__.n(Jc),Yc=__webpack_require__(9765),Qc=__webpack_require__.n(Yc);function Zc(){return Zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zc.apply(this,arguments)}var eu=__webpack_require__(2081),tu=__webpack_require__.n(eu);const nu=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Vc().location&&Vc().location.href||"");var n="function"==typeof Vc().URL,r=/^\/\//.test(e),i=!Vc().location&&!/\/\//i.test(e);if(n?e=new(Vc().URL)(e,Vc().location||"http://example.com"):/\/\//i.test(e)||(e=tu().buildAbsoluteURL(Vc().location&&Vc().location.href||"",e)),n){var o=new URL(t,e);return i?o.href.slice(18):r?o.href.slice(o.protocol.length):o.href}return tu().buildAbsoluteURL(e,t)};var ru=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),iu=__webpack_require__(8547).Buffer;function ou(e){for(var t,n=(t=e,Vc().atob?Vc().atob(t):iu.from(t,"base64").toString("binary")),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class au extends ru{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const su=String.fromCharCode(9),du=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},lu=function(e){const t={};if(!e)return t;const n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let r,i=n.length;for(;i--;)""!==n[i]&&(r=/([^=]*)=(.*)/.exec(n[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),t[r[0]]=r[1]);return t};class cu extends ru{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(((t,n)=>{const r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return n=Zc(du(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"map"},t[1]){const e=lu(t[1]);e.URI&&(n.uri=e.URI),e.BYTERANGE&&(n.byterange=du(e.BYTERANGE))}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=lu(t[1]),n.attributes.RESOLUTION){const e=n.attributes.RESOLUTION.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),n.attributes.RESOLUTION=t}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=lu(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=lu(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=lu(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"skip"},n.attributes=lu(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(su)),void this.trigger("data",n);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part"},n.attributes=lu(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=du(n.attributes.BYTERANGE)),void this.trigger("data",n);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"server-control"},n.attributes=lu(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part-inf"},n.attributes=lu(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"preload-hint"},n.attributes=lu(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void this.trigger("data",n);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"rendition-report"},n.attributes=lu(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void this.trigger("data",n);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(e),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=lu(t[1]),["ID","CLASS"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=String(n.attributes[e]))})),["START-DATE","END-DATE"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=new Date(n.attributes[e]))})),["DURATION","PLANNED-DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["END-ON-NEXT"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/i.test(n.attributes[e]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=n.attributes[e].toString(16))}));const e=/^X-([A-Z]+-)+[A-Z]+$/;for(const t in n.attributes){if(!e.test(t))continue;const r=/[0-9A-Fa-f]{6}/g.test(n.attributes[t]),i=/^\d+(\.\d+)?$/.test(n.attributes[t]);n.attributes[t]=r?n.attributes[t].toString(16):i?parseFloat(n.attributes[t]):String(n.attributes[t])}this.trigger("data",n)}else if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e),t)this.trigger("data",{type:"tag",tagType:"independent-segments"});else{if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e),t)return n={type:"tag",tagType:"content-steering"},n.attributes=lu(t[1]),void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}}else this.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:t,dataParser:n,segment:r}){"function"!=typeof n&&(n=e=>e),this.customParsers.push((i=>{if(e.exec(i))return this.trigger("data",{type:"custom",data:n(i),customType:t,segment:r}),!0}))}addTagMapper({expression:e,map:t}){this.tagMappers.push((n=>e.test(n)?t(n):n))}}const uu=function(e){const t={};return Object.keys(e).forEach((function(n){var r;t[(r=n,r.toLowerCase().replace(/-(\w)/g,(e=>e[1].toUpperCase())))]=e[n]})),t},pu=function(e){const{serverControl:t,targetDuration:n,partTargetDuration:r}=e;if(!t)return;const i="#EXT-X-SERVER-CONTROL",o="holdBack",a="partHoldBack",s=n&&3*n,d=r&&2*r;n&&!t.hasOwnProperty(o)&&(t[o]=s,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${s}).`})),s&&t[o]<s&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${t[o]}) to targetDuration * 3 (${s})`}),t[o]=s),r&&!t.hasOwnProperty(a)&&(t[a]=3*r,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[a]}).`})),r&&t[a]<d&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${t[a]}) to partTargetDuration * 2 (${d}).`}),t[a]=d)};class hu extends ru{constructor(){super(),this.lineStream=new au,this.parseStream=new cu,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const e=this,t=[];let n,r,i={},o=!1;const a=function(){},s={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let l=0,c=0;const u={};this.on("end",(()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&n&&(i.map=n),!i.key&&r&&(i.key=r),i.timeline||"number"!=typeof d||(i.timeline=d),this.manifest.preloadSegment=i)})),this.parseStream.on("data",(function(p){let h,f;({tag(){({version(){p.version&&(this.manifest.version=p.version)},"allow-cache"(){this.manifest.allowCache=p.allowed,"allowed"in p||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const e={};"length"in p&&(i.byterange=e,e.length=p.length,"offset"in p||(p.offset=l)),"offset"in p&&(i.byterange=e,e.offset=p.offset),l=e.offset+e.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),p.title&&(i.title=p.title),p.duration>0&&(i.duration=p.duration),0===p.duration&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(p.attributes)if("NONE"!==p.attributes.METHOD)if(p.attributes.URI){if("com.apple.streamingkeydelivery"===p.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:p.attributes});if("com.microsoft.playready"===p.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:p.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===p.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(p.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===p.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==p.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):p.attributes.KEYID&&"0x"===p.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:p.attributes.KEYFORMAT,keyId:p.attributes.KEYID.substring(2)},pssh:ou(p.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));p.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:p.attributes.METHOD||"AES-128",uri:p.attributes.URI},void 0!==p.attributes.IV&&(r.iv=p.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(p.number)?this.manifest.mediaSequence=p.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+p.number})},"discontinuity-sequence"(){isFinite(p.number)?(this.manifest.discontinuitySequence=p.number,d=p.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+p.number})},"playlist-type"(){/VOD|EVENT/.test(p.playlistType)?this.manifest.playlistType=p.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+p.playlist})},map(){n={},p.uri&&(n.uri=p.uri),p.byterange&&(n.byterange=p.byterange),r&&(n.key=r)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||s,p.attributes?(i.attributes||(i.attributes={}),Zc(i.attributes,p.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||s,!(p.attributes&&p.attributes.TYPE&&p.attributes["GROUP-ID"]&&p.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const e=this.manifest.mediaGroups[p.attributes.TYPE];e[p.attributes["GROUP-ID"]]=e[p.attributes["GROUP-ID"]]||{},h=e[p.attributes["GROUP-ID"]],f={default:/yes/i.test(p.attributes.DEFAULT)},f.default?f.autoselect=!0:f.autoselect=/yes/i.test(p.attributes.AUTOSELECT),p.attributes.LANGUAGE&&(f.language=p.attributes.LANGUAGE),p.attributes.URI&&(f.uri=p.attributes.URI),p.attributes["INSTREAM-ID"]&&(f.instreamId=p.attributes["INSTREAM-ID"]),p.attributes.CHARACTERISTICS&&(f.characteristics=p.attributes.CHARACTERISTICS),p.attributes.FORCED&&(f.forced=/yes/i.test(p.attributes.FORCED)),h[p.attributes.NAME]=f},discontinuity(){d+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=p.dateTimeString,this.manifest.dateTimeObject=p.dateTimeObject),i.dateTimeString=p.dateTimeString,i.dateTimeObject=p.dateTimeObject;const{lastProgramDateTime:e}=this;this.lastProgramDateTime=new Date(p.dateTimeString).getTime(),null===e&&this.manifest.segments.reduceRight(((e,t)=>(t.programDateTime=e-1e3*t.duration,t.programDateTime)),this.lastProgramDateTime)},targetduration(){!isFinite(p.duration)||p.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+p.duration}):(this.manifest.targetDuration=p.duration,pu.call(this,this.manifest))},start(){p.attributes&&!isNaN(p.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:p.attributes["TIME-OFFSET"],precise:p.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){i.cueOut=p.data},"cue-out-cont"(){i.cueOutCont=p.data},"cue-in"(){i.cueIn=p.data},skip(){this.manifest.skip=uu(p.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",p.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const e=this.manifest.segments.length,t=uu(p.attributes);i.parts=i.parts||[],i.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=c),c=t.byterange.offset+t.byterange.length);const n=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${n} for segment #${e}`,p.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const e=this.manifest.serverControl=uu(p.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),pu.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const e=this.manifest.segments.length,t=uu(p.attributes),n=t.type&&"PART"===t.type;i.preloadHints=i.preloadHints||[],i.preloadHints.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=n?c:0,n&&(c=t.byterange.offset+t.byterange.length)));const r=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${r} for segment #${e}`,p.attributes,["TYPE","URI"]),t.type)for(let n=0;n<i.preloadHints.length-1;n++){const o=i.preloadHints[n];o.type&&o.type===t.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${r} for segment #${e} has the same TYPE ${t.type} as preload hint #${n}`})}},"rendition-report"(){const e=uu(p.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);const t=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];o&&n.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${t}`,p.attributes,n)},"part-inf"(){this.manifest.partInf=uu(p.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",p.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),pu.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(uu(p.attributes));const e=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${e}`,p.attributes,["ID","START-DATE"]);const t=this.manifest.dateRanges[e];t.endDate&&t.startDate&&new Date(t.endDate)<new Date(t.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),t.duration&&t.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),t.plannedDuration&&t.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const n=!!t.endOnNext;if(n&&!t.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),n&&(t.duration||t.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),t.duration&&t.endDate){const n=t.startDate.getTime()+1e3*t.duration;this.manifest.dateRanges[e].endDate=new Date(n)}if(u[t.id]){for(const e in u[t.id])if(t[e]&&JSON.stringify(u[t.id][e])!==JSON.stringify(t[e])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const e=this.manifest.dateRanges.findIndex((e=>e.id===t.id));this.manifest.dateRanges[e]=Zc(this.manifest.dateRanges[e],t),u[t.id]=Zc(u[t.id],t),this.manifest.dateRanges.pop()}else u[t.id]=t},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=uu(p.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",p.attributes,["SERVER-URI"])}}[p.tagType]||a).call(e)},uri(){i.uri=p.uri,t.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),r&&(i.key=r),i.timeline=d,n&&(i.map=n),c=0,null!==this.lastProgramDateTime&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*i.duration),i={}},comment(){},custom(){p.segment?(i.custom=i.custom||{},i.custom[p.customType]=p.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[p.customType]=p.data)}})[p.type].call(e)}))}warnOnMissingAttributes_(e,t,n){const r=[];n.forEach((function(e){t.hasOwnProperty(e)||r.push(e)})),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var fu,gu,mu={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},vu=["video","audio","text"],yu=["Video","Audio","Text"],bu=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},_u=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),vu.forEach((function(r){var i=mu[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var o=e.substring(0,i[1].length),a=e.replace(o,"");n.push({type:o,details:a,mediaType:r})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},wu=function(e){return void 0===e&&(e=""),mu.audio.test(e.trim().toLowerCase())},Su=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return bu(e.trim())})),r="video";1===n.length&&wu(n[0])?r="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),mu.text.test(t.trim().toLowerCase()))&&(r="application");var i="mp4";return n.every((function(e){return mu.mp4.test(e)}))?i="mp4":n.every((function(e){return mu.webm.test(e)}))?i="webm":n.every((function(e){return mu.ogg.test(e)}))&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},Tu=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),Vc().MediaSource&&Vc().MediaSource.isTypeSupported&&Vc().MediaSource.isTypeSupported(Su(e))||t&&Vc().ManagedMediaSource&&Vc().ManagedMediaSource.isTypeSupported&&Vc().ManagedMediaSource.isTypeSupported(Su(e))||!1},Iu=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<yu.length;t++)if(mu["muxer"+yu[t]].test(e))return!0;return!1}))},ku="mp4a.40.2",Au=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Eu=/^application\/dash\+xml/i,Cu=function(e){return Au.test(e)?"hls":Eu.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},xu=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Ou=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||xu(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Pu=Vc().BigInt||Number,Du=[Pu("0x1"),Pu("0x100"),Pu("0x10000"),Pu("0x1000000"),Pu("0x100000000"),Pu("0x10000000000"),Pu("0x1000000000000"),Pu("0x100000000000000"),Pu("0x10000000000000000")],Ru=(fu=new Uint16Array([65484]),255===(gu=new Uint8Array(fu.buffer,fu.byteOffset,fu.byteLength))[0]||gu[0],function(e,t){var n=void 0===t?{}:t,r=n.signed,i=void 0!==r&&r,o=n.le,a=void 0!==o&&o;e=Ou(e);var s=a?"reduce":"reduceRight",d=(e[s]?e[s]:Array.prototype[s]).call(e,(function(t,n,r){var i=a?r:Math.abs(r+1-e.length);return t+Pu(n)*Du[i]}),Pu(0));if(i){var l=Du[e.length]/Pu(2)-Pu(1);(d=Pu(d))>l&&(d-=l,d-=l,d-=Pu(2))}return Number(d)}),ju=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Mu=function(e,t,n){var r=void 0===n?{}:n,i=r.offset,o=void 0===i?0:i,a=r.mask,s=void 0===a?[]:a;e=Ou(e);var d=(t=Ou(t)).every?t.every:Array.prototype.every;return t.length&&e.length-o>=t.length&&d.call(t,(function(t,n){return t===(s[n]?s[n]&e[o+n]:e[o+n])}))},Nu=__webpack_require__(8547).Buffer;var Uu=__webpack_require__(6039);const Lu=e=>!!e&&"object"==typeof e,Bu=(...e)=>e.reduce(((e,t)=>("object"!=typeof t||Object.keys(t).forEach((n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):Lu(e[n])&&Lu(t[n])?e[n]=Bu(e[n],t[n]):e[n]=t[n]})),e)),{}),qu=e=>Object.keys(e).map((t=>e[t])),Fu=e=>e.reduce(((e,t)=>e.concat(t)),[]),Vu=e=>{if(!e.length)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t};const zu=({baseUrl:e="",source:t="",range:n="",indexRange:r=""})=>{const i={uri:t,resolvedUri:nu(e||"",t)};if(n||r){const e=(n||r).split("-");let t,o=Vc().BigInt?Vc().BigInt(e[0]):parseInt(e[0],10),a=Vc().BigInt?Vc().BigInt(e[1]):parseInt(e[1],10);o<Number.MAX_SAFE_INTEGER&&"bigint"==typeof o&&(o=Number(o)),a<Number.MAX_SAFE_INTEGER&&"bigint"==typeof a&&(a=Number(a)),t="bigint"==typeof a||"bigint"==typeof o?Vc().BigInt(a)-Vc().BigInt(o)+Vc().BigInt(1):a-o+1,"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),i.byterange={length:t,offset:o}}return i},$u=e=>(e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),Wu={static(e){const{duration:t,timescale:n=1,sourceDuration:r,periodDuration:i}=e,o=$u(e.endNumber),a=t/n;return"number"==typeof o?{start:0,end:o}:"number"==typeof i?{start:0,end:i/a}:{start:0,end:r/a}},dynamic(e){const{NOW:t,clientOffset:n,availabilityStartTime:r,timescale:i=1,duration:o,periodStart:a=0,minimumUpdatePeriod:s=0,timeShiftBufferDepth:d=1/0}=e,l=$u(e.endNumber),c=(t+n)/1e3,u=r+a,p=c+s-u,h=Math.ceil(p*i/o),f=Math.floor((c-u-d)*i/o),g=Math.floor((c-u)*i/o);return{start:Math.max(0,f),end:"number"==typeof l?l:Math.min(h,g)}}},Hu=e=>{const{type:t,duration:n,timescale:r=1,periodDuration:i,sourceDuration:o}=e,{start:a,end:s}=Wu[t](e),d=((e,t)=>{const n=[];for(let r=e;r<t;r++)n.push(r);return n})(a,s).map((e=>t=>{const{duration:n,timescale:r=1,periodStart:i,startNumber:o=1}=e;return{number:o+t,duration:n/r,timeline:i,time:t*n}})(e));if("static"===t){const e=d.length-1,t="number"==typeof i?i:o;d[e].duration=t-n/r*e}return d},Gu=e=>{const{baseUrl:t,initialization:n={},sourceDuration:r,indexRange:i="",periodStart:o,presentationTime:a,number:s=0,duration:d}=e;if(!t)throw new Error("NO_BASE_URL");const l=zu({baseUrl:t,source:n.sourceURL,range:n.range}),c=zu({baseUrl:t,source:t,indexRange:i});if(c.map=l,d){const t=Hu(e);t.length&&(c.duration=t[0].duration,c.timeline=t[0].timeline)}else r&&(c.duration=r,c.timeline=o);return c.presentationTime=a||o,c.number=s,[c]},Xu=(e,t,n)=>{const r=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,o=e.timeline||0,a=e.sidx.byterange,s=a.offset+a.length,d=t.timescale,l=t.references.filter((e=>1!==e.referenceType)),c=[],u=e.endList?"static":"dynamic",p=e.sidx.timeline;let h,f=p,g=e.mediaSequence||0;h="bigint"==typeof t.firstOffset?Vc().BigInt(s)+t.firstOffset:s+t.firstOffset;for(let e=0;e<l.length;e++){const a=t.references[e],s=a.referencedSize,l=a.subsegmentDuration;let m;m="bigint"==typeof h?h+Vc().BigInt(s)-Vc().BigInt(1):h+s-1;const v=Gu({baseUrl:n,timescale:d,timeline:o,periodStart:p,presentationTime:f,number:g,duration:l,sourceDuration:i,indexRange:`${h}-${m}`,type:u})[0];r&&(v.map=r),c.push(v),h+="bigint"==typeof h?Vc().BigInt(s):s,f+=l/d,g++}return e.segments=c,e},Ju=["AUDIO","SUBTITLES"],Ku=e=>{return(t=e,n=({timeline:e})=>e,qu(t.reduce(((e,t)=>(t.forEach((t=>{e[n(t)]=t})),e)),{}))).sort(((e,t)=>e.timeline>t.timeline?1:-1));var t,n},Yu=e=>{let t=[];var n,r;return n=e,r=(e,n,r,i)=>{t=t.concat(e.playlists||[])},Ju.forEach((function(e){for(var t in n.mediaGroups[e])for(var i in n.mediaGroups[e][t]){var o=n.mediaGroups[e][t][i];r(o)}})),t},Qu=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach(((t,n)=>{t.number=e.mediaSequence+n}))},Zu=e=>e&&e.uri+"-"+(e=>{let t;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?Vc().BigInt(e.offset)+Vc().BigInt(e.length)-Vc().BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`})(e.byterange),ep=e=>{const t=e.reduce((function(e,t){return e[t.attributes.baseUrl]||(e[t.attributes.baseUrl]=[]),e[t.attributes.baseUrl].push(t),e}),{});let n=[];return Object.values(t).forEach((e=>{const t=qu(e.reduce(((e,t)=>{const n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[n].segments.push(...t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{}));n=n.concat(t)})),n.map((e=>{var t;return e.discontinuityStarts=(t=e.segments||[],"discontinuity",t.reduce(((e,t,n)=>(t.discontinuity&&e.push(n),e)),[])),e}))},tp=(e,t)=>{const n=Zu(e.sidx),r=n&&t[n]&&t[n].sidx;return r&&Xu(e,r,e.sidx.resolvedUri),e},np=(e,t={})=>{if(!Object.keys(t).length)return e;for(const n in e)e[n]=tp(e[n],t);return e},rp=({attributes:e,segments:t,sidx:n,discontinuityStarts:r})=>{const i={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,discontinuityStarts:r,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(i.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(i.contentProtection=e.contentProtection),e.serviceLocation&&(i.attributes.serviceLocation=e.serviceLocation),n&&(i.sidx=n),i},ip=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,op=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,ap=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,sp=e=>e?Object.keys(e).reduce(((t,n)=>{const r=e[n];return t.concat(r.playlists)}),[]):[],dp=({dashPlaylists:e,locations:t,contentSteering:n,sidxMapping:r={},previousManifest:i,eventStream:o})=>{if(!e.length)return{};const{sourceDuration:a,type:s,suggestedPresentationDelay:d,minimumUpdatePeriod:l}=e[0].attributes,c=ep(e.filter(ip)).map(rp),u=ep(e.filter(op)),p=ep(e.filter(ap)),h=e.map((e=>e.attributes.captionServices)).filter(Boolean),f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:np(c,r)};l>=0&&(f.minimumUpdatePeriod=1e3*l),t&&(f.locations=t),n&&(f.contentSteering=n),"dynamic"===s&&(f.suggestedPresentationDelay=d),o&&o.length>0&&(f.eventStream=o);const g=0===f.playlists.length,m=u.length?((e,t={},n=!1)=>{let r;const i=e.reduce(((e,i)=>{const o=i.attributes.role&&i.attributes.role.value||"",a=i.attributes.lang||"";let s=i.attributes.label||"main";if(a&&!i.attributes.label){const e=o?` (${o})`:"";s=`${i.attributes.lang}${e}`}e[s]||(e[s]={language:a,autoselect:!0,default:"main"===o,playlists:[],uri:""});const d=tp((({attributes:e,segments:t,sidx:n,mediaSequence:r,discontinuitySequence:i,discontinuityStarts:o},a)=>{const s={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,discontinuitySequence:i,discontinuityStarts:o,timelineStarts:e.timelineStarts,mediaSequence:r,segments:t};return e.contentProtection&&(s.contentProtection=e.contentProtection),e.serviceLocation&&(s.attributes.serviceLocation=e.serviceLocation),n&&(s.sidx=n),a&&(s.attributes.AUDIO="audio",s.attributes.SUBTITLES="subs"),s})(i,n),t);return e[s].playlists.push(d),void 0===r&&"main"===o&&(r=i,r.default=!0),e}),{});return r||(i[Object.keys(i)[0]].default=!0),i})(u,r,g):null,v=p.length?((e,t={})=>e.reduce(((e,n)=>{const r=n.attributes.label||n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),e[r].playlists.push(tp((({attributes:e,segments:t,mediaSequence:n,discontinuityStarts:r,discontinuitySequence:i})=>{void 0===t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const o={NAME:e.id,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1};e.codecs&&(o.CODECS=e.codecs);const a={attributes:o,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:r,discontinuitySequence:i,mediaSequence:n,segments:t};return e.serviceLocation&&(a.attributes.serviceLocation=e.serviceLocation),a})(n),t)),e}),{}))(p,r):null,y=c.concat(sp(m),sp(v)),b=y.map((({timelineStarts:e})=>e));var _,w;return f.timelineStarts=Ku(b),_=y,w=f.timelineStarts,_.forEach((e=>{e.mediaSequence=0,e.discontinuitySequence=w.findIndex((function({timeline:t}){return t===e.timeline})),e.segments&&e.segments.forEach(((e,t)=>{e.number=t}))})),m&&(f.mediaGroups.AUDIO.audio=m),v&&(f.mediaGroups.SUBTITLES.subs=v),h.length&&(f.mediaGroups["CLOSED-CAPTIONS"].cc=h.reduce(((e,t)=>t?(t.forEach((t=>{const{channel:n,language:r}=t;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},t.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[r].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[r]["3D"]=t["3D"])})),e):e),{})),i?(({oldManifest:e,newManifest:t})=>{const n=e.playlists.concat(Yu(e)),r=t.playlists.concat(Yu(t));return t.timelineStarts=Ku([e.timelineStarts,t.timelineStarts]),(({oldPlaylists:e,newPlaylists:t,timelineStarts:n})=>{t.forEach((t=>{t.discontinuitySequence=n.findIndex((function({timeline:e}){return e===t.timeline}));const r=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null})(e,t.attributes.NAME);if(!r)return;if(t.sidx)return;const i=t.segments[0],o=r.segments.findIndex((function(e){return Math.abs(e.presentationTime-i.presentationTime)<.016666666666666666}));if(-1===o)return Qu({playlist:t,mediaSequence:r.mediaSequence+r.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!r.segments.length&&t.timeline>r.timeline||r.segments.length&&t.timeline>r.segments[r.segments.length-1].timeline)&&t.discontinuitySequence--);r.segments[o].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Qu({playlist:t,mediaSequence:r.segments[o].number})}))})({oldPlaylists:n,newPlaylists:r,timelineStarts:t.timelineStarts}),t})({oldManifest:i,newManifest:f}):f},lp=(e,t,n)=>{const{NOW:r,clientOffset:i,availabilityStartTime:o,timescale:a=1,periodStart:s=0,minimumUpdatePeriod:d=0}=e,l=(r+i)/1e3+d-(o+s);return Math.ceil((l*a-t)/n)},cp=(e,t)=>{const{type:n,minimumUpdatePeriod:r=0,media:i="",sourceDuration:o,timescale:a=1,startNumber:s=1,periodStart:d}=e,l=[];let c=-1;for(let u=0;u<t.length;u++){const p=t[u],h=p.d,f=p.r||0,g=p.t||0;let m;if(c<0&&(c=g),g&&g>c&&(c=g),f<0){const s=u+1;m=s===t.length?"dynamic"===n&&r>0&&i.indexOf("$Number$")>0?lp(e,c,h):(o*a-c)/h:(t[s].t-c)/h}else m=f+1;const v=s+l.length+m;let y=s+l.length;for(;y<v;)l.push({number:y,duration:h/a,time:c,timeline:d}),c+=h,y++}return l},up=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,pp=(e,t)=>e.replace(up,(e=>(t,n,r,i)=>{if("$$"===t)return"$";if(void 0===e[n])return t;const o=""+e[n];return"RepresentationID"===n?o:(i=r?parseInt(i,10):1,o.length>=i?o:`${new Array(i-o.length+1).join("0")}${o}`)})(t)),hp=(e,t)=>{const n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=e,i=zu({baseUrl:e.baseUrl,source:pp(r.sourceURL,n),range:r.range}),o=((e,t)=>e.duration||t?e.duration?Hu(e):cp(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}])(e,t);return o.map((t=>{n.Number=t.number,n.Time=t.time;const r=pp(e.media||"",n),o=e.timescale||1,a=e.presentationTimeOffset||0,s=e.periodStart+(t.time-a)/o;return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:nu(e.baseUrl||"",r),map:i,number:t.number,presentationTime:s}}))},fp=(e,t)=>{const{duration:n,segmentUrls:r=[],periodStart:i}=e;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");const o=r.map((t=>((e,t)=>{const{baseUrl:n,initialization:r={}}=e,i=zu({baseUrl:n,source:r.sourceURL,range:r.range}),o=zu({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=i,o})(e,t)));let a;return n&&(a=Hu(e)),t&&(a=cp(e,t)),a.map(((t,n)=>{if(o[n]){const r=o[n],a=e.timescale||1,s=e.presentationTimeOffset||0;return r.timeline=t.timeline,r.duration=t.duration,r.number=t.number,r.presentationTime=i+(t.time-s)/a,r}})).filter((e=>e))},gp=({attributes:e,segmentInfo:t})=>{let n,r;t.template?(r=hp,n=Bu(e,t.template)):t.base?(r=Gu,n=Bu(e,t.base)):t.list&&(r=fp,n=Bu(e,t.list));const i={attributes:e};if(!r)return i;const o=r(n,t.segmentTimeline);if(n.duration){const{duration:e,timescale:t=1}=n;n.duration=e/t}else o.length?n.duration=o.reduce(((e,t)=>Math.max(e,Math.ceil(t.duration))),0):n.duration=0;return i.attributes=n,i.segments=o,t.base&&n.indexRange&&(i.sidx=o[0],i.segments=[]),i},mp=(e,t)=>Vu(e.childNodes).filter((({tagName:e})=>e===t)),vp=e=>e.textContent.trim(),yp=e=>{const t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;const[n,r,i,o,a,s]=t.slice(1);return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(i||0)+3600*parseFloat(o||0)+60*parseFloat(a||0)+parseFloat(s||0)},bp={mediaPresentationDuration:e=>yp(e),availabilityStartTime(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:e=>yp(e),suggestedPresentationDelay:e=>yp(e),type:e=>e,timeShiftBufferDepth:e=>yp(e),start:e=>yp(e),width:e=>parseInt(e,10),height:e=>parseInt(e,10),bandwidth:e=>parseInt(e,10),frameRate:e=>(e=>parseFloat(e.split("/").reduce(((e,t)=>e/t))))(e),startNumber:e=>parseInt(e,10),timescale:e=>parseInt(e,10),presentationTimeOffset:e=>parseInt(e,10),duration(e){const t=parseInt(e,10);return isNaN(t)?yp(e):t},d:e=>parseInt(e,10),t:e=>parseInt(e,10),r:e=>parseInt(e,10),presentationTime:e=>parseInt(e,10),DEFAULT:e=>e},_p=e=>e&&e.attributes?Vu(e.attributes).reduce(((e,t)=>{const n=bp[t.name]||bp.DEFAULT;return e[t.name]=n(t.value),e}),{}):{},wp={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Sp=(e,t)=>t.length?Fu(e.map((function(e){return t.map((function(t){const n=vp(t),r=nu(e.baseUrl,n),i=Bu(_p(t),{baseUrl:r});return r!==n&&!i.serviceLocation&&e.serviceLocation&&(i.serviceLocation=e.serviceLocation),i}))}))):e,Tp=e=>{const t=mp(e,"SegmentTemplate")[0],n=mp(e,"SegmentList")[0],r=n&&mp(n,"SegmentURL").map((e=>Bu({tag:"SegmentURL"},_p(e)))),i=mp(e,"SegmentBase")[0],o=n||t,a=o&&mp(o,"SegmentTimeline")[0],s=n||i||t,d=s&&mp(s,"Initialization")[0],l=t&&_p(t);l&&d?l.initialization=d&&_p(d):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});const c={template:l,segmentTimeline:a&&mp(a,"S").map((e=>_p(e))),list:n&&Bu(_p(n),{segmentUrls:r,initialization:_p(d)}),base:i&&Bu(_p(i),{initialization:_p(d)})};return Object.keys(c).forEach((e=>{c[e]||delete c[e]})),c},Ip=e=>Fu(mp(e.node,"EventStream").map((t=>{const n=_p(t),r=n.schemeIdUri;return mp(t,"Event").map((t=>{const i=_p(t),o=i.presentationTime||0,a=n.timescale||1,s=i.duration||0,d=o/a+e.attributes.start;return{schemeIdUri:r,value:n.value,id:i.id,start:d,end:d+s/a,messageData:vp(t)||i.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}}))}))),kp=(e,t,n)=>r=>{const i=_p(r),o=Sp(t,mp(r,"BaseURL")),a=mp(r,"Role")[0],s={role:_p(a)};let d=Bu(e,i,s);const l=mp(r,"Accessibility")[0],c="urn:scte:dash:cc:cea-608:2015"===(u=_p(l)).schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map((e=>{let t,n;return n=e,/^CC\d=/.test(e)?[t,n]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map((e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[n,r=""]=e.split("=");t.channel=n,t.language=e,r.split(",").forEach((e=>{const[n,r]=e.split(":");"lang"===n?t.language=r:"er"===n?t.easyReader=Number(r):"war"===n?t.aspectRatio=Number(r):"3D"===n&&(t["3D"]=Number(r))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;var u;c&&(d=Bu(d,{captionServices:c}));const p=mp(r,"Label")[0];if(p&&p.childNodes.length){const e=p.childNodes[0].nodeValue.trim();d=Bu(d,{label:e})}const h=mp(r,"ContentProtection").reduce(((e,t)=>{const n=_p(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const r=wp[n.schemeIdUri];if(r){e[r]={attributes:n};const i=mp(t,"cenc:pssh")[0];if(i){const t=vp(i);e[r].pssh=t&&function(e){for(var t,n=(t=e,Vc().atob?Vc().atob(t):Nu.from(t,"base64").toString("binary")),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}}return e}),{});Object.keys(h).length&&(d=Bu(d,{contentProtection:h}));const f=Tp(r),g=mp(r,"Representation"),m=Bu(n,f);return Fu(g.map(((e,t,n)=>r=>{const i=mp(r,"BaseURL"),o=Sp(t,i),a=Bu(e,_p(r)),s=Tp(r);return o.map((e=>({segmentInfo:Bu(n,s),attributes:Bu(a,e)})))})(d,o,m)))},Ap=(e,t)=>(n,r)=>{const i=Sp(t,mp(n.node,"BaseURL")),o=Bu(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(o.periodDuration=n.attributes.duration);const a=mp(n.node,"AdaptationSet"),s=Tp(n.node);return Fu(a.map(kp(o,i,s)))},Ep=(e,t)=>{if(e.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!e.length)return null;const n=Bu({serverURL:vp(e[0])},_p(e[0]));return n.queryBeforeStart="true"===n.queryBeforeStart,n},Cp=e=>{if(""===e)throw new Error("DASH_EMPTY_MANIFEST");const t=new Uu.DOMParser;let n,r;try{n=t.parseFromString(e,"application/xml"),r=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(e){}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r};var xp,Op=__webpack_require__(8430),Pp=__webpack_require__.n(Op),Dp=Ou([73,68,51]),Rp=function e(t,n){return void 0===n&&(n=0),(t=Ou(t)).length-n<10||!Mu(t,Dp,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=Ou(e))[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?r+20:r+10}(t,n),e(t,n))},jp=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?ju(e):e}),Mp=function(e){e=Ou(e);for(var t=[],n=0;e.length>n;){var r=e[n],i=0,o=0,a=e[++o];for(o++;128&a;)i=(127&a)<<7,a=e[o],o++;i+=127&a;for(var s=0;s<xp.length;s++){var d=xp[s],l=d.id,c=d.parser;if(r===l){t.push(c(e.subarray(o,o+i)));break}}n+=i+o}return t};xp=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Ou(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=Mp(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Mp(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Np=function e(t,n,r){void 0===r&&(r=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return jp(e)})):[jp(e)]}(n),t=Ou(t);var i=[];if(!n.length)return i;for(var o=0;o<t.length;){var a=(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3])>>>0,s=t.subarray(o+4,o+8);if(0===a)break;var d=o+a;if(d>t.length){if(r)break;d=t.length}var l=t.subarray(o+8,d);Mu(s,n[0])&&(1===n.length?i.push(l):i.push.apply(i,e(l,n.slice(1),r))),o=d}return i},Up={EBML:Ou([26,69,223,163]),DocType:Ou([66,130]),Segment:Ou([24,83,128,103]),SegmentInfo:Ou([21,73,169,102]),Tracks:Ou([22,84,174,107]),Track:Ou([174]),TrackNumber:Ou([215]),DefaultDuration:Ou([35,227,131]),TrackEntry:Ou([174]),TrackType:Ou([131]),FlagDefault:Ou([136]),CodecID:Ou([134]),CodecPrivate:Ou([99,162]),VideoTrack:Ou([224]),AudioTrack:Ou([225]),Cluster:Ou([31,67,182,117]),Timestamp:Ou([231]),TimestampScale:Ou([42,215,177]),BlockGroup:Ou([160]),BlockDuration:Ou([155]),Block:Ou([161]),SimpleBlock:Ou([163])},Lp=[128,64,32,16,8,4,2,1],Bp=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=function(e){for(var t=1,n=0;n<Lp.length&&!(e&Lp[n]);n++)t++;return t}(e[t]),o=e.subarray(t,t+i);return n&&((o=Array.prototype.slice.call(e,t,t+i))[0]^=Lp[i-1]),{length:i,value:Ru(o,{signed:r}),bytes:o}},qp=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?function(e,t){var n=(void 0===t?{}:t).le,r=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var i,o=(i=e=Pu(e),Math.ceil(function(e){return e.toString(2).length}(i)/8)),a=new Uint8Array(new ArrayBuffer(o)),s=0;s<o;s++){var d=r?s:Math.abs(s+1-a.length);a[d]=Number(e/Du[s]&Pu(255)),e<0&&(a[d]=Math.abs(~a[d]),a[d]-=0===s?1:2)}return a}(t):t},Fp=function e(t,n,r){if(r>=n.length)return n.length;var i=Bp(n,r,!1);if(Mu(t.bytes,i.bytes))return r;var o=Bp(n,r+i.length);return e(t,n,r+o.length+o.value+i.length)},Vp=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return qp(e)})):[qp(e)]}(n),t=Ou(t);var r=[];if(!n.length)return r;for(var i=0;i<t.length;){var o=Bp(t,i,!1),a=Bp(t,i+o.length),s=i+o.length+a.length;127===a.value&&(a.value=Fp(o,t,s),a.value!==t.length&&(a.value-=s));var d=s+a.value>t.length?t.length:s+a.value,l=t.subarray(s,d);Mu(n[0],o.bytes)&&(1===n.length?r.push(l):r=r.concat(e(l,n.slice(1)))),i+=o.length+a.length+l.length}return r},zp=Ou([0,0,0,1]),$p=Ou([0,0,1]),Wp=Ou([0,0,3]),Hp=function(e){for(var t=[],n=1;n<e.length-2;)Mu(e.subarray(n,n+3),Wp)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var r=e.length-t.length,i=new Uint8Array(r),o=0;for(n=0;n<r;o++,n++)o===t[0]&&(o++,t.shift()),i[n]=e[o];return i},Gp=function(e,t,n,r){void 0===r&&(r=1/0),e=Ou(e),n=[].concat(n);for(var i,o=0,a=0;o<e.length&&(a<r||i);){var s=void 0;if(Mu(e.subarray(o),zp)?s=4:Mu(e.subarray(o),$p)&&(s=3),s){if(a++,i)return Hp(e.subarray(i,o));var d=void 0;"h264"===t?d=31&e[o+s]:"h265"===t&&(d=e[o+s]>>1&63),-1!==n.indexOf(d)&&(i=o+s),o+=s+("h264"===t?1:2)}else o++}return e.subarray(0,0)},Xp={webm:Ou([119,101,98,109]),matroska:Ou([109,97,116,114,111,115,107,97]),flac:Ou([102,76,97,67]),ogg:Ou([79,103,103,83]),ac3:Ou([11,119]),riff:Ou([82,73,70,70]),avi:Ou([65,86,73]),wav:Ou([87,65,86,69]),"3gp":Ou([102,116,121,112,51,103]),mp4:Ou([102,116,121,112]),fmp4:Ou([115,116,121,112]),mov:Ou([102,116,121,112,113,116]),moov:Ou([109,111,111,118]),moof:Ou([109,111,111,102])},Jp={aac:function(e){var t=Rp(e);return Mu(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Rp(e);return Mu(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Vp(e,[Up.EBML,Up.DocType])[0];return Mu(t,Xp.webm)},mkv:function(e){var t=Vp(e,[Up.EBML,Up.DocType])[0];return Mu(t,Xp.matroska)},mp4:function(e){return!Jp["3gp"](e)&&!Jp.mov(e)&&(!(!Mu(e,Xp.mp4,{offset:4})&&!Mu(e,Xp.fmp4,{offset:4}))||!(!Mu(e,Xp.moof,{offset:4})&&!Mu(e,Xp.moov,{offset:4}))||void 0)},mov:function(e){return Mu(e,Xp.mov,{offset:4})},"3gp":function(e){return Mu(e,Xp["3gp"],{offset:4})},ac3:function(e){var t=Rp(e);return Mu(e,Xp.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Rp(e);return Mu(e,Xp.flac,{offset:t})},ogg:function(e){return Mu(e,Xp.ogg)},avi:function(e){return Mu(e,Xp.riff)&&Mu(e,Xp.avi,{offset:8})},wav:function(e){return Mu(e,Xp.riff)&&Mu(e,Xp.wav,{offset:8})},h264:function(e){return function(e,t,n){return Gp(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return Gp(e,"h265",[32,33],3)}(e).length}},Kp=Object.keys(Jp).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);Kp.forEach((function(e){var t=Jp[e];Jp[e]=function(e){return t(Ou(e))}}));var Yp=Jp,Qp=function(e){e=Ou(e);for(var t=0;t<Kp.length;t++){var n=Kp[t];if(Yp[n](e))return n}return""},Zp=__webpack_require__(7898),eh="8.11.1";const th={},nh=function(e,t){return th[e]=th[e]||[],t&&(th[e]=th[e].concat(t)),th[e]},rh=function(e,t){const n=nh(e).indexOf(t);return!(n<=-1||(th[e]=th[e].slice(),th[e].splice(n,1),0))},ih={prefixed:!0},oh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],ah=oh[0];let sh;for(let e=0;e<oh.length;e++)if(oh[e][1]in $c()){sh=oh[e];break}if(sh){for(let e=0;e<sh.length;e++)ih[ah[e]]=sh[e];ih.prefixed=sh[0]!==ah[0]}let dh=[];const lh=function e(t,n=":",r=""){let i,o="info";const a=function(...e){i("log",o,e)};return i=((e,t,n)=>(r,i,o)=>{const a=t.levels[i],s=new RegExp(`^(${a})$`);let d=e;if("log"!==r&&o.unshift(r.toUpperCase()+":"),n&&(d=`%c${e}`,o.unshift(n)),o.unshift(d+":"),dh){dh.push([].concat(o));const e=dh.length-1e3;dh.splice(0,e>0?e:0)}if(!Vc().console)return;let l=Vc().console[r];l||"debug"!==r||(l=Vc().console.info||Vc().console.log),l&&a&&s.test(r)&&l[Array.isArray(o)?"apply":"call"](Vc().console,o)})(t,a,r),a.createLogger=(i,o,a)=>{const s=void 0!==o?o:n;return e(`${t} ${s} ${i}`,s,void 0!==a?a:r)},a.createNewLogger=(t,n,r)=>e(t,n,r),a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:o},a.level=e=>{if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);o=e}return o},(a.history=()=>dh?[].concat(dh):[]).filter=e=>(dh||[]).filter((t=>new RegExp(`.*${e}.*`).test(t[0]))),a.history.clear=()=>{dh&&(dh.length=0)},a.history.disable=()=>{null!==dh&&(dh.length=0,dh=null)},a.history.enable=()=>{null===dh&&(dh=[])},a.error=(...e)=>i("error",o,e),a.warn=(...e)=>i("warn",o,e),a.debug=(...e)=>i("debug",o,e),a}("VIDEOJS"),ch=lh.createLogger,uh=Object.prototype.toString,ph=function(e){return gh(e)?Object.keys(e):[]};function hh(e,t){ph(e).forEach((n=>t(e[n],n)))}function fh(e,t,n=0){return ph(e).reduce(((n,r)=>t(n,e[r],r)),n)}function gh(e){return!!e&&"object"==typeof e}function mh(e){return gh(e)&&"[object Object]"===uh.call(e)&&e.constructor===Object}function vh(...e){const t={};return e.forEach((e=>{e&&hh(e,((e,n)=>{mh(e)?(mh(t[n])||(t[n]={}),t[n]=vh(t[n],e)):t[n]=e}))})),t}function yh(e={}){const t=[];for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];t.push(r)}return t}function bh(e,t,n,r=!0){const i=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0}),o={configurable:!0,enumerable:!0,get(){const e=n();return i(e),e}};return r&&(o.set=i),Object.defineProperty(e,t,o)}var _h=Object.freeze({__proto__:null,each:hh,reduce:fh,isObject:gh,isPlain:mh,merge:vh,values:yh,defineLazyProperty:bh});let wh,Sh=!1,Th=null,Ih=!1,kh=!1,Ah=!1,Eh=!1,Ch=!1,xh=null,Oh=null,Ph=null,Dh=!1,Rh=!1,jh=!1,Mh=!1,Nh=!1,Uh=!1;const Lh=Boolean($h()&&("ontouchstart"in Vc()||Vc().navigator.maxTouchPoints||Vc().DocumentTouch&&Vc().document instanceof Vc().DocumentTouch)),Bh=Vc().navigator&&Vc().navigator.userAgentData;if(Bh&&Bh.platform&&Bh.brands&&(Ih="Android"===Bh.platform,Ah=Boolean(Bh.brands.find((e=>"Microsoft Edge"===e.brand))),Eh=Boolean(Bh.brands.find((e=>"Chromium"===e.brand))),Ch=!Ah&&Eh,xh=Oh=(Bh.brands.find((e=>"Chromium"===e.brand))||{}).version||null,Rh="Windows"===Bh.platform),!Eh){const e=Vc().navigator&&Vc().navigator.userAgent||"";Sh=/iPod/i.test(e),Th=function(){const t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Ih=/Android/i.test(e),wh=function(){const t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const n=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return n&&r?parseFloat(t[1]+"."+t[2]):n||null}(),kh=/Firefox/i.test(e),Ah=/Edg/i.test(e),Eh=/Chrome/i.test(e)||/CriOS/i.test(e),Ch=!Ah&&Eh,xh=Oh=function(){const t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Ph=function(){const t=/MSIE\s(\d+)\.\d/.exec(e);let n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(n=11),n}(),Nh=/Tizen/i.test(e),Uh=/Web0S/i.test(e),Dh=/Safari/i.test(e)&&!Ch&&!Ih&&!Ah&&!Nh&&!Uh,Rh=/Windows/i.test(e),jh=/iPad/i.test(e)||Dh&&Lh&&!/iPhone/i.test(e),Mh=/iPhone/i.test(e)&&!jh}const qh=Mh||jh||Sh,Fh=(Dh||qh)&&!Ch;var Vh=Object.freeze({__proto__:null,get IS_IPOD(){return Sh},get IOS_VERSION(){return Th},get IS_ANDROID(){return Ih},get ANDROID_VERSION(){return wh},get IS_FIREFOX(){return kh},get IS_EDGE(){return Ah},get IS_CHROMIUM(){return Eh},get IS_CHROME(){return Ch},get CHROMIUM_VERSION(){return xh},get CHROME_VERSION(){return Oh},get IE_VERSION(){return Ph},get IS_SAFARI(){return Dh},get IS_WINDOWS(){return Rh},get IS_IPAD(){return jh},get IS_IPHONE(){return Mh},get IS_TIZEN(){return Nh},get IS_WEBOS(){return Uh},TOUCH_ENABLED:Lh,IS_IOS:qh,IS_ANY_SAFARI:Fh});function zh(e){return"string"==typeof e&&Boolean(e.trim())}function $h(){return $c()===Vc().document}function Wh(e){return gh(e)&&1===e.nodeType}function Hh(){try{return Vc().parent!==Vc().self}catch(e){return!0}}function Gh(e){return function(t,n){if(!zh(t))return $c()[e](null);zh(n)&&(n=$c().querySelector(n));const r=Wh(n)?n:$c();return r[e]&&r[e](t)}}function Xh(e="div",t={},n={},r){const i=$c().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){const n=t[e];"textContent"===e?Jh(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){i.setAttribute(e,n[e])})),r&&gf(i,r),i}function Jh(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Kh(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Yh(e,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),e.classList.contains(t)}function Qh(e,...t){return e.classList.add(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e}function Zh(e,...t){return e?(e.classList.remove(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e):(lh.warn("removeClass was called with an element that doesn't exist"),null)}function ef(e,t,n){return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=void 0),t.split(/\s+/).forEach((t=>e.classList.toggle(t,n))),e}function tf(e,t){Object.getOwnPropertyNames(t).forEach((function(n){const r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)}))}function nf(e){const t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e&&e.attributes&&e.attributes.length>0){const r=e.attributes;for(let e=r.length-1;e>=0;e--){const i=r[e].name;let o=r[e].value;n.includes(i)&&(o=null!==o),t[i]=o}}return t}function rf(e,t){return e.getAttribute(t)}function of(e,t,n){e.setAttribute(t,n)}function af(e,t){e.removeAttribute(t)}function sf(){$c().body.focus(),$c().onselectstart=function(){return!1}}function df(){$c().onselectstart=function(){return!0}}function lf(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((e=>{void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(_f(e,"height"))),n.width||(n.width=parseFloat(_f(e,"width"))),n}}function cf(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,n=e.offsetHeight;let r=0,i=0;for(;e.offsetParent&&e!==$c()[ih.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function uf(e,t){const n={x:0,y:0};if(qh){let t=e;for(;t&&"html"!==t.nodeName.toLowerCase();){const e=_f(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);n.x+=t[12],n.y+=t[13]}t=t.parentNode}}const r={},i=cf(t.target),o=cf(e),a=o.width,s=o.height;let d=t.offsetY-(o.top-i.top),l=t.offsetX-(o.left-i.left);return t.changedTouches&&(l=t.changedTouches[0].pageX-o.left,d=t.changedTouches[0].pageY+o.top,qh&&(l-=n.x,d-=n.y)),r.y=1-Math.max(0,Math.min(1,d/s)),r.x=Math.max(0,Math.min(1,l/a)),r}function pf(e){return gh(e)&&3===e.nodeType}function hf(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ff(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((e=>("function"==typeof e&&(e=e()),Wh(e)||pf(e)?e:"string"==typeof e&&/\S/.test(e)?$c().createTextNode(e):void 0))).filter((e=>e))}function gf(e,t){return ff(t).forEach((t=>e.appendChild(t))),e}function mf(e,t){return gf(hf(e),t)}function vf(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}const yf=Gh("querySelector"),bf=Gh("querySelectorAll");function _f(e,t){if(!e||!t)return"";if("function"==typeof Vc().getComputedStyle){let n;try{n=Vc().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}function wf(e){[...$c().styleSheets].forEach((t=>{try{const n=[...t.cssRules].map((e=>e.cssText)).join(""),r=$c().createElement("style");r.textContent=n,e.document.head.appendChild(r)}catch(n){const r=$c().createElement("link");r.rel="stylesheet",r.type=t.type,r.media=t.media.mediaText,r.href=t.href,e.document.head.appendChild(r)}}))}var Sf=Object.freeze({__proto__:null,isReal:$h,isEl:Wh,isInFrame:Hh,createEl:Xh,textContent:Jh,prependTo:Kh,hasClass:Yh,addClass:Qh,removeClass:Zh,toggleClass:ef,setAttributes:tf,getAttributes:nf,getAttribute:rf,setAttribute:of,removeAttribute:af,blockTextSelection:sf,unblockTextSelection:df,getBoundingClientRect:lf,findPosition:cf,getPointerPosition:uf,isTextNode:pf,emptyEl:hf,normalizeContent:ff,appendContent:gf,insertContent:mf,isSingleLeftClick:vf,$:yf,$$:bf,computedStyle:_f,copyStyleSheetsToWindow:wf});let Tf,If=!1;const kf=function(){if(!1===Tf.options.autoSetup)return;const e=Array.prototype.slice.call($c().getElementsByTagName("video")),t=Array.prototype.slice.call($c().getElementsByTagName("audio")),n=Array.prototype.slice.call($c().getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(let e=0,t=r.length;e<t;e++){const t=r[e];if(!t||!t.getAttribute){Af(1);break}void 0===t.player&&null!==t.getAttribute("data-setup")&&Tf(t)}else If||Af(1)};function Af(e,t){$h()&&(t&&(Tf=t),Vc().setTimeout(kf,e))}function Ef(){If=!0,Vc().removeEventListener("load",Ef)}$h()&&("complete"===$c().readyState?Ef():Vc().addEventListener("load",Ef));const Cf=function(e){const t=$c().createElement("style");return t.className=e,t},xf=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var Of=new WeakMap;let Pf,Df=3;function Rf(){return Df++}function jf(e,t){if(!Of.has(e))return;const n=Of.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Of.delete(e)}function Mf(e,t,n,r){n.forEach((function(n){e(t,n,r)}))}function Nf(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const r=e||Vc().event;e={};for(const t in r)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&r.preventDefault||(e[t]=r[t]));if(e.target||(e.target=e.srcElement||$c()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){const t=$c().documentElement,n=$c().body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const Uf=function(){if("boolean"!=typeof Pf){Pf=!1;try{const e=Object.defineProperty({},"passive",{get(){Pf=!0}});Vc().addEventListener("test",null,e),Vc().removeEventListener("test",null,e)}catch(e){}}return Pf},Lf=["touchstart","touchmove"];function Bf(e,t,n){if(Array.isArray(t))return Mf(Bf,e,t,n);Of.has(e)||Of.set(e,{});const r=Of.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=Rf()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(r.disabled)return;t=Nf(t);const i=r.handlers[t.type];if(i){const r=i.slice(0);for(let i=0,o=r.length;i<o&&!t.isImmediatePropagationStopped();i++)try{r[i].call(e,t,n)}catch(e){lh.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){let n=!1;Uf()&&Lf.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function qf(e,t,n){if(!Of.has(e))return;const r=Of.get(e);if(!r.handlers)return;if(Array.isArray(t))return Mf(qf,e,t,n);const i=function(e,t){r.handlers[t]=[],jf(e,t)};if(void 0===t){for(const t in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},t)&&i(e,t);return}const o=r.handlers[t];if(o)if(n){if(n.guid)for(let e=0;e<o.length;e++)o[e].guid===n.guid&&o.splice(e--,1);jf(e,t)}else i(e,t)}function Ff(e,t,n){const r=Of.has(e)?Of.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Nf(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)Ff.call(null,i,t,n);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){Of.has(t.target)||Of.set(t.target,{});const e=Of.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function Vf(e,t,n){if(Array.isArray(t))return Mf(Vf,e,t,n);const r=function(){qf(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Rf(),Bf(e,t,r)}function zf(e,t,n){const r=function(){qf(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Rf(),Bf(e,t,r)}var $f=Object.freeze({__proto__:null,fixEvent:Nf,on:Bf,off:qf,trigger:Ff,one:Vf,any:zf});const Wf=30,Hf=function(e,t,n){t.guid||(t.guid=Rf());const r=t.bind(e);return r.guid=n?n+"_"+t.guid:t.guid,r},Gf=function(e,t){let n=Vc().performance.now();return function(...r){const i=Vc().performance.now();i-n>=t&&(e(...r),n=i)}},Xf=function(e,t,n,r=Vc()){let i;const o=function(){const o=this,a=arguments;let s=function(){i=null,s=null,n||e.apply(o,a)};!i&&n&&e.apply(o,a),r.clearTimeout(i),i=r.setTimeout(s,t)};return o.cancel=()=>{r.clearTimeout(i),i=null},o};var Jf=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Wf,bind_:Hf,throttle:Gf,debounce:Xf});let Kf;class Yf{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Bf(this,e,t),this.addEventListener=n}off(e,t){qf(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Vf(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},zf(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=Nf(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ff(this,e)}queueTrigger(e){Kf||(Kf=new Map);const t=e.type||e;let n=Kf.get(this);n||(n=new Map,Kf.set(this,n));const r=n.get(t);n.delete(t),Vc().clearTimeout(r);const i=Vc().setTimeout((()=>{n.delete(t),0===n.size&&(n=null,Kf.delete(this)),this.trigger(e)}),0);n.set(t,i)}}Yf.prototype.allowedEvents_={},Yf.prototype.addEventListener=Yf.prototype.on,Yf.prototype.removeEventListener=Yf.prototype.off,Yf.prototype.dispatchEvent=Yf.prototype.trigger;const Qf=e=>"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,Zf=e=>e instanceof Yf||!!e.eventBusEl_&&["on","one","off","trigger"].every((t=>"function"==typeof e[t])),eg=e=>"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,tg=(e,t,n)=>{if(!e||!e.nodeName&&!Zf(e))throw new Error(`Invalid target for ${Qf(t)}#${n}; must be a DOM node or evented object.`)},ng=(e,t,n)=>{if(!eg(e))throw new Error(`Invalid event type for ${Qf(t)}#${n}; must be a non-empty string or array.`)},rg=(e,t,n)=>{if("function"!=typeof e)throw new Error(`Invalid listener for ${Qf(t)}#${n}; must be a function.`)},ig=(e,t,n)=>{const r=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let i,o,a;return r?(i=e.eventBusEl_,t.length>=3&&t.shift(),[o,a]=t):[i,o,a]=t,tg(i,e,n),ng(o,e,n),rg(a,e,n),a=Hf(e,a),{isTargetingSelf:r,target:i,type:o,listener:a}},og=(e,t,n,r)=>{tg(e,e,t),e.nodeName?$f[t](e,n,r):e[t](n,r)},ag={on(...e){const{isTargetingSelf:t,target:n,type:r,listener:i}=ig(this,e,"on");if(og(n,"on",r,i),!t){const e=()=>this.off(n,r,i);e.guid=i.guid;const t=()=>this.off("dispose",e);t.guid=i.guid,og(this,"on","dispose",e),og(n,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:n,type:r,listener:i}=ig(this,e,"one");if(t)og(n,"one",r,i);else{const e=(...t)=>{this.off(n,r,e),i.apply(null,t)};e.guid=i.guid,og(n,"one",r,e)}},any(...e){const{isTargetingSelf:t,target:n,type:r,listener:i}=ig(this,e,"any");if(t)og(n,"any",r,i);else{const e=(...t)=>{this.off(n,r,e),i.apply(null,t)};e.guid=i.guid,og(n,"any",r,e)}},off(e,t,n){if(!e||eg(e))qf(this.eventBusEl_,e,t);else{const r=e,i=t;tg(r,this,"off"),ng(i,this,"off"),rg(n,this,"off"),n=Hf(this,n),this.off("dispose",n),r.nodeName?(qf(r,i,n),qf(r,"dispose",n)):Zf(r)&&(r.off(i,n),r.off("dispose",n))}},trigger(e,t){tg(this.eventBusEl_,this,"trigger");const n=e&&"string"!=typeof e?e.type:e;if(!eg(n))throw new Error(`Invalid event type for ${Qf(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Ff(this.eventBusEl_,e,t)}};function sg(e,t={}){const{eventBusKey:n}=t;if(n){if(!e[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);e.eventBusEl_=e[n]}else e.eventBusEl_=Xh("span",{className:"vjs-event-bus"});return Object.assign(e,ag),e.eventedCallbacks&&e.eventedCallbacks.forEach((e=>{e()})),e.on("dispose",(()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&Of.has(e)&&Of.delete(e)})),Vc().setTimeout((()=>{e.eventBusEl_=null}),0)})),e}const dg={state:{},setState(e){let t;return"function"==typeof e&&(e=e()),hh(e,((e,n)=>{this.state[n]!==e&&(t=t||{},t[n]={from:this.state[n],to:e}),this.state[n]=e})),t&&Zf(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function lg(e,t){return Object.assign(e,dg),e.state=Object.assign({},e.state,t),"function"==typeof e.handleStateChanged&&Zf(e)&&e.on("statechanged",e.handleStateChanged),e}const cg=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toLowerCase()))},ug=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},pg=function(e,t){return ug(e)===ug(t)};var hg=Object.freeze({__proto__:null,toLowerCase:cg,toTitleCase:ug,titleCaseEquals:pg});class fg{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=vh({},this.options_),t=this.options_=vh(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${Rf()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((e=>this.addClass(e))),["on","off","one","any","trigger"].forEach((e=>{this[e]=void 0})),!1!==t.evented&&(sg(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),lg(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e,t){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=vh(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return Xh(e,t,n)}localize(e,t,n=e){const r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[r],a=r&&r.split("-")[0],s=i&&i[a];let d=n;return o&&o[e]?d=o[e]:s&&s[e]&&(d=s[e]),t&&(d=d.replace(/\{(\d+)\}/g,(function(e,n){const r=t[n-1];let i=r;return void 0===r&&(i=e),i}))),d}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce(((e,t)=>e.concat(t)),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",r=Xh("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),i=$c().createElementNS(n,"svg");i.setAttributeNS(null,"viewBox","0 0 512 512");const o=$c().createElementNS(n,"use");return i.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),r.appendChild(i),this.iconIsSet_?t.replaceChild(r,t.querySelector(".vjs-icon-placeholder")):t.appendChild(r),this.iconIsSet_=!0,r}addChild(e,t={},n=this.children_.length){let r,i;if("string"==typeof e){i=ug(e);const n=t.componentClass||i;t.name=i;const o=fg.getComponent(n);if(!o)throw new Error(`Component ${n} does not exist`);if("function"!=typeof o)return null;r=new o(this.player_||this,t)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),i=i||r.name&&ug(r.name()),i&&(this.childNameIndex_[i]=r,this.childNameIndex_[cg(i)]=r),"function"==typeof r.el&&r.el()){let e=null;this.children_[n+1]&&(this.children_[n+1].el_?e=this.children_[n+1].el_:Wh(this.children_[n+1])&&(e=this.children_[n+1])),this.contentEl().insertBefore(r.el(),e)}return r}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ug(e.name())]=null,this.childNameIndex_[cg(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=e=>{const n=e.name;let r=e.opts;if(void 0!==t[n]&&(r=t[n]),!1===r)return;!0===r&&(r={}),r.playerOptions=this.options_.playerOptions;const i=this.addChild(n,r);i&&(this[n]=i)};let r;const i=fg.getComponent("Tech");r=Array.isArray(e)?e:Object.keys(e),r.concat(Object.keys(this.options_).filter((function(e){return!r.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((t=>{let n,r;return"string"==typeof t?(n=t,r=e[n]||this.options_[n]||{}):(n=t.name,r=t),{name:n,opts:r}})).filter((e=>{const t=fg.getComponent(e.opts.componentClass||ug(e.name));return t&&!i.isTech(t)})).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout((function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)}$(e,t){return yf(e,t||this.contentEl())}$$(e,t){return bf(e,t||this.contentEl())}hasClass(e){return Yh(this.el_,e)}addClass(...e){Qh(this.el_,...e)}removeClass(...e){Zh(this.el_,...e)}toggleClass(e,t){ef(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return rf(this.el_,e)}setAttribute(e,t){of(this.el_,e,t)}removeAttribute(e){af(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;const r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+ug(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=_f(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const n=`offset${ug(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Hc().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e,t=0,n=null;this.on("touchstart",(function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=Vc().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){const r=t.touches[0].pageX-n.pageX,i=t.touches[0].pageY-n.pageY;Math.sqrt(r*r+i*i)>10&&(e=!1)}}));const r=function(){e=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){n=null,!0===e&&Vc().performance.now()-t<200&&(r.preventDefault(),this.trigger("tap"))}))}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Hf(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));const n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=Hf(this,e),this.clearTimersOnDispose_(),n=Vc().setTimeout((()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Vc().clearTimeout(e)),e}setInterval(e,t){e=Hf(this,e),this.clearTimersOnDispose_();const n=Vc().setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Vc().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=Hf(this,e),t=Vc().requestAnimationFrame((()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()})),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Hf(this,t);const n=this.requestAnimationFrame((()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)}));return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),Vc().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((([e,t])=>{this[e].forEach(((e,n)=>this[t](n)))})),this.clearingTimersOnDispose_=!1})))}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=fg.getComponent("Tech"),r=n&&n.isTech(t),i=fg===t||fg.prototype.isPrototypeOf(t.prototype);if(r||!i){let t;throw t=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=ug(e),fg.components_||(fg.components_={});const o=fg.getComponent("Player");if("Player"===e&&o&&o.players){const e=o.players,t=Object.keys(e);if(e&&t.length>0&&t.map((t=>e[t])).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return fg.components_[e]=t,fg.components_[cg(e)]=t,t}static getComponent(e){if(e&&fg.components_)return fg.components_[e]}}function gg(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}(e,r,n.length-1),n[r][t]}function mg(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:gg.bind(null,"start",0,e),end:gg.bind(null,"end",1,e)},Vc().Symbol&&Vc().Symbol.iterator&&(t[Vc().Symbol.iterator]=()=>(e||[]).values()),t}function vg(e,t){return Array.isArray(e)?mg(e):void 0===e||void 0===t?mg():mg([[e,t]])}fg.registerComponent("Component",fg);const yg=function(e,t){e=e<0?0:e;let n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600);const o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),i=i>0||a>0?i+":":"",r=((i||o>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n};let bg=yg;function _g(e){bg=e}function wg(){bg=yg}function Sg(e,t=e){return bg(e,t)}var Tg=Object.freeze({__proto__:null,createTimeRanges:vg,createTimeRange:vg,setFormatTime:_g,resetFormatTime:wg,formatTime:Sg});function Ig(e,t){let n,r,i=0;if(!t)return 0;e&&e.length||(e=vg(0,0));for(let o=0;o<e.length;o++)n=e.start(o),r=e.end(o),r>t&&(r=t),i+=r-n;return i/t}function kg(e){if(e instanceof kg)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:gh(e)&&("number"==typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=kg.defaultMessages[this.code]||"")}function Ag(e){return null!=e&&"function"==typeof e.then}function Eg(e){Ag(e)&&e.then(null,(e=>{}))}kg.prototype.code=0,kg.prototype.message="",kg.prototype.status=null,kg.prototype.metadata=null,kg.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],kg.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},kg.MEDIA_ERR_CUSTOM=0,kg.prototype.MEDIA_ERR_CUSTOM=0,kg.MEDIA_ERR_ABORTED=1,kg.prototype.MEDIA_ERR_ABORTED=1,kg.MEDIA_ERR_NETWORK=2,kg.prototype.MEDIA_ERR_NETWORK=2,kg.MEDIA_ERR_DECODE=3,kg.prototype.MEDIA_ERR_DECODE=3,kg.MEDIA_ERR_SRC_NOT_SUPPORTED=4,kg.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,kg.MEDIA_ERR_ENCRYPTED=5,kg.prototype.MEDIA_ERR_ENCRYPTED=5;const Cg=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(((t,n,r)=>(e[n]&&(t[n]=e[n]),t)),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})};const xg="vjs-modal-dialog";class Og extends fg{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Xh("div",{className:`${xg}-content`},{role:"document"}),this.descEl_=Xh("p",{className:`${xg}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Jh(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${xg} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),mf(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);const i=this.getChild("closeButton");i&&n.appendChild(i.el_)}empty(){this.trigger("beforemodalempty"),hf(this.contentEl()),this.trigger("modalempty")}content(e){return void 0!==e&&(this.content_=e),this.content_}conditionalFocus_(){const e=$c().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Hc().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!Hc().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let r;for(let e=0;e<t.length;e++)if(n===t[e]){r=e;break}$c().activeElement===this.el_&&(r=0),e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||r!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(e=>(e instanceof Vc().HTMLAnchorElement||e instanceof Vc().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Vc().HTMLInputElement||e instanceof Vc().HTMLSelectElement||e instanceof Vc().HTMLTextAreaElement||e instanceof Vc().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Vc().HTMLIFrameElement||e instanceof Vc().HTMLObjectElement||e instanceof Vc().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")))}}Og.prototype.options_={pauseOnOpen:!0,temporary:!0},fg.registerComponent("ModalDialog",Og);class Pg extends Yf{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Zf(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,r=this.length;n<r;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}Pg.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const e in Pg.prototype.allowedEvents_)Pg.prototype["on"+e]=null;const Dg=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Rg=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)};class jg extends Pg{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Mg{constructor(e){Mg.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const r=e.length;this.cues_=e,this.length_=e.length;const i=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)}getCueById(e){let t=null;for(let n=0,r=this.length;n<r;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}const Ng={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ug={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Lg={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Bg={disabled:"disabled",hidden:"hidden",showing:"showing"};class qg extends Yf{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Rf(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const e in t)Object.defineProperty(this,e,{get:()=>t[e],set(){}});Object.defineProperty(this,"label",{get:()=>n,set(e){e!==n&&(n=e,this.trigger("labelchange"))}})}}const Fg=function(e){const t=["protocol","hostname","port","pathname","search","hash","host"],n=$c().createElement("a");n.href=e;const r={};for(let e=0;e<t.length;e++)r[t[e]]=n[t[e]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=Vc().location.protocol),r.host||(r.host=Vc().location.host),r},Vg=function(e){if(!e.match(/^https?:\/\//)){const t=$c().createElement("a");t.href=e,e=t.href}return e},zg=function(e){if("string"==typeof e){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},$g=function(e,t=Vc().location){const n=Fg(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host};var Wg=Object.freeze({__proto__:null,parseUrl:Fg,getAbsoluteURL:Vg,getFileExtension:zg,isCrossOrigin:$g});const Hg=function(e,t){const n=new(Vc().WebVTT.Parser)(Vc(),Vc().vttjs,Vc().WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(Vc().console&&Vc().console.groupCollapsed&&Vc().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),r.forEach((e=>lh.error(e))),Vc().console&&Vc().console.groupEnd&&Vc().console.groupEnd()),n.flush()},Gg=function(e,t){const n={uri:e},r=$g(e);r&&(n.cors=r);const i="use-credentials"===t.tech_.crossOrigin();i&&(n.withCredentials=i),Kc()(n,Hf(this,(function(e,n,r){if(e)return lh.error(e,n);t.loaded_=!0,"function"!=typeof Vc().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(e=>{if("vttjserror"!==e.type)return Hg(r,t);lh.error(`vttjs failed to load, stopping trying to process ${t.src}`)})):Hg(r,t)})))};class Xg extends qg{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=vh(e,{kind:Lg[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=Bg[t.mode]||"disabled";const r=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const i=new Mg(this.cues_),o=new Mg(this.activeCues_);let a=!1;this.timeupdateHandler=Hf(this,(function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),this.tech_.one("dispose",(()=>{this.stopTracking()})),"disabled"!==n&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>r,set(){}},mode:{get:()=>n,set(e){Bg[e]&&n!==e&&(n=e,this.preload_||"disabled"===n||0!==this.cues.length||Gg(this.src,this),this.stopTracking(),"disabled"!==n&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?i:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return o;const e=this.tech_.currentTime(),t=[];for(let n=0,r=this.cues.length;n<r;n++){const r=this.cues[n];r.startTime<=e&&r.endTime>=e&&t.push(r)}if(a=!1,t.length!==this.activeCues_.length)a=!0;else for(let e=0;e<t.length;e++)-1===this.activeCues_.indexOf(t[e])&&(a=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&Gg(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new(Vc().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let e=0;e<n.length;e++)n[e]!==this&&n[e].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Xg.prototype.allowedEvents_={cuechange:"cuechange"};class Jg extends qg{constructor(e={}){const t=vh(e,{kind:Ug[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class Kg extends qg{constructor(e={}){const t=vh(e,{kind:Ng[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Yg extends Yf{constructor(e={}){let t;super();const n=new Xg(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>n}}),t=Yg.NONE,n.addEventListener("loadeddata",(()=>{t=Yg.LOADED,this.trigger({type:"load",target:this})}))}}Yg.prototype.allowedEvents_={load:"load"},Yg.NONE=0,Yg.LOADING=1,Yg.LOADED=2,Yg.ERROR=3;const Qg={audio:{ListClass:class extends Pg{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Dg(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Dg(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Dg(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:Jg,capitalName:"Audio"},video:{ListClass:class extends Pg{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Rg(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&Rg(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Rg(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:Kg,capitalName:"Video"},text:{ListClass:jg,TrackClass:Xg,capitalName:"Text"}};Object.keys(Qg).forEach((function(e){Qg[e].getterName=`${e}Tracks`,Qg[e].privateName=`${e}Tracks_`}));const Zg={remoteText:{ListClass:jg,TrackClass:Xg,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:Yg,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},em=Object.assign({},Qg,Zg);Zg.names=Object.keys(Zg),Qg.names=Object.keys(Qg),em.names=[].concat(Zg.names).concat(Qg.names);class tm extends fg{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",(function(){this.hasStarted_=!0})),this.on("loadstart",(function(){this.hasStarted_=!1})),em.names.forEach((t=>{const n=em[t];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])})),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new em.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",(()=>this.setTimeout((()=>this.triggerSourceset(e)),1))),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Hf(this,(function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return vg(0,0)}bufferedPercent(){return Ig(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Qg.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach((e=>{const t=this[`${e}Tracks`]()||[];let n=t.length;for(;n--;){const r=t[n];"text"===e&&this.removeRemoteTextTrack(r),t.removeTrack(r)}}))}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new kg(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?vg(0,0):vg()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Qg.names.forEach((e=>{const t=Qg[e],n=()=>{this.trigger(`${e}trackchange`)},r=this[t.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),this.on("dispose",(()=>{r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)}))}))}addWebVttScript_(){if(!Vc().WebVTT)if($c().body.contains(this.el())){if(!this.options_["vtt.js"]&&mh(Qc())&&Object.keys(Qc()).length>0)return void this.trigger("vttjsloaded");const e=$c().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",(()=>{e.onload=null,e.onerror=null})),Vc().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=t=>e.addTrack(t.track),r=t=>e.removeTrack(t.track);t.on("addtrack",n),t.on("removetrack",r),this.addWebVttScript_();const i=()=>this.trigger("texttrackchange"),o=()=>{i();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",i),"showing"===n.mode&&n.addEventListener("cuechange",i)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",(function(){t.off("addtrack",n),t.off("removetrack",r),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let t=0;t<e.length;t++)e[t].removeEventListener("cuechange",i)}))}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i={}){const o=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;const a=new em.text.TrackClass(i);return o.addTrack(a),a}(this,e,t,n)}createRemoteTextTrack(e){const t=vh(e,{tech:this});return new Zg.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!1===t&&this.ready((()=>this.autoRemoteTextTracks_.addTrack(n.track))),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Rf();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",(()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())}))):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return tm.canPlayType(e.type)}static isTech(e){return e.prototype instanceof tm||e instanceof tm||e===tm}static registerTech(e,t){if(tm.techs_||(tm.techs_={}),!tm.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!tm.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!tm.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ug(e),tm.techs_[e]=t,tm.techs_[cg(e)]=t,"Tech"!==e&&tm.defaultTechOrder_.push(e),t}static getTech(e){if(e)return tm.techs_&&tm.techs_[e]?tm.techs_[e]:(e=ug(e),Vc()&&Vc().videojs&&Vc().videojs[e]?(lh.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),Vc().videojs[e]):void 0)}}em.names.forEach((function(e){const t=em[e];tm.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),tm.prototype.featuresVolumeControl=!0,tm.prototype.featuresMuteControl=!0,tm.prototype.featuresFullscreenResize=!1,tm.prototype.featuresPlaybackRate=!1,tm.prototype.featuresProgressEvents=!1,tm.prototype.featuresSourceset=!1,tm.prototype.featuresTimeupdateEvents=!1,tm.prototype.featuresNativeTextTracks=!1,tm.prototype.featuresVideoFrameCallback=!1,tm.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){let r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){const n=e.sourceHandlers||[];let r;for(let e=0;e<n.length;e++)if(r=n[e].canPlayType(t),r)return r;return""},e.selectSourceHandler=function(t,n){const r=e.sourceHandlers||[];let i;for(let e=0;e<r.length;e++)if(i=r[e].canHandleSource(t,n),i)return r[e];return null},e.canPlaySource=function(t,n){const r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){const t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){let n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:lh.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},fg.registerComponent("Tech",tm),tm.registerTech("Tech",tm),tm.defaultTechOrder_=[];const nm={},rm={},im={};function om(e,t,n){e.setTimeout((()=>um(t,nm[t.type],n,e)),1)}function am(e,t,n,r=null){const i="call"+ug(n),o=e.reduce(cm(i),r),a=o===im,s=a?null:t[n](o);return function(e,t,n,r){for(let i=e.length-1;i>=0;i--){const o=e[i];o[t]&&o[t](r,n)}}(e,n,s,a),s}const sm={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},dm={setCurrentTime:1,setMuted:1,setVolume:1},lm={play:1,pause:1};function cm(e){return(t,n)=>t===im?im:n[e]?n[e](t):t}function um(e={},t=[],n,r,i=[],o=!1){const[a,...s]=t;if("string"==typeof a)um(e,nm[a],n,r,i,o);else if(a){const t=function(e,t){const n=rm[e.id()];let r=null;if(null==n)return r=t(e),rm[e.id()]=[[t,r]],r;for(let e=0;e<n.length;e++){const[i,o]=n[e];i===t&&(r=o)}return null===r&&(r=t(e),n.push([t,r])),r}(r,a);if(!t.setSource)return i.push(t),um(e,s,n,r,i,o);t.setSource(Object.assign({},e),(function(a,d){if(a)return um(e,s,n,r,i,o);i.push(t),um(d,e.type===d.type?s:nm[d.type],n,r,i,o)}))}else s.length?um(e,s,n,r,i,o):o?n(e,i):um(e,nm["*"],n,r,i,!0)}const pm={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},hm=function(e=""){const t=zg(e);return pm[t.toLowerCase()]||""},fm=function(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){e=fm(e),Array.isArray(e)?t=t.concat(e):gh(e)&&t.push(e)})),e=t}else e="string"==typeof e&&e.trim()?[gm({src:e})]:gh(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[gm(e)]:[];return e};function gm(e){if(!e.type){const t=hm(e.src);t&&(e.type=t)}return e}fg.registerComponent("MediaLoader",class extends fg{constructor(e,t,n){if(super(e,vh({createEl:!1},t),n),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let n=0,r=t.playerOptions.techOrder;n<r.length;n++){const t=ug(r[n]);let i=tm.getTech(t);if(t||(i=fg.getComponent(t)),i&&i.isSupported()){e.loadTech_(t);break}}}});class mm extends fg{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&lh.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const r=Xh(e,t,n);return this.player_.options_.experimentalSvgIcons||r.appendChild(Xh("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Xh("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,Jh(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Hc().isEventKey(e,"Space")||Hc().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}fg.registerComponent("ClickableComponent",mm);class vm extends mm{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Xh("div",{className:"vjs-poster"})}crossOrigin(e){if(void 0===e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(Xh("picture",{className:"vjs-poster",tabIndex:-1},{},Xh("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Eg(this.player_.play()):this.player_.pause())}}vm.prototype.crossorigin=vm.prototype.crossOrigin,fg.registerComponent("PosterImage",vm);const ym="#222",bm="#ccc",_m={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function wm(e,t){let n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Sm(e,t,n){try{e.style[t]=n}catch(e){return}}function Tm(e){return e?`${e}px`:""}fg.registerComponent("TextTrackDisplay",class extends fg{constructor(e,t,n){super(e,t,n);const r=e=>{this.updateDisplayOverlay(),this.updateDisplay(e)};e.on("loadstart",(e=>this.toggleDisplay(e))),e.on("texttrackchange",(e=>this.updateDisplay(e))),e.on("loadedmetadata",(e=>{this.updateDisplayOverlay(),this.preselectTrack(e)})),e.ready(Hf(this,(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",r),e.on("playerresize",r);const t=Vc().screen.orientation||Vc(),n=Vc().screen.orientation?"change":"orientationchange";t.addEventListener(n,r),e.on("dispose",(()=>t.removeEventListener(n,r)));const i=this.options_.playerOptions.tracks||[];for(let e=0;e<i.length;e++)this.player_.addRemoteTextTrack(i[e],!0);this.preselectTrack()})))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let r,i,o;for(let a=0;a<t.length;a++){const s=t[a];n&&n.enabled&&n.language&&n.language===s.language&&s.kind in e?s.kind===n.kind?o=s:o||(o=s):n&&!n.enabled?(o=null,r=null,i=null):s.default&&("descriptions"!==s.kind||r?s.kind in e&&!i&&(i=s):r=s)}o?o.mode="showing":i?i.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof Vc().WebVTT&&Vc().WebVTT.processCues(Vc(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let n=0;n<e.length;++n){const r=e[n];"showing"===r.mode&&t.push(r)}return void this.updateForTrack(t)}let n=null,r=null,i=e.length;for(;i--;){const t=e[i];"showing"===t.mode&&("descriptions"===t.kind?n=t:r=t)}r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):n&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!Vc().CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,r=this.player_.videoWidth()/this.player_.videoHeight();let i=0,o=0;Math.abs(n-r)>.1&&(n>r?i=Math.round((e-t*r)/2):o=Math.round((t-e/r)/2)),Sm(this.el_,"insetInline",Tm(i)),Sm(this.el_,"insetBlock",Tm(o))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let r=n.length;for(;r--;){const e=n[r];if(!e)continue;const i=e.displayState;if(t.color&&(i.firstChild.style.color=t.color),t.textOpacity&&Sm(i.firstChild,"color",wm(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(i.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Sm(i.firstChild,"backgroundColor",wm(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Sm(i,"backgroundColor",wm(t.windowColor,t.windowOpacity)):i.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?i.firstChild.style.textShadow=`2px 2px 3px ${ym}, 2px 2px 4px ${ym}, 2px 2px 5px ${ym}`:"raised"===t.edgeStyle?i.firstChild.style.textShadow=`1px 1px ${ym}, 2px 2px ${ym}, 3px 3px ${ym}`:"depressed"===t.edgeStyle?i.firstChild.style.textShadow=`1px 1px ${bm}, 0 1px ${bm}, -1px -1px ${ym}, 0 -1px ${ym}`:"uniform"===t.edgeStyle&&(i.firstChild.style.textShadow=`0 0 4px ${ym}, 0 0 4px ${ym}, 0 0 4px ${ym}, 0 0 4px ${ym}`)),t.fontPercent&&1!==t.fontPercent){const e=Vc().parseFloat(i.style.fontSize);i.style.fontSize=e*t.fontPercent+"px",i.style.height="auto",i.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?i.firstChild.style.fontVariant="small-caps":i.firstChild.style.fontFamily=_m[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof Vc().WebVTT||e.every((e=>!e.activeCues)))return;const t=[];for(let n=0;n<e.length;++n){const r=e[n];for(let e=0;e<r.activeCues.length;++e)t.push(r.activeCues[e])}Vc().WebVTT.processCues(Vc(),t,this.el_);for(let t=0;t<e.length;++t){const n=e[t];for(let e=0;e<n.activeCues.length;++e){const r=n.activeCues[e].displayState;Qh(r,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:t)),n.language&&of(r,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}}),fg.registerComponent("LoadingSpinner",class extends fg{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=Xh("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class Im extends mm{createEl(e,t={},n={}){const r=Xh("button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n));return this.player_.options_.experimentalSvgIcons||r.appendChild(Xh("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,t={}){const n=this.constructor.name;return lh.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),fg.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){Hc().isEventKey(e,"Space")||Hc().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}fg.registerComponent("Button",Im);class km extends Im{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",(e=>this.handleMouseDown(e)))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e)return Eg(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(!r)return void this.player_.tech(!0).focus();const i=()=>r.focus();Ag(t)?t.then(i,(()=>{})):this.setTimeout(i,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}km.prototype.controlText_="Play Video",fg.registerComponent("BigPlayButton",km),fg.registerComponent("CloseButton",class extends Im{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Hc().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class Am extends Im{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.setIcon("play"),this.on(e,"play",(e=>this.handlePlay(e))),this.on(e,"pause",(e=>this.handlePause(e))),t.replay&&this.on(e,"ended",(e=>this.handleEnded(e)))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Eg(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",(e=>this.handleSeeked(e)))}}Am.prototype.controlText_="Play",fg.registerComponent("PlayToggle",Am);class Em extends fg{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],(e=>this.update(e))),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Xh("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(n),this.contentEl_=Xh("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){(this.player_.options_.enableSmoothSeeking||"seeking"!==e.type)&&this.updateContent(e)}updateTextNode_(e=0){e=Sg(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,lh.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=$c().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))})))}updateContent(e){}}Em.prototype.labelText_="Time",Em.prototype.controlText_="Time",fg.registerComponent("TimeDisplay",Em);class Cm extends Em{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}Cm.prototype.labelText_="Current Time",Cm.prototype.controlText_="Current Time",fg.registerComponent("CurrentTimeDisplay",Cm);class xm extends Em{constructor(e,t){super(e,t);const n=e=>this.updateContent(e);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}xm.prototype.labelText_="Duration",xm.prototype.controlText_="Duration",fg.registerComponent("DurationDisplay",xm),fg.registerComponent("TimeDivider",class extends fg{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}});class Om extends Em{constructor(e,t){super(e,t),this.on(e,"durationchange",(e=>this.updateContent(e)))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(Xh("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}Om.prototype.labelText_="Remaining Time",Om.prototype.controlText_="Remaining Time",fg.registerComponent("RemainingTimeDisplay",Om),fg.registerComponent("LiveDisplay",class extends fg{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",(e=>this.updateShowing(e)))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Xh("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Xh("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild($c().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class Pm extends Im{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Xh("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function Dm(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}Pm.prototype.controlText_="Seek to live, currently playing live",fg.registerComponent("SeekToLive",Pm);var Rm=Object.freeze({__proto__:null,clamp:Dm});class jm extends fg{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Ch||e.preventDefault(),sf(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;df(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}))),e}getProgress(){return Number(Dm(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=uf(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){Hc().isEventKey(e,"Left")||Hc().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Hc().isEventKey(e,"Right")||Hc().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}fg.registerComponent("Slider",jm);const Mm=(e,t)=>Dm(e/t*100,0,100).toFixed(2)+"%";fg.registerComponent("LoadProgressBar",class extends fg{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",(e=>this.update(e)))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Xh("span",{className:"vjs-control-text"}),n=Xh("span",{textContent:this.localize("Loaded")}),r=$c().createTextNode(": ");return this.percentageEl_=Xh("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(r),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",(()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),i=this.partEls_,o=Mm(r,n);this.percent_!==o&&(this.el_.style.width=o,Jh(this.percentageEl_,o),this.percent_=o);for(let e=0;e<t.length;e++){const n=t.start(e),o=t.end(e);let a=i[e];a||(a=this.el_.appendChild(Xh()),i[e]=a),a.dataset.start===n&&a.dataset.end===o||(a.dataset.start=n,a.dataset.end=o,a.style.left=Mm(n,r),a.style.width=Mm(o-n,r))}for(let e=i.length;e>t.length;e--)this.el_.removeChild(i[e-1]);i.length=t.length}))}}),fg.registerComponent("TimeTooltip",class extends fg{constructor(e,t){super(e,t),this.update=Gf(Hf(this,this.update),Wf)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const r=cf(this.el_),i=lf(this.player_.el()),o=e.width*t;if(!i||!r)return;const a=e.left-i.left+o,s=e.width-o+(i.right-e.right);let d=r.width/2;a<d?d+=d-a:s<d&&(d=s),d<0?d=0:d>r.width&&(d=r.width),d=Math.round(d),this.el_.style.right=`-${d}px`,this.write(n)}write(e){Jh(this.el_,e)}updateTime(e,t,n,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",(()=>{let i;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),n=e-t*e;i=(n<1?"":"-")+Sg(n,e)}else i=Sg(n,o);this.update(e,t,i),r&&r()}))}});class Nm extends fg{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=Gf(Hf(this,this.update),Wf)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}}Nm.prototype.options_={children:[]},qh||Ih||Nm.prototype.options_.children.push("timeTooltip"),fg.registerComponent("PlayProgressBar",Nm);class Um extends fg{constructor(e,t){super(e,t),this.update=Gf(Hf(this,this.update),Wf)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,(()=>{this.el_.style.left=e.width*t+"px"}))}}Um.prototype.options_={children:["timeTooltip"]},fg.registerComponent("MouseTimeDisplay",Um);class Lm extends jm{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Hf(this,this.update),this.update=Gf(this.update_,Wf),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in $c()&&"visibilityState"in $c()&&this.on($c(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===$c().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Wf))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===$c().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",(()=>{const e=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===e&&this.duration_===r||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Sg(e,r),Sg(r,r)],"{1} of {2}")),this.currentTime_=e,this.duration_=r),this.bar&&this.bar.update(lf(this.el()),this.getProgress())})),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){vf(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!vf(e)||isNaN(this.player_.duration()))return;let n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const r=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(r>=.99)return void i.seekToLiveEdge();const e=i.seekableStart(),t=i.liveCurrentTime();if(n=e+r*i.liveWindow(),n>=t&&(n=t),n<=e&&(n=e+.1),n===1/0)return}else n=r*this.player_.duration(),n===this.player_.duration()&&(n-=.1);this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Eg(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(Hc().isEventKey(e,"Space")||Hc().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Hc().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Hc().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Hc()(e))){e.preventDefault(),e.stopPropagation();const n=10*(Hc().codes[Hc()(e)]-Hc().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else Hc().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Hc().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in $c()&&"visibilityState"in $c()&&this.off($c(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Lm.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},qh||Ih||Lm.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),fg.registerComponent("SeekBar",Lm);class Bm extends fg{constructor(e,t){super(e,t),this.handleMouseMove=Gf(Hf(this,this.handleMouseMove),Wf),this.throttledHandleMouseSeek=Gf(Hf(this,this.handleMouseSeek),Wf),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(!n&&!r)return;const i=t.el(),o=cf(i);let a=uf(i,e).x;a=Dm(a,0,1),r&&r.update(o,a),n&&n.update(o,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach((e=>e.disable&&e.disable())),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Eg(this.player_.play())}}enable(){this.children().forEach((e=>e.enable&&e.enable())),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}Bm.prototype.options_={children:["seekBar"]},fg.registerComponent("ProgressControl",Bm);class qm extends Im{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],(e=>this.handlePictureInPictureChange(e))),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],(e=>this.handlePictureInPictureEnabledChange(e))),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(()=>this.handlePictureInPictureAudioModeChange())),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){$c().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in Vc()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof $c().exitPictureInPicture&&super.show()}}qm.prototype.controlText_="Picture-in-Picture",fg.registerComponent("PictureInPictureToggle",qm);class Fm extends Im{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",(e=>this.handleFullscreenChange(e))),!1===$c()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Fm.prototype.controlText_="Fullscreen",fg.registerComponent("FullscreenToggle",Fm),fg.registerComponent("VolumeLevel",class extends fg{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),fg.registerComponent("VolumeLevelTooltip",class extends fg{constructor(e,t){super(e,t),this.update=Gf(Hf(this,this.update),Wf)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,r){if(!n){const n=lf(this.el_),r=lf(this.player_.el()),i=e.width*t;if(!r||!n)return;const o=e.left-r.left+i,a=e.width-i+(r.right-e.right);let s=n.width/2;o<s?s+=s-o:a<s&&(s=a),s<0?s=0:s>n.width&&(s=n.width),this.el_.style.right=`-${s}px`}this.write(`${r}%`)}write(e){Jh(this.el_,e)}updateVolume(e,t,n,r,i){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(()=>{this.update(e,t,n,r.toFixed(0)),i&&i()}))}});class Vm extends fg{constructor(e,t){super(e,t),this.update=Gf(Hf(this,this.update),Wf)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(()=>{n?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"}))}}Vm.prototype.options_={children:["volumeLevelTooltip"]},fg.registerComponent("MouseVolumeLevelDisplay",Vm);class zm extends jm{constructor(e,t){super(e,t),this.on("slideractive",(e=>this.updateLastVolume_(e))),this.on(e,"volumechange",(e=>this.updateARIAAttributes(e))),e.ready((()=>this.updateARIAAttributes()))}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){vf(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),r=lf(n),i=this.vertical();let o=uf(n,e);o=i?o.y:o.x,o=Dm(o,0,1),t.update(r,o,i)}vf(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",(()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)}))}}zm.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},qh||Ih||zm.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),zm.prototype.playerEvent="volumechange",fg.registerComponent("VolumeBar",zm);class $m extends fg{constructor(e,t={}){t.vertical=t.vertical||!1,(void 0===t.volumeBar||mh(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(this,e),this.throttledHandleMouseMove=Gf(Hf(this,this.handleMouseMove),Wf),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",(e=>this.handleMouseDown(e))),this.on("touchstart",(e=>this.handleMouseDown(e))),this.on("mousemove",(e=>this.handleMouseMove(e))),this.on(this.volumeBar,["focus","slideractive"],(()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}$m.prototype.options_={children:["volumeBar"]},fg.registerComponent("VolumeControl",$m);class Wm extends Im{constructor(e,t){super(e,t),function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(this,e),this.on(e,["loadstart","volumechange"],(e=>this.update(e)))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){const e=n<.1?.1:n;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),qh&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Zh(this.el_,[0,1,2,3].reduce(((e,t)=>e+`${t?" ":""}vjs-vol-${t}`),"")),Qh(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)}}Wm.prototype.controlText_="Mute",fg.registerComponent("MuteToggle",Wm);class Hm extends fg{constructor(e,t={}){void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||mh(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],(e=>this.volumePanelState_(e))),this.on(this.muteToggle,"keyup",(e=>this.handleKeyPress(e))),this.on(this.volumeControl,"keyup",(e=>this.handleVolumeControlKeyUp(e))),this.on("keydown",(e=>this.handleKeyPress(e))),this.on("mouseover",(e=>this.handleMouseOver(e))),this.on("mouseout",(e=>this.handleMouseOut(e))),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Hc().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Bf($c(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),qf($c(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Hc().isEventKey(e,"Esc")&&this.handleMouseOut()}}Hm.prototype.options_={children:["muteToggle","volumeControl"]},fg.registerComponent("VolumePanel",Hm);class Gm extends Im{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,r=n&&n.isLive()?n.seekableEnd():this.player_.duration();let i;i=t+this.skipTime<=r?t+this.skipTime:r,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Gm.prototype.controlText_="Skip Forward",fg.registerComponent("SkipForward",Gm);class Xm extends Im{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,r=n&&n.isLive()&&n.seekableStart();let i;i=r&&t-this.skipTime<=r?r:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Xm.prototype.controlText_="Skip Backward",fg.registerComponent("SkipBackward",Xm);class Jm extends fg{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",(e=>this.handleKeyDown(e))),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof fg&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof fg&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Xh(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Bf(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||$c().activeElement;if(!this.children().some((e=>e.el()===t))){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter((t=>t.el()===e.target))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}handleKeyDown(e){Hc().isEventKey(e,"Left")||Hc().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Hc().isEventKey(e,"Right")||Hc().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}fg.registerComponent("Menu",Jm);class Km extends fg{constructor(e,t={}){super(e,t),this.menuButton_=new Im(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=Im.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",(e=>this.handleKeyDown(e))),this.on(this.menuButton_,"mouseenter",(()=>{this.addClass("vjs-hover"),this.menu.show(),Bf($c(),"keyup",this.handleMenuKeyUp_)})),this.on("mouseleave",(e=>this.handleMouseLeave(e))),this.on("keydown",(e=>this.handleSubmenuKeyDown(e)))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Jm(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Xh("li",{className:"vjs-menu-title",textContent:ug(this.options_.title),tabIndex:-1}),n=new fg(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${Im.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),qf($c(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Hc().isEventKey(e,"Esc")||Hc().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Hc().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Hc().isEventKey(e,"Up")||Hc().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Hc().isEventKey(e,"Esc")||Hc().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Hc().isEventKey(e,"Esc")||Hc().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Hc().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),qh&&Hh())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}fg.registerComponent("MenuButton",Km);class Ym extends Km{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const r=Hf(this,this.update);n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),n.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",(function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r),n.removeEventListener("labelchange",r)}))}}fg.registerComponent("TrackButton",Ym);const Qm=["Tab","Esc","Up","Down","Right","Left"];class Zm extends mm{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),i=Xh("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(i):r.replaceChild(i,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){Qm.some((t=>Hc().isEventKey(e,t)))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}fg.registerComponent("MenuItem",Zm);class ev extends Zm{constructor(e,t){const n=t.track,r=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const i=(...e)=>{this.handleTracksChange.apply(this,e)},o=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],i),r.addEventListener("change",i),r.addEventListener("selectedlanguagechange",o),this.on("dispose",(function(){e.off(["loadstart","texttrackchange"],i),r.removeEventListener("change",i),r.removeEventListener("selectedlanguagechange",o)})),void 0===r.onchange){let e;this.on(["tap","click"],(function(){if("object"!=typeof Vc().Event)try{e=new(Vc().Event)("change")}catch(e){}e||(e=$c().createEvent("Event"),e.initEvent("change",!0,!0)),r.dispatchEvent(e)}))}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let e=0;e<n.length;e++){const r=n[e];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}fg.registerComponent("TextTrackMenuItem",ev);class tv extends ev{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(this.options_.kinds.indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(["captions","descriptions","subtitles"].indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}fg.registerComponent("OffTextTrackMenuItem",tv);class nv extends Ym{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=ev){let n;this.label_&&(n=`${this.label_} off`),e.push(new tv(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let n=0;n<r.length;n++){const i=r[n];if(this.kinds_.indexOf(i.kind)>-1){const n=new t(this.player_,{track:i,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});n.addClass(`vjs-${i.kind}-menu-item`),e.push(n)}}return e}}fg.registerComponent("TextTrackButton",nv);class rv extends Zm{constructor(e,t){const n=t.track,r=t.cue,i=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=i&&i<r.endTime,super(e,t),this.track=n,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}fg.registerComponent("ChaptersTrackMenuItem",rv);class iv extends nv{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach((e=>{e.selected(this.track_.activeCues[0]===e.cue)}))}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(ug(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new rv(this.player_,{track:this.track_,cue:r});e.push(i)}return e}}iv.prototype.kind_="chapters",iv.prototype.controlText_="Chapters",fg.registerComponent("ChaptersButton",iv);class ov extends nv{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const r=e.textTracks(),i=Hf(this,this.handleTracksChange);r.addEventListener("change",i),this.on("dispose",(function(){r.removeEventListener("change",i)}))}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r.kind!==this.kind_&&"showing"===r.mode){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}ov.prototype.kind_="descriptions",ov.prototype.controlText_="Descriptions",fg.registerComponent("DescriptionsButton",ov);class av extends nv{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}av.prototype.kind_="subtitles",av.prototype.controlText_="Subtitles",fg.registerComponent("SubtitlesButton",av);class sv extends ev{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}fg.registerComponent("CaptionSettingsMenuItem",sv);class dv extends nv{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new sv(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}dv.prototype.kind_="captions",dv.prototype.controlText_="Captions",fg.registerComponent("CaptionsButton",dv);class lv extends ev{createEl(e,t,n){const r=super.createEl(e,t,n),i=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):i.appendChild(Xh("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(Xh("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}fg.registerComponent("SubsCapsMenuItem",lv);class cv extends nv{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(ug(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new sv(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,lv),e}}cv.prototype.kinds_=["captions","subtitles"],cv.prototype.controlText_="Subtitles",fg.registerComponent("SubsCapsButton",cv);class uv extends Zm{constructor(e,t){const n=t.track,r=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const i=(...e)=>{this.handleTracksChange.apply(this,e)};r.addEventListener("change",i),this.on("dispose",(()=>{r.removeEventListener("change",i)}))}createEl(e,t,n){const r=super.createEl(e,t,n),i=r.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(i.appendChild(Xh("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(Xh("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const n=e[t];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}fg.registerComponent("AudioTrackMenuItem",uv);class pv extends Ym{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const r=t[n];e.push(new uv(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}pv.prototype.controlText_="Audio Track",fg.registerComponent("AudioTrackButton",pv);class hv extends Zm{constructor(e,t){const n=t.rate,r=parseFloat(n,10);t.label=n,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=r,this.on(e,"ratechange",(e=>this.update(e)))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}hv.prototype.contentElType="button",fg.registerComponent("PlaybackRateMenuItem",hv);class fv extends Km{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",(e=>this.updateVisibility(e))),this.on(e,"ratechange",(e=>this.updateLabel(e))),this.on(e,"playbackrateschange",(e=>this.handlePlaybackRateschange(e)))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Xh("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new hv(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}fv.prototype.controlText_="Playback Rate",fg.registerComponent("PlaybackRateMenuButton",fv);class gv extends fg{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}fg.registerComponent("Spacer",gv),fg.registerComponent("CustomControlSpacer",class extends gv{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}});class mv extends fg{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}mv.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},fg.registerComponent("ControlBar",mv);class vv extends Og{constructor(e,t){super(e,t),this.on(e,"error",(e=>{this.close(),this.open(e)}))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}vv.prototype.options_=Object.assign({},Og.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),fg.registerComponent("ErrorDisplay",vv);const yv="vjs-text-track-settings",bv=["#000","Black"],_v=["#00F","Blue"],wv=["#0FF","Cyan"],Sv=["#0F0","Green"],Tv=["#F0F","Magenta"],Iv=["#F00","Red"],kv=["#FFF","White"],Av=["#FF0","Yellow"],Ev=["1","Opaque"],Cv=["0.5","Semi-Transparent"],xv=["0","Transparent"],Ov={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[bv,kv,Iv,Sv,_v,Av,Tv,wv]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Ev,Cv,xv]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[kv,bv,Iv,Sv,_v,Av,Tv,wv]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Ev,Cv]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[xv,Cv,Ev]}};function Pv(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Ov.windowColor.options=Ov.backgroundColor.options,fg.registerComponent("TextTrackSettings",class extends Og{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=Xh("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",(()=>{this.saveSettings(),this.close()})),this.on(this.$(".vjs-default-button"),"click",(()=>{this.setDefaults(),this.updateDisplay()})),hh(Ov,(e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",n="label"){const r=Ov[e],i=r.id.replace("%s",this.id_),o=[t,i].join(" ").trim(),a=`vjs_select_${Rf()}`;return[`<${n} id="${i}"${"label"===n?` for="${a}" class="vjs-label"`:""}>`,this.localize(r.label),`</${n}>`,`<select aria-labelledby="${o}" id="${a}">`].concat(r.options.map((e=>{const t=i+"-"+e[1].replace(/\W+/g,"");return[`<option id="${t}" value="${e[0]}" `,`aria-labelledby="${o} ${t}">`,this.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return Xh("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return Xh("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return Xh("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return fh(Ov,((e,t,n)=>{const r=(i=this.$(t.selector),o=t.parser,Pv(i.options[i.options.selectedIndex].value,o));var i,o;return void 0!==r&&(e[n]=r),e}),{})}setValues(e){hh(Ov,((t,n)=>{!function(e,t,n){if(t)for(let r=0;r<e.options.length;r++)if(Pv(e.options[r].value,n)===t){e.selectedIndex=r;break}}(this.$(t.selector),e[n],t.parser)}))}setDefaults(){hh(Ov,(e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t}))}restoreSettings(){let e;try{e=JSON.parse(Vc().localStorage.getItem(yv))}catch(e){lh.warn(e)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?Vc().localStorage.setItem(yv,JSON.stringify(e)):Vc().localStorage.removeItem(yv)}catch(e){lh.warn(e)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()}handleLanguagechange(){this.fill()}}),fg.registerComponent("ResizeManager",class extends fg{constructor(e,t){let n=t.ResizeObserver||Vc().ResizeObserver;null===t.ResizeObserver&&(n=!1),super(e,vh({createEl:!n,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||Vc().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Xf((()=>{this.resizeHandler()}),100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){qf(this,"resize",e),qf(this,"unload",t),t=null};Bf(this.el_.contentWindow,"unload",t),Bf(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const Dv={trackingThreshold:20,liveTolerance:15};fg.registerComponent("LiveTracker",class extends fg{constructor(e,t){super(e,vh(Dv,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",(e=>this.handleDurationchange(e))),this.on(this.player_,"canplay",(()=>this.toggleTracking()))}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(Vc().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const r=this.liveCurrentTime(),i=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-i)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Wf),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),fg.registerComponent("TitleBar",class extends fg{constructor(e,t){super(e,t),this.on("statechanged",(e=>this.updateDom_())),this.updateDom_()}createEl(){return this.els={title:Xh("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Rf()}`}),description:Xh("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Rf()}`})},Xh("div",{className:"vjs-title-bar"},{},yh(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((e=>{const r=this.state[e],i=this.els[e],o=n[e];hf(i),r&&Jh(i,r),t&&(t.removeAttribute(o),r&&t.setAttribute(o,i.id))})),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const Rv=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const n=e.$$("source"),r=[];let i="";if(!n.length)return!1;for(let e=0;e<n.length;e++){const t=n[e].src;t&&-1===r.indexOf(t)&&r.push(t)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},jv=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=$c().createElement(this.nodeName.toLowerCase());t.innerHTML=e;const n=$c().createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Vc().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Mv=(e,t)=>{let n={};for(let r=0;r<e.length&&(n=Object.getOwnPropertyDescriptor(e[r],t),!(n&&n.set&&n.get));r++);return n.enumerable=!0,n.configurable=!0,n},Nv=function(e){const t=e.el();if(t.resetSourceWatch_)return;const n={},r=(e=>Mv([e.el(),Vc().HTMLMediaElement.prototype,Vc().Element.prototype,jv],"innerHTML"))(e),i=n=>(...r)=>{const i=n.apply(t,r);return Rv(e),i};["append","appendChild","insertAdjacentHTML"].forEach((e=>{t[e]&&(n[e]=t[e],t[e]=i(n[e]))})),Object.defineProperty(t,"innerHTML",vh(r,{set:i(r.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach((e=>{t[e]=n[e]})),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)},Uv=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?Vg(Vc().Element.prototype.getAttribute.call(this,"src")):""},set(e){return Vc().Element.prototype.setAttribute.call(this,"src",e),e}});class Lv extends tm{constructor(e,t){super(e,t);const n=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,n&&(this.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const n=[];for(;t--;){const i=e[t];"track"===i.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),this.textTracks().addTrack(i.track),r||this.el_.hasAttribute("crossorigin")||!$g(i.src)||(r=!0)):n.push(i))}for(let e=0;e<n.length;e++)this.el_.removeChild(n[e])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&lh.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Lh||Mh)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Lv.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const n=(e=>Mv([e.el(),Vc().HTMLMediaElement.prototype,Uv],"src"))(e),r=t.setAttribute,i=t.load;Object.defineProperty(t,"src",vh(n,{set:r=>{const i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=(n,i)=>{const o=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),o},t.load=()=>{const n=i.call(t);return Rv(e)||(e.triggerSourceset(""),Nv(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):Rv(e)||Nv(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let n=0;n<e.length;n++){const r=e[n];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};n(),e.addEventListener("change",n),this.on("dispose",(()=>e.removeEventListener("change",n)));const r=()=>{for(let e=0;e<t.length;e++){const n=t[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",(()=>{e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)})),this.on("webkitendfullscreen",(()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)}))}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach((e=>{this.el()[`${n}Tracks`].removeEventListener(e,this[`${n}TracksListeners_`][e])})),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Qg[e],n=this.el()[t.getterName],r=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const i={change:t=>{const n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===e&&this[Zg.remoteText.getterName]().trigger(n)},addtrack(e){r.addTrack(e.track)},removetrack(e){r.removeTrack(e.track)}},o=function(){const e=[];for(let t=0;t<r.length;t++){let i=!1;for(let e=0;e<n.length;e++)if(n[e]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=i,Object.keys(i).forEach((e=>{const t=i[e];n.addEventListener(e,t),this.on("dispose",(r=>n.removeEventListener(e,t)))})),this.on("loadstart",o),this.on("dispose",(e=>this.off("loadstart",o)))}proxyNativeTracks_(){Qg.names.forEach((e=>{this.proxyNativeTracksForType_(e)}))}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),Lv.disposeMediaElement(e),e=t}else{e=$c().createElement("video");const t=vh({},this.options_.tag&&nf(this.options_.tag));Lh&&!0===this.options_.nativeControlsForTouch||delete t.controls,tf(e,Object.assign(t,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&of(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const r=t[n],i=this.options_[r];void 0!==i&&(i?of(e,r,r):af(e,r),e[r]=i)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",t),this.off("loadedmetadata",n),e||this.trigger("loadstart")}))}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready((function(){t.forEach((function(e){this.trigger(e)}),this)}))}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Fh?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){lh(e,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Ih&&Ch&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",(()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)}))}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Eg(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){Lv.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=$c().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Vc().performance&&(e.creationTime=Vc().performance.now()),e}}bh(Lv,"TEST_VID",(function(){if(!$h())return;const e=$c().createElement("video"),t=$c().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e})),Lv.isSupported=function(){try{Lv.TEST_VID.volume=.5}catch(e){return!1}return!(!Lv.TEST_VID||!Lv.TEST_VID.canPlayType)},Lv.canPlayType=function(e){return Lv.TEST_VID.canPlayType(e)},Lv.canPlaySource=function(e,t){return Lv.canPlayType(e.type)},Lv.canControlVolume=function(){try{const e=Lv.TEST_VID.volume;Lv.TEST_VID.volume=e/2+.1;const t=e!==Lv.TEST_VID.volume;return t&&qh?(Vc().setTimeout((()=>{Lv&&Lv.prototype&&(Lv.prototype.featuresVolumeControl=e!==Lv.TEST_VID.volume)})),!1):t}catch(e){return!1}},Lv.canMuteVolume=function(){try{const e=Lv.TEST_VID.muted;return Lv.TEST_VID.muted=!e,Lv.TEST_VID.muted?of(Lv.TEST_VID,"muted","muted"):af(Lv.TEST_VID,"muted"),e!==Lv.TEST_VID.muted}catch(e){return!1}},Lv.canControlPlaybackRate=function(){if(Ih&&Ch&&Oh<58)return!1;try{const e=Lv.TEST_VID.playbackRate;return Lv.TEST_VID.playbackRate=e/2+.1,e!==Lv.TEST_VID.playbackRate}catch(e){return!1}},Lv.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty($c().createElement("video"),"src",{get:e,set:e}),Object.defineProperty($c().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty($c().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty($c().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Lv.supportsNativeTextTracks=function(){return Fh||qh&&Ch},Lv.supportsNativeVideoTracks=function(){return!(!Lv.TEST_VID||!Lv.TEST_VID.videoTracks)},Lv.supportsNativeAudioTracks=function(){return!(!Lv.TEST_VID||!Lv.TEST_VID.audioTracks)},Lv.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function([e,t]){bh(Lv.prototype,e,(()=>Lv[t]()),!0)})),Lv.prototype.featuresVolumeControl=Lv.canControlVolume(),Lv.prototype.movingMediaElementInDOM=!qh,Lv.prototype.featuresFullscreenResize=!0,Lv.prototype.featuresProgressEvents=!0,Lv.prototype.featuresTimeupdateEvents=!0,Lv.prototype.featuresVideoFrameCallback=!(!Lv.TEST_VID||!Lv.TEST_VID.requestVideoFrameCallback),Lv.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Lv.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let n=t.length;for(;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Lv.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Lv.prototype["set"+ug(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Lv.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Lv.prototype["set"+ug(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Lv.prototype[e]=function(){return this.el_[e]()}})),tm.withSourceHandlers(Lv),Lv.nativeSourceHandler={},Lv.nativeSourceHandler.canPlayType=function(e){try{return Lv.TEST_VID.canPlayType(e)}catch(e){return""}},Lv.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Lv.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=zg(e.src);return Lv.nativeSourceHandler.canPlayType(`video/${t}`)}return""},Lv.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Lv.nativeSourceHandler.dispose=function(){},Lv.registerSourceHandler(Lv.nativeSourceHandler),tm.registerTech("Html5",Lv);const Bv=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qv={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fv=["tiny","xsmall","small","medium","large","xlarge","huge"],Vv={};Fv.forEach((e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;Vv[e]=`vjs-layout-${t}`}));const zv={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class $v extends fg{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${Rf()}`,(t=Object.assign($v.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const n=e.closest("[lang]");n&&(t.language=n.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.isFullscreen_=!1,this.log=ch(this.id_),this.fsApi_=ih,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&nf(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach((function(n){e[n.toLowerCase()]=t.languages[n]})),this.languages_=e}else this.languages_=$v.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach((e=>{if("function"!=typeof this[e])throw new Error(`plugin "${e}" does not exist`)})),this.scrubbing_=!1,this.el_=this.createEl(),sg(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Bf($c(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=vh(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach((e=>{this[e](t.plugins[e])})),t.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const e=(new(Vc().DOMParser)).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">\n      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(e.querySelector("parsererror"))lh.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const t=e.documentElement;t.style.display="none",this.el_.appendChild(t),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Lh&&this.addClass("vjs-touch-enabled"),qh||this.addClass("vjs-workinghover"),$v.players[this.id_]=this;const i=eh.split(".")[0];this.addClass(`vjs-v${i}`),this.userActive(!0),this.reportUserActivity(),this.one("play",(e=>this.listenForUserActivity_(e))),this.on("keydown",(e=>this.handleKeyDown(e))),this.on("languagechange",(e=>this.handleLanguagechange(e))),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",(()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)}))}dispose(){this.trigger("dispose"),this.off("dispose"),qf($c(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),qf($c(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),$v.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),rm[this.id()]=null,em.names.forEach((e=>{const t=this[em[e].getterName]();t&&t.off&&t.off()})),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const r="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=t.parentNode:r||(e=this.el_=super.createEl("div"));const i=nf(t);if(r){for(e=this.el_=t,t=this.tag=$c().createElement("video");e.children.length;)t.appendChild(e.firstChild);Yh(e,"video-js")||Qh(e,"video-js"),e.appendChild(t),n=this.playerElIngest_=e,Object.keys(e).forEach((n=>{try{t[n]=e[n]}catch(e){}}))}if(t.setAttribute("tabindex","-1"),i.tabindex="-1",Ch&&Rh&&(t.setAttribute("role","application"),i.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in i&&delete i.width,"height"in i&&delete i.height,Object.getOwnPropertyNames(i).forEach((function(n){r&&"class"===n||e.setAttribute(n,i[n]),r&&t.setAttribute(n,i[n])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==Vc().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Cf("vjs-styles-dimensions");const e=yf(".vjs-styles-defaults"),t=yf("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=t.getElementsByTagName("a");for(let e=0;e<o.length;e++){const t=o.item(e);Qh(t,"vjs-hidden"),t.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(e,t),Kh(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if(void 0===e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):lh.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();const r=parseFloat(t);isNaN(r)?lh.error(`Improper value "${t}" supplied for for ${e}`):(this[n]=r,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;var t,n;this.fluid_=!!e,Zf(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},Zf(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===Vc().VIDEOJS_NO_DYNAMIC_STYLE){const e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}let e,t,n,r;n=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const i=n.split(":"),o=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*o,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),xf(this.styleEl_,`\n      .${r} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*o}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=ug(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(tm.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let i=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(i=!1);const o={source:t,autoplay:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};em.names.forEach((e=>{const t=em[e];o[t.getterName]=this[t.privateName]})),Object.assign(o,this.options_[n]),Object.assign(o,this.options_[r]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const a=tm.getTech(e);if(!a)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);var s,d;this.tech_=new a(o),this.tech_.ready(Hf(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],d=this.tech_,s.forEach((function(e){const t=d.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((e=>t.addCue(e)))})),d.textTracks(),Bv.forEach((e=>{this.on(this.tech_,e,(t=>this[`handleTech${ug(e)}_`](t)))})),Object.keys(qv).forEach((e=>{this.on(this.tech_,e,(t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${qv[e]}_`].bind(this),event:t}):this[`handleTech${qv[e]}_`](t)}))})),this.on(this.tech_,"loadstart",(e=>this.handleTechLoadStart_(e))),this.on(this.tech_,"sourceset",(e=>this.handleTechSourceset_(e))),this.on(this.tech_,"waiting",(e=>this.handleTechWaiting_(e))),this.on(this.tech_,"ended",(e=>this.handleTechEnded_(e))),this.on(this.tech_,"seeking",(e=>this.handleTechSeeking_(e))),this.on(this.tech_,"play",(e=>this.handleTechPlay_(e))),this.on(this.tech_,"pause",(e=>this.handleTechPause_(e))),this.on(this.tech_,"durationchange",(e=>this.handleTechDurationChange_(e))),this.on(this.tech_,"fullscreenchange",((e,t)=>this.handleTechFullscreenChange_(e,t))),this.on(this.tech_,"fullscreenerror",((e,t)=>this.handleTechFullscreenError_(e,t))),this.on(this.tech_,"enterpictureinpicture",(e=>this.handleTechEnterPictureInPicture_(e))),this.on(this.tech_,"leavepictureinpicture",(e=>this.handleTechLeavePictureInPicture_(e))),this.on(this.tech_,"error",(e=>this.handleTechError_(e))),this.on(this.tech_,"posterchange",(e=>this.handleTechPosterChange_(e))),this.on(this.tech_,"textdata",(e=>this.handleTechTextData_(e))),this.on(this.tech_,"ratechange",(e=>this.handleTechRateChange_(e))),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||Kh(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){em.names.forEach((e=>{const t=em[e];this[t.privateName]=this[t.getterName]()})),this.textTracksJson_=function(e){const t=e.$$("track"),n=Array.prototype.map.call(t,(e=>e.track));return Array.prototype.map.call(t,(function(e){const t=Cg(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(Cg))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&lh.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":eh}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const n=this.play();if(Ag(n))return n.catch((e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)}))};let n;return"any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():t():(n=this.play(),Ag(n)&&(n=n.catch(t))),Ag(n)?n.then((()=>{this.trigger({type:"autoplay-success",autoplay:e})})).catch((()=>{this.trigger({type:"autoplay-failure",autoplay:e})})):void 0}updateSourceCaches_(e=""){let t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=((e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const n=e.cache_.sources.filter((e=>e.src===t));if(n.length)return n[0].type;const r=e.$$("source");for(let e=0;e<r.length;e++){const n=r[e];if(n.type&&n.src&&n.src===t)return n.type}return hm(t)})(this,t)),this.cache_.source=vh({},e,{src:t,type:n});const r=this.cache_.sources.filter((e=>e.src&&e.src===t)),i=[],o=this.$$("source"),a=[];for(let e=0;e<o.length;e++){const n=nf(o[e]);i.push(n),n.src&&n.src===t&&a.push(n.src)}a.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(t=()=>{}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],(e=>{if("sourceset"===e.type)return;const t=this.techGet_("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((e=>e.callback(e.event))),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Eg(this.play()):this.pause()))}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(t=>t.contains(e.target)))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let r=$c()[this.fsApi_.fullscreenElement]===n;!r&&n.matches&&(r=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(()=>{this.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready((function(){if(e in dm)return function(e,t,n,r){return t[n](e.reduce(cm(n),r))}(this.middleware_,this.tech_,e,t);if(e in lm)return am(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw lh(e),e}}),!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in sm)return function(e,t,n){return e.reduceRight(cm(n),t[n]())}(this.middleware_,this.tech_,e);if(e in lm)return am(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw lh(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t;if("TypeError"===t.name)throw lh(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t;throw lh(t),t}}}play(){return new Promise((e=>{this.play_(e)}))}play_(e=Eg){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),n=Boolean(Fh||qh);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&n&&this.load());const r=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||vg(0,0)}scrubbing(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0===e?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,void(isFinite(e)&&(this.cache_.currentTime=Number(e)))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=vg(0,0)),e}seekable(){let e=this.techGet_("seekable");return e&&e.length||(e=vg(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return Ig(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise(((n,r)=>{function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",o)}function o(){i(),n()}function a(e,t){i(),r(t)}t.one("fullscreenchange",o),t.one("fullscreenerror",a);const s=t.requestFullscreenHelper_(e);s&&(s.then(i,i),s.then(n,r))}))}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then((()=>this.isFullscreen(!0)),(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise(((t,n)=>{function r(){e.off("fullscreenerror",o),e.off("fullscreenchange",i)}function i(){r(),t()}function o(e,t){r(),n(t)}e.one("fullscreenchange",i),e.one("fullscreenerror",o);const a=e.exitFullscreenHelper_();a&&(a.then(r,r),a.then(t,n))}))}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=$c()[this.fsApi_.exitFullscreen]();return e&&Eg(e.then((()=>this.isFullscreen(!1)))),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=$c().documentElement.style.overflow,Bf($c(),"keydown",this.boundFullWindowOnEscKey_),$c().documentElement.style.overflow="hidden",Qh($c().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Hc().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,qf($c(),"keydown",this.boundFullWindowOnEscKey_),$c().documentElement.style.overflow=this.docOrigOverflow,Zh($c().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&Vc().documentPictureInPicture){const e=$c().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Xh("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),Vc().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then((t=>(wf(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("pagehide",(t=>{const n=t.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")})),t)))}return"pictureInPictureEnabled"in $c()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return Vc().documentPictureInPicture&&Vc().documentPictureInPicture.window?(Vc().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in $c()?$c().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;t&&t.hotkeys&&((e=>{const t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=(e=>Hc().isEventKey(e,"f")),muteKey:r=(e=>Hc().isEventKey(e,"m")),playPauseKey:i=(e=>Hc().isEventKey(e,"k")||Hc().isEventKey(e,"Space"))}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=fg.getComponent("FullscreenToggle");!1!==$c()[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),fg.getComponent("MuteToggle").prototype.handleClick.call(this,e)):i.call(this,e)&&(e.preventDefault(),e.stopPropagation(),fg.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,r=this.options_.techOrder;n<r.length;n++){const i=r[n];let o=tm.getTech(i);if(o||(o=fg.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e),t))return t}else lh.error(`The "${i}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map((e=>[e,tm.getTech(e)])).filter((([e,t])=>t?t.isSupported():(lh.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1))),n=function(e,t,n){let r;return e.some((e=>t.some((t=>{if(r=n(e,t),r)return!0})))),r};let r;const i=([e,t],n)=>{if(t.canPlaySource(n,this.options_[e.toLowerCase()]))return{source:n,tech:e}};var o;return r=this.options_.sourceOrder?n(e,t,(o=i,(e,t)=>o(t,e))):n(t,e,i),r||!1}handleSrc_(e,t){if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=fm(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),om(this,n[0],((e,r)=>{if(this.middleware_=r,t||(this.cache_.sources=n),this.updateSourceCaches_(e),this.src_(e))return n.length>1?this.handleSrc_(n.slice(1)):(this.changingSrc_=!1,this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void this.triggerReady());var i,o;i=r,o=this.tech_,i.forEach((e=>e.setTech&&e.setTech(o)))})),n.length>1){const e=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(pg(t.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready((()=>{this.changingSrc_=!1})),!1))}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():Eg(this.play().then((()=>this.doReset_())))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Zf(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:i}=n||{};e&&e.updateContent(),t&&t.updateContent(),r&&r.updateContent(),i&&(i.update(),i.loadProgressBar&&i.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(nh("beforeerror").forEach((t=>{const n=t(this,e);gh(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:this.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new kg(e),this.addClass("vjs-error"),lh.error(`(CODE:${this.error_.code} ${kg.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),nh("error").forEach((e=>e(this,this.error_)))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const r=Hf(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",(function(){r(),this.clearInterval(e),e=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())})),this.on("mouseup",i),this.on("mouseleave",i);const o=this.getChild("controlBar");let a;!o||qh||Ih||(o.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),o.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);const e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}),250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach((e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((e=>e.show())),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then((()=>this.enableAudioOnlyUI_()))}return Promise.resolve().then((()=>this.disableAudioOnlyUI_()))}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((()=>{this.enablePosterModeUI_()})):Promise.resolve().then((()=>{this.enablePosterModeUI_()})):Promise.resolve().then((()=>{this.disablePosterModeUI_()})))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Zf(this)&&this.trigger("languagechange"))}languages(){return vh($v.prototype.options_.languages,this.languages_)}toJSON(){const e=vh(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let r=t[n];r=vh(r),r.player=void 0,e.tracks[n]=r}return e}createModal(e,t){(t=t||{}).content=e||"";const n=new Og(this,t);return this.addChild(n),n.on("dispose",(()=>{this.removeChild(n)})),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<Fv.length;n++){const r=Fv[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Vv[e]),this.addClass(Vv[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},zv,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Vv[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;const n=this.crossOrigin();this.reset(),this.cache_.media=vh(e);const{artist:r,artwork:i,description:o,poster:a,src:s,textTracks:d,title:l}=this.cache_.media;!i&&a&&(this.cache_.media.artwork=[{src:a,type:hm(a)}]),n&&this.crossOrigin(n),s&&this.src(s),a&&this.poster(a),Array.isArray(d)&&d.forEach((e=>this.addRemoteTextTrack(e,!1))),this.titleBar&&this.titleBar.update({title:l,description:o||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(e=>({kind:e.kind,label:e.label,language:e.language,src:e.src})))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:hm(t.poster)}]),t}return vh(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=nf(e),r=n["data-setup"];if(Yh(e,"vjs-fill")&&(n.fill=!0),Yh(e,"vjs-fluid")&&(n.fluid=!0),null!==r){const[e,t]=Xc()(r||"{}");e&&lh.error(e),Object.assign(n,t)}if(Object.assign(t,n),e.hasChildNodes()){const n=e.childNodes;for(let e=0,r=n.length;e<r;e++){const r=n[e],i=r.nodeName.toLowerCase();"source"===i?t.sources.push(nf(r)):"track"===i&&t.tracks.push(nf(r))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((e=>"number"==typeof e))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}em.names.forEach((function(e){const t=em[e];$v.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),$v.prototype.crossorigin=$v.prototype.crossOrigin,$v.players={};const Wv=Vc().navigator;$v.prototype.options_={techOrder:tm.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Wv&&(Wv.languages&&Wv.languages[0]||Wv.userLanguage||Wv.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,enableSmoothSeeking:!1},Bv.forEach((function(e){$v.prototype[`handleTech${ug(e)}_`]=function(){return this.trigger(e)}})),fg.registerComponent("Player",$v);const Hv="plugin",Gv="activePlugins_",Xv={},Jv=e=>Xv.hasOwnProperty(e),Kv=e=>Jv(e)?Xv[e]:void 0,Yv=(e,t)=>{e[Gv]=e[Gv]||{},e[Gv][t]=!0},Qv=(e,t,n)=>{const r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},Zv=(e,t)=>(t.prototype.name=e,function(...n){Qv(this,{name:e,plugin:t,instance:null},!0);const r=new t(...[this,...n]);return this[e]=()=>r,Qv(this,r.getEventHash()),r});class ey{constructor(e){if(this.constructor===ey)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),sg(this),delete this.trigger,lg(this,this.constructor.defaultState),Yv(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Ff(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Gv][e]=!1,this.player=this.state=null,t[e]=Zv(e,Xv[e])}static isBasic(e){const t="string"==typeof e?Kv(e):e;return"function"==typeof t&&!ey.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!=typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Jv(e))lh.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if($v.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!=typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return Xv[e]=t,e!==Hv&&(ey.isBasic(t)?$v.prototype[e]=function(e,t){const n=function(){Qv(this,{name:e,plugin:t,instance:null},!0);const n=t.apply(this,arguments);return Yv(this,e),Qv(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(e,t):$v.prototype[e]=Zv(e,t)),t}static deregisterPlugin(e){if(e===Hv)throw new Error("Cannot de-register base plugin.");Jv(e)&&(delete Xv[e],delete $v.prototype[e])}static getPlugins(e=Object.keys(Xv)){let t;return e.forEach((e=>{const n=Kv(e);n&&(t=t||{},t[e]=n)})),t}static getPluginVersion(e){const t=Kv(e);return t&&t.VERSION||""}}function ty(e,t,n,r){return function(e,t){let n=!1;return function(...r){return n||lh.warn(e),n=!0,t.apply(this,r)}}(`${t} is deprecated and will be removed in ${e}.0; please use ${n} instead.`,r)}ey.getPlugin=Kv,ey.BASE_PLUGIN_NAME=Hv,ey.registerPlugin(Hv,ey),$v.prototype.usingPlugin=function(e){return!!this[Gv]&&!0===this[Gv][e]},$v.prototype.hasPlugin=function(e){return!!Jv(e)};const ny=e=>0===e.indexOf("#")?e.slice(1):e;function ry(e,t,n){let r=ry.getPlayer(e);if(r)return t&&lh.warn(`Player "${e}" is already initialised. Options will not be applied.`),n&&r.ready(n),r;const i="string"==typeof e?yf("#"+ny(e)):e;if(!Wh(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o="getRootNode"in i&&i.getRootNode()instanceof Vc().ShadowRoot?i.getRootNode():i.ownerDocument.body;i.ownerDocument.defaultView&&o.contains(i)||lh.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),nh("beforesetup").forEach((e=>{const n=e(i,vh(t));gh(n)&&!Array.isArray(n)?t=vh(t,n):lh.error("please return an object in beforesetup hooks")}));const a=fg.getComponent("Player");return r=new a(i,t,n),nh("setup").forEach((e=>e(r))),r}if(ry.hooks_=th,ry.hooks=nh,ry.hook=function(e,t){nh(e,t)},ry.hookOnce=function(e,t){nh(e,[].concat(t).map((t=>{const n=(...r)=>(rh(e,n),t(...r));return n})))},ry.removeHook=rh,!0!==Vc().VIDEOJS_NO_DYNAMIC_STYLE&&$h()){let e=yf(".vjs-styles-defaults");if(!e){e=Cf("vjs-styles-defaults");const t=yf("head");t&&t.insertBefore(e,t.firstChild),xf(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Af(1,ry),ry.VERSION=eh,ry.options=$v.prototype.options_,ry.getPlayers=()=>$v.players,ry.getPlayer=e=>{const t=$v.players;let n;if("string"==typeof e){const r=ny(e),i=t[r];if(i)return i;n=yf("#"+r)}else n=e;if(Wh(n)){const{player:e,playerId:r}=n;if(e||t[r])return e||t[r]}},ry.getAllPlayers=()=>Object.keys($v.players).map((e=>$v.players[e])).filter(Boolean),ry.players=$v.players,ry.getComponent=fg.getComponent,ry.registerComponent=(e,t)=>(tm.isTech(t)&&lh.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),fg.registerComponent.call(fg,e,t)),ry.getTech=tm.getTech,ry.registerTech=tm.registerTech,ry.use=function(e,t){nm[e]=nm[e]||[],nm[e].push(t)},Object.defineProperty(ry,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ry.middleware,"TERMINATOR",{value:im,writeable:!1,enumerable:!0}),ry.browser=Vh,ry.obj=_h,ry.mergeOptions=ty(9,"videojs.mergeOptions","videojs.obj.merge",vh),ry.defineLazyProperty=ty(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",bh),ry.bind=ty(9,"videojs.bind","native Function.prototype.bind",Hf),ry.registerPlugin=ey.registerPlugin,ry.deregisterPlugin=ey.deregisterPlugin,ry.plugin=(e,t)=>(lh.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ey.registerPlugin(e,t)),ry.getPlugins=ey.getPlugins,ry.getPlugin=ey.getPlugin,ry.getPluginVersion=ey.getPluginVersion,ry.addLanguage=function(e,t){return e=(""+e).toLowerCase(),ry.options.languages=vh(ry.options.languages,{[e]:t}),ry.options.languages[e]},ry.log=lh,ry.createLogger=ch,ry.time=Tg,ry.createTimeRange=ty(9,"videojs.createTimeRange","videojs.time.createTimeRanges",vg),ry.createTimeRanges=ty(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",vg),ry.formatTime=ty(9,"videojs.formatTime","videojs.time.formatTime",Sg),ry.setFormatTime=ty(9,"videojs.setFormatTime","videojs.time.setFormatTime",_g),ry.resetFormatTime=ty(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",wg),ry.parseUrl=ty(9,"videojs.parseUrl","videojs.url.parseUrl",Fg),ry.isCrossOrigin=ty(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",$g),ry.EventTarget=Yf,ry.any=zf,ry.on=Bf,ry.one=Vf,ry.off=qf,ry.trigger=Ff,ry.xhr=Kc(),ry.TextTrack=Xg,ry.AudioTrack=Jg,ry.VideoTrack=Kg,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((e=>{ry[e]=function(){return lh.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),Sf[e].apply(null,arguments)}})),ry.computedStyle=ty(9,"videojs.computedStyle","videojs.dom.computedStyle",_f),ry.dom=Sf,ry.fn=Jf,ry.num=Rm,ry.str=hg,ry.url=Wg,ry.Error={UnsupportedSidxContainer:"unsupported-sidx-container-error",DashManifestSidxParsingError:"dash-manifest-sidx-parsing-error",HlsPlaylistRequestError:"hls-playlist-request-error",SegmentUnsupportedMediaFormat:"segment-unsupported-media-format-error",UnsupportedMediaInitialization:"unsupported-media-initialization-error",SegmentSwitchError:"segment-switch-error",SegmentExceedsSourceBufferQuota:"segment-exceeds-source-buffer-quota-error",SegmentAppendError:"segment-append-error",VttLoadError:"vtt-load-error",VttCueParsingError:"vtt-cue-parsing-error",EMEKeySessionCreationError:"eme-key-session-creation-error"};class iy{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(e){t.enabled_(e)}}),t}}class oy extends ry.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new iy(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}oy.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const e in oy.prototype.allowedEvents_)oy.prototype["on"+e]=null;var ay="4.0.0";const sy=function(e){return function(e,t){const n=e.qualityLevels,r=new oy,i=function(){r.dispose(),e.qualityLevels=n,e.off("dispose",i)};return e.on("dispose",i),e.qualityLevels=()=>r,e.qualityLevels.VERSION=ay,r}(this,ry.obj.merge({},e))};ry.registerPlugin("qualityLevels",sy),sy.VERSION=ay;const dy=nu,ly=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,cy=e=>ry.log.debug?ry.log.debug.bind(ry,"VHS:",`${e} >`):function(){};function uy(...e){const t=ry.obj||ry;return(t.merge||t.mergeOptions).apply(t,e)}function py(...e){const t=ry.time||ry;return(t.createTimeRanges||t.createTimeRanges).apply(t,e)}const hy=1/30,fy=.1,gy=function(e,t){const n=[];let r;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return py(n)},my=function(e,t){return gy(e,(function(e,n){return e-fy<=t&&n+fy>=t}))},vy=function(e,t){return gy(e,(function(e){return e-hy>=t}))},yy=e=>{const t=[];if(!e||!e.length)return"";for(let n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},by=e=>{const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},_y=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},wy=function(e,t){let n=0;if(!e||!e.length)return n;for(let r=0;r<e.length;r++){const i=e.start(r),o=e.end(r);t>o||(n+=t>i&&t<=o?o-t:o-i)}return n},Sy=(e,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},Ty=e=>(e.segments||[]).reduce(((e,t,n)=>(t.parts?t.parts.forEach((function(r,i){e.push({duration:r.duration,segmentIndex:n,partIndex:i,part:r,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e)),[]),Iy=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},ky=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:n}=e;let r=(n||[]).reduce(((e,t)=>e+("PART"===t.type?1:0)),0);return r+=t&&t.length?t.length:0,r},Ay=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const n=Iy(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Ey=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const r=function(e,t){let n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=e.segments[r],void 0!==i.end)return{result:n+i.end,precise:!0};if(n+=Sy(e,i),void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;const i=function(e,t){let n,r=0,i=t-e.mediaSequence;for(;i<e.segments.length;i++){if(n=e.segments[i],void 0!==n.start)return{result:n.start-r,precise:!0};if(r+=Sy(e,n),void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},Cy=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Vc()[1/0]}return Ey(e,t,n)},xy=function({defaultDuration:e,durationList:t,startIndex:n,endIndex:r}){let i=0;if(n>r&&([n,r]=[r,n]),n<0){for(let t=n;t<Math.min(0,r);t++)i+=e;n=0}for(let e=n;e<r;e++)i+=t[e].duration;return i},Oy=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return Cy(e);if(null===t)return null;t=t||0;let i=Ey(e,e.mediaSequence+e.segments.length,t);return n&&(i-=r="number"==typeof r?r:Ay(null,e)),Math.max(0,i)},Py=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Dy=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Ry=function(e){const t=Py(e);return!e.disabled&&!t},jy=function(e,t){return t.attributes&&t.attributes[e]},My=(e,t)=>{if(1===e.playlists.length)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((e=>!!Ry(e)&&(e.attributes.BANDWIDTH||0)<n)).length},Ny=(e,t)=>!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri)),Uy=function(e,t){const n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let r=!1;for(const e in n){for(const i in n[e])if(r=t(n[e][i]),r)break;if(r)break}return!!r},Ly=e=>{if(!e||!e.playlists||!e.playlists.length)return Uy(e,(e=>e.playlists&&e.playlists.length||e.uri));for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t],r=n.attributes&&n.attributes.CODECS;if((!r||!r.split(",").every((e=>wu(e))))&&!Uy(e,(e=>Ny(n,e))))return!1}return!0};var By={liveEdgeDelay:Ay,duration:Cy,seekable:function(e,t,n){const r=t||0;let i=Oy(e,t,!0,n);return null===i?py():(i<r&&(i=r),py(r,i))},getMediaInfoForTime:function({playlist:e,currentTime:t,startingSegmentIndex:n,startingPartIndex:r,startTime:i,exactManifestTimings:o}){let a=t-i;const s=Ty(e);let d=0;for(let e=0;e<s.length;e++){const t=s[e];if(n===t.segmentIndex&&("number"!=typeof r||"number"!=typeof t.partIndex||r===t.partIndex)){d=e;break}}if(a<0){if(d>0)for(let t=d-1;t>=0;t--){const n=s[t];if(a+=n.duration,o){if(a<0)continue}else if(a+hy<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:i-xy({defaultDuration:e.targetDuration,durationList:s,startIndex:d,endIndex:t})}}return{partIndex:s[0]&&s[0].partIndex||null,segmentIndex:s[0]&&s[0].segmentIndex||0,startTime:t}}if(d<0){for(let n=d;n<0;n++)if(a-=e.targetDuration,a<0)return{partIndex:s[0]&&s[0].partIndex||null,segmentIndex:s[0]&&s[0].segmentIndex||0,startTime:t};d=0}for(let t=d;t<s.length;t++){const n=s[t];a-=n.duration;const r=n.duration>hy;if(0!==a&&!(r&&a+hy>=0)||t===s.length-1){if(o){if(a>0)continue}else if(a-hy>=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:i+xy({defaultDuration:e.targetDuration,durationList:s,startIndex:d,endIndex:t})}}}return{segmentIndex:s[s.length-1].segmentIndex,partIndex:s[s.length-1].partIndex,startTime:t}},isEnabled:Ry,isDisabled:function(e){return e.disabled},isExcluded:Py,isIncompatible:Dy,playlistEnd:Oy,isAes:function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:jy,estimateSegmentRequestTime:function(e,t,n,r=0){return jy("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:My,isAudioOnly:Ly,playlistMatch:Ny,segmentDurationWithParts:Sy};const{log:qy}=ry,Fy=(e,t)=>`${e}-${t}`,Vy=(e,t,n)=>`placeholder-uri-${e}-${t}-${n}`,zy=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((n=>{if(e.mediaGroups[n])for(const r in e.mediaGroups[n])for(const i in e.mediaGroups[n][r]){const o=e.mediaGroups[n][r][i];t(o,n,r,i)}}))},$y=({playlist:e,uri:t,id:n})=>{e.id=n,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},Wy=(e,t,n=Vy)=>{e.uri=t;for(let t=0;t<e.playlists.length;t++)if(!e.playlists[t].uri){const n=`placeholder-uri-${t}`;e.playlists[t].uri=n}const r=Ly(e);zy(e,((t,i,o,a)=>{if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===i&&!t.uri)for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t];if(n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===o)return}t.playlists=[Zc({},t)]}t.playlists.forEach((function(t,r){const s=n(i,o,a,t),d=Fy(r,s);t.uri?t.resolvedUri=t.resolvedUri||dy(e.uri,t.uri):(t.uri=0===r?s:d,t.resolvedUri=t.uri),t.id=t.id||d,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),(e=>{let t=e.playlists.length;for(;t--;){const n=e.playlists[t];$y({playlist:n,id:Fy(t,n.uri)}),n.resolvedUri=dy(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||qy.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(e),(e=>{zy(e,(t=>{t.uri&&(t.resolvedUri=dy(e.uri,t.uri))}))})(e)};class Hy{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(null!==this.offset_)return;if(!e.length)return;const[t]=e;void 0!==t.programDateTime&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce(((e,t)=>(e.set(t.id,t),e)),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(null===this.offset_)return[];const e={},t=[];this.pendingDateRanges_.forEach(((n,r)=>{if(!this.processedDateRanges_.has(r)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),n.class))if(e[n.class]){const t=e[n.class].push(n);n.classListIndex=t-1}else e[n.class]=[n],n.classListIndex=0}));for(const n of t){const t=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&t[n.classListIndex+1]?n.endTime=t[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach(((t,n)=>{t.startDate.getTime()<e&&this.processedDateRanges_.delete(n)}))}}const{EventTarget:Gy}=ry,Xy=(e,t)=>{if(!e)return t;const n=uy(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(let r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(n.parts[r]=uy(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Jy=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=dy(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=dy(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=dy(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=dy(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((e=>{e.resolvedUri||(e.resolvedUri=dy(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((e=>{e.resolvedUri||(e.resolvedUri=dy(t,e.uri))}))},Ky=function(e){const t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Yy=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,Qy=(e,t,n=Yy)=>{const r=uy(e,{}),i=r.playlists[t.id];if(!i)return null;if(n(i,t))return null;t.segments=Ky(t);const o=uy(i,t);if(o.preloadSegment&&!t.preloadSegment&&delete o.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}o.segments=((e,t,n)=>{const r=e.slice(),i=t.slice();n=n||0;const o=[];let a;for(let e=0;e<i.length;e++){const t=r[e+n],s=i[e];t?(a=t.map||a,o.push(Xy(t,s))):(a&&!s.map&&(s.map=a),o.push(s))}return o})(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}o.segments.forEach((e=>{Jy(e,o.resolvedUri)}));for(let e=0;e<r.playlists.length;e++)r.playlists[e].id===t.id&&(r.playlists[e]=o);return r.playlists[t.id]=o,r.playlists[t.uri]=o,zy(e,((e,n,r,i)=>{if(e.playlists)for(let n=0;n<e.playlists.length;n++)t.id===e.playlists[n].id&&(e.playlists[n]=o)})),r},Zy=(e,t)=>{const n=e.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],o=i&&i.duration||r&&r.duration;return t&&o?1e3*o:500*(e.partTargetDuration||e.targetDuration||10)};class eb extends Gy{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=cy("PlaylistLoader");const{withCredentials:r=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=r,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const i=t.options_;this.customTagParsers=i&&i.customTagParsers||[],this.customTagMappers=i&&i.customTagMappers||[],this.llhls=i&&i.llhls,this.dateRangesStorage_=new Hy,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();t.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=dy(this.main.uri,e.uri);this.llhls&&(t=((e,t)=>{if(t.endList||!t.serverControl)return e;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let r=t.mediaSequence+t.segments.length;if(e){const i=e.parts||[],o=ky(t)-1;o>-1&&o!==i.length-1&&(n._HLS_part=o),(o>-1||i.length)&&r--}n._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const t=new(Vc().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&t.searchParams.set(e,n[e])})),e=t.toString()}return e})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},((e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(e,t,n){const{uri:r,id:i}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[i],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return(({onwarn:e,oninfo:t,manifestString:n,customTagParsers:r=[],customTagMappers:i=[],llhls:o})=>{const a=new hu;e&&a.on("warn",e),t&&a.on("info",t),r.forEach((e=>a.addParser(e))),i.forEach((e=>a.addTagMapper(e))),a.push(n),a.end();const s=a.manifest;if(o||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){s.hasOwnProperty(e)&&delete s[e]})),s.segments&&s.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!s.targetDuration){let t=10;s.segments&&s.segments.length&&(t=s.segments.reduce(((e,t)=>Math.max(e,t.duration)),0)),e&&e({message:`manifest has no targetDuration defaulting to ${t}`}),s.targetDuration=t}const d=Iy(s);if(d.length&&!s.partTargetDuration){const t=d.reduce(((e,t)=>Math.max(e,t.duration)),0);e&&(e({message:`manifest has no partTargetDuration defaulting to ${t}`}),qy.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),s.partTargetDuration=t}return s})({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:r}){this.request=null,this.state="HAVE_METADATA";const i=t||this.parseManifest_({url:n,manifestString:e});i.lastRequest=Date.now(),$y({playlist:i,uri:n,id:r});const o=Qy(this.main,i);this.targetDuration=i.partTargetDuration||i.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Zy(this.media(),!!o)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),Vc().clearTimeout(this.mediaUpdateTimeout),Vc().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new Hy,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(Vc().clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=Vc().setTimeout(this.media.bind(this,e,!1),t))}const n=this.state,r=!this.media_||e.id!==this.media_.id,i=this.main.playlists[e.id];if(i&&i.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Zy(e,!0)),r){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},((t,r)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=ly(e.resolvedUri,r),t)return this.playlistRequestError(this.request,e,n);this.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}pause(){this.mediaUpdateTimeout&&(Vc().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(Vc().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Vc().setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),e)}else this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(Vc().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Vc().setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)}),e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Vc().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((()=>{this.setupInitialPlaylist(this.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},((e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=ly(this.src,t);const n=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(n)}))}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,Wy(this.main,this.srcUri()),e.playlists.forEach((e=>{e.segments=Ky(e),e.segments.forEach((t=>{Jy(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||Vc().location.href;this.main=((e,t)=>{const n=Fy(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Vc().location.href,resolvedUri:Vc().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,r=e.ID;let i=n.playlists.length;for(;i--;){const o=n.playlists[i];if(o.attributes["PATHWAY-ID"]===r){const a=o.resolvedUri,s=o.id;if(t){const t=this.createCloneURI_(o.resolvedUri,e),a=Fy(r,t),s=this.createCloneAttributes_(r,o.attributes),d=this.createClonePlaylist_(o,a,e,s);n.playlists[i]=d,n.playlists[a]=d,n.playlists[t]=d}else n.playlists.splice(i,1);delete n.playlists[s],delete n.playlists[a]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,r=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((e=>{if(n.mediaGroups[e]&&n.mediaGroups[e][r])for(const t in n.mediaGroups[e])if(t===r){for(const r in n.mediaGroups[e][t])n.mediaGroups[e][t][r].playlists.forEach(((e,t)=>{const r=n.playlists[e.id],i=r.id,o=r.resolvedUri;delete n.playlists[i],delete n.playlists[o]}));delete n.mediaGroups[e][t]}})),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,r=n.playlists.length,i=this.createCloneURI_(t.resolvedUri,e),o=Fy(e.ID,i),a=this.createCloneAttributes_(e.ID,t.attributes),s=this.createClonePlaylist_(t,o,e,a);n.playlists[r]=s,n.playlists[o]=s,n.playlists[i]=s,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],r=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((i=>{if(r.mediaGroups[i]&&!r.mediaGroups[i][t])for(const o in r.mediaGroups[i])if(o===n){r.mediaGroups[i][t]={};for(const n in r.mediaGroups[i][o]){const a=r.mediaGroups[i][o][n];r.mediaGroups[i][t][n]=Zc({},a);const s=r.mediaGroups[i][t][n],d=this.createCloneURI_(a.resolvedUri,e);s.resolvedUri=d,s.uri=d,s.playlists=[],a.playlists.forEach(((o,a)=>{const d=r.playlists[o.id],l=Vy(i,t,n),c=Fy(t,l);if(d&&!r.playlists[c]){const t=this.createClonePlaylist_(d,c,e),n=t.resolvedUri;r.playlists[c]=t,r.playlists[n]=t}s.playlists[a]=this.createClonePlaylist_(o,c,e)}))}}}))}createClonePlaylist_(e,t,n,r){const i=this.createCloneURI_(e.resolvedUri,n),o={resolvedUri:i,uri:i,id:t};return e.segments&&(o.segments=[]),r&&(o.attributes=r),uy(e,o)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const r=t["URI-REPLACEMENT"].PARAMS;for(const e of Object.keys(r))n.searchParams.set(e,r[e]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((r=>{t[r]&&(n[r]=e)})),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const r=e.contentProtection[n].attributes.keyId;r&&t.add(r.toLowerCase())}return t}}}const{xhr:tb}=ry,nb=function(e,t,n,r){const i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},rb=function(){const e=function e(t,n){t=uy({timeout:45e3},t);const r=e.beforeRequest||ry.Vhs.xhr.beforeRequest,i=e._requestCallbackSet||ry.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||ry.Vhs.xhr._responseCallbackSet;r&&"function"==typeof r&&(ry.log.warn("beforeRequest is deprecated, use onRequest instead."),i.add(r));const a=!0===ry.Vhs.xhr.original?tb:ry.Vhs.xhr,s=((e,t)=>{if(!e||!e.size)return;let n=t;return e.forEach((e=>{n=e(n)})),n})(i,t);i.delete(r);const d=a(s||t,(function(e,t){return((e,t,n,r)=>{e&&e.size&&e.forEach((e=>{e(t,n,r)}))})(o,d,e,t),nb(d,e,t,n)})),l=d.abort;return d.abort=function(){return d.aborted=!0,l.apply(d,arguments)},d.uri=t.uri,d.requestTime=Date.now(),d};return e.original=!0,e},ib=function(e){const t={};return e.byterange&&(t.Range=function(e){let t;const n=e.offset;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?Vc().BigInt(e.offset)+Vc().BigInt(e.length)-Vc().BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+t}(e.byterange)),t},ob=function(e,t){return e.start(t)+"-"+e.end(t)},ab=function(e,t){const n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},sb=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},db=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];xu(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},lb=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},cb=function(e){return e.resolvedUri},ub=e=>{const t=Array.prototype.slice.call(e),n=16;let r,i,o="";for(let e=0;e<t.length/n;e++)r=t.slice(e*n,e*n+n).map(ab).join(""),i=t.slice(e*n,e*n+n).map(sb).join(""),o+=r+" "+i+"\n";return o};var pb=Object.freeze({__proto__:null,createTransferableMessage:db,initSegmentId:lb,segmentKeyId:cb,hexDump:ub,tagDump:({bytes:e})=>ub(e),textRanges:e=>{let t,n="";for(t=0;t<e.length;t++)n+=ob(e,t)+" ";return n}});const hb=({programTime:e,playlist:t,retryCount:n=2,seekTo:r,pauseAfterSeek:i=!0,tech:o,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(void 0===e||!t||!r)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!o.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!(e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0})(t))return a({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const s=((e,t)=>{let n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;let r=t.segments[0];if(n<new Date(r.dateTimeObject))return null;for(let e=0;e<t.segments.length-1&&(r=t.segments[e],!(n<new Date(t.segments[e+1].dateTimeObject)));e++);const i=t.segments[t.segments.length-1],o=i.dateTimeObject,a=i.videoTimingInfo?(s=i.videoTimingInfo).transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds:i.duration+.25*i.duration;var s;return n>new Date(o.getTime()+1e3*a)?null:(n>new Date(o)&&(r=i),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:By.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})})(e,t);if(!s)return a({message:`${e} was not found in the stream`});const d=s.segment,l=((e,t)=>{let n,r;try{n=new Date(e),r=new Date(t)}catch(e){}const i=n.getTime();return(r.getTime()-i)/1e3})(d.dateTimeObject,e);if("estimate"===s.type)return 0===n?a({message:`${e} is not buffered yet. Try again`}):(r(s.estimatedStart+l),void o.one("seeked",(()=>{hb({programTime:e,playlist:t,retryCount:n-1,seekTo:r,pauseAfterSeek:i,tech:o,callback:a})})));const c=d.start+l;o.one("seeked",(()=>a(null,o.currentTime()))),i&&o.pause(),r(c)},fb=(e,t)=>{if(4===e.readyState)return t()},{EventTarget:gb}=ry,mb=function(e,t){if(!Yy(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let n=0;n<e.segments.length;n++){const r=e.segments[n],i=t.segments[n];if(r.uri!==i.uri)return!1;if(!r.byterange&&!i.byterange)continue;const o=r.byterange,a=i.byterange;if(o&&!a||!o&&a)return!1;if(o.offset!==a.offset||o.length!==a.length)return!1}return!0},vb=(e,t,n,r)=>`placeholder-uri-${e}-${t}-${r.attributes.NAME||n}`,yb=(e,t)=>(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length,bb=(e,t)=>{const n={};for(const r in e){const i=e[r].sidx;if(i){const e=Zu(i);if(!t[e])break;const r=t[e].sidxInfo;yb(r,i)&&(n[e]=t[e])}}return n};class _b extends gb{constructor(e,t,n={},r){super(),this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:i=!1}=n;if(this.vhs_=t,this.withCredentials=i,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",(()=>{this.refreshXml_()})),this.on("mediaupdatetimeout",(()=>{this.refreshMedia_(this.media().id)})),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=cy("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,n){const r=e.sidx&&Zu(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r])return void(this.mediaRequest_=Vc().setTimeout((()=>n(!1)),0));const i=ly(e.sidx.resolvedUri),o=(i,o)=>{if(this.requestErrored_(i,o,t))return;const a=this.mainPlaylistLoader_.sidxMapping_;let s;try{s=Pp()(Ou(o.response).subarray(8))}catch(e){return void this.requestErrored_(e,o,t)}return a[r]={sidxInfo:e.sidx,sidx:s},Xu(e,s,e.sidx.resolvedUri),n(!0)};this.request=((e,t,n)=>{let r,i=[],o=!1;const a=function(e,t,r,i){return t.abort(),o=!0,n(e,t,r,i)},s=function(e,t){if(o)return;if(e)return a(e,t,"",i);const n=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return Ou(t[0]);var r=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),i=new Uint8Array(r),o=0;return t.forEach((function(e){e=Ou(e),i.set(e,o),o+=e.byteLength})),i}(i,ju(n,!0)),r=r||Rp(i),i.length<10||r&&i.length<r+2)return fb(t,(()=>a(e,t,"",i)));const s=Qp(i);return"ts"===s&&i.length<188||!s&&i.length<376?fb(t,(()=>a(e,t,"",i))):a(null,t,s,i)},d={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function({total:t,loaded:n}){return nb(e,null,{statusCode:e.status},s)}))}},l=t(d,(function(e,t){return nb(l,e,t,s)}));return l})(i,this.vhs_.xhr,((t,n,r,a)=>{if(t)return o(t,n);if(!r||"mp4"!==r)return o({status:n.status,message:`Unsupported ${r||"unknown"} container type for sidx segment at URL: ${i}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n);const{offset:s,length:d}=e.sidx.byterange;if(a.length>=d+s)return o(t,{response:a.subarray(s,s+d),status:n.status,uri:n.uri});this.request=this.vhs_.xhr({uri:i,responseType:"arraybuffer",headers:ib({byterange:e.sidx.byterange})},o)}))}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Vc().clearTimeout(this.minimumUpdatePeriodTimeout_),Vc().clearTimeout(this.mediaRequest_),Vc().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,(n=>{this.haveMetadata({startingState:t,playlist:e})})))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Vc().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Vc().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){Vc().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Vc().setTimeout((()=>this.load()),e)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_(((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=Vc().setTimeout((()=>this.haveMain_()),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},((t,n)=>{if(this.requestErrored_(t,n))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const r=n.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=ly(this.mainPlaylistLoader_.srcUrl,n),r?(this.handleMain_(),void this.syncClientServerClock_((()=>e(n,r)))):e(n,r)}))}syncClientServerClock_(e){const t=(n=this.mainPlaylistLoader_.mainXml_,(e=>{const t=mp(e,"UTCTiming")[0];if(!t)return null;const n=_p(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n})(Cp(n)));var n;return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:dy(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},((n,r)=>{if(!this.request)return;if(n)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let i;i="HEAD"===t.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):this.mainLoaded_:Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=i-Date.now(),e()})))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=(({mainXml:e,srcUrl:t,clientOffset:n,sidxMapping:r,previousManifest:i})=>{const o=((e,t={})=>{const n=((e,t={})=>{const{manifestUri:n="",NOW:r=Date.now(),clientOffset:i=0,eventHandler:o=function(){}}=t,a=mp(e,"Period");if(!a.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const s=mp(e,"Location"),d=_p(e),l=Sp([{baseUrl:n}],mp(e,"BaseURL")),c=mp(e,"ContentSteering");d.type=d.type||"static",d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=r,d.clientOffset=i,s.length&&(d.locations=s.map(vp));const u=[];return a.forEach(((e,t)=>{const n=_p(e),r=u[t-1];n.start=(({attributes:e,priorPeriodAttributes:t,mpdType:n})=>"number"==typeof e.start?e.start:t&&"number"==typeof t.start&&"number"==typeof t.duration?t.start+t.duration:t||"static"!==n?null:0)({attributes:n,priorPeriodAttributes:r?r.attributes:null,mpdType:d.type}),u.push({node:e,attributes:n})})),{locations:d.locations,contentSteeringInfo:Ep(c,o),representationInfo:Fu(u.map(Ap(d,l))),eventStream:Fu(u.map(Ip))}})(Cp(e),t),r=n.representationInfo.map(gp);return dp({dashPlaylists:r,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})})(e,{manifestUri:t,clientOffset:n,sidxMapping:r,previousManifest:i});return Wy(o,t,vb),o})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=((e,t,n)=>{let r=!0,i=uy(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let e=0;e<t.playlists.length;e++){const o=t.playlists[e];if(o.sidx){const e=Zu(o.sidx);n&&n[e]&&n[e].sidx&&Xu(o,n[e].sidx,o.sidx.resolvedUri)}const a=Qy(i,o,mb);a&&(i=a,r=!1)}return zy(t,((e,t,n,o)=>{if(e.playlists&&e.playlists.length){const a=e.playlists[0].id,s=Qy(i,e.playlists[0],mb);s&&(i=s,o in i.mediaGroups[t][n]||(i.mediaGroups[t][n][o]=e),i.mediaGroups[t][n][o].playlists[0]=i.playlists[a],r=!1)}})),((e,t)=>{zy(e,((n,r,i,o)=>{o in t.mediaGroups[r][i]||delete e.mediaGroups[r][i][o]}))})(i,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:i})(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(t),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Vc().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Vc().setTimeout((()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)}refreshXml_(){this.requestMain_(((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((e,t)=>{let n=bb(e.playlists,t);return zy(e,((e,r,i,o)=>{if(e.playlists&&e.playlists.length){const r=e.playlists;n=uy(n,bb(r,t))}})),n})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,(e=>{this.refreshMedia_(this.media().id)})))}))}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=Vc().setTimeout((()=>{this.trigger("mediaupdatetimeout"),e()}),Zy(this.media(),Boolean(n))))};e()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const e=this.mainPlaylistLoader_.main.eventStream.map((e=>({cueTime:e.start,frames:[{data:e.messageData}]})));this.addMetadataToTextTrack("EventStream",e,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const r=e.contentProtection[n].attributes["cenc:default_KID"];r&&t.add(r.replace(/-/g,"").toLowerCase())}return t}}}var wb={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Sb=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Tb=function(e){return function(){const t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(t){const n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}}(e),n=Sb(new Worker(t));n.objURL=t;const r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},Ib=function(e){return`var browserWorkerPolyFill = ${Sb.toString()};\nbrowserWorkerPolyFill(self);\n`+e},kb=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Ab=Ib(kb((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,o;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(o=[],r=arguments.length,r=1;r<arguments.length;++r)o.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,o)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var n,r,i,o,a,s,d,l,c,u,p,h,f,g,m,v,y,b,_,w,S,T,I,k,A,E,C,x,O,P,D,R,j,M,N,U,L,B,q,F,V=t,z=Math.pow(2,32),$={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*z+n.getUint32(4)},MAX_UINT32:z},W=$.MAX_UINT32;!function(){var e;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);I=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),C=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:E,audio:C},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),j=R,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=R,O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return n(T.dinf,n(T.dref,D))},i=function(e){return n(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return n(T.hdlr,x[e])},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),n(T.mdhd,t)},f=function(e){return n(T.mdia,g(e),m(e.type),s(e))},a=function(e){return n(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return n(T.minf,"video"===e.type?n(T.vmhd,O):n(T.smhd,P),r(),y(e))},d=function(e,t){for(var r=[],i=t.length;i--;)r[i]=_(t[i]);return n.apply(null,[T.moof,a(e)].concat(r))},l=function(e){for(var t=e.length,r=[];t--;)r[t]=p(e[t]);return n.apply(null,[T.moov,u(4294967295)].concat(r).concat(c(e)))},c=function(e){for(var t=e.length,r=[];t--;)r[t]=w(e[t]);return n.apply(null,[T.mvex].concat(r))},u=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(T.mvhd,t)},v=function(e){var t,r,i=e.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)t=i[r].flags,o[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return n(T.sdtp,o)},y=function(e){return n(T.stbl,b(e),n(T.stts,N),n(T.stsc,j),n(T.stsz,M),n(T.stco,R))},b=function(e){return n(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):L(e))},U=function(e){var t,r,i=e.sps||[],o=e.pps||[],a=[],s=[];for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));for(t=0;t<o.length;t++)s.push((65280&o[t].byteLength)>>>8),s.push(255&o[t].byteLength),s=s.concat(Array.prototype.slice.call(o[t]));if(r=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],a,[o.length],s))),n(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var d=e.sarRatio[0],l=e.sarRatio[1];r.push(n(T.pasp,new Uint8Array([(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return n.apply(null,r)},L=function(e){return n(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},h=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(T.tkhd,t)},_=function(e){var t,r,i,o,a,s;return t=n(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/W),s=Math.floor(e.baseMediaDecodeTime%W),r=n(T.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(i=S(e,92),n(T.traf,t,r,i)):(o=v(e),i=S(e,o.length+92),n(T.traf,t,r,i,o))},p=function(e){return e.duration=e.duration||4294967295,n(T.trak,h(e),f(e))},w=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),n(T.trex,t)},F=function(e,t){var n=0,r=0,i=0,o=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,n|r|i|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},q=function(e,t){var r,i,o,a,s,d;for(t+=20+16*(a=e.samples||[]).length,o=F(a,t),(i=new Uint8Array(o.length+16*a.length)).set(o),r=o.length,d=0;d<a.length;d++)s=a[d],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size,i[r++]=s.flags.isLeading<<2|s.flags.dependsOn,i[r++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,i[r++]=61440&s.flags.degradationPriority,i[r++]=15&s.flags.degradationPriority,i[r++]=(4278190080&s.compositionTimeOffset)>>>24,i[r++]=(16711680&s.compositionTimeOffset)>>>16,i[r++]=(65280&s.compositionTimeOffset)>>>8,i[r++]=255&s.compositionTimeOffset;return n(T.trun,i)},B=function(e,t){var r,i,o,a,s,d;for(t+=20+8*(a=e.samples||[]).length,o=F(a,t),(r=new Uint8Array(o.length+8*a.length)).set(o),i=o.length,d=0;d<a.length;d++)s=a[d],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size;return n(T.trun,r)},S=function(e,t){return"audio"===e.type?B(e,t):q(e,t)};var H,G,X,J,K,Y,Q,Z,ee={ftyp:o=function(){return n(T.ftyp,I,k,I,A)},mdat:function(e){return n(T.mdat,e)},moof:d,moov:l,initSegment:function(e){var t,n=o(),r=l(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}},te=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne={groupNalsIntoFrames:function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i},groupFramesIntoGops:function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var n,r,i,o,a,s=t||0,d=[];for(n=0;n<e.length;n++)for(o=e[n],r=0;r<o.length;r++)a=o[r],s+=(i=te(a,s)).size,d.push(i);return d},concatenateNalData:function(e){var t,n,r,i,o,a,s=0,d=e.byteLength,l=e.nalCount,c=new Uint8Array(d+4*l),u=new DataView(c.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(o=i[n],r=0;r<o.length;r++)a=o[r],u.setUint32(s,a.data.byteLength),s+=4,c.set(a.data,s),s+=a.data.byteLength;return c},generateSampleTableForFrame:function(e,t){var n,r=[];return n=te(e,t||0),r.push(n),r},concatenateNalDataForFrame:function(e){var t,n,r=0,i=e.byteLength,o=e.length,a=new Uint8Array(i+4*o),s=new DataView(a.buffer);for(t=0;t<e.length;t++)n=e[t],s.setUint32(r,n.data.byteLength),r+=4,a.set(n.data,r),r+=n.data.byteLength;return a}},re=[33,16,5,32,164,27],ie=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],oe=function(e){for(var t=[];e--;)t.push(0);return t},ae=9e4;Y=function(e,t){return G(K(e,t))},Q=function(e,t){return X(J(e),t)},Z=function(e,t,n){return J(n?e:e-t)};var se={ONE_SECOND_IN_TS:ae,secondsToVideoTs:G=function(e){return e*ae},secondsToAudioTs:X=function(e,t){return e*t},videoTsToSeconds:J=function(e){return e/ae},audioTsToSeconds:K=function(e,t){return e/t},audioTsToVideoTs:Y,videoTsToAudioTs:Q,metadataTsToSeconds:Z},de=se,le={prefixWithSilence:function(e,t,n,r){var i,o,a,s,d,l=0,c=0,u=0;if(t.length&&(i=de.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(de.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&r&&(l=i-Math.max(n,r),u=(c=Math.floor(l/o))*o),!(c<1||u>de.ONE_SECOND_IN_TS/2))){for((a=function(){if(!H){var e={96e3:[re,[227,64],oe(154),[56]],88200:[re,[231],oe(170),[56]],64e3:[re,[248,192],oe(240),[56]],48e3:[re,[255,192],oe(268),[55,148,128],oe(54),[112]],44100:[re,[255,192],oe(268),[55,163,128],oe(84),[112]],32e3:[re,[255,192],oe(268),[55,234],oe(226),[112]],24e3:[re,[255,192],oe(268),[55,255,128],oe(268),[111,112],oe(126),[224]],16e3:[re,[255,192],oe(268),[55,255,128],oe(268),[111,255],oe(269),[223,108],oe(195),[1,192]],12e3:[ie,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,253,128],oe(259),[56]],11025:[ie,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,255,192],oe(268),[55,175,128],oe(108),[112]],8e3:[ie,oe(268),[3,121,16],oe(47),[7]]};t=e,H=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return H}()[e.samplerate])||(a=t[0].data),s=0;s<c;s++)d=t[0],t.splice(0,0,{data:a,dts:d.dts-o,pts:d.pts-o});return e.baseMediaDecodeTime-=Math.floor(de.videoTsToAudioTs(u,e.samplerate)),u}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},generateSampleTable:function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},concatenateFrameData:function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}},ce=se.ONE_SECOND_IN_TS,ue={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/ce,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}},pe={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,r,i,o,a=[];if(!(64&t[0]))return a;for(r=31&t[0],n=0;n<r;n++)o={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(o.ccData=t[i+3]<<8|t[i+4],a.push(o));return a},discardEmulationPreventionBytes:function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},USER_DATA_REGISTERED_ITU_T_T35:4},he=V,fe=pe,ge=function(e){e=e||{},ge.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ke(0,0),new ke(0,1),new ke(1,0),new ke(1,1)],this.parse708captions_&&(this.cc708Stream_=new _e({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ge.prototype=new he,ge.prototype.push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=fe.parseSei(e.escapedRBSP)).payload&&t.payloadType===fe.USER_DATA_REGISTERED_ITU_T_T35&&(n=fe.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=fe.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ge.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ge.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ge.prototype.flush=function(){return this.flushStream("flush")},ge.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ge.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ge.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ge.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ge.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ge.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ge.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var me={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ve=function(e){return 32<=e&&e<=127||160<=e&&e<=255},ye=function(e){this.windowNum=e,this.reset()};ye.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ye.prototype.getText=function(){return this.rows.join("\n")},ye.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ye.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ye.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ye.prototype.addText=function(e){this.rows[this.rowIdx]+=e},ye.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var be=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new ye(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};be.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new ye(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},be.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},be.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var _e=function(e){e=e||{},_e.prototype.init.call(this);var t,n=this,r=e.captionServices||{},i={};Object.keys(r).forEach((e=>{t=r[e],/^SERVICE/.test(e)&&(i[e]=t.encoding)})),this.serviceEncodings=i,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};_e.prototype=new he,_e.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},_e.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},_e.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,o=t[i++];for(e.seq=o>>6,e.sizeCode=63&o;i<t.length;i++)r=31&(o=t[i++]),7==(n=o>>5)&&r>0&&(n=o=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},_e.prototype.pushServiceBlock=function(e,t,n){var r,i=t,o=this.current708Packet.data,a=this.services[e];for(a||(a=this.initService(e,i));i<t+n&&i<o.length;i++)r=o[i],ve(r)?i=this.handleText(i,a):24===r?i=this.multiByteCharacter(i,a):16===r?i=this.extendedCommands(i,a):128<=r&&r<=135?i=this.setCurrentWindow(i,a):152<=r&&r<=159?i=this.defineWindow(i,a):136===r?i=this.clearWindows(i,a):140===r?i=this.deleteWindows(i,a):137===r?i=this.displayWindows(i,a):138===r?i=this.hideWindows(i,a):139===r?i=this.toggleWindows(i,a):151===r?i=this.setWindowAttributes(i,a):144===r?i=this.setPenAttributes(i,a):145===r?i=this.setPenColor(i,a):146===r?i=this.setPenLocation(i,a):143===r?a=this.reset(i,a):8===r?a.currentWindow.backspace():12===r?a.currentWindow.clearText():13===r?a.currentWindow.pendingNewLine=!0:14===r?a.currentWindow.clearText():141===r&&i++},_e.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return ve(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},_e.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},_e.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new be(e,r,i),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},_e.prototype.handleText=function(e,t,n){var r,i,o,a,s=n&&n.isExtended,d=n&&n.isMultiByte,l=this.current708Packet.data,c=s?4096:0,u=l[e],p=l[e+1],h=t.currentWindow;if(d?(i=[u,p],e++):i=[u],t.textDecoder_&&!s)r=t.textDecoder_.decode(new Uint8Array(i));else if(d){const e=i.map((e=>("0"+(255&e).toString(16)).slice(-2))).join("");r=String.fromCharCode(parseInt(e,16))}else a=me[o=c|u]||o,r=4096&o&&o===a?"":String.fromCharCode(a);return h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(r),e},_e.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return ve(r)&&ve(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},_e.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},_e.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var o=t.currentWindow;return r=n[++e],o.visible=(32&r)>>5,o.rowLock=(16&r)>>4,o.columnLock=(8&r)>>3,o.priority=7&r,r=n[++e],o.relativePositioning=(128&r)>>7,o.anchorVertical=127&r,r=n[++e],o.anchorHorizontal=r,r=n[++e],o.anchorPoint=(240&r)>>4,o.rowCount=15&r,r=n[++e],o.columnCount=63&r,r=n[++e],o.windowStyle=(56&r)>>3,o.penStyle=7&r,o.virtualRowCount=o.rowCount+1,e},_e.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},_e.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},_e.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},_e.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},_e.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},_e.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},_e.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},_e.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},_e.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},_e.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},_e.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},_e.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var we={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Se=function(e){return null===e?"":(e=we[e]||e,String.fromCharCode(e))},Te=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ie=function(){for(var e=[],t=15;t--;)e.push({text:"",indent:0,offset:0});return e},ke=function(e,t){ke.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ie();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ie();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ie()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))o=Se((r=(3&r)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),o=Se((r=(3&r)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i)){const e=3&i;this.nonDisplayed_[this.row_].offset=e,this.column_+=e}else if(this.isPAC(r,i)){var a=Te.indexOf(7968&t);if("rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)){const e=(14&t)>>1;this.column_=4*e,this.nonDisplayed_[this.row_].indent+=e}this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),o=Se(r),o+=Se(i),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};ke.prototype=new he,ke.prototype.flushDisplayed=function(e){const t=e=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."})},n=[];this.displayed_.forEach(((e,r)=>{if(e&&e.text&&e.text.length){try{e.text=e.text.trim()}catch(e){t(r)}e.text.length&&n.push({text:e.text,line:r+1,position:10+Math.min(70,10*e.indent)+2.5*e.offset})}else null==e&&t(r)})),n.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,content:n,stream:this.name_})},ke.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ie(),this.nonDisplayed_=Ie(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ke.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ke.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},ke.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},ke.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},ke.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},ke.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},ke.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},ke.prototype.isNormalChar=function(e){return e>=32&&e<=127},ke.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ie(),this.displayed_=Ie()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]={text:"",indent:0,offset:0};void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ke.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},ke.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},ke.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_].text;n+=t,this.nonDisplayed_[this.row_].text=n},ke.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_].text;n+=t,this.displayed_[this.row_].text=n},ke.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]={text:"",indent:0,offset:0};for(e=this.row_+1;e<15;e++)this.displayed_[e]={text:"",indent:0,offset:0};for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},ke.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_].text;n+=t,this.displayed_[this.row_].text=n};var Ae={CaptionStream:ge,Cea608Stream:ke,Cea708Stream:_e},Ee={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ce=V,xe="shared",Oe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Pe=function(e){var t,n;Pe.prototype.init.call(this),this.type_=e||xe,this.push=function(e){"metadata"!==e.type?this.type_!==xe&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Oe(e.dts,n),e.pts=Oe(e.pts,n),t=e.dts,this.trigger("data",e)):this.trigger("data",e)},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Pe.prototype=new Ce;var De,Re={TimestampRolloverStream:Pe,handleRollover:Oe},je=(e,t,n)=>{if(!e)return-1;for(var r=n;r<e.length;r++)if(e[r]===t)return r;return-1},Me=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Ne=function(e,t,n){return decodeURIComponent(Me(e,t,n))},Ue=function(e,t,n){return unescape(Me(e,t,n))},Le=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Be={APIC:function(e){var t,n,r=1;3===e.data[0]&&((t=je(e.data,0,r))<0||(e.mimeType=Ue(e.data,r,t),r=t+1,e.pictureType=e.data[r],r++,(n=je(e.data,0,r))<0||(e.description=Ne(e.data,r,n),r=n+1,"--\x3e"===e.mimeType?e.url=Ue(e.data,r,e.data.length):e.pictureData=e.data.subarray(r,e.data.length))))},"T*":function(e){3===e.data[0]&&(e.value=Ne(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;3===e.data[0]&&-1!==(t=je(e.data,0,1))&&(e.description=Ne(e.data,1,t),e.value=Ne(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value)},"W*":function(e){e.url=Ue(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;3===e.data[0]&&-1!==(t=je(e.data,0,1))&&(e.description=Ne(e.data,1,t),e.url=Ue(e.data,t+1,e.data.length).replace(/\0.*$/,""))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ue(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},qe={parseId3Frames:function(e){var t,n=10,r=0,i=[];if(!(e.length<10||e[0]!=="I".charCodeAt(0)||e[1]!=="D".charCodeAt(0)||e[2]!=="3".charCodeAt(0))){r=Le(e.subarray(6,10)),r+=10,64&e[5]&&(n+=4,n+=Le(e.subarray(10,14)),r-=Le(e.subarray(16,20)));do{if((t=Le(e.subarray(n+4,n+8)))<1)break;var o={id:String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]),data:e.subarray(n+10,n+t+10)};o.key=o.id,Be[o.id]?Be[o.id](o):"T"===o.id[0]?Be["T*"](o):"W"===o.id[0]&&Be["W*"](o),i.push(o),n+=10,n+=t}while(n<r);return i}},parseSyncSafeInteger:Le,frameParsers:Be},Fe=Ee,Ve=qe;(De=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],o=0;if(De.prototype.init.call(this),this.dispatchType=Fe.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,a,s,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),o+=e.data.byteLength,1===i.length&&(r=Ve.parseSyncSafeInteger(e.data.subarray(6,10)),r+=10),!(o<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},d=0;d<r;)t.data.set(i[0].data.subarray(0,r-d),d),d+=i[0].data.byteLength,o-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=Ve.parseSyncSafeInteger(t.data.subarray(10,14)),r-=Ve.parseSyncSafeInteger(t.data.subarray(16,20)));do{if((a=Ve.parseSyncSafeInteger(t.data.subarray(n+4,n+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+a+10)}).key=s.id,Ve.frameParsers[s.id]?Ve.frameParsers[s.id](s):"T"===s.id[0]?Ve.frameParsers["T*"](s):"W"===s.id[0]&&Ve.frameParsers["W*"](s),"com.apple.streaming.transportStreamTimestamp"===s.owner){var l=s.data,c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4,c+=3&l[7],s.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=a}while(n<r);this.trigger("data",t)}}}).prototype=new V;var ze,$e,We,He=De,Ge=V,Xe=Ae,Je=Ee,Ke=Re.TimestampRolloverStream,Ye=188;(ze=function(){var e=new Uint8Array(Ye),t=0;ze.prototype.init.call(this),this.push=function(n){var r,i=0,o=Ye;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;o<r.byteLength;)71!==r[i]||71!==r[o]?(i++,o++):(this.trigger("data",r.subarray(i,o)),i+=Ye,o+=Ye);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===Ye&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new Ge,($e=function(){var e,t,n,r;$e.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var o=e[i],a=(31&e[i+1])<<8|e[i+2];o===Je.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=a:o===Je.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=a:o===Je.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][a]=o),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Je.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Je.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new Ge,$e.STREAM_TYPES={h264:27,adts:15},We=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},o={data:[],size:0},a=function(e,n,r){var i,o,a=new Uint8Array(e.size),s={type:n},d=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,d=0;d<e.data.length;d++)o=e.data[d],a.set(o.data,l),l+=o.data.byteLength;!function(e,t){var n;const r=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===r&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))}(a,s),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};We.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Je.H264_STREAM_TYPE:e=r,t="video";break;case Je.ADTS_STREAM_TYPE:e=i,t="audio";break;case Je.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[s.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(r,"video"),a(i,"audio"),a(o,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}},We.prototype=new Ge;var Qe={PAT_PID:0,MP2T_PACKET_LENGTH:Ye,TransportPacketStream:ze,TransportParseStream:$e,ElementaryStream:We,TimestampRolloverStream:Ke,CaptionStream:Xe.CaptionStream,Cea608Stream:Xe.Cea608Stream,Cea708Stream:Xe.Cea708Stream,MetadataStream:He};for(var Ze in Je)Je.hasOwnProperty(Ze)&&(Qe[Ze]=Je[Ze]);var et,tt=Qe,nt=se.ONE_SECOND_IN_TS,rt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(et=function(e){var t,n=0;et.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${n} outside syncword`})},this.push=function(r){var i,o,a,s,d,l=0;if(e||(n=0),"audio"===r.type){var c;for(t&&t.length?(a=t,(t=new Uint8Array(a.byteLength+r.data.byteLength)).set(a),t.set(r.data,a.byteLength)):t=r.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof c&&(this.skipWarn_(c,l),c=null),o=2*(1&~t[l+1]),i=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,d=(s=1024*(1+(3&t[l+6])))*nt/rt[(60&t[l+2])>>>2],t.byteLength-l<i)break;this.trigger("data",{pts:r.pts+n*d,dts:r.dts+n*d,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:rt[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+o,l+i)}),n++,l+=i}else"number"!=typeof c&&(c=l),l++;"number"==typeof c&&(this.skipWarn_(c,l),c=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new V;var it,ot,at,st=et,dt=V,lt=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(i,i+a)),n=new DataView(o.buffer).getUint32(0),r=8*a,t-=a},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),o=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(ot=function(){var e,t,n=0;ot.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var o=t.byteLength;n<o-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<o;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<o);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new dt,at={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},it=function(){var e,t,n,r,i,o,a,s=new ot;it.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,s.push(e))},s.on("data",(function(a){var s={trackId:t,pts:n,dts:r,data:a,nalUnitTypeCode:31&a[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(a.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(a.subarray(1)),s.config=o(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},a=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},o=function(e){var t,n,r,i,o,s,d,l,c,u,p,h,f=0,g=0,m=0,v=0,y=[1,1];if(n=(t=new lt(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),at[n]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==o?8:12,h=0;h<p;h++)t.readBoolean()&&a(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),d=t.readUnsignedExpGolomb(),h=0;h<d;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(u=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(l+1)-2*f-2*g,height:(2-u)*(c+1)*16-2*m-2*v,sarRatio:y}}},it.prototype=new dt;var ct,ut={H264Stream:it,NalByteStream:ot},pt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ht=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},ft=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=ht(e,t),ft(e,t))},gt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},mt={isLikelyAacData:function(e){var t=ft(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:ht,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return pt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=gt(e.subarray(10,14)));do{if((n=gt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){var o=unescape(function(e,t,n){var r,i="";for(r=0;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i));if("com.apple.streaming.transportStreamTimestamp"===o){var a=r.subarray(i+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}},vt=mt;(ct=function(){var e=new Uint8Array,t=0;ct.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,o,a,s=0,d=0;for(e.length?(a=e.length,(e=new Uint8Array(n.byteLength+a)).set(e.subarray(0,a)),e.set(n,a)):e=n;e.length-d>=3;)if(e[d]!=="I".charCodeAt(0)||e[d+1]!=="D".charCodeAt(0)||e[d+2]!=="3".charCodeAt(0))if(255!=(255&e[d])||240!=(240&e[d+1]))d++;else{if(e.length-d<7)break;if(d+(s=vt.parseAdtsSize(e,d))>e.length)break;o={type:"audio",data:e.subarray(d,d+s),pts:t,dts:t},this.trigger("data",o),d+=s}else{if(e.length-d<10)break;if(d+(s=vt.parseId3TagSize(e,d))>e.length)break;i={type:"timed-metadata",data:e.subarray(d,d+s)},this.trigger("data",i),d+=s}r=e.length-d,e=r>0?e.subarray(d):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var yt,bt,_t,wt,St=V,Tt=ee,It=ne,kt=le,At=ue,Et=tt,Ct=se,xt=st,Ot=ut.H264Stream,Pt=ct,Dt=mt.isLikelyAacData,Rt=se.ONE_SECOND_IN_TS,jt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Mt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Nt=function(e,t){t.stream=e,this.trigger("log",t)},Ut=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",Nt.bind(e,i))}},Lt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Bt=function(e,t,n,r,i,o){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:o,baseMediaDecodeTime:e}};bt=function(e,t){var n,r=[],i=0,o=0,a=1/0;n=(t=t||{}).firstSequenceNumber||0,bt.prototype.init.call(this),this.push=function(t){At.collectDtsInfo(e,t),e&&jt.forEach((function(n){e[n]=t[n]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var s,d,l,c,u,p,h;0!==r.length?(s=kt.trimAdtsFramesByEarliestDts(r,e,i),e.baseMediaDecodeTime=At.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),h=kt.prefixWithSilence(e,s,o,a),e.samples=kt.generateSampleTable(s),l=Tt.mdat(kt.concatenateFrameData(s)),r=[],d=Tt.moof(n,[e]),c=new Uint8Array(d.byteLength+l.byteLength),n++,c.set(d),c.set(l,d.byteLength),At.clearDtsInfo(e),u=Math.ceil(1024*Rt/e.samplerate),s.length&&(p=s.length*u,this.trigger("segmentTimingInfo",Bt(Ct.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+p,s[0].pts+p,h||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+p})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){At.clearDtsInfo(e),r=[],this.trigger("reset")}},bt.prototype=new St,yt=function(e,t){var n,r,i,o=[],a=[];n=(t=t||{}).firstSequenceNumber||0,yt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){At.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],Mt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var r,i,s,d,l,c,u,p,h=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=It.groupNalsIntoFrames(o),(s=It.groupFramesIntoGops(r))[0][0].keyFrame||((i=this.getGopForFusion_(o[0],e))?(h=i.duration,s.unshift(i),s.byteLength+=i.byteLength,s.nalCount+=i.nalCount,s.pts=i.pts,s.dts=i.dts,s.duration+=i.duration):s=It.extendFirstKeyFrame(s)),a.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");At.clearDtsInfo(e),s=f}At.collectDtsInfo(e,s),e.samples=It.generateSampleTable(s),l=Tt.mdat(It.concatenateNalData(s)),e.baseMediaDecodeTime=At.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),u=s[0],p=s[s.length-1],this.trigger("segmentTimingInfo",Bt(e.baseMediaDecodeTime,u.dts,u.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),d=Tt.moof(n,[e]),c=new Uint8Array(d.byteLength+l.byteLength),n++,c.set(d),c.set(l,d.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){At.clearDtsInfo(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,o,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)i=(o=this.gopCache_[a]).gop,e.pps&&Lt(e.pps[0],o.pps[0])&&e.sps&&Lt(e.sps[0],o.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=o,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,o,s,d,l;for(o=e.byteLength,s=e.nalCount,d=e.duration,t=n=0;t<a.length&&n<e.length&&(r=a[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,o-=i.byteLength,s-=i.nalCount,d-=i.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=o,l.duration=d,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,r,i,o,s,d;for(t=a.length-1,n=e.length-1,o=null,s=!1;t>=0&&n>=0;){if(r=a[t],i=e[n],r.pts===i.pts){s=!0;break}r.pts>i.pts?t--:(t===a.length-1&&(o=n),n--)}if(!s&&null===o)return null;if(0===(d=s?n:o))return e;var l=e.slice(d),c=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){a=e}},yt.prototype=new St,wt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,wt.prototype.init.call(this),this.push=function(e){return e.content||e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},wt.prototype=new St,wt.prototype.flush=function(e){var t,n,r,i,o=0,a={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Mt.forEach((function(e){a.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,jt.forEach((function(e){a.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,r=Tt.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(r.byteLength),a.initSegment.set(r),a.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)a.data.set(this.pendingBoxes[i],o),o+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=Ct.metadataTsToSeconds(t.startPts,s,this.keepOriginalTimestamps),t.endTime=Ct.metadataTsToSeconds(t.endPts,s,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=Ct.metadataTsToSeconds(n.pts,s,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),i=0;i<a.captions.length;i++)t=a.captions[i],this.trigger("caption",t);for(i=0;i<a.metadata.length;i++)n=a.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},wt.prototype.setRemux=function(e){this.remuxTracks=e},(_t=function(e){var t,n,r=this,i=!0;_t.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Et.MetadataStream,i.aacStream=new Pt,i.audioTimestampRolloverStream=new Et.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Et.TimestampRolloverStream("timed-metadata"),i.adtsStream=new xt,i.coalesceStream=new wt(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(o){"timed-metadata"!==o.type&&"audio"!==o.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new bt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),Ut(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Et.MetadataStream,i.packetStream=new Et.TransportPacketStream,i.parseStream=new Et.TransportParseStream,i.elementaryStream=new Et.ElementaryStream,i.timestampRolloverStream=new Et.TimestampRolloverStream,i.adtsStream=new xt,i.h264Stream=new Ot,i.captionStream=new Et.CaptionStream(e),i.coalesceStream=new wt(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(o){var a;if("metadata"===o.type){for(a=o.tracks.length;a--;)t||"video"!==o.tracks[a].type?n||"audio"!==o.tracks[a].type||((n=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new yt(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new bt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),Ut(this,i)},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,At.clearDtsInfo(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,At.clearDtsInfo(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=Dt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new St;var qt,Ft,Vt,zt,$t={Transmuxer:_t,VideoSegmentStream:yt,AudioSegmentStream:bt,AUDIO_PROPERTIES:jt,VIDEO_PROPERTIES:Mt,generateSegmentTimingInfo:Bt},Wt=function(e){return e>>>0},Ht=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Gt=Wt,Xt=Ht,Jt=function(e,t){var n,r,i,o,a,s=[];if(!t.length)return null;for(n=0;n<e.byteLength;)r=Gt(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),i=Xt(e.subarray(n+4,n+8)),o=r>1?n+r:e.byteLength,i===t[0]&&(1===t.length?s.push(e.subarray(n+8,o)):(a=Jt(e.subarray(n+8,o),t.slice(1))).length&&(s=s.concat(a))),n=o;return s},Kt=Wt,Yt=$.getUint64,Qt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Yt(e.subarray(4)):t.baseMediaDecodeTime=Kt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Zt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},en=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],o=4&n.flags[2],a=1&n.flags[1],s=2&n.flags[1],d=4&n.flags[1],l=8&n.flags[1],c=r.getUint32(4),u=8;for(i&&(n.dataOffset=r.getInt32(u),u+=4),o&&c&&(t={flags:Zt(e.subarray(u,u+4))},u+=4,a&&(t.duration=r.getUint32(u),u+=4),s&&(t.size=r.getUint32(u),u+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(u):t.compositionTimeOffset=r.getUint32(u),u+=4),n.samples.push(t),c--);c--;)t={},a&&(t.duration=r.getUint32(u),u+=4),s&&(t.size=r.getUint32(u),u+=4),d&&(t.flags=Zt(e.subarray(u,u+4)),u+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(u):t.compositionTimeOffset=r.getUint32(u),u+=4),n.samples.push(t);return n},tn=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],o=2&r.flags[2],a=8&r.flags[2],s=16&r.flags[2],d=32&r.flags[2],l=65536&r.flags[0],c=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),o&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),d&&(r.defaultSampleFlags=n.getUint32(t)),l&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r},nn=(qt="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},pe.discardEmulationPreventionBytes),rn=Ae.CaptionStream,on=Jt,an=Qt,sn=en,dn=tn,ln=qt,cn=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},un=function(){var e,t,n,r,i,o,a=!1;this.isInitialized=function(){return a},this.init=function(t){e=new rn,a=!0,o=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})),e.on("log",(function(e){i.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,o,a){var s;if(!this.isInitialized())return null;if(!o||!a)return null;if(this.isNewInit(o,a))n=o[0],r=a[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var d=t.shift();this.parse(d,o,a)}return s=function(e,t,n){if(null===t)return null;var r=function(e,t){var n=on(e,["moof","traf"]),r=on(e,["mdat"]),i={},o=[];return r.forEach((function(e,t){var r=n[t];o.push({mdat:e,traf:r})})),o.forEach((function(e){var n,r,o=e.mdat,a=e.traf,s=on(a,["tfhd"]),d=dn(s[0]),l=d.trackId,c=on(a,["tfdt"]),u=c.length>0?an(c[0]).baseMediaDecodeTime:0,p=on(a,["trun"]);t===l&&p.length>0&&(n=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,o=n.defaultSampleSize||0,a=n.trackId,s=[];return e.forEach((function(e){var t=sn(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=o),e.trackId=a,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+ln.BigInt(e.compositionTimeOffset),r+=ln.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)})),s=s.concat(t)})),s}(p,u,d),r=function(e,t,n){var r,i,o,a,s=new DataView(e.buffer,e.byteOffset,e.byteLength),d={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=o)if(o=s.getUint32(i),i+=4,!(o<=0))switch(31&e[i]){case 6:var l=e.subarray(i+1,i+1+o),c=cn(i,t);if(r={nalUnitType:"sei_rbsp",size:o,data:l,escapedRBSP:nn(l),trackId:n},c)r.pts=c.pts,r.dts=c.dts,a=c;else{if(!a){d.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=a.pts,r.dts=a.dts}d.seiNals.push(r)}return d}(o,n,l),i[l]||(i[l]={seiNals:[],logs:[]}),i[l].seiNals=i[l].seiNals.concat(r.seiNals),i[l].logs=i[l].logs.concat(r.logs))})),i}(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r),s&&s.logs&&(i.logs=i.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},pn=function(e){for(var t=0,n=String.fromCharCode(e[t]),r="";"\0"!==n;)r+=n,t++,n=String.fromCharCode(e[t]);return r+n},hn=$.getUint64,fn=function(e){return void 0!==e||null!==e},gn={parseEmsgBox:function(e){var t,n,r,i,o,a,s,d=4,l=e[0];if(0===l)d+=(t=pn(e.subarray(d))).length,d+=(n=pn(e.subarray(d))).length,r=(c=new DataView(e.buffer)).getUint32(d),d+=4,o=c.getUint32(d),d+=4,a=c.getUint32(d),d+=4,s=c.getUint32(d),d+=4;else if(1===l){var c;r=(c=new DataView(e.buffer)).getUint32(d),d+=4,i=hn(e.subarray(d)),d+=8,a=c.getUint32(d),d+=4,s=c.getUint32(d),d+=4,d+=(t=pn(e.subarray(d))).length,d+=(n=pn(e.subarray(d))).length}var u={scheme_id_uri:t,value:n,timescale:r||1,presentation_time:i,presentation_time_delta:o,event_duration:a,id:s,message_data:new Uint8Array(e.subarray(d,e.byteLength))};return function(e,t){var n="\0"!==t.scheme_id_uri,r=0===e&&fn(t.presentation_time_delta)&&n,i=1===e&&fn(t.presentation_time)&&n;return!(e>1)&&r||i}(l,u)?u:void 0},scaleTime:function(e,t,n,r){return e||0===e?e/t:r+n/t}},mn=Wt,vn=function(e){return("00"+e.toString(16)).slice(-2)},yn=Jt,bn=Ht,_n=gn,wn=$.getUint64,Sn=qt,Tn=qe.parseId3Frames;Ft=function(e,t){var n=yn(t,["moof","traf"]).reduce((function(t,n){var r,i=yn(n,["tfhd"])[0],o=mn(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),a=e[o]||9e4,s=yn(n,["tfdt"])[0],d=new DataView(s.buffer,s.byteOffset,s.byteLength);let l;return"bigint"==typeof(r=1===s[0]?wn(s.subarray(4,12)):d.getUint32(4))?l=r/Sn.BigInt(a):"number"!=typeof r||isNaN(r)||(l=r/a),l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),l<t&&(t=l),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},zt=function(e){var t=0===e[0]?12:20;return mn(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},Vt=function(e){var t=yn(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},o=yn(e,["tkhd"])[0];o&&(r=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var a=yn(e,["mdia","hdlr"])[0];if(a){var s=bn(a.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var d=yn(e,["mdia","minf","stbl","stsd"])[0];if(d){var l=d.subarray(8);i.codec=bn(l.subarray(4,8));var c,u=yn(l,[i.codec])[0];u&&(/^[asm]vc[1-9]$/i.test(i.codec)?(c=u.subarray(78),"avcC"===bn(c.subarray(4,8))&&c.length>11?(i.codec+=".",i.codec+=vn(c[9]),i.codec+=vn(c[10]),i.codec+=vn(c[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(c=u.subarray(28),"esds"===bn(c.subarray(4,8))&&c.length>20&&0!==c[19]?(i.codec+="."+vn(c[19]),i.codec+="."+vn(c[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var p=yn(e,["mdia","mdhd"])[0];p&&(i.timescale=zt(p)),n.push(i)})),n};var In=Ft,kn=Vt,An=function(e,t=0){return yn(e,["emsg"]).map((e=>{var n=_n.parseEmsgBox(new Uint8Array(e)),r=Tn(n.message_data);return{cueTime:_n.scaleTime(n.presentation_time,n.timescale,n.presentation_time_delta,t),duration:_n.scaleTime(n.event_duration,n.timescale),frames:r}}))},En=Ee,Cn=function(e){var t=31&e[1];return(t<<=8)|e[2]},xn=function(e){return!!(64&e[1])},On=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Pn=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Dn={parseType:function(e,t){var n=Cn(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=xn(e),n=4+On(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=xn(e),r=4+On(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var o=12+((15&e[r+10])<<8|e[r+11]);o<i;){var a=r+o;t[(31&e[a+1])<<8|e[a+2]]=e[a],o+=5+((15&e[a+3])<<8|e[a+4])}return t}},parsePayloadUnitStartIndicator:xn,parsePesType:function(e,t){switch(t[Cn(e)]){case En.H264_STREAM_TYPE:return"video";case En.ADTS_STREAM_TYPE:return"audio";case En.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!xn(e))return null;var t=4+On(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+On(e),n=e.subarray(t),r=0,i=0,o=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Pn(31&n[i+3])&&(o=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Pn(31&n[i+3])&&(o=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Pn(31&n[i+3])&&(o=!0),o}},Rn=Ee,jn=Re.handleRollover,Mn={};Mn.ts=Dn,Mn.aac=mt;var Nn=se.ONE_SECOND_IN_TS,Un=188,Ln=71,Bn=function(e,t,n){for(var r,i,o,a,s=0,d=Un,l=!1;d<=e.byteLength;)if(e[s]!==Ln||e[d]!==Ln&&d!==e.byteLength)s++,d++;else{if(r=e.subarray(s,d),"pes"===Mn.ts.parseType(r,t.pid)&&(i=Mn.ts.parsePesType(r,t.table),o=Mn.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(a=Mn.ts.parsePesTime(r))&&(a.type="audio",n.audio.push(a),l=!0)),l)break;s+=Un,d+=Un}for(s=(d=e.byteLength)-Un,l=!1;s>=0;)if(e[s]!==Ln||e[d]!==Ln&&d!==e.byteLength)s--,d--;else{if(r=e.subarray(s,d),"pes"===Mn.ts.parseType(r,t.pid)&&(i=Mn.ts.parsePesType(r,t.table),o=Mn.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(a=Mn.ts.parsePesTime(r))&&(a.type="audio",n.audio.push(a),l=!0)),l)break;s-=Un,d-=Un}},qn=function(e,t,n){for(var r,i,o,a,s,d,l,c=0,u=Un,p=!1,h={data:[],size:0};u<e.byteLength;)if(e[c]!==Ln||e[u]!==Ln)c++,u++;else{if(r=e.subarray(c,u),"pes"===Mn.ts.parseType(r,t.pid)&&(i=Mn.ts.parsePesType(r,t.table),o=Mn.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(o&&!p&&(a=Mn.ts.parsePesTime(r))&&(a.type="video",n.video.push(a),p=!0),!n.firstKeyFrame))){if(o&&0!==h.size){for(s=new Uint8Array(h.size),d=0;h.data.length;)l=h.data.shift(),s.set(l,d),d+=l.byteLength;if(Mn.ts.videoPacketContainsKeyFrame(s)){var f=Mn.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(r),h.size+=r.byteLength}if(p&&n.firstKeyFrame)break;c+=Un,u+=Un}for(c=(u=e.byteLength)-Un,p=!1;c>=0;)if(e[c]!==Ln||e[u]!==Ln)c--,u--;else{if(r=e.subarray(c,u),"pes"===Mn.ts.parseType(r,t.pid)&&(i=Mn.ts.parsePesType(r,t.table),o=Mn.ts.parsePayloadUnitStartIndicator(r),"video"===i&&o&&(a=Mn.ts.parsePesTime(r))&&(a.type="video",n.video.push(a),p=!0)),p)break;c-=Un,u-=Un}},Fn=function(e,t){var n;return n=Mn.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,o=null,a=0,s=0;e.length-s>=3;){switch(Mn.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((a=Mn.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===o&&(t=e.subarray(s,s+a),o=Mn.aac.parseAacTimestamp(t)),s+=a;break;case"audio":if(e.length-s<7){n=!0;break}if((a=Mn.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===i&&(t=e.subarray(s,s+a),i=Mn.aac.parseSampleRate(t)),r++,s+=a;break;default:s++}if(n)return null}if(null===i||null===o)return null;var d=Nn/i;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*r*d,pts:o+1024*r*d}]}}(e):function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=Un;i<e.byteLength;)if(e[r]!==Ln||e[i]!==Ln)r++,i++;else{switch(n=e.subarray(r,i),Mn.ts.parseType(n,t.pid)){case"pat":t.pid=Mn.ts.parsePat(n);break;case"pmt":var o=Mn.ts.parsePmt(n);t.table=t.table||{},Object.keys(o).forEach((function(e){t.table[e]=o[e]}))}r+=Un,i+=Un}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case Rn.H264_STREAM_TYPE:n.video=[],qn(e,t,n),0===n.video.length&&delete n.video;break;case Rn.ADTS_STREAM_TYPE:n.audio=[],Bn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=jn(e.dts,n),e.pts=jn(e.pts,n),e.dtsTime=e.dts/Nn,e.ptsTime=e.pts/Nn}))}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=jn(e.dts,r),e.pts=jn(e.pts,r),e.dtsTime=e.dts/Nn,e.ptsTime=e.pts/Nn})),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=jn(i.dts,r),i.pts=jn(i.pts,r),i.dtsTime=i.dts/Nn,i.ptsTime=i.pts/Nn}}}(n,t),n):null};class Vn{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new $t.Transmuxer(this.options),function(e,t){t.on("data",(function(t){const n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};const r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){const n={start:{decode:se.videoTsToSeconds(t.start.dts),presentation:se.videoTsToSeconds(t.start.pts)},end:{decode:se.videoTsToSeconds(t.end.dts),presentation:se.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:se.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=se.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){const n={start:{decode:se.videoTsToSeconds(t.start.dts),presentation:se.videoTsToSeconds(t.start.pts)},end:{decode:se.videoTsToSeconds(t.end.dts),presentation:se.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:se.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=se.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:se.videoTsToSeconds(t.start),end:se.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:se.videoTsToSeconds(t.start),end:se.videoTsToSeconds(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new un,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const n=In(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=kn(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeEmsgID3({data:e,offset:t}){const n=An(e,t);this.self.postMessage({action:"probeEmsgID3",id3Frames:n,emsgData:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const n="number"!=typeof t||isNaN(t)?void 0:t*se.ONE_SECOND_IN_TS,r=Fn(e,n);let i=null;r&&(i={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1},i.hasVideo&&(i.videoStart=r.video[0].ptsTime),i.hasAudio&&(i.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:i,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(se.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(se.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Vn(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Vn(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}})));var Eb=Tb(Ab);const Cb=e=>{const{transmuxer:t,bytes:n,audioAppendStart:r,gopsToAlignWith:i,remux:o,onData:a,onTrackInfo:s,onAudioTimingInfo:d,onVideoTimingInfo:l,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:u,onId3:p,onCaptions:h,onDone:f,onEndedTimeline:g,onTransmuxerLog:m,isEndOfTimeline:v}=e,y={buffer:[]};let b=v;if(t.onmessage=n=>{t.currentTransmux===e&&("data"===n.data.action&&((e,t,n)=>{const{type:r,initSegment:i,captions:o,captionStreams:a,metadata:s,videoFrameDtsTime:d,videoFramePtsTime:l}=e.data.segment;t.buffer.push({captions:o,captionStreams:a,metadata:s});const c=e.data.segment.boxes||{data:e.data.segment.data},u={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};void 0!==d&&(u.videoFrameDtsTime=d),void 0!==l&&(u.videoFramePtsTime=l),n(u)})(n,y,a),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&((e,t)=>{t.gopInfo=e.data.gopInfo})(n,y),"audioTimingInfo"===n.data.action&&d(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&u(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&p([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&h(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,(({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)})({transmuxedData:y,callback:f}),xb(t))))},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==o&&t.postMessage({action:"setRemux",remux:o}),n.byteLength){const e=n instanceof ArrayBuffer?n:n.buffer,r=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:e,byteOffset:r,byteLength:n.byteLength},[e])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},xb=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():Cb(e.currentTransmux))},Ob=(e,t)=>{e.postMessage({action:t}),xb(e)};var Pb=e=>{((e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void Ob(t,e);t.transmuxQueue.push(Ob.bind(null,t,e))})("reset",e)};const Db=function(e){const t=e.transmuxer,n=e.endAction||e.action,r=e.callback,i=Zc({},e,{endAction:null,transmuxer:null,callback:null}),o=i=>{i.data.action===n&&(t.removeEventListener("message",o),i.data.data&&(i.data.data=new Uint8Array(i.data.data,e.byteOffset||0,e.byteLength||i.data.data.byteLength),e.data&&(e.data=i.data.data)),r(i.data))};if(t.addEventListener("message",o),e.data){const n=e.data instanceof ArrayBuffer;i.byteOffset=n?0:e.data.byteOffset,i.byteLength=e.data.byteLength;const r=[n?e.data:e.data.buffer];t.postMessage(i,r)}else t.postMessage(i)},Rb=-101,jb=-102,Mb=e=>{e.forEach((e=>{e.abort()}))},Nb=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Rb,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:jb,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null,Ub=(e,t,n)=>(r,i)=>{const o=i.response,a=Nb(r,i);if(a)return n(a,e);if(16!==o.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},e);const s=new DataView(o),d=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=d;return n(null,e)},Lb=(e,t)=>{const n=Qp(e.map.bytes);if("mp4"!==n){const r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${n||"unknown"} container for initialization segment at URL: ${r}`,code:2})}Db({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:n,data:r})=>(e.map.bytes=r,n.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null))})},Bb=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{const h=e.map&&e.map.tracks||{},f=Boolean(h.audio&&h.video);let g=r.bind(null,e,"audio","start");const m=r.bind(null,e,"audio","end");let v=r.bind(null,e,"video","start");const y=r.bind(null,e,"video","end");Db({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:r=>{e.bytes=t=r.data;const h=r.result;h&&(n(e,{hasAudio:h.hasAudio,hasVideo:h.hasVideo,isMuxed:f}),n=null),(e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void Cb(e);e.transmuxer.transmuxQueue.push(e)})({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:f,onData:t=>{t.type="combined"===t.type?"video":t.type,c(e,t)},onTrackInfo:t=>{n&&(f&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:e=>{g&&void 0!==e.start&&(g(e.start),g=null),m&&void 0!==e.end&&m(e.end)},onVideoTimingInfo:e=>{v&&void 0!==e.start&&(v(e.start),v=null),y&&void 0!==e.end&&y(e.end)},onVideoSegmentTimingInfo:e=>{i(e)},onAudioSegmentTimingInfo:e=>{o(e)},onId3:(t,n)=>{a(e,t,n)},onCaptions:t=>{s(e,[t])},isEndOfTimeline:d,onEndedTimeline:()=>{l()},onTransmuxerLog:p,onDone:t=>{u&&(t.type="combined"===t.type?"video":t.type,u(null,e,t))}})}})},qb=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{let h=new Uint8Array(t);if(function(e){return Np(e,["moof"]).length>0}(h)){e.isFmp4=!0;const{tracks:i}=e.map,o={isFmp4:!0,hasVideo:!!i.video,hasAudio:!!i.audio};i.audio&&i.audio.codec&&"enca"!==i.audio.codec&&(o.audioCodec=i.audio.codec),i.video&&i.video.codec&&"encv"!==i.video.codec&&(o.videoCodec=i.video.codec),i.video&&i.audio&&(o.isMuxed=!0),n(e,o);const d=(t,n)=>{c(e,{data:h,type:o.hasAudio&&!o.isMuxed?"audio":"video"}),n&&n.length&&a(e,n),t&&t.length&&s(e,t),u(null,e,{})};Db({action:"probeMp4StartTime",timescales:e.map.timescales,data:h,transmuxer:e.transmuxer,callback:({data:n,startTime:a})=>{t=n.buffer,e.bytes=h=n,o.hasAudio&&!o.isMuxed&&r(e,"audio","start",a),o.hasVideo&&r(e,"video","start",a),Db({action:"probeEmsgID3",data:h,transmuxer:e.transmuxer,offset:a,callback:({emsgData:n,id3Frames:r})=>{t=n.buffer,e.bytes=h=n,i.video&&n.byteLength&&e.transmuxer?Db({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:h,timescales:e.map.timescales,trackIds:[i.video.id],callback:n=>{t=n.data.buffer,e.bytes=h=n.data,n.logs.forEach((function(e){p(uy(e,{stream:"mp4CaptionParser"}))})),d(n.captions,r)}}):d(void 0,r)}})}})}else if(e.transmuxer){if(void 0===e.container&&(e.container=Qp(h)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void u(null,e,{});Bb({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})}else u(null,e,{})},Fb=function({id:e,key:t,encryptedBytes:n,decryptionWorker:r},i){const o=t=>{if(t.data.source===e){r.removeEventListener("message",o);const e=t.data.decrypted;i(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let a;r.addEventListener("message",o),a=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),r.postMessage(db({source:e,encrypted:n,key:a,iv:t.iv}),[n.buffer,a.buffer])},Vb=({xhr:e,xhrOptions:t,decryptionWorker:n,segment:r,abortFn:i,progressFn:o,trackInfoFn:a,timingInfoFn:s,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:u,isEndOfTimeline:p,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:m})=>{const v=[],y=(({activeXhrs:e,decryptionWorker:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{let h=0,f=!1;return(g,m)=>{if(!f){if(g)return f=!0,Mb(e),u(g,m);if(h+=1,h===e.length){const h=function(){if(m.encryptedBytes)return(({decryptionWorker:e,segment:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{Fb({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},(e=>{t.bytes=e,qb({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})}))})({decryptionWorker:t,segment:m,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p});qb({segment:m,bytes:m.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return Fb({decryptionWorker:t,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(t=>{m.map.bytes=t,Lb(m,(t=>{if(t)return Mb(e),u(t,m);h()}))}));h()}}}})({activeXhrs:v,decryptionWorker:n,trackInfoFn:a,timingInfoFn:s,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:u,isEndOfTimeline:p,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:m});if(r.key&&!r.key.bytes){const n=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&n.push(r.map.key);const i=e(uy(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Ub(r,n,y));v.push(i)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const n=e(uy(t,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Ub(r,[r.map.key],y));v.push(n)}const n=uy(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:ib(r.map)}),i=(({segment:e,finishProcessingFn:t})=>(n,r)=>{const i=Nb(n,r);if(i)return t(i,e);const o=new Uint8Array(r.response);if(e.map.key)return e.map.encryptedBytes=o,t(null,e);e.map.bytes=o,Lb(e,(function(n){if(n)return n.xhr=r,n.status=r.status,t(n,e);t(null,e)}))})({segment:r,finishProcessingFn:y}),o=e(n,i);v.push(o)}const b=uy(t,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:ib(r)}),_=e(b,(({segment:e,finishProcessingFn:t,responseType:n})=>(r,i)=>{const o=Nb(r,i);if(o)return t(o,e);const a="arraybuffer"!==n&&i.responseText?(e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer})(i.responseText.substring(e.lastReachedChar||0)):i.response;return e.stats=(e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}))(i),e.key?e.encryptedBytes=new Uint8Array(a):e.bytes=new Uint8Array(a),t(null,e)})({segment:r,finishProcessingFn:y,responseType:b.responseType}));_.addEventListener("progress",(({segment:e,progressFn:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:o,id3Fn:a,captionsFn:s,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c})=>n=>{if(!n.target.aborted)return e.stats=uy(e.stats,(e=>{const t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n})(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)})({segment:r,progressFn:o,trackInfoFn:a,timingInfoFn:s,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:u,isEndOfTimeline:p,endedTimelineFn:h,dataFn:f})),v.push(_);const w={};return v.forEach((e=>{e.addEventListener("loadend",(({loadendState:e,abortFn:t})=>n=>{n.target.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)})({loadendState:w,abortFn:i}))})),()=>Mb(v)},zb=cy("CodecUtils"),$b=(e,t)=>{const n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Wb=function(e){const t={};return e.forEach((({mediaType:e,type:n,details:r})=>{t[e]=t[e]||[],t[e].push(bu(`${n}${r}`))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return zb(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]})),t},Hb=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Gb=function(e,t){const n=t.attributes||{},r=Wb(function(e){const t=e.attributes||{};if(t.CODECS)return _u(t.CODECS)}(t)||[]);if($b(e,t)&&!r.audio&&!((e,t)=>{if(!$b(e,t))return!0;const n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(const e in r)if(!r[e].uri&&!r[e].playlists)return!0;return!1})(e,t)){const t=Wb(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return _u(i.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);t.audio&&(r.audio=t.audio)}return r},Xb=cy("PlaylistSelector"),Jb=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},Kb=function(e,t){if(!e)return"";const n=Vc().getComputedStyle(e);return n?n[t]:""},Yb=function(e,t){const n=e.slice();e.sort((function(e,r){const i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},Qb=function(e,t){let n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Vc().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||Vc().Number.MAX_VALUE,n-r};let Zb=function(e,t,n,r,i,o){if(!e)return;const a={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:i};let s=e.playlists;By.isAudioOnly(e)&&(s=o.getAudioTrackPlaylists_(),a.audioOnly=!0);let d=s.map((e=>{let t;const n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,r=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||Vc().Number.MAX_VALUE,{bandwidth:t,width:n,height:r,playlist:e}}));Yb(d,((e,t)=>e.bandwidth-t.bandwidth)),d=d.filter((e=>!By.isIncompatible(e.playlist)));let l=d.filter((e=>By.isEnabled(e.playlist)));l.length||(l=d.filter((e=>!By.isDisabled(e.playlist))));const c=l.filter((e=>e.bandwidth*wb.BANDWIDTH_VARIANCE<t));let u=c[c.length-1];const p=c.filter((e=>e.bandwidth===u.bandwidth))[0];if(!1===i){const e=p||l[0]||d[0];if(e&&e.playlist){let t="sortedPlaylistReps";return p&&(t="bandwidthBestRep"),l[0]&&(t="enabledPlaylistReps"),Xb(`choosing ${Jb(e)} using ${t} with options`,a),e.playlist}return Xb("could not choose a playlist with options",a),null}const h=c.filter((e=>e.width&&e.height));Yb(h,((e,t)=>e.width-t.width));const f=h.filter((e=>e.width===n&&e.height===r));u=f[f.length-1];const g=f.filter((e=>e.bandwidth===u.bandwidth))[0];let m,v,y,b;if(g||(m=h.filter((e=>e.width>n||e.height>r)),v=m.filter((e=>e.width===m[0].width&&e.height===m[0].height)),u=v[v.length-1],y=v.filter((e=>e.bandwidth===u.bandwidth))[0]),o.leastPixelDiffSelector){const e=h.map((e=>(e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-r),e)));Yb(e,((e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff)),b=e[0]}const _=b||y||g||p||l[0]||d[0];if(_&&_.playlist){let e="sortedPlaylistReps";return b?e="leastPixelDiffRep":y?e="resolutionPlusOneRep":g?e="resolutionBestRep":p?e="bandwidthBestRep":l[0]&&(e="enabledPlaylistReps"),Xb(`choosing ${Jb(_)} using ${e} with options`,a),_.playlist}return Xb("could not choose a playlist with options",a),null};const e_=function(){const e=this.useDevicePixelRatio&&Vc().devicePixelRatio||1;return Zb(this.playlists.main,this.systemBandwidth,parseInt(Kb(this.tech_.el(),"width"),10)*e,parseInt(Kb(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},t_={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},n_=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),r_=(e,t,n)=>{e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ry.browser.IS_ANY_SAFARI||(e.metadataTrack_.inBandMetadataTrackDispatchType=t))},i_=function(e,t,n){let r,i;if(n&&n.cues)for(r=n.cues.length;r--;)i=n.cues[r],i.startTime>=e&&i.endTime<=t&&n.removeCue(i)},o_=e=>"number"==typeof e&&isFinite(e),a_=1/60,s_=e=>{const{startOfSegment:t,duration:n,segment:r,part:i,playlist:{mediaSequence:o,id:a,segments:s=[]},mediaIndex:d,partIndex:l,timeline:c}=e,u=s.length-1;let p="mediaIndex/partIndex increment";e.getMediaInfoForTime?p=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=` with independent ${e.independent}`);const h="number"==typeof l,f=e.segment.uri?"segment":"pre-segment",g=h?ky({preloadSegment:r})-1:0;return`${f} [${o+d}/${o+u}]`+(h?` part [${l}/${g}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(h?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${t}]`+` duration [${n}]`+` timeline [${c}]`+` selected by [${p}]`+` playlist [${a}]`},d_=e=>`${e}TimingInfo`,l_=({timelineChangeController:e,currentTimeline:t,segmentTimeline:n,loaderType:r,audioDisabled:i})=>{if(t===n)return!1;if("audio"===r){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==n}if("main"===r&&i){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==n}return!1},c_=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+hy;class u_ extends ry.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",(()=>{this.isEndOfStream_()||(this.ended_=!1)})),this.fetchAtBuffer_=!1,this.logger_=cy(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",(()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}))}createTransmuxer_(){return(e=>{const t=new Eb;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:e}),t})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Vc().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Vc().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Pb(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return py();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:n,isMuxed:r}=e;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=lb(e);let r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,t=!1){if(!e)return null;const n=cb(e);let r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_(`playlist update [${i} => ${e.id||e.uri}]`),this.syncController_.updateMediaSequenceMap(e,this.currentTime_(),this.loaderType_),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList||"number"!=typeof e.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const o=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${o}]`),null!==this.mediaIndex)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}r&&(r.mediaIndex-=o,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(Vc().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&Pb(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.shouldForceTimestampOffsetAfterResync_=!0,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=(()=>{}),r=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let i=1;const o=()=>{i--,0===i&&n()};!r&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,o)),(r||"main"===this.loaderType_)&&(this.gopBuffer_=((e,t,n,r)=>{const i=Math.ceil((t-r)*Zp.ONE_SECOND_IN_TS),o=Math.ceil((n-r)*Zp.ONE_SECOND_IN_TS),a=e.slice();let s=e.length;for(;s--&&!(e[s].pts<=o););if(-1===s)return a;let d=s+1;for(;d--&&!(e[d].pts<=i););return d=Math.max(d,0),a.splice(d,s-d+1),a})(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,o));for(const n in this.inbandTextTracks_)i_(e,t,this.inbandTextTracks_[n]);i_(e,t,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&Vc().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Vc().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Vc().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Vc().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const r="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,o=!r||!r.parts||n+1===r.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&o}chooseNextRequest_(){const e=this.buffered_(),t=_y(e)||0,n=wy(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,i=n>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||r||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=function(e,t,n){t=t||[];const r=[];let i=0;for(let o=0;o<t.length;o++){const a=t[o];if(e===a.timeline&&(r.push(o),i+=a.duration,i>n))return o}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,o,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${a.mediaIndex}`);else if(null!==this.mediaIndex){const e=o[this.mediaIndex],n="number"==typeof this.partIndex?this.partIndex:-1;a.startOfSegment=e.end?e.end:t,e.parts&&e.parts[n+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=n+1):a.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:e,startTime:n,partIndex:r}=By.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});a.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,a.mediaIndex=e,a.startOfSegment=n,a.partIndex=r,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${a.mediaIndex} `)}const s=o[a.mediaIndex];let d=s&&"number"==typeof a.partIndex&&s.parts&&s.parts[a.partIndex];if(!s||"number"==typeof a.partIndex&&!d)return null;"number"!=typeof a.partIndex&&s.parts&&(a.partIndex=0,d=s.parts[0]);const l=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&d&&!l&&!d.independent)if(0===a.partIndex){const e=o[a.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(a.mediaIndex-=1,a.partIndex=e.parts.length-1,a.independent="previous segment")}else s.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");const c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=o.length-1&&c&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,a.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(a))}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:r,startOfSegment:i,isSyncRequest:o,partIndex:a,forceTimestampOffset:s,getMediaInfoForTime:d}=e,l=n.segments[r],c="number"==typeof a&&l.parts[a],u={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||l.resolvedUri,mediaIndex:r,partIndex:c?a:null,isSyncRequest:o,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:c&&c.duration||l.duration,segment:l,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:t},p=void 0!==s?s:this.isPendingTimestampOffset_;u.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:p});const h=_y(this.sourceUpdater_.audioBuffered());return"number"==typeof h&&(u.audioAppendStart=h-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(u.gopsToAlignWith=((e,t,n)=>{if(null==t||!e.length)return[];const r=Math.ceil((t-n+3)*Zp.ONE_SECOND_IN_TS);let i;for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),u}timestampOffsetForSegment_(e){return(({segmentTimeline:e,currentTimeline:t,startOfSegment:n,buffered:r,overrideCheck:i})=>i||e!==t?e<t?n:r.length?r.end(r.length-1):n:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=By.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),o=function(e,t,n=1){return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(i<=o)return;const a=function(e){const{main:t,currentTime:n,bandwidth:r,duration:i,segmentDuration:o,timeUntilRebuffer:a,currentTimeline:s,syncController:d}=e,l=t.playlists.filter((e=>!By.isIncompatible(e)));let c=l.filter(By.isEnabled);c.length||(c=l.filter((e=>!By.isDisabled(e))));const u=c.filter(By.hasAttribute.bind(null,"BANDWIDTH")).map((e=>{const t=d.getSyncPoint(e,i,s,n)?1:2;return{playlist:e,rebufferingImpact:By.estimateSegmentRequestTime(o,r,e)*t-a}})),p=u.filter((e=>e.rebufferingImpact<=0));return Yb(p,((e,t)=>Qb(t.playlist,e.playlist))),p.length?p[0]:(Yb(u,((e,t)=>e.rebufferingImpact-t.rebufferingImpact)),u[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a)return;const s=i-o-a.rebufferingImpact;let d=.5;o<=hy&&(d=1),!a.playlist||a.playlist.uri===this.playlist_.uri||s<d||(this.bandwidth=a.playlist.attributes.BANDWIDTH*wb.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${s_(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const o=n[i];if(o!==r[i])return!1;if(e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(e,t,n,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const i=this.pendingSegment_,o=d_(t);i[o]=i[o]||{},i[o][n]=r,this.logger_(`timinginfo: ${t} - ${n} - ${r}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((e=>{r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(r).forEach((e=>{const{startTime:t,endTime:i,captions:o}=r[e],a=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${i} for ${e}`),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});let r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);const i=t.textTracks().getTrackById(r);if(i)e[n]=i;else{let i=n,o=n,a=!1;const s=(t.options_.vhs&&t.options_.vhs.captionServices||{})[r];s&&(i=s.label,o=s.language,a=s.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:a,label:i,language:o},!1).track}}}(a,this.vhs_.tech_,e),i_(t,i,a[e]),function({inbandTextTracks:e,captionArray:t,timestampOffset:n}){if(!t)return;const r=Vc().WebKitDataCue||Vc().VTTCue;t.forEach((t=>{const i=t.stream;t.content?t.content.forEach((o=>{const a=new r(t.startTime+n,t.endTime+n,o.text);a.line=o.line,a.align="left",a.position=o.position,a.positionAlign="line-left",e[i].addCue(a)})):e[i].addCue(new r(t.startTime+n,t.endTime+n,t.text))}))}({captionArray:o,inbandTextTracks:a,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(n,t,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach((e=>e())),this.metadataQueue_.caption.forEach((e=>e())),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach((e=>e()))}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach((e=>e()))}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&l_({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:r,isMuxed:i}=t;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||l_({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[d_(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let r;t&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==n.mediaIndex||e.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:r}){if(n){const e=lb(n);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},r){const i=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();i.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+by(i).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+by(o).join(", "));const a=i.length?i.start(0):0,s=i.length?i.end(i.length-1):0,d=o.length?o.start(0):0,l=o.length?o.end(o.length-1):0;if(s-a<=1&&l-d<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${by(i).join(", ")}, video buffer: ${by(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const c=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${c}`),this.remove(0,c,(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=Vc().setTimeout((()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()}),1e3)}),!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},r){r&&(22!==r.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error(`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:r,bytes:i}){if(!i){const e=[r];let t=r.byteLength;n&&(e.unshift(n),t+=n.byteLength),i=(e=>{let t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((e=>{t.set(e,n),n+=e.byteLength}))),t})({bytes:t,segments:e})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:i},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:i}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,i=`${e}TimingInfo`;r[i]||(r[i]={}),r[i].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[i].transmuxedPresentationStart=n.start.presentation,r[i].transmuxedDecodeStart=n.start.decode,r[i].transmuxedPresentationEnd=n.end.presentation,r[i].transmuxedDecodeEnd=n.end.decode,r[i].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:r}=t;if(!r||!r.byteLength)return;if("audio"===n&&this.audioDisabled_)return;const i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((()=>{const t=Zc({},e,{forceTimestampOffset:!0});Zc(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)}))}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,i=e.timeline!==this.currentTimeline_&&e.timeline>0,o=n||r&&i;this.logger_(`Requesting ${s_(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Vb({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:n,stream:r})=>{this.logger_(`${s_(e)} logged from transmuxer stream ${r} as a ${n}: ${t}`)}})}trimBackBuffer_(e){const t=((e,t,n)=>{let r=t-wb.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));const i=t-n;return Math.min(i,r)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,r={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];if(i&&i.timeline===t.timeline&&(i.videoTimingInfo?r.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(r.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key){const n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=n}return t.map&&(r.map=this.initSegmentForMap(t.map)),r}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<a_?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record 0.016666666666666666`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===jb)return;return this.pause(),e.code===Rb?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=((e,t,n)=>{if(!t.length)return e;if(n)return t.slice();const r=t[0].pts;let i=0;for(;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)})(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:i,useVideoTimingInfo:o,videoTimingInfo:a,audioTimingInfo:s}){if(void 0!==e)return e;if(!o)return s.start;const d=t.segments[n-1];return 0!==n&&d&&void 0!==d.start&&d.end===r+i?a.start:r}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:n,hasVideo:r,isMuxed:i}=t,o="main"===this.loaderType_&&r,a=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);o&&e.waitingOnAppends++,a&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((e,t,n)=>"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=((e,t)=>{if("hls"!==t)return null;const n=(e=>{let t=0;return["video","audio"].forEach((function(n){const r=e[`${n}TimingInfo`];if(!r)return;const{start:i,end:o}=r;let a;"bigint"==typeof i||"bigint"==typeof o?a=Vc().BigInt(o)-Vc().BigInt(i):"number"==typeof i&&"number"==typeof o&&(a=o-i),void 0!==a&&a>t&&(t=a)})),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t})({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;const r=e.playlist.targetDuration,i=c_({segmentDuration:n,maxDuration:2*r}),o=c_({segmentDuration:n,maxDuration:r}),a=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${n} when the reported duration is ${e.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return i||o?{severity:i?"warn":"info",message:a}:null})(e,this.sourceType_);if(t&&("warn"===t.severity?ry.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${s_(e)}`);this.logger_(`Appended ${s_(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,r=e.part,i=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,o=r&&r.end&&this.currentTime_()-r.end>3*e.playlist.partTargetDuration;if(i||o)return this.logger_(`bad ${i?"segment":"part"} ${s_(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<a_)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record 0.016666666666666666`);const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,r=t.end;if(!o_(n)||!o_(r))return;i_(n,r,this.segmentMetadataTrack_);const i=Vc().WebKitDataCue||Vc().VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},a=new i(n,r,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}function p_(){}const h_=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},f_=["video","audio"],g_=(e,t)=>{const n=t[`${e}Buffer`];return n&&n.updating||t.queuePending[e]},m_=(e,t)=>{if(0===t.queue.length)return;let n=0,r=t.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!g_(e,t)){if(r.type!==e){if(n=((e,t)=>{for(let n=0;n<t.length;n++){const r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null})(e,t.queue),null===n)return;r=t.queue[n]}return t.queue.splice(n,1),t.queuePending[e]=r,r.action(e,t),r.doneFn?void 0:(t.queuePending[e]=null,void m_(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),m_("audio",t),m_("video",t))},v_=(e,t)=>{const n=t[`${e}Buffer`],r=h_(e);n&&(n.removeEventListener("updateend",t[`on${r}UpdateEnd_`]),n.removeEventListener("error",t[`on${r}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},y_=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),b_=(e,t,n)=>(r,i)=>{const o=i[`${r}Buffer`];if(y_(i.mediaSource,o)){i.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${r}Buffer`);try{o.appendBuffer(e)}catch(e){i.logger_(`Error with code ${e.code} `+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${r}Buffer`),i.queuePending[r]=null,n(e)}}},__=(e,t)=>(n,r)=>{const i=r[`${n}Buffer`];if(y_(r.mediaSource,i)){r.logger_(`Removing ${e} to ${t} from ${n}Buffer`);try{i.remove(e,t)}catch(i){r.logger_(`Remove ${e} to ${t} from ${n}Buffer failed`)}}},w_=e=>(t,n)=>{const r=n[`${t}Buffer`];y_(n.mediaSource,r)&&(n.logger_(`Setting ${t}timestampOffset to ${e}`),r.timestampOffset=e)},S_=e=>(t,n)=>{e()},T_=e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(e){ry.log.warn("Failed to call media source endOfStream",e)}}},I_=e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(e){ry.log.warn("Failed to set media source duration",e)}},k_=(e,t)=>n=>{const r=h_(e),i=Su(t);n.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const o=n.mediaSource.addSourceBuffer(i);o.addEventListener("updateend",n[`on${r}UpdateEnd_`]),o.addEventListener("error",n[`on${r}Error_`]),n.codecs[e]=t,n[`${e}Buffer`]=o},A_=e=>t=>{const n=t[`${e}Buffer`];if(v_(e,t),y_(t.mediaSource,n)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(t){ry.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,t)}}},E_=e=>(t,n)=>{const r=n[`${t}Buffer`],i=Su(e);if(y_(n.mediaSource,r)&&n.codecs[t]!==e){n.logger_(`changing ${t}Buffer codec from ${n.codecs[t]} to ${e}`);try{r.changeType(i),n.codecs[t]=e}catch(e){ry.log.warn(`Failed to changeType on ${t}Buffer`,e)}}},C_=({type:e,sourceUpdater:t,action:n,doneFn:r,name:i})=>{t.queue.push({type:e,action:n,doneFn:r,name:i}),m_(e,t)},x_=(e,t)=>n=>{if(t.queuePending[e]){const n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[`${e}Error_`])}m_(e,t)};class O_ extends ry.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>m_("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=cy("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=x_("video",this),this.onAudioUpdateEnd_=x_("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){C_({type:"mediaSource",sourceUpdater:this,action:k_(e,t),name:"addSourceBuffer"})}abort(e){C_({type:e,sourceUpdater:this,action:(e,t)=>{if("open"!==t.mediaSource.readyState)return;const n=t[`${e}Buffer`];if(y_(t.mediaSource,n)){t.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(t){ry.log.warn(`Failed to abort on ${e}Buffer`,t)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?C_({type:"mediaSource",sourceUpdater:this,action:A_(e),name:"removeSourceBuffer"}):ry.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!ry.browser.IS_FIREFOX&&Vc().MediaSource&&Vc().MediaSource.prototype&&"function"==typeof Vc().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return Vc().SourceBuffer&&Vc().SourceBuffer.prototype&&"function"==typeof Vc().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?C_({type:e,sourceUpdater:this,action:E_(t),name:"changeType"}):ry.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)}))}appendBuffer(e,t){const{segmentInfo:n,type:r,bytes:i}=e;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${i.length} until video append`);if(C_({type:r,sourceUpdater:this,action:b_(i,n||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach((e=>{this.appendBuffer.apply(this,e)}))}}audioBuffered(){return y_(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:py()}videoBuffered(){return y_(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:py()}buffered(){const e=y_(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=y_(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){let n=null,r=null,i=0;const o=[],a=[];if(!(e&&e.length&&t&&t.length))return py();let s=e.length;for(;s--;)o.push({time:e.start(s),type:"start"}),o.push({time:e.end(s),type:"end"});for(s=t.length;s--;)o.push({time:t.start(s),type:"start"}),o.push({time:t.end(s),type:"end"});for(o.sort((function(e,t){return e.time-t.time})),s=0;s<o.length;s++)"start"===o[s].type?(i++,2===i&&(n=o[s].time)):"end"===o[s].type&&(i--,1===i&&(r=o[s].time)),null!==n&&null!==r&&(a.push([n,r]),n=null,r=null);return py(a)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=p_){C_({type:"mediaSource",sourceUpdater:this,action:I_(e),name:"duration",doneFn:t})}endOfStream(e=null,t=p_){"string"!=typeof e&&(e=void 0),C_({type:"mediaSource",sourceUpdater:this,action:T_(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=p_){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?C_({type:"audio",sourceUpdater:this,action:__(e,t),doneFn:n,name:"remove"}):n()}removeVideo(e,t,n=p_){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?C_({type:"video",sourceUpdater:this,action:__(e,t),doneFn:n,name:"remove"}):n()}updating(){return!(!g_("audio",this)&&!g_("video",this))}audioTimestampOffset(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(C_({type:"audio",sourceUpdater:this,action:w_(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(C_({type:"video",sourceUpdater:this,action:w_(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&C_({type:"audio",sourceUpdater:this,action:S_(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&C_({type:"video",sourceUpdater:this,action:S_(e),name:"callback"})}dispose(){this.trigger("dispose"),f_.forEach((e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`]((()=>v_(e,this)))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const P_=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),D_=new Uint8Array("\n\n".split("").map((e=>e.charCodeAt(0))));class R_ extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class j_ extends u_{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return py();const e=this.subtitlesTrack_.cues;return py([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=lb(e);let r=this.initSegments_[n];if(t&&!r&&e.bytes){const t=D_.byteLength+e.bytes.byteLength,i=new Uint8Array(t);i.set(e.bytes),i.set(D_,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:i}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){i_(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Rb&&this.handleTimeout_(),e.code===jb?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const i=r.segment;if(i.map&&(i.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof Vc().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((()=>this.segmentRequestFinished_(e,t,n)),(()=>this.stopForError({message:"Error loading vtt.js"})));i.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,r.cues.forEach((e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(Vc().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){const t=e.cues;if(!t)return;const n={};for(let r=t.length-1;r>=0;r--){const i=t[r],o=`${i.startTime}-${i.endTime}-${i.text}`;n[o]?e.removeCue(i):n[o]=i}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if("function"!=typeof Vc().WebVTT)throw new R_;"function"==typeof Vc().TextDecoder?t=new(Vc().TextDecoder)("utf8"):(t=Vc().WebVTT.StringDecoder(),n=!0);const r=new(Vc().WebVTT.Parser)(Vc(),Vc().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=t=>{e.timestampmap=t},r.onparsingerror=e=>{ry.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;n&&(t=P_(t)),r.parse(t)}let i=e.bytes;n&&(i=P_(i)),r.parse(i),r.flush()}updateTimeMapping_(e,t,n){const r=e.segment;if(!t)return;if(!e.cues.length)return void(r.empty=!0);const{MPEGTS:i,LOCAL:o}=e.timestampmap,a=i/Zp.ONE_SECOND_IN_TS-o+t.mapping;if(e.cues.forEach((e=>{const n=e.endTime-e.startTime,r=0===i?e.startTime+a:this.handleRollover_(e.startTime+a,t.time);e.startTime=Math.max(r,0),e.endTime=Math.max(r+n,0)})),!n.syncInfo){const t=e.cues[0].startTime,i=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(t,i-r.duration)}}}handleRollover_(e,t){if(null===t)return e;let n=e*Zp.ONE_SECOND_IN_TS;const r=t*Zp.ONE_SECOND_IN_TS;let i;for(i=r<n?-8589934592:8589934592;Math.abs(n-r)>4294967296;)n+=i;return n/Zp.ONE_SECOND_IN_TS}}const M_=function(e,t){const n=e.cues;for(let e=0;e<n.length;e++){const r=n[e];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},N_=[{name:"VOD",run:(e,t,n,r,i)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(e,t,n,r,i,o)=>{if(!o)return null;const a=e.getMediaSequenceMap(o);if(!a||0===a.size)return null;if(void 0===t.mediaSequence||!Array.isArray(t.segments)||!t.segments.length)return null;let s=t.mediaSequence,d=0;for(const e of t.segments){const t=a.get(s);if(!t)break;if(i>=t.start&&i<t.end){if(Array.isArray(e.parts)&&e.parts.length){let n=t.start,r=0;for(const o of e.parts){const e=n,a=e+o.duration;if(i>=e&&i<a)return{time:t.start,segmentIndex:d,partIndex:r};r++,n=a}}return{time:t.start,segmentIndex:d,partIndex:null}}d++,s++}return null}},{name:"ProgramDateTime",run:(e,t,n,r,i)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let o=null,a=null;const s=Ty(t);i=i||0;for(let n=0;n<s.length;n++){const r=s[t.endList||0===i?n:s.length-(n+1)],d=r.segment,l=e.timelineToDatetimeMappings[d.timeline];if(!l||!d.dateTimeObject)continue;let c=d.dateTimeObject.getTime()/1e3+l;if(d.parts&&"number"==typeof r.partIndex)for(let e=0;e<r.partIndex;e++)c+=d.parts[e].duration;const u=Math.abs(i-c);if(null!==a&&(0===u||a<u))break;a=u,o={time:c,segmentIndex:r.segmentIndex,partIndex:r.partIndex}}return o}},{name:"Segment",run:(e,t,n,r,i)=>{let o=null,a=null;i=i||0;const s=Ty(t);for(let e=0;e<s.length;e++){const n=s[t.endList||0===i?e:s.length-(e+1)],d=n.segment,l=n.part&&n.part.start||d&&d.start;if(d.timeline===r&&void 0!==l){const e=Math.abs(i-l);if(null!==a&&a<e)break;(!o||null===a||a>=e)&&(a=e,o={time:l,segmentIndex:n.segmentIndex,partIndex:n.partIndex})}}return o}},{name:"Discontinuity",run:(e,t,n,r,i)=>{let o=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length){let n=null;for(let r=0;r<t.discontinuityStarts.length;r++){const a=t.discontinuityStarts[r],s=t.discontinuitySequence+r+1,d=e.discontinuities[s];if(d){const e=Math.abs(i-d.time);if(null!==n&&n<e)break;(!o||null===n||n>=e)&&(n=e,o={time:d.time,segmentIndex:a,partIndex:null})}}}return o}},{name:"Playlist",run:(e,t,n,r,i)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class U_ extends ry.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.mediaSequenceStorage_=new Map,this.logger_=cy("SyncController")}getMediaSequenceMap(e){return this.mediaSequenceStorage_.get(e)}updateMediaSequenceMap(e,t,n){if(void 0===e.mediaSequence||!Array.isArray(e.segments)||!e.segments.length)return;const r=this.getMediaSequenceMap(n),i=new Map;let o,a=e.mediaSequence;r?r.has(e.mediaSequence)?o=r.get(e.mediaSequence).start:(this.logger_(`MediaSequence sync for ${n} segment loader - received a gap between playlists.\nFallback base time to: ${t}.\nReceived media sequence: ${a}.\nCurrent map: `,r),o=t):o=0,this.logger_(`MediaSequence sync for ${n} segment loader.\nReceived media sequence: ${a}.\nbase time is ${o}\nCurrent map: `,r),e.segments.forEach((e=>{const t=o,n=t+e.duration,r={start:t,end:n};i.set(a,r),a++,o=n})),this.mediaSequenceStorage_.set(n,i)}getSyncPoint(e,t,n,r,i){if(t!==1/0)return N_.find((({name:e})=>"VOD"===e)).run(this,e,t);const o=this.runStrategies_(e,t,n,r,i);if(!o.length)return null;for(const t of o){const{syncPoint:n,strategy:i}=t,{segmentIndex:o,time:a}=n;if(o<0)continue;const s=a,d=s+e.segments[o].duration;if(this.logger_(`Strategy: ${i}. Current time: ${r}. selected segment: ${o}. Time: [${s} -> ${d}]}`),r>=s&&r<d)return this.logger_("Found sync point with exact match: ",n),n}return this.selectSyncPoint_(o,{key:"time",value:r})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0,"main");if(!n.length)return null;const r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+xy({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,r,i){const o=[];for(let a=0;a<N_.length;a++){const s=N_[a],d=s.run(this,e,t,n,r,i);d&&(d.strategy=s.name,o.push({strategy:s.name,syncPoint:d}))}return o}selectSyncPoint_(e,t){let n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy;for(let o=1;o<e.length;o++){const a=Math.abs(e[o].syncPoint[t.key]-t.value);a<r&&(r=a,n=e[o].syncPoint,i=e[o].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${i}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+("number"==typeof n.partIndex?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>86400)ry.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);else for(let r=n-1;r>=0;r--){const n=e.segments[r];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),r=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const i=r.dateTimeObject;r.discontinuity&&t&&i&&(this.timelineToDatetimeMappings[r.timeline]=-i.getTime()/1e3)}timestampOffsetForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const r=e.segment,i=e.part;let o,a,s=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${s.time}] [mapping: ${s.mapping}]`)),o=e.startOfSegment,a=t.end+s.mapping;else{if(!s)return!1;o=t.start+s.mapping,a=t.end+s.mapping}return i&&(i.start=o,i.end=a),(!r.start||o<r.start)&&(r.start=o),r.end=a,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let r=0;r<t.discontinuityStarts.length;r++){const i=t.discontinuityStarts[r],o=t.discontinuitySequence+r+1,a=i-e.mediaIndex,s=Math.abs(a);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>s){let r;r=a<0?n.start-xy({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:i}):n.end+xy({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[o]={time:r,accuracy:s}}}}dispose(){this.trigger("dispose"),this.off()}}class L_ extends ry.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const B_=Ib(kb((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,a=0;a<o;++a)t[a].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();let t=null;class n{constructor(e){let n,r,i;t||(t=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4];let o,a,s;const d=[],l=[];let c,u,p,h,f,g;for(o=0;o<256;o++)l[(d[o]=o<<1^283*(o>>7))^o]=o;for(a=s=0;!r[a];a^=c||1,s=l[s]||1)for(h=s^s<<1^s<<2^s<<3^s<<4,h=h>>8^255&h^99,r[a]=h,i[h]=a,p=d[u=d[c=d[a]]],g=16843009*p^65537*u^257*c^16843008*a,f=257*d[h]^16843008*h,o=0;o<4;o++)t[o][a]=f=f<<24^f>>>8,n[o][h]=g=g<<24^g>>>8;for(o=0;o<5;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return e}()),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];const o=this._tables[0][4],a=this._tables[1],s=e.length;let d=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");const l=e.slice(0),c=[];for(this._key=[l,c],n=s;n<4*s+28;n++)i=l[n-1],(n%s==0||8===s&&n%s==4)&&(i=o[i>>>24]<<24^o[i>>16&255]<<16^o[i>>8&255]<<8^o[255&i],n%s==0&&(i=i<<8^i>>>24^d<<24,d=d<<1^283*(d>>7))),l[n]=l[n-s]^i;for(r=0;n;r++,n--)i=l[3&r?n:n-4],c[r]=n<=4||r<4?i:a[0][o[i>>>24]]^a[1][o[i>>16&255]]^a[2][o[i>>8&255]]^a[3][o[255&i]]}decrypt(e,t,n,r,i,o){const a=this._key[1];let s,d,l,c=e^a[0],u=r^a[1],p=n^a[2],h=t^a[3];const f=a.length/4-2;let g,m=4;const v=this._tables[1],y=v[0],b=v[1],_=v[2],w=v[3],S=v[4];for(g=0;g<f;g++)s=y[c>>>24]^b[u>>16&255]^_[p>>8&255]^w[255&h]^a[m],d=y[u>>>24]^b[p>>16&255]^_[h>>8&255]^w[255&c]^a[m+1],l=y[p>>>24]^b[h>>16&255]^_[c>>8&255]^w[255&u]^a[m+2],h=y[h>>>24]^b[c>>16&255]^_[u>>8&255]^w[255&p]^a[m+3],m+=4,c=s,u=d,p=l;for(g=0;g<4;g++)i[(3&-g)+o]=S[c>>>24]<<24^S[u>>16&255]<<16^S[p>>8&255]<<8^S[255&h]^a[m++],s=c,c=u,u=p,p=h,h=s}}class r extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const i=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24};class o{constructor(e,t,n,a){const s=o.STEP,d=new Int32Array(e.buffer),l=new Uint8Array(e.byteLength);let c=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(d.subarray(c,c+s),t,n,l)),c=s;c<d.length;c+=s)n=new Uint32Array([i(d[c-4]),i(d[c-3]),i(d[c-2]),i(d[c-1])]),this.asyncStream_.push(this.decryptChunk_(d.subarray(c,c+s),t,n,l));this.asyncStream_.push((function(){var e;a(null,(e=l).subarray(0,e.byteLength-e[e.byteLength-1]))}))}static get STEP(){return 32e3}decryptChunk_(e,t,r,o){return function(){const a=function(e,t,r){const o=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new n(Array.prototype.slice.call(t)),s=new Uint8Array(e.byteLength),d=new Int32Array(s.buffer);let l,c,u,p,h,f,g,m,v;for(l=r[0],c=r[1],u=r[2],p=r[3],v=0;v<o.length;v+=4)h=i(o[v]),f=i(o[v+1]),g=i(o[v+2]),m=i(o[v+3]),a.decrypt(h,f,g,m,d,v),d[v]=i(d[v]^l),d[v+1]=i(d[v+1]^c),d[v+2]=i(d[v+2]^u),d[v+3]=i(d[v+3]^p),l=h,c=f,u=g,p=m;return s}(e,t,r);o.set(a,e.byteOffset)}}}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},s=("undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{}).BigInt||Number;s("0x1"),s("0x100"),s("0x10000"),s("0x1000000"),s("0x100000000"),s("0x10000000000"),s("0x1000000000000"),s("0x100000000000000"),s("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();self.onmessage=function(e){const t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new o(n,r,i,(function(e,n){self.postMessage(function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];var i;i=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t}({source:t.source,decrypted:n}),[n.buffer])}))}})));var q_=Tb(B_);const F_=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},V_=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},z_=(e,t)=>{t.activePlaylistLoader=e,e.load()},$_={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:n},excludePlaylist:r}=t,i=n.activeTrack(),o=n.activeGroup(),a=(o.filter((e=>e.default))[0]||o[0]).id,s=n.tracks[a];if(i!==s){ry.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in n.tracks)n.tracks[e].enabled=n.tracks[e]===s;n.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:n}}=t;ry.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},W_={AUDIO:(e,t,n)=>{if(!t)return;const{tech:r,requestOptions:i,segmentLoaders:{[e]:o}}=n;t.on("loadedmetadata",(()=>{const e=t.media();o.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&o.load()})),t.on("loadedplaylist",(()=>{o.playlist(t.media(),i),r.paused()||o.load()})),t.on("error",$_[e](e,n))},SUBTITLES:(e,t,n)=>{const{tech:r,requestOptions:i,segmentLoaders:{[e]:o},mediaTypes:{[e]:a}}=n;t.on("loadedmetadata",(()=>{const e=t.media();o.playlist(e,i),o.track(a.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&o.load()})),t.on("loadedplaylist",(()=>{o.playlist(t.media(),i),r.paused()||o.load()})),t.on("error",$_[e](e,n))}},H_={AUDIO:(e,t)=>{const{vhs:n,sourceType:r,segmentLoaders:{[e]:i},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[e]:{groups:s,tracks:d,logger_:l}},mainPlaylistLoader:c}=t,u=Ly(c.main);a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}},u&&(a[e].main.default.playlists=c.main.playlists));for(const i in a[e]){s[i]||(s[i]=[]);for(const p in a[e][i]){let h,f=a[e][i][p];if(u?(l(`AUDIO group '${i}' label '${p}' is a main playlist`),f.isMainPlaylist=!0,h=null):h="vhs-json"===r&&f.playlists?new eb(f.playlists[0],n,o):f.resolvedUri?new eb(f.resolvedUri,n,o):f.playlists&&"dash"===r?new _b(f.playlists[0],n,o,c):null,f=uy({id:p,playlistLoader:h},f),W_[e](e,f.playlistLoader,t),s[i].push(f),void 0===d[p]){const e=new ry.AudioTrack({id:p,kind:F_(f),enabled:!1,language:f.language,default:f.default,label:p});d[p]=e}}}i.on("error",$_[e](e,t))},SUBTITLES:(e,t)=>{const{tech:n,vhs:r,sourceType:i,segmentLoaders:{[e]:o},requestOptions:a,main:{mediaGroups:s},mediaTypes:{[e]:{groups:d,tracks:l}},mainPlaylistLoader:c}=t;for(const o in s[e]){d[o]||(d[o]=[]);for(const u in s[e][o]){if(!r.options_.useForcedSubtitles&&s[e][o][u].forced)continue;let p,h=s[e][o][u];if("hls"===i)p=new eb(h.resolvedUri,r,a);else if("dash"===i){if(!h.playlists.filter((e=>e.excludeUntil!==1/0)).length)return;p=new _b(h.playlists[0],r,a,c)}else"vhs-json"===i&&(p=new eb(h.playlists?h.playlists[0]:h.resolvedUri,r,a));if(h=uy({id:u,playlistLoader:p},h),W_[e](e,h.playlistLoader,t),d[o].push(h),void 0===l[u]){const e=n.addRemoteTextTrack({id:u,kind:"subtitles",default:h.default&&h.autoselect,language:h.language,label:u},!1).track;l[u]=e}}}o.on("error",$_[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:n,main:{mediaGroups:r},mediaTypes:{[e]:{groups:i,tracks:o}}}=t;for(const t in r[e]){i[t]||(i[t]=[]);for(const a in r[e][t]){const s=r[e][t][a];if(!/^(?:CC|SERVICE)/.test(s.instreamId))continue;const d=n.options_.vhs&&n.options_.vhs.captionServices||{};let l={label:a,language:s.language,instreamId:s.instreamId,default:s.default&&s.autoselect};if(d[l.instreamId]&&(l=uy(l,d[l.instreamId])),void 0===l.default&&delete l.default,i[t].push(uy({id:a},s)),void 0===o[a]){const e=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default,language:l.language,label:l.label},!1).track;o[a]=e}}}}},G_=(e,t)=>{for(let n=0;n<e.length;n++){if(Ny(t,e[n]))return!0;if(e[n].playlists&&G_(e[n].playlists,t))return!0}return!1},X_={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if(n[e].enabled)return n[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}};class J_{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){1===e&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=dy(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map((e=>[e.ID,e]))))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class K_ extends ry.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new J_,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=cy("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n)return this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),void this.trigger("error");n.startsWith("data:")?this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1)):(this.steeringManifest.reloadUri=dy(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();this.request_=this.xhr_({uri:n},((e,t)=>{if(e){if(410===t.status)return this.logger_(`manifest request 410 ${e}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),void this.excludedSteeringManifestURLs.add(n);if(429===t.status){const n=t.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${e}.`),this.logger_(`content steering will retry in ${n} seconds.`),void this.startTTLTimeout_(parseInt(n,10))}return this.logger_(`manifest failed to load ${e}.`),void this.startTTLTimeout_()}const r=JSON.parse(this.request_.responseText);this.assignSteeringProperties_(r),this.startTTLTimeout_()}))}setProxyServerUrl_(e){const t=new(Vc().URL)(e),n=new(Vc().URL)(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(Vc().atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new(Vc().URL)(e),n=this.getPathway(),r=this.getBandwidth_();if(n){const e=`_${this.manifestType_}_pathway`;t.searchParams.set(e,n)}if(r){const e=`_${this.manifestType_}_throughput`;t.searchParams.set(e,r)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const t=(e=>{for(const t of e)if(this.availablePathways_.has(t))return t;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==t&&(this.currentPathway=t,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=e=>this.excludedSteeringManifestURLs.has(e);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!t(n))return n}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=1e3*e;this.ttlTimeout_=Vc().setTimeout((()=>{this.requestSteeringManifest()}),t)}clearTTLTimeout_(){Vc().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new J_}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(dy(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let Y_;const Q_=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Z_=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]};class ew extends ry.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:r,bandwidth:i,externVhs:o,useCueTags:a,playlistExclusionDuration:s,enableLowInitialPlaylist:d,sourceType:l,cacheEncryptionKeys:c,bufferBasedABR:u,leastPixelDiffSelector:p,captionServices:h}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:f}=e;null==f&&(f=1/0),Y_=o,this.bufferBasedABR=Boolean(u),this.leastPixelDiffSelector=Boolean(p),this.withCredentials=n,this.tech_=r,this.vhs_=r.vhs,this.sourceType_=l,this.useCueTags_=a,this.playlistExclusionDuration=s,this.maxPlaylistRetries=f,this.enableLowInitialPlaylist=d,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:f,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:p_,activeTrack:p_,getActiveGroup:p_,onGroupChanged:p_,onTrackChanged:p_,lastTrack_:null,logger_:cy(`MediaGroups[${t}]`)}})),e})(),this.mediaSource=new(Vc().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=py(),this.hasPlayed_=!1,this.syncController_=new U_(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new q_,this.sourceUpdater_=new O_(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new L_,this.keyStatusMap_=new Map;const g={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:h,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:i,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:c,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new _b(t,this.vhs_,uy(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new eb(t,this.vhs_,uy(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new u_(uy(g,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new u_(uy(g,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new j_(uy(g,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise(((e,t)=>{function n(){r.off("vttjserror",i),e()}function i(){r.off("vttjsloaded",n),t()}r.one("vttjsloaded",n),r.one("vttjserror",i),r.addWebVttScript_()}))}),e),this.contentSteeringController_=new K_(this.vhs_.xhr,(()=>this.mainSegmentLoader_.bandwidth)),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",(()=>this.startABRTimer_())),this.tech_.on("pause",(()=>this.stopABRTimer_())),this.tech_.on("play",(()=>this.startABRTimer_()))),Q_.forEach((e=>{this[e+"_"]=Z_.bind(this,e)})),this.logger_=cy("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const m="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(m,(()=>{const e=Date.now();this.tech_.one("loadeddata",(()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends}))}))}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const r=this.media(),i=r&&(r.id||r.uri),o=e&&(e.id||e.uri);i&&i!==o&&(this.logger_(`switch media ${i} -> ${o} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,r=this.contentSteeringController_.getPathway();if(n&&r){const t=(n.length?n[0].playlists:n.playlists).filter((e=>e.attributes.serviceLocation===r));t.length&&this.mediaTypes_[e].activePlaylistLoader.media(t[0])}}))}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=Vc().setInterval((()=>this.checkABR_()),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Vc().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,r=Object.keys(n);let i;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{const e=n.main||r.length&&n[r[0]];for(const t in e)if(e[t].default){i={label:t};break}}if(!i)return t;const o=[];for(const t in n)if(n[t][i.label]){const r=n[t][i.label];if(r.playlists&&r.playlists.length)o.push.apply(o,r.playlists);else if(r.uri)o.push(r);else if(e.playlists.length)for(let n=0;n<e.playlists.length;n++){const r=e.playlists[n];r.attributes&&r.attributes.AUDIO&&r.attributes.AUDIO===t&&o.push(r)}}return o.length?o:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;My(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{H_[t](t,e)}));const{mediaTypes:t,mainPlaylistLoader:n,tech:r,vhs:i,segmentLoaders:{AUDIO:o,main:a}}=e;["AUDIO","SUBTITLES"].forEach((n=>{t[n].activeGroup=((e,t)=>n=>{const{mainPlaylistLoader:r,mediaTypes:{[e]:{groups:i}}}=t,o=r.media();if(!o)return null;let a=null;o.attributes[e]&&(a=i[o.attributes[e]]);const s=Object.keys(i);if(!a)if("AUDIO"===e&&s.length>1&&Ly(t.main))for(let e=0;e<s.length;e++){const t=i[s[e]];if(G_(t,o)){a=t;break}}else i.main?a=i.main:1===s.length&&(a=i[s[0]]);return void 0===n?a:null!==n&&a&&a.filter((e=>e.id===n.id))[0]||null})(n,e),t[n].activeTrack=X_[n](n,e),t[n].onGroupChanged=((e,t)=>()=>{const{segmentLoaders:{[e]:n,main:r},mediaTypes:{[e]:i}}=t,o=i.activeTrack(),a=i.getActiveGroup(),s=i.activePlaylistLoader,d=i.lastGroup_;a&&d&&a.id===d.id||(i.lastGroup_=a,i.lastTrack_=o,V_(n,i),a&&!a.isMainPlaylist&&(a.playlistLoader?(n.resyncLoader(),z_(a.playlistLoader,i)):s&&r.resetEverything()))})(n,e),t[n].onGroupChanging=((e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:r}}=t;r.lastGroup_=null,n.abort(),n.pause()})(n,e),t[n].onTrackChanged=((e,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[e]:r,main:i},mediaTypes:{[e]:o}}=t,a=o.activeTrack(),s=o.getActiveGroup(),d=o.activePlaylistLoader,l=o.lastTrack_;if((!l||!a||l.id!==a.id)&&(o.lastGroup_=s,o.lastTrack_=a,V_(r,o),s)){if(s.isMainPlaylist){if(!a||!l||a.id===l.id)return;const e=t.vhs.playlistController_,r=e.selectPlaylist();if(e.media()===r)return;return o.logger_(`track change. Switching main audio from ${l.id} to ${a.id}`),n.pause(),i.resetEverything(),void e.fastQualityChange_(r)}if("AUDIO"===e){if(!s.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}d!==s.playlistLoader?(r.track&&r.track(a),r.resetEverything(),z_(s.playlistLoader,o)):z_(s.playlistLoader,o)}})(n,e),t[n].getActiveGroup=((e,{mediaTypes:t})=>()=>{const n=t[e].activeTrack();return n?t[e].activeGroup(n):null})(n,e)}));const s=t.AUDIO.activeGroup();if(s){const e=(s.filter((e=>e.default))[0]||s[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),o.setAudio(!0)):a.setAudio(!0)}n.on("mediachange",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanged()))})),n.on("mediachanging",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanging()))}));const d=()=>{t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",d),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(()=>{r.audioTracks().removeEventListener("change",d),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio");for(const e in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[e])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(()=>{this.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;if(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)})),this.mainPlaylistLoader_.on("error",(()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainPlaylistLoader_.on("mediachanging",(()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;My(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,"dash"===this.sourceType_&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))})),this.mainPlaylistLoader_.on("renditiondisabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let r=!0;const i=Object.keys(n.AUDIO);for(const e in n.AUDIO)for(const t in n.AUDIO[e])n.AUDIO[e][t].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Y_.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function({currentPlaylist:e,buffered:t,currentTime:n,nextPlaylist:r,bufferLowWaterLine:i,bufferHighWaterLine:o,duration:a,bufferBasedABR:s,log:d}){if(!r)return ry.log.warn("We received no playlist to switch to. Please check your stream."),!1;const l=`allowing switch ${e&&e.id||"null"} -> ${r.id}`;if(!e)return d(`${l} as current playlist is not set`),!0;if(r.id===e.id)return!1;const c=Boolean(my(t,n).length);if(!e.endList)return c||"number"!=typeof e.partTargetDuration?(d(`${l} as current playlist is live`),!0):(d(`not ${l} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const u=wy(t,n),p=s?wb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:wb.MAX_BUFFER_LOW_WATER_LINE;if(a<p)return d(`${l} as duration < max low water line (${a} < ${p})`),!0;const h=r.attributes.BANDWIDTH,f=e.attributes.BANDWIDTH;if(h<f&&(!s||u<o)){let e=`${l} as next bandwidth < current bandwidth (${h} < ${f})`;return s&&(e+=` and forwardBuffer < bufferHighWaterLine (${u} < ${o})`),d(e),!0}if((!s||h>f)&&u>=i){let e=`${l} as forwardBuffer >= bufferLowWaterLine (${u} >= ${i})`;return s&&(e+=` and next bandwidth > current bandwidth (${h} > ${f})`),d(e),!0}return d(`not ${l} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:i,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",(()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(()=>{this.trigger("progress")})),this.mainSegmentLoader_.on("error",(()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainSegmentLoader_.on("appenderror",(()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("ended",(()=>{this.logger_("main segment loader ended"),this.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))}));const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}))}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e&&e===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything((()=>{this.tech_.setCurrentTime(this.tech_.currentTime())}))}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let r=n;if(e.start){const i=e.start.timeOffset;r=i<0?Math.max(n+i,t.start(0)):Math.min(n,i)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(e=>{}))}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;const n=Y_.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=fy;const o=i.end(i.length-1);return o-r<=fy&&n-o<=fy}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,i=r.filter(Ry),o=1===i.length&&i[0]===e;if(1===r.length&&n!==1/0)return ry.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const t=this.pathwayAttribute_(e),n=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(t),this.excludeThenChangePathway_(),void setTimeout((()=>{this.contentSteeringController_.addAvailablePathway(t)}),n)}let t=!1;r.forEach((n=>{if(n===e)return;const r=n.excludeUntil;void 0!==r&&r!==1/0&&(t=!0,delete n.excludeUntil)})),t&&(ry.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let a;a=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,e.excludeUntil=a,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const s=this.selectPlaylist();if(!s)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const d=t.internal?this.logger_:ry.log.warn,l=t.message?" "+t.message:"";d(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${l} Switching to playlist ${s.id}.`),s.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),s.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const c=s.targetDuration/2*1e3||5e3,u="number"==typeof s.lastRequest&&Date.now()-s.lastRequest<=c;return this.switchMedia_(s,"exclude",o||u)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],r="all"===e;(r||"main"===e)&&n.push(this.mainPlaylistLoader_);const i=[];(r||"audio"===e)&&i.push("AUDIO"),(r||"subtitle"===e)&&(i.push("CLOSED-CAPTIONS"),i.push("SUBTITLES")),i.forEach((e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((t=>{const r=this[`${t}SegmentLoader_`];!r||e!==t&&"all"!==e||n.push(r)})),n.forEach((e=>t.forEach((t=>{"function"==typeof e[t]&&e[t]()}))))}setCurrentTime(e){const t=my(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Y_.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(null===n)return;const r=this.mainPlaylistLoader_.main,i=Y_.Playlist.seekable(t,n,Y_.Playlist.liveEdgeDelay(r,t));if(0===i.length)return;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),null===n)return;if(e=Y_.Playlist.seekable(t,n,Y_.Playlist.liveEdgeDelay(r,t)),0===e.length)return}let o,a;this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),a=this.seekable_.start(0)),e?e.start(0)>i.end(0)||i.start(0)>e.end(0)?this.seekable_=i:this.seekable_=py([[e.start(0)>i.start(0)?e.start(0):i.start(0),e.end(0)<i.end(0)?e.end(0):i.end(0)]]):this.seekable_=i,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===a||(this.logger_(`seekable updated [${yy(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let n=Y_.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((e=>{const t=this.mediaTypes_[e].groups;for(const e in t)t[e].forEach((e=>{e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=Gb(this.main(),t),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=n.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(r.video+=`,${n.audio||e.main.audioCodec||ku}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||i)&&(r.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||ku,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const o={};let a;if(["video","audio"].forEach((function(t){if(r.hasOwnProperty(t)&&(n=e[t].isFmp4,i=r[t],!(n?Tu(i):Iu(i)))){const n=e[t].isFmp4?"browser":"muxer";o[n]=o[n]||[],o[n].push(r[t]),"audio"===t&&(a=n)}var n,i})),i&&a&&t.attributes.AUDIO){const e=t.attributes.AUDIO;this.main().playlists.forEach((n=>{(n.attributes&&n.attributes.AUDIO)===e&&n!==t&&(n.excludeUntil=1/0)})),this.logger_(`excluding audio group ${e} as ${a} does not support codec(s): "${r.audio}"`)}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach((t=>{const n=(_u(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=(_u(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${r[t]}"`)})),e.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return r}{const e=Object.keys(o).reduce(((e,t)=>(e&&(e+=", "),e+`${t} does not support codec(s): "${o[t].join(",")}"`)),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:e},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach((n=>{const r=e[n];if(-1!==t.indexOf(r.id))return;t.push(r.id);const i=Gb(this.main,r),o=[];!i.audio||Iu(i.audio)||Tu(i.audio)||o.push(`audio codec ${i.audio}`),!i.video||Iu(i.video)||Tu(i.video)||o.push(`video codec ${i.video}`),i.text&&"stpp.ttml.im1t"===i.text&&o.push(`text codec ${i.text}`),o.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${o.join(", ")}`))}))}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,r=Wb(_u(e)),i=Hb(r),o=r.video&&_u(r.video)[0]||null,a=r.audio&&_u(r.audio)[0]||null;Object.keys(n).forEach((e=>{const r=n[e];if(-1!==t.indexOf(r.id)||r.excludeUntil===1/0)return;t.push(r.id);const s=[],d=Gb(this.mainPlaylistLoader_.main,r),l=Hb(d);if(d.audio||d.video){if(l!==i&&s.push(`codec count "${l}" !== "${i}"`),!this.sourceUpdater_.canChangeType()){const e=d.video&&_u(d.video)[0]||null,t=d.audio&&_u(d.audio)[0]||null;e&&o&&e.type.toLowerCase()!==o.type.toLowerCase()&&s.push(`video codec "${e.type}" !== "${o.type}"`),t&&a&&t.type.toLowerCase()!==a.type.toLowerCase()&&s.push(`audio codec "${t.type}" !== "${a.type}"`)}s.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id}: ${s.join(" && ")}`))}}))}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n=0){if(!e.segments)return;let r,i=n;for(let n=0;n<e.segments.length;n++){const o=e.segments[n];if(r||(r=M_(t,i+o.duration/2)),r){if("cueIn"in o){r.endTime=i,r.adEndTime=i,i+=o.duration,r=null;continue}if(i<r.endTime){i+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&(r=new(Vc().VTTCue)(i,i+o.duration,o.cueOut),r.adStartTime=i,r.adEndTime=i+parseFloat(o.cueOut),t.addCue(r)),"cueOutCont"in o){const[e,n]=o.cueOutCont.split("/").map(parseFloat);r=new(Vc().VTTCue)(i,i+o.duration,""),r.adStartTime=i-e,r.adEndTime=r.adStartTime+n,t.addCue(r)}i+=o.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=wb.GOAL_BUFFER_LENGTH,n=wb.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,wb.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=wb.BUFFER_LOW_WATER_LINE,n=wb.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,wb.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,wb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?i:r)}bufferHighWaterLine(){return wb.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){r_(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:e,dateRanges:t})=>{const n=e.metadataTrack_;if(!n)return;const r=Vc().WebKitDataCue||Vc().VTTCue;t.forEach((e=>{for(const t of Object.keys(e)){if(n_.has(t))continue;const i=new r(e.startTime,e.endTime,"");i.id=e.id,i.type="com.apple.quicktime.HLS",i.value={key:t_[t],data:e[t]},"scte35Out"!==t&&"scte35In"!==t||(i.value.data=new Uint8Array(i.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(i)}e.processDateRange()}))})({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();r_(this.inbandTextTracks_,e,this.tech_),(({inbandTextTracks:e,metadataArray:t,timestampOffset:n,videoDuration:r})=>{if(!t)return;const i=Vc().WebKitDataCue||Vc().VTTCue,o=e.metadataTrack_;if(!o)return;if(t.forEach((e=>{const t=e.cueTime+n;!("number"!=typeof t||Vc().isNaN(t)||t<0)&&t<1/0&&e.frames&&e.frames.length&&e.frames.forEach((e=>{const n=new i(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:()=>(ry.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key)},value:{get:()=>(ry.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data)},privateData:{get:()=>(ry.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data)}})}(n),o.addCue(n)}))})),!o.cues||!o.cues.length)return;const a=o.cues,s=[];for(let e=0;e<a.length;e++)a[e]&&s.push(a[e]);const d=s.reduce(((e,t)=>{const n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),l=Object.keys(d).sort(((e,t)=>Number(e)-Number(t)));l.forEach(((e,t)=>{const n=d[e],i=isFinite(r)?r:e,o=Number(l[t+1])||i;n.forEach((e=>{e.endTime=o}))}))})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",(()=>{this.contentSteeringController_.requestSteeringManifest()}))}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",(()=>{const e=this.main();(this.contentSteeringController_.didDASHTagChange(e.uri,e.contentSteering)||(()=>{const t=this.contentSteeringController_.getAvailablePathways(),n=[];for(const r of e.playlists){const e=r.attributes.serviceLocation;if(e&&(n.push(e),!t.has(e)))return!0}return!(n.length||!t.size)})())&&this.resetContentSteeringController_()}))}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const t=this.main().playlists,n=new Set;let r=!1;Object.keys(t).forEach((i=>{const o=t[i],a=this.pathwayAttribute_(o),s=a&&e!==a;o.excludeUntil===1/0&&"content-steering"===o.lastExcludeReason_&&!s&&(delete o.excludeUntil,delete o.lastExcludeReason_,r=!0);const d=!o.excludeUntil&&o.excludeUntil!==1/0;!n.has(o.id)&&s&&d&&(n.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))})),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach((t=>{const n=this.mediaTypes_[t];if(n.activePlaylistLoader){const t=n.activePlaylistLoader.media_;t&&t.attributes.serviceLocation!==e&&(r=!0)}})),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const e=this.main().playlists,t=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(t&&t.size||n&&n.size){for(const[e,r]of t.entries())n.get(e)||(this.mainPlaylistLoader_.updateOrDeleteClone(r),this.contentSteeringController_.excludePathway(e));for(const[r,i]of n.entries()){const n=t.get(r);n?this.equalPathwayClones_(n,i)||(this.mainPlaylistLoader_.updateOrDeleteClone(i,!0),this.contentSteeringController_.addAvailablePathway(r)):(e.filter((e=>e.attributes["PATHWAY-ID"]===i["BASE-ID"])).forEach((e=>{this.mainPlaylistLoader_.addClonePathway(i,e)})),this.contentSteeringController_.addAvailablePathway(r))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,r=t["URI-REPLACEMENT"].PARAMS;for(const e in n)if(n[e]!==r[e])return!1;for(const e in r)if(n[e]!==r[e])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach((n=>{const r=this.mainPlaylistLoader_.getKeyIdSet(n);r&&r.size&&r.forEach((r=>{const i="usable",o=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===i,a=n.lastExcludeReason_===t&&n.excludeUntil===1/0;o?o&&a&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${r} is ${i}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${i}`)),e++)}))})),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach((e=>{const n=e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height<720,r=e.excludeUntil===1/0&&e.lastExcludeReason_===t;n&&r&&(delete e.excludeUntil,ry.log.warn(`enabling non-HD playlist ${e.id} because all playlists were excluded due to ${t} key IDs`))}))}addKeyStatus_(e,t){const n=("string"==typeof e?e:(e=>{const t=new Uint8Array(e);return Array.from(t).map((e=>e.toString(16).padStart(2,"0"))).join("")})(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${n} added to the keyStatusMap`),this.keyStatusMap_.set(n,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class tw{constructor(e,t,n){const{playlistController_:r}=e,i=r.fastQualityChange_.bind(r);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}var o,a,s;this.codecs=Gb(r.main(),t),this.playlist=t,this.id=n,this.enabled=(o=e.playlists,a=t.id,s=i,e=>{const t=o.main.playlists[a],n=Dy(t),r=Ry(t);return void 0===e?r:(e?delete t.disabled:t.disabled=!0,e===r||n||(s(),e?o.trigger("renditionenabled"):o.trigger("renditiondisabled")),e)})}}const nw=["seeking","seeked","pause","playing","error"];class rw{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=cy("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),i=()=>this.resetTimeUpdate_(),o=this.playlistController_,a=["main","subtitle","audio"],s={};a.forEach((e=>{s[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},o[`${e}SegmentLoader_`].on("appendsdone",s[e].updateend),o[`${e}SegmentLoader_`].on("playlistupdate",s[e].reset),this.tech_.on(["seeked","seeking"],s[e].reset)}));const d=e=>{["main","audio"].forEach((t=>{o[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)}))};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=()=>d("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(nw,i),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(nw,i),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),a.forEach((e=>{o[`${e}SegmentLoader_`].off("appendsdone",s[e].updateend),o[`${e}SegmentLoader_`].off("playlistupdate",s[e].reset),this.tech_.off(["seeked","seeking"],s[e].reset)})),this.checkCurrentTimeTimeout_&&Vc().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Vc().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Vc().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[`${e}Buffered_`],r);this[`${e}Buffered_`]=r,i?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:by(r)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+fy>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const e=this.seekable(),t=this.tech_.currentTime();let n;if(this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)){const t=e.start(0);n=t+(t===e.end(0)?0:fy)}if(void 0!==n)return this.logger_(`Trying to seek outside of seekable at time ${t} with seekable range ${yy(e)}. Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0;const r=this.playlistController_.sourceUpdater_,i=this.tech_.buffered(),o=r.audioBuffer?r.audioBuffered():null,a=r.videoBuffer?r.videoBuffered():null,s=this.media(),d=s.partTargetDuration?s.partTargetDuration:2*(s.targetDuration-hy),l=[o,a];for(let e=0;e<l.length;e++)if(l[e]&&wy(l[e],t)<d)return!1;const c=vy(i,t);return 0!==c.length&&(n=c.start(0)+fy,this.logger_(`Buffered region starts (${c.start(0)})  just beyond seek point (${t}). Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=my(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const n=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${n}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const i=vy(r,t);return i.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${i.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,n,r=!1){if(!e.length)return!1;let i=e.end(e.length-1)+fy;const o=!n.endList,a="number"==typeof n.partTargetDuration;return o&&(a||r)&&(i=e.end(e.length-1)+3*n.targetDuration),t>i}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let r;if(e.length&&t.length){const i=my(e,n-3),o=my(e,n),a=my(t,n);a.length&&!o.length&&i.length&&(r={start:i.end(0),end:a.end(0)})}else vy(e,n).length||(r=this.gapFromVideoUnderflow_(e,n));return!!r&&(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${n}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),r=vy(t,n);this.resetTimeUpdate_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+hy),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const n=function(e){if(e.length<2)return py();const t=[];for(let n=1;n<e.length;n++){const r=e.end(n-1),i=e.start(n);t.push([r,i])}return py(t)}(e);for(let e=0;e<n.length;e++){const r=n.start(e),i=n.end(e);if(t-r<4&&t-r>2)return{start:r,end:i}}return null}}const iw={errorInterval:30,getSource(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},ow=function(e,t){let n=0,r=0;const i=uy(iw,t);e.ready((()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));const o=function(){r&&e.currentTime(r)},a=function(t){null!=t&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",o),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},s=function(){if(Date.now()-n<1e3*i.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(i.getSource&&"function"==typeof i.getSource)return n=Date.now(),i.getSource.call(e,a);ry.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},d=function(){e.off("loadedmetadata",o),e.off("error",s),e.off("dispose",d)};e.on("error",s),e.on("dispose",d),e.reloadSourceOnError=function(t){d(),ow(e,t)}};var aw="3.10.0";const sw={PlaylistLoader:eb,Playlist:By,utils:pb,STANDARD_PLAYLIST_SELECTOR:e_,INITIAL_PLAYLIST_SELECTOR:function(){const e=this.playlists.main.playlists.filter(By.isEnabled);return Yb(e,((e,t)=>Qb(e,t))),e.filter((e=>!!Gb(this.playlists.main,e).video))[0]||null},lastBandwidthSelector:e_,movingAverageBandwidthSelector:function(e){let t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const r=this.useDevicePixelRatio&&Vc().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Zb(this.playlists.main,t,parseInt(Kb(this.tech_.el(),"width"),10)*r,parseInt(Kb(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:Qb,comparePlaylistResolution:function(e,t){let n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Vc().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||Vc().Number.MAX_VALUE,n===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:rb()};Object.keys(wb).forEach((e=>{Object.defineProperty(sw,e,{get:()=>(ry.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),wb[e]),set(t){ry.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!=typeof t||t<0?ry.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):wb[e]=t}})}));const dw="videojs-vhs",lw=function(e,t){const n=t.media();let r=-1;for(let t=0;t<e.length;t++)if(e[t].id===n.id){r=t;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};sw.canPlaySource=function(){return ry.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const cw=()=>{if(!Vc().localStorage)return null;const e=Vc().localStorage.getItem(dw);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},uw=(e,t)=>{e._requestCallbackSet||(e._requestCallbackSet=new Set),e._requestCallbackSet.add(t)},pw=(e,t)=>{e._responseCallbackSet||(e._responseCallbackSet=new Set),e._responseCallbackSet.add(t)},hw=(e,t)=>{e._requestCallbackSet&&(e._requestCallbackSet.delete(t),e._requestCallbackSet.size||delete e._requestCallbackSet)},fw=(e,t)=>{e._responseCallbackSet&&(e._responseCallbackSet.delete(t),e._responseCallbackSet.size||delete e._responseCallbackSet)};sw.supportsNativeHls=function(){if(!$c()||!$c().createElement)return!1;const e=$c().createElement("video");return!!ry.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),sw.supportsNativeDash=!!($c()&&$c().createElement&&ry.getTech("Html5").isSupported())&&/maybe|probably/i.test($c().createElement("video").canPlayType("application/dash+xml")),sw.supportsTypeNatively=e=>"hls"===e?sw.supportsNativeHls:"dash"===e&&sw.supportsNativeDash,sw.isSupported=function(){return ry.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},sw.xhr.onRequest=function(e){uw(sw.xhr,e)},sw.xhr.onResponse=function(e){pw(sw.xhr,e)},sw.xhr.offRequest=function(e){hw(sw.xhr,e)},sw.xhr.offResponse=function(e){fw(sw.xhr,e)};const gw=ry.getComponent("Component");class mw extends gw{constructor(e,t,n){if(super(t,n.vhs),"number"==typeof n.initialBandwidth&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=cy("VhsHandler"),t.options_&&t.options_.playerId){const e=ry.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on($c(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(e=>{const t=$c().fullscreenElement||$c().webkitFullscreenElement||$c().mozFullScreenElement||$c().msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=uy(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=cw();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=wb.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===wb.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((e=>{void 0!==this.source_[e]&&(this.options_[e]=this.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=sw,this.options_.sourceType=Cu(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.playlistController_=new ew(this.options_);const r=uy({liveRangeSafeTimeDelta:fy},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new rw(r),this.playlistController_.on("error",(()=>{const e=ry.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));const i=this.options_.bufferBasedABR?sw.movingAverageBandwidthSelector(.55):sw.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=sw.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=Vc().navigator.connection||Vc().navigator.mozConnection||Vc().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){const r=1e3*t.downlink*1e3;e=r>=n&&e>=n?Math.max(e,r):r}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set(){ry.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>by(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>by(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(()=>{this.options_.useBandwidthFromLocalStorage&&(e=>{if(!Vc().localStorage)return!1;let t=cw();t=t?uy(t,e):e;try{Vc().localStorage.setItem(dw,JSON.stringify(t))}catch(e){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})})),this.playlistController_.on("selectedinitialmedia",(()=>{var e;(e=this).representations=()=>{const t=e.playlistController_.main(),n=Ly(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((e=>!Dy(e))).map(((t,n)=>new tw(e,t,t.id))):[]}})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(()=>{this.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Vc().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:e,sourceKeySystems:t,audioMedia:n,mainPlaylists:r})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const i=(s=n?r.concat([n]):r,d=Object.keys(t),s.reduce(((e,t)=>{if(!t.contentProtection)return e;const n=d.reduce(((e,n)=>{const r=t.contentProtection[n];return r&&r.pssh&&(e[n]={pssh:r.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),o=[],a=[];var s,d;return i.forEach((t=>{a.push(new Promise(((t,n)=>{e.tech_.one("keysessioncreated",t)}))),o.push(new Promise(((n,r)=>{e.eme.initializeMediaKeys({keySystems:t},(e=>{e?r(e):n()}))})))})),Promise.race([Promise.all(o),Promise.race(a)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then((()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()})).catch((e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=(({player:e,sourceKeySystems:t,media:n,audioMedia:r})=>{const i=((e,t,n)=>{if(!e)return e;let r={};t&&t.attributes&&t.attributes.CODECS&&(r=Wb(_u(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);const i=Su(r.video),o=Su(r.audio),a={};for(const n in e)a[n]={},o&&(a[n].audioContentType=o),i&&(a[n].videoContentType=i),t.contentProtection&&t.contentProtection[n]&&t.contentProtection[n].pssh&&(a[n].pssh=t.contentProtection[n].pssh),"string"==typeof e[n]&&(a[n].url=e[n]);return uy(e,a)})(t,n,r);return!(!i||(e.currentSource().keySystems=i,i&&!e.eme&&(ry.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",(e=>{this.playlistController_.updatePlaylistByKeyStatus(e.keyId,e.status)})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=ry.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(()=>{var e,t;e=this.qualityLevels_,(t=this).representations().forEach((t=>{e.addQualityLevel(t)})),lw(e,t.playlists)})),this.playlists.on("mediachange",(()=>{lw(this.qualityLevels_,this.playlists)})))}static version(){return{"@videojs/http-streaming":aw,"mux.js":"7.0.2","mpd-parser":"1.3.0","m3u8-parser":"7.1.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return O_.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Vc().URL.revokeObjectURL&&(Vc().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return(({playlist:e,time:t,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return n({message:"getProgramTime: playlist and time must be provided"});const r=((e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let n,r=0;for(let i=0;i<t.segments.length&&(n=t.segments[i],r=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration,!(e<=r));i++);const i=t.segments[t.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*i.duration)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}})(t,e);if(!r)return n({message:"valid programTime was not found"});if("estimate"===r.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const i={mediaSeconds:t},o=((e,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)})(t,r.segment);return o&&(i.programDateTime=o.toISOString()),n(null,i)})({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,r=2){return hb({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{uw(this.xhr,e)},this.xhr.onResponse=e=>{pw(this.xhr,e)},this.xhr.offRequest=e=>{hw(this.xhr,e)},this.xhr.offResponse=e=>{fw(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const vw={name:"videojs-http-streaming",VERSION:aw,canHandleSource(e,t={}){const n=uy(ry.options,t);return vw.canPlayType(e.type,n)},handleSource(e,t,n={}){const r=uy(ry.options,n);return t.vhs=new mw(e,t,r),t.vhs.xhr=rb(),t.vhs.setupXhrHooks_(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){const n=Cu(e);if(!n)return"";const r=vw.getOverrideNative(t);return!sw.supportsTypeNatively(n)||r?"maybe":""},getOverrideNative(e={}){const{vhs:t={}}=e,n=!(ry.browser.IS_ANY_SAFARI||ry.browser.IS_IOS),{overrideNative:r=n}=t;return r}};Tu("avc1.4d400d,mp4a.40.2")&&ry.getTech("Html5").registerSourceHandler(vw,0),ry.VhsHandler=mw,ry.VhsSourceHandler=vw,ry.Vhs=sw,ry.use||ry.registerComponent("Vhs",sw),ry.options.vhs=ry.options.vhs||{},ry.getPlugin&&ry.getPlugin("reloadSourceOnError")||ry.registerPlugin("reloadSourceOnError",(function(e){ow(this,e)}));var yw="7.3.2",bw=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},_w=function(e,t,n){bw(0,n),e.trigger({type:t+n.type,originalEvent:n})};function ww(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&_w(e,"content",t):_w(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(bw(0,t),e.trigger("resumeended")):_w(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(_w(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())_w(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;_w(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?_w(e,"ad",t):e.ads.isContentResuming()&&_w(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?_w(this,"content",e):_w(this,"ad",e))}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sw.apply(this,arguments)}function Tw(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Iw(e,t)}function Iw(e,t){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iw(e,t)}var kw={},Aw=function(){!function(e){if(ry.dom.isInFrame()&&"function"!=typeof Vc().__tcfapi){for(var t,n=Vc(),r={};n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(e){}if(n===Vc().top)break;n=n.parent}if(!t)return;Vc().__tcfapi=function(e,n,i,o){var a=Math.random()+"",s={__tcfapiCall:{command:e,parameter:o,version:n,callId:a}};r[a]=i,t.postMessage(s,"*")},Vc().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof r[n.callId]&&(r[n.callId](n.returnValue,n.success),r[n.callId]=null)}),!1)}}(),"function"==typeof Vc().__tcfapi&&Vc().__tcfapi("addEventListener",2,(function(e,t){t&&(kw=e)}))},Ew="",Cw=function(e,t){if(void 0===t&&(t=Vc()),t.__uspapi)t.__uspapi("getUSPData",1,(function(t,n){var r=n?t.uspString:null;Ew=r,e(r)}));else{var n=function(e){for(var t=e.parent;t!==e.top;){try{if(t.frames&&t.frames.__uspapiLocator)return t}catch(e){}t=t.parent}try{if(e.top.frames&&e.top.frames.__uspapiLocator)return e.top}catch(e){}return null}(t);if(!n)return void e(null);var r=Math.random().toString(36).substring(2),i={__uspapiCall:{command:"getUSPData",version:1,callId:r}};t.addEventListener("message",(function n(i){if(i&&i.data&&i.data.__uspapiReturn&&i.data.__uspapiReturn.callId===r){t.removeEventListener("message",n,!1);var o=i.data.__uspapiReturn,a=o.returnValue,s=o.success?a.uspString:null;Ew=s,e(s)}}),!1),n.postMessage(i,"*")}},xw=function(e,t){return t?encodeURIComponent(e):e},Ow=function(e,t,n,r){for(var i in void 0===r&&(r={}),t){var o=r.hasOwnProperty(i)?r[i]:i;if(o.startsWith("r:"))try{var a=new RegExp(o.slice(2),"g");e=e.replace(a,xw(t[i],n))}catch(e){ry.log.warn('Unable to replace macro with regex "'+o+'". The provided regex may be invalid.')}else e=e.split(o).join(xw(t[i],n))}return e};function Pw(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});var r=n.disableDefaultMacros||!1,i=n.macroNameOverrides||{};delete n.disableDefaultMacros,delete n.macroNameOverrides;var o=n;if(r)return Ow(e,o,t,i);var a,s,d,l=function(e){var t={},n=e.replace(/{([^}=]+)=([^}]*)}/g,(function(e,n,r){return t["{"+n+"}"]=r,"{"+n+"}"}));return{defaults:t,modifiedString:n}}(e),c=l.defaults,u=l.modifiedString;for(var p in e=u,Sw(o,{"{player.id}":(d=this).options_["data-player"]||d.id_,"{player.height}":d.currentHeight(),"{player.width}":d.currentWidth(),"{player.heightInt}":Math.round(d.currentHeight()),"{player.widthInt}":Math.round(d.currentWidth()),"{player.autoplay}":d.autoplay()?1:0,"{player.muted}":d.muted()?1:0,"{player.language}":d.language()||"","{mediainfo.id}":d.mediainfo?d.mediainfo.id:"","{mediainfo.name}":d.mediainfo?d.mediainfo.name:"","{mediainfo.duration}":d.mediainfo?d.mediainfo.duration:"","{player.duration}":d.duration(),"{player.durationInt}":Math.round(d.duration()),"{player.live}":d.duration()===1/0?1:0,"{player.pageUrl}":ry.dom.isInFrame()?$c().referrer:Vc().location.href,"{playlistinfo.id}":d.playlistinfo?d.playlistinfo.id:"","{playlistinfo.name}":d.playlistinfo?d.playlistinfo.name:"","{timestamp}":(new Date).getTime(),"{document.referrer}":$c().referrer,"{window.location.href}":Vc().location.href,"{random}":Math.floor(1e12*Math.random())},function(e,t){var n={};return["description","tags","reference_id","ad_keys"].forEach((function(r){e&&e[r]?n["{mediainfo."+r+"}"]=e[r]:t["{mediainfo."+r+"}"]?n["{mediainfo."+r+"}"]=t["{mediainfo."+r+"}"]:n["{mediainfo."+r+"}"]=""})),["custom_fields","customFields"].forEach((function(t){!function(e,t,n){if(e&&e[n])for(var r=e[n],i=Object.keys(r),o=0;o<i.length;o++)t["{mediainfo."+n+"."+i[o]+"}"]=r[i[o]]}(e,n,t)})),n}(this.mediainfo,c),(a=kw,s={},Object.keys(a).forEach((function(e){s["{tcf."+e+"}"]=a[e]})),s["{tcf.gdprAppliesInt}"]=a.gdprApplies?1:0,s),{"{usp.uspString}":Ew},function(e,t,n){var r=new RegExp("{pageVariable\\.([^}]+)}","g"),i={},o=(e.match(r)||[]).concat(Object.keys(n).filter((function(t){return r.test(t)&&e.includes(n[t])})));if(o)return o.forEach((function(e){for(var n,r=e,o=e.slice(14,-1),a=o.split("."),s=Vc(),d=0;d<a.length;d++)if(d===a.length-1)n=s[a[d]];else if(void 0===(s=s[a[d]]))break;var l=typeof n;null===n?i[r]="null":void 0===n?t[r]?i[r]=t[r]:(ry.log.warn('Page variable "'+o+'" not found'),i[r]=""):"string"!==l&&"number"!==l&&"boolean"!==l?(ry.log.warn('Page variable "'+o+'" is not a supported type'),i[r]=""):i[r]=n})),i}(e,c,i)),e=Ow(e,o,t,i),c)e=e.replace(p,c[p]);return e}var Dw={processMetadataTracks:function(e,t){for(var n=e.textTracks(),r=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},i=0;i<n.length;i++)r(n[i]);n.addEventListener("addtrack",(function(e){r(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},Rw=function(e,t){return void 0!==t&&e.ads.includedCues[t]},jw=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function Mw(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}Dw.processAdTrack=function(e,t,n,r){e.ads.includedCues={};for(var i=0;i<t.length;i++){var o=t[i],a=this.getSupportedAdCue(e,o);if(!this.isSupportedAdCue(e,o))return void ry.log.warn("Skipping as this is not a supported ad cue.",o);var s=this.getCueId(e,o),d=o.startTime;if(Rw(e,s))return void ry.log("Skipping ad already seen with ID "+s);r&&r(e,a,s,d),n(e,a,s,d),jw(e,s)}};var Nw={},Uw=ry;Nw.isMiddlewareMediatorSupported=function(){return!Uw.browser.IS_IOS&&!Uw.browser.IS_ANDROID&&!!(Uw.use&&Uw.middleware&&Uw.middleware.TERMINATOR)},Nw.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,Uw.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch((function(t){"NotAllowedError"!==t.name||ry.browser.IS_SAFARI||e.trigger("pause")}))}}},Nw.testHook=function(e){Uw=e};var Lw=Nw.playMiddleware,Bw=Nw.isMiddlewareMediatorSupported,qw=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),Fw=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n.init.apply(n,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){ry.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onAdSkipped=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){ry.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){ry.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){ry.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){ry.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"ads-ad-skipped"===e?this.onAdSkipped(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();qw.registerState("State",Fw);var Vw=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}Tw(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=qw.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=qw.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(Fw);qw.registerState("AdState",Vw);var zw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=qw.getState("BeforePreroll"),n=qw.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(Fw);qw.registerState("ContentState",zw);var $w,Ww=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){ry.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(qw.getState("ContentState"));qw.registerState("AdsDone",Ww);var Hw=function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=ry.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),r=e.textTracks?e.textTracks():[],i=[],o={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(o.style=n.getAttribute("style"));for(var a=0;a<r.length;a++){var s=r[a];i.push({track:s,mode:s.mode}),s.mode="disabled"}return o.suppressedTracks=i,o}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster(),e.ads.preAdPlaybackRate_=e.playbackRate(),e.playbackRate(1),e.controlBar&&e.controlBar.playbackRateMenuButton&&e.controlBar.playbackRateMenuButton.playbackRateSupported&&!e.controlBar.playbackRateMenuButton.hasClass("vjs-hidden")?(e.controlBar.playbackRateMenuButton.hide(),e.ads.showPlaybackMenuOnAdEnd_=!0):e.ads.showPlaybackMenuOnAdEnd_=!1},Gw=function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var r,i=e.$(".vjs-tech"),o=20,a=n.suppressedTracks,s=function(){for(var e=0;e<a.length;e++)(r=a[e]).track.mode=r.mode},d=function(){var t;if(ry.browser.IS_IOS&&e.ads.isLive(e)){if(n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var r=e.play();r&&r.catch&&r.catch((function(e){ry.log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(n.ended)e.currentTime(e.duration());else{e.currentTime(n.currentTime);var i=e.play();i&&i.catch&&i.catch((function(e){ry.log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},l=function t(){if(e.off("contentcanplay",t),$w&&e.clearTimeout($w),(i=e.el().querySelector(".vjs-tech")).readyState>1)return d();if(void 0===i.seekable)return d();if(i.seekable.length>0)return d();if(o--)e.setTimeout(t,50);else try{d()}catch(e){ry.log.warn("Failed to resume the content after an advertisement",e)}};if("style"in n&&i.setAttribute("style",n.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",s),ry.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(n.sources),e.one("contentcanplay",l),$w=e.setTimeout(l,2e3);else{if(s(),!e.ended()){var c=e.play();c&&c.catch&&c.catch((function(e){ry.log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t()),e.playbackRate(e.ads.preAdPlaybackRate_),e.ads.showPlaybackMenuOnAdEnd_&&e.controlBar.playbackRateMenuButton.show()},Xw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(r=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),r),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?ry.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.onAdsError=function(e){var t=this;ry.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?ry.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,Hw(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,Gw(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?ry.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},n.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?ry.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||ry.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(qw.getState("AdState"));qw.registerState("Preroll",Xw);var Jw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=qw.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(qw.getState("ContentState"));qw.registerState("BeforePreroll",Jw);var Kw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",Hw(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),Gw(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(qw.getState("AdState"));qw.registerState("Midroll",Kw);var Yw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=qw.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?ry.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,Hw(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=qw.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),Gw(t,(function(){e.transitionTo(n)})))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?ry.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=qw.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=qw.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?ry.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=qw.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(qw.getState("AdState"));qw.registerState("Postroll",Yw);var Qw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=qw.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=qw.getState("Midroll");this.transitionTo(e)},t}(qw.getState("ContentState"));qw.registerState("ContentPlayback",Qw);var Zw=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=qw.getState("StitchedAdRoll");this.transitionTo(e)},t}(qw.getState("ContentState"));qw.registerState("StitchedContentPlayback",Zw);var eS=function(e){function t(){return e.apply(this,arguments)||this}Tw(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",Hw(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=qw.getState("StitchedContentPlayback");Gw(this.player),this.transitionTo(e)},t}(qw.getState("AdState"));qw.registerState("StitchedAdRoll",eS);var tS,nS=Nw.isMiddlewareMediatorSupported,rS=ry.getTech("Html5").Events,iS={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:ry.options.normalizeAutoplay||!1},oS=function(e){var t=this,n=ry.obj.merge(iS,e),r=[];rS.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),t.on(r,ww),nS()||function(e,t){t&&ry.log("Using cancelContentPlay to block content playback"),e.on("play",Mw)}(t,n.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||ry.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){ry.log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:yw,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(ry.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,n=e.currentSrc()!==this.snapshot.currentSrc;return t||n},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===ry.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!ry.browser.IS_IOS&&!ry.browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?ry.log("ADS: "+t[0]):ry.log.apply(ry,["ADS:"].concat(t))}}}}(t),t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(qw.getState("StitchedContentPlayback"))(t):t.ads._state=new(qw.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=Dw,t.ads.adMacroReplacement=Pw.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var i=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&ry.browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var r=e[n];"showing"===r.mode&&(r.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",i)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","ads-ad-skipped","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",i)})),Aw(),Cw((function(){})),t.ads.listenToTcf=Aw,t.ads.updateUsPrivacyString=function(e){return Cw(e)}};function aS(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function sS(e){return sS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sS(e)}function dS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aS(r.key),r)}}function cS(e,t,n){return t&&lS(e.prototype,t),n&&lS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oS.VERSION=yw,tS=oS,!function(){if(ry.getPlugin)return Boolean(ry.getPlugin("ads"));var e=ry.getComponent("Player");return Boolean(e&&e.prototype.ads)}()&&((ry.registerPlugin||ry.plugin)("ads",tS),Bw()&&!ry.usingContribAdsMiddleware_&&(ry.use("*",Lw),ry.usingContribAdsMiddleware_=!0,ry.log.debug("Play middleware has been registered with videojs")));var pS=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads||window.console.warn("You may be using a version of videojs-contrib-ads that is not compatible with your version of video.js."),this.vjsPlayer.ads(t)};pS.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle&&clearInterval(this.updateTimeIntervalHandle),this.seekCheckIntervalHandle&&clearInterval(this.seekCheckIntervalHandle),this.resizeCheckIntervalHandle&&clearInterval(this.resizeCheckIntervalHandle),this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},pS.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},pS.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},pS.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},pS.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},pS.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},pS.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},pS.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},pS.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},pS.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},pS.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},pS.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},pS.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},pS.prototype.getContentPlayer=function(){return this.h5Player},pS.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},pS.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},pS.prototype.unmute=function(){this.vjsPlayer.muted(!1)},pS.prototype.mute=function(){this.vjsPlayer.muted(!0)},pS.prototype.play=function(){this.vjsPlayer.play()},pS.prototype.togglePlayback=function(){this.vjsPlayer.paused()?this.vjsPlayer.play():this.vjsPlayer.pause()},pS.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},pS.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},pS.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},pS.prototype.getPlayerId=function(){return this.vjsPlayer.id()},pS.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},pS.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},pS.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},pS.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},pS.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},pS.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},pS.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},pS.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},pS.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},pS.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},pS.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},pS.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},pS.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},pS.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var hS=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContainer()};hS.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.adContainerDiv.addEventListener("click",this.onAdContainerClick.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},hS.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},hS.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},hS.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},hS.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},hS.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},hS.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},hS.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},hS.prototype.updateAdUi=function(e,t,n,r,i){var o=Math.floor(t/60),a=Math.floor(t%60);a.toString().length<2&&(a="0"+a);var s=": ";i>1&&(s=" ("+r+" "+this.controller.getSettings().adLabelNofN+" "+i+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+o+":"+a;var d=e/n*100;this.progressDiv.style.width=d+"%"},hS.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},hS.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},hS.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},hS.prototype.onMouseMove=function(e){this.changeVolume(e)},hS.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},hS.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},hS.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},hS.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},hS.prototype.onAdContainerClick=function(){this.isAdNonlinear&&this.controller.togglePlayback()},hS.prototype.reset=function(){this.hideAdContainer()},hS.prototype.onAdError=function(){this.hideAdContainer()},hS.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},hS.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},hS.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},hS.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!1},hS.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!0},hS.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},hS.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},hS.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},hS.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},hS.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},hS.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},hS.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},hS.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},hS.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},hS.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},hS.prototype.getAdContainerDiv=function(){return this.adContainerDiv},hS.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var fS=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags)};fS.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion("2.3.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},fS.prototype.requestAds=function(){var e=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&window.console.warn("The additional setting `omidMode` has been removed. Use `omidVendorAccess` instead."),this.controller.getSettings().omidVendorAccess){e.omidAccessModeRules={};var t=this.controller.getSettings().omidVendorAccess;Object.keys(t).forEach((function(n){e.omidAccessModeRules[n]=t[n]}))}e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===sS(n)&&Object.keys(n).forEach((function(t){e[t]=n[t]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},fS.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},fS.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},fS.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},fS.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},fS.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},fS.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},fS.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},fS.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},fS.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},fS.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},fS.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},fS.prototype.onAdPaused=function(){this.controller.onAdsPaused()},fS.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},fS.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},fS.prototype.onAdLog=function(e){this.controller.onAdLog(e)},fS.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var r,i=0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},fS.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},fS.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},fS.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},fS.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},fS.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},fS.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},fS.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},fS.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},fS.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},fS.prototype.getCurrentAd=function(){return this.currentAd},fS.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},fS.prototype.isAdPlaying=function(){return this.adPlaying},fS.prototype.isAdMuted=function(){return this.adMuted},fS.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},fS.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},fS.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},fS.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},fS.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},fS.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},fS.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},fS.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},fS.prototype.getAdsManager=function(){return this.adsManager},fS.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var gS=function(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new pS(e,r,this),this.adUi=new hS(this),this.sdkImpl=new fS(this)};gS.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},gS.prototype.initWithSettings=function(e){this.settings=Object.assign({},gS.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},gS.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},gS.prototype.getSettings=function(){return this.settings},gS.prototype.getIsMobile=function(){return this.isMobile},gS.prototype.getIsIos=function(){return this.isIos},gS.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},gS.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},gS.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},gS.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},gS.prototype.requestAds=function(){this.sdkImpl.requestAds()},gS.prototype.setSetting=function(e,t){this.settings[e]=t},gS.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},gS.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},gS.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},gS.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},gS.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},gS.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},gS.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},gS.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},gS.prototype.showAdContainer=function(){this.adUi.showAdContainer()},gS.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},gS.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},gS.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},gS.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},gS.prototype.onAdPlayheadUpdated=function(e,t,n,r,i){this.adUi.updateAdUi(e,t,n,r,i)},gS.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},gS.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},gS.prototype.playContent=function(){this.playerWrapper.play()},gS.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},gS.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},gS.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},gS.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},gS.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},gS.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},gS.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},gS.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},gS.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},gS.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},gS.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},gS.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},gS.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},gS.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},gS.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},gS.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},gS.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},gS.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},gS.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},gS.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},gS.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},gS.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},gS.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},gS.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},gS.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},gS.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},gS.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},gS.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},gS.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},gS.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},gS.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},gS.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},gS.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},gS.prototype.togglePlayback=function(){this.playerWrapper.togglePlayback()},gS.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},gS.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},gS.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var mS=function(e,t,n){this.vjsPlayer=e,this.daiController=n,this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("pause",this.onPause.bind(this)),this.vjsPlayer.on("play",this.onPlay.bind(this)),this.vjsPlayer.on("seeked",this.onSeekEnd.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads||window.console.warn("You may be using a version of videojs-contrib-ads that is not compatible with your version of video.js."),this.vjsPlayer.ads(t)};mS.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.daiController.onPlayerDisposed()},mS.prototype.onPause=function(){this.daiController.isInAdBreak()&&this.vjsControls.show()},mS.prototype.onPlay=function(){this.daiController.isInAdBreak()&&this.vjsControls.hide()},mS.prototype.onSeekEnd=function(){this.daiController.onSeekEnd(this.vjsPlayer.currentTime())},mS.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.daiController.onPlayerReady()},mS.prototype.getStreamPlayer=function(){return this.h5Player},mS.prototype.getVjsPlayer=function(){return this.vjsPlayer},mS.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},mS.prototype.getPlayerId=function(){return this.vjsPlayer.id()},mS.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},mS.prototype.onAdBreakStart=function(){this.vjsControls.hide()},mS.prototype.onAdBreakEnd=function(){this.vjsControls.show()},mS.prototype.reset=function(){this.vjsControls.show()};var vS=function(e){this.daiController=e,this.streamPlayer=null,this.vjsPlayer=null,this.streamManager=null,this.uiSettings=new google.ima.dai.api.UiSettings,this.isAdBreak=!1,this.isSnapback=!1,this.snapForwardTime=0,this.timedMetadata,this.metadataLoaded={},this.SOURCE_TYPES={hls:"application/x-mpegURL",dash:"application/dash+xml"}};vS.prototype.initImaDai=function(){this.streamPlayer=this.daiController.getStreamPlayer(),this.vjsPlayer=this.daiController.getVjsPlayer(),this.createAdUiDiv(),this.daiController.getSettings().locale&&this.uiSettings.setLocale(this.daiController.getSettings().locale),this.streamManager=new google.ima.dai.api.StreamManager(this.streamPlayer,this.adUiDiv,this.uiSettings),this.streamPlayer.addEventListener("pause",this.onStreamPause),this.streamPlayer.addEventListener("play",this.onStreamPlay),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StreamManager:this.streamManager}),this.requestStream()},vS.prototype.onAddTrack=function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",(function(e){var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n.activeCues_);try{for(i.s();!(r=i.n()).done;){var o=r.value,a={};a[o.value.key]=o.value.data,t.streamManager.onTimedMetadata(a)}}catch(e){i.e(e)}finally{i.f()}})))},vS.prototype.createAdUiDiv=function(){var e=document.createElement("div");e.id="ad-ui",e.style.height="calc(100% - 3em)",this.streamPlayer.parentNode.appendChild(e),this.adUiDiv=e},vS.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},vS.prototype.onStreamPlay=function(){this.isAdBreak&&(this.adUiDiv.style.display="block")},vS.prototype.onSeekEnd=function(e){if("live"!==this.daiController.getSettings().streamType)if(this.isSnapback)this.isSnapback=!1;else{var t=this.streamManager.previousCuePointForStreamTime(e);t&&!t.played&&(this.isSnapback=!0,this.snapForwardTime=e,this.vjsPlayer.currentTime(t.start))}},vS.prototype.onStreamEvent=function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+e.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(e),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getSettings().fallbackStreamUrl);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="none",this.daiController.onAdBreakEnd(),this.snapForwardTime&&this.snapForwardTime>this.vjsPlayer.currentTime()&&(this.vjsPlayer.currentTime(this.snapForwardTime),this.snapForwardTime=0)}},vS.prototype.loadUrl=function(e){this.vjsPlayer.ready(function(){var t=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:e,type:this.SOURCE_TYPES[t]});var n=this.daiController.getSettings().bookmarkTime;if(n){var r=this.streamManager.streamTimeForContentTime(n);this.isSnapback=!0,this.vjsPlayer.currentTime(r)}}.bind(this))},vS.prototype.requestStream=function(){var e,t=this.daiController.getSettings().streamType;if("vod"===t?((e=new google.ima.dai.api.VODStreamRequest).contentSourceId=this.daiController.getSettings().cmsId,e.videoId=this.daiController.getSettings().videoId):"live"===t?(e=new google.ima.dai.api.LiveStreamRequest).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type selected"),e.format=this.daiController.getSettings().streamFormat,this.daiController.getSettings().apiKey&&(e.apiKey=this.daiController.getSettings().apiKey),this.daiController.getSettings().authToken&&(e.authToken=this.daiController.getSettings().authToken),this.daiController.getSettings().adTagParameters&&(e.adTagParameters=this.daiController.getSettings().adTagParameters),this.daiController.getSettings().streamActivityMonitorId&&(e.streamActivityMonitorId=this.daiController.getSettings().streamActivityMonitorId),this.daiController.getSettings().omidMode){e.omidAccessModeRules={};var n=this.daiController.getSettings().omidMode;n.FULL&&(e.omidAccessModeRules[google.ima.OmidAccessMode.FULL]=n.FULL),n.DOMAIN&&(e.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN]=n.DOMAIN),n.LIMITED&&(e.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED]=n.LIMITED)}this.streamManager.requestStream(e),this.vjsPlayer.trigger({type:"stream-request",StreamRequest:e})},vS.prototype.onPlayerReady=function(){this.initImaDai()},vS.prototype.onPlayerDisposed=function(){this.streamManager&&this.streamManager.reset()},vS.prototype.getStreamManager=function(){return this.StreamManager},vS.prototype.reset=function(){this.StreamManager&&this.StreamManager.reset()};var yS=function(e,t){this.inAdBreak=!1,this.settings={},this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new mS(e,r,this),this.sdkImpl=new vS(this)};yS.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,showControlsForJSAds:!0},yS.prototype.initWithSettings=function(e){this.settings=Object.assign({},yS.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},yS.prototype.warnAboutDeprecatedSettings=function(){var e=this;[].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.imaDai setting "+t+" is deprecated")}))},yS.prototype.getSettings=function(){return this.settings},yS.prototype.getIsMobile=function(){return this.isMobile},yS.prototype.getIsIos=function(){return this.isIos},yS.prototype.getStreamPlayer=function(){return this.playerWrapper.getStreamPlayer()},yS.prototype.getVjsPlayer=function(){return this.playerWrapper.getVjsPlayer()},yS.prototype.requestStream=function(){this.sdkImpl.requestStream()},yS.prototype.setSetting=function(e,t){this.settings[e]=t},yS.prototype.onErrorLoadingAds=function(e){this.playerWrapper.onAdError(e)},yS.prototype.onAdError=function(e){this.playerWrapper.onAdError(e)},yS.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},yS.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},yS.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},yS.prototype.isInAdBreak=function(){return this.inAdBreak},yS.prototype.onSeekEnd=function(e){this.sdkImpl.onSeekEnd(e)},yS.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},yS.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},yS.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},yS.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},yS.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},yS.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},yS.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var bS=function(e,t){this.controller=new gS(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)},_S=function(e,t){this.controller=new yS(e,t),this.streamEndedListener=function(e){this.controller.addStreamEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},wS=cS((function e(t,n){dS(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?(this.streamFormat=t,this.assetKey=n):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")})),SS=cS((function e(t,n,r){dS(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?"string"==typeof r?(this.streamFormat=t,this.cmsId=n,this.videoId=r):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")})),TS=ry.registerPlugin||ry.plugin;function IS(e,t,n){e.on("timeupdate",i);const r=()=>e.off("timeupdate",i);return r;function i(){const i=Math.floor(e.currentTime()),o=i-t;o>=0&&o<2&&(r(),n(i))}}function kS(e){switch(e){case 0:default:return window.google.ima.ImaSdkSettings.VpaidMode.DISABLED;case 1:return window.google.ima.ImaSdkSettings.VpaidMode.ENABLED;case 2:return window.google.ima.ImaSdkSettings.VpaidMode.INSECURE}}TS("ima",(function(e){this.ima=new bS(this,e)})),TS("imaDai",(function(e,t){if(e instanceof wS)t.streamType="live",t.assetKey=e.assetKey;else{if(!(e instanceof SS))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");t.streamType="vod",t.cmsId=e.cmsId,t.videoId=e.videoId}t.streamFormat=e.streamFormat,this.imaDai=new _S(this,t)}));let AS=e=>{const t=e.playlist.autoadvance_;t.timeout&&e.clearTimeout(t.timeout),t.trigger&&e.off("ended",t.trigger),t.timeout=null,t.trigger=null};const ES=(e,t)=>{var n;AS(e),"number"==typeof(n=t)&&!isNaN(n)&&n>=0&&n<1/0?(e.playlist.autoadvance_.delay=t,e.playlist.autoadvance_.trigger=function(){const n=()=>ES(e,t);e.one("play",n),e.playlist.autoadvance_.timeout=e.setTimeout((()=>{AS(e),e.off("play",n),e.playlist.next()}),1e3*t)},e.one("ended",e.playlist.autoadvance_.trigger)):e.playlist.autoadvance_.delay=null};let CS=1;const xS=e=>{let t=e;return e&&"object"==typeof e||(t=Object(e),t.originalValue=e),t.playlistItemId_=CS++,t},OS=e=>e.map(xS),PS=(e,t)=>{let n=e,r=t;return"object"==typeof e&&(n=e.src),"object"==typeof t&&(r=t.src),/^\/\//.test(n)&&(r=r.slice(r.indexOf("//"))),/^\/\//.test(r)&&(n=n.slice(n.indexOf("//"))),n===r},DS=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].sources;if(Array.isArray(r))for(let e=0;e<r.length;e++){const i=r[e];if(i&&PS(i,t))return n}}return-1};const RS=function(e,t){!function(e,t,n=0){let r=null,i=!1;const o=e.playlist=(t,n=0)=>{if(i)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(t)){const a=Array.isArray(r)?r.slice():null;r=OS(t),i=!0,e.trigger({type:"duringplaylistchange",nextIndex:n,nextPlaylist:t,previousIndex:o.currentIndex_,previousPlaylist:a||[]}),i=!1,-1!==n&&o.currentItem(n),a&&e.setTimeout((()=>{e.trigger({type:"playlistchange",action:"change"})}),0)}return r.map((e=>e.originalValue||e))};e.on("loadstart",(()=>{-1===o.currentItem()&&AS(e)})),o.currentIndex_=-1,o.player_=e,o.autoadvance_={},o.repeat_=!1,o.currentPlaylistItemId_=null,o.currentItem=t=>{if(i)return o.currentIndex_;if("number"==typeof t&&o.currentIndex_!==t&&t>=0&&t<r.length)return o.currentIndex_=t,((e,t)=>{const n=!e.paused()||e.ended();e.trigger("beforeplaylistitem",t.originalValue||t),t.playlistItemId_&&(e.playlist.currentPlaylistItemId_=t.playlistItemId_),e.poster(t.poster||""),e.src(t.sources),(e=>{const t=e.remoteTextTracks();let n=t&&t.length||0;for(;n--;)e.removeRemoteTextTrack(t[n])})(e),e.ready((()=>{if((t.textTracks||[]).forEach(e.addRemoteTextTrack.bind(e)),e.trigger("playlistitem",t.originalValue||t),n){const t=e.play();void 0!==t&&"function"==typeof t.then&&t.then(null,(e=>{}))}ES(e,e.playlist.autoadvance_.delay)}))})(o.player_,r[o.currentIndex_]),t>0&&e.poster(""),o.currentIndex_;const n=o.player_.currentSrc()||"";if(o.currentPlaylistItemId_){const e=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].playlistItemId_===t)return n;return-1})(r,o.currentPlaylistItemId_),t=r[e];if(t&&Array.isArray(t.sources)&&DS([t],n)>-1)return o.currentIndex_=e,o.currentIndex_;o.currentPlaylistItemId_=null}return o.currentIndex_=o.indexOf(n),o.currentIndex_},o.add=(t,n)=>{if(i)throw new Error("cannot modify a playlist that is currently changing");("number"!=typeof n||n<0||n>r.length)&&(n=r.length),Array.isArray(t)||(t=[t]),r.splice(n,0,...OS(t)),e.trigger({type:"playlistchange",action:"add"}),e.trigger({type:"playlistadd",count:t.length,index:n})},o.remove=(t,n=1)=>{if(i)throw new Error("cannot modify a playlist that is currently changing");"number"!=typeof t||t<0||t>r.length||(r.splice(t,n),e.trigger({type:"playlistchange",action:"remove"}),e.trigger({type:"playlistremove",count:n,index:t}))},o.contains=e=>-1!==o.indexOf(e),o.indexOf=e=>{if("string"==typeof e)return DS(r,e);const t=Array.isArray(e)?e:e.sources;for(let e=0;e<t.length;e++){const n=t[e];if("string"==typeof n)return DS(r,n);if(n.src)return DS(r,n.src)}return-1},o.currentIndex=()=>o.currentItem(),o.lastIndex=()=>r.length-1,o.nextIndex=()=>{const e=o.currentItem();if(-1===e)return-1;const t=o.lastIndex();return o.repeat_&&e===t?0:Math.min(e+1,t)},o.previousIndex=()=>{const e=o.currentItem();return-1===e?-1:o.repeat_&&0===e?o.lastIndex():Math.max(e-1,0)},o.first=()=>{if(i)return;const e=o.currentItem(0);if(r.length)return r[e].originalValue||r[e];o.currentIndex_=-1},o.last=()=>{if(i)return;const e=o.currentItem(o.lastIndex());if(r.length)return r[e].originalValue||r[e];o.currentIndex_=-1},o.next=()=>{if(i)return;const e=o.nextIndex();if(e!==o.currentIndex_){const t=o.currentItem(e);return r[t].originalValue||r[t]}},o.previous=()=>{if(i)return;const e=o.previousIndex();if(e!==o.currentIndex_){const t=o.currentItem(e);return r[t].originalValue||r[t]}},o.autoadvance=e=>{ES(o.player_,e)},o.repeat=e=>void 0===e?o.repeat_:"boolean"==typeof e?(o.repeat_=!!e,o.repeat_):void ry.log.error("videojs-playlist: Invalid value for repeat",e),o.sort=t=>{r.length&&(r.sort(t),i||e.trigger("playlistsorted"))},o.reverse=()=>{r.length&&(r.reverse(),i||e.trigger("playlistsorted"))},o.shuffle=({rest:t}={})=>{let n=0,a=r;t&&(n=o.currentIndex_+1,a=r.slice(n)),a.length<=1||((e=>{let t=-1;const n=e.length-1;for(;++t<e.length;){const r=t+Math.floor(Math.random()*(n-t+1)),i=e[r];e[r]=e[t],e[t]=i}})(a),t&&r.splice(...[n,a.length].concat(a)),i||e.trigger("playlistsorted"))},Array.isArray(t)?o(t,n):r=[]}(this,e,t)};function jS(e){let{poster:t,items:n}=e;return(0,q.x1)((e=>!!e.url),(e=>({articleUrl:e.articleUrl,videoId:e.externalVideoIdent,headline:e.headline,poster:t,provider:e.source,sources:[{src:e.url,type:"video/mp4"}]})),n)}(ry.registerPlugin||ry.plugin)("playlist",RS),RS.VERSION="5.1.0";const MS={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},NS=ry.getComponent("Component"),US=ry.dom||ry,LS=ry.registerPlugin||ry.plugin,BS=e=>"number"==typeof e&&e==e,qS=e=>"string"==typeof e&&/^\S+$/.test(e);class FS extends NS{constructor(e,t){super(e,t),["start","end"].forEach((e=>{const t=this.options_[e];if(BS(t))this[e+"Event_"]="timeupdate";else if(qS(t))this[e+"Event_"]=t;else if("start"===e)throw new Error('invalid "start" option; expected number or string')})),["endListener_","rewindListener_","startListener_"].forEach((e=>{this[e]=t=>FS.prototype[e].call(this,t)})),"timeupdate"===this.startEvent_&&this.on(e,"timeupdate",this.rewindListener_),this.debug(`created, listening to "${this.startEvent_}" for "start" and "${this.endEvent_||"nothing"}" for "end"`),this.hide()}createEl(){const e=this.options_,t=e.content,n=e.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",r=US.createEl("div",{className:`\n        vjs-overlay\n        vjs-overlay-${e.align}\n        ${e.class}\n        ${n}\n        vjs-hidden\n      `});return"string"==typeof t?r.innerHTML=t:t instanceof Vc().DocumentFragment?r.appendChild(t):US.appendContent(r,t),r}debug(...e){if(!this.options_.debug)return;const t=ry.log;let n=t;t.hasOwnProperty(e[0])&&"function"==typeof t[e[0]]&&(n=t[e.shift()]),n(`overlay#${this.id()}: `,...e)}hide(){return super.hide(),this.debug("hidden"),this.debug(`bound \`startListener_\` to "${this.startEvent_}"`),this.endEvent_&&(this.debug(`unbound \`endListener_\` from "${this.endEvent_}"`),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this}shouldHide_(e,t){const n=this.options_.end;return BS(n)?e>=n:n===t}show(){return super.show(),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug(`unbound \`startListener_\` from "${this.startEvent_}"`),this.endEvent_&&(this.debug(`bound \`endListener_\` to "${this.endEvent_}"`),this.on(this.player(),this.endEvent_,this.endListener_)),this}shouldShow_(e,t){const n=this.options_.start,r=this.options_.end;return BS(n)?BS(r)?e>=n&&e<r:this.hasShownSinceSeek_?Math.floor(e)===n:(this.hasShownSinceSeek_=!0,e>=n):n===t}startListener_(e){const t=this.player().currentTime();this.shouldShow_(t,e.type)&&this.show()}endListener_(e){const t=this.player().currentTime();this.shouldHide_(t,e.type)&&this.hide()}rewindListener_(e){const t=this.player().currentTime(),n=this.previousTime_,r=this.options_.start,i=this.options_.end;t<n&&(this.debug("rewind detected"),BS(i)&&!this.shouldShow_(t)?(this.debug(`hiding; ${i} is an integer and overlay should not show at this time`),this.hasShownSinceSeek_=!1,this.hide()):qS(i)&&t<r&&(this.debug(`hiding; show point (${r}) is before now (${t}) and end point (${i}) is an event`),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=t}}ry.registerComponent("Overlay",FS);const VS=function(e){const t=this,n=ry.mergeOptions(MS,e);Array.isArray(this.overlays_)&&this.overlays_.forEach((e=>{this.removeChild(e),this.controlBar&&this.controlBar.removeChild(e),e.dispose()}));const r=n.overlays;delete n.overlays;const i=e=>e.map((e=>{const t=ry.mergeOptions(n,e),r="string"==typeof t.attachToControlBar||!0===t.attachToControlBar;if(!this.controls()||!this.controlBar)return this.addChild("overlay",t);if(r&&-1!==t.align.indexOf("bottom")){let e=this.controlBar.children()[0];if(void 0!==this.controlBar.getChild(t.attachToControlBar)&&(e=this.controlBar.getChild(t.attachToControlBar)),e){const n=this.controlBar.children().indexOf(e);return this.controlBar.addChild("overlay",t,n)}}const i=this.addChild("overlay",t);return this.el().insertBefore(i.el(),this.controlBar.el()),i}));return this.overlays_=i(r),{add:function(e){Array.isArray(e)||(e=[e]);const n=i(e);return t.overlays_=t.overlays_.concat(n),n},remove:function(e){const n=t.overlays_.indexOf(e);-1!==n?(e.el().parentNode.removeChild(e.el()),t.overlays_.splice(n,1)):t.log.warn("overlay does not exist and cannot be removed")},get:function(){return t.overlays_}}};function zS(e){let{log:t,player:n}=e;n.addClass("vjs-waiting"),aa({log:t,player:n}),t("adding spinner")}VS.VERSION="3.1.0",LS("overlay",VS);var $S=__webpack_require__(7296),WS=__webpack_require__.n($S);async function HS(e){let{parentElement:t,poster:n,videoId:r,width:i=445,height:o=250,id:a}=e;await(0,xe.untilBodyAvailable)();const s=document.createElement("div");return s.id=a,s.classList.add("hide"),s.classList.add("commercial-player"),s.innerHTML=WS()({poster:n,videoId:r,width:i,height:o}),t.appendChild(s),s}const GS={mpuPlayer:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("slotDescriptions.initial",{}).mpu_player;return i?e=>{const n=document.createElement("div");n.id="mpu_player_wrapper";const o=document.createElement("div");o.id="mpu_player",o.classList.add("adHolder"),n.appendChild(o),e.el().appendChild(n);const a=()=>{r("forcing pauseAndLoad"),zS({log:r,player:e})},s=(0,so.MR)(e,"adserror",(async()=>{const n=new so.jG;n.on(e,"play",a),n.on(e,"playing",a),t.emit("display mpu_player"),zS({log:r,player:e}),await async function(e){let{broker:t,mpuPlayerConfig:n,log:r,player:i}=e;return new Promise((e=>{const o="mpu_player",a=n?.bannerFallback?.displayTimeout||5e3,{id:s=o,parentId:d=o,pos:l=o}=n;t.once("ad rendered","mpu_player",(async n=>{let{isEmpty:o}=n;const s=i.el().parentNode;r("ad rendered"),o?r("ad empty"):(s.classList.add("mpu-ad-displayed"),await(0,P.wR)(a),s.classList.remove("mpu-ad-displayed")),t.emit("destroy slot","mpu_player"),e()})),t.emit("slot mounted",{id:s,parentId:d,pos:l})}))}({broker:t,mpuPlayerConfig:i,log:r,player:e}),n.dispose(),t.emit("destroy mpu_player"),e.removeClass("vjs-waiting"),r("resume player")}));e.on("dispose",s)}:()=>{}},closeButton:function(e){let{broker:t,getConfig:n,log:r}=e;const i="chromelessPlayer"===n("players.commercial.closeButton.style","commercialPlayer")?"commercial-player-close-chromeless":"commercial-player-close",o=n("players.commercial.closeButton.addAfterImpression",!1),a=n("players.commercial.closeButton.addAfterTimeout",6e4);return e=>{function n(){r("closing the player"),e.dispose(),t.emit("set slots enabled",["chromeless"],!1),t.emit("chromeless player closed"),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}r("adding");const s=__webpack_require__.g.MobileUtils?.isMobile()?"touchend":"click",d=e.addChild("button",{text:"Close"}),l=new so.jG;let c;const u=()=>{d.addClass(i),d.on(s,n),e.on("dispose",(()=>d.off(s,n))),l.dispose(),clearTimeout(c)};o?(()=>{const t=()=>{c||(n(),c=setTimeout((()=>{r("adding closebutton due to timeout"),u()}),a))},n=l.one(e,"playing",t);l.one(e,"adserror",u),l.one(e,"ads-manager",(n=>{let{adsManager:i}=n;l.addEventListener(i,__webpack_require__.g.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,u),l.addEventListener(i,__webpack_require__.g.google.ima.AdEvent.Type.SKIPPED,u),l.one(e,"ads-ad-started",(()=>{l.one(e,"playing",(()=>{r("playing, show close button"),u()}))})),t()}))})():u()}},creativeController:function(e){let{broker:t,log:n}=e;const r=new Promise((e=>{t.once("creative updated plugins",(t=>{((0,T.mQ)(t,"chromeless.dmplayer")&&!t["chromeless.dmplayer"]||(0,T.mQ)(t,"players.commercial")&&!t["players.commercial"])&&(n("plugin cancelled by creative"),e())}))}));return e=>{r.then((()=>{e.dispose()}))}},headline:function(e){let{broker:t,log:n}=e;return e=>{const r=__webpack_require__.g.MobileUtils?.isMobile()?"touchend":"click";let i,o,a,s,d=!0;function l(){d&&o&&i?c(i,o):!d&&o&&c("Read more",o)}function c(i,o){const d=i+o;d!==s&&(s=d,n(i,o),e.overlay({overlays:[{align:"top",class:"commercial-player-headline",content:i,start:"playing",end:"ended"}]}),function(i){if(a&&a(),i){const o=()=>{t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}}),location.href=i},s=e.$(".vjs-overlay");n("adding click event",{overlay:s,articleUrl:i}),e.on(s,r,o),a=()=>{n("removing click event",{overlay:s,articleUrl:i}),e.off(s,r,o)}}}(o))}c("",""),e.on("playlistitem",((e,t)=>{let{articleUrl:n,headline:r}=t;i=r,o=n,l()})),e.on("userinactive",(()=>{d=!1,l()})),e.on("useractive",(()=>{d=!0,l()}))}}};async function XS(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,parentElement:a=document.body,id:s="commercial-player",pos:d="jwplayer",plugins:l=[]}=e;const c=r("players.commercial.poster","//creative.dailymail.co.uk/videos/top-videos.jpg"),u=async function(e){let{log:t,poster:n,url:r,getConfig:i}=e;const o=i("players.commercial.playlist.version"),a=i("players.commercial.playlist.shuffle",!0),s=function(e,t){const n="DEV"===t?i("players.commercial.playlist.urlBase.local","https://localhost:8123/dist"):i("players.commercial.playlist.urlBase.remote","https://www.dailymail.co.uk/static/mol-adverts");return t?`${n}/${t}/topVideos.json`:e}(r,o),d=await async function(e){let{url:t,log:n}=e;n("fetching top videos",t);const r=await fetch(t),i=await r.json();return i[__webpack_require__.g.PageCriteria?.channel]||Object.values(i).flat()}({log:t,url:s}),l=a?(0,q.k4)(jS({items:d,poster:n})):jS({items:d,poster:n});return t(l),{applyPlaylist:function(e){t("applying playlist"),e.playlist(l),e.ima||(e.on("skip to next item",(()=>e.playlist.next())),e.on("skipt to previous item",(()=>e.playlist.previous())))},playlistItems:l}}({log:i.extend("playlist"),poster:c,url:r("players.commerical.playlistURL","https://secured.dailymail.co.uk/feeds/commercial/topVideos.json"),getConfig:r}),p=u.then((e=>{let{playlistItems:a}=e;return async function(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,playlist:a,pos:s}=e;const d=Date.now(),l=r("dfpAccountCode",5765),c=r(`videoDescription.${s}.midRolls`),u=r("players.commercial.adRoll",[]),p=u.find((e=>0===e.offset)),h=u.filter((e=>e.offset>0)),{pageLoadTimeout:f=5e3}=r("plugins.slots.jwplayer.v3",{}),g=r("auction.maxTime",2e3);let m=1;const v=p?k({...a[0],offset:p.offset,timeout:f}):Promise.resolve({});let y="",b=0;return{applyIMA:async function(e){if(i("initializing ads"),e.isDisposed())return;let o,l={};e.on("playlistitem",(function(){let t=!1;const n=new so.jG,r=i.extend("midroll").extend(`video ${m}`);function o(){r("disposing"),t=!0,n.dispose()}function s(t,n){const i=e.$(".vjs-progress-control.vjs-control .vjs-progress-holder"),o=document.createElement("div");return o.className="vjs-marker",o.style.left=`${Math.round(n/t*100)}%`,r({offset:n,videoDuration:t,"elem.style.left":o.style.left}),o.innerHTML='<div class="top"><p>Advertisement</p><i></i></div>',i.appendChild(o),o}async function d(n,i,o){if(t)return;r("time to build ad tag url",n);const a=y=_(e,{...n,adRollItem:i},await o,m);b=i.offset,t?r("dropping request as we've gone to the next video already"):(r("requesting ads",{src:n.sources[0].src,nextAdTagUrl:a}),e.ima.changeAdTag(a),e.ima.requestAds())}r("waiting for known duration"),n.one(e,"playing",(()=>{const t=e.duration();r("Setting up midrolls",{adRoll:u,filtered:h,mediaDuration:t});const o=c?Array.from({length:t/c.every},((e,n)=>{const r=(n+1)*c.every;return{offset:r===Math.floor(t)?r-1:r,pos:c.pos,cust_params:c.cust_params}})):h.map((e=>e.offset===Math.floor(t)?{...e,offset:e.offset-1}:e));i("_midRolls",o);for(const i of o){const{offset:o}=i;if(o>=t){r(`skipping midroll ${o}`);continue}const l=s(t,o),c=a[e.playlist.currentIndex()],u=k({...c,offset:o,timeout:g}).catch((e=>(r.error(e),{})));u.then((e=>r(`auction finished for midroll offset ${o}`,e)));const p=()=>l.remove();n.onDispose(p),n.add(IS(e,o,(()=>{e.pause(),p(),n.one(e,"adserror",(()=>{r("received adserror event, restarting player"),e.play()})),d(c,i,u).catch((e=>r.error(e)))})))}})),n.one(e,"playlistitem",o),n.one(e,"ended",o),n.one(e,"skip to next item",o),n.one(e,"skip to previous item",o)})),e.on("playlistitem",(0,I.$G)((()=>{++m,i({playNumber:m}),b=0}))),e.on("playlistitem",(function(){const t=new so.jG;function n(){t.dispose()}function s(){if(!p)return;const t=a[e.playlist.nextIndex()];i("time to build ad tag url",{nextItem:t}),o=k({...t,offset:p.offset,timeout:g},m+1)}t.one(e,"playing",(()=>{t.add(function(e,t){return isNaN(e.duration())?(e.one("loadeddata",t),()=>e.off("loadeddata",t)):(t(),()=>{})}(e,(()=>{t.add(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.on("timeupdate",i);const r=()=>e.off("timeupdate",i);return r;function i(){e.duration()-e.currentTime()<=n&&(r(),t())}}(e,s,Number(r("players.commercial.auction.secsFromEnd",e.duration()))))})))})),t.one(e,"playlistitem",n),t.one(e,"skip to next item",n),t.one(e,"skip to previous item",n)})),e.on("playlistitem",(0,I.$G)((function(t,n){if(!p)return;const r=y=_(e,{...n,adRollItem:p},l,m);o=void 0,l={},i("requesting ads",{src:n.sources[0].src,adTagUrl:r}),e.ima.setContentWithAdTag(n.sources[0].src,r),e.ima.requestAds()}))),await(0,P.Mi)((()=>__webpack_require__.g.google?.ima),50,1e4),e.ima({contribAdsSettings:{debug:i.enabled},adsRenderingSettings:{loadVideoTimeout:r("players.commercial.adsRenderSettings.loadVideoTimeout",15e3),restoreCustomPlaybackStateOnAdBreakComplete:!0},debug:i.enabled,disableFlashAds:!0,numRedirects:10,vpaidMode:kS(r("players.commercial.vpaidMode",1)),adsWillAutoplay:!0});const f=n.getElementById(`${e.id()}_video_html5_api`);async function v(){try{l=await o||{}}catch(e){i.error(e),l={}}finally{e.playlist.next()}}(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&f?.hasAttribute("controls")&&f?.removeAttribute("controls"),e.ima.initializeAdDisplayContainer(),e.on("adserror",(e=>{let{data:n}=e;const{AdErrorEvent:r}=n;if(void 0===r.getError)return;const o={adErrorCode:r.getError().getErrorCode()||r.getError().getVastErrorCode(),errorMessage:r.getError().getMessage(),offset:b,platform:"chromeless",playerId:s,trackingType:"chromeless"};i("adserror",o),t.emit("video.advert-failed",o),t.emit("video.no-ad-shown",o)})),t.on("bid request",s,((n,r)=>{t.emit("video.bid-request",{adSDK:"IMA",autoplay:!0,bidder:r.bidder,offset:b,platform:"chromeless",play:m,playerId:s,targeting:{pos:[r.pos]},timeSinceStartOfPlayer:Date.now()-d,userIds:r.userids,videoId:a[e.playlist.currentIndex()].videoId})})),e.on("ads-manager",(n=>{let{adsManager:r}=n;const o=i.extend("adsManager");o("created"),r.addEventListener(__webpack_require__.g.google.ima.AdEvent.Type.IMPRESSION,(n=>{const r=O(n.getAd());o("impression",r),t.emit("video.ad-impression",{adSDK:r.adSDK,adImpression:r,autoplay:!0,offset:b,platform:"chromeless",play:m,playerId:s,tag:y,targeting:{pos:[s]},timeSinceStartOfPlayer:Date.now()-d,videoId:a[e.playlist.currentIndex()].videoId})})),function(e,t){const n=new so.jG;n.one(e,"adserror",(()=>{n.dispose()})),n.one(e,"adplaying",(()=>{n.on(e,"volumechange",(()=>{e.muted()?t.setVolume(0):t.setVolume(e.volume())})),e.one("adended",(()=>{n.dispose()}))})),e.muted()&&t.setVolume(0)}(e,r)})),e.on("ended",v),e.on("skip to next item",v),e.on("skip to previous item",(async()=>{if(o=void 0,p)try{l=await k({...a[e.playlist.previousIndex()],offset:p.offset,timeout:g})||{}}catch(e){i.error(e),l={}}e.playlist.previous()}))},initAdRequest:function(e,t){if(i("initAdRequest"),!p)return Promise.resolve();const n=y=_(e,{...a[0],adRollItem:p},t,m);return i("setContentWithAdTag adTag",n),e.ima.setContentWithAdTag(a[0].sources[0].src,n),e.ima.requestAds(),new Promise((t=>{const n=new so.jG,r=()=>{i.timeEnd("ads-manager"),n.dispose(),t()};i("waiting for ads-manager event"),i.time("ads-manager"),n.one(e,"ads-manager",(()=>{i("received ads-manager event"),r()})),n.one(e,"adserror",(()=>{i("received adserror event"),r()}))}))},firstAuction:v};function _(e,t,n,a){let{articleUrl:d,headline:c,adRollItem:u,provider:p,videoId:h}=t;const f=r(`videoDescription.${s}.adUnit`,"dm.chromelessvideo"),g=e.muted(),m=e.duration()?Math.floor(e.duration()):void 0,{npa:v,rdp:y,...b}=U();v&&(b.npa=1),y&&(b.rdp=1);const _=m||0,T=S()({correlator:Date.now(),description_url:d,page_url:`${location.host}${location.pathname}`,env:"vp",gdfp_req:"1",impl:1,iu:`/${l}/${f}/${r("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros")}/${u.pos}`,output:"xml_vast4",scor:Date.now(),sz:"401x225",unviewed_position_start:"1",url:`${location.protocol}//${location.hostname}${location.pathname}`,vid:h,cust_params:{length:_>120?120:30*Math.floor(_/30),channel:o?.channel,oov:!document.hasFocus(),videoWidth:401,videoHeight:225,play:a,embed:!1,ttid:h,domain:"dailymail",flyaway:!1,s:"off",videoTitle:c,video:p,environment:"production",sz:"401x225",player:"jwplayer",vpmute:g,...u.cust_params}},n,b);m&&(T.vid_d=m);const I=new URL("https://pubads.g.doubleclick.net/gampad/ads");for(const[e,t]of Object.entries(T))e&&(i("adding",e,t),I.searchParams.set(e,w(t)));return i("adTag",I.toString()),I.toString()}function w(e){switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"1":"0";default:return new URLSearchParams(e).toString()}}async function k(e){let{articleUrl:n,videoId:r,offset:o=0,timeout:a=g}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;const l=i.extend(`video ${d}`);return l("getAsyncVideoTags",o),new Promise((e=>{let i={};M({args:{autoplay:!0,articleURL:n,muted:!0,videoId:r,offset:o,platform:"chromeless",pos:s,screen:{width:401,height:225},timeout:a},broker:t,observable:(t,n)=>{t?(l.error("error getting tags",t),e(i)):n?i=(0,T.x5)({...i,...n,cust_params:{...i.cust_params||{},...n.cust_params||{}}}):e(i)},log:l})}))}}({broker:t,doc:n,getConfig:r,log:i.extend("ima"),pageCriteria:o,playlist:a,pos:d})})),h=pa({broker:t,getConfig:r,log:i.extend("mediator"),pos:d}),f=h&&da({broker:t,getConfig:r,log:i.extend("mediator"),store:h}),g=function(e){let{log:t}=e;return e=>{t("adding");const n=__webpack_require__.g.MobileUtils?.isMobile()?"touchend":"click",r=e.addChild("component");r.addClass("commercial-player-big-controls"),r.hide(),e.one("playing",(()=>{r.show()}));const i=r.addChild("button",{text:"previous"});i.addClass("commercial-player-big-control"),i.addClass("commercial-player-previous"),i.on(n,(()=>e.trigger("skip to previous item")));const o=r.addChild("playToggle");o.addClass("commercial-player-big-control"),o.addClass("commercial-player-big-control"),o.on(n,(()=>e.trigger("play/pause toggle")));const a=r.addChild("button",{text:"Next"});a.addClass("commercial-player-big-control"),a.addClass("commercial-player-next"),a.on(n,(()=>e.trigger("skip to next item"))),e.on("playlistitem",(()=>{e.playlist.previousIndex()===e.playlist.currentIndex()?(t("disabling previous control"),i.disable()):i.enable()}))}}({log:i.extend("bigControls")}),m=(0,b.j1)()?.type,v=r("players.commercial.playUnmuted",!1)&&"navigate"===m&&""!==n.referrer,y=r("players.commercial.unMutedVolume",.03);i("playUnmuted",v),t.emit("send event to bidmax",{type:"custom",payload:{directReferrer:""===n.referrer,module:"commercialPlayer",performanceNavigationType:m||"unknown",playUnmuted:v}});const[_,w]=(0,x.w1)(r(`slotDescription.${d}.size`,[])),k=`${s}-container`,A=function(e){let{broker:t,log:n,container:r,poster:i,videoId:o,playMuted:a}=e;document.documentElement.classList.add("molads_chromeless_on"),n("instatiating videojs");const s=ry(o,{mediaLoader:!0,posterImage:!!i,textTrackDisplay:!0,loadingSpinner:!0,bigPlayButton:!1,liveTracker:!0,errorDisplay:!0,textTrackSettings:!0,resizeManager:!0,controlBar:{children:["currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","volumePanel","remainingTimeDisplay","fullscreenToggle"],pictureInPictureToggle:!1}});return s.el()._player=s,delete s.el().player,a?(n("player muted"),s.muted(!0)):n("player unmuted"),s.one("play",(()=>{r.classList.remove("hide")})),s.one("playing",(()=>{setTimeout((()=>{const e=document.getElementById(`${s.id()}_video_html5_api`);e&&(e.style.height="",e.style.width="")}))})),s.on("dispose",(()=>{r.remove()})),s}({broker:t,container:await HS({poster:c,videoId:k,parentElement:a,id:s,width:_,height:w}),log:i.extend("🏗"),poster:c,videoId:k,playMuted:!v});t.once("unmount commercial player",s,(()=>{A.dispose()})),l.forEach((e=>{GS[e]({broker:t,log:i.extend(e),getConfig:r})(A)}));const[{applyIMA:E,firstAuction:C,initAdRequest:D},{applyPlaylist:R}]=await Promise.all([p,u]);try{const e=E(A);g(A),i("waiting for firstAuction"),R(A),Promise.all([e,C]).then((e=>{let[,t]=e;return i("first auction complete"),D(A,t)})).catch(i.error).then((()=>{v?(i("setting volume",y),A.volume(y)):(i("muted autoplay"),A.autoplay("muted")),f?.(A).then((()=>{t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})}))})).catch(i.error)}catch(e){i.warn(e)}}function JS(e,t){return Object.keys(t("slots.enabled",{})).includes(e)}(0,We.F3)("api",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,getConfig:n,log:r,doc:i,pageCriteria:o}=e;!function(e){let{broker:t,getConfig:n}=e;t.on("api message","openCmpBanner",(function(){let{uiLevel:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.emit("openCmpBanner",{uiLevel:e})})),t.on("api message","adSlotMount",(e=>{let{id:r,pos:i}=e;const o=n(`slotDescription.${i}`);o?.slotTypes?.includes("connatix")&&t.emit("mount connatix",r)}))}({broker:t,getConfig:n}),t.on("api message","adSlotMount",(e=>{let{variant:r,position:i,pos:o,id:a,slotId:s,containerId:d}=e;const l=i||o,c=a||s;if(JS(l,n)){const e={pos:l,id:c,parentId:s,variant:r,containerId:d};t.emit("slot mounted",e)}})),t.on("api message","adSlotUnmount",(e=>{let{slotType:n,position:i}=e;r("adSlotUnmount",i),n?t.emit("destroy slot for type",n,{position:i}):t.emit("destroy slot",i)})),t.on("api message","adSlotUpdate",(e=>{let{position:i,slotId:o}=e;JS(i,n)&&(r("adSlotUpdate",{position:i,slotId:o}),t.emit("prepare to refresh ads",[i]),t.emit("refresh ads",{positions:[i],ids:[o],reason:"api message"}))})),t.on("api message","onAdRendered",(e=>{t.on("ad rendered",e)})),t.on("api message","onAdRequest",(e=>{t.on("dfp slot requested",e)})),t.on("api message","imageGalleryOpen",(()=>{r("imageGalleryOpen"),t.emit("image gallery open")})),t.on("api message","imageGalleryClose",(()=>{r("imageGalleryClose"),t.emit("image gallery close")})),t.on("api message","adBlockerDetection",(e=>{r("adBlockerDetection",e),t.emit("ad block detection result",e)})),t.on("api message","adBlockerDetectionStatus",(e=>{t.emit("adblock detection status",e)})),t.on("api message","takeover",(e=>{let{type:n,config:i}=e;r("takeover requested",n),t.emit("takeover",n,i)})),t.on("api message","loadIASVerificationPixel",(e=>{t.emit("loadIASVerificationPixel",e)})),t.on("api message","fullScreenOverlayStarted",(e=>{let{owner:n}=e;r("fullScreenOverlayStarted",n),t.emit("fullScreenOverlayStarted",n)})),t.on("api message","fullScreenOverlayEnded",(e=>{let{owner:n}=e;r("fullScreenOverlayEnded",n),t.emit("fullScreenOverlayEnded",n)}));const a={};t.on("api message","startActiveViewTrack",(e=>{let{handle:n,element:i,callback:o}=e;a[n]=t.once("ad viewable",n,(()=>{try{o()}catch(e){r.warn("error in callback for viewability tracker",n,e)}})),t.emit("track component viewability",n,i)})),t.on("api message","stopActiveViewTrack",(e=>{let{handle:n}=e;t.emit("untrack component viewability",n),a[n]?.cancel(),delete a[n]})),t.on("api message","checkVendor",(async e=>{const{vendorRegistry:n,vendorId:i,onConsent:o,onDissent:a,onError:s}=e;r("checkVendor",n,i);let d=!1;const l=(await t.invokeAll({message:["check vendor consent",e],catch:e=>{d=!0,s(e)}}))[0];if(!d){const{isConsented:e,errorMsg:t}=l||{};t?s(new Error(t)):e||void 0===l?o():a()}})),t.on("api message","getArticleImages",(e=>{t.emit("get article images",e)})),t.on("api message","commercialPlayerMount",(e=>{const{container:r,id:a,pos:s}=e;XS({broker:t,log:(0,_.h)("players.commercial").extend(s),doc:i,pageCriteria:o,parentElement:r,getConfig:n,id:a,pos:s})})),t.on("api message","commercialPlayerUnmount",(e=>{t.emit("unmount commercial player",e.id)})),t.on("api message","slotComponentRendered",(e=>{const{type:n}=e;t.emit("slotComponentRendered",n,e)}))}});const KS=e=>{let{broker:t}=e;const n=(0,v.Jt)("plugins.audienceProject.scriptSrc","https://sak.userreport.com/mol/launcher.js");t.invoke("import script",n,{id:"userreport-launcher-script"})};KS.vendorIds={gdpr:[394]},KS.purposeIds={gdpr:"N/A"};const YS=e=>t=>t.startsWith(e),QS=e=>t=>t.includes(e),ZS=[["Social|Instagram",(0,T._M)({referringUrl:QS("instagram.com")})],["Other Websites|MSN",(0,T._M)({referringUrl:QS("msn.com")})],["Social|Reddit",(0,T._M)({referringUrl:QS("reddit")})],["Other Websites|Upday",(0,T._M)({referringUrl:QS("axelspringer")})],["Other Websites|Break.ma",(0,T._M)({referringUrl:QS("break.ma")})],["Other Websites|Flipboard",(0,T._M)({referringUrl:QS("flipboard")})],["Other Websites|NewsNow",(0,T._M)({referringUrl:QS("newsnow")})],["Social|Pinterest",(0,T._M)({referringUrl:QS("pinterest")})],["Search|DuckDuckGO",(0,T._M)({referringUrl:QS("duckduckgo")})],["Search|Yahoo",(0,T._M)({referringUrl:QS("yahoo")})],["Other Websites|Drudgereport",(0,T._M)({referringUrl:QS("drudgereport")})],["Other Websites|Newzit",(0,T._M)({referringUrl:QS("newzit")})],["Social|Twitter",(0,T._M)({referringUrl:YS("https://t.co")})],["Search|Bing",(0,T._M)({referringUrl:QS("bing")})],["Search|Google App",(0,T._M)({referringUrl:QS("com.google")})],["Search|Google News",(0,T._M)({referringUrl:QS("news.google.com")})],["Search|Google Websearch",(0,T._M)({referringUrl:QS("google")})],["Social|Facebook",(0,T._M)({referringUrl:QS("facebook")})],["Push Channels|Push Notifications",(0,T._M)({itoExternalSession:YS("push-no")})],["Push Channels|Windows Widget",(0,T._M)({itoExternalSession:YS("windows-widget")})],["Direct|Direct",(0,T._M)({referringDomain:e=>"undefined"===e||"www.dailymail.co.uk"===e,itoExternalSession:("undefined",e=>"undefined"===e)})]];function eT(e){const[t]=ZS.find((t=>{let[n,r]=t;return r(e)}))||["Other Websites|Other Websites"];return t}(0,We.F3)("gpt-targeting.ga.referrer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,DM:n,getConfig:r,log:i}=e;const o=r("plugins.gptTargeting.ga.referrer.directHostNames",["dailymail.co.uk","a.dailymail.co.uk","b.dailymail.co.uk","c.dailymail.co.uk","dailymailint.co.uk","thisismoney.co.uk","thisismoneyint.co.uk"]),{hitReferral:a,sessionReferral:s}=r("plugins.gptTargeting.ga.referrer.trackCategories",{});n.molFeComponents.getConfig("molFeGAProps").then((e=>{i("gaProps",e);const{itoExternalSession:n,referrer:r,referringDomain:d,referringUrl:l}=e,c=eT({itoExternalSession:n,referringDomain:d,referringUrl:l}),u=co(r);i("referrer hostname",u);const p=o.includes(u?.replace?.(/^www\d?\./,""))||!r?"Direct|Direct":eT({itoExternalSession:n,referringDomain:u,referringUrl:r});if(i("ga targeting, session_referral:",c,"hit_referral:",p),a?.includes?.(p)||s?.includes?.(c)){const e={ga_ito:n,ga_rd:d,ga_ru:co(l),ga_r:co(r)};t.emit("send event to bidmax",{type:"custom",payload:{module:"ga",...e}}),i("tracking, hit_referral:",p,"session_referral:",c,"payload:",e)}t.emit("set page level targeting",{hit_referral:p,session_referral:c})}))},vendorIds:{gdpr:"N/A"}}),(0,We.F3)("houseAdsOnly",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,pageCriteria:i}=e;if(!i.firstArticleHasAdsDisabled)return void r("firstArticleHasAdsDisabled not enabled, bailing");const[o,a]=n("plugins.houseAdsOnly.keyvlaue",["code","red"]),s=n("plugins.houseAdsOnly.positions",[]);s.length?t.register("get tags",(e=>{let{slot:t}=e;const{pos:n}=t;if(s.includes(n))return r(`set ${n} targeting: ${o}=${a}`),{[o]:a}})):r("no positions configured, bailing")}});const tT={top:30,bottom:30};async function nT(e){let{broker:t,log:n,targetParagraphIndex:r,margin:i=tT,paragraphLoadingTimeout:o=3e3}=e;n("target paragraph index:",r);let a,s=r;__webpack_require__.g.PageCriteria.isMobile&&!__webpack_require__.g.PageCriteria.isTablet?(n("is a mobile"),a="#mobile-content > div > article"):(n("is not a mobile"),a='[itemprop="articleBody"]');const d=`${a} > :not(.mol-para-with-font):not(ad-slot:empty), ${a} > mol-permabox > :not(.mol-para-with-font)`;n("non-paragraph selector:",d);const l=e=>new Promise((n=>{const r=()=>{document.querySelector(`${a} > :nth-child(n + ${e} of .mol-para-with-font)`)&&(i.cancel(),clearInterval(o),n())},i=t.on("slot defined",r),o=setInterval(r,250);r()})),c=e=>{let{top:t,left:n,right:r}=e;return{top:t-i.top,bottom:t+i.bottom,left:n,right:r}};for(;;){n("awaiting",o,"millis for paragraph",s,"to be available"),await(0,P.tN)(o,l(s));const e=(u=s,Array.from(document.querySelectorAll(`${a} > :nth-child(n + ${u} of .mol-para-with-font)`)).map((e=>({paragraph:e,rect:e.getBoundingClientRect()}))));n(e.length,"paragraphs loaded so far");const t=Array.from(document.querySelectorAll(d)).map((e=>e.getBoundingClientRect()));n("there are",t.length,"non-paragraph elements in this article");let r=0;const i=e.find(((e,i)=>{let{rect:o}=e;r=s+i;const a=c(o),d=(l=a,t.find((e=>{return t=l,!((n=e).left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top);var t,n})));var l;return d?n("paragraph",s+i,"failed, ",a,"intersects with",d):n("paragraph",s+i,"seems suitable"),!d}));if(i)return[r,i.paragraph];s+=e.length,n("getting next batch of paragraph starting from",s)}var u}(0,We.F3)("page.placement",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n}=e;const r=(await t.invokeAll("placement requests")).flat();if(!r.length)return void n("No placement requests");const i=(0,q.Z)(r,"targetParagraphIndex");let o=i[0].targetParagraphIndex;n("sortedPlacementRequests",i);const a=i.map((e=>{let{sourcePlugin:t}=e;return t}));try{for(const e of i){const{sourcePlugin:n,targetParagraphIndex:r,insertMethod:i,log:s,margin:d}=e,l=Math.max(o,r),c={broker:t,log:s.extend("placement"),targetParagraphIndex:l,margin:d},u=await nT(c),[p,h]=u||[];if(t.emit("placement result",n,{target:r,placed:p}),!u)break;i(h),a.shift(),o=p}}catch(e){n(`unable to find placements for: ${a.join(", ")}`)}}}),(0,We.F3)("players.commercial",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,isHomepage:n,removePlugins:r}=e;r(["players.onlyOneActivePlayer","chromelessv2.dmplayer"]);const i=t("players.chromeless.dmplayer.v3.domainExclusions",[]),o=t("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),a=i.length&&(i.includes(__webpack_require__.g.location.hostname)||i.includes(__webpack_require__.g.location.hostname.replace(/www./,"")))||__webpack_require__.g.PageCriteria.articleId&&o.length&&o.includes(__webpack_require__.g.PageCriteria.articleId),s=t("players.chromeless.dmplayer.v3.enableWifiDetection",!1),d=navigator.connection&&"wifi"===navigator.connection.type;(a||no&&(!n||!no||"desktop"!==(0,b.Ri)("mol-home")&&"true"!==(0,b.Ri)("mol-desktop"))||s&&!d||!s&&no)&&r(["players.commercial"])},run:e=>XS({...e,plugins:["mpuPlayer","closeButton","creativeController","headline"]})}),(0,We.F3)("players.remixd",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.players.remixd.scriptUrl","//tags.remixd.com/player/v5/index.js"),o=n("plugin.player.remixd.paragraphIndex",5),a={insertMethod:async e=>{if(!e)return void t.emit("send event to bidmax",{type:"custom",payload:{event:"noPlacement",module:rT}});const n=function(e,t){const n={"remixd-player-complete":"complete","remixd-player-error":"error","remixd-player-impression":"impression","remixd-player-mute":"mute","remixd-player-pause":"pause","remixd-player-play":"play"},r=t.extend("event received");return(0,so.q2)(window,"message",(t=>{if(!t.data||"remixd"!==t.data.scope||!t.data.data)return;const i=t.data.data,o=i?.event,a=i?.error,s=n?.[o];s&&(r(t.data.data),e.emit("send event to bidmax",{type:"custom",payload:{event:s,module:rT,error:a}}))}))}(t,r);!function(e,t){const n=document.createElement("div");n.id="remixd-audio-player";const r=document.createElement("script");r.id="remixd-audio-player-script",r.src=e,r.async=!0,n.appendChild(r),t.parentElement.insertBefore(n,t)}(i,e);try{await(0,P.Mi)((()=>__webpack_require__.g._rmxd)),r("script loaded"),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoaded",module:rT}})}catch(e){r("error while loading",i,":",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoadErr",module:rT,error:e}}),n()}},log:r,margin:n("plugin.player.remixd.margin",{top:30,bottom:60}),sourcePlugin:"remixd",targetParagraphIndex:o};r("requesting placement",o),t.register("placement requests",(()=>a))},vendorIds:{gdpr:[768]}});const rT="remixd";(0,We.F3)("bidders.yahoossp.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.verizon.v2.display",{});t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})}));const o=Object.entries(i.adUnits).filter((e=>{let[t]=e;return!!n(`slotDescription.${t}`)})).map((e=>{let[t,r]=e;return{code:t,bids:[{bidder:"yahoossp",params:{dcn:i.dcn,pos:`${i.posPrefix}_${t}`}}],mediaTypes:{banner:{sizes:r?.sizes??n(`slotDescription.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o))}}),(0,We.F3)("bidders.yahoossp.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:r}=e;t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})})),t.register("provide video adUnits",((e,t,i)=>{const o=n("plugins.bidders.yahoossp.video",{});if(!o)return{};const a={code:e,bids:[{bidder:"yahoossp",params:{dcn:o.siteId,pos:"jwplayer"===e?o.adUnits[e][0===i?"preroll":"midroll"].placementId:"video"===e?o.adUnits[e][t?"ap":"ctp"].placementId:void 0}}]};return r.extend("ad unit")(a),a}))}}),(0,We.F3)("userId",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;const r=function(){const e="ads.user.id";let t=localStorage.getItem(e);return t||(t=(0,ma.A)(),localStorage.setItem(e,t)),t}();n("userId",r),t.register("provide userId",(()=>r)),t.emit("sync userId","bidmaxId",r,location.hostname)}}),(0,We.F3)("trackers.pubProvidedId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4]},vendorIds:{gdpr:"N/A"},run(e){let{broker:t,log:n}=e;t.register("provide prebid config",(async()=>{const e=await(0,P.G0)([],((e,t)=>[...e,...t]),[t.invokeAll("provide pub eids").then((e=>e.flat())),Promise.all([t.invoke("provide userId"),t.invoke("provide domain")]).then((e=>{let[t,n]=e;return[{source:n,uids:[{id:t,atype:1,ext:{stype:"ppuid"}}],atype:"ppuid"}]})).catch((e=>(n.warn(e.message),[])))]);return n({eids:e}),e.length?{userSyncConfig:{userIds:[{name:"pubProvidedId",params:{eids:e}}]}}:{}}))}}),(0,We.F3)("trackers.applePrivateRelay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,log:n,win:r}=e;n({applePrivateRelay:r.applePrivateRelay}),t.emit("set page level targeting",{applerelay:!!r.applePrivateRelay})}});const iT=["left","top","width","height"];function oT(e){if(!e)return;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);const t=e.id?`#${e.id}`:"",n=Array.from(e.classList||[]),r=n.length?`.${n.join(".")}`:"";return(t||r?"":`${oT(e.parentElement)} > `)+`${e.tagName.toLowerCase()}${t}${r}`}function aT(){try{return window.location.hash||"none"}catch(e){return"none"}}function sT(e,t,n){dT(e,t),t.set(e,n)}function dT(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lT(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,uT(t,e))}function cT(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,uT(t,e),n),n}function uT(e,t){return e.get(pT(e,t))}function pT(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(0,We.F3)("analytics.cwv.cls",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("analytics.cwv.cls.totalThreshold",.08),o=n("analytics.cwv.cls.entryThreshold",.01),a=n("analytics.cwv.cls.maxEntries",20),s=new Set(n("analytic.cwv.cls.slotsOfInterest",["billboard","billboard-oop","leader_top"])),d=n("analytic.cwv.cls.slotsShelfLife",5e3);r("config:",{totalThreshold:i,entryThreshold:o,maxEntries:a,interestingSlots:s,slotsShelfLife:d});const l=[],c=new Set;let u=[];t.on("ad rendered",((e,t)=>{let{isEmpty:n,lineItemId:r,creativeId:i,sourceAgnosticCreativeId:o,sourceAgnosticLineItemId:a}=t;!n&&s.has(e)&&u.push({time:Date.now(),pos:e,lineItemId:r||a,creativeId:i||o})})),__webpack_require__.g.DM.molFeWebVitals.webVitals.getCLS((e=>{let{entries:t}=e;for(const e of t){if(e.value<o||e.hadRecentInput||c.has(e))continue;c.add(e);const t=e.sources,i=t.length,a=t.map((e=>oT(e.node)));for(const o of t){const t=iT.filter((e=>o.currentRect[e]!==o.previousRect[e])),s=t.map((e=>`${e}: ${o.previousRect[e]}->${o.currentRect[e]}`)),c=oT(o.node),{before:p,after:f}=(n=o.node)?{before:n.previousElementSibling,next:n.nextElementSibling}:{};r("entry above threshold:",c,e.value,s);const g=Date.now()-d,m=u.filter((e=>e.time>=g)).map((e=>{let{pos:t,lineItemId:n,creativeId:r}=e;return`${t}=${n}/${r}`}));u=u.filter((e=>e.time<g)),r("recentPositions",m),l.push({type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"element",changes:s,selector:c,value:Math.round(1e3*e.value)/1e3,accomplicesCount:i-1,accomplices:a.filter((e=>e!==c)),clsHash:aT(),propertiesChanged:t,total:h,startTimeInSecs:Math.round(e.startTime/1e3),previous:oT(p),next:oT(f),recentPositions:m}})}}var n}),!0),await t.until("call for page-unload");const p=__webpack_require__.g.DM.molFeWebVitals.getUpdated(),h=Math.round(1e3*p.CLS)/1e3;if(p.CLS&&h>i){r("cls",h,"above threshold",i),r("cls entries:",l.length);const e=l.sort(((e,t)=>t.value-e.value)).slice(0,a),n=l.length>e.length;n&&r("too many entries, truncating it from",l.length,"to",e.length),t.emit("send event to bidmax",{type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"total",clsHash:aT(),value:h,heavyElements:e.length>0,truncatedEntries:n}}),e.forEach((e=>t.emit("send event to bidmax",e)))}}});var hT=new WeakMap,fT=new WeakMap,gT=new WeakMap,mT=new WeakMap,vT=new WeakSet;class yT{constructor(){let{events:e=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],throttleMs:t=1e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){dT(e,t),t.add(e)}(this,vT),sT(this,hT,{writable:!0,value:void 0}),sT(this,fT,{writable:!0,value:void 0}),sT(this,gT,{writable:!0,value:void 0}),sT(this,mT,{writable:!0,value:[]}),cT(this,hT,new so.jG),cT(this,fT,e),cT(this,gT,(0,I.Ai)(function(e,t,n){return pT(t,e),n}(this,vT,bT).bind(this),t))}start(){lT(this,fT).forEach((e=>{let[t,n]=e;t&&n.forEach((e=>{lT(this,hT).addEventListener(t,e,lT(this,gT))}))}))}stop(){lT(this,hT).dispose()}add(e){return lT(this,mT).push(e),()=>{this.remove(e)}}remove(e){cT(this,mT,(0,q.Ai)(e,lT(this,mT)))}whenActive(){return new Promise((e=>{const t=()=>{this.remove(t),e()};this.add(t)}))}}function bT(e){lT(this,mT).forEach((t=>t(e)))}(0,We.F3)("adPageType",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n,getConfig:r,log:i,adPageType:o}=e;i("running");const a=localStorage.getItem(_T);localStorage.removeItem(_T);const s=r("adPageType.usePageAdTypeOverride",!1);if(i(`autorefresh pageAutoRefreshStatus: ${a}, usePageAdTypeOverride: ${s}`),t.on("dom ready",(()=>{n.pageEvents.subscribe("page.autorefresh-event",(()=>{localStorage.setItem(_T,!0)}))})),!s||!a||"art"===o)return i("setting 'page' targeting to",o),void t.emit("set page level targeting",{page:o});i("setting 'page' targeting to hp_inactive"),t.emit("set page level targeting",{page:"hp_inactive"});const d=t.until("ad rendered"),l=new yT;l.whenActive().then((async()=>{l.stop(),await d,i("setting 'page' targeting to hp"),t.emit("set page level targeting",{page:"hp"})})),l.start()}});const _T="mol.ads.pageautorefresh";(0,We.F3)("takeovers.videowallpaper",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;function r(e){4===e.readyState?(e.muted=!0,e.play(),n("Video background play")):(n("Loading"),setTimeout((()=>r(e)),100))}t.on("takeover","videowallpaper",(e=>{t.emit("stop refreshing ads",{reason:"takeover"}),t.emit("disable chromeless-player"),t.emit("collapseAdByPos",["sky_left_top","sky_left_bottom","sky_right_top","sky_right_bottom"]);const{clickUrl:n,video:i}=e,o=wT(i.styles);(0,xe.appendStyle)(o);const a=document.createElement("template");a.innerHTML=IT.trim(),document.body.insertBefore(a.content,document.body.firstChild);const s=document.createElement("template");s.innerHTML=kT.trim();const d=document.getElementById("page-container");d.insertBefore(s.content.firstChild,d.firstChild);const l=TT(i);document.body.append(l),document.querySelector(".billboard-container").classList.remove("watermark");const c=ST(n);document.body.append(c),r(document.getElementById("backgroundvideo"))}))}});const wT=e=>{let{backupSkin:t,skinBGColor:n}=e;return`\n.fullscreen-bg {\n  background-image: url(${t});\n  background-size: contain;\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-color: ${n};\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: 1;\n}\n\n\n#billBoard {\n  background-color: transparent!important;\n  position: relative!important;\n  top: -30px !important;\n  box-shadow: none!important;\n  left: 0!important;\n}\n\n.cleared.lead-alpha, #content > .cleared {\n  background-color: #fff!important;\n}\n\n.articleWide {\n  background-color: #fff;\n}\n\n#top {\n  position: relative;\n  z-index: 2;\n}\n\nvideo#backgroundvideo {\n  position: fixed;\n  top: 0;\n  left: 50%;\n  min-width: 100%;\n  width: 100%;\n  height: auto;\n  z-index: -100;\n  animation: translate-video;\n  animation-fill-mode: forwards;\n}\n\n@keyframes translate-video {\n  to {\n    transform: translateX(-50%) translateY(0%);\n  }\n}\n\n.page-container-cover {\n  position: absolute;\n  width: 994px;\n  background: #fff;\n  z-index: 1;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  left: -16px;\n  right: 0;\n  top: 465px;\n}\n\n.page-header-cover {\n  position: absolute;\n  width: 994px;\n  height: 186px;\n  background: #fff;\n  left: 0;\n  right: 0;\n  z-index: 2;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n#content {\n  z-index: 1;\n  animation: shift-content-down 500ms;\n  animation-fill-mode: forwards;\n}\n\n@keyframes shift-content-down {\n  to {\n    transform: translateY(30px);\n  }\n}\n\n#ad_skinHolder {\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n`},ST=e=>{const t=document.createElement("template");return t.innerHTML=`\n      <a id="ad_skinHolder" href="${e}" target="_blank">\n        <div class="extra-static-skin"></div> \n      </a>\n    `.trim(),t.content},TT=e=>{let{attributes:t,sources:n}=e;const r=document.createElement("div");r.setAttribute("id","ad_video"),r.classList.add("fullscreen-bg"),r.setAttribute("post","");const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.id="backgroundvideo";const n=document.createElement("video");return Object.entries(e).forEach((e=>{let[t,r]=e;n.setAttribute(t,r)})),t.forEach((e=>{let{type:t,src:r}=e;const i=document.createElement("source");i.setAttribute("type",t),i.setAttribute("src",r),n.appendChild(i)})),n}(t,n);return r.appendChild(i),r},IT='<div class="page-header-cover"></div>',kT='<div class="page-container-cover"></div>';(0,We.F3)("site",{init:function(e){let{broker:t,log:n,setConfig:r,getConfig:i,DM:o,pageCriteria:a}=e;const s=i("site","mol");r("site",s),a&&(a.pageViewId=(0,D.zE)()),t.register("call for page analytics",(()=>({account:s}))),function(e,t,n){const r=(0,v.Jt)("tcfv2.enabled",!1),i="US"===e.geo,o=r&&"BR"===e.geo;n("cmp.model",(i?"ccpa":o&&"lgpd")||r&&"tcfv2"||void 0),n("cmp.shouldBeEnforced",i&&(0,v.Jt)("ccpa.consentManagementRegions",["CA","VA"]).some((t=>e.region===t))||r),n("cmp.keyNameForGPTVideoConsent",i?"rdp":"npa"),n("cmp.apiHandler",(i?"__uspapi":(r||o)&&"__tcfapi")||void 0),t("cmp:",(0,v.Jt)("cmp"))}(a,n,r),"object"==typeof o&&"function"==typeof o.getPageMetadata&&r("tcfv2.renderPlatform",i("tcfv2.renderPlatform",o.getPageMetadata?.()?.renderPlatform))},ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0});const AT=DM.molFeAsync;var ET=__webpack_require__(692);(0,We.F3)("skimlinks",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{getConfig:t}=e;const n=t("skimlinks",{enabled:!1});n.enabled&&(0,AT.later)("DOM_READY").then((()=>{const e=n.filename||CT();if(e){const t="//s.skimresources.com/js/"+e+".skimlinks.js",n=document.createElement("script"),r=document.querySelector("script");n.async=!0,n.src=t,r.parentNode.insertBefore(n,r)}})).catch((e=>{ET.logger.error("Error during skimlinks initialisation: ",e)}))},vendorIds:{gdpr:[46]}});const CT=()=>{const e=document.querySelector(".skimlinks");return null===e?null:e.getAttribute("data-tracking-id")};(0,We.F3)("slotDefinition",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,doc:n,getConfig:r,log:i}=e;const o=r("slots.enabled"),a=["gpt","gptOOP"];t.on("slot defined",(e=>{t.emit("update description",e.pos,e),a.some((t=>e.slotTypes.includes(t)))?(i("dispatching 'slot ready'",e.pos),t.emit("slot ready",e)):i("unsupported slot type, bailing",e.pos,e.slotTypes)})),t.on("slot mounted",(async e=>{const r=(0,ke.get)(e.pos);if(!o[e.pos])return void i("slot not enabled, bailing",e.pos);if(!r)return void i("unable to find description for slot, bailing",e);const a=xT(r,e);n.getElementById(a)||i.error(`Unknown element "#${a}"`);const{isTemplate:s,pos:d,regex:l,unitSuffix:c,...u}=r,p=u.unit&&c?`${u.unit}_${c}`:u.unit?u.unit:a,h=s&&l?{...OT(u),adUnit:(0,F.A)(p),dfpPos:d,id:a,isTemplate:s,pos:a,parentId:a,targeting:{puff_offset:new RegExp(l).exec(a)?.[1]}}:{...u,id:a,pos:"fff"===d?a:d};i("slotDefintion",h);try{await t.invoke("verify slot ready",h)}catch(e){i.warn(e)}n.getElementById(a)?(i("slot verified",h.pos),t.emit("slot defined",h)):i("slot no longer exists",h.pos)}))}});const xT=(e,t)=>t.id||e.id||t.containerId||t.pos+"_"+(new Date).getTime(),OT=e=>JSON.parse(JSON.stringify(e));function PT(e){const t=e("slotDescription",{});return e("plugins.adservers.openweb.slots",[]).filter((e=>e in t)).map((e=>[e,t[e]]))}(0,We.F3)("googlePPID",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,5,6,7,8,9,10]},run:function(e){let{broker:t,log:n}=e;n("running googlePPID");const r=t.invoke("provide userId");t.on("gpt initialized",(async e=>{const t=await r;n("setting googlePPID",t),e.pubads().setPublisherProvidedId(t)})),r.then((e=>{t.emit("sync video tags update",{ppid:e})}))},vendorIds:{gdpr:[755]}}),(0,We.F3)("adservers.openweb",{disableIfNoAdsServable:!0,init:function({getConfig:e,log:t,setConfig:n}){const r=PT(e);r.length?(t("enabled openwebSlots slots",r),r.forEach((([r,i])=>{i.slotTypes=["openweb"],i.earlyBidding=!1,t("setting",r,i),n(`slotDescription.${r}`,i),e("slotDescriptions.initial")&&(t("updating slotDescription.initial",r,i),n(`slotDescriptions.initial.${r}`,i))}))):t("no enabled openweb slots, bailing")},run:function({broker:e,getConfig:t,log:n}){const r=t("plugins.adservers.openweb.forceLoadBundle",!1),i=PT(t).map((([e])=>e));if(i.length){if(!__webpack_require__.g.window.PageCriteria.openwebEnabled||r){const n=t("plugins.adservers.openweb.scriptUrl","//launcher-sa.spot.im/spot/sp_jhHPoiRK");e.invoke("import script",n,{"data-spotim-autorun":"true","data-spotim-module":"spotim-launcher"})}n("enabled openweb slots",i),e.on("slot defined",(function(t){if(!i.includes(t.dfpPos||t.pos))return;n("slot defined",t.pos,t);const r=document.getElementById(t.id);if(!r)return void n("unabled to find element, bailing",t.pos,t.id);const o=t?.openweb?.dataset.column||"1";r.dataset.openwebAd="",r.dataset.row="1",r.dataset.column=o;try{!function(t){e.emit("send event to bidmax",{type:"custom",payload:{event:"slotDefined",module:"openweb",pos:t.pos}})}(t)}catch(e){console.warn(e)}try{(new Image).src="https://t.cdnopw.com/b.gif"}catch(e){console.warn(e)}try{!function(e){const t=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM?.molFeTracking?.pageEvents;t?t.AD_SLOT_LOADED_ON_PAGE?t.publish(t.AD_SLOT_LOADED_ON_PAGE,{slotType:e.slotTypes[0]}):n.warn("wrong version of fe-sync-bundle"):n.warn("no pageEvents")}(t)}catch(e){console.warn(e)}}))}else n("no enabled openweb slots, bailing")},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[280]}}),(0,We.F3)("modifiers.takeovers",{gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const r=t("__generated.modifiers.applied",[]).filter((e=>e.startsWith("campaigns.rules-linteItem-"))).map((e=>e.substring(26)));r.length?(n("liveTakeovers applied",r),e.register("call for page analytics",(()=>({takeoverLineItems:r})))):n("no takeovers applied, bailing")}}),(0,We.F3)("slots.display-handlers.skies",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const r=new Set(["sky_left_top","sky_right_top","sky_left_bottom","sky_right_bottom"].filter((e=>t(`slots.enabled.${e}`))));if(!b.Yw||!r.size)return void n("no supported slots, bailing");n("supported slots",r);const{cancel:i}=e.on("ad requested",(e=>{n("display",e),r.has(e)&&(document.documentElement.classList.add("has-skies"),i())}))}});var DT=__webpack_require__(6704),RT=__webpack_require__.n(DT);class jT{constructor({broker:e}){const t={};this.broker=e,t.auctions={},t.pendingStreams={},this.priv=t}_createPendingStreamForPosition(e){const t=this.broker.createReadObjectStream();return this.priv.pendingStreams[e]=t,t}_createAuctionForPositions(e,t){const n=(0,ma.A)(),r=e.reduce(((e,n)=>{const r=t?this._createPendingStreamForPosition(n):this.broker.createReadObjectStream();return r.bids=[],{...e,[n]:{stream:r,pos:n}}}),{});return this.priv.auctions[n]=r,{auctionId:n,positions:r}}createAuctionWithPendingStreams(e){return this._createAuctionForPositions(e,!0)}resolveStreamForPosition(e){let t={};if(this.priv.pendingStreams[e])t.stream=this.priv.pendingStreams[e],delete this.priv.pendingStreams[e];else{const n=this._createAuctionForPositions([e],!1);t={auctionId:n.auctionId,stream:n.positions[e].stream}}return t}createAuctionForAdUnitCode(e,t,n,r,i){const o=t||(0,ma.A)(),a=this.broker.createReadObjectStream();a.bids=[];const s={stream:a,offset:n,platform:r,pos:i};return this.priv.auctions[o]={[e]:s},{auctionId:o,positions:{[e]:s}}}getStreamForAdUnitCode(e,t){return this.priv.auctions[e]&&this.priv.auctions[e][t]||{}}dispose(e){const t=this.priv.auctions[e];t?(Object.values(t).forEach((({stream:e})=>{e.push(null),e.ended=!0})),delete this.priv.auctions[e]):console.error(`Unabled to find auctionId: ${e}`)}}function MT(e,t,n){return e.bidderSettings.standard.adserverTargeting.filter((e=>void 0===t[e.key])).map((e=>[e.key,e.val(n)])).filter((e=>{let[t,n]=e;return void 0!==n})).forEach((e=>{let[n,r]=e;return t[n]=r})),t}function NT(e,t){return Object.keys(t).reduce(((n,r)=>("hb_bidder"===r||(n[`${r}_${e}`.substring(0,20)]=t[r]),n)),{})}const UT=e=>JSON.parse(JSON.stringify(e));function LT(e){let t,{stream:n,log:r,bid:i,broker:o,pbjs:a,requestSizes:s,pos:d}=e;if(!(n.bids&&n.bids[i.bidderCode]&&(r(`auctionId: ${i.auctionId}, additional bid, adUnitCode: ${i.adUnitCode}, ${i.bidderCode}, cpm: ${i.cpm}, slotSize: ${i.size}`),n.bids[i.bidderCode].cpm>=i.cpm))){if(["video","jwplayer","ibv","verticalvideo"].includes(i.adUnitCode))r(`auctionId: ${i.auctionId}, bid caching not supported for slot: ${i.adUnitCode}`),n.highestBidder=n.highestBidder&&i.cpm<=n.highestBidder.cpm?n.highestBidder:i,t=n.highestBidder;else{const e=a.getHighestUnusedBidResponseForAdUnitCode(i.adUnitCode);r(`auctionId: ${i.auctionId}, bidResponse, adUnitCode: ${i.adUnitCode}, highestCachedBid: ${e&&e.bidderCode}, adId: ${e&&e.adId}, cpm: ${e&&e.cpm}, from auctionId: ${e.auctionId}`),t=e&&!(0,T.Im)(e)&&e.cpm>=i.cpm?e:i,r(`auctionId: ${i.auctionId}, bidResponse, adUnitCode: ${i.adUnitCode}, selected bidder isCached: ${i.auctionId!==t.auctionId},  bidderCode: ${t.bidderCode}, adId: ${t.adId}, cpm: ${t.cpm}`)}!function(e){let{broker:t,log:n,pbjs:r,stream:i,bidResponse:o,selectedBid:a,requestSizes:s,pos:d}=e;i.bids=i.bids||{},i.cachedBid=i.cachedBid||{},i.bids[o.bidderCode]=i.bids[o.bidderCode]||{};const l=MT(r,UT(a.adserverTargeting),a),c=NT(o.bidderCode,MT(r,UT(o.adserverTargeting),o)),u=a.auctionId!==o.auctionId?1:0;if(void 0===i.highestCpm&&(i.highestCpm=0),i.highestCpm=o.cpm>i.highestCpm?o.cpm:i.highestCpm,l.bc=u,l.bc_diff=(p=u?a.cpm-i.highestCpm:0,Math.round(100*p)/100),n(`auctionId: ${o.auctionId}, streamBid, adUnitCode: ${a.adUnitCode}, bidder: ${a.bidderCode}, adId: ${a.adId}, cpm: ${a.cpm}, from auctionId: ${a.auctionId}, cachedBidDiff: ${l.bc_diff}`),i.bids[o.bidderCode].bidderTargeting=c,i.bids[o.bidderCode].cpm=o.cpm,u&&!i.cachedBid.hasUsedCachedBid){const e=NT(a.bidderCode,MT(r,UT(a.adserverTargeting),a));i.cachedBid={hasUsedCachedBid:!0,targeting:e,bidderCode:a.bidderCode};const n={cached:!0,bidder:a.bidderCode,cpm:Math.round(100*a.cpm)};t.emit("bid",a.adUnitCode,n)}else!u&&i.cachedBid.hasUsedCachedBid?(i.bids[i.cachedBid.bidderCode]?i.cachedBid.targeting=i.bids[i.cachedBid.bidderCode].bidderTargeting:i.cachedBid.targeting=i.cachedBid.targeting?Object.fromEntries(Object.keys(i.cachedBid.targeting).map((e=>[e,void 0]))):{},i.cachedBid.hasUsedCachedBid=!1):u||(i.cachedBid.targeting={});var p;const h={...l,...c,...i.cachedBid.targeting},f={type:"bid",pos:d,cpm:Math.round(100*o.cpm)/100,bidderCode:o.bidderCode,tags:h};u&&(f.cachedBid={bidderCode:a.bidderCode,cpm:Math.round(100*a.cpm)/100}),i.push([f])}({broker:o,log:r,pbjs:a,stream:n,bidResponse:i,selectedBid:t})}}var BT=__webpack_require__(9396),qT=__webpack_require__.n(BT);function FT(e,t){const n=e[0]*e[1],r=t[0]*t[1],i=e[0]<t[0]?1:e[0]>t[0]?-1:0;return n<r?1:n>r?-1:i}const VT=(e,t)=>{let{code:n,bids:r,mediaTypes:i,ortb2Imp:o}=t;const a=n+JSON.stringify(i)+JSON.stringify(o),s=e[a]||{code:n,bids:[],mediaTypes:{banner:{...i.banner,sizes:[]}}};return s.bids=[...s.bids,...r],s.mediaTypes.banner.sizes=((e,t)=>{const n=t&&t.banner&&t.banner.sizes||[];return Array.from(new Set([...n,...e.mediaTypes.banner.sizes].map(JSON.stringify))).map(JSON.parse).sort(FT)})(s,i),o&&(s.ortb2Imp=o),e[a]=s,e};(0,We.F3)("prebid",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:async function({broker:e,getConfig:t,win:n,pageCriteria:r,checkPluginBouncer:i}){let o;const a=t("slots.enabled",{}),s=e.invokeAll("prebid prerequisites",{timeout:t("plugins.prebid.prequisiteTimeout",3e3)}).then((()=>(({default:o}=__webpack_require__(7779)),e.emit("prebid loaded",o),o)));s.then((t=>{t.onEvent("auctionInit",(t=>{e.emit("auction init",t)}))}));const d=t("plugins.prebid.setVideoOffsetInAdUnit",!1),l=new jT({broker:e}),c=new Set,u={},p=t("slotDescriptions.initial",{}),h=(0,T.Up)(p,Object.keys(a));Object.entries(a).forEach((([e,t])=>{h[e]&&(h[e].loadSettings=t)}));const f=t("globalPlacementIds.display",{}),g=t("globalPlacementIds.video",{}),m={},v={},y=e=>{const t={},n=e.filter((e=>{const t=e&&"code"in e;return t||zT("ignoring invalid adUnit"),t}));n.forEach((e=>{const{bids:n,code:r,sizes:i}=e,o=i.map((([e,t])=>`${e}x${t}`));(0,q.sb)(n.map((({bidder:e})=>e))).forEach((e=>{t[r]=t[r]||{},t[r][e]=t[r][e]||{};const n=t[r][e].requestSizes||[];n.push(o),t[r][e]={requestSizes:(0,q.sb)(n)}}))})),Object.entries(t).forEach((([e,t])=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:{requestSizes:n.requestSizes.flat()}})),{});v[e]=n})),zT("addAdUnits",n),o.addAdUnits(n),n.map((e=>e.code)).forEach((e=>c.add(e))),n.forEach((({code:e,bids:t})=>{m[e]=[...new Set([...m[e]||[],...t.map((({bidder:e})=>e))])]}))},_=t("auction.priceGranularity",{buckets:[{min:0,max:20,increment:.01},{min:20,max:50,increment:.1}]});(async function({broker:e,getConfig:t,pageCriteria:n,win:r,checkPluginBouncer:i}){const o=async function({getConfig:e,pageCriteria:t,checkPluginBouncer:n}){if(e("plugins.prebid.ortb2.includeUserIP",!1)&&t?.clientIP&&await n("deviceUserIP",{}))return{ip:t?.clientIP}}({getConfig:t,pageCriteria:n,checkPluginBouncer:i}),a=async function({getConfig:e,broker:t,win:n}){const r=e("plugins.prebid.ortb2.params",["area","article","ias-bsp"]),i=e("plugins.prebid.ortb2.iasBspLength",30),o=e("plugins.prebid.dependenciesTimeout",2e3),a={area:()=>n.adAreaId,"ias-bsp":async()=>{const e=(await t.invokeAllWithin("dmp",o,"admantx"))[0];if(e)return e.slice(0,i)},article:()=>n.pagemeta?.articleId},s=r.reduce(((e,t)=>{const n=a[t]?.();return n&&e.push([t,n]),e}),[]);return Promise.all(s.map((async([e,t])=>[e,await t]))).then((e=>{const t=e.reduce(((e,[t,n])=>n?{...e,[t]:n}:e),{}),n=e.flatMap((([e,t])=>Array.isArray(t)?t.map((t=>`${e}=${t}`)):t?`${e}=${t}`:void 0)).filter(Boolean).join(",");return(0,T.Im)(t)?{}:{siteExtData:t,siteKeywords:n}}))}({getConfig:t,broker:e,win:r});e.register("provide prebid config",(async()=>{const e=await a,t=await o;return{ortb2Config:t?{...e,device:t}:e}}))})({broker:e,getConfig:t,win:n,pageCriteria:r,checkPluginBouncer:i}),e.register("prebid config async update",(async e=>{await s,o.setConfig(e)}));const w=(e,t,n)=>r=>{zT("auctionId:",e,", ",t,"auctionEnded, bids:",Object.keys(r||{}).length,"user ids: ",o.getUserIdsAsEids());try{n&&n()}finally{l.dispose(e)}},I=(t,n)=>{zT("auctionId:",t,", bidOnAdUnitCodes: ",n),o.requestBids({adUnitCodes:n,auctionId:t,bidsBackHandler:w(t,n,(()=>{e.emit("bids received")}))}),e.emit("bids requested",{positions:n})},k=t("prebid.videoAuctionOffset",500),A={standard:{adserverTargeting:[{key:"hb_bidder",val:({bidderCode:e})=>e},{key:"hb_adid",val:({adId:e})=>e},{key:"hb_pb",val:e=>{switch(_){case"auto":return e.pbAg;case"dense":return e.pbDg;case"high":return e.pbHg;case"low":return e.pbLg;case"medium":return e.pbMg;default:return"object"==typeof _?e.pbCg:e.pbHg}}},{key:"hb_size",val:({size:e})=>e},{key:"hb_source",val:({source:e})=>e},{key:"hb_format",val:({mediaType:e})=>e},{key:"hb_cache_id",val:({videoCacheKey:e})=>e},{key:"hb_uuid",val:({videoCacheKey:e})=>e},{key:"fb_bidid",val:e=>e.fb_bidid}]}};e.on("plugins enabled",(async n=>{const r=(await e.invokeAll("provide prebid adUnits")).flat().filter((e=>e&&t("slots.enabled",{})[e.code]));await s,o.bidderSettings=await e.invokeChainMutable("prebid reduce bidderSettings",A),(await e.invokeAll("provide bidder alias")).forEach((({adapterName:e,aliasedName:t})=>{o.aliasBidder(e,t)})),e.emit("configure and start prebid",n,r)}));const E=new Promise((n=>{e.on("configure and start prebid",(async(r,i=[])=>{await async function(n,r){const i={"bidders.adform.display":"adf","bidders.adform.v2.display":"adf","bidders.adform.video":"adf","bidders.mediagrid.v2.display":"grid","bidders.mediagridVideo":"grid","bidders.brightroll":"brightroll","bidders.appnexusPSP":"appnexus"};zT.info("pluginToS2SBidderNameMap",i);const a=RT()(n,Object.keys(i));zT.info("enabledS2SPlugins",a);const s=new Set(a.map((e=>i[e]))),d=Array.from(s);zT.info("enabledS2SBidders",s);const c=Object.values(t("prebid.singleAdUnitMode",!1)?r:r.reduce(VT,{})).map((e=>(e.sizes=e.mediaTypes.banner.sizes,e))).map((e=>((e,t)=>(e[t.code]&&(qT()(t,"ortb2Imp.ext.data.pbadslot",e[t.code]),qT()(t,"ortb2Imp.ext.gpid",e[t.code])),t))(f,e)));zT("allAdUnits",c);const p=[...new Set(WT(c,h))],g=e.invokeAll("provide prebid bidder config"),m=await e.invokeAll("provide prebid config");zT("configs",m);const{analytics:w,bidderSequence:k,realTimeData:A,userSync:E,fledgeForGpt:C,floor:x,ortb2:O}=m.reduce(((e,{analyticsConfig:t=[],realTimeDataConfig:n={},userSyncConfig:r={},fledgeForGptConfig:i={},priceFloorConfig:o,bidderSequenceConfig:a={},ortb2Config:s})=>{const{analytics:d,realTimeData:l,userSync:c,fledgeForGpt:u,floor:p,bidderSequence:h,ortb2:f}=e;return{analytics:[...d,...t],bidderSequence:{...h,...a},realTimeData:GT(l,n),userSync:XT(c,r),fledgeForGpt:{...u,...i},floor:p?{...p,...o||{}}:o,ortb2:KT(f,s)}}),{analytics:[],realTimeData:{},userSync:{},fledgeForGpt:{},bidderSequence:{},ortb2:{}});for(const e of w)o.enableAnalytics(e);if((0,T.Im)(A)||(zT("setting realTimeData config",A),o.setConfig({realTimeData:A})),!(0,T.Im)(E)){zT("setting userSync config",E),o.setConfig({userSync:E});const e=t("plugins.prebid.refreshUserIdSubmodulesOnPageLoad");e&&o.refreshUserIds({submoduleNames:Array.isArray(e)?e:void 0})}(0,T.Im)(k)||(zT("setting bidderSequence",k),o.setConfig(k)),(0,T.Im)(C)||(zT("setting fledgeForGpt config",C),o.setConfig({fledgeForGpt:C})),x&&(zT("setting priceFloor",x),o.setConfig({floor:x}));const P=t("topPageUrl"),D={debug:t("prebid.debug",!1)||b.fX.pbjs_debug||!1,enableSendAllBids:!1,priceGranularity:_,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},s2sConfig:(await e.invokeAll("prebid s2s config")).reduce(((e,t)=>S()(e,t)),{accountId:t("auction.accountId","37643165-9d8c-4c14-9e55-57b51f032308"),defaultVendor:t("prebid.s2s.defaultVendor","appnexuspsp"),enabled:t("prebid.s2s.enabled",!!d.length),bidders:d,timeout:t("auction.maxTime",2e3),adapter:t("auction.adapter","prebidServer"),endpoint:t("auction.endpoint","https://prebid.adnxs.com/pbs/v1/openrtb2/auction"),syncEndpoint:"https://prebid.adnxs.com/pbs/v1/cookie_sync",secure:t("auction.secure",0)}),currency:t("prebid.currency",{adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://currency.prebid.org/latest.json",defaultRates:{GBP:{USD:1.2764213953}}}),sizeConfig:t("plugins.prebid.sizeConfig",[]),targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN"]}};t("prebid.reduceMemUsage",!1)&&(D.minBidCacheTTL=t("prebid.minBidCacheTTL",0),D.eventHistoryTTL=t("prebid.eventHistoryTTL",10)),P&&(D.pageUrl=P),(0,T.Im)(O)||(D.ortb2=O),(await g).forEach((([e,t])=>{o.setBidderConfig({bidders:e,config:t},!0)}),{}),__webpack_require__.g.__tcfapi?D.consentManagement={...D.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,defaultGdprScope:!0}}:__webpack_require__.g.__cmp&&(D.consentManagement={...D.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,allowAuctionWithoutConsent:!1}}),__webpack_require__.g.__uspapi&&(D.consentManagement={...D.consentManagement||{},usp:{cmpApi:"iab",timeout:500}}),zT("config:",D),o.setConfig(D);const R=HT(u,c);zT("adUnits",R),zT("othersAdsPos templates",u),y(R),JT(e,o,l,v),e.emit("prebid adunits added",R,p);const{auctionId:j}=l.createAuctionWithPendingStreams(p);zT(`auctionId: ${j}, requestBids. adUnitCodes: ${p}`),I(j,p)}(r,i),n()}))})),C=(e,t,n)=>{let r=u[e]&&JSON.parse(JSON.stringify(u[e]))||[];return r=r.map((r=>{if(r.code=t,n[e]){const i=n[e].split("/");i[i.length-1]=t;const o=i.join("/");qT()(r,"ortb2Imp.ext.data.pbadslot",o),qT()(r,"ortb2Imp.ext.gpid",o)}return r})),y(r),r};e.registerStream("get tags",(async({slot:t})=>{if(t.omitBidding)return void zT(`bidding not supported for ${t.pos}, bailing`);await E;const{pos:n}=t;if(zT("get tags, pos:",n,t),n.startsWith("mpu_puff_other"))C("mpu_puff_others",n,f);else if(n.startsWith("puff_ad_other"))C("puff_ad_others",n,f);else if(n.startsWith("mpu_mobile_other"))C("mpu_mobile_others",n,f);else if(n.startsWith("mpu_factbox"))C("mpu_factbox",n,f);else if(n.startsWith("mpu_mobile_factbox"))C("mpu_mobile_factbox",n,f);else if(!h[n]||!c.has(n))return void zT("unable to run auction for pos:",n,h[n],c.has(n));const r=l.resolveStreamForPosition(n);return r.auctionId&&I(r.auctionId,[n]),e.emit("auction event",n,"interested endpoint",{endpoints:m[n]}),r.stream})),e.registerStream("get video tags",(async function({platform:n,offset:r=0,timeout:i,slot:a,autoplay:s,videoId:c,auctionId:u}){await E;const p=t(`videoDescription.${a.pos}.biddingProfile`,a.pos||"video");zT(`videoBidRequest, pos: ${a.pos}, bidProfile: ${p}, auctionId: ${u}`);const h=(e=>t($T[e],{}))(p),{code:f,mediaTypes:m}=h,v=d?{...m,video:{...m.video,startdelay:r}}:m,y=a.pos||"video",b=(await e.invokeAll("provide video adUnits",p,s,r,c)).filter((e=>e)),{adUnits:_,bids:I,pbjsConfig:A}=b.reduce(((e,n)=>{if(n.pbjsConfig&&(e.pbjsConfig=S()({},e.pbjsConfig,n.pbjsConfig)),n.mediaTypes){const{bids:t,code:i,mediaTypes:o}=n,a={...m,...o,video:d?{...m.video,...o.video,startdelay:r}:{...m.video,...o.video}};e.adUnits.push({bids:t,code:i,mediaTypes:a})}else n.bids&&(t("prebid.singleAdUnitMode",!1)?e.adUnits.push({code:f,bids:n.bids,mediaTypes:v}):e.bids=[...e.bids,...n.bids]);return e}),{adUnits:[],bids:[],pbjsConfig:{}}),C=[..._,I.length&&{bids:I,code:f,mediaTypes:v}].filter((e=>e)).map((e=>x(g,e,r))),O=await e.invoke("enrich video adUnits",C);let P;if(zT(`video auctionId: ${u}, adUnit config`,y,O,A),O.length){(0,T.Im)(A)||o.setConfig(A);const t=((t,n,r,i,a,s)=>{const d=t[0].code,c=l.createAuctionForAdUnitCode(d,r,i,a,s);zT("auctionId:",c.auctionId,", adUnit: ",t),e.emit("bids requested",{positions:[s]});const u=n-k;return o.requestBids({adUnits:t,auctionId:c.auctionId,timeout:u,bidsBackHandler:w(c.auctionId,[s],(()=>e.emit("prebid video auction ended",[d],c.auctionId)))}),{stream:c.positions[d].stream,auctionId:c.auctionId}})(O,i,u,r,n,y);P=t.stream,e.emit("prebid video auction started",u,y,r)}const D=O.map((({bids:e})=>e)).flat().map((({bidder:e})=>e));if(zT("Interested endpoints:",D),e.emit("auction event",y,"interested endpoint",{endpoints:D}),C.length)return function(e,t,n,r){return ga.Tj(e,(e=>{if(e.length){const{bidderCode:i,cpm:o,cachedBid:a}=e[0],s=e[0].tags;return{auctionId:n,pos:t,offset:r,type:"bid",cpm:o,bidderCode:i,cachedBid:a,tags:{cust_params:{...s}}}}return{}}))}(P,y,u,r)}));const x=(e,t,n)=>{const r=0===n?"preroll":"midroll";return e?.[t.code]?.[r]&&(qT()(t,"ortb2Imp.ext.data.pbadslot",e?.[t.code]?.[r]),qT()(t,"ortb2Imp.ext.gpid",e[t.code]?.[r])),t};return e.register("enrich video adUnits",(e=>e)),e.on("prepare to refresh ads",(e=>{const{auctionId:t}=l.createAuctionWithPendingStreams(e);zT(`auctionId: ${t}, requestBids refresh, adUnitCodes: ${e}`),I(t,e)})),s},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0});const zT=(0,_.h)("prebid"),$T={ibv:"plugins.slots.ibv",hero:"plugins.slots.video.v2",jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"},WT=(e,t)=>(0,q.x1)((e=>{return(n=t[e.code])&&"immediate"===n.loadSettings.type&&n.earlyBidding;var n}),(e=>e.code),e||[]),HT=(e,t)=>{const n=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]);return t.filter((t=>n.has(t.code)?(t.bids&&t.bids.length&&(e[t.code]=e[t.code]||[],e[t.code].push(t)),!1):t.bids&&t.bids.length))},GT=(e,t)=>{if((0,T.Im)(t))return e;const{dataProviders:n,...r}=t;return e.dataProviders=[...e.dataProviders||[],...n],{...e,...r}},XT=(e,t)=>{if((0,T.Im)(t))return e;const{userIds:n=[],...r}=t;return e.userIds=[...e.userIds||[],...n],{...e,...r}},JT=(e,t,n,r)=>{t.onEvent("bidderDone",(({bidderCode:t,bids:n})=>{new Set(n.map((({adUnitCode:e})=>e))).forEach((n=>e.emit("plugin done",n,t)))})),t.onEvent("bidResponse",(i=>{zT(`auctionId: ${i.auctionId}, bidResponse, adUnitCode: ${i.adUnitCode}, bidderCode: ${i.bidderCode}, adId: ${i.adId}, cpm: ${i.cpm}`);const{stream:o,offset:a,platform:s,pos:d}=n.getStreamForAdUnitCode(i.auctionId,i.adUnitCode),l=Math.round(100*i.cpm),c=r[i.adUnitCode]&&r[i.adUnitCode][i.bidderCode]&&r[i.adUnitCode][i.bidderCode].requestSizes;e.emit("bid",d,{bidder:i.bidderCode,cpm:l,offset:a,platform:s,requestSizes:c}),zT("bid requestSize",d,i.adUnitCode,i.bidderCode,c),o?o.ended?zT(`auctionId: ${i.auctionId}, streamEnded, adUnitCode: ${i.adUnitCode}, bidder: ${i.bidderCode}, adId: ${i.adId}, bailing`):LT({broker:e,log:zT,pbjs:t,stream:o,bid:i,requestSizes:c,pos:d}):console.error(`[PREBID] auctionId: ${i.auctionId},  Unknown stream for ${i.adUnitCode}, bidder: ${i.bidderCode}`)}))},KT=(e,t)=>{if(!t||(0,T.Im)(t))return e;{const{siteKeywords:n,siteExtData:r,device:i}=t,o=n?function(e){return"site"in e&&"keywords"in e.site}(e)?`${e.site.keywords},${n}`:n:void 0;o&&S()(e,{site:{keywords:o}});const a=r?function(e){return"site"in e&&"ext"in e.site&&"data"in e.site.ext}(e)?{...e.site.ext.data,...r}:r:void 0;return a&&S()(e,{site:{ext:{data:a}}}),(0,T.Im)(i)||S()(e,{device:i}),e}};(0,We.F3)("gpid",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},init:function({getConfig:e,setConfig:t,log:n}){const r=Object.keys(e("slots.enabled",{})),i=Object.fromEntries(r.map((e=>[e,`${YT((0,F.A)(e))}`])));n("setting display globalPlacementIds",i),t("globalPlacementIds.display",i);const o=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),a=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),s=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),d=e("players.editorial.v2.gpid.adUnitNameLevel1","dm.video"),l=e("players.editorial.v2.gpid.adUnitNameLevel2","dm_ros"),c=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o}/${a}/${s}/${e}`]))),u=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o}/${d}/${l}/${e}`]))),p=Object.values(e("videoDescription",{})).find((({biddingProfile:e})=>"ibv"===e))?.adUnit;n("setting video globalPlacementIds",c,u),t("globalPlacementIds.video",{jwplayer:c,video:u}),p&&t("globalPlacementIds.video.ibv",Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o}/${p}/${s}/${e}`]))))},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"}});const YT=e=>e.substring(1);(0,We.F3)("prebid.permutiveRtd",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r}=e;const i=n("permutive.rtd.acBidders",["appnexus","rubicon","ozone"]),o=n("permutive.rtd.maxSegs",500),a=n("permutive.rtd.auctionDelay",2e3),s={name:"permutive",params:{acBidders:i,maxSegs:o}},d=[a?{...s,waitForIt:!0}:s],l=a?{auctionDelay:a,dataProviders:d}:{dataProviders:d};r("setting realTimeData rtd",l),t.register("provide prebid config",(()=>({realTimeDataConfig:l})))},vendorIds:{gdpr:[361]}}),(0,We.F3)("trackers.exitbee",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("start");const i=n("plugins.exitbee.loadSite","8038");__webpack_require__.g.ExitBeeObject="xtb",__webpack_require__.g.xtb=__webpack_require__.g.xtb||function(){(__webpack_require__.g.xtb.args=__webpack_require__.g.xtb.args||[]).push(arguments)},t.invoke("import script","https://cdn.exitbee.com/xtb.min.js").then((()=>{r("loaded")})),__webpack_require__.g.xtb("loadSite",i)},vendorIds:{gdpr:[1027]}}),(0,We.F3)("slots.classes",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:({broker:e,doc:t,getConfig:n,log:r})=>{const i=n("slots.classes.adRequested",["sky_left_top","sky_right_top"]);e.on("request slot",(({pos:e,parentId:n})=>{i.includes(e)&&(r("display label",e),t?.getElementById(n)?.parentNode?.querySelector(".mol-ads-label-container")?.classList.add("ad-requested"))}))}}),(0,We.F3)("slots.InreadPlayerTop",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function({broker:e,log:t,getConfig:n,pageCriteria:r,pageMeta:i}){if(n("pos.inread_player_top.disableAutoRender"))return void t("Auto rendering has been disabled");if("article"!==r.pageType)return void t("Not suitable for PageCriteria.pageType:",r.pageType);const o=n("pos.inread_player_top.paragraphIndex",2),a={insertMethod:t=>{const r="inread_player_top",o="desktop"===i.renderPlatform?tI(r,n):eI(r,n),a={pos:r};t.parentElement.insertBefore(o,t),e.emit("slot mounted",a)},log:t,margin:n("pos.inread_player_top.margin",{top:30,bottom:30}),sourcePlugin:"inreadPlayerTop",targetParagraphIndex:o};t("requesting placement",o),e.register("placement requests",(()=>a))}});const QT=e=>{const t=e("slotDescription.inread_player_top.size",[[300,250]]);return(e=>Array.isArray(e)&&e.every(Array.isArray)&&e.every((e=>2===e.length&&e.every((e=>!isNaN(e))))))(t)?t.reduce(((e,t)=>[Math.max(e[0],t[0]),Math.max(e[1],t[1])]),[0,0]):[300,250]},ZT=(e,t,n)=>{const r=document.createElement("div");r.id=e,r.style.width=`${t}px`,r.style.height=`${n}px`;const i=document.createElement("div");return i.classList.add("inread_player_top_container"),i.appendChild(r),[i,r]},eI=(e,t)=>{const[n,r]=QT(t),[i,o]=ZT(e,n,r);return o.className=`adHolder mpu molads_${e} watermark`,i.dataset.swipeArticle="false",i.appendChild(o),i},tI=(e,t)=>{const[n,r]=QT(t),[i,o]=ZT(e,n,r);o.className=`adHolder molads_${e}`,i.classList.add("watermark"),i.style.width=`${n}px`,i.style.height=`${r}px`;const a=vt();return i.appendChild(a),i.appendChild(o),i};function nI(e){return e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>{const[t,n]=e.split("x",2);return[parseInt(t),parseInt(n)]}))}function rI(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function iI(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,aI(t,e))}function oI(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,aI(t,e),n),n}function aI(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}(0,We.F3)("bidders.appnexusPSP",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},async run({broker:e,getConfig:t,log:n,pageCriteria:r,win:i}){e.register("prebid s2s config",(e=>{const r=function(e){return{allowUnknownBidderCodes:!0,defaultVendor:e("auction.adapter","appnexuspsp"),endpoint:e("auction.endpoint","https://ib.adnxs.com/openrtb2/prebid"),extPrebid:{targeting:{includebidderkeys:!0,includewinners:!0}}}}(t);return n("setting s2s config",r),r}));const o=hr({broker:e,getConfig:t,log:n,pageCriteria:r,win:i}).then((e=>{const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e("plugins.bidders.appnexus.display.adUnits",{})).filter((t=>{let[n]=t;return!!e(`slotDescription.${n}`)})).map((e=>{let[n,r]=e;return{code:n,bids:(0,q.wg)(r).map((e=>({bidder:"appnexus",params:{keywords:t,placementId:e.split(" ")[0].trim()}}))),mediaTypes:{banner:{sizes:(0,q.wg)(r).flatMap(nI)}}}}))}(t,e);return n({keywords:e,config:r}),r}));e.register("provide prebid adUnits",(async()=>o)),e.register("provide video adUnits",(async(e,n)=>function(e){let{getConfig:t,pos:n,autoplay:r}=e;const i=t("plugins.bidders.appnexus.video.adUnits",{}),o={area:[__webpack_require__.g.adAreaId]},a="object"==typeof i[n]&&i[n][r?"autoplay":"ctp"]?i[n][r?"autoplay":"ctp"]:"string"==typeof i[n]?i[n]:"";if(!a)return;const[s,d]=a.trim().split(/\s+/);return{bids:[{bidder:"appnexus",params:{accountId:s,placementId:d,keywords:o,video:{skipable:!1,playback_methods:r?["auto_play_sound_off"]:["click_to_play"]}}}]}}({getConfig:t,autoplay:n,pos:e})))}});var sI=new WeakMap,dI=new WeakMap;class lI{constructor(e,t){rI(this,sI,{writable:!0,value:void 0}),rI(this,dI,{writable:!0,value:void 0}),oI(this,dI,e),oI(this,sI,t)}getItem(e){const t=iI(this,dI).getItem(e);if(!t)return null;const n=()=>(iI(this,dI).removeItem(e),null);let r;try{r=JSON.parse(t)}catch(e){return n()}if(!function(e){return null!==e&&"object"==typeof e&&"time"in e&&"value"in e}(r))return n();const i=r.time+iI(this,sI);return Date.now()>i?n():r.value}setItem(e,t){iI(this,dI).setItem(e,JSON.stringify({time:Date.now(),value:t}))}}const cI="mol.ads.commenter",uI=(e,t)=>{switch(e.type){case"comment":return"cw";case"view comments":return"cw"===t?t:"cr";default:return t}};(0,We.F3)("trackers.commenter",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run({broker:e,getConfig:t,localStorage:n,log:r}){const i=t("trackers.commenter.ttl",2592e6),o=new lI(n,i),a=__webpack_require__.g,s=new Ko.A(uI,o.getItem(cI)||"ca",r.extend("store"));function d(){s.dispatch({type:"comment"})}function l(){s.dispatch({type:"view comments"})}s.subscribe(((t,n)=>{"__INIT__"!==t.type&&"__DEINIT__"!==t.type?(o.setItem(cI,n),r("saved",n)):r(t.type,n),e.emit("set page level targeting",{userType:n}),e.emit("track in permutive","userType",n)})),s.init(),e.register("call for page analytics",(()=>({comm:s.state}))),a.DM?.pageEvents?.subscribe("comments.submit-comment",d),a.DM?.pageEvents?.subscribe("comments.impression",l),a.DM?.pageEvents?.subscribe("openweb.send_success",d),a.DM?.pageEvents?.subscribe("openweb.edit_message",d),a.DM?.pageEvents?.subscribe("openweb.viewable",l)}}),(0,We.F3)("bidders.33across.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.33across.video.${e}`);if(r({code:e,siteId:t}),!t)return console.warn(`no site id found for pos ${e}`),{};const i={bids:[{bidder:"33across",params:{productId:"instream",siteId:t}}]};return r.info("prioviding ad unit",i),i}))}}),(0,We.F3)("bidders.kargo.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[972]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.kargo.video.${e}`);if(r({code:e,placementId:t}),!t)return console.warn(`no placement id found for pos ${e}`),{};const i={bids:[{bidder:"kargo",params:{placementId:t}}]};return r.info("prioviding ad unit",i),i})),t.register("prebid reduce bidderSettings",(e=>(e.kargo||(e.kargo={}),e.kargo.storageAllowed=!0,e)))}}),(0,We.F3)("bidders.sharethrough.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[80]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.sharethrough.video.${e}`);if(r({code:e,pkey:t}),!t)return console.warn(`no pkey found for pos ${e}`),{};const i={bids:[{bidder:"sharethrough",params:{pkey:t}}]};return r.info("prioviding ad unit",i),i}))}});const pI="_dm_ads_message\n";(0,We.F3)("exposeUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("running");const i=n("exposeUserData.origins",[""]);let o={};t.on("external user ids",(e=>{o=S()(o,e)})),window.addEventListener("message",(e=>{if(i.includes(e.origin)&&e.source)try{if("string"!=typeof e.data||!e.data.startsWith(pI))return void r(`unsupported message: ${"string"==typeof e.data?e.data:JSON.stringify(e.data,null,2)}, bailing`);const t=JSON.parse(e.data.split(pI)[1]);if("getExternalIds"!==t.scope)return void r(`unsupported scope: ${e?.data.scope}, bailing`);r("request received"),e.source.postMessage(`${pI}${JSON.stringify({schemaVersion:1,responseTo:t.messageId,data:{payload:o}})}`,{targetOrigin:e.origin})}catch(e){r.error("error handling request",e)}}),!1)}});const hI={"v5.4":__webpack_require__.e(362).then(__webpack_require__.bind(__webpack_require__,362)),"v6.07":__webpack_require__.e(641).then(__webpack_require__.bind(__webpack_require__,1022))};function fI(){gI.call(window),window.__h82AlnkH6D91__("WyJwdWItNjgxNDAzMTY2OTc2MjgwMSIsW251bGwsbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9iL3B1Yi02ODE0MDMxNjY5NzYyODAxIl0sbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9lbC9BR1NLV3hXaWdXejVkalIzVm1ubm9NWnVLV3FFbHY5WUsxbHM0Uy1hRUNXUlJxSEpTcGVGMUVUR0JOSUZPN3hKN0FnQnVIZTFaeHloUUMzX1pDN2duT3JKWnU1U3dnXHUwMDNkXHUwMDNkP3RlXHUwMDNkVE9LRU5fRVhQT1NFRCIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFUxcFh0eENmTFBLU0M4dkZFWDFtMjRMV0xBTWtYWnUyZHBmcXpWR1Q2RjZvdmsxZUUxeEZGQ1p6clNxamlTLWZFUXV4REFYYUJuWEVQd055c3BWNzNxUndcdTAwM2RcdTAwM2Q/YWJcdTAwM2QxXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFZGRkFMVEsyRW5GbF9nVl90emdSS1d0WUV4Snc3LWpacXVNMTlxeXBSVGhiV2dvSFdxVFZVQXBKNTlDM0ZFOHNMQWNHbndFbWxkRXhWQ01xbV9NemdwdUFcdTAwM2RcdTAwM2Q/YWJcdTAwM2QyXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFhpdUM1bkthOG41RXdhMlFVbTJuTUJMU0tlZnhIRFVmc0dJZmpDTUhhT3FEY1NrX2p0bEtGMWNwbUVjYUlsOGk1X0ZBR19tOWEwdHpWTXdneUVSZXRrQndcdTAwM2RcdTAwM2Q/c2JmXHUwMDNkMiIsImRpdi1ncHQtYWQiLDIwLDEwMCwiY0hWaUxUWTRNVFF3TXpFMk5qazNOakk0TURFXHUwMDNkIixbbnVsbCxudWxsLG51bGwsImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tLzBlbW4vZi9wL3B1Yi02ODE0MDMxNjY5NzYyODAxLmpzP3VzcXBcdTAwM2RDQWsiXSwiaHR0cHM6Ly9mdW5kaW5nY2hvaWNlc21lc3NhZ2VzLmdvb2dsZS5jb20vZWwvQUdTS1d4VzhYcGJsWldyeG8xejhGYXJONTNVZ3YyOENBZ2dNcWtBZG43U2dPdkl6X1N1c0ltYkQzdkNXU3pzTHFhVWI2bFhRMHdCbExVT3NOaDN4VHZIQ3o3LUZtd1x1MDAzZFx1MDAzZCJd")}function gI(){var e,t=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},n="function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var r;e:{var i={};try{i.__proto__={a:!0},r=i.a;break e}catch(e){}r=!1}e=r?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var o,a=e,s=function(e,t){if(e.prototype=n(t.prototype),e.prototype.constructor=e,a)a(e,t);else for(var r in t)if("prototype"!=r)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,r);i&&Object.defineProperty(e,r,i)}else e[r]=t[r];e.v=t.prototype},d=this||self,l=function(){},c=function(e){return e},u=function(e,t){this.g=t===p?e:""};u.prototype.toString=function(){return this.g+""};var p={},h=function(e){if(void 0===o){var t=null,n=d.trustedTypes;if(n&&n.createPolicy){try{t=n.createPolicy("goog#html",{createHTML:c,createScript:c,createScriptURL:c})}catch(e){d.console&&d.console.error(e.message)}o=t}else o=t}return e=(t=o)?t.createScriptURL(e):e,new u(e,p)},f=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)},g={},m=null,v="function"==typeof Uint8Array;function y(e,t,n){return"object"==typeof e?v&&!Array.isArray(e)&&e instanceof Uint8Array?n(e):b(e,t,n):t(e)}function b(e,t,n){if(Array.isArray(e)){for(var r=Array(e.length),i=0;i<e.length;i++){var o=e[i];null!=o&&(r[i]=y(o,t,n))}return Array.isArray(e)&&e.s&&S(r),r}for(i in r={},e)Object.prototype.hasOwnProperty.call(e,i)&&null!=(o=e[i])&&(r[i]=y(o,t,n));return r}var _,w={s:{value:!0,configurable:!0}},S=function(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,w),e},T=function(e,t,n){var r=_;if(_=null,e||(e=r),r=this.constructor.u,e||(e=r?[r]:[]),this.j=r?0:-1,this.h=null,this.g=e,e=(r=this.g.length)-1,!r||null===(r=this.g[e])||"object"!=typeof r||Array.isArray(r)||v&&r instanceof Uint8Array?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=r),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(r=this.g[e])?S(r):this.g[e]=I):(r=this.l+this.j,this.g[r]||(this.i=this.g[r]={}),(r=this.i[e])?S(r):this.i[e]=I)},I=Object.freeze(S([])),k=function(e,t){if(-1===t)return null;if(t<e.l){t+=e.j;var n=e.g[t];return n!==I?n:e.g[t]=S([])}return e.i?(n=e.i[t])!==I?n:e.i[t]=S([]):void 0},A=function(e,t){var n=H;if(-1===t)return null;if(e.h||(e.h={}),!e.h[t]){var r=k(e,t);r&&(e.h[t]=new n(r))}return e.h[t]};T.prototype.toJSON=function(){return function(e){return b(e,(function(e){return"number"==typeof e?isFinite(e)?e:String(e):e}),(function(e){var t;if(void 0===t&&(t=0),!m){m={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),r=["+/=","+/","-_=","-_.","-_"],i=0;5>i;i++){var o=n.concat(r[i].split(""));g[i]=o;for(var a=0;a<o.length;a++){var s=o[a];void 0===m[s]&&(m[s]=a)}}}for(t=g[t],n=Array(Math.floor(e.length/3)),r=t[64]||"",i=o=0;o<e.length-2;o+=3){var d=e[o],l=e[o+1];s=e[o+2],a=t[d>>2],d=t[(3&d)<<4|l>>4],l=t[(15&l)<<2|s>>6],s=t[63&s],n[i++]=""+a+d+l+s}switch(a=0,s=r,e.length-o){case 2:s=t[(15&(a=e[o+1]))<<2]||r;case 1:e=e[o],n[i]=""+t[e>>2]+t[(3&e)<<4|a>>4]+s+r}return n.join("")}))}(E(this,!1))};var E=function(e,t){if(e.h)for(var n in e.h)if(Object.prototype.hasOwnProperty.call(e.h,n)){var r=e.h[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]&&E(r[i],t);else r&&E(r,t)}return e.g},C=function(e,t){return _=t=t?JSON.parse(t):null,e=new e(t),_=null,e};T.prototype.toString=function(){return E(this,!1).toString()};var x=function(e){T.call(this,e)};s(x,T);var O=function(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)},P=function(e){this.g=e||d.document||document};P.prototype.appendChild=function(e,t){e.appendChild(t)};var D=function(e,t,n,r,i,o){try{var a=e.g,s=O(e.g,"SCRIPT");s.async=!0,s.src=t instanceof u&&t.constructor===u?t.g:"type_error:TrustedResourceUrl",function(e){var t,n=(e.ownerDocument&&e.ownerDocument.defaultView||window).document,r=null===(t=n.querySelector)||void 0===t?void 0:t.call(n,"script[nonce]");(t=r&&(r.nonce||r.getAttribute("nonce"))||"")&&e.setAttribute("nonce",t)}(s),a.head.appendChild(s),s.addEventListener("load",(function(){i(),r&&a.head.removeChild(s)})),s.addEventListener("error",(function(){0<n?D(e,t,n-1,r,i,o):(r&&a.head.removeChild(s),o())}))}catch(e){o()}},R=d.atob("aHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vaW1hZ2VzL2ljb25zL21hdGVyaWFsL3N5c3RlbS8xeC93YXJuaW5nX2FtYmVyXzI0ZHAucG5n"),j=d.atob("WW91IGFyZSBzZWVpbmcgdGhpcyBtZXNzYWdlIGJlY2F1c2UgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlIGlzIGludGVyZmVyaW5nIHdpdGggdGhpcyBwYWdlLg=="),M=d.atob("RGlzYWJsZSBhbnkgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlLCB0aGVuIHJlbG9hZCB0aGlzIHBhZ2Uu"),N=function(e,t,n){this.h=e,this.j=new P(this.h),this.g=null,this.i=[],this.l=!1,this.o=t,this.m=n},U=function(e){if(e.h.body&&!e.l){var t=function(){L(e),d.setTimeout((function(){return z(e,3)}),50)};D(e.j,e.o,2,!0,(function(){d[e.m]||t()}),t),e.l=!0}},L=function(e){for(var t=q(1,5),n=0;n<t;n++){var r=V(e);e.h.body.appendChild(r),e.i.push(r)}(t=V(e)).style.bottom="0",t.style.left="0",t.style.position="fixed",t.style.width=q(100,110).toString()+"%",t.style.zIndex=q(2147483544,2147483644).toString(),t.style["background-color"]=F(249,259,242,252,219,229),t.style["box-shadow"]="0 0 12px #888",t.style.color=F(0,10,0,10,0,10),t.style.display="flex",t.style["justify-content"]="center",t.style["font-family"]="Roboto, Arial",(n=V(e)).style.width=q(80,85).toString()+"%",n.style.maxWidth=q(750,775).toString()+"px",n.style.margin="24px",n.style.display="flex",n.style["align-items"]="flex-start",n.style["justify-content"]="center",(r=O(e.j.g,"IMG")).className=f(),r.src=R,r.style.height="24px",r.style.width="24px",r.style["padding-right"]="16px";var i=V(e),o=V(e);o.style["font-weight"]="bold",o.textContent=j;var a=V(e);for(a.textContent=M,B(e,i,o),B(e,i,a),B(e,n,r),B(e,n,i),B(e,t,n),e.g=t,e.h.body.appendChild(e.g),t=q(1,5),n=0;n<t;n++)r=V(e),e.h.body.appendChild(r),e.i.push(r)},B=function(e,t,n){for(var r=q(1,5),i=0;i<r;i++){var o=V(e);t.appendChild(o)}for(t.appendChild(n),n=q(1,5),r=0;r<n;r++)i=V(e),t.appendChild(i)},q=function(e,t){return Math.floor(e+Math.random()*(t-e))},F=function(e,t,n,r,i,o){return"rgb("+q(Math.max(e,0),Math.min(t,255)).toString()+","+q(Math.max(n,0),Math.min(r,255)).toString()+","+q(Math.max(i,0),Math.min(o,255)).toString()+")"},V=function(e){return(e=O(e.j.g,"DIV")).className=f(),e},z=function(e,t){0>=t||null!=e.g&&0!=e.g.offsetHeight&&0!=e.g.offsetWidth||($(e),L(e),d.setTimeout((function(){return z(e,t-1)}),50))},$=function(e){var n=e.i,r="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];for(n=r?r.call(n):{next:t(n)},r=n.next();!r.done;r=n.next())(r=r.value)&&r.parentNode&&r.parentNode.removeChild(r);e.i=[],(n=e.g)&&n.parentNode&&n.parentNode.removeChild(n),e.g=null},W=function(e){var t=document.createElement("div");return t.className=e,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.zIndex="-10000",t},H=function(e){T.call(this,e)};s(H,T);var G=function(e){T.call(this,e)};s(G,T);var X=function(e,t){this.l=e,this.m=new P(e.document),this.g=t,this.i=k(this.g,1),t=A(this.g,2),this.o=h(k(t,4)||""),this.h=!1,t=A(this.g,13),t=h(k(t,4)||""),this.j=new N(e.document,t,k(this.g,12))};X.prototype.start=function(){J(this)};var J=function(e){Y(e),D(e.m,e.o,3,!1,(function(){e:{var t=e.i,n=d.btoa(t);if(n=d[n]){try{var r=C(x,d.atob(n))}catch(e){t=!1;break e}t=t===k(r,1)}else t=!1}t?K(e,k(e.g,14)):(K(e,k(e.g,8)),U(e.j))}),(function(){!function(e,t,n,r,i){var o=W(n),a=function(n){document.body?(document.body.appendChild(o),d.setTimeout((function(){o?(0!==o.offsetHeight&&0!==o.offsetWidth?t():e(),o.parentNode&&o.parentNode.removeChild(o)):e()}),r)):0<n?d.setTimeout((function(){a(n-1)}),i):t()};a(3)}((function(){K(e,k(e.g,7)),U(e.j)}),(function(){return K(e,k(e.g,6))}),k(e.g,9),k(e.g,10),k(e.g,11))}))},K=function(e,t){e.h||(e.h=!0,(e=new e.l.XMLHttpRequest).open("GET",t,!0),e.send())},Y=function(e){var t=d.btoa(e.i);e.l[t]&&K(e,k(e.g,5))};!function(e,t){d[e]=function(n){for(var r=[],i=0;i<arguments.length;++i)r[i-0]=arguments[i];d[e]=l,t.apply(null,r)}}("__h82AlnkH6D91__",(function(e){"function"==typeof window.atob&&new X(window,C(G,window.atob(e))).start()}))}function mI(){if(!window.frames.googlefcPresent)if(document.body){const e=document.createElement("iframe");e.style="width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;",e.style.display="none",e.name="googlefcPresent",document.body.appendChild(e)}else setTimeout(mI,0)}function vI(e){__webpack_require__.g.RTA.tedEvent("page_event",{action:"increment",name:e})}function yI(e,t){__webpack_require__.g.RTA.tedEvent("page_event",{action:"set",name:e,value:t})}(0,We.F3)("headerbidding.intentiq",{gdpr:!1,run:function(e){let{broker:t,log:n,getConfig:r,win:i}=e;const o=r("intentiq.version","v6.07");if(!(o in hI))return void n.error(`version ${o} is not available`);n("using",o);const a=r("intentiq.manualWinReportEnabled",!0),s=i.pbjs??={};s.que??=[];let d=!1;t.once("prebid loaded",(async()=>{const e=await hI[o];n("loading intentIQ");const r=e.loadIIQ();n("script loaded, initialising IntentIqObject");const i=new r({partner:1721969090,pbjs:s,callback:()=>{d||(n("IntentIqObject initialised; resolving"),d=!0)},timeoutInMillis:350,manualWinReportEnabled:a,ABTestingConfigurationSource:"percentage",abPercentage:95});let l="N",c={};try{({currentTestGroup:l="U",groupNames:c={}}=i.intentIqConfig.abTesting)}catch(e){}const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return e[r]=n,e}),{})[l];t.register("call for page analytics",(()=>({iiqtg:u}))),t.emit("set page level targeting",{intent_iq_group:l}),n("intentIqConfig.abTesting.currentTestGroup",l),n("intentIqConfig.abTesting.currentPercentage",i.intentIqConfig.abTesting.currentPercentage),n("intentIqConfig.abTesting.groupNames",i.intentIqConfig.abTesting.groupNames),n("scenario:",u),s.que.push((()=>function(e,t,n){t.onEvent("bidWon",(t=>{const{auctionId:r,bidderCode:i,cpm:o,currency:a,originalCpm:s,originalCurrency:d,status:l,adUnitCode:c}=t;n("reporting prebid bidWon:",i,o,c),e.reportExternalWin({biddingPlatformId:1,partnerAuctionId:r,bidderCode:i,prebidAuctionId:r,cpm:o,currency:a,originalCpm:s,originalCurrency:d,status:l,placementId:c})}))}(i,s,n)))}))}}),(0,We.F3)("googleAdSense",{disableIfNoAdsServable:!0,run:function(e){let t,{broker:n,log:r}=e;n.on("slot defined",(e=>{const{slotTypes:i,pos:o,id:a}=e;i.includes("googleAdSense")?(t=t||(r("loading adSense for",o,a),n.invoke("import script","//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")),t.then((()=>{r("requesting ad",o,a),__webpack_require__.g.adsbygoogle.push({})}))):r("slot type not supported, bail",i)}))},vendorIds:{gdpr:[755]},purposeIds:{gdpr:"N/A"}}),(0,We.F3)("amazonNative",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:r}=e;t.on("slot defined",(e=>{let{slotTypes:i,id:o}=e;if(!i.includes("amazon"))return void r("slot type not supported, bailing",i);if(!document.getElementById(o))return void r("unable to fine element id:",o,", bailing");const a=`${n("pos.under-article.amazon.url","//z-na.amazon-adsystem.com/widgets/onejs")}?MarketPlace=US&adInstanceId=${n("pos.under-article.amazon.id","df745670-1d9e-4f8c-890c-b2e54a92586a")}`;r("loading scriptUrl",a),t.invoke("import script",a).then((()=>{r("script loaded")})).catch((e=>{r("error loading",a),r("error",e)}))}))},vendorIds:{gdpr:[793]},purposeIds:{gdpr:"N/A"}}),(0,We.F3)("funding-choices",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},async run(e){let{broker:t,getConfig:n,doc:r,localStorage:i,log:o,pageCriteria:a,win:s}=e;await async function(){if(s.__uspapi&&on()&&(await Zt("ready"),!dn()))return o("waiting for CMP banner to be acknowledged"),new Promise((e=>{const t=(0,so.q2)(s,"message",(n=>{let{data:r}=n;"string"==typeof r&&r.startsWith("__cmp_ui_tracking\n")&&"overlay accepted"===r.substring(18)&&(o("CMP banner has been acknowledged"),t(),e())}))}))}();const d="true"===i.getItem("dmg.ads.abe.prevFcVisible");i.removeItem("dmg.ads.abe.prevFcVisible"),t.register("call for page-unload",(()=>({fcodppv:d}))),s.googlefc=s.googlefc||{},s.googlefc.ccpa=s.googlefc.ccpa||{},s.googlefc.callbackQueue=s.googlefc.callbackQueue||[];const l=function(){if(!n("plugins.fundingChoices.overlayMonitor"))return()=>null;let e=!1;const a=new MutationObserver((n=>{for(const{addedNodes:r}of n)for(let n=0;n<r.length;n++){const s=r[n];if(s instanceof HTMLElement&&s.classList.contains("fc-ab-root")){const n=s.querySelector(".fc-dialog-container");n instanceof HTMLElement&&null!==n.offsetParent&&(a.disconnect(),e=!0,i.setItem("dmg.ads.abe.prevFcVisible","true"),c="abd",t.emit("set page level targeting",{exabd:c}),o("overlay was displayed"))}}}));return(0,xe.onBodyAvailable)((()=>{a.observe(r.body,{childList:!0})}),r),googlefc.callbackQueue.push({async AD_BLOCK_DATA_READY(){await(0,P.wR)(2e3),o("disconnecting overlay monitor"),a.disconnect()}}),()=>e}();let c;t.register("call for page analytics",(()=>{if(void 0!==c)return{exabd:c}})),googlefc.callbackQueue.push({AD_BLOCK_DATA_READY(){const e=googlefc.getAdBlockerStatus(),n=googlefc.getAllowAdsStatus(),r=function(e){const t=function(e){let t={had:!1,state:"unknown"};try{e&&(t=JSON.parse(e))}catch(e){}const n=new Ko.A(((e,t)=>{switch(e.type){case"block":return{...t,had:!0,state:"converted"===t.state||"reverted"===t.state?"reverted":"unconverted"};case"unblock":return{...t,state:t.had?"converted":"none"};case"fail":return{...t,state:"unknown"};default:return t}}),t,o.extend("store"));return n.init(),n}(i.getItem("dmg.ads.abe.gfc"));return!function(e){return e===googlefc.AdBlockerStatusEnum.EXTENSION_LEVEL_AD_BLOCKER||e===googlefc.AdBlockerStatusEnum.NETWORK_LEVEL_AD_BLOCKER}(e.adBlockerStatus)?e.allowAdsStatus===googlefc.AllowAdsStatusEnum.UNKNOWN?t.dispatch({type:"fail"}):t.dispatch({type:"unblock"}):t.dispatch({type:"block"}),i.setItem("dmg.ads.abe.gfc",JSON.stringify(t.state)),t.state.state}({adBlockerStatus:e,allowAdsStatus:n});o({adBlockerStatus:e,allowAdsStatus:n,convertedStatus:r}),void 0===c&&n!==googlefc.AllowAdsStatusEnum.UNKNOWN&&"none"!==r&&"unknown"!==r&&"unconverted"!==r&&(c="converted"===r,t.emit("set page level targeting",{exabd:c})),t.register("call for page analytics",(()=>{const t=l(),i={fcabs:e,fcaas:n,fcabcs:r};return null===t?i:{...i,fcabod:t}}))}}),await(0,xe.untilBodyAvailable)(r),fI(),"US"===a?.geo?await async function(){const e=document.createElement("script");e.src="https://fundingchoicesmessages.google.com/i/pub-6814031669762801?ers=1",e.setAttribute("nonce","ej8mtvjc_wHrxrHc5NHUNw"),await(0,xe.untilBodyAvailable)(),document.body.appendChild(e),mI()}():await async function(){const e=document.createElement("script");e.src="https://fundingchoicesmessages.google.com/i/pub-6274168003790870?ers=1",e.setAttribute("nonce","Ub2QTPjvEhLWe-kdSZr-4Q"),await(0,xe.untilBodyAvailable)(),document.body.appendChild(e),mI()}()}}),(0,We.F3)("slots.connatix",{disableIfNoAdsServable:!0,init:function(e){let{broker:t,getConfig:n,log:r,removePlugins:i,setConfig:o}=e;r("removing inread_player_top"),i(["slots.InreadPlayerTop"]);const a=n("slots.enabled",{});delete a.inread_player_top,o("slots.enabled",a);const s=n("slotDescription",{});delete s.inread_player_top,o("slotDescription",s);const d=n("slotDescriptions.initial",{});delete d.inread_player_top,o("slotDescriptions.initial",d),t.emit("set slots enabled",["inread_player_top"],!1)},purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:r,pageCriteria:i,doc:o,win:a}=e;const s=r("pos.connatix.playerId","29388c8f-d1e6-4485-be68-d4bdbf2f2b1f"),d=r("pos.connatix.cid","b418cd9a-a117-4f3a-b6bb-09c266cad464"),l=r("pos.connatix.script",`//cd.connatix.com/connatix.playspace.js?cid=${d}`),c=r("pos.connatix.trackingPixel",`//capi.connatix.com/tr/si?token=${s}&cid=${d}`),u=r("pos.connatix.loadIASVerificationPixel",!1),p=(e,n,r,i)=>a=>{a?e.error(a):(e("Rendered Successfully"),u&&t.emit("loadIASVerificationPixel",{cacheBuster:n,custom:s,document:o,width:r,height:i}))};if(a.cnxps=a.cnxps||{},a.cnxps.cmd=a.cnxps.cmd||[],a.cnxps.cmd.push((()=>{n("Library loaded"),t.register("call for page analytics",(()=>({connatix:!0})))})),t.on("mount connatix",(e=>{const r=n.extend(e);r("mounting"),"function"!=typeof a.cnxps?(r("importing",l),t.invoke("import script in iframe",{url:l})):r("script",a.cnxps.toString()),a.cnxps.cmd.push((()=>{const t=o.getElementById(e);if(!t)return void r.error(`Cannot find element #${e}`);const{width:n,height:i}=t.style;r("rendering"),a.cnxps({playerId:s}).render(e,p(r,e,parseInt(n),parseInt(i)))}))})),r("pos.connatix.disableAutoRender"))return void n("Auto rendering has been disabled");if("article"!==i?.pageType)return void n("Not suitable for PageCriteria.pageType:",i?.pageType);const h={insertMethod:async e=>{const[o,d]=r("pos.connatix.size",[480,410]),u=(0,D.zE)();"function"!=typeof a.cnxps&&t.invoke("import script in iframe",{url:l});const h=document.createElement("div");h.id=`ias-${u}`,n("slot id",h.id),h.className="connatix-placeholder";const f=i.isMobile&&!i.isTablet?h:(e=>{n("applying wrapper");const t=document.createElement("div");return t.classList.add("connatix-wrapper"),t.style.width=`${o}px`,t.style.height=`${d}px`,t.appendChild(e),t})(h);e.parentElement?.insertBefore(f,e),(new Image).src=c,a.cnxps.cmd.push((()=>{a.cnxps({playerId:s}).render(h.id,p(n,h.id,o,d))}))},log:n,margin:r("pos.connatix.margin",{top:30,bottom:60}),sourcePlugin:"connatix",targetParagraphIndex:r("pos.connatix.paragraphIndex",5)};t.register("placement requests",(()=>h))},vendorIds:{gdpr:[143]}}),(0,We.F3)("slots.connatix.v2",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[143]},init:function(e){let{broker:t,getConfig:n,log:r,removePlugins:i,setConfig:o}=e;r("removing inread_player_top"),i(["slots.InreadPlayerTop","slots.connatix"]);const a=n("slots.enabled",{});delete a.inread_player_top,o("slots.enabled",a);const s=n("slotDescription",{});delete s.inread_player_top,o("slotDescription",s);const d=n("slotDescriptions.initial",{});delete d.inread_player_top,o("slotDescriptions.initial",d),t.emit("set slots enabled",["inread_player_top"],!1)},run:async function(e){let{broker:t,log:n,getConfig:r,pageCriteria:i,doc:o,win:a,ownName:s}=e;const d=r("pos.connatix.v2.playerId","83e03252-246c-44fb-9267-8e19dccc86f9"),l=r("pos.connatix.v2.cid","b418cd9a-a117-4f3a-b6bb-09c266cad464"),c=r("pos.connatix.v2.script","//cd.connatix.com/connatix.player.js")+`?cid=${l}`,u=r("pos.connatix.v2.trackingPixel","//capi.connatix.com/tr/si")+`?token=${d}&cid=${l}`,p=r("pos.connatix.v2.loadIASVerificationPixel",!1);n({playerId:d,cid:l,scriptUrl:c,trackingPixel:u,loadIASVerificationPixel:p});const h=(e,n,r,i)=>a=>{a?e.error(a):(e("Rendered Successfully"),p&&t.emit("loadIASVerificationPixel",{cacheBuster:n,custom:d,document:o,width:r,height:i}))};if(a.cnx=a.cnx||{},a.cnx.cmd=a.cnx.cmd||[],a.cnx.cmd.push((()=>{n("Library loaded"),t.register("call for page analytics",(()=>({connatix:!0})))})),t.on("mount connatix",(e=>{const r=n.extend(e);r("mounting"),"function"!=typeof a.cnx?(r("importing",c),t.invoke("import script in iframe",{url:c})):r("script",a.cnx.toString()),a.cnx.cmd.push((()=>{const t=o.getElementById(e);if(!t)return void r.error(`Cannot find element #${e}`);const{width:n,height:i}=t.style;r("rendering"),a.cnx({playerId:d}).render(e,h(r,e,parseInt(n),parseInt(i)))}))})),r("pos.connatix.disableAutoRender"))return void n("Auto rendering has been disabled");if("article"!==i?.pageType)return void n("Not suitable for PageCriteria.pageType:",i?.pageType);const f={insertMethod:async e=>{const[o,s]=r("pos.connatix.size",[480,410]),l=(0,D.zE)();"function"!=typeof a.cnx&&t.invoke("import script in iframe",{url:c});const p=document.createElement("div");p.id=`ias-${l}`,n("slot id",p.id),p.className="connatix-placeholder";const f=i.isMobile&&!i.isTablet?p:(e=>{n("applying wrapper");const t=document.createElement("div");return t.classList.add("connatix-wrapper"),t.style.width=`${o}px`,t.style.height=`${s}px`,t.appendChild(e),t})(p);e.parentElement?.insertBefore(f,e),(new Image).src=u,a.cnx.cmd.push((()=>{a.cnx({playerId:d}).render(p.id,h(n,p.id,o,s))}))},log:n,margin:r("pos.connatix.margin",{top:30,bottom:60}),sourcePlugin:s,targetParagraphIndex:r("pos.connatix.paragraphIndex",5)};t.register("placement requests",(()=>f)),t.on("placement result",s,(e=>{n("placement result",e);const{target:r,placed:i}=e;t.emit("send event to bidmax",{type:"custom",payload:{module:"connatix",event:i?"placed":"unplaced",targetIndex:r,difference:i&&i-r}})}))}}),(0,We.F3)("widgets",{run:function(e){let{broker:t,getConfig:n,log:r,win:i,DM:o}=e;r("running");const a=n("plugins.widgets.loadEarly",!1),s=n("plugins.widgets.detailedTracking",!0),d=n("widgetsScript","https://widgets.outbrain.com/outbrain.js"),l=n("plugins.widgets.ignoreCollapsedWidgets",!1),c=n("plugins.widgets.ignoreWidgetsMatchingRegex","");l&&r("ignoring collapsed widgets"),c&&r("ignoring widgets matching regex:",c);let u={};const p={};yI("outbrain","scriptLoading"),function(){i.OBREvents=i.OBREvents||[],i.OBREvents.push({name:"all",callback:function(e){const t=n[e.name];if(t)try{t(e)}catch(t){r.warn("error while running callback:",e.name),r.warn(t)}else r.warn("no event handler for:",e.name)},widgetId:"all",feedCards:1});let e=!1;const n={viewability:n=>{if(t.emit("outbrain visible"),!e){p?.obMissedWidget&&delete p.obMissedWidget;const{feedIndex:t,servedParentWidgetId:r,...i}=n;v("containerVisible",{...i,servedWidgetId:r}),e=!0}v("visible",n),vI("outbrainView")},click:e=>{t.emit("outbrain click"),v("click",e),vI("outbrainClick")},norecs:e=>{t.emit("outbrain nocontent"),v("norecs",e),vI("outbrainNoContent")},issue:e=>{t.emit("outbrain issue"),v("issue",e),vI("outbrainIssue")},rendered:e=>{if("feedIndex"in e)t.emit("outbrain render"),v("render",e),vI("outbrainRender");else{if((0,T.Im)(u)){const e=document.querySelector(".ob-smartfeed-wrapper"),t=e&&(0,b.$R)(e).top;r("obWrapperTop",t),u={numImages:document.querySelectorAll(".image-wrap").length,...t?(0,D.E)("outbrainTopOffsetP20000px",t):{}}}p.obMissedWidget=e.servedWidgetId,t.emit("outbrain container render"),v("containerRender",e),yI("outbrain","rendered")}}}}(),n("plugins.widgets.customViewabilityTracking")&&function(){let e,n=!1;const o={},a=r.extend("viewability");i.OBREvents?.push({name:"rendered",widgetId:"all",feedCards:1,callback:r=>{l&&r.element?.clientHeight<10?a("skipping viewability tracking for collapsed widget",r):c&&new RegExp(c).test(r.widgetId)?a("skipping viewability tracking for widget matching regex",{regex:c,event:r}):(a("rendered",r),n?a.debug("event already sent"):r.parentWidgetId?r.element&&(a("tracking viewability for widget",r),o[r.widgetId]=t.once("ad viewable",r.widgetId,(()=>{n||(a(`viewed ${r.parentWidgetId}.${r.widgetId}`),n=!0,function(){for(const[e,n]of Object.entries(o))n.cancel(),t.emit("untrack viewability",e)}(),v("dmgContainerVisible",e))})),t.emit("track viewability",r.widgetId,r.element)):(a.debug("container render"),e=r))}})}();const h=o?.molFeTracking?.pageEvents;if(h?.ARTICLE_TRUNCATION_EXPAND){const{unsubscribe:e}=h?.listen(h.ARTICLE_TRUNCATION_EXPAND,(()=>{e(),r("ARTICLE_TRUNCATION_EXPAND clicked"),t.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",viewMoreClicked:!0,...u}}),t.register("call for page analytics",(()=>({viewMoreClicked:!0}))),p.viewMoreClicked=!0}))||{unsubscribe:()=>{}}}let f=!1;const g={};function m(){if(f)i.OBR?.extern.researchWidget();else{f=!0,r("loading",d);try{t.invoke("import script",d),v("scriptLoaded"),yI("outbrain","scriptLoaded")}catch(e){r.warn("unable to load script",e),t.emit("outbrain failed to load"),v("scriptFailed"),yI("outbrain","scriptFailed")}}}function v(e,n){if(!s)return;const{abtest:i,version:o,servedWidgetId:a,feedIndex:d}=n||{},l=n?.data?.message,c=!g[e];g[e]=!0,r("sending event",e,{widget:a,feedIndex:d,message:l}),t.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",widget:a,type:e,abtest:i,outbrainVersion:o,message:l,first:c,feedIndex:d,...u}})}a?(r("loading early"),m()):(r("delay loading after slot-defined"),t.on("slot defined",(function(e){let{pos:t,slotTypes:n}=e;r("slot defined",t,n),n.includes("widgets")&&(r(`loading slot "${t}"`),m())}))),t.register("call for page-unload",(()=>p))},gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},initTimeout:D.pX});const bI={rE:"1.0.2"};(0,We.F3)("capabilities.3rdPartyCookies",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=(0,xe.untilBodyAvailable)().then((()=>function(){let{iframeSrc:e=`https://cmp.dmgmediaprivacy.co.uk/3rd-party-cookie-compatibility/${bI.rE}/iframe.html`,win:t=window}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((n,r)=>{const i=t.document;t.addEventListener("message",(function r(i){e.includes(i.origin)&&"object"==typeof i.data&&null!==i.data&&"thirdPartyCookies"in i.data&&(t.removeEventListener("message",r),o.remove(),n(!!i.data.thirdPartyCookies))}));const o=i.createElement("iframe");o.width="1",o.height="1",o.style.position="fixed",o.style.left="0",o.style.bottom="-1px",o.style.border="none",o.src=e,o.addEventListener("error",r),i.body.appendChild(o)}))}({iframeSrc:n("capabilities.cookies.iframeSrc"),win:i}))).then((e=>({cookies:e.toString()})));o.then(r),t.emit("set page level targeting",o),t.register("call for page analytics",(()=>o))}}),(0,We.F3)("nonRegisteredVendors",{disableIfNoAdsServable:!0,run:async function(e){let{broker:t,log:n}=e;t.on("TCData",(e=>{n("TCData received",e),__webpack_require__.g.__tcfapi("getNonRegisteredVendors",2,((r,i)=>{if(!i)return void n("no response from getNonRegisteredVendors");const o=Object.keys(r);if(n("nonRegisteredVendorsIds",o),e.nrvString?.startsWith?.("1~")){const r=(".",""===(a=e.nrvString.slice(2))?[]:a.split(".")),i=(0,q.FF)(o,r);i.length?(n("setting unconsenting targeting",i),t.emit("set page level targeting",{unconsentednrv:i})):n("user has consented to all NRVs")}var a}))}))},gdpr:{enabledIfDissent:!0}}),(0,We.F3)("userIds.sync",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.user.sync.backend.url","https://idsync.anm.co.uk/v1/sync"),a=n("plugins.user.sync.backend.invalidStateURL","https://idsync.anm.co.uk/v1/invalidState"),s=n("plugins.user.sync.backend.debounceTime",1e3),d=n("plugins.user.sync.backend.lockTimeout",15e3),l=n("plugins.user.sync.backend.retryBackoffTime",1e4);!function(){try{const e=localStorage.getItem("mol.ads.user");if(!e)return;r("migrating old data:",e);const t=JSON.parse(e);p("inSyncState",(()=>t.references))}catch(e){r.warn("error migrating data",e)}localStorage.removeItem("mol.ads.user")}();const c=(0,I.sg)((async()=>{if(f("lock",0)+d>Date.now())return r("sync is locked, skipping"),c();var e,t,n,s;e="lock",t=Date.now(),r("setStateValue",e,t),p(e,(()=>t));try{const{inSyncState:e,queue:t}=function(){let{inSyncState:e={},processingQueue:t=[],incomingQueue:n=[]}=h();return t=[...t,...n].filter((t=>{let{userIdPartner:n,id:r}=t;return e[n]?.id!==r})),u((()=>({processingQueue:t,incomingQueue:void 0}))),{inSyncState:e,queue:t}}();if(!t.length)return void r("Nothing in the queue, bailing");const d=function(e,t){return t.reduce(((e,t)=>{let{userIdPartner:n,...r}=t;return e[n]=r,e}),e||{})}(e,t);if(!(s=d)||!("permutive"in s))return void r("Dont have permutive yet, bailing");try{const e=await(n={ids:d},i.fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));if(e.status>=500)throw new Error(`Server error (${e.status}) "${e.statusText}"`);if(e.status>=400)return r.warn("Invalid user data, sending to invalid endpoint",d),await function(e){return i.fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}({body:{state:d,responseStatus:e.status,responseStatusText:e.statusText,responseText:await e.text()}}),void g("processingQueue")}catch(e){return r("rescheduling dispatch in",l,"ms coz fetch failed",e),void setTimeout(c,l)}r("synced",t.length,"ids"),function(e){u((()=>({inSyncState:e,processingQueue:void 0})))}(d)}finally{g("lock")}f("incomingQueue")&&c()}),s);function u(e){const t=h();localStorage.setItem(_I,JSON.stringify({...t,...e(t)}))}function p(e,t){u((n=>{const i=t(n[e]);return r("updateStateValue",e,i),n[e]=i,n}))}function h(){return JSON.parse(localStorage.getItem(_I)||"{}")}function f(e,t){return h()[e]||t}function g(e){r("deleteStateValue",e),u((t=>(t[e]=void 0,t)))}t.on("sync userId",((e,t,n)=>{var r;r={createdAt:(new Date).toISOString(),userIdPartner:e,id:t,source:n},p("incomingQueue",(e=>[...e||[],r])),c()}))}});const _I="mol.ads.userids.sync";(0,We.F3)("userIds.thirdPartyUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;r("starting"),function(){const e=n("plugins.user.sync.thirdPartyUserData.supportedOrigins",["https://localhost:8124"]);window.addEventListener("message",(n=>{if("string"==typeof n.data&&n.data.startsWith(wI))if(e.includes(n.origin)&&n.source)try{const e=function(e){return JSON.parse(e.data.split(wI)[1])}(n);if("postUserData"!==e.scope)return void r("unsupported scope, bailing");t.emit("sync userId","email",e.data,n.origin)}catch(e){r.error("error handling request",e)}else r("bailing cos origin not supported:",{supportedOrigins:e,origin:n.origin})}),!1)}(),t.on("api message","postUserData",(e=>{let{email:n,source:r}=e;t.emit("sync userId","email",n,r)}))}});const wI="_dm_ads_message\n";(0,We.F3)("userIds.registration",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n}=e;n?.userId&&t.emit("sync userId","registration",n.userId,location.hostname)}});const SI=/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/,TI=/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/;function II(e){const t=[],n=e.split(".");let r;for(r=0;r<n.length;r+=2)t.push(parseInt(n[r],10).toString(16).padStart(2,"0")+parseInt(n[r+1],10).toString(16).padStart(2,"0"));return"::"+t.join(":")}function kI(e){const t=function(e){const t=new Array(8).fill(0);if("::"===e)return t;const n=e.split(":"),r=Math.min(n.length,8);for(let e=0,i=0;e<r;e++)e&&""===n[e]?i=9-r+e:(t[i]=parseInt("0x0"+n[e]),i++);return t}(e);return(t[6]>>8)+"."+(255&t[6])+"."+(t[7]>>8)+"."+(255&t[7])}function AI(e){switch(e.getLinkType()){case 0:return"unlinked";case 1:return"probabilistic";case 2:return"deterministic";default:return"uknown"}}(0,We.F3)("trackers.id5v2",{purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[131]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("trackers.id5.partnerId");if(!o)throw new Error("Missing adverts.config.trackers.id5.partnerId");const a=n("trackers.id5.usePrebid",!0),s=function(){const e=i.PageCriteria?.clientIP;if(!e)throw new Error("Cannot find user IPv4 address");const[t,n]=(r=e,TI.test(r)?[e,II(e)]:function(e){return SI.test(e)}(e)?[kI(e),e]:[]);var r;if(!t)throw new Error("Cannot find user IPv4 address");let o=`10=${encodeURIComponent(t)}&12=${encodeURIComponent(i.navigator.userAgent)}`;return n&&(o+=`&11=${encodeURIComponent(n)}`),o}(),d=async function(){r("Loading ID5");const e=await t.invoke("load script","https://cdn.id5-sync.com/api/1.0/id5-api.js","ID5");r("Requesting id5");const n=e.init({partnerId:o,pd:i.btoa(s)});return new Promise((e=>{n.onAvailable(e)}))}(),l=d.then((e=>{const n=e.getUserId();return t.emit("sync userId","id5",n,location.hostname),{id5:n}}));if(t.emit("set page level targeting",l),t.register("call for page analytics",(()=>l)),d.then((function(e){r({fromCache:e.isFromCache(),linkType:AI(e),userId:e.getUserId()})})),a){const e=n("trackers.id5.expires",395),r=n("trackers.id5.refresh",28800);t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"id5id",params:{partner:o,pd:s},storage:{type:"html5",name:"id5id",expires:e,refreshInSeconds:r}}]}})))}}});var EI=__webpack_require__(6516),CI=__webpack_require__.n(EI);function xI(e,t,n){OI(e,t),t.set(e,n)}function OI(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function PI(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,RI(t,e))}function DI(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,RI(t,e),n),n}function RI(e,t){return e.get(jI(e,t))}function jI(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var MI=new WeakMap,NI=new WeakMap,UI=new WeakMap,LI=new WeakMap,BI=new WeakMap,qI=new WeakMap,FI=new WeakMap,VI=new WeakMap,zI=new WeakMap,$I=new WeakMap,WI=new WeakSet;class HI{constructor(e){let{baseURL:t,device:n,source:r,doc:i,worker:o,log:a,win:s,broker:d}=e;!function(e,t){OI(e,t),t.add(e)}(this,WI),xI(this,MI,{writable:!0,value:void 0}),xI(this,NI,{writable:!0,value:void 0}),xI(this,UI,{writable:!0,value:void 0}),xI(this,LI,{writable:!0,value:void 0}),xI(this,BI,{writable:!0,value:void 0}),xI(this,qI,{writable:!0,value:void 0}),xI(this,FI,{writable:!0,value:void 0}),xI(this,VI,{writable:!0,value:void 0}),xI(this,zI,{writable:!0,value:void 0}),xI(this,$I,{writable:!0,value:e=>{let{data:t}=e;const{id:n,match:r}=t;if(!n)return;PI(this,UI).call(this,"match check result:",n,r);const{anchor:i,resolve:o}=PI(this,NI).get(n);i&&r&&o(function(e,t,n){return jI(t,e),n}(this,WI,GI).call(this,i)),PI(this,NI).delete(n)}}),DI(this,MI,o),PI(this,MI).onmessage=PI(this,$I),DI(this,UI,a),DI(this,NI,new Map),DI(this,LI,i),DI(this,BI,t),DI(this,qI,s),DI(this,FI,n),DI(this,VI,r),DI(this,zI,d)}async queueHrefReplacement(e){return new Promise((t=>{const n=(0,ma.A)();PI(this,NI).set(n,{anchor:e,resolve:t}),PI(this,UI).call(this,"requesting match check",n,e),PI(this,MI).postMessage({id:n,cmd:"testMatch",href:e.href})}))}}function GI(e){PI(this,UI).call(this,"matched",e,`replacing ${e.href}`);let t=`${PI(this,BI)}?q=${encodeURIComponent(e.dataset.originalHref||e.href)}&p=${encodeURIComponent((top||PI(this,qI)).location.href)}&event_type=click&trafficsource=${PI(this,VI)}&device=${PI(this,FI)}`;return PI(this,LI).referrer&&(t+=`&ref=${encodeURIComponent(PI(this,LI).referrer)}`),PI(this,qI).PageCriteria?.articleId&&(t+=`&articleid=${PI(this,qI).PageCriteria.articleId}`),t}const XI=["https://www.dailymail.co.uk","https://creative.dailymail.co.uk","https://discountcode.dailymail.co.uk","https://mailpictures.newsprints.co.uk/","https://www.mailonsunday.co.uk/","https://www.thisismoney.co.uk/","https://www.metro.co.uk/","https://www.jobsite.co.uk/","https://www.mailtravel.co.uk","https://www.zoopla.co.uk/","https://www.primelocation.com/","https://www.dmgmedia.co.uk/","https://www.mailmetromedia.co.uk/","https://paid.outbrain.com/","https://www.outbrain.com/","https://www.mymail.co.uk","https://games.dailymail.co.uk","https://shopping.dailymail.co.uk","http://www.mailtravel.co.uk","https://www.mailadvertising.co.uk","http://blakesmalltalkblog.dailymail.co.uk","https://www.mailshop.co.uk","mailto","https://twitter.com","https://share.flipboard","fb-messenger","https://m.facebook.com/sharer"];function JI(e){return e instanceof PerformanceResourceTiming}(0,We.F3)("trackonomics",{vendorIds:{gdpr:[721]},purposeIds:{gdpr:[1]},run:async function(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,pageMeta:a,win:s}=e;const d=r("plugins.trackonomics.baseURL","https://clicks.trx-hub.com/xid/mailonline_8bcce_mailonline"),l=r("plugins.trackonomics.patternURL","https://iad.anm.co.uk/tnomics/trackonomics.pattern.txt");if(!l)return void i.error("Misconfigured pattern URL");const c={trkn:"started"};t.register("call for page-unload",(()=>c));const u=r("plugins.trackonomics.supportedTopics",["Mail Best","Mail Best US"]),p=Kd({getConfig:r,broker:t,pageCriteria:o,inlineModuleIdsString:__webpack_require__.g.inlineModules}).then((e=>!e&&!((e,t)=>e.some((e=>t?.topics?.includes(e))))(u,a))),h=async function(e){const t=await fetch(e);return(await t.text()).trim()}(l).then((e=>{i.extend("pattern")(e);const r=new(CI());r.postMessage({cmd:"setPattern",pattern:e});const l=["iphone","ipad"].includes(o?.device||"")?"ios":o?.device.startsWith("android")?"android":"desktop";return new HI({baseURL:d,device:l,source:"mobile"===a?.renderPlatform?"mobile_web":"web",doc:n,worker:r,log:i,win:s,broker:t})})),f=t.register("provide anchor wrapper",(async e=>{if(!(t=e).href||XI.some((e=>t.href.startsWith(e))))return;var t;if(!e.href)return;const n=await(async e=>{if(await p)return void i("fff not found in page, and no supported topics bailing");const t=await h;return t?!!e&&await t.queueHrefReplacement(e):void 0})(e);return n?(i("isMatch",n,e.href),{priority:100,newValue:n,plugin:"button-link-wrapper"}):void 0}));await p?(i(" BAILOUT:: fff not found in page, and no supported topics bailing"),f.cancel()):c.trkn="ready"}}),__webpack_require__(4350),(0,We.F3)("abe.transferPerformance",{isAdsFreeSupported:!1,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.register("call for page-unload",(()=>{const e=__webpack_require__.g.performance.getEntries().filter(JI),[t,r]=e.reduce(((e,t)=>{let[n,r]=e;return n+=t.duration,r+=t.transferSize,[n,r]}),[0,0]),i=e.length,o=r/(t/1e3)/1e3;return n("resourceTransfer",i,o),{resourceTranfer:{numResources:i,rate:o}}}))}});var KI=__webpack_require__(812);(0,We.F3)("nonAdServable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,DM:n,getConfig:r,log:i,setConfig:o,pageCriteria:a,queryParams:s,addPlugins:d,removePlugins:l,registerPluginBouncer:c}=e;if(!a?.nonAdservable||s.ignoreDisableAds)return;const u=new Set(r("plugins.nonAdServable.disablePlugins",[])),p=r("plugins.nonAdServable.enabledPlugins",[]);i("plugins disabled via config",u),c(((e,t)=>{const n=i.extend(e);return!t.disableIfNoAdsServable&&!u.has(e)||(n("disabling plugin"),!1)})),(0,KI.E)(r,o,["smart_feed"]),p.length&&(i("enabled plugins",p),d(p)),YI(n),(0,xe.appendStyle)("#mini-carousel-wrapper {display: none;}"),l(["trackers.pubcommon","imaSDK","vpaid","prebid","chromelessWaitForBillboard"]),t.register("call for page analytics",(()=>({adsDisabled:!0})))}});const YI=function(e){e?.molFeComponents?.setConfig?.("mol-fe-videoplayer",{plugins:{flyout:{enabled:!1,forceFlyout:{enabled:!1}}}})};var QI=__webpack_require__(5452),ZI=__webpack_require__.n(QI);(0,We.F3)("conditionalEnable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n,getConfig:r,pageCriteria:i,setConfig:o,registerPluginBouncer:a}=e;n("starting");const s=r("enableCondition.downlinkMin",0),d=ZI()(),l=r("enableCondition.notForAuthorTypes",[]),c=new Set(r("enableCondition.disablePlugins",[]));if(s>=d)return n("disabling ads because of downlink:",{downlinkMax:d,downlinkMin:s}),p();const u=i.authorType;if(l.includes(u))return n("disabling ads because of controvential author:",{controversialAuthors:l,authorType:u}),p();function p(){a(((e,t)=>{const r=n.extend(e);return!t.disableIfNoAdsServable&&!c.has(e)||(r("disabling plugin"),!1)})),(0,KI.Z)(o),t.register("call for page analytics",(()=>({adsDisabled:!0})))}}}),(0,We.F3)("dmp.mobian",{purposeIds:{gdpr:[7]},vendorIds:{gdpr:[1348]},init(e){let{broker:t,getConfig:n,log:r}=e;const i=n("dmp.mobian.endpoint","https://prebid.outcomes.net/api/prebid/v1/assessment/async"),o=n("dmp.mobian.gamKeys",["mrisk","cat","sent","emotions","genres","apValues"]),a=Date.now(),s=async function(e){const t=await fetch(`${e}?url=${encodeURIComponent(location.href.replace(location.search,""))}`);if(!t.ok)throw new Error(`Response: ${t.status} ${t.statusText}`);const n=await t.json();if(!n||!n.meta?.has_results)throw new Error("No results");const{results:r}=n;return{mrisk:r.mobianRisk||"unknown",cat:r.mobianContentCategories||[],sent:r.mobianSentiment||"unknown",emotions:r.mobianEmotions||[],genres:r.mobianGenres||[],apValues:r.ap||{},themes:r.mobianThemes||[],tones:r.mobianTones||[]}}(i).then((e=>(r({kvs:e}),e))).catch((e=>(r.warn(e),{})));n("dmp.mobian.reportTime")&&s.finally((()=>{t.emit("send event to bidmax",{type:"custom",payload:{module:"dmp",event:"mobianLoaded",ms:Date.now()-a}})})),t.emit("set page level targeting",s.then((e=>(0,T.Up)(e,o)))),t.register("call for page analytics",(()=>s.then((e=>(0,T.Im)(e)?{}:{mobian:e}))))}}),(0,We.F3)("dmp.ias.verificationPixel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r}=e;if(new RegExp(n("plugins.disable-ias-bsp.domainRegex","^(live-uk|live-us|cc).mol.dmgt.net$")).test(__webpack_require__.g.location.hostname))return void r("Bailout  since domain doesn't match");const i=n("dmp.ias.pubId",931554);t.on("loadIASVerificationPixel",(e=>{let t,{document:n,cacheBuster:o,width:a,height:s,...d}=e;const l=ek({anId:i,width:a,height:s,...d});r("iasScriptUrl",l);const c=n.createElement("iframe");(c.frameElement||c).style.cssText="width: 0; height: 0; border: 0; display: none;",c.src="javascript:false";const u=n.getElementById(`ias-${o}`);u?.parentNode?.insertBefore(c,u);try{t=c?.contentWindow?.document}catch(e){const r=n.domain;c.src="javascript:var d=document.open();d.domain='"+r+"';void(0);",t=c?.contentWindow?.document}t?.open?.().write("<body onload=\"window.__IntegralASUseFIF = true;var js = document.createElement('script');js.src = '"+l+"';document.body.appendChild(js);\">"),t?.close?.()}))}});const ek=e=>{let{anId:t,width:n,height:r,...i}=e;return["impId","pubId","chanId","placementId","pubCreative","pubOrder","custom"].reduce(((e,t)=>t in i?`${e}&${t}=${i[t]}`:e),`//pixel.adsafeprotected.com/jload?anId=${t}&campId=${n}x${r}&adsafe_par`)};var tk=__webpack_require__(3465),nk=__webpack_require__(9149);(0,We.F3)("dmp.ias.targeting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:r,pageCriteria:i,win:o}=e;if(new RegExp(n("plugins.disable-ias-bsp.domainRegex","^(live-uk|live-us|cc).mol.dmgt.net$")).test(__webpack_require__.g.location.hostname))return void r("Bailout  since domain doesn't match");if("true"===i?.sponsored)return void r("sponsored article, bailing");const a=Object.values(n("slotDescriptions.initial",{})).filter((e=>!e.isTemplate&&e.slotTypes.includes("gpt"))).map(ik).filter((e=>{let{adSlotId:t,size:n,adUnitPath:r}=e;return t&&n&&r}));o.__iasPET=o.__iasPET||{};const s=o.__iasPET;s.queue=s.queue||[],s.pubId=n("dmp.ias.pubId",931554);const d=n("dmp.ias.targetingRequestTimeout",1e3),l=`//static.adsafeprotected.com/iasPET.${n("dmp.ias.petScriptVersion",1)}.js`;r("loading script",l),t.invoke("import script",l);let c={};t.register("get tags",(e=>{const{slot:{pos:t,id:n}}=e;r("get tags requested",t);const i=c[n];return r(`tags for ${t}:`,i),i})),r("iasPETSlots",a),r("requesting targeting, timeout: ",d),s.queue?.push({adSlots:a,dataHandler:e=>{r("ias data received ",e);const i=JSON.parse(e);c=i.slots;const o=n("dmp.ias.targeting.v2",{brandsafety:!0,fr:"fr","custom.ias-kw":"ias-kw"});r("targetingKeys ",o);const a=rk(i,o);r("pageTargeting",a,o),t.emit("set page level targeting",a),t.register("call for page analytics",(()=>({iasTargeting:a})))},timeout:d})}});const rk=(e,t)=>Object.entries(t).reduce(((t,n)=>{let[r,i]=n;const o=(0,tk.A)(e,r);return!0===i?{...t,...o}:i?((0,nk.A)(t,i,o),t):t}),{}),ik=e=>({adSlotId:e.id,size:e.size,adUnitPath:e.adUnit});(0,We.F3)("dmp.ias.prebidRtd",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:function(e){let{getConfig:t,broker:n,log:r,pageCriteria:i}=e;if(new RegExp(t("plugins.disable-ias-bsp.domainRegex","^(live-uk|live-us|cc).mol.dmgt.net$")).test(__webpack_require__.g.location.hostname))return void r("Bailout  since domain doesn't match");if("true"===i?.sponsored)return void r("sponsored article, bailing");const o=t("ias.rtd.auctionDelay",2e3),a={name:"ias",params:{pubId:t("dmp.ias.pubId",931554)}},s=[o?{...a,waitForIt:!0}:a],d=o?{auctionDelay:o,dataProviders:s}:{dataProviders:s};r("setting realTimeData rtd",d),n.register("provide prebid config",(()=>({realTimeDataConfig:d})))}}),(0,We.F3)("trackers.universalid",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("trackers.universalIds",[]);i.length&&t.register("provide prebid config",(()=>({userSyncConfig:{userIds:i,syncDelay:n("plugins.prebid.syncDelay",3e3)}})))}}),(0,We.F3)("prebidUserSync",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:async e=>{let{getConfig:t,broker:n,log:r}=e;const i=new Promise((async e=>{const[,t]=await n.until("configure and start prebid");e(t)}));n.register("provide prebid config",(async()=>{const e=await i;return{userSyncConfig:{...S()({},t("plugins.prebid.userSync"),{filterSettings:{iframe:{bidders:ok(e)}}})}}}))}});const ok=e=>Array.from(new Set(e.reduce(((e,t)=>[...e,...t.bids.map((e=>e.bidder))]),[])));(0,We.F3)("trackers.unifiedid",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n}=e;t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=a8r0pns&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}}],syncDelay:n("plugins.prebid.syncDelay",3e3)}})))}}),(0,We.F3)("players.oov",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;n("running"),window.addEventListener("blur",(()=>{t.emit("sync video tags update",{cust_params:{oov:!0}})})),window.addEventListener("focus",(()=>{t.emit("sync video tags update",{cust_params:{oov:!1}})})),t.emit("sync video tags update",{cust_params:{oov:!document.hasFocus()}})}}),(0,We.F3)("analytics.fullscreenOverlay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n}=e;const r=e=>{t.emit("send event to bidmax",{type:"custom",payload:{...e,module:"fullScreenOverlay"}})};t.once("fullScreenOverlayStarted",(e=>{t.register("call for page analytics",(()=>({fullScreenOverlay:{owner:e}})))})),n("analytics.fullscreenOverlay.reportToBidmax",!1)&&(t.on("fullScreenOverlayStarted",(e=>{r({owner:e,state:"started"})})),t.on("fullScreenOverlayEnded",(e=>{r({owner:e,state:"ended"})})))}}),(0,We.F3)("analytics.greenbids",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[7,8,10]},vendorIds:{gdpr:[1232]},run(e){let{broker:t,log:n,getConfig:r}=e;n("enabled");const i=r("greenbids.analyticsOptions",{pbuid:"mailmetromedia-pbuid",sampling:1});t.register("provide prebid config",(0,I.iH)(n.extend("analyticsConfig"),(()=>({analyticsConfig:[{provider:"greenbids",options:i}]}))))}}),(0,We.F3)("rtd.greenbids",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[7,8,10]},vendorIds:{gdpr:[1232]},run(e){let{broker:t,log:n,getConfig:r}=e;const i=r("greenbids.rtdProvider"),o=r("greenbids.auctionDelay");i?t.register("provide prebid config",(0,I.iH)(n.extend("realTimeDataConfig"),(()=>{const e={realTimeDataConfig:{dataProviders:[i]}};return o&&(e.realTimeDataConfig.auctionDelay=o),e}))):n.warn("no config, bailing")}});var ak=__webpack_require__(8841),sk=__webpack_require__.n(ak),dk=__webpack_require__(9873);(0,We.F3)("trackers.watchdog",{ccpa:{enabledIfDissent:!0},description:"Monitors non user-initiated reloads",gdpr:{enabledIfDissent:!0},run(e){let{broker:t,doc:n,getConfig:r,log:i,pageCriteria:o,win:a}=e;const s=function(){let e,t=!1;return n.documentElement.addEventListener("click",(()=>{i("clicked"),t=!0,v(),e&&(e=clearTimeout(e)),e=setTimeout((()=>{i("click reset"),t=!1,v()}),300)}),{capture:!0}),()=>t}(),d=function(){let e=!1;return sk()("⌘+r, ctrl+r, alt+f4",(()=>{e=!0,v()})),()=>e}(),l=function(){let e=n.hasFocus();return n.documentElement.addEventListener("mouseenter",(()=>{e=!0,v(),i("entered")})),n.documentElement.addEventListener("mouseleave",(()=>{e=!1,v(),i("left")})),()=>e}(),c=function(){let e=!1;return n.documentElement.addEventListener("touchstart",(()=>{i("touch start"),e=!0,v()})),n.documentElement.addEventListener("touchend",(()=>{i("touch end"),e=!1,v()})),()=>e}(),u=()=>{const e=Ka(a);return e?e.document.hasFocus()?e===a?"top":e.name:"none":"unknown"},p=function(){const e=o&&1e3*Number(o.timestamp)+1e3*o.refresh;return()=>!!e&&Date.now()>=e}(),h=function(){let e=!1;return window.addEventListener("visibilitychange",(()=>{const{hidden:t}=document;i("hidden:",t),e=t,y("visibilitychange",{hidden:t},!0),v()}),{capture:!0,passive:!0}),()=>e}();r("trackers.watchdog.reportStart",!0)&&y("start",(0,dk.f)(i));const f=(0,I.Ed)();let g=0;function v(){const e=Math.round(performance.now()/1e3),t={st:m.S,ts:Date.now(),dtis:e,c:s(),fw:u(),t:c(),miv:l(),prt:p(),rk:d(),h:h(),u:(0,Rt.tW)(window.location.href)};i("saving state",t),localStorage.setItem("mol.ads.watchdog",JSON.stringify(t)),g&&clearTimeout(g),g=setTimeout(v,1e3*f.next().value)}function y(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i("reporting",{event:e,flush:r,payload:n}),t.emit("send event to bidmax",{type:"watchdog",event:e,payload:n},r)}v(),t.on("page load",(async()=>{!async function(){const e=await t.invoke("get page level analytics");localStorage.setItem("mol.ads.watchdog.previous-pageview",JSON.stringify(e))}()})),t.register("call for page-unload",(()=>{const e={clicked:s(),focusedWin:u(),isTouching:c(),mouseInViewport:l(),postRefreshTime:p(),refreshKeys:d(),hidden:h()};return i("unload",e),e}))}}),(0,We.F3)("abe.pageUnload",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n}=e,r={};t.on("adblock detection status",(e=>{r=e,n("adBlockerStatus",r)})),t.register("call for page-unload",(()=>r))}});const lk=["pageViewId","articleId","channel","device","fbapp","geo","isMobile","isTablet","pageType","sponsored","subchannel","cljVersion","cljNode","articleStyle","sponsorName"],ck=["renderPlatform"];(0,We.F3)("analytics.pageMeta",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:e=>{let{broker:t,log:n,pageMeta:r,pageCriteria:i,doc:o}=e;const a=(0,xe.loaded)(o);function s(){const{authorsShortNames:e,publishedDate:t}=r||{},n=(Date.now()-Number(t))/1e3/60/60/24;return{...r?(0,T.Up)(r,ck):{},authors:e,daysSincePublished:n}}function d(){const e=o.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]'),t=e?.classList.contains("article-truncated");return t?{trunc:1}:{}}t.register("call for page analytics",(()=>{const e={...i?(0,T.Up)(i,lk):{},...s()};return n("sync:",e),e})),t.register("call for page analytics",(()=>a.then((()=>{const e=d();return n("async:",e),e})))),t.emit("set page level targeting",a.then((()=>{const e=d();return n({pageLevelTargeting:e}),e})))}}),(0,We.F3)("page.topics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:e=>{let{broker:t,log:n,pageMeta:r}=e;if(r?.topics?.length){n("topics found",r.topics),t.register("call for page analytics",(()=>({topics:r.topics})));const e=r.topics.map((e=>e.toLowerCase().replace(/[^a-zA-Z0-9]/g,"_")));n("sending:",e),t.emit("set page level targeting",{tags:e})}}}),(0,We.F3)("prebid.lexiconId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,5,6,7,8,9,10]},run:e=>{let{broker:t,getConfig:n}=e;const r=n("prebid.lexiconId.pid","0013300001f6OFRAA2");t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"33acrossId",params:{pid:r},storage:{type:"html5",name:"33acrossId",expires:90,refreshInSeconds:28800}}]}})))},vendorIds:{gdpr:[58]}});const uk=e=>!(null==e);(0,We.F3)("prebid.optout",{disableIfNoAdsServable:!0,vendorIds:{gdpr:"N/A"},purposeIds:{gdpr:"N/A"},run:e=>{let{broker:t,log:n}=e;const r="_pbjs_id_optout",i="_pubcid_optout",o=uk(localStorage.getItem(r))||uk((0,b.Ri)(r)),a=uk(localStorage.getItem(i))||uk((0,b.Ri)(i));n("pbjsOptOut:",o),n("pubcidOptout:",a);const s=Object.entries({pbjsOptout:o,pubcidOptout:a}).reduce(((e,t)=>{let[n,r]=t;return r?{...e,[n]:r}:e}),{});(0,T.Im)(s)||t.register("call for page analytics",(()=>({...s})))}}),(0,We.F3)("bidders.mediagrid.skin",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:r,win:i}=e;const o=n("plugins.mediagrid.skin.minWidth",1224),a=n("plugins.mediagrid.skin",pk);if(r("config:",{minWidth:o,adUnits:a}),i.innerWidth<o)return void r("bailing, viewport width too small:",i.innerWidth);const s=a.flatMap((e=>{let{bids:t}=e;return t.map((e=>{let{params:{uid:t}}=e;return t}))}));r("known skins:",s);const d=new Set(s);t.register("provide prebid adUnits",(()=>a)),t.register("prebid reduce bidderSettings",(e=>(e.grid||(e.grid={}),e.grid.adserverTargeting||(e.grid.adserverTargeting=[]),e.grid.adserverTargeting.push({key:"hb_skin",val:e=>{const t=l[e.requestId];return d.has(t)}}),e)));const l={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;r("bidRequested",n),"grid"===t&&n.forEach((e=>{let{bidId:t,params:{uid:n}}=e;l[t]=n}))}))}))},vendorIds:{gdpr:[686]}});const pk=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"grid",params:{uid:344499}}]}];function hk(e,t,n,r){try{e.__yb_pkg_version="3eec2a79-9905-4dbe-bb82-cd8bdf45e73d"}catch(t){}try{void 0!==e.__yb_tz_hour_offset?D=e.__yb_tz_hour_offset:(j=new Date,U=new Date(j.toLocaleString("en-US",{timeZone:"UTC"})),D=(new Date(j.toLocaleString("en-US",{timeZone:"America/New_York"})).getTime()-U.getTime())/36e5,e.__yb_tz_hour_offset=D)}catch(t){e.__yb_tz_hour_offset=D=-5}var i,o,a,s,d,l,c,u,p,h,f,g,m,v,y,b,_,w,S,T,I,k,A,E,C,x,O,P,D,R=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],j={"1_0010":"01","1_0011":"02","1_0020":"03","1_0021":"04","1_0110":"05","1_0111":"06","1_0120":"07","1_0121":"08","1_0310":"09","1_0311":"0a","1_0320":"0b","1_0321":"0c","1_0610":"0d","1_0611":"0e","1_0620":"0f","1_0621":"0g","1_0810":"0h","1_0811":"0i","1_0820":"0j","1_0821":"0k","2_0000":"19","2_0001":"1a","2_0002":"1b","2_000z":"1c","2_0030":"1d","2_0031":"1e","2_0032":"1f","2_003z":"1g","2_0100":"1h","2_0101":"1i","2_0102":"1j","2_010z":"1k","2_0130":"1l","2_0131":"1m","2_0132":"1n","2_013z":"1o","2_0300":"1p","2_0301":"1q","2_0302":"1r","2_030z":"1s","2_0330":"1t","2_0331":"1u","2_0332":"1v","2_033z":"1w","2_0600":"1x","2_0601":"1y","2_0602":"1z","2_060z":"20","2_0630":"21","2_0631":"22","2_0632":"23","2_063z":"24","2_0800":"25","2_0801":"26","2_0802":"27","2_080z":"28","2_0830":"29","2_0831":"2a","2_0832":"2b","2_083z":"2c","1_0z10":"3l","1_0z11":"3m","1_0z20":"3n","1_0z21":"3o","2_0z00":"3x","2_0z01":"3y","2_0z02":"3z","2_0z0z":"40","2_0z30":"41","2_0z31":"42","2_0z32":"43","2_0z3z":"44"},M={gpt:0,amp:1,video:2,mobile:3,gpt_lite:4,adx_tag:5},N={out_of_page:0,anchor:1,app_open:2,banner:3,instream_audio:4,instream_video:5,interstitial:6,native_advance:7,rewarded:8,others:35},U={desktop:0,smartphone:1,tablet:2,connecttv:3,others:35},L=(e={ios:0,android:1,macos:2,windows:3,others:35},{chrome:0,safari:1,edge:2,others:35});function B(e,t){return-1!==e.indexOf(t)}function q(e,t){return e.some((function(e){return e.brand===t}))}try{return"u"===t?[]:(o=function(e,t){if(void 0===(e=M[e]))throw new Error;return t=void 0!==N[t="top_anchor"!==t&&"bottom_anchor"!==t?t:"anchor"]?N[t]:N.others,{rt:R[e],ivf:R[t]}}("gpt",n),i||(P=function(){var e,t=(t=(t=window.navigator)&&t.userAgent)||"",n=(n=(n=window.navigator)&&n.userAgentData)||null;return{os:B(e=t,"Win")?"windows":B(e,"like Mac")?"ios":B(e,"Mac")?"macos":B(e,"Android")?"android":"others",dc:function(e){return B(e,"iPad")||B(e,"Tablet")||B(e,"Android")&&!B(e,"Mobile")||B(e,"Silk")}(e=t)?"tablet":function(e){return B(e,"iPod")||B(e,"iPhone")||B(e,"Android")||B(e,"IEMobile")}(e)?"smartphone":function(e){return B(e,"Roku")||B(e,"SMART-TV")||B(e,"SmartTV")||B(e,"NetCast")||B(e,"crkey")}(e)?"connecttv":"desktop",browser:function(e,t){return t=function(e){if(e&&e.brands){if(q(e.brands,"Opera"))return"opera";if(q(e.brands,"Microsoft Edge"))return"edge";if(q(e.brands,"Chrome"))return"chrome"}return null}(t),t||(B(e,"OPR/")||B(e,"Opera")?"others":B(e,"Edg")?"edge":B(e,"Firefox")?"others":B(e,"Chrome")?"chrome":B(e,"Safari")||B(e,"iPad")||B(e,"iPhone")||B(e,"iphone")?"safari":"others")}(t,n)}}(),x=void 0!==L[P.browser]?L[P.browser]:L.others,O=void 0!==e[P.os]?e[P.os]:e.others,P=void 0!==U[P.dc]?U[P.dc]:U.others,i={dc:R[P],os:R[O],browser:R[x]}),a=i,s=o.rt,d=o.ivf,l=a.dc,c=a.os,u=a.browser,h=function(e,t){if(e)return["0"];for(var n=Math.floor(1e3*Math.random()+1),r=[],i=0,o=0;o<t.length;++o){for(var a=1,s=t[o],d=0,l=0;l<s.length;l++)if(n<=(d+=s[l])){a=l+1;break}1<a&&0<i&&(a=a+i-1),i+=t[o].length;var c=R[a];for(l=0;l<r.length;++l)if(r[l]===c){l=-1;break}-1!==l&&r.push(c)}return r}(p="b"===t,[[900,10,10,10,10,10,10,10,10,10,10],[900,20,20,20,20,20]]),E=D,E=(new Date).getTime()+36e5*E,C=parseInt(E/36e5,10)%24,f=[[1,0],[3,24],[6,32]].map((function(e){return R[Math.floor(C/e[0])+e[1]]})),v=s,y=d,_=c,w=u,S=h,T=f,I=[],"0"===(b=l)||"3"===b?(w=j["2_"+v+y+b+w])&&I.push(w):(w=j["1_"+v+y+b+_])&&I.push(w),k=[],A=[],I.forEach((e=>{k.push("-"+e);for(var t=0;t<S.length;++t){var n=e+S[t];k.push(n),T.forEach((e=>{A.push(n+e)}))}})),g={short:k,full:A},m=[],m=p?[{key:"in2w_key20",values:g.full}]:[{key:"in2w_key16",values:g.short},{key:"in2w_key20",values:g.full}],r&&r.length&&m.push({key:"in2w_key21",values:[function(e){var t,n,r,i=e,o=[],a=1e5,s=1,d=1e5,l=1;for(t in i="fluid"===e||"number"==typeof i[0]&&"number"==typeof i[1]?[e]:i)"fluid"===i[t]?o.push(i[t]):((n=i[t][0])<a&&(a=n),s<n&&(s=n),(r=i[t][1])<d&&(d=r),l<r&&(l=r),o.push(n+"x"+r));o.sort(((e,t)=>e<t?-1:1)),e=o.length;var c=(o.push(a),o.push(s),o.push(d),o.push(l),o.push(e),o.join(","));try{if(!c.length)return"0";let e=305419896;for(let t=0;t<c.length;++t)e^=(e<<5)+(e>>2)+c.charCodeAt(t)&4294967295;return(e<0?4294967296+e:e)+""}catch(e){return"-1"}}(r)]}),m)}catch(t){return[{key:"in2w_key20",values:["4p10","4p1o","4p1w"]}]}}function fk(e){let{log:t,localBroker:n,broker:r,getConfig:i}=e;const o=n.until("versions").then((e=>{let[{tcfv2Version:t,tcfv2UiVersion:n}]=e;return`${t.length?t:"DEV"} ${n.length?n:"DEV"}`})),a=n.until("valid consent").then((e=>{let[t,n]=e;const{tcString:r,molGvlVersion:i,cmpId:o}=t,{vendorListVersion:a}=pd(r);return{cmpId:o,iabv:a,molGvlVersion:i,degree:n}})),s=async function(){const{cmpId:e,iabv:n,molGvlVersion:r,degree:s}=await a,d={cmp:i("cmp.model","tcfv2"),cmpVersion:await o,consent:s,gdpr:{iabv:String(n)},cmpId:e,molGvlVersion:r};return t("bidmax targeting:",d),d}();r.register("call for page analytics",(()=>s))}function gk(e){let{log:t,broker:n,localBroker:r,getConfig:i}=e;const o=i("site","mol"),a=e=>n.emit("send event to bidmax",e);let s=e=>{const n={account:o,...e};t("sending to bidmax using barebones",n),(0,hd.x)(n)};n.on("system ready",(()=>{s=a})),r.on("send event to bidmax",(e=>s(e)))}(0,We.F3)("page.responsiveness",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let t,{broker:n,log:r}=e,i=0,o=Date.now(),a=document.hasFocus();__webpack_require__.g.addEventListener("blur",(()=>{r("blur event received, halting monitoring"),a=!1,t&&clearTimeout(t)})),__webpack_require__.g.addEventListener("focus",(()=>{r("focus event received, restarting monitoring"),a=!0,o=Date.now(),s()})),n.register("call for page-unload",(()=>({mut:i})));const s=()=>{if(!a)return;let e=Date.now();i=Math.max(i,e-o-1e3),o=e,r("max delay",i),t=setTimeout(s,1e3)};s()}}),(0,We.F3)("bidders.criteoV2",{vendorIds:{gdpr:[91]},purposeIds:{gdpr:[1]},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.criteo.v2.networkId",10352);let o=n("plugins.bidders.criteo.v2.display",{});const{width:a}=(0,b.YC)();o=a>1580&&o.wideSkiesAdUnits?{...o.adUnits,...o.wideSkiesAdUnits}:o.adUnits;const s=Object.entries(o).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"criteo",params:{networkId:i,publisherSubId:e}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));r("adUnits",s),t.register("provide prebid adUnits",(()=>s)),t.register("prebid reduce bidderSettings",(e=>(e.criteo||(e.criteo={}),e.criteo.storageAllowed=!0,e)))}}),(0,We.F3)("fbWebview",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){let{broker:t,getConfig:n,doc:r,win:i}=e;const o=n("fbWebview.useReferrer",!1),a=r.referrer.includes("facebook.com"),s=i.navigator.userAgent;(s.includes("FBAV")||s.includes("FBAN")||o&&a)&&t.emit("set page level targeting",{platform:"FBOS"})}}),(0,We.F3)("snapChatWebView",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){let{broker:t,getConfig:n,doc:r,win:i}=e;const o=n("snapChatWebView.useReferrer",!1),a=r.referrer.includes("snapchat.com");(i.navigator.userAgent.toLowerCase().includes("snapchat")||o&&a)&&t.emit("set page level targeting",{platform:"Snapchat"})}}),(0,We.F3)("bidders.unruly",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[36]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.unruly.adUnits",n("plugins.bidders.rhythmOne.adUnits",{}));r(i);const o=new _r(n("slotDescriptions.initial",{})),a=Object.entries(i).reduce(((e,t)=>{let[n,{placementId:i,siteId:a,sizes:s=o.getSizes(n)}]=t;return s?[...e,{code:n,sizes:s,mediaTypes:{banner:{sizes:s}},bids:[{bidder:"unruly",params:{siteId:a||i}}]}]:(r(`no adDescription for pos: ${n}`),e)}),[]);r({adUnits:a}),t.register("provide prebid adUnits",(()=>a))}}),(0,We.F3)("bidders.unruly.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[36]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(async(e,t)=>{const i="video"===e?t?"autoplay":"ctp":e,o=n(`plugins.bidders.unruly.video.adUnits.${i}`,n(`plugins.bidders.rhythmOne.video.adUnits.${i}`));return r({adUnitName:i,siteId:o}),o&&{bids:[{bidder:"unruly",params:{siteId:o}}]}}))}}),(0,We.F3)("intowow",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n,getConfig:r,win:i}=e;const o=r("plugins.intowow.optRatio",.3),a=r("plugins.intowow.trafficType",Math.random()<o?"o":"b"),s="o"===a?{intowow_optimized:["true"]}:{intowow_optimized:["false"]};n("setting page level targeting",s),t.emit("set page level targeting",s),t.register("call for page analytics",(()=>({intowowTrafficType:"o"===a?"optimized":"nonOptimized"}))),t.register("get tags",(e=>{let{slot:{pos:t,size:r}}=e;n("get tags",t,r);const o=hk(i,a,"banner",r).reduce(((e,t)=>{let{key:n,values:r}=t;return{...e,[n]:r}}),{});return n("targeting",t,o),o})),t.register("get video tags",(e=>{let{pos:t,screen:{width:r,height:o}}=e;const s=hk(i,a,"instream_video",[[r,o]]).reduce(((e,t)=>{let{key:n,values:r}=t;return{...e,[n]:r}}),{});return n("targeting",t,s),{cust_params:s}}))}}),(0,We.F3)("prebid.fledge",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.prebid.fledge.supportedPositions",["all"]),o=new Set(i),a=n("plugins.prebid.fledge.supportedBidders",["openx"]),s=new Set(a);if(!i.length||!a.length)return void r("no positions or no bidders configured, bailing");t.register("provide prebid config",(()=>(r("provide prebid config"),{fledgeForGptConfig:{enabled:!0}}))),t.register("provide prebid bidder config",(()=>(r("provide prebid bidder config"),[a.filter((e=>"all"!==e)),{fledgeEnabled:!0}])));const d=function(e){return(t,n)=>{const{bidder:r}=n;return e.has(r)||e.has("all")?t.fledgeBids.push(n):t.bids.push(n),t}}(s),l=function(e,t){return(n,r)=>{const{bids:i,code:o,...a}=r;if(e.has(o)||e.has("all")){const{bids:e,fledgeBids:r}=i.reduce(t,{bids:[],fledgeBids:[]});if(e.length&&n.push({bids:e,code:o,...a}),r.length){const e=JSON.parse(JSON.stringify(a));e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.ae=1,n.push({bids:r,code:o,...e})}}else n.push(r);return n}}(o,d);t.interceptOnce("configure and start prebid",((e,t)=>{let[n,i,o]=e;const a=o.reduce(l,[]);r("adUnits",a),t(n,i,a)})),t.intercept("enrich video adUnits",((e,t)=>{let[n,i]=e;return r("received adUnits",i),t(n,i.reduce(l,[]))}))}}),(0,We.F3)("originTrials",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:async e=>{let{broker:t,doc:n,getConfig:r,log:i}=e;i("running");const o=document.createElement("meta");o.setAttribute("http-equiv","origin-trial"),o.setAttribute("content","A6J37Z0ggn4BcJKHxifWnGCOxxYKVW8PF63TnTXMmKNeOSlfiSGW+9k9sH40edl9R+o2peUbA9gtgyuGMdpdZwkAAACFeyJvcmlnaW4iOiJodHRwczovL2RhaWx5bWFpbC5jby51azo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="),n.querySelector("head")?.appendChild(o);const a={};"browsingTopics"in n&&n.featurePolicy.allowsFeature("browsing-topics")&&(i("browsing topics enabled"),n.browsingTopics?.()?.then((e=>{if(i("topics",e),r("plugins.originTrials.topics.sendToBidmax",!1))try{const n=e.map((e=>e.topic)),r=e[0].taxonomyVersion;t.emit("send event to bidmax",{type:"originTrials",payload:{topics:n,tv:r}})}catch(e){const t=e instanceof Error?e.message:String(e);console.error(t)}})),a.bt=!0),"joinAdInterestGroup"in navigator&&n.featurePolicy.allowsFeature("join-ad-interest-group")&&(i("fledge interest group enabled"),a.fig=!0),"runAdAuction"in navigator&&n.featurePolicy.allowsFeature("run-ad-auction")&&(i("fledge auction enabled"),a.fa=!0),n.featurePolicy.allowsFeature("attribution-reporting")&&(i("attribution reporting enabled"),a.ar=!0),(0,T.Im)(a)||t.register("call for page analytics",(()=>({ot:{...a}})))}}),(0,We.F3)("bidders.ozone.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[524]},run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.ozone.video.publisherId","OZONEDM00001"),o=n("plugins.bidders.ozone.video.placementIds",{video:"3500010853"}),a=n("plugins.bidders.ozone.video.siteId","1500000022"),s={video:{...n("plugins.slots.video.v2.mediaTypes.video",{playerSize:[636,358],context:"instream",mimes:["video/mp4","application/javascript"],protocols:[1,2,3,4,5,6],api:[1,2],linearity:1,minduration:5,maxduration:30}),playerSize:n("plugins.bidders.ozone.video.playerSize",[640,480])}},{cancel:d}=t.register("provide video adUnits",(async(e,t)=>{if(!o[e])return;const n=[{bidder:"ozone",params:{publisherId:i,placementId:o[e],siteId:a,video:{skippable:!1,playback_method:t?["auto_play_sound_off"]:["click_to_play"]}}}],l="video"===e?{code:e,bids:n,mediaTypes:s}:{bids:n};return r("adUnits",l),d(),l}))}}),(0,We.F3)("bidders.pgam.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},gdpr:!1,run(e){let{broker:t,getConfig:n,log:r}=e;r(n("plugins.bidders.pgam.display",{}));const i=Object.entries(n("plugins.bidders.pgam.display.adUnits",{})).map((e=>{let[t,{placementId:r}]=e;return{mediaTypes:{banner:{sizes:n(`slotDescriptions.initial.${t}.size`,[])}},bids:[{bidder:"pgamssp",params:{placementId:r}}],code:t}}));r.extend("adUnitTemplates")(i),t.register("provide prebid adUnits",(()=>i))}}),(0,We.F3)("bidders.pgam.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},gdpr:!1,run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.pgam.video.adUnits",{});t.register("provide video adUnits",(async e=>{if(!i[e])return;const t=[{bidder:"pgamssp",params:{placementId:i[e].placementId}}];return r("adUnits",t),{bids:t}}))}});const mk="mol.ads.cmp.tcfv2.reprompt",vk="mol.ads.cmp.tcfv2.lastReprompted";function yk(){let e;try{const t=localStorage.getItem(mk);t&&(e=JSON.parse(t))}catch(e){console.error("unabled to parse repromptVersion")}return e||{version:0,chance:Math.random()}}async function bk(e){let{localBroker:t,tcData:n,log:r}=e;const i=n.repromptVersion,o=JSON.parse(localStorage.getItem(vk)||"{}");o?.version===n.repromptVersion&&(r.warn("reprompt failed - same version: ",n.repromptVersion),t.emit("send event to bidmax",{type:"custom",payload:{daysSinceReprompt:Math.floor((Date.now()-o.date)/864e5),event:"reprompt-error",lastRepromptVersion:o.version,jounery:await t.invoke("get journey so far"),module:"tcfv2",onClosedStoredTCDataVersion:i,tcDataRepromptVersion:n.repromptVersion}}),t.emit("add user journey","error"))}async function _k(e){const{registerPluginBouncer:t,log:n,localBroker:r}=e,i=r.until("valid consent"),o=i.then((()=>od("consentedVendors"))),a=Promise.all([i,o]);t((async(e,t)=>{await a;const r=n.extend(e);r("running bouncer");const i=("object"==typeof t.gdpr?!!t.gdpr.enabledIfDissent:!!t.gdpr)||function(e,t){if(!t.vendorIds||void 0===t.vendorIds.gdpr)return n("no vendorIds or gdpr defined"),!1;if("N/A"===t.vendorIds.gdpr)return n("restrictions not applicable for",e),!0;if(!Array.isArray(t.vendorIds.gdpr))return n.warn("gdpr vendorIds must be an array, but got:",t.vendorIds.gdpr),!1;const r=t.vendorIds.gdpr.filter((e=>!d.has(e)));return!r.length||(n("plugin",e,"bounced because user have not consented to vendors:",r),!1)}(e,t)&&function(e,t){if(!t.purposeIds||void 0===t.purposeIds.gdpr)return n("no purposesIds or gdpr defined"),!1;if("N/A"===t.purposeIds.gdpr)return n("restrictions not applicable for",e),!0;if(!Array.isArray(t.purposeIds.gdpr))return n.warn("gdpr purposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const r=t.purposeIds.gdpr.filter((e=>"string"!=typeof s.purpose.consents&&!s.purpose.consents[e]));return!r.length||(n("plugin",e,"bounced because user have not consented to purposes:",r),!1)}(e,t)&&function(e,t){if(!t.vendorIds||void 0===t.vendorIds.google||"N/A"===t.vendorIds.google)return!0;const r=t.vendorIds.google.filter((e=>!l.has(e)));return!r.length||(n("plugin",e,"bounced because user have not consented to google's additional consent:",r),!1)}(e,t)&&function(e,t){if(!t.legIntPurposeIds||void 0===t.legIntPurposeIds.gdpr)return!0;if(!Array.isArray(t.legIntPurposeIds.gdpr))return n.warn("gdprPurposeIds must be an array, but got:",t.legIntPurposeIds?.gdpr),!1;const r=t.legIntPurposeIds.gdpr.filter((e=>"string"!=typeof s.purpose.legitimateInterests&&!s.purpose.legitimateInterests[e]));return!r.length||(n("plugin",e,"bounced because user have not consented to legitimate interests:",r),!1)}(e,t);return r(`passed checks: ${i}`),i}));const[s]=await i;n("tcData",s);const d=new Set(await o),l=new Set((s.addtlConsent||"").substring(2).split(".").filter((e=>e)).map((e=>parseInt(e))));l&&n("using addtlConsent for bouncing")}var wk=__webpack_require__(1525);const Sk="dmg.cmp.uuid",Tk="mol.ads.tcfv2.uuid";async function Ik(e){let{localStorage:t,localBroker:n,log:r,doc:i,getConfig:o,win:a,broker:s}=e;const d=Math.random().toString(36).substring(2),l="@mol-ads/mol-adverts",c=n.until("loaded"),u=function(){const e=o("tcfv2.version",""),t=o("tcfv2.scriptBase","//cmp.dmgmediaprivacy.co.uk/cmp"),r=o("tcfv2.uiVersion",""),i=o("tcfv2.uiScriptBase","//www.dailymail.co.uk/static/mol-fe/static/mol-fe-cmp"),a=o("tcfv2.uiFile","index.js"),s=`${o("tcfv2.gvlUiVersion","51")}`,d=o("tcfv2.cvlUiVersion","1"),l=o("tcfv2.backendUrl","//cmp.dmgprivacyint.co.uk/gdpr/consent/persist"),c=function(e){return e("tcfv2.useTCF2_2Branding",!1)?(e=>{const t=e("tcfv2_2.brand.level1Paragraphs",["We and our partners process, store and/or access data such as IP address, unique ID and browsing data based on your consent to display personalised advertising and content, advertising and content measurement, audience research and services development.","Sometimes we and/or our partners don’t rely on your consent but rely on legitimate interest to process your data. Click Cookie Settings below to see our partners, why they rely on legitimate interest and how you can object.","Control how your data is used, view our [NUMBER_OF_VENDORS] partners and view more info at any time via the Cookie Settings link in the Privacy Policy. Your preferences will apply to this website only."]),n=e("tcfv2_2.primaryVendor",{features:[1,2,3],flexiblePurposes:[],headingName:"Associated Newspapers Ltd.",legIntPurposes:[8,10,11],name:"Associated Newspapers Ltd.",purposes:[1,2,3,4,5,6,7,9],specialFeatures:[1],specialPurposes:[1,2],dataDeclaration:[1,2,3,4,5,6,7,8,9,10,11]}),r=e("tcfv2_2.primaryVendorHeadingName",n.headingName),i=e("tcfv2_2.primaryVendorHeadingName",n.primaryVendorName),o=e("tcfv2_2.policyUrl","/home/article-7759273/Privacy-Cookies-Policy-Policy.html"),a=S()(e("tcfv2_2.brand",{}),{level1Paragraphs:t,primaryVendor:{...n,headingName:r,name:i,policyUrl:o}}),s=e("tcfv2_2.branding.providerUrl");return s&&(a.providerUrl=s),a})(e):(e=>{const t=e("tcfv2.brand.level1Paragraphs",["We and our partners process, store and/or access data such as IP address, unique ID and browsing data based on your consent to display personalised ads and content, ad and content measurement, audience insights and product development, use precise geolocation data, and actively scan device characteristics for identification.","Sometimes we and/or our partners don’t rely on your consent but rely on legitimate interest to process your data. Click Cookie Settings below to see our partners, why they rely on legitimate interest and how you can object.","Control how your data is used and view more info at any time via the Cookie Settings link in the Privacy Policy."]),n=e("tcfv2.primaryVendor",{features:[1,2,3],flexiblePurposes:[],headingName:"Associated Newspapers Ltd.",legIntPurposes:[5,6,8,10],name:"Associated Newspapers Ltd. (MailOnline, ThisIsMoney & Metro)",purposes:[1,2,3,4,7,9],specialFeatures:[1],specialPurposes:[1,2]}),r=e("tcfv2.primaryVendorHeadingName",n.headingName),i=e("tcfv2.primaryVendorHeadingName",n.primaryVendorName),o=e("tcfv2.policyUrl","/home/article-7759273/Privacy-Cookies-Policy-Policy.html"),a=e("tcfv2.branding.providerUrl"),s=S()(e("tcfv2.brand",{}),{level1Paragraphs:t,primaryVendor:{...n,headingName:r,name:i,policyUrl:o}});return a&&(s.providerUrl=a),s})(e)}(o),u=`${i}/${r}/${a}`,h=o("tcfv2.storeUserPreference",!1),f=o("tcfv2.nrvUiVersion","1"),g=o("tcfv2.publisherRestrictions",[3,4]),m=o("tcfv2.consentOrPay.enabled",!1),v=p(),y=o("tcfv2.gvlMigration.useGeoDeviceVariantGVL",!1),b=`${o("tcfv2.consentOrPay.subscriptionURL","https://uat-dlv.nonprod-mailsubscriptions.gcpp.io/offer/109169/choose-from-one-of-these-options")}?noCookiePrompt=true`;return n.emit("versions",{tcfv2Version:e,tcfv2UiVersion:r}),{uiLevel:"Level1",gvlUiVersion:s,cvlUiVersion:d,backendUrl:l,brand:c,uiScriptUrl:u,storeUserPreference:h,nrvUiVersion:f,controllerScriptBase:`${t}/${e}`,cvlVersion:d,publisherRestrictions:g,consentOrPay:m,uuid:v,useGeoDeviceVariantGVL:y,consentOrPaySubscriptionURL:b}}();function p(){let e=t.getItem(Tk);return e?(t.setItem(Sk,e),t.removeItem(Tk)):e=t.getItem(Sk),e||(e=(0,ma.A)(),t.setItem(Sk,e)),e}async function h(e,t){await c;const n={ns:"@mol-ads/mol-ads-cmp",id:d,sender:l},r=t?{...n,action:e,payload:t}:{...n,action:e};a.postMessage(r,"*")}n.on("consent to all",(()=>{r("consenting to all"),h("consentToAll",{uuid:p()})})),n.on("dissent to all",(()=>{r("consenting to all"),h("dissentToAll",{uuid:p()})})),n.on("openUi",(e=>{let{reason:t,uiLevel:i}=e;const o=p();r(`opening tcfv2 banner, level: ${i}, reason: ${t}`),n.emit("send event to bidmax",{type:"custom",payload:{event:"ui-open",level:i,module:"tcfv2",reason:t}}),h("open",{uiLevel:i,uuid:o})})),n.onInvoke("start cmp",(async()=>{r("invoking get controller starting options");let e=(0,wk.A)({},...await n.invokeAll("get controller starting options"));r("opts",e);const t=`${u.controllerScriptBase}/index.js`,a=e.tcString&&pd(e.tcString)||void 0,s=a?.vendorListVersion||`${o("tcfv2.gvlUiVersion","51")}`,l=e.acmVersion;delete e.acmVersion,e=(0,wk.A)({},u,{brokerId:d,gvlVersion:s,cvlVersion:l},e),r("controller starting options:",e),async function(e,t){return new Promise(((n,r)=>{const o=i.createElement("script");o.src=e,o.id="mol-ads-tcfv2-script",o.dataset.opts=JSON.stringify(t),o.onload=()=>n(),o.onerror=()=>r(new Error(`Error loading ${e}`)),i.head.appendChild(o)}))}(t,e).catch((e=>{r("error loading tcfv2 script",e)}))})),s.on("plugins enabled",(()=>{h("ads-initialised")})),a.addEventListener("message",(async e=>{const t=e.data;"@mol-ads/mol-ads-cmp"===t.ns&&t.id===d&&t.sender!==l&&("is_ready"===t.action&&s.emit("TCFV2 controller ready"),"level_changed"===t.action&&n.emit("send event to bidmax",{type:"custom",payload:{changed:!0,event:"ui-open",level:t.payload.currentLevel,module:"tcfv2"}}))}))}function kk(e){(async function(e){let{localBroker:t,log:n,setConfig:r}=e;t.on("local consent data resolved",(async e=>{let[i]=await t.invokeAll("get local consent degree"),o=e;e?.tcString?.length||(n("no cached tcData, waiting for cmp"),[{tcData:o}]=await t.until("valid consent from controller"),n("tcData",o),i=await od("getConsentDegree")),n("valid consent: ",{tcData:o,consentDegree:i}),r("cmp.consent",i),t.emit("valid consent",o,i)}))})(e).catch(e.log.error)}function Ak(e){let{localBroker:t,win:n}=e;n.openUi=e=>{const{reason:n="unknown",uiLevel:r="Level1"}="string"==typeof e?{uiLevel:e,reason:"unknown"}:e||{};t.emit("openUi",{reason:n,uiLevel:r}),t.emit("add user journey",`openRequest-${n}`)}}const Ek=["pagehide","beforeunload","unload"],Ck={capture:!0,passive:!0};function xk(e){let t,{broker:n,localBroker:r,log:i}=e,o=!1;function a(){o||(i("onUnload called",t),i("force sync dispatcher"),o=!0,r.bus.setDispatcher((e=>e())),r.bus.globalTimeoutOverride=0,r.emit("send event to bidmax",{type:"page-unload",payload:t}))}Ek.forEach((e=>{window.addEventListener(e,a,Ck)})),n.once("system ready",(()=>{n.register("call for page-unload",(()=>({tcfv2:t}))),Ek.forEach((e=>window.removeEventListener(e,a,Ck)))})),r.on("add user journey",(e=>{t=(t?`${t},${e}`:e).substring(0,200)})),r.register("get journey so far",(()=>t))}async function Ok(e){let{localBroker:t}=e;await t.until("local consent data resolved"),t.invokeAll("start cmp")}async function Pk(e){let{localBroker:t,pageCriteria:n,pageGeoInfo:r,device:i,getConfig:o}=e;const a=o("cmp.model","tcfv2");t.register("get controller starting options",(async()=>({geo:n?.geo?.toLowerCase()||(await(r?.()))?.Country?.toLowerCase()||"",renderPlatform:o("tcfv2.renderPlatform",i),platform:"web",gvlEnvironment:"web",cmpModel:a})))}function Dk(e){let{win:t,localBroker:n,log:r}=e;t.__tcfapi("addEventListener",2,(e=>{e.cached?r("Event came from cache re-run, ignoring:",e):n.emit("api event",e.eventStatus,e)})),n.on("api event","tcloaded",(function(e){const t=function(e){return!e.tcString.length}(e);t?(n.emit("add user journey","newUser"),n.emit("openUi",{reason:"newUser",uiLevel:"Level1"})):(n.emit("add user journey","loaded"),n.emit("send event to bidmax",{type:"custom",payload:{event:"loaded",module:"tcfv2"}})),n.emit("loaded",{tcData:e,newUser:t})})),n.on("api event","cmpuishown",(function(e){n.emit("send event to bidmax",{type:"custom",payload:{event:"ui-opened",module:"tcfv2",reason:i}}),n.emit("add user journey","uiOpened"),n.emit("ui opened",{tcData:e})})),n.on("api event","useractioncomplete",(async function(e){r("uiClosed",e),await n.invokeAll("ui closed",{tcData:e}),n.emit("send event to bidmax",{type:"custom",payload:{event:"ui-closed",module:"tcfv2",reason:i}}),n.emit("add user journey","uiClosed"),i="unknown"})),async function(e){let{localBroker:t,log:n}=e;const r=t.untilInvoke("ui closed");let[{tcData:i,newUser:o=!1}]=await t.until("loaded");n("cmp loaded",{tcData:i,newUser:o}),o&&([{tcData:i}]=await r,n("cmp ui closed",{tcData:i})),t.emit("valid consent from controller",{tcData:i})}({localBroker:n,log:r}).catch(r);let i="unknown";n.intercept("openUi",((e,t)=>{let[n,{reason:r}]=e;return i=r,t()}))}const Rk={yes:"true",no:"false",partial:"custom"};async function jk(e){const{broker:t,log:n}=e,r=async function(e){let{localBroker:t,log:n,getConfig:r}=e;const i=r("tcfv2.par",{vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]}}),[o,a]=await t.until("valid consent");n("consentDegree",a);const s=pd(o.tcString).vendorListVersion,d={consent:Rk[a],gdpr:o.gdprApplies?"1":"0",gdpr_consent:o.tcString,cmp:r("cmp.model","tcfv2"),iabv:s},l=await nt("tcfv2.personalisedAds",i);d.google_consent=l;const c=l?0:1,u=l?d:{...d,npa:c};return n("dfp targeting:",u),u}(e);t.emit("set page level targeting",r),Mk(e,r);const i=await r,o=i.google_consent?0:1,a={cust_params:{...i},npa:o};n("video tags",a),t.emit("sync video tags update",a),n("done with gpt")}const Mk=(e,t)=>{let{broker:n,getConfig:r,log:i}=e;r("tcfv2.setGptPersonalisedAdsState",!0)&&n.once("gpt initialized",(async e=>{const{google_consent:n}=await t;n?i("google personalised ads enabled"):(i("setting non-personalised ads"),e.pubads().setPrivacySettings({nonPersonalizedAds:!0}))}))};function Nk(e){let{broker:t,doc:n,win:r}=e;t.on("openCmpBanner",(e=>{let{uiLevel:t="Level2"}=e;r.openUi?.({uiLevel:t,reason:"userRequest"})})),t.once("dom ready",(()=>{n.querySelectorAll("a[href^='javascript:window.__cmp.a.push([\\'openSettings\\']']").forEach((e=>{e.href="javascript:window.openUi({ uiLevel: 'Level2', reason: 'userRequest' })"}))}))}async function Uk(e){let{localBroker:t,log:n}=e;const r=await t.invokeAll("get local storage consent data"),i=r?.[0]||{};n("localStorageTCData",i);const o=(await t.invokeAll("get local consent data",i)).filter((e=>e));n("tcDatas",o);let a=(0,T.Up)(i,["acmVersion","addtlConsent","molGvlVersion","nrvString","nrvVersion","repromptVersion","tcString"]);if(t.register("get controller starting options",(()=>a)),!o.length)return n("emit tcData from localStorage",i),void t.emit("local consent data resolved",i);const s=o.reduce(((e,t)=>{let{src:n,tcData:r}=t;return{...e,[n]:r}}),{});a=s.consentDataFromAmp||s.consentDataFromLocalStorageForAmp||s.consentDataFromUrl||s.consentDataFromTCFV2Opts||s.consentOrPay||a,n("tcDatasMap",s),n("localStorageTCData",i),n("controllerOpts",a),t.emit("local consent data resolved",void 0)}const Lk={iab:async e=>(await od("consentedVendors")).includes(e),google:async e=>{const t=await od("getCustomVendorsConsents");return t[e]?.consent},nrv:async e=>{const t=await od("getNonRegisteredVendorsConsents");return t[e]?.consent}},Bk=async e=>{const{vendorRegistry:t,vendorId:n}=e,r=Lk[t];if(r){const e="string"==typeof n?parseInt(n):n;return isNaN(e)?{errorMsg:"invalid vendorId"}:await r(e)?{isConsented:!0}:{isConsented:!1}}return{errorMsg:"vendorRegistry not recognised, valid values are 'iab'|'google'|'nrv'"}},qk=["cmp-option:consent-or-pay"],Fk=e=>!(!e?.hasUserConsentedToMandatory&&!e?.hasUserConsentedToAll),Vk=(e,t)=>!(!t||!e.includes(H.V_)),zk=e=>Fk(e),$k=e=>Fk(e);async function Wk(e){let{getConfig:t,localBroker:n,broker:r,log:i,win:o,DM:a}=e;const s=t("tcfv2.consentOrPay.enabled",!1);if(i("isConsentOrPayMode",s),!s)return void i("not in consent or pay mode, bailing");let d;r.register("call for page analytics",(()=>({tcfcopm:!0,tcfcope:d})));const l=(0,H.uL)();i("entitlementsAtlaunch",l);const c=o.getPaywallEntitlementsMightChange?.();i("entitlementsMightChange",c),i("isPaidSubscriber",(0,H.Z)(l));const u=o.DM?.later?.(["REFRESHED_PAYWALL_ENTITLEMENT"]).then((()=>{const e=(0,H.gF)();return i("refreshedEntitlements",e),d=e,e}));if(c&&a?.isLoggedIn)return n.register("get controller starting options",(async()=>{const e=await(async(e,t)=>{const n=await e||[],r=(0,H.Z)(n),i=(0,H.et)(),o=JSON.parse(localStorage.getItem((0,H.et)())||"{}"),a={isMailEssentialSubscriber:Vk(n,!0),isUserLoggedIn:!0,persistTags:qk};return t("cacheKey",i),r&&(a.persistTags?.push(`entitlement:${H.V_}`),o?.getTCData?.tcString?.length||(a.dissentUser=!0)),a})(u,i);return e})),void n.register("get local consent data",(async()=>{const e=await u||[];if(!(0,H.Z)(e))return(e=>{const t=(0,H.et)(),n=JSON.parse(localStorage.getItem(t)||"{}");if(e("attempting to validate logged in user with userCachedData"),zk(n))return void e("user logged in, consent data valid");const r=JSON.parse(localStorage.getItem(H.q_)||"{}");return e("attempting to validate default tcData for logged in user"),$k(r)?(e("default tcData valid for logged in user, provding default",r),{src:"consentOrPay",tcData:r.getTCData||{}}):void 0})(i)}));d=l;const p=(0,H.et)();i("cacheKey",p);const h=JSON.parse(localStorage.getItem(p)||"{}"),f=((e,t,n)=>!(!e?.isLoggedIn||!((e,t)=>{return(0,H.Z)(e)&&(n=t,!!n?.getTCData?.tcString);var n})(t,n)))(a,l,h);if(n.register("get controller starting options",(()=>{const e=Vk(l,a?.isLoggedIn),t={isMailEssentialSubscriber:e,isUserLoggedIn:!!a?.isLoggedIn,persistTags:qk};return e&&(t.persistTags.push(`entitlement:${H.V_}`),f||(t.dissentUser=!0)),t})),i("attempting to validate logged in subscribed user"),f)return void i("user subscribed, consent data valid");const g=JSON.parse(localStorage.getItem(H.q_)||"{}");if(i("attempting to validate logged in user with userCachedData"),a?.isLoggedIn&&zk(h))i("user logged in, consent data valid");else{if(i("attempting to validate default tcData for logged in user"),a?.isLoggedIn&&$k(g))return i("default tcData valid for logged in user, provding default"),void n.register("get local consent data",(async()=>({src:"consentOrPay",tcData:g.getTCData||{}})));i("attempting to validate default data for logged out user",g),!a?.isLoggedIn&&Fk(g)?i("user not logged in, default data valid"):(i("default consent data invalid, resetting"),n.register("get local consent data",(async()=>({src:"consentOrPay",tcData:{}}))))}}const Hk=[Ok,async function(e){let t,{getConfig:n,log:r,localBroker:i,doc:o}=e,a=!1;const s=new so.jG;function d(){r("scroll detected"),s.dispose(),a||(r("There was a scroll event before valid consent"),i.emit("send event to bidmax",{type:"custom",payload:{module:"tcfv2",event:"bannerBlocked",eventStatus:t?.eventStatus}}))}s.onceBrokerEvent(i,"local consent data resolved",(e=>{t=e})),s.onceBrokerEvent(i,"valid consent",(function(){r("choice made, removing scroll handlers"),s.dispose(),a=!0})),await Promise.race([i.until("valid consent"),i.until("ui opened").then((()=>(0,P.wR)(Number(n("tcfv2.bannerblockreporter.timeout",1e3))))).then((()=>{r("adding scroll handlers"),s.addEventListener(o,"scroll",d,{once:!0}),s.addEventListener(o,"touchmove",d,{once:!0})}))])},Uk,gk,fk,function(e){let{getConfig:t,queryParams:n,localBroker:r}=e;if(!n.gdpr_consent&&!n.addtl_consent)return;const i=new URLSearchParams(__webpack_require__.g.location.search);["gdpr_consent","addtl_consent"].forEach((e=>i.delete(e)));const o=function(e){const{done:t}=e.keys().next();return!t}(i)?`?${i}${__webpack_require__.g.location.hash}`:`${__webpack_require__.g.location.pathname}${__webpack_require__.g.location.hash}`;history.replaceState(null,"remove query params to ensure bid requests don't exceed size",o),r.register("get local consent data",(()=>({src:"consentDataFromUrl",tcData:{tcString:n.gdpr_consent,addtlConsent:n.addtl_consent,acmVersion:"2",repromptVersion:t("tcfv2.reprompt.version",0)}})))},function(e){let{getConfig:t,localBroker:n,log:r,win:i}=e;if((0,H.Cl)(i))return void r("in amp page, bailing");const o=new Promise((e=>{if(i.getPaywallEntitlementsMightChange?.())r("awaiting entitlement refresh"),e(i.DM?.later?.(["REFRESHED_PAYWALL_ENTITLEMENT"]).then((()=>{const e=(0,H.et)();return r("using cacheKey",e),JSON.parse(localStorage.getItem(e)||"{}")})));else{const t=(0,H.et)();r("using cacheKey",t),e(JSON.parse(localStorage.getItem(t)||"{}"))}}));n.register("get local consent degree",(async()=>{const e=await o;return e?.getConsentDegree||void 0})),n.register("get local storage consent data",(async()=>{const e=await o;return e?.getTCData||{}})),n.register("ui closed",(async e=>{let{tcData:a}=e;await i.adverts.updateCache(a,r),await n.invokeAll("cache updated",a);const s=await o;(s?.getTCData||{}).tcString&&t("tcfv2.consentOrPay.enabled",!1)&&i.location.reload()})),n.on("loaded",(async e=>{let{tcData:t}=e;await i.adverts.updateCache(t,r),await n.invokeAll("cache updated",t)}))},async function(e){let{localBroker:t,getConfig:n,log:r}=e;const i=n("tcfv2.consentMaxAgeMonths",12),o=(0,T.AQ)(-i),[a]=await t.until("valid consent");((e,t)=>pd(e.tcString).lastUpdated.getTime()<(t.getTime()||0))(a,o)&&(r("opening UI as tcString expired"),t.emit("openUi",{uiLevel:"Level1",reason:"tcStringExpired"}),t.emit("add user journey","tcStringExpired"),await t.untilInvoke("ui closed"))},async function(e){let{localBroker:t,getConfig:n,queryParams:r,log:i,localStorage:o,win:a}=e;if(r.gdpr_consent)return void i("bailing reprompt coz gdpr_consent was passed in url");const s=yk(),d=n("tcfv2.repromptMigrations",[n("tcfv2.reprompt",{version:0,chance:0})]),l=(0,q.HV)(d).version;t.on("local consent data resolved",(async e=>{let n=e?.repromptVersion||s.version||l,r=l;if(t.register("get controller starting options",(()=>({repromptVersion:n,nextRepromptVersion:r}))),!e?.tcString)return void(n=l);const[c]=await t.until("valid consent"),u=await async function(e){if(!e?.tcString)return i("it looks like new user, bailing reprompt"),{shouldRepromptUser:!1};const t=e.repromptVersion||s.version||0;let n=t;const r=d.filter((e=>e.version>n)),o=r.some((e=>Array.isArray(e.onlyIfDissentedFromAny)))?await new Promise((e=>{a.__tcfapi("getPurposesByVendorMap",2,(t=>{e(Object.keys(t))}))})):[];i("migrating",{toMigrate:r,migrations:d});for(const t of r){let r=s.chance<t.chance,a=!1;if(Array.isArray(t.onlyIfDissentedFromAny)&&(a=t.onlyIfDissentedFromAny.some((t=>o.includes(t.toString())&&!e.vendor.consents[t.toString()])),r=r&&a),i.extend("migrate")(t.version,r,{chance:t.chance,userChance:s.chance,repromptVersion:n,onlyIfDissentedFromAny:t.onlyIfDissentedFromAny,missingVendorsConsent:a,consentableVendorIds:o}),!r)break;n=t.version}const l=n>t;return i("shouldRepromptUser",l,{repromptVersion:n}),{shouldRepromptUser:l,repromptVersion:n}}(c);if(r=u.repromptVersion,u.shouldRepromptUser){i("opening UI due to reprompt"),t.emit("openUi",{uiLevel:"Level1",reason:"reprompt"}),t.emit("add user journey","reprompt");const[{tcData:e}]=await t.untilInvoke("ui closed");await bk({localBroker:t,tcData:e,log:i}),o.setItem(vk,JSON.stringify({date:Date.now(),version:c.repromptVersion}))}t.register("ui closed",(async e=>{let{tcData:t}=e;const n=t?.repromptVersion||0;o.setItem(mk,JSON.stringify({...s,version:n}))}))}))},function(e){let{localBroker:t,queryParams:n,log:r}=e;const i=n["mol.ads.cmp.stubConsent"],o=n["mol.ads.cmp.stubDissent"];(i||o)&&(r("stubs:",{stubConsent:i,stubDissent:o}),t.once("ui opened",(()=>{i?t.emit("consent to all"):t.emit("dissent to all");const e=i?"stubConsent":"stubDissent";t.emit("send event to bidmax",{type:"custom",payload:{event:e,module:"tcfv2"}})})))},function(e){let{queryParams:t,broker:n,localBroker:r,log:i}=e;t.privacy&&(n.once("TCFV2 controller ready",(()=>{i('removing "privacy" from url'),(0,b.N0)("privacy")})),r.register("get controller starting options",(()=>({showUi:!0,uiLevel:"Level2"}))))},_k,Ik,kk,Ak,xk,function(e){let{getConfig:t,localBroker:n,log:r,DM:i}=e;"mol"===t("site")&&n.interceptInvokeOnce("start cmp",((e,t)=>{r("awaiting for molFeReact_LOADED"),i?.later?.(["molFeReact_LOADED"],(()=>{r("molFeReact_LOADED ready"),t()}))}))},Pk,Dk,jk,Nk,function(e){let{log:t,localBroker:n,tcfv2Opts:r}=e;r&&(t("tcfv2Opts",r),n.register("get local consent data",(()=>({src:"consentDataFromTCFV2Opts",tcData:{tcString:r.tcString||"",nrvString:r?.nrvString,nrvVersion:r?.nrvVersion,addtlConsent:r?.addtlConsent,acmVersion:r?.cvlVersion}}))))},async function(e){let{broker:t}=e;t.register("check vendor consent",Bk)},Wk],Gk=[Ok,Uk,gk,fk,_k,Ik,kk,Ak,xk,Pk,Dk,jk,Nk,Wk];async function Xk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{log:i}=t,o=new Set(n.map((e=>e.name))),a=setInterval((()=>i("waiting for",[...o])),5e3);await Promise.all(n.map((async n=>{i("starting",n.name);try{await n(function(n){const o=e.broker([t.broker.id,n.name].filter((e=>e)).join("::")),a=i.extend(n.name);return{...t,...r,localBroker:o,log:a}}(n))}catch(e){i.error("error starting",n.name,e)}o.delete(n.name)}))),clearInterval(a)}function Jk(e){let{registerPluginBouncer:t,log:n}=e;t((async(e,t)=>{const r=n.extend(e);r("running bouncer");const i="object"==typeof t.gdpr?!!t.gdpr.enabledIfDissent:!!t.gdpr;return r(`passed checks: ${i}`),i}))}const Kk=async(e,t,n)=>{const r=Xk(n,e,t);n.start(!1),await r};var Yk;Yk=Hk,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hk;(0,We.F3)("tcfv2-v2",{gdpr:{enabledIfDissent:!0},initTimeout:D.pX,async init(t){const{removePlugins:n,isTCFV2Jurisdiction:r,getConfig:i,log:o,win:a,setConfig:s,broker:d}=t;if(n(["tcfv2"]),!await r(i))return void o("tcfv2 is not supported for this geo, bailing");const l=i("tcfv2.unsupportedUrls",["\\/registration\\/(?:register\\/)?[^/]*\\.html$"]);if(l?.some?.((e=>new RegExp(e).test(a.location.pathname))))return o("not loading tcfv2, unsupported page, disabling ads"),s("slots.enabled",{}),void Jk({...t,log:o.extend("unsupportedBouncer")});const c=i("tcfv2.deferLoadingUrls",["/home/article-7759273/Privacy-Cookies-Policy-Policy.html"]),u=function(e){const{ownName:t}=e,n=new y.QY,r=n.broker(t);return e.log.enabled&&function(e){const t=(0,We.sd)("message-trace");if(t){const n={"ads.debug.messageTrace.broker":"*"};t.init?.({...e,queryParams:n})}}({...e,broker:r}),n}(t);c?.includes?.(a.location.pathname)?(o("deferring load"),Jk({...t,log:o.extend("unsupportedBouncer")}),d.once("openCmpBanner",(n=>{let{uiLevel:r}=n;o("launching");const i=u.broker([d.id,"index"].filter((e=>e)).join("::"));i.once("loaded",(e=>{let{newUser:t}=e;t||d.emit("openCmpBanner",{uiLevel:r})})),Kk(t,e,u).then((()=>{o("initialised")}))}))):await Kk(t,e,u)}})}(Array.from(new Set([...Gk,...Yk]))),(0,We.F3)("bidders.sovrn.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[13]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.sovrn.display",{})).map((e=>{let[t,n]=e;return{code:t,mediaTypes:{banner:{sizes:(0,ke.get)(t)?.size||[]}},bids:[{bidder:"sovrn",params:{tagid:n.toString()}}]}}));r.extend("adUnits")(i),t.register("provide prebid adUnits",(()=>i))}}),(0,We.F3)("bidders.sovrn.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[13]},run(e){let{broker:t,getConfig:n,log:r}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.sovrn.video.${e}`);if(r({code:e,tagid:t}),!t)return void console.warn(`no tag id found for pos ${e}`);const i={bids:[{bidder:"sovrn",params:{tagid:t}}]};return r.info("providing ad unit",i),i}))}});const Qk=(e,t,n)=>{if("IMG"!==n.tagName)return!0;if(t.some((e=>n.closest(e))))return!1;const r=n.width||parseInt(n.getAttribute("width"),10),i=(e=>{if("IMG"!==e.tagName)return e.clientHeight;const t=parseInt(e.getAttribute("width"),10)||e.width,n=t/(parseInt(e.getAttribute("height"),10)||e.height),r=e.width||t;return Math.floor(r/n)})(n);return i>e.height+70||i<e.height+70&&i>=e.height&&r>e.width+90};(0,We.F3)("page.articleImages",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async e=>{let{broker:t,getConfig:n,doc:r,pageMeta:i,pageCriteria:o,log:a}=e;if("article"!==o?.pageType)return void a("not on article page, bailing");const s=n("plugins.page.articlesImages.selectors",["img[id^=i-]"]),d=n("plugins.page.articlesImages.exclusionsSelectors",[".mol-product"]),l=n("plugins.page.articleImages.sizes",{desktop:{width:300,height:300},mobile:{width:200,height:150}}),{renderPlatform:c}=i||{renderPlatform:"desktop"},u="mobile"===c?l.mobile:l.desktop,p=t.until("dom ready").then((()=>{const e=(e=>{let{doc:t,imageSelectors:n,imageExludeContainersSelector:r,minImageSizes:i}=e;const o=Qk.bind(null,i,r);return Array.from(t.querySelectorAll(n.join(","))).filter(o).map((e=>({element:e})))})({doc:r,imageSelectors:s,imageExludeContainersSelector:d,minImageSizes:u}).map((e=>{let{element:t}=e;return{url:t.dataset?.gallerySrc||t.dataset?.src||t?.src,caption:t?.alt}}));return a("images",e),e}));t.on("get article images",(async e=>{e(await p)}))}}),(0,We.F3)("trackers.33across",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},async run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.trackers.33across.pid"),o=n("plugins.trackers.33across.url","https://cdn-ima.33across.com/ppid.js");if(!i||!o)return void r.error("Insufficient config",{pid:i,url:o});const a=t.invoke("load script",o,"_33AcrossPpidMappingsProvider").then((e=>{if("function"!=typeof e)throw r.error("Unexpected type:",e),new Error("Unexpected type");return new e({pid:i,callback:()=>r("Retrieved user ids")})}));t.register("provide pub eids",(async()=>{const e=(await a).loadIds();return r({ids:e}),e}))}}),(0,We.F3)("trackers.liveintent.v2",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[2,7]},vendorIds:{gdpr:[148]},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;if(void 0===i.liModuleEnabled){const e=Number(n("liveintent.enabledChance",.95));i.liModuleEnabled=Math.random()<e,i.liTreatmentRate=e}if(r({moduleEnabled:i.liModuleEnabled,treatmentRate:i.liTreatmentRate}),i.liModuleEnabled){const e=n("liveintent.storageType","html5");t.register("provide prebid config",(()=>({userSyncConfig:{auctionDelay:n("liveintent.auctionDelay",300),userIds:[{name:"liveIntentId",params:{publisherId:n("liveintent.publisherId",84252).toString(),fpid:{strategy:"cookie",name:"pub_fp_cookie"},requestedAttributesOverrides:n("liveintent.requestedAttributesOverrides",{bidswitch:!0,fpid:!0,index:!0,magnite:!0,medianet:!0,openx:!0,pubmatic:!0,sovrn:!0,thetradedesk:!0,uid2:!0})},storage:"html5"===e?{type:"html5",name:"__tamLIResolveResult",expires:n("liveintent.html5Storage.expires",1),refreshInSeconds:n("liveintent.html5Storage.refresh",28800)}:void 0}]}})))}function o(e){let n=i.liModuleEnabled?"t1":"t0";void 0!==e&&(n+=e?"-e1":"-e0");const o={"li-module-enabled":n};r(o),t.emit("set page level targeting",o)}t.on("auction init",(e=>{r({auctionDetails:e});const t=e.adUnits?.some((e=>e.bids?.some((e=>e.userIdAsEids?.some((e=>"liveintent.com"===e.source||e.uids?.some((e=>"liveintent.com"===e.ext?.provider))))))));o(t)})),o()}}),(0,We.F3)("article",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async e=>{let{broker:t,pageCriteria:n,log:r}=e;r("running"),t.emit("set page level targeting",Zk(n)),t.emit("set page level targeting",(0,xe.untilBodyAvailable)().then((()=>Zk(n))))}});const Zk=e=>{const t=e?.hasVideoHeroXpmodule?"hero":e?.containsVideo,n=e?.articleStyle;return{articlewithvideo:t,style:n}};function eA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tA(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function nA(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,iA(t,e))}function rA(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,iA(t,e),n),n}function iA(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var oA=new WeakMap,aA=new WeakMap,sA=new WeakMap,dA=new WeakMap;class lA{constructor(e){let{log:t,storageKey:n}=e;tA(this,oA,{writable:!0,value:void 0}),tA(this,aA,{writable:!0,value:void 0}),tA(this,sA,{writable:!0,value:void 0}),eA(this,"updateState",((e,t)=>{nA(this,oA)[e]={...nA(this,oA)[e],...t},nA(this,sA)&&nA(this,sA).call(this,"storing state",e,nA(this,oA)),localStorage.setItem(nA(this,aA),JSON.stringify(nA(this,oA)))})),eA(this,"snapshot",(()=>{const e=nA(this,oA);return nA(this,dA).call(this),e})),tA(this,dA,{writable:!0,value:()=>{rA(this,oA,{})}}),rA(this,aA,n),rA(this,oA,JSON.parse(localStorage.getItem(nA(this,aA))||"{}")),t&&rA(this,sA,t.extend("storage"))}}(0,We.F3)("analytics.viewability.v2",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},init:e=>{let{log:t,removePlugins:n}=e;t("removing old analytics.viewability plugin"),n(["analytics.viewability"])},run:function(e){let{broker:t,log:n}=e;const r={},i=new lA({log:n,storageKey:"mol.ads.viewability"}),{pageContext:o={},pendingViews:a={}}=i.snapshot(),s=Object.fromEntries(Object.entries(a).filter((e=>{let[t,n]=e;return!!n})).map((e=>{let[t,n]=e;return[t,n]})));if(n("misses",s),!(0,T.Im)(s)){const e={...o,type:"viewability",payload:{misses:s}};n("dispatch",e),t.emit("send to bidmax",e)}t.once("ad rendered",(async()=>{const e=await t.invoke("get page level analytics");n("pageContext",e),e&&i.updateState("pageContext",e)})),t.on("ad rendered",(e=>{n("ad rendered",e),r[e]=r[e]||0,++r[e],n("viewability",r),i.updateState("pendingViews",r)})),t.on("ad viewable",(e=>{n("ad viewable",e),r[e]=r[e]||1,--r[e],n("viewability",r),t.emit("send event to bidmax",{type:"viewability",payload:{views:{[e]:1}}}),i.updateState("pendingViews",r)}))}}),(0,We.F3)("analytics.billboard-creative-wrapper",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,log:n,win:r}=e,i=!1,o=!1,a=!1;const s=Ya((e=>{(0,T.Gv)(e.data)&&"billboard"===e.data.pos&&(s(),n("received message from creative wrapper"),i=!0)}),{scope:"retain_stickiness",win:r});t.once("ad rendered","billboard",(()=>{n("billboard rendered"),o=!i})),t.once("ad viewable","billboard",(()=>{a=!i,n({receivedMessageFromBillboardWrapper:i,renderedBeforeMessage:o,viewedBeforeMessage:a}),t.emit("send event to bidmax",{type:"custom",payload:{module:"billboard",event:"viewed",receivedMessageFromBillboardWrapper:i,renderedBeforeMessage:o,viewedBeforeMessage:a}})}))}});var cA=__webpack_require__(7167);(0,We.F3)("page.springPaywall",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,DM:n,log:r,pageCriteria:i,win:o}=e;r("running");const{isPaywalled:a,hasBeenPaywalled:s}=i||{},d=o.getIsPaywallEligible?.();r({isPaywalled:a,hasBeenPaywalled:s,isPaywallEligible:d});const l=`${(0,cA.H)({pageCriteria:i,win:o})}|${o.getIsPaywallSubscriber?.()?"subscriber":n?.userId?"registered":"none"}`;r("paywall",l),t.emit("set page level targeting",{paywall:l}),t.register("call for page analytics",(()=>({paywall:l})))}}),(0,We.F3)("outbrain.viewabilityControl",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},init(e){let{setConfig:t,getConfig:n}=e;t(`slots.enabled.${n("outbrain.vc.pos","smart_feed")}.type`,Q.IMMEDIATE)},async run(e){let{log:t,getConfig:n,broker:r}=e;const i=n("outbrain.vc.pos","smart_feed"),o=n("outbrain.vc.interval",500),a=n("outbrain.vc.mode","config"),s=n("outbrain.vc.endpoint"),d=n("outbrain.vc.endpointTimeout",2e3),l="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:__webpack_require__.g,eventToListen:"scroll"};t("config:",{pos:i,endpoint:s});const c=async function(){return"config"===a?{trigger:n("outbrain.vc.trigger",0),version:n("outbrain.vc.version",0)}:"server"===a?(await fetch(s,{referrerPolicy:"unsafe-url"})).json():void 0}();c.then((e=>{let{trigger:n,version:i}=e;t("intervention resolved",{trigger:n,version:i}),r.register("call for page analytics",(()=>({ovc:{t:n,v:i,m:a.substring(0,1)}})))})).catch((e=>{t("intervention failed",e)})),r.intercept("slot defined",(0,y.I$)({pos:i}),((e,n)=>{let[,{id:r}]=e;const i=document.getElementById(r);t("delaying slot",r,"until offset is reached");const{bindTo:a=__webpack_require__.g,eventToListen:s="scroll"}=l;let p=!1;const h=(0,I.Ai)((async()=>{const e=window.scrollY+window.innerHeight,r=i.getBoundingClientRect().top+document.documentElement.scrollTop,o=await async function(){try{return(await(0,P.tN)(d,c)).trigger}catch(e){return u(),0}}(),l=Math.round(r*o);!p&&e>=l&&(t("offset",l,"reached, loading slot"),a.removeEventListener(s,h),p=!0,n())}),o);a.addEventListener(s,h),h()}));const u=(0,I.Gr)((()=>{r.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",event:"endpoint-timeout"}})}))}}),(0,We.F3)("slots.test",{description:"A slot that only defined and tracked. Used for testing sceanrios.",ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},async run(e){let{broker:t,doc:n,getConfig:r,log:i}=e;await t.until("dom ready");const o=r("slots.test.pos","test"),a=i.extend(o),s=r("slots.test.subjectSelector"),d=r("slots.test.renderEvent"),l=r("slots.test.viewEvent");if(a({subjectSelector:s}),!s)return void a("No subjectSelector. Bailing.");const c=n.querySelector(s);function u(e){a("rendered"),t.emit("send event to bidmax",{type:"custom",payload:{module:"test",type:"rendered",pos:o,...e}})}function p(e){a("viewed"),t.emit("send event to bidmax",{type:"custom",payload:{module:"test",type:"viewed",pos:o,...e}})}c?Array.isArray(l)?function(){a({renderEventParams:d,viewEventParams:l});const e=t.until("slot defined",(0,y.I$)({pos:o})).then((()=>a("slot defined"))),n=Promise.all([e,Array.isArray(d)?t.until(...d):Promise.resolve()]).then((()=>u()));Promise.all([n,t.until(...l)]).then((()=>p())),t.emit("slot defined",{id:c.id,pos:o,slotTypes:[],size:[[1,1]]})}():s&&function(){const e=n.createElement("div");e.classList.add("dmg-ads-test"),e.id=(0,ma.A)(),e.dataset.position=o,e.style.backgroundColor="transparent",e.style.width="1px",e.style.height="1px",c.before(e),a("insert",e,"before",c);const r=function(e){let{offset:t=e.offsetTop,onAffix:n=(()=>{}),onUnfix:r=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i="affix-off",o="affix-on";let a=!1;const s=(0,I.Ai)((()=>{const r=__webpack_require__.g.scrollY;t<r?a||(e.classList.remove(i),e.classList.add(o),a=!0,n()):d()}),200);return document.addEventListener("scroll",s),s(),function(){d(),document.removeEventListener("scroll",s)};function d(){a&&(e.classList.add(i),e.classList.remove(o),a=!1,r())}}(e,{onUnfix:()=>{e.style.position="static"},onAffix:()=>{e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.style.zIndex="9999999"}});t.once("slot defined",(0,y.I$)({pos:o}),(()=>{a("slot defined"),u({subjectSelector:s}),t.once("ad viewable",o,(()=>{r(),t.emit("untrack viewability",o),p({subjectSelector:s})})),t.emit("track viewability",o,e)})),t.emit("slot defined",{id:e.id,pos:o,slotTypes:[],size:[[1,1]]})}():a("Cannot find subject. Bailing.")}}),(0,We.F3)("privacy-sandbox.testmode",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:e=>{let{broker:t,log:n,getConfig:r,registerPluginBouncer:i}=e;const o=r("plugins.privacy-sandbox.testmode",{}),a=Object.keys(o);if(n("privacy-sandbox.testmode init",o),n(`privacy-sandbox.testmode init labels ${a}`),"cookieDeprecationLabel"in navigator){const e=performance.now();let r=!1;navigator.cookieDeprecationLabel.getValue().then((e=>{n("ps_mode ",e);const s=(e=>{let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t})(e).toString(),d=localStorage.getItem("ps_mode");if(d!==s&&d&&(localStorage.setItem("ps_mode",s),r=!0,n("ps_mode changed from",d,"to",e)),e){n("ps_mode",e,s),localStorage.setItem("ps_mode",s),t.emit("set page level targeting",{ps_mode:e}),t.register("call for page analytics",(()=>({ps_mode:e})));for(const t of a)if(e.indexOf(t)>-1){const e=o[t];n("labelPlugins",e),i((async(t,r)=>!(e.indexOf(t)>-1&&(n("bouncer blocked",t),1))))}}})).finally((()=>{const i=performance.now()-e;t.emit("send event to bidmax",{type:"custom",payload:{module:"privacy-sandbox.testmode",event:"cookieDeprecationLabel.getValue",labelChanged:r,duration:i}}),n("cookieDeprecationLabel.getValue took",i,"ms")}))}else n("navigator.cookieDeprecationLabel not supported")}}),(0,We.F3)("bidders.converge",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,7]},vendorIds:{gdpr:[248]},run(e){let{broker:t,getConfig:n,log:r}=e;r("loaded");const{host:i,zoneIds:o}=n("plugins.bidders.converge",{}),a=Object.entries(o||{}).map((e=>{let[t,r]=e;return{code:t,bids:[{bidder:"converge",params:{host:i,zoneId:Number(r)}}],mediaTypes:{banner:{sizes:n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnits")(a),t.register("provide prebid adUnits",(()=>a))}}),(0,We.F3)("bidders.gumgum",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[61]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=Object.entries(n("plugins.bidders.gumgum",{})).map((e=>{let[t,r]=e;return{code:t,bids:[{bidder:"gumgum",params:r}],mediaTypes:{banner:{sizes:n(`slotDescriptions.initial.${t}.size`,[])}}}}));r.extend("adUnitTemplates")(i),t.register("provide prebid adUnits",(()=>i)),t.register("prebid reduce bidderSettings",(e=>(e.gumgum=e.gumgum||{},e.gumgum.adserverTargeting=e.gumgum.adserverTargeting||[],e.gumgum.adserverTargeting.push({key:"hb_skin",val:()=>!0}),e)))}});var uA=__webpack_require__(4488);const pA=e=>[parseInt(e.style.width),parseInt(e.style.height)];function hA(e,t){return!(e||t)}const fA=(0,I.sg)((e=>{let{element:t,adElement:n,broker:r,ad:i,position:o,log:a}=e;const[s,d]=pA(t),l=hA(s,d),[c,u]=(0,uA.k)(i);c===s&&u===d||(a("changing dimensions",{prev:{width:s,height:d},new:{width:c,height:u}}),gA({element:t,adElement:n,width:c,height:u})),l&&!hA(c,u)?r.emit("slot mounted",i):!l&&hA(c,u)&&r.emit("destroy slot",o)}),500);function gA(e){let{element:t,adElement:n,width:r,height:i}=e;t.style.width=`${r}px`,t.style.height=`${i}px`,t.style.display=r&&i?"":"none",n.style.maxWidth=`${r}px`,n.style.maxHeight=`${i}px`}function mA(e){return e.replace(/\?.*$/,"")}(0,We.F3)("adslotComponent.gpt",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:e=>{let{broker:t,getConfig:n,log:r,doc:i,win:o}=e;t.on("slotComponentRendered","gpt",(e=>{const{position:a,props:s}=e,{id:d,sticky:l,variant:c}=s,u=r.extend(a);u("message received",e);const p=i.querySelector(`[data-id="${d}"]`);if(!p)return void u(`unable to find element for id: ${d}, bailing`);const h=p.closest("ad-slot");if(!h)return void u(`unable to find component for id: ${d}, bailing`);const f=n(`slotDescription.${a}`);if(!f)return void u(`unable to find description for id: ${d}, bailing`);(e=>{let{element:t,component:n,position:r,sticky:i,id:o,description:a,log:s,getConfig:d}=e;const l=(0,q.su)([a.noWatermark,n.hasAttribute("no-watermark")||void 0,d("pos.gpt.noWatermark")]);t.classList.add("dmg-ads",`dmg-ads-${r.replace(/_/g,"-")}`,`dmg-ads-justify-${function(e){const t=e.getAttribute("justify");switch(t){case"left":case"right":case"center":return t;default:return"center"}}(n)}`),l&&t.classList.add("dmg-ads-no-watermark"),t.innerHTML=`\n    <div class="dmg-ads-label-container">\n      ${a.noAdLabel?"":'<div class="dmg-ads-label">Advertisement</div>'}\n    </div>\n    <div class="dmg-ads-container">\n      <div \n        class="dmg-ads-ad ${i?"dmg-ads-sticky":""}" \n        id="${o}"\n      >\n      </div>\n    </div>\n  `})({element:p,component:h,sticky:l,id:d,position:a,description:f,getConfig:n,log:u});const g=p.querySelector(".dmg-ads-ad"),m=p.querySelector(".dmg-ads-container"),[v,y]=pA(p);gA({element:p,adElement:g,width:v,height:y});const b={pos:a,id:d,variant:c};"center"===h?.getAttribute("align")&&t.on("ad rendered",a,(e=>{const t=parseInt(p.style.height);(e=>{let{adElement:t,containerElement:n,event:r,height:i,log:o}=e;if(o("position rendered",{size:r.size}),r.size&&Array.isArray(r.size)&&r.size[1]<i){const e=Math.floor((i-r.size[1])/2);o("repositioning",{top:e}),t.style.transform=`translate(0,${e}px)`,t.style.top=`-${e}px`,n.style.height=i-e+"px"}else o("no need to reposition"),t.style.transform="",t.style.top="",n.style.height=""})({adElement:g,containerElement:m,event:e,height:t,log:u})})),u("adSlotMount",b),o.addEventListener("resize",(()=>fA({element:p,adElement:g,ad:{...b,sizes:f.size},position:a,broker:t,log:u}))),t.emit("slot mounted",b)})),t.on("destroy slot for type","gpt",(e=>{let{position:n}=e;r.extend(n)("destroying"),t.emit("destroy slot",n)}))}}),(0,We.F3)("analytics.loaf",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!1,isAdsFreeSupported:!0,init:function(e){let{broker:t,getConfig:n,log:r}=e;r("init loaf");const i=n("loaf.reportThreshold",16),o=n("loaf.extraInfoRegex");let a;o&&(a=new RegExp(o)),r("reportThreshold",i),r("regexForFunctionName",a),new PerformanceObserver((e=>{for(const n of e.getEntries())n.duration>i&&n.blockingDuration>0&&n.scripts.forEach((e=>{const n=a&&a.test(e.sourceURL),r=e.sourceURL,i=e.invoker===r?"(init)":e.invoker;let o={module:"loaf",event:"block",windowAttribuition:e.windowAttribution,invokerType:e.invokerType,sourceURL:mA(e.sourceURL),invoker:mA(i),value:e.duration};n&&(o={...o,functionName:e.sourceFunctionName,sourceCharPosition:e.sourceCharPosition}),t.emit("send event to bidmax",{type:"custom",payload:o})}))})).observe({type:"long-animation-frame",buffered:!0})}}),(0,We.F3)("bidders.rtbhouse",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,7,9,10]},vendorIds:{gdpr:[16]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.rtbhouse"),o=n("slotDescriptions.initial",{});r.info("adUnitsConfig",i);const a=(0,q.x1)((e=>{let[,t]=e;return t.size&&t.slotTypes.includes("gpt")}),(e=>{let[t,n]=e;return{code:t,bids:[{bidder:"rtbhouse",params:{publisherId:i.publisherId,region:i.region}}],mediaTypes:{banner:{sizes:n.sizes||n.size}}}}),Object.entries(o||{}));r.extend("adUnitTemplates")(a),t.register("provide prebid adUnits",(()=>a))}}),(0,We.F3)("bidders.airgrid",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[782]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.airgrid.apiKey","bee17b9c-ac27-4f30-b7d1-9607919b8403"),o=n("plugins.bidders.airgrid.publisherId","mus8D1"),a=n("plugins.bidders.airgrid.accountId","BUbi2p"),s=n("plugins.bidders.airgrid.bidders",["appnexus","pubmatic"]),d=n("plugins.bidders.airgrid.auctionDelay",2e3),l={name:"airgrid",params:{apiKey:i,accountId:a,publisherId:o,bidders:s||void 0}},c=[d?{...l,waitForIt:!0}:l],u=d?{auctionDelay:d,dataProviders:c}:{dataProviders:c};r("setting realTimeData rtd",u),t.register("provide prebid config",(()=>({realTimeDataConfig:u})))}}),(0,We.F3)("bidders.invibes.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4,9]},vendorIds:{gdpr:[436]},run(e){let{broker:t,getConfig:n,log:r}=e;const i=n("plugins.bidders.invibes",{displayPlacements:{}}),o=(0,T.Up)(i,["customEndpoint","domain"],{ignoreUndefined:!0}),a=Object.entries(i.displayPlacements).map((e=>{let[t,n]=e;return{code:t,mediaTypes:{banner:{sizes:(0,ke.get)(t)?.size||[]}},bids:[{bidder:"invibes",params:{...o,placementId:n}}]}}));r.extend("adUnits")(a),t.register("provide prebid adUnits",(()=>a))}});var vA=__webpack_require__(9557);function yA(e){return{prebidPriceFloorEnabled:e("plugins.assertive.floor.prebidEnabled",!1),gamPriceFloorEnabled:e("plugins.assertive.floor.gamEnabled",!1),tamPriceFloorEnabled:e("plugins.assertive.floor.tamEnabled",!1)}}(0,We.F3)("adlite",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},async init(e){const{DM:t,win:n}=e;n.getPaywallEntitlementsMightChange?.()&&(await(t?.later?.(["REFRESHED_PAYWALL_ENTITLEMENT"])),(0,vA.G)(e))},async run({broker:e,log:t}){const n=window.getPaywallEntitlements?.();let r;n?.includes("mailplus-ad-lite")?r="adlite":n?.includes("mailplus-basic")&&(r="basic");const{resolve:i,promise:o}=(0,P.v6)();e.intercept("set page level targeting",(0,y.Nn)(["paywall"]),(async([e,n],o)=>{const a={paywall:(await n).paywall+(r?`|${r}`:"")};t(a),i(a),o(e,a)})),await o,e.register("call for page analytics",(()=>o))}}),(0,We.F3)("players.adRequest.plcmt",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("players.adRequest.plcmt",{jwplayer:2,chromeless:2,video:1,ibv:2,hero:1});t.register("get video tags",(e=>{const{platform:t,pos:n}=e;return r("pos/platform",n,t),{plcmt:i[n]||i[t]}}))}}),(0,We.F3)("assertive-yield",{run:function(e){let{broker:t,getConfig:n,log:r,win:i}=e;if(!function(e){const{prebidPriceFloorEnabled:t,gamPriceFloorEnabled:n,tamPriceFloorEnabled:r}=yA(e);return t||n||r}(n))return void r("no functionality enabled, bailing");const o=function(e){const{prebidPriceFloorEnabled:t,gamPriceFloorEnabled:n,tamPriceFloorEnabled:r}=yA(e);__webpack_require__.g.assertive=S()({entityId:"qfgdsp7Li6QsPoTro",analytics:{integrations:{webAnalytics:!0},logUnfilled:!0},floor:{enabled:t||n||r,currency:"USD",prebid:t,gptHook:!1,apsHook:!1,limit:{percentage:.5}}},e("plugins.assertive.config",{}));const i=dt(e("plugins.assertive.script","https://qfgdsp7li6qspotro.ay.delivery/client-v2.js"));return e("plugins.assertive.preload.floorPrice",!1)&&function(e){const t=document.createElement("link");t.href=e,t.rel="preload",t.as="script",document.head.appendChild(t)}(e("plugins.assertive.floorPriceScript","https://qfgdsp7Li6QsPoTro.ay.delivery/floorPrice/qfgdsp7Li6QsPoTro/js/floorPrice/linreg.min.js")),i}(n),a=Promise.race([o,(0,P.wR)(n("assertive.scriptLoadTimeout",2e3))]),s={},{prebidPriceFloorEnabled:d,gamPriceFloorEnabled:l,tamPriceFloorEnabled:c}=yA(n);let u,p;const h=t.intercept("slot ready",(async(e,t)=>{let[n,i]=e;try{r("holding slot ready",i.pos),await a}catch(e){r.error(e)}finally{r("releasing slot ready",i.pos)}return t()}));d&&(r("prebid enabled"),t.register("provide prebid config",(()=>({priceFloorConfig:{}}))),u=t.interceptOnce("configure and start prebid",(async(e,t)=>{try{await a}catch(e){r.error(e)}return t()}))),c&&t.on("amazon banner slot created",(e=>{s[e.slotID]=e})),(l||c)&&(p=t.interceptInvoke("googletag.display",(async(e,t)=>{let[n,o,d]=e;try{await a,r("set gpt floor",d),i.assertive?.setFloors?.([d]),s[o]&&(r("set amazon floor",s[o]),i.assertive?.addAmazonFloors?.([s[o]]))}catch(e){r(e)}return t()})),o.then((()=>{r("script loaded, adding refresh interceptor"),h(),t.interceptInvoke("googletag.pubads.refresh",((e,t)=>{let[n,o]=e;try{l&&(r("set GPT floor",o.map((e=>e.molAd.parentId)).join(","),o),i.assertive?.setFloors?.(o))}catch(e){r.error(e)}return t()})),t.interceptInvoke("fetch amazon bids",((e,t)=>{let[n,{slots:o}]=e;try{r("set amazon floor",o.map((e=>e.slotID)).join(","),o),i.assertive?.addAmazonFloors?.(o)}catch(e){r.error(e)}return t()}))}))),o.catch((e=>{r.error("error loading script",e),u?.(),p?.(),h()}))}});const bA="__uspapi",_A="1YNN",wA="1YYN",SA="__cachedUSPData",TA=e=>!(!e||"1---"===e),IA=(e,t)=>{__webpack_require__.g[bA](e,null,((e,n)=>{n&&t(e)}))},kA=(e,t)=>e("ccpa.consentManagementRegions",["CA","VA"]).includes(t.region),AA=e=>e("ccpa.gpc.forced",navigator.globalPrivacyControl)&&e("ccpa.gpc.signal.enabled",!1);async function EA(e){let{broker:t,getConfig:n,geoInfo:r,localBroker:i,log:o}=e;const a=Date.now(),s=kA(n,r),d={cmpVersion:n("ccpa.version"),cmp:"ccpa",cmpEnforced:s,cmpRegion:r.region};s&&AA(n)&&(d.gpcEnabled=!0),await i.until("provision cmp created"),i.onInvoke("cmp data updated",(e=>{d.consent=e?"yes":"no",i.invoke("cmp request","getUSPData").then((e=>{d.uspString=e.uspString}))})),i.invoke("cmp request","getUSPData").then((e=>{o("getUSPData responded",e.uspString),d.uspString=e.uspString,d.consent=e.uspString===_A?"yes":"no",t.emit("send event to bidmax",{type:"custom",payload:{event:"loaded",module:"cmp",...(0,D.E)("loadTimeP1s",Date.now()-a)}})})).catch((e=>console.error(e))),t.register("call for page analytics",(()=>d))}async function CA(e){let{getConfig:t,localBroker:n,log:r,geoInfo:i}=e;const o=t("ccpa.consentManagementRegions",["CA","VA"]).includes(i.region);await n.until("provision cmp created"),IA("onUpdate",(e=>{r("onUpdate"),n.invokeAll("cmp data updated",e).then((()=>{n.emit("cache updated")}))})),o&&IA("onDissent",(()=>{r("onDissent"),n.invokeAll("cmp data updated",!1).then((()=>{n.emit("onDissent update handlers complete")}))}))}const xA={getUSPData:SA},OA="mol.ads.cmp.consent";async function PA(e){let{broker:t,log:n,localBroker:r}=e;const i=t.until("gpt initialized");r.onInvoke("cmp data updated",(e=>{t.emit("set page level targeting",{consent:e}),r.invoke("cmp request","getUSPData").then((r=>{n("user consent string updated",r),t.emit("set page level targeting",{us_privacy:r.uspString}),!e&&TA(r.uspString)&&o()})).catch((e=>{n.error(e)}))})),r.invoke("cmp request","getUSPData").then((async e=>{n("getUSPData responded",e),t.emit("set page level targeting",{us_privacy:e.uspString});const r=e.uspString===_A;t.emit("set page level targeting",{consent:r}),!r&&TA(e.uspString)&&o()})),t.emit("set page level targeting",{gdpr:0,cmp:"ccpa"});const o=async()=>{n("restrictDataProcessing"),t.emit("restrictDataProcessing",{rdp:!0}),t.emit("set page level targeting",{rdp:1});const[e]=await i;e.pubads().setPrivacySettings({restrictDataProcessing:!0}),t.emit("sync video tags update",{rdp:1})}}const DA="__uspapi",RA={getUSPData:"__cachedUSPData"};async function jA(e){let{getConfig:t,localBroker:n,log:r}=e;const i=t("cmp.cachedCommands",RA);r("cachedCMPCommands",i),__webpack_require__.g[DA]=__webpack_require__.g[DA]||((e,t,n)=>{r(e,t);const o=i[e],a=o&&localStorage.getItem(o);if(a){const t=JSON.parse(a);r(`using cached value for cmd: ${e}, value:`,t),n(JSON.parse(a),!0)}else __webpack_require__.g[DA].a.push([e,t,n])}),__webpack_require__.g[DA].a=__webpack_require__.g[DA].a||[],n.emit("provision cmp created")}const MA="mol.ads.ccpa.reprompt",NA=["gpc","amp","queryParam","ccpaOpts","localStorage"];async function UA(e){let{device:t,getConfig:n,geoInfo:r,localBroker:i,log:o}=e;const a=await i.invokeAll("provide consent string");o("receivedConsentStrings",a);const s=a.filter((e=>e)).reduce(((e,t)=>{let{src:n,consentString:r}=t;return e[n]=r,e}),{}),d=NA.find((e=>e in s)),l=d?s[d]:void 0,c=l&&"localStorage"!==d;i.emit("chosen provided consent string",{src:d,consentString:l}),o("providedConsentString",l),o("forceSetConsentString",c);const u=document.createElement("script"),p=n("ccpa.consentManagementRegions",["CA","VA"]);let h=n("ccpa.scriptBaseUrl",n("ccpa.scriptBase"));const f=n("ccpa.version");h=f?`${h}/${f}`:h,u.id="mol-ads-cmp",u.dataset.gvlUiVersion=n("ccpa.gvlUiVersion",186),u.dataset.cvlUiVersion=n("ccpa.cvlUiVersion",1),u.dataset.nrvUiVersion=n("ccpa.nrvUiVersion",1),u.dataset.vendorListBaseUrl=n("ccpa.vendorListBaseUrl","//cmp.dmgmediaprivacy.co.uk"),u.dataset.i18nVersion=n("ccpa.i18nVersion",7),u.dataset.backendBaseUrl=n("ccpa.backendBaseUrl","//cmp.dmgmediaprivacy.co.uk"),u.dataset.region=r.region,u.dataset.renderConfig=JSON.stringify(n("cmp.renderConfig",{layerTwo:{ccpaFrameworkText:"California Consumer Privacy Act",footerPrivacyText:"Do not sell my info"},layerThree:{privacyText:"Do Not Sell My Info"}})),u.dataset.consentManagementRegions=JSON.stringify(p),u.id="mol-ads-cmp",u.src=`${h}/iife/mol-ads-cmp.js`,u.dataset.brandName=n("ccpa.brand.name","DMG Media"),u.dataset.i18nLang=n("ccpa.i18nLang","en"),l&&(u.dataset.clientConsentString=l),c&&(u.dataset.forceSetConsentString="true");const g=document.createElement("link"),m=document.head.querySelector('link[rel="stylesheet"]')||document.head.lastChild,v=n("cmp.isEmbeddedVideo",!1),y=v?"video":"mobile"===t?"mobile":"desktop";v?u.dataset.renderVideo="true":l&&"localStorage"!==d||(u.dataset.render="true"),g.setAttribute("rel","stylesheet"),g.setAttribute("href",`${h}/css/${y}.css`),o("script opts",u.dataset),document.head.insertBefore(g,m),document.head.appendChild(u)}async function LA(e){let{geoInfo:{geo:t,region:n,city:r,inEu:i}}=e;__webpack_require__.g.PageCriteria={...__webpack_require__.g.PageCriteria,geo:t,region:n,city:r,inEu:i}}async function BA(e){let{localBroker:t}=e;const n=t.until("provision cmp created");t.register("cmp request",(async(e,t)=>(await n,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((async(n,r)=>{__webpack_require__.g[bA](e,t,((i,o)=>{o?n(i):r(new Error(`Failed to call ${bA}()(${e}, ${t})`))}))}))}(e,t))))}async function qA(e){let{geoInfo:t,getConfig:n,localBroker:r,log:i,registerPluginBouncer:o}=e;const a=()=>{i("user dissented..."),o(((e,t)=>(!t?.ccpa?.enabledIfDissent&&i("bouncing",e),!!t?.ccpa?.enabledIfDissent)))},s=n("ccpa.consentManagementRegions",["CA","VA"]).includes(t.region),d=r.invoke("cmp request","getUSPData");d.then((e=>{i("initial uspString",e.uspString)}));const l=new Promise((async e=>{r.onInvoke("cmp data updated",(async t=>{if(t)e(t);else{const t=await r.invoke("cmp request","getUSPData").uspString;TA(t)&&e(t===_A)}}));const t=(await d).uspString;TA(t)&&e(t===_A)}));(await d).uspString===wA?a():s&&(await l||a())}async function FA(e){let{geoInfo:t,getConfig:n,localBroker:r,log:i}=e;const o=JSON.parse(localStorage.getItem(SA)||"{}"),a=o.uspString===wA;kA(n,t),kA(n,t)&&AA(n)?a?i("user already dissented, bailing"):(localStorage.setItem(SA,JSON.stringify({...o,uspString:wA})),r.register("provide consent string",(()=>({src:"gpc",consentString:wA})))):i("GPC not relevant for user, bailing")}const VA=[EA,CA,async function(e){let{log:t,queryParams:n,localBroker:r}=e;n.IABUSPrivacy_String&&(t("consent string found in query params",n?.IABUSPrivacy_String),r.register("provide consent string",(()=>({src:"queryParam",consentString:n?.IABUSPrivacy_String}))))},async function(e){let{getConfig:t,localBroker:n,log:r,queryParams:i,ccpaOpts:o}=e;const a=i.IABUSPrivacy_String||o?.IABUSPrivacy_String,s=t("cmp.cachedCommands",xA);let d={};try{d=JSON.parse(s.getUSPData&&localStorage.getItem(s.getUSPData)||"{}")}catch(e){}const{uspString:l}=d,c=!l;n.register("local consent string",(()=>l)),l&&n.register("provide consent string",(()=>({src:"localStorage",consentString:l}))),n.register("cmp data updated",(async e=>(r("cmp data updated"),localStorage.setItem(OA,e?"yes":"no"),Promise.all(Object.entries(s).map((e=>{let[t,i]=e;return new Promise((e=>{n.invoke("cmp request",t).then((n=>{r("updating storage",i,n),localStorage.setItem(i,JSON.stringify(n)),e({[t]:n})}))}))})))))),!c&&a&&a!==l&&(r("clear cache"),Object.values(s).forEach((e=>{localStorage.removeItem(e)})),localStorage.removeItem(OA))},async function(e){let{broker:t,localBroker:n}=e;const r=n.until("provision cmp created"),i=async()=>{await r,__webpack_require__.g.__uspapi.a.push(["openSettings"])};t.on("openCmpBanner",i),__webpack_require__.g.openCcpaUi=i},PA,jA,async function(e){let{geoInfo:t,getConfig:n,localBroker:r,log:i}=e;const o=()=>{i("Saving config"),localStorage.setItem(MA,JSON.stringify(c))},a=n("ccpa.gpc.constrainReprompt",!1),s=n("ccpa.gpc.forced",navigator.globalPrivacyControl);if("US"!==t.geo||AA(n)||a&&!s)return void i("user not eligble for reprompt, bailing");localStorage.removeItem("__ads_cmp_reprompt");const d=n("ccpa.reprompt",{version:0,chance:0}),l=localStorage.getItem(MA),c=l&&JSON.parse(l)||{version:0,chance:Math.random()};i("Goal:",d),i("Current:",c);const u=await r.invoke("local consent string"),p=!!u;if(i("existingUser",p,u),p&&c.version<d.version&&c.chance<d.chance)try{await r.invoke("cmp request","reset"),i("Cookie removed"),c.version=d.version,c.ts=(new Date).toISOString(),o()}catch(e){i("Failed resetting CMP",e)}else p||(c.version=d.version,c.ts=(new Date).toISOString()),o()},UA,LA,BA,qA,function(e){let{getConfig:t,localBroker:n,log:r}=e;AA(t)?r("gpc enabled - no reload onDissent"):n.on("chosen provided consent string",(e=>{let{src:t}=e;r("src",t),t&&"localStorage"!==t||(r("handle reload onDissent"),n.on("onDissent update handlers complete",(()=>{__webpack_require__.g.location.reload()})))}))},FA,function(e){let{doc:t,log:n,win:r,localBroker:i,queryParams:o,getConfig:a}=e;const s=a("ccpa.embedded.policyUrls",["/home/article-7759273/Privacy-Cookies-Policy-Policy.html"]).some((e=>e===r.location.pathname));if(!(s&&r.opener&&o.brokerId))return void n("page not opened by embedded video, bailing",s,!!r.opener,o.brokerId);const d=new URL(window.location.href);d.searchParams.delete("brokerId"),history.replaceState(history.state,"",d.href),n("opened");const l=new Io({target:r.opener,ns:"@mol-ads/mol-ads-cmp",sender:"@mol-ads",id:o.brokerId}),{promise:c,resolve:u}=(0,P.v6)();i.on("cache updated",(()=>{n("cache updated"),t.querySelector(".mol-ads-cmp--open")?n("banner still open, bailing"):(i.invoke("cmp request","getUSPData").then((e=>{l.emit("ccpa:user_preference",e.uspString),n("notifying"),u()})),i.intercept("onDissent update handlers complete",(async(e,t)=>(n("intercepted"),await c,n("notified"),t()))))}))}],zA=[EA,CA,PA,jA,UA,LA,BA,qA,FA];!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VA;const t=Array.from(new Set([...zA,...e]));(0,We.F3)("cmp.v2",{ccpa:{enabledIfDissent:!0},initTimeout:D.pX,async init(e){const{pageGeoInfo:n,log:r,removePlugins:i,pageCriteria:o}=e;i(["cmp.hackyDelayer","cmp.reprompt","cmp","cmpAvailabilityNotification","cmpRtaTracking","analytics.cmp"]);const a=await(async(e,t)=>{const{geo:n,region:r}=e||{};if(n&&r)return{geo:n,region:r};if(t){const e=await(t?.()),{Country:n,REGION_CODE:r,CITY:i,INEU:o}=e;return{geo:n,region:r,city:i,inEu:o}}})(o,n);if("US"!==a?.geo)return void r("not in CCPA geo, bailing");const s=function(e){const{ownName:t}=e,n=new y.QY,r=n.broker(t);return e.log.enabled&&function(e){const t=(0,We.sd)("message-trace");if(t){const n={"ads.debug.messageTrace.broker":"*"};t.init?.({...e,queryParams:n})}}({...e,broker:r}),n}(e),d=Xk(s,e,t,{geoInfo:a});s.start(!1),await d,r("ccpa loaded")}})}(VA),(0,We.F3)("prebid.id-absorption",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n}=e;const r=__webpack_require__.g.pendingIds={},i=new Set;pbjs.onEvent("bidRequested",(e=>{let{auctionId:t,bidderCode:n,bids:o,transactionId:a}=e;o.forEach((e=>{let{adUnitCode:t,userIdAsEids:o,transactionId:a}=e;o&&((r[n]=r[n]||{})[t]=o.map((e=>{let{source:t}=e;return t}))).forEach((e=>i.add(e)))}))})),t.intercept("bid",((e,t)=>{let[i,o,{bidder:a,...s}={}]=e;const d=r[a]?.[o];return d?(delete r[a][o],0===Object.keys(r[a]).length&&delete r[a],t(i,o,{bidder:a,...s,extraAnalyticsData:{...s.extraAnalyticsData,ids:d}})):(n("missing bid:",a,o),t())})),t.register("call for page-unload",(()=>({kis:[...i]})))}}),(0,We.F3)("securityViolation",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},run(e){let{broker:t,log:n,win:r}=e,i=0;const o={};r.addEventListener("message",(e=>{let{data:r}=e;if(i=r,(0,T.Gv)(i)&&"security violation"===i.scope&&(0,T.Gv)(i.data)&&"string"==typeof i.data.pos&&"string"==typeof i.data.id){const e=r.data;n("violation",e),t.emit("ad security violation",e)}var i})),t.on("ad security violation",(async e=>{const r=n.extend(e.pos);if(i++,t.emit("send event to bidmax",{type:"custom",payload:{module:"security",event:"violation",pos:e.pos,...e.responseInformation?(0,x.y)(e.responseInformation):{}}}),e.pos in o){const t=o[e.pos].next();t.done||(r(`waiting ${2*t.value}s`),await(0,P.wR)(2e3*t.value))}else o[e.pos]=(0,I.Ed)();t.once("ad rendered",e.pos,(()=>{r("resuming auto refresh"),t.emit("resume refreshing ads",[e.pos])})),r("pausing auto refresh"),t.emit("pause refreshing ads",[e.pos]),r("refreshing slot"),t.emit("prepare to refresh ads",[e.pos]),t.emit("refresh ads",{positions:[e.pos],ids:[e.id],reason:"security violiation"})})),t.register("call for page-unload",(()=>i?{adViolations:i}:{}))}});const $A=["mpu_mobile","mpu_mobile_promotions","mpu_mobile_factbox"],WA=["#mobile-content .scrollable-content > article",'#page-container .article-text [itemprop="articleBody"]'].join(", ");(0,We.F3)("outbrain.compliancy",{run:function(e){let{broker:t,getConfig:n,log:r,doc:i}=e;if(!n("plugins.enabled").includes("widgets"))return void r("outbrain disabled, bailing");const o=t.until("dom ready"),a=n("outbrain.compliancy.minContentHeight",50),s=n("outbrain.compliancy.lastPositions",$A);r("config:",{minContentHeight:a,positions:s}),s.forEach((e=>{t.intercept("slot mounted",(0,y.I$)({pos:e}),(async(e,t)=>{let[,n]=e;const{containerId:s,id:d}=n,l=s||d,c=i.getElementById?.(l);if(!c)return r("unable to find ad container, bailing"),t();const u=i.querySelector(WA);if(!u)return r("unable to find article body, bailing"),t();const p=XA(u,c);if(!p)return r("unable to find container ancestor, bailing"),t();await o;const h=GA(p).filter((e=>"P"===e.nodeName)).map((e=>e.getBoundingClientRect().height)).reduce(HA,0);if(r(`${l} remainingHeight:`,h),!(h<a))return t();r("line height too small, removing ad",l),i.getElementById?.(l)?.closest(".adHolder, ad-slot")?.remove()}))}))},gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0}});const HA=(e,t)=>e+t,GA=e=>{const t=[];let n=e?.nextElementSibling;for(;n;)t.push(n),n=n.nextElementSibling;return t},XA=(e,t)=>{let n=t.parentElement;for(;n&&n.parentElement!==e;)n=n?.parentElement;return n};function JA(e){return!!e.href}function KA(e){return Array.from(e.querySelectorAll("a")).filter(JA)}let YA;(0,We.F3)("slots.lazyLoad",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,doc:n,log:r}=e;t.intercept("slot defined",((e,t)=>{let[i,o]=e;if("number"!=typeof o.lazy)return d();const a=n.getElementById(o.id);if(!a)return r.error(`Cannot find container "${o.id}"`),d();r("will lazy load",o.pos,o.lazy,"pixels ahead");const s=Ho.get(o.lazy);function d(){return n.querySelector(`.dmg-ads-lazy[data-id="${o.id}"]`)?.classList.remove("dmg-ads-lazy-pending"),t(i,o)}s.observe(a,(e=>{e.isIntersecting&&(s.unobserve(a),r("load",o.pos),d())}))}))}}),(0,We.F3)("slots.lazyLoadCampaignManager",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,getConfig:n,doc:r,log:i}=e;const o=[];for(const[e,t]of(0,T.jO)(n("slots.enabled"))){if("lazy"!==t.type)continue;const r=n(`slotDescription.${e}`);i.extend(e)("Setting up",r),o.push({slotConfig:t,match:r.isTemplate?e=>new RegExp(r.regex).test(e.pos):t=>t.pos===e})}t.intercept("slot defined",((e,t)=>{let[,n]=e;const a=o.find((e=>{let{match:t}=e;return t(n)}))?.slotConfig;if(!a)return t();const s=i.extend(n.id);s("Intercepting");const d=r.getElementById(n.id);if(!d)return s.error("Element does not exist. Bailing."),t();const l=Ho.get(a.offset);l.observe(d,(e=>{e.isIntersecting&&(l.unobserve(d),s("load"),t())}))}))}}),(0,We.F3)("button-link-wrapper",{init:async function(e){let{broker:t,getConfig:n,log:r}=e;r("run");const i=n("plugins.button.prefix","https://r.bttn.io?btn_ref=org-7460e84ccf369ce0&btn_url="),o=new RegExp(n("plugins.button.matchPattern","https?://www.amazon..*"));t.register("provide anchor wrapper",(async e=>{if(!e.href)return;const t=await(async e=>!!e&&o.test(e))(e.href);return r("isMatch",t,e.href,o.source),t?{priority:100,newValue:`${i}${encodeURIComponent(e.href)}`,plugin:"button-link-wrapper"}:void 0}))},vendorIds:{gdpr:"N/A"},purposeIds:{gdpr:"N/A"}}),(0,We.F3)("anchor-wrapper",{run:async function(e){let{broker:t,doc:n,log:r}=e;r("run");const i=t.until("dom ready"),o=async e=>{const n=(await t.invokeAll("provide anchor wrapper",e)).filter((e=>!!e)).reduce(((e,t)=>e?t.priority>e.priority?t:e:t),{priority:-1,newValue:"",plugin:""});n&&""!==n.newValue&&a(e,n)},a=(e,n)=>{let{plugin:i,newValue:o}=n;i&&o||r("skip anchor with no match",e),e.dataset.originalHref?r("already parsed",e):(r("matched",e.href,`replacing ${e.href}`,{plugin:i,newValue:o}),e.dataset.originalHref=e.href,e.addEventListener("click",(n=>{r.info("click event",e.dataset.originalHref),t.emit("send event to bidmax",{type:"custom",payload:{module:"anchor-wrapper",plugin:i,url:e.dataset.originalHref}})})),e.href=o)};await i,new MutationObserver((e=>{for(const t of e)for(let e=0;e<t.addedNodes.length;e++){const n=t.addedNodes[e];if(1===n.nodeType){if(n instanceof HTMLElement&&n.classList.contains("noskim"))return;if(n instanceof HTMLAnchorElement)o(n);else if(n.hasChildNodes()){const e=KA(n);for(let t=0;t<e.length;t++)o(e[t])}}}})).observe(n.body,{childList:!0,subtree:!0});const s=KA(n);for(let e=0;e<s.length;e++){const t=s[e];o(t)}},init:async function(e){let{log:t}=e;t("init")},vendorIds:{gdpr:"N/A"},purposeIds:{gdpr:"N/A"}});const QA=[[636,358]];let ZA,eE,tE;function nE(e){const{player:t,log:n,fullScreenOnFirstPlay:r}=e;r&&function(e){let{player:t,log:n}=e,r=!1;t.one("play",(()=>{if(!r){n("going full screen");try{t.trigger("full-size"),r=!0}catch(e){n.error(e)}}}))}(e),t.on("resize",(t=>{!function(e){let{target:{player:t}}=e;return t.isFullscreen()||t.isFullSize?.()}(t)?(n("minimized event"),n("setting minimized sizes"),function(e){let{setConfig:t}=e;t("plugins.slots.video.v2.mediaTypes.video.playerSize",YA),t("videoDescription.hero.size",ZA),t("videoDescription.hero.screen",eE),t("videoDescription.video.size",QA)}(e)):(n("full size event"),n("setting full screen sizes"),rE(e))}))}function rE(e){let{setConfig:t}=e;t("plugins.slots.video.v2.mediaTypes.video.playerSize",tE),t("videoDescription.hero.size",[...ZA,tE]),t("videoDescription.video.size",[...QA,tE]),t("videoDescription.hero.screen",{width:tE[0],height:tE[1]})}(0,We.F3)("editorialVideo.fullScreen",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!1,gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},init(e){const t=e.getConfig("editorialVideo.fullScreenOnFirstPlay",!0);tE=e.getConfig("videoDescription.video.fullSize",[1080,1920]),function(e){let{getConfig:t}=e;YA=t("plugins.slots.video.v2.mediaTypes.video.playerSize"),ZA=t("videoDescription.hero.size"),eE=t("videoDescription.hero.screen")}(e),t&&rE(e)},run(e){const{log:t,getConfig:n,win:r}=e,i=n("editorialVideo.fullScreenOnFirstPlay",!0);r.DM?.later?.("videoplayer-ready",(()=>{t("videoplayer-ready");for(const{player:n}of Jo())nE({...e,player:n,log:t.extend(n.id()),fullScreenOnFirstPlay:i})}))}}),(0,We.F3)("editorialVideo.autoplay",{description:'Autoplays a video when "#video" is in the url.',ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!1,gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},run(e){let{broker:t,getConfig:n,log:r,win:i}=e;r("enabled");const{promise:o,resolve:a}=(0,P.v6)();async function s(e){r("Playing muted"),e.player.muted(!0),await(e.player.play()?.catch(r.error))}o.then((e=>r({isAutolplaying:e}))),t.register("editorialVideo.autoplay",(()=>o)),i.DM?.later?.("videoplayer-ready",(()=>{r("videoplayer-ready");const e=function(){if(r({hash:i.location.hash}),!i.location.hash)return;if("#video"===i.location.hash)return Jo()[0];const e=i.location.hash.slice(1);for(const t of Jo())if(t.id===e)return t}();if(!e)return r("No video targeted. Bailing."),void a(!1);r({molFeVideoPlayerElement:e}),e.scrollIntoView(),e.player.ready((async()=>{if(r("ready"),n("editorialVideo.autoplay.withSound",!1)){r("attempting to play with sound");try{await(t=e,t.player.tech.el().play())}catch(t){t instanceof DOMException&&"NotAllowedError"===t.name?await s(e):r.error(t)}}else await s(e);var t;a(Xo(e.player))}))}))}}),(0,We.F3)("slots.ad-feature",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:function(e){let{doc:t,broker:n,log:r,DM:i,getConfig:o}=e;n.once("dom ready",(()=>{i?.later?.(["PAGE_METADATA_SET"],(()=>{if("desktop"!==i.getPageMetadata?.()?.renderPlatform)return void r("not supported for mobile, bailing");const e=o("ad-list.ad-feature",[]),a=t.querySelectorAll('li[data-ad-marker-group="puff-list"], li[data-auto-puff-item="true"]');e.forEach((e=>{let{index:i,position:o}=e;const s=a[i-1];if(s&&function(e){return!!t.evaluate(iE,e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}(s)){r("adding ad-slot at index",i);const e=document.createElement("ad-slot");e.setAttribute("position",o),e.setAttribute("unstick","true"),s.classList.add("dmg-ads-replaceable"),r("adding postion",o),s.insertBefore(e,s.firstChild),n.once("ad rendered",o,(t=>{let{isEmpty:i}=t;i&&(r(`${o} not filled, setting display: none`),e.style.display="none",n.emit("send event to bidmax",{type:"custom",payload:{event:"empty",module:"ad-feature",position:o}}))}))}else n.emit("send event to bidmax",{type:"custom",payload:{event:"missing",module:"ad-feature",position:o}})}))}))}))}});const iE='a/span/span[text()="Ad Feature"]';function oE(e){let t=0;return(0,xe.walk)(e,(e=>!e.previousSibling),(e=>{const n=e.previousElementSibling;return n?.classList?.contains("mol-para-with-font")&&t++,n})),t}(0,We.F3)("prebid.bidderOrder",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:r}=e;const i=n("prebid.bidderOrder",[]);i.length?(t.register("provide prebid config",(()=>({bidderSequenceConfig:{bidderSequence:"fixed"}}))),t.intercept("configure and start prebid",((e,n)=>{let[o,a,s]=e;try{const e=s.reduce(((e,t)=>{const n=t?.bids?.[0]?.bidder;return n?(e[n]=e[n]||[],e[n].push(t),e):e}),{}),t=Object.keys(e).filter((e=>!i.includes(e))),d=[...i.map((t=>e[t])).filter((e=>e)).flat(),...t.map((t=>e[t])).flat()];return r("plugin order",d),n(o,a,d)}catch(e){r.error("failure in ordering by bidder",e?.message),t.emit("send event to bidmax",{type:"custom",payload:{event:"bidderOrderError",module:"prebid"}})}return n(o,a,s)}))):r("no bid order specified, bailing")}}),(0,We.F3)("prebid.paapi",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let t,{broker:n,log:r}=e;n.register("prebid loaded",(e=>{r("setting config"),t=e,t.setConfig({paapi:{enabled:!0,defaultForSlots:1,gpt:{configWithTargeting:!1}}})})),n.on("bids received",(()=>{googletag.cmd.push((()=>{r("setting paapi config for gpt"),t?.setPAAPIConfigForGPT()}))}))}}),(0,We.F3)("adslotComponent.performPlayer",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:e=>{let{broker:t,getConfig:n,log:r,doc:i}=e;const o=n("performplayer",{enabled:!1,moveToSuitablePara:!0,rerender:300,performPlayerConfig:"",url:""}),a=[];t.on("slotComponentRendered","perform-player",(e=>{const{position:t,props:n}=e,{id:s}=n,l=r.extend(t);l("message received",e);const c=i.querySelector(`[data-id="${s}"]`);c?"true"===c.dataset.isMovable&&o.moveToSuitablePara?a.push({element:c,position:t,id:s}):d(c,t,l):l(`unable to find element for id: ${s}, bailing`)}));const s=t.until("dom ready");async function d(e,n,r){const i=o.trackingId;i||r.warn("Cannot find a tracking id"),r("inserting script in",`${o.url}#${i}`,e),await t.invoke("load script",`${o.url}#${i}`,n,{},void 0,(t=>e.insertAdjacentElement("afterend",t))),t.emit("new perform player",i,e)}t.register("placement requests",(async()=>(await s,a.map((e=>{let{element:n,position:i,id:o}=e;const a=r.extend(i);return{broker:t,log:a,sourcePlugin:"adslotComponent.performPlayer",targetParagraphIndex:oE(n),insertMethod:e=>{a("inserting",n,"after",e),e.insertAdjacentElement("afterend",n),d(n,i,a).catch(a.error)}}})))))}});function aE(e){let{width:t,height:n,container:r,iframe:i,log:o,win:a}=e;function s(e){setTimeout((()=>{const s=e?.target?.type,d=a.innerWidth;o(`ScreenOrientation change: ${s}, width: ${d}`),sE(d,t,n,r,i)}))}return screen.orientation.addEventListener("change",s),()=>{screen.orientation.removeEventListener("change",s)}}function sE(e,t,n,r,i){const o=n/t;r.style.width=`${e}px`,r.style.height=e*o+"px",i.style.scale=`calc(${e}/${t})`}(0,We.F3)("responsive-ads",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:function(e){let{win:t,log:n,doc:r,getConfig:i,broker:o}=e;t.addEventListener("message",(e=>{try{if("string"!=typeof e.data||!e.data.startsWith("_dm_ads_message\n"))return;const a=e.data.substring(16),s=JSON.parse(a);if(!function(e){return"set_full_width"===e.scope&&e.data.pos&&e.data.width&&e.data.height}(s))return void n("not valid responsive ad message");const{pos:d}=s.data,l=parseInt(s.data.width),c=parseInt(s.data.height),u=n.extend(d);u("message received",s.data);const p=i(`slotDescription.${d}`),{id:h}=p;if(o.emit("send event to bidmax",{type:"custom",module:"responsiveAds",event:"resize",pos:d}),function(e,t){return!!e.querySelector(`ad-slot[position=${t}]`)}(r,d)){const e=s.data.variant?`${d}-${s.data.variant}`:h;!function(e){let{doc:t,log:n,win:r,width:i,height:o,broker:a,id:s}=e;const d=t.querySelector(`[data-id=${s}]`);if(!d)return void n.error("unable to find ad container, bailing",s);d.classList.add("dmg-ads-responsive");const l=d.style.width,c=d.style.height,u=r.innerWidth,p=d.style.marginLeft,h=d.style.paddingLeft;d.style.paddingLeft="0";const f=d.querySelector(`#${s}`),g=f.style.height,m=f.style.maxHeight,v=f.style.maxWidth;f.style.height="100%",f.style.maxHeight="none",f.style.maxWidth="none";const y=f.querySelector("[id^=google_ads_iframe]"),b=y.style.height;y.style.height="100%";const _=f.querySelector(`#${s} iframe`);_.style.transformOrigin="top",sE(u,i,o,d,_);const w=aE({width:i,height:o,container:d,iframe:_,log:n,win:r}),{cancel:S}=a.on("dfp slot requested",((e,t)=>{t.slot.molAd.parentId===s&&(n("resetting ad size"),w(),S(),d.classList.remove("dmg-ads-responsive"),d.style.marginLeft=p,d.style.paddingLeft=h,d.style.width=l,d.style.height=c,f.style.height=g,f.style.maxHeight=m,f.style.maxWidth=v,y.style.height=b,_.style.scale="1")}))}({doc:r,log:u,win:t,width:l,height:c,broker:o,id:e})}else!function(e){let{doc:t,log:n,win:r,width:i,height:o,broker:a,id:s}=e;n("resizing");const d=t.getElementById(s),l=d.style.width,c=d.style.height,u=r.innerWidth,p=d.querySelector("[id^=google_ads_iframe]"),h=p.style.height;p.style.height="100%";const f=d.querySelector(`#${s} iframe`);f.style.transformOrigin="top",sE(u,i,o,d,f);const g=aE({width:i,height:o,container:d,iframe:f,log:n,win:r}),{cancel:m}=a.on("dfp slot requested",((e,t)=>{t.slot.molAd.parentId===s&&(n("resetting ad size",e,t),g(),m(),d.style.width=l,d.style.height=c,p.style.height=h,f.style.scale="1")}))}({doc:r,log:u,win:t,width:l,height:c,broker:o,id:h})}catch(e){console.error(e)}}))}}),(0,We.F3)("trackers.ipsos",{purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},run(e){let{broker:t,win:n,getConfig:r,doc:i,log:o}=e;const a=document.querySelector('script[src*="dotmetrics"]'),s=n.location.hostname.includes("thisismoney"),d={shortName:n.PageCriteria.subchannel,parentChannel:n.PageCriteria.subchannel===n.PageCriteria.channel?null:n.PageCriteria.channel},l=n.location.pathname,c=function(e,t,n,r){const i=t.shortName,o=r&&r.split("/").filter(Boolean).filter((e=>!/article|html/.test(e))).pop()||i,a=e=>"home"===e,s=r&&/article-/.test(r)&&a(i)&&a(o),d=r&&/^\/registration/.test(r),l=r&&/^\/best-buys/.test(r);return d?"registration":l?"best-buys":function(e,t,n){const r=t.shortName,i=t.parentChannel||r,o=e["as-parent"],a=e["as-children"],s="money"===i,d=s&&!t.parentChannel,l=a.includes(r),c=o.includes(i);return n&&l?r.replace("money",""):n&&d?"home":n?"thisismoney":l&&s&&!/money/.test(r)?"money"+r:l?r:c?i:"dmgt"}(e.ipsosTracking,{...t,...s?{shortName:"dmgt",parentChannel:"dmgt"}:{}},n)}(r("trackers.ipsos",dE),d,s,l);if(a){const e=new URLSearchParams(new URL(a.src).search).get("t");t.emit("send event to bidmax",{type:"custom",payload:{module:"ipsos",event:"found",same:e===c,trackingFromClojure:e,trackingFromAds:c}})}else{const e=n.dm=n.dm||{AjaxData:[]};n.dm.AjaxEvent=function(t,r,i,o){e.AjaxData.push({et:t,d:r,ssid:i,ad:o}),n.DotMetricsObj&&n.DotMetricsObj.onAjaxDataUpdate()},t.emit("import script",`https://uk-script.dotmetrics.net/door.js?d=${i.location.host}&t=${c}`),t.emit("send event to bidmax",{type:"custom",payload:{module:"ipsos",event:"load",trackingFromAds:c}})}}});const dE={ipsosTracking:{"as-parent":["football","moneypensions","moneynews","sciencetech","shoppingus","tvshowbiz","uknews","news","health","travel","games","premierleague","formulaone","yourmoney","you","ukweather","video","golf","royals","moneyholidays","sport","tennis","dailymailtv","coffeebreak","tv","shoppingau","shoppinguk","gardening","debate","property","ushome","cricket","moneyexperts","boxing","registration","home","money","mma","racing","usshowbiz","moneysaving","auhome","wires","moneycars","rugbyunion","femail","weather","galleries","moneybills","moneyinvesting","moneymortgageshome"],"as-children":["football","moneypensions","podcast","femailfitness","sportsnews","moneynews","moneymarkets","food","uknews","cleaning","premierleague","autv","NRL","aussport","formulaone","celebrity","you","ukweather","moneyhome","femailau","golf","beauty","AFL","moneyholidays","melbourne","femailtravel","worldnews","escape","tennis","reallife","gardening","parenting","property","femailhealth","femailfashion","cricket","ustv","moneyexperts","championsleague","boxing","moneycardsloans","diyinvesting","relationships","mma","racing","smallbusiness","moneysaving","sydney","moneycars","newzealand","rugbyunion","brisbane","homes","weather","moneybills","lifehacks","moneyinvesting","femailfashionhub","buytolet","moneymortgageshome"]}};(0,We.F3)("sticky.banner.v2",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:function(e){let{broker:t,DM:n,getConfig:r,log:i}=e;if(!window.getComputedStyle)return;i("starting");const o=document.createElement("div"),{news:a,puff:s}=r("slotDescription.sticky_banner.panel.unit")||{},d=e=>{if("desktop"===e)return;const n=r("slotDescriptions.initial").sticky_banner;i("dispatching slotDescription update",n);const o="puff"===e||"showbiz"===e?s:a;t.emit("update description","sticky_banner",{...n,adUnit:(0,F.A)(o)})};Ra(n,i).then((e=>{d(e)})),t.interceptOnce("slot defined",(0,y.I$)({pos:"sticky_banner"}),((e,n)=>{let[,a]=e;try{i("replace sticky_banner element"),function(e){let{broker:t,getConfig:n,log:r,ad:i,underlayElement:o}=e;const a=document.getElementById(i.id),s=n("pos.stickyBanner.hiddenUntilImpression",!0),d=n("pos.stickyBanner.underlayPadding.top",15),l=n("pos.stickyBanner.underlayPadding.bottom",15),c=n("pos.stickyBanner.underlayPadding.closeButton",!1),u=n("pos.stickyBanner.disableAdvertisementBanner",!1);r("config:",{paddingTop:d,paddingBottom:l,hiddenUntilImpression:s,disableAdvertisementBanner:u});const p=o;if(p.id="stickyBannerUnderlay",s&&(p.style.display="none"),document.body.appendChild(p),!u){const e=vt();p.appendChild(e)}const h=document.createElement("div");if(h.classList.add("adHolder"),h.classList.add("sticky_banner_overrides"),h.classList.add("noAdLabel"),h.id="stickyBanner",h.style.marginTop="0",p.style.padding=`${d}px 0 ${l}px 0`,p.appendChild(h),lE()&&(0,xe.appendStyle)(`#stickyBannerUnderlay #stickyBanner {\n      transform: scale(${cE});\n    }`),c){const e=document.createElement("button");e.classList.add("closeButton"),p.appendChild(e),e.addEventListener("click",(()=>{p.style.display="none"}))}t.on("ad rendered","sticky_banner",(e=>{let{isEmpty:t,size:n}=e;if(r("sticky banner rendered:",{isEmpty:t}),!t&&n){const e=Number(n[1]);if(p.style.display="flex",lE()){r("ad height:",e);const t=e*cE-e,n=`${Math.round(d*cE+t/2)}px 0 ${Math.round(l*cE+t/2)}px 0`;p.style.padding=n,r("scalled padding:",n)}}else p.style.display="none"})),a?.parentNode?.replaceChild(p,a)}({broker:t,getConfig:r,log:i,ad:a,underlayElement:o})}catch(e){console.error(e)}n()})),t.on("panel updated",((e,n)=>{i("panel updated",n,e),t.emit("destroy slot","sticky_banner"),d(n),t.emit("slot mounted",{pos:"sticky_banner",id:"stickyBanner"})})),t.on("fullScreenOverlayStarted",(()=>{i("fullScreenOverlayStarted, destroying sticky_banner"),o.classList.add("fullScreenOverlay")})),t.on("fullScreenOverlayEnded",(()=>{i("fullScreenOverlayEnded, mounting sticky_banner"),o.classList.remove("fullScreenOverlay")}))}});const lE=()=>document.body.classList.contains("mol-desktop"),cE=window.innerWidth/window.screen.width;(0,We.F3)("fraud.humansec",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{broker:t,log:n,win:r,getConfig:i}=e;n("init");const o=i("humanSec.useCacheBust",!0),a=r.dataLayer=r.dataLayer||[];let s="https://s.admthop.com/2/246321/minimal.js?dt=2463211729813093134000&pd=mkt";o&&(s+=`&cb=${(0,D.zE)()}`),t.emit("import script",s),t.register("call for page analytics",(()=>{if(a.some((e=>"miDec"===e.event)))return{hus:{b:!0}}}))}}),(0,We.F3)("fraud.datadome",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{log:t,win:n}=e;t("init")}}),(0,We.F3)("fraud.akamaiCP",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{broker:t,log:n,getConfig:r}=e;n("init");const i=r("akamaiCP.c","_ak_ads"),o=new Set(r("akamaiCP.b",["c342b","006e3","4a917","5a95b","888c5"])),a=new Set(r("akamaiCP.h",["443e7","5cad0","aa6e9","3d463","3cfa7"])),s=(0,b.Ri)(i);let d;d=s?o.has(s)?2:a.has(s)?3:1:0,n("value:",s,d),t.register("call for page analytics",(()=>({akacp:{b:d}})))}}),(0,We.F3)("page.renderPlatform",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},isAdsFreeSupported:!0,init:e=>{let{removePlugins:t}=e;t(["page.homepageRenderPlatform"])},run:e=>{let{broker:t,pageMeta:n={},isHomepage:r,log:i}=e;const{renderPlatform:o}=n,a=void 0===r?{renderPlatform:o}:{homepage:r,renderPlatform:o};t.register("call for page analytics",(()=>a));const s="mobile"===o;i("setting page-level targeting",{mobile:s}),t.emit("set page level targeting",{mobile:s})}});const uE=(0,_.h)("processQueue"),pE=y.Ay.broker("processQueue");function hE(e){if(function(e){return"object"==typeof e&&null!==e&&"string"==typeof e.scope}(e))!function(e){uE("api item",e),pE.emit("api message",e.scope,e.data)}(e);else if(function(e){const{adverts:t}=__webpack_require__.g;return Array.isArray(e)&&e.length>=3&&e.length<=5&&"FacadeQueueItem"===e[0]&&"function"==typeof t[e[1]]&&Array.isArray(e[2])&&["undefined","function"].includes(typeof e[3])&&["undefined","function"].includes(typeof e[4])}(e))!function(e){const{adverts:t}=__webpack_require__.g,[,n,r,i,o]=e;uE("calling",n,r);try{const e=t[n](...r);i?.(e)}catch(e){uE.error(e),o?.(e)}}(e);else if("function"==typeof e)try{e()}catch(t){uE.error("error processing item:",e,t)}else uE.error("unsupported task type:",e)}const fE=(0,_.h)("delayed-entry");(_E("tcfv2")||_E("tcfv2-v2"))&&(fE("setting up tcf stub"),(0,id.NH)());const gE=ye;__webpack_require__.g.adverts.startTime=m.S,__webpack_require__.g.adListLoader=Q,__webpack_require__.g.adsDescriptions=ke,__webpack_require__.g.adsRenderer=Ae,__webpack_require__.g.DfpServer=Ee,__webpack_require__.g.adsTrackers={getRequestedAds:gE},__webpack_require__.g.AdIntegrator=Ce,__webpack_require__.g.AdBehaviour=t,__webpack_require__.g.AdImpression=Be(),__webpack_require__.g.AdEvents=Fe(),__webpack_require__.g.adverts.getRtaReport=ge,__webpack_require__.g.adverts.getBannerFallbackPromise=me,__webpack_require__.g.adverts.getRequestedAds=ye,__webpack_require__.g.adverts.getSyncVideoTags=be,__webpack_require__.g.adverts.startVideoAuction=Ie,__webpack_require__.g.adverts.getVideoAdsSetup=Y,y.Ay.broker("molEntry").register("call for page analytics",(()=>({configVersion:(0,v.Jt)("__generated.commit.sha"),bundle:"mol",cmVersion:(0,v.Jt)("__generated.rulesJs.version"),cmCluster:(0,v.Jt)("__generated.rulesJs.cluster")})));const mE=(e,t,n={})=>Object.entries(e).reduce(((e,[n,r])=>{const i=(t?t+".":"")+n;if("default"===n)e[t]=r;else if("function"==typeof r)e[i]=r;else{if(r)return mE(r,i,e);console.warn(`Plugin "${i}" does not export anything. Check the way it's being imported in to the project.`)}return e}),n),vE=Object.assign({},n,mE(g));async function yE(){await async function(e){let{plugins:t=Ke,context:n={},mandatory:r=Ye,messageBus:i}=e;t={...t,...st((0,We.xy)())},Je=[],Ge=i,Xe=Ge.broker("plugin-manager"),await at(t,n),Xe.emit("plugins initialized"),Xe.register("get all plugins",(()=>t));for(const e of r)ot(t,e,n);const o=et.length?await async function(e){const t=$e(),n=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return t})),r=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return!t})).map((e=>{let[t]=e;return t})),i=(await Promise.all(n.map((async e=>{let[t,n]=e;return await nt(t,n)&&t})))).filter((e=>e));return(0,v.hZ)("plugins.enabled",[...i,...r]),i}(t):$e();for(const e of o)ot(t,e,n);Xe.emit("plugins enabled",Je),Ge.start()}({plugins:vE,messageBus:y.Ay,context:qc}),Object.assign(__webpack_require__.g.adverts,e),function(){const e=window.adverts,t=Array.isArray(e.queue)?e.queue:[];for(uE("There are",t.length,"items on the queue"),window.__dmgCmp=window.__dmgCmp||[];window.__dmgCmp.length;)hE(window.__dmgCmp.shift());for(window.__dmgCmp.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>hE(e)))};t.length;)hE(t.shift());e.queue={push(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>hE(e)))}}}()}(0,v.hZ)("tcfv2.uuid.useRtaId",!0);const bE=(0,v.Jt)("cwv.barriers.global","ads");function _E(e){return~(0,v.Jt)("plugins.enabled",[]).indexOf(e)}bE?__webpack_require__.g.DM.later(bE,yE):yE()})()})();
</script>

</body>
</html>
