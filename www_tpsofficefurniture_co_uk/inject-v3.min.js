/*!
 * v3.11.6
 * @license
 * Copyright (c) 2024 Force24 Ltd.
 */(()=>{"use strict";var t;!function(t){t.DEBUG="debug",t.TEST="test",t.LIVE="live"}(t||(t={}));const n="https://api-websites.data-crypt.com/api/v1",e={client:{url:"https://static.websites.data-crypt.com/deployments"},manifest:{url:"https://static.websites.data-crypt.com/scripts/activity/v3/manifest.json"},static:{url:"https://static.websites.data-crypt.com/scripts/activity/v3"}},i=(e.static.url,e.static.url,e.static.url,n),o="f24",s=t.LIVE,r=o;class c{get flags(){return window[r]._state.flags}set flags(t){window[r]._state.flags=t}constructor(){this.flags||(this.flags={})}isEnabled(t){return!0===this.flags[t]}enable(t){return this.flags[t]=!0,!0}disable(t){return this.flags[t]=!1,!0}}const a=(t,n)=>{for(const e of Object.keys(n))n[e]instanceof Object&&Object.assign(n[e],a(t[e],n[e]));return Object.assign(t||{},n),t},u=o;class l{get tracking(){return window[u]._state.tracking}set tracking(t){window[u]._state.tracking=t}constructor(){this.tracking||(this.tracking={})}enable(t,n,e){const i=this.tracking[t]||[];return 0===i.filter((t=>JSON.stringify(t.id)===JSON.stringify(n))).length&&i.push(Object.assign(Object.assign({},e),{id:n})),this.tracking[t]=i,!0}disable(t,n){const e=this.tracking[t];return e.length&&(this.tracking[t]=e.filter((t=>JSON.stringify(t.id)!==JSON.stringify(n)))),!0}getAll(t){return this.tracking[t]||[]}getOne(t,n){const e=this.getAll(t).filter((t=>JSON.stringify(t.id)===JSON.stringify(n)));if(e.length>1)throw new Error(`multiple configurations found for ${t} - ${n}`);return 1===e.length?e[0]:null}updateConfig(t,n,e,i){return e?this.updateConfigByKey(t,n,e,i):this.updateConfigWithObject(t,n,i)}updateConfigByKey(t,n,e,i){const o=(t,n,e={})=>{const[i,...s]=t.split(".");return e[i]=s.length?o(s.join("."),n):n,e},s=o(e,i);for(const e in this.tracking[t])if(this.tracking[t][e].id===n)return this.tracking[t][e]=a(this.tracking[t][e],s),!0;return!1}updateConfigWithObject(t,n,e){for(const i in this.tracking[t]){const o=this.tracking[t][i],s=o.id===n,r="object"==typeof o.id&&o.id.id===n;if(s)return this.tracking[t][i]=a(this.tracking[t][i],e),!0;if(r)return this.tracking[t][i]=a(this.tracking[t][i],{id:e}),!0}return!1}}class h{constructor(){this.trackingId=null,this.clientId=null,this.isRuntimeLoaded=!1,this.mode=s||t.LIVE,this.formPrevPayload=null}}const g=o;class f{get pages(){return window[g]._state.pages}set pages(t){window[g]._state.pages=t}constructor(){this.pages||(this.pages={})}getById(t){return this.pages[t]}addPage(t){const n=this.pages;this.pages=Object.assign(Object.assign({},n),{[t.id]:t})}isActivePage(t){return new RegExp(t.pattern).test(window.location.href)}}const d="f24_popups";class m{constructor(){this.storageInstance=window.localStorage}get popups(){return JSON.parse(this.storageInstance.getItem(d))||{}}appendPopup(t){const n=JSON.stringify(Object.assign(Object.assign({},this.popups),t));this.storageInstance.setItem(d,n)}}const p=o;class w{get monitors(){return window[p]._state.monitors}set monitors(t){window[p]._state.monitors=t}constructor(){this.monitors||(this.monitors={})}getOne(t){return this.monitors[t]}isActive(t){return!!this.monitors[t]&&!!this.monitors[t].length}push(t,n){this.monitors[t]||(this.monitors[t]=[]),-1===this.monitors[t].indexOf(n)&&this.monitors[t].push(n)}pop(t,n){const e=this.monitors[t].indexOf(n);-1!==e&&this.monitors[t].splice(e,1),this.monitors[t].length||delete this.monitors[t]}clear(t){delete this.monitors[t]}}const v=o;class y{get trackingId(){return this.getState().trackingId}constructor(){const t=new h;window[v]._state=Object.assign(Object.assign({},t),window[v]._state),this.flags=new c,this.tracking=new l,this.monitors=new w,this.pages=new f,this.storage=new m}getGlobal(){return window[v]}getLoad(){return{loadTime:this.getGlobal().l}}getState(){return this.getGlobal()._state}set(t,n){window[v]._state[t]=n}setRuntime(t){window[v]._state.isRuntimeLoaded=t}}var _;!function(t){t.onDelay="onDelay",t.onElementClick="onElementClick",t.onElementVisibility="onElementVisibility"}(_||(_={}));var b=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};class S{constructor(){this.queue=[]}get(){return b(this,void 0,void 0,(function*(){return this.queue}))}post(...t){return b(this,void 0,void 0,(function*(){this.queue.push(t),console.log("done")}))}toString(){return"debug console"}}class k extends S{toString(){return"test instance"}}class O{constructor(t){this.url=t.url}}var P=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};class ${constructor(t){this.conn=new O({url:t.connection.url})}get(t){return P(this,void 0,void 0,(function*(){const{path:n="",headers:e={},queryParams:i={},timeout:o=null}=t||{},s=`${this.conn.url}${n}`,r=function(t){return Object.entries(t).map((([t,n])=>n instanceof Array?function(t,n){return n.filter((t=>null!=t)).map((n=>`${t}=${n}`)).join("&")}(t,n):n?`${t}=${n}`:"")).filter((t=>""!==t)).join("&")}(i),c=s.includes("?")?"&":"?",a=`${s}${r?c:""}${r}`,u=new AbortController,l=o?setTimeout((()=>u.abort()),o):null;return fetch(a,{method:"GET",headers:Object.assign({},e),signal:u.signal}).then((t=>{if(clearTimeout(l),!t.ok)throw new Error(`Request failed with status: ${t.status}`);return t.json()}))}))}post(t){return P(this,void 0,void 0,(function*(){const{path:n="",headers:e={},data:i={},timeout:o=null}=t||{},s=`${this.conn.url}${n}`,r=new AbortController,c=o?setTimeout((()=>r.abort()),o):null;return fetch(s,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},e),body:JSON.stringify(i),signal:r.signal}).then((t=>{if(clearTimeout(c),!t.ok)throw new Error(`Request failed with status: ${t.status}`);return t.json()}))}))}toString(){return`${this.conn.url}`}}const F=o;class j{constructor(t){this._stateService=new y,this._delimiter="---",this.source=(null==t?void 0:t.source)||""}getTimestampSignature(){const t=new Date(window[F].l),n=(new Date).getTime()-t.getTime();return`${n} (${function(t){const n=t/1e3,e=n/60,i=e/60,o=["d","h","min","s","ms"];return[i/24,i,e,n,t].reduce(((t,n,e)=>(""===t&&n>1&&(t=`${n.toFixed(2)}${o[e]}`),t)),"")}(n)})`}formatMember(t){return t&&""!==t.trim()?`${this.getTimestampSignature()} ${this._delimiter} ${t} ${this._delimiter} `:""}log(n,...e){const{mode:i}=this._stateService.getState(),o=this.formatMember(this.source);i===t.DEBUG&&console.log(`${o}${n}`,...e)}warn(t,...n){console.warn(`Force24 Tracking Script: ${t}${[".","!"].find((n=>t.endsWith(n)))?"":"."} If this error persists, please contact support.`,...n)}}var A=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};class E{constructor(n){this._stateService=new y,this._logger=new j({source:"api"}),this._lockConnection={[t.DEBUG]:!0,[t.TEST]:!0},this._config=n,this._connection={live:new $(this._config)}}get mode(){const n=Object.values(t).map((t=>this._lockConnection[t])).reduce(((t,n)=>t&&n),!0);if(n)throw new Error("All connections are locked. Cannot determine api mode.");const e=[t.DEBUG,t.TEST,t.LIVE];let{mode:i}=this._stateService.getState();for(;this._lockConnection[i];){const t=i!==e[0],n=!t&&this._lockConnection[i];if(t||n){const t=e.shift();e.push(t)}[i]=e}return i}get conn(){return this._connection[this.mode]||(this.mode===t.DEBUG?this._connection[this.mode]=new S:this.mode===t.TEST&&(this._connection[this.mode]=new k)),this._connection[this.mode]}get(){return A(this,arguments,void 0,(function*(t={}){const{path:n="",headers:e={},queryParams:i={},timeout:o=null}=t;return this._logger.log(`fetching data from ${this.conn.toString()}`,t),this.conn.get({path:n,headers:e,queryParams:i,timeout:o})}))}post(){return A(this,arguments,void 0,(function*(t={}){const{path:n="",headers:e={},data:i={}}=t;return this._logger.log(`sending data to ${this.conn.toString()}`,t),this.conn.post({path:n,headers:e,data:i})}))}}var C=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};const I=(t,...n)=>C(void 0,[t,...n],void 0,(function*(t,n=0){const e=t();if(n>20)throw new EvalError("could not resolve validator");return e||new Promise((e=>{setTimeout((()=>{e(I(t,n+1))}),500)}))}));var x,T,N,J,L,V;!function(t){t.ThirdParty="ThirdParty",t.Popup="Popup"}(x||(x={})),function(t){t.FormSubmit="fc_form_submit",t.FormSend="fc_form_send"}(T||(T={})),function(t){t.Click="click",t.Submit="submit"}(N||(N={})),function(t){t.FormCaptureLoad="tsfcload",t.FormCaptureSubmit="tsfcsubmit",t.FormCaptureAfterSubmit="tsfcaftersubmit",t.SubmitSuccess="f24-submit-success",t.SubmitFail="f24-submit-fail"}(J||(J={})),function(t){t.NinjaForms="nfFormSubmitResponse",t.ContactForm7="wpcf7mailsent",t.WPForms="wpFormSubmit",t.FormidableForms="frmFormComplete",t.GravityForms="gravityFormSubmit",t.CalderaForms="cf.form.submit",t.Forminator="forminator:form:submit:success",t.Elementor="elementorProFrontend.onFormSubmit"}(L||(L={})),function(t){t.TrackForm="fc_track_form",t.SkipHiddenInputs="fc_skip_hidden_inputs"}(V||(V={}));new class{constructor(){this.version="latest",this.forms=[],this.contactId=!0,this.autoId=!0}};var q,D,M;!function(t){t.Embed="Embedded"}(q||(q={})),function(t){t.TrackForm="fe_trackform"}(D||(D={})),function(t){t.ArmForm="fe_form_arm",t.SwapForm="fe_form_swap",t.ShowFormError="fe_show_form_error",t.FormSuccessMessage="fe_form_success_message",t.FormSuccessRedirect="fe_form_success_redirect",t.FormSuccessMessageHide="fe_form_success_message_hide"}(M||(M={}));var R=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};const U=t=>t.Type===q.Embed;function G(t){return R(this,void 0,void 0,(function*(){const{Version:n,Forms:e}=t;return{Version:n,Forms:e.filter((t=>(t=>!t.Type)(t)||(t=>t.Type===x.ThirdParty)(t)||(t=>t.Type===x.Popup)(t)||U(t)))}}))}var B;!function(t){t.Event="event",t.Config="config"}(B||(B={}));var H=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};const K=o;class W{constructor(){this._logger=new j({source:"runtime"}),this._stateService=new y;if(!!!window[K]._runtime){this._logger.log("generating runtime"),this._actions=[],this._hooks=[],this._emitters=[];const t=[...Object.keys(window[K])].reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:window[K][n]})),{});window[K]=(t,n,...e)=>{this._logger.log(`${t} -- ${n}`,e);this.findAction({type:t,name:n,payload:e}).fn(...e)};for(const n in t)window[K][n]=t[n];window[K]._runtime=this}this._actions=window[K]._runtime._actions,this._hooks=window[K]._runtime._hooks,this._emitters=window[K]._runtime._emitters}findAction(t){const n=this._actions.filter((n=>n.type===t.type&&n.name===t.name));if(0===n.length)throw new Error(`action ${t.type} ${t.name} does not exists`);if(n.length>1)throw new Error(`multiple matching events founds for ${t.type} ${t.name}`);return n[0]}registerAction(t){return H(this,void 0,void 0,(function*(){return this._logger.log("registering action",t),this._actions.push(t),!0}))}registerHook(t){return H(this,void 0,void 0,(function*(){this._logger.log("registering hook",t);const n=!!this._hooks.filter((n=>JSON.stringify(t)===JSON.stringify(n))).length,e=t.target||window;return n||(e.addEventListener(t.event,t.action.fn),this._hooks.push(t)),!0}))}removeHook(t){return H(this,void 0,void 0,(function*(){this._logger.log("removing hook",t);if(!!this._hooks.filter((n=>JSON.stringify(t)===JSON.stringify(n))).length){window.removeEventListener(t.event,t.action.fn);const n=this._hooks.findIndex((n=>JSON.stringify(t)===JSON.stringify(n)));this._hooks.splice(n,1)}return!0}))}registerEmitter(t){return H(this,void 0,void 0,(function*(){this._logger.log("registering emitter",t);return!!this._emitters.filter((n=>JSON.stringify(t)===JSON.stringify(n))).length||(t.start(),this._emitters.push(t)),!0}))}removeEmitter(t){return H(this,void 0,void 0,(function*(){this._logger.log("remove emitter",t);if(!!this._emitters.filter((n=>JSON.stringify(t)===JSON.stringify(n))).length){t.stop();const n=this._emitters.findIndex((n=>JSON.stringify(t)===JSON.stringify(n)));this._emitters.splice(n,1)}return!0}))}}var z=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};class X{constructor(){this._logger=new j({source:"runtime loader"}),this._runtimeService=new W}loadActions(t){return z(this,void 0,void 0,(function*(){this._logger.log("loading actions");for(const n of t)this._runtimeService.registerAction(n);this._logger.log(`loaded ${t.length} actions`)}))}loadHooks(t){return z(this,void 0,void 0,(function*(){this._logger.log("loading hooks");for(const n of t)this._runtimeService.registerHook(n);this._logger.log(`loaded ${t.length} hooks`)}))}loadEmitters(t){return z(this,void 0,void 0,(function*(){this._logger.log("loading emitter");for(const n of t)this._runtimeService.registerEmitter(n);this._logger.log(`loaded ${t.length} emitters`)}))}loadRuntime(t){return z(this,void 0,void 0,(function*(){const n=this.loadActions(t.actions),e=this.loadHooks(t.hooks),i=this.loadEmitters(t.emitters);return[yield n,yield e,yield i]}))}}var Q=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};const Y=o;class Z{constructor(){this._logger=new j({source:"pending actions loader"}),this._stateService=new y}getAllPendingActions(){return Q(this,void 0,void 0,(function*(){return this._stateService.getGlobal().q||[]}))}getPendingActions(t){return Q(this,void 0,void 0,(function*(){return(yield this.getAllPendingActions()).map((t=>{const[n,e,i]=t;return{type:n,name:e,payload:i}})).filter((n=>t(n)))}))}prunePendingActions(t){return Q(this,void 0,void 0,(function*(){const n=yield this.getAllPendingActions(),e=[];for(const i of n){const[n,o]=i,s=!t.filter((t=>t.type===n&&t.name===o)).length;s&&e.push(i)}window[Y].q=e}))}cleanActions(t){return Q(this,void 0,void 0,(function*(){yield this.prunePendingActions(t)}))}runActions(t){return Q(this,void 0,void 0,(function*(){for(const n of t)this._logger.log("processing pending action",n),window[Y](n.type,n.name,n.payload);yield this.cleanActions(t)}))}processActions(t){return Q(this,void 0,void 0,(function*(){const n=yield this.getPendingActions((n=>t(n)));yield this.runActions(n)}))}}var tt;!function(t){t.TrackingId="set_tracking_id",t.ClientId="set_client_id",t.Mode="set_mode"}(tt||(tt={}));const nt=new j({source:tt.TrackingId}),et=new y;const it={type:B.Config,name:tt.TrackingId,fn:function(t){return nt.log("triggered config action",t),et.set("trackingId",t),!0}},ot=new j({source:tt.ClientId}),st=new y;const rt={type:B.Config,name:tt.ClientId,fn:function(t){return ot.log("triggered config action",t),st.set("clientId",t),!0}},ct=new j({source:tt.Mode}),at=new y;const ut={type:B.Config,name:tt.Mode,fn:function(t){return ct.log("triggered config action",t),at.set("mode",t),!0}},lt=ut;var ht,gt=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};class ft{constructor(){this._logger=new j({source:"config"}),this._runtimeLoader=new X,this._pendingActionsLoader=new Z,this._logger.log("initializing config module...")}bootstrap(){return gt(this,void 0,void 0,(function*(){const t=[lt,it,rt];yield this._runtimeLoader.loadRuntime({actions:t,hooks:[],emitters:[]});yield this._pendingActionsLoader.processActions((t=>t.type===B.Config&&-1!==Object.values(tt).indexOf(t.name)))}))}static init(){return gt(this,void 0,void 0,(function*(){const t=new ft;yield t.bootstrap()}))}}!function(t){t.AddPage="add_page"}(ht||(ht={}));const dt=new j({source:ht.AddPage}),mt=new y;const pt={type:B.Config,name:ht.AddPage,fn:function(t){dt.log("triggered config action",t),mt.pages.addPage(t)}};class wt{constructor(t){this.pages=t.Pages.map((t=>({id:t.Id,pattern:t.Pattern})))}}var vt,yt=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};class _t{constructor(){this._logger=new j({source:"config"}),this._runtimeLoader=new X,this._pendingActionsLoader=new Z,this._logger.log("initializing config module...")}loadPages(t){return yt(this,void 0,void 0,(function*(){for(const n of t)pt.fn(n)}))}bootstrap(t){return yt(this,void 0,void 0,(function*(){this._logger.log("loaded module configuration",t),this.loadPages(t.pages);const n=[pt];yield this._runtimeLoader.loadRuntime({actions:n,hooks:[],emitters:[]});yield this._pendingActionsLoader.processActions((t=>t.type===B.Config&&-1!==Object.values(ht).indexOf(t.name)))}))}static init(){return yt(this,void 0,void 0,(function*(){const t=new wt(window.f24.config.PageManager),n=new _t;yield n.bootstrap(t)}))}}!function(t){t[t.UUID=0]="UUID"}(vt||(vt={}));const bt=new Map;bt.set(vt.UUID,(function(t){if(!t)return null;const n=t.match(/(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}/g);return n.length?n[0]:null}));const St=window.history;class kt{constructor(){this.url=new URL(window.location.href),this.params=this.url.searchParams}getParam(t,n){let e=null;const i=n?bt.get(n):null;return this.params.has(t)&&(e=this.params.getAll(t).length>1?this.params.getAll(t):this.params.get(t)),i?bt.get(n)(e):e}deleteParam(t){if(this.params.has(t)){this.params.delete(t);const n=this.params.toString().length?"?":"",e=`${this.url.origin}${this.url.pathname}${n}${this.params.toString()}${this.url.hash}`;St.replaceState(St.state,document.title,e)}}}var Ot=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))};const Pt=new E({connection:{url:i}}),$t=new y;class Ft{constructor(){this.verificationKey="f24VerifyInstallation",this.isVerificationMode=!1,this.queryStringService=new kt,this.isVerificationMode=!!this.queryStringService.getParam(this.verificationKey)}startVerificationProcess(){return Ot(this,void 0,void 0,(function*(){const t=this.queryStringService.getParam(this.verificationKey),{clientId:n}=$t.getState(),e={"X-Client-Id":n};return Pt.post({path:`/tracking-script/verify/${t}`,headers:e,data:{version:"V3"}}).then((()=>!0))}))}}var jt=function(t,n,e,i){return new(e||(e=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}a((i=i.apply(t,n||[])).next())}))},At=function(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(e[i[o]]=t[i[o]])}return e};class Et{constructor(t){this._api={client:null,manifest:null},this._logger=new j({source:"inject"});const n=new y,e=Date.now();this._api.client=new E({connection:{url:`${t.client.url}/${n.trackingId}/config.json?version=${e}`}}),this._api.manifest=new E({connection:{url:`${t.manifest.url}?version=${e}`}}),this._logger.log("initializing module...")}fetchConfig(){return jt(this,void 0,void 0,(function*(){this._logger.log("fetching configuration...");const t=yield this._api.client.get().then((t=>jt(this,void 0,void 0,(function*(){const{FormCapture:n}=t,e=At(t,["FormCapture"]);e.Vendor={Version:"Latest"};const i=n?yield G(n).then((t=>t.Forms?{FormCapture:t}:{})):{},o=n?yield function(t){return R(this,void 0,void 0,(function*(){const{Version:n,Forms:e}=t;return{Version:n,Forms:e.filter((t=>U(t)))}}))}(n).then((t=>t.Forms.length?{FormEmbed:t}:{})):{};return Object.assign(Object.assign(Object.assign({},e),i),o)})))),n=yield this._api.manifest.get(),e=Object.keys(t),i=[];for(const o of e){const e={config:Object.assign(Object.assign({},t[o]),{feature:o}),manifest:n[o]};i.push(e)}return i}))}appendConfig(t){return jt(this,void 0,void 0,(function*(){this._logger.log("loading configuration...",t);window[o].config=t.map((t=>t.config)).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n.feature]:n})),{})}))}loadFeatures(t){return jt(this,void 0,void 0,(function*(){this._logger.log("loading features...");for(const n of t){const{config:t,manifest:e}=n;if(t&&e){if(t.version&&-1===e.versions.indexOf(t.version))throw new Error(`${t.feature} version ${t.version} is not available.`);const n=t.version||e.latest,i=`${e.src}${t.feature.toLowerCase()}-v${n}.min.js`;this.loadFeatureScript(i)}}}))}loadFeatureScript(t){return jt(this,void 0,void 0,(function*(){this._logger.log(`injecting script ${t}`);const n=document.createElement("script"),e=document.getElementsByTagName("script")[0];n.async=!0,n.src=t,e.parentNode.insertBefore(n,e)}))}static init(){return jt(this,void 0,void 0,(function*(){const t=new Et(e),n=yield t.fetchConfig();yield t.appendConfig(n),yield t.loadFeatures(n),n.filter((t=>"PageManager"===t.config.feature)).length&&(yield _t.init())}))}}!function(){jt(this,void 0,void 0,(function*(){yield ft.init(),yield I((()=>{const t=new y,{clientId:n,trackingId:e}=t.getState();return n&&e}));const t=new Ft;t.isVerificationMode?t.startVerificationProcess():Et.init()}))}()})();