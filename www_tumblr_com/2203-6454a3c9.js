!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="15a132fc-00c6-42f6-9b5f-771c19034d2b",e._sentryDebugIdIdentifier="sentry-dbid-15a132fc-00c6-42f6-9b5f-771c19034d2b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@ce094590bd2291e3264b21d2f92bffc273e4a131"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[2203],{22065:(e,t,r)=>{r.d(t,{A:()=>s});let s={wrapper:"_LlDC",titleAndBanner:"od79S",goBackButton:"p1ueV",popoverTitle:"yoGda",popoverBanner:"NNh7e",description:"R1g_V",helpText:"Q7QBV",checkoutToggle:"lQM6O",giftOptions:"A6B_g",selfPurchaseOptions:"C1psQ",planGroup:"KapyO",planGroupOption:"lxzFl",hasPremiumPerk:"ePJgz",messageOptions:"Hq7Ow",anonymousWrapper:"fLhXP",messageWrapper:"tqFpo",anonymousLabel:"oWmv7",messageInput:"HkXGy",editorWrapper:"_DzI0",messageInfo:"bRkSL",alertWrapper:"pE8_V",checkoutSelector:"pQ4zI",checkout:"_xLkZ",nextButton:"aVRLa",loader:"oQX_Y",notFound:"hCGfE",notFoundText:"AyAYa",isFreePremiumPerk:"TUGXG"}},52642:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(36665);let a=/*#__PURE__*/(0,s.createContext)({window:{},scrollContainerRef:/*#__PURE__*/(0,s.createRef)()})},99976:(e,t,r)=>{r.d(t,{A:()=>v});var s=r(88346),a=/*#__PURE__*/r.n(s),l=r(74059),o=/*#__PURE__*/r.n(l),n=r(11100),i=r(71273),c=r(36665),d=r(20301),u=r(84208),h=r(4613),m=r(44553),p=r(87203),g=r(52642);let b={carouselWrapper:"kDCXR",arrow:"GTDnP",hidden:"wOp1Q",safariArrowFlickeringFix:"gN5No",scrollContainer:"jxu4l"};var f=r(60397);let x=1/30*1e3;class y extends c.Component{constructor(...e){super(...e),a()(this,"state",{scrollPosition:0,containerWidth:0,scrollWidth:0}),a()(this,"scrollContainerRef",/*#__PURE__*/(0,c.createRef)()),a()(this,"onScroll",(0,m.A)(()=>{let e=this.scrollContainerRef.current?Math.max(this.scrollContainerRef.current.scrollLeft,0):0;this.setState({scrollPosition:e})},x)),a()(this,"scrollChildrenDidChange",(0,m.A)(()=>{let e=this.scrollContainerRef.current?.scrollWidth;void 0!==e&&this.setState({scrollWidth:e})},250)),a()(this,"onResize",(0,m.A)(()=>{this.setState({containerWidth:this.scrollContainerRef?.current?.clientWidth,scrollWidth:this.scrollContainerRef?.current?.scrollWidth})},x)),a()(this,"updateDimensionState",()=>{this.setState({scrollWidth:this.scrollContainerRef.current?.scrollWidth||0,containerWidth:this.scrollContainerRef.current?.clientWidth})}),a()(this,"updateDimensionStateAfterFlush",(0,d.A)(this.updateDimensionState)),a()(this,"scrollLeft",()=>{this.scroll(!1)}),a()(this,"scrollRight",()=>{this.scroll(!0)}),a()(this,"scroll",e=>{let t=this.scrollContainerRef.current,{itemWidth:r,maxItemsToScroll:s,visibleWidth:a}=this.props,{containerWidth:l,scrollPosition:o}=this.state;if(!t)return;let n=Math.min(a,l),i=Math.max(Math.min(s??1/0,Math.round(n/r/2)),1)*(e?1:-1);if(this.props.onScroll){let t=Math.floor(o/r),s=Math.floor((n+o)/r);if(!1===this.props.onScroll({firstIndex:t,lastIndex:s,right:e}))return}let c=Math.abs(2*r*i);!e&&o<c?t.scrollTo({left:0,behavior:"smooth"}):t.scrollBy({left:r*i,behavior:"smooth"})}),a()(this,"onScrollContainerResize",e=>{let[{target:t}]=e;this.setState({containerWidth:t.clientWidth,scrollWidth:t.scrollWidth})})}componentDidMount(){let e=this.scrollContainerRef.current;(0,p.um)("resize",this.onResize),e&&(this.resizeObserver=new ResizeObserver(this.onScrollContainerResize),this.resizeObserver.observe(e),this.updateDimensionStateAfterFlush(),this.mutationObserver=new MutationObserver(this.scrollChildrenDidChange),this.mutationObserver.observe(e,{childList:!0,subtree:!0}))}componentWillUnmount(){(0,p.yL)("resize",this.onResize),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect(),this.scrollChildrenDidChange.cancel(),this.onScroll.cancel(),this.updateDimensionStateAfterFlush.cancel(),this.onResize.cancel()}render(){let{children:e,visibleWidth:t,className:r,scrollContainerClassName:s,arrowButtonClassName:a,itemWidth:l,maxItemsToScroll:c,role:d,appContext:{_t:h,getBrowserInfo:m}}=this.props,{scrollPosition:p,containerWidth:x,scrollWidth:y}=this.state,v=`calc((100% - ${t}px) / 2)`,w=(0,u.Ru)(m());return/*#__PURE__*/(0,f.jsx)("div",{className:o()(r,b.carouselWrapper),role:d,children:/*#__PURE__*/(0,f.jsx)("div",{className:o()(s,b.scrollContainer),onScroll:this.onScroll,ref:this.scrollContainerRef,children:/*#__PURE__*/(0,f.jsxs)(g.A.Provider,{value:{window:function(e,t,r){let s=e/r,a=Math.floor(s),l=Math.min(1.5*(1-(s-a)),1),o=(t+e)/r,n=Math.floor(o),i=Math.min(1.5*(o-n),1),c={[a]:{opacity:l},[n]:{opacity:i}};for(let e=a+1;e<n;e+=1)c[e]={opacity:1};return c}(p,this.props.visibleWidth,this.props.itemWidth),scrollContainerRef:this.scrollContainerRef},children:[/*#__PURE__*/(0,f.jsx)("div",{style:{paddingLeft:v}}),e,/*#__PURE__*/(0,f.jsx)("div",{style:{paddingRight:v}}),/*#__PURE__*/(0,f.jsx)(n.A,{className:o()(b.arrow,a,{[b.hidden]:void 0===c?p<l/2:y===x,[b.safariArrowFlickeringFix]:w}),label:h("Scroll carousel left"),onClick:this.scrollLeft,style:{left:0,paddingLeft:v},children:/*#__PURE__*/(0,f.jsx)(i._q,{size:{height:40,width:40}})}),/*#__PURE__*/(0,f.jsx)(n.A,{className:o()(b.arrow,a,{[b.hidden]:void 0===c?p+x>=y-1:y===x,[b.safariArrowFlickeringFix]:w}),label:h("Scroll carousel right"),onClick:this.scrollRight,style:{right:0,paddingRight:v},children:/*#__PURE__*/(0,f.jsx)(i.iV,{size:{height:40,width:40}})})]})})})}}let v=(0,h.Lk)(y)},71273:(e,t,r)=>{r.d(t,{OH:()=>c,_q:()=>i,dT:()=>l,iV:()=>o,oj:()=>n});var s=r(20928);let a=e=>(0,s.Kk)("caret-thin",{altIcon:"caret-thin-alt",style:{transform:`rotate(${e}deg)`,transformOrigin:"center"},size:{width:15,height:9},useAltIcon:!1}),l=(0,s.Kk)("caret-thin",{altIcon:"caret-thin-alt"}),o=a(270),n=a(0),i=a(90),c=a(180)},38407:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(20928).Kk)("lock",{altIcon:"lock-alt",size:{width:24,height:24},useAltIcon:!1})},40302:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(74059),a=/*#__PURE__*/r.n(s);let l={mutedText:"lPY88"};var o=r(60397);let n=({children:e,className:t,as:r="p",...s})=>/*#__PURE__*/(0,o.jsx)(r,{className:a()(l.mutedText,t),...s,children:e})},81647:(e,t,r)=>{r.d(t,{A:()=>d});var s=r(74059),a=/*#__PURE__*/r.n(s),l=r(39977),o=r(38407),n=r(40302);let i={dropdownWrapper:"Rb_wu",dropdown:"irkyW",iconWrapper:"y9c3c",caretIcon:"x2Gw6",lockIcon:"N9zx6",helpText:"oR8IV"};var c=r(60397);let d=({className:e,helpText:t,children:r,disabled:s,...d})=>{let u=/*#__PURE__*/(0,c.jsxs)("div",{className:a()(i.dropdownWrapper,e),children:[/*#__PURE__*/(0,c.jsx)("select",{className:a()(i.dropdown,e),disabled:s,...d,children:r}),/*#__PURE__*/(0,c.jsx)("span",{className:i.iconWrapper,children:s?/*#__PURE__*/(0,c.jsx)(o.A,{className:i.lockIcon}):/*#__PURE__*/(0,c.jsx)(l.Q5,{className:i.caretIcon,useAltIcon:!0})})]});return t?/*#__PURE__*/(0,c.jsxs)("label",{children:[u,/*#__PURE__*/(0,c.jsx)(n.A,{className:i.helpText,children:t})]}):u}},57216:(e,t,r)=>{r.d(t,{A:()=>m});var s=r(88346),a=/*#__PURE__*/r.n(s),l=r(74059),o=/*#__PURE__*/r.n(l),n=r(36665),i=r(19869),c=r(56040);let d={toggle:"Bs6U3",small:"KDgcr",switch:"xmMz6",slider:"UZrDG",checked:"U_rPn",medium:"Ld5wO",large:"gcGa_",disabled:"RHCmM"};var u=r(60397);class h extends n.PureComponent{constructor(...e){super(...e),a()(this,"state",{checked:!!this.props.checked}),a()(this,"stopEventPropagation",e=>{e&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())}),a()(this,"toggle",e=>{this.props.controlled||this.setState(({checked:e})=>({checked:!e})),this.props.onChange?.(e)})}render(){let e=this.props.controlled?this.props.checked:this.state.checked,{name:t,color:r,className:s,size:a=h.defaultProps.size,disabled:l,labelledBy:n,id:i}=this.props,c=e?{backgroundColor:r}:void 0;return/*#__PURE__*/(0,u.jsx)("div",{className:o()(d.toggle,s,d[a]),children:/*#__PURE__*/(0,u.jsxs)("label",{className:d.switch,children:[/*#__PURE__*/(0,u.jsx)("input",{"aria-checked":e,"aria-labelledby":n,checked:e,"data-testid":this.props["data-testid"],disabled:l,id:i,name:t,onChange:this.toggle,onClick:this.stopEventPropagation,type:"checkbox"}),/*#__PURE__*/(0,u.jsx)("span",{className:o()(d.slider,{[d.disabled]:l,[d.checked]:e}),style:c})]})})}}a()(h,"defaultProps",{onChange:i.A,checked:!1,disabled:!1,size:"medium",color:c.paletteBlue});let m=h},22008:(e,t,r)=>{r.d(t,{l:()=>h});var s=r(17886),a=r(96894),l=r(53986),o=r(94048),n=r(4613),i=r(56040),c=/*#__PURE__*/r.n(i);let d={container:"Jexdo",details:"CyjiS",title:"UUWy9",description:"An7Yj",buttons:"ZTpUK",banner:"p3VWn"};var u=r(60397);let h=({banner:{actions:e,descriptionParagraphs:t,imageUrls:r,title:i,colors:{title:h,background:m,description:p,buttonsBackground:g,buttonsText:b}}})=>{let{_c:f,logEvent:x}=(0,n.Us)(),y=(0,l.Zp)();return/*#__PURE__*/(0,u.jsxs)("div",{className:d.container,style:{background:(0,a.U$)(m)},children:[/*#__PURE__*/(0,u.jsxs)("div",{className:d.details,children:[/*#__PURE__*/(0,u.jsx)("p",{className:d.title,style:{...h&&{color:h}},children:i}),t.map((e,t)=>/*#__PURE__*/(0,u.jsx)("p",{className:d.description,dangerouslySetInnerHTML:{__html:e},style:{...p&&{color:p}}},`tumblrmart-banner-description-${t}`)),/*#__PURE__*/(0,u.jsx)("div",{className:d.buttons,children:e.map(({label:e,url:t})=>/*#__PURE__*/(0,u.jsx)(s.A,{backgroundColor:g??c().paletteBlack,className:d.button,isRounded:!0,label:e,onClick:()=>{x({eventName:o.R.TumblrMartBannerClick,eventDetails:{url:t}},{sendPayloadImmediately:!0}),(0,a.My)(t,y)},textColor:b??c().paletteWhite,children:e},e))})]}),/*#__PURE__*/(0,u.jsx)("div",{className:d.banner,children:(0,a.L6)(r,f("[TumblrMart] Banner image that appears in TumblrMart header banner","TumblrMart banner image"))})]})}},13134:(e,t,r)=>{r.d(t,{G:()=>j,A:()=>N});var s=r(20344),a=r(28230),l=r(13275),o=r(22008),n=r(74059),i=/*#__PURE__*/r.n(n),c=r(11100),d=r(99976),u=r(94048),h=r(4613);let m={container:"pNyDU",carousel:"pViV7",carouselContainer:"i8H3g",arrow:"fQEVQ",category:"ftglT",isSelected:"MOJMz"};var p=r(60397);let g=({categories:e,onClick:t,selected:r})=>{let{logEvent:s}=(0,h.Us)(),a=({currentTarget:e})=>{let a=e.getAttribute("data-key")||"all";if(a!==r)switch(t(a),a){case"badges":s({eventName:u.R.BadgesCategoryShown});break;case"gifts":s({eventName:u.R.GiftsCategoryShown});break;case"merch":s({eventName:u.R.MerchCategoryShown})}};return/*#__PURE__*/(0,p.jsx)("div",{className:m.container,children:/*#__PURE__*/(0,p.jsx)(d.A,{arrowButtonClassName:m.arrow,className:m.carousel,itemWidth:75,role:"list",scrollContainerClassName:m.carouselContainer,visibleWidth:j,children:e.map(({displayName:e,key:t})=>/*#__PURE__*/(0,p.jsx)(c.A,{"data-key":t,onMouseUp:a,wrapperClassName:i()(m.category,{[m.isSelected]:r===t}),children:e},t))})})};var b=r(97767),f=r(84551),x=r(36665),y=r(56281),v=r(56040),w=/*#__PURE__*/r.n(v);let k={wrapper:"CS_7d",subtitle:"DktdW",description:"tSNLM",comingSoon:"N8yyX",header:"ui_bm",details:"nijVz",icon:"zc4jf",splashImage:"Sl29y",productsWrapper:"L6Rv0",loader:"YDXT2",banner:"lVAfI",popoverWrapper:"rHQ4W",popoverTitle:"HVZtK",carouselContainer:"qGBfx",carouselProduct:"PzkO4",arrow:"EdK7W",stickyHeader:"upz9H"},j=380;function N({recipient:e,source:t,closeModal:r}){let n,{_c:i,_t:c,isLoggedIn:d}=(0,h.Us)(),{toggleToast:u}=(0,y.Y)(),[m,v]=(0,x.useState)(void 0),[j,N]=(0,x.useState)(void 0),[C,T]=(0,x.useState)(void 0),[S,A]=(0,x.useState)("gift"),[P,M]=(0,x.useState)(e?"gift":"all"),{data:R,isError:I,isPending:G,isFetching:B}=(0,f.yX)({category:P});(0,x.useEffect)(()=>{!B&&I&&u(i("[TumblrMart] Error message when modal fails to fetch storefront data","There was a problem loading TumblrMart. Check back later."),"error")},[i,I,B,u]);let W=(e,t,r,s)=>{v(t),N(e),T(r),A(s)},L=()=>{v(void 0),N(void 0),T(void 0)};if(!d||I)return null;let z={title:m?m.title:c("TumblrMart"),modalWrapperClass:"tumblrmartV2"};return n=G?/*#__PURE__*/(0,p.jsx)("div",{className:k.loader,children:/*#__PURE__*/(0,p.jsx)(a.A,{color:w().paletteBlack})}):m?/*#__PURE__*/(0,p.jsx)(b.J_,{onGoBack:L,recipient:"gift"===P?e:void 0,source:t,showTitleAndBackButton:!r,positionIndex:j,product:m,section:C,checkoutType:S,onSelectGift:()=>A("gift"),onSelectSelfPurchase:()=>A("self-purchase")}):/*#__PURE__*/(0,p.jsx)(p.Fragment,{children:/*#__PURE__*/(0,p.jsx)("div",{className:k.wrapper,children:/*#__PURE__*/(0,p.jsxs)("div",{className:k.productsV2Wrapper,children:[/*#__PURE__*/(0,p.jsxs)("div",{className:k.stickyHeader,children:[!m&&!r&&/*#__PURE__*/(0,p.jsx)("div",{className:k.popoverTitle,children:c("TumblrMart")}),R?.categories?.length&&/*#__PURE__*/(0,p.jsx)(g,{categories:R.categories,onClick:M,selected:P})]}),R?.banner&&/*#__PURE__*/(0,p.jsx)(o.l,{banner:R.banner}),R.carousel.length>0&&/*#__PURE__*/(0,p.jsx)(s.A,{arrowProps:{className:k.arrow},carouselItemClassName:k.carouselProduct,className:k.carouselContainer,customOffset:8,customTranslateX:328,hideArrowIfLast:!0,hideIndicator:!0,items:R.carousel.map((e,t)=>/*#__PURE__*/(0,p.jsx)(b.rn,{onClick:r=>{W(t,e,"carousel",r)},positionIndex:t,product:e},e.productGroup))}),/*#__PURE__*/(0,p.jsx)("div",{children:R.list.map((e,t)=>/*#__PURE__*/(0,p.jsx)(b.Lk,{onClick:r=>{W(t,e,"list",r)},positionIndex:t,product:e},e.productGroup))})]})})}),r?/*#__PURE__*/(0,p.jsx)(l.A,{onClose:r,onGoBack:m?L:void 0,...z,children:n}):/*#__PURE__*/(0,p.jsx)("div",{className:k.popoverWrapper,children:n})}},97767:(e,t,r)=>{r.d(t,{rn:()=>x,J_:()=>eW,Lk:()=>ez});var s=r(74059),a=/*#__PURE__*/r.n(s),l=r(36665),o=r(4613),n=r(96894),i=r(11100),c=r(75776),d=r(94048);let u={buttonGroup:"pbtF7",merchItem:"Zi23d",externalLink:"JROAL",link:"RVhsj",button:"DWarm",label:"cNVSQ",full:"LMuwh"};var h=r(60397);let m=({button:e,checkoutType:t,className:r,onClick:s,productGroup:l,backgroundColor:m=e?.backgroundColor,textColor:p=e?.textColor,linkColor:g=e?.backgroundColor,isCarousel:b,positionIndex:f,section:x})=>{let{_c:y,logEvent:v}=(0,o.Us)(),w=()=>{let r=!!e?.link,s={positionIndex:f,productName:l,section:x};switch(t){case"claim":v({eventName:d.R.ClaimLinkClick,eventDetails:s});break;case"gift":v({eventName:d.R.GiveGiftClick,eventDetails:s});break;case"self-purchase":r?v({eventName:d.R.BuyLinkClick,eventDetails:s},{sendPayloadImmediately:!0}):v({eventName:d.R.BuyClick,eventDetails:s})}},k={className:a()(u.button,{[u.label]:!!e.label,[u.full]:e.icon&&e.label}),label:y("[TumblrMart] Button label to view product details.","View product details"),style:{backgroundColor:m,color:p}};return/*#__PURE__*/(0,h.jsx)("div",{className:a()(u.buttonGroup,r),children:e.link?/*#__PURE__*/(0,h.jsx)(({link:t})=>{let r=()=>{w(),window.open(t,"_blank","noopener,noreferrer")},s=new URL(t);return"www.tumblr.com"===s.hostname?/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsxs)(c.A,{className:u.link,onClick:w,style:k.style,to:s.pathname,wrapperClassName:k.className,children:[e.icon&&(0,n.en)(e.icon,e.textColor),e.label]}),e.icon&&/*#__PURE__*/(0,h.jsx)(c.A,{onClick:w,style:{color:g},to:s.pathname,wrapperClassName:u.externalLink,children:s.hostname})]}):/*#__PURE__*/(0,h.jsxs)("div",{className:a()({[u.merchItem]:"www.tumblr.com"!==s.hostname&&!b}),children:[/*#__PURE__*/(0,h.jsxs)(i.A,{onClick:r,...k,children:[e.icon&&(0,n.en)(e.icon,e.textColor),e.label]}),e.icon&&/*#__PURE__*/(0,h.jsx)(i.A,{className:u.externalLink,onClick:r,style:{color:g},children:s.hostname})]})},{link:e.link}):/*#__PURE__*/(0,h.jsxs)(i.A,{onClick:e=>{e.stopPropagation(),w(),s()},...k,children:[e.icon&&(0,n.en)(e.icon,e.textColor),e.label]})},t)},p={ellipsis:"Geidh"},g=(e,t,r)=>!(e<=t)&&!(e>=t+r),b=({backgroundColor:e,isVisible:t,textColor:r})=>{let{_t:s}=(0,o.Us)();return t?/*#__PURE__*/(0,h.jsx)("span",{className:p.ellipsis,style:{background:e,color:`${r}80`},children:s("…")}):null},f={wrapper:"iPerH",banner:"Azatb",headerIcon:"Lpdju",merchHeaderIcon:"TQATb",details:"HkgGP",descriptionContainer:"l_eMn",title:"ImqT_",description:"Hq828",descriptionText:"uhTvP",buttonsContainer:"tvumD",button:"f6phD"},x=({onClick:e,positionIndex:t,product:r,wrapperClassName:s=""})=>{let{_c:i}=(0,o.Us)(),[c,d]=(0,l.useState)(0),[u,p]=(0,l.useState)(0),[x,y]=(0,l.useState)(0),v=(0,l.useCallback)(e=>{e&&d(e.getBoundingClientRect().height)},[]),w=(0,l.useCallback)(e=>{e&&p(e.getBoundingClientRect().height)},[]),k=(0,l.useCallback)(e=>{e&&y(e.getBoundingClientRect().height)},[]),{backgroundColors:j,banner:N,borderColor:C,claim:T,gift:S,isMerchStore:A,selfPurchase:P,subtitle:M,subtitleColor:R,title:I,titleColor:G,productGroup:B}=r,W=(0,n.U$)(j),L=N&&{background:N.backgroundColors?(0,n.U$)(N.backgroundColors,"135deg"):N.backgroundColor,color:N.textColor},z=(r,s)=>s?/*#__PURE__*/(0,h.jsx)(m,{button:s,checkoutType:r,className:f.button,isCarousel:!0,onClick:()=>e(r),positionIndex:t,productGroup:B,section:"carousel"}):null,_=(0,n.L6)(r.imageUrls?.card,i("[TumblrMart] Banner image for TumblrMart product cards","TumblrMart product card banner")),D={...W&&{background:W},...C&&{borderColor:C},...C&&{boxShadow:`2px 2px 0 ${C}`},...G&&{color:G}};return/*#__PURE__*/(0,h.jsxs)("div",{className:a()(f.wrapper,{[f[s]]:!!s}),"data-testid":"productWrapper",style:D,children:[N&&/*#__PURE__*/(0,h.jsx)("div",{className:f.banner,style:L,children:/*#__PURE__*/(0,h.jsx)("p",{children:N.label})}),/*#__PURE__*/(0,h.jsx)("div",{className:a()(f.headerIcon,{[f.merchHeaderIcon]:A||"rainbow-checkmark"===B}),children:_}),/*#__PURE__*/(0,h.jsxs)("div",{className:f.details,children:[/*#__PURE__*/(0,h.jsxs)("div",{className:f.descriptionContainer,ref:v,children:[/*#__PURE__*/(0,h.jsx)("h2",{className:f.title,ref:w,children:I}),/*#__PURE__*/(0,h.jsxs)("div",{className:f.description,children:[/*#__PURE__*/(0,h.jsx)("p",{className:f.descriptionText,dangerouslySetInnerHTML:{__html:(0,n.Hn)(M)},ref:k,style:{color:R}}),/*#__PURE__*/(0,h.jsx)(b,{backgroundColor:(0,n.sG)(j),isVisible:g(c,u,x),textColor:R})]})]}),/*#__PURE__*/(0,h.jsxs)("div",{className:f.buttonsContainer,children:[z("self-purchase",P?.button),z("gift",S?.button),z("claim",T?.button)]})]})]})};var y=r(99904),v=r(27699),w=r(95622),k=r(33845),j=r(28230),N=r(32063),C=r(57216),T=r(85191),S=r(12044),A=r(79708),P=r(8254),M=r(75170),R=r(97036),I=r(90789),G=r(56281),B=r(373);let W=(0,I.h)(B.z.object({message:B.z.string(),success:B.z.boolean(),uuid:B.z.string()})),L=e=>{let{_c:t,apiFetchWithSchema:r}=(0,o.Us)(),{toggleToast:s}=(0,G.Y)(),a=(0,P.jE)(),l=()=>{s(t("[TumblrMart] error message when claiming a free tumblrmart badge fails","Oops. There was a problem claiming your badge. Please reload the page and try again."),"error")};return(0,M.n)({mutationFn:e=>r("/v2/tumblrmart/claim",W,{method:"GET",queryParams:{product:e}}),onError:()=>{l()},onSuccess:({response:{message:t,success:r}})=>{r?(s(t,"success"),a.invalidateQueries({queryKey:(0,R.U)(e)})):l()}})},z=()=>{let{_c:e,apiFetchWithSchema:t}=(0,o.Us)(),{toggleToast:r}=(0,G.Y)(),s=()=>{r(e("[TumblrMart] error message when redeeming a free premium perk fails","Oops. There was a problem redeeming your perk. Please reload the page and try again."),"error")};return(0,M.n)({mutationFn:e=>t("/v2/tumblrmart/claim",W,{method:"GET",queryParams:e}),onError:()=>{s()},onSuccess:({response:{message:e,success:t}})=>{t?r(e,"success"):s()}})};var _=r(28304),D=r(53986),U=r(55321),F=r(43776),E=r(90381),O=r(30344),H=r(57020),$=r(6865),q=r(75182),Y=r(39932),V=r(84007),Q=r(56040),X=/*#__PURE__*/r.n(Q),K=r(20344),J=r(61703),Z=r(99805);let ee={carouselWrapper:"AhqY9",carousel:"LOXaO",carouselItemWrapper:"zu5HE",carouselItem:"CocLJ",focused:"mN0AI",arrow:"zTilY"},et=({imageUrls:e,backgroundColors:t=[]})=>{let{_c:r}=(0,o.Us)();return e.banners?.length&&e.banners?.length>0?/*#__PURE__*/(0,h.jsx)("div",{className:ee.carouselWrapper,style:{background:`linear-gradient(${t.join(",")})`},children:/*#__PURE__*/(0,h.jsx)(K.A,{alwaysShowArrow:!0,arrowProps:{className:ee.arrow},carouselItemClassName:ee.carouselItemWrapper,className:ee.carousel,customTranslateX:Z.tumblrmartProductSlideShowImageSize/Z.tumblrmartProductSlideShowImageScale,focusedClassName:ee.focused,hideArrowIfLast:!0,hideIndicator:!0,items:e.banners.map((e,t)=>/*#__PURE__*/(0,h.jsx)("img",{alt:"",className:ee.carouselItem,src:e},`banner-${t}`)),transitionTimingFunction:J.tumblrmartCubicBezier})}):(0,n.L6)(e.banner,r("[TumblrMart] Banner image for TumblrMart product details view","TumblrMart product details banner"),ee.bannerImage)};var er=r(17886);let es={buttonWrapper:"e8eYA",button:"maPX5"},ea=({backgroundColor:e,children:t,className:r,disabled:s,label:l,onClick:o,textColor:n,theme:i})=>{let c=s?{disabled:s,disabledTheme:"default",disabledBackgroundColor:X().paletteGray13,disabledTextColor:X().paletteGray40}:{},d=t||l;return/*#__PURE__*/(0,h.jsx)(er.A,{backgroundColor:e,className:es.button,label:l,onClick:e=>{e.stopPropagation(),o()},size:"small",textColor:n,theme:i,wrapperClassName:a()(es.buttonWrapper,r),...c,children:d})};var el=r(90657),eo=r(69010),en=r(7463),ei=r(86619),ec=r(89972),ed=r(49315);let eu=()=>{let{apiFetch:e}=(0,o.Us)(),t=_.Py().data?.user?.name;return(0,ed.I)({queryKey:["followed-blogs",t],queryFn:async()=>{if(!t)return[];let{response:{blogs:r}}=await e(`/v2/blog/${encodeURIComponent(t)}/following`,{method:"GET",queryParams:(0,H.d4)()});return r.map(({resources:e})=>e[0])},enabled:!!t,refetchOnWindowFocus:!1})};var eh=r(32880);let em={noResults:"y117a",recentlyFollowed:"W93Gy",searchResults:"gskJD",blogButton:"We8vc",avatar:"I9alQ",blogDetails:"Y7vgH",blogName:"wC4tr",blogTitle:"Q8BSY",searchLoader:"AmmYY"},ep=(e,t)=>{let{apiFetch:r}=(0,o.Us)();return(0,ed.I)({queryKey:["tumblrmart-gift-to",e,t],enabled:!!e,queryFn:async()=>(await (0,H.gb)(r,e,t?"ad-free":"crabs").fetch()).response.blogs})},eg=e=>["gift-ad-free-monthly","gift-ad-free-yearly"].includes(e),eb=({type:e,query:t,onSelect:r})=>{let s=eg(e),{data:a,status:l}=ep(t,s);if(!t)return/*#__PURE__*/(0,h.jsx)(ef,{filterByShouldShowGift:s,onSelect:r});switch(l){case"pending":return/*#__PURE__*/(0,h.jsx)(ew,{});case"success":return a&&a.length>0?/*#__PURE__*/(0,h.jsx)(ex,{blogs:a,onSelect:r}):/*#__PURE__*/(0,h.jsx)(ev,{});case"error":return/*#__PURE__*/(0,h.jsx)(ef,{filterByShouldShowGift:s,onSelect:r});default:(0,eh.M)(l);return}},ef=({filterByShouldShowGift:e,onSelect:t})=>{let{_t:r}=(0,o.Us)(),{data:s,status:a}=eu(),l=s?.filter(({shouldShowGift:t,shouldShowTumblrmartGift:r})=>!!r&&(!e||!!t));switch(a){case"pending":return/*#__PURE__*/(0,h.jsx)(ew,{});case"success":return l&&l.length>0?/*#__PURE__*/(0,h.jsx)(ex,{blogs:l,onSelect:t,title:/*#__PURE__*/(0,h.jsx)("span",{className:em.recentlyFollowed,children:r("Recently followed")})}):/*#__PURE__*/(0,h.jsx)(ev,{});case"error":return/*#__PURE__*/(0,h.jsx)(ev,{});default:(0,eh.M)(a);return}},ex=({blogs:e,onSelect:t,title:r})=>/*#__PURE__*/(0,h.jsxs)("div",{className:em.Results,children:[r,e.map((e,r)=>/*#__PURE__*/(0,h.jsx)(ey,{blog:e,onSelect:t},r))]}),ey=({blog:e,onSelect:t})=>{let{avatar:r,name:s,title:a}=e;return/*#__PURE__*/(0,h.jsxs)("button",{className:em.blogButton,onClick:r=>{r.stopPropagation(),t(e)},children:[/*#__PURE__*/(0,h.jsx)(v.A,{avatarShape:F.b.Circle,className:em.avatar,dimension:36,imageResponse:r}),/*#__PURE__*/(0,h.jsxs)("div",{className:em.blogDetails,children:[/*#__PURE__*/(0,h.jsx)("span",{className:em.blogName,children:s}),/*#__PURE__*/(0,h.jsx)("span",{children:a})]})]})},ev=()=>{let{_c:e}=(0,o.Us)(),[t]=(0,l.useState)(()=>(0,V.X)((0,$.zH)(e)));return/*#__PURE__*/(0,h.jsx)("p",{className:em.noResults,children:t})},ew=()=>/*#__PURE__*/(0,h.jsx)("div",{className:em.searchLoader,children:/*#__PURE__*/(0,h.jsx)(j.A,{centerOrientation:"horizontal",color:X().paletteGray65,small:!0})}),ek={searchBar:"ahrGn",blueCheckmarkSearch:"sjfTL",blueCheckmarkSelect:"wJdtD",pillContainer:"nxT5a",pill:"IZ4sJ",pillClose:"BlXGE",searchBarV2:"wRDEp",focus:"iqkoI",selection:"Ad0vb",label:"obf1j",searchPopoverContainer:"YDrZI",searchPopover:"uFDix"},ej=({onDismiss:e,onSelect:t,type:r})=>{let{_c:s}=(0,o.Us)(),[n,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(!1),[m,p]=(0,l.useState)(!1),[g,b]=(0,l.useState)(""),f=()=>{e(),c(null),b("")},x={[ec.$x.Bottom]:{top:6,left:-14}},y=(0,l.useCallback)(e=>{t(e),c(e),b(e.name),p(!1)},[t]),w=(0,l.useMemo)(()=>/*#__PURE__*/(0,h.jsx)("div",{className:ek.searchPopover,children:/*#__PURE__*/(0,h.jsx)(eb,{onSelect:y,query:g,type:r})}),[y,g,r]);return/*#__PURE__*/(0,h.jsx)("div",{className:a()({[ek.searchBarV2]:!0,[ek.selection]:!!n,[ek.focus]:d}),children:/*#__PURE__*/(0,h.jsx)(ei.Ay,{closeForAllExternalClicks:!0,component:w,isFlipEnabled:!1,isOpen:!n&&m,popoverWrapperClassName:ek.searchPopoverContainer,position:ec.$x.BottomStart,positionBasedOffsetModifiers:x,toggle:()=>p(d||!m),usePortals:!0,children:n?/*#__PURE__*/(0,h.jsx)(i.A,{className:ek.pillContainer,label:s("[TumblrMart] Checkout modal search selected blog pill label","Blog to gift"),tabIndex:-1,children:/*#__PURE__*/(0,h.jsxs)(en.A,{className:ek.pill,children:[/*#__PURE__*/(0,h.jsx)(v.A,{avatarShape:F.b.Circle,className:ek.avatar,dimension:24,imageResponse:n.avatar}),/*#__PURE__*/(0,h.jsx)("p",{children:n.name}),/*#__PURE__*/(0,h.jsx)("span",{"aria-label":s("[TumblrMart] Checkout modal search dismiss selected blog pill label","Dismiss blog selection"),className:ek.pillClose,onKeyPress:({key:e})=>{e===el.qW.Enter&&f()},onMouseUp:f,role:"button",tabIndex:0,children:/*#__PURE__*/(0,h.jsx)(eo.A,{size:{height:8,width:8}})})]})}):/*#__PURE__*/(0,h.jsx)("input",{"aria-label":s("[TumblrMart] Checkout modal search input field label","Search for a blog to gift"),onBlur:()=>u(!1),onChange:e=>b(e.target.value),onFocus:()=>{u(!0),p(!0)},placeholder:s("[TumblrMart] Checkout modal search label","Gift to"),value:g})})})};var eN=r(81647);let eC={selectorBar:"VxotM",active:"eWWnq",selector:"XoAUP"},eT=({blogs:e,className:t,onSelect:r,initialBlog:s})=>{let[o,n]=(0,l.useState)(s),i=(e,t)=>/*#__PURE__*/(0,h.jsx)("option",{className:eC.blogButton,value:e,children:e},t);return/*#__PURE__*/(0,h.jsx)("div",{className:a()(eC.selectorBar,t,{[eC.active]:!!o}),children:/*#__PURE__*/(0,h.jsx)(eN.A,{className:eC.selector,defaultValue:s,onChange:({target:{value:e}})=>{r(e),n(e)},children:e.map((e,t)=>i(e,t))})})};var eS=r(22065);let eA={toggle:"L1Wd4",toggleItem:"x1nHN",active:"yAOQn",left:"L66VV",right:"jJuW4"},eP=({checkoutType:e,className:t,onSelectGift:r,onSelectSelfPurchase:s})=>{let{_c:l}=(0,o.Us)(),n=l("[TumblrMart] label for a toggle to determine if product is a gift","Gift"),c=l("[TumblrMart] label for a toggle to determine if product is to purchase for self","Buy");return/*#__PURE__*/(0,h.jsxs)("div",{className:a()(eA.toggle,t),children:[/*#__PURE__*/(0,h.jsx)("div",{className:a()(eA.toggleItem,eA.left,{[eA.active]:"self-purchase"===e}),children:/*#__PURE__*/(0,h.jsx)(i.A,{label:c,onClick:e=>{e.stopPropagation(),s()},children:c})}),/*#__PURE__*/(0,h.jsx)("div",{className:a()(eA.toggleItem,eA.right,{[eA.active]:"gift"===e}),children:/*#__PURE__*/(0,h.jsx)(i.A,{label:n,onClick:e=>{e.stopPropagation(),r()},children:n})})]})};var eM=r(79184),eR=r(95683);let eI={priceGroup:"zzJxQ",isFreePremiumPerk:"yMQx2",label:"OyQ4W",price:"HmNj5"},eG=({label:e,priceCents:t,isFreePremiumPerk:r=!1})=>{let{_getPriceInCurrency:s}=(0,o.Us)(),l=r?/*#__PURE__*/(0,h.jsxs)("span",{className:eI.labelWithPrice,children:[/*#__PURE__*/(0,h.jsx)("span",{className:eI.price,children:(0,eR.$g)(t,"USD",s)}),/*#__PURE__*/(0,h.jsx)("span",{className:eI.label,children:e})]}):/*#__PURE__*/(0,h.jsxs)("span",{className:eI.labelWithPrice,children:[/*#__PURE__*/(0,h.jsxs)("span",{children:[/*#__PURE__*/(0,h.jsx)("strong",{children:e}),!!e&&" - "]}),/*#__PURE__*/(0,h.jsx)("span",{className:eI.price,children:(0,eR.$g)(t,"USD",s)})]});return/*#__PURE__*/(0,h.jsxs)("div",{className:a()(eI.priceGroup,{[eI.isFreePremiumPerk]:r}),children:[l,r&&/*#__PURE__*/(0,h.jsx)(eM.A,{width:18})]})},eB="free-premium-perk",eW=({onGoBack:e,recipient:t,source:r,positionIndex:s,product:i,section:c,checkoutType:u,onSelectGift:m,onSelectSelfPurchase:p,showTitleAndBackButton:g,initialSelfPurchaseBlogName:b})=>{let{_c:f,_t:x,apiFetch:P,isLoggedIn:M,logEvent:R,features:{enableTumblrPremium:I}}=(0,o.Us)(),{toggleToast:B}=(0,G.Y)(),{data:W}=(0,_.Py)(),{pathname:Q}=(0,D.zy)(),K=(0,D.Zp)(),{blogName:J,subSection:Z}=(0,D.g)(),[ee,er]=(0,U.ok)(),{mutate:es}=L(J??""),{mutate:el}=z(),[eo,en]=(0,l.useState)(!1),[ei,ec]=(0,l.useState)(!1),[ed,eu]=(0,l.useState)(""),[eh,em]=(0,l.useState)(!1),[ep,eg]=(0,l.useState)(b||""),[eb,ef]=(0,l.useState)(0);if((0,l.useEffect)(()=>{t&&(em(!!t.ask),eg(t.name)),"self-purchase"===u&&b&&eg(b),"self-purchase"===u&&!b&&i.selfPurchase?.validRecipients?.length&&eg(i.selfPurchase?.validRecipients[0])},[u,i?.selfPurchase?.validRecipients,t,b]),(0,l.useEffect)(()=>{if(ee.has("period")&&"landing-page"===ee.get("source")&&"self-purchase"===u){let e=ee.get("period"),t=i?.selfPurchase?.products?.findIndex(t=>t.period===e);void 0!==t&&t>-1&&(ef(t),R({eventName:d.R.TumblrMartLandingPageRedirect,eventDetails:{product:i.productGroup,period:e}})),ee.delete("period"),ee.delete("source"),er(ee,{replace:!0})}},[u,R,i,ee,er]),!M)return null;let ex=i["self-purchase"===u?"selfPurchase":u],ey=ex?.description,{link:ev,text:ew}=ex?.helpText||{link:null,text:null},ek=f("[TumblrMart] Label for free premium perk","Free with Premium!"),eN=I&&i.isEligibleForTumblrmartCredit,eC=ex?.products??[],eA=eC&&eC.length?{period:eC[0].period||"",price:eC[0].price,periodLabel:ek,sku:eB,slug:eC[0].slug||""}:null,eM=eN&&eA?(0,n.$C)([eA,...eC]):(0,n.$C)(eC),eR=I&&"self-purchase"===u&&eM[eb]?.isSubscription,eI=()=>{let e=ep||W?.user?.name;return e?"gift"!==u&&("badge"===i.productType||J&&(0,S.uC)(Q,J,Z))?(0,S.RW)(e):eR?S.ry.premium:(0,A.cm)({peeprBlogname:e}):"/dashboard"},eW=()=>{ec(!0);let{period:e,slug:t}=eM[eb];("ad-free"===i.productGroup||"premium"===i.productGroup)&&R({eventName:d.R.PremiumPurchasePress,eventDetails:{using_iap:!1,source:"tumblrmart",period:e}}),R({eventName:e_(),eventDetails:{period:e,positionIndex:s,source:r,productName:i.productGroup,section:c,...eo&&{anonymous:eo},...ed&&{message:ed},...ep&&{recipientBlog:ep}}},{sendPayloadImmediately:!0});let a={period:e,product:t,source:r,path:eI(),..."gift"===u&&{gift_is_anonymous:eo},..."gift"===u&&ed&&{gift_message:ed},..."gift"===u&&ep&&{gift_receiver_tumblelog:ep},..."self-purchase"===u&&{receiver_tumblelog:ep||W?.user?.name}},l="gift"===u?H.my:H.MY,o=q.A()?.location?.host,n=()=>{ec(!1),B((0,V.X)((0,$.vf)(x)),"error")},h=({response:e})=>q.A()?.location.assign(e.url),m="month"===e?O.DF.Month:O.DF.Year;eR?o&&(0,Y.A)(P,m,o,a).fetch().then(h).catch(n):o&&l(P,o,a).then(h).catch(n)},eL=()=>{ec(!0),R({eventName:e_(),eventDetails:{positionIndex:s,source:r,productName:i.productGroup,section:c}}),es(ex?.button?.product??"",{onSettled:()=>{ec(!1)},onSuccess:()=>{K(eI())}})},ez=()=>{R({eventName:d.R.RedeemSelect,eventDetails:{positionIndex:s,source:r,productName:eM[eb].slug,section:c}}),el({product:eM[eb].slug,is_gift:"gift"===u,receiver_tumblelog:ep||W?.user?.name||"",..."gift"===u&&{gift_is_anonymous:eo},..."gift"===u&&ed&&{gift_message:ed}},{onSuccess:()=>{R({eventName:d.R.PremiumTumblrMartPerkUsed}),q.A()?.location.assign(eI())}})},e_=()=>{if(i)return"claim"===u?d.R.ClaimSelect:"self-purchase"===u?d.R.BuySelect:d.R.GiveGiftSelect;let{slug:e}=eM[eb];return"tumblrmart-crabs-gift-day"===e?d.R.CrabsGiveGiftSelect:"tumblrmart-horse-friend-gift-day"===e?d.R.HorseFriendGiveGiftSelect:d.R.AdFreeBrowsingGiveGiftSelect},eD=()=>{em(!1),eg("")},eU="claim"===u&&ex?.detailsButton?.label?ex.detailsButton.label:f("[TumblrMart] Label for button to go to checkout screen.","Next"),eF=f("[TumblrMart] Label when checking out an item for self purchase.","Purchase %1$s",[i.title]),eE=eM.map(e=>{let{periodLabel:t,price:r,sku:s}=e,a=s===eB;return{value:s,children:/*#__PURE__*/(0,h.jsx)(eG,{isFreePremiumPerk:a,label:t,priceCents:r}),singleOptionClassName:a?eS.A.isFreePremiumPerk:void 0}});return ei?/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.loader,children:/*#__PURE__*/(0,h.jsx)(j.A,{color:X().paletteBlack})}):/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.wrapper,children:[/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.titleAndBanner,children:[g&&/*#__PURE__*/(0,h.jsxs)("div",{children:[/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.goBackButton,children:/*#__PURE__*/(0,h.jsx)("button",{"aria-label":f("Text on a button that goes back to product list","Go back"),className:eS.A.backButton,onMouseUp:e,children:/*#__PURE__*/(0,h.jsx)(k.p,{colors:{primary:X().paletteBlack},size:{width:14,height:14}})})}),/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.popoverTitle,children:i.title})]}),/*#__PURE__*/(0,h.jsx)(et,{backgroundColors:i.backgroundColors,imageUrls:i.imageUrls})]}),ey&&/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.description,children:ey.map((e,t)=>/*#__PURE__*/(0,h.jsx)("p",{dangerouslySetInnerHTML:{__html:e}},t))}),ev&&ew&&/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.helpText,children:/*#__PURE__*/(0,h.jsx)("a",{href:ev,rel:"noopener noreferrer",target:"_blank",children:ew})}),i?.gift&&i?.selfPurchase&&!i?.selfPurchase?.button?.link&&/*#__PURE__*/(0,h.jsx)(eP,{checkoutType:u,className:eS.A.checkoutToggle,onSelectGift:()=>{eD(),m()},onSelectSelfPurchase:()=>{eD(),p()}}),"gift"===u&&/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.giftOptions,children:[!t&&/*#__PURE__*/(0,h.jsx)(ej,{onDismiss:eD,onSelect:e=>{em(!!e.ask),eg(e.name)},type:eM[0].slug}),/*#__PURE__*/(0,h.jsx)(N.A,{className:a()(eS.A.planGroup,{[eS.A.hasPremiumPerk]:eN}),disabled:ei,groupLabel:eF,name:"plan",onChange:ef,optionClassName:eS.A.planGroupOption,options:eE,selectedOptionIndex:eb}),/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.messageOptions,children:[/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.anonymousWrapper,children:[/*#__PURE__*/(0,h.jsx)("span",{className:eS.A.anonymousLabel,id:"anonymousLabel",children:f("Label for a toggle that allows a user to gift another user anonymously","Gift anonymously")}),/*#__PURE__*/(0,h.jsx)(C.A,{checked:eo,controlled:!0,disabled:ei||!ep,labelledBy:"anonymousLabel",onChange:()=>{eo||eu(""),en(e=>!e)},size:"small"})]}),/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.messageWrapper,children:[/*#__PURE__*/(0,h.jsx)(v.A,{avatarShape:F.b.Circle,badge:w.A.ofType(E.$.Reply),badgeBorder:!0,dimension:36,imageResponse:W?.user?.blogs?.[0].avatar,isAnonymous:eo}),/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.editorWrapper,children:/*#__PURE__*/(0,h.jsx)("input",{"aria-label":x("Send a message"),className:eS.A.messageInput,disabled:eo||ei||!ep||!eh,maxLength:475,onChange:e=>eu(e.target.value),placeholder:f("Placeholder for a text input that allows a user to leave message while gifting another user","Add a message (optional)"),type:"text",value:eo?"":ed})})]}),eo&&eh?/*#__PURE__*/(0,h.jsx)(y.A,{message:/*#__PURE__*/(0,h.jsx)(T.Ay,{comment:"Text warning user that if they chose to gift anonymously, they cannot add a custom message.",children:"You can't message anonymously."}),theme:"info",wrapperClassName:eS.A.alertWrapper}):/*#__PURE__*/(0,h.jsxs)("p",{className:eS.A.messageInfo,children:[!ep&&/*#__PURE__*/(0,h.jsx)(T.Ay,{comment:"[TumblrMart] Informative text explaining how a custom gift message will be used",children:"Your message will be sent to their inbox and can be shared as a public post."}),ep&&eh&&/*#__PURE__*/(0,h.jsx)(T.Ay,{comment:"[TumblrMart] Informative text explaining how a custom gift message will be used specifying recipient",params:{name:ep},children:"Your message will be sent to [name]'s inbox and can be shared as a public post."}),ep&&!eh&&/*#__PURE__*/(0,h.jsx)(T.Ay,{comment:"[TumblrMart] Text warning user that a blog cannot recieve a gifting message",params:{name:ep},children:"Sorry, [name] cannot be messaged."})]})]})]}),"self-purchase"===u&&/*#__PURE__*/(0,h.jsxs)("div",{className:eS.A.selfPurchaseOptions,children:[!!i?.selfPurchase?.validRecipients&&/*#__PURE__*/(0,h.jsx)(eT,{blogs:i.selfPurchase.validRecipients,className:eS.A.checkoutSelector,initialBlog:b||i.selfPurchase.validRecipients[0],onSelect:e=>eg(e)}),/*#__PURE__*/(0,h.jsx)(N.A,{className:a()(eS.A.planGroup,{[eS.A.hasPremiumPerk]:eN}),disabled:ei,groupLabel:eF,name:"plan",onChange:ef,optionClassName:eS.A.planGroupOption,options:eE,selectedOptionIndex:eb})]}),/*#__PURE__*/(0,h.jsx)("div",{className:eS.A.checkout,children:/*#__PURE__*/(0,h.jsx)(ea,{backgroundColor:X().paletteAccent,className:eS.A.nextButton,disabled:!!(ei||"gift"===u&&!ep||"self-purchase"===u&&i?.selfPurchase?.validRecipients&&!ep),label:eU,onClick:()=>{"claim"===u?eL():eM[eb].sku===eB?ez():eW()},textColor:X().paletteNavy,theme:"default"})})]})},eL={productListItem:"ACiRd",productDetails:"DvMIE",avatar:"ZXRZb",descriptionContainer:"Bjt7L",description:"w1vyD",title:"Holf3",subtitle:"wIopL",buttons:"MuN6k",button:"kjCiz"},ez=({onClick:e,positionIndex:t,product:r})=>{let[s,a]=(0,l.useState)(0),[o,i]=(0,l.useState)(0),[c,d]=(0,l.useState)(0),u=(0,l.useCallback)(e=>{e&&a(e.getBoundingClientRect().height)},[]),p=(0,l.useCallback)(e=>{e&&i(e.getBoundingClientRect().height)},[]),f=(0,l.useCallback)(e=>{e&&d(e.getBoundingClientRect().height)},[]),{claim:x,gift:y,selfPurchase:v,imageUrls:{avatar:w},subtitle:k,title:j,borderColor:N}=r,C=(s,a)=>s?/*#__PURE__*/(0,h.jsx)(m,{backgroundColor:Q.paletteBlue25,button:s,checkoutType:a,className:eL.button,onClick:()=>e(a),positionIndex:t,productGroup:r.productGroup,section:"list",textColor:Q.palettePurple}):null;return/*#__PURE__*/(0,h.jsxs)("div",{className:eL.productListItem,children:[w&&/*#__PURE__*/(0,h.jsx)("img",{alt:"",className:eL.avatar,src:w["3x"],style:{color:N}}),/*#__PURE__*/(0,h.jsxs)("div",{className:eL.productDetails,children:[/*#__PURE__*/(0,h.jsxs)("div",{className:eL.descriptionContainer,ref:u,children:[/*#__PURE__*/(0,h.jsx)("h3",{className:eL.title,ref:p,children:j}),/*#__PURE__*/(0,h.jsxs)("div",{className:eL.description,children:[/*#__PURE__*/(0,h.jsx)("p",{className:eL.subtitle,dangerouslySetInnerHTML:{__html:(0,n.Hn)(k)},ref:f}),/*#__PURE__*/(0,h.jsx)(b,{isVisible:g(s,o,c)})]})]}),/*#__PURE__*/(0,h.jsxs)("div",{className:eL.buttons,children:[C(v?.button,"self-purchase"),C(y?.button,"gift"),C(x?.button,"claim")]})]})]})}},97036:(e,t,r)=>{r.d(t,{E:()=>u,U:()=>d});var s=r(49315),a=r(90789),l=r(87800),o=r(4613),n=r(373);let i=n.z.object({badges:n.z.array(l.sq).optional(),active:n.z.array(l.sq).optional(),available:n.z.array(l.sq).optional(),unopenedCount:n.z.number().optional()}),c=(0,a.h)(i),d=e=>["badges",e],u=e=>{let{apiFetchWithSchema:t}=(0,o.Us)();return(0,s.I)({queryKey:d(e),queryFn:async()=>(await t(`/v2/blog/${e}/tumblrmart_accessories`,c,{method:"GET"})).response})}},84551:(e,t,r)=>{r.d(t,{yX:()=>u});var s=r(49315),a=r(90789),l=r(87800),o=r(4613),n=r(373);let i=(0,a.h)(n.z.object({banner:l.ML.optional(),categories:n.z.array(l.fH),carousel:n.z.array(l.fy),list:n.z.array(l.F3)})),c=e=>["tumblrmart-products",e];async function d(e,t){return e("/v2/tumblrmart/store_v2",i,{method:"GET",queryParams:t}).then(e=>e.response)}let u=e=>{let{apiFetchWithSchema:t}=(0,o.Us)();return(0,s.I)({queryKey:c(e),queryFn:()=>d(t,e),refetchOnWindowFocus:!1})}},57020:(e,t,r)=>{r.d(t,{MY:()=>i,PN:()=>d,d4:()=>l,eB:()=>c,gb:()=>o,my:()=>n,op:()=>u});var s=r(25175),a=r(12673);let l=()=>(0,s.k9)(["ask","avatar","name","shouldShowGift","shouldShowTumblrmartGift","title"]);function o(e,t,r){return new a._(e,`/v2/search/${encodeURIComponent(t)}`,{method:"GET",queryParams:{...l(),tumblrmart_product:r}})}function n(e,t,r){return e("/v2/tumblrmart/checkout",{method:"GET",queryParams:{host:t,...r}})}function i(e,t,r){return e("/v2/tumblrmart/checkout/self",{method:"GET",queryParams:{host:t,...r}})}function c(e,t,r,s){return e(`/v2/${t}/payment-method`,{method:"GET",queryParams:{host:r,path:s}})}function d(e,t,r){return new a._(e,"/v2/tumblrmart/orders/purchased",{method:"GET",queryParams:{...t&&{limit:t},...r&&{before_creation_timestamp:r}}})}function u(e,t,r){return e("/v2/tumblrmart/gifts/reshare",{method:"POST",body:{recipient_uuid:t,order_uuid:r}})}},6865:(e,t,r)=>{r.d(t,{Mf:()=>l,WT:()=>m,di:()=>d,fd:()=>a,r5:()=>h,vf:()=>s,y4:()=>u,yY:()=>o,zH:()=>i,zL:()=>c});let s=e=>[e("Something went screwy."),e("Something's busted."),e("Something got snagged."),e("Something's acting up."),e("Something sucks!"),e("Internet is being dumb."),e("Computer weirdness."),e("The server is being foolish."),e("Something fizzled."),e("The internet evaporated."),e("The internet is being wiggly."),e("Something went splat."),e("Server turned to dust."),e("Something's wonky."),e("Something's not happening."),e("Something's not working."),e("Something got messed up."),e("Unknown, totally annoying error."),e("A nameless error mysteriously occurred."),e("Our computer is a loser."),e("Something pooped out."),e("Something fell into a volcano."),e("Something is all gummed up."),e("Something melted.")],a=e=>[e("The message displayed when there are no results.","Nothing turned up. Bummer."),e("The message displayed when there are no results.","Looked around but didn’t see anything about that."),e("The message displayed when there are no results.","Sadly, nothing."),e("The message displayed when there are no results.","Tragically, nothing."),e("The message displayed when there are no results.","Welcome to the void. There is nothing here."),e("The message displayed when there are no results.","We found nothing. Here it isn’t."),e("The message displayed when there are no results.","Couldn’t find that. Please, don’t be upset. Please."),e("The message displayed when there are no results. A joke like the end of a written letter.","Sincerely, we found nothing."),e("The message displayed when there are no results.","Nothing to see here."),e("The message displayed when there are no results.","This? Here? Yeah, nothing."),e("The message displayed when there are no results.","If you were looking for nothing, congrats, you found it."),e("The message displayed when there are no results.","Remember: The internet is a series of tubes. Empty, empty tubes.")],l=e=>[e("Meditate for a while on this empty Tumblr."),e("This Tumblr is cool, but empty."),e("This minimalist Tumblr has no posts."),e("Posts? Nah."),e("This Tumblr is content-free.")],o=(e,t,r)=>[e("This post isn't here anymore, but the Tumblr still is."),t("Error message for missing post. Placeholder is a blog name.","This post is gone, gone, gone. But there's more, more, more, on %1$s's Tumblr.",[r]),t("Error message for missing post. Placeholder is a blog name.","Ghost post! Spooky. See what else is haunting %1$s's Tumblr.",[r]),e("You're too late. This post is no more."),e("This post has ceased to exist."),e("This post went to heaven.")],n=e=>[e("The message displayed when there are no search results.","Maybe you spelled it wrong?"),e("The message displayed when there are no search results.","Your search returned nothing, nothing, nothing."),e("The message displayed when there are no search results.","Maybe try a similar search but use different words? Dunno."),e("The message displayed when there are no search results.","Aw, we don’t have anything about that. Sorry."),e("The message displayed when there are no search results.","That search was weird and we didn’t really “get” it."),e("The message displayed when there are no search results.","That search was amazing, but the world just isn’t ready for it.")],i=e=>[...a(e),...n(e)],c=(e,t)=>[e("Error message for empty search text. Placeholder is the search text.","No posts for %1$s",[t]),e("Error message for empty search text. Placeholder is the search text.","This Tumblr is cool, but empty for %1$s",[t]),e("Error message for empty search text. Placeholder is the search text.","This Tumblr is content-free for %1$s",[t])],d=e=>[e("No search result found for message recipients","That isn't anyone."),e("No search result found for message recipients","Uh, who?"),e("No search result found for message recipients","Huh what?"),e("No search result found for message recipients","Never heard of 'em."),e("No search result found for message recipients","???"),e("No search result found for message recipients","Eh?"),e("No search result found for message recipients","Whaaa?")],u=e=>{let t=[e("[TumblrMart] Text describing what one thinks about when they remember crabs","a salty summer breeze"),e("[TumblrMart] Text describing what one thinks about when they remember crabs","drawn butter and a squirt of lemon juice"),e("[TumblrMart] Text describing what one thinks about when they remember crabs","the turning of the tides"),e("[TumblrMart] Text describing what one thinks about when they remember crabs","eurphoric sunsets on the beach"),e("[TumblrMart] Text describing what one thinks about when they remember crabs","the sound of tiny waves splashing on the sand"),e("[TumblrMart] Text describing what one thinks about when they remember crabs","the many waves that flow through clouds and sunken caves"),e("[TumblrMart] Text describing what one thinks about when they remember crabs","the color of the sky")];return t[Math.floor(Math.random()*t.length)]},h=e=>[e("Post form crash","A wild tumbeast ate your post! Sorry about that - we'll try to rein this one in!"),e("Post form crash","Your post was too out of this world and crashed the editor!"),e("Post form crash","Our editor is not cool enough (yet) to handle your post!")],m=e=>{let t=[e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","the burdens of a life well lived"),e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","the rich smell of leather"),e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","arriving at a destination on the back of my best friend"),e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","strong galloping sounds"),e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","kisses from a big, wet mouth"),e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","secret confessions that are only uttered at death's door"),e("[TumblrMart] Text describing what one thinks about when they remember Horse Friend","an autumn walk through a cemetery")];return t[Math.floor(Math.random()*t.length)]}},39932:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(66869);function a(e,t,r,a){return(0,s.Ay)(e).generatePremiumCheckoutUrl(t,r,a)}},95683:(e,t,r)=>{r.d(t,{$g:()=>u,G5:()=>d,Ib:()=>c,PY:()=>g,Ri:()=>h,Sn:()=>i,c5:()=>n,fZ:()=>m,m:()=>p});var s=r(84236);r(22696);var a=r(86115),l=r(30344),o=r(4613);function n(e){return e.includes("refresh=true")}function i(e){return e.includes("update=true")}function c(e,t){let r=Math.floor((e-t)/e*100);return`${r}`}function d({response:e}){let{cardNetwork:t,expiryMonth:r,expiryYear:s,lastFour:a,links:l,type:o}=e;return{ccNumber:a&&`•••• ${a}`,ccType:t,ccExpiryMonth:r,ccExpiryYear:s,isInvalid:(()=>{if("paypal"===o)return!1;if(!a||!t||!r||!s)return!0;let e=new Date,l=new Date;return l.setMonth(r),l.setDate(-1),l.setFullYear(s),e>l})(),type:o,updateUrl:l?.updatePaymentMethodUrl?.href||""}}let u=(e,t,r)=>r(e/100,t),h=(e,t)=>{let{_c:r}=(0,o.Us)(),s=m(e);return e.period===l.DF.Year?t?r("Subscription price per year","%1$s/year",[s]):r("Subscription price per year (abbreviated)","%1$s/yr",[s]):t?r("Subscription price per month","%1$s/month",[s]):r("Subscription price per month (abbreviated)","%1$s/mo",[s])},m=e=>{let{_getPriceInCurrency:t}=(0,o.Us)(),{price:r,currencyCode:s}=e;return u(r,s,t)},p=(e,t,r,a=s.N.Notes)=>{let l=e[t];return l?r(new Date(1e3*l),a,!0):""};function g(e){let{startTime:t,status:r}=e;if(r!==l.bI.OnHold)return!1;let s=5*a.N.Minute;return Date.now()/1e3-t<s}}}]);