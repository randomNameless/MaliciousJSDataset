<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1794-901bfbba.html</title>
</head>
<body>

<script>
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9516779f-f3df-4ef9-97bd-d2356088373d",e._sentryDebugIdIdentifier="sentry-dbid-9516779f-f3df-4ef9-97bd-d2356088373d")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@ce094590bd2291e3264b21d2f92bffc273e4a131"},(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[1794],{57932:(e,t,s)=>{var i={"./ar.json":[24122,9340],"./be.json":[37212,9786],"./cs.json":[63439,197],"./de.json":[53090,5076],"./en.json":[96714,5148],"./es.json":[10009,2507],"./fa.json":[36132,9914],"./fi.json":[24076,2882],"./fr.json":[58369,9775],"./hi.json":[67930,5740],"./it.json":[39756,2534],"./ja.json":[79912,8198],"./ko.json":[89955,4889],"./nl.json":[5675,305],"./pl.json":[28521,779],"./pt.json":[82449,1363],"./ru.json":[74908,794],"./sa.json":[21033,1879],"./tr.json":[90111,2697],"./uk.json":[36689,2227],"./vi.json":[88540,1378],"./zh.json":[82371,4625]};function n(e){if(!s.o(i,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=i[e],n=t[0];return s.e(t[1]).then(()=>s.t(n,19))}n.keys=()=>Object.keys(i),n.id=57932,e.exports=n},83225:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i={addWrapper:"e0Nag",container:"GIEHd",badgesContainer:"R7jci",badge:"rJLvK",badgeImage:"sdOCZ",shouldStack:"zSqhJ",blogSettingsBadgesWrapper:"_GPua",peeprHeaderBadgesWrapper:"a0aud"}},59676:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i={overlay:"R5xCG",fire:"_OHHp",fireEmoji:"Q_Mpz",firefall:"hGGIh",igniteSuccess:"Z9CC5",flame:"hnU80",flamefly:"MwgAh",one:"Lyjvv",flame3:"w83t4",two:"HLVUD",flameMain:"aMIf6",flameWobble:"hy7Ja",three:"FKIz9",four:"tiQnH",five:"udvLD"}},3659:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i={icon:"OIzSg",title:"YZnLZ",subtitle:"oQs98",container:"GzZtE",igniteProductionOptions:"IOcGh",igniteProductOption:"Ahq2Z",radioInnerContainer:"QXuBs",price:"XezzS",description:"XjFjI",igniteAlert:"IwJZG",targeting:"VVkpl",targetingText:"xx3Yj",targetingLabel:"R15af",helpText:"gStOF",igniteSuccessButton:"ILRkA",infoText:"_vOn7",ctaCard:"lU2pe",ctaHashtagIcon:"H2lJ5",ctaHeader:"JXKrK",ctaDescription:"MnNQg",ctaLearnMore:"eE_V1",modalFooter:"k9mqe",fixedFooter:"a_6g9",shadow:"i4aV4",igniteSuccessButtonInner:"GDEWC",igniteButtons:"QgXyr",igniteExtinguishButton:"rw1Ql",helpButton:"T6LPn",igniteCancelButton:"M4lpn",extinguishCancelButton:"PHxLn",extinguishConfirmButton:"aYIQf",hasCustomBg:"DPlCX",successPopoverButton:"s2wDP",loadingText:"amVpp",popoverContainer:"ST0Bu",targetWrapper:"uJ6_Y",popover:"QJf1C",audienceButton:"tiqnP",audienceCaret:"F0ual",popoverWrapper:"ir1r5",dropdownBtnContainer:"MarEW",dropdownBtnInner:"sXniv",selector:"ZD6so",selectorText:"OTU6z",selectorLabel:"Nfc7J",selectorWrapper:"WxUJP",selectorCaret:"Z6Gnb",selectorButton:"GDeB8",buttonSelected:"yzzBT",popoverBaseContainer:"g_cxq",blogLinkMention:"KRE3w",newDesign:"nF_dx",header:"TZx4d",fireBackgroundContainer:"QMsVD",fireBackground:"TV0vm",blazeModalTitle:"cXidc",body:"SMAce",selectionLabel:"TVDzA",loading:"ycvbE",subtitleContainer:"achKX",otherPeoplePost:"SKewB",preview:"nhE3L",previewPost:"te1Ur",previewAvatar:"uhqpA",freePremiumPerk:"ncS4r",freePerkDescription:"jmG7D",freePremiumPerkPrice:"m23e8",textButton:"SWOvi",loadingOverlay:"wKz4d",productsHeader:"J0B8j",searchBoxPopover:"NPvAb",searchBoxPopoverHeading:"MOwAM",isShowingInfoText:"VgbiW",emptyResult:"lc4gS"}},66512:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i={masonry:"hyiL2",column:"USr9U"}},63426:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i={listTimelineObject:"So6RQ",listTimelineObjectInner:"ge_yK",reblogRedesignEnabled:"YSitt",noMargin:"a5_oh",paywallTimelineObject:"hbJOQ",expandedGridObjectContainer:"gODLh",postInGrid:"rCRIW",gridTimelineObject:"tCZnl",expandedCover:"ojpYJ",expandedCoverIsExpanded:"aRqkN",gridObjectExpandCover:"Yxz86",gridObjectExpandCoverInner:"ju4hw",impressionLoggingWrapper:"c79Av",hiddenObserver:"qj1WD",dwellTimeObserver:"Z0Knh",hiddenObserverMiddlePoint:"XJ0js",animateOut:"jYrjr",slideLeft:"EAhje",masonryTimelineObject:"i4aRn",sortDragDropTarget:"RFqS2",merginObject:"osIkK"}},16010:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var i={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},n=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],r="undefined"!=typeof window&&void 0!==window.document?window.document:{},l="fullscreenEnabled"in r&&Object.keys(i)||n[0]in r&&n||o[0]in r&&o||a[0]in r&&a||[];let d={requestFullscreen:function(e){return e[l[i.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[i.requestFullscreen]]},get exitFullscreen(){return r[l[i.exitFullscreen]].bind(r)},get fullscreenPseudoClass(){return":"+l[i.fullscreen]},addEventListener:function(e,t,s){return r.addEventListener(l[i[e]],t,s)},removeEventListener:function(e,t,s){return r.removeEventListener(l[i[e]],t,s)},get fullscreenEnabled(){return!!r[l[i.fullscreenEnabled]]},set fullscreenEnabled(val){},get fullscreenElement(){return r[l[i.fullscreenElement]]},set fullscreenElement(val){},get onfullscreenchange(){return r[("on"+l[i.fullscreenchange]).toLowerCase()]},set onfullscreenchange(handler){return r[("on"+l[i.fullscreenchange]).toLowerCase()]=handler},get onfullscreenerror(){return r[("on"+l[i.fullscreenerror]).toLowerCase()]},set onfullscreenerror(handler){return r[("on"+l[i.fullscreenerror]).toLowerCase()]=handler}}},47457:(e,t,s)=>{"use strict";s.d(t,{v:()=>I});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(96894),a=s(36665),r=s(4613),l=s(23638),d=s(83087),c=s(11100),h=s(28230),p=s(86619),u=s(49315),m=s(90789),g=s(87800),b=s(373);let x=b.z.object({badges:b.z.array(g.hj)}),v=(0,m.h)(x),f=()=>["accessory-details"],y=()=>{let{apiFetchWithSchema:e}=(0,r.Us)();return(0,u.I)({queryKey:f(),queryFn:async()=>(await e("/v2/tumblrmart/accessories/details",v,{method:"GET",schemaErrorPrintFullResponse:!0})).response,refetchOnMount:!1,refetchOnWindowFocus:!1})};var j=s(53986),C=s(89972);let w={hoverCardTargetWrapper:"Lssfa",hoverCardWrapper:"XyjT5",popoverContainer:"HiALI",popoverHeader:"ftMh_",icon:"ExLtT",popoverBody:"zQQ1t",title:"eS7H5",description:"gY71t",actions:"vlhpM",button:"oLcVd",isIconButton:"GU7ne",full:"Qppi3",loader:"lDyCD"};var A=s(60397);let k=({children:e,productGroup:t,wrapperClassName:s})=>{let{_c:i,isLoggedIn:l}=(0,r.Us)(),{data:d,isPending:u}=y(),m=(0,j.Zp)(),{pathname:g}=(0,j.zy)(),[b,x]=(0,a.useState)(!1),v=d?.badges?.find(e=>e.productGroup===t);return v?/*#__PURE__*/(0,A.jsx)(p.Ay,{component:u?/*#__PURE__*/(0,A.jsx)("span",{className:w.loader,children:/*#__PURE__*/(0,A.jsx)(h.A,{centerOrientation:"horizontalAndVertical"})}):/*#__PURE__*/(0,A.jsxs)("div",{className:w.popoverContainer,children:[/*#__PURE__*/(0,A.jsx)("div",{className:w.popoverHeader,style:{background:(0,o.U$)(v.backgroundColors,"to bottom right")},children:(0,o.L6)(v.imageUrls.avatar,i("[Badge Management] Badge hover card badge image.","Image of a badge."),w.icon)}),/*#__PURE__*/(0,A.jsxs)("div",{className:w.popoverBody,children:[/*#__PURE__*/(0,A.jsx)("h2",{className:w.title,children:v.title}),/*#__PURE__*/(0,A.jsx)("p",{className:w.description,children:v.subtitle}),v?.actions&&/*#__PURE__*/(0,A.jsx)("div",{className:w.actions,children:v.actions.map((e,s)=>{let a=e?.label||i("[Badge Management] Badge hover card button label.","More details."),r=new URL(e.url),d=(0,o.li)(r.hostname);return/*#__PURE__*/(0,A.jsxs)(c.A,{className:n()(w.button,{[w.isIconButton]:e?.icon&&!e?.label,[w.full]:e?.icon&&e?.label}),label:a,onClick:()=>{(l||!d)&&(0,o.My)(e.url,m)},...!l&&d&&{"data-login-wall-type":"accessory","data-login-wall-redirect":g,"data-login-wall-destination":`${r.pathname}${r.search}`},children:[e?.icon&&(0,o.en)(e.icon,void 0),e?.label]},`product-${t}-${s}`)})})]})]}),isOpen:b,popoverWrapperClassName:w.hoverCardPopoverWrapper,targetWrapperClassName:w.hoverCardTargetWrapper,toggle:()=>x(!b),type:C.oO.Hover,usePortals:!0,width:180,children:/*#__PURE__*/(0,A.jsx)("span",{className:n()(w.hoverCardWrapper,s),children:e})}):e};var N=s(83225);let S=({badgeIndex:e,productGroup:t,isHoverCardDisabled:s=!1,urls:i,badgeClassName:a,presentationOnly:l=!1})=>{let{_c:c}=(0,r.Us)(),{isMobile:h}=(0,d.Ri)();return i.map((i,r)=>{let d=(0,o.ZT)(i,c("[Badge Management] Image of TumblrMart badge","Badge image."),N.A.badgeImage,l?{role:"presentation"}:{});return/*#__PURE__*/(0,A.jsx)("span",{className:n()(N.A.badge,a),style:{"--badges-index":String(e+r)},children:h||s?d:/*#__PURE__*/(0,A.jsx)(k,{productGroup:t,children:d})},`badge-image-${t}-${e+r}`)})},I=({badgeSize:e=o.Po,badgeSpacing:t=o.G$,badgesContainerClassName:s,badgeClassName:i,canShowBadges:d,isHoverCardDisabled:c,tumblrmartAccessories:h,areIndividualBadgesPresentationOnly:p=!1,stackBadgesInsteadOfWrapping:u=!1})=>{let{_cn:m}=(0,r.Us)(),[g,b]=(0,a.useState)(!1),[x,v]=(0,a.useState)([]),f=(0,a.useRef)(null),y=(0,a.useMemo)(()=>x.map(({urls:e})=>e).flat().length,[x]);if((0,a.useEffect)(()=>{h?.badges&&v(h.badges)},[h?.badges]),(0,l.E)(()=>{f?.current&&u&&b((0,o.M6)(y,f.current.clientWidth,e,t))},[x,u]),!x.length||!d)return null;let j=0,C=x.map(({productGroup:e,urls:t},s)=>{let n=/*#__PURE__*/(0,A.jsx)(S,{badgeClassName:i,badgeIndex:j,isHoverCardDisabled:c,productGroup:e,urls:t,...p&&{presentationOnly:!0}},`badge-container-${e}-${s}`);return j+=t.length,n}),w=m("Screenreader label on group of badges","%1$s badge","%1$s badges",y);return/*#__PURE__*/(0,A.jsx)("span",{"aria-label":w,className:n()(N.A.badgesContainer,{[N.A.shouldStack]:u&&g},s),ref:f,style:{"--badge-size":`${e}px`,"--badge-spacing":`${t}px`,"--badges-total":String(y)},children:C})}},26203:(e,t,s)=>{"use strict";s.d(t,{g:()=>l});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(27699);let a={facepile:"e_jbk",face:"tURbW",faceChrome:"zhZFR",faceContent:"uc6Yo"};var r=s(60397);let l=({avatars:e,context:t,faceLimit:s=3})=>/*#__PURE__*/(0,r.jsx)("div",{className:a.facepile,children:e.slice(0,s).map((e,s)=>/*#__PURE__*/(0,r.jsx)(o.A,{dimension:20,imageResponse:e,wrapperClassName:n()(a.face,{[a.faceChrome]:"chrome"===t,[a.faceContent]:"content"===t})},s))})},73789:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(11100),a=s(36665),r=s(20301),l=s(4613),d=s(6966);let c={holder:"LaNUG",expandButton:"uR3i7"};var h=s(60397);class p extends a.Component{constructor(...e){super(...e),n()(this,"state",{clientHeight:void 0,unfoldNestedContent:!1,isExpanded:!1,maxHeightForVideo:0}),n()(this,"holderRef",/*#__PURE__*/(0,a.createRef)()),n()(this,"updateClientHeightState",()=>{this.setState({clientHeight:this.holderRef.current?.clientHeight})}),n()(this,"updateClientHeightStateAfterFlush",(0,r.A)(this.updateClientHeightState)),n()(this,"expand",e=>{e.stopPropagation(),this.props.onExpand?.(),this.setState({isExpanded:!0,unfoldNestedContent:!0})}),n()(this,"onVideoResize",(e,t)=>{let{maxHeight:s}=this.props;this.shouldCrop()&&t>s&&e<s&&this.setState({maxHeightForVideo:t+50})})}componentDidMount(){this.updateClientHeightStateAfterFlush()}componentWillUnmount(){this.updateClientHeightStateAfterFlush.cancel()}static preventScroll(e){e.target.scroll(0,0)}shouldCrop(){let{clientHeight:e,isExpanded:t}=this.state,{maxHeight:s,maxHeightTolerance:i,preventTruncation:n,setIsLongPost:o}=this.props,a=void 0===e||e>s+(i||50);return o?.(a),!t&&a&&!n}render(){let{clientHeight:e,unfoldNestedContent:t,maxHeightForVideo:s}=this.state,{maxHeight:i,children:n,expandButtonClassName:a=c.expandButton,onCrop:r,appContext:{_t:l}}=this.props,u=this.shouldCrop();r?.(u);let m=l("Expand"),g={unfoldNestedContent:t,onVideoResize:this.onVideoResize};return/*#__PURE__*/(0,h.jsx)(d.Rx.Provider,{value:g,children:/*#__PURE__*/(0,h.jsxs)("div",{className:c.holder,onScroll:p.preventScroll,style:{maxHeight:u?Math.max(s||i):void 0},children:[/*#__PURE__*/(0,h.jsx)("div",{ref:this.holderRef,children:n}),u&&void 0!==e&&/*#__PURE__*/(0,h.jsx)(o.A,{label:m,onClick:this.expand,wrapperClassName:a,children:m})]})})}}let u=(0,l.Lk)(p)},8796:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s(72591);let n={postPlaceholder:"qrzdF"};var o=s(60397);let a="250%",r=({margin:e=a,children:t,wrapperClassName:s,wrapperStyle:r})=>{let{ref:l,inView:d,entry:c}=(0,i.Wx)({rootMargin:e});if(!d&&c?.target){let{clientHeight:e,clientWidth:t}=c?.target;return/*#__PURE__*/(0,o.jsx)("div",{className:n.postPlaceholder,ref:l,role:"figure",style:{maxWidth:t,height:e}})}return/*#__PURE__*/(0,o.jsx)("div",{className:s,ref:l,style:r,children:t})}},16064:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("airplane",{size:{width:17,height:17}})},63024:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("calendar",{size:{width:18,height:18}})},87463:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("collapse",{size:{width:24,height:24}})},36771:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("delete",{size:{width:24,height:24}})},94210:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("filter-alt",{size:{width:24,height:24}})},99426:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(20928);let n=(0,i.hA)({filledIcon:(0,i.Kk)("fire-filled"),emptyIcon:(0,i.Kk)("fire-empty"),size:{width:23,height:20}})},56122:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("full-screen",{size:{width:24,height:24}})},18723:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("memberships-lock",{size:{width:36,height:36}})},35236:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("pause",{size:{width:24,height:24}})},36867:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(20928).Kk)("posts-poll",{size:{width:24,height:24}})},94818:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(20928);let n=(0,i.hA)({filledIcon:(0,i.Kk)("reply-filled"),emptyIcon:(0,i.Kk)("reply-empty"),size:{width:17,height:17}})},32950:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});let i=s.p+"src/assets/icons/ignite-icon-80c800c6.svg";var n=s(74059),o=/*#__PURE__*/s.n(n),a=s(36665),r=s(46302),l=s(65392);function d(e,t){Object.entries(t).forEach(([t,s])=>{e.style[t]=s})}var c=s(59676),h=s(60397);let p=e=>{let t=(0,a.useRef)(null),[s,n]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=t.current;if(!e)return;let i=window.innerWidth,o=window.innerHeight;d(e,{width:`${i}px`,height:`${o}px`}),e.style.setProperty("--fire-container-height",`${o+30}px`),e.querySelectorAll(`.${c.A.fireEmoji}`).forEach(e=>{let t=.4*Math.random()+.6,s=30*t,n=o/120;d(e,{height:`${30*t}px`,width:`${s}px`,opacity:`${t}`,animationDuration:`${t*n}s`,animationDelay:`-${Math.random()*t*n}s`,left:`${Math.random()*i-s/2}px`})});let a=(0,r.A)(()=>{n(s+1)},100);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[s]),/*#__PURE__*/(0,h.jsxs)("div",{className:o()(c.A.overlay,e.className),"data-testid":"ignite-animation",children:[/*#__PURE__*/(0,h.jsx)("div",{className:c.A.fire,children:/*#__PURE__*/(0,h.jsxs)("svg",{height:"189.864",viewBox:"0 0 125 189.864",width:"125",children:[/*#__PURE__*/(0,h.jsx)("path",{className:c.A.flameMain,d:"M76.553 186.09s-10.178-2.976-15.325-8.226-9.278-16.82-9.278-16.82-.241-6.647-4.136-18.465c0 0 3.357 4.969 5.103 9.938 0 0-5.305-21.086 1.712-30.418 7.017-9.333.571-35.654-2.25-37.534 0 0 13.07 5.64 19.875 47.54 6.806 41.899 16.831 45.301 6.088 53.985",fill:"#F36E21"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flameMain,c.A.one),d:"M61.693 122.257c4.117-15.4 12.097-14.487-11.589-60.872 0 0 32.016 10.223 52.601 63.123 20.585 52.899-19.848 61.045-19.643 61.582.206.537-19.401-.269-14.835-18.532s-10.651-29.902-6.534-45.301z",fill:"#F6891F"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flameMain,c.A.two),d:"M81.657 79.192s11.549 24.845 3.626 40.02c-7.924 15.175-21.126 41.899-.425 64.998 0 0 40.847-33.305-3.201-105.018z",fill:"#FFD04A"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flameMain,c.A.three),d:"M99.92 101.754s-23.208 47.027-12.043 80.072c0 0 32.741-16.073 20.108-45.79-12.631-29.717-8.065-21.928-8.065-34.282z",fill:"#FDBA16"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flameMain,c.A.four),d:"M103.143 105.917s8.927 30.753-1.043 46.868c-9.969 16.115-14.799 29.041-14.799 29.041s47.086-17.223 15.842-75.909z",fill:"#F36E21"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flameMain,c.A.five),d:"M62.049 104.171s-15.645 67.588 10.529 77.655c26.175 10.068-3.545-51.065-10.529-77.655z",fill:"#FDBA16"}),/*#__PURE__*/(0,h.jsx)("path",{className:c.A.flame,d:"M101.011 112.926s8.973 10.519 4.556 16.543c-6.197.266 1.185-12.063-4.556-16.543z",fill:"#F36E21"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flame,c.A.one),d:"M55.592 126.854s-3.819 13.29 2.699 16.945c5.747-2.319-2.384-11.536-2.699-16.945z",fill:"#F36E21"}),/*#__PURE__*/(0,h.jsx)("path",{className:o()(c.A.flame,c.A.two),d:"M54.918 104.595s-3.959 6.109-1.24 8.949c3.252-.288-1.45-6.215 1.24-8.949z",fill:"#F36E21"})]})}),/*#__PURE__*/(0,h.jsx)("div",{ref:t,children:(0,l.A)(0,60).map(e=>/*#__PURE__*/(0,h.jsx)("img",{alt:"",className:c.A.fireEmoji,src:i},e))})]})}},10621:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>ta,yF:()=>tn,lK:()=>to});var i=s(32950),n=s(12177),o=s(99904),a=s(11100),r=s(20928);let l=(0,r.Kk)("extinguisher",{size:{width:13,height:18}}),d={igniteExtinguishButton:"hgLUH",buttonLabel:"cuF6B"};var c=s(60397);let h=({label:e,onClick:t,disabled:s=!1})=>/*#__PURE__*/(0,c.jsxs)(a.A,{disabled:s,label:e,onClick:t,wrapperClassName:d.igniteExtinguishButton,children:[/*#__PURE__*/(0,c.jsx)(l,{}),/*#__PURE__*/(0,c.jsx)("div",{className:d.buttonLabel,children:e})]});var p=s(12044),u=s(79708),m=s(49315),g=s(4613);async function b(e,t){let{response:{products:s,audienceOptions:i,languageOptions:n,campaignGoalOptions:o,ctaButtonOptions:a}}=await e("/v2/ignite/products",{queryParams:{translations:"full",tumblelog_uuid:t}});return{products:s,audienceOptions:i,languageOptions:n,campaignGoalOptions:o,ctaButtonOptions:a}}function x(e,t){let{apiFetch:s}=(0,g.Us)();return(0,m.I)({queryKey:["ignite-products"],queryFn:()=>b(s,t),refetchOnWindowFocus:!1,staleTime:3e5,enabled:e})}var v=s(51539),f=s(36665),y=s(94048),j=s(66869),C=s(56356),w=s(3151),A=s(13275),k=s(56365);let N=(0,r.Kk)("ignite",{size:{width:23,height:20}});var S=s(85191),I=s(84236);let P=({classname:e,percent:t})=>/*#__PURE__*/(0,c.jsx)("div",{className:e,style:{width:`${t>100?100:t}%`}}),B={leftText:"s4g_h",valueText:"yXNX0",grid:"pMpfW",row:"HQcQr",bar:"hrv3x",barContainer:"VgtfT",highlightedValue:"rBSgB"},T=()=>{let{_t:e}=(0,g.Us)();return e("Started:")},R=()=>{let{_t:e}=(0,g.Us)();return e("Estimated Progress:")},E=e=>{let{_getLocaleDateString:t}=(0,g.Us)();return t(new Date(1e3*e),I.N.WeekDayDateAndTime,!0)},M=({startingDate:e,impressionGoal:t,impressionCount:s})=>/*#__PURE__*/(0,c.jsxs)("div",{className:B.grid,children:[/*#__PURE__*/(0,c.jsxs)("div",{className:B.row,children:[/*#__PURE__*/(0,c.jsx)("label",{className:B.leftText,children:T()}),/*#__PURE__*/(0,c.jsx)("label",{className:B.valueText,children:E(e)})]}),0!==s&&/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsxs)("div",{className:B.row,children:[/*#__PURE__*/(0,c.jsx)("label",{className:B.leftText,children:R()}),/*#__PURE__*/(0,c.jsx)("label",{className:B.valueText,id:"impressionCount",children:/*#__PURE__*/(0,c.jsx)(S.Ay,{components:{highlight:/*#__PURE__*/(0,c.jsx)("span",{className:B.highlightedValue})},params:{impressionCount:s,impressionGoal:t},children:"[highlight][impressionCount][/highlight] / [impressionGoal] people"})})]}),/*#__PURE__*/(0,c.jsx)("div",{className:B.barContainer,children:/*#__PURE__*/(0,c.jsx)(P,{classname:B.bar,percent:s/t*100})})]})]});var z=s(56040),L=/*#__PURE__*/s.n(z),D=s(3659);let O=()=>{let{_c:e}=(0,g.Us)(),{post:{igniteTransaction:t,igniteReport:s,blog:i,isSingleUserBlaze:n=!0,userIsBlazee:a,blazerBlog:r}}=(0,C.gY)(),{title:l,message:d}=(()=>{let t=!n&&a&&r;return n?{title:e("The post has been sponsored and is hot / trending","This post is on fire – in a good way!"),message:e("A follow up that shows how well the user sponsored post did","We’ll send a full report when your campaign is complete. Here's how it is going:")}:t?{title:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"The post has been sponsored by other user and is hot / trending",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:r,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${r.name}`},children:"[link][blogName][/link] set this post on fire – in a good way!"}),message:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A follow up that shows how well the user sponsored post did (sponsored by other user) ",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:r,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${r.name}`},children:"We’ll send you and [link][blogName][/link] a full report when the campaign is complete. Here’s how it’s going:"})}:{title:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"The non-owned post has been sponsored and is hot / trending",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:i,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${i.name}`},children:"Post by [link][blogName][/link] is on fire – in a good way!"}),message:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A follow up that shows how well the user non-owned sponsored post did",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:i,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${i.name}`},children:"We’ll send you and [link][blogName][/link] a full report when the campaign is complete. Here’s how it’s going:"})}})();return/*#__PURE__*/(0,c.jsx)(o.A,{children:/*#__PURE__*/(0,c.jsx)(M,{impressionCount:s?.impressions??0,impressionGoal:t?.impressionGoal??0,startingDate:t?.startTimestamp??0}),icon:/*#__PURE__*/(0,c.jsx)(N,{colors:{accent:z.blazeOrange,primary:z.blazeOrange}}),message:d,theme:"success",title:l,wrapperClassName:D.A.igniteAlert})};var F=s(12289),W=s(83322),U=s(9119),_=s(6865),V=s(84007);let H=({onClose:e})=>{let{_c:t,_t:s,apiFetch:i,features:{enableTumblrPremium:n}}=(0,g.Us)(),{onEditTimelineObject:r,onRemoveTimelineObject:d}=(0,U._X)(),{removePostOnExtinguish:h}=to(),[p,u]=(0,f.useState)(!1),[m,b]=(0,f.useState)(null),{post:x}=(0,C.gY)(),{blazeCampaign:v}=(0,F.D9)(),{id:y,blog:w,isSingleUserBlaze:N=!0,userIsBlazee:I,blazerBlog:P,isBlazed:B,igniteTransaction:T,igniteReport:R}=x,E=T?.transactionUuid||"",M=T?.impressionGoal||0,z=R?.impressions||0;(0,f.useEffect)(()=>()=>{p&&v&&r?.(U.iN(v),e=>{W.zo(e)&&(e.status="pending"===v.status?"canceled":"extinguished")})},[p,h,d,r,x,v]);let L=()=>(0,j.Ay)(i).igniteCancelPendingBlaze(y.toString(),w.uuid,E).fetch(),O=()=>(0,j.Ay)(i).igniteExtinguishPost(y.toString(),w.uuid,E).fetch();return/*#__PURE__*/(0,c.jsx)(A.A,{compact:!0,headerIcon:/*#__PURE__*/(0,c.jsx)(l,{}),onClose:e,title:p?t("The post blaze was successfully cancelled","Post successfully extinguished"):t("The user wants to extinguish a blazed post and needs to confirm","Are you sure to extinguish Blaze campaign?"),children:/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[m&&/*#__PURE__*/(0,c.jsx)(o.A,{message:m,theme:"error",wrapperClassName:D.A.alert}),/*#__PURE__*/(0,c.jsx)(o.A,{icon:/*#__PURE__*/(0,c.jsx)("div",{}),message:p?B?t("A follow up indicating the blazed post has been successfully stopped","It may take a little bit for the post to be fully removed from promotion across Tumblr."):t("A follow up indicating the pending blazed post has been successfully cancelled","The post will be removed from the moderation queue in a few moments."):(()=>{let e=!N&&I&&P,s=/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored post is being extinguished - confirmation message",children:"Would you still like to extinguish the campaign?"})});return N?B?/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored owned post is being extinguished - intro message",children:"You can extinguish the remaining campaign and we’ll stop sharing your post across Tumblr."})}),/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored owned post is being extinguished - campaign performance message",params:{impressionCount:z,impressionGoal:M},children:"So far it’s been shown to [impressionCount] out of [impressionGoal] people. All sales are final, so this will not refund your purchase."})}),s]}):n&&x?.igniteTransaction?.blazedByCredit?t("[Blaze] A post that was blazed using a premium credit is being extinguished - perk returned message","Your post will be removed from the Blaze moderation queue. As a Premium subscriber, you'll get your Blaze Perk back for this month."):/*#__PURE__*/(0,c.jsx)(S.Ay,{children:"Your post will be removed from the Blaze moderation queue and a full refund of your payment will be issued."}):e?B?/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored owned post is being extinguished - intro message (sponsored by other user)",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:P,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${P.name}`},children:"You can extinguish the remaining campaign initiated by [link][blogName][/link] and we’ll stop promoting your post across Tumblr."})}),/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored owned post is being extinguished - campaign performance message (sponsored by other user)",params:{impressionCount:z,impressionGoal:M},children:"So far it’s been shown to [impressionCount] out of [impressionGoal] people."})}),s]}):/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A pending sponsored owned post is being extinguished - intro message (sponsored by other user)",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:P,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${P.name}`},children:"Campaign initiated by [link][blogName][/link] will be removed from moderation queue and the post will not be promoted across Tumblr."}):B?/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored non-owned post is being extinguished - intro message",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:w,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${w.name}`},children:"You can extinguish the remaining campaign with [link][blogName]’s[/link] post and we’ll stop promoting this post across Tumblr."})}),/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"An approved sponsored non-owned post is being extinguished - campaign performance message",components:{br:/*#__PURE__*/(0,c.jsx)("br",{})},params:{impressionCount:z,impressionGoal:M},children:"So far it’s been shown to [impressionCount] out of [impressionGoal] people.[br/]All sales are final, so this will not refund your purchase."})}),s]}):/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A pending sponsored non-owned post is being extinguished - intro message",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:w,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${w.name}`},children:"Campaign with [link][blogName]’s[/link] post will be removed from the moderation queue, the post will not be promoted and a full refund of your payment will be issued."})})(),theme:"info",title:"",wrapperClassName:D.A.igniteAlert}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.igniteButtons,children:[p?/*#__PURE__*/(0,c.jsx)(a.A,{label:s("Done"),onClick:e,wrapperClassName:D.A.igniteSuccessButton,children:s("Done")}):/*#__PURE__*/(0,c.jsx)(a.A,{label:t("Confirmation button for extinguishing a blazed post","Yes, extinguish Blaze campaign"),onClick:()=>{(B?O:L)().then(()=>{b(null),u(!0)}).catch(()=>{b((0,V.X)((0,_.vf)(s)))})},wrapperClassName:D.A.extinguishConfirmButton,children:t("Confirmation button for extinguishing a blazed post","Yes, extinguish Blaze campaign")}),p?/*#__PURE__*/(0,c.jsx)("div",{}):/*#__PURE__*/(0,c.jsx)(a.A,{label:s("No, continue campaign"),onClick:e,wrapperClassName:D.A.extinguishCancelButton,children:s("No, continue campaign")})]})]})})};var G=s(74059),$=/*#__PURE__*/s.n(G),q=s(71273),Q=s(52017),K=s(28230),Y=s(1258);async function X(e,t){let{country:s,language:i,tags:n,tumblelog_uuid:o,post_id:a}=t,{response:{availableImpressions:r}}=await e("/v2/ignite/forecast",{queryParams:{tumblelog_uuid:o,post_id:a,country:s,language:i,tags:n?.join(",")}});return{availableImpressions:r}}function J(e,t){let{apiFetch:s}=(0,g.Us)();return(0,m.I)({queryKey:["ignite-forecast",t],queryFn:()=>X(s,t),refetchOnWindowFocus:!1,staleTime:1/0,enabled:e})}var Z=s(72591),ee=s(72991),et=s(48605),es=s(79184),ei=s(25183),en=s(32063),eo=s(27699),ea=s(90937),er=s(86619),el=s(43776),ed=s(89972),ec=s(63176);let eh={avatarWrapper:"RyfGF",popoverWrapper:"xP9Ip",dropdownBtnContainer:"ebil_",popoverBaseContainer:"Aew3t",popoverContainer:"Zo900",blogSelectorPopover:"wLIxd",dropdownItem:"t6PAt",blogSelectorItem:"DKjfg",blogSelectorTextWrapper:"_8DeZd",blogSelectorBlogName:"pv2zo",blogSelectorBlogTitle:"kR4k3",blogSelectorButtonLabel:"k0Bm3",selectionLabel:"hO4Gs",buttonSelected:"kEGuS"},ep=({blogs:e,onSelection:t})=>/*#__PURE__*/(0,c.jsx)("div",{className:eh.blogSelectorPopover,role:"listbox",children:e?.map(e=>/*#__PURE__*/c.jsxs(ea.A,{className:$()(eh.dropdownBtnContainer,eh.blogSelectorItem),label:e.name,onClick:()=>t(e),children:[/*#__PURE__*/c.jsx(eo.A,{avatarShape:el.b.Circle,dimension:36,imageResponse:e.avatar,isLink:!1,name:e.name,showBlogCard:!1,wrapperClassName:eh.avatarWrapper}),/*#__PURE__*/c.jsxs("span",{className:eh.blogSelectorTextWrapper,children:[/*#__PURE__*/c.jsx("span",{className:eh.blogSelectorBlogName,children:e.name}),/*#__PURE__*/c.jsx("span",{className:eh.blogSelectorBlogTitle,children:e.title})]})]},e.uuid))}),eu=({initialBlog:e,blogs:t,onSelection:s,label:i})=>{let[n,o]=(0,f.useState)(!1),a=()=>o(e=>!e);return/*#__PURE__*/(0,c.jsxs)("div",{className:eh.blogSelector,children:[/*#__PURE__*/(0,c.jsx)("span",{className:eh.selectionLabel,children:i}),/*#__PURE__*/(0,c.jsx)("div",{className:eh.popoverContainer,children:t.length>1?/*#__PURE__*/(0,c.jsx)(er.Ay,{baseContainerClassName:eh.popoverBaseContainer,component:/*#__PURE__*/(0,c.jsx)(ep,{blogs:t,onSelection:s}),height:"auto",isOpen:n,maxWidth:328,popoverWrapperClassName:eh.popoverWrapper,position:ed.$x.BottomStart,targetWrapperDisplayBlock:!0,toggle:a,usePortals:!0,width:"calc(100% - 48px)",children:/*#__PURE__*/(0,c.jsxs)(ec.A,{className:n?eh.buttonSelected:eh.buttonDeselected,isSelected:n,label:i,onClick:a,children:[/*#__PURE__*/(0,c.jsx)(eo.A,{avatarShape:el.b.Circle,dimension:24,imageResponse:e.avatar,isLink:!1,name:e.name,showBlogCard:!1,wrapperClassName:eh.avatarWrapper}),/*#__PURE__*/(0,c.jsx)("span",{className:eh.blogSelectorButtonLabel,children:e.name})]})}):/*#__PURE__*/(0,c.jsxs)(ec.A,{hideCaret:!0,label:i,children:[/*#__PURE__*/(0,c.jsx)(eo.A,{avatarShape:el.b.Circle,dimension:24,imageResponse:e.avatar,isLink:!1,name:e.name,showBlogCard:!1,wrapperClassName:eh.avatarWrapper}),/*#__PURE__*/(0,c.jsx)("span",{className:eh.blogSelectorButtonLabel,children:e.name})]})})]})};var em=s(79347);let eg={forecastIndicatorContainer:"XKw_n",forecastedImpressionsLabel:"rGgIn",infoCircle:"QLdrl"};function eb(e){let{_c:t,_getLocaleNumberString:s}=(0,g.Us)(),{showInfoBubble:i=!1,onInfoBubbleClick:n,forecastedImpressions:o}=e;return/*#__PURE__*/(0,c.jsxs)("div",{className:eg.forecastIndicatorContainer,children:[/*#__PURE__*/(0,c.jsx)("div",{className:eg.forecastedImpressionsLabel,children:t("Information about forecasted impressions","Available audience: %1$s",[s(o,"short")])}),i&&/*#__PURE__*/(0,c.jsx)("div",{className:eg.infoCircle,children:/*#__PURE__*/(0,c.jsx)(em.A,{colors:{primary:z.transparentBlack40,background:z.white},onClick:n,size:{width:16,height:16}})})]})}var ex=s(53306),ev=s(17452),ef=s(13256),ey=s(20311),ej=s(66034),eC=s(21368),ew=s(47766),eA=s(96723),ek=(0,ej.ab)(function(e){var{store:t}=e,s=(0,ew.YG)(e,["store"]);let i=(0,f.useContext)(ey.oL),n=(0,eC.Bi)(s.id);return(0,eC.UQ)(()=>(null==i||i(n),()=>null==i?void 0:i(void 0)),[i,n]),s=(0,ew.IA)({id:n},s),(0,eA.HR)(s)});(0,ej.Rf)(function(e){let t=ek(e);return(0,ej.n)("p",t)});var eN=(0,ej.ab)(function(e){return e=ek(e)}),eS=(0,ej.Rf)(function(e){let t=eN(e);return(0,ej.n)("p",t)});let eI={infoIconContainer:"X0kwN",withCircle:"snP5T",popover:"kX_oQ",popoverDescription:"gto4H"},eP=()=>{let{_c:e}=(0,g.Us)(),t=(0,ex.e)({placement:"bottom-start"}),s=t.useState("open");return/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(ev.X,{"aria-label":"Expand information on audience",store:t,children:/*#__PURE__*/(0,c.jsx)("div",{className:$()(eI.infoIconContainer,{[eI.withCircle]:s}),children:/*#__PURE__*/(0,c.jsx)(em.A,{colors:{primary:L().transparentBlack40,background:L().white},size:{width:16,height:16}})})}),/*#__PURE__*/(0,c.jsx)(ef.A,{className:eI.popover,store:t,children:/*#__PURE__*/(0,c.jsx)(eS,{className:eI.popoverDescription,children:e("Information about what audience size means w.r.t. our product Blaze in a collapsible info section","We define audience size by the number of people a post will reach. \n\nWe can’t guarantee we’ll hit the exact audience size every time, but we always do our best to get as close to the selected size as possible.")})})]})},eB={modalInfo:"sPb5P",buttonGroup:"o2DB9",button:"rZSv_",highlightButton:"x_pLk"},eT=e=>{let{_c:t}=(0,g.Us)(),{closeModal:s,onAdjustTargetingButtonClick:i,title:n,subtitle:o,hasSelectedImpressionsBundle:r}=e,{logEvent:l}=(0,ei.Ul)(),d=t("Button to adjust targeting for Blaze advertising package","Adjust targeting"),h=t("Button to keep the user's current targeting selection before choosing a Blaze advertising package","Keep my selection");return/*#__PURE__*/(0,c.jsxs)(A.A,{compact:!0,modalWrapperClass:"blazePackageLocked",onClose:s,title:n,children:[/*#__PURE__*/(0,c.jsx)("div",{className:eB.modalInfo,children:o}),/*#__PURE__*/(0,c.jsxs)("div",{className:eB.buttonGroup,children:[/*#__PURE__*/(0,c.jsx)(a.A,{className:$()(eB.button,eB.highlightButton),label:d,onClick:()=>{s(),l({eventName:y.R.BlazeDisabledPackageAdjustTargetingClicked}),i()},children:d}),r&&/*#__PURE__*/(0,c.jsx)(a.A,{className:eB.button,label:h,onClick:s,children:h})]})]})},eR=(e,t)=>void 0!==t&&parseInt(e.impressions)>t&&!e?.isPremium,eE=e=>e.length>0?Math.max(...e.map(e=>parseInt(e.impressions))):void 0,eM=(e,t)=>e.toSorted((e,t)=>parseInt(t.impressions)-parseInt(e.impressions)).find(e=>!eR(e,t)),ez=(e,t)=>e.every(e=>eR(e,t)),eL=function(e){let{_c:t,_t:s,_getLocaleNumberString:i,features:{enableTumblrPremium:n}}=(0,g.Us)(),[a,r]=(0,f.useState)(!1),l="BlazePayment",{post:d}=(0,C.gY)(),{logEvent:h}=(0,ei.Ul)(),p=d.canBlazeSingleUser??!0,{isAdmin:u}=(0,g.Us)(),{blogs:m,campaignOptions:b,dispatch:x,products:v,navigateToTargeting:j,forecastedImpressions:w}=e,A=v?eE(v):void 0,k=void 0!==w&&!!A&&A>w;(0,f.useEffect)(()=>(h({eventName:y.R.ScreenView,page:l,eventDetails:{is_admin:u}}),()=>{h({eventName:y.R.ScreenLeft,page:l,eventDetails:{is_admin:u}})}),[]),(0,f.useEffect)(()=>{v&&b.product&&eR(b.product,w)&&x({type:"setProduct",product:eM(v,w)})},[v,b.product,w,x]);let N=(0,f.useMemo)(()=>v?.map(e=>{let s=n&&!!e.isPremium;return{singleOptionClassName:s?D.A.freePremiumPerk:"",value:e.slug,isFreePremiumPerk:s,disabled:eR(e,w),children:/*#__PURE__*/c.jsxs("span",{className:D.A.radioInnerContainer,children:[/*#__PURE__*/c.jsxs("span",{className:D.A.description,children:[/*#__PURE__*/c.jsxs("span",{children:[/*#__PURE__*/c.jsx("span",{className:D.A.impressions,children:i(parseInt(e.impressions))}),/*#__PURE__*/c.jsx("span",{children:t("Unit for audience size of a Blaze product package (modal)","people")})]}),s&&/*#__PURE__*/c.jsx("span",{className:D.A.freePerkDescription,children:t("Subtitle for a free product in Blaze campaigns (modal)","Free with Premium")})]}),s&&/*#__PURE__*/c.jsx(es.A,{width:24}),/*#__PURE__*/c.jsx("span",{className:$()(D.A.price,{[D.A.freePremiumPerkPrice]:s}),children:/*#__PURE__*/c.jsx("b",{children:e.price})})]})}}),[v,w,i,t]);if(!v||!N||!N.length)return/*#__PURE__*/(0,c.jsx)(o.A,{message:s("No products found"),theme:"error",wrapperClassName:D.A.alert});let S=N.findIndex(e=>e.value===b.product?.slug),I=t("Label for blog selector in Blaze campaigns (modal)","Blaze it using");return/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[!p&&m&&/*#__PURE__*/(0,c.jsx)(eu,{blogs:m,initialBlog:b.blog||m[0],label:I,onSelection:e=>{x({type:"setBlog",blog:e})}}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.productsHeader,children:[/*#__PURE__*/(0,c.jsx)("span",{className:D.A.selectionLabel,children:t("Label for impression package selector in Blaze campaigns (modal)","Audience sizes")}),/*#__PURE__*/(0,c.jsx)(eP,{})]}),/*#__PURE__*/(0,c.jsx)(en.A,{className:D.A.igniteProductionOptions,groupLabel:s("Pricing"),name:"productSlug",onChange:e=>{eR(v[e],w)?(h({eventName:y.R.BlazeProductDisabledPackageClicked,eventDetails:{disabled_package_identifier:v[e].slug,is_admin:u}}),r(!0)):x({type:"setProduct",product:v[e]})},optionClassName:D.A.igniteProductOption,options:N,selectedOptionIndex:S}),a&&/*#__PURE__*/(0,c.jsx)(eT,{closeModal:()=>r(!1),hasSelectedImpressionsBundle:!!b.product,onAdjustTargetingButtonClick:j,subtitle:t("Information about how to adjust targeting for a Blaze campaign that is too narrow","Try expanding your campaign audience by adjusting your audience criteria."),title:t("Heading to inform user that the targeting options for a Blaze campaign they selected is too narrow","Targeting too narrow")}),k&&/*#__PURE__*/(0,c.jsx)(eb,{forecastedImpressions:w,onInfoBubbleClick:()=>{r(!0)},showInfoBubble:!0})]})};var eD=s(86115);async function eO(e,t){let{response:{tags:s}}=await e("/v2/ignite/tags",{queryParams:{q:t}});return{tags:s}}function eF(e,t){let{apiFetch:s}=(0,g.Us)();return(0,m.I)({queryKey:["ignite-tags",t],queryFn:()=>eO(s,t),refetchOnWindowFocus:!1,staleTime:5*eD.g.Minute,enabled:e})}let eW=({label:e,initialOption:t,options:s,onSelection:i,onOpen:n,popoverElement:o})=>{let[r,l]=(0,f.useState)(!1),d=()=>{r||n?.(),l(e=>!e)},h=o||(()=>/*#__PURE__*/(0,c.jsx)("div",{role:"listbox",children:s?.map((e,t)=>/*#__PURE__*/c.jsx(ea.A,{className:D.A.dropdownBtnContainer,isWrappingButton:!0,children:/*#__PURE__*/c.jsx(a.A,{className:D.A.dropdownBtnInner,label:e.description,onClick:()=>i?.(e),children:e.description})},t))}));return/*#__PURE__*/(0,c.jsx)("div",{className:D.A.popoverContainer,children:/*#__PURE__*/(0,c.jsx)(er.Ay,{baseContainerClassName:D.A.popoverBaseContainer,component:h(),isOpen:r,maxHeight:"40vh",maxWidth:328,popoverWrapperClassName:D.A.popoverWrapper,position:ed.$x.BottomStart,targetWrapperDisplayBlock:!0,toggle:d,usePortals:!0,width:"calc(100% - 48px)",children:/*#__PURE__*/(0,c.jsx)(ec.A,{className:r?D.A.buttonSelected:D.A.buttonDeselected,isSelected:r,label:e,onClick:d,children:/*#__PURE__*/(0,c.jsx)("span",{className:D.A.selectorLabel,children:t.description})})})})};var eU=s(82427);let e_={campaignGoalList:"VUaL_",dropdownBtnContainer:"tObXK",dropdownBtnInner:"rdwxF",campaignGoalDescription:"HMTsP",campaignGoalSubtitle:"l3NE9"},eV=({options:e,onSelection:t})=>{let{_c:s}=(0,g.Us)(),i={engagement:{subtitle:s("Subtitle for engagement goal when creating a Blaze campaign","Blaze your way to more likes, comments, shares, and clicks.")},follow:{subtitle:s("Subtitle for follow goal when creating a Blaze campaign","Find your people—and grow your communities")},sales:{subtitle:s("Subtitle for sales goal when creating a Blaze campaign","Blaze your way to more business.")}};return/*#__PURE__*/(0,c.jsx)("div",{className:e_.campaignGoalList,role:"listbox",children:e?.map(e=>e.key in i==!1?null:/*#__PURE__*/c.jsx(ea.A,{className:e_.dropdownBtnContainer,isWrappingButton:!0,children:/*#__PURE__*/c.jsxs(a.A,{className:e_.dropdownBtnInner,label:e.description,onClick:()=>t(e),children:[/*#__PURE__*/c.jsx("div",{className:e_.campaignGoalIcon,children:/*#__PURE__*/c.jsx(eU.R,{goal:e.key})}),/*#__PURE__*/c.jsxs("div",{className:e_.campaignGoalTextWrapper,children:[/*#__PURE__*/c.jsx("div",{className:e_.campaignGoalDescription,children:e.description}),/*#__PURE__*/c.jsx("div",{className:e_.campaignGoalSubtitle,children:i[e.key].subtitle})]})]})},e.key))})},eH={ctaButtonSelectionWrapper:"t_hPc",ctaButtonPill:"Kh31R",selected:"jdv6J"};function eG(e){let{ctaButtonOptions:t,onClick:s,selectedCTAButtonKey:i}=e;return/*#__PURE__*/(0,c.jsx)("div",{className:$()(eH.ctaButtonSelectionWrapper),children:t?.map(e=>/*#__PURE__*/c.jsx(a.A,{className:$()(eH.ctaButtonPill,{[eH.selected]:e.key===i}),onClick:()=>s(e.key),children:e.description},e.key))})}var e$=s(28469);let eq={urlInputWrapper:"xjnUC",urlInput:"oV1aS",error:"LYqXD",errorText:"gRH0R"};function eQ(e){let{onChange:t,ctaUrl:s}=e,{_c:i}=(0,g.Us)(),n=s&&!(0,e$.A)(s);return/*#__PURE__*/(0,c.jsxs)("div",{className:eq.urlInputWrapper,children:[/*#__PURE__*/(0,c.jsx)("input",{className:$()(eq.urlInput,{[eq.error]:n}),onChange:({target:e})=>t(e.value),placeholder:i("Placeholder for CTA URL input","Your store or product web address"),value:s}),n&&/*#__PURE__*/(0,c.jsx)("div",{className:eq.errorText,children:i("Error message for invalid user URL input. This refers to the sales URL for a Tumblr Blaze Campaign","This is not a valid web address")})]})}let eK={forecastLoader:"LzrSn",targetingWrapper:"Ek0jg",targetingError:"VVL75",infoIcon:"B_5sb",selectionLabel:"eWQxY"};var eY=s(71288),eX=s(90657),eJ=s(71891),eZ=s(46302),e0=s(19869),e1=s(21331),e6=(0,ej.ab)(function(e){return e=(0,e1.c)(e)}),e2=(0,ej.Rf)(function(e){let t=e6(e);return(0,ej.n)("h1",t)});function e4(e){let{_c:t}=(0,g.Us)(),{onTagClick:s,isLoadingTags:i,tags:n,popoverStore:o,query:r,maxTagsReached:l,maxSelectedTags:d}=e,h=n?.length===0,p=!i&&!h&&!l;return/*#__PURE__*/(0,c.jsxs)(ef.A,{autoFocusOnHide:!1,autoFocusOnShow:!1,className:$()(D.A.popoverWrapper,D.A.searchBoxPopover,{[D.A.isShowingInfoText]:!p}),gutter:12,sameWidth:!0,store:o,children:[l&&/*#__PURE__*/(0,c.jsx)("div",{className:D.A.emptyResult,children:t("Message for when the user has added the maximum number of tags","You have reached the maximum number of %1$s tags that can be targeted.",[d.toString()])}),!l&&i&&/*#__PURE__*/(0,c.jsx)("div",{className:D.A.searchBoxPopoverLoader,children:/*#__PURE__*/(0,c.jsx)(K.A,{color:z.transparentBlack60,small:!0})}),!l&&h&&""!==r&&/*#__PURE__*/(0,c.jsx)("div",{className:D.A.emptyResult,children:t("Message for when no tags match a query",'"%1$s" is not trending yet, we\'re working on adding more tags soon.',[r])}),!l&&h&&""===r&&/*#__PURE__*/(0,c.jsx)("div",{className:D.A.emptyResult,children:t("Message for when there are no more trending tags available to choose for targeting","No more trending tags available, we're working on adding more tags soon.")}),p&&/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(e2,{className:D.A.searchBoxPopoverHeading,children:""===r?t("Heading for a dropdown list of popular tags","Trending tags"):t("Heading for a dropdown list of tags that match a query by user","Matching tags")}),/*#__PURE__*/(0,c.jsx)("div",{className:D.A.popoverContents,role:"listbox",children:n?.slice(0,100)?.map(e=>/*#__PURE__*/c.jsx(ea.A,{className:D.A.dropdownBtnContainer,isWrappingButton:!0,children:/*#__PURE__*/c.jsx(a.A,{className:D.A.dropdownBtnInner,label:e,onClick:()=>s(e),role:"option",children:e})},e))})]})]})}let e5={tagsEditor:"IgP1e",editorWrap:"Tn4eg",targetingTag:"Jsugk",targetingTagInner:"rIHzD",editor:"sP9AB",searchBoxAlert:"JyzY3",popoverContainer:"LScGv"};function e9(e){let{onChange:t,useSuggestedTagsQuery:s,textareaLabel:i,placeholderText:n,selectedTags:o,maxSelectedTags:a=30}=e,r=(0,f.useCallback)(e=>{t(e)},[t]),[l,d]=(0,f.useState)(""),{logEvent:h}=(0,ei.Ul)(),[p,u]=(0,f.useState)(""),[m,b]=(0,f.useState)(""),{_c:x,isAdmin:v}=(0,g.Us)(),{data:j,isPending:C}=s(!0,l),w=(0,ex.e)({placement:"top-start"}),A=(0,f.useRef)(null),k=(0,f.useRef)(null),N=(0,f.useRef)(null),S=(0,eZ.A)(d,200);(0,f.useEffect)(()=>{j?.tags&&0===j.tags.length&&h({eventName:y.R.BlazeTagTargetingSearchFailed,eventDetails:{is_admin:v,tag:l}})},[j]);let I=(0,f.useCallback)(e=>{e=e.toLowerCase(),o.includes(e)?b(x("Alert text for when the same tag has already been added","#%1$s has already been added.",[e])):o.length>=a||e&&j?.tags?.includes(e)&&(r([...o,e]),u(""),d(""))},[x,j?.tags,o,r,a]);return/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsxs)("div",{className:e5.popoverContainer,onClick:()=>{h({eventName:y.R.BlazeTargetingTagsContainerClicked,eventDetails:{is_admin:v}}),A.current?.focus()},onKeyDown:()=>{A.current?.focus()},role:"textbox",tabIndex:0,children:[/*#__PURE__*/(0,c.jsx)(eY.d,{"aria-label":"Expand list of tags matching search query",store:w,children:/*#__PURE__*/(0,c.jsxs)("div",{className:e5.tagsEditor,ref:N,children:[/*#__PURE__*/(0,c.jsx)(eJ.A,{innerTagClassName:e5.targetingTagInner,onChange:e0.A,onChangeError:e0.A,onDragEnd:e=>{let{oldIndex:t,newIndex:s}=e,i=[...o],n=i.splice(t,1);i.splice(s,0,n[0]),r(i),k.current?.unselectAnyTags(),A?.current?.focus()},onFocus:e0.A,onUnfocusLastTag:()=>A?.current?.focus(),ref:k,removeButtonColor:L().black,removeTagByIndex:e=>{r(o.filter((t,s)=>s!==e)),A?.current?.focus()},tagClassName:e5.targetingTag,tagIsNonEditable:!0,tags:o}),/*#__PURE__*/(0,c.jsx)("span",{className:e5.editorWrap,"data-value":p,children:/*#__PURE__*/(0,c.jsx)("textarea",{"aria-label":i,className:e5.editor,onChange:e=>{b(""),u(e.target.value),S(e.target.value.toLowerCase())},onFocus:()=>{w.setOpen(!0)},onKeyDown:e=>{(e.key===eX.qW.Enter||e.key===eX.qW.Tab)&&(e.preventDefault(),I(p)),e.key!==eX.qW.Backspace||p||r(o.slice(0,-1))},placeholder:n,ref:A,rows:1,value:p})})]})}),/*#__PURE__*/(0,c.jsx)(e4,{isLoadingTags:C,maxSelectedTags:a,maxTagsReached:o.length>=a,onTagClick:e=>{b(""),I(e),A?.current?.focus()},popoverStore:w,query:l,tags:""===l?j?.tags?.filter(e=>!o.includes(e)):j?.tags})]}),m&&/*#__PURE__*/(0,c.jsx)("span",{className:e5.searchBoxAlert,role:"alert",children:m})]})}function e3(e){let{_c:t,isAdmin:s}=(0,g.Us)(),{logEvent:i}=(0,ei.Ul)(),{audienceOptions:n,campaignGoalOptions:o,campaignOptions:a,ctaButtonOptions:r,dispatch:l,languageOptions:d,post:h,forecastedImpressions:p,setForecastedImpressions:u,products:m}=e,{features:{blazeGoalSelection:b,blazeGoalSelectionV2:x}}=(0,g.Us)(),v=m?eE(m):void 0,j=t("Label for selecting tags for Blaze campaign targeting","Targeted tags (optional)"),C=t("Input to add tags for tag targeting on Blaze","Blaze Tags input"),w=t("Option for targeting Blaze campaigns","Add #tags"),A=t("Label for language selector in Blaze campaigns (modal)","Audience Language"),k=t("Label for selecting a country for Blaze campaigns (modal)","Country"),N=t("Label for selecting a campaign goal for Blaze campaigns (modal)","Campaign Goal"),S=t("Label for selecting a Call to action button for Blaze campaigns (modal)","Call to action button"),{isFetching:I,data:P,isError:B,isPaused:T}=J(!!h.blog.uuid,{tumblelog_uuid:h.blog.uuid||"",post_id:h.id.toString(),country:a.audience?.key,language:a.language?.key,tags:a.tags}),R=(B||T)&&!I;return(0,f.useEffect)(()=>{P&&u(P?.availableImpressions)},[P]),/*#__PURE__*/(0,c.jsxs)("div",{className:eK.targetingWrapper,children:[/*#__PURE__*/(0,c.jsx)(Y.Ay,{page:"BlazeTargeting"}),I&&/*#__PURE__*/(0,c.jsx)("div",{className:eK.forecastLoader,children:/*#__PURE__*/(0,c.jsx)(K.A,{color:z.transparentBlack60,small:!0})}),!R&&void 0!==p&&!!v&&!I&&v>p&&/*#__PURE__*/(0,c.jsx)(eb,{forecastedImpressions:p}),R&&/*#__PURE__*/(0,c.jsxs)("div",{className:eK.targetingError,role:"status",children:[/*#__PURE__*/(0,c.jsx)("div",{className:eK.infoIcon,children:/*#__PURE__*/(0,c.jsx)(em.A,{colors:{primary:L().betamaxOrange,background:"white"}})}),/*#__PURE__*/(0,c.jsx)("span",{children:t("Error message displayed to user when our forecasting API call fails when a user is selecting targeting options for a Blaze campaign","We encountered a problem. Please check your internet connection and try again.")})]}),b&&o?.length&&a.campaignGoal&&/*#__PURE__*/(0,c.jsxs)("div",{children:[/*#__PURE__*/(0,c.jsx)("span",{className:eK.selectionLabel,children:N}),/*#__PURE__*/(0,c.jsx)(eW,{initialOption:a.campaignGoal,label:N,onOpen:()=>{i({eventName:y.R.BlazeGoalOptionsDropdownClicked,eventDetails:{is_admin:s}})},popoverElement:()=>/*#__PURE__*/(0,c.jsx)(eV,{onSelection:e=>l({type:"setCampaignGoal",campaignGoal:e}),options:o??[]})})]}),a.campaignGoal?.key==="sales"&&x&&/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(eQ,{ctaUrl:a.ctaUrl,onChange:e=>l({type:"setCTAUrl",ctaUrl:e})}),/*#__PURE__*/(0,c.jsxs)("div",{children:[/*#__PURE__*/(0,c.jsx)("span",{className:eK.selectionLabel,children:S}),/*#__PURE__*/(0,c.jsx)(eG,{ctaButtonOptions:r,onClick:e=>l({type:"setCTAButtonKey",ctaButtonKey:e}),selectedCTAButtonKey:a.ctaButtonKey})]})]}),n?.length&&a.audience&&/*#__PURE__*/(0,c.jsxs)("div",{children:[/*#__PURE__*/(0,c.jsx)("span",{className:eK.selectionLabel,children:k}),/*#__PURE__*/(0,c.jsx)(eW,{initialOption:a.audience,label:k,onOpen:()=>{i({eventName:y.R.BlazeTargetingLocationDropdownClicked,eventDetails:{is_admin:s}})},onSelection:e=>l({type:"setAudience",audience:e}),options:n})]}),d?.length&&a.language&&/*#__PURE__*/(0,c.jsxs)("div",{children:[/*#__PURE__*/(0,c.jsx)("span",{className:eK.selectionLabel,children:A}),/*#__PURE__*/(0,c.jsx)(eW,{initialOption:a.language,label:A,onOpen:()=>{i({eventName:y.R.BlazeTargetingLanguageDropdownClicked,eventDetails:{is_admin:s}})},onSelection:e=>l({type:"setLanguage",language:e}),options:d})]}),/*#__PURE__*/(0,c.jsxs)("div",{children:[/*#__PURE__*/(0,c.jsx)("span",{className:eK.selectionLabel,children:j}),/*#__PURE__*/(0,c.jsx)(e9,{onChange:e=>l({type:"setTags",tags:e}),placeholderText:w,selectedTags:a.tags??[],textareaLabel:C,useSuggestedTagsQuery:eF})]})]})}let e8=e=>{var t;return!!(e.campaignGoal?.key!=="sales"||(t=e.ctaUrl,(0,e$.A)(t)))},e7=({onIgniteCheckoutButtonClick:e,campaignOptions:t,dispatch:s,toggle:i,isRedirectingToPayment:n,alert:r,forecastedImpressions:l,setForecastedImpressions:d})=>{let{_c:h,logEvent:p,isAdmin:u,features:{blazeGoalSelectionV2:m}}=(0,g.Us)(),{post:b}=(0,C.gY)(),{basePage:j}=to(),{ref:w,inView:k}=(0,Z.Wx)(),[N,I]=(0,f.useState)(!1),{data:P}=(0,v.c)(),{isPending:B,data:T}=x(!0,b.blog.uuid),{canBlazeSingleUser:R=!0}=b,E=P?.filter(({isPrivateChannel:e})=>!e),M=B||!E,[L,O]=(0,f.useState)("targeting"),F=["products","intro"].includes(L),{isPending:W,isError:U}=J(!!b.blog.uuid,{tumblelog_uuid:b.blog.uuid||"",post_id:b.id.toString(),country:t.audience?.key,language:t.language?.key,tags:t.tags}),_=!e8(t),V=W||U||_&&m,H=()=>{p({eventName:y.R.BlazeLearnMoreTapped,eventDetails:{is_admin:u},page:"BlazePayment"})};(0,f.useEffect)(()=>{I(k)},[k]);let G=/*#__PURE__*/(0,c.jsx)(a.A,{className:D.A.textButton,label:h("Label for a button to navigate back to intro section of Blaze modal","Learn more"),onClick:()=>{O("intro"),H()}});return(0,f.useEffect)(()=>{"products"===L&&p({eventName:y.R.BlazePaymentShown,eventDetails:{is_admin:u,disabled_package_identifiers:T?.products?.filter(e=>eR(e,l))},page:j})},[L]),/*#__PURE__*/(0,c.jsx)(A.A,{compact:!0,goBackButton:/*#__PURE__*/(0,c.jsx)(q._q,{size:{width:12,height:12}}),modalWrapperClass:"blazeNewDesign",onClose:()=>{"products"===L&&p({eventName:y.R.BlazePaymentCanceled,eventDetails:{is_admin:u},page:j}),i()},onGoBack:F?()=>O("targeting"):void 0,showClose:"intro"!==L,theme:A.v.Rounded,title:"",children:/*#__PURE__*/(0,c.jsxs)(ee.s.Provider,{value:null,children:[M&&/*#__PURE__*/(0,c.jsx)("div",{className:D.A.loadingOverlay,children:/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.loadingContainer,children:[/*#__PURE__*/(0,c.jsx)("p",{className:D.A.loadingText,children:h("Blaze modal - loading indicator","Loading products...")}),/*#__PURE__*/(0,c.jsx)(K.A,{centerOrientation:"horizontal",color:z.paletteGray60})]})}),/*#__PURE__*/(0,c.jsxs)("div",{className:$()(D.A.container,D.A.newDesign,{[D.A.loading]:M}),children:[/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.header,children:[/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.fireBackgroundContainer,children:[/*#__PURE__*/(0,c.jsx)("div",{className:D.A.blazeModalTitle,children:h("Header for Blaze product modal","Promote with Blaze")}),/*#__PURE__*/(0,c.jsx)("div",{className:D.A.fireBackground})]}),r&&/*#__PURE__*/(0,c.jsx)(o.A,{message:r,theme:"error",wrapperClassName:D.A.alert}),/*#__PURE__*/(0,c.jsx)("h3",{className:D.A.title,children:(e=>{switch(e){case"intro":if(R)return h("Ignite modal title when Blazing your own post","Set your post ablaze.");return h("Ignite modal title when Blazing other people post","Set a post that belongs to %1$s ablaze.",[b.blogName]);case"targeting":if(R)return h("Ignite modal title when on targeting screen","Target your post so it reaches the right audience.");return h("Ignite modal title when on targeting screen and Blazing other people post","Target %1$s's post so it reaches the right audience.",[b.blogName]);case"products":return h("Ignite modal title when on product selection screen","Choose your desired audience size.")}})(L)}),/*#__PURE__*/(0,c.jsx)("div",{className:$()(D.A.subtitleContainer,{[D.A.otherPeoplePost]:!R}),children:/*#__PURE__*/(0,c.jsx)("p",{className:D.A.subtitle})})]}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.body,children:[!M&&"products"===L&&/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(eL,{blogs:E,campaignOptions:t,dispatch:s,forecastedImpressions:l,navigateToTargeting:()=>O("targeting"),products:T?.products,setForecastedImpressions:d}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.infoText,children:[/*#__PURE__*/(0,c.jsx)("span",{children:h("Disclaimer for Blaze ad campaigns","All audience sizes are estimated.")}),/*#__PURE__*/(0,c.jsx)("span",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{components:{helpLink:/*#__PURE__*/(0,c.jsx)("a",{href:"https://www.tumblr.com/support",onClick:()=>{p({eventName:y.R.BlazeHelpTapped,eventDetails:{is_admin:u},page:"BlazePayment"})},target:"_blank"}),learnMoreLink:G},children:"[learnMoreLink]Learn more[/learnMoreLink] or get [helpLink]help[/helpLink] with Blaze."})})]})]}),"targeting"===L&&/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(e3,{audienceOptions:T?.audienceOptions,campaignGoalOptions:T?.campaignGoalOptions,campaignOptions:t,ctaButtonOptions:T?.ctaButtonOptions,dispatch:s,forecastedImpressions:l,languageOptions:T?.languageOptions,post:b,products:T?.products,setForecastedImpressions:d}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.ctaCard,children:[/*#__PURE__*/(0,c.jsx)("div",{className:D.A.ctaHashtagIcon,children:/*#__PURE__*/(0,c.jsx)(Q.uGU,{})}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.ctaText,children:[/*#__PURE__*/(0,c.jsx)("div",{className:D.A.ctaHeader,children:h("CTA header in Blaze modal to use tag targeting","Want more engagement?")}),/*#__PURE__*/(0,c.jsx)("div",{className:D.A.ctaDescription,children:h("CTA description in Blaze modal to use tag targeting","Tags can give you up to 60% boost!")})]})]}),/*#__PURE__*/(0,c.jsx)("div",{className:D.A.ctaLearnMore,children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"CTA to learn more about Blaze in Blaze modal",components:{learnMoreLink:G},children:"New to Blaze? [learnMoreLink]Learn more[/learnMoreLink]"})})]})]}),"intro"===L&&/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(Y.Ay,{page:"BlazeAbout"}),/*#__PURE__*/(0,c.jsx)(et.h,{})]}),"intro"!==L&&/*#__PURE__*/(0,c.jsx)("div",{className:$()(D.A.fixedFooter,{[D.A.shadow]:!N}),children:/*#__PURE__*/(0,c.jsx)("div",{className:D.A.igniteButtons,children:(s=>{if("products"===s){if(!T?.products?.length)return;return/*#__PURE__*/(0,c.jsx)(a.A,{className:$()(D.A.igniteSuccessButtonInner),disabled:n||ez(T.products,l),label:h("Confirmation that the user wants to proceed with Blaze","Blaze"),onClick:e,wrapperClassName:D.A.igniteSuccessButton,children:n?/*#__PURE__*/(0,c.jsx)(K.A,{centerOrientation:"horizontal",color:z.paletteGray60,small:!0}):h("Confirmation that the user wants to proceed with Blaze","Blaze")})}if("targeting"===s){let e=h("Confirmation that a user wants to go to the next step in the blaze modal process","Next");return/*#__PURE__*/(0,c.jsx)(a.A,{className:D.A.igniteSuccessButtonInner,disabled:V,label:e,onClick:()=>{p({eventName:y.R.BlazeTagTargetingTagSelectionSaved,eventDetails:{is_admin:u,num_tags:t.tags?.length}}),O("products")},wrapperClassName:D.A.igniteSuccessButton,children:e})}})(L)})}),/*#__PURE__*/(0,c.jsx)("div",{ref:w})]})]})})},te=()=>{let{_c:e}=(0,g.Us)(),{post:{blog:t,isSingleUserBlaze:s=!0,userIsBlazee:i,blazerBlog:n}}=(0,C.gY)();return/*#__PURE__*/(0,c.jsx)(o.A,{icon:/*#__PURE__*/(0,c.jsx)(N,{}),message:/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A post is being sponsored for X views (Blaze is the name of the product) introduction message",children:"It may take up to 24 hours for the post to be moderated and queued up for delivery."})}),(()=>{let e=!s&&i&&n;return s?void 0:e?/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A post is being sponsored for X views (Blaze is the name of the product) notice when sponsored by other user",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:n,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${n.name}`},children:"Your post was Blazed by [link][blogName][/link] but you still have control over this campaign."})}):/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A post is being sponsored for X views (Blaze is the name of the product) notice for non-owned posts",components:{link:/*#__PURE__*/(0,c.jsx)(k.A,{blog:t,className:D.A.blogLinkMention,showBlogCard:!0})},params:{blogName:`@${t.name}`},children:"We’ve notified [link][blogName][/link] that you’ve Blazed their post. They might cancel or extinguish the campaign when it is active."})})})(),/*#__PURE__*/(0,c.jsx)("p",{children:/*#__PURE__*/(0,c.jsx)(S.Ay,{comment:"A post is being sponsored for X views (Blaze is the name of the product) email notification notice",children:"We’ll email you when that happens!"})})]}),theme:"warning",title:e("Blaze is the brand name - post is awaiting moderation","Blaze pending!"),wrapperClassName:D.A.igniteAlert})},tt=(e,t)=>{switch(t.type){case"setAudience":return{...e,audience:t.audience};case"setProduct":return{...e,product:t.product};case"setLanguage":return{...e,language:t.language};case"setCampaignGoal":return{...e,campaignGoal:t.campaignGoal};case"setBlog":return{...e,blog:t.blog};case"setTags":return{...e,tags:t.tags};case"setCTAUrl":return{...e,ctaUrl:t.ctaUrl};case"setCTAButtonKey":return{...e,ctaButtonKey:t.ctaButtonKey};default:return e}},ts={audience:void 0,product:void 0,language:void 0,campaignGoal:void 0,blog:void 0,tags:[],ctaButtonKey:void 0,ctaUrl:""},ti=function(e){let{_c:t,_t:s,apiFetch:i,logEvent:r,isAdmin:l,features:{enableTumblrPremium:d,blazeGoalSelection:m,blazeGoalSelectionV2:b}}=(0,g.Us)(),{post:k}=(0,C.gY)(),{id:N,slug:S,blogName:I,blog:{uuid:P},canBlazeSingleUser:B=!0,isBlazed:T,isBlazePending:R}=k,E=N.toString(),{toggle:M,isOpen:z}=e,[L,F]=(0,f.useState)(!1),[W,U]=(0,f.useState)(!1),[_,V]=(0,f.useState)(void 0),[G,$]=(0,f.useState)(null),{basePage:q}=to(),{data:Q}=x(z&&!T&&!R,P),{data:K}=(0,v.c)(),[Y,X]=(0,f.useReducer)(tt,ts);if((0,f.useEffect)(()=>{let e=K?.filter(({isPrivateChannel:e})=>!e);e?.length&&X({type:"setBlog",blog:e[0]})},[K]),(0,f.useEffect)(()=>{Q?.audienceOptions?.[0]&&X({type:"setAudience",audience:Q?.audienceOptions?.[0]}),Q?.languageOptions?.[0]&&X({type:"setLanguage",language:Q?.languageOptions?.[0]}),Q?.campaignGoalOptions?.[0]&&X({type:"setCampaignGoal",campaignGoal:Q?.campaignGoalOptions?.[0]}),Q?.ctaButtonOptions?.[0]&&X({type:"setCTAButtonKey",ctaButtonKey:Q?.ctaButtonOptions?.[0].key})},[Q]),(0,f.useEffect)(()=>{if(Q?.products?.length){let e=ez(Q.products,_)?void 0:Q?.products?.[0],t=Y.product||e;t&&X({type:"setProduct",product:t})}},[Q,_]),!z)return null;let J=async()=>{if($(null),U(!0),!Y.product||!Y.product.slug){$(s("Please select a product before proceeding")),U(!1);return}if(!B&&!Y.blog){$(s("Please select a blog before proceeding")),U(!1);return}try{let e=Y.audience?.key||"anyone",t=B?void 0:Y.blog,s=Y.language?.key||"any",i=m?Y.campaignGoal?.key||"engagement":"",n="",o=b&&Y.campaignGoal?.key==="sales"?Y.ctaUrl:"",a=b&&Y.campaignGoal?.key==="sales"?Y.ctaButtonKey:"";d&&Y.product?.slug==="blaze-premium-2500-impressions"?(n=await et(Y.product.slug,e,s,i,t,Y.tags,o,a),r({eventName:y.R.PremiumBlazePerkUsed,eventDetails:{package_identifier:Y.product?.slug,is_admin:l},page:q})):(n=await ee(Y.product.slug,e,s,i,t,Y.tags,o,a),r({eventName:y.R.BlazePaymentCompleted,eventDetails:{package_identifier:Y.product?.slug,is_admin:l},page:q})),window.location.assign(n)}catch{$(s("There was a problem redirecting to checkout")),U(!1),(0,w.NP)(E)}},Z=e=>`${window.location.origin}${B?(0,p.$G)({blogName:e?.name??I},"campaigns",E):(0,u.cm)({peeprBlogname:I,peeprPostId:E,peeprPostSlug:S})}`,ee=async(e,t,s,n,o,a,r,l)=>{let d=Z(o);return(0,j.Ay)(i).ignitePost({post_id:E,tumblelog_uuid:P,product_slug:e,redirect_url:d,audience:t,language:s,campaign_goal:n,from_tumblelog_uuid:o?.uuid,tags:a,cta_url:r,cta_button:l}).fetch().then(e=>{let{response:{url:t,transactionUuid:s}}=e;if(!t)throw Error("Cannot redirect to checkout");return(0,w.Tl)(E,{transactionUuid:s}),t})},et=async(e,s,o,a,r,l,d,c)=>(0,j.Ay)(i).ignitePostWithPremiumCredit({post_id:E,tumblelog_uuid:P,product_slug:e,audience:s,language:o,campaign_goal:a,from_tumblelog_uuid:r?.uuid,tags:l,cta_url:d,cta_button:c}).then(e=>{let{response:{transactionUuid:s}}=e;if(!e?.response?.transactionUuid)throw Error(t("Toast message when free blaze redemption fails","Oops, something went wrong. Please try again."));(0,w.Tl)(E,{transactionUuid:s});let i=Z(r);return(0,n.O)(i,{ignite_tid:s})});if(L)return/*#__PURE__*/(0,c.jsx)(H,{onClose:()=>{$(null),F(!1),M()}});if(T||R){let e=/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.helpText,children:[/*#__PURE__*/(0,c.jsx)("a",{href:"https://www.tumblr.com/support",onClick:()=>{r({eventName:y.R.BlazeModalHelpClicked})},target:"_blank",children:s("Help")}),"  •  ",/*#__PURE__*/(0,c.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5298854249367",onClick:()=>{r({eventName:y.R.BlazeModalFaqClicked})},target:"_blank",children:s("FAQs")})]});return/*#__PURE__*/(0,c.jsx)(A.A,{compact:!0,onClose:M,title:t("Blaze is the brand name here - sponsor a post","Tumblr Blaze"),children:/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[G&&/*#__PURE__*/(0,c.jsx)(o.A,{message:G,theme:"error",wrapperClassName:D.A.alert}),R&&/*#__PURE__*/(0,c.jsx)(te,{}),T&&/*#__PURE__*/(0,c.jsx)(O,{}),/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.modalFooter,children:[e,/*#__PURE__*/(0,c.jsxs)("div",{className:D.A.igniteButtons,children:[/*#__PURE__*/(0,c.jsx)(a.A,{label:s("Done"),onClick:M,wrapperClassName:D.A.igniteSuccessButton,children:s("Done")}),/*#__PURE__*/(0,c.jsx)(h,{disabled:!1,label:t("CTA label - for stopping a campaign from running.","Extinguish Campaign"),onClick:()=>{F(!0)}})]})]})]})})}return/*#__PURE__*/(0,c.jsx)(e7,{alert:G,campaignOptions:Y,dispatch:X,forecastedImpressions:_,isRedirectingToPayment:W,onIgniteCheckoutButtonClick:J,setForecastedImpressions:V,toggle:M})},tn=/*#__PURE__*/(0,f.createContext)({removePostOnExtinguish:!1,skipIntroStep:!1}),to=()=>(0,f.useContext)(tn),ta=function(e){let{toggleProductPopover:t,productPopoverIsOpen:s}=e;return/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[/*#__PURE__*/(0,c.jsx)(ti,{isOpen:s,toggle:t}),s&&/*#__PURE__*/(0,c.jsx)(i.A,{})]})}},48605:(e,t,s)=>{"use strict";s.d(t,{h:()=>C});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(11100),a=s(20928);let r=(0,a.Kk)("blaze-checkmark",{size:{width:57,height:56}}),l=(0,a.Kk)("blaze-community",{size:{width:57,height:56}}),d=(0,a.Kk)("blaze-fire",{size:{width:57,height:56}});var c=s(85191),h=s(94048),p=s(4613),u=s(43712),m=s(71273),g=s(36665),b=s(56040),x=s(63176);let v={buttonEllipseIdentifier:"W5NBP",selected:"Rgrzy",buttonTitle:"SN3pO",selectorButtonGroupContainer:"Xy88p",selectorButtonContainer:"xwAlz",selectorButton:"RSejs",buttonDescription:"QDKSS"};var f=s(60397);function y(e){let[t,s]=(0,g.useState)(0);return/*#__PURE__*/(0,f.jsx)("div",{className:v.selectorButtonGroupContainer,children:e.selectorButtonContentList.map((e,i)=>/*#__PURE__*/(0,f.jsxs)("div",{className:v.selectorButtonContainer,children:[/*#__PURE__*/(0,f.jsxs)(x.A,{className:v.selectorButton,iconDeselected:/*#__PURE__*/(0,f.jsx)(m.oj,{colors:{primary:b.transparentBlack60},size:{width:12,height:12}}),iconSelected:/*#__PURE__*/(0,f.jsx)(m.OH,{colors:{primary:b.transparentBlack60},size:{width:12,height:12}}),isSelected:t===i,label:"Expand section for "+e.title,onClick:()=>{i===t?s(-1):s(i)},children:[/*#__PURE__*/(0,f.jsx)("div",{className:n()(v.buttonEllipseIdentifier,{[v.selected]:t===i}),children:i+1}),/*#__PURE__*/(0,f.jsx)("div",{className:v.buttonTitle,children:e.title})]},e.title),t===i&&/*#__PURE__*/(0,f.jsx)("div",{className:v.buttonDescription,children:e.description})]},e.title))})}let j={iconsHeader:"enbwI",hasBlazeButton:"bsMAH",iconContainer:"pV1Zd",blazeIconSubtitle:"VHYIk",introSubheader:"C9hJo",introStepDescription:"h2o6n",introFooter:"x5SuW",introStepsContainer:"Bd_XU",introBlazeButton:"ri5eP"};function C(e){let{_c:t,_getLanguage:s,isAdmin:i,logEvent:a,wwwBaseUrl:m}=(0,p.Us)(),{showBlazeButton:g=!1,buttonLink:b}=e,{localization:x}=s(),v=(0,u.db)(x),C=[{title:t("Blaze intro first step title","Choose a post and the audience you want to promote it to with Blaze"),description:/*#__PURE__*/(0,f.jsxs)("ul",{className:j.introStepDescription,children:[/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide first step description","Click on the Blaze icon at the bottom of an original post you'd like to promote (you can't Blaze a reblog).")}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide first step description","Define your desired audience by selecting a country and language and adding some tags. Tag targeting ensures your post will reach the right audience.")}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide first step description","Select your desired audience size.")}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide first step description",'Click "Blaze" at the bottom, and you\'ll be directed to the checkout.')}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide first step description",'Confirm your payment details and click "Pay now."')})]})},{title:t("Blaze guide second step title","Our moderators will review your campaign"),description:/*#__PURE__*/(0,f.jsxs)("ul",{className:j.introStepDescription,children:[/*#__PURE__*/(0,f.jsx)("li",{children:/*#__PURE__*/(0,f.jsx)(c.Ay,{comment:"Blaze guide second step description",components:{guidelinesLink:/*#__PURE__*/(0,f.jsx)("a",{href:`${m}/policy/user-guidelines`,target:"_blank"})},children:"We moderate all content promoted via Blaze, checking it against our [guidelinesLink]User Guidelines[/guidelinesLink] to ensure the best experience for everyone."})}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide second step description","Moderation time depends on the amount of content pending review. Typically, you'll wait no longer than one business day, but that's not guaranteed. If it's taking too long, you always have the option to extinguish your post.")})]})},{title:t("Blaze guide third step title","Your post goes live  (more than ever)"),description:/*#__PURE__*/(0,f.jsxs)("ul",{className:j.introStepDescription,children:[/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide third step description","Once approved, your Blazed post will appear as a sponsored post on your chosen audience's feeds (the dashboard, search results, and community hubs) within a few minutes.")}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide third step description","Each Blazed post is shown to each person once, at most.")}),/*#__PURE__*/(0,f.jsx)("li",{children:t("Blaze guide third step description","If you change your mind, you can extinguish your Blazed post directly from the Blaze dashboard.")})]})}];return/*#__PURE__*/(0,f.jsxs)(f.Fragment,{children:[/*#__PURE__*/(0,f.jsxs)("div",{className:n()(j.iconsHeader,{[j.hasBlazeButton]:g}),children:[/*#__PURE__*/(0,f.jsxs)("div",{className:j.iconContainer,children:[/*#__PURE__*/(0,f.jsx)("div",{className:j.blazeIcon,children:/*#__PURE__*/(0,f.jsx)("span",{"aria-label":"Blaze Checkmark Icon",role:"img",children:/*#__PURE__*/(0,f.jsx)(r,{})})}),/*#__PURE__*/(0,f.jsx)("div",{className:j.blazeIconSubtitle,children:t("How to Blaze description","Select post to Blaze")})]}),/*#__PURE__*/(0,f.jsxs)("div",{className:j.iconContainer,children:[/*#__PURE__*/(0,f.jsx)("div",{className:j.blazeIcon,children:/*#__PURE__*/(0,f.jsx)("span",{"aria-label":"Blaze Community Icon",role:"img",children:/*#__PURE__*/(0,f.jsx)(l,{})})}),/*#__PURE__*/(0,f.jsx)("div",{className:j.blazeIconSubtitle,children:t("How to Blaze description","Choose Audience")})]}),/*#__PURE__*/(0,f.jsxs)("div",{className:j.iconContainer,children:[/*#__PURE__*/(0,f.jsx)("div",{className:j.blazeIcon,children:/*#__PURE__*/(0,f.jsx)("span",{"aria-label":"Blaze Fire Icon",role:"img",children:/*#__PURE__*/(0,f.jsx)(d,{})})}),/*#__PURE__*/(0,f.jsx)("div",{className:j.blazeIconSubtitle,children:t("How to Blaze description","Promote it with Blaze")})]})]}),g&&/*#__PURE__*/(0,f.jsx)(o.A,{as:"a",href:b,label:t("Button for starting the blaze process","Blaze"),role:"button",wrapperClassName:j.introBlazeButton,children:t("Button for starting the blaze process","Blaze")}),/*#__PURE__*/(0,f.jsx)("div",{className:j.introSubheader,children:t("Blaze intro subheader","Learn how Blaze works")}),/*#__PURE__*/(0,f.jsx)("div",{className:j.introStepsContainer,children:/*#__PURE__*/(0,f.jsx)(y,{selectorButtonContentList:C})}),/*#__PURE__*/(0,f.jsx)("div",{className:j.introFooter,children:/*#__PURE__*/(0,f.jsx)(c.Ay,{comment:"Blaze intro page footer",components:{faqLink:/*#__PURE__*/(0,f.jsx)("a",{href:`https://help.tumblr.com/hc/${v}/articles/5298854249367`,onClick:()=>{a({eventName:h.R.BlazeFAQTapped,eventDetails:{is_admin:i},page:"BlazeAbout"})},target:"_blank"})},children:"Want to learn more? Visit our [faqLink]FAQ page[/faqLink]"})})]})}},63176:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(11100),a=s(39977),r=s(56040),l=s(3659),d=s(60397);let c=({className:e,children:t,label:s,onClick:i,isSelected:c,hideCaret:h,iconSelected:p=/*#__PURE__*/(0,d.jsx)(a.qx,{colors:{primary:r.black},size:{width:12,height:12}}),iconDeselected:u=/*#__PURE__*/(0,d.jsx)(a.Q5,{colors:{primary:r.black},size:{width:12,height:12}})})=>/*#__PURE__*/(0,d.jsxs)(o.A,{className:n()(l.A.selector,e),label:s,onClick:i,role:"button",wrapperClassName:l.A.selectorButton,children:[/*#__PURE__*/(0,d.jsx)("span",{className:l.A.selectorWrapper,children:t}),!h&&/*#__PURE__*/(0,d.jsx)("span",{className:l.A.selectorCaret,children:c?p:u})]})},82427:(e,t,s)=>{"use strict";s.d(t,{R:()=>g});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(52017);let a=(0,s(20928).Kk)("follow",{size:{width:36,height:36}});var r=s(56040),l=/*#__PURE__*/s.n(r),d=s(47741),c=/*#__PURE__*/s.n(d);let h={blazeIcon:"gWDT8",salesIcon:"AZ5K5",engagementIcon:"vpC8N"};var p=s(60397);let u=()=>/*#__PURE__*/(0,p.jsx)("div",{className:n()(h.salesIcon,h.blazeIcon),children:/*#__PURE__*/(0,p.jsx)(o.zBc,{emptyIconColors:{primary:l().white}})}),m=()=>/*#__PURE__*/(0,p.jsx)("div",{className:n()(h.engagementIcon,h.blazeIcon),children:/*#__PURE__*/(0,p.jsx)(o.L3T,{emptyIconColors:{primary:l().white}})}),g=e=>{switch(e.goal){case"engagement":default:return/*#__PURE__*/(0,p.jsx)(m,{});case"follow":return/*#__PURE__*/(0,p.jsx)(a,{colors:{primary:c().colorBrandPurple,accent:l().white}});case"sales":return/*#__PURE__*/(0,p.jsx)(u,{})}}},95041:(e,t,s)=>{"use strict";s.d(t,{T:()=>n,_:()=>o});var i=s(36665);let n=/*#__PURE__*/(0,i.createContext)(void 0),o=()=>(0,i.useContext)(n)},11412:(e,t,s)=>{"use strict";s.d(t,{A:()=>q});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(74059),a=/*#__PURE__*/s.n(o),r=s(11100),l=s(36665),d=s(19974),c=s(87203);let h={container:"PuLtZ",slide:"eFULQ"};var p=s(60397);let u=({children:e,index:t=0})=>{let s=(0,l.useRef)(null);return"production"===d.A.Development&&l.Children.forEach(e,e=>{if("string"==typeof e.type||"Slide"!==e.type.name)throw Error("FullScreenSwipeableView works correctly only with FullScreenSwipeableView.Slide as direct children")}),(0,l.useEffect)(()=>{let e=(0,c.jq)();e&&s.current?.scrollTo&&s.current.scrollTo({left:t*e.innerWidth})},[t]),/*#__PURE__*/(0,p.jsx)("div",{className:h.container,ref:s,children:e})};u.Slide=({children:e})=>/*#__PURE__*/(0,p.jsx)("div",{className:h.slide,children:e});var m=s(23390),g=s(90657),b=s(26854),x=s(34653),v=s(95041),f=s(66512),y=s(83087),j=s(72591),C=s(56356),w=s(72991),A=s(19869),k=s(10936),N=s(18270),S=s(59348),I=s(27120),P=s(83322),B=s(66869),T=s(9119),R=s(54934),E=s(79393),M=s(43897);let z={flexLayout:"GHloH",isHidden:"Pha3k",centered:"LaNhI",mainSection:"yPZfR",showRelatedPostSection:"WYaZw",relatedPostsSection:"j8GND"};class L extends l.Component{constructor(...e){super(...e),n()(this,"state",{posts:[]}),n()(this,"apiHelper",(0,B.Ay)(this.props.appContext.apiFetch)),n()(this,"onLike",(e,t)=>{this.props.timelineContext.onLike(e,t),this.setState({posts:this.state.posts.map(s=>(0,P.zA)(s)&&s.id===e?(0,M.xv)(s,t):s)})}),n()(this,"renderDesktopContent",()=>{let{posts:e}=this.state;return!(e.length<3)&&/*#__PURE__*/(0,p.jsx)(I.xv,{children:({width:t})=>{let s=Math.min(4,Math.floor((t+20)/320+3e-4));return/*#__PURE__*/(0,p.jsx)("div",{className:z.centered,style:{width:320*s-20},children:/*#__PURE__*/(0,p.jsxs)(S.Ay.Provider,{value:S.Mu,children:[/*#__PURE__*/(0,p.jsx)("h2",{children:this.props.appContext._t("More like this")}),/*#__PURE__*/(0,p.jsx)(k.A,{columnSpacing:20,columnWidth:300,elementSpacing:10,numberOfColumns:s,children:e.map(e=>this.renderElement(e)).filter(e=>e)})]})})}})}),n()(this,"renderElement",e=>{let t=`${e.placementId?`${e.placementId}:`:""}${e.id}${e.isExpandedInGrid?":expanded":""}`;return/*#__PURE__*/(0,p.jsx)(N.A,{isNarrow:!0,presentationStyle:E.A.masonry,timelineObject:{...e}},t)})}async componentDidMount(){let e=this.apiHelper.getRelatedPosts(this.props.queryId,this.props.blogName,this.props.postsContext).fetch(),t=(await e).response.elements.filter(e=>"client_side_ad_waterfall"!==e.objectType);this.setState({posts:t},()=>{this.props.onLoad(t.length>=3)})}render(){return/*#__PURE__*/(0,p.jsx)(T.ti.Provider,{value:{...this.props.timelineContext,onLike:this.onLike},children:/*#__PURE__*/(0,p.jsx)(y.Ay,{children:({isMobile:e})=>!e&&this.renderDesktopContent()})})}}let D=(0,R.bb)(L,{appContext:!0,timelineContext:!0}),O=function({glassProps:e,children:t}){let s=(0,C.rr)(),i=s?s.post:void 0,n=(0,l.useRef)(null),[o,r]=(0,l.useState)(!1),d=(0,v._)(),c=d?.closeLightbox??A.A,h=d?.isTopmost??!0,u=(0,l.useCallback)(e=>{let t="string"==typeof e.target?.className?e.target.className:"";(e.target===n.current||t.split(" ").includes(f.A.column))&&c()},[c]),g=!h;return/*#__PURE__*/(0,p.jsx)(y.Ay,{children:({isMobile:s})=>{if(s||!i?.id||i.adInstanceId)return/*#__PURE__*/(0,p.jsxs)(m.A,{...e,children:[/*#__PURE__*/(0,p.jsx)(x.A,{onClick:()=>d?.closeLightbox()}),t]});let l=String(i.rebloggedFromId?i.rebloggedFromId:i.id),h={...e,glassIsClickable:!1,opacity:g?0:e.opacity};return/*#__PURE__*/(0,p.jsx)(m.A,{...h,children:/*#__PURE__*/(0,p.jsxs)("div",{className:a()(z.flexLayout,{[z.isHidden]:g}),onClick:u,ref:n,role:"dialog",children:[/*#__PURE__*/(0,p.jsx)(x.A,{onClick:()=>c()}),/*#__PURE__*/(0,p.jsxs)(w.s.Provider,{value:n.current,children:[/*#__PURE__*/(0,p.jsx)(j.pL,{threshold:.7,children:({inView:e,ref:s})=>/*#__PURE__*/(0,p.jsx)("div",{className:a()(z.mainSection,{[z.showRelatedPostSection]:o&&e}),ref:s,children:t})}),/*#__PURE__*/(0,p.jsx)("div",{className:a()(z.relatedPostsSection,{[z.isHidden]:!o}),children:/*#__PURE__*/(0,p.jsx)(D,{blogName:i.blog.name,onLoad:r,postsContext:"lightbox",queryId:l})})]})]})})}})};var F=s(75185),W=s(94048),U=s(57574),_=s(56040),V=/*#__PURE__*/s.n(_);let H={mobileImage:"uNsrv",image:"MjNMI",left:"UBbzn",center:"kjHHx",right:"rquNV",caption:"dvdaL"},G=({glassProps:e,children:t})=>/*#__PURE__*/(0,p.jsxs)(m.A,{...e,children:[/*#__PURE__*/(0,p.jsx)(x.A,{onClick:e.onGlassClick}),t]});class $ extends l.Component{constructor(...e){super(...e),n()(this,"state",{isOpen:!1,isTopmost:!1,currentIndex:0,images:[]}),n()(this,"addImageToLightbox",e=>(this.setState(({images:t})=>({images:t.concat(e)})),()=>{let t=this.state.images.indexOf(e);this.openLightbox(t)})),n()(this,"removeImageFromLightbox",e=>{this.setState(({images:t})=>({images:t.filter(t=>t!==e)}))}),n()(this,"closeLightbox",()=>{this.setState({isOpen:!1},this.logStateChange),this.context?.closeLightbox()}),n()(this,"logStateChange",()=>{this.props.adContext.sendClickADMBeacon(this.props.adm),this.props.appContext.logEvent({eventName:W.R.Photo,eventDetails:{placement_id:this.props.placementId,...this.props.krakenEventDetails}})}),n()(this,"renderDesktopContent",()=>{let{currentIndex:e,images:t}=this.state,s=t.length,i=e===t.length-1,n=0!==e&&s>=2?this.renderImage(t[e-1],"left"):null,o=this.renderImage(t[e],"center"),a=!i&&s>=e+1?this.renderImage(t[e+1],"right"):null;return/*#__PURE__*/(0,p.jsxs)(p.Fragment,{children:[/*#__PURE__*/(0,p.jsx)(g.Ay,{hotkey:[{key:g.qW.Left,command:this.decrementImage},{key:g.qW.Right,command:this.incrementImage}]}),n,o,a]})}),n()(this,"renderMobileContent",()=>{let{images:e,currentIndex:t}=this.state;return/*#__PURE__*/(0,p.jsx)(r.A,{label:this.props.appContext._c("Clicking on the image will expand it and open a lightbox","Close image"),onClick:this.closeLightbox,children:/*#__PURE__*/(0,p.jsx)(u,{index:t,children:e.map((e,t)=>/*#__PURE__*/(0,p.jsx)(u.Slide,{children:this.renderImage(e,"mobileImage")},t))})})}),n()(this,"renderImage",(e,t,s)=>{let i,n;let{_c:o}=this.props.appContext,{currentIndex:l,images:d}=this.state,{imageResponse:c,caption:h}=e;switch(t){case"left":i=this.decrementImage,n=o("Label for previous lightbox image. Clicking on this image goes to that previous image.","Previous image");break;case"right":i=this.incrementImage,n=o("Label for next lightbox image. Clicking on this image goes to that next image.","Next image");break;case"center":{let e=l===d.length-1;1===d.length||e?(i=this.closeLightbox,n=o("Label for last lightbox image. Clicking on this image closes the lightbox.","Close image")):(i=this.incrementImage,n=o("Label for current lightbox image. Clicking on this image goes to the next image.","Click to go to next image"))}}let u=new U.A(c).getLargestImage().width,m=`${u}px`;return i?/*#__PURE__*/(0,p.jsxs)(r.A,{"data-testid":"lightbox-image",label:n,onClick:i,wrapperClassName:a()(H.image,H[t]),children:[/*#__PURE__*/(0,p.jsx)(b.A,{imageResponse:c,loading:"lazy",sizes:m}),h&&/*#__PURE__*/(0,p.jsx)("div",{className:H.caption,children:h})]},s):/*#__PURE__*/(0,p.jsxs)("div",{className:a()(H.image,H[t]),children:[/*#__PURE__*/(0,p.jsx)(b.A,{imageResponse:c,loading:"lazy",sizes:m}),h&&/*#__PURE__*/(0,p.jsx)("div",{className:H.caption,children:h})]},s)}),n()(this,"decrementImage",()=>{0!==this.state.currentIndex&&this.setState(e=>({...e,currentIndex:e.currentIndex-1}))}),n()(this,"incrementImage",()=>{this.state.currentIndex!==this.state.images.length-1&&this.setState(e=>({...e,currentIndex:e.currentIndex+1}))}),n()(this,"openLightbox",e=>{this.props.appContext.logEvent({eventName:W.R.FeatureExposed,eventDetails:{feature_key:"redpop_lightbox_open"}}),this.setState({isOpen:!0,isTopmost:!0,currentIndex:e}),this.context?.setIsTopmost(!1)}),n()(this,"getContextValue",(0,F.A)(e=>({addImageToLightbox:this.addImageToLightbox,removeImageFromLightbox:this.removeImageFromLightbox,closeLightbox:this.closeLightbox,isTopmost:e,setIsTopmost:e=>this.setState({isTopmost:e})})))}render(){let{isOpen:e}=this.state,t=this.props.appContext.features?.redpopRelatedPostsLightbox?O:G;return/*#__PURE__*/(0,p.jsxs)(v.T.Provider,{value:this.getContextValue(this.state.isTopmost),children:[this.props.children,e&&/*#__PURE__*/(0,p.jsx)(y.Ay,{children:({isMobile:e})=>/*#__PURE__*/(0,p.jsx)(t,{glassProps:{onGlassClick:this.closeLightbox,centerContent:!0,color:V().black,opacity:.85},children:e?this.renderMobileContent():this.renderDesktopContent()})})]})}}n()($,"contextType",v.T);let q=(0,R.bb)($,{appContext:!0,adContext:!0})},38663:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(11100),a=s(36665),r=s(4613),l=s(19869),d=s(95041);let c={imageBlockButton:"k4_Vq"};var h=s(60397);let p=({children:e,imageResponse:t,altText:s,caption:i,className:p})=>{let u=(0,a.useRef)(l.A),m=(0,a.useRef)({imageResponse:t,altText:s,caption:i}),{_t:g}=(0,r.Us)(),b=(0,d._)();(0,a.useEffect)(()=>{if(b){let e=m.current;return u.current=b.addImageToLightbox(e),()=>{b.removeImageFromLightbox(e),u.current=l.A}}},[b]);let x=g("Image");return/*#__PURE__*/(0,h.jsx)(o.A,{label:s?`${x}: ${s}`:x,onClick:()=>{u.current()},wrapperClassName:n()(c.imageBlockButton,p),children:e})}},10936:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(36665),a=s(70889),r=s(22720),l=s(90657),d=s(4613),c=s(66512),h=s(60397);let p=function({columns:e,columnWidth:t,elementSpacing:s,columnSpacing:i,elementContainerClass:n,elementRole:o,numberOfColumns:a,onElementClick:r}){let{features:p}=(0,d.Us)();s=s||(p.reblogRedesignNew?0:5),i=i||s;let u={width:t?`${t}px`:`${100/a}%`,maxWidth:t?`${t}px`:void 0},m={...u,marginLeft:i},g={marginTop:s};return/*#__PURE__*/(0,h.jsx)("div",{className:c.A.masonry,children:e.map((e,t)=>/*#__PURE__*/(0,h.jsx)("div",{className:c.A.column,style:t>0?m:u,children:e.map(({element:e,tabIndex:s},i)=>/*#__PURE__*/(0,h.jsx)("div",{className:n,onClick:()=>r?.(s),onKeyUp:e=>{e.key===l.qW.Enter&&r?.(s)},role:o,style:i>0?g:void 0,tabIndex:s,children:e},`${t}-${i}`))},`column-${t}`))})},u=({fromChildren:e,numberOfColumns:t,offset:s=0,pinnedToUpperRightIndexes:i=[]})=>{let n=[];for(let e=0;e<t;e+=1)n.push([]);let o=[...e];return i.map((e,s)=>{let i=o[e];o.splice(e,1),o.splice((s+1)*t-1,0,i)}),o.forEach((e,i)=>{n[i%t].push({element:e,tabIndex:i+s})}),n};class m extends o.Component{constructor(...e){super(...e),n()(this,"state",{objectsToLayOut:[],columns:u({fromChildren:o.Children.toArray(this.props.children),numberOfColumns:this.props.numberOfColumns,pinnedToUpperRightIndexes:this.props.pinnedToUpperRightIndexes})}),n()(this,"columnSpacerRefs",[]),n()(this,"addNextObjectToLayOutToColumn",(e,t)=>{let{objectsToLayOut:s}=this.state,i=o.Children.count(this.props.children);if(!s.length){this.state.columns!==e&&this.setState({columns:e});return}if(t<0)return;let[n,...a]=s,r=[...e];r[t].push({element:n,tabIndex:i-s.length}),this.setState({columns:r,objectsToLayOut:a})}),n()(this,"naivelyLayOutObjects",(e,t,s,i)=>{let n=[...t],{numberOfColumns:o}=this.props,a=u({numberOfColumns:o,fromChildren:e,offset:i}),r=Math.max(s,0);for(let e=0;e<o;e+=1){let t=(e+r)%o;n[t]=[...n[t],...a[e]]}return n}),n()(this,"columnsWithoutRemovedChildren",(e,t)=>e.map(e=>e.filter(({element:e})=>/*#__PURE__*/(0,o.isValidElement)(e)&&e.key&&0>t.indexOf(e.key)))),n()(this,"updateColumnsWithNewProps",(e,t)=>{if(!t.length)return e;let s=t.map(({key:e})=>e);return e.map(e=>e.map(({element:e,tabIndex:i})=>{if(s.indexOf(e?.key)>=0){let s=t.find(t=>t.key===e.key);if(s)return{tabIndex:i,element:s}}return{element:e,tabIndex:i}}))})}componentDidUpdate(e){let{numberOfColumns:t,children:s,pinnedToUpperRightIndexes:i}=this.props,n=!(0,r.n)(i,e.pinnedToUpperRightIndexes);if(t!==e.numberOfColumns||n){this.setState({columns:u({numberOfColumns:t,pinnedToUpperRightIndexes:i,fromChildren:o.Children.toArray(s)}),objectsToLayOut:[]});return}let a=o.Children.toArray(this.props.children),l=o.Children.toArray(e.children);this.makeLayoutPass(a,l)}render(){let{columns:e}=this.state,t=e.reduce((e,t,s)=>[...e,[...t,{element:/*#__PURE__*/(0,h.jsx)("div",{ref:e=>this.columnSpacerRefs[s]=e},`column ${s} bottom spacer`),tabIndex:-1}]],[]),s={...this.props};return delete s.children,/*#__PURE__*/(0,h.jsx)(a.nA.Provider,{value:this.getMasonryContextValue(),children:/*#__PURE__*/(0,h.jsx)(p,{columns:t,...s})})}getMasonryContextValue(){let{numberOfColumns:e,columnSpacing:t,columnWidth:s,elementContainerClass:i,elementSpacing:n}=this.props;return(0,a.uv)(e,t,s,n,i)}makeLayoutPass(e,t){let s=(e,t)=>e.filter(e=>!t.find(t=>e?.key===t?.key)),i=s(t,e),n=s(e,t),a=e.reduce((e,s,i)=>{let n=t[i];return n&&s&&(0,r.n)(s.props,n.props)||e.push(s),e},[]),l=this.updateColumnsWithNewProps(this.state.columns,a),d=i.map(e=>e.key),c=-1,h=-1;for(let e=0;e<this.props.numberOfColumns;e+=1){let t=this.columnSpacerRefs[e];if(t){let s=t.getBoundingClientRect().top;(s<h||-1===h)&&(h=s,c=e)}}let p=c;if(!i.length&&!n.length){this.addNextObjectToLayOutToColumn(l,p);return}let u=[...this.state.objectsToLayOut.filter(e=>/*#__PURE__*/(0,o.isValidElement)(e)&&e.key&&0>d.indexOf(e.key)),...n],m=u.slice(0,Math.ceil(u.length/2));l=this.columnsWithoutRemovedChildren(l,d);let g=this.naivelyLayOutObjects(m,l,p,t.length),b=u.slice(Math.ceil(u.length/2));this.setState({columns:g,objectsToLayOut:b})}}let g=m},22552:(e,t,s)=>{"use strict";s.d(t,{A:()=>R});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(90937),a=s(85191),r=s(4613);let l={whyAdModal:"xBp2v",advertiserInfo:"zhKOj",advertiserInfoColumnTitle:"DN4md",advertiserInfoColumnValue:"UL7nR"};var d=s(13275),c=s(83322),h=s(19869),p=s(60397);let u={[c.Sk.Google]:"Google",[c.Sk.GoogleRewarded]:"Google",[c.Sk.Post]:"Tumblr",[c.Sk.Teads]:"Teads",[c.Sk.OneMobile]:"One Mobile",[c.Sk.Flurry]:"Flurry",[c.Sk.IponWeb]:"IPONWEB",[c.Sk.Smart]:"Smart AdServer SAS",[c.hT.Prebid]:"Pubmatic",[c.sf.TripleliftBanner]:"Triple Lift, Inc.",[c.sf.TripleliftNative]:"Triple Lift, Inc.",[c.sf.Smart]:"Smart AdServer SAS",[c.sf.Smaato]:"Smaato, Inc."},m=e=>{let{_c:t}=(0,r.Us)();return/*#__PURE__*/(0,p.jsxs)(d.A,{adSafe:!0,modalWrapperClassname:l.whyAdModal,onClose:e.onClose||h.A,title:t("Title for Why am I seeing this ad? modal","Why am I seeing this ad?"),children:[e.headerNode,e.advertiserInfoNode,e.descNode,e.showPrivacyPolicy&&/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Link to privacy setting",components:{link:/*#__PURE__*/(0,p.jsx)("a",{href:"https://www.tumblr.com/settings/privacy",target:"_blank"})},children:"Read our [link]Privacy Policy[/link] to learn how we collect and utilise data."})})})]})},g=e=>{let{_c:t}=(0,r.Us)(),s=e.getAdInstance(),i=/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","Different factors contribute to why you saw this ad, which may include who provided the ad and your profile information.")})}),n=/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("table",{className:l.advertiserInfo,children:/*#__PURE__*/(0,p.jsx)("tbody",{children:s?.advertiserName&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:s?.advertiserName})]})})})}),o=/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Body of Why am I seeing this ad? dialog",components:{link:/*#__PURE__*/(0,p.jsx)("a",{href:s?.advertiserUrl,target:"_blank"})},params:{advertiserName:s?.advertiserName||"the advertiser"},children:"You are seeing this ad because [link][advertiserName][/link] wants to reach users in your country, and with a blog in your language."})});return/*#__PURE__*/(0,p.jsx)(m,{...e,advertiserInfoNode:n,descNode:o,headerNode:i})};var b=s(40297);let x=e=>{let{_c:t}=(0,r.Us)(),{privacy:s}=(0,b.W)(),i=e.getAdInstance(),n=s?.personalizedAdvertising&&/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","Different factors contribute to why you saw this ad, which may include who provided the ad and your profile information.")})}),o=/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("table",{className:l.advertiserInfo,children:/*#__PURE__*/(0,p.jsxs)("tbody",{children:[i?.advertiserName&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:i?.advertiserName})]}),i?.advertiserDomain&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser Domain")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:i?.advertiserDomain})]})]})})}),d=s?.personalizedAdvertising?/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Body of Why am I seeing this ad? dialog",components:{link:/*#__PURE__*/(0,p.jsx)("a",{href:i?.advertiserUrl,target:"_blank"})},params:{advertiserDomain:i?.advertiserDomain||"the advertiser"},children:"You are seeing this ad because [link][advertiserDomain][/link] wants to reach users in your location and with the language settings in your account."})}):/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Body of Why am I seeing this ad? dialog",children:"Because you have disabled or opted out of tracking, this ad was not targeted to you based on information about your interests. Ads may still be targeted based on information such as the content of the page that you are visiting."})});return/*#__PURE__*/(0,p.jsx)(m,{...e,advertiserInfoNode:o,descNode:d,headerNode:n,showPrivacyPolicy:!0})},v=e=>{let{_c:t}=(0,r.Us)(),{privacy:s}=(0,b.W)(),i=e.getAdInstance(),n=s?.personalizedAdvertising&&/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","Different factors contribute to why you saw this ad, including who provided the ad, and your profile information or interests inferred from your activity")})}),o=/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("table",{className:l.advertiserInfo,children:/*#__PURE__*/(0,p.jsxs)("tbody",{children:[i?.advertiserName&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:i?.advertiserName})]}),i?.advertiserDomain&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser Domain")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:i?.advertiserDomain})]}),i?.adProviderId&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Payer")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:u[i?.adProviderId]})]})]})})}),d=s?.personalizedAdvertising?/*#__PURE__*/(0,p.jsxs)(p.Fragment,{children:[/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","This ad was provided by the programmatic partner and was based on interests they have inferred about your activity.")}),/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Link to privacy setting",components:{link:/*#__PURE__*/(0,p.jsx)("a",{href:"https://www.tumblr.com/settings/privacy",target:"_blank"})},children:"[link]Click here[/link] to learn more or manage your ad settings"})})]}):/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","Because you have disabled or opted out of tracking, this ad was not targeted to you based on information about your interests. Ads may still be targeted based on information such as the content of the page that you are visiting.")});return/*#__PURE__*/(0,p.jsx)(m,{...e,advertiserInfoNode:o,descNode:d,headerNode:n,showPrivacyPolicy:!0})},f=e=>{let{_c:t}=(0,r.Us)(),{privacy:s}=(0,b.W)(),i=e.getAdInstance(),n=s?.personalizedAdvertising&&/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","Different factors contribute to why you saw this ad, which may include who provided the ad, your profile information, or interests inferred from your activity.")})}),o=/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("table",{className:l.advertiserInfo,children:/*#__PURE__*/(0,p.jsx)("tbody",{children:i?.advertiserName&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:i?.advertiserName})]})})})}),d=/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Body of Why am I seeing this ad? dialog",components:{link:/*#__PURE__*/(0,p.jsx)("a",{href:"https://help.tumblr.com/hc/articles/226259728-Followed-Tags"})},params:{advertiserName:i?.advertiserName||"the advertiser"},children:"You are seeing this ad because [advertiserName] wants to reach users in your country or location, and because of interests inferred about or selected by you, including [link]tags you follow[/link]."})});return/*#__PURE__*/(0,p.jsx)(m,{...e,advertiserInfoNode:o,descNode:d,headerNode:n})},y=e=>{let{_c:t}=(0,r.Us)(),{privacy:s}=(0,b.W)(),i=e.getAdInstance(),n=s?.personalizedAdvertising&&/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("p",{children:t("Body of Why am I seeing this ad? dialog","Different factors contribute to why you saw this ad, which may include who provided the ad and your profile information.")})}),o=/*#__PURE__*/(0,p.jsx)("div",{children:/*#__PURE__*/(0,p.jsx)("table",{className:l.advertiserInfo,children:/*#__PURE__*/(0,p.jsx)("tbody",{children:i?.advertiserDomain&&/*#__PURE__*/(0,p.jsxs)("tr",{children:[/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnTitle,children:t("Advertiser info table title","Advertiser")}),/*#__PURE__*/(0,p.jsx)("td",{className:l.advertiserInfoColumnValue,children:i?.advertiserDomain})]})})})}),d=s?.personalizedAdvertising?/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Body of Why am I seeing this ad? dialog",components:{link:/*#__PURE__*/(0,p.jsx)("a",{href:i?.advertiserUrl,target:"_blank"})},params:{advertiserDomain:i?.advertiserDomain||"the advertiser"},children:"You are seeing this ad because [link][advertiserDomain][/link] wants to reach users in your location and with the language settings in your account."})}):/*#__PURE__*/(0,p.jsx)("p",{children:/*#__PURE__*/(0,p.jsx)(a.Ay,{comment:"Body of Why am I seeing this ad? dialog",children:"Because you have disabled or opted out of tracking, this ad was not targeted to you based on information about your interests. Ads may still be targeted based on information such as the content of the page that you are visiting."})});return/*#__PURE__*/(0,p.jsx)(m,{...e,advertiserInfoNode:o,descNode:d,headerNode:n,showPrivacyPolicy:!0})};var j=s(12044),C=s(36665),w=s(53986),A=s(94048),k=s(89972),N=s(25183),S=s(56356),I=s(92240),P=s(4488),B=/*#__PURE__*/function(e){return e[e.NotInterested=1]="NotInterested",e[e.Offensive=2]="Offensive",e[e.TooOften=3]="TooOften",e[e.AlreadyPurchased=4]="AlreadyPurchased",e}(B||{});let T={offensive:1,broken:2,malicious:3,tooOften:4,flashing:5,autoplayingAudio:6},R=({afterHideAd:e,getAdInstance:t,icon:s,meatballsClassName:i,onAdReported:a,showAdFree:l=!0,showHideAd:d=!0,showReportAd:h=!1,showWhyAd:u})=>{let{_t:m,_c:b}=(0,r.Us)(),R=(0,w.Zp)(),{logEvent:E}=(0,N.Ul)(),[M,z]=(0,C.useState)(!1),[L,D]=(0,C.useState)(!1),[O,F]=(0,C.useState)(!1),W=(0,S.rr)(),U=[],_={[B.NotInterested]:m("I'm not interested in this."),[B.Offensive]:m("It's offensive or inappropriate."),[B.TooOften]:m("I see it too often."),[B.AlreadyPurchased]:m("I already purchased something from this ad.")},V={[T.offensive]:b("An option for reporting ads where the ad contains offensive or inappropriate material","It's offensive or inappropriate."),[T.broken]:b("An option for reporting ads where the ad is not rendering correctly","This ad seems broken."),[T.malicious]:b("An option for reporting ads where the ad contains malicious material","This is a malicious ad."),[T.tooOften]:b("An option for reporting ads where the ad has been shown to the user multiple times","See this ad too often."),[T.flashing]:b("An option for reporting ads where the ad contains flashing images","This ad contains flashing images."),[T.autoplayingAudio]:b("An option for reporting ads where the ad has autoplaying audio","This ad has autoplaying audio.")},H=()=>{if(d&&(0,c.Tt)(W?.post)){let e=W?.post?.adProviderId;if(e===c.sf.Smart||e===c.Sk.IponWeb)return!0}return!1},G=e=>{if(!(0,c.Tt)(W?.post))return;let t=W?.post;E({eventName:A.R.HideAd,eventDetails:{complaint_reason:e,is_ad:1,creative_id:t.creativeId,blog_name:t.blogName,campaign_id:t.campaignId,serve_id:t.serveId,post_id:t.id,placement_id:t.placementId}},{sendPayloadImmediately:!0})};if(M){for(let[t,s]of(U.push(/*#__PURE__*/(0,p.jsx)(o.A,{isDisabled:!0,children:m("Why are you hiding this ad?")},"hide-ad-reason-title")),Object.entries(_)))U.push(/*#__PURE__*/(0,p.jsx)(o.A,{onClick:()=>{G(parseInt(t,10)),e?.()},children:s},`hide-ad-reason-${t}`));return/*#__PURE__*/(0,p.jsx)(I.A,{blogName:"",isOpen:M,meatballsClassName:i,onPopoverClose:()=>z(!1),popoverBoundary:k.Mh.ScrollParent,renderItems:()=>U,showOverflowY:!0,width:400},"hide-ad-reason-meatballs-menu")}if(O&&t){let e={getAdInstance:t,onClose:()=>F(!1)};return t?.()?.isBlaze?/*#__PURE__*/(0,p.jsx)(g,{...e}):t?.()?.isWordPressBlaze?/*#__PURE__*/(0,p.jsx)(y,{...e}):t?.()?.isBlazePro?/*#__PURE__*/(0,p.jsx)(x,{...e}):t?.()?.isTumblrSponsoredPost?/*#__PURE__*/(0,p.jsx)(f,{...e}):/*#__PURE__*/(0,p.jsx)(v,{...e})}if(L){for(let[e,t]of(U.push(/*#__PURE__*/(0,p.jsx)(o.A,{isDisabled:!0,children:b("A header menu item for asking why a user is reporting an ad","Why are you reporting this ad?")},"report-ad-reason-title")),Object.entries(V)))U.push(/*#__PURE__*/(0,p.jsx)(o.A,{onClick:()=>{a?.(parseInt(e,10)),H()&&G(parseInt(e,10))},children:t},`report-ad-reason-${e}`));return/*#__PURE__*/(0,p.jsx)(I.A,{blogName:"",isOpen:L,meatballsClassName:i,onPopoverClose:()=>D(!1),popoverBoundary:k.Mh.ScrollParent,renderItems:()=>U,showOverflowY:!0,width:400},"report-ad-reason-meatballs-menu")}return l&&U.push(/*#__PURE__*/(0,p.jsx)(o.A,{className:P.A.meatballItem,onClick:()=>{E({eventName:A.R.AdFreeLinkClick,eventDetails:{location:"meatball",source:location.pathname}}),R(j.ry.premium)},children:m("Remove ads")},"ad-free")),H()&&U.push(/*#__PURE__*/(0,p.jsx)(o.A,{className:P.A.meatballItem,onClick:()=>z(!0),children:m("Hide Ad")},"hide-ad")),h&&a&&U.push(/*#__PURE__*/(0,p.jsx)(o.A,{className:n()(P.A.meatballItem,P.A.red),onClick:()=>D(!0),children:b("A menu item for reporting an ad","Report Ad")},"report-ad")),u&&U.push(/*#__PURE__*/(0,p.jsx)(o.A,{className:n()(P.A.meatballItem),onClick:()=>F(!0),children:b("A menu item to display why an ad is being displayed","Why am I seeing this ad?")},"why-ad")),/*#__PURE__*/(0,p.jsx)(I.A,{blogName:"",icon:s,meatballsClassName:i,popoverBoundary:k.Mh.ScrollParent,renderItems:()=>U,showOverflowY:!0,width:400},"ad-meatballs-menu")}},10612:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(90657),a=s(83364),r=s(36665),l=s(4613);let d={compositionTextarea:"xXTjk",textareaContainer:"JWdar"};var c=s(60397);let h=({children:e,avatar:t})=>/*#__PURE__*/(0,c.jsxs)("div",{className:d.textareaContainer,children:[t,e]});class p extends r.Component{constructor(...e){super(...e),n()(this,"placeHolders",[this.props.appContext._t("New message"),this.props.appContext._t("Your message here"),this.props.appContext._t("Write a message"),this.props.appContext._t("Say something"),this.props.appContext._t("Say your thing")]),n()(this,"state",{textareaHeight:"auto",textareaHasFocus:!!this.props.autoFocus,placeholder:this.props.isDeactivated?this.props.appContext._c("Placeholder of messaging input when receiver is deactivated account","Messaging unavailable"):this.props.isDisabled?"":(0,a.C)(this.placeHolders)}),n()(this,"textareaRef",/*#__PURE__*/(0,r.createRef)()),n()(this,"focus",()=>this.textareaRef.current&&this.textareaRef.current.focus()),n()(this,"onFocus",()=>this.setState({textareaHasFocus:!0})),n()(this,"onBlur",()=>this.setState({textareaHasFocus:!1})),n()(this,"onPaste",e=>{let t=function(e){let t=Array.from(e.clipboardData.items).filter(({kind:e})=>"file"===e);return 0===t.length?[]:t.map(e=>e.getAsFile()).filter(e=>!!e)}(e);t.length&&this.props.onPasteImage?.(t[t.length-1])}),n()(this,"onKeyDown",e=>{if(e.key===o.qW.Enter&&!e.shiftKey&&!e.nativeEvent.isComposing){let{onSubmit:t}=this.props;e.preventDefault(),t&&t()}}),n()(this,"resizeTextarea",()=>{let{heightModifier:e,onResize:t}=this.props;this.setState({textareaHeight:"auto"},()=>{this.textareaRef.current&&void 0!==e&&this.setState({textareaHeight:`${this.textareaRef.current.scrollHeight+e}px`},()=>t&&t())})})}componentDidMount(){this.resizeTextarea()}componentDidUpdate(e){e.value!==this.props.value&&this.resizeTextarea()}render(){let{value:e,onSubmit:t,onChange:s,autoFocus:i,maxLength:n,isDisabled:a,isMobile:r,avatar:l}=this.props,{textareaHeight:p,textareaHasFocus:u,placeholder:m}=this.state;return/*#__PURE__*/(0,c.jsxs)(c.Fragment,{children:[!r&&/*#__PURE__*/(0,c.jsx)(o.Ay,{disable:u?o.WC:void 0}),/*#__PURE__*/(0,c.jsx)(h,{avatar:l,children:/*#__PURE__*/(0,c.jsx)("textarea",{autoFocus:i,className:d.compositionTextarea,disabled:a,maxLength:n,onBlur:this.onBlur,onChange:s,onFocus:this.onFocus,onKeyDown:this.onKeyDown,onPaste:this.onPaste,onSubmit:t,placeholder:m,ref:this.textareaRef,rows:1,style:{height:p,overflowY:"auto"===p?"hidden":"auto"},value:e})})]})}}n()(p,"defaultProps",{maxLength:4096,autoFocus:!1,heightModifier:0});let u=(0,l.rr)(p)},83364:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var i=s(84007);function n(e){return(0,i.X)(e)}},99442:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(17886),a=s(79708),r=s(94048),l=s(4613),d=s(56040),c=/*#__PURE__*/s.n(d);let h={container:"veGhd",monthlyCheckoutButton:"N4DvW"};var p=s(60397);let u=({className:e,blog:t,plan:s,useBlogColors:i,context:d,useExternalLink:u=!1})=>{let{logEvent:m,wwwBaseUrl:g}=(0,l.Us)(),b=s?.checkoutLabels.support,x=(0,a.cm)({peeprBlogname:t.name},{peeprMembershipsParams:{isSupport:!0}}),v=i?c().blogBackgroundColor:c().paletteAccent,f=i?c().blogContrastingLinkColor:c().paletteAccentTransparent15;return/*#__PURE__*/(0,p.jsx)("div",{className:n()(h.container,e),children:/*#__PURE__*/(0,p.jsx)(o.A,{backgroundColor:f,className:h.monthlyCheckoutButton,disabledBackgroundColor:f,disabledTheme:"default",feature:!u,href:u?`${g}${x}`:x,label:b,onClick:()=>{m({eventName:r.R.PostpSupportTap,eventDetails:{source:d}})},size:"entireWidth",target:u?"_blank":"",textColor:v,theme:"default",children:b})})}},41341:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(11100),a=s(23390),r=s(70933),l=s(94210),d=s(86619),c=s(83087),h=s(89972),p=s(56040),u=/*#__PURE__*/s.n(p);let m={mobileWrapper:"JloGo",button:"DP33z",isOpen:"AYiEs",list:"Ohe4v",listItem:"jOW7m",isMobile:"IQS1M",listItemInner:"ram4w",header:"lAM6N"};var g=s(60397);let b=e=>{let{content:t,isActive:s=!1,label:i,listItemClassName:a,listItemInnerClassName:l,onSelect:d,value:h,as:p,href:b,...x}=e,{isMobile:v}=(0,c.Ri)(),f=v?24:16;return/*#__PURE__*/(0,g.jsxs)(o.A,{as:p,className:n()(m.listItemInner,l),label:i,onClick:e=>d(h,e),role:"option",wrapperClassName:n()(m.listItem,a,{[m.isMobile]:v}),..."a"===p?{href:b}:{},...x,children:[t||i,s&&/*#__PURE__*/(0,g.jsx)(r.A,{colors:{primary:u().paletteGray65},size:{width:f,height:f}})]})},x=e=>{let{value:t,title:s,titleEl:i,options:r,isOpen:p=!1,noAnchor:u=!1,onChangeIsOpen:x,onChange:v,onClickGlass:f,width:y,chromelessPopover:j=!1,popoverPosition:C=h.$x.BottomStart,popoverRef:w,popoverWrapperClassName:A,listItemClassName:k,listItemInnerClassName:N}=e,{isMobile:S}=(0,c.Ri)(),I=r.find(e=>e.value===t),P=(e,t)=>{v(e,t),x?.(!1)},B=/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:r.map(({label:e,content:s,value:i,as:n,href:o})=>/*#__PURE__*/(0,g.jsx)(b,{as:n,content:s||e,href:o,isActive:t===i,label:e,listItemClassName:k,listItemInnerClassName:N,onSelect:P,value:i},e))}),T=/*#__PURE__*/(0,g.jsx)(o.A,{"aria-label":I?.label||s,className:m.button,onClick:()=>{x?.(!p)},children:/*#__PURE__*/(0,g.jsx)(l.A,{size:{width:24,height:24}})}),R=i?/*#__PURE__*/(0,g.jsx)(o.A,{children:i}):T,E=/*#__PURE__*/(0,g.jsxs)("div",{className:n()({[m.isOpen]:p}),"data-testid":"mobile-selector",role:"listbox",children:[!u&&R,p&&/*#__PURE__*/(0,g.jsx)(a.A,{onGlassClick:()=>{f?.()},children:/*#__PURE__*/(0,g.jsxs)("div",{className:m.mobileWrapper,children:[/*#__PURE__*/(0,g.jsx)("div",{className:m.header,children:i||s}),/*#__PURE__*/(0,g.jsx)("div",{className:m.list,children:B})]})})]}),M=/*#__PURE__*/(0,g.jsx)("div",{className:n()({[m.isOpen]:p}),"data-testid":"desktop-selector",role:"listbox",children:/*#__PURE__*/(0,g.jsx)(d.Ay,{boundary:h.Mh.ScrollParent,component:B,disableScroll:!0,height:"auto",isChromeless:j,isFlipEnabled:!1,isOpen:p,maxHeight:300,popoverRef:w,popoverWrapperClassName:A,position:C,toggle:()=>{x?.(!p)},useFlex:!0,width:y,children:u?/*#__PURE__*/(0,g.jsx)(g.Fragment,{}):R})});return/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:S?E:M})}},42414:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>x,Mm:()=>g,TA:()=>b});var i=s(4613),n=s(56356),o=s(74059),a=/*#__PURE__*/s.n(o),r=s(36665);let l={noteCountButton:"vE6sH"};var d=s(60397);let c=({children:e,onButtonStyleChange:t})=>{let s=function(e){let[t,s]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{s(!0)},[e]),(0,r.useEffect)(()=>{t&&e?.()},[e,t]),t}(t);return/*#__PURE__*/(0,d.jsx)("div",{className:a()({[l.noteCountButton]:s}),children:e})};var h=s(85191);let p={blackText:"lJK40"},u=({noteCount:e,formattedNoteCount:t,showNotesString:s})=>s?/*#__PURE__*/(0,d.jsxs)(h.P0,{components:{noteCountWrapper:/*#__PURE__*/(0,d.jsx)("span",{className:p.blackText})},exemptNumberKeyFromParamCheck:!0,number:e,params:{fNumber:t},children:[/*#__PURE__*/(0,d.jsx)(h.M$,{children:"[noteCountWrapper][fNumber][/noteCountWrapper] note"}),/*#__PURE__*/(0,d.jsx)(h.$e,{children:"[noteCountWrapper][fNumber][/noteCountWrapper] notes"})]}):/*#__PURE__*/(0,d.jsxs)(h.P0,{components:{noteCountWrapper:/*#__PURE__*/(0,d.jsx)("span",{className:p.blackText})},exemptNumberKeyFromParamCheck:!0,number:e,params:{fNumber:t},children:[/*#__PURE__*/(0,d.jsx)(h.M$,{children:"[noteCountWrapper][fNumber][/noteCountWrapper]"}),/*#__PURE__*/(0,d.jsx)(h.$e,{children:"[noteCountWrapper][fNumber][/noteCountWrapper]"})]}),m={formattedNoteCount:"xu5ZG"};function g(e){return"expanded-with-notes"===e||"condensed-with-notes"===e}function b(e,t){let{_getLocaleNumberString:s}=(0,i.Us)(),n=s(e),o=s(e,"compact");return{expandedNoteCount:n,currentNoteCount:"expanded-with-notes"===t||"expanded-without-notes"===t?n:o}}let x=({formattingMode:e,setFormattingModeBySize:t})=>{let{post:{noteCount:s}}=(0,n.gY)(),{_n:o}=(0,i.Us)(),a=g(e),{currentNoteCount:r,expandedNoteCount:l}=b(s,e);return/*#__PURE__*/(0,d.jsx)(c,{onButtonStyleChange:t,children:/*#__PURE__*/(0,d.jsx)("span",{className:m.formattedNoteCount,title:o("%2$s note","%2$s notes",s,[l]),children:/*#__PURE__*/(0,d.jsx)(u,{formattedNoteCount:r,noteCount:s,showNotesString:a})})})}},14130:(e,t,s)=>{"use strict";s.d(t,{A:()=>g,i:()=>m});var i=s(36665),n=s(84208),o=s(4613),a=s(56356),r=s(23638),l=s(79393),d=s(44553),c=s(42414);let h=e=>{switch(e){case"expanded-with-notes":return"condensed-with-notes";case"condensed-with-notes":return"expanded-without-notes";case"expanded-without-notes":case"condensed-without-notes":return"condensed-without-notes"}};var p=s(60397);let u="expanded-with-notes",m=(e,t=u)=>{let{getBrowserInfo:s}=(0,o.Us)(),{presentationStyle:c}=(0,a.gY)(),[p,m]=(0,i.useState)(!1),[g,b]=(0,i.useState)(t),x=e.current,v=(0,n.Ru)(s()),f="condensed-without-notes"!==g,y=(0,i.useCallback)(()=>{x&&x.scrollHeight>(v?x.clientHeight+1:x.clientHeight)&&f&&b(h(g))},[f,x,g,v]);return(0,r.E)(()=>{p&&y()},[p,y]),(0,i.useEffect)(()=>{if(p&&x&&"undefined"!=typeof ResizeObserver&&(c===l.A.radar||c===l.A.radarWithTimestamp)){let e=new ResizeObserver((0,d.A)(()=>{y()},200));return e.observe(x),()=>{e.unobserve(x)}}},[x,p,c,y]),(0,i.useEffect)(()=>{let e=setTimeout(()=>m(!0));return()=>clearTimeout(e)},[]),{formattingMode:p?g:null,setFormattingModeBySize:y}},g=({containerRef:e,defaultFormattingMode:t})=>{let{formattingMode:s,setFormattingModeBySize:i}=m(e,t);return s?/*#__PURE__*/(0,p.jsx)(c.Ay,{formattingMode:s,setFormattingModeBySize:i}):null}},40310:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(63135).A)(()=>Promise.resolve().then(s.bind(s,70036)),"AsyncSendAPost")},70036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GET_SUGGESTED_BLOGS_DEBOUNCE_TIME:()=>ea,default:()=>ed});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(74059),a=/*#__PURE__*/s.n(o),r=s(27699),l=s(46383),d=s(11100),c=s(90657),h=s(33845),p=s(55618),u=s(44554),m=s(28230),g=s(10612),b=s(86619),x=s(1921),v=s(63906),f=s(36665),y=s(94048),j=s(11221),C=s(44637),w=s(4613),A=s(58217),k=s(47794),N=s(56040),S=/*#__PURE__*/s.n(N);let I={actionButton:"oea_J",buttonContent:"baUXc",caption:"iOPva",iconWrapper:"Z8bqG",hiddenPostUrl:"HX0fM"};var P=s(60397);let B=({fill:e,onClick:t,iconComponent:s,caption:i,buttonFill:n=S().white})=>{let{name:o}=(0,A.M)(),a={backgroundColor:o===j.A.cybernetic?S().paletteWhite:n},r=o===j.A.cybernetic?S().paletteWhiteOnDark:e;return/*#__PURE__*/(0,P.jsxs)(d.A,{className:I.buttonContent,label:i,onClick:t,wrapperClassName:I.actionButton,children:[/*#__PURE__*/(0,P.jsx)("div",{className:I.iconWrapper,style:a,children:/*#__PURE__*/(0,P.jsx)(s,{colors:{primary:r},size:{width:22,height:22}})}),/*#__PURE__*/(0,P.jsx)("span",{className:I.caption,children:i})]})};var T=s(84262);let R=({postUrl:e})=>{let t=(0,T.v)(),{_c:s}=(0,w.Us)(),{name:i}=(0,A.M)(),[n,o]=(0,f.useState)(v.g.Unclicked),[a,r]=(0,f.useState)(!1);(0,f.useEffect)(()=>{if(!navigator?.permissions?.query){r(!0);return}navigator.permissions.query({name:"clipboard-write",allowWithoutGesture:!0}).then(e=>{r("granted"===e.state||"prompt"===e.state)},()=>{r(!0)})},[a,r]);let l=(0,f.useRef)(null),d=()=>{o(v.g.Success),t(C.Sx.Copy,y.R.CopyPostLink),setTimeout(()=>o(v.g.Unclicked),2e3)},c=()=>{o(v.g.Failure),setTimeout(()=>o(v.g.Unclicked),2e3)},{caption:h,fill:p,buttonFill:u}=(e=>{switch(e){case v.g.Unclicked:return{caption:s("Menu item to copy the link to a post to your clipboard","Copy link"),fill:S().gray65};case v.g.Success:return{caption:s("Success message after copying a link","Link copied!"),buttonFill:S().paletteGreen,fill:S().paletteWhiteOnDark};case v.g.Failure:return{caption:s("Error message when trying to copy a link","Failed to copy link."),buttonFill:S().paletteRed,fill:S().paletteWhiteOnDark}}})(n),m=i===j.A.cybernetic?S().paletteWhiteOnDark:u;return a?/*#__PURE__*/(0,P.jsxs)(P.Fragment,{children:[/*#__PURE__*/(0,P.jsx)(B,{buttonFill:m,caption:h,fill:p,iconComponent:x.A,onClick:()=>{(0,k.D)(e).then(d).catch(()=>{l.current&&(0,k.a)(l.current)?d():c()})}}),/*#__PURE__*/(0,P.jsx)("textarea",{className:I.hiddenPostUrl,defaultValue:e,ref:l,tabIndex:-1})]}):null};var E=s(20928);let M=(0,E.Kk)("embed",{size:{width:24,height:24}});var z=s(12044),L=s(53986);let D=({id:e,blog:t,embedUrl:s})=>{let i=(0,T.v)(),{_c:n,features:{embedPost2022:o}}=(0,w.Us)(),a=(0,L.Zp)();return/*#__PURE__*/(0,P.jsx)(B,{caption:n("The caption for a button that will allow you to get the code to embed html into a page","Embed"),fill:S().gray65,iconComponent:M,onClick:()=>{o&&t?.name&&e?a((0,z.Oz)({postId:e,blogName:t.name})):window.open(s,"_blank","noreferrer,noopener"),i(C.Sx.Embed)}})},O=(0,E.Kk)("facebook",{size:{width:24,height:24}});var F=s(34031);let W=({actionType:e,urlStub:t,queryParams:s,windowName:i,fill:n,iconComponent:o,caption:a,buttonFill:r})=>{let l=(0,T.v)();return/*#__PURE__*/(0,P.jsx)(B,{buttonFill:r,caption:a,fill:n,iconComponent:o,onClick:()=>{(0,F.P)(t,s,{top:0,left:0,width:600,height:450,toolbar:"no",menubar:"no"},i),l(e)}})},U=({postUrl:e})=>/*#__PURE__*/(0,P.jsx)(W,{actionType:C.Sx.Facebook,caption:"Facebook",fill:S().facebookBlue,iconComponent:O,queryParams:{u:e},urlStub:C.ho.Facebook,windowName:"facebookShare"}),_=(0,E.Kk)("pinterest",{size:{width:24,height:24}}),V=({postUrl:e})=>/*#__PURE__*/(0,P.jsx)(W,{actionType:C.Sx.Pinterest,caption:"Pinterest",fill:S().pinterestRed,iconComponent:_,queryParams:{url:e},urlStub:C.ho.Pinterest,windowName:"pinterestShare"}),H=(0,E.Kk)("reddit",{size:{width:24,height:24}}),G=({postUrl:e})=>/*#__PURE__*/(0,P.jsx)(W,{actionType:C.Sx.Reddit,caption:"Reddit",fill:S().black,iconComponent:H,queryParams:{url:e},urlStub:C.ho.Reddit,windowName:"redditShare"}),$=(0,E.Kk)("twitter",{size:{width:24,height:24}}),q=({postUrl:e})=>/*#__PURE__*/(0,P.jsx)(W,{actionType:C.Sx.Twitter,caption:"Twitter",fill:S().twitterBlue,iconComponent:$,queryParams:{url:e},urlStub:C.ho.Twitter,windowName:"twitterShare"});var Q=s(49035),K=s(85191),Y=s(43776),X=s(63985),J=s(66869),Z=s(72991),ee=s(54934),et=s(46302),es=s(84991),ei=s(74082),en=s(41791);let eo={sendAPost:"nTtVZ",searchWrapper:"rnFEP",icon:"Yexkw",searchInput:"GISqs",selectedPills:"gaUpz",pillContainer:"hsO5V",recipientPill:"c3A_k",closePill:"IznjY",results:"KAE3V",noResults:"uiB5u",blogSuggestions:"T1G8P",blogInfo:"wAOAc",avatar:"IrKkW",isSelected:"PsNK0",blogName:"coBOo",blogTitle:"H6xf6",messageBoxWrapper:"A__g4",compositionAreaWrapper:"Rw5fx",sendButton:"cFsuL",errorMessage:"QJkxF",backButton:"A0l7h",actionsWrapper:"CTDfP",actions:"gdfgp"},ea=250,er={background:"currentColor",boxShadow:"0 0 0 2px currentColor"};class el extends f.Component{constructor(...e){super(...e),n()(this,"state",{blogs:[],blogSearchName:"",isLoading:!0,recipients:[],recipientsHash:{},userBlogs:[],senderBlog:void 0,messageValue:"",sendInProgress:!1,isSenderVerified:!0}),n()(this,"containerRef",null),n()(this,"searchInputRef",null),n()(this,"apiHelper",(0,J.Ay)(this.props.appContext.apiFetch)),n()(this,"suggestedBlogsFetch",null),n()(this,"userInfoFetch",null),n()(this,"setContainerRef",e=>this.containerRef=e),n()(this,"setSearchInputRef",e=>this.searchInputRef=e),n()(this,"debouncedGetSuggestedBlogs",(0,et.A)(()=>{this.getSuggestedBlogs()},ea)),n()(this,"onChangeSearchInput",e=>this.setState({blogSearchName:e.target.value},this.debouncedGetSuggestedBlogs)),n()(this,"onKeyDownSearchInput",e=>{let{blogSearchName:t,recipients:s}=this.state;e.key===c.qW.Backspace&&s.length&&""===t&&this.toggleRecipient(s[s.length-1])}),n()(this,"getToggleRecipientOnClick",e=>t=>{t.preventDefault(),t.nativeEvent.stopImmediatePropagation(),this.toggleRecipient(e)}),n()(this,"onClickSelectedBlog",e=>this.setState({senderBlog:e})),n()(this,"onChangeMessageTextarea",e=>this.setState({messageValue:e.target.value})),n()(this,"getFillColorForTheme",e=>e?.linkColor?(0,en.mM)(this.props.paletteContext.colors.white,e.linkColor):this.props.paletteContext.colors["deprecated-accent"]),n()(this,"sendPost",e=>t=>{let{messageValue:s,senderBlog:i,recipients:n,sendInProgress:o}=this.state,{appContext:{logEvent:a,_t:r},asText:l,shortUrl:d,id:c,close:h,blog:p,placementId:u,earnedId:m,toastContext:{toggleToast:g}}=this.props,{openConversationWindow:b}=this.props.messagingContext;if(t?.stopPropagation(),!n.length||o||!p?.uuid||!i?.uuid)return Promise.resolve();this.setState({sendInProgress:!0});let x=i.uuid,v={type:l?X.G.Text:X.G.Post,participant:x,...l&&{content:{text:d??""}},...!l&&{postToShare:{id:c,blog:p.uuid}}},f={type:X.G.Text,participant:x,content:{text:s}},j=n.reduce((e,t)=>(t.uuid&&e.push({participants:[t.uuid,x]}),e),[]);return this.apiHelper.batchSendMessage(v,j).fetch().then(()=>s?this.apiHelper.batchSendMessage(f,j).fetch():Promise.resolve({})).then(()=>{a({eventName:y.R.SendAPostSelected,eventDetails:{placement_id:u,earned_id:m}}),this.props.isMobile||1!==n.length?g(r("The post was shared!")):b?.({selectedBlogName:i?.name,otherParticipantName:n[0].name}),h?.(),e?.closeContainingPopover()}).catch(e=>{e?.detailedErrors?.[0]?.code===7001&&this.setState({isSenderVerified:!1}),this.setState({sendInProgress:!1})})}),n()(this,"toggleRecipient",e=>{if(e.uuid){let{recipients:t,recipientsHash:s}=this.state;s[e.uuid]?(t.splice(t.indexOf(e),1),this.setState({recipients:t}),delete s[e.uuid]):(s[e.uuid]=e,this.setState({recipientsHash:s,recipients:t.concat(e),blogSearchName:""}))}}),n()(this,"getSuggestedBlogs",()=>{this.setState({isLoading:!0});let{blog:e}=this.props,{blogSearchName:t}=this.state;this.suggestedBlogsFetch?.cancel(),this.suggestedBlogsFetch=(0,ei.A)(this.apiHelper.getSuggestedParticipants(void 0,{q:t,limit:12,include_recent:!0}).fetch()),Promise.all([this.suggestedBlogsFetch,this.getUserInfo()]).then(([{response:t}])=>{let{blogs:s}=t,{senderBlog:i}=this.state;this.setState({blogs:e?.uuid===i?.uuid?s.filter(t=>t.uuid!==e?.uuid):(s.some(t=>t.uuid===e?.uuid)?s:[...e?[e]:[],...s]).filter(e=>!!e?.uuid),isLoading:!1})}).catch(e=>{e?.detailedErrors?.[0]?.code===7001&&this.setState({isLoading:!1,isSenderVerified:!1})})}),n()(this,"getUserInfo",()=>this.state.senderBlog?Promise.resolve():(this.userInfoFetch=(0,ei.A)(this.props.appContext.getUserInfo().then(e=>e)),this.userInfoFetch.then(e=>{let t=e.blogs.filter(e=>e.canMessage);return new Promise(e=>this.setState({userBlogs:t,senderBlog:(0,es.A)(t)},e))})))}componentDidMount(){let{hideMessaging:e,appContext:{isLoggedIn:t}}=this.props;this.searchInputRef?.focus(),t&&!e&&this.getSuggestedBlogs()}componentWillUnmount(){this.suggestedBlogsFetch?.cancel(),this.userInfoFetch?.cancel(),this.debouncedGetSuggestedBlogs.cancel()}render(){let{isSenderVerified:e}=this.state;return/*#__PURE__*/(0,P.jsx)("div",{className:a()(eo.sendAPost,this.props?.className),ref:this.setContainerRef,children:/*#__PURE__*/(0,P.jsxs)(Z.s.Provider,{value:this.containerRef,children:[/*#__PURE__*/(0,P.jsx)(c.Ay,{disable:c.WC}),e?this.renderSearchBarAndActions():this.renderVerificationErrorAndPostActionsAfterSendFails()]})})}renderSearchBarAndActions(){let{hideMessaging:e,appContext:{_t:t,isLoggedIn:s}}=this.props,{blogSearchName:i,isLoading:n,messageValue:o,recipients:a,senderBlog:r,sendInProgress:d,userBlogs:c}=this.state;return/*#__PURE__*/(0,P.jsxs)(P.Fragment,{children:[s&&!e&&/*#__PURE__*/(0,P.jsxs)(P.Fragment,{children:[/*#__PURE__*/(0,P.jsxs)("div",{className:eo.searchWrapper,children:[this.props.isMobile&&this.renderMobileBackButton(),/*#__PURE__*/(0,P.jsx)("div",{className:eo.icon,children:/*#__PURE__*/(0,P.jsx)(u.A,{colors:{primary:S().paletteGray65},size:{width:18,height:18}})}),/*#__PURE__*/(0,P.jsxs)("div",{className:eo.selectedPills,children:[/*#__PURE__*/(0,P.jsx)("ul",{className:eo.pillContainer,children:this.renderRecipientPills()}),/*#__PURE__*/(0,P.jsx)("input",{className:eo.searchInput,onChange:this.onChangeSearchInput,onKeyDown:this.onKeyDownSearchInput,placeholder:a.length?"":t("Message to..."),ref:this.setSearchInputRef,type:"text",value:i})]})]}),/*#__PURE__*/(0,P.jsx)("div",{"aria-label":t("Suggested blogs"),className:eo.results,children:n?/*#__PURE__*/(0,P.jsx)(m.A,{centerOrientation:"horizontal"}):this.renderLoadedRecipientSelection()})]}),a.length?/*#__PURE__*/(0,P.jsx)(b.Np.Consumer,{children:e=>/*#__PURE__*/(0,P.jsxs)("div",{className:eo.messageBoxWrapper,children:[/*#__PURE__*/(0,P.jsx)("div",{className:eo.compositionAreaWrapper,children:/*#__PURE__*/(0,P.jsx)(g.A,{avatar:r?/*#__PURE__*/(0,P.jsx)(l.Ay,{avatarDimension:24,avatarOnly:!0,avatarShape:Y.b.Circle,blogs:c,displayAvatar:!0,onClickSelectedBlog:this.onClickSelectedBlog,selectedBlog:r}):null,isMobile:!!this.props.isMobile,maxLength:400,onChange:this.onChangeMessageTextarea,onSubmit:this.sendPost(e),value:o})}),/*#__PURE__*/(0,P.jsx)(Q.A,{disabled:d,forceUseAirplane:!0,onClick:this.sendPost(e),style:{fill:this.getFillColorForTheme(a[0].theme)},wrapperClassName:eo.sendButton})]})}):this.renderPostActions()]})}renderVerificationErrorAndPostActionsAfterSendFails(){return/*#__PURE__*/(0,P.jsxs)(P.Fragment,{children:[/*#__PURE__*/(0,P.jsx)("p",{className:eo.errorMessage,children:/*#__PURE__*/(0,P.jsx)(K.Ay,{children:"Hold up! You need to verify your email address before you can send this post to an other Tumblr. In the meantime, share it on social media."})}),this.renderPostActions()]})}renderMobileBackButton(){let{_t:e}=this.props.appContext;return/*#__PURE__*/(0,P.jsx)(d.A,{label:e("Return"),onClick:this.props.close,wrapperClassName:eo.backButton,children:/*#__PURE__*/(0,P.jsx)(h.p,{colors:{primary:S().paletteGray65},size:{width:18,height:18}})})}renderRecipientPills(){let{recipients:e}=this.state;return!!e.length&&/*#__PURE__*/(0,P.jsx)(P.Fragment,{children:e?.map(e=>/*#__PURE__*/P.jsxs("li",{className:eo.recipientPill,style:{background:this.getFillColorForTheme(e.theme)},children:[e.name,/*#__PURE__*/P.jsx(p.h,{className:eo.closePill,onClick:this.getToggleRecipientOnClick(e),size:{width:12,height:12}})]},e.name))})}renderLoadedRecipientSelection(){let{recipients:e,blogs:t,recipientsHash:s}=this.state,{_t:i}=this.props.appContext;return!!t?.length&&/*#__PURE__*/(0,P.jsxs)("div",{className:eo.blogSuggestions,children:[e.map(e=>this.renderBlogInfoCard(e,!0)),t.map(e=>e.uuid&&s[e.uuid]?null:this.renderBlogInfoCard(e,!1))]})||/*#__PURE__*/(0,P.jsx)("p",{className:eo.noResults,children:i("No Blogs Found.")})}renderBlogInfoCard(e,t){let{_c:s}=this.props.appContext,i=t?{color:this.getFillColorForTheme(e.theme)}:void 0;return/*#__PURE__*/(0,P.jsxs)(d.A,{label:s("Placeholder is blog name for recipient",t?"Unselect %1$s":"Select %1$s",[e.name]),onClick:this.getToggleRecipientOnClick(e),style:i,wrapperClassName:a()(eo.blogInfo,{[eo.isSelected]:t}),children:[/*#__PURE__*/(0,P.jsx)(r.A,{avatarShape:e.theme?.avatarShape||Y.b.Square,className:eo.avatar,dimension:54,imageResponse:e.avatar,imgStyleProps:t?er:void 0,isAdult:e.isAdult}),/*#__PURE__*/(0,P.jsx)("p",{className:eo.blogName,children:e.name}),/*#__PURE__*/(0,P.jsx)("p",{className:eo.blogTitle,children:e.title})]},e.uuid)}renderPostActions(){let{blog:e,id:t,shortUrl:s,postUrl:i,embedUrl:n}=this.props;return/*#__PURE__*/(0,P.jsx)("div",{className:eo.actionsWrapper,children:/*#__PURE__*/(0,P.jsxs)("div",{className:eo.actions,children:[!!i&&/*#__PURE__*/(0,P.jsx)(R,{postUrl:i}),!!n&&/*#__PURE__*/(0,P.jsx)(D,{blog:e,embedUrl:n,id:t}),!!s&&/*#__PURE__*/(0,P.jsx)(U,{postUrl:s}),!!s&&/*#__PURE__*/(0,P.jsx)(q,{postUrl:s}),!!s&&/*#__PURE__*/(0,P.jsx)(V,{postUrl:s}),!!i&&/*#__PURE__*/(0,P.jsx)(G,{postUrl:i})]})})}}let ed=(0,ee.bb)(el,{appContext:!0,toastContext:!0,messagingContext:!0,paletteContext:!0})},8313:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(99426),a=s(20928);let r=(0,a.Kk)("sponsored-border",{size:{width:25,height:25}}),l=(0,a.Kk)("sponsored-dollar",{size:{width:14,height:8}});var d=s(85191),c=s(36665),h=s(94048),p=s(4613),u=s(25183),m=s(56040),g=/*#__PURE__*/s.n(m);let b={sponsoredContainer:"fLccs",hideOnMobile:"b76BB",sponsoredSpinner:"zU1s3",sponsoredDollar:"LVy2A",sponsoredBorder:"m544j",sponsoredBlaze:"XuRmK",sponsoredText:"UGqjE",adFreeContainer:"lEZQk",adFreeText:"IBqNg"};var x=s(60397);let v=function({dollarSize:e={width:8,height:11},blazeSize:t={width:13,height:13},link:s,color:i=g().paletteGray65,showSpinner:a=!0,showSponsoredText:m=!0,showAdFreeLink:v=!0,hideOnMobile:f=!0,isBlazeCampaign:y,className:j}){let{wwwBaseUrl:C}=(0,p.Us)(),{logEvent:w}=(0,u.Ul)(),A=(0,c.useRef)(null),k=s??`${C}/docs/en/relevantads`;return y&&(k=s??"https://help.tumblr.com/hc/articles/5298854249367-Blaze-FAQ"),/*#__PURE__*/(0,x.jsxs)(x.Fragment,{children:[/*#__PURE__*/(0,x.jsxs)("a",{className:n()(b.sponsoredContainer,{[b.hideOnMobile]:f},j),href:k,target:"_blank",children:[a&&/*#__PURE__*/(0,x.jsxs)("div",{className:b.sponsoredSpinner,children:[y?/*#__PURE__*/(0,x.jsx)("div",{className:b.sponsoredBlaze,children:/*#__PURE__*/(0,x.jsx)(o.A,{filled:!0,filledIconColors:{primary:"#666"},size:t})}):/*#__PURE__*/(0,x.jsx)("div",{className:b.sponsoredDollar,children:/*#__PURE__*/(0,x.jsx)(l,{colors:{primary:i},size:e})}),/*#__PURE__*/(0,x.jsx)("div",{className:b.sponsoredBorder,ref:A,children:/*#__PURE__*/(0,x.jsx)(r,{colors:{primary:i},size:{width:22,height:22}})})]}),m&&/*#__PURE__*/(0,x.jsx)(x.Fragment,{children:/*#__PURE__*/(0,x.jsx)("div",{className:b.sponsoredText,style:{color:i},children:y?/*#__PURE__*/(0,x.jsx)(d.Ay,{comment:"Label for blaze campaigns, were Blaze is the product name.",children:"Sponsored with Blaze"}):/*#__PURE__*/(0,x.jsx)(d.Ay,{children:"Sponsored"})})})]}),v&&/*#__PURE__*/(0,x.jsx)("a",{className:b.adFreeContainer,href:"/settings/ad-free-browsing?source=tsd",onClick:()=>{w({eventName:h.R.AdFreeLinkClick})},rel:"noopener noreferrer",style:{borderColor:i},target:"_blank",children:/*#__PURE__*/(0,x.jsx)("div",{className:b.adFreeText,style:{color:i},children:/*#__PURE__*/(0,x.jsx)(d.Ay,{children:"Hide all ads"})})})]})}},58791:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s(53564),n=s(85191);let o={wrapper:"MbFgY",label:"fK9F5"};var a=s(60397);let r=({color:e,backgroundColor:t,size:s})=>{let r=t?{color:e,backgroundColor:t,padding:"2px 12px"}:{color:e};return/*#__PURE__*/(0,a.jsxs)("span",{className:o.wrapper,style:r,children:[/*#__PURE__*/(0,a.jsx)(i.A,{colors:{primary:e},size:{width:s,height:s}}),/*#__PURE__*/(0,a.jsx)("span",{className:o.label,children:/*#__PURE__*/(0,a.jsx)(n.Ay,{comment:"Indicates that the user has supported the creator of a post by subscribing to their blog.",children:"Supporting"})})]})}},62674:(e,t,s)=>{"use strict";s.d(t,{J:()=>N});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(36665),a=s(72591),r=s(92861),l=s(94048),d=s(45952),c=s(83322),h=s(84072),p=s(25183),u=s(54934),m=s(56139),g=s(63426),b=s(83087),x=s(4613),v=s(5064),f=s(70889),y=s(65392),j=s(99805),C=s(60397);let w=(0,y.A)(0,101).map(e=>e/100);function A(){return document.visibilityState}let k=function({logImpression:e}){let{features:{redpopDesktopVerticalNav:t}}=(0,x.Us)(),{isMobile:s}=(0,b.Ri)(),{numberOfColumns:i=1}=(0,f.cg)()||{},{numGlassOpen:n=0}=(0,v.Vp)()||{},r=n>0,l=(0,o.useRef)(),d=(0,o.useRef)(!1),c=(0,o.useRef)(0),h=(0,o.useRef)(A()),p=s?j.mobileHeaderHeight:t?0:j.desktopHeaderHeightPx,u=(0,o.useCallback)(()=>{let t="visible"===h.current&&"hidden"===A();d.current&&(t||!l.current?.inView||r)&&e(c.current),l.current?.inView||(d.current=!1),c.current=0},[e,r]),m=(0,o.useCallback)(()=>{u(),h.current=A()},[u]);(0,o.useEffect)(()=>(document.addEventListener("visibilitychange",m),function(){document.removeEventListener("visibilitychange",m)}),[m]);let y=(0,o.useRef)(u);return y.current=u,(0,o.useEffect)(()=>()=>{l.current&&(l.current.inView=!1),y.current()},[]),(0,o.useEffect)(()=>{r&&u()},[u,r]),(0,o.useEffect)(()=>{let e=setInterval(()=>{if(!l.current?.inView||"hidden"===A()||r)return;let{intersectionRect:e}=l.current.entry,t=Math.round(e.bottom-e.top),s=window.innerHeight-p;c.current=c.current+Math.round(t/s*500/i)},500);return()=>clearInterval(e)},[r,p,i]),/*#__PURE__*/(0,C.jsxs)(C.Fragment,{children:[/*#__PURE__*/(0,C.jsx)(a.pL,{className:g.A.dwellTimeObserver,onChange:(e,t)=>{l.current={inView:e,entry:t},e||u()},rootMargin:`-${p}px 0px 0px 0px`,threshold:w,children:/*#__PURE__*/(0,C.jsx)("div",{})}),/*#__PURE__*/(0,C.jsx)(a.pL,{className:g.A.hiddenObserverMiddlePoint,onChange:e=>{e&&(d.current=!0)},children:/*#__PURE__*/(0,C.jsx)("div",{})})]})};function N(e,t=!1){class s extends o.Component{constructor(...e){super(...e),n()(this,"areImpressionsEnabled",!t),n()(this,"provideEventDetails",d.L),n()(this,"isIntersecting",!1),n()(this,"isAboutToIntersect",!1),n()(this,"isPostTruncated",!1),n()(this,"setIsPostTruncatedForImpressionEvent",e=>{this.isPostTruncated=e}),n()(this,"setInViewCallback",e=>{this.inViewCallback=e}),n()(this,"setApproachingViewCallback",e=>{this.approachingViewCallback=e}),n()(this,"isInView",()=>this.isIntersecting),n()(this,"isApproachingView",()=>this.isAboutToIntersect),n()(this,"onEnterView",e=>{this.isIntersecting=e,this.isIntersecting?(this.inViewCallback?.(),this.inViewCallback=null,this.didBeginIntersecting()):this.didEndIntersecting()}),n()(this,"beforeEnterView",e=>{this.isAboutToIntersect=e,this.isAboutToIntersect&&this.approachingViewCallback?.()}),n()(this,"didBeginIntersecting",()=>{if(!this.areImpressionsEnabled)return;let{timelineObject:e,adContext:t,postNsfwContext:{setNsfwPostInView:s}}=this.props,{adm:i}=e;!1===e.isBrandSafe&&s(e.id,!0),i&&t.sendImpressionADMBeacon(i),(e?.displayType===r.q.Sponsored||(0,c.bZ)(e))&&(this.logImpression({eventName:l.R.Impression}),this.viewableImpressionTimer=window.setTimeout(()=>{this.logImpression({eventName:l.R.ViewableImpression}),this.viewableImpressionTimer=null},1e3))}),n()(this,"logImpression",({eventName:e})=>{let{logImpression:t}=this.props.appContext,{tabId:s}=this.props.dashboardContext,{timelineObject:i}=this.props,{placementId:n,displayType:o,serveId:a}=i,r={...this.provideEventDetails(i,!0),tab:s};(0,p.rr)(t,this.context.eventDetails,{placementId:n,displayType:o,serveId:a,eventName:e,eventDetails:r})}),n()(this,"logImpressionWithDwellTime",(e,t)=>{let{logImpression:s,isLoggedIn:i,configRef:n}=this.props.appContext,{displayMode:o}=this.props.timelineContext,{tabId:a,tabs:d}=this.props.dashboardContext,{timelineObject:u}=this.props,{placementId:m,displayType:g,serveId:b}=u;if(u?.displayType===r.q.Sponsored)return;let x=u.objectType===c.vt.Post?(0,h.NZ)(c.vt.Post):u.objectType,v="/"===t?i?"/dashboard":n?.takeoverLoggedOut?"/login":"/explore":t;(0,p.rr)(s,this.context.eventDetails,{placementId:m,displayType:g,serveId:b,pathname:v,eventName:l.R.Impression,eventDetails:{...this.provideEventDetails(u,!0),post_id:u.id,trackable_type:x,dwell_time:e,display_mode:o,blog_id:u.blog?.uuid,is_post_trucated:this.isPostTruncated,tab:a,tab_position:a&&d?.indexOf(a)}},{allowRepeatedImpressions:!0})}),n()(this,"didEndIntersecting",()=>{let{timelineObject:e,postNsfwContext:{setNsfwPostInView:t}}=this.props;this.viewableImpressionTimer&&(window.clearTimeout(this.viewableImpressionTimer),this.viewableImpressionTimer=null),!1===e.isBrandSafe&&t(e.id,!1)}),n()(this,"setImpressionsEnabled",e=>{let t=this.areImpressionsEnabled;this.areImpressionsEnabled=e,t!==e&&e&&this.isIntersecting&&this.didBeginIntersecting()}),n()(this,"setProvideEventDetails",e=>this.provideEventDetails=e)}render(){let{placementId:s,serveId:i,displayType:n}=this.props.timelineObject,o={...this.props,setIsPostTruncatedForImpressionEvent:this.setIsPostTruncatedForImpressionEvent,...t?{setImpressionsEnabled:this.setImpressionsEnabled,setProvideEventDetails:this.setProvideEventDetails,isInView:this.isInView,isApproachingView:this.isApproachingView,setInViewCallback:this.setInViewCallback,setApproachingViewCallback:this.setApproachingViewCallback}:{}},a=/*#__PURE__*/(0,C.jsx)(e,{...o});return s||i||n===r.q.Sponsored?/*#__PURE__*/(0,C.jsx)(S,{beforeEnterView:this.beforeEnterView,logDwelltimeImpression:this.logImpressionWithDwellTime,onEnterView:this.onEnterView,children:a}):a}componentDidUpdate(e){this.props.timelineObject.placementId!==e.timelineObject.placementId&&this.didEndIntersecting()}componentWillUnmount(){let{timelineObject:e,postNsfwContext:{setNsfwPostInView:t}}=this.props;this.viewableImpressionTimer&&window.clearTimeout(this.viewableImpressionTimer),!1===e.isBrandSafe&&t(e.id,!1)}}return n()(s,"contextType",p.bh),(0,m.r)(s,`${e.name}WithImpressionLogging`),(0,u.bb)(s,{appContext:!0,adContext:!0,timelineContext:!0,dashboardContext:!0,postNsfwContext:!0})}let S=({children:e,beforeEnterView:t,onEnterView:s,logDwelltimeImpression:i})=>{let n=`${Math.max(window.innerHeight+270,700)}px`,[r,l]=(0,o.useState)();return(0,o.useEffect)(()=>{l(window.location.pathname)},[]),/*#__PURE__*/(0,C.jsxs)("div",{className:g.A.impressionLoggingWrapper,children:[r&&/*#__PURE__*/(0,C.jsx)(k,{logImpression:e=>i(e,r)}),/*#__PURE__*/(0,C.jsx)(a.pL,{className:g.A.hiddenObserver,onChange:s}),/*#__PURE__*/(0,C.jsx)(a.pL,{className:g.A.hiddenObserver,onChange:t,rootMargin:`0px 0px ${n} 0px`,triggerOnce:!0}),e]})}},69384:(e,t,s)=>{"use strict";s.d(t,{qd:()=>Z,Ay:()=>Q,j0:()=>Y});var i=s(56365),n=s(11412),o=s(41214),a=s(19974),r=s(66910),l=s(44842),d=s(88346),c=/*#__PURE__*/s.n(d),h=s(11100),p=s(36665),u=s(54934);let m={keepReadingContainer:"ZqZ6N",keepReading:"lYffY"};var g=s(60397);class b extends p.Component{constructor(...e){super(...e),c()(this,"state",{expanded:!1}),c()(this,"expand",()=>{this.setState({expanded:!0})})}componentDidUpdate(){let{unfoldNestedContent:e}=this.props.postTruncationContext,{expanded:t}=this.state;e&&!t&&this.expand()}render(){if(this.state.expanded)return this.props.components;let{_t:e}=this.props.appContext,t=e("Keep reading");return/*#__PURE__*/(0,g.jsx)("div",{className:m.keepReadingContainer,children:/*#__PURE__*/(0,g.jsx)(h.A,{className:m.keepReading,label:t,onClick:this.expand,children:t})})}}let x=(0,u.bb)(b,{appContext:!0,postTruncationContext:!0});var v=s(70933),f=s(4613),y=s(56040),j=/*#__PURE__*/s.n(y);let C={pollAnswerContainer:"vtkd5",pollAnswerContentContainer:"N9n3m",pollAnswerButton:"nXX23",pollVoteProgressBar:"uEVCb",pollAnswerVoteCount:"Cetez",selectedPollAnswerIcon:"jkMFs"},w=function({answered:e,choices:t,component:s,handleChoiceClick:i,isSelected:n,isPollAnswer:o,totalVotes:a}){let{_t:r}=(0,f.Us)();if(o){if(!e)return/*#__PURE__*/(0,g.jsx)(h.A,{label:r("Poll Choice"),onClick:i,wrapperClassName:C.pollAnswerButton,children:/*#__PURE__*/(0,g.jsx)("div",{className:C.pollAnswerContainer,children:s})});let o=S(s.props.blockIndex,t)?.voteCount||0,l=Math.round(o/a*100);return/*#__PURE__*/(0,g.jsxs)("div",{className:C.pollAnswerContainer,children:[/*#__PURE__*/(0,g.jsx)("progress",{className:C.pollVoteProgressBar,max:a,value:o}),/*#__PURE__*/(0,g.jsxs)("div",{className:C.pollAnswerContentContainer,children:[s,n&&/*#__PURE__*/(0,g.jsx)("div",{className:C.selectedPollAnswerIcon,children:/*#__PURE__*/(0,g.jsx)(v.A,{colors:{primary:j().paletteBlack},size:{width:14,height:14}})}),/*#__PURE__*/(0,g.jsxs)("div",{className:C.pollAnswerVoteCount,children:[l,"%"]})]})]})}return s};var A=s(66869),k=s(22720),N=s(19869);function S(e,t){return t.find(t=>{let s=t.blocks.find(t=>t===e);return!!s||0===s})||null}let I=e=>!!e.selected.length;class P extends p.Component{constructor(...e){super(...e),c()(this,"state",{answered:I(this.props.layout),selected:this.props.layout.selected,totalVotes:this.props.layout.choices.reduce((e,t)=>e+t.voteCount,0),choices:this.props.layout.choices}),c()(this,"apiHelper",(0,A.Ay)(this.props.appContext.apiFetch))}componentDidUpdate(e){let t={};(0,k.n)(this.props.layout.selected,e.layout.selected)||(t.selected=this.props.layout.selected),(0,k.n)(e.layout.choices,this.props.layout.choices)||(t.choices=this.props.layout.choices),Object.keys(t).length&&this.setState({...t})}render(){let{components:e,layout:t}=this.props;return/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:e.map((e,s)=>{var i;let n=S(e.props.blockIndex,this.state.choices);return/*#__PURE__*/(0,g.jsx)(w,{answered:this.state.answered,choices:this.state.choices,component:e,handleChoiceClick:n?this.handleChoiceClick(n.choiceId):N.A,isPollAnswer:(i=e.props.blockIndex,!!((0,r.ur)(t)&&t.choices.find(e=>{let t=e.blocks.find(e=>e===i);return t||0===t}))),isSelected:!!n&&this.state.selected.indexOf(n.choiceId)>-1,totalVotes:this.state.totalVotes},s)})})}handleChoiceClick(e){return()=>this.votePoll([e])}votePoll(e){return this.apiHelper.votePoll(this.props.layout.pollId,e).fetch().then(({response:e})=>{this.setState({answered:!0,selected:e.selected,totalVotes:e.choices.reduce((e,t)=>e+t.voteCount,0),choices:e.choices})})}}let B=(0,f.Lk)(P);var T=s(74059),R=/*#__PURE__*/s.n(T),E=s(20344),M=s(57574),z=s(40176),L=s(99805);let D={rows:"GzjsW",row:"CQmeg",unstretched:"ntvhe"};var O=s(31687);class F extends p.Component{constructor(...e){super(...e),c()(this,"state",{isObjectFitSupported:!0})}componentDidMount(){this.setState(e=>{let t=CSS.supports?.("object-fit","cover");return e.isObjectFitSupported===t?null:{isObjectFitSupported:t}})}render(){let{layout:e,components:t,postContext:s,adContext:{adPlacementConfiguration:i,hydraConfigInstanceId:n}}=this.props,{isObjectFitSupported:o}=this.state;if(!o)return/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:t});let a=(0,O.WH)(e),l=Y(Z(a)),d=this.rowHasPaywallComponent();return/*#__PURE__*/(0,g.jsx)("div",{className:D.rows,children:a.display.map(e=>{let o=e.blocks;if(!o.length)return null;let a=o.map(e=>{if(d){let s=t.find(t=>t.props.blockIndex===e);if(s)return s}return t[l.indexOf(e)]});if(!a.length||1===o.length&&a[0]?.props?.block?.type===r._B.None)return null;let c=a.filter(U);if(1===a.length&&!c.length)return a;let h=o.reduce((e,t)=>`${e} ${t}`,"");if(e.mode?.type===r.wD.Carousel)return/*#__PURE__*/(0,g.jsx)(E.A,{items:a,krakenEventDetails:(0,z._)({adPlacementConfiguration:i,hydraConfigInstanceId:n,timelineObject:this.props.postContext.post})},h);let u=c.map(e=>(0,O.IY)((0,r.$E)(e.props.block))).sort((e,t)=>e-t)[0],m=!1,b=a.map(e=>{if(!U(e))return e;let t=e.props.block,i=new M.A((0,r.$E)(t));(s?.presentationStyle?.showsSmallImagesAtOriginalWidth??!0)&&1===a.length?i.getLargestImage().width<L.smallImagePostBreakpoint&&(m=!0):i.generateDisplayHeights(({width:e})=>u*e);let n={displayAtOriginalSize:m,block:{...t,media:i.getImagesArray(),imageScale:1/a.length}};return/*#__PURE__*/(0,p.cloneElement)(e,n)});return/*#__PURE__*/(0,g.jsx)("div",{className:R()(D.row,{[D.unstretched]:m}),children:b},h)})})}rowHasPaywallComponent(){return this.props.components.some(e=>e.props.block.type===r._B.Paywall)}}let W=(0,u.bb)(F,{postContext:!0,adContext:!0});function U(e){return e?.props?.block?.type===r._B.Image}let _=(e,t)=>{let s=(0,o.E)(e,t);return/*#__PURE__*/(0,g.jsx)(o.A,{block:e,blockIndex:t},s)},V=function({layout:e,components:t}){let s;return((0,r.iQ)(e)?s=/*#__PURE__*/(0,g.jsx)(l.A,{blog:e.attribution?.blog,components:t,isAsking:!0}):(0,r.ur)(e)?s=/*#__PURE__*/(0,g.jsx)(B,{components:t,layout:e}):(0,r.f3)(e)?s=/*#__PURE__*/(0,g.jsx)(l.A,{blog:e.attribution.blog,components:t,isAsking:!1}):(0,r.KP)(e)?s=/*#__PURE__*/(0,g.jsx)(W,{components:t,layout:e}):(0,r.Wi)(e)?s=/*#__PURE__*/(0,g.jsx)(x,{components:t}):((0,r.R$)(e)||(0,r.ob)(e))&&(s=/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:t})),s)?s:("production"===a.A.Development&&console.warn(`Unsupported layout type "${e.type}" in post`),null)};var H=s(40297),G=s(56356);let $=function({blocks:e}){let t=e.map(e=>({...e})),s=[],i=t.reduce((e,t)=>{if((0,r.zS)(t)&&(0,r.Hu)(t)){let i=e.length-1;if(i>=0){let n=e[i];if((0,r.Eg)(n)&&n.elements[0].subtype===t.subtype)return s.push({type:r._B.None}),n.elements=n.elements.concat(t),e}let n=t.subtype===r.pb.OrderedListItem?r._B.OrderedList:r._B.UnorderedList,o=[...s];return s=[],[...e,...o,{type:n,elements:[t]}]}let i=[...s];return s=[],[...e,...i,t]},[]);return i.push(...s),i};var q=s(65392);let Q=({adm:e,blocks:t,isEdit:s,isOriginalPost:o,layouts:a,placementId:l,postId:d,postingBlog:c})=>{let h=(0,G.Zm)(),{post:p,presentationStyle:u}=h,m=h===G.hJ,{hydraConfigInstanceId:b,adPlacementConfiguration:x}=(0,H.W)(),v=function({layouts:e,numberOfBlocks:t,isOriginalPost:s,postingBlog:i}){let n=[];for(let e=0;e<t;e+=1)n.push(e);let o=[];if(!e.length){let e={type:r.p5.Rows,rows:n.map(e=>[e])};o.push(e)}return e.forEach(e=>{if(o.push(e),(0,r.iQ)(e)){let t=n.slice(e.blocks.length);if(t.length){let e={type:s?r.p5.None:r.p5.Answer,blocks:t,...!s&&{attribution:{blog:i,type:"blog"}}};o.push(e)}}else if((0,r.ob)(e)){let t=n.slice(e.truncateAfter+1),s={type:r.p5.BelowTheFold,blocks:t};o.push(s)}}),o}({isOriginalPost:o,postingBlog:c,layouts:function(e){return e?e.filter(r.nW):[]}(a),numberOfBlocks:t.length}),f=t.map(e=>(0,r.Qu)(e)?{...e,blog:c}:e),y=function e(t,s){let i=[];return t.forEach(t=>{if(t){if(t.nestedLayouts?.length){let n=Y(Z(t)),o=[],a=[];t.nestedLayouts.forEach((t,i)=>{let n=Y(Z(t));if(i>0){let e=a[a.length-1];if(e+1!==n[0]){let t=X(s.slice(e+1,n[0])).map(_);o.push(...t);let i=(0,q.A)(e+1,n[0]);a.push(...i)}}o.push(...e([t],s)),a.push(...n)});let r=X(s.slice(n[0],a[0])).map(_),l=X(s.slice(a[0]+a.length,n[n.length-1]+1)).map(_);i.push(J(t,[...r,...o,...l]))}else{let e=Y(Z(t,s)),n=X(s.slice(e[0],e[e.length-1]+1));i.push(J(t,n.map(_)))}}}),i}(function(e){let t,s,i,n,o,a;if(e.length<=1)return e;let l=[];if(e.forEach(e=>{(0,r.ob)(e)?i=e:(0,r.Wi)(e)?n=e:(0,r.iQ)(e)?t=e:(0,r.f3)(e)?s=e:(0,r.KP)(e)?o=e:a=e}),i&&n){let e=[],s=[];if(t)e=[t];else if(o&&i.truncateAfter>-1){let t=i.blocks.length-1,n=K(o,t);e=[n[0]],s=[n[1]]}l.push({...i,nestedLayouts:e}),l.push({...n,...s.length&&{nestedLayouts:s}})}else{if(!t||!o)return e;{let e=t.blocks.length-1,i=K(o,e),n=[i[1]];l.push({...t,nestedLayouts:[i[0]]}),l.push(s?{...s,type:r.p5.Answer,nestedLayouts:n}:{...a,type:r.p5.None,nestedLayouts:n})}}return l}(v),f);return f.filter(r.TW).length?u.imagePostsOpenInPeepr?/*#__PURE__*/(0,g.jsx)(i.A,{blogName:c?.name,postId:d??p?.id,showBlogCard:!1,children:y}):/*#__PURE__*/(0,g.jsx)(n.A,{adm:e,krakenEventDetails:s||m?{}:(0,z._)({adPlacementConfiguration:x,hydraConfigInstanceId:b,timelineObject:p}),placementId:l,children:y}):/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:y})};function K(e,t){let s=[{type:r.p5.Rows,display:[]},{type:r.p5.Rows,display:[]}];if((0,r.Xq)(e)){let i=e.display;i.forEach((n,o)=>{if(t===n.blocks[n.blocks.length-1]){let t=i.slice(0,o+1),n=i.slice(o+1);s=[{...e,display:t},{...e,display:n}]}})}if((0,r.ef)(e)){let i=e.rows;i.forEach((n,o)=>{if(t===n[n.length-1]){let t=i.slice(0,o+1),n=i.slice(o+1);s=[{...e,rows:t},{...e,rows:n}]}})}return s}function Y(e){return[...e].sort((e,t)=>e-t)}function X(e){return e&&$({blocks:e})||[]}function J(e,t){let s=Z(e).reduce((e,t)=>e.concat(`${t} `),`${e.type} `);return/*#__PURE__*/(0,g.jsx)(V,{components:t,layout:e},s)}function Z(e,t){return(0,r.iQ)(e)||(0,r.f3)(e)||(0,r.ob)(e)||(0,r.Wi)(e)||(0,r.R$)(e)?e.blocks:(0,r.ef)(e)?e.rows.flat():(0,r.Xq)(e)?e.display.map(e=>e.blocks).flat():(0,r.ur)(e)&&t?.map((e,t)=>t)||[]}},49035:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(16064),a=s(98778),r=s(41186),l=s(4613),d=s(56040),c=/*#__PURE__*/s.n(d);let h={disabled:"yDfZA"};var p=s(60397);let u=({color:e=c().paletteGray65,forceUseAirplane:t=!1,disabled:s,wrapperClassName:i,width:d=24,height:u=24,...m})=>{let{_t:g}=(0,l.Us)(),b=s?c().paletteGray40:e,x=t?/*#__PURE__*/(0,p.jsx)(o.A,{colors:{primary:b},size:{width:21,height:21}}):/*#__PURE__*/(0,p.jsx)(a.A,{colors:{primary:b},size:{width:d,height:u}});return/*#__PURE__*/(0,p.jsx)(r.G,{...m,action:"share-button",disabled:s,label:g("Share"),wrapperClassName:n()(i,{[h.disabled]:!!s}),children:x})}},87185:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var i=s(56365),n=s(75776),o=s(85191),a=s(66910);let r={gifAttribution:"If3QZ"};var l=s(60397);let d=function({attribution:e}){return(0,a.er)(e)?/*#__PURE__*/(0,l.jsx)("div",{className:r.gifAttribution,"data-attribution":"true",children:e.blog?/*#__PURE__*/(0,l.jsx)(i.A,{blog:e.blog,postId:e.post.id,children:e.showPlatform?/*#__PURE__*/(0,l.jsx)(o.Ay,{components:{strong:/*#__PURE__*/(0,l.jsx)("strong",{})},params:{blogName:e.blog.name},children:"GIF by [strong][blogName][/strong] on Tumblr"}):/*#__PURE__*/(0,l.jsx)(o.Ay,{components:{strong:/*#__PURE__*/(0,l.jsx)("strong",{})},params:{blogName:e.blog.name},children:"GIF by [strong][blogName][/strong]"})}):e.showPlatform&&/*#__PURE__*/(0,l.jsx)(n.A,{to:e.url,children:/*#__PURE__*/(0,l.jsx)(o.Ay,{children:"View GIF on Tumblr"})})}):null}},99002:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>L,$5:()=>z});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(8796),a=s(66910),r=s(27201),l=s(88346),d=/*#__PURE__*/s.n(l),c=s(11100),h=s(35236),p=s(41076),u=s(26854),m=s(83087),g=s(36665),b=s(54934),x=s(56040),v=/*#__PURE__*/s.n(x),f=s(99805),y=/*#__PURE__*/s.n(f);let j={nativePlayer:"VpTnv",progress:"iFok_",withImage:"GR0kA",seeking:"bgpDC",wrapper:"vP7cO",playPause:"zwgHD",trackInfo:"ZVJh0",trackTitle:"Lshd2",trackArtist:"LKThX",trackAlbum:"OKWej",albumImage:"Zz9Fz"};var C=s(60397);class w extends g.Component{constructor(...e){super(...e),d()(this,"state",{isPlaying:!1,seekingBarWidth:0,isDragging:!1}),d()(this,"onTimeUpdate",()=>{if(!this.progress||!this.audioEl)return;let e=this.progress.clientWidth,t=this.audioEl.duration,s=Math.round(this.audioEl.currentTime/t*e);this.setState({seekingBarWidth:s})}),d()(this,"onEnded",()=>{this.setState({isPlaying:!1,seekingBarWidth:0}),this.audioEl&&(this.audioEl.currentTime=0)}),d()(this,"handlePlayButtonClick",()=>this.setState(e=>({isPlaying:!e.isPlaying}))),d()(this,"onTouchStart",e=>{this.state.isPlaying&&this.touchHandler(e)}),d()(this,"onTouchEnd",()=>{this.handleTouchEndMouseUp()}),d()(this,"onProgressClick",e=>{this.mouseHandler(e)}),d()(this,"onMouseMove",e=>{this.state.isDragging&&this.mouseHandler(e)}),d()(this,"onMouseDown",()=>{this.setState({isDragging:!0,isPlaying:!1})}),d()(this,"onMouseUp",()=>{this.handleTouchEndMouseUp()}),d()(this,"handleTouchEndMouseUp",()=>{this.setState({isDragging:!1,isPlaying:!0})}),d()(this,"touchHandler",e=>{let t=e.changedTouches[0].clientX,s=e.currentTarget;this.updateSeekBarPositionWithEvent(t,s)}),d()(this,"mouseHandler",e=>{let t=e.clientX,s=e.currentTarget;this.updateSeekBarPositionWithEvent(t,s)}),d()(this,"updateSeekBarPositionWithEvent",(e,t)=>{if(!this.audioEl||!this.progress)return;let s=t.firstElementChild?.getBoundingClientRect().left||0,i=this.audioEl.duration,n=this.progress.clientWidth,o=i/n*(e-s),a=Math.round(o/i*n);a<=n&&this.setState({seekingBarWidth:a}),this.audioEl.currentTime=o}),d()(this,"playAudio",async()=>{try{await this.audioEl?.play()}catch{this.setState({isPlaying:!1})}}),d()(this,"stopAudio",()=>{this.audioEl?.pause()})}componentDidUpdate(e,t){this.props.autoDockContext.setComponentToAutoDock?.(this.state.isPlaying),t.isPlaying!==this.state.isPlaying&&(this.state.isPlaying?this.playAudio():this.stopAudio()),e.isDocked&&!this.props.isDocked&&this.setState({isPlaying:!1})}render(){let{_c:e}=this.props.appContext,t=`${j.progress} ${this.props.poster?j.withImage:""}`,s=this.state.isPlaying?e("Pause the currently playing audio file for this block","Pause"):e("Play the audio file for this block","Play"),i={onTouchStart:this.onTouchStart,onTouchMove:this.touchHandler,onTouchEnd:this.onTouchEnd},n={onClick:this.onProgressClick,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp};return/*#__PURE__*/(0,C.jsxs)("div",{"aria-label":e("The label used to describe the audio block controls","Audio Player"),className:j.nativePlayer,children:[/*#__PURE__*/(0,C.jsx)(m.Ay,{children:({isMobile:e})=>/*#__PURE__*/(0,C.jsx)("div",{...e?i:n,"aria-valuemax":this.audioEl?.duration,"aria-valuemin":0,"aria-valuenow":this.audioEl?.currentTime,className:t,ref:e=>this.progress=e,role:"slider",children:/*#__PURE__*/(0,C.jsx)("div",{className:j.seeking,ref:e=>this.seeking=e,style:{width:`${this.state.seekingBarWidth}px`}})})}),/*#__PURE__*/(0,C.jsxs)("div",{className:j.wrapper,children:[/*#__PURE__*/(0,C.jsx)(c.A,{"aria-pressed":this.state.isPlaying,className:j.playPause,label:s,onClick:this.handlePlayButtonClick,title:s,type:"button",children:this.state.isPlaying?/*#__PURE__*/(0,C.jsx)(h.A,{colors:{primary:v().paletteWhite}}):/*#__PURE__*/(0,C.jsx)(p.A,{colors:{primary:v().paletteWhite},cropped:!0,size:{width:24,height:24}})}),/*#__PURE__*/(0,C.jsxs)("div",{className:j.trackInfo,children:[this.props.trackInfo.title&&/*#__PURE__*/(0,C.jsx)("div",{className:j.trackTitle,children:this.props.trackInfo.title}),this.props.trackInfo.artist&&/*#__PURE__*/(0,C.jsx)("div",{className:j.trackArtist,children:this.props.trackInfo.artist}),this.props.trackInfo.album&&/*#__PURE__*/(0,C.jsx)("div",{className:j.trackAlbum,children:this.props.trackInfo.album})]}),/*#__PURE__*/(0,C.jsx)("audio",{crossOrigin:"anonymous",onEnded:this.onEnded,onTimeUpdate:this.onTimeUpdate,preload:"auto",ref:e=>this.audioEl=e,style:j,title:this.props.trackInfo.title,children:/*#__PURE__*/(0,C.jsx)("source",{className:"audio-source",src:this.props.src})}),this.props.poster?/*#__PURE__*/(0,C.jsx)("div",{className:j.albumImage,children:/*#__PURE__*/(0,C.jsx)(u.A,{imageResponse:this.props.poster,sizes:`${y().audioPostAlbumCoverWidth}px`})}):null]})]})}}let A=(0,b.bb)(w,{appContext:!0,autoDockContext:!0}),k={embedWrapper:"BIsI3",embedSpotifyWrapper:"OHDdK",compact:"KilfT",spotifyPodcast:"SDYOz",embedSoundcloudWrapper:"zZeJN",embedBandcampWrapper:"t69by",audioBlock:"Z6JVM",embedIframe:"no7Dd",urlOnlyAudioBlock:"sl8DM"},N=(e,t=!1)=>void 0!==e.media&&"tumblr"===e.provider&&(t||(0,r.A)(e.media?.url)),S=e=>e.provider===a.Gy.Spotify,I=e=>S(e)&&!!(e.url?.includes("/episode/")||e.url?.includes("/show/")),P=e=>e.provider===a.Gy.Soundcloud,B=e=>e.provider===a.Gy.Bandcamp,T=(e,t=!1)=>!N(e,t)&&!!e.embedUrl&&(S(e)||B(e)||P(e)),R=(e,t,s,i)=>/*#__PURE__*/(0,C.jsx)(A,{isDocked:i,poster:s,src:e.url,trackInfo:t}),E=(e,t,s)=>/*#__PURE__*/(0,C.jsx)(o.A,{wrapperClassName:n()(k.embedWrapper,t),children:/*#__PURE__*/(0,C.jsx)("iframe",{className:k.embedIframe,frameBorder:"0",src:e,title:s})}),M=(e,t,s,i)=>{let{title:n,artist:o,album:a,poster:r,url:l}=e;if(N(e,i))return R(e.media,{title:n,artist:o,album:a},r,s);if(T(e,i))return E(e.embedUrl,t,n);let d=l||e.media?.url;return d?/*#__PURE__*/(0,C.jsx)("a",{className:k.urlOnlyAudioBlock,href:d,rel:"noopener noreferrer",target:"_blank",children:d}):null},z=e=>!N(e)&&!S(e)&&!T(e),L=({block:e,isDocked:t,showsMediaCompact:s=!1,isEditing:i=!1})=>{let o=n()({[k.compact]:!!t||s,[k.embedSpotifyWrapper]:S(e),[k.spotifyPodcast]:I(e),[k.embedSoundcloudWrapper]:T(e)&&P(e),[k.embedBandcampWrapper]:T(e)&&B(e)});return/*#__PURE__*/(0,C.jsx)("div",{className:n()(k.audioBlock,o),children:M(e,o,t,i)})}},41214:(e,t,s)=>{"use strict";s.d(t,{E:()=>eQ,A:()=>eY});var i=s(57830),n=s(74059),o=/*#__PURE__*/s.n(n),a=s(39977),r=s(11914),l=s(38663),d=s(86619),c=s(87185),h=s(85191),p=s(36665),u=s(94048),m=s(89972),g=s(66910),b=s(40297),x=s(4613),v=s(25183),f=s(56356);function y(e){try{let t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol}catch(e){return!1}}var j=s(57574),C=s(40176),w=s(60298),A=s(14899),k=s(56040),N=/*#__PURE__*/s.n(k),S=s(99805);let I={imageBlock:"DdFPj",unstretched:"jWulj",imageBlockLightbox:"seYEy",altTextHelper:"Dt_Mi",altTextPopupWrapper:"od3k_",altTextPopup:"CdvbL",popupArrow:"POhPp",imageBlockGifAttribution:"NDQyX",imageBlockLink:"Pr7R3",attribution:"eqBap",attributionText:"tGxQL",attributionIcon:"x3zpc",attributionUnstretched:"k8FXT"};var P=s(60397);let B=(e,t)=>{if(1===e)return t;let s=t.match(/[0-9]+/g);if(!s)return t;let i=s[0],n=Math.round(parseInt(i,10)*e*100)/100;return t.replace(i,`${n}`)},T=({block:e,displayAtOriginalSize:t=!0})=>{let s,i;let n=(0,f.Zm)(),{media:k,attribution:T,colors:R,altText:E,caption:M,imageScale:z=1,isBlurredImages:L,clickthrough:D}=e,O=n!==f.hJ,F=O?n.post.actions:void 0,{mobilePostWidth:W,desktopPostWidth:U,showsPostAttributionLink:_}=n.presentationStyle,{_t:V,_c:H,isLoggedIn:G}=(0,x.Us)(),{logEvent:$}=(0,v.Ul)(),{adPlacementConfiguration:q,hydraConfigInstanceId:Q}=(0,b.W)();if(W){let e=B(z,W);s=[`(max-width: ${S.phoneResponsiveMaxBreakpoint}px)`,e].join(" ")}let K=[s,B(z,U)].filter(e=>!!e).join(", "),Y=O&&!G?{"data-login-wall-type":"blogView","data-login-wall-title":H("Login wall: Title shown when user clicks on a blog or image after exceeding click counter limit","Seems we're out of free samples."),"data-login-wall-text":H("Login wall: Text shown when user clicks on a blog or image after exceeding click counter limit","But there's good news. Get free samples from now until, well, the ends of time itself by signing up for Tumblr and getting unlimited access not just to this blog, but countless others like it."),"data-login-wall-blog-name":n.post.blogName,"data-login-wall-post-id":n.post.id,"data-login-wall-post-slug":n.post.slug,"data-login-wall-redirect":"/dashboard"}:{},[X,J]=(0,p.useState)(!1),Z=async e=>{await (0,A.A)(e)||J(!1)},ee=()=>{if(E&&E!==V("Image")&&"image"!==E)return/*#__PURE__*/(0,P.jsx)(d.Ay,{arrowWrapperClassName:I.popupArrow,closeForAllExternalClicks:!0,component:/*#__PURE__*/(0,P.jsxs)("div",{className:I.altTextPopup,children:[/*#__PURE__*/(0,P.jsx)("h2",{children:/*#__PURE__*/(0,P.jsx)(h.Ay,{children:"Image Description"})}),E?.split("\n").map((e,t)=>/*#__PURE__*/P.jsxs("span",{children:[e,/*#__PURE__*/P.jsx("br",{})]},t))]}),hasArrow:!0,isChromeless:!0,isFlipEnabled:!1,isOpen:X,popoverWrapperClassName:I.altTextPopupWrapper,position:m.$x.BottomStart,positionBasedOffsetModifiers:{[m.$x.Bottom]:{left:-20,top:0}},skipClickToClose:!0,skipClickToOpen:!0,strategy:"fixed",targetStyles:{marginLeft:"20px",width:"40px"},toggle:null,useFlex:!0,children:/*#__PURE__*/(0,P.jsx)(P.Fragment,{children:/*#__PURE__*/(0,P.jsx)("div",{className:I.altTextHelper,"data-alt-text-popover":"true",onClick:e=>{e.preventDefault(),e.stopPropagation(),J(!X)},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),J(!X)),X&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),J(!1))},role:"button",tabIndex:0,children:"ALT"})})})},et=/*#__PURE__*/(0,P.jsxs)("figure",{className:I.imageBlock,...Y,onBlur:Z,children:[/*#__PURE__*/(0,P.jsx)(r.yH,{altText:E,colors:R,imageResponse:k,isBlurredImages:L,sizes:K}),ee()]}),es=e=>{$({eventName:e,eventDetails:{placement_id:n?.post?.placementId,...(0,C._)({adPlacementConfiguration:q,hydraConfigInstanceId:Q,timelineObject:n?.post})}})},ei=()=>{es(u.R.ClickThrough),es(u.R.Photo),es(u.R.PhotoClickThrough)},en=()=>{es(u.R.WrittenUrlClickThrough)},eo=(0,w.i)(F),ea=D?.webUrl||eo?.tspSkipLightbox&&eo?.urls.web,er=ea?/*#__PURE__*/(0,P.jsx)("a",{className:I.imageBlock,href:ea,rel:"noopener",target:"_blank",...!D?.webUrl&&{onClick:ei},children:et}):/*#__PURE__*/(0,P.jsx)(l.A,{altText:E,caption:M,className:I.imageBlockLightbox,imageResponse:k,children:et}),el=new j.A(k),ed=el.getLargestImage(),ec=n.presentationStyle.showsSmallImagesAtOriginalWidth??!0;if(!(0,g.er)(T)&&ed&&ec&&t&&ed.width<S.smallImagePostBreakpoint&&ed.height<2*S.smallImagePostBreakpoint&&(i=ed.width,et=/*#__PURE__*/(0,P.jsxs)("figure",{className:o()(I.imageBlock,I.unstretched),style:{width:i},children:[/*#__PURE__*/(0,P.jsx)(r.yH,{altText:E,colors:R,imageResponse:el.getImagesArrayWithoutCroppedImage(),isBlurredImages:L,sizes:`${i}px`}),ee()]}),er=ea?/*#__PURE__*/(0,P.jsx)("a",{className:I.imageBlock,href:ea,rel:"noopener",target:"_blank",...!D?.webUrl&&{onClick:ei},children:et}):et),T&&T.url&&y(T.url)&&_){if((0,g.er)(T))return/*#__PURE__*/(0,P.jsxs)("div",{className:I.imageBlockGifAttribution,children:[er,/*#__PURE__*/(0,P.jsx)(c.A,{attribution:T})]});let{url:e}=T;if((0,g.jV)(T)){let{displayText:t}=T;return/*#__PURE__*/(0,P.jsxs)("div",{className:I.imageBlockLink,children:[er,/*#__PURE__*/(0,P.jsxs)("a",{"aria-label":V("Attribution"),className:o()(I.attribution,{[I.attributionUnstretched]:!!i}),href:e,onClick:en,rel:"noopener",style:{width:i},target:"_blank",children:[/*#__PURE__*/(0,P.jsx)("div",{className:I.attributionText,children:t}),/*#__PURE__*/(0,P.jsx)("div",{className:I.attributionIcon,children:/*#__PURE__*/(0,P.jsx)(a.eh,{colors:{primary:N().paletteGray40},size:{width:14,height:14}})})]})]})}let{urlRedirect:t}=T,s=t||e,n=s&&y(s)?s:"",r=new URL(e||"").hostname;return/*#__PURE__*/(0,P.jsxs)("div",{className:I.imageBlockLink,children:[er,/*#__PURE__*/(0,P.jsxs)("a",{className:o()(I.attribution,{[I.attributionUnstretched]:!!i}),href:n,onClick:en,rel:"noopener",style:{width:i},target:"_blank",children:[/*#__PURE__*/(0,P.jsx)("div",{className:I.attributionText,children:r}),/*#__PURE__*/(0,P.jsx)("div",{className:I.attributionIcon,children:/*#__PURE__*/(0,P.jsx)(a.eh,{colors:{primary:N().paletteGray40},size:{width:14,height:14}})})]})]})}return er};var R=s(11654);let E={link:"zR66v"},M=function({block:e}){let{url:t,displayUrl:s,title:i,description:n,author:o,poster:a,siteName:r}=e;return/*#__PURE__*/(0,P.jsx)("div",{className:E.link,children:/*#__PURE__*/(0,P.jsx)(R.A,{info:{title:i,description:n,author:o,poster:a,siteName:r},urls:{displayUrl:s,redirectUrl:t}})})};var z=s(12154),L=s(53564),D=s(99442),O=s(33845);let F={container:"q9Ryt",line:"qos2S",arrow:"rjayT"},W=/*#__PURE__*/(0,P.jsx)("div",{className:F.arrow,children:/*#__PURE__*/(0,P.jsx)(O.vD,{size:{width:15,height:15}})}),U=/*#__PURE__*/(0,P.jsx)("div",{className:F.line}),_=()=>/*#__PURE__*/(0,P.jsxs)("div",{className:F.container,children:[U,W,/*#__PURE__*/(0,P.jsx)("div",{children:/*#__PURE__*/(0,P.jsx)(h.Ay,{comment:"The text for the 'teaser line' that separates the free content from the membership-only content",children:"Teaser"})}),W,U]});var V=s(79708),H=s(55321),G=s(22696),$=s(63140),q=s(82421),Q=s(76146),K=s(41791);let Y={paywallWrapper:"aU80z",isRenderedInPeepr:"nW3UY",isReblog:"hTKrt",header:"IfJLc",title:"FjdIX",text:"ZaZiD",actions:"cUWEe",checkout:"pKFYc"},X=function({block:e}){let{features:{paywallConsumption:t},wwwBaseUrl:s}=(0,x.Us)(),{isPeeprShowing:i}=(0,$.w)(),n=(0,f.rr)(),a=n?.post,{title:r,text:l,blog:d,subtype:c}=e;if(!d)return null;let{subscriptionPlan:h,name:p,isPaywallOn:u,paywallAccess:m}=d,{titleFont:b,titleFontWeight:v,linkColor:y,backgroundColor:j}=d.theme||{},C=(0,K.n9)(j||N().blogBackgroundColor);if(!t)return null;if(c===g.Ez.Divider)return m===G.xb.Creator?/*#__PURE__*/(0,P.jsx)(_,{}):null;if(c===g.Ez.Disabled&&m!==G.xb.Disabled||m!==G.xb.Disabled&&(!h||!u))return null;let w=c===g.Ez.Cta,A=(0,q.A)(V.Yh,{peeprBlogname:d?.name??""}),k=n?.presentationStyle.useExternalLinks,S=w?(0,z.A)({mixedString:l.replace(/%s/,"{{blogName /}}"),components:{blogName:/*#__PURE__*/(0,P.jsx)("strong",{children:p})}}):(0,z.A)({mixedString:l.replace(/%s/,"{{blogName /}}"),components:{blogName:k?/*#__PURE__*/(0,P.jsx)("a",{href:`${s}${A}`,rel:"noopener",target:"_blank",children:p}):/*#__PURE__*/(0,P.jsx)(H.N_,{to:A,children:p})}});return/*#__PURE__*/(0,P.jsxs)("div",{className:o()(Y.paywallWrapper,{[Y.isRenderedInPeepr]:i,[Y.isReblog]:a?.rebloggedFromId!==void 0}),style:(0,Q.A)(d),children:[/*#__PURE__*/(0,P.jsxs)("div",{className:Y.header,children:[w&&/*#__PURE__*/(0,P.jsx)(L.A,{colors:{primary:y},size:{width:36,height:36}}),/*#__PURE__*/(0,P.jsx)("span",{className:Y.title,style:{fontFamily:`'${b}'`,fontWeight:"bold"===v?"bold":"normal"},children:r})]}),/*#__PURE__*/(0,P.jsx)("div",{className:Y.text,style:{color:C},children:S}),w&&/*#__PURE__*/(0,P.jsx)("div",{className:Y.actions,children:/*#__PURE__*/(0,P.jsx)(D.A,{blog:d,className:Y.checkout,context:G.MI.Post,plan:h,postId:a?.id,useBlogColors:!0,useExternalLink:k})})]})};var J=s(8254),Z=s(28230),ee=s(49315),et=s(373),es=s(90789),ei=s(28775),en=s(83400);let eo=(0,es.h)(et.z.object({results:(0,ei.P)(et.z.number()),userVotes:et.z.array(et.z.string()).optional()})).transform(e=>e.response);function ea(e){return["poll-results",e]}let er=({blogName:e,enabled:t,pollId:s,postId:i,isClosed:n,communityId:o})=>{let{apiFetchWithSchema:a}=(0,x.Us)(),r=(0,en.EH)(o??null);return(0,ee.I)({queryKey:ea(s),queryFn:()=>a(`/v2/polls/${e}/${i}/${s}/results`,eo,{schemaErrorPrintFullResponse:!0,queryParams:r?{invite_hash:r}:{}}),enabled:t,refetchOnWindowFocus:!1,...n&&{staleTime:1/0}})};var el=s(75170);let ed=({blogName:e,pollId:t,postId:s})=>{let{apiFetch:i}=(0,x.Us)();return(0,el.n)({mutationFn:n=>i(`/v2/polls/${e}/${s}/${t}`,{method:"POST",body:{selected:[n]}})})};var ec=s(704),eh=s(68331),ep=s(56281),eu=s(79393),em=s(27699),eg=s(11100),eb=s(28304),ex=s(43776);let ev={pollBlock:"oXROo",loader:"BCfLs",pollQuestion:"iLvsm",pollAnswer:"GhhyY",vote:"SHz7w",pollAnswerText:"VVJno",unpublished:"EMkTm",results:"Lu7CU",pollAnswerProgressBar:"D63Wc",init:"a9eBs",highlight:"Fs5NP",pollAnswerAvatar:"MROL0",pollAnswerPercentage:"ACLdV",pollSummary:"SqYOv",forceBlogTheme:"ibcjV",inPostEditor:"WoipV"},ef=({answer:e,isFinal:t,isTopResult:s,onSelect:i,selected:n,percentage:a,view:r})=>{let{data:l}=(0,eb.Py)(),d=l?.user?.blogs?.[0].avatar,c=o()(ev.pollAnswer,{[ev.results]:"results"===r,[ev.vote]:"vote"===r,[ev.unpublished]:"unpublished"===r,[ev.highlight]:t&&s}),h=a>0&&a<.1?"<0.1":Math.round(10*a)/10;if("results"===r){let s=o()(ev.pollAnswerProgressBar,{[ev.pending]:!t});return/*#__PURE__*/(0,P.jsxs)("div",{className:c,"data-testid":"poll-answer",children:[/*#__PURE__*/(0,P.jsx)("div",{className:s,style:{width:`${a}%`,borderRadius:100===a?"8px":"8px 0 0 8px"}}),/*#__PURE__*/(0,P.jsx)("span",{className:ev.pollAnswerText,children:e.answerText}),n&&d&&/*#__PURE__*/(0,P.jsx)("span",{className:ev.pollAnswerAvatar,children:/*#__PURE__*/(0,P.jsx)(em.A,{avatarShape:ex.b.Square,dimension:24,imageResponse:d,isLink:!1,showBlogCard:!1})}),/*#__PURE__*/(0,P.jsx)("span",{className:ev.pollAnswerPercentage,children:`${h}%`})]})}return/*#__PURE__*/(0,P.jsx)(eg.A,{className:ev.pollAnswerText,disabled:"loading"===r,label:e.answerText,onClick:()=>i(e),wrapperClassName:c,children:e.answerText})};var ey=s(53986),ej=s(86115),eC=s(55474),ew=s(74082);let eA=e=>!!e.answers&&e.answers.length>=2,ek=e=>{if(!e.settings||e.settings.closeStatus!==g.pw.CLOSE_AFTER)return!1;if(e.timestamp&&e.settings.expireAfter)try{let t=(e.timestamp+e.settings.expireAfter)*1e3;return new Date(t)<=new Date}catch(e){return!1}return!0},eN=()=>{let{getUserInfo:e}=(0,x.Us)(),{isPeeprShowing:t}=(0,$.w)(),[s,i]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{let t=(0,ew.A)(e());return t.then(e=>{i(!!e.viewWithBlogTheme)}),()=>{t.cancel()}},[e]),!!t&&!!s},eS=()=>{let e=(0,f.rr)(),t=(0,eC.N)(),s=(0,ey.g)(),i=e?.post,n=t?.note;return n?.blogName&&n?.postId?[n.blogName,n.postId]:i?.blogName&&i?.id?[i.blogName,i.id]:[s.blogName||"",s.postId||""]},eI=(e,t,s,{_c:i,_cn:n})=>{let o=e+s-t;if(o===ej.N.Week)return i("Relative time to show on a poll which just been created","6 days 23 hours");if(o>ej.N.Day){let e=Math.floor(o/ej.N.Day),t=Math.floor((o-e*ej.N.Day)/ej.N.Hour);if(0===t&&e<=1)return i("Relative time to show on a poll expires in less than 1 day","less than 24 hours");let s=n("Relative day string to show on a poll expires in 1 week","%1$s day","%1$s days",e),a=n("Relative hour string to show on a poll expires in 1 week","%1$s hour","%1$s hours",t);return 0!==t?`${s} ${a}`:s}let a=Math.floor(o/ej.N.Hour),r=Math.floor((o-a*ej.N.Hour)/ej.N.Minute),l=n("Relative hour string to show on a poll expires in 1 day","%1$s hour","%1$s hours",a),d=n("Relative minute string to show on a poll expires in 1 day","%1$s minute","%1$s minutes",r);return a&&r?`${l} ${d}`:a&&!r?l:!a&&r?d:i("Relative time to show on a poll expires in less than 1 minute","less than 1 minute")},eP=({block:e})=>{let t;let{_c:s,_cn:i,isLoggedIn:n,wwwBaseUrl:a}=(0,x.Us)(),{openLoginWall:r}=(0,eh.K)(),l=(0,f.rr)(),d=eN(),[c,h]=eS(),{toggleToast:p}=(0,ep.Y)(),u=l?.post,m=u?u.state:void 0,b=m!==g.Wu.Draft&&m!==g.Wu.Queued&&m!==g.Wu.Submission,v=(0,J.jE)(),{data:y,error:j,isFetched:C,refetch:w}=er({blogName:c,enabled:eA(e)&&b,pollId:e.clientId,postId:h,isClosed:ek(e),communityId:u?.community?.name}),{mutate:A}=ed({blogName:c,pollId:e.clientId,postId:h}),N=t=>{if(!u)return;if(!n){l?.presentationStyle===eu.A.embed?window.open(`${a}${(0,V.cm)({peeprBlogname:c,peeprPostId:h?.toString(),peeprPostSlug:u?.slug})}`):r({redirect:(0,V.cm)({peeprBlogname:c,peeprPostId:h?.toString(),peeprPostSlug:u.slug})});return}let i=ea(e.clientId),o=v.getQueryData(i);v.setQueryData(i,{results:{...o?.results,[t.clientId]:(o?.results[t.clientId]||0)+1},userVotes:[t.clientId]}),A(t.clientId,{onError(e){v.invalidateQueries({queryKey:i}),e.detailedErrors.some(e=>e.code===ec.A.VoteAlreadyVoted)&&(p(s("Error message shown when a user is voting on the same poll more than once","You have already voted on this poll!"),"error"),w())}})};if(!eA(e))return null;let S=ek(e),I=y?.results||{},B=y?.userVotes||[];if("loading"==(t=b?C?j?"vote":S||B.length>0?"results":"vote":"loading":"unpublished"))return/*#__PURE__*/(0,P.jsx)("div",{className:ev.loader,children:/*#__PURE__*/(0,P.jsx)(Z.A,{centerOrientation:"horizontalAndVertical",color:k.paletteGray65,small:!0})});let T=Object.values(I).reduce((e,t)=>e+t,0),R="unpublished"===t?s("Message displayed when a the poll is in a draft/queued/submission post","The poll will be active once you publish the post."):S?i("Describes the final result for a poll","Final result from %1$s vote","Final result from %1$s votes",T):i("Number of votes","%1$s vote","%1$s votes",T)+(e.timestamp&&e.settings?.expireAfter?" • "+s("Indicated how much time is left before a poll closes","Remaining time: %1$s",[eI(e.timestamp,Math.round(Date.now()/1e3),e.settings?.expireAfter,{_c:s,_cn:i})]):""),E="results"===t?Math.max(...Object.values(I)):void 0;return/*#__PURE__*/(0,P.jsxs)("div",{className:o()(ev.pollBlock,{[ev.forceBlogTheme]:d,[ev.inPostEditor]:!u}),"data-attribution":"poll-block",children:[/*#__PURE__*/(0,P.jsx)("div",{className:ev.pollQuestion,children:e.question}),e.answers?.map(e=>{let s=0===T||void 0===I[e.clientId]?0:I[e.clientId]/T*100;return /*#__PURE__*/P.jsx(ef,{answer:e,isFinal:S,isTopResult:I[e.clientId]===E,onSelect:N,percentage:s,selected:B.indexOf(e.clientId)>=0,view:t},`answer-${e.clientId}`)}),/*#__PURE__*/(0,P.jsx)("div",{className:ev.pollSummary,children:R})]})};var eB=s(88346),eT=/*#__PURE__*/s.n(eB),eR=s(66580),eE=s(8648),eM=s(72591),ez=s(54934),eL=s(72294);let eD={wrapper:"LbyNj",dockButton:"WwHLs",putItBack:"bklUO",putItBackInner:"WPVvO"};class eO extends p.Component{constructor(...e){super(...e),eT()(this,"state",{shouldAutoDock:!1,alwaysAutoDock:!1,mediaSize:{width:0,height:0},isMounted:!1}),eT()(this,"reparentableMediaManager",new eE.K),eT()(this,"setMediaWrapper",e=>this.mediaWrapper=e),eT()(this,"updateMediaSize",()=>{if(this.mediaWrapper&&!this.currentPostIsDocked()){let e=this.mediaWrapper.offsetWidth,t=this.mediaWrapper.offsetHeight;(e!==this.state.mediaSize.width||t!==this.state.mediaSize.height)&&this.setState({mediaSize:{width:e,height:t}})}}),eT()(this,"currentPostIsDocked",()=>this.mediaIsDockable()&&!!this.props.dockableContext.reparentableMediaManager&&this.reparentableMediaManager.id===this.props.dockableContext.reparentableMediaManager?.id),eT()(this,"dockMedia",e=>{this.updateMediaSize(),this.props.dockableContext.dock({isAutoDock:e,dockedTimelineObject:this.getTimelineObject(),reparentableMediaManager:this.reparentableMediaManager,canAutoDock:this.state.alwaysAutoDock,timelineContext:this.props.timelineContext}),this.reparentableMediaManager.isReparented=!0}),eT()(this,"getTimelineObject",()=>({...this.props.postContext.post,content:[],trail:[]})),eT()(this,"undockMedia",()=>{this.props.dockableContext.undock()}),eT()(this,"setComponentToAutoDock",(e,t=!1)=>{this.mediaIsDockable()&&this.state.shouldAutoDock!==e&&this.setState({shouldAutoDock:e,alwaysAutoDock:t})}),eT()(this,"autoDock",e=>{this.mediaIsDockable()&&this.state.shouldAutoDock&&!e&&this.dockMedia(!0)}),eT()(this,"mediaIsDockable",()=>this.props.postContext.presentationStyle.showsDockMediaButton),eT()(this,"onClickDock",()=>{this.dockMedia(!1)})}componentDidMount(){this.setState({isMounted:!0},()=>{this.reparentableMediaManager.id=this.props.dockableContext.getId()})}componentWillUnmount(){let{undock:e}=this.props.dockableContext;this.currentPostIsDocked()&&e()}render(){let{media:e,appContext:{_c:t}}=this.props,s=this.currentPostIsDocked(),i=t('Button label. "Dock" as in for videos that get put in the sidebar and are always visible when you scroll',"Dock post in sidebar"),n=/*#__PURE__*/(0,P.jsx)(eg.A,{label:i,onClick:this.onClickDock,title:i,wrapperClassName:eD.dockButton,children:/*#__PURE__*/(0,P.jsx)(O.Q8,{colors:{primary:N().paletteWhite},size:{width:15,height:15}})}),o=t('Button label. "Dock" as in for videos that get put in the sidebar and are always visible when you scroll',"Undock post in sidebar"),a=/*#__PURE__*/(0,P.jsxs)(eg.A,{className:eD.putItBackInner,label:o,onClick:this.undockMedia,title:o,wrapperClassName:eD.putItBack,wrapperStyle:{paddingBottom:`calc(${this.state.mediaSize.height/this.state.mediaSize.width*100}% - 4px)`},children:[/*#__PURE__*/(0,P.jsx)(O.GE,{colors:{primary:N().paletteBlack},size:{width:30,height:30}}),t("Undock a video that is in the sidebar.","Put it back")]});return/*#__PURE__*/(0,P.jsx)(eL.A.Provider,{value:{setComponentToAutoDock:this.setComponentToAutoDock},children:/*#__PURE__*/(0,P.jsx)(eM.pL,{onChange:this.autoDock,threshold:.5,children:/*#__PURE__*/(0,P.jsxs)("div",{className:eD.wrapper,ref:this.setMediaWrapper,children:[this.state.isMounted&&/*#__PURE__*/(0,P.jsxs)(P.Fragment,{children:[this.reparentableMediaManager.render(e.component,this.forceUpdate.bind(this),{...e.props,isDocked:s}),/*#__PURE__*/(0,P.jsx)(eR.$,{reparentableContent:this.reparentableMediaManager,shouldRenderContent:!s})]}),this.mediaIsDockable()&&(s?a:n)]})})})}}let eF=(0,ez.bb)(eO,{appContext:!0,postContext:!0,dockableContext:!0,timelineContext:!0});var eW=s(99002);let eU=({block:e})=>{let{presentationStyle:{showsMediaCompact:t}}=(0,f.Zm)();return(0,eW.$5)(e)?/*#__PURE__*/(0,P.jsx)(eW.Ay,{block:e,showsMediaCompact:t}):/*#__PURE__*/(0,P.jsx)(eF,{media:{props:{block:e,showsMediaCompact:t},component:eW.Ay}})},e_={list:"RihjV"};var eV=s(6966);let eH=()=>{let e=(0,p.useRef)(null),{onVideoResize:t}=(0,eV.EZ)();return(0,p.useEffect)(()=>{let s=e.current;if(t&&s){let e=new ResizeObserver(e=>{let{offsetTop:s,offsetHeight:i}=e[0].target;t(s,s+i)});return e.observe(s),()=>{e.unobserve(s),e.disconnect()}}},[]),e};var eG=s(65785),e$=s(63369);let eq=({block:e,isEditing:t})=>{let s=eH(),[i,n]=(0,p.useState)(!1);(0,p.useEffect)(()=>{"undefined"!=typeof window&&n(!0)},[]);let o=i&&!(0,eG.no)(e)&&((0,eG.$D)(e,t)||(0,eG.yR)(e,t))?/*#__PURE__*/(0,P.jsx)(eF,{media:{props:{block:e},component:e$.A}}):/*#__PURE__*/(0,P.jsx)(e$.A,{block:e});return/*#__PURE__*/(0,P.jsx)("div",{ref:s,children:o})};function eQ(e,t){return`${e.type} ${t}`}let eK=function({block:e,displayAtOriginalSize:t}){if((0,g.zS)(e))return/*#__PURE__*/(0,P.jsx)(i.Ay,{block:e});if((0,g.Eg)(e)){let t=e.elements.map((e,t)=>{let s=eQ(e,t);return/*#__PURE__*/(0,P.jsx)(eK,{block:e,blockIndex:t},s)});switch(e.type){case g._B.OrderedList:return/*#__PURE__*/(0,P.jsx)("ol",{className:e_.list,children:t});case g._B.UnorderedList:return/*#__PURE__*/(0,P.jsx)("ul",{className:e_.list,children:t});default:return/*#__PURE__*/(0,P.jsx)("div",{})}}return(0,g.TW)(e)?/*#__PURE__*/(0,P.jsx)(T,{block:e,displayAtOriginalSize:t}):(0,g.Wh)(e)?/*#__PURE__*/(0,P.jsx)(eU,{block:e}):(0,g.WV)(e)?/*#__PURE__*/(0,P.jsx)(M,{block:e}):(0,g.HT)(e)?/*#__PURE__*/(0,P.jsx)(eq,{block:e}):(0,g.Qu)(e)?/*#__PURE__*/(0,P.jsx)(X,{block:e}):(0,g.pA)(e)?/*#__PURE__*/(0,P.jsx)(eP,{block:e}):null},eY=eK},11654:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var i=s(94483),n=s(26854),o=s(40297),a=s(25183),r=s(56356),l=s(79409),d=s(76444),c=s(40176),h=s(99805);let p={linkCard:"gXnIr",card:"gaUuO",defaultUrl:"Nu6LP",header:"Sv170",headerGlass:"prqGC",titleWrapper:"AO6cP",withImage:"POcHT",headerBackgroundImage:"pqMQN",noFooter:"NMiaP",footer:"PUcxv",noHeader:"o9hq8",belowImage:"rKhPR",description:"nsUJI",source:"OCxEI",divider:"OVGbY"};var u=s(60397);let m=({urls:e,info:t})=>{let{logEvent:s}=(0,a.Ul)(),m=(0,r.Zm)(),{hydraConfigInstanceId:g,adPlacementConfiguration:b}=(0,o.W)(),{redirectUrl:x,displayUrl:v}=e,f=m!==r.hJ?m?.post?.placementId:void 0,y=m!==r.hJ?(0,c._)({adPlacementConfiguration:b,hydraConfigInstanceId:g,timelineObject:m.post}):{},j=(0,l.R)(t)?function(e){return/*#__PURE__*/(0,u.jsx)("a",{className:p.defaultUrl,href:e,rel:"noopener",target:"_blank",children:e})}(x):function(e,t,s,o,a,r,d){let c=o??(d?(0,i.S)(d):null),m=!!s||!!c||!!a,g=!!t||!(0,l.V)(r),b=!!c||!!a,x=!m&&!g,v=[p.header];m||v.push(p.noFooter),r&&v.push(p.withImage);let f=h.phoneResponsiveMaxBreakpoint,y=`(max-width: ${f}px) 100vw, ${h.postWidth-2*h.linkCardHorizontalMargin}px`,j=g||x?/*#__PURE__*/(0,u.jsxs)("div",{className:v.join(" "),children:[r&&/*#__PURE__*/(0,u.jsx)(n.A,{className:p.headerBackgroundImage,imageResponse:r,sizes:y}),/*#__PURE__*/(0,u.jsx)("div",{className:p.headerGlass,children:/*#__PURE__*/(0,u.jsx)("span",{className:p.titleWrapper,children:x?d||e:t})})]}):null,C=[p.footer];g||C.push(p.noHeader),r&&C.push(p.belowImage);let w=b?/*#__PURE__*/(0,u.jsxs)("div",{className:p.source,children:[c,c&&a&&/*#__PURE__*/(0,u.jsx)("span",{className:p.divider,children:"|"}),a]}):null,A=m?/*#__PURE__*/(0,u.jsxs)("div",{className:C.join(" "),children:[s&&/*#__PURE__*/(0,u.jsx)("div",{className:p.description,children:s}),w]}):null;return/*#__PURE__*/(0,u.jsxs)("a",{className:p.card,href:e,target:"_blank",children:[j,A]})}(x,t?.title,t?.description,t?.siteName,t?.author,t?.poster,v);return/*#__PURE__*/(0,u.jsx)("div",{className:p.linkCard,onClick:f?()=>{(0,d.T)(s,f,y)}:void 0,role:"link",children:j})}},63369:(e,t,s)=>{"use strict";s.d(t,{A:()=>O});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(8796),a=s(41076),r=s(64867),l=s(36665),d=s(94048),c=s(25183),h=s(15652),p=s(60397);let u=/*#__PURE__*/(0,l.createContext)(null);u.displayName="YouTubeIframeContext";let m=({children:e,initialSeekTime:t})=>{let[s,i]=(0,l.useState)(t);return/*#__PURE__*/(0,p.jsx)(u.Provider,{value:{seekTime:s,setSeekTime:i},children:e})},g=()=>{let e=(0,l.useContext)(u);if(!e)throw Error("<YouTubeIframe> needs <YouTubeIframeProvider> in order to keep track of the current playback position (to resume playback when docked)");return e},b=/*#__PURE__*/function(e){return e.StateChanged="stateChanged",e.CurrentTimeChanged="currentTimeChanged",e}({}),x=/*#__PURE__*/function(e){return e.Initializing="initializing",e.Ready="ready",e.Buffering="buffering",e.Unstarted="unstarted",e.Playing="playing",e.AutoPlaying="autoPlaying",e.Paused="paused",e.Ended="ended",e}({}),v=/*#__PURE__*/function(e){return e.Play="play",e.Seek="seek",e.Mute="mute",e.GetCurrentTime="getCurrentTime",e}({}),f=({videoState:e,sendMessageToPlayer:t})=>{(0,l.useEffect)(()=>{let s;let i=()=>{e===x.Playing&&t&&(t(v.GetCurrentTime),s=setTimeout(i,1e3))};return s=setTimeout(i,1e3),()=>clearTimeout(s)},[e,t])},y=({src:e,videoState:t,onVideoStateChange:s,onVideoCurrentTimeChange:i})=>{let n=e.split("#").pop(),[o,a]=(0,l.useState)();(0,l.useEffect)(()=>{if(n){let{handler:e,getChannelInfo:t}=h.vv.listen(n,{[b.StateChanged]:e=>{if(e===x.Ready){let{source:i,origin:n,namespace:o}=t(),r=h._z.bind(null,{source:i,target:n,namespace:o});a(()=>r),s(e,r)}else s(e)},[b.CurrentTimeChanged]:i});return()=>h.vv.unlisten(e)}},[e,n,s,i]),f({videoState:t,sendMessageToPlayer:o})},j=()=>{let{logEvent:e}=(0,c.Ul)(),t={[x.Playing]:d.R.VideoPlay,[x.AutoPlaying]:d.R.VideoAutoPlay,[x.Paused]:d.R.VideoStop,[x.Ended]:d.R.VideoEnd},s=t=>{e({eventName:t,eventDetails:{vendor:"youtube",player_type:"youtube"}})};return e=>{let i=t[e];i&&s(i)}},C=/*#__PURE__*/(0,l.forwardRef)((e,t)=>{let{src:s,isDocked:i,onStateChange:n}=e,[o,a]=(0,l.useState)(x.Initializing),{seekTime:d,setSeekTime:c}=g(),h=j(),u=(0,l.useCallback)((e,t)=>{if(i&&e===x.Playing&&[x.Buffering,x.Unstarted].includes(o))return;let s=i&&e===x.Ready&&d;s&&(t?.(v.Seek,{to:d}),t?.(v.Play));let r=s?x.AutoPlaying:e;a(r),n&&n(r),h(r)},[d,i,o]);return y({src:s,videoState:o,onVideoStateChange:u,onVideoCurrentTimeChange:c}),/*#__PURE__*/(0,p.jsx)(r.A,{ref:t,...e,allow:i?"autoplay":void 0})});var w=s(11914),A=s(27120),k=s(91514),N=s(4613),S=s(56356),I=s(56040),P=/*#__PURE__*/s.n(I),B=s(99805),T=/*#__PURE__*/s.n(B),R=s(65785);let E={videoBlock:"ypwxx",embeddedPlayer:"Cf37_",notYoutubeEmbed:"ONC_J",notYoutubeWrapper:"X93pX",externalLink:"l7zyP",playButton:"gGIs6"};var M=s(19726);let z=({url:e,poster:t,provider:s})=>{let{_c:i}=(0,N.Us)();return/*#__PURE__*/(0,p.jsxs)("div",{className:E.externalLink,children:[t&&/*#__PURE__*/(0,p.jsx)(w.m1,{altText:s?i("Accessibility title of a thumbnail for a video on an external site. The placeholder is the name of the external site.","Thumbnail of a video on %1$s",[s]):i("Accessibility title of a thumbnail for a video on an unknown external site","Thumbnail of a video on an external site"),imageResponse:t}),/*#__PURE__*/(0,p.jsx)("div",{className:E.playButton,children:/*#__PURE__*/(0,p.jsxs)("a",{href:e,rel:"noopener",target:"_blank",children:[/*#__PURE__*/(0,p.jsx)(a.A,{colors:{primary:P().paletteWhite},cropped:!0,size:{width:24,height:24}}),s&&i("Title of a link to open a video on an external site. The placeholder is the name of the external site.","Watch on %1$s",[s])]})})]})},L=({block:{media:e,poster:t,filmstrip:s},isDocked:i})=>{let n=(0,S.Zm)();return/*#__PURE__*/(0,p.jsx)(M.Ay,{filmstrip:s,isDocked:i,media:e,poster:t,showsDockMediaButton:n!==S.hJ?n?.presentationStyle?.showsDockMediaButton:void 0,timelineObject:n!==S.hJ?n?.post:void 0,useViewabilityTracker:n!==S.hJ})},D=({provider:e,embedIframe:t,isDocked:s})=>/*#__PURE__*/(0,p.jsx)(A.xv,{children:({width:i})=>{let a=t.height/t.width,l=e===k.Nw.Youtube,d=Math.min(T().postWidth,i),c=a*d,h={src:t.url,title:e,allowFullScreen:!0,className:n()(E.embeddedPlayer,{[E.notYoutubeEmbed]:!l}),style:l?{maxWidth:d,height:c}:{}};return l?/*#__PURE__*/(0,p.jsx)(m,{children:/*#__PURE__*/(0,p.jsx)(o.A,{wrapperStyle:{minHeight:c},children:/*#__PURE__*/(0,p.jsx)(C,{...h,isDocked:s})})}):/*#__PURE__*/(0,p.jsx)(o.A,{wrapperStyle:{paddingBottom:`${100*a}%`},children:/*#__PURE__*/(0,p.jsx)(r.A,{...h})})}}),O=function({block:e,isDocked:t,isEditing:s}){let{poster:i,provider:o,url:a}=e,r=(0,R.$D)(e,s)?/*#__PURE__*/(0,p.jsx)(L,{block:e,isDocked:t}):(0,R.yR)(e,s)?/*#__PURE__*/(0,p.jsx)(D,{embedIframe:e.embedIframe,isDocked:t,provider:e.provider}):null;if(r){let t=o===k.Nw.Youtube,s=!t&&(0,R.yR)(e)?{paddingBottom:`${e.embedIframe.height/e.embedIframe.width*100}%`}:void 0;return/*#__PURE__*/(0,p.jsx)("div",{className:n()(E.videoBlock,{[E.notYoutubeWrapper]:(0,R.yR)(e)&&!t}),style:s,children:r})}return/*#__PURE__*/(0,p.jsx)(z,{poster:i,provider:o,url:a})}},19726:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>es});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(74059),a=/*#__PURE__*/s.n(o),r=s(16010),l=s(36665),d=s(72591),c=s(21728),h=s(11100),p=s(20928);let u=(0,p.Kk)("replay",{size:{width:40,height:40}});var m=s(45952);let g=/*#__PURE__*/function(e){return e.Mute="video_mute",e.Unmute="video_unmute",e.Play="video_play",e.Autoplay="video_auto_play",e.Pause="video_pause",e.Autopause="video_auto_stop",e.Loop="video_loop",e.Scrub="video_scrub_end",e.Fullscreen="video_fullscreen",e.ExitFullscreen="video_exitfullscreen",e}({}),b=/*#__PURE__*/function(e){return e.Start="video_start",e}({}),x=/*#__PURE__*/function(e){return e.Quartile25="video_quartile_25",e.Quartile50="video_quartile_50",e.Quartile75="video_quartile_75",e.Quartile100="video_quartile_100",e}({}),v=/*#__PURE__*/function(e){return e.View1Second="video_view_1_second",e.View2Seconds="video_view_2_second",e.View3Seconds="video_view_3_second",e.View10Seconds="video_view_10_second",e}({}),f=/*#__PURE__*/function(e){return e.PositionChange="position_change",e.Reset="reset",e}({}),y={[x.Quartile25]:.25,[x.Quartile50]:.5,[x.Quartile75]:.75,[x.Quartile100]:.98},j={[v.View1Second]:1,[v.View2Seconds]:2,[v.View3Seconds]:3,[v.View10Seconds]:10};var C=s(83322),w=s(54934);let A={a:0,c:1,p:50},k=class{constructor(e,t){n()(this,"beacons",[]),n()(this,"lastMetReqTime",0),n()(this,"totalTimeMeetingReqs",0),this.ruleKey=e,this.reqAudioOn=!!t.a,this.reqContinuous=!!t.c,this.reqDuration=t.d,this.reqPercentInView=t.p||0,this.isDurationCheckpoint=t.isDurationCheckpoint}reset(){this.totalTimeMeetingReqs=0}setBeacons(e){this.beacons=e}fireBeacons(){!this.hasFiredBeacons&&(this.beacons.forEach(e=>e()),this.isDurationCheckpoint||(this.hasFiredBeacons=!0))}checkRule(e){if(!this.audioCheck(e)||!this.inViewCheck(e))return this.reqContinuous&&(this.lastMetReqTime=null),!1;let t=e.getTimePosition();null===this.lastMetReqTime?this.totalTimeMeetingReqs=0:this.totalTimeMeetingReqs+=t-this.lastMetReqTime;let s=this.durationCheck(t);return this.lastMetReqTime=t,s}audioCheck(e){return!(this.reqAudioOn&&e.isMuted())}inViewCheck(e){return!(this.reqPercentInView>0&&!e.isInView())}durationCheck(e){if(!this.reqDuration)return!0;if(this.reqContinuous)return this.totalTimeMeetingReqs>=this.reqDuration;let t=e===this.reqDuration,s=this.lastMetReqTime===this.reqDuration,i=e>this.reqDuration,n=Number(this.lastMetReqTime)<this.reqDuration,o=e-Number(this.lastMetReqTime)<1;return t&&!s||i&&n&&o}},N=class{constructor(e,t){if(n()(this,"setRulesFromDuration",e=>{let t=Object.keys(j).map(e=>{let t=new k(e,{...A,d:j[e]});return t.beacons=[()=>this.beaconDefinition(e)],t});Number.isNaN(e)||(t=t.concat(Object.keys(y).map(t=>{let s=new k(t,{d:y[t]*e,isDurationCheckpoint:!0});return s.beacons=[()=>this.beaconDefinition(t)],s}))),this.rules=t}),!e)throw Error("RuleEngine cannot be instantiated without beaconDefinition! Check the placement id of the viewability tracker.");this.beaconDefinition=e,this.setRulesFromDuration(t)}updateMaxDuration(e){this.setRulesFromDuration(e)}checkRules(e){this.rules.forEach(t=>t.checkRule(e)&&t.fireBeacons())}resetContinuousRules(){this.resetRules(e=>!!e.reqContinuous)}resetAudioOnContinuousRules(){this.resetRules(e=>!!e.reqContinuous&&e.reqAudioOn)}resetRules(e){this.rules.forEach(t=>e(t)&&t.reset())}},S=class{constructor(e,t,s,i={}){n()(this,"options",{}),n()(this,"isAutoplay",()=>this.videoEl.autoplay),n()(this,"isMuted",()=>this.videoEl.muted),n()(this,"getTimePosition",()=>this.videoEl.currentTime),n()(this,"getMaxDuration",()=>Number.isNaN(this.videoEl.duration)?null:this.videoEl.duration),n()(this,"handleMute",()=>this.stateChangeFn(g.Mute)),n()(this,"handleUnmute",()=>this.stateChangeFn(g.Unmute)),n()(this,"handleLoop",()=>this.stateChangeFn(g.Loop)),n()(this,"handleScrub",()=>this.stateChangeFn(g.Scrub)),n()(this,"handleFullscreen",()=>this.stateChangeFn(g.Fullscreen)),n()(this,"handleExitFullscreen",()=>this.stateChangeFn(g.ExitFullscreen)),n()(this,"handlePause",()=>this.stateChangeFn(this.isAutoplay()?g.Autopause:g.Pause)),n()(this,"handlePlay",()=>this.stateChangeFn(this.isAutoplay()?g.Autoplay:g.Play)),n()(this,"handleTimeUpdate",()=>this.stateChangeFn(f.PositionChange)),this.videoEl=e,this.stateChangeFn=t,this.isInView=s,this.options=i,this.lastKnownIsMuted=this.videoEl.muted,this.addEventListeners()}addEventListeners(){this.videoEl.addEventListener("timeupdate",()=>this.handleTimeUpdate()),this.videoEl.addEventListener("play",()=>this.handlePlay()),this.videoEl.addEventListener("pause",()=>this.handlePause()),this.videoEl.addEventListener("ended",()=>{this.nextSeekedIsLoop=!0,this.options.doesVideoLoop&&this.handleLoop()}),this.videoEl.addEventListener("seeked",()=>{this.nextSeekedIsLoop&&0===Math.floor(this.videoEl.currentTime)?this.nextSeekedIsLoop=!1:this.handleScrub()}),["fullscreenchange","webkitfullscreenchange"].forEach(e=>{this.videoEl.parentNode?.addEventListener(e,()=>{document.fullscreenElement?this.handleFullscreen():this.handleExitFullscreen()})}),this.videoEl.addEventListener("webkitbeginfullscreen",()=>{this.handleFullscreen()}),this.videoEl.addEventListener("webkitendfullscreen",()=>{this.handleExitFullscreen()}),this.videoEl.addEventListener("volumechange",()=>{let e=!this.lastKnownIsMuted&&this.isMuted(),t=this.lastKnownIsMuted&&!this.isMuted();this.lastKnownIsMuted=this.isMuted(),e?this.handleMute():t&&this.handleUnmute()})}};class I extends l.Component{constructor(...e){super(...e),n()(this,"lastEventTime",0),n()(this,"totalPlayTime",0),n()(this,"totalUniquePlayedSeconds",new Set),n()(this,"provideEventDetails",m.L),n()(this,"updateTotalPlayTime",()=>{let e=this.videoContext.getTimePosition(),t=this.videoContext.getMaxDuration();t&&this.totalUniquePlayedSeconds.size<Math.ceil(t)&&this.totalUniquePlayedSeconds.add(Math.floor(e));let s=e-this.lastEventTime;this.lastEventTime=e,s>0&&s<1&&(this.totalPlayTime+=s)}),n()(this,"sendAnalyticsEvent",(e,t)=>{let{videoRef:s,timelineObject:i}=this.props,{tabId:n}=this.props.dashboardContext;if(!s||!i?.placementId)return;let{currentTime:o,duration:a}=s,r={eventName:e,eventDetails:{...this.provideEventDetails(i,!0),is_ad:(0,C.Tt)(i)||(0,C.iW)(i)||(0,C.LO)(i),placement_id:i.placementId,video:{current_position:Math.floor(o),total_length:Math.floor(a),total_play_length:this.totalPlayTime,total_unique_play_length:this.totalUniquePlayedSeconds.size,audio_on:!this.props.isMuted},tab:n}};this.props.appContext.logEvent(r,{sendPayloadImmediately:t})}),n()(this,"sendUnloadEvent",()=>{this.props.videoRef&&!this.props.videoRef?.paused&&this.sendAnalyticsEvent(g.Autopause,!0)}),n()(this,"updateRulesEngineDuration",()=>{this.props.videoRef&&this.rulesEngine.updateMaxDuration(this.props.videoRef.duration)})}componentDidUpdate(e){!e.videoRef&&this.props.videoRef&&this.setVideoContextAndRulesEngine(this.props.videoRef)}componentDidMount(){this.props.videoRef&&this.setVideoContextAndRulesEngine(this.props.videoRef)}componentWillUnmount(){this.props.videoRef?.removeEventListener("loadedmetadata",this.updateRulesEngineDuration),window.removeEventListener("beforeunload",this.sendUnloadEvent)}render(){return null}stateChanged(e){switch(e){case g.Mute:case g.Unmute:case g.Loop:case g.Scrub:case g.Fullscreen:case g.ExitFullscreen:this.fireBeacon(e);break;case g.Play:case g.Autoplay:this.hasStarted||(this.hasStarted=!0,this.fireBeacon(b.Start)),this.fireBeacon(e);break;case g.Pause:case g.Autopause:this.rulesEngine.resetContinuousRules(),this.fireBeacon(e);break;case f.Reset:this.rulesEngine.resetRules(()=>!0);break;case f.PositionChange:this.props.videoRef?.paused||this.updateTotalPlayTime(),this.rulesEngine.checkRules(this.videoContext);break;default:this.rulesEngine.checkRules(this.videoContext)}}fireBeacon(e){this.sendAnalyticsEvent(e)}setVideoContextAndRulesEngine(e){let{isInView:t,videoContextOptions:s}=this.props;this.videoContext=new S(e,e=>this.stateChanged(e),t,s),this.rulesEngine=new N(this.sendAnalyticsEvent,e.duration),e.addEventListener("loadedmetadata",this.updateRulesEngineDuration),window.addEventListener("beforeunload",this.sendUnloadEvent)}}let P=(0,w.bb)(I,{appContext:!0,adContext:!0,dashboardContext:!0});var B=s(27120),T=s(91514),R=s(70138),E=s(57574),M=s(56040),z=/*#__PURE__*/s.n(M),L=s(99805),D=/*#__PURE__*/s.n(L),O=s(87463),F=s(56122);let W=(0,p.Kk)("hd",{size:{width:24,height:24}});var U=s(35236);let _=(0,p.Kk)("sound-off",{size:{width:24,height:24}}),V=(0,p.Kk)("sound-on",{size:{width:24,height:24}}),H=(0,p.Kk)("video-play",{size:{width:24,height:24}});var G=s(4613);let $={controls:"V3aM5",limited:"NUgGE",seekBarWrapper:"ES7KG",seekBar:"NqMAD",seekBarProgress:"kmLdA",buffer:"qW8gI",seekHandle:"g82Fd",seekHandleHover:"oaGjt",onHover:"YBpn6",frameThumbnail:"m4j3o",thumbnailTime:"FdHaH",time:"IUn0z",control:"cP4TA"};var q=s(60397);let Q=/*#__PURE__*/(0,l.forwardRef)(({filmstrip:e,onClickToggleFullScreen:t,onClickPlay:s,onClickPause:i,onClickVolume:n,onClickHd:o,isHdAvailable:r,isFullScreen:l,isHd:d,isMuted:c,isPlaying:p,isInitialOverlay:u,time:m,handlePosition:g,handleHoverPosition:b,onMouseMoveSeekbarWrapper:x,onMouseLeaveSeekbarWrapper:v,onMouseDownSeekbarWrapper:f,onMouseUpSeekbarWrapper:y,onClickSeekHandleHover:j,buffered:C,seekHover:w,frameTime:A,thumbnailStyles:k,useLimitedControls:N,soundDisabled:S,showMuteControlOnly:I},P)=>{let{_c:B}=(0,G.Us)(),T=N&&{height:40,width:40},R=!S&&/*#__PURE__*/(0,q.jsx)(h.A,{"aria-pressed":c,className:$.control,label:B("Video controls","Mute sound"),onClick:n,children:c?/*#__PURE__*/(0,q.jsx)(_,{size:T}):/*#__PURE__*/(0,q.jsx)(V,{size:T})}),E={display:u?"none":void 0};return N||I?/*#__PURE__*/(0,q.jsx)("div",{className:a()($.controls,$.limited),style:E,children:R}):/*#__PURE__*/(0,q.jsxs)("div",{className:$.controls,style:E,children:[p?/*#__PURE__*/(0,q.jsx)(h.A,{className:$.control,label:B("Video controls","Pause"),onClick:i,children:/*#__PURE__*/(0,q.jsx)(U.A,{})}):/*#__PURE__*/(0,q.jsx)(h.A,{className:$.control,label:B("Video controls","Play"),onClick:s,children:/*#__PURE__*/(0,q.jsx)(H,{})}),/*#__PURE__*/(0,q.jsx)("div",{className:$.seekBarWrapper,onMouseDown:f,onMouseLeave:v,onMouseMove:x,onMouseUp:y,role:"progressbar",children:/*#__PURE__*/(0,q.jsxs)("div",{className:$.seekBar,ref:P,children:[/*#__PURE__*/(0,q.jsx)("div",{className:$.buffer,style:{width:`${C}%`}}),/*#__PURE__*/(0,q.jsx)("div",{className:$.seekBarProgress,style:{width:g}}),/*#__PURE__*/(0,q.jsx)("div",{className:a()($.seekHandle,{[$.onHover]:w}),style:{left:g}}),/*#__PURE__*/(0,q.jsx)("div",{className:a()($.seekHandleHover,{[$.onHover]:w}),onClick:j,role:"button",style:w?{visibility:"visible",left:`${b}px`}:void 0,children:e&&/*#__PURE__*/(0,q.jsx)("div",{className:$.frameThumbnail,style:k,children:/*#__PURE__*/(0,q.jsx)("div",{className:$.thumbnailTime,children:A})})})]})}),/*#__PURE__*/(0,q.jsx)("div",{className:$.time,children:m||"--:--"}),r&&/*#__PURE__*/(0,q.jsx)(h.A,{className:$.control,label:B("Video controls","Toggle high definition"),onClick:o,children:/*#__PURE__*/(0,q.jsx)(W,{colors:{primary:d?z().paletteWhite:z().transparentWhite65}})}),/*#__PURE__*/(0,q.jsx)(h.A,{className:$.control,label:B("Video controls","Toggle full screen"),onClick:t,children:l?/*#__PURE__*/(0,q.jsx)(O.A,{"data-testid":"collapse-icon",size:{width:22,height:22}}):/*#__PURE__*/(0,q.jsx)(F.A,{"data-testid":"fullscreen-icon",size:{width:22,height:22}})}),R]})});var K=s(41076),Y=s(28230);let X={overlayPoof:"kEaLk",loading:"C4lo4",overlay:"EfjkQ",isPlaying:"eB3NB"},J=({isPlaying:e,showPoof:t,isLoading:s,isInitialOverlay:i,onAnimationEndPoof:n})=>/*#__PURE__*/(0,q.jsxs)("div",{className:a()(X.overlayPoof,{[X.isPlaying]:e}),children:[i&&/*#__PURE__*/(0,q.jsx)(K.A,{cropped:!0,size:{width:24,height:24}}),t&&/*#__PURE__*/(0,q.jsx)("div",{className:X.overlay,onAnimationEnd:n,children:e?/*#__PURE__*/(0,q.jsx)(K.A,{cropped:!0,size:{width:24,height:24}}):/*#__PURE__*/(0,q.jsx)(U.A,{size:{width:24,height:24}})}),s&&/*#__PURE__*/(0,q.jsx)("div",{className:X.loading,children:/*#__PURE__*/(0,q.jsx)(Y.A,{small:!0})})]}),Z={videoPlayer:"gDuxW",videoContainer:"yz4vl",hasNoMaxUndockedHeight:"oce3Y",isFullScreen:"RYYxJ",isDocked:"iTJ8p",replayOverlay:"ykHbW",replayOut:"sm7Xn",replayButton:"qILrx"},ee=/*#__PURE__*/function(e){return e[e.AdStopped=0]="AdStopped",e[e.AdVideoStart=1]="AdVideoStart",e[e.AdVideoFirstQuartile=2]="AdVideoFirstQuartile",e[e.AdVideoMidpoint=3]="AdVideoMidpoint",e[e.AdVideoThirdQuartile=4]="AdVideoThirdQuartile",e[e.AdVideoComplete=5]="AdVideoComplete",e[e.AdPaused=6]="AdPaused",e[e.AdPlaying=7]="AdPlaying",e[e.AdVolumeChange=8]="AdVolumeChange",e}({});class et extends l.Component{constructor(...e){super(...e),n()(this,"state",{isMounted:!1,playing:!1,autoplay:!1,isMuted:!!this.props.isMuted,showControls:!0,time:"",isHd:!1,isHdAvailable:!1,seekHover:!1,handleHoverPosition:0,handlePosition:"0%",showHdIcon:!1,loading:!1,showPoof:!1,isInitialOverlay:!0,buffered:0,frameTime:"",thumbnailCount:10,filmstripOffset:0,hasPausedSource:null,isSeeking:!1,isFullScreen:!!this.props.isFullScreen,videoEl:null,isVideoIntersecting:!1,hasVideoIntersected:!1,hasClickedVideoOrMuteControl:!1,showMuteControlOnly:!0,moatQuartileEventsStatus:{AdVideoFirstQuartileIsDispatched:!1,AdVideoMidpointIsDispatched:!1,AdVideoThirdQuartileIsDispatched:!1},hideNativeVideoControls:!0}),n()(this,"fscreen",r.A),n()(this,"seekBar",/*#__PURE__*/(0,l.createRef)()),n()(this,"videoContainerRef",/*#__PURE__*/(0,l.createRef)()),n()(this,"shouldShowNativeControls",()=>{let{isVideoSponsoredDay:e}=this.props,{hideNativeVideoControls:t}=this.state;return!e&&!t}),n()(this,"getVideoElementProps",e=>{let{media:t,poster:s,appContext:{_t:i},minHeight:n=250,videoElementProps:o={}}=this.props,{playing:a,autoplay:r,isMuted:l,isFullScreen:d}=this.state;return{muted:l,autoPlay:r,style:{minHeight:Math.min(t.height??n,n)},role:"button",crossOrigin:"anonymous",playsInline:!0,ref:this.setVideoEl,onEnded:this.onEnded,onTouchEnd:this.onTouchEnd,height:t.height,width:t.width,poster:s&&new E.A(s).getOriginalSourceClosestToWidth(Math.min(e,D().postWidth)).url,...this.shouldShowCustomControls()?{role:"button","aria-label":i(a?"Pause":"Play"),onClick:this.onVideoClick,onLoadedData:this.getVideoDurationInMinSec,onWaiting:this.onVideoWaiting,onCanPlayThrough:this.hideLoading,onPlaying:this.hideLoading,onSeeking:this.hideLoading,onSeeked:this.hideLoading,onVolumeChange:d?this.onVolumeChangeFullScreen:void 0,onTimeUpdate:this.onTimeUpdateVideo,onProgress:this.onProgressVideo}:{...this.shouldShowNativeControls()&&{controls:!0},controlsList:"nodownload",onMouseEnter:this.showNativeControls,onMouseLeave:this.hideNativeControls,onTouchStart:this.showNativeControls},...o}}),n()(this,"renderVideoControls",()=>{let{filmstrip:e,soundDisabled:t,isVideoSponsoredDay:s,appContext:{_t:i}}=this.props,{isHd:n,time:o,playing:r,isMuted:l,isInitialOverlay:d,isHdAvailable:p,isFullScreen:m,handlePosition:g,handleHoverPosition:b,buffered:x,seekHover:v,frameTime:f,isVideoFinished:y,videoEl:j,showMuteControlOnly:C}=this.state;return/*#__PURE__*/(0,q.jsxs)(q.Fragment,{children:[/*#__PURE__*/(0,q.jsx)(Q,{buffered:x,filmstrip:e,frameTime:f,handleHoverPosition:b,handlePosition:g,isFullScreen:m,isHd:n,isHdAvailable:p,isInitialOverlay:d,isMuted:l,isPlaying:r,onClickHd:this.onClickHd,onClickPause:this.onClickPause,onClickPlay:this.onClickPlay,onClickSeekHandleHover:this.onClickSeekHandleHover,onClickToggleFullScreen:this.onClickToggleFullScreen,onClickVolume:this.onClickVolume,onMouseDownSeekbarWrapper:this.onMouseDownSeekbarWrapper,onMouseLeaveSeekbarWrapper:this.onMouseLeaveSeekbarWrapper,onMouseMoveSeekbarWrapper:this.onMouseMoveSeekbarWrapper,onMouseUpSeekbarWrapper:this.onMouseUpSeekbarWrapper,ref:this.seekBar,seekHover:v,showMuteControlOnly:C,soundDisabled:t,thumbnailStyles:this.getThumbnailStyles(),time:o,useLimitedControls:s||void 0}),s&&/*#__PURE__*/(0,q.jsx)(c.Ay,{in:y&&j?.duration===j?.currentTime,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:e=>/*#__PURE__*/(0,q.jsx)("div",{className:a()(Z.replayOverlay,{[Z.replayOut]:[c.ns,c.ze,c.kp].includes(e)}),style:{transition:"opacity 200ms"},children:/*#__PURE__*/(0,q.jsx)(h.A,{label:i("Replay video"),onClick:this.onReplayVideoClick,wrapperClassName:Z.replayButton,children:/*#__PURE__*/(0,q.jsx)(u,{colors:{primary:z().white},size:{height:65,width:65}})})})})]})}),n()(this,"shouldShowCustomControls",()=>(this.props.isVideoSponsoredDay||!(0,R.A)())&&this.state.isMounted),n()(this,"setVideoEl",e=>{this.setState({videoEl:e})}),n()(this,"playVideo",async()=>{try{await this.state.videoEl?.play()}catch(e){this.setState({playing:!1})}}),n()(this,"pauseVideo",()=>this.state.videoEl?.pause()),n()(this,"onClickPause",()=>this.onUXTriggerPause(T.Q5.User,!1)),n()(this,"onClickPlay",()=>{this.onUXTriggerPlay(!1)}),n()(this,"onUXTriggerPause",(e,t)=>this.setState({hasPausedSource:e,autoplay:t,playing:!1})),n()(this,"onUXTriggerPlay",e=>this.setState({autoplay:e,playing:!0,hasPausedSource:null})),n()(this,"onClickVolume",e=>{e.preventDefault(),e.stopPropagation(),this.setState(({isMuted:e,videoEl:t})=>(e&&t&&!t.volume&&(t.volume=1),{isMuted:!e,hasClickedVideoOrMuteControl:!0}))}),n()(this,"onVolumeChangeFullScreen",e=>{this.setState({isMuted:e.currentTarget.muted||!e.currentTarget.volume})}),n()(this,"onMouseEnterVideo",()=>{this.setState({showControls:!0,showMuteControlOnly:!1})}),n()(this,"onMouseLeaveVideo",()=>{this.setState(e=>({showControls:!e.hasClickedVideoOrMuteControl,showMuteControlOnly:!e.hasClickedVideoOrMuteControl}))}),n()(this,"onAnimationEndPoof",()=>this.setState({showPoof:!1})),n()(this,"onEnded",()=>{this.setState({isVideoFinished:!0}),this.props.disableAutolooping||this.resetVideoPosition(!0),this.state.hideNativeVideoControls||this.hideNativeControls()}),n()(this,"onTouchEnd",()=>{this.setState({autoplay:!1})}),n()(this,"onClickHd",()=>this.setState(e=>({isHd:!e.isHd}))),n()(this,"onVideoClick",()=>{if(!this.props.isVideoSponsoredDay){if(this.props.timelineObject&&(0,C.zA)(this.props.timelineObject)){let e=this.props.timelineObject.actions?.[0];if(e?.tspSkipLightbox&&e?.urls.web){window.open(e?.urls.web,"_blank","noreferrer,noopener");return}}this.setState(e=>({playing:!e.playing,autoplay:!1,showPoof:!0,isInitialOverlay:!1,hasPausedSource:e.playing?T.Q5.User:null,hasClickedVideoOrMuteControl:!0}))}}),n()(this,"onVideoWaiting",()=>this.setState({loading:!0})),n()(this,"hideLoading",()=>this.setState({loading:!1})),n()(this,"hideNativeControls",()=>this.setState({hideNativeVideoControls:!0})),n()(this,"showNativeControls",()=>{this.setState({hideNativeVideoControls:!1})}),n()(this,"getVideoDurationInMinSec",()=>this.state.videoEl&&this.setState({time:this.formatVideoTime(this.state.videoEl.duration)})),n()(this,"formatVideoTime",e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s<10?`0${s}`:s}`}),n()(this,"isVideoInView",()=>this.state.isVideoIntersecting),n()(this,"setPlaybackPosition",e=>{let{videoEl:t}=this.state,s=t?.duration||0;this.setState(e=>({handlePosition:`${e.handleHoverPosition}px`})),t&&(t.currentTime=s*e)}),n()(this,"onMouseMoveSeekbarWrapper",e=>{this.setState({seekHover:!0});let{isSeeking:t,videoEl:s,thumbnailCount:i}=this.state,n=e.currentTarget.firstElementChild?.getBoundingClientRect().width||0,o=Math.abs(Math.round(e.clientX-(e.currentTarget.firstElementChild?.getBoundingClientRect().left||0)));if(o<0||o>n)return;let a=o/n,r=100*a,l=Math.floor(a*(s?.duration||0)),d=100/(i-1)*Math.floor(r/i);this.setState({handleHoverPosition:o,filmstripOffset:d}),this.updateFrameTime(l),t&&this.setPlaybackPosition(a)}),n()(this,"updateFrameTime",e=>this.setState({frameTime:this.formatVideoTime(e)})),n()(this,"onMouseDownSeekbarWrapper",()=>{this.setState({isSeeking:!0})}),n()(this,"onMouseUpSeekbarWrapper",()=>this.setState({isSeeking:!1})),n()(this,"onMouseLeaveSeekbarWrapper",()=>this.setState({seekHover:!1,isSeeking:!1})),n()(this,"onClickSeekHandleHover",e=>{let t=e.clientX-(e.currentTarget.parentElement?.getBoundingClientRect().left||0),s=this.seekBar.current?.getBoundingClientRect().width;s&&this.setPlaybackPosition(t/s)}),n()(this,"getThumbnailStyles",()=>{let{filmstrip:e}=this.props,{thumbnailCount:t,filmstripOffset:s}=this.state;if(!e)return{};let{height:i,width:n,url:o}=e,a=.35*n/t,r=.35*i;return{top:-(r+10),left:-(a/2)+5,width:`${a}px`,height:`${r}px`,backgroundImage:`url(${o})`,backgroundSize:`${a*t}px ${r}px`,backgroundPosition:`${s}% 0%`}}),n()(this,"onTimeUpdateVideo",()=>{let{showControls:e,videoEl:t}=this.state;if(!e||!t)return;let s=t.duration,i=t.currentTime;this.setState({handlePosition:`${i/s*100}%`,time:this.formatVideoTime(s-i)})}),n()(this,"onProgressVideo",()=>{let{videoEl:e}=this.state;if(!e)return;let t=e.duration,s=e.buffered,i=e.currentTime;if(t>0){for(let e=0;e<s.length;e+=1)if(s.start(s.length-1-e)<=i){let i=s.end(s.length-1-e);this.setState({buffered:i/t*100});break}}}),n()(this,"onClickToggleFullScreen",()=>{if(!this.state.isFullScreen&&this.videoContainerRef?.current){if(this.props.onFullScreenChange){this.props.onFullScreenChange(!0);return}this.setViewportResizeRender("disable"),this.fscreen.requestFullscreen(this.videoContainerRef?.current),this.setState({isFullScreen:!0},()=>{this.fscreen.addEventListener("fullscreenchange",this.onFullScreenExit)})}else{if(this.props.onFullScreenChange){this.props.onFullScreenChange(!1);return}this.fscreen.exitFullscreen()}}),n()(this,"onFullScreenExit",()=>{this.fscreen.fullscreenElement||this.setState({isFullScreen:!1},()=>{this.setViewportResizeRender("enable"),this.fscreen.removeEventListener("fullscreenchange",this.onFullScreenExit)})}),n()(this,"onReplayVideoClick",e=>{e?.stopPropagation(),e?.preventDefault(),this.resetVideoPosition(!1)}),n()(this,"resetVideoPosition",e=>this.setState({autoplay:e,handlePosition:"0%",isVideoFinished:!1,playing:!0},()=>{this.state.videoEl&&(this.state.videoEl.currentTime=0,this.playVideo())})),n()(this,"getMediaType",()=>{let{media:e}=this.props;return e.type===T.Yb.Mov?void 0:e.type}),n()(this,"handleIntersectionChange",e=>{this.setState(({playing:t,hasPausedSource:s,isVideoFinished:i,autoplay:n,hasVideoIntersected:o})=>{let a=o||e,r=this.shouldAutoDock(a)?t:e&&!s&&!i;return{playing:r,autoplay:t!==r||n,isInitialOverlay:!1,isVideoIntersecting:e,hasVideoIntersected:a}})}),n()(this,"onVisibilityChange",()=>{let{playing:e,hasPausedSource:t}=this.state;"visible"===document.visibilityState?e||t!==T.Q5.DocumentVisibility||this.onUXTriggerPlay(!0):e&&this.onUXTriggerPause(T.Q5.DocumentVisibility,!0)})}shouldAutoDock(e){let{playing:t,isMuted:s}=this.state,{showsDockMediaButton:i,alwaysAutoDock:n,dockableContext:{isMediaDocked:o}}=this.props;return!!i&&t&&(!s||!!n&&e&&!o)}dispatchMoatVideoEvent(e){(0,C.by)(this.props?.timelineObject)&&this.moatApiReferenceInstance?.dispatchEvent?.({type:ee[e],adVolume:this.state.isMuted?0:1})}initMoatApiReference(){let e=this.props?.timelineObject;if(!(0,C.by)(e)&&!this.state?.videoEl)return;let t={level1:e?.advertiserId||"",level2:e?.campaignId||"",level3:e?.adGroupId||"",level4:e?.creativeId||""};this.moatApiReferenceInstance=function(e,t,s,i,n,o){var a,r,l=document.createElement("script"),d=[],c={vidIntType:"3",vidIntVersion:"1.0",adData:{ids:t,duration:s,url:void 0},dispatchEvent:function(e){c.sendEvent?(d&&(d.push(e),e=d,d=!1),c.sendEvent(e)):d&&d.push(e)},clientCallback:void 0};t="_moatApi"+Math.floor(1e8*Math.random());try{r=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,r=window}return r[t]=c,l.type="text/javascript",e&&e.insertBefore(l,e.childNodes[0]||null),l.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t,c}(this.videoContainerRef.current,t,this.state.videoEl?.duration,"tumblrjsvideo916683822435")}componentDidMount(){window.addEventListener("visibilitychange",this.onVisibilityChange),this.numGlassContextOnMount=this.props.numGlassOpenContext.numGlassOpen,setTimeout(()=>{this.numGlassContextOnMount=this.props.numGlassOpenContext.numGlassOpen},0),this.initMoatApiReference(),this.setState({isMounted:!0})}componentWillUnmount(){window.removeEventListener("visibilitychange",this.onVisibilityChange)}componentDidUpdate(e,t){let{isFullScreen:s,isMuted:i,playing:n,hasPausedSource:o,hasVideoIntersected:a}=this.state,{isDocked:r,numGlassOpenContext:{numGlassOpen:l},alwaysAutoDock:d}=this.props;e.isMuted!==this.props.isMuted&&this.props.isMuted!==i&&this.setState({isMuted:!i}),e.isFullScreen!==this.props.isFullScreen&&this.props.isFullScreen!==s&&this.setState({isFullScreen:!s}),this.props.playing!==e.playing&&n!==this.props.playing&&this.onVideoClick(),this.props.autoDockContext.setComponentToAutoDock?.(this.shouldAutoDock(a),d),n&&this.numGlassContextOnMount<l?this.onUXTriggerPause(T.Q5.Glass,!0):!n&&o===T.Q5.Glass&&this.numGlassContextOnMount>=l&&this.onUXTriggerPlay(!0),t.playing!==n&&(n?(this.playVideo(),this.dispatchMoatVideoEvent(ee.AdVideoStart)):this.pauseVideo()),this.state.playing&&("100%"===this.state.handlePosition&&this.dispatchMoatVideoEvent(ee.AdVideoComplete),parseFloat(this.state.handlePosition)>=25&&!this.state.moatQuartileEventsStatus.AdVideoFirstQuartileIsDispatched&&(this.dispatchMoatVideoEvent(ee.AdVideoFirstQuartile),this.setState(e=>({moatQuartileEventsStatus:{...e.moatQuartileEventsStatus,AdVideoFirstQuartileIsDispatched:!0}}))),parseFloat(this.state.handlePosition)>=50&&!this.state.moatQuartileEventsStatus.AdVideoMidpointIsDispatched&&(this.dispatchMoatVideoEvent(ee.AdVideoMidpoint),this.setState(e=>({moatQuartileEventsStatus:{...e.moatQuartileEventsStatus,AdVideoMidpointIsDispatched:!0}}))),parseFloat(this.state.handlePosition)>=75&&!this.state.moatQuartileEventsStatus.AdVideoThirdQuartileIsDispatched&&(this.dispatchMoatVideoEvent(ee.AdVideoThirdQuartile),this.setState(e=>({moatQuartileEventsStatus:{...e.moatQuartileEventsStatus,AdVideoThirdQuartileIsDispatched:!0}}))),"0%"===this.state.handlePosition&&"100%"===t.handlePosition&&(this.dispatchMoatVideoEvent(ee.AdVideoStart),this.setState({moatQuartileEventsStatus:{AdVideoFirstQuartileIsDispatched:!1,AdVideoMidpointIsDispatched:!1,AdVideoThirdQuartileIsDispatched:!1}}))),e.isDocked&&!r&&this.onClickPause()}render(){let{media:e,isDocked:t,hasNoMaxUndockedHeight:s,isVideoSponsoredDay:i,playerStyle:n,timelineObject:o,useViewabilityTracker:r,appContext:{_t:l}}=this.props,{playing:c,showPoof:h,loading:p,isInitialOverlay:u,showControls:m,videoEl:g,isFullScreen:b}=this.state;return/*#__PURE__*/(0,q.jsx)(B.Ay,{children:({width:x,setViewportResizeRender:v})=>{let f=a()(Z.videoPlayer,{[Z.hasNoMaxUndockedHeight]:s,[Z.isDocked]:t,[Z.isFullScreen]:b});return this.setViewportResizeRender=v,/*#__PURE__*/(0,q.jsxs)(d.pL,{"aria-label":l("Video Player"),className:f,onChange:this.handleIntersectionChange,role:"application",style:n,threshold:.5,children:[/*#__PURE__*/(0,q.jsxs)("div",{className:Z.videoContainer,onMouseEnter:this.onMouseEnterVideo,onMouseLeave:this.onMouseLeaveVideo,ref:this.videoContainerRef,children:[/*#__PURE__*/(0,q.jsx)("video",{...this.getVideoElementProps(x),children:/*#__PURE__*/(0,q.jsx)("source",{src:e.url,type:this.getMediaType()})}),this.shouldShowCustomControls()&&/*#__PURE__*/(0,q.jsxs)(q.Fragment,{children:[/*#__PURE__*/(0,q.jsx)(J,{isInitialOverlay:u,isLoading:p,isPlaying:c,onAnimationEndPoof:this.onAnimationEndPoof,showPoof:h}),(i||m)&&this.renderVideoControls()]})]}),r&&o&&/*#__PURE__*/(0,q.jsx)(P,{isInView:this.isVideoInView,isMuted:this.state.isMuted,timelineObject:o,videoContextOptions:{doesVideoLoop:!this.props.disableAutolooping,trackPauseAsAutoStop:i},videoRef:g})]})}})}}n()(et,"defaultProps",{isMuted:!0,useViewabilityTracker:!0});let es=(0,w.bb)(et,{appContext:!0,numGlassOpenContext:!0,dockableContext:!0,autoDockContext:!0})},38238:(e,t,s)=>{"use strict";s.d(t,{LS:()=>b,r7:()=>v,Ao:()=>y});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(11100),a=s(7463),r=s(85191),l=s(28304),d=s(36665),c=s(64934),h=s(4613),p=s(68331),u=s(36388),m=s(20562),g=s(60397);function b({general:e=!1,categories:t,state:s,toggleCallback:i,children:d,communityLabelVisibilitySetting:b}){let{isLoggedIn:v}=(0,h.Us)(),{openLoginWall:f}=(0,p.K)(),{data:y}=(0,l.Py)(),j=y?.user,C=(0,u.fN)(e,t,j?.communityLabelCategories,s,b),w=/*#__PURE__*/(0,g.jsxs)("div",{className:m.A.cover,"data-testid":"community-label-cover",children:[/*#__PURE__*/(0,g.jsx)("div",{className:m.A.coverHeader,children:/*#__PURE__*/(0,g.jsx)(r.Ay,{comment:"Content Label in post body",children:"Content Label: Mature"})}),/*#__PURE__*/(0,g.jsx)("p",{className:m.A.coverAuthorNotice,children:/*#__PURE__*/(0,g.jsx)(x,{categories:t})}),/*#__PURE__*/(0,g.jsx)(o.A,{onClick:()=>{v?i(!0,c.xq):f()},children:/*#__PURE__*/(0,g.jsx)(a.A,{className:m.A.coverButton,children:/*#__PURE__*/(0,g.jsx)(r.Ay,{comment:"Button text on content label in post body",children:"Show post"})})})]});return/*#__PURE__*/(0,g.jsxs)(g.Fragment,{children:[/*#__PURE__*/(0,g.jsx)("div",{className:n()(m.A.content,{[m.A.isShowingCover]:C}),children:/*#__PURE__*/(0,g.jsx)("span",{children:d})}),C&&w]})}function x({categories:e}){let{_c:t}=(0,h.Us)(),s=(0,d.useMemo)(()=>Object.entries(e).filter(([,e])=>(0,u.nI)(e)).map(([e])=>(0,u.p9)(e,t).label),[e,t]);if(0===s.length)return/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:(0,u.p9)("general",t).info});if(1===s.length)return/*#__PURE__*/(0,g.jsx)(r.Ay,{params:{label:s[0]},children:"[label]"});if(2===s.length)return/*#__PURE__*/(0,g.jsx)(r.Ay,{params:{firstLabel:s[0],secondLabel:s[1]},children:"[firstLabel], [secondLabel]"});let i=t("Separator of list of content labels",", "),n=s.slice(0,-1).join(i);return/*#__PURE__*/(0,g.jsx)(r.Ay,{params:{initialLabels:n,finalLabel:s[s.length-1]},children:"[initialLabels], [finalLabel]."})}function v({general:e,toggleCallback:t,categories:s,state:i,communityLabelVisibilitySetting:a,className:d}){let{_c:b,isLoggedIn:x}=(0,h.Us)(),{openLoginWall:v}=(0,p.K)(),{data:f}=(0,l.Py)(),y={drugUse:b("Mature content category","Drug Use"),violence:b("Mature content category","Violence"),sexualThemes:b("Mature content category","Sexual Themes")};if(!i||!e)return null;let j=Object.keys(s).map(e=>s[e]&&y[e]).filter(e=>e).join(", "),C=i===c.xq?b("Button to cover post with a content label","Hide post"):b("Button to show post with a content label","Show post"),w=f?.user,A=(0,u.iN)(e,s,w?.communityLabelCategories,i,a);return/*#__PURE__*/(0,g.jsxs)("div",{className:n()(m.A.header,d),children:[/*#__PURE__*/(0,g.jsxs)("span",{className:m.A.headerText,children:[/*#__PURE__*/(0,g.jsx)(r.Ay,{comment:"Content Label in post header",children:"Content Label: Mature"}),j&&/*#__PURE__*/(0,g.jsxs)(g.Fragment,{children:[": ",j]})]}),A&&/*#__PURE__*/(0,g.jsx)(g.Fragment,{children:/*#__PURE__*/(0,g.jsx)(o.A,{className:n()(m.A.headerLink),label:C,onClick:()=>{let e=i===c.xq?c.kX:c.xq;if(e===c.xq&&!x)return v();t(!0,e)},children:C})})]})}let f=c.kX,y=e=>{let t;let{communityLabelVisibilitySetting:s,isLoggedIn:i}=(0,h.Us)(),[n,o]=d.useState(e?.hasCommunityLabel||!1),[a,r]=d.useState(c.kX),l=d.useCallback((e,t)=>{r(t),o(e)},[]),{categories:p,active:m}=d.useMemo(()=>(0,u.fB)(e),[e]);n&&(t=a||(i?s:f));let g=d.useMemo(()=>({state:t,toggleCallback:l,categories:p,general:m,communityLabelVisibilitySetting:s}),[s,m,p,t,l]);return{setCommunityLabel:l,state:t,headerProps:g,coverProps:g}}},18270:(e,t,s)=>{"use strict";s.d(t,{A:()=>iy});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(74059),a=/*#__PURE__*/s.n(o),r=s(56365),l=s(73789),d=s(36665),c=s(87203),h=s(60397);function p(e){let[t,s]=(0,d.useState)(void 0),i=(0,d.useCallback)(()=>{let e=c.jq()?.innerHeight;e&&(!t||Math.abs(e-t)>100)&&s(e)},[t]);return(0,d.useEffect)(()=>(s(c.jq()?.innerHeight),(0,c.um)("resize",i),()=>(0,c.yL)("resize",i)),[i]),/*#__PURE__*/(0,h.jsx)(l.A,{...e,maxHeight:void 0!==t?.8*t:1/0,maxHeightTolerance:void 0!==t?1.2*t:1/0,preventTruncation:void 0===t||e.preventTruncation})}var u=s(63024),m=s(20928);let g=(0,m.Kk)("clock",{size:{width:18,height:18}});var b=s(62674),x=s(11100),v=s(94048),f=s(40297),y=s(25183),j=s(56356),C=s(40176),w=s(56040),A=/*#__PURE__*/s.n(w);let k={ctaButton:"LrOId"},N=function({ctaText:e,backgroundColor:t=A().paletteAccent,borderColor:s=A().paletteAccent,color:i=A().paletteWhite,clickUrl:n,placementId:o,onClick:r}){let{logEvent:l}=(0,y.Ul)(),{post:d}=(0,j.Zm)(),{hydraConfigInstanceId:c,adPlacementConfiguration:p}=(0,f.W)(),u=()=>{l({eventName:v.R.CTAButton,eventDetails:{placement_id:o,...(0,C._)({hydraConfigInstanceId:c,adPlacementConfiguration:p,timelineObject:d})}}),l({eventName:v.R.Click,eventDetails:{placement_id:o,...(0,C._)({hydraConfigInstanceId:c,adPlacementConfiguration:p,timelineObject:d})}})};return r?/*#__PURE__*/(0,h.jsx)("div",{className:a()(k.ctaButton),style:{backgroundColor:t,color:i,borderColor:s},children:/*#__PURE__*/(0,h.jsx)(x.A,{onClick:()=>{r(),u()},children:e})}):/*#__PURE__*/(0,h.jsx)("a",{className:a()(k.ctaButton),href:n,onClick:u,rel:"nofollow noreferrer noopener",style:{backgroundColor:t,color:i,borderColor:s},target:"_blank",children:e})};var S=s(29504),I=s(83087),P=s(5509),B=s(54934),T=s(33845),R=s(4613);let E=({onClick:e,disabled:t=!1})=>{let{_t:s}=(0,R.Us)();return/*#__PURE__*/(0,h.jsx)(x.A,{disabled:t,label:s("Move down"),onClick:e,children:/*#__PURE__*/(0,h.jsx)(T.To,{size:{width:21,height:21}})})};var M=s(90136);let z=({onClick:e,disabled:t=!1})=>{let{_t:s}=(0,R.Us)();return/*#__PURE__*/(0,h.jsx)(x.A,{disabled:t,label:s("Move to bottom"),onClick:e,children:/*#__PURE__*/(0,h.jsx)(M.U,{size:{width:21,height:21}})})},L=({onClick:e,disabled:t=!1})=>{let{_t:s}=(0,R.Us)();return/*#__PURE__*/(0,h.jsx)(x.A,{disabled:t,label:s("Move to top"),onClick:e,children:/*#__PURE__*/(0,h.jsx)(M.Z,{size:{width:21,height:21}})})},D=({onClick:e,disabled:t=!1})=>{let{_t:s}=(0,R.Us)();return/*#__PURE__*/(0,h.jsx)(x.A,{disabled:t,label:s("Move up"),onClick:e,children:/*#__PURE__*/(0,h.jsx)(T.vD,{size:{width:21,height:21}})})},O={queueControls:"squP2",controlIcon:"gc3fY",queueControlsInner:"fDUq4"};class F extends d.Component{constructor(...e){super(...e),n()(this,"allPosts",[]),n()(this,"queuedPosts",[]),n()(this,"moveUp",()=>{let{id:e}=this.props,t=this.queuedPosts.findIndex(t=>e===t)-1,s=this.allPosts.findIndex(e=>this.queuedPosts[t]===e);return this.queueReorder(this.allPosts[s-1]||0,t)}),n()(this,"moveDown",()=>{let{id:e}=this.props,t=this.queuedPosts.findIndex(t=>e===t)+1,s=this.allPosts.findIndex(e=>this.queuedPosts[t]===e);return this.queueReorder(this.allPosts[s-1],t)}),n()(this,"moveToTop",()=>this.queueReorder(0,0)),n()(this,"moveToBottom",()=>this.queueReorder(this.allPosts[this.allPosts.length-1],this.queuedPosts.length-1)),n()(this,"queueReorder",(e,t)=>{let{id:s,blogName:i,timelineContext:n,appContext:{apiFetch:o}}=this.props;return(0,P.tP)(o,{blogName:i,id:s,insertAfter:e}).fetch().then(()=>n?.onQueueReorder(s,t))})}render(){return/*#__PURE__*/(0,h.jsx)(I.Ay,{children:({isMobile:e})=>/*#__PURE__*/(0,h.jsx)("div",{className:a()(O.queueControls,this.props.className),children:this.getControls(e)})})}getControls(e){let{id:t}=this.props;return/*#__PURE__*/(0,h.jsx)(S.$c.Consumer,{children:({allPosts:s,queuedPosts:i})=>{this.allPosts=s,this.queuedPosts=i;let n=this.queuedPosts.length,o=this.queuedPosts.findIndex(e=>t===e),a=[];return e&&(a.push(/*#__PURE__*/(0,h.jsx)("div",{className:O.controlIcon,children:/*#__PURE__*/(0,h.jsx)(D,{disabled:o<=0,onClick:this.moveUp})},"moveUp")),a.push(/*#__PURE__*/(0,h.jsx)("div",{className:O.controlIcon,children:/*#__PURE__*/(0,h.jsx)(E,{disabled:o===n-1,onClick:this.moveDown})},"moveDown"))),a.push(/*#__PURE__*/(0,h.jsx)("div",{className:O.controlIcon,children:/*#__PURE__*/(0,h.jsx)(L,{disabled:o<=0,onClick:this.moveToTop})},"moveToTop")),e&&a.push(/*#__PURE__*/(0,h.jsx)("div",{className:O.controlIcon,children:/*#__PURE__*/(0,h.jsx)(z,{disabled:o===n-1,onClick:this.moveToBottom})},"moveToBottom")),a.length>0?/*#__PURE__*/(0,h.jsx)("div",{className:O.queueControlsInner,children:a}):null}})}}let W=(0,B.bb)(F,{appContext:!0,timelineContext:!0});var U=s(23390),_=s(69010),V=s(10621),H=s(86619);let G=(0,s(63135).A)(()=>s.e(3223).then(s.bind(s,57046)),"AsyncPostActivityNeue");var $=s(27699),q=s(95622),Q=s(58897),K=s(42061);let Y={root:"AImO6",tail:"sOyZs",tailOverlay:"TlhRk",avatar:"tpZ8V",body:"JYxnY",meta:"kEusV",blogInfo:"Qne7x",blogLink:"AXdIl",reblogParent:"KvHCB",reblogIcon:"tkkxL",preview:"WW8zi",text:"S6wzy",tags:"gGpxL",thumbnail:"ObSCE",mediaIcon:"gzn4G",cta:"oozSP"};var X=s(4186),J=s(14492),Z=s(36867),ee=s(15781),et=s(11914),es=s(66910);let ei=({content:e})=>e.filter(e=>(0,es.zS)(e)||(0,es.pA)(e)).map(e=>{switch(e.type){case es._B.Text:return e.text;case es._B.Poll:return e.question}}).join(" "),en=({content:e,blog:{isAdult:t}},s)=>{let i=e.find(es.TW);return i?/*#__PURE__*/(0,h.jsx)("div",{"aria-label":s("Label for an image","Image"),children:/*#__PURE__*/(0,h.jsx)(et.jA,{imageResponse:i.media,isSquare:!0,pixelated:t})}):(0,es.Jo)(e,es._B.Video)?/*#__PURE__*/(0,h.jsx)(eo,{icon:/*#__PURE__*/(0,h.jsx)(ee.A,{colors:{primary:w.paletteNavy}}),label:s("Label for a video block","Video"),type:es._B.Video}):(0,es.Jo)(e,es._B.Audio)?/*#__PURE__*/(0,h.jsx)(eo,{icon:/*#__PURE__*/(0,h.jsx)(X.A,{colors:{primary:w.paletteNavy}}),label:s("Label for an audio block","Audio"),type:es._B.Audio}):(0,es.Jo)(e,es._B.Link)?/*#__PURE__*/(0,h.jsx)(eo,{icon:/*#__PURE__*/(0,h.jsx)(J.A,{colors:{primary:w.paletteNavy}}),label:s("Label for a link block","Link"),type:es._B.Link}):(0,es.Jo)(e,es._B.Poll)?/*#__PURE__*/(0,h.jsx)(eo,{icon:/*#__PURE__*/(0,h.jsx)(Z.A,{colors:{primary:w.paletteNavy}}),label:s("Label for a poll block","Poll"),type:es._B.Poll}):null},eo=({type:e,label:t,icon:s})=>/*#__PURE__*/(0,h.jsx)("div",{"aria-label":t,className:Y.mediaIcon,"data-media-type":e,children:s}),ea=e=>{let{note:{blog:{avatar:t,name:s,theme:{avatarShape:i}},postId:n,reblogParentBlogName:o,type:a},note:l,onClickNote:d,noteRef:c}=e,{_c:p}=(0,R.Us)(),{logEvent:u}=(0,y.Ul)(),m=ei(l),g=en(l,p),b=l.tags&&l.tags.length>0?l.tags:null;return/*#__PURE__*/(0,h.jsxs)("button",{"aria-label":p("A small preview of notes for a post","Notes preview"),className:Y.root,onClick:()=>{d(),u({eventName:v.R.NotesPreviewNoteClick})},ref:c,children:[/*#__PURE__*/(0,h.jsx)("div",{className:Y.tail}),/*#__PURE__*/(0,h.jsx)("div",{className:Y.tailOverlay}),/*#__PURE__*/(0,h.jsxs)("div",{className:Y.body,children:[/*#__PURE__*/(0,h.jsx)("div",{className:Y.avatar,children:/*#__PURE__*/(0,h.jsx)($.A,{avatarShape:i,badge:q.A.ofType(a),dimension:24,imageResponse:t,name:s,showBlogCard:!1})}),/*#__PURE__*/(0,h.jsxs)("div",{className:Y.meta,children:[/*#__PURE__*/(0,h.jsxs)("div",{className:Y.blogInfo,children:[/*#__PURE__*/(0,h.jsx)(r.A,{blogName:s,className:Y.blogLink,ellipsisOverflow:!0,krakenEventDetails:{type:a},krakenEventName:v.R.PostActivityNoteClickBlogName,postId:n,showBlogCard:!1,children:s}),o&&/*#__PURE__*/(0,h.jsx)("div",{className:Y.reblogParent,children:/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsx)("div",{className:Y.reblogIcon,children:/*#__PURE__*/(0,h.jsx)(Q.A,{isCompact:!0,size:{width:14,height:14}})}),/*#__PURE__*/(0,h.jsx)(r.A,{blogName:o,href:(0,K.A)(o),showBlogCard:!1,children:o})]})})]}),(m||b||g)&&/*#__PURE__*/(0,h.jsxs)("div",{className:Y.preview,children:[m&&/*#__PURE__*/(0,h.jsx)("div",{className:Y.text,children:m}),!m&&b&&/*#__PURE__*/(0,h.jsx)("div",{className:Y.tags,children:b.map(e=>/*#__PURE__*/(0,h.jsx)("span",{children:`#${e}`},e))}),g&&/*#__PURE__*/(0,h.jsx)("div",{className:Y.thumbnail,children:g})]})]})]}),/*#__PURE__*/(0,h.jsx)("div",{className:Y.cta,children:p("A link to this note","View this note")})]})};var er=s(14130),el=s(19913),ed=s(40310),ec=s(12044),eh=s(29557),ep=s(9119);let eu={pillDesign:"BzZTO",linkWrapper:"mc7Rk"},em=({editablePost:e})=>{let{blog:{name:t},id:s,objectType:i,placementId:n}=e,{onRemoveTimelineObject:o}=(0,ep._X)(),{_c:a}=(0,R.Us)(),{addOnCloseModalRouteHandler:r}=(0,eh.j)(),l=(0,d.useRef)(null),c=a("Clicking the button will allow the user to reply.","Answer"),p=(0,d.useCallback)(e=>{e&&o?.({id:s,objectType:i,placementId:n}),l.current?.()},[o,s,i,n]),u=(0,d.useCallback)(()=>{l.current=r(({isModalSuccess:e})=>p(!!e))},[]);return/*#__PURE__*/(0,h.jsx)(x.A,{as:"a",className:eu.pillDesign,href:(0,ec.x1)({blogName:t,postId:s.toString()}),label:c,onClick:u,wrapperClassName:eu.linkWrapper,children:c})};var eg=s(36771),eb=s(4211),ex=s(41186);let ev=({id:e,disabled:t=!1})=>{let{_t:s}=(0,R.Us)(),[i,n]=(0,d.useState)(!1);return e?/*#__PURE__*/(0,h.jsx)(eb.C,{isOpen:i,toggleIsOpen:()=>n(!i),children:/*#__PURE__*/(0,h.jsx)(ex.G,{action:"delete-button",disabled:t,label:s("Delete"),onClick:()=>n(!i),children:/*#__PURE__*/(0,h.jsx)(eg.A,{colors:{primary:t?A().paletteGray40:A().paletteGray65},size:{width:21,height:21}})})}):null};var ef=s(28009),ey=s(99426);let ej={igniteButton:"cnNot",label:"y56NR"},eC=({color:e=A().paletteGray65,label:t="",onClick:s,disabled:i=!1,filled:n=!1,textContent:o})=>/*#__PURE__*/(0,h.jsxs)(ex.G,{action:"ignite-button",className:ej.igniteButton,disabled:i,label:t,onClick:s,children:[/*#__PURE__*/(0,h.jsx)(ey.A,{emptyIconColors:{primary:e},filled:n}),o&&/*#__PURE__*/(0,h.jsx)("span",{className:ej.label,children:o})]});var ew=s(92123),eA=s(66404),ek=s(88057),eN=s(53986),eS=s(8486),eI=s(56281),eP=s(85025),eB=s(8121);let eT=(0,m.Kk)("broken-heart-left",{size:{width:24,height:24}}),eR=(0,m.Kk)("broken-heart-right",{size:{width:16,height:24}}),eE={postLikeHeartAnimation:"WXF6Z",like:"y_8_Y",unlike:"WQE_S",brokenHeartRight:"zTFrW",brokenHeartLeft:"C281d"};class eM extends d.Component{constructor(...e){super(...e),n()(this,"state",{isAnimating:!1}),n()(this,"animate",()=>{this.setState(()=>({isAnimating:!0})),window.setTimeout(()=>{this.setState({isAnimating:!1})},750)})}componentDidUpdate(e){e.liked!==this.props.liked&&this.animate()}render(){let{liked:e}=this.props,{isAnimating:t}=this.state;return t?e?/*#__PURE__*/(0,h.jsx)("div",{className:a()(eE.postLikeHeartAnimation,eE.like),children:/*#__PURE__*/(0,h.jsx)(ew.A,{filled:!0,size:{height:51,width:57}})}):/*#__PURE__*/(0,h.jsxs)("div",{className:a()(eE.postLikeHeartAnimation,eE.unlike),children:[/*#__PURE__*/(0,h.jsx)("div",{className:eE.brokenHeartLeft,children:/*#__PURE__*/(0,h.jsx)(eT,{size:{height:54,width:54}})}),/*#__PURE__*/(0,h.jsx)("div",{className:eE.brokenHeartRight,children:/*#__PURE__*/(0,h.jsx)(eR,{size:{height:54,width:36}})})]}):null}}let ez={liked:"ztpfZ",likeButton:"B1Z5w",disabled:"YCZ8P"},eL=({color:e=A().paletteGray65,postIndex:t=0,buttonStyle:s="heart",className:i})=>{let{_c:n,isLoggedIn:o}=(0,R.Us)(),{onInjectTimelineObjects:r}=(0,ep._X)(),{post:{canLike:l,earnedId:d,id:c,liked:p,placementId:u,reblogKey:m,blogName:g},post:b,getIsLongPost:x}=(0,j.Zm)(),{toggleToast:f}=(0,eI.Y)(),{logEvent:C}=(0,y.Ul)(),{mutateAsync:w}=(0,ek.A)(),{pathname:k}=(0,eN.zy)(),{shouldShowLikeTip:N,postLiked:S}=(0,eP.H)(),I=N(t),P=o&&!l,B=async()=>{w({id:c,liked:p,reblogKey:m,blogName:g,placementId:u,earnedId:d,isLongPost:x?.(),context:(0,ec.VH)(k),tooltipShown:I}).then(e=>{e?.response?.timeline?.elements&&r({elementsToInject:e?.response?.timeline?.elements,insertionOptions:{insertionPointIdentifiers:(0,ep.iN)(b),insertionType:"append"}})}).catch(e=>{e instanceof eB.A&&f(e.message,"error")}),p||S()};return/*#__PURE__*/(0,h.jsx)(eA.A,{content:n("Text that is shown as a tooltip to nudge the user to like a post.","Psst... liking a post you’re into makes your recommendations better 👀"),isOpen:I,onDismiss:()=>{C({page:"TourGuideLikeTooltip",eventName:v.R.Dismissed})},onFirstShow:()=>{C({page:"TourGuideLikeTooltip",eventName:v.R.Shown})},popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},children:/*#__PURE__*/(0,h.jsxs)(ex.G,{action:"like-button",className:a()(ez.likeButton,{[ez.liked]:p,[ez.disabled]:P}),disabled:P,label:p?n("Like button: Unlike label","Unlike"):n("Like button: Like label","Like"),onClick:B,wrapperClassName:a()(i),...!o&&{"data-login-wall-type":"like","data-login-wall-title":n('Login wall: Title shown when user clicks on the "Like post" button, after exceeding click counter limit',"You likey-likey?"),"data-login-wall-text":n('Login wall: Text shown when user clicks on the "Like post" button, after exceeding click counter limit',"Great! We are so glad to hear it. If you want to likey-likey this post and lotsy lotsy others just like it, simply sign up to Tumblr."),"data-login-wall-id":c,"data-login-wall-reblog-key":m,"data-login-wall-blog-name":g,"data-login-wall-placement-id":u,"data-login-wall-earned-id":d,"data-login-wall-redirect":(0,ec.IK)({exploreMode:eS.SD})},children:["heart"===s&&/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsx)(ew.A,{emptyIconColors:{primary:P?A().paletteGray40:e},filled:p,size:{width:23,height:21}}),/*#__PURE__*/(0,h.jsx)(eM,{liked:p})]}),"text"===s&&/*#__PURE__*/(0,h.jsx)(h.Fragment,{children:p?n("Like button: Unlike label","Unlike"):n("Like button: Like label","Like")})]})})};var eD=s(35641),eO=s(69248);let eF={button:"uM1xi"},eW=()=>{let{_c:e,_t:t,isLoggedIn:s,features:{embedPost2022:i}}=(0,R.Us)(),n=(0,eO.A)(),[o,a]=(0,d.useState)(!1),{post:{canLike:r,liked:l,id:c}}=(0,j.gY)(),{peeprPostId:p}=(0,eN.g)();if((0,d.useEffect)(()=>{"like"===n&&!l&&(!s||s&&r)&&p===c&&a(!0)},[]),(0,d.useEffect)(()=>{l&&o&&a(!1)},[l,o]),!o||!i)return null;let u=()=>{a(!1)},m=[{text:t("Cancel"),onClick:u,buttonStyle:eD.s.Neutral},{text:/*#__PURE__*/(0,h.jsx)(eL,{buttonStyle:"text",className:eF.button},"like-button"),onClick:()=>{a(!1)},buttonStyle:eD.s.Custom}];return/*#__PURE__*/(0,h.jsx)(U.A,{glassIsClickable:!1,onGlassClick:()=>u(),children:/*#__PURE__*/(0,h.jsx)(eD.m,{buttons:m,title:e("Confirming if user wants to like a post after using a permalink","Do you want to like this post?")})})};var eU=s(66869);class e_ extends d.Component{constructor(...e){super(...e),n()(this,"state",{dialogIsShowing:!1}),n()(this,"apiHelper",(0,eU.Ay)(this.props.appContext.apiFetch)),n()(this,"confirmPublish",()=>this.setState({dialogIsShowing:!0})),n()(this,"cancelConfirmation",()=>this.setState({dialogIsShowing:!1})),n()(this,"publishPost",()=>{let{timelineContext:e,postContext:{post:t}}=this.props,{blog:{uuid:s},id:i}=t;return s&&this.apiHelper.quickPublishPost(s,i).fetch().then(()=>{this.cancelConfirmation(),e?.onRemoveTimelineObject?.(ep.iN(t))})})}render(){let{appContext:{_c:e},postContext:{post:{state:t}}}=this.props,{dialogIsShowing:s}=this.state;if(t===es.Wu.Published||t===es.Wu.Private)return null;let i=e("Action button to publish a post, should be verb here","Post");return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsx)(x.A,{className:eu.pillDesign,label:i,onClick:this.confirmPublish,children:i}),s&&this.renderDialog()]})}renderDialog(){let{_t:e}=this.props.appContext;return/*#__PURE__*/(0,h.jsx)(U.A,{onGlassClick:this.cancelConfirmation,children:/*#__PURE__*/(0,h.jsx)(eD.m,{buttons:[{text:e("Cancel"),onClick:this.cancelConfirmation,buttonStyle:eD.s.Neutral},{text:e("OK"),onClick:this.publishPost,buttonStyle:eD.s.Confirm}],title:e("Publish this post now?")})})}}let eV=(0,B.bb)(e_,{appContext:!0,postContext:!0,timelineContext:!0}),eH=({size:{width:e,height:t}={width:24,height:24},fill:s=w.paletteBlack})=>/*#__PURE__*/(0,h.jsxs)("svg",{fill:"none",height:t,viewBox:"0 0 24 24",width:e,children:[/*#__PURE__*/(0,h.jsx)("path",{clipRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zm0 2c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11z",fill:s,fillRule:"evenodd"}),/*#__PURE__*/(0,h.jsx)("path",{clipRule:"evenodd",d:"M12 5a1 1 0 00-1 1v6a1 1 0 001 1h5a1 1 0 100-2h-4V6a1 1 0 00-1-1z",fill:s,fillRule:"evenodd"})]});class eG extends d.Component{constructor(...e){super(...e),n()(this,"state",{dialogIsShowing:!1}),n()(this,"confirmQueue",()=>this.setState({dialogIsShowing:!0})),n()(this,"cancelConfirmation",()=>this.setState({dialogIsShowing:!1})),n()(this,"queuePost",()=>{let{timelineContext:e,postContext:{post:t},appContext:{apiFetch:s}}=this.props,{blog:{uuid:i},id:n}=t;return i&&(0,P._B)(s,{blogUuid:i,postId:n}).fetch().then(()=>{this.cancelConfirmation(),e?.onRemoveTimelineObject?.(ep.iN(t))})})}render(){let{appContext:{_c:e},postContext:{post:{state:t}}}=this.props,{dialogIsShowing:s}=this.state;if(t!==es.Wu.Draft&&t!==es.Wu.Submission)return null;let i=e("Action button to queue a post, should be verb here","Queue");return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsx)(x.A,{label:i,onClick:this.confirmQueue,children:/*#__PURE__*/(0,h.jsx)(eH,{fill:w.paletteGray65})}),s&&this.renderDialog()]})}renderDialog(){let{_t:e}=this.props.appContext;return/*#__PURE__*/(0,h.jsx)(U.A,{onGlassClick:this.cancelConfirmation,children:/*#__PURE__*/(0,h.jsx)(eD.m,{buttons:[{text:e("Cancel"),onClick:this.cancelConfirmation,buttonStyle:eD.s.Neutral},{text:e("OK"),onClick:this.queuePost,buttonStyle:eD.s.Confirm}],title:e("Queue this post for publishing?")})})}}let e$=(0,B.bb)(eG,{appContext:!0,postContext:!0,timelineContext:!0});var eq=s(91988),eQ=s(2376),eK=s(38800);let eY=({reblogKey:e,reblogBlogName:t,reblogPostId:s,routeQueryProps:i,mode:n="reblog",...o})=>{let{pathname:a}=(0,eN.zy)(),{isLoggedIn:r,_c:l}=(0,R.Us)(),d=()=>{let o=(0,eq.A)(i),a={reblogKey:e,blogName:t,postId:s.toString()};return"reblog"===n?(0,ec.ed)(a,o):(0,ec.Sg)(a,o)};return r?/*#__PURE__*/(0,h.jsx)(eQ.A,{...o,getPath:d,isAlreadyOnPostFormPath:ec.tv}):/*#__PURE__*/(0,h.jsx)(eQ.A,{...o,className:eK.A.loggedOutLink,"data-login-wall-type":"reblog","data-login-wall-title":l('Login wall: Title shown when user clicks on the "Reblog" button, after exceeding click counter limit',"Want to share? You're nearly there…"),"data-login-wall-reblog-path":d(),"data-login-wall-redirect":a})};var eX=s(46383),eJ=s(94683),eZ=s(43776);let e0={bubbles:"o6JAm",avatar:"LpPf2",ellipsis:"ALkTz"},e1=({onClickSelectedBlog:e,blogs:t,onMouseLeave:s,onMouseEnter:i,avatarTitle:n})=>{let{_c:o}=(0,R.Us)(),a=(0,d.useCallback)((t,s)=>{e(s,t,{bubbleIndex:3})},[e]);if(1===t.length)return null;let r=t.length>4,l=r?t.slice(0,3):t;return/*#__PURE__*/(0,h.jsxs)("div",{"aria-label":o("A list of blogs","Blogs"),className:e0.bubbles,onMouseEnter:i,onMouseLeave:s,children:[l.map((t,s)=>/*#__PURE__*/(0,h.jsx)(x.A,{onClick:i=>e(i,t,{bubbleIndex:s}),title:n?.(t.name),wrapperClassName:e0.avatar,children:/*#__PURE__*/(0,h.jsx)($.A,{avatarShape:eZ.b.Circle,dimension:50,imageResponse:t.avatar})},s)),r&&/*#__PURE__*/(0,h.jsx)("div",{className:e0.avatar,children:/*#__PURE__*/(0,h.jsx)(eX.Ay,{blogs:t.slice(3),onClickSelectedBlog:a,selectedBlog:t[0],children:e=>/*#__PURE__*/(0,h.jsx)(x.A,{onClick:e,wrapperClassName:e0.ellipsis,children:/*#__PURE__*/(0,h.jsx)(eJ.W,{colors:{primary:w.paletteNavy}})})})})]})};var e6=s(27717),e2=s(85191),e4=s(89972),e5=s(83322),e9=s(4048),e3=s(27984),e8=s(6865),e7=s(31360),te=s(84007),tt=s(94117);let ts={postFastReblogAnimation:"n8L1c"};class ti extends d.Component{constructor(...e){super(...e),n()(this,"state",{isAnimating:!1}),n()(this,"animate",()=>{this.setState({isAnimating:!0},()=>setTimeout(()=>this.setState({isAnimating:!1}),800))})}render(){return this.props.children?this.state.isAnimating&&/*#__PURE__*/(0,h.jsx)("div",{className:ts.postFastReblogAnimation,children:/*#__PURE__*/(0,d.cloneElement)(this.props.children,{fill:this.props.fill})}):null}}n()(ti,"defaultProps",{fill:A().paletteGreen,children:null});let tn={disabled:"Od7LS"},to=/*#__PURE__*/function(e){return e[e.Reblogged=0]="Reblogged",e[e.Queued=1]="Queued",e}({}),ta=({color:e=A().paletteGray65,disabled:t,mode:s="reblog",postIndex:i=0,enableFastQueueing:n=!1})=>{let{apiFetch:o,_t:r,_c:l,features:c}=(0,R.Us)(),{logEvent:p}=(0,y.Ul)(),{post:{id:u,reblogKey:m,placementId:g,placementId:b,earnedId:x,earnedId:f,blogName:C},post:w,getIsLongPost:k}=(0,j.Zm)(),{tabId:N}=(0,e3.Vd)(),{addOnCloseModalRouteHandler:P}=(0,eh.j)(),{toggleToast:B}=(0,eI.Y)(),{isMobile:T}=(0,I.Ri)(),{canFastReblog:E,canFastQueue:M,fastRebloggedPosts:z,setDefaultFastBlog:L,getBlogs:D}=(0,S.MX)(),{onReblogged:O,onInjectTimelineObjects:F}=(0,ep._X)(),{shouldShowReblogTip:W,reblogTipShown:U}=(0,eP.H)(),_=W(i),[V,H]=d.useState(!1),[G,$]=d.useState(void 0),q=d.useRef(null),K=d.useRef(null),Y=d.useRef((0,eU.Ay)(o)),X=d.useRef(!1),J=d.useRef(!1),Z=d.useRef();d.useEffect(()=>()=>Z.current?.(),[]);let ee=D(),et="reblog"===s&&E,ei=M&&("queue"===s||"reblog"===s&&n),en=!t&&(et||ei),eo=X.current||J.current;en||(J.current=!1,eo=!1);let ea=G===to.Reblogged,er=G===to.Queued,el=ea?A().paletteGreen:A().palettePurple,ed=ea||z.includes(u)?A().paletteGreen:G===to.Queued?A().palettePurple:t?A().paletteGray40:et?A().paletteBlue:ei?A().palettePink:e,ec="reblog"===s?/*#__PURE__*/(0,h.jsx)(Q.A,{colors:{primary:ed},size:{width:21,height:21}}):/*#__PURE__*/(0,h.jsx)(eH,{fill:ed});if(!u||!m)return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[ec,/*#__PURE__*/(0,h.jsx)(ti,{fill:el,ref:K})]});let eu=(e,t)=>eg(es.Wu.Published,e,t),em=(e,t)=>eg(es.Wu.Queue,e,t),eg=(e,t,s)=>(_&&U(),t?.preventDefault(),Y.current.postAPost({selectedBlogName:s,placementId:b,logEvent:p,isLongPost:k?.(),post:{...w,date:void 0,tags:void 0,content:[],layout:[],state:e,parentTumblelogUuid:w.blog.uuid,parentPostId:u,id:""},reblogType:e9.a.Fast}).fetch().then(t=>(K.current?.animate(),t?.response?.timeline?.elements&&F({elementsToInject:t?.response?.timeline?.elements,insertionOptions:{insertionPointIdentifiers:(0,ep.iN)(w),insertionType:"append"}}),w&&$(e===es.Wu.Published?to.Reblogged:to.Queued)))),eb=e=>{(0,e7.AF)(u,b,k?.(),N),!(e?.ctrlKey||e?.metaKey)&&(Z.current=P(ex),_&&U())},ex=({isModalSuccess:e,response:t})=>{Z.current?.(),(0,e7.C1)(),e&&(ey&&p({eventName:v.R.ClientReblog,eventDetails:{placement_id:g,earned_id:x,tab:N}}),void 0===G&&$(to.Reblogged),O?.(u),t?.response?.timeline?.elements&&F({elementsToInject:t?.response?.timeline?.elements,insertionOptions:{insertionPointIdentifiers:(0,ep.iN)(w),insertionType:"append"}}))},ev=(e,t,s)=>{J.current=!1,X.current=!1,H(!V),L(t),(et?eu:em)(e,t.name).then(()=>{p({eventDetails:{...s,tab:N},eventName:et?v.R.FastReblog:v.R.FastQueue}),B(et?/*#__PURE__*/(0,h.jsx)(e2.Ay,{params:{blogName:t.name},children:"Reblogged to [blogName]"}):/*#__PURE__*/(0,h.jsx)(e2.Ay,{params:{blogName:t.name},children:"Queued to [blogName]"})),et&&O?.(u)}).catch(()=>{B((0,te.X)((0,e8.vf)(r)),"error")})},ef=e=>ev(e,ee[0]),ey=(0,tt.FW)({isMobile:T,features:c,editablePost:w,isReblog:!0}),ej=et?r("Quick Reblog"):ei?r("Quick Queue"):"reblog"===s?r("Reblog"):l("Action button to queue a post, should be verb here","Queue"),eC={};if((0,e5.Tt)(w)&&!f){let{advertiserId:e,campaignId:t,creativeId:s,adGroupId:i,adId:n}=w;eC={...eC,[e5.rJ.AdvertiserId]:e,[e5.rJ.CampaignId]:t,[e5.rJ.CreativeId]:s,[e5.rJ.AdGroupId]:i,[e5.rJ.AdId]:n}}return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[en&&eo&&/*#__PURE__*/(0,h.jsx)(e1,{avatarTitle:e=>et?r("Reblog to %1$s",[e]):r("Queue to %1$s",[e]),blogs:ee,onClickSelectedBlog:ev,onMouseEnter:()=>J.current=!0,onMouseLeave:e=>{q.current?.contains(e.relatedTarget)||(X.current=!1,J.current=!1,H(!V))}}),/*#__PURE__*/(0,h.jsx)(e6.A,{content:ea?r("Reblogged"):er?r("Queued"):"reblog"===s?r("Reblog"):l("Action button to queue a post, should be verb here","Queue"),disable:et,position:e4.$x.Top,...ea&&{color:e6.y.GREEN},children:/*#__PURE__*/(0,h.jsx)(eA.A,{content:l("Text that is shown as a tooltip to nudge the user to reblog a post.","Tap for a little clue… 🔎"),isOpen:W(i)&&"reblog"===s,onDismiss:()=>{p({page:"TourGuideReblogTooltip",eventName:v.R.Dismissed})},onFirstShow:()=>{p({page:"TourGuideReblogTooltip",eventName:v.R.Shown})},popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},children:/*#__PURE__*/(0,h.jsx)(eY,{className:a()({[tn.disabled]:t}),disabled:t,disableNavigation:en,forwardedRef:q,label:ej,mode:s,onClick:e=>{en?ef(e):eb(e),p({eventName:v.R.ReblogIconClick,eventDetails:{tooltipShown:!!_}})},reblogBlogName:C,reblogKey:m,reblogPostId:u,routeQueryProps:eC,onMouseEnter:()=>{X.current=!0,en&&H(!V)},onMouseLeave:()=>X.current=!1,children:ec})})}),/*#__PURE__*/(0,h.jsx)(ti,{fill:el,ref:K,children:"reblog"===s?/*#__PURE__*/(0,h.jsx)(Q.A,{colors:{primary:el},size:{height:21,width:21}}):/*#__PURE__*/(0,h.jsx)(eH,{size:{height:21,width:21}})})]})};var tr=s(99937),tl=s(99152);let td=({canDoThingsFast:e})=>{let[t,s]=(0,d.useState)(!1),i=(0,d.useRef)(null),n=(0,d.useRef)(!1),o=(0,d.useRef)(!1),a=n.current||o.current;return e||(o.current=!1,a=!1),{showBubbles:a,onBubbleMouseEnter:()=>{o.current=!0},onBubbleMouseLeave:e=>{i.current?.contains(e.relatedTarget)||(n.current=!1,o.current=!1,s(!t))},onBubbleMouseClick:()=>{o.current=!1,n.current=!1,s(!t)},onAnchorMouseEnter:()=>{n.current=!0,e&&s(!t)},onAnchorMouseLeave:()=>{n.current=!1}}};var tc=s(98589),th=s(51539),tp=s(75184);let tu={root:"v2JIl",title:"qcYGf",option:"Gdn85",blogOption:"asnZc",blogOptionMeta:"yX3XS",blogOptionTitle:"pT6VO",titleAvatar:"nT5UJ",optionIcon:"cP0pN",titleLabel:"QgXdE",optionLabel:"kt8zB",blogOptionName:"iGLok",optionShortcut:"OPqLY",listItem:"M9Ov7",listItemInner:"crS1E",chevron:"YqkCK",blogSelectorOpen:"n1exf",disabled:"CGCzZ"};var tm=s(20162);let tg=({_c:e,buttonState:t,iconColor:s})=>{let i=e("Tooltip for the reblog button","Reblog"),n=s,o=/*#__PURE__*/(0,h.jsx)(Q.A,{colors:{primary:n},size:{height:21,width:21}});switch(t){case"published":i=e("Tooltip when the post has been reblogged","Reblogged"),n=A().paletteGreen;break;case"queued":i=e("Tooltip when the post has been queued","Queued"),n=A().palettePurple;break;case"disabled":n=A().paletteGray40;break;case"reblog-hotkey-active":n=A().paletteBlue;break;case"queue-hotkey-active":n=A().palettePink,o=/*#__PURE__*/(0,h.jsx)(eH,{fill:n,size:{height:24,width:24}});break;case"comment-hotkey-active":n=A().paletteOrange,o=/*#__PURE__*/(0,h.jsx)(tm.A,{colors:{primary:n},size:{height:21,width:21}})}return{label:i,color:n,icon:o}},tb=({activeHotkey:e,disabled:t,postState:s})=>{if(e)switch(e){case"reblog":return"reblog-hotkey-active";case"queue":return"queue-hotkey-active";case"comment":return"comment-hotkey-active"}if(t)return"disabled";switch(s){case es.Wu.Published:return"published";case es.Wu.Queue:return"queued"}return"default"},tx=({disabled:e=!1,iconColor:t=A().paletteGray65,onClick:s,postIndex:i=0,postState:n,onBubbleClick:o})=>{let{_c:r}=(0,R.Us)(),{logEvent:l}=(0,y.Ul)(),{post:d}=(0,j.gY)(),{shouldShowReblogTip:c}=(0,eP.H)(),p=c(i),{canFastReblog:u,canFastQueue:m,canFastQuote:g}=(0,S.MX)(),b=u?"reblog":m?"queue":g?"comment":void 0,{label:x,color:f}=tg({buttonState:tb({postState:n,activeHotkey:b,disabled:e}),iconColor:t,_c:r}),C=!e&&(u||m||g),{data:w}=(0,th.c)(),{showBubbles:k,onBubbleMouseEnter:N,onBubbleMouseLeave:I,onBubbleMouseClick:P,onAnchorMouseEnter:B,onAnchorMouseLeave:T}=td({canDoThingsFast:C});return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[C&&k&&/*#__PURE__*/(0,h.jsx)(e1,{avatarTitle:e=>{let t="";switch(b){case"reblog":t=r("Tooltip for reblogging to a particular blog","Reblog to %1$s",[e]);break;case"comment":t=r("Tooltip for reblogging with a comment to a particular blog","Reblog with comment to %1$s",[e]);break;case"queue":t=r("Tooltip for queuing a reblog to a particular blog","Queue to %1$s",[e])}return t},blogs:w||[],onClickSelectedBlog:(e,t)=>{P(),b&&o(t,b)},onMouseEnter:N,onMouseLeave:I}),/*#__PURE__*/(0,h.jsx)(e6.A,{content:x,position:e4.$x.Top,...n===es.Wu.Published&&{color:e6.y.GREEN},children:/*#__PURE__*/(0,h.jsx)(eA.A,{content:r("Text that is shown as a tooltip to nudge the user to reblog a post.","Tap for a little clue… 🔎"),isOpen:p,onDismiss:()=>{l({page:"TourGuideReblogTooltip",eventName:v.R.Dismissed})},onFirstShow:()=>{l({page:"TourGuideReblogTooltip",eventName:v.R.Shown})},popoverProps:{useFlex:!0,targetStyles:{height:"100%"}},children:/*#__PURE__*/(0,h.jsx)(tc.x,{action:"reblog-menu-button","aria-disabled":e,"aria-label":x,className:a()({[tu.disabled]:e}),href:e?void 0:(0,tp.J)(d),onClick:t=>{t.preventDefault(),e||(s(),l({eventName:v.R.ReblogIconClick,eventDetails:{tooltipShown:!!p}}))},onMouseEnter:B,onMouseLeave:T,role:"button",children:/*#__PURE__*/(0,h.jsx)(Q.A,{colors:{primary:f},size:{height:21,width:21}})})})})]})};var tv=s(71273),tf=s(41341),ty=s(72991),tj=s(99805);let tC=(e,t)=>e?e.map(e=>({value:e,label:e.name,title:e.title,selected:e.name===t?.name})):[],tw=e=>[{value:"reblog",label:e("A menu option to immediately reblog this post, without opening the post editor","Reblog now"),icon:/*#__PURE__*/(0,h.jsx)(Q.A,{colors:{primary:A().paletteGray65},size:{height:21,width:21}}),shortcut:"E"},{value:"comment",label:e("A menu option to reblog this post by opening the post editor","Reblog"),icon:/*#__PURE__*/(0,h.jsx)(tm.A,{colors:{primary:A().paletteGray65},size:{height:21,width:21}}),shortcut:"Q",as:"a"},{value:"queue",label:e("A menu option to immediately add this post to your queue, without opening the post editor","Add to queue"),icon:/*#__PURE__*/(0,h.jsx)(eH,{fill:A().paletteGray65,size:{height:21,width:21}}),shortcut:"W"}],tA=({activeSelector:e="reblog-selector",selectedBlog:t,onChangeActiveSelector:s,onChangeSelectedBlog:i,onClose:n,onSelectReblogAction:o})=>{let r;let{_c:l}=(0,R.Us)(),{data:d}=(0,th.c)(),c=tC(d,t),p=tw(l),{post:u}=(0,j.gY)(),m=c.map(({value:e,label:t,title:s})=>({content:/*#__PURE__*/(0,h.jsxs)("div",{className:a()(tu.option,tu.blogOption),children:[/*#__PURE__*/(0,h.jsx)("div",{className:tu.iconOption,children:/*#__PURE__*/(0,h.jsx)($.A,{avatarShape:e.theme?.avatarShape,dimension:tj.postFooterReblogMenuOptionAvatarWidth,imageResponse:e.avatar,name:e.name,showBlogCard:!1,url:e.url})}),/*#__PURE__*/(0,h.jsxs)("div",{className:tu.blogOptionMeta,children:[/*#__PURE__*/(0,h.jsx)("div",{className:a()(tu.optionLabel,tu.blogOptionName),children:t}),s&&/*#__PURE__*/(0,h.jsx)("div",{className:tu.blogOptionTitle,children:s})]})]}),value:e,label:t})),g=p.map(({value:e,label:t,icon:s,as:i})=>({content:/*#__PURE__*/(0,h.jsxs)("div",{className:tu.option,children:[/*#__PURE__*/(0,h.jsx)("div",{className:tu.optionIcon,children:s}),/*#__PURE__*/(0,h.jsx)("div",{className:tu.optionLabel,children:t})]}),value:e,label:t,as:i,href:(0,tp.J)(u)}));switch(e){case"blog-selector":r={options:m,onChange:(e,t)=>{t?.nativeEvent.stopImmediatePropagation(),i(e),s("reblog-selector")}};break;case"reblog-selector":r={options:g,onChange:o}}let b=/*#__PURE__*/(0,h.jsxs)("div",{className:tu.title,onClick:()=>{s("reblog-selector"===e?"blog-selector":"reblog-selector")},role:"presentation",children:[/*#__PURE__*/(0,h.jsx)("div",{className:tu.titleAvatar,children:/*#__PURE__*/(0,h.jsx)($.A,{avatarShape:t?.theme?.avatarShape,dimension:tj.postFooterReblogMenuTitleAvatarWidth,imageResponse:t?.avatar,isLink:!1,name:t?.name,showBlogCard:!1,url:t?.url})}),/*#__PURE__*/(0,h.jsx)("div",{"aria-label":"Active blog",className:tu.titleLabel,children:t?.name}),/*#__PURE__*/(0,h.jsx)(tv.dT,{className:tu.chevron,colors:{primary:A().paletteGray65},size:{width:tj.postFooterReblogMenuCaretSize,height:tj.postFooterReblogMenuCaretSize}})]});return/*#__PURE__*/(0,h.jsx)(ty.s.Provider,{value:null,children:/*#__PURE__*/(0,h.jsx)(tf.A,{...r,isOpen:!0,listItemClassName:tu.listItem,listItemInnerClassName:tu.listItemInner,noAnchor:!0,onClickGlass:n,titleEl:b})})},tk=()=>{let{apiFetch:e,_t:t}=(0,R.Us)(),{logEvent:s}=(0,y.Ul)(),{toggleToast:i}=(0,eI.Y)();return async(n,o,a)=>{try{return await (0,eU.Ay)(e).postAPost({selectedBlogName:o.name,placementId:n.placementId,logEvent:s,post:{...n,id:"",date:void 0,tags:void 0,content:[],layout:[],state:a,parentTumblelogUuid:n.blog.uuid,parentPostId:n.id},reblogType:a===es.Wu.Published?e9.a.Fast:void 0}).fetch(),i(a===es.Wu.Published?/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Message displayed after a post is successfully reblogged",params:{blogName:o.name},children:"Reblogged to [blogName]"}):/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Message displayed after a post is successfully queued",params:{blogName:o.name},children:"Queued to [blogName]"})),!0}catch(e){return i((0,te.X)((0,e8.vf)(t)),"error"),!1}}},tN=({color:e,disabled:t,postIndex:s,selector:i="reblog-selector"})=>{let{logEvent:n}=(0,y.Ul)(),[o,r]=(0,d.useState)(!1),[l,c]=(0,d.useState)(i),[p,u]=(0,d.useState)(),{post:m}=(0,j.gY)(),{selectedBlog:g,onChangeSelectedBlog:b}=(0,tl.Ay)(),{onReblogged:x}=(0,ep._X)(),f=tk(),C=()=>{o||(r(!0),n({eventName:v.R.ReblogPopoverOpen}))},w=(0,d.useCallback)(()=>{o&&(r(!1),c("reblog-selector"),n({eventName:v.R.ReblogPopoverClose}))},[o,n]),A=async(e,t,s)=>{switch(w(),s){case"reblog":await f(e,t,es.Wu.Published)&&(u(es.Wu.Published),n({eventName:v.R.ReblogPopoverReblogClick}),x?.(e.id));break;case"queue":await f(e,t,es.Wu.Queue)&&(u(es.Wu.Queue),n({eventName:v.R.ReblogPopoverQueueClick}));break;case"comment":n({eventName:v.R.ReblogPopoverReblogWithCommentClick})}},k=(0,tr.A)({outsideEvents:{click:!0,scroll:!0},onOutsideEvent:w});return/*#__PURE__*/(0,h.jsxs)("div",{className:a()(tu.root,{[tu.blogSelectorOpen]:"blog-selector"===l}),ref:k,children:[/*#__PURE__*/(0,h.jsx)(tx,{disabled:t,iconColor:e,onBubbleClick:(e,t)=>{b(e),A(m,e,t)},onClick:()=>{o?w():C()},postIndex:s,postState:p}),o&&/*#__PURE__*/(0,h.jsx)(tA,{activeSelector:l,onChangeActiveSelector:c,onChangeSelectedBlog:b,onClose:w,onSelectReblogAction:e=>{g&&A(m,g,e)},selectedBlog:g})]})};var tS=s(94818);let tI={disabled:"tc6fQ"},tP=function({color:e=A().paletteGray65,onClick:t,disabled:s,forwardedRef:i}){let{_t:n}=(0,R.Us)(),o=s?A().paletteGray40:e;return/*#__PURE__*/(0,h.jsx)(ex.G,{action:"reply-button",className:s?tI.disabled:void 0,disabled:s,forwardedRef:i,label:n("Reply"),onClick:t,children:/*#__PURE__*/(0,h.jsx)(tS.A,{emptyIconColors:{primary:o},size:{width:21,height:21}})})};var tB=s(49035),tT=s(60568),tR=s(19974),tE=s(99722),tM=s(90381),tz=s(68331),tL=s(75182),tD=s(79146),tO=s(79393),tF=s(47741),tW=/*#__PURE__*/s.n(tF),tU=s(87381);let t_={footer:"tOKgq",igniteTooltip:"x23xO",footerRow:"m5KTc",zeroNotes:"VNASy",noDivider:"y49Zv",noteCount:"gstmW",controls:"MCavR",controlIcon:"sfGru",blazeEngagementButtonShare:"HhLx2",blazeEngagementButtonReply:"rv6SS",blazeEngagementButtonReblog:"Cuwye",blazeEngagementButtonLike:"z6CkC",controlAutoWidth:"Ed7CO",postControl:"t21M4",noteCountButton:"rlv6m",noteCountButtonInner:"RHkx9",noteCountContainer:"zrO3e",notesCloseButton:"ePsyd",controlsWithDivider:"r3vIz",postActivityWrapper:"yTb5J",postActivityWrapperOpen:"DUvqr",notesPreviewContainer:"SAyo6",fastQueueButton:"rW8sh"},tV=({children:e,className:t})=>/*#__PURE__*/(0,h.jsx)("div",{className:a()(t_.controlIcon,t),children:e}),tH=e=>{let{presentationStyle:{showsEditButton:t,showsReplyButton:s,showsShareButton:i,showsReblogButton:n,showsLikeButton:o,showsDeleteButton:a,showsQueueButton:r,showsPublishButton:l},post:{canSendInMessage:d,canReply:c,canReblog:h,canLike:p,canDelete:u,canEdit:m,queuedState:g,state:b,blog:x}}=e,v=b===es.Wu.Queued&&g===es.nQ.Queued&&x,f=b===es.Wu.Draft,y=b===es.Wu.Private,j=h&&!x.isPasswordProtected&&!y&&n,C=h&&!x.isPasswordProtected&&!y&&r;return{isQueue:!!v,isDraft:f,isPrivate:y,canDoReply:!!(c&&s),canDoShare:d&&i,canDoReblog:j,canDoLike:p&&o,canDoEdit:!!(m&&t),canDoQueue:C,canDoDelete:!!(u&&a),canDoPublish:!!(m&&l)}};class tG extends d.Component{constructor(e){super(e),n()(this,"noteCountRef",/*#__PURE__*/(0,d.createRef)()),n()(this,"previewNoteRef",/*#__PURE__*/(0,d.createRef)()),n()(this,"replyButtonRef",/*#__PURE__*/(0,d.createRef)()),n()(this,"getTopRow",()=>{let{postContext:e}=this.props,{presentationStyle:{showsFooterDivider:t}}=e,s=this.getIgniteButton(),i=this.getUserControlButtons(),{isQueue:n,isDraft:o}=tH(e);if(o||n)return null;let r=[],l=[];return(s&&r.push(/*#__PURE__*/(0,h.jsx)(d.Fragment,{children:s},"ignite")),i&&l.push(/*#__PURE__*/(0,h.jsx)(d.Fragment,{children:i},"user-controls")),0===r.length&&0===l.length)?null:/*#__PURE__*/(0,h.jsxs)("div",{className:a()(t_.footerRow,{[t_.noDivider]:!t}),children:[/*#__PURE__*/(0,h.jsx)("div",{className:a()(t_.controls,t_.controlsWithDivider),children:r}),/*#__PURE__*/(0,h.jsx)("div",{className:t_.controls,children:l})]})}),n()(this,"getBottomRow",()=>{let{appContext:{isLoggedIn:e},postContext:{presentationStyle:{showsFooterDivider:t}}}=this.props,s=this.noteContent();return/*#__PURE__*/(0,h.jsxs)("div",{className:a()(t_.footerRow,{[t_.noDivider]:!t,[t_.zeroNotes]:null===s}),children:[!!s&&/*#__PURE__*/(0,h.jsx)("div",{className:t_.noteCount,children:s}),e?this.renderControls():this.renderLoggedOutControls()]})}),n()(this,"postActivityContent",()=>{let{timelineContext:{onReplyAdded:e},postContext:t}=this.props,{post:{id:s,blog:i,reblogKey:n,replyCount:o,reblogCount:a,likeCount:r,selfReplyCount:l=0,community:d,rebloggedRootName:c},presentationStyle:{expandNotesOnMount:p}}=t,{focusReplyOnMount:u,postActivityPinPreviewNote:m}=this.state,{canDoReply:g,canDoReblog:b}=tH(t);return/*#__PURE__*/(0,h.jsx)(G,{blog:i,canReblog:b,canReply:g,expandNotesOnMount:p,focusReplyOnMount:u,id:s,isCommunity:!!d,likeCount:r,onModeChange:this.onModeChange,onReplyAdded:e,pinPreviewNote:m,reblogCount:a,reblogFrom:c,reblogKey:n,replyCount:o,selfReplyCount:l})}),n()(this,"renderLoggedOutControls",()=>{let{postContext:{presentationStyle:{showsReblogButton:e,showsLikeButton:t},post:{state:s}},postChromeStyles:i}=this.props,n=[];return n.push(/*#__PURE__*/(0,h.jsx)(tV,{children:this.sendAPostContent()},"send a post")),e&&s!==es.Wu.Private&&n.push(/*#__PURE__*/(0,h.jsx)(tV,{children:/*#__PURE__*/(0,h.jsx)(ta,{})},"reblog")),t&&n.push(/*#__PURE__*/(0,h.jsxs)(tV,{children:[/*#__PURE__*/(0,h.jsx)(eL,{}),/*#__PURE__*/(0,h.jsx)(eW,{})]},"like")),/*#__PURE__*/(0,h.jsx)("div",{className:t_.controls,style:i,children:n})}),n()(this,"getUserControlButtons",()=>{let{appContext:{features:{tumblrIgnite:e}},postContext:t,canAnswer:s,isInboxAsk:i,editablePost:n}=this.props,{post:{id:o,shouldOpenInLegacy:a,canManageBlaze:r},presentationStyle:{showsDeleteButton:l,showsEditButton:d}}=t,{canDoEdit:c,canDoDelete:p}=tH(t),u=[];return l&&(e&&r||p)&&u.push(/*#__PURE__*/(0,h.jsx)(tV,{children:/*#__PURE__*/(0,h.jsx)(e6.A,{className:r?t_.igniteTooltip:void 0,content:this.deleteTooltipMessage(),position:e4.$x.Top,children:/*#__PURE__*/(0,h.jsx)(ev,{disabled:r,id:o})})},"delete")),d&&(e&&r||c&&n&&!i&&!s)&&u.push(/*#__PURE__*/(0,h.jsx)(tV,{children:/*#__PURE__*/(0,h.jsx)(e6.A,{className:r?t_.igniteTooltip:void 0,content:this.editTooltipMessage(),position:e4.$x.Top,children:/*#__PURE__*/(0,h.jsx)(ef.A,{disabled:!n||r,editablePost:n??this.props.postContext.post,shouldAlwaysOpenInLegacy:a})})},"edit")),u.length>0?u:void 0}),n()(this,"getIgniteButton",({withLabel:e}={withLabel:!0})=>{let t;let{appContext:{features:{tumblrIgnite:s}},postContext:{post:{canBlaze:i,canManageBlaze:n,isBlazed:o}}}=this.props;return s&&(i||n)&&(t=/*#__PURE__*/(0,h.jsx)(tV,{className:t_.controlAutoWidth,children:/*#__PURE__*/(0,h.jsx)(e6.A,{className:n?t_.igniteTooltip:void 0,content:this.popoverMessage(),position:e4.$x.Top,children:/*#__PURE__*/(0,h.jsx)(eC,{color:n?A().betamaxOrange:A().paletteGray65,filled:o,label:this.popoverMessage(),onClick:this.toggleIgniteProductPopover,textContent:e?this.igniteTextMessage():void 0})})},"ignite")),t}),n()(this,"renderControls",()=>{let{appContext:{_t:e,_c:t,features:{blazeAdFormats:s},labsSettings:{fastQueue:i}},postContext:n,isInInboxTimeline:o,isNarrow:r,isSubmissionDraft:l,isInboxAsk:d,canAnswer:c,postChromeStyles:p,editablePost:u,postIndex:m,deviceContext:{isMobile:g}}=this.props,{presentationStyle:{showsReplyButton:b,showsShareButton:x,showsReblogButton:v,showsQueueButton:f,showsLikeButton:y},post:j}=n,{isQueue:C,isDraft:w,canDoReply:A,canDoShare:k,canDoReblog:N,canDoLike:S,canDoEdit:I,canDoQueue:P,canDoPublish:B}=tH(n),{id:T,liked:R,state:E,blog:M}=j,z=s&&j.isBlazed&&j.blazeCampaign?.campaignGoal==="engagement",L=[];if((k||x)&&L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:a()({[t_.blazeEngagementButtonShare]:z}),children:this.sendAPostContent()},"send a post")),(A||b)&&L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:a()({[t_.blazeEngagementButtonReply]:z}),children:/*#__PURE__*/(0,h.jsx)(e6.A,{content:e("Reply"),position:e4.$x.Top,children:/*#__PURE__*/(0,h.jsx)(tP,{color:z?tW().colorBrandBlue:void 0,forwardedRef:this.replyButtonRef,onClick:this.onReplyIconClick})})},"reply")),f&&i&&!(w||l||d)&&!r&&L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:t_.fastQueueButton,children:/*#__PURE__*/(0,h.jsx)(ta,{disabled:!P,mode:"queue",postIndex:m})},"queue-post")),(N||v)&&!o&&(g?L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:a()({[t_.blazeEngagementButtonReblog]:z}),children:/*#__PURE__*/(0,h.jsx)(tN,{color:z?tW().colorBrandGreen:void 0,disabled:!N,postIndex:m})},"reblog")):L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:a()({[t_.blazeEngagementButtonReblog]:z}),children:/*#__PURE__*/(0,h.jsx)(ta,{color:z?tW().colorBrandGreen:void 0,disabled:!N,enableFastQueueing:!i||r,postIndex:m})},"reblog"))),(S||y)&&L.push(/*#__PURE__*/(0,h.jsxs)(tV,{className:a()({[t_.blazeEngagementButtonLike]:z}),children:[/*#__PURE__*/(0,h.jsx)(e6.A,{content:e(R?"Liked":"Like"),position:e4.$x.Top,...R&&{color:e6.y.RED},children:/*#__PURE__*/(0,h.jsx)(eL,{color:z?tW().colorBrandRed:void 0,postIndex:m})}),/*#__PURE__*/(0,h.jsx)(eW,{})]},"like")),I&&C&&L.push(/*#__PURE__*/(0,h.jsx)(tT.A,{children:/*#__PURE__*/(0,h.jsx)(tV,{children:/*#__PURE__*/(0,h.jsx)(el.A,{})})},"reorder")),I&&C&&L.push(/*#__PURE__*/(0,h.jsx)(tT.A,{children:/*#__PURE__*/(0,h.jsx)(W,{blogName:M.name,id:T.toString()})},"queueControls")),w||C){let e=this.getUserControlButtons();e&&L.push(...e)}return u&&c&&L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:t_.controlAutoWidth,children:/*#__PURE__*/(0,h.jsx)(em,{editablePost:u})},"answer")),P&&(w||l)&&L.push(/*#__PURE__*/(0,h.jsx)(tV,{children:/*#__PURE__*/(0,h.jsx)(e6.A,{content:t("Tooltip for button to queue a post, should be verb here","Queue"),position:e4.$x.Top,children:/*#__PURE__*/(0,h.jsx)(e$,{})})},"queue")),B&&(w||E===es.Wu.Queued||l)&&L.push(/*#__PURE__*/(0,h.jsx)(tV,{className:a()(t_.postControl,t_.controlAutoWidth),children:/*#__PURE__*/(0,h.jsx)(eV,{})},"post")),/*#__PURE__*/(0,h.jsx)("div",{className:t_.controls,style:p,children:L})}),n()(this,"editTooltipMessage",()=>{let{postContext:{post:{canManageBlaze:e}}}=this.props,{_t:t}=this.props.appContext;return t(e?"A post in a Blaze campaign cannot be edited":"Edit")}),n()(this,"deleteTooltipMessage",()=>{let{postContext:{post:{canManageBlaze:e}}}=this.props,{_t:t}=this.props.appContext;return t(e?"A post in a Blaze campaign cannot be deleted":"Delete")}),n()(this,"popoverMessage",()=>{let{postContext:{post:{isBlazed:e,isBlazePending:t}}}=this.props,{_t:s}=this.props.appContext;return s(e?"This post is on fire – in a good way! We’ll send you a wrap-up when it’s done.":t?"Blaze campaign pending! We’ll email you when it’s approved.":"Blaze")}),n()(this,"igniteTextMessage",()=>{let{appContext:{_c:e,_t:t},postContext:{post:{isBlazed:s,isBlazePending:i}}}=this.props;return s?e("Approved state of Blaze post button","Blazed"):i?e("Pending state of Blaze post button","Pending"):t("Blaze")}),n()(this,"toggleNotesPanel",()=>{this.setState(e=>("notes"===e.postActivityTypeToOpen||e.notesOpenedFromReply||this.logOpenNotesAnalyticsEvents(),{notesOpenedFromReply:!1,postActivityPinPreviewNote:!e.postActivityIsOpen&&e.postActivityPinPreviewNote}),()=>{this.togglePostActivity("notes")})}),n()(this,"toggleNotesPopover",()=>{this.setState(e=>{let t=!e.notesPopoverIsOpen;return t&&!e.notesOpenedFromReply&&this.logOpenNotesAnalyticsEvents(),{focusNotePopoverTextareaOnMount:!1,notesPopoverIsOpen:t,notesOpenedFromReply:!1,postActivityPinPreviewNote:!!t&&e.postActivityPinPreviewNote}})}),n()(this,"toggleSendAPostPopover",()=>{let{dashboardContext:{tabId:e}}=this.props;this.setState(e=>({sendAPostPopoverIsOpen:!e.sendAPostPopoverIsOpen})),this.props.adContext.sendClickADMBeacon(this.props.postContext.post.adm),this.props.logEvent({eventName:v.R.SendAPostClick,eventDetails:{placement_id:this.props.postContext.post.placementId,tab:e,type:"post",...(0,C._)({timelineObject:this.props.postContext.post,adPlacementConfiguration:this.props.adContext.adPlacementConfiguration,hydraConfigInstanceId:this.props.adContext.hydraConfigInstanceId})}})}),n()(this,"logOpenNotesAnalyticsEvents",()=>{let{adContext:{adPlacementConfiguration:e,hydraConfigInstanceId:t,sendClickADMBeacon:s},postContext:{post:i},dashboardContext:{tabId:n},logEvent:o}=this.props,{adm:a,earnedId:r,placementId:l}=i;s(a),o({eventName:v.R.Notes,eventDetails:{placement_id:l,earned_id:r,tab:n,...(0,C._)({timelineObject:i,adPlacementConfiguration:e,hydraConfigInstanceId:t})}})}),n()(this,"onPostActivityTransitionEnd",()=>{let{focusReplyOnMount:e,postActivityIsOpen:t}=this.state;!t&&(this.setState({postActivityTypeToOpen:null}),e&&this.setState({focusReplyOnMount:!1}))}),n()(this,"onModeChange",e=>{e!==tM.j.Replies&&this.setState({focusReplyOnMount:!1})}),n()(this,"onReplyIconClick",()=>{let{adContext:{adPlacementConfiguration:e,hydraConfigInstanceId:t},isNarrow:s,postContext:{post:i},dashboardContext:{tabId:n},logEvent:o}=this.props,{focusReplyOnMount:a,notesOpenedFromReply:r,notesPopoverIsOpen:l,postActivityIsOpen:d,postActivityTypeToOpen:c}=this.state,{placementId:h}=i;if(l||"notes"===c||o({eventName:v.R.ReplyIconClick,eventDetails:{placement_id:h,tab:n,...(0,C._)({timelineObject:i,adPlacementConfiguration:e,hydraConfigInstanceId:t})}}),d&&"notes"===c&&!r&&!a){this.setState({focusReplyOnMount:!0});return}this.setState({notesOpenedFromReply:!0}),s?this.toggleNotesPopover():(this.setState({focusReplyOnMount:!0}),this.toggleNotesPanel())}),n()(this,"onNotesPreviewNoteClick",()=>{this.setState({postActivityPinPreviewNote:!0}),this.toggleNotes()}),n()(this,"toggleNotes",()=>{let{isNarrow:e}=this.props;e?this.toggleNotesPopover():(this.setState({focusReplyOnMount:!1}),this.toggleNotesPanel())}),n()(this,"toggleIgniteProductPopover",()=>{this.setState(e=>({ignitePopoverIsOpen:!e.ignitePopoverIsOpen}))}),n()(this,"noteContent",()=>{let{notesPopoverIsOpen:e,postActivityIsOpen:t,postActivityTypeToOpen:s,focusNotePopoverTextareaOnMount:i,postActivityPinPreviewNote:n}=this.state,{appContext:{_c:o,isLoggedIn:a},timelineContext:{onReplyAdded:r},postContext:l,location:d,isInboxAsk:c,isSubmissionDraft:p,deviceContext:{isMobile:u}}=this.props,{post:{id:m,blog:g,reblogKey:b,noteCount:x,replyCount:v,reblogCount:f,likeCount:y,selfReplyCount:j=0,rebloggedFromId:C},presentationStyle:w}=l,{expandNotesOnMount:k}=w,{isDraft:N,isQueue:S,canDoReply:I,canDoReblog:P}=tH(l);if(!(e||t)&&!g.uuid||c||N&&void 0===C||S&&void 0===C||p)return null;let B=/*#__PURE__*/(0,h.jsx)(ex.G,{action:"note-count-button",className:t_.noteCountButtonInner,onClick:this.toggleNotes,wrapperClassName:t_.noteCountButton,...!a&&!k&&{"data-login-wall-type":"notes","data-login-wall-title":o("Login wall: Title shown when user clicks on a blog or image after exceeding click counter limit","Seems we're out of free samples."),"data-login-wall-text":o("Login wall: Text shown when user clicks on a blog or image after exceeding click counter limit","But there's good news. Get free samples from now until, well, the ends of time itself by signing up for Tumblr and getting unlimited access not just to this blog, but countless others like it."),"data-login-wall-tag-blog-name":g.name,"data-login-wall-post-id":m},children:t&&"notes"===s?/*#__PURE__*/(0,h.jsxs)("div",{className:t_.notesCloseButton,children:[/*#__PURE__*/(0,h.jsx)(_.A,{colors:{primary:A().paletteGray65}}),/*#__PURE__*/(0,h.jsx)("span",{children:o("Close the panel showing the notes for a post","Close notes")})]}):/*#__PURE__*/(0,h.jsx)("span",{className:t_.noteCountContainer,ref:this.noteCountRef,children:/*#__PURE__*/(0,h.jsx)("span",{"data-testid":"noteCountTotal",children:/*#__PURE__*/(0,h.jsx)(er.A,{containerRef:this.noteCountRef})})})}),T={focusNotePopoverTextareaOnMount:i,id:m,blog:g,reblogKey:b,canReply:I,canReblog:P,close:this.toggleNotesPopover,replyCount:v,reblogCount:f,likeCount:y,selfReplyCount:j,onReplyAdded:r},R=/*#__PURE__*/(0,h.jsx)(G,{...T,onClose:this.toggleNotesPopover,pinPreviewNote:n,popoverLayout:!0,totalNoteCount:x});return u?/*#__PURE__*/(0,h.jsxs)("div",{children:[B,e&&/*#__PURE__*/(0,h.jsx)(U.A,{onGlassClick:this.toggleNotesPopover,topOffset:tj.mobileHeaderHeight,children:R})]}):/*#__PURE__*/(0,h.jsx)(H.Ay,{closeForAllExternalClicks:!0,component:R,height:510,isOpen:e,outsideToggleRefs:[this.previewNoteRef,this.replyButtonRef],position:(0,ec.Bj)(d.pathname)?e4.$x.Right:e4.$x.Auto,showOverflowY:!0,toggle:this.toggleNotes,usePortals:!0,width:390,children:B})}),n()(this,"sendAPostContent",()=>{let{sendAPostPopoverIsOpen:e}=this.state,{appContext:{features:{blazeAdFormats:t},_t:s},postContext:{post:{blog:i,id:n,slug:o,shortUrl:a,embedUrl:r,placementId:l,earnedId:d,canSendInMessage:c,postUrl:p,community:u,isBlazed:m,blazeCampaign:g},presentationStyle:{hasCustomPostLink:b}},location:{pathname:x},deviceContext:{isMobile:v}}=this.props,f=u?p:(0,tD.M)(i.name,n,o),y=b?`${tE.Qc}${x}`:f,j=b?`${tE.Qc}${x}`:a,C=t&&m&&g?.campaignGoal==="engagement";return v?/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsx)(tB.A,{color:C?tW().colorBrandPurple:void 0,disabled:!c,onClick:this.toggleSendAPostPopover}),e&&/*#__PURE__*/(0,h.jsx)(U.A,{onGlassClick:this.toggleSendAPostPopover,topOffset:tj.mobileHeaderHeight,children:/*#__PURE__*/(0,h.jsx)(ed.A,{asText:b,blog:i,close:this.toggleSendAPostPopover,earnedId:d,embedUrl:r,id:n,isMobile:!0,placementId:l,postUrl:y,shortUrl:j,slug:o})})]}):/*#__PURE__*/(0,h.jsx)(H.Ay,{component:/*#__PURE__*/(0,h.jsx)(ed.A,{asText:b,blog:i,earnedId:d,embedUrl:r,id:n,placementId:l,postUrl:y,shortUrl:j,slug:o}),height:"auto",isOpen:e,position:e4.$x.AutoStart,showOverflowY:!0,targetStyles:{verticalAlign:"middle"},toggle:this.toggleSendAPostPopover,usePortals:!0,width:340,children:/*#__PURE__*/(0,h.jsx)(e6.A,{content:s("Share"),position:e4.$x.Top,children:/*#__PURE__*/(0,h.jsx)(tB.A,{color:C?tW().colorBrandPurple:void 0,disabled:!c,height:C?21:void 0,onClick:this.toggleSendAPostPopover,width:C?21:void 0})})})}),n()(this,"togglePostActivity",e=>{let t=tL.A()?.scrollY;this.setState(t=>({postActivityIsOpen:t.postActivityTypeToOpen!==e||!t.postActivityIsOpen,postActivityTypeToOpen:e}),()=>{tL.A()?.scrollTo({top:t})})});let{postContext:{post:{noteCount:t,community:s},presentationStyle:{expandNotesOnMount:i}}}=this.props,o=!!((t||s)&&i);this.state={focusNotePopoverTextareaOnMount:!1,focusReplyOnMount:!1,ignitePopoverIsOpen:!1,likeChanged:!1,notesOpenedFromReply:!1,notesPopoverIsOpen:!1,postActivityIsOpen:o,postActivityPinPreviewNote:!1,postActivityTypeToOpen:o?"notes":null,replyText:"",sendAPostPopoverIsOpen:!1,showDeleteDialog:!1},o&&this.logOpenNotesAnalyticsEvents()}render(){let{appContext:{_t:e,features:{tumblrIgnite:t}},timelineContext:{onRemoveTimelineObject:s},postContext:{presentationStyle:{showsDeleteButton:i},presentationStyle:n,post:{id:o,canDelete:r,previewNote:l},isNarrow:d}}=this.props,{postActivityIsOpen:c,ignitePopoverIsOpen:p}=this.state;"production"===tR.A.Development&&r&&i&&!s&&console.warn(`The post ${o} can be deleted but has no onRemoveTimelineObject handler. This can cause the UI to get out of date with the delete state of the post.`);let u=n===tO.A.radar||n===tO.A.radarWithTimestamp;return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsxs)("footer",{"aria-label":e("Post Footer"),className:t_.footer,role:"contentinfo",children:[this.getTopRow(),this.getBottomRow(),!u&&l&&!c&&/*#__PURE__*/(0,h.jsx)("div",{className:t_.notesPreviewContainer,children:/*#__PURE__*/(0,h.jsx)(ea,{note:l,noteRef:this.previewNoteRef,onClickNote:this.onNotesPreviewNoteClick})}),!d&&/*#__PURE__*/(0,h.jsx)("div",{className:a()(t_.postActivityWrapper,{[t_.postActivityWrapperOpen]:c}),onTransitionEnd:this.onPostActivityTransitionEnd,children:c&&this.postActivityContent()})]}),t&&/*#__PURE__*/(0,h.jsx)(V.Ay,{productPopoverIsOpen:p,toggleProductPopover:this.toggleIgniteProductPopover})]})}}n()(tG,"defaultProps",{isNarrow:!1});let t$=(0,tU.A)(e=>{let t=(0,R.Us)(),s=(0,f.W)(),i=(0,e3.Vd)(),n=(0,I.Ri)(),o=(0,tz.K)(),a=(0,j.Zm)(),r=(0,ep._X)(),l=(0,eI.Y)(),d=(0,y.Ul)();return/*#__PURE__*/(0,h.jsx)(tG,{adContext:s,appContext:t,dashboardContext:i,deviceContext:n,logEvent:d.logEvent,loginContext:o,postContext:a,timelineContext:r,toastContext:l,...e})});var tq=s(46466),tQ=s(10495),tK=s(13275),tY=s(7463);let tX={flagged:"kZfp1",communityLabelFlag:"H2hul",available:"gPEd0",inReview:"zwjUv",hasError:"WfICw",appealButton:"zQ8dN",bannerPillButton:"TBfTV",pill:"EkBU0",bannerActions:"dJtjN",dismissBannerButton:"ACc3i",dismiss:"Nvxc5",modalBody:"Z8aXP",communityLabelModalContent:"BF3AU",appealComment:"U9tmV",communityLabelModalActions:"X5e5s",primary:"F7dEp",outline:"UHvHp",appealButtons:"YYlrz",modal:"lQ0w7",bannerText:"MQO0V"};class tJ extends d.Component{constructor(...e){super(...e),n()(this,"state",{appealState:this.props.initialAppealState??"unavailable",openGlass:!1,hasError:!1,needsAppealComment:!1,appealComment:"",bannerDismissed:!1}),n()(this,"logEvent",e=>{let{logEvent:t}=this.props,{blogName:s,postId:i}=this.props;t({eventName:e,eventDetails:{blog_name:s,post_id:i}})}),n()(this,"toggleGlass",()=>{this.setState(e=>({openGlass:!e.openGlass}))}),n()(this,"onClickDismissGlass",()=>{this.toggleGlass(),this.setState({hasError:!1,needsAppealComment:!1,appealComment:""}),this.logEvent(v.R.CommunityLabelCancelReviewButtonClicked)}),n()(this,"onClickSubmitAppeal",()=>{this.submitAppeal("request_review"),this.logEvent(v.R.CommunityLabelRequestReviewButtonClicked)}),n()(this,"onClickDismissBanner",()=>{this.setState({bannerDismissed:!0}),this.logEvent(v.R.CommunityLabelDismissButtonClicked)}),n()(this,"onClickLearnMore",()=>{this.logEvent(v.R.CommunityLabelLearnMoreButtonClicked)}),n()(this,"onClickInfoButton",()=>{this.logEvent(v.R.CommunityLabelInfoButtonClicked)}),n()(this,"onChangeAppealComment",e=>{this.setState({appealComment:e.target.value})}),n()(this,"onClickOpenAppealModal",()=>{this.toggleGlass()}),n()(this,"submitAppeal",async e=>{let{blogName:t,postId:s,appContext:{apiFetch:i}}=this.props,{appealComment:n}=this.state;try{await i(`/v2/blog/${t}/posts/${s}/community-label/appeal`,{method:"POST",body:{community_label_appeal_action:e,..."request_review"===e&&{community_label_appeal_comment:n}}}),"request_review"===e&&this.setState({appealState:"in_review",openGlass:!1})}catch(e){this.setState({hasError:!0})}})}render(){let{openGlass:e,appealState:t,appealComment:s}=this.state,{_t:i,wwwBaseUrl:n}=this.props.appContext,o=/*#__PURE__*/(0,h.jsx)(tK.A,{onClose:this.onClickDismissGlass,theme:tK.v.Rounded,title:i("Request content label review"),children:/*#__PURE__*/(0,h.jsxs)("div",{className:tX.communityLabelModalContent,children:[/*#__PURE__*/(0,h.jsx)("p",{children:/*#__PURE__*/(0,h.jsx)(e2.Ay,{components:{link:/*#__PURE__*/(0,h.jsx)("a",{href:`${n}/policy/user-guidelines`,rel:"noopener noreferrer",target:"_blank",title:i("User Guidelines")})},children:`We have determined that your post contains content that would be better suited with a Content Label. While it does not violate our [link]User Guidelines[/link], a Content Label has been added to your post so that it is only presented to those who wish to view that material. 

If you think this was done in error, you can Request Review to let us know. Please include a short explanation with your request:`})}),/*#__PURE__*/(0,h.jsx)("textarea",{className:tX.appealComment,onChange:this.onChangeAppealComment,placeholder:i("Add a comment..."),value:s}),/*#__PURE__*/(0,h.jsxs)("div",{className:tX.communityLabelModalActions,children:[/*#__PURE__*/(0,h.jsx)("div",{className:tX.communityLabelModalLink,children:/*#__PURE__*/(0,h.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5436241401239",onClick:this.onClickLearnMore,rel:"noopener noreferrer",target:"_blank",title:"Learn more",children:i("Learn More")})}),/*#__PURE__*/(0,h.jsxs)("div",{className:tX.appealButtons,children:[/*#__PURE__*/(0,h.jsx)(x.A,{"aria-label":i("Dismiss the post review request form"),onClick:this.onClickDismissGlass,children:/*#__PURE__*/(0,h.jsx)(tY.A,{className:a()(tX.pill,tX.outline,tX.large),children:i("Dismiss")})}),/*#__PURE__*/(0,h.jsx)(x.A,{"aria-label":i("Submit a post review request"),disabled:""===this.state.appealComment,onClick:this.onClickSubmitAppeal,children:/*#__PURE__*/(0,h.jsx)(tY.A,{className:a()(tX.pill,tX.primary,tX.large),children:i("Request Review")})})]})]})]})}),r=/*#__PURE__*/(0,h.jsx)("a",{href:"https://help.tumblr.com/hc/articles/5436241401239",onClick:this.onClickInfoButton,rel:"noopener noreferrer",target:"_blank",title:"Learn more",children:/*#__PURE__*/(0,h.jsx)(tQ.A,{colors:{primary:A().paletteWhite},size:{width:22,height:22}})}),l=/*#__PURE__*/(0,h.jsx)(x.A,{"aria-label":i("Dismiss appeal banner"),onClick:this.onClickDismissBanner,children:/*#__PURE__*/(0,h.jsx)(tq.A,{className:tX.dismiss})});return this.state.bannerDismissed?null:this.state.hasError?/*#__PURE__*/(0,h.jsxs)("div",{className:a()(tX.flagged,tX.communityLabelFlag,tX.hasError),children:[/*#__PURE__*/(0,h.jsx)("span",{className:tX.bannerText,children:i("There was an error submitting your request.")}),/*#__PURE__*/(0,h.jsx)("span",{className:tX.bannerActions,children:l})]}):"in_review"===t?/*#__PURE__*/(0,h.jsxs)("div",{className:a()(tX.flagged,tX.communityLabelFlag,tX.inReview),children:[/*#__PURE__*/(0,h.jsx)("span",{className:tX.bannerText,children:i("Your post is in Content Label review.")}),/*#__PURE__*/(0,h.jsx)("span",{className:tX.bannerActions,children:r})]}):"available"===t?/*#__PURE__*/(0,h.jsxs)("div",{className:a()(tX.flagged,tX.communityLabelFlag),children:[/*#__PURE__*/(0,h.jsx)("span",{className:tX.bannerText,children:i("We reviewed your post and determined it needed a Content Label.")}),/*#__PURE__*/(0,h.jsxs)("span",{className:tX.bannerActions,children:[/*#__PURE__*/(0,h.jsx)(x.A,{"aria-label":i("Request second review of this post"),onClick:this.onClickOpenAppealModal,children:/*#__PURE__*/(0,h.jsx)(tY.A,{className:tX.bannerPillButton,children:i("Request Second Review")})}),l,e&&o]})]}):"label_required"===t?/*#__PURE__*/(0,h.jsx)("div",{className:a()(tX.flagged,tX.communityLabelFlag),children:/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[/*#__PURE__*/(0,h.jsx)("span",{className:tX.bannerText,children:i("Based on our User Guidelines, this post requires a Content Label.")}),/*#__PURE__*/(0,h.jsxs)("span",{className:tX.bannerActions,children:[/*#__PURE__*/(0,h.jsx)(x.A,{"aria-label":i("Dismiss appeal banner"),onClick:this.onClickDismissBanner,children:/*#__PURE__*/(0,h.jsx)(tY.A,{className:tX.bannerPillButton,children:i("Dismiss")})}),r]})]})}):null}}let tZ=e=>/*#__PURE__*/(0,h.jsx)(tJ,{...e,appContext:(0,R.Us)(),logEvent:(0,y.Ul)().logEvent}),t0={flagged:"gQmlg",inReview:"wB6qM",approved:"_qMFx",appealButton:"SEj9V",appealInfo:"D7qy6"};class t1 extends d.Component{constructor(...e){super(...e),n()(this,"state",{openGlass:!1,inReview:!1,hasError:!1,needsAppealComment:!1,appealComment:""}),n()(this,"logEvent",e=>{let{logEvent:t}=this.props,{blogName:s,postId:i}=this.props;t({eventName:e,eventDetails:{blog_name:s,post_id:i}})}),n()(this,"submitAppeal",()=>{let{blogName:e,postId:t,appContext:{apiFetch:s}}=this.props,{appealComment:i}=this.state;return s(`/v2/blog/${e}/posts/${t}/appeal`,{method:"POST",body:{owner_appeal_nsfw:"request_review",appeal_comment:i}}).then(()=>{this.setState({inReview:!0,openGlass:!1})}).catch(()=>{this.setState({hasError:!0})})}),n()(this,"toggleGlass",()=>{this.setState(e=>({openGlass:!e.openGlass}))}),n()(this,"onClickNext",()=>{this.setState({needsAppealComment:!0}),this.logEvent(v.R.AdultContentAppealNext)}),n()(this,"onClickSubmit",()=>{switch(this.submitAppeal(),this.props.classification){case es.BV.Explicit:this.logEvent(v.R.AdultContentAppealSubmitExplicit);break;case es.BV.Sensitive:this.logEvent(v.R.AdultContentAppealSubmitSensitive)}}),n()(this,"onClickDismiss",()=>{this.toggleGlass(),this.setState({hasError:!1,needsAppealComment:!1,appealComment:""}),this.logEvent(v.R.AdultContentAppealCancel)}),n()(this,"onClickAppealPost",()=>{switch(this.toggleGlass(),this.props.classification){case es.BV.Explicit:this.logEvent(v.R.AdultContentAppealOpenExplicit);break;case es.BV.Sensitive:this.logEvent(v.R.AdultContentAppealOpenSensitive)}}),n()(this,"onChangeAppealComment",e=>{this.setState({appealComment:e.target.value})})}render(){let{flaggedType:e,isReblog:t,isNsfw:s,showApprovedAppeals:i}=this.props,{openGlass:n,inReview:o,hasError:r,needsAppealComment:l,appealComment:d}=this.state,{_t:c,wwwBaseUrl:p}=this.props.appContext;if("none"===e)return null;if(!s&&i&&"complete"===e)return/*#__PURE__*/(0,h.jsx)("div",{className:a()(t0.flagged,t0.approved),children:c("Your appeal was accepted! This post is no longer hidden.")});if(!s)return null;let u={onGlassClick:this.toggleGlass,glassIsClickable:!1},m={text:c("Next"),onClick:this.onClickNext,buttonStyle:eD.s.Confirm},g={text:c("Submit Appeal"),onClick:this.onClickSubmit,buttonStyle:eD.s.Confirm},b={text:c("Dismiss"),onClick:this.onClickDismiss,buttonStyle:eD.s.Confirm},v={...b,buttonStyle:eD.s.Neutral},f={text:c("Learn More"),link:`${p}/docs/adultcontentfaq`,buttonStyle:eD.s.Neutral},y={text:c("Learn More"),link:`${p}/docs/contentappeals`,buttonStyle:eD.s.Neutral},j=/*#__PURE__*/(0,h.jsx)(U.A,{...u,children:/*#__PURE__*/(0,h.jsx)(eD.m,{body:c("This post was flagged because somewhere in your reblog there might be sexually explicit content which is a violation of our User Guidelines."),buttons:[f,b]})}),C=/*#__PURE__*/(0,h.jsx)(U.A,{...u,children:/*#__PURE__*/(0,h.jsx)(eD.m,{body:c("Your post is in content appeal. Once a decision has been made, we'll send you an email."),buttons:[y,b]})}),w=/*#__PURE__*/(0,h.jsx)(U.A,{...u,children:/*#__PURE__*/(0,h.jsx)(eD.m,{body:c("Unable to appeal the post. Please contact support for further help."),buttons:[f,b]})}),k=/*#__PURE__*/(0,h.jsx)(U.A,{...u,children:/*#__PURE__*/(0,h.jsx)(eD.m,{body:c("This post was flagged because we think it contains sexually explicit content which violates our User Guidelines. It has been hidden from others, but not deleted. If you think this was done in error, tap Appeal and a real, live human will review it."),buttons:[m,f,v]})}),N=/*#__PURE__*/(0,h.jsx)(U.A,{...u,children:/*#__PURE__*/(0,h.jsx)(eD.m,{body:c('Use the space below to give us more context regarding your appeal and why you think the post was misclassified.<br/><br/>Sexually explicit content is imagery that depicts realistic human genitals or sex acts. For more information and related exceptions, read our <a target="_blank" rel="noopener" href="//help.tumblr.com/hc/articles/231885248-Appealing-content-flagged-as-explicit">Sexually Explicit Content Policy</a>.'),buttons:[g,v],isBodyHtml:!0,title:c("Want to tell us more?"),children:/*#__PURE__*/(0,h.jsx)("textarea",{className:t0.appealInfo,onChange:this.onChangeAppealComment,placeholder:c(`Write your appeal here. For example you can write:

"This post shows my top surgery recovery"
"This post shows other, non-sexual LGBTQ+ content" (please specify)
"This is a non-sexual nude drawing I created"
"My post is about breastfeeding"
"This post doesn't contain any nudity"`),value:d})})}),S=/*#__PURE__*/(0,h.jsx)(U.A,{...u,children:/*#__PURE__*/(0,h.jsx)(eD.m,{body:c("This post was flagged because it contains sexually explicit content which violates our User Guidelines. It has not been deleted but is now only viewable to you. This decision cannot be appealed."),buttons:[f,b]})}),I=/*#__PURE__*/(0,h.jsx)(x.A,{label:c("What does this mean?"),onClick:this.toggleGlass,children:/*#__PURE__*/(0,h.jsx)(tQ.A,{colors:{primary:A().paletteWhite},size:{width:22,height:22}})});return"in_review"===e||o?/*#__PURE__*/(0,h.jsxs)("div",{className:a()(t0.flagged,t0.inReview),children:[c(t?"This reblog is in content appeal":"Your post is in content appeal"),I,n&&C]}):t?/*#__PURE__*/(0,h.jsxs)("div",{className:t0.flagged,children:[c("This post was flagged because somewhere in your reblog there might be sexually explicit content."),I,n&&j]}):"unavailable"===e?/*#__PURE__*/(0,h.jsxs)("div",{className:t0.flagged,children:[c("It looks like your post might be in violation of our User Guidelines and is now hidden."),I,n&&S]}):"complete"===e?/*#__PURE__*/(0,h.jsxs)("div",{className:t0.flagged,children:[c("Based on our User Guidelines this post contains sexually explicit content and is now only viewable to you."),I,n&&S]}):/*#__PURE__*/(0,h.jsxs)("div",{className:t0.flagged,children:[c("It looks like your post might be in violation of our User Guidelines and is now hidden."),/*#__PURE__*/(0,h.jsx)("button",{"aria-label":c("Appeal this post"),className:t0.appealButton,onClick:this.onClickAppealPost,children:c("Appeal")}),n&&/*#__PURE__*/(0,h.jsx)(h.Fragment,{children:r?w:l?N:k})]})}}let t6=e=>/*#__PURE__*/(0,h.jsx)(t1,{...e,appContext:(0,R.Us)(),logEvent:(0,y.Ul)().logEvent});var t2=s(76776),t4=s(75185),t5=s(64934),t9=s(84236),t3=s(22696),t8=s(74495),t7=s(50902),se=s(63140),st=s(58217),ss=s(10694),si=s(76146),sn=s(15899);let so=e=>{let{layout:t,content:s}=e,i=t?.find(({type:e})=>e===es.p5.Ask);return i?.blocks?.length<s?.length};var sa=s(60298),sr=s(44724),sl=s(69998),sd=s(2960);let sc={blazeSalesBlock:"yqPiy",innerContainer:"sz5_C",leftContainer:"kMRQn",blazeLinkContainer:"KsoXf",blazeLinkIcon:"f00jg",blazeUrl:"mbqn3"},sh=function({ctaText:e,ctaType:t,ctaClickUrl:s,placementId:i}){let{logEvent:n}=(0,y.Ul)(),{features:{blazeAdFormats:o}}=(0,R.Us)();if(!o)return null;let a=()=>{n({eventName:v.R.BlazeCtaSalesClicked,eventDetails:{placement_id:i,cta_type:t}})};return/*#__PURE__*/(0,h.jsx)("div",{className:sc.blazeSalesBlock,children:/*#__PURE__*/(0,h.jsxs)("div",{className:sc.innerContainer,children:[/*#__PURE__*/(0,h.jsx)("div",{className:sc.leftContainer,children:/*#__PURE__*/(0,h.jsxs)("a",{className:sc.blazeLinkContainer,href:s,onClick:a,rel:"nofollow noreferrer noopener",target:"_blank",children:[/*#__PURE__*/(0,h.jsx)("div",{className:sc.blazeLinkIcon,children:/*#__PURE__*/(0,h.jsx)(sd.A,{colors:{primary:A().paletteGray60},size:{width:12,height:12}})}),/*#__PURE__*/(0,h.jsx)("div",{className:sc.blazeUrl,children:s})]})}),/*#__PURE__*/(0,h.jsx)("div",{children:/*#__PURE__*/(0,h.jsx)("a",{href:s,onClick:a,rel:"nofollow noreferrer noopener",target:"_blank",children:/*#__PURE__*/(0,h.jsx)(sl.jn,{context:"chrome",size:"medium",children:e})})})]})})};var sp=s(90804),su=s(47872);function sm(e={}){let t=(0,su.U)(e);return/* @__PURE__ */(0,h.jsx)(sp.pR,{value:t,children:e.children})}var sg=s(35310),sb=s(10246);let sx={bubble:"FVrvv",bubbleInner:"sMoH1",active:"YPrty",isIconOnly:"b8p7x"},sv=/*#__PURE__*/(0,d.forwardRef)(({active:e,children:t,className:s,isIconOnly:i,...n},o)=>/*#__PURE__*/(0,h.jsx)("button",{className:a()(sx.bubble,{[sx.active]:e}),ref:o,...n,children:/*#__PURE__*/(0,h.jsx)("span",{className:a()(sx.bubbleInner,s,{[sx.isIconOnly]:i}),tabIndex:-1,children:t})}));var sf=s(73421),sy=s(52017);let sj=(0,m.Kk)("reaction",{size:{width:24,height:24}});var sC=s(93479);let sw=e=>/*#__PURE__*/(0,d.lazy)(async()=>{let t=e.split("_")[0],[{Selector:i},n]=await Promise.all([s.e(811).then(s.bind(s,23626)),await s(57932)(`./${t}.json`).catch(()=>void 0)]);return{default:e=>/*#__PURE__*/(0,h.jsx)(i,{emojiMartLangData:n,...e})}}),sA=e=>{let{popoverDisclosure:t}=e,{_getLanguage:s}=(0,R.Us)(),{code:i}=s(),[n,o]=(0,d.useState)(()=>sw(i));return(0,d.useEffect)(()=>{o(sw(i))},[i]),/*#__PURE__*/(0,h.jsx)(sC.A,{fallback:t||/*#__PURE__*/(0,h.jsx)(sj,{}),children:/*#__PURE__*/(0,h.jsx)(n,{...e})})};var sk=s(71310),sN=s(49315),sS=s(8254),sI=s(75170),sP=s(18511),sB=s(3016),sT=s(90789),sR=s(18026),sE=s(704),sM=s(32880),sz=s(373);function sL(e){return[...sB.T,"reactions",e]}let sD=(e,t=[])=>(0,sN.I)({queryFn:()=>t,queryKey:sL(e),initialData:t,staleTime:1/0,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1}),sO=sz.z.object({timeline:sz.z.object({elements:sz.z.array(sz.z.object({objectType:sz.z.literal(sR.v.Celebration),id:sz.z.string(),serveId:sz.z.string(),celebrationType:sz.z.literal("first_reaction"),title:sz.z.string(),body:sz.z.string(),button:sz.z.object({label:sz.z.string(),links:sz.z.object({tap:sz.z.object({type:sz.z.literal("dismiss")})})}),image:sz.z.object({url:sz.z.string().url(),type:sz.z.literal("image/png"),width:sz.z.number(),height:sz.z.number()})}))})}),sF=(0,sT.h)(sz.z.union([sz.z.tuple([]),sO])),sW=(e,t,s)=>{let i=e.findIndex(t);return -1===i?null:(0,sP.jM)(e,e=>{let t=e[i];if("increment"===s){if(t.reacted)return;t.count+=1,t.reacted=!0}else t.count-=1,t.reacted=!1}).filter(e=>e.count>0)},sU=(e,t)=>{switch(t.type){case"add":{let s=sW(e,e=>e.emoji.grapheme===t.payload.grapheme,"increment");if(null!==s)return s;let{grapheme:i,shortcodes:n}=t.payload,[o,...a]=n.split(":").filter(Boolean);return[...e,{emoji:{id:i,grapheme:i,baseGrapheme:i,baseSlug:o,variants:a},count:1,preview:[],reacted:!0}]}case"increment":case"decrement":return sW(e,e=>e.emoji.grapheme===t.payload.emoji.grapheme,t.type)||e}},s_=e=>400===e.status&&e.detailedErrors?.some(e=>e.code===sE.A.TooManyReactions||e.code===sE.A.TooManyUserReactions),sV=(e,t)=>{let{_c:s,apiFetchWithSchema:i}=(0,R.Us)(),{toggleToast:n}=(0,eI.Y)(),o=(0,sS.jE)(),a=(0,ep._X)(),r=(0,j.rr)();return(0,sI.n)({mutationFn:async s=>{let n=n=>i(`/v2/communities/${e}/posts/${t}/reactions`,sF,{method:"PUT",body:{grapheme:n,...!!s.context?.timeline_user_action&&{timeline_user_action:!0}}});switch(s.type){case"add":return await n(s.payload.grapheme);case"increment":return await n(s.payload.emoji.baseGrapheme);case"decrement":return await i(`/v2/communities/${e}/posts/${t}/reactions/${s.payload.emoji.id}`,sF,{method:"DELETE"});default:return(0,sM.M)(s)}},onMutate:e=>{let s=o.getQueryData(sL(t))||[];o.cancelQueries({queryKey:sL(t)});let i=sU(s,e);return o.setQueryData(sL(t),i),s},onError:(e,i,a)=>{n(s_(e)?s("Error message when limit of reactions for a post is reached","Whoa! No more reactions can be added to this post."):s("Generic error message for adding or removing reaction","Something went wrong while trying to update your reaction. Please try again."),"error"),o.setQueryData(sL(t),a)},onSuccess:({response:e})=>{if(!Array.isArray(e)&&e.timeline){let t=e.timeline.elements;r?.post&&a.onInjectTimelineObjects({elementsToInject:t,insertionOptions:{insertionPointIdentifiers:(0,ep.iN)(r.post),insertionType:"append"}})}}})},sH=({communityId:e,...t})=>{let{post:{id:s,placementId:i}}=(0,j.gY)(),{mutate:n}=sV(e,s),{logEvent:o}=(0,y.Ul)(),{pathname:a}=(0,eN.zy)(),r=!(0,sk.oO)(a);return/*#__PURE__*/(0,h.jsx)(sA,{...t,onSelect:({grapheme:e,shortcodes:t})=>{n({type:"add",payload:{grapheme:e,shortcodes:t},...r&&{context:{timeline_user_action:!0}}}),o({eventName:v.R.CommunitiesAddReaction,eventDetails:{grapheme:e,placement_id:i,trackable_type:"Post"}})}})};var sG=s(38004),s$=/* @__PURE__ */(e=>(e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e))(s$||{}),sq=/* @__PURE__ */(e=>(e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e))(sq||{});let sQ=()=>"object"==typeof window?window?.PointerEvent??null:null,sK=()=>"object"==typeof window?window?.TouchEvent??null:null;function sY(e){let{nativeEvent:t}=e,s=sK();return s&&t instanceof s||"touches"in e}function sX(e){let t=sQ();return e.nativeEvent instanceof MouseEvent&&!(t&&e.nativeEvent instanceof t)}function sJ(e){let{nativeEvent:t}=e;if(!t)return!1;let s=sQ();return s&&t instanceof s||"pointerId"in t}function sZ(e){return sX(e)||sY(e)||sJ(e)}function s0(e){return sY(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:sX(e)||sJ(e)?{x:e.pageX,y:e.pageY}:null}var s1=s(1695);let s6={reactionPair:"aslpL",emojis:"atSxv",stackedLabelFirst:"OTs2M",stackedLabel:"lMOLb",reactionDetailsWrapper:"EBUp3",emoji:"VFeFU",reactionVariant:"ytHZW"},s2=({count:e,slug:t,reactingBlogNames:s,reacted:i})=>{if(i&&0===s.length)return/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Reaction bubble details - you reacted with this emoji",components:{span:/*#__PURE__*/(0,h.jsx)("span",{className:s6.baseSlug})},params:{slug:t},children:"You reacted with [span][slug][/span]"});if(!i&&1===s.length)return/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Reaction bubble details - one user reacted (that is not you) with this emoji",components:{span:/*#__PURE__*/(0,h.jsx)("span",{className:s6.baseSlug}),strong:/*#__PURE__*/(0,h.jsx)("strong",{})},params:{blog:s[0],slug:t},children:"[strong][blog][/strong] reacted with [span][slug][/span]"});if(!i&&s.length>1){let i=/*#__PURE__*/(0,h.jsx)(s1.n,{elementList:s.map(e=>/*#__PURE__*/(0,h.jsx)("span",{children:e},e)),initialNumberOfElementsDisplayed:s.length,rollupCount:e});return/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Reaction bubble details - multiple users reacted (not including you) with the same emoji",components:{list:i,span:/*#__PURE__*/(0,h.jsx)("span",{className:s6.baseSlug}),strong:/*#__PURE__*/(0,h.jsx)("strong",{})},params:{slug:t},children:"[strong][list/][/strong] reacted with [span][slug][/span]"})}if(i&&s.length>=1){let i=/*#__PURE__*/(0,h.jsx)(s1.n,{elementList:[/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Reaction bubble details - item indicating the user themself in the list of blogs that reacted with the same emoji",children:"You"},0),...s.map((e,t)=>/*#__PURE__*/(0,h.jsx)("span",{children:e},t+1))],initialNumberOfElementsDisplayed:s.length+1,rollupCount:e});return/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"Reaction bubble details - multiple users (including you) reacted with the same emoji",components:{list:i,span:/*#__PURE__*/(0,h.jsx)("span",{className:s6.baseSlug}),strong:/*#__PURE__*/(0,h.jsx)("strong",{})},params:{slug:t},children:"[strong][list/][/strong] reacted with [span][slug][/span]"})}return/*#__PURE__*/(0,h.jsxs)(e2.P0,{comment:"Reaction bubble details - when no user details are provided fallback to count",components:{span:/*#__PURE__*/(0,h.jsx)("span",{className:s6.baseSlug}),strong:/*#__PURE__*/(0,h.jsx)("strong",{})},number:e,params:{slug:t,number:e},children:[/*#__PURE__*/(0,h.jsx)(e2.M$,{children:"[strong][number][/strong] [span][slug][/span] reaction"}),/*#__PURE__*/(0,h.jsx)(e2.$e,{children:"[strong][number][/strong] [span][slug][/span] reactions"})]})},s4=({enabled:e,children:t})=>{let{_c:s}=(0,R.Us)(),{communityPostReactionsTooltipShown:i}=(0,eP.H)(),{logEvent:n}=(0,y.Ul)();return/*#__PURE__*/(0,h.jsx)(eA.A,{content:s("[Tour Guide] Text that is shown as a tooltip to inform user how to react to posts","Express yourself with a reaction"),isOpen:e,onDismiss:i,onFirstShow:()=>{n({eventName:v.R.CommunityPostReactionsTooltip})},popoverProps:{usePortals:!1,skipClickToClose:!1},position:e4.$x.Bottom,children:t})},s5=(e,t=!1)=>{let s=e.reacted?"decrement":"increment";switch(s){case"increment":return{type:s,payload:{emoji:e.group[0].emoji},...t&&{context:{timeline_user_action:!0}}};case"decrement":{let t=e.group.find(e=>e.reacted)?.emoji;if(t)return{type:s,payload:{emoji:t}};return null}default:return(0,sM.M)(s)}},s9=({communityId:e,postIndex:t})=>{let{post:{id:s,reactions:i}}=(0,j.gY)(),{data:n}=sD(s,i),o=(0,d.useMemo)(()=>(function(e){let t=new Map;for(let s of e){let{emoji:e}=s,i=t.get(e.baseSlug);i?(i.group.push(s),i.count+=s.count,!i.reacted&&s.reacted&&(i.reacted=!0),t.set(e.baseSlug,i)):t.set(e.baseSlug,{baseSlug:e.baseSlug,group:[s],count:s.count,reacted:s.reacted})}return[...t.values()]})(n),[n]),{communityPostReactionsTooltipShown:a}=(0,eP.H)(),{shouldShowCommunityPostReactionsTooltip:r}=(0,eP.H)(),[l,c]=(0,d.useState)(!1);(0,d.useEffect)(()=>{void 0!==t&&r(t)&&c(!0)},[t,r]);let p=()=>{c(!1),a()};return/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[o.map(t=>/*#__PURE__*/(0,h.jsx)(s8,{communityId:e,onClick:()=>{l&&p()},reaction:t},t.baseSlug)),/*#__PURE__*/(0,h.jsx)(s4,{enabled:l,children:/*#__PURE__*/(0,h.jsx)(s3,{communityId:e,onClick:p})})]})},s3=({communityId:e,onClick:t})=>{let{_c:s}=(0,R.Us)(),i=(0,sG.X)("reactions");return/*#__PURE__*/(0,h.jsx)(sH,{communityId:e,popoverDisclosure:/*#__PURE__*/(0,h.jsx)(sv,{active:!1,"aria-label":s("Button label to add first reaction to a post","Add reaction"),isIconOnly:!0,onClick:t,...i,children:/*#__PURE__*/(0,h.jsx)(sy.KJO,{})})})},s8=({reaction:e,communityId:t,onClick:s})=>{let{_t:i}=(0,R.Us)(),{post:{id:n,placementId:o}}=(0,j.gY)(),{isSmartphone:a}=(0,I.Ri)(),{mutate:r}=sV(t,n),{logEvent:l}=(0,y.Ul)(),c=(0,sG.X)("reactions"),[p,u]=(0,d.useState)(!1),[m,g]=(0,d.useState)(!1),{pathname:b}=(0,eN.zy)(),x=function(e,{threshold:t=400,captureEvent:s=!1,detect:i=s$.Pointer,cancelOnMovement:n=!1,cancelOutsideElement:o=!0,filterEvents:a,onStart:r,onMove:l,onFinish:c,onCancel:h}={}){let p=(0,d.useRef)(!1),u=(0,d.useRef)(!1),m=(0,d.useRef)(),g=(0,d.useRef)(),b=(0,d.useRef)(e),x=(0,d.useRef)(null),v=(0,d.useCallback)(e=>i=>{u.current||sZ(i)&&(void 0===a||a(i))&&(s&&i.persist(),r?.(i,{context:e}),x.current=s0(i),u.current=!0,m.current=i.currentTarget,g.current=setTimeout(()=>{b.current&&(b.current(i,{context:e}),p.current=!0)},t))},[s,a,r,t]),f=(0,d.useCallback)(e=>(t,i)=>{sZ(t)&&u.current&&(x.current=null,s&&t.persist(),p.current?c?.(t,{context:e}):u.current&&h?.(t,{context:e,reason:i??sq.CancelledByRelease}),p.current=!1,u.current=!1,void 0!==g.current&&clearTimeout(g.current))},[s,c,h]),y=(0,d.useCallback)(e=>t=>{if(l?.(t,{context:e}),!1!==n&&x.current){let s=s0(t);if(s){let i=!0===n?25:n,o={x:Math.abs(s.x-x.current.x),y:Math.abs(s.y-x.current.y)};(o.x>i||o.y>i)&&f(e)(t,sq.CancelledByMovement)}}},[f,n,l]),j=(0,d.useCallback)(t=>{if(null===e)return{};switch(i){case s$.Mouse:{let e={onMouseDown:v(t),onMouseMove:y(t),onMouseUp:f(t)};return o&&(e.onMouseLeave=e=>{f(t)(e,sq.CancelledOutsideElement)}),e}case s$.Touch:return{onTouchStart:v(t),onTouchMove:y(t),onTouchEnd:f(t)};case s$.Pointer:{let e={onPointerDown:v(t),onPointerMove:y(t),onPointerUp:f(t)};return o&&(e.onPointerLeave=e=>f(t)(e,sq.CancelledOutsideElement)),e}}},[e,f,o,i,y,v]);return(0,d.useEffect)(()=>{if(window)return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),window.addEventListener("pointerup",e),()=>{window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),window.removeEventListener("pointerup",e)};function e(e){let t={target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:()=>{}};f()(t)}},[f]),(0,d.useEffect)(()=>()=>{void 0!==g.current&&clearTimeout(g.current)},[]),(0,d.useEffect)(()=>{b.current=e},[e]),j}((0,d.useCallback)(()=>{u(!0)},[]),{threshold:300,detect:s$.Touch,onMove:e=>{e.stopPropagation()},onFinish:()=>g(!0)}),f=/*#__PURE__*/(0,h.jsx)(sv,{active:e.reacted,...c,...a?x():{},onClick:()=>{s?.();let t=s5(e,!(0,sk.oO)(b));t&&(r(t),l({eventName:"increment"===t.type?v.R.CommunitiesAddReaction:v.R.CommunitiesRemoveReaction,eventDetails:{grapheme:"add"!==t.type&&t.payload.emoji.grapheme,placement_id:o,trackable_type:"Post"}}))},children:/*#__PURE__*/(0,h.jsxs)("div",{className:s6.reactionPair,children:[/*#__PURE__*/(0,h.jsx)("div",{className:s6.emojis,children:e.group.map(({emoji:e})=>/*#__PURE__*/(0,h.jsx)("span",{children:e.grapheme},e.id))}),/*#__PURE__*/(0,h.jsx)("span",{style:{minWidth:`${Math.max(1,Math.floor(Math.log10(e.count))+1)}ch`},children:e.count})]})},e.baseSlug);return a?/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[f,/*#__PURE__*/(0,h.jsx)(sf.f,{className:s6.reactionDetailsWrapper,dismissOptions:{withDismiss:!0,text:i("Done")},onClose:()=>{m&&(u(!1),g(!1))},open:p,children:/*#__PURE__*/(0,h.jsx)(s7,{communityId:t,reaction:e})})]}):/*#__PURE__*/(0,h.jsxs)(sm,{placement:"top-start",children:[/*#__PURE__*/(0,h.jsx)(sg._,{children:f}),/*#__PURE__*/(0,h.jsx)(sb.B,{className:s6.reactionDetailsWrapper,gutter:4,id:`hovercard-for-${n}-${e.baseSlug}`,children:/*#__PURE__*/(0,h.jsx)(s7,{communityId:t,reaction:e})})]})},s7=({reaction:e})=>/*#__PURE__*/(0,h.jsx)(h.Fragment,{children:e.group?.map(({emoji:e,count:t,reacted:s,preview:i})=>{let n=e.variants.length?`${e.baseSlug}-${e.variants.join("-")}`:e.baseSlug;return n=`:${n}:`,/*#__PURE__*/h.jsxs("div",{className:s6.reactionVariant,children:[/*#__PURE__*/h.jsx("span",{className:s6.emoji,children:e.grapheme}),/*#__PURE__*/h.jsx("span",{children:/*#__PURE__*/h.jsx(s2,{count:t,reacted:s,reactingBlogNames:i||[],slug:n})})]},n)})});var ie=s(26203),it=s(42414);let is={blackText:"df347"},ii=({count:e,formattedCount:t,showLabel:s})=>s?/*#__PURE__*/(0,h.jsxs)(e2.P0,{components:{noteCountWrapper:/*#__PURE__*/(0,h.jsx)("span",{className:is.blackText})},exemptNumberKeyFromParamCheck:!0,number:e,params:{fNumber:t},children:[/*#__PURE__*/(0,h.jsx)(e2.M$,{children:"[noteCountWrapper][fNumber][/noteCountWrapper] comment"}),/*#__PURE__*/(0,h.jsx)(e2.$e,{children:"[noteCountWrapper][fNumber][/noteCountWrapper] comments"})]}):/*#__PURE__*/(0,h.jsx)("span",{className:is.blackText,children:t}),io={container:"zXXyl",hasFacepile:"XaCEJ",hasTextLeaf:"zX2YS",count:"R8_EV",cta:"PJzbJ"},ia=({onClick:e})=>{let t=(0,d.useRef)(null),{_c:s,_cn:i}=(0,R.Us)(),{formattingMode:n}=(0,er.i)(t),{post:{facepile:o,selfReplyCount:r=0}}=(0,j.gY)(),l=n||"expanded-with-notes",{currentNoteCount:c,expandedNoteCount:p}=(0,it.TA)(r,l),u=(0,sG.X)("community-comment-button"),m=o?.map(e=>[e]),g=!!m?.length,b=(0,it.Mm)(l),x=null;return r?x=/*#__PURE__*/(0,h.jsx)(ii,{count:r,formattedCount:c,showLabel:b}):b&&(x=/*#__PURE__*/(0,h.jsx)("span",{className:io.cta,children:s("[Communities] CTA text to leave a first comment on a post","Comment")})),/*#__PURE__*/(0,h.jsxs)(sv,{active:!1,"aria-label":r?i("[Communities] CTA text to view comments on a post","View %2$s comment","View %2$s comments",r,[p]):s("[Communities] CTA text to leave a first comment on a post","Comment"),className:a()(io.container,{[io.hasFacepile]:g,[io.hasTextLeaf]:null!==x}),isIconOnly:!g&&!x,onClick:e,ref:t,...u,children:[g?/*#__PURE__*/(0,h.jsx)(ie.g,{avatars:m,context:"content"}):/*#__PURE__*/(0,h.jsx)(sy.__Y,{}),/*#__PURE__*/(0,h.jsx)("span",{className:io.count,children:x})]})};var ir=s(70036);let il=()=>{let[e,t]=(0,d.useState)(!1),{_c:s,_t:i}=(0,R.Us)(),{isMobile:n}=(0,I.Ri)(),{post:o}=(0,j.gY)(),a=()=>t(e=>!e),r=()=>t(!1),l=(0,d.useMemo)(()=>/*#__PURE__*/(0,h.jsx)(ir.default,{close:r,earnedId:o.earnedId,embedUrl:o.embedUrl,hideMessaging:!0,id:o.id,isMobile:n,placementId:o.placementId,postUrl:o.postUrl,shortUrl:o.shortUrl,slug:o.slug}),[n,o.earnedId,o.embedUrl,o.id,o.placementId,o.postUrl,o.shortUrl,o.slug]),c=(0,d.useMemo)(()=>n?/*#__PURE__*/(0,h.jsx)(U.A,{onGlassClick:r,topOffset:tj.mobileHeaderHeight,children:l}):/*#__PURE__*/(0,h.jsx)(h.Fragment,{children:l}),[n,l]);return/*#__PURE__*/(0,h.jsx)(H.Ay,{component:c,height:"auto",isFlipEnabled:!1,isOpen:e,position:e4.$x.Top,showOverflowY:!0,targetStyles:{verticalAlign:"middle"},toggle:a,usePortals:!0,width:340,children:/*#__PURE__*/(0,h.jsx)(e6.A,{content:o.canShare?i("Share"):s("[Communities] Tooltip text explaining why a post cannot be shared","Community is private"),popoverProps:{isFlipEnabled:!1},position:e4.$x.Bottom,children:/*#__PURE__*/(0,h.jsx)(sv,{active:!1,"aria-label":i("Share"),disabled:!o.canShare,isIconOnly:!0,onClick:a,children:/*#__PURE__*/(0,h.jsx)(sy.npr,{})})})})},id={controls:"wFg7L"},ic=({postIndex:e})=>{let{onReplyAdded:t}=(0,ep._X)(),s=(0,j.gY)(),{post:{blog:i,community:n,id:o,likeCount:a,reblogCount:r,rebloggedRootName:l,reblogKey:c,replyCount:p,selfReplyCount:u=0},presentationStyle:{expandNotesOnMount:m}}=s,[g,b]=(0,d.useState)(!!m),[x,v]=(0,d.useState)();if(!n?.name)return null;let{canDoReply:f,canDoReblog:y}=tH(s);return/*#__PURE__*/(0,h.jsxs)("footer",{children:[/*#__PURE__*/(0,h.jsxs)("div",{className:id.controls,children:[/*#__PURE__*/(0,h.jsx)(ia,{onClick:()=>{v(tM.j.Replies),b(e=>!e)}}),/*#__PURE__*/(0,h.jsx)(s9,{communityId:n.name,postIndex:e}),/*#__PURE__*/(0,h.jsx)(il,{})]}),/*#__PURE__*/(0,h.jsx)("div",{children:g&&/*#__PURE__*/(0,h.jsx)(G,{blog:i,canReblog:y,canReply:f,communityId:n.name,defaultMode:x,expandNotesOnMount:m,id:o,isCommunity:!0,likeCount:a,onReplyAdded:t,reblogCount:r,reblogFrom:l,reblogKey:c,replyCount:p,selfReplyCount:u})})]})};var ih=s(69384),ip=s(29856),iu=s(38238);let im={filteredScreen:"W0ros",message:"uamX1",linkOut:"q05ND",viewPostLink:"NQQC8",viewPostLinkWrapper:"dgAgY"},ig=({expand:e,filteredTags:t,filteredContent:s})=>{let{_t:i}=(0,R.Us)(),n=t&&t.length?"#tagfiltering":"#contentfiltering",o=`/settings/account${n}`,a=t&&t.length?t.map(e=>`#${e}`).join(", "):s.join(", "),r=/*#__PURE__*/(0,h.jsx)("a",{className:im.linkOut,href:o,target:"_blank",children:a}),l=i(t&&t.length?"This post contains filtered tags.":"This post contains filtered content."),d=i("View post");return/*#__PURE__*/(0,h.jsxs)("div",{className:im.filteredScreen,children:[/*#__PURE__*/(0,h.jsx)("p",{className:im.message,children:l}),r,/*#__PURE__*/(0,h.jsx)(x.A,{className:im.viewPostLink,label:d,onClick:e,wrapperClassName:im.viewPostLinkWrapper,children:d})]})},ib={scheduledQueueDate:"SirwX",scheduledQueueDay:"jn3oa",scheduledIndicator:"b1E_e",post:"FtjPK",withoutBorderRadius:"KZYA4",withOutline:"r0etU",contentWrapper:"VDRZ4",submission:"hYZb4",contentSource:"d_FyU",isPaywallShown:"fX9yp",footerWrapper:"qYXF9",isRenderedInPeepr:"EBcaC",submissionWrapper:"nPaE8",submitter:"IyHrQ",hiddenNotice:"NwkDL"};var ix=s(77621);class iv extends d.Component{constructor(...e){super(...e),n()(this,"state",{hasExpandedFromFiltered:!1,showPost:!0}),n()(this,"isLongPost",void 0),n()(this,"setIsLongPost",e=>{this.isLongPost=e}),n()(this,"getPostContextValue",(0,t4.A)((e,t)=>({presentationStyle:t,post:{...e,canReply:e.canReply&&t.showsReplyButton,canSendInMessage:e.canSendInMessage&&t.showsShareButton},isNarrow:!!this.props.isNarrow,getIsLongPost:()=>this.isLongPost,setCommunityLabel:this.props.communityLabelState.setCommunityLabel}),{maxSize:1})),n()(this,"getSubmissionAttribution",()=>{let{timelineObject:{postAuthor:e,state:t,anonymousEmail:s,anonymousName:i}}=this.props;return e?/*#__PURE__*/(0,h.jsx)("div",{className:ib.submissionWrapper,children:/*#__PURE__*/(0,h.jsx)(r.A,{blogName:e,className:ib.submission,href:(0,K.A)(e),children:/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"This text denotes that a post on some blog was submitted to it by some other user",components:{span:/*#__PURE__*/(0,h.jsx)("span",{className:ib.submitter})},params:{postAuthor:e},children:"Submitted by [span][postAuthor][/span]"})})}):t===es.Wu.Submission&&s&&i?/*#__PURE__*/(0,h.jsx)("div",{className:ib.submission,children:/*#__PURE__*/(0,h.jsx)(e2.Ay,{components:{span:/*#__PURE__*/(0,h.jsx)("span",{className:ib.submitter})},params:{anonymousEmail:s,anonymousName:i},children:"Submitted by [span][anonymousName] ([anonymousEmail])[/span]"})}):/*#__PURE__*/(0,h.jsx)("div",{className:ib.submission,children:/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:"This text denotes that a post on some blog was submitted to it by some anonymous user",components:{span:/*#__PURE__*/(0,h.jsx)("span",{className:ib.submitter})},children:"Submitted by [span]anonymous[/span]"})})}),n()(this,"renderTags",(e,t)=>{let{timelineObject:{tags:s,tagsV2:i,paywallAccess:n,isPaywalled:o,recommendedColor:a}}=this.props;return/*#__PURE__*/(0,h.jsx)(ix.A,{collapsedHeight:e?tj.wrappedTagsMobileHeight:tj.wrappedTagsDesktopHeight,isSupporting:n===t3.xb.Member&&o,postChromeStyles:t,recommendedColor:a,tags:s,tagsV2:i})}),n()(this,"appendIsBlurredImages",(e,t)=>e.map(e=>e.type===es._B.Image&&t?{...e,isBlurredImages:this.props.timelineObject.isBlurredImages}:e)),n()(this,"getInboxAttribution",e=>{let{timelineObject:t}=this.props,{postUrl:s,askingName:i="",askingUrl:n="",askingAvatar:o,postAuthor:a="",postAuthorAvatar:r,blog:l}=t,d=i,c=n,h=o,p=(0,es.ZK)(t);return p&&(d=a,h=r,c=(0,ss.A)(t.postAuthor)),{recipientName:e&&!l.primary?l.name:void 0,isSubmission:p,permalinkUrl:s,blog:{name:d,url:c,avatar:h,uuid:""}}}),n()(this,"getAttribution",(e,t)=>e?this.getInboxAttribution(t):(0,sr.A)(this.props.timelineObject)),n()(this,"expandFromFiltered",()=>this.setState({hasExpandedFromFiltered:!0})),n()(this,"hidePost",()=>this.setState({showPost:!1}))}render(){let{timelineObject:e,appContext:{autoTruncatingPosts:t,features:s,_t:i},dashboardContext:{tabId:n},modalOrPeeprShowingContext:{isPeeprShowing:o},isInInboxTimeline:r,isNarrow:d,logEvent:c,postIndex:u,communityLabelState:m,onAdReported:g,showReportAd:b}=this.props,{actions:x,blog:f,blogName:y,id:C,content:A,layout:k,date:S,filtered:P,isNsfw:B,ownerAppealNsfw:T,rebloggedFromAdvertiserName:R,rebloggedFromCanBeFollowed:E,rebloggedFromFollowing:M,rebloggedFromId:z,rebloggedFromName:L,trail:D,type:O,canEdit:F,isSubmission:W,askingName:U,sponsoredBadgeUrl:_,sourceUrl:V,sourceTitle:H,sourceUrlRaw:G,state:$,placementId:q,adm:Q,isPaywalled:K,paywallAccess:Y,earnedId:X,communityLabelAppealState:J,isBlazed:Z,blazerBlog:ee,community:et,blazeCampaign:ei}=e,{hasExpandedFromFiltered:en,showPost:eo}=this.state,ea=s.paywallConsumption&&K&&(Y===t3.xb.NonMember||Y===t3.xb.Disabled);if(O!==es.hW)return"production"===tR.A.Development&&console.warn(`Post with id "${C}" is not blocks type and cannot be rendered`),null;let er=this.props.presentationStyle,el=this.getAttribution(er.usesInboxAttribution,er.showsRecipientForInboxAttribution);el?.blog.advertiserName&&(er={...er,showsPosterAvatar:!1});let ed=!(void 0!==E)&&f.canBeFollowed,ec=(0,sa.i)(x),eh=!!U,ep=eh&&$===es.Wu.Submission,eu=this.props.timelineObject.isAnonymous&&W&&r||this.props.timelineObject.isAnonymous&&ep,em=F?{...e,sourceUrl:G}:void 0,eg=m.headerProps,eb=!!Z&&!!_,ex=!(eb&&ee?ee:el.blog).url,ev=i("Pinned Post"),ef=e.recommendationReason;ef?.text===ev&&(ef=null),e.isPinned&&er.showsPinnedStatus&&(ef={text:ev,icon:t8.t.Pin,color:w.paletteAccent,loggingReason:"",links:{}});let ey=/*#__PURE__*/(0,h.jsx)(t2.I,{afterHideAd:this.hidePost,blogHasNoAvatar:ex,community:et,communityLabelProps:eg,date:S,earnedId:X,editablePost:em,getAdInstance:this.props.getAdInstance,isBlazeCampaign:eb,isFollowingReblogger:M,isInboxAsk:ep,isPaywalled:K,onAdReported:g,placementId:q,postAttribution:el,postState:$,presentationStyle:er,reblogAttribution:z?{blogName:R||L||"",postId:z}:void 0,recommendationReason:ef,showAsAnonymous:eu,showReportAd:b,showsFollowButton:!er.usesInboxAttribution&&(E||ed),showsSponsored:!!_,showWhyAd:s.digitalServiceAct}),ej=/*#__PURE__*/(0,h.jsx)(t6,{blogName:y,classification:e.classification,flaggedType:T,isNsfw:B,isReblog:void 0!==z,postId:C,showApprovedAppeals:er.showsApprovedAppealBanner});if(P&&!en)return/*#__PURE__*/(0,h.jsx)(j._5.Provider,{value:this.getPostContextValue(e,er),children:/*#__PURE__*/(0,h.jsxs)("article",{className:a()(ib.post,{[ib.withoutBorderRadius]:er.withoutBorderRadius}),children:[ey,/*#__PURE__*/(0,h.jsx)(ig,{expand:this.expandFromFiltered,filteredContent:P.content,filteredTags:P.tags})]})});let eC=!!D.length&&!!A.length,ew=!D.find(e=>(0,es.h4)(e)&&e.blog.name===f.name&&e.blog.showFollowAction),eA={content:A,layout:k,blog:{...(()=>{let t=this.getPostContextValue(e,er);return t.post.community&&t.post.authorBlog||f})(),showFollowAction:ew},post:{id:C,timestamp:e?.timestamp},isContributedContent:!0},ek=eC?[...D,eA]:D,eN=!!ec?.text&&!!ec?.urls.web,eS=eN&&/*#__PURE__*/(0,h.jsx)(N,{backgroundColor:ec?.backgroundColor,clickUrl:ec?.urls.web,color:ec?.textColor,ctaText:ec.text,onClick:this.props.ctaOnClick,placementId:q}),eI=/*#__PURE__*/(0,h.jsx)(ip.X,{contentFooter:ek.length&&eS,parentEarnedId:X,parentPlacementId:q,trail:ek}),eP=this.appendIsBlurredImages(A,er.blursImagesFromUnfollowedBlogs),eB=!!A.length&&!D.length,eT=eB&&er.showsOnlyFirstMediaBlock&&(0,sn.E)(eP),eR=eB&&/*#__PURE__*/(0,h.jsx)(ih.Ay,{adm:Q,blocks:eT?[eT]:eP,isOriginalPost:!0,layouts:eT?void 0:k,placementId:q,postingBlog:f}),eE=!!W&&er.showsSubmissionAttribution&&this.getSubmissionAttribution(),eM=!!H&&!!V&&/*#__PURE__*/(0,h.jsx)("div",{className:a()(ib.contentSource,{[ib.isPaywallShown]:ea}),children:/*#__PURE__*/(0,h.jsx)(e2.Ay,{comment:'Content source. The placeholder is a link to the source of the post (like "website.com").',components:{link:/*#__PURE__*/(0,h.jsx)("a",{href:V,rel:"noopener noreferrer",target:"_blank"})},params:{sourceTitle:H},children:"Source: [link][sourceTitle][/link]"})}),ez=/*#__PURE__*/(0,h.jsx)(iu.LS,{...m.coverProps,children:this.props.children||/*#__PURE__*/(0,h.jsxs)(h.Fragment,{children:[eI,eR]})}),eL=!er.forceTruncate&&!this.props.timelineObject?.forceTruncate&&(!t||m.state===t5.kX||m.state===t5.ZM);ez=er.maximumContentHeight?/*#__PURE__*/(0,h.jsx)(l.A,{maxHeight:er.maximumContentHeight,maxHeightTolerance:er.maximumContentHeightBufferTolerance,onCrop:this.props.setIsPostTruncatedForImpressionEvent,onExpand:()=>c({eventName:v.R.ViewPost,eventDetails:{post_id:e.id,tab:n}}),preventTruncation:eL,setIsLongPost:d?null:this.setIsLongPost,children:ez}):er.autoLimitContentHeight?/*#__PURE__*/(0,h.jsx)(p,{onCrop:this.props.setIsPostTruncatedForImpressionEvent,onExpand:()=>c({eventName:v.R.ViewPost,eventDetails:{post_id:e.id,tab:n}}),preventTruncation:eL,setIsLongPost:d?null:this.setIsLongPost,children:ez}):/*#__PURE__*/(0,h.jsx)("div",{className:ib.contentWrapper,children:ez});let eD=this.props.paletteContext.name,eO=ea&&f.theme?(0,si.A)(f):{},eF=ea&&f.theme?(0,si.n)(f,eD):{};return eo?/*#__PURE__*/(0,h.jsx)(I.Ay,{children:({isMobile:t})=>/*#__PURE__*/(0,h.jsx)(j._5.Provider,{value:this.getPostContextValue(e,er),children:/*#__PURE__*/(0,h.jsxs)("article",{className:a()(ib.post,{[ib.withOutline]:er.hasOutline,[ib.withoutBorderRadius]:er.withoutBorderRadius}),children:[$===es.Wu.Queued&&this.renderQueueSchedule(t),ey,ej,/*#__PURE__*/(0,h.jsx)(tZ,{blogName:y,initialAppealState:J,postId:C}),ez,eM,eE,!ek.length&&eN&&eS,eb&&ei?.ctaButtonUrl&&ei?.ctaButtonDescription&&/*#__PURE__*/(0,h.jsx)(sh,{ctaClickUrl:ei.ctaButtonUrl,ctaText:ei.ctaButtonDescription,ctaType:ei.ctaButton||"",placementId:q}),/*#__PURE__*/(0,h.jsxs)("div",{className:a()(ib.footerWrapper,{[ib.isPaywallShown]:ea,[ib.isRenderedInPeepr]:o}),style:eO,children:[!!er.showsTags&&this.renderTags(t,eF),e.community?/*#__PURE__*/(0,h.jsx)(ic,{postIndex:u}):/*#__PURE__*/(0,h.jsx)(t$,{canAnswer:eh&&!so(e),editablePost:em,isInboxAsk:ep,isInInboxTimeline:r,isNarrow:d,isSubmissionDraft:W&&$===es.Wu.Submission,postChromeStyles:eF,postIndex:u})]})]})})}):/*#__PURE__*/(0,h.jsx)("article",{className:a()({[ib.withOutline]:er.hasOutline}),children:/*#__PURE__*/(0,h.jsx)("div",{className:ib.hiddenNotice,children:"Hidden"})})}renderQueueSchedule(e){let{timelineObject:{scheduledPublishTime:t,id:s,blogName:i,queuedState:n}}=this.props,{_getLocaleDateString:o,_t:a}=this.props.appContext;if(!t)return null;let r=new Date;r.setHours(23,59,59,999);let l=new Date(1e3*t),d=r.getTime()+5184e5>l.getTime()?t9.N.WeekdayShort:t9.N.MonthDayShort,c=o(l,d,!0),p=o(l,t9.N.Time,!0),m=n===es.nQ.Scheduled?/*#__PURE__*/(0,h.jsx)("span",{className:ib.scheduledIndicator,title:a("Scheduled Post"),children:/*#__PURE__*/(0,h.jsx)(u.A,{})}):/*#__PURE__*/(0,h.jsx)("span",{className:ib.scheduledIndicator,title:a("Queued Post"),children:/*#__PURE__*/(0,h.jsx)(g,{})});return/*#__PURE__*/(0,h.jsxs)("div",{className:ib.scheduledQueueDate,role:"time",children:[/*#__PURE__*/(0,h.jsxs)("div",{className:ib.scheduledQueueDay,children:[m," ",c," ",p]}),e&&n===es.nQ.Queued&&/*#__PURE__*/(0,h.jsx)(W,{blogName:i,id:s.toString()})]})}}let iy=(0,b.J)(e=>{let t=(0,iu.Ao)(e.timelineObject.communityLabels);return/*#__PURE__*/(0,h.jsx)(iv,{...e,adContext:(0,f.W)(),appContext:(0,R.Us)(),bluespaceContext:(0,t7.v)(),communityLabelState:t,dashboardContext:(0,e3.Vd)(),logEvent:(0,y.Ul)().logEvent,modalOrPeeprShowingContext:(0,se.w)(),paletteContext:(0,st.M)()})},!1)},31687:(e,t,s)=>{"use strict";s.d(t,{IY:()=>a,WH:()=>o});var i=s(66910),n=s(57574);function o(e){return function(e){let t=[];return e.display?.forEach(e=>{if(!e.mode||e.mode.type===i.wD.Weighted||e.mode.type===i.wD.Carousel){t.push(e);return}e.blocks.forEach(e=>{t.push({blocks:[e]})})}),{...e,display:t}}((0,i.ef)(e)?function(e){let t={...e,display:e.rows.map(e=>({blocks:e}))};return delete t.rows,t}({...e,rows:e.rows}):{...e})}function a(e){let t=new n.A(e).getLargestImage();return t.height/t.width}},77621:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var i=s(88346),n=/*#__PURE__*/s.n(i),o=s(74059),a=/*#__PURE__*/s.n(o),r=s(58791),l=s(36665),d=s(19974),c=s(20301),h=s(54934),p=s(56040),u=/*#__PURE__*/s.n(p),m=s(99805),g=/*#__PURE__*/s.n(m);let b={tags:"hAFp3",wrapper:"mwjNz",tag:"KSDLH",preTagsElement:"AXXSZ",seeAll:"nwVPE",supporting:"hyG7F",collapsed:"uXaAK",seeAllText:"m6pOC"};var x=s(66449),v=s(60397);class f extends l.Component{constructor(...e){super(...e),n()(this,"state",{collapsedState:"unknown"}),n()(this,"wrapper",null),n()(this,"showCollapsedUIIfNeeded",()=>{this.setState(()=>({collapsedState:this.wrapper&&this.wrapper.clientHeight>this.props.collapsedHeight?"collapsed":"expanded"}))}),n()(this,"showCollapsedUIIfNeededAfterFlush",(0,c.A)(this.showCollapsedUIIfNeeded)),n()(this,"shouldRenderTags",()=>{let{tags:e,tagsV2:t}=this.props;return t&&t.length||e&&e.length}),n()(this,"getTagsV2",()=>{let{tags:e,tagsV2:t}=this.props;return t||e?.map(e=>({name:e}))}),n()(this,"getTagElements",()=>{let{dashboardContext:{highlightedTags:e},tagClassname:t,useExternalLinks:s,recommendedColor:i}=this.props,n=this.getTagsV2();return n?n.map(n=>{if(n.name.startsWith("_"))return null;let o=n;return!n.style&&e?.includes(n.name.toLocaleLowerCase())&&(o={...n,style:{colors:[i??p.paletteGreen]}}),/*#__PURE__*/(0,v.jsx)(x.A,{className:a()(b.tag,t),tagName:n.name,tagV2:o,useExternalLinks:s},n.name)}):[]}),n()(this,"expandTags",e=>{e.stopPropagation(),this.setState(()=>({collapsedState:"expanded"}))})}componentDidMount(){this.showCollapsedUIIfNeededAfterFlush()}componentWillUnmount(){this.showCollapsedUIIfNeededAfterFlush.cancel()}render(){let e,t;let{collapsedHeight:s,postChromeStyles:i,isSupporting:n,seeAllClassname:o}=this.props,{collapsedState:l}=this.state,{_t:c}=this.props.appContext;switch(l){case"unknown":e=!0,t=!1;break;case"expanded":e=!1,t=!1;break;case"collapsed":e=!0,t=!0}if("production"===d.A.Development&&s!==g().wrappedTagsDesktopHeight&&s!==g().wrappedTagsMobileHeight&&console.warn("Please use dimensions.wrappedTagsDesktopHeight or dimensions.wrappedTagsMobileHeight as the values for collapsedHeight in this component."),!this.shouldRenderTags())return null;let h=null;return n&&(h=/*#__PURE__*/(0,v.jsx)("span",{className:a()(b.preTagsElement,b.supporting),children:/*#__PURE__*/(0,v.jsx)(r.A,{color:u().paletteGreen,size:12})})),/*#__PURE__*/(0,v.jsx)("div",{className:a()(b.tags,{[b.collapsed]:e}),style:{...i,..."collapsed"===l?{maxHeight:s}:{}},children:/*#__PURE__*/(0,v.jsxs)("div",{className:b.wrapper,ref:e=>this.wrapper=e,children:[h,this.getTagElements(),t&&/*#__PURE__*/(0,v.jsxs)("a",{className:b.seeAll,onClick:this.expandTags,role:"button",children:["…"," ",/*#__PURE__*/(0,v.jsx)("span",{className:a()(b.seeAllText,o),children:c("See all")})]})]})})}}let y=(0,h.bb)(f,{appContext:!0,adContext:!0,dashboardContext:!0})},2056:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var i=s(47457);let n={badgesContainer:"n0euW",badge:"gfb1_"};var o=s(60397);function a({canShowBadges:e,tumblrmartAccessories:t}){return/*#__PURE__*/(0,o.jsx)(i.v,{areIndividualBadgesPresentationOnly:!0,badgeClassName:n.badge,badgesContainerClassName:n.badgesContainer,badgeSize:14,badgeSpacing:2,canShowBadges:e,tumblrmartAccessories:t})}},76776:(e,t,s)=>{"use strict";s.d(t,{I:()=>ec});var i=s(74059),n=/*#__PURE__*/s.n(i),o=s(27699),a=s(95622),r=s(56365),l=s(73541),d=s(87740),c=s(91945),h=s(42264),p=s(38407),u=s(18723),m=s(22552),g=s(63906),b=s(8313),x=s(58791),v=s(11100),f=s(90937),y=s(20928);let j=(0,y.Kk)("bell-strikethrough",{size:{width:24,height:24}});var C=s(86619),w=s(51660),A=s(36665),k=s(94048),N=s(4613),S=s(56356),I=s(56040),P=/*#__PURE__*/s.n(I),B=s(86115);let T=({endTimestamp:e,currentTimestamp:t,translationFns:{_c:s,_cn:i}})=>{let n=e-t;if(n===B.N.Week)return s("Relative string to show when time runs out in exactly 1 week","6 days 23 hours");if(n>B.N.Day){let e=Math.floor(n/B.N.Day),t=Math.floor((n-e*B.N.Day)/B.N.Hour);if(0===t){if(e<=1)return s("Relative hour string to show when time runs out in exactly 1 day","less than 24 hours");e-=1,t+=24}let o=i("Relative day string to show when time runs out in 1 or more days","%1$s day","%1$s days",e),a=i("Relative hour string to show when time runs out in 1 or more days","%1$s hour","%1$s hours",t);return`${o} ${a}`}let o=Math.floor(n/B.N.Hour),a=Math.floor((n-o*B.N.Hour)/B.N.Minute),r=i("Relative hour string to show when time runs out in less than 1 day","%1$s hour","%1$s hours",o),l=i("Relative minute string to show when time runs out in less than 1 day","%1$s minute","%1$s minutes",a);return o&&a?`${r} ${l}`:o&&!a?r:!o&&a?l:s("Relative time to show when time runs out in less than 1 minute","less than 1 minute")},R={unmuteMenu:"RIBoR",menuHeading:"gIEq5",menuSubheading:"BsLEG",menuDivider:"vr9kN",menuDropdownItem:"oA9Km",popover:"dLuzh",unmuteNotificationButton:"Cd56W"};var E=s(60397);let M=()=>{let{_c:e,_cn:t}=(0,N.Us)(),{post:{muted:s,muteEndTimestamp:i}}=(0,S.gY)(),[n,o]=(0,A.useState)(!1),a=()=>o(!n),r=i||0,l=Math.round(Date.now()/1e3),d=0===r?e("Indicates that the post is muted.","Notifications muted"):e("Unmute button text which also indicates how much time before the mute automatically expires.","Notifications muted. %1$s remaining",[T({endTimestamp:r,currentTimestamp:l,translationFns:{_c:e,_cn:t}})]);return s?/*#__PURE__*/(0,E.jsx)(C.Ay,{closeForAllExternalClicks:!0,height:"auto",isOpen:n,render:()=>{let s=e("Indicated how much time before post notifications are unmuted.","%1$s remaining",[T({endTimestamp:r,currentTimestamp:l,translationFns:{_c:e,_cn:t}})]);return/*#__PURE__*/(0,E.jsxs)("div",{className:R.unmuteMenu,children:[/*#__PURE__*/(0,E.jsx)("div",{className:R.menuHeading,children:e("Heading on unmute dropdown","Notifications muted")}),r>0?/*#__PURE__*/(0,E.jsx)("div",{className:R.menuSubheading,children:s}):null,/*#__PURE__*/(0,E.jsx)("div",{className:R.menuDivider}),/*#__PURE__*/(0,E.jsx)(f.A,{className:R.menuDropdownItem,isWrappingButton:!0,keepDropdownOpenAfterClick:!0,krakenEventName:k.R.UnmuteFromHeader,children:/*#__PURE__*/(0,E.jsx)(w.P,{onClick:a})},"mute")]})},targetWrapperClassName:R.popover,toggle:a,children:/*#__PURE__*/(0,E.jsx)(v.A,{"aria-label":d,className:R.unmuteNotificationButton,onClick:a,children:/*#__PURE__*/(0,E.jsx)(j,{colors:{primary:P().paletteGray65},size:{width:16,height:16}})})}):null};var z=s(78494),L=s(85191),D=s(71310),O=s(28304),F=s(22696),W=s(90381),U=s(66910),_=s(74495),V=s(83322),H=s(40297),G=s(9119),$=s(40176),q=s(79393),Q=s(38238),K=s(12154);let Y=(0,y.Kk)("pin",{size:{width:24,height:24}});var X=s(44554),J=s(55321),Z=s(19974),ee=s(91171);let et={recommendationReason:"VPQeD",withIcon:"ESJX7"},es=new Map([[_.t.Search,X.A],[_.t.Pin,Y]]),ei=new Map([["#00cf35",I.paletteGreen],["#7c5cff",I.palettePurple]]),en={width:14,height:14},eo=({reason:e,className:t})=>{let{color:s,icon:i,links:{recommendationDestination:o},text:a,textHighlight:l,textHighlights:d}=e,c=ei.get(s)??s,{wwwBaseUrl:h}=(0,N.Us)();if(d?.length){let e=d.map((e,t)=>`{{Component${t}/}}`),s=(0,ee.B)(a,e),i=d.reduce((e,{text:t,color:s},i)=>({...e,[`Component${i}`]:/*#__PURE__*/(0,E.jsx)(r.A,{blogName:t,showBlogCard:!0,style:{color:ei.get(s)??s},children:t})}),{});return/*#__PURE__*/(0,E.jsx)("span",{className:n()(et.recommendationReason,t),style:{color:c},children:(0,K.A)({mixedString:s,components:i})})}if(i===_.t.Hashtag){let e=c,s="inherit",i=a;return l&&a.includes("%s")&&(s=c,e="inherit",i=(0,K.A)({mixedString:a.replace("%s","{{highlight/}}"),components:{highlight:/*#__PURE__*/(0,E.jsx)("span",{style:{color:s},children:"#"+l})}})),/*#__PURE__*/(0,E.jsx)("a",{className:n()(et.recommendationReason,t),href:o?.href,style:{color:e},children:i})}if(i===_.t.Community)return/*#__PURE__*/(0,E.jsx)(J.N_,{className:n()(et.recommendationReason,t),style:{color:c},to:o?.href.replace(h,"")??"",children:l?(0,K.A)({mixedString:a.replace(l,"{{highlight/}}"),components:{highlight:/*#__PURE__*/(0,E.jsx)("strong",{children:l})}}):a});let p=i&&es.get(i);"production"===Z.A.Development&&i&&!p&&console.warn(`No icon found for recommendation reason icon type "${i}"`);let u=p?/*#__PURE__*/(0,E.jsx)(p,{colors:{primary:c},size:en}):null;return/*#__PURE__*/(0,E.jsxs)("a",{className:n()(et.recommendationReason,{[et.withIcon]:u},t),href:o?.href,style:{color:c},children:[u,a]})};var ea=s(2056);let er={header:"BjErQ",withoutBorderRadius:"Aj66f",isLink:"PpzOx",subAvatar:"i5aqv",avatar:"RYkKH",sponsoredSubHeading:"rGP1C",narrowSponsoredSubHeading:"Euban",timestampWrapper:"MHZ5s",sponsoredText:"zYMVR",blaze:"lLxmv",sponsoredContainer:"G0rF_",attribution:"WJ6ij",sponsoredTextSub:"v3Gu6",headerContent:"q4Pce",headerSponsored:"CsjTP",headerHasInlineAvatar:"J_Wh8",hidesPosterBlogname:"xjVqt",leftContent:"ZJdm4",leftContentMain:"ffqNn",noFlexWrap:"EVcsJ",leftContentSecondary:"pVS0A",timestamp:"j8f9p",withDotSeparatorContainer:"T28Qk",withDotSeparator:"ZlHiL",communityLabel:"QQAmL",innerText:"rJe2J",author:"zHhsx",postAttribution:"vGkyT",rebloggedFromName:"eLzSX",followButton:"rmjNp",private:"ps_dU",lock:"rFnRs",rightContent:"KFWnx",postMeatballsContainer:"a_qtV",rightFollowButtonWrapper:"WFTy4",rightFollowButton:"qU8uP",headerBloglessAdvertiser:"yWEqH",subHeaderBlazeCampaign:"Dx0Mo",hasBadges:"MrqyD",attributionHeaderText:"NStl8",timestampLink:"KyXoU",blazeBadge:"cTtCk",reblogged:"Gnc1N",isCommercial:"y_F2V"},el=({headerText:e,isNonInteractive:t,placementId:s,earnedId:i,isPaywalled:a})=>{let{post:l,presentationStyle:d}=(0,S.gY)(),{hydraConfigInstanceId:h,adPlacementConfiguration:p}=(0,H.W)(),{_c:m,features:{paywallConsumption:b},timestamps:v}=(0,N.Us)(),{blog:f}=l,y=(0,$._)({hydraConfigInstanceId:h,adPlacementConfiguration:p,timelineObject:l}),j=b&&f?.paywallAccess&&a,C=j&&f?.paywallAccess!==F.xb.Member,w=q.A.reblogRedesignNew.avatarDimension;return/*#__PURE__*/(0,E.jsxs)("div",{className:er.subHeaderBlazeCampaign,children:[/*#__PURE__*/(0,E.jsx)("div",{className:er.avatar,children:/*#__PURE__*/(0,E.jsx)(o.A,{blog:f,dimension:w,eventDetails:y,eventName:k.R.Avatar,imageResponse:f.avatar,isAdult:f.isAdult,isLink:!t,name:f.name,placementId:s,showBlogCard:!t,url:f.url})}),/*#__PURE__*/(0,E.jsxs)("div",{className:n()(er.headerContent,er.headerHasInlineAvatar),children:[/*#__PURE__*/(0,E.jsxs)("div",{className:er.leftContent,children:[/*#__PURE__*/(0,E.jsxs)("div",{className:er.leftContentMain,children:[/*#__PURE__*/(0,E.jsx)("div",{className:n()(er.attribution,{[er.hasBadges]:!!f?.tumblrmartAccessories?.badges?.length}),children:/*#__PURE__*/(0,E.jsxs)("div",{className:er.postAttribution,children:[/*#__PURE__*/(0,E.jsx)("span",{className:er.attributionHeaderText,children:e}),/*#__PURE__*/(0,E.jsx)(ea.p,{canShowBadges:f.canShowBadges,tumblrmartAccessories:f?.tumblrmartAccessories})]})}),/*#__PURE__*/(0,E.jsx)(c.A,{blogName:f.name,blogUrl:f.url,className:er.followButton,extraFollowParams:{placementId:s,earnedId:i},following:!!f.followed,isPostHeader:!0})]}),v&&l.timestamp&&/*#__PURE__*/(0,E.jsx)("div",{className:er.leftContentSecondary,children:/*#__PURE__*/(0,E.jsx)(r.A,{blogName:l.blogName,className:n()(er.timestampWrapper,er.withDotSeparator),postId:l.id,showBlogCard:!1,children:/*#__PURE__*/(0,E.jsx)(z.D,{className:n()(er.timestamp),date:new Date(1e3*l.timestamp).toUTCString()})})})]}),/*#__PURE__*/(0,E.jsxs)("div",{className:er.rightContent,children:[j&&f?.paywallAccess===F.xb.Member&&/*#__PURE__*/(0,E.jsx)(x.A,{backgroundColor:P().paletteGreen,color:P().paletteWhite,size:20}),C&&/*#__PURE__*/(0,E.jsx)("span",{"aria-label":m("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),className:er.lockIcon,children:/*#__PURE__*/(0,E.jsx)(u.A,{colors:{primary:P().paletteGray65},size:{width:20,height:20}})}),/*#__PURE__*/(0,E.jsx)("span",{className:er.postMeatballsContainer,children:/*#__PURE__*/(0,E.jsx)(S._5.Provider,{value:{post:l,presentationStyle:d},children:/*#__PURE__*/(0,E.jsx)(g.J,{blogName:l.blogName,contentLabelBlogIdentifier:l.blog?.uuid,date:l.date,followed:l.blog?.followed,isPostPublishedOrPrivate:!0,parentPostId:l.id,postUrl:l.postUrl})})})]})]})]})};var ed=s(48651);let ec=function({postAttribution:e,reblogAttribution:t,showsFollowButton:s,showsSponsored:i,hideSponsoredText:v=!1,presentationStyle:f={},isAd:y,isInboxAsk:j=!1,showAsAnonymous:C=!1,blogHasNoAvatar:w=!1,isFollowingReblogger:A,date:I,postState:B,isNonInteractive:T,placementId:R,earnedId:K,isPaywalled:Y,community:X,editablePost:J,afterHideAd:Z,isBlazeCampaign:ee,communityLabelProps:et,recommendationReason:es,onAdReported:ei,showReportAd:en=!1,showWhyAd:ec=!1,getAdInstance:ep}){let eu;let{_t:em,_c:eg,features:eb,timestamps:ex}=(0,N.Us)(),ev=(0,S.Zm)(),ef=ev!==S.hJ,ey=ef&&!!ev?.post.community,{hydraConfigInstanceId:ej,adPlacementConfiguration:eC}=(0,H.W)(),{displayMode:ew=V.X2.List}=(0,G._X)(),{data:eA}=(0,O.Py)(),{postPermalinkPath:ek,...eN}=(0,ed.F)({blogName:ef?ev.post.blogName:void 0,community:X,headerClassName:er.header,postId:ef?ev.post.id?.toString():void 0,postSlug:ef?ev.post.slug:void 0,postUrl:ef?ev.post.postUrl:void 0,presentationStyle:ef?ev.presentationStyle:void 0,source:"post_header"}),{showsAuthorImage:eS,showsPostingBlogName:eI,showsBlazeeBlazerAuthor:eP,showsTimestamps:eB}=f,eT=q.A.reblogRedesignNew.reblogIconSize,eR=eI||i,eE={source:"post_header",...ef?(0,$._)({hydraConfigInstanceId:ej,adPlacementConfiguration:eC,timelineObject:ev?.post}):{}},eM=ee&&i,ez=eM&&i&&!ev?.post?.isSingleUserBlaze&&!!ev?.post?.blazerBlog,eL=eb.blazeAdFormats&&eM,eD=t&&s&&/*#__PURE__*/(0,E.jsx)("div",{className:er.followButton,children:/*#__PURE__*/(0,E.jsx)(c.A,{blogName:t.blogName,blogUrl:t.blogName,className:er.followButton,extraFollowParams:{placementId:R,earnedId:K},following:!!A,isPostHeader:!0})}),eO=n()(er.headerContent,{[er.hidesPosterBlogname]:!eR}),eF=C?J?.anonymousName&&J?.anonymousEmail?`${J.anonymousName} <${J.anonymousEmail}>`:em("Anonymous"):e?.blog?.advertiserName||e?.blog?.name,eW=eh({_t:em,_c:eg},e,t,eF),eU=i&&!eM&&/*#__PURE__*/(0,E.jsx)(b.A,{hideOnMobile:!1,isBlazeCampaign:ee,showAdFreeLink:!1,showSpinner:!eb.tspUiUpdate&&ew!==V.X2.Masonry,showSponsoredText:!v}),e_=eA?.user?.hasTumblrPremium,eV=q.A.reblogRedesignNew.avatarDimension,eH=t&&/*#__PURE__*/(0,E.jsx)(E.Fragment,{children:t.blogName&&/*#__PURE__*/(0,E.jsxs)("div",{className:er.rebloggedFromName,children:[/*#__PURE__*/(0,E.jsx)(r.A,{blogName:t.blogName,krakenEvents:[{eventName:k.R.Posts,eventDetails:{source:"post_header"}},{eventName:k.R.ReblogNameClick,eventDetails:{source:"post_header"}}],placementId:R,useInlinePopover:!0,children:t.blogName})," "]})}),eG=!C&&e?.blog.url&&!e.blog.advertiserName?/*#__PURE__*/(0,E.jsx)(r.A,{blog:e.blog,blogName:e.blog.name,className:er.author,krakenEvents:[{eventName:k.R.Posts,eventDetails:eE},{eventName:k.R.BlogNameClick,eventDetails:eE}],placementId:R,rel:"author",useInlinePopover:!0,children:eF}):/*#__PURE__*/(0,E.jsx)("span",{children:eF}),e$=/*#__PURE__*/(0,E.jsx)("span",{className:er.innerText});if(eP&&!ev.post.isSingleUserBlaze){if(ev.post.userIsBlazee){let e=!C&&ev.post?.blazerBlog?/*#__PURE__*/(0,E.jsx)(r.A,{blog:ev.post.blazerBlog,className:er.author,krakenEvents:[{eventName:k.R.Posts,eventDetails:eE},{eventName:k.R.BlogNameClick,eventDetails:eE}],placementId:R,rel:"author",useInlinePopover:!0,children:ev.post.blazerBlog?.name}):/*#__PURE__*/(0,E.jsx)("span",{children:ev.post.blazerBlog?.name});eu=/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[/*#__PURE__*/(0,E.jsx)("div",{className:er.blazeBadge,children:/*#__PURE__*/(0,E.jsx)(h.A,{})}),/*#__PURE__*/(0,E.jsx)(L.Ay,{comment:"Displayed when an other user has blazed a post of the current user",components:{blazeeBlogLink:e},children:"Blazed by [blazeeBlogLink/]"})]})}else eu=/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[/*#__PURE__*/(0,E.jsx)("div",{className:er.blazeBadge,children:/*#__PURE__*/(0,E.jsx)(h.A,{})}),/*#__PURE__*/(0,E.jsx)(L.Ay,{comment:"Displayed when this user has blazed a post from an other user",components:{link:!C&&e?/*#__PURE__*/(0,E.jsx)(r.A,{blog:e.blog,className:er.author,krakenEvents:[{eventName:k.R.Posts,eventDetails:eE},{eventName:k.R.BlogNameClick,eventDetails:eE}],placementId:R,rel:"author",useInlinePopover:!0}):/*#__PURE__*/(0,E.jsx)("span",{children:ev.post.blogName})},params:{blogName:ev.post.blogName},children:"Blazed [link][blogName]'s[/link] post"})]})}else if(!e?.recipientName&&e?.isSubmission)eu=/*#__PURE__*/(0,E.jsx)(L.Ay,{comment:"Displayed when a blog has submitted a post to a primary blog",components:{senderBlogLink:eG,innerElement:e$},children:"[senderBlogLink/] [innerElement]submitted:[/innerElement]"});else if(e?.recipientName){let t=/*#__PURE__*/(0,E.jsx)(r.A,{blogName:e.recipientName,krakenEvents:[{eventName:k.R.Posts,eventDetails:{source:"post_header"}},{eventName:k.R.BlogNameClick,eventDetails:{source:"post_header"}}],placementId:R,useInlinePopover:!0,children:e.recipientName});eu=e.isSubmission?/*#__PURE__*/(0,E.jsx)(L.Ay,{comment:"Displayed when a blog has submitted a post to a secondary blog",components:{senderBlogLink:eG,innerElement:e$,recipientBlogLink:t},children:"[senderBlogLink/] [innerElement]submitted to[/innerElement] [recipientBlogLink/]:"}):/*#__PURE__*/(0,E.jsx)(L.Ay,{comment:"Displayed when a blog has sent a message to a secondary blog",components:{senderBlogLink:eG,innerElement:e$,recipientBlogLink:t},children:"[senderBlogLink/] [innerElement]said to[/innerElement] [recipientBlogLink/]:"})}else eu=eG;if(y){let t=e?.blog.avatar?.length?e?.blog.avatar:[{url:"https://assets.tumblr.com/images/default_avatar/sphere_open_128.png",width:128,height:128},{url:"https://assets.tumblr.com/images/default_avatar/sphere_open_64.png",width:64,height:64}],s=/*#__PURE__*/(0,E.jsxs)("div",{className:n()(er.leftContentMain,er.noFlexWrap),children:[/*#__PURE__*/(0,E.jsx)("div",{className:er.avatar,children:/*#__PURE__*/(0,E.jsx)(o.A,{blog:e?.blog,dimension:eV,eventDetails:eE,eventName:k.R.Avatar,imageResponse:t,isAdult:!1,isLink:!1,name:e?.blog.name,placementId:R,showBlogCard:!1,url:e?.blog.url})}),/*#__PURE__*/(0,E.jsxs)("div",{className:er.sponsoredContainer,children:[/*#__PURE__*/(0,E.jsx)("div",{className:er.attribution,children:eF}),/*#__PURE__*/(0,E.jsx)("div",{className:er.sponsoredTextSub,children:"Sponsored"})]})]});return e?.blog.url&&(s=/*#__PURE__*/(0,E.jsx)("a",{href:e?.blog.url,onClick:e?.onClick,rel:"noopener",role:"button",target:"_blank",children:s})),/*#__PURE__*/(0,E.jsx)("header",{"aria-label":eW,className:er.header,role:"banner",children:/*#__PURE__*/(0,E.jsxs)("div",{className:n()(eO),children:[s,/*#__PURE__*/(0,E.jsx)("span",{className:er.postMeatballsContainer,children:/*#__PURE__*/(0,E.jsx)(m.A,{getAdInstance:ep,onAdReported:ei,showAdFree:!e_,showReportAd:en,showWhyAd:ec})})]})})}let eq=B===U.Wu.Private&&/*#__PURE__*/(0,E.jsxs)("div",{className:n()(er.private,er.withDotSeparator),children:[/*#__PURE__*/(0,E.jsx)("div",{className:er.lock,children:/*#__PURE__*/(0,E.jsx)(p.A,{colors:{primary:P().paletteGray65},size:eT})}),em("Private")]}),eQ=ez||eP&&!ev?.post?.isSingleUserBlaze&&ev?.post?.blazerBlog&&ev?.post?.userIsBlazee?ev?.post?.blazerBlog:e?.blog,eK=eM?/*#__PURE__*/(0,E.jsx)(r.A,{blog:eQ,blogName:eQ?.name,className:er.author,krakenEvents:[{eventName:k.R.Posts,eventDetails:eE},{eventName:k.R.BlogNameClick,eventDetails:eE}],placementId:R,rel:"author",useInlinePopover:!0,children:eQ?.advertiserName||eQ?.name}):eu,eY=eR&&/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[eM&&/*#__PURE__*/(0,E.jsx)("div",{className:er.blazeBadge,children:/*#__PURE__*/(0,E.jsx)(h.A,{})}),eK," ",!eP&&/*#__PURE__*/(0,E.jsx)(ea.p,{canShowBadges:eQ?.canShowBadges,tumblrmartAccessories:eQ?.tumblrmartAccessories})]}),eX=e?.blog?/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[" ",/*#__PURE__*/(0,E.jsx)(l.F,{blogName:e?.blog.name,boopContext:d.Et.post,canBeBooped:e?.blog.canBeBooped,display:"text"})]}):null,eJ=(eR||eH)&&/*#__PURE__*/(0,E.jsxs)("div",{className:er.attribution,children:[t?.postId?/*#__PURE__*/(0,E.jsx)(L.Ay,{comment:"Shows up in post header to indicate that a post was reblogged by some other blogger.",components:{rebloggerAuthor:/*#__PURE__*/(0,E.jsx)(E.Fragment,{children:eY}),postAuthor:/*#__PURE__*/(0,E.jsx)(E.Fragment,{children:eH})},children:"[rebloggerAuthor/] reblogged [postAuthor/]"}):/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[eY,eH]}),t?eX:null]}),eZ=!ev?.post?.isSingleUserBlaze&&ev?.post?.blazerBlog?eQ?.canBeFollowed:s,e0=eQ&&eZ&&!eD&&eR&&/*#__PURE__*/(0,E.jsx)(c.A,{blogName:eQ.name,blogUrl:eQ.url,className:n()({[er.followButton]:!eL,[er.rightFollowButton]:eL}),extraFollowParams:{placementId:R,earnedId:K},following:!!eQ.followed,isPostHeader:!0,wrapperClassName:n()({[er.followButton]:!eL,[er.rightFollowButtonWrapper]:eL})}),e1=eM&&ev?.post?.blazeTime?new Date(ev?.post?.blazeTime*1e3):I,e6=e1&&(ex||eB)&&(!i||eM),e2=es?.icon===_.t.Pin,e4=es&&/*#__PURE__*/(0,E.jsx)(eo,{className:er.withDotSeparator,reason:es});e2&&!f.showsPinnedStatus?e4=null:e2||f.showsRecommendationReason||(e4=null);let e5=/*#__PURE__*/(0,E.jsxs)("div",{className:er.leftContent,children:[eJ||e0?/*#__PURE__*/(0,E.jsxs)("div",{className:er.leftContentMain,children:[eJ,!eL&&e0,t?null:eX]}):null,/*#__PURE__*/(0,E.jsxs)("div",{className:n()(er.leftContentSecondary,er.withDotSeparatorContainer),children:[e6&&/*#__PURE__*/(0,E.jsx)(r.A,{blogName:ev.post.blogName,className:n()(er.timestampWrapper,er.withDotSeparator),postId:ev.post.id,showBlogCard:!1,children:/*#__PURE__*/(0,E.jsx)(z.D,{className:er.timestamp,date:e1})}),eb.dsaArticle26MarkPostAsCommercial&&ev.post.isCommercial&&/*#__PURE__*/(0,E.jsx)("div",{className:n()(er.isCommercial,er.withDotSeparator),children:eg("The label for commercial posts.","Commercial content")}),eq,e4,i&&/*#__PURE__*/(0,E.jsx)(b.A,{className:er.withDotSeparator,hideOnMobile:!1,isBlazeCampaign:eM,showAdFreeLink:!1,showSpinner:!1,showSponsoredText:!v}),et&&/*#__PURE__*/(0,E.jsx)(Q.r7,{...et,className:n()(er.withDotSeparator,er.communityLabel)})]})]}),e9=eb.paywallConsumption&&e?.blog?.paywallAccess&&e?.blog?.paywallAccess===F.xb.Member&&Y&&/*#__PURE__*/(0,E.jsx)(x.A,{backgroundColor:P().paletteGreen,color:P().paletteWhite,size:20}),e3=eb.paywallConsumption&&e?.blog?.paywallAccess&&e?.blog?.paywallAccess!==F.xb.Member&&Y&&/*#__PURE__*/(0,E.jsx)("span",{"aria-label":eg("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),className:er.lockIcon,children:/*#__PURE__*/(0,E.jsx)(u.A,{colors:{primary:P().paletteGray65},size:{width:20,height:20}})}),e8=!T&&e&&/*#__PURE__*/(0,E.jsx)("div",{className:er.rightContent,children:eM?/*#__PURE__*/(0,E.jsxs)("span",{className:er.postMeatballsContainer,children:[eL&&e0,/*#__PURE__*/(0,E.jsx)(m.A,{afterHideAd:Z,getAdInstance:ep,onAdReported:ei,showAdFree:!e_,showReportAd:en,showWhyAd:ec})]}):/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[eU&&/*#__PURE__*/(0,E.jsx)("span",{className:er.postMeatballsContainer,children:/*#__PURE__*/(0,E.jsx)(m.A,{afterHideAd:Z,getAdInstance:ep,onAdReported:ei,showAdFree:!e_,showReportAd:en,showWhyAd:ec})}),!eU&&/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[e9,e3,ev.post.muted?/*#__PURE__*/(0,E.jsx)(M,{}):null,/*#__PURE__*/(0,E.jsx)("span",{className:er.postMeatballsContainer,children:/*#__PURE__*/(0,E.jsx)(g.J,{blogName:e.blog.name,blogUrl:e.blog.url,contentLabelBlogIdentifier:ey?ev?.post.community?.uuid:e.blog.uuid,currentTumblelog:ef&&(j||e.isSubmission)?ev?.post?.blogName:void 0,date:I,editablePost:J,followed:e.blog.followed,isPostPublishedOrPrivate:!!B&&[U.Wu.Published,U.Wu.Private].includes(B),postUrl:e.permalinkUrl})})]})]})}),e7=q.A.reblogRedesignNew.showsAvatarInline;eQ&&eQ.isBloglessAdvertiser&&(e7=!1),B===U.Wu.Queued&&(e7=!0);let te=t?a.A.reblog():eQ?.isAdmin?a.A.ofType(W.$.CommunityAdmin,{withBorder:!0}):eQ?.isModerator?a.A.ofType(W.$.CommunityModerator,{withBorder:!0}):null,tt=e7&&eQ&&/*#__PURE__*/(0,E.jsx)("div",{className:er.avatar,children:/*#__PURE__*/(0,E.jsx)(o.A,{badge:te,blog:eQ,dimension:eV,eventDetails:eE,eventName:k.R.Avatar,imageResponse:eQ.avatar,isAdult:eQ.isAdult,isAnonymous:C||w,isLink:!T,name:eQ.name,placementId:R,showBlogCard:!T,subAvatarClassName:er.subAvatar,url:eQ.url,...eS&&{authorName:ev.post.postAuthor,authorImageResponse:ev.post.postAuthorAvatar},...ev.post.community&&ev.presentationStyle.showsCommunityAttribution&&{authorName:ev.post.community.name,authorImageResponse:ev.post.community.avatarImage,authorLink:(0,D.n)({communityId:ev.post.community.name})}})});return/*#__PURE__*/(0,E.jsxs)(E.Fragment,{children:[/*#__PURE__*/(0,E.jsxs)("header",{"aria-label":eW,className:n()(er.header,{[er.headerBloglessAdvertiser]:e?.blog?.isBloglessAdvertiser,[er.isLink]:eN.onClick,[er.withoutBorderRadius]:!!f.withoutBorderRadius}),role:"banner",...eN,children:[tt,/*#__PURE__*/(0,E.jsx)("div",{className:n()(eO,{[er.headerSponsored]:!!eU,[er.headerHasInlineAvatar]:!!tt}),children:e5}),e8]}),ez&&/*#__PURE__*/(0,E.jsx)(el,{headerText:eu,isNonInteractive:T,isPaywalled:Y,placementId:R})]})},eh=({_t:e,_c:t},s,i,n)=>i&&s?e("%1$s reblogged a post from %2$s",[s.blog.name,i.blogName]):s?.blog.isAdmin?t("Screenreader-friendly label for an original post, posted into a community by an admin. Variable is the admin's blogname.","Posted by %1$s (admin)",[s.blog.name]):s?.blog.isModerator?t("Screenreader-friendly label for an original post, posted into a community by an moderator. Variable is the moderator's blogname.","Posted by %1$s (moderator)",[s.blog.name]):n?e("Posted by %1$s",[n]):void 0},48651:(e,t,s)=>{"use strict";s.d(t,{F:()=>h});var i=s(79708),n=s(36665),o=s(53986),a=s(94048),r=s(84208),l=s(4613),d=s(25183),c=s(99717);let h=({headerClassName:e,blogName:t,postId:s,postSlug:h,presentationStyle:p,source:u,isReblogHeader:m,community:g,eventName:b=a.R.PostHeaderClick,postUrl:x})=>{let{wwwBaseUrl:v,getBrowserInfo:f}=(0,l.Us)(),{logEvent:y}=(0,d.Ul)(),j=(0,o.Zp)(),C=(0,o.zy)(),w=g&&s,A=x&&c.p(x)?.pathname,k=w?A:(0,i.cm)({peeprBlogname:t,peeprPostId:s?.toString(),peeprPostSlug:h}),N=(0,r.oG)(f()),S=(0,n.useCallback)(t=>{let s=t.target,i=s instanceof Element&&s.closest(`a,button,[role="button"],[role="link"]:not(.${e})`),n=s instanceof Element&&s.closest(`.${e}`),o=s instanceof Element&&s.closest(`[role="group"]:not(.${e})`);if(!n||i||o){t.stopPropagation();return}if(!k||C.pathname===k)return;let a="keyup"===t.type&&"key"in t;if(a&&"Enter"!==t.key||a&&"Enter"===t.key&&(i||o))return;t.preventDefault(),y({eventName:b,eventDetails:u?{source:u}:void 0});let r=N?"metaKey":"ctrlKey";p?.useExternalLinks||t[r]?window.open(`${v}${k}`,"_blank","noreferrer,noopener"):j(k)},[e,k,C.pathname,u,b,y,N,p?.useExternalLinks,v,j]);return!k||C.pathname.startsWith(k)&&!m?{}:{postPermalinkPath:k,onClick:p?.withoutPermalink?void 0:S,onKeyUp:S,role:"link",tabIndex:0}}},29856:(e,t,s)=>{"use strict";s.d(t,{X:()=>B});var i=s(69384),n=s(74059),o=/*#__PURE__*/s.n(n),a=s(27699),r=s(95622),l=s(56365),d=s(73541),c=s(87740),h=s(91945),p=s(18723),u=s(63906),m=s(78494),g=s(99722),b=s(94048),x=s(22696),v=s(4613),f=s(56356),y=s(79393),j=s(56040),C=/*#__PURE__*/s.n(j),w=s(2056),A=s(48651);let k={reblog:"u2tXn",inEditor:"AB4em",reblogHeader:"fAAi8",isLink:"jLBd9",label:"zSfnO",attributionHeaderText:"MZvpp",leftContent:"QkCNg",rightContent:"wI_El",username:"lBFTL",userInfo:"GdjMk",timestampLink:"MvV_c",timestamp:"SqGYs",followButton:"a6sXh",attribution:"sqHC2",postMeatballsContainer:"jj685",withDotSeparatorContainer:"__C9O",withDotSeparator:"mVBb2",isCommercial:"uzCdy"};var N=s(60397);let S=({avatarConfiguration:e,labelConfiguration:t=null,followButtonConfiguration:s,children:i,parentPlacementId:n,parentEarnedId:j,isContributedContent:S,showBlogCards:I=!0,isEdit:P})=>{let{_c:B,features:T,timestamps:R}=(0,v.Us)(),E=(0,f.rr)(),M=!!E?.post.community,{postPermalinkPath:z,...L}=(0,A.F)({blogName:t?.blog?.name,community:S&&M?E?.post.community:void 0,eventName:b.R.ReblogHeaderClick,headerClassName:k.reblogHeader,isReblogHeader:!0,postId:t?.postId,postUrl:E?.post.postUrl,presentationStyle:E?E.presentationStyle:void 0,source:"reblog_header"}),D=(R||E?.presentationStyle.showsTimestamps)&&!!t?.postTimestamp&&!j,O=null,F={dimension:y.A.reblogRedesignNew.avatarDimension};if(e){let{avatarImageResponse:s,clickthrough:i,showsReblogIcon:n,blogIsAdult:o}=e;F.imageResponse=s,F.isAdult=o,F.showBlogCard=I,F.eventName=b.R.Avatar,F.eventDetails={source:"reblog_header"},n&&(F.badge=r.A.reblog()),i&&(F.name=i.blogName,F.url=i.href,F.blog=t?.blog)}O=/*#__PURE__*/(0,N.jsx)(a.A,{...F});let W=/*#__PURE__*/(0,N.jsx)("div",{className:k.attribution,children:t?.blog?.advertiserName||t?.text});t?.blog&&(W=/*#__PURE__*/(0,N.jsx)(l.A,{blog:t.blog,blogName:t.blog.name,krakenEventDetails:{source:"reblog_header"},krakenEventName:b.R.BlogNameClick,showBlogCard:I,title:t.unselectableReason,useInlinePopover:!0,children:W}));let U=s?.showFollowAction&&s?.canFollowBlog&&t?.blog?/*#__PURE__*/(0,N.jsx)(h.A,{blogName:t.blog?.name,blogUrl:t.blog?.url,className:k.followButton,extraFollowParams:{placementId:n,earnedId:j},following:!!s.isFollowingReblogger,isReblogHeader:!0}):null,_=T.paywallConsumption&&t?.blog?.isPaywallOn&&t?.paywallAccess!==x.xb.Member&&t?.isPaywalled&&/*#__PURE__*/(0,N.jsx)("span",{"aria-label":B("Indicates that the post has paywalled content that the user doesn't have access to, as they are not a subscriber.","For supporters"),className:k.lockIcon,children:/*#__PURE__*/(0,N.jsx)(p.A,{colors:{primary:C().paletteGray65},size:{width:20,height:20}})}),V=t?.blog?.active&&!P&&E&&{...E?.post,id:t.postId||E.post.id,blogName:t.blog.name||E.post.blogName,blog:t.blog||E.post.blog,timestamp:t.postTimestamp||E.post.timestamp,date:t.postTimestamp?new Date(1e3*t.postTimestamp).toUTCString():E.post.date};return/*#__PURE__*/(0,N.jsxs)("div",{className:o()(k.reblog,P&&k.inEditor),"data-is-contributed-content":S,children:[/*#__PURE__*/(0,N.jsxs)("div",{className:o()(k.reblogHeader,{[k.isLink]:L.onClick}),role:"banner",...L,children:[/*#__PURE__*/(0,N.jsxs)("div",{className:k.leftContent,children:[O,/*#__PURE__*/(0,N.jsxs)("div",{className:k.userInfo,children:[/*#__PURE__*/(0,N.jsx)("div",{className:k.username,children:/*#__PURE__*/(0,N.jsxs)("div",{className:k.label,children:[/*#__PURE__*/(0,N.jsxs)("span",{className:k.attributionHeaderText,children:[W," "]}),/*#__PURE__*/(0,N.jsx)(w.p,{canShowBadges:t?.blog?.canShowBadges,tumblrmartAccessories:t?.blog?.tumblrmartAccessories})," ",U,t?.blog&&/*#__PURE__*/(0,N.jsxs)(N.Fragment,{children:[" ",/*#__PURE__*/(0,N.jsx)(d.F,{blogName:t?.blog?.name,boopContext:c.Et.reblog,canBeBooped:t?.blog?.canBeBooped,display:"text"})]})]})}),/*#__PURE__*/(0,N.jsxs)("div",{className:k.withDotSeparatorContainer,children:[D&&t.postTimestamp&&/*#__PURE__*/(0,N.jsx)(l.A,{blogName:t.blog?.name,className:o()(k.timestampLink,k.withDotSeparator),postId:t.postId,showBlogCard:!1,children:/*#__PURE__*/(0,N.jsx)(m.D,{className:k.timestamp,date:new Date(1e3*t.postTimestamp).toUTCString()})}),T.dsaArticle26MarkPostAsCommercial&&t?.isCommercial&&/*#__PURE__*/(0,N.jsx)("div",{className:o()(k.isCommercial,k.withDotSeparator),children:B("The label for commercial posts.","Commercial content")})]})]})]}),/*#__PURE__*/(0,N.jsxs)("div",{className:k.rightContent,children:[_,V&&/*#__PURE__*/(0,N.jsx)("span",{className:k.postMeatballsContainer,children:/*#__PURE__*/(0,N.jsx)(f._5.Provider,{value:{post:V,presentationStyle:E.presentationStyle},children:/*#__PURE__*/(0,N.jsx)(u.J,{blogName:V.blogName,contentLabelBlogIdentifier:V.blog?.uuid,date:V.date,followed:V.blog?.followed,isPostPublishedOrPrivate:!0,isReblogHeader:!0,parentPostId:E.post.id,postUrl:`${g.Qc}${z}`})})})]})]}),/*#__PURE__*/(0,N.jsx)("div",{className:k.childrenContainer,children:i})]})};var I=s(79708),P=s(66910);let B=({contentFooter:e,disableFollow:t,isEdit:s,parentEarnedId:n,parentPlacementId:o,showBlogCards:a=!0,trail:r})=>/*#__PURE__*/(0,N.jsx)(N.Fragment,{children:r?.map((r,l)=>{let d,c,h,p;if(P.h4(r)){let{canBeFollowed:e,active:s}=r.blog,i=!1!==s;c={text:r.blog.name,isCommercial:r.post.isCommercial},i&&(c={...c,blog:r.blog,postId:r.post.id,postTimestamp:r.post.timestamp,clickthrough:I.cm({peeprBlogname:r.blog.name,peeprPostId:r.post.id?.toString()}),isPaywalled:r.post.isPaywalled,paywallAccess:r.post.paywallAccess},d={avatarImageResponse:r.blog.avatar,blogIsAdult:r.blog.isAdult,clickthrough:{href:r.blog.url,title:r.blog.title,blogName:r.blog.name},showsReblogIcon:0!==l}),h=t||r.blog.isBloglessAdvertiser?{canFollowBlog:!1}:{canFollowBlog:i&&e,isFollowingReblogger:r.blog.followed,showFollowAction:r.blog.showFollowAction},p=r.post.id}else d={showsReblogIcon:0!==l},c={text:r.brokenBlog?.name,blog:void 0},p=`${r.brokenBlog?.name} ${JSON.stringify(r.content)}`;return /*#__PURE__*/N.jsxs(S,{avatarConfiguration:d,followButtonConfiguration:h,isContributedContent:r.isContributedContent,isEdit:s,labelConfiguration:c,parentEarnedId:n,parentPlacementId:o,showBlogCards:a,tumblrmartAccessories:P.h4(r)?r.blog?.tumblrmartAccessories:void 0,children:[/*#__PURE__*/N.jsx(i.Ay,{blocks:r.content,isEdit:!0,isOriginalPost:!1,layouts:r.layout,postId:P.h4(r)?r.post.id:void 0,postingBlog:P.h4(r)?r.blog:void 0}),0===l&&e]},p)})})},12289:(e,t,s)=>{"use strict";s.d(t,{D9:()=>h,Ez:()=>u,Tv:()=>g,Zw:()=>d,_p:()=>v,dq:()=>b,eG:()=>c,k4:()=>p,ng:()=>x,qF:()=>m});var i=s(12044),n=s(79708),o=s(36665),a=s(66910),r=s(37629),l=s(83322);let d=({searchMode:e,postType:t,param1:s}={})=>{if(e&&t)return{searchMode:e,postType:t};let i=e,n=t;return s&&((0,r.fS)(s)?i=s:(0,a.XP)(s)&&(n=s)),{searchMode:i,postType:n}},c=/*#__PURE__*/(0,o.createContext)({}),h=()=>(0,o.useContext)(c),p=({response:e})=>"posts"in e?e.posts:"timeline"in e?e.timeline.elements:[],u=e=>(0,l.zA)(e)&&!(e.canBlaze||e.canManageBlaze),m=({response:e})=>"links"in e?e.links?.next:"timeline"in e&&"links"in e.timeline?e.timeline.links?.next:void 0,g=(e,t={})=>{let{peeprBlogname:s}=e,{peeprFilterParams:o}=t,a={postType:o?.peeprSelectedPostType,searchMode:o?.peeprSearchMode};return(0,n.JG)(o)&&o.peeprSearchTerm?(0,i.xu)(s,{searchTerm:o.peeprSearchTerm,...a}):(0,n.L4)(o)&&o.peeprTag?(0,i.xu)(s,{tag:o.peeprTag,...a}):(0,i.xu)(s,a)},b=e=>({removePostOnExtinguish:!1,skipIntroStep:!0,basePage:v[e]}),x={all:["created","pending","approved","rejected","completed","canceled","extinguished"],active:["created","pending","approved"],completed:["completed","extinguished"],unsuccessful:["rejected","canceled"]},v={about:"BlazeDashboardAbout",campaigns:"BlazeDashboardCampaigns",posts:"BlazeDashboardYourPosts"}},63985:(e,t,s)=>{"use strict";s.d(t,{G:()=>i,I:()=>a});let i=/*#__PURE__*/function(e){return e.Text="TEXT",e.Image="IMAGE",e.Sticker="STICKER",e.Post="POSTREF",e}({});var n=/*#__PURE__*/function(e){return e.Active="ACTIVE",e.Inactive="INACTIVE",e}(n||{}),o=/*#__PURE__*/function(e){return e.Conversation="conversation",e.Message="message",e}(o||{});let a=/*#__PURE__*/function(e){return e.GIF="messaging-gif",e.POST_CHROME="post-chrome",e.FAST_POST_CHROME="fast-post-chrome",e}({})},45952:(e,t,s)=>{"use strict";s.d(t,{L:()=>r});var i=s(83322),n=s(94721),o=s(39705),a=s(74460);function r(e,t){let{hydraConfigInstanceId:s,adPlacementConfiguration:r}=this.props.adContext,l=r?.signature,d=e.objectType===i.vt.Post&&!(void 0===e.adm||null===e.adm),c=e.objectType===i.vt.Announcement&&e,h=c?(0,a.M)(c).bannerId:null,p=e.adInstanceCreationTime?Date.now()-e.adInstanceCreationTime:null,{adProviderId:u,adProviderPlacementId:m,adProviderForeignPlacementId:g,adProviderInstanceId:b,adRequestId:x,fillId:v,supplyRequestId:f,supplyProviderId:y,streamSessionId:j,streamGlobalPosition:C,supplyOpportunityInstanceId:w,mediationCandidateId:A,adInstanceId:k,price:N,advertiserId:S,campaignId:I,adGroupId:P,adId:B,creativeId:T,earnedId:R}=e,E=(0,o.q)({hydraConfigInstanceId:s,hydraSignature:l,adProviderId:u,adProviderPlacementId:m,adProviderForeignPlacementId:g,adProviderInstanceId:b,adRequestId:x,fillId:v,supplyRequestId:f,supplyProviderId:y,streamSessionId:j,streamGlobalPosition:C,supplyOpportunityInstanceId:w,mediationCandidateId:A,adInstanceId:k,price:N,isTumblrSponsoredPost:d,adInstanceAge:p,advertiserId:S,campaignId:I,adGroupId:P,adId:B,banner_id:h,creativeId:T,earnedId:R},(e,t)=>null!=t);return t?(0,n.m)(E):E}},74495:(e,t,s)=>{"use strict";s.d(t,{t:()=>i});let i=/*#__PURE__*/function(e){return e.Community="community",e.Hashtag="hashtag",e.Pin="pin",e.Search="search",e}({})},5509:(e,t,s)=>{"use strict";s.d(t,{D5:()=>l,MG:()=>m,Ox:()=>p,R4:()=>a,Vz:()=>u,_B:()=>c,ml:()=>d,tP:()=>r,zm:()=>h});var i=s(66910),n=s(25175),o=s(12673);let a=(e,{blogName:t})=>new o._(e,`/v2/blog/${t}/posts/queue`,{method:"GET",queryParams:{...(0,n.oS)(["timezoneOffset"]),reblog_info:!0}}),r=(e,{blogName:t,id:s,insertAfter:i})=>new o._(e,`/v2/blog/${t}/posts/queue/reorder`,{method:"POST",body:{post_id:s,insert_after:i}}),l=(e,{blogName:t})=>new o._(e,`/v2/blog/${t}/posts/queue/shuffle`,{method:"POST"}),d=(e,{blogName:t,pause:s})=>new o._(e,`/v2/blog/${t}/posts/queue/state`,{method:"POST",body:{paused:s}}),c=(e,{blogUuid:t,postId:s})=>new o._(e,`/v2/blog/${t}/post/edit`,{method:"POST",body:{id:s,state:i.Wu.Queue}}),h=(e,{blogName:t})=>new o._(e,`/v2/blog/${t}/posts/queue/settings`),p=(e,{blogName:t,postFrequency:s,startHour:i,endHour:n})=>new o._(e,`/v2/blog/${t}/posts/queue/settings`,{method:"POST",body:{post_frequency:s,start_hour:i,end_hour:n}}),u=(e,{blogName:t})=>new o._(e,`/v2/blog/${t}/posts/queueplus/settings`),m=(e,{blogName:t,interval:s,perInterval:i,startTime:n,endTime:a})=>new o._(e,`/v2/blog/${t}/posts/queueplus/settings`,{method:"POST",body:{interval:s,per_interval:i,start_time:n,end_time:a}})},70889:(e,t,s)=>{"use strict";s.d(t,{cg:()=>a,nA:()=>o,uv:()=>r});var i=s(75185),n=s(36665);let o=/*#__PURE__*/(0,n.createContext)(null),a=()=>(0,n.useContext)(o),r=(0,i.A)((e,t,s,i,n)=>({numberOfColumns:e,columnSpacing:t,columnWidth:s,elementSpacing:i,elementContainerClass:n}))},55474:(e,t,s)=>{"use strict";s.d(t,{N:()=>o,u:()=>n});var i=s(36665);let n=/*#__PURE__*/(0,i.createContext)(null),o=()=>(0,i.useContext)(n)},74460:(e,t,s)=>{"use strict";s.d(t,{M:()=>i});let i=e=>{let{resources:t}=e;return t[0]}},15899:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var i=s(66910);let n=e=>e.find(e=>(0,i.TW)(e))||e.find(e=>(0,i.HT)(e))},69248:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(55321);let n=()=>{let[e]=(0,i.ok)(),t=e.get("source");return"embed"!==t&&"blognetwork"!==t?null:e.get("action")}},99937:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s(36665),n=s(33770);let o=({outsideEvents:e,onOutsideEvent:t})=>{let s=(0,i.useRef)(null),o=(0,i.useContext)(n.L),a=(0,i.useCallback)(({target:e})=>{s.current?.contains(e)||t()},[t]),{click:r,scroll:l}=e;return(0,i.useEffect)(()=>{if(o)return r&&o.addEventListener("click",a,!1),l&&o.addEventListener("scroll",a,!1),()=>{o.removeEventListener("click",a,!1),o.removeEventListener("scroll",a,!1)}},[o,a,r,l]),s}},3151:(e,t,s)=>{"use strict";s.d(t,{NP:()=>l,Tl:()=>r,pX:()=>a});var i=s(68484);let n="igniteData",o=()=>{let e=i.A.getItem(n);return e?JSON.parse(e):null},a=(e,t)=>{let s=o();return s?.[e]?.[t]??null},r=(e,t)=>{let s=o();i.A.setItem(n,JSON.stringify({...s,[e]:t}))},l=e=>{let t=o();t&&(delete t[e],Object.keys(t).length?i.A.setItem(n,JSON.stringify(t)):i.A.removeItem(n))}},60298:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var i=s(66910);let n=(e=[])=>e.find(e=>e.type===i.vV.Cta)},44724:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=({postUrl:e,blog:t,community:s,authorBlog:i})=>s&&i?{blog:i,permalinkUrl:e}:{blog:t,permalinkUrl:e}},65392:(e,t,s)=>{"use strict";function i(e,t){let s=Math.ceil(t-e),i=s<0?-1:1;return Array(Math.abs(s)).fill(0).map((t,s)=>e+s*i)}s.d(t,{A:()=>i})},65785:(e,t,s)=>{"use strict";s.d(t,{$D:()=>o,no:()=>a,yR:()=>r});var i=s(91514),n=s(27201);let o=(e,t=!1)=>void 0!==e.media&&(t||(0,n.A)(e.media?.url)),a=e=>e?.provider===i.Nw.Instagram,r=(e,t=!1)=>!o(e,t)&&void 0!==e.embedIframe&&void 0!==e.provider}}]);
</script>

</body>
</html>
