<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>497-0974d194.html</title>
</head>
<body>

<script>
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1ee3646c-4cad-462d-978d-aad457508aaa",e._sentryDebugIdIdentifier="sentry-dbid-1ee3646c-4cad-462d-978d-aad457508aaa")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@ce094590bd2291e3264b21d2f92bffc273e4a131"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[497],{20562:(e,t,o)=>{o.d(t,{A:()=>n});let n={header:"KWFLb",headerText:"a3_ie",headerLink:"Y7QU6",cover:"EAugG",content:"Qb2zX",isShowingCover:"vS0xc",coverHeader:"UF4Vo",coverAuthorNotice:"MIDUS",coverButton:"bkPoT",coverContent:"UypGJ",communityLabel:"dR2LL",loader:"ynaAM",communityLabelFlag:"osMQ1",communityLabelHeader:"H71ba",communityLabelDetail:"Cc6H4"}},1921:(e,t,o)=>{o.d(t,{A:()=>n});let n=(0,o(20928).Kk)("copy",{size:{width:24,height:23}})},20162:(e,t,o)=>{o.d(t,{A:()=>n});let n=(0,o(20928).Kk)("edit",{size:{width:24,height:24}})},63906:(e,t,o)=>{o.d(t,{g:()=>es,J:()=>el});var n=o(74059),s=/*#__PURE__*/o.n(n),i=o(94483),l=o(11100),a=o(90937),r=o(1226),u=o(23390),c=o(28230),m=o(35641),d=o(28009),p=o(16311),b=o(51660),h=o(36665),g=o(83092),y=o(4613),f=o(36388),k=o(20562),A=o(60397);let v=({categories:e,hasCommunityLabel:t})=>{let{_c:o}=(0,y.Us)(),n=(0,h.useMemo)(()=>{let t=o("Separator of list of content warnings",", "),n=Object.entries(e).filter(([,e])=>(0,f.nI)(e)).map(([e])=>(0,f.p9)(e,o).label.toLocaleLowerCase()).join(t);return(0,g.Z)(n)},[o,e]);return/*#__PURE__*/(0,A.jsxs)("div",{className:s()(k.A.communityLabel),children:[t&&/*#__PURE__*/(0,A.jsx)("div",{className:s()(k.A.communityLabelHeader),children:o("Content Label in post menu for labelled post","Content Label: Mature")}),/*#__PURE__*/(0,A.jsx)("div",{className:s()(k.A.communityLabelDetail),children:0!==n.length&&n})]})};var C=o(48551),x=o(82857),w=o(56356),I=o(9119),N=o(16067);let P={menuItemWraper:"KkT0i"};function j({renderMenuItem:e}){let{_c:t}=(0,y.Us)(),[o,n]=(0,h.useState)(!1),{post:s}=(0,w.gY)(),{id:i}=s,{community:l}=s,a=l?.name,{mutate:r}=(0,x.JV)(),{onRemoveTimelineObject:u}=(0,I._X)(),c=(0,h.useRef)(null);if(a)return/*#__PURE__*/(0,A.jsxs)(A.Fragment,{children:[/*#__PURE__*/(0,A.jsx)("div",{className:P.menuItemWraper,ref:c,tabIndex:-1,children:e?.({onClick:()=>n(!0)})}),/*#__PURE__*/(0,A.jsx)(N.g,{educationBannerText:t("[Communities] Educational banner text in post moderation modal","This post will be removed from this community and the author will be notified of the reason."),finalFocus:c,isOpen:o,modalTitle:t("[Communities] Title for post moderation modal","Remove post"),onSubmit:({note:e,reason:t,successFn:o})=>{r({postId:i.toString(),communityName:a,reason:t,note:e},{onSuccess:()=>{u?.(I.iN(s)),o()}})},setIsOpen:n,submitButtonLabel:t("[Communities] Button that submits form in the moderation modal","Remove post")})]})}var L=o(28304),S=o(53986),_=o(18026),D=o(33410),R=o(64934),E=o(49702),U=o(84236),F=o(99722),O=o(94048),M=o(89972),z=o(90381),T=o(66910),W=o(66869),B=o(25183),$=o(56281),V=o(47794),Y=o(47363),H=o(26238),G=o(6865),Q=o(19869),q=o(79146),K=o(99717),J=o(84007),X=o(56040),Z=/*#__PURE__*/o.n(X),ee=o(92240),et=o(4211),eo=o(58162),en=o(4488);let es=/*#__PURE__*/function(e){return e[e.Unclicked=0]="Unclicked",e[e.Success=1]="Success",e[e.Failure=2]="Failure",e}({}),ei=({pinPostCancel:e,pinPostConfirm:t})=>{let{_t:o}=(0,y.Us)();return/*#__PURE__*/(0,A.jsx)(u.A,{glassIsClickable:!1,onGlassClick:e,children:/*#__PURE__*/(0,A.jsx)(m.m,{body:o("This will appear at the top of your blog and replace any previous pinned post. Are you sure?"),buttons:[{text:o("Nevermind"),buttonStyle:m.s.Neutral,onClick:e},{text:o("Yes"),buttonStyle:m.s.Confirm,onClick:t}],title:o("Pin this post")})})},el=({contentLabelBlogIdentifier:e,date:t,editablePost:o,followed:n=!1,isPostPublishedOrPrivate:u,isReblogHeader:m,parentPostId:g,postUrl:k,...x})=>{let[N,P]=(0,h.useState)(!0),[X,el]=(0,h.useState)(es.Unclicked),[ea,er]=(0,h.useState)(es.Unclicked),[eu,ec]=(0,h.useState)(!1),[em,ed]=(0,h.useState)(!1),[ep,eb]=(0,h.useState)(!1),[eh,eg]=(0,h.useState)(!1),[ey,ef]=(0,h.useState)("idle"),[ek,eA]=(0,h.useState)(!1),ev=(0,h.useRef)(null),eC=(0,h.useRef)(),ex=(0,h.useRef)(n),ew=(0,h.useRef)(!1),{_c:eI,_getRelativeDateString:eN,_t:eP,apiFetch:ej,getCookie:eL,isLoggedIn:eS,wwwBaseUrl:e_}=(0,y.Us)(),{logEvent:eD}=(0,B.Ul)(),{pathname:eR}=(0,S.zy)(),{post:eE,presentationStyle:eU,setCommunityLabel:eF}=(0,w.gY)(),{onPin:eO,onRemoveTimelineObject:eM}=(0,I._X)(),{toggleToast:ez}=(0,$.Y)(),{data:eT}=(0,L.Py)(),eW=!m&&!!eE.canDelete&&eU.showsDeleteButton,eB=m?"reblog_header_overflow_menu":"post_header_overflow_menu",e$=(0,h.useCallback)(()=>{eO(eE.id,!0),eD({eventName:O.R.PinPostConfirm}),(0,W.Ay)(ej).pinPost(eE.blogName,eE.id).fetch().catch(()=>eO(eE.id,!1))},[ej,eD,eO,eE.blogName,eE.id]),eV=(0,h.useCallback)(()=>{eO(eE.id,!1),eD({eventName:O.R.UnpinPost}),(0,W.Ay)(ej).unpinPost(eE.blogName,eE.id).fetch().catch(()=>eO(eE.id,!0))},[ej,eD,eO,eE.blogName,eE.id]),eY=(0,h.useCallback)(()=>{eA(!0),eD({eventName:O.R.PinPost})},[eD]),eH=(0,h.useCallback)(()=>{eA(!1),eD({eventName:O.R.PinPostCancel})},[eD]),eG=(0,h.useCallback)(()=>{eA(!1),e$()},[e$]),eQ=(0,h.useCallback)(()=>{eb(!1),eg(!0),(0,W.Ay)(ej).unsubscribeToPost(eE.blogName,eE.id).fetch().catch(()=>eb(!0)).finally(()=>eg(!1))},[ej,eE.blogName,eE.id]),eq=(0,h.useCallback)(e=>{eD({eventName:e,eventDetails:{context:"meatballs",placement_id:eE.placementId,source:eB,type:"post"}})},[eB,eD,eE.placementId]),eK=(0,h.useCallback)(()=>{eq(O.R.PostActivitySubscribe),eb(!0),eg(!0),(0,W.Ay)(ej).subscribeToPost(eE.blogName,eE.id).fetch().catch(()=>eb(!1)).finally(()=>eg(!1))},[ej,eq,eE.blogName,eE.id]),eJ=(0,h.useCallback)(()=>{clearTimeout(eC.current),eC.current=setTimeout(()=>{er(es.Unclicked),el(es.Unclicked)},3e3)},[]),eX=(0,h.useCallback)(()=>{let e=`${F.Qc}${eR}`;(0,V.D)(e).then(()=>{el(es.Success),eq(O.R.CopyPostLink),eJ()}).catch(()=>{el(es.Failure),eJ()})},[eq,eR,eJ]),eZ=(0,h.useCallback)(()=>eE.state===T.Wu.Private||eE.community?eE.postUrl:(0,q.M)(eE.blogName,eE.id,eE.slug),[eE.blogName,eE.community,eE.id,eE.postUrl,eE.slug,eE.state]),e0=(0,h.useCallback)(()=>{let e=eZ();eu&&(0,V.D)(e).then(()=>{er(es.Success),eq(O.R.CopyPostLink),eJ()}).catch(()=>{er(es.Failure),eJ()})},[eZ,eu,eq,eJ]),e1=(0,h.useCallback)((e,t={})=>{m&&g?eM({objectType:_.v.Post,placementId:void 0,id:g},t):eE.id&&eM({id:eE.id,objectType:_.v.Post,placementId:eE.placementId},t)},[m,eM,g,eE.id,eE.placementId]),e6=(0,h.useCallback)(()=>ez((0,J.X)((0,G.vf)(eP)),"error"),[eP,ez]),e2=()=>ed(e=>!e),e4=(0,h.useCallback)(async()=>{let t=String(e)||"",o=String(eE.id)||"";ef("pending"),eq(O.R.SuggestCommunityLabelClick);try{await ej("/v2/tos/report",{method:"POST",body:{post_id:o,tumblelog:t,violation:"community-label"}}),ez(eI("Feedback when the report violation is successful","Thanks for the suggestion! Way to look out for yourself and others on Tumblr."),"success"),ef("success"),eT?.user?.communityLabelVisibilitySetting===R.ZM&&e1(),eF&&eF(!0)}catch{e6(),ef("failure")}},[eI,ej,e,eq,eE.id,e1,eF,e6,ez,eT?.user?.communityLabelVisibilitySetting]),e9=(0,h.useCallback)(()=>eD({eventName:O.R.PostMeatballsMenuOpened,eventDetails:{canDelete:eW,source:eB}}),[eW,eB,eD]),e3=(0,h.useCallback)(()=>{ec(!1),!0===ew.current&&e1(null,{wasBlogUnfollowed:!0})},[e1]),e8=(0,h.useCallback)(async()=>{eE.blog?.uuid&&!eU.usesInboxAttribution&&(eg(!0),(0,W.Ay)(ej).getNotes(eE.blog.uuid,{id:eE.id,mode:z.j.Conversation}).fetch().then(({response:{canSubscribe:e,isSubscribed:t}})=>{P(!!e),eb(!!t)}).catch(Q.A).finally(()=>eg(!1))),ec(!0)},[ej,eE.blog?.uuid,eE.id,eU.usesInboxAttribution]),e7=(0,h.useCallback)(e=>{let{blogUrl:h,blogName:g}=x,y=[],w=eE.id,I=eE.parentPostUrl&&K.p(eE.parentPostUrl)?.pathname,P=!!t&&(u||eU.usesInboxAttribution),L=eE.communityLabels?.hasCommunityLabel&&!eU.usesInboxAttribution,S=!u&&eU.showsPreviewPostLink,_=!m&&eE.canPin&&eU.showsEditButton,R=!!I&&!m,F=eS&&!e&&n&&!!h,M=!m&&!!eE.dismissal,z=N&&!m&&!eU.usesInboxAttribution,T=!m&&eE.canMute,W=!!o&&!m&&eE.canEdit&&eU.showsEditButton,B=eS&&!e&&!eU.usesInboxAttribution,$=eS&&!e&&!(eE.isSubmission&&eE.isAnonymous),V=!m&&eE.canModerate,Y=eS&&!e&&!m;if(P&&y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,en.A.thin,en.A.timestamp,{[en.A.hasDivider]:!L}),linkTo:k,role:"menuitem",tabIndex:-1,title:eI("Hover text for timestamp that links to a blog permalink. %1$s is the blog's domain","View post on %1$s",[(0,i.S)(k)]),children:/*#__PURE__*/(0,A.jsx)("span",{className:en.A.timestampDate,children:eN(t,U.m.Simple)})},"timestamp")),L){let{categories:e}=(0,f.fB)(eE.communityLabels);y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,en.A.thin,en.A.communityLabel,en.A.hasDivider),isWrappingButton:!0,role:"menuitem",children:/*#__PURE__*/(0,A.jsx)(v,{categories:e,hasCommunityLabel:eE.communityLabels?.hasCommunityLabel})},"community-label"))}if(S&&y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,en.A.thin),krakenEventName:O.R.PostMenuViewPreviewPost,linkTo:k,role:"menuitem",children:eI("Link text for previewing an unpublished post","Preview post")},"preview-post")),_&&y.push(/*#__PURE__*/(0,A.jsxs)(a.A,{className:s()(en.A.meatballItem,en.A.thin),keepDropdownOpenAfterClick:!0,onClick:eE.isPinned?eV:eY,role:"menuitem",children:[eE.isPinned?eI("Link text for unpinning a post","Unpin"):eI("Link text for pinning a post","Pin"),ek&&/*#__PURE__*/(0,A.jsx)(ei,{pinPostCancel:eH,pinPostConfirm:eG})]},"pin-post")),u){let e={[es.Success]:eI("Success message after copying a link","Link copied!"),[es.Failure]:eI("Error message when trying to copy a link","Failed to copy link."),[es.Unclicked]:eI("Menu item to copy the link to a post to your clipboard","Copy link")},t={[es.Success]:en.A.success,[es.Failure]:en.A.failure,[es.Unclicked]:""};eU.hasCustomPostLink&&y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,t[X]),keepDropdownOpenAfterClick:!0,onClick:eX,children:e[X]},"copyCustomLink"));let o=e[ea];ea===es.Unclicked&&eU.hasCustomPostLink&&(o=eI("Menu item to copy the link to a post to your clipboard","Copy link to post")),y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,t[ea]),keepDropdownOpenAfterClick:!0,onClick:e0,role:"menuitem",children:o},"copyLink"))}if(R){let e=!!eE.rebloggedFromId&&!!eE.rebloggedRootId&&eE.rebloggedFromId.toString()===eE.rebloggedRootId.toString();y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:en.A.meatballItem,krakenEventName:O.R.PostMenuViewPreviousReblog,linkTo:I,role:"menuitem",children:e?eI("Menu item to show the original post which this reblog was created from","View original post"):eI("Menu item to show the reblogged post which this reblog was created from","View previous reblog")},"show-parent"))}if(F&&y.push(/*#__PURE__*/(0,A.jsx)(a.A,{isWrappingButton:!0,keepDropdownOpenAfterClick:!0,role:"menuitem",children:/*#__PURE__*/(0,A.jsx)(r.A,{blogName:g,blogUrl:h,className:en.A.meatballItem,extraFollowParams:{placementId:eE.placementId},following:!0,isPostHeader:!0,children:()=>eI("Menu item to unfollow a blog. %1$s is the blog name.","Unfollow @%1$s",[g])})},"unfollow")),M&&eE.dismissal?.options.forEach(e=>{let t,o;let n=s()(en.A.meatballItem,{[en.A.red]:e.destructive}),{type:i,href:l}=e.link;switch(i){case D.J.Action:t=H.A(e.link,ej,e1,e6);break;case D.J.Web:o=l;break;default:return}y.push(/*#__PURE__*/A.jsx(a.A,{className:n,linkTo:o,onClick:t,role:"menuitem",children:e.text},`dismissal-${e.text}`))}),z){let e=ep?eI("Contextual action to unsubscribe from updates","Unfollow post"):eI("Contextual action to subscribe to updates","Follow post");y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:en.A.meatballItem,isWrappingButton:!0,keepDropdownOpenAfterClick:!0,role:"menuitem",children:eh?/*#__PURE__*/(0,A.jsx)("div",{className:en.A.loader,children:/*#__PURE__*/(0,A.jsx)(c.A,{color:Z().paletteGray65,small:!0})}):/*#__PURE__*/(0,A.jsx)(l.A,{onClick:ep?eQ:eK,children:e})},"subscribe"))}if(T&&y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem),eventSource:eB,isWrappingButton:!0,keepDropdownOpenAfterClick:!0,krakenEventName:eE.muted?O.R.Unmute:O.R.Mute,role:"menuitem",children:eE.muted?/*#__PURE__*/(0,A.jsx)(b.P,{}):/*#__PURE__*/(0,A.jsx)(p.Y,{allowTemporaryMute:!0})},"mute")),W){let e=E.ao.includes(eL(E.Z_.NATIVE_APP_WEBVIEW));y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,{[en.A.spaceRest]:!eE.shouldOpenInLegacy}),isWrappingButton:!0,keepDropdownOpenAfterClick:!e,role:"menuitem",children:/*#__PURE__*/(0,A.jsx)(d.A,{className:s()(en.A.meatballItemReset,en.A.expand),editablePost:o,isTextButton:!0,shouldAlwaysOpenInLegacy:eE.shouldOpenInLegacy})},"edit"))}if(eW&&y.push(/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,en.A.red),eventSource:eB,keepDropdownOpenAfterClick:!0,krakenEventName:O.R.DeletePost,onClick:e2,role:"menuitem",children:/*#__PURE__*/(0,A.jsx)(et.C,{isOpen:em,toggleIsOpen:e2,children:eI("Link text to open delete dialog","Delete")})},"delete")),V&&y.push(/*#__PURE__*/(0,A.jsx)(A.Fragment,{children:/*#__PURE__*/(0,A.jsx)(j,{renderMenuItem:e=>/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,en.A.red),eventSource:eB,keepDropdownOpenAfterClick:!0,krakenEventName:O.R.CommunitiesModeratePost,role:"menuitem",...e,children:eI("Link text to open moderation dialog to remove post from community","Moderate post")})})})),B){let e=["idle","failure"].includes(ey);y.push(/*#__PURE__*/(0,A.jsxs)(a.A,{className:en.A.meatballItem,isDisabled:!1===e,keepDropdownOpenAfterClick:!0,onClick:e4,role:"menuitem",children:[e&&eI("Menu item for suggesting a content label","Suggest Content Label"),"pending"===ey&&/*#__PURE__*/(0,A.jsx)("div",{className:en.A.loader,children:/*#__PURE__*/(0,A.jsx)(c.A,{color:Z().paletteBlack,small:!0})}),"success"===ey&&eI("Menu item to alert that the content label was already suggested","Content Label suggested")]},"suggest-label"))}if($){let e;let t=eE.askingName||eE.postAuthor;if(eE.community&&eE.authorBlog){if(m)e=(0,eo.v)(g,k,e_,{postId:w});else{let t=eE.blogName,o=eE.authorBlog.name;e=(0,eo.v)(o,k,e_,{postId:w,recipientName:t})}}else e=eU.usesInboxAttribution&&t?(0,eo.v)(t,k,e_,{postId:w,recipientName:eE.blogName},"message"):(0,eo.v)(eE.blogName,k,e_,{postId:w});y.push(/*#__PURE__*/(0,A.jsx)(a.A,{alwaysExternalLink:!0,className:s()(en.A.meatballItem,en.A.red),eventSource:eB,krakenEventName:O.R.BlogReportClick,linkTo:e,role:"menuitem",children:eU.usesInboxAttribution?eE.isSubmission?eI("Menu item to report a received submission","Report submission"):eI("Menu item to report a received ask or private answer","Report message"):eI("Menu item to report a post","Report post")},"report"))}return Y&&y.push(/*#__PURE__*/(0,A.jsx)(C.C,{blogName:g,renderMenuItem:e=>/*#__PURE__*/(0,A.jsx)(a.A,{className:s()(en.A.meatballItem,en.A.red),eventSource:eB,keepDropdownOpenAfterClick:!0,role:"menuitem",...e})},"remove-member")),y},[eI,eN,ej,x,eW,N,eX,X,e0,ea,t,o,eB,n,eL,eS,em,u,m,eh,ep,eH,eY,eG,eE,k,eU,e1,e4,ey,e6,ek,eK,eV,eQ,e_]);return(0,h.useEffect)(()=>{ex.current&&!n&&(ew.current=!0)},[n]),/*#__PURE__*/(0,A.jsx)(ee.A,{...(0,ee.n)(x),blogName:eE.isAnonymous?Y.ny:x.blogName,eventSource:eB,forwardedRef:ev,onBlock:e1,onOpen:e9,onPopoverClose:e3,onPopoverOpen:e8,popoverBoundary:M.Mh.ScrollParent,postId:eE.id,renderItems:e7,showOverflowY:!0})}},84262:(e,t,o)=>{o.d(t,{v:()=>r});var n=o(94048),s=o(44637),i=o(4613),l=o(25183),a=o(56356);let r=()=>{let{isLoggedIn:e}=(0,i.Us)(),{logEvent:t}=(0,l.Ul)(),{post:{id:o,placementId:r,earnedId:u}}=(0,a.Zm)();return(i,l)=>{l&&t({eventName:l,eventDetails:{post_id:o,placement_id:r,is_logged_in:e,type:i}}),t({eventName:n.R.ShareDestination,eventDetails:{placement_id:r,earned_id:u,is_logged_in:e,type:"post",dest:i===s.Sx.Copy?"copyPermalink":i}})}}},28009:(e,t,o)=>{o.d(t,{A:()=>N});var n=o(88346),s=/*#__PURE__*/o.n(n),i=o(11100),l=o(20162),a=o(83087),r=o(41186),u=o(38004),c=o(55321),m=o(60397);let d=({action:e,children:t,...o})=>{let n=(0,u.X)(e);return/*#__PURE__*/(0,m.jsx)(c.N_,{...o,...n,children:t})};var p=o(12044),b=o(36665),h=o(77230),g=o(66910),y=o(72580),f=o(9119),k=o(54934),A=o(91988),v=o(56040),C=/*#__PURE__*/o.n(v);let x=(e,t,o)=>{switch(e){case g.Wu.Published:case g.Wu.Private:if(t===h.ry.Published||t===h.ry.Private||t===h.ry.Now)return o;break;case g.Wu.Draft:return t===h.ry.Draft||!t;case g.Wu.Queued:return(t===h.ry.Queue||t===h.ry.Scheduled)&&o}return!1},w=(e,t,o)=>{if(x(e,t,o)||!o||!t||!e)return!1;switch(e){case g.Wu.Ask:case g.Wu.Submission:return!0;case g.Wu.Private:case g.Wu.Published:break;case g.Wu.Draft:return t!==h.ry.Draft;case g.Wu.Queue:case g.Wu.Queued:return t!==h.ry.Queue&&t!==h.ry.Scheduled}return!1};class I extends b.Component{constructor(...e){super(...e),s()(this,"setLegacyFormCloseHandler",()=>{let{addOnCloseModalRouteHandler:e}=this.props.modalRouteContext;this.removeOnModalCloseListener=e(this.onLegacyFormClose)}),s()(this,"setFormCloseHandler",()=>{let{addOnCloseModalRouteHandler:e}=this.props.modalRouteContext;this.removeOnModalCloseListener=e(this.onFormClose)}),s()(this,"refreshPostInTimeline",()=>{let{editablePost:{id:e,blog:t},timelineContext:o}=this.props;return(0,y.K)(this.props.appContext.apiFetchWithSchema,{postId:e,blogIdentifier:t.name}).fetch().then(e=>{let t=e.response.posts[0];t&&o?.onEditTimelineObject?.(f.iN(t),e=>Object.assign(e,t))})}),s()(this,"onFormClose",({isModalSuccess:e,postStatus:t})=>{let{editablePost:o,timelineContext:n}=this.props,{state:s}=o;return(this.removeOnModalCloseListener?.(),x(s,t,!!e))?this.refreshPostInTimeline():(w(s,t,!!e)&&n?.onRemoveTimelineObject?.(f.iN(o)),Promise.resolve())}),s()(this,"onLegacyFormClose",({isModalSuccess:e,legacyPostFormState:t})=>{let{editablePost:o,timelineContext:n}=this.props,{state:s}=o;return(this.removeOnModalCloseListener?.(),e&&t&&t===s)?this.refreshPostInTimeline():(e&&t&&t!==s&&n?.onRemoveTimelineObject?.(f.iN(o)),Promise.resolve())})}componentWillUnmount(){this.removeOnModalCloseListener?.()}render(){return/*#__PURE__*/(0,m.jsx)(a.Ay,{children:({isMobile:e})=>this.getButton(e)})}getButton(e){let{className:t,disabled:o,editablePost:n,shouldAlwaysOpenInLegacy:s,appContext:{_t:i}}=this.props;return s?e?this.getLegacyAnchor():this.getLegacyIframeButton():o?/*#__PURE__*/(0,m.jsx)(m.Fragment,{children:this.getLinkDisplay()}):/*#__PURE__*/(0,m.jsx)(d,{action:"edit-button","aria-label":i("Edit"),className:t,onClick:this.setFormCloseHandler,to:(0,p.x1)({blogName:n.blog.name,postId:n.id?.toString()},(0,A.A)({editablePost:n})),children:this.getLinkDisplay()})}getLinkDisplay(){let{isTextButton:e}=this.props,{_t:t}=this.props.appContext;return e?t("Edit"):this.getIcon()}getIcon(){let{disabled:e}=this.props;return/*#__PURE__*/(0,m.jsx)(l.A,{colors:{primary:e?C().paletteGray40:C().paletteGray65},size:{width:21,height:21}})}getLegacyIframeButton(){let{disabled:e,editablePost:t}=this.props,{_t:o}=this.props.appContext;return e?/*#__PURE__*/(0,m.jsx)(r.G,{action:"legacy-iframe-edit-button",disabled:e,label:o("Edit"),children:this.getLinkDisplay()}):/*#__PURE__*/(0,m.jsx)(d,{action:"legacy-iframe-edit-button",to:(0,p.x1)({blogName:t.blog.name,postId:t.id?.toString()}),children:/*#__PURE__*/(0,m.jsx)(i.A,{label:o("Edit"),onClick:this.setLegacyFormCloseHandler,children:this.getLinkDisplay()})})}getLegacyAnchor(){let{disabled:e}=this.props,{_t:t,wwwBaseUrl:o}=this.props.appContext,n=encodeURIComponent(`${o}/dashboard?restore=1`);return e?/*#__PURE__*/(0,m.jsx)(r.G,{action:"legacy-anchor-edit-button",disabled:e,label:t("Edit"),children:this.getLinkDisplay()}):/*#__PURE__*/(0,m.jsx)("a",{href:`${o}/edit/${this.props.editablePost.id}?redirect_to=${n}&avoid_redirect=1`,role:"button",tabIndex:-1,children:/*#__PURE__*/(0,m.jsx)(r.G,{action:"legacy-anchor-edit-button",label:t("Edit"),children:this.getLinkDisplay()})})}}s()(I,"defaultProps",{shouldAlwaysOpenInLegacy:!0});let N=(0,k.bb)(I,{appContext:!0,timelineContext:!0,modalRouteContext:!0})},51660:(e,t,o)=>{o.d(t,{P:()=>d});var n=o(11100),s=o(76827),i=o(36665),l=o(83322),a=o(4613),r=o(56356),u=o(9119),c=o(56281),m=o(60397);let d=({onClick:e})=>{let{_c:t,_t:o}=(0,a.Us)(),{onEditTimelineObject:d}=(0,u._X)(),{post:{id:p,muted:b,blogName:h},post:g}=(0,r.gY)(),{toggleToast:y}=(0,c.Y)(),{mutateAsync:f}=(0,s.d)(),k=t("Button for user to unmute notifications about a post.","Unmute notifications"),A=(0,i.useCallback)(()=>{f({id:p,muted:!!b,blogName:h}).then(()=>{y(t("Confirmation message shown when user unmutes a post.","Done! Push and activity notifications are back on for this post."),"success"),d((0,u.iN)(g),e=>{(0,l.zA)(e)&&(e.muted=!b)}),e?.()}).catch(()=>{y(o("Something went wrong. Please try again."),"error")})},[t,o,p,b,h,f,g,d,y,e]);return/*#__PURE__*/(0,m.jsx)(n.A,{label:k,onClick:A,children:k})}},41186:(e,t,o)=>{o.d(t,{G:()=>l});var n=o(11100),s=o(38004),i=o(60397);let l=({action:e,children:t,...o})=>{let l=(0,s.X)(e);return/*#__PURE__*/(0,i.jsx)(n.A,{...o,...l,children:t})}},82857:(e,t,o)=>{o.d(t,{JV:()=>N,V4:()=>I,d$:()=>P,o7:()=>C,rN:()=>k});var n=o(49315),s=o(75170),i=o(90789),l=o(90938),a=o(4613),r=o(56281),u=o(57805),c=o(373);let m=c.z.union([c.z.literal("spam"),c.z.literal("off_topic"),c.z.literal("community_guidelines"),c.z.literal("inappropriate_behavior"),c.z.literal("tumblr_guidelines"),c.z.literal("other")]);c.z.union([c.z.literal("post"),c.z.literal("comment"),c.z.literal("user")]);let d=c.z.object({content:c.z.any(),layout:c.z.any(),blog:l.pi,timestamp:c.z.number(),replyId:c.z.string(),replyCount:c.z.number(),type:c.z.literal("reply"),isOriginalPoster:c.z.boolean()}),p=c.z.enum(["moderate_post","moderate_reply","make_moderator","make_admin","revoke_privileges","remove_member","remove_and_ban_member","restore_post","restore_reply","accept_join_request","decline_join_request"]),b=(0,i.h)(c.z.object({ts:c.z.number(),post:c.z.any().nullable().optional(),moderator:l.pi.nullable().optional(),reason:m,note:c.z.string().nullable().optional()})),h=(0,i.h)(c.z.object({reply:d,ts:c.z.number(),moderator:l.pi.nullable().optional(),reason:m,note:c.z.string().nullable().optional()})),g=(0,i.h)(c.z.object({action:p,ts:c.z.number(),moderator:l.pi.nullable().optional(),reason:m,note:c.z.string().nullable().optional(),blog:l.pi}));async function y(e,t,o){let{response:n}=await e(`/v2/communities/${t}/moderation/posts/${o}`,b);return n}let f=(e,t,o)=>({queryKey:["moderated-post",o],queryFn:()=>y(e,t,o),refetchOnWindowFocus:!1}),k=(e,t)=>{let{apiFetchWithSchema:o}=(0,a.Us)();return(0,n.I)(f(o,e,t))};async function A(e,t,o,n){let{response:s}=await e(`/v2/communities/${t}/moderation/posts/${o}/replies/${n}`,h);return s}let v=(e,t,o,n)=>({queryKey:["moderated-comment",o,n],queryFn:()=>A(e,t,o,n),retry:!1,refetchOnWindowFocus:!1}),C=(e,t,o)=>{let{apiFetchWithSchema:s}=(0,a.Us)();return(0,n.I)(v(s,e,t,o))};async function x(e,t,o){let{response:n}=await e(`/v2/communities/${t}/moderation/members/${o}`,g);return n}let w=(e,t,o)=>({queryKey:["moderated-member",t,o],queryFn:()=>x(e,t,o),retry:!1,refetchOnWindowFocus:!1}),I=(e,t)=>{let{apiFetchWithSchema:o}=(0,a.Us)();return(0,n.I)(w(o,e,t))},N=()=>{let{_c:e,apiFetch:t}=(0,a.Us)(),{toggleToast:o}=(0,r.Y)();return(0,s.n)({mutationFn:({postId:e,communityName:o,reason:n,note:s})=>t(`/v2/communities/${o}/moderation/posts/${e}`,{method:"DELETE",body:{reason:n,note:s}}),onSuccess:async()=>{o("Post removed from community.","success")},onError:t=>{let n=e("Error message shown when moderating post failed","Failed to remove post. Please try again later.");t instanceof u.A?o(t.detailedErrors[0].detail||n,"error"):o(n,"error")}})},P=()=>{let{_c:e,apiFetch:t}=(0,a.Us)(),{toggleToast:o}=(0,r.Y)();return(0,s.n)({mutationFn:({postId:e,replyId:o,communityName:n,reason:s,note:i})=>t(`/v2/communities/${n}/moderation/posts/${e}/replies/${o}`,{method:"DELETE",body:{reason:s,note:i}}),onSuccess:async()=>{o(e("Message for when moderating a comment was successful","Comment removed from community."),"success")},onError:t=>{let n=e("Error message shown when moderating a comment failed","Failed to remove comment. Please try again later.");t instanceof u.A?o(t.detailedErrors[0].detail||n,"error"):o(n,"error")}})}},33410:(e,t,o)=>{o.d(t,{J:()=>n});let n=/*#__PURE__*/function(e){return e.Action="action",e.Web="web",e.API="api",e}({})},26238:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(94721);function s(e,t,o,s){let{href:i,method:l,bodyParams:a}=e;return()=>t(i,{method:l,body:(0,n.m)(a)}).then(o).catch(s)}},79146:(e,t,o)=>{o.d(t,{M:()=>i});var n=o(79708),s=o(99722);let i=(e,t,o,i="share")=>{let l=(0,n.cm)({peeprBlogname:e,peeprPostId:t?.toString(),peeprPostSlug:o});return`${s.Qc}${l}?source=${i}`}},99717:(e,t,o)=>{o.d(t,{p:()=>s});var n=o(44218);let s=(e,t)=>{try{return new URL(e,t)}catch(e){return(0,n.Cp)(e),null}}}}]);
</script>

</body>
</html>
