!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3ad182ea-6974-48c3-9f00-6861a8c70f1a",e._sentryDebugIdIdentifier="sentry-dbid-3ad182ea-6974-48c3-9f00-6861a8c70f1a")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@ce094590bd2291e3264b21d2f92bffc273e4a131"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[6794],{41475:(e,t,s)=>{s.d(t,{Ay:()=>j,Vb:()=>E,ik:()=>P});var i=s(88346),o=/*#__PURE__*/s.n(i),n=s(4211),r=s(29504),l=s(12044),a=s(88057),h=s(36665),d=s(72571),c=s(49702),u=s(66910),p=s(83322),m=s(66869),f=s(4048),g=s(56356),b=s(9119),v=s(54934),R=s(8121),x=s(31122),C=s(79393),y=s(99805),w=/*#__PURE__*/s.n(y),I=s(87381),T=s(90657),S=s(60397);let P=/*#__PURE__*/function(e){return e.Next="next",e.Previous="previous",e}({}),k={canFastQueue:!1,canFastReblog:!1,canFastQuote:!1},E=-(w().desktopHeaderHeightPx+w().marginBetweenPosts);class A extends h.Component{constructor(e){super(e),o()(this,"apiHelper",(0,m.Ay)(this.props.appContext.apiFetch)),o()(this,"blogs",[]),o()(this,"getBlogs",()=>this.blogs),o()(this,"setDefaultFastBlog",e=>{this.blogs.sort((t,s)=>s.name===e.name?1:t.name===e.name?-1:0)}),o()(this,"renderScrollPositionDependentHotkeys",()=>/*#__PURE__*/(0,S.jsx)(T.Ay,{hotkey:[{key:T.qW.j,command:this.scrollToNextElement},{key:T.qW.k,command:this.scrollToPreviousElement},{key:T.qW.l,command:this.likeVisibleTimelineObject},{key:T.qW.r,command:this.reblogVisibleTimelineObject,modifiers:{[T.lv.Shift]:!0}},{key:T.qW.a,command:this.answerVisibleTimelineObject},{key:T.qW.d,command:this.deleteVisibleTimelineObject},{key:T.qW.q,command:this.queueVisibleTimelineObject,modifiers:{[T.lv.Shift]:!0}}]})),o()(this,"enableFastReblog",()=>!this.state.canFastReblog&&this.setState({canFastReblog:!0})),o()(this,"disableFastReblog",()=>this.state.canFastReblog&&this.setState({canFastReblog:!1})),o()(this,"enableFastQueue",()=>!this.state.canFastQueue&&this.setState({canFastQueue:!0})),o()(this,"disableFastQueue",()=>this.state.canFastQueue&&this.setState({canFastQueue:!1})),o()(this,"enableFastQuote",()=>!this.state.canFastQuote&&this.setState({canFastQuote:!0})),o()(this,"disableFastQuote",()=>this.state.canFastQuote&&this.setState({canFastQuote:!1})),o()(this,"isValidElement",e=>!!e?.ref),o()(this,"scrollToNextElement",()=>{this.scrollToElement(P.Next)}),o()(this,"scrollToPreviousElement",()=>{this.scrollToElement(P.Previous)}),o()(this,"getHeaderHeight",()=>{let{appContext:{getCookie:e},modalOrPeeprShowingContext:{isModalShowing:t},deviceContext:{isMobile:s},bluespaceContext:i}=this.props;return t?0:s?["iphone","android"].includes(e(c.Z_.NATIVE_APP_WEBVIEW))?0:w().mobileHeaderHeight:(0,d.ke)(i)?w().desktopHeaderHeightPx:0}),o()(this,"scrollToElement",e=>{let{scrollContainerContext:t,getPostRefs:s,dashboardContext:{preventTabbedDashboardAppearOnNextScroll:i},deviceContext:{isMobile:o},getScrollerMethods:n}=this.props,r=n?.(),l=this.getHeaderHeight()-1;if(e===P.Previous&&i?.(),r)return r.scrollToElement(e,l);let a=t||document.documentElement,h=[...s()];e===P.Previous&&h.reverse();let d=Math.ceil(a.scrollTop),c=0-(o?w().mobileMarginBetweenPosts:w().postDistanceFromHeader)-l;for(let t of h)if(this.isValidElement(t)){let s=t.ref,i=(0,x.s)(s.offsetParent)?s.offsetParent.offsetTop:0,o=s.offsetTop+i,n=d-o;if(e===P.Next?n<c:n>c){s.focus({preventScroll:!0}),a.scrollTo({left:0,top:o+c});return}}if(e===P.Next){let e=t?t.scrollHeight:document.body.scrollHeight;a.scrollTo({left:0,top:e})}}),o()(this,"scrollToTop",()=>{let e=this.props.getScrollerMethods?.();if(e?.scrollToTop)return e.scrollToTop();(this.props.scrollContainerContext||document.documentElement).scrollTo({behavior:"smooth",left:0,top:0})}),o()(this,"likeVisibleTimelineObject",()=>{let{liked:e,id:t,reblogKey:s,blogName:i,placementId:o,earnedId:n}=this.getVisibleTimelineObject().props.timelineObject;return this.props.like({id:t,liked:e,reblogKey:s,blogName:i,placementId:o,earnedId:n}).catch(e=>{let{toggleToast:t}=this.props.toastContext;e instanceof R.A&&t(e.message,"error")})}),o()(this,"reblogVisibleTimelineObject",()=>this.postVisibleTimelineObject(u.Wu.Published,this.props.appContext._t("Reblogged!"))),o()(this,"queueVisibleTimelineObject",()=>this.postVisibleTimelineObject(u.Wu.Queue,this.props.appContext._t("Queued!"))),o()(this,"postVisibleTimelineObject",(e,t)=>{let s=this.getVisibleTimelineObject().props.timelineObject.placementId,{appContext:{getUserInfo:i,_c:o,logEvent:n},toastContext:{toggleToast:r}}=this.props,l=this.getVisibleTimelineObject().props.timelineObject;if((0,p.zA)(l))return i().then(({name:i})=>{let{blog:o,id:a,reblogKey:h,earnedId:d}=l;return this.apiHelper.postAPost({selectedBlogName:i,placementId:s,logEvent:n,reblogType:f.a.Fast,post:{reblogKey:h,earnedId:d,content:[],state:e,parentTumblelogUuid:o.name,parentPostId:a,id:void 0}}).fetch().then(()=>(this.setState({fastRebloggedPosts:this.state.fastRebloggedPosts.concat([l.id])}),r(t)))}).catch(()=>r(o("Failed to do action","Failed")))}),o()(this,"answerVisibleTimelineObject",()=>{let{modalRouteContext:e,timelineContext:t}=this.props,{props:{timelineObject:s,presentationStyle:i}}=this.getVisibleTimelineObject();(0,p.zA)(s)&&s.canEdit&&i instanceof C.A&&i.usesInboxAttribution&&(this.unregisterModalCloseListener=e.addOnCloseModalRouteHandler(({isModalSuccess:e})=>{this.unregisterModalCloseListener?.(),e&&t.onRemoveTimelineObject((0,b.iN)(s))}),this.setState({currentlyEditingPost:s}))}),o()(this,"deleteVisibleTimelineObject",()=>{let{props:{timelineObject:e}}=this.getVisibleTimelineObject();(0,p.zA)(e)&&e.canDelete&&this.setState({currentlyDeletingPost:e})}),o()(this,"getVisibleTimelineObject",()=>{let{scrollContainerContext:e,getScrollerMethods:t}=this.props,s=t?.(),i=this.props.getPostRefs(),o=Math.ceil((e||document.documentElement).scrollTop),n=s?.getVisibleElement?.();for(let t of i)if(this.isValidElement(t)){let s=t.ref;if(s===n||o-(e?s.offsetTop+(s.offsetParent?.offsetTop||0):s.offsetTop)<s.clientHeight+E)return t}}),o()(this,"unsetCanFastAction",()=>this.setState(k)),this.state={canFastQueue:!1,canFastQuote:!1,canFastReblog:!1,currentlyDeletingPost:void 0,currentlyEditingPost:void 0,fastRebloggedPosts:[],getBlogs:this.getBlogs,setDefaultFastBlog:this.setDefaultFastBlog}}componentDidMount(){return window.addEventListener("blur",this.unsetCanFastAction),this.props.appContext.getUserInfo().then(({blogs:e=[]})=>{this.blogs=[...e]})}componentWillUnmount(){window.removeEventListener("blur",this.unsetCanFastAction)}componentDidUpdate(){this.state.currentlyEditingPost&&(this.props.navigate((0,l.x1)({blogName:this.state.currentlyEditingPost.blogName,postId:this.state.currentlyEditingPost.id.toString()})),this.setState({currentlyEditingPost:void 0}))}render(){let{disabled:e,disableScrollPositionDependentHotKeys:t,children:s}=this.props,{canFastReblog:i,canFastQueue:o,canFastQuote:l}=this.state;return/*#__PURE__*/(0,S.jsxs)(S.Fragment,{children:[!e&&/*#__PURE__*/(0,S.jsxs)(S.Fragment,{children:[!t&&this.renderScrollPositionDependentHotkeys(),i&&/*#__PURE__*/(0,S.jsx)(T.Ay,{hotkey:{key:T.qW.e,command:this.disableFastReblog,firesOnKeyUp:!0}}),o&&/*#__PURE__*/(0,S.jsx)(T.Ay,{hotkey:{key:T.qW.w,command:this.disableFastQueue,firesOnKeyUp:!0}}),l&&/*#__PURE__*/(0,S.jsx)(T.Ay,{hotkey:{key:T.qW.q,command:this.disableFastQuote,modifiers:{[T.lv.Ctrl]:!0},firesOnKeyUp:!0}}),/*#__PURE__*/(0,S.jsx)(T.Ay,{hotkey:[{key:T.qW.Dot,command:this.scrollToTop},{key:T.qW.e,command:this.enableFastReblog},{key:T.qW.w,command:this.enableFastQueue},{key:T.qW.q,command:this.enableFastQuote,modifiers:{[T.lv.Ctrl]:!0}}]})]}),/*#__PURE__*/(0,S.jsxs)(r.Xq.Provider,{value:this.state,children:[s,this.state.currentlyDeletingPost&&/*#__PURE__*/(0,S.jsx)(g._5.Provider,{value:{post:this.state.currentlyDeletingPost,presentationStyle:C.A.desktop},children:/*#__PURE__*/(0,S.jsx)(n.C,{isOpen:!0,toggleIsOpen:()=>this.setState({currentlyDeletingPost:void 0})})})]})]})}}let j=(0,I.A)((0,a.c)((0,v.bb)(A,{appContext:!0,bluespaceContext:!0,dashboardContext:!0,deviceContext:!0,modalOrPeeprShowingContext:!0,modalRouteContext:!0,scrollContainerContext:!0,timelineContext:!0,toastContext:!0})))},4211:(e,t,s)=>{s.d(t,{C:()=>m});var i=s(23390),o=s(35641),n=s(16311),r=s(85191),l=s(94048),a=s(4613),h=s(25183),d=s(56356),c=s(9119);let u={footer:"fYlcy",pivotText:"mw4qt"};var p=s(60397);let m=({children:e,isOpen:t,toggleIsOpen:s})=>{let{post:m}=(0,d.gY)(),{id:f,blog:{uuid:g},canMute:b,noteCount:v,muted:R,rebloggedFromId:x}=m,{_c:C,_t:y,apiFetch:w}=(0,a.Us)(),{logEvent:I}=(0,h.Ul)(),{onRemoveTimelineObject:T}=(0,c._X)(),S=b&&!R&&v>=50&&!x?/*#__PURE__*/(0,p.jsxs)("div",{className:u.footer,children:[/*#__PURE__*/(0,p.jsx)("div",{className:u.pivotText,children:C("Text to encourage users to mute a post instead of deleting it.","Did you know that you can now mute notifications for this post if your activity is a bit too noisy?")}),/*#__PURE__*/(0,p.jsx)(n.Y,{allowTemporaryMute:!1,muteText:C("Button for user to mute notifications about a post.","Mute"),onClick:()=>{I({eventName:l.R.MuteNotDelete}),s()},withBorder:!0})]}):null;return/*#__PURE__*/(0,p.jsxs)(p.Fragment,{children:[e,t&&/*#__PURE__*/(0,p.jsx)(i.A,{glassIsClickable:!1,onGlassClick:s,children:/*#__PURE__*/(0,p.jsx)(o.m,{buttons:[{text:y("Cancel"),onClick:s,buttonStyle:o.s.Neutral},{text:y("OK"),onClick:()=>{let e=T?.(c.iN(m));return s(),w(`/v2/blog/${g}/post/delete`,{method:"POST",body:{id:f}}).catch(()=>e?.())},buttonStyle:o.s.Confirm}],"data-testid":"delete-dialog",footer:S,title:/*#__PURE__*/(0,p.jsx)(r.Ay,{comment:"Confirmation modal text for deleting a post. The non-breaking space entity replacing the last space in the sentence is intended to improve text wrapping in English by preventing the last word from being 'orphaned' (being put on its own line by itself). As a rough guideline for other languages: If the last two words of the translated sentence exceed 15 characters (counting all spaces as one character), please omit the entity and only use regular spaces.",children:"Are you sure you want to delete thisÂ post?"})})})]})}},77227:(e,t,s)=>{s.d(t,{D:()=>a});var i=s(74059),o=/*#__PURE__*/s.n(i),n=s(28230);let r={container:"gG278",condensed:"ops60"};var l=s(60397);let a=({color:e,condensed:t})=>/*#__PURE__*/(0,l.jsx)("div",{className:o()(r.container,{[r.condensed]:t}),children:/*#__PURE__*/(0,l.jsx)(n.A,{centerOrientation:"horizontalAndVertical",color:e})})},66794:(e,t,s)=>{s.d(t,{n:()=>B});var i=s(77227),o=s(36665),n=s(4613),r=s(72991),l=s(60968),a=s(54786),h=s(68376),d=s(72591),c=s(94048),u=s(25183),p=s(12779),m=s(46302),f=s(75182),g=s(31122),b=s(60397);let v=(e,t)=>{(e||window).scrollTo({top:t})};function R(e){let{emptyView:t,endOfTimelineView:s,errorView:i,itemSourceName:n,initialLoader:R,fetchNext:x,fetchPrevious:C,fetchStatus:y,getStableIdForItem:w,hasNextPage:I,loader:T,moduleKey:S,pages:P,proximityThreshold:k=1600,disablePagination:E,refresh:A,renderer:j,scrollerRef:F,shouldPrependPullToRefresh:H,transformItems:N,withoutVirtualization:O,withPersistence:B,withPullToRefresh:D}=e,{logEvent:M}=(0,u.Ul)(),V=(0,o.useMemo)(()=>{let e=P.flatMap(e=>e.items);return N?N(e):e},[P,N]),U=`${k}px 0px 0px 0px`,L=`0px 0px ${k}px 0px`,W=(0,r.Z)(),q=(0,p.w)(),z=(0,a.E)(),Q=`${S}-endless`,_=(0,o.useCallback)(e=>{M({eventName:c.R.TimelineRestoreScrollPosition,eventDetails:{timeline:n,page:Math.ceil(e/1e3)}})},[n,M]);(0,o.useEffect)(()=>{let e=z.getScrollOffset(Q);if("POP"===q&&void 0!==e&&B&&!K){let t=requestAnimationFrame(()=>{_(e),v(W,e)});return()=>{cancelAnimationFrame(t)}}"PUSH"!==q||K||v(W,0)},[W,Q]),(0,o.useEffect)(()=>{"none"===y&&A()},[A,y]);let Y=(0,o.useMemo)(()=>(0,m.A)(()=>{let e=W?W.scrollTop:window.scrollY;z.saveScrollOffset(Q,e)},150),[W,Q,z]);(0,o.useEffect)(()=>(W||window.addEventListener("scroll",Y),()=>{window.removeEventListener("scroll",Y)}),[W,Y]),(0,o.useEffect)(()=>(W&&W.addEventListener("scroll",Y),()=>{W?.removeEventListener("scroll",Y)}),[W,Y]);let $=(0,o.useCallback)(async()=>{H?await C():await A()},[C,H,A]),G=(0,o.useCallback)(e=>{e&&C()},[C]),Z=(0,o.useCallback)(e=>{e&&x()},[x]),K="single"===j.renderType&&!O,X=(0,o.useMemo)(()=>"bulk"===j.renderType?j.renderItems(V):K?/*#__PURE__*/(0,b.jsx)(h.HO,{getIsAnchorCandidate:j.getIsAnchorCandidate,id:S,identifierFunction:w,initialItemHeight:j.initialItemHeight,itemGap:j.itemGap,itemRenderer:j.renderItem,items:V,onScrollRestoration:_,persistedItemIds:j.persistedItemIds,ref:F,scrollContainer:W&&(0,g.s)(W)?W:null,withScrollRestoration:B}):V.map((e,t)=>/*#__PURE__*/(0,b.jsx)("div",{children:j.renderItem(e,t)},w(e))),[V,j,K,w,_,S,W,F,B]),J=0===V.length&&"loaded"===y,ee=0===V.length&&"error"===y,et="fetchingInitial"===y&&0===V.length;return(J?t:ee?i:et?R||T:null)||/*#__PURE__*/(0,b.jsxs)(b.Fragment,{children:[/*#__PURE__*/(0,b.jsx)(d.pL,{initialInView:!0,onChange:G,root:W,rootMargin:U}),D&&/*#__PURE__*/(0,b.jsx)(l.A,{refresh:$,scrollContainer:W||(0,f.A)()}),"fetchingInitial"===y?R||T:null,"fetchingPrevious"===y?T:null,X,"fetchingNext"===y?T:null,I?null:s,/*#__PURE__*/(0,b.jsx)(d.pL,{onChange:Z,root:W,rootMargin:L,skip:E},`${S}-${V.length}`)]})}var x=s(55321),C=s(74059),y=/*#__PURE__*/s.n(C),w=s(11100),I=s(90657),T=s(39977);let S={manualPaginatorButtons:"b1XhH",manualPaginatorButton:"Iqryz",next:"KIkOD",prev:"pRuyA",manualPaginatorButtonInner:"PDFGd"},P={width:13,height:13},k={primary:"currentColor"},E=({disableHotkeys:e,onClickNext:t,onClickPrevious:s,showNext:i,showPrevious:r,styles:l})=>{let{_c:a}=(0,n.Us)(),h=(0,o.useRef)(t),d=(0,o.useRef)(s);if((0,o.useEffect)(()=>{h.current=t,d.current=s},[t,s]),!r&&!i)return null;let c=a("The label for a button to return to the previous page of results","Previous"),u=a("The label for a button to go to the next page of results","Next");return/*#__PURE__*/(0,b.jsxs)("div",{className:S.manualPaginatorButtons,children:[r&&/*#__PURE__*/(0,b.jsxs)(b.Fragment,{children:[/*#__PURE__*/(0,b.jsxs)(w.A,{className:S.manualPaginatorButtonInner,label:c,onClick:s,wrapperClassName:y()(S.manualPaginatorButton,S.prev),wrapperStyle:l?.prev,children:[/*#__PURE__*/(0,b.jsx)(T.Up,{colors:k,size:P}),c]}),e?null:/*#__PURE__*/(0,b.jsx)(I.Ay,{hotkey:{key:I.qW.Left,command:()=>d.current()}})]}),i&&/*#__PURE__*/(0,b.jsxs)(b.Fragment,{children:[/*#__PURE__*/(0,b.jsxs)(w.A,{className:S.manualPaginatorButtonInner,label:u,onClick:t,wrapperClassName:y()(S.manualPaginatorButton,S.next),wrapperStyle:l?.next,children:[u,/*#__PURE__*/(0,b.jsx)(T.eh,{colors:k,size:P})]}),e?null:/*#__PURE__*/(0,b.jsx)(I.Ay,{hotkey:{key:I.qW.Right,command:()=>h.current()}})]})]})},A=new Set(["fetchingNext","fetchingPrevious"]),j=(e,t)=>{(e||window).scrollTo({top:t})},F=e=>{let t=(e||document.body).scrollHeight;(e||window).scrollTo({top:t})};function H(e){let{activePage:t,activePageIndex:s,disableHotkeys:i,emptyView:n,endOfTimelineView:h,errorView:d,itemSourceName:g,fetchPreviousPage:v,fetchNextPage:R,fetchStatus:C,getStableIdForItem:y,initialLoader:w,loader:I,manualPaginatingButtonStyles:T,moduleKey:S,refresh:P,renderer:k,transformItems:H,withPersistence:N,withPullToRefresh:O}=e,{logEvent:B}=(0,u.Ul)(),[D]=(0,x.ok)(),M=(0,r.Z)(),V=(0,a.E)(),U=(0,p.w)(),L=(0,o.useMemo)(()=>(0,m.A)(()=>{let e=M?M.scrollTop:window.scrollY;V.saveScrollOffset(`${S}-${D.toString()}`,e)},150),[M,D,V,S]);(0,o.useEffect)(()=>(M||window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L)),[L,M]),(0,o.useEffect)(()=>(M&&(window.removeEventListener("scroll",L),M.addEventListener("scroll",L)),()=>M?.removeEventListener("scroll",L)),[M,L]),(0,o.useEffect)(()=>{let e=V.getScrollOffset(`${S}-${D.toString()}`);if("POP"===U&&void 0!==e&&N){let t=requestAnimationFrame(()=>{B({eventName:c.R.TimelineRestoreScrollPosition,eventDetails:{isManualPagination:!0,timeline:g,page:Math.ceil(e/1e3)}}),j(M,e)});return()=>{cancelAnimationFrame(t)}}"PUSH"===U&&j(M,0)},[D,N,M]);let W=(0,o.useCallback)(async()=>{await R(),j(M,0)},[R,M]),q=(0,o.useCallback)(async()=>{await v(),requestAnimationFrame(()=>{F(M)})},[v,M]),z=(0,o.useCallback)(async()=>{await P()},[P]),Q=0===s&&t?.items.length===0&&"loaded"===C,_=t?.items.length===0&&"error"===C,Y="fetchingInitial"===C&&!t?.items.length,$=Q?n:_?d:Y?w||I:null,G=(0,o.useMemo)(()=>{if(!t?.items)return null;let e=t.items;return H?H(e):e},[t?.items,H]),Z=(0,o.useMemo)(()=>G?"bulk"===k.renderType?k.renderItems(G):G.map((e,t)=>/*#__PURE__*/(0,b.jsx)("div",{children:k.renderItem(e,t)},y(e))):null,[G,k,y]);return $||/*#__PURE__*/(0,b.jsxs)("div",{children:[O&&/*#__PURE__*/(0,b.jsx)(l.A,{refresh:z,scrollContainer:M||(0,f.A)()}),"fetchingInitial"===C&&(w||I),A.has(C)?I:/*#__PURE__*/(0,b.jsxs)(b.Fragment,{children:[Z,t?t.nextLink?null:h:null,/*#__PURE__*/(0,b.jsx)(E,{disableHotkeys:i,onClickNext:W,onClickPrevious:q,showNext:!!t?.nextLink,showPrevious:!!t?.prevLink||s>0,styles:T})]})]})}let N=/*#__PURE__*/(0,b.jsx)(i.D,{});function O({paginationMode:e="auto",module:t,loader:s=N,scrollerRef:i,...l}){let{endlessScrollingDisabled:a}=(0,n.Us)(),h=(0,r.Z)(),{activePage:d,activePageIndex:c,fetchNext:u,fetchNextPage:p,fetchPrevious:m,fetchPreviousPage:f,isRefreshing:g,pages:v,persistenceEnabled:x,...C}=t.useData({shouldFetchOnMount:!0});return(0,o.useEffect)(()=>{g&&(h??window).scrollTo({top:0,behavior:"instant"})},[g]),"endless"===("auto"===e?a?"paged":"endless":e)?/*#__PURE__*/(0,b.jsx)(R,{...l,...C,fetchNext:u,fetchPrevious:m,getStableIdForItem:t.getStableIdForItem,itemSourceName:t.itemSourceName,loader:s,pages:v,scrollerRef:i,withPersistence:x}):/*#__PURE__*/(0,b.jsx)(H,{...l,...C,activePage:d,activePageIndex:c,fetchNextPage:p,fetchPreviousPage:f,getStableIdForItem:t.getStableIdForItem,itemSourceName:t.itemSourceName,loader:s,withPersistence:x})}function B(e){let{module:t}=e;return/*#__PURE__*/(0,b.jsx)(O,{...e},t.moduleId)}},60968:(e,t,s)=>{s.d(t,{A:()=>f});var i=s(88346),o=/*#__PURE__*/s.n(i),n=s(74059),r=/*#__PURE__*/s.n(n),l=s(36665);let{Consumer:a}=/*#__PURE__*/(0,l.createContext)(void 0);var h=s(99805);let d={pullToRefresh:"gxf2Y",refreshing:"bZWbL",wipe:"b4eLl",changeColor:"d8uWm",innerCircle:"sRM0W",outerCircle:"v2cZ4"};var c=s(60397);let u=e=>{let t;let{isRefreshing:s,pullingProgress:i=0}=e;if(!s){let e=Math.pow(Math.min(1,Math.max(i,0)),4);t={strokeDashoffset:h.pullToRefreshCircumferencePx*(1-e)}}return/*#__PURE__*/(0,c.jsx)(a,{children:e=>{let i=e?e.linkColor:void 0;return/*#__PURE__*/(0,c.jsx)("div",{className:r()(d.pullToRefresh,s?d.refreshing:d.pulling),children:/*#__PURE__*/(0,c.jsx)("svg",{height:`${h.pullToRefreshHeightPx}px`,viewBox:`0 0 ${h.pullToRefreshHeightPx} ${h.pullToRefreshHeightPx}`,width:`${h.pullToRefreshHeightPx}px`,children:/*#__PURE__*/(0,c.jsx)("circle",{cx:h.pullToRefreshHeightPx/2,cy:h.pullToRefreshHeightPx/2,r:h.pullToRefreshHeightPx/2-h.pullToRefreshPaddingPx,stroke:i,style:t})})})}})};var p=s(75182);let m=/*#__PURE__*/function(e){return e[e.PullingToRefresh=0]="PullingToRefresh",e[e.RefreshingResults=1]="RefreshingResults",e[e.RefreshedResults=2]="RefreshedResults",e}({});class f extends l.Component{constructor(...e){super(...e),o()(this,"state",{refreshingState:m.PullingToRefresh,gestureStart:0,gestureDistance:0}),o()(this,"canPullToRefresh",()=>(this.props.scrollContainer!==(0,p.A)()?this.props.scrollContainer.scrollTop:p.A()?.scrollY||0)<=0&&this.state.refreshingState!==m.RefreshingResults),o()(this,"touchStart",e=>{e.stopPropagation(),this.canPullToRefresh()&&this.setState({gestureStart:e.touches[0].screenY,gestureDistance:0,refreshingState:m.PullingToRefresh})}),o()(this,"touchMove",e=>{if(e.stopPropagation(),!this.canPullToRefresh())return Promise.resolve();let t=(e.touches[0].screenY-this.state.gestureStart)/2,s=t>50?m.RefreshingResults:m.PullingToRefresh;return new Promise(e=>{this.state.refreshingState!==m.RefreshedResults&&s===m.RefreshingResults?this.setState({refreshingState:s,gestureDistance:t},()=>{this.props.refresh().then(()=>this.setState({refreshingState:m.RefreshedResults},e))}):this.setState({gestureDistance:t},e)})}),o()(this,"touchEnd",e=>{e.stopPropagation(),this.setState({gestureStart:0,gestureDistance:0})}),o()(this,"attachHandlers",e=>{e&&(e.addEventListener("touchstart",this.touchStart),e.addEventListener("touchmove",this.touchMove),e.addEventListener("touchend",this.touchEnd))}),o()(this,"removeHandlers",e=>{e&&(e.removeEventListener("touchstart",this.touchStart),e.removeEventListener("touchmove",this.touchMove),e.removeEventListener("touchend",this.touchEnd))})}componentDidUpdate(e){let{scrollContainer:t}=this.props,{scrollContainer:s}=e;!t&&s&&this.attachHandlers(s),t&&!s&&this.removeHandlers(t),t&&s&&t!==s&&(this.removeHandlers(t),this.attachHandlers(s))}componentDidMount(){this.attachHandlers(this.props.scrollContainer)}componentWillUnmount(){this.removeHandlers(this.props.scrollContainer)}render(){let e;switch(this.state.refreshingState){case m.RefreshingResults:e={isRefreshing:!0};break;case m.PullingToRefresh:e={pullingProgress:this.state.gestureDistance/50};case m.RefreshedResults:}let t=0;switch(this.state.refreshingState){case m.PullingToRefresh:t=this.state.gestureDistance;break;case m.RefreshedResults:t=0;break;case m.RefreshingResults:t=50}return/*#__PURE__*/(0,c.jsx)("div",{style:{height:t,display:"flex",flexDirection:"column",overflow:"hidden"},children:/*#__PURE__*/(0,c.jsx)(u,{...e})})}}},68376:(e,t,s)=>{s.d(t,{HO:()=>I});var i=s(88346),o=/*#__PURE__*/s.n(i),n=s(74059),r=/*#__PURE__*/s.n(n),l=s(41475),a=s(54786),h=s(75185),d=s(36665),c=s(12779),u=s(46302),p=s(19869),m=s(44218);let f={cell:"rZlUD",simpleCell:"hCiRr",isVisible:"KYCZY",showWithoutAnimation:"F4Tcn",showWithAnimation:"W45iW",scrollContainer:"zAlrA"};var g=s(60397);class b extends d.PureComponent{constructor(e){super(e),o()(this,"cachedTextContent",null),o()(this,"omitAnimation",!1),o()(this,"state",{isVisible:!1}),o()(this,"getNode",()=>this.nodeRef),o()(this,"getIsVisible",()=>this.state.isVisible),o()(this,"setIsVisible",e=>{this.props.intersectionObserver&&window.requestAnimationFrame(()=>{this.setState({isVisible:e})})}),o()(this,"isFocused",()=>!!document.activeElement&&(document.activeElement===this.contentRef?.ref||document.activeElement===this.nodeRef)),o()(this,"focus",e=>{(this.contentRef?.ref||this.nodeRef)?.focus(e)}),o()(this,"triggerVisibilityUpdate",()=>{let{intersectionObserver:e}=this.props;this.nodeRef&&e&&(e?.unobserve(this.nodeRef),e?.observe(this.nodeRef))}),o()(this,"getContentElement",()=>this.contentRef?.ref),o()(this,"getRenderContent",(0,h.A)((e,t,s)=>s(e,t,this.setContentRef))),o()(this,"onResize",([e])=>{let{height:t,isVisible:s}=this.state,{cellGap:i,id:o,onHeightChange:n,shouldForceShow:r}=this.props,l=e.target.clientHeight;(s||void 0===t)&&(t!==l||r)&&(n(o,l>i?l:0),t!==l&&this.setState({height:l}))}),o()(this,"setNodeRef",e=>{let{intersectionObserver:t}=this.props;this.nodeRef&&(this.resizeObserver?.unobserve(this.nodeRef),t?.unobserve(this.nodeRef)),this.nodeRef=e,this.nodeRef&&(this.resizeObserver?.observe(this.nodeRef),t?.observe(this.nodeRef))}),o()(this,"setContentRef",e=>{this.contentRef=e,this.contentRef?.ref&&(this.cachedTextContent=this.contentRef.ref.textContent)}),this.omitAnimation=!!e.shouldForceShow;let t=!!e.shouldForceShow||!e.intersectionObserver;this.state={height:e.initialHeight,isVisible:t}}componentDidMount(){let{intersectionObserver:e}=this.props;this.resizeObserver=new ResizeObserver(this.onResize),this.nodeRef&&this.resizeObserver.observe(this.nodeRef),this.nodeRef&&e?.observe(this.nodeRef)}componentWillUnmount(){let{intersectionObserver:e}=this.props;this.resizeObserver?.disconnect(),this.nodeRef&&e?.unobserve(this.nodeRef)}componentDidUpdate(e){let{intersectionObserver:t}=this.props;e.intersectionObserver!==t&&this.nodeRef&&t?.observe(this.nodeRef)}render(){let{id:e,item:t,index:s,offset:i,itemRenderer:o,shouldShow:n}=this.props,{isVisible:l,height:a}=this.state,h=l?this.getRenderContent(t,s,o):this.cachedTextContent;return/*#__PURE__*/(0,g.jsx)("div",{className:r()(f.cell,{[f.isVisible]:l,[f.showWithoutAnimation]:this.omitAnimation&&void 0!==a,[f.showWithAnimation]:!this.omitAnimation&&void 0!==a&&n}),"data-cell-id":e,ref:this.setNodeRef,style:{top:i,position:"absolute",height:l?void 0:a},children:h},e)}}let v=e=>{if(!e)return{top:0,bottom:window.innerHeight,height:window.innerHeight};{let t=e.getBoundingClientRect();return{top:t.top,bottom:t.top+t.height,height:t.height}}},R=(e,t)=>{if(0===e.height||0===t.height||e.bottom<t.top||e.top>t.bottom)return 0;let s=Math.max(t.top,e.top),i=Math.min(t.bottom,e.bottom)-s;return i?i/e.height:0},x=(e,t)=>{let s;let i=v(t);return e.forEach(({node:e,id:t,height:o})=>{let n=e.getBoundingClientRect();n.height=o;let r=R(n,i);if(r>0){let e={intersectionRatio:r,id:t,offsetFromTop:n.top-i.top};s?e.offsetFromTop<s.offsetFromTop&&(s=e):s=e}}),s};class C extends d.PureComponent{constructor(...e){super(...e),o()(this,"initialRenderHeights",{}),o()(this,"getInitialRenderHeights",()=>({...this.initialRenderHeights})),o()(this,"getOnRefSet",e=>t=>{t&&(this.initialRenderHeights[e]=t.getBoundingClientRect().height)})}render(){let{items:e,itemRenderer:t,identifierFunction:s}=this.props;return/*#__PURE__*/(0,g.jsx)("div",{children:e.map((e,i)=>{let o=s(e);return/*#__PURE__*/(0,g.jsx)("div",{className:f.simpleCell,ref:this.getOnRefSet(o),children:t(e,i)},o)})})}}class y extends d.PureComponent{constructor(...e){super(...e),o()(this,"state",{itemsToRender:[]}),o()(this,"isInitialRenderComplete",!1),o()(this,"nodeRef",/*#__PURE__*/d.createRef()),o()(this,"itemHeightById",new Map),o()(this,"cellRefsById",new Map),o()(this,"itemsById",new Map),o()(this,"scrollAnchor",void 0),o()(this,"scheduledUpdateId",null),o()(this,"scheduleUpdate",p.A),o()(this,"debouncedUpdate",p.A),o()(this,"intersectionObserver",void 0),o()(this,"isScrolling",!1),o()(this,"restorationAnchor",void 0),o()(this,"isAwaitingRestorationNormalization",!1),o()(this,"getVisibleElement",()=>{let{itemGap:e}=this.props,{itemsToRender:t}=this.state;if(null!==this.nodeRef.current)for(let s of t){let t=this.cellRefsById.get(s.id);if(t&&t.getIsVisible()){let s=t.getNode();if(!s)continue;if(s.getBoundingClientRect().bottom>=60+e)return t.getContentElement()}}}),o()(this,"scrollToElement",(e,t)=>{let{scrollContainer:s,itemGap:i}=this.props,{itemsToRender:o}=this.state,n=this.nodeRef.current;if(null===n)return;let r=Math.ceil(s?s.scrollTop:window.scrollY),a=n.offsetTop,h=e===l.ik.Previous?[...o].reverse():o;for(let s of h){let o=this.cellRefsById.get(s.id);if(o){let n=a+s.offset,d=e===l.ik.Next?n>r+i+t+1:n<r+i+t-1,c=e===l.ik.Next&&0===r&&0===h.indexOf(s)&&!o.isFocused();if(d||c){o.focus({preventScroll:!0}),this.scrollTo({left:0,top:n-i-t});return}}}e===l.ik.Next&&this.scrollTo({left:0,top:s?s.scrollHeight:document.documentElement.scrollHeight})}),o()(this,"alreadyReportedDuplicateIds",!1),o()(this,"updateItemsByIdMap",(e,t)=>{let{id:s}=this.props;this.itemsById=new Map;let i=!1;e.forEach(e=>{let s=t(e);this.itemsById.has(s)?i=!0:this.itemsById.set(s,e)}),i&&!this.alreadyReportedDuplicateIds&&((0,m.Cp)(Error("[Scroller] Duplicate item id"),{level:"warning",extra:{scrollerId:s}}),this.alreadyReportedDuplicateIds=!0)}),o()(this,"getDedupedItems",(0,h.A)((e,t)=>e.filter(e=>{let s=t(e);return this.itemsById.get(s)===e}))),o()(this,"scrollTo",({top:e,left:t})=>{let{scrollContainer:s}=this.props;(s||window).scrollTo({left:t,top:e})}),o()(this,"updateIntersectionObserver",(e,t=!1)=>{this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=new IntersectionObserver(this.onIntersectionUpdate,{root:e??null,rootMargin:"300% 0px 300% 0px"}),t&&this.update()}),o()(this,"cancelPendingUpdate",()=>{this.scheduledUpdateId&&(void 0!==window.requestIdleCallback?window.cancelIdleCallback(this.scheduledUpdateId):window.cancelAnimationFrame(this.scheduledUpdateId))}),o()(this,"updatePersistedItems",(e,t)=>{let{disableVirtualization:s}=this.props;if(s)return;let i=e.filter(e=>!t.includes(e)),o=t.filter(t=>!e.includes(t));i.forEach(e=>{let t=e?this.cellRefsById.get(e):void 0;t?.triggerVisibilityUpdate()}),o.forEach(e=>{let t=e?this.cellRefsById.get(e):void 0;t?.setIsVisible(!0)})}),o()(this,"onIntersectionUpdate",e=>{let{persistedItemIds:t,onNearEnd:s,onNearStart:i}=this.props,{itemsToRender:o}=this.state;e.forEach(e=>{let n=e.target.getAttribute("data-cell-id"),r=n?this.cellRefsById.get(n):void 0,l=n?this.itemsById.get(n):void 0;if(!r||!n||!l)return;if(!r.state.isVisible&&e.isIntersecting){let e=n===o[o.length-1]?.id,t=n===o[0]?.id;e&&s?.(),t&&i?.()}let a=!!t&&t.indexOf(n)>=0;r.setIsVisible(e.isIntersecting||a)})}),o()(this,"getItemHeight",e=>{let{ssrInitialRenderedItemHeights:t,initialItemHeight:s}=this.props;return this.itemHeightById.get(e)??t?.get(e)??s}),o()(this,"getAnchorCandidates",()=>{let{getIsAnchorCandidate:e}=this.props,t=[];return this.state.itemsToRender.forEach(({id:s,height:i,item:o})=>{if(!e(o))return;let n=this.cellRefsById.get(s);if(n&&n.getIsVisible()){let e=n.getNode();e&&t.push({id:s,node:e,height:i})}}),t}),o()(this,"getNormalizedRenderItems",()=>{let{identifierFunction:e,items:t}=this.props,s=this.getDedupedItems(t,e),i=0;return s.map(t=>{let s=e(t),o=this.getItemHeight(s),n={id:s,offset:i,item:t,height:o};return i+=o,n})}),o()(this,"getRenderItemsRelativeToAnchor",(e,t)=>{let{identifierFunction:s,items:i}=this.props,o=this.getDedupedItems(i,s),n=this.getItemHeight(e.id),r=e.offset,l=[{id:e.id,offset:e.offset,item:o[t],height:n}];for(let e=t-1;e>=0;e-=1){let t=o[e],i=s(t),n=this.getItemHeight(i),a={id:i,offset:r-=n,item:t,height:n};l.unshift(a)}r=e.offset+n;for(let e=t+1;e<o.length;e+=1){let t=o[e],i=s(t),n=this.getItemHeight(i),a={id:i,offset:r,item:t,height:n};r+=n,l.push(a)}return l}),o()(this,"getItemsToRender",()=>{let{identifierFunction:e,items:t,scrollContainer:s}=this.props,i=this.getDedupedItems(t,e),o=this.getAnchorCandidates();this.scrollAnchor=x(o,s||null);let n=i.findIndex(t=>e(t)===(this.restorationAnchor||this.scrollAnchor)?.id),r=this.restorationAnchor||this.state.itemsToRender.find(e=>e.id===this.scrollAnchor?.id);return(this.isInitialRenderComplete||this.restorationAnchor)&&r&&n>-1?(this.isAwaitingRestorationNormalization=!!this.restorationAnchor,this.restorationAnchor=void 0,this.getRenderItemsRelativeToAnchor(r,n)):this.getNormalizedRenderItems()}),o()(this,"update",()=>{let e=this.getItemsToRender();e.length&&e.every(e=>this.itemHeightById.has(e.id))&&!this.isInitialRenderComplete&&(this.isInitialRenderComplete=!0),this.setState({itemsToRender:e},()=>{this.normalize()})}),o()(this,"normalize",(e=!1)=>{let{scrollContainer:t}=this.props,s=this.getNeedsNormalization();if((!this.isScrolling||e)&&s){let e=this.state.itemsToRender[0]?.offset||0,s=this.getNormalizedRenderItems();this.setState({itemsToRender:s},()=>{(!this.getIsTopVisible()||this.isAwaitingRestorationNormalization)&&(this.isAwaitingRestorationNormalization=!1,t?t.scrollBy({top:-e}):window.scrollBy({top:-e}))})}}),o()(this,"getNeedsNormalization",()=>{let{itemsToRender:e}=this.state;return 0!==(e[0]?.offset||0)}),o()(this,"setCellRef",(e,t)=>{t?this.cellRefsById.set(e,t):this.cellRefsById.delete(e)}),o()(this,"onCellHeightChange",(e,t)=>{this.itemHeightById.get(e)!==t&&(this.itemHeightById.set(e,t),this.debouncedUpdate())}),o()(this,"getIsTopVisible",()=>{let{scrollContainer:e}=this.props;return(e?e.scrollTop:window.scrollY)<=(this.nodeRef.current?this.nodeRef.current.offsetTop:0)}),o()(this,"onScrollEnd",()=>{this.isScrolling=!1,this.normalize(),this.updateScrollRestorationCandidates.flush()}),o()(this,"onScroll",()=>{this.isScrolling=!0,this.updateScrollRestorationCandidates(),this.scheduleScrollEndCheck(),this.getNeedsNormalization()&&this.getIsTopVisible()&&this.normalize(!0)}),o()(this,"scheduleScrollEndCheck",(0,u.A)(()=>{this.onScrollEnd()},120,{leading:!1,trailing:!0})),o()(this,"updateScrollRestorationCandidates",(0,u.A)(()=>{let{scrollRestorationContext:e,id:t}=this.props;if(e){let s=this.getNewScrollRestorationCandidates();s.length&&e.saveCandidates(t,s)}},250))}componentDidMount(){let{scrollContainer:e,items:t,identifierFunction:s,initialItemHeight:i,navigationType:o,onScrollRestoration:n,scrollRestorationContext:r,withScrollRestoration:l,id:a}=this.props;if(this.scrollTo({top:0}),this.updateItemsByIdMap(t,s),r&&l&&"POP"===o){let e=r.getCachedTimelineItemHeights(a);e&&(this.itemHeightById=new Map(e));let o=r.getCandidates(a);if(o.length){let e=o.find(e=>this.itemsById.has(e.id)),r=e?this.itemsById.get(e.id):void 0,l=this.nodeRef.current?.offsetTop||0;if(e&&r){let o=this.itemHeightById.get(e.id)||i,a=t.indexOf(r),h=0;for(let e=0;e<a;e++){let o=t[e];o&&(h+=this.itemHeightById.get(s(o))??i)}n?.(Math.max(1,h)),this.restorationAnchor={item:r,id:e.id,offset:e.offsetFromTop-l,height:o}}}else e&&n?.(0)}e?e.addEventListener("scroll",this.onScroll):window.addEventListener("scroll",this.onScroll);let h=window.requestAnimationFrame;this.scheduleUpdate=()=>{this.scheduledUpdateId=h(this.update)},this.debouncedUpdate=(0,u.A)(this.scheduleUpdate,100),this.updateIntersectionObserver(e),this.update()}componentWillUnmount(){let{scrollContainer:e,scrollRestorationContext:t,id:s,withScrollRestoration:i}=this.props;e?.removeEventListener("scroll",this.onScroll),window.removeEventListener("scroll",this.onScroll),this.cancelPendingUpdate(),this.cancelScrollEndCheck(),this.updateScrollRestorationCandidates.cancel(),i&&t?.saveCachedTimelineItemHeights(s,this.itemHeightById)}componentDidUpdate(e){let{id:t,items:s,scrollContainer:i,identifierFunction:o,persistedItemIds:n}=this.props;i!==e.scrollContainer&&(this.updateIntersectionObserver(i,!0),e.scrollContainer?.removeEventListener("scroll",this.onScroll),i?.addEventListener("scroll",this.onScroll),this.cancelScrollEndCheck(),this.updateScrollRestorationCandidates.cancel()),t!==e.id&&(this.itemHeightById=new Map,this.scrollAnchor=void 0,this.isInitialRenderComplete=!1,this.scheduledUpdateId&&(this.cancelPendingUpdate(),this.scheduledUpdateId=null),this.scrollTo({top:0})),(t!==e.id||s!==e.items)&&this.scheduleUpdate(),s!==e.items&&this.updateItemsByIdMap(s,o),n!==e.persistedItemIds&&this.updatePersistedItems(e.persistedItemIds||[],n||[])}render(){let{disableVirtualization:e,id:t,itemGap:s,itemRenderer:i,ssrInitialRenderedItemHeights:o}=this.props,{itemsToRender:n}=this.state,l=n[n.length-1],a=l?l.offset+this.getItemHeight(l.id):0;return/*#__PURE__*/(0,g.jsx)("div",{className:r()([f.scrollContainer]),ref:this.nodeRef,style:{height:`${a}px`},children:n.map((t,n)=>{let r=this.itemHeightById.has(t.id)?void 0:o?.get(t.id),l=this.itemHeightById.get(t.id);return/*#__PURE__*/(0,g.jsx)(b,{cellGap:s,id:t.id,index:n,initialHeight:l||r,intersectionObserver:e?void 0:this.intersectionObserver,item:t.item,itemRenderer:i,offset:t.offset,onHeightChange:this.onCellHeightChange,ref:e=>{this.setCellRef(t.id,e||void 0)},shouldForceShow:!!r,shouldShow:this.isInitialRenderComplete},t.id)})},t)}getNewScrollRestorationCandidates(){let{scrollContainer:e}=this.props,t=x(this.getAnchorCandidates(),e||null);return t?[{id:t?.id,offsetFromTop:t?.offsetFromTop}]:[]}cancelScrollEndCheck(){this.scheduleScrollEndCheck.cancel()}}o()(y,"defaultProps",{itemGap:0});class w extends d.PureComponent{constructor(...e){super(...e),o()(this,"scrollerRef",/*#__PURE__*/d.createRef()),o()(this,"simpleScrollerRef",/*#__PURE__*/d.createRef()),o()(this,"state",{isMounted:!1}),o()(this,"scrollToElement",(e,t)=>{this.scrollerRef.current?.scrollToElement(e,t)}),o()(this,"getVisibleElement",()=>this.scrollerRef.current?.getVisibleElement())}componentDidMount(){this.setState({isMounted:!0})}render(){let{isMounted:e}=this.state,{scrollRestorationContext:t,id:s}=this.props,i=((t?.getCandidates(s)||[]).length>0||e)&&"undefined"!=typeof ResizeObserver;if(this.simpleScrollerRef.current){let e=this.simpleScrollerRef.current.getInitialRenderHeights();this.ssrInitialRenderedItemHeights=new Map(Object.entries(e))}return i?/*#__PURE__*/(0,d.createElement)(y,{...this.props,key:s,ref:this.scrollerRef,ssrInitialRenderedItemHeights:this.ssrInitialRenderedItemHeights}):/*#__PURE__*/(0,g.jsx)(C,{...this.props,ref:this.simpleScrollerRef})}}class I extends d.PureComponent{constructor(...e){super(...e),o()(this,"scrollerRef",/*#__PURE__*/d.createRef()),o()(this,"scrollToElement",(e,t)=>{this.scrollerRef.current?.scrollToElement(e,t)}),o()(this,"getVisibleElement",()=>this.scrollerRef.current?.getVisibleElement())}render(){return/*#__PURE__*/(0,g.jsx)(a.D.Consumer,{children:e=>/*#__PURE__*/(0,g.jsx)(c.Q.Consumer,{children:t=>/*#__PURE__*/(0,g.jsx)(w,{...this.props,navigationType:t,ref:this.scrollerRef,scrollRestorationContext:e})})})}}},16311:(e,t,s)=>{s.d(t,{Y:()=>I});var i=s(74059),o=/*#__PURE__*/s.n(i),n=s(11100),r=s(90937),l=s(23390),a=s(35641),h=s(86619),d=s(27120),c=s(76827),u=s(36665),p=s(94048),m=s(89972),f=s(83322),g=s(4613),b=s(56356),v=s(9119),R=s(56281),x=s(99805),C=/*#__PURE__*/s.n(x);let y={buttonWithBorder:"oh58_",menuItem:"F4hr9"};var w=s(60397);let I=({onClick:e,allowTemporaryMute:t,muteText:s,withBorder:i})=>{let{_c:x,_t:I}=(0,g.Us)(),{onEditTimelineObject:T}=(0,v._X)(),{post:{id:S,muted:P,blogName:k},post:E}=(0,b.gY)(),{toggleToast:A}=(0,R.Y)(),{width:j}=(0,d.DC)(),F=j>=C().phoneResponsiveMaxBreakpoint,H=x("Button for user to mute notifications about a post.","Mute notifications"),N=(0,u.useMemo)(()=>[{duration:28800,buttonLabel:x("Button label for muting a post for eight hours.","8 hours"),confirmationText:x("Description for confirmation dialog when user mutes a post for 8 hours.","You won't receive push and activity notifications for this post for 8 hours."),krakenEventName:p.R.MuteHours},{duration:86400,buttonLabel:x("Button label for muting a post for one day.","Til tomorrow"),confirmationText:x("Description for confirmation dialog when user mutes a post for a day.","You won't receive push and activity notifications for this post for one day."),krakenEventName:p.R.MuteDay},{duration:604800,buttonLabel:x("Button label for muting a post for one week.","Til next week"),confirmationText:x("Description for confirmation dialog when user mutes a post for a week.","You won't receive push and activity notifications for this post for one week."),krakenEventName:p.R.MuteWeek},{buttonLabel:x("Button label for muting a post forever.","Forever"),confirmationText:x("Description for confirmation dialog when user mutes a post forever.","You won't receive push and activity notifications for this post from now on."),krakenEventName:p.R.MuteForever}],[x]),{mutateAsync:O}=(0,c.d)(),[B,D]=(0,u.useState)(!1),[M,V]=(0,u.useState)(N[N.length-1]),[U,L]=(0,u.useState)(!1),W=(0,u.useCallback)(()=>L(!U),[U]),q=(0,u.useCallback)(()=>{O({id:S,muted:!!P,blogName:k,muteLengthSeconds:M.duration}).then(()=>{A(x("Confirmation message shown when user mutes a post.","Disabled notifications for this post."),"success");let t=M?.duration||0,s=0!==t?Math.round(Date.now()/1e3)+t:0;T((0,v.iN)(E),e=>{(0,f.zA)(e)&&(e.muted=!P,e.muteEndTimestamp=s)}),e?.()}).catch(()=>{A(I("Something went wrong. Please try again."),"error")})},[x,I,S,M,P,k,O,E,T,A,e]),z=(0,u.useCallback)(()=>{let e=e=>{V(e),D(!0)};return/*#__PURE__*/(0,w.jsx)(w.Fragment,{children:N.map((t,s)=>/*#__PURE__*/(0,w.jsx)(r.A,{className:y.menuItem,isWrappingButton:!0,keepDropdownOpenAfterClick:!0,krakenEventName:t.krakenEventName,children:/*#__PURE__*/(0,w.jsx)(n.A,{onClick:()=>{e(t)},children:t.buttonLabel})},s))})},[N,V,D]),Q=s||H,_=/*#__PURE__*/(0,w.jsxs)(n.A,{"aria-label":H,className:o()({[y.buttonWithBorder]:i}),label:Q,onClick:()=>D(!0),children:[Q,B?/*#__PURE__*/(0,w.jsx)(l.A,{glassIsClickable:!0,onGlassClick:()=>D(!1),children:/*#__PURE__*/(0,w.jsx)(a.m,{body:M.confirmationText,buttons:[{text:I("Nevermind"),onClick:()=>D(!1),buttonStyle:a.s.Neutral},{text:x("Confirm button for muting a post","Mute"),onClick:q,buttonStyle:a.s.Cancel}],title:x("Title for confirmation dialog when user mutes a post.","Are you sure you want to mute notifications?")})}):null]});return t?/*#__PURE__*/(0,w.jsx)(h.Ay,{closeForAllExternalClicks:!0,height:"auto",isOpen:U,position:F?m.$x.RightStart:m.$x.Auto,render:z,toggle:W,width:250,children:_}):_}},29504:(e,t,s)=>{s.d(t,{$c:()=>r,MX:()=>l,Xq:()=>n});var i=s(36665),o=s(19869);let n=/*#__PURE__*/(0,i.createContext)({canFastReblog:!1,canFastQueue:!1,canFastQuote:!1,fastRebloggedPosts:[],setDefaultFastBlog:o.A,getBlogs:()=>[]}),r=/*#__PURE__*/(0,i.createContext)({allPosts:[],queuedPosts:[]}),l=()=>(0,i.useContext)(n)},76827:(e,t,s)=>{s.d(t,{d:()=>n});var i=s(75170),o=s(4613);let n=()=>{let{apiFetch:e}=(0,o.Us)();return(0,i.n)({mutationFn:({id:t,muted:s,blogName:i,muteLengthSeconds:o})=>{let n=`/v2/blog/${i}/posts/${t}/mute`;return s?e(n,{method:"DELETE"}):e(n,{method:"POST",body:o?{mute_length_seconds:o}:void 0})}})}},4048:(e,t,s)=>{s.d(t,{U:()=>i,a:()=>o});let i=/*#__PURE__*/function(e){return e.SPAM="spam",e.UNBLUR="unblur",e}({}),o=/*#__PURE__*/function(e){return e.Fast="fast",e}({})},31122:(e,t,s)=>{s.d(t,{s:()=>i});function i(e){return e?.nodeType===1}}}]);