function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _createForOfIteratorHelper(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.unifiedTrackingHandler=window.unifiedTrackingHandler||{process:!0},window.unifiedTrackingHandler.storage=window.unifiedTrackingHandler.storage||(()=>{function r(){try{var t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),1}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}return{get:function(e,t){if(!r())return t;try{var n=window.localStorage.getItem(e);return n||t}catch(e){return t}},getAllKeys:function(){return Object.keys(window.localStorage||{})},remove:function(e){if(!r())return!1;try{return window.localStorage.removeItem(e),!0}catch(e){return!1}},set:function(e,t){if(!r())return!1;try{return window.localStorage.setItem(e,t),!0}catch(e){return!1}}}})(),window.unifiedTrackingHandler=window.unifiedTrackingHandler||{process:!0},window.unifiedTrackingHandler.globals=window.unifiedTrackingHandler.globals||(()=>{var i="00000000-0000-0000-0000-000000000000",r="Ancestry-Context-UBE",a=5574,o="UnifiedTracking_ScreenViews",t="UnifiedTrackingPreviousScreenName",n="UnifiedTrackingPreviousScreenNameStandard",c=/^http(?:s)?:\/\/(www|search|support|blogs|shopdna|petdna).(ancestry|genealogy|rootsweb|archives)(library|institution|classroom|conference|heritagequest|)?(?:stage|dev)?\.(?:[a-z.]{2,6})(?:\?|\/|$)/i,u=m(),s={},d={legacy:"",standard:""};function e(){var n,r={};r.screenViewedId=u,r.timestampEvent=parseInt(Date.now().toFixed(),10),r.previousScreenName=p(),r.previousScreenNameStandard=S(),r.referrerUrl=document.referrer||"",r.url=window.location.href,r.unifiedEvent=!0,new Promise(function(e,t){var n=Date.now(),r=function(){window.utag_data||(window.utag?window.utag.data:null)?e(O("")):Date.now()-n<5e3?setTimeout(r,500):t()};r()}).then(function(e){n=e}).catch(function(){n=void 0}).finally(function(){h(n,_()),I(),r.screenName=d.legacy,r.screenNameStandard=d.standard;var e=window.unifiedTrackingHandler.storage,t=JSON.parse(e.get(o,'{ "queue": [] }'));t.queue.push(r),e.set(o,JSON.stringify(t))})}function f(){e()}function l(){return u}function g(){return Object.keys(s)}function w(e){return s[e]}function m(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}function y(e){(e=e||window.location.href).startsWith("/")&&(e=window.location.href);var t,e=c.exec(e);return e?(t=null!=(t=e[3])?t:e[3],e[2]+(t?"-"+t:"")):""}function p(){return window.sessionStorage&&window.sessionStorage.getItem(t)||""}function S(){return window.sessionStorage&&window.sessionStorage.getItem(n)||""}function v(e){window.sessionStorage&&e&&(window.sessionStorage.setItem(t,e.legacy||""),window.sessionStorage.setItem(n,e.standard||""))}function h(e,t){void 0!==e&&(d.legacy=e),void 0!==t&&(d.standard=t)}function E(){var e,t=document.querySelector("meta[name='screen-name'],meta[name='data-screen-name']");return e=t&&(t=t.getAttribute("content"))?b(e=1<(t=(e=t.toLowerCase().trim()).split(":")).length&&t[0].trim().startsWith("ancestry")?t.splice(1).join(":").trim():e):e}function T(e){return(e=e||"").trimLeft().startsWith(":")}function b(e){if(!e)return"";(e=e.trimLeft()).startsWith(":")&&(e=e.slice(1).trim());var t,n,r=y(),o=(t={country:"unk",language:"unk"},o=N("VARS","LCISONAME"),!(n=window.ancestry.country||"")&&window.ancestry.marketId&&window.ancestry.marketId===a&&(n="global"),t.country=n.toLowerCase(),4===o.length?t.language=o.substring(0,2).toLowerCase():(n=new URL(window.location).searchParams)&&(o=n.get("language"))&&2===(n=o.split("_")).length&&(t.language=n[0].toLowerCase()),"gb"===t.country&&(t.country="uk"),t);return"".concat(r," : ").concat(o.country," : ").concat(o.language," : ").concat(e)}function I(){d.legacy||(d.legacy=O("")),d.standard||(d.standard=_(": missing : missing : missing"))}function O(e){if((e=e||"")?T(e)&&(e=""):(n=window.utag_data||(window.utag?window.utag.data:null))&&n.page_name&&(e=n.page_name),!e){var t="/"===window.location.pathname?null:window.location.pathname.split("/"),n=window.location.hostname.split("."),r=-1===window.location.hostname.indexOf("ancestry")?n[1]:"ancestry",o="www"!==n[0],i=3<n.length?n[3]:n[2],a=[];if(a.push(r+" "+("com"===i?"us":i)),o&&a.push(n[0]),null!==t)for(var c=0;c<t.length;c++)t[c]&&a.push(t[c]);else a.push("home");e=a.join(" : ")}return e}function _(e){return(e=e?T(e)?b(e):"":E())||""}function N(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"&",r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],i="",e=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]+)")));return e&&(i=r?decodeURIComponent(e[2]):e[2]),i=t?(e=i.match(new RegExp("(^|".concat(n,")").concat(t,"=([^").concat(n,"]+)"))))?o?decodeURIComponent(e[2]):e[2]:"":i}function C(){return N("ANCSESSIONID")}function A(){var e=["necessary","functional"];return(e=window.ancestry&&window.ancestry.getConsentControlFlags?window.ancestry.getConsentControlFlags():e).join("|")}function k(e){var t,n={},r=_createForOfIteratorHelper(g());try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o]=_objectSpread({},w(o))}}catch(e){r.e(e)}finally{r.f()}e={eventId:e||i,correlatedScreenViewedId:u,correlatedSessionId:C(),userConsent:A(),vendors:g().join("|"),vendorConfigurations:JSON.stringify(n)};return window.btoa(JSON.stringify(e))}window.addEventListener("unload",function(){v(d)}),"complete"===document.readyState?f():document.addEventListener("readystatechange",function(e){"complete"===document.readyState&&f()});var R=window.requestHeaderAppender;return R&&R.registerHandler(function(e){var t,n={};return((e=(e=e).toLowerCase()).startsWith("/")||(t="".concat(window.location.protocol,"//").concat(window.location.host).toLowerCase(),e&&e.startsWith(t)))&&(n[r]=k("")),n}),{CORRELATED_HEADER_NAME:r,CONSENT_TYPE:{ANALYTICS:"analytics",PERFORMANCE:"performance",ADVERTISING:"advertising"},CONSENT_CONTROL_TYPE:{ANALYTICS3RD:"analytics3rd",ANALYTICS1ST:"analytics1st",ADVERTISING3RD:"advertising3rd",ADVERTISING1ST:"advertising1st",ATTRIBUTION3RD:"attribution3rd",PERFORMANCE:"performance"},SCREEN_VIEWS_STORAGE_KEY:o,NIL_UUID:i,createEventContext:k,newScreenViewedId:function(){u=m()},getScreenViewedId:l,getSessionId:C,getCookie:N,getUserConsent:A,getRegisteredVendorList:g,getRegisteredVendor:w,setRegisteredVendor:function(e,t){s[e]=t},createUuid:m,getPreviousScreenName:p,getPreviousScreenNameStandard:S,setPreviousScreenNames:v,getSiteProperty:y,getLegacyScreenName:O,getStandardScreenName:_,getMetaScreenName:E,setScreenNameDefaults:I,getCurrentScreenNames:function(){return d},setCurrentScreenNames:h}})(),window.unifiedTrackingFactory=window.unifiedTrackingFactory||function(){var n,a,t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r="First argument must be string type",o=window.unifiedTrackingFactory.instance;return o?o.config=Object.assign(o.config,e):(n=[],a=null,t=window.unifiedTrackingHandler.globals,window.unifiedTrackingFactory.instance={CORRELATED_HEADER_NAME:t.CORRELATED_HEADER_NAME,CONSENT_TYPE:t.CONSENT_TYPE,CONSENT_CONTROL_TYPE:t.CONSENT_CONTROL_TYPE,startTracking:function(e){return u("startTracking",[e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}])},trackScreenView:function(e){return u("trackScreenView",[e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}])},trackScreenState:function(e){return u("trackScreenState",[e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}])},trackUserBehavior:function(e){return u("trackUserBehavior",[e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}])},createEventId:function(){return t.createUuid()},createEventContext:function(e){return t.createEventContext(e)},startUserInteraction:function(e){return u("startUserInteraction",[e,!(1<arguments.length&&void 0!==arguments[1])||arguments[1]])},timestampUserInteraction:function(e){return u("timestampUserInteraction",[e])},stopUserInteraction:function(e){return u("stopUserInteraction",[e])},getCommonAttributes:function(e){c(arguments);var t={};return t=a?a.getCommonAttributes(e):t},getCommonAttributesEx:function(i){return c(arguments),new Promise(function(t,n){function r(){var e;a?(e=a.getCommonAttributes(i),t(e)):Date.now()-o<3e4?setTimeout(r,500):n("Timeout for getCommonAttributesEx expired")}var o=Date.now();setTimeout(r,1)})}},(o=window.unifiedTrackingFactory.instance).config=e||{},window.unifiedTrackingImpl?i():window.addEventListener("UnifiedTrackingImplLoaded",function(){i()})),o;function i(){if(a=window.unifiedTrackingImpl(o.config)){for(var e=n.length,t=0;t<e;t++)a[n[t].name].apply(this,n[t].args);n=[]}}function c(e){if(e&&0<e.length&&e[0]&&"string"!=typeof e[0])throw new Error(r)}function u(e,t){return c(arguments),a?a[e].apply(null,t):(e={name:e,args:t},n.push(e)),this}},window.unifiedTrackingFactory(),window.dispatchEvent(new Event("UnifiedTrackingReady"));