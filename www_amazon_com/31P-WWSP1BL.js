"use strict";(self.webpackChunk_amzn_stores_content_rendering_server=self.webpackChunk_amzn_stores_content_rendering_server||[]).push([[7798],{93002:function(e,t,i){i.r(t),i.d(t,{EditorialRow:function(){return H},UnobservedEditorialRow:function(){return k},default:function(){return A}});i(51494),i(42955),i(6635),i(8578),i(27678),i(83084),i(19324),i(46993),i(43452),i(67237),i(45864),i(21442),i(81892),i(19643),i(76308),i(72281),i(74354),i(74181),i(56750),i(60277),i(68064),i(69898),i(17965),i(28751),i(27268),i(13156),i(37192),i(63748);var r=i(8330),n=i.n(r),o=i(12634),l=i.n(o),a=i(31823),s=i.n(a),c=i(20827),u=i.n(c),f=i(74166),d=i.n(f),p=i(40502),h=i(40549),b=i(74130),y=i(90623),m=i(11236),g=i(25266);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function v(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function O(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,r=z(e);if(t){var n=z(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,i)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function R(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){D(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var P=s().bind(R(R({},{row:"EditorialRow__row__W3W3h",allMini:"EditorialRow__allMini__FK5Dh",half:"EditorialRow__half__UI2XB"}),{row:"EditorialRow__row__W3W3h",allMedium:"EditorialRow__allMedium__DhwQg",noText:"EditorialRow__noText__JEo76",large:"EditorialRow__large__Hc4T8",allMini:"EditorialRow__allMini__FK5Dh",half:"EditorialRow__half__UI2XB"})),E={tiles:l().arrayOf(l().shape({id:l().string,size:l().oneOf(["mini","small","medium","large"]),type:l().oneOf(Object.values(m.B)),content:l().object,mobileContent:l().object,flexHeight:l().bool})).isRequired,widgetId:l().string,activeId:l().string,rowHeight:l().number,useMobileContent:l().bool,disableVariableHeight:l().bool,addPriceDisclaimer:l().bool},M={widgetId:void 0,activeId:void 0,rowHeight:void 0,useMobileContent:void 0,disableVariableHeight:!1,addPriceDisclaimer:!1},I={pageContext:l().shape({rootPageId:l().string}),themeContext:l().shape({editorialRowDefaultVariableHeight:l().number,isCaptionBelowImage:l().bool}),isMobile:l().bool},C=["interactiveImage","product"],H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(l,e);var t,i,r,o=j(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).totalSize=function(e){return e.map((function(e){return p.Qg[e.size]})).reduce((function(e,t){return e+t}),0)},t.validateTiles=function(){var e=t.props.tiles,i=t.totalSize(e);if(8===i||4===i&&!u()({size:"medium"})(e))return!0;throw new Error("The configuration of editorial tile sizes provided is invalid. Sizes: ".concat(d()("size")(e),"; totalSize: ").concat(i))},t.addDisclaimerFlagToTiles=function(e){var i=!1,r=[];return e.forEach((function(n,o){var l=t.shouldDisplayDisclaimerOnTile(e,o,i);r.push(R(R({},n),{},{showPriceDisclaimer:l})),l&&(i=!0)})),r},t.shouldDisplayDisclaimerOnTile=function(e,i,r){var n,o=t.context.isMobile,l=e[i];return!!o&&(!r&&("mini"!==l.size?!!C.includes(l.type)&&(t.priceDisclaimerHasBeenDisplayedOnTile=!0,!0):!(t.indexOfMiniTiles(e)[i]%2)&&!(!C.includes(l.type)&&!C.includes(null===(n=e[i+1])||void 0===n?void 0:n.type))))},t.indexOfMiniTiles=function(e){var t=0;return e.map((function(e){var i=null;return"mini"===e.size&&(i=t,t+=1),i}))},t.renderTiles=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=S(t),o=r.isCaptionBelowImage,l=r.isSingleRow,a=r.rowHeight,s=t.props,c=s.activeId,u=s.widgetId,f=s.useMobileContent,d=s.disableVariableHeight,p=s.tiles,h=s.addPriceDisclaimer,m=v(new Set(p.map((function(e){return e.type}))));return e.map((function(e){return(0,g.jsxs)(n().Fragment,{children:[h&&e.showPriceDisclaimer&&(0,g.jsx)(b.Z,{"data-testid":"price-disclaimer",fromEditorialRow:!0}),(0,g.jsx)(y.Z,R({activeId:c,isGrouped:i,rowHeight:a,variableHeight:l,isCaptionBelowImage:o,useMobileContent:f,disableVariableHeight:d,siblingTileTypes:m},e))]},"".concat(u,"-").concat(e.id))}))},t.validateTiles(),t}return t=l,(i=[{key:"classes",get:function(){var e=this.isSingleRow,t=this.isAllTilesMiniSize,i=this.areAllTilesMediumSize,r=this.isTileLargeSize,n=this.areAllTilesText;return P("row",{single:e,double:!e,allMini:t,allMedium:i,large:r,noText:!n})}},{key:"areAllTilesText",get:function(){return this.props.tiles.every((function(e){return"text"===e.type}))}},{key:"isTileLargeSize",get:function(){return this.props.tiles.every((function(e){return"large"===e.size}))}},{key:"areAllTilesMediumSize",get:function(){return this.props.tiles.every((function(e){return"medium"===e.size}))}},{key:"isSingleRow",get:function(){var e=this.props.tiles;return 4===this.totalSize(e)}},{key:"isAllTilesMiniSize",get:function(){return this.props.tiles.every((function(e){return"mini"===e.size}))}},{key:"rowHeight",get:function(){var e=this.props.rowHeight,t=this.context.themeContext;return e>0?e:t&&t.editorialRowDefaultVariableHeight?t.editorialRowDefaultVariableHeight:p.AV.max/4}},{key:"isCaptionBelowImage",get:function(){var e=this.context.themeContext,t=this.props.tiles;return e&&e.isCaptionBelowImage&&this.isAllTilesMiniSize&&t.some((function(e){return e.content&&e.content.title}))}},{key:"tiles",get:function(){var e=this,t=this.props.tiles,i=this.isSingleRow,r=this.addDisclaimerFlagToTiles(t);if(1===r.length||i)return this.renderTiles(r,!1);var n=0,o=[],l=[];r.forEach((function(e){(n<4?o:l).push(e),n+=p.Qg[e.size]}));var a=[o,l];if(r.some((function(e){return"medium"===e.size}))){var s=this.props.widgetId;return a.map((function(t,i){var r=0===i?"firstHalf":"secondHalf",n="".concat(s,"-").concat(r);return(0,g.jsx)("div",{className:P("half"),children:e.renderTiles(t,!0)},n)}))}for(var c=[];this.totalSize(c)<2&&o.length>0;)c.push(o.shift());for(;this.totalSize(c)<4&&l.length>0;)c.push(l.shift());return c=c.concat(o,l),this.renderTiles(c,!1)}},{key:"render",value:function(){var e=this.props.addPriceDisclaimer,t=this.context.isMobile;return(0,g.jsxs)("div",{className:this.classes,"data-testid":"editorial-row",children:[e&&!t&&(0,g.jsx)(b.Z,{fromEditorialRow:!0,"data-testid":"price-disclaimer"}),this.tiles]})}}])&&O(t.prototype,i),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n().Component);H.propTypes=E,H.defaultProps=M,H.contextTypes=I;var k=(0,h.Z)(H,"editorialrow",!0),A=(0,h.Z)(H,"editorialrow")}}]);