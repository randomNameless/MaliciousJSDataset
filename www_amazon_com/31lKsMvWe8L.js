"use strict";(self.webpackChunk_amzn_stores_content_rendering_server=self.webpackChunk_amzn_stores_content_rendering_server||[]).push([[5103],{90623:function(e,t,i){i.d(t,{Z:function(){return ie}});i(51494),i(61161),i(8578),i(72281),i(74354),i(42955),i(74181),i(45864),i(21442),i(81892),i(19643),i(27678),i(76308),i(56750),i(60277),i(19324),i(43452),i(67237),i(37192),i(27268),i(13156);var o=i(8330),r=i.n(o),n=i(12634),l=i.n(n),a=i(31823),s=i.n(a),c=i(49350),u=i.n(c),d=i(30064),h=i.n(d),p=i(43628),g=i.n(p),y=i(51473),f=i(40502),m=i(4831),v=i(20911),_=i(82593),b=i(91927),T=i(62918),w=i(79098),O=i(29798),C=i(77209),x=i(53573),k=i(69901),E=i(1473),S=i(57410),I=i(71094),H=i(26934),P=i(39447),L=i(64242),M=i(8591),j=i(35904),B=i(58314),Z=i(51385),R=i(54910),A=i(11236),z={tile:"EditorialTile__tile__KDMau",container:"EditorialTile__container__MuV7R",content:"EditorialTile__content__Ey9JH",innerContent:"EditorialTile__innerContent__n92i8",large:"EditorialTile__large__BQsCR",ungrouped:"EditorialTile__ungrouped__X5JqN",tileLayerMargin:"EditorialTile__tileLayerMargin__baK04",grouped:"EditorialTile__grouped__uQEgj",flexHeight:"EditorialTile__flexHeight__ra4Z_",medium:"EditorialTile__medium__e6AGA",small:"EditorialTile__small__wZm10",mini:"EditorialTile__mini__XElTk",customCode:"EditorialTile__customCode__huABv",externalWidget:"EditorialTile__externalWidget__UXvnQ",image:"EditorialTile__image__i0cpQ","layout-cover":"EditorialTile__layout-cover__dDYiZ",text:"EditorialTile__text__hg3gN",isShowcase:"EditorialTile__isShowcase__biOYz",product:"EditorialTile__product__rOta5",hasTileLayers:"EditorialTile__hasTileLayers__AlIN1","no-variableHeight":"EditorialTile__no-variableHeight__JUcQo","layout-text":"EditorialTile__layout-text__rmPBt",hiddenTile:"EditorialTile__hiddenTile__ENc9K",builder:"EditorialTile__builder__tJiag",empty:"EditorialTile__empty__FrV3P",hovered:"EditorialTile__hovered__AsZou",overlay:"EditorialTile__overlay__RMD1L",active:"EditorialTile__active__w6RZo","moderation-preview":"EditorialTile__moderation-preview__UK5tc","moderation-preview-medium":"EditorialTile__moderation-preview-medium___ekca","moderation-preview-header":"EditorialTile__moderation-preview-header__EubyA","moderation-preview-small":"EditorialTile__moderation-preview-small__KI2IZ","moderation-preview-mini":"EditorialTile__moderation-preview-mini__jrTdh"},N=i(25266);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function W(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?W(Object(i),!0).forEach((function(t){V(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Q(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=K(e);if(t){var r=K(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var q=s().bind(z),J={id:l().string,activeId:l().string,size:l().oneOf(["large","medium","small","mini"]).isRequired,type:l().string,isGrouped:l().bool,content:l().shape({renderTileLayers:l().bool,tileLayers:l().arrayOf(l().shape({content:l().shape({bondCustomerServiceLink:l().bool,asinList:l().arrayOf(l().string)})})),ASINList:l().arrayOf(l().string),products:l().arrayOf(l().object),autoPlay:l().bool,mute:l().bool,videoUrl:l().string,displayOutOfStockASIN:l().bool,layout:l().string,backgroundColor:l().string,title:l().string}),mobileContent:l().shape({layout:l().string}),flexHeight:l().bool,alignProductInfo:l().bool,variableHeight:l().bool,rowHeight:l().number,uploadMobileImage:l().bool,selectable:l().bool,isCaptionBelowImage:l().bool,useMobileContent:l().bool,disableVariableHeight:l().bool,externalWidgetId:l().string,siblingTileTypes:l().arrayOf(l().oneOf(Object.values(A.B)))},X={id:void 0,activeId:void 0,type:"empty",isGrouped:void 0,content:{ASINList:[],tileLayers:[]},mobileContent:{},flexHeight:!1,rowHeight:void 0,alignProductInfo:!1,variableHeight:!1,uploadMobileImage:!1,selectable:!1,isCaptionBelowImage:!1,useMobileContent:void 0,disableVariableHeight:!1,externalWidgetId:void 0,siblingTileTypes:[]},Y={caller:l().string,pageContext:E.pn,themeContext:E.iR,requestContext:E.ci,deviceType:l().string,widgetId:l().string,widgetType:l().string,isModeration:l().bool},$={text:H.Z,image:P.Z,product:L.Z,video:M.Z,empty:j.Z,interactiveImage:B.Z,aboutAuthor:S.Z,customCode:Z.Z,mostPopularBook:I.Z,externalWidget:R.Z},ee={text:"Text",image:"Image",product:"Product",video:"Video",empty:"Empty",videoAuto:"BackgroundVideo",customCode:"CustomCode",externalWidget:"ExternalWidget"},te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(l,e);var t,i,o,n=G(l);function l(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=n.call(this,e,t)).updateTileState=function(){var e=m.ZP.isMobile(i.context);i.state.isMobile!==e&&i.setState({isMobile:e}),i.setState({tileContent:i.tileContent(i.props)})},i.debouncedResizeListener=u()(150)(i.updateTileState),i.logProductQuickLookRender=function(){"product"===i.props.type&&b.Z.log("ProductQuickLook","render","LOG","render quicklook")},i.logProductTileClick=function(){"product"===i.props.type&&b.Z.log("ProductQuickLook","tileClick","LOG","tile click")},i.componentDidMount=function(){i.updateTileState(),window.addEventListener("resize",i.debouncedResizeListener),i.logProductQuickLookRender()},i.componentWillUnmount=function(){window.removeEventListener("resize",i.debouncedResizeListener)},i.handleOnMouseOver=function(){i.setState({hover:!0})},i.handleOnMouseOut=function(){i.setState({hover:!1})},i.handleOnFocus=function(){i.setState({focus:!0})},i.handleOnBlur=function(){i.setState({focus:!1})},i.handleMeasureResize=function(e){return i.setState({tileHeight:e.bounds.height})},i.hasFullWidthImageFlexibleHeightClass=function(){var e=i.props,t=e.size,o=e.type,r=e.content,n=e.flexHeight,l=e.uploadMobileImage,a=e.mobileContent,s=e.variableHeight;if(e.disableVariableHeight)return!0;var c=i.state.tileContent.image,u=i.context.themeContext,d=m.ZP.isMobile(i.context),h=r.layout===f.No.fill&&"image"===o&&(t===f.yg.large||(null==u?void 0:u.mediumImageHasFlexHeight)&&t===f.yg.medium),p=l&&d&&t!==f.yg.mini&&a.layout===f.No.fill;return c&&n&&!s&&(h||p)},i.tileContent=function(e){var t=e.content,o=e.mobileContent,r=e.uploadMobileImage,n=e.useMobileContent,l=t.textOption,a={textOption:l,callToAction:t.callToAction,renderTileLayers:t.renderTileLayers,title:t.title,tileLayers:t.tileLayers},s=m.ZP.isMobile(i.context),c=D(D({},t),a),u=D(D(D({},o),a),{},{uploadMobileImage:r});return n||o.imageKey&&s&&r&&"textOverImage"!==l?u:c},i.state={isMobile:!!m.ZP.isDeviceTypeMobile(t),tileContent:i.tileContent(e),tileHeight:0,hover:!1,focus:!1},i.product=(0,w.wv)(e.content,t),i.weblabChecker=new v.ZP(t),i}return t=l,(i=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.product=(0,w.wv)(e.content,this.context),this.setState({tileContent:this.tileContent(e)})}},{key:"contentElement",get:function(){var e=this.showOverlay,t=this.props,i=t.id,o=t.content,r=this.asin,n=this.widgetSubType;return e?(0,N.jsx)("div",{className:z.content,"data-testid":"editorial-tile-Overlay",children:(0,N.jsxs)(O.Z,{className:z.innerContent,logAsinImpressions:!0,asin:r,widgetSubType:n,additionalData:{tileId:i},productList:o.products,inViewAsinList:[r],stopPropagation:!0,children:[(0,N.jsx)(T.Z,D({},this.overlayConfig)),this.content]})}):(0,N.jsx)("div",{className:z.content,children:(0,N.jsx)("div",{className:z.innerContent,children:this.content})})}},{key:"rowHeight",get:function(){var e=this.props,t=e.rowHeight,i=e.isCaptionBelowImage,o=this.state.isMobile,r=this.context.themeContext;return i?t+(o?r.editorialRowCaptionHeightMinusMarginMobile:r.editorialRowCaptionHeightMinusMarginDesktop):t}},{key:"asin",get:function(){var e=this.props.content,t=e.ASINList,i=h()("tileLayers[0].content.asinList")(e)||[];return t&&t.length>0?t[0]:i&&i.length>0?i[0]:""}},{key:"href",get:function(){var e=this.contentForHref;return(0,w.wS)(e,this.context)}},{key:"contentForHref",get:function(){var e=this.props.content,t=e;return e.renderTileLayers&&(t=h()("tileLayers[0].content")(e)||e),t}},{key:"isFlexHeightVideo",get:function(){var e=this.props.size,t=this.context.themeContext,i=("large"===e||"medium"===e&&t&&t.autoPlayVideoMediumHasFlexHeight)&&this.isAutoPlayVideo,o=("large"===e||"medium"===e)&&t&&t.videoHasFlexHeight;return i||o}},{key:"isAutoPlayVideo",get:function(){var e=this.props.content;return e.autoPlay&&e.mute&&e.videoUrl}},{key:"classes",get:function(){var e=this.props,t=e.size,i=e.type,o=e.isGrouped,r=e.variableHeight,n=this.state,l=n.isMobile,a=n.tileContent,s=this.context.caller,c=this.isShowcase,u=this.showTile,d=a.renderTileLayers,h=a.tileLayers,p=void 0===h?[]:h,g=a.layout,y=this.hasFullWidthImageFlexibleHeightClass()||this.isFlexHeightVideo;return q(["tile",t,i],V({builder:s===f.Qd.BUILDER,grouped:o,ungrouped:!o,isShowcase:c,flexHeight:y,"no-variableHeight":!r,hiddenTile:!u,hasTileLayers:d,tileLayerMargin:p.length&&d&&l&&"large"===t},"layout-".concat(g),!!g))}},{key:"content",get:function(){var e,t=this.props,i=t.flexHeight,o=t.alignProductInfo,r=t.variableHeight,n=t.rowHeight,l=t.isCaptionBelowImage,a=t.size,s=t.type,c=t.id,u=t.useMobileContent,d=t.externalWidgetId,h=t.siblingTileTypes,p=this.state,g=p.tileContent,y=p.tileHeight,f=p.hover,m=p.isMobile,v=p.focus,_=this.useProductGridItem,b=D(D({},g),{},{size:a,flexHeight:i,alignProductInfo:o,variableHeight:r,rowHeight:n,isCaptionBelowImage:l,useProductGridItem:_,tileHeight:y,type:s,id:c,useMobileContent:u,hover:f,focus:v,isMobile:m,externalWidgetId:d,siblingTileTypes:h});return e=this.isShowcase?C.Z:$[s]||j.Z,this.product&&!this.isExternalWidget&&(this.isShowcase?b=D(D({},b),this.product):b.products=[this.product]),(0,N.jsx)(e,D({},b))}},{key:"hideOutOfStockASIN",get:function(){return!1===this.props.content.displayOutOfStockASIN}},{key:"isShowcase",get:function(){var e=this.props,t=e.size,i=e.content;return"product"===e.type&&"large"===t&&"showcase"===i.layout}},{key:"isExternalWidget",get:function(){return"externalWidget"===this.props.type}},{key:"opacity",get:function(){var e=this.props,t=e.type,i=e.content,o=this.context.themeContext,r=void 0===o?{}:o;return this.isShowcase||i.renderTileLayers?0:g()(r.editorialTileOverlayOpacity,["editorialTileOverlayOpacityOverrides",t,i.layout],r)}},{key:"showTile",get:function(){var e=this.props,t=e.size,i=e.type,o=this.context.caller,r=this.product;return!(o===f.Qd.CNUBA&&!r&&this.isShowcase||o!==f.Qd.BUILDER&&r&&"product"===i&&"large"===t&&this.hideOutOfStockASIN&&r.availabilityStatus===f.S7.OUT_OF_STOCK)}},{key:"styles",get:function(){var e=this.props,t=e.variableHeight,i=e.size,o=e.type,r=this.rowHeight,n=this.context.themeContext,l=void 0===n?{}:n;if(l.disableSetHeightThroughStyleForSmallVariableHeightImage&&t&&"small"===i&&"image"===o)return{};var a=l.isCaptionBelowImage&&"mini"===i&&"image"===o;if((t||a)&&r>0){var s=r/375,c=1/f.Qg[i];return{paddingBottom:"".concat(c*s*100,"%")}}return{}}},{key:"wrapper",get:function(){return this.context.caller===f.Qd.BUILDER?x.Z:"div"}},{key:"useProductGridItem",get:function(){var e=this.props,t=e.size,i=e.type,o=this.context.themeContext;return"mini"===t&&"product"===i&&(void 0===o?{}:o).editorialRowUsesProductGridItem}},{key:"showOverlay",get:function(){var e=this.props.type;return"mostPopularBook"!==e&&"video"!==e&&"interactiveImage"!==e&&"customCode"!==e&&"externalWidget"!==e&&"aboutAuthor"!==e&&!this.isShowcase&&!this.useProductGridItem||this.isCallerBuilder||this.isAutoPlayVideo}},{key:"overlayConfig",get:function(){var e,t,i,o=this.props,r=o.id,n=o.content,l=o.type,a=this.context.themeContext,s=void 0===a?{}:a,c=this.product,u=n.renderTileLayers,d=n.backgroundColor||s.editorialTileOverlayBackgroundColor,h=u?void 0:d,p=this.isBondCustomerServiceLink?{"data-click-type":_.uh.OTHER}:{};return this.href&&(i="product"===l?""===(t=(null==c?void 0:c.title)||"")?"view product":t:"learn more",e="link"),{id:r,backgroundColor:h,href:this.href,className:z.overlay,title:t,ariaLabel:i,role:e,opacity:this.opacity,opacityIncreaseOnHover:u&&!this.isCallerBuilder?0:s.editorialTileOverlayOpacityIncreaseOnHover,zIndex:this.isCallerBuilder?1:void 0,additionalProps:p,onMouseOver:this.handleOnMouseOver,onMouseOut:this.handleOnMouseOut,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,onClick:"product"===l?this.logProductTileClick:void 0}}},{key:"isBondCustomerServiceLink",get:function(){var e=this.contentForHref;return!!e.bondCustomerServiceLink&&e.bondCustomerServiceLink}},{key:"isCallerBuilder",get:function(){return this.context.caller===f.Qd.BUILDER}},{key:"measuredContentElement",get:function(){var e=this;return(0,N.jsx)(y.Z,{bounds:!0,onResize:this.handleMeasureResize,children:function(t){var i=t.measureRef;return r().cloneElement(e.contentElement,{ref:i})}})}},{key:"widgetSubType",get:function(){var e=this.props,t=e.type,i=e.content,o=e.size,r=this.isAutoPlayVideo,n=ee[t];if("image"===t&&void 0!==i.title){var l="WithText";"mini"!==o&&"text"===i.layout&&(l=l.concat("Overlay")),n=n.concat(l)}else"video"===t&&r&&(n=ee[t.concat("AUTO")]);return n}},{key:"render",value:function(){if(!this.showTile)return null;var e=this.props,t=e.id,i=e.selectable,o=e.content,r=e.size,n=e.type,l=this.context.isModeration,a=this.classes,s=this.wrapper,c=this.styles,u=D({id:t,className:a},this.isCallerBuilder&&{selectable:i}),d=o.renderTileLayers&&this.isCallerBuilder?this.measuredContentElement:this.contentElement;return l&&(d=(0,N.jsx)(k.Z,{widgetType:n,className:q("moderation-preview","moderation-preview-".concat(r)),headerClassName:q("moderation-preview-header"),children:d})),(0,N.jsx)(s,D(D({},u),{},{children:(0,N.jsx)("div",{className:q("container"),style:c,"data-testid":"".concat(r,"-editorial-tile"),children:d})}))}}])&&Q(t.prototype,i),o&&Q(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(r().Component);te.propTypes=J,te.contextTypes=Y,te.defaultProps=X;var ie=te}}]);