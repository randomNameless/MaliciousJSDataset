!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("CAAS_AOLCOM",[],e):"object"==typeof exports?exports.CAAS_AOLCOM=e():t.CAAS_AOLCOM=e()}(self,(function(){return function(){var t={75497:function(t){t.exports={dispatchCustomEvent:function(t,e){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!1,!1,e),document.dispatchEvent(n)}}},42830:function(t){t.exports={debounce:function(t,e,n){var o;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var l=this,u=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||t.apply(l,i)}),e),u&&t.apply(l,i)}}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return function(){"use strict";n.r(o),n.d(o,{default:function(){return v}});var t=n(42830),e={ERROR:"ERROR",WARN:"WARN"};function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function a(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.id=e.id,this.config=e,this.elem=n||document.getElementById(this.id),this.status=0)}return n=t,o=[{key:"placement",get:function(){return this.config.placement}},{key:"region",get:function(){return this.config.region||"index"}},{key:"isRendered",get:function(){return 2===this.status}},{key:"create",value:function(){var t,e,n,o,r;1!==this.status&&(null===(t=window.benji)||void 0===t||null===(e=t.render)||void 0===e||e.call(t,(n={},o=this.id,r=this.getConfig(),(o=a(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n)),this.status=1)}},{key:"getConfig",value:function(){return{id:this.id,mode:this.config.mode,container:this.id,placement:this.config.placement,targetType:this.config.targetType,region:this.region}}},{key:"handleWindowScroll",value:function(){0===this.status&&this._validateViewability()&&this.create()}},{key:"onRender",value:function(t){this.status=2}},{key:"onNoContent",value:function(t){var e;this.status=3,null===(e=this.onEmptyCallback)||void 0===e||e.call(this,t)}},{key:"setOnEmptyCallback",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.onEmptyCallback=t}},{key:"_validateViewability",value:function(){return 0!==this.status||"lazy"!==this.config.region||this.elem.getBoundingClientRect().top<window.innerHeight+600}}],r=[{key:"fromElement",value:function(n){var o,r,i=(null===(r=window.newrelic)||void 0===r?void 0:r.noticeError)||console.error;if(!n)return i("[Taboola ".concat(e.WARN,"] Element not found"));try{o=JSON.parse(n.dataset.config)}catch(t){return i("[Taboola ".concat(e.ERROR,"] Error parsing config for', ").concat(null==n?void 0:n.id))}return new t(o,n)}}],o&&i(n.prototype,o),r&&i(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,r}(),u=n(75497);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,y(o.key),o)}}function y(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}var v=new(function(){return e=function t(e){var n,o=e.selector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elems=function(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var o=e.length;return f(e,o)}return t(e,n)}(s,document.querySelectorAll(o)),null!==(n=window.benji)&&void 0!==n&&n.isReady?this.init():window.addEventListener("benji:ready",this.init.bind(this))},n=[{key:"init",value:function(){window._taboola||(window._taboola=[]),this._taboola=window._taboola,this._addTaboolaEventListeners(),this.positions=this.elems.map((function(t){var e=t.querySelector(".m-taboola__placement");return e?l.fromElement(e):null})).filter(Boolean),this.positions.forEach((function(t){"index"===t.region&&t.create()})),this._addEventListeners(),this._addPublicInterface(),(0,u.dispatchCustomEvent)("Taboola:inited",{})}},{key:"createTaboolaPlacement",value:function(t){var e=l.fromElement(t);return e?(this.positions.push(e),e):console.error("[Taboola] error creating placement")}},{key:"_handleRenderEvent",value:function(t){var e=t.detail,n=e.container,o=void 0===n?null:n,r=e.variant;o&&("abp-mode"!==r?this.positions.forEach((function(t){(o===t.elem||t.elem.contains(o))&&t.onRender(e)})):this._handleNoContentEvent(t))}},{key:"_handleNoContentEvent",value:function(t){var e=t.detail,n=e.placement,o=void 0===n?null:n;this.positions.forEach((function(t){o===t.placement&&t.onNoContent(e)}))}},{key:"_addTaboolaEventListeners",value:function(){this._taboola.push({listenTo:"render",handler:this._handleRenderEvent.bind(this)}),this._taboola.push({listenTo:"nocontent",handler:this._handleNoContentEvent.bind(this)})}},{key:"_addEventListeners",value:function(){window.addEventListener("scroll",(0,t.debounce)(this._handleWindowScroll.bind(this),100)),this._handleWindowScroll()}},{key:"_handleWindowScroll",value:function(){this.positions.forEach((function(t){t.handleWindowScroll()}))}},{key:"_addPublicInterface",value:function(){window.Taboola={createPlacement:this.createTaboolaPlacement.bind(this)}}}],n&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}())({selector:".m-taboola"})}(),o}()}));
//# sourceMappingURL=taboola.js.map