
var YPCA=window.YPCA||{};YPCA.Utils=(function($){"use strict";var utils={getMapsConfig:function(){var mapsConfig=utils.parseJSONGracefully($('.jsMapsApiConfig').html());if(Object.keys(mapsConfig).length>0){return mapsConfig;}
return null;},isUndefined:function(obj){return typeof obj==='undefined';},isDefined:function(obj){return typeof obj!=='undefined';},queryParametersToJSON:function(loc){var jsonNodes={},result=false,param,params=loc.slice(loc.indexOf('?')+1).split('&');if(loc.indexOf('?')!==-1){for(var i=0;i<params.length;i++){param=params[i].split('=');jsonNodes[param[0]]=decodeURIComponent(param[1]||'');}
result=JSON.parse(JSON.stringify(jsonNodes));}
return result;},parseJSONGracefully:function(jsonString){try{return JSON.parse(jsonString);}catch(e){return{};}},parseJSON:function(jsonString){var json;try{return JSON.parse(jsonString);}catch(e){console.log(e.toString());}
return json;},publisher:{subscribers:{any:[]},subscribe:function(type,fn,context){type=type||'any';fn=typeof fn==="function"?fn:context[fn];if(typeof this.subscribers[type]==="undefined"){this.subscribers[type]=[];}
this.subscribers[type].push({fn:fn,context:context||this});},remove:function(type,fn,context){this.visitSubscribers('unsubscribe',type,fn,context);},publish:function(type,publication){this.visitSubscribers('publish',type,publication);},visitSubscribers:function(action,type,arg,context){var pubtype=type||'any',subscribers=this.subscribers[pubtype],i,max=subscribers?subscribers.length:0;for(i=0;i<max;i+=1){if(action==='publish'){subscribers[i].fn.call(subscribers[i].context,arg);}else if(subscribers[i].fn===arg&&subscribers[i].context===context){subscribers.splice(i,1);}}}},makePublisher:function(o){var i;for(i in YPCA.Utils.publisher){if(YPCA.Utils.publisher.hasOwnProperty(i)&&typeof YPCA.Utils.publisher[i]==="function"){o[i]=YPCA.Utils.publisher[i];}}
o.subscribers={any:[]};},namespace:function(ns_string){var parts=ns_string.split('.'),parent=YPCA,i;if(parts[0]==="YPCA"){parts=parts.slice(1);}
for(i=0;i<parts.length;i+=1){if(typeof parent[parts[i]]==="undefined"){parent[parts[i]]={};}
parent=parent[parts[i]];}
return parent;},urlParamHash:function(name,str){var results,str=str||window.location.href;if(name==='#'){results=new RegExp('[\\#]([^?#]*)').exec(str);}else{results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(str);}
return(results!==null)?decodeURIComponent(results[1]):0;},isLocalStorageNameSupported:function(){var testKey='test',storage=window.sessionStorage;try
{storage.setItem(testKey,'1');storage.removeItem(testKey);return true;}
catch(error)
{return false;}},storageAPI:(function(){var get=function get(type,name){return type==='local'?window.localStorage.getItem(name):window.sessionStorage.getItem(name);},getJSON=function get(type,name){return _parseJSON(name,type==='local'?window.localStorage.getItem(name):window.sessionStorage.getItem(name));},set=function set(type,name,data){if(data instanceof Object){data=JSON.stringify(data);}
if(type==='local'){window.localStorage.setItem(name,data);}else if(utils.isLocalStorageNameSupported()){window.sessionStorage.setItem(name,data);}},remove=function clear(name){window.sessionStorage.removeItem(name);},_parseJSON=function(name,values){try{values=JSON.parse(values);if(values instanceof Object){if(jQuery.isEmptyObject(values)){remove(name);values=null;}}}catch(e){remove(name);console.log('Error parsing JSON');values=null;}
return values;};return{get:get,getJSON:getJSON,set:set,remove:remove};}())};return{getMapsConfig:utils.getMapsConfig,isLocalStorageNameSupported:utils.isLocalStorageNameSupported,isUndefined:utils.isUndefined,isDefined:utils.isDefined,publisher:utils.publisher,makePublisher:utils.makePublisher,namespace:utils.namespace,urlParamHash:utils.urlParamHash,storageAPI:utils.storageAPI,queryParametersToJSON:utils.queryParametersToJSON,parseJSONGracefully:utils.parseJSONGracefully,parseJSON:utils.parseJSON};}(window.jQuery));YPCA.Utils.makePublisher(YPCA);
"use strict";var YPCA=window.YPCA||{};YPCA.Analytics=(function(jQuery){var previous={"lk_name":"null"},touchTimer=null,touchStarted=false;var analytics={analyticsCallback:null,analyticsGroups:{},clicksCount:0,TIMEOUT_BETWEEN_CLICKS:700,RIGHT_BUTTON:2,DONE:0,init:function(analyticsCallback){this.analyticsCallback=analyticsCallback;},clicks:function(e,analyticsJson){if(YPCA.Utils.isDefined(analyticsJson)&&analyticsJson!==""&&previous.lk_se_id!=analyticsJson.lk_se_id||previous.lk_name!=analyticsJson.lk_name){var analytics=typeof analyticsJson==="object"&&analyticsJson!==null?analyticsJson:JSON.parse(analyticsJson),dataAnalytics=YPCA.Utils.isDefined(analytics['data-analytics'])?analytics['data-analytics']:analytics;if(YPCA.Utils.isDefined(e)){var $currentTarget=null;if(e!==null){$currentTarget=jQuery(e.currentTarget)
dataAnalytics=this.mergeAnalytics($currentTarget,dataAnalytics);}
if(e===null||this.checkSendClick($currentTarget)){this._processClick(dataAnalytics);}}}},_processClick:function(analyticsJson){if(YPCA.Utils.isDefined(this.analyticsCallback)&&this.analyticsCallback!==null){this.analyticsCallback.click(analyticsJson);this.sendClickEvent(analyticsJson);}},_loadGroups:function(){var self=this;jQuery('[data-analytics-resource]').each(function(index,resource){try{self.analyticsGroups=jQuery.extend(self.analyticsGroups,JSON.parse(jQuery(resource).html()));}catch(e){console.log('Found invalid JSON resource at: '+resource);}});},attachAnalyticsEvent:function(binding,selector,event){var self=this;event=typeof event!=='undefined'?event:'click';jQuery(selector).on(event,function(e){if(self.analyticsGroups.hasOwnProperty(binding)&&self.analyticsGroups[binding].hasOwnProperty("analytics")){self.clicks(e,self.analyticsGroups[binding]['analytics']);}})},submit:function(target,callback){var $targetDataAnalyticsAttribute=YPCA.Utils.isDefined(target)?jQuery(target).attr('data-analytics'):undefined;if(YPCA.Utils.isDefined($targetDataAnalyticsAttribute)){this.clicks(target,YPCA.Utils.parseJSONGracefully($targetDataAnalyticsAttribute));}
else{console.log("missing analytics on form");}
if(YPCA.Utils.isDefined(callback)){window.setTimeout(function(){callback();},100);}},sendClickEvent:function(analyticsJson){if(YPCA.Utils.isDefined(analyticsJson)&&analyticsJson.hasOwnProperty('lk_name')){var analyticsClickEvent={type:"analytics-click",name:analyticsJson.lk_name};jQuery.event.trigger(analyticsClickEvent);}},sendCustomPageViewjQueryEvent:function(analyticsJson){if(YPCA.Utils.isDefined(analyticsJson)&&analyticsJson.hasOwnProperty('pg_name')){var analyticsPageViewEvent={type:"analytics-view",name:analyticsJson.pg_name,context:analyticsJson};jQuery.event.trigger(analyticsPageViewEvent);}},mergeAnalytics:function(target,analyticsJson){if(YPCA.Utils.isDefined(analyticsJson.extra_merge)&&analyticsJson.extra_merge==="true"){var dataAnalyticsCommon=this.getAnalyticsCommon(target);for(var key in dataAnalyticsCommon){if(dataAnalyticsCommon.hasOwnProperty(key)&&!analyticsJson.hasOwnProperty(key)&&YPCA.Utils.isDefined(dataAnalyticsCommon[key])){analyticsJson[key]=dataAnalyticsCommon[key];}}}
delete analyticsJson.extra_merge;return analyticsJson;},checkSendClick:function(target){if(YPCA.Utils.isDefined(target)){var $target=jQuery(target),analyticsGroupName=$target.attr('data-analytics-name');if(YPCA.Utils.isDefined(analyticsGroupName)){var $analyticsGroupElement=$target.closest('[data-analytics-group='+analyticsGroupName+']');if($analyticsGroupElement.length>0){if($analyticsGroupElement.attr('data-analytics-clicksent')==='true'){return false;}else{$analyticsGroupElement.attr('data-analytics-clicksent','true');}}}}
return true;},getAnalyticsCommon:function(target){var dataAnalyticsCommon={};if(YPCA.Utils.isDefined(target)&&target!==null){var $parentDiv=jQuery(target).closest("[data-analytics-common]");if($parentDiv.length>0){var $parentDivAnalytics=$parentDiv.attr('data-analytics-common');if($parentDivAnalytics.length>0){dataAnalyticsCommon=YPCA.Utils.parseJSONGracefully($parentDivAnalytics);}}}
return dataAnalyticsCommon;},fireExtraPageEvents:function(){if(typeof window.analytics_extra_page_events!=='undefined'&&window.analytics_extra_page_events instanceof Array){for(var i=0;i<window.analytics_extra_page_events.length;i++){this.clicks(null,window.analytics_extra_page_events[i]);}}},triggerPageView:function(resourcePrefix,pageNumber,pageType,type){if(YPCA.Utils.isDefined(resourcePrefix)){var analyticsResource='#'+resourcePrefix,typeAnalytics=YPCA.Utils.isDefined(type)&&type!==''?type:'VIEW';if(YPCA.Utils.isDefined(pageNumber)&&pageNumber!==null){analyticsResource+=pageNumber;}
var analyticsConfig=jQuery(analyticsResource);if(analyticsConfig.length>0){var analyticsData=analyticsConfig.html().replace(/@@TYPE@@/g,pageType);if(YPCA.Utils.isUndefined(window.tc_vars)){window.tc_vars=YPCA.Utils.parseJSONGracefully(analyticsData);}else{if(YPCA.Utils.isDefined(tc_vars.pg_category1)){analyticsData=analyticsData.replace(/@@SUBTYPE@@/g,tc_vars.pg_category1);}
this.pageView(YPCA.Utils.parseJSONGracefully(analyticsData),typeAnalytics);}}}},pageView:function(analyticsJson,type){var typeAnalytics=YPCA.Utils.isDefined(type)&&type!==''?type:'VIEW',self=this;if(YPCA.Utils.isDefined(analyticsJson)){if(YPCA.Utils.isDefined(this.analyticsCallback)&&this.analyticsCallback!==null){this.analyticsCallback.page(analyticsJson,typeAnalytics);}
self.sendCustomPageViewjQueryEvent(analyticsJson);}},resendCurrentPageView:function(){if(YPCA.Utils.isDefined(window.tc_vars)){this.pageView(window.tc_vars);}},sendCustomPageView:function(customVar,type){var localTcVars=YPCA.Utils.isDefined(customVar)&&customVar!==''?customVar:window.tc_vars,typeAnalytics=YPCA.Utils.isDefined(type)&&type!==''?type:'VIEW';if(YPCA.Utils.isDefined(localTcVars)){this.pageView(localTcVars,typeAnalytics);}},mergeAndTriggerPageView:function(resourcePrefix){if(YPCA.Utils.isDefined(resourcePrefix)){var analyticsResource='[id^="'+resourcePrefix+'"]',analyticsConfig=jQuery(analyticsResource),$mergeAnalyticsConfig='';if(analyticsConfig.length>0){$mergeAnalyticsConfig=jQuery.extend(window.tc_vars,YPCA.Utils.parseJSONGracefully(analyticsConfig.last().html()));this.pageView($mergeAnalyticsConfig);}}},handleMouseAction:function(target,e){if(YPCA.Utils.isDefined(target.attr('data-analytics'))){var event=target.attr('data-analytics-event');if(!YPCA.Utils.isDefined(event)||event==='mousedown'){e.stopPropagation();this.clicks(e,YPCA.Utils.parseJSONGracefully(target.attr('data-analytics')));}}},initDataAnalyticsListeners:function(){var self=this;jQuery('body').on({touchstart:function(e){if(!analytics.touchStarted){analytics.touchStarted=true;analytics.touchTimer=setTimeout(function(){analytics.touchStarted=false;var targetElement=jQuery(e.currentTarget),tagName=targetElement.prop("tagName");if(tagName!=="OPTION"&&tagName!=="SELECT"){analytics.previous={};self.handleMouseAction(targetElement,e);analytics.previous=YPCA.Utils.parseJSONGracefully(targetElement.attr('data-analytics'));}},1000);}},touchmove:function(e){if(analytics.touchTimer){clearTimeout(analytics.touchTimer);analytics.touchTimer=undefined;}},touchend:function(e){if(analytics.touchTimer){clearTimeout(analytics.touchTimer);analytics.touchTimer=undefined;}
analytics.touchStarted=false;},mousedown:function(e){analytics.clicksCount++;if(analytics.clicksCount===1||e.button===analytics.RIGHT_BUTTON){setTimeout(function(){analytics.clicksCount=0;},analytics.TIMEOUT_BETWEEN_CLICKS);if(e.button===analytics.RIGHT_BUTTON){analytics.clicksCount=0;}
var targetElement=jQuery(e.currentTarget),tagName=targetElement.prop("tagName");if(tagName!=="OPTION"&&tagName!=="SELECT"){analytics.previous={};self.handleMouseAction(targetElement,e);analytics.previous=YPCA.Utils.parseJSONGracefully(targetElement.attr('data-analytics'));}}}},'[data-analytics]');},initPinContentRightClickDataAnalyticsListeners:function(){var self=this;jQuery('.leaflet-popup-content').on({mousedown:function(event){if(event.button===analytics.RIGHT_BUTTON){var $currentTarget=jQuery(event.currentTarget),tagName=$currentTarget.prop("tagName");if(tagName!=="OPTION"&&tagName!=="SELECT"){analytics.previous={};self.handleMouseAction($currentTarget,event);analytics.previous=YPCA.Utils.parseJSONGracefully($currentTarget.attr('data-analytics'));}}}},'[data-analytics]');}};var $document=jQuery(document);$document.on('change','select',function(e){var targetElement=jQuery(e.currentTarget),selectedChildren=targetElement.children("option:selected")||undefined;if(YPCA.Utils.isDefined(selectedChildren)){YPCA.Analytics.handleMouseAction(selectedChildren,e);}});$document.on('submit','[data-analytics-event="submit"]',function(e){YPCA.Analytics.submit(jQuery(e.currentTarget));});$document.ready(function(){YPCA.Analytics._loadGroups();YPCA.Analytics.initDataAnalyticsListeners();});jQuery(window).load(function(){YPCA.Analytics.fireExtraPageEvents();});return{_processClick:analytics._processClick,_loadGroups:analytics._loadGroups,attachAnalyticsEvent:analytics.attachAnalyticsEvent,checkSendClick:analytics.checkSendClick,clicks:analytics.clicks,handleMouseAction:analytics.handleMouseAction,handleMobileTouch:analytics.handleMobileTouch,fireExtraPageEvents:analytics.fireExtraPageEvents,getAnalyticsCommon:analytics.getAnalyticsCommon,init:analytics.init,mergeAnalytics:analytics.mergeAnalytics,mergeAndTriggerPageView:analytics.mergeAndTriggerPageView,pageView:analytics.pageView,resendCurrentPageView:analytics.resendCurrentPageView,sendClickEvent:analytics.sendClickEvent,sendCustomPageView:analytics.sendCustomPageView,sendCustomPageViewjQueryEvent:analytics.sendCustomPageViewjQueryEvent,submit:analytics.submit,triggerPageView:analytics.triggerPageView,initDataAnalyticsListeners:analytics.initDataAnalyticsListeners,initPinContentRightClickDataAnalyticsListeners:analytics.initPinContentRightClickDataAnalyticsListeners};}(window.jQuery));
"use strict";var $YPCA=jQuery.noConflict(),YP=window.YP||{};YP.Utils=(function($YPCA,window){var isDevicePhone,isDeviceDesktop,isDeviceTablet;const windowElement=$YPCA(window);const bodyElement=$YPCA("body");$YPCA(function(){isDevicePhone=bodyElement.hasClass("jsDevicePhone");isDeviceDesktop=bodyElement.hasClass("jsDeviceDesktop");isDeviceTablet=bodyElement.hasClass("jsDeviceTablet");});var utils={stickyElementTop:null,stickyElementTopOffset:null,publicFunctions:{convertDataToJSON:function(data){var json;try{json=JSON.parse(data.html());}catch(e){}
return json;},isUndefined:function(obj){return typeof obj==='undefined';},isDefined:function(obj){return typeof obj!=='undefined';},isDevicePhone:function(){return isDevicePhone;},isDeviceDesktop:function(){return isDeviceDesktop;},isDeviceTablet:function(){return isDeviceTablet;},isDefinedAndNotEmpty:function(obj){return YP.Utils.isDefined(obj)&&obj.length!==0;},defaultIfNullOrEmpty:function(obj,defaultValue){return YP.Utils.isDefined(obj)&&obj.length!==0?obj:defaultValue;},isPageScrollable:function(){return $YPCA(document).height()>windowElement.height();},queryParametersToJSON:function(loc){var jsonNodes={},result=false,param,params=loc.slice(loc.indexOf('?')+1).split('&');if(loc.indexOf('?')!==-1){for(var i=0;i<params.length;i++){param=params[i].split('=');jsonNodes[param[0]]=decodeURIComponent(param[1]||'');}
result=JSON.parse(JSON.stringify(jsonNodes));}
return result;},urlParamHash:function(name,str){var results,url=str||window.location.href;if(name==='#'){results=new RegExp('[\\#]([^?#]*)').exec(url);}else{results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(url);}
return(results!==null)?decodeURIComponent(results[1]):0;},removeParam:function(key,sourceURL){return YP.Utils.removeParams([key],sourceUrl);},removeParams:function(keys,sourceURL){var splitUrl=sourceURL.split("?"),baseUrl=splitUrl[0],result=baseUrl,queryString=(splitUrl.length===2)?splitUrl[1]:"",param,urlParams;if(queryString!==""){urlParams=queryString.split("&");for(var k=keys.length-1;k>=0;k-=1){for(var i=urlParams.length-1;i>=0;i-=1){param=urlParams[i].split("=")[0];if(param===keys[k]){urlParams.splice(i,1);}}}
if(urlParams.join("&")!==''){result=baseUrl+"?"+urlParams.join("&");}}
return result;},isEnterKeyPressed:function(e){return YP.Utils.isKeyPressed(e,13);},isTabKeyPressed:function(e){return YP.Utils.isKeyPressed(e,9);},isSpaceKeyPressed:function(e){return YP.Utils.isKeyPressed(e,32);},isEscapeKeyPressed:function(e){return YP.Utils.isKeyPressed(e,27);},isUpOrDownArrowKeyPressed:function(e){return YP.Utils.isKeyPressed(e,38)||YP.Utils.isKeyPressed(e,40);},isDownArrowKeyPressed:function(e){return YP.Utils.isKeyPressed(e,40);},isShiftKeyPressed:function(e){return YP.Utils.isKeyPressed(e,16);},isDeleteKeyPressed:function(e){return YP.Utils.isKeyPressed(e,46);},isBackspaceKeyPressed:function(e){return YP.Utils.isKeyPressed(e,8);},isKeyPressed:function(e,keyValue){var key=e.which||e.keyCode;return key===keyValue;},getJson:function($elem){if($elem.length!==0){return JSON.parse($YPCA($elem).html());}
return null;},isEmptyObject:function(object){return JSON.stringify(object)==='{}';},stickyElement:function(stickyPositionTop,elemSticky,limitElem){var $stickyElement=YP.Utils.isDefined(elemSticky)&&elemSticky.length>0?elemSticky:$YPCA('#home_anchora_list').find('.jsElemSticky'),hasCobrandHeader=$YPCA('#cobrandHeader').find('.cobrandHeader').length>0;if(YP.Utils.isDeviceDesktop()){utils.stickyElementTop=YP.Utils.isDefined(stickyPositionTop)?stickyPositionTop:$stickyElement.offset().top;utils.stickyElementTopOffset=utils.stickyElementTop;YP.Utils.setParentHeight($stickyElement);windowElement.scroll(function(){var windowScrollTop=windowElement.scrollTop();if(windowElement.width()>1024){var topPosition=hasCobrandHeader?0:$YPCA('#ypg_Header').find('.jsHeader').height(),limitElement=YP.Utils.isDefined(limitElem)?limitElem:$YPCA(".jsFooter").offset().top,limit=limitElement-topPosition-$stickyElement.height();if(windowScrollTop>utils.stickyElementTopOffset){$stickyElement.addClass('position-fixed').css('top',topPosition);}else{$stickyElement.removeClass('position-fixed').removeAttr('style');}
if(limitElement&&limit<windowScrollTop){var diff=(limit-windowScrollTop)+topPosition;$stickyElement.css({top:diff});}}else{$stickyElement.removeClass('position-fixed').removeAttr('style');}});}},setParentHeight:function($elem){var h=$elem.height(),parent=$elem.parent();if(parent.hasClass('jsParentHeight')){parent.height(h);windowElement.resize(function(){parent.height(h);});}},createCharacterRemaining:function(textField,charCounter,event){var nbCharLeft=charCounter.data('maxlength')-textField.val().length,textOutput=nbCharLeft<0?0:nbCharLeft,maxlength=charCounter.data('maxlength');charCounter.html(textOutput).toggleClass('noMoreChar',nbCharLeft===0);if(textField.val().length>=maxlength){event.preventDefault();textField.val(textField.val().substr(0,maxlength));return false;}},createExpandCollapseText:function(text,numWords,label){var paragraph=$YPCA.trim(text),showMoreText="&nbsp;<a href=\"#\" class=\"jsToggleCollapsedAction show-more-action open\" data-more='"+label.showmore+"' data-less='"+label.showless+"'><span class=\"jsToggleCollapsedActionLabel show-more-action__label\">"+label.showmore+"</span></a>";var newParagraph=paragraph.split(" ").slice(0,numWords).join(" "),newParagraphHidden=paragraph.split(" ").slice(numWords).join(" ");if(newParagraphHidden!==''){newParagraph+="<span class=\"jsExpandCollapseHiddenText extra-text extra-text__hidden\"> "+newParagraphHidden+"</span>"+showMoreText;return newParagraph;}
return text;},getConfigJson:function($elem){var config=null;if($elem.length!==0){var html=$elem.html();config=JSON.parse(html);}else{console.error('The element you are trying to call don\'t exist');}
return config;},scrollPage:function($target){var offset=$YPCA('.jsHeaderWrapper .ypg-header__wrapper').css('position')==='fixed'?70:0;if($target.length!==0){$YPCA('html,body').animate({scrollTop:$target.offset().top-offset},500);return false;}},setAnalyticsModalClose:function(modalElem){var $elem=$YPCA(modalElem.currentTarget),$closeBtn=$elem.find('.jsClose'),analytics=$YPCA('[data-modal-analytic-close]').attr('data-modal-analytic-close');modalElem.modal.on('hidden.bs.modal',function(){$elem.off('mousedown');$elem.html('');bodyElement.removeAttr('style');});if(YP.Utils.isDefined(analytics)&&analytics.indexOf("lk")!==-1){modalElem.modal.on('shown.bs.modal',function(){$YPCA('.modal-backdrop').attr('data-analytics',analytics);$closeBtn.attr('data-analytics',analytics);});$elem.find('.jsAnalyticsOverlay').on('mousedown',function(e){if($YPCA(e.target).hasClass('jsAnalyticsOverlay')){YPCA.Analytics.clicks(e.target,JSON.parse(analytics));}});}},getSiteLanguage:function(){const htmlElement=$YPCA('html');var sitelanguage=htmlElement.attr('lang')||htmlElement.attr('xml:lang');if(YP.Utils.isDefined(sitelanguage)){return sitelanguage.substr(0,2);}else{console.error('The Html tag does not contain attribute lang');}},isEnglishSite:function(){return YP.Utils.getSiteLanguage()==='en';},isFrenchSite:function(){return YP.Utils.getSiteLanguage()==='fr';},getHandlebarHtml:function(selectorSource,data){if($YPCA(selectorSource).length!==0){var source=$YPCA(selectorSource).html(),template=Handlebars.compile(source);return template(data);}else{console.error('missing handlebarHtml '+selectorSource);}},getBookingParam:function(){var params=YP.Utils.queryParametersToJSON(window.location.search);if(!YP.Utils.isDefined(params.guests)&&!YP.Utils.isDefined(params.date)&&!YP.Utils.isDefined(params.hr)&&!YP.Utils.isDefined(params.min)){params=false;}
return params;},getMapProvider:function(){var config=YP.Utils.getJson($YPCA('.jsMapsApiConfig'));return config.mapProvider;},changeAnalyticValue:function($elems,attr,key,newValue){$elems.each(function(){const self=$YPCA(this);var analytics=self.attr(attr),object=JSON.parse(analytics);object[key]=newValue;self.attr(attr,JSON.stringify(object));});},doubleEncoding:function(value){return encodeURIComponent($YPCA.trim(value).replace(/\//g,'%2F').replace(/\\/g,'%5C').replace(/\?/g,'%3F').replace(/\;/,'%3B'));},mergeArrayOfObject:function(arr1,arr2,compareAttr){var combined=arr1;for(var i=0;i<arr1.length;i++){var posFound=-1;for(var j=0;posFound===-1&&j<arr2.length;j++){if(arr1[i][compareAttr]===arr2[j][compareAttr]){for(var key in arr2[j]){combined[i][key]=arr2[j][key];}
posFound=j;}}
if(posFound!==-1){arr2.splice(posFound,1);}}
return combined.concat(arr2);},setValueInCookiePref:function(cookieName,key,value){var cookieDomain=YP.Utils.getConfigJson($YPCA('#jsGenConfig')).cookieDomain,cookie=JSON.parse($YPCA.cookie(cookieName));cookie[key]=value;$YPCA.cookie(cookieName,JSON.stringify(cookie),{expires:YP_COMMON.COOKIES.EXPIRED_DAYS,path:'/',domain:cookieDomain});},toggleSetAttributesValues:function(target,attributes,values){target.attr(attributes,values);},dynamicAnalytics:function(dataSelector){var $configAnalyticGallery=$YPCA(dataSelector),overlayAnalytics;if(typeof dataSelector==='object'){overlayAnalytics=dataSelector;}else if($configAnalyticGallery.length>0){overlayAnalytics=JSON.parse($configAnalyticGallery.html());}
YP.Utils.setDynamicElements(overlayAnalytics);},setDynamicElements:function(jsonAnalytics){if(YP.Utils.isDefined(jsonAnalytics)){$YPCA.each(jsonAnalytics,function(selector,json){$YPCA(selector).attr("data-analytics",JSON.stringify(json));});}},capitalizeTitle:function(str){var stringToCapitalize=str+'';var articles=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|v.?|vs.?|via)$/i;var pattern=/([A-Za-z0-9\u00C0-\u00FF])/;var separators=/([ :–—-])/;return stringToCapitalize.split(separators).map(function(cur,index,array){if(cur.search(articles)>-1&&index!==0&&index!==array.length-1&&array[index-3]!==':'&&array[index+1]!==':'&&(array[index+1]!=='-'||(array[index-1]==='-'&&array[index+1]==='-'))){return cur.toLowerCase();}
if(cur.substr(1).search(/[A-Z]|\../)>-1){return cur;}
if(array[index+1]===':'&&array[index+2]!==''){return cur;}
return cur.replace(pattern,function(match){return match.toUpperCase();});}).join('');}}};return utils.publicFunctions;})($YPCA,window);
"use strict";var $YPCA=jQuery.noConflict(),YP=window.YP||{},dataLayer=window.dataLayer||[];YP.Analytics=(function($YPCA){var analyticSettings={analytics:{},analyticsOverlay:{},analyticsShare:{},analyticsAutocomplete:{},analyticsReview:{},analyticsSmarttips:{},analyticsSendEventOnceList:["star1","star2","star3","star4","star5"]};var uiAnalyticsCallback={click:function(analyticsJson){YP.Analytics.pushToDatalayer(analyticsJson.lk_name,analyticsJson);},page:function(analyticsJson,type){YP.Analytics.pushToDatalayer(analyticsJson.lk_name,analyticsJson);}};YPCA.Analytics.init(uiAnalyticsCallback);var analytics={_initAnalyticsOverlay:function(){var $configAnalytic=$YPCA('#analytics-resource-overlay');if($configAnalytic.length>0&&$YPCA.isEmptyObject(analyticSettings.analyticsOverlay)){analyticSettings.analyticsOverlay=JSON.parse($configAnalytic.html());}},_initAnalyticsAutocomplete:function(){var $configAnalytic=$YPCA('#autocomplete-analytics-resource');if($configAnalytic.length>0&&$YPCA.isEmptyObject(analyticSettings.analyticsAutocomplete)){analyticSettings.analyticsAutocomplete=JSON.parse($configAnalytic.html());}},_initAnalyticsReview:function(){var $configAnalytic=$YPCA('#analytics-resource-review');if($configAnalytic.length>0&&$YPCA.isEmptyObject(analyticSettings.analyticsReview)){analyticSettings.analyticsReview=JSON.parse($configAnalytic.html());}},_initAnalyticsSmarttips:function(){var $configAnalytic=$YPCA('#analytics-resource-smarttips');if($configAnalytic.length>0&&$YPCA.isEmptyObject(analyticSettings.analyticsSmarttips)){analyticSettings.analyticsSmarttips=JSON.parse($configAnalytic.html());$YPCA.each(analyticSettings.analyticsSmarttips,function(selector,json){$YPCA(selector).attr("data-analytics",JSON.stringify(json));});$YPCA("div.post_recent article.post_short a").on("mousedown",function(){var $this=$YPCA(this),curData=$this.data("analytics");curData.lk_name=$this.attr('href');$this.attr("data-analytics",JSON.stringify(curData));});}},setDataAnalytics:function(data){$YPCA.each(data,function(selector,json){$YPCA(selector).attr("data-analytics",JSON.stringify(json));});},buildAnalytic:function(key,value){return"'"+key+"':'"+value+"'";},publicFunctions:{showMapOverlay:function(){YPCA.Analytics.triggerPageView('analytics-map-resource');},showSelectLocationOverlay:function(){YPCA.Analytics.triggerPageView('analytics-select-location-resource');},showOverlay:function(overlayName,type){var typeAnalytics=YP.Utils.isDefined(type)&&type!==''?type:'VIEW';YPCA.Analytics.triggerPageView('analytics-overlay-resource',null,overlayName,typeAnalytics);},hideOverlay:function(){var hideOverlayJson={'tags':{'anametrix':'true'}};$YPCA.extend(hideOverlayJson,tc_vars);YPCA.Analytics.pageView(hideOverlayJson);},showRateResults:function(formQuestion){YPCA.Analytics.triggerPageView('rateResultsAnalytics',null,formQuestion);},setAnalyticTopBar:function(){analytics.setDataAnalytics($YPCA('body').hasClass('expandMap')?analyticSettings.analytics.merchandSmallCardAnalytics:analyticSettings.analytics.merchandCardAnalytics);},callShareAnalytic:function(provider){YPCA.Analytics.clicks(this,analyticSettings.analyticsShare[provider]);},callOverlayAnalytic:function(handle){YPCA.Analytics.clicks(this,analyticSettings.analyticsOverlay[handle]);},callReviewAnalytic:function(handle){YPCA.Analytics.clicks(this,analyticSettings.analyticsReview[handle]);},searchWhat:function(user,txt,idx,isMerchantDetail,mid){if(YP.Utils.isDefined(analyticSettings.analyticsAutocomplete.autocomplete_what)){$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_what["data-analytics"],{"lk_what_user":user});$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_what["data-analytics"],{"lk_what_ac_txt":txt});$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_what["data-analytics"],{"lk_what_ac_idx":idx});if(isMerchantDetail){$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_what["data-analytics"],{"lk_name":"busnameautocomplete-mp"});$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_what["data-analytics"],{"lk_listing_id":mid});$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_what["data-analytics"],{"lk_directory_heading":"[]"});}
YPCA.Analytics.clicks(this,analyticSettings.analyticsAutocomplete.autocomplete_what);}},searchWhere:function(user,txt,idx){if(YP.Utils.isDefined(analyticSettings.analyticsAutocomplete.autocomplete_where)){$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_where["data-analytics"],{"lk_where_user":user});$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_where["data-analytics"],{"lk_where_ac_txt":txt});$YPCA.extend(analyticSettings.analyticsAutocomplete.autocomplete_where["data-analytics"],{"lk_where_ac_idx":idx});YPCA.Analytics.clicks(this,analyticSettings.analyticsAutocomplete.autocomplete_where);}},analyticsForMap:function($elemSelector,dataAttr,newData){$elemSelector.each(function(index,elem){var $elem=$YPCA(elem);$elem.attr('data-analytics',JSON.stringify($YPCA.extend($elem.data(dataAttr),newData)));});},initAnalytics:function(){var $configAnalytic=$YPCA('#analytics-resource');if($configAnalytic.length>0&&$YPCA.isEmptyObject(analyticSettings.analytics)){analyticSettings.analytics=JSON.parse($configAnalytic.html());analytics.setDataAnalytics(analyticSettings.analytics.multimediaAnalytics);}},getVisitorId:function(){try{var tracker=ga.getAll();return tracker[0].get("clientId");}catch(e){return"";}},pushToDatalayer:function(event,analyticsJson){dataLayer.push({'event':event,'analyticsData':analyticsJson});}}};$YPCA(function(){analytics._initAnalyticsOverlay();analytics._initAnalyticsAutocomplete();analytics._initAnalyticsReview();analytics._initAnalyticsSmarttips();});return analytics.publicFunctions;})($YPCA);
