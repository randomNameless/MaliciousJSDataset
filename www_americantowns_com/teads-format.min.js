(()=>{var __webpack_modules__={2301:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,".teads-overlay{background-color:#000;cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}",""]),e.exports=s.toString()},4491:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,".teads-inread{box-sizing:content-box;height:0;overflow:hidden;transition:height .5s}.teads-inread.no-transition{transition:none}div.teads-inread div:after,div.teads-inread div:before{display:none!important}div.teads-inread.teads-display{margin-bottom:10px!important}",""]),e.exports=s.toString()},4170:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,'.teads-inread .teads-ui-components-adchoices{background:url("data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iZnVsbCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48c3ZnIHN0eWxlPSJ0ZXh0LXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247ZmlsbC1vcGFjaXR5OjE7ZmlsbDojMDBhZWNkO3N0cm9rZTpub25lIj48Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iLjY3Ii8+PHBhdGggZD0iTTQuMiAxMS4zcS0uOS41LS45LS41NVY0LjFxMC0xIDEtLjZMMTAuNCA3cTEuNi41IDAgMWwtMy43NSAyVjcuNzVhLjY1LjY1IDAgMSAwLTEuMyAwdjNhLjkuOSAwIDAgMCAxLjMuOEwxMi43IDguMnExLS43IDAtMS41TDMuMyAxLjZxLTEuMS0uMy0xLjUuOXYxMHEuNCAxLjQgMS41LjhsMS41LS44YS4zLjMgMCAxIDAtLjYtMS4yWiIvPjwvc3ZnPjwvc3ZnPg==");background-position:100%;background-repeat:no-repeat;background-size:15px 15px;color:#000;cursor:pointer;font-family:arial;font-size:11px;height:15px;line-height:15px;padding:1px;position:absolute;right:5px;top:3px;width:15px;z-index:1}.teads-inread .teads-ui-components-adchoices.expanded:first-child{background-color:hsla(0,0%,100%,.8);border-bottom-left-radius:8px;padding:1px 17px 1px 4px}.teads-inread .teads-ui-components-adchoices.expanded{padding-right:19px;width:auto}.teads-inread .teads-ui-components-adchoices span{display:none!important}.teads-inread .teads-ui-components-adchoices.expanded span{display:inline!important}',""]),e.exports=s.toString()},5033:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,"div.teads-inread div.teads-ui-components-credits{color:#585858!important;font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;height:26px!important;letter-spacing:.3px!important;line-height:26px!important;padding:1px 4px 1px 0!important;text-align:right!important}div.teads-inread div.teads-ui-components-credits a span{display:inline!important}div.teads-inread div.teads-ui-components-credits a,div.teads-inread div.teads-ui-components-credits a span{box-shadow:none!important;font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;letter-spacing:.3px!important}div.teads-inread.sm-screen div.teads-ui-components-credits a,div.teads-inread.sm-screen div.teads-ui-components-credits a span,div.teads-inread.xs-screen div.teads-ui-components-credits a,div.teads-inread.xs-screen div.teads-ui-components-credits a span{box-shadow:none!important;font-family:Helvetica,Arial,sans-serif!important;font-size:9px!important;letter-spacing:.3px!important}div.teads-inread.sm-screen div.teads-ui-components-credits{font-size:9px!important;letter-spacing:.3px!important}div.teads-inread .teads-ui-components-credits a{background:none!important;border:none!important;color:#585858!important;font-weight:300!important;letter-spacing:.3px!important;padding:0!important;text-decoration:none!important}div.teads-inread.sm-screen .teads-ui-components-credits a,div.teads-inread.xs-screen .teads-ui-components-credits a{font-size:9px!important;letter-spacing:.3px!important}div.teads-inread div.teads-ui-components-credits span.teads-ui-components-credits-colored{color:#025c9a!important}div.teads-inread div.teads-ui-components-credits a:after,div.teads-inread div.teads-ui-components-credits a:before,div.teads-inread div.teads-ui-components-credits span:after,div.teads-inread div.teads-ui-components-credits span:before{display:none!important}",""]),e.exports=s.toString()},5253:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,"div.teads-display-absolute{background-attachment:fixed;background-repeat:repeat-y;overflow:hidden!important;pointer-events:none!important;position:absolute!important;z-index:99!important}.teads-display-fixed{background-repeat:repeat-y!important;position:fixed!important}.teads-display-clickzone{display:block!important;height:100%!important;position:absolute!important;top:0!important;width:100%!important}.teads-video-scroller{position:fixed;top:50%;transform:translateY(-50%)}div.teads-display-format{position:sticky;-webkit-position:sticky}div.teads-display-format .icon-close{background-image:url({{assetsPath}}/default/player-sprite.svg)!important;background-size:650px 40px!important}div.teads-display-format .icon-close,div.teads-display-format .sm-screen .icon-close,div.teads-display-format .xs-screen .icon-close{background-position:-80px 0!important;height:11px!important;width:11px!important}div.teads-display-format .teads-ui-component-closebutton svg{display:none!important}div.teads-ui-component-closebutton .components-countdown{bottom:20px!important;display:none!important;left:2px!important;position:absolute!important}div.teads-display-format .teads-ui-component-closebutton .components-countdown .countdown-circle>li{color:#fff!important}div.teads-display-format .teads-ui-component-closebutton .components-countdown .show,div.teads-display-format .teads-ui-component-closebutton .show{display:block!important}div.teads-display-format .teads-ui-component-closebutton .show .close-button{opacity:.8!important}div.teads-display-format .teads-ui-component-closebutton .show:hover .close-button.show{opacity:1!important}div.teads-display-format .sm-screen .teads-ui-component-closebutton .closebutton,div.teads-display-format .xs-screen .teads-ui-component-closebutton .closebutton{padding:10px 10px 15px 15px!important}",""]),e.exports=s.toString()},2421:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,".teads-inread .teads-ui-components-hpl{display:none;left:-1000px;position:absolute;z-index:-100}",""]),e.exports=s.toString()},4421:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,"div.teads-inread div.teads-ui-components-label{color:#585858;font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;font-weight:300!important;height:21px!important;letter-spacing:.3px!important;line-height:21px!important;text-align:center!important;text-transform:uppercase!important}div.teads-inread div.teads-ui-components-label:after,div.teads-inread div.teads-ui-components-label:before{display:none!important}div.teads-inread.sm-screen div.teads-ui-components-label,div.teads-inread.xs-screen div.teads-ui-components-label{font-size:10px!important}",""]),e.exports=s.toString()},1511:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,'.teads-inread .teads-ui-components-smart-header{height:21px;margin-bottom:2px!important}.teads-inread .teads-ui-components-smart-header .smart-header-content{background-color:#434343!important;line-height:21px;padding:1px 6px 0;position:absolute!important;right:0!important}.smart-header-content .close-button-smart .icon-close{transition:.1s;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;-ms-transition:.1s}.smart-header-content .adChoices-button-smart,.smart-header-content .close-button-smart,.smart-header-content .sound-button-smart{cursor:pointer;display:inline-block}.smart-header-content .adChoices-button-smart,.smart-header-content .close-button-smart{margin-right:5px}.smart-header-content .close-button-smart .icon-close{background-image:url({{assetsPath}}/default/player-sprite.svg);background-position:-80px 0;height:11px;width:11px}.smart-header-content .adChoices-button-smart{background:url("data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iZnVsbCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48c3ZnIHN0eWxlPSJ0ZXh0LXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247ZmlsbC1vcGFjaXR5OjE7ZmlsbDojZmZmO3N0cm9rZTpub25lIj48Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iLjY3Ii8+PHBhdGggZD0iTTQuMiAxMS4zcS0uOS41LS45LS41NVY0LjFxMC0xIDEtLjZMMTAuNCA3cTEuNi41IDAgMWwtMy43NSAyVjcuNzVhLjY1LjY1IDAgMSAwLTEuMyAwdjNhLjkuOSAwIDAgMCAxLjMuOEwxMi43IDguMnExLS43IDAtMS41TDMuMyAxLjZxLTEuMS0uMy0xLjUuOXYxMHEuNCAxLjQgMS41LjhsMS41LS44YS4zLjMgMCAxIDAtLjYtMS4yWiIvPjwvc3ZnPjwvc3ZnPg==");height:13px;width:13px}.icon-muteoff{background-position:-390px 0}.icon-muteon{background-position:-445px 0}.icon-muteoff,.icon-muteon{background-image:url({{assetsPath}}/default/player-sprite.svg);height:11px;width:16px}',""]),e.exports=s.toString()},8237:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,'body{-webkit-touch-callout:none;border:none;font-family:Helvetica,Arial,sans-serif!important;font-weight:300;margin:0;padding:0;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#layout-video-component{height:100%;position:relative;width:100%}#vpaid-container{background-color:#000;position:relative;z-index:1}.teads-ui-component-progressbar{bottom:0;left:0;position:absolute}.teads-ui-component-progressbar .progress{background-color:#86c3f7;height:3px;transition:all .4s linear;width:0}.teads-ui-component-playpausebutton{background-image:url({{assetsPath}}/default/img/play.png);background-position:0 0;background-repeat:no-repeat;background-size:contain;bottom:10px;cursor:pointer;height:20px;left:10px;position:absolute;width:20px}.teads-ui-component-playpausebutton.playing{background-image:url({{assetsPath}}/default/img/pause.png)}.teads-ui-component-fullscreenbutton{background-image:url({{assetsPath}}/default/img/fullscreen.png);background-position:0 0;background-repeat:no-repeat;background-size:contain;bottom:5px;cursor:pointer;height:16px;position:absolute;right:30px;width:16px}.teads-ui-component-progresstext{height:30px;margin:0 40px 0 60px;padding:4px;text-align:center}.teads-ui-component-skipbutton{background-color:#ccc;border:1px solid #000;bottom:40px;font-family:Helvetica,Arial,sans-serif!important;height:20px;padding:4px;position:absolute;right:4px;text-align:center;width:100px}.adchoices-icon{background:url("data:image/svg+xml;base64,PHN2ZyBiYXNlUHJvZmlsZT0iZnVsbCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48c3ZnIHN0eWxlPSJ0ZXh0LXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247ZmlsbC1vcGFjaXR5OjE7ZmlsbDojMDBhZWNkO3N0cm9rZTpub25lIj48Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iLjY3Ii8+PHBhdGggZD0iTTQuMiAxMS4zcS0uOS41LS45LS41NVY0LjFxMC0xIDEtLjZMMTAuNCA3cTEuNi41IDAgMWwtMy43NSAyVjcuNzVhLjY1LjY1IDAgMSAwLTEuMyAwdjNhLjkuOSAwIDAgMCAxLjMuOEwxMi43IDguMnExLS43IDAtMS41TDMuMyAxLjZxLTEuMS0uMy0xLjUuOXYxMHEuNCAxLjQgMS41LjhsMS41LS44YS4zLjMgMCAxIDAtLjYtMS4yWiIvPjwvc3ZnPjwvc3ZnPg==")}.teads-ui-component-label{color:#999;display:none;font-family:Helvetica,Arial,sans-serif!important;font-size:12px;height:21px;line-height:21px;padding:3px 0;text-align:center;text-transform:uppercase}.fullscreen .teads-ui-component-label,.fullscreen .teads-ui-component-label.show{display:none!important}.teads-ui-component-credits{color:#999;display:none;font-size:12px;height:26px;line-height:26px;padding:3px 0;text-align:right}.fullscreen .teads-ui-component-credits,.fullscreen .teads-ui-component-credits.show{display:none!important}.sm-screen .teads-ui-component-label,.xs-screen .teads-ui-component-label{font-size:10px}.teads-ui-component-credits a{color:#999;text-decoration:none}.teads-ui-component-credits-blue{color:#79bbe9}.teads-ui-component-soundbutton{bottom:0;cursor:pointer;display:none;opacity:0;padding:13px 18px 18px 6px;position:absolute;right:0;transition:opacity 175ms linear}.teads-ui-component-soundbutton.show{display:block;opacity:.8}.teads-ui-component-soundbutton:hover{opacity:1}.teads-ui-component-closebutton{cursor:pointer;display:none;padding:15px;position:absolute;right:0;top:0;transition:opacity 175ms linear}.teads-ui-component-closebutton.show{display:block}.teads-ui-component-closebutton svg{display:none}.teads-ui-component-closebutton .countdown{bottom:20px;display:none;left:2px;position:absolute}.teads-ui-component-closebutton .countdown.show{display:block}.teads-ui-component-closebutton .countdown .countdown-circle>li{color:#fff}.fullscreen .teads-ui-component-closebutton .countdown.show{display:none!important}.teads-ui-component-closebutton.show .close-button{opacity:.8}.teads-ui-component-closebutton.show:hover .close-button.show{opacity:1}.sm-screen .teads-ui-component-closebutton .closebutton,.xs-screen .teads-ui-component-closebutton .closebutton{padding:10px 10px 15px 15px}.teads-ui-component-hourglass{display:none;height:18px;position:absolute;right:16px;top:0;transition:opacity 175ms linear;width:18px}.teads-ui-component-hourglass.center{right:11px;top:11px}.teads-ui-component-hourglass.show{display:flex!important}.teads-ui-component-hourglass svg{display:none}.teads-ui-component-hourglass .countdown{align-items:center;display:none;flex:1;flex-direction:row;height:100%;justify-content:center}.teads-ui-component-hourglass .countdown.show{display:flex!important}.teads-ui-component-hourglass .countdown .countdown-circle,.teads-ui-component-hourglass .countdown .countdown-circle>li{align-items:center;display:flex!important;flex:1;flex-direction:row;height:100%;justify-content:center}.teads-ui-component-hourglass .countdown .countdown-circle>li{color:#fff}.teads-ui-component-hourglass .countdown .countdown-circle>li:after{font-size:.7rem;position:relative;top:0}.teads-ui-component-clickbutton{cursor:pointer;display:none;left:0;position:absolute;top:0;-webkit-transition:background-color .25s;transition:background-color .25s}.teads-ui-component-clickbutton .text{background-color:rgba(0,0,0,.1);border:1px solid #fff;color:#fff;font-size:12px;margin:10px;max-height:30px;padding:6px 10px;text-align:center;white-space:nowrap}.teads-ui-component-clickbutton .text:hover{background-color:rgba(0,0,0,.25)}.sm-screen .teads-ui-component-clickbutton .text,.xs-screen .teads-ui-component-clickbutton .text{margin:5px;padding:5px}.teads-ui-component-clicktoplay{background-color:#000;cursor:pointer;display:none;height:100%;left:0;position:absolute;top:0;width:100%;z-index:10!important}.teads-ui-component-clicktoplay .icon-watchmore{left:50%;margin-left:-8px;margin-right:-10px;opacity:.8;position:absolute;top:50%;transition:opacity 175ms linear}.sm-screen .teads-ui-component-clicktoplay .icon-watchmore,.xs-screen .teads-ui-component-clicktoplay .icon-watchmore{margin-left:-5px;margin-right:-7px}.teads-ui-component-clicktoplay:hover .icon-watchmore{opacity:1}.teads-ui-component-endscreen{align-items:center;background-color:#000;display:none;height:100%;justify-content:center;left:0;opacity:0;position:absolute;text-align:center;top:0;transition:opacity 175ms ease;width:100%;word-spacing:nowrap;z-index:10!important}.teads-ui-component-endscreen.show{display:flex!important;opacity:1!important}.teads-ui-component-endscreen .adchoices{background-position:100%;background-repeat:no-repeat;background-size:15px 15px;border-bottom-left-radius:8px;cursor:pointer;font-family:arial;font-size:11px;height:15px;line-height:15px;padding:1px;position:absolute;right:0;top:0;width:15px}.teads-ui-component-endscreen .close-button:not(.hide)~.sm-screen .teads-ui-component-endscreen .adchoices,.teads-ui-component-endscreen .close-button:not(.hide)~.xs-screen .teads-ui-component-endscreen .adchoices{right:30px;top:12px}.teads-ui-component-endscreen .close-button:not(.hide)~.adchoices{right:35px;top:14px}.teads-ui-component-endscreen .adchoices.expanded{background-color:hsla(0,0%,100%,.8)!important}.teads-ui-component-endscreen .adchoices span{display:none}.teads-ui-component-endscreen .adchoices.expanded span{display:inline}.tea .teads-ui-component-endscreen .countdown .countdown-timer svg{opacity:0}.teads-ui-component-endscreen .countdown{bottom:18px;color:#fff;left:18px;position:absolute}.sm-screen .teads-ui-component-endscreen .countdown,.xs-screen .teads-ui-component-endscreen .countdown{bottom:5px;left:5px}.teads-ui-component-endscreen .close-button{cursor:pointer;padding:15px;position:absolute;right:0;top:0}.teads-ui-component-endscreen .button-container{position:absolute}.teads-ui-component-endscreen .button{cursor:pointer;display:block;height:70px;margin-bottom:40px;transition:opacity 175ms ease;width:100%}.sm-screen .teads-ui-component-endscreen .button{height:40px;margin-bottom:15px!important}.xs-screen .teads-ui-component-endscreen .button{height:32px;margin-bottom:15px!important}.xs-screen .teads-ui-component-endscreen .button.replay-button{margin-bottom:15px!important}.teads-ui-component-endscreen .button:last-child{margin-bottom:0!important}.teads-ui-component-endscreen.show .button{opacity:.8!important}.teads-ui-component-endscreen.show .button:hover{opacity:1!important}.teads-ui-component-endscreen.show .button.edge-touch-screen,.teads-ui-component-endscreen.show .button.edge-touch-screen:hover{opacity:.8!important}.teads-ui-component-endscreen .button .icon{border:2px solid #294355;border-radius:35px;float:left;height:66px;width:66px}.sm-screen .teads-ui-component-endscreen .button .icon{height:36px;width:36px}.xs-screen .teads-ui-component-endscreen .button .icon{align-items:center;border-width:1px;display:flex;height:30px;justify-content:center;width:30px}.teads-ui-component-endscreen .button .icon span{display:block;height:30px;margin:18px 22px;width:30px}.sm-screen .teads-ui-component-endscreen .button .icon span{height:20px;margin:7px 10px;width:16px}.xs-screen .teads-ui-component-endscreen .button .icon span{height:20px;margin:0;width:16px}.teads-ui-component-endscreen .button .text{color:#294355;float:left;font-size:23px;height:70px;line-height:70px;padding-left:25px}.sm-screen .teads-ui-component-endscreen .button .text{font-size:17px;height:40px;line-height:40px;padding-left:20px}.xs-screen .teads-ui-component-endscreen .button .text{font-size:14px;height:30px;line-height:30px;padding-left:15px}.teads-ui-component-endscreen .countdown{color:#294355;display:none}.teads-ui-component-uibutton.ui-invisible{text-decoration:line-through}.teads-ui-component-uibutton{background-color:#fff;border:1px solid #000;bottom:5px;color:#000;cursor:pointer;font-size:12px;height:16px;position:absolute;right:5px;text-align:center;text-decoration:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;vertical-align:middle;width:16px}@-webkit-keyframes load{0%{stroke-dashoffset:0}}@keyframes load{0%{stroke-dashoffset:0}}.countdown-circle{display:inline-block;margin:0;padding:0;position:relative;text-align:center}.countdown-circle>li:after{content:attr(data-countdown);font-size:1rem;left:0;position:absolute;text-align:center;top:.4rem;width:100%}.countdown-circle>li{color:#93a2ac;display:inline-block;font-family:Helvetica,Arial,sans-serif!important;font-weight:100;position:relative;text-align:center}.countdown-circle svg{height:30px;width:30px}.countdown-circle svg:nth-child(2){left:0;position:absolute;top:0;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}.countdown-circle svg:nth-child(2) path{fill:none;stroke-width:20;stroke-dasharray:629;stroke:#999;opacity:.9}.teads-ui-component-brandlogo{webkit-transition:background-color .25s;background-position-x:left;background-position-y:bottom;background-repeat:no-repeat;background-size:contain;bottom:0;cursor:pointer;display:none;height:10%;left:0;margin-bottom:18px;margin-left:10px;max-height:50px;opacity:.8;position:absolute;transition:background-color .25s;width:20%}.sm-screen .teads-ui-component-brandlogo,.xs-screen .teads-ui-component-brandlogo{height:15%;margin-left:5px;width:30%}.teads-ui-component-adchoices{background-position:100%;background-repeat:no-repeat;background-size:15px 15px;border-bottom-left-radius:8px;cursor:pointer;font-family:arial;font-size:11px;line-height:15px;position:absolute;right:0;top:0}.teads-ui-component-adchoices.expanded{background-color:hsla(0,0%,100%,.8);padding:1px 17px 1px 4px;width:auto}.teads-ui-component-adchoices span{display:none}.teads-ui-component-adchoices.expanded span{display:inline}.teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices{right:35px;top:14px}.sm-screen .teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices,.xs-screen .teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices{right:30px;top:12px}.fullscreen .teads-ui-component-adchoices,.fullscreen .teads-ui-component-adchoices.show{display:none!important}.teads-ui-component-startscreen{background-color:#fff;-webkit-box-shadow:inset 0 0 85px rgba(0,0,0,.1);-moz-box-shadow:inset 0 0 85px rgba(0,0,0,.1);box-shadow:inset 0 0 85px rgba(0,0,0,.1);height:100%;position:absolute;width:100%}.teads-ui-component-bannervideobottom .container{align-items:center;background-color:#fff;border:1px solid #dfe6e9;border-top:0 solid #dfe6e9;bottom:0;box-sizing:border-box;cursor:pointer;display:flex;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;height:81px;justify-content:center;position:absolute;width:100%;z-index:1000}.teads-ui-component-bannervideobottom .cta{background-color:#03a9f4;border-radius:4px;color:#fff;display:block;overflow:hidden;padding:12px;text-align:center;text-decoration:none;transition:.4s;white-space:nowrap}.teads-ui-component-bannervideobottom .cta:hover{background-color:#027fb7}.show{display:block!important}.show:hover{opacity:1!important}.hide{display:none;opacity:0}',""]),e.exports=s.toString()},6743:(e,t,i)=>{var n=i(6758),s=i(935)(n);s.push([e.id,".icon-book{background-position:0 0;height:29px;width:26px}.sm-screen .icon-book,.xs-screen .icon-book{background-position:-35px 0;height:20px;width:18px}.icon-close{background-position:-60px 0;height:15px;width:15px}.sm-screen .icon-close,.xs-screen .icon-close{background-position:-80px 0;height:11px;width:11px}.icon-closeendscreen{background-position:-100px 0;height:15px;width:15px}.sm-screen .icon-closeendscreen,.xs-screen .icon-closeendscreen{background-position:-120px 0;height:11px;width:11px}.icon-collapse{background-position:-140px 0;height:15px;width:15px}.icon-contact{background-position:-160px 0;height:23px;width:28px}.sm-screen .icon-contact,.xs-screen .icon-contact{background-position:-195px 0;height:16px;width:20px}.icon-download{background-position:-220px 0;height:25px;width:20px}.sm-screen .icon-download,.xs-screen .icon-download{background-position:-245px 0;height:17px;width:14px}.icon-learnmore{background-position:-305px 0;height:28px;width:23px}.sm-screen .icon-learnmore,.xs-screen .icon-learnmore{background-position:-335px 0;height:20px;width:17px}.icon-muteoff{background-position:-360px 0;height:15px;width:22px}.sm-screen .icon-muteoff,.xs-screen .icon-muteoff{background-position:-390px 0;height:11px;width:16px}.icon-muteon{background-position:-415px 0;height:15px;width:22px}.sm-screen .icon-muteon,.xs-screen .icon-muteon{background-position:-445px 0;height:11px;width:16px}.icon-replay{background-position:-470px 0;height:29px;width:23px}.sm-screen .icon-replay,.xs-screen .icon-replay{background-position:-500px 0;height:20px;width:16px}.icon-shop{background-position:-525px 0;height:29px;width:29px}.sm-screen .icon-shop,.xs-screen .icon-shop{background-position:-560px 0;height:20px;width:20px}.icon-signup{background-position:-585px 0;height:31px;width:26px}.sm-screen .icon-signup,.xs-screen .icon-signup{background-position:-620px 0;height:22px;width:18px}.icon-watchmore{background-position:-645px 0;height:20px;width:16px}.sm-screen .icon-watchmore,.xs-screen .icon-watchmore{background-position:-670px 0;height:14px;width:11px}.icon-book,.icon-close,.icon-closeendscreen,.icon-collapse,.icon-contact,.icon-download,.icon-learnmore,.icon-muteoff,.icon-muteon,.icon-replay,.icon-shop,.icon-signup,.icon-watchmore{background-size:690px 40px}.no-svg .icon-book,.no-svg .icon-close,.no-svg .icon-closeendscreen,.no-svg .icon-collapse,.no-svg .icon-contact,.no-svg .icon-download,.no-svg .icon-learnmore,.no-svg .icon-muteoff,.no-svg .icon-muteon,.no-svg .icon-replay,.no-svg .icon-shop,.no-svg .icon-signup,.no-svg .icon-watchmore{background-image:url({{assetsPath}}/default/player-sprite.png)}.icon-book,.icon-close,.icon-closeendscreen,.icon-collapse,.icon-contact,.icon-download,.icon-learnmore,.icon-muteoff,.icon-muteon,.icon-replay,.icon-shop,.icon-signup,.icon-watchmore{background-image:url({{assetsPath}}/default/player-sprite.svg)}",""]),e.exports=s.toString()},4916:(e,t,i)=>{var n=i(6758),s=i(935),o=i(8237),r=i(6743),a=s(n);a.i(o),a.i(r),a.push([e.id,".teads-ui-component-earlyclickoverlay,.teads-ui-component-fullscreenbutton{background:none;height:100%;position:absolute;right:0;top:0;width:100%}.fullscreen .teads-ui-component-fullscreenbutton,.fullscreen .teads-ui-component-fullscreenbutton .show{height:45px;width:45px;z-index:10!important}.teads-ui-component-fullscreenbutton .icon-collapse{display:none;margin-left:20px;margin-top:10px}.fullscreen .teads-ui-component-fullscreenbutton .icon-collapse{display:block}.fullscreen .teads-ui-component-closebutton .icon-close{display:none}",""]),e.exports=a.toString()},935:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,s,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),t.push(c))}},t}},6758:e=>{"use strict";e.exports=function(e){return e[1]}},6083:(e,t,i)=>{"use strict";function n(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}([function(e,t){e.exports={criticalProperties:["deviceAspectRatio","devicePixelRatio","js.webGlRenderer","screenWidthHeight","rendererRef","audioRef","js.deviceMotion","html.video.ap4x","html.video.av1"]}},function(e,t,i){t.a=function(e,t){t=t||5381;for(var i=0;i<e.length;i++)t=33*t^e.charCodeAt(i);return String(t>>>0)}},function(e,t,i){t.a=function(e,t){if(void 0!==window.matchMedia)for(var i in t)if(window.matchMedia("("+e+":"+t[i]+")").matches)return t[i]+""}},function(e,t,i){t.a=function(e){if(document.createElement)try{var t=document.createElement("video");if(t.canPlayType)switch(t.canPlayType(e)){case"":return!1;case"probably":return!0}}catch(e){}}},function(e,t,i){t.a=function(){return!!window.CanvasRenderingContext2D}},function(e,t,i){i.r(t),t.default=function(){try{return window.screen.width+"/"+window.screen.height}catch(e){}}},function(e,t,i){var n={"./audioRef.js":7,"./deviceAspectRatio.js":8,"./devicePixelRatio.js":9,"./html.video.ap4x.js":10,"./html.video.av1.js":11,"./js.deviceMotion.js":12,"./js.webGlRenderer.js":13,"./rendererRef.js":14,"./screenWidthHeight.js":5};function s(e){var t=o(e);return i(t)}function o(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id=6},function(e,t,i){i.r(t);var n=i(1);t.default=function(e,t){if(void 0!==e)return t(e);var i=null;try{if(!(i=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100)))return t();var s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;var o=i.createDynamicsCompressor();o.threshold&&(o.threshold.value=-50),o.knee&&(o.knee.value=40),o.ratio&&(o.ratio.value=12),o.reduction&&(o.reduction.value=-20),o.attack&&(o.attack.value=0),o.release&&(o.release.value=.25),s.connect(o),o.connect(i.destination),s.start(0),i.startRendering(),i.oncomplete=function(e){for(var i=!1,s=0;s<e.renderedBuffer.length;s++)i=Object(n.a)(e.renderedBuffer.getChannelData(0)[s].toString(),i);i&&t(i),o.disconnect()}}catch(e){t()}}},function(e,t,i){i.r(t);var n=i(2),s=i(5);t.default=function(e){if(void 0!==e)return e;var t=["2/3","40/71","3/4","16/9","16/10","375/667","9/16","10/16","375/812","207/448"],i=Object(s.default)();return i&&t.push(i),Object(n.a)("device-aspect-ratio",t)}},function(e,t,i){i.r(t),t.default=function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e+""}},function(e,t,i){i.r(t);var n=i(3);t.default=function(e){return void 0!==e?e:Object(n.a)('video/quicktime; codecs="ap4x"')}},function(e,t,i){i.r(t);var n=i(3);t.default=function(e){return void 0!==e?e:Object(n.a)('video/mp4; codecs="av01.0.05M.08"')}},function(e,t,i){i.r(t),t.default=function(){return!!window.DeviceMotionEvent}},function(e,t,i){i.r(t);var n=i(4);t.default=function(e){if(void 0!==e)return e;if(Object(n.a)()){var t=document.createElement("canvas"),i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){var s=i.getExtension("WEBGL_debug_renderer_info");if(s){var o=i.getParameter(s.UNMASKED_RENDERER_WEBGL);if(o)return o}}}}},function(e,t,i){i.r(t);var n=i(4),s=i(2),o=i(1);t.default=function(e){if(void 0!==e)return e;if(Object(n.a)()){var t=document.createElement("canvas"),i=t.getContext("2d"),r="DeviceAtlas";return i.textBaseline="top",i.font="16px 'Arial'",i.textBaseline="alphabetic",i.rotate(.05),i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",i.fillText(r,2,15),i.fillStyle="rgba(102, 200, 0, 0.7)",i.fillText(r,4,17),i.shadowBlur=10,i.shadowColor="blue",i.rotate(-.15),i.fillRect(-20,25,234,5),("p3"===Object(s.a)("color-gamut",["p3"])?"1":"0")+Object(o.a)(t.toDataURL())}}},function(e,t,i){i.r(t),i.d(t,"cacheProperty",(function(){return x}));var n=i(0),s=i.n(n),o=function(){return void 0===navigator.cookieEnabled&&"string"==typeof document.cookie||!!navigator.cookieEnabled},r=function(){try{return!!localStorage.getItem}catch(e){return!1}},a=function e(t,i,n){for(var s in void 0===i&&(i=!1),void 0===n&&(n={}),t){var o=i?i+"."+s:s,r=t[s],a=typeof t[s];"object"!==a||Array.isArray(r)?"function"!==a&&"undefined"!==a&&(n[o]=r):e(r,o,n)}return n},l=function(e,t,s){void 0===t&&(t=function(e){void 0===e&&(e=["audioRef","deviceAspectRatio","devicePixelRatio","html.video.ap4x","html.video.av1","js.deviceMotion","js.webGlRenderer","rendererRef","screenWidthHeight"]);var t={};e.map((function(e){t[e]=i(6)("./"+e+".js").default}));var s=function(){};return n.criticalProperties.map((function(e){t[e]=t[e]||s})),t}()),void 0===s&&(s=!1);var o=function(i){var n,o=e[i];if(o||!t.hasOwnProperty(i))return 1;var r=t[i],a=r.length<=1;try{n=r(o,(function(e){_.cacheProperty(i,e,o)}),e)}catch(e){_.debug(e)}(s||a)&&_.cacheProperty(i,n,o)};for(var r in t)o(r)},d=(new Date).getTime(),c=window.DeviceAtlas||{},h="function"==typeof c.debug?c.debug:c.debug&&console&&console.log?console.log:function(){},u=c.properties||{},p=c.cacheKey||"DAPROPS",g=c.cookieName||"DAPROPS",m=c.cacheType||"cookie",f=c.criticalProperties||s.a.criticalProperties,A=c.waitMilliSecondsToBulkSendProperties||3e3,v=c.cookieExpiryDays||1,b=c.cacheExpiryDays||1,w=c.dontStopPropertyUpdateEvents||!1,y=c.cookieDomain||null,E=c.cookiePath||"/",I="function"==typeof c.onPropertiesUpdate?c.onPropertiesUpdate:function(){},C=!1,S=function(e,t){C&&!w||(I(e,t),C=!0)},k=[],T=!1,V=function(){return(new Date).getTime()-d+"ms"},P=function(){return function(e){var t,i,n="";for(var s in e)e.hasOwnProperty(s)&&"timeTook"!==s&&"E"!==s&&"S"!==s&&(n+=(t="boolean"==typeof(i=e[s])?"b":"number"==typeof i&&i%1==0?"i":"s")+s+":"+("b"===t?e[s]+0:e[s])+"|");return"bS:0|"+n+"bE:0"}(L)},L={csVersion:"2.4.6"},x=function(e,t,i){if(k.push(e),void 0!==t&&null!=t&&t!==i)switch("object"==typeof t?function(e,t,i){var n=a(t,e),s=void 0;for(var o in n)if(void 0!==n[o]){var r=o.indexOf("._.");i[~r?o.substring(r+3):o]=n[o],s=s||!!n[o]}}(e,t,L):L[e]=t,m){case"cookie":!function(e,t){var i=t.cookieName,n=t.cookieExpiryDays,s=t.cookieDomain,r=t.cookiePath;if(!o())return!1;var a=new Date;a.setDate(a.getDate()+n);var l="";null!=s&&(l=";domain="+s),document.cookie=i+'="'+e.replace(/;/g,"~")+'";expires='+a.toUTCString()+";path="+r+l}(P(),{cookieName:g,cookieDomain:y,cookieExpiryDays:v,cookiePath:E});break;case"local-storage":!function(e,t,i){if(!r())return!1;var n=(new Date).getTime()+864e5*i;window.localStorage.setItem(t,JSON.stringify({value:e,expiry:n}))}(P(),p,b)}L.timeTook=V(),function(e,t){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;for(var i=0;i<e.length;i++)if(!~t.indexOf(e[i]))return!1;return!0})(f,k)&&(T&&(clearTimeout(T),T=!1),S(e,t))}(L,P())},_=t.default={cookieName:g,cookieDomain:y,cookieExpiryDays:v,cookiePath:E,onPropertiesUpdate:I,csVersion:"2.4.6",getPropertiesAsString:P,getProperties:function(){return L},properties:L,debug:h,cacheProperty:x};(function(e,t,i,n,s){var a;switch(e){case"cookie":a=function(e){if(!o())return"";for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t)){var r=s.substring(t.length,s.length);'"'===r.charAt(0)&&(r=r.substr(1));var a=r.length-1;return'"'===r[a]&&(r=r.substring(0,a)),r}}return""}(n);break;case"local-storage":a=function(e){if(!r())return"";var t=window.localStorage.getItem(e);if(!t)return"";var i="";try{i=JSON.parse(t)}catch(t){return localStorage.removeItem(e),""}return(new Date).getTime()>i.expiry?(localStorage.removeItem(e),""):i.value}(t);break;default:return}!function(e,t){if(!e||""===e)return t;for(var i=e.split("|"),n=0;n<i.length;n++){var s=i[n],o=s.indexOf(":"),r=s.substr(0,1),a=s.substr(1,o-1);if("timeTook"!==a){var l=s.substring(o+1);switch(r){case"i":t[a]=1*l;break;case"b":t[a]=!!(1*l);break;default:t[a]=l}}}}(a,s)})(m,p,0,g,L),k.push.apply(k,Object.keys(L)),l(L),l(L,u,!0),T=setTimeout((function(){L.timeTook=V(),S(L,P())}),A)}]).default.getPropertiesAsString}i.d(t,{T:()=>n})},8447:(e,t,i)=>{"use strict";i.d(t,{D4:()=>l,lF:()=>a,vV:()=>g});var n=i(4672),s=i(9896),o=i(5536),r=i(9368);const a=e=>r.lF(JSON.stringify(e)),l=e=>n.c$.fromNullable(e).filter(s.Gv).match({some:d,none:c(e)}),d=e=>(0,s.Kg)(e.AdParameters)?h(e.AdParameters):(0,o.wV)(e),c=e=>()=>n.c$.fromNullable(e).filter(s.Kg).match({some:h,none:()=>(0,o.HR)(new Error(`adParameters is neither an object or string: ${e}`))}),h=e=>p(u(e,r.Q2,r.D4,decodeURIComponent),JSON.parse),u=(e,t,i,n)=>t(e)?i(e):0===e.indexOf("%7B")?n(e):e,p=(e,t)=>o.uu.tryCatch((()=>t(e))).orElse((()=>(0,o.HR)(new Error(`Unable to JSON.parse adParameters string: ${e}`)))),g=(e,t)=>l(e).toOption().filter((e=>/teads-vpaid-display/.test(t))).map((e=>!0===e.viewable)).getOrValue(!0)},1802:(e,t,i)=>{"use strict";i.r(t),i.d(t,{append:()=>d,appendIf:()=>c,attemptRecover:()=>s,cArray:()=>_,difference:()=>p,exclude:()=>b,filter:()=>g,find:()=>h,flatten:()=>V,flattenOptions:()=>N,forEach:()=>u,fromArrayLike:()=>y,fromNodeList:()=>w,fromStringToNumber:()=>E,groupBy:()=>x,groupByMap:()=>L,head:()=>o,includes:()=>A,indexOf:()=>f,isEmpty:()=>k,isMemberOf:()=>v,isNotEmpty:()=>T,join:()=>l,last:()=>r,map:()=>I,partition:()=>P,reduce:()=>S,some:()=>m,tail:()=>a,unique:()=>C});var n=i(1586);const s=(e,t,i)=>{let n=0;for(;n<e.length-1;){const s=t(e[n],n);if(i(s))return s;n++}return t(e[e.length-1],e.length-1)};function o(e){return e[0]}function r(e){return e[e.length-1]}function a(e){return e.slice(1)}const l=e=>t=>t.join(e),d=e=>t=>t.concat([e]),c=(e,t)=>i=>t()?d(e)(i):i;function h(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const n=Object(e),s=n.length>>>0;let o;for(let e=0;e<s;e++)if(o=n[e],t.call(i,o,e,n))return o}function u(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const n=Object(e),s=n.length>>>0;let o,r=0;for(;r<s;)r in n&&(o=n[r],t.call(i,o,r,n)),r++}const p=e=>t=>t.filter((t=>!e.includes(t)));function g(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");const n=Object(e),s=n.length>>>0;if(s>n.length)throw new TypeError("negative length");const o=[];for(let e=0;e<s;e++)if(e in n){const s=n[e];t.call(i,s,e,n)&&o.push(s)}return o}function m(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const n=Object(e),s=n.length>>>0;if(s>n.length)throw new TypeError("negative length");for(let e=0;e<s;e++)if(e in n&&t.call(i,n[e],e,n))return!0;return!1}function f(e,t,i=n.equals,s){if(null===e)throw new TypeError("array is null or undefined");const o=Object(e),r=o.length>>>0;if(0===r)return-1;let a=s??0;if(Math.abs(a)===1/0&&(a=0),a>=r)return-1;let l=Math.max(a>=0?a:r-Math.abs(a),0);try{for(;l<r;){if(l in o&&i(o[l])(t))return l;l++}}catch(e){}return-1}function A(e,t,i=n.equals){return f(e,t,i)>-1}function v(e,t=n.equals){return i=>A(e,i,t)}const b=e=>t=>g(t,(0,n.not)(v(e)));function w(e){return y(e)}function y(e){return Array.prototype.slice.call(e)}function E(e,t=10){return I(e,(e=>(0,n.isString)(e)?parseInt(e,t):NaN))}function I(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");const n=Object(e),s=n.length>>>0,o=new Array(s);let r,a,l=0;for(;l<s;)l in n&&(r=n[l],a=t.call(i,r,l,n),o[l]=a),l++;return o}function C(e){if(null===e)throw new TypeError("array is null or undefined");const t=[];for(let i of e)A(t,i)||t.push(i);return t}function S(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");let n=e.length>>>0;if(0===n&&void 0===i)throw new TypeError("reduce of empty array with no initial value");let s,o=0;if(void 0!==i)s=i;else for(;;){if(o in e){s=e[o++];break}if(++o>=n)throw new TypeError("reduce of empty array with no initial value")}for(;o<n;o++)o in e&&(s=t(s,e[o],o,e));return s}function k(e){return!e.length}function T(e){return!k(e)}function V(e){return k(e)?[]:S(e,((e,t)=>[...e,...t]))}function P(e){return t=>S(t,(([t,i],n)=>e(n)?[[...t,n],i]:[t,[...i,n]]),[[],[]])}const L=(e,t)=>i=>{const n={};return i.forEach((i=>{const s=e(i);n[s]=n[s]??[],n[s].push(t(i))})),n},x=e=>t=>L(e,n.identity)(t),_={map:e=>t=>I(t,e),mapWithIndex:e=>t=>I(t,e),flatMap:e=>t=>V(I(t,e)),filter:e=>t=>g(t,e),foldLeft:(e,t)=>i=>k(i)?e:S(i,t,e),forEach:e=>t=>u(t,e)};function N(e){return e.reduce(((e,t)=>t.match({some:t=>e.concat(t),none:()=>e})),[])}},9368:(e,t,i)=>{"use strict";i.d(t,{D4:()=>o,Q2:()=>n,lF:()=>s});const n=e=>{const t=/^(?:[A-Za-z\d+/]{4})*(?:[A-Za-z\d+/]{2}==|[A-Za-z\d+/]{3}=)?$/.exec(e);return null!==t&&t.length>0},s=e=>window.btoa(encodeURIComponent(e).replace(/%([\dA-F]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16))))),o=e=>decodeURIComponent([...window.atob(e)].map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""))},6591:(e,t,i)=>{"use strict";i.d(t,{A:()=>n,Y:()=>s});const n="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=",s=16/9},2768:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UABrowser:()=>u,UADevice:()=>g,UAOs:()=>p,activatePrivacySandboxRelevanceAndMeasurementFeatures:()=>Le,canAutoplay:()=>Se,checkUserAgent:()=>Re,getAndroidVersion:()=>ne,getBrowser:()=>Ce,getChromeVersion:()=>se,getClientSideDeviceProperties:()=>V,getContextSummary:()=>S,getDevice:()=>Ee,getEnv:()=>Ve,getFacebookWebviewVersion:()=>re,getFullContext:()=>P,getIABSafeFrameWindow:()=>ee,getIEVersion:()=>ie,getIosVersion:()=>oe,getLanguage:()=>be,getNetworkBandwidthInMbps:()=>Pe,getOS:()=>Ie,getSafariVersion:()=>ae,getShortContext:()=>Te,getUA:()=>we,init:()=>L,isAmp:()=>Q,isAmpInABox:()=>Y,isAmpObserveIntersection:()=>X,isAmpSF:()=>Z,isAndroid:()=>U,isAndroidMobile:()=>H,isAndroidNative:()=>B,isCanvasNeeded:()=>ke,isChrome:()=>G,isChrome66Plus:()=>he,isChromeIos:()=>D,isChromeWebView:()=>j,isDesktop:()=>_,isEdge:()=>K,isEdgeTouchScreen:()=>te,isFacebookWebview:()=>M,isFacebookWebviewIOS10:()=>me,isFirefox:()=>q,isGoogleSearchApp:()=>ue,isIABSafeFrame:()=>J,isIE:()=>z,isIos:()=>$,isIos10OtherBrowser:()=>ge,isIos10Safari:()=>pe,isIosOrMacOs16_3:()=>fe,isIosOrMacOs17_Greater:()=>Ae,isIpad:()=>N,isIphone:()=>W,isMobile:()=>O,isSafari:()=>de,isSafari11Plus:()=>ce,isSamsungBrowser:()=>F,isTablet:()=>R,isUIWebview:()=>le,isVideo:()=>_e,isVideoPortfolio:()=>xe,setDeviceModel:()=>x,setIsVideo:()=>Ne,setUA:()=>ye,startAutoplayTest:()=>De,videoSupport:()=>ve}),i(7479);var n=i(5536),s=i(4672),o=i(2203),r=i(1279),a=i(3842),l=i(1857),d=i(1586),c=i(9896),h=i(6083);class u{constructor(e){this.name=e.name||"",this.version=e.version||""}toString(){return a.separate("|",this.name,this.version).toLowerCase()}}class p{constructor(e){this.name=e.name||"",this.version=e.version||""}toString(){return a.separate("|",this.name,this.version).toLowerCase()}}class g{constructor(e){this.model=e.model||"",this.type=e.type||(g.typeRegExp.test(Ie().name)?l.Vp:""),this.vendor=e.vendor||""}toString(){return a.separate("|",this.model,this.type,this.vendor).toLowerCase()}}g.typeRegExp=/^windows|mac\s+os|linux|bsd|dragonfly|chromium\s+os|haiku|ubuntu|slackware|gentoo|solaris|debian|fedora|arch|beos|mint|gnu|os|suse\/2$/i;const m=new o.V("Context");let f,A,v,b,w,y=s.NV;const E={},I="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==";let C=null;function S(){return`${O()&&!R()?"mob":R()?"tab":"desk"} ${U()?"android":$()?"ios":G()?"ch":q()?"ff":z()?"ie":"ot"}`}const k={deviceType:{mobile:"m",desktop:"d",tablet:"t"},browserName:{"Mobile Safari":"Safari M","Chrome WebView":"Chrome WV"}},T=e=>e.replace(/(\d+)\.(\d+)\.\d+/,"$1.$2");function V(){return y.map((e=>e()))}function P(e=!0){return[e?k.deviceType[Ee().type]??Ee().type:Ee().type,Ie().name,e?T(Ie().version):Ie().version,e?k.browserName[Ce().name]??Ce().name:Ce().name,Ce().version.split(".")[0],Te()].join("|")}function L(e=!0){window.teads.CONTEXT_IS_INITIALIZED||(e&&Re(),function(){try{A=window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en"}catch(e){m.error("Could not get navigator language",e),A="en"}}(),b=new p(l.CM.rgx.apply(this,l.A$.os)),w=new u(l.CM.rgx.apply(this,l.A$.browser)),v=new g(l.CM.rgx.apply(this,l.A$.device)),function(){try{E.isAmp=!!window._teads_amp}catch(e){m.error("Could not check if `!!window._teads_amp`",e),E.isAmp=!1}}(),function(){try{E.isAmpInABox=(0,d.isArray)(window.top?.ampInaboxIframes)&&(0,c.Lm)(window.top?.ampInaboxInitialized)&&(0,d.isArray)(window.top?.ampInaboxPendingMessages)}catch(e){m.error("Could not check if AMP-inabox is used",e),E.isAmpInABox=!1}}(),Oe(),function(){try{if(J()){const e=ee();E.isAmpSF=!(0,c.b0)(e)&&!!e.AMP_CONTEXT_DATA}else E.isAmpSF=!1}catch(e){m.error("Could not check if `!!window.AMP_CONTEXT_DATA`",e),E.isAmpSF=!1}}(),function(){try{E.hasTouchPoints=!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>0)}catch(e){m.error("Could not check if `navigator.maxTouchPoints > 0`",e),E.hasTouchPoints=!1}}(),function(){try{E.isNavigatorStandalone=window.navigator.standalone}catch(e){m.error("Could not check navigator.standalone",e),E.isNavigatorStandalone=!1}}(),function(){try{E.observeIntersection=!!window.context?.observeIntersection}catch(e){m.error("Could not check if `!!window.context.observeIntersection`",e),E.observeIntersection=!1}}(),E.isIE="IE"===w.name||/MSIE|Trident/.test(f),E.isFirefox="Firefox"===w.name||/Firefox/i.test(f),E.isEdge="Edge"===w.name||/Edge/i.test(f),E.isGoogleSearchApp=/GSA\//i.test(f),E.isSafari=("Safari"===w.name||"Mobile Safari"===w.name)&&!ue(),E.isChromeWebView="Chrome WebView"===w.name,E.isChrome="Chrome"===w.name||j(),E.isEdgeTouchScreen=K()&&E.hasTouchPoints,E.isChromeIos=/CriOS/i.test(f),E.isAndroidNative="Android Browser"===w.name,E.isFacebookWebview="Facebook"===w.name||/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(f),E.isSamsungBrowser=/SamsungBrowser/i.test(f),E.isIpad="iPad"===v.model||/iPad/i.test(f)||/mac\s+os/i.test(b.name)&&E.hasTouchPoints,E.isIphone="iPhone"===v.model||/iPhone/i.test(f),E.isIos="iOS"===b.name||N()||W(),E.isAndroid="Android"===b.name||/Android/i.test(f),function(){let e=/[mM]obile/.test(f);E.isTablet="tablet"===v.type||N()||U()&&!e,E.isMobile="mobile"===v.type||$()&&!N()||U()&&e,E.isDesktop=!O()&&!R()}(),E.ieVersion=z()?w.version:"",E.iOsVersion=$()?b.version:"",E.androidVersion=U()?b.version:"",E.chromeVersion=G()?w.version:"",E.FacebookWebviewVersion=M()?w.version:"",E.safariVersion=de()?w.version:"",E.isAndroidMobile=U()&&O(),E.isAmpObserveIntersection=E.isAmp&&E.observeIntersection,E.isUIWebview=(W()||N())&&!de()&&!G()&&!E.isNavigatorStandalone,E.isIos10Safari=r.CA(oe(),"10")&&!le()&&!D(),E.isIos10OtherBrowser=r.CA(oe(),"10")&&r.Tr(oe(),"11")&&le()&&D(),$()&&(y=s.c$.fromNullable(h.T())),window.teads.CONTEXT_IS_INITIALIZED=!0)}function x(e){v.model=e}function _(){return!!E.isDesktop}function N(){return!!E.isIpad}function R(){return!!E.isTablet}function O(){return!!E.isMobile}function D(){return!!E.isChromeIos}function M(){return!!E.isFacebookWebview}function B(){return!!E.isAndroidNative}function F(){return!!E.isSamsungBrowser}function U(){return!!E.isAndroid}function $(){return!!E.isIos}function W(){return!!E.isIphone}function H(){return!!E.isAndroidMobile}function z(){return!!E.isIE}function G(){return!!E.isChrome}function j(){return!!E.isChromeWebView}function q(){return!!E.isFirefox}function K(){return!!E.isEdge}function Q(){return!!E.isAmp}function Y(){return!!E.isAmpInABox}function Z(){return!!E.isAmpSF}function X(){return!!E.isAmpObserveIntersection}function J(){return!!E.isIabsf}function ee(){return E.iabsfWindow}function te(){return!!E.isEdgeTouchScreen}function ie(){return E.ieVersion?E.ieVersion:""}function ne(){return E.androidVersion?E.androidVersion:""}function se(){return E.chromeVersion?E.chromeVersion:""}function oe(){return E.iOsVersion?E.iOsVersion:""}function re(){return E.FacebookWebviewVersion?E.FacebookWebviewVersion:""}function ae(){return E.safariVersion?E.safariVersion:""}function le(){return!!E.isUIWebview}function de(){return!!E.isSafari}function ce(){return r.CA(ae(),"11")}function he(){return r.CA(se(),"66")}function ue(){return!!E.isGoogleSearchApp}function pe(){return!!E.isIos10Safari}function ge(){return!!E.isIos10OtherBrowser}function me(){return r.CA(re(),"87")&&r.CA(oe(),"10.2")}function fe(){return r.CA(oe(),"16.3")&&r.Tr(oe(),"16.4")||r.CA(ae(),"16.3")&&r.Tr(ae(),"16.4")}function Ae(){return r.CA(oe(),"17")||r.CA(ae(),"17")}function ve(e){return!!e.createElement("video").canPlayType}function be(){return A}function we(){return f}function ye(e){f=e}function Ee(){return v}function Ie(){return b}function Ce(){return w}function Se(){return!1!==C}function ke(){return!Se()}function Te(){let e;return e=Q()?"amp":Z()?"ampsf":J()?"sf":M()?"fbwv":j()||le()?"wv":"web",e}function Ve(){return"js-"+Te()}function Pe(){return n.uu.tryCatch((()=>window.navigator.connection.downlink)).toOption()}function Le(){const e=document.createElement("meta");e.httpEquiv="origin-trial",e.content="A/ZN3JeVl863wk4gji5LwmyqD8tQETuBB/T7ruSp8OvPp/kIaJGhw4I8mpB3u4vvQoSH2zniTHlhvlBBOA1ZbAkAAAB+eyJvcmlnaW4iOiJodHRwczovL3RlYWRzLnR2OjQ0MyIsImZlYXR1cmUiOiJQcml2YWN5U2FuZGJveEFkc0FQSXMiLCJleHBpcnkiOjE2OTUxNjc5OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9",document.head.appendChild(e)}let xe=!1;function _e(){return xe}function Ne(e){xe=e}function Re(){try{f=navigator.userAgent}catch(e){m.error("Could not get `navigator.userAgent`",e),f=""}}function Oe(e=window){try{e.$sf?.ext?(E.isIabsf=!0,E.iabsfWindow=e):e.parent!==e&&Oe(e.parent)}catch(e){m.error("Could not check if `!!window.$sf.ext`",e),E.isIabsf=!1}}function De(){if(null!==C)return void m.error(`Context.startAutoplayTest has already been called and autoplay is ${C}`);if(!$()&&!U())return void m.debug("Not on iOS/Android, no need to start autoplay test");const e=document.createElement("video");e.src=I,e.setAttribute("playsinline","true"),e.muted=!0,e.play().then((()=>{m.debug("Autoplay test done"),C=!0,e.src=""})).catch((()=>{m.debug("Not allowed to play video without user interaction, disable autoplay"),C=!1}))}},8997:(e,t,i)=>{"use strict";i.d(t,{J:()=>s});var n=i(5536);const s=(e,t=window)=>n.uu.tryCatch((()=>t.document.cookie)).map((t=>decodeURIComponent(t.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))))},1299:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addEventListener:()=>T,copyBoundingClientRect:()=>p,findMatchingElement:()=>y,getAndRemoveAttributeValue:()=>I,getAttributeValue:()=>E,getBoundingClientRect:()=>u,getClientRectFromClientRectRelativeToDocument:()=>f,getClientRectRelativeToDocument:()=>m,getElementsByClassName:()=>x,getOuterHTML:()=>F,getSize:()=>A,getTextContent:()=>v,getWindowSize:()=>S,htmlDecode:()=>M,htmlEncode:()=>B,inject:()=>k,isEmpty:()=>b,isEmptyBoundingClientRect:()=>g,isHTMLElement:()=>_,isISlotSelector:()=>D,isNodeList:()=>R,isSelfClosingTag:()=>O,onDomComplete:()=>L,onDomReady:()=>P,querySelectorAll:()=>w,removeElementFromDOM:()=>N,removeEventListener:()=>V});var n=i(6985),s=i(4672),o=i(2190),r=i(2768),a=i(9896),l=i(866);const d={IMG:" ",BR:"\n"},c=["SCRIPT","STYLE","HEAD","IFRAME","OBJECT"],h={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};function u(e,t=!0){try{const i=e.getBoundingClientRect(),n=p(i);if(t&&!r.isAmp()&&!r.isIABSafeFrame()&&(0,o.getWindow)(e)!==window.top){const t=(0,o.findFirstParentFrameNode)(e);if(t!==e){const e=u(t);e.top&&(n.top=e.top+i.top,n.bottom=e.top+i.bottom),e.left&&(n.left=e.left+i.left,n.right=e.left+i.right)}}return n}catch(e){return{left:0,top:0,right:0,bottom:0,width:0,height:0}}}function p(e){return{top:e.top||0,right:e.right||0,bottom:e.bottom||0,left:e.left||0,width:e.width||0,height:e.height||0}}function g(e){return!(0!==e.top||0!==e.right||0!==e.bottom||0!==e.left||0!==e.width||0!==e.height)}function m(e,t){return{left:e.left+t.x,top:e.top+t.y,right:e.right+t.x,bottom:e.bottom+t.y,width:e.width,height:e.height}}function f(e,t){return{left:e.left-t.x,top:e.top-t.y,right:e.right-t.x,bottom:e.bottom-t.y,width:e.width,height:e.height}}function A(e){const t=e.offsetWidth,i=e.offsetHeight,n=r.getUA().indexOf("WebKit")>-1&&!t&&!i;if(!t||n){const t=u(e);return{width:t.right-t.left,height:t.bottom-t.top}}return{width:t,height:i}}function v(e,t){if(!c.includes(e.nodeName))if(e.nodeType===h.TEXT&&e.nodeValue)t.push(e.nodeValue);else if(e.nodeName in d)t.push(d[e.nodeName]);else{let i=e.firstChild;for(;i;)v(i,t),i=i.nextSibling}}function b(e,t=window){const i=e.tagName.toLowerCase(),n=["iframe","object","img"];return!n.includes(i)&&0===w(n.join(","),t,e).length&&!!e.textContent&&""===e.textContent.trim()}function w(e,t,i){return[...(i??t.document).querySelectorAll(e)]}function y(e,t){const i=e[0];if(i){const n=i.querySelector(t);return s.c$.fromNullable(n).orElse((()=>y(e.slice(1),t)))}return s.c$.empty()}function E(e,t){return s.c$.fromNullable(e.getAttribute(t)).filter((e=>""!==e))}function I(e,t){return E(e,t).map((i=>(e.removeAttribute(t),i)))}const C={};function S(e=window,t=!1){if(r.isAmp()){const{width:e,height:t}=window.context?.initialIntersection.rootBounds??{width:window.innerWidth,height:window.innerHeight};return{width:e,height:t}}if(r.isIABSafeFrame()){const{w:e,h:t}=r.getIABSafeFrameWindow()?.$sf.ext.geom()?.win??{w:0,h:0};return{width:e,height:t}}if(!t&&!r.isAmp()&&r.isIos()&&r.isSafari()){const t=e.innerWidth>e.innerHeight?"landscape":"portrait";return(0,a.b0)(C[t])&&((0,n.Zv)(e),(0,n.Ry)(e),C[t]=(0,n.mJ)(e),(0,n.Ny)()),{width:e.innerWidth,height:C[t]}}return"number"==typeof e.innerWidth?{width:e.innerWidth,height:e.innerHeight}:{width:1e3,height:600}}function k(e,t=window){s.c$.fromNullable(t.document.getElementsByTagName("head")[0]).orElse((()=>s.c$.fromNullable(t.document.body))).forEach((t=>t.appendChild(e)))}function T(e,t,i){l.q2(e,t,i)}function V(e,t,i){l.f(e,t,i)}function P(e,t=window){l.Pm(e,t)}function L(e,t=window,i=this){l.zy(e,t,i)}function x(e,t,i=window){if((t=t??i.document).getElementsByClassName)return[...t.getElementsByClassName(e)];const n=e.split(" ");let s="";for(let e=0,t=n.length;e<t;e++)s+="."+n[e];return w(s,i,t)}function _(e,t){return!(!e||"object"!=typeof e||R(e))&&(t||(t=(0,o.getWindow)(e)||window),"object"==typeof t.HTMLElement?e instanceof t.HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName)}function N(e){return s.c$.fromNullable(e.parentElement).forEach((t=>t.removeChild(e)))}function R(e){return!(!e||"object"!=typeof e)&&e instanceof NodeList}function O(e){if(_(e))return/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(e.nodeName)}function D(e,t){let i=!1;const n=Object.keys(t);for(const t in e)if(i=n.includes(t)&&((0,a.Kg)(e[t])||R(e[t])||_(e[t])),!i)break;return i}function M(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}function B(e){const t=document.createElement("textarea");return t.innerText=e,t.innerHTML}function F(e){return _(e)?M(e.outerHTML):""}},866:(e,t,i)=>{"use strict";i.d(t,{Pm:()=>l,f:()=>a,q2:()=>r,zy:()=>d});const n=new(i(2203).V)("Dom"),s=["scroll","touchstart","touchmove"];function o(e){return s.includes(e)}function r(e,t,i){try{t.addEventListener(e,i,{passive:o(e),capture:!0})}catch(s){n.warn(`Failed to add listener for event ${e}, fallback to Boolean form`,t,s),t.addEventListener(e,i,!0)}}function a(e,t,i){try{t.removeEventListener(e,i,!0)}catch(i){n.warn(`Failed to remove listener for event ${e}`,t,i)}}function l(e,t){const i=t.document,n=()=>{"interactive"!==i.readyState&&"complete"!==i.readyState||(a("readystatechange",i,n),e())};"interactive"===i.readyState||"complete"===i.readyState?e():r("readystatechange",i,n)}function d(e,t,i){"complete"===t.document.readyState?e.call(i):r("load",t,e.bind(i))}},4073:(e,t,i)=>{"use strict";i.d(t,{Pz:()=>d});var n=i(5536);const s=1e3,o=1,r=new Map;let a=!1;const l=e=>(0,n.MN)({kind:"hidden-overflow",location:e?"bottom":"top"});function d(e,t){const{windowHeight:i,viewabilityThreshold:h,offset:u=0,withClearCache:p=!0,getClientRect:g,getElementFromPoint:m,findParentElements:f,findFirstParentFrameNode:A}=e,v=g(t),b=function(e,t,i){return(e+t)/2>i/2}(v.top,v.bottom,i),w=function(e,t){return e/100*t}(h,v.height),y=(E=v.left,I=v.right,Math.round((E+I)/2));var E,I;const C=function(e,t,i,n,s){return e?Math.round(t+Math.max(o,i+o)):Math.round(Math.min(s-o,n-o)-t)}(b,u,v.top,v.bottom,i),S=(k=C,T=w,V=b,Math.round(k+(V?T-o:o-T)));var k,T,V;const P=function(e,t,i,n,s){return`${e}-${t}-${i}-${n}-${s}`}(b,u,y,C,S);return p&&(a||(a=!0,setTimeout((()=>{r.clear(),a=!1}),s))),r.get(P)??m(y,C).match({none:()=>c(P,l(b)),some:i=>{const s=function(e,{top:t,bottom:i},{top:n,bottom:s}){return e?i-n:s-t}(b,g(i),v);return u===s?c(P,l(b)):m(y,S).match({none:()=>c(P,d({...e,offset:s},t)),some:o=>{const r=(a=[i,...f(i)],l=[o,...f(o)],h=A(t),a.includes(h)&&l.includes(h));var a,l,h;return c(P,r?n.uu.of(t):d({...e,offset:s},t))}})}})}function c(e,t){return r.has(e)||r.set(e,t),t}},1068:(e,t,i)=>{"use strict";i.d(t,{C:()=>c});var n=i(1299),s=i(4672),o=i(2203),r=i(9896),a=i(1586);const l={addEventListener:n.addEventListener,removeEventListener:n.removeEventListener};class d{constructor(e,t){this.adRemoveListenerStrategy=t,this.listeners={},this.logger=new o.V(e)}add(e,t,i){(0,r.Kg)(e)||this.logger.warn("First argument of EventListenerManager.add must be a string",e),this.logger.debug("Add listener to event",e),s.c$.fromNullable(this.listeners[e]).orElse((()=>s.c$.fromNullable([]))).map((e=>e.concat([{context:t,callback:i}]))).forEach((t=>{this.listeners[e]=t})),this.addEventListener(e,t,i)}addMultiple(e,t,i){(0,a.isArray)(e)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",e),e.forEach((e=>this.add(e,t,i)))}remove(e){(0,r.Kg)(e)||this.logger.warn("First argument of EventListenerManager.add must be a string",e),this.logger.debug("Remove listener from event",e),this.listeners[e].forEach((t=>this.removeEventListener(e,t.context,t.callback))),this.listeners[e]=[]}removeMultiple(e){(0,a.isArray)(e)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",e),e.forEach((e=>this.remove(e)))}removeAll(){for(const e in this.listeners)this.listeners.hasOwnProperty(e)&&this.listeners[e].forEach((t=>this.removeEventListener(e,t.context,t.callback)))}addEventListener(e,t,i){this.adRemoveListenerStrategy.addEventListener(e,t,i)}removeEventListener(e,t,i){this.adRemoveListenerStrategy.removeEventListener(e,t,i)}}class c extends d{constructor(e=l){super("DOMEventListenerManager",e)}}},3934:(e,t,i)=>{"use strict";i.d(t,{W:()=>n,i:()=>s});class n{static get(e,t,i){return new n({id:e,message:t},i)}constructor(e,t){this.code=e,this.error=t}getFullMessage(){return"Error #"+this.code.id+": "+this.code.message}getId(){return this.code.id}getMessage(){return this.code.message}getStackTrace(){return this.error&&this.error.stack?this.error.stack:""}toString(){return this.getFullMessage()}}class s extends n{}s.XML_PARSE={id:100,message:"XML parsing error"},s.XML_INVALID_SCHEMA={id:101,message:'VAST schema validation error: expected "%s" but found "%s"'},s.UNSUPPORTED_VERSION={id:102,message:"VAST version of response not supported. Expected VAST2 or VAST3 but VAST1 found"},s.TRAFFICKING={id:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display"},s.LINEARITY={id:201,message:"Video player expecting different linearity"},s.DURATION={id:202,message:"Video player expecting different duration"},s.SIZE={id:203,message:"Video player expecting different size"},s.WRAPPER={id:300,message:"General Wrapper error"},s.WRAPPER_TIMEOUT={id:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element (URI was either unavailable or reached a timeout as defined by the video player)"},s.WRAPPER_LIMIT={id:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},s.NO_ADS={id:303,message:"No Ads VAST response after one or more Wrappers"},s.GENERAL_LINEAR={id:400,message:"General Linear error. Video player is unable to display the Linear Ad."},s.FILE_NOT_FOUND={id:401,message:"File not found. Unable to find Linear/MediaFile from URI."},s.MEDIAFILE_TIMEOUT={id:402,message:"Timeout of MediaFile URI."},s.UNSUPPORTED_MEDIAFILE={id:403,message:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},s.MEDIAFILE_DISPLAY={id:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but could not display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},s.GENERAL_NONLINEAR={id:500,message:"General NonLinearAds error."},s.CREATIVE_DIMENSIONS={id:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},s.NONLINEAR_FETCH={id:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},s.SUPPORTED_NONLINEAR_NOT_FOUND={id:503,message:"Could not find NonLinear resource with supported type."},s.GENERAL_COMPANION={id:600,message:"General CompanionAds error."},s.COMPANION_DIMENSIONS={id:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},s.COMPANION_DISPLAY={id:602,message:"Unable to display Required Companion."},s.COMPANION_FETCH={id:603,message:"Unable to fetch CompanionAds/Companion resource."},s.SUPPORTED_COMPANION_NOT_FOUND={id:604,message:"Could not find Companion resource with supported type."},s.UNDEFINED={id:900,message:"Undefined Error"},s.GENERAL={id:901,message:"General VPAID error"}},6647:(e,t,i)=>{"use strict";i.d(t,{J:()=>s});var n=i(3934);class s extends n.W{}s.INCOMPLETE_OBJECT={id:1,message:"Ad configuration is missing settings or placement"},s.OPTION_CHECKVALUE_MISSING={id:2,message:"checkValue function is missing"},s.OPTION_THRESHOLD_MISSING={id:3,message:"Option threshold is required"},s.OPTION_PARENTWINDOW_INVALID={id:4,message:"Option parentWindow is required"},s.OPTION_VAST_INVALID={id:5,message:"Option vast has to contain type and content"},s.MULTIPLE_PAGE_PROCESS={id:6,message:"Cannot process more than 1 page"},s.OPTION_PID_INVALID={id:7,message:"Option Pid must be a positive number"},s.OPTION_FORMAT_INVALID={id:8,message:"Option Format must be a known string"},s.LOADING_MEDIAFILE={id:9,message:"Error when loading mediafile"},s.RAS_REQUEST={id:10,message:"RAS request error"},s.RAS_TIMEOUT={id:11,message:"RAS request timeout"},s.RAS_CUSTOM_TIMEOUT={id:12,message:"RAS request custom timeout"},s.RAS_RESPONSE={id:13,message:"RAS response error"},s.RAS_RESPONSE_ADS_NOT_ARRAY={id:14,message:"RAS response ads is not an array"},s.EVENT_CALLBACK={id:15,message:"Callback threw an error"},s.FILTER_FUNCTION={id:16,message:"The filter function threw an error"},s.OPTION_NAME_REQUIRED={id:17,message:"Name must be a valid string"}},2190:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addClass:()=>w,appendIframeToElement:()=>p,checkElementVisibility:()=>q,checkForDisplayNone:()=>W,checkForOverflow:()=>j,checkForTiny:()=>H,checkIsHtmlElement:()=>$,closeFullscreen:()=>b,copyCSSRules:()=>Q,createIframe:()=>h,findAllWindows:()=>x,findChildWindows:()=>L,findFirstParentFrameNode:()=>N,findFloatingHeaders:()=>F,findParentElements:()=>R,findParentFrameNode:()=>_,findParentWindows:()=>V,findTopWindow:()=>P,getCSSRules:()=>K,getDocument:()=>f,getPercentageInView:()=>D,getTop:()=>U,getWindow:()=>m,hasClass:()=>E,isChildBoundsInParentBounds:()=>B,isChildOf:()=>M,isChildWindow:()=>k,isDisplayNoneOverParents:()=>G,isFullscreen:()=>g,isInCrossDomainIframe:()=>S,isInView:()=>O,isOrWillBeInViewWithTargetElement:()=>Y,isRectZeroFilled:()=>T,isStickyElementInView:()=>Z,makeIframeIABFriendly:()=>u,openFullscreen:()=>v,removeClass:()=>y,replaceClass:()=>C,toggleClass:()=>I,toggleFullscreen:()=>A,visibilityChecksOnParents:()=>z});var n=i(4073),s=i(1299),o=i(1586),r=i(2768),a=i(4672),l=i(5536),d=i(9896);const c=r.isDesktop()?.1:.15;function h(e){const t=document.createElement("iframe");return t.style.setProperty("margin","0","important"),t.style.setProperty("padding","0","important"),t.style.setProperty("width","0","important"),t.style.setProperty("height","0","important"),t.style.setProperty("border","0","important"),t.style.setProperty("overflow","hidden","important"),t.style.setProperty("float","none","important"),t.setAttribute("allow","autoplay; attribution-reporting 'src' https://cm.teads.tv"),t.setAttribute("scrolling","no"),t.setAttribute("title",e),t.frameBorder="0",t}function u(e){a.c$.fromNullable(e.contentWindow).forEach((e=>e.inDapIF=!0))}function p(e,t){return(0,s.isHTMLElement)(e)&&e.appendChild(t),t}function g(e){return e||(e=document),!!(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}function m(e){if(!e||(0,s.isNodeList)(e))return null;const t=f(e);return t?t.defaultView??t.parentWindow:null}function f(e){return!e||(0,s.isNodeList)(e)?null:e.ownerDocument}function A(e){g()?b(e):v(e)}function v(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function b(e){const t=f(e);t&&(t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen())}function w(e,t){(t=t.trim())&&!E(e,t)&&e.classList.add(t)}function y(e,t){(t=t.trim())&&E(e,t)&&e.classList.remove(t)}function E(e,t){return e.classList.contains(t.trim())}function I(e,t){e.classList.toggle(t.trim())}function C(e,t,i){t=t.trim(),!E(e,i=i.trim())&&E(e,t)&&(o.isFunction(e.classList.replace)?e.classList.replace(t,i):(y(e,t),w(e,i)))}function S(e){return V(e).pop()!==window.top}function k(e){return e!==window.top}function T(e){return!Object.keys(e).some((t=>0!==e[t]))}function V(e,t=!0){const i=[];if((0,s.isHTMLElement)(e)){let n;n=e=>{e.parent!==e&&e.parent.location&&e.parent.window&&(t&&e.parent.document,i.push(e.parent),n(e.parent))};const s=m(e);s&&i.push(s);try{n(s)}catch(e){}}return i}function P(e){return V(e).pop()||window}function L(e,t=!1){let i=[];if((0,s.isHTMLElement)(e)){const n=e.getElementsByTagName("iframe");for(const e of n)try{a.c$.fromNullable(e.contentWindow).flatMap((e=>a.c$.fromNullable(e.document?.body).map((t=>({win:e,body:t}))))).forEach((({win:e,body:n})=>{i.push(e),t&&L(n,!0).forEach((e=>{i=i.concat(e)}))}))}catch(e){}}return i}function x(e,t=!1){return V(e).concat(L(e,t))}function _(e){const t=m(e);try{if(t&&t.parent!==t&&void 0!==t.parent.Window&&t.parent instanceof t.parent.Window){const e=t.parent.document.getElementsByTagName("iframe");if(e)for(const i of e)if(i.contentWindow===t)return _(i)}}catch(e){}return e}function N(e){const t=m(e);try{if(t&&t.parent!==t&&void 0!==t.parent.Window&&t.parent instanceof t.parent.Window){const e=t.parent.document.getElementsByTagName("iframe");if(e)for(const i of e)if(i.contentWindow===t)return i}}catch(e){}return e}function R(e,t=!0){const i=[];if((0,s.isHTMLElement)(e)){const n=f(e);let o=e;const r="HTML"===o.tagName?.toUpperCase?.();for(;!r&&(t||n&&o!==n.body)&&(0,s.isHTMLElement)(o);)o=o.parentElement,o&&i.push(o)}return i}function O({element:e,elementAncestors:t,elementClientRect:i,mainWindow:n,thresholdCoefficient:s,elementHeight:o,getPercentage:a=D,envIsAmp:l=r.isAmp(),envIsIABSafeFrame:d=r.isIABSafeFrame()}){const c=a({element:e,elementAncestors:t,elementClientRect:i,mainWindow:n,elementHeight:o});return(!l&&!d||0!==c)&&c>=s}function D({element:e,elementAncestors:t,elementClientRect:i,mainWindow:n,elementHeight:o,allowNegative:a=!1,detectFloatingHeaders:l=!r.isAndroid(),getWindowSize:c=s.getWindowSize,envIsAmp:h=r.isAmp(),envIsIABSafeFrame:u=r.isIABSafeFrame(),envIabSFWindow:p=r.getIABSafeFrameWindow()}){if(h&&n._teads_amp)return n._teads_amp.change?n._teads_amp.change.intersectionRect.height/n._teads_amp.change.boundingClientRect.height:0;if(u){const e=p;if((0,d.b0)(e))return 0;const t=e.$sf.ext.geom();return t?.self?.yiv??0}const g=c(n,!0),m=l?U(n,F(e,t,n,i),g.height):0,f=i.top-m;let A=(f>0?g.height-i.top:f+o)/o;return a||(A=A>0?A:0,A=A<1?A:1),A}function M(e,t){return R(e).includes(t)}function B(e,t,i,n){const s=("bottom"===i?e.height:e.width)*n;return e[i]-s>t[i]}function F(e,t=[document.body],i=window,n,o=s.getWindowSize){let r=[];const a=o(i),l=a.width/2,d=a.height*c,h=d*c;let u,p;const g=o=>{const r=(0,s.getBoundingClientRect)(o);return"fixed"===i.getComputedStyle(o).position&&(!n||r.right>n.left&&r.left<n.right)&&!t.includes(o)&&!/teads/.exec(o.className)&&!M(o,e)};for(let e=1;e<d;e+=h)u=i.document.elementFromPoint(l,e),u&&p!==u&&(p=u,g(u)&&r.push(u),R(u).forEach((e=>{g(e)&&r.push(e)})));return[...new Set(r)]}function U(e,t,i){let n=0;const o=window.FORCE_DEMO??!1;t.forEach((e=>n=Math.max(n,(0,s.getBoundingClientRect)(e,!o).bottom)));const r=e.scrollY,a=r>0?n:r+n;return Math.max(0,Math.min(i,a))}function $(e){return(0,s.isHTMLElement)(e)?l.uu.of(e):(0,l.MN)("invalid-dom")}function W(e){return"none"===window.getComputedStyle(e).display?(0,l.MN)("hidden-display"):l.uu.of(e)}function H(e){const t=(0,s.getBoundingClientRect)(e);return t.height<50||t.width<50?(0,l.MN)("tiny"):l.uu.of(e)}function z(e){return $(e).flatMap(W).flatMap((e=>e.parentElement?z(e.parentElement):(0,l.xe)(e)))}function G(e){return e.map((e=>"none"===window.getComputedStyle(e).display||G(a.c$.fromNullable(e.parentElement)))).getOrValue(!1)}function j(e,t){const i=(100-t)/100,n=(0,s.getBoundingClientRect)(e);let o=l.uu.of(e);const r=e=>{const t=!E(e,"teads-inread"),a=window.getComputedStyle(e);let d;return t&&"hidden"===a.overflowY&&(d=(0,s.getBoundingClientRect)(e),B(n,d,"bottom",i)||(o=(0,l.MN)("hidden-overflow"))),o.isRight()&&t&&"hidden"===a.overflowX&&(d=d||(0,s.getBoundingClientRect)(e),B(n,d,"right",i)||(o=(0,l.MN)("hidden-overflow"))),o.isRight()&&e.parentElement?r(e.parentElement):o};return e.parentElement?r(e.parentElement):o}function q(e,t,i=s.getWindowSize){return H(e).flatMap((()=>z(e).flatMap((()=>j(e,t).orElse((()=>{const o=P(e);return(0,n.Pz)({windowHeight:i(o).height,viewabilityThreshold:t,getClientRect:s.getBoundingClientRect,getElementFromPoint:(e,t)=>a.c$.fromNullable(o.document.elementFromPoint(e,t)),findParentElements:R,findFirstParentFrameNode:N},e)}))))))}function K(e){const t=m(e),i=[];if(t){const n=t.document.styleSheets;if(e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,o.isFunction(e.matches))for(let t in n){let s=n[t],o=l.uu.tryCatch((()=>s.rules||s.cssRules)).getOrElse((()=>({})));for(let t in o){let n=o[t];e.matches(n.selectorText)&&i.push(n)}}}return i}function Q(e,t,i){K(e).forEach((e=>{i.forEach((i=>{let n=e.style.getPropertyValue(i);!n||t.style[i]||t.getAttribute(i)||(t.style[i]=n)}))}))}function Y(e,t,i){const n=s.getBoundingClientRect(t),o=s.getBoundingClientRect(i),{clientHeight:r}=e.document.documentElement;return!(o.bottom<n.top-r||o.top>n.bottom+r)}function Z(e,t){let i=t;for(;null!==i&&"BODY"!==i.tagName;){const{position:t,visibility:n}=e.getComputedStyle(i);if("fixed"===t&&!G((0,a.p2)(i))&&"hidden"!==n)return!0;i=i.parentElement}return!1}},6985:(e,t,i)=>{"use strict";i.d(t,{Ny:()=>c,Ry:()=>d,Zv:()=>l,gB:()=>u,mJ:()=>h});var n=i(2203),s=i(9896),o=i(4672);let r;const a=new n.V("IOSWindowHeight");function l(e){return(0,s.b0)(r)&&(r=e.document.createElement("div"),r.style.setProperty("position","fixed"),r.style.setProperty("height","100vh"),r.style.setProperty("width","0"),r.style.setProperty("top","0")),r}function d(e){o.c$.fromNullable(r).match({some:t=>e.document.documentElement.appendChild(t),none:()=>a.warn("Could not insert ruler to DOM as it was not created yet")})}function c(){o.c$.fromNullable(r).match({some:e=>o.c$.fromNullable(e.parentElement).forEach((t=>t.removeChild(e))),none:()=>a.warn("Could not remove ruler from DOM as it was not created yet")})}function h(e){return o.c$.fromNullable(r).match({some:e=>e.offsetHeight,none:()=>(a.warn("Could not get ruler height value as it was not created yet, fallback to innerHeight"),e.innerHeight)})}function u(e){return Math.max(h(e)-e.innerHeight,0)}},2203:(e,t,i)=>{"use strict";i.d(t,{V:()=>d}),i(7479),i(3599);var n=i(8997);let s,o=[],r=[],a=!1;s=window.console&&void 0!==console.log?window.console:new class{log(...e){}};let l=!1;class d{static clear(){d.logs=[],window.teads.FULL_LOGS=[]}static getFullLogs(){return window.teads.FULL_LOGS}constructor(e){this.namespace=e}debug(...e){this._log("debug",e)}info(...e){this._log("info",e)}warn(...e){this._log("warn",e)}error(...e){this._log("error",e)}table(e,...t){s.table&&s.table(e,t.length>0?t:null)}_log(e,t){if(!t.length)return;const i=((Date.now()-window.teads.START_TIME)/1e3).toFixed(3)+"s",n=t.map((e=>{if("object"==typeof e)try{return JSON.stringify(t)}catch{}return t.toString()})).join(" + ");if(window.teads.FULL_LOGS.push({level:e,message:i+" ["+this.namespace+"] "+n}),!o.includes(e))return;if(!a&&r.length&&!r.some((e=>this.namespace.startsWith(e))))return;d.logs.push({level:e,message:i+" ["+this.namespace+"] "+t.join(" ")}),t.unshift("Teads %c"+i+" "+this.namespace,"color:#7ebde5;");const l=s[e]||s.log;try{l.apply(s,t)}catch(e){Function.prototype.apply.apply(l,[s,t])}}}d.logs=[],l||(l=!0,(0,n.J)("teadsDebugLevel").toOption().filter((e=>!!e)).map((e=>e.split(","))).forEach((e=>{o=e.includes("all")?["debug","info","warn","error"]:e})),(0,n.J)("teadsDebugNamespace").toOption().filter((e=>!!e)).forEach((e=>{r=e.split(","),a="all"===String(e).toLocaleLowerCase()})),o.length&&!window.teads.Logger&&(s.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#585858;font-family:Helvetica,sans-serif;font-size:2em;"),s.log("%cv1401', 'color:#7ebde5;font-style:italic;")),window.teads.HAS_DEBUG_LOGS=!!o.length)},1336:(e,t,i)=>{"use strict";i.d(t,{Ln:()=>f,$S:()=>u,tR:()=>v,GC:()=>A,Nm:()=>p,gl:()=>b,HC:()=>g,gM:()=>m});var n=i(4672),s=i(3842),o=i(2190),r=i(1586),a=i(9896),l=i(1299),d=i(3988),c=i(3441),h=i(8709);const u=({auctionId:e=n.c$.empty(),pageId:t=n.c$.empty(),pid:i=n.c$.empty(),insertionId:s=n.c$.empty(),connectionId:o=n.c$.empty(),slotType:r=n.c$.empty(),env:a=n.c$.empty(),impressionId:l=n.c$.empty(),cachebusting:u=n.c$.empty(),headerBiddingProvider:p=n.c$.empty(),gdprIab:g=n.c$.empty(),portfolioItemId:m=n.c$.empty(),viewerId:f=n.c$.empty(),debugMetadata:A=n.c$.empty()}={})=>{const v={"[auctid]":e.getOrValue(""),"[pageId]":t.map(String).getOrValue(""),"[pid]":i.map(String).getOrValue(""),"[insertionId]":s.map(String).getOrValue(""),"[connectionId]":o.map(String).getOrValue(""),"[slotType]":r.getOrValue(""),"[env]":p.match({some:()=>"js-web",none:()=>a.getOrValue("")}),"[impressionId]":l.map(String).getOrValue(""),"[CACHEBUSTING]":u.map(String).getOrValue(""),"[headerBiddingProvider]":p.getOrValue(""),"[pfid]":m.map(String).getOrValue(""),"[viewerId]":f.getOrValue(""),"[debugMetadata]":A.getOrValue(""),"[PAGEURL]":(0,c.bP)()};return g.forEach((({status:e,consent:t,reason:i,apiVersion:n,cmpId:s})=>{v["[gdpr_status]"]=String(e),v["[gdpr_consent]"]=t,v["[gdpr_reason]"]=String(i),v["[gdpr_cmp_id]"]=(0,h.rP)(s),v["[gdpr_api_version]"]=(0,h.rP)(n),v["[gdpr_apply]"]=(0,d.B)(e)})),v},p=({currentTime:e=n.c$.empty(),errorCode:t=n.c$.empty(),assetUrl:i=n.c$.empty(),mediaFileType:o=n.c$.empty(),viewability:a=n.c$.empty(),debugMetadata:l=n.c$.empty(),errorCause:d=n.c$.empty(),gdprAppliesMacro:c="",gdprConsent:h=n.c$.empty()}={},u=s.rand)=>{const p=h.getOrValue("");return{"[CONTENTPLAYHEAD]":e.filter((e=>e>=0)).match({some:r.offset,none:()=>"0"}),"[CACHEBUSTING]":u(8),"[ERRORCODE]":t.map(String).getOrValue(""),"[ASSETURI]":encodeURIComponent(i.getOrValue("")),"[MEDIAFILETYPE]":o.getOrValue("unknown"),"[VIEWABILITY]":a.map(String).getOrValue("0"),"[debugMetadata]":l.getOrValue(""),"[errorCause]":d.getOrValue(""),"[GDPR]":c,"%5BGDPR%5D":c,"${GDPR}":c,"%24%7BGDPR%7D":c,"${GDPR_CONSENT_\\d+}":p,"%24%7BGDPR_CONSENT_\\d+%7D":p,"[GDPR_CONSENT]":p,"%5BGDPR_CONSENT%5D":p,"${GDPR_CONSENT}":p,"%24%7BGDPR_CONSENT%7D":p}},g=e=>([t,i])=>e.replace(new RegExp(t.replace("[","\\[").replace("]","\\]").replace("{","\\{").replace("}","\\}").replace("$","\\$"),"gi"),i),m=(e,t=!1)=>i=>((e,t,i)=>{let n,s=i;for(;!(n=e.next()).done;)s=t(s,n.value);return s})(function*(e,t=!1){for(const i in e)e.hasOwnProperty(i)&&(t||""!==e[i])&&(yield[i,e[i]])}(e,t),((e,t)=>g(e)(t)),i),f=(e,t)=>(0,a.Et)(e)&&(0,a.Et)(t)?e-t:0,A=(e=n.NV)=>e.map((e=>e.url.toString())),v=(e=n.NV)=>e.map((e=>(0,r.getExtensionFromMimeType)(e.type))),b=(e,t,i)=>{const s=Math.ceil(100*(0,o.getPercentageInView)({element:e,elementAncestors:(0,o.findParentElements)(e),elementClientRect:(0,l.getBoundingClientRect)(e),mainWindow:n.c$.fromNullable((0,o.getWindow)(e)).getOrValue(window),elementHeight:t}));return s<0||(0,o.checkElementVisibility)(e,i).isLeft()?0:s}},7148:(e,t,i)=>{"use strict";i.d(t,{LV:()=>r,jJ:()=>o,pb:()=>a});var n=i(5490),s=i(9896);const o=(0,n.A)(((e,t)=>{for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}));function r(e,t){return(0,s.Gv)(e)?Object.keys(e).reduce(((i,n)=>t(n,e[n])?{...i,[n]:e[n]}:i),{}):e}function a(e,t){return r(e,((e,i)=>t(i)))}},1279:(e,t,i)=>{"use strict";i.d(t,{CA:()=>d,Tr:()=>l,X5:()=>c});class n{constructor(e){if(this.isValid=!0,"string"!=typeof e&&(e=`${e}`),e.length>s)return void(this.isValid=!1);const t=e.trim().match(a);if(!t)return e.split(".").length<3?new n(`${e}.0`):void(this.isValid=!1);this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>o||this.major<0||this.minor>o||this.minor<0||this.patch>o||this.patch<0?this.isValid=!1:this.version=this.major+"."+this.minor+"."+this.patch}toString(){return this.version}}const s=256,o=9007199254740991,r="0|[1-9]\\d*",a=new RegExp("^v?("+r+")\\.("+r+")\\.("+r+").*?$");function l(e,t){let i=u(e,t);return null!==i&&i<0}function d(e,t){let i=u(e,t);return null!==i&&i>=0}function c(e,t){let i=u(e,t);return null!==i&&i<=0}function h(e,t){return e<t?-1:e>t?1:0}function u(e,t){let i=new n(e),s=new n(t);return i.isValid&&s.isValid?function(e,t){return h(e.major,t.major)||h(e.minor,t.minor)||h(e.patch,t.patch)}(i,s):null}},3842:(e,t,i)=>{"use strict";function n(e,t="00"){const i=String(e);return t.substring(0,t.length-i.length)+i}function s(e){return e.charAt(0).toUpperCase()+e.substring(1)}function o(e,t=!0){const i=t?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(;n.length<e;)n+=i.charAt(Math.floor(Math.random()*i.length));return n}function r(e="|",...t){let i=!0,n=0;for(;i&&n<t.length;)i=i&&!t[n],n++;return i?"":t.join(e)}function a(e,t){return e.match(t)||[]}function l(e,t){return i=>e.reduce(((e,i)=>e.replace(i,`${t}`)),i)}function d(e,t){return-1!==e.indexOf(t)}function c(e){return""===e}function h(e){return!c(e)}i.r(t),i.d(t,{includesSubString:()=>d,isEmpty:()=>c,isNotEmpty:()=>h,match:()=>a,pad:()=>n,rand:()=>o,replaceStringsWithValue:()=>l,separate:()=>r,ucfirst:()=>s})},4077:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>w,UR:()=>y,l4:()=>b,ll:()=>v});var n=i(5490),s=i(4672),o=i(4461),r=i(5536),a=i(2203),l=i(3013),d=i(9896);const c=Math.random(),h="[samplingFactor][context][businessIds][logLevel] message",u=new a.V("Sumologic"),p=(0,n.A)((({formatVersion:e,fullContext:t,bidType:i,portfolioItemId:n,headerBidding:s},o)=>{const r=n.map(String).getOrValue("");return o.replace("context",`${e}|${t}|${i}|${r}|${s?"hb":""}`)})),g=(0,n.A)(((e,t,i,n)=>{const s=e=>e.map(String).getOrValue("");return n.replace("businessIds",`${s(e)}|${s(i)}|${s(t)}`)})),m=(0,n.A)(((e,t)=>t.replace("logLevel",e))),f=(0,n.A)(((e,t)=>t.replace("samplingFactor",e.toString()))),A=(0,n.A)(((e,t)=>t.replace("message",e)));function v(e,t){r.uu.tryCatch((()=>{(new Image).src=`${e}?${encodeURIComponent(t)}`})).tapLeft((i=>{u.warn("An error occurred while sending log message to Sumologic collector",e,t,i)}))}function b(){return c}class w{constructor(e,t,i,n,s){this.collectorUrl=e,this.samplingFactor=t,this.formatVersion=i,this.placementId=n,this.options=s}log(e,t=this.samplingFactor){if(function(e,t){return l.$.isSumologicLogsEnabled&&e>0&&t<=1/e}(t,this.options.getSamplingThreshold()))this.options.sendLog(this.collectorUrl,e);else{const t=l.$.isSumologicLogsEnabled?`sampling too low: ${this.samplingFactor}, threshold: ${this.options.getSamplingThreshold().toFixed(2)}`:"SUMOLOGIC_ENABLED flag is false";u.debug(`Did not send log to Sumologic collector (reason: ${t})`,e)}}metadata(e,t=this.samplingFactor){this.logBasedOnTemplate("metadata",e,t)}info(e,t=this.samplingFactor){this.logBasedOnTemplate("info",e,t)}warning(e,t=this.samplingFactor){this.logBasedOnTemplate("warning",e,t)}error(e,t=this.samplingFactor){(0,d.TO)({fromHour:7,toHour:7})?this.logBasedOnTemplate("error",e,10):this.logBasedOnTemplate("error",e,t)}generateLogFromTemplate(e,t,{fullContext:i,bidType:n,portfolioItemId:r,headerBidding:a},l){return(0,o.Ay)(p({fullContext:i,bidType:n,portfolioItemId:r,headerBidding:a,formatVersion:this.formatVersion}),g(this.placementId,s.NV,s.NV),m(e),f(t),A(l))(h)}logBasedOnTemplate(e,t,i=this.samplingFactor){this.log(this.generateLogFromTemplate(e,i,{fullContext:this.options.getFullContext(),bidType:"",portfolioItemId:s.NV,headerBidding:this.options.isHeaderBiddingTag()},t),i)}copy(e={}){const{collectorUrl:t=this.collectorUrl,samplingFactor:i=this.samplingFactor,formatVersion:n=this.formatVersion,placementId:s=this.placementId,options:o=this.options}=e;return new w(t,i,n,s,o)}}class y extends w{constructor(e="",t,i,n,s){super(s.collectorUrl,s.samplingFactor,s.formatVersion,s.placementId,s.options),this.bidType=e,this.insertionId=t,this.connectionId=i,this.portfolioItemId=n}generateLogFromTemplate(e,t,{fullContext:i,bidType:n,portfolioItemId:s,headerBidding:r},a){return(0,o.Ay)(p({fullContext:i,bidType:n,portfolioItemId:s,headerBidding:r,formatVersion:this.formatVersion}),g(this.placementId,this.insertionId,this.connectionId),m(e),f(t),A(a))(h)}logBasedOnTemplate(e,t,i=this.samplingFactor){this.log(this.generateLogFromTemplate(e,i,{fullContext:this.options.getFullContext(),bidType:this.bidType,portfolioItemId:this.portfolioItemId,headerBidding:this.options.isHeaderBiddingTag()},t),i)}copy(e={}){const{bidType:t=this.bidType,insertionId:i=this.insertionId,connectionId:n=this.connectionId,portfolioItemId:s=this.portfolioItemId,...o}=e;return new y(t,i,n,s,super.copy(o))}}},2417:(e,t,i)=>{"use strict";function n(){const e=performance.getEntriesByType("navigation");return Math.round(e[0].responseStart-e[0].requestStart)}function s(e){let t=e.length;const i=e.reduce(((e,{transferSize:i,responseEnd:n,responseStart:s})=>i>0&&n>0&&s>=0&&n-s>0?e+8*i/1024/((n-s)/1e3):(t--,e)),0);return t>0?i/t:0}i.d(t,{K:()=>s,v:()=>n})},3441:(e,t,i)=>{"use strict";i.d(t,{Bb:()=>m,Bw:()=>p,I5:()=>y,JO:()=>u,LY:()=>b,UT:()=>g,WB:()=>v,bP:()=>E,cY:()=>A,eJ:()=>w,mR:()=>f,qg:()=>h});var n=i(2768),s=i(2203),o=i(1586),r=i(4672),a=i(5536),l=i(2190),d=i(9896);const c=new s.V("URIHelper");function h(e){const t=document.createElement("a");return t.href=e,{href:t.href,protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}}function u(e){const t={};return"string"!=typeof e?t:(e=e.trim().replace(/^[?&]/,""))?(e.split("&").forEach((e=>{const i=e.split("="),n=i.shift();n&&(t[n]=i.length>0?i.join("="):void 0)})),t):t}function p(e){try{return new URL(e).hostname.endsWith(".teads.tv")}catch{return!1}}function g(e){return/itunes\.apple\.com/.test(h(e).hostname)}function m(e,t,i){if(e.indexOf(t)<0)return e;{const n=new RegExp("[\\?&]"+t+"=([^&#]*)");return r.c$.fromNullable(n.exec(e)?.[0]?.charAt(0)).match({some:s=>e.replace(n,s+t+"="+i),none:()=>(c.warn(`Tried to replace parameter "${t}" value with "${i}" on URL ${e} and failed.`),e)})}}function f(e,t){const i=Object.keys(t).map((e=>e+"="+t[e])).join("&"),n=-1===e.indexOf("?")?"?":"&";return e+(""===i?"":n+i)}function A(e){return e.replace(/^http:/,(0,o.getProtocol)())}function v(e,t,i){return b(e,t)?e:f(e,{[t]:i})}function b(e,t){return e.indexOf(`?${t}=`)>-1||e.indexOf(`&${t}=`)>-1}function w(){return a.uu.tryCatch((()=>window.top.location.search)).getOrElse((()=>h(document.referrer).search))}function y(){let e=(0,l.findParentWindows)(window.document.body);const t=window.teads.prebidReferer;if((0,d.Kg)(t))return r.c$.fromNullable({windowDepth:e.length,windowReferrerUrl:t});let i,s;return window.top!==window?(0,n.isAmp)()&&r.c$.fromNullable(window.context).map((e=>e.sourceUrl)).nonEmpty()?(i=window.context.sourceUrl,s=window.context.canonicalUrl):(0,n.isAmpSF)()&&r.c$.fromNullable(window.AMP_CONTEXT_DATA).map((e=>e.sourceUrl)).nonEmpty()?(i=window.AMP_CONTEXT_DATA.sourceUrl,s=window.AMP_CONTEXT_DATA.canonicalUrl):i=document.referrer?(0,n.isIABSafeFrame)()?window.teads.pageURL??document.referrer:document.referrer:a.uu.tryCatch((()=>window.top.location.href)).getOrElse((()=>window.location.href)):i=window._teads_canonical_url?window._teads_canonical_url:window.location?.href,i.match("ampproject.org")&&s&&!s.match("amproject.org")&&(i=s),r.c$.fromNullable({windowDepth:e.length,windowReferrerUrl:i})}const E=()=>encodeURIComponent(y().flatMap((e=>r.c$.fromNullable(e.windowReferrerUrl))).getOrValue(""))},1857:(e,t,i)=>{"use strict";i.d(t,{A$:()=>v,CM:()=>f,Vp:()=>g});var n=i(2768);const s="model",o="name",r="type",a="vendor",l="version",d="console",c="mobile",h="tablet",u="smarttv",p="wearable",g="desktop",m={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={rgx:function(){for(var e,t,i,s,o,r,a,l=0,d=arguments;l<d.length&&!r;){var c=d[l],h=d[l+1];if(void 0===e)for(s in e={},h)"object"==typeof(o=h[s])?e[o[0]]=void 0:e[o]=void 0;for(t=i=0;t<c.length&&!r;)if(r=c[t++].exec((0,n.getUA)()))for(s=0;s<h.length;s++)a=r[++i],"object"==typeof(o=h[s])&&o.length>0?2===o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,a):e[o[0]]=o[1]:3===o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=a?a.replace(o[1],o[2]):void 0:e[o[0]]=a?o[1].call(this,a,o[2]):void 0:4===o.length&&(e[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):e[o]=a||void 0;l+=2}return e},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(m.has(t[i][n],e))return"?"===i?void 0:i}else if(m.has(t[i],e))return"?"===i?void 0:i;return e}},A={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,l],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[o,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],l],[/(edge)\/((\d+)?[\w\.]+)/i],[o,l],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[o,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],l],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[l,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[o,l],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],l],[/;fbav\/([\w\.]+);/i],[l,[o,"Facebook"]],[/fxios\/([\w\.-]+)/i],[l,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,o],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[l,f.str,A.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,l]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,a,[r,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[a,"Apple"],[r,h]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,s,[r,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[s,[a,"Amazon"],[r,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[s,f.str,A.device.amazon.model],[a,"Amazon"],[r,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,a,[r,c]],[/\((ip[honed|\s\w*]+);/i],[s,[a,"Apple"],[r,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,s,[r,c]],[/\(bb10;\s(\w+)/i],[s,[a,"BlackBerry"],[r,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[a,"Asus"],[r,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[s,"Xperia Tablet"],[r,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[a,"Sony"],[s,"Xperia Phone"],[r,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,s,[r,d]],[/android.+;\s(shield)\sbuild/i],[s,[a,"Nvidia"],[r,d]],[/(playstation\s[3portablevi]+)/i],[s,[a,"Sony"],[r,d]],[/(sprint\s(\w+))/i],[[a,f.str,A.device.sprint.vendor],[s,f.str,A.device.sprint.model],[r,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,s,[r,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[s,/_/g," "],[r,c]],[/(nexus\s9)/i],[s,[a,"HTC"],[r,h]],[/(nexus\s6p)/i],[s,[a,"Huawei"],[r,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,s,[r,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[a,"Microsoft"],[r,d]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[a,"Microsoft"],[r,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[a,"Motorola"],[r,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[a,"Motorola"],[r,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,m.trim],[s,m.trim],[r,u]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[a,"Samsung"],[r,u]],[/\(dtv[\);].+(aquos)/i],[s,[a,"Sharp"],[r,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],s,[r,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],s,[r,c]],[/smart-tv.+(samsung)/i],[a,s,[r,u]],[/sie-(\w+)*/i],[s,[a,"Siemens"],[r,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],s,[r,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[a,"Acer"],[r,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],s,[r,h]],[/(lg) netcast\.tv/i],[a,s,[r,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[s,[a,"LG"],[r,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[a,"Lenovo"],[r,h]],[/linux;.+((jolla));/i],[a,s,[r,c]],[/((pebble))app\/[\d\.]+\s/i],[a,s,[r,p]],[/android.+;\s(glass)\s\d/i],[s,[a,"Google"],[r,p]],[/android.+;\s(pixel c)\s/i],[s,[a,"Google"],[r,h]],[/android.+;\s(pixel xl|pixel)\s/i],[s,[a,"Google"],[r,c]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[s,/_/g," "],[a,"Xiaomi"],[r,c]],[/android.+a000(1)\s+build/i],[s,[a,"OnePlus"],[r,c]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[r,m.lowerize],a,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[l,f.str,A.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[l,f.str,A.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],l],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[o,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],l],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[o,l],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[o,"iOS"],[l,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,l]]}},1586:(e,t,i)=>{"use strict";i.r(t),i.d(t,{containsKeys:()=>A,equals:()=>D,exhaustive:()=>M,getAudioContext:()=>p,getExtensionFromMimeType:()=>f,getProtocol:()=>m,hasOwnProperties:()=>C,hasOwnProperty:()=>I,hasValidProperty:()=>E,identity:()=>_,isArray:()=>b,isBoolean:()=>a.Lm,isFunction:()=>S,isNative:()=>L,isNull:()=>w,isNumber:()=>a.Et,isObject:()=>a.Gv,isSizeInPx:()=>T,isString:()=>a.Kg,isStudioCreative:()=>k,isUndefined:()=>a.b0,matchesCheckers:()=>v,noop:()=>x,not:()=>y,offset:()=>u,prop:()=>N,safeProp:()=>R,seconds:()=>h,tap:()=>O,throttle:()=>g});var n=i(4672),s=i(3599),o=i(3842),r=i(5536),a=i(9896);const l=Object.prototype.toString,d=Function.prototype.toString,c=Object.prototype.hasOwnProperty;function h(e){if(!e)return NaN;const t=e.split("."),i=t[0].split(":");let n=3600*Number(i[0])+60*Number(i[1])+Number(i[2]);return 2===t.length&&(n=Number(n+"."+t[1])),n}function u(e=0){const t=e?Math.floor(e/3600):0,i=(e-=3600*t)?Math.floor(e/60):0,n=((e-=60*i)%1).toFixed(3).substr(1);return e=Math.floor(e),o.pad(t)+":"+o.pad(i)+":"+o.pad(e)+n}function p(){return window.AudioContext||window.webkitAudioContext}function g(e,t=250,i=this){let n=!1;return(...s)=>{n||(e.apply(i,s),window.setTimeout((()=>{n=!1}),t),n=!0)}}function m(){return location&&location.protocol&&0===location.protocol.indexOf("http:")?location.protocol:"https:"}function f(e){if(!e)return"";let t=e.split("/")[1]||e;switch(t){case"javascript":case"x-javascript":t="js";break;case"mpeg":t="mpg"}return t}function A(e,t){let i=!1;if(!t)return!1;for(let n in e)if(I(e,n)){if(void 0===typeof t[n])return!1;i=!0}return i}function v(e){return t=>{let i=!0;for(const n in e)if(e.hasOwnProperty(n)&&((0,a.b0)(t[n])||!e[n](t[n]))){i=!1;break}return i}}function b(e){return"[object Array]"===l.call(e)}function w(e){return null===e}function y(e){return t=>!e(t)}const E=(e,t,i)=>I(e,t)&&i(e[t]);function I(e,t){return c.call(e,t)}function C(e,t){return t.every((t=>I(e,t)))}function S(e){return!!e&&"function"==typeof e&&"[object Function]"===l.call(e)}function k(){return n.c$.fromNullable(window.teads?.api).map((e=>(0,s.o)(e.getStudioData,e))).filter(S).map((e=>e())).existsIf(a.Gv)}function T(e){return!!e.match(/px$/)&&(0,a.Et)(parseFloat(e))}const V=/^\[object .+?Constructor\]$/,P=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L(e){const t=typeof e;return r.uu.tryCatch((()=>"function"===t?P.test(d.call(e)):!(!e||"object"!==t||!V.test(l.call(e))))).getOrElse((()=>!1))}function x(){}const _=e=>e,N=e=>t=>t[e],R=e=>t=>n.c$.fromNullable(t[e]),O=e=>t=>(e(t),t);function D(e){return t=>t===e}const M=e=>e},1120:(e,t,i)=>{"use strict";i.d(t,{uk:()=>f,L2:()=>A,bm:()=>v}),i(7479);var n=i(2768),s=i(1299),o=i(2190),r=i(2203);function a(){let e=null;if(window.XMLHttpRequest&&(e=new XMLHttpRequest),e&&!("withCredentials"in e)&&(e=window.XDomainRequest?new window.XDomainRequest:null),!e){try{e=new window.ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(t){try{e=new window.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}e.responseType="msxml-document"}return e}var l=i(1586),d=i(5536),c=i(3441),h=i(3842),u=i(4672),p=i(7982),g=i.n(p),m=i(9896);const f="wigo.teads.tv";class A{static getInstances(){return A.instances}static loadAndStoreReportIfNeeded(e){const t=(0,c.eJ)(),i=(0,c.JO)(t),n=i.teadsWigoDebug||i.teadswigodebug;n&&(e.info(`wigo debug ${n} on ${location.href}`,1),A.reportPromise=A.loadReport(n))}static storeInstance(e){A.instances.push(e)}static loadReport(e){return new Promise(((t,i)=>{const n=a();n.open("GET",`${(0,l.getProtocol)()}//wigo.teads.tv/livedebug/upload/${e}.json`),n.onload=()=>{d.uu.tryCatch((()=>JSON.parse(n.response))).orElse((()=>d.uu.tryCatch((()=>JSON.parse(n.responseText))))).tapLeft((e=>{new r.V("WIGO").error(e)})).orElse((()=>(0,d.HR)(new Error("report is not available from xhr response")))).fold(i,t)},n.onerror=i,n.send()}))}constructor(){if(this.settings=u.NV,this.color="blue",this.statusDetails="",this.bottomPxPosition=10,this.position=1,this.buttonHeight=0,window.teads.WIGO_DEBUG_KEY=!window.teads.WIGO_DEBUG_KEY&&window.teads.HAS_DEBUG_LOGS?"debug":window.teads.WIGO_DEBUG_KEY,this.elapsedTime=0,this.logfile={context:((0,n.getDevice)().toString()+"-"+(0,n.getOS)().toString()+"-"+(0,n.getBrowser)().toString()).replace(/\|/g," "),url:location.href,steps:[],logs:[],timeline:[],vasts:[]},u.c$.fromNullable(A.reportPromise).forEach((e=>e.then((e=>this.report=e)))),this.topWindow=(0,o.findTopWindow)(document.body),window.teads.WIGO_DEBUG_KEY)this.createDebugButton(this.color),this.recordUserActions();else{const e=e=>{const t=e.data.wigoLiveDebug;t&&t.length&&t.length>1&&this.enableWigo(t[1])};try{this.topWindow.addEventListener("message",e)}catch(t){this.topWindow=window,this.topWindow.addEventListener("message",e)}}A.storeInstance(this)}enableWigo(e="enableFromAdSettings"){window.teads.WIGO_DEBUG_KEY=e,this.createDebugButton(this.color),this.recordUserActions()}setPlayerContainer(e){this.playerContainer=e,this.setElementToFollow(this.playerContainer)}setElementToFollow(e){this.elementToFollow=e,this.elementToFollowRelativeRect=(0,s.getClientRectRelativeToDocument)((0,s.getBoundingClientRect)(e),{x:this.topWindow.scrollX,y:this.topWindow.scrollY})}valid(e,t,i,n){if(this.addValidEvent(e,t,{store:i,type:n}),"error"===n){const e=u.c$.fromNullable(i),t=e.filter(m.Kg).orElse((()=>e.filter((e=>!!e.message)).map((e=>u.c$.fromNullable(e.id).filter((e=>!!e)).map((t=>`${t} - ${e.message}`)).getOrValue(`${e.message}`))))).orElse((()=>e.filter((e=>e.length>0)).map(String))).getOrElse((()=>JSON.stringify(i)));this.setStatus(!1,t)}else 3===e&&2===t?this.setStatus(!0,"AdLoaded"):3===e&&3===t&&this.setStatus(!0,"AdStarted")}vastEvent(e,t,i,n){if(this.addValidEvent(0,0,{store:{name:e,time:t,percent:i,pixels:n},type:"vastEvent"}),"complete"===e)this.setStatus(!0,"AdComplete");else if("pause"===e)this.setStatus(!0,"AdPaused"),this.lastTracking="pause";else if("pause"===this.lastTracking)this.lastTracking=null;else if("progress"===e){const e=t?t.split(".")[0]+"s":"";this.setStatus(!0,"AdPlaying: "+e)}}setStatus(e,t=""){const i=e?"green":"red";this.button?(this.status.style.setProperty("background-color",i),this.status.style.setProperty("display","block"),this.loader.style.setProperty("display","none"),this.status.innerHTML=t):(this.color=i,this.statusDetails=t)}moveButton(e){this.bottomPxPosition=A.initialBottomPosition+(e-1)*A.bottomPxInterval,this.position=e,this.button&&this.button.style.setProperty("bottom",this.bottomPxPosition+"px")}followElement(){if(this.isActivated()){const e=(0,s.getBoundingClientRect)(this.elementToFollow);this.elementToFollowRelativeRect=(0,s.isEmptyBoundingClientRect)(e)?this.elementToFollowRelativeRect:(0,s.getClientRectRelativeToDocument)(e,{x:this.topWindow.scrollX,y:this.topWindow.scrollY});const t=(0,s.getClientRectFromClientRectRelativeToDocument)(this.elementToFollowRelativeRect,{x:this.topWindow.scrollX,y:this.topWindow.scrollY}),i=this.topWindow.innerHeight-this.buttonHeight-(A.initialBottomPosition+(A.instances.length-this.position)*A.bottomPxInterval);let n=this.topWindow.innerHeight-t.bottom+t.height/2-this.buttonHeight/2,o=10;n<this.bottomPxPosition?n=this.bottomPxPosition:n>i?n=i:o=50,this.button.style.setProperty("bottom",n+"px"),this.button.style.setProperty("right",o+"px")}}forceReportWithKey(e){window.teads.WIGO_DEBUG_KEY=e,this.sendLogsToWigo((()=>{}))}isActivated(){return!(!window.teads.WIGO_DEBUG_KEY||!this.button)}setVast(e,t,i=""){this.logfile.vasts.push({url:e,content:t,uploadedUrl:i})}getVastUrl(e){return this.report?.vasts?.find((t=>t.url===e))?.uploadedUrl??e}saveVast(e){this.sendLogsToWigo((()=>{}),e)}recordUserActions(){this.elapsedTime<3e5&&setTimeout((()=>{const e=this.logfile.timeline[this.logfile.timeline.length-1],t=(0,s.getWindowSize)(this.topWindow),i=this.topWindow.scrollX,n=this.topWindow.scrollY;if(!e||this.hasInteracted(e,t,i,n)){const e={time:this.elapsedTime,scrollX:i,scrollY:n,screenWidth:t.width,screenHeight:t.height,player:{top:0,height:0,left:0,width:0}};if(this.playerContainer){const t=(0,s.getBoundingClientRect)(this.playerContainer);e.player={top:t.top,height:t.height,left:t.left,width:t.width}}this.logfile.timeline.push(e)}this.elapsedTime+=A.recordUserActionsTiming,this.recordUserActions()}),A.recordUserActionsTiming)}addValidEvent(e,t,i){this.logfile.steps.push({step:e,substep:t,info:i})}createDebugButton(e){if(window.teads.WIGO_DEBUG_KEY&&!this.button){const t=this.topWindow.document.createElement("div");t.innerHTML=A.TEMPLATE,this.button=t.firstChild,this.button.onclick=e=>{this.openWigoReport(),e.stopPropagation()},this.button.style.setProperty("bottom",this.bottomPxPosition+"px"),this.topWindow.document.body.appendChild(this.button),this.status=this.button.firstChild,this.status.style.setProperty("background-color",e),this.status.innerHTML=this.statusDetails,this.loader=this.status.nextSibling,"blue"!==this.color?(this.status.style.setProperty("display","block"),this.loader.style.setProperty("display","none")):(this.status.style.setProperty("display","none"),this.loader.style.setProperty("display","block")),this.buttonHeight=(0,s.getBoundingClientRect)(this.button).height,(0,n.isAmp)()&&teads.helper.AmpResize&&("red"===e&&(teads.helper.AmpResize.ratio=4),setTimeout((()=>this.forceAmpOpen()),1e3))}}forceAmpOpen(){if(!teads.helper.AmpResize.isVisible()){const e=setTimeout((()=>this.forceAmpOpen()),1e3);teads.helper.AmpResize.open((()=>{this.button.style.setProperty("display","none"),setTimeout((()=>this.button.style.setProperty("display","block")),100),clearTimeout(e)}))}}openWigoReport(){if(window.teads.WIGO_DEBUG_KEY){this.button.onclick=e=>{e.stopPropagation()};const e=e=>{setTimeout((()=>{this.button.onclick=e=>{this.openWigoReport(),e.stopPropagation()}}),500)};window.open(this.sendLogsToWigo(e))}}sendLogsToWigo(e,t=`${window.teads.WIGO_DEBUG_KEY}_${Date.now()}.json`){this.logfile.logs=r.V.getFullLogs(),this.sendVastsToWigo(this.logfile.vasts);const i=a();return i.open("PUT",A.serviceUrl+"/livedebug/upload/"+t,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=e,i.onerror=e,i.send(JSON.stringify(function(e,t){let i=[],n=[];return function e(t,s){let o,r;return"object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String?t:(o=i.indexOf(t),o>=0?{$ref:n[o]}:(i.push(t),n.push(s),Array.isArray(t)?(r=[],t.forEach(((t,i)=>{r[i]=e(t,s+"["+i+"]")}))):(r={},Object.keys(t).forEach((i=>{r[i]=e(t[i],s+"["+JSON.stringify(i)+"]")}))),r))}(e,"$")}(this.logfile))),A.serviceUrl+"/livedebug/1e5be8207477d3ae7c5a946e7e0f5d1a.html?file="+t}sendVastsToWigo(e){e.filter((e=>!e.uploadedUrl)).forEach((e=>{const t=`${A.serviceUrl}/livedebug/upload/${(0,h.rand)(20,!1)}.xml`,i=a();i.open("PUT",t,!0),i.setRequestHeader("Content-Type","application/xml; charset=UTF-8"),i.send(e.content),e.uploadedUrl=t,delete e.content}))}hasInteracted(e,t,i,n){return e.scrollY!==n||e.scrollX!==i||e.screenHeight!==t.height||e.screenWidth!==t.width}}A.bottomPxInterval=80,A.recordUserActionsTiming=1e3,A.serviceUrl=location.hostname.match(/(sandbox\.teads\.net|par2\.teads\.tech|wigo|localhost)$/)?(0,l.getProtocol)()+"//"+location.hostname+":18091":"https://"+f,A.instances=[],A.initialBottomPosition=10,A.TEMPLATE=g();const v=({wigo:e,durationPlayed:t,totalDuration:i})=>({event:n,trackingUrls:s})=>{const o=((e,t)=>t>0?Math.floor(100*e/t):0)(t.getOrValue(0),i.getOrValue(0));e.vastEvent(n,(e=>e.map((e=>e.toFixed(2))).getOrValue(""))(t),o,s.map((e=>({url:e}))))}},3768:(e,t,i)=>{"use strict";i.d(t,{M:()=>s,r:()=>o});var n=i(9896);const s=e=>e,o=e=>(0,n.Kg)(e)},2625:(e,t,i)=>{"use strict";i.d(t,{I:()=>o,j:()=>s});var n=i(9896);const s=e=>e,o=e=>(0,n.Kg)(e)},5490:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(3599);const s=function(e){const t=e.length;return function i(...s){return s.length<t?(0,n.o)(i,null,...s):e.call(null,...s)}}},5536:(e,t,i)=>{"use strict";i.d(t,{HR:()=>d,MN:()=>r,uu:()=>s,wV:()=>c,xe:()=>l});var n=i(4672);class s{static tryCatch(e){try{return l(e())}catch(e){return r(e)}}static tryCatchNonNullable(e){try{const t=e();return t?l(t):r(new Error("Value is null or undefined"))}catch(e){return r(e)}}static of(e){return l(e)}constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&this.value===e}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:r(t(this.value)):this}flatMap(e){return this._isRight?e(this.value):this}fold(e,t){return this._isRight?t(this.value):e(this.value)}getOrElse(e){return this._isRight?this.value:e()}getOrValue(e){return this._isRight?this.value:e}orElse(e){return this._isRight?this:e(this.value)}map(e){return this._isRight?l(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}tap(e){return this._isRight&&e(this.value),this}tapLeft(e){return this._isRight||e(this.value),this}toOption(){return this._isRight?n.c$.fromNullable(this.value):n.NV}}class o extends s{constructor(e){super(e,"left")}}function r(e){return new o(e)}class a extends s{constructor(e){super(e,"right")}}function l(e){return new a(e)}const d=r,c=l},4672:(e,t,i)=>{"use strict";i.d(t,{NV:()=>r,c$:()=>s,jc:()=>n,p2:()=>o});const n={filter:e=>t=>t.filter(e),map:e=>t=>t.map(e),flatMap:e=>t=>t.flatMap(e),forEach:e=>t=>t.forEach(e),getOrValue:e=>t=>t.getOrValue(e),orElse:e=>t=>t.orElse(e),fold:(e,t)=>i=>i.match({none:e,some:t})};class s{static of(e){return o(e)}static fromNullable(e){return null==e?r:s.of(e)}static fromPredicate(e,t){return t(e)?s.of(e):r}static empty(){return r}constructor(e,t){this.value=e,this._isEmpty=t}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}getOrElse(e){return this._isEmpty?e():this.value}getOrNull(){return this._isEmpty?null:this.value}getOrValue(e){return this._isEmpty?e:this.value}orElse(e){return this._isEmpty?e():this}map(e){return this._isEmpty?r:s.of(e(this.value))}flatMap(e){return this._isEmpty?r:e(this.value)||r}filter(e){return this._isEmpty||!e(this.value)?r:s.of(this.value)}existsIf(e){return!this._isEmpty&&e(this.value)}forEach(e){this._isEmpty||e(this.value)}match(e){return this._isEmpty?e.none():e.some(this.value)}}function o(e){return new s(e,!1)}const r=new s(null,!0)},4461:(e,t,i)=>{"use strict";function n(e,t,i,n,s,o,r,a,l,d){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return i(t(e));case 4:return n(i(t(e)));case 5:return s(n(i(t(e))));case 6:return o(s(n(i(t(e)))));case 7:return r(o(s(n(i(t(e))))));case 8:return a(r(o(s(n(i(t(e)))))));case 9:return l(a(r(o(s(n(i(t(e))))))));case 10:return d(l(a(r(o(s(n(i(t(e)))))))))}}i.d(t,{Ay:()=>s,Lx:()=>n});const s=function(e,t,i,n,s,o,r,a,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return i(t(e.apply(this,arguments)))};case 4:return function(){return n(i(t(e.apply(this,arguments))))};case 5:return function(){return s(n(i(t(e.apply(this,arguments)))))};case 6:return function(){return o(s(n(i(t(e.apply(this,arguments))))))};case 7:return function(){return r(o(s(n(i(t(e.apply(this,arguments)))))))};case 8:return function(){return a(r(o(s(n(i(t(e.apply(this,arguments))))))))};case 9:return function(){return l(a(r(o(s(n(i(t(e.apply(this,arguments)))))))))}}}},589:(e,t,i)=>{"use strict";i.d(t,{v:()=>n});const n={bimap:(e,t)=>([i,n])=>[e(i),t(n)],fstMap:e=>([t,i])=>[e(t),i],sndMap:e=>([t,i])=>[t,e(i)],biforeach:(e,t)=>([i,n])=>{e(i),t(n)},fstForeach:e=>([t])=>e(t),sndForeach:e=>([,t])=>e(t),zip:([[e,t],[i,n]])=>[[e,i],[t,n]]}},7812:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(2768),s=i(4672),o=i(4077);const r=new o.Ay("https://s8t.teads.tv/logs/format/http-source",20,"1401",s.NV,{getSamplingThreshold:o.l4,sendLog:o.ll,getFullContext:n.getFullContext,isHeaderBiddingTag:()=>!1})},7479:(e,t,i)=>{"use strict";const n=i(9896).KZ;n.START_TIME=n.START_TIME||Date.now(),n.FULL_LOGS=n.FULL_LOGS||[],n.HAS_DEBUG_LOGS=n.HAS_DEBUG_LOGS||!1,n.CONTEXT_IS_INITIALIZED=!1,n.WIGO_DEBUG_KEY=n.WIGO_DEBUG_KEY||null,window.teads=n},3599:(e,t,i)=>{"use strict";i.d(t,{o:()=>s});var n=i(1586);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});const s=function(e,t,...i){if((0,n.isNative)(e.bind))return e.bind(t,...i);const s=n.noop,o=function(...n){return e.apply(this instanceof s?this:t,i.concat(n))};return s.prototype=e.prototype,o.prototype=new s,o}},8683:(e,t,i)=>{"use strict";i.d(t,{Om:()=>n,Q6:()=>s,fp:()=>o});const n=e=>25===e,s=e=>22===e||23===e,o=(e,t)=>t&&(6===e||42===e)},62:(e,t,i)=>{"use strict";i.d(t,{V4:()=>r,lU:()=>n,tj:()=>o,xp:()=>s});const n=new RegExp("/videoplayback/id/(\\w+)/itag/"),s={xs:{className:"xs-screen",size:480},sm:{className:"sm-screen",size:640}},o=0,r=2147483647},4701:(e,t,i)=>{"use strict";i.d(t,{a:()=>qi,dV:()=>Ki,qp:()=>Qi,s3:()=>Yi,fw:()=>ji});var n={};i.r(n),i.d(n,{TEMPLATE:()=>hi,expandTemplate:()=>ui,inread:()=>pi});var s={};i.r(s),i.d(s,{AdChoices:()=>$i,Bench:()=>_i,ClickThrough:()=>Ri,Extensions:()=>Di,Responsive:()=>Mi,Tracker:()=>Ui});var o=i(8447),r=i(4672),a=i(4461),l=i(2203),d=i(1586),c=i(3013),h=i(1802),u=i(2768),p=i(1299),g=i(2190),m=i(1336),f=i(3441),A=i(3768),v=i(8683),b=i(9896),w=i(1068),y=i(1279),E=i(3842);class I{static listenWindow(e,t,i){return new I(e,t,i)}constructor(e,t,i){if(this.win=e,this.onVisible=t,this.onHidden=i,this.prefixes=["","webkit","ms","moz"],this.props=["VisibilityState","visibilitychange","Hidden"],this.isInitialState=!0,this.enabled=!0,this.isAmpVisible=!0,this.windows=[],I.logger.debug("init"),this.eventListenerManager=new w.C,u.isAmp()){I.logger.debug("Init AMP visibility plugin");let e=e=>{window.context&&(window.context.hidden&&this.isAmpVisible?(I.logger.debug("AMP visibility, window is hidden, call hidden callback"),this.isAmpVisible=!1,this.onHiddenCallback()):window.context.hidden||this.isAmpVisible||(I.logger.debug("AMP visibility, window is visible, call visibile callback"),this.isAmpVisible=!0,this.onVisibleCallback()))};this.eventListenerManager.add("amp:visibilitychange",window,e)}else if(u.isIABSafeFrame()){let e,t=!0;this.intervalIABSafeFrame=setInterval((()=>{e=this.isVisible(),e&&!t?(t=!0,this.onVisibleCallback()):!e&&t&&(t=!1,this.onHiddenCallback())}),500)}else this.prefix=this.getPrefix(),this.addWindow(this.win),this.visibleWindow=this.win}destroy(){try{if(u.isAmp())return void this.eventListenerManager.remove("amp:visibilitychange");u.isIABSafeFrame()&&clearInterval(this.intervalIABSafeFrame),clearInterval(this.intervalFocus),this.eventListenerManager.removeAll(),this.windows.forEach((e=>{e.focus(),this.removeWindow(e,!1)})),I.logger.debug("destroy")}catch(e){I.logger.error("Visibility could not be fully destroyed.",e)}finally{this.disable(),this.windows=[]}}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}isVisible(){let e;if(u.isAmp())e=this.isAmpVisible;else if(u.isIABSafeFrame()){const t=u.getIABSafeFrameWindow();e=!(0,b.b0)(t)&&t.$sf.ext.winHasFocus?t.$sf.ext.winHasFocus():!document.hidden}else e=!!this.visibleWindow;return e}addWindow(e){this.windows.includes(e)||(this.windows.push(e),this.addListener(e,(()=>this.setWindowVisible(e)),(()=>this.setWindowHidden(e))))}removeWindow(e,t=!0,i=!0){if(this.windows.includes(e)){const n=this.isVisible();i&&this.windows.splice(this.windows.indexOf(e),1),t&&n&&!this.isVisible()&&this.onHiddenCallback()}}getWindows(){return this.windows}addListener(e,t,i){try{const n=e.document;if(this.prefixesSupported(n)){const e=()=>{n[this.getPrefixedMethodName(this.props[2])]?i():t()};this.eventListenerManager.add(this.getPrefixedMethodName(this.props[1]),n,e)}else if(n.hasFocus)I.logger.debug("Add listener on hasFocus method with an interval of 100ms"),clearInterval(this.intervalFocus),this.intervalFocus=setInterval((()=>{n.hasFocus()?t():i()}),100);else{g.findAllWindows(this.win.document.body,!0).forEach((e=>{this.addWindow(e)})),I.logger.debug("Add listener on focus and blur events");const n=e=>{I.logger.debug("Exec callback visible"),t()},s=t=>{I.logger.debug("Exec callback hidden"),e===t.target&&i()};e.tt_visibility_visible=n,e.tt_visibility_hidden=s,e.hasOwnProperty("onpageshow")&&(this.eventListenerManager.add("pageshow",e,(e=>{I.logger.debug("pageshow event received"),n(e)})),this.eventListenerManager.add("pagehide",e,(e=>{I.logger.debug("pagehide event received"),s(e)}))),this.eventListenerManager.add("focus",e,(e=>{I.logger.debug("focus event received"),clearTimeout(this.eventTimeout),n(e)})),this.eventListenerManager.add("blur",e,(e=>{I.logger.debug("blur event received"),this.eventTimeout=setTimeout((()=>{s(e)}),10)}))}}catch(e){}}setWindowVisible(e){this.isInitialState||this.isVisible()||(this.visibleWindow=e,I.logger.debug("onVisible callback exec"),this.onVisibleCallback())}setWindowHidden(e){this.isInitialState=!1,u.isIABSafeFrame()&&this.isVisible()||this.isVisible()&&(this.visibleWindow=null,I.logger.debug("onHidden callback exec"),this.onHiddenCallback())}onVisibleCallback(){this.enabled&&this.onVisible()}onHiddenCallback(){this.enabled&&this.onHidden()}getPrefixedMethodName(e,t){return r.c$.fromNullable(t).orElse((()=>r.c$.fromNullable(this.prefix))).match({some:t=>t+e,none:()=>e.toLowerCase()})}getPrefix(e){e||(e=window.document);for(let t=0,i=this.prefixes.length;t<i;t++){const i=this.getPrefixedMethodName(this.props[2],this.prefixes[t]);if(null!==e[i]&&void 0!==e[i])return this.prefixes[t]}}prefixesSupported(e){if(u.isDesktop())return!1;let t=!1;return this.props.forEach((i=>{t=t||this.getPrefixedMethodName(i,this.prefix)in e})),t}}I.logger=new l.V("Visibility");var C=i(1120);const S="{{",k="}}";function T(e,t){let i=e;if(t)for(var n in t)i=i.replace(new RegExp(S+n+k,"g"),t[n]);return i}class V{constructor(e,t){this.className=e,this.css=t}initElement(){this.element=document.createElement("div"),this.element.className=this.className,this.element.style.setProperty("margin-bottom","0","important"),this.element.innerHTML=this.getInnerHtml()}getElement(){return this.element}getHTML(){let e=this.getInnerHtml();if(e)return`<div class="${this.className}">${e}</div>`}getCSS(){return T(this.css,{assetsPath:c.$.assetsUrl})}getInnerHtml(){return this.isEnabled()?this.innerHTML:""}hide(){this.element&&this.element.style.setProperty("display","none")}show(){this.element&&this.element.style.setProperty("display","block")}}var P=i(3599),L=i(5033),x=i.n(L),_=i(4421),N=i.n(_),R=i(4170),O=i.n(R),D=i(2421),M=i.n(D),B=i(5253),F=i.n(B),U=i(1511),$=i.n(U),W=i(2431),H=i.n(W),z=i(9831);class G extends V{constructor(e){super("teads-ui-components-adchoices",O()),this.getVpaidAd=e,this.innerHTML="<span>AdChoices</span>",this.initElement(),u.isMobile()||(p.addEventListener("mouseover",this.getElement(),(0,P.o)(this.onMouseOver,this)),p.addEventListener("mouseout",this.getElement(),(0,P.o)(this.onMouseOut,this))),p.addEventListener("click",this.getElement(),(0,P.o)(this.onClick,this))}onMouseOver(){g.addClass(this.getElement(),"expanded")}onMouseOut(){g.removeClass(this.getElement(),"expanded")}onClick(){this.getVpaidAd().forEach((e=>e.dispatchCustomEvent(z.A.AdChoicesClickRequest)))}isEnabled(){return!0}}class j extends V{constructor(e){super("teads-ui-components-credits",x()),this.config=e;let t=this.config.getText().replace(/\[([^\]]*)\]/g,'<span class="teads-ui-components-credits-colored">$1</span>'),i=this.config.getLink()||"https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads";this.innerHTML=`<a href="${i}" rel="nofollow" target="_blank">${t}</a>`,this.initElement()}isEnabled(){return this.config.isEnabled()}}class q extends V{constructor(e){super("teads-ui-components-hpl",M());const t=e.match({some:e=>`&auctid=${e}`,none:()=>""});this.innerHTML=`<a href="https://t.teads.tv/track?action=hpl-register${t}"></a>`,this.initElement()}isEnabled(){return!0}}class K extends V{constructor(e){super("teads-ui-components-label",N()),this.label=e,this.innerHTML=this.label.getText(),this.initElement()}isEnabled(){return this.label.isEnabled()}}class Q extends V{constructor(){super("close-button icon-close",""),this.WIDTH_WHEN_VISIBLE=11,this.eventListenerManager=new w.C,this.innerHTML="",this.initElement(),this.eventListenerManager.add("click",this.getElement(),(e=>this.onClick(e)))}isEnabled(){return!0}hide(){this.element&&this.element.style.setProperty("width","0")}show(){this.element&&this.element.style.setProperty("width",`${this.WIDTH_WHEN_VISIBLE}px`)}onClick(e){(0,d.isFunction)(this.onClickAction)&&this.onClickAction()}}var Y=i(7214);function Z(e){const t=Number(e.getAdDuration()),i=e.getAdRemainingTime()>0?e.getAdRemainingTime():t;return t>0?t-i:0}function X(e){return!(e.getAdVolume()>0)}var J=i(6338);const ee="teads-ui-component-",te="main-container",ie="layout-video-component";class ne{constructor(e,t,i,n,s){if(this.ui=e,this.element=t,this.vpaid=i,this.config=n,this.globalVpaidEventHandler=s,this.eventHandler=new J.A,this.showOnVideoStart=!0,this.isCountdownEnded=!1,n.style){var o=t.getAttribute("style");t.setAttribute("style",(o?o+";":"")+n.style)}let r=new RegExp(ee+"([a-z]*)"),a=t.className.match(r);this.id=a&&a[1]?a[1]:"",this.logger=new l.V("teads.ui.Component"+(this.id?"."+this.id:"")),t.style.zIndex||t.style.setProperty("z-index","2"),this.hide(),this.vpaid.subscribe((()=>{this.onVideoStart()}),Y.A.AdVideoStart);const d=n.startOffset;if(!(0,b.b0)(d)&&d>0){this.showOnVideoStart=!1;const e=()=>{Z(this.vpaid)>=d&&(this.vpaid.unsubscribe(e,Y.A.AdRemainingTimeChange),this.isCountdownEnded=!0,this.isEnabled()&&this.show())};this.vpaid.subscribe(e,Y.A.AdRemainingTimeChange)}else this.isCountdownEnded=!0;this.bindClick()}init(){}setShowOnVideoStart(e){this.showOnVideoStart=e}getShowOnVideoStart(){return this.showOnVideoStart}getConfig(){return this.config}isEnabled(){return!this.config.disable}getElement(){return this.element}show(){this.isCountdownEnded&&(g.removeClass(this.getElement(),"hide"),g.addClass(this.getElement(),"show"))}hide(){g.removeClass(this.getElement(),"show"),g.addClass(this.getElement(),"hide")}isVisible(){return this.getElement().className.indexOf("show")>-1}getVpaid(){return this.vpaid}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}getOverridenEvents(){return[]}getOverridenMethods(){return[]}restoreOnClickAction(){}onMethod(e,t=[]){}onOverridenMethod(e,t=[]){}remove(){r.c$.fromNullable(this.getElement().parentNode).forEach((e=>e.removeChild(this.getElement())))}onVideoStart(){this.showOnVideoStart&&this.show()}dispatchVpaidEvent(e,t){if(this.globalVpaidEventHandler)try{this.globalVpaidEventHandler({type:e,data:t})}catch(i){this.logger.error("error calling dispatchVpaidEvent "+e,t)}else this.logger.error("no globalVpaidEventHandler given. Dispatch "+e+" failed",t)}bindClick(){p.addEventListener("click",this.getElement(),(e=>{this.onClick(e)}))}onClick(e){this.dispatchUiEvent(this.eventName)}dispatchUiEvent(e){e&&(this.logger.info("dispatch UI event "+e),this.dispatchVpaidEvent(e))}}class se extends ne{constructor(){super(...arguments),this.lastVolume=1}init(){this.isMuted=X(this.vpaid),this.eventName=z.A.SoundToggleRequest,this.vpaid.subscribe((()=>{this.isMuted=X(this.vpaid),this.onMuteChange()}),Y.A.AdStarted),this.vpaid.subscribe((()=>{this.isMuted=X(this.vpaid)}),Y.A.AdVideoStart),this.vpaid.subscribe((()=>{this.hide()}),Y.A.AdStopped),this.ui.subscribe((()=>{this.hide()}),z.A.EndscreenInit),this.vpaid.subscribe((()=>{(!this.isMuted&&X(this.vpaid)||this.isMuted&&!X(this.vpaid))&&(this.lastVolume=X(this.vpaid)?this.lastVolume:this.vpaid.getAdVolume(),this.isMuted=X(this.vpaid),this.onMuteChange())}),Y.A.AdVolumeChange),this.onMuteChange(),super.init()}onMuteChange(){g[X(this.vpaid)?"addClass":"removeClass"](this.getElement(),"muted")}setAdVolume(){this.vpaid.setAdVolume(this.isMuted?this.lastVolume:0)}onClick(e){super.onClick(e),this.setAdVolume(),this.isMuted=!this.isMuted,this.onMuteChange()}}class oe{}oe.OFF="icon-muteoff",oe.ON="icon-muteon";class re extends V{constructor(){super("teads-ui-components-smart-header",$()),this.isMuted=!0,this.eventListenerManagerAdChoices=new w.C,this.eventListenerManagerSound=new w.C,this.innerHTML=H()}init(e,t){this.vpaidAd=e,this.volumeController=t,this.initElement(),this.hide(),this.smartCloseButton=new Q,this.closeButtonContainer=this.element.getElementsByClassName("close-button-smart")[0],this.closeButtonContainer.appendChild(this.smartCloseButton.getElement()),this.hideCloseButton();const i=this.element.getElementsByClassName("adChoices-button-smart")[0];this.eventListenerManagerAdChoices.add("click",i,(()=>this.onClickAdChoicesButton())),this.smartSoundButton=this.element.getElementsByClassName("sound-button-smart")[0],this.eventListenerManagerSound.add("click",this.smartSoundButton,(()=>this.onClickSoundButton())),this.vpaidAd.subscribe((()=>this.onVolumeChange()),Y.A.AdVolumeChange)}showCloseButton(){this.closeButtonContainer.style.setProperty("display","inline-block"),requestAnimationFrame((()=>this.smartCloseButton.show()))}hideCloseButton(){this.closeButtonContainer.style.setProperty("display","none"),this.smartCloseButton.hide()}isEnabled(){return!0}toggleSoundButtonIcon(){const e=this.smartSoundButton.firstElementChild,t=this.isMuted?oe.OFF:oe.ON,i=this.isMuted?oe.ON:oe.OFF;(0,g.replaceClass)(e,t,i)}onClickSoundButton(){this.volumeController.toggleVolume()}onClickAdChoicesButton(){this.vpaidAd.dispatchCustomEvent(z.A.AdChoicesClickRequest)}onVolumeChange(){this.isMuted=X(this.vpaidAd),this.toggleSoundButtonIcon()}}class ae{constructor(e){this.components=e}getComponent(e){return this.components.hasOwnProperty(e)?this.components[e]:null}getComponents(){return this.components}showComponent(e){this.components.hasOwnProperty(e)&&this.components[e].show()}hideComponent(e){this.components.hasOwnProperty(e)&&this.components[e].hide()}showAllComponents(){for(let e in this.components)this.components.hasOwnProperty(e)&&this.components[e].show()}hideAllComponents(){for(let e in this.components)this.components.hasOwnProperty(e)&&this.components[e].hide()}}var le=i(2301),de=i.n(le),ce=i(4491),he=i.n(ce);const ue="teads-format-css";function pe(e,t,i){r.c$.fromNullable(t?.document).forEach((t=>{if(!t.getElementById(i)){const n=T(e,{assetsPath:c.$.assetsUrl}),s=t.createElement("style");s.setAttribute("id",i),s.setAttribute("class","teads-inline-style"),s.appendChild(t.createTextNode(n)),t.head.appendChild(s)}}))}var ge=i(2375);const me=[{name:"DoubleVerify",domain:/cdn\.doubleverify\.com/,appendRule:(e,{playerContainer:t})=>{t.parentElement?.appendChild(e)}},{name:"ComScore",domain:/sb\.voicefive\.com/,appendRule:(e,{playerContainer:t})=>{t.insertBefore(e,t.firstChild)}},{name:"IAS",domain:/pixel\.adsafeprotected\.com/,appendRule:(e,{parentContainer:t})=>{t.insertBefore(e,t.firstChild)}}];let fe;const Ae=()=>{if(void 0!==fe)return fe;if("undefined"==typeof DOMParser||"function"!=typeof DOMParser)fe=!1;else{const e=new DOMParser;try{const t=e.parseFromString("<div>Hello</div>","text/html");fe="DIV"===t.body.firstElementChild?.nodeName&&"Hello"===t.body.firstElementChild.innerHTML}catch(e){fe=!1}}return fe},ve=(e,{onEnterElement:t})=>{if(!0!==t(e))for(let i=e.firstElementChild;i;i=i.nextElementSibling)ve(i,{onEnterElement:t})},be=e=>{const t=e.getAttribute("src");return!("SCRIPT"!==e.nodeName||!t||!me.some((e=>e.domain.test(t))))},we=e=>t=>e.parseFromString((e=>`<div>${e}</div>`)(t),"text/html").body.firstElementChild;class ye{constructor(e,t,i,n=r.NV){this.sumologicLogger=e,this.connectionType=t,this.win=i,this.containers=n,this.thresholdReached=!1,this.thresholdReachedCallbacks=[],Ae()}appendViewabilityTags(e,t){e.forEach((e=>{this.containers.match({some:t=>{var i;(i=e.provider,me.find((e=>e.name===i)))?.appendRule((e=>{const t=document.createElement("script");for(let i=0;i<e.attributes.length;i++){const{name:n,value:s}=e.attributes[i];t.setAttribute(n,s)}return t})(e.script),t)},none:()=>this.sumologicLogger.error("ViewabilityTags.appendViewabilityTags called with no containers")})}))}getCreativeTag(e,t=r.NV){if(Ae()&&this.connectionType.isDisplay()){(e=>{const t=new DOMParser;((e,t)=>{const i=[];return ve(e,{onEnterElement:e=>{if(t(e))return i.push(e),!0}}),i})(we(t)(e),be).forEach((e=>{(new Image).src=e.getAttribute("src")}))})(e);const{creative:i,viewabilityTags:n}=(e=>{const t=new DOMParser,i=we(t)(e),n=((e,t)=>{const i=[];return ve(e,{onEnterElement:e=>{if(t(e))return i.push(e),!0}}),i.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)})),i})(i,be).map((e=>{const t=e.getAttribute("src"),i=(e=>me.find((t=>t.domain.test(e))))(t);return{provider:i.name,source:t,script:e}}));return{creative:i.innerHTML,viewabilityTags:n}})(e);return this.onceThresholdReached((()=>this.appendViewabilityTags(n,t))),i}return e}onceThresholdReached(e){this.thresholdReached?e():this.thresholdReachedCallbacks.push(e)}onPercentageVisibilityChange(e){this.thresholdReached||.25<=e&&this.resolveThresholdReach()}onScroll(){this.thresholdReached||this.containers.match({some:({playerContainer:e})=>{const t=(0,g.getPercentageInView)({element:e,elementAncestors:(0,g.findParentElements)(e),elementClientRect:(0,p.getBoundingClientRect)(e),mainWindow:this.win,elementHeight:(0,p.getSize)(e).height,allowNegative:!0});this.onPercentageVisibilityChange(t)},none:()=>this.sumologicLogger.error("ViewabilityTags.onScroll called with no containers")})}resolveThresholdReach(){!0!==this.thresholdReached&&(this.thresholdReached=!0,this.thresholdReachedCallbacks.forEach((e=>e())),this.thresholdReachedCallbacks=[])}}class Ee{constructor(){this.lastUserInteractionSound=0,this.cursorCoords={x:0,y:0},this.currentVolume=0,this.muteCallbacks=[],this.unmuteCallbacks=[],this.eventListenerManager=new w.C}init(e){this.abstractFormat=e,this.vpaidAd=e.getVpaidAd(),this.formatConfig=e.formatConfig,this.formatConfig.soundStart.isMute()?this.hasStarted=!1:this.formatConfig.soundStart.isUnmute()?this.hasStarted=!0:this.formatConfig.soundStart.isCountdown()&&(this.hasStarted=!1)}getVolume(){return-1===this.vpaidAd.getAdVolume()?this.currentVolume:this.vpaidAd.getAdVolume()}setVolume(e){this.getVolume()!==e&&(this.currentVolume=e,this.vpaidAd.setAdVolume(e))}toggleVolume(){if(this.getVolume()>0)this.mute(),this.lastUserInteractionSound=1,this.muteCallbacks.forEach((e=>e()));else{let e=this.formatConfig.volume.getMain();this.setVolume(e),this.lastUserInteractionSound=2,this.unmuteCallbacks.forEach((e=>e()))}}userAlreadyInteracted(){return 0!==this.lastUserInteractionSound}startAt(e){let t=()=>{this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()>=e&&(this.vpaidAd.unsubscribe(t,Y.A.AdRemainingTimeChange),this.hasStarted||(this.hasStarted=!0,this.setVolume(this.formatConfig.volume.getMain())))};this.vpaidAd.subscribe(t,Y.A.AdRemainingTimeChange)}mute(){this.setVolume(0)}isMuted(){return 0===this.getVolume()}onAdVideoStart(){this.formatConfig.soundStart.isUnmute()?this.setVolume(this.formatConfig.volume.getMain()):this.formatConfig.soundStart.isCountdown()?this.startAt(this.formatConfig.soundStart.getCountdown()):this.setVolume(0)}replay(){let e=(0,p.getBoundingClientRect)(this.abstractFormat.parentContainer);(0,u.isDesktop)()&&(this.cursorCoords={x:Math.floor(e.left+e.width/2),y:Math.floor(e.top+e.height/2)},this.eventListenerManager.add("mousemove",this.abstractFormat.placement.placementConfig?.parentWindow.getWindow().document.body,(e=>{this.cursorCoords={x:e.clientX,y:e.clientY}})))}startInView(){this.userAlreadyInteracted()||this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&(this.formatConfig.soundStart.isCountdown()||this.formatConfig.soundStart.isUnmute())&&this.setVolume(this.formatConfig.volume.getMain())}endInView(){!this.userAlreadyInteracted()&&this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&this.setVolume(0)}addMuteCallback(e){this.muteCallbacks.includes(e)||this.muteCallbacks.push(e)}addUnmuteCallback(e){this.unmuteCallbacks.includes(e)||this.unmuteCallbacks.push(e)}}var Ie,Ce=i(2635),Se=i(1164),ke=i(7354),Te=i(258),Ve=i(4724),Pe=i(6463),Le=i(1885),xe=i(8562),_e=i(3940),Ne=i(108),Re=i(2955),Oe=i(8709),De=i(3934);!function(e){e[e.JS=2]="JS",e[e.POSTMESSAGE=3]="POSTMESSAGE"}(Ie||(Ie={}));const Me=Ie;let Be=8e3,Fe=1e4;var Ue=i(8442);function $e(e,t){return function(...i){var n=i[0];switch(t){case Y.A.AdClickThru:n={url:i[0],id:i[1],playerHandles:i[2]};break;case Y.A.AdError:n={message:i[0],id:i[1]}}e({type:t,data:n})}}function We(e,t){switch(e){case"initAd":if(t>=Ue.A.LOADING)throw"VPAID already initalized, cannot call initAd twice";break;case"startAd":if(t<Ue.A.LOADED)throw"VPAID not started, use initAd, and wait for AdLoaded event before call startAd method";if(t>=Ue.A.STARTING)throw"Ad already started, cannot call startAd twice"}}const He=new l.V("VPAIDJSGuard");class ze{getVPAID(){return this.vpaid}initAd(e,t,i,n,s,o){this.vpaidguard("initAd",[e,t,i,n,s,o])}skipAd(){this.vpaidguard("skipAd")}resizeAd(e,t,i="normal"){this.vpaidguard("resizeAd",[e,t,i])}handshakeVersion(e){return this.vpaidguard("handshakeVersion",[e])}startAd(){this.vpaidguard("startAd",[])}stopAd(){this.vpaidguard("stopAd",[])}pauseAd(){this.vpaidguard("pauseAd",[])}resumeAd(){this.vpaidguard("resumeAd",[])}expandAd(){this.vpaidguard("expandAd",[])}collapseAd(){this.vpaidguard("collapseAd",[])}getAdLinear(){return this.vpaidguard("getAdLinear",[])}getAdWidth(){return this.vpaidguard("getAdWidth",[])}getAdHeight(){return this.vpaidguard("getAdHeight",[])}getAdExpanded(){return this.vpaidguard("getAdExpanded",[])}getAdSkippableState(){return this.vpaidguard("getAdSkippableState",[])}getAdRemainingTime(){return this.vpaidguard("getAdRemainingTime",[])}getAdDuration(){return this.vpaidguard("getAdDuration",[])}getAdVolume(){return this.vpaidguard("getAdVolume",[])}getAdCompanions(){return this.vpaidguard("getAdCompanions",[])}getAdIcons(){return this.vpaidguard("getAdIcons",[])}setAdVolume(e){return this.vpaidguard("setAdVolume",[e])}subscribe(e,t,i){this.vpaidguard("subscribe",[e,t,i])}unsubscribe(e,t){this.vpaidguard("unsubscribe",[e,t])}setVPAID(e){this.vpaid=e}vpaidguard(e,t=[]){try{return this.callVPAIDMethod(e,t)}catch(e){He.error(`VPAID method guard error: "${e}"`)}}callVPAIDMethod(e,t=[]){return this.vpaid[e].apply(this.vpaid,t)}}class Ge extends ze{constructor(){super(...arguments),this.status=Ue.A.READY,this.type=Me.JS,this.environmentVars=r.c$.empty(),this.timeoutId={},this.dispatchedEvents={},this.wigo=r.c$.empty(),this.eventHandler=new J.A}static log(e){Ge.hasLogged.includes(e)||(Ge.logger.info(e),Ge.hasLogged.push(e))}initAd(e,t,i,n,s="",o){try{We("initAd",this.status)}catch(e){return this.dispatchEvent(Y.A.AdLog,e)}this.status=Ue.A.LOADING,this.environmentVars=r.c$.fromNullable(o),super.initAd(e,t,i,n,s,o)}handleAdCallTimeout(e){const t=Be-e,i=()=>{this.dispatchedEvents[Y.A.AdLoaded]||this.dispatchEvent(Y.A.AdError,{message:"Creative did not initiated after "+Be+"ms (current status "+this.status+")",id:De.i.GENERAL.id})};!this.timeoutId.initAd&&t>0?this.timeoutId.initAd=setTimeout(i,t):t<0&&i()}startAd(){try{We("startAd",this.status)}catch(e){return this.dispatchEvent(Y.A.AdLog,e)}this.status=Ue.A.STARTING,this.timeoutId.startAd=setTimeout((()=>{this.dispatchedEvents[Y.A.AdStarted]||this.dispatchEvent(Y.A.AdError,{message:"Creative did not start after 8000ms",id:De.i.GENERAL.id})}),8e3),super.startAd()}stopAd(){this.status>Ue.A.STOPPING&&(this.status=Ue.A.STOPPING,this.clearAllTimeout(),this.timeoutId.stopAd=setTimeout((()=>{this.dispatchedEvents[Y.A.AdStopped]||(this.dispatchEvent(Y.A.AdLog,"Creative did not stop after 1000ms, force stop !"),this.dispatchEvent(Y.A.AdStopped))}),1e3),super.stopAd())}skipAd(){if(this.status>Ue.A.SKIPPING){this.status=Ue.A.SKIPPING,this.timeoutId.skipAd=setTimeout((()=>{this.status>=Ue.A.SKIPPING&&(this.dispatchEvent(Y.A.AdLog,"Creative did not skip after 1000ms, force skip !"),this.dispatchEvent(Y.A.AdSkipped),this.stopAd())}),1e3);try{super.skipAd()}catch(e){this.dispatchEvent(Y.A.AdLog,"SkipAd throw an exception "+e)}}}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}getAdWidth(){const e=this.vpaid.getAdWidth(),t=this.environmentVars.flatMap((e=>r.c$.fromNullable(e.slot).map((e=>e.offsetWidth))));return String(e).indexOf("%")>-1&&t.nonEmpty()?t.getOrValue(0):String(e).indexOf("px")?parseInt(String(e).replace("px",""),10):e}getAdHeight(){const e=this.vpaid.getAdHeight(),t=this.environmentVars.flatMap((e=>r.c$.fromNullable(e.slot).map((e=>e.offsetHeight))));return(String(e).indexOf("%")>-1||parseInt(String(e),10)<=0)&&t.nonEmpty()?t.getOrValue(0):String(e).indexOf("px")?parseInt(String(e).replace("px",""),10):e}setWigo(e){this.wigo=r.c$.fromNullable(e)}getTeadsEnvironmentVars(){return this.vpaid.getTeadsEnvironmentVars?.()??this.environmentVars}vpaidguard(e,t=[]){try{if(this.status!==Ue.A.REMOVED)return this.callVPAIDMethod(e,t)}catch(t){switch(e){case"initAd":case"startAd":this.dispatchEvent(Y.A.AdError,{message:"error call "+e+": "+t,id:De.i.GENERAL.id});break;default:this.dispatchEvent(Y.A.AdLog,"error call "+e+": "+t)}Ge.logger.error(`vpaidguard -> vpaid creative threw an error for ${e}`,t)}}dispatchEvent(e,t){return this.handleVpaidEvent(new Y.A(e,t))}handleVpaidEvent(e){if(!(this.status===Ue.A.REMOVED||[Y.A.AdLoaded,Y.A.AdStarted,Y.A.AdVideoStart,Y.A.AdVideoComplete,Y.A.AdSkipped,Y.A.AdStopped,Y.A.AdError].includes(e.type)&&this.dispatchedEvents[e.type])){if(this.status>Ue.A.STOPPED)switch(e.type){case Y.A.AdLoaded:this.status=Ue.A.LOADED,this.clearTimeout("initAd"),Ge.log("AdLoaded - Response from initAd"),this.wigo.forEach((e=>e.valid(3,2)));break;case Y.A.AdStarted:this.status=this.status<Ue.A.STARTED?Ue.A.STARTED:this.status,this.clearTimeout("startAd"),Ge.log("AdStarted - Response from startAd"),this.wigo.forEach((e=>e.valid(3,3)));break;case Y.A.AdVideoStart:case Y.A.AdPlaying:this.status=Ue.A.PLAYING;break;case Y.A.AdPaused:this.status=Ue.A.PAUSED;break;case Y.A.AdVideoComplete:this.status=Ue.A.COMPLETE;break;case Y.A.AdSkipped:this.status=Ue.A.SKIPPED,this.clearAllTimeout();break;case Y.A.AdStopped:this.status=Ue.A.STOPPED,this.clearAllTimeout();break;case Y.A.AdError:Ge.logger.info("AdError - ",e.data),this.wigo.forEach((t=>t.valid(3,4,e.data,"error")))}this.dispatchedEvents[e.type]||(this.dispatchedEvents[e.type]=0),this.dispatchedEvents[e.type]++,this.eventHandler.handleEvent(e),e.type===Y.A.AdError&&this.stopAd()}}clearTimeout(e){this.timeoutId[e]&&clearTimeout(this.timeoutId[e])}clearAllTimeout(){for(let e in this.timeoutId)this.timeoutId.hasOwnProperty(this.timeoutId[e])&&this.clearTimeout(this.timeoutId[e])}}Ge.logger=new l.V("vpaid.BaseVPAIDJSWrapper"),Ge.hasLogged=[];const je=Ge;var qe=i(1613),Ke=i(1286);const Qe=(e,t)=>t.reduce(((e,t)=>e+p.getBoundingClientRect(t.getElement()).height),0)+e;class Ye{constructor(e,t,i,n,s,o){this.placement=e,this.formatConfig=t,this.player=i,this.auctionId=n,this.viewerId=s,this.sumologicLogger=o,this.states={hasOpened:!1,isReady:!1,hasRequestedStartAd:!1,hasStarted:!1,hasStopped:!1,hasCompleted:!1,isReplay:!1,isPlaying:!1,isCollapsed:!1,shouldBePaused:!1},this.adWidth=0,this.adHeight=0,this.adDuration=-2,this.adRemainingTime=NaN,this.isVertical=!1,this.realVisibilityInterval=r.c$.empty(),this.wigo=r.c$.empty(),this.initAdTimingMark=r.c$.empty(),this.customTrackingsFromTtcAdded=!1,this.trackHeavyAdInterventionWarning=e=>{const{sumologicLogger:t,logger:i,auctionId:n,viewerId:s,slotType:o,placement:{key:r,wigo:a,pageId:l,pid:d,placementConfig:{headerBiddingProvider:c}},formatConfig:{portfolioItemId:h,insertionId:u,connectionId:p,adSourceId:g,dspCampaignId:m,dspCreativeId:f,scenarioId:A}}=this,{studioCreativeId:v}=(0,Ne.CR)(r);(0,_e.qO)({sumologicLogger:t,wigo:a,logger:i,placementKey:r})({headerBiddingProvider:c,pageId:l,placementId:d,slotType:o,auctionId:n,viewerId:s,insertionId:u,connectionId:p,portfolioItemId:h,adSourceId:g,creativeId:String(this.linearAd.creativeId),dspCampaignId:m,dspCreativeId:f,scenarioId:A,studioCreativeId:v,errorCause:"HeavyAdIntervention "+e})},this.logger=new l.V("format"),this.logger.debug("new",t.formatName.get()),this.linearAd=this.player?this.player.getLinearAd():null,ke.Qd(this.linearAd),this.slotType=this.placement.slotType,this.parentContainer=this.placement.getParentContainer(),this.playerContainer=this.placement.getPlayerContainer(),this.win=e.placementConfig.parentWindow.getWindow(),this.eventListenerManager=new w.C,this.volumeController=new Ee,this.viewabilityTagsHelper=new ye(this.sumologicLogger,this.formatConfig.adType,this.win,(0,r.p2)({parentContainer:this.parentContainer,playerContainer:this.playerContainer})),this.initComponents(),this.vpaidApi=this.player.getConfig().vpaidApi}setWigo(e){this.wigo=r.c$.fromNullable(e)}getWigo(){return this.wigo.getOrNull()}initComponents(){if(!this.placement.getElectedSlot())return void this.logger.debug("Could not init components because no elected slot");const e=new K(this.formatConfig.label),t=new j(this.formatConfig.credits),i=new q(this.auctionId),n={label:e,credits:t,honeyPotLink:i};if(this.shouldInstanciateSmartHeader()&&(n.smartHeader=new re),!this.placement.isSliderEnabled()){n.adChoices=new G((()=>r.c$.fromNullable(this.getVpaidAd())));const e=this.formatConfig.smartPosition.isTop()||this.formatConfig.smart6Behavior.isTop()||!this.formatConfig.label.isEnabled()?0:1;1===e&&this.playerContainer.parentNode.insertBefore(n.adChoices.getElement(),this.playerContainer),r.c$.fromNullable(this.player).forEach((t=>t.getConfig().adChoicesIconLocation=e))}this.components=new ae(n),(e=>{for(const t in e)r.c$.fromNullable(e[t]).filter((e=>!!e.getHTML())).filter((e=>!!e.getCSS())).forEach((e=>pe(e.getCSS(),(0,g.getWindow)(this.parentContainer),`teads-inline-${(0,E.rand)(5)}`)))})(n),e.getHTML()&&!this.placement.isSliderEnabled()&&this.playerContainer.parentNode.insertBefore(e.getElement(),this.playerContainer),t.getHTML()&&!this.placement.isSliderEnabled()&&this.playerContainer.parentNode.appendChild(t.getElement()),this.playerContainer.parentNode.appendChild(i.getElement()),this.placement.placementConfig.css.applyRulesOn(this.parentContainer)}getBrandingMode(){return this.brandingMode}getTemplateName(){throw new Error("getTemplateName must be implemented in child class")}getVpaidAd(){return this.vpaidAd}getVolumeController(){return this.volumeController}getFullscreenHelper(){return this.fullscreenHelper}exit(e){switch(this.vpaidAd&&this.vpaidAd.stopAd(),this.smartPositionHelper&&this.smartPositionHelper.disableBehavior(),this.eventListenerManager.removeAll(),this.scrollListener&&(0,Pe.Q)(this.scrollListener),this.vpaidApi&&this.vpaidApi.close(),this.responsive&&this.responsive.unsetResponsive(),this.parentContainer&&this.parentContainer.parentNode&&setTimeout((()=>{this.parentContainer&&this.parentContainer.parentNode&&(this.parentContainer.parentNode.removeChild(this.parentContainer),this.unsetVisibility())}),2e3),e){case 4:this.logger.info("Format successfully exited after displaying an ad");break;case 5:this.logger.info("Format successfully exited without displaying an ad");break;case 1:this.logger.error("Format exited with an ad error");break;case 2:this.logger.error("Format exited due to resize denied on opening by AMP framework");break;case 3:this.logger.error("Format exited due to an exception thrown during replay");break;default:this.logger.warn("Format exited with unknown status")}if(window.location.hostname!==C.uk){let e=Ce.VF[this.formatConfig.formatName.get()];for(let t=0,i=e.length;t<i;t++)if(e[t]===this){e.splice(t,1);break}}u.isAmp()&&(5!==e?ke.uH():this.placement.placementConfig.fallback.hasValue()||(ke.uH(),ke.yx())),u.isIABSafeFrame()&&Ve.VN()}getCurrentTime(){return this.adDuration>0&&this.adRemainingTime>=0?this.adDuration-this.adRemainingTime:0}getEnvironmentVars(){return r.c$.fromNullable(this.vpaidAd).flatMap((e=>e.getTeadsEnvironmentVars())).getOrValue({})}load(e,t){const i=e=>{this.logger.error("VPAID play:",e);const{cid:i,studioCid:n}=this.getCidAndStudioCid();this.sumologicLogger.error(`loading-mediafile cid=${i} scid=${n} ${(0,Te.S)(e)}`),t&&t(e)},n=(t,i)=>{this.vpaidAd=t,this.initAdConfig=i,e&&(this.formatConfig.callbacks.trigger("adAvailable"),e())},s=(0,v.Om)(this.formatConfig.portfolioItemId)?()=>!0:e=>this.placement.placementConfig.allowedRatio.mediafileRatioIsValid(e,Re.A.getRatio);!this.player&&e?e():this.mediafile?this.player.loadMediaFile(this.mediafile,n,i):this.player.loadOptimalMediaFile(n,i,s)}close(e){this.states.hasStopped||(this.states.hasStopped=!0,!this.states.hasOpened||y.X5(u.getIEVersion(),"9")||u.isAmp()||this.states.isCollapsed?(this.collapse(),this.exit(e)):(this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.parentContainer,(()=>this.exit(e))),this.collapse()))}collapse(){this.states.isCollapsed||(this.states.isCollapsed=!0,this.components.hideAllComponents(),this.formatConfig.animations.setCollapseDuration(this.parentContainer),this.parentContainer.style.setProperty("height","0"))}start(){this.customTrackingsFromTtcAdded||(this.customTrackingsFromTtcAdded=!0,this.addCustomTracking(window._ttc)),this.logger.debug("VPAID started",this.vpaidAd,this.initAdConfig),this.mediafile=this.player.getMediafile(),this.onVpaidReady(),this.formatConfig.friendly&&((0,g.makeIframeIABFriendly)(this.vpaidAd.getContainer()),(0,g.makeIframeIABFriendly)(this.vpaidAd.getCreativeContainer())),this.initAdTimingMark=r.c$.of(performance.now()),this.vpaidAd.initAd(this.initAdConfig.width,this.initAdConfig.height,this.initAdConfig.mode,this.initAdConfig.bitrate,this.initAdConfig.parameters)}onAdLoaded(){this.states.isReady=!0,u.isAmp()&&!ke.nT()&&(ke.bM(),ke.ho(Qe(this.vpaidAd.getAdHeight(),[this.components.getComponent("label"),this.components.getComponent("credits")])||this.fitContainerToContent(!0),(e=>{if(e)this.initInternalResponsive();else{this.close(2),(0,Pe.Q)(this.scrollListener);const e="AMP resize open request denied";this.logger.info("AdLoaded",e),this.wigo.forEach((t=>t.valid(3,4,e,"error")))}}),(()=>{let e=window._teads_amp.change;return!(e.boundingClientRect.top>=e.rootBounds.height)}))),this.volumeController.mute(),this.updateAdSize(),this.vpaidAd.render(this.vpaidAd.getVPAID())}onAdVideoStart(){this.states.hasCompleted=!1,this.states.isPlaying=!0,this.volumeController.onAdVideoStart()}onAdStarted(){const e=performance.getEntries().find((e=>/\/page\/(\d+)\/tag$/.test(e.name)));e&&this.sumologicLogger.info(`page-tag-entry-duration ${e.duration}`,1e3),this.states.hasStarted=!0,this.vpaidApi.getStudioData()?this.brandingMode.deinit():this.brandingMode.init(),this.volumeController.mute(),this.updateAdSize(),this.states.shouldBePaused&&this.requestPauseAd()}onAdPaused(){this.states.isPlaying=!1}onAdPlaying(){this.states.isPlaying=!0}onAdStopped(){this.states.isPlaying=!1,this.close(4)}onAdSkipped(){this.collapse()}onAdVideoComplete(){this.states.hasCompleted=!0}onAdError(e){const t=(0,b.Kg)(e)?e:(0,Te.$)(e),i=this.player.getLinearAd()?.id??-1,{cid:n,studioCid:s}=this.getCidAndStudioCid();this.sumologicLogger.error(`aderror aid=${i} cid=${n} scid=${s} ${t}`),this.logger.error("AdError: ",t),this.close(1)}onAdSizeChange(){this.updateAdSize()}onAdRemainingTimeChange(){this.adRemainingTime=this.vpaidAd.getAdRemainingTime()}onAdDurationChange(){this.adDuration=this.vpaidAd.getAdDuration(),this.onAdRemainingTimeChange()}onCollapseRequest(){this.formatConfig.callbacks.trigger("CollapseRequest"),this.collapse()}onSoundToggleRequest(){this.volumeController.toggleVolume()}onReplayRequest(){this.replay()}onEndscreenInit(){this.getInViewState()||(this.logger.debug("The video completed but it's not in view, pause it."),this.requestPauseAd()),this.visibility&&!this.visibility.isEnabled()&&(this.visibility.enable(),this.visibility.isVisible()||this.onHidden())}onEarlyClick(){const{sumologicLogger:e,logger:t,auctionId:i,viewerId:n,slotType:s,placement:{key:o,wigo:r,pageId:a,pid:l,placementConfig:{headerBiddingProvider:d}},formatConfig:{portfolioItemId:c,insertionId:h,connectionId:u}}=this;(0,_e.Tl)({sumologicLogger:e,wigo:r,logger:t,placementKey:o})({headerBiddingProvider:d,pageId:a,placementId:l,slotType:s,auctionId:i,viewerId:n,insertionId:h,connectionId:u,portfolioItemId:c,creativeId:String(this.linearAd.creativeId)})}onVisible(){if(this.logger.debug("Format is visible",this.playerContainer.id),!this.states.hasStopped&&this.states.hasOpened&&this.states.hasStarted){let e;e=this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?!this.getInViewState():!this.formatConfig.videoPause.isNo(),e||this.requestResumeAd(),this.logger.debug("onVisible mustPause",e)}}onHidden(){this.logger.debug("Format is hidden",this.playerContainer.id),this.states.hasStarted&&this.states.isPlaying&&(!this.formatConfig.videoPause.isNo()||this.states.hasCompleted?this.requestPauseAd():!this.formatConfig.soundMute.isNo()&&this.volumeController.getVolume()>0&&this.volumeController.mute())}onCreateWigoReport(e){try{const t=`${e}_${this.auctionId.getOrNull()}.json`;this.wigo.forEach((e=>e.saveVast(t))),xe.A.debug.track(this.placement.key)("wigo-report-collector",{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:this.placement.pageId.toString(),pid:this.placement.pid.toString(),hb_provider:this.placement.placementConfig.headerBiddingProvider.getOrValue(""),auctid:this.auctionId.getOrValue((0,A.M)(""))},trackingUrl:r.NV},r.c$.of(`${t}`))}catch(e){this.sumologicLogger.info(`wigo report collector error  ${e}`,1)}}initInternalResponsive(e=!0){this.player&&this.vpaidAd&&(this.player.getPlugin("Responsive").deinit(),this.responsive=new ge.F(this),e&&this.responsive.resizeOnStart())}onVpaidReady(){u.isAmp()||this.initInternalResponsive(),this.isVertical=this.player.getMediafile().height>Ye.VERTICAL_MARGIN*this.player.getMediafile().width,this.volumeController.init(this);const e=(0,g.findTopWindow)(this.playerContainer);this.visibility=I.listenWindow(e,(()=>this.onVisible()),(()=>this.onHidden())),this.vpaidAd.subscribe((()=>this.onAdLoaded()),Y.A.AdLoaded),this.vpaidAd.subscribe((()=>this.onAdVideoStart()),Y.A.AdVideoStart),this.vpaidAd.subscribe((()=>this.onAdStarted()),Y.A.AdStarted),this.vpaidAd.subscribe((()=>this.onAdPaused()),Y.A.AdPaused),this.vpaidAd.subscribe((()=>this.onAdPlaying()),Y.A.AdPlaying),this.vpaidAd.subscribe((()=>this.onAdSizeChange()),Y.A.AdSizeChange),this.vpaidAd.subscribe((()=>this.onAdDurationChange()),Y.A.AdDurationChange),this.vpaidAd.subscribe((()=>this.onAdRemainingTimeChange()),Y.A.AdRemainingTimeChange),this.vpaidAd.subscribe((()=>this.onAdVideoComplete()),Y.A.AdVideoComplete),this.vpaidAd.subscribe((()=>this.onAdStopped()),Y.A.AdStopped),this.vpaidAd.subscribe((()=>this.onAdSkipped()),Y.A.AdSkipped),this.vpaidAd.subscribe((e=>this.onAdError(e)),Y.A.AdError),this.wigo.forEach((e=>e.settings.forEach((({reportEvent:e,reportName:t})=>this.vpaidAd.subscribe((()=>this.onCreateWigoReport(t)),e))))),this.vpaidAd.subscribe(this.trackHeavyAdInterventionWarning,qe.A.AdWarningHeavyAdIntervention),this.vpaidAd.subscribe((t=>{const i="HeavyAdIntervention "+t;this.wigo.forEach((e=>e.valid(3,4,i,"error"))),(0,f.Bw)(e.location.href)?(this.scrollListener&&(0,Pe.Q)(this.scrollListener),this.clearRealVisibilityInterval(),this.unsetVisibility()):this.close(1)}),qe.A.AdRemovedHeavyAdIntervention);for(const e in Y.A)Y.A.hasOwnProperty(e)&&this.vpaidAd.subscribe((()=>{this.formatConfig.callbacks.trigger(e,this.volumeController,this.fullscreenHelper)}),e);this.linearAd.clickThrough&&this.linearAd.clickThrough.length&&this.vpaidAd.subscribe((()=>{this.onHidden()}),Y.A.AdClickThru),this.vpaidAd.subscribe((()=>this.onCollapseRequest()),z.A.CollapseRequest),this.vpaidAd.subscribe((()=>this.onSoundToggleRequest()),z.A.SoundToggleRequest),this.vpaidAd.subscribe((()=>this.onReplayRequest()),z.A.ReplayRequest),this.vpaidAd.subscribe((()=>this.onEndscreenInit()),z.A.EndscreenInit),this.vpaidAd.subscribe((()=>this.onEarlyClick()),z.A.EarlyClickRequest),this.formatConfig.vtpEvent.getEvent()&&this.vpaidAd.subscribe((()=>this.onVtpEvent()),this.formatConfig.vtpEvent.getEvent())}triggerOnVtpEvent(){this.formatConfig.videoPause.setToNo(),this.states.isPlaying||this.requestResumeAd()}onVtpEvent(){if(!this.formatConfig.videoPause.isNo())if(this.formatConfig.vtpEvent.getEvent()===Y.A.AdRemainingTimeChange){const e=this.vpaidAd.getAdDuration(),t=this.vpaidAd.getAdRemainingTime(),i=Math.floor(e-t);!isNaN(i)&&i>0&&i>=this.formatConfig.vtpEvent.getOffset()&&this.triggerOnVtpEvent()}else this.triggerOnVtpEvent()}updateAdSize(){this.adWidth=this.vpaidAd.getAdWidth(),this.adHeight=this.vpaidAd.getAdHeight()}replay(){this.logger.debug("replay called");const{sumologicLogger:e,logger:t,auctionId:i,viewerId:n,slotType:s,placement:{key:o,wigo:r,pageId:a,pid:l,placementConfig:{headerBiddingProvider:d}},formatConfig:{portfolioItemId:c,insertionId:h,connectionId:p}}=this;(0,_e.V$)({sumologicLogger:e,wigo:r,logger:t,placementKey:o})({headerBiddingProvider:d,pageId:a,placementId:l,slotType:s,auctionId:i,viewerId:n,insertionId:h,connectionId:p,portfolioItemId:c}),this.sumologicLogger.info(`click-replay ${u.getContextSummary()}`,1),this.volumeController.replay();try{this.player.getPlugin("Responsive").unsetResponsive(),xe.A.vast.resetTrackedEvents(this.placement.key),this.player.setLinearAd(this.linearAd),this.responsive&&this.responsive.unsetResponsive(),this.unsetVisibility(),this.states.isReady=!1,this.states.hasOpened=!0,this.states.hasRequestedStartAd=!1,this.states.hasStarted=!1,this.states.hasStopped=!1,this.states.hasCompleted=!1,this.states.isReplay=!0,this.vpaidAd=null,je.hasLogged=[],u.isDesktop()&&this.formatConfig.videoStart.isClick()&&(this.formatConfig.videoStart=new Se.A(Se.A.DEFAULT)),this.load((()=>this.start()))}catch(e){this.logger.error("Replay callback threw an exception",e),this.close(3)}}unsetVisibility(){this.visibility&&(this.visibility.destroy(),this.visibility=null)}isWindowVisible(){return u.isAmp()?!!this.visibility&&this.visibility.isVisible()&&ke.nT():!this.visibility||!this.visibility.isEnabled()||this.visibility.isVisible()}isElementVisible(){return!(!u.isAmp()&&!u.isIABSafeFrame())||(0,g.checkElementVisibility)(this.playerContainer,this.formatConfig.threshold.get()).fold((e=>{const{sumologicLogger:t,logger:i,auctionId:n,viewerId:s,slotType:o,placement:{key:r,wigo:a,pageId:l,pid:d,placementConfig:{headerBiddingProvider:c}},formatConfig:{portfolioItemId:h,insertionId:u,connectionId:p}}=this;return(0,_e.c7)({sumologicLogger:t,wigo:a,logger:i,placementKey:r})({headerBiddingProvider:c,pageId:l,placementId:d,slotType:o,auctionId:n,viewerId:s,insertionId:u,connectionId:p,portfolioItemId:h,notVisibleReason:e}),!1}),(()=>this.isWindowVisible()))}getInViewState(){return this.getViewportInViewState()&&(!this.states.hasOpened||this.getFullscreenHelper().isActive()||this.isElementVisible())}clearRealVisibilityInterval(){this.realVisibilityInterval.forEach((e=>clearTimeout(e))),this.realVisibilityInterval=r.NV}requestPauseAd(){this.states.hasStarted?this.vpaidAd.pauseAd():this.states.shouldBePaused=!0}requestResumeAd(){this.states.hasStarted?this.vpaidAd.resumeAd():this.states.shouldBePaused=!1}requestStopAd(){this.states.hasStarted?this.vpaidAd.stopAd():this.states.shouldBePaused=!0}onScroll(e){this.wigo.forEach((e=>e.followElement()))}startAd(){const e=e=>parseInt(getComputedStyle(e).height,10);this.states.hasRequestedStartAd||(this.states.hasRequestedStartAd=!0,this.vpaidAd.startAd()),setTimeout((()=>{let t=this.parentContainer;for(;null!==t&&e(t)>=this.adHeight;)t=t.parentElement;if(null!==t){const i=JSON.stringify({resizeHeight:this.adHeight,slotHeight:e(t)});xe.A.debug.track(this.placement.key)(Ke.Q4.OverlappingHeight,{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:this.placement.pageId?.toString(),pid:this.placement.pid.toString(),hb_provider:this.placement.placementConfig.headerBiddingProvider.getOrValue(""),gid:(0,Oe.rP)(this.formatConfig.insertionId),cid:this.formatConfig.dspCreativeId,auctid:this.auctionId.getOrNull()},trackingUrl:r.NV},r.c$.of(i))}}),1e3)}getCidAndStudioCid(){const e=r.c$.fromNullable(this.vpaidApi.getContextData()?.tracking);return{cid:e.map((e=>`${e.cid}`)).getOrValue(""),studioCid:e.map((e=>`${e.studio_cid}`)).getOrValue("")}}addCustomTracking(e={}){(0,d.hasOwnProperty)(e,this.placement.pageId)&&(0,a.Lx)(e[this.placement.pageId].trackings??[],Le.bN,(0,d.tap)((e=>this.logger.debug("Custom trackings from _ttc handled",e))),(e=>e.forEach(xe.A.vast.addVastCustomTrackings(this.placement.key))))}shouldInstanciateSmartHeader(){return this.formatConfig.smartPosition.isEnabled()||this.formatConfig.sliderBehavior.isEnabled()||this.formatConfig.smart6Behavior.isEnabled()}}Ye.VERTICAL_MARGIN=1.05;class Ze{constructor(e){this.format=e,this.initialized=!1,this.active=!1,this.logger=new l.V("BrandingMode")}isActive(){return this.active}isInitialized(){return this.initialized}init(){if(this.logger.debug("init called"),this.initialized)return void this.logger.warn("Branding mode helper has already been initialized");this.initialized=!0;let e=this.format.getVpaidAd();e.showComponent("fullscreenbutton");let t=()=>{this.isFullscreenSupported()&&this.stop()};e.subscribe(t,Y.A.AdClickThru,this),e.subscribe((()=>e.unsubscribe(t,Y.A.AdClickThru)),Y.A.AdStopped),e.subscribe(this.toggle,z.A.FullscreenRequest,this),e.subscribe((()=>e.unsubscribe(this.toggle,z.A.FullscreenRequest)),Y.A.AdStopped),this.format.vpaidApi.getStudioData()||e.subscribe(this.stop,z.A.AdVideoComplete,this),e.subscribe(this.stop,z.A.EndscreenInit,this),e.subscribe(this.stop,z.A.AdStopped,this),this.format.getVolumeController().addUnmuteCallback((()=>this.onUnmute())),this.format.getVolumeController().addMuteCallback((()=>this.onMute()))}deinit(){this.logger.debug("deinit called"),this.initialized=!1;let e=this.format.getVpaidAd(),t=()=>{this.isFullscreenSupported()&&this.stop()};e.subscribe(t,Y.A.AdClickThru,this),e.subscribe((()=>e.unsubscribe(t,Y.A.AdClickThru)),Y.A.AdStopped),e.unsubscribe(this.toggle,z.A.FullscreenRequest),e.unsubscribe(this.stop,z.A.AdVideoComplete),e.unsubscribe(this.stop,z.A.EndscreenInit),e.unsubscribe(this.stop,z.A.AdStopped),e.hideComponent("fullscreenbutton")}toggle(){this.initialized?this.active?this.stop():this.start():this.logger.warn("Cannot toggle branding mode helper before its initialization")}start(){this.active||(this.logger.debug("start"),this.initialVolume=this.format.getVolumeController().getVolume(),this.setVolume(this.format.formatConfig.volume.getMain()),this.isFullscreenSupported()?(this.format.getFullscreenHelper().open(),this.format.getVpaidAd().showComponent("fullscreenbutton")):this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!0)}stop(){this.active&&(this.logger.debug("stop"),this.format.getVolumeController().isMuted()&&(this.initialVolume=0),this.setVolume(this.initialVolume),this.isFullscreenSupported()?this.format.getFullscreenHelper().close():this.format.getVpaidAd().showComponent("fullscreenbutton"),this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!1)}setVolume(e){this.format.getVolumeController().setVolume(e)}isFullscreenSupported(){let e=this.format.getVpaidAd(),t=this.format.getFullscreenHelper().isActive()||e.getAdWidth()>e.getAdHeight();return!u.isDesktop()&&!u.isAmp()&&!u.isIABSafeFrame()&&t}onUnmute(){this.isFullscreenSupported()||this.start()}onMute(){this.isFullscreenSupported()||this.stop()}}var Xe=i(5536),Je=i(62);const et=(e,t,i,n)=>{t.forEach((e=>{i.properties.push(tt.getPropertyToSave(n,e))})),t.forEach((t=>{n.style.setProperty(t,e,"important")}))};class tt{static getPropertyToSave(e,t){return{name:t,value:e.style.getPropertyValue(t),priority:e.style.getPropertyPriority(t)}}constructor(e,t,i,n,s,o){if(this.formatContainer=e,this.vpaidAd=t,this.components=i,this.responsive=n,this.win=s,this.fullscreenElement=o,this.originalVpaidSize={width:0,height:0},this.fullscreenFormatStyle={width:"100%",height:"100%",top:"0",left:"0",position:"fixed","z-index":String(Je.V4),"background-color":"#000000",margin:"0","max-width":"none",padding:"0"},this.originalFormatStyle={width:"",height:"",top:"",left:"",position:"","z-index":"","background-color":"",margin:"","max-width":"",padding:""},this.active=!1,this.isVideoPaused=!1,this.wasVideoPaused=!1,this.eventListenerManager=new w.C,this.beforeOpenEventListeners=[],this.closeEventListeners=[],this.logger=new l.V("FullscreenHelper"),this.parentsPropertiesList=[],this.logger.debug("new"),this.vpaidAd.subscribe((()=>this.isVideoPaused=!0),Y.A.AdPaused),this.vpaidAd.subscribe((()=>this.isVideoPaused=!1),Y.A.AdPlaying),!u.isIos()){const e=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];this.eventListenerManager.addMultiple(e,this.win,(e=>{g.isFullscreen(this.win.document)?this.vpaidAd.resizeAd(this.win.screen.width,this.win.screen.height,"fullscreen"):(this.closeEventListeners.forEach((e=>{e()})),this.close())})),this.vpaidAd.subscribe((()=>this.eventListenerManager.removeMultiple(e)),Y.A.AdStopped)}this.responsive&&this.responsive.addOrientationChangeListener((()=>this.handleOrientationChange())),u.isIos()&&Xe.uu.tryCatch((()=>{r.c$.fromNullable(this.vpaidAd.getCreativeContainer()?.contentWindow).forEach((e=>{this.eventListenerManager.add("touchmove",e,(e=>{this.isActive()&&e.preventDefault()}))}))})).tapLeft((e=>this.logger.debug("Error when trying to access creative window to prevent touchmove on iOS",e)))}handleOrientationChange(){this.active&&(this.logger.debug("orientation change, resizeAd"),this.responsive.resize(!0))}isActive(){return this.active}addBeforeOpenEventListener(e){this.beforeOpenEventListeners.includes(e)||this.beforeOpenEventListeners.push(e)}addCloseEventListener(e){this.closeEventListeners.includes(e)||this.closeEventListeners.push(e)}open(){this.active||(this.active=!0,this.beforeOpenEventListeners.forEach((e=>{e()})),g.addClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),u.isIos()?(this.overrideParentsProperties(),this.originalVpaidSize.width=(0,p.getBoundingClientRect)(this.formatContainer).width,this.originalVpaidSize.height=this.vpaidAd.getAdHeight(),g.addClass(this.formatContainer,"no-transition"),this.applyStyleRules(),this.components.hideAllComponents()):g.openFullscreen(this.fullscreenElement),this.responsive.resize(!0),this.isVideoPaused?(this.vpaidAd.resumeAd(),this.wasVideoPaused=!0):this.wasVideoPaused=!1)}close(){this.active&&(g.removeClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),u.isIos()?(this.restoreParentsProperties(),g.removeClass(this.formatContainer,"no-transition"),this.components.showAllComponents(),this.restoreStyleRules()):u.isAndroid()?setTimeout((()=>g.closeFullscreen(this.vpaidAd.getContainer())),100):g.closeFullscreen(this.fullscreenElement),this.wasVideoPaused&&this.vpaidAd.pauseAd(),this.active=!1,this.responsive.resize(!0),this.closeEventListeners.forEach((e=>{e()})))}applyStyleRules(){for(let e in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(e)&&(this.originalFormatStyle[e]=this.formatContainer.style.getPropertyValue(e));for(let e in this.fullscreenFormatStyle)this.fullscreenFormatStyle.hasOwnProperty(e)&&this.formatContainer.style.setProperty(e,this.fullscreenFormatStyle[e])}restoreStyleRules(){for(let e in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(e)&&this.formatContainer.style.setProperty(e,this.originalFormatStyle[e])}overrideParentsProperties(){this.parentsPropertiesList=[],g.findParentElements(this.formatContainer).forEach((e=>{let t={element:e,properties:[]};const i=this.win.getComputedStyle(e);i.zIndex&&"auto"!==i.zIndex&&(t.properties.push(tt.getPropertyToSave(e,"z-index")),e.style.setProperty("z-index","auto","important")),et("none",["transform","-webkit-transform","transition","-webkit-transition"],t,e),et("auto",["will-change"],t,e),this.parentsPropertiesList.push(t)})),this.parentsPropertiesList.push({element:this.win.document.body,properties:[tt.getPropertyToSave(this.win.document.body,"overflow")]}),this.win.document.body.style.setProperty("overflow","hidden")}restoreParentsProperties(){this.parentsPropertiesList.forEach((e=>{e.properties.forEach((t=>{e.element.style.removeProperty(t.name),e.element.style.setProperty(t.name,t.value,t.priority)}))}))}}var it=i(6985);const nt=({sliderIsEnabled:e,orientationIsLandscape:t,parentContainerIsInView:i})=>!!e||t&&!i,st=(e,t)=>e>t,ot=["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],rt=["","-webkit-","-moz-","-o-","-ms-"],at=e=>{rt.forEach((t=>{e.element.style.setProperty(`${t}transition`,`${e.property} ${e.duration}s ${e.effect}`)}))},lt=e=>{rt.forEach((t=>e.style.removeProperty(`${t}transition`)))},dt=e=>{e.style.removeProperty("transform-origin"),e.style.removeProperty("transform")},ct=e=>{e.style.removeProperty("bottom"),e.style.removeProperty("right")},ht=e=>{e.style.setProperty("z-index",String(Je.V4)),e.style.setProperty("position","fixed")};class ut{constructor(e){this.format=e,this.originalPlayerZIndex=String(Je.tj),this.behaviorIsEnabled=!1,this.transitionEndListenerManager=new w.C,this.transitionInProgress=!1,this.midpointIsReached=!1,this.timeoutSlotIsReached=!1,this.remainingTimeLastSmartInSec=0,this.timerOutOfSlot=null,this.timerSmart6=null,this.smartElapsedTimeInSec=0,this.detachedSlotState=r.c$.empty(),this.currentTop=0,this.iOSRuler=r.c$.empty(),this.window=e.placement.placementConfig?.parentWindow.getWindow(),this.originalPlayerZIndex=this.format.playerContainer.style.getPropertyValue("z-index")}get isInDetachedSlot(){return this.detachedSlotState.nonEmpty()}toggleSmartPositionIfNeeded(){this.behaviorIsEnabled&&this.orientationIsLandscape===this.isOrientationLandscape()&&!this.transitionInProgress?(this.windowTopLimit=this.getWindowTopLimit(),this.detachedSlotState.match({some:e=>{switch(e){case"top":this.windowTopLimit<=this.creativeTopLimit&&this.transitionFromTopToNativeSlot();break;case"corner":this.isParentContainerInView()&&this.transitionFromCornerToNativeSlot()}},none:()=>{switch((({deviceIsDesktop:e,sliderIsEnabled:t,orientationIsLandscape:i})=>e||t||i?e||!e&&i||t?"corner":void 0:"top")({deviceIsDesktop:(0,u.isDesktop)(),sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape()})){case"corner":this.format.formatConfig.smart6Behavior.isCorner()&&(this.startSmart6Timer(),this.format.player.smartPosition.hideCloseButton()),nt({sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape(),parentContainerIsInView:this.isParentContainerInView()})&&this.transitionFromNativeSlotToCorner();break;case"top":this.updateCreativeTopLimit(),this.format.formatConfig.smart6Behavior.isTop()&&(this.startSmart6Timer(),this.format.player.smartPosition.hideCloseButton()),st(this.windowTopLimit,this.creativeTopLimit)&&this.transitionFromNativeSlotToTop()}}})):this.orientationIsLandscape=this.isOrientationLandscape()}enableBehavior(){this.nativeSlotPlaceholder=this.initNativeSlotPlaceholder(),this.format.getFullscreenHelper().addBeforeOpenEventListener((()=>this.onFullScreenOpen())),this.format.getFullscreenHelper().addCloseEventListener((()=>this.onFullScreenClose())),this.format.responsive.addOrientationChangeListener((()=>this.onOrientationChange())),this.orientationIsLandscape=this.isOrientationLandscape(),this.format.player.smartPosition.init(this.format.formatConfig.sliderBehavior.isEnabled(),this.format.formatConfig.smart6Behavior.isEnabled(),this.format.formatConfig.label.isEnabled(),(()=>{this.showCloseButtonAtMidPoint()})),this.updateCreativeTopLimit(),this.behaviorIsEnabled=!0}disableBehavior(){this.behaviorIsEnabled&&(this.behaviorIsEnabled=!1,this.detachedSlotState.forEach((e=>{switch(e){case"top":this.transitionFromTopToNativeSlot();break;case"corner":this.transitionFromCornerToNativeSlot()}})),this.format.formatConfig.sliderBehavior.isEnabled()||this.nativeSlotPlaceholder.parentNode?.removeChild(this.nativeSlotPlaceholder),(0,it.Ny)(),this.iOSRuler=r.NV)}moveToCornerPosition(){this.detachedSlotState=(0,r.p2)("corner"),this.header||this.createSmartHeader();const e=this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.formatConfig.slider.closeButtonEnabled();this.format.player.smartPosition.setCornerPositionPlayerComponents({shouldShowCloseButton:e||this.timeoutSlotIsReached||this.midpointIsReached,showHeaderCloseButton:()=>this.header.showCloseButton()}),this.updateCloseButtonTimers(),ht(this.format.playerContainer),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive((()=>this.handleDetachedSlotResize("corner"))),(0,g.addClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.CORNER),this.executeNativeSlotPlaceholderFadeAnimation("#000000","#ffffff"),this.executeOncePlayerTransitionEnded().then((()=>{this.listenIOSNativeHeaderBarMovements(),this.setPlayerCornerPosition({withMarginFromEdge:!0}),lt(this.format.playerContainer),dt(this.format.playerContainer),this.transitionInProgress=!1})),this.slideInUpCornerPosition()}getOptimalDimension(e,t){return"corner"===t?this.format.responsive.getOptimalDimensionBasedOnSurface():this.format.responsive.getOptimalDimension(e)}slideOutDownCornerPosition(){const e=p.getBoundingClientRect(this.format.playerContainer).height;this.format.playerContainer.style.setProperty("transform-origin","bottom"),this.format.playerContainer.style.setProperty("transform",`translateY(${e+ut.MARGIN_FROM_EDGES_IN_PX}px)`),at({element:this.format.playerContainer,property:"transform",duration:ut.TRANSITION_DURATION_IN_SECONDS,effect:"ease-in"})}transitionFromNativeSlotToCorner(){this.transitionInProgress=!0,this.showCompensationDiv(),this.moveToCornerPosition()}transitionFromNativeSlotToTop(){this.transitionInProgress=!0,this.showCompensationDiv(),this.updateCloseButtonTimers(),this.moveToTopPosition(),this.transitionInProgress=!1}createSmartHeader(){this.header=new re,this.header.init(this.format.getVpaidAd(),this.format.getVolumeController()),this.header.smartCloseButton.onClickAction=()=>{this.disableBehavior(),this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.getVpaidAd().skipAd()},this.format.playerContainer.insertBefore(this.header.getElement(),this.format.playerContainer.firstChild)}shouldUpdateCloseButtonTimer(){return!(this.timeoutSlotIsReached||this.midpointIsReached||this.format.player.smartPosition.isCloseButtonMode(2)||this.format.formatConfig.smart6Behavior.isEnabled())}updateCloseButtonTimers(){this.shouldUpdateCloseButtonTimer()&&(this.remainingTimeLastSmartInSec=this.format.getVpaidAd().getAdRemainingTime(),this.timerOutOfSlot=this.showCloseButtonHandler())}startSmart6Timer(){this.timerSmart6||(this.timerSmart6=this.ensureSmart6DisabledOnComplete())}moveToTopPosition(){this.detachedSlotState=(0,r.p2)("top"),(0,g.addClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.TOP),this.format.player.smartPosition.setTopPositionPlayerComponents({shouldShowCloseButton:this.timeoutSlotIsReached||this.midpointIsReached,onCloseButtonClick:()=>this.disableBehavior()}),ht(this.format.playerContainer),this.handleFloatingHeaders(),this.format.playerContainer.style.setProperty("top",`${this.currentTop}px`),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive((()=>this.handleDetachedSlotResize("top")))}slideInUpCornerPosition(){const e=p.getBoundingClientRect(this.format.playerContainer).height;this.header.show(),this.format.playerContainer.style.setProperty("bottom",`-${e}px`),this.format.playerContainer.style.setProperty("right",`${ut.MARGIN_FROM_EDGES_IN_PX}px`),this.format.playerContainer.style.setProperty("transform-origin","bottom"),this.format.playerContainer.style.setProperty("transform",`translateY(-${e+ut.MARGIN_FROM_EDGES_IN_PX}px)`),at({element:this.format.playerContainer,property:"transform",duration:ut.TRANSITION_DURATION_IN_SECONDS,effect:"ease-out"})}executeNativeSlotPlaceholderFadeAnimation(e,t){this.nativeSlotPlaceholder.style.setProperty("background-color",e),at({element:this.nativeSlotPlaceholder,property:"background-color",duration:ut.TRANSITION_DURATION_IN_SECONDS,effect:"linear"}),this.nativeSlotPlaceholder.style.setProperty("background-color",t)}updateCreativeTopLimit(){const e=this.detachedSlotState.isEmpty()?this.format.playerContainer:this.nativeSlotPlaceholder,t=window.FORCE_DEMO??!1,{top:i,bottom:n}=p.getBoundingClientRect(e,!t),s=t?(0,g.getTop)(this.window,(0,g.findFloatingHeaders)(this.format.playerContainer,[this.format.playerContainer],this.window),p.getWindowSize(this.window).height*ut.MAX_FLOATING_TOP):0,o=this.window.scrollY;this.creativeTopLimit=i===n?o:o+i-s}getWindowTopLimit(){return this.window.scrollY+this.currentTop}transitionFromCornerToNativeSlot(){this.transitionInProgress=!0,(0,g.removeClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.CORNER),this.executeNativeSlotPlaceholderFadeAnimation("#ffffff","#000000"),this.executeOncePlayerTransitionEnded().then((()=>{this.format.player.smartPosition.cleanupCornerPositionSpecificUI((()=>this.header.showCloseButton())),this.header.hide(),ct(this.format.playerContainer),this.moveToNativeSlotPosition(),lt(this.format.playerContainer),this.format.formatConfig.sliderBehavior.isEnabled()||dt(this.format.playerContainer),this.stopScrollListener(),this.transitionInProgress=!1})),this.slideOutDownCornerPosition()}transitionFromTopToNativeSlot(){(0,g.removeClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.TOP),this.transitionInProgress=!0,this.format.playerContainer.style.removeProperty("top"),this.format.player.smartPosition.cleanupTopPositionSpecificUI(),this.moveToNativeSlotPosition(),this.transitionInProgress=!1}moveToNativeSlotPosition(){this.detachedSlotState=r.NV,(this.timerOutOfSlot||this.timerSmart6)&&(this.smartElapsedTimeInSec+=this.remainingTimeLastSmartInSec-this.format.getVpaidAd().getAdRemainingTime(),this.clearTimerOutOfSlot()),this.format.playerContainer.style.setProperty("position","relative"),this.format.playerContainer.style.setProperty("z-index",this.originalPlayerZIndex),this.nativeSlotPlaceholder.style.setProperty("display","none"),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive()}isParentContainerInView(){return(0,g.getPercentageInView)({element:this.format.parentContainer,elementAncestors:(0,g.findParentElements)(this.format.parentContainer),elementClientRect:(0,p.getBoundingClientRect)(this.format.parentContainer),mainWindow:this.window,elementHeight:this.format.parentContainer.offsetHeight})>=this.format.formatConfig.threshold.percentage()}showCompensationDiv(){const e=this.format.responsive.getOptimalDimension(this.format.parentContainer).height;this.nativeSlotPlaceholder.style.setProperty("display","block"),this.nativeSlotPlaceholder.style.setProperty("height",`${e}px`)}handleFloatingHeaders(){if(this.detachedSlotState.existsIf((e=>"top"===e))){const e=(0,g.getTop)(this.window,(0,g.findFloatingHeaders)(this.format.playerContainer,[this.format.playerContainer],this.window),p.getWindowSize(this.window).height*ut.MAX_FLOATING_TOP);this.currentTop!==e&&(this.currentTop=e,this.format.playerContainer.style.setProperty("top",`${this.currentTop}px`))}}handleDetachedSlotResize(e){const{width:t,height:i}=this.getOptimalDimension(this.format.parentContainer,e);this.format.getVpaidAd().resizeAd(t,i),this.handleFloatingHeaders()}initNativeSlotPlaceholder(){const e=this.window.document.createElement("div");return e.className="teads-player teads-compensation-div",e.style.setProperty("-webkit-box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("-moz-box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("background-color","#000000"),this.format.formatConfig.sliderBehavior.isEnabled()||(this.format.playerContainer.nextSibling?this.format.playerContainer.parentNode?.insertBefore(e,this.format.playerContainer.nextSibling):this.format.playerContainer.parentNode?.appendChild(e)),e}isOrientationLandscape(){if((0,u.isDesktop)())return!0;const e=p.getWindowSize(this.window);return e.width>e.height}setPlayerCornerPosition(e){const t=e.withMarginFromEdge?ut.MARGIN_FROM_EDGES_IN_PX:0;this.format.playerContainer.style.setProperty("bottom",`${t}px`),this.format.playerContainer.style.setProperty("right",`${t}px`),this.handleIOSNativeHeaderBar(!0)}onFullScreenOpen(){this.detachedSlotState.existsIf((e=>"corner"===e))&&this.setPlayerCornerPosition({withMarginFromEdge:!1})}onFullScreenClose(){this.detachedSlotState.forEach((e=>{"corner"===e&&this.setPlayerCornerPosition({withMarginFromEdge:!0}),this.handleDetachedSlotResize(e)}))}clearTimerOutOfSlot(){this.timerOutOfSlot&&(clearInterval(this.timerOutOfSlot),this.timerOutOfSlot=null)}showCloseButtonAtMidPoint(){if(this.timeoutSlotIsReached)return;this.midpointIsReached=!0;const e=this.format.getVpaidAd().getAdRemainingTime()-1,t=()=>this.format.getVpaidAd().unsubscribe(i,Y.A.AdRemainingTimeChange),i=()=>{this.format.getVpaidAd().getAdRemainingTime()<e&&(this.showCloseButton(),t())};this.format.getVpaidAd().subscribe(i,Y.A.AdRemainingTimeChange)}showCloseButtonHandler(){return setInterval((()=>{this.midpointIsReached||(this.format.formatConfig.sliderBehavior.isEnabled()?this.format.getVpaidAd().getAdDuration()-this.format.getVpaidAd().getAdRemainingTime():this.remainingTimeLastSmartInSec+this.smartElapsedTimeInSec-this.format.getVpaidAd().getAdRemainingTime())>=ut.TIME_IN_SEC_BEFORE_CLOSE_BUTTON&&(this.showCloseButton(),this.clearTimerOutOfSlot(),this.timeoutSlotIsReached=!0)}),ut.INTERVAL_DELAY_IN_MS)}ensureSmart6DisabledOnComplete(){return setInterval((()=>{this.format.getVpaidAd().getAdDuration()-this.format.getVpaidAd().getAdRemainingTime()>ut.SMART_6_COUNTER&&this.disableBehavior(),this.behaviorIsEnabled||clearInterval(this.timerSmart6)}),ut.INTERVAL_DELAY_IN_MS)}showCloseButton(){this.detachedSlotState.forEach((e=>{"top"===e&&this.format.player.smartPosition.showCloseButton(),"corner"===e&&this.header.showCloseButton()}))}executeOncePlayerTransitionEnded(){return new Promise((e=>{this.transitionEndListenerManager.addMultiple(ot,this.format.playerContainer,(()=>{this.transitionEndListenerManager.removeAll(),e()}))}))}onOrientationChange(){this.detachedSlotState.filter((e=>!this.format.getFullscreenHelper().isActive())).match({some:e=>{const t=nt({sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape(),parentContainerIsInView:this.isParentContainerInView()});switch(e){case"top":t&&this.transitionFromTopToCorner();break;case"corner":st(this.windowTopLimit,this.creativeTopLimit)&&!t?(this.updateCreativeTopLimit(),this.transitionFromCornerToTop()):st(this.windowTopLimit,this.creativeTopLimit)||t?this.format.formatConfig.sliderBehavior.isEnabled()&&this.isOrientationLandscape()?(this.handleIOSNativeHeaderBar(),this.listenIOSNativeHeaderBarMovements()):this.format.formatConfig.sliderBehavior.isEnabled()&&!this.isOrientationLandscape()&&(this.handleIOSNativeHeaderBar(),this.stopScrollListener()):this.transitionFromCornerToNativeSlot()}},none:()=>{this.format.responsive.resize(),this.isOrientationLandscape()||this.updateCreativeTopLimit()}})}transitionFromTopToCorner(){this.format.playerContainer.style.removeProperty("top"),this.showCompensationDiv(),this.moveToCornerPosition()}transitionFromCornerToTop(){this.stopScrollListener(),this.header.hide(),ct(this.format.playerContainer),this.showCompensationDiv(),this.moveToTopPosition()}listenIOSNativeHeaderBarMovements(){if((0,u.isIos)()&&this.isOrientationLandscape()&&!this.scrollListener){const e=this.format.placement.placementConfig?.scrollSelector.getSlot();this.scrollListener=(0,Pe.Y)((()=>this.handleIOSNativeHeaderBar()),e,this.window.context),this.iOSRuler=(0,r.p2)((0,it.Zv)(window)),(0,it.Ry)(window)}}stopScrollListener(){this.scrollListener&&((0,Pe.Q)(this.scrollListener),this.scrollListener=null)}handleIOSNativeHeaderBar(e=!1){if(this.behaviorIsEnabled&&this.iOSRuler.nonEmpty()){const t=!this.isOrientationLandscape()||e&&this.getWindowTopLimit()>0?ut.MARGIN_FROM_EDGES_IN_PX:(0,it.gB)(window)+ut.MARGIN_FROM_EDGES_IN_PX;this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.parentContainer.style.setProperty("bottom",`${t}px`),this.format.playerContainer.style.setProperty("bottom",`${t}px`)}}}ut.MARGIN_FROM_EDGES_IN_PX=5,ut.TRANSITION_DURATION_IN_SECONDS=.4,ut.MAX_FLOATING_TOP=(0,u.isDesktop)()?.25:.2,ut.TIME_IN_SEC_BEFORE_CLOSE_BUTTON=5,ut.SMART_6_COUNTER=6.5,ut.INTERVAL_DELAY_IN_MS=300,ut.CUSTOMIZATION_CSS_CLASS={TOP:"smart-position-top",CORNER:"smart-position-corner"};var pt,gt=i(667);!function(e){e.AD_VERIFICATIONS="AdVerifications",e.VISIBILITY="Visibility",e.HTML="Html",e.IFRAME="Iframe",e.SCRIPT="Script",e.ALENTY="Alenty",e.TEADS_IAS="teads-IAS",e.TEADS_CONTEXT="teads-context"}(pt||(pt={}));const mt=()=>{try{const e=(0,f.I5)().map((e=>e.windowReferrerUrl)).getOrNull(),{hostname:t}=new URL(e);return ft.some((e=>t.includes(e)))}catch{return!1}},ft=["1834magazine.co.uk","afar.com","allure.com","anothermag.com","architecturaldigest.com","billboard.com","bustle.com","cntraveler.com","cntraveller.com","complex.com","cosmopolitan.com","countryandtownhouse.co.uk","countryliving.co.uk","countryliving.com","coveteur.com","creativereview.co.uk","crfashionbook.com","dazeddigital.com","digitalspy.co.uk","elitedaily.com","elle.co.uk","elle.com","elle.com","elledecor.com","elledecoration.co.uk","empireonline.com","esquire.co.uk","esquire.com","essence.com","fashionista.com","forbes.com","glamour.com","goodhousekeeping.co.uk","gq-magazine.co.uk","harpersbazaar.co.uk","harpersbazaar.com","harpersbazaar.com","hypebae.com","hypebeast.com","hypebeast.com","i-d.vice.com","inc.com","independent.co.uk","instyle.com","inverse.com","latimes.com","livingly.com","marieclaire.co.uk","menshealth.co.uk","mic.com","nylon.com","oprahdaily.com","oprahmag.com","pitchfork.com","popsugar.com","purewow.com","redbookmag.com","redonline.co.uk","refinery29.com","robbreport.com","rollingstone.com","self.com","seventeen.com","shape.com","stylecaster.com","surfacemag.com","tatler.com","teenvogue.com","thecut.com","thefashionspot.com","them.us","thezoereport.com","townandcountrymag.com","travelandleisure.com","vanityfair.com","variety.com","vibe.com","vice.com","vogue.com","vogue.co.uk","whowhatwear.com","wired.co.uk","wired.com","wmagazine.com","womenshealth.co.uk","ybw.com"];class At extends Ye{constructor(e,t,i,n,s,o,a){super(e,t,i,s,o,a),this.placement=e,this.formatConfig=t,this.player=i,this.adCallTrackOpts=n,this.hasLoggedPlayProblem=!1,this.adCallTracked=!1,this.currentAdOverlapData=null,this.shouldContinueCheckingOverlapStatus=!0,this.shouldContinueCheckingAdCollision=!0,this.checkConnatixStickyAdInViewportRange=()=>window.top.document.querySelector(".cnx-in-ad-container.cnx-float")?{reason:"connatix",isSafe:!1}:{isSafe:!0},this.checkGoogleAdsInViewportRange=()=>{const e=window.top.document.querySelectorAll("iframe");for(const t of e)if(t.id.startsWith("google_ads_iframe")&&t!==frameElement){if(window.teads.stickyBanner)return{reason:"sticky",isSafe:!1};if((0,g.isStickyElementInView)(this.windowReferenceForViewability,t))return window.teads.stickyBanner=!0,{reason:"sticky",isSafe:!1};if((0,g.isOrWillBeInViewWithTargetElement)(this.windowReferenceForViewability,this.playerContainer,t))return{reason:"gam",isSafe:!1}}return{isSafe:!0}},this.checkKargoAdInViewportRange=()=>{const e=window.top.document.querySelector(".kargo-ad-hover.is-loaded");return(0,g.isStickyElementInView)(this.windowReferenceForViewability,e)?{reason:"kargo",isSafe:!1}:{isSafe:!0}},this.checkVideojsAdInViewportRange=()=>{if("videojs"in window.top){const e=window.top.videojs.getPlayers(),t=Object.keys(e);if(t.length>0){const i=e[t[0]],n=i.el(),s=(0,g.isOrWillBeInViewWithTargetElement)(this.windowReferenceForViewability,this.playerContainer,n);if(i.usingPlugin("ads")&&i.ads.inAdBreak()&&s)return{reason:"videojs",isSafe:!1}}}return{isSafe:!0}},this.getFunnelMacros=()=>{const e=r.c$.fromNullable(this.slotType);return m.$S({slotType:e})},this.formatConfig.adType.isDisplay()&&(0,g.addClass)(this.parentContainer,"teads-display"),this.windowReferenceForViewability=this.getReferenceWindowForViewability(this.playerContainer)}load(e,t){u.isIABSafeFrame()&&!(0,v.fp)(this.formatConfig.portfolioItemId,this.placement.placementConfig.headerBiddingProvider.nonEmpty())?Ve.ZV((()=>super.load(e,t))):super.load(e,t)}getTemplateName(){return"inread"}start(){const e=this.placement.placementConfig.scrollSelector.getSlot();this.scrollListener=(0,Pe.Y)((e=>this.onScroll(e)),e,this.win.context),u.isDesktop()&&this.setRealVisibilityInterval(),this.isInView=this.getInViewState(),this.formatConfig.vast.getContent()&&this.player.getMediafile()?super.start():this.onScroll()}onAdLoaded(){if(super.onAdLoaded(),this.extensions=r.c$.fromNullable(this.player).map((e=>e.getPlugin("Extensions"))),this.extensions.forEach((e=>this.loadAdVerificationScripts(e))),this.fullscreenHelper.addCloseEventListener((()=>{this.isSmartPositioned()||this.responsive&&this.responsive.resize(!0)})),this.isVertical){let e=()=>{this.responsive.unsetResponsive(),this.parentContainer.style.setProperty("display","none"),this.isInView=!1,this.requestPauseAd()};this.responsive.addOrientationChangeListener((t=>{this.isFullscreen()||(this.responsive.isLandscape?e():(this.parentContainer.style.setProperty("display","block"),this.responsive.setResponsive(),this.onScroll(t)))})),this.fullscreenHelper.addCloseEventListener((()=>{this.responsive?.isLandscape&&e()}))}u.isDesktop()||this.vpaidAd.render(this.vpaidAd.getVPAID()),u.isIABSafeFrame()&&!this.states.hasOpened&&this.openFormat(),this.onScroll(),this.isInView=this.getInViewState()}onAdVideoStart(){super.onAdVideoStart(),this.smartPositionHelper&&this.smartPositionHelper.enableBehavior(),this.states.hasStarted&&this.states.hasOpened&&this.fitContainerToContent()}onAdSizeChange(){if(super.onAdSizeChange(),this.states.hasOpened){const e=this.fitContainerToContent();u.isAmp()&&ke.ho(e)}}onAdVideoComplete(){super.onAdVideoComplete(),this.smartPositionHelper&&this.smartPositionHelper.disableBehavior()}onVpaidReady(){super.onVpaidReady(),this.fullscreenHelper=new tt(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new Ze(this),this.shouldInstanciateSmart()&&(this.smartPositionHelper=new ut(this)),this.vpaidAd.subscribe((()=>this.pauseAdIfShouldNotBePlaying()),Y.A.AdStarted),this.vpaidAd.subscribe((()=>this.pauseAdIfShouldNotBePlaying()),Y.A.AdRemainingTimeChange),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Y.A.AdError),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Y.A.AdStopped),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Y.A.AdSkipped),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Y.A.AdVideoComplete)}close(e){super.close(e),this.clearRealVisibilityInterval()}startInView(){this.states.hasStarted&&(this.formatConfig.videoPause.isThreshold()||this.isVertical||this.states.hasCompleted)&&this.requestResumeAd(),this.volumeController.startInView()}endInView(){this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?this.requestPauseAd():this.volumeController.endInView()}fitContainerToContent(e=!1){if((this.states.hasOpened||e)&&!this.isFullscreen()){let e=p.getBoundingClientRect(this.placement.getInnerContainer()).height;return this.parentContainer.style.setProperty("height",`${e}px`),e}}manageInView(e){e!==this.isInView&&(e?this.startInView():this.endInView()),this.isInView=e}openFormat(){u.isIABSafeFrame()||(this.states.hasOpened=!0),this.formatConfig.animations.setExpandDuration(this.parentContainer);const e=this.fitContainerToContent(!0);this.logger.debug(`Format (pageId = ${this.formatConfig.pageId}, placementId = ${this.formatConfig.placementId}) has been opened`),this.responsive&&!this.isSmartPositioned()&&this.responsive.setResponsive(),u.isIABSafeFrame()&&Ve.ho(Qe(this.vpaidAd.getAdHeight(),[this.components.getComponent("label"),this.components.getComponent("credits")])||e,(e=>{this.states.hasOpened=e,this.vpaidApi.adMetadata.forEach((e=>this.responsive.updateAndResizeWithAdVideoMetadata(e)))}))}trackAdCall(e){!e||this.states.hasStopped||this.adCallTracked||(this.adCallTracked=!0,(0,_e.Dh)({placementKey:this.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placement.wigo,logger:this.logger,headerBiddingProvider:this.placement.placementConfig.headerBiddingProvider,baseUrlWithQueryParameters:this.adCallTrackOpts}),this.initAdTimingMark.forEach((e=>{const t=Math.round(performance.now()-e);(0,d.isFunction)(this.vpaidAd.getVPAID().handleAdCallTimeout)&&this.vpaidAd.getVPAID().handleAdCallTimeout(t),this.logger.info("Duration between initAd and adCall",t)})))}onScroll(e){if(super.onScroll(e),!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.toggleSmartPositionIfNeeded();const e=this.getInViewState();this.trackAdCall(e);const t=this.formatConfig.exclusiveAdOnScreen&&(0,gt.Gd)().some((e=>e.includes("chanel")));if(!this.isSmartPositioned()&&this.states.isReady){if(!this.states.hasOpened&&this.isWindowVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&e)){const{auctionId:e,placement:{key:i,pageId:n,pid:s,placementConfig:{headerBiddingProvider:o}},formatConfig:{insertionId:a}}=this;if(this.formatConfig.exclusiveAdOnScreen&&mt()&&(this.currentAdOverlapData=this.checkAdsInViewportRange(),xe.A.debug.track(i)(Ke.Q4.OtherAdsInViewportRange,{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:n.toString(),pid:s.toString(),hb_provider:o.getOrValue(""),gid:(0,Oe.rP)(a),auctid:e.getOrValue((0,A.M)(""))},trackingUrl:r.NV},!0===this.currentAdOverlapData.isSafe?r.NV:r.c$.of(this.currentAdOverlapData.reason)),!this.currentAdOverlapData.isSafe))return xe.A.debug.track(i)(Ke.Q4.AdClosed,{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:n.toString(),pid:s.toString(),hb_provider:o.getOrValue(""),gid:(0,Oe.rP)(a),auctid:e.getOrValue((0,A.M)(""))},trackingUrl:r.NV},r.NV),void this.close(5);if(t)return xe.A.debug.track(i)(Ke.Q4.ClientAdCollision,{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:n.toString(),pid:s.toString(),hb_provider:o.getOrValue(""),gid:(0,Oe.rP)(a),auctid:e.getOrValue((0,A.M)(""))},trackingUrl:r.NV},r.c$.of(gt.zF.ExcludeAfterRAS)),void this.close(5);this.openFormat()}if(this.states.hasOpened&&!this.states.hasStopped){const{auctionId:i,placement:{key:n,pageId:s,pid:o,placementConfig:{headerBiddingProvider:a}},formatConfig:{insertionId:l}}=this;if(this.states.hasStarted){if(this.manageInView(e),this.isInView&&this.shouldContinueCheckingOverlapStatus&&this.formatConfig.exclusiveAdOnScreen&&mt()){const e=this.checkAdsInViewportRange();null!==this.currentAdOverlapData&&!0===this.currentAdOverlapData.isSafe&&!1===e.isSafe&&(xe.A.debug.track(n)(Ke.Q4.OtherAdsAfterStart,{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:s.toString(),pid:o.toString(),hb_provider:a.getOrValue(""),gid:(0,Oe.rP)(l),auctid:i.getOrValue((0,A.M)(""))},trackingUrl:r.NV},r.c$.of(e.reason)),this.shouldContinueCheckingOverlapStatus=!1)}this.isInView&&this.shouldContinueCheckingAdCollision&&t&&(xe.A.debug.track(n)(Ke.Q4.ClientAdCollision,{baseUrl:c.$.trackingUrl,referer:(0,_e.IN)(),queryParameters:{env:u.getEnv(),pageId:s.toString(),pid:o.toString(),hb_provider:a.getOrValue(""),gid:(0,Oe.rP)(l),auctid:i.getOrValue((0,A.M)(""))},trackingUrl:r.NV},r.c$.of(gt.zF.EffectiveCollision)),this.shouldContinueCheckingAdCollision=!1)}else this.viewabilityTagsHelper.onScroll(),this.canStart(e)&&(this.startAd(),u.isDesktop()||this.setRealVisibilityInterval())}}}}canStart(e){return!this.formatConfig.videoStart.isThreshold()||e||this.states.isReplay}canPlay(e){return this.formatConfig.videoPause.isNo()||e}isFullscreen(){return!!this.fullscreenHelper&&this.fullscreenHelper.isActive()}isSmartPositioned(){return this.smartPositionHelper&&this.smartPositionHelper.isInDetachedSlot}getReferenceWindowForViewability(e){return this.win.FORCE_DEMO?(0,g.getWindow)(e):(0,g.findTopWindow)(e)}getViewportInViewState(){const e=this.vpaidAd?this.vpaidAd.getAdHeight():At.DEFAULT_AD_HEIGHT,t=this.win.FORCE_DEMO??!1;return!!this.isSmartPositioned()||(0,g.isInView)({element:this.playerContainer,elementAncestors:(0,g.findParentElements)(this.playerContainer),elementClientRect:p.getBoundingClientRect(this.playerContainer,!t),mainWindow:this.windowReferenceForViewability,thresholdCoefficient:this.formatConfig.threshold.get()/100,elementHeight:e})}setRealVisibilityInterval(){this.realVisibilityInterval=this.realVisibilityInterval.orElse((()=>r.c$.fromNullable(setInterval((()=>this.checkRealVisibility()),250))))}checkRealVisibility(){if(!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.toggleSmartPositionIfNeeded();const e=this.getInViewState();this.trackAdCall(e),this.states.isReady&&(this.states.hasOpened?this.states.hasOpened&&!this.states.hasStopped&&(this.states.hasStarted?(this.manageInView(e),(0,v.Q6)(this.formatConfig.portfolioItemId)&&this.fitContainerToContent()):(this.viewabilityTagsHelper.onScroll(),this.canStart(e)&&this.startAd())):this.isWindowVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&e)&&this.openFormat())}}checkAdsInViewportRange(){try{const e=[this.checkConnatixStickyAdInViewportRange,this.checkVideojsAdInViewportRange,this.checkGoogleAdsInViewportRange,this.checkKargoAdInViewportRange];for(const t of e){const e=t();if(!e.isSafe)return e}return{isSafe:!0}}catch(e){return e instanceof DOMException&&"SecurityError"===e.name?{reason:"xoerror",isSafe:!1}:{reason:"error",isSafe:!1}}}pauseAdIfShouldNotBePlaying(){if(this.states.isPlaying){const e=this.getInViewState();if(!(this.states.hasStarted?this.canPlay(e):this.canStart(e))&&(this.isInView=!1,this.requestPauseAd(),!this.hasLoggedPlayProblem)){this.hasLoggedPlayProblem=!0;const e=this.linearAd&&this.linearAd.id?this.linearAd.id:"0",t=this.linearAd&&this.linearAd.creativeId?this.linearAd.creativeId:"0";this.sumologicLogger.info(`shouldnt-be-playing ${this.placement.pid} ${t} ${e}`)}}}isVerticalLandscape(){return this.isVertical&&this.responsive&&this.responsive.isLandscape}shouldInstanciateSmart(){return!this.isVertical&&(this.formatConfig.smartPosition.isEnabled()||this.formatConfig.smart6Behavior.isEnabled())}insertViewabilityScripts(e,t){e.forEach((({vendor:e,url:i})=>{const n=document.createElement("script");n.type="text/javascript",n.src=i,n.async=!0,"IAS"===e?this.parentContainer.insertBefore(n,this.parentContainer.firstChild):"DoubleVerify"===e?t.parentElement?.appendChild(n):t.insertBefore(n,this.playerContainer.firstChild)}))}loadAdVerificationScripts(e){e.getExtension(pt.AD_VERIFICATIONS).map((t=>e.retrieveCreativePrefetchAdVerificationScriptUrls(t))).map((e=>{const t=this.getFunnelMacros();return e.map((({vendor:e,url:i})=>({vendor:e,url:m.gM(t)(i)})))})).forEach((e=>{const[t,i]=(0,h.partition)((e=>"Lumen"===e.vendor))(e),n=()=>{this.insertViewabilityScripts(i,this.playerContainer)};(0,o.vV)(this.player.getLinearAd().adParameters,this.player.getMediafile().url)?(this.viewabilityTagsHelper.onceThresholdReached(n),t.length>0&&(this.vpaidAd.subscribe((()=>{this.insertViewabilityScripts(t,this.playerContainer)}),Y.A.AdVideoStart),t.forEach((e=>{let t=!1;const i=new URL(e.url).searchParams.get("cp_auctionId");this.vpaidAd.subscribe((()=>{t||(t=!0,(e=>{let t=window;for(;void 0===t.attn&&t.parent&&t!==t.parent;)t=t.parent;t.attn&&((e,t)=>{for(const i in t){const n=t[i];n.config.customParams.auctionId===e&&n.destroy()}})(e,t.attn.trackers)})(i))}),Y.A.AdStopped)})))):n()}))}}At.DEFAULT_AD_HEIGHT=1;const vt=At;class bt extends Ye{constructor(e,t,i,n,s,o){super(e,t,i,n,s,o),this.placement=e,this.config=t,this.player=i}load(e,t){super.load(e,t)}getTemplateName(){return"inread"}onAdLoaded(){super.onAdLoaded(),this.smartPositionHelper.enableBehavior(),this.smartPositionHelper.moveToCornerPosition();const e=this.smartPositionHelper.getOptimalDimension(this.parentContainer,"corner");this.parentContainer.style.setProperty("position","fixed"),this.parentContainer.style.setProperty("overflow","visible"),this.parentContainer.style.setProperty("width",`${e.width}px`),this.parentContainer.style.setProperty("height",`${e.height}px`),this.parentContainer.style.setProperty("right",`${ut.MARGIN_FROM_EDGES_IN_PX}px`),this.parentContainer.style.setProperty("bottom",`${ut.MARGIN_FROM_EDGES_IN_PX}px`),this.startAd()}onAdVideoStart(){super.onAdVideoStart(),this.openFormat()}fitContainerToContent(e){return null}getViewportInViewState(){return!0}initInternalResponsive(){super.initInternalResponsive(!1)}onVpaidReady(){super.onVpaidReady(),this.fullscreenHelper=new tt(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new Ze(this),this.formatConfig.smartPosition.setValue({corner:!0,top:!1,mustBypassWhitelist:!1}),this.smartPositionHelper=new ut(this)}openFormat(){this.states.hasOpened=!0,this.placement.placementConfig.css.applyRulesOn(this.parentContainer)}}const wt=e=>70===e;function yt(e,t,i=null,n){const s=n&&n.display||e.adType.isDisplay()||e.adType.isNative(),o=function(e,t,i){let n={disable:!e.closeButton.isEnabled(),countdown:e.closeButton.getCountdown(),listenSkippableState:!1};return(e.closeButton.hasToGetValueFromVast()||n.disable&&e.smartPosition.isTop())&&(n.disable=!1,t&&t.skipDelay?n.countdown=t.skipDelay:n.listenSkippableState=!0),i.isSliderEnabled()&&(n.disable=!0,n.listenSkippableState=!1),n}(e,i,t),r=function(e,t){let i={disable:e.disable,listenSkippableState:e.listenSkippableState};return t.isSliderEnabled()&&(i.disable=!0,i.listenSkippableState=!1),i}(o,t);return{clicktoplay:{disable:!e.videoStart.isClick()},closebutton:{disable:o.disable,countdown:o.countdown,listenSkippableState:o.listenSkippableState},soundbutton:{disable:!!(s||e.sliderBehavior.isEnabled()||t.isSliderEnabled())||!e.soundButton.isEnabled,startOffset:e.soundButton.countdown,type:e.soundButton.type},progressbar:{disable:s||wt(e.portfolioItemId)||!e.progressBar.isEnabled()},clickbutton:{disable:!!n||wt(e.portfolioItemId)||!e.callButton.isEnabled(),startOffset:e.callButton.getCountdown(),text:e.callButton.getText()},label:{disable:!0,html:e.label.getHTML()},credits:{formatName:e.formatName.get(),disable:!0,text:e.credits.getText(),url:e.credits.getLink()},endscreen:{disable:!!(s||e.sliderBehavior.isEnabled()||t.isSliderEnabled())||e.end.isCollapse()||e.end.isEndScreen()&&!e.endScreen.isEnabled(),countdown:e.endScreen.getCountdown(),callButton:e.endScreen.getCallButton(),closeButton:{disable:r.disable,listenSkippableState:r.listenSkippableState},replayButton:e.endScreen.getReplayButton(),autoClose:e.endScreen.getAutoClose()},fullscreenbutton:{disable:s||!e.playerClick.isFullscreen(),preventDefault:!0},brandlogo:{disable:!e.brandLogo.isEnabled(),url:e.brandLogo.getUrl()},startscreen:{disable:!e.adType.isVideo()},earlyclickoverlay:{displayTime:e.earlyClickProtectionDuration??0},bannervideobottom:{disable:!(e.adType.isVideo()&&wt(e.portfolioItemId)),text:e.bannerVideoBottom.getText()},hourglass:{disable:!e.smart6Behavior.isEnabled()}}}var Et=i(5300);const It="teads-studio";function Ct(e){let t;return e&&e.extensions&&e.extensions.length>0&&e.extensions.forEach((e=>{e.type===It&&(t=St(e.content))})),t}function St(e){try{return JSON.parse(e)}catch(e){new l.V("TeadsStudioExtension").error(It+" extension throw an exception",e)}}const kt=e=>e;function Tt({instancesStore:e,placement:t,formatConfig:i,vastPlayer:n,sumologicLogger:s,adCallTrackOpts:o,auctionId:r,viewerId:a}){i.sliderBehavior.isEnabled()?t.enableSlider():t.isSliderEnabled()&&i.sliderBehavior.setValue({enable:!0});const l=i.sliderBehavior.isEnabled()?new bt(t,i,n,r,a,s):new vt(t,i,n,o,r,a,s);return function(e,t,i){const n=i.formatConfig.formatName.get();e[n]||(e[n]=[]),e[n].push(i),i.setWigo(t)}(e,t.wigo,l),Et.J(),l}let Vt=!1;function Pt({coords:{accuracy:e,latitude:t,longitude:i}}){return{accuracy:e,latitude:t,longitude:i}}class Lt{constructor(e,t){this.api=e,this.playerWindow=t,this.eventListenerManager=new w.C}startListening(){this.eventListenerManager.add("message",this.playerWindow,(e=>{if((0,b.Gv)(e.data)){const t=e.data;if(!t.method)return;if(t.method===Lt.INIT_MESSAGE)this.pairedAdWindow=e.source,this.sendMessage({method:Lt.INIT_MESSAGE});else try{if((0,d.isFunction)(this.api[t.method]))if("getUserLocation"===t.method)this.handleGetUserLocationRequest(t);else{const e=this.api[t.method](...t.methodArgs);this.sendMessage({method:t.method,methodReturn:e})}else this.sendMessage({method:t.method,error:`Method ${t.method} does not exist on api`})}catch(e){this.sendMessage({method:t.method,error:e.toString()})}}}))}stopListening(){this.eventListenerManager.remove("message")}sendMessage(e){this.pairedAdWindow&&this.pairedAdWindow.postMessage(e,"*")}handleGetUserLocationRequest(e){this.api[e.method]((t=>{this.sendMessage({method:e.method,methodReturn:Pt(t)})}),(t=>{this.sendMessage({method:e.method,methodReturn:t.message||t.toString()})}))}}function xt(){return u.isDesktop()}Lt.INIT_MESSAGE="studio-ad--format-RPC",Lt.SENSOR_UPDATE="-studio-ad--sensors-update";class _t{constructor(){this.resize=d.noop,this.logger=new l.V("FixedBackground"),this.initialized=!1,this.loaded=!1,this.loadListeners=[],this.resizeContainer=e=>{e&&"orientationchange"===e.type&&(this.center=null);const t=p.getBoundingClientRect(this.container,!1),i=p.getWindowSize(this.win),n=Math.round(t.width),s=this.image.height*n/this.image.width;if(this.baseContainer.style.setProperty("width",`${n}px`),this.baseContainer.style.setProperty("height",`${Math.round(t.height)}px`),xt())this.center=this.center||(i.height-s)/2,this.baseContainer.style.setProperty("background-size",`${Math.round(n)}px ${Math.round(s)}px`),this.baseContainer.style.setProperty("background-position",`${Math.round(t.left)}px ${this.center}px`);else{this.fixedContainer.style.setProperty("width",`${Math.round(n)}px`),this.fixedContainer.style.setProperty("height",`${Math.round(1.2*(i.height+s))}px`),this.fixedContainer.style.setProperty("background-size",`${Math.round(n)}px ${Math.round(s)}px`),this.fixedContainer.style.setProperty("left",`${Math.round(t.left)}px`),this.center=this.center||(i.height-s)/2%s;const e=this.center>0?this.center-s:this.center;this.fixedContainer.style.setProperty("top",`${e}px`)}},this.resizeVideoContainer=e=>{const t=p.getBoundingClientRect(this.container,!1),i=Math.round(t.width),n=Math.round(this.video.videoHeight*i/this.video.videoWidth);this.baseContainer.style.setProperty("width",`${i}px`),this.baseContainer.style.setProperty("height",`${Math.round(t.height)}px`),this.video.style.setProperty("width",`${i}px`),this.video.width=i,this.video.style.setProperty("height",`${n}px`),this.video.height=n,this.video.style.setProperty("left",`${Math.round(t.left)}px`)}}init(e,t){this.initialized||(this.initialized=!0,this.container=e,this.win=g.getWindow(this.container),g.addClass(t,"teads-display-format"),this.eventListenerManager=new w.C,this.eventListenerManager.addMultiple(["resize","orientationchange"],this.win,(()=>this.resize())),this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.container,(()=>this.resize())))}loadImage(e,t){new Promise((t=>{this.image=new Image,this.image.onerror=e=>t([!1,r.c$.empty()]),this.image.onload=e=>{this.image.naturalWidth&&this.image.naturalHeight?t([!0,r.c$.fromNullable(this.image)]):(this.logger.error("setFixedBackgroundImage: Asset size error: cannot retrieve image dimensions"),t([!1,r.c$.fromNullable(this.image)]))},this.image.src=e})).then((([e,i])=>{t(e,i),e&&this.triggerLoadListeners()}))}loadVideo(e,t,i){this.video&&this.destroy(),this.video=t.videoSlot,new Promise((t=>{this.video.addEventListener("error",(()=>{t([!1,r.c$.empty()])})),this.video.addEventListener("loadedmetadata",(()=>{this.video.videoWidth&&this.video.videoHeight?t([!0,r.c$.fromNullable(this.video)]):(this.logger.error("setFixedBackgroundVideo: Asset size error: cannot retrieve video dimensions"),t([!1,r.c$.fromNullable(this.video)]))})),this.video.src===e?(this.video.currentTime=0,t([!0,r.c$.fromNullable(this.video)])):(this.video.setAttribute("preload","auto"),this.video.src=e)})).then((([e,t])=>{i(e,t),e&&this.triggerLoadListeners()}))}initContainer(){this.resize=this.resizeContainer,pe(_t.CSS,this.win,_t.STYLE_NODE_ID),this.baseContainer=this.baseContainer??this.win.document.createElement("div"),this.baseContainer.className=_t.CSSCLASSES.absolute,xt()?this.baseContainer.style.setProperty("background-image",`url(${this.image.src})`):(this.fixedContainer=this.fixedContainer??this.win.document.createElement("div"),this.fixedContainer.style.setProperty("background-image",`url(${this.image.src})`),this.fixedContainer.className=_t.CSSCLASSES.fixed,this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important"),this.baseContainer.appendChild(this.fixedContainer)),this.resize()}initVideoContainer(e){this.resize=this.resizeVideoContainer,pe(_t.CSS,this.win,_t.STYLE_NODE_ID),this.baseContainer=this.baseContainer??this.win.document.createElement("div"),this.baseContainer.className=_t.CSSCLASSES.absolute,this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important"),(this.baseContainer.style.getPropertyValue("-webkit-clip-path")||this.baseContainer.style.getPropertyValue("clip-path"))&&g.addClass(this.video,_t.CSSCLASSES.videoScroller),e.subscribe((()=>this.video.play()),Y.A.AdPlaying),e.subscribe((()=>this.video.pause()),Y.A.AdPaused),this.eventListenerManager.add("scroll",this.win,(()=>{const t=this.isInView(this.container,e)?1:0;this.video.style.setProperty("opacity",`${t}`,"important")})),this.baseContainer.appendChild(this.video),this.resize()}append(){this.container.style.setProperty("position","relative"),this.container.style.setProperty("z-index","100"),this.container.parentNode.insertBefore(this.baseContainer,this.container)}destroy(){this.baseContainer.parentNode.removeChild(this.baseContainer),this.eventListenerManager.removeAll()}getBaseContainer(){return this.baseContainer}getFixedContainer(){return this.fixedContainer}getImage(){return this.image}getVideo(){return this.video}isInView(e,t){return g.isInView({element:e,elementAncestors:g.findParentElements(e),elementClientRect:p.getBoundingClientRect(e),mainWindow:this.win,thresholdCoefficient:.001,elementHeight:t.getAdHeight()})}get isLoaded(){return this.loaded}onLoad(e){this.loaded?e():this.loadListeners.push(e)}triggerLoadListeners(){this.loaded=!0;for(const e of this.loadListeners)e()}}function Nt(e){let t;return e&&e.extensions&&e.extensions.length>0&&e.extensions.forEach((e=>{e.type===pt.TEADS_CONTEXT&&(t=function(e){try{return JSON.parse(e)}catch(e){new l.V("ITeadsContextExtension").error(pt.TEADS_CONTEXT+" extension throw an exception",e)}}(e.content))})),t}_t.CSS=F(),_t.CSSCLASSES={absolute:"teads-display-absolute",fixed:"teads-display-fixed",clickZone:"teads-display-clickzone",videoScroller:"teads-video-scroller"},_t.STYLE_NODE_ID="teads-inread-display";var Rt,Ot,Dt,Mt=i(3988),Bt=i(8275),Ft=i(8681);!function(e){e[e.InreadCarouselLandscape=15]="InreadCarouselLandscape",e[e.InreadCarouselSquare=16]="InreadCarouselSquare",e[e.SingleImagePerformanceLandscape=43]="SingleImagePerformanceLandscape",e[e.SingleImagePerformanceSquare=56]="SingleImagePerformanceSquare",e[e.SingleImagePerformanceVertical=57]="SingleImagePerformanceVertical",e[e.CarouselPerformanceLandscape=58]="CarouselPerformanceLandscape",e[e.CarouselPerformanceSquare=59]="CarouselPerformanceSquare",e[e.CarouselPerformanceVertical=60]="CarouselPerformanceVertical",e[e.SingleVideoPerformanceLandscape=65]="SingleVideoPerformanceLandscape",e[e.SingleVideoPerformanceSquare=66]="SingleVideoPerformanceSquare",e[e.SingleVideoPerformanceVertical=67]="SingleVideoPerformanceVertical",e[e.SingleImagePerformanceBanner=68]="SingleImagePerformanceBanner",e[e.CarouselPerformanceBanner=71]="CarouselPerformanceBanner",e[e.SingleVideoPerformanceBanner=72]="SingleVideoPerformanceBanner"}(Rt||(Rt={})),function(e){e[e.InreadSocialVideoLandscape=44]="InreadSocialVideoLandscape",e[e.InreadSocialVideoSquare=45]="InreadSocialVideoSquare",e[e.InreadSocialVideoVertical=46]="InreadSocialVideoVertical",e[e.InreadSocialImageLandscape=47]="InreadSocialImageLandscape",e[e.InreadSocialImageSquare=48]="InreadSocialImageSquare",e[e.InreadSocialImageVertical=49]="InreadSocialImageVertical",e[e.InreadSocialVideo=50]="InreadSocialVideo",e[e.InreadSocialImage=51]="InreadSocialImage"}(Ot||(Ot={})),function(e){e[e.BannerVideo=70]="BannerVideo"}(Dt||(Dt={}));class Ut{constructor(e,t,i){this.placement=e,this.format=t,this.gdprIab=i,this.adMetadata=r.NV,this.logger=new l.V("VPAIDApi"),this.fixedBackgroundImage=new _t,this.fixedBackgroundVideo=new _t,this.allowedSafeFrameHeight=null;const n=this.placement.getPlayerContainer(),s=g.getWindow(n);this.communicationBridge=new Lt(this,s),this.communicationBridge.startListening()}close(){this.communicationBridge&&this.communicationBridge.stopListening()}setStudioData(e){const t=this.format.getVpaidAd();this.studioData=e,t.status>=Ue.A.STARTED?this.applyStudioDataOnUI():t.subscribe((0,P.o)(this.applyStudioDataOnUI,this),Y.A.AdStarted)}applyStudioDataOnUI(){if(this.studioData)try{xe.A.vast.setStudioCreativeId(this.format.placement.key)(this.studioData.studio_cid);const e=this.format.getVpaidAd(),t=e.getComponent("soundbutton");t&&t.setShowOnVideoStart(!this.studioData.display);const i=e.getComponent("progressbar");i&&(i.setShowOnVideoProgress(!this.studioData.display),i.setShowOnVideoStart(!this.studioData.display)),this.setSoundControlVisibility(!this.studioData.display),this.setProgressControlVisibility(!this.studioData.display)}catch(e){this.logger.error(`setStudioData error ${e.message}`)}else this.logger.error("applyStudioDataOnUI error","studioData needed to apply them on UI")}getSumologicOption(){return{enabled:c.$.isSumologicLogsEnabled,pid:this.placement.pid,formatVersion:"1401"}}isStudioDisplay(){return this.studioData&&this.studioData.display}getStudioData(){try{this.studioData=this.studioData||Ct(this.format.linearAd)}catch(e){this.logger.error("getStudioData error","format has not been instantiated yet",e)}return this.studioData}getContextData(){return e=this.format.linearAd,t=this.gdprIab,{...Nt(e),gdpr:{applies:(0,Mt.B)(t.status),consent:t.consent}};var e,t}isReplay(){return this.format.states.isReplay}activateTapMode(e=!0){}performTapMode(e){let t=this.format.getBrandingMode();t&&(void 0===e&&(e=!t.isActive()),e?t.isInitialized()?t.isActive()||t.start():(t.init(),t.start()):t.isActive()?(t.stop(),t.deinit()):t.isInitialized()&&t.deinit())}isFullscreen(){return this.format.getFullscreenHelper().isActive()}requestFullscreen(){try{this.format.getVpaidAd().dispatchCustomEvent("FullscreenRequest")}catch(e){this.logger.error(`requestFullscreen error ${e.message}`)}}setSoundControlVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("soundbutton"):t.hideComponent("soundbutton")}catch(e){this.logger.error(`setSoundControlVisibility error ${e.message}`)}}setFullscreenButtonVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("fullscreenbutton"):t.hideComponent("fullscreenbutton")}catch(e){this.logger.error(`setFullscreenButtonVisibility error ${e.message}`)}}setProgressControlVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("progressbar"):t.hideComponent("progressbar")}catch(e){this.logger.error(`setProgressControlVisibility error ${e.message}`)}}setStartScreenVisibility(e){var t;try{const i=this.format.getVpaidAd(),n="startscreen";if(i.isRendered)e?i.showComponent(n):i.hideComponent(n);else{const s=i.getConfig();(t=s.components)[n]??(t[n]={}),s.components[n].disable=!e}}catch(e){this.logger.error(`setStartScreenVisibility error ${e.message}`)}}isVideoBanner(){return this.format.formatConfig.portfolioItemId in Dt}getCreativeSize(){return this.format.formatConfig.creativeSize}getSlotBounds(){const e=!window.FORCE_DEMO;return Xe.uu.tryCatch((()=>{const t=this.placement.getPlayerContainer(),i=g.getWindow(t),n=p.getBoundingClientRect(t,e);if((0,d.isNull)(this.allowedSafeFrameHeight)&&((0,u.isIABSafeFrame)()||(0,u.isAmpSF)())&&Ve.N4){const e=r.c$.fromNullable(this.format.components.getComponent("label")?.getElement()).map((e=>p.getBoundingClientRect(e).height)).getOrValue(0);this.allowedSafeFrameHeight=Ve.N4.self.h+Ve.N4.exp.b-e}const s=this.format.responsive?.getContainerWidth()??n.width,o=this.allowedSafeFrameHeight?Ve.N4.win.h:Math.max(n.height,i.innerHeight);return{...n,viewportHeight:i.innerHeight,viewportWidth:i.innerWidth,maxWidth:s,maxHeight:o}})).orElse((e=>(this.logger.error(`getSlotBounds error ${e.message}`),(0,Xe.HR)(e)))).toOption().getOrNull()}sendAdClickThru(e){Xe.uu.tryCatch((()=>{this.format.getVpaidAd().dispatchCustomEvent(Y.A.AdClickThru,e)})).tapLeft((e=>this.logger.error(`sendAdClickThru error ${e.message}`)))}sendVideoMetadata(e){var t;((t=this.format.formatConfig.portfolioItemId)in Rt||t in Ot)&&(this.adMetadata=r.c$.fromNullable(e)),Xe.uu.tryCatch((()=>{this.format.getVpaidAd().dispatchCustomEvent(qe.A.AdVideoMetadata,e)})).tapLeft((e=>this.logger.error(`sendVideoMetadata error ${e.message}`)))}hideCredits(){Xe.uu.tryCatch((()=>r.c$.fromNullable(this.format.components.getComponent("credits")?.getElement()).forEach((e=>{e.style.display="none"})))).tapLeft((e=>this.logger.error("Something went wrong when trying to hide the credits",e)))}sendReplayRequest(){Xe.uu.tryCatch((()=>{this.format.getVpaidAd().dispatchCustomEvent(z.A.ReplayRequest)})).tapLeft((e=>this.logger.error(`sendReplayRequest error ${e.message}`)))}setFixedBackgroundImage(e,t=d.noop){this.fixedBackgroundImage.init(this.placement.getPlayerContainer(),this.placement.getParentContainer());const i=this.format.getVpaidAd();this.setBackgroundColor("transparent"),this.hideVideoContainer(),u.isUIWebview()||i.subscribe((()=>this.fixedBackgroundImage.resize()),Y.A.AdSizeChange),i.subscribe((()=>this.fixedBackgroundImage.resize()),Y.A.AdStarted),i.subscribe((()=>this.fixedBackgroundImage.destroy()),Y.A.AdStopped),i.subscribe((()=>this.fixedBackgroundImage.destroy()),Y.A.AdError),this.fixedBackgroundImage.loadImage(e,(()=>{this.fixedBackgroundImage.initContainer(),this.logger.debug("background image ready !"),i.status>=Ue.A.LOADED?(this.fixedBackgroundImage.append(),this.checkTouchOverflow(this.fixedBackgroundImage)):i.subscribe((()=>{this.fixedBackgroundImage.append(),this.checkTouchOverflow(this.fixedBackgroundImage)}),Y.A.AdLoaded),t()}))}setFixedBackgroundVideo(e,t=d.noop){this.fixedBackgroundVideo.init(this.placement.getPlayerContainer(),this.placement.getParentContainer());const i=this.format.getVpaidAd();this.setBackgroundColor("transparent"),this.hideVideoContainer(),u.isUIWebview()||i.subscribe((()=>this.fixedBackgroundVideo.resize()),Y.A.AdSizeChange),i.subscribe((()=>this.fixedBackgroundVideo.resize()),Y.A.AdStarted),i.subscribe((()=>this.fixedBackgroundVideo.destroy()),Y.A.AdStopped),i.subscribe((()=>this.fixedBackgroundVideo.destroy()),Y.A.AdError),this.fixedBackgroundVideo.loadVideo(e,this.format.getEnvironmentVars(),(e=>{e&&(this.fixedBackgroundVideo.initVideoContainer(i),this.logger.debug("background video ready !"),i.status>=Ue.A.LOADED?(this.fixedBackgroundVideo.append(),this.checkTouchOverflow(this.fixedBackgroundVideo)):i.subscribe((()=>{this.fixedBackgroundVideo.append(),this.checkTouchOverflow(this.fixedBackgroundVideo)}),Y.A.AdLoaded)),t()}))}hideVideoContainer(){var e;(e=this.format.getVpaidAd().getCreativeContainer(),((0,u.isAmp)()||(0,u.isIABSafeFrame)())&&"IFRAME"!==e.tagName?e.ownerDocument:e.contentDocument).getElementById("video-container").style.setProperty("display","none")}setBackgroundColor(e){try{this.format.getVpaidAd().getVPAIDContainer().style.setProperty("background-color",e)}catch(e){this.logger.error(`setBackgroundColor error ${e.message}`)}}addDeviceOrientationListener(){var e,t;e=this.communicationBridge,(t=g.getWindow(this.placement.getPlayerContainer()))&&t.DeviceOrientationEvent&&!Vt&&(Vt=!0,p.addEventListener("deviceorientation",t,(t=>{e.sendMessage({method:Lt.SENSOR_UPDATE,methodReturn:{alpha:t.alpha,beta:t.beta,gamma:t.gamma,absolute:t.absolute}})})))}getUserLocation(e,t){!function(e,t,i){Xe.uu.tryCatch((()=>{e.navigator.geolocation.getCurrentPosition(t,i)})).orElse((e=>(i({code:1,message:e.message,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3}),(0,Xe.HR)(e))))}(g.getWindow(this.placement.getPlayerContainer()),e,t)}customizeUI(e){const t="vpaid-ui-custom-css";r.c$.fromNullable(this.placement).match({some:i=>r.c$.fromNullable(this.format).match({some:i=>r.c$.fromNullable(i.getVpaidAd()).match({some:i=>{const n=g.getWindow(i.getMainComponentsContainer());!function(e,t){r.c$.fromNullable(t?.document).flatMap((t=>r.c$.fromNullable(t.getElementById(e)))).forEach((e=>r.c$.fromNullable(e.parentNode).forEach((t=>t.removeChild(e)))))}(t,n),pe(e,n,t)},none:()=>this.logger.error("customizeUI: getVpaidAd() returned undefined or null")}),none:()=>this.logger.error("customizeUI: getFormat() returned undefined or null")}),none:()=>this.logger.error("customizeUI: this.placement is undefined or null")})}getTeadsInfo(){return{placementId:this.format.formatConfig.placementId,connectionId:this.format.formatConfig.connectionId,insertionId:this.format.formatConfig.insertionId,creativeId:parseInt(this.format.linearAd.creativeId,10),clickPixels:this.format.linearAd.tracking.click.map((e=>e.url)),slotType:this.format.slotType,environment:u.getEnv()}}triggerViewabilityTag(e){try{this.format.viewabilityTagsHelper.onceThresholdReached(e)}catch(e){this.logger.error(`triggerViewabilityTag error ${e.message}`)}}isMobile(){return u.isMobile()||u.isTablet()}getCreativeTag(e){try{return this.format.viewabilityTagsHelper.getCreativeTag(e,r.c$.fromNullable(this.format?.formatConfig?.portfolioItemId))}catch(t){return this.logger.error(`"Unable to get creative tag: "${t}"`),e}}requestInterscroller(){(0,Ft.Ym)()&&(this.interscroller||(this.logger.info("[Interscroller] Enable behavior"),this.interscroller=new Bt.A(this.format),this.interscroller.enableBehavior(),this.setStartScreenVisibility(!1)))}checkTouchOverflow(e){const t=(e,i)=>e===i||!(!i||!i.parentElement)&&t(e,i.parentElement);try{const i=this.placement.getParentContainer(),n=e.getBaseContainer();((e,i)=>{const n=p.getBoundingClientRect(e),s=g.getDocument(e)?.elementFromPoint(n.left+n.width/2,n.top+-10);return s===e||t(e,s)})(i)&&n.style.setProperty("z-index","-1")}catch(e){}}}Ut.STUDIO_CID_MACRO_METADATA="[STUDIO_CID]";var $t=i(7434);class Wt{constructor(e){this.ui=e}init(e,t,i,n){this.closeButton=r.c$.fromNullable(this.ui.getComponent("closebutton")),this.closeButtonMode=this.closeButton.map((e=>e.mode)).getOrNull(),this.soundButton=r.c$.fromNullable(this.ui.getComponent("soundbutton")),this.clickButton=r.c$.fromNullable(this.ui.getComponent("clickbutton")),this.adChoicesButton=r.c$.fromNullable(this.ui.getComponent("adchoices")),this.hourglass=r.c$.fromNullable(this.ui.getComponent("hourglass")),this.labelIsEnabled=i,(0,u.isDesktop)()&&this.hourglass.forEach((e=>e.center(this.labelIsEnabled))),!this.closeButton||2===this.closeButtonMode||e||t||this.ui.subscribe(n,Y.A.AdVideoMidpoint)}setCornerPositionPlayerComponents(e){this.clickButton.forEach((e=>{e.hide(),e.getConfig().disable=!0})),this.soundButton.forEach((e=>e.hide())),this.closeButton.forEach((e=>e.hide())),this.adChoicesButton.forEach((e=>e.hide())),this.hourglass.forEach((e=>e.center(this.labelIsEnabled))),2===this.closeButtonMode&&this.closeButton.forEach((t=>t.changeOnCountdownEnded((()=>{t.show(),e.showHeaderCloseButton()})))),e.shouldShowCloseButton&&e.showHeaderCloseButton()}setTopPositionPlayerComponents(e){this.clickButton.forEach((e=>{e.hide(),e.getConfig().disable=!0})),this.closeButton.forEach((t=>t.onClickAction=(0,r.p2)(e.onCloseButtonClick))),this.adChoicesButton.forEach((e=>e.show())),1===this.closeButtonMode&&e.shouldShowCloseButton&&this.closeButton.forEach((e=>e.show()))}cleanupCornerPositionSpecificUI(e){this.clickButton.forEach((e=>{e.show(),e.getConfig().disable=!1})),this.adChoicesButton.forEach((e=>e.show())),this.soundButton.forEach((e=>e.show())),1!==this.closeButtonMode&&this.closeButton.forEach((e=>e.show())),this.hourglass.forEach((e=>e.center(this.labelIsEnabled))),2===this.closeButtonMode&&this.closeButton.forEach((t=>t.changeOnCountdownEnded((()=>{t.show(),e()}))))}cleanupTopPositionSpecificUI(){this.clickButton.forEach((e=>{e.show(),e.getConfig().disable=!1})),this.closeButton.forEach((e=>e.restoreOnClickAction())),1===this.closeButtonMode&&this.closeButton.forEach((e=>e.hide()))}isCloseButtonMode(e){return e===this.closeButtonMode}showCloseButton(){this.closeButton.forEach((e=>e.show()))}hideCloseButton(){this.closeButton.forEach((e=>e.hide()))}showHourglass(){this.hourglass.forEach((e=>e.show()))}}const Ht={id:400,message:"VPAIDJS getVPAIDAd throw an exception"},zt={id:500,message:"Unable to load VPAID ad, file doesn't exists"},Gt={id:501,message:"Unable to load VPAID ad, timeout error"},jt="video";var qt;!function(e){e[e.UNLOADED=-1]="UNLOADED",e[e.READY=0]="READY",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(qt||(qt={}));const Kt=qt;var Qt=i(8705),Yt=i.n(Qt),Zt=i(6591),Xt=i(7148);const Jt=e=>Math.round(e/Zt.Y);class ei{constructor(e,t){this.container=e,this.config=t,this.logger=new l.V("vpaid.BaseVPAIDContainer"),this.backgroundColor="#000000",this.id=t.id||(0,E.rand)(20,!1)}getVPAID(){return this.logger.info("getVPAIDAd - Retrieve ad from creative"),this.vpaid}getCreativeContainer(){return this.creativeContainer}setUpMainContainers(e){this.mainContainer=document.createElement("div"),this.mainContainer.style.setProperty("position","relative"),this.container.appendChild(this.mainContainer),this.creativeContainer=e,this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer)}setUpCreativeContainers(e){this.setupTeadsApi();const{vpaidContainer:t,videoContainer:i}=this.appendContainers(e);this.vpaidContainer=t,this.videoContainer=i}appendContainers(e){const t=document.createElement("div");t.setAttribute("id","video-container"),t.setAttribute("style",`position:absolute;top:0px;left:0px;z-index:1;background-color:${this.backgroundColor}`),e.appendChild(t);const i=document.createElement("div");return i.setAttribute("id","vpaidjs-container"),i.setAttribute("style","position:absolute;top:0px;left:0px;z-index:2"),e.appendChild(i),{videoContainer:t,vpaidContainer:i}}getEnvironmentVars(e={}){return this.environmentVars??{slot:this.vpaidContainer,videoSlot:this.initVideo(),videoSlotCanAutoPlay:!0,...e}}destroy(){try{!this.isDetroyed&&this.creativeContainer?(this.isDetroyed=!0,r.c$.fromNullable(this.creativeContainer.parentNode).forEach((e=>e.removeChild(this.creativeContainer))),this.creativeContainer=null,this.vpaid=null):this.isDetroyed&&this.logger.error("Cannot call destroy twice !")}catch(e){this.logger.error("unable to remove VPAID creative container: "+e)}this.mainContainer&&this.mainContainer.parentNode&&(this.mainContainer.parentNode.removeChild(this.mainContainer),this.mainContainer=null,this.videoContainer=null)}resize(e,t){this.currentWidth=e,this.currentHeight=t;const i=this.config?.api?.isVideoBanner()?Jt(e):t;if(this.mainContainer?.style.setProperty("width",`${e}px`),this.mainContainer?.style.setProperty("height",`${t}px`),this.creativeContainer?.style.setProperty("width",`${e}px`,"important"),this.creativeContainer?.style.setProperty("height",`${t}px`,"important"),this.videoContainer){this.videoContainer.style.setProperty("width",`${e}px`),this.videoContainer.style.setProperty("height",`${i}px`);const n=this.videoContainer.getElementsByTagName("video")[0];n&&(n.width=e,n.height=t,n.style.setProperty("width",`${e}px`),n.style.setProperty("height",`${i}px`))}this.vpaidContainer?.style.setProperty("width",`${e}px`),this.vpaidContainer?.style.setProperty("height",`${i}px`)}setBackground(e){this.backgroundColor=e,this.videoContainer?.style.setProperty("background-color",this.backgroundColor)}getType(){return Me.JS}registerVPAIDEventHandler(e){this.callback=e;const t=Xt.jJ((t=>r.c$.fromNullable(this.vpaid).forEach((i=>i.subscribe($e(e,t),t,this)))));t(Y.A),t(qe.A)}initVideo(){const e=this.window.document.createElement("video");return e.setAttribute("webkit-playsinline","true"),e.setAttribute("playsinline","true"),e.setAttribute("muted","true"),u.isAndroid()&&u.isChromeWebView()&&e.setAttribute("poster",Zt.A),this.videoContainer?.appendChild(e),this.resize(this.currentWidth,this.currentHeight),e}setupTeadsApi(){this.window.teads={...window.teads,api:this.config.api}}}class ti extends ei{async loadVpaid(e,t){this.url=e;try{const e=(0,g.createIframe)("vpaid-container-"+this.id);this.setUpMainContainers(e),this.window=await this.loadIframe(e),this.setUpCreativeContainers(this.window.document.body);const i=await t.loadVpaid(this.window,this.url);return this.vpaid=i,i}catch(e){throw this.destroy(),e}}loadIframe(e){return new Promise(((t,i)=>{e.onload=()=>t(e.contentWindow),e.onerror=i,e.srcdoc=`<!DOCTYPE html>\n    <html>\n      <head>\n        ${Yt()}\n      </head>\n      <body style="margin:0px;padding:0px;overflow:hidden">\n      </body>\n    </html>`}))}}class ii extends ei{async loadVpaid(e,t){this.url=e;try{const e=document.createElement("div");this.window=window,this.setUpMainContainers(e),this.setUpCreativeContainers(e);const i=await t.loadVpaid(this.window,this.url);return this.vpaid=i,i}catch(e){throw this.destroy(),e}}}class ni extends je{constructor(e,t){super(),this.config=t,this.lastAdRemainingTime=-1,r.c$.fromNullable(e.getVPAID()).forEach((e=>this.setVPAID(e))),this.type=e.getType(),this.container=e,this.container.registerVPAIDEventHandler((e=>{switch(e.type){case Y.A.AdRemainingTimeChange:case Y.A.AdDurationChange:return}this.handleVpaidEvent(e)}))}initAd(e,t,i,n,s,o){this.container.resize(e,t),this.type===Me.JS&&"string"==typeof s&&(s={AdParameters:s}),super.initAd(e,t,i,n,s,this.type===Me.JS?this.getEnvironmentVars(o):null)}setAdVolume(e){return this.environmentVars.forEach((t=>{r.c$.fromNullable(t.videoSlot).forEach((t=>{let i=e=>{"volumechange"===e.type&&this.dispatchEvent(Y.A.AdVolumeChange),p.removeEventListener("volumechange",t,i)};p.addEventListener("volumechange",t,i),t.volume=e,t.muted=!e}))})),super.setAdVolume(e),this.dispatchEvent(Y.A.AdVolumeChange),e}getAdVolume(){return this.environmentVars.flatMap((e=>r.c$.fromNullable(e.videoSlot))).filter((e=>!(0,b.b0)(e.volume))).match({some:e=>e.muted?0:e.volume,none:()=>super.getAdVolume()})}resizeAd(e,t,i){const n=this.config?.api?.isVideoBanner()?Jt(e):t;this.isResizing=!0,this.container.resize(e,t),super.resizeAd(e,n,i)}getEnvironmentVars(e){return this.container.getEnvironmentVars(e)}handleVpaidEvent(e){switch(e.type){case Y.A.AdSizeChange:this.isResizing||this.container.resize(this.getAdWidth(),this.getAdHeight()),this.isResizing=!1;break;case Y.A.AdStarted:this.startTimer();break;case Y.A.AdStopped:this.stopTimer()}super.handleVpaidEvent(e),this.status===Ue.A.STOPPED&&(this.status=Ue.A.REMOVING,setTimeout((()=>{this.status=Ue.A.REMOVED,this.container.destroy()}),500))}startTimer(){this.timerId||(this.timerId=setInterval((()=>{let e=this.getAdRemainingTime();this.status<Ue.A.COMPLETE&&e>=0&&this.lastAdRemainingTime!==e&&(this.lastAdRemainingTime=e,this.dispatchEvent(Y.A.AdRemainingTimeChange),this.dispatchEvent(Y.A.AdDurationChange))}),250))}stopTimer(){this.timerId&&clearInterval(this.timerId)}}class si{constructor(){this.logger=new l.V("ExternalVpaidStrategy")}async loadVpaid(e,t){await Promise.race([this.createLoadScript(t,e.document.head),new Promise(((e,t)=>setTimeout((()=>t(Gt)),Fe)))]);try{const t=e.getVPAIDAd();return this.logger.info("getVPAIDAd - Retrieve ad from creative"),t}catch(e){const t=Ht;throw t.message+=" "+e,t}}createLoadScript(e,t){return new Promise(((i,n)=>{const s=document.createElement("script");s.onload=()=>i(),s.onerror=()=>n(zt),s.async=!0,s.src=e,s.type="text/javascript",t.appendChild(s)}))}}var oi=i(5666);class ri{async loadVpaid(e,t){return new oi.A}}class ai{constructor(e,t){this.container=e,this.config=t,this.status=Kt.READY,this.wigo=r.c$.empty()}async load(e){if(this.status>Kt.READY)return;var t,i;e=(0,f.cY)(e),i=this.findContainerConstructor(),this.creativeType=Me.JS,this.container.innerHTML="",this.status=Kt.LOADING,t=new i(this.container,this.config),this.config.background&&t.setBackground(this.config.background);const n=this.getVpaidStrategy(e),s=await Promise.race([t.loadVpaid(e,n),new Promise(((e,t)=>setTimeout((()=>t(Gt)),Fe)))]);this.status=Ue.A.LOADED,this.wrapperClass||(this.wrapperClass=ni);const o=new this.wrapperClass(t,this.config),r=function(e){return Number(e.handshakeVersion("2.0"))>=2}(s)?"2.0":"1.0";return ai.logger.info("handshakeVersion - Creative vpaid version "+r),this.wigo.forEach((e=>e.valid(3,1,r,"string"))),o}getVpaidStrategy(e){return e===jt?new ri:new si}findContainerConstructor(){return(0,u.isAmp)()||(0,u.isIABSafeFrame)()?ii:ti}setWigo(e){this.wigo=r.c$.fromNullable(e)}}ai.logger=new l.V("vpaid.VPAIDLoader");const li=ai;var di=i(6842),ci=i.n(di);const hi=ci();function ui(e){var t=[];return t.length>0&&(e=e.replace('id="'+te+'"','id="'+te+'" class="'+t.join(" ")+'"')),e}const pi=ui(ci());function gi(e,t,i=!0){const n=e[t];n?.isEnabled()&&(i?n.show():n.hide())}const mi=(e,t=!0)=>e.forEach((e=>{e.isEnabled()&&(t?e.show():e.hide())}));var fi=i(7618),Ai=i.n(fi);class vi extends ne{constructor(){super(...arguments),this.timerClass="countdown-timer"}initAutoCountdown(e=0){this.initTimer(!0,e)}initManualCountdown(){this.initTimer(!1,0)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}setCountdown(e){this.countdown=e,this.updateDisplay()}resume(){this.paused=!1}pause(){this.paused=!0}isPaused(){return this.paused}isEnded(){return this.ended}setEndedCallback(e){this.callback=e}removeEndedCallback(){this.callback=null}initTimer(e,t){if(super.init(),this.countdown=t,!(0,b.Et)(this.countdown)||e&&t<=0)return void this.onEnded();const i=T(vi.TEMPLATE,{"countdown-duration":e?this.countdown.toString():"","countdown-id":"countdown-"+E.rand(10)});if(this.getElement().innerHTML=i,this.countdownTextElement=this.getElement().querySelector("."+this.timerClass),e){const e=()=>{this.isPaused()||this.countdown--,this.countdown<=0?(this.hide(),this.onEnded()):this.updateDisplay()};this.timerInterval=setInterval(e,1e3)}}updateDisplay(){this.countdownTextElement&&this.countdownTextElement.setAttribute&&this.countdownTextElement.setAttribute("data-countdown",this.countdown.toString())}onEnded(){if(this.timerInterval&&clearInterval(this.timerInterval),this.ended=!0,this.hide(),this.callback&&"function"==typeof this.callback)try{this.callback()}catch(e){this.logger.error("countdown ended callback failled",e)}}}vi.TEMPLATE=Ai();const bi=vi;function wi(e){var t="00";return e>60&&(t=Math.floor(e/60)<10?"0":""),t+":"+(e<10?"0":"")+e}class yi extends ne{constructor(){super(...arguments),this.placeholders=["currentTime","totalTime","remainingTime","countdown"]}init(){this.setText(this.config.text)}setText(e=""){this.renderText(e),this.havePlaceholder(e)&&!this.haveProgressCallback&&(this.haveProgressCallback=!0,this.vpaid.subscribe((()=>{this.renderText(e)}),Y.A.AdRemainingTimeChange))}renderText(e){this.textNode&&this.getElement().removeChild(this.textNode),this.textNode=document.createElement("span"),this.textNode.innerHTML=this.havePlaceholder(e)?this.replacePlaceholders(e):e,this.getElement().appendChild(this.textNode)}replacePlaceholders(e){const t={};return this.placeholders.forEach((e=>t[e]=this.getPlaceholderValue(e))),T(e,t)}havePlaceholder(e){const t=new RegExp("({{"+this.placeholders.join("}}|{{")+"}})","g");return!!e.match(t)}getPlaceholderValue(e){let t=Z(this.vpaid);t=t<0||isNaN(t)?0:Math.floor(t);const i=Math.floor(this.vpaid.getAdRemainingTime());switch(e){case"currentTime":return wi(t);case"totalTime":return wi(Math.floor(this.vpaid.getAdDuration()));case"remainingTime":return wi(i);case"countdown":return String((this.config.countdown||0)-t)}}}var Ei=i(7732),Ii=i.n(Ei);class Ci extends ne{init(){this.logger.debug("init endscreen"),this.showOnVideoStart=!1;var e=this.element.getAttribute("style");this.element.setAttribute("style",(e?e+";":"")+" opacity: 0.8!important; background-color: #ffffff;"),this.getElement().innerHTML=Ci.TEMPLATE,this.vpaid.subscribe((()=>{if(this.logger.debug("video complete"),this.videoComplete=!0,this.dispatchVpaidEvent(Y.A.AdVideoComplete),this.ui.getConfig().noAutoStop){this.show(),this.initLayout();let e=this.ui.getVPAIDContainer();e.style.setProperty("filter","blur(3px)"),e.style.setProperty("webkit-filter","blur(3px)"),this.dispatchVpaidEvent(z.A.EndscreenInit)}}),Y.A.AdVideoComplete),this.vpaid.subscribe((()=>{this.videoComplete&&!this.ui.getConfig().noAutoStop&&(this.show(),this.initLayout(),this.dispatchVpaidEvent(z.A.EndscreenInit))}),Y.A.AdStopped),this.hide()}getOverridenEvents(){return this.videoComplete?[Y.A.AdStopped]:[Y.A.AdVideoComplete]}getOverridenMethods(){return this.isVisible()?["pauseAd","resumeAd"]:[]}onOverridenMethod(e,t){this.countdown&&("pauseAd"===e?this.countdown.pause():"resumeAd"===e&&this.countdown.resume())}onMethod(e,t=[]){"resizeAd"===e&&this.videoComplete&&(this.logger.debug("resizeAd from endscreen",t),this.resize(t[0],t[1]),this.dispatchVpaidEvent(Y.A.AdSizeChange))}initLayout(){if(this.replayButton=p.getElementsByClassName("replay-button",this.getElement(),this.ui.getContentWindow())[0],this.replayButton){p.addEventListener("click",this.replayButton,(()=>{this.onReplayClick()}));try{r.c$.fromNullable(this.config.replayButton?.text).forEach((e=>{p.getElementsByClassName("text",this.replayButton,this.ui.getContentWindow())[0].innerHTML=e}))}catch(e){this.logger.error("No text on replay button")}u.isEdgeTouchScreen()&&(this.replayButton.className="button edge-touch-screen replay-button")}else this.logger.debug("No replayButton on endscreen !");if(this.callButton=p.getElementsByClassName("call-button",this.getElement(),this.ui.getContentWindow())[0],this.callButton&&this.config.callButton&&this.ui.getConfig().clickthrough){if(p.addEventListener("click",this.callButton,(()=>{this.dispatchUiEvent(z.A.ClickRequest),this.onActionClick()})),this.config.callButton.text){var e=this.callButton.querySelector(".icon span");if(e){let t=Ci.CSSClassMapping[this.config.callButton.type]||(()=>{for(let e in Ci.CSSClassMapping)return Ci.CSSClassMapping[e]})();g.addClass(e,t)}try{p.getElementsByClassName("text",this.callButton,this.ui.getContentWindow())[0].innerHTML=this.config.callButton.text}catch(e){this.logger.error("No text on callButton")}u.isEdgeTouchScreen()&&(this.callButton.className="button edge-touch-screen call-button")}}else this.callButton&&this.callButton.parentNode&&this.callButton.parentNode.removeChild(this.callButton),this.logger.debug("No callButton on endscreen !");this.adChoicesButton=p.getElementsByClassName("adchoices",this.getElement(),this.ui.getContentWindow())[0],this.adChoicesButton?this.ui.getConfig().showAdChoicesIcon?(u.isMobile()||(p.addEventListener("mouseover",this.adChoicesButton,(()=>{g.addClass(this.adChoicesButton,"expanded"),this.adChoicesButton.style.setProperty("width","auto"),this.adChoicesButton.style.setProperty("height","15px"),this.adChoicesButton.style.setProperty("padding","0px 17px 1px 4px")})),p.addEventListener("mouseout",this.adChoicesButton,(()=>{g.removeClass(this.adChoicesButton,"expanded")}))),p.addEventListener("click",this.adChoicesButton,(()=>{this.dispatchUiEvent(z.A.AdChoicesClickRequest)}))):(g.removeClass(this.adChoicesButton,"show"),g.addClass(this.adChoicesButton,"hide")):this.logger.debug("No adChoicesButton on endscreen !"),this.closeButton=p.getElementsByClassName("close-button",this.getElement(),this.ui.getContentWindow())[0],this.closeButton?!this.config.closeButton||this.config.closeButton.disable||this.config.closeButton.listenSkippableState&&!this.vpaid.getAdSkippableState()?(g.removeClass(this.closeButton,"show"),g.addClass(this.closeButton,"hide")):p.addEventListener("click",this.closeButton,(()=>{this.dispatchVpaidEvent(Y.A.AdUserClose),this.closeAd()})):this.logger.debug("No closeButton on endscreen !");var t=p.getElementsByClassName("countdown",this.getElement(),this.ui.getContentWindow())[0];t?(this.countdown=new bi(this.ui,t,this.vpaid,{}),this.config.autoClose&&this.countdown.setEndedCallback((()=>{this.logger.debug("Countdown ended and autoClose on, close ad"),this.closeAd()})),this.countdown.initAutoCountdown(this.config.countdown),this.countdown.show()):this.logger.debug("No countdown on endscreen"),this.resize(this.ui.getAdWidth(),this.ui.getAdHeight())}resize(e,t){}onClick(e){}onReplayClick(){this.clearCloseInterval(),this.ui.getConfig().noAutoStop&&this.vpaid.stopAd(),this.videoComplete=!1,this.dispatchUiEvent(z.A.ReplayRequest)}onActionClick(){var e=this.ui.getConfig().clickthrough||null;this.dispatchVpaidEvent(Y.A.AdClickThru,{url:e,id:null,playerHandles:!0})}clearCloseInterval(){this.countdown&&(this.countdown.removeEndedCallback(),this.countdown.stopTimer())}closeAd(){this.clearCloseInterval(),this.ui.stopAd()}}Ci.CSSClassMapping={learnMore:"icon-learnmore",shopNow:"icon-shop",contactUs:"icon-contact",signUp:"icon-signup"},Ci.TEMPLATE=Ii();const Si=Ci,ki={fullscreenbutton:class extends ne{init(){this.eventName=z.A.FullscreenRequest,this.showOnVideoStart=!1,super.init(),this.show()}bindClick(){p.addEventListener("mousedown",this.getElement(),(e=>{this.onClick(e)}))}},earlyclickoverlay:class extends ne{constructor(){super(...arguments),this.startTimer=()=>{setTimeout((()=>this.hide()),this.config.displayTime),this.vpaid.unsubscribe(this.startTimer,Y.A.AdStarted)}}init(){this.config.displayTime>0&&(this.eventName=z.A.EarlyClickRequest,this.vpaid.subscribe(this.startTimer,Y.A.AdStarted),super.init(),this.show())}onVideoStart(){}},mutebutton:se,progressbar:class extends ne{constructor(){super(...arguments),this.showOnVideoProgress=!0}init(){if(this.progressbar=p.getElementsByClassName("progress",this.getElement(),this.ui.getContentWindow())[0],this.progressBarContainer=this.getElement(),this.progressBarContainer.style.setProperty("width","100%"),!this.progressbar)return this.hide();this.vpaid.subscribe((()=>{this.onProgress()}),Y.A.AdRemainingTimeChange),this.vpaid.subscribe((()=>{this.hide()}),Y.A.AdVideoComplete),super.init()}setShowOnVideoProgress(e){this.showOnVideoProgress=e}getShowOnVideoProgress(){return this.showOnVideoProgress}onProgress(){var e=Z(this.vpaid);this.vpaid.getAdDuration()>0&&e>0?(!this.isVisible()&&this.showOnVideoProgress&&this.show(),this.progressbar.style.setProperty("width",e/this.vpaid.getAdDuration()*100+"%")):this.hide()}},hourglass:class extends ne{init(){this.createCountdown(),super.init()}show(){void 0!==this.countdown&&this.countdown.show(),this.vpaid.subscribe((()=>{this.onAdRemainingTimeChange()}),Y.A.AdRemainingTimeChange),this.vpaid.subscribe((()=>{this.onAdVideoComplete()}),Y.A.AdVideoComplete),super.show()}hide(){void 0!==this.countdown&&this.countdown.hide(),this.vpaid.unsubscribe((()=>{this.onAdRemainingTimeChange()}),Y.A.AdRemainingTimeChange),this.vpaid.unsubscribe((()=>{this.onAdVideoComplete()}),Y.A.AdVideoComplete),super.hide()}center(e){const t=this.getElement().classList;e?t.add("center"):t.remove("center")}createCountdown(){const e=document.createElement("div");e.className="countdown",this.getElement().appendChild(e),this.countdown=new bi(this.ui,e,this.vpaid,{}),this.countdown.initManualCountdown()}onAdRemainingTimeChange(){this.isVisible()&&(0,b.Et)(this.vpaid.getAdRemainingTime())&&this.countdown.setCountdown(Math.ceil(this.vpaid.getAdRemainingTime()))}onAdVideoComplete(){this.hide()}},playpausebutton:class extends ne{init(){this.eventName=z.A.PlayPauseRequest,this.vpaid.subscribe((()=>{this.onPause()}),Y.A.AdPaused),this.vpaid.subscribe((()=>{this.onPause()}),Y.A.AdVideoComplete),this.vpaid.subscribe((()=>{this.onPlay()}),Y.A.AdPlaying),this.vpaid.subscribe((()=>{this.onPlay()}),Y.A.AdVideoStart),super.init()}onClick(e){super.onClick(e),this.isPlaying?this.vpaid.pauseAd():this.vpaid.resumeAd()}onPlay(){this.isPlaying=!0,g.addClass(this.getElement(),"playing")}onPause(){this.isPlaying=!1,g.removeClass(this.getElement(),"playing")}},progresstext:class extends ne{init(){this.vpaid.subscribe((()=>{var e=this.vpaid.getAdRemainingTime();isNaN(e)&&(e=this.vpaid.getAdDuration()),this.getElement().innerHTML="Your video in "+Math.ceil(e)+" sec"}),Y.A.AdRemainingTimeChange)}},skipbutton:class extends ne{init(){const e=r.c$.fromNullable(this.ui.getConfig().skipoffset);if(this.eventName=z.A.SkipRequest,this.config.listenSkippableState)return void this.hide();const t=setInterval((()=>{this.vpaid.getAdSkippableState()?this.vpaid.getAdSkippableState()&&(clearInterval(t),this.getElement().style.setProperty("cursor","pointer"),this.getElement().innerHTML="Skip Ad >>",this.show()):e.filter((e=>e>0)).forEach((e=>{const t=Math.floor(e-Z(this.vpaid));this.getElement().innerHTML="Skip in "+(isNaN(t)?e:t<0?0:t)+" sec",this.show()}))}),1e3);super.init()}onClick(e){super.onClick(e),this.vpaid.getAdSkippableState()&&this.vpaid.skipAd()}},closebutton:class extends ne{constructor(){super(...arguments),this.onClickAction=r.NV}init(){if(this.countdownValue=r.c$.fromNullable(this.config.countdown).filter((e=>e>=0)).getOrElse((()=>this.ui.getConfig().skipoffset)),this.eventName=z.A.CollapseRequest,this.vpaid.subscribe((()=>{this.videoEnded=!0}),Y.A.AdVideoComplete),this.config.listenSkippableState)this.mode=1,this.vpaid.subscribe((()=>{this.vpaid.getAdSkippableState()?this.show():this.hide()}),Y.A.AdSkippableStateChange);else if((0,b.Et)(this.countdownValue)&&this.countdownValue>0){this.mode=2;const e=this.insertCountDownElement();this.countdown=new bi(this.ui,e,this.vpaid,{}),this.countdown.setEndedCallback((()=>this.onCountdownEnded()))}else 0===this.countdownValue&&(this.mode=3,this.countdownEnded=!0,this.show())}onMethod(e,t){this.countdown&&this.countdownInitiated&&!this.countdownEnded&&r.c$.fromNullable({pauseAd:()=>this.countdown.pause(),resumeAd:()=>this.countdown.resume()}[e]).forEach((e=>e()))}show(){super.show();const e=this.getElement().getElementsByClassName("close-button icon-close")[0];this.countdown&&!this.countdownEnded||g.removeClass(e,"hide")}restoreOnClickAction(){this.onClickAction=r.NV}changeOnCountdownEnded(e){this.countdown.setEndedCallback((()=>{this.countdown.hide(),this.countdownEnded=!0,e()}))}onVideoStart(){this.countdownInitiated||this.config.listenSkippableState||(super.onVideoStart(),this.countdown.initAutoCountdown(this.countdownValue),this.countdown.show(),this.countdownInitiated=!0)}onClick(e){this.onClickAction.match({some:e=>{e()},none:()=>{this.countdownEnded&&(this.videoEnded?super.onClick(e):(this.dispatchUiEvent(z.A.CollapseRequest),this.vpaid.skipAd()))}})}insertCountDownElement(){const e=document.createElement("div");return e.className="countdown",this.getElement().appendChild(e),e}onCountdownEnded(){this.countdown.hide(),this.countdownEnded=!0,this.show()}},uibutton:class extends ne{init(){var e=!0;this.eventName=z.A.UIButtonRequest,p.addEventListener("click",this.getElement(),(t=>{this.onClick(t),e?this.ui.hideAllComponents():this.ui.showAllComponents(),this.ui.showComponent("uibutton"),e=!e,g.toggleClass(this.getElement(),"ui-invisible")}))}},textfield:yi,clicktoplay:class extends ne{init(){this.showOnVideoStart=!1,this.eventName=z.A.ClickToPlayRequest}onMethod(e,t=[]){"startAd"===e&&(this.show(),this.dispatchVpaidEvent(Y.A.AdStarted))}getOverridenEvents(){return[Y.A.AdStarted]}getOverridenMethods(){return["startAd"]}onClick(e){super.onClick(e),g.addClass(this.getElement(),"loading"),this.vpaid.subscribe((()=>{this.remove()}),Y.A.AdStarted),this.remove(),this.vpaid.startAd()}},clickbutton:class extends yi{init(){if(this.clickthrough=this.ui.getConfig().clickthrough,this.eventName=z.A.ClickRequest,this.config.text&&this.clickthrough){const e=document.createElement("div");e.className="text",e.innerHTML=this.config.text,this.getElement().appendChild(e)}else this.hide();this.vpaid.subscribe((()=>{this.hide()}),Y.A.AdVideoComplete)}onVideoStart(){this.showOnVideoStart&&this.config.text&&this.clickthrough&&this.show()}onClick(e){super.onClick(e),this.dispatchVpaidEvent(Y.A.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})}},soundbutton:class extends se{init(){super.init(),this.eventName=z.A.SoundToggleRequest;const e=document.createElement("div");e.className=oe.OFF,this.getElement().appendChild(e);const t=()=>{(0,g.replaceClass)(e,this.vpaid.getAdVolume()>0?oe.ON:oe.OFF,this.vpaid.getAdVolume()>0?oe.OFF:oe.ON)};this.vpaid.subscribe(t,Y.A.AdVolumeChange),this.vpaid.subscribe(t,Y.A.AdStarted)}setAdVolume(){}onClick(e){super.onClick(e)}},label:class extends ne{constructor(){super(...arguments),this.defaultText="Advertising"}init(){let e=this.config.html&&""!==this.config.html?this.config.html:this.config.text||this.defaultText;this.getElement().innerHTML=e,this.getElement().setAttribute("style",this.config.style||""),this.show()}},credits:class extends ne{constructor(){super(...arguments),this.defaultLink="https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads"}init(){this.config.text=this.config.text||"Ads by [Teads]";const e=this.config.text.replace(/\[([^\]]*)\]/g,'<span class="teads-ui-component-credits-blue">$1</span>'),t=this.config.url||this.defaultLink;this.getElement().innerHTML='<a href="'+t+'" target="_blank">'+e+"</a>",this.show()}},endscreen:Si,brandlogo:class extends ne{init(){this.clickthrough=r.c$.fromNullable(this.ui.getConfig().clickthrough),this.eventName=z.A.ClickRequest,this.load((()=>{this.getElement().style.setProperty("background-image","url("+this.config.url+")")}))}load(e){r.c$.fromNullable(this.config.url).forEach((t=>{const i=new Image;i.onload=()=>e(),i.onerror=e=>this.hide(),i.src=t}))}onVideoStart(){this.showOnVideoStart&&this.show()}onClick(e){super.onClick(e),this.clickthrough.forEach((e=>{this.dispatchVpaidEvent(Y.A.AdClickThru,{url:e,id:this.config.id,playerHandles:!0})}))}},countdown:bi,startscreen:class extends ne{init(){this.showOnVideoStart=!1,this.element.style.setProperty("z-index","2"),this.show(),this.vpaid.subscribe((()=>this.hide()),Y.A.AdStarted)}},adchoices:class extends ne{init(){if(this.ui.getConfig().showAdChoicesIcon){this.eventName=z.A.AdChoicesClickRequest,u.isMobile()||(p.addEventListener("mouseover",this.getElement(),(0,P.o)(this.onMouseOver,this)),p.addEventListener("mouseout",this.getElement(),(0,P.o)(this.onMouseOut,this)));const e=this.getElement().style;e.setProperty("width","auto"),e.setProperty("height","15px"),e.setProperty("padding","1px 17px 1px 4px"),this.vpaid.subscribe((()=>{this.hide()}),Y.A.AdVideoComplete)}else this.remove()}onMouseOver(){g.addClass(this.getElement(),"expanded")}onMouseOut(){g.removeClass(this.getElement(),"expanded")}},bannervideobottom:class extends yi{init(){if(this.clickthrough=this.ui.getConfig().clickthrough,this.config.text&&this.clickthrough){const e=document.createElement("div");e.className="container";const t=document.createElement("a");t.className="cta",t.innerHTML=this.config.text,e.appendChild(t),this.getElement().appendChild(e),this.show()}else this.hide()}onClick(e){super.onClick(e),this.dispatchVpaidEvent(Y.A.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})}}};class Ti extends je{get isRendered(){return this.rendered}constructor(e,t,i,n){if(super(),this.mainContainer=e,this.config=i,this.loaderConfig=n,this.isFullscreen=!1,this.components=[],this.componentsByName={},this.logger=new l.V("ui.VPAIDUI"),this.initAdStartTime=0,this.logger.debug("Init Layout",e,i),this.config.container){this.container=this.config.container;let e=this.mainContainer.firstElementChild;e&&e.id===te&&this.mainContainer.removeChild(e)}else this.container=g.createIframe("vpaid-ui");this.container.parentNode||this.mainContainer.appendChild(this.container),r.c$.fromNullable(this.container.contentWindow).forEach((e=>{e.document.write(t),e.document.close(),this.initHeavyAdInterventionListener(e),u.isAmp()||u.isIABSafeFrame()||p.addEventListener("resize",e,(()=>{this.logger.debug("resize on player Iframe detected, trigger an AdSizeChange VPAID event"),this.dispatchEvent(Y.A.AdSizeChange)})),this.mainComponentsContainer=e.document.getElementById(te)})),(u.isAmp()||u.isIABSafeFrame())&&(this.mainContainer.appendChild(this.mainComponentsContainer),this.mainContainer.removeChild(this.container)),r.c$.fromNullable(this.mainComponentsContainer.ownerDocument).forEach((e=>{this.videoComponentsContainer=e.getElementById(ie)}))}initAd(e,t,i,n,s="",o={}){if(this.vpaid)return this.resize(e,t,i),this.initAdStartTime=performance.now(),this.logger.debug("initAd"),super.initAd(e,t,i,n,s,o);this.logger.error("You must register vpaid creative to be wrapped using setVPAID() method")}startAd(){this.status<Ue.A.LOADED?this.dispatchEvent(Y.A.AdLog,"VPAID not started, use initAd(), and wait for AdLoaded event before call startAd() method"):this.status>=Ue.A.STARTING?this.dispatchEvent(Y.A.AdLog,"cannot call startAd() twice, already started"):(this.render(this.getVPAID()),this.logger.debug("startAd"),super.startAd())}resizeAd(e,t,i="normal"){e<=0||t<=0||(this.resize(e,t,i),super.resizeAd(e,t,i))}stopAd(){const e=()=>{setTimeout((()=>{this.container.parentNode&&this.container.parentNode.removeChild(this.container)}),2e3),this.dispatchedEvents[Y.A.AdStopped]||this.dispatchEvent(Y.A.AdStopped)};this.isStopped?(this.logger.debug("Wrapped vpaid already stopped, remove UI"),e()):(this.logger.debug("Wrapped vpaid not stopped, try to stop it"),this.vpaid.subscribe(e,Y.A.AdStopped),super.stopAd())}pauseAd(){this.callVPAIDMethod("pauseAd")}resumeAd(){this.callVPAIDMethod("resumeAd")}getAdWidth(){return this.isRendered&&!this.isStopped&&super.getAdWidth()?super.getAdWidth():p.getBoundingClientRect(this.getMainComponentsContainer()).width}getAdHeight(){return this.isRendered&&!this.isStopped&&super.getAdHeight()?super.getAdHeight():p.getBoundingClientRect(this.getMainComponentsContainer()).height}setAdVolume(e){return isNaN(e)?(this.logger.warn("setAdVolume: volume argument is NaN"),this.getAdVolume()):super.setAdVolume(e)}getAdExpanded(){return this.isFullscreen}setVPAID(e){if(this.vpaid)return void this.logger.warn("setVPAID() : vpaid ad already register, can't use twice");this.logger.debug("setVPAID() : Register vpaid ad"),super.setVPAID(e),e.subscribe((()=>{this.isStopped=!0}),Y.A.AdStopped);const t=e=>{var t=((e,t)=>e.filter((e=>e.isEnabled()&&e.getOverridenEvents().includes(t))))(this.components,e.type);0===t.length&&this.handleVpaidEvent(e)};for(var i in Y.A)if(Y.A.hasOwnProperty(i)){var n=Y.A[i];e.subscribe($e(t,n),n)}for(var i in qe.A)qe.A.hasOwnProperty(i)&&(n=qe.A[i],e.subscribe($e(t,n),n))}getVPAID(){return this.vpaid}getVPAIDContainer(){return this.mainComponentsContainer.ownerDocument.getElementById("vpaid-container")}getMainContainer(){return this.mainContainer}getMainComponentsContainer(){return this.mainComponentsContainer.ownerDocument.getElementById(te)}getCreativeContainer(){return this.getVPAID().container.getCreativeContainer()}getVideoComponentsContainer(){return this.videoComponentsContainer=this.videoComponentsContainer||this.mainComponentsContainer.ownerDocument.getElementById(ie)}getComponent(e){return this.componentsByName[e]}getConfig(){return this.config}getContainer(){return this.container}getContentWindow(){return this.getContainer().contentWindow||window}render(e){if(!this.isRendered){this.rendered=!0,this.show(),this.resize(e.getAdWidth(),e.getAdHeight());var t,i=e=>{this.handleVpaidEvent(e)};for(var n in this.logger.debug("init components:",this.config.components),ki)if(ki.hasOwnProperty(n)&&ki[n])for(var s=ee+n,o=p.getElementsByClassName(s,this.getMainComponentsContainer(),this.getContentWindow()),a=0,l=o.length;a<l;a++)if(this.config.components&&this.config.components[n]&&this.config.components[n].disable||this.config.disableAllComponents&&this.config.components&&!1!==this.config.components[n].disable)r.c$.fromNullable(o[a]).forEach((e=>r.c$.fromNullable(e.parentNode).forEach((t=>t.removeChild(e))))),this.logger.debug("disable component "+n);else{var d=new ki[n](this,o[a],e,this.config.components&&this.config.components[n]?this.config.components[n]:{},i);if(this.components.push(d),this.componentsByName[n]=d,this.loaderConfig?.api?.isVideoBanner()){const e=this.loaderConfig?.api?.getCreativeSize();this.config.clickthrough||this.getVPAIDContainer().style.setProperty("background-color","transparent"),"soundbutton"===n&&d.getElement().style.setProperty("bottom",(t=e).height-Jt(t.width)+"px"),"endscreen"===n&&d.getElement().style.setProperty("height",`${Jt(e.width)}px`)}try{d.init(),this.logger.debug("init component "+n,this.config.components&&this.config.components[n]?this.config.components[n]:null)}catch(e){this.logger.error('error init component "'+n+'"',e.toString())}}}}showAllComponents(){mi(this.components,!0)}hideAllComponents(){mi(this.components,!1)}showComponent(e){gi(this.componentsByName,e,!0)}hideComponent(e){gi(this.componentsByName,e,!1)}dispatchCustomEvent(e,t){this.dispatchEvent(e,t)}getProperties(){return{adLinear:this.getAdLinear(),adWidth:this.getAdWidth(),adHeight:this.getAdHeight(),adExpanded:this.getAdExpanded(),adSkippableState:this.getAdSkippableState(),adRemainingTime:this.getAdRemainingTime(),adDuration:this.getAdDuration(),adVolume:this.getAdVolume()}}toJSON(){return JSON.stringify(this.getProperties())}handleVpaidEvent(e){switch(e.type){case Y.A.AdSizeChange:this.getAdWidth()&&this.getAdHeight()&&this.isStopped&&(this.logger.debug("resize with AdSizeChange event"),this.resize(this.getAdWidth(),this.getAdHeight(),this.isFullscreen?"fullscreen":"normal"));break;case Y.A.AdLoaded:if(this.initAdStartTime>0)try{const e=r.c$.fromNullable(this.config.vpaidUrl).map((e=>f.qg(e).hostname)).getOrNull(),t=performance.now()-this.initAdStartTime;this.logger.info("initAd response time",t,e)}catch(e){}}super.handleVpaidEvent(e)}callVPAIDMethod(e,t=[]){this.components.forEach((i=>i.onMethod(e,t)));const i=((e,t)=>e.filter((e=>e.isEnabled()&&e.getOverridenMethods().includes(t))))(this.components,e);return 0===i.length?super.callVPAIDMethod(e,t):i.reduce(((i,n)=>n.onOverridenMethod(e,t)),void 0)}resize(e,t,i="normal"){if(e<=0||t<=0)return;let n=e+"px",s=t+"px";this.getVideoComponentsContainer().style.getPropertyValue("width")===n&&this.getVideoComponentsContainer().style.getPropertyValue("height")===s&&this.container.style.getPropertyValue("width")===n&&this.container.style.getPropertyValue("height")===s||(this.getVideoComponentsContainer().style.setProperty("width",n),this.getVideoComponentsContainer().style.setProperty("height",s),this.container.style.setProperty("width",n,"important"),this.container.style.setProperty("height",s,"important"),this.container.style.setProperty("max-height",s,"important"),this.logger.debug("vpaidui resize",e,t,i),!this.isFullscreen&&"fullscreen"===i||this.isFullscreen&&"normal"===i?(this.isFullscreen="fullscreen"===i,this.dispatchEvent(Y.A.AdExpandedChange)):this.logger.debug("no fullscreen exit or enter"));let o=this.getVPAIDContainer();o.style.setProperty("width",n),o.style.setProperty("height",s);let r="l-screen";e<=480?r="xs-screen":e<=640&&(r="sm-screen"),["l-screen","xs-screen","sm-screen"].forEach((e=>{e!==r&&g.removeClass(this.mainComponentsContainer,e)})),g.addClass(this.mainComponentsContainer,r)}show(){this.container.style.setProperty("display","block")}hide(){this.container.style.setProperty("display","none")}initHeavyAdInterventionListener(e){window.addEventListener("message",(e=>{r.c$.of(e).map((({data:e})=>e)).filter((({event:e})=>"heavyAdIntervention"===e)).forEach((({report:e})=>{this.logger.error("Fetched a heavy ad intervention event",e),Xe.uu.tryCatch((()=>r.c$.of(JSON.parse(e)).map((({body:e})=>e)).filter((({id:e})=>"HeavyAdIntervention"===e)).map((({message:e})=>e)))).fold((e=>this.logger.error("Something went wrong during the parsing of the intervention report:",e)),(e=>e.forEach((e=>{const t=e.indexOf("Ad was removed")>-1?qe.A.AdRemovedHeavyAdIntervention:qe.A.AdWarningHeavyAdIntervention,i=e.indexOf("CPU")>-1?"CPU":"Network";this.dispatchCustomEvent(t,{id:De.i.GENERAL_LINEAR.id,message:`HeavyAdIntervention ${i}`})}))))}))}),!0),e.postMessage({event:"reportingObserverSource"},"*")}}var Vi=i(6992),Pi=i(3757),Li=i(5944),xi=i(5409);class _i{constructor(e,t,i,n,s){this.container=e,this.config=t,this.vpaidAd=i,this.bufferingTimer=null,this.bufferingDone=!1,this.elapseTime=0,this.logger=new l.V("player.plugin.Bench");try{let e=g.findTopWindow(this.container);this.visibility=I.listenWindow(e,(()=>{this.elapseTime>1e3&&0===this.getCurrentTime()&&(this.clearBufferingTimer(!0),this.visibility.destroy())}),(()=>{}))}catch(e){this.logger.error("Error with visibility init",e)}[Y.A.AdStopped,Y.A.AdSkipped,Y.A.AdError].forEach((e=>{this.vpaidAd.subscribe((()=>this.visibility.destroy()),e)})),this.vpaidAd.subscribe((()=>{this.getBuffering()}),Y.A.AdStarted),this.vpaidAd.subscribe((()=>{this.clearBufferingTimer()}),Y.A.AdPaused),this.vpaidAd.subscribe((()=>{this.getBuffering()}),Y.A.AdPlaying)}init(){}deinit(){}getBuffering(e=500){this.bufferingDone||(this.bufferingTimer=setTimeout((()=>{try{this.elapseTime=e;let t=this.getCurrentTime();if(t>0){let i=e-1e3*t>0?e-1e3*t:0;"number"==typeof i&&i>=0&&this.logger.debug("Buffering: "+i+"ms"),this.bufferingDone=!0,this.visibility.destroy()}else this.getBuffering(e+=500)}catch(e){this.logger.error("Error with buffering method",e)}}),500))}clearBufferingTimer(e=!1){try{this.bufferingTimer&&(clearTimeout(this.bufferingTimer),this.bufferingTimer=null,e&&(this.logger.warn("Stop buffering calculation"),this.bufferingDone=!0))}catch(e){this.logger.error("An error occured while cleaning the buffering timer",e)}}getCurrentTime(){return this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()?this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime():0}}var Ni=i(3165);class Ri{constructor(e,t,i,n,s,o){this.config=t,this.vpaidAd=i,this.linearAd=s,this.dependenciesFromPlayer=o}init(){this.vpaidAd.subscribe(this.onClickThrough,Y.A.AdClickThru,this)}deinit(){this.vpaidAd.unsubscribe(this.onClickThrough,Y.A.AdClickThru)}onClickThrough(e,t,i){const n=(0,Ni.l)(e)||this.linearAd.clickThrough[0],s=this.config.auctionId;if(s&&(0,b.Se)((0,b.CD)(this.config.formatConfig.adSourceId),s.toString()),i&&n)try{const e=(0,Pi.Q3)([(0,Pi.uH)(this.dependenciesFromPlayer.gdprIab.status),...(0,Pi.XF)(this.dependenciesFromPlayer.gdprIab.consent)])(n),t=(0,u.isChromeIos)()&&(0,f.UT)(e)?"_parent":"_blank";window.open(e,t,"attributionsrc")}catch(e){this.dependenciesFromPlayer.sumologicLogger.error(`plugin-onclickthrough ${(0,Te.$)(e)}`)}}}var Oi=i(5490);class Di{constructor(e,t,i,n,s,o){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=n,this.linearAd=s,this.trackVastEventDependencies=o,this.logger=new l.V("player.plugin.Extensions"),this.getVastMacros=()=>{const e=r.c$.fromNullable(m.Ln(this.linearAd.duration,this.vpaidAd.getAdRemainingTime())),t=m.GC(r.c$.fromNullable(this.mediaFile)),i=m.tR(r.c$.fromNullable(this.mediaFile)),n=(0,p.getBoundingClientRect)(this.container).height,s=r.c$.fromNullable(this.config.formatConfig?.threshold).map((e=>e.get())).getOrValue(100),o=r.c$.fromNullable(m.gl(this.container,n,s)),a=(0,Mt.B)(this.trackVastEventDependencies.gdprIab.status),l=r.c$.fromNullable(this.trackVastEventDependencies.gdprIab.consent);return m.Nm({currentTime:e,assetUrl:t,mediaFileType:i,viewability:o,gdprAppliesMacro:a,gdprConsent:l})},this.getFunnelMacros=()=>r.c$.fromNullable(this.config?.formatConfig).match({some:e=>{const t=r.c$.fromNullable(e.pageId),i=r.c$.fromNullable(e.placementId),n=r.c$.fromNullable(e.insertionId),s=r.c$.fromNullable(u.getEnv());return m.$S({pageId:t,pid:i,insertionId:n,env:s})},none:()=>m.$S()})}init(){this.linearAd.extensions.forEach((e=>{switch(e.type){case It:const t=St(e.content);t&&t.width&&t.height&&(this.mediaFile.width=t.width,this.mediaFile.height=t.height);break;case pt.AD_VERIFICATIONS:if((0,o.vV)(this.linearAd.adParameters,this.mediaFile.url)){const t=this.retrieveCreativePrefetchAdVerificationScriptUrls(e);this.prefetchAdVerificationScripts(t)}break;case pt.VISIBILITY:case pt.HTML:case pt.IFRAME:this.injectIframe(e.content);break;case pt.SCRIPT:case pt.ALENTY:this.injectJs(e.content);break;default:this.logger.warn("Unhandled extension type",e)}}))}deinit(){}getExtension(e){return r.c$.fromNullable(this.linearAd.extensions.find((t=>t.type===e)))}retrieveCreativePrefetchAdVerificationScriptUrls(e){const t=[...e.xml.querySelectorAll("Verification")].map((e=>[e.getAttribute("vendor"),e.querySelector("JavaScriptResource")])).filter((([,e])=>"creative-prefetch"===e.getAttribute("apiFramework"))),i=/src="([^"]+)/gi,n=(0,Oi.A)(((e,t)=>t.map((({vendor:t,url:i})=>({vendor:t,url:m.gM(e,!0)(i)}))))),s=e=>n(this.getVastMacros())(n(this.getFunnelMacros())(e));return t.map((([e,t])=>r.c$.fromNullable(t.textContent).map((e=>e.trim())).map((t=>{let n;const s=[];for(;null!==(n=i.exec(t));)s.push(n[1]);let o;return o="DoubleVerify"===e?s.map((e=>(e.includes("btreg")||(e=`${e}&btreg=`),f.Bb(e,"btreg",this.container.getAttribute("id"))))):s,o.map((t=>({vendor:e,url:t})))})).map(s))).reduce(((e,t)=>t.map((t=>e.concat(t))).getOrValue(e)),[])}prefetchAdVerificationScripts(e){e.forEach((e=>{(new Image).src=e.url}))}injectJs(e){let t=document.createElement("script");t.async=!0,t.src=e,this.container.appendChild(t)}injectIframe(e){const t=g.createIframe("extension");t.srcdoc=e,document.body.appendChild(t)}}class Mi{constructor(e,t,i,n){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=n,this.logger=new l.V("player.plugin.Responsive")}init(){this.logger.debug("init plugin"),this.vpaidAd.subscribe(this.onVideoMetadata,qe.A.AdVideoMetadata,this),this.vpaidAd.subscribe(this.onVpaidStart,Y.A.AdStarted,this)}deinit(){this.logger.debug("deinit plugin"),this.vpaidAd.unsubscribe(this.onVpaidStart,Y.A.AdStarted),this.vpaidAd.unsubscribe(this.onVideoMetadata,qe.A.AdVideoMetadata),this.unsetResponsive()}resize(e){if(!g.isFullscreen())try{let s=p.getBoundingClientRect(this.container).width;if(s!==this.vpaidAd.getAdWidth()||e){let e=this.config.vpaidApi&&this.config.vpaidApi.getStudioData();var t=Re.A.getOptimalHeight(this.mediaFile,s,!!this.metadata||!!e),i=this.vpaidAd.getAdWidth(),n=this.vpaidAd.getAdHeight();i===s&&n===t||(this.vpaidAd.resizeAd(s,t,"normal"),this.logger.debug("container width change, resize from "+i+"x"+n+" to "+s+"x"+t))}}catch(e){this.logger.error("resize throw an Exception",e),this.unsetResponsive()}}setResponsive(){return!this.iframe&&(this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),Y.A.AdError),this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),Y.A.AdStopped),this.resize(),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("title","responsive plugin"),this.iframe.style.setProperty("height","0"),this.iframe.style.setProperty("width","100%"),this.iframe.style.setProperty("border","none"),this.iframe.style.setProperty("margin","0"),this.iframe.style.setProperty("padding","0"),this.container.appendChild(this.iframe),this.iframe.contentWindow.document.write("<html><body></body></html>"),this.iframe.contentWindow.document.close(),this.resizeCallback=()=>this.resize(),p.addEventListener("resize",this.iframe.contentWindow,this.resizeCallback),!0)}unsetResponsive(){try{return!!this.iframe&&(p.removeEventListener("resize",this.iframe.contentWindow,this.resizeCallback),this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,!0)}catch(e){return!1}}onVideoMetadata(e){this.logger.debug("Receive metadata from video",e),e.width&&e.height&&(this.metadata=e,this.mediaFile.width=e.width,this.mediaFile.height=e.height,Math.ceil(this.vpaidAd.getAdWidth()/this.vpaidAd.getAdHeight())!==Math.ceil(e.width/e.height)&&(this.logger.debug("vpaid ratio differ from mediafile ratio, force resize !"),this.resize(!0)))}onVpaidStart(){if(!this.config.width)try{this.logger.debug("set player responsive !"),this.setResponsive()}catch(e){this.logger.error("Exception raised while trying to initialize",e)}}}var Bi=i(8101),Fi=i(1581);class Ui{constructor(e,t,i,n,s,o){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=n,this.linearAd=s,this.trackVastEventDependencies=o,this.logger=new l.V("player.plugin.Tracker"),this.tracked={},this.trackedProgress=[],this.trackOnce=[Bi.v.Skip,Bi.v.CreativeView,Bi.v.Start,Bi.v.Impression,Bi.v.FirstQuartile,Bi.v.Midpoint,Bi.v.ThirdQuartile,Bi.v.Complete,Bi.v.Error],this.dispatchingCompleteOnAMP=!1,this.isMuted=!1;const a=[Y.A.AdLoaded,Y.A.AdStarted,Y.A.AdSkipped,Y.A.AdImpression,Y.A.AdVideoStart,Y.A.AdVideoFirstQuartile,Y.A.AdVideoMidpoint,Y.A.AdVideoThirdQuartile,Y.A.AdVideoComplete,Y.A.AdClickThru,Y.A.AdUserClose],d=[Y.A.AdDurationChange,Y.A.AdRemainingTimeChange],c=Object.keys(Y.A);for(const e in qe.A)c.push(e);this.vpaidAd.subscribe(((...e)=>{this.trackError(e)}),qe.A.AdRemovedHeavyAdIntervention),c.forEach((e=>{a.includes(e)&&this.vpaidAd.subscribe((t=>{e===Y.A.AdImpression?this.trackVastEventDependencies.sumologicLogger.info(`${e}|classic`,40):this.trackVastEventDependencies.sumologicLogger.info(`${e}|${r.c$.fromNullable(t).filter(b.Kg).getOrValue("")}`,40)}),e),d.includes(e)||this.vpaidAd.subscribe(((t="")=>{this.logger.info(`${e} ${t}`)}),e)}))}init(){this.logger.debug("init");try{this.previousRemainingTime=this.vpaidAd.getAdRemainingTime(),this.vpaidAd.subscribe((()=>this.onTimeChange()),Y.A.AdDurationChange),this.vpaidAd.subscribe((()=>this.onTimeChange()),Y.A.AdRemainingTimeChange);for(let e in this.linearAd.tracking)this.addTrackingCallback(e);let e;this.vpaidAd.subscribe((()=>this.onAdStarted()),Y.A.AdStarted),this.vpaidAd.subscribe((()=>this.onVolumeChange()),Y.A.AdVolumeChange),this.vpaidAd.subscribe((()=>{const t=this.vpaidAd.getAdExpanded();!e&&t?(this.trackVastEvent(Bi.v.Fullscreen),this.trackVastEvent(Bi.v.Expand)):e&&!t&&(this.trackVastEvent(Bi.v.ExitFullscreen),this.trackVastEvent(Bi.v.Collapse)),e=t}),Y.A.AdExpandedChange)}catch(e){const{placementKey:t,sumologicLogger:i,wigo:n,logger:s,slotType:o,creativeSize:a}=this.trackVastEventDependencies,l=r.c$.fromNullable(this.adDuration),d=l.flatMap((e=>r.c$.fromNullable(this.adRemainingTime).map((t=>e-t))));(0,_e.oN)({placementKey:t,wigo:n,sumologicLogger:i,logger:s,durationPlayed:d,totalDuration:l,errorCode:Vi.k.Undefined,errorCause:"plugin tracker exception init",slotType:o,creativeSize:a,macros:[(0,Pi.SI)(d.getOrValue(0)),(0,Pi.ly)(),(0,Pi.Qy)(r.c$.fromNullable(this.mediaFile)),(0,Pi.p4)(r.c$.fromNullable(this.mediaFile)),(0,Pi.Ez)(0),(0,Pi.uH)(this.trackVastEventDependencies.gdprIab.status),...(0,Pi.XF)(this.trackVastEventDependencies.gdprIab.consent)]})}}deinit(){this.logger.debug("deinit")}onTimeChange(){this.adDuration=this.vpaidAd.getAdDuration(),this.adRemainingTime=this.vpaidAd.getAdRemainingTime(),this.previousRemainingTime<0&&(this.previousRemainingTime=this.adRemainingTime)}onVolumeChange(){this.isMuted&&this.vpaidAd.getAdVolume()>0?this.trackVpaidEvent(Bi.v.Unmute):this.isMuted||0!==this.vpaidAd.getAdVolume()||this.trackVpaidEvent(Bi.v.Mute),this.isMuted=!this.vpaidAd.getAdVolume()}onAdStarted(){this.isMuted=!this.vpaidAd.getAdVolume()}addTrackingCallback(e){const t=Fi.A[e]||Fi.E[e];this.vpaidAd.subscribe(((...t)=>{e===Bi.v.Error?this.trackError(t):this.trackVpaidEvent(e)}),t)}buildTrackingDependencies(e){const t=(0,p.getBoundingClientRect)(this.container).height,i=r.c$.fromNullable(this.config.formatConfig?.threshold).map((e=>e.get())).getOrValue(100),n=(0,m.gl)(this.container,t,i),{placementKey:s,wigo:o,logger:a}=this.trackVastEventDependencies,l=[(0,Pi.SI)(e),(0,Pi.ly)(),(0,Pi.Qy)(r.c$.fromNullable(this.mediaFile)),(0,Pi.p4)(r.c$.fromNullable(this.mediaFile)),(0,Pi.Ez)(n),(0,Pi.X0)(this.trackVastEventDependencies.sumologicLogger),(0,Pi.uH)(this.trackVastEventDependencies.gdprIab.status),...(0,Pi.XF)(this.trackVastEventDependencies.gdprIab.consent)];return{trackOpts:{referer:(0,_e.IN)(),slotType:this.trackVastEventDependencies.slotType,creativeSize:this.trackVastEventDependencies.creativeSize,macros:l},trackingsDependencies:{placementKey:s,wigo:o,logger:a,durationPlayed:(0,r.p2)(e),totalDuration:r.c$.fromNullable(this.adDuration),sumologicLogger:this.trackVastEventDependencies.sumologicLogger}}}trackEvent(e,t){const i=t.filter((e=>!isNaN(e))).getOrValue(this.adDuration-this.adRemainingTime||0),n=Math.floor(i);if(e===Bi.v.Progress){if(this.trackedProgress[n])return;if(this.previousRemainingTime===this.adRemainingTime&&!this.dispatchingCompleteOnAMP)return;this.previousRemainingTime=this.adRemainingTime}switch(e){case Bi.v.Start:this.tracked[Bi.v.Impression]||this.trackVastEvent(Bi.v.Impression);break;case Bi.v.Complete:(0,u.isAmp)()?(this.dispatchingCompleteOnAMP=!0,this.trackProgress(n+2)):this.trackProgress(n+1);case Bi.v.FirstQuartile:case Bi.v.Midpoint:case Bi.v.ThirdQuartile:this.tracked[Bi.v.Start]||this.trackVastEvent(Bi.v.Start);break;case Bi.v.Progress:this.trackedProgress[n]=!0;const e=n-1;e>0&&!this.trackedProgress[e]&&(this.logger.debug("track missing previous progress "+e),this.trackProgress(e));break;case Bi.v.Mute:if(!this.tracked[Bi.v.Impression])return}if(!this.trackOnce.includes(e)||!this.tracked[e]){if(Bi.K.some((t=>t===e))&&e!==Bi.v.Billable){const{placementKey:t}=this.trackVastEventDependencies,{trackOpts:s,trackingsDependencies:o}=this.buildTrackingDependencies(i);if(e===Bi.v.Progress)n>0&&(0,_e.Sr)(o)(e,(()=>xe.A.vast.trackProgress(t)(n,s)));else{const i=e;(0,_e.Sr)(o)(i,(()=>xe.A.vast.track(t)(i,s)))}}else this.logger.error(`Could not track unsupported VAST event: ${e}. Supported names: ${Bi.K.join(", ")}.`),this.trackVastEventDependencies.sumologicLogger.error(`cant-track-vast-event ${e}`);this.tracked[e]=!0}}trackVastEvent(e){this.trackEvent(e,r.c$.empty())}trackVpaidEvent(e){this.trackEvent(e,r.c$.empty())}trackProgress(e){this.trackEvent(Bi.v.Progress,r.c$.fromNullable(e))}trackError(e){if(this.tracked[Bi.v.Error])return;const t=e&&e[1]&&"number"==typeof e[1]&&!isNaN(e[1])?e[1]:De.i.GENERAL.id,i=Vi.N.includes(t)?t:Vi.k.Undefined,n=e[0],s=this.adDuration-this.adRemainingTime||0,{trackOpts:o,trackingsDependencies:r}=this.buildTrackingDependencies(s);(0,_e.oN)({...r,errorCode:i,errorCause:n,...o})}}class $i{constructor(e,t,i,n,s,o){this.config=t,this.vpaidAd=i,this.linearAd=s,this.trackVastEventDependencies=o}init(){this.vpaidAd.subscribe(this.onClickAdChoices,z.A.AdChoicesClickRequest,this)}deinit(){this.vpaidAd.unsubscribe(this.onClickAdChoices,z.A.AdChoicesClickRequest)}onClickAdChoices(){var e;(0,_e.Sr)({placementKey:this.trackVastEventDependencies.placementKey,sumologicLogger:this.trackVastEventDependencies.sumologicLogger,wigo:this.trackVastEventDependencies.wigo,logger:this.trackVastEventDependencies.logger,durationPlayed:r.NV,totalDuration:r.NV})(Bi.v.ClickIcon,(()=>xe.A.vast.track(this.trackVastEventDependencies.placementKey)(Bi.v.ClickIcon,{referer:(0,_e.IN)(),slotType:this.trackVastEventDependencies.slotType,creativeSize:this.trackVastEventDependencies.creativeSize,macros:(0,Pi.Py)()}))),window.open((e=this.linearAd,r.c$.fromNullable(e).flatMap((e=>e.adChoicesIconClickThrough)).getOrValue("https://privacy-policy.teads.tv?utm_source=inread&utm_medium=icon&utm_campaign=adchoices")),"_blank")}}var Wi=i(6051);class Hi{constructor(e,t,i,n,s,o,r){this.container=e,this.config=t,this.slotType=i,this.wigo=n,this.gdprIab=s,this.placementKey=o,this.logger=new l.V("player.VASTPlayer"),this.plugins={},this.logger.info("new VASTPlayer",this.container,this.config),this.sumologicLogger=r.copy({collectorUrl:"https://s8t.teads.tv/logs/player/http-source"}),this.wigo.valid(2,0),this.wigo.setPlayerContainer(this.container),this.wigo.elementToFollow=this.container}setLinearAd(e){this.linearAd=e,this.logger.info("setLinearAd",e),this.wigo.valid(2,1,e,"modal")}setVpaidApi(e){this.config.vpaidApi=e}getLinearAd(){return this.linearAd}getMediafile(){return this.mediafile}getConfig(){return this.config}showCloseButton(){this.ui.showComponent("closebutton")}setConfigUI(e){this.config.ui=e}getOptimalMediaFile(e,t,i=(e=>!0)){return Re.A.getOptimalMediaFile(this.linearAd.duration,this.linearAd.mediaFiles,((n,s)=>{const o=r.c$.fromNullable(n);o.match({some:n=>{o.filter(i).match({some:t=>{e(t),this.wigo.valid(2,2,t.url+s,"string")},none:()=>{this.onVastError(t,De.W.get(De.i.MEDIAFILE_DISPLAY.id,"Mediafile filtered by the custom filter"),this.linearAd),this.wigo.valid(2,2,"405 - Mediafile filtered by the custom filter","error")}})},none:()=>{const e=De.W.get(De.i.UNSUPPORTED_MEDIAFILE.id,"VASTPlayer.getOptimalMediaFile didn't find mediafile");this.wigo.valid(2,2,s,"error"),this.onVastError(t,e,this.linearAd)}}),Re.A.sendMediasToSumologic(this.linearAd,n?1:0,this.sumologicLogger)}),this.sumologicLogger)}playOptimalMediaFile(e,t,i){this.getOptimalMediaFile((i=>{this.playMediaFile(i,e,t)}),t,i)}loadOptimalMediaFile(e,t,i){this.getOptimalMediaFile((i=>{this.loadMediaFile(i,e,t)}),t,i)}playMediaFile(e,t,i){if(!e){let e=De.W.get(De.i.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.playMediaFile");return this.onVastError(i,e,this.linearAd)}this.loadMediaFile(e,(function(e,i){t(e,i),e.subscribe((function(){e.startAd()}),Y.A.AdLoaded),e.initAd(i.width,i.height,i.mode,i.bitrate,i.parameters)}),i)}loadMediaFile(e,t,i){let o=e=>{this.onVastError(i,e,this.linearAd)};if(!e)return o(De.W.get(De.i.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.loadMediaFile"));this.mediafile=e;const r=Re.A.getMediaProvider(e);let a=e.url;const l=this.config.creativeSize.map((e=>e.width)).getOrValue(this.container.offsetWidth);var d,c,h={width:l,height:this.config.creativeSize.map((e=>e.height)).getOrValue(Re.A.getOptimalHeight(e,l)),mode:"normal",bitrate:e.bitrate||512,parameters:this.linearAd.adParameters},u=this.linearAd.clickThrough.length?this.linearAd.clickThrough[0]:null,p=!1;switch(r){case xi.Y.VPAID:if(u=null,"display"===this.config.adType){a===Wi.QJ&&(a=(0,Wi.tc)());break}if("native"===this.config.adType)break;break;case xi.Y.VIDEO:a=jt,p=(()=>{try{return!this.config.ui.config.components.endscreen.disable}catch(e){return this.logger.error(`Couldn't autostop: "${e}"`),!1}})(),h.parameters={url:e.url,debug:this.config.debug,clickThrough:u,skippable:this.linearAd.skippable,skipoffset:this.linearAd.skipDelay,type:Li.l[this.config.type],pid:this.sumologicLogger.placementId.getOrNull(),noAutoStop:p,timeout:Hi.MEDIAFILE_TIMEOUT_DELAY},h.parameters={AdParameters:JSON.stringify(h.parameters)},c=Hi.MEDIAFILE_TIMEOUT_DELAY+2e3,Be=c;break;case xi.Y.UNSUPPORTED:default:return d="media not supported "+e.type,void o(De.W.get(De.i.UNSUPPORTED_MEDIAFILE.id,d))}const g={path:this.config.path,api:this.config.vpaidApi};!function(e){Fe=e}(Hi.MEDIAFILE_TIMEOUT_DELAY),this.config.background&&(g.background=this.config.background);var m=this.container;if(this.config.ui){var f;if(this.config.ui.template)f=this.config.ui.template;else{if(!n[this.config.ui.name]){let e=De.W.get(De.i.UNDEFINED.id,"VASTPlayer: cannot find template for VPAID-UI");return o(e)}f=T(n[this.config.ui.name],{assetsPath:this.config.path+"/assets"})}this.config.ui.config.showAdChoicesIcon=0===this.config.adChoicesIconLocation,this.config.ui.config=this.config.ui.config||{},this.config.ui.config.clickthrough=u,r===xi.Y.VPAID&&(this.config.ui.config.vpaidUrl=e.url),this.config.ui.config.noAutoStop=p,this.ui&&this.ui.getContainer()&&(this.config.ui.config.container=this.ui.getContainer()),this.ui=new Ti(this.container,f,this.config.ui.config,g),m=this.ui.getVPAIDContainer(),this.smartPosition=new Wt(this.ui)}var A=new li(m,g);A.setWigo(this.wigo),A.load(a).then((i=>{for(var n in this.wigo.valid(3,0),this.config.ui?(this.ui.setVPAID(i),this.vpaidAd=this.ui):this.vpaidAd=i,this.vpaidAd.setWigo(this.wigo),s)try{var a=s[n];this.plugins[n]&&this.plugins[n].deinit(),this.plugins[n]=new a(this.container,this.config,this.vpaidAd,e,this.linearAd,{placementKey:this.placementKey,sumologicLogger:this.sumologicLogger,wigo:this.wigo,slotType:this.slotType,logger:this.logger,gdprIab:this.gdprIab,creativeSize:this.config.creativeSize}),this.plugins[n].init()}catch(e){this.logger.error("Could not initialize plugin "+n,e)}try{t(this.vpaidAd,h)}catch(e){let t=De.W.get(De.i.UNDEFINED.id,"loadMediaFile success callback failled "+e,e);o(t)}this.logger.info("loadMediaFile",xi.Y[r]),this.wigo.valid(2,3,xi.Y[r],"string")})).catch((e=>{let t=De.i.UNDEFINED.id;switch(e.id){case Ht.id:t=De.i.GENERAL.id;break;case zt.id:t=De.i.FILE_NOT_FOUND.id;break;case Gt.id:t=De.i.MEDIAFILE_TIMEOUT.id}const i=e.message||"vpaidloader error";o(De.W.get(t,i))}))}getPlugin(e){return this.plugins[e]}getPlugins(){return this.plugins}onVastError(e,t,i){const n=t.getId(),s=Vi.N.includes(n)?n:Vi.k.Undefined;(0,_e.oN)({placementKey:this.placementKey,sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,errorCode:s,errorCause:t.getMessage(),slotType:this.slotType,creativeSize:this.config.creativeSize,macros:[(0,Pi.SI)(0),(0,Pi.ly)(),(0,Pi.Qy)(r.c$.fromNullable(this.mediafile)),(0,Pi.p4)(r.c$.fromNullable(this.mediafile)),(0,Pi.Ez)(0)]}),e(t,i)}}Hi.MEDIAFILE_TIMEOUT_DELAY=15e3;const zi=Hi,Gi=new l.V("FunnelFormatSync"),ji=window.teads.tagManagerResourcesList||[];function qi(e,t){return r.c$.fromNullable(t.find((t=>t.tagManager===e)))}function Ki(e){return qi(e,ji).flatMap((({vastPlayer:e})=>e.flatMap((e=>r.c$.fromNullable(e.getMediafile()))))).map((()=>Qi(e))).getOrValue(!0)}function Qi(e){return(0,$t.qp)(e,ji)}function Yi({sumologicLogger:e,placementAd:t,linearAdWithFormatConfig:{linearAd:i,formatConfig:n},tagIsCampaignTag:s,tagManagerPackage:l,adCallTrackOpts:h,auctionId:u,viewerId:m,gdprIab:f}){const{placement:A}=t;if(A){A.getElectedSlot()&&function(e){if(!g.getDocument(e).getElementById(ue)){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id",ue),t.innerText=de()+he(),p.inject(t,g.getWindow(e))}}(A.getElectedSlot().getElement());const v=new zi(A.getPlayerContainer(),function(e,t){const i=r.c$.fromNullable(e).filter((e=>!e.adType.isVideo())).flatMap((0,a.Ay)((0,d.prop)("creativeSize"),r.c$.fromNullable));return{path:c.$.basePathUrl,type:e.allowedPlayer.getValue(),formatConfig:e,background:"transparent",vpaidApi:null,pageId:e.pageId,adType:e.adType.get(),auctionId:t,creativeSize:i,width:i.map((e=>e.width)).getOrNull(),height:i.map((e=>e.height)).getOrNull(),insertionId:kt(e.insertionId)}}(n,u.getOrNull()),A.slotType,A.wigo,f,A.key,e);v.setLinearAd(i);const b=function(e,t,i){return{name:"inread",config:{components:yt(e,i,t,Ct(t))}}}(n,i,A);v.setConfigUI(b),e.log(`Early-click: ${b.config.components.earlyclickoverlay.displayTime}, Ad-source-id: ${n.adSourceId}, Connection-id: ${n.connectionId}, Insertion-id: ${n.insertionId}, Auction-id: ${u}`,1e3);const{portfolioItemId:w,adType:y}=n;if(w&&y.isDisplay()){const e=v.getLinearAd();e.adParameters=o.D4(e.adParameters).map((e=>o.lF({...e,portfolioItemId:w}))).getOrElse((()=>e.adParameters))}l.match({some:i=>function({sumologicLogger:e,placementAd:t,formatConfig:i,vastPlayer:n,tagIsCampaignTag:s,tagManagerPackage:o,adCallTrackOpts:a,auctionId:l,viewerId:d,gdprIab:c}){const{tagManagerInstance:h,onFormatLoaded:u,done:p}=o;(function(e,t,i,n){ji.push({tagManager:e,placementAd:t,vastPlayer:(0,r.p2)(i),tagIsCampaignTag:n})})(h,t,n,s),h.logger.debug("load -> loadAd","ok"),h.wigo.setStatus(!0,"Ready to serve"),t.placement.initDom(t.placement.electedSlot),h.formatInstance=(0,r.p2)(Tt({instancesStore:window.teads.instances,placement:t.placement,formatConfig:i,vastPlayer:n,sumologicLogger:e,adCallTrackOpts:a,auctionId:l,viewerId:d})),h.formatInstance.forEach((s=>{const o=new Ut(t.placement,s,c);n.setVpaidApi(o),s.vpaidApi=o,s.load((()=>{Qi(h)?(h.logger.error("same ad detected"),(0,_e.N_)({placementKey:t.placement.key,sumologicLogger:e,logger:Gi,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:l,viewerId:d,slotType:t.placement.slotType,portfolioItemId:r.c$.fromNullable(i.portfolioItemId),insertionId:r.c$.fromNullable(i.insertionId),connectionId:r.c$.fromNullable(i.connectionId)}),s.close(5),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:r.c$.fromNullable(i.portfolioItemId),adCallTrackOpts:a,auctionId:l,viewerId:d})):(0,_e.Fv)({placementKey:t.placement.key,sumologicLogger:e,logger:Gi,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:l,viewerId:d,slotType:t.placement.slotType,portfolioItemId:r.c$.fromNullable(i.portfolioItemId),insertionId:r.c$.fromNullable(i.insertionId),connectionId:r.c$.fromNullable(i.connectionId)}),u(!0),p()}),(n=>{u(!1),Zi({sumologicLogger:e,formatConfig:i,placement:t.placement,auctionId:l,viewerId:d,vastExceptionId:n.getId()}),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:r.c$.fromNullable(i.portfolioItemId),adCallTrackOpts:a,auctionId:l,viewerId:d}),p()}))}))}({sumologicLogger:e,placementAd:t,formatConfig:n,vastPlayer:v,tagIsCampaignTag:s,tagManagerPackage:i,adCallTrackOpts:h,auctionId:u,viewerId:m,gdprIab:f}),none:()=>function({sumologicLogger:e,placementAd:t,formatConfig:i,vastPlayer:n,adCallTrackOpts:s,auctionId:o,viewerId:a,gdprIab:l}){t.placement.initDom(t.placement.electedSlot);const d=Tt({instancesStore:window.teads.instances,placement:t.placement,formatConfig:i,vastPlayer:n,sumologicLogger:e,adCallTrackOpts:s,auctionId:o,viewerId:a}),c=new Ut(t.placement,d,l);n.setVpaidApi(c),d.vpaidApi=c,d.load((()=>{(0,_e.Fv)({placementKey:t.placement.key,sumologicLogger:e,logger:Gi,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:o,viewerId:a,slotType:t.placement.slotType,portfolioItemId:r.c$.fromNullable(i.portfolioItemId),insertionId:r.c$.fromNullable(i.insertionId),connectionId:r.c$.fromNullable(i.connectionId)}),d.start()}),(n=>{Zi({sumologicLogger:e,formatConfig:i,placement:t.placement,auctionId:o,viewerId:a,vastExceptionId:n.getId()}),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:r.c$.fromNullable(i.portfolioItemId),adCallTrackOpts:s,auctionId:o,viewerId:a})}))}({sumologicLogger:e,placementAd:t,formatConfig:n,vastPlayer:v,adCallTrackOpts:h,auctionId:u,viewerId:m,gdprIab:f})})}else Gi.warn("Placement object is empty in placementAd, cannot loadAd",t)}const Zi=({sumologicLogger:e,formatConfig:t,placement:i,auctionId:n,viewerId:s,vastExceptionId:o})=>{const{pageId:r,pid:l,key:c,slotType:h,wigo:u,placementConfig:{headerBiddingProvider:p}}=i;(0,_e.MZ)({placementKey:c,sumologicLogger:e,wigo:u,logger:Gi,headerBiddingProvider:p,code:Vi.N.includes(o)?o:Vi.k.Undefined,pageId:r,placementId:l,auctionId:n,viewerId:s,slotType:h,portfolioItemId:(0,a.Lx)(t,(0,d.prop)("portfolioItemId"),Oe.rP),insertionId:(0,a.Lx)(t,(0,d.prop)("insertionId"),Oe.rP),connectionId:(0,a.Lx)(t,(0,d.prop)("connectionId"),Oe.rP)})}},2635:(e,t,i)=>{"use strict";i.d(t,{Ts:()=>h,VF:()=>d,iN:()=>c,o:()=>u,tP:()=>p});var n=i(4672),s=i(6051),o=i(2203),r=i(1299),a=i(5536);const l=new o.V("Format main");let d={};function c(){window.teads.instances=d={}}function h(){n.c$.fromNullable(window.teads.instances).forEach((e=>d=e))}function u(){for(let e in s.uB)if(s.uB.hasOwnProperty(e)&&d[e]&&d[e].length)for(;d&&d[e]&&d[e].length;){const t=d[e].pop();n.c$.fromNullable(t.getWigo()).forEach((e=>e.setStatus(!0,"Cleaned up"))),t.close(4)}}function p(){l.warn("teads.cleanup()"),a.uu.tryCatch((()=>{[".teads-inline-style","script.teads","iframe#teadsConsensu","#teadsusersync","#teads-format-css"].flatMap((e=>[...document.querySelectorAll(e)])).forEach(r.removeElementFromDOM),u(),delete window.teadsscript,setTimeout((()=>{for(const e in window.teads)window.teads.hasOwnProperty(e)&&"WIGO_DEBUG_KEY"!==e&&"FULL_LOGS"!==e&&delete window.teads[e]}),3e3)})).tapLeft((e=>l.error("Error when using cleanup()",e)))}},8275:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var n=i(2203),s=i(8681);const o=e=>((e,t,i)=>Math.min(Math.max(e,0),1))(e),r=(e,t,i=1e-4)=>Math.abs(e-t)<i;class a{constructor(e){this.config=e,this.lastInViewPercent=0,this.targetScrollY=0,this.targetTop=0,this.timeoutStartedAt=null,this.animationStartedAt=null,this.animationStarted=!1,this.update=()=>{this.slotTop=this.config.slot.getBoundingClientRect().top,this.inViewPercent=this.calculatePercent(),this.updateTarget(),this.canAnimate()&&(this.animationStarted||this.startAnimation(),this.animate())}}calculatePercent(){const e=(0,s.c$)(this.config.win),t=Math.abs(this.slotTop);return o((e-t)/e)}canAnimate(){if(this.animationStarted)return!0;const e=this.inViewPercent>=this.config.triggerAt&&this.inViewPercent<1,t=this.timeoutStartedAt&&Date.now()-this.timeoutStartedAt>=this.config.timeout;return e&&t}animate(){let e=o((Date.now()-this.animationStartedAt)/this.config.duration);r(e,1)&&(e=1,this.stopAnimation());const t=this.targetScrollY+e*this.targetTop;this.config.win.scrollTo({top:t,behavior:"auto"})}startAnimation(){this.animationStarted=!0,this.animationStartedAt=Date.now()}stopAnimation(){this.animationStarted=!1,this.timeoutStartedAt=null}updateTarget(){this.animationStarted||r(this.inViewPercent,this.lastInViewPercent)||(this.timeoutStartedAt=Date.now(),this.targetScrollY=this.config.win.scrollY,this.targetTop=this.slotTop),this.lastInViewPercent=this.inViewPercent}}var l=i(1299),d=i(7214),c=i(4077),h=i(4672),u=i(2768);const p=e=>`${e}px`;class g{static get isEnabled(){return g.enabled}constructor(e){this.format=e,this.logger=new n.V(`Interscroller[${Math.floor(1e3*Math.random())}]`),this.isLandscape=!1,this.onResize=()=>{const e=(0,s.Yg)(this.win);this.isLandscape!==e&&(this.isLandscape=e,(0,s.e3)()),this.format.responsive.resize(!0),this.setupPlayerContainer()},this.setupPlayerContainer=()=>{const e=this.format.playerContainer,t=e.querySelector(":scope > iframe");Object.assign(e.style,{left:p(-this.horizontalOffset),maxWidth:"none"}),t&&Object.assign(t.style,{maxWidth:"none"})},this.win=this.format.placement.placementConfig.parentWindow.getWindow()}enableBehavior(){this.logger.info("enableBehavior"),g.enabled=!0,this.magnet=new a({timeout:400,duration:200,triggerAt:.85,slot:this.format.playerContainer,win:this.win}),this.isLandscape=(0,s.Yg)(this.win),this.startLoop(),l.addEventListener("resize",this.win,this.onResize);const e=this.format.getVpaidAd();e.subscribe(this.setupPlayerContainer,d.A.AdSizeChange),e.subscribe(this.setupPlayerContainer,d.A.AdStarted),this.setupFixedBackgroundImage(),this.setupFixedBackgroundVideo(),this.setupParentContainer(),this.setupPlayerContainer(),this.format.responsive.resize(!0),this.validateIntegration()}startLoop(){const e=()=>{window.requestAnimationFrame(e),this.isLandscapeWithVerticalAd||this.magnet.update()};e()}get isLandscapeWithVerticalAd(){const e=this.format.player.getMediafile();return e.width/e.height<.8&&(0,s.Yg)(this.win)}get screenWidth(){return(0,s.r5)(this.win)}get screenHeight(){return(0,s.c$)(this.win)}get horizontalOffset(){return this.format.parentContainer.querySelector(":scope > div").getBoundingClientRect().left}setupFixedBackgroundImage(){const e=this.format.vpaidApi.fixedBackgroundImage;e.onLoad((()=>{e.resize=()=>{const t=e.getBaseContainer(),i=e.getFixedContainer(),n=e.getImage(),s=this.isLandscapeWithVerticalAd,o=s?0:this.screenWidth,r=s?0:this.screenHeight,a=o*(n.naturalHeight/n.naturalWidth);Object.assign(i.style,{width:p(o),height:p(r),top:"unset",bottom:p(0),left:p(0),backgroundSize:`${p(o)} ${p(a)}`,backgroundPosition:"center center"}),i.style.setProperty("background-repeat","no-repeat","important"),this.setupFixedBackgroundContainer(o,r,t)},e.resize()}))}setupFixedBackgroundVideo(){const e=this.format.vpaidApi.fixedBackgroundVideo;e.onLoad((()=>{e.resize=()=>{const t=e.getBaseContainer(),i=e.getVideo(),n=this.isLandscapeWithVerticalAd,s=n?0:this.screenWidth,o=n?0:this.screenHeight,r=s*(i.videoHeight/i.videoWidth);Object.assign(i.style,{width:p(s),height:p(r),top:"unset",bottom:p(o/2),left:p(0),transform:`translateY(${p(r/2)})`}),i.width=s,i.height=r,this.setupFixedBackgroundContainer(s,o,t)},e.resize()}))}setupFixedBackgroundContainer(e,t,i){Object.assign(i.style,{width:p(e),height:p(t),left:p(-this.horizontalOffset),maxWidth:"none"}),i.style.setProperty("-webkit-clip-path","inset(-1px 0px)","important"),i.style.setProperty("clip-path","inset(-1px 0px)","important")}setupParentContainer(){this.format.parentContainer.style.setProperty("overflow","visible")}validateIntegration(){const e=new c.Ay("https://s8t.teads.tv/logs/format/http-source",10,"1401",h.c$.of(this.format.placement.pid),{getSamplingThreshold:c.l4,sendLog:c.ll,getFullContext:u.getFullContext,isHeaderBiddingTag:()=>!1}),t=t=>{this.logger.info(t),e.info(`Interscroller: validateIntegration | ${t}`)},i=t=>{this.logger.error(t),e.error(`Interscroller: validateIntegration | ${t}`)},n=(e,t)=>Math.abs(e-t)<1,s=()=>{const e=this.screenHeight,t=this.format.playerContainer.getBoundingClientRect();n(t.left,0)||i(`playerBounds.left | expected 0 | actual ${t.left}`),n(t.height,e)||i(`playerBounds.height | expected ${e} | actual ${t.height}`)},o=()=>{const e=this.screenHeight,t=this.format.parentContainer.getBoundingClientRect();t.height<e&&i(`parentBounds.height | expected ${e} | actual ${t.height}`)},r=(e,t)=>{e.onLoad((()=>{const s=this.screenWidth,o=this.screenHeight,r=e.getBaseContainer().getBoundingClientRect();n(r.left,0)||i(`${t}Bounds.left | expected 0 | actual ${r.left}`),n(r.width,s)||i(`${t}Bounds.width | expected ${s} | actual ${r.width}`),n(r.height,o)||i(`${t}Bounds.height | expected ${o} | actual ${r.height}`)}))};this.format.getVpaidAd().subscribe((()=>{setTimeout((()=>{t("Impression"),this.isLandscapeWithVerticalAd?t("Skip validation because the device is in landscape"):(s(),o(),r(this.format.vpaidApi.fixedBackgroundImage,"fixedBackgroundImage"),r(this.format.vpaidApi.fixedBackgroundVideo,"fixedBackgroundVideo"))}),500)}),d.A.AdStarted)}}g.enabled=!1;const m=g},8681:(e,t,i)=>{"use strict";i.d(t,{Qo:()=>d,Yg:()=>c,Ym:()=>h,c$:()=>l,e3:()=>o,r5:()=>r});var n=i(2768);let s=0;function o(){s=0}function r(e){const t=e.screen?.availWidth??e.innerWidth,i=e.visualViewport?.width??e.innerWidth;return Math.min(t,i)}function a(e){const t=e.screen?.availHeight??e.innerHeight,i=e.visualViewport?.height??e.innerHeight;return Math.min(t,i)}function l(e){const t=a(e);return s=Math.max(s,t),s}function d(e){return{width:r(e),height:l(e)}}function c(e){return r(e)>a(e)}function h(){return!(0,n.isTablet)()&&!(0,n.isAmp)()&&!(0,n.isIABSafeFrame)()}},2375:(e,t,i)=>{"use strict";i.d(t,{F:()=>b});var n=i(6591),s=i(2768),o=i(1299),r=i(2190),a=i(2203),l=i(1586),d=i(4672),c=i(4461),h=i(8683),u=i(62),p=i(8275),g=i(8681),m=i(2955),f=i(1613),A=i(7214);const v=(0,s.isDesktop)()?.08:.15;class b{static findOptimalCreativeSizeBasedOnWindowSurface(e,t){const i=t.width*t.height*v,s=e.map(m.A.getRatio).getOrValue(n.Y),o=Math.sqrt(i/s);return{width:s*o,height:o}}constructor(e){if(this.abstractFormat=e,this.isLandscape=!1,this.logger=new a.V("Format.Responsive"),this.orientationChangeListeners=[],this.manualMaxWidth=!1,this.vpaidAd=e.getVpaidAd(),this.mainContainer=e.parentContainer,this.formatContainer=e.placement.getInnerContainer(),this.mediafile=e.player.getMediafile(),this.win=e.placement.placementConfig.parentWindow.getWindow(),this.linearAd=e.linearAd,this.portfolioItemId=e.formatConfig.portfolioItemId,this.resizeCallback=()=>{this.resize(),this.setResponsiveCssClass(this.mainContainer)},this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),A.A.AdError),this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),A.A.AdStopped),(0,s.isMobile)()||(0,s.isTablet)()){const e=e=>{const t=o.getWindowSize(this.win);this.isLandscape=t.width>t.height};e(),this.addOrientationChangeListener(e),this.setResponsiveCssClass(this.mainContainer),this.addOrientationChangeListener((()=>{this.isNativeFullscreen()&&this.resize()}));const t=e=>{this.win.setTimeout((()=>{this.onOrientationChange(e)}),200)};o.addEventListener("orientationchange",this.win,t),this.vpaidAd.subscribe((()=>{o.removeEventListener("orientationchange",this.win,t)}),A.A.AdStopped)}}updateAndResizeWithAdVideoMetadata(e){e.width&&e.height&&(this.mediafile.width!==e.width||this.mediafile.height!==e.height)&&(this.logger.debug("video size is different from VAST mediafile, force resize to good dimensions"),this.mediafile.width=e.width,this.mediafile.height=e.height,this.resize(!0))}resizeOnStart(){this.vpaidAd.subscribe((e=>{this.logger.debug("Receive metadata from video",e),this.updateAndResizeWithAdVideoMetadata(e)}),f.A.AdVideoMetadata),this.vpaidAd.subscribe((()=>this.resize(!0)),A.A.AdVideoStart),this.vpaidAd.subscribe((()=>this.resize(!0)),A.A.AdStarted)}setResponsive(e=this.resizeCallback){this.iframeForSlotWidth||(this.iframeForSlotWidth=document.createElement("iframe"),this.iframeForSlotWidth.className="teads-resize",this.iframeForSlotWidth.setAttribute("title","teads-resize"),this.iframeForSlotWidth.style.setProperty("height","0","important"),this.iframeForSlotWidth.style.setProperty("min-height","0","important"),this.iframeForSlotWidth.style.setProperty("width","100%","important"),this.iframeForSlotWidth.style.setProperty("border","none","important"),this.iframeForSlotWidth.style.setProperty("margin","0","important"),this.iframeForSlotWidth.style.setProperty("padding","0","important"),this.iframeForSlotWidth.style.setProperty("display","block","important")),this.abstractFormat.placement.getElectedSlot().getElement().appendChild(this.iframeForSlotWidth),o.addEventListener("resize",this.iframeForSlotWidth.contentWindow,(()=>e())),e()}unsetResponsive(){return!!this.iframeForSlotWidth?.parentNode&&(o.removeEventListener("resize",this.iframeForSlotWidth.contentWindow,this.resizeCallback),this.iframeForSlotWidth.parentNode.removeChild(this.iframeForSlotWidth),!0)}addOrientationChangeListener(e){this.orientationChangeListeners.includes(e)||this.orientationChangeListeners.push(e)}getOptimalDimension(e=this.mainContainer){if(p.A.isEnabled)return(0,g.Qo)(this.win);const t=!!this.abstractFormat.vpaidApi.getStudioData(),i={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()},n=o.getWindowSize(this.win),s=this.getContainerWidth(e),r=(0,h.Om)(this.portfolioItemId),a=t||r,u=m.A.getOptimalHeight(this.mediafile,s,a);return((e,t,i,n,s,o)=>{const r=e.orElse((()=>((e,t,i)=>{if(!t||e<=t)return d.NV;const n=t/e;return(0,d.p2)({width:n*i,height:t})})(i,n.height,s))).orElse((()=>((e,t,i,n,s)=>d.c$.fromNullable(n).filter((t=>t.width!==i||t.height!==e)).map((n=>({width:i,height:s?t.height:e}))))(i,n,s,t,o))).getOrValue(t);return{...r,width:Math.round(r.width),height:Math.round(r.height)}})(d.c$.fromNullable(this.abstractFormat.formatConfig).flatMap((0,c.Ay)((0,l.prop)("creativeSize"),d.c$.fromNullable)),i,u,n,s,this.isFullscreen())}getOptimalDimensionBasedOnSurface(){const e=o.getWindowSize(this.win),t=b.findOptimalCreativeSizeBasedOnWindowSurface(d.c$.fromNullable(this.mediafile),e),i={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()};return i.width===t.width&&i.height===t.height||(i.width=t.width,i.height=this.isFullscreen()?e.height:t.height),{width:Math.round(i.width),height:Math.round(i.height)}}resize(e=!1,t=this.mainContainer){const i=this.vpaidAd.getAdWidth(),n=this.vpaidAd.getAdHeight();this.setMaxWidth(t);const s=this.getOptimalDimension(t);if(this.isNativeFullscreen()||this.isFullscreen()&&e){const t=o.getWindowSize(this.win);n===t.height&&i===t.width||(this.logger.debug(`fullscreen resize from ${i}x${n} to ${t.width}x${t.height}  (forced: ${e})`),this.vpaidAd.resizeAd(t.width,t.height,"fullscreen"))}else(e||n!==s.height||i!==s.width)&&(this.repositionFormatContainer(s,t),this.logger.debug(`resize from ${i}x${n} to ${s.width}x${s.height} (forced: ${e})`),this.vpaidAd.resizeAd(s.width,s.height,this.isFullscreen()?"fullscreen":"normal"))}repositionFormatContainer(e,t=this.mainContainer){const i=this.getContainerWidth(t),n=e.width>=i?0:(i-e.width)/2;this.formatContainer.style.marginLeft=`${n}px`,this.formatContainer.style.marginRight=`${n}px`}isFullscreen(){return(0,r.hasClass)(this.vpaidAd.getMainComponentsContainer(),"fullscreen")}isNativeFullscreen(){return(0,r.isFullscreen)(this.win.document)}getContainerWidth(e=this.mainContainer){if(this.isFullscreen())return o.getWindowSize(this.win).width;{const t=this.win.getComputedStyle(e),i=t.getPropertyValue("width");if((0,l.isSizeInPx)(i))return Math.round(parseFloat(i));{const i=parseFloat(t.getPropertyValue("padding-left"))||0,n=parseFloat(t.getPropertyValue("padding-right"))||0;return Math.round(o.getBoundingClientRect(e).width-(i+n))}}}onOrientationChange(e){this.orientationChangeListeners.forEach((t=>t(e)))}setMaxWidth(e=this.mainContainer){if(this.isFullscreen())e.style.setProperty("max-width","none");else if(!e.style.getPropertyValue("max-width")||this.manualMaxWidth){const t=o.getBoundingClientRect(e),i=o.getBoundingClientRect(this.iframeForSlotWidth?.parentElement);e.style.setProperty("max-width",Math.round(i.width-Math.max(t.left-i.left,t.right-i.right))+"px"),this.manualMaxWidth=!0}}setResponsiveCssClass(e){const t=o.getBoundingClientRect(e).width;let i;Object.values(u.xp).forEach((n=>{var s,o;(0,r.removeClass)(e,n.className),t<=n.size&&(s=i,o=n.size,!s||s.size>o)&&(i=n)})),i&&(0,r.addClass)(e,i.className)}}},7434:(e,t,i)=>{"use strict";i.d(t,{Bx:()=>d,qp:()=>c});var n=i(4672),s=i(2203),o=i(4701),r=i(62);const a=new s.V("SameAd"),l={playedMediaFileUIDs:[]};function d(e,t){l.playedMediaFileUIDs=l.playedMediaFileUIDs.concat({tagManager:e,uid:u(t)})}function c(e,t){return(0,o.a)(e,t).match({some:h,none:()=>(a.warn("Could not find a matching TagManagerResources for this TagManager",e),!1)})}function h({tagIsCampaignTag:e,vastPlayer:t,tagManager:i}){const s=l.playedMediaFileUIDs.filter((o=i,e=>e.tagManager!==o&&o.pageId===e.tagManager.pageId)).map((e=>e.uid));var o;return t.flatMap((e=>n.c$.fromNullable(e.getLinearAd()?.mediaFiles))).match({some:t=>!e&&t.some((e=>function(e,t){return t.some((t=>t===u(e)))}(e,s))),none:()=>(a.debug("No player, or if any, no elected media file was found for this TagManager",i),!1)})}function u(e){return t=e.url,(t.match(r.lU)?.[1]??t)+(e.adParameters??"");var t}},9710:(e,t,i)=>{"use strict";var n=i(4701),s=i(7434),o=i(2635),r=i(9896);const a=r.KZ;a.instances=a.instances||o.VF,a.tagManagerResourcesList=n.fw,a.clearInstances=o.o,a.destroyPageRelatedVariables=o.iN,a.loadAd=n.s3,a.isNoAd=n.dV,a.isSameAd=s.qp,a.cleanup=o.tP;const l=r.KZ;l.helper=l.helper||{},window.teads=l,(0,o.Ts)()},1164:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(8898),s=i(9896);class o extends n.A{constructor(e=o.DEFAULT){super("VideoStart"),this.value=e,this.checkValue()}checkValue(){(0,s.Kg)(this.value)&&o.VALUES[this.value.toUpperCase()]||(this.value=o.DEFAULT)}isThreshold(){return this.value===o.VALUES.THRESHOLD}isClick(){return this.value===o.VALUES.CLICK}getValue(){return this.value}}o.VALUES={THRESHOLD:"threshold",CLICK:"click"},o.DEFAULT=o.VALUES.THRESHOLD;const r=o},3013:(e,t,i)=>{"use strict";i.d(t,{$:()=>s});var n=i(4672);const s=new class{constructor(e={}){this.protocol="https:",this.basePathUrl=`${this.protocol}//a.teads.tv/media/format/v3`,this.assetsUrl=`${this.basePathUrl}/assets`,this.richAdServerUrl=`${this.protocol}//a.teads.tv/page/{id}/ad`,this.buyingEngineUrl=`${this.protocol}//a.teads.tv/vast/get`,this.trackingUrl=`${this.protocol}//t.teads.tv/track`,this.userSyncUrl=`${this.protocol}//sync.teads.tv/iframe`,this.wigoIframeUrl=`${this.protocol}//sync.teads.tv/wigo-no-slot`,this.consensuIframeUrl=`${this.protocol}//cmp.teads.mgr.consensu.org/index.html`,this.isSumologicLogsEnabled=!0,this.isRichAdServerRequestEnabled=!0,this.isQA=!1,this.richAdServerRequestTimeout=5e3,this.timestampMacroNames=["[RANDOM]","[RANDOMNUM]","[TIMESTAMP]","[CACHE_BREAKER]","[CACHEBREAKER]","[CACHEBUSTING]","[CACHE_BUSTING]","[CACHEBUSTER]","[CACHE_BUSTER]"],this.refresh(e)}refresh(e={}){n.c$.fromNullable(e.ASSETS_URL).forEach((e=>{this.basePathUrl=e,this.assetsUrl=`${e}/assets`})),n.c$.fromNullable(e.RAS_URL).forEach((e=>this.richAdServerUrl=e)),n.c$.fromNullable(e.BE_URL).forEach((e=>this.buyingEngineUrl=e)),n.c$.fromNullable(e.TRACKING_URL).forEach((e=>this.trackingUrl=e)),n.c$.fromNullable(e.USER_SYNC_URL).forEach((e=>this.userSyncUrl=e)),n.c$.fromNullable(e.WIGO_IFRAME_URL).forEach((e=>this.wigoIframeUrl=e)),n.c$.fromNullable(e.SUMOLOGIC_ENABLED).forEach((e=>this.isSumologicLogsEnabled=e)),n.c$.fromNullable(e.WITH_RAS_REQUEST).forEach((e=>this.isRichAdServerRequestEnabled=e)),n.c$.fromNullable(e.IS_QA).forEach((e=>this.isQA=e)),n.c$.fromNullable(e.TEADS_CONSENSU_URL).forEach((e=>this.consensuIframeUrl=e))}}(window.teads)},6051:(e,t,i)=>{"use strict";i.d(t,{Hf:()=>r,N4:()=>l,QJ:()=>h,eW:()=>o,kQ:()=>p,tc:()=>u,uB:()=>s});var n=i(9896);const s={inread:"inread"},o={limitedCapabilities:"limitedCapabilities",placementCall:"placementCall",fallback:{integration:"passback-integration",noAd:"passback-noAd"},noSlot:{selector:"noSlot-selector",hbSelector:"hbNoSlot-selector",filter:"noSlot-filter",avoid:"noSlot-avoid",size:"noSlot-size",btf:"noSlot-BTF",minimum:"noSlot-minimum",minimumBelow:"noSlot-minimumBelow",content:"noSlot-content",position:"noSlot-position",videoArticle:"noSlot-videoArticle",videoSlot:"noSlot-videoSlot",imageSlot:"noSlot-imageSlot",safeFrame:"noSlot-safeFrame"},incompatibility:{browser:"incompatibility-browser",context:"incompatibility-context",format:"incompatibility-format",video:"incompatibility-video"},slotAvailable:"slotAvailable",hbSlotAvailable:"hbSlotAvailable",adReceived:"adReceived",adNotAvailable:{networkError:"adNotAvailable-networkError",serverError:"adNotAvailable-serverError"},adAvailable:{error:{parseTimeout:"adAvailable-error-parseTimeout",badResponse:"adAvailable-error-badResponse",vast:"adAvailable-error-vast-{code}",settings:"adAvailable-error-settings",sameAd:"adAvailable-error-sameAd"},success:"adAvailable-success"},adCall:"adCall",errorBeforeAdReached:"errorBeforeAdReached",adReached:"adReached",noAd:{serverError:"noAd-serverError",networkError:"noAd-networkError",vastError:"noAd-vastError-{code}",parseTimeout:"noAd-parseTimeout",settingsError:"noAd-settingsError",badResponse:"noAd-badResponse",sameAd:"noAd-sameAd",ivt:{doubleVerify:"noAd-ivt-doubleVerify",tag:"noAd-ivt-tag"},blockedSite:{doubleVerify:"noAd-blockedSite-doubleVerify",teads:"noAd-blockedSite-teads"}},impression:"impression",openExpand:"open-expand",open:"open",visible:"visible",click:"click",clickReplay:"click-replay",ivt:{doubleVerify:"IVT DoubleVerify",tag:"IVT Tag"},blockedSite:{doubleVerify:"BlockedSite DoubleVerify",teads:"Teads Blacklist"},warning:"warning"},r={placementCall:"f11",noSlot:"f21",incompatibility:"f22",slotAvailable:"f24",adReceived:"f30",adNotAvailable:"f31","adAvailable-error":"f32","adAvailable-success":"f33",adCall:"f41",errorBeforeAdReached:"f42",adReached:"f43",noAd:"f51"},a=(0,n.p8)(document.currentScript),l=e=>void 0!==window.teads.FLAVOR_CLASSIC_URL?window.teads.FLAVOR_CLASSIC_URL:"CarouselNurl"===e?c():d(),d=()=>null===a?"https://a.teads.tv/media/flavors/native.js":`https://a.teads.tv/static/${a}/media/flavors/native.js`,c=()=>null===a?"https://a.teads.tv/media/flavors/carousel.js":`https://a.teads.tv/static/${a}/media/flavors/carousel.js`,h="https://a.teads.tv/media/vpaid-display/teads-vpaid-display.js",u=()=>null===a?h:`https://a.teads.tv/static/${a}/media/vpaid-display/teads-vpaid-display.js`,p="teads_internal_passback_no_passback"},7354:(e,t,i)=>{"use strict";i.d(t,{M9:()=>R,Qd:()=>k,Ts:()=>w,VN:()=>E,bM:()=>T,ho:()=>I,nT:()=>S,ob:()=>M,uH:()=>y,yx:()=>V});var n=i(2203),s=i(2768),o=i(7812),r=i(1586),a=i(9896),l=i(2052),d=i(4672);const c=4/3;let h,u,p,g,m,f,A=[];const v=new n.V("helper.Amp");let b={noContentAvailable:!1,renderStart:!1,reportRenderedEntityIdentifier:!1};function w(){!s.isAmp()||!P()||m&&h&&window._teads_amp?.change.rootBounds.width===m.width||(m=P().rootBounds,u=s.isDesktop()?window.innerWidth:Math.min(Math.min(m.width,m.height),window.innerWidth),u!==window.innerWidth&&(u-=2*window.context?.initialIntersection.boundingClientRect.left),h||(window.context?.onResizeDenied(((e,t)=>_(e,t,!1))),window.context?.onResizeSuccess(((e,t)=>_(e,t,!0))),P().boundingClientRect.height>10&&(E(),o.A.error("AMP tag malformed "+window.context?.location.href)),h=!0),2!==g&&2!==p||I())}function y(e=(()=>{}),t=!1){p=0,h&&L(0,e,p,t)}function E(e=(()=>{}),t=!1){p=1,h&&L(1,e,p,t)}function I(e=null,t=(()=>{}),i=!1){p=2,h&&L(e??C(),t,p,i)}function C(){return Math.ceil(u/c)}function S(){return 2===g}function k(e){let t="teads-";e?(t+=e.id?e.id:"0",t+="-",t+=e.creativeId?e.creativeId:"0"):t+="0",f=t}function T(){if(window.context&&(0,r.isFunction)(window.context.renderStart)&&!b.renderStart){b.renderStart=!0;let e={height:C(),width:u};v.debug("renderStart",e),window.context.renderStart(e)}}function V(){if(f&&window.context&&(0,r.isFunction)(window.context.reportRenderedEntityIdentifier)&&!b.reportRenderedEntityIdentifier){b.reportRenderedEntityIdentifier=!0;let e=`teads-${f}`;v.debug("reportRenderedEntityIdentifier",e),window.context.reportRenderedEntityIdentifier(e)}}function P(){return window._teads_amp?.change&&window.context?.initialIntersection?window._teads_amp.change:null}function L(e,t,i,n){!function(e,t){s.isAmp()&&window.context?.requestResize&&h&&(A.push({width:u,height:e,done:!1,callback:t}),window.context.requestResize(u,e),v.warn("amp request resize",u,e))}(e,(s=>{let o="function"==typeof n?n():n;s||o?(p=null,g=s?i:null,t(s),S()&&V()):p===i&&setTimeout((()=>L(e,t,i,o)),100)}))}function x(e,t,i){return e>=t-i&&e<=t+i}function _(e,t,i){A.forEach((n=>{x(e,n.height,2)&&x(t,n.width,2)&&!n.done&&(n.done=!0,n.callback(i))})),i?v.warn("amp request resize success",t,e):v.error("amp request resize denied",t,e)}const N=e=>(0,a.Gv)(e)&&function(e){return"accepted"===e.consentStateValue||"rejected"===e.consentStateValue}(e)&&(0,a.Kg)(e.consentString)?(0,d.p2)(e.consentString):d.NV,R=()=>{const e=(0,l.g)(window.context?.initialConsentMetadata?.consentStringType);return d.c$.fromNullable(window.context?.initialConsentValue).orElse((()=>N(window.context?.consentSharedData))).map((t=>({status:12,reason:127,consent:t,apiVersion:e,cmpId:void 0}))).getOrValue({status:25,reason:250,consent:"",apiVersion:void 0,cmpId:void 0})},O=e=>3===e.initialConsentMetadata?.consentStringType,D=e=>/^[1-9][YN-]{3}$/.test(e),M=e=>{const t=e.flatMap((e=>d.c$.fromNullable(e.initialConsentValue))).orElse((()=>e.flatMap((e=>N(e.consentSharedData)))));return e.filter(O).flatMap((()=>t)).orElse((()=>t.filter(D)))}},258:(e,t,i)=>{"use strict";i.d(t,{$:()=>o,S:()=>r});var n=i(4672);const s=120;function o(e){return n.c$.fromNullable(e.message).getOrElse((()=>JSON.stringify(e))).substr(0,s)}function r(e){return n.c$.fromNullable(e.getFullMessage()).getOrElse((()=>JSON.stringify(e))).substr(0,s)}},667:(e,t,i)=>{"use strict";i.d(t,{CQ:()=>f,Gd:()=>p,KK:()=>m,NG:()=>g,dL:()=>n,m_:()=>u,zF:()=>s});var n,s,o=i(9896),r=i(2190),a=i(2203);!function(e){e.Global="global",e.PostMessage="post-message"}(n||(n={})),function(e){e.ExcludeWithGlobale="exclude-with-globale-before-RAS",e.ExcludeWithPostMessage="exclude-with-post-message-before-RAS",e.PostMessageAfterRAS="post-message-received-after-RAS",e.ExcludeAfterRAS="exclude-after-RAS",e.EffectiveCollision="effective-collision"}(s||(s={}));const l=new a.V("helper.ExclusivityPixelInfo");let d=[],c=null,h=!1;const u=()=>{const e=(0,r.findTopWindow)(document.body);try{d=e.teads.exclusivity.badv.domains,c=n.Global}catch(e){l.debug("cant access to globale teads.exclusivity.badv.domains and get the error: ",e),new Promise(((e,t)=>{const i=t=>{try{const s=JSON.parse(t.data)??null;n=s,(0,o.Gv)(n)&&n.hasOwnProperty("exclusivity")&&(e(s.exclusivity.badv.domains),window.removeEventListener("message",i))}catch{}var n};window.addEventListener("message",i);try{window.top.postMessage("teads-get-exclusivity-pixel-info","*")}catch(e){window.removeEventListener("message",i),t(e)}})).then((e=>{d=e,c=n.PostMessage}))}},p=()=>d,g=()=>c,m=e=>{h=e},f=()=>h},4724:(e,t,i)=>{"use strict";i.d(t,{N4:()=>l,Ts:()=>b,VN:()=>I,ZV:()=>y,c0:()=>w,ho:()=>E});var n=i(2203),s=i(1068),o=i(2768),r=i(9896),a=i(7812);let l,d=0;const c=new n.V("helper.IABSafeFrame");let h,u=[];const p=[],g=[],m=[];let f,A,v;function b(){let e=(0,o.isIABSafeFrame)()?(v=(0,o.getIABSafeFrameWindow)(),(0,r.b0)(v)?"IABSafeFrame window not found":v.$sf.ext.geom?(l=v.$sf.ext.geom())?v.$sf.ext.supports?void 0:"window.$sf.ext.supports not present":"window.$sf.ext.geom() return falsy value":"window.$sf.ext.geom not present"):"not in IABSafeFrame context";if(e)return c.error("init","failed",e),a.A.error("SF "+e),e;f=new s.C;const t=l.self.w;return v.$sf.ext.register(t||v.innerWidth,1,((e,t)=>function(e,t){switch(c.debug("event received",e,t),e){case"expanded":case"collapsed":case"failed":h&&h.callback&&h.callback(e),h=null,C();break;case"geom-update":"focus-update"===t?.cmd?g.forEach((e=>e(t))):p.forEach((e=>e(t)));break;case"focus-change":g.forEach((e=>e(t)));break;case"cmpReturn":m.forEach((e=>e(t)))}}(e,t))),c.debug("init - register (width-innerWidth-geom)",t,v.innerWidth,l),w((()=>l=v.$sf.ext.geom())),e}function w(e){const t=p.push(e);return()=>p[t-1]=()=>{}}function y(e=(()=>{})){c.debug("initSlot"),0===v.innerWidth?(c.debug("initSlot - window.innerWidth=0 so wait for resize"),k(e)):1===l.self.w&&1===l.self.h?function(e){if(v.$sf.ext.supports()["exp-push"]){c.debug("initSlot - 1x1 detected - need to wait to get the slot width available");const t=()=>{c.debug("initSlot - 1x1 detected - expand available - get width"),C({name:"initial expand",action:()=>v.$sf.ext.expand({r:l.exp.r,push:!0}),callback:t=>{const i="expanded"===t;d=i?1:0,i?(A=l.exp.r,c.debug("initSlot - 1x1 detected - initial expand done - width",A),e()):(c.error("initSlot - 1x1 detected - initial expand refused"),k(e))}})};if(l.exp.r)t();else{const e=w((()=>{l.exp.r&&(e(),t())}))}}else c.error("initSlot - 1x1 detected - but exp-push not supported"),k(e)}(e):e()}function E(e,t=(()=>{})){let i=e=>C({name:"open "+e,action:()=>v.$sf.ext.expand({b:e,r:A,push:!0}),callback:e=>{let i="expanded"===e;d=i?2:0,t(i)}}),n=l.self.h,s=e-n;2!==d&&s>0?v.$sf.ext.supports()["exp-push"]?s<=l.exp.b?(c.debug("open (askedHeight - currentHeight - allowed - requiredHeight)",e,n,l.exp.b,s),1===d?(c.debug("open - slot already open by init - close it before"),I((()=>{let e=Math.min(Math.floor(v.$sf.ext.geom().exp.b),s);i(e)}))):i(s)):(c.debug("open not allowed (askedHeight - currentHeight - allowed - requiredHeight)",e,n,l.exp.b,s),t(!1)):(c.error("open failed - exp-push not supported"),k((()=>t(!0))),t(!1)):(c.debug("already open (askedHeight - currentHeight - requiredHeight)",e,n,s),t(!0))}function I(e=(()=>{})){0!==d?(c.debug("close"),C({name:"close",action:()=>v.$sf.ext.collapse(),callback:()=>e(!0)}),d=0):e(!0)}function C(e){e&&(c.debug("processRequest add to list",e.name),u.push(e)),!h&&u.length&&(h=u.shift(),c.debug("processRequest - process",h.name),h.action())}function S(e,t){return e>=10&&t>=10}function k(e){c.debug("wait for auto expand");const t=e=>e.forEach((e=>e())),i=(t,i)=>{c.debug(`slot has auto expanded with w: ${t}, h: ${i}`),d=2,e()};if(S(window.innerWidth,window.innerHeight))i(window.innerWidth,window.innerHeight);else{const e=w((()=>{S(l.self.w,l.self.h)&&(t([e,n]),i(l.self.w,l.self.h))})),n=()=>f.remove("resize");f.add("resize",v,(()=>{S(window.innerWidth,window.innerHeight)&&(t([e,n]),i(window.innerWidth,window.innerHeight))}))}}},6463:(e,t,i)=>{"use strict";i.d(t,{Q:()=>l,Y:()=>a});var n=i(4672),s=i(2768),o=i(4724),r=i(1068);const a=(e,t,i)=>{const a={eventListenerManager:n.NV,unlistenAmp:n.NV};return(0,s.isIABSafeFrame)()?o.c0((()=>e(new Event("touchmove")))):(0,s.isAmp)()?a.unlistenAmp=n.c$.fromNullable(i.observeIntersection((t=>e(new Event("touchmove"))))):(a.eventListenerManager=n.c$.fromNullable(new r.C),a.eventListenerManager.forEach((i=>i.add("scroll",t,(t=>e(t))))),a.eventListenerManager.forEach((i=>i.addMultiple(["touchstart","touchmove","touchend"],t,(t=>e(t)))))),a},l=e=>{e.unlistenAmp.forEach((e=>e())),e.eventListenerManager.forEach((e=>e.removeAll()))}},5300:(e,t,i)=>{"use strict";i.d(t,{J:()=>p,u:()=>u});var n=i(1120),s=i(1299),o=i(2203),r=i(2190),a=i(3013),l=i(5536);const d=new o.V("helper.WigoIframe"),c="wigoiframe";let h;function u(){return l.uu.tryCatch((()=>(0,r.findTopWindow)(window.document.body))).orElse((e=>(d.warn("Cannot get top window",e),(0,l.wV)(window)))).forEach((e=>{h=(0,r.createIframe)("wigo-helper"),h.id=c,h.src=a.$.wigoIframeUrl,h.style.setProperty("display","none","important"),e.document.body.appendChild(h)})),h}function p(){const e=n.L2.getInstances();e.sort(((e,t)=>s.getBoundingClientRect(e.elementToFollow).top-s.getBoundingClientRect(t.elementToFollow).top));let t=e.length;e.forEach((e=>{e.moveButton(t),t--}))}},8898:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(2203),s=i(6647);class o{constructor(e){if(this.logger=new n.V("option."+e),!e)throw new s.J(s.J.OPTION_NAME_REQUIRED)}}},9231:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>AbstractSelector});var funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8898);class AbstractSelector extends funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__.A{constructor(e){super(e),this.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"}}checkScreenSelector(screen,win){let selectedScreenSelector=null;const currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return screen.split("+").forEach((screenSelector=>{if(this.screenSizes[screenSelector])try{const screenSelectorPattern=this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,""+currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(e){this.logger.warn("screenSelector eval has failed")}})),selectedScreenSelector}}},8625:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(8898),s=i(9896);class o extends n.A{constructor(e=o.DEFAULT){super("ImageFilter"),this.value=e,this.checkValue()}checkValue(){(0,s.Kg)(this.value)||(this.value=o.DEFAULT)}get(){return this.value}}o.VALUES={DISABLED:"disabled",SLOT:"slot"},o.DEFAULT=o.VALUES.DISABLED;const r=o},9169:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Selector});var funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8898),common_FormatException__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6647),common_Context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2768),common_Dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1299),common_HTMLHelper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2190),_teads_shared__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9896),funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(635);class Selector extends funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__.A{constructor(e,t){if(super("Selector"),this.value=e,this.win=t,this.default=null,this.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"},!t)throw new common_FormatException__WEBPACK_IMPORTED_MODULE_1__.J(common_FormatException__WEBPACK_IMPORTED_MODULE_1__.J.OPTION_PARENTWINDOW_INVALID);this.checkValue()}checkValue(){(0,_teads_shared__WEBPACK_IMPORTED_MODULE_5__.Kg)(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isNodeList(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isISlotSelector(this.value,this.screenSizes)||(this.value=this.default)}get(){return this.value}getSlots(){const e=[];let t=this.value;if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isISlotSelector(this.value,this.screenSizes)){let e;for(const i in this.value)if(this.value.hasOwnProperty(i)&&(e=this.checkScreenSelector(i,this.win),e)){t=this.value[i];break}e?this.logger.debug("Slot",e,"selected:",t):this.logger.warn("Slots by device not found: ",this.value)}if((0,_teads_shared__WEBPACK_IMPORTED_MODULE_5__.Kg)(t)&&t){let i=[];common_HTMLHelper__WEBPACK_IMPORTED_MODULE_4__.findAllWindows(document.body).forEach((e=>{(0,_teads_shared__WEBPACK_IMPORTED_MODULE_5__.Kg)(t)&&(i=i.concat(common_Dom__WEBPACK_IMPORTED_MODULE_3__.querySelectorAll(t,e)))}));for(let t=0;t<i.length;t++)e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_6__.A(i[t],t))}else if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement(t))e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_6__.A(t));else if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isNodeList(t))for(let i=0;i<t.length;i++)e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_6__.A(t[i],i));return e.length||!(0,common_Context__WEBPACK_IMPORTED_MODULE_2__.isAmp)()&&!(0,common_Context__WEBPACK_IMPORTED_MODULE_2__.isIABSafeFrame)()||e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_6__.A(this.win.document.body)),e}checkScreenSelector(screen,win){let selectedScreenSelector=null;const currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return screen.split("+").forEach((screenSelector=>{if(this.screenSizes[screenSelector])try{const screenSelectorPattern=this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(e){this.logger.warn("screenSelector eval has failed")}})),selectedScreenSelector}}},171:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(8898),s=i(9896);class o extends n.A{constructor(e=o.DEFAULT){super("VideoFilter"),this.value=e,this.checkValue()}checkValue(){(0,s.Kg)(this.value)||(this.value=o.DEFAULT)}get(){return this.value}}o.VALUES={DISABLED:"disabled",ARTICLE:"article",SLOT:"slot"},o.DEFAULT=o.VALUES.DISABLED;const r=o},635:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1299),s=i(6591),o=i(7365);class r{constructor(e,t=0){this.isSizeResolved=!1,this.scoreValues={WIDTH:20,HEIGTH:20,LENGTH:20,HIGH_MIN_SLOT:-5,LOW_MIN_SLOT:500,EQUAL_MIN_SLOT:1e3},this.element=e,this.index=t;const i=n.getSize(e);this.width=i.width,this.height=i.height}resolveSize(){if(!this.isSizeResolved){let e=this.element.style.overflow;this.element.style.setProperty("overflow","hidden");const t=n.getSize(this.element);this.element.style.setProperty("overflow",e),this.width=t.width,this.height=t.width/s.Y,this.isSizeResolved=!0}}getElement(){return this.element}getElementRect(){return this.elementRect||(this.elementRect=n.getBoundingClientRect(this.element)),this.elementRect}getWidth(){return this.width}getHeight(){return this.height}getScore(){return this.score}getIndex(){return this.index}computeScore(e){let t=o.T2,i=0,s=e.minimum.get(),r=e.parentWindow.getWindow();this.width>e.minimumWidth.get()+t.WIDTH_MARGIN&&(i+=this.scoreValues.WIDTH),this.height>t.MIN_LONG_HEIGHT+t.HEIGHT_MARGIN&&(i+=this.scoreValues.HEIGTH),this.height>e.minimumTextLength.get()+t.LENGTH_MARGIN&&(i+=this.scoreValues.LENGTH),this.index>s+t.LENGTH_MARGIN?i+=this.scoreValues.EQUAL_MIN_SLOT:this.index>=0&&s?i+=this.scoreValues.HIGH_MIN_SLOT:i+=this.scoreValues.LOW_MIN_SLOT;let a=n.getBoundingClientRect(this.getElement()),l=r.document.body||r.document.documentElement;i-=(a.top+(r.pageYOffset||l.scrollTop))/20,this.score=i}}},7365:(e,t,i)=>{"use strict";i.d(t,{or:()=>z,Ne:()=>H,T2:()=>q,q3:()=>Z});var n=i(1299),s=i(5490),o=i(5536),r=i(2203),a=i(6051);class l{static findArticle(e,t,i,s){i.length=0,i.currentScore=0,i.childrenScore=0,i.isOverMinimumWidth=!1;const o=e.innerText||e.textContent||e.nodeValue,r=e.nodeName.toUpperCase();if(o&&(3===e.nodeType||l.textNodes[r]))i.length=o.replace(/\s+/g," ").length;else if(e===t.document.body||1===e.nodeType&&l.nodeScores[r]){let s=0,o=0;for(let r=0,a=e.childNodes.length;r<a;r++){const a=l.findArticle(e.childNodes[r],t,i);s+=a.length,o+=a.currentScore,(a.isOverMinimumWidth||n.getSize(e).width>=l.MINIMUM_WIDTH)&&(i.isOverMinimumWidth=!0)}i.currentScore=s,i.childrenScore=o}if(i.childrenScore&&i.isOverMinimumWidth&&i.childrenScore>l.MINIMUM_CHARS){const t=l.nodeScores[r]||0,n=e.className.split(" ");let o,a=1;for(let e=0,t=n.length;e<t;e++)o=n[e].replace(/^\s+|\s+$/g,""),a+=l.classBonuses[o]||0;let d=1;for(let t in l.attributeBonuses)if(l.attributeBonuses.hasOwnProperty(t)){const i=l.attributeBonuses[t],n=void 0===i.value&&void 0!==e.getAttribute(t),s=i.value===e.getAttribute(t);(n||s)&&(d+=i.bonus||0)}const c=i.childrenScore*t*a*d;c>i.article.score&&(i.article.score=c,i.article.node=e,s&&s.debug("found a better node scoring ",i.article.score,i.article.node))}return i}constructor(e){this.win=e,this.logger=new r.V("helper.SmartSlot")}find(){this.logger.info("Auto slot is finding a slot");const e=l.findArticle(this.win.document.body,this.win,{length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}},this.logger);return e.article&&e.article.node?this.findParagraph(e.article.node):null}findParagraph(e){let t;const i=["P","DIV"];for(let n=0;n<i.length&&(t=e.getElementsByTagName(i[n]),!t.length);n++);return t}}l.MINIMUM_SCORE=5e3,l.MINIMUM_CHARS=500,l.MINIMUM_WIDTH=200,l.nodeScores={DIV:10,P:4,ARTICLE:20,SECTION:5,SPAN:2,FORM:4,STRONG:2,EM:3,B:1,I:1,U:1,MAIN:2},l.textNodes={SPAN:!0,STRONG:!0,EM:!0,B:!0,I:!0,U:!0},l.classBonuses={article:4,"ob-text":6,"ob-section-html":4,contenuArticle:6},l.attributeBonuses={itemprop:{value:"articleBody",bonus:1e3}};var d=i(635),c=i(8997);function h(e,t,i){if(c.J("teadsDebugInPage").toOption().existsIf((e=>"true"===e))){var n=document.createElement("div");n.setAttribute("id","teadsGhostAvoid"),n.style.position="absolute",n.style.top=t.top+"px",n.style.bottom=t.bottom+"px",n.style.left=t.left+"px",n.style.right=t.right+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.background="rgba(255, 0, 0, 0.10)",n.style.pointerEvents="none",n.style.color="#F79C9C",n.style.zIndex="9999",n.style.padding="10px",n.innerText="avoidSlot",i.document.body.appendChild(n),e.style.backgroundColor="rgba(255, 0, 0, 0.20)"}}const u=e=>z(a.eW.noSlot.avoid,e),p=(0,s.A)(((e,t,i)=>{const n=e.avoid.getSlots();if(n){const t=i.getElementRect();let s=0;for(const o of n){if(i.getElement()===o.getElement())return u("AvoidSlot === Slot");const n=o.getElementRect(),r=e.avoid.getDistance(),a={top:n.top-r,left:n.left-r,bottom:n.bottom+r,right:n.right+r,height:n.height+2*r,width:n.width+2*r};if(h(o.getElement(),a,e.parentWindow.getWindow()),t.top!==t.bottom){const e={x:Math.max(0,Math.min(t.right,a.right)-Math.max(t.left,a.left)),y:Math.max(0,Math.min(t.bottom,a.bottom)-Math.max(t.top,a.top))};if(s=e.x*e.y,s)return u(`Avoid - ${Math.ceil(s)}px2`)}else if(t.top>a.top&&t.top<a.bottom)return u("Avoid - slot inside avoid area")}}return H(i)})),g=(0,s.A)(((e,{scrollTop:t,waterline:i},n)=>{if(!e.btf.isEnabled())return H(n);const s=n.getElementRect();e.belowSelector.get()&&e.belowSelector.getFirstElement()&&(i=Math.max(i,e.belowSelector.getFirstElementRect().bottom));const o=t+(e.insertBefore.isEnabled()?s.top:s.bottom);return o>=i?H(n):z(a.eW.noSlot.btf,`lineToCheck: ${Math.round(o)}px >= waterline: ${i}px`)}));var m=i(4672);const f=["P","DIV","BR"],A=(0,s.A)(((e,t,i)=>{const n=i.getElement();return m.c$.fromNullable(n.children).orElse((()=>m.c$.fromNullable(n.childNodes))).filter((e=>e.length>0)).match({some:e=>{const t=[...e].find((e=>f.includes(e.nodeName)));return t?z(a.eW.noSlot.content,t.nodeName):H(i)},none:()=>H(i)})})),v=(0,s.A)(((e,{elements:t},i)=>{i.resolveSize();const n={i:i.getIndex(),elt:i.getElement(),elts:t.map((e=>e.getElement())),wrappedSizes:{width:i.getWidth(),height:i.getWidth()/16*9}};return e.filter.trigger(n)?H(i):z(a.eW.noSlot.filter)}));var b=i(6591);const w=(0,s.A)(((e,{beforeHeightCheck:t,afterHeightCheck:i},s)=>{const o=650/b.Y,r=t(s);if(!n.isHTMLElement(r))return z(a.eW.noSlot.position);r.style.setProperty("height","0"),r.style.setProperty("text-align","center"),""===r.style.getPropertyValue("max-width")&&r.style.setProperty("max-width","100%"),r.offsetLeft;const l=r.offsetTop;r.style.setProperty("overflow","hidden"),r.offsetLeft;const d=r.offsetTop;r.style.setProperty("margin-top",.33*o+"px"),r.offsetLeft;const c=r.offsetTop;r.style.setProperty("margin-top","0");const h=Math.abs(l-d)<8&&Math.abs(l-c)<.33*o+8;return i(r),h?H(s):z(a.eW.noSlot.position,"Check height failed")}));function y(e,t=window){let i=["video","embed"].includes(e.tagName.toLowerCase());if(!i){const t=e.getAttribute("src");i=!!t&&C(t)}return i||(i=n.querySelectorAll("video",t,e).length>0),i||(i=n.querySelectorAll("[src]",t,e).map((e=>e.getAttribute("src"))).filter(C).length>0),i}function E(e,t=window){let i=null;const n=l.findArticle(t.document.body,t,{length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}});return n?.article?.node&&(i=I(e,n.article.node,0)),i||(i=e.parentElement),y(i,t)}function I(e,t,i){if(!e||10===i)return;const n=e.parentElement;return n===t?n:I(n,t,i+1)}function C(e){return/youtube|youtu\.be|dailymotion|day\.ly|vimeo|instagram|vine-videos/i.test(e)}function S(e=[]){return Array.prototype.slice.call(e).map((e=>n.getSize(e).width)).filter((e=>e>75)).length>0}function k(e,t=0){if(!e||3===t)return e;const i=e.previousElementSibling;return i&&!n.isEmpty(i)?i:k(i,t+1)}function T(e,t=0){if(!e||3===t)return e;const i=e.nextElementSibling;return i&&!n.isEmpty(i)?i:T(i,t+1)}var V=i(8625);const P=(0,s.A)(((e,t,i)=>{const s=e.parentWindow.getWindow();return e.imageFilter.get()===V.A.VALUES.SLOT&&function(e,t=window){if(!e)return!1;let i,s=!1;if("img"===e.tagName.toLowerCase()?s=S([e]):(i=n.querySelectorAll("img",t,e),s=S(i)),!s){const o=k(e);o&&("img"===o.tagName.toLowerCase()?s=S([o]):(i=n.querySelectorAll("img",t,o),s=i.length>0&&S(i)))}if(!s){const o=T(e);o&&("img"===o.tagName.toLowerCase()?s=S([o]):(i=n.querySelectorAll("img",t,o),s=i.length>0&&S(i)))}return s}(i.getElement(),s)?z(a.eW.noSlot.imageSlot,"slot is too close to an image"):H(i)})),L=(0,s.A)(((e,t,i)=>{const n=i.getIndex()+1,s=e.minimum.get();return n>=s?H(i):z(a.eW.noSlot.minimum,`slot: ${n} < config: ${s}`)})),x=(0,s.A)(((e,{elements:t},i)=>{if(!e.belowSelector.get()||null===e.minimumBelow.get())return H(i);const n=e.belowSelector.getFirstNodeBelowIndex(t),s=i.getIndex();return s>=e.minimumBelow.get()+n-1?H(i):z(a.eW.noSlot.minimumBelow,`slot: ${s} < config: ${e.minimumBelow.get()}`)})),_=(0,s.A)(((e,{scrollTop:t},i)=>{if(!e.selector.get())return H(i);const n=i.getElementRect().top;return n+t>=q.MIN_POSITION_TOP&&n+t<=q.MAX_POSITION_TOP?H(i):z(a.eW.noSlot.position,`positionTop: ${q.MIN_POSITION_TOP} <= ${n+t} <= ${q.MAX_POSITION_TOP}`)}));var N=i(2768),R=i(4724);const O=(0,s.A)(((e,t,i)=>{if((0,N.isIABSafeFrame)()){const e=R.Ts();return e?z(a.eW.noSlot.safeFrame,e):H(i)}return H(i)})),D=(0,s.A)(((e,t,i)=>{if(i.resolveSize(),n.isSelfClosingTag(i.getElement()))return H(i);const s={">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t};return[{name:"minimumHeight",property:i.getHeight(),score:q.MIN_LONG_HEIGHT,operator:">="},{name:"minimumWidth",property:i.getWidth(),score:e.minimumWidth.get(),operator:">="},{name:"maximumHeight",property:i.getHeight(),score:q.MAX_LONG_HEIGHT,operator:"<="},{name:"maximumWidth",property:i.getWidth(),score:e.maximumWidth.get(),operator:"<="}].reduce(((e,t)=>e.flatMap((()=>(({name:e,property:t,score:n,operator:o})=>s[o](t,n)?H(i):z(a.eW.noSlot.size,`${e}: ${t} ${o} ${n}`))(t)))),H(null))})),M=(0,s.A)(((e,t,i)=>{const s=i.getElement(),o=[];n.getTextContent(s,o);const r=o.join("");return n.isSelfClosingTag(s)||r.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").length>=e.minimumTextLength.get()?H(i):z(a.eW.noSlot.content)}));var B=i(171);const F=(0,s.A)(((e,t,i)=>{const n=e.parentWindow.getWindow();if(e.videoFilter.get()===B.A.VALUES.SLOT){if(function(e,t=window){if(!e)return!1;let i=y(e,t);if(!i){const n=k(e);n&&(i=y(n,t))}if(!i){const n=T(e);n&&(i=y(n,t))}return i}(i.getElement(),n))return z(a.eW.noSlot.videoSlot,"slot is too close to a video")}else if(e.videoFilter.get()===B.A.VALUES.ARTICLE&&E(i.getElement(),n))return z(a.eW.noSlot.videoSlot,"slot container (article) has a video");return H(i)}));var U=i(1802);class $ extends o.uu{constructor(e){super(e,"right")}}class W extends o.uu{constructor(e){super(e,"left")}}function H(e){return new $({slot:e})}function z(e,t){return new W({reason:e,information:t})}const G=new r.V("SlotChecker"),j={btf:g,minimum:L,minimumBelow:x,height:w,avoid:p,size:D,filter:v,positionTop:_,textLength:M,children:A,video:F,image:P,safeFrame:O},q={MIN_POSITION_TOP:100,MAX_POSITION_TOP:18e3,MIN_LONG_HEIGHT:30,MAX_LONG_HEIGHT:2e3,WIDTH_MARGIN:40,HEIGHT_MARGIN:20,LENGTH_MARGIN:150,LEVEL_POSITION:200};function K(e,t,i){return"inread"===e&&t?[i.safeFrame,i.image,i.video,i.minimum,i.btf,i.positionTop,i.height,i.avoid,i.textLength,i.children,i.size,i.filter]:[i.safeFrame,i.image,i.video,i.minimum,i.btf,i.avoid,i.filter]}const Q=(e,t)=>t.reduce(((t,i)=>t.flatMap((()=>i(e)))),H(null));function Y(e,t,i){return 0===e.length?z(a.eW.noSlot.selector):(0,U.attemptRecover)(e,((n,s)=>((n,s)=>Q(n,t).fold(((t,i)=>({reason:n,information:s})=>(G.info(`Invalid slot [${i} / ${e.length}] ${n} => ${s}`,t),z(n,s)))(n,s),(t=>({slot:n})=>(G.info(`Elected slot [${t} / ${e.length}]`,n),i.valid(1,1),H(n)))(s)))(n,s)),(e=>e.isRight()))}function Z(e,t,i=Y,n=Y){const{placementConfig:s}=e,o=function(e,t,i=j){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=t(s,i[s](e)));return n}(s,X(e)),r=s.selector.getSlots();return i(r,K(e.name,!1,o),t).orElse((i=>(({reason:i,information:r})=>{if("inread"===e.name&&s.auto.isEnabled()){const i=[...new l(s.parentWindow.getWindow()).find()??[]].map(((e,t)=>{const i=new d.A(e,t);return i.computeScore(s),i}));return i.sort(((e,t)=>t.getScore()-e.getScore())),n(i,K(e.name,!0,o),t)}return z(i,r)})(i))).fold((({reason:e,information:i})=>(G.info("No slot available"),0!==r.length||s.auto.isEnabled()?(t.valid(1,1,e,"error"),z(e,i)):(t.valid(1,1,a.eW.noSlot.selector,"error"),z(s.headerBiddingProvider.nonEmpty()?a.eW.noSlot.hbSelector:a.eW.noSlot.selector)))),(({slot:e})=>(G.info("Slot available",e),H(e))))}const X=(0,s.A)(((e,t,i)=>{const{placementConfig:s}=e,o=s.parentWindow.getWindow().scrollY;switch(t){case"btf":return i({scrollTop:o,waterline:n.getWindowSize(s.parentWindow.getWindow()).height});case"height":return i({beforeHeightCheck:t=>e.initDom(t),afterHeightCheck:e=>{e?.parentNode&&e.parentNode.removeChild(e)}});case"positionTop":return i({scrollTop:o});case"minimumBelow":case"filter":return i({elements:s.selector.getSlots()});default:return i({})}}))},1885:(e,t,i)=>{"use strict";i.d(t,{BJ:()=>w,W9:()=>g,bN:()=>y,lQ:()=>b,t6:()=>p});var n=i(9896),s=i(8101),o=i(8709),r=i(3842),a=i(5864),l=i(4672),d=i(3013),c=i(5536);const h=(e,t=Date.now)=>(0,r.replaceStringsWithValue)(d.$.timestampMacroNames,t())(e),u=o.OX.reduce(((e,t)=>({...e,[t.toLowerCase()]:t})),{}),p=e=>Object.keys(u).includes(e.event),g=({event:e,url:t})=>({event:u[e.toLowerCase()],trackingUrl:(0,a.sc)(h(t))}),m=s.K.filter((e=>e!==s.v.Progress)).reduce(((e,t)=>({...e,[t.toLowerCase()]:t})),{}),f=/progress-(\d+)/i,A=e=>f.test(e);function v(e){return!A(e.event)}const b=e=>A(e.event)||Object.keys(m).includes(e.event),w=e=>{if(v(e))return(0,c.xe)({event:m[e.event.toLowerCase()],trackingUrl:h(e.url)});{const t=l.c$.fromNullable(e.event.match(f)).map((([e,t])=>parseInt(t,10))).filter(n.Et).map((t=>({offset:t,trackingUrl:h(e.url)}))).getOrNull();return(0,c.MN)(t)}},y=e=>e.filter((e=>s.K.some((t=>t===e.event)))).filter((e=>v(e))).map((({event:e,url:t})=>({event:m[e.toLowerCase()],trackingUrl:h(t)})))},2172:(e,t,i)=>{"use strict";i.d(t,{i1:()=>l,j_:()=>o,qh:()=>r,ty:()=>a,zk:()=>d});var n=i(2768);function s(e){n.isFacebookWebview()?fetch(e,{keepalive:!0,mode:"no-cors",headers:{accept:"image/webp,image/avif,video/*;q=0.8,image/png,image/svg+xml,image/*;q=0.8,*/*;q=0.5"},credentials:"include",redirect:"follow"}):(new Image).src=e}function o(e){if(n.isFacebookWebview())fetch(e,{keepalive:!0,mode:"no-cors",headers:{accept:"image/webp,image/avif,video/*;q=0.8,image/png,image/svg+xml,image/*;q=0.8,*/*;q=0.5"},credentials:"include",redirect:"follow"});else{const t=new Image;t.setAttribute("attributionsrc",""),t.src=e}}const r="1401",a=e=>e.forEach(s),l=e=>e.forEach(s),d=(e,t,i)=>`${e}-${t}-${i}`},7774:(e,t,i)=>{"use strict";i.d(t,{D1:()=>I,MZ:()=>g,NW:()=>b,UX:()=>p,bK:()=>m,fO:()=>f,gi:()=>E,mN:()=>v,nL:()=>w,oA:()=>A,sc:()=>C});var n=i(1802),s=i(4672),o=i(4461),r=i(589),a=i(2172),l=i(108),d=i(8338),c=i(7058),h=i(4878);const u=e=>({formatVersion:a.qh,trackStrategy:a.ty,...e});function p(e){return(t,i)=>(0,o.Lx)([(0,l.Vr)(e),(0,l.Vr)(e)],r.v.sndMap((n=>(0,o.Lx)(d.Ay.track(t,u(i),n),(0,l.Mh)(e)))))}function g(e){return(t,i)=>(0,o.Lx)([(0,l.rs)(e),(0,l.rs)(e)],r.v.sndMap((n=>(0,o.Lx)(h.A.track(t,u(i),n),(0,l.QF)(e)))))}function m(e){return(t,i,n=s.NV)=>(0,o.Lx)([[(0,l.Vr)(e),(0,l.vO)(e)],[(0,l.Vr)(e),(0,l.vO)(e)]],r.v.sndMap((([s,d])=>(0,o.Lx)(c.Z_(t,{trackStrategy:a.i1},u(i),n)(s,d),r.v.bimap((0,l.Mh)(e),(0,l.Er)(e))))),r.v.zip)}function f(e){return(t,i,n=s.NV)=>(0,o.Lx)([[(0,l.rs)(e),(0,l.vO)(e)],[(0,l.rs)(e),(0,l.vO)(e)]],r.v.sndMap((([s,d])=>(0,o.Lx)(c.zB(t,{trackStrategy:a.i1},u(i),n)(s,d),r.v.bimap((0,l.QF)(e),(0,l.Er)(e))))),r.v.zip)}const A=e=>(t,i)=>(0,o.Lx)([(0,l.Vr)(e),(0,l.Vr)(e)],r.v.sndMap((n=>(0,o.Lx)(d.Ay.trackFormatError(t,u(i),n),(0,l.Mh)(e))))),v=e=>(t,i)=>(0,o.Lx)([(0,l.rs)(e),(0,l.rs)(e)],r.v.sndMap((n=>(0,o.Lx)(h.A.trackFormatError(t,u(i),n),(0,l.QF)(e))))),b=e=>(t,i,n)=>(0,o.Lx)([[(0,l.Vr)(e),(0,l.vO)(e)],[(0,l.Vr)(e),(0,l.vO)(e)]],r.v.sndMap((([s,d])=>(0,o.Lx)(c.Zg(t,{trackStrategy:a.i1},u(i),n)(s,d),r.v.bimap((0,l.Mh)(e),(0,l.Er)(e))))),r.v.zip),w=e=>(t,i,n,s)=>(0,o.Lx)([[(0,l.rs)(e),(0,l.vO)(e)],[(0,l.rs)(e),(0,l.vO)(e)]],r.v.sndMap((([t,d])=>(0,o.Lx)(c.Re(i,{trackStrategy:a.i1},u(n),s)(t,d),r.v.bimap((0,l.QF)(e),(0,l.Er)(e))))),r.v.zip),y=e=>e.trackedEvents.map((e=>e.event)),E=([e,t])=>(0,n.difference)(y(e))(y(t)),I=r.v.bimap(E,E),C=e=>({event:t,trackingUrl:i})=>(0,o.Lx)((0,l.Vr)(e),(e=>({...e,customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]})),(0,l.Mh)(e))},3940:(e,t,i)=>{"use strict";i.d(t,{Dh:()=>$,Fv:()=>H,Hg:()=>B,IN:()=>C,Ie:()=>F,Li:()=>R,MX:()=>D,MZ:()=>W,N_:()=>z,OV:()=>P,Sr:()=>E,Tl:()=>G,UI:()=>M,V$:()=>q,WE:()=>x,Yp:()=>U,c7:()=>j,nu:()=>O,oN:()=>I,ol:()=>_,pH:()=>b,qO:()=>N,uU:()=>L,vc:()=>V,xy:()=>y});var n=i(2768),s=i(3768),o=i(2625),r=i(4672),a=i(4461),l=i(3441),d=i(1586),c=i(1120),h=i(3013),u=i(6051),p=i(1286),g=i(8101),m=i(8709),f=i(8562),A=i(5536),v=i(9896);const b=({pageId:e,placementId:t,auctionId:i,sumologicLogger:o},a,l)=>{const d={baseUrl:h.$.trackingUrl,referer:C(),queryParameters:{env:n.getEnv(),auctid:i.getOrValue((0,s.M)("")),pageId:e.toString(),pid:t.toString()}};return{...d,queryParameters:{...d.queryParameters,...a},trackingUrl:r.NV}},w=({pageId:e,placementId:t,auctionId:i,viewerId:a,hbProvider:l,sumologicLogger:d},c,u)=>{const p={baseUrl:h.$.trackingUrl,referer:C(),queryParameters:{env:n.getEnv(),auctid:i.getOrValue((0,s.M)("")),pageId:e.toString(),pid:t.toString(),hb_provider:l,vid:a.getOrValue((0,o.j)(""))}};return{...p,queryParameters:{...p.queryParameters,...c},trackingUrl:r.NV}},y=({sumologicLogger:e,wigo:t,logger:i,placementKey:n})=>(s,o,r)=>(0,a.Lx)(r(s),(0,d.tap)((s=>(0,a.Lx)(f.A.format.getNewTrackedEvents(s),(r=>r.forEach((0,a.Ay)((0,d.tap)((e=>i.info(`[${n}][${o}] ${e}`,s[1]))),(0,d.tap)(k(e)),S(t)))))))),E=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,durationPlayed:s,totalDuration:o})=>(r,d)=>(0,a.Lx)(d(r),(([r,a])=>{const d=f.A.vast.getNewTrackedVastEvents(r),h=f.A.vast.getNewTrackedVastEvents(a);f.A.vast.trackedEventsToEventsWithTrackingUrls(h).forEach((({event:e,trackingUrls:i})=>{i.forEach((i=>{const n=A.uu.tryCatch((()=>(0,l.qg)(i).hostname)).getOrValue("<invalid>");e===g.v.Billable?(0,v.TO)({fromHour:7,toHour:7})?t.info(`3p-billable-track ${e} ${n}`,40):t.info(`3p-billable-track ${e} ${n}`,5):t.info(`3p-vast-track ${e} ${n}`,1e3)}))})),f.A.vast.trackedEventsToEventsWithTrackingUrls([...d,...h]).forEach((t=>{n.info(`[${e}][vast] ${t.event}`,t.trackingUrls),(0,c.bm)({wigo:i,durationPlayed:s,totalDuration:o})(t)}))})),I=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,durationPlayed:s=r.NV,totalDuration:o=r.NV,errorCode:a,errorCause:l,slotType:d,creativeSize:h,macros:u})=>{const[p,g]=f.A.vast.trackErrorWithCause(e)(a,l,{slotType:d,macros:u,referer:C(),creativeSize:h});t.error(`vast-error ${a}`),f.A.vast.trackedEventsToEventsWithTrackingUrls([...f.A.vast.getNewTrackedVastEvents(p),...f.A.vast.getNewTrackedVastEvents(g)]).forEach((({event:t,trackingUrls:r})=>{n.info(`[${e}][vast] ${t} ${a}`,r),(0,c.bm)({wigo:i,durationPlayed:s,totalDuration:o})({event:t,trackingUrls:r})}))},C=()=>(0,l.I5)().flatMap((e=>r.c$.fromNullable(e.windowReferrerUrl))).getOrValue(""),S=e=>t=>{([p.Q4.AdNotAvailableNetworkError,p.Q4.AdNotAvailableServerError,p.Q4.AdAvailableErrorParseTimeout,p.Q4.AdAvailableErrorSettings,p.Q4.AdAvailableErrorBadResponse,p.Q4.AdAvailableErrorSameAd,p.Q4.NoAdIvtDoubleVerify,p.Q4.NoAdIvtTag,p.Q4.NoAdBlockedSiteDoubleVerify,p.Q4.NoAdBlockedSiteTeads].some((e=>e===t))||(0,p.uZ)(t)||(0,p.oV)(t))&&(e.valid(1,2,t,"error"),e.valid(1,1,t,"error"))},k=e=>(0,a.Ay)(T,r.jc.map((e=>u.Hf[e])),r.jc.forEach((t=>e.info(t,40)))),T=e=>r.c$.fromNullable([p.Q4.PlacementCall,p.Q4.SlotAvailable,p.Q4.AdReceived,p.Q4.AdAvailableSuccess,p.Q4.AdCall,p.Q4.ErrorBeforeAdReached,p.Q4.AdReached].find((t=>t===e))).orElse((()=>/^noSlot-/.test(e)?r.c$.of("noSlot"):r.NV)).orElse((()=>/^incompatibility-/.test(e)?r.c$.of("incompatibility"):r.NV)).orElse((()=>/^adNotAvailable-/.test(e)?r.c$.of("adNotAvailable"):r.NV)).orElse((()=>/^adAvailable-error-/.test(e)?r.c$.of("adAvailable-error"):r.NV)).orElse((()=>/^noAd-/.test(e)?r.c$.of("noAd"):r.NV)),V=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:o,auctionId:r,randomString:a})=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(p.Q4.PlacementCall,"classic",(s=>f.A.format.classic.track(i)(s,b({pageId:e,placementId:t,auctionId:r,sumologicLogger:n},{debug_metadata:a},s)))),P=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:o,auctionId:l,viewerId:d,headerBiddingProvider:c})=>(0,a.Lx)(c,r.jc.fold((()=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(p.Q4.IncompatibilityFormat,"classic",(s=>f.A.format.classic.track(i)(s,b({pageId:e,placementId:t,auctionId:l,sumologicLogger:n},{slot:"native"},s))))),(r=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(p.Q4.IncompatibilityFormat,"header-bidding",(s=>f.A.format.headerBidding.track(i)(s,w({pageId:e,placementId:t,auctionId:l,sumologicLogger:n,hbProvider:r,viewerId:d},{slot:"native",pfid:""}))))))),L=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:o,auctionId:l,viewerId:d,headerBiddingProvider:c},h)=>(0,a.Lx)(c,r.jc.fold((()=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(h,"classic",(s=>f.A.format.classic.track(i)(s,b({pageId:e,placementId:t,auctionId:l,sumologicLogger:n},{slot:"native"},s))))),(r=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(h,"header-bidding",(s=>f.A.format.headerBidding.track(i)(s,w({pageId:e,placementId:t,auctionId:l,sumologicLogger:n,hbProvider:r,viewerId:d},{slot:"native",pfid:""}))))))),x=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:o,auctionId:l,viewerId:d,headerBiddingProvider:c})=>(0,a.Lx)(c,r.jc.fold((()=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(p.Q4.FallbackIntegration,"classic",(s=>f.A.format.classic.track(i)(s,b({pageId:e,placementId:t,auctionId:l,sumologicLogger:n},{slot:"native"},s))))),(r=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(p.Q4.FallbackIntegration,"header-bidding",(s=>f.A.format.headerBidding.track(i)(s,w({pageId:e,placementId:t,auctionId:l,sumologicLogger:n,hbProvider:r,viewerId:d},{slot:"native",pfid:""}))))))),_=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,viewerId:l,pageId:d,placementId:c,auctionId:h})=>{const u={sumologicLogger:t,wigo:i,logger:n,placementKey:e};(0,a.Lx)(s,r.jc.fold((()=>y(u)(p.Q4.LimitedCapabilities,"classic",(e=>f.A.format.classic.track(u.placementKey)(e,b({pageId:d,placementId:c,auctionId:h,sumologicLogger:t},{vid:l.getOrValue((0,o.j)(""))},e))))),(e=>y(u)(p.Q4.LimitedCapabilities,"header-bidding",(i=>f.A.format.headerBidding.track(u.placementKey)(i,w({pageId:d,placementId:c,auctionId:h,sumologicLogger:t,hbProvider:e,viewerId:l},{pfid:""})))))))},N=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:l,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u,scenarioId:g,adSourceId:A,errorCause:v,creativeId:E,dspCampaignId:I,dspCreativeId:C,studioCreativeId:S})=>{const k={slot:s,gid:(0,m.rP)(c),sid:(0,m.rP)(h),pfid:(0,m.rP)(u),scid:(0,m.rP)(g),ad_source_id:(0,m.rP)(A),error_cause:v,cid:E,dsp_campaign_id:I??"",dsp_creative_id:C??"",studio_cid:S.getOrValue("")};(0,a.Lx)(t,r.jc.fold((()=>y(e)(p.Q4.Warning,"classic",(t=>f.A.format.classic.track(e.placementKey)(t,b({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger},{...k,vid:d.getOrValue((0,o.j)(""))},t))))),(t=>y(e)(p.Q4.Warning,"header-bidding",(s=>f.A.format.headerBidding.track(e.placementKey)(s,w({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},k)))))))},R=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:o,auctionId:l,viewerId:d,headerBiddingProvider:c},h)=>(0,a.Lx)(c,r.jc.fold((()=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(h,"classic",(s=>f.A.format.classic.track(i)(s,b({pageId:e,placementId:t,auctionId:l,sumologicLogger:n},{},s))))),(r=>y({sumologicLogger:n,wigo:o,logger:s,placementKey:i})(h,"header-bidding",(s=>f.A.format.headerBidding.track(i)(s===p.Q4.NoSlotSelector?p.Q4.HbNoSlotSelector:s,w({pageId:e,placementId:t,auctionId:l,sumologicLogger:n,hbProvider:r,viewerId:d},{pfid:""}))))))),O=e=>({placementKey:t,sumologicLogger:i,wigo:n,logger:s,queryParameters:o})=>y({sumologicLogger:i,wigo:n,logger:s,placementKey:t})(e,"classic",(e=>f.A.format.classic.track(t)(e,{baseUrl:h.$.trackingUrl,referer:C(),queryParameters:o,trackingUrl:r.NV}))),D=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,queryParameters:s})=>y({sumologicLogger:t,wigo:i,logger:n,placementKey:e})(p.Q4.AdAvailableErrorBadResponse,"classic",(t=>f.A.format.classic.track(e)(t,{baseUrl:h.$.trackingUrl,referer:C(),queryParameters:s,trackingUrl:r.NV}))),M=({placement:{key:e,pageId:t,pid:i,slotType:n,wigo:s},sumologicLogger:l,logger:d,auctionId:c,viewerId:h,headerBiddingProvider:u,portfolioItemId:g})=>{const A={sumologicLogger:l,wigo:s,logger:d,placementKey:e},v=(0,m.HG)(g);(0,a.Lx)(u,r.jc.fold((()=>y(A)(p.Q4.AdReceived,"classic",(s=>f.A.format.classic.track(e)(s,b({pageId:t,placementId:i,auctionId:c,sumologicLogger:l},{slot:n,vid:h.getOrValue((0,o.j)("")),pfid:v},s))))),(s=>y(A)(p.Q4.AdReceived,"header-bidding",(o=>f.A.format.headerBidding.track(e)(o,w({pageId:t,placementId:i,auctionId:c,sumologicLogger:l,hbProvider:s,viewerId:h},{slot:n,pfid:v})))))))},B=({placement:{key:e,pageId:t,pid:i,slotType:n,wigo:s},sumologicLogger:l,logger:d,auctionId:c,viewerId:h,headerBiddingProvider:u,portfolioItemId:g,insertionId:A,connectionId:v})=>{const E={sumologicLogger:l,wigo:s,logger:d,placementKey:e},I=(0,m.HG)(g),C=(0,m.HG)(A),S=(0,m.HG)(v);(0,a.Lx)(u,r.jc.fold((()=>y(E)(p.Q4.AdAvailableErrorSettings,"classic",(s=>f.A.format.classic.track(e)(s,b({pageId:t,placementId:i,auctionId:c,sumologicLogger:l},{slot:n,vid:h.getOrValue((0,o.j)("")),pfid:I,gid:C,sid:S},s))))),(s=>y(E)(p.Q4.AdAvailableErrorSettings,"header-bidding",(o=>f.A.format.headerBidding.track(e)(o,w({pageId:t,placementId:i,auctionId:c,sumologicLogger:l,hbProvider:s,viewerId:h},{slot:n,pfid:I,gid:C,sid:S})))))))},F=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,pageId:l,placementId:d,slotType:c,auctionId:h,viewerId:u,insertionId:g,connectionId:m,portfolioItemId:A})=>{const v={sumologicLogger:t,wigo:i,logger:n,placementKey:e},E="0"===g?"":g;(0,a.Lx)(s,r.jc.fold((()=>y(v)(p.Q4.AdAvailableErrorParseTimeout,"classic",(e=>f.A.format.classic.track(v.placementKey)(e,b({pageId:l,placementId:d,auctionId:h,sumologicLogger:t},{slot:c,vid:u.getOrValue((0,o.j)("")),gid:E,sid:m,pfid:A},e))))),(e=>y(v)(p.Q4.AdAvailableErrorParseTimeout,"header-bidding",(i=>f.A.format.headerBidding.track(v.placementKey)(i,w({pageId:l,placementId:d,auctionId:h,sumologicLogger:t,hbProvider:e,viewerId:u},{slot:c,pfid:A,gid:E,sid:m})))))))},U=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,pageId:l,placementId:d,slotType:c,portfolioItemId:h,auctionId:u,viewerId:g})=>{(0,a.Lx)(s,r.jc.fold((()=>y({sumologicLogger:t,wigo:i,logger:n,placementKey:e})(p.Q4.FallbackNoAd,"classic",(i=>f.A.format.classic.track(e)(i,b({pageId:l,placementId:d,auctionId:u,sumologicLogger:t},{slot:c,vid:g.getOrValue((0,o.j)("")),pfid:(0,m.HG)(h)},i))))),(s=>y({sumologicLogger:t,wigo:i,logger:n,placementKey:e})(p.Q4.FallbackNoAd,"header-bidding",(i=>f.A.format.headerBidding.track(e)(i,w({pageId:l,placementId:d,auctionId:u,sumologicLogger:t,hbProvider:s,viewerId:g},{slot:c,pfid:(0,m.HG)(h)})))))))},$=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,baseUrlWithQueryParameters:o})=>{const l={sumologicLogger:t,wigo:i,logger:n,placementKey:e},d={...o,referer:C()};(0,a.Lx)(s,r.jc.fold((()=>y(l)(p.Q4.AdCall,"classic",(e=>f.A.format.classic.track(l.placementKey)(e,d)))),(e=>y(l)(p.Q4.AdCall,"header-bidding",(t=>f.A.format.headerBidding.track(l.placementKey)(t,{...d,queryParameters:{...d.queryParameters,hb_provider:e}}))))))},W=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,code:l,pageId:d,placementId:c,slotType:h,auctionId:u,viewerId:g,insertionId:m,connectionId:A,portfolioItemId:v})=>{const E={sumologicLogger:t,wigo:i,logger:n,placementKey:e},I="0"===m?"":m;(0,a.Lx)(s,r.jc.fold((()=>y(E)(p.Q4.AdAvailableErrorVast,"classic",(e=>f.A.format.classic.trackError(E.placementKey)(l,b({pageId:d,placementId:c,auctionId:u,sumologicLogger:t},{slot:h,vid:g.getOrValue((0,o.j)("")),gid:I,sid:A,pfid:v},e))))),(e=>y(E)(p.Q4.AdAvailableErrorVast,"header-bidding",(i=>f.A.format.headerBidding.trackError(E.placementKey)(l,w({pageId:d,placementId:c,auctionId:u,sumologicLogger:t,hbProvider:e,viewerId:g},{slot:h,pfid:v,gid:I,sid:A})))))))},H=({sumologicLogger:e,logger:t,wigo:i,placementKey:n})=>({pageId:s,placementId:l,auctionId:d,viewerId:c,portfolioItemId:h,slotType:u,insertionId:g,connectionId:A,headerBiddingProvider:v})=>{const E=(0,m.HG)(h),I=(0,m.HG)(g),C=(0,m.HG)(A);(0,a.Lx)(v,r.jc.fold((()=>y({sumologicLogger:e,wigo:i,logger:t,placementKey:n})(p.Q4.AdAvailableSuccess,"classic",(t=>f.A.format.classic.track(n)(t,b({pageId:s,placementId:l,auctionId:d,sumologicLogger:e},{slot:u,vid:c.getOrValue((0,o.j)("")),pfid:E,gid:I,sid:C},t))))),(o=>y({sumologicLogger:e,wigo:i,logger:t,placementKey:n})(p.Q4.AdAvailableSuccess,"header-bidding",(t=>f.A.format.headerBidding.track(n)(t,w({pageId:s,placementId:l,auctionId:d,sumologicLogger:e,hbProvider:o,viewerId:c},{slot:u,pfid:E,gid:I,sid:C})))))))},z=({sumologicLogger:e,logger:t,wigo:i,placementKey:n})=>({pageId:s,placementId:l,auctionId:d,viewerId:c,portfolioItemId:h,slotType:u,insertionId:g,connectionId:A,headerBiddingProvider:v})=>{const w=(0,m.HG)(h),E=(0,m.HG)(g),I=(0,m.HG)(A);(0,a.Lx)(v,r.jc.fold((()=>y({sumologicLogger:e,wigo:i,logger:t,placementKey:n})(p.Q4.AdAvailableErrorSameAd,"classic",(t=>f.A.format.classic.track(n)(t,b({pageId:s,placementId:l,auctionId:d,sumologicLogger:e},{slot:u,vid:c.getOrValue((0,o.j)("")),pfid:w,gid:E,sid:I},t))))),(i=>{t.warn("Could not track adAvailable-error-sameAd, it should not be possible on Header-Bidding context",i),e.error(`hb-samead ${i}`)})))},G=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:l,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u,creativeId:g})=>{const A=d.getOrValue((0,o.j)("")),v=(0,m.rP)(u),E=(0,m.rP)(c),I=(0,m.rP)(h);(0,a.Lx)(t,r.jc.fold((()=>y(e)(p.Q4.EarlyClick,"classic",(t=>f.A.format.classic.track(e.placementKey)(t,b({auctionId:l,sumologicLogger:e.sumologicLogger,pageId:i,placementId:n},{slot:s,vid:A,pfid:v,gid:E,sid:I,cid:g},p.Q4.EarlyClick))))),(t=>y(e)(p.Q4.EarlyClick,"header-bidding",(o=>f.A.format.headerBidding.track(e.placementKey)(o,w({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},{slot:s,pfid:v,gid:E,sid:I,cid:g})))))))},j=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:l,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u,notVisibleReason:g})=>{const A=(0,p.KC)(g),v=(0,p.K4)(g),E=d.getOrValue((0,o.j)("")),I=(0,m.rP)(u),C=(0,m.rP)(c),S=(0,m.rP)(h);(0,a.Lx)(t,r.jc.fold((()=>y(e)(A,"classic",(t=>f.A.format.classic.track(e.placementKey)(t,b({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger},{slot:s,vid:E,pfid:I,gid:C,sid:S,debug_metadata:v},t))))),(t=>y(e)(A,"header-bidding",(o=>f.A.format.headerBidding.track(e.placementKey)(o,w({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},{slot:s,pfid:I,gid:C,sid:S,debug_metadata:v})))))))},q=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:l,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u})=>{const g=d.getOrValue((0,o.j)("")),A=(0,m.rP)(u),v=(0,m.rP)(c),E=(0,m.rP)(h);(0,a.Lx)(t,r.jc.fold((()=>y(e)(p.Q4.ClickReplay,"classic",(t=>f.A.format.classic.track(e.placementKey)(t,b({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger},{slot:s,vid:g,pfid:A,gid:v,sid:E},t))))),(t=>y(e)(p.Q4.ClickReplay,"header-bidding",(o=>f.A.format.headerBidding.track(e.placementKey)(o,w({pageId:i,placementId:n,auctionId:l,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},{slot:s,pfid:A,gid:v,sid:E})))))))}},8562:(e,t,i)=>{"use strict";i.d(t,{z:()=>o.zk,A:()=>y});var n=i(4672),s=i(4461),o=i(2172),r=i(108),a=i(7058),l=i(5864),d=i(7774),c=i(1802),h=i(589),u=i(3441),p=i(1586),g=i(8101),m=i(9639);const f=e=>(0,u.Bw)(e),A=e=>!f(e),v=(e,t)=>i=>Object.keys(e).filter((t=>e[t].length>0)).filter((e=>e&&g.K.includes(e))).reduce(((i,o)=>o===g.v.Progress?(e=>(t,i)=>(0,s.Lx)(t,(e=>e.map((({url:e,data:t})=>(0,s.Lx)(e,n.c$.fromNullable,n.jc.filter(i),n.jc.map((e=>({url:e,offset:t}))))))),c.flattenOptions,(0,c.groupByMap)((0,p.prop)("offset"),(0,p.prop)("url")),(t=>(0,s.Lx)(Object.keys(t),(e=>e.map((e=>parseInt(e,10)))),(i=>i.reduce(((e,i)=>w(e)({offset:i,trackingUrls:t[i]})),e))))))(i)(e[o],t):(e=>(t,i,o)=>(0,s.Lx)(t,(e=>e.map((0,s.Ay)((0,p.prop)("url"),n.c$.fromNullable,n.jc.filter((e=>""!==e)),n.jc.filter(i)))),c.flattenOptions,(e=>({event:o,trackingUrls:e})),b(e)))(i)(e[o],t,o)),i),b=e=>t=>({...e,trackings:[...e.trackings,t]}),w=e=>t=>({...e,progressTrackings:[...e.progressTrackings,t]}),y={format:{getNewTrackedEvents:d.gi,getNewTrackedEventsWithDebug:d.D1,addFormatCustomTrackings:d.sc,classic:{track:d.UX,trackWithDebug:d.bK,trackError:d.oA,trackErrorWithDebug:d.NW},headerBidding:{track:d.MZ,trackWithDebug:d.fO,trackError:d.mN,trackErrorWithDebug:d.nL}},vast:{getNewTrackedVastEvents:([e,t])=>t.trackedEvents.slice(e.trackedEvents.length),addVastCustomTrackings:e=>({event:t,trackingUrl:i})=>(0,s.Lx)([(0,r.CR)(e),(0,r.DA)(e)],h.v.bimap((e=>f(i)?{...e,customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}:e),(e=>A(i)?{...e,customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}:e)),h.v.bimap((0,r.Jz)(e),(0,r.cc)(e))),addVastCustomProgressTrackings:e=>({offset:t,trackingUrl:i})=>(0,s.Lx)([(0,r.CR)(e),(0,r.DA)(e)],h.v.bimap((e=>f(i)?{...e,customProgressTrackings:[...e.customProgressTrackings,{offset:t,trackingUrls:[i]}]}:e),(e=>A(i)?{...e,customProgressTrackings:[...e.customProgressTrackings,{offset:t,trackingUrls:[i]}]}:e)),h.v.bimap((0,r.Jz)(e),(0,r.cc)(e))),registerVastTrackings:e=>t=>(0,s.Lx)([(0,r.CR)(e),(0,r.DA)(e)],(e=>t=>(0,s.Lx)(t,h.v.bimap(v(e,f),v(e,A))))(t),h.v.bimap((0,r.Jz)(e),(0,r.cc)(e))),trackedEventsToEventsWithTrackingUrls:e=>(0,s.Lx)(e,(0,c.groupBy)((0,p.prop)("event")),(e=>(0,s.Lx)(Object.keys(e),(t=>t.reduce(((t,i)=>[...t,{event:i,trackingUrls:(0,s.Lx)(e[i],(e=>e.map((0,p.prop)("trackingUrl"))))}]),[]))))),setStudioCreativeId:e=>t=>{const i=(0,r.CR)(e);return(0,r.Jz)(e)({...i,studioCreativeId:n.c$.fromPredicate(t,p.isString)})},resetTrackedEvents:e=>(0,s.Lx)([[(0,r.CR)(e),(0,r.CR)(e)],[(0,r.DA)(e),(0,r.DA)(e)]],h.v.bimap(h.v.sndMap((t=>(0,s.Lx)({...t,trackedEvents:r.KT.trackedEvents,trackedProgressOffsets:r.KT.trackedProgressOffsets,alreadyBilledAdvertiser:r.KT.alreadyBilledAdvertiser},(0,r.Jz)(e)))),h.v.sndMap((t=>(0,s.Lx)({...t,trackedEvents:r.ne.trackedEvents,trackedProgressOffsets:r.ne.trackedProgressOffsets},(0,r.cc)(e)))))),track:e=>(t,i)=>(0,s.Lx)([(0,r.CR)(e),(0,r.DA)(e)],(([n,a])=>(0,s.Lx)(m.Sr(t,{...i,trackStrategy:o.ty,formatVersion:o.qh})(n,a),(([e,t])=>[[n,e],[a,t]]),h.v.bimap(h.v.sndMap((0,r.Jz)(e)),h.v.sndMap((0,r.cc)(e)))))),trackProgress:e=>(t,i)=>(0,s.Lx)([(0,r.CR)(e),(0,r.DA)(e)],(([n,a])=>(0,s.Lx)(m.Ft(t,{...i,trackStrategy:o.ty,formatVersion:o.qh})(n,a),(([e,t])=>[[n,e],[a,t]]),h.v.bimap(h.v.sndMap((0,r.Jz)(e)),h.v.sndMap((0,r.cc)(e)))))),trackErrorWithCause:e=>(t,i,n)=>{const s=i.slice(0,128),a=(0,r.CR)(e),l=(0,r.DA)(e),[d,c]=m.Vd(t,s,{...n,trackStrategy:o.ty,formatVersion:o.qh})(a,l);return(0,r.Jz)(e)(d),(0,r.cc)(e)(c),[[a,d],[l,c]]}},debug:{track:e=>(t,{baseUrl:i,referer:d,queryParameters:c},h=n.NV)=>(0,s.Lx)((0,l.KB)({baseUrl:i,queryParameters:{referer:d,action:t,fv:o.qh,ts:Date.now().toString(),...c}},h),(i=>a.Ay.track(t,{trackStrategy:o.i1,trackingUrl:i},(0,r.vO)(e))),(0,r.Er)(e))}}},108:(e,t,i)=>{"use strict";i.d(t,{CR:()=>m,DA:()=>f,Er:()=>b,Jz:()=>w,KT:()=>l,Mh:()=>A,QF:()=>v,Vr:()=>u,cc:()=>y,ne:()=>d,rs:()=>p,vO:()=>g});var n=i(4672),s=i(9896);const o={type:"ClassicFormatTrackingStore",trackedEvents:[],customTrackings:[]},r={type:"HeaderBiddingFormatTrackingStore",trackedEvents:[]},a={type:"DebugTrackingStore",trackedEvents:[]},l={type:"VastTrackingStore",trackings:[],progressTrackings:[],trackedEvents:[],trackedProgressOffsets:[],alreadyBilledAdvertiser:!1,studioCreativeId:n.NV,customTrackings:[],customProgressTrackings:[],trackBillable:!1},d={type:"ThirdPartyVastTrackingStore",trackings:[],progressTrackings:[],trackedEvents:[],trackedProgressOffsets:[],customTrackings:[],customProgressTrackings:[]},c={},h=e=>((0,s.b0)(c[e])&&(c[e]={classicFormatStore:o,headerBiddingFormatStore:r,debugStore:a,vastStore:l,thirdPartyVastStore:d}),c[e]),u=e=>h(e).classicFormatStore,p=e=>h(e).headerBiddingFormatStore,g=e=>h(e).debugStore,m=e=>h(e).vastStore,f=e=>h(e).thirdPartyVastStore,A=e=>t=>(h(e).classicFormatStore=t,t),v=e=>t=>(h(e).headerBiddingFormatStore=t,t),b=e=>t=>(h(e).debugStore=t,t),w=e=>t=>(h(e).vastStore=t,t),y=e=>t=>(h(e).thirdPartyVastStore=t,t)},2955:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n,s=i(5409),o=i(2203),r=i(4672),a=i(2768),l=i(2417),d=i(3441),c=i(6591);!function(e){e.landscape="l",e.square="s",e.vertical="v"}(n||(n={}));class h{static getElectedMediafiles(e){for(const t of e)t.api&&t.api.toLowerCase&&(t.api=t.api.toLowerCase()),t.type&&t.type.toLowerCase&&(t.type=t.type.toLowerCase());return[...e.filter(h.isPlayableVideo),...e.filter(h.isVpaidJS)]}static getTargetedBitrate(e){return e>0?e/2:0}static extractMediafileFromBitrate(e,t){const i=h.sortMediafilesByBitrate(e,h.getMaxBitrateForContext());return t?i.filter((e=>e.bitrate<t))[0]??i[i.length-1]:i[Math.floor(i.length/2)]}static sortMediafilesByBitrate(e,t){const i=e.map((e=>(e.bitrate=e.bitrate||2*t.max,e)));let n=i.filter((e=>e.bitrate<=t.max&&e.bitrate>=t.min));return n=n.length?n:i,n.sort(((e,t)=>t.bitrate-e.bitrate))}static getMaxBitrateForContext(){return a.isMobile()?h.bitrates.mobile:h.bitrates.default}static getMediaProvider(e){switch(e.type){case"application/x-javascript":case"application/javascript":case"text/javascript":return s.Y.VPAID;default:return h.isPlayableVideo(e)?s.Y.VIDEO:s.Y.UNSUPPORTED}}static getOptimalMediaFiles(e,t,i,n){if(0===t.length)return null;const s=h.getElectedMediafiles(t),o=h.getDownloadSpeed();if(s.length>1){const t=h.getTargetedBitrate(o),n=h.limitBitrateForHAI(e,t),r=h.extractMediafileFromBitrate(s,n);this.logger.debug(`Picked mediafile ${r.url} with bitrate ${r.bitrate}`),i(r,o)}else if(1===s.length)i(s[0],null);else{const e="No Mediafile for this context";i(null,null,e),h.logger.info("getOptimalMediaFiles",e)}}static limitBitrateForHAI(e,t){this.logger.debug(`limitBitrateForHAI called with duration ${e} and target bitrate ${t}`);const i=Math.max(30,Math.min(0|e,60)),n=Math.floor(30720/i);return this.logger.debug(`Maximum allowed bitrate ${n} for ${i} seconds`),Math.min(n,t)}static getOptimalMediaFile(e,t,i,n){h.getOptimalMediaFiles(e,t,((e,t,s)=>{if(e){const s=0;n.info("media "+e.type,s),i(e,t?` -> dlSpeed: ${t}kbit/s`:"")}else i(null,s)}),n)}static getOptimalHeight(e,t,i){return t?Math.ceil(t/h.getRatio(e,i)):0}static getRatio(e,t){const i=!(0,d.Bw)(e.url);return!e.height||!e.width||!t&&i&&e.api&&"vpaid"===e.api.toLowerCase()&&e.width>e.height?c.Y:e.width/e.height}static sendMediasToSumologic(e,t,i){try{const n=this.getDistinctMediaTypes(e.mediaFiles),s=e.wrappers.map((e=>(0,d.qg)(e).hostname)),o=0;i.info(`[mf-${t}] ${n.join(" | ")}||${s.join(" > ")}`,o)}catch(e){h.logger.error("sendMediasToSumologic error",e)}}static getRatioCategory(e){return e.width>e.height?n.landscape:e.width===e.height?n.square:n.vertical}static isVideo(e){return/^video\/*/.test(e.type)&&!/^video\/mpe?g$/.test(e.type)}static isPlayableVideo(e){return h.isVideo(e)&&(t=e.type,!!document.createElement("video").canPlayType(t));var t}static isVpaidJS(e){return"vpaid"===e.api&&e.type.indexOf("javascript")>-1}static getDownloadSpeed(e=window.navigator){return r.c$.fromNullable(e?.connection?.downlink).match({some:e=>1024*e,none:()=>{const e=performance.getEntriesByType("resource");return e.sort(((e,t)=>t.transferSize-e.transferSize)),(0,l.K)(e.slice(0,Math.round(e.length*h.percentResourcesAmount)))}})}}h.logger=new o.V("player.MediaFileHelper"),h.bitrates={mobile:{min:200,max:5e3},default:{min:200,max:1e4}},h.percentResourcesAmount=.1,h.getDistinctMediaTypes=e=>[...new Set(e.map((e=>e.type)))];const u=h},5944:(e,t,i)=>{"use strict";var n;i.d(t,{l:()=>n}),function(e){e[e.HTML5=0]="HTML5",e[e.ANY=1]="ANY"}(n||(n={}))},5409:(e,t,i)=>{"use strict";var n;i.d(t,{Y:()=>n}),function(e){e[e.UNSUPPORTED=0]="UNSUPPORTED",e[e.VIDEO=1]="VIDEO",e[e.VPAID=2]="VPAID"}(n||(n={}))},1581:(e,t,i)=>{"use strict";i.d(t,{A:()=>o,E:()=>r});var n=i(7214),s=i(9831);const o={error:n.A.AdError,click:n.A.AdClickThru,pause:n.A.AdPaused,resume:n.A.AdPlaying,skip:n.A.AdSkipped,creativeView:n.A.AdStarted,start:n.A.AdVideoStart,firstQuartile:n.A.AdVideoFirstQuartile,midpoint:n.A.AdVideoMidpoint,thirdQuartile:n.A.AdVideoThirdQuartile,complete:n.A.AdVideoComplete,impression:n.A.AdImpression,close:n.A.AdUserClose,closeLinear:n.A.AdUserClose,progress:n.A.AdRemainingTimeChange,otherAdInteraction:n.A.AdInteraction},r={adChoices:s.A.AdChoicesClickRequest}},3757:(e,t,i)=>{"use strict";i.d(t,{Ez:()=>b,Py:()=>A,Q3:()=>f,Qy:()=>w,SI:()=>v,Vp:()=>g,X0:()=>S,XF:()=>C,ly:()=>E,p4:()=>y,uH:()=>I});var n=i(4672),s=i(4461),o=i(3842),r=i(1586),a=i(3988);const l=["[","]"],d=["${","}"],c=e=>({type:"StaticPatternBit",pattern:e}),h=e=>({ignoreCase:!1,supportMultipleOccurrences:!1,supportUriEncoded:!1,patternBits:[c(e)],delimiters:[l]}),u={CacheBusting:h("CACHEBUSTING"),ImpressionId:h("impressionId"),ContentPlayHead:h("CONTENTPLAYHEAD"),ErrorCode:h("ERRORCODE"),AssetUri:h("ASSETURI"),MediaFileType:h("MEDIAFILETYPE"),Viewability:h("VIEWABILITY"),BundleId:h("BUNDLEID"),DeviceId:h("DEVICEID"),LimitTracking:h("LIMIT_TRACKING"),StudioCid:h("STUDIO_CID"),SlotType:h("slotType"),DebugFormat:h("DEBUG_FORMAT"),Gdpr:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[c("GDPR")],delimiters:[l,d]},GdprConsent:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[c("GDPR_CONSENT")],delimiters:[l,d]},GdprConsentWithVendorId:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[c("GDPR_CONSENT_"),("\\d+",{type:"DynamicPatternBit",pattern:"\\d+"})],delimiters:[d]}};const p=e=>t=>t.map((({type:t,pattern:i})=>"StaticPatternBit"===t?e(i):i)).join(""),g=(e,t)=>[e,t],m=(e,[t,i])=>e.replace((({ignoreCase:e,supportMultipleOccurrences:t,delimiters:i,supportUriEncoded:n,patternBits:s})=>{const o=`${e?"i":""}${t?"g":""}`,a=i.reduce(((e,[t,i])=>{const o=[c(t),...s,c(i)];return[...e,p(r.identity)(o)].concat(n?[p(encodeURIComponent)(o)]:[])}),[]).map((e=>`(${(e=>e.replace(/[[\]{}$]/g,"\\$&"))(e)})`)).join("|");return new RegExp(a,o)})(u[t]),i),f=e=>t=>e.reduce(m,t),A=()=>[v(0),E(),w(n.NV),y(n.NV),b(0)],v=e=>{const t=e>0?(0,r.offset)(e):"0";return g("ContentPlayHead",t)},b=e=>g("Viewability",String(e)),w=e=>(0,s.Lx)(e,n.jc.map((e=>e.url.toString())),n.jc.fold((()=>""),encodeURIComponent),(e=>g("AssetUri",e))),y=e=>(0,s.Lx)(e,n.jc.map((e=>e.type)),n.jc.fold((()=>"unknown"),r.getExtensionFromMimeType),(e=>g("MediaFileType",e))),E=(e=(0,o.rand)(8))=>g("CacheBusting",e),I=e=>g("Gdpr",(0,a.B)(e)),C=e=>[g("GdprConsent",e),g("GdprConsentWithVendorId",e)],S=e=>g("DebugFormat","[new|"+e.options.getFullContext()+"]")},1286:(e,t,i)=>{"use strict";i.d(t,{Fl:()=>a,K4:()=>r,KC:()=>o,Q4:()=>n,cS:()=>h,oV:()=>g,pb:()=>d,pq:()=>c,rv:()=>u,uZ:()=>p}),i(5536);var n,s=i(1586);!function(e){e.LimitedCapabilities="limitedCapabilities",e.PlacementCall="placementCall",e.FallbackIntegration="passback-integration",e.FallbackNoAd="passback-noAd",e.NoSlotSelector="noSlot-selector",e.HbNoSlotSelector="hbNoSlot-selector",e.NoSlotFilter="noSlot-filter",e.NoSlotAvoid="noSlot-avoid",e.NoSlotSize="noSlot-size",e.NoSlotBtf="noSlot-BTF",e.NoSlotMinimum="noSlot-minimum",e.NoSlotMinimumBelow="noSlot-minimumBelow",e.NoSlotContent="noSlot-content",e.NoSlotPosition="noSlot-position",e.NoSlotVideoArticle="noSlot-videoArticle",e.NoSlotVideoSlot="noSlot-videoSlot",e.NoSlotImageSlot="noSlot-imageSlot",e.NoSlotSafeFrame="noSlot-safeFrame",e.IncompatibilityBrowser="incompatibility-browser",e.IncompatibilityContext="incompatibility-context",e.IncompatibilityFormat="incompatibility-format",e.IncompatibilityVideo="incompatibility-video",e.SlotAvailable="slotAvailable",e.HbSlotAvailable="hbSlotAvailable",e.AdReceived="adReceived",e.AdNotAvailableNetworkError="adNotAvailable-networkError",e.AdNotAvailableServerError="adNotAvailable-serverError",e.AdAvailableErrorParseTimeout="adAvailable-error-parseTimeout",e.AdAvailableErrorBadResponse="adAvailable-error-badResponse",e.AdAvailableErrorVast="adAvailable-error-vast-{code}",e.AdAvailableErrorSettings="adAvailable-error-settings",e.AdAvailableErrorSameAd="adAvailable-error-sameAd",e.AdAvailableSuccess="adAvailable-success",e.AdCall="adCall",e.ErrorBeforeAdReached="errorBeforeAdReached",e.AdReached="adReached",e.NoAdServerError="noAd-serverError",e.NoAdNetworkError="noAd-networkError",e.NoAdVastError="noAd-vastError-{code}",e.NoAdParseTimeout="noAd-parseTimeout",e.NoAdSettingsError="noAd-settingsError",e.NoAdBadResponse="noAd-badResponse",e.NoAdSameAd="noAd-sameAd",e.NoAdIvtDoubleVerify="noAd-ivt-doubleVerify",e.NoAdIvtTag="noAd-ivt-tag",e.NoAdBlockedSiteDoubleVerify="noAd-blockedSite-doubleVerify",e.NoAdBlockedSiteTeads="noAd-blockedSite-teads",e.EarlyClick="early-click",e.ClickReplay="click-replay",e.SlotVisibilityTiny="slotVisibility-tiny",e.SlotVisibilityInvalidDom="slotVisibility-invalid-dom",e.SlotVisibilityHiddenDisplay="slotVisibility-hidden-display",e.SlotVisibilityHiddenOverflow="slotVisibility-hidden-overflow",e.Warning="warning",e.OtherAdsAfterStart="other-ads-after-start",e.OtherAdsInViewportRange="other-ads-in-viewport-range",e.AdClosed="ad-closed",e.ClientAdCollision="client-ad-collision",e.OverlappingHeight="overlapping-height"}(n||(n={}));const o=e=>{if("object"==typeof e)return n.SlotVisibilityHiddenOverflow;switch(e){case"tiny":return n.SlotVisibilityTiny;case"invalid-dom":return n.SlotVisibilityInvalidDom;case"hidden-display":return n.SlotVisibilityHiddenDisplay;case"hidden-overflow":return n.SlotVisibilityHiddenOverflow;default:return(0,s.exhaustive)(e)}},r=e=>"object"==typeof e&&"location"in e?e.location:"",a={[n.AdNotAvailableServerError]:n.NoAdServerError,[n.AdNotAvailableNetworkError]:n.NoAdNetworkError,[n.AdAvailableErrorVast]:n.NoAdVastError,[n.AdAvailableErrorParseTimeout]:n.NoAdParseTimeout,[n.AdAvailableErrorSettings]:n.NoAdSettingsError,[n.AdAvailableErrorBadResponse]:n.NoAdBadResponse,[n.AdAvailableErrorSameAd]:n.NoAdSameAd},l=Object.keys(a),d=l.filter((e=>e!==n.AdAvailableErrorVast)),c=l.map((e=>a[e])),h=(c.filter((e=>e!==n.NoAdVastError)),([e,t])=>e.replace("{code}",t.toString())),u=e=>{const t=e.split("-"),i=parseInt(t[t.length-1],10);return[p(e)?n.AdAvailableErrorVast:n.NoAdVastError,i]},p=e=>new RegExp(n.AdAvailableErrorVast.replace("{code}","\\d{3}")).test(e),g=e=>new RegExp(n.NoAdVastError.replace("{code}","\\d{3}")).test(e)},8101:(e,t,i)=>{"use strict";var n;i.d(t,{K:()=>s,v:()=>n}),function(e){e.Error="error",e.Click="click",e.Pause="pause",e.Resume="resume",e.Skip="skip",e.CreativeView="creativeView",e.Start="start",e.FirstQuartile="firstQuartile",e.Midpoint="midpoint",e.ThirdQuartile="thirdQuartile",e.Complete="complete",e.Impression="impression",e.Close="close",e.Progress="progress",e.Mute="mute",e.Unmute="unmute",e.Rewind="rewind",e.Fullscreen="fullscreen",e.ExitFullscreen="exitFullscreen",e.Expand="expand",e.Collapse="collapse",e.AcceptInvitationLinear="acceptInvitationLinear",e.AcceptInvitation="acceptInvitation",e.CloseLinear="closeLinear",e.NoAd="noAd",e.NoLinearAd="noLinearAd",e.CustomClicks="customClicks",e.Billable="billable",e.OtherAdInteraction="otherAdInteraction",e.ClickIcon="clickIcon"}(n||(n={}));const s=Object.values(n)},5948:(e,t,i)=>{"use strict";i.d(t,{Fl:()=>n.Fl,Q4:()=>n.Q4,cS:()=>n.cS,pb:()=>n.pb,rv:()=>n.rv,uZ:()=>n.uZ});var n=i(1286);i(8101),i(5864),i(8709)},8709:(e,t,i)=>{"use strict";i.d(t,{HG:()=>c,OX:()=>d,QV:()=>u,St:()=>l,rP:()=>h});var n=i(4672),s=i(3441),o=i(6992),r=i(5864),a=i(1286);const l=["f","ts","fv","action","referer","pageId","pid","auctid","env","pfid","gid","sid","vid","slot","gdpr_status","gdpr_consent","gdpr_reason","gdpr_api_version","gdpr_cmp_id","hb_provider","ad_source_id","error_cause","cid","dsp_campaign_id","dsp_creative_id","scid","studio_cid","hb_h","hb_w"],d=Object.values(a.Q4).filter((e=>!a.pq.some((t=>e===t)))).reduce(((e,t)=>t===a.Q4.AdAvailableErrorVast?[...e,...o.N.map((e=>(0,a.cS)([t,e])))]:[...e,t]),[]),c=e=>e.match({none:()=>"",some:e=>`${e}`}),h=e=>null==e?"":`${e}`,u=e=>t=>(0,n.p2)(e).map(Object.keys).map((e=>e.filter((e=>!t.match(new RegExp(`${e}=[^&]`)))))).filter((e=>e.length>0)).match({none:()=>t,some:i=>{const{baseUrl:n,queryParameters:o}=i.reduce(((t,i)=>({...t,queryParameters:{...t.queryParameters,[i]:e[i]}})),(0,r.Dl)(t));return(0,s.mR)(n,o)}})},8338:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>C,Bn:()=>E,Fm:()=>p,xy:()=>v});var n=i(4672),s=i(4461),o=i(589),r=i(2203),a=i(7148),l=i(1586),d=i(8709),c=i(5864),h=i(5948);const u=new r.V("tracker-v2 formatTracker"),p=(e,{trackedEvents:t})=>!t.some((t=>t.event===e)),g=(e,t)=>i=>{const n=(0,s.Lx)(i.trackedEvents,(e=>e.map((0,l.prop)("event")))),r=n.filter(h.uZ).reduce(((e,t)=>(i,n)=>(0,s.Lx)(n,h.rv,o.v.fstMap((e=>h.Fl[e])),h.cS,(n=>v(n,h.Q4.NoAdVastError,t,e,i,E(n,e)))))(e,t),i);return n.filter((e=>h.pb.some((t=>t===e)))).reduce(((e,t)=>(i,n)=>{const s=h.Fl[n];return v(s,s,t,e,i,E(s,e))})(e,t),r)},m=["gdpr_status","gdpr_consent","gdpr_reason","gdpr_api_version","gdpr_cmp_id","rpm_reason"],f=[h.Q4.SlotVisibilityTiny,h.Q4.SlotVisibilityInvalidDom,h.Q4.SlotVisibilityHiddenDisplay,h.Q4.SlotVisibilityHiddenOverflow],A=({queryParameters:e,businessIds:{insertionId:t,connectionId:i}})=>({...(0,a.LV)(e,(e=>d.St.includes(e)&&!m.includes(e))),gid:t,sid:i}),v=(e,t,i,o,r,a,d=l.identity)=>{if(!i(e,r))return f.includes(e)||u.debug(`Could not track format event ${e}, tracked events: `,r.trackedEvents),r;const{trackStrategy:c,baseUrl:p,formatVersion:m,referer:v,timestamp:b=Date.now()}=o;return c([a]),(0,s.Lx)({...r,trackedEvents:[...r.trackedEvents,{event:e,time:b,trackingUrl:a}]},d,(e=>t===h.Q4.AdCall?g({trackStrategy:c,baseUrl:p,formatVersion:m,referer:v,timestamp:b,queryParameters:A(o),trackingUrl:n.NV},i)(e):t===h.Q4.AdAvailableSuccess?g(o,i)(e):e))},b=(e,{trackStrategy:t,timestamp:i=Date.now()})=>n=>{if(0===n.customTrackings.length)return n;{const s=n.customTrackings.filter((t=>t.event===e)).flatMap((e=>e.trackingUrls));return t(s),{...n,trackedEvents:[...n.trackedEvents,...s.map((t=>({event:e,time:i,trackingUrl:t})))]}}},w=(e,t)=>()=>{const{baseUrl:i,formatVersion:n,referer:s,timestamp:o=Date.now(),queryParameters:r}=t;return(0,c.qQ)((0,c.gE)(i,{...r,action:e,fv:n,ts:o.toString(),referer:s}))},y=e=>t=>{const{formatVersion:i,referer:n,timestamp:s=Date.now()}=e;return(0,c.qQ)({baseUrl:t,queryParameters:{fv:i,ts:s.toString(),referer:n}})},E=(e,t)=>t.trackingUrl.match({some:y(t),none:w(e,t)}),I={track:(e,t,i)=>v(e,e,I.canTrack,t,i,E(e,t),b(e,t)),trackFormatError:(e,t,i)=>(0,s.Lx)((0,h.cS)([h.Q4.AdAvailableErrorVast,e]),(e=>v(e,h.Q4.AdAvailableErrorVast,I.canTrack,t,i,E(e,t),b(e,t)))),canTrack:p},C=I},7058:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>m,Re:()=>g,Z_:()=>h,Zg:()=>u,zB:()=>p});var n=i(1802),s=i(4672),o=(i(8101),i(4878)),r=i(8338),a=(i(9639),i(5864));const l=e=>Object.keys(e).filter((e=>!["cs","revenue_advertising","revenue_fee","hb_bid_response_price_usd"].includes(e)&&!/(e|s|c|_|rpm_)?(cost|revenue|hb_bid_response_price)(_fp)?(_curr)?/.test(e)&&!/publisher_platform_fee(_curr|_waived)?/.test(e))),d={track:(e,t,i)=>{const{trackStrategy:n,trackingUrl:s,timestamp:o=Date.now()}=t,r=(e=>(0,a.qQ)((0,a.Dl)(e),l))(s);return n([r]),{...i,trackedEvents:[...i.trackedEvents,{event:e,time:o,trackingUrl:r}]}}},c=(e,t,i,n)=>e.reduce(((e,{event:t,trackingUrl:s})=>d.track(t,{...i,trackingUrl:(0,a._u)(s,n)},e)),t),h=(e,t,i,o=s.NV)=>(s,a)=>{const l=r.Ay.track(e,i,s);return[l,c((0,n.difference)(s.trackedEvents)(l.trackedEvents),a,{...t,timestamp:i.timestamp},o)]},u=(e,t,i,o=s.NV)=>(s,a)=>{const l=r.Ay.trackFormatError(e,i,s);return[l,c((0,n.difference)(s.trackedEvents)(l.trackedEvents),a,{...t,timestamp:i.timestamp},o)]},p=(e,t,i,r=s.NV)=>(s,a)=>{const l=o.A.track(e,i,s);return[l,c((0,n.difference)(s.trackedEvents)(l.trackedEvents),a,{...t,timestamp:i.timestamp},r)]},g=(e,t,i,r=s.NV)=>(s,a)=>{const l=o.A.trackFormatError(e,i,s);return[l,c((0,n.difference)(s.trackedEvents)(l.trackedEvents),a,{...t,timestamp:i.timestamp},r)]},m=d},4878:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(5948),s=i(4461),o=i(8338);const r={track:(e,t,i)=>(0,o.xy)(e,e,r.canTrack,t,i,(0,o.Bn)(e,t)),trackFormatError:(e,t,i)=>(0,s.Lx)((0,n.cS)([n.Q4.AdAvailableErrorVast,e]),(e=>(0,o.xy)(e,n.Q4.AdAvailableErrorVast,r.canTrack,t,i,(0,o.Bn)(e,t)))),canTrack:o.Fm},a=r},9639:(e,t,i)=>{"use strict";i.d(t,{Vd:()=>x,Ft:()=>L,Sr:()=>P});var n=i(4672),s=i(4461),o=i(8101),r=i(3757),a=i(1586),l=i(2203),d=i(1802);const c=[o.v.Progress,o.v.Click,o.v.Resume,o.v.Pause,o.v.Mute,o.v.Unmute,o.v.Expand,o.v.Collapse],h=(e,t,i)=>n=>{if(0===n.customTrackings.length)return n;{const s=n.customTrackings.filter((t=>t.event===e)).flatMap((e=>e.trackingUrls));return s.length>0?i(e,(()=>!0),s,t,n):n}},u=(e,t,i)=>n=>{if(0===n.customTrackings.length)return n;{const s=n.customProgressTrackings.filter((t=>t.offset===e)).flatMap((e=>e.trackingUrls));return s.length>0?i(o.v.Progress,(()=>!0),s,t,n):n}},p=(e,t,i,n)=>r=>1===e?r:(0,s.Lx)([...Array(e-1)].map(((e,t)=>t+1)),(0,d.difference)(r.trackedProgressOffsets),(e=>e.map((e=>[e,r.progressTrackings.find((t=>t.offset===e))?.trackingUrls??[]])).filter((([,e])=>e.length>0)).reduce(((e,[s,r])=>n(o.v.Progress,((e,t)=>i(e,t)&&!t.trackedProgressOffsets.includes(s)),r,t,e,(e=>({...e,trackedProgressOffsets:[...e.trackedProgressOffsets,s]})))),r)));var g=i(2172);const m=new l.V("tracker-v2 thirdPartyVastTracker"),f=(e,t,i,n,s,o=a.identity)=>{const{macros:l,timestamp:d=Date.now()}=n;return t(e,s)?o(i.reduce(((t,i)=>{const n=(0,r.Q3)(l)(i);return(0,g.j_)(n),{...t,trackedEvents:[...t.trackedEvents,{event:e,time:d,trackingUrl:n}]}}),s)):(m.debug(`Could not track third-party VAST event ${e}, tracked events: `,s.trackedEvents,"multiple-allowed events: ",c),s)},A={track:(e,t,i)=>(0,s.Lx)(f(e,A.canTrack,i.trackings.find((t=>t.event===e))?.trackingUrls??[],t,i),h(e,t,f)),trackProgress:(e,t,i)=>(0,s.Lx)(i,p(e,t,A.canTrack,f),(i=>f(o.v.Progress,((t,i)=>A.canTrack(t,i)&&!i.trackedProgressOffsets.includes(e)),i.progressTrackings.find((t=>t.offset===e))?.trackingUrls??[],t,i,(t=>({...t,trackedProgressOffsets:[...t.trackedProgressOffsets,e]})))),u(e,t,f)),trackVastError:(e,t,i)=>{const n={...t,macros:[...t.macros,(0,r.Vp)("ErrorCode",e.toString())]};return(0,s.Lx)(f(o.v.Error,A.canTrack,i.trackings.find((e=>e.event===o.v.Error))?.trackingUrls??[],n,i),h(o.v.Error,n,f))},canTrack:(e,{trackedEvents:t})=>t.every((t=>t.event!==e))||c.includes(e)},v=A;var b=i(2768),w=i(3441),y=i(5864);const E=new l.V("tracker-v2 teadsVastTracker"),I=e=>({...e,alreadyBilledAdvertiser:!0,trackBillable:!0}),C=e=>{const t=b.canAutoplay()?"apa":"apna";return(0,y.BL)((0,w.WB)(e,"plft",[t,"apnf"].join(",")))},S=(e,t,i,l,d,h=a.identity)=>{const{trackStrategy:u,formatVersion:p,referer:g,timestamp:m=Date.now(),macros:f,slotType:A,creativeSize:v}=l;if(!t(e,d))return E.debug(`Could not track VAST event ${e}, tracked events: `,d.trackedEvents,"multiple-allowed events: ",c),d;const b=i.reduce(((t,i)=>{const[a,l]=(d=t,c=i,(0,w.LY)(c,"revenue")?d.alreadyBilledAdvertiser&&c.indexOf("?dr=0")<0&&c.indexOf("&dr=0")<0?[d,(0,y.BL)(c+"&dr=1")]:[I(d),c]:[d,c]);var d,c;const h=(0,s.Ay)((0,r.Q3)(f),(e=>t=>(0,y.BL)((0,w.WB)(t,"slot",encodeURIComponent(e))))(A),(e=>t=>(0,y.BL)((0,w.WB)(t,"fv",encodeURIComponent(e))))(p),(b=t.studioCreativeId,e=>(0,s.Lx)(b,n.jc.fold((()=>e),(t=>(0,y.BL)((0,w.WB)(e,"studio_cid",encodeURIComponent(t))))))),C,((e,t)=>i=>e===o.v.Click||e===o.v.Impression?t.match({some:e=>{const t=(0,w.WB)(i,"hb_w",encodeURIComponent(e.width));return(0,y.BL)((0,w.WB)(t,"hb_h",encodeURIComponent(e.height)))},none:()=>(0,y.BL)(i)}):(0,y.BL)(i))(e,v),(e=>t=>(0,y.BL)((0,w.WB)(t,"referer",encodeURIComponent(e))))(g))(l);var b;return u([h]),{...a,trackedEvents:[...a.trackedEvents,{event:e,time:m,trackingUrl:h}]}}),d);return h(b)},k={track:(e,t,i)=>(0,s.Lx)(S(e,k.canTrack,i.trackings.find((t=>t.event===e))?.trackingUrls??[],t,i),h(e,t,S)),trackProgress:(e,t,i)=>(0,s.Lx)(i,p(e,t,k.canTrack,S),(i=>S(o.v.Progress,((t,i)=>k.canTrack(t,i)&&!i.trackedProgressOffsets.includes(e)),i.progressTrackings.find((t=>t.offset===e))?.trackingUrls??[],t,i,(t=>({...t,trackedProgressOffsets:[...t.trackedProgressOffsets,e]})))),u(e,t,S)),trackVastError:(e,t,i)=>{const n={...t,macros:[...t.macros,(0,r.Vp)("ErrorCode",e.toString())]};return(0,s.Lx)(S(o.v.Error,k.canTrack,(i.trackings.find((e=>e.event===o.v.Error))?.trackingUrls??[]).map((a=t.errorCause,e=>a.match({some:t=>(0,y.BL)((0,w.WB)(e,"error_cause",encodeURIComponent(t))),none:()=>e}))),n,i),h(o.v.Error,n,S));var a},canTrack:(e,{trackedEvents:t})=>(e===o.v.Pause?t.some((e=>e.event===o.v.Start)):e!==o.v.Resume||t.some((e=>e.event===o.v.Pause)))&&(!t.some((t=>t.event===e))||c.includes(e))},T=k,V=(T.track,T.trackProgress,T.trackVastError,v.track,v.trackProgress,v.trackVastError,e=>([t,i])=>[{...t,trackBillable:!1},t.trackBillable?v.track(o.v.Billable,e,i):i]),P=(e,t)=>(i,n)=>(0,s.Lx)([T.track(e,t,i),v.track(e,t,n)],V(t)),L=(e,t)=>(i,n)=>(0,s.Lx)([T.trackProgress(e,t,i),v.trackProgress(e,t,n)],V(t)),x=(e,t,i)=>(o,r)=>(0,s.Lx)([T.trackVastError(e,{...i,errorCause:n.c$.of(t)},o),v.trackVastError(e,i,r)],V(i))},5864:(e,t,i)=>{"use strict";i.d(t,{BL:()=>l,Dl:()=>p,KB:()=>u,_u:()=>c,gE:()=>h,qQ:()=>b,sc:()=>d});var n=i(7148),s=i(4672),o=i(4461),r=i(3441),a=i(3842);const l=e=>e,d=e=>e,c=(e,t=s.NV)=>{const i=p(e);return b({...i,queryParameters:{...i.queryParameters,action:`debug-${i.queryParameters.action}`,...t.map((e=>({debug_metadata:encodeURIComponent(e)}))).getOrValue({})}})},h=(e,t)=>({baseUrl:e,queryParameters:{...t,f:"1"}}),u=(e,t=s.NV)=>b({...e,queryParameters:{...e.queryParameters,action:`debug-${e.queryParameters.action}`,f:"1",...t.map((e=>({debug_metadata:e}))).getOrValue({})}}),p=e=>{const t=r.qg(e),i=t.search.substring(1).split("&").filter(a.isNotEmpty).map((e=>e.split("="))).reduce(((e,[t,i])=>({...e,[t]:decodeURIComponent(i)})),{});return{baseUrl:`${t.protocol}//${t.host}${/^\//.test(t.pathname)?t.pathname:`/${t.pathname}`}`,queryParameters:i}},g=["gdpr_api_version","gdpr_cmp_id","gdpr_consent"],m=e=>Object.keys(e).filter((t=>""!==e[t]||g.includes(t))),f=e=>Object.keys(e),A=e=>e.sort(((e,t)=>"action"===t?1:"action"===e||"referer"===t?-1:0)),v=e=>/\?/.test(e)?`${e}&`:`${e}?`;function b({baseUrl:e,queryParameters:t},i=f){return(0,o.Ay)(m,(e=>n.LV(t,(t=>e.includes(t)))),i,A,(i=>`${v(e)}${i.map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")}`))(t)}},3165:(e,t,i)=>{"use strict";i.d(t,{l:()=>n});const n=e=>e},9831:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(7214);class s extends n.A{}s.FullscreenRequest="FullscreenRequest",s.PlayPauseRequest="PlayPauseRequest",s.SkipRequest="SkipRequest",s.UIButtonRequest="UIButtonRequest",s.ClickToPlayRequest="ClickToPlayRequest",s.ClickRequest="ClickRequest",s.CallRequest="CallRequest",s.SoundToggleRequest="SoundToggleRequest",s.ReplayRequest="ReplayRequest",s.EndscreenInit="EndscreenInit",s.CollapseRequest="CollapseRequest",s.AdChoicesClickRequest="AdChoicesClickRequest",s.EarlyClickRequest="EarlyClickRequest";const o=s},5666:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var n,s,o=i(1299),r=i(3934),a=i(8442),l=i(7214),d=i(1613);!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(n||(n={})),function(e){e[e.NETWORK_EMPTY=0]="NETWORK_EMPTY",e[e.NETWORK_IDLE=1]="NETWORK_IDLE",e[e.NETWORK_LOADING=2]="NETWORK_LOADING",e[e.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(s||(s={}));var c=i(2768),h=i(8447),u=i(6591),p=i(2190),g=i(6338);let m;class f{constructor(){this.status=a.A.READY,this.eventHandler=new g.A,this.trackingRaised={AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1},this.parameters={},this.skippable=!1,this.expanded=!1}getVPAID(){return this}handshakeVersion(e){return"2.0"}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}initAd(e,t,i,n,s,o){this.status=a.A.LOADING,this.width=e,this.height=t,this.viewMode=i,h.D4(s).fold((e=>{this.dispatchVpaidEvent(l.A.AdError,"invalid creative data: "+s)}),(e=>{for(let t in e)e.hasOwnProperty(t)&&(this.parameters[t]=e[t]);this.environmentVars=o,this.environmentVars.videoSlot||(this.environmentVars.videoSlot=m=m||document.createElement("video")),this.environmentVars.videoSlot.setAttribute&&(this.environmentVars.videoSlot.setAttribute("webkit-playsinline","true"),this.environmentVars.videoSlot.setAttribute("playsinline","true"),c.isAndroid()&&c.isChromeWebView()&&this.environmentVars.videoSlot.getAttribute&&null===this.environmentVars.videoSlot.getAttribute("poster")&&this.environmentVars.videoSlot.setAttribute("poster",u.A),this.environmentVars.videoSlot.getAttribute&&null===this.environmentVars.videoSlot.getAttribute("muted")&&this.environmentVars.videoSlot.setAttribute("muted","true")),this.environmentVars.slot?(this.video=this.environmentVars.videoSlot,this.createContainer(this.environmentVars.slot)):this.dispatchVpaidEvent(l.A.AdError,"no slot provided in environmentVars")}))}startAd(){this.status=a.A.STARTING}skipAd(){this.status=a.A.SKIPPING}stopAd(){this.status=a.A.STOPPING}resizeAd(e,t,i){this.width=e,this.height=t,this.viewMode=i}expandAd(){return!1}collapseAd(){return!1}getAdLinear(){return!0}getAdWidth(){return this.width}getAdHeight(){return this.height}getAdExpanded(){return p.isFullscreen()||this.expanded}getAdSkippableState(){return this.skippable}getAdCompanions(){return""}getAdIcons(){return!1}getAdDuration(){throw"not implemented"}getAdRemainingTime(){throw"not implemented"}getStatus(){return this.status}createContainer(e){this.container||(this.container=document.createElement("div"),this.container.style.setProperty("position","relative"),e.appendChild(this.container))}onAdVideoCompleteDispatched(){this.parameters.noAutoStop?(this.video.addEventListener("seeked",(()=>{this.video.pause()}),!1),this.video.currentTime=1):this.stopAd()}dispatchVpaidEvent(e,t){this.handleVPAIDEvent(new l.A(e,t))}handleVPAIDEvent(e){if(!(this.status===a.A.SKIPPING&&e.type!==l.A.AdSkipped||this.status===a.A.STOPPING&&e.type!==l.A.AdStopped||this.status<=a.A.STOPPED||this.status===a.A.STOPPING&&e.type!==l.A.AdStopped)){switch(e.type){case l.A.AdLoaded:this.status=a.A.LOADED;break;case l.A.AdStarted:this.status=a.A.STARTED;break;case l.A.AdVideoStart:case l.A.AdPlaying:this.status=a.A.PLAYING;break;case l.A.AdPaused:this.status=a.A.PAUSED;break;case l.A.AdVideoComplete:this.status=a.A.COMPLETE;break;case l.A.AdSkipped:this.status=a.A.SKIPPED;break;case l.A.AdStopped:this.status=a.A.STOPPED;break;case l.A.AdDurationChange:case l.A.AdRemainingTimeChange:var t=this.getAdDuration(),i=t-this.getAdRemainingTime();t>0&&i>=.25*t&&!this.trackingRaised.AdVideoFirstQuartile?this.dispatchVpaidEvent(l.A.AdVideoFirstQuartile):t>0&&i>=.5*t&&!this.trackingRaised.AdVideoMidpoint?this.dispatchVpaidEvent(l.A.AdVideoMidpoint):t>0&&i>=.75*t&&!this.trackingRaised.AdVideoThirdQuartile&&this.dispatchVpaidEvent(l.A.AdVideoThirdQuartile);break;case l.A.AdVideoFirstQuartile:case l.A.AdVideoMidpoint:case l.A.AdVideoThirdQuartile:case l.A.AdError:if(this.trackingRaised[e.type])return;this.trackingRaised[e.type]=!0}this.eventHandler.handleEvent(e),this.status===a.A.SKIPPED&&this.stopAd(),e.type===l.A.AdVideoComplete&&this.onAdVideoCompleteDispatched()}}handleException(e,t){var i='method "'+t+'" threw an exception: '+e.toString();this.dispatchVpaidEvent(l.A.AdLog,i),this.dispatchVpaidEvent(l.A.AdError,i)}}class A{constructor(e,t,i){this.id=i,this.layer=document.createElement("div"),this.layer.className+="vpaid-clickthrough",this.layer.style.setProperty("cursor","pointer"),this.layer.style.setProperty("opacity","0"),this.layer.style.setProperty("background-color","#FFFFFF"),this.layer.style.setProperty("position","absolute"),this.layer.style.setProperty("z-index","65000"),this.layer.addEventListener("click",(function(n){e(t,i,!0)}),!1)}resize(e,t){this.layer.style.setProperty("width",`${e}px`),this.layer.style.setProperty("height",`${t}px`)}remove(){this.layer.parentNode&&this.layer.parentNode.removeChild(this.layer)}append(e){e.firstChild?e.insertBefore(this.layer,e.firstChild):e.appendChild(this.layer)}}var v=i(3441);class b extends f{constructor(){super(...arguments),this.config={url:"",skippable:!0,skipoffset:0,gradients:!0},this.eventMap={durationchange:"AdDurationChange",resize:"AdSizeChange",volumechange:"AdVolumeChange",ended:"AdVideoComplete",play:"AdPlaying",playing:"AdPlaying",pause:"AdPaused",timeupdate:"AdRemainingTimeChange",error:"AdError"}}initAd(e,t,i,n,s,r){if(this.status===a.A.READY)try{this.parameters=this.config,super.initAd(e,t,i,n,s,r),o.addEventListener("error",this.video,(e=>{this.handleVideoError(e)})),o.addEventListener("loadedmetadata",this.video,(e=>this.dispatchVpaidEvent(d.A.AdVideoMetadata,{width:this.video.videoWidth,height:this.video.videoHeight}))),this.beginingTimestamp=Date.now(),this.video.preload="metadata",this.video.src=(0,v.cY)(this.parameters.url),this.appendVideo(),this.dispatchVpaidEvent(l.A.AdLoaded)}catch(e){this.handleException(e,"initAd")}else this.dispatchVpaidEvent(l.A.AdLog,"creative is not in ready state, cannot call initAd")}startAd(){if(this.status>a.A.LOADED)this.dispatchVpaidEvent(l.A.AdLog,"try to call startAd but ad is starting or is already started");else if(this.status<a.A.LOADED)this.dispatchVpaidEvent(l.A.AdLog,"Ad is not loaded, use initAd first");else try{super.startAd(),this.parameters.gradients&&this.appendGradients(),this.clickThrough=new A(((e,t,i)=>{this.dispatchVpaidEvent(l.A.AdClickThru,{url:e,id:t,playerHandles:i})}),this.parameters.clickThrough),this.clickThrough.append(this.container),this.clickThrough.resize(this.width,this.height),this.setSize(this.width,this.height),this.initListeners(),this.video.play(),this.dispatchVpaidEvent(l.A.AdStarted),this.dispatchVpaidEvent(l.A.AdImpression)}catch(e){this.handleException(e,"startAd")}}skipAd(){if(this.status<=a.A.SKIPPING)this.dispatchVpaidEvent(l.A.AdLog,"Ad is already stopped or is skipping");else try{this.skippable?(super.skipAd(),this.video.pause(),this.video.style.setProperty("display","none"),this.dispatchVpaidEvent(l.A.AdSkipped)):this.dispatchVpaidEvent(l.A.AdLog,"skipAd() called, but creative is not skippable")}catch(e){this.handleException(e,"skipAd")}}resizeAd(e,t,i){try{this.setSize(e,t),this.dispatchVpaidEvent(l.A.AdSizeChange)}catch(e){this.handleException(e,"resizeAd")}}stopAd(){if(this.status<=a.A.STOPPING)this.dispatchVpaidEvent(l.A.AdLog,"Ad is already stopped");else try{super.stopAd(),this.removeVideo(),this.clickThrough.remove(),this.dispatchVpaidEvent(l.A.AdStopped),this.eventHandler.clearListeners()}catch(e){this.handleException(e,"stopAd")}}pauseAd(){try{this.video.pause()}catch(e){this.handleException(e,"pauseAd")}}resumeAd(){try{this.video.play()}catch(e){this.handleException(e,"resumeAd")}}getAdRemainingTime(){return this.video?this.video.duration-this.video.currentTime:0}getAdDuration(){return this.video?this.video.duration:0}getAdVolume(){return this.video?this.video.muted?0:this.video.volume:0}setAdVolume(e){return this.video?(this.video.muted=0===e,this.video.volume=e,this.video.muted?0:this.video.volume):0}appendGradients(){["top","bottom"].forEach((e=>{let t=document.createElement("div");t.style.setProperty("background","transparent url(data:image/png;base64,"+b["GRADIENT_"+e.toUpperCase()]+")"),t.style.setProperty("position","absolute"),t.style.setProperty("left","0"),t.style[e]="0",t.style.setProperty("z-index","2"),t.style.setProperty("height","30px"),t.style.setProperty("width","100%"),this.container.appendChild(t)}))}appendVideo(){this.video.parentNode||(this.dispatchVpaidEvent(l.A.AdLog,"Video slot got no parent node, appending to container"),this.container.appendChild(this.video))}removeVideo(){try{this.video.parentNode.removeChild(this.video)}catch(e){this.dispatchVpaidEvent(l.A.AdLog,"teads-vpaid-video, cannot remove video from DOM")}}sendAdVideoStartEvent(){this.videoHasStarted||(this.videoHasStarted=!0,this.dispatchVpaidEvent(l.A.AdVideoStart))}setSize(e,t){this.width=e,this.height=t,this.video&&(this.video.width=this.width,this.video.height=this.height),this.clickThrough&&this.clickThrough.resize(e,t),this.container.style.setProperty("width",`${e}px`),this.container.style.setProperty("height",`${t}px`)}initListeners(){for(var e in this.eventMap)this.video.addEventListener(e,(e=>{this.handleVideoEvent(e)}),!1)}handleVideoError(e){if("error"===e.type){let e=this.video.error;if(e)switch(e.code){case 1:break;case 2:this.dispatchVpaidEvent(l.A.AdError,{message:"video error : A network error caused the ressource to stop being fetched",id:r.i.MEDIAFILE_TIMEOUT.id});break;case 3:this.dispatchVpaidEvent(l.A.AdError,{message:"video error : A decoding error caused the ressource to stop being fetched",id:r.i.MEDIAFILE_DISPLAY.id});break;case 4:let e={message:"video error : The associated ressource has been detected to be not suitable",id:r.i.GENERAL_LINEAR.id};this.video.readyState===n.HAVE_NOTHING&&(e.id=r.i.FILE_NOT_FOUND.id),this.dispatchVpaidEvent(l.A.AdError,e)}else this.dispatchVpaidEvent(l.A.AdError,{message:"video error : unkown error",id:r.i.GENERAL.id})}}handleVideoEvent(e){try{var t=this.eventMap[e.type];switch(e.type){case"pause":if(this.video.currentTime===this.video.duration||this.status<=a.A.SKIPPING||this.status===a.A.COMPLETE)return;break;case"play":case"playing":if(this.status===a.A.STARTED)return this.sendAdVideoStartEvent();if(this.status!==a.A.PAUSED)return;break;case"timeupdate":this.parameters.skippable&&!this.skippable&&this.video.currentTime>=Number(this.parameters.skipoffset)&&(this.skippable=!0,this.dispatchVpaidEvent(l.A.AdSkippableStateChange)),(this.status===a.A.STARTED||this.video.currentTime>0)&&this.sendAdVideoStartEvent()}this.dispatchVpaidEvent(t)}catch(t){var i='Creative threw an exception when handling "'+e.type+'" HTML5 video event: '+t.toString();this.dispatchVpaidEvent(l.A.AdLog,i),this.dispatchVpaidEvent(l.A.AdError,{message:i,id:r.i.GENERAL.id})}}}b.GRADIENT="iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM0ODU0RjM1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM0ODU0RjQ1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzQ4NTRGMTVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzQ4NTRGMjVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/",b.GRADIENT_TOP=b.GRADIENT+"Psk0S98AAAAgSURBVHjaYmBgYJBiAhIMIOI/nEDj0oNgYGaAAYAAAwAH4xg8FtOkrgAAAABJRU5ErkJggg==",b.GRADIENT_BOTTOM=b.GRADIENT+"PkIta+gAAAAaSURBVHjaYmBABoxMMIKBCYVLDwLJSoAAAwAWTwBRQ43+sgAAAABJRU5ErkJggg==";const w=b},8442:(e,t,i)=>{"use strict";var n;i.d(t,{A:()=>s}),function(e){e[e.REMOVED=-6]="REMOVED",e[e.REMOVING=-5]="REMOVING",e[e.ERROR=-4]="ERROR",e[e.STOPPED=-3]="STOPPED",e[e.STOPPING=-2]="STOPPING",e[e.SKIPPED=-1]="SKIPPED",e[e.SKIPPING=0]="SKIPPING",e[e.READY=1]="READY",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED",e[e.STARTING=5]="STARTING",e[e.STARTED=6]="STARTED",e[e.PAUSING=7]="PAUSING",e[e.PAUSED=8]="PAUSED",e[e.RESUMING=9]="RESUMING",e[e.PLAYING=10]="PLAYING",e[e.COMPLETE=11]="COMPLETE"}(n||(n={}));const s=n},1613:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});class n{}n.AdVideoMetadata="AdVideoMetadata",n.AdRemovedHeavyAdIntervention="AdRemovedHeavyAdIntervention",n.AdWarningHeavyAdIntervention="AdWarningHeavyAdIntervention";const s=n},6338:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(7214),s=i(1613);class o{constructor(){this.listeners={},this.listenersScope={}}subscribe(e,t,i){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this.listenersScope[t]=this.listenersScope[t]||[],this.listenersScope[t].push(i||null)}unsubscribe(e,t){if(this.listeners[t]){const i=this.listeners[t].indexOf(e);i>=0&&(this.listeners[t][i]=function(){})}}clearListeners(){this.listeners={},this.listenersScope={}}handleEvent(e,t){for(var i=this.listeners[e.type]||[],o=0,r=i.length;o<r;o++)try{var a=[];if(e.data)switch(e.type){case n.A.AdClickThru:a=[e.data.url,e.data.id,!!e.data.playerHandles];break;case n.A.AdLog:case n.A.AdError:case s.A.AdRemovedHeavyAdIntervention:case s.A.AdWarningHeavyAdIntervention:a="string"==typeof e.data?[e.data,null]:"object"==typeof e.data&&e.data.message?[e.data.message,e.data.id]:[String(e.data),null];break;case n.A.AdInteraction:a=[e.data.id];break;case s.A.AdVideoMetadata:a=[e.data]}i[o].apply(this.listenersScope[e.type][o],a)}catch(i){if(t)throw"failed to log error on callback: "+e.data;this.handleEvent({type:n.A.AdLog,data:"Callback #"+o+" on event "+e.type+" throws an exception: "+i},!0)}}}},7214:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});class n{constructor(e,t=null){this.type=e,this.data=t}}n.AdLoaded="AdLoaded",n.AdStarted="AdStarted",n.AdStopped="AdStopped",n.AdSkipped="AdSkipped",n.AdLinearChange="AdLinearChange",n.AdSizeChange="AdSizeChange",n.AdExpandedChange="AdExpandedChange",n.AdSkippableStateChange="AdSkippableStateChange",n.AdRemainingTimeChange="AdRemainingTimeChange",n.AdDurationChange="AdDurationChange",n.AdVolumeChange="AdVolumeChange",n.AdImpression="AdImpression",n.AdVideoStart="AdVideoStart",n.AdVideoFirstQuartile="AdVideoFirstQuartile",n.AdVideoMidpoint="AdVideoMidpoint",n.AdVideoThirdQuartile="AdVideoThirdQuartile",n.AdVideoComplete="AdVideoComplete",n.AdClickThru="AdClickThru",n.AdInteraction="AdInteraction",n.AdUserAcceptInvitation="AdUserAcceptInvitation",n.AdUserMinimize="AdUserMinimize",n.AdUserClose="AdUserClose",n.AdPaused="AdPaused",n.AdPlaying="AdPlaying",n.AdLog="AdLog",n.AdError="AdError";const s=n},7355:(e,t,i)=>{"use strict";i(5666);const n=i(9896).KZ;n.vpaid=n.vpaid||{},window.teads=n},9896:(e,t,i)=>{"use strict";i.d(t,{CD:()=>o.C,Et:()=>n.Et,Gv:()=>n.Gv,KZ:()=>s.KZ,Kg:()=>n.Kg,Lm:()=>n.Lm,Se:()=>n.Se,TO:()=>n.TO,_9:()=>n._9,b0:()=>n.b0,p8:()=>n.p8});var n=i(5100),s=i(5807),o=i(3044)},3044:(e,t,i)=>{"use strict";i.d(t,{C:()=>s});const n=[125,128],s=e=>n.includes(e)},5100:(e,t,i)=>{"use strict";function n(e){return"boolean"==typeof e}function s(e){return"number"==typeof e&&!isNaN(e)}function o(e){return"string"==typeof e}function r(e){return void 0===e}function a(e){return"object"==typeof e&&null!==e}function l(e){const t=new Date,i=t.getUTCHours(),n=t.getUTCDay(),s=t.getUTCDate(),o=1===n&&s<=7;return e.fromHour<=i&&e.toHour>=i&&o}function d(e){const t=e?.getAttribute("src")||"";return t.match(/\/static\/([^/]+)\//)?.[1]||null}function c(e,t=!0){const i=t?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let t=0;t<e;t++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}i.d(t,{Et:()=>s,Gv:()=>a,Kg:()=>o,Lm:()=>n,Se:()=>h,TO:()=>l,_9:()=>c,b0:()=>r,p8:()=>d});const h=(e,t)=>{if(e){let e=null;window.addEventListener("message",(i=>{const n=!e||e===i.data?.host;i.source&&"TEADS_PIXEL_LOADED"===i.data?.type&&n&&(e=i.data?.host,i.source.postMessage({type:"TEADS_SDK_PARAMETERS",teadsClickId:t},i.origin))}))}}},5807:(e,t,i)=>{"use strict";i.d(t,{KZ:()=>n});const n=window.teads||{}},3988:(e,t,i)=>{"use strict";i.d(t,{B:()=>n});const n=e=>{switch(e){case 0:return"0";case 11:case 12:return"1";default:return""}}},2052:(e,t,i)=>{"use strict";i.d(t,{g:()=>n});const n=e=>{switch(e){case 2:return 2;case 1:return 1;default:return}}},6992:(e,t,i)=>{"use strict";var n;i.d(t,{N:()=>s,k:()=>n}),function(e){e[e.XmlParsingError=100]="XmlParsingError",e[e.XmlInvalidSchema=101]="XmlInvalidSchema",e[e.UnsupportedVastVersion=102]="UnsupportedVastVersion",e[e.Trafficking=200]="Trafficking",e[e.PlayerExpectingDifferentLinearity=201]="PlayerExpectingDifferentLinearity",e[e.PlayerExpectingDifferentDuration=202]="PlayerExpectingDifferentDuration",e[e.PlayerExpectingDifferentSize=203]="PlayerExpectingDifferentSize",e[e.GeneralWrapper=300]="GeneralWrapper",e[e.WrapperTimeout=301]="WrapperTimeout",e[e.WrapperLimitReached=302]="WrapperLimitReached",e[e.NoAdsAfterWrappers=303]="NoAdsAfterWrappers",e[e.GeneralLinear=400]="GeneralLinear",e[e.MediaFileNotFound=401]="MediaFileNotFound",e[e.MediaFileTimeout=402]="MediaFileTimeout",e[e.UnsupportedMediaFile=403]="UnsupportedMediaFile",e[e.MediaFileDisplayProblem=405]="MediaFileDisplayProblem",e[e.GeneralNonLinear=500]="GeneralNonLinear",e[e.NonLinearCreativeDimensions=501]="NonLinearCreativeDimensions",e[e.NonLinearUnableFetch=502]="NonLinearUnableFetch",e[e.SupportedNonLinearNotFound=503]="SupportedNonLinearNotFound",e[e.GeneralCompanion=600]="GeneralCompanion",e[e.CompanionDimensions=601]="CompanionDimensions",e[e.CompanionDisplayProblem=602]="CompanionDisplayProblem",e[e.CompanionUnableFetch=603]="CompanionUnableFetch",e[e.SupportedCompanionNotFound=604]="SupportedCompanionNotFound",e[e.Undefined=900]="Undefined",e[e.GeneralVpaid=901]="GeneralVpaid"}(n||(n={}));const s=Object.keys(n).filter((e=>isNaN(e))).map((e=>n[e]))},7982:e=>{e.exports='<div class="teads-wigo-btn"><div style="position: absolute; left:0;top:0;padding: 0 4%; border: 1px solid white; color: white; font-size: 10px; text-align: center; font-family: Arial; line-height:16px;"></div><div style="border: 6px solid #f3f3f3; border-top: 6px solid #3498db; border-radius: 50%; position: absolute; left: 60%; width: 32%; height: 32%; -webkit-animation: wigospin 2s linear infinite; animation: wigospin 2s linear infinite"></div> <style type="text/css"> .teads-wigo-btn { position: fixed; bottom: 10px; right: 10px; z-index: 2147483647; width: 75px; height: 75px; cursor: pointer; background-image: url(\'https://a.teads.tv/media/format/v3/assets/default/img/wigo.png?v2\'); transition: right ease 0.2s; } @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) { /* Retina */ .teads-wigo-btn { background-size: 75px 75px; background-image: url(\'https://a.teads.tv/media/format/v3/assets/default/img/wigo-2x.png\'); } } @-webkit-keyframes wigospin { 0% { -webkit-transform: rotate(0deg);} 100% { -webkit-transform: rotate(360deg);} } @keyframes wigospin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } </style> </div> '},2431:e=>{e.exports='<div class="smart-header-content"> <div class="close-button-smart"></div> <div class="adChoices-button-smart"></div> <div class="sound-button-smart"> <div class="icon-muteon"></div> </div> </div> '},7618:e=>{e.exports='<style> #{{countdown-id}} svg:nth-child(2) path { -webkit-animation: load {{countdown-duration}}s linear; -moz-animation: load {{countdown-duration}}s linear; -o-animation: load {{countdown-duration}}s linear; animation: load {{countdown-duration}}s linear; } </style> \x3c!-- Container --\x3e <ul class="countdown-circle" id="{{countdown-id}}"> \x3c!-- Item --\x3e <li data-countdown="{{countdown-duration}}" class="countdown-timer"> <svg viewBox="-10 -10 220 220"> <g fill="none" stroke-width="20" transform="translate(100,100)"> <path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#cl1)"/> <path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#cl1)"/> <path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#cl1)"/> <path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cl1)"/> <path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#cl1)"/> <path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#cl1)"/> </g> </svg> <svg viewBox="-10 -10 220 220"> <path d="M200,100 C200,44.771525 155.228475,0 100,0 C44.771525,0 0,44.771525 0,100 C0,155.228475 44.771525,200 100,200 C155.228475,200 200,155.228475 200,100 Z" stroke-dashoffset="629"></path> </svg> </li> </ul> \x3c!-- Defining Angle Gradient Colors --\x3e <svg width="0" height="0"> <defs> <linearGradient id="cl1" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1"> <stop stop-color="#FFFFFF"/> <stop offset="100%" stop-color="#FFFFFF"/> </linearGradient> </defs> </svg> '},7732:e=>{e.exports='<div class="button-container"> <div class="button replay-button"> <div class="icon"> <span class="icon-replay"></span> </div> <div class="text"></div> </div> <div class="button call-button"> <div class="icon"> <span></span> </div> <div class="text"></div> </div> </div> <div class="close-button"> <div class="icon-closeendscreen"></div> </div> <div class="adchoices adchoices-icon"> <span>AdChoices</span> </div> <div class="countdown"></div> '},6842:(e,t,i)=>{e.exports="<!DOCTYPE html> <html> <head> "+i(8705)+' </head> <body> <div id="main-container"> <style> '+i(4916)+' </style> <div id="layout-video-component"> <div class="teads-ui-component-startscreen"></div> <div id="vpaid-container"></div> <div class="teads-ui-component-fullscreenbutton"> <div class="icon-collapse"></div> </div> <div class="teads-ui-component-earlyclickoverlay"></div> <div class="teads-ui-component-progressbar"> <div class="progress"></div> </div> <div class="teads-ui-component-hourglass"></div> <div class="teads-ui-component-soundbutton"></div> <div class="teads-ui-component-closebutton"> <div class="close-button icon-close hide"></div> </div> <div class="teads-ui-component-adchoices adchoices-icon"> <span>AdChoices</span> </div> <div class="teads-ui-component-clickbutton"></div> <div class="teads-ui-component-brandlogo"></div> <div class="teads-ui-component-clicktoplay gradient"> <div class="icon-watchmore"></div> </div> <div class="teads-ui-component-bannervideobottom"></div> <div class="teads-ui-component-endscreen"></div> </div> </div> </body> </html> '},8705:e=>{e.exports="<script type='text/javascript'> var source; window.addEventListener('message', function(event) { if (event.data && event.data.event === 'reportingObserverSource') { source = event.source; } }, true); if (\"ReportingObserver\" in window) { try { const observer = new ReportingObserver(function (reports) { reports.forEach(function (report) { if (source) { source.postMessage({ event: 'heavyAdIntervention', report: JSON.stringify(report) }, '*'); } }) }, {buffered: true}); observer.observe(); } catch (e) { } } <\/script> "}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{generateUuidWithRandom:()=>u,getNativeCrypto:()=>h,getRandomBytes:()=>p,getRandomValue:()=>c});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{bytesToUuid:()=>v,generateUuid:()=>w,getUuid:()=>y,getUuidFromBlobUrl:()=>b,toUuid:()=>f}),__webpack_require__(7479);var i=__webpack_require__(2768),n=__webpack_require__(1299),s=__webpack_require__(2190),o=__webpack_require__(4672),r=__webpack_require__(5536),a=__webpack_require__(1586),l=__webpack_require__(9896);const d=4294967296;function c(e=window){return(0,a.isNative)(Math.random)?Math.random():o.c$.fromNullable(e.crypto).filter((e=>(0,a.isNative)(e.getRandomValues))).flatMap((e=>r.uu.tryCatch((()=>e.getRandomValues(new Uint32Array(1))[0])).toOption())).map((e=>e/(d-1))).getOrValue(0)}function h(e){return(0,l.Gv)(e)&&(0,a.isFunction)(e.getRandomValues)&&(0,a.isNative)(e.getRandomValues)?(0,o.p2)(e):o.NV}function u(e,t=Math.random){const i=new Array(e);for(let n=0,s=0;n<e;n++)0==(3&n)&&(s=4294967296*t()),i[n]=s>>>((3&n)<<3)&255;return i}function p(e,t=window,i=(()=>u(e))){return h(t.crypto).orElse((()=>h(t.msCrypto))).flatMap((t=>{const i=new Uint8Array(e);return t.getRandomValues(i),void 0!==i[e-1]?(0,o.p2)(i):o.NV})).getOrElse(i)}var g=__webpack_require__(3842);function m(e){return o.c$.fromNullable(e).filter((e=>(0,a.hasOwnProperty)(e,"createObjectURL")&&(0,a.isNative)(e.createObjectURL)))}const f=e=>e,A=[];for(let e=0;e<256;++e)A[e]=(e+256).toString(16).slice(1);function v(e,t=0){let i=t;return f([A[e[i++]],A[e[i++]],A[e[i++]],A[e[i++]],"-",A[e[i++]],A[e[i++]],"-",A[e[i++]],A[e[i++]],"-",A[e[i++]],A[e[i++]],"-",A[e[i++]],A[e[i++]],A[e[i++]],A[e[i++]],A[e[i++]],A[e[i++]]].join(""))}function b(e){const t=e.match(/blob:(.*)/),i=t?t[1]:e;return f(i.substring(i.lastIndexOf("/")+1).toLowerCase())}function w(e,t=window){return e.flatMap((e=>{const i=new t.Blob,n=e.createObjectURL(i);return e.revokeObjectURL(n),o.c$.fromNullable(n)})).map(b).getOrElse((()=>v(p(16,t))))}function y(){return r.uu.tryCatch((()=>{const e=(0,a.isFunction)(window.Blob)&&(0,a.isNative)(window.Blob)?m(window.URL).orElse((()=>m(window.webkitURL))):o.NV;return[w(e),w(e)]})).flatMap((([e,t])=>e!==t?(0,r.wV)(e):(0,r.HR)(new Error("Same auctid generated twice"))))}var E=__webpack_require__(1802);i.init();const I=l.KZ;I.ArrayHelper=E,I.Context=i,I.Dom=n,I.HTMLHelper=s,I.Random=e,I.StringHelper=g,I.Utils=a,I.Uuid=t,window.teads=I,__webpack_require__(9710),__webpack_require__(7355);const C=l.KZ;C.player=C.player||{},window.teads=C;var S=__webpack_require__(7812),k=__webpack_require__(6591),T=__webpack_require__(3768),V=__webpack_require__(2625),P=__webpack_require__(6647),L=__webpack_require__(2203),x=__webpack_require__(4077),_=__webpack_require__(3441),N=__webpack_require__(4701),R=__webpack_require__(2375),O=__webpack_require__(3013),D=__webpack_require__(6051);function M({ccpaIab:e}){return o.c$.fromNullable(e).filter((e=>(0,l.Gv)(e)&&(0,a.hasOwnProperty)(e,"consent")&&(0,l.Kg)(e.consent)))}var B=__webpack_require__(1279),F=__webpack_require__(258),U=__webpack_require__(2417),$=__webpack_require__(1120);function W(e){return o.c$.fromNullable(e?.headerBiddingProvider).filter(l.Kg)}const H=(e,t,i,n=2)=>({type:"Error",message:e,reason:t,status:i,consent:"",apiVersion:n??void 0,cmpId:void 0}),z=e=>e.map((e=>{switch(e){case"cmpuishown":return 121;case"tcloaded":return 126;case"useractioncomplete":return 125;default:return 120}})).getOrValue(120),G=new L.V("IAB TCF v2");async function j(e,t,i,n){return new Promise(((s,o)=>{try{e.call(null,t,i,(e=>{s(e)}),n),G.debug("Successfully called __tcfapi function")}catch(e){G.error("Calling __tcfapi function threw an exception",e),o(H("Couldn't find tcfApi in given context",211,21,null))}}))}const q=async(e,t,i,n,s)=>Promise.race([j(e,t,i,s),new Promise(((e,t)=>setTimeout((()=>{t({type:"Timeout",reason:230,status:23,consent:"",apiVersion:2,cmpId:void 0})}),n)))]);function K(e){return!0===e.gdprApplies}function Q(e){return!1===e.gdprApplies}const Y=e=>{if(null==e)throw H("Expected tcData to be an object but got null or undefined",240,21);if("object"!=typeof e)throw H("Expected tcData to be an object but got "+typeof e,240,21);if(!Z(e))throw H(`Expected tcData to contain gdprApplies but got ${e.gdprApplies}`,240,21);if(K(e)&&!X(e))throw H(`Expected tcData to contain a valid tcString but got ${e.tcString}`,240,21);return e},Z=e=>(0,a.hasOwnProperty)(e,"gdprApplies")&&((0,l.b0)(e.gdprApplies)||(0,l.Lm)(e.gdprApplies)),X=e=>(0,a.hasOwnProperty)(e,"tcString")&&(0,l.Kg)(e.tcString),J=e=>{const t=o.c$.fromNullable(e);if(t.isEmpty())throw H("Expected pingReturn to be an object but got null or undefined",240,21);const i=t.getOrNull();if(!(0,l.Gv)(i))throw H("Expected pingReturn to be an object but got "+typeof i,240,21);if(!(e=>(0,a.hasOwnProperty)(e,"cmpLoaded")&&(0,l.Lm)(e.cmpLoaded))(i))throw H(`Expected pingReturn to have a valid cmpLoaded but got ${i.cmpLoaded}`,240,21);if(!(e=>(0,a.hasOwnProperty)(e,"gdprApplies")&&((0,l.b0)(e.gdprApplies)||(0,l.Lm)(e.gdprApplies)))(i))throw H(`Expected pingReturn to have a valid gpdrApplies but got ${i.gdprApplies}`,240,21);if(!(e=>(0,a.hasValidProperty)(e,"cmpStatus",l.Kg)&&["error","loaded","stub"].some((t=>t===e.cmpStatus.toLowerCase())))(i))throw H(`Expected pingReturn to have a valid cmpStatus but got ${i.cmpStatus}`,240,21);return i},ee=async(e,t,i)=>{const n=await e.ping(t);try{J(n)}catch(i){return t-10<=0?H(i.message,240,21):new Promise((i=>{const n=setTimeout((async()=>{i(ee(e,t-50,n))}),50)}))}finally{i&&clearTimeout(i)}return await te(e,t)},te=async(e,t)=>{try{const r=await e.addEventListener(t);return Y(r),e.removeEventListener(r.listenerId),K(r)?(i=r.tcString,n=r.cmpId,s=r.eventStatus,{type:"AddEventListener",consent:i,reason:z(o.c$.fromNullable(s)),status:12,apiVersion:2,cmpId:n}):Q(r)?(e=>({type:"AddEventListenerDoesNotApply",reason:0,status:0,consent:"",apiVersion:2,cmpId:e}))(r.cmpId):{type:"AddEventListenerUnknown",reason:250,status:25,consent:"",apiVersion:2,cmpId:void 0}}catch{return ie(e,t)}var i,n,s},ie=async(e,t)=>{const i=await e.getTCData(t);return Y(i),K(i)?(n=i.tcString,s=i.cmpId,r=i.eventStatus,{type:"GetTCData",consent:n,reason:z(o.c$.fromNullable(r)),status:12,apiVersion:2,cmpId:s}):Q(i)?(e=>({type:"GetTCDataDoesNotApply",reason:0,status:0,consent:"",apiVersion:2,cmpId:e}))(i.cmpId):{type:"GetTCDataUnknown",reason:250,status:25,consent:"",apiVersion:2,cmpId:void 0};var n,s,r};function ne(e){return(0,l.Gv)(e)&&(0,a.hasOwnProperty)(e,"version")&&(0,a.hasOwnProperty)(e,"uspString")&&(0,l.Kg)(e.uspString)}var se=__webpack_require__(7354);const oe=se.ob,re=({success:e,returnValue:t})=>({success:e,usPrivacyString:ne(t)?o.c$.of(t.uspString):(0,l.Kg)(t)?o.c$.of(t):o.NV}),ae=e=>o.c$.fromNullable(e.frames.__uspapiLocator).nonEmpty(),le=(e,t)=>r.uu.tryCatch((()=>e(t))).fold((e=>(0,r.MN)("Error while trying to evaluate the predicate.")),(i=>i?(0,r.xe)(t):(0,s.isChildWindow)(t)?le(e,t.parent):(0,r.MN)("Could not find any window matching the predicate."))),de=e=>(0,l.Gv)(e)&&(0,l.Gv)(e.__uspapiReturn)&&e.__uspapiReturn.hasOwnProperty("returnValue")&&e.__uspapiReturn.hasOwnProperty("success")&&e.__uspapiReturn.hasOwnProperty("callId"),ce={uspApi:{getUsPrivacyData:(e,t)=>new Promise((i=>{const n=setTimeout((()=>i({_tag:"timeout"})),t);o.c$.fromNullable(e).filter(a.isFunction).match({none:()=>(clearTimeout(n),i({_tag:"not-found"})),some:e=>e("getUSPData",1,((e,t)=>{clearTimeout(n),t&&ne(e)?i({_tag:"successful",usPrivacyString:e.uspString}):i({_tag:"unsuccessful"})}))})})),matcher:({onLocatorNotFound:e,onUnsuccessful:t,onSuccessful:i,onTimeout:n})=>s=>{switch(s._tag){case"not-found":return e();case"timeout":return n();case"unsuccessful":return t();case"successful":return i(s.usPrivacyString);default:(0,a.exhaustive)(s)}}},amp:{getUsPrivacyData:oe},postMessageApi:{getUsPrivacyData:(e,t,i)=>r.uu.tryCatch((()=>new Promise((s=>{le(ae,e).fold((e=>s({_tag:"not-found"})),(r=>{const a=(0,g.rand)(10),l=({data:t,source:i})=>{i===r&&o.c$.of(t).filter(de).map((({__uspapiReturn:e})=>e)).filter((({callId:e})=>e===a)).map(re).forEach((({success:t,usPrivacyString:i})=>{(0,n.removeEventListener)("message",e,l),t?i.match({some:e=>s({_tag:"successful",usPrivacyString:e}),none:()=>s({_tag:"malformed-response"})}):s({_tag:"unsuccessful"})}))};setTimeout((()=>{try{(0,n.removeEventListener)("message",e,l),s({_tag:"timeout"})}catch(e){i.forEach((t=>t.error(`ccpa-error 1 ${e}`,1)))}}),t),(0,n.addEventListener)("message",e,l),r.postMessage({__uspapiCall:{command:"getUSPData",parameter:void 0,version:1,callId:a}},"*")}))})))).fold((e=>(i.forEach((t=>t.error(`ccpa-error 2 ${e}`,1))),Promise.resolve({_tag:"unsuccessful"}))),(e=>e)),matcher:({onLocatorNotFound:e,onTimeout:t,onUnsuccessful:i,onMalformedResponse:n,onSuccessful:s})=>o=>{switch(o._tag){case"not-found":return e();case"timeout":return t();case"unsuccessful":return i();case"malformed-response":return n();case"successful":return s(o.usPrivacyString);default:(0,a.exhaustive)(o)}}}};var he=__webpack_require__(5490);const ue=(0,he.A)(((e,t)=>{if(t.hasOwnProperty("placementMetadata")){const i=t.placementMetadata;if((0,l.Gv)(i)&&(0,l.Gv)(i[e])){const{adCallTrackingUrl:t,auctionId:n}=i[e];return(0,o.p2)({adCallTrackingUrl:o.c$.fromNullable(t).filter(l.Kg),auctionId:o.c$.fromNullable(n).filter(T.r)})}}return o.NV})),pe=e=>{if((0,a.hasOwnProperty)(e,"wigo")){const t=e.wigo;if((0,l.Gv)(t)&&(0,a.hasOwnProperty)(t,"reportEvent")&&(0,a.hasOwnProperty)(t,"reportName")){const{reportEvent:e,reportName:i}=t;if((0,l.Kg)(e)&&(0,l.Kg)(i))return(0,o.p2)({reportEvent:e,reportName:i})}}return o.NV};var ge=__webpack_require__(8562),me=__webpack_require__(3940),fe=__webpack_require__(1286),Ae=__webpack_require__(667);const ve=e=>(0,a.isArray)(e)&&e.every((e=>(0,l.Kg)(e)&&(0,l.Et)(parseInt(e,10)))),be=e=>r.uu.tryCatch((()=>e.localStorage.getItem("_pdfps"))).toOption().flatMap((e=>r.uu.tryCatch((()=>JSON.parse(e))).toOption())).filter(ve);var we=__webpack_require__(8997);let ye=o.NV;const Ee=new L.V("helper.ViewerInfo"),Ie=e=>e&&e.hasOwnProperty("teadsViewerInfo"),Ce=e=>(0,l.Gv)(e)&&(0,a.hasOwnProperty)(e,"__tcfapiReturn")&&(0,l.Gv)(e.__tcfapiReturn)&&(0,a.hasOwnProperty)(e.__tcfapiReturn,"returnValue")&&(0,a.hasOwnProperty)(e.__tcfapiReturn,"success")&&(0,a.hasOwnProperty)(e.__tcfapiReturn,"callId"),Se=(e,t)=>(i,s,o,r)=>{const a=(0,g.rand)(10),l={__tcfapiCall:{command:i,parameter:r,version:s,callId:a}};let d;switch(i){case"removeEventListener":d=Le(t,e,a,o);break;case"ping":d=Ve(t,e,a,o);break;case"getTCData":d=Te(t,e,a,o);break;case"addEventListener":d=Pe(t,e,a,o)}(0,n.addEventListener)("message",t,d),e.postMessage(l,"*")},ke=(e,t,i)=>o.c$.fromNullable(i).filter((t=>t.source===e)).map((({data:e})=>e)).filter(Ce).map((({__tcfapiReturn:e})=>e)).filter((({callId:e})=>e===t)),Te=(e,t,i,s)=>o=>ke(t,i,o).forEach((({success:o,returnValue:r})=>{s(o?r:void 0,o),(0,n.removeEventListener)("message",e,Te(e,t,i,s))})),Ve=(e,t,i,s)=>o=>ke(t,i,o).forEach((({success:o,returnValue:r})=>{(e=>(0,l.b0)(e)||e)(o)?s(r):s(void 0),(0,n.removeEventListener)("message",e,Ve(e,t,i,s))})),Pe=(e,t,i,s)=>o=>ke(t,i,o).forEach((({success:o,returnValue:r})=>{s(o?r:void 0,o),(0,n.removeEventListener)("message",e,Pe(e,t,i,s))})),Le=(e,t,i,s)=>o=>ke(t,i,o).forEach((({success:o})=>{s(o),(0,n.removeEventListener)("message",e,Le(e,t,i,s))}));function xe(e,t){try{if(e(t))return t}catch(e){}if((0,s.isChildWindow)(t)&&t.parent!==t)return xe(e,t.parent)}function _e(e,t,i,n){const r=(0,s.isInCrossDomainIframe)(document.body)||(0,s.isChildWindow)(e),a=r?e=>o.c$.fromNullable(e.frames[i]).nonEmpty():e=>o.c$.fromNullable(e[t]).nonEmpty();if(r){const t=xe(a,e);return t?n(t,e):void 0}return e[t]}const Ne=e=>e.match({some:e=>({us_privacy:e}),none:()=>({})}),Re=e=>o.c$.fromNullable(e?.settings?.values?.placementId).filter(l.Et);class Oe{constructor(e,t,i,n,s,r,a){this.placementAd=e,this.pageId=t,this.adCallTrackingUrl=i,this.auctionId=n,this.viewerId=s,this.gdprIab=r,this.sumologicLogger=a,this.logger=new L.V("helper.RASRequest"),this.uspString=o.NV,this.fraudReason=o.c$.empty(),this.mrgReason=o.NV}initRequest(e,t){if(!this.placementAd.ad&&O.$.isRichAdServerRequestEnabled){this.page={...t};const n=i.getClientSideDeviceProperties(),s={...this.auctionId.map((e=>({auctid:e}))).getOrValue({}),autoplay:i.canAutoplay(),formatVersion:encodeURIComponent("1401"),env:i.getEnv(),...n.map(encodeURIComponent).map((e=>({clientSideDeviceProperties:e}))).getOrValue({})};i.getNetworkBandwidthInMbps().forEach((e=>s.netBw=e)),s.ttfb=(0,U.v)(),this.rasUrl=(0,_.mR)(e,s)}}async fetchRas(){const e={body:JSON.stringify(this.page),method:"POST",headers:{Accept:"application/json; charset=UTF-8"},credentials:"include",redirect:"follow"};return window.isSecureContext&&(e.browsingTopics=!0),Promise.race([fetch(this.rasUrl,e),new Promise(((e,t)=>setTimeout((()=>{t(new Error("RAS request: timeout"))}),O.$.richAdServerRequestTimeout)))])}async send(e,t){W(this.placementAd.ad).filter((e=>"debugFormat"!==e)).isEmpty()?await this.onNonHeaderBidding(e,this.placementAd.placement.pid,t):await this.onHeaderBidding();try{const e=await this.getAdPromiseFromWigo();this.logger.warn("ad has been successfully loaded from a WIGO report",e),this.placementAd.ad=e,this.placementAd.placement.wigo.enableWigo("enableFromReport")}catch{}if(this.placementAd.ad);else try{const e=await this.fetchRas();e.ok?this.onload(await e.json()):(this.logger.error("Request error - Status:",e.status),this.onerror(fe.Q4.AdNotAvailableServerError))}catch(e){this.sumologicLogger.error(`ras-request-error ${this.pageId} ${(0,F.$)(e)}`),this.logger.error("Request error - Status:",fe.Q4.AdNotAvailableNetworkError),this.onerror(fe.Q4.AdNotAvailableNetworkError)}const i=this.fraudReason.getOrNull();return{adResponse:{adCallTrackingUrl:this.adCallTrackingUrl,auctionId:this.auctionId,viewerId:this.viewerId,fraudReason:i},gdprIab:this.gdprIab,usPrivacyString:this.uspString,mrgReasonFromRas:this.mrgReason}}onHeaderBidding(){this.logger.debug("Header Bidding detected: did not try to retrieve CCPA US Privacy string and GDPR consent string as it's been done in the Prebid adapter.")}onNonHeaderBidding(e,t,n){const r=this.fetchUSPrivacyString(50),a=this.fetchGdprConsent(),l=n.getConsent(),{userAgentData:d}=navigator,c=void 0===d?Promise.resolve(null):async function(e){return e.getHighEntropyValues(["architecture","bitness","model","platformVersion","fullVersionList"]).catch((t=>({...e,source:1}))).then((e=>{const{architecture:t,bitness:i,brands:n,fullVersionList:s,mobile:o,model:r,platform:a,platformVersion:l}=e;return{architecture:t??null,bitness:i??null,browsers:(s??n??[]).map((({brand:e,version:t})=>({brand:e,version:t.split(".")}))),mobile:o?1:0,model:r??null,platform:a&&l?{brand:a,version:l.split(".")}:null,source:"source"in e?e.source:2}}))}(d),h=((e,t,i,n,s)=>{if(!((e,t)=>o.c$.fromNullable(t.teadsPermutive).existsIf((t=>t[e])))(e,t))return o.NV;const r=n?be(t.top).orElse((()=>be(t))):be(t);return i.info(`permutive ${s} ${r.map((e=>e.length)).getOrValue("N/A")}`),r})(t,window,this.sumologicLogger,(0,s.isChildWindow)(window)&&!(0,s.isInCrossDomainIframe)(window.document.body),(0,_.I5)().flatMap((e=>o.c$.fromNullable(e.windowReferrerUrl))).map(_.qg).map((e=>e.hostname)).getOrValue("N/A"));return(0,Ae.NG)()===Ae.dL.Global?ge.A.debug.track(this.placementAd.placement.key)(fe.Q4.ClientAdCollision,{baseUrl:O.$.trackingUrl,referer:(0,me.IN)(),queryParameters:{env:i.getEnv(),pageId:this.pageId.toString(),pid:t.toString(),hb_provider:"",auctid:this.auctionId.getOrValue("")},trackingUrl:o.NV},o.c$.of(Ae.zF.ExcludeWithGlobale)):(0,Ae.NG)()===Ae.dL.PostMessage?((0,Ae.KK)(!0),ge.A.debug.track(this.placementAd.placement.key)(fe.Q4.ClientAdCollision,{baseUrl:O.$.trackingUrl,referer:(0,me.IN)(),queryParameters:{env:i.getEnv(),pageId:this.pageId.toString(),pid:t.toString(),hb_provider:"",auctid:this.auctionId.getOrValue("")},trackingUrl:o.NV},o.c$.of(Ae.zF.ExcludeWithPostMessage))):this.logger.debug("no exclusivityPixel infos before RAS"),Promise.all([a,r,l,c]).then((([t,i,n,s])=>{this.makeAdRequest(e)(t,i,n,s,h,ye,(0,Ae.Gd)())}))}fetchUSPrivacyString(e){return r.uu.tryCatch((()=>{const t=this.sumologicLogger,n=ce.postMessageApi.matcher({onLocatorNotFound:()=>(this.logger.debug("No parent window with a child iframe named __uspapiLocator was found"),o.NV),onTimeout:()=>(this.logger.debug("Timeout reached when trying to retrieve US Privacy string via iframes"),o.NV),onUnsuccessful:()=>(this.logger.debug("Could not successfully retrieve US Privacy string via iframes"),o.NV),onMalformedResponse:()=>(this.logger.debug("Got a malformed response for US Privacy string via iframes"),o.NV),onSuccessful:e=>(this.logger.debug(`Got a US Privacy string via iframes: ${e}`),(0,o.p2)(e))}),r=ce.uspApi.matcher({onTimeout:()=>(this.logger.debug("Timeout reached when trying to retrieve US Privacy string with __uspapi function"),o.NV),onLocatorNotFound:()=>(this.logger.debug("__uspapi value provided is not a function, fallback to iframe mechanism",window.__uspapi),o.NV),onUnsuccessful:()=>(this.logger.warn("Calling __uspapi with getUSPData command was unsuccessful"),o.NV),onSuccessful:e=>(this.logger.debug(`Got a US Privacy string by calling __upsapi: ${e}`),(0,o.p2)(e))}),a=()=>ce.postMessageApi.getUsPrivacyData(window,e,(0,o.p2)(t)).then(n),l=(0,s.isInCrossDomainIframe)(document.body)||(0,s.isChildWindow)(window);return i.isAmp()?(()=>ce.amp.getUsPrivacyData(o.c$.fromNullable(window.context)).match({some:e=>(this.logger.debug(`Got a US Privacy string using AMP context: ${e}`),Promise.resolve((0,o.p2)(e))),none:()=>(this.logger.warn("Could not retrieve US Privacy string using AMP context",window.context),a())}))():l?a():ce.uspApi.getUsPrivacyData(window.__uspapi,e).then(r)})).fold((e=>(this.sumologicLogger.error(`ccpa-error 0 ${e}`,1),Promise.resolve(o.NV))),(e=>e))}async fetchGdprConsent(){if(i.isAmp())return Promise.resolve((0,se.M9)());const e=_e(window,"__tcfapi","__tcfapiLocator",Se);if(!e)return H("TCF API not found",220,22,null);try{return await(async(e,t)=>{try{return await ee((i=e,{addEventListener:e=>q(i,"addEventListener",2,e),removeEventListener:e=>{j(i,"removeEventListener",2,e)},ping:e=>q(i,"ping",2,e),getTCData:e=>q(i,"getTCData",2,e)}),t)}catch(e){return e}var i})(e,250)}catch(e){return H(e,211,21)}}makeAdRequest(e){return(t,i,n,s,o,r,a)=>{this.gdprIab=t,this.uspString=i;const l={id:this.pageId,placements:[this.placementAd.report],gdpr_iab:t,...Ne(i),gpp:n,segments:{permutive:o.getOrNull()},first_party_data:{firstPartyCookieTeadsId:r.map((e=>e.teadsViewerInfo.tfpvi)).getOrNull(),sharedIds:r.map((e=>e.teadsViewerInfo.sharedIds)).getOrNull()},ua_ch:s,pageTitle:this.getPageTitle().slice(0,300),pageDescription:this.getPageDescription().slice(0,300),badv:a};this.initRequest(e,l)}}getAdPromiseFromWigo(){return o.c$.fromNullable($.L2.reportPromise).map((e=>e.then((e=>this.getAdFromWigoReport(e).match({some:e=>Promise.resolve(e),none:()=>Promise.reject("ad not available in the report")}))).catch((e=>(this.logger.error("ad Promise from WIGO failed",e),Promise.reject()))))).getOrElse((()=>Promise.reject()))}getPageTitle(){try{return window.top?.document.title??window.top?.document.querySelector('meta[property="og:title"]')?.getAttribute("content")??""}catch(e){return document.title||document.querySelector('meta[property="og:title"]')?.getAttribute("content")||""}}getPageDescription(){let e;try{e=window.top?.document.querySelector('meta[name="description"]')??window.top?.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e?.getAttribute("content")||""}getAdFromWigoReport(e){return o.c$.fromNullable(e.steps).map((e=>e.filter((e=>0===e.step&&1===e.substep)))).filter((e=>e.length>0)).map((e=>e.pop())).flatMap((e=>r.uu.tryCatch((()=>(0,l.Kg)(e.info.store)?JSON.parse(e.info.store):e.info.store)).toOption())).flatMap((e=>o.c$.fromNullable(e.tta))).map((e=>(e[this.pageId]&&(0,a.isArray)(e[this.pageId])&&(e=e[this.pageId].shift()),e.handled=!1,e)))}onload(e){this.logger.info("Successful request",this.rasUrl);const t={placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger},n={env:i.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.auctionId.getOrValue((0,T.M)("")),vid:this.viewerId.getOrValue((0,V.j)("")),slot:this.placementAd.placement.slotType};try{this.logger.info("RAS response",e),Array.isArray(e.ads)||(this.sumologicLogger.error("ras-request-ads-not-array"),this.placementAd.placement&&this.placementAd.report.validity.status&&(0,me.MX)({...t,queryParameters:n}),e.ads=[],this.mrgReason=(0,o.p2)("18"),this.logger.debug("Ads property from ad response is not an array",e)),e.ads.length>1&&(this.logger.warn("Received more than one ad, WTF?"),e.ads=[e.ads[0]]),!0===e.wigoEnabled&&this.placementAd.placement.wigo.enableWigo(),this.placementAd.placement.wigo.settings=pe(e),ue(this.placementAd.placement.pid,e).forEach((({auctionId:e,adCallTrackingUrl:t})=>{this.logger.debug(`PID ${this.placementAd.placement.pid} has auction id `,e),this.auctionId=e,this.adCallTrackingUrl=t})),s=e,(0,a.hasOwnProperty)(s,"viewerId")&&(0,V.I)(s.viewerId)&&(this.logger.debug(`Setting viewerId for PID ${this.placementAd.placement.pid} to `,e.viewerId),this.viewerId=o.c$.of(e.viewerId)),0===e.ads.length?this.placementAd.placement&&this.placementAd.report.validity.status?"string"==typeof e.noAdReason?-1!==["IVT DoubleVerify","IVT Tag","BlockedSite DoubleVerify","Teads Blacklist"].indexOf(e.noAdReason)?this.fraudReason=(0,o.p2)(e.noAdReason):this.logger.debug("Error while parsing noAdReason from ad response: Got an unknown fraud reason"):(this.placementAd.placement.wigo.valid(1,2,"noAd-notFilled","error"),this.logger.debug("Ads list is empty and noAdReason is missing in ad response",e)):this.logger.debug("Ads list is empty and placement validity status is falsy",e.ads,this.placementAd.report.validity):Re(e.ads[0]).match({some:t=>{this.placementAd.placement.pid===t?(this.placementAd.ad?this.logger.debug(`The ad for the PID ${t} has already been loaded`,e.ads[0]):this.placementAd.ad=e.ads[0],this.logger.debug(`Found an ad for placement ${t} in response.ads`,e.ads)):(this.mrgReason=(0,o.p2)("18"),this.logger.debug(`Could not find an ad for placement ${t} in response.ads`,e.ads))},none:()=>{this.mrgReason=(0,o.p2)("18"),this.logger.warn("Placement from ad response does not exist in the tag",this.placementAd.placement,e.ads[0])}}),window._tta&&window._tta[this.pageId]&&window._tta[this.pageId].forEach((e=>{Re(e).match({some:t=>{this.placementAd.placement.pid===t&&(this.placementAd.ad?this.placementAd.ad=function(e,t){let i={settings:{}};return t.type&&t.content?(i.type=t.type,i.content=t.content):(i.type=e.type,i.content=e.content),i.settings=e.settings,i.insertion_id=e.insertion_id,i.connection_id=e.connection_id,i}(this.placementAd.ad,e):this.placementAd.ad=e)},none:()=>{this.logger.warn(`Trying to process _tta object but could not find the related _ttp object (PID: ${this.placementAd.placement.pid})`,this.placementAd.placement,e)}})}))}catch(i){this.sumologicLogger.error(`ras-request-invalid-response ${this.pageId} ${(0,F.$)(i)}`),this.placementAd.placement&&this.placementAd.report.validity.status&&(0,me.MX)({...t,queryParameters:n}),this.logger.error("Invalid response",i,e),this.mrgReason=(0,o.p2)("18")}var s}onerror(e){this.placementAd.placement&&this.placementAd.report.validity.status&&(0,me.nu)(e)({placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger,queryParameters:{env:i.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.auctionId.getOrValue((0,T.M)("")),vid:this.viewerId.getOrValue((0,V.j)("")),slot:this.placementAd.placement.slotType}}),this.mrgReason=(0,o.p2)("18")}}const De=new L.V("helper.UserSync");let Me;function Be(e,t,n,o,r,a){let l;const d=n.match({some:e=>({env:"js-web",hb_provider:e}),none:()=>({env:i.getEnv()})});if(!Me){try{l=(0,s.findTopWindow)(window.document.body)}catch(e){De.warn("Cannot get top window"),l=window}(i=>{const n={pid:e,gdprIab:JSON.stringify(t),fromFormat:!0,...d,...r.match({some:e=>({auctid:e}),none:()=>({})}),...a.match({some:e=>({vid:e}),none:()=>({})}),...Ne(o)};Me=(0,s.createIframe)("user-sync"),Me.id="teadsusersync",Me.src=(0,_.mR)(O.$.userSyncUrl,n)+"&"+Date.now(),Me.style.setProperty("display","none"),i.document.body.appendChild(Me)})(l)}return Me}var Fe=__webpack_require__(5300),Ue=__webpack_require__(6463);const $e=(e,t,i,n)=>{i?n&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t):n&&e.parentNode?e.parentNode.insertBefore(t,e):e.parentNode&&e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.appendChild(t)};var We=__webpack_require__(635);class He{constructor(e,t,i,n,s){this.pageId=e,this.key=t,this.placementConfig=i,this.placementSetting=n,this.wigo=s,this.slotType="native",this.logger=new L.V("placement"),this.sliderEnabled=!1,this.pid=i.pid.get(),this.win=i.parentWindow.getWindow(),this.initContainer(),o.c$.fromNullable(window._ttp).forEach((t=>{this.wigo.valid(0,1,{ttp:t[e]?.[0]??null,tta:window._tta?.[e]?.[0]??null,tts:window._tts?.[e]?.[0]??null},"modal")})),this.wigo.valid(1,0)}canEnableSlider(){return!!this.placementConfig.formatName.isInRead()&&this.placementSetting?.slider?.allowCorner()}enableSlider(){this.sliderEnabled=!0,this.electedSlot=new We.A(this.placementConfig.parentWindow.getWindow().document.body),this.placementConfig.btf.set(!1),this.placementConfig.minimum.set(0),this.placementConfig.auto.set(!1),this.placementConfig.insertBefore.set(!1),this.placementConfig.insertInside.set(!0)}handleNoAd({markId:e,sumologicLogger:t,headerBiddingProvider:r,portfolioItemId:a,adCallTrackOpts:l,auctionId:d,viewerId:c}){if(this.placementConfig.fallback.trigger()){const{key:e,logger:i,wigo:n,slotType:s,pageId:o,pid:l}=this;(0,me.Yp)({placementKey:e,sumologicLogger:t,wigo:n,logger:i,headerBiddingProvider:r,pageId:o,placementId:l,slotType:s,portfolioItemId:a,auctionId:d,viewerId:c}),this.logger.info(D.eW.fallback.noAd),this.wigo.valid(1,2,D.eW.fallback.noAd,"error")}else i.isAmp()&&se.VN();this.sliderEnabled||((e,t,i,r)=>{const a=((e,t,i)=>{const n=t.document.createElement("div");return n.className="teads-adCall",n.style.setProperty("height","Opx","important"),$e(e,n,i.insertInside.isEnabled(),i.insertBefore.isEnabled()),n})(e,t,r);return i.setElementToFollow(a),(0,Ue.Y)((()=>i.followElement()),r.scrollSelector.getSlot(),t.context),new Promise((l=>{let d=(0,n.getClientRectRelativeToDocument)((0,n.getBoundingClientRect)(a),{x:t.scrollX,y:t.scrollY});if(!(0,s.isDisplayNoneOverParents)(o.c$.fromNullable(a)))if((0,s.isInView)({element:a,elementAncestors:(0,s.findParentElements)(a),elementClientRect:(0,n.getClientRectFromClientRectRelativeToDocument)(d,{x:t.scrollX,y:t.scrollY}),mainWindow:(0,s.findTopWindow)(e),thresholdCoefficient:1,elementHeight:1})&&!(0,s.isRectZeroFilled)(d))l();else{const c=(0,Ue.Y)((()=>{const r=(0,n.getBoundingClientRect)(a);d=(0,n.isEmptyBoundingClientRect)(r)?d:(0,n.getClientRectRelativeToDocument)(r,{x:t.scrollX,y:t.scrollY}),(0,s.isInView)({element:a,elementAncestors:(0,s.findParentElements)(a),elementClientRect:(0,n.getClientRectFromClientRectRelativeToDocument)(d,{x:t.scrollX,y:t.scrollY}),mainWindow:(0,s.findTopWindow)(e),thresholdCoefficient:1,elementHeight:1})&&!(0,s.isRectZeroFilled)(d)&&((0,Ue.Q)(c),i.isActivated()||(e=>{o.c$.fromNullable(e.parentElement).forEach((t=>t.removeChild(e)))})(a),l())}),r.scrollSelector.getSlot(),t.context)}}))})(this.electedSlot.getElement(),this.win,this.wigo,this.placementConfig).then((()=>{(0,me.Dh)({placementKey:this.key,sumologicLogger:t,wigo:this.wigo,logger:this.logger,headerBiddingProvider:r,baseUrlWithQueryParameters:l})}))}getParentContainer(){return this.parentContainer}getPlayerContainer(){return this.playerContainer}getInnerContainer(){return this.innerContainer}isSliderEnabled(){return this.sliderEnabled}initContainer(){this.parentContainer=this.win.document.createElement("div"),this.parentContainer.className="teads-"+this.placementConfig.formatName.get(),this.innerContainer=this.win.document.createElement("div"),this.innerContainer.style.setProperty("position","relative"),this.innerContainer.style.setProperty("margin-bottom","0","important"),this.parentContainer.appendChild(this.innerContainer),this.playerContainer=this.win.document.createElement("div"),this.playerContainer.className="teads-player",this.playerContainer.style.setProperty("display","block","important"),this.playerContainer.style.setProperty("margin-bottom","0","important"),this.playerContainer.id="teads"+es++,this.innerContainer.appendChild(this.playerContainer)}}var ze=__webpack_require__(7365);class Ge extends He{constructor(){super(...arguments),this.name="inread"}checkSlot(){return(0,ze.q3)(this,this.wigo).fold((({reason:e})=>({status:!1,reasons:[e]})),(({slot:e})=>(this.electedSlot=e,{status:!0,reasons:[]})))}getElectedSlot(){return this.electedSlot}initDom(e){const t=e.getElement(),i=this.parentContainer;return"PR"!==t.nodeName&&"BR"!==t.nodeName||i.style.setProperty("margin","10px 0"),$e(t,this.parentContainer,this.placementConfig.insertInside.isEnabled(),this.placementConfig.insertBefore.isEnabled()),i}}var je=__webpack_require__(8898);class qe extends je.A{constructor(e=qe.DEFAULT){super("Pid"),this.value=e,this.checkValue()}checkValue(){if(!(0,l.Et)(this.value)||this.value<=0)throw new P.J(P.J.OPTION_PID_INVALID)}get(){return this.value}}qe.DEFAULT=null;const Ke=qe;class Qe extends je.A{static isInternalHostname(e){return/(teads\.(tv|net|com))|(ebuzzing\.(com|github\.io)|(localhost)|(\.pantheonsite\.io))$/i.test(e)}static forceValueIfNeeded(e){const t=r.uu.tryCatch((()=>top.location.hostname)).getOrValue(location.hostname);return(0,i.isDesktop)()&&!Qe.isInternalHostname(t)?["LANDSCAPE"]:e}static filterInvalidValues(e){return e.filter((e=>e in Qe.AvailableRatio))}constructor(e=Qe.DEFAULT){super("AllowedRatio"),this.value=e,this.checkValue()}checkValue(){this.value=o.c$.fromNullable(this.value).map(Qe.forceValueIfNeeded).filter(a.isArray).map(Qe.filterInvalidValues).filter((e=>e.length>0)).getOrValue(Qe.DEFAULT)}get(){return this.value}getRatioFilters(){return this.value.map((e=>Qe.AvailableRatio[e]))}mediafileRatioIsValid(e,t){return this.getRatioFilters().filter((i=>i(t(e)))).length>0}}Qe.AvailableRatio={LANDSCAPE:e=>e>1,SQUARE:e=>1===e,VERTICAL:e=>e<1,ALL:e=>!0},Qe.DEFAULT=["ALL"];const Ye=Qe;var Ze=__webpack_require__(9169);class Xe extends je.A{constructor(e=Xe.DEFAULT){super("Desktop"),this.value=e,this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=Xe.DEFAULT)}isEnabled(){return this.value}}Xe.DEFAULT=!0;const Je=Xe;class et extends je.A{constructor(e=et.DEFAULT){super("Mobile"),this.value=e,this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=et.DEFAULT)}isEnabled(){return this.value}}et.DEFAULT=!0;const tt=et;class it extends je.A{constructor(e=it.DEFAULT){super("Tablet"),this.value=e,this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=it.DEFAULT)}isEnabled(){return this.value}}it.DEFAULT=!0;const nt=it;class st extends je.A{constructor(e=st.DEFAULT){super("Format"),this.value=e,this.checkValue()}checkValue(){if(!(0,l.Kg)(this.value)||!st.VALUES[this.value.toUpperCase()]||(0,i.isAmp)()&&!this.isInRead())throw new P.J(P.J.OPTION_FORMAT_INVALID)}get(){return this.value}isInRead(){return this.value===st.VALUES.INREAD}isInterstitial(){return this.value===st.VALUES.INTERSTITIAL}isRewarded(){return this.value===st.VALUES.REWARDED}}st.VALUES={INREAD:"inread",INTERSTITIAL:"interstitial",REWARDED:"rewarded"},st.DEFAULT=null;const ot=st;class rt extends je.A{constructor(e=rt.DEFAULT){super("Btf"),this.value=e,((0,i.isAmp)()||(0,i.isIABSafeFrame)())&&(this.value=!1),this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=rt.DEFAULT)}set(e){this.value=e}isEnabled(){return this.value}}rt.DEFAULT=!0;const at=rt;class lt extends je.A{static transformStringToObject(e){let t={};return e?(e.split(";").forEach((e=>{let[i,n]=e.split(":");i&&n&&(i=i.trim(),n=n.trim(),t[i]=n,"float"===i&&(t.cssFloat=n,t.styleFloat=n))})),t):t}constructor(e=lt.DEFAULT){super("Css"),this.originalRules=e,this.checkValue(),this.originalRules&&(this.rules=lt.transformStringToObject(this.originalRules))}checkValue(){(0,l.Kg)(this.originalRules)||(this.originalRules=lt.DEFAULT)}getOriginal(){return this.originalRules}applyRulesOn(e){this.applyCssRulesOn(e,this.rules)}applyCssRulesOn(e,t){let i,n=!1;for(let s in t)t.hasOwnProperty(s)&&(n=lt.IMPORTANT_REGEX.test(t[s]),i=t[s].replace(lt.IMPORTANT_REGEX,"").trim(),e.style.setProperty(s,i,n?"important":null))}}lt.DEFAULT=null,lt.IMPORTANT_REGEX=/!\s*important/i;const dt=lt;class ct extends je.A{constructor(e){super("Filter"),this.placement=e,this.func=e&&e.slot?e.slot.filter:null,this.checkValue()}checkValue(){(0,a.isFunction)(this.func)||(this.func=ct.DEFAULT)}trigger(e){var t=!0;if("function"==typeof this.func){try{t=this.func.call(this.placement,e)}catch(e){S.A.error(`filter-threw-err ${(0,F.$)(e)}`),this.logger.error("the filter function threw an error:",e,this.func)}"boolean"!=typeof t&&(t=!0)}return t}}ct.DEFAULT=null;const ht=ct;class ut extends je.A{constructor(e=ut.DEFAULT){super("InsertBefore"),this.value=e,this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=ut.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}ut.DEFAULT=!1;const pt=ut;class gt extends je.A{constructor(e=gt.DEFAULT){super("InsertInside"),this.value=e,this.checkValue()}checkValue(){(0,i.isAmp)()?this.value=gt.DEFAULT_AMP:(0,l.Lm)(this.value)||(this.value=gt.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}gt.DEFAULT=!1,gt.DEFAULT_AMP=!0;const mt=gt;class ft extends je.A{constructor(e=ft.DEFAULT){super("Minimum"),this.value=e,((0,i.isAmp)()||(0,i.isIABSafeFrame)())&&(this.value=1),this.checkValue()}checkValue(){(0,l.Et)(this.value)||(this.value=ft.DEFAULT)}set(e){this.value=e}get(){return this.value}}ft.DEFAULT=1;const At=ft;class vt extends je.A{constructor(e=vt.DEFAULT){super("MinimumBelow"),this.value=e,this.checkValue()}checkValue(){(0,l.Et)(this.value)||(this.value=vt.DEFAULT)}get(){return this.value}}vt.DEFAULT=null;const bt=vt;class wt extends je.A{constructor(e=wt.DEFAULT){if(super("ParentWindow"),this.value=e,this.win=window,this.checkValue(),this.value)try{window.top.document&&(this.win=window.top)}catch(e){this.logger.warn("parentWindow option is enabled but parent window is not accessible",e)}}checkValue(){(0,l.Lm)(this.value)||(this.value=wt.DEFAULT)}getWindow(){return this.win}getValue(){return this.value}}wt.DEFAULT=!0;const yt=wt;class Et extends je.A{constructor(e=Et.DEFAULT){super("Fallback"),this.value=e,this.called=!1,this.checkValue()}checkValue(){(0,a.isFunction)(this.value)||(this.value=Et.DEFAULT)}trigger(e){if(!this.value||this.called)return!1;try{let t=this.value.call(e);if(this.called=!0,t===D.kQ)return this.value=null,!1}catch(e){i.isAmp()&&se.uH(),this.logger.error("the fallback threw an error:",e)}return!0}hasValue(){return!!this.value}}Et.DEFAULT=null;const It=Et;class Ct extends je.A{constructor(e=Ct.DEFAULT){super("RpmFallback"),this.value=e,this.called=!1,this.checkValue()}checkValue(){(0,a.isFunction)(this.value)||(this.value=Ct.DEFAULT)}trigger(e){if(!this.value||this.called)return!1;try{this.value.call(e),this.called=!0}catch(e){this.logger.error("the rpmFallback threw an error:",e)}return!0}}Ct.DEFAULT=null;const St=Ct;var kt=__webpack_require__(171),Tt=__webpack_require__(8625);class Vt extends je.A{constructor(e=Vt.DEFAULT){super("MinimumTextLength"),this.value=e,this.checkValue()}checkValue(){(0,l.Et)(this.value)||(this.value=Vt.DEFAULT)}get(){return this.value}}Vt.DEFAULT=100;const Pt=Vt;class Lt extends je.A{constructor(e=Lt.DEFAULT){super("MinimumWidth"),this.value=e,this.checkValue()}checkValue(){(0,l.Et)(this.value)||(this.value=Lt.DEFAULT)}get(){return this.value}}Lt.DEFAULT=100;const xt=Lt;class _t extends je.A{constructor(e=_t.DEFAULT){super("MaximumWidth"),this.value=e,this.checkValue()}checkValue(){(0,l.Et)(this.value)||(this.value=_t.DEFAULT)}get(){return this.value}}_t.DEFAULT=2e3;const Nt=_t;var Rt=__webpack_require__(9231);class Ot extends Rt.A{constructor(e,t){if(super("BelowSelector"),void 0===t)throw new P.J(P.J.OPTION_PARENTWINDOW_INVALID);this.win=t,e||(e=Ot.DEFAULT),this.value=e,this.checkValue()}checkValue(){this.value===Ot.DEFAULT||(0,l.Kg)(this.value)||n.isHTMLElement(this.value)||n.isNodeList(this.value)||(this.value=Ot.DEFAULT)}get(){return this.value}getFirstElement(){if(!this.hasCachedElement){var e,t=this.value;if("object"==typeof this.value){var i;for(var s in this.value)if(this.value.hasOwnProperty(s)&&(i=this.checkScreenSelector(s,this.win),t=this.value[s],i))break;i?this.logger.debug("Below Selector",i,"selected:",t):this.logger.warn("Below Selector by device not found: ",this.value)}(0,l.Kg)(t)&&t.length>0?e=n.querySelectorAll(t,this.win)[0]:n.isHTMLElement(t)?e=t:n.isNodeList(t)&&(e=t[0]),this.cacheElement(e)}return this.firstElement}getFirstElementRect(){return this.firstElementRect||(this.firstElementRect=n.getBoundingClientRect(this.getFirstElement())),this.firstElementRect}getFirstNodeBelowIndex(e){if(!this.firstNodeBelowIndex&&0!==this.firstNodeBelowIndex){for(var t=!1,i=0;!t&&e[i];)e[i++].getElementRect().top>=this.getFirstElementRect().bottom&&(t=!0);this.firstNodeBelowIndex=i-1}return this.firstNodeBelowIndex}cacheElement(e){this.firstElement=e,this.hasCachedElement=!0}}Ot.DEFAULT=null;const Dt=Ot;class Mt extends je.A{constructor(e=Mt.DEFAULT,t=null){super("Auto"),this.value=e,t&&null!==t.get()&&(this.value=!1),this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=Mt.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}Mt.DEFAULT=!0;const Bt=Mt;class Ft extends je.A{constructor(e=Ft.DEFAULT,t=window){super("Avoid"),this.value=e,this.win=t,this.checkValue()}checkValue(){(0,a.containsKeys)(Ft.VALUES,this.value)||(this.value=Ft.DEFAULT)}get(){return this.value}getSlots(){if(!this.value)return;const e=[],t=this.value.selector;if("string"==typeof t&&t.length>0){const s=n.querySelectorAll(t,this.win);for(var i=0;i<s.length;i++)e.push(new We.A(s[i],i))}else n.isHTMLElement(t)&&e.push(new We.A(t));return e}getDistance(){return this.value.distance}}Ft.VALUES={SELECTOR:"selector",DISTANCE:"distance"},Ft.DEFAULT=null;const Ut=Ft;class $t extends je.A{constructor(e,t){super("ScrollSelector");const i=t.FORCE_DEMO??!1;this.win=i?window:t,this.value=void 0===e?$t.DEFAULT:e,this.checkValue()}checkValue(){(0,l.Kg)(this.value)||n.isHTMLElement(this.value)||(this.value=$t.DEFAULT)}getSlot(){let e=this.win;const t=this.value;if("string"==typeof t&&t.length>0){const i=n.querySelectorAll(t,this.win);i&&1===i.length?e=i[0]:this.logger.warn("Parameter must be a string (CSS Selector) or a DOM Element")}else n.isHTMLElement(t)&&(e=t);return e}}$t.DEFAULT=null;const Wt=$t;class Ht{constructor(e,t=o.NV){this.raw=e,this.headerBiddingProvider=t,e.slot||(e.slot={}),this.pid=new Ke(e.pid),this.formatName=new ot(e.format),this.btf=new at(e.slot.btf),this.css=new dt(e.css),this.filter=new ht(e),this.insertBefore=new pt(e.slot.insertBefore),this.insertInside=new mt(e.slot.insertInside),this.minimum=new At(e.slot.minimum),this.minimumBelow=new bt(e.slot.minimumBelow),this.parentWindow=new yt(e.parentWindow),this.fallback=new It(e.fallback),this.rpmFallback=new St(e.rpmFallback),this.videoFilter=new kt.A(e.slot.videoFilter),this.imageFilter=new Tt.A(e.slot.imageFilter),this.minimumTextLength=new Pt(e.slot.minimumTextLength),this.minimumWidth=new xt(e.slot.minimumWidth),this.maximumWidth=new Nt(e.slot.maximumWidth),this.belowSelector=new Dt(e.slot.belowSelector,this.parentWindow.getWindow()),this.selector=new Ze.A(e.slot.selector,this.parentWindow.getWindow()),this.auto=new Bt(e.slot.auto,this.selector),this.avoid=new Ut(e.slot.avoid,this.parentWindow.getWindow()),this.scrollSelector=new Wt(e.slot.scrollSelector,this.parentWindow.getWindow()),this.callbacks=e.callbacks,this.mobile=new tt(e.mobile),this.tablet=new nt(e.tablet),this.desktop=new Je(e.desktop),this.allowedRatio=new Ye}isMobile(){return this.mobile.isEnabled()}isTablet(){return this.tablet.isEnabled()}isDesktop(){return this.desktop.isEnabled()}}class zt extends je.A{constructor(e){super("Slider"),this.value={...zt.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(zt.VALUES,this.value)||(this.value=zt.DEFAULT)}allowCorner(){return this.value.allow_corner_position}}zt.VALUES={allow_top_position:"top",allow_corner_position:"corner"},zt.DEFAULT={allow_top_position:!1,allow_corner_position:!1};class Gt{static getPlacementSetting(e){if(window._tts&&window._tts[e.get()])return window._tts[e.get()]}constructor(e){this.rawConfig=e,e&&(this.slider=new zt(e.slider))}}var jt=__webpack_require__(7148);function qt({gdprIab:e}){return o.c$.fromNullable(e).filter((e=>(0,l.Gv)(e)&&(0,a.hasOwnProperties)(e,["status","consent"])&&(0,l.Et)(e.status)&&(0,l.Kg)(e.consent)))}const Kt=e=>e.flatMap(qt).map((({status:e,consent:t,reason:i,apiVersion:n,cmpId:s})=>({status:e,consent:t,reason:i??240,apiVersion:n,cmpId:s}))).getOrValue({status:24,consent:"",reason:240,apiVersion:void 0,cmpId:void 0});async function Qt(e,t,i){return new Promise(((n,s)=>{if(void 0!==e)switch(t){case"ping":e(t,((e,t)=>{t?n(e):s(new Error("Ping command failed"))}));break;case"addEventListener":e(t,((e,t)=>{t?n(e):s(new Error("AddEventListener command failed"))}));break;case"removeEventListener":"number"==typeof i&&e(t,i,(()=>{}));break;default:s(new Error("Invalid GPP command"))}}))}class Yt{constructor(){let e,t;this.promise=new Promise(((i,n)=>{e=i,t=n})),this.resolve=e,this.reject=t}}const Zt="1.1",Xt=(e,t,i,n)=>({type:"Error",message:e,reason:t,status:i,version:n}),Jt=({status:e,reason:t,consentString:i,applicableSectionIds:n,version:s,cmpId:o,message:r})=>({status:e,reason:t,consentString:i,applicableSectionIds:n,version:s,cmpId:o,message:r});function ei(e){return"ready"===e}const ti=(e,t,i)=>{if(!i||i.source!==e)return;const n=i.data;if(s=n,!((0,l.Gv)(s)&&(0,a.hasOwnProperty)(s,"__gppReturn")&&(0,l.Gv)(s.__gppReturn)&&(0,a.hasOwnProperty)(s.__gppReturn,"returnValue")&&(0,a.hasOwnProperty)(s.__gppReturn,"success")&&(0,a.hasOwnProperty)(s.__gppReturn,"callId")))return;var s;const o=n;return o.__gppReturn.callId===t?o:void 0},ii=(e,t,i,n,s)=>{const o=(0,l._9)(10),r={__gppCall:{command:i,parameter:s,version:Zt,callId:o}};let a;function d(e,i,n){n(e?i:void 0,e),t.removeEventListener("message",a)}a=t=>{switch(i){case"ping":{const i=ti(e,o,t);if(i){const{success:e,returnValue:t}=i.__gppReturn;d((e=>(0,l.b0)(e)||e)(e),t,n)}break}case"addEventListener":{const i=ti(e,o,t);if(i){const{success:e,returnValue:t}=i.__gppReturn;d(e,t,n)}break}case"removeEventListener":{const i=ti(e,o,t);if(i){const{success:e,returnValue:t}=i.__gppReturn;d(e,t,n)}break}default:throw new Error("Invalid GPP postMessage command")}},t.addEventListener("message",a),e.postMessage(r,"*")},ni=(e,t)=>function(i,n,s){if("function"==typeof n)return ii(e,t,i,n);if("number"==typeof n&&"function"==typeof s)return ii(e,t,i,s,n);throw new Error(`Callback is required for ${i} command`)},si=class{constructor(e=window){this.isGppAvailable=!1,this.gppFuture=new Yt,this.gpp=_e(e,"__gpp","__gppLocator",ni),this.isGppAvailable="function"==typeof this.gpp}checkEventListenerData(e){const t=function(e){if(!ei(e.signalStatus))return Xt("CMP is expecting changes, consent data is not available yet",230,23,e.gppVersion)}(e.pingData);if(t)return Jt(t);const i=null===(n=e.pingData).gppString||void 0===n.gppString?Xt("Expected gppString to be a string but got null or undefined",240,24,n.gppVersion):""===n.gppString?Xt("Expected gppString to not be empty",210,21,n.gppVersion):"DBAA"===n.gppString?Xt("Expected gppString to contain more than the default encoded header",210,21,n.gppVersion):void 0;var n;if(i)return Jt(i);const s=function(e){return 0===e.applicableSections.length?Xt("Expected applicableSections to have at least one applicable section",250,25,e.gppVersion):1===e.applicableSections.length&&-1===e.applicableSections[0]?Xt("GPP does not applies",0,0,e.gppVersion):void 0}(e.pingData);return Jt(s||((e,t,i,n,s=120,o=12)=>({type:"EventListenerResponse",consentString:e,applicableSectionIds:t,reason:s,status:o,version:i,cmpId:n}))(e.pingData.gppString,e.pingData.applicableSections,e.pingData.gppVersion,e.pingData.cmpId))}async retrieveConsent(){if(!this.isGppAvailable)return Jt(Xt("Expected __gpp to be a valid function in the given context",220,22));try{const i=await Qt(this.gpp,"ping");if(ei(i.signalStatus)&&""!==(t=i.gppString)&&"DBAA"!==t&&null!=t&&(e=i.applicableSections).length>0&&(1!==e.length||-1!==e[0]))return Jt(((e,t,i,n,s=120,o=12)=>({type:"PingResponse",consentString:e,applicableSectionIds:t,reason:s,status:o,version:i,cmpId:n}))(i.gppString,i.applicableSections,i.gppVersion,i.cmpId));const n=await Qt(this.gpp,"addEventListener");return Qt(this.gpp,"removeEventListener",n.listenerId),this.checkEventListenerData(n)}catch(e){return Jt(Xt(`Error during GPP command call: ${e}`,211,21,Zt))}var e,t}retrieveConsentWithoutHolding(){Promise.race([this.retrieveConsent(),new Promise(((e,t)=>setTimeout((()=>{t(Jt(((e=230,t=23)=>({type:"Timeout",reason:e,status:t,version:Zt}))()))}),250)))]).then(this.gppFuture.resolve).catch(this.gppFuture.reject)}getConsent(){return this.gppFuture.promise}},oi=new L.V("TtpHandler");function ri({ttpObject:e,pageInstance:t}){return r.uu.tryCatch((()=>e.filter(ai).match({some:e=>jt.jJ(li(t),e),none:()=>oi.warn("The provided ttp object is not valid",e)})))}function ai(e){return(0,l.Gv)(e)}const li=(0,he.A)(((e,t,i)=>{const n=function(e){return(0,l.Kg)(e)?parseInt(e,10):e}(t);if(!function(e){return Jn===e||0===Jn||0===e}(n))throw S.A.error(`multi-page ${Jn} ${n} ${i.map((e=>e.pid)).join(";")}`),new P.J(P.J.MULTIPLE_PAGE_PROCESS);i.forEach(di(e,n)),Jn=Jn||n})),di=(0,he.A)(((e,t,i)=>{r.uu.tryCatch((()=>new Ke(i.pid))).map((e=>e.get())).fold((e=>{oi.warn("Invalid placement ID value provided",i.pid,i,e)}),(n=>{const s=S.A.copy({collectorUrl:"https://s8t.teads.tv/logs/format/http-source",placementId:(0,o.p2)(n)}),r=y(),a=r.toOption().map(T.M),l=new $.L2;if(r.tapLeft((e=>{s.error(`limitedCapabilities ${(0,F.$)(e)}`),(0,me.ol)({placementKey:(0,ge.z)(t,n,0),sumologicLogger:s,wigo:l,logger:oi,headerBiddingProvider:o.NV,viewerId:o.NV,pageId:t,placementId:n,auctionId:a})})),e.placementAd=e.checkPlacement({rawPlacement:i,pageId:t,placementId:n,pageIndex:0,auctionId:a,wigo:l,sumologicLogger:s,headerBiddingProvider:o.NV,adSettings:o.NV}),e.placementAd){e.placementAd=e.checkSlot({placementAd:e.placementAd,wigo:l,auctionId:a,sumologicLogger:s,headerBiddingInfo:o.NV,placementIsFirst:!0,adSettings:o.NV});const t=new si;t.retrieveConsentWithoutHolding(),e.placementAd&&e.callRAS({placementAd:e.placementAd,adCallTrackingUrl:o.NV,auctionId:a,viewerId:o.NV,gdprIab:Kt(o.NV),gppHandler:t,sumologicLogger:s,onRASResponse:()=>{},tagManagerPackage:o.NV}).then((()=>{Fe.J()}))}}))}));var ci=__webpack_require__(3934);class hi extends je.A{constructor(e,t){super("Vast"),this.type=e.type,this.content=e.content,this.pid=t,this.appendPID(),this.checkValue()}checkValue(){if(!(0,l.Kg)(this.type)||!hi.VALUES[this.type.toUpperCase()])throw new P.J(P.J.OPTION_VAST_INVALID);if(!(0,l.Kg)(this.content))throw new P.J(P.J.OPTION_VAST_INVALID)}isVastUrl(){return this.type===hi.VALUES.VASTURL}isVastXml(){return this.type===hi.VALUES.VASTXML}getContent(){return this.content}appendPID(){var e=(0,_.qg)(this.content);this.isVastUrl()&&"a.teads.tv"===e.hostname&&this.pid&&(this.content+=-1===this.content.indexOf("?")?"?":"&",this.content+=`pid=${this.pid}`)}}hi.VALUES={VASTURL:"VastUrl",VASTXML:"VastXml"};const ui=hi;class pi extends je.A{constructor(e=pi.DEFAULT){super("Threshold"),this.value=e,this.checkValue()}checkValue(){if(!(0,l.Et)(this.value)||this.value<=0||this.value>100)throw new P.J(P.J.OPTION_THRESHOLD_MISSING)}get(){return this.value}percentage(){return this.value/100}}pi.DEFAULT=null;const gi=pi;class mi extends je.A{constructor(e=mi.DEFAULT){super("Volume"),B.CA((0,i.getIosVersion)(),"10")?this.value=mi.DEFAULT_IOS10:this.value={...mi.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(mi.VALUES,this.value)||(this.value=mi.DEFAULT)}getMain(){return this.value.main}}mi.VALUES={MAIN:"main"},mi.DEFAULT={main:.35},mi.DEFAULT_IOS10={main:1};const fi=mi;class Ai extends je.A{constructor(e=Ai.DEFAULT){super("Animations"),this.value={...Ai.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(Ai.VALUES,this.value)||(this.value=Ai.DEFAULT)}setExpandDuration(e){Ai.PROPERTIES.forEach((t=>{e.style.setProperty(t,`${this.value.expand}s`)}))}setCollapseDuration(e){Ai.PROPERTIES.forEach((t=>{e.style.setProperty(t,`${this.value.collapse}s`)}))}getExpandDuration(){return this.value.expand}getCollapseDuration(){return this.value.collapse}}Ai.PROPERTIES=["-webkit-transition-duration","-o-transition-duration","-moz-transition-duration","transition-duration"],Ai.VALUES={EXPAND:"expand",COLLAPSE:"collapse"},Ai.DEFAULT={expand:0,collapse:.5};const vi=Ai;class bi extends je.A{constructor(e=bi.DEFAULT){super("AdType"),this.value=e,this.checkValue()}checkValue(){(0,l.Kg)(this.value)&&bi.VALUES[this.value]||(this.value=bi.DEFAULT)}get(){return this.value}isVideo(){return this.value===bi.VALUES.video}isDisplay(){return this.value===bi.VALUES.display}isNative(){return this.value===bi.VALUES.native}}bi.VALUES={video:"video",display:"display",native:"native"},bi.DEFAULT=bi.VALUES.video;const wi=bi;var yi=__webpack_require__(7214),Ei=__webpack_require__(1581);class Ii extends je.A{constructor(e=""){if(super("VtpEvent"),this.event=Ii.DEFAULT_EVENT,this.offset=Ii.DEFAULT_OFFSET,(0,l.Kg)(e)){const[t,i]=e.split("-");t&&Ei.A[t]&&(this.event=Ei.A[t]),this.event===yi.A.AdRemainingTimeChange&&(this.offset=parseInt(i,10))}this.checkValue()}checkValue(){(0,l.Kg)(this.event)&&(0,l.Et)(this.offset)&&!isNaN(this.offset)||(this.event=Ii.DEFAULT_EVENT,this.offset=Ii.DEFAULT_OFFSET)}getEvent(){return this.event}getOffset(){return this.offset}}Ii.DEFAULT_EVENT=null,Ii.DEFAULT_OFFSET=0;const Ci=Ii;class Si extends je.A{constructor(e,t=null){super("SmartPosition"),this.formatName=t,this.value={...Si.DEFAULT,...e},(B.X5(i.getIosVersion(),Si.MIN_IOS_VERSION)||i.isAmp()||i.isIABSafeFrame())&&(this.value.top=!1,this.value.corner=!1),this.checkValue()}checkValue(){(0,a.containsKeys)(Si.VALUES,this.value)||(this.value=Si.DEFAULT)}isEnabled(){return window.DO_BYPASS_DO_FORCE_SMART&&this.formatName?.isInRead()||this.value.mustBypassWhitelist&&(this.value.corner||this.value.top)}isCorner(){return this.value.corner&&this.isEnabled()}isTop(){return this.value.top&&this.isEnabled()&&!i.isDesktop()}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}Si.MIN_IOS_VERSION="7",Si.VALUES={top:"top",corner:"corner"},Si.DEFAULT={top:!1,corner:!1,mustBypassWhitelist:!1};const ki=Si;class Ti extends je.A{constructor(e){super("SliderBehavior"),this.value={...Ti.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(Ti.VALUES,this.value)||(this.value=Ti.DEFAULT)}isEnabled(){return this.value.enable}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}Ti.VALUES={enable:"enable"},Ti.DEFAULT={enable:!1};const Vi=Ti;class Pi extends je.A{constructor(e){super("Smart6Behavior"),this.value={...Pi.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(Pi.VALUES,this.value)||(this.value=Pi.DEFAULT)}isEnabled(){return this.value.corner||this.value.top}isTop(){return this.value.top&&this.isEnabled()&&!i.isDesktop()}isCorner(){return this.value.corner&&this.isEnabled()&&i.isDesktop()}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}Pi.VALUES={top:"top",corner:"corner"},Pi.DEFAULT={top:!1,corner:!1};const Li=Pi;class xi extends je.A{constructor(e){super("CloseButton"),this.getValueFromVast=!e||(0,l.b0)(e.display),this.value={...xi.DEFAULT,...(0,jt.pb)(e,(0,a.not)(l.b0))},this.checkValue()}checkValue(){(0,a.containsKeys)(xi.VALUES,this.value)?(this.value.countdown=+this.value.countdown,(0,l.Et)(this.value.countdown)||(this.value.countdown=0)):this.value=xi.DEFAULT}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}hasToGetValueFromVast(){return this.getValueFromVast}}xi.VALUES={DISPLAY:"display",COUNTDOWN:"countdown"},xi.DEFAULT={display:!0,countdown:0};const _i=xi;class Ni extends je.A{static sanitize(e){return o.c$.fromNullable(e).map((e=>({...Ni.defaultValues,...(0,jt.pb)(e,(0,a.not)(a.isNull))}))).filter(a.matchesCheckers(Ni.checkers)).getOrValue(Ni.defaultValues)}constructor(e){super("SoundButton");const{display:t,countdown:i,type:n}=Ni.sanitize(e);this.isEnabled=t,this.countdown=i,this.type=n}checkValue(){}toString(){return`SoundButton(${this.isEnabled}, ${this.countdown}, ${this.type})`}}Ni.defaultValues={display:!0,countdown:0,type:"mute"},Ni.checkers={display:l.Lm,countdown:l.Et,type:e=>"mute"===e};const Ri=Ni;class Oi extends je.A{constructor(e=Oi.DEFAULT){super("CallButton"),this.value={...Oi.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(Oi.VALUES,this.value)||(this.value=Oi.DEFAULT)}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}getText(){return this.value.text}}Oi.VALUES={DISPLAY:"display",COUNTDOWN:"countdown",TEXT:"text"},Oi.DEFAULT={display:!0,countdown:3,text:"Learn More"};const Di=Oi;class Mi extends je.A{constructor(e=Mi.DEFAULT){super("Timer"),this.value=e,this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=Mi.DEFAULT)}isEnabled(){return this.value}}Mi.DEFAULT=!1;const Bi=Mi;class Fi extends je.A{constructor(e=Fi.DEFAULT){super("ProgressBar"),this.value=e,this.checkValue()}checkValue(){(0,l.Lm)(this.value)||(this.value=Fi.DEFAULT)}isEnabled(){return this.value}}Fi.DEFAULT=!0;const Ui=Fi;class $i{constructor(e){this.lang=e,this.translations={ar:{label:"إعلان"},cs:{label:"REKLAMA"},de:{label:"WERBUNG"},da:{label:"ANNONCE"},en:{label:"ADVERTISING"},es:{label:"PUBLICIDAD"},fr:{label:"PUBLICITÉ"},fi:{label:"MAINONTA"},hr:{label:"OGLAS"},hu:{label:"HIRDETÉS"},id:{label:"Iklan"},it:{label:"PUBBLICITÀ"},ja:{label:"広告"},jamobile:{label:"タップして音声が流れます"},jamobilePR:{label:"[PR]タップして音が流れます"},ko:{label:"광고"},kr:{label:"광고"},mo:{label:"ADVERTISING"},nl:{label:"ADVERTENTIE"},no:{label:"ANNONSERING"},pl:{label:"REKLAMA"},pt:{label:"PUBLICIDADE"},ro:{label:"PUBLICITATE"},ru:{label:"РЕКЛАМА"},sr:{label:"ОГЛАШАВАЊЕ"},sk:{label:"REKLAMA"},sl:{label:"OGLAŠAVANJE"},sv:{label:"ANNONS"},sw:{label:"REKLAM"},tr:{label:"ILAN"},zh:{label:"广告"},"zh-hk":{label:"廣告"},"zh-tw":{label:"廣告"},vi:{label:"ADVERTISING"},"fil-ph":{label:"ADVERTISING"},ms:{label:"ADVERTISING"},"hi-in":{label:"विज्ञापन"}}}translate(e){return(this.translations[this.lang]||{})[e]}}class Wi extends je.A{static getTranslation(){const e=i.getLanguage().toLowerCase();let t=new $i(e).translate("label");return t||5!==e.length||(t=new $i(e.substr(0,2)).translate("label")),t||(t=new $i("en").translate("label")),t}constructor(e=Wi.DEFAULT){super("Label"),this.value={...Wi.DEFAULT,...e},this.checkValue()}checkValue(){(0,a.containsKeys)(Wi.VALUES,this.value)||(this.value=Wi.DEFAULT)}getHTML(){return this.value.html}getText(){return this.value.text}isEnabled(){return this.value.display}}Wi.VALUES={DISPLAY:"display",TEXT:"text",HTML:"html"},Wi.TEXT=Wi.getTranslation(),Wi.DEFAULT={display:!0,text:Wi.TEXT,html:Wi.TEXT};const Hi=Wi;class zi extends je.A{constructor(e,t){var i;super("Credits"),this.value={...zi.DEFAULT_INREAD,...e},t.isEnabled()&&(this.value.display=!1),this.checkValue(),this.value.display=(i=this.value.display,!!O.$.isQA&&i)}checkValue(){(0,a.containsKeys)(zi.VALUES,this.value)||(this.value=zi.DEFAULT_INREAD)}isEnabled(){return this.value.display}getText(){return this.value.text}getLink(){return this.value.link}}zi.VALUES={DISPLAY:"display",TEXT:"text",LINK:"link"},zi.DEFAULT_INREAD={display:!0,text:"Ads by [Teads]",link:"https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads"};const Gi=zi;class ji extends je.A{constructor(e=ji.DEFAULT){super("EndScreen"),this.value={...ji.DEFAULT,...(0,jt.pb)(e,(0,a.not)(l.b0)),callButton:{...ji.DEFAULT.callButton,...(0,jt.pb)(e?.callButton,(0,a.not)(l.b0))},replayButton:{...ji.DEFAULT.replayButton,...(0,jt.pb)(e?.replayButton,(0,a.not)(l.b0))}},(0,i.isAmp)()&&(this.value.display=!0,this.value.autoClose=!1),!1===this.value.autoClose&&(this.value.countdown=0),this.checkValue()}checkValue(){(0,a.containsKeys)(ji.VALUES,this.value)||(this.value=ji.DEFAULT)}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}getCallButton(){return this.value.callButton}getReplayButton(){return this.value.replayButton}getAutoClose(){return this.value.autoClose}}ji.VALUES={DISPLAY:"display",CALLBUTTON:"callButton",REPLAYBUTTON:"replayButton",AUTOCLOSE:"autoClose",COUNTDOWN:"countdown",TYPE:"type"},ji.DEFAULT={display:!0,callButton:{text:"Learn More",type:"learnMore"},replayButton:{text:"Replay"},autoClose:!1,countdown:0,type:"simple"};const qi=ji;class Ki extends je.A{constructor(e=null,t=""){super("BrandLogo");let i={display:!!e&&e.display,url:t};this.value={...Ki.DEFAULT,...i},this.checkValue()}checkValue(){(0,a.containsKeys)(Ki.VALUES,this.value)||(this.value=Ki.DEFAULT)}getUrl(){return this.value.url}isEnabled(){return this.value.display}}Ki.VALUES={DISPLAY:"display",URL:"url"},Ki.DEFAULT={display:!1,url:""};const Qi=Ki;class Yi extends je.A{constructor(e){super("SmartPosition"),this.value=e,this.checkValue()}checkValue(){a.containsKeys(Yi.VALUES,this.value)||(this.value=Yi.DEFAULT)}closeButtonEnabled(){return this.value.closeButtonDisplay}}Yi.VALUES={closeButtonDisplay:"closeButtonDisplay"},Yi.DEFAULT={closeButtonDisplay:!1};const Zi=Yi;class Xi extends je.A{constructor(e=Xi.DEFAULT){super("Launch"),(0,i.isAmp)()?this.value=Xi.VALUES.AUTO:this.value=e,this.checkValue()}checkValue(){(0,l.Kg)(this.value)&&Xi.VALUES[this.value.toUpperCase()]||(this.value=Xi.DEFAULT)}isAuto(){return this.value===Xi.VALUES.AUTO}isThreshold(){return this.value===Xi.VALUES.THRESHOLD}}Xi.VALUES={AUTO:"auto",THRESHOLD:"threshold"},Xi.DEFAULT=Xi.VALUES.AUTO;const Ji=Xi;var en=__webpack_require__(1164);class tn extends je.A{constructor(e=tn.DEFAULT){super("SoundStart"),this.value={...tn.DEFAULT,...e},((0,i.isMobile)()||(0,i.isTablet)())&&(this.value.type="mute"),this.checkValue()}checkValue(){(0,a.containsKeys)(tn.VALUES,this.value)||(this.value=tn.DEFAULT)}isMute(){return this.value.type===tn.VALUES_TYPE.MUTE}isUnmute(){return this.value.type===tn.VALUES_TYPE.UNMUTE}isCountdown(){return this.value.type===tn.VALUES_TYPE.COUNTDOWN}getCountdown(){return this.value.countdown}getType(){return this.value.type}}tn.VALUES={TYPE:"type",COUNTDOWN:"countdown"},tn.VALUES_TYPE={MUTE:"mute",UNMUTE:"unmute",COUNTDOWN:"countdown"},tn.DEFAULT={type:"mute",countdown:0};const nn=tn;class sn extends je.A{constructor(e=sn.VALUES.THRESHOLD){super("VideoPause"),this.value=e,this.checkValue()}checkValue(){(0,l.Kg)(this.value)&&sn.VALUES[this.value.toUpperCase()]||(this.value=sn.DEFAULT)}isNo(){return this.value===sn.VALUES.NO}isThreshold(){return this.value===sn.VALUES.THRESHOLD}getValue(){return this.value}setToNo(){return this.value=sn.VALUES.NO}}sn.VALUES={NO:"no",THRESHOLD:"threshold"},sn.DEFAULT=sn.VALUES.THRESHOLD;const on=sn;class rn extends je.A{constructor(e=rn.DEFAULT){super("SoundMute"),this.value=e,this.checkValue()}checkValue(){(0,l.Kg)(this.value)&&rn.VALUES[this.value.toUpperCase()]||(this.value=rn.DEFAULT)}isNo(){return this.value===rn.VALUES.NO}isThreshold(){return this.value===rn.VALUES.THRESHOLD}}rn.VALUES={NO:"no",THRESHOLD:"threshold"},rn.DEFAULT=rn.VALUES.THRESHOLD;const an=rn;class ln extends je.A{constructor(e=ln.DEFAULT){super("PlayerClick"),this.value=e,(0,i.isDesktop)()&&(this.value=ln.VALUES.CLICK),this.checkValue()}checkValue(){(0,l.Kg)(this.value)&&ln.VALUES[this.value.toUpperCase()]||(this.value=ln.DEFAULT)}isClick(){return this.value===ln.VALUES.CLICK}isFullscreen(){return this.value===ln.VALUES.FULLSCREEN}}ln.VALUES={CLICK:"click",FULLSCREEN:"fullscreen"},ln.DEFAULT=(0,i.isDesktop)()?ln.VALUES.CLICK:ln.VALUES.FULLSCREEN;const dn=ln;class cn extends je.A{constructor(e=cn.DEFAULT){super("End"),this.value=(0,i.isAmp)()?cn.VALUES.ENDSCREEN:e,this.checkValue()}checkValue(){(0,l.Kg)(this.value)&&cn.VALUES[this.value.toUpperCase()]||(this.value=cn.DEFAULT)}isCollapse(){return this.value===cn.VALUES.COLLAPSE}isEndScreen(){return this.value===cn.VALUES.ENDSCREEN}}cn.VALUES={COLLAPSE:"collapse",ENDSCREEN:"endscreen"},cn.DEFAULT=cn.VALUES.ENDSCREEN;const hn=cn;class un extends je.A{constructor(e=un.DEFAULT,t){super("Callbacks"),this.callbacks=e,this.volume=t,this.checkValue()}checkValue(){(0,l.Gv)(this.callbacks)||(this.callbacks=un.DEFAULT)}trigger(e,t,i){if(this.last===e)return this.logger.debug("Callbacks already triggered",e),!1;if(e===yi.A.AdVolumeChange&&t&&(t.getVolume()===this.volume.getMain()?this.trigger("unmute"):t.isMuted()&&this.trigger("mute")),e===yi.A.AdExpandedChange&&i&&(i.isActive()?this.trigger("enterFullscreen"):this.trigger("exitFullscreen")),(0,a.isFunction)(this.callbacks[e]))try{return this.callbacks[e](),this.last=e,!0}catch(t){S.A.error(`cb-threw-err ${e} ${(0,F.$)(t)}`),this.logger.error('the "'+e+'" callback threw an error:',t)}else this.callbacks[e]&&this.logger.error('the "'+e+'" callback is not a function:',this.callbacks[e]);return!1}}un.DEFAULT={};const pn=un;var gn=__webpack_require__(5944);class mn extends je.A{constructor(e){super("AllowedPlayer"),this.setValue(mn.VALUES[e]),this.checkValue()}checkValue(){let e=!1;for(let t in mn.VALUES)mn.VALUES.hasOwnProperty(t)&&(e=e||this.value===mn.VALUES[t]);e||(this.value=mn.DEFAULT)}getValue(){return this.value}setValue(e){this.value=e}}mn.VALUES={html5:gn.l.HTML5,any:gn.l.ANY},mn.DEFAULT=gn.l.ANY;const fn=mn;class An extends je.A{constructor(e=An.DEFAULT_VALUE){super("BannerVideoBottom"),this.value={...An.DEFAULT_VALUE,...e}}checkValue(){}isEnabled(){return this.value.display}getText(){return this.value.text}}An.DEFAULT_VALUE={display:!1,text:"Learn more"};const vn=An,bn=[4,31,45,61,1,2,3,7,20,28,30,39,44,50,65,66,67,70,74,52,73,80,81,21,29,5,32,38,46,62,72,76,78];class wn{constructor(e){if(!e.settings)throw new P.J(P.J.INCOMPLETE_OBJECT);const t={type:e.type,content:e.content};this.vast=new ui(t,e.settings.values.placementId),e.settings.values=e.settings.values||{placementFormat:null,pageId:null,placementId:null,threshold:null},e.settings.components=e.settings.components||{},e.settings.behaviors=e.settings.behaviors||{},this.adSourceId=e.ad_source_id,this.connectionId=e.connection_id,this.insertionId=e.insertion_id,this.dspCampaignId=e.dsp_campaign_id,this.dspCreativeId=e.dsp_creative_id,this.earlyClickProtectionDuration=e.early_click_protection_duration,this.scenarioId=e.scenario_id,this.portfolioItemId=e.portfolio_item_id,i.setIsVideo(-1!==bn.indexOf(this.portfolioItemId)),this.creativeSize=e.creativeSize,this.formatName=new ot(e.settings.values.placementFormat),this.pageId=e.settings.values.pageId,this.placementId=e.settings.values.placementId,this.threshold=new gi(e.settings.values.threshold),this.volume=new fi(e.settings.values.volume),this.animations=new vi(e.settings.values.animations),this.adType=new wi(e.settings.values.adType),this.vtpEvent=new Ci(e.settings.values.vtpEvent),this.smartPosition=new ki(e.settings.behaviors.smartPosition,this.formatName),this.sliderBehavior=new Vi(e.settings.behaviors.slider),this.smart6Behavior=new Li(e.settings.behaviors.smart6Position),this.friendly=o.c$.fromNullable(e.settings.behaviors.friendly).getOrValue(!1),this.closeButton=new _i(e.settings.components.closeButton),this.soundButton=new Ri(e.settings.components.soundButton),this.callButton=new Di(e.settings.components.callButton),this.timer=new Bi(e.settings.components.timer),this.progressBar=new Ui(e.settings.components.progressBar),this.label=new Hi(e.settings.components.label),this.credits=new Gi(e.settings.components.credits,this.smartPosition),this.endScreen=new qi(e.settings.components.endScreen),this.brandLogo=new Qi(e.settings.components.brandLogo,e.settings.values.brandLogoUrl),this.slider=new Zi(e.settings.components.slider),this.bannerVideoBottom=new vn(e.settings.components.bannerVideoBottom),this.launch=new Ji(e.settings.behaviors.launch),this.videoStart=new en.A(e.settings.behaviors.videoStart),this.soundStart=new nn(e.settings.behaviors.soundStart),this.videoPause=new on(e.settings.behaviors.videoPause),this.soundMute=new an(e.settings.behaviors.soundMute),this.playerClick=new dn(dn.VALUES.CLICK),this.end=new hn(e.settings.behaviors.end),this.callbacks=new pn(e.callbacks,this.volume),this.allowedPlayer=new fn(e.settings.values.allowedPlayer),this.exclusiveAdOnScreen=!!e.exclusiveAdOnScreen}}var yn=__webpack_require__(6992),En=__webpack_require__(8709);class In{constructor(){this.error=[],this.click=[],this.pause=[],this.resume=[],this.skip=[],this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.impression=[],this.close=[],this.progress=[],this.mute=[],this.unmute=[],this.rewind=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.closeLinear=[],this.noAd=[],this.noLinearAd=[],this.customClicks=[],this.billable=[],this.otherAdInteraction=[],this.clickIcon=[]}}class Cn{}Cn.error="error",Cn.click="click",Cn.pause="pause",Cn.resume="resume",Cn.skip="skip",Cn.creativeView="creativeView",Cn.start="start",Cn.firstQuartile="firstQuartile",Cn.midpoint="midpoint",Cn.thirdQuartile="thirdQuartile",Cn.complete="complete",Cn.impression="impression",Cn.close="close",Cn.progress="progress",Cn.mute="mute",Cn.unmute="unmute",Cn.rewind="rewind",Cn.fullscreen="fullscreen",Cn.exitFullscreen="exitFullscreen",Cn.expand="expand",Cn.collapse="collapse",Cn.acceptInvitationLinear="acceptInvitationLinear",Cn.acceptInvitation="acceptInvitation",Cn.closeLinear="closeLinear",Cn.noAd="noAd",Cn.noLinearAd="noLinearAd",Cn.customClicks="customClicks",Cn.billable="billable",Cn.otherAdInteraction="otherAdInteraction",Cn.clickIcon="clickIcon";class Sn{constructor(){this.version=2,this.tracking=new In,this.clickThrough=[],this.adChoicesIconClickThrough=o.NV,this.mediaFiles=[],this.title="",this.wrappers=[],this.skippable=!1,this.skipDelay=0,this.extensions=[]}merge(e){var t,i;for(var n in e.version&&this.version<e.version&&(this.version=e.version),!this.url&&e.url&&(this.url=e.url),!this.title&&e.title&&(this.title=e.title),!this.adSystem&&e.adSystem&&(this.adSystem=e.adSystem),!this.id&&e.id&&(this.id=e.id),!this.creativeId&&e.creativeId&&(this.creativeId=e.creativeId),!this.duration&&e.duration&&(this.duration=e.duration),!this.adParameters&&e.adParameters&&(this.adParameters=e.adParameters),e.adTagUri&&this.wrappers.push(e.adTagUri),e.tracking)for(t=0,i=e.tracking[n].length;t<i;t++)"clickIcon"!==n&&this.tracking[n].push(e.tracking[n][t]);for(this.adChoicesIconClickThrough.isEmpty()&&!e.adChoicesIconClickThrough.isEmpty()&&(this.adChoicesIconClickThrough=e.adChoicesIconClickThrough,this.tracking.clickIcon=e.tracking.clickIcon),t=0,i=e.mediaFiles.length;t<i;t++)this.mediaFiles.push(e.mediaFiles[t]);for(t=0,i=e.clickThrough.length;t<i;t++)this.clickThrough.push(e.clickThrough[t]);for(t=0,i=e.extensions.length;t<i;t++)this.extensions.push(e.extensions[t]);!this.skippable&&e.skippable&&(this.skippable=!0,this.skipDelay=e.skipDelay)}}const kn=[1,2],Tn=new L.V("vast.VASTLoader");async function Vn(e,t,i,n=!0){const s=new AbortController,o=s.signal,l=(t=function(e){return r.uu.tryCatch((()=>decodeURIComponent(e))).fold((()=>function(e){return e.replace(/%/g,"")}(e)),(()=>e))}(t=function(e,t=kn,i="Teadstv"){try{let n=g.rand(8);return e.replace(/\[timestamp\]/gi,String(Date.now())).replace(/\[(random|cachebusting|random_number|TTD_CACHEBUSTER)\]/gi,n).replace(/ord=(%n|\{RANDOMNUM\}|%25%25TTD_CACHEBUSTER%25%25)/gi,"ord="+n).replace(/\[APIFRAMEWORKS\]/gi,t.join(",")).replace(/%APIFRAMEWORKS%/gi,t.join(",")).replace(/\[OMIDPARTNER\]/gi,i).replace(/%OMIDPARTNER%/gi,i)}catch(e){Tn.warn("updateUrlPlaceholder threw an exception: "+e)}return e}(t,i.apiFrameworkList))).match(/\/\/.*/);let d;l&&(t=i.forceHTTPS?"https:"+l[0]:(0,a.getProtocol)()+l[0]),Tn.debug("Loading VAST file URL:",t," - credentials:",n);const c=async(s,o=!1)=>{if(S.A.error(`VASTLoader.load load vast file failed credentials=${n}`),!o&&n)return Tn.warn("load file with credentials failed, try without credentials"),await Vn(e,t,i,!1);throw Tn.warn("load file with javascript failed",t),[s,e]},h=i.timeout||$n.TIMEOUT;try{d=setTimeout((()=>{s.abort()}),h);const e=await fetch(t,{credentials:n?"include":"omit",signal:o});if(e.status<200||e.status>=400){let t=ci.W.get(ci.i.WRAPPER_TIMEOUT.id,`invalid fetch response status code ${e.status}`);return Tn.warn("server return an invalid status code : "+t.toString()),404===e.status&&c(ci.W.get(ci.i.WRAPPER_TIMEOUT.id,"empty fetch response"),!0),c(t)}return(await e.text()).trim()}catch(e){return Tn.warn("Could not load XML file directly",e),o.aborted?c(ci.W.get(ci.i.WRAPPER_TIMEOUT.id,`no response after ${h} ms`),!0):c(ci.W.get(ci.i.WRAPPER_TIMEOUT.id,"Error on fetch",e))}finally{clearTimeout(d)}}function Pn(e){if(e)try{var t=function(e){let t=e.firstChild;for(;t;){if(!xn(t))return t;t=t.nextSibling}return null}(e);return t?function(e){return e.textContent?.trim()}(t):""}catch(t){Mn.error(`Couldn't get content for node ${e.nodeName}: "${t}"`)}}function Ln(e,t){try{if(e.attributes[t])return String(e.attributes[t].value)}catch(e){Mn.error(`Couldn't get attribute "${t}" value: "${e}"`)}}function xn(e){return 8===e.nodeType||3===e.nodeType&&function(e){return!!e.textContent&&!/[^\t\n\r ]/.test(e.textContent)}(e)}var _n=__webpack_require__(3757);const Nn=e=>e;var Rn=__webpack_require__(3165),On=__webpack_require__(1336);const Dn=e=>e.includes("[PAGEURL]")?(0,On.HC)(e)(["[PAGEURL]",(0,_.bP)()]):e,Mn=new L.V("vast.VASTParser"),Bn=["acceptInvitation","acceptInvitationLinear","billable","click","clickIcon","close","closeLinear","collapse","complete","creativeView","customClicks","error","exitFullscreen","expand","firstQuartile","fullscreen","impression","midpoint","mute","noAd","noLinearAd","otherAdInteraction","pause","progress","resume","rewind","skip","start","thirdQuartile","unmute"];function Fn(e,t){return[...t.getElementsByTagName(e)].map((e=>({url:Pn(e),data:null})))}function Un(e){return Bn.includes(e)}class $n{constructor(e,t,i){this.config=e,this.gdprIab=t,this.wigo=i,this.logger=new L.V("vast.VASTLib"),this.logger.debug("new",this),this.wrappersLimit=this.config.wrappersLimit||$n.WRAPPERS_LIMIT}load(e,t,i){this.processPromise(this.loadXml(new Sn,e),t,i)}parse(e,t,i){this.processPromise(this.parseXml(new Sn,e),t,i)}processPromise(e,t,i){e.then(t).catch((e=>{const[t,n]=e;i(t,n)}))}async loadXml(e,t){e.url||(e.url=t),this.wigo.filter((e=>!!e.report)).forEach((e=>t=e.getVastUrl(t)));const i=await Vn(e,t,this.config);return this.wigo.forEach((e=>e.setVast(t,i))),this.parseXml(e,i)}async parseXml(e,t){try{const i=function(e,t){const i=new Sn,n=function(e){return(new DOMParser).parseFromString(e,"text/xml")}(e).documentElement;if("VAST"!==n.tagName)throw[new ci.i(ci.i.XML_PARSE),i];return i.tracking.error=i.tracking.error.concat(function(e){return[...e.getElementsByTagName("Error")].map((e=>({url:Pn(e),data:null}))).filter((e=>!!e.url))}(n)),function(e){return o.c$.fromNullable(e.getElementsByTagName("Ad")[0])}(n).match({none:()=>{throw[new ci.i(ci.i.NO_ADS),i]},some:e=>{if(i.version=function(e){return parseInt(Ln(e,"version"),10)}(n),i.version<2)throw[new ci.i(ci.i.UNSUPPORTED_VERSION),i];i.creativeId=function(e){return o.c$.fromNullable(e.getElementsByTagName("Creative")[0]).flatMap((e=>o.c$.fromNullable(Ln(e,"id")).orElse((()=>o.c$.fromNullable(Ln(e,"adID"))))))}(e).getOrValue("");const s=function(e){return o.c$.fromNullable(e.getElementsByTagName("Linear")[0])}(e);if(!function(e){return!!e.getElementsByTagName("Wrapper").length}(e)&&s.isEmpty())throw[new ci.i(ci.i.LINEARITY),i];i.id=function(e){return Ln(e,"id")}(e),i.adTagUri=function(e){return o.c$.fromNullable(e.getElementsByTagName("VASTAdTagURI")[0]).flatMap((e=>o.c$.fromNullable(Pn(e)).map(Nn)))}(e).map((e=>t.map((t=>(({status:e,consent:t})=>{const i=[(0,_n.uH)(e),...(0,_n.XF)(t)];return(0,_n.Q3)(i)})(t)(e))).map(Dn).getOrValue(e))).getOrValue(void 0),i.title=function(e){return Pn(e.getElementsByTagName("AdTitle")[0])}(e),i.adSystem=function(e){return Pn(e.getElementsByTagName("AdSystem")[0])}(e);const r=Fn("ClickThrough",e).map((e=>(0,Rn.l)(e.url)));return i.clickThrough=i.clickThrough.concat(r),i.tracking.impression=i.tracking.impression.concat(Fn("Impression",e)),i.tracking.click=i.tracking.click.concat(Fn("ClickTracking",e)),s.forEach((e=>{const t=function(e){return o.c$.fromNullable(e.getElementsByTagName("Icon")[0]).flatMap((e=>o.c$.fromNullable(e.getElementsByTagName("IconClicks")[0]))).map((e=>({iconClick:e,iconClickThrough:e.getElementsByTagName("IconClickThrough")[0]}))).map((({iconClick:e,iconClickThrough:t})=>({clickThrough:o.c$.fromNullable(Pn(t)),trackings:[...e.getElementsByTagName("IconClickTracking")].map((e=>({url:Pn(e),data:null})))}))).getOrValue({clickThrough:o.NV,trackings:[]})}(e);i.adChoicesIconClickThrough=t.clickThrough,i.tracking.clickIcon=i.tracking.clickIcon.concat(t.trackings);const n=function(e){return a.seconds(Ln(e,"skipoffset"))}(e);i.skippable=function(e){return!isNaN(e)}(n),i.skipDelay=function(e){return e||0}(n),i.duration=function(e){return a.seconds(Pn(e.getElementsByTagName("Duration")[0]))}(e),i.adParameters=function(e){return Pn(e.getElementsByTagName("AdParameters")[0])}(e);const s=function(e,t){return[...e.getElementsByTagName("Tracking")].map((e=>{const i=Ln(e,"event");return"progress"===i?function(e,t){const i=Ln(e,"offset");return function(e,t){return(0,l.Kg)(e)?e.indexOf(":")>0?o.c$.fromNullable(a.seconds(e)):o.c$.fromNullable(e.trim().match(/^([0-9\.]+)%$/)).map((e=>t*parseInt(e[1],10)/100)):o.NV}(i,t).map((t=>({event:"progress",tracking:{url:Pn(e),data:t}}))).orElse((()=>(Mn.error(`Wrong offset for progress tracking: ${i}`),o.NV)))}(e,t):(0,o.p2)({event:i,tracking:{url:Pn(e),data:null}})})).filter((e=>e.nonEmpty())).reduce(((e,t)=>(t.forEach((t=>{e[t.event]||(e[t.event]=[]),e[t.event].push(t.tracking)})),e)),{})}(e,i.duration);for(const e in s)s.hasOwnProperty(e)&&(Un(e)&&i.tracking.hasOwnProperty(e)?i.tracking[e]=i.tracking[e].concat(s[e]):Mn.warn(`Could not add tracking resource as the VAST event "${e}" is not supported.`));i.mediaFiles=function(e,t){return[...e.getElementsByTagName("MediaFile")].map((e=>{const i=Ln(e,"type");return{type:i,id:Ln(e,"id"),url:Pn(e),width:parseInt(Ln(e,"width"),10),height:parseInt(Ln(e,"height"),10),delivery:Ln(e,"delivery"),bitrate:parseInt(Ln(e,"bitrate"),10),api:Ln(e,"apiFramework"),scalable:!!Ln(e,"scalable"),minBitrate:parseInt(Ln(e,"minBitrate"),10),maxBitrate:parseInt(Ln(e,"maxBitrate"),10),maintainAspectRatio:!!Ln(e,"maintainAspectRatio"),codec:Ln(e,"codec"),adParameters:/javascript/g.test(i)?t:null}}))}(e,i.adParameters)})),i.extensions=function(e,t){const i=JSON.parse(JSON.stringify(t));return[...e.getElementsByTagName("Extension")].map((e=>({type:Ln(e,"type"),content:Pn(e),xml:e,definition:i})))}(e,i),i}})}(t,this.gdprIab);if(e.merge(i),i.adTagUri){if(e.wrappers.length>this.wrappersLimit)throw[new ci.i(ci.i.WRAPPER_LIMIT),e];return this.logger.info("load wrapper",i.adTagUri),this.loadXml(e,i.adTagUri)}if(0===e.mediaFiles.length){let t=ci.W.get(ci.i.WRAPPER.id,"empty mediafiles in VAST definition");throw this.logger.error(t.getFullMessage()),[t,e]}return e}catch(t){const[i,n]=t;throw e.merge(n),[i,e]}}}$n.TIMEOUT=7e3,$n.WRAPPERS_LIMIT=10;const Wn=new L.V("VastHandler");function Hn(e,t,i,n,s,r){return new Promise(((t,s)=>{const r=new $n({assetsUrl:O.$.basePathUrl},(0,o.p2)(i),o.c$.fromNullable(n)),a=e=>{!function(e,t){Wn.info("Ad is ready"),t.valid(1,2)}(0,n),t(e)},l=(e,t)=>s([e,t]),d=e.getContent();e.isVastUrl()?r.load(d,a,l):e.isVastXml()&&r.parse(d,a,l)}))}var zn=__webpack_require__(5864),Gn=__webpack_require__(7774);class jn{constructor(e,t,i,n,s,o,r,a){this.name=e,this.pageId=t,this.placementId=i,this.placementKey=n,this.sumologicLogger=s,this.logger=o,this.wigo=r,this.auctionId=a}}class qn extends jn{constructor(e,t,i,n,s,o,r){super("classic",e,t,i,n,s,o,r)}trackSlotAvailable(e){(0,me.xy)({sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,placementKey:this.placementKey})(fe.Q4.SlotAvailable,this.name,(t=>(0,Gn.UX)(this.placementKey)(t,(0,me.pH)({pageId:this.pageId,placementId:this.placementId,auctionId:this.auctionId,sumologicLogger:this.sumologicLogger},{slot:e},t))))}}class Kn extends jn{constructor(e,t,i,n,s,o,r,a,l){super("header-bidding",e,t,i,n,s,o,r),this.creativeSize=a,this.hbSlotAvailableTrackUrl=l}trackSlotAvailable(e){const t=(0,_.WB)(this.hbSlotAvailableTrackUrl,"slot",e),i=this.creativeSize.match({some:e=>{const i=(0,_.WB)(t,"hb_w",encodeURIComponent(e.width));return(0,_.WB)(i,"hb_h",encodeURIComponent(e.height))},none:()=>t}),n={baseUrl:i,referer:(0,me.IN)(),queryParameters:{slot:e,hb_w:this.creativeSize.map((e=>e.width.toString())).getOrValue(""),hb_h:this.creativeSize.map((e=>e.height.toString())).getOrValue("")},trackingUrl:(0,o.p2)(i)};(0,me.xy)({sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,placementKey:this.placementKey})(fe.Q4.HbSlotAvailable,this.name,(e=>(0,Gn.MZ)(this.placementKey)(e,n)))}}const Qn=(e,t)=>{const n=t.tagIsCampaignTag?"17":t.mrgReasonFromRas.getOrValue("19"),s=t.adCallTrackingUrl.map((e=>(0,zn.Dl)(e))),{baseUrl:o,insertionId:r,connectionId:a,pfid:l}=((e,t)=>({baseUrl:t.map((e=>e.baseUrl)).getOrValue(O.$.trackingUrl),insertionId:(0,En.HG)(e.map((e=>e.insertionId)).filter((e=>e>0))),connectionId:(0,En.HG)(e.map((e=>e.connectionId))),pfid:(0,En.HG)(e.map((e=>e.portfolioItemId)))}))(e,s),d=s.map((e=>e.queryParameters)).getOrValue({});return{baseUrl:o,businessIds:{insertionId:r,connectionId:a},queryParameters:{env:i.getEnv(),pageId:t.placementAd.placement.pageId.toString(),pid:t.placementAd.placement.pid.toString(),auctid:t.auctionId.getOrValue((0,T.M)("")),vid:t.viewerId.getOrValue((0,V.j)("")),slot:t.placementAd.placement.slotType,pfid:l,gdpr_api_version:(0,En.rP)(t.gdprIab.apiVersion),gdpr_cmp_id:(0,En.rP)(t.gdprIab.cmpId),gdpr_consent:t.gdprIab.consent,gdpr_status:t.gdprIab.status.toString(),gdpr_reason:t.gdprIab.reason.toString(),rpm_reason:n,...d},trackingUrl:t.adCallTrackingUrl.map((0,En.QV)({rpm_reason:"19"}))}};function Yn(e){const t=i.isAmp()||i.isAmpSF();return r.uu.tryCatch((()=>{const e=t?window.context?.referrer:window.top?.document.referrer;return new URL(e).origin})).fold((t=>(e.warn("Cannot get referrer",t),{})),(e=>({pageReferrerUrl:encodeURIComponent(e)})))}class Zn{constructor(){this.logger=new L.V("Page"),this.hasSlider=!1}static getPlayerSize(e,t){let i={width:0,height:0};if(e){if(t.insertInside.isEnabled())i.width=e.getWidth();else if(e.getElement().parentNode){const t=n.getSize(e.getElement().parentNode);i.width=t.width}i.height=i.width/k.Y}else{const e=R.F.findOptimalCreativeSizeBasedOnWindowSurface(o.NV,n.getWindowSize(t.parentWindow.getWindow()));i.height=e.height,i.width=e.width}return i.width=Math.round(i.width),i.height=Math.round(i.height),i}checkPlacement({rawPlacement:e,pageId:t,placementId:n,pageIndex:s,auctionId:r,wigo:l,sumologicLogger:d,headerBiddingProvider:c,adSettings:h}){const u=(0,ge.z)(t,n,s);let p,m;if(e.launched)return void this.logger.warn("This format has already been launched");e.launched=!0;const f=(0,g.rand)(10,!1),A={pageId:t,placementId:n,placementKey:u,sumologicLogger:d,logger:this.logger,wigo:l,auctionId:r,randomString:f},v=h.map((0,a.prop)("viewerId"));(c.isEmpty()||c.existsIf((e=>"debugFormat"===e)))&&(0,me.vc)(A);try{var b,w=new Ht(e,c),y=e.slider?{slider:e.slider}:Gt.getPlacementSetting(w.pid);y&&(b=new Gt(y)),m=new Ge(t,u,w,b,l)}catch(e){return this.logger.error(e.getMessage()),e.getId()===P.J.OPTION_FORMAT_INVALID.id&&(0,me.OV)({...A,headerBiddingProvider:c,viewerId:v}),void d.error(`placement-config ${t} ${o.c$.fromNullable(n).getOrNull()} ${(0,F.$)(e)}`)}if(window._ttc&&window._ttc[t]&&window._ttc[t].rpm)return d.info("ttc-rpm"),void m.placementConfig.rpmFallback.trigger();p={status:!0,reasons:[]};const E=function(e){const t={status:!0,reasons:[]},n=e.parentWindow.getWindow();i.videoSupport(n.document)||(t.status=!1,t.reasons.push(D.eW.incompatibility.video));const s=i.isMobile()&&e.isMobile(),o=i.isTablet()&&e.isTablet(),r=i.isDesktop()&&e.isDesktop();return s||o||r||(t.status=!1,t.reasons.push(D.eW.incompatibility.context)),B.X5(i.getIEVersion(),"8")&&(t.status=!1,t.reasons.push(D.eW.incompatibility.browser)),t}(m.placementConfig);if(this.logger.debug("Check environment",E),!E.status&&(p.status=!1,!i.isAmp()||i.isAmp()&&w.formatName.get()===D.uB.inread)){const e=E.reasons[0];e&&(0,me.uU)({...A,headerBiddingProvider:c,viewerId:v},e),m.placementConfig.fallback.trigger()&&(0,me.WE)({...A,headerBiddingProvider:c,viewerId:v})}return{placement:m,report:{id:n,validity:p,player:null,slotType:"native"},ad:null}}checkSlot({placementAd:e,wigo:t,sumologicLogger:n,auctionId:s,headerBiddingInfo:r,placementIsFirst:l,adSettings:d}){if(e.report.validity.status){e.report.validity=e.placement.checkSlot(),this.logger.debug("Slot availability",e.report.validity);const t=e.placement.getElectedSlot();e.report.player=Zn.getPlayerSize(t,e.placement.placementConfig)}const c=d.map((0,a.prop)("viewerId"));return(e=>{const{adSettings:t,slotIsFound:n,cornerPositionIsAllowed:s,placementIsFirst:r}=e;return t.filter((()=>n||s)).flatMap((e=>o.c$.fromNullable(e.slotType))).orElse((()=>i.isAmp()||i.isIABSafeFrame()||i.isAmpSF()||n&&!s&&r?(0,o.p2)("native"):n&&s&&r?(0,o.p2)("polymorph"):!n&&s&&r?(0,o.p2)("corner"):n&&!r?(0,o.p2)("multislot"):o.NV))})({adSettings:d,slotIsFound:(h=e.report.validity,!(!h.status&&h.reasons.length>0)),cornerPositionIsAllowed:e.placement.canEnableSlider(),placementIsFirst:l}).match({some:i=>{const a=d.flatMap((e=>o.c$.fromNullable(e.creativeSize)));return"corner"===i&&(this.hasSlider=!0,e.placement.enableSlider(),e.report.validity.reasons=[],e.report.validity.status=!0),e.placement.slotType=i,e.report.slotType=i,r.map((({provider:i,hbSlotAvailableTrackingUrl:o})=>new Kn(e.placement.pageId,e.placement.pid,e.placement.key,n,this.logger,t,s,a,o))).getOrElse((()=>new qn(e.placement.pageId,e.placement.pid,e.placement.key,n,this.logger,t,s))).trackSlotAvailable(i),e},none:()=>{(0,me.Li)({pageId:e.placement.pageId,placementId:e.placement.pid,placementKey:e.placement.key,sumologicLogger:n,logger:this.logger,wigo:t,auctionId:s,headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider,viewerId:c},e.report.validity.reasons[0]),Fe.u()}});var h}async callRAS(e){const{placementAd:t,sumologicLogger:n,onRASResponse:s,tagManagerPackage:d}=e,c=d.map((e=>e.tagManagerInstance)).flatMap((e=>o.c$.fromNullable(e.getAd))).match({some:e=>!e.headerBiddingProvider,none:()=>!1}),{pageId:h}=t.placement,{headerBiddingProvider:u}=t.placement.placementConfig,p=new Oe(t,h,e.adCallTrackingUrl,e.auctionId,e.viewerId,e.gdprIab,n),{adResponse:g,gdprIab:m,usPrivacyString:f,mrgReasonFromRas:A}=await p.send(this.getAdRequestUrl(h),e.gppHandler),{adCallTrackingUrl:v,auctionId:b,viewerId:w,fraudReason:y}=g,E=(e,i)=>{t.placement.handleNoAd({sumologicLogger:n,headerBiddingProvider:u,portfolioItemId:e,adCallTrackOpts:i,auctionId:b,viewerId:w}),d.forEach((({tagManagerInstance:e,onFormatLoaded:i,done:n})=>{o.c$.fromNullable(window.teads.tagManagerResourcesList).filter(a.isArray).forEach((i=>{i.push({tagManager:e,placementAd:t,vastPlayer:o.NV,tagIsCampaignTag:c})})),i(!1),n()}))},I={...e,gdprIab:m,adCallTrackingUrl:v,mrgReasonFromRas:A,tagIsCampaignTag:c},C={placementKey:t.placement.key,sumologicLogger:n,wigo:t.placement.wigo,logger:this.logger,headerBiddingProvider:u};if(null!==y)return this.hasSlider&&(0,me.Dh)({...C,headerBiddingProvider:u,baseUrlWithQueryParameters:Qn(o.NV,I)}),void E(o.NV,Qn(o.NV,I));s(t);const S=o.c$.fromNullable(t.ad),k=f.orElse((()=>S.flatMap(M).map((({consent:e})=>e))));if(this.userSync(t.placement,b,w,m,k),this.hasSlider&&(0,me.Dh)({...C,headerBiddingProvider:u,baseUrlWithQueryParameters:Qn(o.NV,I)}),!t.ad)return void(t.report.validity.status&&E(o.NV,Qn(o.NV,I)));if(t.ad.handled)return void this.logger.debug("Ad already handled for this placement");if(t.ad.handled=!0,t.ad.callbacks=t.placement.placementConfig.raw.callbacks,!t.placement.getElectedSlot())return void this.logger.debug("No elected slot -> not placing format");if(!(e=>(0,l.Kg)(e.type)&&(0,l.Kg)(e.content))(t.ad))return this.logger.warn("Will not be able to create a FormatConfig, invalid ad object",t),void E(o.jc.map((0,a.prop)("portfolio_item_id"))(S),Qn(o.NV,I));const V=t.ad;(0,me.UI)({placement:t.placement,sumologicLogger:n,logger:this.logger,auctionId:b,viewerId:w,headerBiddingProvider:u,portfolioItemId:o.c$.fromNullable(V.portfolio_item_id)});const P=t.placement.getElectedSlot().getElement();if("NativeJson"!==V.type&&"NativeNurl"!==V.type&&"CarouselNurl"!==V.type)(function(e,t,i){return r.uu.tryCatch((()=>{const e=new wn(i);return Wn.debug("FormatConfig instance",e),e}))})(0,0,V).fold((e=>{this.logger.warn("Could not instantiate FormatConfig",e,t.ad),(0,me.Hg)({placement:t.placement,sumologicLogger:n,logger:this.logger,auctionId:b,viewerId:w,headerBiddingProvider:u,portfolioItemId:o.c$.fromNullable(V.portfolio_item_id),insertionId:o.c$.fromNullable(V.insertion_id),connectionId:o.c$.fromNullable(V.connection_id)}),n.error(`formatconfig ${fe.Q4.AdAvailableErrorSettings}|${(0,F.$)(e)}`),E(o.jc.map((0,a.prop)("portfolio_item_id"))(S),Qn(o.NV,I))}),(e=>{const s=new x.UR(e.adType.isDisplay()?"display":e.adType.isNative()?"native":"video",o.c$.fromNullable(e.insertionId),o.c$.fromNullable(e.connectionId),o.c$.fromNullable(e.portfolioItemId),n);(function({adSettings:{vast:e,...t},placement:i,gdprIab:n,sumologicLogger:s,auctionId:r,viewerId:a,regularVastHandler:l=Hn}){const{pageId:d,wigo:c,slotType:h}=i;return l(e,d,n,c,s,h).catch((([e,n])=>{throw function(e,{insertionId:t,connectionId:i,portfolioItemId:n},s,r,a,l){const d="VASTParser.parse error"===l.getMessage()?(0,F.S)(l)+o.c$.fromNullable(l.error).map((e=>"|"+e.message)).getOrValue(""):(0,F.S)(l);s.error(`loading-vast ${d.substr(0,120)}`);const{key:c,pageId:h,pid:u,slotType:p,wigo:g,placementConfig:{headerBiddingProvider:m}}=e,f=l.getId()||0,A={placementKey:c,sumologicLogger:s,wigo:g,logger:Wn,headerBiddingProvider:m,pageId:h,placementId:u,auctionId:r,viewerId:a,slotType:p,portfolioItemId:(0,En.rP)(n),insertionId:(0,En.rP)(t),connectionId:(0,En.rP)(i)};f===ci.i.WRAPPER_TIMEOUT.id?(0,me.Ie)(A):(0,me.MZ)({...A,code:yn.N.includes(f)?f:yn.k.Undefined}),Wn.error("VAST loading",l)}(i,t,s,r,a,e),[e,n]}))})({adSettings:e,placement:t.placement,gdprIab:m,sumologicLogger:s,auctionId:b,viewerId:w}).then((n=>{const[a]=ge.A.vast.registerVastTrackings(C.placementKey)(n.tracking);0===a.trackings.length&&s.error("missing-teads-trackings",1),r.uu.tryCatch((()=>{(0,N.s3)({sumologicLogger:s,placementAd:t,linearAdWithFormatConfig:{linearAd:n,formatConfig:e},tagIsCampaignTag:c,tagManagerPackage:d,adCallTrackOpts:Qn(o.c$.of(e),I),auctionId:b,viewerId:w,gdprIab:m}),(0,Ae.CQ)()||(0,Ae.NG)()!==Ae.dL.PostMessage||ge.A.debug.track(C.placementKey)(fe.Q4.ClientAdCollision,{baseUrl:O.$.trackingUrl,referer:(0,me.IN)(),queryParameters:{env:i.getEnv(),pageId:h.toString(),pid:t.placement.pid.toString(),gid:(0,En.rP)(e.insertionId),auctid:b.getOrValue((0,T.M)(""))},trackingUrl:o.NV},o.c$.of(Ae.zF.PostMessageAfterRAS))})).tapLeft((i=>{this.logger.error("Succesfully parsed/loaded the VAST, but an uncaught error was thrown when loading the ad.",i),s.error(`uncaught-error-loadvast ${(0,F.$)(i)}`);const{pageId:n,pid:r,slotType:a}=t.placement;(0,me.MZ)({...C,code:yn.k.Undefined,pageId:n,placementId:r,auctionId:b,viewerId:w,slotType:a,portfolioItemId:(0,En.rP)(e.portfolioItemId),insertionId:(0,En.rP)(e.insertionId),connectionId:(0,En.rP)(e.connectionId)}),(0,me.oN)({placementKey:C.placementKey,sumologicLogger:s,wigo:t.placement.wigo,logger:C.logger,errorCode:yn.k.Undefined,errorCause:"load-ad-exception",slotType:t.placement.slotType,creativeSize:o.c$.fromNullable(e.creativeSize),macros:(0,_n.Py)()}),d.forEach((({tagManagerInstance:e})=>{e.logger.debug("load -> loadAd","noAd")})),E(o.c$.fromNullable(e.portfolioItemId),Qn(o.c$.of(e),I))}))})).catch((([i,n])=>{this.logger.error("Error when loading the VAST",i,t);const r=i.getId(),a=yn.N.includes(r)?r:yn.k.Undefined;ge.A.vast.registerVastTrackings(C.placementKey)(n.tracking),(0,me.oN)({placementKey:C.placementKey,sumologicLogger:s,wigo:t.placement.wigo,logger:C.logger,errorCode:a,errorCause:"load-vast-exception",slotType:t.placement.slotType,creativeSize:o.c$.fromNullable(e.creativeSize),macros:(0,_n.Py)()}),d.forEach((({tagManagerInstance:e})=>{e.logger.debug("load -> loadAd","noAd")})),E(o.c$.fromNullable(e.portfolioItemId),Qn(o.c$.of(e),I))}))}));else{const e={...V,slotType:t.placement.slotType,referrer:(0,me.IN)(),placementMetadata:{[V.settings.values.placementId]:{adCallTrackingUrl:v.getOrNull(),auctionId:b.getOrNull()}},templateType:"default",viewerId:w.getOrNull()},{raw:s}=t.placement.placementConfig,o={...s,slot:{...s.slot,selector:P}};try{(await(e=>{const t=(0,D.N4)(e);return window.teads.TRACKING_URL=O.$.trackingUrl,new Promise(((e,i)=>{const n=document.createElement("script");n.src=t,n.async=!0,n.onload=()=>e(window.teads.renderClassicFlavor),n.onerror=i,document.head.appendChild(n)}))})(V.type))(i.getEnv(),e,o)}catch(e){n.error(`Classic flavor ${V.type} integration Failed : ${e}`)}}}reload(){o.c$.fromNullable(window.teads.clearInstances).forEach((e=>e()));const e=o.c$.fromNullable(window._ttp);!function(e){e.forEach((e=>{for(const t in e)e.hasOwnProperty(t)&&e[t].forEach((e=>e.launched=!1))}))}(e),o.c$.fromNullable(window.teads.destroyPageRelatedVariables).forEach((e=>e())),ri({ttpObject:e,pageInstance:this}).tapLeft((e=>this.logger.error(e)))}userSync(e,t,i,s,r){if(e&&e.pid&&!this.isUserSyncIframeLoaded){const a=o.c$.fromNullable(e.placementConfig).flatMap((e=>e.headerBiddingProvider));let l=Be(e.pid,s,a,r,t,i);n.addEventListener("load",l,(e=>{this.isUserSyncIframeLoaded=!0}))}}getAdRequestUrl(e){const t=O.$.richAdServerUrl.replace("{id}",String(e));return this.getAdRequestMetadata().map((e=>(0,_.mR)(t,e))).getOrValue(t)}getAdRequestMetadata(){return(0,_.I5)().map((({windowDepth:e,windowReferrerUrl:t})=>{const i=o.c$.fromNullable(t).map((e=>({windowReferrerUrl:encodeURIComponent(e)}))).getOrValue({});return{windowWidth:window.innerWidth,windowHeight:window.innerHeight,windowDepth:e,...Yn(this.logger),...i}}))}}let Xn,Jn=0,es=0;const ts=new L.V("Main");var is=__webpack_require__(3599),ns=__webpack_require__(7434),ss=__webpack_require__(1885);const os=new L.V("TagManager"),rs={},as={};var ls;!function(e){e[e.INIT=0]="INIT",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.SERVED=3]="SERVED",e[e.ERRORED=4]="ERRORED",e[e.PASSBACKED=5]="PASSBACKED"}(ls||(ls={}));class ds{static getRawAdFromScript(e,t,i,s){return e.match({some:e=>n.getAndRemoveAttributeValue(e,t).match({some:e=>{const t=s((0,o.p2)({type:"VastUrl",content:`${O.$.buyingEngineUrl}/${e}`,insertion_id:parseInt(e,10)}));return i.debug("data-insertion handled",t),(0,o.p2)(t)},none:()=>(i.error(`${t} detected but the value is empty`),o.c$.empty())}),none:()=>o.c$.empty()})}static page(e){if(t=e,(0,l.Et)(t)&&t>=0)return rs[e]||(rs[e]={placement:(t,i,n,s)=>ds.placement(e,t,i,n,s)});throw S.A.error(`teads-page-invalid-pageid ${e}`),new Error(`teads.page function called with invalid page ID: ${e}`);var t}static ad(e,t){return as[e]&&new L.V(`TagManager placementId: ${e}`).warn("ad settings already exist and will be overwritten",as[e],t),as[e]=t,{page:ds.page}}static placement(e,t,i,n,s){const a=rs[e],l=a[t]||(a[t]=[]);s=o.c$.fromNullable(s).getOrValue(l.length?l.length-1:0),l[s]?i&&i!==l[s].rawSettings&&(l[s].rawSettings=i):r.uu.tryCatch((()=>new Ke(t))).map((e=>e.get())).fold((e=>{os.warn("Invalid placement ID value provided",t,i,e)}),(t=>{l[s]=new ds(e,t,i,n,s)}));const d=l[s];return d.findMatchingScript()?(d.logger.debug("found script with serve attribute -> serve it"),d.serve()):n?d.logger.debug("tag deferred"):d.load(),d}constructor(e,t,i,n=!1,s=0){this.pageId=e,this.pid=t,this.rawSettings=i,this.defer=n,this.pageIndex=s,this.doServe=!1,this.wigo=new $.L2,this.formatInstance=o.NV,this.doPassback=!1,this.passbacks={beforeServe:[],afterServe:[]},this.scripts=[],this.headerBiddingProvider=o.NV,this.logger=new L.V(`TagManager (pageId: ${e}, placementId: ${t})`),this.logger.debug("new placement",i),this.headerBiddingProvider=W(as[this.pid]),this.sumologicLogger=S.A.copy({collectorUrl:"https://s8t.teads.tv/logs/format/http-source",placementId:(0,o.p2)(t),options:{...S.A.options,isHeaderBiddingTag:()=>this.headerBiddingProvider.nonEmpty()}}),this.settings={...i||ds.defaultRawPlacement},this.settings.pid=t,this.settings.format=this.settings.format||"inread",this.settings.fallback=()=>(this.logger.debug("no ad to serve so exec passback"),this.execPassback()),this.state=ls.INIT,this.headerBiddingProvider.nonEmpty()&&this.handleHeaderBiddingAd(),O.$.refresh(window.teads),this.handleDataInsertion(t).forEach((e=>{Fe.u(),this.getAd=e}))}load(){if(this.state!==ls.INIT)return this.logger.warn("tag already loaded, loading or served",this.state),this;const e=o.c$.fromNullable(as[this.pid]?.headerBiddingSlotAvailableTrackUrl);return this.state=ls.LOADING,this.logger.debug("load: checkPlacement > checkSlot > callRAS > loadAd"),this.onReadyState((()=>{const t=o.c$.fromNullable(as[this.pid]),i=(0,ge.z)(this.pageId,this.pid,this.pageIndex),n=t.flatMap(ue(this.pid)),s=n.flatMap((e=>e.adCallTrackingUrl)),l=n.flatMap((({auctionId:e})=>e.map(r.xe))).getOrElse((()=>y().map(T.M))),d=l.toOption(),c=t.flatMap((0,a.safeProp)("viewerId")),h=Kt(t);let u;window.teads.prebidReferer=t.flatMap((0,a.safeProp)("referrer")).getOrNull();try{u=((e,t)=>e.filter((e=>"debugFormat"!==e)).match({some:e=>t.match({some:t=>(0,o.p2)({provider:e,hbSlotAvailableTrackingUrl:t}),none:()=>{throw new Error("Missing headerBiddingSlotAvailableTrackingUrl")}}),none:()=>o.NV}))(this.headerBiddingProvider,e)}catch(e){return(0,me.OV)({pageId:this.pageId,placementId:this.pid,placementKey:i,sumologicLogger:this.sumologicLogger,logger:this.logger,wigo:this.wigo,auctionId:d,viewerId:c,headerBiddingProvider:this.headerBiddingProvider}),this.logger.error(`load - ${e.message}`),this.sumologicLogger.error(`incompatibilityFormat - ${e.message}`),void(this.state=ls.ERRORED)}if(this.wigo.settings=t.flatMap(pe),l.tapLeft((e=>{this.sumologicLogger.error(`limitedCapabilities ${(0,F.$)(e)}`),(0,me.ol)({placementKey:i,sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,headerBiddingProvider:this.headerBiddingProvider,viewerId:c,pageId:this.pageId,placementId:this.pid,auctionId:d})})),this.fillCustomTracking(this.findCustomTracking(this.scripts)),this.adInfos=Xn.checkPlacement({rawPlacement:this.settings,pageId:this.pageId,placementId:this.pid,pageIndex:this.pageIndex,auctionId:d,wigo:this.wigo,sumologicLogger:this.sumologicLogger,headerBiddingProvider:this.headerBiddingProvider,adSettings:t}),this.adInfos)if(t.filter((e=>!0===e.wigoEnabled)).forEach((()=>this.wigo.enableWigo())),this.logger.debug("load -> checkPlacement ok"),this.adInfos=Xn.checkSlot({placementAd:this.adInfos,wigo:this.wigo,sumologicLogger:this.sumologicLogger,auctionId:d,headerBiddingInfo:u,placementIsFirst:(p=this.pageIndex,1===Object.keys(rs).map((e=>parseInt(e,10))).flatMap((e=>Object.keys(rs[e]).filter((e=>"placement"!==e)).map((t=>rs[e][parseInt(t,10)])).filter((e=>e[e.length-1].state!==ls.PASSBACKED)))).length&&0===p),adSettings:t}),this.adInfos){this.logger.debug("load -> checkSlot ok"),this.adInfos.ad=this.getAd;const e=new si;e.retrieveConsentWithoutHolding(),Xn.callRAS({placementAd:this.adInfos,adCallTrackingUrl:s,auctionId:d,viewerId:c,gdprIab:h,gppHandler:e,sumologicLogger:this.sumologicLogger,onRASResponse:e=>{this.logger.debug("load -> callRAS",this.getAd?"bypassed by data-insertion":"ok"),this.adInfos=e,this.sendTagToWigo()},tagManagerPackage:(0,o.p2)({tagManagerInstance:this,onFormatLoaded:()=>{this.state!==ls.PASSBACKED&&(this.state=ls.LOADED)},done:()=>{this.doServe?this.serve():this.logger.debug("waiting for serve")}})}).then((()=>{Fe.J()}))}else this.logger.debug("load - checkSlot failure"),this.state=ls.ERRORED;else this.logger.debug("load - placement failure"),this.state=ls.ERRORED;var p})),this}serve(){let e=this;switch(this.state){case ls.ERRORED:this.state=ls.SERVED,this.logger.warn("serve - this placement cannot be served - state = ERROR");break;case ls.SERVED:this.logger.warn("already served - reload and serve it again"),e=this.reload().serve();break;case ls.INIT:this.doServe=!0,this.logger.debug("load before serve (defer)",this.adInfos),this.load();break;case ls.LOADING:this.logger.warn("serve - the tag is currently loading"),this.doServe=!0;break;case ls.LOADED:this.state=ls.SERVED,this.logger.debug("serve",this.adInfos),this.formatInstance.filter((()=>!(0,N.qp)(this))).forEach((e=>{e.start(),(0,ns.Bx)(this,e.player.getMediafile())})),this.logger.debug("ad successfully served"),this.adInfos.ad&&!(0,N.dV)(this)||(this.logger.debug("serve - no ad to serve so exec passback"),this.execPassback())}return e}reload(){return ds.page(this.pageId).placement(this.pid,this.rawSettings,this.defer,this.pageIndex+1)}passback(e,t=!1){return this.state!==ls.SERVED&&this.state!==ls.PASSBACKED||t?(this.passbacks.afterServe.includes(e)?this.logger.warn("passback - signature was already appended to the passback list",e,this.passbacks.afterServe):"function"==typeof e?(this.passbacks.afterServe.push(e),this.logger.debug("passback - pushed to the list",e),t&&(this.passbacks.beforeServe.push(e),this.logger.debug("passback - pushed to the *before serve* list too")),this.doPassback&&(this.logger.debug("passback - execPassback already called with no passback to exec, call it again"),this.doPassback=!1,this.execPassback())):this.logger.warn("passback - must be a function"),this):this.reload().passback(e)}fillCustomTracking(e){const t=(0,ge.z)(this.pageId,this.pid,this.pageIndex);(e=>{e.filter(ss.t6).forEach((e=>{const i=(0,ss.W9)(e);ge.A.format.addFormatCustomTrackings(t)(i),this.logger.debug(`[${t}][v2] Add custom tracking`,i)}))})(e),e.filter(ss.lQ).forEach((e=>{(0,ss.BJ)(e).fold((e=>e&&ge.A.vast.addVastCustomProgressTrackings(t)(e)),(e=>ge.A.vast.addVastCustomTrackings(t)(e)))}));const i=e.filter((e=>!(0,ss.t6)(e)&&!(0,ss.lQ)(e)));i.length>0&&this.logger.warn("Could not add unsupported custom trackings",i)}execPassback(){let e;switch(this.state){case ls.SERVED:case ls.PASSBACKED:e=this.passbacks.afterServe,this.logger.debug("exec passback - after serve");break;default:e=this.passbacks.beforeServe,this.logger.debug("exec passback - before serve")}if(e.length){let t=e.shift();return this.logger.debug("exec passback -",t),this.state=ls.PASSBACKED,t((()=>this.execPassback())),this.doPassback=!1,null}return this.logger.debug("exec passback - no passback to exec"),this.doPassback=!0,this.passbacks.afterServe.length?null:D.kQ}findMatchingScript(){let e=!1;const t=s.findAllWindows(document.body);for(const i of t){const t=n.querySelectorAll("script.teads",i);for(let i=0;i<t.length;i++){this.scripts.push(t[i]);const n=t[i].getAttribute("data-serve");n?.match(this.pid.toString())&&(t[i].setAttribute("data-serve",n.replace(this.pid.toString(),"")),e=!0)}}return e}constructAdSettings(e=o.c$.empty()){const t=ds.defaultAdsSettings,i=e.getOrValue({}),n=as[this.pid]??{};return{...t,...i,...n,settings:{...t.settings,...n.settings,values:{...t.settings?.values,pageId:this.pageId,placementId:this.pid,placementFormat:this.settings.format,...n.settings?.values}}}}handleHeaderBiddingAd(){this.getAd=this.constructAdSettings()}handleDataInsertion(e){const t=`data-insertion-${e}`,i=s.findAllWindows(document.body),o=n.findMatchingElement(i.map((e=>e.document)),`script.teads[${t}]`);return ds.getRawAdFromScript(o,t,this.logger,(0,is.o)(this.constructAdSettings,this))}findCustomTracking(e){let t=[];for(let i of e){let e='data-tracking(?:-(\\d+))?-([^=]+)="([^"]+)"',s=(n.getOuterHTML(i)||"").match(new RegExp(e,"g"))||[];for(let n of s){let s=n.match(new RegExp(e));if(4===s.length){const[,e,n,o]=s;(e&&Number(e)===this.pid||!e)&&(this.logger.debug("find custom tracking (event, url, pid)",n,o,e),t.push({event:n,url:o}),e&&i.removeAttribute(`data-tracking-${e}-${n}`))}else this.logger.debug('error on data-tracking extraction, 3 args expected (["all", "key", "value"])',s)}}return t}sendTagToWigo(){this.wigo.valid(0,1,{ttp:this.settings,tta:this.adInfos.ad,tts:this.adInfos.placement.placementSetting},"modal")}onReadyState(e){let t;const i=s.findAllWindows(document.body);let o=0;for(;o<i.length&&!t;)t=i[o++].document.querySelector("script.teads[data-readystate]");"domcomplete"===t?.getAttribute("data-readystate")?(this.logger.debug("waiting dom complete"),n.onDomComplete(e)):(this.logger.debug("waiting dom ready"),n.onDomReady(e))}}ds.defaultRawPlacement={pid:null,format:null,slot:null},ds.defaultAdsSettings={settings:{values:{pageId:0,placementFormat:"inread",placementId:1,threshold:50}}};const cs=l.KZ;cs.ad=ds.ad,cs.page=ds.page,cs.TAG=rs,cs.TAG_STATUS=ls,cs.TagManager=ds,cs.helper=cs.helper||{},cs.placement=cs.placement||{},cs.pageInstance=cs.pageInstance||Xn,window.teads=cs,ts.info("Init - Format initialization success"),i.startAutoplayTest(),o.c$.fromNullable(window.teads.PAGE_PROCESSED).forEach((e=>Jn=e)),o.c$.fromNullable(window.teads.currentPlayerId).forEach((e=>es=e)),i.isAmp()&&(window.context.observeIntersection((e=>{window._teads_amp.change=e.pop(),se.Ts()})),se.Ts()),(()=>{const e=(0,s.findTopWindow)(document.body);r.uu.tryCatch((()=>e.teads_analytics.getViewerInfo())).fold((()=>{var t;(t=e,(0,we.J)("_tfpvi",t).toOption().filter(g.isNotEmpty).map((e=>({teadsViewerInfo:{tfpvi:e,tcfv2:null,gdpr:null,ccpa:null,sharedIds:null}})))).match({some:e=>ye=(0,o.p2)(e),none:()=>Ee.debug("getViewerInfo cookie not accessible")}),new Promise(((e,t)=>{const i=t=>r.uu.tryCatch((()=>JSON.parse(t.data))).toOption().filter(Ie).match({some:t=>{e(t),window.removeEventListener("message",i)},none:()=>Ee.debug("not a valid ViewerInfo message",t)});window.addEventListener("message",i),r.uu.tryCatch((()=>window.top.postMessage("teads-get-viewer-info","*"))).tapLeft((e=>{window.removeEventListener("message",i),t(e)}))})).then((e=>{ye=(0,o.p2)(e)}))}),(e=>ye=(0,o.p2)(e)))})(),(0,Ae.m_)(),$.L2.loadAndStoreReportIfNeeded(S.A),Xn=new Zn,n.onDomReady((()=>(i.activatePrivacySandboxRelevanceAndMeasurementFeatures(),ri({ttpObject:o.c$.fromNullable(window._ttp),pageInstance:Xn}).tapLeft((e=>ts.error(e))))))})()})();