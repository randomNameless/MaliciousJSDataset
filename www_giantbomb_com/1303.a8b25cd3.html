<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1303.a8b25cd3.html</title>
</head>
<body>

<script>
(self.webpackChunkgiantbomb=self.webpackChunkgiantbomb||[]).push([[1303],{8738:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),t=a.VideoPlayer=a.VideoPlayer||{};"undefined"!=typeof athenaPlayerMode&&athenaPlayerMode;var i=!1,s=!1,r=!1,o=[],l=[],u=t.log=function(){var e=o.push;if(e.apply?e.apply(o,[arguments]):e(Array.prototype.slice.call([arguments])),r&&3===arguments.length)throw arguments[2]};!0===s&&window.addEventListener("error",(function(e){e.error?u("Uncaught Exception: ",{error:e.error.toString(),stack:e.error.stack}):u("Uncaught Exception: ",e)}));t.getLogLines=function(e){var t=e||200,a=l.slice(Math.max(l.length-t,1)),n=[];return _.each(a,(function(e){var t=[];_.each(e,(function(e){_.isObject(e)?t.push(_.mapObject(e,(function(e,t){return _.isObject(e)?e.toString():e}))):t.push(e)})),n.push(t)})),n};var c=location.search,d="debug_video_player";if(c.indexOf(d+"=0")>=0?n.removeCookie(d,{path:"/"}):c.indexOf(d+"=1")>=0||n.cookie(d)?(i=!0,s=!0,r=!0):c.indexOf(d+"=cookie")>=0&&(i=!0,s=!0,r=!0,n.cookie(d,1,{path:"/",expires:1})),i){!0===i&&function(){var t,a=e.console||{},n=o;if(i=!0,s=!0,r=!0,a.log)for(o={push:function(){var e=a.debug||a.log,t="",n="",s=arguments[0],r=s[0];i&&(l.push(s),l.length>200&&l.shift()),"error"!==r&&"warn"!==r&&"info"!==r||(a[t=r]?e=a[t]:n=t.toUpperCase()+": ",s[0]=n),s[0]="[VP] "+s[0],e.apply?e.apply(a,s):e(Array.prototype.slice.call(s))}},u("Enable video player js logging"),t=0;t<n.length;t++)o.push(n[t])}()}}(window)},5463:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=".js-video-player-new",s=e.Phoenix||{},r=s.VideoPlayer,o=r.log;if(e.Phoenix||(e.Phoenix=s),!r||!Backbone)return;t=r.Views;var l,u,c,d,p,g,y,v,h,m,f={},P={},w="[INIT] ",S=(l=window.frameElement,u=window.parent,c=window.top,d=!1,p=!1,g=!1,y=window,l?(d=!0,p=!0,y=c!==u?c:u):u===window?d=!1:(d=!0,g=!0),{isEmbed:d,isOffsiteEmbed:g,isSameSiteEmbed:p,trackingParamsSource:y}),k=(v={},h={},function(e){var t=e.data("id"),a=e[0];if(t)return h[t]===a||(v[t]?(t=t+"-"+v[t]++,e.attr("data-id",t)):v[t]=1,h[t]=a),t}),b=function(e){var a,i=e.playerId,s=[];O(e),r.Controls.Autoplay?(o("Init autoplay control"),(a=I(e,"Autoplay",r.Controls.Autoplay))&&s.push(a)):o("Autoplay control does not exist"),s.push(T(e)),s.push(j(e)),s.push($(e)),s.push(C(e)),n.merge(s,A(e)),n.merge(s,V(e)),E(e),M(e),e.videoJSON.uvpHi5Ima&&s.push(function(e){var a;if(t.AdUtilities){try{a=new t.AdUtilities({Player:e})}catch(e){o("error","[INIT] AdUtilities failed to initialize: ",e)}return a}}(e)),P[i]=s},T=function(e){var a;try{a=new t.ApiInterfaceManager({el:e.$(".js-vid-player-holder"),Player:e})}catch(e){o("error","[INIT] failed to initialize api interface manager: ",e)}return a},C=function(e){var a;o("[INIT] Initialize Player Control Chrome");try{a=new t.ControlChrome({el:e.el,Player:e})}catch(e){o("error","[INIT] failed to initialize control chrome: ",e)}return a},I=function(e,t,n){var i;if(void 0===e.controlsEnabled[t.toLowerCase()]){try{i=new n({el:e.el,Player:e,Preferences:a}),o(w+t+" initialized"),e.controlsEnabled[t.toLowerCase()]=!i.disabled}catch(e){o("error",w+t+" failed to initialize: ",e)}return i&&"preference"===i.controlType&&!i.disabled&&a.register(i,e.playerId),i}},A=function(e){if(o("[INIT] Initialize Player Controls: ",r.Controls),r.Controls){var t=[];return n.each(r.Controls,(function(a,n){var i=I(e,a,n);i&&t.push(i)})),e.controlsInitialized=!0,e.trigger("initControlsComplete",e.controlsEnabled),t}o("[INIT] There are no controls to initialize")},E=function(e){var t=e.videoJSON,a=e.$(".js-vid-countdown"),n=Date.now(),i=1e3*parseInt(t.countdownTime,10);a.length?(!a.data("complete")&&i>0&&n<i&&(e.setStates({counting:!0}),a.on("complete",(function(){e.$("iframe").remove(),e.setStates({counting:!1}),o("[INIT] Done counting"),e.autoplay()})),a.on("almostComplete",(function(){e.$el.addClass("countdown-almost-complete")}))),o("[INIT] Countdown initialized")):o("[INIT] No countdown")},V=function(e){var a=e.$(".js-vid-menu-hit"),i=null,s=[];return a.each((function(){var r,o=n(this).closest(".js-vid-menu-set");o.length&&((r=new t.Menu({Player:e,el:o,els:{$menuHit:a}})).on("open",(function(){i&&i.close(),i=r})),r.on("close",(function(){i===r&&(i=null)})),s.push(r))})),s},$=function(e){var a;if(t.Progress){try{a=new t.Progress({el:e.el,Player:e})}catch(e){o("error","[INIT] Progress failed to initialize: ",e)}return a}},M=function(e){e.$el.hasClass("av-mobile-player")||e.$(".js-vid-tooltip").tooltip({animation:!1,delay:0,template:'<div class="av-vid-tooltip" role="tooltip"><div class="av-vid-tooltip-arrow tooltip-arrow"></div><div class="av-vid-tooltip-inner tooltip-inner"></div></div>'})},O=(m=function(e){var t=e.id,a=e.watchedCookieName,i=e.watchedCookieDays,s=function(e){var t,a,i=e.watchedCookieName;if(i)return(t=n.cookie(i))&&(a=JSON.parse(t)),a||(a=[]),a}(e);void 0!==s&&(n.inArray(t,s)<0&&s.push(t),n.cookie(a,JSON.stringify(s),{path:"/",expires:i}))},function(e){e.on("beforePlay",(function(){var t=e.videoJSON;!e.states.played&&t.id&&(o("[INIT] video has not played > log view"),function(e){var t=!!n("#VideoDisableTracking").attr("content"),a=e.id;o("[INIT] Disable Tracking? ",t),!t&&a&&(n.ajax({url:"/api/video/played/"+a+"/",type:"GET",success:function(e){0===e.success?o("[INIT] Error logging view"):1===e.success&&o("[INIT] View logged successfully")}}),m(e))}(t))}))}),j=function(e){var a,n=e.$el.closest("#kubrick-lead");if(n.length)try{a=new t.Kubrick({el:n,Player:e})}catch(e){o("error","[INIT] Kubrick failed to initialize: ",e)}return a},N=function(e){var i,s,r,l;if(r=k(e))if(l=e.data("video"),o("[INIT] videoJSON:\n",n.extend({},l)),l){i=function(e){var a;try{a=new t.AgeGate({el:e.find(".js-vid-age-gate")}),o("[INIT] AgeGate initialized: ",a)}catch(e){o("error","[INIT] AgeGate failed to initialize: ",e)}return a}(e);try{if(s=new t.Player({el:e,els:{$playerContainer:e.find(".js-vid-max-width")},playerId:r,videoJSON:l,AgeGate:i,Preferences:a}),e.on("remove",(function(){s.stop(),s.disable()})),s.states.disabled)return void o("[INIT] Player disabled");o("[INIT] Core player initialized")}catch(e){o("error","[INIT] Core player failed to initialize: ",e)}if(s)return o("vvvvvvvvvv VIDEO PLAYER COMPONENTS vvvvvvvvvv"),b(s),o("^^^^^^^^^^ VIDEO PLAYER COMPONENTS ^^^^^^^^^^"),s}else o("error","[INIT] Video JSON missing for: ",e);else o("error","[INIT] $videoPlayer is missing playerId")};r.getInstance=function(e){return f[e]},r.destroyInstance=function(e){return void 0!==f[e]&&(r.removeInstance(e),!0)},r.getAllInstances=function(){return f},r.hasInstance=function(e){return!!f[e]},r.removeInstance=function(e){var t=f[e],a=P[e];try{t.disable(),t.$el.remove(),n.each(a,(function(){this.off(),this.stopListening()})),delete f[e],delete P[e]}catch(e){return o("error",e),!1}return!0},r.classnames={hide:"hide-element"},r.convertTime=function(e){var t=0,a=0,n=0,i="",s="",r="";return e||(e=0),(e<0||isNaN(e))&&(e=0),0!==e&&(t=Math.floor(e%60),a=Math.floor(e/60%60),n=Math.floor(e/3600)),t<10&&(i="0"),a<10&&(s="0"),r=s+a.toString()+":"+i+t.toString(),e>=3600&&(r=n.toString()+":"+r),r},r.ratioToPercentString=function(e){var t=(100*e).toFixed(2),a=t.indexOf(".00");return a>0&&(t=t.substr(0,a)),t+"%"},r.getEventInContainerRatio=function(e,t,a){if(e&&t){a||(a="horizontal");var n,i,s,r=t.offset();return"horizontal"===a?(n=t.width(),s=(i=e.pageX||e.originalEvent.touches.length>0?e.pageX||e.originalEvent.touches[0].pageX:e.originalEvent.changedTouches[0].pageX)-r.left):(n=t.height(),r.bottom=n+r.top,i=e.pageY||e.originalEvent.touches[0].pageY,s=r.bottom-i),s<0?s=0:s>n&&(s=n),s/n}},r.showSuccessMessage=function(e){s.Ui&&s.Ui.showSuccessMessage&&s.Ui.showSuccessMessage(e)},r.query=function(e){e=e.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)(&|$)"));return t&&decodeURIComponent(t[1].replace(/\+/g," "))},r.getComponents=function(e,t){if(!e.els){var a={};n.each(t,(function(t,n){a[t]=e.$(n)})),e.els=a}},r.getTrackingParams=function(){const{utag_data:e}=S.trackingParamsSource;let t;return t=e?{articleId:e.articleId,articleTitle:e.articleTitle,articleType:e.articleType,authorIDs:e.articleAuthorId,brand:e.brand,collectionId:e.collectionName,deviceType:e.deviceType,pageType:e.pageType,pageUrl:S.isEmbed?document.referrer:document.location.href,pageViewGuid:e.pageViewGuid,productGenre:e.productGenre,productId:e.productId,productTitle:e.productName,showName:e.showName,siteSection:e.siteSection,siteHier:e.siteHier,subCollection:e.subCollectionName,test:e._test,userId:e.userId,userState:e.userState,userType:e.userType}:{},o("contextTrackingParams: ",t),t},r.allowTracking=!0;var D=function(e){e||(e=n(i)),!e||e.length<1||e.each((function(){var e,t,i,s,l=n(this),u=k(l),c=!1,d=!1;r.hasInstance(u)||(o("========== INITIALIZE VIDEO PLAYER ["+u+"] =========="),(e=N(l))&&(!function(e){if(e)try{f[e.playerId]=e}catch(e){o("error",e)}}(e),e&&e.ApiInterfaceManager&&(t=function(){d&&c&&(a.load(u),e.trigger("initComplete"),e.$el.data("playerInitialized",!0),e.$el.trigger("playerInitialized"),o("========== VIDEO PLAYER INITIALIZED ["+u+"] =========="))},s=function(){c=!0,t()},i=function(){d=!0,t()},e.controlsInitialized?i():e.on("initControlsComplete",(function(){i()})),e.ApiInterfaceManager.ready?s():e.ApiInterfaceManager.once("ready",s))))}))};const x=[],{PhoenixLoader:L}=S.trackingParamsSource;L&&L.gdprConsentCallback&&x.push(new Promise((e=>{L.gdprConsentCallback(!0,(function(){o("[INIT] [ROADBLOCKS][One Trust] performance consent allowed"),e()}),"performance",(function(){o("[INIT] [ROADBLOCKS][One Trust] performance consent disabled"),r.allowTracking=!1,e()}))}))),Promise.all(x).then((function(){var e,s,l;o("========== INITIALIZE VIDEO PLAYER APP =========="),l=r.ApiInterfaces,s||(s=n(".js-vid-playback")),s.each((function(){var e=n(this),t=e.data("player");l[t]||e.remove()})),a=new t.Preferences,e=S.isSameSiteEmbed&&S.trackingParamsSource.$?S.trackingParamsSource.$(S.trackingParamsSource.document):n(document),D(),S.isEmbed||(document.addEventListener("ajaxContentLoaded",(function(){D()})),e.on("ajaxPlayerLoaded",i,(function(){D(n(this))})))}))}(window)},200:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),(t=a.VideoPlayer=a.VideoPlayer||{}).Models=t.Models||{};var i={cookie:!1,server:!1,takeLargestValue:!0,saveTimeExpires:5,minSaveThreshold:5,saveThrottleLocal:1,saveThrottleServer:30};t.Models.VideoStatus=Backbone.Model.extend({options:null,timestamps:null,value:null,id:null,api:null,settingName:null,videoJSON:null,savePosition:null,fetchCalls:null,saveCalls:null,deleteCalls:null,hasMarkedWatched:!1,initialize:function(e){var t=this;if(void 0===e||!e.videoJSON||e.settingName)throw"Video Status Exception: Not enough arguments";t.videoJSON=e.videoJSON,t.videoJSON&&(t.options=n.extend({},i),t.timestamps={},t.fetchCalls=[],t.saveCalls=[],t.deleteCalls=[],t.id=t.videoJSON.id,t.videoJSON.savePosition?(t.savePosition=t.videoJSON.savePosition,t.api=t.savePosition.api,t.settingName=t.savePosition.cookieName):t.settingName="uvp:savedPosition:"+t.videoJSON.guid,n.extend(t.options,e.options),t.options.cookie&&(t.fetchCalls.push(_.bind(t.fetchCookie,t)),t.saveCalls.push(_.bind(t.saveCookie,t)),t.deleteCalls.push(_.bind(t.deleteCookie,t))),t.options.server&&t.api&&(t.fetchCalls.push(_.bind(t.fetchServer,t)),t.saveCalls.push(_.bind(t.saveServer,t)),t.deleteCalls.push(_.bind(t.deleteServer,t))))},fetch:function(e){var a=this,n=(e=e||{}).success||function(e){t.log("Fetched:"+a.settingName+":"+e)};a.value=0;var i=0,s=a.fetchCalls.length,r=function(e){try{e=parseFloat(e)}catch(t){e=0}(!a.options.takeLargestValue||a.value<e)&&(a.value=e),++i===s&&n(a.value)};_.each(a.fetchCalls,(function(e){e({success:r})}))},fetchCookie:function(e){var t,a,i;e.success((t=this.settingName,a=n.cookie(t),i=null,Modernizr.localstorage&&(i=localStorage.getItem(t)),i||a))},fetchServer:function(e){e.success(this.savePosition.savedTime)},save:function(e,a){var n=this;e<n.options.minSaveThreshold||((a=a||{}).success=a.success||function(){t.log("Saved:"+n.settingName+":"+e)},a.force=!!a.force,_.each(n.saveCalls,(function(t){t(e,a)})),n.value=e)},markWatched:function(e){var t=this;e=e||{},t.api&&t.api.markWatched&&!t.hasMarkedWatched&&(t.hasMarkedWatched=!0,n.ajax({type:"POST",url:t.api.markWatched,data:{video_id:t.id},success:function(){t.hasMarkedWatched=!0,e.success&&e.success()}}))},saveCookie:function(e,t){var a=this,s=t.force?1:a.options.saveThrottleLocal;a.throttleSave("cookie",s,(function(){!function(e,t){Modernizr.localstorage?localStorage.setItem(e,t):n.cookie(e,t,{expires:i.saveTimeExpires,path:"/"})}(a.settingName,e),t.success&&t.success()}))},saveServer:function(e,t){var a=this;if(a.api){var i=t.force?1:a.options.saveThrottleServer;a.throttleSave("server",i,(function(){n.ajax({type:"POST",url:a.api.setSavedTime,data:{video_id:a.id,time_to_save:e},success:function(){t.success&&t.success()}})}))}},throttleSave:function(e,t,a){var n=this,i=(new Date).getTime();n.timestamps[e]||(n.timestamps[e]=i),n.timestamps[e]+1e3*t<i&&(a(),n.timestamps[e]=i)},delete:function(){_.each(this.deleteCalls,(function(e){e()}))},deleteCookie:function(){var e;e=this.settingName,n.removeCookie(e),Modernizr.localstorage&&localStorage.removeItem(e)},deleteServer:function(){}})}(window)},2587:()=>{!function(e){"use strict";var t=e.Phoenix;t||(e.Phoenix=t={});var a=t.VideoPlayer=t.VideoPlayer||{},n=a.Views=a.Views||{},i=a.log;n.AdUtilities=Backbone.View.extend({Player:null,initialize:function(e){var t=this;t.Player=e.Player,i("[AD CALLS] AdUtilities"),t.Player.on("adStart",(function(){t.Player.setStates({adPlaying:!0,adPlayed:!0,isSeekDisabled:!0})})),t.Player.on("contentStart",(function(){t.Player.setStates({adPlaying:!1,contentStarted:!0,isSeekDisabled:!1})}))}})}(window)},5121:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),a=(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{};var s=t.log,r={$ageDate:".js-vid-age-gate-date",$ageDay:".js-vid-age-gate-day",$ageMonth:".js-vid-age-gate-month",$ageYear:".js-vid-age-gate-year"},o="[AGE GATE] ";a.AgeGate=Backbone.View.extend({els:null,initialize:function(e){t.getComponents(this,r)},isAgeGated:function(e){var t,a,i=this,r=i.els,l=i.$el,u=r.$ageYear,c=e.videoJSON,d=c.ageGateCookieName,p=!1;return s(o+"Checking..."),!0===function(e,t){var a=e.$el,n=t.contentRating,i=!0;return a&&n&&!0!==e.isOfAge(t)?s(o+"has gate"):(s(o+"no gate"),i=!1),i}(i,c)&&(!1===i.isOfAge(c)?p=!0:!1===e.states.showAgeGate?p="prompt":(a=u.val(),s(o+"Year selected: "+a),"year"===a?(s("warning",o+"missing year value"),p="Please select a year value to validate your age!"):(t=[a,r.$ageMonth.val(),r.$ageDay.val()].join("-"),d&&!isNaN(Date.parse(t))&&n.cookie(d,t,{path:"/",expires:2e3}),i.isOfAge(c,t)||(s(o+"User is not old enough"),p=!0)))),!1===p&&(s(o+"User is old enough"),e.setStates({hasGate:!1,showAgeGate:!1}),l&&l.length>0&&(l.remove(),delete r.$ageGate)),!0===p?i.gate(e):"prompt"===p?function(e){e&&(e.trigger("promptAgeGate"),e.setStates({showAgeGate:!0}))}(e):"string"==typeof p&&alert(p),p},isOfAge:function(e,t){var a,i=this.els,r=e.contentRating;if(r&&0!==i.$ageDate.length){if(t||(t=n.cookie(e.ageGateCookieName)),t){var l,u=new Date,c=t.split("-");try{l=new Date(c[0],c[1],c[2]),isNaN(l.getTime())&&(l=u)}catch(e){l=u}a=Math.floor((u-l)/31536e6)>=r}}else a=!0;return s(o+"isOfAge? ",a),a},gate:function(e){e&&(s(o+"Gate Video Player"),e.setStates({gated:!0}),e.disable())}})}(window)},8540:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),a=(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{};t.log;a.AbstractApiInterface=Backbone.View.extend({name:"",initialized:!1,playerReady:!1,contentLoading:!1,ApiInterfaceManager:null,initialize:function(e){var t=this;t.states&&"object"==typeof t.states&&(t.states=n.extend({},t.states))},initApi:function(){},checkHasSource:function(){return!0},checkContentExists:function(e){"function"==typeof e&&e(!0)},configureAutoplay:function(){},checkCanAutoplay:function(){var e=this.ApiInterfaceManager.getVideoJson(),a=t.query("autoplay"),n=!1;return(e.autoplay||"1"===a||"true"===a)&&(n=!0),n},play:function(){},pause:function(){},resume:function(){},seekTo:function(){},seekToLive:function(){},stop:function(){},setVolume:function(e){},mute:function(){},unMute:function(){},showDiagnosticWindow:function(){},fullscreen:function(e){},getCurrentTime:function(){return 0},getDuration:function(){return 0},getVolume:function(){return 0},disable:function(){},userGesture:function(){}})}(window)},3137:()=>{!function(e){"use strict";var t,a,n,i,s=e.Phoenix;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},i=(a=t.Views=t.Views||{}).AbstractApiInterface,n=t.ApiInterfaces=t.ApiInterfaces||{};var r=t.log,o=(JSON.stringify,"[API-CHROMECAST]");n.chromecast=i.extend({name:"chromecast",states:{ready:!1,playing:!1,resourceLoaded:!1,seekToLive:!1},Media:null,Player:null,Controller:null,timingInterval:null,videoJSON:null,ApiInterfaceManager:null,initialize:function(e){var t=this;t.ApiInterfaceManager=e.ApiInterfaceManager,t.videoJSON=e.videoJSON;a.AbstractApiInterface.prototype.initialize.call(t,e),t.$el},setMedia:function(e){this.Media=e},setPlayer:function(e){var t=this;t.Player=e,t.timingInterval=setInterval(_.bind(t.mediaStatusUpdate,t),1e3)},setController:function(e){this.Controller=e},mediaStatusUpdate:function(){var e=this,t=e.getCurrentTime();t>1&&e.states.seekToLive&&(e.states.seekToLive=!1,e.seekToLive(),e.ApiInterfaceManager.trigger("onContentStart")),e.ApiInterfaceManager.trigger("onVideoProgress",{currentTime:t})},play:function(e){var t=this;r(o+"play video"),t.Player.isPaused&&t.Controller.playOrPause(),!t.states.playing&&t.videoJSON.isLiveStream?t.states.seekToLive=!0:t.ApiInterfaceManager.trigger("onContentStart"),t.states.playing=!0},resume:function(){r(o+"resume video"),this.play()},pause:function(){r(o+"pause video"),this.Player.isPaused||this.Controller.playOrPause()},stop:function(){var e=this;r(o+"stop casting video"),e.states.playing=!1,e.Controller.stop(),clearInterval(e.timingInterval)},seekTo:function(e){this.ApiInterfaceManager.trigger("onVideoProgress",{currentTime:e}),this.Player.currentTime=e,this.Controller.seek()},seekToLive:function(){this.videoJSON.isLiveStream&&(this.Player.currentTime=999999,this.Controller.seek())},setVolume:function(e){r(o+"set volume to "+e),this.Player.volumeLevel=e,this.Controller.setVolumeLevel()},mute:function(){r(o+"mute"),this.Player.isMuted||this.Controller.muteOrUnmute()},unMute:function(){r(o+"unMute"),this.Player.isMuted&&this.Controller.muteOrUnmute()},getCurrentTime:function(){return this.Player.currentTime},getDuration:function(){return this.Player.duration}})}(window)},4368:()=>{"use strict";class e{constructor(e,t){this.jwFandomPlayerClass="jw-player-fandom",this.videoPlayerContainerElement=e,this.injectJwPlayer(t)}async injectJwPlayer(e){const t=this.videoPlayerContainerElement.dataset.jwContextName,a=this.videoPlayerContainerElement.dataset.jwMediaId,n=this.isPlayingOnGiantbomb()?this.videoPlayerContainerElement.dataset.jwPlayerUrl:void 0,i=this.isPlayingOnGiantbomb()?this.videoPlayerContainerElement.dataset.jwVideoToken:void 0,s="1"===this.videoPlayerContainerElement.dataset.userHasAds;a&&(await this.injectScriptTag(),window.loadPlayer?(await window.loadPlayer({contextName:t,mediaId:a,playerUrl:n,embedHtmlElement:e,autoIncrementJwPlayerContainerId:!0,autoPlay:!1,jwtSignedContentAuth:i,hasAds:s}),this.videoPlayerContainerElement.classList.add(this.jwFandomPlayerClass)):console.error("window.loadPlayer is not defined"))}attachAdEventListeners(e){["adComplete","adSkipped","adError"].forEach((t=>{window.jwplayer().once(t,e)}))}handleAdEvents(e){const t=()=>e.trigger("onContentStart");"1"===this.videoPlayerContainerElement.dataset.userHasAds?this.attachAdEventListeners(t):t()}playVideo(e){this.ensureJWPlayerInstanceIsSet().then((()=>{window.jwplayer().play(),e&&this.handleAdEvents(e)}))}pauseVideo(){this.ensureJWPlayerInstanceIsSet().then((()=>{window.jwplayer().pause()}))}seekTo(e){this.ensureJWPlayerInstanceIsSet().then((()=>{window.jwplayer().seek(e)}))}getCurrentTime(){return window.jwplayer?window.jwplayer().getPosition():0}getDuration(){return window.jwplayer?window.jwplayer().getDuration():0}getState(){return window.jwplayer?window.jwplayer().getState():"idle"}isReady(){return this.ensureJWPlayerInstanceIsSet().then((()=>!0)).catch((()=>!1))}stopVideo(){this.ensureJWPlayerInstanceIsSet().then((()=>{window.jwplayer().stop()}))}ensureJWPlayerInstanceIsSet(){return new Promise(((e,t)=>{const a=()=>{if(window.jwplayer)return e();setTimeout(a,1e3)};a()}))}isPlayingOnGiantbomb(){return"giantbomb"===this.videoPlayerContainerElement.dataset.jwContextName}removePlayer(){window.jwplayer&&delete window.jwplayer}injectScriptTag(){return new Promise((e=>{if(window.loadPlayer)return void e();const t=document.createElement("script");t.src="https://static.wikia.nocookie.net/silversurfer/video/prod/standalone-dist/standAlone_RV_VideoPlayer.js",t.async=!0,t.onload=()=>{e()},document.body.appendChild(t)}))}}!function(t){const a=t.Phoenix;let n,i,s,r,o;a||(t.Phoenix=a={}),n=a.VideoPlayer=a.VideoPlayer||{},i=n.Views=n.Views||{},r=i.AbstractApiInterface,s=n.ApiInterfaces=n.ApiInterfaces||{},o=n.log;const l="[API-JWPLAYER]",u=function(e,t=!1){const{jwplayerInstance:a,ApiInterfaceManager:n}=e,i=()=>{let t={};a.getCurrentTime()>=a.getDuration()?(e.states.ended=!0,n.trigger("onContentEnd"),clearInterval(a.progressTimer)):(t.currentTime=a.getCurrentTime(),n.trigger("onVideoProgress",t))};clearInterval(e.jwplayerInstance.progressTimer),e.states.playing&&!t&&(i(),a.progressTimer=setInterval(i,500))},c=function(e,t=!1){const{jwplayerInstance:a}=e,n=()=>{const n="playing"===a.getState();n&&!e.states.playing?(e.states.playing=!0,t||u(e)):!n&&e.states.playing&&(e.states.playing=!1,u(e))};a.stateTimer&&clearInterval(a.stateTimer),t?(u(e,t),clearInterval(a.stateTimer)):a.stateTimer=setInterval(n,500)},d=function(t,a){t.states.loaded&&t.jwplayerInstance?a&&a(t.jwplayerInstance):(t.pendingCallbacks.push(a),t.states.loading||function(t){const{loaded:a,loading:n}=t.states;if(t.jwplayerInstance||a||n)return;t.states.loading=!0,t.jwplayerInstance=new e(t.videoPlayersContainerElement,t.$el[0]);const{jwplayerInstance:i}=t;o(`${l} jwplayer initialized`);let s=0;const r=async function(){try{await i.isReady(),t.states.loaded=!0,t.states.loading=!1,c(t),t.pendingCallbacks.length>0&&(t.pendingCallbacks.forEach((e=>e(i))),t.pendingCallbacks=[]),s=0}catch(e){s<5?(s++,setTimeout(r,500)):t.states.loading=!1}};r()}(t))};s.jwplayer=r.extend({name:"jwplayer",states:{ready:!1,loaded:!1,loading:!1,playing:!1,ended:!1},progressTimer:null,stateTimer:null,jwplayerInstance:null,pendingCallbacks:null,videoPlayersContainerElement:null,isOnGiantbomb:!1,ApiInterfaceManager:null,initialize:function(t){i.AbstractApiInterface.prototype.initialize.call(self,t);const{videoPlayersContainerElement:a}=t;this.videoPlayersContainerElement=a,this.ApiInterfaceManager=t.ApiInterfaceManager,this.pendingCallbacks=[],this.isOnGiantbomb="giantbomb"===t.ApiInterfaceManager.$el.context.dataset.jwContextName,o(`${l} initialize jwplayer`),this.ApiInterfaceManager.ready=!0,this.states.loaded=!1,this.states.loading=!1,this.isOnGiantbomb||(this.jwplayerInstance=new e(this.videoPlayersContainerElement,this.$el[0]),o(`${l} jwplayer initialized`))},play:function(){var e;(o(`${l} play video`),this.isOnGiantbomb)?this.states.loaded&&void 0!==window.jwplayer?c(this):d(e=this,(function(t){t.playVideo(e.ApiInterfaceManager),e.videoPlayersContainerElement?.closest(".js-episode-topslot-image")?.querySelector(".js-play-show-episode-video")?.classList?.add("hide-element-important")})):this.videoPlayersContainerElement?.closest(".js-episode-topslot-image")?.querySelector(".js-play-show-episode-video")?.classList?.add("hide-element-important")},seekTo:function(e){this.isOnGiantbomb&&this.states.loaded&&d(this,(function(t){t.seekTo(e)}))},getCurrentTime:function(){if(this.isOnGiantbomb&&this.states.loaded)return this.jwplayerInstance.getCurrentTime()},getDuration:function(){if(this.isOnGiantbomb&&this.states.loaded)return this.jwplayerInstance.getDuration()},disable:function(){const{jwplayerInstance:e}=this;c(this,!0),e&&e.removePlayer(),this.states.playing=!1,this.$el[0].innerHTML=""}})}(window)},3428:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i,s,r=e.Phoenix,o=n(document),l=e.uvpjs;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},s=(a=t.Views=t.Views||{}).AbstractApiInterface,i=t.ApiInterfaces=t.ApiInterfaces||{};var u=t.log,c="[API-UVPJS] ",d=!1,p={};const g="1"===document.getElementById("js-video-header-bidding-meta")?.content;var y=function(e){const a=e.PlayerApiManager=l.getVideoManager(),n=e.ApiInterfaceManager,i=n.getVideoJson(),{allowTracking:s}=t;e.sessionOptions.uvpc.modules.forEach((function(t,a){"SiteCatalyst"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=s),"ComScore_ss"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=s),"NielsenTracking"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=s),"MuxQOSPluginJS"==t.name&&(e.sessionOptions.uvpc.modules[a].enabled=s)})),g&&window.waitForBidBarrel((()=>{window.BidBarrel.auction([["video-rectangle",parseInt(i.id),{},{video:{h:"483v",mimes:["video/H264","video/webm","video/mp4"]}}]])})),window.uvpjs.Configuration.hostname=e.sessionOptions.uvpjsHostname,u(c+"Initialize cbsiVideoManager",e.sessionOptions),a.initialize(e.sessionOptions,(function(t){u(c+"cbsiVideoManager initialized"),t?((p=t).supportsUnmutedAutoplay?n.autoplayTypeAllowed=n.autoplayTypes.normal:p.supportsMutedAutoplay?n.autoplayTypeAllowed=n.autoplayTypes.muted:n.autoplayTypeAllowed=n.autoplayTypes.none,u(c+"ApiInterfaceManager.autoplayTypeAllowed POST logic"+n.autoplayTypeAllowed),function(e){var t=e.PlayerApiManager,a=e.ApiInterfaceManager,n=h(e);u(c+"Tracking options: ",JSON.stringify(n)),e.configureAutoPlay();var i={};i=1!=e.states.autoplay||a.getPlayerState("autoplayUserDisabled")?{enableMutedAutoplay:!1,enableUnmutedAutoplay:!1}:{enableMutedAutoplay:e.states.autoplayType==a.autoplayTypes.muted,enableUnmutedAutoplay:e.states.autoplayType==a.autoplayTypes.normal},u(c+"enableOptions",i),t.createVideoPlayer(e.containerId,(function(t){var i=t.getAutoplayInfo();u(c+"Video Control Interface (VCI) ready"),u(i),t.setPageContextMetadata(n),e.PlayerApi=t,v(e),e.states.ready=!0,e.trigger("ready"),a.ready=!0,a.trigger("ready")}),i)}(e),o.trigger("phoenix_cbsi_video_manager_setup_done")):u(c+"ERROR: cbsiVideoManager.initialize() systemInfo missing. Aborting build.")}),(function(e){u(c+"cbsiVideoManager init error",e)}))},v=function(t){var a=t.ApiInterfaceManager,n=t.PlayerApi,i=t.containerId,s="."+i+".phoenix",r=e.uvpjs,o=function(e){e&&i===e.target&&(e.type==r.EventType.FIRST_GESTURE&&u(c+"IMPORTANT: First gesture event heard from UVP"),e.type!==r.EventType.VIDEO_PROGRESS&&u(c+e.type+" eventData: ",JSON.stringify(e)),a.trigger(e.type,e.payload))};u(c+"Init VCI event listeners"),n.addEventListener(r.EventType.AD_BLOCKED+s,o),n.addEventListener(r.EventType.AD_END+s,o),n.addEventListener(r.EventType.AD_SLOT_END+s,o),n.addEventListener(r.EventType.AD_START+s,o),n.addEventListener(r.EventType.AD_SLOT_START+s,o),n.addEventListener(r.EventType.CONTENT_DATA_LOADED+s,o),n.addEventListener(r.EventType.CONTENT_START+s,o),n.addEventListener(r.EventType.CONTENT_END+s,o),n.addEventListener(r.EventType.NO_AD_CONTENT+s,o),n.addEventListener(r.EventType.RESOURCE_START+s,o),n.addEventListener(r.EventType.VIDEO_DONE+s,o),n.addEventListener(r.EventType.VIDEO_ERROR+s,o),n.addEventListener(r.EventType.PLAYER_START_ERROR+s,o),n.addEventListener(r.EventType.VIDEO_START_ERROR+s,o),n.addEventListener(r.EventType.VIDEO_PLAYBACK_ERROR+s,o),n.addEventListener(r.EventType.AD_ERROR+s,o),n.addEventListener(r.EventType.VIDEO_STATE_CHANGE+s,o),n.addEventListener(r.EventType.VIDEO_LOADING+s,o),n.addEventListener(r.EventType.VIDEO_PROGRESS+s,o),n.addEventListener(r.EventType.VIDEO_DURATION_CHANGE+s,o),n.addEventListener(r.EventType.DIAGNOSTIC_WINDOW_CLOSE_BUTTON+s,o),n.addEventListener(r.EventType.FIRST_GESTURE+s,o),n.addEventListener(r.EventType.CONTROL_UNMUTE+s,o)};const h=function(e){const a=e.ApiInterfaceManager,n=a.getVideoJson(),i=t.getTrackingParams(),s={articleId:i.articleId,articleTitle:i.articleTitle,articleType:i.articleType,authorIDs:i.authorIDs,blockStatus:i.blockStatus,brand:i.brand,collectionId:i.collectionId,deviceType:i.deviceType,pageType:i.pageType,pageUrl:i.pageUrl,pageViewGuid:i.pageViewGuid,premiumContent:n.premium.toString(),productGenre:i.productGenre,productId:i.productId,productTitle:i.productTitle,showName:i.showName,siteCode:n.trackingSiteCode,sitePrimaryRsid:n.trackingPrimaryId,siteRsids:n.trackingAccount,siteSection:i.siteSection,siteHier:i.siteHier,siteType:n.siteType,subCollection:i.subCollection,test:i.test,userId:i.userId,userState:i.userState,userType:i.userType,videoAutoPlay:n.autoplay&&!a.getPlayerState("autoplayUserDisabled")?"on":"off",videoAssetSource:n.videoAssetSource};return k(e)&&(n.isDevice&&n.cuePoints?s.videoAdServerName="dai_sdk":s.videoAdServerName="ima"),u(c+"pageContextData",s),e.pageContextData=s,s};var m,f,P,w=(m=n("<div />"),f=n('<div class="js-vid-ima-ad av-video-player-hold av-ima-ad" />'),function(e){var t=e.$el,a=t.attr("id");t.append(m.clone().attr("id","content_"+a),f.clone().attr("id","ad_"+a))});P=c+"[AD CALL] ";const S=function(e,t){const a=e.ApiInterfaceManager,n=a.getVideoUrl(),i=a.getVideoJson();let s={assetURL:n,cmsRefGuid:i.guid,duration:i.lengthSeconds,mediaId:i.id,isLive:i.isLiveStream,type:l.mediaCapabilities.RP_URL,videoTitle:decodeURIComponent(i.title)};return t||(s.vidContId=e.containerId),s};var k=function(e){return e.ApiInterfaceManager.shouldPlayAd()},b=function(e,t){var a=e.PlayerApi;setTimeout((function(){u(c+"Load new resource(s) and play"),a.loadAndPlayResource(S(e)),e.states.resourceLoaded=!0}),0)},T=function(e,t){u(c+"loadOrWatch <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<");var a=e.PlayerApi;null!==a?a.onPreviewButton((function(){if(u(c+"onPreviewButton: "+e.states.autoplayType),e.states.autoplayType==e.autoplayTypes.muted){u(c+"autoplay type is muted, making watcher");var n=e.ApiInterfaceManager.$player,i=scrollMonitor.create(n),s=function(){e.$el.off(".watcher"),n.off(".watcher"),i.destroy(),u(c+"Destroying Watcher")};i.on("enterViewport",(function(){a.getCurrentPlaybackState().playbackStarted&&!t?(u(c+"entering view port and playing"),e.resume()):b(e)})),i.on("exitViewport",(function(){a.getCurrentPlaybackState().playbackStarted&&(u(c+"leaving view port and pausing"),e.pause())})),e.$el.one("click.watcher touchend.watcher",s),n.one("click.watcher touchend.watcher",s)}else u(c+"onPreviewButton: LOAD AND PLAY"),b(e)})):setTimeout((function(){T(e,t)}),500)};i.uvpjs=s.extend({name:"uvpjs",states:{ready:!1,resourceLoaded:!1,shouldPlayAd:!1,autoplayType:"none"},allowAutoplay:!1,autoplayTypes:{normal:"normal",muted:"muted",none:"none"},containerId:null,firstGesture:0,sessionOptions:null,pageContextData:null,onVideoPlaybackErrorHandler:null,ApiInterfaceManager:null,PlayerApi:null,PlayerApiManager:null,initialize:function(e){var t=this,i=e.videoJSON;a.AbstractApiInterface.prototype.initialize.call(t,e),t.ApiInterfaceManager=e.ApiInterfaceManager,t.containerId=t.$el.attr("id"),u(c+"initialize, container ID: "+t.containerId),w(t),function(e,t){if(!e.sessionOptions){var a=!!t.cuePoints,n=t.isDevice?"mobile":"desktop",i={uvpjsHostname:t.uvpjsHostname,capLevelToPlayerSize:!0,cms:t.cms,partner:t.partner,playsInline:!0,skin:!1,usesIMA:!("mobile"===n&&a||!t.uvpHi5Ima),uvpc:{modules:t.tracking},allowConcurrentPlayback:!1};t.userId>0&&(i.userId=t.userId),"mobile"===n&&i.uvpc.modules.push({category:"internal",enabled:!0,name:"VideoPlaybackSettings",params:[{name:"forceHlsjs",value:!0}]}),e.sessionOptions=i}}(t,i),i.uvpHi5Ima?d?y(t):(t.once("imaSdkLoaded",(function(){y(t)})),function(e){if(d)return;var t,a,i,s,r=e.ApiInterfaceManager.getVideoJson(),o=!!r.cuePoints;let l,p;"mobile"==(r.isDevice?"mobile":"desktop")&&o?(l="//imasdk.googleapis.com/js/sdkloader/ima3_dai.js",p="//imasdk.googleapis.com/js/sdkloader/ima3_dai_debug.js"):(l="//imasdk.googleapis.com/js/sdkloader/ima3.js",p="//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"),i="IMA script",s=l,t?t.always((function(){e.trigger("imaSdkLoaded")})):(u(c+"Load IMA js"),window.addEventListener("error",a=function(e){"SCRIPT"===e.target.tagName&&(e.target.src.includes(l)||e.target.src.includes(p))&&(window.removeEventListener("error",a),t.abort())},!0),t=n.ajax({url:s,dataType:"script",cache:!0,complete:[function(){u(c+"IMA js LOADED: "+s),d=!0,e.trigger("imaSdkLoaded")}],error:function(){u(c+i+" failed to load")},success:function(){u(c+i+" successfully loaded")}}))}(t)):y(t)},checkCanAutoplay:function(){return this.allowAutoplay},configureAutoPlay:function(){const e=this;let a=!1;const i=e.ApiInterfaceManager.getVideoJson(),s=e.ApiInterfaceManager.autoplayTypeAllowed,r=e.ApiInterfaceManager.autoplayTypes,o=t.query("autoplay"),l=t.query("mute");let d=!1;const p=document.querySelector('[data-sticky-active="true"]');(i.autoplay||"1"===o||"true"===o)&&(d=!0),p&&(d=!1),!i.startMuted||s!==r.muted&&s!==r.normal?d&&s===r.normal?(a=!0,e.states.autoplay=!0,i.startMuted=!1,e.states.autoplayType=r.normal):d&&s===r.muted?(a=!0,e.states.autoplay=!0,i.startMuted=!0,e.states.autoplayType=r.muted):(e.states.autoplay=!1,i.startMuted=!1,e.states.autoplayType=r.none,u(c+" Can NOT play unmuted nor muted")):(a=!0,e.states.autoplay=!0,e.states.autoplayType=r.muted),"1"!==l&&"true"!==l||(i.startMuted=!0,n(".js-vid-unmute-autoplay").remove()),u(c+"configureAutoplay siteRequestsAutoplay:"+d+" | autoplayType: "+e.states.autoplayType+" | canAutoPlay"+a),e.allowAutoplay=d&&a},play:function(e){var t=this;t.ApiInterfaceManager.isDisabled()||(e||!t.states.resourceLoaded?(u(c+"load resource and play video"),T(t,e)):(u(c+"play video"),t.PlayerApi.playVideo()))},pause:function(){var e=this;e.ApiInterfaceManager.isDisabled()||e.states.resourceLoaded&&(u(c+"pause video"),e.PlayerApi.pauseVideo())},resume:function(){var e=this;e.ApiInterfaceManager.isDisabled()||(e.states.resourceLoaded?(u(c+"resume video"),e.PlayerApi.playVideo()):e.play())},seekTo:function(e){this.states.resourceLoaded&&(u(c+"seek"),this.PlayerApi.seekTo(e))},seekToLive:function(){var e=this;e.states.resourceLoaded&&(u(c+"seek to live"),e.seekTo(e.getDuration()-1),e.play())},stop:function(e){u(c+"stop video"),this.PlayerApi.stopVideo(),e&&this.PlayerApi.destroyPlaylist()},setVolume:function(e){var t=this;!0===t.ApiInterfaceManager.getVideoJson().autoplay&&t.ApiInterfaceManager.autoplayTypeAllowed==t.ApiInterfaceManager.autoplayTypes.muted?t.firstGesture>=1&&(u(c+"NEW firstGesture set volume to "+e+" | "+t.firstGesture),t.PlayerApi.setVolume(e)):t.PlayerApi.setVolume(e)},mute:function(){u(c+"mute"),this.PlayerApi.mute()},unMute:function(){var e=this;!0===e.ApiInterfaceManager.getVideoJson().autoplay&&e.ApiInterfaceManager.autoplayTypeAllowed==e.ApiInterfaceManager.autoplayTypes.muted?1===e.firstGesture?(u(c+"unMute via user gesture | gesture === 1"),e.PlayerApi.unMute(),e.PlayerApi.handleFirstGesture(),e.firstGesture++):e.firstGesture>1&&(u(c+"unMute() | gesture > 1 "),e.PlayerApi.unMute()):(u(c+"unMute() NORMAL"),e.PlayerApi.unMute())},userGesture:function(){u(c+"uvpjs.js userGesture: "+this.firstGesture),this.firstGesture=1},showDiagnosticWindow:function(){u(c+"show diagnostics"),this.PlayerApi.showDiagnosticWindow()},fullscreen:function(e){u(c+"fullscreen"),this.PlayerApi.fullscreen(e)},getCurrentTime:function(){var e=this.PlayerApi;return e?e.getCurrentPlaybackState().currentTime:0},getDuration:function(){var e=this.PlayerApi;return e?e.getCurrentPlaybackState().duration:0},getVolume:function(){var e=this.PlayerApi;return e?e.getVolume():0},disable:function(){var e=this,t=e.PlayerApi,a=e.PlayerApiManager;t&&a&&a.destroyVideoPlayer(e.containerId)}})}(window)},7122:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i,s,r=e.Phoenix;r||(e.Phoenix=r={}),t=r.VideoPlayer=r.VideoPlayer||{},s=(a=t.Views=t.Views||{}).AbstractApiInterface,i=t.ApiInterfaces=t.ApiInterfaces||{};var o=t.log,l=(JSON.stringify,function(e,t){var a=e.ApiInterfaceManager,n=e.PlayerApi;clearInterval(e.progressTimer),t&&(e.progressTimer=setInterval((function(){var e={};n&&n.getCurrentTime&&(e.currentTime=n.getCurrentTime(),a.trigger("onVideoProgress",e))}),1e3))}),u=function(e,t){e.states.loaded?t&&t(e.PlayerApi):(e.pendingCallbacks.push(t),e.states.loading||function(e){if(!e.states.loaded&&!e.states.loading){if(void 0===window.onYouTubeIframeAPIReady){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var a,i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),window.onYouTubeIframeAPIReady=function(){a=new YT.Player(e.$videoContainer.attr("id"),{height:"360",width:"640",videoId:e.videoId,events:{onReady:s,onStateChange:r}}),e.PlayerApi=a,e.states.resourceLoaded=!0}}else a=new YT.Player(e.$videoContainer.attr("id"),{height:"360",width:"640",videoId:e.videoId,events:{onReady:s,onStateChange:r}}),e.PlayerApi=a,e.states.resourceLoaded=!0;e.states.loading=!0}function s(t){e.states.loaded=!0,e.states.loading=!1,l(e,!0),e.pendingCallbacks.length>0&&(n.each(e.pendingCallbacks,(function(e,a){a(t.target)})),e.pendingCallbacks=[])}function r(t){var a=e.ApiInterfaceManager,n=e.els;switch(t.data){case YT.PlayerState.UNSTARTED:a.trigger("resume"),a.setPlayerStates({started:!0});break;case YT.PlayerState.PLAYING:0==e.ytStartTracked&&(n.$ytStart.trigger("customEventTracking"),e.ytStartTracked=!0);break;case YT.PlayerState.ENDED:a.trigger("onVideoDone"),0==e.ytEndTracked&&(n.$ytEnd.trigger("customEventTracking"),e.ytEndTracked=!0);case YT.PlayerState.PAUSED:case YT.PlayerState.UNSTARTED:case YT.PlayerState.BUFFERING:case YT.PlayerState.CUED:}}}(e))};i.youtube=s.extend({name:"youtube",states:{ready:!1,playing:!1,resourceLoaded:!1,loading:!1,loaded:!1},progressTimer:null,videoJSON:null,videoId:null,$videoContainer:null,els:null,ytStartTracked:!1,ytEndTracked:!1,pendingCallbacks:null,PlayerApi:null,ApiInterfaceManager:null,initialize:function(e){var t=this,n=t.ApiInterfaceManager=e.ApiInterfaceManager,i=t.videoJSON=e.videoJSON;t.els={};const{$player:s}=n;t.els.$ytEnd=s.find(".js-vid-youtube-tracking-end"),t.els.$ytStart=s.find(".js-vid-youtube-tracking-start"),a.AbstractApiInterface.prototype.initialize.call(t,e),t.pendingCallbacks=[],t.$videoContainer=t.$el,i&&(t.videoId=i.youtubeID)},checkHasSource:function(){var e=this.videoJSON;return!(!e||void 0===e.youtubeID||!e.youtubeID)},checkContentExists:function(e){if("function"==typeof e){var t,a=this,i=this.videoJSON,s=i.youtubeID,r=i.youtubeKey;s?(t={url:"https://www.googleapis.com/youtube/v3/videos?part=id&id="+s+"&key="+r,beforeSend:function(){o("[API-YT] Checking youtubeID "+s+" against API")},error:function(t,a){o("[API-YT] Error checking youtubeID "+s,[t,a]),e(!0)},success:function(t){t.pageInfo.totalResults>=1?(e(!0),a.ApiInterfaceManager.trigger("ready")):(o("[API-YT] Content does not exist for youtubeID "+s),e(!1))}},n.ajax(t)):e(!1)}},initApi:function(){var e=this;e.$el.trigger("youtubeInit"),u(this,(function(t){o("[API-YT] Init YouTube API"),e.ApiInterfaceManager.setPlayerStates({apiReady:!0})}))},play:function(e){var t=this;o("[API-YT] play video"),u(t,(function(e){e.playVideo()})),t.states.playing=!0,l(t,!0),t.ApiInterfaceManager.trigger("onContentStart")},pause:function(){var e=this;e.PlayerApi;o("[API-YT] pause video"),e.states.playing&&(u(this,(function(e){e.pauseVideo()})),e.states.playing=!1,l(e,!1))},resume:function(){var e=this;e.states.resourceLoaded&&!e.states.playing&&(o("[API-YT] resume video"),u(this,(function(e){e.playVideo()})),e.states.playing=!0,l(e,!0))},stop:function(){o("[API-YT] stop video"),u(this,(function(e){e.stopVideo()})),this.states.playing=!1,l(this,!1)},seekTo:function(e){this.states.resourceLoaded&&(o("[API-YT] seek to "+e),u(this,(function(t){t.seekTo(e)})))},setVolume:function(e){o("[API-YT] set volume to "+e),u(this,(function(t){t.setVolume(100*e)}))},mute:function(){o("[API-YT] mute"),u(this,(function(e){e.mute()}))},unMute:function(){o("[API-YT] unMute"),u(this,(function(e){e.unMute()}))},getCurrentTime:function(){var e=this.PlayerApi;return e?e.getCurrentTime():0},getVolume:function(){var e=this.PlayerApi;return e?e.getVolume():0},disable:function(){var e=this.PlayerApi;e&&e.destroy()}})}(window)},2631:(e,t,a)=>{"use strict";var n=a(2257),i=a(9755);!function(e){var t,a,s=e.Phoenix;s||(e.Phoenix=s={}),a=(t=s.VideoPlayer=s.VideoPlayer||{}).Views=t.Views||{};var r,o=t.log,l={},u={pause:function(){d(this).pause()},stop:function(){d(this).stop()},play:function(e,t){d(this).play(t)},resume:function(){d(this).resume()},seekTo:function(e,t){d(this).seekTo(t)},seekToLive:function(e,t){d(this).seekToLive(t)},setVolume:function(e,t){d(this).setVolume(t)},mute:function(){d(this).mute()},userGesture:function(){d(this).userGesture()},unMute:function(){d(this).unMute()},showDiagnosticWindow:function(){d(this).showDiagnosticWindow()},fullscreen:function(e,t){d(this).fullscreen(t)},updatePlayback:function(e,t){var a,n=t.states,i=n.playerType;h(t,i),n.started&&(o("[MANAGER] Play with new playback: ",n.playback),a=d(this),"chromecast"===i?(a.pause(),a.stop(!0)):a.pause()),v(this.playerId,i),m(i),t.trigger("playbackUpdated")},updateQuality:function(e,t,a){var n,i=t.states;i.started&&!a&&(o("[MANAGER] Play with new quality: ",i.quality),(n=d(this)).pause(),n.play(!0)),t.trigger("qualityUpdated")}},c={onContentEnd:{name:"contentEnd"},onVideoDone:{name:"videoDone"},onVideoProgress:{name:"videoProgress"},onVideoLoading:{name:"videoLoading"},onVideoDurationChange:{name:"videoDurationChange"},onResourceStart:{name:"resourceStart"},onAdStart:{name:"adStart"},onAdEnd:{name:"adEnd"},onContentStart:{name:"contentStart"},onStateChange:{name:"stateChange"},onAdBlocked:{name:"adBlocked"},playerStartError:{name:"playerStartError"},videoStartError:{name:"videoStartError"},adError:{name:"adError"},onVideoPlaybackError:{name:"videoPlaybackError"},diagnosticWindowCloseButton:{name:"diagnosticWindowCloseButton"},droppedFrameCountAlert:{name:"droppedFrameCountAlert"},play:{name:"play"},pause:{name:"pause"}},d=function(e){var t=p(e);if(t)return t.activeInterface},p=function(e){return l[e.playerId]},g=function(e){var t=p(e);if(t)return t.Player},y=function(e,a,n){var s=(r||(r=i(`<div class="js-vid-player-type-holder av-player-type-holder ${t.classnames.hide}"/>`)),r.clone());return s.attr("id","js-vid-player-"+a+n),s.addClass("av-"+a+"-player-holder js-"+a+"-player-holder"),s.appendTo(e),s},v=function(e,t){var a,n=l[e];return n&&(a=n.apiInterfaces[t]),a?(o("[MANAGER] Set ApiInterface to "+t),n.activeInterface=a,"function"==typeof a.initApi&&a.initApi(),!0):(o("[MANAGER] Requested ApiInterface ["+t+"] is unavailable"),!1)},h=function(e,a){var n=e.$el.find(".js-vid-player-type-holder"),i=e.$el.find(".js-"+a+"-player-holder");n.addClass(t.classnames.hide),i.removeClass(t.classnames.hide)},m=function(e){i(document);document.dispatchEvent(new CustomEvent("update_tracking_params",{detail:{eventName:"pageLoad",trackingParamsOverride:{tealium:{utagData:{videoPlayerType:e}}}}}))};a.ApiInterfaceManager=Backbone.View.extend({playerId:null,ready:!1,autoplayTypes:{normal:"normal",muted:"muted",none:"none"},autoplayTypeAllowed:"",initialize:function(e){var a=this,s=e.Player;a.playerId=s.playerId,a.$player=s.$el,a.autoplayTypeAllowed=a.autoplayTypes.none;var r=function(e,a){var s,r,u=a.playerId,c=[],d={};let p=!1;if(!l[u])return l[u]=r={Player:a},i.each(t.ApiInterfaces,(function(t,i){const r=i.prototype.name,l=a.$el[0],g=l.dataset.jwMediaId,v=l.dataset.jwContextName;let h,m;"uvpjs"===r&&g||"jwplayer"===r&&p||(o("[MANAGER] Initialize ApiInterface "+t),m=y(e.$el,r,u),h=new i({el:m,ApiInterfaceManager:e,videoJSON:a.videoJSON,videoPlayersContainerElement:l}),s||(s=h),d[r]=h,p="giantbomb"===v&&"youtube"===r&&d[r]&&"jwplayer"!==a.Preferences.getPreference("playback",a.playerId)&&!(0,n.Z)(),c.push(r))})),r.activeInterface=s,r.apiInterfaces=d,r.count=c.length,o("[MANAGER] managerApiInstances: ",l),c}(a,s);r&&o("[MANAGER] Player type"+(1!=r.length?"s":"")+" loaded: ",r.join(", ")),s.on("all",(function(e){u[e]&&(Function.prototype.apply?u[e].apply(a,arguments):u[e].call(a,Array.prototype.slice.call([arguments])))})),s.on("disable",(function(){!function(e){var t=l[e];if(t)for(const e in t.apiInterfaces)t.apiInterfaces[e].disable()}(a.playerId)})),s.ApiInterfaceManager=a,a.on("all",(function(e,t){var a=c[e];a&&s.trigger(a.name,t)})),o("[MANAGER] For playerId ["+s.playerId+"] Initialized")},getActiveInterface:function(){return d(this)},getInterface:function(e){return function(e,t){var a=l[e];return a?a.apiInterfaces[t]:null}(this.playerId,e)},getAdParams:function(){return this.getVideoJson().adCall},shouldPlayAd:function(){var e=this.getPlayerState("adPlayed");return!(!this.getAdParams()||!0===e)},getVideoJson:function(){return g(this).videoJSON},getVideoUrl:function(e,t,a){var n,i=g(this),s=i.videoJSON;if(n=i.states.quality,!e&&n||(n=t||"adaptive_stream"),o("[MANAGER] getVideoUrl for ["+n+"] from videoStreams: ",JSON.stringify(s.videoStreams)),void 0===s.videoStreams[n]){if(void 0!==s.videoStreams[a])return s.videoStreams[a];n="adaptive_stream"}return s.videoStreams[n]},getCurrentTime:function(){var e=d(this);return e&&e.getCurrentTime?e.getCurrentTime():0},getDuration:function(){var e,t=d(this);return t&&t.getDuration?((e=t.getDuration())||(e=g(this).videoJSON.lengthSeconds),e):0},getVolume:function(){var e=d(this);return e&&e.getVolume?e.getVolume():0},getPlayerState:function(e){return g(this).states[e]},setPlayerStates:function(e){g(this).setStates(e)},isDisabled:function(){return g(this).states.disabled},configureAutoplay:function(){var e=d(this);return!!e&&e.configureAutoplay()},checkCanAutoplay:function(){var e=d(this);return!!e&&e.checkCanAutoplay()}})}(window)},6683:()=>{!function(e){"use strict";var t,a,n=e.Phoenix;n||(e.Phoenix=n={}),a=(t=n.VideoPlayer=n.VideoPlayer||{}).Views=t.Views||{};var i="is-vid-sticky-chrome",s=function(e,t){e.states.stickyChrome||(e.setStates({hideControlChrome:!t,showControlChrome:t}),t?e.trigger("showControlChrome"):e.trigger("hideControlChrome"))},r=function(e){e.hoverTimeout=setTimeout((function(){e.Player.states.dragging?r(e):s(e.Player,!1)}),2e3)},o=function(e){return!(!e.started||e.adPlaying)};a.ControlChrome=Backbone.View.extend({untapTimeout:null,hoverTimeout:null,previousClientX:null,previousClientY:null,keepAlive:!1,events:{"touchend .js-vid-player-holder, .js-vid-play":"touchPlayer","touchend .js-vid-player-chrome":"touchInteract",mousemove:"hoverPlayer","mouseenter .js-vid-box":"enterControlChrome","mouseleave .js-vid-box":"leaveControlChrome",mouseenter:"enterPlayer",mouseleave:"leavePlayer",adStart:"show",contentStart:"delayHide",contentEnd:"show",videoDone:"show"},Player:null,initialize:function(e){var t,a=this;(t=a.Player=e.Player).$el.hasClass(i)&&t.setStates({stickyChrome:!0}),s(t,!1),t.on("fullscreen",(function(){a.hide()}))},show:function(){var e=this,t=e.Player;e.keepAlive=!0,clearTimeout(e.hoverTimeout),s(t,!0)},hide:function(){var e=this,t=e.Player,a=t.states;o(a)&&(e.keepAlive=!1,clearTimeout(e.hoverTimeout),s(t,!1))},delayHide:function(e){var t=this,a=t.Player,n=a.states;o(n)&&(s(a,!0),clearTimeout(t.hoverTimeout),t.keepAlive||r(t))},hoverPlayer:function(e){var t,a,n=this,i=n.Player,l=i.states;(t=n,(a=e).clientX===t.previousClientX&&a.clientY===t.previousClientY||(t.previousClientX=a.clientX,t.previousClientY=a.clientY,0)||!o(l))||(s(i,!0),clearTimeout(n.hoverTimeout),n.keepAlive||r(n))},enterControlChrome:function(e){this.keepAlive=!0,clearTimeout(this.hoverTimeout)},leaveControlChrome:function(e){this.keepAlive=!1,this.hide()},enterPlayer:function(e){this.Player.states.fullscreen||clearTimeout(this.hoverTimeout)},leavePlayer:function(e){this.Player.states.fullscreen||this.hide()},touchPlayer:function(e){var t=this.Player,a=t.states;if(a.started&&!t.$el[0].dataset.jwMediaId)return e.preventDefault(),s(t,!a.showControlChrome),this.touchInteract(e),!1},touchInteract:function(e){var t=this,a=t.Player,n=a.states;clearTimeout(t.untapTimeout),n.showControlChrome&&(t.untapTimeout=setTimeout((function(){n.dragging?t.touchInteract(e):s(a,!1)}),5e3))}})}(window)},8390:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),a=(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{};t.log;a.AbstractPreference=Backbone.View.extend({name:"",disabled:!1,saveToCookie:!0,controlType:"preference",els:null,states:null,Player:null,Preferences:null,initialize:function(e){var t=this;t.Player=e.Player,t.Preferences=e.Preferences,t.els&&"object"==typeof t.els&&(t.els=n.extend({},t.els)),t.states&&"object"==typeof t.states&&(t.states=n.extend({},t.states))},choosePreference:function(e){var t,a=this,i=n(e.currentTarget);e.preventDefault(),a.disabled||(t=a.setPreference(i),a.savePreferences(t))},getValue:function(e){return e.data("cmd-value")},savePreferences:function(e){e&&this.trigger("change",e)},loadPreference:function(e){return this.states},setPreference:function(e){},disable:function(e){this.disabled=e}})}(window)},1179:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};var s,r=t.log,o="[CHROMECAST] ",l="adaptive_restricted",u=!1,c=!1,d=(s=!1,function(e){s||n.ajax({url:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",dataType:"script",cache:!0,success:function(){s=!0}})}),p=function(e){e.els.$chromecastWrap.removeClass(t.classnames.hide),cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID}),e.RemotePlayer=new cast.framework.RemotePlayer,e.RemotePlayerController=new cast.framework.RemotePlayerController(e.RemotePlayer),e.RemotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,e.switchPlayer.bind(e)),e.RemotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,e.stateChanged.bind(e))};a.Chromecast=Backbone.View.extend({name:"chromecast",els:{$chromecastWrap:null,$chromecastButton:null},events:{"click .js-vid-chromecast-wrap":"chromecastBroadcast"},Player:null,RemotePlayer:null,RemotePlayerController:null,PlayerHandler:null,PlayerState:null,Media:null,Session:null,PreviousStates:{},ChromecastThisPlayer:!1,startTime:0,initialize:function(e){var t=this,a=t.els=n.extend({},t.els);t.PreviousStates=n.extend({},t.PreviousStates),window.navigator.userAgent.match(/Edge/)||window.navigator.userAgent.match("CriOS")||c||(t.Player=e.Player,a.$chromecastWrap=t.$el.find(".js-vid-chromecast-wrap"),a.$chromecastButton=t.$el.find(".js-vid-chromecast"),d(t),u?p(t):window.__onGCastApiAvailable=function(e,a){e&&"undefined"!=typeof chrome&&chrome.cast?(u=!0,p(t)):(c=!0,r("Error",a))})},chromecastBroadcast:function(){t.ChromecastLaunch=!0,this.ChromecastThisPlayer=!0},switchPlayer:function(){var e=this,a=e.Player;return t.ChromecastLaunch&&!e.ChromecastThisPlayer?(e.ChromecastThisPlayer=!1,void(t.ChromecastLaunch=!1)):(a.getCurrentTime()>0&&(e.startTime=a.getCurrentTime()),cast&&cast.framework&&e.RemotePlayer.isConnected?(e.PreviousStates.playback=a.states.playback,e.PreviousStates.playerType=a.states.playerType,e.PreviousStates.quality=a.states.quality,void e.setupRemotePlayer()):void e.resetPlayback())},stateChanged:function(e){this.Player.ApiInterfaceManager},setPlayback:function(){var e=this.Player;e.setStates({playback:"chromecast",playerType:"chromecast"}),e.trigger("updatePlayback",e)},setupRemotePlayer:function(){var e=this,t=e.Player,a=t.ApiInterfaceManager,n=a.getVideoJson();e.Session=cast.framework.CastContext.getInstance().getCurrentSession();var i=a.getVideoUrl(!0,"adaptive_dash",l);i.length||a.getVideoUrl(!0,l),r(o+"Loading media",i);var s=null;n.isLiveStream?(s=new chrome.cast.media.MediaInfo(i,"application/x-mpegurl")).streamType=chrome.cast.media.StreamType.LIVE:s=new chrome.cast.media.MediaInfo(i,"video/mp4"),s.metadata=new chrome.cast.media.GenericMediaMetadata,s.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,s.metadata.title=decodeURIComponent(n.title);var u=new chrome.cast.media.LoadRequest(s);e.Session.loadMedia(u).then(e.loadSuccess.bind(e),function(t){e.PlayerState="ERROR",r(o+"Remote media load error: "+t)}.bind(e)),a.on("onVideoProgress",(function(){e.startTime=t.getCurrentTime()}))},loadSuccess:function(){var e=this,t=e.Player,a=t.ApiInterfaceManager;e.setPlayback(),e.Media=e.Session.getMediaSession();var n=a.getActiveInterface();n.setMedia(e.Media),n.setPlayer(e.RemotePlayer),n.setController(e.RemotePlayerController),e.startTime>0&&t.setStates({customStartTime:e.startTime}),t.play(),t.setStates({chromecast:!0,played:!1,started:!0,ended:!1})},resetPlayback:function(){var e=this,t=e.Player;r(o+"Reset playback"),t.states.chromecast&&(e.PreviousStates.playback||(e.PreviousStates.playback=t.Preferences.getPreference("playback",t.playerId),e.PreviousStates.quality=t.Preferences.getPreference("quality",t.playerId),e.PreviousStates.playerType="uvpjs"),t.stop(),t.setStates({chromecast:!1,playback:e.PreviousStates.playback,playerType:e.PreviousStates.playerType,quality:e.PreviousStates.quality,customStartTime:e.startTime,switchingSource:!0,started:!0,played:!1,isSeekDisabled:!1}),t.trigger("updatePlayback",t),t.play(!0))}})}(window)},5917:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};t.log;var s={$modal:".js-vid-modal-share",$toggle:".js-vid-share",$shareTypes:".js-vid-share-type",$shareTypesBody:".js-vid-share-types-body",$shareTypeOptions:".js-vid-share-type-options",$sizeOptions:".js-vid-share-sizes",$shareMarkup:".js-vid-share-markup",$startCbx:".js-start-checkbox",$endCbx:".js-end-checkbox",$startTime:".js-start-time",$endTime:".js-end-time",$autoplayCbx:".js-autoplay-checkbox",$loopCbx:".js-loop-checkbox",$typeSelect:".js-share-type-select",$embedOptions:".js-embed-modal",$shareText:".js-vid-share-markup"},r=function(e){var t=e.split(":"),a=0,n=0;return 2===t.length?(a=parseInt(t[0]),a=isNaN(a)?0:a,n=parseInt(t[1]),(n=isNaN(n)?0:n)>=60&&(a+=Math.floor(n/60),n%=60)):(n=parseInt(t[0]),n=isNaN(n)?0:n),(a>0?a+"m":"")+n+"s"},o=function(e,t){var a=e.els,n="link"===t?e.shareData.linkUrl:e.shareData.embedUrl,i="";return a.$startCbx.is(":checked")&&(i+="?t="+r(a.$startTime.val())),a.$endCbx.is(":checked")&&a.$endTime.val()&&(i+=0===i.length?"?":"&",i+="e="+r(a.$endTime.val())),a.$autoplayCbx.is(":checked")&&(i+=0===i.length?"?":"&",i+="autoplay=1"),a.$loopCbx.is(":checked")&&(i+=0===i.length?"?":"&",i+="loop=1"),n+i},l=function(e){var t,a="";if("embed"===e.shareType){t=e.els.$sizeOptions.find("option:selected"),e.currentSize=t.val()||e.defaultSize;var i=n(e.shareData.embedHtml[e.currentSize]);i.attr("src",o(e,"embed")),a=i.prop("outerHTML").replace(/&amp;/g,"&")}else a=o(e,"link");e.els.$shareMarkup.val(a)};a.Share=Backbone.View.extend({name:"share",defaultSize:null,hasStartFocused:!1,shareType:null,shareData:null,els:null,events:{"click .js-vid-share":"toggleShare","keydown .js-end-time, .js-start-time, .js-vid-share-markup":"timeKeydown","keyup .js-end-time, .js-start-time":"changeShareModalCode","click .js-vid-share-markup":"selectMarkup","change .js-refresh-share-code":"changeShareModalCode","change .js-share-type-select":"changeShareType","click .js-vid-share-type":"setShareType"},Player:null,initialize:function(e){var a,n,i=this;(a=i.Player=e.Player).on("contentTimeChange",(function(e){!function(e,t){var a=e.els;if((a.$startTime.is(":focus")||a.$shareMarkup.is(":focus"))&&(e.hasStartFocused=!0),!e.hasStartFocused){var n=Math.floor(t.currentTime),i=Math.floor(n/60),s=n%60;a.$startTime.val(i+":"+(s<10?"0"+s:s)),a.$startTime.change()}}(i,e)})),i.shareData=a.videoJSON.share,n=i,t.getComponents(n,s),n.els.$modal.length&&(n.defaultSize=n.els.$sizeOptions.find("option:eq(0)").val(),l(n))},toggleShare:function(e){var t=this.Player,a=!t.states.share;e.preventDefault(),t.setStates({share:a}),a&&n(e.currentTarget).trigger("customEventTracking"),this.els.$toggle.toggleClass("av-ctrl-on",a)},selectMarkup:function(e){n(e.currentTarget).select()},changeShareType:function(e){this.els.$embedOptions.toggleClass(t.classnames.hide)},setShareType:function(e){var a=this,i=n(e.currentTarget),s=i.data("share-type"),r=a.els.$shareTypeOptions;a.els.$shareTypes.removeClass("av-ctrl-on"),a.els.$shareTypesBody.removeClass("av-share-types-body--"+a.shareType).addClass("av-share-types-body--"+s),i.addClass("av-ctrl-on"),r.each((function(){var e=n(this);e.toggleClass(t.classnames.hide,e.data("share-type")!==s)})),a.shareType=s,l(a)},changeShareModalCode:function(e){l(this)},timeKeydown:function(e){e.stopPropagation()}})}(window)},19:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i,s=e.Phoenix;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},a=t.Views=t.Views||{},i=t.Controls=t.Controls||{};var r=t.log,o=n(window),l=function(e,t){var a,n=!1,i=e.els,s=e.states,r=e.Player,l=i.$embiggenContainer,u=i.$embiggenVidSize,c=s.embiggened,d=u.data("embiggen-class"),p=u.data("debiggen-class");return c!==t&&(n=!0,!0===t?(u.removeClass(p).addClass(d),l.addClass("large").removeClass("small medium"),a="embiggen"):(u.removeClass(d).addClass(p),l.addClass("small").removeClass("medium large"),a="debiggen"),s.embiggened=t,r.setStates(s),o.trigger("resize"),o.trigger("scroll"),r.trigger(a)),n};i.Embiggen=a.AbstractPreference.extend({name:"embiggen",els:{$embiggenContainer:null,$embiggenVidSize:null,$embiggenButtonContainer:null,$embiggenButton:null},states:{embiggened:!1},embiggenStateKey:"embiggened",events:{"click .js-vid-embiggen":"toggleEmbiggen"},Player:null,initialize:function(e){var t,n,i=this;a.AbstractPreference.prototype.initialize.call(i,e),t=i.Player=e.Player,(n=i.els).$embiggenContainer=t.$el.closest(".js-video-embiggen"),n.$embiggenVidSize=t.$el.closest(".js-video-size"),n.$embiggenButtonContainer=i.$(".js-vid-embiggen-wrap"),n.$embiggenButton=i.$(".js-vid-embiggen"),n.$embiggenButton.length&&n.$embiggenVidSize.length&&n.$embiggenContainer.length?"/"===window.location.pathname&&(i.embiggenStateKey="embiggen_frontdoor"):i.disable(!0)},loadPreference:function(e){var t=this;if(!t.disabled)return e&&!0===e[t.embiggenStateKey]&&l(t,!0),t.states},setPreference:function(){var e=this,t=e.Player.states;if(!e.disabled){var a={};return a[e.embiggenStateKey]=t.embiggened,e.savePreferences(a),a}},disable:function(e){var t=this,n=t.els;a.AbstractPreference.prototype.disable.call(t,e),n.$embiggenButton.length&&n.$embiggenButton.remove(),n.$embiggenButtonContainer.length&&n.$embiggenButtonContainer.remove(),t.stopListening()},toggleEmbiggen:function(e){var t=this,a=t.Player.states;t.disabled||(r("toggle embiggen!"),l(t,!a.embiggened),t.setPreference())}})}(window)},5287:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};var s,r=n(window),o=n("html, body"),l=function(t){e.setTimeout((function(){t.$el.focus()}),0)},u=function(e){e.exitFullscreen(),e.setWindowed(!1),r.trigger("resize")},c=(s=!1,function(){s||(s=!0,r.on("MSFullscreenChange webkitfullscreenchange mozfullscreenchange fullscreenchange",(function(e){var a,i=t.getAllInstances(),s=(a=!1,document.msFullscreenElement?a=document.msFullscreenEnabled:document.mozFullScreenElement?a=document.mozFullScreenEnabled:document.webkitFullscreenElement?a=document.webkitFullscreenEnabled:document.fullscreenElement&&(a=document.fullscreenEnabled),a);o.toggleClass("body-fullscreen",s),n.each(i,(function(e,t){t.trigger("fullscreenChange",s)})),r.trigger("resize"),r.trigger("mouseMove")})))});a.Fullscreen=Backbone.View.extend({enteringFullscreen:!1,events:{"click .js-vid-fullscreen":"toggleFullscreen","click .js-vid-fillbrowser":"toggleFillBrowser","dblclick .js-vid-player-holder":"toggleFullscreen",keyup:"keypressHandler"},Player:null,initialize:function(e){var t,a,i,s=this,r=s.$(".js-vid-fullscreen");t=s.Player=e.Player,a=t.el,i=n("<video></video>")[0],a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||i.webkitEnterFullscreen||(s.$(".js-vid-fullscreen-wrap").remove(),r.remove()),t.on("updatePlayback",(function(){"youtube"===t.states.playerType&&u(s)})),c(),t.on("fullscreenChange",(function(e){!function(e,t,a){var n=!1;if(a){if(!e.enteringFullscreen)return;n=!0,e.enteringFullscreen=!1}t.setStates({fullscreen:a}),t.trigger("fullscreen",a),n&&l(t)}(s,t,e)}))},toggleFullscreen:function(e){var t=this,a=t.Player.states;return e.preventDefault(),t.setWindowed(!1),a.fullscreen?t.exitFullscreen():t.enterFullscreen()},toggleFillBrowser:function(e){var t=this.Player.states;this.setWindowed(!t.windowed),r.trigger("resize")},enterFullscreen:function(){var e=this.Player,t=e.el,a=!!navigator.platform.match(/iPhone|iPod|iPad/),i=e.$el.find("video")[0];return!e.states.disabled&&(this.enteringFullscreen=!0,t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():!a&&t.webkitRequestFullscreen?t.webkitRequestFullscreen():i&&i.webkitEnterFullscreen&&(i.webkitEnterFullscreen(),n(i).off("webkitendfullscreen"),n(i).on("webkitendfullscreen",(function(){i.paused&&e.pause()}))),!0)},exitFullscreen:function(){return!this.Player.states.disabled&&(document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),!0)},setWindowed:function(e){var t=this.Player;o.toggleClass("body-fauxscreen",e),e&&l(t),t.setStates({windowed:e})},keypressHandler:function(e){var t=this;70===e.which?t.enterFullscreen():71===e.which?t.setWindowed(!0):27===e.which&&u(t)}})}(window)},7908:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i,s=e.Phoenix;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},a=t.Views=t.Views||{},i=t.Controls=t.Controls||{};var r=t.log,o="sticky",l={zIndex:5000050,noStop:!0,unstickyOnAjax:!1},u=function(e,t){var a=!1,i=e.Player,s=e.els,r=e.states,o=s.$stickyContainer,u=r.stickied;return n.sticky&&o&&u!==t&&(a=!0,!0===t?n.sticky(o,l,(function(){c(e,!0)}),(function(){c(e,!1)})):(n.destroySticky(o),c(e,!1)),r.stickied=t,i.setStates(r),e.setPreference()),a},c=function(e,t){var a=e.els.$stickyContainer,n=e.els.$videoSpacer,i=!!n.length;e.disabled||(t?(r("[PIN] add sticky"),a.addClass(o),i&&n.height(a.outerHeight(!0))):(r("[PIN] remove sticky"),a.removeClass(o),i&&n.height("auto")))};i.Pin=a.AbstractPreference.extend({name:"pin",els:{$videoSpacer:null,$stickyContainer:null,$stickyPinButtonContainer:null,$stickyPinButton:null},states:{stickied:!1},stickyClassName:"sticky",stickySettings:{zIndex:5000050,noStop:!0,unstickyOnAjax:!1},events:{"click .js-vid-pin-wrap":"toggleSticky"},Player:null,initialize:function(e){var t,i=this;a.AbstractPreference.prototype.initialize.call(i,e),i.Player=e.Player,(t=i.els).$videoSpacer=n("#video-spacer"),t.$stickyContainer=i.$el.closest(".js-video-sticky"),t.$stickyPinButtonContainer=i.$el.find(".js-vid-pin-wrap"),t.$stickyPinButton=i.$el.find(".js-vid-pin"),t.$stickyPinButton.length&&t.$stickyContainer.length||i.disable(!0)},loadPreference:function(e){var t=this;if(!t.disabled)return e&&!0===e.stickied&&u(t,e.stickied),t.states},setPreference:function(){var e=this,t=e.states;if(!e.disabled){var a={stickied:t.stickied};return e.savePreferences(a),a}},disable:function(e){var t=this,n=t.els;a.AbstractPreference.prototype.disable.call(t,e),n.$stickyPinButton.length&&n.$stickyPinButton.remove(),n.$stickyPinButtonContainer.length&&n.$stickyPinButtonContainer.remove(),t.stopListening()},toggleSticky:function(e){var t=this,a=t.states;t.disabled||(r("[PIN] toggle sticky!"),u(t,!a.stickied))}})}(window)},2099:()=>{!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),(t=a.VideoPlayer=a.VideoPlayer||{}).Views=t.Views||{},(t.Controls=t.Controls||{}).PlayPause=Backbone.View.extend({events:{"click .js-vid-play-pause":"togglePlay","click .js-vid-play":"togglePlay","click .js-play-show-episode":"togglePlay","click .js-vid-player-holder":"togglePlay",keypress:"keypressHandler"},Player:null,waiting:!1,initialize:function(e){var t=this;t.Player=e.Player,t.Player.on("diagnosticWindowCloseButton",(function(){t.togglePlay()}))},togglePlay:function(e){var t=this,a=t.Player,n=t.Player.ApiInterfaceManager,i=a.states;if(!t.waiting)return n.ready?(e&&e.preventDefault(),i.playing?(a.trigger("userPaused"),a.pause()):i.started?a.resume():a.play()):(t.waiting=!0,void n.once("ready",(function(){t.waiting=!1,t.togglePlay(e)})))},keypressHandler:function(e){if(32===e.which||107===e.which)return this.togglePlay(e)}})}(window)},4538:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i,s=e.Phoenix;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},a=t.Views=t.Views||{},i=t.Controls=t.Controls||{};var r=t.log,o="av-menu-ctrl--on",l="has-vid-multiple-playbacks",u="has-vid-single-playback",c=[{selector:".js-vid-h264",modernizrProp:"h264"},{selector:".js-vid-m3u8-wrapped",modernizrProp:"h264"},{selector:".js-vid-m3u8:not(.js-vid-m3u8-wrapped)",modernizrProp:"hls"}],d=function(e){return!!e&&e.length>0&&e.closest("html").length>0&&!e.hasClass(t.classnames.hide)},p=function(e){var t=!0;return"undefined"!=typeof Modernizr&&Modernizr.video&&n.each(c,(function(a,n){if(e.is(n.selector)&&!Modernizr.video[n.modernizrProp])return t=!1,!1})),t},g=function(e){var a,n=e.filter(".js-vid-default");return((a=(n=n.not("."+t.classnames.hide)).first()).length<1||a.closest("body").length<1)&&(a=e.first()).hasClass(t.classnames.hide)&&a.removeClass(t.classnames.hide),a},y=function(e,t){var a=e.filter((function(){var e=n(this);return!0===d(e)&&!0===function(e,t){return e.data("cmd-value")===t}(e,t)}));return a},v=function(e,t,a){e&&0!==e.length&&(!0===t?e.addClass(a):!1===t&&e.removeClass(a))},h=function(e){r("[CONTROL] hideControls: ",e),m(e),v(e,!0,t.classnames.hide),v(e.closest(".js-vid-quality-wrap"),!0,t.classnames.hide),e.trigger("hide")},m=function(e){v(e,!1,o)},f=function(e){var t=e.els.$menu;t&&t.toggleClass("av-menu-disabled",e.disabled)};i.PlaybackQuality=a.AbstractPreference.extend({name:"playbackQuality",els:{},states:{playback:null,quality:null},playback:{},qualities:{},events:{"click .js-vid-playback":"choosePreference","click .js-vid-quality":"choosePreference","hide .js-vid-playback":"updateConfigMenu","show .js-vid-playback":"updateConfigMenu"},Player:null,Preferences:null,initialize:function(e){var t,i,s,o,l,u,c=this;a.AbstractPreference.prototype.initialize.call(this,e),c.playbacks=n.extend({},c.playbacks),c.qualities=n.extend({},c.qualities),(t=c.Player).on("adStart",(function(){c.disabled||c.disable(!0)})),t.on("contentStart",(function(){c.disabled&&c.disable(!1)})),(i=c.els).$qualityOptions=c.$(".js-vid-quality"),i.$playbackOptions=c.$(".js-vid-playback"),s=function(e){var t,a=e.els,i=e.Player.ApiInterfaceManager,s=a.$playbackOptions,o=a.$qualityOptions,l={},u={},c=!1,g=!1,y=[];return r("[CONTROL] initPlaybackQualities"),o?(r("[CONTROL] $qualities: ",o),o.each((function(){var t=n(this),a=e.getValue(t);p(t)&&(u[a]||(u[a]=[]),u[a].push(this))}))):(r("error","[CONTROL] No qualities defined!"),s=void 0),s&&(r("[CONTROL] $playbacks: ",s),s.each((function(){var s,o=n(this),c=e.getValue(o),p=o.data("player"),v=i.getInterface(p),m=d(o),f=v&&v.checkHasSource(),P=m&&f,w=o.data("qualities").split(","),S=[],k=[];if(!l[c]){for(t=0;t<w.length;t++)s=w[t],u[s]&&(n.merge(k,u[s]),S.push(s));P&&n.inArray(p,y)<0&&y.push(p),S.length>0&&(g=!0),l[c]={isAvailable:P,playerType:p,qualities:S,$button:o,$qualities:n(k)},P?v.checkContentExists((function(e){e||(h(o),h(l[c].$qualities),a.$playbackOptions=a.$playbackOptions.not(o),delete l[c])})):h(o),r("[CONTROL] Playback Quality Elements for ["+c+"]: ",l[c])}})),y.length>0&&(e.playbacks=l,c=!0)),c&&g}(c),s||c.$(".js-vid-invalid-playbacks").show(),(u=(o=c).$(".js-vid-playbacks")).length&&(l=u.find(".js-vid-menu"),o.els.$menu=l,o.els.$configMenu=u,o.updateConfigMenu()),c.on("saved",(function(){c.qualityChanged()})),r("[CONTROL] hasPlaybacks? ",s)},choosePreference:function(e){var t=n(e.currentTarget);!this.disabled&&t.hasClass("js-vid-playback")&&e.stopPropagation(),a.AbstractPreference.prototype.choosePreference.call(this,e)},loadPreference:function(e){var t,a,i,s,o,l,u,c=this,d=c.els.$playbackOptions,p=c.els.$qualityOptions;if(t=e.playback,u=e.quality,t&&(0===(s=y(d,t)).length?t=void 0:(a=!!(i=c.playbacks[t]||{}).isAvailable)&&(l=i.qualities),c.setPlayback(t)),u&&(o=y(p,u),l=n.map(p,(function(e){return n(e).data("cmd-value")})),0===o.length&&(u=void 0),c.setQuality(o.data("cmd-value"))),t||(s=g(d),t=c.getValue(s),l=(i=c.playbacks[t]).qualities,e.playback&&(r("[CONTROL] playback ["+e.playback+"] is invalid -- use default playback ["+t+"]"),null===a&&(!0,delete e.playback)),c.setPlayback(t)),!u){var v=g(c.els.$qualityOptions);u=c.getValue(v),c.setQuality(v.data("cmd-value"))}return(u=e.quality)&&0>n.inArray(u,l)&&(!0,delete e.quality),c.states},setPreference:function(e){var t,a,n=this,i=n.getValue(e);if(e.hasClass("js-vid-quality")?t=n.setQuality:e.hasClass("js-vid-playback")&&(t=n.setPlayback),t)return a=t.call(n,i),r("[CONTROL] setPreference changeSet: ",a),a},disable:function(e){a.AbstractPreference.prototype.disable.call(this,e),f(this)},setControl:function(e,t){var a,n,i=!1;return(a=y(e,t)).length>0&&!1===(!!(n=a)&&n.hasClass(o))&&(r("[CONTROL] New Value Control for ["+t+"]: ",a),i=!0,v(a,!0,o),m(e.not(a))),i},setQuality:function(e,t,a){var n,i=this,s=i.Player,o=i.els.$qualityOptions;return!0===i.setControl(o,e)&&(r("[CONTROL] setQuality newValue: "+e),s.setStates({quality:e}),i.states.quality=e,n={quality:e}),n},qualityChanged:function(e){var t=this.Player,a=t.getCurrentTime();return a>0&&t.setStates({customStartTime:a}),t.updateQuality()},setPlayback:function(e){var a,i,s,o,l,u,c,d=this,p=d.els,y=d.Player,m=p.$qualityOptions,f=d.setControl(p.$playbackOptions,e),P=d.Preferences.getPreference("quality",y.playerId),w=d.playbacks[e];if(w&&!w.isAvailable&&n.each(d.playbacks,(function(e,t){if(t.isAvailable)return w=t,!1})),!0===f){r("[CONTROL] setPlayback to: ",e);var S=y.getCurrentTime();S>0&&y.setStates({customStartTime:S}),l=w.playerType,y.setStates({playback:e,playerType:l}),d.states.playback=e,u={playback:e},i=w.$qualities,s=m.not(i),h(s),v(c=i,!1,t.classnames.hide),v(c.closest(".js-vid-quality-wrap"),!1,t.classnames.hide),c.trigger("show"),a=w.qualities,r("[CONTROL] > available qualities for playback: ",a),r("[CONTROL] > current activeQuality: ",P),(!P||0>n.inArray(P,a))&&(r("[CONTROL] > activeQuality not found for playback"),o=g(i),P=d.getValue(o),r("[CONTROL] > set activeQuality to: ",P)),d.setQuality(P,!0),y.trigger("updatePlayback",y)}return u},updateConfigMenu:function(e){var t=this.els,a=t.$configMenu;!a||a.length<1||(t.$playbackOptions.filter((function(){var e=n(this);return d(e)&&!e.is("meta")})).length>1?a.removeClass(u).addClass(l):a.removeClass(l).addClass(u))}})}(window)},1102:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a=e.Phoenix;a||(e.Phoenix=a={}),((t=a.VideoPlayer=a.VideoPlayer||{}).Controls=t.Controls||{}).Report=Backbone.View.extend({els:{$reportSuckData:null},events:{"click .js-vid-report-suck":"reportSuck"},Player:null,initialize:function(e){var t=this;(t.els=n.extend({},t.els)).$reportSuckData=t.$(".js-vid-report-suck-data")},reportSuck:function(e){if(e.preventDefault(),confirm("This will send us a report that we will use to diagnose\nvideo playback issues. Are you sure you want to send us a report?\n\r\rPLEASE only do this if you are experiencing issues with the video player.")){var a=this.els.$reportSuckData,i="NONE";try{var s=t.getLogLines();i=JSON.stringify(s)}catch(e){i="ERROR: "+e.toString()}n.ajax({type:"POST",url:"/videos/user/report",data:{uniqueKey:a.data("unique-key"),videoId:a.data("video-id"),trace:i}}).done((function(e){alert("Thanks, we're sorry you're having problems. This report will help us fix them. Please only send one report per video")}))}}})}(window)},8153:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i,s=e.Phoenix;s||(e.Phoenix=s={}),t=s.VideoPlayer=s.VideoPlayer||{},a=t.Views=t.Views||{},i=t.Controls=t.Controls||{};var r=t.log,o=function(e){var t={};n.extend(t,e.setPreference(e.els.$volume),e.setPreference(e.els.$muteToggle)),e.savePreferences(t)};i.Volume=a.AbstractPreference.extend({name:"volume",els:{$volume:null,$handle:null,$level:null,$bar:null,$mute:null,$unmute:null,$muteToggle:null,$unMuteAutoplay:null},states:{mute:!1,volume:1},mousemoveEvent:"mousemove.volumeSlide",touchmoveEvent:"touchmove.volumeSlide",events:{"mousedown .js-player-volume":"volumeChange","touchstart .js-player-volume":"volumeChange","mousedown.volumeSlide .js-player-volume":"volumeSlideStart","mouseup.volumeSlide":"volumeSlideStop","touchstart.volumeSlide .js-player-volume":"volumeSlideStart","touchend.volumeSlide":"volumeSlideStop","click .js-mute-show-episode":"toggleMute","click .js-unmute-show-episode":"userUnMute","click .js-vid-unmute-autoplay":"unMuteAutoplay",keydown:"hotkeyHandler"},Player:null,Preferences:null,initialize:function(e){var t,n,i=this;a.AbstractPreference.prototype.initialize.call(i,e),t=i.Player=e.Player,(n=i.els).$volume=i.$(".js-player-volume"),n.$handle=i.$(".js-player-volume-handle"),n.$level=i.$(".js-player-volume-level"),n.$bar=i.$(".js-player-volume-bar"),n.$mute=i.$(".js-mute-show-episode"),n.$unmute=i.$(".js-unmute-show-episode"),n.$muteToggle=i.els.$mute.add(i.els.$unmute),n.$unMuteAutoplay=i.$(".js-vid-unmute-autoplay"),t.on("setVolume",(function(e){i.moveVolumeHandle(e)})),t.on("contentStart adStart",(function(){t.states.mute?t.mute():t.setVolume(t.states.volume,!1,!0),t.videoJSON.startMuted&&t.once("unMute",(function(){r("[VOLUME] unmute startMuted video"),i.unMuteAutoplay()}))})),t.on("initComplete",(function(){t.videoJSON.startMuted&&(r("[VOLUME] start muted"),i.setMute(!0,!0))}))},loadPreference:function(e){var t=this;return e&&void 0!==e.volume&&(t.setVolume(e.volume,!0,!0),t.states.volume=e.volume),e&&void 0!==e.mute&&(t.setMute(e.mute,!0),t.states.mute=e.mute),t.states},setPreference:function(e){var t=this,a=t.Player.states,n={};return e===t.els.$volume?t.states.volume=n.volume=a.volume:e===t.els.$muteToggle&&(t.states.mute=n.mute=a.mute),n},moveVolumeHandle:function(e){var a=t.ratioToPercentString(e);this.els.$level.css("height",a),this.els.$handle.css("bottom",a)},setMute:function(e,t){var a=this,n=a.Player,i=n.states;e?(n.mute(),a.moveVolumeHandle(0),r("[VOLUME] mute")):(i.volume>0?a.setVolume(i.volume,t,!0):a.setVolume(.5,t,!0),r("[VOLUME] unMute")),t||o(a)},setVolume:function(e,t,a){var n,i=this,s=i.Player,l=i.states.mute,u=i.els;e>0?(l&&(n=u.$unmute),s.unMute()):(l||(n=u.$mute),s.mute()),r("[VOLUME] setVolume to "),s.setVolume(e),!a&&n&&n.trigger("customEventTracking"),t||o(i)},toggleMute:function(e){var t=this.Player.states;this.setMute(!t.mute)},userUnMute:function(e){r("[VOLUME] volume.js userUnmute()"),this.Player.userGesture(),this.toggleMute()},unMuteAutoplay:function(e){var t=this,a=t.els.$unMuteAutoplay;a&&a.length&&(a.remove(),t.els.$unMuteAutoplay=null,t.Player.userGesture(),t.toggleMute())},volumeChange:function(e){var a=this;if("mousedown"!==e.type||1===e.which){var n=t.getEventInContainerRatio(e,a.els.$volume,"vertical");n!==a.states.volume&&a.setVolume(n)}},volumeSlideStart:function(e){var t=this,a="mousedown"===e.type?t.mousemoveEvent:t.touchmoveEvent;"mousedown"===e.type&&1!==e.which||t.els.$volume.on(a,(function(e){t.volumeChange(e)}))},volumeSlideStop:function(e){var t=this,a="mouseup"===e.type?t.mousemoveEvent:t.touchmoveEvent;"mouseup"===e.type&&1!==e.which||t.els.$volume.off(a)},hotkeyHandler:function(e){var t,a=this,n=a.Player;38===e.which?(t=n.getVolume()+.05,a.setVolume(t<1?t:1),e.preventDefault()):40===e.which?(t=n.getVolume()-.05,a.setVolume(t>0?t:0),e.preventDefault()):77===e.which&&(a.toggleMute(),e.preventDefault())}})}(window)},5618:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{},a=t.Controls=t.Controls||{};var s=t.log,r={start:{fn:"start",params:["options"]},getPlayerInfo:{fn:"getPlayerInfo"},play:{fn:"play",params:["videoId"]},pause:{fn:"pause",params:["videoId"]},resume:{fn:"resume",params:["videoId"]},isPlaying:{fn:"isPlaying",params:["videoId"]},getCurrentTimeStamp:{fn:"getCurrentTimeStamp",params:["videoId"]},setCurrentTimeStamp:{fn:"setCurrentTimeStamp",params:["videoId","timestamp"]},ended:{fn:"ended",async:!0,params:["videoId","wait"]}},o="[iFrame API] ";a.IframeAPI=Backbone.View.extend({Player:null,contentEndCallback:null,initialize:function(e){var t=this;t.Player=e.Player;e.Player.ApiInterfaceManager;window.addEventListener?addEventListener("message",_.bind(t.receiveMessage,t),!1):attachEvent("onmessage",_.bind(t.receiveMessage,t)),t.Player.on("videoDone",(function(){null!==t.contentEndCallback&&t.contentEndCallback()}))},start:function(e){void 0!==e&&!0===e.disableStartTime&&this.Player.setStates({customStartTimeDisabled:!0});var t={apiVersion:"0.02",userLoggedIn:"loggedIn"==n("meta[name=userAuthState]").attr("content"),userIsPremium:"premium"==n("meta[name=userIsPremium]").attr("content")};return s(o+"Initialize embed api",t),t},getPlayerInfo:function(){var e=this.Player.videoJSON,t={id:e.id,title:e.title,premium:e.premium};return s(o+"Get player info",t),[t]},play:function(){this.Player.play()},pause:function(){this.Player.pause()},resume:function(){this.Player.resume()},isPlaying:function(){return this.Player.states.playing},getCurrentTimeStamp:function(){return this.Player.getCurrentTime()},setCurrentTimeStamp:function(e,t){return this.Player.seekTo(t)},ended:function(e,t,a,n){var i=!this.Player.states.playing&&Math.ceil(this.Player.getCurrentTime())>=this.Player.getDuration();t&&!i?this.contentEndCallback=a:a(i)},receiveMessage:function(e){this.Player.videoJSON;if(this.checkForAMPIntersectionMessages(e),"who-are-you"===e)return"athena";var t=e.data.request;if(t)if(s(o+"Recieve message",e),r.hasOwnProperty(t)){var a=null,n=[];r[t].params&&r[t].params.some((function(t){if(!e.data.hasOwnProperty(t))return a="Missing param "+t,!0;n.push(e.data[t])})),r[t].async&&n.push(function(e){return function(t,a){a?e.ports[0].postMessage({result:"error",data:a}):e.ports[0].postMessage({result:"ok",data:t})}}(e)),n.push((function(e){a=e}));var i=null;if(!a){var l=r[t].fn;s(o+"Calling embed function",[l,n]),i=this[l].apply(this,n)}r[t].async&&!a||(a?e.ports[0].postMessage({result:"error",data:a}):e.ports[0].postMessage({result:"ok",data:i}))}else e.ports[0].postMessage({msg:"error",info:"unknown request"})},checkForAMPIntersectionMessages:function(e){const t=this;e.source===window.parent&&e.origin!==window.location.origin&&e.data&&"amp"===e.data.sentinel&&"intersection"===e.data.type&&e.data.changes.forEach((function(e){var a=e.intersectionRatio>.5;a&&(t.hasAppeared=!0),t.isPlaying()&&!a&&t.hasAppeared&&t.pause()}))}})}(window)},2396:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t=e.Phoenix;t||(e.Phoenix=t={});var a,i,s,r=t.VideoPlayer=t.VideoPlayer||{},o=r.Views=r.Views||{},l=(r.log,!1),u="pod-recirc--horizontal",c=["align-vertical--child","align-vertical--contain"],d=[],p={played:"video-active",playing:"video-playing"},g="kubrickPausedVideoIds",y="no-sticky",v=function(e,t){var r=e.els.$kubrickRelated;r&&(!1===l&&(l=!0,a=r.data("embiggen-class"),i=r.data("debiggen-class"),s=r.find(".pod"),n.each(c,(function(e,t){d.push(s.find("."+t))}))),t?(r.addClass(a).removeClass(i),s.addClass(u),n.each(d,(function(e,t){t.removeClass(c[e])}))):(r.addClass(i).removeClass(a),s.removeClass(u),n.each(d,(function(e,t){t.addClass(c[e])}))))},h=function(e){var t=!1;n.cookie(g)&&(-1!==n.cookie(g).split(",").map(Number).indexOf(e)&&(t=!0));return t};o.Kubrick=Backbone.View.extend({Player:null,els:{$kubrickInfo:null,$kubrickInfoParent:null,$kubrickRelated:null,$videoSpacer:null},states:{embiggened:!1,played:!1,playing:!1},initialize:function(e){var t=this,a=t.els=n.extend({},t.els),i=t.Player=e.Player;if(t.states=n.extend({},t.states),a.$kubrickInfo=t.$(".kubrick-info"),a.$kubrickInfoParent=t.$(".row"),a.$videoSpacer=n("#video-spacer"),a.$kubrickRelated=t.$("#js-kubrick-pod"),i.on("all",(function(e){switch(e){case"embiggen":!function(e){var t=e.els,a=t.$kubrickInfo,n=t.$videoSpacer;e.states.embiggened||(e.states.embiggened=!0,a&&(a.children().wrap('<div class="container"></div>'),a.addClass(y),n&&n.after(a)),v(e,!0))}(t);break;case"debiggen":!function(e){var t,a,n=e.els,i=n.$kubrickInfo,s=n.$kubrickInfoParent;e.states.embiggened&&(e.states.embiggened=!1,i&&(t=(a=i.find(".container")).children(),a.length>0&&t.unwrap(),i.removeClass(y),s.prepend(i)),v(e,!1))}(t)}var a,i,s,r,o;i=(a=t).Player.states,s=a.states,r=[],o=[],n.each(s,(function(e,t){var a,n=i[e];t!=n&&(s[e]=n,(a=p[e])&&(n?r.push(a):o.push(a)))})),r.length&&a.$el.addClass(r.join(" ")),o.length&&a.$el.removeClass(o.join(" "))})),i.$el.closest(".js-autoplayable").length){var s=i.videoJSON.id;i.on("pause",(function(){!function(e){if(n.cookie(g)){if(!h(e)){var t=n.cookie(g).split(",").map(Number);t.push(e),n.cookie(g,t.toString(),{path:"/"})}}else n.cookie(g,e,{path:"/"})}(s)})),i.on("play resume",(function(){h(s)&&function(e){var t=n.cookie(g).split(",").map(Number);t.splice(t.indexOf(e),1),t.length?n.cookie(g,t.toString(),{path:"/"}):n.cookie(g,null,{path:"/"})}(s)})),h(s)&&(i.videoJSON.autoplay=!1,i.videoJSON.startMuted=!1,n(".js-vid-unmute-autoplay").remove())}}})}(window)},2759:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),a=(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{};t.log;var s=i.jQuery?i.jQuery.getBody():n(document.body),r="av-menu-open",o="av-ctrl-menu-hit-on",l=function(e){e.closeHandler&&(s.off("click.closeMenu",e.closeHandler),e.closeHandler=null)};a.Menu=Backbone.View.extend({els:{$menuHit:null},closeHandler:null,events:{"click .js-vid-menu-hit":"toggle"},Player:null,initialize:function(e){var t=this;t.Player=e.Player,t.els=e.els,t.Player.on("hideControlChrome",(function(){t.close()}))},close:function(){var e=this;e.$el.removeClass(r),e.els.$menuHit.removeClass(o),l(e),e.trigger("close")},toggle:function(e){var t,a=this,n=!a.$el.hasClass(r);a.$el.toggleClass(r,n),a.els.$menuHit.toggleClass(o,n),e.stopPropagation(),n?((t=a).closeHandler||s.on("click.closeMenu",t.closeHandler=function(){t.close()}),a.trigger("open")):(l(a),a.trigger("close"))}})}(window)},1285:(e,t,a)=>{var n=a(9755);!function(e){"use strict";let t=e.Phoenix;t||(e.Phoenix=t={});const a=t.VideoPlayer=t.VideoPlayer||{},i=a.Views=a.Views||{},s=a.log;let r;r=t.jQuery&&t.jQuery.getDocument?t.jQuery.getDocument():n(document);const o=e.scrollMonitor,l=(JSON.stringify,{looping:"is-vid-looping",contentLoading:"is-vid-content-loading",contentStarted:"is-vid-content-started",played:"is-vid-played",started:"is-vid-started",ended:"is-vid-ended",highDroppedFrameCount:"is-vid-framerate-alert",apiReady:"is-api-ready",adPlaying:"is-vid-ad-playing",counting:"has-vid-countdown",disabled:"is-vid-disabled",loading:"is-vid-loading",playing:"is-vid-playing",autoplay:"is-vid-autoplay",paused:"is-vid-paused",gated:"has-vid-invalid-age",hasGate:"has-vid-age-gated",showAgeGate:"is-vid-age-gate",embiggened:"is-vid-embiggened",mute:"is-vid-muted",share:"is-vid-share-modal-open",stickied:"is-vid-stickied",chromecast:"is-vid-chromecasting",autoplayUserDisabled:"is-vid-autoplay-disabled",autoplayModal:"is-vid-autoplay-modal-open",fullscreen:"is-vid-fullscreen",windowed:"is-vid-windowed is-vid-fullfaux",isLive:"is-vid-live",isOffAir:"is-vid-offair",isRewound:"is-vid-rewound",isSeekDisabled:"is-vid-noseek",showControlChrome:"is-vid-show-controls",hideControlChrome:"is-vid-hide-controls",stickControlChrome:"is-vid-stick-controls"}),u=function(e){const t=e.$el,a=e.els.$playerContainer;let n="100%";const i="width";a.css(i,n);const s=t.height();s<a.height()&&(n=1.7777777777777777*s),a.css(i,n)};i.Player=Backbone.View.extend({els:null,playerId:null,videoJSON:null,retryCount:0,retryThreshold:1,events:{},states:{videoId:null,playback:null,playerType:null,quality:null,switchingSource:!1,highDroppedFrameCount:!1,adPlayed:!1,contentLoading:!1,contentStarted:!1,played:!1,started:!1,ended:!1,adPlaying:!1,counting:!1,disabled:!1,loading:!0,playing:!1,paused:!1,autoplay:!1,volume:1,gated:!1,hasGate:!1,showAgeGate:!1,embiggened:!1,mute:!1,share:!1,stickied:!1,chromecast:!1,autoplayUserDisabled:!1,autoplayModal:!1,fullscreen:!1,windowed:!1,adCurrentTime:null,currentTime:0,duration:0,hasTimeChange:!1,isAtEndTime:!1,isLive:!1,isOffAir:!0,isRewound:!1,isSeekDisabled:!0,overrideDuration:!1,customStartTime:0,liveStartTime:0,liveSeekDelay:10,liveSeekDelayLeft:null,showControlChrome:!0,hideControlChrome:!1,stickyChrome:!1,diagnosticWindow:!1,dragging:!1,retriedLoad:!1},controlsEnabled:null,controlsInitialized:!1,watcher:null,AgeGate:null,ApiInterfaceManager:null,Preferences:null,initialize(e){const t=this,i=t.states={...t.states},r=e.AgeGate,l=e.Preferences,c=e.videoJSON;t.els=e.els,t.controlsEnabled={},t.playerId=e.playerId,t.videoJSON=c,i.videoId=c.id,t.trigger("init",[t]),!1!==r.isOfAge(t.videoJSON)?(t.AgeGate=r,t.Preferences=l,o&&(t.watcher=o.create(t.$el)),u(t),n(window).on("resize",(function(){u(t)})),t.on("initComplete",(function(){if(t.off("initComplete"),t.setStates({loading:!1}),"mediaSession"in navigator){t.setMediaSessionMetadata();const e=10,a=new Map([["play",()=>{console.log("User click the play button."),t.paused?t.resume():t.play()}],["pause",()=>{console.log("User click the pause button."),t.pause()}],["stop",()=>{console.log("User click the stop button."),t.stop()}],["seekbackward",a=>{console.log("User seeked backwards.");const n=a.seekOffset||e,i=Math.max(t.currentTime-n,0);t.seekTo(i)}],["seekforward",a=>{console.log("User seeked forwards.");const n=a.seekOffset||e,i=Math.min(t.currentTime+n,t.getDuration());t.seekTo(i)}],["seekto",e=>{t.seekTo(e.seekTime)}]]);for(const[e,t]of a)try{navigator.mediaSession.setActionHandler(e,t)}catch(t){console.debug(`The media session action "${e}" is not supported yet.`)}}t.ApiInterfaceManager.checkCanAutoplay()?t.states.counting||setTimeout((function(){t.autoplay()}),0):(s("[UI] Initialize ERROR: Autoplay was requested, but was not allowed:"),s("[UI] 1. self.videoJSON.autoplay: "+t.videoJSON.autoplay),s("[UI] 3. self.ApiInterfaceManager.checkCanAutoplay: "+t.ApiInterfaceManager.checkCanAutoplay))})),t.on("videoDone",(function(){t.states.switchingSource||(t.videoJSON.isLiveStream&&!t.states.isOffAir&&t.retryCount<t.retryThreshold?(t.retryCount++,s("[UI] Stream ended, retry. Retry count: "+t.retryCount),t.play(!0)):t.setStates({playing:!1,started:!1,ended:!0,isSeekDisabled:!0}))})),t.on("contentStart",(function(){const e=t.states.paused;t.retryCount=0,t.setStates({playing:!0,paused:!1,started:!0,ended:!1}),e&&t.pause()})),t.on("adStart",(function(){const e=t.states.paused,a=t.states.contentStarted;t.setStates({playing:!0,paused:!1,started:!0,ended:!1}),e&&!a&&t.pause()})),t.on("videoStartError",(function(){t.states.retriedLoad?s("[UI] Giving up, we can't load the video"):(s("[UI] there was an error loading the video, try again without ads"),t.trigger("play",!0),t.states.retriedLoad=!0)})),t.on("all",(function(e,a){("contentEnd"!==e&&"videoDone"!==e||!t.states.switchingSource)&&t.$el.trigger(e,a)})),t.on("videoPlaybackError",(function(e){const a=e.errorInfo.message;s("[UI] VIDEO PLAYBACK ERROR: "+e.errorInfo.errorCode),s(e),t.videoJSON.streamsRefresh&&a.includes("manifestLoadError")&&(s("[UI] MANIFEST ERROR"),n.ajax({url:t.videoJSON.streamsRefresh+t.videoJSON.id,type:"GET",success(e){t.videoJSON.videoStreams=e,s("[UI] NEW TOKEN: loaded new streams, trying play again"),s(e),t.trigger("play",!0),t.states.retriedLoad=!0}}))})),t.on("destroy",(function(){s("[UI] Destroying player"),t.stop(),t.watcher&&t.watcher.destroy(),t.$el.remove(),a.destroyInstance(t.playerId)}))):r.gate(t)},play(e){const t=this,a=t.states,n=t.$el;return!a.disabled&&((!t.AgeGate||!t.AgeGate.isAgeGated(t))&&(e||t.trigger("beforePlay"),!1===a.playing&&s("[UI] video is not playing > play"),!1===a.started&&n.trigger("videoStart"),!0===a.ended&&(n.trigger("videoReplay"),e=!0),t.setStates({played:!0,playing:!0,paused:!1,started:!0,ended:!1}),n.trigger("contentPlay"),r.trigger("video_play"),t.trigger("play",e),!0))},autoplay(){const e=this;if(s("[UI] Player.js autoplay type allowed:"+e.ApiInterfaceManager.autoplayTypeAllowed),e.ApiInterfaceManager.checkCanAutoplay()&&!e.states.autoplayUserDisabled){const t=function(){return e.setStates({autoplay:!0}),!e.states.started&&!e.states.ended&&(e.ApiInterfaceManager.autoplayTypeAllowed===e.ApiInterfaceManager.autoplayTypes.muted&&(e.mute(),s("[UI] MUTING FROM TRIGGER PLAY")),e.play())},a=function(){e.watcher&&!e.watcher.isInViewport?e.watcher.on("enterViewport",(function(){t()})):t()};if(document.hidden){const e=function(){a()};window.onfocus=e;try{window.parent&&(window.parent.onfocus=e)}catch(e){}return!1}return a()}},pause(){const e=this;return!e.states.disabled&&(e.trigger("beforePause"),e.setStates({paused:!0,playing:!1}),s("[UI] Pause video player"),e.$el.trigger("contentPause"),e.trigger("pause"),!0)},stop(){const e=this;return!e.states.disabled&&(e.trigger("beforeStop"),e.setStates({stopped:!0,playing:!1}),s("[UI] Stop video player"),e.$el.trigger("contentStop"),e.trigger("stop"),!0)},resume(){const e=this;return!e.states.disabled&&(e.setStates({paused:!1,playing:!0}),e.$el.trigger("contentResume"),e.trigger("resume"),!0)},updateQuality(){const e=this;return!!e.states.started&&(e.setStates({playing:!1,started:!1,ended:!1,switchingSource:!0}),e.play(!0))},disable(){const e=this;e.setStates({disabled:!0}),e.trigger("disable"),e.off(),e.stopListening(),e.$el.off()},enable(){this.setStates({disabled:!1}),this.trigger("enable")},seekTo(e){const t=this;return e=Number.parseFloat(e),!t.states.disabled&&(t.trigger("videoProgress",{...t.states,currentTime:e}),this.setStates({currentTime:e}),t.trigger("seekTo",e),t.states.switchingSource&&t.setStates({switchingSource:!1}),!0)},seekToLive(){const e=this;return!e.states.disabled&&(e.trigger("videoProgress",{...e.states,currentTime:getDuration()}),this.setStates({playing:!0,paused:!1}),e.trigger("seekToLive"),!0)},jump(e){let t=this.states.currentTime+e;return t=t>this.states.duration?this.states.duration-1:t,t=t<0?0:t,this.seekTo(t)},setVolume(e){const t=this;return!t.states.disabled&&(t.setStates({volume:e,mute:0===e}),t.trigger("setVolume",e),!0)},mute(){const e=this;return!e.states.disabled&&(e.setStates({mute:!0}),e.trigger("mute"),!0)},unMute(){const e=this;return!e.states.disabled&&(e.setStates({mute:!1}),e.trigger("unMute"),!0)},userGesture(){this.trigger("userGesture")},toggleDiagnosticWindow(){const e=this;return!e.states.disabled&&(e.states.diagnosticWindow?e.$el.find("div[id^=diagnostic_]").hide():e.trigger("showDiagnosticWindow"),e.states.diagnosticWindow=!e.states.diagnosticWindow,!0)},getCurrentTime(){return this.ApiInterfaceManager.getCurrentTime()},getDuration(){return this.states.overrideDuration?this.states.duration:this.ApiInterfaceManager.getDuration()},getVolume(){return this.ApiInterfaceManager.getVolume()},setStates(e){this.states.disabled||function(e,t){const a=e.$el;let i,s,r=[],o=[];n.each(t,(function(t,a){i=l[t],"playerType"===t&&a!==e.states[t]&&(i="is-vid-"+a+"-player",e.states[t]&&(s="is-vid-"+e.states[t]+"-player",s&&o.push(s)),a=!0),void 0!==i&&(a?r.push(i):o.push(i))})),Object.assign(e.states,t),a.data("states",e.states),r.length>0&&(r=r.join(" "),a.addClass(r)),o.length>0&&(o=o.join(" "),a.removeClass(o))}(this,e)},setMediaSessionMetadata(){try{const e=document.querySelector('meta[property="og:title"]').getAttribute("content"),t=document.querySelector('meta[property="og:site_name"]').getAttribute("content"),a=document.querySelector('meta[property="og:image"]').getAttribute("content");navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:t,artwork:[{src:a,sizes:"512x512",type:"image/png"}]})}catch(e){console.debug("No metadata set for current video.")}}})}(window)},7520:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t=e.Phoenix;t||(e.Phoenix=t={});var a=t.VideoPlayer=t.VideoPlayer||{},i=a.Views=a.Views||{},s=a.log,r=JSON.stringify,o="/"===location.pathname,l="__gamesVideoPlayer",u=["stickied","embiggened"],c=[],d="frontdoor",p={},g={},y={},v={},h={},m={},f=function(e,t){return e+t.slice(0,1).toUpperCase()+t.slice(1)},P=function(){n.each(g,(function(e,t){var a;h[e]&&(p[(a=e,0<=n.inArray(a,u)&&o&&(a=f(d,a)),a)]=t)}))};i.Preferences=Backbone.View.extend({initialize:function(){var e,t=n.cookie(l);if(n.each(a.Controls,(function(e,t){"preference"===t.prototype.controlType&&t.prototype.states&&(n.each(t.prototype.states,(function(e){c.push(e),t.prototype.saveToCookie&&(h[e]=1)})),t.prototype.saveToCookie||(m[t.prototype.name]=1))})),t)try{e=JSON.parse(t)}catch(e){s("[PREFS] Found broken preferences cookie: ",t)}e?(s("[PREFS] Cookied preferences: ",r(e)),p=n.extend({},e),g=function(e){var t,a=n.extend({},e);return o&&n.each(u,(function(e,n){var i=f(d,n);a[i]?(a[n]=a[i],t=!0):a[n]&&delete a[n]})),n.each(a,(function(e){n.inArray(e,c)<0&&(t=!0,delete a[e])})),t&&s("[PREFS] States converted: ",JSON.stringify(a)),a}(e)):s("[PREFS] No preferences cookie found")},getPreference:function(e,t){var a=g[e];return!a&&t&&v[t]&&(a=v[t][e]),a},load:function(e){var t,a=v[e],i={};a||(s("========== LOAD PREFERENCES =========="),(t=y[e])&&(n.each(t,(function(e,t){n.extend(i,t.loadPreference(g))})),v[e]=i,s("[PREFS] Defaults for playerId ["+e+"]: ",i)))},register:function(e,t){var a=this,i=e.name;m[i]&&(n.extend(g,e.states),delete m[i]),y[t]||(y[t]={}),y[t][i]||(y[t][i]=e,e.on("change",(function(t){a.save(e,t)})))},save:function(e,t){var a,i,o,u,c=!1;(n.each(t,(function(e,t){g[e]!==t&&(g[e]=t,c=!0)})),c)&&(s("[PREFS] save preferences for "+e.name+": ",t),a=t,i=e.name,o=e,n.isEmptyObject(y)||n.each(y,(function(e,t){var n=t[i];n&&o!==n&&n.loadPreference(a)})),P(),u=r(p),n.cookie(l,u,{path:"/",expires:30}),e.trigger("saved"))}})}(window)},197:(e,t,a)=>{var n=a(9755);!function(e){"use strict";var t,a,i=e.Phoenix;i||(e.Phoenix=i={}),a=(t=i.VideoPlayer=i.VideoPlayer||{}).Views=t.Views||{};var s=t.log,r={$progress:".js-progress-position",$buffer:".js-progress-buffer",$timeDisplay:".js-progress-time",$seekDisplay:".js-progress-seek-display",$seekText:".js-progress-seek-text",$seekImage:".js-progress-seek-image",$loader:".js-progress-loaded",$clipBtn:".js-create-clip"},o="[PROGRESS] ",l=/(\d+)x(\d+)_(\d+)_(\d+)\.jpg/g,u=function(e){try{var a=t.query(e);if(null===a)return null;var n=new RegExp(/((\d+)h)?((\d+)m)?((\d+)s?)?/).exec(a),i=parseInt(n[1]||0),s=parseInt(n[4]||0);return parseInt(n[6]||0)+60*s+3600*i}catch(e){return null}},c=function(e,a){var n=e.Player,i=n.states,s=!1,r="Ad: ";Math.floor(a.currentTime)!==Math.floor(i.adCurrentTime)&&(s=!0),s&&(n.setStates({adCurrentTime:a.currentTime}),r+=t.convertTime(a.duration-a.currentTime-1),e.setVideoProgress(r))},d=function(e,a){var i,l,u,c,d,p=e.Player,g=p.states,y=p.videoJSON.isLiveStream,v=t.ratioToPercentString(0),h=v,m="",f=!1;if(a.duration||(a.duration=p.getDuration()),function(e,t){t.averageDroppedFPS&&t.averageDroppedFPS>=0&&(t.averageDroppedFPS>3?e.states.highDroppedFrameCount||(s(o+"Dropped framerate above threshold"),e.setStates({highDroppedFrameCount:!0})):e.states.highDroppedFrameCount&&(s(o+"Dropped framerate below threshold"),e.setStates({highDroppedFrameCount:!1})))}(p,a),!y){g.isSeekDisabled&&!g.ended&&(a.isSeekDisabled=!1);p.states.customStartTime&&a.currentTime>0&&e.seekToCustomStartTime(p)}if(Math.floor(a.currentTime)!==Math.floor(g.currentTime)&&(f=!0),a.hasTimeChange=f,f){if(p.setStates(a),p.$el.trigger("contentProgress",g),p.trigger("contentTimeChange",a),i=Math.floor(a.currentTime),l=Math.floor(a.duration),u=a.isPlayingLive,c=!a.isHDStreamLive,d=!g.isPlayingLive,y&&!p.states.isOffAir&&(u=!(d=i<l-30)),(p.states.overrideDuration||0===l&&i>0)&&(l=i,i>e.maxCurrentTime?e.maxCurrentTime=i:l=e.maxCurrentTime,u=!0,c=!1,p.setStates({duration:l,currentTime:i,overrideDuration:!0,isSeekDisabled:!0})),m=t.convertTime(i),h=t.ratioToPercentString(i/l),u||(m+=" / "+t.convertTime(l)),!0===y){if(!u&&!c&&!d){m="Loading stream data";for(var P=0;P<=(i+1)%3;P++)m+=".";h=v}u&&(h=t.ratioToPercentString(1)),p.setStates({isLive:u,isRewound:d,isOffAir:c})}p.trigger("saveProgress"),p.states.dragging||e.setVideoProgress(m,h),null!==e.EndTime&&i>e.EndTime?e.Loop?e.seekTo(e.StartTime,!0):(p.pause(),e.EndTime=null,t.showSuccessMessage("End of video clip")):e.Loop&&i>=l-1&&e.seekTo(e.StartTime||0,!0);var w=n(r.$clipBtn);w.attr("href",w.data("base-url")+"?start="+Math.floor(i))}},p=function(e){e.videoLoadingHandler||e.Player.on("videoLoading",e.videoLoadingHandler=function(a){!function(e,a){var n,i,s,r=e.states,o=e.els.$loader;n=a.bufferLength||0,i=a.duration||0,n===r.loadingBufferLength&&i===r.loadingDuration||(r.loadingBufferLength=n,r.loadingDuration=i,0<=n&&0<i&&(s=t.ratioToPercentString(n/i)),s&&o&&o.data("width")!==s&&(o.css("width",s),o.data("width",s)))}(e,a.data)})};a.Progress=Backbone.View.extend({events:{"click .js-progress-seektolive":"seekToLive","click .js-progress-buffer":"seekToChange","mousemove .js-progress-buffer":"updateSeekDisplay",keydown:"hotkeyHandler","mousedown.seekSlide .js-progress-buffer":"seekSlideStart","mouseup.seekSlide":"seekSlideStop","touchstart.seekSlide .js-progress-buffer":"seekSlideStart","touchend.seekSlide":"seekSlideStop"},Player:null,els:null,states:{loadingBufferLength:0,loadingDuration:0},mousemoveEvent:"mousemove.seekSlide",touchmoveEvent:"touchmove.seekSlide",ProgressStatus:null,StartTime:null,EndTime:null,Loop:!1,thumbDetails:{width:0,height:0,duration:0,count:0},adVideoProgressHandler:null,videoProgressHandler:null,videoLoadingHandler:null,maxCurrentTime:0,initialize:function(e){var a=this,i=a.Player=e.Player;a.states=n.extend({},a.states),t.getComponents(a,r),i.on("adStart",(function(){var e;a.resourceStart=!0,i.setStates({adPlaying:!0,contentStarted:!1,adCurrentTime:null}),(e=a).adVideoProgressHandler||e.Player.on("videoProgress",e.adVideoProgressHandler=function(t){c(e,t)})})),i.on("adEnd",(function(){var e;a.setVideoProgress(""),(e=a).Player.off("videoProgress",e.adVideoProgressHandler),e.adVideoProgressHandler=null})),i.on("contentStart",(function(){var e;a.resourceStart=!0,(e=a).videoProgressHandler||e.Player.on("videoProgress",e.videoProgressHandler=function(t){d(e,t)}),p(a),i.setStates({adPlaying:!1,contentStarted:!0,started:!0,isSeekDisabled:!1})})),i.on("contentEnd",(function(){var e;a.setVideoProgress(""),(e=a).Player.off("videoProgress",e.videoProgressHandler),e.videoProgressHandler=null,function(e){e.Player.off("videoLoading",e.videoLoadingHandler),e.videoLoadingHandler=null}(a)})),i.on("stateChange",(function(e){a.videoStateChange(e)})),i.on("saveProgress",(function(){a.saveVideoStatus()})),i.on("pause",(function(){a.saveVideoStatus(null,!0),i.videoJSON.isLiveStream&&i.states.contentStarted&&!i.states.isOffAir&&i.setStates({isRewound:!0})})),i.on("videoDone",(function(){i.trigger("saveProgress")})),i.on("initComplete",(function(){a.loadVideoStatus()})),a.StartTime=u("t"),a.EndTime=u("e"),a.Loop=!!t.query("loop"),a.Loop&&i.setStates({looping:!0}),(null===a.StartTime||a.StartTime>a.EndTime)&&(a.EndTime=null);var s=l.exec(a.els.$seekImage.css("background-image"));a.thumbDetails=n.extend({},a.thumbDetails),s&&(a.thumbDetails.width=parseInt(s[1],10),a.thumbDetails.height=parseInt(s[2],10),a.thumbDetails.duration=parseInt(s[3],10),a.thumbDetails.count=parseInt(s[4],10))},videoStateChange:function(e){var t,a=this.Player,n={contentLoading:!1};switch(e.newState){case 1:n.playing=!0,n.paused=!1,t="contentPlay";break;case 2:n.playing=!1,n.paused=!0,t="contentPause";break;case 3:n.contentLoading=!0}a.setStates(n),t&&a.$el.trigger(t)},setVideoProgress:function(e,t){var a=this.els.$timeDisplay,n=this.els.$progress;a&&a.data("progress-msg")!==e&&(a.html(e),a.data("progress-msg",e)),void 0!==t&&n&&n.data("width")!==t&&(n.css("width",t),n.data("width",t))},seekToCustomStartTime:function(){var e,a=this.Player,n=a.states,i=n.customStartTime,r=!0;if(i+30>e&&a.setStates({customStartTime:0}),!n.customStartTimeDisabled&&!n.adPlaying&&n.contentStarted&&0<i){if(void 0===(e=a.getDuration())||0===e||!0===isNaN(e))return void s("wait until we have a legit duration");a.setStates({customStartTime:0}),Math.floor(i)<Math.floor(e)&&i>1&&(r=!a.states.switchingSource,a.seekTo(i),r&&t.showSuccessMessage("Resuming video from saved position"))}},loadVideoStatus:function(){var e=this,a=e.Player;e.ProgressStatus||(e.ProgressStatus=new t.Models.VideoStatus({name:"progress",videoJSON:a.videoJSON,options:{cookie:!0,server:!0}})),e.StartTime>0?a.setStates({customStartTime:e.StartTime}):e.ProgressStatus.fetch({success:function(e){e>0&&a.setStates({customStartTime:e})}})},saveVideoStatus:function(e,t){var a=this,n=a.Player;a.ProgressStatus&&(e=e||n.getCurrentTime(),n.states.ended||e>n.getDuration()-60?a.ProgressStatus.markWatched():a.ProgressStatus.save(e,{force:!!t}))},deleteVideoStatus:function(){this.ProgressStatus.delete()},seekToRatio:function(e){var t=this.Player.getDuration();this.seekTo(t*e)},seekSlideStart:function(e){var a=this,n="mousedown"===e.type?a.mousemoveEvent:a.touchmoveEvent;"mousedown"===e.type&&1!==e.which||(a.Player.setStates({dragging:!0}),a.els.$buffer.on(n,(function(e){var n=t.getEventInContainerRatio(e,a.els.$buffer),i=t.ratioToPercentString(n);a.setVideoProgress("",i,"0%")})))},seekSlideStop:function(e){var t=this,a="mouseup"===e.type?t.mousemoveEvent:t.touchmoveEvent;"mouseup"===e.type&&1!==e.which||t.Player.states.dragging&&(t.Player.setStates({dragging:!1}),t.seekToChange(e),t.els.$buffer.off(a))},seekTo:function(e,t){var a=this,n=a.Player,i=n.getDuration();t||(a.StartTime=null,a.EndTime=null,a.Loop=!1),Math.floor(e)<Math.floor(i)&&(n.seekTo(e),a.saveVideoStatus(e,!0),n.setStates({customStartTime:0}))},jump:function(e){var t=this.Player,a=t.getDuration();Math.floor(e)<Math.floor(a)&&(t.jump(e),this.saveVideoStatus(e))},seekToLive:function(e){var t=this.Player;t.setStates({isRewound:!1}),t.seekToLive()},seekToChange:function(e){var a=t.getEventInContainerRatio(e,this.els.$buffer);this.seekToRatio(a)},updateSeekDisplay:function(e){var a=this,n=a.Player,i=t.getEventInContainerRatio(e,a.els.$buffer),s=t.ratioToPercentString(i),r=n.getDuration()*i;a.els.$seekDisplay.css("left",s),a.els.$seekText.text(t.convertTime(r));var o=Math.round(a.thumbDetails.count*i);a.els.$seekImage.css("background-position-x",o*a.thumbDetails.width*-1+"px")},hotkeyHandler:function(e){var t=this,a=t.Player;if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey))if(192===e.which)a.toggleDiagnosticWindow();else if(35===e.which)t.seekTo(a.getDuration()-5);else if(36===e.which)t.seekTo(0);else if(188===e.which)t.jump(-.1);else if(190===e.which)t.jump(.1);else if(37===e.which)t.jump(-5);else if(39===e.which)t.jump(5);else if(74===e.which)t.jump(-10);else if(76===e.which)t.jump(10);else if(e.which>=48&&e.which<=57){var n=.1*(e.which-48),i=Math.floor(a.getDuration()*n);t.seekTo(i)}}})}(window)},2257:(e,t,a)=>{"use strict";function n(){return"loggedIn"===document.querySelector("meta[name=userAuthState]").content}a.d(t,{Z:()=>n})}}]);
</script>

</body>
</html>
