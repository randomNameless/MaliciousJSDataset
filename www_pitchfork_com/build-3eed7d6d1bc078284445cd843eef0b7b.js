(()=>{var pl=Object.defineProperty;var Ve=(e,t)=>()=>(e&&(t=e(e=0)),t);var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fl=(e,t)=>{for(var r in t)pl(e,r,{get:t[r],enumerable:!0})};var y,a=Ve(()=>{y={id:"11",name:"Pitchfork",configuration:{}}});var h,c=Ve(()=>{h=[]});var g,u=Ve(()=>{g=[]});var v,l=Ve(()=>{v={}});var V=w((D0,$n)=>{a();c();u();l();var ur=e=>typeof e<"u"?[].concat(e):[],vl=(e,t)=>JSON.parse(JSON.stringify(e),t),wl=e=>new Option(e).innerHTML,Dn=(e,t)=>[e.slice(0,t),e.slice(t)],jn=(e,t,r)=>{let n=t.split(".").reduce((o,i)=>o&&o[i],e);return r===void 0?n:n||r},Un=(e,t,r)=>{let n=t.split("."),[o,i]=Dn(n,-1),s=o.reduce((p,d)=>(p&&!p[d]&&(p[d]={}),p[d]),e);return s&&(s[i]=r),e},Ln=(e={},t)=>t.reduce((r,n)=>{let o=jn(e,n);return o===void 0?r:Un(r,n,o)},{}),bl=(e,t)=>Ln(e,Object.keys(e).filter(r=>!t.includes(r))),ql=e=>typeof e=="object"?JSON.stringify(e):e,ge=Array.isArray,se=e=>e!=null&&typeof e=="object",Sl=e=>typeof e<"u",El=e=>se(e)&&Object.keys(e).length===0,lr=e=>!se(e),lt=e=>typeof e>"u",he=(e,t)=>ge(e)&&ge(t)?!t.find(r=>!e.find(n=>he(n,r)))||!e.find(r=>!t.find(n=>he(n,r))):ge(e)&&!se(t)?!!e.find(r=>he(r,t)):ge(t)&&!se(e)?!!t.find(r=>he(r,e)):se(e)&&se(t)?!Object.entries(t).find(([r,n])=>!he(e[r],n)):lt(t)?!0:e===t,xl=e=>(...t)=>!e(...t),kl=(e=[],t=[])=>e.reduce((r,n,o)=>(r[n]=t[o],r),{}),Tl=e=>Array.prototype.concat.apply([],e),Al=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(r[n]=t(o,n,e),r),{}),Cl=e=>Object.keys(e).length===0,Pl=(e,t,r)=>r.indexOf(e)===t,dr=(e,t)=>Object.entries(e).forEach(([r,n])=>t(n,r,e)),Mn=(e,t)=>(dr(t,(r,n)=>{if(lt(e[n])||lr(e[n]))return e[n]=r;if(ge(e[n]))return e[n]=e[n].concat(r);if(se(e[n])&&se(r))return Mn(e[n],r);e[n]=r}),e),Fl=e=>[...new Set(e)],Jn=(e,t)=>{let r=i=>s=>he(i,s),n=i=>s=>i.some(p=>ur(s).some(r(p))),o=(i,s)=>i.filter(p=>!ur(s).some(r(p)));return dr(t,(i,s)=>{if(!lt(s)){if(lr(e[s])){e[s]==i&&delete e[s];return}if(ge(e[s])){n(e[s],i)&&(e[s]=o(e[s],i));return}if(se(e[s])&&se(i)){Jn(e[s],i),El(e[s])&&delete e[s];return}e[s]=void 0}}),e};$n.exports={deepClone:vl,escape:wl,forEach:dr,flatten:Tl,get:jn,isArray:ge,isMatch:he,isEmpty:Cl,isObject:se,isDefined:Sl,isPrimative:lr,isUndefined:lt,isUniq:Pl,map:Al,merge:Mn,not:xl,pick:Ln,omit:bl,set:Un,splitAt:Dn,stringify:ql,toArray:ur,uniq:Fl,without:Jn,zipObject:kl}});var dt=w((J0,Wn)=>{a();c();u();l();var Nl=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),Bn=e=>atob(e.replace(/-/g,"+").replace(/_/g,"/")),Ol=e=>Uint8Array.from(Bn(e),t=>t.charCodeAt(0));Wn.exports={encode:Nl,decode:Bn,toUInt8Array:Ol}});var pr=w((V0,Gn)=>{a();c();u();l();var Ce=dt(),pt=e=>new window.TextEncoder().encode(e),Hn=JSON.stringify,Vn=e=>{let t=new Set;JSON.stringify(e,(n,o)=>t.add(n)&&o);let r=Array.from(t).sort();return JSON.stringify(e,r)};function _l({payload:e,key:t="",subtle:r=crypto.subtle,sort:n=!0}){let o={alg:"HS256",typ:"JWT",ver:1},i,s;try{n?(i=Vn(o),s=Vn(e)):(i=Hn(o),s=Hn(e))}catch{return Promise.reject("Cannot JSON encode the JWT")}let p,d;try{p=Ce.encode(i),d=Ce.encode(s)}catch{return Promise.reject("Cannot base64url encode the JWT")}return r.importKey("raw",pt(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]).then(m=>r.sign("HMAC",m,pt(p+"."+d))).then(m=>Ce.encode(String.fromCharCode(...new Uint8Array(m)))).then(m=>`${p}.${d}.${m}`)}function Rl({token:e}){if(!e){console.warn("Cannot decode a missing JWT token");return}let[,t]=e.split(".");if(!t){console.warn("Cannot decode an improperly formatted JWT token");return}let r;try{r=Ce.decode(t)}catch{console.warn("Cannot base64 decode the JWT token");return}let n;try{n=JSON.parse(r)}catch{console.warn("Cannot parse the JWT token as JSON");return}return n}function Il({token:e,key:t,subtle:r=crypto.subtle}){if(!e)return Promise.reject("Cannot verify a missing JWT token");if(!t)return Promise.reject("Cannot verify without a key");let[n,o,i]=e.split(".");return i?r.importKey("raw",pt(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]).then(s=>r.sign("HMAC",s,pt(n+"."+o))).then(s=>Ce.encode(String.fromCharCode(...new Uint8Array(s)))).then(s=>i===s):Promise.reject("Cannot verify an improperly formatted JWT token")}function Dl({token:e}){if(!e)return!1;let[t]=e.split(".");if(!t)return!1;try{let r=Ce.decode(t),n=JSON.parse(r),{alg:o,ver:i}=n;return o==="HS256"&&i===1}catch{return!1}}var jl=e=>e.key&&crypto&&crypto.subtle;Gn.exports={name:"HS256",encode:_l,decode:Rl,verify:Il,supports:Dl,available:jl}});var fr=w((Q0,Kn)=>{a();c();u();l();var zn=e=>String.fromCharCode.apply(null,e),Ul=e=>window.btoa(zn(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),Ll=e=>new TextEncoder().encode(e);Kn.exports={toString:zn,toBase64:Ul,encode:Ll}});var Zn=w((rq,Qn)=>{a();c();u();l();var Yn=dt(),mr=fr(),Ml=(e=window.crypto)=>e.getRandomValues(new Uint8Array(16)),Jl=(e,t=crypto.subtle)=>t.importKey("raw",Yn.toUInt8Array(e),{name:"AES-CTR"},!1,["encrypt","decrypt"]),$l=(e,t,r,n=crypto.subtle)=>n.encrypt({name:"AES-CTR",counter:t,length:128},e,mr.encode(r)).then(o=>new Uint8Array(o)).then(o=>mr.toBase64(o)),Bl=(e,t,r,n=crypto.subtle)=>n.decrypt({name:"AES-CTR",counter:t,length:128},e,Yn.toUInt8Array(r)).then(o=>new Uint8Array(o)).then(o=>mr.toString(o)),Wl=e=>e.key&&crypto&&crypto.subtle;Qn.exports={createCryptoKey:Jl,generateIv:Ml,encrypt:$l,decrypt:Bl,available:Wl}});var to=w((aq,eo)=>{a();c();u();l();var mt=Zn(),Hl=fr(),Xn="IURox3+4mlIoH4ar/82dAg==",ft,Vl=e=>ft?Promise.resolve({...e,cryptoKey:ft}):mt.createCryptoKey(Xn).then(t=>ft=t).then(()=>({...e,cryptoKey:ft})),Gl=e=>{let t=mt.generateIv();return{...e,iv:t}},zl=({endpoint:e,cryptoKey:t,iv:r})=>mt.encrypt(t,r,`${location.hostname}${e}`).then(n=>`/${Hl.toBase64(r)}${n}`),Kl=e=>{let t={key:Xn,endpoint:e};return mt.available(t)?Promise.resolve(t).then(Vl).then(Gl).then(zl):Promise.resolve(e)};eo.exports={generate:Kl}});var Ge=w((pq,ro)=>{a();c();u();l();var Yl={strictlyNecessary:"C0001",performance:"C0002",functional:"C0003",targeting:"C0004",socialMediaCookies:"C0005"},Ql=(e,t=window)=>!t.OnetrustActiveGroups||t.OnetrustActiveGroups.includes(Yl[e]);ro.exports={userHasConsentedTo:Ql}});var yt=w((gq,no)=>{a();c();u();l();var Zl=()=>{try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch{return}},Xl=()=>Math.floor(4294967295*Math.random()),ed=Zl()||Xl();no.exports={id:ed}});var z=w((Sq,ao)=>{a();c();u();l();var{encode:td}=pr(),rd=to(),nd=Ge(),od=yt(),vt=[],gt={},ht=0,sd=["allure","ad-de","ad-es","ad-in","ad-it","ad-mx","architectural-digest","architectural-digest/ad-pro","architectural-digest-france","bon-appetit","conde-nast-traveler","conde-nast-traveler-espana","epicurious","gq","gq-uk","gq-de","pitchfork","the-new-yorker","vanity-fair","vogue","vogue-de","vogue-es","vogue-in","vogue-it","vogue-jp","vogue-mx","vogue-paris","vogue-tw","vogue-uk","wired","woi"],id=()=>sd.includes("pitchfork"),ad=Math.random()*100<=10,yr,cd=e=>{yr=e},so=(e=ad)=>yr!==void 0?yr:id()&&e&&nd.userHasConsentedTo("performance"),ud=e=>{e.id!=="cmu.mounted"&&(e.time=Math.trunc(performance.now()),vt.push(e))},ld=e=>{let t="pitchfork";t=t.replace("/","-"),gt=e,gt.client=`${t}-compiler`,gt.pageviewId=od.id},oo=()=>{if(!so()||vt.length<=ht)return;let e=vt.slice(ht,ht+30);ht+=e.length,io({events:e})},dd=(e=window.setInterval)=>{document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&oo()},!1),e(()=>{oo()},2500)},pd=e=>td({payload:{...gt,...e},key:"gkqTHpdRoTZkVuier0moNQT5238rf81e",sort:!1}),io=e=>{let t="/journey/log";return Promise.all([rd.generate(t),pd(e)]).then(([r,n])=>{if(navigator.sendBeacon)Promise.resolve(navigator.sendBeacon(r,n));else return fetch(r,{method:"POST",credentials:"include",body:n})}).catch(r=>{console.error("logPayload",r.message)})};ao.exports={add:ud,events:vt,logPayload:io,initialize:ld,start:dd,shouldSendEvents:so,override:cd}});var K=w((Aq,uo)=>{a();c();u();l();var fd=z(),md="production",co=(e,t="",r={})=>{md==="production"?console.warn(e):console.error(e,t),fd.add({type:"compiler-error",event:{...e&&{message:e},...t&&{error:{message:t.message,stack:t.stack}},...r}})},yd=()=>{window.addEventListener("error",function(e){!e||!e.filename||!e.filename.match(/build.*js/)||co(e.message,e.error)})};uo.exports={initialize:yd,log:co}});var Pe=w((Oq,lo)=>{a();c();u();l();var hd=z(),hr=window,gd=e=>{let t=!1,r=d=>{t=!0,hd.add({type:"localStorage",id:"disabled",item:e,message:d})},n=()=>{try{return JSON.parse(hr.localStorage.getItem(e)||"{}")}catch({message:d}){return r(d),{}}},o=(d={})=>{try{return hr.localStorage.setItem(e,JSON.stringify(d)),!0}catch({message:m}){return r(m),!1}};return{read:d=>t?void 0:n()[d],write:(d,m)=>{if(t)return!1;let x=n();return x[d]=m,o(x)},remove:d=>{if(t)return!1;let m=n();return m[d]===void 0?!1:(delete m[d],o(m))},disable:r,isDisabled:()=>t}};lo.exports={storageFor:gd,setWindow:e=>hr=e}});var vo=w((jq,go)=>{a();c();u();l();var{isDefined:vd}=V(),gr=K(),wd=Pe(),bd=864e5,mo=e=>Math.trunc((Date.now()-Date.parse(e))/bd*1e3)/1e3,qd=mo("2024-11-28T09:55:11.272Z"),Sd=7,L={},yo=e=>{L.currentScript=e,L.currentCompiler=new URL(e).pathname.split("/").pop()},fo;yo(((fo=window.document.currentScript)==null?void 0:fo.src)||"http://localhost");var ho=e=>{L.location=e,L.journeyBranch=new URL(e).searchParams.get("journey-branch")};ho(window.location);var Ed=e=>t=>{let r=e.split("/")[1],{origin:n}=new URL(L.currentScript);return[n,"journey","compiler",r,t].filter(vd).join("/")},vr=e=>new Promise((t,r)=>{let n=document.createElement("script");n.src=L.locator(e),n.onload=()=>{L.reloaded=n.src,t()},n.onerror=r,n.async=!0,document.body.append(n),L.resolve&&n.onload()}),xd=()=>L.currentCompiler==="build.js",kd=async()=>{try{await vr(`branches/${L.journeyBranch}/build.js`)}catch(e){gr.log("** Journey error: failed to load branch compiler **",e)}},Td=()=>!!L.store.read("compiler"),Ad=()=>L.store.read("compiler")===L.currentCompiler,Cd=async()=>{try{let e=L.store.read("compiler");return await vr(e)}catch(e){gr.log("** Journey error: failed to load stored compiler **",e),L.store.remove("compiler"),L.store.remove("compiler-last-requested")}},po=()=>!L.ageInDays||L.ageInDays<0||L.ageInDays>Sd,Pd=()=>{let e=L.store.read("compiler-last-requested");return e&&mo(e)<1},Fd=async()=>{try{let e=await L.client(L.locator("latest.json")),{latest:t}=await e.json();if(!t)return;if(L.store.write("compiler",t),L.store.write("compiler-last-requested",new Date().toISOString()),L.currentCompiler!==t)return await vr(t)}catch(e){gr.log("** Journey error: failed to load latest compiler **",e),L.store.remove("compiler"),L.store.remove("compiler-last-requested")}},Nd=async({ageInDays:e=qd,brandSlug:t="pitchfork",currentBranch:r="master",store:n=wd.storageFor("journey"),client:o=fetch,resolve:i=!1}={})=>{if(L.reloaded=!1,L.ageInDays=e,L.store=n,L.locator=Ed(t),L.client=o.bind(window),L.resolve=i,L.branch=r,!xd()){if(L.journeyBranch&&L.journeyBranch!==L.branch)return kd();if(po()&&Td()&&!Ad())return Cd();if(po()&&!Pd())return Fd();n.write("compiler",L.currentCompiler)}};go.exports={initialize:Nd,get ageInDays(){return L.ageInDays},get reloaded(){return L.reloaded},setCurrentScript:yo,setLocation:ho}});var So={};fl(So,{default:()=>Kd});var Od,bo,_d,Rd,Id,Dd,jd,Ud,Ld,Md,$q,Jd,Fe,$d,Bd,Wd,qo,ue,wt,wo,wr,Hd,ne,Vd,Bq,Gd,zd,Kd,Eo=Ve(()=>{a();c();u();l();Od=Object.create,bo=Object.defineProperty,_d=Object.getOwnPropertyDescriptor,Rd=Object.getOwnPropertyNames,Id=Object.getPrototypeOf,Dd=Object.prototype.hasOwnProperty,jd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ud=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Rd(t))!Dd.call(e,o)&&o!==r&&bo(e,o,{get:()=>t[o],enumerable:!(n=_d(t,o))||n.enumerable});return e},Ld=(e,t,r)=>(r=e!=null?Od(Id(e)):{},Ud(t||!e||!e.__esModule?bo(r,"default",{value:e,enumerable:!0}):r,e)),Md=jd((e,t)=>{var r=function(){"use strict";var n=0;function o(d){var m=[],x=0,C=0;this.push=function(q){x-C>=d&&++C>=d&&(C=0,x=d-1),m[x%d]=q,x++},this.asArray=function(){var q=m.slice(C,Math.min(x,d)),S=m.slice(0,Math.max(x-d,0));return q.concat(S)},this.list=m}function i(d,m){for(var x=m,C=0;C<d.length;C++){var q=d[C],S=x.r;S[q]||(S[q]={w:q,r:{},i:n++}),x=S[q]}return x}function s(d,m,x){var C;return x[d]?C=x[d]:(C=function(q,S){for(var F=[[S,0]],O={},_=[];F.length;){var I=F.shift(),D=I[0],R=I[1],M=D.r,J=q[R];if(J===void 0&&D.fn&&!O[D.i]?(O[D.i]=1,_.push(D.fn)):M[J]&&F.push([M[J],R+1]),M["#"])for(var G=R;G<=q.length;G++)F.push([M["#"],G]);J&&M["*"]&&F.push([M["*"],R+1])}return _}(d.split("."),m),x[d]=C),C}var p=function(){var d={w:"",r:{},i:n++},m={},x=new o(9999);function C(S,F){var O=i(S.split("."),d),_=O.fn||[];return _.push(F),O.fn=_,m={},function(){var I=_.indexOf(F);I>-1&&_.splice(I,1)}}function q(S,F){var O=Date.now();x.push([S,O]);for(var _=s(S,d,m),I={topic:S},D=0;D<_.length;D++)for(var R=_[D],M=0;M<R.length;M++)R[M](F,I)}this.emit=q,this.on=C,this.history=function(S){var F={w:"",r:{},i:n++};i(S.split("."),F).fn=1;for(var O=[],_={},I=x.asArray(),D=0;D<I.length;D++){var R=I[D];s(R[0],F,_).length&&O.push(R)}return O},this.publish=q,this.subscribe=C};return p.Ring=o,p}();typeof e<"u"&&(t.exports=r)}),$q=Array.isArray,Jd=e=>e!=null&&typeof e=="object",Fe=e=>typeof e<"u",$d=e=>typeof e=="function",Bd=e=>(...t)=>!e(...t),Wd=e=>t=>e===t,qo=(e,t)=>[e.slice(0,t),e.slice(t)],ue=(e,t)=>t.split(".").reduce((r,n)=>r&&r[n],e),wt=(e,t,r)=>{let n=t.split("."),[o,i]=qo(n,-1),s=o.reduce((p,d)=>(p&&!Jd(p[d])&&(p[d]={}),p[d]),e);return s&&(s[i]=r),e},wo=(e,t,r)=>{let n=t.split("."),[o,i]=qo(n,-1),s=o.reduce((p,d)=>p&&p[d],e);return s&&delete s[i],e},wr=(e,t)=>JSON.parse(JSON.stringify(e),t),Hd=new Error("channel not available"),ne=(...e)=>e.filter(t=>!!t).join("."),Vd=({bus:e,target:t})=>{let r={bus:e,domains:{},products:new Set,subscriptions:[]};if(!Fe(t))return Hd;r.bus.target(t),r.bus.prefix("cytokine");let n=q=>S=>q.action===S.action&&(q.key.includes(S.key)||S.key.includes(q.key));r.bus.subscribe("set",({key:q,value:S})=>{let F=ne("domains",q);wt(r,F,S),r.subscriptions.filter(n({key:q,action:"set"})).forEach(({key:O,action:_,callback:I})=>{let D=ne("domains",O),R=ue(r,D);I(O,_,R,r.credentials)})}),r.bus.subscribe("unset",({key:q,value:S})=>{let F=ne("domains",q);wo(r,F,S),r.subscriptions.filter(n({key:q,action:"unset"})).forEach(({key:O,action:_,callback:I})=>{let D=ne("domains",O),R=ue(r,D);I(O,_,R,r.credentials)})}),r.bus.subscribe("register",(q,S)=>{r.products.forEach(F=>x("set",F))});let o=q=>{r.credentials=q,r.bus.authenticate(q),r.bus.emit("register")},i=()=>{r.domains={},r.subscriptions=[]},s=q=>{let S=ne("domains",q),F=ue(r,S);return x("get",q),F},p=q=>{let S=ne("domains",q),F=ue(r,S);return x("has",q),Fe(F)},d=(q,S)=>{let F=ne("domains",q);return wt(r,F,S),r.products.add(q),x("set",q),S},m=(q,S)=>{let F=ne("domains",q);return wo(r,F),r.products.delete(q),x("unset",q),S},x=(q,S)=>{let F=ne("domains",S),O=ue(r,F);e.emit(q,{key:S,value:O})},C=(q,S,F)=>{if(!$d(F))return;let O={key:q,action:S,callback:F};return r.subscriptions.push(O),()=>{r.subscriptions=r.subscriptions.filter(Bd(Wd(O)))}};return{state:r,bus:e,register:o,reset:i,get:s,has:p,set:d,unset:m,subscribe:C,readable:q=>{let S=ne("domains",q);Fe(ue(r,S))||wt(r,S,{});let F=wr(ue(r,S)),O=()=>{let _=ue(r,S);Object.keys(F).forEach(I=>delete F[I]),Object.keys(_).forEach(I=>F[I]=_[I])};return C(q,"set",O),C(q,"unset",O),F},writable:q=>{let S=ne("domains",q);return Fe(ue(r,S))||wt(r,S,{}),new Proxy({},{set(F,O,_){if(Fe(_))return F[O]=wr(_),d(ne(q,O),_),!0}})}}},Bq=Ld(Md(),1),Gd=()=>{let e=EventTarget,t={},r=s=>{t.credentials=s},n=s=>{t.target=s},o=s=>{t.prefix=s},i=s=>[t.prefix,s].join(".");return{backer:e,state:t,authenticate:r,target:n,prefix:o,create:()=>{let s=new e;return n(s),s},emit:(s,p)=>t.target.dispatchEvent(new CustomEvent(i(s),{detail:{credentials:t.credentials,payload:p}})),subscribe:(s,p)=>{let d=({detail:m})=>{try{let{payload:x,credentials:C}=m;p(x,C)}catch(x){console.log(x)}};return t.target.addEventListener(i(s),d),()=>{t.target.removeEventListener(i(s),d)}}}},zd=({credentials:e,bus:t,target:r})=>{let n=Vd({bus:t||Gd(),target:r||window.document});return n.register(e),{consumer:{channel:n,snapshot:o=>{let i=n.get(o);return Fe(i)?wr(i):void 0},has:o=>n.has(o),subscribe:(o,i)=>n.subscribe(o,"set",i),proxy:o=>n.readable(o)},producer:{channel:n,publish:(o,i)=>n.set(o,i),unpublish:o=>n.unset(o),proxy:o=>n.writable(o)}}},Kd=zd});var br=w((zq,xo)=>{a();c();u();l();var ve,Yd=async()=>{let e=(await Promise.resolve().then(()=>(Eo(),So))).default;ve=e({credentials:{id:"journey",key:"MCfNvUszQue4F94i3tdlEyrG97dQ9c2c"}})};xo.exports={initialize:Yd,get consumer(){return ve==null?void 0:ve.consumer},get producer(){return ve==null?void 0:ve.producer}}});var Oo=w(be=>{"use strict";a();c();u();l();Object.defineProperty(be,"__esModule",{value:!0});var To=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],bt=To.join(","),Ao=typeof Element>"u",we=Ao?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,qt=!Ao&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},St=function e(t,r){var n;r===void 0&&(r=!0);var o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),i=o===""||o==="true",s=i||r&&t&&e(t.parentNode);return s},Qd=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},Co=function(t,r,n){if(St(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(bt));return r&&we.call(t,bt)&&o.unshift(t),o=o.filter(n),o},Po=function e(t,r,n){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!St(s,!1))if(s.tagName==="SLOT"){var p=s.assignedElements(),d=p.length?p:s.children,m=e(d,!0,n);n.flatten?o.push.apply(o,m):o.push({scopeParent:s,candidates:m})}else{var x=we.call(s,bt);x&&n.filter(s)&&(r||!t.includes(s))&&o.push(s);var C=s.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(s),q=!St(C,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(C&&q){var S=e(C===!0?s.children:C.children,!0,n);n.flatten?o.push.apply(o,S):o.push({scopeParent:s,candidates:S})}else i.unshift.apply(i,s.children)}}return o},Fo=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Sr=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Qd(t))&&!Fo(t)?0:t.tabIndex},Zd=function(t,r){var n=Sr(t);return n<0&&r&&!Fo(t)?0:n},Xd=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},No=function(t){return t.tagName==="INPUT"},ep=function(t){return No(t)&&t.type==="hidden"},tp=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},rp=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},np=function(t){if(!t.name)return!0;var r=t.form||qt(t),n=function(p){return r.querySelectorAll('input[type="radio"][name="'+p+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=n(window.CSS.escape(t.name));else try{o=n(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=rp(o,t.form);return!i||i===t},op=function(t){return No(t)&&t.type==="radio"},sp=function(t){return op(t)&&!np(t)},ip=function(t){var r,n=t&&qt(t),o=(r=n)===null||r===void 0?void 0:r.host,i=!1;if(n&&n!==t){var s,p,d;for(i=!!((s=o)!==null&&s!==void 0&&(p=s.ownerDocument)!==null&&p!==void 0&&p.contains(o)||t!=null&&(d=t.ownerDocument)!==null&&d!==void 0&&d.contains(t));!i&&o;){var m,x,C;n=qt(o),o=(m=n)===null||m===void 0?void 0:m.host,i=!!((x=o)!==null&&x!==void 0&&(C=x.ownerDocument)!==null&&C!==void 0&&C.contains(o))}}return i},ko=function(t){var r=t.getBoundingClientRect(),n=r.width,o=r.height;return n===0&&o===0},ap=function(t,r){var n=r.displayCheck,o=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=we.call(t,"details>summary:first-of-type"),s=i?t.parentElement:t;if(we.call(s,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof o=="function"){for(var p=t;t;){var d=t.parentElement,m=qt(t);if(d&&!d.shadowRoot&&o(d)===!0)return ko(t);t.assignedSlot?t=t.assignedSlot:!d&&m!==t.ownerDocument?t=m.host:t=d}t=p}if(ip(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return ko(t);return!1},cp=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var o=r.children.item(n);if(o.tagName==="LEGEND")return we.call(r,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}r=r.parentElement}return!1},Et=function(t,r){return!(r.disabled||St(r)||ep(r)||ap(r,t)||tp(r)||cp(r))},qr=function(t,r){return!(sp(r)||Sr(r)<0||!Et(t,r))},up=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},lp=function e(t){var r=[],n=[];return t.forEach(function(o,i){var s=!!o.scopeParent,p=s?o.scopeParent:o,d=Zd(p,s),m=s?e(o.candidates):p;d===0?s?r.push.apply(r,m):r.push(p):n.push({documentOrder:i,tabIndex:d,item:o,isScope:s,content:m})}),n.sort(Xd).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(r)},dp=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Po([t],r.includeContainer,{filter:qr.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:up}):n=Co(t,r.includeContainer,qr.bind(null,r)),lp(n)},pp=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Po([t],r.includeContainer,{filter:Et.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=Co(t,r.includeContainer,Et.bind(null,r)),n},fp=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return we.call(t,bt)===!1?!1:qr(r,t)},mp=To.concat("iframe").join(","),yp=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return we.call(t,mp)===!1?!1:Et(r,t)};be.focusable=pp;be.getTabIndex=Sr;be.isFocusable=yp;be.isTabbable=fp;be.tabbable=dp});var Uo=w(Er=>{"use strict";a();c();u();l();Object.defineProperty(Er,"__esModule",{value:!0});var le=Oo();function _o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_o(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hp(e,t,r){return t=vp(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gp(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vp(e){var t=gp(e,"string");return typeof t=="symbol"?t:String(t)}var Io={activateTrap:function(t,r){if(t.length>0){var n=t[t.length-1];n!==r&&n.pause()}var o=t.indexOf(r);o===-1||t.splice(o,1),t.push(r)},deactivateTrap:function(t,r){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}},wp=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},bp=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},Ke=function(t){return t.key==="Tab"||t.keyCode===9},qp=function(t){return Ke(t)&&!t.shiftKey},Sp=function(t){return Ke(t)&&t.shiftKey},Do=function(t){return setTimeout(t,0)},jo=function(t,r){var n=-1;return t.every(function(o,i){return r(o)?(n=i,!1):!0}),n},ze=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return typeof t=="function"?t.apply(void 0,n):t},xt=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},Ep=[],xp=function(t,r){var n=(r==null?void 0:r.document)||document,o=(r==null?void 0:r.trapStack)||Ep,i=Ro({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:qp,isKeyBackward:Sp},r),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},p,d=function(b,E,T){return b&&b[E]!==void 0?b[E]:i[T||E]},m=function(b,E){var T=typeof(E==null?void 0:E.composedPath)=="function"?E.composedPath():void 0;return s.containerGroups.findIndex(function(j){var f=j.container,A=j.tabbableNodes;return f.contains(b)||(T==null?void 0:T.includes(f))||A.find(function(U){return U===b})})},x=function(b){var E=i[b];if(typeof E=="function"){for(var T=arguments.length,j=new Array(T>1?T-1:0),f=1;f<T;f++)j[f-1]=arguments[f];E=E.apply(void 0,j)}if(E===!0&&(E=void 0),!E){if(E===void 0||E===!1)return E;throw new Error("`".concat(b,"` was specified but was not a node, or did not return a node"))}var A=E;if(typeof E=="string"&&(A=n.querySelector(E),!A))throw new Error("`".concat(b,"` as selector refers to no known node"));return A},C=function(){var b=x("initialFocus");if(b===!1)return!1;if(b===void 0||!le.isFocusable(b,i.tabbableOptions))if(m(n.activeElement)>=0)b=n.activeElement;else{var E=s.tabbableGroups[0],T=E&&E.firstTabbableNode;b=T||x("fallbackFocus")}if(!b)throw new Error("Your focus-trap needs to have at least one focusable element");return b},q=function(){if(s.containerGroups=s.containers.map(function(b){var E=le.tabbable(b,i.tabbableOptions),T=le.focusable(b,i.tabbableOptions);return{container:b,tabbableNodes:E,focusableNodes:T,firstTabbableNode:E.length>0?E[0]:null,lastTabbableNode:E.length>0?E[E.length-1]:null,nextTabbableNode:function(f){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,U=T.findIndex(function(N){return N===f});if(!(U<0))return A?T.slice(U+1).find(function(N){return le.isTabbable(N,i.tabbableOptions)}):T.slice(0,U).reverse().find(function(N){return le.isTabbable(N,i.tabbableOptions)})}}}),s.tabbableGroups=s.containerGroups.filter(function(b){return b.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},S=function k(b){if(b!==!1&&b!==n.activeElement){if(!b||!b.focus){k(C());return}b.focus({preventScroll:!!i.preventScroll}),s.mostRecentlyFocusedNode=b,wp(b)&&b.select()}},F=function(b){var E=x("setReturnFocus",b);return E||(E===!1?!1:b)},O=function(b){var E=xt(b);if(!(m(E,b)>=0)){if(ze(i.clickOutsideDeactivates,b)){p.deactivate({returnFocus:i.returnFocusOnDeactivate});return}ze(i.allowOutsideClick,b)||b.preventDefault()}},_=function(b){var E=xt(b),T=m(E,b)>=0;T||E instanceof Document?T&&(s.mostRecentlyFocusedNode=E):(b.stopImmediatePropagation(),S(s.mostRecentlyFocusedNode||C()))},I=function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,T=xt(b);q();var j=null;if(s.tabbableGroups.length>0){var f=m(T,b),A=f>=0?s.containerGroups[f]:void 0;if(f<0)E?j=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:j=s.tabbableGroups[0].firstTabbableNode;else if(E){var U=jo(s.tabbableGroups,function(ar){var cr=ar.firstTabbableNode;return T===cr});if(U<0&&(A.container===T||le.isFocusable(T,i.tabbableOptions)&&!le.isTabbable(T,i.tabbableOptions)&&!A.nextTabbableNode(T,!1))&&(U=f),U>=0){var N=U===0?s.tabbableGroups.length-1:U-1,W=s.tabbableGroups[N];j=W.lastTabbableNode}else Ke(b)||(j=A.nextTabbableNode(T,!1))}else{var X=jo(s.tabbableGroups,function(ar){var cr=ar.lastTabbableNode;return T===cr});if(X<0&&(A.container===T||le.isFocusable(T,i.tabbableOptions)&&!le.isTabbable(T,i.tabbableOptions)&&!A.nextTabbableNode(T))&&(X=f),X>=0){var re=X===s.tabbableGroups.length-1?0:X+1,ir=s.tabbableGroups[re];j=ir.firstTabbableNode}else Ke(b)||(j=A.nextTabbableNode(T))}}else j=x("fallbackFocus");j&&(Ke(b)&&b.preventDefault(),S(j))},D=function(b){if(bp(b)&&ze(i.escapeDeactivates,b)!==!1){b.preventDefault(),p.deactivate();return}(i.isKeyForward(b)||i.isKeyBackward(b))&&I(b,i.isKeyBackward(b))},R=function(b){var E=xt(b);m(E,b)>=0||ze(i.clickOutsideDeactivates,b)||ze(i.allowOutsideClick,b)||(b.preventDefault(),b.stopImmediatePropagation())},M=function(){if(!!s.active)return Io.activateTrap(o,p),s.delayInitialFocusTimer=i.delayInitialFocus?Do(function(){S(C())}):S(C()),n.addEventListener("focusin",_,!0),n.addEventListener("mousedown",O,{capture:!0,passive:!1}),n.addEventListener("touchstart",O,{capture:!0,passive:!1}),n.addEventListener("click",R,{capture:!0,passive:!1}),n.addEventListener("keydown",D,{capture:!0,passive:!1}),p},J=function(){if(!!s.active)return n.removeEventListener("focusin",_,!0),n.removeEventListener("mousedown",O,!0),n.removeEventListener("touchstart",O,!0),n.removeEventListener("click",R,!0),n.removeEventListener("keydown",D,!0),p},G=function(b){var E=b.some(function(T){var j=Array.from(T.removedNodes);return j.some(function(f){return f===s.mostRecentlyFocusedNode})});E&&S(C())},P=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(G):void 0,$=function(){!P||(P.disconnect(),s.active&&!s.paused&&s.containers.map(function(b){P.observe(b,{subtree:!0,childList:!0})}))};return p={get active(){return s.active},get paused(){return s.paused},activate:function(b){if(s.active)return this;var E=d(b,"onActivate"),T=d(b,"onPostActivate"),j=d(b,"checkCanFocusTrap");j||q(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=n.activeElement,E==null||E();var f=function(){j&&q(),M(),$(),T==null||T()};return j?(j(s.containers.concat()).then(f,f),this):(f(),this)},deactivate:function(b){if(!s.active)return this;var E=Ro({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},b);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,J(),s.active=!1,s.paused=!1,$(),Io.deactivateTrap(o,p);var T=d(E,"onDeactivate"),j=d(E,"onPostDeactivate"),f=d(E,"checkCanReturnFocus"),A=d(E,"returnFocus","returnFocusOnDeactivate");T==null||T();var U=function(){Do(function(){A&&S(F(s.nodeFocusedBeforeActivation)),j==null||j()})};return A&&f?(f(F(s.nodeFocusedBeforeActivation)).then(U,U),this):(U(),this)},pause:function(b){if(s.paused||!s.active)return this;var E=d(b,"onPause"),T=d(b,"onPostPause");return s.paused=!0,E==null||E(),J(),$(),T==null||T(),this},unpause:function(b){if(!s.paused||!s.active)return this;var E=d(b,"onUnpause"),T=d(b,"onPostUnpause");return s.paused=!1,E==null||E(),q(),M(),$(),T==null||T(),this},updateContainerElements:function(b){var E=[].concat(b).filter(Boolean);return s.containers=E.map(function(T){return typeof T=="string"?n.querySelector(T):T}),s.active&&q(),$(),this}},p.updateContainerElements(t),p};Er.createFocusTrap=xp});var Ye=w((uS,Lo)=>{a();c();u();l();var Ne;do Ne=Math.random().toString(36).match(/[a-z]/g).join("");while(window[Ne]!==void 0);window[Ne]={};var kp=e=>{window[Ne]={...window[Ne],...e}};Lo.exports={add:kp,name:Ne}});var xr=w((mS,Mo)=>{a();c();u();l();var ae=document.createElement("iframe");window.document.body.append(ae);var Tp=ae&&ae.contentWindow&&ae.contentWindow.setInterval&&ae.contentWindow.setInterval.bind(window)||window.setInterval,Ap=ae&&ae.contentWindow&&ae.contentWindow.setTimeout&&ae.contentWindow.setTimeout.bind(window)||window.setTimeout;ae.remove();Mo.exports={setInterval:Tp,setTimeout:Ap}});var $o=w((wS,Jo)=>{a();c();u();l();var Cp=(e,t)=>{let{opacity:r,visibility:n}=e.getComputedStyle(t);return!!t.offsetHeight&&!!t.offsetWidth&&r!=="0"&&n!=="hidden"};Jo.exports={isViewable:Cp}});var kr=w((xS,Wo)=>{a();c();u();l();var Pp=$o(),Fp=xr(),Np=(e,t,r=1)=>{let n=0;new IntersectionObserver(([i],s)=>{i.isIntersecting===!0&&Pp.isViewable(window,e)&&(t(),n++,n>=r&&s.unobserve(e))},{threshold:[.001,.999],trackVisibility:!0,delay:100}).observe(e)},Bo=async(e,t,r=1e3)=>{let n;n=Fp.setInterval(()=>{e()&&(window.clearInterval(n),t())},r)},Op=async(e,t,r=1e3)=>{if(e())return t();Bo(e,t,r)};Wo.exports={onElementAppearance:Np,after:Bo,once:Op}});var Vo=w((PS,Ho)=>{a();c();u();l();var _p=e=>{let t={continent:"--",country:"--",pop:"---"};if(!e||!e.serverTiming)return t;let r=e.serverTiming.find(o=>o.name==="geo");if(!r||!r.description)return t;let n=r.description.match(/continent=([A-Z]*);country=([A-Z]*);pop=([A-Z]*)/);return n?{continent:n[1],country:n[2],pop:n[3]}:t};Ho.exports={geoFrom:_p}});var Ko=w((RS,zo)=>{a();c();u();l();var{geoFrom:Rp}=Vo(),Ip=z(),Qe=(e,t)=>{let r=Rp(e);Ip.add({type:"asset-tracker",id:t,geo:r,startTime:Math.floor(e.startTime),duration:Math.floor(e.duration)})},Go=(e=performance)=>e.getEntries().forEach(t=>{switch(!0){case!!t.name.match(/covers.conde.io/):Qe(t,"cover_manager");break;case!!t.name.match(/user-context/):Qe(t,"user_context");break;case!!t.name.match(/\/api\/payment\//):Qe(t,"payment_server");break;case!!t.name.match(/build-\w+\.js/):Qe(t,"journey_compiler");break;case!!t.name.match(/\/gate\/sync\?canonicalUrl/):Qe(t,"journey_gate_sync_meter");break}}),Dp=()=>{new PerformanceObserver(Go).observe({entryTypes:["resource"]})},jp=()=>{Go(),Dp()};zo.exports={execute:jp}});var At=w((LS,Zo)=>{a();c();u();l();var Tt=[],kt,Yo=()=>!Tt.length,Up=e=>Tt.push(e),Qo=()=>Tt.shift(),Lp=()=>{Tt.length=0},Mp=(e=window.setInterval)=>{kt=e(()=>{if(Yo())return;Qo()()},10)},Jp=()=>{!kt||(clearInterval(kt),kt=void 0)};Zo.exports={isEmpty:Yo,add:Up,take:Qo,clear:Lp,start:Mp,stop:Jp}});var Ar=w((WS,Xo)=>{a();c();u();l();var{isMatch:Tr}=V(),Ct=[],Ze=[],$p=()=>{Ct=[],Ze=[]},Bp=({id:e=".*",payload:t={},callback:r})=>{let n={id:e,payload:t,callback:r};return Ze.push(n),()=>{let o=i=>s=>!Tr(i,s);Ze=Ze.filter(o(n))}},Wp=({id:e,payload:t={},timestamp:r=Date.now()})=>{let n={id:e,payload:t,timestamp:r};Ct=Ct.concat(n),Ze.filter(o=>e.match(new RegExp(o.id))).filter(o=>Tr(t,o.payload)).forEach(o=>o.callback(n))},Hp=({id:e=".*",payload:t={}}={})=>Ct.filter(r=>r.id.match(new RegExp(e))).filter(r=>Tr(r.payload,t));Xo.exports={on:Bp,emit:Wp,history:Hp,reset:$p}});var ee=w((KS,es)=>{a();c();u();l();var Vp=z(),Xe=Ar(),{omit:Gp}=V(),zp=["element","data","configuration","campaign"],de=e=>(t={},r)=>{Xe.emit({id:e,payload:t,timestamp:r});let n=Gp(t,zp);Vp.add({type:"bus-event",id:e,payload:n})},Pt=e=>(t={})=>!!Xe.history({id:e,payload:t}).length,Q=(e,t={})=>r=>(Xe.history({id:e,payload:t}).forEach(n=>r(n)),Xe.on({id:e,payload:t,callback:r})),Kp=e=>()=>{let t=Xe.history({id:e})[0];return t?t.payload||{}:{}};es.exports={emitEvent:({id:e,payload:t,timestamp:r})=>de(e)(t,r),hasAnEventOccured:({id:e,payload:t})=>Pt(e)(t),whenAnEventOccurs:({id:e,payload:t,callback:r})=>Q(e,t)(r),whenACMUIsMounted:Q("cmu.mounted"),whenIncognitoIsDetected:Q("incognito.detected"),whenSegmentsAreUpdated:Q("segments.updated"),whenPermutiveSegmentsAreUpdated:Q("permutive.segments.updated"),whenPaymentIsUpdated:Q("payment.updated"),hasIncognitoBeenDetected:Pt("incognito.detected"),haveSegmentsBeenUpdated:Pt("segments.updated"),hasRoadblockBeenDetected:Pt("ads.roadblock"),whenRoadblockIsDetected:Q("ads.roadblock"),whenJourneyStateIsUpdated:Q("journey.state.updated"),emitJourneyStateIsUpdated:de("journey.state.updated"),whenJourneyUnitIsRendered:Q("journey.unit.rendered"),emitJourneyUnitIsRendered:de("journey.unit.rendered"),whenJourneyUnitIsRemoved:Q("journey.unit.removed"),emitJourneyUnitIsRemoved:de("journey.unit.removed"),whenJourneyActionIsExecuted:Q("journey.action.executed"),emitJourneyActionIsExecuted:de("journey.action.executed"),whenJourneyUnitRenderEnds:Q("journey.unit.render.end"),whenJourneyUnitEmptyEnds:Q("journey.unit.empty.end"),emitJourneyUnitRenderBegan:de("journey.unit.render.begin"),emitJourneyUnitEmptyBegan:de("journey.unit.empty.begin"),emitJourneyUnitRenderEnded:de("journey.unit.render.end"),emitJourneyUnitEmptyEnded:de("journey.unit.empty.end"),whenAClientErrorOccurs:Q("journey.client.error"),whenOneTrustGroupsAreUpdated:Q("onetrust.groups.updated"),whenJourneyComponentNavRolloverAppears:Q("journey.component.appears.NavRollover"),payloadOfFingerprintIDEvent:Kp("fingerprint.id.*"),whenFingerprintIDEventOccurs:Q("fingerprint.id")}});var rs=w((eE,ts)=>{"use strict";a();c();u();l();var Yp=function(t){var r=t.from,n=t.to;return{from:typeof r=="string"?new Date(r):r,to:typeof n=="string"?new Date(n):n}},Qp=function(t){var r=t.from,n=t.to;return{from:r||null,to:n||null}},Zp=function(t,r){if(t&&r&&t>r||t&&t.toString()==="Invalid Date"||r&&r.toString()==="Invalid Date")throw new Error("Invalid dates provided")},Cr=function(t){var r=Qp(Yp(t)),n=r.from,o=r.to,i=new Date;return Zp(n,o),{from:n,to:o,today:i}},Xp=function(t){var r=Cr(t),n=r.from,o=r.to,i=r.today;return n===null&&o===null||n===null&&i<=o||n<=i&&o===null||n<=i&&i<=o},ef=function(t){var r=Cr(t),n=r.to,o=r.today;return n===null?!1:o>n},tf=function(t){var r=Cr(t),n=r.from,o=r.today;return o<n};ts.exports={isActive:Xp,isInactive:ef,isNotYetActive:tf}});var os=w((sE,ns)=>{"use strict";a();c();u();l();var rf=rs();ns.exports={analyzer:rf}});var Pr=w((lE,ss)=>{a();c();u();l();var Oe=1e3,_e=Oe*60,Re=_e*60,qe=Re*24,nf=qe*7,of=qe*365.25;ss.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return sf(e);if(r==="number"&&isFinite(e))return t.long?cf(e):af(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function sf(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*of;case"weeks":case"week":case"w":return r*nf;case"days":case"day":case"d":return r*qe;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Re;case"minutes":case"minute":case"mins":case"min":case"m":return r*_e;case"seconds":case"second":case"secs":case"sec":case"s":return r*Oe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function af(e){var t=Math.abs(e);return t>=qe?Math.round(e/qe)+"d":t>=Re?Math.round(e/Re)+"h":t>=_e?Math.round(e/_e)+"m":t>=Oe?Math.round(e/Oe)+"s":e+"ms"}function cf(e){var t=Math.abs(e);return t>=qe?Ft(e,t,qe,"day"):t>=Re?Ft(e,t,Re,"hour"):t>=_e?Ft(e,t,_e,"minute"):t>=Oe?Ft(e,t,Oe,"second"):e+" ms"}function Ft(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var Dr=w((yE,vs)=>{a();c();u();l();var{get:Ie,isMatch:ls}=V(),uf=Pr(),De=e=>typeof e<"u"?[].concat(e):[],ds=e=>t=>new RegExp(`^${t} `).test(e),lf=e=>ms.find(({word:t})=>ds(e)(t))||{},ps=e=>{let{word:t}=lf(e);return t?e.replace(`${t} `,""):e},Fr=e=>t=>r=>!e(t)(r),H=e=>t=>e.toString().toLowerCase()===t.toString().toLowerCase(),Nr=e=>t=>e==t,is=e=>t=>t>e,as=e=>t=>t<e,cs=e=>t=>t>=e.min&&t<=e.max,df=e=>t=>Ir(e).every(gs(e,t)),pf=e=>t=>Ie(t,e)!==void 0,ff=e=>t=>Object.entries(e).every(([r,n])=>ls(Ie(t,r),Ie(t,n))),mf=e=>t=>ls(t,e),yf=e=>({"=":Nr,"!=":Fr(Nr),">":is,"<=":Fr(is),"<":as,">=":Fr(as)})[e]||Nr,et=({comparison:e,threshold:t})=>r=>yf(e)(t)(r),fs={word:"any",compare:(e,t,r)=>t.some(n=>De(e).some(o=>De(r).some(n(o))))},hf={word:"all",compare:(e,t,r)=>t.some(n=>De(e).every(o=>De(r).some(n(o))))},gf={word:"not",compare:(e,t,r)=>t.every(n=>De(e).every(o=>!De(r).some(n(o))))},ms=[fs,hf,gf],vf=e=>ms.find(({word:t})=>ds(e)(t))||fs,B=e=>t=>t[e],Or=(e,t)=>(r,n,o)=>t(Ie(r,r[e])||{},n,o),_r=(e,t)=>(r,n,o)=>t(r[e],n,o)||{},us=(e,t)=>Ie(e,t)||{},Rr=e=>e,wf=e=>(t,r,n)=>Ie(t,n[e])||{},bf=[{properties:/^paymentBypassed$/,matchers:[H],lookup:B("paymentBypassed"),weight:10},{properties:/^(target|targets)$/,matchers:[df],lookup:Rr,weight:5},{properties:/^(segment|segments)$/,matchers:[H],lookup:B("segments"),weight:5},{properties:/^(referralSource|referralSources)$/,matchers:[H],lookup:B("segments"),weight:5},{properties:/^(permutiveSegment|permutiveSegments)$/,matchers:[H],lookup:B("permutiveSegments"),weight:5},{properties:/^(tag|tags|tagged)$/,matchers:[H],lookup:B("tags"),weight:5},{properties:/^isNewsletterCampaign$/,matchers:[H],lookup:B("isNewsletterCampaign"),weight:5},{properties:/^paid$/,matchers:[H],lookup:B("paid"),weight:5},{properties:/^(queryParameter|queryParameters)$/,matchers:[mf],lookup:B("queryParameters"),weight:5},{properties:/^(count|counts)$/,matchers:[H,et],lookup:Or("payment",B("cnt")),weight:4},{properties:/^(.+)\s(count|counts)$/,matchers:[H,et],lookup:Or("payment",_r("cnts",wf(1))),weight:4},{properties:/^(max|maxes)$/,matchers:[H,et],lookup:Or("payment",B("max")),weight:4},{properties:/^(channel|channels)$/,matchers:[H],lookup:B("channel"),weight:3},{properties:/^(subChannel|subChannels)$/,matchers:[H],lookup:B("subChannel"),weight:3},{properties:/^(contentType|contentTypes)$/,matchers:[H],lookup:B("contentType"),weight:3},{properties:/^authenticated$/,matchers:[H],lookup:B("isAuthenticated"),weight:1},{properties:/^entitled$/,matchers:[H],lookup:B("entitled"),weight:1},{properties:/^(payment|payments)$/,matchers:[H],lookup:B("payment"),weight:1},{properties:/^(scope|scopes)$/,matchers:[H],lookup:B("scope"),weight:1},{properties:/^(bucket|buckets)/,matchers:[cs],lookup:B("bucket"),weight:1},{properties:/^(width|widths)$/,matchers:[cs],lookup:B("width"),weight:1},{properties:/^(country|countries)$/,matchers:[H],lookup:B("country"),weight:1},{properties:/^adblock$/,matchers:[H],lookup:B("adblock"),weight:1},{properties:/^incognito$/,matchers:[H],lookup:B("incognito"),weight:1},{properties:/^segmentsUpdated$/,matchers:[H],lookup:B("segmentsUpdated"),weight:1},{properties:/^contentIsPaywalled$/,matchers:[H],lookup:B("contentIsPaywalled"),weight:1},{properties:/^contentCanBeSampled$/,matchers:[H],lookup:B("contentCanBeSampled"),weight:1},{properties:/^contentIsOlderThan$/,matchers:[e=>t=>uf(e)<t],lookup:B("contentAgeInMilliseconds"),weight:1},{properties:/^os$/,matchers:[H],lookup:_r("device",_r("os",B("name"))),weight:1},{properties:/^sample\.(cnt|max|iss)$/,matchers:[H,et],lookup:us,weight:1},{properties:/^[fm]smp\.cnts.([a-zA-Z0-9]+)$/,matchers:[H,et],lookup:us,weight:1},{properties:/^(token|tokens)$/,matchers:[pf],lookup:Rr,weight:1},{properties:/^(match|matches)$/,matchers:[ff],lookup:Rr,weight:1},{properties:/^(consumer|consumers)$/,matchers:[H],lookup:B("consumer"),weight:0}],ys=(e,t)=>e.exec(t),hs=e=>bf.find(({properties:t})=>!!ys(t,e)),qf=["version"],Ir=e=>Object.keys(e).filter(t=>!qf.includes(t)),gs=(e,t)=>r=>{let n=vf(r),o=ps(r),i=hs(o);if(!i)return!1;let{properties:s,matchers:p,lookup:d}=i;return n.compare(e[r],p,d(t,o,ys(s,o)))},Sf=(e,t)=>{let r=ps(t),n=hs(r);return n!=null&&n.weight&&(e+=n.weight),e},Ef=(e,t)=>Ir(e.targeting).every(gs(e.targeting,t)),xf=e=>Ir(e.targeting).reduce(Sf,0);vs.exports={matching:Ef,score:xf}});var qs=w((bE,bs)=>{a();c();u();l();var Nt=Dr(),ws=e=>t=>Nt&&Nt.matching(t,e),kf=(e,t)=>Nt.score(e)-Nt.score(t);function Tf(e,t){return e.filter(ws(t)).sort(kf).pop()}function Af(e,t){return e.filter(ws(t))}bs.exports={matchingUnit:Tf,matchingUnits:Af}});var xs=w((kE,Es)=>{a();c();u();l();var{not:Cf}=V(),jr=e=>e.key&&!!e.key.match(/^module/)||e.name&&!!e.name.match(/^\[module\]/i)||e.configuration&&!!e.configuration.module,Ss=({configuration:e})=>{var t;return((t=e==null?void 0:e.module)==null?void 0:t.scope)==="global"},Pf=Cf(Ss),Ff=({campaign:e={},campaigns:t=[]})=>{var i;let r=((i=e==null?void 0:e.configuration)==null?void 0:i.includes)||{},n=t.filter(jr).filter(Ss).filter(({key:s})=>{var p;return((p=r[s])==null?void 0:p.enabled)!=!1}),o=t.filter(jr).filter(Pf).filter(({key:s})=>r[s]).filter(({key:s})=>r[s].enabled!=!1);return[...n,...o]};Es.exports={isAModule:jr,modulesOf:Ff}});var je=w((FE,ks)=>{a();c();u();l();var{uniq:Nf}=V(),Ur=e=>{var t,r,n,o,i,s,p;return Nf([...((r=(t=e.template)==null?void 0:t.configuration)==null?void 0:r.types)||[],...((o=(n=e.component)==null?void 0:n.configuration)==null?void 0:o.types)||[],...((i=e.configuration)==null?void 0:i.types)||[],...((p=(s=e.function)==null?void 0:s.configuration)==null?void 0:p.types)||[]])},Of=e=>Ur(e)[0]||"",_f=(e,t)=>Ur(e).some(r=>t.includes(r));ks.exports={unitTypes:Ur,typeOf:Of,matchesType:_f}});var Lr=w((IE,Ts)=>{a();c();u();l();var{matchesType:Rf}=je(),If=(e=[])=>Array.from(e.join(",").matchAll(/disable-(.*?)-units/g),t=>t[1]),Df=(e,{disabledUnitTypes:t=[]}={})=>Rf(e,t);Ts.exports={disabledUnitTypes:If,isADisabledUnit:Df}});var Ue=w((ME,Ps)=>{a();c();u();l();var{log:As}=K(),{isMatch:jf}=V(),Cs={},Uf=({conditions:e,rules:t})=>t.filter(r=>jf(r.data,e)),Lf=({rule:e,rules:t,state:r,units:n,campaign:o,campaigns:i})=>{t.filter(s=>s.data.function===e).forEach(s=>{let{function:p,...d}=s.data,m=Cs[p];if(typeof m!="function"){As(`** Journey Error: Unknown Rule Function: ${p} **`);return}try{m({...d,rule:s,state:r,units:n,campaign:o,campaigns:i})}catch(x){As(`** Journey Error: Rule Function: ${p} **`,x)}})},Mf=({rule:e,rules:t=[]})=>{let r=t.filter(n=>n.data.function===e).pop();return r?r.data.mode?r.data.mode!=="disabled":!0:!1},Jf=e=>{Cs=e};Ps.exports={register:Jf,enforce:Lf,isEnabled:Mf,rulesMatching:Uf}});var ce=w((HE,_s)=>{a();c();u();l();var Fs=e=>e.template&&!e.function&&!e.component,Ns=e=>!e.template&&!e.function&&e.component,$f=e=>Fs(e)||Ns(e),Bf=e=>t=>t.slot===e,Wf={action:e=>{var t,r;return((t=e.configuration)==null?void 0:t.action)||!((r=e.configuration)!=null&&r.rule)},rule:e=>{var t;return(t=e.configuration)==null?void 0:t.rule}},Os=(e="",t)=>{let r=Wf[e.toLowerCase()];return r&&r(t)},Ot=e=>Os("Action",e)&&e.function&&!e.component&&!e.template,Hf=e=>Ot(e)&&!e.configuration.userActions,Vf=e=>t=>Ot(t)&&t.targeting.units&&t.targeting.units.includes(e.name),Gf=e=>t=>Ot(t)&&t.data.prevent&&t.data.prevent.includes(e.name),zf=e=>Os("Rule",e)&&e.function&&!e.component&&!e.template;_s.exports={isATemplatePresentationUnit:Fs,isAnActionUnit:Ot,isAComponentPresentationUnit:Ns,isAPresentationUnit:$f,isAnImmediateAction:Hf,isAPresentationUnitThatTargets:Bf,isAnActionThatTargets:Vf,isAnActionThatPrevents:Gf,isARuleUnit:zf}});var Is=w((YE,Rs)=>{a();c();u();l();var{get:Se,deepClone:Kf,isDefined:Yf}=V(),Qf=Ue(),Zf=ce(),{typeOf:Xf}=je(),em=e=>(t,r)=>typeof r!="string"?r:r.replace(/{{\s*(.*?)\s*}}/g,(n,o)=>Se(e,o)),tm=({campaign:e={},module:t={},unit:r={},state:n={},rules:o=[]})=>{if(Zf.isARuleUnit(r))return r;let i=Qf.rulesMatching({conditions:{function:"setInjections"},rules:o}).map(p=>p.data.set).filter(Yf),s=Object.assign({tracking:{unitType:Xf(r).toUpperCase()}},{state:n},Se(t,"configuration.set",{}),Se(e,"configuration.includes",{})[t.key]||{},Se(e,"configuration.set",{}),Se(r,"template.configuration.set",{}),Se(r,"component.configuration.set",{}),Se(r,"configuration.set",{}),...i);return Kf(r,em(s))};Rs.exports={set:tm}});var It=w((tx,Hs)=>{a();c();u();l();var{analyzer:Ds}=os(),{matchingUnit:js,matchingUnits:Us}=qs(),{deepClone:Ls,flatten:Ms,not:rm}=V(),{isAModule:Js,modulesOf:nm}=xs(),{isADisabledUnit:$s}=Lr(),_t=Is(),Rt=Ue(),{isARuleUnit:$r}=ce(),om=(e,t)=>(e.data.priority||1/0)-(t.data.priority||1/0),Br={name:"no campaign resolved",units:[]},Mr=Br,sm=()=>Mr,Jr=[],im=()=>Jr,Bs,am=e=>Bs=e,Wr=[],cm=e=>Wr=e,um=({campaigns:e,state:t})=>{let r=e.filter(Ds.isActive).filter(rm(Js));return Mr=Bs||js(r,t)||Br,Mr},Hr=({campaign:e,campaigns:t,state:r})=>{let o=nm({campaign:e,campaigns:t}).filter(Ds.isActive).filter(Js);return r?Us(o,r):o},lm=({type:e,campaign:t,rules:r,campaigns:n,state:o})=>{let i=Hr({campaign:t,campaigns:n,state:o}),p=[...Ms(i.map(C=>C.units.map(q=>_t.set({campaign:t,module:C,unit:q,state:o,rules:r})))),...t.units].filter(e).filter(C=>!$s(C,o)).map(Ls);e!==$r&&(r||(r=Vr({campaign:t,campaigns:n,state:o})),Rt.enforce({rule:"setTargeting",rules:r,units:p,campaign:t,campaigns:n,state:o}),Rt.enforce({rule:"setTracking",rules:r,units:p,campaign:t,campaigns:n,state:o}));let d=o?js(p,o):p[0];d&&(d=_t.set({campaign:t,unit:d,state:o,rules:r}));let m=Wr.filter(e)[0];return m||d},Ws=({type:e,campaign:t,rules:r,campaigns:n,state:o})=>{let i=Hr({campaign:t,campaigns:n,state:o}),p=[...Ms(i.map(C=>C.units.map(q=>_t.set({campaign:t,module:C,unit:q,state:o,rules:r})))),...t.units].filter(e).filter(C=>!$s(C,o)).map(Ls);e!==$r&&(r||(r=Vr({campaign:t,campaigns:n,state:o})),Rt.enforce({rule:"setTargeting",rules:r,units:p,campaign:t,campaigns:n,state:o}),Rt.enforce({rule:"setTracking",rules:r,units:p,campaign:t,campaigns:n,state:o}));let d=o?Us(p,o):p;d=d.map(C=>_t.set({campaign:t,unit:C,state:o,rules:r}));let m=Wr.filter(e);return(m.length?m:d).sort(om)},Vr=({campaign:e,campaigns:t,state:r})=>(Jr=Ws({type:$r,state:r,campaign:e,campaigns:t}),Jr);Hs.exports={nullCampaign:Br,resolveCampaign:um,overrideCampaign:am,getCurrentCampaign:sm,resolveUnit:lm,resolveUnits:Ws,overrideUnits:cm,resolveModules:Hr,resolveRules:Vr,getCurrentRules:im}});var jt=w((ix,zs)=>{a();c();u();l();var Vs=["BasePageMainFooterFiller","ConsumerMarketingUnitThemedWrapper","EventBannerWrapper","InContentWrapper","PaywallBarWrapper","PersistentBottomWrapper","PersistentTopWrapper","ad--aside","ad--footer","ad--hero","ad--in-content","ad--mid-content","ad--out-of-page","ad--rail","ad-stickyhero","ad-stickyhero--standard","cm-footer","cm-footer-container","cm-footer__failsafe","cm-footer__wrapper","cm-hero-wrapper","consumer-marketing-unit--article-mid-content","consumer-marketing-unit--cm-footer","consumer-marketing-unit--display","consumer-marketing-unit--display-hero","consumer-marketing-unit--display-rail","journey-template--cm_footer","journey-template--footer","journey-template--in-content","journey-unit","journey-unit__container","paywall","paywall-bar","paywall-bar--expanded","paywall-bar--visible","paywall-bar-failsafe","paywall-bar__consumer-marketing-unit","paywall-modal","paywall-registration-gate","paywall-registration-gate-container","persistent-bottom","persistent-top","ticker-view","ticker-wrapper"],Dt={},dm=e=>{Dt[e]=Dt[e]||Math.random().toString(26).substr(2,12).replace(/\d+/g,"")},Gs=e=>Dt[e]||e,pm=e=>Vs.reduce((t,r)=>t.match(r)&&!t.match(new RegExp(`[a-zA-Z_-]${r}`))&&!t.match(new RegExp(`${r}[a-zA-Z_-]`))?t.replace(r,Gs(r)):t,e),fm=e=>Array.from(document.querySelectorAll(`[class*="${e}"]`)),mm=e=>{let{display:t,visibility:r,opacity:n,filter:o}=window.getComputedStyle(e);return t!=="none"&&r!=="hidden"&&n!==0&&o!=="opacity(0)"},ym=e=>!mm(e),hm=e=>{let t=window.getComputedStyle(e);return delete t.display,delete t.visibility,delete t.opacity,delete t.filter,t},gm=e=>t=>{t.style=hm(t),t.classList.remove(e),Array.from(t.classList).filter(r=>r.includes(e)).forEach(r=>t.classList.remove(r)),dm(e),t.classList.add(Gs(e))},vm=e=>fm(e).filter(ym).forEach(gm(e)),wm=()=>Vs.forEach(vm);zs.exports={execute:wm,selectorFor:pm,replacementClasses:Dt}});var Ys=w((dx,Ks)=>{a();c();u();l();var bm=jt(),qm=e=>document.querySelector(e)||document.querySelector(bm.selectorFor(e)),Sm=e=>{let t=()=>!e.match(/\s/),r=()=>qm(`.${e} .journey-unit`);return{isSupported:t,locateElement:r,isElementPresent:()=>!!r(e),createElement:()=>{}}};Ks.exports={existing:Sm}});var Zs=w((hx,Qs)=>{a();c();u();l();var Em=(e,t)=>console.warn(e);Qs.exports={log:Em}});var ei=w((qx,Xs)=>{a();c();u();l();var{log:xm}=Zs(),km=jt(),Gr=e=>document.querySelector(e)||document.querySelector(km.selectorFor(e)),Tm=e=>{let[t,r]=e.split(">").map(d=>d.trim()),n=d=>`[data-journey-hook="${d}"]`;return{isSupported:()=>e.includes(">")&&e.split(">").length==2,locateElement:()=>Gr(`${n(t)} .${r} .journey-unit`),isElementPresent:()=>!!Gr(n(t)),createElement:()=>{let d=Gr(n(t));if(!d){xm(`Element with data-journey-hook="${t}" was not found in DOM`);return}let m=document.createElement("div");m.className=r,d.append(m);let x=document.createElement("div");return x.className="journey-unit",m.append(x),x}}};Xs.exports={injected:Tm}});var zr=w((Tx,ti)=>{a();c();u();l();var{existing:Am}=Ys(),{injected:Cm}=ei(),Pm=[Am,Cm],Fm=e=>{let t=Pm.find(r=>r(e).isSupported());if(!!t)return t(e)};ti.exports={containerFor:Fm}});var ii=w((Nx,si)=>{a();c();u();l();var Nm=At(),Kr=ee(),ri=It(),Om=zr(),_m=({window:e,origin:t,id:r})=>e.postMessage({type:"Journey",action:"pong",params:{id:r}},t),Rm=e=>{let r=Om.containerFor(e.slot).locateElement();r&&r.scrollIntoView({block:"center"})},Im=({unit:e,campaign:t})=>{Nm.add(()=>{[{key:"payment.form",target:"payment"},{key:"user.isEntitled",target:"entitled"},{key:"user.isAuthenticated",target:"authenticated"}].forEach(({key:r,target:n})=>{let o=e.targeting[n];o===void 0&&(o=t.targeting[n]),o!==void 0&&Kr.emitEvent({id:"journey.client.state.update",payload:{key:r,value:o}})}),Kr.emitEvent({id:"journey.client.state.update",payload:{key:"payment.groupsToRender",value:["ads","consumer-marketing","paywall","subs-cta","subscription-workflow"]}}),ri.overrideUnits([e]),ri.overrideCampaign(t),Kr.emitJourneyStateIsUpdated(),Rm(e)})},Dm=({source:e,origin:t,id:r})=>_m({window:e,origin:t,id:r}),ni={renderUnit:Im,ping:Dm},jm=["https://interfaces.conde.io","https://stag-interfaces.conde.io","http://localhost:8080"],oi=e=>{let{origin:t}=e;if(!e||!e.data||!jm.includes(t))return;let{source:r,data:{type:n,action:o,params:i}}=e,s=ni[o];n!=="Journey"||!s||s({source:r,origin:t,...i})},Um=()=>{window.addEventListener("message",oi,!1)};si.exports={actions:ni,receiveMessage:oi,initialize:Um}});var Lt=w((Dx,di)=>{a();c();u();l();var ai,ci=[{name:"iOS",pattern:/(iPhone|iPad|iPod)/i},{name:"Android",pattern:/Android/i}],ui,Lm=/Googlebot|AdsBot-Google|Mediapartners|DuckDuckBot|bingbot|Slurp|ia_archiver|facebot|YandexBot/i,Yr,li=[{name:"desktop",query:"screen and (min-width: 1024px)"},{name:"tablet",query:"screen and (min-width: 768px) and (max-width: 1023px)"},{name:"mobile",query:"screen and (max-width: 767px)"}],Mm=({userAgent:e=window.navigator.userAgent}={})=>{ui=Lm.test(e),ci.forEach(({name:t,pattern:r})=>{e.match(r)&&(ai=t)}),li.forEach(({name:t,query:r})=>{if(!window.matchMedia)return;let n=window.matchMedia(r);if(!n)return;n.matches&&(Yr=t);let o=({matches:i})=>{i&&(Yr=t)};n.addEventListener&&n.addEventListener("change",o)})},Ut=()=>({os:{name:ai},viewport:Yr,isWebCrawler:ui});di.exports={initialize:Mm,details:Ut,viewports:li,operatingSystems:ci,get viewport(){return Ut().viewport},get os(){return Ut().os},get isWebCrawler(){return Ut().isWebCrawler}}});var pe=w((Jx,pi)=>{a();c();u();l();var Jm=({plus:e=0,minus:t=0,date:r=new Date}={})=>{let n=new Date;return n.setTime(r.getTime()+e*1e3-t*1e3),n},$m=({dateString:e,timestamp:t})=>new Date(e||t);pi.exports={now:Jm,from:$m,oneYearInSeconds:31557600}});var Y=w((Vx,mi)=>{a();c();u();l();var{now:Bm}=pe(),Le=document,Wm=["localhost","0.0.0.0","127.0.0.1"],fi=e=>{let t=e.hostname;return!e||Wm.includes(t)||t.match(/^local\./)?null:t.match(/^(www|stag|stag2|stg)\./)?t.split(".").slice(1).join("."):t};function Hm(e){let t=Le.cookie;if(!t||!t.length||!e)return;let r=t.split(";").map(o=>o.split("=").map(i=>i.trim())),[,n]=r.find(([o])=>o===e)||[];return n}function Vm(e,t,r){let n=fi(Le.location);Le.cookie=`${e}=${t};`+(n?`domain=${n};secure;samesite=none;`:"")+(r?`expires=${Bm({plus:r}).toUTCString()};`:"")+"path=/;"}function Gm(e){let t=fi(Le.location);Le.cookie=`${e}=;`+(t?`domain=${t};secure;samesite=none;`:"")+"expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;"}mi.exports={read:Hm,write:Vm,remove:Gm,setDocument:e=>Le=e}});var hi=w((Qx,yi)=>{a();c();u();l();var Mt=dt();function zm({payload:e,signature:t=""}){let r={alg:"NONE",typ:"JWT",ver:1},n,o;try{n=JSON.stringify(r),o=JSON.stringify(e)}catch{return Promise.reject("Cannot JSON encode the JWT")}let i,s;try{i=Mt.encode(n),s=Mt.encode(o)}catch{return Promise.reject("Cannot base64url encode the JWT")}return Promise.resolve(`${i}.${s}.${t}`)}function Km({token:e}){if(!e){console.warn("Cannot decode a missing JWT token");return}let[,t]=e.split(".");if(!t){console.warn("Cannot decode an improperly formatted JWT token");return}let r;try{r=Mt.decode(t)}catch{console.warn("Cannot base64 decode the JWT token");return}let n;try{n=JSON.parse(r)}catch{console.warn("Cannot parse the JWT token as JSON");return}return n}function Ym({token:e,signature:t}){if(!e)return Promise.reject("Cannot verify a missing JWT token");if(!t)return Promise.reject("Cannot verify without a signature");let[,,r]=e.split(".");return r?Promise.resolve(r===t):Promise.reject("Cannot verify an improperly formatted JWT token")}function Qm({token:e}){if(!e)return!1;let[t]=e.split(".");if(!t)return!1;try{let r=Mt.decode(t),n=JSON.parse(r),{alg:o,typ:i,ver:s}=n;return o==="NONE"&&i==="JWT"&&s===1}catch{return!1}}var Zm=e=>!!e.signature;yi.exports={name:"NONE",encode:zm,decode:Km,verify:Ym,supports:Qm,available:Zm}});var ie=w((rk,vi)=>{a();c();u();l();var Xm=hi(),ey=pr(),gi=[ey,Xm],ty=e=>gi.find(t=>t.available(e)),ry=({token:e})=>gi.find(t=>t.supports({token:e}));vi.exports={codecFor:ry,bestAvailableCodec:ty}});var Me=w((ak,bi)=>{a();c();u();l();var Qr=Y(),{codecFor:ny}=ie(),wi=e=>({sample:"pay_ent_smp",sub:"pay_ent_sub",pass:"pay_ent_pass",asmp:"pay_ent_asmp",usmp:"pay_ent_usmp",msmp:"pay_ent_msmp",fsmp:"pay_ent_fsmp",sess:"pay_ent_sess",tmp:"pay_ent_tmp",paid_ref:"pay_paid_ref",access:"CN_access"})[e],te=e=>{let t=Qr.read(e);if(!t)return;let r=ny({token:t}).decode({token:t});if(!!r)return r},oy=e=>{let t=wi(e);!Qr.read(t)||Qr.write(t,"")},sy=()=>({sample:te("pay_ent_smp"),sub:te("pay_ent_sub"),pass:te("pay_ent_pass"),asmp:te("pay_ent_asmp"),usmp:te("pay_ent_usmp"),msmp:te("pay_ent_msmp"),fsmp:te("pay_ent_fsmp"),sess:te("pay_ent_sess"),tmp:te("pay_ent_tmp"),paid_ref:te("pay_paid_ref"),access:te("CN_access")}),iy=e=>te(wi(e));bi.exports={payload:te,payloadFor:iy,remove:oy,tokens:sy}});var Si=w((pk,qi)=>{a();c();u();l();var ay=Y(),{codecFor:cy}=ie(),uy=(e,t)=>t&&t.some(r=>e.includes(r)),ly=({acceptableScopes:e=[]})=>{let t="pay_ent_pass",r=ay.read(t);if(!r)return;let n=cy({token:r}).decode({token:r});if(!n||e.length&&!uy(e,n.scopes))return;let o=n.scopes.find(i=>e.includes(i));return()=>Promise.resolve({scope:o})};qi.exports={pass:ly}});var xi=w((gk,Ei)=>{a();c();u();l();var dy=Y(),py=()=>{let e="pay_ent_sub";if(!!dy.read(e))return()=>Promise.resolve()};Ei.exports={sub:py}});var Ai=w((Sk,Ti)=>{a();c();u();l();var ki=Y(),{codecFor:fy,bestAvailableCodec:my}=ie(),{oneYearInSeconds:yy}=pe(),{log:hy}=K(),gy=e=>typeof e=="number",vy=e=>!e||!gy(e.cnt)||!Array.isArray(e.urls),wy=(e,t)=>!t.urls.includes(e),by=e=>e.cnt||0,qy=e=>by(e)>=e.max,Sy=(e,t)=>{t.urls.length<t.max&&t.urls.push(e),t.cnt+=1,t.uat=Date.now()},Ey=({signature:e,key:t,props:{max:r=4}})=>{let n=window.location.pathname,o="pay_ent_smp",i=ki.read(o),s;if(i&&(s=fy({token:i}).decode({token:i,signature:e})),vy(s)){let p=Date.now();s={cnt:0,max:r,urls:[],iat:p,uat:p,iss:"journey"}}if(r!=0){if(wy(n,s)){if(qy(s))return;Sy(n,s)}return()=>{let p=my({signature:e,key:t});if(!!p)return p.encode({payload:s,signature:e,key:t}).then(d=>{d!==i&&ki.write(o,d,yy)}).catch(d=>{hy("** Journey error: Token Encoding **",d)})}}};Ti.exports={sample:Ey}});var Fi=w((Ak,Pi)=>{a();c();u();l();var Ci=Y(),{codecFor:xy,bestAvailableCodec:ky}=ie(),{oneYearInSeconds:Ty}=pe(),{log:Ay}=K(),Cy=e=>!e||typeof e.cnts!="object"||!Array.isArray(e.urls),Py=(e,t)=>!t.urls.includes(e),Fy=(e,t)=>e.cnts[t]||0,Ny=(e,t,r)=>Fy(e,t)>=r,Oy=(e,t,r)=>{t.urls.push(e),t.cnts[r]=(t.cnts[r]||0)+1,t.uat=Date.now()},_y=({signature:e,key:t,props:{counter:r="all",max:n=4}})=>{if(n==0)return;let o=window.location.pathname,i="pay_ent_msmp",s=Ci.read(i),p;if(s&&(p=xy({token:s}).decode({token:s,signature:e})),Cy(p)){let d=Date.now();p={cnts:{},urls:[],iat:d,uat:d,iss:"journey"}}if(Py(o,p)){if(Ny(p,r,n))return;Oy(o,p,r)}return()=>{let d=ky({signature:e,key:t});if(!!d)return d.encode({payload:p,signature:e,key:t}).then(m=>{m!==s&&Ci.write(i,m,Ty)}).catch(m=>{Ay("** Journey error: Token Encoding **",m)})}};Pi.exports={msmp:_y}});var Oi=w((Ok,Ni)=>{a();c();u();l();var Ry=()=>()=>Promise.resolve();Ni.exports={free:Ry}});var Ri=w((jk,_i)=>{a();c();u();l();var Iy=Y(),{codecFor:Dy}=ie(),jy=(e,t)=>t&&t.some(r=>e.includes(r)),Uy=({acceptableScopes:e=[]})=>{let t="pay_ent_sess",r=Iy.read(t);if(!r)return;let n=Dy({token:r}).decode({token:r});if(!(!n||e.length&&!jy(e,n.scopes)))return()=>Promise.resolve()};_i.exports={sess:Uy}});var Di=w(($k,Ii)=>{a();c();u();l();var Ly=Y(),{codecFor:My}=ie(),Jy=({receipts:e=[]})=>{let t="CN_access",r=Ly.read(t);if(!r)return;let n=My({token:r}).decode({token:r});if(!(!n||!e.find(i=>{let{provider:s="",product:p=""}=i;return!n.fct||!p?void 0:s==="*"?Object.values(n.fct).flat().includes(p):(n.fct[s]||[]).includes(p)})))return()=>Promise.resolve()};Ii.exports={access:Jy}});var Zr=w((Gk,ji)=>{a();c();u();l();var{log:$y}=K(),By=async({client:e,clientCredentials:t,serviceURL:r,initialClientState:n,nextState:o,fingerprintID:i})=>{var q;let s=r,p=3,d=0,m=2e3,x={fid:i,brand:"pitchfork",currState:{visitorState:n||{},urls:[]},nextState:{visitorState:o,urls:[]}},C={method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:`Basic ${t}`,"user-agent":"Journey/1.0.0"},credentials:"same-origin",cache:"no-cache",body:JSON.stringify(x)};for(;d<p;){let S,F;try{return S=await e(s,C),F=await S.text(),{request:x,response:JSON.parse(F)}}catch(O){if($y("Failed visitiq reconcile request",O,{request:{body:x,url:s},response:{"access-control-allow-origin":((q=S==null?void 0:S.headers)==null?void 0:q.get)&&S.headers.get("access-control-allow-origin"),body:F}}),d+=1,d>=p)throw O;console.warn(`** reconcile attempt ${d} failed **`,O),await new Promise(_=>setTimeout(_,m)),m*=2}}};ji.exports={reconcile:By}});var en=w((Zk,Ui)=>{a();c();u();l();var Wy=K(),Xr=Promise.resolve(),Hy=(e,t="queued")=>{Xr=Xr.then(e).catch(r=>{Wy.log(`error in [${t}] job:`,r)})},Vy=()=>Xr;Ui.exports={add:Hy,complete:Vy}});var Vi=w((nT,Hi)=>{a();c();u();l();var tn=Y(),{codecFor:Gy,bestAvailableCodec:rn}=ie(),{oneYearInSeconds:Wi}=pe(),{log:tt}=K(),zy=z(),{deepClone:Ky}=V(),Yy=Zr(),Qy=ee(),{get:Li,pick:Mi}=V(),Ji=en(),Zy=e=>!e||typeof e.cnts!="object"||!Array.isArray(e.urls),Xy=(e,t)=>!t.urls.includes(e),eh=(e,t,r)=>e.cnts[t]>=r,th=(e,t,r)=>{t.urls.push(e),t.cnts[r]=(t.cnts[r]||0)+1,t.uat=Date.now()},rh={newRecord:"NEW RECORD",matched:"MATCHED",unmatched:"CONFLICT"},$i=()=>new Promise((e,t)=>{let r=Qy.whenFingerprintIDEventOccurs(({payload:{fingerprintID:n}={}}={})=>{n&&(n.startsWith("ERROR")&&t(n),e(n),r())})}),Bi=({clientCredentials:e,serviceURL:t,initialClientState:r,nextState:n,fingerprintID:o,signature:i,key:s,tokenName:p,paymentNegotiation:d})=>Yy.reconcile({client:window.fetch,clientCredentials:e,serviceURL:t,initialClientState:r,nextState:n,fingerprintID:o}).then(({request:m,response:x})=>{if(!x||x.status!==rh.unmatched||!Li(x,"currState.visitorState")||!rn({signature:i,key:s}))return;let C=Li(x,"currState.visitorState"),q=rn({signature:i,key:s});return zy.add({type:"visitIQ",id:"CONFLICT",request:Mi(m,["fid","currState","nextState"]),response:Mi(x,["currState"])}),q.encode({payload:C,signature:i,key:s}).then(S=>{tn.write(p,S,Wi),d()}).catch(S=>{tt("** Journey error: Token Encoding **",S)})}).catch(m=>{tt("** Journey error: visitiq reconcile request **",m)}),nh=({signature:e,key:t,props:{counter:r="all",max:n=4},fsmp:{clientCredentials:o,serviceURL:i,paymentNegotiation:s}})=>{if(n==0)return;let p=window.location.pathname,d="pay_ent_fsmp",m=tn.read(d),x,C;if(m&&(x=Gy({token:m}).decode({token:m,signature:e}),C=Ky(x)),Zy(x)){let q=Date.now();x={cnts:{},urls:[],iat:q,uat:q,iss:"journey"},C=void 0}if(Xy(p,x)){if(eh(x,r,n)){$i().then(q=>{Ji.add(()=>Bi({clientCredentials:o,serviceURL:i,initialClientState:C,nextState:x,fingerprintID:q,signature:e,key:t,tokenName:d,paymentNegotiation:s}))}).catch(q=>{tt("** FingerprintID error: **",q)});return}th(p,x,r)}return async()=>{let q=rn({signature:e,key:t});if(!!q)return q.encode({payload:x,signature:e,key:t}).then(S=>{S!==m&&tn.write(d,S,Wi),$i().then(F=>{Ji.add(()=>Bi({clientCredentials:o,serviceURL:i,initialClientState:C,nextState:x,fingerprintID:F,signature:e,key:t,tokenName:d,paymentNegotiation:s}))}).catch(F=>{tt("** FingerprintID error: **",F)})}).catch(S=>{tt("** Journey error: Token Encoding **",S)})}};Hi.exports={fsmp:nh}});var nn=w((cT,Gi)=>{a();c();u();l();var{pass:oh}=Si(),{sub:sh}=xi(),{sample:ih}=Ai(),{msmp:ah}=Fi(),{free:ch}=Oi(),{sess:uh}=Ri(),{access:lh}=Di(),{fsmp:dh}=Vi();Gi.exports={pass:oh,sub:sh,sample:ih,msmp:ah,fsmp:dh,free:ch,sess:uh,access:lh}});var Ki=w((fT,zi)=>{a();c();u();l();zi.exports=y});var on=w((vT,Zi)=>{a();c();u();l();var ph=Me(),Je=nn(),Yi=Ki(),Qi=["sample","sub","pass","sess","asmp","usmp","msmp","fsmp","tmp","paid_ref","access"],fh=({payment:e={}})=>{let t=ph.tokens(),r=o=>t[o]||e[o],n={};return Qi.filter(o=>r(o)).forEach(o=>n[o]=r(o)),n},mh=({user:e={},payment:t={},configuration:r=Yi.configuration||{}})=>{var d,m,x;let n=((d=r.payment)==null?void 0:d.acceptableForms)||[],o=n.includes("sub"),i=n.includes("pass"),s=((m=r.payment)==null?void 0:m.acceptableScopes)||[],p=((x=r.access)==null?void 0:x.receipts)||[];return!!(e.isEntitled||Je.access({receipts:p})||o&&Je.sub()||i&&Je.pass({acceptableScopes:s})||o&&t.form==="sub"||i&&t.form==="pass"&&s.includes(t.scope))},yh=({user:e={},payment:t={},configuration:r=Yi.configuration||{}})=>{var m,x,C;let n=((m=r.payment)==null?void 0:m.acceptableForms)||[],o=n.includes("sub"),i=n.includes("pass"),s=((x=r.payment)==null?void 0:x.acceptableScopes)||[],p=((C=r.access)==null?void 0:C.receipts)||[],d=[];return e.isEntitled&&d.push("verso"),Je.access({receipts:p})&&d.push("access token"),o&&Je.sub()&&d.push("sub token"),i&&Je.pass({acceptableScopes:s})&&d.push("pass token"),o&&t.form==="sub"&&d.push("sub payment"),i&&t.form==="pass"&&s.includes(t.scope)&&d.push("pass payment"),d};Zi.exports={determine:mh,providers:yh,state:fh,knownForms:Qi}});var ea=w(sn=>{a();c();u();l();var Xi;(function(e){typeof DO_NOT_EXPORT_CRC>"u"?typeof sn=="object"?e(sn):typeof define=="function"&&define.amd?define(function(){var t={};return e(t),t}):e(Xi={}):e(Xi={})})(function(e){e.version="1.2.2";function t(){for(var P=0,$=new Array(256),k=0;k!=256;++k)P=k,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,$[k]=P;return typeof Int32Array<"u"?new Int32Array($):$}var r=t();function n(P){var $=0,k=0,b=0,E=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(b=0;b!=256;++b)E[b]=P[b];for(b=0;b!=256;++b)for(k=P[b],$=256+b;$<4096;$+=256)k=E[$]=k>>>8^P[k&255];var T=[];for(b=1;b!=16;++b)T[b-1]=typeof Int32Array<"u"?E.subarray(b*256,b*256+256):E.slice(b*256,b*256+256);return T}var o=n(r),i=o[0],s=o[1],p=o[2],d=o[3],m=o[4],x=o[5],C=o[6],q=o[7],S=o[8],F=o[9],O=o[10],_=o[11],I=o[12],D=o[13],R=o[14];function M(P,$){for(var k=$^-1,b=0,E=P.length;b<E;)k=k>>>8^r[(k^P.charCodeAt(b++))&255];return~k}function J(P,$){for(var k=$^-1,b=P.length-15,E=0;E<b;)k=R[P[E++]^k&255]^D[P[E++]^k>>8&255]^I[P[E++]^k>>16&255]^_[P[E++]^k>>>24]^O[P[E++]]^F[P[E++]]^S[P[E++]]^q[P[E++]]^C[P[E++]]^x[P[E++]]^m[P[E++]]^d[P[E++]]^p[P[E++]]^s[P[E++]]^i[P[E++]]^r[P[E++]];for(b+=15;E<b;)k=k>>>8^r[(k^P[E++])&255];return~k}function G(P,$){for(var k=$^-1,b=0,E=P.length,T=0,j=0;b<E;)T=P.charCodeAt(b++),T<128?k=k>>>8^r[(k^T)&255]:T<2048?(k=k>>>8^r[(k^(192|T>>6&31))&255],k=k>>>8^r[(k^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,j=P.charCodeAt(b++)&1023,k=k>>>8^r[(k^(240|T>>8&7))&255],k=k>>>8^r[(k^(128|T>>2&63))&255],k=k>>>8^r[(k^(128|j>>6&15|(T&3)<<4))&255],k=k>>>8^r[(k^(128|j&63))&255]):(k=k>>>8^r[(k^(224|T>>12&15))&255],k=k>>>8^r[(k^(128|T>>6&63))&255],k=k>>>8^r[(k^(128|T&63))&255]);return~k}e.table=r,e.bstr=M,e.buf=J,e.str=G})});var ra=w((CT,ta)=>{a();c();u();l();var hh=ea(),gh=e=>{if(!e)return 100;try{let r=hh.str(e);return Math.abs(r%100)+1}catch(r){return console.error("getBucket",r),100}};ta.exports={getBucketNumber:gh}});var oa=w((_T,na)=>{a();c();u();l();var an=Y(),vh=yt(),{oneYearInSeconds:wh}=pe(),{getBucketNumber:bh}=ra(),cn="CN_journey_bucket",qh=wh,Ee=parseInt(an.read(cn));if(!Ee||Ee<0||Ee>100){Ee=vh.id%100+1;let e=an.read("CN_xid");e&&(Ee=bh(e)),an.write(cn,Ee.toString(),qh)}na.exports={name:cn,value:Ee}});var Jt=w((UT,sa)=>{a();c();u();l();var un=Y(),Sh=2*365*24*60*60,ln="CN_segments",Eh=()=>{let e=un.read(ln);return e?e.split("|").map(t=>t.trim()):[]},xh=({adds:e=[],removes:t=[]})=>{let r=un.read(ln)||"",n=e.map(s=>s.trim()),o=t.map(s=>s.trim()),i=[...new Set(r.split("|").map(s=>s.trim()).filter(s=>!!s&&!o.includes(s)).concat(n))].join("|");r!==i&&un.write(ln,i,Sh)};sa.exports={getSegments:Eh,setSegments:xh}});var ca=w((BT,aa)=>{a();c();u();l();var ia=Y(),{getSegments:kh}=Jt(),Th=e=>({"the-new-yorker":"CRMNYR062419","vanity-fair":"CRMVYF092120",wired:"CRMWIR092120"})[e],Ah="ref.nl.sub",Ch=({brandSlug:e="pitchfork",location:t=window.location}={})=>new URLSearchParams(t.search).get("mbid")===Th(e)||(kh()||[]).includes(Ah)?!0:!!ia.read("pay_ent_tmp"),Ph=(e,t=window.location)=>new URLSearchParams(t.search).get(e)||"",Fh=e=>!!Ph("utm_paidredirect",e).match(/^Paid_Soc/i)||!!ia.read("pay_paid_ref");aa.exports={paid:Fh,isNewsletterCampaign:Ch}});var la=w((zT,ua)=>{a();c();u();l();var Nh=({isPreview:e,tags:t})=>e?!1:!t||!t.includes("paywall-exclude")&&!t.includes("exclude-reg-gate");ua.exports={isPaywalled:Nh}});var ya=w((XT,ma)=>{a();c();u();l();var{zipObject:Oh}=V(),da=e=>({day:"Date",hour:"Hours",month:"Month",year:"FullYear"})[e]||"Date",fa=(e,{count:t,unit:r})=>{let n=new Date(e),o="setUTC"+da(r),i="getUTC"+da(r);return n[o](n[i]()+parseInt(t)),n},dn=(e,{count:t,unit:r})=>Date.parse(fa(e,{count:t,unit:r})),pa=({tags:e=[]})=>e.map(t=>t.match(/paywall-sample-for-([0-9]+)-(hour|day|month|year)/)).filter(t=>!!t).map(t=>t&&Oh([null,"count","unit"],t)).sort((t,r)=>dn(Date.now(),r)-dn(Date.now(),t)).shift();function _h(e){if(!pa(e))return!0;let{count:t,unit:r}=pa(e),n=dn(e.publishDate,{count:t,unit:r});return Date.now()<n}ma.exports={addTime:fa,contentCanBeSampled:_h}});var pn=w((oA,ha)=>{a();c();u();l();var{isPaywalled:Rh}=la(),{contentCanBeSampled:Ih}=ya();ha.exports={isPaywalled:Rh,contentCanBeSampled:Ih}});var fn=w((uA,ga)=>{a();c();u();l();var Dh=()=>{var r,n,o,i,s,p,d,m,x;let e=window.__PRELOADED_STATE__;if(!e)return{};let t=(r=e==null?void 0:e.transformed)==null?void 0:r.payment;return{...(n=t==null?void 0:t.negotiation)==null?void 0:n.content,tags:[...((i=(o=t==null?void 0:t.negotiation)==null?void 0:o.content)==null?void 0:i.tags)||[],...((p=(s=t==null?void 0:t.negotiation)==null?void 0:s.content)==null?void 0:p.functionalTags)||[],...((x=(m=(d=window.cns)==null?void 0:d.pageContext)==null?void 0:m.keywords)==null?void 0:x.tags)||[]]}};ga.exports={getCurrentContent:Dh}});var mn=w((mA,va)=>{a();c();u();l();var jh=({campaign:e,...t})=>{!Array.isArray(window.dataLayer)||window.dataLayer.push({...t,campaign:{key:e.key,name:e.name}})};va.exports={emitAnalyticsEvent:jh}});var hn=w((wA,Sa)=>{a();c();u();l();var Uh=ee(),Lh=nn(),wa=e=>Lh[e],Mh="",{isPaywalled:$e}=pn(),{getCurrentContent:Jh}=fn(),{emitAnalyticsEvent:$h}=mn(),{log:Bh}=K(),rt,yn,ba,Wh=e=>({access:()=>!0,sub:()=>!0,tmp:()=>!0,pass:()=>!0,sess:()=>!0,asmp:t=>$e(t),usmp:t=>$e(t),sample:t=>$e(t),msmp:t=>$e(t),fsmp:t=>$e(t),free:t=>!$e(t)})[e],qa=e=>{let{paymentForms:t,acceptableScopes:r,signature:n,key:o,props:i,receipts:s,state:p,campaign:d={},reset:m=!1,fsmp:x={clientCredentials:"",serviceURL:""}}=e;m&&(rt=void 0,yn=void 0),x.paymentNegotiation=()=>qa({...e,reset:!0});let C=Jh(),q=J=>wa(J)({acceptableScopes:r,signature:n,key:o,props:i,receipts:s,state:p,fsmp:x}),S=J=>q(J)(),F=J=>wa(J),O=J=>q(J),_=J=>Wh(J)(C),D=t.concat("free").filter(F).filter(O).find(_)||Mh;if(rt===D)return;let R=({scope:J}={})=>{rt=D,yn=J,ba=(i||{}).counter,$h({event:"user-payment-updated",user:{paymentMethod:`${D}${J?"-"+J:""}`},campaign:d}),Uh.emitJourneyStateIsUpdated({source:"payment-negotiation",state:{payment:D,scope:J}})};return(D?S(D):Promise.resolve()).then(R).catch(J=>{Bh("** Journey error: Payment acceptance **",J)})};Sa.exports={getAcceptedPaymentForm:()=>rt,getAcceptedPaymentScope:()=>yn,getCounterName:()=>ba,resetAcceptedPaymentForm:()=>rt=void 0,paymentNegotiation:qa}});var Bt=w((xA,Ca)=>{a();c();u();l();var $t=ee(),Ea=br(),Hh=Lt(),gn=on(),xa=Y(),Vh=oa(),ka=ca(),vn=hn(),{contentCanBeSampled:Gh,isPaywalled:zh}=pn(),{disabledUnitTypes:Kh}=Lr(),{getSegments:Yh}=Jt(),{getCurrentContent:Qh}=fn(),{zipObject:Zh}=V(),Xh=yt(),Ta={},eg=e=>Ta=e,Aa=e=>{var F,O,_,I,D;let t=Ea.consumer?Ea.consumer.snapshot("adblock.v1.presence"):void 0,r=vn.getAcceptedPaymentForm(),n=vn.getAcceptedPaymentScope(),o=vn.getCounterName(),i=r!==void 0?r:(F=e.payment)==null?void 0:F.form,s=n!==void 0?n:(O=e.payment)==null?void 0:O.scope,p=Yh(),d=Qh(),m=new URLSearchParams(window.top.location.search),x=R=>Zh(["key","value"],R),C=Array.from(m).map(x),q=R=>{if(R.match(/true|false/))return Boolean(R);if(R.match(/^".*"$/))return R.replace(/"/g,"");let M=parseInt(R);return isNaN(M)?R:M.toString()===R?M:R},S=Object.fromEntries(Array.from(m).filter(([R])=>R.startsWith("set-journey-")).map(([R,M])=>[R.replace("set-journey-",""),q(M)]));return{pageviewId:Xh.id,xid:xa.read("CN_xid"),url:window.document.location.toString(),pathname:window.document.location.pathname,queryParameters:C,redirectURL:window.top.location.origin+window.top.location.pathname,bucket:Vh.value,entitled:gn.determine(e),entitledBy:gn.providers(e),...gn.state(e),counterName:o,isAuthenticated:(_=e.user)==null?void 0:_.isAuthenticated,segments:p,permutiveSegments:(I=e.segmentation)==null?void 0:I.permutiveSegments,payment:i,isNewsletterCampaign:ka.isNewsletterCampaign(),scope:s,width:window.innerWidth,country:xa.read("CN_geo_country_code"),consumer:"verso",adblock:t,incognito:$t.hasIncognitoBeenDetected(),roadblock:$t.hasRoadblockBeenDetected(),suppressOnRoadblock:!1,paid:ka.paid(),segmentsUpdated:$t.haveSegmentsBeenUpdated(),...d,channel:d.channelSlug,subChannel:d.subChannelSlug,contentIsPaywalled:zh(d),contentCanBeSampled:Gh(d),disabledUnitTypes:Kh(d.tags),contentAgeInMilliseconds:Date.now()-Date.parse(d.publishDate),device:Hh.details(),paymentBypassed:(D=e.payment)==null?void 0:D.bypass,fingerprintID:m.get("fingerprintID")||$t.payloadOfFingerprintIDEvent().fingerprintID,...Ta,...S}},tg=()=>{var t,r;let e=((r=(t=window.journeyDataGateway)==null?void 0:t.fetch)==null?void 0:r.call(t))||{};return Aa(e)};Ca.exports={buildPageState:Aa,getCurrentState:tg,overrideCurrentState:eg}});var Pa=w((PA,wn)=>{a();c();u();l();var bn=bn||{};typeof wn=="object"&&(wn.exports=bn);(function(e,t){"use strict";var r={accesskey:"accessKey",bgcolor:"bgColor",cellpadding:"cellPadding",cellspacing:"cellSpacing",checked:"defaultChecked",class:"className",colspan:"colSpan",contenteditable:"contentEditable",defaultchecked:"defaultChecked",for:"htmlFor",formnovalidate:"formNoValidate",hidefocus:"hideFocus",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",tabindex:"tabIndex",usemap:"useMap",willvalidate:"willValidate"},n={enctype:"encoding",onscroll:"DOMMouseScroll"},o={autocapitalize:1,autocomplete:1,autocorrect:1},i={async:1,autofocus:1,checked:1,defaultchecked:1,defer:1,disabled:1,formnovalidate:1,hidden:1,indeterminate:1,ismap:1,multiple:1,novalidate:1,readonly:1,required:1,spellcheck:1,willvalidate:1},s=/^[\r\n]+/,p=/[\r\n]+$/,d=0,m=1,x=2,C=3,q=4,S=5;function F(f){this.value=f}F.prototype.toString=function(){return this.value},e.raw=function(f){return new F(f)};var O=e.isRaw=function(f){return f instanceof F},_=Array.isArray||function(f){return f instanceof Array};function I(f){return typeof f=="function"}function D(f){switch(typeof f){case"object":return f?_(f)?x:O(f)?S:f instanceof Date?q:C:d;case"function":return m;case"undefined":return d;default:return q}}var R=function(f){if(f){if(f.charAt(0)==="!")return t.createComment(f==="!"?"":f.substr(1)+" ")}else{if(t.createDocumentFragment)return t.createDocumentFragment();f=""}return f.toLowerCase()==="style"&&t.createStyleSheet?t.createStyleSheet():t.createElement(f)},M=function(f,A,U){switch(A.substr(0,2)==="on"&&(A=A.substr(2)),typeof U){case"function":if(f.addEventListener)f.addEventListener(A,U,!1);else if(f.attachEvent&&D(f[A])!==d)f.attachEvent("on"+A,U);else{var N=f["on"+A]||f[A];f["on"+A]=f[A]=I(N)?function(W){return N.call(this,W)!==!1&&U.call(this,W)!==!1}:U}break;case"string":f["on"+A]=new Function("event",U);break}},J=function(f,A){if(A.name&&t.attachEvent&&!f.parentNode)try{var U=R("<"+f.tagName+' name="'+A.name+'">');f.tagName===U.tagName&&(f=U)}catch{}for(var N in A)if(A.hasOwnProperty(N)){var W=A[N],X=D(W);N&&(X===d&&(W="",X=q),N=r[N.toLowerCase()]||N,N==="style"?D(f.style.cssText)!==d?f.style.cssText=W:f.style=W:N.substr(0,2)==="on"?(M(f,N,W),N=n[N],N&&M(f,N,W)):!o[N.toLowerCase()]&&(X!==q||N.charAt(0)==="$"||D(f[N])!==d||D(f[n[N]])!==d)?(f[N]=W,N=n[N],N&&(f[N]=W)):i[N.toLowerCase()]?W&&(f.setAttribute(N,N),N=n[N],N&&f.setAttribute(N,N)):(f.setAttribute(N,W),N=n[N],N&&f.setAttribute(N,W)))}return f},G=function(f,A){if(A){var U=(f.tagName||"").toLowerCase();if(f.nodeType===8)A.nodeType===3&&(f.nodeValue+=A.nodeValue);else if(U==="table"&&f.tBodies){if(!A.tagName){if(A.nodeType===11)for(;A.firstChild;)G(f,A.removeChild(A.firstChild));return}var N=A.tagName.toLowerCase();if(N&&N!=="tbody"&&N!=="thead"){var W=f.tBodies.length>0?f.tBodies[f.tBodies.length-1]:null;W||(W=R(N==="th"?"thead":"tbody"),f.appendChild(W)),W.appendChild(A)}else f.canHaveChildren!==!1&&f.appendChild(A)}else if(U==="style"&&t.createStyleSheet)f.cssText=A;else if(f.canHaveChildren!==!1)f.appendChild(A);else if(U==="object"&&A.tagName&&A.tagName.toLowerCase()==="param"){try{f.appendChild(A)}catch{}try{f.object&&(f.object[A.name]=A.value)}catch{}}}},P=function(f){return!!f&&f.nodeType===3&&(!f.nodeValue||!/\S/.exec(f.nodeValue))},$=function(f,A){f&&f.nodeType===3&&A.exec(f.nodeValue)&&(f.nodeValue=f.nodeValue.replace(A,""))},k=function(f){if(f){for(;P(f.firstChild);)f.removeChild(f.firstChild);for($(f.firstChild,s);P(f.lastChild);)f.removeChild(f.lastChild);$(f.lastChild,p)}},b=function(f){var A=R("div");if(A.innerHTML=""+f,k(A),A.childNodes.length===1)return A.firstChild;for(var U=R("");A.firstChild;)U.appendChild(A.firstChild);return U},E=function(f){return t.createTextNode("["+f+"]")};e.onerror=null;var T=e.patch=function(f,A,U){for(var N=1;N<A.length;N++)_(A[N])||typeof A[N]=="string"?G(f,j(A[N],U)):O(A[N])?G(f,b(A[N].value)):typeof A[N]=="object"&&A[N]!==null&&f.nodeType===1&&(f=J(f,A[N]));return f},j=e.toHTML=function(f,A){try{if(!f)return null;if(typeof f=="string")return t.createTextNode(f);if(O(f))return b(f.value);if(!_(f)||typeof f[0]!="string")throw new SyntaxError("invalid JsonML");var U=f[0];if(!U){for(var N=R(""),W=1;W<f.length;W++)G(N,j(f[W],A));return k(N),N.childNodes.length===1?N.firstChild:N}if(U.toLowerCase()==="style"&&t.createStyleSheet)return T(t.createStyleSheet(),f,A),null;let re=R(U);return U.toLowerCase()==="img"&&(re=R("limg")),re=T(re,f,A),k(re),re&&I(A)?A(re):re}catch(re){try{var X=I(e.onerror)?e.onerror:E;return X(re,f,A)}catch(ir){return t.createTextNode("["+ir+"]")}}};e.toHTMLText=function(f,A){var U=j(f,A);if(U.outerHTML)return U.outerHTML.replace(/<limg/g,"<img").replace(/<\/limg>/g,"");var N=R("div");N.appendChild(U);var W=N.innerHTML;return N.removeChild(U),W}})(bn,document)});var ot=w((RA,Na)=>{a();c();u();l();var Z=ee(),qn=z(),{isAnActionUnit:rg,isAPresentationUnit:ng}=ce(),{pick:me}=V(),Fa=["unit","data.isModalPresent","renderer","executer","function","template","component"],nt=(e,t)=>{let{configuration:r,component:n,data:o,function:i,template:s}=e;return{campaign:me(t,["key","name"]),unit:me(e,["key","name"]),data:o,configuration:r,...ng(e)&&{renderer:n&&n.renderer||"journey"},...rg(e)&&{executer:"journey"},...n&&{component:me(n,["name","variation","renderer"])},...i&&{function:me(i,["name"])},...s&&{template:me(s,["name"])}}},og=e=>qn.add({type:"campaign-resolved",campaign:me(e,["name"])}),sg=(e,t)=>{let r=nt(e,t);Z&&Z.emitJourneyActionIsExecuted(r)},ig=(e,t)=>{let r=nt(e,t);Z&&Z.emitJourneyUnitRenderBegan(r)},ag=(e,t,{emit:r}={emit:!0})=>{let n=nt(e,t);Z&&r&&Z.emitJourneyUnitRenderEnded(n),Z&&r&&Z.emitJourneyUnitIsRendered(n),qn.add({type:"unit-rendered",...me(n,Fa)})},cg=(e,t)=>{let r=nt(e,t);Z&&Z.emitJourneyUnitEmptyBegan(r)},ug=(e,t,{emit:r}={emit:!0})=>{let n=nt(e,t);Z&&r&&Z.emitJourneyUnitEmptyEnded(n),Z&&r&&Z.emitJourneyUnitIsRemoved(n),qn.add({type:"unit-removed",...me(n,Fa)})};Na.exports={campaignResolved:og,actionExecuted:sg,unitRendering:ig,unitRendered:ag,slotEmptying:cg,slotEmptied:ug}});var ke=w((LA,_a)=>{a();c();u();l();var Wt=new Map,xe=new Map,Ht=new Map,Vt=new Map,Gt=new Map,oe=e=>JSON.stringify(e),Oa=e=>Vt.has(oe(e)),lg=e=>{Vt.set(oe(e),!0)},dg=e=>{Vt.delete(oe(e))},pg=(e,t)=>{let{slot:r}=e;if(Oa(r))return!1;let n=oe(r);return xe.set(n,e),Wt.set(n,t),Ht.set(oe(e),r),!0},fg=e=>Ht.has(oe(e)),mg=e=>{let t=oe(e),r=xe.get(t);xe.delete(t),Wt.delete(t),Ht.delete(oe(r))},yg=e=>!xe.has(oe(e)),hg=()=>{xe.clear(),Wt.clear(),Ht.clear(),Vt.clear(),Gt.clear()},gg=e=>(Gt.set(oe(e.data),e),!0),vg=e=>Gt.has(oe(e.data)),wg=e=>xe.get(oe(e));_a.exports={add:pg,isPresent:fg,empty:mg,isEmpty:yg,clear:hg,isLocked:Oa,lock:lg,unlock:dg,addAction:gg,hasExecuted:vg,unitIn:wg,units:()=>Array.from(xe.values()),elements:()=>Array.from(Wt.values()),actions:()=>Array.from(Gt.values())}});var Ia=w((WA,Ra)=>{a();c();u();l();var Kt=(e,t)=>e.replace(t,""),Sn=(e,t)=>e.match(t),zt=(e,t)=>r=>Sn(r,/^\\/)?Kt(r,/\\/):`<${e}>${Kt(r,t)}</${e}>`,bg=e=>t=>Sn(t,/^\\{2}n|\\(?!n)/)?Kt(t,/\\/):e,qg=/\\?(\*\*)(\n|.)*?(\*\*)/gm,Sg=/\\?(___)(\n|.)*?(___)/gm,Eg=/\\?(__)(\n|.)*?(__)/gm,xg=/\\?(~~)(\n|.)*?(~~)/gm,kg=/\\{1,2}n/gm,Tg=[{searcher:qg,replacer:zt("strong",/\*\*/gm)},{searcher:Sg,replacer:zt("ins",/___/gm)},{searcher:Eg,replacer:zt("i",/__/gm)},{searcher:xg,replacer:zt("del",/~~/gm)},{searcher:kg,replacer:bg("<br/>")}],Ag=e=>typeof e!="string"?e:Sn(e,/^\\{2}/)?Kt(e,/\\{2}/):Tg.reduce((t,{searcher:r,replacer:n})=>t.replace(r,n),e);Ra.exports={apply:Ag}});var Ba=w((KA,$a)=>{a();c();u();l();var Cg=Ye(),Da=Ia(),{get:La,escape:Pg}=V(),Ma=Lt(),Ja=(e,t=Ma.viewport)=>typeof e=="object"&&(e.desktop||e.tablet||e.mobile)?e[t]:e,Fg=({styles:e={}})=>{let r=Object.values(e).join("").replace(/(<([^>]+)>)/gi,"");return r?`<style>${r}</style>`:""},Ng=e=>{let t;try{let o=e.match(/^\//);t=new URL(o?`${window.location.origin}${e}`:e)}catch{return e}let{origin:r,pathname:n}=window.location;return t.searchParams.set("redirectURL",`${r}${n}`),t.href},ja={addRedirectURL:Ng},Ua=(e,t)=>{let[r,n]=e.match(/[^()\s]+/g).reverse(),o=Ja(La(t,r));return ja[n]&&(o=ja[n](o)),o},Og=(e,t)=>e.replace(/{{(\^|#)\s*(.*?)\s*}}([\s\S]*?){{\/\s*(\2)\s*}}/gm,(r,n,o,i)=>!Ja(La(t,o))^n==="#"?i:"").replace(/{{{\s*(.*?)\s*}}}/g,(r,n)=>Da.apply(Ua(n,t)||"")).replace(/{{\s*(.*?)\s*}}/g,(r,n)=>Da.apply(Pg(Ua(n,t)))).concat(Fg(t));$a.exports={render:(e,t)=>Og(e,{...t,bridge:Cg.name,templateData:JSON.stringify(t),viewport:Ma.viewport})}});var En=w((eC,Va)=>{a();c();u();l();var _g=Ge(),Rg=Pe(),Ig=Rg.storageFor("unitRenderTimestamps"),Wa={minute:6e4,hour:36e5,day:864e5,week:6048e5},Ha=({configuration:{frequencyCap:e}={}})=>!!(e&&e.times&&e.multiplier&&e.timeFrame&&typeof e.times=="number"&&typeof e.multiplier=="number"&&Wa[e.timeFrame]),Dg=(e,{read:t,isDisabled:r}=Ig)=>{if(!Ha(e))return!1;if(!_g.userHasConsentedTo("targeting")||r())return!0;let{frequencyCap:n}=e.configuration,o=t(e.key)||{};return o.lastRenderTimestamp?Date.now()-o.lastRenderTimestamp<=Wa[n.timeFrame]/(n.times/n.multiplier):!1};Va.exports={hasValidFrequencyCap:Ha,hasReachedRenderLimit:Dg}});var za=w((sC,Ga)=>{a();c();u();l();var jg=Pe(),{hasValidFrequencyCap:Ug}=En(),Lg=jg.storageFor("unitRenderTimestamps"),Mg=(e,{read:t,write:r,isDisabled:n}=Lg)=>{if(!Ug(e)||n())return;let o=t(e.key)||{};o.lastRenderTimestamp=Date.now(),r(e.key,o)};Ga.exports={track:Mg}});var Yt=w((lC,Ka)=>{a();c();u();l();var Jg=za(),$g=En();Ka.exports={...Jg,...$g}});var Qa=w((yC,Ya)=>{a();c();u();l();var Bg=e=>{Array.from(e.getElementsByTagName("script")).forEach(r=>{let n=document.createElement("script"),o=document.getElementsByTagName("script")[0]||document.documentElement;n.text=r.text?`(() => {${r.text}})();`:"",o.parentNode.insertBefore(n,o)})};Ya.exports={execute:Bg}});var ec=w((bC,Xa)=>{a();c();u();l();var Za=e=>Array.prototype.slice.apply(e),Wg=(e,t)=>{let r;return function(){let n=this,o=arguments;clearTimeout(r),r=setTimeout(()=>e.apply(n,o),t)}},Hg=(e,t)=>{let r,n=[];return function(){let o=this;n.push(Za(arguments)),clearTimeout(r),r=setTimeout(()=>{e.apply(o,[Za(n)]),n.length=0},t)}};Xa.exports={debounce:Wg,cumulativeArgumentDebounce:Hg}});var rc=w((kC,tc)=>{a();c();u();l();var{cumulativeArgumentDebounce:Vg}=ec(),Gg=1e3,zg=e=>{!e.configuration.waypointEvent||xn.fireWaypoint(e.configuration.waypointEvent)},Kg=e=>{let t={...e,_topic:"waypoint.journey"};xn.sendEvent(t)},Yg=Vg(e=>{let t=e.map(i=>i[0]),r=JSON.stringify(t)||"",n="/martech/api/funnel?_topic=waypoint.journey&api_key=d3Jlbg",o=!1;if(navigator&&typeof navigator.sendBeacon=="function"&&typeof window.Blob=="function"&&(o=navigator.sendBeacon(n,r)),!o)if(r.length<1500){let i=`${n}&data=${encodeURIComponent(r)}`,s=new Image;s.src=i}else{let i=new XMLHttpRequest;i.open("POST",n,!0),i.setRequestHeader("Content-type","application/json"),i.send(r)}},Gg),xn={fire:zg,fireWaypoint:Kg,sendEvent:Yg};tc.exports=xn});var oc=w((FC,nc)=>{a();c();u();l();var Qg=e=>{let t=e.payment,{[t]:{cnt:r,cnts:n,max:o}={}}=e;return t==="free"?{}:{paywall:{exceededMax:t==="",...r&&{cnt:r},...n&&{cnts:n},...o&&{max:o}}}};nc.exports={paywallPayloadGenerator:Qg}});var ic=w((IC,sc)=>{a();c();u();l();var Zg=e=>{let t=e.payment,{cnt:r,max:n}=e.usmp||e.asmp||{};return t==="free"?{}:{paywall:{exceededMax:t==="",...r&&{cnt:r},...n&&{max:n}}}};sc.exports={cniPaymentPayloadGenerator:Zg}});var cc=w((MC,ac)=>{a();c();u();l();var Xg=e=>{let t=e.payment,{[t]:{cnt:r,cnts:n}={}}=e,o;return t==="free"?{}:((n||r)&&(o=n?Object.entries(n).map(([i,s])=>({name:i,count:s})):[{count:r}]),{is_exceeded:t==="",...o&&{meter:o}})};ac.exports={snowplowPayloadGenerator:Xg}});var lc=w((HC,uc)=>{a();c();u();l();var ev={...oc(),...ic(),...cc()},tv=e=>ev[e];uc.exports={generatorFor:tv}});var Be=w((YC,fc)=>{a();c();u();l();var{matchesType:dc}=je(),rv=ee(),nv=Ue(),ov=Pe(),{isAPresentationUnit:sv,isAnActionUnit:iv}=ce(),av=ov.storageFor("journey"),pc=()=>av.read("paywall-suppression")===!1||new URL(window.location).searchParams.get("journey-paywall-suppression")==="false",cv=e=>!!sv(e)&&dc(e,["paywall"])||!!iv(e)&&dc(e,["hide-content"]),uv=({unit:e,rules:t,suppressOnRoadblock:r=!1})=>(r||nv.isEnabled({rule:"commercialSuppression",rules:t}))&&!pc()&&cv(e)&&rv.hasRoadblockBeenDetected();fc.exports={isPaywallSuppressionDisabled:pc,ofPaywall:uv}});var hc=w((tP,yc)=>{a();c();u();l();var lv=Be(),dv=It(),pv=ce(),{isUniq:fv}=V(),{unitTypes:mv}=je(),yv=e=>!lv.ofPaywall({unit:e}),mc=({campaign:e,campaigns:t,state:r,filter:n=()=>!0})=>dv.resolveUnits({type:pv.isAPresentationUnit,campaign:e,campaigns:t,state:r}).filter(n).map(mv).flat().filter(fv),hv=e=>mc(e),gv=e=>mc({...e,filter:yv});yc.exports={features:hv,activeFeatures:gv}});var kn=w((iP,Sc)=>{a();c();u();l();var{generatorFor:gc}=lc(),vv=kr(),bc=z(),wv=ee(),{getCurrentState:bv}=Bt(),{log:qc}=K(),{activeFeatures:qv}=hc(),Sv=["type","selector","payload","name"],Qt={expanded:"expanded",collapsed:"collapsed"},Ev=(e,t={})=>{(window.dataLayer||[]).push({event:`${e.name}-${e.type}`,...t})},xv=(e,t={})=>{bc.add({type:"analytics-event",event:e,...t})},kv=(e,t={})=>{if(!!window.trackSelfDescribingEvent)try{let r={schema:"iglu:com.condenast/messaging_unit_event/jsonschema/3-0-3",data:{campaign_key:e.campaignKey,campaign_name:e.campaignName,is_paywalled:e.isPaywalled,paywall_pageview_id:e.pageviewId,paywall_source:e.paywallSource,subject:e.name,type:e.type,state:e.state,...t}};window.trackSelfDescribingEvent({event:r}),bc.add({type:"snowplow-event",event:r})}catch(r){qc("** Journey error: Failed to send Snowplow Event **",r)}},Tv=(e,t)=>{if(!!window.snowplowQueue)try{window.snowplowQueue.push(()=>kv(e,t))}catch(r){qc("** Journey error: Failed to add event to Snowplow Queue **",r)}},vc=e=>{if(!e)return"";let t=/[?&]source=([^&]+).*$/,r=i=>t.test(decodeURIComponent(i.getAttribute("href"))),n;if(r(e)?n=e:n=Array.from(e.querySelectorAll("a[href]")).find(r),!n)return"";let o=decodeURIComponent(n.getAttribute("href")).match(t);return o?o[1]:""},Zt=(e,t)=>{let r=gc(e.payload),n=r?r(t):{};Object.entries(e).filter(([o])=>!Sv.includes(o)).forEach(([o,i])=>n[o]=i),Ev(e,n),xv(e,n),Tv(e,gc("snowplowPayloadGenerator")(t))},wc=(e,t=null)=>{if(!e)return;let r=e.querySelector("[aria-expanded]");if(!r)return;let n=r.getAttribute("aria-expanded")==="true";return(t?t.getAttribute("aria-expanded")!==null:!1)?n?Qt.collapsed:Qt.expanded:n?Qt.expanded:Qt.collapsed},Av=(e,t,r,n,o=[])=>{var F,O;let{configuration:i,component:s,slot:p}=e;if(!i)return;let{analytics:{impressionEvent:d,clickEvent:m}={}}=i,x=(O=(F=window==null?void 0:window.cns)==null?void 0:F.library)==null?void 0:O.runtimeId,q=qv({campaign:n,campaigns:o,state:r}).includes("paywall"),S=()=>{let _=vc(t.firstChild),I=wc(t);return{type:"impression",...d,...x&&{pageviewId:x},..._&&{paywallSource:_},campaignKey:n.key,campaignName:n.name,...I&&{state:I},isPaywalled:q}};if(d)if(s&&p==="NavRollover"){let _=wv.whenJourneyComponentNavRolloverAppears(()=>{!_||(Zt(S(),bv()),_())})}else vv.onElementAppearance(t.firstChild,()=>Zt(S(),r));if(m){let _=[];s&&p==="PaywallBar"&&(_=[{name:"paywall-bar-chevron-button",selector:"[class*=PaywallBarChevronButton]"}]),[].concat(m,_).forEach(D=>{let R=new WeakSet,M=()=>{(t.querySelectorAll(D.selector)||[]).forEach(P=>{R.has(P)||(P.addEventListener("click",()=>{let $=vc(P),k=wc(t,P),b={type:"click",...D,...x&&{pageviewId:x},...$&&{paywallSource:$},campaignKey:n.key,campaignName:n.name,...k&&{state:k},isPaywalled:q};Zt(b,r)}),R.add(P))})};M(),new MutationObserver(M).observe(t,{childList:!0,subtree:!0})})}};Sc.exports={send:Zt,setup:Av}});var Ac=w((dP,Tc)=>{a();c();u();l();var Cv=Pa(),Xt=ot(),Ec=ke(),Pv=Ba(),Fv=ce(),Nv=Ge(),Ov=Yt(),_v=Qa(),Rv=rc(),Iv=kn(),{containerFor:st}=zr(),{log:xc}=K(),Dv=z(),jv=Be(),Uv=v,Lv=e=>Fv.isATemplatePresentationUnit(e),kc=e=>{let t=st(e.slot);if(!!t)return t.locateElement()},Mv=e=>{let t=st(e.slot);if(!!t)return t.createElement()},Jv=e=>st(e)&&st(e).isElementPresent(),$v=(e,t,r,n,o)=>{try{let i=e.template.classname;if(!Jv(i))return;if(jv.ofPaywall({unit:e,rules:n})){Dv.add({type:"suppressed-unit",name:e.name});return}Xt.unitRendering(e,r);let s=kc(e)||Mv(e);if(!s)return;let p=e.template.markup||Uv[e.template.name];if(!p)return;Nv.userHasConsentedTo("targeting")&&Ov.track(e);let d=Cv.toHTMLText(p),m={...e.data,state:t};return s.innerHTML=Pv.render(d,m),Iv.setup(e,s,t,r,o),_v.execute(s),Rv.fire(e),Ec.add(e,s),Xt.unitRendered(e,r),s}catch(i){xc(`** CM Error ${e.name} **`,i)}},Bv=(e,t,r)=>{try{Xt.slotEmptying(t,r),Ec.empty(e);let n=st(e);if(!n)return;let o=n.locateElement();if(!o)return;o.innerHTML="",Xt.slotEmptied(t,r)}catch(n){xc(`** CM Error ${t.name} **`,n)}};Tc.exports={isSupported:Lv,locateElement:kc,render:$v,empty:Bv}});var Nc=w((hP,Fc)=>{a();c();u();l();var Wv=kn(),Cc=ee(),er=ot(),Tn=ke(),Hv=Ge(),Vv=ce(),Gv=Yt(),{log:Pc}=K(),zv=z(),Kv=Be(),Yv=e=>Vv.isAComponentPresentationUnit(e),Qv=()=>{},Zv=(e,t,r,n,o)=>{try{if(Kv.ofPaywall({unit:e,rules:n})){zv.add({type:"suppressed-unit",name:e.name});return}Tn.add(e);let i;i=Cc.whenJourneyUnitRenderEnds(({payload:s})=>{if(!i)return;let{element:p,unit:d}=s;e.name===d.name&&(Hv.userHasConsentedTo("targeting")&&Gv.track(e),Tn.add(e,p),er.unitRendered(e,r,{emit:!1}),Wv.setup(e,p,t,r,o),s.keepAlive||i())}),er.unitRendering(e,r)}catch(i){Pc(`** CM Error ${e.name} **`,i)}},Xv=(e,t,r)=>{try{let n;n=Cc.whenJourneyUnitEmptyEnds(({payload:o})=>{if(!n)return;let{unit:i}=o;t.name===i.name&&(Tn.empty(e),er.slotEmptied(t,r,{emit:!1}),n())}),er.slotEmptying(t,r)}catch(n){Pc(`** CM Error ${t.name} **`,n)}};Fc.exports={isSupported:Yv,locateElement:Qv,render:Zv,empty:Xv}});var Rc=w((qP,_c)=>{a();c();u();l();var ew=Ac(),tw=Nc(),Oc=ke(),rw=[ew,tw],An=e=>rw.find(t=>t.isSupported(e)),nw=e=>An(e).locateElement(e),ow=(e,...t)=>An(e).render(e,...t),sw=(e,...t)=>{if(Oc.isEmpty(e))return;let r=Oc.unitIn(e);return An(r).empty(e,r,...t)};_c.exports={locateElement:nw,render:ow,empty:sw}});var Dc=w((TP,Ic)=>{a();c();u();l();var iw=e=>{!window.paywallGateway||typeof window.paywallGateway.truncateContent!="function"||window.paywallGateway.truncateContent(e)};Ic.exports={truncateContent:iw}});var Uc=w((NP,jc)=>{a();c();u();l();var aw=ke(),cw=({mark:e,selector:t,items:r})=>{let n=document;if(e&&(n=document.querySelector(`[data-journey-hook="${e}"]`),!n))return;let o=()=>{let s;if(t?s=n.querySelectorAll(t):s=n.children,!s)return;let p=aw.elements();Array.from(s).forEach((d,m)=>{!p.some(x=>d.contains(x))&&m>=r&&d&&(d.matches('[class*="NewsletterSubscribeFormWrapper"], [class*="NewsletterSubscribeFormWrapper"] + p')?(d.innerHTML="",d.style.display="none"):d.remove&&d.remove())})};o(),new MutationObserver((s=[])=>{!s.some(({addedNodes:p=[]})=>p.length)||o()}).observe(n,{childList:!0,subtree:!0})};jc.exports={truncateMarkedContent:cw}});var Mc=w((DP,Lc)=>{a();c();u();l();var uw=({selector:e,items:t})=>{let r=document;if(e){let n=window.innerWidth,o=180;n<=767?o=320:n<=1023&&(o=254);let i=r.getElementsByClassName(e);i=Array.from(i);let s=[];i.forEach(C=>{C.classList.length===1&&s.push(C)}),i=s[t];let p=r.documentElement.scrollHeight,d=function(q){q.map(S=>{S.isIntersecting&&(p=window.pageYOffset+o,window.scrollTo(0,p))})},m={threshold:0};new IntersectionObserver(d,m).observe(i),window.onscroll=function(){window.pageYOffset>p&&window.scrollTo(0,p)};return}};Lc.exports={limitScrolling:uw}});var Bc=w((JP,$c)=>{a();c();u();l();var lw=Pr(),dw=pe(),Jc=e=>(t,r)=>dw.now().getTime()-t[e]>lw(r),pw={created:Jc("iat"),updated:Jc("uat")},fw=(e,{since:t,time:r})=>pw[t](e,r);$c.exports={isExpired:fw}});var Hc=w((VP,Wc)=>{a();c();u();l();var tr=pe(),mw=/([0-9]{4}|\*)[/-]([0-9]{1,2}|\*)[/-]([0-9]{1,2}|\*)/,yw=({dateCreated:e,year:t,month:r,day:n})=>{let o=tr.now();return o.setHours(0,0,0,0),n!=="*"&&o.setDate(parseInt(n)),r!=="*"&&o.setMonth(parseInt(r)-1),t!=="*"&&o.setFullYear(parseInt(t)),n==="*"&&r!=="*"&&t!=="*"&&(o.setDate(e.getDate()),o.getMonth()===e.getMonth()&&o.getFullYear()===e.getFullYear()&&o.setDate(o.getDate()+1)),r==="*"&&n!=="*"&&(o.setMonth(e.getMonth()),o.getDate()<=e.getDate()&&o.getFullYear()===e.getFullYear()&&o.setMonth(o.getMonth()+1)),t==="*"&&n!=="*"&&(o.setFullYear(e.getFullYear()),o.getMonth()<=e.getMonth()&&o.getDate()<=e.getDate()&&o.setFullYear(o.getFullYear()+1)),o},hw=(e,t)=>{let[,r,n,o]=e.match(mw);if(r!=="*"&&n!=="*"&&o!=="*")return tr.from({dateString:e});let i=tr.from({timestamp:t.iat});return yw({dateCreated:i,year:r,month:n,day:o})},gw=(e,{date:t})=>{if(t){let r=tr.now();r.setHours(0,0,0,0);let n=hw(t,e);return n.setHours(0,0,0,0),r>=n}};Wc.exports={isExpired:gw}});var it=w((QP,Vc)=>{a();c();u();l();var vw=Bc(),ww=Hc();Vc.exports={after:vw,on:ww}});var Kc=w((r1,zc)=>{a();c();u();l();var bw=it(),qw=z(),Gc=Me(),Sw=({rule:e,args:t})=>{let r=Gc.payloadFor("sample"),{isExpired:n}=bw[e];!r||!n(r,t)||(Gc.remove("sample"),qw.add({type:"sample-expired",payload:r}))};zc.exports={execute:Sw}});var Zc=w((a1,Qc)=>{a();c();u();l();var Ew=it(),xw=z(),Yc=Me(),kw=({rule:e,args:t})=>{let r=Yc.payloadFor("msmp"),{isExpired:n}=Ew[e];!r||!n(r,t)||(Yc.remove("msmp"),xw.add({type:"msmp-expired",payload:r}))};Qc.exports={execute:kw}});var tu=w((p1,eu)=>{a();c();u();l();var Tw=it(),Aw=z(),Xc=Me(),Cw=({rule:e,args:t})=>{let r=Xc.payloadFor("tmp"),{isExpired:n}=Tw[e];!r||!n(r,t)||(Xc.remove("tmp"),Aw.add({type:"tmp-expired",payload:r}))};eu.exports={execute:Cw}});var ou=w((g1,nu)=>{a();c();u();l();var Pw=it(),Fw=z(),ru=Me(),Nw=Zr(),Ow=en(),_w=({rule:e,state:{fingerprintID:t},args:r})=>{let n=ru.payloadFor("fsmp"),{isExpired:o}=Pw[e];if(!n||!o(n,r))return;ru.remove("fsmp");let{clientCredentials:i,serviceURL:s}=r;Ow.add(()=>Nw.reconcile({client:window.fetch,clientCredentials:i,serviceURL:s,initialClientState:n,nextState:{},fingerprintID:t}),"token-expiry-reconcile"),Fw.add({type:"fsmp-expired",payload:n})};nu.exports={execute:_w}});var iu=w((S1,su)=>{a();c();u();l();var Rw=Kc(),Iw=Zc(),Dw=tu(),jw=ou();su.exports={sample:Rw,msmp:Iw,fsmp:jw,tmp:Dw}});var cu=w((A1,au)=>{a();c();u();l();var Uw=iu(),Lw=e=>Uw[e],Mw=({paymentForm:e,rule:t,state:r,...n})=>{Lw(e).execute({rule:t,args:n,state:r})};au.exports={tokenExpiration:Mw}});var du=w((O1,lu)=>{a();c();u();l();var Jw=Y(),uu=pe(),{bestAvailableCodec:$w}=ie(),{log:Bw}=K(),Ww=({name:e,payload:t,signature:r,key:n,expirationInSeconds:o=uu.oneYearInSeconds})=>{let i=uu.now().getTime(),s=$w({key:n,signature:r});if(!!s)return s.encode({payload:{...t,iat:i,uat:i},key:n,signature:r}).then(p=>{!p||Jw.write(e,p,o)}).catch(p=>{Bw("** Journey error: token encoding failure **",p)})};lu.exports={issueToken:Ww}});var fu=w((j1,pu)=>{a();c();u();l();var Hw=({selector:e})=>{let t=window.document.querySelector(e);!t||(t.style.cssText+="display: none;")};pu.exports={hideDOMElement:Hw}});var yu=w(($1,mu)=>{a();c();u();l();var rr=Y(),{codecFor:Vw}=ie(),{log:Gw}=K(),zw=({tokens:e,key:t,signature:r})=>{let n=({name:s,token:p,codec:d})=>d.verify({token:p,key:t,signature:r}).then(m=>{m||rr.remove(s)}).catch(m=>{Gw("** Journey error: Invalid token **",m),rr.remove(s)}),o=e.map(s=>({name:s,token:rr.read(s)})).map(({name:s,token:p})=>({name:s,token:p,codec:Vw({token:p})}));o.filter(({codec:s})=>!s).forEach(({name:s})=>rr.remove(s));let i=o.filter(({codec:s})=>!!s).map(n);return Promise.all(i)};mu.exports={verifyTokenSignature:zw}});var nr=w((G1,hu)=>{a();c();u();l();hu.exports={access:"CN_access",auth:"CN_userAuth",openid:"CN_token_id",openaccess:"CN_token_access",smp:"pay_ent_smp",asmp:"pay_ent_asmp",usmp:"pay_ent_usmp",msmp:"pay_ent_msmp",sub:"pay_ent_sub",pass:"pay_ent_pass",sess:"pay_ent_sess",tmp:"pay_ent_tmp",events:"pay_events",audit:"pay_audit"}});var wu=w((Z1,vu)=>{a();c();u();l();var Cn=nr(),Pn=Y(),{codecFor:Kw}=ie(),{log:Yw}=K(),gu=e=>{let t=Pn.read(Cn[e]);if(!t)return;let r=Kw({token:t}).decode({token:t});if(!r||!r.exp||r.iss==="Journey")return;let n=r.exp.toString().length,o=new Date(Date.now()),i=o.getUTCFullYear()*1e4+(o.getUTCMonth()+1)*100+o.getUTCDate(),s=Number(r.exp);return n===8&&i>s||n===6&&i>s*100+31},Qw=({client:e,payload:t={}})=>{let r="/api/payment/revalidate",n={method:"POST",headers:{accept:"application/json","content-type":"application/json"},credentials:"same-origin",cache:"no-cache",body:JSON.stringify(t)};return e(r,n).then(o=>o.json()).then(o=>(o&&!o.requestSuccess&&console.warn(`Revalidate request: ${o.message}`),o)).catch(o=>{Yw("** Journey error: Revalidation **",o)})},Zw=({client:e=fetch,acceptableForms:t,acceptableScopes:r})=>{let n=t.filter(gu);if(n.length===0)return Promise.resolve();let o={openid:Pn.read(Cn.openid)};return n.forEach(i=>o[i]=Pn.read(Cn[i])),Qw({client:e,payload:{tokens:o,acceptableForms:t,acceptableScopes:r}})};vu.exports={requiresRevalidation:gu,revalidateEntitlementTokens:Zw}});var qu=w((nF,bu)=>{a();c();u();l();var We=nr(),He=Y(),{log:Xw}=K(),eb=2419200,tb=({client:e,payload:t={}})=>{let r="/api/payment/validate",n={method:"POST",headers:{accept:"application/json","content-type":"application/json"},credentials:"same-origin",cache:"no-cache",body:JSON.stringify(t)};return e(r,n).then(o=>o.json()).then(o=>(o&&!o.requestSuccess&&console.warn(`Validate request: ${o.message}`),He.write(We.audit,1,eb),o)).catch(o=>{Xw("** Journey error: Validation **",o)})},rb=({client:e=fetch,acceptableForms:t,acceptableScopes:r})=>{if(He.read(We.audit)||!He.read(We.openid))return Promise.resolve();let i=t.filter(p=>!He.read(We[p]));if(i.length===0)return Promise.resolve();let s={openid:He.read(We.openid)};return i.forEach(p=>s[p]=He.read(We[p])),tb({client:e,payload:{tokens:s,acceptableForms:t,acceptableScopes:r}})};bu.exports={auditEntitlementTokens:rb}});var Cu=w((cF,Au)=>{a();c();u();l();var xu=nr(),ku=Y(),{log:nb}=K(),Fn=z(),Tu=e=>ku.read(xu[e]),at=e=>!!Tu(e),Su=e=>ku.remove(xu[e]),Eu=()=>{!at("access")||(at("sub")&&(Su("sub"),Fn.add({type:"token-exchange",event:{id:"remove-token",token:"sub"}})),at("pass")&&(Su("pass"),Fn.add({type:"token-exchange",event:{id:"remove-token",token:"pass"}})))},ob=({client:e,openaccess:t})=>{let r="/api/access/revalidate",n={method:"GET",headers:{accept:"application/json","content-type":"application/json",Authorization:`Bearer ${t}`,"user-agent":"Journey/1.0.0"},credentials:"same-origin",cache:"no-cache"};return e(r,n).then(o=>(Fn.add({type:"token-exchange",event:{id:"new-token",token:"access"}}),o.json())).catch(o=>{nb("** Journey error: Request Martech Access Token **",o)})},sb=({client:e=fetch,rollout:t=100})=>{t<Math.floor(100*Math.random())||!at("openaccess")||(at("access")?Eu():ob({client:e,openaccess:Tu("openaccess")}).then(Eu))};Au.exports={exchangeEntitlementTokens:sb}});var Fu=w((fF,Pu)=>{a();c();u();l();var{revalidateEntitlementTokens:ib}=wu(),{auditEntitlementTokens:ab}=qu(),{exchangeEntitlementTokens:cb}=Cu();Pu.exports={revalidateEntitlementTokens:ib,auditEntitlementTokens:ab,exchangeEntitlementTokens:cb}});var Ou=w((vF,Nu)=>{a();c();u();l();var ub=e=>new Function(`return ${e}`);Nu.exports={executeScript:({src:e})=>ub(e)()}});var Ru=w((EF,_u)=>{a();c();u();l();var lb=z(),db=({type:e,...t},r)=>{!e||lb.add({type:e,...t,state:r})};_u.exports={logEvent:db}});var Du=w((CF,Iu)=>{a();c();u();l();var pb=({queryParams:e=[]})=>{let t=new URLSearchParams(window.location.search);e.forEach(o=>t.delete(o));let r=t.toString().length>0?`?${t.toString()}`:"",n=window.location.href.replace(window.location.search,r);window.history.replaceState(null,"",n)};Iu.exports={removeQueryParams:pb}});var Uu=w((_F,ju)=>{a();c();u();l();var{matchesType:fb}=je(),{merge:mb,without:yb}=V(),hb=({conditions:e={},targeting:t,units:r,mode:n="add"})=>{r.filter(o=>!e.unitType||fb(o,e.unitType)).forEach(o=>{switch(n){case"add":o.targeting=mb(o.targeting,t);break;case"assign":o.targeting={...o.targeting,...t};break;case"remove":o.targeting=yb(o.targeting,t);break}})};ju.exports={setTargeting:hb}});var Mu=w((UF,Lu)=>{a();c();u();l();var{deepClone:gb,forEach:vb}=V(),wb=e=>new URL(e,window.location.origin),bb=e=>!e.match(/https*:\/\//i),qb=(e="",t,r)=>{let n=e.split(r);return n.push(t),n.join(r)},Sb=(e="",t,r)=>e.split(r).filter(n=>n!==t).join(r),Eb=({conditions:e={},tracking:t,units:r,mode:n="assign",delimiter:o="_"})=>{if(!r||!r.length||!(e!=null&&e.url))return;let i=new RegExp(e.url),s=d=>{try{let m=wb(d),x;vb(t,(q,S)=>{switch(n){case"add":x=qb(m.searchParams.get(S),q,o);break;case"assign":x=q;break;case"remove":x=Sb(m.searchParams.get(S),q,o);break}m.searchParams.set(S,x)});let C=m.toString();return bb(d)&&(C=C.replace(window.location.origin,"")),decodeURIComponent(C)}catch(m){return console.warn(m),d}},p=(d,m)=>m.match&&m.match(i)?s(m):m;r.forEach(d=>d.data=gb(d.data,p))};Lu.exports={setTracking:Eb}});var $u=w((BF,Ju)=>{a();c();u();l();var{truncateContent:xb}=Dc(),{truncateMarkedContent:kb}=Uc(),{limitScrolling:Tb}=Mc(),{paymentNegotiation:Ab}=hn(),{tokenExpiration:Cb}=cu(),{issueToken:Pb}=du(),{hideDOMElement:Fb}=fu(),{verifyTokenSignature:Nb}=yu(),{revalidateEntitlementTokens:Ob,auditEntitlementTokens:_b,exchangeEntitlementTokens:Rb,reconcilePaymentToken:Ib}=Fu(),{executeScript:Db}=Ou(),{logEvent:jb}=Ru(),{setSegments:Ub}=Jt(),{removeQueryParams:Lb}=Du(),{emitAnalyticsEvent:Mb}=mn(),{setTargeting:Jb}=Uu(),{setTracking:$b}=Mu();Ju.exports={truncateContent:xb,truncateMarkedContent:kb,limitScrolling:Tb,paymentNegotiation:Ab,tokenExpiration:Cb,issueToken:Pb,hideDOMElement:Fb,verifyTokenSignature:Nb,revalidateEntitlementTokens:Ob,auditEntitlementTokens:_b,executeScript:Db,logEvent:jb,setSegments:Ub,removeQueryParams:Lb,emitAnalyticsEvent:Mb,exchangeEntitlementTokens:Rb,setTargeting:Jb,reconcilePaymentToken:Ib,setTracking:$b}});var On=w((zF,Hu)=>{a();c();u();l();var{pick:Bb}=V(),{knownForms:Wb}=on(),{getCurrentState:Hb}=Bt(),Vb=z(),Gb=K(),zb=Ue(),Nn,Kb=["contentType","bucket","entitled","isAuthenticated","paid"],Bu=e=>{var t,r;return(r=(t=e.a)==null?void 0:t.Dt)==null?void 0:r.state},Yb=e=>{let t=e[Wb.find(n=>n===e.payment)]||{},{counterName:r}=e;return r?t.cnts&&t.cnts[r]:t.cnt},Qb=e=>{let t=e==null?void 0:e[e.payment];if(!!t)return t.cnt>=t.max},ct=(e,t,r=window.admiral)=>{if(t!==void 0)try{r("targeting","set",e,String(t))}catch(n){Gb.log("** Journey error: Failed to send set Admiral targeting **",n)}},Zb=(e=[])=>{Nn&&clearTimeout(Nn);let{admiral:t}=window;if(!t||Bu(t)==="r"||new URL(window.location).searchParams.get("admiral")==="false"||zb.isEnabled({rule:"admiralSuppression",rules:e}))return;let r=Hb(),n=Bb(r,Kb),o=Object.keys(n),{segments:i,tags:s}=r;o.forEach(p=>{ct(p,n[p])}),r.payment&&ct("count",Yb(r)),r.payment!=="msmp"&&ct("exceededMax",Qb(r)),(s==null?void 0:s.length)>0&&ct("tags",s.join(", ")),(i==null?void 0:i.length)>0&&ct("segments",i.join(", ")),Nn=setTimeout(()=>{t("targeting","ready")},3e3)},Wu=()=>{let{admiral:e}=window;if(!e){setTimeout(()=>Wu(),100);return}window.admiral("after","measure.detected",({adblocking:t,subscribed:r,whitelisted:n}={})=>{Vb.add({type:"admiral",id:"measure.detected",payload:{adblocking:t,subscribed:r,whitelisted:n}})})};Hu.exports={initialize:Wu,updateTargeting:Zb,getState:Bu}});var Ku=w((XF,zu)=>{a();c();u();l();var Xb=ot(),e0=ke(),{log:Vu}=K(),t0=z(),r0=Be(),Gu=e=>(t,r,n,o)=>{let{function:i,...s}=t.data,p=e[i];if(typeof p!="function"){Vu(`** Journey Error: Unknown Function: ${i} **`);return}if(r0.ofPaywall({unit:t,rules:o})){t0.add({type:"suppressed-unit",name:t.name});return}try{p({...s,state:r,campaign:n}),Xb.actionExecuted(t,n)}catch(d){Vu(`** Journey Error: Action Function: ${i} **`,d)}e0.addAction(t)},n0=e=>({execute:Gu(e)});zu.exports={register:n0,execute:Gu}});var tl=w((oN,el)=>{a();c();u();l();var o0=ee(),{isMatch:s0,get:i0}=V(),Yu=(e,t)=>{let{opacity:r,visibility:n}=t.getComputedStyle(e),o=e.getBoundingClientRect();return Math.floor(o.top)>=0&&Math.floor(o.left)>=0&&Math.floor(o.bottom)<=(t.innerHeight||document.documentElement.clientHeight)&&Math.floor(o.right)<=(t.innerWidth||document.documentElement.clientWidth)&&!!e.offsetHeight&&!!e.offsetWidth&&r!=="0"&&n!=="hidden"},Qu={scrollTo:({selector:e},t,r)=>{[...r.document.querySelectorAll(e)].some(n=>Yu(n,r))&&t(),r.document.addEventListener("scroll",()=>{[...r.document.querySelectorAll(e)].some(n=>Yu(n,r))&&t()})},clickOn:({selector:e},t,r)=>{r.document.addEventListener("click",({target:n})=>{[...r.document.querySelectorAll(e)].includes(n)&&t()})},triggerEvent:({event:e},t)=>o0.whenAnEventOccurs({id:e,callback:t})},Zu=e=>i0(e,"configuration.userActions")||[],a0=e=>!!Zu(e).length,Xu=[],c0=e=>Xu.some(t=>s0(e,t)),u0=(e,t,r=window)=>{e.forEach(n=>{let{type:o}=n;!o||!Qu[o]||c0({action:n,callback:t})||(Xu.push({action:n,callback:t}),Qu[o](n,t,r))})};el.exports={list:Zu,arePresent:a0,attach:u0}});var il=w((uN,sl)=>{a();c();u();l();var l0=Ye(),rl=ee(),d0=z(),ut=Ku(),p0=Pe(),f0=Ar(),{not:nl}=V(),m0=ot(),or=At(),Te=ke(),Ae=It(),y0=Be(),sr=ce(),ol=jt(),ye=tl(),h0=Dr(),{hasReachedRenderLimit:g0}=Yt(),{deepClone:fe,pick:v0}=V(),w0=On(),b0=({state:e,renderer:t,data:r,functions:n})=>{let o={},i={},s=[],p=(S,{refresh:F=!1})=>{let O=Ae.resolveUnit({type:sr.isAPresentationUnitThatTargets(S),campaign:i,rules:s,campaigns:r,state:o});if(!O){or.add(()=>t.empty(S,i));return}if(!Te.isPresent(O)&&g0(O))return;let _=Ae.resolveUnits({type:sr.isAnActionThatTargets(O),campaign:i,rules:s,campaigns:r}),I=fe(s),D=fe(o),R=fe(i),M=()=>{or.add(()=>{Te.isLocked(S)||Te.isPresent(O)&&!F||(t.render(O,D,R,I,r),ut&&_.forEach(J=>ut.register(n).execute(J,D,R,I)),D.adblock&&ol.execute())})};ye.arePresent(O)?ye.attach(ye.list(O),M):M()},d=S=>{if(!ut)return;let F=fe(s),O=fe(o),_=fe(i);or.add(()=>{Te.hasExecuted(S)||ut.register(n).execute(S,O,_,F)})},m=S=>{let F=fe(s),O=fe(o),_=fe(i);or.add(()=>ut.register(n).execute(S,O,_,F))},x=S=>{!ye.arePresent(S)||Te.hasExecuted(S)||ye.attach(ye.list(S),()=>m(S))},C=(S,F,O)=>{let _=O.slice(0,F),I=Te.actions();return!!Ae.resolveUnits({type:sr.isAnActionThatPrevents(S),campaign:{units:_.concat(I)},rules:s}).length},q=({slots:S,refresh:F})=>{o=e.getCurrentState();let O=Ae.resolveCampaign({campaigns:r,state:o});O.name!==i.name&&(i=O,m0.campaignResolved(O)),s=Ae.resolveRules({state:o,campaign:i,campaigns:r}),S.forEach(I=>p(I,{refresh:F}));let _=Ae.resolveUnits({type:sr.isAnActionUnit,campaign:i,rules:s,campaigns:r,state:o}).filter(nl(C));_.filter(ye.arePresent).forEach(x),_.filter(nl(ye.arePresent)).forEach(d),w0.updateTargeting(s)};return l0.add({jBus:f0,bus:rl,campaigns:r,functions:n,localStorage:p0,state:e,resolver:Ae,renderer:t,registry:Te,suppression:y0,unblocker:ol,eventLogger:d0,engine:h0}),window.jBus=v0(rl,["emitEvent","hasAnEventOccured","whenAnEventOccurs"]),{compose:q}};sl.exports={initialize:b0}});var ul=w((mN,cl)=>{a();c();u();l();var q0=Ye(),al=ce(),S0=console.log,E0=()=>{if(!window.document.location.search.match(/journey(?!-)/))return;let e=window[q0.name];if(!e)return;let t=()=>e.state.getCurrentState(),r=()=>e.resolver.getCurrentCampaign(),n={Campaign:()=>r(),State:()=>t(),Units:()=>e.resolver.resolveUnits({type:al.isATemplatePresentationUnit,campaign:r(),state:t()}),Actions:()=>e.resolver.resolveUnits({type:al.isAnActionUnit,campaign:r(),state:t()}),Campaigns:()=>e.campaigns.map(o=>o.name),Events:()=>e.eventLogger.events};setTimeout(()=>{Object.keys(n).forEach(o=>S0(o,n[o]()))},7500)};cl.exports={initialize:E0}});var dl=w((wN,ll)=>{a();c();u();l();var _n=ee(),{isEmpty:x0,zipObject:k0}=V(),T0={"journey.unit.render.begin":"journey.unit.render.begin","journey.unit.empty.begin":"journey.unit.empty.begin","journey.client.state.update":"journey.client.state.update","journey.ready":"journey.ready"},A0=()=>{Object.entries(T0).forEach(([e,t])=>{_n.whenAnEventOccurs({id:e,callback:({payload:r})=>window.cnBus.emit(t,r)})})},C0={"ads.environment.incognito.detected":"incognito.detected","ads.roadblock.#{lineItemId}":"ads.roadblock","segments.updated":"segments.updated","permutiveSegments.updated":"permutive.segments.updated","payment.updated":"payment.updated","consumer-marketing-unit.componentDidMount":"cmu.mounted","journey.unit.render.end":"journey.unit.render.end","journey.unit.empty.end":"journey.unit.empty.end","journey.client.error":"journey.client.error","journey.component.appears.NavRollover":"journey.component.appears.NavRollover","onetrust.OneTrustGroupsUpdated":"onetrust.groups.updated","fingerprintjs.visitor":"fingerprint.visitorId.updated","fingerprintjs.id.#{fingerprintID}":"fingerprint.id"},Rn=new RegExp(/#{([^.]+?)}/g),In=(e,t)=>{let r=e.matchAll(Rn),n=Array.from(r).map(([,s])=>s),o=new RegExp(e.replace(Rn,"([^.]+)")),i=(t.match(o)||[]).slice(1);return k0(n,i)},P0=()=>{Object.entries(C0).forEach(([e,t])=>{let r=e.replace(Rn,"#");window.cnBus.history(r).forEach(([n,o])=>{let i=In(e,n);_n.emitEvent({id:t,timestamp:o,...x0(i)?{}:{payload:i}})}),window.cnBus.on(r,(n={},{topic:o}={})=>{if(!o)return;let i=In(e,o);_n.emitEvent({id:t,payload:{...i,...n}})})})},F0=()=>{!window.cnBus||(P0(),A0())};ll.exports={initialize:F0,extractPayload:In}});a();c();u();l();(async function(){let e=vo();if(await e.initialize(),e.reloaded)return;let t=br();await t.initialize();let r=Uo();Ye().add({focusTrap:r});let o=xr(),{once:i}=kr(),s=Ko(),p=ii(),d=Bt(),m=Rc(),x=$u(),C=On(),q=ee(),S=il(),F=Lt(),O=Ue(),_=K(),I=z(),{pick:D}=V(),R=ul(),M=At(),J=dl(),G=g,P=h;if(F.initialize(),F.isWebCrawler)return;let $=d.getCurrentState(),b=D($,["xid","country","url","device.viewport","bucket","entitled","isAuthenticated"]);b.compilerAgeInDays=e.ageInDays,I.initialize(b),I.start(o.setInterval),I.add({type:"compiler-initialize",source:document.currentScript&&document.currentScript.src}),_.initialize(),C.initialize(),J.initialize(),O.register(x);let{compose:E}=S.initialize({state:d,renderer:m,data:P,functions:x});M.start(o.setInterval),p.initialize(),i(()=>{var T,j;return!!((j=(T=window.journeyDataGateway)==null?void 0:T.fetch)!=null&&j.call(T))},()=>{q.whenAClientErrorOccurs(({payload:j})=>{I.add({type:"client-error",...j})}),q.whenACMUIsMounted(({payload:{classname:j}})=>E({slots:[j],refresh:!0}));let T=0;q.whenOneTrustGroupsAreUpdated(()=>{T+=1,T>1&&E({slots:G})}),q.whenIncognitoIsDetected(()=>E({slots:G})),q.whenSegmentsAreUpdated(()=>E({slots:G})),q.whenPermutiveSegmentsAreUpdated(()=>E({slots:G})),q.whenPaymentIsUpdated(()=>E({slots:G})),q.whenJourneyStateIsUpdated(()=>E({slots:G})),t.consumer.subscribe("adblock.v1",(j,f,A)=>{I.add({type:"adblock",id:"change",key:j,action:f,value:A}),E({slots:G})}),q.whenRoadblockIsDetected(()=>E({slots:G})),E({slots:G})},25),s.execute(),R.initialize()})();})();
