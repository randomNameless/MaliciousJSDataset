(function(){var n="0.2.1",a,e="undefined",t=25,r=parseInt(1e3/t),o=a,i={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"431",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==e},c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var f=function(){return s.instanceID},A="_HistatsCounterGraphics_",l,d=function(){return A+s.counterID},v=function(n){return!("string"!=typeof n||""==n)},h=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},m=function(e,t){var i=e||{};try{var c=function(n){var a="autostart";return"undefined"!=typeof n[a]&&n[a]===!0},f={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(i),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},A=function(){return f.INSTANCE_ID},v=100,m=1,g=function(){return t.document},b=function(n){return u(n)&&!!g().getElementById(n)},p=function(n){o=t.setTimeout(n,r)},w=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||p,B=t["Date"]||{},T=function(n,a){for(var e in n)a.hasOwnProperty(e)&&(a[e]=n[e])};i.getInstanceID=A;var x=d();i.IS_HISTATS_CANVAS=!0,i.globalObjectName=x,i.$window=t;var S=function(n){return b(n)?g().getElementById(n):a},C={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},y={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:a,customization:{}},I={domCanvasObject:null,canvas2dContext:null,canvasProperties:C},M=function(){var n={},e=n.hasOwnProperty,t=0,r=0,o={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},i=function(a){return e.call(n,a)},s=function(a){return o.printMessages&&console.log(A(),"addTopic",a),r++,o.topicsCount++,r>50&&h(A(),"Lot of topics registered!",a),n[a]=[]},u=function(a){return n[a]},c=function(a,e,r){o.printMessages&&console.log(A(),"subscribe",a,e,r),o.recordMessages&&o.messageLog.push(["subscribe",a,e,r]),r=r||v,i(a)||s(a);var c=u(a).push({callback:e,priority:e})-1;return t++,o.subscribersCount++,t>50&&h(A(),"Lot of topics registered!",a),{remove:function(){delete n[a][c]}}},f=function(n,a){var e="no-topic-found";n!=e&&l(e,{topic:n,info:a})},l=function(e,t){if(o.messagePassedCount++,o.printMessages&&console.log(A(),"publish",e,t),o.recordMessages&&o.messageLog.push(["publish",e,t]),!o.blockMessages)return i(e)?(n[e].slice().sort(function(n,a){return n.priority-a.priority}).forEach(function(n){n.callback(t!=a?t:{})}),void 0):(f(e,t),void 0)},d=function(n,a){w(function(){l(n,a)})};return{subscribe:c,publish:l,publishAsync:d,debugObj:o}}(),_=function(){return s.counterID},k=function(){var n="siteId";return i[n]=i[n]||0},N=function(){var n="main_div_name";return i[n]||"histats_counter_"+k()+"_"+_()},D=[],O=function(){return l=N(),l},F=function(){return O()+"_canvas"},E=function(){return"http://www.histats.com/viewstats/?sid="+k()+"&ccid="+_()},U=function(){t.location=E()},R=function(){if(1==I.canvasProperties.doMouseOverOut){var n=W().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}W().domCanvasObject.style.cursor="pointer"},V=function(){if(1==I.canvasProperties.doMouseOverOut){var n=W().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},P=function(){var n=W(),a=n.canvasProperties,e=n.canvas2dContext;e.shadowOffsetX=a.shadowOffsetX,e.shadowOffsetY=a.shadowOffsetY,e.shadowBlur=a.shadowBlur,e.shadowColor="rgba(0,0,0,0.2)"},L=function(){return S(O())},j=function(){var n=!!L();return n},G=function(){try{if(!j())return M.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=L(),a=W().canvasProperties,e='<canvas id="'+F()+'" width="'+a.w+'" height="'+a.h+'" ></canvas>',r='<a href="'+E()+'" target="_blank">'+e+"</a>";n.innerHTML=r,W().domCanvasObject=S(F());var o=W().domCanvasObject;W().canvas2dContext=o.getContext("2d"),"addEventListener"in t?(o.addEventListener("mouseover",function(){R()}),o.addEventListener("mouseout",function(){V()})):o.onclick=function(){U()}}catch(i){h(A(),"drawCanvas",i)}},Y=function(){try{if(f.ANIMATION_STARTED)return;if(f._STOPPED)return;M.publish("draw-callback-requested-reconfiguration",{}),M.publish("starting_pre",{context:i}),f.ANIMATION_STARTED=!0,M.publish("started",{context:i}),M.publish("drawcanvas_pre",{context:i}),G(),M.publish("drawcanvas_post",{context:i}),q(),M.publish("animationLoop_started",{context:i})}catch(n){h(A(),"startNow",n,n.message)}},K=function(n,a,e){a.addEventListener?a.addEventListener(n,e,!1):a.attachEvent?a.attachEvent("on"+n,e):a[n]=e},H=function(){try{M.publish("appendedStart",{context:i,type:"animFrame"}),w(Y)}catch(n){h(A(),"startAsap",n.message,n)}},X=function(n,a){D.push({name:n,callback:a})},J=function(){},Q=function(){D.forEach(function(n){n.callback(i.getCanvas2dContext(),y,W())})},Z=function(){u(o)&&t.clearTimeout(o)},q=function(){f._STOPPED||w(function(){an(Q),f.ANIMATION_RUNNING_STATUS&&q()})};M.subscribe("setAnimationProperties",function(n){T(n,y)}),M.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){D.push({name:n.name,callback:n.cb,priority:n.priority})}),D=D.slice().sort(function(n,a){return n.priority-a.priority})}catch(a){h(A(),"animationLoop",a.message,a)}}),M.subscribe("configuration-changed",function(n){D=[],M.publish("draw-callback-requested-reconfiguration",{})});var z=function(n){var a=n!=f.ANIMATION_RUNNING_STATUS;return a&&(0==f.ANIMATION_RUNNING_STATUS&&1==n,1==f.ANIMATION_RUNNING_STATUS&&0==n&&Z(),f.ANIMATION_RUNNING_STATUS=n),a},W=function(){return I},$=function(){var n=!1;0==y.frameCounter&&M.publish("FIRST-FRAME",{});var a=B.now(),e=a-y.msLastFrameDrawn;if(e>y.msPerFrame){var t=e%y.msPerFrame;y.msLastFrameDrawn=a-t,n=!0}return n},nn=function(){if(!(y.animation_duration_inFrames<1)){var n=y.animation_duration_inFrames+y.waitframesBetweenTwoAnimations;y.currentLoopFrame=y.frameCounter%n;var a=0==y.currentLoopFrame,e=y.currentLoopFrame>=y.animation_duration_inFrames;a&&(y.isInAnimationTransition=!0,M.publish("drawing-triggered-animation-start",y)),e&&y.isInAnimationTransition&&(y.isInAnimationTransition=!1,M.publish("drawing-triggered-animation-end",y))}},an=function(n){var a=$();a&&(y.frameCounter++,nn(),n())},en=function(n){return n(i.getCanvas2dContext())},tn=function(){var n=17,a=2,e=1,t=W().canvasProperties,r=0;t.hasShadow&&(r=r+a+e),t.hasLabel&&(t.h=t.h+n),t.w=t.w+r,t.h=t.h+r},rn=function(n){T(n,W().canvasProperties),tn()};M.subscribe("setCanvasProperties",rn,10);var on=function(){i.onCanvas2dContext(function(n){var a=W().canvasProperties;n.clearRect(0,0,a.w,a.h),a.hasShadow&&P()})};M.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,a){W().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,e){e.autoTriggerTextChange_onFrame!==a&&e.currentLoopFrame==e.autoTriggerTextChange_onFrame&&M.publish("drawing-change-text",{})},cn=function(n){M.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};M.subscribe("draw-callback-requested-reconfiguration",cn,15),i.__CODE_VERSION=n,i.getCanvasObject=W,i.getCanvas2dContext=function(){return W().canvas2dContext},i.onCanvas2dContext=en,i.getXYCanvas=function(){return{x:W().canvasProperties.xBase,y:W().canvasProperties.yBase}},i.addDrawCallback=X,i.getCanvasProperties=function(){return W().canvasProperties},i.setCanvasProperties=function(n){for(var a in n)n.hasOwnProperty(a)&&(I.canvasProperties[a]=n[a])},i.updateCanvasProperties=function(n){i.setCanvasProperties(n(W().canvasProperties))},i.getAnimationFrames=function(){return y.frameCounter},i.getAnimationControl=function(){return y},i.setAnimationControl=function(n){for(var a in n)n.hasOwnProperty(a)&&(y[a]=n[a])},i.start=H,i.changeRunningStatus=z,i.getRunningStatus=function(){return f.ANIMATION_RUNNING_STATUS},i.eventBus=M,i.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.bars={},e=!1,t=3,r=1,o=0,i=[2,5,10];n.eventBus.subscribe("set-bars-params",function(a){f(a),n.eventBus.publish("configuration-changed",{})});var s=[],u={xBase:5,yBase:13,hMin:2,hMax:10,w:4,barsColours:[["#3e8bfd","#2572e4"],["#feb23f","#dc901d"],["#d83f3f","#b41b1b"]],parent:n},c=function(){return u},f=function(n){for(var a in n)n.hasOwnProperty(a)&&(u[a]=n[a])},A=function(n){e=!0;for(var a=0;a<t;a++)n.push({x:a*(u.w+1),y:0,width:u.w,height:i[a],animateDirection:r,gradient:null,gradientStart:u.barsColours[a][0],gradientEnd:u.barsColours[a][1]})},l=function(a){var e=.5,t=a.height,i=n.getXYCanvas();a.animateDirection==r&&t>=u.hMax?a.animateDirection=o:a.animateDirection==o&&t<=u.hMin&&(a.animateDirection=r),t+=e*(a.animateDirection==r?1:-1),a.y=u.yBase-t+i.y,a.height=t},d=function(a){return function(e){var t=n.getXYCanvas();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.beginPath(),e.fillStyle=m(a,e),e.fillRect(t.x+u.xBase+a.x,a.y,a.width,a.height)}},v=function(a){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:h,priority:20,name:"bars_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",v,11);var h=function(){e||A(s);for(var a in s)if(s.hasOwnProperty(a)){var t=s[a];l(t),n.onCanvas2dContext(d(t))}},m=function(a,e){var t=n.getXYCanvas(),r=u.xBase,o=e.createLinearGradient(r+a.x+t.x,a.y,r+a.x+a.width,a.height+a.y);return o.addColorStop(0,a.gradientStart),o.addColorStop(1,a.gradientEnd),o};a.getBoxProperties=c,a.setBoxProperties=f,a.transformBarsColour=function(n){barsColours=n(u.barsColours)},a.draw=h}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.statsText={},t={xBase:0,yBase:0},r=function(){return t},o=function(){var a=n.getXYCanvas();return t.xBase=a.x,t.yBase=a.y,t},i=[],s={stats_values:[],indexStatToShow:0,drawValueCallback:a,drawValueCallbackWithValue:a,drawMetricCallback:a},u=25,c=0,f=function(){return c%u==1},A=function(n){i=n};n.eventBus.subscribe("set-textbox-style",function(a){i=a,n.eventBus.publish("configuration-changed",{})}),n.eventBus.subscribe("canvas-drawValueFunction",function(n){"undefined"!=typeof n["transformationFunction"]&&(s.drawValueCallback=n["transformationFunction"])});function l(n,a,e,t){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+n)?+n:0,o=isFinite(+a)?Math.abs(a):0,i="undefined"==typeof t?",":t,s="undefined"==typeof e?".":e,u="",c=function(n,a){var e=Math.pow(10,a);return""+(Math.round(n*e)/e).toFixed(a)};return u=(o?c(r,o):""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(s)}var d=function(e){if(s.stats_values=e,s.drawValueCallback!=a){var t=e[0].value;s.drawValueCallbackWithValue=s.drawValueCallback(t)}n.eventBus.publish("configuration-changed",{})},v=function(){return s.stats_values},h=function(n){if(n===s.stats_values)return!1;if(typeof n==typeof[])for(var a in n)if(n.hasOwnProperty(a)&&typeof n[a]!=typeof{})return!1;return!0},m=function(){return n.globalObjectName+"_setValues"},g=function(){if(f()){var a=m();if("undefined"!=typeof n.$window&&"undefined"!=typeof n.$window[a]){var e=n.$window[a];h(e)&&d(e)}}},b=function(n){return(""+n).match(/^\s*[0-9]+\s*$/)?l(n,0,""," "):n},p=function(a,e){return function(t){t.shadowColor="transparent",t.font=a.name.font,t.textAlign=a.name.align,t.fillStyle=a.name.color,t.fillText(e.name,a.name.x+r().xBase,a.name.y+r().yBase),t.font=a.value.font,t.textAlign=a.value.align,t.fillStyle=a.value.color;var o=e.value;try{o=b(e.value)}catch(i){n.debug(i)}t.fillText(o,a.value.x+r().xBase,a.value.y+r().yBase)}},w=function(){s.indexStatToShow+=i.length,s.indexStatToShow>=s.stats_values.length&&(s.indexStatToShow=0)},B=!1;n.eventBus.subscribe("draw-hideText",function(n){B=!0},11),n.eventBus.subscribe("draw-unHideText",function(n){B=!1},11);var T=function(n){if(!B){var a,e,t=s.indexStatToShow,r=v(),o=r.length;r.length>i.length&&(o=i.length);for(var u=0;u<o&&(t>=r.length&&(t=0),r[t]);u++)a=i[u],e=r[t],p(a,e)(n),t++}},x=function(n,e){return c++,g(),o(),s.drawValueCallbackWithValue!=a?(s.drawValueCallbackWithValue(n),void 0):(T(n),void 0)},S=function(a){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:x,priority:15,name:"show_stats_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",S,11);var C=n.eventBus.subscribe("drawing-change-text",w,10);e.draw=x,e.setBoxes=A,e.setValues=d}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e={main:"",source:a,loaded:!1};e.main="data:image/png;base64,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";var t=function(a){var t=e.source=new Image;t.onload=function(){e.loaded=!0,n.eventBus.publish("background-image-loaded",e),n.eventBus.publish("configuration-changed",{})},t.src=e.main};n.eventBus.subscribe("FIRST-FRAME",t,5),n.image_base64_src=e}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.counter={};e.ID="431",e.properties={w:108,h:72,hasShadow:!0};var t=!1,r={backgroundImageObject:a},o={xBase:5,yBase:13,barsColours:[["#8ab9fd","#117ae3"],["#fec745","#eb8a26"],["#76fd1c","#3db31c"]]},i={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110},s=[{name:{x:4,y:27,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:27,align:"right",color:"#ffffff",font:"11px Arial"}},{name:{x:4,y:41,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:42,align:"right",color:"#ffffff",font:"11px Arial"}},{name:{x:4,y:55,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:56,align:"right",color:"#ffffff",font:"11px Arial"}},{name:{x:4,y:68,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:105,y:69,align:"right",color:"#ffffff",font:"11px Arial"}}];n.eventBus.publish("set-textbox-style",s),n.eventBus.publish("setCanvasProperties",e.properties),n.eventBus.publish("setAnimationProperties",i),n.eventBus.publish("set-bars-params",o);var u={alpha:{movementsPerFrame:1,min:0,max:100,cur:0}},c=function(n){var a=u;a.alpha.movementsPerFrame=(u.alpha.max-u.alpha.min)/(i.animation_duration_inFrames/2)};c(i.animation_duration_inFrames);var f=function(n){var a=n,e=0;if(!a.isInAnimationTransition)return e;var t=a.currentLoopFrame<a.animation_duration_inFrames/2,r=!t;return t&&(e=1),r&&(e=-1),e},A=function(n,a){var e=u,t=f(a);0==t?e.alpha.cur=e.alpha.min:l(n,t)},l=function(a,e){var t=u,o=n.getXYCanvas(),i=t.alpha.movementsPerFrame*e;t.alpha.cur=Math.max(Math.min(t.alpha.cur+i,t.alpha.max),t.alpha.min),a.save(),a.globalAlpha=t.alpha.cur/100,a.drawImage(r.backgroundImageObject.source,o.x,o.y),a.restore()},d=function(a,e){n.eventBus.publish("clear-canvas-rectangle",{});var t=n.getXYCanvas();a.drawImage(r.backgroundImageObject.source,t.x,t.y)},v=function(e){r.backgroundImageObject!=a&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:d,priority:10,name:"drawBackground"},{cb:A,priority:19,name:"drawAnimation"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",v,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(i),f.AUTOSTART&&i.start()}catch(fn){}return i},g="base.js",b=window,p="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[p])&&window[p]===!0,window[d()]=m,window["histats_canvascounters_"+g]=m}).call(this);