"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[90742],{950271:(e,t,n)=>{n.r(t),n.d(t,{OLXChatServiceContextWrapper:()=>l});var r=n(511459),i=n(396005),a=n(166937),o=n(895225),l=e=>{var{children:t}=e,n=(0,r.y)();return(0,o.jsx)(i.ZP,{children:(0,o.jsx)(a.lk,{chatServiceConfig:n,children:t})})}},511459:(e,t,n)=>{n.d(t,{y:()=>y});var r=n(371803),i=n(739716),a=n(271548),o=n(749856),l=n(152776),c=n(513045),s=n(262173),u=n(145580);function d(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}var f=()=>{var{getAuthToken:e,authenticated:t}=(0,r.useContext)(s.Vo);return(0,r.useMemo)((()=>{return{getToken:(n=function*(){var n,r=null===(n=yield e())||void 0===n?void 0:n.accessToken;if(r){var i=(0,u.x)(r);if(i){var o=Date.now()/1e3,l=i.exp<o,c=i.exp<o+1;l?a.default.createPageAction("CHAT: EXPIRED TOKEN DETECTED",{authenticated:t}):c&&a.default.createPageAction("CHAT: TOKEN WILL EXPIRE IN 1S",{authenticated:t})}}return r},r=function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(e){d(a,r,i,o,l,"next",e)}function l(e){d(a,r,i,o,l,"throw",e)}o(void 0)}))},function(){return r.apply(this,arguments)}),unauthorizedHandler:()=>!0,authenticated:t};var n,r}),[e,t])};function p(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=e=>{if("custom:single_closed_question"===e.type)return(e=>{var{extras:t}=e;if(t){var{question_id:n,text:r,detailed_text:i,options:a,visibility_privacy_note_text:o,destination:l}=t;return{type:"custom:single_closed_question",extras:{text:r,questionId:n,questionText:r,detailedText:i,options:a,privacyNoteText:o,destination:l}}}})(e)},y=()=>{var{isFeatureFlag:e}=(0,o.Z)(),t=f(),{siteCode:n,locale:s,langISOCode:u,platform:d,chatApiConfig:{api:{core:v,classifieds:h},ws:{url:y}}}=(0,l.MG)(),{chatClassifiedsApi:b}=c.V,j=(0,r.useCallback)(function(){var e,t=(e=function*(e,t){var n=t,r=yield(0,i.Z)();return r&&(n=m(m({},n),{},{headers:m(m({},t.headers),{},{"X-Fingerprint":r})})),[e,n]},function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,l,"next",e)}function l(e){p(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),[]);return(0,r.useMemo)((()=>({apiUrls:{core:v,classifieds:e(b)?h:v},websocketUrl:y,clientName:n,clientVersion:(0,a.getReleaseTag)(),platform:"mobile"===d?"MWEB":"DESKTOP",customMessageDataParser:g,language:"".concat(s,", ").concat(u),requestInterceptor:j,authProvider:t})),[n,s,u,d,v,h,b,y,t,j,e])}},513045:(e,t,n)=>{n.d(t,{V:()=>r});var r={buyFromChatButton:"delivery-ua-buy-from-chat-button",employerPanel:"employer-panel",employerPanelRedirectFromMessages:"employer-panel-redirect-from-messages",employerPanelRedirectFromTransactionalMessages:"employer-panel-redirect-from-transactional-messages",newModerationSubmitApi:"user-chat-report-submit-on-reporting-gateway",newModerationReasonsApi:"user-chat-report-reason-retrieval-from-reporting-gateway",chatClassifiedsApi:"chat-classifieds-api"}},366289:(e,t,n)=>{n(371803);var r,i,a,o,l,c=n(490845),s=n(548858),u=n(755580),d=n(905258),f=n(671893),p=n(958408),v=n(838592),m=n(895225);function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=(0,u.default)(f.default)(r||(r=h(["\n    padding: 0;\n"]))),y=(0,u.default)(d.ZP)(i||(i=h(["\n    width: 100%;\n    padding: 0;\n"]))),b=u.default.div(a||(a=h(["\n    margin: 0 0 "," 0;\n"])),(e=>e.theme.sizes[16])),j=(0,u.default)(p.Headline5)(o||(o=h(["\n    margin-bottom: ",";\n"])),(e=>e.theme.sizes[16])),O=(0,u.default)(v.Paragraph4)(l||(l=h(["\n    margin-bottom: ",";\n"])),(e=>e.theme.sizes[16]));t.Z=(0,c.injectIntl)((e=>{var{image:t,title:n,description:r,onAccept:i,acceptButtonTitle:a,intl:o,className:l,hideModalHandler:c,primaryButton:u}=e,d=n?()=>(0,m.jsx)(j,{children:n}):void 0,f=u?y:g;return(0,m.jsx)(s.Z,{className:l,renderImage:t&&(()=>(0,m.jsx)(b,{children:t()})),renderTitle:d,renderDescription:"function"==typeof r?r:()=>(0,m.jsx)(O,{children:r}),renderActions:()=>(0,m.jsx)(f,{"data-testid":"alert-button",onClick:i,children:a||o.formatMessage({id:"common.accept"})}),hideModalHandler:c})}))},548858:(e,t,n)=>{n(371803);var r,i,a,o=n(755580),l=n(895225),c=o.default.div(r||(i=["\n    border-radius: ",";\n    background-color: ",";\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n"],a||(a=i.slice(0)),r=Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(a)}}))),(e=>e.theme.radii[4]),(e=>e.theme.colors.white));t.Z=e=>{var{renderImage:t,renderTitle:n,renderDescription:r,renderActions:i,hideModalHandler:a,className:o,useContainer:s=!0,customDialog:u}=e;if(u)return u(a);var d=()=>(0,l.jsxs)(l.Fragment,{children:[t&&t(),n&&n(),r&&r(),i&&i(a)]});return s?(0,l.jsx)(c,{"data-testid":"dialog",className:o,children:d()}):(0,l.jsx)("div",{"data-testid":"dialog",className:o,children:d()})}},396005:(e,t,n)=>{n.d(t,{MJ:()=>x});var r,i,a=n(371803),o=n(450806),l=n.n(o),c=n(415219),s=n.n(c),u=n(366289),d=n(106157),f=n(548858),p=n(331575),v=n(755580),m=n(895225);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){b(a,r,i,o,l,"next",e)}function l(e){b(a,r,i,o,l,"throw",e)}o(void 0)}))}}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var P=(0,v.default)(d.Z)(r||(r=O(["\n    margin-top: -",";\n"])),(e=>e.theme.sizes[12])),x=a.createContext({displayPrompt:()=>null,displayAlert:()=>null,displayDialog:()=>null}),w="alert",C="prompt",A="dialog",D=(e,t)=>(0,m.jsx)(P,g(g({},e),{},{onCancel:function(){var n=j((function*(n){var r=l()(e,"onCancel",s()),i=yield r(n);t(),null==i||i()}));return function(e){return n.apply(this,arguments)}}(),onAccept:function(){var n=j((function*(n){var r=l()(e,"onAccept",s()),i=yield r(n);t(),null==i||i()}));return function(e){return n.apply(this,arguments)}}()})),E=(e,t)=>(0,m.jsx)(u.Z,g(g({},e),{},{onAccept:function(){var n=j((function*(n){var r=l()(e,"onAccept",s()),i=yield r(n);t(),null==i||i()}));return function(e){return n.apply(this,arguments)}}()})),z=(e,t,n)=>{switch(e){case w:return E(t,n);case C:return D(t,n);case A:return((e,t)=>(0,m.jsx)(f.Z,g(g({},e),{},{hideModalHandler:t,useContainer:!1})))(t,n);default:return null}},S=(0,v.default)(p.u_)(i||(i=O(["\n    max-width: 400px;\n"])));t.ZP=e=>{var{children:t}=e,[n,r]=(0,a.useState)({visible:!1}),i=(0,a.useCallback)(((e,t,n)=>{var{position:i,showCloseIcon:a}=t;r({visible:!0,config:{type:e,params:t,modalProps:g({position:i||"center",showCloseIcon:null==a||a},n)}})}),[]),o=(0,a.useRef)({displayPrompt:i.bind(null,C),displayAlert:i.bind(null,w),displayDialog:i.bind(null,A)}),{visible:l,config:c}=n;return(0,m.jsxs)(x.Provider,{value:o.current,children:[t,l&&(0,m.jsx)(S,g(g({"data-testid":"modal",onClose:()=>{var e,t,i;r((e=>({visible:!1,config:e.config}))),null===(e=n.config)||void 0===e||null===(t=e.params)||void 0===t||null===(i=t.hideModalHandler)||void 0===i||i.call(t)}},null==c?void 0:c.modalProps),{},{children:!!c&&z(c.type,c.params,(()=>r((e=>({visible:!1,config:e.config})))))}))]})}},106157:(e,t,n)=>{var r,i,a,o,l,c,s=n(371803),u=n(490845),d=n(548858),f=n(755580),p=n(905258),v=n(958408),m=n(838592),h=n(619395),g=n(671893),y=n(689318),b=n(727123),j=n(895225);function O(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function P(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=(0,f.default)(p.ZP)(r||(r=P(["\n    flex-basis: 50%;\n    min-width: 0;\n    font-size: ",";\n    padding: 0;\n"])),(e=>e.theme.sizes[14])),w=(0,f.default)(v.Headline5)(i||(i=P(["\n    margin: 0 0 "," 0;\n"])),(e=>e.theme.sizes[12])),C=(0,f.default)(m.Paragraph4)(a||(a=P(["\n    margin: 0 0 "," 0;\n"])),(e=>e.theme.sizes[48])),A=f.default.div(o||(o=P(["\n    margin: 0 0 "," 0;\n"])),(e=>e.theme.sizes[16])),D=f.default.div(l||(l=P(["\n    display: flex;\n    flex-direction: ",";\n    ",";\n    flex-wrap: nowrap;\n    justify-content: space-evenly;\n    align-self: stretch;\n    margin: 0 0 "," 0;\n"])),(e=>e.vertical?"column":"row"),(e=>e.vertical?(0,b.css)(c||(c=P(["\n                  align-items: center;\n              "]))):""),(e=>e.theme.sizes[4])),E=(0,u.injectIntl)((e=>{var{image:t,title:n,description:r,onCancel:i,onAccept:a,cancelButtonTitle:o,acceptButtonTitle:l,intl:c,className:u,hideModalHandler:f,isAcceptDisabled:v,verticalButtons:m,showLoaderOnAction:b}=e,[P,E]=(0,s.useState)(!1),z=n?()=>(0,j.jsx)(w,{children:n}):void 0,S=m?g.default:h.r,T=m?p.ZP:x,_=function(){var e,t=(e=function*(e){E(!0);try{return yield null==a?void 0:a(e)}finally{E(!1)}},function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){O(a,r,i,o,l,"next",e)}function l(e){O(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),M=[i&&(0,j.jsx)(S,{onClick:i,mt:m?16:void 0,children:o||c.formatMessage({id:"common.cancel"})},"cancel-btn"),a&&(0,j.jsx)(T,{onClick:_,disabled:v||b&&P,children:b&&P?(0,j.jsx)(y.default,{"data-testid":"loader",size:8}):l||c.formatMessage({id:"common.accept"})},"accept-btn")];return(0,j.jsx)(d.Z,{hideModalHandler:f,className:u,renderImage:t&&(()=>(0,j.jsx)(A,{children:t()})),renderTitle:z,renderDescription:"function"==typeof r?r:()=>(0,j.jsx)(C,{children:r}),renderActions:()=>(0,j.jsx)(D,{vertical:m,children:m?M.reverse():M})})}));t.Z=E},619395:(e,t,n)=>{n.d(t,{r:()=>c});var r,i,a,o=n(755580),l=n(671893),c=(0,o.default)(l.default)(r||(i=["\n    ","\n"],a||(a=i.slice(0)),r=Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(a)}}))),(e=>{var{theme:t}=e;return"\n        flex-basis: 50%;\n        min-width: 0;\n        line-height: ".concat(t.lineHeights[34],";\n        font-size: ").concat(t.fontSizes[14],";\n        padding: ").concat(t.space[0],";\n    ")}))},166937:(e,t,n)=>{var r=n(371803),i=n(492780),a=n(768992),o=n(514993);n(956075),n(309449),n(303030),n(574390),n(776392),n(801315),n(912142),n(584423),n(982122),n(160226);var l=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),c=function(e){return o.useChatEventsBridge(),l.default.createElement(l.default.Fragment,null,e.children)};t.lk=function(e){var t=e.children,n=e.chatServiceConfig,r=!!n.websocketUrl;return l.default.createElement(i.ChatServiceContext.Provider,{value:n},r?l.default.createElement(a.ChatWebSocketContextWrapper,null,l.default.createElement(c,null,t)):t)}}}]);
//# sourceMappingURL=olxeuweb.chat.olx-chat-service-context-wrapper.55cb6ec38.chunk.js.map