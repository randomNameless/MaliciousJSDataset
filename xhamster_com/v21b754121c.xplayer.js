!function(){var e={31465:function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function o(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function a(e,t,i=5){if(!e)throw TypeError("Element must be set");if(e.get&&(e=e.get(0)),"function"!=typeof t)throw TypeError("Check must be a function");"number"!=typeof i&&(i=5);let s=0,n=e;for(;n&&s++<i&&n!==document.body;){if(t(n))return n;n=n.parentElement}return!1}i.d(t,{Z:function(){return sf}}),i(88972);var l,c,h={css(e,t,i){if(!e)throw TypeError("Element not specified");if(!t||"string"!=typeof t&&"object"!=typeof t)throw TypeError("Style must be a string or an object");if(void 0===i&&"string"==typeof t)return(e.style[t]||window.getComputedStyle(e)).getPropertyValue(t);let s=(e,t,i)=>{if(!1===i)return e.style.removeProperty(t);"number"==typeof i&&-1==="zoom,opacity,z-index".indexOf(t)&&(i+="px"),e.style.setProperty(t,i)};if("string"==typeof t)s(e,t,i);else for(let i in t)t.hasOwnProperty(i)&&s(e,i,t[i])},findElPosition(e){let t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0,bottom:e.offsetHeight,right:e.offsetWidth};let i=document.documentElement,s=document.body,n=i.clientLeft||s.clientLeft||0,r=window.pageXOffset||s.scrollLeft,o=t.left+r-n,a=i.clientTop||s.clientTop||0,l=window.pageYOffset||s.scrollTop;return{left:Math.round(o),top:Math.round(t.top+l-a),width:Math.round(e.offsetWidth),height:Math.round(e.offsetHeight)}},addClass(e,t){let i=e.className?e.className.split(" "):[];for(let e=0;e<i.length;e++)if(i[e]==t)return;i.push(t),e.className=i.join(" ")},hasClass:(e,t)=>` ${e.className} `.indexOf(` ${t} `)>-1,removeClass(e,t){let i=e.className.split(" ");for(let e=0;e<i.length;e++)i[e]==t&&(i.splice(e,1),e--);e.className=i.join(" ")},getScript:e=>new Promise((t,i)=>{let s=document.createElement("script");s.type="text/javascript",s.src=e,s.defer=!0,s.onload=t,s.onerror=i,document.body.appendChild(s)}),isElement(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},checkTransformVendor(){let e=document.createElement("div");if(null==e.style.transform){let t=["Webkit","Moz","ms"];for(let i in t)if(void 0!==e.style[`${t[i]}Transform`])return`${t[i]}Transform`}return"transform"},hasParentByData:(e,t,i=5)=>a(e,e=>!!e.hasAttribute(`data-${t}`),i),hasParentByTag:(e,t,i=5)=>a(e,e=>e.tagName.toLowerCase()===t.toLowerCase(),i),hasParent:(e,t,i=5)=>a(e,e=>e===t,i),removeElement(e){e.parentNode&&e.parentNode.removeChild(e)}};let u=/(:?(\?|&)t=)([0-9]+\.[0-9]{1,2})/;var d={OFFSET_REGEX:u,parseTime(e,t){let i=parseInt(e,10),s=Math.floor(i/3600)||0,n=Math.floor((i-3600*s)/60)||0,r=i-3600*s-60*n||0;return s<10&&(s=`0${s}`),n<10&&(n=`0${n}`),r<10&&(r=`0${r}`),`${(t?`${s}:`:"")+n}:${r}`},parseTimeOffset(){let e=u.exec(window.location.href);return!!e&&e[3]},stringToSeconds:e=>e.split(":").reduce((e,t)=>60*e+parseInt(t,10))},m=i(72253),p=i(14932);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function v(e,t){if(e){if("string"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(e,t)}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i,s,n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return r}}(e,t)||v(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=i(90874),g=["USER_ACTION_BLOCK","USER_ACTION_UNBLOCK","USER_ACTION","NO_USER_ACTION","USER_ACTION_PAUSE","USER_ACTION_UNPAUSE","PLAYER_ON_TIMEUPDATE"];let y=new(o(function e(t){n(this,e),this.events={},this.eventId=0,this.debug=t||!1},[{key:"on",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)throw Error("Dispatcher: no event name passed");if("number"!=typeof e)throw TypeError("Dispatcher: event name should be a number");if(!t)throw Error("Dispatcher: no callback passed");if("function"!=typeof t)throw Error("Dispatcher: callback not a function");return -1!==Object.keys(this.events).indexOf("".concat(e))||(this.events[e]={}),this.eventId++,this.events[e][this.eventId]={callback:t,context:i,once:n,extraData:s},this.eventId}},{key:"once",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.on(e,t,i,s,!0)}},{key:"offAllEvents",value:function(){this.events={}}},{key:"offMany",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(function(t){var i,s=_(t,2),n=s[0],r=s[1],o=null===(i=e.events)||void 0===i||null===(i=i[n])||void 0===i?void 0:i[r];o&&(e.debug&&console.info("Event listener unbound: ",n,r,o),delete e.events[n][r])})}},{key:"off",value:function(e,t){if(!e||!t){console.warn("Dispatcher: incorrect event name or eventId passed");return}var i=this.events[e];i&&i[t]&&delete i[t]}},{key:"logEmittedEvent",value:function(e,t){if(this.debug){var i=Object.keys(f.Z)[Object.values(f.Z).indexOf(e)];if(-1===g.indexOf(i))try{throw Error()}catch(e){var s=e.stack;console.info("Event emitted: ".concat(i),t,s)}}}},{key:"deleteEvent",value:function(e,t){try{delete this.events[e][t]}catch(e){}}},{key:"emit",value:function(e){for(var t=this,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];this.logEmittedEvent(e,s);var r=this.events[e];r&&Object.keys(r).length&&Object.keys(r).forEach(function(i){var n=Number(i);if(!Number.isNaN(n)){var o=r[n];if(o){if(!o.context){t.deleteEvent(e,n);return}o.extraData&&s.push(o.extraData),o.once&&t.deleteEvent(e,n),o.callback.apply(o.context,s)}}})}}]));var b=class{init(){window.WebKitPlaybackTargetAvailabilityEvent&&this.attachEvents()}onAirplayWirelessChanged(){var e;y.emit(f.Z.PLAYER_WIRELESS_CHANGED),"auto"!==this.core.sourceController.getCurrentQuality()&&-1!==this.core.sourceController.getQualities().indexOf("auto")&&(null===(e=this.core.videoElement)||void 0===e?void 0:e.webkitCurrentPlaybackTargetIsWireless)&&(y.emit(f.Z.PLAYER_SET_SOURCE,"auto"),y.emit(f.Z.SETTINGS_RENDER_QUALITY))}attachEvents(){this.core.videoElement.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.onAirplayWirelessChanged.bind(this))}constructor(e){this.core=e,this.init()}};let S={hls:"application/vnd.apple.mpegurl",dash:"application/dash+xml",h264:'video/mp4; codecs="avc1.640029"',vp9:'video/webm; codecs="vp9, opus"',h265:['video/mp4; codecs="hev1.1.6.L93.B0','video/mp4; codecs="hvc1.1.6.L93.B0"'],av1:'video/mp4; codecs="av01.0.00M.08"'};var T=class{defaultCapabilities(){return{videoElementSupported:!1,hlsJs:!1,dashJs:!1,dashJsVp9:!1,hls:!1,dash:!1,h264:!0,h265:!1,vp9:!1,av1:!1,android:!1,idevice:!1,mobile:!1,ipad:!1,iphone:!1,touch:!1,gyroscope:!1,console:!1,ie:!1,safari:!1,chrome:!1,chromeIos:!1,firefox:!1,samsung:!1,fullscreen:!1,volumeControl:!1,mobilePlayer2:!1}}init(){this.detectCapabilities()}detectCapabilities(){this.checkIsMobile(),this.checkIsConsole(),this.checkIsIE(),this.checkBrowser(),this.checkHlsJs(),this.checkDashJs(),this.checkSupportedFormatsAndVolumeControl(),this.checkTouchScreen(),this.checkFullscreen()}getMediaSource(){return"undefined"!=typeof window?window.MediaSource||window.WebKitMediaSource:null}checkMediaSource(e){let t=this.getMediaSource(),i=window.SourceBuffer||window.WebKitSourceBuffer,s=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported(e),n=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!s&&!!n}checkHlsJs(){this.capabilities.hlsJs=this.checkMediaSource(S.h264)}checkDashJs(){this.capabilities.dashJs=this.checkMediaSource(S.h264),this.capabilities.dashJsVp9=this.checkMediaSource(S.vp9)}checkSupportedFormatsAndVolumeControl(){try{let t=document.createElement("video"),i=t.muted;if(t.muted=!t.muted,this.capabilities.volumeControl=i!==t.muted,!t.canPlayType)return;let s=["hls","h265","dash","h264"];for(let i in S){let n;if("h264"===i)continue;let r=["probably"];s.includes(i)&&r.push("maybe");let o=!!this.capabilities.idevice&&this.capabilities.idevice<11;if("h265"===i&&(o||this.capabilities.console)){this.capabilities[i]=!1;continue}let a=S[i];n="h265"===i?t.canPlayType(a[0])||t.canPlayType(a[1]):t.canPlayType(a);let l=r.includes(n);if(l)this.capabilities[i]=l;else{var e;this.capabilities[i]=!!(null===(e=this.getMediaSource())||void 0===e?void 0:e.isTypeSupported(a))}}}catch(e){}}checkIsMobile(){try{if(/iP(hone|od|ad)/.test(navigator.appVersion)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1){(/iPhone/.test(navigator.appVersion)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.capabilities.iphone=!0),(/iPad/.test(navigator.appVersion)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.capabilities.ipad=!0),this.capabilities.mobile=!0,this.capabilities.idevice=parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],10);return}let e=`${navigator.userAgent.toLowerCase()}`.match(/android\s([0-9.]*)/);e&&2===e.length&&(this.capabilities.android=parseFloat(e[1]),this.capabilities.mobile=!0)}catch(e){}}checkTouchScreen(){this.capabilities.touch="ontouchstart"in window||navigator.msMaxTouchPoints||navigator.maxTouchPoints>1}checkIsConsole(){try{(navigator.userAgent.match(/playstation/i)||navigator.userAgent.match(/xbox/i)||navigator.userAgent.match(/wii/i)||navigator.userAgent.match(/psvita/i))&&(this.capabilities.console=!0)}catch(e){}}checkIsIE(){try{let e;this.capabilities.ie=(e=navigator.userAgent.match(/(?:MSIE |Edge\/*|Trident\/.*; rv:)(\d+)/))?parseInt(e[1],10):null}catch(e){}}checkFullscreen(){this.capabilities.fullscreen=!0===document.fullscreenEnabled||!0===document.webkitFullscreenEnabled||!0===document.mozFullScreenEnabled||!0===document.msFullscreenEnabled||this.capabilities.idevice&&!this.core.isVr||"number"==typeof this.capabilities.ie&&this.capabilities.ie<11}checkBrowser(){try{let e=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),t=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&"Win32"!==navigator.platform,i=/Firefox\//.test(navigator.userAgent),s=/SamsungBrowser\//.test(navigator.userAgent),n=/Safari/.test(navigator.userAgent)&&"Win32"!==navigator.platform&&/CriOS/.test(navigator.userAgent);this.capabilities.firefox=i,this.capabilities.chrome=e,this.capabilities.chromeIos=n,this.capabilities.safari=t,this.capabilities.samsung=s}catch(e){}}checkGyroscope(e){"ondevicemotion"in window||(this.capabilities.gyroscope=!1);let t=i=>{(i.rotationRate.alpha||i.rotationRate.beta||i.rotationRate.gamma)&&(this.capabilities.gyroscope=!0,e()),window.removeEventListener("devicemotion",t)};if("function"==typeof DeviceOrientationEvent){if("function"!=typeof DeviceOrientationEvent.requestPermission){window.addEventListener("devicemotion",t);return}DeviceOrientationEvent.requestPermission().then(t=>("granted"===t&&(this.capabilities.gyroscope=!0,e()),t)).catch(()=>{let t=()=>{this.checkGyroscope(e),this.core.element.removeEventListener("click",t.bind(this))};this.core.element.addEventListener("click",t.bind(this))})}}constructor(e){this.core=e,this.capabilities=this.defaultCapabilities(),this.init()}};class A{static ajax(e,t,i=!1,s={}){let n=new("onload"in new XMLHttpRequest?XMLHttpRequest:window.XDomainRequest),r,o="{}";if(!s.clean&&i){if("GET"===e)r=A.serializeQuery(i),t+=`${(t.includes("?")?"&":"?")+r}&_=${Math.random()}`;else try{o=JSON.stringify(i)}catch(e){o="{error: stringify error}"}}s.no_cache&&(t+=`${(t.includes("?")?"&":"?")+r}&_=${Math.random()}`),n.open(e,t,!s.sync),s.fetch||s.clean||n.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.clean||(n.withCredentials=!1!==s.credentials,n.aborting=!1),s.contentType&&n.setRequestHeader("Content-Type",s.contentType);let a=new Promise((e,t)=>{n.onreadystatechange=function(){if(2===this.readyState&&s.headersReceivedCallback&&"function"==typeof s.headersReceivedCallback&&s.headersReceivedCallback(),4===this.readyState){if(200!==this.status){t({statusText:n.aborting?"abort":n.statusText,status:n.status,responseJSON:n.responseText,responseURL:n.responseURL,headers:n.getAllResponseHeaders()});return}e(s.clean?n:n.responseText)}}});return a.abort=function(){n.aborting=!0,n.abort()},n.send(o),a}static getHeadRedirect(e,t=!1){return A.ajax("HEAD",e,!1,{sync:t,clean:!0})}static serializeQuery(e){let t=[];for(let i in e)e.hasOwnProperty(i)&&t.push(`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`);return t.join("&")}static sendBeacon(e,t=null){let i="";if(t)try{i=JSON.stringify(t)}catch(e){return Promise.reject()}if(navigator.sendBeacon)return navigator.sendBeacon(e,i),Promise.resolve();let s="GET",n={async:!1};return i.length>0&&(s="POST",n.raw=!0),A.ajax(s,e,i,!1,n)}}var k={IO_ERROR:"IO_ERROR",PLAYER_ERROR:"PLAYER_ERROR",SOURCE_ERROR:"SOURCE_ERROR",SCRIPT_ERROR:"SCRIPT_ERROR",FALLBACK_ERROR:"FALLBACK_ERROR",FALLBACK_INIT:"FALLBACK_INIT",INIT_ERROR:"INIT_ERROR",NETWORK_ERROR:"NETWORK_ERROR"};let L={},C=new class{log(e,t,i,s){let n={component:t,message:i,stack:Error().stack};n=(0,m._)({},s,n),this.errorLog.push(n),window.Raven&&window.Raven.captureMessage(`XPlayer-${e}`,{extra:n}),this.debug&&console.error(n)}send(e,t){if(e=L[e]){try{t=JSON.stringify(t)}catch(e){t="{'error': 'stringify error'}"}A.ajax("GET",`/statistics?key=${e}&data=${t}`)}}constructor(){this.debug=!1,this.errorLog=[],this.TYPES=k}};var P=new class{getDefaultStates(){return{ads:!1,ads_playing:!1,ads_preload:!1,error:!1,playing:!1,ended:!1,duration:0,sourceLoaded:!1,remoteSourceLoading:!1,chromecast:!1,currentTime:!1,savedCurrentTime:!1,playbackRate:1,swiping:!1,fullscreen:!1,seeking:!1,orientation:null}}init(){y.on(f.Z.ADS_STARTED,this.setAds.bind(this)),y.on(f.Z.ADS_ENDED,this.clearAds.bind(this)),y.on(f.Z.PLAYER_ON_PLAY,this.set.bind(this,"playing",!0)),y.on(f.Z.PLAYER_ON_PLAYING,this.set.bind(this,"playing",!0)),y.on(f.Z.PLAYER_ON_PAUSE,this.set.bind(this,"playing",!1)),y.on(f.Z.PLAYER_ON_ENDED,this.set.bind(this,"playing",!1)),y.on(f.Z.PLAYER_ON_SWIPE_START,this.set.bind(this,"swiping",!0)),y.on(f.Z.PLAYER_ON_SWIPE_SEEK_END,this.set.bind(this,"swiping",!1)),y.on(f.Z.PLAYER_ON_ENDED,this.set.bind(this,"ended",!0)),y.on(f.Z.PLAYER_ON_PLAY,this.set.bind(this,"ended",!1)),y.on(f.Z.PLAYER_ON_PLAYING,this.set.bind(this,"ended",!1)),y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.onTimeupdate,this),y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.onDurationChange,this),y.on(f.Z.PLAYER_ON_RATECHANGE,this.onRateChange,this),y.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.onSetPlaybackRate,this),y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.toggleFullscreen,this)}toggleFullscreen(){this.set("fullscreen",!this.get("fullscreen"))}onDurationChange(e){this.set("duration",e.target.duration)}onSetPlaybackRate(e){this.set("playbackRate",parseFloat(e))}onRateChange(e){this.set("playbackRate",parseFloat(e.target.playbackRate))}onTimeupdate(e){this.states.chromecast||this.set("currentTime",e.target.currentTime)}set(e,t){this.states[e]=t}setAds(){this.set("ads_playing",!0),this.set("ads_preload",!1)}clearAds(){this.set("ads",!1),this.set("ads_playing",!1),this.set("ads_preload",!1)}get(e){return this.states.hasOwnProperty(e)?this.states[e]:null}constructor(){this.states=this.getDefaultStates(),this.init()}},R={ABORTED:1,NETWORK:2,DECODER:3,SOURCE:4},O={1:R.ABORTED,2:R.NETWORK,3:R.DECODER,4:R.SOURCE},w={[R.ABORTED]:"Aborted error",[R.NETWORK]:"Network error",[R.DECODER]:"Decoder error",[R.SOURCE]:"Source error"};let N="xplayer-error",D="xh-helper-hidden";var I=class{init(){this.render(),this.attachEvents()}render(){this.errorElement=document.createElement("div"),this.errorElement.className="xplayer-error",h.addClass(this.errorElement,D),this.core.element.appendChild(this.errorElement)}attachEvents(){this.core.on(f.Z.PLAYER_ON_ERROR,this.processPlayerErrorEvent,this),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE_FAIL,this.processErrorType.bind(this,R.SOURCE,!0)),this.core.on(f.Z.PLAYER_ERROR_CONTROLLER_BLOCK,this.onErrorServiceBlock,this),this.core.on(f.Z.PLAYER_ERROR_CONTROLLER_UNBLOCK,this.onErrorServiceUnblock,this),this.core.on(f.Z.PLAYER_ON_PLAYING,this.hideError,this),this.errorElement.addEventListener("click",this.onErrorElementClick.bind(this))}onErrorElementClick(e){"reload-page"===e.target.className&&this.reloadPage()}onErrorServiceBlock(){this.blocked=!0}onErrorServiceUnblock(){this.blocked=!1}processPlayerErrorEvent(e){if(this.blocked)return;let t=O[e&&e.target&&e.target.error&&e.target.error.code];if(!t){this.checkPosterError();return}this.processErrorType(t)}processErrorType(e,t){let i=w[e];if(P.set("error",!0),C.log(`${C.TYPES.PLAYER_ERROR}-${e}`,"PlayerErrorService",i,{sourceCore:this.core.sourceController.getSourceUrl(),sourceVideo:this.core.videoElement.src,quality:this.core.sourceController.getCurrentQuality(),settings:this.core.settings,currentTimeCore:P.get("currentTime"),currentTimeVideo:this.core.videoElement.currentTime,readyStateVideo:this.core.videoElement.readyState}),e!==R.ABORTED){if(e===R.DECODER){this.processDecoderError();return}if(e===R.SOURCE&&!t){this.processSourceError();return}this.showError(i)}}processDecoderError(){if("hls"===this.core.sourceController.type&&"auto"===this.core.sourceController.getCurrentQuality()){this.core.emit(f.Z.PLAYER_FALLBACK_SOURCE);return}let e=P.get("currentTime");C.send("decoder",{quality:this.core.sourceController.getCurrentQuality(),currentTime:e,videoId:this.core.options.videoId}),this.core.emit(f.Z.PAUSE_ACTION_BLOCK),this.core.emit(f.Z.PLAYER_ON_DECODER_ERROR),this.core.setVideoSource(),this.core.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{this.core.emit(f.Z.PAUSE_ACTION_UNBLOCK),this.core.emit(f.Z.PLAYER_SET_CURRENT_TIME,e+5),this.core.once(f.Z.PLAYER_ON_SEEKED,()=>{this.core.emit(f.Z.PLAYER_PLAY)})})}processSourceError(){C.send("source",{sourceUrl:this.core.sourceController.getSourceUrl()}),this.core.emit(f.Z.PLAYER_FALLBACK_SOURCE)}checkPosterError(){let e=this.core.options.poster;if(!e){C.log(`${C.TYPES.PLAYER_ERROR}-POSTER`,"PlayerErrorService","no poster passed",{posterURL:e,videoId:this.core.options.videoId});return}this.checkImageAvailable(e)}checkImageAvailable(e){let t=new Image;t.onload=this.processUndefinedError.bind(this),t.onerror=this.processPosterNotAvailable.bind(this,e),t.src=e}processUndefinedError(){C.log(`${C.TYPES.PLAYER_ERROR}-UNDEFINED`,"PlayerErrorService","error code undefined",{source:this.core&&this.core.videoElement&&this.core.videoElement.src||null,currentTime:this.core&&P.get("currentTime")||null,settings:this.core&&this.core.settings||null,readyStateVideo:this.core&&this.core.videoElement&&this.core.videoElement.readyState||null})}processPosterNotAvailable(e){C.log(`${C.TYPES.PLAYER_ERROR}-POSTER`,"PlayerErrorService","poster not available",{posterURL:e,videoId:this.core.options.videoId})}reloadPage(){let e=-1===window.location.href.indexOf("?")?"?":"&",t=d.OFFSET_REGEX.test(window.location.href)?window.location.href.replace(d.OFFSET_REGEX,"$10.1"):`${window.location.href+e}t=0.1`;window.location.href=t}showError(e){let t=`<div class="error-wrapper">
                    <span class="error-message">${e}</span><br><span class="reload-page">Reload</span>
                </div>`;this.errorElement.innerHTML=t,h.removeClass(this.errorElement,D),h.addClass(this.core.element,N),this.core.emit(f.Z.USER_ACTION)}hideError(){P.set("error",!1),h.addClass(this.errorElement,D),h.removeClass(this.core.element,N)}hasError(){return P.get("error")}constructor(e){this.core=e,P.set("error",!1),this.blocked=!1,this.init()}},U=class{defaultOptions(){return{fallbackImageClass:"xplayer-fallback-image"}}init(){this.core&&this.core.on(f.Z.FALLBACK_TO_IMAGE,this.showFallbackImage,this)}showFallbackImage(){let e=document.getElementsByClassName(this.options.fallbackImageClass)[0];if(this.removePlayerElement(),this.destroyPlayerCore(),!e){C.log(C.TYPES.FALLBACK_ERROR,"FallbackService","FALLBACK_TO_IMAGE_ERROR",{fallbackImageClass:this.options.fallbackImageClass});return}h.removeClass(e,"xh-helper-hidden")}removePlayerElement(){this.core&&this.core.element&&this.core.element.parentNode&&this.core.element.parentNode.removeChild(this.core.element)}destroyPlayerCore(){this.core&&this.core.offAllEvents(),this.core=null}fallbackImage(){this.showFallbackImage()}constructor(e,t,i){this.core=t,this.options=(0,m._)({},this.defaultOptions(),i||{}),this.init()}};let M={hls:function(e,t){var i;return!t.safari&&!!t.hlsJs&&((null==e?void 0:e.av1)&&!t.av1&&delete e.av1,(null==e?void 0:e.h264)&&!t.h264&&delete e.h264,!!(null===(i=Object.keys(e))||void 0===i?void 0:i.length))},dash:function(e,t){return!t.safari&&!!t.dashJs&&!!e&&(e.url=[],e.vp9&&t.dashJsVp9&&e.url.push(e.vp9),e.h264&&e.url.push(e.h264),!!e.url.length)},standard:function(e,t){for(let i in e){if(!e.hasOwnProperty(i))continue;if(!t[i]||"[object Array]"!==Object.prototype.toString.call(e[i])){delete e[i];continue}let s=[];e[i]=e[i].filter(e=>"[object Object]"===Object.prototype.toString.call(e)&&!!e.url&&!!e.quality&&-1===s.indexOf(e.quality)&&("auto"!==e.quality||!!t.hls)&&(s.push(e.quality),e.label||(e.label=`${e.quality}`),!0)),e[i].length||delete e[i]}return!!Object.keys(e).length}};var x=function(e,t){if(!e||"object"!=typeof e)return null;let i=(0,m._)({},e);for(let e in i)if(i.hasOwnProperty(e)){if(!M.hasOwnProperty(e)){delete i[e];continue}M[e](i[e],t)||delete i[e]}return Object.keys(i).length?i:null},Y=i(11010);function Z(e){return -1!==e.indexOf("cdn13")?"zil":-1!==e.indexOf("lvlt")||-1!==e.indexOf("lmn")||-1!==e.indexOf("lmo")?"l3":-1!==e.indexOf("xhcdn")||-1!==e.indexOf("ahcdn")?"adv":"undefined"}var B=class{getDefaultOptions(){return{initialVideoQuality:!1,getSourceAfterRedirect:!1,disableSourceFallback:!1}}init(){console.error("SourceController abstract method")}getCurrentQuality(){console.error("SourceController abstract method")}getQuality(){console.error("SourceController abstract method")}getQualities(){console.error("SourceController abstract method")}getLabelFromQuality(){console.error("SourceController abstract method")}getSourceUrl(){console.error("SourceController abstract method")}getCDN(){console.error("SourceController abstract method")}getType(){console.error("SourceController abstract method")}prepareTimeupdate(){console.error("SourceController abstract method")}changeQuality(){console.error("SourceController abstract method")}attachSource(){console.error("SourceController abstract method")}fallbackSource(){console.error("SourceController abstract method")}destroy(){console.error("SourceController abstract method")}constructor(e,t){this.options=(0,m._)({},this.getDefaultOptions(),t)}};class V extends B{getCurrentQuality(){return this.currentQuality}getQuality(){let e=this.options.videoElement;if(!e)return 0;let t=e.videoWidth>e.videoHeight?e.videoHeight:e.videoWidth;return`${t}p`}getQualities(){return this.qualities}getChromecastUrl(){return this.getSourceUrl()}getLabelFromQuality(e=this.currentQuality){return this.getSourceFromQuality(e).label}getHasAv1Source(){return!1}getSource(){return this.getSourceFromQuality(this.currentQuality)}getSourceUrl(e=this.currentQuality){return this.getSourceFromQuality(e).url&&this.getSourceFromQuality(e).url[0]||(C.log(C.TYPES.SOURCE_ERROR,"SourceService",`No url ${this.currentQuality} quality found`,{options:this.options,sources:this.sources,quality:this.currentQuality,qualities:this.qualities}),null)}getCDN(){return Z(this.getSourceUrl())}getType(e=this.currentQuality){return this.getSourceFromQuality(e).type||""}init(){var e=this;return(0,Y._)(function*(){e.sources=yield e.getSources(e.sources),e.qualities=e.getLevelsQualities(),e.setQuality(e.options.initialVideoQuality),e.ready=!0,y.emit(f.Z.SOURCE_CONTROLLER_READY)})()}getSources(e){return new Promise(t=>{let i={},s=[];for(let t in e)e[t].forEach(e=>{i[e.quality]||(i[e.quality]=e),this.options.getSourceAfterRedirect?s.push(this.fillSourceUrlsAfterRedirect(i,e)):this.fillSourceUrls(i,e)});0!==s.length?Promise.all(s).then(()=>t(i)):t(i)})}fillSourceUrls(e,t){Array.isArray(e[t.quality].url)?e[t.quality].url.push(t.url):e[t.quality].url=[t.url],t.fallback&&e[t.quality].url.push(t.fallback)}fillSourceUrlsAfterRedirect(e,t){return new Promise(i=>{V.getSourceAfterRedirect(t.url).then(i=>{Array.isArray(e[t.quality].url)?e[t.quality].url.push(i):e[t.quality].url=[i]}).catch(()=>{e[t.quality].url=[]}).then(()=>t.fallback?V.getSourceAfterRedirect(t.fallback):null).then(i=>{i&&e[t.quality].url.push(i)}).then(i).catch(i)})}getLevelsQualities(){let e=Object.keys(this.sources).sort((e,t)=>"auto"===e?-1:parseInt(t,10)-parseInt(e,10));return e.length||C.log(C.TYPES.SOURCE_ERROR,"SourceService","No quality provided",{options:this.options,sources:this.sources,quality:this.currentQuality,qualities:this.qualities}),e}setQuality(e){return e||(e=this.currentQuality),0>this.qualities.indexOf(e)&&(e=this.qualities[0]),this.currentQuality=e,this.currentQuality}getSourceFromQuality(e){return this.sources[e]||{}}attachSource(e){e.src=this.getSourceUrl(),e.load(),P.set("sourceLoaded",!0)}changeQuality(e,t,i){return this.ready?(y.emit(f.Z.PLAYER_BEFORE_SET_SOURCE),t=this.setQuality(t),i||this.attachSource(e),t):(y.once(f.Z.SOURCE_CONTROLLER_READY,this.changeQuality,this,e,t,i),null)}prepareTimeupdate(e,t=!1,i=!1){let s=!1===t?P.get("currentTime"):t;y.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{y.emit(f.Z.PLAYER_SET_CURRENT_TIME,s),y.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{!1===e?(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE)):!0===e||P.get("playing")||P.get("error")?(y.emit(f.Z.PLAYER_PLAY,i),i&&(y.emit(f.Z.PLAYER_ON_SEEKED),y.emit(f.Z.PLAYER_SET_CURRENT_TIME,s))):(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE))})})}fallbackSource(){if(this.options.disableSourceFallback)return this.destroy(),!1;let e=this.getSourceFromQuality(this.currentQuality);return e.url.splice(0,1),!!e.url.length||((this.qualities.splice(this.qualities.indexOf(this.currentQuality),1),this.qualities.length)?(this.setQuality(),!0):(this.destroy(),!1))}destroy(){this.destroyed=!0,this.ready=!1,P.set("sourceLoaded",!1)}static getSourceAfterRedirect(e){return new Promise((t,i)=>{A.getHeadRedirect(e).then(e=>{if(!e.responseURL){i();return}t(e.responseURL)}).catch(()=>i())})}constructor(e,t={}){if(super(e,t),!e||!e.standard){this.destroy();return}this.sources=e.standard,this.qualities=null,this.currentQuality=null,this.type="standard",this.ready=!1}}var G=class{init(e){"session"===e&&this.checkSessionStorage(),"cookie"!==e&&this.checkLocalStorage(),this.checkCookie()}checkLocalStorage(){try{window.localStorage.setItem("check",1),window.localStorage.getItem("check"),window.localStorage.removeItem("check"),this.localStorageAvailable=!0}catch(e){}}checkSessionStorage(){try{window.sessionStorage.setItem("check",1),window.sessionStorage.getItem("check"),window.sessionStorage.removeItem("check"),this.sessionStorageAvailable=!0}catch(e){}}checkCookie(){try{let e=` ${document.cookie}`;this.cookieAvailable=!!e}catch(e){}}getCookie(e){let t=` ${document.cookie}`,i=` ${e}=`,s=null,n=0,r=0;return t.length>0&&-1!==(n=t.indexOf(i))&&(n+=i.length,-1===(r=t.indexOf(";",n))&&(r=t.length),s=unescape(t.substring(n,r))),s}setCookie(e,t,i){let s;let n=new Date;if(n.setTime(n.getTime()+6e4*i),s=`${e}=${t}; expires=${n.toGMTString()}; path=/;`,document.domain.length){let e=document.domain.replace(/^(www\.)/,"").split(".");for(;e.length>2;)e.shift();s+=`domain=${e.join(".").replace(/(^\.*)|(\.*$)/g,"")};`}document.cookie=s}setItem(e,t,i=8760){return this.sessionStorageAvailable?window.sessionStorage.setItem(e,t):this.localStorageAvailable?window.localStorage.setItem(e,t):(this.cookieAvailable&&this.setCookie(e,t,i),null)}getItem(e){return this.sessionStorageAvailable?window.sessionStorage.getItem(e):this.localStorageAvailable?window.localStorage.getItem(e):this.cookieAvailable?this.getCookie(e):null}constructor(e){this.localStorageAvailable=!1,this.cookieAvailable=!1,this.sessionStorageAvailable=!1,this.init(e)}};let F="auto";var H=class extends B{getChromecastUrl(){return this.chromecastSource}getHasAv1Source(){return this.hasAv1Source}getCurrentQuality(){return!!this.ready&&(this.hls.autoLevelEnabled?"auto":this.getQuality(this.hls.currentLevel))}getQualities(){return this.qualities}getLabelFromQuality(e=this.getCurrentQuality()){return e}getSourceUrl(){let e;if(!this.attached)return this.hlsSource;try{e=this.hls.streamController.levels[this.hls.streamController.level].url[0]}catch(t){e=this.hls.url}return e}getCDN(){return Z(this.getSourceUrl())}getType(e=this.getCurrentQuality()){let t;return"auto"===e&&(e=this.getQuality(-1)),parseInt(e,10)>2e3?t="FK":parseInt(e,10)>719&&(t="HD"),t}init(){this.destroyed||(this.storage=new G("session"),h.getScript(this.config.libSrc).then(()=>{if(!window.Hls){y.emit(f.Z.PLAYER_FALLBACK_SOURCE,!0),this.destroy();return}y.emit(f.Z.HLS_LOADED),this.loaded=!0,this.initHLS(),this.attachEvents(),this.getHlsQualities()}).catch(()=>{y.emit(f.Z.PLAYER_FALLBACK_SOURCE,!0),this.destroy()}))}initHLS(){this.config=(0,m._)({},window.Hls.DefaultConfig,this.getStartLevelConfig(),this.config||{}),this.hls=new window.Hls(this.config)}getStartLevelConfig(){var e;let t=null!==(e=this.storage.getItem("x-player-previous-auto-level"))&&void 0!==e?e:0;return{startLevel:t,testBandwidth:!t}}attachEvents(){this.hls.on(window.Hls.Events.ERROR,(e,t)=>{y.emit(f.Z.SOURCE_CONTROLLER_ON_ERROR,this.type,t),t.fatal&&y.emit(f.Z.PLAYER_FALLBACK_SOURCE)}),this.hls.on(window.Hls.Events.MEDIA_ATTACHED,()=>{this.attached=!0}),this.hls.on(window.Hls.Events.LEVEL_SWITCHED,(e,t)=>{y.emit(f.Z.SOURCE_TYPE_CHANGE),y.emit(f.Z.SETTINGS_RENDER_QUALITY),this.getHlsPreviousAutoLevel(t)}),this.hls.on(window.Hls.Events.FRAG_LOADING,()=>{y.emit(f.Z.HLS_FRAG_LOADING)}),this.hls.on(window.Hls.Events.FRAG_LOADED,(e,t)=>{y.emit(f.Z.HLS_FRAG_LOADED,t)})}getHlsPreviousAutoLevel(e){if(!this.hls.autoLevelEnabled)return;let{level:t}=e;try{t=JSON.stringify(t),this.storage.setItem("x-player-previous-auto-level",t)}catch(e){console.error(e)}}getHlsQualities(){this.hls.loadSource(this.hlsSource),this.hls.on(window.Hls.Events.MANIFEST_PARSED,(e,t)=>{if(this.qualities=this.getLevelsQualities(t.levels),!this.qualities||this.qualities.length<2){y.emit(f.Z.PLAYER_FALLBACK_SOURCE,!0);return}this.ready=!0,this.setQuality(this.options.initialVideoQuality),y.emit(f.Z.SOURCE_CONTROLLER_READY),y.emit(f.Z.SOURCE_TYPE_CHANGE)})}getQualityName(e){return e&&e.height?e.height>e.width?`${e.width}p`:`${e.height}p`:F}getLevelsQualities(e){let t=null;try{t=(t=["auto"]).concat(e.map(e=>this.getQualityName(e)).sort((e,t)=>parseInt(t,10)-parseInt(e,10)))}catch(e){}return t}setQuality(e){if(!this.loaded){y.once(f.Z.HLS_LOADED,this.setQuality.bind(this,e));return}if(!this.ready){this.hls.on(window.Hls.Events.MANIFEST_PARSED,()=>{this.setQuality(e),this.ready=!0,y.emit(f.Z.SOURCE_CONTROLLER_READY)});return}if(e||(e=this.getCurrentQuality()),e===F){this.hls.loadLevel=-1;return}this.hls.levels.forEach((t,i)=>{this.getQualityName(t)===e&&(this.hls.currentLevel=i,this.attached&&y.emit(f.Z.SHOW_LOADER))})}attachSource(e){if(!this.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.attachSource.bind(this,e));return}this.hls.attachMedia(e),P.set("sourceLoaded",!0)}changeQuality(e,t,i){!P.get("ads_playing")&&P.get("sourceLoaded")||i||this.attachSource(e),y.emit(f.Z.PAUSE_ACTION_BLOCK),this.setQuality(t),this.playAfterSet&&(y.emit(f.Z.PLAYER_PLAY),this.playAfterSet=!1),y.once(f.Z.PLAYER_ON_PLAYING,()=>y.emit(f.Z.PAUSE_ACTION_UNBLOCK))}getQuality(e){return -1===e&&(e=this.hls.loadLevel),this.getQualityName(this.hls.levels[e])}prepareTimeupdate(e,t=!1){this.playAfterSet=e&&!P.get("playing");let i=!1===t?P.get("currentTime"):t;y.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{y.emit(f.Z.PLAYER_SET_CURRENT_TIME,i),y.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{!1===e?(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE)):!0===e||P.get("playing")||P.get("error")?y.emit(f.Z.PLAYER_PLAY):(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE))})})}fallbackSource(){return this.destroy(),!1}destroy(){this.hls&&this.hls.destroy(),this.ready=!1,this.destroyed=!0,P.set("sourceLoaded",!1)}constructor(e,t={}){var i,s,n,r,o,a,l,c,h,u;super(e,t),this.options=t,this.config=(0,m._)({},t.hlsConfig||{}),this.chromecastSource=null==e?void 0:null===(s=e.hls)||void 0===s?void 0:null===(i=s.h264)||void 0===i?void 0:i.url;let d=null===(r=this.options)||void 0===r?void 0:null===(n=r.userSettings)||void 0===n?void 0:n.useAv1;if(this.hasAv1Source=!!(null==e?void 0:null===(a=e.hls)||void 0===a?void 0:null===(o=a.av1)||void 0===o?void 0:o.url),(null==e?void 0:null===(c=e.hls)||void 0===c?void 0:null===(l=c.av1)||void 0===l?void 0:l.url)&&(d||void 0===d)?(this.hlsSource=e.hls.av1.url,delete e.hls.av1):(null==e?void 0:null===(u=e.hls)||void 0===u?void 0:null===(h=u.h264)||void 0===h?void 0:h.url)&&(this.hlsSource=e.hls.h264.url,delete e.hls.h264),this.type="hls",this.ready=!1,this.loaded=!1,this.destroyed=!1,this.attached=!1,this.playAfterSet=!1,this.qualities=null,this.storage=null,this.options.hlsSupport&&this.hlsSource&&this.options.hlsConfig&&this.options.hlsConfig.libSrc)return;this.destroy()}},$=class{createNext(e={}){if(this.sourceControllerIndex>this.sourcesControllerQueue.length-1)return new this.ControllerAbstractClass;this.options=(0,m._)({},this.options,e);let t=new this.sourcesControllerQueue[this.sourceControllerIndex](this.sources,this.options);return(this.sourceControllerIndex++,t.destroyed)?this.createNext(e):t}addControllerToQueue(e){return!!e&&e.prototype instanceof this.ControllerAbstractClass&&(this.sourcesControllerQueue.push(e),!0)}isAbstract(e){return!!e&&e.constructor===this.ControllerAbstractClass}constructor(e,t={}){this.sources=e,this.options=t,this.sourcesControllerQueue=[H,H,V],this.ControllerAbstractClass=B,this.sourceControllerIndex=0}};let W={autoplay:!1,volume:1,muted:!1,quality:"auto",preview:!0,lefty:!1,doubleTapMode:"top-down",useAv1:!0,subtitlesPrefLang:null,subtitlesStateByButton:null};var K=class{getSettings(){return this.settings}getDefaultSettings(){return this.options.default?(0,m._)({},W,this.options.default):W}init(e){this.storage=new G,this.settings=this.loadSettings(),e&&(this.settings=(0,m._)({},this.settings,e)),this.attachEvents()}attachEvents(){y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.changeSetting.bind(this,"volume")),y.on(f.Z.PLAYER_SET_QUALITY,this.changeSetting.bind(this,"quality")),y.on(f.Z.PLAYER_SET_AUTOPLAY,this.changeSetting.bind(this,"autoplay")),y.on(f.Z.PLAYER_SET_PREVIEW,this.changeSetting.bind(this,"preview")),y.on(f.Z.PLAYER_SET_LEFTY,this.changeSetting.bind(this,"lefty")),y.on(f.Z.PLAYER_SET_DOUBLE_TAP_MODE,this.changeSetting.bind(this,"doubleTapMode")),y.on(f.Z.PLAYER_SET_AV1_OPTION,this.changeSetting.bind(this,"useAv1")),y.on(f.Z.PLAYER_SET_AV1_OPTION,this.reloadAfterAv1Set),y.on(f.Z.SUBTITLES_SAVE_LANG,this.changeSetting.bind(this,"subtitlesPrefLang")),y.on(f.Z.SUBTITLES_STATE_BY_BUTTON,this.changeSetting.bind(this,"subtitlesStateByButton"))}reloadAfterAv1Set(){setTimeout(()=>{window.location.reload()},200)}changeSetting(e,t){"volume"===e&&(this.changeSetting("muted",t.target.muted),t=t.target.volume),null!==t&&(this.settings[e]=t,this.saveSettings())}saveSettings(){try{let e=JSON.stringify(this.settings);this.storage.setItem(this.settingsStoreName,e)}catch(e){C.log(C.TYPES.IO_ERROR,"UserSettingsController","Сan't save settings",{settings:this.settings})}}loadSettings(){let e=this.loadSavedSettings();return(0,m._)({},this.getDefaultSettings(),e)}loadSavedSettings(){let e=this.storage.getItem(this.settingsStoreName);try{e=JSON.parse(e)}catch(t){e={},C.log(C.TYPES.IO_ERROR,"UserSettingsController","Can't parse settings",{settings:this.settings})}return e}constructor(e,t){this.core=e,this.options=t||{},this.settingsStoreName=(null==t?void 0:t.settingsStoreName)||"x-player-settings",this.settings={},this.storage=null,this.init(t)}},j={canplay:f.Z.PLAYER_ON_CAN_PLAY,canplaythrough:f.Z.PLAYER_ON_CAN_PLAY_THROUGH,durationchange:f.Z.PLAYER_ON_DURATION_CHANGE,ended:f.Z.PLAYER_ON_ENDED,error:f.Z.PLAYER_ON_ERROR,loadeddata:f.Z.PLAYER_ON_LOADED_DATA,loadedmetadata:f.Z.PLAYER_ON_LOAD_META_DATA,loadstart:f.Z.PLAYER_ON_LOAD_START,pause:f.Z.PLAYER_ON_PAUSE,play:f.Z.PLAYER_ON_PLAY,playing:f.Z.PLAYER_ON_PLAYING,progress:f.Z.PLAYER_ON_PROGRESS,ratechange:f.Z.PLAYER_ON_RATECHANGE,seeked:f.Z.PLAYER_ON_SEEKED,seeking:f.Z.PLAYER_ON_SEEKING,stalled:f.Z.PLAYER_ON_STALLED,timeupdate:f.Z.PLAYER_ON_TIMEUPDATE,volumechange:f.Z.PLAYER_ON_VOLUME_CHANGE,waiting:f.Z.PLAYER_ON_WAITING};let q="xplayer-paused",Q="xplayer-no-scroll",z="fullscreen-ie",J="xp-fullscreen";var X=class{init(){if(this.initDispatcher(),this.capabilitiesService=new T(this),this.capabilities=this.capabilitiesService.capabilities,this.fallbackService=new U(this.elementId,this,this.options),this.options.sources=x(this.options.sources,this.capabilities),!this.options.sources){this.fallbackPlayer();return}this.addXplayerDataRole(),this.initXPlayer()}addXplayerDataRole(){this.element.setAttribute("data-role","xplayer")}fallbackPlayer(){this.type="none",this.fallbackService.fallbackImage()}initDispatcher(){y.debug=this.options.debug,this.dispatcher=y,this.on=(e,t,i=this,s=null,n=!1)=>this.dispatcher.on(e,t,i,s,n),this.once=(e,t,i=this,s=null)=>this.dispatcher.once(e,t,i,s),this.off=(e,t)=>this.dispatcher.off(e,t),this.offAllEvents=()=>this.dispatcher.offAllEvents(),this.emit=(e,...t)=>this.dispatcher.emit(e,...t)}initXPlayer(){if(this.videoElement=this.createVideoElement(),this.videoElement.id=this.videoElementExternalId||"xplayer__video",this.initVideoElementMutationObserver(),this.options.duration?P.set("duration",this.options.duration):C.log(C.TYPES.INIT_ERROR,"Core","No duration passed",{options:this.options}),this.initPlayerEvents(),this.initPlayingEvents(),this.initGlobalEvents(),this.states=P,this.playerErrorController=new I(this),this.createSettings(),this.options.dashConfig=(0,p._)((0,m._)({},this.options.dashConfig),{autoplay:this.options.preventFirstPlay,debug:this.options.debug}),this.createSourceControllerFactory(),!this.sourceController||this.sourceController.destroyed){this.fallbackPlayer();return}this.sourceController.init(),this.airplayController=new b(this),this.preloadActivate()}createSettings(){this.userSettingsController=new K(this,this.options.userSettings),this.settings=this.userSettingsController.getSettings()}createSourceControllerFactory(){this.sourceControllerFactory=new $(this.options.sources,{initialVideoQuality:this.settings.quality,disableSourceFallback:this.options.disableSourceFallback,getSourceAfterRedirect:this.options.getSourceAfterRedirect,hlsSupport:this.capabilities.hlsJs,hlsConfig:this.options.hlsConfig,dashConfig:this.options.dashConfig,dashSupport:this.capabilities.dashJs,videoElement:this.videoElement,userSettings:this.settings}),this.sourceController=this.sourceControllerFactory.createNext()}initVideoElementMutationObserver(){if(!window.MutationObserver)return;let e=0,t=new MutationObserver((function(i){i.forEach(i=>{if("attributes"===i.type&&"none"===this.videoElement.style.display){if(e>3){t.disconnect();return}e++,this.videoElement.style.display="block"}})}).bind(this));t.observe(this.videoElement,{attributes:!0})}render(){throw Error("Xplayer - no render method")}createVideoElement(){return document.createElement("video")}preloadActivate(){("plain"===this.options.version||!this.options.preventFirstPlay&&Array.isArray(this.options.preload)&&-1!==this.options.preload.indexOf(this.sourceController.type))&&(this.preload=!0,setTimeout(()=>this.sourceController.attachSource(this.videoElement),0))}initPlayerEvents(){for(let e in j){if(!j.hasOwnProperty(e))return;this.videoElement.addEventListener(e,t=>this.emit(j[e],t))}this.on(f.Z.PLAYER_PLAY,this.playerPlay,this),this.on(f.Z.PLAYER_PAUSE,this.playerPause,this)}playerPlay(e=!1){if(P.get("chromecast")||(this.preload=!1,this.options.preventFirstPlay&&!this.capabilities.safari&&!this.capabilities.mobile&&"hls"===this.sourceController.type))return;if(!this.sourceController.ready){this.capabilities.safari&&this.videoElement.load(),y.once(f.Z.SOURCE_CONTROLLER_READY,this.playerPlay.bind(this,e));return}if(P.get("sourceLoaded")&&!e||((this.capabilities.safari||this.capabilities.mobile&&!this.options.preventFirstPlay)&&this.videoElement.load(),this.options.preventFirstPlay||this.sourceController.attachSource(this.videoElement)),!(this.capabilities.safari&&!this.capabilities.mobile&&"hls"===this.sourceController.type)&&this.videoElement.readyState<2){this.videoElement.play(),this.requestedPlayLoaded||this.requestedPlayCanPlay||(this.requestedPlayLoaded=this.on(f.Z.PLAYER_ON_LOADED_DATA,()=>{this.emit(f.Z.PLAYER_PLAY)}),this.requestedPlayCanPlay=this.on(f.Z.PLAYER_ON_CAN_PLAY,()=>{this.emit(f.Z.PLAYER_PLAY)}));return}if(this.options.preventFirstPlay&&"plain"!==this.options.version&&!0!==e)return;this.clearPlayRequests();let t=this.videoElement.play();if(!(t instanceof window.Promise)){y.emit(f.Z.PLAYER_PLAY_VIDEO_PROMISE_NOT_SUPPORTED);return}t.then(()=>{y.emit(f.Z.PLAYER_PLAY_SUCCESS)}),t.catch(e=>{y.emit(f.Z.PLAYER_PLAY_FAILED,e),y.emit(f.Z.PLAYER_PLAY_FAIL,e)})}onPlayerPlay(){h.removeClass(this.element,q)}playerPause(){P.get("chromecast")||(P.get("swiping")||h.addClass(this.element,q),this.clearPlayRequests(),this.videoElement.pause(),this.emit(f.Z.PLAYER_PAUSED))}isVideoVertical(){let{videoWidth:e,videoHeight:t}=this.videoElement||{};return t>e}clearPlayRequests(){this.off(f.Z.PLAYER_ON_LOADED_DATA,this.requestedPlayLoaded),this.off(f.Z.PLAYER_ON_CAN_PLAY,this.requestedPlayCanPlay),this.requestedPlayLoaded=null,this.requestedPlayCanPlay=null}initPlayingEvents(){var e;this.on(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK,this.onPlayerPreventPlayUnblock,this),this.on(f.Z.PLAYER_SET_SOURCE,this.changeQuality,this),this.on(f.Z.PLAYER_SET_VIDEO_SOURCE,this.setVideoSource,this),this.on(f.Z.PLAYER_FALLBACK_SOURCE,this.fallbackSource,this),this.on(f.Z.PLAYER_SET_CURRENT_TIME,this.setCurrentTime,this),this.on(f.Z.PLAYER_SET_VOLUME,this.setVolume,this),this.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.setPlayBackRate,this),this.on(f.Z.PLAYER_ON_PLAY,this.onPlayerPlay,this),this.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.toggleFullscreen.bind(this)),this.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PROGRESS_BAR_RESIZE,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PLAYER_TOGGLE_LARGEMODE,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PLAYER_ON_CHANGE_ORIENTATION,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PLAYER_FULLSCREEN_FAILED,this.removeFullscreenClass.bind(this)),this.deviceUsesFullscreenClass()&&this.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.onFullscreenChange.bind(this)),(null===(e=this.pluginOptions.fallbackOnStalled)||void 0===e?void 0:e.group)&&(this.on(f.Z.PLAYER_ON_TIMEUPDATE,this.setStalledTimer.bind(this)),this.on(f.Z.PLAYER_ON_PAUSE,this.clearStalledTimer.bind(this)))}clearStalledTimer(){clearTimeout(this.stalledTimer),this.stalledTimer=null}setStalledTimer(){this.clearStalledTimer(),P.get("playing")&&(this.stalledTimer=setTimeout(this.playerOnStalled.bind(this),15e3))}playerOnStalled(){var e;switch(null===(e=this.pluginOptions.fallbackOnStalled)||void 0===e?void 0:e.group){case"b":this.setCurrentTime(P.get("currentTime")+1);break;case"c":this.playerPause();break;case"d":this.fallbackSource()}this.playerPlay(),this.setCurrentTime(P.get("currentTime"))}initGlobalEvents(){let e=e=>this.emit(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,e);this.capabilities.fullscreen?(document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("fullscreenchange",e),document.addEventListener("MSFullscreenChange",e),this.capabilities.idevice&&(this.videoElement.addEventListener("webkitbeginfullscreen",e,!1),this.videoElement.addEventListener("webkitendfullscreen",e,!1))):this.capabilities.idevice?(this.videoElement.addEventListener("webkitbeginfullscreen",e,!1),this.videoElement.addEventListener("webkitendfullscreen",e,!1)):this.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,e)}setVolume(e){let t=e;t<0&&(t=0),t>1&&(t=1),this.videoElement.volume=t,this.videoElement.muted=!t}onPlayerPreventPlayUnblock(){this.options.preventFirstPlay=!1,this.clearPlayRequests()}sendAccumulatedResize(){y.emit(f.Z.PLAYER_ON_RESIZE)}setPlayBackRate(e,t){if(!(e>2)&&!(e<.25)){if(!t){if(P.get("ads_playing")){y.once(f.Z.ADS_ENDED,this.setPlayBackRate.bind(this,e));return}if(this.videoElement.readyState<2){y.once(f.Z.PLAYER_ON_PLAY,this.setPlayBackRate.bind(this,e)),this.capabilities.safari||this.emit(f.Z.PLAYER_PLAY);return}}this.videoElement.playbackRate=e,t||this.emit(f.Z.PLAYER_PLAY)}}changeQuality(e,t,i=!1,s=!1){this.capabilities.samsung&&P.get("ads_playing")&&(i=null),this.capabilities.safari&&!P.get("sourceLoaded")&&this.videoElement.load(),e||(e=this.settings.quality),this.sourceController.prepareTimeupdate(t,i,s),this.sourceController.changeQuality(this.videoElement,e,this.options.preventFirstPlay),this.options.preventFirstPlay&&this.emit(f.Z.PLAYER_PLAY),this.emit(f.Z.SOURCE_TYPE_CHANGE),this.setPlayBackRate(P.get("playbackRate"),!t)}setVideoSource(e){this.videoElement.src=e,this.videoElement.load(),P.set("sourceLoaded",!0)}fallbackSource(e=!1){if(!this.sourceController.fallbackSource()){if(this.sourceController=this.sourceControllerFactory.createNext(),this.sourceControllerFactory.isAbstract(this.sourceController)){this.emit(f.Z.PLAYER_FALLBACK_SOURCE_FAIL);return}this.sourceController.init()}this.emit(f.Z.SOURCE_TYPE_CHANGE),!e&&(this.sourceController.changeQuality(this.videoElement),P.get("currentTime")&&(this.setCurrentTime(P.get("currentTime")),this.emit(f.Z.PLAYER_PLAY)))}setCurrentTime(e){if(!P.get("sourceLoaded")){if(P.set("currentTime",e),this.options.preventFirstPlay)return;if(!this.sourceController.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.setCurrentTime,this,e);return}this.sourceController.attachSource(this.videoElement),this.once(f.Z.PLAYER_ON_LOAD_META_DATA,()=>{this.setCurrentTime(e)});return}if(this.capabilities.safari&&this.videoElement.readyState<2){this.currentTime=e,this.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{this.setCurrentTime(e)});return}if(!(P.get("ads_playing")||!e&&0!==e||P.get("ended")&&e>=this.videoElement.currentTime)&&(e>=this.videoElement.duration?e=this.videoElement.duration:e<0&&(e=0),P.set("currentTime",e),!(this.capabilities.ie&&Number.isNaN(this.videoElement.duration))))try{this.videoElement.currentTime=P.get("currentTime"),P.get("ended")&&this.emit(f.Z.PLAYER_PLAY)}catch(e){}}addFullscreenClass(){h.addClass(this.element,J)}removeFullscreenClass(){h.removeClass(this.element,J)}isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||P.get("fullscreen"))}deviceUsesFullscreenClass(){let{safari:e,console:t}=this.capabilities;return e||t}onFullscreenChange(){this.deviceUsesFullscreenClass()&&(this.isFullscreen()?this.addFullscreenClass():h.hasClass(this.element,J)&&this.removeFullscreenClass())}toggleFullscreen(){if(!this.capabilities.fullscreen){this.toggleFullscreenIE();return}if(this.isFullscreen())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():this.videoElement.webkitExitFullscreen&&this.videoElement.webkitExitFullscreen();else{var e,t,i,s,n,r,o;if(this.capabilities.iphone&&this.videoElement.webkitEnterFullScreen){null===(e=this.videoElement.webkitEnterFullScreen())||void 0===e||e.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)});return}this.element.requestFullscreen?null===(t=this.element.requestFullscreen())||void 0===t||t.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.msRequestFullscreen?null===(i=this.element.msRequestFullscreen())||void 0===i||i.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.mozRequestFullScreen?null===(s=this.element.mozRequestFullScreen())||void 0===s||s.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.webkitRequestFullscreen?null===(n=this.element.webkitRequestFullscreen())||void 0===n||n.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.webkitRequestFullScreen?null===(r=this.element.webkitRequestFullScreen())||void 0===r||r.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.videoElement.webkitEnterFullScreen&&(null===(o=this.videoElement.webkitEnterFullScreen())||void 0===o||o.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}))}}toggleFullscreenIE(){let e={type:null};h.hasClass(this.element,z)?(h.removeClass(document.getElementsByTagName("html")[0],Q),h.removeClass(this.element,z)):(h.addClass(this.element,z),h.addClass(document.getElementsByTagName("html")[0],Q),e.type="webkitbeginfullscreen"),y.emit(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,e)}constructor(e,t,i,s=null){this.elementId=e,this.element=document.getElementById(e),this.options=t,this.pluginOptions=i||{},this.settings=null,this.autoplay=!1,this.poster=t.poster,this.type="xplayer",this.requestedPlayLoaded=null,this.requestedPlayCanPlay=null,this.stalledTimer=null,this.videoElementExternalId=s,this.preload=!1,this.init()}};let ee="no-user-action";var et=class{init(){this.core.on(f.Z.USER_ACTION,this.onUserAction,this),this.core.on(f.Z.NO_USER_ACTION,this.onNoUserAction,this),this.core.on(f.Z.USER_ACTION_PAUSE,this.onUserActionPause,this),this.core.on(f.Z.USER_ACTION_UNPAUSE,this.onUserActionUnpause,this),this.core.on(f.Z.USER_ACTION_BLOCK,this.onUserActionBlock,this),this.core.on(f.Z.USER_ACTION_UNBLOCK,this.onUserActionUnblock,this),this.options.noPlayPauseUserAction||(this.core.on(f.Z.PLAYER_ON_PLAY,this.onPlayerPlay,this),this.core.on(f.Z.PLAYER_ON_PAUSE,this.onPlayerPause,this),this.core.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this)),this.emitNoUserAction=this.core.emit.bind(this,f.Z.NO_USER_ACTION)}onUserAction(e){h.hasClass(this.core.element,ee)&&(h.removeClass(this.core.element,ee),this.hasNoUserAction=!1),this.clearUserActionTimeout(),this.userActionBlocked||this.userActionPaused||(this.core.options.isNonNativeAndroidFullscreen&&(this.core.videoElement.setAttribute("controls",!0),this.core.videoElement.focus()),e&&(e=Number.isInteger(e)?e:3e3,this.userActionTimeout=setTimeout(this.emitNoUserAction,e)))}onUserActionBlock(e=!1){this.userActionBlocked=!0,e&&(this.userActionForceBlock=!0),this.clearUserActionTimeout()}onUserActionUnblock(e=!1){(!this.userActionForceBlock||e)&&(this.userActionForceBlock=!1,this.userActionBlocked=!1,this.core.capabilities.mobile&&this.core.options.hasDSA?this.core.emit(f.Z.USER_ACTION,500):this.core.emit(f.Z.USER_ACTION,!0))}onUserActionPause(){this.userActionPaused=!0,this.clearUserActionTimeout()}onUserActionUnpause(){this.userActionPaused=!1}onNoUserAction(){h.addClass(this.core.element,ee),this.hasNoUserAction=!0,this.core.options.isNonNativeAndroidFullscreen&&this.core.videoElement.removeAttribute("controls")}clearUserActionTimeout(){null!==this.userActionTimeout&&(clearTimeout(this.userActionTimeout),this.userActionTimeout=null)}onPlayerPlay(){this.core.emit(f.Z.USER_ACTION,!0)}onPlayerPause(){this.core.emit(f.Z.USER_ACTION,!0)}onPlayerEnded(){this.core.emit(f.Z.USER_ACTION_BLOCK),this.core.once(f.Z.PLAYER_ON_PLAYING,()=>{this.core.emit(f.Z.USER_ACTION_UNBLOCK)})}getHasNoUserAction(){return this.hasNoUserAction}constructor(e,t){this.core=e,this.options=t||{},this.userActionTimeout=null,this.userActionPaused=!1,this.userActionBlocked=!1,this.hasNoUserAction=!1,this.userActionForceBlock=!1,this.init()}};let ei="xplayer-loading";var es=class extends X{initXPlayer(){super.initXPlayer(),this.userActionController=new et(this),this.autoplay="plain"!==this.options.version&&(!0===this.settings.autoplay||"true"===this.settings.autoplay)&&window.self===window.top,this.render(),this.setVolume(this.settings.volume),!this.setTimeOffset()&&this.autoplay&&(this.emit(f.Z.PLAYER_PLAY),this.emit(f.Z.PLAYER_PLAY_AUTOPLAY))}render(){this.videoElement.setAttribute("preload","auto"),this.videoElement.controls="plain"===this.options.version,h.addClass(this.element,"xplayer"),h.addClass(this.element,"notranslate"),"plain"===this.options.version&&h.addClass(this.element,"x-plain"),this.autoplay&&h.addClass(this.element,ei),this.element.appendChild(this.videoElement)}initPlayingEvents(){super.initPlayingEvents(),this.once(f.Z.PLAYER_ON_LOAD_META_DATA,this.onPlayerLoaded,this)}onPlayerLoaded(){"plain"!==this.options.version&&this.videoElement.removeAttribute("poster"),h.removeClass(this.element,ei)}setTimeOffset(){let e=d.parseTimeOffset();return!!e&&(this.options.preventFirstPlay?(this.autoplay=!0,!1):(this.emit(f.Z.PLAYER_SET_CURRENT_TIME,e),this.once(f.Z.PLAYER_ON_SEEKED,()=>{this.emit(f.Z.PLAYER_PLAY)}),!0))}constructor(e,t,i){super(e,t,i),this.noAutoplay=t.userSettings&&t.userSettings.override&&!1===t.userSettings.override.autoplay}};function en(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var er=function(e){return!e||Array.isArray(e)&&(null==e?void 0:e.every(function(e){return!e}))};document.location.hostname;var eo={getCollectorUrl:function(e=""){if(window.getCollectorUrl)return window.getCollectorUrl(e);let t=window.location.hostname.split(/\./).slice(-2).join(".");return`https://collector.${t}/${e.replace(/^\//,"")}`}},ea=class{init(){this.attachAdaptiveEvents()}attachAdaptiveEvents(){this.videoElement.addEventListener("timeupdate",this.playerOnTimeupdate.bind(this)),this.videoElement.addEventListener("seeking",this.playerOnSeekingAdaptive.bind(this)),this.videoElement.addEventListener("seeked",this.playerOnSeekedAdaptive.bind(this)),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE,this.onPlayerFallbackSource,this)}playerOnTimeupdate(e){if(!P.get("ads_playing")){if("auto"!==this.core.sourceController.getCurrentQuality()||e.target.seeking){this.lastTime=this.videoElement.currentTime;return}this.watched+=this.videoElement.currentTime-this.lastTime,this.lastTime=this.videoElement.currentTime,this.watched>this.threshold&&(this.watched=0,this.bufferingStats("adaptive",null,null,0,0))}}playerOnSeekedAdaptive(){P.get("ads_playing")||(this.lastTime=this.videoElement.currentTime)}playerOnSeekingAdaptive(){P.get("ads_playing")||(this.lastTime=this.videoElement.currentTime)}onPlayerFallbackSource(){this.isFallback=1}bufferingStats(e,t,i,s,n=0){let r={log:"cdn",source:"html5",bufferingDuration:Math.round(i)||0,videoPosition:Math.round(s),bufferingEvent:t,userEvent:e,isBounce:n,videoFile:this.core.sourceController.getSourceUrl(),player:"xplayer",version:7,sourceType:this.core.sourceController.type,sourceQuality:this.core.sourceController.getCurrentQuality(),sourceURL:this.core.sourceController.getSourceUrl(),settingsSaved:this.core.settings.quality!==this.core.userSettingsController.getDefaultSettings().quality,fallback:this.isFallback};if(this.options.addFields&&(r=(0,m._)({},r,this.options.addFields)),"adaptive"===e&&(r.adaptiveQuality=this.core.sourceController.getQuality(-1),this.lastQuality||(this.lastQuality=r.adaptiveQuality),this.lastQuality!==r.adaptiveQuality&&(this.switchedTimes++,r["str.switchedTimes"]=this.switchedTimes,r["str.switchedFrom"]=this.lastQuality,this.lastQuality=r.adaptiveQuality)),this.debug){console.warn("buffStats:",r);return}A.ajax("GET",eo.getCollectorUrl(),r)}reset(){this.lastTime=0,this.watched=0,this.isFallback=0,this.switchedTimes=0,this.lastQuality=null}constructor(e,t,i,s){var n,r;this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.lastTime=0,this.watched=0,this.threshold=(null===(r=this.options)||void 0===r?void 0:null===(n=r.adaptiveStats)||void 0===n?void 0:n.threshold)||10,this.isFallback=0,this.switchedTimes=0,this.lastQuality=null,this.init()}},el=class{init(){this.core.on(f.Z.PLAYER_PLAY,this.playerOnPlay,this),this.attachOnceEvents(),this.core.on(f.Z.SPRITE_LOAD,this.onSpriteLoad.bind(this)),this.core.on(f.Z.SPRITE_LOAD_SUCCESS,this.onSpriteLoadSuccess.bind(this)),this.core.on(f.Z.SPRITE_LOAD_ERROR,this.onSpriteLoadError.bind(this)),this.videoElement.addEventListener("loadstart",this.playerOnLoadStart.bind(this)),this.videoElement.addEventListener("loadeddata",this.playerOnLoadedData.bind(this)),this.videoElement.addEventListener("waiting",this.playerOnWaiting.bind(this)),this.videoElement.addEventListener("canplay",this.playerOnCanPlay.bind(this)),this.videoElement.addEventListener("playing",this.playerOnCanPlay.bind(this)),this.videoElement.addEventListener("timeupdate",this.playerOnBuffTimeupdate.bind(this)),this.videoElement.addEventListener("seeking",this.playerOnSeeking.bind(this)),this.videoElement.addEventListener("seeked",this.playerOnSeeked.bind(this));let e=this.core.capabilities.ios?"pagehide":"beforeunload";window.addEventListener(e,this.bufferingOnUnload.bind(this),!1)}attachOnceEvents(){this.bufferingVars.playerOnSwipeStartEventId=this.core.once(f.Z.PLAYER_ON_SWIPE_START,()=>{this.bufferingVars.hasSwiping=!0}),this.bufferingVars.viewSuccessEventId=this.core.once(f.Z.VIEW_SUCCESS,this.onViewSuccess.bind(this)),this.bufferingVars.fallbackSourceEventId=this.core.once(f.Z.PLAYER_FALLBACK_SOURCE,this.onPlayerFallbackSource,this)}offOnceEvents(){this.core.off(f.Z.PLAYER_ON_SWIPE_START,this.bufferingVars.playerOnSwipeStartEventId),this.core.off(f.Z.VIEW_SUCCESS,this.bufferingVars.viewSuccessEventId),this.core.off(f.Z.PLAYER_FALLBACK_SOURCE,this.bufferingVars.fallbackSourceEventId)}getBufferingVars(){return{player:"xplayer",isInBufferedZone:!1,countBuffering:0,sourceLoaded:!1,loadstartTime:0,waitingTime:0,seekingTime:0,seeking:!1,seekingEvent:!1,hasPlay:!1,hasCorePlay:!1,loaded:!1,lastWaitingTs:[],playDurationSent:!1,hasSwiping:!1,fallback:0,version:7,playerOnSwipeStartEventId:null,viewSuccessEventId:null,fallbackSourceEventId:null}}playerOnLoadStart(){this.bufferingVars.loadstartTime>0||(this.bufferingVars.loadstartTime=Date.now())}playerOnLoadedData(){this.bufferingVars.loadstartTime>0&&(this.bufferingVars.sourceLoaded?this.bufferingStats("play","change",Date.now()-this.bufferingVars.loadstartTime,this.videoElement.currentTime,0):this.bufferingVars.hasCorePlay&&(this.bufferingStats("play","end",Date.now()-this.bufferingVars.loadstartTime,this.bufferingVars.playDurationSent?1:0,0),this.bufferingVars.sourceLoaded=!0,this.bufferingVars.playDurationSent=!0),this.currentSrc=this.videoElement.src,this.bufferingVars.loaded=!0,this.bufferingVars.loadstartTime=0,this.bufferingVars.waitingTime=0)}playerOnPlay(){this.bufferingVars.hasPlay||(this.bufferingStats("play","start",0,0,0),this.bufferingVars.hasPlay=!0),this.bufferingVars.loaded||this.bufferingVars.hasCorePlay||(this.bufferingVars.loadstartTime=Date.now(),this.bufferingVars.hasCorePlay=!0)}playerOnWaiting(){0===this.bufferingVars.seekingTime&&0===this.bufferingVars.loadstartTime&&this.bufferingVars.hasPlay&&!this.bufferingVars.seekingEvent&&(this.bufferingVars.waitingTime=Date.now())}playerOnCanPlay(){this.bufferingVars.waitingTime>0&&this.bufferingVars.hasPlay&&this.sendWatchBufferingEvent("canplay")}playerOnBuffTimeupdate(){if(this.bufferingVars.waitingTime>0&&this.bufferingVars.hasPlay){if(this.bufferingVars.lastWaitingTs.length<2){this.bufferingVars.lastWaitingTs.push(this.videoElement.currentTime);return}if(-1!==this.bufferingVars.lastWaitingTs.indexOf(this.videoElement.currentTime)){this.bufferingVars.lastWaitingTs.shift(),this.bufferingVars.lastWaitingTs.push(this.videoElement.currentTime);return}this.sendWatchBufferingEvent("timeupdate")}}playerOnSeeking(){!this.bufferingVars.seeking&&(this.bufferingVars.seekingEvent=!0,this.bufferingVars.hasPlay&&(this.bufferingVars.isInBufferedZone=this.isInBufferedZone(this.videoElement.currentTime),this.bufferingVars.isInBufferedZone||(this.bufferingVars.seeking=!0,this.bufferingVars.seekingTime=Date.now())))}playerOnSeeked(){if(this.bufferingVars.seekingTime>0){let e=Date.now()-this.bufferingVars.seekingTime;this.bufferingVars.seeking=!1,this.bufferingVars.seekingEvent=!1,this.bufferingVars.hasPlay&&this.currentSrc===this.videoElement.src&&!this.bufferingVars.isInBufferedZone&&this.bufferingStats("rewind","end",e,this.videoElement.currentTime,0),this.bufferingVars.seekingTime=0}}onPlayerFallbackSource(){this.bufferingVars.fallback=1}bufferingOnUnload(){this.bufferingVars.hasPlay&&(this.bufferingVars.loadstartTime>0&&(this.bufferingVars.sourceLoaded?this.bufferingStats("play","change",Date.now()-this.bufferingVars.loadstartTime,this.videoElement.currentTime,1):this.bufferingStats("play","end",Date.now()-this.bufferingVars.loadstartTime,0,1),this.bufferingVars.loadstartTime=0),this.bufferingVars.seekingTime>0&&(this.bufferingStats("rewind","end",Date.now()-this.bufferingVars.seekingTime,this.videoElement.currentTime,1),this.bufferingVars.seekingTime=0),this.bufferingVars.waitingTime>0&&(this.bufferingStats("play","end",Date.now()-this.bufferingVars.waitingTime,this.videoElement.currentTime+1,1),this.bufferingVars.waitingTime=0))}sendWatchBufferingEvent(){this.bufferingStats("play","end",Date.now()-this.bufferingVars.waitingTime,this.videoElement.currentTime+1,0),this.bufferingVars.waitingTime=0,this.bufferingVars.lastWaitingTs=[]}isInBufferedZone(e){let t=this.videoElement.buffered;if("object"!=typeof t){if(null===this.videoElement)return!1;t=this.videoElement.buffered}let i=t.length;for(;i--;)if(e>=t.start(i)&&e<t.end(i))return!0;return!1}onViewSuccess(){this.bufferingStats("play","success",1e3*this.videoElement.currentTime,this.videoElement.currentTime)}onSpriteLoad(e){this.bufferingStats("sprite","load",0,this.videoElement.currentTime,0,{"int.spriteNumber":e})}onSpriteLoadSuccess(e,t){this.bufferingStats("sprite","success",e,this.videoElement.currentTime,0,{"int.spriteNumber":t})}onSpriteLoadError(e,t){this.bufferingStats("sprite","error",e,this.videoElement.currentTime,0,{"int.spriteNumber":t})}bufferingStats(e,t,i,s,n=0,r=null){if("start"!==t&&"success"!==t&&"sprite"!==e&&i<50)return;let o={log:"cdn",source:"html5",bufferingDuration:Math.round(i)||0,videoPosition:Math.round(s),bufferingEvent:t,userEvent:e,isBounce:n,videoFile:this.core.sourceController.getSourceUrl(),player:this.bufferingVars.player,version:this.bufferingVars.version,sourceType:this.core.sourceController.type,sourceQuality:this.core.sourceController.getCurrentQuality(),sourceURL:this.core.sourceController.getSourceUrl(),settingsSaved:this.core.settings.quality!==this.core.userSettingsController.getDefaultSettings().quality,fallback:this.bufferingVars.fallback,hasAds:this.options.hasAds,"str.hasSwiping":this.bufferingVars.hasSwiping,"str.av1Supported":this.core.capabilities.av1,"str.h265Supported":this.core.capabilities.h265};if(r&&(o=(0,m._)({},o,r)),this.options.addFields&&(o=(0,m._)({},o,this.options.addFields)),"adaptive"===e&&(o.adaptiveQuality=this.core.sourceController.getQuality(-1)),this.debug){console.warn("buffStats:",o,e,t,n);return}A.ajax("GET",eo.getCollectorUrl(),o)}reset(){this.offOnceEvents(),this.bufferingVars=this.getBufferingVars(),this.attachOnceEvents()}constructor(e,t,i,s){this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.bufferingVars=this.getBufferingVars(),this.init()}},ec=class{init(){this.attachGeneralEvents(),this.attachPlayerEvents(),this.attachAdsEvents(),this.attachAdaptiveEvents(),this.attachErrorEvents(),this.attachFallbackEvents()}attachGeneralEvents(){var e;this.core.on(f.Z.PLAYER_ON_INIT,this.sendPlayerInit,this),e=this.sendPlainEvent.bind(this,"page_exit"),window.addEventListener("pagehide",function(t){e(t)},!0)}sendPlayerInit(){var e,t,i;this.send("page_init",null===(i=window)||void 0===i?void 0:null===(t=i.performance)||void 0===t?void 0:null===(e=t.timing)||void 0===e?void 0:e.fetchStart),this.send("player_init")}attachPlayerEvents(){this.core.on(f.Z.PLAYER_PLAY,this.sendPlainEvent.bind(this,"play")),this.core.once(f.Z.VIEW_SUCCESS,this.sendPlainEvent.bind(this,"view_success")),this.videoElement.addEventListener("abort",this.sendPlainEvent.bind(this,"abort")),this.videoElement.addEventListener("canplay",this.sendPlainEvent.bind(this,"canplay")),this.videoElement.addEventListener("canplaythrough",this.sendPlainEvent.bind(this,"canplaythrough")),this.videoElement.addEventListener("complete",this.sendPlainEvent.bind(this,"complete")),this.videoElement.addEventListener("durationchange",this.sendPlainEvent.bind(this,"durationchange")),this.videoElement.addEventListener("emptied",this.sendPlainEvent.bind(this,"emptied")),this.videoElement.addEventListener("ended",this.sendPlainEvent.bind(this,"ended")),this.videoElement.addEventListener("loadeddata",this.sendPlainEvent.bind(this,"loadeddata")),this.videoElement.addEventListener("loadedmetadata",this.sendPlainEvent.bind(this,"loadedmetadata")),this.videoElement.addEventListener("loadstart",this.sendPlainEvent.bind(this,"loadstart")),this.videoElement.addEventListener("pause",this.sendPlainEvent.bind(this,"pause")),this.videoElement.addEventListener("play",this.sendPlainEvent.bind(this,"play")),this.videoElement.addEventListener("playing",this.sendPlainEvent.bind(this,"playing")),this.videoElement.addEventListener("progress",this.sendDelayedEvent.bind(this,"progress",5)),this.videoElement.addEventListener("ratechange",this.sendPlainEvent.bind(this,"ratechange")),this.videoElement.addEventListener("seeked",this.sendPlainEvent.bind(this,"seeked")),this.videoElement.addEventListener("seeking",this.sendDelayedEvent.bind(this,"seeking",.3)),this.videoElement.addEventListener("stalled",this.sendPlainEvent.bind(this,"stalled")),this.videoElement.addEventListener("suspend",this.sendPlainEvent.bind(this,"suspend")),this.videoElement.addEventListener("volumechange",this.sendPlainEvent.bind(this,"volumechange")),this.videoElement.addEventListener("waiting",this.sendPlainEvent.bind(this,"waiting")),this.videoElement.addEventListener("timeupdate",this.sendDelayedEvent.bind(this,"timeupdate",10))}sendPlainEvent(e){this.send(e)}sendDelayedEvent(e,t,i=null){this.delayedEvents[e]||(this.send(e,null,i),this.delayedEvents[e]=!0,setTimeout(()=>{this.delayedEvents[e]=!1},1e3*t))}attachAdsEvents(){this.core.on(f.Z.ADS_STARTED,this.sendPlainEvent.bind(this,"ads_start")),this.core.on(f.Z.ADS_ENDED,this.sendPlainEvent.bind(this,"ads_end"))}attachAdaptiveEvents(){}attachErrorEvents(){this.videoElement.addEventListener("error",e=>{var t,i;let s=(null==e?void 0:null===(i=e.target)||void 0===i?void 0:null===(t=i.error)||void 0===t?void 0:t.message)||"";this.sendError(s,!1)}),this.core.on(f.Z.SOURCE_CONTROLLER_ON_ERROR,(e,t)=>{let i=(null==t?void 0:t.details)||(null==t?void 0:t.type)||"";this.sendError(i,!1)}),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE_FAIL,this.sendError.bind(this,"player_fallback_source_fail",!0))}sendError(e="",t=!1){this.send("error",null,{message:e,is_fatal:t})}attachFallbackEvents(){this.core.on(f.Z.PLAYER_FALLBACK_SOURCE,this.sendPlainEvent.bind(this,"fallback"))}send(e,t=null,i=null){let s={log:"xplayer-analytics",event:e,ts:t||Date.now(),watchId:"UNKNOWN",video_position:Math.round(this.videoElement.currentTime),source_url:this.core.sourceController.getSourceUrl()||"UNKNOWN",source_type:this.core.sourceController.type||"UNKNOWN",source_quality:this.core.sourceController.getCurrentQuality()||"UNKNOWN",session_started_at:"UNKNOWN",session_token:"UNKNOWN",player:"UNKNOWN",videoId:"UNKNOWN",maxQuality:"UNKNOWN",message:""};if(P.get("swiping")&&(s.message="swiping"),this.options.addFields&&(s=(0,m._)({},s,this.options.addFields)),i&&(s=(0,m._)({},s,i)),this.debug){console.warn("buffStats2:",s);return}A.sendBeacon(eo.getCollectorUrl(`?log=${s.log}`),s)}constructor(e,t,i,s){this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.delayedEvents={},this.init()}};function eh(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var eu=class{getDefaultData(){return{speedMbps:[],ttfbDurationMs:[],ttfbPercent:[]}}init(){this.attachEvents()}attachEvents(){this.core.on(f.Z.HLS_FRAG_LOADED,this.onHlsFragLoaded,this),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE,this.onPlayerFallbackSource,this)}onPlayerFallbackSource(){this.isFallback=1}onHlsFragLoaded(e){if(P.get("ads_playing"))return;let t=Math.floor(e.frag.stats.loading.first-e.frag.stats.loading.start),i=Math.floor(e.frag.stats.loading.end-e.frag.stats.loading.start),s=eh(t/i,4),n=eh(8*e.frag.stats.loaded/(i/1e3*1048576),4);if(this.collectedData.speedMbps.push(n),this.collectedData.ttfbDurationMs.push(t),this.collectedData.ttfbPercent.push(s),this.collectedData.speedMbps.length>=5){let e=this.collectedData.speedMbps.reduce((e,t)=>e+t,0)/this.collectedData.speedMbps.length,t=this.collectedData.ttfbDurationMs.reduce((e,t)=>e+t,0)/this.collectedData.ttfbDurationMs.length,i=this.collectedData.ttfbPercent.reduce((e,t)=>e+t,0)/this.collectedData.ttfbPercent.length;this.collectedData=this.getDefaultData(),"number"!=typeof e||Number.isNaN(e)||this.speedStats(e,t,i)}}speedStats(e,t,i){let s={log:"cdn",source:"html5",bufferingDuration:0,videoPosition:0,bufferingEvent:null,userEvent:"download_speed",isBounce:!1,videoFile:this.core.sourceController.getSourceUrl(),player:"xplayer",version:7,sourceType:this.core.sourceController.type,sourceQuality:this.core.sourceController.getCurrentQuality(),sourceURL:this.core.sourceController.getSourceUrl(),settingsSaved:this.core.settings.quality!==this.core.userSettingsController.getDefaultSettings().quality,fallback:this.isFallback,adaptiveQuality:this.core.sourceController.getQuality(-1),downloadSpeed:e,"float.ttfbDurationMs":t,"float.ttfbPercent":i};if(this.options.addFields&&(s=(0,m._)({},s,this.options.addFields)),this.lastQuality||(this.lastQuality=s.adaptiveQuality),this.lastQuality!==s.adaptiveQuality&&(this.switchedTimes++,s["str.switchedTimes"]=this.switchedTimes,s["str.switchedFrom"]=this.lastQuality,this.lastQuality=s.adaptiveQuality),this.debug){console.warn("downloadSpeedStats:",s);return}A.ajax("GET",eo.getCollectorUrl(),s)}reset(){this.collectedData=this.getDefaultData(),this.switchedTimes=0,this.lastQuality=null}constructor(e,t,i,s){this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.collectedData=this.getDefaultData(),this.isFallback=0,this.switchedTimes=0,this.lastQuality=null,this.init()}},ed=class{init(){this.videoElement.addEventListener("error",this.playerOnError.bind(this)),this.core.on(f.Z.SOURCE_CONTROLLER_ON_ERROR,this.sourceControllerOnError,this),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE_FAIL,this.setHasFatalError.bind(this,!0),this)}setHasFatalError(e){this.hasFatalError=e}sourceControllerOnError(e,t){if(P.get("ads_playing"))return;let{message:i,errorMessage:s}=this.parseSourceControllerErrorMessage(e,t);if(!i)return;let n=this.core.sourceController.getSourceUrl();if(!n){this.errorsStats(i,{errorMessage:"empty",cdnStatusText:"empty",cdnUrl:"empty",cdnStatus:"empty",videoFile:n});return}this.errorCheckCdn(i,n,s)}parseSourceControllerErrorMessage(e,t){let i={message:null,errorMessage:null};return"dash"===e&&(i=this.parseDASHErrorMessage(t)),"hls"===e&&(i=this.parseHLSErrorMessage(t)),i}parseHLSErrorMessage(e){let t=e&&e.details,i=e&&e.fatal,s=e&&e.type,n="UNKNOWN_ERROR";if("mediaError"===s&&("manifestIncompatibleCodecsError"===t&&(s="sourceError"),"bufferNudgeOnStall"===t||"bufferStalledError"===t))return{message:null,errorMessage:t};switch(s){case"networkError":n="MEDIA_ERR_NETWORK";break;case"mediaError":n="MEDIA_ERR_DECODE";break;case"sourceError":n="MEDIA_ERR_SRC_NOT_SUPPORTED"}return i&&this.setHasFatalError(!0),{message:n,errorMessage:t}}parseDASHErrorMessage(e){let t="UNKNOWN_ERROR",i=e&&e.error;switch(this.setHasFatalError(!0),i){case"download":t="MEDIA_ERR_NETWORK";break;case"key_session":case"key_message":t="MEDIA_ERR_DECODE";break;case"capability":case"manifestError":case"mediasource":t="MEDIA_ERR_SRC_NOT_SUPPORTED"}return{message:t,errorMessage:i}}playerOnError(e){if(P.get("ads_playing"))return;let t=e&&e.target&&e.target.error&&e.target.error.code,i=e&&e.target&&e.target.error&&e.target.error.message,s="UNKNOWN_ERROR";switch(t){case 1:s="MEDIA_ERR_ABORTED";break;case 2:s="MEDIA_ERR_NETWORK";break;case 3:s="MEDIA_ERR_DECODE";break;case 4:s="MEDIA_ERR_SRC_NOT_SUPPORTED"}if("MEDIA_ERR_DECODE"===s){if(this.wasDecoderError)return;this.wasDecoderError=!0}this.errorCheckCdn(s,this.videoElement.src,i)}errorCheckCdn(e,t,i){let s=new XMLHttpRequest,n=this.core.sourceController.type,r=this.core.sourceController.getCurrentQuality()||"undefined",o=this.core.sourceController.getSourceUrl();s.onreadystatechange=(function(){4===s.readyState&&this.errorsStats(e,{errorMessage:i||"empty",cdnStatusText:s.statusText||"empty",cdnUrl:s.responseURL||"empty",cdnStatus:s.status||"empty",videoFile:t,sourceType:n,sourceQuality:r,sourceURL:o})}).bind(this),s.open("HEAD",t,!0),s.send()}errorsStats(e,t={}){let i={log:"cdn",source:"html5",videoPosition:Math.round(this.videoElement.currentTime),bufferingEvent:"error",userEvent:e,videoFile:t.videoFile,player:"xplayer",cdnUrl:t.cdnUrl,cdnStatus:t.cdnStatus,cdnStatusText:t.cdnStatusText,errorMessage:t.errorMessage,sourceType:t.sourceType||this.core.sourceController.type,sourceQuality:t.sourceQuality||this.core.sourceController.getCurrentQuality(),sourceURL:t.sourceURL||this.core.sourceController.getSourceUrl(),isFatal:this.hasFatalError};if(this.setHasFatalError(!1),this.options.addFields&&(i=(0,m._)({},i,this.options.addFields)),this.debug){console.log(i);return}A.ajax("GET",eo.getCollectorUrl(),i)}reset(){this.wasDecoderError=!1,this.hasFatalError=!1}constructor(e,t,i,s){this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.wasDecoderError=!1,this.hasFatalError=!1,this.init()}},em={player_init:"player_init",video_end:"video_end",share_open:"share_open",share_click:"share_click",related_open:"related_open",related_click:"related_click",related_refresh:"related_refresh",top_rated_open:"top_rated_open",top_rated_click:"top_rated_click",from_user_open:"from_user_open",from_user_click:"from_user_click",live_sex_click:"live_sex_click",fullscreen_in:"fullscreen_in",fullscreen_out:"fullscreen_out",fullscreen_failed:"fulscreen_failed",large_mode_in:"large_mode_in",large_mode_out:"large_mode_out",settings_open:"settings_open",settings_quality:"settings_quality",settings_speed:"settings_speed",settings_preview:"settings_preview",settings_autoplay:"settings_autoplay",subscribe_init:"subscribe_init",subscribe_show:"subscribe_show",subscribe_click_logo:"subscribe_click_logo",subscribe_click_subscribe:"subscribe_click_subscribe",subscribe_click_unsubscribe:"subscribe_click_unsubscribe",preview:"preview",downloads:"downloads",favorite:"favorite",report_click:"report_click",download_click:"download_click",more_videos_click:"more_videos_click",join_now_click:"join_now_click",title_click:"title_click",producer_click:"producer_click",join_click:"join_click",logo_click:"logo_click",related_more_click:"related_more_click",fullscreen_click:"fullscreen_click",link_click:"watch_hd_click",cta_start_screen_click:"cta_start_screen_click",related_click_small:"related_click_small",download_click_small:"download_click_small",more_videos_click_small:"more_videos_click_small",live_sex_click_small:"live_sex_click_small",share_click_small:"share_click_small",full_video_get_link_click:"full_video_get_link_click",fullscreen_in_by_orientation:"fullscreen_in_by_orientation",fullscreen_out_by_orientation:"fullscreen_out_by_orientation",fullscreen_in_by_button:"fullscreen_in_by_button",fullscreen_out_by_button:"fullscreen_out_by_button",fullscreen_out_by_swipe:"fullscreen_out_by_swipe",seeking_by_tap:"seeking_by_tap",seeking_by_dragging:"seeking_by_dragging",seeking_by_swipe:"seeking_by_swipe",seeking_by_keyboard_press:"seeking_by_keyboard_press",seeking_by_keyboard_hold:"seeking_by_keyboard_hold",seeking_by_keyboard_number_keys:"seeking_by_keyboard_number_keys",seeking_by_progress_bar_dragging:"seeking_by_progress_bar_dragging",seeking_by_progress_bar_clicking:"seeking_by_progress_bar_clicking",seeking_by_double_tap_forward:"seeking_by_double_tap_forward",seeking_by_double_tap_backward:"seeking_by_double_tap_backward",seeking_double_tap_change_right_left:"seeking_double_tap_change_right_left",seeking_double_tap_change_top_down:"seeking_double_tap_change_top_down",mute_on:"mute_on",mute_off:"mute_off",mute_by_button_on:"mute_by_button_on",mute_by_button_off:"mute_by_button_off",player_play:"player_play",player_play_autoplay:"player_play_autoplay",player_play_failed:"player_play_failed",player_play_video_promise_not_supported:"player_play_video_promise_not_supported",player_play_by_poster:"player_play_by_poster",player_play_by_small_button:"player_play_by_small_button",player_play_by_center_button:"player_play_by_center_button",player_play_by_center_hidden_button:"player_play_by_center_hidden_button",play_success:"play_success",play_fail:"play_fail",player_pause:"player_pause",player_pause_by_small_button:"player_pause_by_small_button",player_pause_by_center_hidden_button:"player_pause_by_center_hidden_button",swap_hands_by_button_right:"swap_hands_by_button_right",swap_hands_by_button_left:"swap_hands_by_button_left",change_orientation_landscape:"change_orientation_landscape",change_orientation_portrait:"change_orientation_portrait",vr_mode_on:"vr_mode_on",chromecast_button_shown:"chromecast_button_shown",chromecast_button_click:"chromecast_button_click",chromecast_libs_load_success:"chromecast_libs_load_success",chromecast_libs_load_error:"chromecast_libs_load_error",chromecast_framework_lib_load_error:"chromecast_framework_lib_load_error",chromecast_play_success:"chromecast_play_success",chromecast_play_error:"chromecast_play_error",airplay_off:"airplay_off",airplay_on:"airplay_on",settings_av1_on:"settings_av1_on",settings_av1_off:"settings_av1_off",link_sponsored_shown:"link_sponsored_shown",link_sponsored_click:"link_sponsored_click",subtitles_load_success:"subtitles_load_success",subtitles_load_failed:"subtitles_load_failed",subtitles_shown:"subtitles_shown",subtitles_by_button_on:"subtitles_by_button_on",subtitles_by_button_off:"subtitles_by_button_off",settings_subtitles_off:"settings_subtitles_off",settings_subtitles_on:"settings_subtitles_on"},ep=class{init(){this.core.on(f.Z.PLAYER_ON_INIT,this.uiStats.bind(this,em.player_init)),this.core.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this),this.core.on(f.Z.OVERLAY_MENU_TAB_OPEN,this.onOverlayMenuTabOpen,this),this.core.on(f.Z.SHARE_MENU_OPEN,this.uiStats.bind(this,em.share_open)),this.core.on(f.Z.OVERLAY_ELEMENT_CLICK,this.onOverlayElementClick,this),this.core.on(f.Z.HOVER_ELEMENT_CLICK,this.onHoverElementClick,this),this.core.on(f.Z.RELATED_REFRESH_CLICK,this.uiStats.bind(this,em.related_refresh)),this.core.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.onFullscreenChange.bind(this)),this.core.on(f.Z.PLAYER_TOGGLE_LARGEMODE,this.onLargeModeToggle,this),this.core.on(f.Z.CONTROLS_PREVIEW_CLICK,this.uiStats.bind(this,em.preview)),this.core.on(f.Z.CONTROLS_DOWNLOAD_CLICK,this.uiStats.bind(this,em.downloads)),this.core.on(f.Z.CONTROLS_FAVORITE_CLICK,this.uiStats.bind(this,em.favorite)),this.core.on(f.Z.REPORT_ISSUE_CLICK,this.uiStats.bind(this,em.report_click)),this.core.on(f.Z.SETTINGS_MENU_OPEN,this.uiStats.bind(this,em.settings_open)),this.core.on(f.Z.SETTINGS_MENU_TOGGLED,this.onSettingsMenuToggled,this),this.core.on(f.Z.PLAYER_SET_AUTOPLAY,this.uiStats.bind(this,em.settings_autoplay)),this.core.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.uiStats.bind(this,em.settings_speed)),this.core.on(f.Z.PLAYER_SET_PREVIEW,this.uiStats.bind(this,em.settings_preview)),this.core.on(f.Z.PLAYER_SET_QUALITY,this.uiStats.bind(this,em.settings_quality)),this.core.on(f.Z.SUBSCRIBE_INIT,this.uiStats.bind(this,em.subscribe_init)),this.core.on(f.Z.SUBSCRIBE_SHOW,this.uiStats.bind(this,em.subscribe_show)),this.core.on(f.Z.SUBSCRIBE_CLICK_LOGO,this.uiStats.bind(this,em.subscribe_click_logo)),this.core.on(f.Z.SUBSCRIBE_CLICK_SUBSCRIBE,this.uiStats.bind(this,em.subscribe_click_subscribe)),this.core.on(f.Z.SUBSCRIBE_CLICK_UNSUBSCRIBE,this.uiStats.bind(this,em.subscribe_click_unsubscribe)),this.core.on(f.Z.DOWNLOAD_BUTTON_CLICK,this.uiStats.bind(this,em.download_click)),this.core.on(f.Z.LINK_CLICK,this.uiStats.bind(this,em.link_click)),this.core.on(f.Z.CONTROLS_FULLSCREEN_CLICK,this.uiStats.bind(this,em.fullscreen_click)),this.core.on(f.Z.PLAYER_ON_SWIPE_START,this.uiStats.bind(this,em.seeking_by_swipe)),this.core.on(f.Z.VR_MODE_ENABLE,this.uiStats.bind(this,em.vr_mode_on)),this.core.on(f.Z.PLAYER_ORIENTATION_SET_FULLSCREEN,e=>{"in"===e?this.uiStats(em.fullscreen_in_by_orientation):"out"===e&&this.uiStats(em.fullscreen_out_by_orientation)}),this.core.on(f.Z.PLAYER_FULLSCREEN_FAILED,this.uiStats.bind(this,em.fullscreen_failed)),this.core.on(f.Z.FULLSCREEN_BUTTON_CLICK,e=>{"in"===e?this.uiStats(em.fullscreen_in_by_button):"out"===e&&this.uiStats(em.fullscreen_out_by_button)}),this.core.on(f.Z.MUTE_CLICK,e=>{"on"===e?this.uiStats(em.mute_by_button_on):"off"===e&&this.uiStats(em.mute_by_button_off)}),this.core.on(f.Z.DOUBLE_TAP,e=>{"forward"===e?this.uiStats(em.seeking_by_double_tap_forward):"backward"===e&&this.uiStats(em.seeking_by_double_tap_backward),this.seekedByDoubleTap=!0}),this.core.on(f.Z.FULLSCREEN_SWIPE,this.uiStats.bind(this,em.fullscreen_out_by_swipe)),this.core.on(f.Z.PLAYER_ON_PAUSE,this.uiStats.bind(this,em.player_pause)),this.core.on(f.Z.POSTER_CLICK,this.uiStats.bind(this,em.player_play_by_poster)),this.core.on(f.Z.PLAY_SMALL_BUTTON_CLICK,e=>{"play"===e?this.uiStats(em.player_play_by_small_button):"pause"===e&&this.uiStats(em.player_pause_by_small_button)}),this.core.on(f.Z.PLAY_CENTER_BUTTON_CLICK,e=>{"play"===e?this.uiStats(em.player_play_by_center_button):"play-hidden"===e?this.uiStats(em.player_play_by_center_hidden_button):"pause-hidden"===e&&this.uiStats(em.player_pause_by_center_hidden_button)}),this.core.on(f.Z.SWAP_HANDS_BUTTON_CLICK,e=>{"right"===e?this.uiStats(em.swap_hands_by_button_right):"left"===e&&this.uiStats(em.swap_hands_by_button_left)}),this.core.on(f.Z.PLAYER_ON_CHANGE_ORIENTATION,e=>{"landscape"===e?this.uiStats(em.change_orientation_landscape):"portrait"===e&&this.uiStats(em.change_orientation_portrait)}),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,e=>{e.target.muted||e.target.volume<.02?this.uiStats(em.mute_on):this.uiStats(em.mute_off)}),y.on(f.Z.PLAYER_ON_SEEKING,()=>{!P.get("ads")&&this.seekingTimes++}),y.on(f.Z.PLAYER_ON_SEEKED,()=>{this.core.capabilities.idevice&&(this.seekingTimes>1?this.uiStats(em.seeking_by_dragging):this.seekedByDoubleTap||this.uiStats(em.seeking_by_tap),this.seekedByDoubleTap=!1,this.seekingTimes=0)}),this.core.once(f.Z.PLAYER_PLAY,()=>{this.uiStats(em.player_play),this.core.on(f.Z.PLAYER_ON_PLAY,()=>{this.uiStats(em.player_play),!this.core.capabilities.idevice&&this.seekingTimes>0&&(this.seekingTimes>1?this.uiStats(em.seeking_by_dragging):this.seekedByDoubleTap||this.uiStats(em.seeking_by_tap),this.seekingTimes=0,this.seekedByDoubleTap=!1)})}),this.core.on(f.Z.PLAYER_ON_PLAYING,()=>{!this.core.capabilities.idevice&&this.seekingTimes>0&&(this.seekingTimes>1?this.uiStats(em.seeking_by_dragging):this.seekedByDoubleTap||this.uiStats(em.seeking_by_tap),this.seekingTimes=0,this.seekedByDoubleTap=!1)}),this.core.on(f.Z.STATISTICS_UI,this.uiStats.bind(this));let e=y.on(f.Z.PLAYER_PLAY_FAIL,e=>{this.uiStats(em.player_play_failed,{"str.message":e})});y.once(f.Z.PLAYER_PLAY_AUTOPLAY,()=>{this.uiStats(em.player_play_autoplay),y.off(f.Z.PLAYER_PLAY_FAIL,e);let t=y.once(f.Z.PLAYER_PLAY_FAILED,e=>{let t=`${e}`;t.includes("play() failed")?this.uiStats(em.player_play_failed,{"str.message":"noUserInteraction"}):this.uiStats(em.player_play_failed,{"str.message":t})});y.once(f.Z.PLAYER_PLAY_SUCCESS,()=>{y.off(f.Z.PLAYER_PLAY_FAILED,t)})}),y.once(f.Z.PLAYER_PLAY_VIDEO_PROMISE_NOT_SUPPORTED,()=>{this.uiStats(em.player_play_video_promise_not_supported)}),y.on(f.Z.PLAYER_WIRELESS_CHANGED,()=>{var e;let t=(null===(e=this.core.videoElement)||void 0===e?void 0:e.webkitCurrentPlaybackTargetIsWireless)?em.airplay_on:em.airplay_off;this.uiStats(t)}),y.on(f.Z.PLAYER_SET_DOUBLE_TAP_MODE,e=>{let{seeking_double_tap_change_top_down:t,seeking_double_tap_change_right_left:i}=em;this.uiStats("top-down"===e?t:i)}),y.on(f.Z.PLAYER_PLAY_SUCCESS,()=>{this.uiStats(em.play_success)}),y.on(f.Z.PLAYER_SET_AV1_OPTION,e=>{e?this.uiStats(em.settings_av1_on):this.uiStats(em.settings_av1_off)}),y.on(f.Z.PLAYER_LINK_SPONSORED_SHOWN,()=>{this.uiStats(em.link_sponsored_shown)}),y.on(f.Z.PLAYER_LINK_SPONSORED_CLICK,()=>{this.uiStats(em.link_sponsored_click)})}onPlayerEnded(){P.get("ads_playing")||this.uiStats(em.video_end)}onOverlayMenuTabOpen(e){let t=null;switch(e){case"xplayer-related":t=em.related_open;break;case"top-rated":t=em.top_rated_open;break;case"more-from-user":t=em.from_user_open;break;case"share":t=em.share_open}t&&this.uiStats(t)}onOverlayElementClick(e){let t=null;switch(e){case"xplayer-related":t=em.related_click;break;case"top-rated":t=em.top_rated_click;break;case"live-sex":t=em.live_sex_click;break;case"more-from-user":t=em.from_user_click;break;case"share":t=em.share_click;break;case"join":t=em.join_now_click;break;case"download":t=em.download_click;break;case"more-videos":t=em.more_videos_click;break;case"related-more":t=em.related_more_click;break;case"related-small":t=em.related_click_small;break;case"download-small":t=em.download_click_small;break;case"share-small":t=em.share_click_small;break;case"live-sex-small":t=em.live_sex_click_small;break;case"more-videos-small":t=em.more_videos_click_small}t&&this.uiStats(t)}onHoverElementClick(e){let t=null;switch(e){case"logo":t=em.logo_click;break;case"title":t=em.title_click;break;case"join":t=em.join_click;break;case"producer":t=em.producer_click}t&&this.uiStats(t)}onFullscreenChange(e){let t;t=this.core.capabilities.idevice?"webkitbeginfullscreen"===e.type?em.fullscreen_in:em.fullscreen_out:document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?em.fullscreen_in:em.fullscreen_out,this.uiStats(t)}onLargeModeToggle(e){this.uiStats(e?em.large_mode_in:em.large_mode_out)}onSettingsMenuToggled(e){e&&this.uiStats(em.settings_open)}getOrientation(){return void 0===window.orientation?null:180===window.orientation||0===window.orientation?"portrait":"landscape"}getScreenSize(){return"landscape"===this.getOrientation()?`${window.screen.height}x${window.screen.width}`:`${window.screen.width}x${window.screen.height}`}uiStats(e,t=null){var i,s,n,r;let o={log:"xplayer_ui",event:e,"str.orientation":this.getOrientation(),"str.screen_size":this.getScreenSize(),"str.firstEvent":this.sentEvents[e]?"false":"true","str.fullscreen":P.get("fullscreen"),"str.doubleTapSeekMode":this.core.settings.doubleTapMode,"str.muted":this.core.videoElement.muted||this.core.videoElement.volume<.02?"true":"false","str.has_ads":this.options.hasAds,"str.lefty_controls":this.core.settings.lefty,"str.hasSubtitles":(null===(r=this.core)||void 0===r?void 0:null===(n=r.pluginOptions)||void 0===n?void 0:null===(s=n.subtitles)||void 0===s?void 0:null===(i=s.tracks)||void 0===i?void 0:i.length)>0?"true":"false"};if(this.sentEvents[e]=e,this.options.addFields&&(o=(0,m._)({},o,this.options.addFields)),(null==t?void 0:t["str.message"])&&(o=(0,m._)({},o,t)),null==t?void 0:t.fromMain){let{fromMain:e}=t;o=(0,m._)({},o,function(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,["fromMain"]))}if(this.debug){console.warn(o);return}A.ajax("GET",eo.getCollectorUrl(),o)}reset(){this.sentEvents={},this.seekingTimes=0,this.seekedByDoubleTap=!1}constructor(e,t,i,s){this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.sentEvents={},this.seekingTimes=0,this.seekedByDoubleTap=!1,this.init()}},eE=class{init(){this.videoElement.addEventListener("timeupdate",this.onTimeUpdateBind)}onTimeUpdate(){if(P.get("ads")||(this.threshold||(this.threshold=this.videoElement.duration<=69?Math.floor(this.videoElement.duration):(.35*Math.log(this.videoElement.duration/60-.15)+1.15)*60),this.currentPosition=parseInt(this.videoElement.currentTime,10),this.lastPosition===this.currentPosition))return;let e=this.currentPosition-this.lastPosition;if(this.watchTime+=e<=0||e>1?0:e,this.lastPosition=this.currentPosition,this.watchTime>this.threshold){if(this.eventSent)return;this.eventSent=!0,y.emit(f.Z.VIEW_SUCCESS),this.videoElement.removeEventListener("timeupdate",this.onTimeUpdateBind)}}reset(){this.currentPosition=0,this.lastPosition=0,this.watchTime=0,this.eventSent=!1,this.threshold=null}constructor(e,t,i,s){this.core=e,this.videoElement=t,this.options=i||{},this.debug=s,this.currentPosition=0,this.lastPosition=0,this.watchTime=0,this.eventSent=!1,this.threshold=null,this.onTimeUpdateBind=this.onTimeUpdate.bind(this),this.init()}},ev=class{init(){this.options.adaptiveStats&&(this.adaptiveStats=new ea(this.core,this.videoElement,this.options,this.debug)),this.options.downloadSpeedStats&&(this.downloadSpeedStats=new eu(this.core,this.videoElement,this.options,this.debug)),(this.options.buffStats||this.options.buffStats2)&&(this.viewSuccessStats=new eE(this.core,this.videoElement,this.options,this.debug)),this.options.buffStats&&(this.bufferingStats=new el(this.core,this.videoElement,this.options,this.debug)),this.options.buffStats2&&new ec(this.core,this.videoElement,this.options,this.debug),this.options.errorStats&&(this.errorStats=new ed(this.core,this.videoElement,this.options,this.debug)),this.options.uiStats&&(this.uiStats=new ep(this.core,this.videoElement,this.options,this.debug))}reset(){this.adaptiveStats&&this.adaptiveStats.reset(),this.downloadSpeedStats&&this.downloadSpeedStats.reset(),this.viewSuccessStats&&this.viewSuccessStats.reset(),this.bufferingStats&&this.bufferingStats.reset(),this.errorStats&&this.errorStats.reset(),this.uiStats&&this.uiStats.reset()}constructor(e,t,i,s){var n;this.core=e,this.videoElement=t,this.options=(null==i?void 0:i.statistics)||{},this.debug=s,this.options=Object.assign(this.options,{hasAds:!er(null===(n=i.ads)||void 0===n?void 0:n.vastUrls)}),this.init()}},e_=class extends es{createVideoElement(){let e=super.createVideoElement();return new ev(this,e,this.pluginOptions,this.options.debug),e}};let ef="overlay-menu-opened",eg="xplayer-aftershot-fullscreen";var ey=class{init(){var e;this.render(),this.overlayMenuToggleEventId=y.on(f.Z.OVERLAY_MENU_TOGGLE,this.toggle,this),this.playerOnPlayEventId=y.on(f.Z.PLAYER_ON_PLAY,this.onPlayerPlay,this),this.playerOnEndedEventId=y.on(f.Z.PLAYER_ON_ENDED,this.toggle,this),y.once(f.Z.AFTERSHOT_DESTROY,this.destroy,this),y.on(f.Z.AFTERSHOT_RENDERED,this.toggleCompanion.bind(this)),y.on(f.Z.AFTERSHOT_CLOSE,this.toggleCompanion.bind(this)),this.isNewMobileDesign2&&y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.addAftershotFullscreenClass.bind(this)),(null===(e=this.options)||void 0===e?void 0:e.exitFullscreenOnAftershot)&&y.on(f.Z.PLAYER_ON_ENDED,()=>{P.get("fullscreen")&&y.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN)})}removeAllChildNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}toggleCompanion(){var e,t,i;if(!(null===(t=this.core)||void 0===t?void 0:null===(e=t.capabilites)||void 0===e?void 0:e.idevice)){if(this.aftershotContainer||(this.aftershotContainer=document.querySelector("#xplayer-aftershot-companion")),this.companion||(this.companion=document.querySelector(".xplayer-ads-block-companion")),this.companionContainer||(this.companionContainer=null===(i=this.companion)||void 0===i?void 0:i.parentNode),!this.aftershotContainer||!this.companion)return;this.core.isFullscreen()&&!this.companionMovedToAftershot?(this.companionMovedToAftershot=!0,this.aftershotContainer.appendChild(this.companion),h.addClass(this.companion,"aftershot-inner-companion"),this.fullscreenChangeEventId=y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.toggleCompanion.bind(this))):this.companionMovedToAftershot&&(this.companionContainer.appendChild(this.companion),h.removeClass(this.companion,"aftershot-inner-companion"),y.off(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.fullscreenChangeEventId),this.companionMovedToAftershot=!1)}}addAftershotFullscreenClass(){this.core.isFullscreen()?h.addClass(this.core.element,eg):h.removeClass(this.core.element,eg)}onPlayerPlay(){this.shown&&this.core.emit(f.Z.OVERLAY_MENU_TOGGLE)}toggle(){if(P.get("ads")&&y.once(f.Z.ADS_STARTED,this.hide,this),!(P.get("ads_playing")||P.get("swiping"))){if(this.element||this.render(),this.shown){this.core.emit(f.Z.USER_ACTION_UNBLOCK),this.hide();return}this.core.emit(f.Z.USER_ACTION_BLOCK),this.show()}}render(){this.element=document.createElement("div"),this.element.className="xp-aftershot",this.core.element.appendChild(this.element)}show(){this.shown=!0,this.core.emit(f.Z.PLAYER_PAUSE),h.addClass(this.core.element,ef)}hide(){this.shown&&(this.shown=!1,h.removeClass(this.core.element,ef),y.emit(f.Z.AFTERSHOT_SEND_UI_CLOSE))}destroy(){y.off(f.Z.OVERLAY_MENU_TOGGLE,this.overlayMenuToggleEventId),y.off(f.Z.PLAYER_ON_PLAY,this.playerOnPlayEventId),y.off(f.Z.PLAYER_ON_ENDED,this.playerOnEndedEventId),h.removeElement(this.element),h.removeClass(this.core.element,ef)}constructor(e,t){var i;this.core=e,this.options=(null==t?void 0:t.aftershot)||{},this.isNewMobileDesign2=null==t?void 0:null===(i=t.newMobileDesign2)||void 0===i?void 0:i.enabled,this.shown=!1,this.overlayMenuToggleEventId=null,this.playerOnPlayEventId=null,this.playerOnEndedEventId=null,this.companionMovedToAftershot=!1,this.companionContainer=null,this.companion=null,this.aftershotContainer=null,this.fullscreenChangeEventId=null,this.init()}},eb=class{init(){this.render()}render(){this.options.top&&(this.topElement=document.createElement("div"),this.topElement.className="xplayer-background-top",this.core.element.appendChild(this.topElement)),this.bottomElement=document.createElement("div"),this.bottomElement.className="xplayer-background-bottom",this.core.element.appendChild(this.bottomElement)}constructor(e,t){this.core=e,this.options=t.background||{},this.init()}},eS=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("a"),this.element.className="play",this.element.innerHTML="<div class='play-inner'></div>"}attachEvents(){this.element.addEventListener("click",this.onPlayClick.bind(this)),y.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this),y.on(f.Z.PLAYER_ON_PLAYING,this.togglePlayButton,this),y.on(f.Z.PLAYER_ON_PAUSE,this.togglePlayButton,this),y.on(f.Z.CONTROLS_RESET,this.setButtonToPlay,this),y.on(f.Z.REMOTE_PLAYER_STATE_CHANGED,this.togglePlayButton,this)}onPlayClick(e){P.get("playing")?(e.preventDefault(),y.emit(f.Z.PLAYER_PAUSE)):this.gotoPageUrlOnReplay||(e.preventDefault(),y.emit(f.Z.USER_SEEK_SET_CURRENT_TIME,P.get("currentTime")),y.emit(f.Z.PLAYER_PLAY))}onPlayerEnded(){P.get("ads_playing")||this.setButtonToReplay()}togglePlayButton(){P.get("playing")?this.setButtonToPause():this.setButtonToPlay()}setButtonToPause(){this.element.className="play pause",this.setReplayButton(!1)}setButtonToPlay(){this.element.className="play",this.setReplayButton(!1)}setButtonToReplay(){this.element.className="play replay",this.setReplayButton(!0)}setReplayButton(e){this.replay=e,this.gotoPageUrlOnReplay?(this.element.setAttribute("href",this.options.pageURL),this.element.setAttribute("target","_blank")):(this.element.setAttribute("href","#"),this.element.removeAttribute("target"))}get gotoPageUrlOnReplay(){return this.replay&&this.options.gotoPageUrlOnReplay&&this.options.pageURL}constructor(e,t={}){return this.core=e,this.options=t,this.replay=!1,this.init(),this.element}};let eT="toggled";var eA=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="volume-controls",this.element.innerHTML=`<div href="#" class="volume"></div><span class="volume-bar"><span class="bar">
    <span class="filler" style="width: 100%;"></span><span class="handle" style="left: 100%;"></span></span></span>`,this.volumeElement=this.element.getElementsByClassName("volume")[0],this.volumeBarElement=this.element.getElementsByClassName("volume-bar")[0],this.fillerElement=this.element.getElementsByClassName("filler")[0],this.handleElement=this.element.getElementsByClassName("handle")[0];let e=this.core.capabilities.mobile?!this.core.settings.muted:this.core.settings.volume;this.setVolumeElementVolume(e),this.setVolumeBarVolume(this.core.settings.volume),this.setVolumeTooltip(this.core.settings.volume)}attachEvents(){this.core.capabilities.mobile?this.attachTouchEvents():this.attachMouseEvents(),this.core.on(f.Z.PLAYER_SET_VOLUME,this.onPlayerVolumeChange,this)}attachMouseEvents(){this.element.addEventListener("mouseenter",this.onElementMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.volumeElement.addEventListener("click",this.onVolumeElementClick.bind(this)),this.volumeBarElement.addEventListener("mousedown",this.onVolumeBarElementMouseDown.bind(this)),this.core.element.addEventListener("mousemove",this.onCoreElementMouseMove.bind(this)),this.core.element.addEventListener("mouseup",this.onCoreElementMouseUp.bind(this)),this.core.element.addEventListener("mouseleave",this.onCoreElementMouseUp.bind(this))}attachTouchEvents(){this.volumeElement.addEventListener("touchstart",this.onVolumeElementTouchStart.bind(this))}onElementMouseEnter(){this.blockMouseEvents||this.showVolumeBar()}onElementMouseLeave(){this.seeking||this.seeked||this.hideVolumeBar()}onVolumeElementTouchStart(){this.core.videoElement.muted=!this.core.videoElement.muted,this.core.videoElement.volume=!this.core.videoElement.muted,this.setVolumeElementVolume(!this.core.videoElement.muted)}onVolumeElementClick(e){let t;this.blockMouseEvents||(e.preventDefault(),0===e.button&&(this.core.videoElement.volume<.02||this.core.videoElement.muted?t=this.savedVolume||1:(this.savedVolume=this.core.videoElement.volume,t=0),this.core.emit(f.Z.PLAYER_SET_VOLUME,t)))}onVolumeBarElementMouseDown(e){e.preventDefault(),0===e.button&&(this.seeking=!0,this.seeked=!0,this.setVolumeBarEventVolume(e))}onCoreElementMouseMove(e){this.seeking&&this.setVolumeBarEventVolume(e)}onCoreElementMouseUp(e){if(!this.seeking){this.checkIfVolumeBarNeedsHide(e)&&(this.seeked=!1,this.hideVolumeBar());return}this.seeking=!1}setVolumeBarEventVolume(e){let t=((e.clientX-h.findElPosition(this.volumeBarElement).left)/this.volumeBarElement.offsetWidth).toFixed(2);this.core.emit(f.Z.PLAYER_SET_VOLUME,t)}showVolumeBar(){h.addClass(this.element,eT)}hideVolumeBar(){h.removeClass(this.element,eT)}checkIfVolumeBarNeedsHide(e){return!(e.target===this.handleElement||e.target===this.volumeBarElement||e.target===this.volumeElement||e.target===this.fillerElement||e.target===this.element)}onPlayerVolumeChange(e){let t;if(this.blockMouseEvents){this.blockMouseEvents=!1;return}t=e<0?0:e>1?1:e,this.setVolumeElementVolume(t),this.setVolumeBarVolume(t),this.setVolumeTooltip(t),this.showVolumeBar()}setVolumeElementVolume(e){e<.02?this.volumeElement.className="volume mute":e<.25?this.volumeElement.className="volume quarter":e<.5?this.volumeElement.className="volume half":e<.75?this.volumeElement.className="volume third":this.volumeElement.className="volume"}setVolumeBarVolume(e){this.handleElement.style.left=`${100*e}%`,this.fillerElement.style.width=`${100*e}%`}setVolumeTooltip(e){let t=e>0?"Disable sound":"Enable sound";this.volumeElement.setAttribute("data-xp-tooltip",t),this.core.emit(f.Z.TOOLTIP_UPDATE,t)}constructor(e){return this.core=e,this.seeking=!1,this.seeked=!1,this.savedVolume=1,this.blockMouseEvents=!1,this.init(),this.element}},ek=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="timing",this.element.innerHTML='<span class="played">00:00</span><span class="separator">/</span><span class="eta">00:00</span>',this.playedElement=this.element.getElementsByClassName("played")[0],this.etaElement=this.element.getElementsByClassName("eta")[0],this.etaElement.childNodes[0].nodeValue=d.parseTime(P.get("duration"),P.get("duration")>=3600)}attachEvents(){y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.onPlayerTimeUpdate,this),y.on(f.Z.PLAYER_SET_CURRENT_TIME,this.onPlayerSetCurrentTime,this),y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.onPlayerDurationChange,this),y.on(f.Z.PROGRESS_BAR_HANDLER_MOVE,this.setCurrentTime,this),y.on(f.Z.PLAYER_SET_SOURCE,this.onPlayerSetSource,this),y.on(f.Z.PLAYER_ON_LOAD_META_DATA,this.onPlayerLoadMetaData,this),y.once(f.Z.NO_USER_ACTION,this.onNoUserAction,this),y.on(f.Z.CONTROLS_RESET,this.onControlsReset,this),y.once(f.Z.PLAYER_PLAY,this.unblockTiming,this)}onPlayerTimeUpdate(e){if(P.get("chromecast")){if(P.get("remoteSourceLoading"))return;this.playedElement.textContent=d.parseTime(e.target.currentTime,e.target.duration>=3600);return}if(!0===this.blockTimeUpdate||!0===this.timingHidden)return;let t=d.parseTime(e.target.currentTime,e.target.duration>=3600);t!==this.lastValue&&(this.lastValue=t,this.playedElement.textContent=t)}onPlayerSetCurrentTime(e){let t;t=e<0?0:e>this.core.videoElement.duration?this.core.videoElement.duration:e,this.setCurrentTime(t)}onPlayerDurationChange(e){this.isTimingBlocked||this.setDuration(e.target.duration)}setDuration(e){this.etaElement.childNodes[0].nodeValue=d.parseTime(e,P.get("duration")>=3600)}unblockTiming(){this.isTimingBlocked=!1}setCurrentTime(e){this.playedElement.childNodes[0].nodeValue=d.parseTime(e,P.get("duration")>=3600)}onPlayerSetSource(){"standard"===this.core.sourceController.type&&(this.blockTimeUpdate=!0)}onPlayerLoadMetaData(){this.blockTimeUpdate=!1}onUserAction(){this.timingHidden=!1,this.core.once(f.Z.NO_USER_ACTION,this.onNoUserAction.bind(this))}onNoUserAction(){this.timingHidden=!0,this.core.once(f.Z.USER_ACTION,this.onUserAction.bind(this))}onControlsReset(e){this.setDuration(this.core.options.duration),this.setCurrentTime(e)}constructor(e){return this.core=e,this.lastValue=0,this.isTimingBlocked=!0,this.init(),this.element}},eL=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="fullscreen-button",this.element.setAttribute("data-xp-tooltip","Fullscreen"),y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.toggleTooltip.bind(this))}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(){this.core.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN)}toggleTooltip(){let e="Fullscreen"===this.element.getAttribute("data-xp-tooltip")?"Exit Fullscreen":"Fullscreen";this.core.emit(f.Z.TOOLTIP_UPDATE,e),this.element.setAttribute("data-xp-tooltip",e)}constructor(e,t){return this.core=e,this.options=t||{},this.init(),this.element}};let eC="xplayer-large-mode";var eP=class{init(){this.render(),this.largeModeEnabled&&this.toggleLargeModeClass(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="large-mode",this.element.setAttribute("data-xp-tooltip",this.largeModeEnabled?"Exit Large mode":"Large mode")}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(){this.toggleLargeModeClass(),"function"==typeof this.options.callback&&this.options.callback(),this.core.emit(f.Z.PLAYER_TOGGLE_LARGEMODE,this.enabled),this.core.emit(f.Z.PROGRESS_BAR_RESIZE)}toggleLargeModeClass(){h.hasClass(this.core.element,eC)?(this.element.setAttribute("data-xp-tooltip","Enter large mode"),h.removeClass(this.core.element,eC),this.enabled=!1):(this.element.setAttribute("data-xp-tooltip","Exit large mode"),h.addClass(this.core.element,eC),this.enabled=!0)}constructor(e,t){if(this.options=t.largeMode||null,!this.options)return null;return this.core=e,this.largeModeEnabled=this.options.enabled||!1,this.enabled=!1,this.init(),this.element}};let eR="settings";var eO=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=eR,this.element.innerHTML="<div class='settings-inner'></div>",this.element.setAttribute("data-xp-tooltip","Settings"),this.core.sourceController.ready?h.addClass(this.element,this.core.sourceController.getType(this.core.sourceController.getCurrentQuality())):y.once(f.Z.SOURCE_CONTROLLER_READY,()=>{h.addClass(this.element,this.core.sourceController.getType(this.core.sourceController.getCurrentQuality()))},this),this.core.on(f.Z.SETTINGS_MENU_TOGGLED,this.toggleTooltip,this)}attachEvents(){this.element.addEventListener("click",this.elementOnClick.bind(this)),this.core.on(f.Z.SOURCE_TYPE_CHANGE,this.onSourceTypeChange,this)}elementOnClick(){this.core.emit(f.Z.SETTINGS_MENU_TOGGLE)}toggleTooltip(e){let t=e?"":"Settings";this.core.emit(f.Z.TOOLTIP_UPDATE,t),this.element.setAttribute("data-xp-tooltip",t)}onSourceTypeChange(){let e=this.core.sourceController.getType(this.core.sourceController.getCurrentQuality());this.element.className=eR,e&&h.addClass(this.element,e)}constructor(e){return this.core=e,this.init(),this.element}};let ew="xh-helper-hidden";var eN=class{init(){window.WebKitPlaybackTargetAvailabilityEvent&&!this.options.disable&&(this.render(),this.attachEvents())}onAirplayAvailabilityChanged(e){this.available="available"===e.availability,this.available?this.showElement():this.hideElement()}render(){this.element=document.createElement("div"),this.element.className=`airplay-button ${ew}`}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this)),this.core.videoElement.addEventListener("webkitplaybacktargetavailabilitychanged",this.onAirplayAvailabilityChanged.bind(this))}onElementClick(){if(!P.get("sourceLoaded")){y.once(f.Z.PLAYER_ON_LOADED_DATA,this.onElementClick,this),y.emit(f.Z.PLAYER_PLAY);return}this.core.videoElement.webkitShowPlaybackTargetPicker()}hideElement(){h.addClass(this.element,ew)}showElement(){h.removeClass(this.element,ew)}constructor(e,t){return this.core=e,this.options=t.airplay||{},this.available=null,this.init(),this.element}},eD=()=>'<span class="playback-rate-inner"></span>',eI=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="playback-rate",this.element.innerHTML=eD(),this.rateElement=this.element.getElementsByClassName("playback-rate-inner")[0],this.setRate()}attachEvents(){y.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.setRate,this),this.element.addEventListener("click",()=>y.emit(f.Z.PLAYBACK_RATE_LIST_TOGGLE))}setRate(){"1"!==P.get("playbackRate")?this.rateElement.textContent=`${P.get("playbackRate")}x`:this.rateElement.textContent=""}constructor(e){return this.core=e,this.init(),this.element}},eU="xh-helper-hidden",eM=o(function e(){n(this,e),this.init()},[{key:"init",value:function(){this.element=document.createElement("div"),this.castImage=document.createElement("div"),this.element.className="xplayer-chromecast-button ".concat(eU),this.castImage.className="xplayer-chromecast-button__cast-image",this.element.appendChild(this.castImage),this.attachEvents()}},{key:"chromecastUserRequest",value:function(){y.emit(f.Z.REMOTE_PLAYER_USER_REQUEST),y.emit(f.Z.STATISTICS_UI,em.chromecast_button_click)}},{key:"switchButtonToReal",value:function(){this.element.removeEventListener("click",this.chromecastUserRequest),this.element.className+=" google-chromecast-image",this.element.innerHTML='<google-cast-launcher id="xplayer-cast-launcher"></google-cast-launcher>'}},{key:"showCastButton",value:function(){h.removeClass(this.element,eU),y.emit(f.Z.STATISTICS_UI,em.chromecast_button_shown)}},{key:"attachEvents",value:function(){this.element.addEventListener("click",this.chromecastUserRequest),y.once(f.Z.REMOTE_PLAYER_CHROMECAST_LOADED,this.switchButtonToReal.bind(this)),y.once(f.Z.REMOTE_PLAYER_DEVICE_AVAILABLE,this.showCastButton,this)}},{key:"getElement",value:function(){return this.element}}]),ex="subtitles-button",eY="".concat(ex,"--enabled"),eZ="".concat(ex,"--disabled"),eB="data-xp-tooltip",eV="Show subtitles",eG="Hide subtitles",eF="xh-helper-hidden",eH=o(function e(t,i){n(this,e),this.core=t,this.options=i,this.init()},[{key:"init",value:function(){var e=this;this.render(),y.once(f.Z.SUBTITLES_READY,function(t){if(t){e.element.classList.remove(eF);var i=e.core.settings.subtitlesStateByButton,s="off"!==t.lang;("on"===i||!i)&&s&&e.on(),e.unblock(),e.attachEvents()}})}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className=ex,this.element.classList.add(eF),this.element.classList.add(eZ),this.element.setAttribute(eB,eV)}},{key:"attachEvents",value:function(){this.element.addEventListener("click",this.onElementClick.bind(this)),y.on(f.Z.SUBTITLES_SET_LANG,this.onSetTrack.bind(this)),y.on(f.Z.SUBTITLES_NO_AVAILABLE_TRACKS,this.hideButton.bind(this))}},{key:"unblock",value:function(){this.element.classList.remove(eZ)}},{key:"onSetTrack",value:function(e){"off"===e.lang?this.off():this.on()}},{key:"off",value:function(){h.removeClass(this.element,eY),this.element.setAttribute(eB,eV),y.emit(f.Z.TOOLTIP_UPDATE,eV)}},{key:"on",value:function(){h.addClass(this.element,eY),this.element.setAttribute(eB,eG),y.emit(f.Z.TOOLTIP_UPDATE,eG)}},{key:"hideButton",value:function(){this.element.classList.add(eF)}},{key:"onElementClick",value:function(){h.hasClass(this.element,eZ)||(h.hasClass(this.element,eY)?(y.emit(f.Z.SUBTITLES_HIDE_BUTTON_CLICK),y.emit(f.Z.SUBTITLES_STATE_BY_BUTTON,"off"),y.emit(f.Z.STATISTICS_UI,em.subtitles_by_button_off),this.off()):(y.emit(f.Z.SUBTITLES_SHOW_BUTTON_CLICK),y.emit(f.Z.SUBTITLES_STATE_BY_BUTTON,"on"),y.emit(f.Z.STATISTICS_UI,em.subtitles_by_button_on),this.on()))}},{key:"getElement",value:function(){return this.element}}]),e$="left-block",eW=o(function e(t,i){n(this,e),this.core=t,this.options=i.controlBar||{},this.blockMouseEnter=!1,this.init()},[{key:"init",value:function(){this.render(this.loadControls()),this.attachEvents()}},{key:"loadControls",value:function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.className=e$;var i=document.createElement("div");i.className="right-block",e.appendChild(new eS(this.core)),t.appendChild(new ek(this.core)),t.appendChild(new eA(this.core));var s=new eH(this.core,this.options).getElement();i.appendChild(s);var n=new eN(this.core,this.options);n instanceof Node&&i.appendChild(n);var r=new eM().getElement();i.appendChild(r),i.appendChild(new eI(this.core)),i.appendChild(new eO(this.core));var o=new eP(this.core,this.options);return o instanceof Node&&(i.appendChild(o),i.className+=" ".concat("right-block__large")),i.appendChild(new eL(this.core)),e.appendChild(t),e.appendChild(i),e}},{key:"render",value:function(e){this.element=document.createElement("div"),this.element.className="control-bar",this.element.appendChild(e),this.core.element.appendChild(this.element)}},{key:"attachEvents",value:function(){this.element.addEventListener("mouseenter",this.onElementMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.element.addEventListener("touchend",this.onTouchEnd.bind(this))}},{key:"onElementMouseEnter",value:function(){if(this.blockMouseEnter){this.blockMouseEnter=!1;return}this.core.emit(f.Z.USER_ACTION_PAUSE)}},{key:"onElementMouseLeave",value:function(){this.core.emit(f.Z.USER_ACTION_UNPAUSE)}},{key:"onTouchEnd",value:function(){this.blockMouseEnter=!0,this.onElementMouseLeave()}},{key:"getLeftBlockElement",value:function(){var e=this.element.getElementsByClassName("left-block")[0];return e||((e=document.createElement("div")).className=e$,this.element.appendChild(e)),e}}]);let eK="xh-helper-hidden";var ej=class{init(){this.render(),this.attachEvents()}render(){this.loaderElement=document.createElement("span"),this.loaderElement.className="xplayer-loader",this.loaderElement.innerHTML=`<span class="xplayer-dots-loader">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </span>`,h.addClass(this.loaderElement,eK),this.core.element.appendChild(this.loaderElement)}attachEvents(){y.on(f.Z.PLAYER_ON_SEEKING,this.showLoader,this),y.on(f.Z.PLAYER_ON_WAITING,this.showLoader,this),y.on(f.Z.PLAYER_ON_LOAD_START,this.showLoader,this),y.on(f.Z.SHOW_LOADER,this.showLoader,this),y.on(f.Z.PLAYER_PLAY,this.unblockLoader,this),y.on(f.Z.PLAYER_ON_PLAYING,this.hideLoader,this),y.on(f.Z.PLAYER_ON_SEEKED,this.hideLoader,this),y.on(f.Z.PLAYER_ON_CAN_PLAY,this.hideLoader,this),y.on(f.Z.PLAYER_ON_ERROR,this.hideLoader,this),y.on(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE,this.blockLoader,this),y.on(f.Z.REMOTE_PLAYER_LOADING_START,()=>{this.toggleShown(!0)},this),y.on(f.Z.REMOTE_PLAYER_LOADING_END,()=>{this.toggleShown(!1)},this)}blockLoader(){this.isLoaderBlocked=!0}unblockLoader(){P.get("chromecast")||(this.isLoaderBlocked=!1)}showLoader(){this.shown||this.core.preload||this.isLoaderBlocked||P.get("chromecast")||(this.shown=!0,this.toggleShown(!0))}hideLoader(){if(this.core.capabilities.safari&&!this.timeupdateRequested){this.timeupdateRequested=y.on(f.Z.PLAYER_ON_TIMEUPDATE,()=>{if(this.timeupdateCount<2){this.timeupdateCount++;return}y.off(f.Z.PLAYER_ON_TIMEUPDATE,this.timeupdateRequested),this.toggleShown(!1),this.timeupdateRequested=null});return}this.timeupdateRequested||this.toggleShown(!1)}toggleShown(e){this.shown=e,this.shown?h.removeClass(this.loaderElement,eK):h.addClass(this.loaderElement,eK)}constructor(e){this.core=e,this.shown=!1,this.timeupdateRequested=null,this.timeupdateCount=0,this.isLoaderBlocked=!0,this.init()}};let eq=["xplayer-background-top","xplayer-background-bottom","player-add-ov","tab-content","xplayer-related","top-rated","more-from-user"];var eQ=class{init(){this.attachEvents()}attachEvents(){this.core.element.addEventListener("click",this.onVideoElementClick.bind(this)),this.core.element.addEventListener("touchstart",this.onElementTouchStart.bind(this)),this.core.element.addEventListener("mousemove",this.onElementMouseMove.bind(this)),this.core.element.addEventListener("mousedown",this.onElementMouseDown.bind(this)),this.core.element.addEventListener("mouseup",this.onElementMouseUp.bind(this)),this.core.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.core.element.addEventListener("wheel",this.onElementMouseWheel.bind(this)),this.globalClickCallback=this.onGlobalClick.bind(this),document.addEventListener("click",this.globalClickCallback),this.onElementMouseMoveEventbind=this.onElementMouseMoveEvent.bind(this)}onElementTouchStart(){this.blockClick=this.core.userActionController.getHasNoUserAction()}onElementMouseMove(){this.scheduledMouseMove||(this.scheduledMouseMove=!0,this.timeoutMouseMove=setTimeout(this.onElementMouseMoveEventbind,150))}onElementMouseMoveEvent(){this.scheduledMouseMove=!1,this.core.emit(f.Z.USER_ACTION,!this.leftButtonClicked)}onElementMouseDown(e){1===e.which&&(this.leftButtonClicked=!0,this.core.emit(f.Z.USER_ACTION))}onElementMouseUp(e){1===e.which&&(this.leftButtonClicked=!1,this.core.emit(f.Z.USER_ACTION,!0))}onElementMouseLeave(e){this.core.capabilities.safari&&e.relatedTarget&&h.hasParent(e.relatedTarget,this.core.element)||(this.leftButtonClicked=!1,clearTimeout(this.timeoutMouseMove),this.scheduledMouseMove=!1,this.core.emit(f.Z.USER_ACTION,30))}onElementMouseWheel(e){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement&&!h.hasClass(this.core.element,"fullscreen-ie"))return;e.preventDefault();let t=e.deltaY<0?1:-1;this.core.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume+.05*t),this.core.emit(f.Z.USER_ACTION)}checkIfClickTargetIgnored(e){return!("xplayer__video"===e.id||eq.some(t=>h.hasClass(e,t)))}onGlobalClick(e){this.core.emit(f.Z.MOUSE_CLICK_GLOBAL,e)}onVideoElementClick(e){if(this.core.element.focus(),!this.checkIfClickTargetIgnored(e.target)){if(this.timeoutClick){clearTimeout(this.timeoutClick),this.timeoutClick=null,this.onVideoElementDoubleClick();return}this.timeoutClick=setTimeout(this.onVideoElementSingleClick.bind(this),250)}}onVideoElementSingleClick(){this.timeoutClick=null,this.blockClick||(P.get("playing")?this.core.emit(f.Z.PLAYER_PAUSE):this.core.emit(f.Z.PLAYER_PLAY))}onVideoElementDoubleClick(){this.core.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN)}destroy(){document.removeEventListener("click",this.globalClickCallback)}constructor(e){this.core=e,this.timeoutClick=null,this.timeoutMouseMove=null,this.scheduledMouseMove=!1,this.globalClickCallback=!1,this.init()}};let ez=`
    <div class="xp-context-menu__item" data-action="url">Copy video URL</div>
    <div class="xp-context-menu__item" data-action="url-time">Copy video URL at current time</div>
    <div class="xp-context-menu__item" data-action="help">Help</div>
    <div class="xp-context-menu__item" data-action="report">Report streaming issue</div>
    <textarea class="xp-context-menu__text"></textarea>
`,eJ="xh-helper-hidden";var eX=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-context-menu ${eJ}`,this.element.innerHTML=ez,this.textArea=this.element.getElementsByClassName("xp-context-menu__text")[0],document.getElementsByTagName("body")[0].appendChild(this.element)}attachEvents(){this.core.element.addEventListener("contextmenu",this.onContextMenu.bind(this)),this.core.on(f.Z.MOUSE_CLICK_GLOBAL,this.onMouseGlobalClick,this),this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(e){if(!e.target.hasAttribute("data-action"))return;let t=e.target.getAttribute("data-action");this.processAction(t)}onMouseGlobalClick(e){2!==e.button&&this.hideMenu()}onContextMenu(e){if(e.stopPropagation(),this.shown){this.hideMenu();return}e.preventDefault(),this.setMenuCoords(e),this.showMenu()}setMenuCoords(e){this.element.style.top=`${e.clientY+3}px`,this.element.style.left=`${e.clientX+3}px`}processAction(e){switch(e){case"url":this.copyToClipboard(this.options.pageURL);break;case"url-time":this.copyToClipboard(`${this.options.pageURL}?t=${P.get("currentTime").toFixed(2)}`);break;case"help":this.core.emit(f.Z.HELP_MENU_TOGGLE);break;case"report":this.core.emit(f.Z.PLAYER_PAUSE),this.core.emit(f.Z.REPORT_ISSUE_CLICK)}}copyToClipboard(e){try{this.textArea.textContent=e,this.textArea.select(),document.execCommand("copy")}catch(t){window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}}showMenu(){this.shown=!0,h.removeClass(this.element,eJ)}hideMenu(){this.shown&&(this.shown=!1,h.addClass(this.element,eJ))}constructor(e,t){this.core=e,this.options=t&&t.context||{},this.shown=!1,this.init()}},e0=class{init(){this.core.settings.autoplay&&window.self===window.top||(this.render(),this.attachEvents(),y.emit(f.Z.USER_ACTION_BLOCK))}render(){this.element=document.createElement("div"),this.element.className="xplayer-start-button",this.core.element.appendChild(this.element)}attachEvents(){y.once(f.Z.PLAYER_PLAY,this.destroyButtonAndUnblockUserAction,this),y.once(f.Z.OVERLAY_MENU_TOGGLE,this.destroyButton,this),y.once(f.Z.REMOTE_PLAYER_LOADING_START,this.destroyButtonAndUnblockUserAction,this),this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(){y.emit(f.Z.PLAYER_PLAY),y.emit(f.Z.SHOW_LOADER)}destroyButtonAndUnblockUserAction(){y.emit(f.Z.USER_ACTION_UNBLOCK),this.destroyButton()}destroyButton(){this.exist&&(this.exist=!1,this.core.element.removeChild(this.element),this.element=null)}constructor(e){this.core=e,this.exist=!0,this.init()}};let e1="xh-helper-hidden";var e2=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("canvas"),this.element.className=`xplayer-screenshot ${e1}`,this.context=this.element.getContext("2d"),this.core.element.appendChild(this.element)}attachEvents(){this.core.on(f.Z.PLAYER_BEFORE_SET_SOURCE,this.showScreenshotBeforeChangeSource,this),this.core.on(f.Z.PLAYER_ON_DECODER_ERROR,this.showScreenshotOnDecoderError,this)}getScreenshotSize(){let e,t;let i=this.core.videoElement.videoWidth,s=this.core.videoElement.videoHeight,n=Math.floor(this.core.videoElement.clientWidth),r=Math.floor(this.core.videoElement.clientHeight);return i>=s?t=Math.floor((e=n)*s/i):e=Math.floor((t=r)*i/s),t>r&&(e=Math.floor((t=r)*i/s)),{vWidth:n,vHeight:r,width:e,height:t}}drawScreenshot(){let e=this.getScreenshotSize();this.element.width=e.vWidth,this.element.height=e.vHeight,this.context.clearRect(0,0,e.vWidth,e.vHeight),this.context.drawImage(this.core.videoElement,e.vWidth/2-e.width/2,e.vHeight/2-e.height/2,e.width,e.height)}showScreenshotBeforeChangeSource(){h.hasClass(this.element,e1)&&(this.core.once(f.Z.PLAYER_ON_PLAYING,this.hide,this),this.core.once(f.Z.PLAYER_ON_SEEKED,this.hide,this),this.show())}showScreenshotOnDecoderError(){h.hasClass(this.element,e1)&&(this.core.once(f.Z.PLAYER_ON_PLAYING,this.hide,this),this.show())}show(){this.drawScreenshot(),h.removeClass(this.element,e1)}hide(){h.addClass(this.element,e1)}constructor(e){this.core=e,this.init()}};let e3=`
    <div class="xp-help-list">
    <div class="xp-help-list__block">
    <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    &#9650;
                </div>
                <div class="xp-help-button">
                    +
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Volume up
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    &#9660;
                </div>
                <div class="xp-help-button">
                    -
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Volume down
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    &#9664;
                </div>
                <div class="xp-help-button">
                    &#9654;
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Leap 10 sec. Shift pressed - 20 sec
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button xp-help-button--twice xp-help-button--mini">
                    space
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Play / Pause
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button xp-help-button--twice xp-help-button--mini">
                    Shift + S
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                On / Off slowmo
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    0
                </div>
                <div class="xp-help-button">
                    9
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Go from 0% to 90% length of video
            </div>
        </div>
    </div>    
    <div class="xp-help-list__block xp-help-list__block--right">
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    O
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Show / Hide overlay menu
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    M
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Mute / Unmute
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button xp-help-button--mini">
                    Home
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                To the start of video
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button xp-help-button--mini">
                    End
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                To the end of video
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    B
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Open google in new tab (Boss mode)
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    F
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Fullscreen
            </div>
        </div>
    </div>
    </div>
`,e5="xh-helper-hidden";var e6=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-help ${e5}`,this.element.innerHTML=e3,this.core.element.appendChild(this.element)}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this)),this.core.on(f.Z.HELP_MENU_TOGGLE,this.onHelpMenuToggle,this),this.core.on(f.Z.PLAYER_ON_PLAYING,this.hideHelpMenu,this)}onElementClick(){this.hideHelpMenu()}onHelpMenuToggle(){if(h.hasClass(this.element,e5)){P.get("playing")&&this.core.emit(f.Z.PLAYER_PAUSE),this.showHelpMenu();return}this.hideHelpMenu()}showHelpMenu(){h.removeClass(this.element,e5)}hideHelpMenu(){h.addClass(this.element,e5)}constructor(e){this.core=e,this.init()}},e4=class{init(){this.show&&(this.render(),this.attachEvents())}render(){this.element=document.createElement("div"),this.element.className=`${this.BANNER_DEFAULT_CLASS} xh-helper-hidden`,this.core.element.appendChild(this.element)}renderBanner(){var e,t;this.element.innerHTML=(e=this.bannerHtml,t=this.classNames,`<div class="${t.overlay} ${t.close}">
        <div class="${t.centered}">
            <button class="${t.close}"><i class="xp-icon pause-spot-close-icon"></i></button>
            ${e}
        </div>
    </div>`),this.isHidden=!1,this.core.emit(f.Z.BANNER_RENDERED)}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this)),this.core.on(f.Z.PLAYER_ON_PLAY,this.hideBannerAndUnblockUserAction,this),this.core.on(f.Z.PLAYER_PAUSED,this.showBanner,this),this.core.on(f.Z.OVERLAY_MENU_TOGGLE,this.onOverlayMenuToggle,this),this.core.on(f.Z.PLAYER_ON_ENDED,this.onOverlayMenuToggle,this),this.core.on(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE,this.hideBanner,this),this.core.on(f.Z.SHARE_MENU_OPEN,this.hideBanner,this),this.core.on(f.Z.PAUSE_ACTION_BLOCK,this.onBannerBlock,this),this.core.on(f.Z.PAUSE_ACTION_UNBLOCK,this.onBannerUnblock,this),this.core.on(f.Z.PLAYER_ON_SWIPE_START,this.hideBanner,this)}onElementClick(e){this.core.element.focus(),(h.hasClass(e.target,this.BANNER_CLOSE_CLASS)||h.hasClass(e.target,this.BANNER_CLOSE_ICON_CLASS))&&this.hideBannerAndUnblockUserAction()}onOverlayMenuToggle(){!P.get("ads_playing")&&(this.overlayMenuOpened=!this.overlayMenuOpened,this.overlayMenuOpened&&this.hideBanner())}onBannerBlock(){this.bannerBlocked=!0}onBannerUnblock(){this.bannerBlocked=!1}hideBannerAndUnblockUserAction(){this.core.emit(f.Z.USER_ACTION_UNBLOCK),this.hideBanner()}hideBanner(){this.isHidden=!0,h.addClass(this.element,"xh-helper-hidden")}showBanner(){P.get("swiping")||!this.isHidden||this.overlayMenuOpened||this.bannerBlocked||P.get("ads_playing")||(this.core.emit(f.Z.USER_ACTION_BLOCK),this.renderBanner(),h.removeClass(this.element,"xh-helper-hidden"))}constructor(e,t){var i,s;this.core=e,this.options=t,this.classNames=t.bannerPauseSpotClassNames,this.BANNER_DEFAULT_CLASS=null===(i=this.classNames)||void 0===i?void 0:i.pauseSpotContainer,this.BANNER_CLOSE_CLASS=null===(s=this.classNames)||void 0===s?void 0:s.close,this.BANNER_CLOSE_ICON_CLASS="pause-spot-close-icon",this.bannerHtml=this.options.banner&&this.options.banner.bannerHtml||!1,this.isHidden=!0,this.show=this.options.banner&&this.bannerHtml&&this.options.banner.show||!1,this.overlayMenuOpened=!1,this.bannerBlocked=!1,this.core.cssModules||(this.core.cssModules={}),this.core.cssModules.pauseBanner=this.classNames,this.init()}},e9=(e,t)=>`
    <div class="${t.bWrapper}${e.fullWidth?` ${t.fullWidth}`:""}">
      <span class="${t.close}"></span>
      <a href="${e.bannerUrl}" target="_blank">
        <img src="${e.bannerImage}" alt="${e.banner}">
      </a>
      ${e.tooltip}
    </div>
    <span class="${t.bWrapperShow}"></span>`,e7=(e,t)=>`
    <div class="${t.bWrapper}${e.fullWidth?` ${t.fullWidth}`:""}">
      <span class="${t.close}"></span>
      ${e.html}
    </div>
    <span class="${t.bWrapperShow}"></span>`,e8={bWrapper:"b0567-bWrapper",fullWidth:"b0567-fullWidth",bWrapperShow:"b0567-bWrapperShow",xplayer:"xplayer","no-user-action":"no-user-action",containerBottomSpot:"b0567-containerBottomSpot",close:"b0567-close",closed:"b0567-closed",embed:"embed"};let te=e8.containerBottomSpot,tt=e8.bWrapperShow,ti=e8.close,ts=e8.closed;var tn=class{init(){this.show&&(this.template=this.isBannerHTML?e7:e9,this.render(),y.once(f.Z.PLAYER_ON_PLAY,this.startShowingBanner,this),y.once(f.Z.ADS_UNBLOCK_BOTTOM_BANNER,this.unblockBanner.bind(this)),this.core.cssModules||(this.core.cssModules={},this.core.cssModules.bannerBottom=e8))}render(){this.element=document.createElement("div"),this.element.className=`${te} xh-helper-hidden`,this.core.element.appendChild(this.element)}renderInner(){this.element.innerHTML=this.template(this.options,e8),this.closeElement=this.element.querySelector(`.${ti}`),this.showElement=this.element.querySelector(`.${tt}`)}attachEvents(){this.closeElement.addEventListener("click",this.hideBanner.bind(this)),this.showElement.addEventListener("click",this.showBanner.bind(this)),this.element.addEventListener("click",()=>{y.emit(f.Z.BANNER_BOTTOM_CLICK)})}unblockBanner(){this.isBlocked=!1}hideBanner(){h.addClass(this.element,ts),y.emit(f.Z.BANNER_BOTTOM_HIDE)}showBanner(){this.isBlocked||(h.removeClass(this.element,ts),y.emit(f.Z.BANNER_BOTTOM_SHOW))}enable(){this.enabled=!0}startShowingBanner(){if(P.get("ads_playing")){y.once(f.Z.PLAYER_ON_CAN_PLAY,this.startShowingBanner,this);return}document.querySelector(`.${e8.show}`)||this.isBlocked||setTimeout(()=>{this.renderInner(),this.attachEvents(),h.removeClass(this.element,"xh-helper-hidden"),y.emit(f.Z.BANNER_BOTTOM_SHOW)},this.showTimeout)}constructor(e,t,i=!1){this.core=e,this.options=t.bannerBottom||{},this.bannerUrl=this.options.bannerUrl||!1,this.isBannerHTML=this.options.html||!1,this.showTimeout=this.options.showTimeout||2e3,this.show=this.bannerUrl||this.isBannerHTML||!1,this.enabled=this.options.enabled||!1,this.isBlocked=!i,this.template=null,this.init()}};let tr="xp-tooltip";var to=class{init(){this.render(),document.addEventListener("mouseover",this.isTooltip.bind(this,this.updateTooltipFromMouse)),document.addEventListener("mouseout",this.isTooltip.bind(this,this.hideTooltip)),document.addEventListener("touchend",this.onTouchEnd.bind(this)),this.core.on(f.Z.TOOLTIP_UPDATE,this.updateTooltipText,this)}render(){this.element=document.createElement("div"),this.element.className="xp-tooltip",this.core.element.appendChild(this.element)}isTooltip(e,t){let i=h.hasParentByData(t.target,tr);i&&e.call(this,t,i)}onTouchEnd(){this.blockTooltipUpdate=!0}hideTooltip(){this.visible&&(h.css(this.element,{opacity:0,top:-12e3,left:-12e3}),this.visible=!1)}updateTooltipFromMouse(e,t){e.stopPropagation(),this.updateTooltip(t)}updateTooltip(e){if(this.blockTooltipUpdate){this.blockTooltipUpdate=!1;return}let t=e.getAttribute(`data-${tr}`);if(!t)return;let i=this.calcElementBox(e);this.visible&&this.hideTooltip(),this.updateTooltipText(t),this.showTooltip(i)}updateTooltipText(e){this.element.innerHTML=e}calcElementBox(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,bottom:t.top+window.pageYOffset+e.offsetHeight,left:t.left+window.pageXOffset,right:t.left+t.width+window.pageXOffset,center:t.left+window.pageXOffset+e.offsetWidth/2}}calcTooltipBox(e){return{width:e.offsetWidth,height:e.offsetHeight}}showTooltip(e){let t=this.calcTooltipBox(this.element),i=this.calcElementBox(this.core.element),s=e.top-i.top,n=e.bottom-i.top,r=s>t.height+10,o=r?s-t.height-12:n+6,a=e.center-t.width/2-i.left,l=i.right-i.left,c=a+t.width>l?l-t.width-5:a;r?h.removeClass(this.element,"below"):h.addClass(this.element,"below"),h.css(this.element,{top:o,left:c,opacity:1}),this.visible=!0}constructor(e){this.core=e,this.visible=!1,this.blockTooltipUpdate=!1,this.init()}},ta=class{init(){if(this.element=this.core.element.querySelector(".xp-preload-image"),this.element&&this.shouldRemovePoster){this.destroy();return}!this.element&&this.options.url&&this.render(),this.element&&this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="xp-poster",this.element.style.backgroundImage=`url('${this.options.url}')`,this.core.element.appendChild(this.element)}attachEvents(){y.once(f.Z.PLAYER_ON_PLAYING,this.destroy,this),y.once(f.Z.REMOTE_PLAYER_PLAYING,this.destroy,this),this.element.addEventListener("click",this.onClick.bind(this))}onClick(){y.emit(f.Z.PLAYER_PLAY),y.emit(f.Z.POSTER_CLICK)}destroy(){this.element&&(this.core.element.removeChild(this.element),this.element=null)}constructor(e,t){this.core=e,this.options=t.poster||{},this.shouldRemovePoster=this.options.shouldRemovePoster||!1,this.init()}},tl=e=>{var t;let i,s;return`<div class="xp-subscribe__button-wrapper xh-helper-hidden">
    <div class="xp-subscribe__title">${e.title}</div>
    <div class="xp-subscribe__button${e.subscribed?" xp-subscribe__button--subscribed":""}">
        <span class="xp-subscribe__button-text">
            ${e.subscribed?"Subscribed":"Subscribe"}
        </span>${e.subscribers?`<span class="xp-subscribe__button-subscribers">
        ${i=Math.abs(t=e.subscribers),s="",i>=1e12?(s+="T",t/=1e12):i<1e12&&i>=1e9?(s+="B",t/=1e9):i<1e9&&i>=1e6?(s+="M",t/=1e6):i<1e6&&i>=1e3&&(s+="K",t/=1e3),s?Math.round(10*t)/10+s:t}</span>`:""}
    </div>
</div><a target="_blank" href="${e.link}" class="xp-subscribe__logo">${e.logo?`<img src="${e.logo}" alt="Channel Logo" >`:""}</a>`};let tc="xp-subscribe__button",th="xp-subscribe__button--disabled",tu="xh-helper-hidden";var td=class{defaultOptions(){return{id:null,title:"",subscribed:!1,subscribers:0,logo:"",link:""}}init(){this.options.id&&(this.isOn=!0,this.render(),this.attachEvents(),y.emit(f.Z.SUBSCRIBE_INIT))}render(){this.element=document.createElement("div"),this.element.className="xp-subscribe",this.element.innerHTML=tl(this.options),this.buttonWrapper=this.element.querySelector(".xp-subscribe__button-wrapper"),this.button=this.element.querySelector(`.${tc}`),this.logo=this.element.querySelector(".xp-subscribe__logo"),this.core.element.appendChild(this.element)}attachEvents(){this.element.addEventListener("mouseenter",this.onMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onMouseLeave.bind(this)),y.on(f.Z.NO_USER_ACTION,this.hideSubscribeButton,this),this.button.addEventListener("click",this.onButtonClick.bind(this)),this.logo.addEventListener("click",this.onLogoClick.bind(this))}onMouseEnter(){this.options.callback&&"function"==typeof this.options.callback&&!this.shown&&(this.shown=!0,y.emit(f.Z.SUBSCRIBE_SHOW),clearTimeout(this.subscribeHideTimeout),h.removeClass(this.buttonWrapper,tu))}onMouseLeave(){this.shown=!1,this.subscribeHideTimeout=setTimeout(()=>this.hideSubscribeButton(),1e3)}hideSubscribeButton(){h.addClass(this.buttonWrapper,tu)}onButtonClick(){this.disabled||(this.options.subscribed?y.emit(f.Z.SUBSCRIBE_CLICK_UNSUBSCRIBE):y.emit(f.Z.SUBSCRIBE_CLICK_SUBSCRIBE),this.options.callback(this))}onLogoClick(){y.emit(f.Z.SUBSCRIBE_CLICK_LOGO)}disable(){this.disabled=!0,h.addClass(this.button,th)}enable(){this.disabled=!1,h.removeClass(this.button,th)}renderButton(){let e=document.createElement("div");e.innerHTML=tl(this.options),h.removeElement(this.button),this.button=e.querySelector(`.${tc}`),this.buttonWrapper.appendChild(this.button),this.button.addEventListener("click",this.onButtonClick.bind(this))}constructor(e,t={}){this.core=e,this.options=(0,m._)({},this.defaultOptions(),t.subscribe),this.disabled=!1,this.shown=!1,this.isOn=!1,this.subscribeHideTimeout=null,this.init()}};let tm=["quality"];var tp=class{init(){this.initControllers(this.controllersList),this.render(),this.attachEvents()}initControllers(e){this.controllers=e.map(e=>new e(this.core,this.options))}render(){this.element=document.createElement("div"),this.element.className="settings-menu xh-helper-hidden",this.renderControllers(),this.core.element.appendChild(this.element)}renderControllers(){this.controllers.map(e=>e.element&&this.element.appendChild(e.element))}renderReport(){this.reportElement=document.createElement("p"),this.reportElement.className="report",this.reportElement.innerText="Report issue",this.element.appendChild(this.reportElement)}reattachControllers(){this.element.innerHTML="",this.initControllers(this.controllersList),this.renderControllers()}attachEvents(){y.on(f.Z.VR_CONTROLS_ADDED,this.reattachControllers,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.onSettingsMenuToggle,this),y.on(f.Z.PLAYER_ON_PLAY,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hideSettingsMenu,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hideSettingsMenu,this),y.on(f.Z.NO_USER_ACTION,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hideSettingsMenu,this),y.on(f.Z.QUALITY_LIST_OPEN,this.hideSettingsMenu,this),y.on(f.Z.PLAYBACK_RATE_LIST_TOGGLE,this.hideSettingsMenu,this),y.on(f.Z.SUBTITLES_LIST_TOGGLE,this.hideSettingsMenu,this),y.on(f.Z.VR_CONTROLS_LIST_OPEN,this.hideSettingsMenu,this),y.on(f.Z.REPORT_ISSUE_CLICK,this.hideSettingsMenu,this),y.on(f.Z.REMOTE_PLAYER_SESSION_START,this.hideRemoteUnsupportedOptions,this),y.on(f.Z.REMOTE_PLAYER_SESSION_END,this.showRemoteUnsupportedOptions,this)}onSettingsMenuToggle(){this.shown?this.hideSettingsMenu():this.showSettingsMenu()}hideSettingsMenu(){this.shown&&(this.shown=!1,h.addClass(this.element,"xh-helper-hidden"),this.core.emit(f.Z.SETTINGS_MENU_TOGGLED,!1))}showRemoteUnsupportedOptions(){this.controllers.forEach(e=>{var t,i;let s=null===(i=e.element.querySelector(".label"))||void 0===i?void 0:null===(t=i.textContent)||void 0===t?void 0:t.toLowerCase();tm.includes(s)||h.removeClass(e.element,"xh-helper-hidden")})}hideRemoteUnsupportedOptions(){this.controllers.forEach(e=>{var t,i;let s=null===(i=e.element.querySelector(".label"))||void 0===i?void 0:null===(t=i.textContent)||void 0===t?void 0:t.toLowerCase();tm.includes(s)||h.addClass(e.element,"xh-helper-hidden")})}showSettingsMenu(){this.shown=!0,h.removeClass(this.element,"xh-helper-hidden"),this.core.emit(f.Z.SETTINGS_MENU_TOGGLED,!0)}constructor(e,t=[],i={}){this.core=e,this.options=i,this.element=null,this.controllers=null,this.controllersList=t,this.init()}},tE=class{getTemplate(){throw Error("BasicSettingController - template not defined")}getTemplateOptions(){throw Error("BasicSettingController - template options not defined")}init(){this.element=document.createElement("span"),this.element.className="setting",this.render(),this.attachEvents()}render(){this.element.innerHTML=this.getTemplate()(this.getTemplateOptions())}attachEvents(){throw Error("BasicSettingController - events not defined")}constructor(e,t){this.core=e,this.options=t,this.element=null,this.init()}},tv=function(e){var t=e.id,i=e.label,s=e.checked;return'\n            <span class="label">'.concat(i,'</span>\n            <label for="').concat(t,'" class="toggle-control switcher">\n                <input id="').concat(t,'" class="').concat(t,'" ').concat(s?"checked":"",' type="checkbox">\n                <div class="toggler-container">\n                    <div class="toggler"></div>\n                </div>\n            </label>\n    ')},t_=class extends tE{getTemplate(){return tv}getTemplateOptions(){return{id:"autoplay_toggler",label:"Autostart",checked:!!this.core.settings.autoplay}}init(){this.core.noAutoplay||super.init()}attachEvents(){this.element.addEventListener("change",e=>this.core.emit(f.Z.PLAYER_SET_AUTOPLAY,e.target.checked))}};function tf(e){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tg(e,t){return t&&("object"===tf(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tb(e,t){return(tb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tS(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tb(e,t)}var tT=function(e){var t=e.id,i=e.label,s=e.checked;return'\n        <label for="'.concat(t,'" class="toggle-control switcher">\n            <div class="xplayer-settings-av1__label">').concat(i,'</div>\n            <div>\n                <input id="').concat(t,'" class="').concat(t,'" ').concat(s?"checked":"",' type="checkbox">\n                <div class="toggler-container">\n                    <div class="toggler"></div>\n                </div>\n            </div>\n        </label>\n        <div class="xplayer-settings-av1__tip">Turn off if you see the green screen</div>\n    ')};function tA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tA=function(){return!!e})()}var tk=function(e){function t(){var e,i;return n(this,t),e=t,i=arguments,e=ty(e),tg(this,tA()?Reflect.construct(e,i||[],ty(this).constructor):e.apply(this,i))}return tS(t,e),o(t,[{key:"getTemplate",value:function(){return tT}},{key:"getTemplateOptions",value:function(){return{id:"av1_toggler",label:"Faster streaming (Recommended)",checked:this.core.settings.useAv1}}},{key:"init",value:function(){this.element=document.createElement("span"),this.element.className="setting with-av1",this.render(),this.attachEvents()}},{key:"attachEvents",value:function(){var e=this;this.element.addEventListener("change",function(t){return e.core.emit(f.Z.PLAYER_SET_AV1_OPTION,t.target.checked)})}}])}(tE),tL=class extends tE{getTemplate(){return tv}getTemplateOptions(){return{id:"preview_toggler",label:"Image preview",checked:!!this.core.settings.preview}}attachEvents(){this.element.addEventListener("change",e=>this.core.emit(f.Z.PLAYER_SET_PREVIEW,e.target.checked))}},tC=({label:e,typeClass:t,labelInSettings:i,labelCss:s})=>`
            <span class="label ${t}">${e}</span>
            <span class="chooser-control ${t}">
                <span class="${s||""}">${i}</span>
            </span>
    `,tP=class extends tE{getTemplate(){return tC}getTemplateOptions(){return{label:"Quality",typeClass:"quality",labelInSettings:this.core.sourceController.getCurrentQuality(),labelCss:this.core.sourceController.getType(this.core.sourceController.getCurrentQuality())}}init(){this.element=document.createElement("span"),this.element.className="setting with-menu",this.render(),this.attachEvents()}attachEvents(){this.element.addEventListener("click",()=>y.emit(f.Z.QUALITY_LIST_OPEN)),y.on(f.Z.SOURCE_CONTROLLER_READY,this.render,this),y.on(f.Z.PLAYER_FALLBACK_SOURCE,this.render,this),y.on(f.Z.PLAYER_SET_SOURCE,this.render,this),y.on(f.Z.SETTINGS_RENDER_QUALITY,this.render,this)}},tR=class extends tE{getTemplate(){return tC}getTemplateOptions(){return{label:"Speed",typeClass:"playbackRate",labelInSettings:"1"===P.get("playbackRate")?"Normal":`${P.get("playbackRate")}x`}}init(){this.element=document.createElement("span"),this.element.className="setting with-menu",this.render(),this.attachEvents()}attachEvents(){this.element.addEventListener("click",()=>y.emit(f.Z.PLAYBACK_RATE_LIST_TOGGLE)),this.core.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.render,this)}},tO=class extends tE{init(){this.element=document.createElement("p"),this.element.className="report",this.element.innerText="Report issue",this.attachEvents()}attachEvents(){this.element.addEventListener("click",this.onReportClick.bind(this))}onReportClick(){this.core.emit(f.Z.REPORT_ISSUE_CLICK),P.get("playing")&&this.core.emit(f.Z.PLAYER_PAUSE)}};function tw(e,t,i){return(tw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var s=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ty(e)););return e}(e,t);if(s){var n=Object.getOwnPropertyDescriptor(s,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}var tN=function(e){var t=e.label,i=e.labelClass,s=e.labelInSettings,n=e.labelInSettingsClass;return'\n            <span class="label '.concat(i,'">').concat(t,'</span>\n            <span class="chooser-control ').concat(i,'">\n                <span class="').concat(n||"",'">').concat(s,"</span>\n            </span>\n    ")};function tD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tD=function(){return!!e})()}var tI="disabled",tU=function(e){function t(){var e,i;return n(this,t),e=t,i=arguments,e=ty(e),tg(this,tD()?Reflect.construct(e,i||[],ty(this).constructor):e.apply(this,i))}return tS(t,e),o(t,[{key:"getTemplate",value:function(){return tN}},{key:"getTemplateOptions",value:function(){return{label:"Subtitles",labelClass:"subtitles",labelInSettings:"Unavailable",labelInSettingsClass:"subtitles-selected-track"}}},{key:"init",value:function(){var e=this;this.element=document.createElement("span"),this.element.className="setting with-menu",this.element.classList.add(tI),this.render(),y.once(f.Z.SUBTITLES_READY,function(t){var i="Off";t.label&&"off"!==e.core.settings.subtitlesStateByButton&&(i=t.label),e.selectedTrackElement.textContent=i,e.element.classList.remove(tI),e.attachEvents()})}},{key:"render",value:function(){var e,i,s;(e="render",i=this,s=tw(ty(0?t:t.prototype),e,i),0?s:function(e){return s.apply(i,e)})([]),this.selectedTrackElement=this.element.querySelector(".subtitles-selected-track")}},{key:"attachEvents",value:function(){y.on(f.Z.SUBTITLES_SHOW,this.setLangLabel,this),y.on(f.Z.SUBTITLES_SET_DEFAULT_LANG,this.setLangLabel,this),y.on(f.Z.SUBTITLES_HIDE,this.setLangLabel.bind(this,{label:"Off"})),y.on(f.Z.SUBTITLES_NO_AVAILABLE_TRACKS,this.disable.bind(this)),this.element.addEventListener("click",function(){return y.emit(f.Z.SUBTITLES_LIST_TOGGLE)})}},{key:"disable",value:function(){this.selectedTrackElement.textContent="Unavailable",this.element.classList.add(tI)}},{key:"setLangLabel",value:function(e){var t=e.label;this.selectedTrackElement.textContent=t}}])}(tE),tM="xh-helper-hidden",tx="data-value",tY="chosen",tZ=o(function e(t,i){n(this,e),this.core=t,this.options=null==i?void 0:i.subtitles,this.element=null,this.backElement=null,this.innerElement=null,this.shouldSaveTrackToSettings=!0,this.init()},[{key:"init",value:function(){this.render(),this.attachEvents()}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.innerHTML='\n    <span class="setting xp-settings-inner-list-back">\n        <span class="label">Back</span>\n            </span>\n            <span class="setting">\n        <span class="subtitles-setting chooser-control xp-settings-inner-list-inner"></span>\n    </span>\n',this.element.className="".concat("xp-settings-inner-list settings-menu"," ").concat(tM),this.backElement=this.element.querySelector(".".concat("xp-settings-inner-list-back")),this.innerElement=this.element.querySelector(".".concat("xp-settings-inner-list-inner")),this.renderSettings(),this.core.element.appendChild(this.element)}},{key:"renderSettings",value:function(){var e,t=this.core.settings.subtitlesPrefLang,i="off"!==this.core.settings.subtitlesStateByButton,s="";s=i&&t&&"off"!==t.lang?'<span data-value="off">Off</span>':'<span data-value="off" class="chosen">Off</span>',null===(e=this.options.tracks)||void 0===e||e.forEach(function(e){var n=i&&(null==t?void 0:t.lang)===e.lang;s+="\n                <span data-value='".concat(e.lang,"' class=\"").concat(n?"chosen":"",'">\n                    ').concat(e.label,"\n                </span>\n            ")}),this.innerElement.innerHTML=s}},{key:"attachEvents",value:function(){y.on(f.Z.SUBTITLES_LIST_TOGGLE,this.toggle,this),y.on(f.Z.PLAYER_ON_PLAY,this.hide,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hide,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hide,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hide,this),y.on(f.Z.NO_USER_ACTION,this.hide,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hide,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.hide,this),y.on(f.Z.SUBTITLES_SET_DEFAULT_LANG,this.setChosenLang.bind(this)),y.on(f.Z.SUBTITLES_HIDE,this.setChosenLang.bind(this,{lang:"off"})),y.on(f.Z.SUBTITLES_SHOW,this.setChosenLang.bind(this)),"off"!==this.core.settings.subtitlesStateByButton&&y.on(f.Z.SUBTITLES_READY,this.setChosenLang.bind(this)),y.once(f.Z.SUBTITLES_LOADED,this.renderSettings.bind(this)),this.backElement.addEventListener("click",function(){return y.emit(f.Z.SETTINGS_MENU_TOGGLE)}),this.innerElement.addEventListener("click",this.onElementClick.bind(this))}},{key:"setChosenLang",value:function(e){var t=e.lang,i=this.innerElement.querySelector("span[data-value='".concat(t,"']"));this.hide(),this.toggleActiveElement(i)}},{key:"onElementClick",value:function(e){var t=null==e?void 0:e.target;if(!(!(null!=t&&t.hasAttribute(tx))||h.hasClass(t,tY))){var i=null==t?void 0:t.getAttribute(tx),s={lang:i,label:null==t?void 0:t.textContent},n="off"===s.lang;y.emit(f.Z.SUBTITLES_SET_LANG,s),y.emit(f.Z.SUBTITLES_SAVE_LANG,s),y.emit(f.Z.SUBTITLES_STATE_BY_BUTTON,"off"===i?"off":"on"),n?y.emit(f.Z.STATISTICS_UI,em.settings_subtitles_off):y.emit(f.Z.STATISTICS_UI,em.settings_subtitles_on),this.hide(),this.toggleActiveElement(t)}}},{key:"toggleActiveElement",value:function(e){var t=e.parentNode.getElementsByClassName(tY)[0];t&&h.removeClass(t,tY),h.addClass(e,tY)}},{key:"toggle",value:function(){h.hasClass(this.element,tM)?this.show():this.hide()}},{key:"show",value:function(){h.removeClass(this.element,tM)}},{key:"hide",value:function(){h.addClass(this.element,tM)}}]),tB=()=>`
        <span class="setting xp-settings-inner-list-back">
            <span class="label">Back</span>
        </span>
        <span class="setting">
            <span class="quality chooser-control xp-settings-inner-list-inner"></span>
        </span>
    `;let tV="auto-chosen",tG="xh-helper-hidden",tF="data-value",tH="chosen";var t$=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-settings-inner-list settings-menu ${tG}`,this.element.innerHTML=tB(),this.backElement=this.element.querySelector(".xp-settings-inner-list-back"),this.innerElement=this.element.querySelector(".xp-settings-inner-list-inner"),this.renderQualitySettings(),this.core.element.appendChild(this.element)}renderQualitySettings(){if(!this.core.sourceController.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.renderQualitySettings,this);return}let e=this.core.sourceController.getQualities(),t=this.core.sourceController.getCurrentQuality(),i,s=[],n="";"auto"===t&&this.core.sourceController.getQuality&&(i=this.core.sourceController.getQuality(-1)),e.forEach(e=>{("auto"!==e||this.core.capabilities.hls||this.core.capabilities.hlsJs&&"hls"===this.core.sourceController.type||this.core.capabilities.dashJs&&"dash"===this.core.sourceController.type)&&(e===t&&s.push("chosen"),s.push(this.core.sourceController.getType(e)),i===e&&s.push(tV),n+=`<span data-value='${e}' class='${s.join(" ")}'>
                ${this.core.sourceController.getLabelFromQuality(e)}
            </span>`,s=[])}),this.innerElement.innerHTML=n}attachEvents(){y.on(f.Z.QUALITY_LIST_OPEN,this.show,this),y.on(f.Z.PLAYER_ON_PLAY,this.hide,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hide,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hide,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hide,this),y.on(f.Z.NO_USER_ACTION,this.hide,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hide,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_FALLBACK_SOURCE,this.renderQualitySettings,this),y.on(f.Z.SETTINGS_RENDER_QUALITY,this.renderQualitySettings,this),this.backElement.addEventListener("click",()=>y.emit(f.Z.SETTINGS_MENU_TOGGLE)),this.innerElement.addEventListener("click",this.onQualityElementClick.bind(this))}onQualityElementClick(e){if(!e.target.hasAttribute(tF)||h.hasClass(e.target,tH))return;let t=e.target,i=t.getAttribute(tF);this.core.emit(f.Z.PLAYER_SET_SOURCE,i,!0),this.hide(),this.toggleActiveElement(t),"auto"===i&&this.chooseAutoqualityLevel(),y.emit(f.Z.PLAYER_SET_QUALITY,i)}chooseAutoqualityLevel(){if(!this.core.sourceController.getQuality)return;let e=this.core.sourceController.getQuality(-1);h.addClass(this.innerElement.querySelector(`[data-value='${e}']`),tV)}toggleActiveElement(e){let t=e.parentNode,i=t.getElementsByClassName(tH)[0],s=t.getElementsByClassName(tV)[0];i&&h.removeClass(i,tH),s&&h.removeClass(s,tV),h.addClass(e,tH)}show(){h.removeClass(this.element,tG)}hide(){h.addClass(this.element,tG)}constructor(e){this.core=e,this.element=null,this.backElement=null,this.innerElement=null,this.init()}},tW=()=>`
        <span class="setting xp-settings-inner-list-back">
            <span class="label">Back</span>
        </span>
        <span class="setting">
            <span class="playback-speed-setting chooser-control xp-settings-inner-list-inner"></span>
        </span>
    `;let tK="xh-helper-hidden",tj="data-value",tq="chosen",tQ=[.25,.5,.75,1,1.25,1.5,1.75,2];var tz=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-settings-inner-list settings-menu ${tK}`,this.element.innerHTML=tW(),this.backElement=this.element.querySelector(".xp-settings-inner-list-back"),this.innerElement=this.element.querySelector(".xp-settings-inner-list-inner"),this.renderSettings(),this.core.element.appendChild(this.element)}renderSettings(){let e="";tQ.forEach(t=>{1===t?e+=`<span data-value='${t}' class='${tq}'>Normal</span>`:e+=`<span data-value='${t}'>${t}x</span>`}),this.innerElement.innerHTML=e}attachEvents(){y.on(f.Z.PLAYBACK_RATE_LIST_TOGGLE,this.toggle,this),y.on(f.Z.PLAYER_ON_PLAY,this.hide,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hide,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hide,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hide,this),y.on(f.Z.NO_USER_ACTION,this.hide,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hide,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.hide,this),this.backElement.addEventListener("click",()=>y.emit(f.Z.SETTINGS_MENU_TOGGLE)),this.innerElement.addEventListener("click",this.onElementClick.bind(this))}onElementClick(e){if(!e.target.hasAttribute(tj)||h.hasClass(e.target,tq))return;let t=e.target,i=t.getAttribute(tj);this.core.emit(f.Z.PLAYER_SET_PLAYBACK_RATE,i),this.hide(),this.toggleActiveElement(t)}toggleActiveElement(e){let t=e.parentNode.getElementsByClassName(tq)[0];t&&h.removeClass(t,tq),h.addClass(e,tq)}toggle(){h.hasClass(this.element,tK)?this.show():this.hide()}show(){h.removeClass(this.element,tK)}hide(){h.addClass(this.element,tK)}constructor(e){this.core=e,this.element=null,this.backElement=null,this.innerElement=null,this.init()}},tJ={play:"play",request:"request",response:"response",parsed:"parsed",shown:"shown",viewToSkip:"viewToSkip",viewToEnd:"viewToEnd",skip:"skip",click:"click"},tX={completed:"Completed",video:"Video",linkAfterEnd:"LinkAfterEnd",link:"Link",cta:"CTA",companionAfterEnd:"CompanionAfterEnd",companion:"Companion"},t0={progress:"progress",clickTracking:"clickTracking",resume:"resume",complete:"complete",pause:"pause",mute:"mute",unmute:"unmute",start:"start",firstQuartile:"firstQuartile",midpoint:"midpoint",thirdQuartile:"thirdQuartile",skip:"skip"},t1={preroll_shown_error_prefix:"preroll_shown_error",preroll_play:"preroll_play",preroll_ok:"preroll_ok",preroll_shown:"preroll_shown",preroll_timeout_shown:"preroll_timeout_shown",preroll_link_completed:"preroll_link_completed",preroll_link_video:"preroll_link_video",preroll_link_cta:"preroll_link_cta",preroll_ended:"preroll_ended",preroll_skip:"preroll_skip",preroll_impression:"preroll_impression",preroll_click:"preroll_click",preroll_shown_5s:"preroll_shown_5s",preroll_empty:"preroll_empty",preroll_error:"preroll_error",preroll_link_companion_empty:"preroll_link_companion_empty",preroll_link_companion_empty_ended:"preroll_link_companion_empty_ended",preroll_link_companion:"preroll_link_companion",preroll_link_companion_ended:"preroll_link_companion_ended",preroll_link_label:"preroll_link_label",preroll_link_label_ended:"preroll_link_label_ended",preroll_link_returned_to_xh_ms:"preroll_link_returned_to_xh_ms"},t2={start:!1,firstQuartile:!1,midpoint:!1,thirdQuartile:!1},t3={xml_parsing:100,wrapper_general:300,wrapper_connection:301,linear_general:400,video_not_found:401,video_file_timeout:402,video_format_not_supported:403,video_play_error:405,unknown:900},t5={ADS_ROOT_ELEMENT_CLASS:"xplayer-ads",ADS_ROOT_ELEMENT_MOBILE_CLASS:"xplayer-ads-mobile",ADS_COMPLETED_ROOT_ELEMENT_CLASS:"xplayer-ads-completed",ADS_ELEMENT_CLASS:"xplayer-ads-block",ADS_PRELOAD_CLASS:"xplayer-ads-preload",ADS_BLOCK_CLASS:"xplayer-ads-block__skip--blocked",ADS_ALLOWED_SKIP_SELECTOR:".xplayer-ads-block__skip--allowed-skip",ADS_SKIP_WITH_TIMING_SELECTOR:".xplayer-ads-block__skip--with-timing",ADS_LOADING_CLASS:"xplayer-ads-loading",ROOT_ELEMENT_PAUSED_CLASS:"xplayer-paused",ROOT_ELEMENT_ANIMATE_CLASS:"xplayer-rotate--animate",ROOT_ELEMENT_ROTATE_SELECTOR:".xplayer-rotate",HIDDEN_CLASS:"xh-helper-hidden"},t6={skip:".xplayer-ads-block__skip",link:".xplayer-ads-block__link",callToAction:".xplayer-ads-block__cta",video:".xplayer-ads-block__video",label:".xplayer-ads-block-label",durationTiming:".xplayer-ads-block__info-new--timing",skipTiming:".xplayer-ads-block__skip--timing",companion:".xplayer-ads-block-companion",completed:".xplayer-ads-block-companion-completed",footer:".xplayer-ads-block__footer",footerCompleted:".xplayer-ads-block__footer-completed",pauseButton:".xplayer-ads-block__pause-button"};function t4(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function t9(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?t4(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t4(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var t7=o(function e(t){var i=t.parser,s=t.options;n(this,e),this.parser=i,this.options=void 0===s?{}:s,this.trackingFunction=null,this.trackGaFunction=null,this.abortServerTimeout=null,this.wrapperDepth=0},[{key:"setNewAdUrl",value:function(e){this.url=e}},{key:"loadData",value:function(e,t){var i=this;return this.trackingFunction=e,new Promise(function(s,n){i.getData(i.url,e,t).then(function(s){return i.getWrappersData(s,e,t)}).then(function(e){s(e.map(function(e){return i.mapAd(e)}))}).catch(function(e){n({error:e})})})}},{key:"mapAd",value:function(e){return e?e.error?{error:e.error}:{ctaText:e.ctaText,duration:e.duration,companion:e.companion,isWrapper:e.isWrapper,link:e.link,linearAdvertiser:e.linearAdvertiser,wrapperAdvertiser:e.wrapperAdvertiser,skipOffset:e.skipOffset,title:e.title,mediaFiles:e.mediaFiles,errorUrls:[].concat(e.errorTrackingLinearUrls,e.errorUrls).filter(function(e){return e}),trackingUrls:e.trackingEvents,error:e.error}:null}},{key:"headersReceivedCallback",value:function(){this.serverTimeout&&(clearTimeout(this.serverTimeout),this.serverTimeout=null)}},{key:"getData",value:function(e,t,i){var s=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(r){var o=n.vastAdTagUri?"wrapper":"preroll";i&&i("request"),t&&t("".concat(o,"_sent")),s.request=A.ajax("GET",e,null,{headersReceivedCallback:s.headersReceivedCallback.bind(s),fetch:!0,credentials:!0,no_cache:!0}),s.request.then(function(e){return i&&i("response"),t&&t("".concat(o,"_response")),s.parser.parseData(e,s.options,n)}).then(function(e){t&&t("".concat(o,"_parsed")),r(e)}).catch(function(e){s.requestRejected=!0;var t=n.vastAdTagUri?t3.wrapper_connection:null==e?void 0:e.errorVast;r([{error:t9(t9({},e),{},{errorVast:t||t3.unknown})}])}),s.setServerTimeout()})}},{key:"getWrappersData",value:function(e,t,i){var s=this;return new Promise(function(n,r){if(s.wrapperDepth++,!s.hasWrappers(e)||s.wrapperDepth>s.options.wrappersDepthLimit){n(e);return}Promise.all(e.map(function(e){return null!=e&&e.vastAdTagUri?s.getData(e.vastAdTagUri,t,i,e):[e]})).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).then(function(e){return s.getWrappersData(e,t,i)}).then(n).catch(r)})}},{key:"setServerTimeout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.abortServerTimeout=t),this.abortServerTimeout&&this.request&&(this.serverTimeout=setTimeout(function(){e.requestRejected||(e.trackingFunction&&e.trackingFunction("preroll_timeout"),e.request.abort())},1e3*this.abortServerTimeout))}},{key:"hasWrappers",value:function(e){return Array.isArray(e)&&e.some(function(e){return e.vastAdTagUri})}},{key:"abort",value:function(){return!!this.request&&(this.request.abort(),!0)}}]);function t8(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?t8(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t8(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var it=o(function e(){n(this,e)},[{key:"parseLinearAd",value:function(e,t){if(this.options=t,this.xmlDoc=new DOMParser().parseFromString(e,"text/xml"),this.linear=null===(i=this.xmlDoc)||void 0===i?void 0:i.querySelector("Creatives Creative Linear"),this.parsedData={trackingEvents:{},mediaFiles:[]},!this.linear)throw Error("no linear ad data");this.parsedData.linearAdvertiser=null===(s=this.xmlDoc.querySelector("Advertiser"))||void 0===s?void 0:s.textContent;var i,s,n=[].slice.call(this.linear.querySelectorAll("Tracking")),r=[].slice.call(this.xmlDoc.querySelectorAll("Impression"));return this.getOffsetAndDuration().getCtaAndTitle().getMediaFiles().getClickEvents(this.linear).getTrackingEvents(n).getImpressions(r).getCompanion(),this.parsedData}},{key:"parseWrapper",value:function(e){if(this.xmlDoc=new DOMParser().parseFromString(e,"text/xml"),this.wrapper=null===(t=this.xmlDoc)||void 0===t?void 0:t.querySelector("Wrapper"),!this.wrapper)throw Error("no wrapper ad data");this.parsedData={trackingEvents:{},isWrapper:!0},this.parsedData.vastAdTagUri=this.wrapper.querySelector("VASTAdTagURI").textContent.trim(),this.parsedData.wrapperAdvertiser=(null===(i=this.wrapper.querySelector("Advertiser"))||void 0===i?void 0:i.textContent.trim())||"";var t,i,s=[].slice.call(this.wrapper.querySelectorAll("Tracking")),n=[].slice.call(this.wrapper.querySelectorAll("Impression"));return this.getClickEvents(this.wrapper).getTrackingEvents(s).getImpressions(n),this.parsedData}},{key:"getTrackingEvents",value:function(e){var t=this;return e.forEach(function(e){var i=e.getAttribute("event");t.parsedData.trackingEvents[i]||(t.parsedData.trackingEvents[i]=[]),t.parsedData.trackingEvents[i].push(e.textContent.trim())}),this}},{key:"getImpressions",value:function(e){var t=this;return e.forEach(function(e){t.parsedData.trackingEvents.start||(t.parsedData.trackingEvents.start=[]),t.parsedData.trackingEvents.start.push(e.textContent.trim())}),this}},{key:"getOffsetAndDuration",value:function(){var e,t=d.stringToSeconds((null===(e=this.linear.querySelector("Duration"))||void 0===e?void 0:e.textContent)||"0"),i="number"!=typeof this.options.skipOffset||Number.isNaN(this.options.skipOffset)?d.stringToSeconds(this.linear.getAttribute("skipoffset")||"0"):this.options.skipOffset;return this.parsedData.duration=Math.min(t,this.options.maxDuration),this.parsedData.skipOffset=Math.min(i,this.options.maxSkipOffset),this}},{key:"getCtaAndTitle",value:function(){var e;return this.parsedData.title=(null===(e=this.xmlDoc.querySelector("AdTitle"))||void 0===e?void 0:e.textContent)||"Visit site",this.parsedData.ctaText=this.parsedData.title,this}},{key:"getCompanion",value:function(){var e,t=this.xmlDoc.querySelector("Creatives Creative CompanionAds Companion");if(!t)return this;var i=t.querySelector("StaticResource"),s=t.querySelector("CompanionClickThrough");this.parsedData.companion={icon:null==i?void 0:i.textContent,link:null==s?void 0:s.textContent.trim()};var n=t.querySelector("AdParameters");if(null!==(e=n)&&void 0!==e&&e.textContent){var r=n.textContent.trim(),o=(n=new DOMParser().parseFromString(r,"text/xml")).querySelector("CompanionBannerData Headline"),a=n.querySelector("CompanionBannerData CTABrandname"),l=n.querySelector("CompanionBannerData CTAButtonname"),c=n.querySelector("CompanionBannerData AdPoster");this.parsedData.companion.headline=null==o?void 0:o.textContent,this.parsedData.companion.ctabrandname=null==a?void 0:a.textContent,this.parsedData.companion.ctabuttonname=null==l?void 0:l.textContent,this.parsedData.companion.adposter=null==c?void 0:c.textContent.trim(),this.parsedData.companion.adlinktext=this.parsedData.companion.ctabrandname}return this}},{key:"getClickEvents",value:function(e){var t=e.querySelector("ClickThrough"),i=e.querySelector("ClickTracking");return t&&(this.parsedData.link=t.textContent.trim()),i&&(this.parsedData.trackingEvents.clickTracking=[i.textContent.trim()]),this}},{key:"getMediaFiles",value:function(){var e=this;return[].slice.call(this.linear.querySelectorAll("MediaFile")).forEach(function(t){e.parsedData.mediaFiles.push({height:t.getAttribute("height"),width:t.getAttribute("width"),type:t.getAttribute("type"),id:t.getAttribute("id"),url:t.textContent.trim()})}),this}},{key:"concatTrackingEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};return["clickTracking","complete","firstQuartile","midpoint","thirdQuartile","start"].forEach(function(s){i[s]=[].concat(e[s]||"",t[s]||"").filter(function(e){return e}).map(function(e){return e.replace(/^\s*\n/gm,"").trim()})}),i}},{key:"concatErrorUrls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat([e||""],t).filter(function(e){return e})}},{key:"parseData",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(n,r){var o,a=[],l=e.match(/<Ad[\s\S]*?<\/Ad>/g);if(!l){r({errorVast:t3.xml_parsing,errorText:"No Ad tag",errorImpressions:(null===(o=s.trackingEvents)||void 0===o?void 0:o.start)||[],errorUrls:s.errorUrls||[]});return}l.forEach(function(e,n){a[n]={};var r,o,l=null===(r=e.match(/<Error><!\[CDATA\[(.*\[ERRORCODE\].*)\]\]><\/Error>/))||void 0===r||null===(r=r[1])||void 0===r?void 0:r.trim();try{if(e.match(/<Wrapper>/)){var c=t.parseWrapper(e),h=s.trackingEvents,u=s.errorUrls,d=t.concatTrackingEvents(c.trackingEvents,h);a[n]=ie(ie(ie({},c),a[n]),{},{trackingEvents:d}),a[n].errorUrls=t.concatErrorUrls(l,u),a[n].error=!1}else{var m=s.errorUrls,p=s.trackingEvents;a[n].errorTrackingLinearUrls=t.concatErrorUrls(l);var E=t.parseLinearAd(e,i),v=t.concatTrackingEvents(E.trackingEvents,p);a[n]=ie(ie(ie({},E),a[n]),{},{trackingEvents:v,errorUrls:m,isWrapper:!!s.isWrapper,wrapperAdvertiser:(null==s?void 0:s.wrapperAdvertiser)||null,error:!1})}}catch(e){a[n].error={errorVast:t3.xml_parsing,errorImpressions:(null===(o=a[n].trackingEvents)||void 0===o?void 0:o.start)||[],errorUrls:a[n].errorUrls||[],errorText:e}}}),n(a)})}}]),ii=function(e){return e.reduce(function(e,t){return e.concat(t)},[])};function is(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function ir(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?is(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):is(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var io=o(function e(t){var i=t.vastUrls,s=t.options,r=void 0===s?{}:s;n(this,e),this.ad=null,this.parser=new it,this.options=r,this.savedData=[],this.vastUrls=i,this.loader=new t7({parser:this.parser,options:this.options}),this.adsWithError={},this.trackingEvents=null,this.options=r},[{key:"loadNextAd",value:function(e,t){var i=this;return new Promise(function(s,n){i.loader.loadData(e,t).then(function(e){i.getNextAd(e).then(s)}).catch(function(e){n({error:e})})})}},{key:"getAdData",value:function(e,t,i){var s=this;return(this.vastUrls&&this.parser.parsedData&&this.savedData.push({url:this.currentVastUrl,trackingEvents:this.trackingEvents,isWrapper:this.parser.parsedData.isWrapper}),Array.isArray(this.vastUrls))?(this.currentVastUrl=this.vastUrls.shift(),i(this.currentVastUrl),this.loader.setNewAdUrl(this.currentVastUrl),new Promise(function(n,r){s.loadNextAd(e,t).then(function(){!s.ad&&s.vastUrls.length?s.getAdData(e,t,i).then(n):n(s.ad)}).catch(function(e){r({error:e})})})):Promise.reject(Error("No valid vast urls array passed"))}},{key:"getNextAd",value:function(e){var t=this;return new Promise(function(i){var s;if(!(null!=e&&e.length)){t.ad=null,t.filterUniqueTrackingUrls(),i(t.ad);return}if(t.ad=e.shift(),t.ad.error){t.addError(),i(t.getNextAd(e));return}"function"==typeof(null===(s=t.options)||void 0===s?void 0:s.processAdsData)&&(t.ad=t.options.processAdsData(t.ad)),t.filterUniqueTrackingUrls(),i(t.ad)})}},{key:"addError",value:function(){this.adsWithError[this.currentVastUrl]||(this.adsWithError[this.currentVastUrl]=[]),this.adsWithError[this.currentVastUrl].push(this.ad.error)}},{key:"filterUniqueTrackingUrls",value:function(){var e,t,i,s=this,n=(null===(t=this.ad)||void 0===t||null===(t=t.trackingUrls)||void 0===t?void 0:t.start)||[],r=this.adsWithError?Object.keys(this.adsWithError):[],o={};r.forEach(function(e){o[e]=ii(s.adsWithError[e].map(function(e){return e.errorImpressions}))});var a=Object.values(o)||[];if(n.length>0||a.length>0){this.trackingEvents=ir(ir({},(null===(e=this.ad)||void 0===e?void 0:e.trackingUrls)||{}),{},{start:en(new Set([].concat(en(n),en(ii(a)))))});return}if(!(null!==(i=this.ad)&&void 0!==i&&i.trackingUrls)){this.trackingEvents=null;return}this.trackingEvents=ir({},this.ad.trackingUrls)}}]);let ia="application/vnd.apple.mpegurl";var il=class{setSource(e){return new Promise((t,i)=>{if(!e||!e.length){i({source:"controller",message:"setSource",details:"no media files"});return}let s=this.chooseSource(e);e.splice(e.indexOf(s),1),this.checkSource(s.url).then(()=>s.type===ia?this.setHlsSource(s.url):this.setMp4Source(s.url)).then(t).catch(()=>this.setSource(e).then(t,i))})}chooseSource(e){return e.find(e=>e.type===ia)||e[0]}setLoadingStop(){this.options.preloadLive||(this.preventLoadingStop=!0)}stopStreamPreload(){this.hls&&this.hls.on(window.Hls.Events.LEVEL_LOADED,()=>{var e;if(this.preventLoadingStop)return;let t=null===(e=this.hls.levels)||void 0===e?void 0:e.some(e=>{var t;return null==e?void 0:null===(t=e.details)||void 0===t?void 0:t.live});this.options.preloadLive||!t||this.loadLiveEventAttached||(this.hls.stopLoad(),y.once(f.Z.PLAYER_PLAY,()=>{this.hls.startLoad()}),this.loadLiveEventAttached=!0)})}getVideoType(){return this.videoType}setMp4Source(e){y.emit(f.Z.PLAYER_SET_VIDEO_SOURCE,e),this.videoType="mp4"}setHLSNativeSource(e){y.emit(f.Z.PLAYER_SET_VIDEO_SOURCE,e),this.videoType="hls-native"}setHlsSource(e){return new Promise((t,i)=>{if(!this.core.capabilities.hlsJs){if(this.core.capabilities.hls){this.setHLSNativeSource(e),t();return}i();return}if(this.videoType="hls-general",!window.Hls){var s,n;if(this.hlsJsRequested){i();return}this.hlsJsRequested=!0;let r=null===(n=this.core.options)||void 0===n?void 0:null===(s=n.hlsConfig)||void 0===s?void 0:s.libSrc;if(!r){i();return}h.getScript(r).then(()=>this.setHlsSource(e)).then(t).catch(i);return}this.videoType="hls-general-after-hls-load",this.hls=new window.Hls((0,m._)({},this.core.options.hlsConfig,this.hlsConfig)),this.hls.loadSource(e),this.videoType="hls-general-after-load-source",this.hls.attachMedia(this.core.videoElement),this.videoType="hls-general-after-attach",this.hls.on(window.Hls.Events.LEVEL_LOADED,()=>{var e,i,s,n;(null===(n=this.hls)||void 0===n?void 0:null===(s=n.levels)||void 0===s?void 0:null===(i=s[0])||void 0===i?void 0:null===(e=i.details)||void 0===e?void 0:e.live)?this.videoType="hls-live":this.videoType="hls-vod",P.set("sourceLoaded",!0),this.isResolved=!0,t()}),this.hls.on(window.Hls.Events.ERROR,(e,t)=>{t.fatal&&(this.isResolved||this.setSourceErrors.push({type:"error",source:"hls",data:t,videoType:this.videoType}),y.emit(f.Z.PLAYER_ON_ERROR,{type:"error",source:"hls",data:t}),i())})})}getSetSourceErrors(){if(!this.setSourceErrors.length)return[];let e=[].concat(this.setSourceErrors);return this.setSourceErrors=[],e}checkSource(){return Promise.resolve()}clearSource(e,t,i,s){this.hls&&(this.hls.destroy(),this.hls=null),P.set("sourceLoaded",!1),i&&s?(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_SEEKED),this.core.videoElement.style.opacity="0",y.once(f.Z.PLAYER_PLAY,()=>{y.emit(f.Z.PLAYER_SET_SOURCE,null,!0,e,t),this.core.videoElement.style.opacity="1"})):y.emit(f.Z.PLAYER_SET_SOURCE,null,i,e,t)}constructor(e,t){this.core=e,this.options=t,this.hlsConfig=null==t?void 0:t.hlsConfig,this.isResolved=!1,this.hls=null,this.hlsJsRequested=!1,this.videoType="undefined",this.setSourceErrors=[],this.preventLoadingStop=!1,this.loadLiveEventAttached=!1}},ic=o(function e(t){n(this,e),this.GAEnabled=t.GAEnabled,this.GACollect=t.GACollect,this.debug=t.debug},[{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.GAEnabled&&this.debug){console.warn("Ads GA tracking:",e,t);return}if(this.GAEnabled&&window.dataLayer){var i=tJ[e];i&&window.dataLayer.push({event:"oldEvent",eventCategory:"Preroll",eventAction:i,eventLabel:t})}}}]),ih=["errorUrls","errorImpressions"];function iu(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function id(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iu(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var im=o(function e(t){n(this,e),this.core=t.core,this.debug=this.core.options.debug,this.enabled=t.collectorEnabled,this.startedTime=null,this.tracked={},this.data=t.extraData||{}},[{key:"setVideoType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(this.data.video_type=e)}},{key:"setTrackingUrl",value:function(e){this.data.url=e}},{key:"getTrackingUrl",value:function(){return this.data.url}},{key:"setIsWrapper",value:function(e){this.data.is_wrapper=!!e}},{key:"getIsWrapper",value:function(){return this.data.is_wrapper}},{key:"startTracking",value:function(){this.startedTime||(this.startedTime=new Date().getTime())}},{key:"trackClick",value:function(){this.tracked.preroll_click||(this.tracked.preroll_click=!0,this.track(t1.preroll_click))}},{key:"trackShown5s",value:function(){this.tracked.preroll_shown_5s||(this.tracked.preroll_shown_5s=!0,this.track(t1.preroll_shown_5s))}},{key:"getOrientation",value:function(){return void 0===window.orientation?null:180===window.orientation||0===window.orientation?"portrait":"landscape"}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.enabled){var i=id(id({},t),this.data),s=new Date().getTime()-this.startedTime;if(i.time=(null==t?void 0:t.time)||s,i.log="preroll",i.event=e,this.core.capabilities.mobile&&(i["str.orientation"]=this.getOrientation(),i["str.fullscreen"]=P.get("fullscreen"),i["str.deviceResolution"]="".concat(window.innerWidth,"_x_").concat(window.innerHeight)),this.debug){console.warn(e,i);return}A.ajax("GET",eo.getCollectorUrl(),i)}}},{key:"trackError",value:function(e){var t,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=null!=e&&e.error?e.error:e;if(r){if(r instanceof Error){var o={error:t=r.toString(),errorText:i=r.stack};n&&(o["str.message"]=n),this.track(s||t1.preroll_error,o);return}r.errorUrls,r.errorImpressions;var a=function(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(r,ih);if(Object.keys(a).length&&(null==a?void 0:a.statusText)!=="abort"){if((null==a?void 0:a.status)===204){this.track(t1.preroll_empty);return}var l=null==a?void 0:a.status,c=null==e?void 0:e.errorVast;i=a.errorText;try{t=JSON.stringify(a)}catch(e){}var h={error:t,errorText:i,errorStatus:l,errorVast:c};n&&(h["str.message"]=n),this.track(s||t1.preroll_error,h)}}}},{key:"trackShownError",value:function(e,t){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(this.setVideoType(t),null==e?void 0:e.source){case"controller":i=e;break;case"hls":i=this.processHLSErrorMessage(null==e?void 0:e.data);break;default:i=this.processVideoElementErrorMessage(e)}this.track("".concat(t1.preroll_shown_error_prefix).concat(s),{error:i.message,errorText:i.details,"str.errorSetSource":n})}},{key:"processHLSErrorMessage",value:function(e){var t,i=null==e?void 0:e.details,s=null==e?void 0:e.type;if(s)t="HLS-TYPE ".concat(s);else if(e)try{t="HLS-DATA ".concat(JSON.stringify(e))}catch(i){t="HLS-DATA-ERROR ".concat(e)}else t="HLS_UNKNOWN_ERROR";if("mediaError"===s&&("manifestIncompatibleCodecsError"===i&&(s="sourceError"),"bufferNudgeOnStall"===i||"bufferStalledError"===i))return{message:"MEDIA_ERR_MEDIA",details:i};switch(s){case"networkError":t="MEDIA_ERR_NETWORK";break;case"mediaError":t="MEDIA_ERR_DECODE";break;case"sourceError":t="MEDIA_ERR_SRC_NOT_SUPPORTED"}return{message:t,details:i}}},{key:"processVideoElementErrorMessage",value:function(e){var t,i;return{message:({1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"})[null==e||null===(t=e.target)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.code]||"UNKNOWN_ERROR",details:null==e||null===(i=e.target)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.message}}}]),ip=o(function e(t){n(this,e),this.core=t.core,this.debug=this.core.options.debug,this.errorUrls=[],this.notSendedErrors=[],this.playerOnErrorEventId=null,this.init()},[{key:"init",value:function(){this.core.emit(f.Z.PLAYER_ERROR_CONTROLLER_BLOCK),this.playerOnErrorEventId=this.core.on(f.Z.PLAYER_ON_ERROR,this.onPlayerError,this)}},{key:"setErrorUrls",value:function(e){this.errorUrls=e}},{key:"trackErrorsOnPlay",value:function(){var e=this;this.notSendedErrors.forEach(function(t){e.track(t)}),this.notSendedErrors=[]}},{key:"onPlayerError",value:function(e){var t,i=O[null==e||null===(t=e.target)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.code],n=t3.linear_general,r=t3.video_play_error,o=t3.video_not_found,a=t3.video_file_timeout,l=t3.unknown,c=s(s(s(s({},R.ABORTED,n),R.NETWORK,r),R.DECODER,o),R.SOURCE,a)[i]||l;c===l&&(null==e?void 0:e.type)==="error"&&(c=n),this.track(c)}},{key:"track",value:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t3.unknown;if(!(null!==(e=this.errorUrls)&&void 0!==e&&e.length)){this.notSendedErrors.push(i);return}-1!==Object.values(t3).indexOf(i)||(i=t3.unknown),this.errorUrls.forEach(function(e){var s=e.replace("[ERRORCODE]","".concat(i));if(t.debug){var n=Object.keys(t3);console.error("Ads VAST Error tracking:",i,n.find(function(e){return t3[e]===i}),s);return}A.ajax("GET",s)})}},{key:"detachEvents",value:function(){this.core.off(f.Z.PLAYER_ON_ERROR,this.playerOnErrorEventId),this.core.emit(f.Z.PLAYER_ERROR_CONTROLLER_UNBLOCK)}}]),iE=o(function e(t){n(this,e),this.core=t.core,this.debug=this.core.options.debug,this.trackingData={},this.eventsIds={},this.played=!1,this.muted=this.core.videoElement.volume<.4,this.trackedTiming=t2,this.init()},[{key:"init",value:function(){this.eventsIds[f.Z.PLAYER_ON_PLAY]=this.core.on(f.Z.PLAYER_ON_PLAY,this.playerOnPlay,this),this.eventsIds[f.Z.PLAYER_ON_PAUSE]=this.core.on(f.Z.PLAYER_ON_PAUSE,this.playerOnPause,this),this.eventsIds[f.Z.PLAYER_SET_VOLUME]=this.core.on(f.Z.PLAYER_SET_VOLUME,this.playerOnSetVolume,this)}},{key:"setTrackingData",value:function(e){this.trackingData=e}},{key:"playerOnPlay",value:function(){if(!this.played){this.played=!0;return}this.track(t0.resume)}},{key:"playerOnPause",value:function(){this.core.videoElement.ended||this.track(t0.pause)}},{key:"playerOnSetVolume",value:function(){this.core.videoElement.volume<.4?this.muted||(this.track(t0.mute),this.muted=!0):this.muted&&(this.track(t0.unmute),this.muted=!1)}},{key:"detachEvents",value:function(){for(var e in this.eventsIds)this.core.off(e,this.eventsIds[e])}},{key:"sendEvent",value:function(e){if(this.debug){console.warn("Ads VAST tracking: ".concat(e));return}e&&(new Image().src=e)}},{key:"track",value:function(e){var t,i=this;if(null!==(t=this.trackingData)&&void 0!==t&&t[e]){if(Array.isArray(this.trackingData[e])){this.trackingData[e].map(function(e){return i.sendEvent(e)});return}this.sendEvent(this.trackingData[e])}}},{key:"trackTiming",value:function(e,t){if(!this.trackedTiming.start&&e>0){this.trackedTiming.start=!0,this.track(t0.start);return}var i=e/t;if(i>.25&&!this.trackedTiming.firstQuartile){this.track(t0.firstQuartile),this.trackedTiming.firstQuartile=!0;return}if(i>.5&&!this.trackedTiming.midpoint){this.track(t0.midpoint),this.trackedTiming.midpoint=!0;return}i>.75&&!this.trackedTiming.thirdQuartile&&(this.track(t0.thirdQuartile),this.trackedTiming.thirdQuartile=!0)}}]),iv=o(function e(t){n(this,e),this.core=t.core,this.options=t,this.initTrackers()},[{key:"initTrackers",value:function(){var e=this.options,t=e.GAEnabled,i=e.GACollect,s=e.collectorEnabled,n=e.extraData;this.GATracker=new ic({debug:this.core.options.debug,GAEnabled:t,GACollect:i}),this.collectorTracker=new im({core:this.core,collectorEnabled:s,extraData:n}),this.vastErrorsTracker=new ip({core:this.core}),this.vastEventsTracker=new iE({core:this.core})}},{key:"sendErrorsSourceNotSet",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";null==e||e.forEach(function(e){t.collectorTracker.trackShownError(e,e.videoType,i,!0)})}},{key:"startTracking",value:function(){this.collectorTracker.startTracking()}},{key:"setVideoType",value:function(e){this.collectorTracker.setVideoType(e)}},{key:"isWrongParent",value:function(e){return!h.hasParentByTag(e.currentTarget,"a",2)}},{key:"trackShownError",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.collectorTracker.trackShownError(e,t,i)}},{key:"setErrorUrls",value:function(e){this.vastErrorsTracker.setErrorUrls(e)}},{key:"setIsWrapper",value:function(e){this.collectorTracker.setIsWrapper(e)}},{key:"setTrackingUrl",value:function(e){this.collectorTracker.setTrackingUrl(e)}},{key:"setTrackingData",value:function(e){this.vastEventsTracker.setTrackingData(e)}},{key:"detachPlayerEvents",value:function(){this.vastEventsTracker.detachEvents()}},{key:"unblockPlayerErrorController",value:function(){this.vastErrorsTracker.detachEvents()}},{key:"trackOnDataLoaded",value:function(e,t){var i=this;if(e){var s=Object.keys(e),n=this.collectorTracker.getTrackingUrl();null!=s&&s.length&&(this.collectorTracker.setVideoType(t),s.forEach(function(t){var s=e[t];(null==s?void 0:s.length)>0&&(i.setTrackingUrl(t),s.forEach(function(e){i.collectorTracker.trackError(e)}))}),this.setTrackingUrl(n),this.unblockPlayerErrorController())}}},{key:"trackTiming",value:function(e,t){this.vastEventsTracker.trackTiming(e,t)}},{key:"trackShown5s",value:function(){this.collectorTracker.trackShown5s()}},{key:"trackClick",value:function(){this.collectorTracker.trackClick()}},{key:"trackDataOnPlay",value:function(e){var t,i=this,s=e.adsWithError,n=e.trackingEvents,r=e.ad,o=e.savedData;this.collectorTracker.setIsWrapper(null==r?void 0:r.isWrapper);var a=null;s&&(a=ii(Object.values(s))),(null===(t=a)||void 0===t?void 0:t.length)>0&&a.forEach(function(e){i.vastErrorsTracker.setErrorUrls(e.errorUrls),i.vastErrorsTracker.track(e.errorVast)}),n&&(this.setTrackingData(n),this.vastEventsTracker.trackTiming(1),this.collectorTracker.track(t1.preroll_impression)),null!=r&&r.errorUrls&&(this.vastErrorsTracker.setErrorUrls(r.errorUrls),this.vastErrorsTracker.trackErrorsOnPlay()),this.trackSavedAdsData(o)}},{key:"trackSavedAdsData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.collectorTracker.getTrackingUrl(),s=this.collectorTracker.getIsWrapper();t.forEach(function(t){e.collectorTracker.setIsWrapper(t.isWrapper),e.collectorTracker.setTrackingUrl(t.url),e.collectorTracker.track(t1.preroll_impression)}),this.collectorTracker.setIsWrapper(s),this.collectorTracker.setTrackingUrl(i)}},{key:"trackCompletedClick",value:function(e){this.isWrongParent(e)||(this.vastEventsTracker.track(t0.clickTracking),this.GATracker.track(tJ.click,tX.completed),this.collectorTracker.track(t1.preroll_link_completed),this.collectorTracker.trackClick())}},{key:"trackVideoLinkClick",value:function(){this.vastEventsTracker.track(t0.clickTracking),this.GATracker.track(tJ.click,tX.video),this.collectorTracker.track(t1.preroll_link_video),this.collectorTracker.trackClick()}},{key:"trackLabelClick",value:function(e){this.vastEventsTracker.track(t0.clickTracking),this.GATracker.track(tJ.click,e?tX.linkAfterEnd:tX.link);var t=t1.preroll_link_label,i=t1.preroll_link_label_ended;this.collectorTracker.track(e?i:t),this.collectorTracker.trackClick()}},{key:"trackCallToActionClick",value:function(){this.vastEventsTracker.track(t0.clickTracking),this.GATracker.track(tJ.click,tX.cta),this.collectorTracker.track(t1.preroll_link_cta),this.collectorTracker.trackClick()}},{key:"trackCompanionClick",value:function(e,t){if(!this.isWrongParent(e)){if(this.vastEventsTracker.track(t0.clickTracking),this.GATracker.track(tJ.click,t?tX.companionAfterEnd:tX.companion),h.hasClass(e.currentTarget,"xplayer-ads-block-companion--empty")){var i=t1.preroll_link_companion_empty,s=t1.preroll_link_companion_empty_ended;this.collectorTracker.track(t?s:i)}else{var n=t1.preroll_link_companion,r=t1.preroll_link_companion_ended;this.collectorTracker.track(t?r:n)}this.collectorTracker.trackClick()}}},{key:"trackPrerollTimeout",value:function(){this.collectorTracker.track(t1.preroll_timeout_shown),this.vastErrorsTracker.track(t3.video_file_timeout)}},{key:"trackPrerollOk",value:function(){this.collectorTracker.track(t1.preroll_ok),this.GATracker.track(tJ.parsed)}},{key:"trackSkip",value:function(){this.vastEventsTracker.track(t0.skip),this.GATracker.track(tJ.skip),this.collectorTracker.track(t1.preroll_skip)}},{key:"trackPlay",value:function(){this.collectorTracker.track(t1.preroll_play)}},{key:"trackPrerollShown",value:function(){this.GATracker.track(tJ.shown),this.collectorTracker.track(t1.preroll_shown)}},{key:"trackPrerollEnded",value:function(){this.collectorTracker.track(t1.preroll_ended),this.GATracker.track(tJ.viewToEnd)}},{key:"trackViewToSkip",value:function(){this.vastEventsTracker.track(t0.progress),this.GATracker.track(tJ.viewToSkip)}}]),i_=t5.HIDDEN_CLASS,ig=t5.ADS_ROOT_ELEMENT_CLASS,iy=t5.ADS_ROOT_ELEMENT_MOBILE_CLASS,ib=t5.ROOT_ELEMENT_PAUSED_CLASS,iS=t5.ADS_COMPLETED_ROOT_ELEMENT_CLASS,iT=t5.ADS_PRELOAD_CLASS,iA=t5.ADS_ELEMENT_CLASS,ik=t5.ADS_BLOCK_CLASS,iL=t5.ADS_ALLOWED_SKIP_SELECTOR,iC=t5.ADS_SKIP_WITH_TIMING_SELECTOR,iP=t5.ROOT_ELEMENT_ROTATE_SELECTOR,iR=t5.ROOT_ELEMENT_ANIMATE_CLASS,iO=o(function e(t){n(this,e),this.core=t.core,this.options=t.adsOptions,this.ad=t.ad,this.template=t.template,this.element=this.core.element,this.trackingController=t.trackingController,this.countedWhileBuffering=0,this.tresholdTimeout=null,this.pauseCounting=!1,this.whileBufferingTimer=null,this.countWhileBufferingBinded=this.countWhileBuffering.bind(this),this.countWhileBufferingCallbackBinded=this.countWhileBufferingTimerCallback.bind(this),this.ended=!1,this.isExp7028=this.ad.isXhlPreroll&&-1!==["b","c"].indexOf(this.options.bigCompanionGroup),this.init()},[{key:"init",value:function(){this.render(),this.domCache=this.getDomCache()||{},this.attachEvents()}},{key:"render",value:function(){if(this.element=document.createElement("div"),this.element.className=iA,this.options.blockCssClass&&(this.element.className+=" ".concat(this.options.blockCssClass)),this.element.innerHTML=this.template(this.ad,this.options),this.isExp7028){this.closeElement=this.element.querySelector(".xplayer-ads-block-companion-close"),this.companionElement=this.element.querySelector(".xplayer-ads-block-companion");var e,t="c"===this.options.bigCompanionGroup;this.companionBigElement=this.element.querySelector(t?".xplayer-ads-block-companion--with-cams":".xplayer-ads-block-companion--big"),this.companionCamsElement=this.element.querySelector("#preroll_companion_spot"),null===(e=this.closeElement)||void 0===e||e.addEventListener("click",this.toggleCompanionSize.bind(this))}}},{key:"getDomCache",value:function(){var e=this;return Object.keys(t6).reduce(function(t,i){return t[i]=e.element.querySelector(t6[i]),t},{})}},{key:"toggleCompanionSize",value:function(){var e="xplayer-ads-block-companion-close--arrow-bottom";this.companionElement&&this.companionBigElement&&(this.companionElement.classList.contains(i_)?(this.companionElement.classList.remove(i_),this.companionBigElement.classList.add(i_),this.closeElement.classList.add(e)):(this.companionElement.classList.add(i_),this.companionBigElement.classList.remove(i_),this.closeElement.classList.remove(e)))}},{key:"skipCallback",value:function(){y.emit(f.Z.ADS_SKIP)}},{key:"trackLabelClick",value:function(){this.trackingController.trackLabelClick(this.ended)}},{key:"trackCompanionClick",value:function(e){this.trackingController.trackCompanionClick(e,this.ended)}},{key:"startCounting",value:function(){this.pauseCounting=!1}},{key:"attachEvents",value:function(){var e,t,i=this;y.on(f.Z.PLAYER_PAUSE,function(){i.pauseCounting=!0}),y.on(f.Z.PLAYER_PLAY,function(){i.pauseCounting=!1}),this.onLinkClickBind=this.onLinkClick.bind(this),this.clickWithParentCheckBind=this.clickWithParentCheck.bind(this);var s=this.domCache,n=s.skip,r=s.link,o=s.label,a=s.companion,l=s.completed,c=s.callToAction,h=s.video,u=s.pauseButton,d="click";null==n||n.addEventListener(d,this.skipCallback),null==o||o.addEventListener(d,this.trackLabelClick.bind(this)),null==a||a.addEventListener(d,this.trackCompanionClick.bind(this));var m=this.trackingController.trackCompletedClick.bind(this.trackingController),p=this.trackingController.trackCallToActionClick.bind(this.trackingController);null==l||l.addEventListener(d,m),null==c||c.addEventListener(d,p),null==r||r.addEventListener(d,this.trackingController.trackVideoLinkClick.bind(this.trackingController)),null==h||h.addEventListener(d,this.togglePlayPause.bind(this)),null==u||u.addEventListener(d,this.togglePlayPause.bind(this)),null==c||c.addEventListener(d,this.onLinkClickBind),null==o||o.addEventListener(d,this.onLinkClickBind),null==r||r.addEventListener(d,this.onLinkClickBind),null==a||a.addEventListener(d,this.clickWithParentCheckBind),null==l||l.addEventListener(d,this.clickWithParentCheckBind),this.isExp7028&&(null===(e=this.companionBigElement)||void 0===e||e.addEventListener(d,this.trackCompanionClick.bind(this)),null===(t=this.companionBigElement)||void 0===t||t.addEventListener(d,this.clickWithParentCheckBind),y.on(f.Z.ADS_ENDED,function(){i.companionElement.classList.remove("xplayer-ads-block-companion--icon-fixed"),i.companionElement.classList.remove(i_)})),y.emit(f.Z.ADS_COMPANION_READY)}},{key:"showCallToAction",value:function(e){this.domCache.callToAction&&(!h.hasClass(this.domCache.callToAction,i_)||e<3||h.removeClass(this.domCache.callToAction,i_))}},{key:"appendElement",value:function(){h.addClass(this.core.element,ig),this.options.mobileStyles&&h.addClass(this.core.element,iy),this.core.element.appendChild(this.element)}},{key:"hideOnSkip",value:function(){h.removeClass(this.domCache.skip,ik),h.removeClass(this.domCache.skip.querySelector(iL),i_),h.addClass(this.domCache.skip.querySelector(iC),i_)}},{key:"onLinkClick",value:function(){if(this.options.linkClickSkip){var e=!!this.core.capabilities.mobile&&!!this.core.capabilities.idevice;y.emit(f.Z.ADS_RESUME_PLAY,null,!1,e)}else y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.ADS_ON_LINK_CLICK)}},{key:"clickWithParentCheck",value:function(e){h.hasParentByTag(e.currentTarget,"a",2)&&this.onLinkClick()}},{key:"hideAds",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.moveFooter(e),this.moveLabel(e),i||h.removeClass(this.core.element,ib),h.removeClass(this.core.element,ig),h.removeClass(this.core.element,iy),h.removeClass(this.core.element,iS),h.removeClass(this.core.element,iT),null===(t=this.element)||void 0===t||null===(t=t.parentNode)||void 0===t||t.removeChild(this.element),this.element=null}},{key:"moveLabel",value:function(e){if(e&&this.domCache.label){var t,i;if(null===(t=this.domCache.label)||void 0===t||t.removeEventListener("click",this.onLinkClickBind),null!==(i=this.options)&&void 0!==i&&i.labelContainerSelector){var s=document.querySelector(this.options.labelContainerSelector),n=(null==s?void 0:s.childNodes[this.options.labelContainerOrder])||null;null==s||s.insertBefore(this.domCache.label,n)}else this.core.element.appendChild(this.domCache.label),this.domCache.label.addEventListener("click",this.pauseOnClick)}}},{key:"pauseOnClick",value:function(){y.emit(f.Z.PLAYER_PAUSE)}},{key:"moveFooter",value:function(e){if(e&&this.domCache.footer&&this.options.footerContainerSelector){var t=document.querySelector(this.options.footerContainerSelector);if(t)return t.innerHTML="",t.appendChild(this.domCache.footer),y.emit(f.Z.ADS_UNBLOCK_BOTTOM_BANNER),!0}return!1}},{key:"setDurationTiming",value:function(e,t){this.options.noSkipOffset||(this.domCache.durationTiming||(this.domCache.durationTiming=document.querySelector(t6.durationTiming)),this.domCache.durationTiming.innerText=d.parseTime(e,t>=3600))}},{key:"complete",value:function(){h.addClass(this.core.element,iS);var e,t=null===(e=this.domCache.footerCompleted)||void 0===e?void 0:e.querySelector(iP);t&&h.addClass(t,iR)}},{key:"setEnded",value:function(e){this.ended=e}},{key:"togglePlayPause",value:function(){P.get("playing")?y.emit(f.Z.PLAYER_PAUSE):y.emit(f.Z.PLAYER_PLAY)}},{key:"calculateSkipTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.options.noSkipOffset||this.ad.skipOffset,i=this.options.skipAdjustment,s=i?t/i:1,n=P.get("duration"),r=e?n:P.get("currentTime"),o=Math.ceil(((t=t>n?n:t)-r-this.countedWhileBuffering)/s);o>0?this.domCache.skipTiming.innerText=o:(y.emit(f.Z.ADS_ALLOW_SKIP),this.resetTimeouts(),this.options.noSkipOffset?y.emit(f.Z.ADS_RESUME_PLAY):this.hideOnSkip(),this.trackingController.trackViewToSkip())}},{key:"countOnPause",value:function(e){if(this.options.tresholdTimer&&!e){if(this.resetTimeouts(),this.pauseCounting)return!0;this.tresholdTimeout=setTimeout(this.countWhileBufferingBinded,this.options.tresholdTimer)}return!1}},{key:"countWhileBuffering",value:function(){this.whileBufferingTimer=setTimeout(this.countWhileBufferingCallbackBinded,1e3)}},{key:"countWhileBufferingTimerCallback",value:function(){this.countedWhileBuffering+=1,this.countWhileBuffering(),this.calculateSkipTime()}},{key:"resetTimeouts",value:function(){clearTimeout(this.tresholdTimeout),clearTimeout(this.whileBufferingTimer)}}]);let iw=()=>({vastUrls:null,preflight:!1,trackCollector:100*Math.random()<=10,trackCollectorExtra:{},trackGA:!1,trackGACollect:["play","request","response","parsed","shown","viewToSkip","viewToEnd","skip","click"],abortServerTimeout:3,abortShownTimeout:15,maxDuration:100,maxSkipOffset:100,completedStateDuration:5,labelContainerSelector:null,footerContainerSelector:null,skipAdjustment:null,videoLinkDisable:!0,blockCssClass:null,wrappersDepthLimit:5,processAdsData:null,mobileStyles:!1,linkClickSkip:!1,preloadVideo:!1,preloadLive:!1,tresholdTimer:0,additionalButton:null,isNewPrerollDesign:!1,userLeftTime:null,userBackTime:null});var iN=class{init(){var e,t;!er(this.vastUrls)&&this.template&&"function"==typeof this.template&&(this.options.isNewPrerollDesign&&this.core.element.classList.add("xplayer-ads-new-design"),P.set("ads",!0),this.adsData=new io({vastUrls:this.vastUrls,options:this.options}),this.trackingController=new iv({core:this.core,collectorEnabled:this.options.trackCollector,GAEnabled:null===(e=this.options)||void 0===e?void 0:e.trackGA,GACollect:null===(t=this.options)||void 0===t?void 0:t.trackGACollect,extraData:(0,m._)({url:this.vastUrls},this.options.trackCollectorExtra||{})}),this.savePlaybackRateEventId=y.once(f.Z.PLAYER_ON_RATECHANGE,this.savePlaybackRate,this),y.once(f.Z.PLAYER_PLAY,()=>{this.trackingController.startTracking(),this.trackingController.trackPlay()},this),this.playerPlayEventId=y.once(f.Z.PLAYER_PLAY,this.playRequest,this),this.core.autoplay?y.emit(f.Z.PLAYER_PLAY):this.options.preflight&&(this.loadData(),this.preloadingData=!0,P.set("ads_preload",!0)))}loadData(){if(!this.core.sourceController.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.loadData,this);return}this.trackingController.startTracking();let e=this.trackingController.collectorTracker,t=this.trackingController.GATracker,i=e.track.bind(e),s=t.track.bind(t),n=e.setTrackingUrl.bind(e);this.adsData.getAdData(i,s,n).then(()=>this.dataLoaded())}dataLoaded(){var e;if(this.trackingController.trackOnDataLoaded(null===(e=this.adsData)||void 0===e?void 0:e.adsWithError,this.sourceController.getVideoType()),this.adsData.ad||(h.removeClass(this.core.element,t5.ADS_LOADING_CLASS),y.emit(f.Z.ADS_ENDED,null,this.options.preflight),y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),y.off(f.Z.PLAYER_PLAY,this.playerPlayEventId),(!this.preloadingData||this.playRequested)&&this.sourceController.clearSource(this.getAdsStartedTime(),this.forceLoadSource,!this.preloadingData||this.playRequested,!1)),this.playRequested?this.trackingController.trackDataOnPlay(this.adsData):y.once(f.Z.PLAYER_ON_PLAY,()=>{this.trackingController.trackDataOnPlay(this.adsData)}),!this.adsData.ad){this.isAdSrcLoaded&&(this.isAdSrcLoaded=!1,this.resumePlayWithPreload());return}if(this.options.preflight&&!this.playRequested&&this.options.preloadVideo){this.sourcePromise=this.sourceController.setSource(this.adsData.ad.mediaFiles),h.addClass(this.core.element,t5.ADS_PRELOAD_CLASS),this.sourcePromise.then(()=>{this.isAdSrcLoaded=!0;let e=null,t=null,i=null;this.trackingController.setVideoType(this.sourceController.getVideoType()),i=y.once(f.Z.PLAYER_ON_ERROR,i=>{var s,n;if(this.trackingController.trackShownError(i,this.sourceController.getVideoType(),"_preload"),null===(n=this.adsData)||void 0===n?void 0:null===(s=n.vastUrls)||void 0===s?void 0:s.length){this.loadData();return}this.resumePlayWithPreload(),y.off(f.Z.PLAYER_ON_CAN_PLAY,e),y.off(f.Z.PLAYER_ON_LOADED_DATA,t),clearTimeout(this.abortShownTimeout)}),e=y.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{this.options.preloadLive||this.sourceController.stopStreamPreload(),y.off(f.Z.PLAYER_ON_LOADED_DATA,t),y.off(f.Z.PLAYER_ON_ERROR,i),clearTimeout(this.abortShownTimeout)}),t=y.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{this.options.preloadLive||this.sourceController.stopStreamPreload(),y.off(f.Z.PLAYER_ON_CAN_PLAY,e),y.off(f.Z.PLAYER_ON_ERROR,i),clearTimeout(this.abortShownTimeout)})}).catch(e=>{var t,i;if(this.trackingController.trackShownError(e,this.sourceController.getVideoType(),"_preload"),null===(i=this.adsData)||void 0===i?void 0:null===(t=i.vastUrls)||void 0===t?void 0:t.length){this.loadData();return}this.resumePlayWithPreload()}).finally(()=>{this.trackingController.sendErrorsSourceNotSet(this.sourceController.getSetSourceErrors(),"_preload")});return}this.playRequested&&this.playRequest()}resumePlayWithPreload(){y.emit(f.Z.ADS_ENDED,null,this.options.preflight),y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),this.resumePlay({type:"error"},!this.preloadingData||this.playRequested),y.off(f.Z.PLAYER_PLAY,this.playerPlayEventId)}playRequest(){var e;if(h.addClass(this.core.element,t5.ADS_LOADING_CLASS),!this.adsData.ad){this.playRequested=!0,y.emit(f.Z.SHOW_LOADER),this.preloadingData||this.loadData(),this.adsData.loader.setServerTimeout(this.options.abortServerTimeout);return}this.preloadingData=!1,this.sourceController.setLoadingStop(),y.off(f.Z.PLAYER_PLAY,this.playerPlayEventId),this.trackingController.setIsWrapper(null===(e=this.adsData.ad)||void 0===e?void 0:e.isWrapper),this.playAds()}savePlaybackRate(){let e=this.core.videoElement;1!==e.playbackRate&&(this.oldPlaybackRate=e.playbackRate,e.playbackRate=1)}playAds(){var e;let t=null===(e=this.adsData)||void 0===e?void 0:e.ad;if(!t||this.blocked){y.emit(f.Z.ADS_ENDED,null,this.options.preflight),this.resumePlay(null,!this.preloadingData);return}this.trackingController.trackPrerollOk(),this.renderController=new iO({core:this.core,adsOptions:this.options,template:this.template,countdownThumbUrl:this.countdownThumbUrl,ad:this.getExtendedAd(),trackingController:this.trackingController}),this.allowSkip=!this.options.noSkipOffset&&!t.skipOffset,this.attachEvents(),this.prepareCoreMobile(),this.prepareCoreVr(),this.showAds()}setStreamAdjustment(){this.core.videoElement.currentTime=0}attachEvents(){y.on(f.Z.ADS_RESUME_PLAY,this.resumePlay.bind(this)),y.on(f.Z.ADS_SKIP,this.skipAds,this),y.on(f.Z.ADS_ALLOW_SKIP,()=>{this.allowSkip=!0}),y.once(f.Z.PLAYER_ON_SEEKING,this.setStreamAdjustment.bind(this)),y.once(f.Z.ADS_ON_LINK_CLICK,()=>{this.bindedCalcUserReturnTime=this.calcUserReturnsTime.bind(this),document.addEventListener("visibilitychange",this.bindedCalcUserReturnTime)})}calcUserReturnsTime(){if(document.hidden?this.userLeftTime=new Date().getTime():this.userBackTime=new Date().getTime(),!this.userLeftTime||!this.userBackTime)return;let e={time:this.userBackTime-this.userLeftTime};this.trackingController.collectorTracker.track(t1.preroll_link_returned_to_xh_ms,e),document.removeEventListener("visibilitychange",this.bindedCalcUserReturnTime)}isTrafficStars(){try{let e=new URL(this.adsData.currentVastUrl);return"tsyndicate.com"===e.host}catch(e){return!1}}getExtendedAd(){let e={isXhlPreroll:!this.isTrafficStars(),companionIconDefault:this.options.companionIconDefault,companionAdLinkText:this.options.companionAdLinkText};return(0,m._)({},this.adsData.ad,e)}prepareCoreMobile(){this.core.capabilities.mobile&&(this.core.options.mobileInline||(this.core.videoElement.setAttribute("webkit-playsinline",!0),this.core.videoElement.setAttribute("playsinline",!0)),this.core.options.mobileStubControls&&(this.core.stubControls=!1,this.core.videoElement.removeAttribute("controls")))}resumeCoreMobile(){this.core.capabilities.mobile&&(this.core.options.mobileInline||(this.core.videoElement.removeAttribute("webkit-playsinline"),this.core.videoElement.removeAttribute("playsinline")),this.core.options.mobileStubControls&&(this.core.stubControls=!0))}prepareCoreVr(){y.emit(f.Z.VR_ANIMATE_STOP),y.emit(f.Z.VR_REMOVE_CROSSORIGIN)}resumeCoreVr(){y.once(f.Z.PLAYER_ON_PLAYING,()=>y.emit(f.Z.VR_ANIMATE_START)),y.emit(f.Z.VR_ADD_CROSSORIGIN)}getAdsStartedTime(){let e=P.get("savedCurrentTime"),t=e||P.get("currentTime")||d.parseTimeOffset()||0;return e&&P.set("savedCurrentTime",!1),t}setAdDuration(){var e;let t=[Number(this.options.noSkipOffset),Number(null===(e=this.adsData.ad)||void 0===e?void 0:e.duration),Number(P.get("duration"))].filter(e=>!Number.isNaN(e));P.set("duration",Math.min(...t))}setNoControls(){this.prerollNoControlsExp&&"a"!==this.prerollNoControlsExp&&(this.prerollNoControlsClasses=["xplayer-ads-no-controls"],this.core.capabilities.mobile&&(this.prerollNoControlsClasses[0]=`${this.prerollNoControlsClasses[0]}-mobile`,"c"===this.prerollNoControlsExp&&this.prerollNoControlsClasses.push(`${this.prerollNoControlsClasses}--no-pause`)),this.core.element.classList.add(...this.prerollNoControlsClasses))}clearNoControlsState(){var e;(null===(e=this.prerollNoControlsClasses)||void 0===e?void 0:e.length)>0&&this.core.element.classList.remove(...this.prerollNoControlsClasses)}showAds(){var e;this.trackingController.setIsWrapper(null===(e=this.adsData.ad)||void 0===e?void 0:e.isWrapper),this.setAdDuration(),this.playerOnErrorEventId=y.once(f.Z.PLAYER_ON_ERROR,this.onPlayerError,this),this.playerOnEndedEventId=y.once(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this),this.playerOnPlayingEventId=y.once(f.Z.PLAYER_ON_PLAYING,()=>{this.renderController.appendElement()}),this.playerOnDurationChange=y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.setAdDuration.bind(this)),this.timeUpdateEventId=y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.onTimeUpdate,this),this.adsStartedPlayingTime=this.getAdsStartedTime(),this.playerPlayFailedEventId=y.on(f.Z.PLAYER_PLAY_FAILED,()=>{y.emit(f.Z.CONTROLS_RESET,this.adsStartedPlayingTime),this.resumePlay({type:"error"})}),this.core.videoElement.removeAttribute("poster"),this.setNoControls(),this.sourcePromise||(this.sourcePromise=this.sourceController.setSource(this.adsData.ad.mediaFiles)),this.sourcePromise.then(()=>{this.isAdSrcLoaded=!0,this.sourcePromise.isResolved=!0,y.emit(f.Z.ADS_STARTED),y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),this.core.videoElement.currentTime=.1,y.emit(f.Z.PLAYER_PLAY);let e=this.sourceController.getVideoType();this.trackingController.setVideoType(e),this.trackingController.sendErrorsSourceNotSet(this.sourceController.getSetSourceErrors()),this.abortShownTimeout=setTimeout(()=>{this.trackingController.trackPrerollTimeout(),this.resumePlay({type:"error"})},1e3*this.options.abortShownTimeout)}).catch(e=>{var t,i;if(null===(i=this.adsData)||void 0===i?void 0:null===(t=i.vastUrls)||void 0===t?void 0:t.length){this.loadData();return}y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),this.trackingController.trackShownError(e,this.sourceController.getVideoType()),this.resumePlay({type:"error"})}).finally(()=>{this.trackingController.sendErrorsSourceNotSet(this.sourceController.getSetSourceErrors())})}onTimeUpdate(){if(this.accumulateShownTime(),this.renderController.countOnPause(this.allowSkip))return;let e=this.options.noSkipOffset||this.adsData.ad.duration||P.get("duration"),t=P.get("currentTime"),i=Math.ceil(e-t);if(this.renderController.setDurationTiming(i,e),this.trackingController.trackTiming(t,e),!this.played&&t>0&&(this.played=!0,this.trackingController.trackPrerollShown(),clearTimeout(this.abortShownTimeout)),this.renderController.showCallToAction(t),i<1){y.emit(f.Z.PLAYER_PAUSE),this.onPlayerEnded();return}this.allowSkip||this.renderController.calculateSkipTime()}accumulateShownTime(){this.oldDate||(this.oldDate=Date.now());let e=Date.now()-this.oldDate;e>500?this.oldDate=null:(this.oldDate=Date.now(),this.accumulatedShownTimeMs+=e),this.accumulatedShownTimeMs>5e3&&this.trackingController.trackShown5s(t1.preroll_shown_5s)}onPlayerEnded(){var e;if(this.clearNoControlsState(),(null===(e=this.adsData.trackingEvents)||void 0===e?void 0:e.complete)&&this.trackingController.vastEventsTracker.track(t0.complete),this.renderController.domCache.footerCompleted){this.showCompleted(),this.allowSkip||this.renderController.calculateSkipTime(!0);return}this.onEnded()}onPlayerError(e){var t;(null===(t=this.sourcePromise)||void 0===t?void 0:t.isResolved)&&(clearTimeout(this.abortShownTimeout),this.trackingController.trackShownError(e,this.sourceController.getVideoType()),this.resumePlay(e))}showCompleted(){this.renderController.complete();let e=this.options.completedStateDuration-1,t=setInterval(()=>{this.renderController.setDurationTiming(e),(e-=1)<0&&(clearInterval(t),this.onEnded())},1e3)}onEnded(){this.ended||(P.set("ended",!1),this.trackingController.trackPrerollEnded(),this.resumePlay())}resumePlay(e=null,t=!0,i=!1){var s,n,r,o;this.clearNoControlsState();let a=e&&"error"===e.type;null===(s=this.trackingController)||void 0===s||s.detachPlayerEvents(),null===(n=this.trackingController)||void 0===n||n.unblockPlayerErrorController(),y.off(f.Z.PLAYER_ON_ENDED,this.playerOnEndedEventId),y.off(f.Z.PLAYER_ON_RATECHANGE,this.savePlaybackRateEventId),y.off(f.Z.PLAYER_ON_PLAYING,this.playerOnPlayingEventId),y.off(f.Z.PLAYER_ON_TIMEUPDATE,this.timeUpdateEventId),y.off(f.Z.PLAYER_ON_ERROR,this.playerOnErrorEventId),y.off(f.Z.PLAYER_PLAY_FAILED,this.playerPlayFailedEventId),y.off(f.Z.PLAYER_ON_DURATION_CHANGE,this.playerOnDurationChange),this.resumeCoreMobile(),y.emit(f.Z.CONTROLS_RESET,this.adsStartedPlayingTime),this.sourceController.clearSource(this.adsStartedPlayingTime,this.forceLoadSource,t,i),this.resumeCoreVr(),null===(r=this.renderController)||void 0===r||r.hideAds(!a,!t),!this.renderController&&h.hasClass(this.core.element,t5.ADS_PRELOAD_CLASS)&&h.removeClass(this.core.element,t5.ADS_PRELOAD_CLASS),h.removeClass(this.core.element,t5.ADS_LOADING_CLASS),y.emit(f.Z.ADS_ENDED,!a,!t),y.emit(f.Z.VR_TEXTURE_CLEAR),this.oldPlaybackRate&&(this.core.videoElement.playbackRate=this.oldPlaybackRate),this.ended=!0,null===(o=this.renderController)||void 0===o||o.setEnded(!0)}skipAds(){this.allowSkip&&(this.renderController.resetTimeouts(),this.trackingController.trackSkip(),this.resumePlay())}constructor(e,t,i={}){var s;this.core=e,this.options=(0,m._)({},iw(),i.ads||{}),this.template=t,this.vastUrls=null==(s=JSON.parse(JSON.stringify(this.options.vastUrls)))?void 0:s.filter(function(e){return e}),this.playRequested=!1,this.sourceController=new il(this.core,this.options),this.playerOnEndedEventId=null,this.timeUpdateEventId=null,this.playerOnErrorEventId=null,this.playerPlayEventId=null,this.playerOnPlayingEventId=null,this.playerOnDurationChange=null,this.trackingController=null,this.adsStartedPlayingTime=0,this.allowSkip=!1,this.played=!1,this.ended=!1,this.blocked=!1,this.abortShownTimeout=null,this.forceLoadSource=!!this.core.capabilities.chrome,this.preloadingData=!1,this.isAdSrcLoaded=!1,this.sourcePromise=null,this.oldPlaybackRate=null,this.oldDate=null,this.accumulatedShownTimeMs=0,this.prerollNoControlsExp=this.options.prerollNoControlsExp,this.init()}};let iD=(e={})=>{let{link:t,headline:i,ctabrandname:s}=e.companion||{};return!!(t&&i&&s)};function iI(e){if(!iD(e))return{link:e.link,headline:e.title,ctabrandname:e.title,adlinktext:e.title};let{link:t,headline:i,ctabrandname:s,adlinktext:n}=e.companion;return{link:t,headline:i,ctabrandname:s,adlinktext:n}}let iU=(e={})=>{var t;return(null===(t=e.country)||void 0===t?void 0:t.code)?`<div class="xh-flag xplayer-preroll-flag ${e.country.code.toLowerCase()}"></div>`:""},iM=(e={})=>{let t="xplayer-ads-block__xhl-info-label",i=e.isCompanion?`${t}--companion`:"";return`<div class="${t} ${i}" data-role="xhl-info-label"></div>`},ix=(e={})=>{let{linearAdvertiser:t,wrapperAdvertiser:i,isCompanion:s}=e,n=t||i;if(!n)return"";let r="xplayer-ads-block__advertiser-label",o=s?`${r}--companion`:"";return`
        <div class="${r} ${o}" data-advertiser="${n}" data-role="ad-label">
            AD
        </div>
    `},iY=(e={},t={})=>t.isEuCountry?e.isXhlPreroll?iM(e):ix(e):"",iZ=(e={})=>{var t,i;if(!iD(e))return e.title;let{isXhlPreroll:s,companionAdLinkText:n}=e;return s?n||(null===(i=e.companion)||void 0===i?void 0:i.adlinktext):null===(t=e.companion)||void 0===t?void 0:t.adlinktext},iB=(e={})=>{var t;if(!iD(e))return"";let{companionIconDefault:i,isXhlPreroll:s}=e,n=null===(t=e.companion)||void 0===t?void 0:t.icon;return s?n||i:n},iV=(e={},t={})=>{let i=iY((0,m._)({},e,{isCompanion:!0}),t),s="xplayer-ads-block__footer",n=`${s}-brandname-text`,r=iZ(e);return i?`
            <span class="${s}-brandname--flex">
                <span class="${n} ${n}--white">
                    ${r}
                </span>
                ${i}
            </span>
        `:`
            <span class="${s}-brandname-ad">Ad</span>
            <span class="${n}">${r}</span>
        `},iG={getAdLabel:iY,getVideoLink:(e,t)=>t.videoLinkDisable?'<div class="xplayer-ads-block__video"></div>':`<a class="xplayer-ads-block__link" target="_blank" href="${e.link}"></a>`,getAdsLinks(e,t){var i;let s=null===(i=t.country)||void 0===i?void 0:i.name;return`<div class="xplayer-ads-block-links">
                  ${s&&e.isXhlPreroll?`
                    <div class="xplayer-ads-block-live-label">
                        <div class="xplayer-ads-block-live-label__record"></div>
                        ${s}
                        ${iU(t)}
                    </div>`:""}
                </div>`},getAdsInfo(e,t,i=!1){let s=i?iY(e,t):"",n=t.noSkipOffset,r=`
            <span class="xplayer-ads-block__info-new--timing">
                ${d.parseTime(e.duration)}
            </span>`;return`<div class="xplayer-ads-block__info-new">
                    ${n?"":r}
                    ${s}
                </div>`},getAdsSkip(e,t={}){let i=t.noSkipOffset,s=i||t.skipAdjustment||e.skipOffset;return`<div class="xplayer-ads-block__skip ${s?" xplayer-ads-block__skip--blocked":""}">
                <span class="xplayer-ads-block__skip--with-timing ${s?"":" xh-helper-hidden"}">
                    ${(i?"Video starts in":null)||"Skip Ad in"}
                    <span class="xplayer-ads-block__skip--timing">
                        ${s}
                    </span>
                </span>
                ${i?"":`
                    <span class="xplayer-ads-block__skip--allowed-skip${s?" xh-helper-hidden":""}">
                        Skip Ad
                    </span>`}
            </div>`},getAdditionalButton:e=>e.additionalButton||"",getAdsCallToActionDesktop:(e={})=>`
            <a href="${e.link}" target="_blank" class="xplayer-ads-block__cta xplayer-ads-block__callToAction xh-helper-hidden">
                <span class="xplayer-ads-block__callToAction--no-title">Visit site</span>
                <span class="xplayer-ads-block__callToAction--with-title">${e.ctaText}</span>
            </a>
        `,getCompanionMobileWithCams(e={},t={}){let{link:i,ctabrandname:s,headline:n,adlinktext:r}=iI(e),o=iB(e),a=`
            xplayer-ads-block-companion
            xplayer-ads-block-companion--with-cams
            xplayer-ads-block-companion--icon-fixed
        `.trim(),l=iD(e)?"":`${a}--empty`;return`
        <a href="${i}" target="_blank"  class="${a} ${l} xplayer-ads-block__footer">
          <div class="xplayer-ads-block__footer-content">
            ${o?`
              <div class="xplayer-ads-block__footer-icon-wrapper">
                <span class="xplayer-ads-block__footer-icon">
                    <img src="${o}" alt="${s}">
                </span>
              </div>`:""}

            <div class="xplayer-ads-block__footer-texts ${o?"":"xplayer-ads-block__footer-texts--no-icon"}">
              <div class="xplayer-ads-block__footer-headline-container">
                <div class="xplayer-ads-block__footer-headline">
                    <span>${n.trim()}  ${iU(t)}</span>
                </div>
              </div>
              <div class="xplayer-ads-block__footer-brandname">
                ${iV(e,t)}
              </div>
            </div>
          </div>

          <span class="xplayer-ads-block__footer-action-button">
              <span>${iD(e)?s:r}</span>
              <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
          </span>

          <div class="xplayer-ads-block__footer-action">
            <span class="xplayer-ads-block__footer-action-button">
                <span>${iD(e)?s:r}</span>
                <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
            </span>
          </div>
          
          <div id="preroll_companion_spot"></div>
        </a>`},getCompanionMobileBig(e={},t={}){let{link:i,ctabrandname:s,headline:n,adlinktext:r}=iI(e),o=iB(e),a="xplayer-ads-block-companion xplayer-ads-block-companion--big",l=iD(e)?"":`${a}--empty`;return`
        <a href="${i}" target="_blank" class="${a} ${l} xplayer-ads-block__footer">
          <div class="xplayer-ads-block__footer-content">
            ${o?`
              <div class="xplayer-ads-block__footer-icon-wrapper">
                <span class="xplayer-ads-block__footer-icon">
                    <img src="${o}" alt="${s}">
                </span>
              </div>`:""}
            <div class="xplayer-ads-block__footer-texts ${o?"":"xplayer-ads-block__footer-texts--no-icon"}">
              <div class="xplayer-ads-block__footer-headline-container">
                <div class="xplayer-ads-block__footer-headline">
                    <span>${n.trim()}  ${iU(t)}</span>
                </div>
              </div>
              <div class="xplayer-ads-block__footer-brandname">
                ${iV(e,t)}
              </div>
            </div>
          </div>

          <span class="xplayer-ads-block__footer-action-button">
              <span>${iD(e)?s:r}</span>
              <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
          </span>

          <div class="xplayer-ads-block__footer-action">
            <span class="xplayer-ads-block__footer-action-button">
                <span>${iD(e)?s:r}</span>
                <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
            </span>
          </div>
        </a>`},getMobileCloseElement:()=>'<div class="xplayer-ads-block-companion-close"></div>',getCompanion(e={},t={}){let{link:i,ctabrandname:s,headline:n,adlinktext:r}=iI(e),o=iB(e),a=e.isXhlPreroll&&["b","c"].includes(null==t?void 0:t.bigCompanionGroup),l=`xplayer-ads-block-companion ${a?"xplayer-ads-block-companion--icon-fixed":""} ${a?"xh-helper-hidden":""}`.trim(),c=iD(e)?"":`${l}--empty`;return`
        <a href="${i}" target="_blank"  class="${l} ${c} xplayer-ads-block__footer">
          <div class="xplayer-ads-block__footer-content">
            ${o?`
              <div class="xplayer-ads-block__footer-icon-wrapper">
                <span class="xplayer-ads-block__footer-icon">
                    <img src="${o}" alt="${s}">
                </span>
              </div>`:""}

            <div class="xplayer-ads-block__footer-texts ${o?"":"xplayer-ads-block__footer-texts--no-icon"}">
              <div class="xplayer-ads-block__footer-headline-container">
                <div class="xplayer-ads-block__footer-headline">
                    <span>${n.trim()}  ${iU(t)}</span>
                </div>
              </div>
              <div class="xplayer-ads-block__footer-brandname">
                ${iV(e,t)}
              </div>
            </div>
          </div>

          <span class="xplayer-ads-block__footer-action-button">
              <span>${iD(e)?s:r}</span>
              <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
          </span>

          <div class="xplayer-ads-block__footer-action">
            <span class="xplayer-ads-block__footer-action-button">
                <span>${iD(e)?s:r}</span>
                <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
            </span>
          </div>
        </a>`},getCompanionCompleted(e={},t={},i=!1){let{linearAdvertiser:s,wrapperAdvertiser:n}=e||{},{link:r,headline:o,ctabrandname:a,adlinktext:l}=iI(e),c=iB(e),h=s||n||e.isXhlPreroll,u=t.isEuCountry&&h;return t.noSkipOffset?"":`<a
          href="${r}"
          target="_blank"
          class="xplayer-ads-block-companion-completed xplayer-ads-block__footer-completed"
        >
            <div class="xplayer-rotate ${u&&i?"xplayer-rotate--with-advertiser":""}">
                <div class="spinner pie"></div>
                <div class="filler pie"></div>
                <div class="mask"></div>
            </div>
            <div class="xplayer-ads-block__footer-completed-center">
                ${c?`
                  <span class="xplayer-ads-block__footer-completed-icon">
                    <img src="${c}" alt="${a}">
                  </span>`:""}

                <div class="xplayer-ads-block__footer-headline-container">
                  <div class="xplayer-ads-block__footer-completed-headline">
                      ${o.trim()}
                  </div>
                  ${iU(t)}
                </div>

                ${iD(e)?`<div class="xplayer-ads-block__footer-completed-brandname">
                      ${a}
                      <span class="xplayer-ads-block__footer-completed-link-icon"></span>
                    </div>`:`<span class="xplayer-ads-block__footer-action-button
                      xplayer-ads-block__footer-completed-action-button
                    ">
                      <span>${iD(e)?a:l}</span>
                    </span>`}
            </div>
        </a>`},getCompanionAdsDesktop:(e,t)=>iD(e)?`
        <a
          href="${e.companion.link}" target="_blank"
          class="xplayer-ads-block-companion xplayer-ads-block__footer xplayer-ads-block-companion--desktop"
        >
            <div class="xplayer-ads-block__footer-info-content">
              <span class="xplayer-ads-block__footer-icon">
                  <img src="${iB(e)}" alt="${e.companion.ctabrandname}">
              </span>
              <div class="xplayer-ads-block__footer-texts">
                <div class="xplayer-ads-block__footer-headline-container">
                  <div class="xplayer-ads-block__footer-headline">
                      <span>${e.companion.headline.trim()} ${iU(t)}</span>
                  </div>
                </div>

                <div class="xplayer-ads-block__footer-brandname">
                  ${iV(e,t)}
                </div>
              </div>
            </div>

            <div class="xplayer-ads-block__footer-action">
                <span class="xplayer-ads-block__footer-action-button">
                    <span>${e.companion.ctabrandname}</span>
                </span>
            </div>
        </a>`:"",getPauseButton:()=>`<div class="xplayer-ads-block__pause-button">
                    <div class="xplayer-ads-block__pause-button-inner"></div>
                </div>`};function iF(e,t){let{getVideoLink:i,getAdsLinks:s,getAdsInfo:n,getAdsCallToActionDesktop:r,getAdsSkip:o,getCompanionAdsDesktop:a,getCompanionCompleted:l}=iG,c=a(e,t);return c?`${i(e,t)}
        ${s(e,t)}
        ${l(e,t,!0)}
        ${n(e,t,!0)}
        ${o(e,t)}
        ${c}
        ${r(e,t)}`:`${i(e,t)}
    ${s(e,t)}
    ${n(e,t,!0)}
    ${o(e,t)}
    ${r(e,t)}`}var iH=class{init(){this.controllers=this.initControllers(this.controllersList),0!==this.controllers.length&&(this.render(),this.attachEvents())}initControllers(e){return e.map(e=>new e(this.core,this.options))}render(){this.element=document.createElement("div"),this.element.className="yld-pcxplayer-hover-menu",this.renderControllers(),this.core.element.appendChild(this.element)}renderControllers(){this.controllers.map(e=>e.element&&this.element.appendChild(e.element))}attachEvents(){this.element.addEventListener("mouseover",this.onElementMouseOver.bind(this)),this.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(e){"a"===e.target.tagName.toLowerCase()&&(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.HOVER_ELEMENT_CLICK,e.target.getAttribute("data-name")))}onElementMouseOver(e){e.target!==e.currentTarget&&y.emit(f.Z.USER_ACTION_PAUSE)}onElementMouseLeave(){y.emit(f.Z.USER_ACTION_UNPAUSE)}constructor(e,t=[],i){this.core=e,this.controllersList=t,this.options=i&&i.hover,this.controllers=null,this.init()}},i$=e=>`
    <span class="${e.className}__label">${e.label}</span>
    <span class="${e.className}__message">${e.message}</span>
    ${e.tooltip}
`,iW=class{init(){this.options.linkUrl&&(this.render(),this.attachEvents())}render(){this.element=document.createElement("a"),this.element.className=this.options.className,this.element.setAttribute("href",this.options.linkUrl),this.element.setAttribute("target","_blank"),this.element.setAttribute("rel","nofollow noopener"),this.element.innerHTML=i$(this.options),y.emit(f.Z.HOVER_LINK_RENDERED)}attachEvents(){this.element.addEventListener("click",this.onClick.bind(this))}onClick(){y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.HOVER_LINK_CLICK),this.options.onClick&&"function"==typeof this.options.onClick&&this.options.onClick()}constructor(e,t){this.core=e,this.options=t&&t.link||{},this.element=null,this.init()}},iK="xp-progress__handler--active",ij="xp-progress-bar--drag",iq="xh-helper-hidden",iQ=o(function e(t,i,s){n(this,e),this.core=t,this.options=(null==i?void 0:i.progressBar)||{},this.spriteViewer=s,this.isNewMobileDesign2=null==i||null===(r=i.newMobileDesign2)||void 0===r?void 0:r.enabled,this.seeking=!1,this.progressBarUpdated=!1,this.wasOnPause=!0,this.disableTouchEvents=this.options.disableTouchEvents||!1,this.settingsMenuOpened=!1;var r,o=this.core.capabilities.idevice;this.dragPauseRAF=null,this.isDragPaused=!1,this.prevDragEventTimestamp=0,this.dragPauseTreshold=this.options.dragPauseTreshold||(o?100:200),this.seekingTime=0,this.elementWidth=0,this.seekerMovedTimes=0,this.mouseLeavedSeeker=!1,this.isProgressBarBlocked=!0,this.isDragging=!1,this.draggingTimeout=null,this.draggingTreshold=25,this.clientX=null,this.clientY=null,this.swipeLock=null,this.touchedSeeker=!1,this.init()},[{key:"init",value:function(){this.render(),h.addClass(this.core.element,"xp-progress-bar-full"),this.transformStyleProperty=h.checkTransformVendor(),this.animationStepBind=this.animationStep.bind(this),this.checkDragPauseBind=this.checkDragPause.bind(this),this.attachEvents(),this.elementWidth||(this.elementWidth=this.element.offsetWidth);var e,t=null===(e=this.spriteViewer)||void 0===e?void 0:e.render();t&&(this.element.appendChild(t),this.spriteViewer.setParentElementWidth(this.elementWidth))}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className="xp-progress-bar ".concat(this.isNewMobileDesign2?iq:""),this.element.innerHTML=this.isNewMobileDesign2?'\n        <span class="seeker">\n            <span class="buffer"></span>\n            <span class="filler"></span>\n            <span class="handle"></span>\n        </span>\n    ':'\n        <span class="seeker togglable">\n            <span class="buffer"></span>\n            <span class="filler"></span>\n            <span class="handle"></span>\n        </span>\n    ',this.seekerElement=this.element.querySelector(".seeker"),this.fillerElement=this.element.querySelector(".filler"),this.handleElement=this.element.querySelector(".handle"),this.bufferElement=this.element.querySelector(".buffer"),this.core.element.appendChild(this.element)}},{key:"attachEvents",value:function(){this.options.disableProgressBarControl||(this.attachMouseEvents(),this.disableTouchEvents||this.attachTouchEvents()),y.on(f.Z.PLAYER_ON_PROGRESS,this.onPlayerProgress,this),y.on(f.Z.PLAYER_ON_LOADED_DATA,this.onPlayerProgress,this),y.on(f.Z.PLAYER_ON_CAN_PLAY,this.onPlayerProgress,this),y.on(f.Z.PLAYER_ON_PLAYING,this.onPlayerPlay,this),y.on(f.Z.PLAYER_ON_PAUSE,this.onPlayerPause,this),y.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnd,this),y.on(f.Z.PLAYER_PAUSE,this.setWasOnPause,this),y.on(f.Z.PLAYER_SET_SOURCE,this.onPlayerSetSource,this),y.on(f.Z.NO_USER_ACTION,this.onNoUserAction,this),y.on(f.Z.USER_ACTION,this.onUserAction,this),y.on(f.Z.PROGRESS_BAR_UPDATE,this.onProgressBarUpdate,this),y.on(f.Z.PROGRESS_BAR_VISUAL_UPDATE,this.progressBarVisualUpdate,this),y.on(f.Z.PROGRESS_BAR_UPDATE_END,this.onProgressBarUpdateEnd,this),y.on(f.Z.CONTROLS_RESET,this.onControlsReset,this),y.once(f.Z.PLAYER_PLAY,this.unblockProgressBar,this),window.addEventListener("resize",this.onResize.bind(this)),y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.onResize.bind(this)),y.on(f.Z.PROGRESS_BAR_RESIZE,this.onResize.bind(this))}},{key:"unblockProgressBar",value:function(){h.removeClass(this.element,iq),this.isProgressBarBlocked=!1}},{key:"attachMouseEvents",value:function(){this.element.addEventListener("mousedown",this.onSeekerElementMouseDown.bind(this)),this.element.addEventListener("mouseenter",this.onSeekerElementMouseEnter.bind(this)),this.element.addEventListener("mousemove",this.onSeekerElementMouseMove.bind(this)),this.element.addEventListener("mouseleave",this.onSeekerElementMouseLeave.bind(this)),this.core.element.addEventListener("mousemove",this.onCoreElementMouseMove.bind(this)),this.core.element.addEventListener("mouseup",this.onCoreElementMouseUp.bind(this)),this.core.element.addEventListener("mouseleave",this.onCoreElementMouseLeave.bind(this))}},{key:"attachTouchEvents",value:function(){this.element.addEventListener("touchstart",this.onSeekerElementTouchStart.bind(this)),this.core.element.addEventListener("touchmove",this.onTouchMoveEvent.bind(this)),this.core.element.addEventListener("touchend",this.onCoreElementTouchEnd.bind(this))}},{key:"setPauseOnHandlerMove",value:function(){!P.get("chromecast")&&P.get("playing")&&(y.emit(f.Z.PAUSE_ACTION_BLOCK),y.emit(f.Z.PLAYER_PAUSE,{wasOnPause:!1}))}},{key:"saveCurrentTime",value:function(e){if(this.isProgressBarBlocked){var t=100*this.getOffsetLeftFromMouseEvent(e)/this.elementWidth,i=this.core.options.duration;P.set("savedCurrentTime",i*t/100)}}},{key:"onSeekerElementMouseDown",value:function(e){var t=this;0!==e.button&&!e.touches.length||this.progressBarUpdated||this.isAdsPlaying()||(this.saveCurrentTime(e),this.setPauseOnHandlerMove(),P.set("seeking",!0),this.seeking=!0,this.animation=!1,this.handleElement.classList.add(iK),this.onCoreElementMouseMove(e),this.draggingTimeout=setTimeout(function(){t.isDragging=!0},this.draggingTreshold))}},{key:"onSeekerElementTouchStart",value:function(e){this.touchedSeeker=!0,this.clientX=e.touches[0].clientX,this.clientY=e.touches[0].clientY,this.progressBarUpdated=!1,this.saveCurrentTime(e),this.onSeekerElementMouseEnter(e,!1)}},{key:"onSeekerElementMouseEnter",value:function(e,t){!this.isAdsPlaying()&&(this.mouseLeavedSeeker=!1,this.showThumbs(this.calculateTimeFromMouseOffset(e)),t||y.emit(f.Z.USER_ACTION_PAUSE))}},{key:"onSeekerElementMouseMove",value:function(e){this.progressBarUpdated||this.isAdsPlaying()||this.showThumbs(this.calculateTimeFromMouseOffset(e))}},{key:"calculateTimeFromMouseOffset",value:function(e){this.elementWidth||(this.elementWidth=this.element.offsetWidth);var t=this.getOffsetLeftFromMouseEvent(e);return(this.isProgressBarBlocked?this.core.options.duration:P.get("duration"))*(100*t/this.elementWidth)/100}},{key:"onSeekerElementMouseLeave",value:function(){y.emit(f.Z.USER_ACTION_UNPAUSE),this.mouseLeavedSeeker=!0,this.seeking||y.emit(f.Z.USER_SEEK_HIDE_PREVIEW)}},{key:"isAdsPlaying",value:function(){return P.get("ads_playing")||P.get("xplayer-ads")||P.get("xplayer-ads-mobile")}},{key:"onTouchMoveEvent",value:function(e){var t=this.isNewMobileDesign2&&this.isAdsPlaying()||this.isNewMobileDesign2&&this.progressBarUpdated;this.touchedSeeker&&!t&&(this.setSwipeLock(e),"vertical"!==this.swipeLock)&&(this.onSeekerElementMouseDown(e),!this.seeking||this.progressBarUpdated||this.isAdsPlaying()||(this.setPauseOnHandlerMove(),this.checkDragPause(),y.emit(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE),e.preventDefault(),this.seekerMovedTimes++,this.seekingTime=this.calculateTimeFromMouseOffset(e),this.progressBarVisualUpdate(this.seekingTime),this.showThumbs(this.seekingTime),this.isDragPaused=!1,this.prevDragEventTimestamp=new Date().getTime(),this.core.element.classList.add(ij)))}},{key:"onCoreElementMouseMove",value:function(e){!this.seeking||this.progressBarUpdated||this.isAdsPlaying()||(this.checkDragPause(),y.emit(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE),e.preventDefault(),this.seekerMovedTimes++,this.seekingTime=this.calculateTimeFromMouseOffset(e),this.progressBarVisualUpdate(this.seekingTime),this.showThumbs(this.seekingTime),this.isDragPaused=!1,this.prevDragEventTimestamp=new Date().getTime())}},{key:"onCoreElementMouseUp",value:function(e){cancelAnimationFrame(this.dragPauseRAF),this.isDragging=!1,!this.seeking||this.progressBarUpdated||this.isAdsPlaying()||(this.isProgressBarBlocked&&this.saveCurrentTime(e),P.set("seeking",!1),this.seeking=!1,this.handleElement.classList.remove(iK),y.emit(f.Z.PAUSE_ACTION_UNBLOCK),this.seekingTime=this.calculateTimeFromMouseEvent(e),this.setCurrentTime(this.seekingTime,!0),P.get("playing")&&!1===this.animation&&(this.animation=!0,this.animationStep()),clearTimeout(this.draggingTimeout),y.emit(f.Z.USER_SEEK_HIDE_PREVIEW),this.sendSeekerUIStats())}},{key:"onCoreElementMouseLeave",value:function(e){this.onCoreElementMouseUp(e)}},{key:"setSwipeLock",value:function(e){if(!this.swipeLock){var t=e.changedTouches[0],i=t.clientX,s=t.clientY,n=this.clientX-i,r=this.clientY-s;this.swipeLock=Math.abs(n)-Math.abs(r)>-.1?"horizontal":"vertical"}}},{key:"checkDragPause",value:function(){if(!(P.get("ads")||P.get("ads_preload"))){var e=new Date().getTime();!this.isDragPaused&&e-this.prevDragEventTimestamp>=this.dragPauseTreshold&&(this.isDragPaused=!0,this.setCurrentTime(this.seekingTime)),this.dragPauseRAF=requestAnimationFrame(this.checkDragPauseBind)}}},{key:"onCoreElementTouchEnd",value:function(e){if(this.touchedSeeker){if(this.touchedSeeker=!1,this.clientX=null,this.clientY=null,this.swipeLock=null,!this.seeking){y.emit(f.Z.USER_SEEK_HIDE_PREVIEW);return}this.mouseLeavedSeeker=!0,y.emit(f.Z.USER_ACTION_UNPAUSE),this.core.userActionController.getHasNoUserAction()||y.emit(f.Z.USER_ACTION,!0),this.onCoreElementMouseUp(e),this.core.element.classList.remove(ij)}}},{key:"setCurrentTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isAdsPlaying()){var i=Math.floor(e)>=Math.floor(P.get("duration"))?P.get("duration"):e;y.emit(f.Z.USER_SEEK_SET_CURRENT_TIME_PROGRESS_BAR,i,this.isDragPaused),(!this.wasOnPause&&i<P.get("duration")&&t||P.get("ads"))&&y.emit(f.Z.PLAYER_PLAY)}}},{key:"onPlayerProgress",value:function(e){if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.buffered){var t,i=e.target.buffered,s=e.target.currentTime,n=e.target.duration;this.updateBuffer(i,s,n)}}},{key:"calculateTimeFromMouseEvent",value:function(e){this.elementWidth||(this.elementWidth=this.element.offsetWidth),null===(t=this.spriteViewer)||void 0===t||t.setParentElementWidth(this.elementWidth);var t,i=P.get("duration"),s=100*this.getOffsetLeftFromMouseEvent(e)/this.elementWidth*i/100;return s<=0?0:s>=i?i:s}},{key:"getOffsetLeftFromMouseEvent",value:function(e){var t=this.getEventClientX(e)+(window.scrollX||window.pageXOffset)-h.findElPosition(this.element).left;return t<0?0:t>this.elementWidth?this.elementWidth:t}},{key:"getEventClientX",value:function(e){return window.TouchEvent&&e instanceof window.TouchEvent?e.changedTouches.length&&e.changedTouches[0].clientX||e.touches.length&&e.touches[0].clientX:e.clientX}},{key:"animationStep",value:function(){!P.get("chromecast")&&!1!==this.animation&&!0!==this.seeking&&(this.core.videoElement.buffered.length||this.isAdsPlaying())&&(this.updateFillerAndHandler(this.core.videoElement.currentTime),this.animationInterval=requestAnimationFrame(this.animationStepBind))}},{key:"setAnimation",value:function(){this.wasOnPause=!1,this.animation=!0,this.animationStep()}},{key:"onPlayerPlay",value:function(){this.seeking&&(P.set("seeking",!1),this.seeking=!1,this.setCurrentTime(this.seekingTime),y.emit(f.Z.USER_SEEK_HIDE_PREVIEW)),this.core.capabilities.idevice?y.once(f.Z.PLAYER_ON_CAN_PLAY_THROUGH,this.setAnimation,this):this.setAnimation(),this.wasOnPause=!1}},{key:"setWasOnPause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wasOnPause;this.wasOnPause||(this.wasOnPause=void 0===t||t)}},{key:"onPlayerPause",value:function(){this.animation=!1}},{key:"onPlayerEnd",value:function(){this.updateFillerAndHandler(P.get("duration"))}},{key:"onPlayerSetSource",value:function(){cancelAnimationFrame(this.animationInterval)}},{key:"onResize",value:function(){var e=this;setTimeout(function(){var t;e.elementWidth=e.element.offsetWidth,null===(t=e.spriteViewer)||void 0===t||t.setParentElementWidth(e.elementWidth),e.updateFillerAndHandler(e.core.videoElement.currentTime)},1)}},{key:"updatePlayedTime",value:function(e){y.emit(f.Z.PROGRESS_BAR_HANDLER_MOVE,e)}},{key:"updateFillerAndHandler",value:function(e){(!this.elementWidth||this.element.offsetWidth&&this.elementWidth!==this.element.offsetWidth)&&(this.elementWidth=this.element.offsetWidth);var t=P.get("ads")?this.core.options.duration:P.get("duration");this.isAdsPlaying()&&(t=P.get("duration"));var i=e/t,s=i>.9999?1:i,n=(s*this.elementWidth).toFixed(1);this.transformX!==n&&(this.handleElement.style.setProperty(this.transformStyleProperty,"translateX(".concat(n,"px)")),this.fillerElement.style.setProperty(this.transformStyleProperty,"scaleX(".concat(s,")")),this.transformX=n)}},{key:"updateBuffer",value:function(e,t,i){for(var s=0;s<e.length;s++)if(Math.floor(e.start(s))<=t&&t<e.end(s)){var n=e.end(s)/i;n=n>.98?1:n,this.bufferElement.style.setProperty(this.transformStyleProperty,"scaleX(".concat(n,")"))}}},{key:"onNoUserAction",value:function(){!P.get("playing")||this.isAdsPlaying()||(this.animation=!1)}},{key:"onUserAction",value:function(){!1!==P.get("playing")&&!0!==this.animation&&!0!==this.seeking&&(this.animation=!0,this.animationStep())}},{key:"progressBarVisualUpdate",value:function(e){this.updateFillerAndHandler(e),this.updatePlayedTime(e)}},{key:"onProgressBarUpdate",value:function(e){if(P.get("chromecast")){this.updateFillerAndHandler(e);return}this.seekingTime=e,P.set("seeking",!0),this.seeking=!0,this.progressBarUpdated=!0,this.progressBarVisualUpdate(e)}},{key:"onControlsReset",value:function(e){this.updateFillerAndHandler(e),this.bufferElement.style.setProperty(this.transformStyleProperty,"scaleX(0)")}},{key:"onProgressBarUpdateEnd",value:function(){P.set("seeking",!1),this.seeking=!1,this.progressBarUpdated=!1,P.get("playing")&&this.animationStep()}},{key:"sendSeekerUIStats",value:function(){this.seekerMovedTimes>3?y.emit(f.Z.STATISTICS_UI,em.seeking_by_progress_bar_dragging):y.emit(f.Z.STATISTICS_UI,em.seeking_by_progress_bar_clicking),this.seekerMovedTimes=0}},{key:"onSettingsMenuToggled",value:function(e){this.settingsMenuOpened=e,y.emit(f.Z.USER_SEEK_HIDE_PREVIEW)}},{key:"showThumbs",value:function(e){if(!this.settingsMenuOpened){if(this.mouseLeavedSeeker){this.mouseLeavedSeeker=!1;return}if(!this.elementWidth){var t;this.elementWidth=this.element.offsetWidth,null===(t=this.spriteViewer)||void 0===t||t.setParentElementWidth(this.elementWidth)}y.emit(f.Z.USER_SEEK_SHOW_PREVIEW,e,{showBackgroundPreview:this.isDragging})}}},{key:"checkIfThumbsNeedHide",value:function(e){return!(e.target===this.element||e.target===this.seekerElement||e.target===this.handleElement||e.target===this.bufferElement||e.target===this.fillerElement)||window.TouchEvent&&e instanceof window.TouchEvent}}]),iz=o(function e(t){n(this,e),this.core=t,this.thumbWidth=0,this.seekerWidth=0,this.thumbHeight=0,this.thumbSizeMaxConstraint=160,this.thumbsHideTimeout=0,this.thumbsShown=!1,this.isSpriteLoaded=!1,this.backgroundImageUrl="",this.init()},[{key:"init",value:function(){this.render(),this.attachEvents()}},{key:"render",value:function(){return this.element=document.createElement("div"),this.element.className="xp-progress-bar-sprite-viewer",this.element.innerHTML='<span class="thumbs xh-helper-hidden">\n      <span class="sprite"></span>\n      <span class="time">""</span>\n    </span>',this.thumbsElement=this.element.querySelector(".thumbs"),this.spriteElement=this.element.querySelector(".sprite"),this.timeElement=this.element.querySelector(".time"),this.element}},{key:"setCurrentFrame",value:function(e,t){var i=t.spritePosition,s=t.thumbsAmount,n=t.size,r=t.originThumbWidth;this.isSpriteLoaded||(this.isSpriteLoaded=!0,this.currentSprite={size:n,thumbsAmount:s,originThumbWidth:r},this.calcThumbSizes()),this.backgroundImageUrl&&this.backgroundImageUrl===e||(this.backgroundImageUrl=e,this.spriteElement.style.backgroundImage="url(".concat(e,")"),this.calcBackgroundSize(s)),this.spriteElement.style.backgroundPositionX="".concat(-1*this.thumbWidth*i,"px")}},{key:"setParentElementWidth",value:function(e){this.seekerWidth=e}},{key:"show",value:function(e){if(this.thumbsElement.className="thumbs",this.thumbsShown=!0,e){var t=Number(this.core.options.duration)||P.get("duration");this.timeElement.childNodes[0].nodeValue=d.parseTime(e,t>=3600);var i=e/t,s=Math.max(5,Math.min(this.seekerWidth*i-this.thumbWidth/2,this.seekerWidth-this.thumbWidth-15));this.thumbsElement.style.left="".concat(s,"px")}}},{key:"hide",value:function(){!1!==this.thumbsShown&&(this.thumbsElement.className="thumbs xh-helper-hidden",this.thumbsShown=!1)}},{key:"hideAnimated",value:function(){!1!==this.thumbsShown&&(h.addClass(this.thumbsElement,"animate"),clearTimeout(this.thumbsHideTimeout),this.thumbsHideTimeout=setTimeout(this.hide.bind(this),500))}},{key:"calcBackgroundSize",value:function(e){this.spriteElement.style.backgroundSize="".concat(this.thumbWidth*e,"px ").concat(this.thumbHeight,"px")}},{key:"calcThumbSizes",value:function(){if(this.currentSprite){var e,t,i=this.currentSprite,s=i.size,n=i.originThumbWidth,r=s.height;r>n?t=(e=r>this.thumbSizeMaxConstraint?this.thumbSizeMaxConstraint:r)/r*n:e=(t=n>this.thumbSizeMaxConstraint?this.thumbSizeMaxConstraint:n)/n*r,this.spriteElement.style.width="".concat(t,"px"),this.spriteElement.style.height="".concat(e,"px"),this.thumbsElement.style.width="".concat(t,"px"),this.thumbsElement.style.top="".concat(-(e+15),"px"),this.thumbHeight=e,this.thumbWidth=t}}},{key:"attachEvents",value:function(){y.on(f.Z.PLAYER_ON_RESIZE,this.calcThumbSizes.bind(this))}}]),iJ=i(60402),iX=i.n(iJ),i0=o(function e(t){n(this,e),this.loader=t.loader,this.spritePreviewViewers=t.spritePreviewViewers||{},this.swipeSeekController=t.swipeSeekController||null,this.currentTime=0,this.init(),this.setPreview(t.showPreview)},[{key:"init",value:function(){var e;return iX().async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.attachEvents(),t.next=3,iX().awrap(this.loader.getCurrentFrame(this.currentTime));case 3:e=t.sent,this.swipeSeekController&&this.swipeSeekController.setSeekOptions(e);case 5:case"end":return t.stop()}},null,this,null,Promise)}},{key:"attachEvents",value:function(){y.on(f.Z.USER_SEEK_SET_CURRENT_TIME,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SET_CURRENT_TIME_DOUBLETAP,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SET_CURRENT_TIME_PROGRESS_BAR,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SET_CURRENT_TIME_SWIPE,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SHOW_PREVIEW,this.showCurrentThumb.bind(this)),y.on(f.Z.USER_SEEK_HIDE_PREVIEW,this.hideCurrentThumb.bind(this)),y.on(f.Z.PLAYER_SET_PREVIEW,this.setPreview.bind(this)),y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.onDurationChange,this),y.on(f.Z.ADS_STARTED,this.setIsBlockedByAd,this),y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.checkForThumbHide.bind(this))}},{key:"onDurationChange",value:function(e){P.get("ads")||P.get("ads_playing")||this.loader.setIsBlockedByAd(!1)}},{key:"setIsBlockedByAd",value:function(){this.loader.setIsBlockedByAd(!0)}},{key:"setPreview",value:function(e){if(!e&&!1!==e){this.showPreview=!0;return}this.showPreview=e}},{key:"setCurrentTime",value:function(e,t){y.emit(f.Z.PLAYER_SET_CURRENT_TIME,e),t||y.emit(f.Z.PROGRESS_BAR_UPDATE_END)}},{key:"showCurrentThumb",value:function(e,t){var i,s,n,r,o,a,l,c,h;return iX().async(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.showPreview){u.next=2;break}return u.abrupt("return");case 2:return this.currentTime=e,u.next=5,iX().awrap(this.loader.getCurrentFrame(e));case 5:if(!(!(n=u.sent)||(null===(i=n.spriteInfo)||void 0===i||null===(i=i.size)||void 0===i?void 0:i.width)===0||(null===(s=n.spriteInfo)||void 0===s||null===(s=s.size)||void 0===s?void 0:s.height)===0)){u.next=9;break}return this.hideCurrentThumb({withAnimation:!1}),u.abrupt("return");case 9:r=n.spriteUrl,o=n.spriteInfo,l=(a=this.spritePreviewViewers).backgroundSpriteViewer,c=a.progressBarSpriteViewer,h=!P.get("ads_preload")&&!P.get("ads_playing"),l&&t.showBackgroundPreview&&h&&(l.setCurrentFrame(r,o),l.show()),c&&(c.setCurrentFrame(r,o),c.show(e));case 14:case"end":return u.stop()}},null,this,null,Promise)}},{key:"hideCurrentThumb",value:function(e){Object.values(this.spritePreviewViewers).filter(function(e){return e}).forEach(function(t){null!=e&&e.withAnimation&&t.hideAnimated?t.hideAnimated():t.hide()})}},{key:"checkForThumbHide",value:function(){if(!P.get("swiping")&&!P.get("seeking")){var e;null===(e=this.spritePreviewViewers.backgroundSpriteViewer)||void 0===e||e.hide()}}}]);function i1(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function i2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?i1(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):i1(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}(l=c||(c={})).OLD="old",l.NEW="new";var i3={size:{width:0,height:0}},i5={size:"",lengthInSec:0,thumbsAmount:0,spriteNumber:0,format:"",type:c.OLD},i6={template:"",duration:0,nextSpritePreloadOffsetFrames:50},i4=o(function e(t){var i,s,r;if(n(this,e),this.options=(null==t?void 0:t.spriteLoader)||i6,this.introDuration=(null===(i=this.options)||void 0===i?void 0:i.introDuration)||0,null!==(s=this.options)&&void 0!==s&&s.template&&(this.template=this.parseTemplate(this.options.template),this.framesOffset=(null===(r=this.options)||void 0===r?void 0:r.nextSpritePreloadOffsetFrames)||i6.nextSpritePreloadOffsetFrames,this.currentSprite=i3,this.loadedSprites={},this.realSteps=[],this.options.steps=this.options.steps||[],this.isBlockedByAd=P.get("ads")||P.get("ads_playing"),!this.isOldTemplate())){var o=this.template,a=o.thumbsAmount,l=o.lengthInSec;this.secondsInSprite=a*l}},[{key:"setIsBlockedByAd",value:function(e){this.isBlockedByAd=e}},{key:"parseTemplate",value:function(e){var t=e.substring(e.lastIndexOf("/")+1);this.spritesAPI=e.replace(t,"");var i=t.split(".");if(i.length<4)return i5;if(i.length>4){var s=_(i,5),n=s[0],r=s[1],o=s[2],a=s[3],l=s[4];return{size:n,lengthInSec:Number(r),thumbsAmount:Number(o),spriteNumber:Number(a),format:l,type:c.NEW}}var h=_(i,4),u=h[0],d=h[1],m=h[2],p=h[3];return{size:u,thumbsAmount:Number(d),spriteNumber:m,format:p,type:c.OLD}}},{key:"getCurrentSpriteNumber",value:function(e){return Math.floor(e/this.secondsInSprite)}},{key:"getSpriteUrl",value:function(e){var t=this.template,i=t.size,s=t.spriteNumber,n=t.lengthInSec,r=t.format,o=t.thumbsAmount;if(this.isOldTemplate())return i&&o&&s&&r?"".concat(this.spritesAPI).concat(i,".").concat(o,".").concat(s,".").concat(r):null;if(!i||!o||!r||!n)return null;var a=this.getCurrentSpriteNumber(e);return"".concat(this.spritesAPI).concat(i,".").concat(n,".").concat(o,".").concat(a,".").concat(r)}},{key:"loadSprite",value:function(e,t){return new Promise(function(i){var s=new Image,n=Date.now();y.emit(f.Z.SPRITE_LOAD,t,e),s.onload=function(s){var r=s.currentTarget,o=r.width,a=r.height;y.emit(f.Z.SPRITE_LOAD_SUCCESS,Date.now()-n,t,e),i({width:o,height:a})},s.onerror=function(){y.emit(f.Z.SPRITE_LOAD_ERROR,Date.now()-n,t,e),i(null)},s.src=e})}},{key:"checkTimeEdges",value:function(e,t){return e<0?0:e>t?t:e}},{key:"isOldTemplate",value:function(){var e;return(null===(e=this.options)||void 0===e?void 0:e.template)&&this.template.type===c.OLD}},{key:"calcNewTemplateThumbsAmount",value:function(e,t){var i=Math.floor(t/this.secondsInSprite);e-=this.introDuration;var s=this.template,n=s.lengthInSec,r=s.thumbsAmount,o=s.size,a=this.currentSprite.size.width,l=Math.ceil(e/n),c=Math.floor(l/r)<=i||e<=200,h=c&&l!==r?l%r:r,u=0;(!this.introDuration||t%this.secondsInSprite>4)&&(u=Math.floor((t-this.introDuration)%this.secondsInSprite/n),this.introDuration&&t>this.secondsInSprite&&t%this.secondsInSprite>4&&(u+=1));var d=a/h,m=d,p=this.currentSprite.size.height>d,E=d===Number(o);m=c&&!E?p&&h<=2?a/2:p?a/h:a/(h-1):d;var v=a/m;return v<=h&&c&&u>=(h=v)&&(u=v-1),t<this.introDuration&&(u=0),{spritePosition:u,thumbsAmount:h,originThumbWidth:m}}},{key:"preloadNextSprite",value:function(e){var t,i,s,n,r,o,a,l,c,h;return iX().async(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.isOldTemplate()){u.next=2;break}return u.abrupt("return");case 2:if(t=(null==e?void 0:e.thumbsAmount)||50,i=(null==e?void 0:e.spritePosition)||0,!(t!==this.template.thumbsAmount)){u.next=6;break}return u.abrupt("return");case 6:if(s=this.getCurrentSpriteNumber(e.currentTime)+1,r=(n=this.template).size,o=n.lengthInSec,a=n.format,l="".concat(this.spritesAPI).concat(r,".").concat(o,".").concat(t,".").concat(s,".").concat(a),c=this.loadedSprites[l],!(i>t-this.framesOffset&&!c)){u.next=20;break}return this.loadedSprites[l]="loading",u.next=14,iX().awrap(this.loadSprite(l,s));case 14:if(h=u.sent){u.next=18;break}return this.loadedSprites[l]="loading error",u.abrupt("return");case 18:this.loadedSprites[l]={size:h},this.preloadedSprite={size:h,url:l};case 20:case"end":return u.stop()}},null,this,null,Promise)}},{key:"getCurrentThumbOffset",value:function(e){var t,i,s,n=P.get("ads")?null===(t=this.options)||void 0===t?void 0:t.duration:P.get("duration");this.isBlockedByAd&&(n=null===(i=this.options)||void 0===i?void 0:i.duration);var r=this.options.steps,o=e;if(r.length||(o=this.checkTimeEdges(e,n)),r.length&&(n=this.options.originalDuration||r[r.length-1][1]),!this.isOldTemplate())return this.calcNewTemplateThumbsAmount(n,o);var a=this.template,l=a.thumbsAmount,c=a.size,h=this.currentSprite.size.width,u=Number(c.split("x")[0]),d=0;(n-=this.introDuration)>l-1?d=h/l:(!P.get("ads")&&Math.floor(null===(s=this.options)||void 0===s?void 0:s.duration)-P.get("duration")>0&&(n=P.get("duration")+1-this.introDuration),d=h/Math.floor(n)),d>u&&(d=u);var m=h/d,p=Math.floor((o-this.introDuration)/(n/m));return p>=m&&(p=m-1),o<this.introDuration&&(p=0),{spritePosition:p,thumbsAmount:m,originThumbWidth:d}}},{key:"getCurrentStep",value:function(e){var t=this.realSteps||[];return t.length?e>t[t.length-1][1]?t.length-1:t.findIndex(function(t){return t[0]<=e&&t[1]>=e}):0}},{key:"calcRealSteps",value:function(){this.realSteps=this.options.steps.reduce(function(e,t){if(e.length){var i=e[e.length-1][1];e.push([i,t[1]-t[0]+i])}else e.push([0,t[1]-t[0]]);return e},[])}},{key:"getCurrentTimeFromSteps",value:function(e,t){var i=this.options.steps,s=i[t],n=i[i.length-1],r=en(i).splice(0,t).reduce(function(e,t){return e+(t[1]-t[0])},0);return this.checkTimeEdges(e-r+s[0],n[1])}},{key:"getCurrentFrame",value:function(e){var t,i,s,n,r;return iX().async(function(o){for(;;)switch(o.prev=o.next){case 0:if(null!==(t=this.options)&&void 0!==t&&t.template){o.next=2;break}return o.abrupt("return",null);case 2:if(this.options.steps.length&&(this.realSteps.length||this.calcRealSteps(),i=this.getCurrentStep(e),e=this.getCurrentTimeFromSteps(e,i)),!(!(s=this.getSpriteUrl(e))||"loading error"===this.loadedSprites[s]||"loading"===this.loadedSprites[s])){o.next=6;break}return o.abrupt("return",null);case 6:if(this.loadedSprites[s]){o.next=19;break}return this.loadedSprites[s]="loading",o.next=10,iX().awrap(this.loadSprite(s,this.getCurrentSpriteNumber(e)));case 10:if(n=o.sent){o.next=14;break}return this.loadedSprites[s]="loading error",o.abrupt("return",null);case 14:this.loadedSprites[s]={size:n},this.currentSprite.size=n,this.currentSprite.url=s,o.next=20;break;case 19:this.currentSprite=this.loadedSprites[s];case 20:if(r=this.getCurrentThumbOffset(e),this.preloadNextSprite(i2({currentTime:e},r)),r){o.next=24;break}return o.abrupt("return",null);case 24:return o.abrupt("return",{spriteUrl:s,spriteInfo:i2(i2({},r),{},{size:this.currentSprite.size})});case 25:case"end":return o.stop()}},null,this,null,Promise)}}]),i9={UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ADD:107,EQUAL:187,SUBTRACT:109,DASH:189,F:70,K:75,O:79,B:66,S:83,HOME:36,END:35,M:77,F1:112,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57},i7=[i9.UP,i9.DOWN,i9.LEFT,i9.RIGHT,i9.ADD,i9.EQUAL,i9.SPACE,i9.SUBTRACT,i9.DASH,i9.K,i9.O,i9.B,i9.HOME,i9.END,i9.M,i9.F1,i9["0"],i9["1"],i9["2"],i9["3"],i9["4"],i9["5"],i9["6"],i9["7"],i9["8"],i9["9"],i9.S],i8=o(function e(t,i){n(this,e),this.core=t,this.keyDownTimeout=null,this.keyUpTimeout=null,this.rewindCounter=0,this.debugSequence=[],this.options=(null==i?void 0:i.keyboard)||{},this.rewindTime=null,this.playerPlayed=!1,this.savedVolume=!1,this.hidePreviewTimer=null,this.init()},[{key:"init",value:function(){this.core.element.tabIndex=-1,this.attachEvents()}},{key:"attachEvents",value:function(){var e=this;y.once(f.Z.PLAYER_ON_PLAYING,function(){e.playerPlayed=!0}),this.core.element.addEventListener("keydown",this.onCoreElementKeyDown.bind(this)),this.core.element.addEventListener("keyup",this.onCoreElementKeyUp.bind(this))}},{key:"onCoreElementKeyDown",value:function(e){var t=this,i=e.target;!P.get("ads_playing")&&"TEXTAREA"!==i.nodeName&&"INPUT"!==i.nodeName&&!i.isContentEditable&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&(-1!==i7.indexOf(e.which)||this.core.options.debug)&&(-1===[i9.UP,i9.DOWN].indexOf(e.which)||this.playerPlayed)&&(e.preventDefault(),this.keyDownTimeout||(clearTimeout(this.hidePreviewTimer),this.keyDownTimeout=setTimeout(function(){t.keyDownTimeout=null,t.processKeyDown(e.which,e.shiftKey,0!==t.rewindCounter),t.rewindCounter++},100)))}},{key:"onCoreElementKeyUp",value:function(e){var t=this,i=e.target;if(!P.get("ads_playing")&&"TEXTAREA"!==i.nodeName&&"INPUT"!==i.nodeName&&!i.isContentEditable&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&-1!==[i9.LEFT,i9.RIGHT,i9.F].indexOf(e.which)){if(e.which===i9.F){y.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN,this);return}e.preventDefault(),this.keyUpTimeout||(this.keyUpTimeout=setTimeout(function(){t.keyUpTimeout=null,t.rewindCounter=0,t.processKeyUp(e.which)},100))}}},{key:"processKeyDown",value:function(e,t){var i,s,n,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case i9.LEFT:null===this.rewindTime&&(this.rewindTime=P.get("currentTime")||0),this.rewindTime-=t?20:10,this.rewindTime=Math.max(0,this.rewindTime),this.showPreview(this.rewindTime,a),y.emit(f.Z.PROGRESS_BAR_UPDATE,this.rewindTime);break;case i9.RIGHT:null===this.rewindTime&&(this.rewindTime=P.get("currentTime")||0),this.rewindTime+=t?20:10,this.rewindTime=Math.min(this.rewindTime,P.get("duration")),this.showPreview(this.rewindTime,a),y.emit(f.Z.PROGRESS_BAR_UPDATE,this.rewindTime);break;case i9.K:case i9.SPACE:P.get("playing")?y.emit(f.Z.PLAYER_PAUSE):y.emit(f.Z.PLAYER_PLAY);break;case i9.ADD:case i9.UP:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume+.05);break;case i9.SUBTRACT:case i9.DOWN:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume-.05);break;case i9.EQUAL:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume+.05);break;case i9.DASH:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume-.05);break;case i9.M:0===(i=this.core.videoElement.volume)?i=this.savedVolume:(this.savedVolume=i,i=0),y.emit(f.Z.PLAYER_SET_VOLUME,i);break;case i9.O:y.emit(f.Z.OVERLAY_MENU_TOGGLE);break;case i9.S:if(!t)return;o=(o=P.get("playbackRate"))>=1?.5:1,y.emit(f.Z.PLAYER_SET_PLAYBACK_RATE,o);break;case i9.HOME:case i9["0"]:s=P.get("ended"),this.setCurrentTime(0),s&&y.emit(f.Z.PLAYER_PLAY);break;case i9.END:this.setCurrentTime(P.get("duration"));break;case i9.B:y.emit(f.Z.PLAYER_PAUSE),window.open("https://www.google.com","_blank").focus();break;case i9["1"]:case i9["2"]:case i9["3"]:case i9["4"]:case i9["5"]:case i9["6"]:case i9["7"]:case i9["8"]:case i9["9"]:if(parseInt(n=String.fromCharCode(e),10)!==Number(n))break;r=Number(n)/10*P.get("duration"),this.setCurrentTime(r)}y.emit(f.Z.USER_ACTION,!0)}},{key:"processKeyUp",value:function(e){switch(e){case i9.LEFT:case i9.RIGHT:this.setCurrentTime();break;case i9["1"]:case i9["2"]:case i9["3"]:case i9["4"]:case i9["5"]:case i9["6"]:case i9["7"]:case i9["8"]:case i9["9"]:this.hidePreview()}}},{key:"hidePreview",value:function(){this.hidePreviewTimer=setTimeout(function(){y.emit(f.Z.USER_SEEK_HIDE_PREVIEW,{withAnimation:!0})},500)}},{key:"showPreview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y.emit(f.Z.USER_SEEK_SHOW_PREVIEW,e,{showBackgroundPreview:t})}},{key:"setCurrentTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e?y.emit(f.Z.STATISTICS_UI,em.seeking_by_keyboard_number_keys):this.rewindTime>P.get("currentTime")+20||this.rewindTime<P.get("currentTime")-20?y.emit(f.Z.STATISTICS_UI,em.seeking_by_keyboard_hold):y.emit(f.Z.STATISTICS_UI,em.seeking_by_keyboard_press);var t=null===e?this.rewindTime:e;y.emit(f.Z.USER_SEEK_SET_CURRENT_TIME,t,!1),this.hidePreview(),this.rewindTime=null}},{key:"isDebugSequence",value:function(e){-1!==["i","d","d","q","d","k","f","a"].indexOf(e)&&(this.debugSequence.push(e),this.debugSequence.length>5&&this.debugSequence.shift(),"iddqd"===this.debugSequence.join("")&&this.core.fallbackService.fallbackImage())}}]),se=o(function e(t){n(this,e),this.core=t,this.thumbWidth=0,this.thumbHeight=0,this.thumbsShown=!1,this.thumbsHideTimeout=0,this.backgroundImageUrl="",this.isPlayerResized=!1,this.isSpriteBlocked=!0,this.playerOnCanPlayEventId=null,this.currentPosition=0,this.lastPosition=0,this.watchedTime=0,this.init()},[{key:"init",value:function(){return iX().async(function(e){for(;;)switch(e.prev=e.next){case 0:this.render(),this.attachEvents(),this.videoElement=document.querySelector("#xplayer__video");case 3:case"end":return e.stop()}},null,this,null,Promise)}},{key:"attachEvents",value:function(){var e=this;window.addEventListener("resize",this.onResizeActions.bind(this)),y.on(f.Z.PLAYER_ON_RESIZE,this.onResizeActions.bind(this)),y.on(f.Z.PLAYER_ON_SWIPE_START,this.calcThumbSizes.bind(this)),y.once(f.Z.PLAYER_ON_PLAY,this.unblockSpriteThumbs.bind(this)),y.once(f.Z.PLAYER_ON_LOADED_DATA,this.calcThumbSizes.bind(this)),y.once(f.Z.REMOTE_PLAYER_PLAYING,this.unblockSpriteThumbs.bind(this)),y.on(f.Z.PLAYER_ON_SEEKING,function(){e.seeked=!1}),y.on(f.Z.PLAYER_ON_SEEKED,function(){e.seeked=!0}),y.on(f.Z.PLAYER_ON_TIMEUPDATE,function(){if(!e.seeked){e.currentPosition=e.videoElement.currentTime;var t=e.currentPosition-e.lastPosition;if(e.lastPosition=e.currentPosition,t<0||t>.5){e.watchedTime=0;return}e.watchedTime+=t,e.watchedTime<.5||(e.watchedTime=0,e.seeked=!0,e.hideThumbs())}})}},{key:"unblockSpriteThumbs",value:function(){this.isSpriteBlocked=!1}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className="background-thumbs-container",this.element.innerHTML='\n    <span class="thumbs thumbs-hidden">\n      <div class="thumbs-background"></div> \n      <span class="sprite"></span>\n    </span>\n    ',this.thumbsElement=this.element.querySelector(".thumbs"),this.spriteElement=this.element.querySelector(".sprite"),this.core.element.appendChild(this.element),this.calcThumbSizes()}},{key:"setCurrentFrame",value:function(e,t){var i=t.spritePosition,s=t.thumbsAmount;(this.backgroundImageUrl!==e||this.isPlayerResized)&&(this.isPlayerResized=!1,this.backgroundImageUrl=e,this.spriteElement.style.background="url(".concat(e,") no-repeat"),this.spriteElement.style.backgroundSize="".concat(this.thumbWidth*s,"px ").concat(this.thumbHeight,"px")),this.spriteElement.style.backgroundPositionX="".concat(-1*this.thumbWidth*i,"px")}},{key:"calcThumbSizes",value:function(){var e,t,i=this;if(P.get("ads_playing")||P.get("ads_preload")){y.once(f.Z.ADS_ENDED,function(){y.once(f.Z.PLAYER_ON_LOADED_DATA,i.calcThumbSizes.bind(i))});return}var s=null===(e=this.core.sourceController)||void 0===e||null===(e=e.options)||void 0===e||null===(e=e.videoElement)||void 0===e?void 0:e.videoWidth,n=null===(t=this.core.sourceController)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.videoElement)||void 0===t?void 0:t.videoHeight;if(s&&n){var r=this.core.element.clientHeight,o=this.core.element.clientWidth;this.thumbWidth=Math.min(s/n*r,o),this.thumbHeight=Math.min(n/s*o,r),this.spriteElement.style.width="".concat(this.thumbWidth,"px"),this.spriteElement.style.height="".concat(this.thumbHeight,"px"),this.thumbsElement.style.width="".concat(o,"px"),this.thumbsElement.style.height="".concat(r,"px")}}},{key:"onResizeActions",value:function(){this.isPlayerResized=!0,this.calcThumbSizes()}},{key:"show",value:function(){this.isSpriteBlocked||(this.seeked=!1,this.clearEvents(),this.thumbsElement.className="thumbs",this.thumbsShown=!0)}},{key:"hide",value:function(){!1!==this.thumbsShown&&(this.playerOnCanPlayEventId=y.once(f.Z.PLAYER_ON_CAN_PLAY,this.hideThumbs.bind(this)),this.seeked?this.hideThumbs():P.get("playing")||(this.playerOnSeekedEventId=y.once(f.Z.PLAYER_ON_SEEKED,this.hideThumbs.bind(this))))}},{key:"hideThumbs",value:function(){this.thumbsElement.className="thumbs thumbs-hidden",this.thumbsShown=!1,this.clearEvents()}},{key:"clearEvents",value:function(){y.off(f.Z.PLAYER_ON_CAN_PLAY,this.playerOnCanPlayEventId),y.off(f.Z.PLAYER_ON_SEEKED,this.playerOnSeekedEventId)}}]),st=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},si="xh-helper-hidden",ss="xplayer-dsa-label",sn="".concat(ss,"__text"),sr=o(function e(t){n(this,e),this.core=t,this.init()},[{key:"init",value:function(){this.render(),this.attachEvents()}},{key:"render",value:function(){this.element=st('\n            <div class="'.concat(ss," ").concat(si,'">\n                <div class="').concat(sn,'">\n                    Includes commercial communications\n                </div>\n            </div>\n        ')),this.core.element.appendChild(this.element)}},{key:"attachEvents",value:function(){P.get("ads_preload")||P.get("ads")?y.once(f.Z.ADS_ENDED,this.showDSA.bind(this)):y.once(f.Z.PLAYER_ON_PLAYING,this.showDSA.bind(this))}},{key:"showDSA",value:function(){var e=this;h.removeClass(this.element,si),setTimeout(function(){h.addClass(e.element,si)},5e3)}}]),so=o(function e(t,i){var s,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),this.options=(null==i?void 0:i.subtitles)||{},this.introDuration=(null===(s=this.options)||void 0===s?void 0:s.introDuration)||0,this.shouldSetInitialLanguage=!0,null!==(r=this.options.tracks)&&void 0!==r&&r.length&&(this.core=t,this.core.videoElement.setAttribute("crossorigin","anonymous"),this.isMobile=a,this.tracks=this.options.tracks,this.videoElement=this.core.videoElement,this.currentLang=(null===(o=this.core.settings.subtitlesPrefLang)||void 0===o?void 0:o.lang)||"",this.isHidden=!this.isSubtitlesEnabled(),this.currentTrack=null,this.init())},[{key:"init",value:function(){this.appendCustomTrackElement(),this.attachEvents(),y.emit(f.Z.SUBTITLES_READY,this.getInitialLangState()),P.get("playing")?this.loadSubtitles():y.once(f.Z.PLAYER_PLAY,this.loadSubtitles.bind(this))}},{key:"loadSubtitles",value:function(){var e=this;Promise.allSettled(this.appendSubtitlesTracks()).then(function(t){if(t.some(function(e){return"fulfilled"===e.status})){y.emit(f.Z.STATISTICS_UI,em.subtitles_load_success);var i=t.filter(function(e){return"rejected"===e.status});e.clearFailedSubtitles(i),e.addSubtitlesIntroOffset(),y.emit(f.Z.SUBTITLES_LOADED)}else y.emit(f.Z.STATISTICS_UI,em.subtitles_load_failed),y.emit(f.Z.SUBTITLES_NO_AVAILABLE_TRACKS),e.tracks=null,e.currentTrack=null,e.currentLang=null}),this.hideDefaultSubtitles()}},{key:"attachEvents",value:function(){var e=this;y.on(f.Z.SUBTITLES_SHOW_BUTTON_CLICK,this.showSubtitles.bind(this)),y.on(f.Z.SUBTITLES_HIDE_BUTTON_CLICK,this.hideSubtitles.bind(this)),y.on(f.Z.SUBTITLES_SET_LANG,this.onSelectLang.bind(this)),y.once(f.Z.SUBTITLES_SHOWN,function(){y.emit(f.Z.STATISTICS_UI,em.subtitles_shown)}),y.once(f.Z.SUBTITLES_LOADED,function(){e.isHidden||e.isSubtitlesBlockedByAd()||e.showSubtitles()}),this.isSubtitlesBlockedByAd()&&y.once(f.Z.ADS_ENDED,function(){e.isHidden||e.showSubtitles()})}},{key:"isSubtitlesEnabled",value:function(){return"off"!==this.core.settings.subtitlesStateByButton}},{key:"isSubtitlesBlockedByAd",value:function(){return P.get("ads")||P.get("ads_playing")||P.get("ads_preload")}},{key:"addSubtitlesIntroOffset",value:function(){var e=this;Array.from(this.videoElement.textTracks).forEach(function(t){var i=Array.from(null==t?void 0:t.cues);null==i||i.forEach(function(t){t.startTime+=e.introDuration,t.endTime+=e.introDuration})})}},{key:"clearFailedSubtitles",value:function(e){var t=e.map(function(e){return e.reason.getAttribute("srclang")});this.options.tracks=this.tracks.filter(function(e){return!(-1!==t.indexOf(e.lang))}),this.tracks=this.options.tracks,t.forEach(function(e){var t;null===(t=document.querySelector("video track[srclang='".concat(e,"']")))||void 0===t||t.remove()})}},{key:"appendSubtitlesTracks",value:function(){var e=this,t=this.core.capabilities.mobile?"subtitles":"metadata";return this.tracks.map(function(i,s){var n,r,o,a,l=st((n=0===s,r=i.label,o=i.urls,a=i.lang,'\n        <track kind="'.concat(t,'" label="').concat(r,'" src="').concat(o.vtt,'" srclang="').concat(a,'" ').concat(n?"default":"","/>\n    ")));return e.videoElement.appendChild(l),e.loadTrackPromise(l)})}},{key:"loadTrackPromise",value:function(e){return new Promise(function(t,i){e.addEventListener("load",function(e){return t(e.target)}),e.addEventListener("error",function(e){return i(e.target)})})}},{key:"appendCustomTrackElement",value:function(){this.customTrackElement=st('<div id="custom-subtitles"><span></span></div>'),this.customTrackText=this.customTrackElement.querySelector("span"),this.core.element.appendChild(this.customTrackElement)}},{key:"attachCueChangeListener",value:function(){this.cueChangeCallback=this.onCueChange.bind(this,this.currentTrack),this.currentTrack.addEventListener("cuechange",this.cueChangeCallback)}},{key:"detachCueChangeListener",value:function(){var e;null===(e=this.currentTrack)||void 0===e||e.removeEventListener("cuechange",this.cueChangeCallback)}},{key:"onCueChange",value:function(e){if(!this.isHidden){var t,i=(null===(t=e.activeCues)||void 0===t?void 0:t[0])||null;if(i){this.showSubtitles(),this.customTrackText.textContent=i.text,y.emit(f.Z.SUBTITLES_SHOWN);return}this.hide()}}},{key:"onSelectLang",value:function(e){"off"===e.lang?(this.detachCueChangeListener(),this.currentLang="off",this.currentTrack=null,this.isHidden=!0,this.hideSubtitles()):this.isHidden=!1,this.setSubtitlesTrack(e),P.get("playing")||y.emit(f.Z.PLAYER_PLAY)}},{key:"setSubtitlesTrack",value:function(e){if(this.currentLang)this.showSubtitlesTrack(e),y.emit(f.Z.SUBTITLES_SHOW,e);else{var t=this.getDefaultSubtitlesTrack();if(!t)return;this.showSubtitlesTrack(t),y.emit(f.Z.SUBTITLES_SET_DEFAULT_LANG,t)}}},{key:"showSubtitles",value:function(){if(this.customTrackElement.style.display="block",this.isHidden=!1,this.currentTrack)this.isMobile?this.showDefaultSubtitles():y.emit(f.Z.SUBTITLES_SHOW,this.getTrackByLang(this.currentTrack.language));else{var e=this.getDefaultSubtitlesTrack();if(!e)return;this.showSubtitlesTrack(e),y.emit(f.Z.SUBTITLES_SET_DEFAULT_LANG,e)}}},{key:"getTrackByLang",value:function(e){var t;return null===(t=this.tracks)||void 0===t?void 0:t.find(function(t){return t.lang===e})}},{key:"getLangFromSettings",value:function(){var e,t,i=null===(e=this.core.settings.subtitlesPrefLang)||void 0===e?void 0:e.lang,s=this.getTrackByLang(i);return s?s:this.getTrackByLang(null===(t=this.options.siteCountryInfo)||void 0===t?void 0:t.lang)||null}},{key:"getInitialLangState",value:function(){return this.getLangFromSettings()||{label:"Off",lang:"off"}}},{key:"getDefaultSubtitlesTrack",value:function(){if(this.shouldSetInitialLanguage)return this.shouldSetInitialLanguage=!1,this.getInitialLangState();var e,t=this.getLangFromSettings();return t?t:this.getTrackByLang("en")||this.getTrackByLang("eu")||(null===(e=this.tracks)||void 0===e?void 0:e[0])}},{key:"showSubtitlesTrack",value:function(e){var t=e.lang,i="off"===t&&"off"===this.currentLang;if(!this.isSubtitlesBlockedByAd()&&!i){this.currentTrack&&this.detachCueChangeListener(),this.isMobile||this.hide();for(var s=this.videoElement.textTracks,n=0;n<s.length;n++)s[n].language===t&&(this.currentLang=t,this.currentTrack=s[n],this.isMobile?(this.hideDefaultSubtitles(),s[n].mode="showing",y.emit(f.Z.SUBTITLES_SHOWN)):this.attachCueChangeListener())}}},{key:"hideSubtitles",value:function(){this.isHidden=!0,this.isMobile&&this.hideDefaultSubtitles(),this.hide(),y.emit(f.Z.SUBTITLES_HIDE)}},{key:"hide",value:function(){this.customTrackElement.style.display="none",this.customTrackText.textContent=""}},{key:"hideDefaultSubtitles",value:function(){for(var e=this.videoElement.textTracks,t=0;t<e.length;t++)e[t].mode="hidden"}},{key:"showDefaultSubtitles",value:function(){for(var e=this.videoElement.textTracks,t=0;t<e.length;t++)e[t].language===this.currentLang&&(this.hideDefaultSubtitles(),e[t].mode="showing",y.emit(f.Z.SUBTITLES_SHOWN))}}]),sa=o(function e(t){n(this,e);var i,s=t.playerHandler,r=t.remotePlayer,o=t.remotePlayerController,a=t.core,l=t.volumeControls;r&&o&&null!==(i=window.cast)&&void 0!==i&&i.framework&&(this.core=a,this.playerHandler=s,this.remotePlayer=r,this.remotePlayerController=o,this.playerTarget={},this.castSession={},this.currentTime=0,this.volumeControls=l)},[{key:"init",value:function(){this.castContext=window.cast.framework.CastContext.getInstance(),this.castSession=this.castContext.getCurrentSession(),this.setListeners(),this.initPlayerTarget()}},{key:"setListeners",value:function(){var e=window.cast.framework.RemotePlayerEventType,t=e.IS_PAUSED_CHANGED,i=e.IS_MUTED_CHANGED,s=e.VOLUME_LEVEL_CHANGED,n=e.PLAYER_STATE_CHANGED,r=window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED;this.castContext.addEventListener(r,this.handleSessionStatus.bind(this)),this.remotePlayerController.addEventListener(t,this.handlePlayPause.bind(this)),this.remotePlayerController.addEventListener(i,this.handleMuted.bind(this)),this.remotePlayerController.addEventListener(s,this.handleVolumeChange.bind(this)),this.remotePlayerController.addEventListener(n,this.handleStateChange.bind(this))}},{key:"handleSessionStatus",value:function(e){null!=e&&e.errorCode&&y.emit(f.Z.STATISTICS_UI,em.chromecast_play_error,{error:e.errorCode,state:e.sessionState})}},{key:"handleStateChange",value:function(e){var t=e.value,i=this.deviceName;switch(!0){case"LOADING"===t:y.emit(f.Z.REMOTE_PLAYER_PLAYING,{value:t,deviceName:i});break;case"PLAYING"===t:h.removeClass(this.core.element,"chromecast-paused"),y.emit(f.Z.REMOTE_PLAYER_PLAYING,{value:t,deviceName:i}),y.emit(f.Z.STATISTICS_UI,em.chromecast_play_success),y.emit(f.Z.REMOTE_PLAYER_LOADING_END);break;case"PAUSED"===t:y.emit(f.Z.REMOTE_PLAYER_PAUSED,{value:t,deviceName:i});break;case"BUFFERING"===t:y.emit(f.Z.REMOTE_PLAYER_LOADING_START),y.emit(f.Z.REMOTE_PLAYER_BUFFERING,{value:t,deviceName:i});break;case"IDLE"===t&&P.get("currentTime")>=P.get("duration"):this.remotePlayerController.stop(),this.castSession.getSessionObj().stop()}}},{key:"targetLoad",value:function(){y.emit(f.Z.REMOTE_PLAYER_LOADING_START),this.deviceName=this.castSession.getCastDevice().friendlyName,this.handleStateChange({value:"LOADING"});var e=this.core.sourceController.getChromecastUrl(),t=window.chrome.cast.media,i=new t.MediaInfo(e);i.metadata=new t.GenericMediaMetadata,i.metadata.metadataType=t.MetadataType.GENERIC,i.metadata.title=i.title;var s=new t.LoadRequest(i);s.credentials="user-credentials",s.atvCredentials="atv-user-credentials",s.currentTime=P.get("currentTime"),this.castSession.loadMedia(s).then(this.playerHandler.loaded.bind(this.playerHandler),this.remoteLoadErrorHandler.bind(this))}},{key:"setTimeUpdatesEvent",value:function(){var e=window.cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED;this.remotePlayerController.addEventListener(e,this.updateTimings.bind(this))}},{key:"updateTimings",value:function(e){if(this.remotePlayer.isMediaLoaded){var t=e.value,i=P.get("duration");y.emit(f.Z.PLAYER_ON_TIMEUPDATE,{target:{currentTime:t,duration:i}}),y.emit(f.Z.PROGRESS_BAR_UPDATE,t),P.set("currentTime",t),this.currentTime=t}}},{key:"handlePlayPause",value:function(){this.remotePlayer.isPaused?(this.playerHandler.pause(),h.addClass(this.core.element,"chromecast-paused")):this.playerHandler.play()}},{key:"targetPlay",value:function(){this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause(),P.set("playing",!0),y.emit(f.Z.REMOTE_PLAYER_STATE_CHANGED)}},{key:"targetPause",value:function(){this.remotePlayer.isPaused||this.remotePlayerController.playOrPause(),P.set("playing",!1),y.emit(f.Z.REMOTE_PLAYER_STATE_CHANGED)}},{key:"targetSetVolume",value:function(e){this.remotePlayer.volumeLevel=Number(e),this.remotePlayerController.setVolumeLevel()}},{key:"mute",value:function(){this.remotePlayer.isMuted||this.remotePlayerController.muteOrUnmute()}},{key:"unMute",value:function(){this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()}},{key:"handleMuted",value:function(){this.remotePlayer.isMuted?y.emit(f.Z.PLAYER_SET_VOLUME,0):y.emit(f.Z.PLAYER_SET_VOLUME,1)}},{key:"handleVolumeChange",value:function(e){var t=Number(e.value.toFixed(2));if(this.core.videoElement.volume=t,t!==this.core.videoElement.volume){var i=this.volumeControls,s=i.filler,n=i.handler,r=i.volumeElement;s&&n&&r&&(s.style="width: ".concat(100*t,"%"),n.style="left: ".concat(100*t,"%"),t<.02?r.className="volume mute":t<.25?r.className="volume quarter":t<.5?r.className="volume half":t<.75?r.className="volume third":r.className="volume")}}},{key:"remoteLoadErrorHandler",value:function(e){console.warn("Chromecast load error",e)}},{key:"targetSeekTo",value:function(e){this.remotePlayer.currentTime=e,this.remotePlayerController.seek()}},{key:"targetIsMediaLoaded",value:function(){return this.remotePlayer.isMediaLoaded}},{key:"initPlayerTarget",value:function(){this.playerTarget.play=this.targetPlay.bind(this),this.playerTarget.pause=this.targetPause.bind(this),this.playerTarget.load=this.targetLoad.bind(this),this.playerTarget.setVolume=this.targetSetVolume.bind(this),this.playerTarget.mute=this.mute.bind(this),this.playerTarget.unMute=this.unMute.bind(this),this.playerTarget.seekTo=this.targetSeekTo.bind(this),this.playerTarget.setTimeUpdatesEvent=this.setTimeUpdatesEvent.bind(this),this.playerTarget.isMediaLoaded=this.targetIsMediaLoaded.bind(this),this.playerHandler.setTarget(this.playerTarget),this.playerHandler.play(),this.handleVolumeChange({value:this.core.videoElement.volume}),this.core.videoElement.muted&&this.mute()}}]),sl="chromecast-bg__visible",sc=o(function e(t){n(this,e),this.playerElement=t,this.render(),this.attachEvents()},[{key:"render",value:function(){this.element=document.createElement("div"),this.text=document.createElement("div"),this.imageBg=document.createElement("div"),this.element.className="chromecast-bg",this.text.className="chromecast-bg__text",this.imageBg.className="chromecast-bg__image",this.element.appendChild(this.text),this.element.appendChild(this.imageBg),this.playerElement.appendChild(this.element)}},{key:"attachEvents",value:function(){this.element.addEventListener("click",this.togglePlayPause.bind(this)),y.on(f.Z.REMOTE_PLAYER_BUFFERING,this.updateText,this),y.on(f.Z.REMOTE_PLAYER_PLAYING,this.updateText,this),y.on(f.Z.REMOTE_PLAYER_PAUSED,this.updateText,this)}},{key:"show",value:function(){this.element.classList.add(sl)}},{key:"hide",value:function(){this.element.classList.remove(sl)}},{key:"updateText",value:function(e){var t=e.value,i=e.deviceName;this.text.innerHTML="".concat(t," on ").concat(i)}},{key:"togglePlayPause",value:function(){if(-1!==this.playerElement.className.indexOf("no-user-action")){y.emit(f.Z.USER_ACTION);return}if(P.get("playing")){y.emit(f.Z.PLAYER_PAUSE),P.set("playing",!1);return}y.emit(f.Z.PLAYER_PLAY),P.set("playing",!0)}}]),sh=o(function e(){var t;n(this,e),null!==(t=window.cast)&&void 0!==t&&t.framework&&(this.target={},this.castSession={})},[{key:"setTarget",value:function(e){this.target=e}},{key:"play",value:function(){var e;if(!P.get("playing")){if(!(null!==(e=this.target)&&void 0!==e&&e.isMediaLoaded())&&!P.get("remoteSourceLoading")){this.load();return}this.target.play(),y.emit(f.Z.PLAYER_PLAY)}}},{key:"pause",value:function(){P.get("playing")&&this.target.pause()}},{key:"stop",value:function(){this.target.stop()}},{key:"load",value:function(){P.set("remoteSourceLoading",!0),this.target.load()}},{key:"loaded",value:function(){this.target.setTimeUpdatesEvent(),P.set("remoteSourceLoading",!1),y.emit(f.Z.REMOTE_PLAYER_LOADING_END),this.play()}},{key:"setVolume",value:function(e){this.target.setVolume(e)}},{key:"setMute",value:function(e){if("on"===e){this.target.mute();return}this.target.unMute()}},{key:"seekTo",value:function(e){this.target.seekTo(e)}}]),su=o(function e(t,i){n(this,e),null!=t&&t.player&&null!=t&&t.core&&null!=i&&i.sourceUrl&&(this.player=t.player,this.core=t.core,this.isMobile=t.isMobile||!1,this.sourceUrl=i.sourceUrl,this.playerHandler=new sh,this.remoteModule=null,this.remoteEventsIds={},this.init())},[{key:"attachRemoteEvents",value:function(){P.set("chromecast",!0),h.addClass(this.core.element,"chromecast");var e=this.playerHandler,t=f.Z.PLAYER_PLAY,i=f.Z.PLAYER_PAUSE,s=f.Z.PLAYER_SET_VOLUME,n=f.Z.PLAYER_SET_CURRENT_TIME,r=f.Z.PLAYER_SET_QUALITY;this.remoteEventsIds.setVolume=y.on(s,e.setVolume.bind(e)),this.remoteEventsIds.setCurrentTime=y.on(n,e.seekTo.bind(e)),this.remoteEventsIds.play=y.on(t,e.play.bind(e)),this.remoteEventsIds.pause=y.on(i,e.pause.bind(e)),this.remoteEventsIds.quality=y.on(r,e.load.bind(e)),this.remoteEventsIds.mute=y.on(f.Z.MUTE_CLICK,e.setMute.bind(e)),y.emit(f.Z.USER_ACTION),y.emit(f.Z.USER_ACTION_BLOCK)}},{key:"detachRemoteEvents",value:function(){P.set("chromecast",!1),h.removeClass(this.core.element,"chromecast");var e=f.Z.PLAYER_PLAY,t=f.Z.PLAYER_PAUSE,i=f.Z.PLAYER_SET_VOLUME,s=f.Z.PLAYER_SET_CURRENT_TIME,n=f.Z.PLAYER_SET_QUALITY;y.off(e,this.remoteEventsIds.play),y.off(t,this.remoteEventsIds.pause),y.off(i,this.remoteEventsIds.setVolume),y.off(s,this.remoteEventsIds.setCurrentTime),y.off(n,this.remoteEventsIds.quality),y.off(f.Z.MUTE_CLICK,this.remoteEventsIds.mute),y.emit(f.Z.USER_ACTION),y.emit(f.Z.USER_ACTION_UNBLOCK)}},{key:"init",value:function(){this.checkIsDeviceAvailable(),y.on(f.Z.REMOTE_PLAYER_USER_REQUEST,this.loadChromecastFramework.bind(this))}},{key:"loadChromecastFramework",value:function(){var e=this;this.isLoaded&&this.removeOldSource(),window.__onGCastApiAvailable=function(t){t&&(e.isLoaded=!0,e.initRealChromecast())},h.getScript(this.sourceUrl).catch(function(e){y.emit(f.Z.STATISTICS_UI,em.chromecast_libs_load_error),console.warn("Chromecast script loading error:",e),alert("Chromecast error occured, please, try again")})}},{key:"removeOldSource",value:function(){document.querySelector('script[src="'.concat(this.sourceUrl,'"]')).remove()}},{key:"checkIsDeviceAvailable",value:function(){var e=null;try{e=new window.PresentationRequest("cast:CC1AD845")}catch(e){return!1}if(!e)return!1;navigator.presentation.defaultRequest=e,e.getAvailability().then(function(e){e.addEventListener("change",function(){e.value&&y.emit(f.Z.REMOTE_PLAYER_DEVICE_AVAILABLE)})}).catch(function(e){console.warn("Presentation availability not supported, "+e.name+": "+e.message)})}},{key:"initRealChromecast",value:function(){if(!(null!==(e=window.cast)&&void 0!==e&&e.framework)||!window.chrome){y.emit(f.Z.STATISTICS_UI,em.chromecast_framework_lib_load_error),alert("Chromecast error occured, please, try again");return}y.emit(f.Z.REMOTE_PLAYER_CHROMECAST_LOADED),y.emit(f.Z.STATISTICS_UI,em.chromecast_libs_load_success);var e,t={},i=document.querySelector(".volume-bar .bar .filler"),s=document.querySelector(".volume-bar .bar .handle"),n=document.querySelector(".volume-controls .volume");t.receiverApplicationId=window.chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,t.autoJoinPolicy=window.chrome.cast.AutoJoinPolicy.PAGE_SCOPED,t.androidReceiverCompatible=!1,window.cast.framework.CastContext.getInstance().setOptions(t);var r=new window.chrome.cast.CredentialsData('{"userId": "abc"}');window.cast.framework.CastContext.getInstance().setLaunchCredentialsData(r),this.remotePlayer=new window.cast.framework.RemotePlayer,this.remotePlayerController=new window.cast.framework.RemotePlayerController(this.remotePlayer),this.remoteModule=new sa({playerHandler:this.playerHandler,remotePlayer:this.remotePlayer,remotePlayerController:this.remotePlayerController,core:this.core,volumeControls:{filler:i,handler:s,volumeElement:n}});var o=window.cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED;this.remotePlayerController.addEventListener(o,this.switchPlayer.bind(this)),this.chromecastBg=new sc(this.core.element),document.querySelector("google-cast-launcher").click()}},{key:"switchPlayer",value:function(){var e;if(P.get("ads")||P.get("ads_preload")){y.once(f.Z.ADS_ENDED,this.switchPlayer.bind(this)),P.get("playing")||y.emit(f.Z.PLAYER_PLAY);return}if(y.emit(f.Z.PLAYER_PAUSE),P.set("playing",!1),null!==(e=window.cast)&&void 0!==e&&e.framework){if(this.remotePlayer.isConnected&&this.remoteModule){this.chromecastBg.show(),this.attachRemoteEvents(),this.remoteModule.init(),y.emit(f.Z.REMOTE_PLAYER_SESSION_START);return}this.remotePlayer.isConnected||this.remotePlayerController.stop()}this.chromecastBg.hide(),this.detachRemoteEvents(),y.emit(f.Z.REMOTE_PLAYER_SESSION_END),y.emit(f.Z.PLAYER_SET_VOLUME,this.core.capabilities.mobile?1:this.core.videoElement.volume),y.emit(f.Z.PLAYER_SET_CURRENT_TIME,P.get("currentTime")),P.get("ended")||y.emit(f.Z.PLAYER_PLAY)}}]),sd={pauseSpotContainer:"b0567-pauseSpotContainer",overlay:"b0567-overlay",centered:"b0567-centered",close:"b0567-close",xplayer:"xplayer","x-plain":"x-plain","xplayer-settings-menu-opened":"xplayer-settings-menu-opened","xplayer-share-menu-opened":"xplayer-share-menu-opened","overlay-menu-opened":"overlay-menu-opened","xplayer-ads":"xplayer-ads","xplayer-ads-preload":"xplayer-ads-preload"};function sm(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function sp(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sm(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var sE=[iW],sv=[tL,t_,tk,tU,tR,tP,tO],s_=o(function e(t,i,s){n(this,e);var r,o={preventFirstPlay:!!(s.ads&&!er(s.ads.vastUrls))};if(this.core=new e_(t,sp(sp({},i),o),s),this.events=f.Z,"none"!==this.core.type){if("plain"===i.version){s.poster.shouldRemovePoster=!0,this.loadPlainPlugins(s);return}if(this.core.emit(f.Z.PLAYER_ON_INIT),this.ads=new iN(this.core,iF,s),this.bannerBottom=new tn(this.core,s),this.loader=new ej(this.core),this.subscribe=new td(this.core,s),this.core.autoplay){this.core.once(f.Z.PLAYER_ON_LOADED_DATA,this.loadPlugins.bind(this,s)),this.core.once(f.Z.PLAYER_ON_ERROR,this.loadMainPlugins.bind(this,s));return}this.loadPlugins(s),this.core.capabilities.chrome&&null!=s&&null!==(r=s.chromecast)&&void 0!==r&&r.sourceUrl&&(this.chromecast=new su({player:this,core:this.core},s.chromecast)),this.cssModules={}}},[{key:"loadPlainPlugins",value:function(e){this.banner=new e4(this.core,sp(sp({},e),{bannerPauseSpotClassNames:sd})),this.poster=new ta(this.core,e)}},{key:"loadMainPlugins",value:function(e){var t=sp({duration:this.core.options.duration},null==e?void 0:e.spriteLoader);this.spriteLoader=new i4({spriteLoader:t}),this.progressBarSpriteViewer=new iz(this.core),this.backgroundSpriteViewer=new se(this.core),this.progressBar=new iQ(this.core,e,this.progressBarSpriteViewer),this.userSeekController=new i0({loader:this.spriteLoader,spritePreviewViewers:{progressBarSpriteViewer:this.progressBarSpriteViewer,backgroundSpriteViewer:this.backgroundSpriteViewer},showPreview:!!this.core.settings.preview}),this.background=new eb(this.core,e),this.hoverMenu=new iH(this.core,sE,e),this.aftershot=new ey(this.core,e),this.contextMenu=new eX(this.core,e),this.helpMenu=new e6(this.core),this.qualityList=new t$(this.core),this.playbackRateList=new tz(this.core),this.controlBar=new eW(this.core,e),this.settingsMenu=new tp(this.core,sv),this.core.options.hasDSA&&(this.dsaLabel=new sr(this.core))}},{key:"loadPlugins",value:function(e){this.loadPlainPlugins(e),this.loadMainPlugins(e),this.mouseControl=new eQ(this.core),this.keyboardControl=new i8(this.core,e),this.startButton=new e0(this.core),this.screenshot=new e2(this.core),this.tooltip=new to(this.core),this.subtitlesList=new tZ(this.core,e),this.subtitles=new so(this.core,e)}}]);window.XPlayer2=s_;var sf=s_},27484:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",i="minute",s="hour",n="week",r="month",o="quarter",a="year",l="date",c="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,i){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(i)+e},m="en",p={};p[m]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],i=e%100;return"["+e+(t[(i-20)%10]||t[i]||"th")+"]"}};var E=function(e){return e instanceof g},v=function e(t,i,s){var n;if(!t)return m;if("string"==typeof t){var r=t.toLowerCase();p[r]&&(n=r),i&&(p[r]=i,n=r);var o=t.split("-");if(!n&&o.length>1)return e(o[0])}else{var a=t.name;p[a]=t,n=a}return!s&&n&&(m=n),n||!s&&m},_=function(e,t){if(E(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new g(i)},f={s:d,z:function(e){var t=-e.utcOffset(),i=Math.abs(t);return(t<=0?"+":"-")+d(Math.floor(i/60),2,"0")+":"+d(i%60,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var s=12*(i.year()-t.year())+(i.month()-t.month()),n=t.clone().add(s,r),o=i-n<0,a=t.clone().add(s+(o?-1:1),r);return+(-(s+(i-n)/(o?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return({M:r,y:a,w:n,d:"day",D:l,h:s,m:i,s:t,ms:e,Q:o})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};f.l=v,f.i=E,f.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var g=function(){function d(e){this.$L=v(e.locale,null,!0),this.parse(e)}var m=d.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(f.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(h);if(s){var n=s[2]-1||0,r=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return f},m.isValid=function(){return this.$d.toString()!==c},m.isSame=function(e,t){var i=_(e);return this.startOf(t)<=i&&i<=this.endOf(t)},m.isAfter=function(e,t){return _(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<_(e)},m.$g=function(e,t,i){return f.u(e)?this[t]:this.set(i,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,o){var c=this,h=!!f.u(o)||o,u=f.p(e),d=function(e,t){var i=f.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return h?i:i.endOf("day")},m=function(e,t){return f.w(c.toDate()[e].apply(c.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},p=this.$W,E=this.$M,v=this.$D,_="set"+(this.$u?"UTC":"");switch(u){case a:return h?d(1,0):d(31,11);case r:return h?d(1,E):d(0,E+1);case n:var g=this.$locale().weekStart||0,y=(p<g?p+7:p)-g;return d(h?v-y:v+(6-y),E);case"day":case l:return m(_+"Hours",0);case s:return m(_+"Minutes",1);case i:return m(_+"Seconds",2);case t:return m(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(n,o){var c,h=f.p(n),u="set"+(this.$u?"UTC":""),d=((c={}).day=u+"Date",c[l]=u+"Date",c[r]=u+"Month",c[a]=u+"FullYear",c[s]=u+"Hours",c[i]=u+"Minutes",c[t]=u+"Seconds",c[e]=u+"Milliseconds",c)[h],m="day"===h?this.$D+(o-this.$W):o;if(h===r||h===a){var p=this.clone().set(l,1);p.$d[d](m),p.init(),this.$d=p.set(l,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d](m);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[f.p(e)]()},m.add=function(e,o){var l,c=this;e=Number(e);var h=f.p(o),u=function(t){var i=_(c);return f.w(i.date(i.date()+Math.round(t*e)),c)};if(h===r)return this.set(r,this.$M+e);if(h===a)return this.set(a,this.$y+e);if("day"===h)return u(1);if(h===n)return u(7);var d=((l={})[i]=6e4,l[s]=36e5,l[t]=1e3,l)[h]||1,m=this.$d.getTime()+e*d;return f.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return i.invalidDate||c;var s=e||"YYYY-MM-DDTHH:mm:ssZ",n=f.z(this),r=this.$H,o=this.$m,a=this.$M,l=i.weekdays,h=i.months,d=i.meridiem,m=function(e,i,n,r){return e&&(e[i]||e(t,s))||n[i].slice(0,r)},p=function(e){return f.s(r%12||12,e,"0")},E=d||function(e,t,i){var s=e<12?"AM":"PM";return i?s.toLowerCase():s};return s.replace(u,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return f.s(t.$y,4,"0");case"M":return a+1;case"MM":return f.s(a+1,2,"0");case"MMM":return m(i.monthsShort,a,h,3);case"MMMM":return m(h,a);case"D":return t.$D;case"DD":return f.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return m(i.weekdaysMin,t.$W,l,2);case"ddd":return m(i.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(r);case"HH":return f.s(r,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return E(r,o,!0);case"A":return E(r,o,!1);case"m":return String(o);case"mm":return f.s(o,2,"0");case"s":return String(t.$s);case"ss":return f.s(t.$s,2,"0");case"SSS":return f.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")})},m.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},m.diff=function(e,l,c){var h,u=this,d=f.p(l),m=_(e),p=(m.utcOffset()-this.utcOffset())*6e4,E=this-m,v=function(){return f.m(u,m)};switch(d){case a:h=v()/12;break;case r:h=v();break;case o:h=v()/3;break;case n:h=(E-p)/6048e5;break;case"day":h=(E-p)/864e5;break;case s:h=E/36e5;break;case i:h=E/6e4;break;case t:h=E/1e3;break;default:h=E}return c?h:f.a(h)},m.daysInMonth=function(){return this.endOf(r).$D},m.$locale=function(){return p[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),s=v(e,t,!0);return s&&(i.$L=s),i},m.clone=function(){return f.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},d}(),y=g.prototype;return _.prototype=y,[["$ms",e],["$s",t],["$m",i],["$H",s],["$W","day"],["$M",r],["$y",a],["$D",l]].forEach(function(e){y[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),_.extend=function(e,t){return e.$i||(e(t,g,_),e.$i=!0),_},_.locale=v,_.isDayjs=E,_.unix=function(e){return _(1e3*e)},_.en=p[m],_.Ls=p,_.p={},_},e.exports=t()},10285:function(e){var t;t=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,r={},o=function(e){return(e=+e)+(e>68?1900:2e3)},a=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),i=60*t[1]+(+t[2]||0);return 0===i?0:"+"===t[0]?-i:i}(e)}],c=function(e){var t=r[e];return t&&(t.indexOf?t:t.s.concat(t.f))},h=function(e,t){var i,s=r.meridiem;if(s){for(var n=1;n<=24;n+=1)if(e.indexOf(s(n,0,t))>-1){i=n>12;break}}else i=e===(t?"pm":"PM");return i},u={A:[n,function(e){this.afternoon=h(e,!1)}],a:[n,function(e){this.afternoon=h(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[i,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[s,a("seconds")],ss:[s,a("seconds")],m:[s,a("minutes")],mm:[s,a("minutes")],H:[s,a("hours")],h:[s,a("hours")],HH:[s,a("hours")],hh:[s,a("hours")],D:[s,a("day")],DD:[i,a("day")],Do:[n,function(e){var t=r.ordinal,i=e.match(/\d+/);if(this.day=i[0],t)for(var s=1;s<=31;s+=1)t(s).replace(/\[|\]/g,"")===e&&(this.day=s)}],M:[s,a("month")],MM:[i,a("month")],MMM:[n,function(e){var t=c("months"),i=(c("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(i<1)throw Error();this.month=i%12||i}],MMMM:[n,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw Error();this.month=t%12||t}],Y:[/[+-]?\d+/,a("year")],YY:[i,function(e){this.year=o(e)}],YYYY:[/\d{4}/,a("year")],Z:l,ZZ:l};return function(i,s,n){n.p.customParseFormat=!0,i&&i.parseTwoDigitYear&&(o=i.parseTwoDigitYear);var a=s.prototype,l=a.parse;a.parse=function(i){var s=i.date,o=i.utc,a=i.args;this.$u=o;var c=a[1];if("string"==typeof c){var h=!0===a[2],d=!0===a[3],m=a[2];d&&(m=a[2]),r=this.$locale(),!h&&m&&(r=n.Ls[m]),this.$d=function(i,s,n){try{if(["x","X"].indexOf(s)>-1)return new Date(("X"===s?1e3:1)*i);var o=(function(i){var s,n;s=i,n=r&&r.formats;for(var o=(i=s.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,i,s){var r=s&&s.toUpperCase();return i||n[s]||e[s]||n[r].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,i){return t||i.slice(1)})})).match(t),a=o.length,l=0;l<a;l+=1){var c=o[l],h=u[c],d=h&&h[0],m=h&&h[1];o[l]=m?{regex:d,parser:m}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},i=0,s=0;i<a;i+=1){var n=o[i];if("string"==typeof n)s+=n.length;else{var r=n.regex,l=n.parser,c=e.slice(s),h=r.exec(c)[0];l.call(t,h),e=e.replace(h,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var i=e.hours;t?i<12&&(e.hours+=12):12===i&&(e.hours=0),delete e.afternoon}}(t),t}})(s)(i),a=o.year,l=o.month,c=o.day,h=o.hours,d=o.minutes,m=o.seconds,p=o.milliseconds,E=o.zone,v=new Date,_=c||(a||l?1:v.getDate()),f=a||v.getFullYear(),g=0;a&&!l||(g=l>0?l-1:v.getMonth());var y=h||0,b=d||0,S=m||0,T=p||0;return E?new Date(Date.UTC(f,g,_,y,b,S,T+60*E.offset*1e3)):n?new Date(Date.UTC(f,g,_,y,b,S,T)):new Date(f,g,_,y,b,S,T)}catch(e){return new Date("")}}(s,c,o),this.init(),m&&!0!==m&&(this.$L=this.locale(m).$L),(h||d)&&s!=this.format(c)&&(this.$d=new Date("")),r={}}else if(c instanceof Array)for(var p=c.length,E=1;E<=p;E+=1){a[1]=c[E-1];var v=n.apply(this,a);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}E===p&&(this.$d=new Date(""))}else l.call(this,i)}}},e.exports=t()},96036:function(e){var t;t=function(){return function(e,t,i){var s=t.prototype,n=function(e){return e&&(e.indexOf?e:e.s)},r=function(e,t,i,s,r){var o=e.name?e:e.$locale(),a=n(o[t]),l=n(o[i]),c=a||l.map(function(e){return e.slice(0,s)});if(!r)return c;var h=o.weekStart;return c.map(function(e,t){return c[(t+(h||0))%7]})},o=function(){return i.Ls[i.locale()]},a=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,i){return t||i.slice(1)})},l=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):r(e,"months")},monthsShort:function(t){return t?t.format("MMM"):r(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):r(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):r(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):r(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return a(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return l.bind(this)()},i.localeData=function(){var e=o();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(t){return a(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},i.months=function(){return r(o(),"months")},i.monthsShort=function(){return r(o(),"monthsShort","months",3)},i.weekdays=function(e){return r(o(),"weekdays",null,null,e)},i.weekdaysShort=function(e){return r(o(),"weekdaysShort","weekdays",3,e)},i.weekdaysMin=function(e){return r(o(),"weekdaysMin","weekdays",2,e)}}},e.exports=t()},29387:function(e){var t;t=function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(i,s,n){var r,o=function(e,i,s){void 0===s&&(s={});var n,r,o,a,l=new Date(e);return(void 0===(n=s)&&(n={}),(a=t[o=i+"|"+(r=n.timeZoneName||"short")])||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),t[o]=a),a).formatToParts(l)},a=function(t,i){for(var s=o(t,i),r=[],a=0;a<s.length;a+=1){var l=s[a],c=l.type,h=l.value,u=e[c];u>=0&&(r[u]=parseInt(h,10))}var d=r[3],m=r[0]+"-"+r[1]+"-"+r[2]+" "+(24===d?0:d)+":"+r[4]+":"+r[5]+":000",p=+t;return(n.utc(m).valueOf()-(p-=p%1e3))/6e4},l=s.prototype;l.tz=function(e,t){void 0===e&&(e=r);var i=this.utcOffset(),s=this.toDate(),o=s.toLocaleString("en-US",{timeZone:e}),a=Math.round((s-new Date(o))/1e3/60),l=n(o).$set("millisecond",this.$ms).utcOffset(-(15*Math.round(s.getTimezoneOffset()/15))-a,!0);if(t){var c=l.utcOffset();l=l.add(i-c,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||n.tz.guess(),i=o(this.valueOf(),t,{timeZoneName:e}).find(function(e){return"timezonename"===e.type.toLowerCase()});return i&&i.value};var c=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var i=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return c.call(i,e,t).tz(this.$x.$timezone,!0)},n.tz=function(e,t,i){var s=i&&t,o=i||t||r,l=a(+n(),o);if("string"!=typeof e)return n(e).tz(o);var c=function(e,t,i){var s=e-60*t*1e3,n=a(s,i);if(t===n)return[s,t];var r=a(s-=60*(n-t)*1e3,i);return n===r?[s,n]:[e-60*Math.min(n,r)*1e3,Math.max(n,r)]}(n.utc(e,s).valueOf(),l,o),h=c[0],u=c[1],d=n(h).utcOffset(u);return d.$x.$timezone=o,d},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(e){r=e}}},e.exports=t()},70178:function(e){var t;t=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,n,r){var o=n.prototype;r.utc=function(e){var t={date:e,utc:!0,args:arguments};return new n(t)},o.utc=function(t){var i=r(this.toDate(),{locale:this.$L,utc:!0});return t?i.add(this.utcOffset(),e):i},o.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var a=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=o.utcOffset;o.utcOffset=function(s,n){var r=this.$utils().u;if(r(s))return this.$u?0:r(this.$offset)?c.call(this):this.$offset;if("string"==typeof s&&null===(s=function(e){void 0===e&&(e="");var s=e.match(t);if(!s)return null;var n=(""+s[0]).match(i)||["-",0,0],r=n[0],o=60*+n[1]+ +n[2];return 0===o?0:"+"===r?o:-o}(s)))return this;var o=16>=Math.abs(s)?60*s:s,a=this;if(n)return a.$offset=o,a.$u=0===s,a;if(0!==s){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(o+l,e)).$offset=o,a.$x.$localOffset=l}else a=this.utc();return a};var h=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var u=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var d=o.diff;o.diff=function(e,t,i){if(e&&this.$u===e.$u)return d.call(this,e,t,i);var s=this.local(),n=r(e).local();return d.call(s,n,t,i)}}},e.exports=t()},35666:function(e){var t=function(e){"use strict";var t,i=Object.prototype,s=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function h(e,i,s,r){var o,a,l=Object.create((i&&i.prototype instanceof v?i:v).prototype);return n(l,"_invoke",{value:(o=new C(r||[]),a=d,function(i,n){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===i)throw n;return R()}for(o.method=i,o.arg=n;;){var r=o.delegate;if(r){var l=function e(i,s){var n=s.method,r=i.iterator[n];if(t===r)return s.delegate=null,"throw"===n&&i.iterator.return&&(s.method="return",s.arg=t,e(i,s),"throw"===s.method)||"return"!==n&&(s.method="throw",s.arg=TypeError("The iterator does not provide a '"+n+"' method")),E;var o=u(r,i.iterator,s.arg);if("throw"===o.type)return s.method="throw",s.arg=o.arg,s.delegate=null,E;var a=o.arg;return a?a.done?(s[i.resultName]=a.value,s.next=i.nextLoc,"return"!==s.method&&(s.method="next",s.arg=t),s.delegate=null,E):a:(s.method="throw",s.arg=TypeError("iterator result is not an object"),s.delegate=null,E)}(r,o);if(l){if(l===E)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===d)throw a=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=m;var c=u(e,s,o);if("normal"===c.type){if(a=o.done?p:"suspendedYield",c.arg===E)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(a=p,o.method="throw",o.arg=c.arg)}})}),l}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var d="suspendedStart",m="executing",p="completed",E={};function v(){}function _(){}function f(){}var g={};c(g,o,function(){return this});var y=Object.getPrototypeOf,b=y&&y(y(P([])));b&&b!==i&&s.call(b,o)&&(g=b);var S=f.prototype=v.prototype=Object.create(g);function T(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){var i;n(this,"_invoke",{value:function(n,r){function o(){return new t(function(i,o){!function i(n,r,o,a){var l=u(e[n],e,r);if("throw"===l.type)a(l.arg);else{var c=l.arg,h=c.value;return h&&"object"==typeof h&&s.call(h,"__await")?t.resolve(h.__await).then(function(e){i("next",e,o,a)},function(e){i("throw",e,o,a)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return i("throw",e,o,a)})}}(n,r,i,o)})}return i=i?i.then(o,o):o()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(e){if(e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(s.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}return{next:R}}function R(){return{value:t,done:!0}}return _.prototype=f,n(S,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:_,configurable:!0}),_.displayName=c(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,a,function(){return this}),e.AsyncIterator=A,e.async=function(t,i,s,n,r){void 0===r&&(r=Promise);var o=new A(h(t,i,s,n),r);return e.isGeneratorFunction(i)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(S),c(S,l,"Generator"),c(S,o,function(){return this}),c(S,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var s in t)i.push(s);return i.reverse(),function e(){for(;i.length;){var s=i.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(s,n){return a.type="throw",a.arg=e,i.next=s,n&&(i.method="next",i.arg=t),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else if(c){if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return(o.type=e,o.arg=t,r)?(this.method="next",this.next=r.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var s=i.completion;if("throw"===s.type){var n=s.arg;L(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,i,s){return this.delegate={iterator:P(e),resultName:i,nextLoc:s},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},60402:function(e,t,i){e.exports=i(35666)},90874:function(e,t){"use strict";t.Z={PLAYER_ON_CAN_PLAY:1,PLAYER_ON_CAN_PLAY_THROUGH:2,PLAYER_ON_DURATION_CHANGE:3,PLAYER_ON_ENDED:4,PLAYER_ON_ERROR:5,PLAYER_ON_LOADED_DATA:6,PLAYER_ON_LOAD_META_DATA:7,PLAYER_ON_LOAD_START:8,PLAYER_ON_PAUSE:9,PLAYER_ON_PLAY:10,PLAYER_ON_PLAYING:11,PLAYER_ON_PROGRESS:12,PLAYER_ON_RATECHANGE:13,PLAYER_ON_SEEKED:14,PLAYER_ON_SEEKING:15,PLAYER_ON_STALLED:16,PLAYER_ON_TIMEUPDATE:17,PLAYER_ON_VOLUME_CHANGE:18,PLAYER_ON_WAITING:19,PLAYER_ERROR_CONTROLLER_BLOCK:20,PLAYER_ERROR_CONTROLLER_UNBLOCK:21,PLAYER_ON_PREVENT_PLAY_UNBLOCK:22,PLAYER_ON_INIT:23,PLAYER_ON_FULLSCREEN_CHANGE:24,PLAYER_ON_SWIPE_START:25,PLAYER_ON_SWIPE_END:26,PLAYER_ON_SWIPE_PAUSE:27,PLAYER_ON_SWIPE_PAUSE_END:28,PLAYER_ON_SWIPING:29,PLAYER_ON_TOUCH_MOVE_END:30,PLAYER_ON_SWIPE_SEEK:31,PLAYER_ON_SWIPE_SEEK_END:32,PLAYER_ON_CHANGE_ORIENTATION:33,PLAYER_ORIENTATION_SET_FULLSCREEN:34,PLAYER_ON_RESIZE:35,PLAYER_ON_PROGRESS_BAR_MOVE:36,PLAYER_FULLSCREEN_FAILED:37,PLAYER_PLAY:101,PLAYER_PAUSE:102,PLAYER_SET_VOLUME:103,PLAYER_SET_AUTOPLAY:104,PLAYER_SET_SOURCE:105,PLAYER_FALLBACK_SOURCE:106,PLAYER_FALLBACK_SOURCE_FAIL:107,PLAYER_SET_PLAYBACK_RATE:108,PLAYER_BEFORE_SET_SOURCE:109,PLAYER_TOGGLE_FULLSCREEN:110,PLAYER_TOGGLE_LARGEMODE:111,PLAYER_SET_CURRENT_TIME:112,PLAYER_CHANGE_TIMING:113,PLAYER_ON_DECODER_ERROR:114,PLAYER_SET_PREVIEW:115,PLAYER_SET_SLOWMO:116,PLAYER_SET_QUALITY:117,PLAYER_SET_VIDEO_SOURCE:118,PLAYER_PLAY_FAILED:119,PLAYER_PAUSED:120,PLAYER_SET_LEFTY:121,PLAYER_PLAY_AUTOPLAY:122,PLAYER_PLAY_VIDEO_PROMISE_NOT_SUPPORTED:123,PLAYER_PLAY_SUCCESS:124,PLAYER_WIRELESS_CHANGED:125,PLAYER_SET_DOUBLE_TAP_MODE:126,PLAYER_PLAY_FAIL:127,PLAYER_SET_AV1_OPTION:128,PLAYER_MOMENTS_CHANGE_SOURCE:129,PLAYER_MOMENTS_VIDEO_READY_TO_PLAY:130,PLAYER_MOMENTS_PRELOAD_READY:131,PLAYER_MOMENTS_PRELOAD_ERROR:132,PLAYER_MOMENTS_VIDEO_ERROR:133,PLAYER_MOMENTS_VIDEO_FULLY_LOADED:134,PLAYER_MOMENTS_ON_PRELOAD_BUFFER_FILLED:135,PLAYER_MOMENTS_STOP_PRELOAD:136,PLAYER_MOMENTS_PRELOAD_SET_SOURCE:137,MOUSE_CLICK_GLOBAL:201,HELP_MENU_TOGGLE:301,SETTINGS_MENU_TOGGLE:402,SETTINGS_MENU_TOGGLED:403,SETTINGS_RENDER_QUALITY:404,USER_ACTION:501,NO_USER_ACTION:502,USER_ACTION_PAUSE:503,USER_ACTION_UNPAUSE:504,USER_ACTION_BLOCK:505,USER_ACTION_UNBLOCK:506,OVERLAY_MENU_TOGGLE:601,TABS_NUMBER_CHANGED:602,OVERLAY_MENU_TAB_OPEN:603,RELATED_REFRESH_CLICK:604,OVERLAY_ELEMENT_CLICK:605,SOURCE_TYPE_CHANGE:701,SOURCE_AUTO_UPDATE:702,SOURCE_CONTROLLER_ON_READY:703,SOURCE_CONTROLLER_ON_ERROR:704,PAUSE_ACTION_BLOCK:801,PAUSE_ACTION_UNBLOCK:802,SHOW_LOADER:803,FALLBACK_TO_IMAGE:901,PROGRESS_BAR_UPDATE:1001,PROGRESS_BAR_UPDATE_END:1002,PROGRESS_BAR_RESIZE:1003,PROGRESS_BAR_HANDLER_MOVE:1004,PROGRESS_BAR_VISUAL_UPDATE:1005,PLAYER_ERROR_CODE:1101,SHOW_STATUS:1201,CONTROLS_RESET:1301,CONTROLS_PREVIEW_CLICK:1302,CONTROLS_DOWNLOAD_CLICK:1303,CONTROLS_FAVORITE_CLICK:1304,SETTINGS_MENU_OPEN:1305,CONTROLS_FULLSCREEN_CLICK:1306,SHARE_MENU_OPEN:1401,ADS_STARTED:1601,ADS_ENDED:1602,ADS_PLAY:1603,ADS_BLOCK:1604,ADS_RESUME_PLAY:1605,ADS_SKIP:1606,ADS_ALLOW_SKIP:1607,ADS_UNBLOCK_BOTTOM_BANNER:1608,ADS_ON_LINK_CLICK:1609,ADS_COMPANION_READY:1610,TOOLTIP_UPDATE:1701,SOURCE_CONTROLLER_READY:1801,HLS_LOADED:1802,DASH_LOADED:1803,HLS_FRAG_LOADING:1804,HLS_FRAG_LOADED:1805,QUALITY_LIST_OPEN:1901,VR_CONTROLS_LIST_OPEN:1902,PLAYBACK_RATE_LIST_TOGGLE:1903,SUBTITLES_LIST_TOGGLE:1904,VR_CONTROLS_SET:2001,VR_CONTROLS_ADDED:2002,VR_CONTROLS_CHANGED:2003,VR_CONTROLS_MOVED:2004,VR_TRY_TOGGLE:2005,VR_ANIMATE_STOP:2006,VR_ANIMATE_START:2007,VR_TEXTURE_CLEAR:2008,VR_ADD_CROSSORIGIN:2009,VR_REMOVE_CROSSORIGIN:2010,VR_MODE_ENABLE:2011,VR_WEBGL_RENDERER_READY:2012,SUBSCRIBE_INIT:2101,SUBSCRIBE_SHOW:2102,SUBSCRIBE_CLICK_LOGO:2103,SUBSCRIBE_CLICK_SUBSCRIBE:2104,SUBSCRIBE_CLICK_UNSUBSCRIBE:2105,HOVER_ELEMENT_CLICK:2201,HOVER_LINK_CLICK:2202,HOVER_LINK_RENDERED:2203,DOWNLOAD_BUTTON_CLICK:2301,LINK_CLICK:2401,BANNER_BOTTOM_SHOW:2501,BANNER_RENDERED:2502,BANNER_BOTTOM_CLICK:2503,BANNER_BOTTOM_HIDE:2504,AFTERSHOT_CLOSE:2601,AFTERSHOT_DESTROY:2602,AFTERSHOT_RENDERED:2603,AFTERSHOT_SEND_UI_CLOSE:2604,REPORT_ISSUE_CLICK:2701,USER_SEEK_SET_CURRENT_TIME:2801,USER_SEEK_SHOW_PREVIEW:2802,USER_SEEK_HIDE_PREVIEW:2803,USER_SEEK_SET_CURRENT_TIME_DOUBLETAP:2804,USER_SEEK_SET_CURRENT_TIME_PROGRESS_BAR:2805,USER_SEEK_SET_CURRENT_TIME_SWIPE:2806,STATISTICS_UI:2900,VIEW_SUCCESS:2901,FULLSCREEN_BUTTON_CLICK:2902,FULLSCREEN_SWIPE:2903,MUTE_CLICK:2904,DOUBLE_TAP:2905,POSTER_CLICK:2906,PLAY_SMALL_BUTTON_CLICK:2907,PLAY_CENTER_BUTTON_CLICK:2908,SWAP_HANDS_BUTTON_CLICK:2909,SPRITE_LOAD:2910,SPRITE_LOAD_SUCCESS:2911,SPRITE_LOAD_ERROR:2912,REMOTE_PLAYER_STATE_CHANGED:3e3,REMOTE_PLAYER_LOADING_START:3001,REMOTE_PLAYER_LOADING_END:3002,REMOTE_PLAYER_BUFFERING:3003,REMOTE_PLAYER_PLAYING:3004,REMOTE_PLAYER_PAUSED:3005,REMOTE_PLAYER_SESSION_START:3006,REMOTE_PLAYER_SESSION_END:3007,REMOTE_PLAYER_USER_REQUEST:3008,REMOTE_PLAYER_CHROMECAST_LOADED:3009,REMOTE_PLAYER_DEVICE_AVAILABLE:3010,PLAYER_LINK_SPONSORED_SHOWN:3100,PLAYER_LINK_SPONSORED_CLICK:3101,SUBTITLES_SHOW:3200,SUBTITLES_HIDE:3201,SUBTITLES_HIDE_BUTTON_CLICK:3202,SUBTITLES_SHOW_BUTTON_CLICK:3203,SUBTITLES_SET_LANG:3204,SUBTITLES_SAVE_LANG:3205,SUBTITLES_SET_DEFAULT_LANG:3206,SUBTITLES_STATE_BY_BUTTON:3207,SUBTITLES_READY:3208,SUBTITLES_LOADED:3209,SUBTITLES_NO_AVAILABLE_TRACKS:3210,SUBTITLES_SHOWN:3211}},88972:function(){window.console||(window.console={log(){},error(){},info(){}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.map||(Array.prototype.map=function(e,t){let i,s,n;if(this==null)throw TypeError(" this is null or not defined");let r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw TypeError(`${e} is not a function`);for(arguments.length>1&&(i=t),s=Array(o),n=0;n<o;){var a,l;n in r&&(a=r[n],l=e.call(i,a,n,r),s[n]=l),n++}return s}),window.requestAnimationFrame||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.mozCancelAnimationFrame||function(e){clearTimeout(e)})},17061:function(e,t,i){var s=i(18698).default;function n(){"use strict";e.exports=n=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function u(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,i){return e[t]=i}}function d(e,t,i,s){var n,r,a=Object.create((t&&t.prototype instanceof E?t:E).prototype);return o(a,"_invoke",{value:(n=new L(s||[]),r="suspendedStart",function(t,s){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===t)throw s;return{value:void 0,done:!0}}for(n.method=t,n.arg=s;;){var o=n.delegate;if(o){var a=function e(t,i){var s=i.method,n=t.iterator[s];if(void 0===n)return i.delegate=null,"throw"===s&&t.iterator.return&&(i.method="return",i.arg=void 0,e(t,i),"throw"===i.method)||"return"!==s&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+s+"' method")),p;var r=m(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,p):o:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,p)}(o,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=m(e,i,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}})}),a}function m(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p={};function E(){}function v(){}function _(){}var f={};u(f,l,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==i&&r.call(y,l)&&(f=y);var b=_.prototype=E.prototype=Object.create(f);function S(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){var i;o(this,"_invoke",{value:function(n,o){function a(){return new t(function(i,a){!function i(n,o,a,l){var c=m(e[n],e,o);if("throw"!==c.type){var h=c.arg,u=h.value;return u&&"object"==s(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){i("next",e,a,l)},function(e){i("throw",e,a,l)}):t.resolve(u).then(function(e){h.value=e,a(h)},function(e){return i("throw",e,a,l)})}l(c.arg)}(n,o,i,a)})}return i=i?i.then(a,a):a()}})}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}throw TypeError(s(e)+" is not iterable")}return v.prototype=_,o(b,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:v,configurable:!0}),v.displayName=u(_,h,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,h,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,c,function(){return this}),t.AsyncIterator=T,t.async=function(e,i,s,n,r){void 0===r&&(r=Promise);var o=new T(d(e,i,s,n),r);return t.isGeneratorFunction(i)?o:o.next().then(function(e){return e.done?e.value:o.next()})},S(b),u(b,h,"Generator"),u(b,l,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),i=[];for(var s in t)i.push(s);return i.reverse(),function e(){for(;i.length;){var s=i.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,s){return o.type="throw",o.arg=e,t.next=i,s&&(t.method="next",t.arg=void 0),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],o=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var a=r.call(n,"catchLoc"),l=r.call(n,"finallyLoc");if(a&&l){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),k(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var s=i.completion;if("throw"===s.type){var n=s.arg;k(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:C(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},18698:function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},64687:function(e,t,i){var s=i(17061)();e.exports=s;try{regeneratorRuntime=s}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},11010:function(e,t,i){"use strict";function s(e,t,i,s,n,r,o){try{var a=e[r](o),l=a.value}catch(e){i(e);return}a.done?t(l):Promise.resolve(l).then(s,n)}function n(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var o=e.apply(t,i);function a(e){s(o,n,r,a,l,"next",e)}function l(e){s(o,n,r,a,l,"throw",e)}a(void 0)})}}i.d(t,{_:function(){return n}})},75766:function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{j:function(){return s}})},72253:function(e,t,i){"use strict";i.d(t,{_:function(){return n}});var s=i(75766);function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){(0,s.j)(e,t,i[t])})}return e}},14932:function(e,t,i){"use strict";function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);i.push.apply(i,s)}return i})(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}i.d(t,{_:function(){return s}})}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,i),r.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";let e,t,s,n,r,o,a,l,c,h,u,d,m,p,E,v;var _,f,g,y,b,S,T,A,k,L,C,P,R,O,w,N,D,I,U,M,x,Y,Z,B,V,G,F,H,$,W,K,j,q,Q,z,J,X,ee,et,ei,es,en,er,eo,ea,el,ec,eh,eu,ed,em,ep,eE,ev,e_,ef,eg,ey,eb,eS,eT,eA,ek,eL,eC,eP,eR,eO,ew,eN,eD,eI,eU,eM,ex,eY,eZ,eB,eV,eG,eF,eH,e$,eW,eK,ej,eq,eQ,ez,eJ,eX,e0,e1,e2,e3,e5,e6,e4,e9,e7,e8,te,tt,ti,ts,tn,tr,to,ta,tl,tc,th,tu,td,tm,tp,tE,tv,t_,tf,tg=i(72253),ty=i(31465),tb=i(14932);let tS=e=>e&&"object"==typeof e&&e.constructor===Object,tT=e=>tS(e)&&Object.keys(e).length>0,tA=e=>"string"==typeof e||e instanceof String,tk=e=>tA(e)&&e.length>0,tL=e=>"number"==typeof e&&Number.isFinite(e),tC=e=>tL(e)||tk(e)&&tL(Number(e)),tP=e=>"function"==typeof e,tR=e=>"object"==typeof e&&Array.isArray(e),tO=e=>tR(e)&&e.length>0,tw=e=>void 0===e,tN=e=>{if(!tC(e))return!1;let t=Number(e);return Number.isInteger(t)&&t>0};function tD(e){var t;let i=(null==e?void 0:e.name)||e,s=null===(t=globalThis.window.document)||void 0===t?void 0:t.cookie.match(RegExp(`(?:^|; )${i.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return s?decodeURIComponent(s[1]):void 0}function tI(e,t,i={},s={}){var n,r,o,a,l;if(!(null==e?void 0:e.name))throw Error("Cookie is undefined");if(tP(null==e?void 0:e.validate)&&!(null==e?void 0:e.validate(t))&&-1!==i.expires)throw TypeError(`Invalid value "${t}" for cookie "${e.name}"`);let c={path:"/",domain:`.${null===(a=window)||void 0===a?void 0:null===(o=a.location)||void 0===o?void 0:null===(r=o.hostname)||void 0===r?void 0:null===(n=r.split)||void 0===n?void 0:n.call(r,".").slice(-2).join(".")}`,expires:7},h=null==e?void 0:e.name,u=(0,tg._)({},c,i),{expires:d}=u;if(!("expires"in i)&&"ttl"in e&&(d=e.ttl),0!==d){if(d instanceof Date)u.expires=d.toUTCString();else if(tL(d)){let e=new Date;e.setTime(e.getTime()+864e5*d),u.expires=e.toUTCString()}}((null==e?void 0:e.isEssential)||(null===(l=s.acceptedCookies)||void 0===l?void 0:l.nonEssential)||!(d>0))&&(document.cookie=Object.keys(u).reduce((e,t)=>{let i=u[t],s=function(e){if(!tA(e))throw TypeError("Input must be a string");return e.charAt(0).toLocaleUpperCase()+e.slice(1)}(t);return!1===i?e:!0===i?`${e}; ${s}`:`${e}; ${s}=${i}`},`${h}=${encodeURIComponent(t)}`))}function tU(e){return[-1,1].includes(e)}let tM={photo:"u-p-channels",video:"u-v-channels",story:"u-s-channels",pornstar:"u-c-channels"};(k||(k={})).ID={name:"UID",isEssential:!0},(L||(L={})).Retarget={name:"xhl",ttl:7,isEssential:!0},(C||(C={})).HidePWABanner={name:"hide_pwa_banner",ttl:7},(P||(P={})).searchMirrorsEnabled={name:"search_mirrors_enabled"},(R||(R={})).videoTitlesTranslation={name:"video_titles_translation",isEssential:!0},(f=O||(O={})).DevMain={name:"dev_main"},f.DevPort={name:"dev_port"},f.DevPrId={name:"dev_pr_id"},f.CountryCode={name:"COUNTRY_CODE"},(w||(w={})).XSubscribedChannels={name:"x_subscr_chn"},(g=N||(N={})).Retarget={name:"retarget_p",ttl:30,isEssential:!0},g.Seen=e=>({name:e||"popSeen"}),(y=D||(D={})).Shown={name:"dyltv-shown",ttl:1,isEssential:!0},y.ShowCounter={name:`${y.Shown.name}-counter`,ttl:365},(b=I||(I={})).History={ttl:30,build:e=>(0,tb._)((0,tg._)({},b.History),{name:`stats_h_v4_${e}`}),isEssential:!0},b.ClickData={name:"stats_cd",isEssential:!0},b.Uid={name:"stats_uid",isEssential:!0},(S=U||(U={})).AfterSignup={name:"after_signup_step"},S.AfterEmailVerified={name:"after_email_verify_step"},S.LoginOrigin={name:"login_origin"},(T=M||(M={})).ThumbSizePreference={name:"thumb_less",ttl:30,isEssential:!0,validate:tU},T.VideoPreview={name:"video_preview",ttl:30,isEssential:!0,validate:tU},(A=x||(x={})).Message={ttl:30,isEssential:!0,build:e=>(0,tb._)((0,tg._)({},A.Message),{name:`pr-msg-${e}`})},A.MessageClosed={ttl:30,isEssential:!0,build:e=>(0,tb._)((0,tg._)({},A.Message),{name:`pr-msg-closed-${e}`})},(Y||(Y={})).Filters={name:"x_notifications:filters",ttl:30};let tx=e=>{if(!(e in tM))throw Error("Cookie name is not allowed");return(0,tb._)((0,tg._)({},tx),{name:tM[e]})};(Z||(Z={})).Filters={name:"x_news:filters:tpl3",ttl:30,isEssential:!0};let tY=e=>(0,tb._)((0,tg._)({},tY),{name:`${e}-contest-announcement-hidden`}),tZ={name:"x_preroll",isEssential:!0},tB={name:"x_preroll_shown",isEssential:!0},tV={name:"v3-dst",ttl:30},tG=e=>(0,tb._)((0,tg._)({},tG),{name:`x_${e}`}),tF=e=>{if(!["ca-xhl","ca-xlivesex","ca-xhp","ca-xham"].includes(e))throw Error(`Cookie name ${e} is not allowed`);return(0,tb._)((0,tg._)({},tF),{name:e})},tH=e=>(0,tb._)((0,tg._)({},tH),{name:"xhpremium",ttl:e,isEssential:!0}),t$="stats_cd",tW="stats_cp",tK={},tj=globalThis.window.document&&(null===(B=globalThis.window.document)||void 0===B?void 0:B.location.href).replace(/^https?:\/\/[^/]+/,"").replace(/#.*$/,"").replace(/\?.*$/,"");(function(e){try{var t,i;let s=tD(I.ClickData);if(void 0===s)return!1;t=I.ClickData,i={path:tj},tI(t,"",(0,tb._)((0,tg._)({},i),{expires:-1}),{acceptedCookies:e});let n=JSON.parse(s);if(!n||"object"!=typeof n)return!1;return tK=n,!0}catch(e){return!1}})(window.initials.acceptedCookies)?function(){try{if(!tK||void 0===window.sessionStorage)return;sessionStorage.setItem(tW,tj),sessionStorage.setItem(t$,JSON.stringify(tK))}catch(e){}}():function(){try{if(void 0===window.sessionStorage)return;if(window.sessionStorage.getItem(tW)!==tj){sessionStorage.removeItem(tW),sessionStorage.removeItem(t$);return}let e=window.sessionStorage.getItem(t$);if(null==e)return;let t=JSON.parse(e);if(!t||"object"!=typeof t)return;tK=t}catch(e){}}(),(V=K||(K={})).blank="_blank",V.parent="_parent",V.self="_self",V.top="_top",(G=j||(j={})).ExtraSmall="extra-small",G.Small="small",G.Medium="medium",G.Big="big",(F=q||(q={})).nofollow="nofollow",F.noreferrer="noreferrer",F.noopener="noopener",F.bookmark="bookmark",F.previous="previous",F.next="next",F.tag="tag",(H=Q||(Q={})).primary="primary",H.secondary="secondary",H.enabled="enabled",H.disabled="disabled",H.invert="invert",H.black="black",H.white="white",H.unset="unset",H.extraBlue="extra-blue",H.extraGreen="extra-green",H.extraViolet="extra-violet",($=z||(z={})).A="a",$.Button="button",$.Div="div",$.Span="span",(W=J||(J={})).a="a",W.button="button",W.div="div",(X=eT||(eT={})).Female="female",X.Male="male",X.Transgender="transgender",(ee=eA||(eA={})).VR="vr",ee.HD="hd",ee.value4k="4k",(et=ek||(ek={})).Safe="safe",et.Porn="porn",(ei=eL||(eL={})).Photo="photo",ei.Video="video",ei.Comment="comment",ei.Profile="profile",ei.Image="image",(es=eC||(eC={})).Straight="straight",es.Gay="gay",es.Shemale="shemale",(en=eP||(eP={})).Day="light",en.Night="dark",en.Device="device",(er=eR||(eR={})).Any="any",er.Hd="hd",er.Vr="vr",er["4k"]="4k",er.Moment="moment",er.Video="video",(eo=eO||(eO={})).Video="video",eo.Moment="moment",(ea=ew||(ew={})).Featured="featured",ea.Recommended="recommended",ea.Added="added",ea.Rated="rated",ea.Viewed="viewed",ea.Commented="commented",(el=eN||(eN={})).Tag="tag",el.Category="category",el.Channel="channel",el.Person="person",el.Keyword="keyword",(ec=eD||(eD={})).Pornstar="pornstar",ec.Celeb="celeb",ec.Creator="creator",(eh=eI||(eI={})).US="US",eh.AF="AF",eh.AL="AL",eh.AE="AE",eh.DZ="DZ",eh.AS="AS",eh.AD="AD",eh.AO="AO",eh.AI="AI",eh.AQ="AQ",eh.AG="AG",eh.AR="AR",eh.AM="AM",eh.AW="AW",eh.AU="AU",eh.AT="AT",eh.AZ="AZ",eh.BS="BS",eh.BA="BA",eh.GB="GB",eh.BH="BH",eh.BD="BD",eh.BB="BB",eh.BY="BY",eh.BE="BE",eh.BZ="BZ",eh.BJ="BJ",eh.BM="BM",eh.BT="BT",eh.BO="BO",eh.BW="BW",eh.BV="BV",eh.NO="NO",eh.SJ="SJ",eh.BR="BR",eh.BN="BN",eh.BG="BG",eh.BF="BF",eh.BI="BI",eh.KH="KH",eh.CM="CM",eh.CA="CA",eh.CV="CV",eh.KY="KY",eh.CF="CF",eh.TD="TD",eh.CL="CL",eh.CN="CN",eh.CX="CX",eh.CC="CC",eh.CG="CG",eh.CO="CO",eh.KM="KM",eh.CD="CD",eh.CK="CK",eh.CR="CR",eh.CI="CI",eh.HR="HR",eh.CY="CY",eh.CZ="CZ",eh.CU="CU",eh.DK="DK",eh.DJ="DJ",eh.DO="DO",eh.TL="TL",eh.EC="EC",eh.EG="EG",eh.EU="EU",eh.SV="SV",eh.GQ="GQ",eh.ER="ER",eh.EE="EE",eh.ET="ET",eh.FK="FK",eh.FO="FO",eh.FJ="FJ",eh.FI="FI",eh.FR="FR",eh.GF="GF",eh.GP="GP",eh.YT="YT",eh.PM="PM",eh.PF="PF",eh.GA="GA",eh.GM="GM",eh.GE="GE",eh.DE="DE",eh.GH="GH",eh.GI="GI",eh.GR="GR",eh.GL="GL",eh.GD="GD",eh.GU="GU",eh.GT="GT",eh.GG="GG",eh.GN="GN",eh.GW="GW",eh.GY="GY",eh.HT="HT",eh.HN="HN",eh.HK="HK",eh.HU="HU",eh.IS="IS",eh.IN="IN",eh.ID="ID",eh.IR="IR",eh.IQ="IQ",eh.IE="IE",eh.IM="IM",eh.IL="IL",eh.IT="IT",eh.JM="JM",eh.JP="JP",eh.JE="JE",eh.JO="JO",eh.KZ="KZ",eh.KE="KE",eh.KI="KI",eh.KR="KR",eh.KP="KP",eh.KW="KW",eh.KG="KG",eh.LA="LA",eh.LV="LV",eh.LB="LB",eh.LS="LS",eh.LR="LR",eh.LY="LY",eh.LI="LI",eh.LT="LT",eh.LU="LU",eh.MO="MO",eh.MK="MK",eh.MG="MG",eh.MW="MW",eh.MY="MY",eh.MV="MV",eh.ML="ML",eh.MT="MT",eh.MH="MH",eh.MQ="MQ",eh.MR="MR",eh.MU="MU",eh.MX="MX",eh.FM="FM",eh.MD="MD",eh.MC="MC",eh.MN="MN",eh.ME="ME",eh.MS="MS",eh.MA="MA",eh.MZ="MZ",eh.MP="MP",eh.MM="MM",eh.NA="NA",eh.NR="NR",eh.NP="NP",eh.NL="NL",eh.AN="AN",eh.NC="NC",eh.NZ="NZ",eh.NI="NI",eh.NE="NE",eh.NG="NG",eh.NU="NU",eh.NF="NF",eh.OM="OM",eh.PK="PK",eh.PW="PW",eh.PA="PA",eh.PG="PG",eh.PS="PS",eh.PY="PY",eh.PE="PE",eh.PH="PH",eh.PN="PN",eh.PL="PL",eh.PT="PT",eh.PR="PR",eh.QA="QA",eh.RE="RE",eh.RO="RO",eh.RU="RU",eh.RW="RW",eh.SH="SH",eh.LC="LC",eh.SM="SM",eh.SA="SA",eh.SN="SN",eh.RS="RS",eh.SC="SC",eh.SL="SL",eh.SG="SG",eh.SK="SK",eh.SI="SI",eh.SB="SB",eh.SO="SO",eh.ZA="ZA",eh.GS="GS",eh.ES="ES",eh.LK="LK",eh.KN="KN",eh.SR="SR",eh.SZ="SZ",eh.SE="SE",eh.CH="CH",eh.ST="ST",eh.SD="SD",eh.SY="SY",eh.TW="TW",eh.TJ="TJ",eh.TZ="TZ",eh.TH="TH",eh.TG="TG",eh.TK="TK",eh.TO="TO",eh.TN="TN",eh.TR="TR",eh.TC="TC",eh.TT="TT",eh.TM="TM",eh.TV="TV",eh.UG="UG",eh.UA="UA",eh.UY="UY",eh.UZ="UZ",eh.VU="VU",eh.VA="VA",eh.VC="VC",eh.VE="VE",eh.VN="VN",eh.VG="VG",eh.VI="VI",eh.EH="EH",eh.WS="WS",eh.WF="WF",eh.YE="YE",eh.ZM="ZM",eh.ZW="ZW",(eu=eU||(eU={})).Desktop="desktop",eu.Mobile="mobile",eu.Amp="amp",(ed=eM||(eM={})).Desktop="desktop",ed.Mobile="mobile",ed.Tablet="tablet",ed.Console="console",ed.TV="tv",ed.UnknownOther="unknown/other",(em=ex||(ex={})).enUs="en-us",em.idId="id-id",em.csCz="cs-cz",em.deDe="de-de",em.esEs="es-es",em.frFr="fr-fr",em.itIt="it-it",em.nlNl="nl-nl",em.plPl="pl-pl",em.ptPt="pt-pt",em.ptBr="pt-br",em.roRo="ro-ro",em.svSe="sv-se",em.viVn="vi-vn",em.trTr="tr-tr",em.ruRu="ru-ru",em.ukUa="uk-ua",em.hiIn="hi-in",em.zhCn="zh-cn",em.jaJp="ja-jp",em.thTh="th-th",em.koKr="ko-kr",(ep=eY||(eY={})).Ml="ml",ep.User="user",ep.Admin="admin",(eE=eZ||(eZ={})).blank="_blank",eE.parent="_parent",eE.self="_self",eE.top="_top",(ev=eB||(eB={})).mainPage="mainPage",ev.mainPageAmp="mainPage-amp",ev.newestPage="newestPage",ev.newestPageAmp="newestPage-amp",ev.bestPage="bestPage",ev.bestPageAmp="bestPage-amp",ev.index="index",ev.recent="recent",ev.pornRadar="porn-radar",ev.allTime="all-time",ev.geo="geo",ev.newest="newest",ev.best="best",ev.pornstarPage="pornstarPage",ev.pornstarPageAmp="pornstarPage-amp",ev.celebrityPage="celebrityPage",ev.amateurPage="amateurPage",ev.categoryPage="categoryPage",ev.categoryPageAmp="categoryPage-amp",ev.channelPage="channelPage",ev.tagPage="tagPage",ev.person="person",ev.pornstar="pornstar",ev.celebrity="celebrity",ev.creator="creator",ev.category="category",ev.channel="channel",ev.tag="tag",ev.allCategories="allCategories",ev.allCategoriesAmp="allCategoriesAmp",ev.allChannels="allChannels",ev.allChannelsAmp="allChannelsAmp",ev.allPornstars="allPornstars",ev.allPornstarsAmp="allPornstarsAmp",ev.allCreators="allCreators",ev.allCreatorsAmp="allCreatorsAmp",ev.allCelebs="allCelebs",ev.allCelebsAmp="allCelebsAmp",ev.allPhotoCategoriesAmp="allPhotoCategoriesAmp",ev.personTop="person-top",ev.channelTop="channel-top",ev.photosPage="photosPage",ev.photosRankingPage="photosRankingPage",ev.photosPageAmp="photosPage-amp",ev.photoPage="photoPage",ev.photoPageAmp="photoPage-amp",ev.videoPage="videoPage",ev.videoPageAmp="videoPage-amp",ev.videoPageGoogle="videoPage-google",ev.embeddedVideo="embedded-video",ev.video="video",ev.related="related",ev.searchResultsPage="searchResultsPage",ev.searchResultsPageAmp="searchResultsPage-amp",ev.search="search",ev.userPage="userPage",ev.modelsProfilePage="modelsProfilePage",ev.user="user",ev.datingPage="datingPage",ev.messagesPage="messagesPage",ev.storyPage="storyPage",ev.storyPageAmp="storyPage-amp",ev.otherPages="otherPages",ev.awardsPage="awardsPage",ev.unknown="unknown",(e_=eV||(eV={})).Video="video",e_.Photo="photo",e_.User="user",(ef=eG||(eG={})).Input="input",ef.File="file",ef.Checkbox="checkbox",ef.Textarea="textarea",ef.Select="select",(eg=eF||(eF={}))[eg.Deleted=0]="Deleted",eg[eg.WaitForAdmin=1]="WaitForAdmin",eg[eg.Public=2]="Public",eg[eg.NotConverted=3]="NotConverted",eg[eg.Wait=4]="Wait",eg[eg.NotConverted2=5]="NotConverted2",eg[eg.Private=6]="Private",eg[eg.Doutful=7]="Doutful",eg[eg.Converting=8]="Converting",eg[eg.WaitForPublic=9]="WaitForPublic",eg[eg.ErrorConvert=10]="ErrorConvert",eg[eg.DeleteRepost=11]="DeleteRepost",(ey=eH||(eH={})).StopWords="stop-words",ey.LinkDetection="link-detection",ey.PhoneDetection="phone-detection",(eb=e$||(e$={})).High="high",eb.Low="low",(eS=eW||(eW={})).Video="video",eS.Gallery="gallery",(eK=e0||(e0={})).Index="index",eK.Recent="recent",eK.PornRadar="porn-radar",eK.AllTime="all-time",eK.Geo="geo",eK.Newest="newest",eK.Pornstar="pornstar",eK.Celebrity="celebrity",eK.Creator="creator",eK.Category="category",eK.Channel="channel",eK.Tag="tag",eK.Person="person",eK.Best="best",eK.Search="search",eK.Video="video",eK.User="user",eK.Related="related",eK.PersonTop="person-top",eK.ChannelTop="channel-top",eK.Unknown="unknown",(ej=e1||(e1={})).Recent="recent",ej.PornRadar="porn-radar",ej.AllTime="all-time",ej.Mono="mono",ej.Geo="geo",ej.Newest="newest",ej.Moments="moments",ej.Trending="trending",ej.Recommended="recommended",ej.Best="best",ej.Related="related",ej.Relevant="relevant",ej.Extension="extension",ej.LinkingVertical="linking-vertical",ej.LinkingCategories="linking-categories",ej.LinkingChannels="linking-channels",ej.LinkingPersons="linking-persons",ej.LinkingCreators="linking-creators",ej.LinkingSearch="linking-search",ej.RelatedVideo="related-video",ej.RelatedRecommended="related-recommended",ej.RelatedChannel="related-channel",ej.RelatedPerson="related-person",ej.RelatedCreator="related-creator",ej.RelatedProducer="related-producer",ej.Publisher="publisher",ej.Promo="promo",ej.Unknown="unknown",(eq=e2||(e2={})).Category="category",eq.Person="person",eq.Tag="tag",eq.Channel="channel",eq.Unknown="unknown",(eQ=e3||(e3={})).Video="video",eQ.ShowMore="show_more",eQ.LinkingLink="linking_link",eQ.LinkingSubscribeBtn="linking_subscribe_btn",eQ.CategoryMenuLink="category_menu_link",eQ.ChannelLink="channel_link",eQ.PornstarLink="pornstar_link",eQ.VideoLandingLink="video_landing",eQ.Gallery="gallery",eQ.Photo="photo",eQ.Unknown="unknown",(ez=e5||(e5={})).View="view",ez.Click="click",ez.ViewSuccess="view_success",ez.Subscribe="subscribe",ez.Unsubscribe="unsubscribe",(eJ=e6||(e6={}))[eJ.Unknown=0]="Unknown",eJ[eJ.Video=1]="Video",eJ[eJ.Moment=2]="Moment",(eX=e4||(e4={})).Video="video",eX.Thumb="thumb";var tq=i(11010);(e9=e7||(e7={})).Get="GET",e9.Post="POST",e9.Put="PUT",e9.Patch="PATCH",e9.Delete="DELETE",e9.Head="HEAD",e9.Options="OPTIONS";let tQ="stats_tkn",tz=()=>tQ in(window.initials||{})?window.initials[tQ]:null,tJ=["collector"];function tX(e,t){var i,s,n,r;let o;return JSON.stringify((r=(0,tg._)({},t&&null!==(n=null===(s=window.initials)||void 0===s?void 0:null===(i=s.appContext)||void 0===i?void 0:i.collectorData)&&void 0!==n?n:{},e),o={},Object.keys(r).forEach(e=>{let t;t3(e,"str.")||t3(e,"int.")||t3(e,"float.")?!([void 0,null].includes(t=r[e])||Array.isArray(t)&&1===t.length&&[void 0,null].includes(t[0]))&&("object"!=typeof t||Array.isArray(t))&&(o.custom||(o.custom={}),o.custom[e]=Array.isArray(t)?t:[t]):o[e]=r[e]}),o))}function t0(e,t){return t1.apply(this,arguments)}function t1(){return(t1=(0,tq._)(function*(e,t,i=!0){return navigator.sendBeacon?(navigator.sendBeacon(t2(`?log=${e}`),tX(t,i)),Promise.resolve()):fetch(t2(`?log=${e}`),{method:e7.Post,headers:new Headers({"content-type":"application/json"}),credentials:"include",cache:"no-cache",body:tX(t,i)}).catch(e=>console.warn(e))})).apply(this,arguments)}function t2(e=""){if("string"!=typeof e)throw TypeError("path must be a string");let t=window.location.hostname.split(/\./).slice(-2).join("."),[i]=tJ;if(tJ.length>1){let e=Math.min(Math.floor(Math.random()*tJ.length),tJ.length-1);i=tJ[e]}return function(e){let t=tz();if(!t)return e;let i=`${tQ}=${encodeURIComponent(t)}`;return e.includes(i)?e:`${e}${e.includes("?")?"&":"?"}${i}`}(`//${i}.${t}/${e.replace(/^\//,"")}`)}let t3=(e,t)=>e.startsWith(t);function t5(e){return(t5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t6(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function t4(){}function t9(e){return e()}function t7(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(null==e){var n,r=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return t6(e,void 0);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t6(e,void 0):void 0}}(e))){i&&(e=i);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(i);try{for(r.s();!(n=r.n()).done;)(0,n.value)(void 0)}catch(e){r.e(e)}finally{r.f()}return t4}var o=e.subscribe.apply(e,i);return o.unsubscribe?function(){return o.unsubscribe()}:o}function t8(e){var t;return t7(e,function(e){return t=e})(),t}function ie(e){var t=function(e,t){if("object"!==t5(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!==t5(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===t5(t)?t:String(t)}function it(e,t,i){return(t=ie(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ii="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function is(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),it(this,"_listeners","WeakMap"in ii?new WeakMap:void 0),it(this,"_observer",void 0),it(this,"options",void 0),this.options=e}return e=[{key:"observe",value:function(e,t){var i=this;return this._listeners.set(e,t),this._getObserver().observe(e,this.options),function(){i._listeners.delete(e),i._observer.unobserve(e)}}},{key:"_getObserver",value:function(){var e,i=this;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver(function(e){var s,n=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return is(e,void 0);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?is(e,void 0):void 0}}(e))){i&&(e=i);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(e);try{for(n.s();!(s=n.n()).done;){var r,o=s.value;t.entries.set(o.target,o),null===(r=i._listeners.get(o.target))||void 0===r||r(o)}}catch(e){n.e(e)}finally{n.f()}})}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ie(s.key),s)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t})().entries="WeakMap"in ii?new WeakMap:void 0;function io(e,t){return(io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}[].concat(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);i(64687);function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}"function"==typeof HTMLElement&&HTMLElement;var il=[];function ic(e,t){return{subscribe:ih(e,t).subscribe}}function ih(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t4,s=new Set;function n(i){if(((n=e)!=n?i==i:n!==i||n&&"object"===t5(n)||"function"==typeof n)&&(e=i,t)){var n,r,o=!il.length,a=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ia(e,void 0);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ia(e,void 0):void 0}}(e))){i&&(e=i);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(s);try{for(a.s();!(r=a.n()).done;){var l=r.value;l[1](),il.push(l,e)}}catch(e){a.e(e)}finally{a.f()}if(o){for(var c=0;c<il.length;c+=2)il[c][0](il[c+1]);il.length=0}}}function r(t){n(t(e))}return{set:n,update:r,subscribe:function(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t4,l=[o,a];return s.add(l),1===s.size&&(t=i(n,r)||t4),o(e),function(){s.delete(l),0===s.size&&t&&(t(),t=null)}}}}let iu={};function id(){if("storage"in iu)return iu.storage;try{window.localStorage.setItem("check","1"),window.localStorage.getItem("check"),window.localStorage.removeItem("check"),iu.storage=!0}catch(e){iu.storage=!1}return iu.storage}let im=new Promise(e=>{var t,i,s;if((null===(i=globalThis.window)||void 0===i?void 0:null===(t=i.document)||void 0===t?void 0:t.readyState)==="complete"){e();return}null===(s=globalThis.window.document)||void 0===s||s.addEventListener("DOMContentLoaded",()=>e())});new Promise(e=>{var t;null===(t=globalThis.window.document)||void 0===t||t.addEventListener("asyncLayoutHydrated",e)}),new Promise(e=>{var t;null===(t=globalThis.window.document)||void 0===t||t.addEventListener("asyncLocalesLoaded",e)}),new Promise(e=>{var t;null===(t=globalThis.window.document)||void 0===t||t.addEventListener("xplayerInitiated",e)}),(0,tq._)(function*({store:e,fieldName:t}){let i=()=>{};return new Promise(s=>{i=e.subscribe(e=>{e[t]&&(i(),s())})})}),(0,tq._)(function*({importer:e,chunkName:t,isRtl:i}){let s,n;let[{default:r}]=yield Promise.all([e,(n=i?`${t}.rtl.css`:`${t}.css`,s=window.assetsManifest[n])?s?new Promise((e,t)=>{var i;if(!s){t(),console.error("style URL is empty");return}let n=document.head.querySelector(`link[href='${s}']`);if(n){e();return}(n=document.createElement("link")).href=s,n.rel="stylesheet",n.crossOrigin="anonymous",null===(i=document.querySelector("head"))||void 0===i||i.appendChild(n),n.onload=()=>{e()}}):Promise.resolve():(console.warn(`Chunk not found: ${t}`),Promise.resolve())]);return r});let ip="object"==typeof self?self:globalThis,iE=(e,t)=>{let i=(t,i)=>(e.set(i,t),t),s=n=>{if(e.has(n))return e.get(n);let[r,o]=t[n];switch(r){case 0:case -1:return i(o,n);case 1:{let e=i([],n);for(let t of o)e.push(s(t));return e}case 2:{let e=i({},n);for(let[t,i]of o)e[s(t)]=s(i);return e}case 3:return i(new Date(o),n);case 4:{let{source:e,flags:t}=o;return i(new RegExp(e,t),n)}case 5:{let e=i(new Map,n);for(let[t,i]of o)e.set(s(t),s(i));return e}case 6:{let e=i(new Set,n);for(let t of o)e.add(s(t));return e}case 7:{let{name:e,message:t}=o;return i(new ip[e](t),n)}case 8:return i(BigInt(o),n);case"BigInt":return i(Object(BigInt(o)),n)}return i(new ip[r](o),n)};return s},iv=e=>iE(new Map,e)(0),{toString:i_}={},{keys:ig}=Object,iy=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let i=i_.call(e).slice(8,-1);switch(i){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},ib=([e,t])=>0===e&&("function"===t||"symbol"===t),iS=(e,t,i,s)=>{let n=(e,t)=>{let n=s.push(e)-1;return i.set(t,n),n},r=s=>{if(i.has(s))return i.get(s);let[o,a]=iy(s);switch(o){case 0:{let t=s;switch(a){case"bigint":o=8,t=s.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+a);t=null;break;case"undefined":return n([-1],s)}return n([o,t],s)}case 1:{if(a)return n([a,[...s]],s);let e=[],t=n([o,e],s);for(let t of s)e.push(r(t));return t}case 2:{if(a)switch(a){case"BigInt":return n([a,s.toString()],s);case"Boolean":case"Number":case"String":return n([a,s.valueOf()],s)}if(t&&"toJSON"in s)return r(s.toJSON());let i=[],l=n([o,i],s);for(let t of ig(s))(e||!ib(iy(s[t])))&&i.push([r(t),r(s[t])]);return l}case 3:return n([o,s.toISOString()],s);case 4:{let{source:e,flags:t}=s;return n([o,{source:e,flags:t}],s)}case 5:{let t=[],i=n([o,t],s);for(let[i,n]of s)(e||!(ib(iy(i))||ib(iy(n))))&&t.push([r(i),r(n)]);return i}case 6:{let t=[],i=n([o,t],s);for(let i of s)(e||!ib(iy(i)))&&t.push(r(i));return i}}let{message:l}=s;return n([o,{name:a,message:l}],s)};return r},iT=(e,{json:t,lossy:i}={})=>{let s=[];return iS(!(t||i),!!t,new Map,s)(e),s};function iA(e){return JSON.parse(JSON.stringify(e))}function ik(){return!globalThis.window||!0===globalThis.window.isSSR}"function"==typeof structuredClone||((e,t)=>iv(iT(e,t)));let iL="dataLayer";globalThis[iL]=globalThis[iL]||[];let iC=null,iP={};function iR(e,t=window[iL]){if(tT(e))return t.push((0,tg._)({},e))}var iO=i(90874);(e8=te||(te={})).Generic="generic",e8.Geo="geo",e8.Thumb="thumb",e8.GeoThumb="geoThumb",e8.Ml="ml",e8.Postitial="postitial";let iw=[];(function(e){function t(e){let t=ik()?null:window.localStorage;null==t||t.removeItem(e)}e.getItem=function(e,t=!1){let i=ik()?null:window.localStorage;try{let s=null==i?void 0:i.getItem(e);if(t)return s;return s?JSON.parse(s):void 0}catch(e){return console.error("Error while receiving value from local storage",e),null}},e.setItem=function(e,t,i=!1){let s=ik()?null:window.localStorage;if(i&&!tA(t)){console.error("invalid raw string passed: ",i);return}try{null==s||s.setItem(e,i&&tA(t)?t:JSON.stringify(t))}catch(e){console.error("Error while setting value in local storage",e)}},e.removeItem=t,e.cleanupUnused=function(){iw.forEach(e=>{t(e)})}})(tt||(tt={})),(ti=tn||(tn={})).statsEb="statsEb",ti.momentWatchedStats="momentWatchedStats",ti.playerVideoWatchStats="playerVideoWatchStats",ti.cookiesBannerClosed="cookiesBannerClosed",ti.uChannels="uChannels",ti.watchHistory="watchHistory",ti.crossVerDisabled="crossVerDisabled",ti.commentLikes="commentLikes",ti.adShareCreated="adShareCreated",ti.adSharePerformerCreated="adSharePerformerCreated",ti.sidebarUnauthVisited="sidebarUnauthVisited",ti.videoAdditionalVerificationSuccessSending="videoAdditionalVerificationSuccessSending",ti.xhlMdlClHist="xhl-mdl-cl-hist",ti.subscriptionTrigger="subscription_trigger",ti.subscriptionTriggerTags="subscription_trigger_tags",ti.statsHistoryStraight="stats_h_1",ti.statsHistoryGay="stats_h_2",ti.statsHistoryShemale="stats_h_3",ti.usrStatsLastCollected="usr-stats-last-collected",ti.claimed2021="claimed2021",ti.dialog="dialog",ti.ageVerification="ageVerification",ti.messagesSoundDisabled="messagesSoundDisabled",ti.alert="alert",ti.alertPersist="alertPersist",ti.deferredCollectorEvents="deferredCollectorEvents",ti.vpnGeoClosed="vpnGeoClosed",ti.popHistory="popHistory",ti.impressionNumberMainKey="cookieModalImpression",ti.impressionNumberCookieNoticeEuKey="cookiesNoticeEuImpression",ti.impressionNumberManageCookiesKey="manageCookiesDialogImpression",ti.twitter="twitter",ti.cookieAnnounceClosed="cookieAnnounceClosed",ti.CrossVerificationAdShareCreated="crossVerificationAdShareCreated",ti.exp1802SuggestShown="exp1802SuggestShown",ti.exp2601ShowMoreClicked="exp2601ShowMoreClicked",ti.RatingVideo="rating_video",ti.RatingPhoto="rating_photo",ti.session="session",ti.cache="cache",(ts=tr||(tr={})).report="report",ts.reportComment="report_commentModel";var iN=i(27484),iD=i(10285),iI=i(96036),iU=i(29387),iM=i(70178);(to=tl||(tl={})).Ads="xh-widgets-events",to.AdsV2="xh-widgets-events-v2",to.Custom="custom",to.FrontendGeneral="frontend-general",to.FrontendSpeedload="frontend-speedload",to.Gdpr="gdpr",to.Experiment="experiment",to.Linking="linking",to.PerformanceMetrics="performance-metrics",to.PlayerVideoWatch="player_video_watch",to.PlayerStartWatch="player-start-watch",to.PlayerFirstWatch="player-first-watch",to.UnitedImpression="united-impression",to.PhotoEvents="photo-events",to.ViewSuccess="view-success",to.DocsVerification="docs-verification",to.StatsBeta="stats-beta",to.PageUi="page_ui",to.XhlWidgetsEvents="xhl-widgets-events",to.MomentsEvents="moments-events",to.VerificationStartSession="verification_start_session",to.VerificationLivenessShown="verification_liveness_shown",to.VerificationLivenessSuccess="verification_liveness_success",to.VerificationLivenessFail="verification_liveness_fail",to.VerificationIdscanFrontSuccess="verification_idscan_front_success",to.VerificationIdscanFrontFail="verification_idscan_front_fail",to.VerificationIdscanBackSuccess="verification_idscan_back_success",to.VerificationIdscanBackFail="verification_idscan_back_fail",to.VerificationUserConfirm="verification_idscan_user_confirm",to.VerificationFinished="verification_finished",to.VerificationDataCollected="verification_data_collected",to.VerificationRestarted="verification_restarted",(ta=tc||(tc={})).Click="click",ta.Impression="impression";let ix=null===(tu=globalThis.window)||void 0===tu?void 0:tu.xhLocaleMissings,iY=new Set(ix),iZ=function(e,t,i){var s,n=i||{},r=n.noTrailing,o=void 0!==r&&r,a=n.noLeading,l=void 0!==a&&a,c=n.debounceMode,h=void 0===c?void 0:c,u=!1,d=0;function m(){s&&clearTimeout(s)}function p(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var a=this,c=Date.now()-d;function p(){d=Date.now(),t.apply(a,n)}function E(){s=void 0}!u&&(l||!h||s||p(),m(),void 0===h&&c>e?l?(d=Date.now(),o||(s=setTimeout(h?E:p,e))):p():!0!==o&&(s=setTimeout(h?E:p,void 0===h?e-c:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly;m(),u=!(void 0!==t&&t)},p}(500,()=>{let e={key:"missing_translation",custom:{"str.keys":[...iY]}};iY.clear(),function({data:e,samplingPercent:i=5,url:s=null===(th=window.location)||void 0===th?void 0:th.href}){t&&t<=1e4*i&&t0(tl.FrontendGeneral,{key:e.key,custom:(0,tg._)({"str.url":[s]},e.custom)})}({data:e})},{debounceMode:!1!==(void 0!==(_=({}).atBegin)&&_)});(null==ix?void 0:ix.length)&&iZ();let iB=tD({name:"NO_TRANSLATE"}),iV=tD({name:"SHOW_KEYS"});class iG{static translateWithIgnoreError(e,...t){return iG.translateKey(e,...t)}static translate(e,...t){let i=window.xhLocale||{};return!e||e in i||(function(e){if(iY.size>300&&iY.clear(),ik()){iY.add(`server.${e}`);return}iY.add(e),iZ()}(e),window.__DEV__&&console.error(`Translation for key ${e} not found`)),iG.translateKey(e,...t)}static translateKey(e,...t){let i=window.xhLocale||{};if(!e)return"";let s=e;if(!window.initials.isAgeVerified&&`${e}Blurred` in i&&(s=`${e}Blurred`),!(s in i))return this.makeReplacements(s,...t);let n=i[s];if("function"==typeof n&&(n=t&&"object"==typeof t[0]?i[s].apply(this,[t[0]]):i[s].apply(this,t)),iV)return`{${s}}`;let r=this.makeReplacements(n,...t);return iB?"*".repeat(r.length):r}static translateWithoutLog(e,...t){let i=window.xhLocale||{},s=null;return e in i?s=this.makeReplacements(i[e],...t):(i[e]=e,s=this.makeReplacements(e,...t)),s}static makeReplacements(e,...t){let i=`${e}`;return t&&t[0]&&"object"==typeof t[0]?Object.keys(t[0]).forEach(e=>{i=i.replace(RegExp(`\\%{${e}}`,"ig"),`${t[0][e]}`)}):t.forEach((e,t)=>{let s=RegExp(`\\%${t+1}\\$[sd]`,"ig"),n=RegExp("\\%[sd]","i");i=i.match(s)?i.replace(s,`${e}`):i.replace(n,`${e}`)}),i}}iG.translate,iG.translateWithIgnoreError;let iF="jp"===globalThis.window.xhLocaleName?"ja":globalThis.window.xhLocaleName||"en";iN.extend(iM),iN.extend(iU),iN.extend(iI),iN.extend(iD),iN.locale(iF);let iH=e=>tT(e)&&"id"in e&&tN(e.id)&&"ts"in e&&tN(e.ts),i$=[te.GeoThumb,te.Thumb,te.Geo,te.Generic],iW=e=>i$.reduce((t,i)=>{var s;return t+Number(null!==(s=e[i])&&void 0!==s?s:0)},0),iK=(e,t)=>{if(!e)return;let i=new Map(t.map(e=>[e.widgetName,e])),s=new Map,n=new Map,r=0,o=e.models.length,a=new Map(e.models.map(e=>[e.id,e]));e.widgetPositions.forEach(t=>{var l;let c;if(!i.has(t.name))return;let h=null!==(l=n.get(t.name))&&void 0!==l?l:0,u=i.get(t.name).count;if(h>=u)return;if(t.modelId&&a.has(t.modelId))c=a.get(t.modelId);else{if(r>=o){console.warn(`not enough models in resp: requested ${r}th in ${e.models.length} elements`);return}c=e.models[r%o],r++}if(!c){console.warn("unexpected model not found");return}let d=s.has(t.name)?s.get(t.name):Array(u).fill(null);d[t.position]=(0,tb._)((0,tg._)({},c),{source:te.Ml}),s.set(t.name,d),n.set(t.name,h+1)}),Array.from(i).forEach(([t,i])=>{var n;let a=i.count,l=null!==(n=s.get(t))&&void 0!==n?n:Array(a).fill(null);i.fixNonZeroModelOffset&&l.length===i.count+1&&null===l[0]&&(l=l.slice(1));let c=l.map(t=>{if(null===t){let t=e.models[r%o];return r++,t}return t});c.length!==a&&console.warn(`expected ${a}, but got ${c.length} models`),i.callback(c.length>a?c.slice(0,a):c)})},ij=e=>{var t,i;let s=null!==(i=null===(t=e.xhlMlSource)||void 0===t?void 0:t.intervalOverride)&&void 0!==i?i:3e5,n=[];return ic(null,t=>{let i=null,r=performance.now(),o=null,a=()=>{var i,s;let a=encodeURIComponent(JSON.stringify(function(e){let t;let i=(tR(t=tt.getItem(tn.xhlMdlClHist))?t:[]).filter(iH);if(0===i.length)return e;let s={};return tT(null==e?void 0:e.userExtra)&&(s=(0,tg._)({},null==e?void 0:e.userExtra)),s.clickedModels=i.map(e=>({id:e.id,ts:e.ts})),(0,tb._)((0,tg._)({},e),{userExtra:s})}((0,tb._)((0,tg._)({},null===(i=e.xhlMlSource)||void 0===i?void 0:i.payload),{suggestedModels:n}))));fetch(`${e.urls.camsWidgetMl}?body=${a}`).then((s=(0,tq._)(function*(e){o=performance.now();let i=yield e.json();"object"==typeof i.widgetPositions&&null!==i.widgetPositions&&Array.isArray(i.models)&&"object"==typeof i.meta&&null!==i.meta?(t({response:i,timing:Math.round(performance.now()-r)}),n=i.models.map(e=>e.id)):console.error("xhl ml response format error")}),function(e){return s.apply(this,arguments)})).catch(e=>{void 0===o&&(o=performance.now()),console.error("unexpected xhl ml error",e)})};return i=window.setInterval(a,s),a(),()=>{null!==i&&(window.clearInterval(i),i=null)}})},iq=e=>ic({[te.GeoThumb]:[],[te.Thumb]:[],[te.Geo]:[],[te.Generic]:[]},t=>{function i(){let i=[],r=[],o=[],a=[],{urls:l}=e,c=[];if(l.camsThumbWidget){let e=Object.fromEntries(new URLSearchParams(l.camsThumbWidget.substring(l.camsThumbWidget.indexOf("?"))));c.push(iz(l.camsThumbWidget,!1).then(t=>{r=t.map(t=>iQ(t,te.Thumb,e))}))}if(l.camsThumbWidgetGeo){let e=Object.fromEntries(new URLSearchParams(l.camsThumbWidgetGeo.substring(l.camsThumbWidgetGeo.indexOf("?"))));c.push(iz(l.camsThumbWidgetGeo,!1).then(t=>{i=t.map(t=>iQ(t,te.GeoThumb,e))}))}if(l.camsGeoWidget){let e=Object.fromEntries(new URLSearchParams(l.camsGeoWidget.substring(l.camsGeoWidget.indexOf("?"))));c.push(iz(l.camsGeoWidget,!0).then(t=>{o=t.map(t=>iQ(t,te.Geo,e))}))}let h=l.camsWidget||l.camsWidgetBase||"https://gga.xhamster.com/api/models",u=Object.fromEntries(new URLSearchParams(h.substring(h.indexOf("?"))));return c.push(iz(h).then(e=>{a=e.map(e=>iQ(e,te.Generic,u))})),s=performance.now(),n=void 0,Promise.all(c).then(()=>{n=performance.now();let e=[];r.length&&(e=e.concat(r.map(e=>e.id))),i.length&&(e=e.concat(i.map(e=>e.id))),o.length&&(o=o.filter(({id:t})=>!e.includes(t)),e=e.concat(o.map(e=>e.id))),a=a.filter(({id:t})=>!e.includes(t))}).then(()=>{t({generic:a,geo:o,thumb:r,geoThumb:i})})}i();let r=window.setInterval(i,6e4);return function(){clearTimeout(r)}});function iQ(e,t,i){return(0,tb._)((0,tg._)({},e),{source:t,collectorData:{sort:i.sortBy,tags:i.tag}})}function iz(e,t=!0){var i;return fetch(e).then((i=(0,tq._)(function*(e){let i=yield e.json(),s=(null==i?void 0:i.models)||[];return t&&(s=function(e){let t=e.length;for(;t;){let i=Math.floor(Math.random()*t--),s=e[t];e[t]=e[i],e[i]=s}return e}(s)),s}),function(e){return i.apply(this,arguments)})).catch(e=>(console.trace("xhl request has failed",e),[]))}function iJ(e,t,i){if(null===t)return[];let s=t.generic,n=s+i;if(n>e.generic.length){let n=i-(e.generic.length-s);return t.generic=n,e.generic.slice(s).concat(e.generic.slice(0,n))}return t.generic=n,e.generic.slice(s,n)}function iX(e,t){if(null===t)return[];let i=t.geo;return e.geo[i]?(t.geo=i+1,[e.geo[i]]):iJ(e,t,1)}function i0(e,t){if(null===t)return[];let i=t.thumb;return e.thumb[i]?(t.thumb++,[e.thumb[i]]):iJ(e,t,1)}function i1(e,t){if(null===t)return[];let i=t.geoThumb;return e.geoThumb[i]?(t.geoThumb++,[e.geoThumb[i]]):i0(e,t)}let i2=globalThis.window.initials;globalThis.window.xhlStore?(r=globalThis.window.xhlStore.storeFactory,o=globalThis.window.xhlStore.trackingEnabledStore):(r=tS(null==i2?void 0:i2.xhlMlSource)?(a=null,l=[],c=null,{getStore:(e,t)=>{if(0===Object.keys(t).length)throw Error("at least one count needs to be set");return null===a&&(a=ij(i2)),function(e,t,i){var s=!Array.isArray(e),n=s?[e]:e;if(!n.every(Boolean))throw Error("derived() expects stores as input, got a falsy value");var r=t.length<2;return ic(i,function(e,i){var o=!1,a=[],l=0,c=t4,h=function(){if(!l){c();var n=t(s?a[0]:a,e,i);r?e(n):c="function"==typeof n?n:t4}},u=n.map(function(e,t){return t7(e,function(e){a[t]=e,l&=~(1<<t),o&&h()},function(){l|=1<<t})});return o=!0,h(),function(){(function(e){e.forEach(t9)})(u),c(),o=!1}})}(a,(i,s)=>{if(!i)return s([]);let n={callback:s,widgetName:e,count:iW(t),fixNonZeroModelOffset:t.fixNonZeroModelOffset};return l.push(n),c||(c=window.setTimeout(()=>{iK(i.response,l),c=null},5)),()=>{0===(l=l.filter(e=>e!==n)).length&&(null!==c&&(window.clearTimeout(c),c=null),a=null)}},[])},getTiming:()=>{var e;return a?null===(e=t8(a))||void 0===e?void 0:e.timing:void 0},getHistoryLength:()=>{var e,t,i;return a?null===(i=t8(a))||void 0===i?void 0:null===(t=i.response)||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.historyLength:void 0},getAbortedCount:()=>void 0}):(h=()=>({[te.GeoThumb]:0,[te.Thumb]:0,[te.Geo]:0,[te.Generic]:0}),u=null,d=[],m=null,p=null,E=e=>e.subscribe(e=>{u=h(),d.forEach(({callback:t,counts:i})=>{let s=[];i.geoThumb&&(s=s.concat(i1(e,u))),i.thumb&&(s=s.concat(i0(e,u))),i.geo&&(s=s.concat(iX(e,u))),void 0!==i.generic&&i.generic>0&&(s=s.concat(iJ(e,u,i.generic))),t(s)})}),{getStore:(e,t)=>{if(0===Object.keys(t).length)throw Error("at least one count needs to be set");null===m&&(h(),p=E(m=iq(i2)));let i=t8(m),s=[];return t.geoThumb&&(s=s.concat(i1(i,u))),t.thumb&&(s=s.concat(i0(i,u))),t.geo&&(s=s.concat(iX(i,u))),void 0!==t.generic&&t.generic>0&&(s=s.concat(iJ(i,u,t.generic))),ic(s,i=>(d.push({callback:i,widgetName:e,counts:t}),()=>{0===(d=d.filter(t=>e!==t.widgetName)).length&&(p&&p(),u=null,m=null,p=null)}))},getTiming:function(){if(void 0!==n)return Math.round(n-s)},getHistoryLength:()=>void 0,getAbortedCount:()=>void 0}),o=function(e=!1){let t=ih(e);return t.toggle=()=>t.update(e=>!e),t}(!0),globalThis.window.xhlStore={storeFactory:r,trackingEnabledStore:o});let i3=()=>({expires:.02,domain:function(){if(!document.domain.length)return".xhamster.com";let e=document.domain.replace(/^(www\.)/,"").split(".");for(;e.length>2;)e.shift();return e.join(".").replace(/(^\.*)|(\.*$)/g,"")}(),secure:!0,sameSite:"None"});function i5(){return Number.parseInt(tD(tZ),10)||0}function i6(){return Number.parseInt(tD(tB),10)||0}function i4(e){tI(tZ,i5()+1,i3(),{acceptedCookies:e})}let i9=(e=[])=>null==e?void 0:e.some(e=>e);class i7{static get intervals(){return i7.intervalDefinitions||(i7.intervalDefinitions={}),i7.intervalDefinitions}static get timeouts(){return i7.timeoutDefinitions||(i7.timeoutDefinitions={}),i7.timeoutDefinitions}static setTimeout(e,t,i,s=!1){if(!e||"string"!=typeof e)throw TypeError("Timers: setTimeout -> no timeoutName passed or it is not a string");if("number"!=typeof t&&!tC(t=!1===t?0:Number(t)))throw TypeError("Timers: setTimeout -> timeout is not a number or boolean");if("function"!=typeof i)throw TypeError("Timers: setTimeout -> callback is not a function");i7.timeouts[e]&&i7.clearTimeout(e),i7.timeouts[e]=window.setTimeout(()=>{i(),s&&i7.setTimeout(e,t,i,s)},t)}static clearTimeout(e){i7.timeouts[e]&&(window.clearTimeout(i7.timeouts[e]),delete i7.timeouts[e])}static setInterval(e,t,i){if(!e||"string"!=typeof e)throw TypeError("Timers: setInterval -> no intervalName passed or it is not a string");if("number"!=typeof t&&!tC(t=Number(t)))throw TypeError("Timers: setInterval -> interval is not a number");if("function"!=typeof i)throw TypeError("Timers: setInterval -> callback is not a function");i7.intervals[e]&&i7.clearInterval(e),i7.intervals[e]={},i7.intervals[e].delay=t,i7.intervals[e].callback=i,i7.intervals[e].interval=window.setInterval(i,t)}static clearInterval(e){i7.intervals[e]&&(window.clearInterval(i7.intervals[e].interval),delete i7.intervals[e])}static resetInterval(e){i7.intervals[e]&&(window.clearInterval(i7.intervals[e].interval),i7.intervals[e].interval=setInterval(i7.intervals[e].callback,i7.intervals[e].delay))}static pauseInterval(e){i7.intervals[e]&&(window.clearInterval(i7.intervals[e].interval),i7.intervals[e].interval=null)}static resumeInterval(e){i7.intervals[e]&&null===i7.intervals[e].interval&&(i7.intervals[e].interval=setInterval(i7.intervals[e].callback,i7.intervals[e].delay))}}function i8(e){this.listenerMap=[{},{}],e&&this.root(e),this.handle=i8.prototype.handle.bind(this),this._removedListeners=[]}function se(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function st(e,t){return this.rootElement===window?t===document||t===document.documentElement||t===window:this.rootElement===t}function si(e,t){return e===t.id}i8.prototype.root=function(e){let t;let i=this.listenerMap;if(this.rootElement){for(t in i[1])i[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in i[0])i[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;for(t in this.rootElement=e,i[1])i[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in i[0])i[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},i8.prototype.captureForType=function(e){return -1!==["blur","error","focus","load","resize","scroll"].indexOf(e)},i8.prototype.on=function(e,t,i,s){let n,r,o,a;if(!e)throw TypeError("Invalid event type: "+e);if("function"==typeof t&&(s=i,i=t,t=null),void 0===s&&(s=this.captureForType(e)),"function"!=typeof i)throw TypeError("Handler must be a type of Function");return n=this.rootElement,(r=this.listenerMap[s?1:0])[e]||(n&&n.addEventListener(e,this.handle,s),r[e]=[]),t?/^[a-z]+$/i.test(t)?(a=t,o=se):/^#[a-z0-9\-_]+$/i.test(t)?(a=t.slice(1),o=si):(a=t,o=Element.prototype.matches):(a=null,o=st.bind(this)),r[e].push({selector:t,handler:i,matcher:o,matcherParam:a}),this},i8.prototype.off=function(e,t,i,s){let n,r,o,a,l;if("function"==typeof t&&(s=i,i=t,t=null),void 0===s)return this.off(e,t,i,!0),this.off(e,t,i,!1),this;if(o=this.listenerMap[s?1:0],!e){for(l in o)o.hasOwnProperty(l)&&this.off(l,t,i);return this}if(!(a=o[e])||!a.length)return this;for(n=a.length-1;n>=0;n--)r=a[n],t&&t!==r.selector||i&&i!==r.handler||(this._removedListeners.push(r),a.splice(n,1));return!a.length&&(delete o[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,s)),this},i8.prototype.handle=function(e){let t,i,s,n,r,o;let a=e.type,l=[],c="ftLabsDelegateIgnore";if(!0===e[c])return;switch(3===(r=e.target).nodeType&&(r=r.parentNode),r.correspondingUseElement&&(r=r.correspondingUseElement),s=this.rootElement,e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:l=this.listenerMap[1][a];break;case 2:this.listenerMap[0]&&this.listenerMap[0][a]&&(l=l.concat(this.listenerMap[0][a])),this.listenerMap[1]&&this.listenerMap[1][a]&&(l=l.concat(this.listenerMap[1][a]));break;case 3:l=this.listenerMap[0][a]}let h=[];for(i=l.length;r&&i;){for(t=0;t<i&&(n=l[t]);t++)r.tagName&&["button","input","select","textarea"].indexOf(r.tagName.toLowerCase())>-1&&r.hasAttribute("disabled")?h=[]:n.matcher.call(r,n.matcherParam,r)&&h.push([e,r,n]);if(r===s||(i=l.length,(r=r.parentElement||r.parentNode)instanceof HTMLDocument))break}for(t=0;t<h.length;t++)if(!(this._removedListeners.indexOf(h[t][2])>-1)&&!1===this.fire.apply(this,h[t])){h[t][0][c]=!0,h[t][0].preventDefault(),o=!1;break}return o},i8.prototype.fire=function(e,t,i){return i.handler.call(t,e,t)},i8.prototype.destroy=function(){this.off(),this.root()},globalThis.window.eventManagerId=globalThis.window.eventManagerId||0,globalThis.window.eventManagerId++;let ss=`eid${globalThis.window.eventManagerId}`,sn={},sr=1;function so(e,t=" "){return"string"==typeof e?e.split(t):Array.isArray(e)?e:e instanceof NodeList||e instanceof HTMLCollection?[...e]:[e]}function sa(e,t,i,s,n,r){if("function"==typeof s&&(r=n,n=s,s=""),t=so(t),i=so(i),s=so(s,","),!t.length||!i.length)return;let o=t.filter(e=>e===document||e===window),a=o.length?t.filter(e=>e!==document&&e!==window):t;i.forEach(t=>{o.forEach(i=>{"on"===e?i.addEventListener(t,n,r):i.removeEventListener(t,n)})}),a.map(e=>{let t,i;return(t=e===window?"window":e.getAttribute(ss))||(t=sr++,e.setAttribute(ss,t)),i=sn[t]||new i8(e),sn[t]||(sn[t]=i),i}).map(o=>i.map(i=>s.map(s=>{var a,l;return o[e].call(o,"clickleft"===i?"click":i,s.trim(),(a=t,l=n,"clickleft"===i&&a[0]===window?function(e,t){e.button&&0!==e.button||e.which&&1!==e.which||l.call(t,e,t)}:l),r)})))}function sl(e,t){(function(e){if(!sc(e=su(e))&&!sg(e))throw Error("Argument must be either an HTMLElement or a NodeList/Array of element");return sg(e)?[e]:Array.prototype.slice.call(e)})(t[0]).forEach(i=>e(i,...Array.prototype.slice.call(t,1,t.length)))}function sc(e){return e instanceof NodeList||e instanceof HTMLCollection||Array.isArray(e)}function sh(e,t,i=[]){t.forEach(t=>e(i[0],t,...Array.prototype.slice.call(i,2,i.length)))}function su(e){return e===document?document.documentElement:e}function sd(e,t,i){if(e=su(e),!1===i)return e.style.removeProperty(t);let s="number"==typeof i&&-1==="zoom,opacity,z-index".indexOf(t);return e.style.setProperty(t,s?`${i}px`:i)}function sm(e,t,i){if(sc(e)){if(!tS(t)&&tw(i))throw TypeError("Element lists supported only in write mode");return sl(sm,[e,t,i])}let s=su(e);if(!s)throw TypeError("Element not specified");if(!t||"string"!=typeof t&&"object"!=typeof t)throw TypeError("Style must be a string or an object");return void 0===i&&"string"==typeof t?s.style[t]||window.getComputedStyle(s).getPropertyValue(t):"string"==typeof t?sd(s,t,i):Object.keys(t).forEach(e=>{sd(s,e,t[e])})}function sp(e,t,i){if(sc(e)){if(!tS(t)&&tw(i))throw TypeError("Element lists supported only in write mode");return sl(sp,[e,t,i])}let s=su(e);if(!sg(s))throw TypeError("Element not specified");if(tS(t)&&tw(i))return Object.keys(t).forEach(i=>{sp(e,i,t[i])});if("string"!=typeof t)throw TypeError("Attribute not a string");let n=["checked","disabled","selected","multiple"].includes(t);return(tP(i)&&(i=i(e)),n)?void 0===i?s.hasAttribute(t)||s[t]:void(void 0!==s[t]&&(s[t]=i),i||s.removeAttribute(t)):!1===i?s.removeAttribute(t):void 0===i?s.getAttribute(t):s.setAttribute(t,i)}function sE(e,t){if(sc(e)){sl(sE,[e,t]);return}if(sy(e=su(e)),-1!==t.indexOf(" ")){sh(sE,t.split(" "),[e]);return}e.classList.contains(t)||e.classList.add(t)}function sv(e,t){if(sc(e)){sl(sv,[e,t]);return}if(sy(e=su(e)),-1!==t.indexOf(" ")){sh(sv,t.split(" "),[e]);return}e.classList.contains(t)&&e.classList.remove(t)}function s_(e,t,i){var s,n;if(sc(e)){sl(s_,[e,t,i]);return}if(sy(e=su(e)),!tw(i)){if(i){sE(e,t);return}sv(e,t);return}if(s=e,n=t,sy(s=su(s)),s.classList.contains(n)){sv(e,t);return}sE(e,t)}function sf(e){var t,i,s,n;if(sc(e)){sl(sf,[e]);return}sy(e=su(e)),function e(t){if(sc(t))return sl(e,[t]);for(t=su(t);t.lastChild;)t.removeChild(t.lastChild);return t}(e),e.parentNode&&(sa("off",e,void 0,"",void 0,void 0),e.parentNode.removeChild(e))}function sg(e){return e instanceof HTMLElement||e instanceof window.SVGElement||e===document}function sy(e){if(!sg(e))throw TypeError("Element must be passed")}let sb=[];function sS(e,t={},i="write"){sb.push({key:e,data:t,action:i})}i7.setInterval("stats.send.data",1500,function(){var e;let t=sb.slice(0);if(!t.length)return;sb=[];let i=null===(e=window.initials.urls)||void 0===e?void 0:e.proxifiedStatsCollect;if(navigator.sendBeacon){navigator.sendBeacon(i,JSON.stringify(t));return}fetch(i,{method:e7.Post,headers:new Headers({"content-type":"application/json"}),credentials:"include",cache:"no-cache",body:JSON.stringify(t)}).catch(e=>console.warn(e))}),function(e,t,i,s,n=!1){sa("on",e,t,i,void 0,n)}(globalThis.window,"unload",function(){id()?tt.setItem(tn.deferredCollectorEvents,sb):tI(tV,JSON.stringify(sb),{},{acceptedCookies:window.initials.acceptedCookies})}),function(){let e;if(id()){let t=tt.getItem(tn.deferredCollectorEvents);e=tO(t)&&t.filter(e=>tT(e)&&"key"in e&&"data"in e&&"action"in e).length===t.length?t:[],tt.removeItem(tn.deferredCollectorEvents)}else e=JSON.parse(tD(tV)||"false");tO(e)&&e.forEach(e=>{sS(e.key,e.data,e.action)})}(),(td=tm||(tm={})).AGE_VERIFICATION="age_verification",td.SHARE="share",td.DOWNLOAD_VIDEO="download_video",td.LOGIN_POPUP_SHOWN="login_popup_shown",td.HOVER_MENU_CLICK="hover_menu_click",(tp||(tp={})).LOG_USER_STATS="user-stats";let sT=(e,t)=>{e&&window.initials.frontStats&&e.core.once(t.SOURCE_CONTROLLER_READY,()=>{var e,t,i;window.frontSpeedTTP=new Date().getTime()-((null===(i=window)||void 0===i?void 0:null===(t=i.performance)||void 0===t?void 0:null===(e=t.timing)||void 0===e?void 0:e.fetchStart)||0)})};(tE=tv||(tv={})).ReportIssueClick="report_issue_click",tE.ContactUs="contact_us_click",tE.StartSlow="start_slow",tE.RewindSlow="rewind_slow",tE.BufferingSlow="buffering_slow",tE.VideoAudioAsync="video_audio_async",tE.AudioOff="audio_off",tE.VideoNotLoading="video_not_loading",tE.VideoStoppedPlaying="video_stopped_playing",tE.QualityDistortion="quality_distortion",tE.QualityBad="quality_bad",tE.PlayerNotResponding="player_not_responding",tE.PlayerNoControls="player_no_controls",tE.ReportIssueClose="report_issue_close",tE.PlayerInit="player_init",tE.ReportIssueClickFromContent="report_issue_click_from_content";let{preroll:sA,userId:sk}=window.initials,sL=e=>new Promise(t=>{var i;let s=r.getStore(sk?"authpreroll":"unauthpreroll",{generic:1}),n=!1,o=s.subscribe((i=(0,tq._)(function*(i){if(0===i.length)return;if(n){o();return}let s=i[0],r=e;(null==s?void 0:s.username)&&(r=`${e}&modelsList=${encodeURIComponent(s.username)}&usePreroll=2`),t(r),n=!0}),function(e){return i.apply(this,arguments)}))}),sC=(e,t,i=null,s=!1)=>{var n;return i&&(e.ads.vastUrls[0]=i,e.ads.trackCollectorExtra["str.xhlOptimizedModel"]="true",window.prerollXhlOptimizedModel=!0),s&&(e.ads.vastUrls=null==(n=e.ads.vastUrls)?void 0:n.map(e=>{if(!e)return e;let t=document.querySelector('meta[name="keywords"]');if(!t)return e;let i=t.content,s=new URL(e),n=s.searchParams.get("keywords");return n?s.searchParams.set("keywords",`${i},${n}`):s.searchParams.set("keywords",i),s.toString()})),e.ads.trackCollectorExtra.ab=!window._tsNoAdBlock,e},sP=({XPlayerClass:e,HTMLElementId:t,xplayerSettings:i},s)=>{(function(e,t=""){return(tA(e=su(e))&&(t=e,e=document),sy(e),tP(e.querySelector)&&tA(t))?e.querySelector(t):null})(`#${t}`)&&(window.xplayer=new e(t,i,s),document.dispatchEvent(new CustomEvent("xplayerInitiated")),sT(window.xplayer,iO.Z),sA&&function(e){let{isAmp:t,acceptedCookies:i,experiment44:s}=window.initials;t||(e.core.once(e.events.PLAYER_PLAY,()=>{if(i9(e.ads.options.vastUrls)){!function(e){let{prerollConfig:{maxCount:t=Number.POSITIVE_INFINITY,stateConfig:i}={}}=window.initials;(!i||i.includes(i5()))&&i6()<t||e.core.emit(e.events.ADS_BLOCK)}(e);return}i4(i)},this),e.core.once(e.events.ADS_ENDED,e=>{(e||"b"===s)&&(i4(i),tI(tB,i6()+1,i3(),{acceptedCookies:i}))},this))}(window.xplayer),window.PlayStatistics&&new window.PlayStatistics(window.xplayer.core.videoElement,{enabled:!0}),0===Math.floor(1e3*Math.random())&&function(e){var t,i,s,n,r,o;let{videoEntity:a,isDesktopSite:l,userId:c,watchId:h,xplayerPluginSettings:u}=window.initials||{},d=(0,tb._)((0,tg._)({key:"streaming_report",content:e,id:null==a?void 0:a.id,video_type:function(e){switch(e){case eO.Video:return e6.Video;case eO.Moment:return e6.Moment;default:return e6.Unknown}}(null==a?void 0:a.type),site:l?"desktop":"mobile",uid:c,"str.watchId":h,"str.cdn":null===(i=window)||void 0===i?void 0:null===(t=i.xplayer)||void 0===t?void 0:t.core.sourceController.getCDN(),"str.has_ads":String(!!(null==u?void 0:null===(s=u.ads)||void 0===s?void 0:s.vastUrls)),"str.player":null==u?void 0:null===(r=u.statistics)||void 0===r?void 0:null===(n=r.addFields)||void 0===n?void 0:n.player},null==u?void 0:null===(o=u.statistics)||void 0===o?void 0:o.addFields),{experiments:null});t0(tl.Custom,d,!1)}(tv.PlayerInit),window.xplayer.core.on(iO.Z.SHARE_MENU_OPEN,()=>sS(tm.SHARE,"video")))},sR=iA(window.initials.xplayerPluginSettings),{xplayerSettings:sO,prerollConfig:sw}=window.initials;tT(null==sR?void 0:null===(t_=sR.statistics)||void 0===t_?void 0:t_.addFields)&&(sR.statistics.addFields=(0,tg._)({},sR.statistics.addFields,function(){var e;let t;let i=null===(e="blockReferrer",t=tK&&void 0!==tK[e]?tK[e]:null)||!Object.values(eB).includes(t.page)||!Object.values(e1).includes(t.block)||tw(t.value)||!(null===t.value||"string"==typeof t.value)?null:t;if(null===i)return{};let s={referrer_page:i.page,referrer_block:i.block};return null!==i.value&&(s.referrer_value=i.value),null!==i.algo&&(s.referrer_block_algo=i.algo),s}())),sR.controlBar.largeMode&&(sR.controlBar.largeMode.enabled=`${document.querySelector("html").className}`.indexOf("video-page--large-mode")>-1),"object"==typeof(null==sR?void 0:null===(tf=sR.banner)||void 0===tf?void 0:tf.bannerHtml)&&(sR.banner.bannerHtml="<div data-role=player-pause></div>"),sO&&"string"==typeof window.location.hash&&/comment-\d+/.test(window.location.hash)&&(Object.assign(ty.Z,{logFlash(){document.querySelector("#player-swf").pause(),window.XPlayer.logFlash=null}}),Object.assign(sO,{userSettings:{override:{autoplay:!1}}}),Object.assign(sR,{keyboard:{noFocus:!0}})),sR&&sR.hover&&sR.hover.link&&(sR.hover.link.onClick=()=>{(function t(i=null,s=null,n=null,r={},o=null){let a={};return tk(i)&&(a.eventCategory=i),tk(s)&&(a.eventAction=s),tk(n)&&(a.eventLabel=n),tT(r)&&(a=(0,tg._)({},a,r)),(function(i=null){let s=i||"GTM-TLDPV3J";return void 0===iP[s]&&(iP[s]=new Promise((i,n)=>{im.then(()=>{var r;if(window.isGtmTriedToLoad){i();return}window.isGtmTriedToLoad=!0;let{isGtmEnabled:o=!0,gtmSettings:{dimensions:a={},overrides:l={},events:c=[]}={}}=null!==(r=window.initials)&&void 0!==r?r:{gtmSettings:{}};if(iR(function e(t){let i=iA(t);return Object.keys(i).forEach(t=>{tS(i[t])&&(i[t]=e(i[t])),i[t]=`${i[t]}`}),i}(function(e,t){let i={};if(t.theme){let{key:s,defaultValue:n}=t.theme;(!e[s]||e[s]===n)&&window.matchMedia("(prefers-color-scheme)").matches&&(i[s]=window.matchMedia("(prefers-color-scheme: dark)").matches?"device_theme_dark":"device_theme_light")}return(0,tg._)({},e,i)}(a,l))),c.forEach(e=>t(e[0],e[1],e[2],e[3],s)),!o){i();return}let h=document.getElementsByTagName("script")[0];if(!h){n(Error("no script found on the page"));return}let u=document.createElement("script"),d=`https://www.googletagmanager.com/gtm.js?id=${s}`;if(h.src===d){i();return}window[iL]=window[iL]||[],window[iL].push({"gtm.start":new Date().getTime(),event:"gtm.js"}),u.async=!0,u.src=d,u.onload=()=>{null!=iC||(iC=window[iL].push),window[iL].push=(0,tq._)(function*(...t){return yield function(...t){return e||(e=tP(window.requestIdleCallback)?window.requestIdleCallback:window.setTimeout),new Promise(i=>{e(()=>i(...t))})}(),iC(...t)}),i()},u.onerror=n,h.parentNode.insertBefore(u,h)})})),iP[s]})(o).then(()=>(function(e,t={},i=window[iL]){tk(e)&&iR((0,tg._)({event:e},t),i)})("oldEvent",a))})("Paysite","click","red link")}),window.getCollectorUrl=t2;let sN={XPlayerClass:ty.Z,HTMLElementId:"player-container",xplayerSettings:sO};if(null==sR?void 0:sR.ads){let e;let t=(e=Array.isArray(sR.ads.vastUrls)&&sR.ads.vastUrls[0],sR.ads.isXhlPreroll&&e?e:null);t?new Promise((e,i)=>{if(!t){i();return}let s=setTimeout(()=>{console.error("ml tweak rejected"),i()},1e3);sL(t).then(t=>{clearTimeout(s),e(t)})}).then(e=>{sP(sN,sC(sR,sw,e,!0))}).catch(()=>{sP(sN,sC(sR,sw,"",!0))}):sP(sN,sC(sR,sw,"",!0))}else sP(sN,sR)}()}();