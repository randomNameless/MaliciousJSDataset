<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pub.html</title>
</head>
<body>

<script>
/* GptMeasurement HouseHold ImplementationValidator LegacyLayer SignalsAutoInsertion SignalsBsc SignalsIds SignalsTvp SignalsVlp WeatherConfig */
(()=>{var ee=Object.defineProperty,ur=Object.defineProperties,cr=Object.getOwnPropertyDescriptor,mr=Object.getOwnPropertyDescriptors;var Lt=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var te=(i,t,e)=>t in i?ee(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,F=(i,t)=>{for(var e in t||(t={}))Ee.call(t,e)&&te(i,e,t[e]);if(Lt)for(var e of Lt(t))ye.call(t,e)&&te(i,e,t[e]);return i},ot=(i,t)=>ur(i,mr(t)),o=(i,t)=>ee(i,"name",{value:t,configurable:!0});var ve=(i,t)=>{var e={};for(var r in i)Ee.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&Lt)for(var r of Lt(i))t.indexOf(r)<0&&ye.call(i,r)&&(e[r]=i[r]);return e};var s=(i,t,e,r)=>{for(var n=r>1?void 0:r?cr(t,e):t,l=i.length-1,c;l>=0;l--)(c=i[l])&&(n=(r?c(t,e,n):c(n))||n);return r&&n&&ee(t,e,n),n};var a=(i,t,e)=>(te(i,typeof t!="symbol"?t+"":t,e),e);var T=(i,t,e)=>new Promise((r,n)=>{var l=f=>{try{m(e.next(f))}catch(h){n(h)}},c=f=>{try{m(e.throw(f))}catch(h){n(h)}},m=f=>f.done?r(f.value):Promise.resolve(f.value).then(l,c);m((e=e.apply(i,t)).next())});var d={"7646":{adServerId:1358,customTracking:{c2:{type:"targeting",key:"ver"}},adPositionKey:"pos"}};var re={queueAdRequest:i=>{var t;try{(t=i.callback)==null||t.call(i),i.callback=null}catch(e){}},defineSlot:(i,t)=>{},adRendered:(i,t)=>{},adRemoved:i=>{},getTargeting:i=>({}),addEventListener:(i,t)=>{},removeEventListener:(i,t)=>{},toggleDebugMode:()=>{console.log("%c[UT-DEBUG]%c Debug mode is not available for this tag.","color: red","color: intial")},_debugScriptLoaded:()=>{},onSlotVisibleForTime:(i,t,e)=>{}};var ie=class ie{constructor(){a(this,"isEntryModule",!0)}};o(ie,"EntryModule");var b=ie;var Mt=class Mt{constructor(t){a(this,"_error");a(this,"_message","unknown");a(this,"_trace",[]);if(t instanceof Mt)return t;t instanceof Error&&(this._error=t,this._message=t.message)}get error(){return this._error}get message(){return this._message}get trace(){return this._trace}addToTrace(t){this.trace.unshift(t)}};o(Mt,"TracedError");var At=Mt;var ne=class ne{constructor(t,e){a(this,"window");a(this,"dvtag");a(this,"modules",new Map);a(this,"errorHandlers",[]);a(this,"errors",[]);var r;this.window=e,this.window.dvtag=(r=this.window.dvtag)!=null?r:{},this.dvtag=this.window.dvtag,this.dvtag._core=this;for(let[n,l]of Object.entries(re))this.dvtag[n]=l;for(let n of t)this.createModule(n);for(let n of this.modules.values())this.applyModuleDecoration(n);for(let n of this.modules.values())this.applyErrorDecoration(n);for(let n of this.modules.values())this.applyPluginDecoration(n);for(let n of this.modules.values())this.applyApiDecoration(n);for(let n of this.modules.values())this.applyExecuteDecoration(n)}get moduleList(){return[...this.modules.keys()].map(t=>t.name)}get entryModuleList(){return[...this.modules.entries()].filter(([t,e])=>e instanceof b).map(([t,e])=>t.name)}get(t){return this.getModule(t).gateway}getByName(t){let e=[...this.modules.keys()].find(r=>r.name===t);return e!=null?this.get(e):null}getModule(t){let e=this.modules.get(t);if(e==null)throw new Error(`module not in core: ${t.name}`);return e}createModule(t){if(t.prototype.moduleConfig==null)throw new Error(`not a module: ${t.name}`);let e=new t;e.core=this,e.gateway={module:e},this.modules.set(t,e)}applyModuleDecoration(t){var n,l,c,m,f,h;let e=t.constructor.prototype.moduleConfig,r=t.constructor.name;for(let{method:A}of e){let w=t[A].bind(t),M=(c=(l=(n=this.dvtag._hooks)==null?void 0:n.interceptModule)==null?void 0:l[r])==null?void 0:c[A],P=M==null?w:M.bind(t),gt=(h=(f=(m=this.dvtag._hooks)==null?void 0:m.inspectModule)==null?void 0:f[r])==null?void 0:h[A],Zt=gt==null?P:(...bt)=>{let Tt=P(...bt);return gt(bt,Tt),Tt},gr=o((...bt)=>{let Tt;try{Tt=Zt(...bt)}catch(wt){throw this.traceMethodError(t,A,bt,wt)}return Tt instanceof Promise?Tt.then(wt=>wt,wt=>{throw this.traceMethodError(t,A,bt,wt)}):Tt},"traced");t.gateway[A]=gr}if(t.plugins!=null){t.pluginFunctions={};for(let A of Object.keys(t.plugins)){t.pluginFunctions[A]=[];let w=t.pluginFunctions[A];t.plugins[A]=(...M)=>{let P=[];for(let gt of w)try{P.push(gt(...M))}catch(Zt){this.tracePluginError(t,A,Zt)}return P}}}}traceMethodError(t,e,r,n){let l=new At(n);return l.addToTrace(`${t.constructor.name}.${e}(${r.map(c=>typeof c).join(",")})`),l}traceExecuteError(t){let e=new At(t);return e.addToTrace("@execute"),this.handleSevereError(e),e}tracePluginError(t,e,r){let n=new At(r);return n.addToTrace(`@plugin(${t.constructor.name}, '${e}')`),this.handleSevereError(n),n}traceApiError(t,e){let r=new At(e);return r.addToTrace(`@api('${t}')`),this.handleSevereError(r),r}handleSevereError(t){for(let e of this.errorHandlers)try{e(t)}catch(r){}this.errors.length>10||this.errors.push({message:t.message,trace:t.trace})}applyErrorDecoration(t){var r;let e=(r=t.constructor.prototype.errorConfig)!=null?r:[];for(let{method:n}of e)this.errorHandlers.push(t.gateway[n])}applyPluginDecoration(t){var r;let e=(r=t.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:n,category:l,method:c}of e)this.getModule(n).pluginFunctions[l].push(t.gateway[c])}applyApiDecoration(t){var r;let e=(r=t.constructor.prototype.apiConfig)!=null?r:[];for(let{api:n,method:l}of e)Object.defineProperty(this.dvtag,n,{value:(...c)=>{var m,f;try{return t.gateway[l](...c)}catch(h){return this.traceApiError(n,h),(f=(m=re)[n])==null?void 0:f.call(m,...c)}},writable:!1})}applyExecuteDecoration(t){return T(this,null,function*(){var r;let e=(r=t.constructor.prototype.executeConfig)!=null?r:[];for(let{method:n}of e)try{yield t.gateway[n]()}catch(l){this.traceExecuteError(l)}})}};o(ne,"Core");var Pt=ne;var oe=[],se=oe;var u=o(i=>{let t=i.prototype,e=Object.getOwnPropertyNames(t).filter(r=>{var n;return r!=="constructor"&&((n=Object.getOwnPropertyDescriptor(t,r))==null?void 0:n.value)instanceof Function});t.moduleConfig=e.map(r=>({method:r})),oe.push(i)},"moduleClass"),N=o(i=>t=>{},"attachModule"),C=o((i,t)=>{var e;i.executeConfig=(e=i.executeConfig)!=null?e:[],i.executeConfig.push({method:t})},"executeMethod"),p=o((i,t)=>(e,r)=>{var n;e.pluginConfig=(n=e.pluginConfig)!=null?n:[],e.pluginConfig.push({PluggableClass:i,category:t,method:r})},"pluginMethod"),st=o(i=>(t,e)=>{var r;t.apiConfig=(r=t.apiConfig)!=null?r:[],t.apiConfig.push({api:i,method:e})},"apiMethod"),be=o((i,t)=>{var e;i.errorConfig=(e=i.errorConfig)!=null?e:[],i.errorConfig.push({method:t})},"errorMethod");var Ct=o(i=>{if(i==null)return[];let t=Ce(i);return t!=null?[t]:Array.isArray(i)?i.map(Ce).filter(e=>e!=null):[]},"parseSlotSizes"),Ce=o(i=>{if(i==null)return null;if(typeof i=="string")return{label:i};if(Array.isArray(i)){if(i.length===1&&typeof i[0]=="string")return{label:i[0]};if(i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number")return{width:i[0],height:i[1]}}if(typeof i=="object"){let{label:t,width:e,height:r}=i;if(typeof e=="number"&&typeof r=="number")return{width:e,height:r};if(typeof t=="string")return{label:t}}return null},"parseSlotSize");var Ie=o(i=>{try{return i.getSizes()}catch(t){return[]}},"getGptSlotSizesSafe");var kt=o(i=>{let t=i.split("/").map(n=>n.trim()).filter(n=>n.length>0);if(t.length<2)return;let e=t[0].split(",",1)[0],r=Number(e);return Number.isNaN(r)?void 0:`${r}`},"getNetworkCodeFromAdUnit");var Vt=o((i,t)=>{let e=i.getAdUnitPath(),r=kt(e);return{id:e,network:r,sizes:Ct(Ie(i)),position:i.getTargeting(t)[0]}},"gptSlotToAdUnit");var Bt=o((i,t)=>({getTargeting:e=>[...new Set([...t(e),...i.getTargeting(e)])],setTargeting:(e,r)=>{i.setTargeting(e,r)}}),"gptSlotToTargetable");var ae="dvp_spos";var D=class{_getAdServers(){try{return d}catch(t){return{}}}isAdServerConfigured(t){return t!=null&&t in this._getAdServers()}getAdServerConfig(t){var e;return t==null||!this.isAdServerConfigured(t)?{}:(e=this._getAdServers()[t])!=null?e:{}}getAdServerCustomTracking(t){var e;return t==null||!this.isAdServerConfigured(t)?{}:(e=this._getAdServers()[t].customTracking)!=null?e:{}}getAdServerId(t){if(!(t==null||!this.isAdServerConfigured(t)))return this._getAdServers()[t].adServerId}getAdPositionKey(t){var e,r;return t==null?ae:(r=(e=this._getAdServers()[t])==null?void 0:e.adPositionKey)!=null?r:ae}};o(D,"AdServers"),D=s([u],D);var Qt,fr=new Uint8Array(16);function le(){if(!Qt&&(Qt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qt(fr)}o(le,"rng");var U=[];for(let i=0;i<256;++i)U.push((i+256).toString(16).slice(1));function xe(i,t=0){return U[i[t+0]]+U[i[t+1]]+U[i[t+2]]+U[i[t+3]]+"-"+U[i[t+4]]+U[i[t+5]]+"-"+U[i[t+6]]+U[i[t+7]]+"-"+U[i[t+8]]+U[i[t+9]]+"-"+U[i[t+10]]+U[i[t+11]]+U[i[t+12]]+U[i[t+13]]+U[i[t+14]]+U[i[t+15]]}o(xe,"unsafeStringify");var hr=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),de={randomUUID:hr};function Sr(i,t,e){if(de.randomUUID&&!t&&!i)return de.randomUUID();i=i||{};let r=i.random||(i.rng||le)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=r[n];return t}return xe(r)}o(Sr,"v4");var ge=Sr;var ut=o(()=>ge(),"uuid");var ue=class ue{constructor(t,e,r,n,l){this._slotStore=t;this.source=e;this.elementId=r;this.adUnit=n;this._targetable=l;a(this,"uuid");a(this,"creationTime");a(this,"_variables",new Map);a(this,"_targeting",{});a(this,"_flushedTargeting",{});this.uuid=ut(),this.creationTime=Date.now()}setVariable(t,e){this._variables.set(t,e)}getVariable(t){return this._variables.get(t)}hasVariable(t){return this._variables.has(t)}clearVariable(t){this._variables.delete(t)}getUptTargetingKeys(){return[...new Set([...Object.keys(this._targeting),...this._slotStore.getUptPageTargetingKeys()])]}getUptTargetingForKey(t){var e;return[...new Set([...(e=this._targeting[t])!=null?e:[],...this._slotStore.getUptPageTargetingForKey(t)])]}getUptTargeting(){let t={};for(let e of this.getUptTargetingKeys())t[e]=this.getUptTargetingForKey(e);return t}setUptSlotTargeting(t){for(let[e,r]of Object.entries(t))this._targeting[e]=[...new Set(r)],this.flushUptTargetingToAdServer(e)}addUptSlotTargeting(t){var e;for(let[r,n]of Object.entries(t))this._targeting[r]=[...new Set([...(e=this._targeting[r])!=null?e:[],...n])],this.flushUptTargetingToAdServer(r)}getAdServerTargeting(t){var e,r;return(r=(e=this._targetable)==null?void 0:e.getTargeting(t))!=null?r:[]}flushUptTargetingToAdServer(t){var n;if(this._targetable==null)return;let e=(n=this._flushedTargeting[t])!=null?n:[],r=this.getUptTargetingForKey(t);(e.length!==r.length||r.sort().some((l,c)=>e[c]!==l))&&(this._targetable.setTargeting(t,this.getUptTargetingForKey(t)),this._flushedTargeting[t]=r)}forceFlushAllUptTargetingToAdServer(){this._targetable!=null&&(this._flushedTargeting={},this.getUptTargetingKeys().forEach(t=>this.flushUptTargetingToAdServer(t)))}validateAdServerTargeting(){let t=2;for(let e of this.getUptTargetingKeys()){let r=this.getUptTargetingForKey(e),n=this.getAdServerTargeting(e);if(r.length>n.length||r.some(l=>!n.includes(l)))return 0;n.length>r.length&&(t=1)}return t}};o(ue,"Slot");var Ut=ue;var S=class{constructor(){a(this,"plugins",{slotDiscovered:(t,e)=>[],slotDestroyed:t=>[]});a(this,"_slots",{});a(this,"_pageTargeting",{})}getSlot(t,e){var r;return(r=this._slots[t])==null?void 0:r[e]}getSlots(t){var e;if(t==null){let r=[];for(let n of Object.values(this._slots))r.push(...Object.values(n));return r}return Object.values((e=this._slots[t])!=null?e:{})}createSlot(t,e,r,n,l,c){var h,A;let m=this.getSlot(t,r);m!=null&&this.plugins.slotDestroyed(m);let f=new Ut(this,t,r,n,l);(A=(h=this._slots)[t])!=null||(h[t]={}),this._slots[t][r]=f;for(let w of Object.keys(this._pageTargeting))f.flushUptTargetingToAdServer(w);return c==null||c(f),this.plugins.slotDiscovered(f,e),f}getUptPageTargetingKeys(){return Object.keys(this._pageTargeting)}getUptPageTargetingForKey(t){var e;return(e=this._pageTargeting[t])!=null?e:[]}getUptPageTargeting(){let t={};for(let[e,r]of Object.entries(this._pageTargeting))t[e]=[...r];return t}setUptPageTargeting(t){for(let[e,r]of Object.entries(t))this._pageTargeting[e]=[...new Set(r)];this._flushUptPageTargetingToAdServer(Object.keys(t))}addUptPageTargeting(t){var e;for(let[r,n]of Object.entries(t))this._pageTargeting[r]=[...new Set([...(e=this._pageTargeting[r])!=null?e:[],...n])];this._flushUptPageTargetingToAdServer(Object.keys(t))}_flushUptPageTargetingToAdServer(t){for(let e of Object.values(this._slots))for(let r of Object.values(e))for(let n of t)r==null||r.flushUptTargetingToAdServer(n)}};o(S,"SlotStore"),S=s([u],S);var Tr=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],Ar=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],we=o((i,t)=>{for(let[e,r]of i)t=t.replace(e,r);return t},"replaceByRules"),Pe=o(i=>{let t=we(Tr,i);return we(Ar,t)},"normalizeUrl");var Ue=o(i=>i.split("?",1)[0].split("#",1)[0],"stripUrlQuery");var De=o((i,t)=>{try{let e=new URLSearchParams(i),r=e.get("ctx"),n=e.get("cmp");if(r!=null&&n!=null)return{ctx:r,cmp:n,prefetch:t,legacy:!0}}catch(e){}return null},"parseInfo"),Oe=o(i=>{var t;return i.pathname!=="/signals/pub.js"?null:(t=De(i.search,!0))!=null?t:De(i.hash.substring(1),!1)},"parseLegacyPagetagUrl");var Rr=1e3,_r=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,E=class{constructor(){a(this,"visit");a(this,"tagInfo");a(this,"plugins",{newVisit:t=>[]});a(this,"_normalizeUrl",Pe)}_initialize(){this.getTagInfo(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var t;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(e){}(t=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"})}return this.tagInfo}_parseTagInfo(){let t=this.getCurrentScriptSrc();if(t==null)return null;let e=new URL(t,"https://pub.doubleverify.com"),r=e.pathname,n=_r.exec(r);if(n!=null){let[,l,c]=n;return{ctx:l,cmp:c}}return Oe(e)}getCurrentScriptSrc(){var t,e;return(e=(t=this.core.window.document.currentScript)==null?void 0:t.getAttribute("src"))!=null?e:null}updateVisit(t=!0){let e=this.getStrippedPageUrl();return(this.visit==null||this.visit.strippedUrl!==e)&&(this.visit={strippedUrl:e,normalizedUrl:this._normalizeUrl(this.core.window.location.href),uuid:ut()},t&&this.plugins.newVisit(this.visit)),this.visit}getVisit(){var t;return(t=this.visit)!=null?t:this.updateVisit(!1)}getStrippedPageUrl(){return Ue(this.core.window.location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}_installNavigationListener(){let{window:t}=this.core,e=o(()=>this.updateVisit(!0),"cb");t.navigation!=null?t.navigation.addEventListener("navigatesuccess",e):setInterval(e,Rr)}};o(E,"Context"),s([C],E.prototype,"_initialize",1),E=s([u],E);var ce=class ce{constructor(){a(this,"pending",[]);a(this,"flushing",!1)}push(t){this.pending.push(t),this.flush()}flush(){return T(this,null,function*(){var e;if(this.flushing)return;this.flushing=!0;let t=this.pending.shift();for(;t!=null;){try{yield t.promise}catch(r){}try{(e=t.callback)==null||e.call(t)}catch(r){}t=this.pending.shift()}this.flushing=!1})}};o(ce,"AsyncQueue");var Gt=ce;var R=class{constructor(){a(this,"plugins",{adRequestQueued:t=>[],adRequestTimedOut:t=>[],adRequestBeforeRelease:t=>[],adRequestCompleted:t=>[]});a(this,"queue",new Gt);a(this,"adRequestCounter",0)}_queueAdRequest(t={}){var l,c;let e={index:this.adRequestCounter++,status:"queued",timeoutValue:(l=t.timeout)!=null?l:0,onDvtagReadyCalled:(c=t.timestamp)!=null?c:0,waitingStarted:new Date().getTime(),internal:t.internal};this.core.get(E).updateVisit(),this.plugins.adRequestQueued(e);let r=t.callback;r===void 0?t.callback=()=>{}:r===null?e.status="tag-timeout":t.callback=()=>{e.status="queue-timeout",e.callbackCalled=new Date().getTime(),t.callback=null,this.plugins.adRequestTimedOut(e);try{r()}catch(m){}};let n=o(()=>{if(t.callback!=null){t.callback=null,e.status="success",e.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(e);try{r==null||r()}catch(m){}}else this.plugins.adRequestBeforeRelease(e);e.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(e)},"onAsyncOperationsCompleted");this.queue.push({callback:n,adRequest:e})}delayAdRequests(t){this.queue.push({promise:t})}};o(R,"AdRequestQueue"),s([st("queueAdRequest")],R.prototype,"_queueAdRequest",1),R=s([u],R);var k=class{getShortCommitId(){return"9c3218b"}getBuildTimestamp(){return 1733374836304}getAuthToken(){return"4PVPj2lNpSgGkJ47yPA/nTVUkOBJmmFghVFLbvtLbFa5QHDavVirXmXtOuZAdsbxNGeEWQaX4CfioEQWufYUkqQyf+39JLvtKEcN4CVkFdOIIgGpP43AnPFDRsd/oTg6AtMgmopmEdc8Gi8ATEzzqHs="}};o(k,"DefinedVariables"),k=s([u],k);var G=class{constructor(){a(this,"cache",{})}_performFetchJson(t,e){return T(this,null,function*(){let r=t;if(e!=null&&e.authToken){let c=this.core.get(k).getAuthToken(),m=new URL(t);m.searchParams.set("token",c),r=m.href}let n=yield this.core.window.fetch(r);return{json:yield n.json(),headers:n.headers}})}fetchJson(t,e){return T(this,null,function*(){let r=this.cache[t];return r==null&&(r=this._performFetchJson(t,e).then(n=>n.json),this.cache[t]=r),r})}};o(G,"Fetch"),G=s([u],G);var Dt=["BSC","ABS","CCT","CBS"],me=["IDS"],Ot=["VLP","TVP"],yr=[...Dt,...me,...Ot],Qo=[...Dt,...me,...Ot].filter(i=>i!=="CCT"),qe=o(i=>yr.includes(i.toUpperCase()),"isSignal"),Fe=o(i=>Ot.includes(i.toUpperCase()),"isSlotSignal"),Ne=o(i=>me.includes(i.toUpperCase()),"isUserSignal"),Le=o(i=>Dt.includes(i.toUpperCase()),"isPageSignal");var jt=o(i=>i==null?"":`@${i}`,"getPositionSuffix");var vr=/^(\d+)x(\d+)$/,Me=o(i=>i==="all"?[]:i.split(",").map(t=>{let e=t.match(vr);return e==null?{label:t}:{width:parseInt(e[1],10),height:parseInt(e[2],10)}}),"stringToSlotSizes"),pe=o(i=>i.length===0?"all":i.map(({width:t,height:e,label:r})=>r!=null?r:`${t}x${e}`).join(","),"slotSizesToString"),ke=o(i=>i==null?"":i.length>0&&i.every(({label:r})=>r==null)?pe(i):"","slotSizesToStringIfSpecific");var br="https://pub.doubleverify.com/dvtag/signals/",j=class{_getBaseUrl(t){let e=this.core.get(E),{ctx:r,cmp:n}=e.getTagInfo(),l=e.getNormalizedPageUrl();try{l=new URL(l).origin}catch(m){}let c=new URL(t,br);return c.searchParams.set("ctx",r),c.searchParams.set("cmp",n),c.searchParams.set("url",l),c}getUserTargetingUrl(t){let e=this._getBaseUrl("ids/pub.json");return t.includes("IDS")&&e.searchParams.set("ids","1"),e.href}getPageTargetingUrl(t,e){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",e),t.includes("BSC")&&r.searchParams.set("bsc","1"),t.includes("ABS")&&r.searchParams.set("abs","1"),t.includes("CBS")&&r.searchParams.set("cbs","1"),t.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(t,e){var l;let r=this._getBaseUrl("vlp/pub.json");t.includes("VLP")&&r.searchParams.set("vlp","1"),t.includes("TVP")&&r.searchParams.set("tvp","1");let n=0;for(let c of e){let{id:m,position:f,sizes:h}=(l=c.adUnit)!=null?l:{},A=m+jt(f);r.searchParams.set(`slot-${n++}-${A}`,ke(h))}return r.href}};o(j,"SignalsUrlBuilder"),j=s([u],j);var ct=class{constructor(){a(this,"cache",{})}_fetchFreshSignals(t,e){return T(this,null,function*(){if(!e.some(Le))return{};let r=this.core.get(j).getPageTargetingUrl(e,t),n;try{n=yield this.core.get(G).fetchJson(r,{authToken:!0})}catch(l){return{}}return n instanceof Object?n:{}})}fetchSignals(t,e=3){return T(this,null,function*(){let r=this.core.get(E),n=r.getNormalizedPageUrl(),l=r.getStrippedPageUrl();this.cache[l]==null&&(this.cache[l]=this._fetchFreshSignals(n,t));let c=yield this.cache[l];return this.core.get(E).getStrippedPageUrl()!==l&&e>0?this.fetchSignals(t,e-1):c})}};o(ct,"PageSignals"),ct=s([u],ct);var mt=class{constructor(){a(this,"cache",{});a(this,"pendingSlots",[]);a(this,"pendingBulkRequest",null)}_scheduleBulkRequest(t){return T(this,null,function*(){yield Promise.resolve();let e=this.core.get(j).getSlotTargetingUrl(t,this.pendingSlots);this.pendingSlots=[],this.pendingBulkRequest=null;let r;try{r=yield this.core.get(G).fetchJson(e,{authToken:!0})}catch(n){return[]}return r})}_fetchFreshSignals(t,e){return T(this,null,function*(){if(!e.some(Fe))return{};let r=this.pendingSlots.push(t)-1;this.pendingBulkRequest==null&&(this.pendingBulkRequest=this._scheduleBulkRequest(e));let l=(yield this.pendingBulkRequest)[r];return l instanceof Object?l:{}})}_getCacheKey(t){var m,f;let{id:e,position:r,sizes:n}=(m=t.adUnit)!=null?m:{},l=e+jt(r),c=(f=n==null?void 0:n.map(h=>{var A;return(A=h.label)!=null?A:`${h.width}x${h.height}`}).sort().join(","))!=null?f:"";return`${l}#${c}`}fetchSignals(t,e){return T(this,null,function*(){let r=this._getCacheKey(t);return this.cache[r]==null&&(this.cache[r]=this._fetchFreshSignals(t,e)),this.cache[r]})}};o(mt,"SlotSignals"),mt=s([u],mt);var pt=class{constructor(){a(this,"cache")}_fetchFreshSignals(t){return T(this,null,function*(){if(!t.some(Ne))return{};let e=this.core.get(j).getUserTargetingUrl(t),r;try{r=yield this.core.get(G).fetchJson(e,{authToken:!0})}catch(n){return{}}return r instanceof Object?r:{}})}fetchSignals(t){return T(this,null,function*(){return this.cache==null&&(this.cache=this._fetchFreshSignals(t)),this.cache})}};o(pt,"UserSignals"),pt=s([u],pt);var _=class{constructor(){a(this,"plugins",{getEnabledSignals:()=>[],userTargetingUpdated:t=>[],pageTargetingUpdated:t=>[],slotTargetingUpdated:(t,e)=>[]});a(this,"dataForMigrationTracking",{userTargeting:{},pageTargeting:{},slotTargeting:new Map})}getEnabledSignals(){return this.plugins.getEnabledSignals()}getDataForMigrationTracking(){return this.dataForMigrationTracking}_initialize(){this.getUserTargeting(),this.getPageTargeting()}_onAdRequestQueued(){this.getPageTargeting()}_onSlotDiscovered(t){this.getSlotTargeting(t)}getUserTargeting(){return T(this,null,function*(){let t=this._fetchUserTargeting();return this.core.get(R).delayAdRequests(t),t})}getPageTargeting(){return T(this,null,function*(){let t=this._fetchPageTargeting();return this.core.get(R).delayAdRequests(t),t})}getSlotTargeting(t){return T(this,null,function*(){let e=this._fetchSlotTargeting(t);return this.core.get(R).delayAdRequests(e),e})}_fetchUserTargeting(){return T(this,null,function*(){let t=this.core.get(S),e=yield this.core.get(pt).fetchSignals(this.getEnabledSignals());return t.setUptPageTargeting(e),this.dataForMigrationTracking.userTargeting=e,this.plugins.userTargetingUpdated(e),e})}_fetchPageTargeting(){return T(this,null,function*(){let t=this.core.get(S),e=yield this.core.get(ct).fetchSignals(this.getEnabledSignals());return t.setUptPageTargeting(e),this.dataForMigrationTracking.pageTargeting=e,this.plugins.pageTargetingUpdated(e),e})}_fetchSlotTargeting(t){return T(this,null,function*(){let e=yield this.core.get(mt).fetchSignals(t,this.getEnabledSignals());return t.setUptSlotTargeting(e),this.dataForMigrationTracking.slotTargeting.set(t,e),this.plugins.slotTargetingUpdated(t,e),e})}};o(_,"Signals"),s([C],_.prototype,"_initialize",1),s([p(R,"adRequestQueued")],_.prototype,"_onAdRequestQueued",1),s([p(S,"slotDiscovered")],_.prototype,"_onSlotDiscovered",1),_=s([u],_);var K=class{constructor(){a(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){return this.getPq().PTS}setApi(t){let e=this.getPq();e!=null&&(e.init=()=>{},e.loadSignals=t.loadSignals,e.loadSignalsForSlots=t.loadSignalsForSlots,e.getTargeting=t.getTargeting)}_pushToDvtagCmd(...t){var e;this.core.dvtag.cmd=(e=this.core.dvtag.cmd)!=null?e:[],this.core.dvtag.cmd.push(...t)}_initialize(){var r,n;this.core.window.PQ=(r=this.core.window.PQ)!=null?r:{};let t=this.core.window.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(n=t.PTS)!=null?n:{};let e=t.cmd;return t.cmd={push:l=>this._pushToDvtagCmd(l)},Array.isArray(e)&&this._pushToDvtagCmd(...e),t}};o(K,"LegacyPq"),K=s([u],K);var Ve=o(i=>{var r,n,l;let t=ut(),e={id:(n=(r=i.adUnitPath)!=null?r:i.invCode)!=null?n:i.tagId,sizes:Ct(Me((l=i.sizes)!=null?l:"all")),position:i.position};return{elementId:t,adUnit:e}},"parseLegacyAdUnit");var Be=o((i,t)=>{var n;let e=(n=i.IDS)==null?void 0:n[0];if(e==null)return;let r=parseInt(e);isNaN(r)||(t.IDS=r)},"setUserTargetingOnPts"),Qe=o((i,t)=>{for(let e of Dt)i[e]!=null&&(t[e]=i[e])},"setPageTargetingOnPts"),Ge=o((i,t,e)=>{var m,f,h,A,w,M;let{adUnit:r}=i;if((r==null?void 0:r.id)==null)return;let n=r.id,l=pe((m=r.sizes)!=null?m:[]),c=r.position;for(let P of Ot){let gt=t[P];gt!=null&&((f=e[P])!=null||(e[P]={}),(A=(h=e[P])[n])!=null||(h[n]={}),e[P][n][l]=gt[0],c!=null&&((M=(w=e[P][n])[c])!=null||(w[c]={}),e[P][n][c][l]=gt[0]))}},"setSlotTargetingOnPts");var Cr="legacy-api",je="gpt",X=class extends b{_initialize(){this.core.get(K).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}_setUserTargetingOnPts(t){let e=this.core.get(K).getPts();Be(t,e)}_setPageTargetingOnPts(t){let e=this.core.get(K).getPts();Qe(t,e)}_setSlotTargetingOnPts(t,e){let r=this.core.get(K).getPts();Ge(t,e,r)}loadSignals(t,e){return T(this,null,function*(){yield this._onDvtagReady("loadSignals",e)})}loadSignalsForSlots(t,e,r){return T(this,null,function*(){let n=this.core.get(_),l=this.core.get(S);for(let m of t){let f=m.getSlotElementId(),h=l.getSlot(je,f);if(h==null){let A=this.core.get(D).getAdPositionKey(m.getAdUnitPath());h=l.createSlot(je,0,f,Vt(m,A),Bt(m,w=>this._getPubAdsTargeting(w)))}n.getSlotTargeting(h)}let c=typeof e=="function"?e:r;yield this._onDvtagReady("loadSignalsForSlots",c)})}getTargeting(t,e){return T(this,null,function*(){var c;let r=this.core.get(_),n=this.core.get(S);for(let m of(c=t.adUnits)!=null?c:[]){let{elementId:f,adUnit:h}=Ve(m),A=n.createSlot(Cr,0,f,h);r.getSlotTargeting(A)}let l=o(()=>e==null?void 0:e(void 0,this.core.get(K).getPts()),"callback");yield this._onDvtagReady("getTargeting",l)})}_getPubAdsTargeting(t){var e,r,n;return(n=(r=(e=this.core.window.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e).getTargeting(t))!=null?n:[]}_onDvtagReady(t,e){return T(this,null,function*(){yield new Promise(r=>{this.core.window.dvtag.queueAdRequest({callback:()=>{try{e==null||e()}catch(n){}r()},timestamp:new Date().getTime(),timeout:750,internal:!0})})})}};o(X,"LegacyLayer"),s([C],X.prototype,"_initialize",1),s([p(_,"userTargetingUpdated")],X.prototype,"_setUserTargetingOnPts",1),s([p(_,"pageTargetingUpdated")],X.prototype,"_setPageTargetingOnPts",1),s([p(_,"slotTargetingUpdated")],X.prototype,"_setSlotTargetingOnPts",1),X=s([u],X);var Rt=class extends b{_getEnabledSignals(){return"IDS"}};o(Rt,"SignalsIds"),s([p(_,"getEnabledSignals")],Rt.prototype,"_getEnabledSignals",1),Rt=s([u],Rt);var _t=class extends b{_getEnabledSignals(){return"BSC"}};o(_t,"SignalsBsc"),s([p(_,"getEnabledSignals")],_t.prototype,"_getEnabledSignals",1),_t=s([u],_t);var Et=class extends b{_getEnabledSignals(){return"VLP"}};o(Et,"SignalsVlp"),s([p(_,"getEnabledSignals")],Et.prototype,"_getEnabledSignals",1),Et=s([u],Et);var yt=class extends b{_getEnabledSignals(){return"TVP"}};o(yt,"SignalsTvp"),s([p(_,"getEnabledSignals")],yt.prototype,"_getEnabledSignals",1),yt=s([u],yt);var fe=class fe{set(t,e){t.setVariable(this,e)}get(t){return t.getVariable(this)}getOrDefault(t,e){return t.hasVariable(this)?this.get(t):(this.set(t,e),e)}getOrDefaultFromFunction(t,e){if(t.hasVariable(this))return this.get(t);let r=e();return this.set(t,r),r}delete(t){t.clearVariable(this)}};o(fe,"SlotVariable");var I=fe;var v=class{getWindow(){return this.core.window}getDocument(){return this.getWindow().document}getUserAgent(){var t,e;return(e=(t=this.getWindow().navigator)==null?void 0:t.userAgent)!=null?e:""}getPageUrl(){var t,e;return(e=(t=this.getWindow().location)==null?void 0:t.href)!=null?e:""}getHostname(){return new URL(this.getPageUrl()).hostname}getNavigator(){return this.getWindow().navigator}getPerformance(){var t;return(t=this.getWindow().performance)!=null?t:{}}getPerformanceTimeMs(){var t,e,r;return Math.floor((r=(e=(t=this.getPerformance()).now)==null?void 0:e.call(t))!=null?r:null)}isInQuirksMode(){return this.getDocument().compatMode==="BackCompat"}};o(v,"Environment"),v=s([u],v);var Ke=o((i,t=!0)=>{let e=document.createElement("script");return e.setAttribute("src",i),t&&e.setAttribute("async",""),e},"createScriptElement");var zt=o((i,t)=>{i.appendChild(t)},"addElement");var Ir=o(i=>new Promise((e,r)=>{let n=Ft(i);n!=null&&n.readyState==="complete"&&e(),i.addEventListener("load",()=>{e()}),i.addEventListener("error",()=>{r(new Error("Failed to load iframe"))})}),"waitForIframeReady"),ze=o((i,t)=>T(void 0,null,function*(){yield Ir(i);let e=Ft(i);if(e==null)throw new Error("Failed to set content to iframe");zt(e.body,t)}),"setIframeContent"),Ft=o(i=>{try{return i&&(i.contentDocument||i.contentWindow&&i.contentWindow.document||frames&&frames[i.name]&&frames[i.name].document)}catch(t){return null}},"getIframeDocument");var Ht=o((i,t)=>{try{if(Ft(i)===null)return!0;if(i.src===""||i.src==="about:blank")return!1;let e=new URL(i.src),r=new URL(t.location.href);return e.origin!==r.origin}catch(e){return!0}},"isCrossOriginIframe");var xr="google_ads_iframe_",He=o(i=>{if(i==null)return null;let t=i.querySelectorAll(`iframe[id^="${xr}"]`);return t.length===1?t[0]:null},"lookupGptIframe");var Ye=o((i,t)=>{var m;let e=i.document.getElementById(t);if(e==null)return{element:null};let r=He(e);if(r==null)return{element:e};if(Ht(r,i))return{element:r};let l=Ft(r),c=(m=l==null?void 0:l.body)!=null?m:null;return c==null?{element:r}:{element:c,parentIframe:r}},"getGptAdContainer");var ft=class{constructor(){a(this,"_getGptAdContainer",Ye)}getAdContainer(t){let e=this.core.get(v).getWindow();return t.source==="gpt"?this._getGptAdContainer(e,t.elementId):{element:e.document.getElementById(t.elementId)}}};o(ft,"AdLocator"),ft=s([u],ft);var y=class{constructor(){a(this,"adEmpty",new I);a(this,"adRequestInFlight",new I);a(this,"nonEmptyAdResponses",new I);a(this,"plugins",{adRequested:t=>[],adRequestedOrInferred:t=>[],adRendered:(t,e,r)=>[],adRemoved:t=>[]})}setAdRequested(t){this.adRequestInFlight.set(t,!0),this.plugins.adRequested(t),this.plugins.adRequestedOrInferred(t)}setAdRendered(t,e){this.adRequestInFlight.get(t)!==!0&&this.plugins.adRequestedOrInferred(t),this.setAdRemoved(t),this.adEmpty.set(t,!1),this.adRequestInFlight.set(t,!1),e!=null&&this.nonEmptyAdResponses.set(t,this.nonEmptyAdResponses.getOrDefault(t,0)+1);let r=this.core.get(ft).getAdContainer(t);this.plugins.adRendered(t,e,r)}setAdRemoved(t){this.adEmpty.get(t)===!1&&(this.adEmpty.set(t,!0),this.plugins.adRemoved(t))}getNonEmptyAdRenderedCount(t){return this.nonEmptyAdResponses.getOrDefault(t,0)}};o(y,"AdServerHub"),y=s([u],y);var J=class{getPubAds(){var e,r;let t=this.core.get(v).getWindow();try{return(r=(e=t.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e)}catch(n){return}}onPubAdsReady(t){var n,l,c,m;let e=this.core.get(v).getWindow();e.googletag=(n=e.googletag)!=null?n:{},e.googletag.cmd=(l=e.googletag.cmd)!=null?l:[];let r=this.getPubAds();if(r!=null)t(r);else try{(m=(c=e.googletag.cmd)==null?void 0:c.push)==null||m.call(c,()=>{r=this.getPubAds(),r!=null&&t(r)})}catch(f){}}};o(J,"GoogletagPubAds"),J=s([u],J);var q=class{constructor(){a(this,"gptReference",new I);a(this,"plugins",{slotDiscovered:(t,e)=>[],slotDestroyed:t=>[]});a(this,"_gptSlotToTargetable",Bt)}_scanForSlots(){this.core.get(J).onPubAdsReady(t=>{t.getSlots().map(e=>this.maybeDiscoverSlot(e,0))})}maybeDiscoverSlot(t,e){let r=this.core.get(S).getSlot("gpt",t.getSlotElementId());return r==null||this.gptReference.get(r)!==t?this._createSlot(t,e):r}_createSlot(t,e){let r=t.getSlotElementId(),n=t.getAdUnitPath(),l=kt(n),c=this.core.get(D).getAdPositionKey(l),m=Vt(t,c),f=this._gptSlotToTargetable(t,A=>{var w,M,P;return(P=(M=(w=this.core.window.googletag)==null?void 0:w.pubads)==null?void 0:M.call(w).getTargeting(A))!=null?P:[]});return this.core.get(S).createSlot("gpt",e,r,m,f,A=>this.gptReference.set(A,t))}_onSlotDiscovered(t,e){t.source==="gpt"&&this.plugins.slotDiscovered(t,e)}_onSlotDestroyed(t){t.source==="gpt"&&this.plugins.slotDestroyed(t)}};o(q,"GoogletagSlots"),s([C,p(R,"adRequestQueued")],q.prototype,"_scanForSlots",1),s([p(S,"slotDiscovered")],q.prototype,"_onSlotDiscovered",1),s([p(S,"slotDestroyed")],q.prototype,"_onSlotDestroyed",1),q=s([u],q);var Z=class{constructor(){a(this,"plugins",{adRemoved:t=>[]})}_monitorAdRemoval(t){if(t.source!=="gpt")return;let e=this.core.get(v).getDocument().getElementById(t.elementId);if(e==null)return;new MutationObserver(n=>{let l=n.length,c=[...n].reverse(),m=0,f=e.children.length;for(let h of c){if(f===0){this.plugins.adRemoved(t);break}if(m===l-1)break;let A=h.removedNodes.length-h.addedNodes.length;f+=A,m++}}).observe(e,{childList:!0})}_onSlotDestroyed(t){this.plugins.adRemoved(t)}};o(Z,"GoogletagAdRemoved"),s([p(q,"slotDiscovered")],Z.prototype,"_monitorAdRemoval",1),s([p(q,"slotDestroyed")],Z.prototype,"_onSlotDestroyed",1),Z=s([u],Z);var Wt=o(i=>{if(typeof i=="string"||Array.isArray(i)&&i.length===2&&i.every(t=>typeof t=="number"))return i},"cleanSizeInput");var V=o(i=>{if(typeof i=="string")return i;if(typeof i=="number")return`${i}`},"cleanStringInput");var tt=class{constructor(){a(this,"plugins",{adRequested:t=>[],adRendered:(t,e)=>[]})}_initialize(){this.core.get(J).onPubAdsReady(t=>{t.addEventListener("slotRequested",e=>{let r=this.core.get(q).maybeDiscoverSlot(e.slot,1);this.plugins.adRequested(r)}),t.addEventListener("slotRenderEnded",e=>{let r=this.core.get(q).maybeDiscoverSlot(e.slot,2);if(e.isEmpty){this.plugins.adRendered(r,null);return}let n={advertiserId:V(e.advertiserId),campaignId:V(e.campaignId),creativeId:V(e.creativeId),lineItemId:V(e.lineItemId),renderedSize:Wt(e.size)};this.plugins.adRendered(r,n)})})}};o(tt,"GoogletagEvents"),s([C],tt.prototype,"_initialize",1),tt=s([u],tt);var B=class{_onAdRequested(t){this.core.get(y).setAdRequested(t)}_onAdRendered(t,e){this.core.get(y).setAdRendered(t,e)}_onAdRemoved(t){this.core.get(y).setAdRemoved(t)}};o(B,"Googletag"),s([p(tt,"adRequested")],B.prototype,"_onAdRequested",1),s([p(tt,"adRendered")],B.prototype,"_onAdRendered",1),s([p(Z,"adRemoved")],B.prototype,"_onAdRemoved",1),B=s([u],B);var L=class{constructor(){a(this,"plugins",{log:(...t)=>[],info:(...t)=>[],debug:(...t)=>[],warn:(...t)=>[],error:(...t)=>[]})}log(...t){this.plugins.log(...t)}info(...t){this.plugins.info(...t)}debug(...t){this.plugins.debug(...t)}warn(...t){this.plugins.warn(...t)}error(...t){this.plugins.error(...t)}};o(L,"Logging"),L=s([u],L);var We={GPT_MEASUREMENT:"on",CREATIVE_WRAPPER:"off",MEASUREMENT_INJECTION_TIMING:"onAdRendered (deprecated)",MEASUREMENT_INJECTION_STRATEGY:"preferPiggyback (deprecated)",F9_AD_LOCATORS_SEPARATE_TASKS:"on (deprecated)",AD_CONTAINER_LOCATION_STRATEGY:"preferGptIframeBody (deprecated)",FALCON_TEST:"off",FALCON_TEST_SCRIPT_FLAVOR:"cdn"},It={variations:[{weight:99,featureFlags:{GPT_MEASUREMENT:"on",CREATIVE_WRAPPER:"off",FALCON_TEST:"on",FALCON_TEST_SCRIPT_FLAVOR:"cdn"}},{weight:1,featureFlags:{GPT_MEASUREMENT:"on",CREATIVE_WRAPPER:"off",FALCON_TEST:"on",FALCON_TEST_SCRIPT_FLAVOR:"falcon"}}]};var z=class{constructor(){a(this,"config");a(this,"plugins",{provideConfig:(t,e)=>[]})}_getConfiguration(){if(this.config!=null)return this.config;let{ctx:t,cmp:e}=this.core.get(E).getTagInfo(),r=this.plugins.provideConfig(t,e);if(r.length>1)throw new Error("Not allowed to use more than one config module in the build");if(r.length===1){let n=r[0],{variations:l}=n,c=ve(n,["variations"]),m=l==null;m&&this.core.get(L).warn("Publisher-specific config has no variations, using variation from default config"),this.config=ot(F(F({},It),c),{variations:m?It.variations:l})}else this.core.get(L).warn("No publisher-specific config included in build, using default config"),this.config=It;return this.core.get(L).info("Configuration",this.config),this.config}getVariations(){return this._getConfiguration().variations}getAdFormats(){var t;return(t=this._getConfiguration().adFormats)!=null?t:[]}};o(z,"ConfigModule"),z=s([u],z);var wr=o(i=>Math.random()*i,"scaledRandom"),$e=o(i=>{var m;let t=i.map(f=>f.item),e=i.map(f=>f.weight),r=e.reduce((f,h)=>{var M;let A=(M=f[f.length-1])!=null?M:0,w=h+A;return[...f,w]},[]),n=r[r.length-1],l=wr(n),c=(m=r.map((f,h)=>({cumWeight:f,index:h})).find(({cumWeight:f})=>l<f))==null?void 0:m.index;return c!=null?{selectedItem:t[c],weight:e[c],weightsSum:n}:null},"weightedRandom");var at=class{constructor(){a(this,"variationSelection");a(this,"plugins",{variationSelected:t=>[]});a(this,"_weightedRandom",$e)}_initialize(){this._selectVariationOnce()}_selectVariationOnce(){if(this.variationSelection!=null)return this.variationSelection;let t=this.core.get(z).getVariations(),e=this._weightedRandom(t.map(r=>({item:r,weight:r.weight})));if(e!=null){let{selectedItem:r,weight:n,weightsSum:l}=e;this.variationSelection={featureFlags:Object.assign({},We,r.featureFlags),fraction:{numerator:n,denominator:l}}}else throw new Error("No variation selected");return this.core.get(L).info("Selected variation",this.variationSelection),this.plugins.variationSelected(this.variationSelection),this.variationSelection}getFeatureFlags(){return this._selectVariationOnce().featureFlags}getVariationFraction(){return this._selectVariationOnce().fraction}};o(at,"VariationsModule"),s([C],at.prototype,"_initialize",1),at=s([u],at);var Q=class{_getVariationFlags(){return this.core.get(at).getFeatureFlags()}get(t){return this._getVariationFlags()[t]}};o(Q,"FeatureFlags"),Q=s([u],Q);var Xe=o((i,t,e="")=>{if(i.length<=t)return i;let r=t-e.length;return r<0?e:i.slice(0,r)+e},"truncate");var Je="https://cdn.doubleverify.com/dvtp_src.js",Ze="https://cdn.dv.tech/dvbm.js";var tr={cmp:"cmp",ctx:"ctx",isSellerTag:"seltag",blocking:"blk",t2te:"t2te",deepIFrameClickHandlers:"dich",measurementActivationPath:"dvp_pubaap",unityTagBuildTimestamp:"dvp_uptbts",unityTagBuildCommitId:"dvp_uptbcid",adServerCode:"adsrv",adServerId:"dvp_gptmasid",pageVisitId:"dvp_uptpid",slotId:"dvp_uptsid",slotElementId:"dvp_uptseid",selectedVariation:"dvp_gptmvr",selectedVariationFraction:"dvp_gptmvrfr",customDimension1:"c1",customDimension2:"c2",customDimension3:"c3",customDimension4:"c4",customDimension5:"c5",customDimension6:"c6",customDimension7:"c7",customDimension8:"c8",customDimension9:"c9",customDimension10:"c10",adPosition:"spos",qtPageId:"dvp_qtpid",qtSlotId:"dvp_qtsid",headerBidding:"dvp_gptmhb",advertiserId:"sadv",orderId:"ord",lineItemId:"litm",creativeId:"scrt",placementCode:"splc",size:"unit",slotAdCount:"dvp_uptsacnt",locatedElementType:"dvp_gptmle",adLocationMechanism:"alm",btreg:"btreg",btattb:"btattb",bttag:"bttag",btadsrv:"btadsrv",detectedAdFormats:"dvp_pubdaf",adTargetingError:"dvp_pubate",creativeWrapperAvailable:"dvp_gptmcw",isFalconTestEnabledDVP:"dvp_pubaft",isFalconTestEnabledEE:"ee_dp_pubaft",measurementInjectionStrategy:"dvp_gptmit"};var x=class{constructor(){a(this,"parameters",new I);a(this,"_falconTestEnabled");a(this,"_falconEnabled");a(this,"_truncate",Xe);a(this,"_isCrossOriginIframe",Ht)}_set(t,e){Object.assign(this.parameters.getOrDefault(t,{}),e)}_isFalconTestEnabled(){var t;return(t=this._falconTestEnabled)!=null?t:this._falconTestEnabled=this.core.get(Q).get("FALCON_TEST")==="on"}_isFalconEnabled(){var t;return(t=this._falconEnabled)!=null?t:this._falconEnabled=this._isFalconTestEnabled()&&this.core.get(Q).get("FALCON_TEST_SCRIPT_FLAVOR")==="falcon"}_getScriptUrl(t){let e=new URLSearchParams,r=this.parameters.getOrDefault(t,{});for(let[l,c]of Object.entries(r)){let m=tr[l];c!=null&&e.set(m,`${c}`)}let n=new URL(this._isFalconEnabled()?Ze:Je);return n.hash=e.toString(),n.href}createScriptElement(t,e){var c;let r=this._getScriptUrl(t),l=this.core.get(v).getDocument().createElement("script");return l.setAttribute("src",r),l.setAttribute("async",""),l.dvAdElement=(c=e.parentIframe)!=null?c:e.element,l}setIdentifiers(t){let{ctx:e,cmp:r}=this.core.get(E).getTagInfo();this._set(t,{ctx:e,cmp:r})}setConstants(t){this._set(t,{isSellerTag:1,t2te:0,blocking:this._isFalconEnabled()?0:void 0,measurementActivationPath:2,deepIFrameClickHandlers:1,unityTagBuildTimestamp:this.core.get(k).getBuildTimestamp(),unityTagBuildCommitId:this.core.get(k).getShortCommitId()})}setAdUnit(t){this._set(t,{adServerCode:"104",adServerId:this.core.get(D).getAdServerId(t.adUnit.network),pageVisitId:this.core.get(E).getVisitUuid(),slotId:t.uuid,slotElementId:this._truncate(t.elementId,30,"~")})}_getCustomDimension(t,e){var l;let n=(l=this.core.get(D).getAdServerCustomTracking(t.adUnit.network)[e])==null?void 0:l.key;return n!=null?t.getAdServerTargeting(n).join(","):void 0}setCustomDimensions(t){this._set(t,{customDimension1:this._getCustomDimension(t,"c1"),customDimension2:this._getCustomDimension(t,"c2"),customDimension3:this._getCustomDimension(t,"c3"),customDimension4:this._getCustomDimension(t,"c4"),customDimension5:this._getCustomDimension(t,"c5"),customDimension6:this._getCustomDimension(t,"c6"),customDimension7:this._getCustomDimension(t,"c7"),customDimension8:this._getCustomDimension(t,"c8"),customDimension9:this._getCustomDimension(t,"c9"),customDimension10:this._getCustomDimension(t,"c10")})}_getAdPosition(t){let e=this.core.get(D).getAdPositionKey(t.adUnit.network);return t.getAdServerTargeting(e)[0]}setQualityTargeting(t){this._set(t,{adPosition:this._getAdPosition(t),qtPageId:this.core.get(E).getVisitUuid(),qtSlotId:t.uuid})}_sizeToString(t){return Array.isArray(t)?`${t[0]}x${t[1]}`:t}setAdInstance(t,e){this._set(t,{advertiserId:e.advertiserId,orderId:e.campaignId,lineItemId:e.lineItemId,creativeId:e.creativeId,placementCode:t.adUnit.id,size:this._sizeToString(e.renderedSize)})}setEngagement(t){this._set(t,{slotAdCount:this.core.get(y).getNonEmptyAdRenderedCount(t)})}_getLocatedElementType(t){let e=this.core.get(v).getWindow(),{element:r,parentIframe:n}=t;return r==null?0:n!=null?4:r instanceof HTMLIFrameElement?this._isCrossOriginIframe(r,e)?2:1:0}setAdLocation(t,e){this._set(t,{locatedElementType:this._getLocatedElementType(e),adLocationMechanism:"manual"})}setCustomAdFormat(t,e){e!=null&&this._set(t,F({adLocationMechanism:void 0},e))}setDebug(t){let e=this._isFalconTestEnabled()?1:void 0;this._set(t,{isFalconTestEnabledDVP:e,isFalconTestEnabledEE:e,measurementInjectionStrategy:0})}};o(x,"MeasurementScript"),x=s([u],x);var lt=class{constructor(){a(this,"_setIframeContent",ze);a(this,"_addElement",zt);a(this,"iframeElements",new I)}_applyDebugInfo(t,e){e.setAttribute("id",`gptm-${t.elementId}`),e.dataset.slotId=t.uuid,e.dataset.slotAdCount=`${this.core.get(y).getNonEmptyAdRenderedCount(t)}`}injectScriptElement(t,e){let r=this.core.get(v).getDocument(),n=r.createElement("iframe");n.style.display="none",this.iframeElements.set(t,n),this._applyDebugInfo(t,n),this._addElement(r.body,n),this._setIframeContent(n,e)}removeScriptElement(t){var e;try{(e=this.iframeElements.get(t))==null||e.remove(),this.iframeElements.delete(t)}catch(r){}}};o(lt,"MeasurementScriptInjection"),lt=s([u],lt);var er=o((i,t)=>i.filter(e=>e.detect(t)),"detectAdFormats");var rr=o((i,t)=>{let e=null,r=[],n=0;t!=null&&(r=er(i,t),r.length===1&&(e=r[0].target(t))),e==null&&(t==null&&(n|=1),r.length>1&&(n|=2),r.length===1&&(n|=4));let l={detectedAdFormats:r};return n>0&&(l.adTargetingErrorCode=n),{adTarget:e,diagnostics:l}},"getAdFormatsTargeting");var ht=class{constructor(){a(this,"_getAdFormatsTargeting",rr)}_getContextNode(t){let e=t.element;if(t.parentIframe!=null)try{e=t.parentIframe.contentDocument}catch(r){}return e}_encodeDetectedAdFormats(t){return t.map(e=>e.id).reduce((e,r)=>e|r,0)}detectCustomAdFormat(t){let{adTarget:e,diagnostics:r}=this._getAdFormatsTargeting(this.core.get(z).getAdFormats(),this._getContextNode(t));return e==null?null:ot(F(F({},e),r),{detectedAdFormats:this._encodeDetectedAdFormats(r.detectedAdFormats)})}};o(ht,"CustomAdFormats"),ht=s([u],ht);var et=class{constructor(){a(this,"deduplicationSet",new I);a(this,"deduplicationReliable",new I)}_setDeduplicationTargeting(t){let e=this.core.get(Q).get("CREATIVE_WRAPPER")==="on";t.setUptSlotTargeting({dv_upt_cwm:[e?"1":"0"]}),this.deduplicationSet.set(t,!0)}_onAdRequested(t){this.deduplicationReliable.set(t,this.deduplicationSet.get(t)===!0)}isDeduplicationReliable(t){return this.deduplicationReliable.get(t)===!0}};o(et,"DuplicateMeasurement"),s([p(S,"slotDiscovered")],et.prototype,"_setDeduplicationTargeting",1),s([p(y,"adRequested")],et.prototype,"_onAdRequested",1),et=s([u],et);var rt=class extends b{_isEligibleForMeasurement(t){return this.core.get(Q).get("GPT_MEASUREMENT")!=="off"&&(t.source==="custom"||this.core.get(D).isAdServerConfigured(t.adUnit.network))}_isReadyForMeasurement(t){return this._isEligibleForMeasurement(t)&&(t.source==="custom"||this.core.get(et).isDeduplicationReliable(t))}_onSlotDiscovered(t){this._isEligibleForMeasurement(t)&&(this.core.get(x).setIdentifiers(t),this.core.get(x).setConstants(t),this.core.get(x).setAdUnit(t))}_onAdRequested(t){this._isEligibleForMeasurement(t)&&(this.core.get(x).setCustomDimensions(t),this.core.get(x).setQualityTargeting(t))}_onAdRendered(t,e,r){if(e==null||!this._isReadyForMeasurement(t))return;this.core.get(x).setAdInstance(t,e),this.core.get(x).setEngagement(t),this.core.get(x).setAdLocation(t,r),this.core.get(x).setDebug(t);let n=this.core.get(ht).detectCustomAdFormat(r);this.core.get(x).setCustomAdFormat(t,n);let l=this.core.get(x).createScriptElement(t,r);this.core.get(lt).injectScriptElement(t,l)}_onAdRemoved(t){this.core.get(lt).removeScriptElement(t)}};o(rt,"GptMeasurement"),s([p(S,"slotDiscovered")],rt.prototype,"_onSlotDiscovered",1),s([p(y,"adRequestedOrInferred")],rt.prototype,"_onAdRequested",1),s([p(y,"adRendered")],rt.prototype,"_onAdRendered",1),s([p(y,"adRemoved")],rt.prototype,"_onAdRemoved",1),rt=s([u,N(B)],rt);var ir=o(i=>i,"asStrictString");var Pr=o(i=>{var t;return(t=i.ownerDocument)!=null?t:i},"getDocument");var Ur=o((i,t)=>Pr(t).evaluate(i,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),"getAllNodesByXpath"),nr=o((i,t)=>Ur(i,t).iterateNext()!=null,"hasXpathMatches");var or={name:"Weather Channel - Integrated Marquee Large Web",id:1,detect:i=>nr('.//div[@id="labBG"]',i),target:()=>({btreg:ir("labBG")})};var sr="29468306",vt=class{_provideConfig(t){return t!==sr?(this.core.get(L).error(`Invalid ctx provided for WeatherConfig, got ${t}, expected ${sr}`),{}):ot(F({},It),{adFormats:[or]})}};o(vt,"WeatherConfig"),s([p(z,"provideConfig")],vt.prototype,"_provideConfig",1),vt=s([u],vt);var St=o(()=>{var i,t,e;return Math.floor((e=(t=(i=window.performance)==null?void 0:i.now)==null?void 0:t.call(i))!=null?e:Date.now())},"perfNowOrDateNow");var he=class he{constructor(){a(this,"_firstQueuedAdRequest",1/0);a(this,"_lastQueuedAdRequest",-1/0);a(this,"_firstReleasedAdRequest",1/0);a(this,"_lastReleasedAdRequest",-1/0);a(this,"_lastReleasedAdRequestTime",null);a(this,"_hasBeenSuccessful",!1)}setAdRequestQueued(t){this._firstQueuedAdRequest=Math.min(this._firstQueuedAdRequest,t),this._lastQueuedAdRequest=Math.max(this._lastQueuedAdRequest,t)}setAdRequestReleased(t){this._firstReleasedAdRequest=Math.min(this._firstReleasedAdRequest,t),this._lastReleasedAdRequest=Math.max(this._lastReleasedAdRequest,t),this._lastReleasedAdRequestTime=St()}getLastQueuedAdRequest(){return Number.isFinite(this._lastQueuedAdRequest)?this._lastQueuedAdRequest:null}getLastReleasedAdRequest(){return Number.isFinite(this._lastReleasedAdRequest)?this._lastReleasedAdRequest:null}getLastReleasedAdRequestTime(){return this._lastReleasedAdRequestTime}getLastSuccessfulAdRequest(){let t=Math.max(this._firstQueuedAdRequest,this._firstReleasedAdRequest),e=Math.min(this._lastQueuedAdRequest,this._lastReleasedAdRequest);return e<t?null:e}getPreviouslySuccessful(){return this._hasBeenSuccessful}markAdServerAdRequest(){this.getLastSuccessfulAdRequest()!=null&&(this._hasBeenSuccessful=!0),this._firstQueuedAdRequest=1/0,this._lastQueuedAdRequest=-1/0,this._firstReleasedAdRequest=1/0,this._lastReleasedAdRequest=-1/0,this._lastReleasedAdRequestTime=null}};o(he,"SlotAdRequestTracker");var $t=he;var Xt=(c=>(c.UNKNOWN="UNKNOWN",c.SEEN="SEEN",c.NOT_READY="NOT_READY",c.POSSIBLE_TIMEOUT="POSSIBLE_TIMEOUT",c.PREV_READY="PREV_READY",c.READY="READY",c))(Xt||{});var Se="dv_upt_slot_ready",Dr=["https://securepubads.g.doubleclick.net/gampad/ads?","https://pagead2.googlesyndication.com/gampad/ads?"],Or=750,O=class{constructor(){a(this,"plugins",{onSlotRequested:()=>[],onSlotRequestValidated:()=>[]});a(this,"validateAdRequests",!1);a(this,"lastAdRequestQueued",null);a(this,"lastAdRequestReleased",null);a(this,"state",{adRequestTracker:new I,triggered:new I})}_getSlotAdRequestTracker(t){return this.state.adRequestTracker.getOrDefaultFromFunction(t,()=>new $t)}_onAdRequestQueued({index:t}){this.lastAdRequestQueued=t;for(let e of this.core.get(S).getSlots())this._getSlotAdRequestTracker(e).setAdRequestQueued(t),this.state.triggered.set(e,!1)}_onAdRequestBeforeRelease({index:t}){this.lastAdRequestReleased=t;for(let e of this.core.get(S).getSlots())this._getSlotAdRequestTracker(e).setAdRequestReleased(t),this.validateAdRequests&&e.setUptSlotTargeting({[Se]:["1"]})}_onSlotDiscovered(t,e){e===0&&this.lastAdRequestQueued!=null&&this._getSlotAdRequestTracker(t).setAdRequestQueued(this.lastAdRequestQueued)}_determineReadyState(t){let e=this._getSlotAdRequestTracker(t),r=e.getLastQueuedAdRequest(),n=e.getLastSuccessfulAdRequest(),l=e.getPreviouslySuccessful();return n!=null?"READY":l?"PREV_READY":r!=null?"NOT_READY":Date.now()-t.creationTime>Or?"SEEN":"UNKNOWN"}getSlotReadyStateOnAdServerAdRequest(t){let e=this._determineReadyState(t);if(e==="READY"){if(this.state.triggered.get(t)===!0)return{readyState:"PREV_READY"};this.state.triggered.set(t,!0);let r=this._getSlotAdRequestTracker(t).getLastReleasedAdRequestTime();return{readyState:e,readyFor:St()-r}}return{readyState:e}}_onSlotRequested(t){let{readyState:e,readyFor:r}=this.getSlotReadyStateOnAdServerAdRequest(t);this._getSlotAdRequestTracker(t).markAdServerAdRequest(),this.validateAdRequests&&t.setUptSlotTargeting({[Se]:["0"]}),this.plugins.onSlotRequested(t,e,r)}enableAdRequestValidation(){if(!this.validateAdRequests)try{let t=this._processResourceRequest.bind(this);new PerformanceObserver(r=>r.getEntries().forEach(t)).observe({type:"resource"}),this.validateAdRequests=!0}catch(t){}}_processResourceRequest(t){var e,r,n;try{if(Dr.every(m=>!t.name.startsWith(m)))return;let c=(r=(e=new URL(t.name).searchParams.get("prev_scp"))==null?void 0:e.split("|"))!=null?r:[];for(let m of c){let h=((n=new URLSearchParams(m).get(Se))==null?void 0:n[0])==="1";this.plugins.onSlotRequestValidated(h)}}catch(l){}}};o(O,"SlotReadinessTracker"),s([p(R,"adRequestQueued")],O.prototype,"_onAdRequestQueued",1),s([p(R,"adRequestBeforeRelease"),p(R,"adRequestTimedOut")],O.prototype,"_onAdRequestBeforeRelease",1),s([p(S,"slotDiscovered")],O.prototype,"_onSlotDiscovered",1),s([p(y,"adRequested")],O.prototype,"_onSlotRequested",1),O=s([u],O);var Te="__dvtag_debug_mode",ar="1",H=class{constructor(){a(this,"enabled",!1);a(this,"debugScriptLoaded",o(t=>{},"debugScriptLoaded"));a(this,"debugScriptLoadedPromise",new Promise(t=>{this.debugScriptLoaded=t}))}_initialize(){try{this.enabled=window===window.top&&this.core.window.sessionStorage.getItem(Te)===ar}catch(t){}this.enabled&&(this.core.get(R).delayAdRequests(this.debugScriptLoadedPromise),this._loadDebugScript())}_toggleDebugMode(){return T(this,null,function*(){this.enabled?this.core.window.sessionStorage.removeItem(Te):this.core.window.sessionStorage.setItem(Te,ar),this.core.window.location.reload()})}_onDebugScriptLoaded(){this.debugScriptLoaded(void 0)}_loadDebugScript(){return T(this,null,function*(){let{ctx:t,cmp:e}=this.core.get(E).getTagInfo(),{document:r}=this.core.window,n=Ke(`https://pub.doubleverify.com/dvtag/${t}/${e}/debug.js`,!0);r.readyState==="loading"&&(yield new Promise(l=>r.addEventListener("DOMContentLoaded",()=>l(void 0)))),r.head.appendChild(n)})}_onAdRequestEvent(t){var e;(e=window.dvtagDebug)==null||e.adRequestEvent(t)}};o(H,"DebugScriptLoader"),s([C],H.prototype,"_initialize",1),s([st("toggleDebugMode")],H.prototype,"_toggleDebugMode",1),s([st("_debugScriptLoaded")],H.prototype,"_onDebugScriptLoaded",1),s([p(R,"adRequestQueued"),p(R,"adRequestBeforeRelease"),p(R,"adRequestTimedOut")],H.prototype,"_onAdRequestEvent",1),H=s([N(O),u],H);var Ae="qt_loaded",Jt="pts_pid",lr="pts_sid";var Re=o(i=>[...new Set(i.filter(qe).map(t=>t.toLowerCase()))],"getGreenlightSignal");var it=class extends b{_autoInsertPageId(t){this.core.get(S).setUptPageTargeting({[Jt]:[t.uuid]})}_autoInsertSlotId(t){t.setUptSlotTargeting({[lr]:[t.uuid]})}_autoInsertGlobalTargeting(t){this.core.get(S).addUptPageTargeting({[Ae]:Re(Object.keys(t))})}_autoInsertSlotTargeting(t,e){t.addUptSlotTargeting({[Ae]:Re(Object.keys(e))})}};o(it,"SignalsAutoInsertion"),s([p(E,"newVisit")],it.prototype,"_autoInsertPageId",1),s([p(S,"slotDiscovered")],it.prototype,"_autoInsertSlotId",1),s([p(_,"userTargetingUpdated"),p(_,"pageTargetingUpdated")],it.prototype,"_autoInsertGlobalTargeting",1),s([p(_,"slotTargetingUpdated")],it.prototype,"_autoInsertSlotTargeting",1),it=s([u,N(B),N(H)],it);var qr="https://vtrk.doubleverify.com",dr="dvtag",Fr=1,Nr=1,Y=class{constructor(){a(this,"sharedDataPoints")}_onAdRequestCompleted(t){if(t.index!==0)return;let{timeoutValue:e,onDvtagReadyCalled:r,callbackCalled:n}=t,l=n!=null?n-r:e;this.fireEvent("ad-request",{cd111:t.status,cm106:t.index,cm107:l,cd112:t.internal?"legacy":"modern"},{sampleInterval:Nr})}_handleError(t){this.fireEvent("log",{cd111:"error",cd112:t.message,cd113:t.trace.join("=>")},{sampleInterval:Fr})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let t=this.core.get(E),e=this.core.get(k),r=this.core.get(v),{ctx:n,cmp:l,legacy:c}=t.getTagInfo(),m=r.getHostname(),f=t.getVisitUuid(),h=e.getShortCommitId();this.sharedDataPoints={cd102:h,cd103:"",cd107:f,cd109:c?"legacy":"modern",cd108:"",cd105:n,cd106:l,cd104:m}}return this.sharedDataPoints}fireEvent(t,e,{sampleInterval:r=1,trackerUuid:n=ut(),spoofWrapperId:l=!1}={}){if(Math.random()>=1/r)return;e=ot(F(F({},e),this._getSharedDataPoints()),{cd101:t,cm101:r});let c=ot(F({ec:dr,ea:e.cd101,ctx:l?dr:e.cd105,cmp:e.cd106},e),{cid:n,t:"event",v:1,z:n,cd160:n}),m=new URL(qr);for(let[f,h]of Object.entries(c))h!=null&&m.searchParams.set(f,`${h}`);this._sendBeacon(m.href)}_sendBeacon(t){try{typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(t):new Image().src=t}catch(e){}}};o(Y,"Events"),s([p(R,"adRequestCompleted")],Y.prototype,"_onAdRequestCompleted",1),s([be],Y.prototype,"_handleError",1),Y=s([u],Y);var Lr=Jt,$=class{constructor(){a(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){for(let t of this.core.get(S).getSlots())t.getAdServerTargeting(Lr).length===0&&(t.forceFlushAllUptTargetingToAdServer(),this.restoreCount+=1)}};o($,"TargetingRestorer"),s([p(R,"adRequestQueued")],$.prototype,"_restoreTargeting",1),$=s([u],$);var _e=class _e{constructor(){a(this,"total",0);a(this,"dataPoints",0)}push(t){return this.total+=t,this.dataPoints+=1,this}get(){return this.total/this.dataPoints}getRounded(){return Math.round(this.get())}};o(_e,"Average");var Nt=_e;var Mr="implcheck",kr=1e-4,Vr=5e3,Br=5,W=class{constructor(){a(this,"enabled",!1);a(this,"totalInternalAdRequestQueuedCount",0);a(this,"totalAdRequestsCompletedCount",0);a(this,"totalSlotsRequestedCount",0);a(this,"totalSlotsRequestedOkCount",0);a(this,"totalTimeoutCount",0);a(this,"trackersSent",0);a(this,"totalValidatedAdServerRequests",{ok:0,notOk:0});a(this,"lastOnDvtagReadyCall",NaN);a(this,"slotReqAvgTimeSinceCall",new Nt);a(this,"slotReqAvgTimeSinceDone",new Nt);a(this,"batch",null)}isDebugForceEnabled(){return!1}_initialize(){this.enabled=this.core.get(W).isDebugForceEnabled()||Math.random()<kr,this.enabled&&this.core.get(O).enableAdRequestValidation()}_onAdRequestQueued(t){this.enabled&&(this.lastOnDvtagReadyCall=St(),t.internal&&(this.totalInternalAdRequestQueuedCount+=1))}_onAdRequestCompleted(t){this.enabled&&(this.totalAdRequestsCompletedCount+=1,(t.status==="tag-timeout"||t.status==="queue-timeout")&&(this.totalTimeoutCount+=1))}_onSlotRequested(t,e,r){if(!this.enabled)return;let n=this._getOrStartBatch();this.totalSlotsRequestedCount+=1,e==="READY"&&(this.totalSlotsRequestedOkCount+=1),n.slots[e].push(t.elementId),r!=null&&(this.slotReqAvgTimeSinceDone.push(r),this.slotReqAvgTimeSinceCall.push(St()-this.lastOnDvtagReadyCall));let l=t.validateAdServerTargeting();l===1?n.targeting.extendedCount+=1:l===0&&(n.targeting.reducedCount+=1)}_onSlotRequestValidated(t){t?this.totalValidatedAdServerRequests.ok+=1:this.totalValidatedAdServerRequests.notOk+=1}_sendTracker(){let t=this.core.get($).getRestoreCount(),{slots:e,targeting:r,start:n}=this._getOrStartBatch(),l={cd110:e.READY.join(),cd111:e.PREV_READY.join(),cd112:e.SEEN.join(),cd113:e.NOT_READY.join(),cd114:e.UNKNOWN.join(),cd115:e.POSSIBLE_TIMEOUT.join(),cm106:this.trackersSent,cm107:n,cm109:this.totalTimeoutCount,cm110:this.slotReqAvgTimeSinceCall.getRounded(),cm111:this.slotReqAvgTimeSinceDone.getRounded(),cm112:this.totalSlotsRequestedOkCount,cm113:this.totalValidatedAdServerRequests.ok,cm114:this.totalValidatedAdServerRequests.notOk,cm115:t,cm116:this.totalAdRequestsCompletedCount,cm117:this.totalInternalAdRequestQueuedCount,cm118:this.totalSlotsRequestedCount,cm119:r.reducedCount,cm120:r.extendedCount};this.core.get(Y).fireEvent(Mr,l),this.batch=null,this.trackersSent+=1,this.trackersSent>=Br&&(this.enabled=!1)}_getOrStartBatch(){return this.batch==null&&(this.batch={start:St(),slots:Object.fromEntries(Object.values(Xt).map(t=>[t,[]])),targeting:{extendedCount:0,reducedCount:0}},setTimeout(()=>this._sendTracker(),Vr)),this.batch}};o(W,"ImplementationValidator"),s([C],W.prototype,"_initialize",1),s([p(R,"adRequestQueued")],W.prototype,"_onAdRequestQueued",1),s([p(R,"adRequestCompleted")],W.prototype,"_onAdRequestCompleted",1),s([p(O,"onSlotRequested")],W.prototype,"_onSlotRequested",1),s([p(O,"onSlotRequestValidated")],W.prototype,"_onSlotRequestValidated",1),W=s([u],W);var nt=class{_defineSlot(t,e={}){if(typeof t!="string"||e==null||typeof e!="object")return;let r={id:V(e.id),network:V(e.network),sizes:e.sizes!=null?Ct(e.sizes):void 0,position:V(e.position)};this.core.get(S).createSlot("custom",0,t,r)}_adRendered(t,e){if(typeof t!="string"||e==null||typeof e!="object")return;let r=this.core.get(S).getSlot("custom",t);if(r==null)return;let n={advertiserId:V(e.advertiserId),campaignId:V(e.campaignId),creativeId:V(e.creativeId),lineItemId:V(e.lineItemId),renderedSize:Wt(e.renderedSize)};this.core.get(y).setAdRendered(r,n)}_adRemoved(t){if(typeof t!="string")return;let e=this.core.get(S).getSlot("custom",t);e!=null&&this.core.get(y).setAdRemoved(e)}_getTargeting(t){let e=this.core.get(S);if(typeof t!="string")return e.getUptPageTargeting();let r=e.getSlot("custom",t);return r==null?e.getUptPageTargeting():r.getUptTargeting()}};o(nt,"CustomAdServer"),s([st("defineSlot")],nt.prototype,"_defineSlot",1),s([st("getTargeting")],nt.prototype,"_getTargeting",1),nt=s([u],nt);var dt=class{constructor(){a(this,"initialized",!1);a(this,"size",0)}_initialize(){return T(this,null,function*(){if(yield Promise.resolve(),this.initialized)return;this.initialized=!0,this.core.dvtag.cmd instanceof Array||(this.core.dvtag.cmd=[]);let t=this.core.dvtag.cmd;this.core.dvtag.cmd={push:(...e)=>{for(let r of e)try{r()}catch(n){}return this.size+=e.length,this.size}},this.core.dvtag.cmd.push(...t)})}};o(dt,"CommandBuffer"),s([C],dt.prototype,"_initialize",1),dt=s([u],dt);var xt=class{};o(xt,"HouseHold"),xt=s([u,N(R),N(dt),N(Y),N(nt),N($)],xt);if(window.dvtag==null||window.dvtag._core==null)try{new Pt(se,window)}catch(i){}})();

</script>

</body>
</html>
