var PageLoadPerfUtils=function(){"use strict";const e=JSON.parse(document.currentScript.dataset.pgloadSampleRate||0),t=JSON.parse(document.currentScript.dataset.subtype||"null"),n=[40,200,500,1e3];function r(e){const t={};return["css","js","img","other"].forEach((function(e){t[e]=function(){const e=n.length+1,t=new Array(e);if(Array.prototype.fill)return t.fill(0);for(let n=0;n<e;n++)t[n]=0;return t}()})),e.forEach((function(e){const r=e.initiatorType,o=function(e){const t=n.length;for(let r=0;r<t;r++)if(e<=n[r])return r;return t}(Math.round(e.responseEnd-e.startTime)),i=new URL(e.name).pathname.split("/").pop().split(".").pop();if("script"==r||"js"==i)t.js[o]++;else switch(i){case"jpg":case"gif":case"png":case"svg":t.img[o]++;break;case"css":t.css[o]++;break;default:t.other[o]++}})),t}function o(){const e=function(){const e={},t=performance.timing;return e.pg=t.loadEventEnd-t.navigationStart,e.cnt=t.responseEnd-t.requestStart,e.intr=t.domInteractive-t.responseEnd,e.ren=t.domComplete-t.domInteractive,e}();if(0==e.pg)return;const t={sd:window.devicePixelRatio||0,vw:window.innerWidth||0,vh:window.innerHeight||0};let n={};performance.getEntriesByType&&(n=function(){const e={},t=r(window.performance.getEntriesByType("resource"));for(const n in t)e[n]=t[n].join(",");return e}(),n.fp=function(){let e=null;const t=window.performance.getEntriesByType("paint");for(let n=0;n<t.length;n++)if("first-contentful-paint"==t[n].name)return e=Math.round(t[n].startTime),e}());const o=PageLoadPerfUtils.pageSpecificStats&&PageLoadPerfUtils.pageSpecificStats()||{};return Object.assign({},e,n,o,t)}function i(){if(!(window.performance&&performance.timing&&(!performance.navigation||performance.navigation.type==PerformanceNavigation.TYPE_NAVIGATE)))return;const n=Math.random()*e;if(0==e||n<e-1)return;const r=o();console.log("pageload",r),!r.subtype&&t&&(r.subtype=t),r.subtype&&BCTracker.record("performance",r)}return window.addEventListener("load",(function(){setTimeout(i,5e3)})),{pageLoadStats:o}}();
