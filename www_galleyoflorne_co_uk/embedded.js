var MailMunchEmbedded=function(e){this.form=document.createElement("div"),MailMunchBaseForm.call(this,e)};MailMunchHelpers.inheritPrototype(MailMunchEmbedded,MailMunchBaseForm),MailMunchEmbedded.prototype.loadHTML=function(t){var i=this,e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-embedded-iframe-"+i.viewId);MailMunchHelpers.forEach(e,function(e){i._loadHTML(e,t)})},MailMunchEmbedded.prototype.addAutoEmbedCodes=function(){var t=this;if(!this.autoEmbedCodesAdded){var i="mailmunch-forms-widget-"+this.options.widgetID;if(this.autoEmbedDiv=document.createElement("div"),this.autoEmbedDiv.className=i,this.options.showBeforePost){var e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-forms-before-post");MailMunchHelpers.forEach(e,function(e){0==e.querySelectorAll("."+i).length&&(e.appendChild(t.autoEmbedDiv.cloneNode(!0)),e.style.cssText="display: block !important")})}if(this.options.showAfterPost){e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-forms-after-post");MailMunchHelpers.forEach(e,function(e){0==e.querySelectorAll("."+i).length&&(e.appendChild(t.autoEmbedDiv.cloneNode(!0)),e.style.cssText="display: block !important")})}if(this.options.showMiddlePost){e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-forms-in-post-middle");MailMunchHelpers.forEach(e,function(e){0==e.querySelectorAll("."+i).length&&(e.appendChild(t.autoEmbedDiv.cloneNode(!0)),e.style.cssText="display: block !important")})}this.autoEmbedCodesAdded=!0}},MailMunchEmbedded.prototype.prepare=function(){var i=this;if(!this.prepared){this.addAutoEmbedCodes(),this.form.className="mailmunch-embedded mailmunch-embedded-"+this.viewId,this.form.innerHTML='<iframe class="mailmunch-embedded-iframe mailmunch-embedded-iframe-'+this.viewId+'" title="'+this.options.widgetName+'" frameborder="0" scrolling="no" allowtransparency="true" style="background:transparent;border:0;width:100%;height:'+this.options.iframeHeight+"px;max-height:"+this.options.iframeHeight+'px;"></iframe>';var e=[this.options.widgetID];this.testWidgetIds&&0<this.testWidgetIds.length&&(e=e.concat(this.testWidgetIds));var s=!1;MailMunchHelpers.forEach(e,function(e){var t=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-forms-widget-"+e);0<t.length&&MailMunchHelpers.forEach(t,function(e){s=!0,e.innerHTML="",e.appendChild(i.form.cloneNode(!0)),e.style.cssText+=";display: block !important;"})}),!s&&i.retriesEmbed<10?this.retriesEmbedInterval||(this.retriesEmbedInterval=setInterval(function(){i.retriesEmbed++,i.prepare()},1e3)):(clearInterval(this.retriesEmbedInterval),this._afterPrepare())}},MailMunchEmbedded.prototype.resizeWidget=function(e,t){var i=this;this._beforeResize(e,t);var s=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-embedded-iframe-"+this.viewId);MailMunchHelpers.forEach(s,function(e){e.style.height=i.options.iframeHeight+"px",e.style.maxHeight=i.options.iframeHeight+"px",e.style.width="100%"})},MailMunchEmbedded.prototype.show=function(){if(this._beforeShow()){var e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-embedded-"+this.viewId);MailMunchHelpers.forEach(e,function(e){e.style.display="block"})}},MailMunchEmbedded.prototype.preview=function(){if(this._beforePreview()){var e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-embedded-"+this.viewId);MailMunchHelpers.forEach(e,function(e){e.style.display="block"})}},MailMunchEmbedded.prototype.hide=function(){var e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-embedded-"+this.viewId);MailMunchHelpers.forEach(e,function(e){e.style.display="none"})},MailMunchEmbedded.prototype.remove=function(){for(var e=MailMunchHelpers.getElementsByClassName(document.body,"mailmunch-embedded-"+this.viewId);0<e.length;)e[0].parentNode.removeChild(e[0])},MailMunchEmbedded.prototype.init=function(){if(!this.readied){this.readied=!0;var e=MailMunchHelpers.getParameterByName("mailmunch_preview"),t=""!=e&&e==this.options.widgetID;""==MailMunchHelpers.getCookie("mailmunch_subscribed_"+this.options.listID)||this.options.alwaysShow||(this.dont_show=!0),this.dont_show&&!t||(this.prepare(),t?this.preview():this.show())}};