<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>scripts.e2e22e719ab598ca.html</title>
</head>
<body>

<script>
(function(ll,Xs){"object"==typeof exports&&typeof module<"u"?module.exports=Xs():"function"==typeof define&&define.amd?define(Xs):(ll=typeof globalThis<"u"?globalThis:ll||self).bootstrap=Xs()})(this,function(){"use strict";const ll="transitionend",Xs=U=>{let w=U.getAttribute("data-bs-target");if(!w||"#"===w){let M=U.getAttribute("href");if(!M||!M.includes("#")&&!M.startsWith("."))return null;M.includes("#")&&!M.startsWith("#")&&(M=`#${M.split("#")[1]}`),w=M&&"#"!==M?M.trim():null}return w},cl=U=>{const w=Xs(U);return w&&document.querySelector(w)?w:null},Xr=U=>{const w=Xs(U);return w?document.querySelector(w):null},dl=U=>{U.dispatchEvent(new Event(ll))},So=U=>!(!U||"object"!=typeof U)&&(void 0!==U.jquery&&(U=U[0]),void 0!==U.nodeType),ms=U=>So(U)?U.jquery?U[0]:U:"string"==typeof U&&U.length>0?document.querySelector(U):null,Ta=U=>{if(!So(U)||0===U.getClientRects().length)return!1;const w="visible"===getComputedStyle(U).getPropertyValue("visibility"),M=U.closest("details:not([open])");if(!M)return w;if(M!==U){const J=U.closest("summary");if(J&&J.parentNode!==M||null===J)return!1}return w},On=U=>!U||U.nodeType!==Node.ELEMENT_NODE||!!U.classList.contains("disabled")||(void 0!==U.disabled?U.disabled:U.hasAttribute("disabled")&&"false"!==U.getAttribute("disabled")),Ya=U=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof U.getRootNode){const w=U.getRootNode();return w instanceof ShadowRoot?w:null}return U instanceof ShadowRoot?U:U.parentNode?Ya(U.parentNode):null},Js=()=>{},_t=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,vt=[],an=()=>"rtl"===document.documentElement.dir,qo=U=>{var w;w=()=>{const M=_t();if(M){const J=U.NAME,ge=M.fn[J];M.fn[J]=U.jQueryInterface,M.fn[J].Constructor=U,M.fn[J].noConflict=()=>(M.fn[J]=ge,U.jQueryInterface)}},"loading"===document.readyState?(vt.length||document.addEventListener("DOMContentLoaded",()=>{for(const M of vt)M()}),vt.push(w)):w()},vn=U=>{"function"==typeof U&&U()},Qe=(U,w,M=!0)=>{if(!M)return void vn(U);const J=(Be=>{if(!Be)return 0;let{transitionDuration:qe,transitionDelay:Te}=window.getComputedStyle(Be);const Dt=Number.parseFloat(qe),Vt=Number.parseFloat(Te);return Dt||Vt?(qe=qe.split(",")[0],Te=Te.split(",")[0],1e3*(Number.parseFloat(qe)+Number.parseFloat(Te))):0})(w)+5;let ge=!1;const he=({target:Be})=>{Be===w&&(ge=!0,w.removeEventListener(ll,he),vn(U))};w.addEventListener(ll,he),setTimeout(()=>{ge||dl(w)},J)},et=(U,w,M,J)=>{const ge=U.length;let he=U.indexOf(w);return-1===he?!M&&J?U[ge-1]:U[0]:(he+=M?1:-1,J&&(he=(he+ge)%ge),U[Math.max(0,Math.min(he,ge-1))])},An=/[^.]*(?=\..*)\.|.*/,ee=/\..*/,ut=/::\d+$/,rs={};let Xn=1;const Kt={mouseenter:"mouseover",mouseleave:"mouseout"},lr=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Fl(U,w){return w&&`${w}::${Xn++}`||U.uidEvent||Xn++}function Ve(U){const w=Fl(U);return U.uidEvent=w,rs[w]=rs[w]||{},rs[w]}function un(U,w,M=null){return Object.values(U).find(J=>J.callable===w&&J.delegationSelector===M)}function N(U,w,M){const J="string"==typeof w,ge=J?M:w||M;let he=Pr(U);return lr.has(he)||(he=U),[J,ge,he]}function it(U,w,M,J,ge){if("string"!=typeof w||!U)return;let[he,Be,qe]=N(w,M,J);var co;w in Kt&&(co=Be,Be=function(yo){if(!yo.relatedTarget||yo.relatedTarget!==yo.delegateTarget&&!yo.delegateTarget.contains(yo.relatedTarget))return co.call(this,yo)});const Te=Ve(U),Dt=Te[qe]||(Te[qe]={}),Vt=un(Dt,Be,he?M:null);if(Vt)return void(Vt.oneOff=Vt.oneOff&&ge);const Et=Fl(Be,w.replace(An,"")),Xt=he?function(bo,co,yo){return function xo($n){const Ae=bo.querySelectorAll(co);for(let{target:Oo}=$n;Oo&&Oo!==this;Oo=Oo.parentNode)for(const Bn of Ae)if(Bn===Oo)return wo($n,{delegateTarget:Oo}),xo.oneOff&&Ze.off(bo,$n.type,co,yo),yo.apply(Oo,[$n])}}(U,M,Be):function(bo,co){return function yo(xo){return wo(xo,{delegateTarget:bo}),yo.oneOff&&Ze.off(bo,xo.type,co),co.apply(bo,[xo])}}(U,Be);Xt.delegationSelector=he?M:null,Xt.callable=Be,Xt.oneOff=ge,Xt.uidEvent=Et,Dt[Et]=Xt,U.addEventListener(qe,Xt,he)}function wi(U,w,M,J,ge){const he=un(w[M],J,ge);he&&(U.removeEventListener(M,he,Boolean(ge)),delete w[M][he.uidEvent])}function ss(U,w,M,J){const ge=w[M]||{};for(const he of Object.keys(ge))if(he.includes(J)){const Be=ge[he];wi(U,w,M,Be.callable,Be.delegationSelector)}}function Pr(U){return U=U.replace(ee,""),Kt[U]||U}const Ze={on(U,w,M,J){it(U,w,M,J,!1)},one(U,w,M,J){it(U,w,M,J,!0)},off(U,w,M,J){if("string"!=typeof w||!U)return;const[ge,he,Be]=N(w,M,J),qe=Be!==w,Te=Ve(U),Dt=Te[Be]||{},Vt=w.startsWith(".");if(void 0===he){if(Vt)for(const Et of Object.keys(Te))ss(U,Te,Et,w.slice(1));for(const Et of Object.keys(Dt)){const Xt=Et.replace(ut,"");if(!qe||w.includes(Xt)){const bo=Dt[Et];wi(U,Te,Be,bo.callable,bo.delegationSelector)}}}else{if(!Object.keys(Dt).length)return;wi(U,Te,Be,he,ge?M:null)}},trigger(U,w,M){if("string"!=typeof w||!U)return null;const J=_t();let ge=null,he=!0,Be=!0,qe=!1;w!==Pr(w)&&J&&(ge=J.Event(w,M),J(U).trigger(ge),he=!ge.isPropagationStopped(),Be=!ge.isImmediatePropagationStopped(),qe=ge.isDefaultPrevented());let Te=new Event(w,{bubbles:he,cancelable:!0});return Te=wo(Te,M),qe&&Te.preventDefault(),Be&&U.dispatchEvent(Te),Te.defaultPrevented&&ge&&ge.preventDefault(),Te}};function wo(U,w){for(const[M,J]of Object.entries(w||{}))try{U[M]=J}catch{Object.defineProperty(U,M,{configurable:!0,get:()=>J})}return U}const Vo=new Map,H={set(U,w,M){Vo.has(U)||Vo.set(U,new Map);const J=Vo.get(U);J.has(w)||0===J.size?J.set(w,M):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(J.keys())[0]}.`)},get:(U,w)=>Vo.has(U)&&Vo.get(U).get(w)||null,remove(U,w){if(!Vo.has(U))return;const M=Vo.get(U);M.delete(w),0===M.size&&Vo.delete(U)}};function _i(U){if("true"===U)return!0;if("false"===U)return!1;if(U===Number(U).toString())return Number(U);if(""===U||"null"===U)return null;if("string"!=typeof U)return U;try{return JSON.parse(decodeURIComponent(U))}catch{return U}}function Je(U){return U.replace(/[A-Z]/g,w=>`-${w.toLowerCase()}`)}const yt={setDataAttribute(U,w,M){U.setAttribute(`data-bs-${Je(w)}`,M)},removeDataAttribute(U,w){U.removeAttribute(`data-bs-${Je(w)}`)},getDataAttributes(U){if(!U)return{};const w={},M=Object.keys(U.dataset).filter(J=>J.startsWith("bs")&&!J.startsWith("bsConfig"));for(const J of M){let ge=J.replace(/^bs/,"");ge=ge.charAt(0).toLowerCase()+ge.slice(1,ge.length),w[ge]=_i(U.dataset[J])}return w},getDataAttribute:(U,w)=>_i(U.getAttribute(`data-bs-${Je(w)}`))};class Oa{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(w){return w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w}_mergeConfigObj(w,M){const J=So(M)?yt.getDataAttribute(M,"config"):{};return{...this.constructor.Default,..."object"==typeof J?J:{},...So(M)?yt.getDataAttributes(M):{},..."object"==typeof w?w:{}}}_typeCheckConfig(w,M=this.constructor.DefaultType){for(const ge of Object.keys(M)){const he=M[ge],Be=w[ge],qe=So(Be)?"element":null==(J=Be)?`${J}`:Object.prototype.toString.call(J).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(he).test(qe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ge}" provided type "${qe}" but expected type "${he}".`)}var J}}class st extends Oa{constructor(w,M){super(),(w=ms(w))&&(this._element=w,this._config=this._getConfig(M),H.set(this._element,this.constructor.DATA_KEY,this))}dispose(){H.remove(this._element,this.constructor.DATA_KEY),Ze.off(this._element,this.constructor.EVENT_KEY);for(const w of Object.getOwnPropertyNames(this))this[w]=null}_queueCallback(w,M,J=!0){Qe(w,M,J)}_getConfig(w){return w=this._mergeConfigObj(w,this._element),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}static getInstance(w){return H.get(ms(w),this.DATA_KEY)}static getOrCreateInstance(w,M={}){return this.getInstance(w)||new this(w,"object"==typeof M?M:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(w){return`${w}${this.EVENT_KEY}`}}const Wo=(U,w="hide")=>{const J=U.NAME;Ze.on(document,`click.dismiss${U.EVENT_KEY}`,`[data-bs-dismiss="${J}"]`,function(ge){if(["A","AREA"].includes(this.tagName)&&ge.preventDefault(),On(this))return;const he=Xr(this)||this.closest(`.${J}`);U.getOrCreateInstance(he)[w]()})};class qt extends st{static get NAME(){return"alert"}close(){if(Ze.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const w=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,w)}_destroyElement(){this._element.remove(),Ze.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(w){return this.each(function(){const M=qt.getOrCreateInstance(this);if("string"==typeof w){if(void 0===M[w]||w.startsWith("_")||"constructor"===w)throw new TypeError(`No method named "${w}"`);M[w](this)}})}}Wo(qt,"close"),qo(qt);const Ee='[data-bs-toggle="button"]';class ha extends st{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(w){return this.each(function(){const M=ha.getOrCreateInstance(this);"toggle"===w&&M[w]()})}}Ze.on(document,"click.bs.button.data-api",Ee,U=>{U.preventDefault();const w=U.target.closest(Ee);ha.getOrCreateInstance(w).toggle()}),qo(ha);const Rt={find:(U,w=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(w,U)),findOne:(U,w=document.documentElement)=>Element.prototype.querySelector.call(w,U),children:(U,w)=>[].concat(...U.children).filter(M=>M.matches(w)),parents(U,w){const M=[];let J=U.parentNode.closest(w);for(;J;)M.push(J),J=J.parentNode.closest(w);return M},prev(U,w){let M=U.previousElementSibling;for(;M;){if(M.matches(w))return[M];M=M.previousElementSibling}return[]},next(U,w){let M=U.nextElementSibling;for(;M;){if(M.matches(w))return[M];M=M.nextElementSibling}return[]},focusableChildren(U){const w=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(M=>`${M}:not([tabindex^="-"])`).join(",");return this.find(w,U).filter(M=>!On(M)&&Ta(M))}},ft={endCallback:null,leftCallback:null,rightCallback:null},Qs={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Nn extends Oa{constructor(w,M){super(),this._element=w,w&&Nn.isSupported()&&(this._config=this._getConfig(M),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ft}static get DefaultType(){return Qs}static get NAME(){return"swipe"}dispose(){Ze.off(this._element,".bs.swipe")}_start(w){this._supportPointerEvents?this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX):this._deltaX=w.touches[0].clientX}_end(w){this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX-this._deltaX),this._handleSwipe(),vn(this._config.endCallback)}_move(w){this._deltaX=w.touches&&w.touches.length>1?0:w.touches[0].clientX-this._deltaX}_handleSwipe(){const w=Math.abs(this._deltaX);if(w<=40)return;const M=w/this._deltaX;this._deltaX=0,M&&vn(M>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Ze.on(this._element,"pointerdown.bs.swipe",w=>this._start(w)),Ze.on(this._element,"pointerup.bs.swipe",w=>this._end(w)),this._element.classList.add("pointer-event")):(Ze.on(this._element,"touchstart.bs.swipe",w=>this._start(w)),Ze.on(this._element,"touchmove.bs.swipe",w=>this._move(w)),Ze.on(this._element,"touchend.bs.swipe",w=>this._end(w)))}_eventIsPointerPenTouch(w){return this._supportPointerEvents&&("pen"===w.pointerType||"touch"===w.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Is="next",yn="prev",la="left",Ci="right",Lr="slid.bs.carousel",cr="carousel",fa="active",Si={ArrowLeft:Ci,ArrowRight:la},Ps={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Rn={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Aa extends st{constructor(w,M){super(w,M),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Rt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===cr&&this.cycle()}static get Default(){return Ps}static get DefaultType(){return Rn}static get NAME(){return"carousel"}next(){this._slide(Is)}nextWhenVisible(){!document.hidden&&Ta(this._element)&&this.next()}prev(){this._slide(yn)}pause(){this._isSliding&&dl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Ze.one(this._element,Lr,()=>this.cycle()):this.cycle())}to(w){const M=this._getItems();if(w>M.length-1||w<0)return;if(this._isSliding)return void Ze.one(this._element,Lr,()=>this.to(w));const J=this._getItemIndex(this._getActive());J!==w&&this._slide(w>J?Is:yn,M[w])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(w){return w.defaultInterval=w.interval,w}_addEventListeners(){this._config.keyboard&&Ze.on(this._element,"keydown.bs.carousel",w=>this._keydown(w)),"hover"===this._config.pause&&(Ze.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),Ze.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Nn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const M of Rt.find(".carousel-item img",this._element))Ze.on(M,"dragstart.bs.carousel",J=>J.preventDefault());this._swipeHelper=new Nn(this._element,{leftCallback:()=>this._slide(this._directionToOrder(la)),rightCallback:()=>this._slide(this._directionToOrder(Ci)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(w){if(/input|textarea/i.test(w.target.tagName))return;const M=Si[w.key];M&&(w.preventDefault(),this._slide(this._directionToOrder(M)))}_getItemIndex(w){return this._getItems().indexOf(w)}_setActiveIndicatorElement(w){if(!this._indicatorsElement)return;const M=Rt.findOne(".active",this._indicatorsElement);M.classList.remove(fa),M.removeAttribute("aria-current");const J=Rt.findOne(`[data-bs-slide-to="${w}"]`,this._indicatorsElement);J&&(J.classList.add(fa),J.setAttribute("aria-current","true"))}_updateInterval(){const w=this._activeElement||this._getActive();if(!w)return;const M=Number.parseInt(w.getAttribute("data-bs-interval"),10);this._config.interval=M||this._config.defaultInterval}_slide(w,M=null){if(this._isSliding)return;const J=this._getActive(),ge=w===Is,he=M||et(this._getItems(),J,ge,this._config.wrap);if(he===J)return;const Be=this._getItemIndex(he),qe=Et=>Ze.trigger(this._element,Et,{relatedTarget:he,direction:this._orderToDirection(w),from:this._getItemIndex(J),to:Be});if(qe("slide.bs.carousel").defaultPrevented||!J||!he)return;const Te=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Be),this._activeElement=he;const Dt=ge?"carousel-item-start":"carousel-item-end",Vt=ge?"carousel-item-next":"carousel-item-prev";he.classList.add(Vt),J.classList.add(Dt),he.classList.add(Dt),this._queueCallback(()=>{he.classList.remove(Dt,Vt),he.classList.add(fa),J.classList.remove(fa,Vt,Dt),this._isSliding=!1,qe(Lr)},J,this._isAnimated()),Te&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Rt.findOne(".active.carousel-item",this._element)}_getItems(){return Rt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(w){return an()?w===la?yn:Is:w===la?Is:yn}_orderToDirection(w){return an()?w===yn?la:Ci:w===yn?Ci:la}static jQueryInterface(w){return this.each(function(){const M=Aa.getOrCreateInstance(this,w);if("number"!=typeof w){if("string"==typeof w){if(void 0===M[w]||w.startsWith("_")||"constructor"===w)throw new TypeError(`No method named "${w}"`);M[w]()}}else M.to(w)})}}Ze.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(U){const w=Xr(this);if(!w||!w.classList.contains(cr))return;U.preventDefault();const M=Aa.getOrCreateInstance(w),J=this.getAttribute("data-bs-slide-to");return J?(M.to(J),void M._maybeEnableCycle()):"next"===yt.getDataAttribute(this,"slide")?(M.next(),void M._maybeEnableCycle()):(M.prev(),void M._maybeEnableCycle())}),Ze.on(window,"load.bs.carousel.data-api",()=>{const U=Rt.find('[data-bs-ride="carousel"]');for(const w of U)Aa.getOrCreateInstance(w)}),qo(Aa);const gn="show",pn="collapse",dr="collapsing",Xa='[data-bs-toggle="collapse"]',as={parent:null,toggle:!0},sc={parent:"(null|element)",toggle:"boolean"};class Yo extends st{constructor(w,M){super(w,M),this._isTransitioning=!1,this._triggerArray=[];const J=Rt.find(Xa);for(const ge of J){const he=cl(ge),Be=Rt.find(he).filter(qe=>qe===this._element);null!==he&&Be.length&&this._triggerArray.push(ge)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return as}static get DefaultType(){return sc}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let w=[];if(this._config.parent&&(w=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(ge=>ge!==this._element).map(ge=>Yo.getOrCreateInstance(ge,{toggle:!1}))),w.length&&w[0]._isTransitioning||Ze.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const ge of w)ge.hide();const M=this._getDimension();this._element.classList.remove(pn),this._element.classList.add(dr),this._element.style[M]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const J=`scroll${M[0].toUpperCase()+M.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(dr),this._element.classList.add(pn,gn),this._element.style[M]="",Ze.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[M]=`${this._element[J]}px`}hide(){if(this._isTransitioning||!this._isShown()||Ze.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const w=this._getDimension();this._element.style[w]=`${this._element.getBoundingClientRect()[w]}px`,this._element.classList.add(dr),this._element.classList.remove(pn,gn);for(const M of this._triggerArray){const J=Xr(M);J&&!this._isShown(J)&&this._addAriaAndCollapsedClass([M],!1)}this._isTransitioning=!0,this._element.style[w]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(dr),this._element.classList.add(pn),Ze.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(w=this._element){return w.classList.contains(gn)}_configAfterMerge(w){return w.toggle=Boolean(w.toggle),w.parent=ms(w.parent),w}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const w=this._getFirstLevelChildren(Xa);for(const M of w){const J=Xr(M);J&&this._addAriaAndCollapsedClass([M],this._isShown(J))}}_getFirstLevelChildren(w){const M=Rt.find(":scope .collapse .collapse",this._config.parent);return Rt.find(w,this._config.parent).filter(J=>!M.includes(J))}_addAriaAndCollapsedClass(w,M){if(w.length)for(const J of w)J.classList.toggle("collapsed",!M),J.setAttribute("aria-expanded",M)}static jQueryInterface(w){const M={};return"string"==typeof w&&/show|hide/.test(w)&&(M.toggle=!1),this.each(function(){const J=Yo.getOrCreateInstance(this,M);if("string"==typeof w){if(void 0===J[w])throw new TypeError(`No method named "${w}"`);J[w]()}})}}Ze.on(document,"click.bs.collapse.data-api",Xa,function(U){("A"===U.target.tagName||U.delegateTarget&&"A"===U.delegateTarget.tagName)&&U.preventDefault();const w=cl(this),M=Rt.find(w);for(const J of M)Yo.getOrCreateInstance(J,{toggle:!1}).toggle()}),qo(Yo);var Fr="top",Jr="bottom",lt="right",vo="left",zr="auto",Nr=[Fr,Jr,lt,vo],gs="start",Xo="end",Gt="clippingParents",Hr="viewport",ki="popper",ac="reference",_r=Nr.reduce(function(U,w){return U.concat([w+"-"+gs,w+"-"+Xo])},[]),Fi=[].concat(Nr,[zr]).reduce(function(U,w){return U.concat([w,w+"-"+gs,w+"-"+Xo])},[]),Ei="beforeRead",Na="afterRead",zi="beforeMain",ba="afterMain",ic="beforeWrite",xe="afterWrite",oe=[Ei,"read",Na,zi,"main",ba,ic,"write",xe];function Ne(U){return U?(U.nodeName||"").toLowerCase():null}function Re(U){if(null==U)return window;if("[object Window]"!==U.toString()){var w=U.ownerDocument;return w&&w.defaultView||window}return U}function Xe(U){return U instanceof Re(U).Element||U instanceof Element}function tt(U){return U instanceof Re(U).HTMLElement||U instanceof HTMLElement}function nt(U){return typeof ShadowRoot<"u"&&(U instanceof Re(U).ShadowRoot||U instanceof ShadowRoot)}const Yt={name:"applyStyles",enabled:!0,phase:"write",fn:function(U){var w=U.state;Object.keys(w.elements).forEach(function(M){var J=w.styles[M]||{},ge=w.attributes[M]||{},he=w.elements[M];tt(he)&&Ne(he)&&(Object.assign(he.style,J),Object.keys(ge).forEach(function(Be){var qe=ge[Be];!1===qe?he.removeAttribute(Be):he.setAttribute(Be,!0===qe?"":qe)}))})},effect:function(U){var w=U.state,M={popper:{position:w.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(w.elements.popper.style,M.popper),w.styles=M,w.elements.arrow&&Object.assign(w.elements.arrow.style,M.arrow),function(){Object.keys(w.elements).forEach(function(J){var ge=w.elements[J],he=w.attributes[J]||{},Be=Object.keys(w.styles.hasOwnProperty(J)?w.styles[J]:M[J]).reduce(function(qe,Te){return qe[Te]="",qe},{});tt(ge)&&Ne(ge)&&(Object.assign(ge.style,Be),Object.keys(he).forEach(function(qe){ge.removeAttribute(qe)}))})}},requires:["computeStyles"]};function Zt(U){return U.split("-")[0]}var ho=Math.max,Io=Math.min,To=Math.round;function Ro(){var U=navigator.userAgentData;return null!=U&&U.brands?U.brands.map(function(w){return w.brand+"/"+w.version}).join(" "):navigator.userAgent}function jn(){return!/^((?!chrome|android).)*safari/i.test(Ro())}function or(U,w,M){void 0===w&&(w=!1),void 0===M&&(M=!1);var J=U.getBoundingClientRect(),ge=1,he=1;w&&tt(U)&&(ge=U.offsetWidth>0&&To(J.width)/U.offsetWidth||1,he=U.offsetHeight>0&&To(J.height)/U.offsetHeight||1);var Be=(Xe(U)?Re(U):window).visualViewport,qe=!jn()&&M,Te=(J.left+(qe&&Be?Be.offsetLeft:0))/ge,Dt=(J.top+(qe&&Be?Be.offsetTop:0))/he,Vt=J.width/ge,Et=J.height/he;return{width:Vt,height:Et,top:Dt,right:Te+Vt,bottom:Dt+Et,left:Te,x:Te,y:Dt}}function xn(U){var w=or(U),M=U.offsetWidth,J=U.offsetHeight;return Math.abs(w.width-M)<=1&&(M=w.width),Math.abs(w.height-J)<=1&&(J=w.height),{x:U.offsetLeft,y:U.offsetTop,width:M,height:J}}function Jo(U,w){var M=w.getRootNode&&w.getRootNode();if(U.contains(w))return!0;if(M&&nt(M)){var J=w;do{if(J&&U.isSameNode(J))return!0;J=J.parentNode||J.host}while(J)}return!1}function ks(U){return Re(U).getComputedStyle(U)}function Qr(U){return["table","td","th"].indexOf(Ne(U))>=0}function Es(U){return((Xe(U)?U.ownerDocument:U.document)||window.document).documentElement}function Qa(U){return"html"===Ne(U)?U:U.assignedSlot||U.parentNode||(nt(U)?U.host:null)||Es(U)}function Hi(U){return tt(U)&&"fixed"!==ks(U).position?U.offsetParent:null}function Zs(U){for(var w=Re(U),M=Hi(U);M&&Qr(M)&&"static"===ks(M).position;)M=Hi(M);return M&&("html"===Ne(M)||"body"===Ne(M)&&"static"===ks(M).position)?w:M||function(J){var ge=/firefox/i.test(Ro());if(/Trident/i.test(Ro())&&tt(J)&&"fixed"===ks(J).position)return null;var he=Qa(J);for(nt(he)&&(he=he.host);tt(he)&&["html","body"].indexOf(Ne(he))<0;){var Be=ks(he);if("none"!==Be.transform||"none"!==Be.perspective||"paint"===Be.contain||-1!==["transform","perspective"].indexOf(Be.willChange)||ge&&"filter"===Be.willChange||ge&&Be.filter&&"none"!==Be.filter)return he;he=he.parentNode}return null}(U)||w}function Za(U){return["top","bottom"].indexOf(U)>=0?"x":"y"}function lc(U,w,M){return ho(U,Io(w,M))}function Ti(U){return Object.assign({},{top:0,right:0,bottom:0,left:0},U)}function ul(U,w){return w.reduce(function(M,J){return M[J]=U,M},{})}const zc={name:"arrow",enabled:!0,phase:"main",fn:function(U){var w,Ft,hn,M=U.state,J=U.name,ge=U.options,he=M.elements.arrow,Be=M.modifiersData.popperOffsets,qe=Zt(M.placement),Te=Za(qe),Dt=[vo,lt].indexOf(qe)>=0?"height":"width";if(he&&Be){var Vt=(hn=M,Ti("number"!=typeof(Ft="function"==typeof(Ft=ge.padding)?Ft(Object.assign({},hn.rects,{placement:hn.placement})):Ft)?Ft:ul(Ft,Nr))),Et=xn(he),Xt="y"===Te?Fr:vo,bo="y"===Te?Jr:lt,co=M.rects.reference[Dt]+M.rects.reference[Te]-Be[Te]-M.rects.popper[Dt],yo=Be[Te]-M.rects.reference[Te],xo=Zs(he),$n=xo?"y"===Te?xo.clientHeight||0:xo.clientWidth||0:0,_e=$n/2-Et[Dt]/2+(co/2-yo/2),Bo=lc(Vt[Xt],_e,$n-Et[Dt]-Vt[bo]);M.modifiersData[J]=((w={})[Te]=Bo,w.centerOffset=Bo-_e,w)}},effect:function(U){var w=U.state,M=U.options.element,J=void 0===M?"[data-popper-arrow]":M;null!=J&&("string"!=typeof J||(J=w.elements.popper.querySelector(J)))&&Jo(w.elements.popper,J)&&(w.elements.arrow=J)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vr(U){return U.split("-")[1]}var du={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hc(U){var w,M=U.popper,J=U.popperRect,ge=U.placement,he=U.variation,Be=U.offsets,qe=U.position,Te=U.gpuAcceleration,Dt=U.adaptive,Vt=U.roundOffsets,Et=U.isFixed,Xt=Be.x,bo=void 0===Xt?0:Xt,co=Be.y,yo=void 0===co?0:co,xo="function"==typeof Vt?Vt({x:bo,y:yo}):{x:bo,y:yo};bo=xo.x,yo=xo.y;var $n=Be.hasOwnProperty("x"),Ae=Be.hasOwnProperty("y"),Oo=vo,Bn=Fr,_e=window;if(Dt){var Bo=Zs(M),Wn="clientHeight",Ft="clientWidth";Bo===Re(M)&&"static"!==ks(Bo=Es(M)).position&&"absolute"===qe&&(Wn="scrollHeight",Ft="scrollWidth"),(ge===Fr||(ge===vo||ge===lt)&&he===Xo)&&(Bn=Jr,yo-=(Et&&Bo===_e&&_e.visualViewport?_e.visualViewport.height:Bo[Wn])-J.height,yo*=Te?1:-1),ge!==vo&&(ge!==Fr&&ge!==Jr||he!==Xo)||(Oo=lt,bo-=(Et&&Bo===_e&&_e.visualViewport?_e.visualViewport.width:Bo[Ft])-J.width,bo*=Te?1:-1)}var hn,Ia,fo,Wr,on=Object.assign({position:qe},Dt&&du),zo=!0===Vt?(fo=(Ia={x:bo,y:yo}).y,Wr=window.devicePixelRatio||1,{x:To(Ia.x*Wr)/Wr||0,y:To(fo*Wr)/Wr||0}):{x:bo,y:yo};return bo=zo.x,yo=zo.y,Object.assign({},on,Te?((hn={})[Bn]=Ae?"0":"",hn[Oo]=$n?"0":"",hn.transform=(_e.devicePixelRatio||1)<=1?"translate("+bo+"px, "+yo+"px)":"translate3d("+bo+"px, "+yo+"px, 0)",hn):((w={})[Bn]=Ae?yo+"px":"",w[Oo]=$n?bo+"px":"",w.transform="",w))}const cc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(U){var w=U.state,M=U.options,J=M.gpuAcceleration,ge=void 0===J||J,he=M.adaptive,Be=void 0===he||he,qe=M.roundOffsets,Te=void 0===qe||qe,Dt={placement:Zt(w.placement),variation:Vr(w.placement),popper:w.elements.popper,popperRect:w.rects.popper,gpuAcceleration:ge,isFixed:"fixed"===w.options.strategy};null!=w.modifiersData.popperOffsets&&(w.styles.popper=Object.assign({},w.styles.popper,Hc(Object.assign({},Dt,{offsets:w.modifiersData.popperOffsets,position:w.options.strategy,adaptive:Be,roundOffsets:Te})))),null!=w.modifiersData.arrow&&(w.styles.arrow=Object.assign({},w.styles.arrow,Hc(Object.assign({},Dt,{offsets:w.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Te})))),w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-placement":w.placement})},data:{}};var dc={passive:!0};const Ur={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(U){var w=U.state,M=U.instance,J=U.options,ge=J.scroll,he=void 0===ge||ge,Be=J.resize,qe=void 0===Be||Be,Te=Re(w.elements.popper),Dt=[].concat(w.scrollParents.reference,w.scrollParents.popper);return he&&Dt.forEach(function(Vt){Vt.addEventListener("scroll",M.update,dc)}),qe&&Te.addEventListener("resize",M.update,dc),function(){he&&Dt.forEach(function(Vt){Vt.removeEventListener("scroll",M.update,dc)}),qe&&Te.removeEventListener("resize",M.update,dc)}},data:{}};var ei={left:"right",right:"left",bottom:"top",top:"bottom"};function Vc(U){return U.replace(/left|right|bottom|top/g,function(w){return ei[w]})}var Kg={start:"end",end:"start"};function ps(U){return U.replace(/start|end/g,function(w){return Kg[w]})}function va(U){var w=Re(U);return{scrollLeft:w.pageXOffset,scrollTop:w.pageYOffset}}function ti(U){return or(Es(U)).left+va(U).scrollLeft}function Uc(U){var w=ks(U);return/auto|scroll|overlay|hidden/.test(w.overflow+w.overflowY+w.overflowX)}function ro(U){return["html","body","#document"].indexOf(Ne(U))>=0?U.ownerDocument.body:tt(U)&&Uc(U)?U:ro(Qa(U))}function hs(U,w){var M;void 0===w&&(w=[]);var J=ro(U),ge=J===(null==(M=U.ownerDocument)?void 0:M.body),he=Re(J),Be=ge?[he].concat(he.visualViewport||[],Uc(J)?J:[]):J,qe=w.concat(Be);return ge?qe:qe.concat(hs(Qa(Be)))}function zn(U){return Object.assign({},U,{left:U.x,top:U.y,right:U.x+U.width,bottom:U.y+U.height})}function ur(U,w,M){return w===Hr?zn(function(J,ge){var he=Re(J),Be=Es(J),qe=he.visualViewport,Te=Be.clientWidth,Dt=Be.clientHeight,Vt=0,Et=0;if(qe){Te=qe.width,Dt=qe.height;var Xt=jn();(Xt||!Xt&&"fixed"===ge)&&(Vt=qe.offsetLeft,Et=qe.offsetTop)}return{width:Te,height:Dt,x:Vt+ti(J),y:Et}}(U,M)):Xe(w)?((he=or(J=w,!1,"fixed"===M)).top=he.top+J.clientTop,he.left=he.left+J.clientLeft,he.bottom=he.top+J.clientHeight,he.right=he.left+J.clientWidth,he.width=J.clientWidth,he.height=J.clientHeight,he.x=he.left,he.y=he.top,he):zn(function(J){var ge,he=Es(J),Be=va(J),qe=null==(ge=J.ownerDocument)?void 0:ge.body,Te=ho(he.scrollWidth,he.clientWidth,qe?qe.scrollWidth:0,qe?qe.clientWidth:0),Dt=ho(he.scrollHeight,he.clientHeight,qe?qe.scrollHeight:0,qe?qe.clientHeight:0),Vt=-Be.scrollLeft+ti(J),Et=-Be.scrollTop;return"rtl"===ks(qe||he).direction&&(Vt+=ho(he.clientWidth,qe?qe.clientWidth:0)-Te),{width:Te,height:Dt,x:Vt,y:Et}}(Es(U)));var J,he}function uu(U){var w,M=U.reference,J=U.element,ge=U.placement,he=ge?Zt(ge):null,Be=ge?Vr(ge):null,qe=M.x+M.width/2-J.width/2,Te=M.y+M.height/2-J.height/2;switch(he){case Fr:w={x:qe,y:M.y-J.height};break;case Jr:w={x:qe,y:M.y+M.height};break;case lt:w={x:M.x+M.width,y:Te};break;case vo:w={x:M.x-J.width,y:Te};break;default:w={x:M.x,y:M.y}}var Dt=he?Za(he):null;if(null!=Dt){var Vt="y"===Dt?"height":"width";switch(Be){case gs:w[Dt]=w[Dt]-(M[Vt]/2-J[Vt]/2);break;case Xo:w[Dt]=w[Dt]+(M[Vt]/2-J[Vt]/2)}}return w}function Ht(U,w){void 0===w&&(w={});var rr,fo,Wr,es,cn,fe,Dr,fr,Pa,bs,J=w.placement,ge=void 0===J?U.placement:J,he=w.strategy,Be=void 0===he?U.strategy:he,qe=w.boundary,Te=void 0===qe?Gt:qe,Dt=w.rootBoundary,Vt=void 0===Dt?Hr:Dt,Et=w.elementContext,Xt=void 0===Et?ki:Et,bo=w.altBoundary,co=void 0!==bo&&bo,yo=w.padding,xo=void 0===yo?0:yo,$n=Ti("number"!=typeof xo?xo:ul(xo,Nr)),Oo=U.rects.popper,Bn=U.elements[co?Xt===ki?ac:ki:Xt],_e=(rr=Xe(Bn)?Bn:Bn.contextElement||Es(U.elements.popper),Wr=Vt,es=Be,fr="clippingParents"===(fo=Te)?(fe=hs(Qa(cn=rr)),Xe(Dr=["absolute","fixed"].indexOf(ks(cn).position)>=0&&tt(cn)?Zs(cn):cn)?fe.filter(function(La){return Xe(La)&&Jo(La,Dr)&&"body"!==Ne(La)}):[]):[].concat(fo),bs=(Pa=[].concat(fr,[Wr])).reduce(function(cn,fe){var Dr=ur(rr,fe,es);return cn.top=ho(Dr.top,cn.top),cn.right=Io(Dr.right,cn.right),cn.bottom=Io(Dr.bottom,cn.bottom),cn.left=ho(Dr.left,cn.left),cn},ur(rr,Pa[0],es)),bs.width=bs.right-bs.left,bs.height=bs.bottom-bs.top,bs.x=bs.left,bs.y=bs.top,bs),Bo=or(U.elements.reference),Wn=uu({reference:Bo,element:Oo,strategy:"absolute",placement:ge}),Ft=zn(Object.assign({},Oo,Wn)),hn=Xt===ki?Ft:Bo,on={top:_e.top-hn.top+$n.top,bottom:hn.bottom-_e.bottom+$n.bottom,left:_e.left-hn.left+$n.left,right:hn.right-_e.right+$n.right},zo=U.modifiersData.offset;if(Xt===ki&&zo){var Ia=zo[ge];Object.keys(on).forEach(function(rr){var fo=[lt,Jr].indexOf(rr)>=0?1:-1,Wr=[Fr,Jr].indexOf(rr)>=0?"y":"x";on[rr]+=Ia[Wr]*fo})}return on}const gu={name:"flip",enabled:!0,phase:"main",fn:function(U){var w=U.state,M=U.options,J=U.name;if(!w.modifiersData[J]._skip){for(var ge=M.mainAxis,he=void 0===ge||ge,Be=M.altAxis,qe=void 0===Be||Be,Te=M.fallbackPlacements,Dt=M.padding,Vt=M.boundary,Et=M.rootBoundary,Xt=M.altBoundary,bo=M.flipVariations,co=void 0===bo||bo,yo=M.allowedAutoPlacements,xo=w.options.placement,$n=Zt(xo),Ae=Te||($n!==xo&&co?function(cn){if(Zt(cn)===zr)return[];var fe=Vc(cn);return[ps(cn),fe,ps(fe)]}(xo):[Vc(xo)]),Oo=[xo].concat(Ae).reduce(function(cn,fe){return cn.concat(Zt(fe)===zr?function mu(U,w){void 0===w&&(w={});var ge=w.boundary,he=w.rootBoundary,Be=w.padding,qe=w.flipVariations,Te=w.allowedAutoPlacements,Dt=void 0===Te?Fi:Te,Vt=Vr(w.placement),Et=Vt?qe?_r:_r.filter(function(co){return Vr(co)===Vt}):Nr,Xt=Et.filter(function(co){return Dt.indexOf(co)>=0});0===Xt.length&&(Xt=Et);var bo=Xt.reduce(function(co,yo){return co[yo]=Ht(U,{placement:yo,boundary:ge,rootBoundary:he,padding:Be})[Zt(yo)],co},{});return Object.keys(bo).sort(function(co,yo){return bo[co]-bo[yo]})}(w,{placement:fe,boundary:Vt,rootBoundary:Et,padding:Dt,flipVariations:co,allowedAutoPlacements:yo}):fe)},[]),Bn=w.rects.reference,_e=w.rects.popper,Bo=new Map,Wn=!0,Ft=Oo[0],hn=0;hn<Oo.length;hn++){var on=Oo[hn],zo=Zt(on),Ia=Vr(on)===gs,rr=[Fr,Jr].indexOf(zo)>=0,fo=rr?"width":"height",Wr=Ht(w,{placement:on,boundary:Vt,rootBoundary:Et,altBoundary:Xt,padding:Dt}),es=rr?Ia?lt:vo:Ia?Jr:Fr;Bn[fo]>_e[fo]&&(es=Vc(es));var fr=Vc(es),Pa=[];if(he&&Pa.push(Wr[zo]<=0),qe&&Pa.push(Wr[es]<=0,Wr[fr]<=0),Pa.every(function(cn){return cn})){Ft=on,Wn=!1;break}Bo.set(on,Pa)}if(Wn)for(var Vn=function(cn){var fe=Oo.find(function(Dr){var La=Bo.get(Dr);if(La)return La.slice(0,cn).every(function(oa){return oa})});if(fe)return Ft=fe,"break"},bs=co?3:1;bs>0&&"break"!==Vn(bs);bs--);w.placement!==Ft&&(w.modifiersData[J]._skip=!0,w.placement=Ft,w.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function lo(U,w,M){return void 0===M&&(M={x:0,y:0}),{top:U.top-w.height-M.y,right:U.right-w.width+M.x,bottom:U.bottom-w.height+M.y,left:U.left-w.width-M.x}}function $e(U){return[Fr,lt,Jr,vo].some(function(w){return U[w]>=0})}const oi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(U){var w=U.state,M=U.name,J=w.rects.reference,ge=w.rects.popper,he=w.modifiersData.preventOverflow,Be=Ht(w,{elementContext:"reference"}),qe=Ht(w,{altBoundary:!0}),Te=lo(Be,J),Dt=lo(qe,ge,he),Vt=$e(Te),Et=$e(Dt);w.modifiersData[M]={referenceClippingOffsets:Te,popperEscapeOffsets:Dt,isReferenceHidden:Vt,hasPopperEscaped:Et},w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-reference-hidden":Vt,"data-popper-escaped":Et})}},Zr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(U){var w=U.state,J=U.name,ge=U.options.offset,he=void 0===ge?[0,0]:ge,Be=Fi.reduce(function(Vt,Et){return Vt[Et]=(bo=w.rects,co=he,yo=Zt(Xt=Et),xo=[vo,Fr].indexOf(yo)>=0?-1:1,Ae=(Ae=($n="function"==typeof co?co(Object.assign({},bo,{placement:Xt})):co)[0])||0,Oo=((Oo=$n[1])||0)*xo,[vo,lt].indexOf(yo)>=0?{x:Oo,y:Ae}:{x:Ae,y:Oo}),Vt;var Xt,bo,co,yo,xo,$n,Ae,Oo},{}),qe=Be[w.placement],Dt=qe.y;null!=w.modifiersData.popperOffsets&&(w.modifiersData.popperOffsets.x+=qe.x,w.modifiersData.popperOffsets.y+=Dt),w.modifiersData[J]=Be}},mr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(U){var w=U.state;w.modifiersData[U.name]=uu({reference:w.rects.reference,element:w.rects.popper,strategy:"absolute",placement:w.placement})},data:{}},Jn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(U){var yl,Wl,w=U.state,M=U.options,J=U.name,ge=M.mainAxis,he=void 0===ge||ge,Be=M.altAxis,qe=void 0!==Be&&Be,Xt=M.tether,bo=void 0===Xt||Xt,co=M.tetherOffset,yo=void 0===co?0:co,xo=Ht(w,{boundary:M.boundary,rootBoundary:M.rootBoundary,padding:M.padding,altBoundary:M.altBoundary}),$n=Zt(w.placement),Ae=Vr(w.placement),Oo=!Ae,Bn=Za($n),_e="x"===Bn?"y":"x",Bo=w.modifiersData.popperOffsets,Wn=w.rects.reference,Ft=w.rects.popper,hn="function"==typeof yo?yo(Object.assign({},w.rects,{placement:w.placement})):yo,on="number"==typeof hn?{mainAxis:hn,altAxis:hn}:Object.assign({mainAxis:0,altAxis:0},hn),zo=w.modifiersData.offset?w.modifiersData.offset[w.placement]:null,Ia={x:0,y:0};if(Bo){if(he){var rr,fo="y"===Bn?Fr:vo,Wr="y"===Bn?Jr:lt,es="y"===Bn?"height":"width",fr=Bo[Bn],Pa=fr+xo[fo],Vn=fr-xo[Wr],bs=bo?-Ft[es]/2:0,cn=Ae===gs?Wn[es]:Ft[es],fe=Ae===gs?-Ft[es]:-Wn[es],Dr=w.elements.arrow,La=bo&&Dr?xn(Dr):{width:0,height:0},oa=w.modifiersData["arrow#persistent"]?w.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},qi=oa[fo],is=oa[Wr],Qn=lc(0,Wn[es],La[es]),Td=Oo?Wn[es]/2-bs-Qn-qi-on.mainAxis:cn-Qn-qi-on.mainAxis,Od=Oo?-Wn[es]/2+bs+Qn+is+on.mainAxis:fe+Qn+is+on.mainAxis,Ot=w.elements.arrow&&Zs(w.elements.arrow),Fa=null!=(rr=zo?.[Bn])?rr:0,Er=fr+Od-Fa,Cu=lc(bo?Io(Pa,fr+Td-Fa-(Ot?"y"===Bn?Ot.clientTop||0:Ot.clientLeft||0:0)):Pa,fr,bo?ho(Vn,Er):Vn);Bo[Bn]=Cu,Ia[Bn]=Cu-fr}if(qe){var wa,Gi=Bo[_e],_a="y"===_e?"height":"width",Mn=Gi+xo["x"===Bn?Fr:vo],vl=Gi-xo["x"===Bn?Jr:lt],bc=-1!==[Fr,vo].indexOf($n),$l=null!=(wa=zo?.[_e])?wa:0,Su=bc?Mn:Gi-Wn[_a]-Ft[_a]-$l+on.altAxis,ua=bc?Gi+Wn[_a]+Ft[_a]-$l-on.altAxis:vl,Nd=bo&&bc?(Wl=lc(Su,Gi,yl=ua))>yl?yl:Wl:lc(bo?Su:Mn,Gi,bo?ua:vl);Bo[_e]=Nd,Ia[_e]=Nd-Gi}w.modifiersData[J]=Ia}},requiresIfExists:["offset"]};function wm(U,w,M){void 0===M&&(M=!1);var J,ge,Et,Xt,bo,co,he=tt(w),Be=tt(w)&&(Xt=(Et=w).getBoundingClientRect(),bo=To(Xt.width)/Et.offsetWidth||1,co=To(Xt.height)/Et.offsetHeight||1,1!==bo||1!==co),qe=Es(w),Te=or(U,Be,M),Dt={scrollLeft:0,scrollTop:0},Vt={x:0,y:0};return(he||!he&&!M)&&(("body"!==Ne(w)||Uc(qe))&&(Dt=(J=w)!==Re(J)&&tt(J)?{scrollLeft:(ge=J).scrollLeft,scrollTop:ge.scrollTop}:va(J)),tt(w)?((Vt=or(w,!0)).x+=w.clientLeft,Vt.y+=w.clientTop):qe&&(Vt.x=ti(qe))),{x:Te.left+Dt.scrollLeft-Vt.x,y:Te.top+Dt.scrollTop-Vt.y,width:Te.width,height:Te.height}}function pu(U){var w=new Map,M=new Set,J=[];function ge(he){M.add(he.name),[].concat(he.requires||[],he.requiresIfExists||[]).forEach(function(Be){if(!M.has(Be)){var qe=w.get(Be);qe&&ge(qe)}}),J.push(he)}return U.forEach(function(he){w.set(he.name,he)}),U.forEach(function(he){M.has(he.name)||ge(he)}),J}var mn={placement:"bottom",modifiers:[],strategy:"absolute"};function jc(){for(var U=arguments.length,w=new Array(U),M=0;M<U;M++)w[M]=arguments[M];return!w.some(function(J){return!(J&&"function"==typeof J.getBoundingClientRect)})}function Po(U){void 0===U&&(U={});var M=U.defaultModifiers,J=void 0===M?[]:M,ge=U.defaultOptions,he=void 0===ge?mn:ge;return function(Be,qe,Te){void 0===Te&&(Te=he);var Dt,Vt,Et={placement:"bottom",orderedModifiers:[],options:Object.assign({},mn,he),modifiersData:{},elements:{reference:Be,popper:qe},attributes:{},styles:{}},Xt=[],bo=!1,co={state:Et,setOptions:function(xo){var $n="function"==typeof xo?xo(Et.options):xo;yo(),Et.options=Object.assign({},he,Et.options,$n),Et.scrollParents={reference:Xe(Be)?hs(Be):Be.contextElement?hs(Be.contextElement):[],popper:hs(qe)};var Ae,Oo,_e,Bo,Bn=(Ae=[].concat(J,Et.options.modifiers),Oo=Ae.reduce(function(_e,Bo){var Wn=_e[Bo.name];return _e[Bo.name]=Wn?Object.assign({},Wn,Bo,{options:Object.assign({},Wn.options,Bo.options),data:Object.assign({},Wn.data,Bo.data)}):Bo,_e},{}),_e=Object.keys(Oo).map(function(_e){return Oo[_e]}),Bo=pu(_e),oe.reduce(function(Wn,Ft){return Wn.concat(Bo.filter(function(hn){return hn.phase===Ft}))},[]));return Et.orderedModifiers=Bn.filter(function(_e){return _e.enabled}),Et.orderedModifiers.forEach(function(_e){var Wn=_e.options,hn=_e.effect;if("function"==typeof hn){var on=hn({state:Et,name:_e.name,instance:co,options:void 0===Wn?{}:Wn});Xt.push(on||function(){})}}),co.update()},forceUpdate:function(){if(!bo){var xo=Et.elements,$n=xo.reference,Ae=xo.popper;if(jc($n,Ae)){Et.rects={reference:wm($n,Zs(Ae),"fixed"===Et.options.strategy),popper:xn(Ae)},Et.reset=!1,Et.placement=Et.options.placement,Et.orderedModifiers.forEach(function(hn){return Et.modifiersData[hn.name]=Object.assign({},hn.data)});for(var Oo=0;Oo<Et.orderedModifiers.length;Oo++)if(!0!==Et.reset){var Bn=Et.orderedModifiers[Oo],_e=Bn.fn,Bo=Bn.options;"function"==typeof _e&&(Et=_e({state:Et,options:void 0===Bo?{}:Bo,name:Bn.name,instance:co})||Et)}else Et.reset=!1,Oo=-1}}},update:(Dt=function(){return new Promise(function(xo){co.forceUpdate(),xo(Et)})},function(){return Vt||(Vt=new Promise(function(xo){Promise.resolve().then(function(){Vt=void 0,xo(Dt())})})),Vt}),destroy:function(){yo(),bo=!0}};if(!jc(Be,qe))return co;function yo(){Xt.forEach(function(xo){return xo()}),Xt=[]}return co.setOptions(Te).then(function(xo){!bo&&Te.onFirstUpdate&&Te.onFirstUpdate(xo)}),co}}var hu=Po(),gr=Po({defaultModifiers:[Ur,mr,cc,Yt]}),Ra=Po({defaultModifiers:[Ur,mr,cc,Yt,Zr,gu,Jn,zc,oi]});const Ts=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Po,detectOverflow:Ht,createPopperBase:hu,createPopper:Ra,createPopperLite:gr,top:Fr,bottom:Jr,right:lt,left:vo,auto:zr,basePlacements:Nr,start:gs,end:Xo,clippingParents:Gt,viewport:Hr,popper:ki,reference:ac,variationPlacements:_r,placements:Fi,beforeRead:Ei,read:"read",afterRead:Na,beforeMain:zi,main:"main",afterMain:ba,beforeWrite:ic,write:"write",afterWrite:xe,modifierPhases:oe,applyStyles:Yt,arrow:zc,computeStyles:cc,eventListeners:Ur,flip:gu,hide:oi,offset:Zr,popperOffsets:mr,preventOverflow:Jn},Symbol.toStringTag,{value:"Module"})),Go="dropdown",$c="ArrowUp",ca="ArrowDown",ml="click.bs.dropdown.data-api",uc="keydown.bs.dropdown.data-api",ln="show",jr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Rr=`${jr}.show`,Da=".dropdown-menu",gl=an()?"top-end":"top-start",Cr=an()?"top-start":"top-end",_m=an()?"bottom-end":"bottom-start",Wc=an()?"bottom-start":"bottom-end",da=an()?"left-start":"right-start",fu=an()?"right-start":"left-start",Yg={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cm={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fs extends st{constructor(w,M){super(w,M),this._popper=null,this._parent=this._element.parentNode,this._menu=Rt.next(this._element,Da)[0]||Rt.prev(this._element,Da)[0]||Rt.findOne(Da,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Yg}static get DefaultType(){return Cm}static get NAME(){return Go}toggle(){return this._isShown()?this.hide():this.show()}show(){if(On(this._element)||this._isShown())return;const w={relatedTarget:this._element};if(!Ze.trigger(this._element,"show.bs.dropdown",w).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const M of[].concat(...document.body.children))Ze.on(M,"mouseover",Js);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ln),this._element.classList.add(ln),Ze.trigger(this._element,"shown.bs.dropdown",w)}}hide(){!On(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(w){if(!Ze.trigger(this._element,"hide.bs.dropdown",w).defaultPrevented){if("ontouchstart"in document.documentElement)for(const M of[].concat(...document.body.children))Ze.off(M,"mouseover",Js);this._popper&&this._popper.destroy(),this._menu.classList.remove(ln),this._element.classList.remove(ln),this._element.setAttribute("aria-expanded","false"),yt.removeDataAttribute(this._menu,"popper"),Ze.trigger(this._element,"hidden.bs.dropdown",w)}}_getConfig(w){if("object"==typeof(w=super._getConfig(w)).reference&&!So(w.reference)&&"function"!=typeof w.reference.getBoundingClientRect)throw new TypeError(`${Go.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return w}_createPopper(){if(void 0===Ts)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let w=this._element;"parent"===this._config.reference?w=this._parent:So(this._config.reference)?w=ms(this._config.reference):"object"==typeof this._config.reference&&(w=this._config.reference);const M=this._getPopperConfig();this._popper=Ra(w,this._menu,M)}_isShown(){return this._menu.classList.contains(ln)}_getPlacement(){const w=this._parent;if(w.classList.contains("dropend"))return da;if(w.classList.contains("dropstart"))return fu;if(w.classList.contains("dropup-center"))return"top";if(w.classList.contains("dropdown-center"))return"bottom";const M="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return w.classList.contains("dropup")?M?Cr:gl:M?Wc:_m}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:w}=this._config;return"string"==typeof w?w.split(",").map(M=>Number.parseInt(M,10)):"function"==typeof w?M=>w(M,this._element):w}_getPopperConfig(){const w={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(yt.setDataAttribute(this._menu,"popper","static"),w.modifiers=[{name:"applyStyles",enabled:!1}]),{...w,..."function"==typeof this._config.popperConfig?this._config.popperConfig(w):this._config.popperConfig}}_selectMenuItem({key:w,target:M}){const J=Rt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(ge=>Ta(ge));J.length&&et(J,M,w===ca,!J.includes(M)).focus()}static jQueryInterface(w){return this.each(function(){const M=fs.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===M[w])throw new TypeError(`No method named "${w}"`);M[w]()}})}static clearMenus(w){if(2===w.button||"keyup"===w.type&&"Tab"!==w.key)return;const M=Rt.find(Rr);for(const J of M){const ge=fs.getInstance(J);if(!ge||!1===ge._config.autoClose)continue;const he=w.composedPath(),Be=he.includes(ge._menu);if(he.includes(ge._element)||"inside"===ge._config.autoClose&&!Be||"outside"===ge._config.autoClose&&Be||ge._menu.contains(w.target)&&("keyup"===w.type&&"Tab"===w.key||/input|select|option|textarea|form/i.test(w.target.tagName)))continue;const qe={relatedTarget:ge._element};"click"===w.type&&(qe.clickEvent=w),ge._completeHide(qe)}}static dataApiKeydownHandler(w){const M=/input|textarea/i.test(w.target.tagName),J="Escape"===w.key,ge=[$c,ca].includes(w.key);if(!ge&&!J||M&&!J)return;w.preventDefault();const he=this.matches(jr)?this:Rt.prev(this,jr)[0]||Rt.next(this,jr)[0]||Rt.findOne(jr,w.delegateTarget.parentNode),Be=fs.getOrCreateInstance(he);if(ge)return w.stopPropagation(),Be.show(),void Be._selectMenuItem(w);Be._isShown()&&(w.stopPropagation(),Be.hide(),he.focus())}}Ze.on(document,uc,jr,fs.dataApiKeydownHandler),Ze.on(document,uc,Da,fs.dataApiKeydownHandler),Ze.on(document,ml,fs.clearMenus),Ze.on(document,"keyup.bs.dropdown.data-api",fs.clearMenus),Ze.on(document,ml,jr,function(U){U.preventDefault(),fs.getOrCreateInstance(this).toggle()}),qo(fs);const wd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zl=".sticky-top",pl="padding-right",mc="margin-right";class Vi{constructor(){this._element=document.body}getWidth(){const w=document.documentElement.clientWidth;return Math.abs(window.innerWidth-w)}hide(){const w=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,pl,M=>M+w),this._setElementAttributes(wd,pl,M=>M+w),this._setElementAttributes(zl,mc,M=>M-w)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,pl),this._resetElementAttributes(wd,pl),this._resetElementAttributes(zl,mc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(w,M,J){const ge=this.getWidth();this._applyManipulationCallback(w,he=>{if(he!==this._element&&window.innerWidth>he.clientWidth+ge)return;this._saveInitialAttribute(he,M);const Be=window.getComputedStyle(he).getPropertyValue(M);he.style.setProperty(M,`${J(Number.parseFloat(Be))}px`)})}_saveInitialAttribute(w,M){const J=w.style.getPropertyValue(M);J&&yt.setDataAttribute(w,M,J)}_resetElementAttributes(w,M){this._applyManipulationCallback(w,J=>{const ge=yt.getDataAttribute(J,M);null!==ge?(yt.removeDataAttribute(J,M),J.style.setProperty(M,ge)):J.style.removeProperty(M)})}_applyManipulationCallback(w,M){if(So(w))M(w);else for(const J of Rt.find(w,this._element))M(J)}}const Ba="mousedown.bs.backdrop",re={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Hl extends Oa{constructor(w){super(),this._config=this._getConfig(w),this._isAppended=!1,this._element=null}static get Default(){return re}static get DefaultType(){return qc}static get NAME(){return"backdrop"}show(w){if(!this._config.isVisible)return void vn(w);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{vn(w)})}hide(w){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),vn(w)})):vn(w)}dispose(){this._isAppended&&(Ze.off(this._element,Ba),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const w=document.createElement("div");w.className=this._config.className,this._config.isAnimated&&w.classList.add("fade"),this._element=w}return this._element}_configAfterMerge(w){return w.rootElement=ms(w.rootElement),w}_append(){if(this._isAppended)return;const w=this._getElement();this._config.rootElement.append(w),Ze.on(w,Ba,()=>{vn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(w){Qe(w,this._getElement(),this._config.isAnimated)}}const ea=".bs.focustrap",_d="backward",Qo={autofocus:!0,trapElement:null},Ui={autofocus:"boolean",trapElement:"element"};class Cd extends Oa{constructor(w){super(),this._config=this._getConfig(w),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Qo}static get DefaultType(){return Ui}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ze.off(document,ea),Ze.on(document,"focusin.bs.focustrap",w=>this._handleFocusin(w)),Ze.on(document,"keydown.tab.bs.focustrap",w=>this._handleKeydown(w)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ze.off(document,ea))}_handleFocusin(w){const{trapElement:M}=this._config;if(w.target===document||w.target===M||M.contains(w.target))return;const J=Rt.focusableChildren(M);0===J.length?M.focus():this._lastTabNavDirection===_d?J[J.length-1].focus():J[0].focus()}_handleKeydown(w){"Tab"===w.key&&(this._lastTabNavDirection=w.shiftKey?_d:"forward")}}const ni="hidden.bs.modal",Vl="show.bs.modal",Ma="modal-open",bu="modal-static",ta={backdrop:!0,focus:!0,keyboard:!0},Kc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ji extends st{constructor(w,M){super(w,M),this._dialog=Rt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Vi,this._addEventListeners()}static get Default(){return ta}static get DefaultType(){return Kc}static get NAME(){return"modal"}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||this._isTransitioning||Ze.trigger(this._element,Vl,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ma),this._adjustDialog(),this._backdrop.show(()=>this._showElement(w)))}hide(){this._isShown&&!this._isTransitioning&&(Ze.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const w of[window,this._dialog])Ze.off(w,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Hl({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Cd({trapElement:this._element})}_showElement(w){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const M=Rt.findOne(".modal-body",this._dialog);M&&(M.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ze.trigger(this._element,"shown.bs.modal",{relatedTarget:w})},this._dialog,this._isAnimated())}_addEventListeners(){Ze.on(this._element,"keydown.dismiss.bs.modal",w=>{if("Escape"===w.key)return this._config.keyboard?(w.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),Ze.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Ze.on(this._element,"mousedown.dismiss.bs.modal",w=>{Ze.one(this._element,"click.dismiss.bs.modal",M=>{this._element===w.target&&this._element===M.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ma),this._resetAdjustments(),this._scrollBar.reset(),Ze.trigger(this._element,ni)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ze.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const w=this._element.scrollHeight>document.documentElement.clientHeight,M=this._element.style.overflowY;"hidden"===M||this._element.classList.contains(bu)||(w||(this._element.style.overflowY="hidden"),this._element.classList.add(bu),this._queueCallback(()=>{this._element.classList.remove(bu),this._queueCallback(()=>{this._element.style.overflowY=M},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const w=this._element.scrollHeight>document.documentElement.clientHeight,M=this._scrollBar.getWidth(),J=M>0;if(J&&!w){const ge=an()?"paddingLeft":"paddingRight";this._element.style[ge]=`${M}px`}if(!J&&w){const ge=an()?"paddingRight":"paddingLeft";this._element.style[ge]=`${M}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(w,M){return this.each(function(){const J=ji.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===J[w])throw new TypeError(`No method named "${w}"`);J[w](M)}})}}Ze.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(U){const w=Xr(this);["A","AREA"].includes(this.tagName)&&U.preventDefault(),Ze.one(w,Vl,J=>{J.defaultPrevented||Ze.one(w,ni,()=>{Ta(this)&&this.focus()})});const M=Rt.findOne(".modal.show");M&&ji.getInstance(M).hide(),ji.getOrCreateInstance(w).toggle(this)}),Wo(ji),qo(ji);const pr="showing",yu=".offcanvas.show",Os="hidePrevented.bs.offcanvas",pc="hidden.bs.offcanvas",Yc={backdrop:!0,keyboard:!0,scroll:!1},Oi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class $r extends st{constructor(w,M){super(w,M),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Yc}static get DefaultType(){return Oi}static get NAME(){return"offcanvas"}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||Ze.trigger(this._element,"show.bs.offcanvas",{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Vi).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(pr),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(pr),Ze.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:w})},this._element,!0))}hide(){this._isShown&&(Ze.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Vi).reset(),Ze.trigger(this._element,pc)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const w=Boolean(this._config.backdrop);return new Hl({className:"offcanvas-backdrop",isVisible:w,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:w?()=>{"static"!==this._config.backdrop?this.hide():Ze.trigger(this._element,Os)}:null})}_initializeFocusTrap(){return new Cd({trapElement:this._element})}_addEventListeners(){Ze.on(this._element,"keydown.dismiss.bs.offcanvas",w=>{"Escape"===w.key&&(this._config.keyboard?this.hide():Ze.trigger(this._element,Os))})}static jQueryInterface(w){return this.each(function(){const M=$r.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===M[w]||w.startsWith("_")||"constructor"===w)throw new TypeError(`No method named "${w}"`);M[w](this)}})}}Ze.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(U){const w=Xr(this);if(["A","AREA"].includes(this.tagName)&&U.preventDefault(),On(this))return;Ze.one(w,pc,()=>{Ta(this)&&this.focus()});const M=Rt.findOne(yu);M&&M!==w&&$r.getInstance(M).hide(),$r.getOrCreateInstance(w).toggle(this)}),Ze.on(window,"load.bs.offcanvas.data-api",()=>{for(const U of Rt.find(yu))$r.getOrCreateInstance(U).show()}),Ze.on(window,"resize.bs.offcanvas",()=>{for(const U of Rt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(U).position&&$r.getOrCreateInstance(U).hide()}),Wo($r),qo($r);const hl=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Sm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,wu=(U,w)=>{const M=U.nodeName.toLowerCase();return w.includes(M)?!hl.has(M)||Boolean(xu.test(U.nodeValue)||Sm.test(U.nodeValue)):w.filter(J=>J instanceof RegExp).some(J=>J.test(M))},km={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Xc={allowList:km,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Sd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Hn={entry:"(string|element|function|null)",selector:"(string|element)"};class hr extends Oa{constructor(w){super(),this._config=this._getConfig(w)}static get Default(){return Xc}static get DefaultType(){return Sd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(w=>this._resolvePossibleFunction(w)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(w){return this._checkContent(w),this._config.content={...this._config.content,...w},this}toHtml(){const w=document.createElement("div");w.innerHTML=this._maybeSanitize(this._config.template);for(const[ge,he]of Object.entries(this._config.content))this._setContent(w,he,ge);const M=w.children[0],J=this._resolvePossibleFunction(this._config.extraClass);return J&&M.classList.add(...J.split(" ")),M}_typeCheckConfig(w){super._typeCheckConfig(w),this._checkContent(w.content)}_checkContent(w){for(const[M,J]of Object.entries(w))super._typeCheckConfig({selector:M,entry:J},Hn)}_setContent(w,M,J){const ge=Rt.findOne(J,w);ge&&((M=this._resolvePossibleFunction(M))?So(M)?this._putElementInTemplate(ms(M),ge):this._config.html?ge.innerHTML=this._maybeSanitize(M):ge.textContent=M:ge.remove())}_maybeSanitize(w){return this._config.sanitize?function(M,J,ge){if(!M.length)return M;if(ge&&"function"==typeof ge)return ge(M);const he=(new window.DOMParser).parseFromString(M,"text/html"),Be=[].concat(...he.body.querySelectorAll("*"));for(const qe of Be){const Te=qe.nodeName.toLowerCase();if(!Object.keys(J).includes(Te)){qe.remove();continue}const Dt=[].concat(...qe.attributes),Vt=[].concat(J["*"]||[],J[Te]||[]);for(const Et of Dt)wu(Et,Vt)||qe.removeAttribute(Et.nodeName)}return he.body.innerHTML}(w,this._config.allowList,this._config.sanitizeFn):w}_resolvePossibleFunction(w){return"function"==typeof w?w(this):w}_putElementInTemplate(w,M){if(this._config.html)return M.innerHTML="",void M.append(w);M.textContent=w.textContent}}const Ul=new Set(["sanitize","allowList","sanitizeFn"]),$i="fade",Sr="show",bl="hide.bs.modal",kd="hover",ya={AUTO:"auto",TOP:"top",RIGHT:an()?"left":"right",BOTTOM:"bottom",LEFT:an()?"right":"left"},_u={allowList:km,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ed={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class As extends st{constructor(w,M){if(void 0===Ts)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(w,M),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return _u}static get DefaultType(){return Ed}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Ze.off(this._element.closest(".modal"),bl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const w=Ze.trigger(this._element,this.constructor.eventName("show")),M=(Ya(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(w.defaultPrevented||!M)return;this._disposePopper();const J=this._getTipElement();this._element.setAttribute("aria-describedby",J.getAttribute("id"));const{container:ge}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ge.append(J),Ze.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(J),J.classList.add(Sr),"ontouchstart"in document.documentElement)for(const he of[].concat(...document.body.children))Ze.on(he,"mouseover",Js);this._queueCallback(()=>{Ze.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Ze.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Sr),"ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))Ze.off(w,"mouseover",Js);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Ze.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(w){const M=this._getTemplateFactory(w).toHtml();if(!M)return null;M.classList.remove($i,Sr),M.classList.add(`bs-${this.constructor.NAME}-auto`);const J=(ge=>{do{ge+=Math.floor(1e6*Math.random())}while(document.getElementById(ge));return ge})(this.constructor.NAME).toString();return M.setAttribute("id",J),this._isAnimated()&&M.classList.add($i),M}setContent(w){this._newContent=w,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(w){return this._templateFactory?this._templateFactory.changeContent(w):this._templateFactory=new hr({...this._config,content:w,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(w){return this.constructor.getOrCreateInstance(w.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains($i)}_isShown(){return this.tip&&this.tip.classList.contains(Sr)}_createPopper(w){const M="function"==typeof this._config.placement?this._config.placement.call(this,w,this._element):this._config.placement,J=ya[M.toUpperCase()];return Ra(this._element,w,this._getPopperConfig(J))}_getOffset(){const{offset:w}=this._config;return"string"==typeof w?w.split(",").map(M=>Number.parseInt(M,10)):"function"==typeof w?M=>w(M,this._element):w}_resolvePossibleFunction(w){return"function"==typeof w?w.call(this._element):w}_getPopperConfig(w){const M={placement:w,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:J=>{this._getTipElement().setAttribute("data-popper-placement",J.state.placement)}}]};return{...M,..."function"==typeof this._config.popperConfig?this._config.popperConfig(M):this._config.popperConfig}}_setListeners(){const w=this._config.trigger.split(" ");for(const M of w)if("click"===M)Ze.on(this._element,this.constructor.eventName("click"),this._config.selector,J=>{this._initializeOnDelegatedTarget(J).toggle()});else if("manual"!==M){const J=this.constructor.eventName(M===kd?"mouseenter":"focusin"),ge=this.constructor.eventName(M===kd?"mouseleave":"focusout");Ze.on(this._element,J,this._config.selector,he=>{const Be=this._initializeOnDelegatedTarget(he);Be._activeTrigger["focusin"===he.type?"focus":kd]=!0,Be._enter()}),Ze.on(this._element,ge,this._config.selector,he=>{const Be=this._initializeOnDelegatedTarget(he);Be._activeTrigger["focusout"===he.type?"focus":kd]=Be._element.contains(he.relatedTarget),Be._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Ze.on(this._element.closest(".modal"),bl,this._hideModalHandler)}_fixTitle(){const w=this._element.getAttribute("title");w&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",w),this._element.setAttribute("data-bs-original-title",w),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(w,M){clearTimeout(this._timeout),this._timeout=setTimeout(w,M)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(w){const M=yt.getDataAttributes(this._element);for(const J of Object.keys(M))Ul.has(J)&&delete M[J];return w={...M,..."object"==typeof w&&w?w:{}},w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w.container=!1===w.container?document.body:ms(w.container),"number"==typeof w.delay&&(w.delay={show:w.delay,hide:w.delay}),"number"==typeof w.title&&(w.title=w.title.toString()),"number"==typeof w.content&&(w.content=w.content.toString()),w}_getDelegateConfig(){const w={};for(const M in this._config)this.constructor.Default[M]!==this._config[M]&&(w[M]=this._config[M]);return w.selector=!1,w.trigger="manual",w}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(w){return this.each(function(){const M=As.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===M[w])throw new TypeError(`No method named "${w}"`);M[w]()}})}}qo(As);const jl={...As.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Wi={...As.DefaultType,content:"(null|string|element|function)"};class hc extends As{static get Default(){return jl}static get DefaultType(){return Wi}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(w){return this.each(function(){const M=hc.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===M[w])throw new TypeError(`No method named "${w}"`);M[w]()}})}}qo(hc);const fc="click.bs.scrollspy",kr="active",Dn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},I={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class V extends st{constructor(w,M){super(w,M),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Dn}static get DefaultType(){return I}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const w of this._observableSections.values())this._observer.observe(w)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(w){return w.target=ms(w.target)||document.body,w.rootMargin=w.offset?`${w.offset}px 0px -30%`:w.rootMargin,"string"==typeof w.threshold&&(w.threshold=w.threshold.split(",").map(M=>Number.parseFloat(M))),w}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Ze.off(this._config.target,fc),Ze.on(this._config.target,fc,"[href]",w=>{const M=this._observableSections.get(w.target.hash);if(M){w.preventDefault();const J=this._rootElement||window,ge=M.offsetTop-this._element.offsetTop;if(J.scrollTo)return void J.scrollTo({top:ge,behavior:"smooth"});J.scrollTop=ge}}))}_getNewObserver(){return new IntersectionObserver(M=>this._observerCallback(M),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(w){const M=Be=>this._targetLinks.get(`#${Be.target.id}`),J=Be=>{this._previousScrollData.visibleEntryTop=Be.target.offsetTop,this._process(M(Be))},ge=(this._rootElement||document.documentElement).scrollTop,he=ge>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ge;for(const Be of w){if(!Be.isIntersecting){this._activeTarget=null,this._clearActiveClass(M(Be));continue}const qe=Be.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(he&&qe){if(J(Be),!ge)return}else he||qe||J(Be)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const w=Rt.find("[href]",this._config.target);for(const M of w){if(!M.hash||On(M))continue;const J=Rt.findOne(M.hash,this._element);Ta(J)&&(this._targetLinks.set(M.hash,M),this._observableSections.set(M.hash,J))}}_process(w){this._activeTarget!==w&&(this._clearActiveClass(this._config.target),this._activeTarget=w,w.classList.add(kr),this._activateParents(w),Ze.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:w}))}_activateParents(w){if(w.classList.contains("dropdown-item"))Rt.findOne(".dropdown-toggle",w.closest(".dropdown")).classList.add(kr);else for(const M of Rt.parents(w,".nav, .list-group"))for(const J of Rt.prev(M,".nav-link, .nav-item > .nav-link, .list-group-item"))J.classList.add(kr)}_clearActiveClass(w){w.classList.remove(kr);const M=Rt.find("[href].active",w);for(const J of M)J.classList.remove(kr)}static jQueryInterface(w){return this.each(function(){const M=V.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===M[w]||w.startsWith("_")||"constructor"===w)throw new TypeError(`No method named "${w}"`);M[w]()}})}}Ze.on(window,"load.bs.scrollspy.data-api",()=>{for(const U of Rt.find('[data-bs-spy="scroll"]'))V.getOrCreateInstance(U)}),qo(V);const j="ArrowLeft",X="ArrowRight",le="ArrowUp",be="ArrowDown",Pe="active",We="show",Ke='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',mt=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Ke}`;class ct extends st{constructor(w){super(w),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Ze.on(this._element,"keydown.bs.tab",M=>this._keydown(M)))}static get NAME(){return"tab"}show(){const w=this._element;if(this._elemIsActive(w))return;const M=this._getActiveElem(),J=M?Ze.trigger(M,"hide.bs.tab",{relatedTarget:w}):null;Ze.trigger(w,"show.bs.tab",{relatedTarget:M}).defaultPrevented||J&&J.defaultPrevented||(this._deactivate(M,w),this._activate(w,M))}_activate(w,M){w&&(w.classList.add(Pe),this._activate(Xr(w)),this._queueCallback(()=>{"tab"===w.getAttribute("role")?(w.removeAttribute("tabindex"),w.setAttribute("aria-selected",!0),this._toggleDropDown(w,!0),Ze.trigger(w,"shown.bs.tab",{relatedTarget:M})):w.classList.add(We)},w,w.classList.contains("fade")))}_deactivate(w,M){w&&(w.classList.remove(Pe),w.blur(),this._deactivate(Xr(w)),this._queueCallback(()=>{"tab"===w.getAttribute("role")?(w.setAttribute("aria-selected",!1),w.setAttribute("tabindex","-1"),this._toggleDropDown(w,!1),Ze.trigger(w,"hidden.bs.tab",{relatedTarget:M})):w.classList.remove(We)},w,w.classList.contains("fade")))}_keydown(w){if(![j,X,le,be].includes(w.key))return;w.stopPropagation(),w.preventDefault();const M=[X,be].includes(w.key),J=et(this._getChildren().filter(ge=>!On(ge)),w.target,M,!0);J&&(J.focus({preventScroll:!0}),ct.getOrCreateInstance(J).show())}_getChildren(){return Rt.find(mt,this._parent)}_getActiveElem(){return this._getChildren().find(w=>this._elemIsActive(w))||null}_setInitialAttributes(w,M){this._setAttributeIfNotExists(w,"role","tablist");for(const J of M)this._setInitialAttributesOnChild(J)}_setInitialAttributesOnChild(w){w=this._getInnerElement(w);const M=this._elemIsActive(w),J=this._getOuterElement(w);w.setAttribute("aria-selected",M),J!==w&&this._setAttributeIfNotExists(J,"role","presentation"),M||w.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(w,"role","tab"),this._setInitialAttributesOnTargetPanel(w)}_setInitialAttributesOnTargetPanel(w){const M=Xr(w);M&&(this._setAttributeIfNotExists(M,"role","tabpanel"),w.id&&this._setAttributeIfNotExists(M,"aria-labelledby",`#${w.id}`))}_toggleDropDown(w,M){const J=this._getOuterElement(w);if(!J.classList.contains("dropdown"))return;const ge=(he,Be)=>{const qe=Rt.findOne(he,J);qe&&qe.classList.toggle(Be,M)};ge(".dropdown-toggle",Pe),ge(".dropdown-menu",We),J.setAttribute("aria-expanded",M)}_setAttributeIfNotExists(w,M,J){w.hasAttribute(M)||w.setAttribute(M,J)}_elemIsActive(w){return w.classList.contains(Pe)}_getInnerElement(w){return w.matches(mt)?w:Rt.findOne(mt,w)}_getOuterElement(w){return w.closest(".nav-item, .list-group-item")||w}static jQueryInterface(w){return this.each(function(){const M=ct.getOrCreateInstance(this);if("string"==typeof w){if(void 0===M[w]||w.startsWith("_")||"constructor"===w)throw new TypeError(`No method named "${w}"`);M[w]()}})}}Ze.on(document,"click.bs.tab",Ke,function(U){["A","AREA"].includes(this.tagName)&&U.preventDefault(),On(this)||ct.getOrCreateInstance(this).show()}),Ze.on(window,"load.bs.tab",()=>{for(const U of Rt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))ct.getOrCreateInstance(U)}),qo(ct);const Ct="show",je="showing",Do={animation:"boolean",autohide:"boolean",delay:"number"},St={animation:!0,autohide:!0,delay:5e3};class mo extends st{constructor(w,M){super(w,M),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return St}static get DefaultType(){return Do}static get NAME(){return"toast"}show(){Ze.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Ct,je),this._queueCallback(()=>{this._element.classList.remove(je),Ze.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Ze.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(je),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(je,Ct),Ze.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ct),super.dispose()}isShown(){return this._element.classList.contains(Ct)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(w,M){switch(w.type){case"mouseover":case"mouseout":this._hasMouseInteraction=M;break;case"focusin":case"focusout":this._hasKeyboardInteraction=M}if(M)return void this._clearTimeout();const J=w.relatedTarget;this._element===J||this._element.contains(J)||this._maybeScheduleHide()}_setListeners(){Ze.on(this._element,"mouseover.bs.toast",w=>this._onInteraction(w,!0)),Ze.on(this._element,"mouseout.bs.toast",w=>this._onInteraction(w,!1)),Ze.on(this._element,"focusin.bs.toast",w=>this._onInteraction(w,!0)),Ze.on(this._element,"focusout.bs.toast",w=>this._onInteraction(w,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(w){return this.each(function(){const M=mo.getOrCreateInstance(this,w);if("string"==typeof w){if(void 0===M[w])throw new TypeError(`No method named "${w}"`);M[w](this)}})}}return Wo(mo),qo(mo),{Alert:qt,Button:ha,Carousel:Aa,Collapse:Yo,Dropdown:fs,Modal:ji,Offcanvas:$r,Popover:hc,ScrollSpy:V,Tab:ct,Toast:mo,Tooltip:As}}),function(){"use strict";var ll=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var o=typeof t;return"object"===o&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===o&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":o},Xs=function(t){return{eq:t}},cl=Xs(function(t,o){return t===o}),Xr=function(t){return Xs(function(o,n){if(o.length!==n.length)return!1;for(var s=o.length,i=0;i<s;i++)if(!t.eq(o[i],n[i]))return!1;return!0})},dl=function(t){return Xs(function(o,n){var p,b,x,s=Object.keys(o),i=Object.keys(n);if(!(p=cl,b=Xr(p),x=function(b){return Array.prototype.slice.call(b).sort(void 0)},Xs(function(C,O){return b.eq(x(C),x(O))})).eq(s,i))return!1;for(var c=s.length,d=0;d<c;d++){var u=s[d];if(!t.eq(o[u],n[u]))return!1}return!0})},So=Xs(function(t,o){if(t===o)return!0;var n=ll(t);return n===ll(o)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===o:"array"===n?Xr(So).eq(t,o):"object"===n&&dl(So).eq(t,o))});const ms=Object.getPrototypeOf,Ta=(t,o,n)=>{var s;return!!n(t,o.prototype)||(null===(s=t.constructor)||void 0===s?void 0:s.name)===o.name},On=t=>o=>(n=>{const s=typeof n;return null===n?"null":"object"===s&&Array.isArray(n)?"array":"object"===s&&Ta(n,String,(i,c)=>c.isPrototypeOf(i))?"string":s})(o)===t,Ya=t=>o=>typeof o===t,Js=t=>o=>t===o,sn=(t,o)=>vt(t)&&Ta(t,o,(n,s)=>ms(n)===s),_t=On("string"),vt=On("object"),an=t=>sn(t,Object),qo=On("array"),vn=Js(null),Qe=Ya("boolean"),et=Js(void 0),An=t=>null==t,ee=t=>!An(t),ut=Ya("function"),rs=Ya("number"),Xn=(t,o)=>{if(qo(t)){for(let n=0,s=t.length;n<s;++n)if(!o(t[n]))return!1;return!0}return!1},Kt=()=>{},lr=(t,o)=>(...n)=>t(o.apply(null,n)),Fl=(t,o)=>n=>t(o(n)),Ve=t=>()=>t,un=t=>t,N=(t,o)=>t===o;function it(t,...o){return(...n)=>{const s=o.concat(n);return t.apply(null,s)}}const wi=t=>o=>!t(o),ss=t=>()=>{throw new Error(t)},Pr=t=>t(),Ze=t=>{t()},wo=Ve(!1),Vo=Ve(!0);class H{constructor(o,n){this.tag=o,this.value=n}static some(o){return new H(!0,o)}static none(){return H.singletonNone}fold(o,n){return this.tag?n(this.value):o()}isSome(){return this.tag}isNone(){return!this.tag}map(o){return this.tag?H.some(o(this.value)):H.none()}bind(o){return this.tag?o(this.value):H.none()}exists(o){return this.tag&&o(this.value)}forall(o){return!this.tag||o(this.value)}filter(o){return!this.tag||o(this.value)?this:H.none()}getOr(o){return this.tag?this.value:o}or(o){return this.tag?this:o}getOrThunk(o){return this.tag?this.value:o()}orThunk(o){return this.tag?this:o()}getOrDie(o){if(this.tag)return this.value;throw new Error(o??"Called getOrDie on None")}static from(o){return ee(o)?H.some(o):H.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(o){this.tag&&o(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}H.singletonNone=new H(!1);const _i=Array.prototype.slice,Je=Array.prototype.indexOf,yt=Array.prototype.push,Oa=(t,o)=>Je.call(t,o),st=(t,o)=>Oa(t,o)>-1,Wo=(t,o)=>{for(let n=0,s=t.length;n<s;n++)if(o(t[n],n))return!0;return!1},qt=(t,o)=>{const n=t.length,s=new Array(n);for(let i=0;i<n;i++)s[i]=o(t[i],i);return s},Ee=(t,o)=>{for(let n=0,s=t.length;n<s;n++)o(t[n],n)},ha=(t,o)=>{for(let n=t.length-1;n>=0;n--)o(t[n],n)},Rt=(t,o)=>{const n=[],s=[];for(let i=0,c=t.length;i<c;i++){const d=t[i];(o(d,i)?n:s).push(d)}return{pass:n,fail:s}},ft=(t,o)=>{const n=[];for(let s=0,i=t.length;s<i;s++){const c=t[s];o(c,s)&&n.push(c)}return n},Qs=(t,o,n)=>(ha(t,(s,i)=>{n=o(n,s,i)}),n),Nn=(t,o,n)=>(Ee(t,(s,i)=>{n=o(n,s,i)}),n),Is=(t,o,n)=>{for(let s=0,i=t.length;s<i;s++){const c=t[s];if(o(c,s))return H.some(c);if(n(c,s))break}return H.none()},yn=(t,o)=>Is(t,o,wo),la=(t,o)=>{for(let n=0,s=t.length;n<s;n++)if(o(t[n],n))return H.some(n);return H.none()},Ci=t=>{const o=[];for(let n=0,s=t.length;n<s;++n){if(!qo(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);yt.apply(o,t[n])}return o},Lr=(t,o)=>Ci(qt(t,o)),cr=(t,o)=>{for(let n=0,s=t.length;n<s;++n)if(!0!==o(t[n],n))return!1;return!0},fa=t=>{const o=_i.call(t,0);return o.reverse(),o},Si=(t,o)=>ft(t,n=>!st(o,n)),Ps=(t,o)=>{const n={};for(let s=0,i=t.length;s<i;s++){const c=t[s];n[String(c)]=o(c,s)}return n},Rn=(t,o)=>{const n=_i.call(t,0);return n.sort(o),n},Aa=(t,o)=>o>=0&&o<t.length?H.some(t[o]):H.none(),gn=t=>Aa(t,0),pn=t=>Aa(t,t.length-1),dr=ut(Array.from)?Array.from:t=>_i.call(t),Xa=(t,o)=>{for(let n=0;n<t.length;n++){const s=o(t[n],n);if(s.isSome())return s}return H.none()},as=Object.keys,sc=Object.hasOwnProperty,Yo=(t,o)=>{const n=as(t);for(let s=0,i=n.length;s<i;s++){const c=n[s];o(t[c],c)}},Fr=(t,o)=>Jr(t,(n,s)=>({k:s,v:o(n,s)})),Jr=(t,o)=>{const n={};return Yo(t,(s,i)=>{const c=o(s,i);n[c.k]=c.v}),n},lt=t=>(o,n)=>{t[n]=o},vo=(t,o,n,s)=>{Yo(t,(i,c)=>{(o(i,c)?n:s)(i,c)})},zr=(t,o)=>{const n={};return vo(t,o,lt(n),Kt),n},Nr=(t,o)=>{const n=[];return Yo(t,(s,i)=>{n.push(o(s,i))}),n},gs=t=>Nr(t,un),Xo=(t,o)=>Gt(t,o)?H.from(t[o]):H.none(),Gt=(t,o)=>sc.call(t,o),Hr=(t,o)=>Gt(t,o)&&null!=t[o],ki=t=>{const o={};return Ee(t,n=>{o[n]={}}),as(o)},ac=t=>void 0!==t.length,_r=Array.isArray,Fi=(t,o,n)=>{if(!t)return!1;if(n=n||t,ac(t)){for(let s=0,i=t.length;s<i;s++)if(!1===o.call(n,t[s],s,t))return!1}else for(const s in t)if(Gt(t,s)&&!1===o.call(n,t[s],s,t))return!1;return!0},Ei=(t,o)=>{const n=[];return Fi(t,(s,i)=>{n.push(o(s,i,t))}),n},Ja=(t,o)=>{const n=[];return Fi(t,(s,i)=>{o&&!o(s,i,t)||n.push(s)}),n},Na=(t,o,n,s)=>{let i=et(n)?t[0]:n;for(let c=0;c<t.length;c++)i=o.call(s,i,t[c],c);return i},zi=(t,o,n)=>{for(let s=0,i=t.length;s<i;s++)if(o.call(n,t[s],s,t))return s;return-1},Ss=t=>t[t.length-1],ba=t=>{let o,n=!1;return(...s)=>(n||(n=!0,o=t.apply(null,s)),o)},ic=()=>Ls(0,0),Ls=(t,o)=>({major:t,minor:o}),xe={nu:Ls,detect:(t,o)=>{const n=String(o).toLowerCase();return 0===t.length?ic():((s,i)=>{const c=((u,p)=>{for(let f=0;f<u.length;f++){const b=u[f];if(b.test(p))return b}})(s,i);if(!c)return{major:0,minor:0};const d=u=>Number(i.replace(c,"$"+u));return Ls(d(1),d(2))})(t,n)},unknown:ic},oe=(t,o)=>{const n=String(o).toLowerCase();return yn(t,s=>s.search(n))},Ne=(t,o,n)=>""===o||t.length>=o.length&&t.substr(n,n+o.length)===o,Re=(t,o)=>tt(t,o)?t.substring(o.length):t,Xe=(t,o,n=0,s)=>{const i=t.indexOf(o,n);return-1!==i&&(!!et(s)||i+o.length<=s)},tt=(t,o)=>Ne(t,o,0),nt=(t,o)=>Ne(t,o,t.length-o.length),Yt=t=>o=>o.replace(t,""),Zt=Yt(/^\s+|\s+$/g),ho=Yt(/^\s+/g),Io=Yt(/\s+$/g),To=t=>t.length>0,Ro=t=>!To(t),jn=(t,o=10)=>{const n=parseInt(t,o);return isNaN(n)?H.none():H.some(n)},or=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xn=t=>o=>Xe(o,t),Jo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Xe(t,"edge/")&&Xe(t,"chrome")&&Xe(t,"safari")&&Xe(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,or],search:t=>Xe(t,"chrome")&&!Xe(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Xe(t,"msie")||Xe(t,"trident")},{name:"Opera",versionRegexes:[or,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xn("firefox")},{name:"Safari",versionRegexes:[or,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Xe(t,"safari")||Xe(t,"mobile/"))&&Xe(t,"applewebkit")}],ks=[{name:"Windows",search:xn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Xe(t,"iphone")||Xe(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:xn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xn("linux"),versionRegexes:[]},{name:"Solaris",search:xn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:xn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Qr={browsers:Ve(Jo),oses:Ve(ks)},Qa="Chromium",Zs="Firefox",lc=t=>{const o=t.current,s=i=>()=>o===i;return{current:o,version:t.version,isEdge:s("Edge"),isChromium:s(Qa),isIE:s("IE"),isOpera:s("Opera"),isFirefox:s(Zs),isSafari:s("Safari")}},Ti=()=>lc({current:void 0,version:xe.unknown()}),ul=lc,zc=(Ve("Edge"),Ve(Qa),Ve("IE"),Ve("Opera"),Ve(Zs),Ve("Safari"),"Windows"),Vr="Android",cc="Solaris",dc="FreeBSD",Ur="ChromeOS",ei=t=>{const o=t.current,s=i=>()=>o===i;return{current:o,version:t.version,isWindows:s(zc),isiOS:s("iOS"),isAndroid:s(Vr),isMacOS:s("macOS"),isLinux:s("Linux"),isSolaris:s(cc),isFreeBSD:s(dc),isChromeOS:s(Ur)}},Vc=()=>ei({current:void 0,version:xe.unknown()}),Kg=ei,ps=(Ve(zc),Ve("iOS"),Ve(Vr),Ve("Linux"),Ve("macOS"),Ve(cc),Ve(dc),Ve(Ur),t=>window.matchMedia(t).matches);let va=ba(()=>((t,o,n)=>{const s=Qr.browsers(),i=Qr.oses(),c=o.bind(p=>{return f=s,Xa(p.brands,x=>{const C=x.brand.toLowerCase();return yn(f,O=>{var S;return C===(null===(S=O.brand)||void 0===S?void 0:S.toLowerCase())}).map(O=>({current:O.name,version:xe.nu(parseInt(x.version,10),0)}))});var f}).orThunk(()=>{return oe(s,f=t).map(b=>{const x=xe.detect(b.versionRegexes,f);return{current:b.name,version:x}});var f}).fold(Ti,ul),d=(p=i,f=t,oe(p,f).map(b=>{const x=xe.detect(b.versionRegexes,f);return{current:b.name,version:x}})).fold(Vc,Kg),u=((p,f,b,x)=>{const C=p.isiOS()&&!0===/ipad/i.test(b),O=p.isiOS()&&!C,S=p.isiOS()||p.isAndroid(),R=S||x("(pointer:coarse)"),T=C||!O&&S&&x("(min-device-width:768px)"),D=O||S&&!T,P=f.isSafari()&&p.isiOS()&&!1===/safari/i.test(b),F=!D&&!T&&!P;return{isiPad:Ve(C),isiPhone:Ve(O),isTablet:Ve(T),isPhone:Ve(D),isTouch:Ve(R),isAndroid:p.isAndroid,isiOS:p.isiOS,isWebView:Ve(P),isDesktop:Ve(F)}})(d,c,t,n);var p,f;return{browser:c,os:d,deviceType:u}})(navigator.userAgent,H.from(navigator.userAgentData),ps));const ti=()=>va(),Uc=navigator.userAgent,ro=ti(),hs=ro.browser,zn=ro.os,ur=ro.deviceType,uu=-1!==Uc.indexOf("Windows Phone"),Ht={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:hs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!hs.isIE(),windowsPhone:uu,browser:{current:hs.current,version:hs.version,isChromium:hs.isChromium,isEdge:hs.isEdge,isFirefox:hs.isFirefox,isIE:hs.isIE,isOpera:hs.isOpera,isSafari:hs.isSafari},os:{current:zn.current,version:zn.version,isAndroid:zn.isAndroid,isChromeOS:zn.isChromeOS,isFreeBSD:zn.isFreeBSD,isiOS:zn.isiOS,isLinux:zn.isLinux,isMacOS:zn.isMacOS,isSolaris:zn.isSolaris,isWindows:zn.isWindows},deviceType:{isDesktop:ur.isDesktop,isiPad:ur.isiPad,isiPhone:ur.isiPhone,isPhone:ur.isPhone,isTablet:ur.isTablet,isTouch:ur.isTouch,isWebView:ur.isWebView}},mu=/^\s*|\s*$/g,gu=t=>An(t)?"":(""+t).replace(mu,""),lo=function(t,o,n,s){s=s||this,t&&(n&&(t=t[n]),Fi(t,(i,c)=>!1!==o.call(s,i,c,n)&&(lo(i,o,n,s),!0)))},$e={trim:gu,isArray:_r,is:(t,o)=>o?!("array"!==o||!_r(t))||typeof t===o:void 0!==t,toArray:t=>{if(_r(t))return t;{const o=[];for(let n=0,s=t.length;n<s;n++)o[n]=t[n];return o}},makeMap:(t,o,n={})=>{const s=_t(t)?t.split(o||","):t||[];let i=s.length;for(;i--;)n[s[i]]={};return n},each:Fi,map:Ei,grep:Ja,inArray:(t,o)=>{if(t)for(let n=0,s=t.length;n<s;n++)if(t[n]===o)return n;return-1},hasOwn:Gt,extend:(t,...o)=>{for(let n=0;n<o.length;n++){const s=o[n];for(const i in s)if(Gt(s,i)){const c=s[i];void 0!==c&&(t[i]=c)}}return t},walk:lo,resolve:(t,o=window)=>{const n=t.split(".");for(let s=0,i=n.length;s<i&&(o=o[n[s]]);s++);return o},explode:(t,o)=>qo(t)?t:""===t?[]:Ei(t.split(o||","),gu),_addCacheSuffix:t=>{const o=Ht.cacheSuffix;return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},oi=(t,o,n=N)=>t.exists(s=>n(s,o)),Zr=(t,o,n=N)=>mr(t,o,n).getOr(t.isNone()&&o.isNone()),mr=(t,o,n)=>t.isSome()&&o.isSome()?H.some(n(t.getOrDie(),o.getOrDie())):H.none(),Jn=(t,o)=>t?H.some(o):H.none(),wm=typeof window<"u"?window:Function("return this;")(),pu=(t,o)=>((n,s)=>{let i=s??wm;for(let c=0;c<n.length&&null!=i;++c)i=i[n[c]];return i})(t.split("."),o),mn=Object.getPrototypeOf,Po=t=>t.dom.nodeName.toLowerCase(),hu=t=>t.dom.nodeType,gr=t=>o=>hu(o)===t,Ra=t=>Ts(t)&&(t=>{const o=pu("ownerDocument.defaultView",t);return vt(t)&&((n=o,((s,i)=>{const c=pu("HTMLElement",i);if(null==c)throw new Error("HTMLElement not available on this browser");return c})(0,n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(mn(t).constructor.name));var n})(t.dom),Ts=gr(1),Go=gr(3),$c=gr(9),ca=gr(11),ml=t=>o=>Ts(o)&&Po(o)===t,uc=(t,o,n)=>{if(!(_t(n)||Qe(n)||rs(n)))throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(o,n+"")},ln=(t,o,n)=>{uc(t.dom,o,n)},jr=(t,o)=>{const n=t.dom;Yo(o,(s,i)=>{uc(n,i,s)})},Rr=(t,o)=>{const n=t.dom.getAttribute(o);return null===n?void 0:n},Da=(t,o)=>H.from(Rr(t,o)),gl=(t,o)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(o)},Cr=(t,o)=>{t.dom.removeAttribute(o)},_m=t=>Nn(t.dom.attributes,(o,n)=>(o[n.name]=n.value,o),{}),Wc=(t,o)=>{const n=Rr(t,o);return void 0===n||""===n?[]:n.split(" ")},da=t=>void 0!==t.dom.classList,fu=t=>Wc(t,"class"),Yg=(t,o)=>((n,s,i)=>{const c=Wc(n,s).concat([i]);return ln(n,s,c.join(" ")),!0})(t,"class",o),Cm=(t,o)=>((n,s,i)=>{const c=ft(Wc(n,s),d=>d!==i);return c.length>0?ln(n,s,c.join(" ")):Cr(n,s),!1})(t,"class",o),fs=(t,o)=>{da(t)?t.dom.classList.add(o):Yg(t,o)},wd=t=>{0===(da(t)?t.dom.classList:fu(t)).length&&Cr(t,"class")},zl=(t,o)=>{da(t)?t.dom.classList.remove(o):Cm(t,o),wd(t)},pl=(t,o)=>da(t)&&t.dom.classList.contains(o),mc=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Vi=(t,o)=>{const n=(o||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,t),new Error(s)}return mc(n.childNodes[0])},nr=(t,o)=>{const n=(o||document).createElement(t);return mc(n)},Ba=(t,o)=>{const n=(o||document).createTextNode(t);return mc(n)},re=mc,Hl=(t,o)=>{const n=[],s=c=>(n.push(c),o(c));let i=o(t);do{i=i.bind(s)}while(i.isSome());return n},ea=(t,o)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const s=n;if(void 0!==s.matches)return s.matches(o);if(void 0!==s.msMatchesSelector)return s.msMatchesSelector(o);if(void 0!==s.webkitMatchesSelector)return s.webkitMatchesSelector(o);if(void 0!==s.mozMatchesSelector)return s.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},_d=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Qo=(t,o)=>t.dom===o.dom,Ui=(t,o)=>{const n=t.dom,s=o.dom;return n!==s&&n.contains(s)},Cd=t=>re(t.dom.ownerDocument),ni=t=>$c(t)?t:Cd(t),Vl=t=>re(ni(t).dom.defaultView),Ma=t=>H.from(t.dom.parentNode).map(re),Gc=t=>H.from(t.dom.parentElement).map(re),bu=(t,o)=>{const n=ut(o)?o:wo;let s=t.dom;const i=[];for(;null!=s.parentNode;){const c=s.parentNode,d=re(c);if(i.push(d),!0===n(d))break;s=c}return i},ta=t=>H.from(t.dom.previousSibling).map(re),Kc=t=>H.from(t.dom.nextSibling).map(re),ji=t=>fa(Hl(t,ta)),vu=t=>Hl(t,Kc),pr=t=>qt(t.dom.childNodes,re),gc=(t,o)=>H.from(t.dom.childNodes[o]).map(re),yu=t=>gc(t,0),Os=t=>gc(t,t.dom.childNodes.length-1),pc=t=>t.dom.childNodes.length,Yc=t=>ca(t)&&ee(t.dom.host),Oi=ut(Element.prototype.attachShadow)&&ut(Node.prototype.getRootNode),$r=Ve(Oi),hl=Oi?t=>re(t.dom.getRootNode()):ni,xu=t=>Yc(t)?t:(o=>{const n=o.dom.head;if(null==n)throw new Error("Head is not available yet");return re(n)})(ni(t)),Sm=t=>re(t.dom.host),wu=t=>{if($r()&&ee(t.target)){const o=re(t.target);if(Ts(o)&&km(o)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return gn(n)}}return H.from(t.target)},km=t=>ee(t.dom.shadowRoot),Xc=t=>{const o=Go(t)?t.dom.parentNode:t.dom;if(null==o||null===o.ownerDocument)return!1;const n=o.ownerDocument;return(s=>{const i=hl(s);return Yc(i)?H.some(i):H.none()})(re(o)).fold(()=>n.body.contains(o),Fl(Xc,Sm))};var Sd=(t,o,n,s,i)=>t(n,s)?H.some(n):ut(i)&&i(n)?H.none():o(n,s,i);const Hn=(t,o,n)=>{let s=t.dom;const i=ut(n)?n:wo;for(;s.parentNode;){s=s.parentNode;const c=re(s);if(o(c))return H.some(c);if(i(c))break}return H.none()},hr=(t,o,n)=>Sd((s,i)=>i(s),Hn,t,o,n),Ul=(t,o)=>{const n=s=>{for(let i=0;i<s.childNodes.length;i++){const c=re(s.childNodes[i]);if(o(c))return H.some(c);const d=n(s.childNodes[i]);if(d.isSome())return d}return H.none()};return n(t.dom)},$i=(t,o,n)=>Hn(t,s=>ea(s,o),n),Sr=(t,o)=>((n,s)=>{const i=void 0===s?document:s.dom;return _d(i)?H.none():H.from(i.querySelector(n)).map(re)})(o,t),fl=(t,o,n)=>Sd((s,i)=>ea(s,i),$i,t,o,n),bl=(t,o=!1)=>{return Xc(t)?t.dom.isContentEditable:(n=t,fl(n,"[contenteditable]")).fold(Ve(o),s=>"true"===kd(s));var n},kd=t=>t.dom.contentEditable,ko=t=>void 0!==t.style&&ut(t.style.getPropertyValue),ya=(t,o,n)=>{if(!_t(n))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);ko(t)&&t.style.setProperty(o,n)},_u=(t,o,n)=>{ya(t.dom,o,n)},Ed=(t,o)=>{const n=t.dom;Yo(o,(s,i)=>{ya(n,i,s)})},As=(t,o)=>{const n=t.dom,s=window.getComputedStyle(n).getPropertyValue(o);return""!==s||Xc(t)?s:jl(n,o)},jl=(t,o)=>ko(t)?t.style.getPropertyValue(o):"",Wi=(t,o)=>{const s=jl(t.dom,o);return H.from(s).filter(i=>i.length>0)},hc=t=>{const o={},n=t.dom;if(ko(n))for(let s=0;s<n.style.length;s++){const i=n.style.item(s);o[i]=n.style[i]}return o},fc=(t,o)=>{var n,s;s=o,ko(n=t.dom)&&n.style.removeProperty(s),oi(Da(t,"style").map(Zt),"")&&Cr(t,"style")},kr=(t,o)=>{Ma(t).each(n=>{n.dom.insertBefore(o.dom,t.dom)})},ri=(t,o)=>{Kc(t).fold(()=>{Ma(t).each(n=>{I(n,o)})},n=>{kr(n,o)})},Dn=(t,o)=>{yu(t).fold(()=>{I(t,o)},n=>{t.dom.insertBefore(o.dom,n.dom)})},I=(t,o)=>{t.dom.appendChild(o.dom)},V=(t,o)=>{kr(t,o),I(o,t)},j=(t,o)=>{Ee(o,n=>{I(t,n)})},X=t=>{t.dom.textContent="",Ee(pr(t),o=>{le(o)})},le=t=>{const o=t.dom;null!==o.parentNode&&o.parentNode.removeChild(o)},be=t=>{const o=pr(t);var n,s;o.length>0&&(n=t,Ee(s=o,(i,c)=>{ri(0===c?n:s[c-1],i)})),le(t)},Pe=t=>qt(t,re),Ge=t=>t.dom.innerHTML,We=(t,o)=>{const n=Cd(t).dom,s=re(n.createDocumentFragment()),i=((c,d)=>{const u=(d||document).createElement("div");return u.innerHTML=c,pr(re(u))})(o,n);j(s,i),X(t),I(t,s)},mt=(t,o,n,s)=>{t.dom.removeEventListener(o,n,s)},ct=(t,o)=>({left:t,top:o,translate:(n,s)=>ct(t+n,o+s)}),Ko=ct,Ct=(t,o)=>void 0!==t?t:void 0!==o?o:0,je=t=>{const o=t.dom,n=o.ownerDocument.body;return n===o?Ko(n.offsetLeft,n.offsetTop):Xc(t)?(s=>{const i=s.getBoundingClientRect();return Ko(i.left,i.top)})(o):Ko(0,0)},Do=t=>{const o=void 0!==t?t.dom:document;return Ko(o.body.scrollLeft||o.documentElement.scrollLeft,o.body.scrollTop||o.documentElement.scrollTop)},St=(t,o,n)=>{const s=(void 0!==n?n.dom:document).defaultView;s&&s.scrollTo(t,o)},mo=(t,o)=>{ti().browser.isSafari()&&ut(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(o)},U=(t,o,n,s)=>({x:t,y:o,width:n,height:s,right:t+n,bottom:o+s}),w=t=>{const o=void 0===t?window:t,s=Do(re(o.document));return(i=>{const c=void 0===i?window:i;return ti().browser.isFirefox()?H.none():H.from(c.visualViewport)})(o).fold(()=>{const i=o.document.documentElement;return U(s.left,s.top,i.clientWidth,i.clientHeight)},i=>U(Math.max(i.pageLeft,s.left),Math.max(i.pageTop,s.top),i.width,i.height))},M=(t,o)=>{let n=[];return Ee(pr(t),s=>{o(s)&&(n=n.concat([s])),n=n.concat(M(s,o))}),n},J=(t,o)=>((n,s)=>{const i=void 0===s?document:s.dom;return _d(i)?[]:qt(i.querySelectorAll(n),re)})(o,t),ge=(t,o,n)=>$i(t,o,n).isSome();class he{constructor(o,n){this.node=o,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(o){return this.node=this.findSibling(this.node,"firstChild","nextSibling",o),this.node}prev(o){return this.node=this.findSibling(this.node,"lastChild","previousSibling",o),this.node}prev2(o){return this.node=this.findPreviousNode(this.node,o),this.node}findSibling(o,n,s,i){if(o){if(!i&&o[n])return o[n];if(o!==this.rootNode){let c=o[s];if(c)return c;for(let d=o.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[s],c)return c}}}findPreviousNode(o,n){if(o){const s=o.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n)for(let c=s.lastChild;c;c=c.lastChild)if(!c.lastChild)return c;return s}const i=o.parentNode;if(i&&i!==this.rootNode)return i}}}const Be=t=>o=>!!o&&o.nodeType===t,qe=t=>!!t&&!Object.getPrototypeOf(t),Te=Be(1),Dt=t=>Te(t)&&Ra(re(t)),Vt=t=>{const o=t.toLowerCase();return n=>ee(n)&&n.nodeName.toLowerCase()===o},Et=t=>{const o=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return st(o,s)}return!1}},Xt=(t,o)=>{const n=o.toLowerCase().split(" ");return s=>{if(Te(s)){const i=s.ownerDocument.defaultView;if(i)for(let c=0;c<n.length;c++){const d=i.getComputedStyle(s,null);if((d?d.getPropertyValue(t):null)===n[c])return!0}}return!1}},bo=t=>o=>Te(o)&&o.hasAttribute(t),co=t=>Te(t)&&t.hasAttribute("data-mce-bogus"),yo=t=>Te(t)&&"TABLE"===t.tagName,xo=t=>o=>!(!Dt(o)||o.contentEditable!==t&&o.getAttribute("data-mce-contenteditable")!==t),$n=Et(["textarea","input"]),Ae=Be(3),Oo=Be(4),Bn=Be(7),_e=Be(8),Bo=Be(9),Wn=Be(11),Ft=Vt("br"),hn=Vt("img"),on=xo("true"),zo=xo("false"),Ia=Et(["td","th"]),rr=Et(["td","th","caption"]),fo=Et(["video","audio","object","embed"]),Wr=Vt("li"),es=Vt("details"),fr=Vt("summary"),Vn="\xa0",bs=t=>"\ufeff"===t,cn=((t,o)=>{const n=s=>t(s)?H.from(s.dom.nodeValue):H.none();return{get:s=>{if(!t(s))throw new Error("Can only get text value of a text node");return n(s).getOr("")},getOption:n,set:(s,i)=>{if(!t(s))throw new Error("Can only set raw text value of a text node");s.dom.nodeValue=i}}})(Go),fe=t=>cn.get(t),Dr=t=>cn.getOption(t),La=t=>{let o;return n=>(o=o||Ps(t,Vo),Gt(o,Po(n)))},oa=t=>Ts(t)&&"br"===Po(t),qi=La(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),is=La(["ul","ol","dl"]),Qn=La(["li","dd","dt"]),Td=La(["thead","tbody","tfoot"]),Od=La(["td","th"]),Ot=La(["pre","script","textarea","style"]),xa=()=>{const t=nr("br");return ln(t,"data-mce-bogus","1"),t},Fa=t=>{X(t),I(t,xa())},Er="\ufeff",Cu=bs,wa=t=>t.replace(/\uFEFF/g,""),Xg=Te,Ad=Ae,Gi=t=>(Ad(t)&&(t=t.parentNode),Xg(t)&&t.hasAttribute("data-mce-caret")),_a=t=>Ad(t)&&Cu(t.data),Mn=t=>Gi(t)||_a(t),vl=t=>t.firstChild!==t.lastChild||!Ft(t.firstChild),bc=t=>{const o=t.container();return!!Ae(o)&&(o.data.charAt(t.offset())===Er||t.isAtStart()&&_a(o.previousSibling))},$l=t=>{const o=t.container();return!!Ae(o)&&(o.data.charAt(t.offset()-1)===Er||t.isAtEnd()&&_a(o.nextSibling))},Su=t=>Ad(t)&&t.data[0]===Er,ua=t=>Ad(t)&&t.data[t.data.length-1]===Er,Nd=t=>t&&t.hasAttribute("data-mce-caret")?((o=>{var n;const s=o.getElementsByTagName("br"),i=s[s.length-1];co(i)&&(null===(n=i.parentNode)||void 0===n||n.removeChild(i))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Jg=t=>Gi(t.startContainer),Qg=on,yl=zo,Wl=Ft,eE=Ae,vc=Et(["script","style","textarea"]),tE=Et(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Em=Et(["table"]),Zg=Mn,Ca=t=>!Zg(t)&&(eE(t)?!vc(t.parentNode):tE(t)||Wl(t)||Em(t)||sw(t)),sw=t=>{return!(Te(o=t)&&"true"===o.getAttribute("unselectable"))&&yl(t);var o},ep=(t,o)=>Ca(t)&&((n,s)=>{for(let i=n.parentNode;i&&i!==s;i=i.parentNode){if(sw(i))return!1;if(Qg(i))return!0}return!0})(t,o),KR=/^[ \t\r\n]*$/,ku=t=>KR.test(t),qr=t=>{for(const o of t)if(!bs(o))return!1;return!0},oE=t=>"\n"===t||"\r"===t,Rd=(t,o=4,n=!0,s=!0)=>{const i=(p=o)<=0?"":new Array(p+1).join(" "),c=t.replace(/\t/g,i);var p;return Nn(c,(u,p)=>{return-1!==" \f\t\v".indexOf(p)||p===Vn?u.pcIsSpace||""===u.str&&n||u.str.length===c.length-1&&s||(b=u.str.length+1)<(f=c).length&&b>=0&&oE(f[b])?{pcIsSpace:!1,str:u.str+Vn}:{pcIsSpace:!0,str:u.str+" "}:{pcIsSpace:oE(p),str:u.str+p};var f,b},{pcIsSpace:!1,str:""}).str},tp=(t,o)=>{return Ca(t)&&(s=o,!(Ae(n=t)&&ku(n.data)&&!((i,c)=>{const d=re(c),u=re(i);return ge(u,"pre,code",it(Qo,d))})(n,s)))||(n=>Te(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||aw(t);var n,s},aw=bo("data-mce-bookmark"),Tm=bo("data-mce-bogus"),Ki=t=>Te(t)&&"all"===t.getAttribute("data-mce-bogus"),Sh=t=>Gc(re(t)).exists(o=>!bl(o)),br=(t,o=!0)=>((n,s)=>{let i=0;if(tp(n,n))return!1;{let c=n.firstChild;if(!c)return!0;const d=new he(c,n);do{if(s){if(Ki(c)){c=d.next(!0);continue}if(Tm(c)){c=d.next();continue}}if(on(c)&&Sh(c))return!1;if(Ft(c))i++,c=d.next();else{if(tp(c,n))return!1;c=d.next()}}while(c);return i<=1}})(t.dom,o),Om=t=>"svg"===t.toLowerCase(),op=t=>Om(t.nodeName),av=t=>"svg"===t?.nodeName?"svg":"html",iv=["svg"],lv="data-mce-block",iw=t=>{return qt((o=t,ft(as(o),n=>!/[A-Z]/.test(n))),o=>`${o}:`+qt(iv,n=>`not(${n} ${o})`).join(":")).join(",");var o},cv=(t,o)=>ee(o.querySelector(t))?(o.setAttribute(lv,"true"),"inline-boundary"===o.getAttribute("data-mce-selected")&&o.removeAttribute("data-mce-selected"),!0):(o.removeAttribute(lv),!1),kh=(t,o)=>{const n=iw(t.getTransparentElements()),s=iw(t.getBlockElements());return ft(o.querySelectorAll(n),i=>cv(s,i))},yc=(t,o)=>{var n;const s=o?"lastChild":"firstChild";for(let i=t[s];i;i=i[s])if(br(re(i)))return void(null===(n=i.parentNode)||void 0===n||n.removeChild(i))},Dd=(t,o)=>{const n=kh(t,o);var s,i,c;((t,o,n)=>{const s=t.getBlockElements(),i=re(o),c=u=>Po(u)in s,d=u=>Qo(u,i);Ee(Pe(n),u=>{Hn(u,c,d).each(p=>{const f=ft(pr(u),C=>c(C)&&!t.isValidChild(Po(p),Po(C)));if(f.length>0){const b=Gc(p);Ee(f,x=>{Hn(x,c,d).each(C=>{((O,S)=>{const R=document.createRange(),T=O.parentNode;if(T){R.setStartBefore(O),R.setEndBefore(S);const D=R.extractContents();yc(D,!0),R.setStartAfter(S),R.setEndAfter(O);const P=R.extractContents();yc(P,!1),br(re(D))||T.insertBefore(D,O),br(re(S))||T.insertBefore(S,O),br(re(P))||T.insertBefore(P,O),T.removeChild(O)}})(C.dom,x.dom)})}),b.each(x=>kh(t,x.dom))}})})})(t,o,n),s=t,i=o,c=n,Ee([...c,...Eu(s,i)?[i]:[]],d=>Ee(J(re(d),d.nodeName.toLowerCase()),u=>{rE(s,u.dom)&&be(u)}))},nE=(t,o)=>{if(dv(t,o)){const n=iw(t.getBlockElements());cv(n,o)}},rp=t=>t.hasAttribute(lv),Eh=(t,o)=>Gt(t.getTransparentElements(),o),dv=(t,o)=>Te(o)&&Eh(t,o.nodeName),Eu=(t,o)=>dv(t,o)&&rp(o),rE=(t,o)=>dv(t,o)&&!rp(o),Th=(t,o)=>1===o.type&&Eh(t,o.name)&&_t(o.attr(lv)),lw=ti().browser,nn=t=>yn(t,Ts),Bt=(t,o)=>t.children&&st(t.children,o),Tu=(t,o={})=>{let n=0;const s={},i=re(t),c=ni(i),d=x=>{I(xu(i),x)},u=x=>{const C=xu(i);Sr(C,"#"+x).each(le)},p=x=>Xo(s,x).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),f=x=>new Promise((C,O)=>{let S;const R=$e._addCacheSuffix(x),T=p(R);s[R]=T,T.count++;const D=($,ne)=>{Ee($,Ze),T.status=ne,T.passed=[],T.failed=[],S&&(S.onload=null,S.onerror=null,S=null)},P=()=>D(T.passed,2),F=()=>D(T.failed,3);if(C&&T.passed.push(C),O&&T.failed.push(O),1===T.status)return;if(2===T.status)return void P();if(3===T.status)return void F();T.status=1;const q=nr("link",c.dom);jr(q,{rel:"stylesheet",type:"text/css",id:T.id}),o.contentCssCors&&ln(q,"crossOrigin","anonymous"),o.referrerPolicy&&ln(q,"referrerpolicy",o.referrerPolicy),S=q.dom,S.onload=P,S.onerror=F,d(q),ln(q,"href",R)}),b=x=>{const C=$e._addCacheSuffix(x);Xo(s,C).each(O=>{0==--O.count&&(delete s[C],u(O.id))})};return{load:f,loadRawCss:(x,C)=>{const O=p(x);s[x]=O,O.count++;const S=nr("style",c.dom);jr(S,{rel:"stylesheet",type:"text/css",id:O.id}),S.dom.innerHTML=C,d(S)},loadAll:x=>Promise.allSettled(qt(x,C=>f(C).then(Ve(C)))).then(C=>{const O=Rt(C,S=>"fulfilled"===S.status);return O.fail.length>0?Promise.reject(qt(O.fail,S=>S.reason)):qt(O.pass,S=>S.value)}),unload:b,unloadRawCss:x=>{Xo(s,x).each(C=>{0==--C.count&&(delete s[x],u(C.id))})},unloadAll:x=>{Ee(x,C=>{b(C)})},_setReferrerPolicy:x=>{o.referrerPolicy=x},_setContentCssCors:x=>{o.contentCssCors=x}}},uv=(()=>{const t=new WeakMap;return{forElement:(o,n)=>{const s=hl(o).dom;return H.from(t.get(s)).getOrThunk(()=>{const i=Tu(s,n);return t.set(s,i),i})}}})(),mv=(t,o,n)=>ee(t)&&(tp(t,o)||n.isInline(t.nodeName.toLowerCase())),cw=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Cn=(t,o,n,s)=>{var i;const c=s||o;if(Te(o)&&cw(o))return o;const d=o.childNodes;for(let u=d.length-1;u>=0;u--)Cn(t,d[u],n,c);if(Te(o)){const u=o.childNodes;1===u.length&&cw(u[0])&&(null===(i=o.parentNode)||void 0===i||i.insertBefore(u[0],o))}return Wn(u=o)||Bo(u)||tp(o,c)||(u=>!!Te(u)&&u.childNodes.length>0)(o)||((u,p,f)=>Ae(u)&&u.data.length>0&&((b,x,C)=>{const O=new he(b,x).prev(!1),S=new he(b,x).next(!1),R=et(O)||mv(O,x,C),T=et(S)||mv(S,x,C);return R&&T})(u,p,f))(o,c,n)||t.remove(o),o;var u},sE=$e.makeMap,Oh=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Me=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dw=/[<>&\"\']/g,gv=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,sp={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Bd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Am={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},aE=(t,o)=>{const n={};if(t){const s=t.split(",");o=o||10;for(let i=0;i<s.length;i+=2){const c=String.fromCharCode(parseInt(s[i],o));if(!Bd[c]){const d="&"+s[i+1]+";";n[c]=d,n[d]=c}}return n}},Ou=aE("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),qn=(t,o)=>t.replace(o?Oh:Me,n=>Bd[n]||n),xc=(t,o)=>t.replace(o?Oh:Me,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Bd[n]||"&#"+n.charCodeAt(0)+";"),uw=(t,o,n)=>{const s=n||Ou;return t.replace(o?Oh:Me,i=>Bd[i]||s[i]||i)},si={encodeRaw:qn,encodeAllRaw:t=>(""+t).replace(dw,o=>Bd[o]||o),encodeNumeric:xc,encodeNamed:uw,getEncodeFunc:(t,o)=>{const n=aE(o)||Ou,s=sE(t.replace(/\+/g,","));return s.named&&s.numeric?(i,c)=>i.replace(c?Oh:Me,d=>void 0!==Bd[d]?Bd[d]:void 0!==n[d]?n[d]:d.length>1?"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";":"&#"+d.charCodeAt(0)+";"):s.named?o?(i,c)=>uw(i,c,n):uw:s.numeric?xc:qn},decode:t=>t.replace(gv,(o,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):sp[n]||String.fromCharCode(n):Am[o]||Ou[o]||(s=>{const i=nr("div").dom;return i.innerHTML=s,i.textContent||i.innerText||s})(o))},Fs=(t,o)=>(t=$e.trim(t))?t.split(o||" "):[],Nm=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Ah={},ql=$e.makeMap,wc=$e.each,pv=$e.extend,iE=$e.explode,mw=(t,o={})=>{const n=ql(t," ",ql(t.toUpperCase()," "));return pv(n,o)},bt=t=>mw("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),gw=(t,o)=>{if(t){const n={};return _t(t)&&(t={"*":t}),wc(t,(s,i)=>{n[i]=n[i.toUpperCase()]="map"===o?ql(s,/[, ]/):iE(s,/[, ]/)}),n}},Au=(t={})=>{var o;const n={},s={};let i=[];const c={},d={},u=(Tt,Eo,No)=>{const po=t[Tt];if(po)return ql(po,/[, ]/,ql(po.toUpperCase(),/[, ]/));{let Fo=Ah[Tt];return Fo||(Fo=mw(Eo,No),Ah[Tt]=Fo),Fo}},p=null!==(o=t.schema)&&void 0!==o?o:"html5",f=(Tt=>{const{globalAttributes:Eo,phrasingContent:No,flowContent:po}=(xr=>{let os,ia,Ea;os="id accesskey class dir lang style tabindex title role",ia="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Ea="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==xr&&(os+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",ia+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Ea+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==xr&&(os+=" xml:lang",Ea=[Ea,"acronym applet basefont big font strike tt"].join(" "),ia=[ia,"center dir isindex noframes"].join(" "));const sl=[ia,Ea].join(" ");return{globalAttributes:os,blockContent:ia,phrasingContent:Ea,flowContent:sl}})(Tt),Fo={},Cs=(xr,os,ia)=>{Fo[xr]={attributes:Ps(os,Ve({})),attributesOrder:os,children:Ps(ia,Ve({}))}},Pt=(xr,os="",ia="")=>{const Ea=Fs(ia),sl=Fs(xr);let Gs=sl.length;const Li=Fs([Eo,os].join(" "));for(;Gs--;)Cs(sl[Gs],Li.slice(),Ea)},Mo=(xr,os)=>{const ia=Fs(xr),Ea=Fs(os);let sl=ia.length;for(;sl--;){const Gs=Fo[ia[sl]];for(let Li=0,ns=Ea.length;Li<ns;Li++)Gs.attributes[Ea[Li]]={},Gs.attributesOrder.push(Ea[Li])}};return"html5-strict"!==Tt&&(Ee(Fs("acronym applet basefont big font strike tt"),xr=>{Pt(xr,"",No)}),Ee(Fs("center dir isindex noframes"),xr=>{Pt(xr,"",po)})),Pt("html","manifest","head body"),Pt("head","","base command link meta noscript script style title"),Pt("title hr noscript br"),Pt("base","href target"),Pt("link","href rel media hreflang type sizes hreflang"),Pt("meta","name http-equiv content charset"),Pt("style","media type scoped"),Pt("script","src async defer type charset"),Pt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",po),Pt("dd div","",po),Pt("address dt caption","","html4"===Tt?No:po),Pt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",No),Pt("blockquote","cite",po),Pt("ol","reversed start type","li"),Pt("ul","","li"),Pt("li","value",po),Pt("dl","","dt dd"),Pt("a","href target rel media hreflang type","html4"===Tt?No:po),Pt("q","cite",No),Pt("ins del","cite datetime",po),Pt("img","src sizes srcset alt usemap ismap width height"),Pt("iframe","src name width height",po),Pt("embed","src type width height"),Pt("object","data type typemustmatch name usemap form width height",[po,"param"].join(" ")),Pt("param","name value"),Pt("map","name",[po,"area"].join(" ")),Pt("area","alt coords shape href target rel media hreflang type"),Pt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Tt?" col":"")),Pt("colgroup","span","col"),Pt("col","span"),Pt("tbody thead tfoot","","tr"),Pt("tr","","td th"),Pt("td","colspan rowspan headers",po),Pt("th","colspan rowspan headers scope abbr",po),Pt("form","accept-charset action autocomplete enctype method name novalidate target",po),Pt("fieldset","disabled form name",[po,"legend"].join(" ")),Pt("label","form for",No),Pt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Pt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Tt?po:No),Pt("select","disabled form multiple name required size","option optgroup"),Pt("optgroup","disabled label","option"),Pt("option","disabled label selected value"),Pt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Pt("menu","type label",[po,"li"].join(" ")),Pt("noscript","",po),"html4"!==Tt&&(Pt("wbr"),Pt("ruby","",[No,"rt rp"].join(" ")),Pt("figcaption","",po),Pt("mark rt rp bdi","",No),Pt("summary","",[No,"h1 h2 h3 h4 h5 h6"].join(" ")),Pt("canvas","width height",po),Pt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[po,"track source"].join(" ")),Pt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[po,"track source"].join(" ")),Pt("picture","","img source"),Pt("source","src srcset type media sizes"),Pt("track","kind src srclang label default"),Pt("datalist","",[No,"option"].join(" ")),Pt("article section nav aside main header footer","",po),Pt("hgroup","","h1 h2 h3 h4 h5 h6"),Pt("figure","",[po,"figcaption"].join(" ")),Pt("time","datetime",No),Pt("dialog","open",po),Pt("command","type label icon disabled checked radiogroup command"),Pt("output","for form name",No),Pt("progress","value max",No),Pt("meter","value min max low high optimum",No),Pt("details","open",[po,"summary"].join(" ")),Pt("keygen","autofocus challenge disabled form keytype name"),Cs("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==Tt&&(Mo("script","language xml:space"),Mo("style","xml:space"),Mo("object","declare classid code codebase codetype archive standby align border hspace vspace"),Mo("embed","align name hspace vspace"),Mo("param","valuetype type"),Mo("a","charset name rev shape coords"),Mo("br","clear"),Mo("applet","codebase archive code object alt name width height align hspace vspace"),Mo("img","name longdesc align border hspace vspace"),Mo("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Mo("font basefont","size color face"),Mo("input","usemap align"),Mo("select"),Mo("textarea"),Mo("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Mo("ul","type compact"),Mo("li","type"),Mo("ol dl menu dir","compact"),Mo("pre","width xml:space"),Mo("hr","align noshade size width"),Mo("isindex","prompt"),Mo("table","summary width frame rules cellspacing cellpadding align bgcolor"),Mo("col","width align char charoff valign"),Mo("colgroup","width align char charoff valign"),Mo("thead","align char charoff valign"),Mo("tr","align char charoff valign bgcolor"),Mo("th","axis align char charoff valign nowrap bgcolor width height"),Mo("form","accept"),Mo("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Mo("tfoot","align char charoff valign"),Mo("tbody","align char charoff valign"),Mo("area","nohref"),Mo("body","background bgcolor text link vlink alink")),"html4"!==Tt&&(Mo("input button select textarea","autofocus"),Mo("input textarea","placeholder"),Mo("a","download"),Mo("link script img","crossorigin"),Mo("img","loading"),Mo("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Tt&&Ee([Fo.video,Fo.audio],xr=>{delete xr.children.audio,delete xr.children.video}),Ee(Fs("a form meter progress dfn"),xr=>{Fo[xr]&&delete Fo[xr].children[xr]}),delete Fo.caption.children.table,delete Fo.script,Fo})(p);!1===t.verify_html&&(t.valid_elements="*[*]");const b=gw(t.valid_styles),x=gw(t.invalid_styles,"map"),C=gw(t.valid_classes,"map"),O=u("whitespace_elements","pre script noscript style textarea video audio iframe object code"),S=u("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),R=u("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),T=u("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),D="td th iframe video audio object script code",P=u("non_empty_elements",D+" pre svg",R),F=u("move_caret_before_on_enter_elements",D+" table",R),q="h1 h2 h3 h4 h5 h6",$=u("text_block_elements",q+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ne=u("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",$),ce=u("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),me=u("transparent_elements","a ins del canvas map"),pe=u("wrap_block_elements","pre "+q);wc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Tt=>{d[Tt]=new RegExp("</"+Tt+"[^>]*>","gi")});const we=Tt=>{const Eo=H.from(n["@"]),No=/[*?+]/;Ee(((po,Fo)=>{const Cs=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Lr(Fs(Fo,","),Pt=>{const Mo=Cs.exec(Pt);if(Mo){const xr=Mo[1],os=Mo[2],ia=Mo[3],Ea=Mo[4],sl=Mo[5],Gs={attributes:{},attributesOrder:[]};if(po.each(Li=>{return su=Gs,Yo((ns=Li).attributes,(al,rc)=>{su.attributes[rc]=al}),void su.attributesOrder.push(...ns.attributesOrder);var ns,su}),"#"===xr?Gs.paddEmpty=!0:"-"===xr&&(Gs.removeEmpty=!0),"!"===Ea&&(Gs.removeEmptyAttrs=!0),sl&&((Li,ns)=>{const su=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,al=/[*?+]/,{attributes:rc,attributesOrder:Fg}=ns;Ee(Fs(Li,"|"),hh=>{const au=su.exec(hh);if(au){const Pl={},zg=au[1],wr=au[2].replace(/[\\:]:/g,":"),Fc=au[3],Hg=au[4];if("!"===zg&&(ns.attributesRequired=ns.attributesRequired||[],ns.attributesRequired.push(wr),Pl.required=!0),"-"===zg)return delete rc[wr],void Fg.splice($e.inArray(Fg,wr),1);if(Fc&&("="===Fc?(ns.attributesDefault=ns.attributesDefault||[],ns.attributesDefault.push({name:wr,value:Hg}),Pl.defaultValue=Hg):"~"===Fc?(ns.attributesForced=ns.attributesForced||[],ns.attributesForced.push({name:wr,value:Hg}),Pl.forcedValue=Hg):"<"===Fc&&(Pl.validValues=$e.makeMap(Hg,"?"))),al.test(wr)){const fh=Pl;ns.attributePatterns=ns.attributePatterns||[],fh.pattern=Nm(wr),ns.attributePatterns.push(fh)}else rc[wr]||Fg.push(wr),rc[wr]=Pl}})})(sl,Gs),ia&&(Gs.outputName=os),"@"===os){if(!po.isNone())return[];po=H.some(Gs)}return[ia?{name:os,element:Gs,aliasName:ia}:{name:os,element:Gs}]}return[]})})(Eo,Tt??""),({name:po,element:Fo,aliasName:Cs})=>{if(Cs&&(n[Cs]=Fo),No.test(po)){const Pt=Fo;Pt.pattern=Nm(po),i.push(Pt)}else n[po]=Fo})},se=Tt=>{i=[],Ee(as(n),Eo=>{delete n[Eo]}),we(Tt)},de=Tt=>{delete Ah.text_block_elements,delete Ah.block_elements,Ee((Eo=>{const No=/^(~)?(.+)$/;return Lr(Fs(Eo,","),po=>{const Fo=No.exec(po);if(Fo){const Cs="~"===Fo[1];return[{inline:Cs,cloneName:Cs?"span":"div",name:Fo[2]}]}return[]})})(Tt??""),({inline:Eo,name:No,cloneName:po})=>{if(s[No]=s[po],c[No]=po,P[No.toUpperCase()]={},P[No]={},Eo||(ne[No.toUpperCase()]={},ne[No]={}),!n[No]){let Fo=n[po];Fo=pv({},Fo),delete Fo.removeEmptyAttrs,delete Fo.removeEmpty,n[No]=Fo}Yo(s,(Fo,Cs)=>{Fo[po]&&(s[Cs]=Fo=pv({},s[Cs]),Fo[No]=Fo[po])})})},ye=Tt=>{Ee((Eo=>{const No=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Lr(Fs(Eo,","),po=>{const Fo=No.exec(po);if(Fo){const Cs=Fo[1];return[{operation:Cs?(Mo=Cs,"-"===Mo?"remove":"add"):"replace",name:Fo[2],validChildren:Fs(Fo[3],"|")}]}var Mo;return[]})})(Tt??""),({operation:Eo,name:No,validChildren:po})=>{const Fo="replace"===Eo?{"#comment":{}}:s[No];Ee(po,Cs=>{"remove"===Eo?delete Fo[Cs]:Fo[Cs]={}}),s[No]=Fo})},Le=Tt=>{const Eo=n[Tt];if(Eo)return Eo;let No=i.length;for(;No--;){const po=i[No];if(po.pattern.test(Tt))return po}};t.valid_elements?(se(t.valid_elements),wc(f,(Tt,Eo)=>{s[Eo]=Tt.children})):(wc(f,(Tt,Eo)=>{n[Eo]={attributes:Tt.attributes,attributesOrder:Tt.attributesOrder},s[Eo]=Tt.children}),wc(Fs("strong/b em/i"),Tt=>{const Eo=Fs(Tt,"/");n[Eo[1]].outputName=Eo[0]}),wc(ce,(Tt,Eo)=>{n[Eo]&&(t.padd_empty_block_inline_children&&(n[Eo].paddInEmptyBlock=!0),n[Eo].removeEmpty=!0)}),wc(Fs("ol ul blockquote a table tbody"),Tt=>{n[Tt]&&(n[Tt].removeEmpty=!0)}),wc(Fs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Tt=>{n[Tt]&&(n[Tt].paddEmpty=!0)}),wc(Fs("span"),Tt=>{n[Tt].removeEmptyAttrs=!0})),delete n.svg,de(t.custom_elements),ye(t.valid_children),we(t.extended_valid_elements),ye("+ol[ul|ol],+ul[ul|ol]"),wc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Tt,Eo)=>{n[Eo]&&(n[Eo].parentsRequired=Fs(Tt))}),t.invalid_elements&&wc(iE(t.invalid_elements),Tt=>{n[Tt]&&delete n[Tt]}),Le("span")||we("span[!data-mce-type|*]");const rt=Ve(b),Ye=Ve(x),Mt=Ve(C),kt=Ve(T),jt=Ve(ne),It=Ve($),dt=Ve(ce),xt=Ve(Object.seal(R)),to=Ve(S),ie=Ve(P),ue=Ve(F),ze=Ve(O),He=Ve(me),Ue=Ve(pe),wt=Ve(Object.seal(d)),zt=(Tt,Eo)=>{const No=Le(Tt);if(No){if(!Eo)return!0;{if(No.attributes[Eo])return!0;const po=No.attributePatterns;if(po){let Fo=po.length;for(;Fo--;)if(po[Fo].pattern.test(Eo))return!0}}}return!1},uo=Tt=>Gt(jt(),Tt),Wt=Tt=>!tt(Tt,"#")&&zt(Tt)&&!uo(Tt),kn=Ve(c);return{type:p,children:s,elements:n,getValidStyles:rt,getValidClasses:Mt,getBlockElements:jt,getInvalidStyles:Ye,getVoidElements:xt,getTextBlockElements:It,getTextInlineElements:dt,getBoolAttrs:kt,getElementRule:Le,getSelfClosingElements:to,getNonEmptyElements:ie,getMoveCaretBeforeOnEnterElements:ue,getWhitespaceElements:ze,getTransparentElements:He,getSpecialElements:wt,isValidChild:(Tt,Eo)=>{const No=s[Tt.toLowerCase()];return!(!No||!No[Eo.toLowerCase()])},isValid:zt,isBlock:uo,isInline:Wt,isWrapper:Tt=>Gt(Ue(),Tt)||Wt(Tt),getCustomElements:kn,addValidElements:we,setValidElements:se,addCustomElements:de,addValidChildren:ye}},pw=t=>{const o=t.toString(16);return(1===o.length?"0"+o:o).toUpperCase()},lE=t=>{return{value:(n=pw(t.red)+pw(t.green)+pw(t.blue),Re(n,"#").toUpperCase())};var n},hw=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Nh=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Rm=(t,o,n,s)=>({red:t,green:o,blue:n,alpha:s}),cE=(t,o,n,s)=>{const i=parseInt(t,10),c=parseInt(o,10),d=parseInt(n,10),u=parseFloat(s);return Rm(i,c,d,u)},Rh=t=>{if("transparent"===t)return H.some(Rm(0,0,0,0));const o=hw.exec(t);if(null!==o)return H.some(cE(o[1],o[2],o[3],"1"));const n=Nh.exec(t);return null!==n?H.some(cE(n[1],n[2],n[3],n[4])):H.none()},YR=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Dm=t=>Rh(t).map(lE).map(o=>"#"+o.value).getOr(t),Dh=(t={},o)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,c={};let d,u;o&&(d=o.getValidStyles(),u=o.getInvalidStyles());const f="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let x=0;x<f.length;x++)c[f[x]]="\ufeff"+x,c["\ufeff"+x]=f[x];const b={parse:x=>{const C={};let O=!1;const S=t.url_converter,R=t.url_converter_scope||b,T=(we,se,de)=>{const ye=C[we+"-top"+se];if(!ye)return;const Le=C[we+"-right"+se];if(!Le)return;const rt=C[we+"-bottom"+se];if(!rt)return;const Ye=C[we+"-left"+se];if(!Ye)return;const Mt=[ye,Le,rt,Ye];let kt=Mt.length-1;for(;kt--&&Mt[kt]===Mt[kt+1];);kt>-1&&de||(C[we+se]=-1===kt?Mt[0]:Mt.join(" "),delete C[we+"-top"+se],delete C[we+"-right"+se],delete C[we+"-bottom"+se],delete C[we+"-left"+se])},D=we=>{const se=C[we];if(!se)return;const de=se.indexOf(",")>-1?[se]:se.split(" ");let ye=de.length;for(;ye--;)if(de[ye]!==de[0])return!1;return C[we]=de[0],!0},P=we=>(O=!0,c[we]),F=(we,se)=>(O&&(we=we.replace(/\uFEFF[0-9]/g,de=>c[de])),se||(we=we.replace(/\\([\'\";:])/g,"$1")),we),q=we=>String.fromCharCode(parseInt(we.slice(1),16)),$=we=>we.replace(/\\[0-9a-f]+/gi,q),ne=(we,se,de,ye,Le,rt)=>{if(Le=Le||rt)return"'"+(Le=F(Le)).replace(/\'/g,"\\'")+"'";if(se=F(se||de||ye||""),!t.allow_script_urls){const Ye=se.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Ye)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(Ye))return""}return S&&(se=S.call(R,se,"style")),"url('"+se.replace(/\'/g,"\\'")+"')"};if(x){let we;for(x=(x=x.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,P).replace(/\"[^\"]+\"|\'[^\']+\'/g,se=>se.replace(/[;:]/g,P));we=s.exec(x);){s.lastIndex=we.index+we[0].length;let se=we[1].replace(i,"").toLowerCase(),de=we[2].replace(i,"");if(se&&de){if(se=$(se),de=$(de),-1!==se.indexOf("\ufeff")||-1!==se.indexOf('"')||!t.allow_script_urls&&("behavior"===se||/expression\s*\(|\/\*|\*\//.test(de)))continue;"font-weight"===se&&"700"===de?de="bold":"color"!==se&&"background-color"!==se||(de=de.toLowerCase()),_t(t.force_hex_color)&&"off"!==t.force_hex_color&&Rh(de).each(ye=>{"always"!==t.force_hex_color&&1!==ye.alpha||(de=Dm(YR(ye)))}),de=de.replace(n,ne),C[se]=O?F(de,!0):de}}T("border","",!0),T("border","-width"),T("border","-color"),T("border","-style"),T("padding",""),T("margin",""),me="border-style",pe="border-color",D(ce="border-width")&&D(me)&&D(pe)&&(C.border=C[ce]+" "+C[me]+" "+C[pe],delete C[ce],delete C[me],delete C[pe]),"medium none"===C.border&&delete C.border,"none"===C["border-image"]&&delete C["border-image"]}var ce,me,pe;return C},serialize:(x,C)=>{let O="";const S=(R,T)=>{const D=T[R];if(D)for(let P=0,F=D.length;P<F;P++){const q=D[P],$=x[q];$&&(O+=(O.length>0?" ":"")+q+": "+$+";")}};return C&&d?(S("*",d),S(C,d)):Yo(x,(R,T)=>{R&&((D,P)=>{if(!u||!P)return!0;let F=u["*"];return!(F&&F[D]||(F=u[P],F&&F[D]))})(T,C)&&(O+=(O.length>0?" ":"")+T+": "+R+";")}),O}};return b},hv={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fw=(t,o)=>{const n=o??{};for(const s in t)Gt(hv,s)||(n[s]=t[s]);return ee(t.composedPath)&&(n.composedPath=()=>t.composedPath()),ee(t.getModifierState)&&(n.getModifierState=s=>t.getModifierState(s)),ee(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},fv=(t,o,n,s)=>{var i;const c=fw(o,s);return c.type=t,An(c.target)&&(c.target=null!==(i=c.srcElement)&&void 0!==i?i:n),(An((d=o).preventDefault)||(u=d)instanceof Event||ut(u.initEvent))&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=Vo,ut(o.preventDefault)&&o.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=Vo,ut(o.stopPropagation)&&o.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=Vo,c.stopPropagation()},(d=>d.isDefaultPrevented===Vo||d.isDefaultPrevented===wo)(c)||(c.isDefaultPrevented=!0===c.defaultPrevented?Vo:wo,c.isPropagationStopped=!0===c.cancelBubble?Vo:wo,c.isImmediatePropagationStopped=wo)),c;var d,u},bv=/^(?:mouse|contextmenu)|click/,xl=(t,o,n,s)=>{t.addEventListener(o,n,s||!1)},za=(t,o,n,s)=>{t.removeEventListener(o,n,s||!1)},ap=(t,o)=>{const n=fv(t.type,t,document,o);if(ee(s=t)&&bv.test(s.type)&&et(t.pageX)&&!et(t.clientX)){const s=n.target.ownerDocument||document,i=s.documentElement,c=s.body,d=n;d.pageX=t.clientX+(i&&i.scrollLeft||c&&c.scrollLeft||0)-(i&&i.clientLeft||c&&c.clientLeft||0),d.pageY=t.clientY+(i&&i.scrollTop||c&&c.scrollTop||0)-(i&&i.clientTop||c&&c.clientTop||0)}var s;return n},_c=(t,o,n)=>{const s=t.document,i={type:"ready"};if(n.domLoaded)return void o(i);const c=()=>{za(t,"DOMContentLoaded",c),za(t,"load",c),n.domLoaded||(n.domLoaded=!0,o(i)),t=null};"complete"===s.readyState||"interactive"===s.readyState&&s.body?c():xl(t,"DOMContentLoaded",c),n.domLoaded||xl(t,"load",c)};class Md{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,n,s,i){const c=this;let d;const u=window,p=C=>{c.executeHandlers(ap(C||u.event),f)};if(!o||Ae(o)||_e(o))return s;let f;o[c.expando]?f=o[c.expando]:(f=c.count++,o[c.expando]=f,c.events[f]={}),i=i||o;const b=n.split(" ");let x=b.length;for(;x--;){let C=b[x],O=p,S=!1,R=!1;"DOMContentLoaded"===C&&(C="ready"),c.domLoaded&&"ready"===C&&"complete"===o.readyState?s.call(i,ap({type:C})):(c.hasFocusIn||"focusin"!==C&&"focusout"!==C||(S=!0,R="focusin"===C?"focus":"blur",O=T=>{const D=ap(T||u.event);D.type="focus"===D.type?"focusin":"focusout",c.executeHandlers(D,f)}),d=c.events[f][C],d?"ready"===C&&c.domLoaded?s(ap({type:C})):d.push({func:s,scope:i}):(c.events[f][C]=d=[{func:s,scope:i}],d.fakeName=R,d.capture=S,d.nativeHandler=O,"ready"===C?_c(o,O,c):xl(o,R||C,O,S)))}return o=d=null,s}unbind(o,n,s){if(!o||Ae(o)||_e(o))return this;const i=o[this.expando];if(i){let c=this.events[i];if(n){const d=n.split(" ");let u=d.length;for(;u--;){const p=d[u],f=c[p];if(f){if(s){let b=f.length;for(;b--;)if(f[b].func===s){const x=f.nativeHandler,C=f.fakeName,O=f.capture,S=f.slice(0,b).concat(f.slice(b+1));S.nativeHandler=x,S.fakeName=C,S.capture=O,c[p]=S}}s&&0!==f.length||(delete c[p],za(o,f.fakeName||p,f.nativeHandler,f.capture))}}}else Yo(c,(d,u)=>{za(o,d.fakeName||u,d.nativeHandler,d.capture)}),c={};for(const d in c)if(Gt(c,d))return this;delete this.events[i];try{delete o[this.expando]}catch{o[this.expando]=null}}return this}fire(o,n,s){return this.dispatch(o,n,s)}dispatch(o,n,s){if(!o||Ae(o)||_e(o))return this;const i=ap({type:n,target:o},s);do{const c=o[this.expando];c&&this.executeHandlers(i,c),o=o.parentNode||o.ownerDocument||o.defaultView||o.parentWindow}while(o&&!i.isPropagationStopped());return this}clean(o){if(!o||Ae(o)||_e(o))return this;if(o[this.expando]&&this.unbind(o),o.getElementsByTagName||(o=o.document),o&&o.getElementsByTagName){this.unbind(o);const n=o.getElementsByTagName("*");let s=n.length;for(;s--;)(o=n[s])[this.expando]&&this.unbind(o)}return this}destroy(){this.events={}}cancel(o){return o&&(o.preventDefault(),o.stopImmediatePropagation()),!1}executeHandlers(o,n){const s=this.events[n],i=s&&s[o.type];if(i)for(let c=0,d=i.length;c<d;c++){const u=i[c];if(u&&!1===u.func.call(u.scope,o)&&o.preventDefault(),o.isImmediatePropagationStopped())return}}}Md.Event=new Md;const bw=$e.each,XR=$e.grep,vw="data-mce-style",JR=$e.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Cc=(t,o,n)=>{An(n)||""===n?Cr(t,o):ln(t,o,n)},dE=t=>t.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),ip=(t,o)=>{let n=0;if(t)for(let s=t.nodeType,i=t.previousSibling;i;i=i.previousSibling){const c=i.nodeType;(!o||!Ae(i)||c!==s&&i.data.length)&&(n++,s=c)}return n},vv=(t,o)=>{const n=Rr(o,"style"),s=t.serialize(t.parse(n),Po(o));Cc(o,vw,s)},Bm=(t,o,n)=>{const s=dE(o);var i,c;An(n)||""===n?fc(t,s):_u(t,s,(c=s,rs(i=n)?Gt(JR,c)?i+"":i+"px":i))},Sn=(t,o={})=>{const n={},s=window,i={};let c=0;const d=uv.forElement(re(t),{contentCssCors:o.contentCssCors,referrerPolicy:o.referrerPolicy}),u=[],p=o.schema?o.schema:Au({}),f=Dh({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope,force_hex_color:o.force_hex_color},o.schema),b=o.ownEvents?new Md:Md.Event,x=p.getBlockElements(),C=ie=>ie&&t&&_t(ie)?t.getElementById(ie):ie,O=ie=>{const ue=C(ie);return ee(ue)?re(ue):null},S=(ie,ue,ze="")=>{let He;const Ue=O(ie);if(ee(Ue)&&Ts(Ue)){const wt=to[ue];He=wt&&wt.get?wt.get(Ue.dom,ue):Rr(Ue,ue)}return ee(He)?He:ze},R=ie=>{const ue=C(ie);return An(ue)?[]:ue.attributes},T=(ie,ue,ze)=>{me(ie,He=>{if(Te(He)){const Ue=re(He),wt=""===ze?null:ze,zt=Rr(Ue,ue),uo=to[ue];uo&&uo.set?uo.set(Ue.dom,wt,ue):Cc(Ue,ue,wt),zt!==wt&&o.onSetAttrib&&o.onSetAttrib({attrElm:Ue.dom,attrName:ue,attrValue:wt})}})},D=()=>o.root_element||t.body,P=(ie,ue)=>((ze,He,Ue)=>{let wt=0,zt=0;const uo=ze.ownerDocument;if(Ue=Ue||ze,He){if(Ue===ze&&He.getBoundingClientRect&&"static"===As(re(ze),"position")){const kn=He.getBoundingClientRect();return wt=kn.left+(uo.documentElement.scrollLeft||ze.scrollLeft)-uo.documentElement.clientLeft,zt=kn.top+(uo.documentElement.scrollTop||ze.scrollTop)-uo.documentElement.clientTop,{x:wt,y:zt}}let Wt=He;for(;Wt&&Wt!==Ue&&Wt.nodeType&&!Bt(Wt,Ue);)wt+=Wt.offsetLeft||0,zt+=Wt.offsetTop||0,Wt=Wt.offsetParent;for(Wt=He.parentNode;Wt&&Wt!==Ue&&Wt.nodeType&&!Bt(Wt,Ue);)wt-=Wt.scrollLeft||0,zt-=Wt.scrollTop||0,Wt=Wt.parentNode;zt+=(kn=re(He),lw.isFirefox()&&"table"===Po(kn)?nn(pr(kn)).filter(Tt=>"caption"===Po(Tt)).bind(Tt=>nn(vu(Tt)).map(Eo=>Eo.dom.offsetTop<=Tt.dom.offsetTop?-Tt.dom.offsetHeight:0)).getOr(0):0)}var kn;return{x:wt,y:zt}})(t.body,C(ie),ue),F=(ie,ue,ze)=>{const He=C(ie);var Ue;if(!An(He)&&(Dt(He)||Te(Ue=He)&&"http://www.w3.org/2000/svg"===Ue.namespaceURI))return ze?As(re(He),dE(ue)):("float"===(ue=ue.replace(/-(\D)/g,(wt,zt)=>zt.toUpperCase()))&&(ue="cssFloat"),He.style?He.style[ue]:void 0)},q=ie=>{const ue=C(ie);if(!ue)return{w:0,h:0};let ze=F(ue,"width"),He=F(ue,"height");return ze&&-1!==ze.indexOf("px")||(ze="0"),He&&-1!==He.indexOf("px")||(He="0"),{w:parseInt(ze,10)||ue.offsetWidth||ue.clientWidth,h:parseInt(He,10)||ue.offsetHeight||ue.clientHeight}},$=(ie,ue)=>{if(!ie)return!1;const ze=qo(ie)?ie:[ie];return Wo(ze,He=>ea(re(He),ue))},ne=(ie,ue,ze,He)=>{const Ue=[];let wt=C(ie);He=void 0===He;const zt=ze||("BODY"!==D().nodeName?D().parentNode:null);if(_t(ue))if("*"===ue)ue=Te;else{const uo=ue;ue=Wt=>$(Wt,uo)}for(;wt&&!(wt===zt||An(wt.nodeType)||Bo(wt)||Wn(wt));){if(!ue||ue(wt)){if(!He)return[wt];Ue.push(wt)}wt=wt.parentNode}return He?Ue:null},ce=(ie,ue,ze)=>{let He=ue;if(ie){_t(ue)&&(He=Ue=>$(Ue,ue));for(let Ue=ie[ze];Ue;Ue=Ue[ze])if(ut(He)&&He(Ue))return Ue}return null},me=function(ie,ue,ze){const He=ze??this;if(qo(ie)){const Ue=[];return bw(ie,(wt,zt)=>{const uo=C(wt);uo&&Ue.push(ue.call(He,uo,zt))}),Ue}{const Ue=C(ie);return!!Ue&&ue.call(He,Ue)}},pe=(ie,ue)=>{me(ie,ze=>{Yo(ue,(He,Ue)=>{T(ze,Ue,He)})})},we=(ie,ue)=>{me(ie,ze=>{const He=re(ze);We(He,ue)})},se=(ie,ue,ze,He,Ue)=>me(ie,wt=>{const zt=_t(ue)?t.createElement(ue):ue;return ee(ze)&&pe(zt,ze),He&&(!_t(He)&&He.nodeType?zt.appendChild(He):_t(He)&&we(zt,He)),Ue?zt:wt.appendChild(zt)}),de=(ie,ue,ze)=>se(t.createElement(ie),ie,ue,ze,!0),ye=si.encodeAllRaw,Le=(ie,ue)=>me(ie,ze=>{const He=re(ze);return ue&&Ee(pr(He),Ue=>{Go(Ue)&&0===Ue.dom.length?le(Ue):kr(He,Ue)}),le(He),He.dom}),rt=(ie,ue,ze)=>{me(ie,He=>{if(Te(He)){const Ue=re(He),wt=ue.split(" ");Ee(wt,zt=>{var uo,Wt,Tt,Eo;ee(ze)?(ze?fs:zl)(Ue,zt):(Wt=zt,da(uo=Ue)?uo.dom.classList.toggle(Wt):(Eo=Wt,st(fu(Tt=uo),Eo)?Cm(Tt,Eo):Yg(Tt,Eo)),wd(uo))})}})},Ye=(ie,ue,ze)=>me(ue,He=>{var Ue;const wt=qo(ue)?ie.cloneNode(!0):ie;return ze&&bw(XR(He.childNodes),zt=>{wt.appendChild(zt)}),null===(Ue=He.parentNode)||void 0===Ue||Ue.replaceChild(wt,He),He}),Mt=ie=>{if(Te(ie)){const ue="a"===ie.nodeName.toLowerCase()&&!S(ie,"href")&&S(ie,"id");if(S(ie,"name")||S(ie,"data-mce-bookmark")||ue)return!0}return!1},kt=()=>t.createRange(),jt=(ie,ue,ze,He)=>{if(qo(ie)){let Ue=ie.length;const wt=[];for(;Ue--;)wt[Ue]=jt(ie[Ue],ue,ze,He);return wt}return!o.collect||ie!==t&&ie!==s||u.push([ie,ue,ze,He]),b.bind(ie,ue,ze,He||xt)},It=(ie,ue,ze)=>{if(qo(ie)){let He=ie.length;const Ue=[];for(;He--;)Ue[He]=It(ie[He],ue,ze);return Ue}if(u.length>0&&(ie===t||ie===s)){let He=u.length;for(;He--;){const[Ue,wt,zt]=u[He];ie!==Ue||ue&&ue!==wt||ze&&ze!==zt||b.unbind(Ue,wt,zt)}}return b.unbind(ie,ue,ze)},dt=ie=>{if(ie&&Dt(ie)){const ue=ie.getAttribute("data-mce-contenteditable");return ue&&"inherit"!==ue?ue:"inherit"!==ie.contentEditable?ie.contentEditable:null}return null},xt={doc:t,settings:o,win:s,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:d,boundEvents:u,styles:f,schema:p,events:b,isBlock:ie=>_t(ie)?Gt(x,ie):Te(ie)&&(Gt(x,ie.nodeName)||Eu(p,ie)),root:null,clone:(ie,ue)=>ie.cloneNode(ue),getRoot:D,getViewPort:ie=>{const ue=w(ie);return{x:ue.x,y:ue.y,w:ue.width,h:ue.height}},getRect:ie=>{const ue=C(ie),ze=P(ue),He=q(ue);return{x:ze.x,y:ze.y,w:He.w,h:He.h}},getSize:q,getParent:(ie,ue,ze)=>{const He=ne(ie,ue,ze,!1);return He&&He.length>0?He[0]:null},getParents:ne,get:C,getNext:(ie,ue)=>ce(ie,ue,"nextSibling"),getPrev:(ie,ue)=>ce(ie,ue,"previousSibling"),select:(ie,ue)=>{var ze,He;const Ue=null!==(He=null!==(ze=C(ue))&&void 0!==ze?ze:o.root_element)&&void 0!==He?He:t;return ut(Ue.querySelectorAll)?dr(Ue.querySelectorAll(ie)):[]},is:$,add:se,create:de,createHTML:(ie,ue,ze="")=>{let He="<"+ie;for(const Ue in ue)Hr(ue,Ue)&&(He+=" "+Ue+'="'+ye(ue[Ue])+'"');return Ro(ze)&&Gt(p.getVoidElements(),ie)?He+" />":He+">"+ze+"</"+ie+">"},createFragment:ie=>{const ue=t.createElement("div"),ze=t.createDocumentFragment();let He;for(ze.appendChild(ue),ie&&(ue.innerHTML=ie);He=ue.firstChild;)ze.appendChild(He);return ze.removeChild(ue),ze},remove:Le,setStyle:(ie,ue,ze)=>{me(ie,He=>{const Ue=re(He);Bm(Ue,ue,ze),o.update_styles&&vv(f,Ue)})},getStyle:F,setStyles:(ie,ue)=>{me(ie,ze=>{const He=re(ze);Yo(ue,(Ue,wt)=>{Bm(He,wt,Ue)}),o.update_styles&&vv(f,He)})},removeAllAttribs:ie=>me(ie,ue=>{const ze=ue.attributes;for(let He=ze.length-1;He>=0;He--)ue.removeAttributeNode(ze.item(He))}),setAttrib:T,setAttribs:pe,getAttrib:S,getPos:P,parseStyle:ie=>f.parse(ie),serializeStyle:(ie,ue)=>f.serialize(ie,ue),addStyle:ie=>{if(xt!==Sn.DOM&&t===document){if(n[ie])return;n[ie]=!0}let ue=t.getElementById("mceDefaultStyles");if(!ue){ue=t.createElement("style"),ue.id="mceDefaultStyles",ue.type="text/css";const ze=t.head;ze.firstChild?ze.insertBefore(ue,ze.firstChild):ze.appendChild(ue)}ue.styleSheet?ue.styleSheet.cssText+=ie:ue.appendChild(t.createTextNode(ie))},loadCSS:ie=>{ie||(ie=""),Ee(ie.split(","),ue=>{i[ue]=!0,d.load(ue).catch(Kt)})},addClass:(ie,ue)=>{rt(ie,ue,!0)},removeClass:(ie,ue)=>{rt(ie,ue,!1)},hasClass:(ie,ue)=>{const ze=O(ie),He=ue.split(" ");return ee(ze)&&cr(He,Ue=>pl(ze,Ue))},toggleClass:rt,show:ie=>{me(ie,ue=>fc(re(ue),"display"))},hide:ie=>{me(ie,ue=>_u(re(ue),"display","none"))},isHidden:ie=>{const ue=O(ie);return ee(ue)&&oi(Wi(ue,"display"),"none")},uniqueId:ie=>(ie||"mce_")+c++,setHTML:we,getOuterHTML:ie=>{const ue=O(ie);return ee(ue)?Te(ue.dom)?ue.dom.outerHTML:(ze=>{const He=nr("div"),Ue=re(ze.dom.cloneNode(!0));return I(He,Ue),Ge(He)})(ue):""},setOuterHTML:(ie,ue)=>{me(ie,ze=>{Te(ze)&&(ze.outerHTML=ue)})},decode:si.decode,encode:ye,insertAfter:(ie,ue)=>{const ze=C(ue);return me(ie,He=>{const Ue=ze?.parentNode,wt=ze?.nextSibling;return Ue&&(wt?Ue.insertBefore(He,wt):Ue.appendChild(He)),He})},replace:Ye,rename:(ie,ue)=>{if(ie.nodeName!==ue.toUpperCase()){const ze=de(ue);return bw(R(ie),He=>{T(ze,He.nodeName,S(ie,He.nodeName))}),Ye(ze,ie,!0),ze}return ie},findCommonAncestor:(ie,ue)=>{let ze=ie;for(;ze;){let He=ue;for(;He&&ze!==He;)He=He.parentNode;if(ze===He)break;ze=ze.parentNode}return!ze&&ie.ownerDocument?ie.ownerDocument.documentElement:ze},run:me,getAttribs:R,isEmpty:(ie,ue,ze)=>{let He=0;if(Mt(ie))return!1;const Ue=ie.firstChild;if(Ue){const wt=new he(Ue,ie),zt=p?p.getWhitespaceElements():{},uo=ue||(p?p.getNonEmptyElements():null);let Wt=Ue;do{if(Te(Wt)){const kn=Wt.getAttribute("data-mce-bogus");if(kn){Wt=wt.next("all"===kn);continue}const Tt=Wt.nodeName.toLowerCase();if(uo&&uo[Tt]){if("br"===Tt){He++,Wt=wt.next();continue}return!1}if(Mt(Wt))return!1}if(_e(Wt)||Ae(Wt)&&!ku(Wt.data)&&(!ze?.includeZwsp||!qr(Wt.data))||Ae(Wt)&&Wt.parentNode&&zt[Wt.parentNode.nodeName]&&ku(Wt.data))return!1;Wt=wt.next()}while(Wt)}return He<=1},createRng:kt,nodeIndex:ip,split:(ie,ue,ze)=>{let He,Ue,wt=kt();if(ie&&ue&&ie.parentNode&&ue.parentNode){const zt=ie.parentNode;return wt.setStart(zt,ip(ie)),wt.setEnd(ue.parentNode,ip(ue)),He=wt.extractContents(),wt=kt(),wt.setStart(ue.parentNode,ip(ue)+1),wt.setEnd(zt,ip(ie)+1),Ue=wt.extractContents(),zt.insertBefore(Cn(xt,He,p),ie),zt.insertBefore(ze||ue,ie),zt.insertBefore(Cn(xt,Ue,p),ie),Le(ie),ze||ue}},bind:jt,unbind:It,fire:(ie,ue,ze)=>b.dispatch(ie,ue,ze),dispatch:(ie,ue,ze)=>b.dispatch(ie,ue,ze),getContentEditable:dt,getContentEditableParent:ie=>{const ue=D();let ze=null;for(let He=ie;He&&He!==ue&&(ze=dt(He),null===ze);He=He.parentNode);return ze},isEditable:ie=>{if(ee(ie)){const ue=Te(ie)?ie:ie.parentElement;return ee(ue)&&Dt(ue)&&bl(re(ue))}return!1},destroy:()=>{if(u.length>0){let ie=u.length;for(;ie--;){const[ue,ze,He]=u[ie];b.unbind(ue,ze,He)}}Yo(i,(ie,ue)=>{d.unload(ue),delete i[ue]})},isChildOf:(ie,ue)=>ie===ue||ue.contains(ie),dumpRng:ie=>"startContainer: "+ie.startContainer.nodeName+", startOffset: "+ie.startOffset+", endContainer: "+ie.endContainer.nodeName+", endOffset: "+ie.endOffset},to=((ie,ue,ze)=>{const He=ue.keep_values,wt={style:{set:(zt,uo)=>{const Wt=re(zt);He&&Cc(Wt,vw,uo),Cr(Wt,"style"),_t(uo)&&Ed(Wt,ie.parse(uo))},get:zt=>{const uo=re(zt),Wt=Rr(uo,vw)||Rr(uo,"style");return ie.serialize(ie.parse(Wt),Po(uo))}}};return He&&(wt.href=wt.src={set:(zt,uo,Wt)=>{const kn=re(zt);ut(ue.url_converter)&&ee(uo)&&(uo=ue.url_converter.call(ue.url_converter_scope||ze(),String(uo),Wt,zt)),Cc(kn,"data-mce-"+Wt,uo),Cc(kn,Wt,uo)},get:(zt,uo)=>{const Wt=re(zt);return Rr(Wt,"data-mce-"+uo)||Rr(Wt,uo)}}),wt})(f,o,Ve(xt));return xt};Sn.DOM=Sn(document),Sn.nodeIndex=ip;const uE=Sn.DOM;class Jc{constructor(o={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=o}_setReferrerPolicy(o){this.settings.referrerPolicy=o}loadScript(o){return new Promise((n,s)=>{const i=uE;let c;const d=()=>{i.remove(u),c&&(c.onerror=c.onload=c=null)},u=i.uniqueId();c=document.createElement("script"),c.id=u,c.type="text/javascript",c.src=$e._addCacheSuffix(o),this.settings.referrerPolicy&&i.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=()=>{d(),n()},c.onerror=()=>{d(),s("Failed to load script: "+o)},(document.getElementsByTagName("head")[0]||document.body).appendChild(c)})}isDone(o){return 2===this.states[o]}markDone(o){this.states[o]=2}add(o){const n=this;return n.queue.push(o),void 0===n.states[o]&&(n.states[o]=0),new Promise((s,i)=>{n.scriptLoadedCallbacks[o]||(n.scriptLoadedCallbacks[o]=[]),n.scriptLoadedCallbacks[o].push({resolve:s,reject:i})})}load(o){return this.add(o)}remove(o){delete this.states[o],delete this.scriptLoadedCallbacks[o]}loadQueue(){const o=this.queue;return this.queue=[],this.loadScripts(o)}loadScripts(o){const n=this,s=(p,f)=>{Xo(n.scriptLoadedCallbacks,f).each(b=>{Ee(b,x=>x[p](f))}),delete n.scriptLoadedCallbacks[f]},i=p=>{const f=ft(p,b=>"rejected"===b.status);return f.length>0?Promise.reject(Lr(f,({reason:b})=>qo(b)?b:[b])):Promise.resolve()},c=p=>Promise.allSettled(qt(p,f=>2===n.states[f]?(s("resolve",f),Promise.resolve()):3===n.states[f]?(s("reject",f),Promise.reject(f)):(n.states[f]=1,n.loadScript(f).then(()=>{n.states[f]=2,s("resolve",f);const b=n.queue;return b.length>0?(n.queue=[],c(b).then(i)):Promise.resolve()},()=>(n.states[f]=3,s("reject",f),Promise.reject(f)))))),d=p=>(n.loading=!0,c(p).then(f=>{n.loading=!1;const b=n.queueLoadedCallbacks.shift();return H.from(b).each(Ze),i(f)})),u=ki(o);return n.loading?new Promise((p,f)=>{n.queueLoadedCallbacks.push(()=>{d(u).then(p,f)})}):d(u)}}Jc.ScriptLoader=new Jc;const Zo=t=>{let o=t;return{get:()=>o,set:n=>{o=n}}},lp={},sr=Zo("en"),Ha=()=>Xo(lp,sr.get()),Va={getData:()=>Fr(lp,t=>({...t})),setCode:t=>{t&&sr.set(t)},getCode:()=>sr.get(),add:(t,o)=>{let n=lp[t];n||(lp[t]=n={});const s=qt(as(o),i=>i.toLowerCase());Yo(o,(i,c)=>{const d=c.toLowerCase();d!==c&&((u,p)=>{const f=u.indexOf(p);return-1!==f&&u.indexOf(p,f+1)>f})(s,d)?(Gt(o,d)||(n[d]=i),n[c]=i):n[d]=i})},translate:t=>{const o=Ha().getOr({}),n=u=>ut(u)?Object.prototype.toString.call(u):s(u)?"":""+u,s=u=>""===u||null==u,i=u=>{const p=n(u);return Gt(o,p)?n(o[p]):Xo(o,p.toLowerCase()).map(n).getOr(p)},c=u=>u.replace(/{context:\w+}$/,"");if(s(t))return"";if(vt(d=t)&&Gt(d,"raw"))return n(t.raw);var d,u;if(qo(u=t)&&u.length>1){const u=t.slice(1);return c(i(t[0]).replace(/\{([0-9]+)\}/g,(p,f)=>Gt(u,f)?n(u[f]):p))}return c(i(t))},isRtl:()=>Ha().bind(t=>Xo(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Gt(lp,t)},Tr=()=>{const t=[],o={},n={},s=[],i=(p,f)=>{const b=ft(s,x=>x.name===p&&x.state===f);Ee(b,x=>x.resolve())},c=p=>Gt(o,p),d=(p,f)=>{const b=Va.getCode();!b||f&&-1===(","+(f||"")+",").indexOf(","+b+",")||Jc.ScriptLoader.add(o[p]+"/langs/"+b+".js")},u=(p,f="added")=>"added"===f&&Gt(n,p)||"loaded"===f&&c(p)?Promise.resolve():new Promise(b=>{s.push({name:p,state:f,resolve:b})});return{items:t,urls:o,lookup:n,get:p=>{if(n[p])return n[p].instance},requireLangPack:(p,f)=>{!1!==Tr.languageLoad&&(c(p)?d(p,f):u(p,"loaded").then(()=>d(p,f)))},add:(p,f)=>(t.push(f),n[p]={instance:f},i(p,"added"),f),remove:p=>{delete o[p],delete n[p]},createUrl:(p,f)=>_t(f)?_t(p)?{prefix:"",resource:f,suffix:""}:{prefix:p.prefix,resource:f,suffix:p.suffix}:f,load:(p,f)=>{if(o[p])return Promise.resolve();let b=_t(f)?f:f.prefix+f.resource+f.suffix;0!==b.indexOf("/")&&-1===b.indexOf("://")&&(b=Tr.baseURL+"/"+b),o[p]=b.substring(0,b.lastIndexOf("/"));const x=()=>(i(p,"loaded"),Promise.resolve());return n[p]?x():Jc.ScriptLoader.add(b).then(x)},waitFor:u}};Tr.languageLoad=!0,Tr.baseURL="",Tr.PluginManager=Tr(),Tr.ThemeManager=Tr(),Tr.ModelManager=Tr();const mE=t=>{const o=Zo(H.none()),n=()=>o.get().each(s=>clearInterval(s));return{clear:()=>{n(),o.set(H.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set(H.some(setInterval(s,t)))}}},ai=()=>{const t=(o=>{const n=Zo(H.none()),s=()=>n.get().each(o);return{clear:()=>{s(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:i=>{s(),n.set(H.some(i))}}})(Kt);return{...t,on:o=>t.get().each(o)}},Qc=(t,o)=>{let n=null;return{cancel:()=>{vn(n)||(clearTimeout(n),n=null)},throttle:(...s)=>{vn(n)&&(n=setTimeout(()=>{n=null,t.apply(null,s)},o))}}},yv=(t,o)=>{let n=null;const s=()=>{vn(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...i)=>{s(),n=setTimeout(()=>{n=null,t.apply(null,i)},o)}}},cp=Ve("mce-annotation"),Nu=Ve("data-mce-annotation"),Mm=Ve("data-mce-annotation-uid"),Bh=Ve("data-mce-annotation-active"),Mh=Ve("data-mce-annotation-classes"),Ih=Ve("data-mce-annotation-attrs"),Or=t=>o=>Qo(o,t),yw=(t,o)=>{const n=t.selection.getRng(),s=re(n.startContainer),i=re(t.getBody()),c=o.fold(()=>"."+cp(),u=>`[${Nu()}="${u}"]`),d=gc(s,n.startOffset).getOr(s);return fl(d,c,Or(i)).bind(u=>Da(u,`${Mm()}`).bind(p=>Da(u,`${Nu()}`).map(f=>{const b=xv(t,p);return{uid:p,name:f,elements:b}})))},gE=(t,o)=>gl(t,"data-mce-bogus")||ge(t,'[data-mce-bogus="all"]',Or(o)),xv=(t,o)=>{const n=re(t.getBody()),s=J(n,`[${Mm()}="${o}"]`);return ft(s,i=>!gE(i,n))},na=(t,o)=>{const n=re(t.getBody()),s=J(n,`[${Nu()}="${o}"]`),i={};return Ee(s,c=>{if(!gE(c,n)){const d=Rr(c,Mm()),u=Xo(i,d).getOr([]);i[d]=u.concat([c])}}),i};let Yi=0;const dp=t=>{const o=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Yi++,t+"_"+n+Yi+String(o)},xw=(t,o)=>re(t.dom.cloneNode(o)),Ru=t=>xw(t,!1),ww=t=>xw(t,!0),_w=(t,o,n=wo)=>{const s=new he(t,o),i=c=>{let d;do{d=s[c]()}while(d&&!Ae(d)&&!n(d));return H.from(d).filter(Ae)};return{current:()=>H.from(s.current()).filter(Ae),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Xi=(t,o)=>{const n=o||(i=>t.isBlock(i)||Ft(i)||zo(i)),s=(i,c,d,u)=>{if(Ae(i)){const p=u(i,c,i.data);if(-1!==p)return H.some({container:i,offset:p})}return d().bind(p=>s(p.container,p.offset,d,u))};return{backwards:(i,c,d,u)=>{const p=_w(i,u??t.getRoot(),n);return s(i,c,()=>p.prev().map(f=>({container:f,offset:f.length})),d).getOrNull()},forwards:(i,c,d,u)=>{const p=_w(i,u??t.getRoot(),n);return s(i,c,()=>p.next().map(f=>({container:f,offset:0})),d).getOrNull()}}},Du=Math.round,Gn=t=>t?{left:Du(t.left),top:Du(t.top),bottom:Du(t.bottom),right:Du(t.right),width:Du(t.width),height:Du(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Gl=(t,o)=>(t=Gn(t),o||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),up=(t,o,n)=>t>=0&&t<=Math.min(o.height,n.height)/2,mp=(t,o)=>{const n=Math.min(o.height/2,t.height/2);return t.bottom-n<o.top||!(t.top>o.bottom)&&up(o.top-t.bottom,t,o)},Sc=(t,o)=>t.top>o.bottom||!(t.bottom<o.top)&&up(o.bottom-t.top,t,o),Im=(t,o,n)=>{const s=Math.max(Math.min(o,t.left+t.width),t.left),i=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((o-s)*(o-s)+(n-i)*(n-i))},gp=t=>{const o=t.startContainer,n=t.startOffset;return o===t.endContainer&&o.hasChildNodes()&&t.endOffset===n+1?o.childNodes[n]:null},Bu=(t,o)=>{if(Te(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(d=n.length-1,Math.min(Math.max(o,0),d))]}var d;return t},Cw=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),pE=t=>_t(t)&&t.charCodeAt(0)>=768&&Cw.test(t),Sw=Te,kw=Ca,hE=Xt("display","block table"),QR=Xt("float","left right"),Mu=((...t)=>o=>{for(let n=0;n<t.length;n++)if(!t[n](o))return!1;return!0})(Sw,kw,wi(QR)),Pm=wi(Xt("white-space","pre pre-line pre-wrap")),Iu=Ae,Uo=Ft,ii=Sn.nodeIndex,Zc=(t,o)=>o<0&&Te(t)&&t.hasChildNodes()?void 0:Bu(t,o),Ph=t=>t?t.createRange():Sn.DOM.createRng(),In=t=>_t(t)&&/[\r\n\t ]/.test(t),Ew=t=>!!t.setStart&&!!t.setEnd,wv=t=>{const o=t.startContainer,n=t.startOffset;if(In(t.toString())&&Pm(o.parentNode)&&Ae(o)){const s=o.data;if(In(s[n-1])||In(s[n+1]))return!0}return!1},zs=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Ai=t=>{var o;let n;const s=t.getClientRects();return n=Gn(s.length>0?s[0]:t.getBoundingClientRect()),!Ew(t)&&Uo(t)&&zs(n)?(i=>{const c=i.ownerDocument,d=Ph(c),u=c.createTextNode(Vn),p=i.parentNode;p.insertBefore(u,i),d.setStart(u,0),d.setEnd(u,1);const f=Gn(d.getBoundingClientRect());return p.removeChild(u),f})(t):zs(n)&&Ew(t)&&null!==(o=(i=>{const d=i.endContainer,u=i.startOffset,p=i.endOffset;if(i.startContainer===d&&Ae(d)&&0===u&&1===p){const f=i.cloneRange();return f.setEndAfter(d),Ai(f)}return null})(t))&&void 0!==o?o:n},ed=(t,o)=>{const n=Gl(t,o);return n.width=1,n.right=n.left+1,n},Oe=(t,o,n)=>{const s=()=>(n||(n=(i=>{const c=[],d=b=>{var x,C;0!==b.height&&(c.length>0&&(x=b).left===(C=c[c.length-1]).left&&x.top===C.top&&x.bottom===C.bottom&&x.right===C.right||c.push(b))},u=(b,x)=>{const C=Ph(b.ownerDocument);if(x<b.data.length){if(pE(b.data[x]))return;if(pE(b.data[x-1])&&(C.setStart(b,x),C.setEnd(b,x+1),!wv(C)))return void d(ed(Ai(C),!1))}x>0&&(C.setStart(b,x-1),C.setEnd(b,x),wv(C)||d(ed(Ai(C),!1))),x<b.data.length&&(C.setStart(b,x),C.setEnd(b,x+1),wv(C)||d(ed(Ai(C),!0)))},p=i.container(),f=i.offset();if(Iu(p))return u(p,f),c;if(Sw(p))if(i.isAtEnd()){const b=Zc(p,f);Iu(b)&&u(b,b.data.length),Mu(b)&&!Uo(b)&&d(ed(Ai(b),!1))}else{const b=Zc(p,f);if(Iu(b)&&u(b,0),Mu(b)&&i.isAtEnd())return d(ed(Ai(b),!1)),c;const x=Zc(i.container(),i.offset()-1);Mu(x)&&!Uo(x)&&(hE(x)||hE(b)||!Mu(b))&&d(ed(Ai(x),!1)),Mu(b)&&d(ed(Ai(b),!0))}return c})(Oe(t,o))),n);return{container:Ve(t),offset:Ve(o),toRange:()=>{const i=Ph(t.ownerDocument);return i.setStart(t,o),i.setEnd(t,o),i},getClientRects:s,isVisible:()=>s().length>0,isAtStart:()=>(Iu(t),0===o),isAtEnd:()=>Iu(t)?o>=t.data.length:o>=t.childNodes.length,isEqual:i=>i&&t===i.container()&&o===i.offset(),getNode:i=>Zc(t,i?o-1:o)}};Oe.fromRangeStart=t=>Oe(t.startContainer,t.startOffset),Oe.fromRangeEnd=t=>Oe(t.endContainer,t.endOffset),Oe.after=t=>Oe(t.parentNode,ii(t)+1),Oe.before=t=>Oe(t.parentNode,ii(t)),Oe.isAbove=(t,o)=>mr(gn(o.getClientRects()),pn(t.getClientRects()),mp).getOr(!1),Oe.isBelow=(t,o)=>mr(pn(o.getClientRects()),gn(t.getClientRects()),Sc).getOr(!1),Oe.isAtStart=t=>!!t&&t.isAtStart(),Oe.isAtEnd=t=>!!t&&t.isAtEnd(),Oe.isTextPosition=t=>!!t&&Ae(t.container()),Oe.isElementPosition=t=>!Oe.isTextPosition(t);const pp=(t,o)=>{Ae(o)&&0===o.data.length&&t.remove(o)},Lh=(t,o,n)=>{var s,c;Wn(n)?((s,i,c)=>{const d=H.from(c.firstChild),u=H.from(c.lastChild);i.insertNode(c),d.each(p=>pp(s,p.previousSibling)),u.each(p=>pp(s,p.nextSibling))})(t,o,n):(s=t,o.insertNode(c=n),pp(s,c.previousSibling),pp(s,c.nextSibling))},Kl=Ae,Tw=co,Ow=Sn.nodeIndex,Aw=t=>{const o=t.parentNode;return Tw(o)?Aw(o):o},Pu=t=>t?Na(t.childNodes,(o,n)=>(Tw(n)&&"BR"!==n.nodeName?o=o.concat(Pu(n)):o.push(n),o),[]):[],Ni=t=>o=>t===o,Hs=t=>(Kl(t)?"text()":t.nodeName.toLowerCase())+"["+(o=>{let n,s;n=Pu(Aw(o)),s=zi(n,Ni(o),o),n=n.slice(0,s+1);const i=Na(n,(c,d,u)=>(Kl(d)&&Kl(n[u-1])&&c++,c),0);return n=Ja(n,Et([o.nodeName])),s=zi(n,Ni(o),o),s-i})(t)+"]",Id=(t,o)=>{let n,s=[],i=o.container(),c=o.offset();if(Kl(i))n=((u,p)=>{let f=u;for(;(f=f.previousSibling)&&Kl(f);)p+=f.data.length;return p})(i,c);else{const u=i.childNodes;c>=u.length?(n="after",c=u.length-1):n="before",i=u[c]}s.push(Hs(i));let d=((u,p,f)=>{const b=[];for(let x=p.parentNode;x&&x!==u;x=x.parentNode)b.push(x);return b})(t,i);return d=Ja(d,wi(co)),s=s.concat(Ei(d,u=>Hs(u))),s.reverse().join("/")+","+n},Nw=(t,o)=>{if(!o)return null;const n=o.split(","),s=n[0].split("/"),i=n.length>1?n[1]:"before",c=Na(s,(d,u)=>{const p=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(u);return p?("text()"===p[1]&&(p[1]="#text"),((f,b,x)=>{let C=Pu(f);return C=Ja(C,(O,S)=>!Kl(O)||!Kl(C[S-1])),C=Ja(C,Et([b])),C[x]})(d,p[1],parseInt(p[2],10))):null},t);if(!c)return null;if(!Kl(c)&&c.parentNode){let d;return d="after"===i?Ow(c)+1:Ow(c),Oe(c.parentNode,d)}return((d,u)=>{let p=d,f=0;for(;Kl(p);){const b=p.data.length;if(u>=f&&u<=f+b){d=p,u-=f;break}if(!Kl(p.nextSibling)){d=p,u=b;break}f+=b,p=p.nextSibling}return Kl(d)&&u>d.data.length&&(u=d.data.length),Oe(d,u)})(c,parseInt(i,10))},Fh=zo,Rw=(t,o,n,s,i)=>{const c=i?s.startContainer:s.endContainer;let d=i?s.startOffset:s.endOffset;const u=[],p=t.getRoot();if(Ae(c))u.push(n?((f,b,x)=>{let C=f(b.data.slice(0,x)).length;for(let O=b.previousSibling;O&&Ae(O);O=O.previousSibling)C+=f(O.data).length;return C})(o,c,d):d);else{let f=0;const b=c.childNodes;d>=b.length&&b.length&&(f=1,d=Math.max(0,b.length-1)),u.push(t.nodeIndex(b[d],n)+f)}for(let f=c;f&&f!==p;f=f.parentNode)u.push(t.nodeIndex(f,n));return u},zh=(t,o,n)=>{let s=0;return $e.each(t.select(o),i=>"all"===i.getAttribute("data-mce-bogus")?void 0:i!==n&&void s++),s},_v=(t,o)=>{let n=o?t.startContainer:t.endContainer,s=o?t.startOffset:t.endOffset;if(Te(n)&&"TR"===n.nodeName){const i=n.childNodes;n=i[Math.min(o?s:s-1,i.length-1)],n&&(s=o?0:n.childNodes.length,o?t.setStart(n,s):t.setEnd(n,s))}},Dw=t=>(_v(t,!0),_v(t,!1),t),Vs=(t,o)=>{if(Te(t)&&(t=Bu(t,o),Fh(t)))return t;if(Mn(t)){Ae(t)&&Gi(t)&&(t=t.parentNode);let n=t.previousSibling;if(Fh(n)||(n=t.nextSibling,Fh(n)))return n}},Us=(t,o,n)=>{const s=n.getNode(),i=n.getRng();if("IMG"===s.nodeName||Fh(s)){const d=s.nodeName;return{name:d,index:zh(n.dom,d,s)}}const c=Vs((d=i).startContainer,d.startOffset)||Vs(d.endContainer,d.endOffset);var d;if(c){const d=c.tagName;return{name:d,index:zh(n.dom,d,c)}}return((d,u,p,f)=>{const b=u.dom,x=Rw(b,d,p,f,!0),C=u.isForward(),O=Jg(f)?{isFakeCaret:!0}:{};return u.isCollapsed()?{start:x,forward:C,...O}:{start:x,end:Rw(b,d,p,f,!1),forward:C,...O}})(t,n,o,i)},Ua=(t,o,n)=>{const s={"data-mce-type":"bookmark",id:o,style:"overflow:hidden;line-height:0px"};return n?t.create("span",s,"&#xFEFF;"):t.create("span",s)},ja=(t,o)=>{const n=t.dom;let s=t.getRng();const i=n.uniqueId(),c=t.isCollapsed(),d=t.getNode(),u=d.nodeName,p=t.isForward();if("IMG"===u)return{name:u,index:zh(n,u,d)};const f=Dw(s.cloneRange());if(!c){f.collapse(!1);const x=Ua(n,i+"_end",o);Lh(n,f,x)}s=Dw(s),s.collapse(!0);const b=Ua(n,i+"_start",o);return Lh(n,s,b),t.moveToBookmark({id:i,keep:!0,forward:p}),{id:i,forward:p}},ra=it(Us,un,!0),vs=t=>{const o=c=>c(t),n=Ve(t),s=()=>i,i={tag:!0,inner:t,fold:(c,d)=>d(t),isValue:Vo,isError:wo,map:c=>Sa.value(c(t)),mapError:s,bind:o,exists:o,forall:o,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:c=>{c(t)},toOptional:()=>H.some(t)};return i},Cv=t=>{const o=()=>n,n={tag:!1,inner:t,fold:(s,i)=>s(t),isValue:wo,isError:Vo,map:o,mapError:s=>Sa.error(s(t)),bind:o,exists:wo,forall:Vo,getOr:un,or:un,getOrThunk:Pr,orThunk:Pr,getOrDie:ss(String(t)),each:Kt,toOptional:H.none};return n},Sa={value:vs,error:Cv,fromOption:(t,o)=>t.fold(()=>Cv(o),vs)},kc=t=>{if(!qo(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const o=[],n={};return Ee(t,(s,i)=>{const c=as(s);if(1!==c.length)throw new Error("one and only one name per case");const d=c[0],u=s[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!qo(u))throw new Error("case arguments must be an array");o.push(d),n[d]=(...p)=>{const f=p.length;if(f!==u.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+u.length+" ("+u+"), got "+f);return{fold:(...b)=>{if(b.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+b.length);return b[i].apply(null,p)},match:b=>{const x=as(b);if(o.length!==x.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+"\nActual: "+x.join(","));if(!cr(o,C=>st(x,C)))throw new Error("Not all branches were specified when using match. Specified: "+x.join(", ")+"\nRequired: "+o.join(", "));return b[d].apply(null,p)},log:b=>{console.log(b,{constructors:o,constructor:d,params:p})}}}}),n};kc([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const fE=t=>"inline-command"===t.type||"inline-format"===t.type,bE=t=>"block-command"===t.type||"block-format"===t.type,vE=t=>{const o=s=>Sa.error({message:s,pattern:t}),n=(s,i,c)=>{if(void 0!==t.format){let d;if(qo(t.format)){if(!cr(t.format,_t))return o(s+" pattern has non-string items in the `format` array");d=t.format}else{if(!_t(t.format))return o(s+" pattern has non-string `format` parameter");d=[t.format]}return Sa.value(i(d))}return void 0!==t.cmd?_t(t.cmd)?Sa.value(c(t.cmd,t.value)):o(s+" pattern has non-string `cmd` parameter"):o(s+" pattern is missing both `format` and `cmd` parameters")};if(!vt(t))return o("Raw pattern is not an object");if(!_t(t.start))return o("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!_t(t.end))return o("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return o("Inline pattern has empty `start` and `end` parameters");let s=t.start,i=t.end;return 0===i.length&&(i=s,s=""),n("Inline",c=>({type:"inline-format",start:s,end:i,format:c}),(c,d)=>({type:"inline-command",start:s,end:i,cmd:c,value:d}))}return void 0!==t.replacement?_t(t.replacement)?0===t.start.length?o("Replacement pattern has empty `start` parameter"):Sa.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):o("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?o("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:t.start,format:s[0]}),(s,i)=>({type:"block-command",start:t.start,cmd:s,value:i}))},Sv=t=>ft(t,bE),kv=t=>ft(t,fE),yE=t=>{const o=(n=>{const s=[],i=[];return Ee(n,c=>{c.fold(d=>{s.push(d)},d=>{i.push(d)})}),{errors:s,values:i}})(qt(t,vE));return Ee(o.errors,n=>console.error(n.message,n.pattern)),o.values},Bw=ti().deviceType,Mw=Bw.isTouch(),ZR=Sn.DOM,Iw=t=>sn(t,RegExp),ve=t=>o=>o.options.get(t),Pw=t=>_t(t)||vt(t),Ns=(t,o="")=>n=>{const s=_t(n);if(s){if(-1!==n.indexOf("=")){const i=(c=>{const d=c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(",");return Nn(d,(u,p)=>{const f=p.split("="),b=f[0],x=f.length>1?f[1]:b;return u[Zt(b)]=Zt(x),u},{})})(n);return{value:Xo(i,t.id).getOr(o),valid:s}}return{value:n,valid:s}}return{valid:!1,message:"Must be a string."}},eD=ve("iframe_attrs"),xE=ve("doctype"),wE=ve("document_base_url"),Ri=ve("body_id"),tD=ve("body_class"),wl=ve("content_security_policy"),Lw=ve("br_in_pre"),Rs=ve("forced_root_block"),Ji=ve("forced_root_block_attrs"),Ec=ve("newline_behavior"),Fw=ve("br_newline_selector"),Yl=ve("no_newline_selector"),_E=ve("keep_styles"),zw=ve("end_container_on_empty_block"),Hw=ve("automatic_uploads"),Vw=ve("images_reuse_filename"),Uw=ve("images_replace_blob_uris"),CE=ve("icons"),SE=ve("icons_url"),oD=ve("images_upload_url"),nD=ve("images_upload_base_path"),jw=ve("images_upload_credentials"),kE=ve("images_upload_handler"),Ev=ve("content_css_cors"),$w=ve("referrer_policy"),Tv=ve("language"),hp=ve("language_url"),Un=ve("indent_use_margin"),EE=ve("indentation"),$a=ve("content_css"),Ww=ve("content_style"),qw=ve("font_css"),TE=ve("directionality"),Ov=ve("inline_boundaries_selector"),OE=ve("object_resizing"),AE=ve("resize_img_proportional"),NE=ve("placeholder"),Lm=ve("event_root"),RE=ve("service_message"),fp=ve("theme"),rD=ve("theme_url"),Tc=ve("model"),Av=ve("model_url"),Lu=ve("inline_boundaries"),Gw=ve("formats"),sD=ve("preview_styles"),Pd=ve("format_empty_lines"),Kw=ve("format_noneditable_selector"),aD=ve("custom_ui_selector"),td=ve("inline"),Nv=ve("hidden_input"),iD=ve("submit_patch"),lD=ve("add_form_submit_trigger"),DE=ve("add_unload_trigger"),cD=ve("custom_undo_redo_levels"),dD=ve("disable_nodechange"),Yw=ve("readonly"),BE=ve("editable_root"),ME=ve("content_css_cors"),Rv=ve("plugins"),IE=ve("external_plugins"),Xw=ve("block_unsupported_drop"),PE=ve("visual"),uD=ve("visual_table_class"),Dv=ve("visual_anchor_class"),Jw=ve("iframe_aria_text"),mD=ve("setup"),Bv=ve("init_instance_callback"),Hh=ve("urlconverter_callback"),LE=ve("auto_focus"),FE=ve("browser_spellcheck"),zE=ve("protect"),Vh=ve("paste_block_drop"),Uh=ve("paste_data_images"),HE=ve("paste_preprocess"),VE=ve("paste_postprocess"),Wa=ve("newdocument_content"),UE=ve("paste_webkit_styles"),gD=ve("paste_remove_styles_if_webkit"),jE=ve("paste_merge_formats"),pD=ve("smart_paste"),Mv=ve("paste_as_text"),$E=ve("paste_tab_spaces"),Qw=ve("allow_html_data_urls"),WE=ve("text_patterns"),hD=ve("text_patterns_lookup"),jh=ve("noneditable_class"),qE=ve("editable_class"),GE=ve("noneditable_regexp"),KE=ve("preserve_cdata"),YE=ve("highlight_on_focus"),Iv=ve("xss_sanitization"),XE=ve("init_content_sync"),Zw=t=>$e.explode(t.options.get("images_file_types")),JE=ve("table_tab_navigation"),QE=ve("details_initial_state"),ZE=ve("details_serialized_state"),fD=ve("force_hex_color"),e_=ve("sandbox_iframes"),bD=Te,eT=Ae,tT=t=>{const o=t.parentNode;o&&o.removeChild(t)},t_=t=>{const o=wa(t);return{count:t.length-o.length,text:o}},oT=t=>{let o;for(;-1!==(o=t.data.lastIndexOf(Er));)t.deleteData(o,1)},ma=(t,o)=>(Oc(t),o),Oc=t=>{bD(t)&&Mn(t)&&(vl(t)?t.removeAttribute("data-mce-caret"):tT(t)),eT(t)&&(oT(t),0===t.data.length&&tT(t))},$h=zo,nT=fo,n_=Ia,r_=(t,o,n)=>{const s=Gl(o.getBoundingClientRect(),n);let i,c;if("BODY"===t.tagName){const u=t.ownerDocument.documentElement;i=t.scrollLeft||u.scrollLeft,c=t.scrollTop||u.scrollTop}else{const u=t.getBoundingClientRect();i=t.scrollLeft-u.left,c=t.scrollTop-u.top}s.left+=i,s.right+=i,s.top+=c,s.bottom+=c,s.width=1;let d=o.offsetWidth-o.clientWidth;return d>0&&(n&&(d*=-1),s.left+=d,s.right+=d),s},s_=()=>Ht.browser.isFirefox(),bp=t=>$h(t)||nT(t),_l=t=>(bp(t)||yo(t)&&s_())&&Gc(re(t)).exists(bl),rT=on,Wh=zo,Pv=fo,a_=Xt("display","block table table-cell table-caption list-item"),sT=Mn,i_=Gi,aT=Te,iT=Ae,lT=Ca,zm=t=>t>0,Fu=t=>t<0,Lv=(t,o)=>{let n;for(;n=t(o);)if(!i_(n))return n;return null},qh=(t,o,n,s,i)=>{const c=new he(t,s),d=Wh(t)||i_(t);let u;if(Fu(o)){if(d&&(u=Lv(c.prev.bind(c),!0),n(u)))return u;for(;u=Lv(c.prev.bind(c),i);)if(n(u))return u}if(zm(o)){if(d&&(u=Lv(c.next.bind(c),!0),n(u)))return u;for(;u=Lv(c.next.bind(c),i);)if(n(u))return u}return null},zu=(t,o)=>{for(;t&&t!==o;){if(a_(t))return t;t=t.parentNode}return null},od=(t,o,n)=>zu(t.container(),n)===zu(o.container(),n),jo=(t,o)=>{if(!o)return H.none();const n=o.container(),s=o.offset();return aT(n)?H.from(n.childNodes[s+t]):H.none()},Ld=(t,o)=>{var n;const s=(null!==(n=o.ownerDocument)&&void 0!==n?n:document).createRange();return t?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),s},vp=(t,o,n)=>zu(o,t)===zu(n,t),Fv=(t,o,n)=>{const s=t?"previousSibling":"nextSibling";let i=n;for(;i&&i!==o;){let c=i[s];if(c&&sT(c)&&(c=c[s]),Wh(c)||Pv(c)){if(vp(o,c,i))return c;break}if(lT(c))break;i=i.parentNode}return null},Gh=it(Ld,!0),Hm=it(Ld,!1),l_=(t,o,n)=>{let s;const i=it(Fv,!0,o),c=it(Fv,!1,o),d=n.startContainer,u=n.startOffset;if(Gi(d)){const p=iT(d)?d.parentNode:d,f=p.getAttribute("data-mce-caret");if("before"===f&&(s=p.nextSibling,_l(s)))return Gh(s);if("after"===f&&(s=p.previousSibling,_l(s)))return Hm(s)}if(!n.collapsed)return n;if(Ae(d)){if(sT(d)){if(1===t){if(s=c(d),s)return Gh(s);if(s=i(d),s)return Hm(s)}if(-1===t){if(s=i(d),s)return Hm(s);if(s=c(d),s)return Gh(s)}return n}if(ua(d)&&u>=d.data.length-1)return 1===t&&(s=c(d),s)?Gh(s):n;if(Su(d)&&u<=1)return-1===t&&(s=i(d),s)?Hm(s):n;if(u===d.data.length)return s=c(d),s?Gh(s):n;if(0===u)return s=i(d),s?Hm(s):n}return n},zv=(t,o)=>jo(t?0:-1,o).filter(Wh),Vm=(t,o,n)=>{const s=l_(t,o,n);return-1===t?Oe.fromRangeStart(s):Oe.fromRangeEnd(s)},Kh=t=>H.from(t.getNode()).map(re),c_=(t,o)=>{let n=o;for(;n=t(n);)if(n.isVisible())return n;return n},Hv=(t,o)=>{const n=od(t,o);return!(n||!Ft(t.getNode()))||n};var Ds,t;(t=Ds||(Ds={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const cT=zo,nd=Ae,d_=Te,u_=Ft,yp=Ca,dT=t=>{return tE(t)||!!sw(o=t)&&!Nn(dr(o.getElementsByTagName("*")),(n,s)=>n||Qg(s),!1);var o},Vv=ep,at=(t,o)=>t.hasChildNodes()&&o<t.childNodes.length?t.childNodes[o]:null,ys=(t,o)=>{if(zm(t)){if(yp(o.previousSibling)&&!nd(o.previousSibling))return Oe.before(o);if(nd(o))return Oe(o,0)}if(Fu(t)){if(yp(o.nextSibling)&&!nd(o.nextSibling))return Oe.after(o);if(nd(o))return Oe(o,o.data.length)}return Fu(t)?u_(o)?Oe.before(o):Oe.after(o):Oe.before(o)},Yh=(t,o,n)=>{let s,i,c,d;if(!d_(n)||!o)return null;if(o.isEqual(Oe.after(n))&&n.lastChild){if(d=Oe.after(n.lastChild),Fu(t)&&yp(n.lastChild)&&d_(n.lastChild))return u_(n.lastChild)?Oe.before(n.lastChild):d}else d=o;const u=d.container();let p=d.offset();if(nd(u)){if(Fu(t)&&p>0)return Oe(u,--p);if(zm(t)&&p<u.length)return Oe(u,++p);s=u}else{if(Fu(t)&&p>0&&(i=at(u,p-1),yp(i)))return!dT(i)&&(c=qh(i,t,Vv,i),c)?nd(c)?Oe(c,c.data.length):Oe.after(c):nd(i)?Oe(i,i.data.length):Oe.before(i);if(zm(t)&&p<u.childNodes.length&&(i=at(u,p),yp(i)))return u_(i)?((b,x)=>{const C=x.nextSibling;return C&&yp(C)?nd(C)?Oe(C,0):Oe.before(C):Yh(Ds.Forwards,Oe.after(x),b)})(n,i):!dT(i)&&(c=qh(i,t,Vv,i),c)?nd(c)?Oe(c,0):Oe.before(c):nd(i)?Oe(i,0):Oe.after(i);s=i||d.getNode()}if(s&&(zm(t)&&d.isAtEnd()||Fu(t)&&d.isAtStart())&&(s=qh(s,t,Vo,n,!0),Vv(s,n)))return ys(t,s);i=s&&qh(s,t,Vv,n);const f=Ss(ft(((b,x)=>{const C=[];let O=b;for(;O&&O!==x;)C.push(O),O=O.parentNode;return C})(u,n),cT));return!f||i&&f.contains(i)?i?ys(t,i):null:(d=zm(t)?Oe.after(f):Oe.before(f),d)},ar=t=>({next:o=>Yh(Ds.Forwards,o,t),prev:o=>Yh(Ds.Backwards,o,t)}),Um=t=>Oe.isTextPosition(t)?0===t.offset():Ca(t.getNode()),jm=t=>{if(Oe.isTextPosition(t)){const o=t.container();return t.offset()===o.data.length}return Ca(t.getNode(!0))},m_=(t,o)=>!Oe.isTextPosition(t)&&!Oe.isTextPosition(o)&&t.getNode()===o.getNode(!0),li=(t,o,n)=>{const s=ar(o);return H.from(t?s.next(n):s.prev(n))},Hu=(t,o,n)=>li(t,o,n).bind(s=>{return od(n,s,o)&&(c=n,d=s,t?!m_(c,d)&&(Oe.isTextPosition(u=c)||!Ft(u.getNode()))&&jm(c)&&Um(d):!m_(d,c)&&Um(c)&&jm(d))?li(t,o,s):H.some(s);var c,d,u}),g_=(t,o,n,s)=>Hu(t,o,n).bind(i=>s(i)?g_(t,o,i,s):H.some(i)),$m=(t,o)=>{const n=t?o.firstChild:o.lastChild;return Ae(n)?H.some(Oe(n,t?0:n.data.length)):n?Ca(n)?H.some(t?Oe.before(n):Ft(s=n)?Oe.before(s):Oe.after(s)):((i,c,d)=>{const u=i?Oe.before(d):Oe.after(d);return li(i,c,u)})(t,o,n):H.none();var s},ci=it(li,!0),di=it(li,!1),js=it($m,!0),Di=it($m,!1),Xh="_mce_caret",ui=t=>Te(t)&&t.id===Xh,Fd=(t,o)=>{let n=o;for(;n&&n!==t;){if(ui(n))return n;n=n.parentNode}return null},uT=t=>Gt(t,"name"),Jh=t=>$e.isArray(t.start),Wm=t=>!(!uT(t)&&Qe(t.forward))||t.forward,mT=(t,o)=>(Te(o)&&t.isBlock(o)&&!o.innerHTML&&(o.innerHTML='<br data-mce-bogus="1" />'),o),vD=(t,o)=>Di(t).fold(wo,n=>(o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),!0)),gT=(t,o,n)=>!(o.hasChildNodes()||!Fd(t,o)||(((s,i)=>{var c;const d=(null!==(c=s.ownerDocument)&&void 0!==c?c:document).createTextNode(Er);s.appendChild(d),i.setStart(d,0),i.setEnd(d,0)})(o,n),0)),pT=(t,o,n,s)=>{const i=n[o?"start":"end"],c=t.getRoot();if(i){let d=c,u=i[0];for(let p=i.length-1;d&&p>=1;p--){const f=d.childNodes;if(gT(c,d,s))return!0;if(i[p]>f.length-1)return!!gT(c,d,s)||vD(d,s);d=f[i[p]]}Ae(d)&&(u=Math.min(i[0],d.data.length)),Te(d)&&(u=Math.min(i[0],d.childNodes.length)),o?s.setStart(d,u):s.setEnd(d,u)}return!0},Uv=t=>Ae(t)&&t.data.length>0,p_=(t,o,n)=>{const s=t.get(n.id+"_"+o),i=s?.parentNode,c=n.keep;if(s&&i){let d,u;if("start"===o?c?s.hasChildNodes()?(d=s.firstChild,u=1):Uv(s.nextSibling)?(d=s.nextSibling,u=0):Uv(s.previousSibling)?(d=s.previousSibling,u=s.previousSibling.data.length):(d=i,u=t.nodeIndex(s)+1):(d=i,u=t.nodeIndex(s)):c?s.hasChildNodes()?(d=s.firstChild,u=1):Uv(s.previousSibling)?(d=s.previousSibling,u=s.previousSibling.data.length):(d=i,u=t.nodeIndex(s)):(d=i,u=t.nodeIndex(s)),!c){const p=s.previousSibling,f=s.nextSibling;let b;for($e.each($e.grep(s.childNodes),x=>{Ae(x)&&(x.data=x.data.replace(/\uFEFF/g,""))});b=t.get(n.id+"_"+o);)t.remove(b,!0);if(Ae(f)&&Ae(p)&&!Ht.browser.isOpera()){const x=p.data.length;p.appendData(f.data),t.remove(f),d=p,u=x}}return H.some(Oe(d,u))}return H.none()},jv=(t,o,n)=>((s,i,c=!1)=>{return 2===i?Us(wa,c,s):3===i?(d=>{const u=d.getRng();return{start:Id(d.dom.getRoot(),Oe.fromRangeStart(u)),end:Id(d.dom.getRoot(),Oe.fromRangeEnd(u)),forward:d.isForward()}})(s):i?{rng:(d=s).getRng(),forward:d.isForward()}:ja(s,!1);var d})(t,o,n),ga=(t,o)=>{((n,s)=>{const i=n.dom;if(s){if(Jh(s))return((c,d)=>{const u=c.createRng();return pT(c,!0,d,u)&&pT(c,!1,d,u)?H.some({range:u,forward:Wm(d)}):H.none()})(i,s);if(_t(s.start))return((c,d)=>{const u=H.from(Nw(c.getRoot(),d.start)),p=H.from(Nw(c.getRoot(),d.end));return mr(u,p,(f,b)=>{const x=c.createRng();return x.setStart(f.container(),f.offset()),x.setEnd(b.container(),b.offset()),{range:x,forward:Wm(d)}})})(i,s);if(Gt(s,"id"))return((c,d)=>{const u=p_(c,"start",d),p=p_(c,"end",d);return mr(u,p.or(u),(f,b)=>{const x=c.createRng();return x.setStart(mT(c,f.container()),f.offset()),x.setEnd(mT(c,b.container()),b.offset()),{range:x,forward:Wm(d)}})})(i,s);if(uT(s))return((c,d)=>H.from(c.select(d.name)[d.index]).map(u=>{const p=c.createRng();return p.selectNode(u),{range:p,forward:!0}}))(i,s);if((c=>Gt(c,"rng"))(s))return H.some({range:s.rng,forward:Wm(s)})}return H.none()})(t,o).each(({range:n,forward:s})=>{t.setRng(n,s)})},ls=t=>Te(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),mi=t=>"\xa0"===t,Vu=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),h_=t=>!Vu(t)&&!mi(t)&&!bs(t),Zh=t=>{const o=[];if(t)for(let n=0;n<t.rangeCount;n++)o.push(t.getRangeAt(n));return o},$v=(t,o)=>{const n=J(o,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:ft(Lr(t,c=>{const d=gp(c);return d?[re(d)]:[]}),Od)},xp=t=>$v(Zh(t.selection.getSel()),re(t.getBody())),qm=(t,o)=>$i(t,"table",o),f_=t=>yu(t).fold(Ve([t]),o=>[t].concat(f_(o))),Wv=t=>Os(t).fold(Ve([t]),o=>"br"===Po(o)?ta(o).map(n=>[t].concat(Wv(n))).getOr([]):[t].concat(Wv(o))),ef=(t,o)=>mr((n=>{const s=n.startContainer,i=n.startOffset;return Ae(s)?0===i?H.some(re(s)):H.none():H.from(s.childNodes[i]).map(re)})(o),(n=>{const s=n.endContainer,i=n.endOffset;return Ae(s)?i===s.data.length?H.some(re(s)):H.none():H.from(s.childNodes[i-1]).map(re)})(o),(n,s)=>{const i=yn(f_(t),it(Qo,n)),c=yn(Wv(t),it(Qo,s));return i.isSome()&&c.isSome()}).getOr(!1),tf=(t,o,n,s)=>{const i=n,c=new he(n,i),d=zr(t.schema.getMoveCaretBeforeOnEnterElements(),(p,f)=>!st(["td","th","table"],f.toLowerCase()));let u=n;do{if(Ae(u)&&0!==$e.trim(u.data).length)return void(s?o.setStart(u,0):o.setEnd(u,u.data.length));if(d[u.nodeName])return void(s?o.setStartBefore(u):"BR"===u.nodeName?o.setEndBefore(u):o.setEndAfter(u))}while(u=s?c.next():c.prev());"BODY"===i.nodeName&&(s?o.setStart(i,0):o.setEnd(i,i.childNodes.length))},fn=t=>{const o=t.selection.getSel();return ee(o)&&o.rangeCount>0},rd=(t,o)=>{const n=xp(t);n.length>0?Ee(n,s=>{const i=s.dom,c=t.dom.createRng();c.setStartBefore(i),c.setEndAfter(i),o(c,!0)}):o(t.selection.getRng(),!1)},b_=(t,o,n)=>{const s=ja(t,o);n(s),t.moveToBookmark(s)},wp=t=>rs(t?.nodeType),qv=t=>Te(t)&&!ls(t)&&!ui(t)&&!co(t),Gv=(t,o,n)=>{const{selection:s,dom:i}=t,c=s.getNode(),d=zo(c);b_(s,!0,()=>{o()}),d&&zo(c)&&i.isChildOf(c,t.getBody())?t.selection.select(c):n(s.getStart())&&hT(i,s)},hT=(t,o)=>{var n,s;const i=o.getRng(),{startContainer:c,startOffset:d}=i;if(!((u,p)=>{if(qv(p)&&!/^(TD|TH)$/.test(p.nodeName)){const f=u.getAttrib(p,"data-mce-selected"),b=parseInt(f,10);return!isNaN(b)&&b>0}return!1})(t,o.getNode())&&Te(c)){const u=c.childNodes,p=t.getRoot();let f;if(d<u.length){const b=u[d];f=new he(b,null!==(n=t.getParent(b,t.isBlock))&&void 0!==n?n:p)}else{const b=u[u.length-1];f=new he(b,null!==(s=t.getParent(b,t.isBlock))&&void 0!==s?s:p),f.next(!0)}for(let b=f.current();b;b=f.next()){if("false"===t.getContentEditable(b))return;if(Ae(b)&&!of(b))return i.setStart(b,0),void o.setRng(i)}}},Kv=(t,o,n)=>{if(t){const s=o?"nextSibling":"previousSibling";for(t=n?t:t[s];t;t=t[s])if(Te(t)||!of(t))return t}},v_=(t,o)=>!!t.getTextBlockElements()[o.nodeName.toLowerCase()]||Eu(t,o),Gm=(t,o,n)=>t.schema.isValidChild(o,n),of=(t,o=!1)=>{if(ee(t)&&Ae(t)){const n=o?t.data.replace(/ /g,"\xa0"):t.data;return ku(n)}return!1},y_=(t,o)=>{const n=t.dom;return qv(o)&&"false"===n.getContentEditable(o)&&((s,i)=>{const c="[data-mce-cef-wrappable]",d=Kw(s),u=Ro(d)?c:`${c},${d}`;return ea(re(i),u)})(t,o)&&0===n.select('[contenteditable="true"]',o).length},Uu=(t,o)=>ut(t)?t(o):(ee(o)&&(t=t.replace(/%(\w+)/g,(n,s)=>o[s]||n)),t),x_=(t,o)=>(t=""+((t=t||"").nodeName||t),o=""+((o=o||"").nodeName||o),t.toLowerCase()===o.toLowerCase()),gi=(t,o)=>{if(An(t))return null;{let n=String(t);return"color"!==o&&"backgroundColor"!==o||(n=Dm(n)),"fontWeight"===o&&700===t&&(n="bold"),"fontFamily"===o&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},$s=(t,o,n)=>{const s=t.getStyle(o,n);return gi(s,n)},Km=(t,o)=>{let n;return t.getParent(o,s=>!!Te(s)&&(n=t.getStyle(s,"text-decoration"),!!n&&"none"!==n)),n},Yv=(t,o,n)=>t.getParents(o,n,t.getRoot()),w_=(t,o,n)=>{const s=t.formatter.get(o);return ee(s)&&Wo(s,n)},_o=t=>Hr(t,"block"),Cl=t=>Hr(t,"selector"),xs=t=>Hr(t,"inline"),nf=t=>Cl(t)&&!1!==t.expand&&!xs(t),fT=t=>(o=>{const n=[];let s=o;for(;s;){if(Ae(s)&&s.data!==Er||s.childNodes.length>1)return[];Te(s)&&n.push(s),s=s.firstChild}return n})(t).length>0,__=t=>ui(t.dom)&&fT(t.dom),_p=ls,bT=Yv,Xv=of,C_=v_,S_=(t,o)=>{let n=o;for(;n;){if(Te(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:o;n=n.parentNode}return o},vT=(t,o,n,s)=>{const i=o.data;if(t){for(let c=n;c>0;c--)if(s(i.charAt(c-1)))return c}else for(let c=n;c<i.length;c++)if(s(i.charAt(c)))return c;return-1},yD=(t,o,n)=>vT(t,o,n,s=>mi(s)||Vu(s)),xD=(t,o,n)=>vT(t,o,n,h_),Ut=(t,o,n,s,i,c)=>{let d;const u=t.getParent(n,t.isBlock)||o,p=(f,b,x)=>{const C=Xi(t);return H.from((i?C.backwards:C.forwards)(f,b,(S,R)=>_p(S.parentNode)?-1:(d=S,x(i,S,R)),u))};return p(n,s,yD).bind(f=>c?p(f.container,f.offset+(i?-1:0),xD):H.some(f)).orThunk(()=>d?H.some({container:d,offset:i?0:d.length}):H.none())},k_=(t,o,n,s,i)=>{const c=s[i];Ae(s)&&Ro(s.data)&&c&&(s=c);const d=bT(t,s);for(let u=0;u<d.length;u++)for(let p=0;p<o.length;p++){const f=o[p];if((!ee(f.collapsed)||f.collapsed===n.collapsed)&&Cl(f)&&t.is(d[u],f.selector))return d[u]}return s},Cp=(t,o,n,s)=>{var i;let c=n;const d=t.getRoot(),u=o[0];if(_o(u)&&(c=u.wrapper?null:t.getParent(n,u.block,d)),!c){const p=null!==(i=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==i?i:d;c=t.getParent(Ae(n)?n.parentNode:n,f=>f!==d&&C_(t.schema,f),p)}if(c&&_o(u)&&u.wrapper&&(c=bT(t,c,"ul,ol").reverse()[0]||c),!c)for(c=n;c&&c[s]&&!t.isBlock(c[s])&&(c=c[s],!x_(c,"br")););return c||n},Jv=(t,o,n,s)=>{const i=n.parentNode;return!ee(n[s])&&(!(i!==o&&!An(i)&&!t.isBlock(i))||Jv(t,o,i,s))},rf=(t,o,n,s,i)=>{let c=n;const d=i?"previousSibling":"nextSibling",u=t.getRoot();if(Ae(n)&&!Xv(n)&&(i?s>0:s<n.data.length))return n;for(;c;){if(!o[0].block_expand&&t.isBlock(c))return c;for(let f=c[d];f;f=f[d]){const b=Ae(f)&&!Jv(t,u,f,d);if(!_p(f)&&(!Ft(p=f)||!p.getAttribute("data-mce-bogus")||p.nextSibling)&&!Xv(f,b))return c}if(c===u||c.parentNode===u){n=c;break}c=c.parentNode}var p;return n},E_=t=>_p(t.parentNode)||_p(t),ju=(t,o,n,s=!1)=>{let{startContainer:i,startOffset:c,endContainer:d,endOffset:u}=o;const p=n[0];return Te(i)&&i.hasChildNodes()&&(i=Bu(i,c),Ae(i)&&(c=0)),Te(d)&&d.hasChildNodes()&&(d=Bu(d,o.collapsed?u:u-1),Ae(d)&&(u=d.data.length)),i=S_(t,i),d=S_(t,d),E_(i)&&(i=_p(i)?i:i.parentNode,i=o.collapsed?i.previousSibling||i:i.nextSibling||i,Ae(i)&&(c=o.collapsed?i.length:0)),E_(d)&&(d=_p(d)?d:d.parentNode,d=o.collapsed?d.nextSibling||d:d.previousSibling||d,Ae(d)&&(u=o.collapsed?0:d.length)),o.collapsed&&(Ut(t,t.getRoot(),i,c,!0,s).each(({container:f,offset:b})=>{i=f,c=b}),Ut(t,t.getRoot(),d,u,!1,s).each(({container:f,offset:b})=>{d=f,u=b})),(xs(p)||p.block_expand)&&(xs(p)&&Ae(i)&&0!==c||(i=rf(t,n,i,c,!0)),xs(p)&&Ae(d)&&u!==d.data.length||(d=rf(t,n,d,u,!1))),nf(p)&&(i=k_(t,n,o,i,"previousSibling"),d=k_(t,n,o,d,"nextSibling")),(_o(p)||Cl(p))&&(i=Cp(t,n,i,"previousSibling"),d=Cp(t,n,d,"nextSibling"),_o(p)&&(t.isBlock(i)||(i=rf(t,n,i,c,!0)),t.isBlock(d)||(d=rf(t,n,d,u,!1)))),Te(i)&&i.parentNode&&(c=t.nodeIndex(i),i=i.parentNode),Te(d)&&d.parentNode&&(u=t.nodeIndex(d)+1,d=d.parentNode),{startContainer:i,startOffset:c,endContainer:d,endOffset:u}},Sp=(t,o,n)=>{var s;const i=o.startOffset,c=Bu(o.startContainer,i),d=o.endOffset,u=Bu(o.endContainer,d-1),p=T=>{const D=T[0];Ae(D)&&D===c&&i>=D.data.length&&T.splice(0,1);const P=T[T.length-1];return 0===d&&T.length>0&&P===u&&Ae(P)&&T.splice(T.length-1,1),T},f=(T,D,P)=>{const F=[];for(;T&&T!==P;T=T[D])F.push(T);return F},b=(T,D)=>t.getParent(T,P=>P.parentNode===D,D),x=(T,D,P)=>{const F=P?"nextSibling":"previousSibling";for(let q=T,$=q.parentNode;q&&q!==D;q=$){$=q.parentNode;const ne=f(q===T?q:q[F],F);ne.length&&(P||ne.reverse(),n(p(ne)))}};if(c===u)return n(p([c]));const C=null!==(s=t.findCommonAncestor(c,u))&&void 0!==s?s:t.getRoot();if(t.isChildOf(c,u))return x(c,C,!0);if(t.isChildOf(u,c))return x(u,C);const O=b(c,C)||c,S=b(u,C)||u;x(c,O,!0);const R=f(O===c?O:O.nextSibling,"nextSibling",S===u?S.nextSibling:S);R.length&&n(p(R)),x(u,S)},wD=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],yT=(t,o,n,s,i,c)=>{const{uid:d=o,...u}=n;fs(t,cp()),ln(t,`${Mm()}`,d),ln(t,`${Nu()}`,s);const{attributes:p={},classes:f=[]}=i(d,u);if(jr(t,p),b=t,Ee(f,C=>{fs(b,C)}),c){f.length>0&&ln(t,`${Mh()}`,f.join(","));const b=as(p);b.length>0&&ln(t,`${Ih()}`,b.join(","))}var b},en=(t,o,n,s,i)=>{const c=nr("span",t);return yT(c,o,n,s,i,!1),c},sd=t=>{const o=(()=>{const c={};return{register:(d,u)=>{c[d]={name:d,settings:u}},lookup:d=>Xo(c,d).map(u=>u.settings),getNames:()=>as(c)}})();((c,d)=>{const u=Nu(),p=b=>H.from(b.attr(u)).bind(d.lookup),f=b=>{var x,C;b.attr(Mm(),null),b.attr(Nu(),null),b.attr(Bh(),null);const O=H.from(b.attr(Ih())).map(D=>D.split(",")).getOr([]),S=H.from(b.attr(Mh())).map(D=>D.split(",")).getOr([]);Ee(O,D=>b.attr(D,null));const R=null!==(C=null===(x=b.attr("class"))||void 0===x?void 0:x.split(" "))&&void 0!==C?C:[],T=Si(R,[cp()].concat(S));b.attr("class",T.length>0?T.join(" "):null),b.attr(Mh(),null),b.attr(Ih(),null)};c.serializer.addTempAttr(Bh()),c.serializer.addAttributeFilter(u,b=>{for(const x of b)p(x).each(C=>{!1===C.persistent&&("span"===x.name?x.unwrap():f(x))})})})(t,o);const n=((c,d)=>{const u=Zo({}),p=()=>({listeners:[],previous:ai()}),f=(O,S)=>{b(O,R=>(S(R),R))},b=(O,S)=>{const R=u.get(),T=S(Xo(R,O).getOrThunk(p));R[O]=T,u.set(R)},x=(O,S)=>{Ee(xv(c,O),R=>{S?ln(R,Bh(),"true"):Cr(R,Bh())})},C=yv(()=>{const O=Rn(d.getNames());Ee(O,S=>{b(S,R=>{const T=R.previous.get();return yw(c,H.some(S)).fold(()=>{T.each(D=>{var P;f(P=S,F=>{Ee(F.listeners,q=>q(!1,P))}),R.previous.clear(),x(D,!1)})},({uid:D,name:P,elements:F})=>{var q,$,ne;oi(T,D)||(T.each(q=>x(q,!1)),$=D,ne=F,f(q=P,ce=>{Ee(ce.listeners,me=>me(!0,q,{uid:$,nodes:qt(ne,pe=>pe.dom)}))}),R.previous.set(D),x(D,!0))}),{previous:R.previous,listeners:R.listeners}})})},30);return c.on("remove",()=>{C.cancel()}),c.on("NodeChange",()=>{C.throttle()}),{addListener:(O,S)=>{b(O,R=>({previous:R.previous,listeners:R.listeners.concat([S])}))}}})(t,o),s=ml("span"),i=c=>{Ee(c,d=>{s(d)?be(d):(u=>{zl(u,cp()),Cr(u,`${Mm()}`),Cr(u,`${Nu()}`),Cr(u,`${Bh()}`);const p=Da(u,`${Ih()}`).map(x=>x.split(",")).getOr([]),f=Da(u,`${Mh()}`).map(x=>x.split(",")).getOr([]);var b;Ee(p,x=>Cr(u,x)),b=u,Ee(f,x=>{zl(b,x)}),Cr(u,`${Mh()}`),Cr(u,`${Ih()}`)})(d)})};return{register:(c,d)=>{o.register(c,d)},annotate:(c,d)=>{o.lookup(c).each(u=>{var p,f,b,x;f=c,b=u,x=d,(p=t).undoManager.transact(()=>{const C=p.selection,O=C.getRng(),S=xp(p).length>0,R=dp("mce-annotation");if(O.collapsed&&!S&&((T,D)=>{const P=ju(T.dom,D,[{inline:"span"}]);D.setStart(P.startContainer,P.startOffset),D.setEnd(P.endContainer,P.endOffset),T.selection.setRng(D)})(p,O),C.getRng().collapsed&&!S){const T=en(p.getDoc(),R,x,f,b.decorate);We(T,Vn),C.getRng().insertNode(T.dom),C.select(T.dom)}else b_(C,!1,()=>{rd(p,T=>{((t,o,n,s,i,c)=>{const d=[],u=en(t.getDoc(),n,c,s,i),p=ai(),f=()=>{p.clear()},b=C=>{Ee(C,x)},x=C=>{switch(O=t,S=C,R="span",T=Po(C),Ma(S).fold(()=>"skipping",D=>{return"br"===T||Go(P=S)&&fe(P)===Er?"valid":(P=>Ts(P)&&pl(P,cp()))(S)?"existing":ui(S.dom)?"caret":Wo(wD,P=>ea(S,P))?"valid-block":Gm(O,R,T)&&Gm(O,Po(D),R)?"valid":"invalid-child";var P})){case"invalid-child":{f();const O=pr(C);b(O),f();break}case"valid-block":f(),yT(C,n,c,s,i,!0);break;case"valid":{const O=p.get().getOrThunk(()=>{const S=Ru(u);return d.push(S),p.set(S),S});V(C,O);break}}var O,S,R,T};Sp(t.dom,o,C=>{f(),(O=>{const S=qt(O,re);b(S)})(C)})})(p,T,R,f,b.decorate,x)})})})})},annotationChanged:(c,d)=>{n.addListener(c,d)},remove:c=>{yw(t,H.some(c)).each(({elements:d})=>{const u=t.selection.getBookmark();i(d),t.selection.moveToBookmark(u)})},removeAll:c=>{const d=t.selection.getBookmark();Yo(na(t,c),(u,p)=>{i(u)}),t.selection.moveToBookmark(d)},getAll:c=>{const d=na(t,c);return Fr(d,u=>qt(u,p=>p.dom))}}},Qi=t=>({getBookmark:it(jv,t),moveToBookmark:it(ga,t)});Qi.isBookmarkNode=ls;const sf=(t,o,n)=>!n.collapsed&&Wo(n.getClientRects(),s=>{return d=o,(c=t)>=(i=s).left&&c<=i.right&&d>=i.top&&d<=i.bottom;var i,c,d}),pi=(t,o,n)=>{t.dispatch(o,n)},af=(t,o,n,s)=>{t.dispatch("FormatApply",{format:o,node:n,vars:s})},kp=(t,o,n,s)=>{t.dispatch("FormatRemove",{format:o,node:n,vars:s})},lf=(t,o)=>t.dispatch("SetContent",o),Ym=(t,o)=>t.dispatch("GetContent",o),xT=(t,o)=>t.dispatch("PastePlainTextToggle",{state:o}),gt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||gt.metaKeyPressed(t),metaKeyPressed:t=>Ht.os.isMacOS()||Ht.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Xm="data-mce-selected",wT=Math.abs,Lo=Math.round,Sl={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},$u=(t,o)=>{const n=o.dom,s=o.getDoc(),i=document,c=o.getBody();let d,u,p,f,b,x,C,O,S,R,T,D,P,F,q;const $=dt=>ee(dt)&&(hn(dt)||n.is(dt,"figure.image")),ne=dt=>fo(dt)||n.hasClass(dt,"mce-preview-object"),ce=dt=>{const xt=dt.target;((to,ie)=>{if("longpress"===(ue=to).type||0===ue.type.indexOf("touch")){const ue=to.touches[0];return $(to.target)&&!sf(ue.clientX,ue.clientY,ie)}var ue;return $(to.target)&&!sf(to.clientX,to.clientY,ie)})(dt,o.selection.getRng())&&!dt.isDefaultPrevented()&&o.selection.select(xt)},me=dt=>n.hasClass(dt,"mce-preview-object")&&ee(dt.firstElementChild)?[dt,dt.firstElementChild]:n.is(dt,"figure.image")?[dt.querySelector("img")]:[dt],pe=dt=>{const xt=OE(o);return!!xt&&"false"!==dt.getAttribute("data-mce-resize")&&dt!==o.getBody()&&(n.hasClass(dt,"mce-preview-object")&&ee(dt.firstElementChild)?ea(re(dt.firstElementChild),xt):ea(re(dt),xt))},we=(dt,xt,to)=>{if(ee(to)){const ie=me(dt);Ee(ie,ue=>{ue.style[xt]||!o.schema.isValid(ue.nodeName.toLowerCase(),xt)?n.setStyle(ue,xt,to):n.setAttrib(ue,xt,""+to)})}},se=(dt,xt,to)=>{we(dt,"width",xt),we(dt,"height",to)},de=dt=>{let xt,to,ie,ue,ze;xt=dt.screenX-x,to=dt.screenY-C,D=xt*f[2]+O,P=to*f[3]+S,D=D<5?5:D,P=P<5?5:P,ie=($(d)||ne(d))&&!1!==AE(o)?!gt.modifierPressed(dt):gt.modifierPressed(dt),ie&&(wT(xt)>wT(to)?(P=Lo(D*R),D=Lo(P/R)):(D=Lo(P/R),P=Lo(D*R))),se(u,D,P),ue=f.startPos.x+xt,ze=f.startPos.y+to,ue=ue>0?ue:0,ze=ze>0?ze:0,n.setStyles(p,{left:ue,top:ze,display:"block"}),p.innerHTML=D+" &times; "+P,f[2]<0&&u.clientWidth<=D&&n.setStyle(u,"left",void 0+(O-D)),f[3]<0&&u.clientHeight<=P&&n.setStyle(u,"top",void 0+(S-P)),xt=c.scrollWidth-F,to=c.scrollHeight-q,xt+to!==0&&n.setStyles(p,{left:ue-xt,top:ze-to}),T||(o.dispatch("ObjectResizeStart",{target:d,width:O,height:S,origin:"corner-"+f.name}),T=!0)},ye=()=>{const dt=T;T=!1,dt&&(we(d,"width",D),we(d,"height",P)),n.unbind(s,"mousemove",de),n.unbind(s,"mouseup",ye),i!==s&&(n.unbind(i,"mousemove",de),n.unbind(i,"mouseup",ye)),n.remove(u),n.remove(p),n.remove(b),Le(d),dt&&(o.dispatch("ObjectResized",{target:d,width:D,height:P,origin:"corner-"+f.name}),n.setAttrib(d,"style",n.getAttrib(d,"style"))),o.nodeChanged()},Le=dt=>{jt();const xt=n.getPos(dt,c),to=xt.x,ie=xt.y,ue=dt.getBoundingClientRect(),ze=ue.width||ue.right-ue.left,He=ue.height||ue.bottom-ue.top;d!==dt&&(Ye(),d=dt,D=P=0);const Ue=o.dispatch("ObjectSelected",{target:dt});pe(dt)&&!Ue.isDefaultPrevented()?Yo(Sl,(wt,zt)=>{let uo=n.get("mceResizeHandle"+zt);uo&&n.remove(uo),uo=n.add(c,"div",{id:"mceResizeHandle"+zt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+zt+"-resize; margin:0; padding:0"}),n.bind(uo,"mousedown",Wt=>{Wt.stopImmediatePropagation(),Wt.preventDefault(),(kn=>{const Tt=me(d)[0];var Eo;x=kn.screenX,C=kn.screenY,O=Tt.clientWidth,S=Tt.clientHeight,R=S/O,f=wt,f.name=zt,f.startPos={x:ze*wt[0]+to,y:He*wt[1]+ie},F=c.scrollWidth,q=c.scrollHeight,b=n.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(b,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),u=ne(Eo=d)?n.create("img",{src:Ht.transparentSrc}):Eo.cloneNode(!0),n.addClass(u,"mce-clonedresizable"),n.setAttrib(u,"data-mce-bogus","all"),u.contentEditable="false",n.setStyles(u,{left:to,top:ie,margin:0}),se(u,ze,He),u.removeAttribute(Xm),c.appendChild(u),n.bind(s,"mousemove",de),n.bind(s,"mouseup",ye),i!==s&&(n.bind(i,"mousemove",de),n.bind(i,"mouseup",ye)),p=n.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},O+" &times; "+S)})(Wt)}),wt.elm=uo,n.setStyles(uo,{left:ze*wt[0]+to-uo.offsetWidth/2,top:He*wt[1]+ie-uo.offsetHeight/2})}):Ye(!1)},rt=Qc(Le,0),Ye=(dt=!0)=>{rt.cancel(),jt(),d&&dt&&d.removeAttribute(Xm),Yo(Sl,(xt,to)=>{const ie=n.get("mceResizeHandle"+to);ie&&(n.unbind(ie),n.remove(ie))})},Mt=(dt,xt)=>n.isChildOf(dt,xt),kt=dt=>{if(T||o.removed||o.composing)return;const xt="mousedown"===dt.type?dt.target:t.getNode(),to=fl(re(xt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(ue=>ue.dom).filter(ue=>n.isEditable(ue.parentElement)||"IMG"===ue.nodeName&&n.isEditable(ue)).getOrUndefined(),ie=ee(to)?n.getAttrib(to,Xm,"1"):"1";if(Ee(n.select(`img[${Xm}],hr[${Xm}]`),ue=>{ue.removeAttribute(Xm)}),ee(to)&&Mt(to,c)&&o.hasFocus()){It();const ue=t.getStart(!0);if(Mt(ue,to)&&Mt(t.getEnd(!0),to))return n.setAttrib(to,Xm,ie),void rt.throttle(to)}Ye()},jt=()=>{Yo(Sl,dt=>{dt.elm&&(n.unbind(dt.elm),delete dt.elm)})},It=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return o.on("init",()=>{It(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",kt),o.on("keyup compositionend",dt=>{d&&"TABLE"===d.nodeName&&kt(dt)}),o.on("hide blur",Ye),o.on("contextmenu longpress",ce,!0)}),o.on("remove",jt),{isResizable:pe,showResizeRect:Le,hideResizeRect:Ye,updateResizeRect:kt,destroy:()=>{rt.cancel(),d=u=b=null}}},_T=(t,o,n)=>{const s=t.document.createRange();var i,c;return i=s,o.fold(c=>{i.setStartBefore(c.dom)},(c,d)=>{i.setStart(c.dom,d)},c=>{i.setStartAfter(c.dom)}),c=s,n.fold(u=>{c.setEndBefore(u.dom)},(u,p)=>{c.setEnd(u.dom,p)},u=>{c.setEndAfter(u.dom)}),s},Jm=(t,o,n,s,i)=>{const c=t.document.createRange();return c.setStart(o.dom,n),c.setEnd(s.dom,i),c},Ho=kc([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),T_=(t,o,n)=>o(re(n.startContainer),n.startOffset,re(n.endContainer),n.endOffset),Qv=(t,o,n,s)=>({start:t,soffset:o,finish:n,foffset:s}),CD=document.caretPositionFromPoint?(t,o,n)=>{var s,i;return H.from(null===(i=(s=t.dom).caretPositionFromPoint)||void 0===i?void 0:i.call(s,o,n)).bind(c=>{if(null===c.offsetNode)return H.none();const d=t.dom.createRange();return d.setStart(c.offsetNode,c.offset),d.collapse(),H.some(d)})}:document.caretRangeFromPoint?(t,o,n)=>{var s,i;return H.from(null===(i=(s=t.dom).caretRangeFromPoint)||void 0===i?void 0:i.call(s,o,n))}:H.none,Wu=kc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Bi={before:Wu.before,on:Wu.on,after:Wu.after,cata:(t,o,n,s)=>t.fold(o,n,s),getStart:t=>t.fold(un,un,un)},cf=kc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ep={domRange:cf.domRange,relative:cf.relative,exact:cf.exact,exactFromRange:t=>cf.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const o=t.match({domRange:s=>re(s.startContainer),relative:(s,i)=>Bi.getStart(s),exact:(s,i,c,d)=>s});return Vl(o)},range:Qv},Zv=(t,o)=>{const n=Po(t);return"input"===n?Bi.after(t):st(["br","img"],n)?0===o?Bi.before(t):Bi.after(t):Bi.on(t,o)},df=(t,o)=>{const n=t.fold(Bi.before,Zv,Bi.after),s=o.fold(Bi.before,Zv,Bi.after);return Ep.relative(n,s)},Qm=(t,o,n,s)=>{const i=Zv(t,o),c=Zv(n,s);return Ep.relative(i,c)},O_=(t,o)=>{const n=(o||document).createDocumentFragment();return Ee(t,s=>{n.appendChild(s.dom)}),re(n)},ST=(t,o,n)=>{return(s=Vl(re(n)).dom,i=t,c=o,((d,u,p)=>{const f=re(d.document);return CD(f,u,p).map(b=>Qv(re(b.startContainer),b.startOffset,re(b.endContainer),b.endOffset))})(s,i,c)).map(s=>{const i=n.createRange();return i.setStart(s.start.dom,s.soffset),i.setEnd(s.finish.dom,s.foffset),i}).getOrUndefined();var s,i,c},ey=(t,o)=>ee(t)&&ee(o)&&t.startContainer===o.startContainer&&t.startOffset===o.startOffset&&t.endContainer===o.endContainer&&t.endOffset===o.endOffset,kT=(t,o,n)=>null!==((s,i,c)=>{let d=s;for(;d&&d!==i;){if(c(d))return d;d=d.parentNode}return null})(t,o,n),ET=(t,o,n)=>kT(t,o,s=>s.nodeName===n),A_=(t,o)=>Mn(t)&&!kT(t,o,ui),ty=(t,o,n)=>{const s=o.parentNode;if(s){const i=new he(o,t.getParent(s,t.isBlock)||t.getRoot());let c;for(;c=i[n?"prev":"next"]();)if(Ft(c))return!0}return!1},uf=(t,o,n,s,i)=>{const c=t.getRoot(),d=t.schema.getNonEmptyElements(),u=i.parentNode;let p,f;if(!u)return H.none();const b=t.getParent(u,t.isBlock)||c;if(s&&Ft(i)&&o&&t.isEmpty(b))return H.some(Oe(u,t.nodeIndex(i)));const x=new he(i,b);for(;f=x[s?"prev":"next"]();){if("false"===t.getContentEditableParent(f)||A_(f,c))return H.none();if(Ae(f)&&f.data.length>0)return ET(f,c,"A")?H.none():H.some(Oe(f,s?f.data.length:0));if(t.isBlock(f)||d[f.nodeName.toLowerCase()])return H.none();p=f}return _e(p)?H.none():n&&p?H.some(Oe(p,0)):H.none()},N_=(t,o,n,s)=>{const i=t.getRoot();let c,d=!1,u=n?s.startContainer:s.endContainer,p=n?s.startOffset:s.endOffset;const f=Te(u)&&p===u.childNodes.length,b=t.schema.getNonEmptyElements();let x=n;if(Mn(u))return H.none();if(Te(u)&&p>u.childNodes.length-1&&(x=!1),Bo(u)&&(u=i,p=0),u===i){if(x&&(c=u.childNodes[p>0?p-1:0],c)&&(Mn(c)||b[c.nodeName]||yo(c)))return H.none();if(u.hasChildNodes()){if(p=Math.min(!x&&p>0?p-1:p,u.childNodes.length-1),u=u.childNodes[p],p=Ae(u)&&f?u.data.length:0,!o&&u===i.lastChild&&yo(u)||((C,O)=>{let S=O;for(;S&&S!==C;){if(zo(S))return!0;S=S.parentNode}return!1})(i,u)||Mn(u)||es(u))return H.none();if(u.hasChildNodes()&&!yo(u)){c=u;const C=new he(u,i);do{if(zo(c)||Mn(c)){d=!1;break}if(Ae(c)&&c.data.length>0){p=x?0:c.data.length,u=c,d=!0;break}if(b[c.nodeName.toLowerCase()]&&!rr(c)){p=t.nodeIndex(c),u=c.parentNode,x||p++,d=!0;break}}while(c=x?C.next():C.prev())}}}return o&&(Ae(u)&&0===p&&uf(t,f,o,!0,u).each(C=>{u=C.container(),p=C.offset(),d=!0}),Te(u)&&(c=u.childNodes[p],c||(c=u.childNodes[p-1]),!c||!Ft(c)||"A"===(null===(S=c.previousSibling)||void 0===S?void 0:S.nodeName)||ty(t,c,!1)||ty(t,c,!0)||uf(t,f,o,!0,c).each(C=>{u=C.container(),p=C.offset(),d=!0}))),x&&!o&&Ae(u)&&p===u.data.length&&uf(t,f,o,!1,u).each(C=>{u=C.container(),p=C.offset(),d=!0}),d&&u?H.some(Oe(u,p)):H.none();var S},mf=(t,o)=>{const n=o.collapsed,s=o.cloneRange(),i=Oe.fromRangeStart(o);return N_(t,n,!0,s).each(c=>{n&&Oe.isAbove(i,c)||s.setStart(c.container(),c.offset())}),n||N_(t,n,!1,s).each(c=>{s.setEnd(c.container(),c.offset())}),n&&s.collapse(!0),ey(o,s)?H.none():H.some(s)},gf=(t,o)=>t.splitText(o),Zm=t=>{let o=t.startContainer,n=t.startOffset,s=t.endContainer,i=t.endOffset;if(o===s&&Ae(o)){if(n>0&&n<o.data.length)if(s=gf(o,n),o=s.previousSibling,i>n){i-=n;const c=gf(s,i).previousSibling;o=s=c,i=c.data.length,n=0}else i=0}else if(Ae(o)&&n>0&&n<o.data.length&&(o=gf(o,n),n=0),Ae(s)&&i>0&&i<s.data.length){const c=gf(s,i).previousSibling;s=c,i=c.data.length}return{startContainer:o,startOffset:n,endContainer:s,endOffset:i}},qu=t=>({walk:(o,n)=>Sp(t,o,n),split:Zm,expand:(o,n={type:"word"})=>{if("word"===n.type){const s=ju(t,o,[{inline:"span"}]),i=t.createRng();return i.setStart(s.startContainer,s.startOffset),i.setEnd(s.endContainer,s.endOffset),i}return o},normalize:o=>mf(t,o).fold(wo,n=>(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),!0))});qu.compareRanges=ey,qu.getCaretRangeFromPoint=ST,qu.getSelectedNode=gp,qu.getNode=Bu;const TT=((t,o)=>{const n=i=>{const c=(d=>{const u=d.dom;return Xc(d)?u.getBoundingClientRect().height:u.offsetHeight})(i);if(c<=0||null===c){const d=As(i,t);return parseFloat(d)||0}return c},s=(i,c)=>Nn(c,(d,u)=>{const p=As(i,u),f=void 0===p?0:parseInt(p,10);return isNaN(f)?d:d+f},0);return{set:(i,c)=>{if(!rs(c)&&!c.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+c);const d=i.dom;ko(d)&&(d.style[t]=c+"px")},get:n,getOuter:n,aggregate:s,max:(i,c,d)=>{const u=s(i,d);return c>u?c-u:0}}})("height"),R_=()=>re(document),D_=(t,o)=>t.view(o).fold(Ve([]),n=>{const s=t.owner(n),i=D_(t,s);return[n].concat(i)});var OT=Object.freeze({__proto__:null,view:t=>{var o;return(t.dom===document?H.none():H.from(null===(o=t.dom.defaultView)||void 0===o?void 0:o.frameElement)).map(re)},owner:t=>ni(t)});const oy=t=>"textarea"===Po(t),AT=(t,o)=>{const n=(i=>{const c=i.dom.ownerDocument,d=c.body,u=c.defaultView,p=c.documentElement;if(d===i.dom)return Ko(d.offsetLeft,d.offsetTop);const f=Ct(u?.pageYOffset,p.scrollTop),b=Ct(u?.pageXOffset,p.scrollLeft),x=Ct(p.clientTop,d.clientTop),C=Ct(p.clientLeft,d.clientLeft);return je(i).translate(b-C,f-x)})(t),s=TT.get(t);return{element:t,bottom:n.top+s,height:s,pos:n,cleanup:o}},NT=(t,o,n,s)=>{DT(t,(i,c)=>RT(t,o,n,s),n)},pf=(t,o,n,s,i)=>{const c={elm:s.element.dom,alignToTop:i};t.dispatch("ScrollIntoView",c).isDefaultPrevented()||(n(t,o,Do(o).top,s,i),t.dispatch("AfterScrollIntoView",c))},RT=(t,o,n,s)=>{re(t.getBody());const c=re(t.getDoc()),d=((u,p)=>{const f=((x,C)=>{const O=pr(x);if(0===O.length||oy(x))return{element:x,offset:C};if(C<O.length&&!oy(O[C]))return{element:O[C],offset:0};{const S=O[O.length-1];return oy(S)?{element:x,offset:C}:"img"===Po(S)?{element:S,offset:1}:Go(S)?{element:S,offset:fe(S).length}:{element:S,offset:pr(S).length}}})(u,p),b=Vi('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return kr(f.element,b),AT(b,()=>le(b))})(re(n.startContainer),n.startOffset);pf(t,c,o,d,s),d.cleanup()},B_=(t,o,n,s)=>{const i=re(t.getDoc());pf(t,i,n,AT(re(o),Kt),s)},DT=(t,o,n)=>{const s=n.startContainer,i=n.startOffset,c=n.endContainer,d=n.endOffset;o(re(s),re(c));const u=t.dom.createRng();u.setStart(s,i),u.setEnd(c,d),t.selection.setRng(n)},M_=(t,o,n,s,i)=>{const c=o.pos;if(s)St(c.left,c.top,i);else{const d=c.top-n+o.height;St(-t.getBody().getBoundingClientRect().left,d,i)}},BT=(t,o,n,s,i,c)=>{const d=s+n,u=i.pos.top,p=i.bottom,f=p-u>=s;u<n?M_(t,i,s,!1!==c,o):u>d?M_(t,i,s,f?!1!==c:!0===c,o):p>d&&!f&&M_(t,i,s,!0===c,o)},MT=(t,o,n,s,i)=>{const c=Vl(o).dom.innerHeight;BT(t,o,n,c,s,i)},IT=(t,o,n,s,i)=>{const c=Vl(o).dom.innerHeight;BT(t,o,n,c,s,i);const d=(p=>{const f=R_(),b=Do(f),x=((S,R)=>{const T=R.owner(S);return D_(R,T)})(p,OT),C=je(p),O=Qs(x,(S,R)=>{const T=je(R);return{left:S.left+T.left,top:S.top+T.top}},{left:0,top:0});return Ko(O.left+C.left+b.left,O.top+C.top+b.top)})(s.element),u=w(window);d.top<u.y?mo(s.element,!1!==i):d.top>u.bottom&&mo(s.element,!0===i)},SD=(t,o,n)=>NT(t,MT,o,n),PT=(t,o,n)=>B_(t,o,MT,n),LT=(t,o,n)=>NT(t,IT,o,n),ny=(t,o,n)=>B_(t,o,IT,n),hf=(t,o,n)=>{(t.inline?SD:LT)(t,o,n)},ry=(t,o=!1)=>t.dom.focus({preventScroll:o}),FT=t=>{const o=hl(t).dom;return t.dom===o.activeElement},sy=(t=R_())=>H.from(t.dom.activeElement).map(re),I_=(t,o)=>{const n=Go(o)?fe(o).length:pr(o).length+1;return t>n?n:t<0?0:t},zT=t=>Ep.range(t.start,I_(t.soffset,t.start),t.finish,I_(t.foffset,t.finish)),HT=(t,o)=>!qe(o.dom)&&(Ui(t,o)||Qo(t,o)),VT=t=>o=>HT(t,o.start)&&HT(t,o.finish),ay=t=>Ep.range(re(t.startContainer),t.startOffset,re(t.endContainer),t.endOffset),UT=t=>{const o=document.createRange();try{return o.setStart(t.start.dom,t.soffset),o.setEnd(t.finish.dom,t.foffset),H.some(o)}catch{return H.none()}},iy=t=>{const o=t.inline||Ht.browser.isFirefox()?(n=re(t.getBody()),(s=>{const i=s.getSelection();return(i&&0!==i.rangeCount?H.from(i.getRangeAt(0)):H.none()).map(ay)})(Vl(n).dom).filter(VT(n))):H.none();var n;t.bookmark=o.isSome()?o:t.bookmark},ly=t=>(t.bookmark?t.bookmark:H.none()).bind(o=>{return n=re(t.getBody()),H.from(o).filter(VT(n)).map(zT);var n}).bind(UT),P_={isEditorUIElement:t=>{const o=t.className.toString();return-1!==o.indexOf("tox-")||-1!==o.indexOf("mce-")}},kl={setEditorTimeout:(t,o,n)=>{return rs(i=n)||(i=0),setTimeout(()=>{t.removed||o()},i);var i},setEditorInterval:(t,o,n)=>{const s=(rs(c=n)||(c=0),setInterval(()=>{t.removed?clearInterval(s):o()},c));var c;return s}};let Tp;const Op=Sn.DOM,cy=t=>{const o=t.classList;return void 0!==o&&(o.contains("tox-edit-area")||o.contains("tox-edit-area__iframe")||o.contains("mce-content-body"))},ff=(t,o)=>{const n=aD(t);return null!==Op.getParent(o,i=>{return Te(c=i)&&P_.isEditorUIElement(c)||!!n&&t.dom.is(i,n);var c})},L_=t=>{try{const o=hl(re(t.getElement()));return sy(o).fold(()=>document.body,n=>n.dom)}catch{return document.body}},kD=(t,o)=>{const n=o.editor;(i=>{const c=Qc(()=>{iy(i)},0);i.on("init",()=>{var d,f;i.inline&&((d,u)=>{const p=()=>{u.throttle()};Sn.DOM.bind(document,"mouseup",p),d.on("remove",()=>{Sn.DOM.unbind(document,"mouseup",p)})})(i,c),f=c,(d=i).on("mouseup touchend",b=>{f.throttle()}),d.on("keyup NodeChange AfterSetSelectionRange",p=>{(f=>"nodechange"===f.type&&f.selectionChange)(p)||iy(d)})}),i.on("remove",()=>{c.cancel()})})(n);const s=(i,c)=>{YE(i)&&!0!==i.inline&&c(re(i.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const i=t.focusedEditor;cy(L_(n))&&s(n,fs),i!==n&&(i&&i.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:i}),n.focus(!0))}),n.on("focusout",()=>{kl.setEditorTimeout(n,()=>{const i=t.focusedEditor;cy(L_(n))&&i===n||s(n,zl),ff(n,L_(n))||i!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Tp||(Tp=i=>{const c=t.activeEditor;c&&wu(i).each(d=>{d.ownerDocument===document&&(d===document.body||ff(c,d)||t.focusedEditor!==c||(c.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Op.bind(document,"focusin",Tp))},ED=(t,o)=>{t.focusedEditor===o.editor&&(t.focusedEditor=null),!t.activeEditor&&Tp&&(Op.unbind(document,"focusin",Tp),Tp=null)},jT=(t,o)=>{var n,s,i;(n=re(t.getBody()),s=o,(i=s,i.collapsed?H.from(Bu(i.startContainer,i.startOffset)).map(re):H.none()).bind(i=>Td(i)?H.some(i):Ui(n,i)?H.none():H.some(n))).bind(n=>js(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},F_=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},eg=t=>{return t.inline?(o=>{const n=o.getBody();return n&&(s=re(n),FT(s)||(i=s,sy(hl(i)).filter(c=>i.dom.contains(c.dom))).isSome());var s,i})(t):ee((o=t).iframeElement)&&FT(re(o.iframeElement));var o},z_=t=>eg(t)||(o=>{const n=hl(re(o.getElement()));return sy(n).filter(s=>!cy(s.dom)&&ff(o,s.dom)).isSome()})(t),H_=t=>t.editorManager.setActive(t),V_=(t,o)=>o.collapsed?t.isEditable(o.startContainer):t.isEditable(o.startContainer)&&t.isEditable(o.endContainer),U_=(t,o,n,s,i)=>{const d=n?o.startOffset:o.endOffset;return H.from(n?o.startContainer:o.endContainer).map(re).map(u=>s&&o.collapsed?u:gc(u,i(u,d)).getOr(u)).bind(u=>Ts(u)?H.some(u):Ma(u).filter(Ts)).map(u=>u.dom).getOr(t)},$T=(t,o,n=!1)=>U_(t,o,!0,n,(s,i)=>Math.min(pc(s),i)),WT=(t,o,n=!1)=>U_(t,o,!1,n,(s,i)=>i>0?i-1:i),qT=(t,o)=>{const n=t;for(;t&&Ae(t)&&0===t.length;)t=o?t.nextSibling:t.previousSibling;return t||n},j_=(t,o)=>qt(o,n=>{const s=t.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),TD=["img","br"],GT=t=>{return Dr(t).filter(n=>0!==n.trim().length||n.indexOf(Vn)>-1).isSome()||st(TD,Po(t))||Ra(n=t)&&"false"===Rr(n,"contenteditable");var n},KT="[data-mce-autocompleter]",YT=t=>Sr(t,KT),AD={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},dy=(t,o,n)=>{const s=n?"lastChild":"firstChild",i=n?"prev":"next";if(t[s])return t[s];if(t!==o){let c=t[i];if(c)return c;for(let d=t.parent;d&&d!==o;d=d.parent)if(c=d[i],c)return c}},ND=t=>{var o;const n=null!==(o=t.value)&&void 0!==o?o:"";if(!ku(n))return!1;const s=t.parent;return!s||"span"===s.name&&!s.attr("style")||!/^[ ]+$/.test(n)},XT=t=>{const o="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||o};class pt{static create(o,n){const s=new pt(o,AD[o]||1);return n&&Yo(n,(i,c)=>{s.attr(c,i)}),s}constructor(o,n){this.name=o,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(o){const n=this;return o.parent&&o.remove(),n.insert(o,n),n.remove(),n}attr(o,n){const s=this;if(!_t(o))return ee(o)&&Yo(o,(c,d)=>{s.attr(d,c)}),s;const i=s.attributes;if(i){if(void 0!==n){if(null===n){if(o in i.map){delete i.map[o];let c=i.length;for(;c--;)if(i[c].name===o)return i.splice(c,1),s}return s}if(o in i.map){let c=i.length;for(;c--;)if(i[c].name===o){i[c].value=n;break}}else i.push({name:o,value:n});return i.map[o]=n,s}return i.map[o]}}clone(){const o=this,n=new pt(o.name,o.type),s=o.attributes;if(s){const i=[];i.map={};for(let c=0,d=s.length;c<d;c++){const u=s[c];"id"!==u.name&&(i[i.length]={name:u.name,value:u.value},i.map[u.name]=u.value)}n.attributes=i}return n.value=o.value,n}wrap(o){const n=this;return n.parent&&(n.parent.insert(o,n),o.append(n)),n}unwrap(){const o=this;for(let n=o.firstChild;n;){const s=n.next;o.insert(n,o,!0),n=s}o.remove()}remove(){const o=this,n=o.parent,s=o.next,i=o.prev;return n&&(n.firstChild===o?(n.firstChild=s,s&&(s.prev=null)):i&&(i.next=s),n.lastChild===o?(n.lastChild=i,i&&(i.next=null)):s&&(s.prev=i),o.parent=o.next=o.prev=null),o}append(o){const n=this;o.parent&&o.remove();const s=n.lastChild;return s?(s.next=o,o.prev=s,n.lastChild=o):n.lastChild=n.firstChild=o,o.parent=n,o}insert(o,n,s){o.parent&&o.remove();const i=n.parent||this;return s?(n===i.firstChild?i.firstChild=o:n.prev&&(n.prev.next=o),o.prev=n.prev,o.next=n,n.prev=o):(n===i.lastChild?i.lastChild=o:n.next&&(n.next.prev=o),o.next=n.next,o.prev=n,n.next=o),o.parent=i,o}getAll(o){const n=this,s=[];for(let i=n.firstChild;i;i=dy(i,n))i.name===o&&s.push(i);return s}children(){const o=[];for(let n=this.firstChild;n;n=n.next)o.push(n);return o}empty(){const o=this;if(o.firstChild){const n=[];for(let i=o.firstChild;i;i=dy(i,o))n.push(i);let s=n.length;for(;s--;){const i=n[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return o.firstChild=o.lastChild=null,o}isEmpty(o,n={},s){var i;const c=this;let d=c.firstChild;if(XT(c))return!1;if(d)do{if(1===d.type){if(d.attr("data-mce-bogus"))continue;if(o[d.name]||XT(d))return!1}if(8===d.type||3===d.type&&!ND(d)||3===d.type&&d.parent&&n[d.parent.name]&&ku(null!==(i=d.value)&&void 0!==i?i:"")||s&&s(d))return!1}while(d=dy(d,c));return!0}walk(o){return dy(this,null,o)}}const JT=$e.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),$_=t=>_t(t.nodeValue)&&t.nodeValue.includes(Er),QT=t=>(0===t.length?"":`${qt(t,o=>`[${o}]`).join(",")},`)+'[data-mce-bogus="all"]',uy=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,o=>$_(o)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ZT=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,o=>{if($_(o)){const n=o.parentNode;return n&&Gt(JT,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),my=t=>null!==uy(t).nextNode(),eO=t=>null!==ZT(t).nextNode(),RD=(t,o)=>null!==o.querySelector(QT(t)),so=(t,o)=>{Ee(o.querySelectorAll(QT(t)),n=>{const s=re(n);"all"===Rr(s,"data-mce-bogus")?le(s):Ee(t,i=>{gl(s,i)&&Cr(s,i)})})},go=t=>{let o=t.nextNode();for(;null!==o;)o.nodeValue=null,o=t.nextNode()},tO=lr(go,uy),DD=lr(go,ZT),oO=(t,o)=>{const n=[{condition:it(RD,o),action:it(so,o)},{condition:my,action:tO},{condition:eO,action:DD}];let s=t,i=!1;return Ee(n,({condition:c,action:d})=>{c(s)&&(i||(s=t.cloneNode(!0),i=!0),d(s))}),s},nO=t=>{const o=J(t,"[data-mce-bogus]");Ee(o,n=>{"all"===Rr(n,"data-mce-bogus")?le(n):oa(n)?(kr(n,Ba("\ufeff")),le(n)):be(n)})},$t=t=>{const o=J(t,"input");Ee(o,n=>{Cr(n,"name")})},W_=$e.makeMap,q_=t=>{const o=[],n=(t=t||{}).indent,s=W_(t.indent_before||""),i=W_(t.indent_after||""),c=si.getEncodeFunc(t.entity_encoding||"raw",t.entities),d="xhtml"!==t.element_format;return{start:(u,p,f)=>{if(n&&s[u]&&o.length>0){const b=o[o.length-1];b.length>0&&"\n"!==b&&o.push("\n")}if(o.push("<",u),p)for(let b=0,x=p.length;b<x;b++){const C=p[b];o.push(" ",C.name,'="',c(C.value,!0),'"')}if(o[o.length]=!f||d?">":" />",f&&n&&i[u]&&o.length>0){const b=o[o.length-1];b.length>0&&"\n"!==b&&o.push("\n")}},end:u=>{let p;o.push("</",u,">"),n&&i[u]&&o.length>0&&(p=o[o.length-1],p.length>0&&"\n"!==p&&o.push("\n"))},text:(u,p)=>{u.length>0&&(o[o.length]=p?u:c(u))},cdata:u=>{o.push("<![CDATA[",u,"]]>")},comment:u=>{o.push("\x3c!--",u,"--\x3e")},pi:(u,p)=>{p?o.push("<?",u," ",c(p),"?>"):o.push("<?",u,"?>"),n&&o.push("\n")},doctype:u=>{o.push("<!DOCTYPE",u,">",n?"\n":"")},reset:()=>{o.length=0},getContent:()=>o.join("").replace(/\n$/,"")}},Gu=(t={},o=Au())=>{const n=q_(t);return t.validate=!("validate"in t)||t.validate,{serialize:s=>{const i=t.validate,c={3:u=>{var p;n.text(null!==(p=u.value)&&void 0!==p?p:"",u.raw)},8:u=>{var p;n.comment(null!==(p=u.value)&&void 0!==p?p:"")},7:u=>{n.pi(u.name,u.value)},10:u=>{var p;n.doctype(null!==(p=u.value)&&void 0!==p?p:"")},4:u=>{var p;n.cdata(null!==(p=u.value)&&void 0!==p?p:"")},11:u=>{let p=u;if(p=p.firstChild)do{d(p)}while(p=p.next)}};n.reset();const d=u=>{var p;const f=c[u.type];if(f)f(u);else{const b=u.name,x=b in o.getVoidElements();let C=u.attributes;if(i&&C&&C.length>1){const O=[];O.map={};const S=o.getElementRule(u.name);if(S){for(let R=0,T=S.attributesOrder.length;R<T;R++){const D=S.attributesOrder[R];if(D in C.map){const P=C.map[D];O.map[D]=P,O.push({name:D,value:P})}}for(let R=0,T=C.length;R<T;R++){const D=C[R].name;if(!(D in O.map)){const P=C.map[D];O.map[D]=P,O.push({name:D,value:P})}}C=O}}if(n.start(b,C,x),Om(b))_t(u.value)&&n.text(u.value,!0),n.end(b);else if(!x){let O=u.firstChild;if(O){"pre"!==b&&"textarea"!==b||3!==O.type||"\n"!==(null===(p=O.value)||void 0===p?void 0:p[0])||n.text("\n",!0);do{d(O)}while(O=O.next)}n.end(b)}}};return 1!==s.type||t.inner?3===s.type?c[3](s):c[11](s):d(s),n.getContent()}}},rO=new Set;Ee(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{rO.add(t)});const G_=["font","text-decoration","text-emphasis"],K_=(t,o)=>as(t.parseStyle(t.getAttrib(o,"style"))),Co=(t,o,n)=>{const s=K_(t,o),i=K_(t,n),c=d=>{var u,p;const f=null!==(u=t.getStyle(o,d))&&void 0!==u?u:"",b=null!==(p=t.getStyle(n,d))&&void 0!==p?p:"";return To(f)&&To(b)&&f!==b};return Wo(s,d=>{const u=p=>Wo(p,f=>f===d);if(!u(i)&&u(G_)){const p=ft(i,f=>Wo(G_,b=>tt(f,b)));return Wo(p,c)}return c(d)})},Y_=(t,o,n)=>H.from(n.container()).filter(Ae).exists(s=>{const i=t?0:-1;return o(s.data.charAt(n.offset()+i))}),Ap=it(Y_,!0,Vu),gy=it(Y_,!1,Vu),sO=t=>{const o=t.container();return Ae(o)&&(0===o.data.length||Cu(o.data)&&Qi.isBookmarkNode(o.parentNode))},zd=(t,o)=>n=>jo(t?0:-1,n).filter(o).isSome(),X_=t=>hn(t)&&"block"===As(re(t),"display"),J_=t=>{return zo(t)&&!(Te(o=t)&&"all"===o.getAttribute("data-mce-bogus"));var o},aO=zd(!0,X_),BD=zd(!1,X_),vf=zd(!0,fo),yf=zd(!1,fo),iO=zd(!0,yo),lO=zd(!1,yo),ad=zd(!0,J_),id=zd(!1,J_),cO=(t,o)=>{return i=wo,Ui(s=o,n=t)?bu(n,c=>i(c)||Qo(c,s)).slice(0,-1):[];var n,s,i},Hd=(t,o)=>[t].concat(cO(t,o)),Q_=(t,o,n)=>g_(t,o,n,sO),dO=(t,o,n)=>{return yn(Hd(re(o.container()),t),(s=n,i=>s.isBlock(Po(i))));var s},Z_=(t,o,n,s)=>Q_(t,o.dom,n).forall(i=>dO(o,n,s).fold(()=>!od(i,n,o.dom),c=>!od(i,n,o.dom)&&Ui(c,re(i.container())))),Ku=(t,o,n,s)=>dO(o,n,s).fold(()=>Q_(t,o.dom,n).forall(i=>!od(i,n,o.dom)),i=>Q_(t,i.dom,n).isNone()),py=it(Ku,!1),eC=it(Ku,!0),MD=it(Z_,!1),ID=it(Z_,!0),uO=t=>Kh(t).exists(oa),xf=(t,o,n,s)=>{const i=ft(Hd(re(n.container()),o),d=>s.isBlock(Po(d))),c=gn(i).getOr(o);return li(t,c.dom,n).filter(uO)},pa=(t,o,n)=>Kh(o).exists(oa)||xf(!0,t,o,n).isSome(),tC=(t,o,n)=>{return(s=o,H.from(s.getNode(!0)).map(re)).exists(oa)||xf(!1,t,o,n).isSome();var s},tg=it(xf,!1),Zn=it(xf,!0),wf=t=>Oe.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Bs=(t,o,n)=>{const s=ft(Hd(re(o.container()),t),i=>n.isBlock(Po(i)));return gn(s).getOr(t)},ld=(t,o,n)=>wf(o)?gy(o):gy(o)||di(Bs(t,o,n).dom,o).exists(gy),dn=(t,o,n)=>wf(o)?Ap(o):Ap(o)||ci(Bs(t,o,n).dom,o).exists(Ap),hy=t=>Kh(t).bind(o=>hr(o,Ts)).exists(o=>{return n=As(o,"white-space"),st(["pre","pre-wrap"],n);var n}),oC=(t,o)=>n=>{return s=new he(n,t)[o](),ee(s)&&zo(s)&&a_(s);var s},mO=(t,o,n)=>{return!hy(o)&&(c=n,di((s=t).dom,i=o).isNone()||ci(s.dom,i).isNone()||py(s,i,c)||eC(s,i,c)||tC(s,i,c)||pa(s,i,c)||ld(t,o,n)||dn(t,o,n));var s,i,c},_f=(t,o,n)=>!hy(o)&&(py(t,o,n)||MD(t,o,n)||tC(t,o,n)||ld(t,o,n)||((s,i)=>{const c=di(s.dom,i).getOr(i),d=oC(s.dom,"prev");return i.isAtStart()&&(d(i.container())||d(c.container()))})(t,o)),Cf=(t,o,n)=>!hy(o)&&(eC(t,o,n)||ID(t,o,n)||pa(t,o,n)||dn(t,o,n)||((s,i)=>{const c=ci(s.dom,i).getOr(i),d=oC(s.dom,"next");return i.isAtEnd()&&(d(i.container())||d(c.container()))})(t,o)),qa=(t,o,n)=>_f(t,o,n)||Cf(t,(s=>{const i=s.container(),c=s.offset();return Ae(i)&&c<i.data.length?Oe(i,c+1):s})(o),n),Xl=(t,o)=>mi(t.charAt(o)),gO=(t,o)=>Vu(t.charAt(o)),fy=(t,o,n,s)=>{const i=o.data,c=Oe(o,0);return n||!Xl(i,0)||qa(t,c,s)?!!(n&&gO(i,0)&&_f(t,c,s))&&(o.data=Vn+i.slice(1),!0):(o.data=" "+i.slice(1),!0)},by=(t,o,n,s)=>{const i=o.data,c=Oe(o,i.length-1);return n||!Xl(i,i.length-1)||qa(t,c,s)?!!(n&&gO(i,i.length-1)&&Cf(t,c,s))&&(o.data=i.slice(0,-1)+Vn,!0):(o.data=i.slice(0,-1)+" ",!0)},pO=(t,o,n,s)=>{if(0===n)return;const i=re(t),c=Hn(i,f=>s.isBlock(Po(f))).getOr(i),d=t.data.slice(o,o+n),u=o+n>=t.data.length&&Cf(c,Oe(t,t.data.length),s),p=0===o&&_f(c,Oe(t,0),s);t.replaceData(o,n,Rd(d,4,p,u))},Yu=(t,o,n)=>{const s=t.data.slice(o),i=s.length-ho(s).length;pO(t,o,i,n)},Np=(t,o,n)=>{const s=t.data.slice(0,o),i=s.length-Io(s).length;pO(t,o-i,i,n)},Sf=(t,o,n,s,i=!0)=>{const c=Io(t.data).length,d=i?t:o,u=i?o:t;return i?d.appendData(u.data):d.insertData(0,u.data),le(re(u)),s&&Yu(d,c,n),d},LD=(t,o)=>((n,s)=>{const i=n.container(),c=n.offset();return!Oe.isTextPosition(n)&&i===s.parentNode&&c>Oe.before(s).offset()})(o,t)?Oe(o.container(),o.offset()-1):o,Jl=t=>{return Ca(t.previousSibling)?H.some(Ae(o=t.previousSibling)?Oe(o,o.data.length):Oe.after(o)):t.previousSibling?Di(t.previousSibling):H.none();var o},hO=t=>{return Ca(t.nextSibling)?H.some(Ae(o=t.nextSibling)?Oe(o,0):Oe.before(o)):t.nextSibling?js(t.nextSibling):H.none();var o},Zi=(t,o,n)=>{n.fold(()=>{t.focus()},s=>{t.selection.setRng(s.toRange(),o)})},kf=(t,o)=>o&&Gt(t.schema.getBlockElements(),Po(o)),Xu=(t,o,n,s=!0,i=!1)=>{const c=((t,o,n)=>{return(s=t,i=o,c=n,s?(d=i,hO(u=c).orThunk(()=>Jl(u)).orThunk(()=>{return ci(p=d,Oe.after(f=u)).orThunk(()=>di(p,Oe.before(f)));var p,f})):((d,u)=>Jl(u).orThunk(()=>hO(u)).orThunk(()=>{return p=d,H.from((f=u).previousSibling?f.previousSibling:f.parentNode).bind(b=>di(p,Oe.before(b))).orThunk(()=>ci(p,Oe.after(f)));var p,f}))(i,c)).map(it(LD,n));var s,i,c,d,u})(o,t.getBody(),n.dom),d=Hn(n,it(kf,t),(u=t.getBody(),f=>f.dom===u));var u;const p=((f,b,x,C)=>{const O=ta(f).filter(Go),S=Kc(f).filter(Go);return le(f),(R=O,T=S,D=b,P=(F,q,$)=>{const ne=F.dom,ce=q.dom,me=ne.data.length;return Sf(ne,ce,x,C),$.container()===ce?Oe(ne,me):$},R.isSome()&&T.isSome()&&D.isSome()?H.some(P(R.getOrDie(),T.getOrDie(),D.getOrDie())):H.none()).orThunk(()=>(C&&(O.each(F=>Np(F.dom,F.dom.length,x)),S.each(F=>Yu(F.dom,0,x))),b));var R,T,D,P})(n,c,t.schema,(b=n,Gt(t.schema.getTextInlineElements(),Po(b))));var b;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):d.bind(f=>((b,x)=>{if(br(b)){const C=Vi('<br data-mce-bogus="1">');return x?Ee(pr(b),O=>{__(O)||le(O)}):X(b),I(b,C),H.some(Oe.before(C.dom))}return H.none()})(f,i)).fold(()=>{s&&Zi(t,o,p)},f=>{s&&Zi(t,o,H.some(f))})},Ql=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,tn=(t,o)=>ea(re(o),Ov(t))&&!Eu(t.schema,o)&&t.dom.isEditable(o),og=t=>{var o,n;return"rtl"===Sn.DOM.getStyle(t,"direction",!0)||(n=null!==(o=t.textContent)&&void 0!==o?o:"",Ql.test(n))},Ac=(t,o,n)=>{const s=(i=t,c=o,ft(Sn.DOM.getParents(n.container(),"*",c),i));var i,c;return H.from(s[s.length-1])},el=(t,o)=>{const n=o.container(),s=o.offset();return t?_a(n)?Ae(n.nextSibling)?Oe(n.nextSibling,0):Oe.after(n):bc(o)?Oe(n,s+1):o:_a(n)?Ae(n.previousSibling)?Oe(n.previousSibling,n.previousSibling.data.length):Oe.before(n):$l(o)?Oe(n,s-1):o},vy=it(el,!0),yy=it(el,!1),fO=(t,o)=>{const n=s=>s.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(o),t.off("beforeinput input",n)},Ef=t=>fO(t,"Delete"),zD=t=>qi(t)||Qn(t),Tf=(t,o)=>{return Ui(t,o)?hr(o,zD,(n=t,s=>oi(Ma(s),n,Qo))):H.none();var n},xy=(t,o=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!o})},wy=(t,o,n)=>mr(js(n),Di(n),(s,i)=>{const c=el(!0,s),d=el(!1,i),u=el(!1,o);return t?ci(n,u).exists(p=>p.isEqual(d)&&o.isEqual(c)):di(n,u).exists(p=>p.isEqual(c)&&o.isEqual(d))}).getOr(!0),nC=t=>{var o;return(8===hu(o=t)||"#comment"===Po(o)?ta(t):Os(t)).bind(nC).orThunk(()=>H.some(t))},Of=(t,o,n,s=!0)=>{var i;o.deleteContents();const c=nC(n).getOr(n),d=re(null!==(i=t.dom.getParent(c.dom,t.dom.isBlock))&&void 0!==i?i:n.dom);if(d.dom===t.getBody()?xy(t,s):br(d)&&(Fa(d),s&&t.selection.setCursorLocation(d.dom,0)),!Qo(n,d)){const p=oi(Ma(d),n)?[]:Ma(u=d).map(pr).map(f=>ft(f,b=>!Qo(u,b))).getOr([]);Ee(p.concat(pr(n)),f=>{Qo(f,d)||Ui(f,d)||!br(f)||le(f)})}var u},bO=(t,o)=>Ul(t,o).isSome(),rC=t=>J(t,"td,th"),vO=(t,o)=>qm(re(t),o),sC=(t,o)=>({start:t,end:o}),Rp=kc([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),_y=(t,o)=>fl(re(t),"td,th",o),yO=t=>!Qo(t.start,t.end),aC=(t,o)=>qm(t.start,o).bind(n=>qm(t.end,o).bind(s=>Jn(Qo(n,s),n))),Cy=t=>o=>aC(o,t).map(n=>({rng:o,table:n,cells:rC(n)})),xO=(t,o,n,s)=>{if(n.collapsed||!t.forall(yO))return H.none();if(o.isSameTable){const i=t.bind(Cy(s));return H.some({start:i,end:i})}{const i=_y(n.startContainer,s),c=_y(n.endContainer,s),d=i.bind((p=s,f=>qm(f,p).bind(b=>pn(rC(b)).map(x=>sC(f,x))))).bind(Cy(s)),u=c.bind((p=>f=>qm(f,p).bind(b=>gn(rC(b)).map(x=>sC(x,f))))(s)).bind(Cy(s));return H.some({start:d,end:u})}var p},wO=(t,o)=>la(t,n=>Qo(n,o)),Sy=t=>mr(wO(t.cells,t.rng.start),wO(t.cells,t.rng.end),(o,n)=>t.cells.slice(o,n+1)),Mi=(t,o)=>{const{startTable:n,endTable:s}=o,i=t.cloneRange();return n.each(c=>i.setStartAfter(c.dom)),s.each(c=>i.setEndBefore(c.dom)),i},iC=t=>Ee(t,o=>{Cr(o,"contenteditable"),Fa(o)}),Af=(t,o,n,s)=>{const i=n.cloneRange();s?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(o.dom.lastChild)):(i.setStartBefore(o.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),Nf(t,i,o,!1).each(c=>c())},ky=t=>{const o=xp(t),n=re(t.selection.getNode());Ia(n.dom)&&br(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),o.length>1&&Wo(o,s=>Qo(s,n))&&ln(n,"data-mce-selected","1")},lC=(t,o,n)=>H.some(()=>{const s=t.selection.getRng(),i=n.bind(({rng:c,isStartInTable:d})=>{const u=H.from((f=t).dom.getParent(d?c.endContainer:c.startContainer,f.dom.isBlock)).map(re);var f;c.deleteContents(),((f,b,x)=>{x.each(C=>{b?le(C):(Fa(C),f.selection.setCursorLocation(C.dom,0))})})(t,d,u.filter(br));const p=d?o[0]:o[o.length-1];return Af(t,p,s,d),br(p)?H.none():H.some(d?o.slice(1):o.slice(0,-1))}).getOr(o);iC(i),ky(t)}),_O=(t,o,n,s)=>H.some(()=>{const i=t.selection.getRng(),c=o[0],d=n[n.length-1];Af(t,c,i,!0),Af(t,d,i,!1);const u=br(c)?o:o.slice(1),p=br(d)?n:n.slice(0,-1);iC(u.concat(p)),s.deleteContents(),ky(t)}),Nf=(t,o,n,s=!0)=>H.some(()=>{Of(t,o,n,s)}),CO=(t,o)=>H.some(()=>Xu(t,!1,o)),El=(t,o)=>yn(Hd(o,t),Od),cC=(t,o)=>yn(Hd(o,t),ml("caption")),Dp=(t,o)=>H.some(()=>{Fa(o),t.selection.setCursorLocation(o.dom,0)}),tl=(t,o)=>t?iO(o):lO(o),Ju=(t,o)=>{const n=re(t.selection.getStart(!0)),s=xp(t);return t.selection.isCollapsed()&&0===s.length?((t,o,n)=>{const s=re(t.getBody());return cC(s,n).fold(()=>((i,c,d,u)=>{const p=Oe.fromRangeStart(i.selection.getRng());return El(d,u).bind(f=>{return br(f)?Dp(i,f):(x=d,O=f,S=p,Hu(c,i.getBody(),S).bind(R=>El(x,re(R.getNode())).bind(T=>Qo(T,O)?H.none():H.some(Kt))));var x,O,S})})(t,o,s,n).orThunk(()=>Jn(((i,c)=>{const d=Oe.fromRangeStart(i.selection.getRng());return tl(c,d)||li(c,i.getBody(),d).exists(u=>tl(c,u))})(t,o),Kt)),i=>((c,d,u,p)=>{const f=Oe.fromRangeStart(c.selection.getRng());return br(p)?Dp(c,p):(x=u,O=p,S=f,Hu(C=d,(b=c).getBody(),S).fold(()=>H.some(Kt),R=>{return D=C,P=S,F=R,js((T=O).dom).bind(q=>Di(T.dom).map($=>D?P.isEqual(q)&&F.isEqual($):P.isEqual($)&&F.isEqual(q))).getOr(!0)?((T,D)=>Dp(T,D))(b,O):((T,D,P)=>cC(T,re(P.getNode())).fold(()=>H.some(Kt),F=>Jn(!Qo(F,D),Kt)))(x,O,R);var T,D,P,F}));var b,x,C,O,S})(t,o,s,i))})(t,o,n):((i,c,d)=>{const u=re(i.getBody()),p=i.selection.getRng();return 0!==d.length?lC(i,d,H.none()):(f=i,x=p,cC(b=u,c).fold(()=>{return O=f,((t,o)=>{const n=(c=t,d=>Qo(c,d)),s=((c,d)=>{const u=_y(c.startContainer,d),p=_y(c.endContainer,d);return mr(u,p,sC)})(o,n),i=((c,d)=>{const u=vO(c.startContainer,d),p=vO(c.endContainer,d),f=u.isSome(),b=p.isSome(),x=mr(u,p,Qo).getOr(!1);return mr((C={startTable:u,endTable:p,isStartInTable:f,isEndInTable:b,isSameTable:x,isMultiTable:!x&&f&&b}).startTable,C.endTable,(O,S)=>{const R=bO(O,D=>Qo(D,S)),T=bO(S,D=>Qo(D,O));return R||T?{...C,startTable:R?H.none():C.startTable,endTable:T?H.none():C.endTable,isSameTable:!1,isMultiTable:!1}:C}).getOr(C);var C})(o,n);var c;return((c,d,u)=>c.exists(p=>{return b=u,!yO(f=p)&&aC(f,b).exists(x=>{const C=x.dom.rows;return 1===C.length&&1===C[0].cells.length})&&ef(p.start,d);var f,b}))(s,o,n)?s.map(c=>Rp.singleCellTable(o,c.start)):i.isMultiTable?((c,d,u,p)=>xO(c,d,u,p).bind(({start:f,end:b})=>{const x=f.bind(Sy).getOr([]),C=b.bind(Sy).getOr([]);if(x.length>0&&C.length>0){const O=Mi(u,d);return H.some(Rp.multiTable(x,C,O))}return H.none()}))(s,i,o,n):((c,d,u,p)=>xO(c,d,u,p).bind(({start:f,end:b})=>f.or(b)).bind(f=>{const{isSameTable:b}=d,x=Sy(f).getOr([]);if(b&&f.cells.length===x.length)return H.some(Rp.fullTable(f.table));if(x.length>0){if(b)return H.some(Rp.partialTable(x,H.none()));{const C=Mi(u,d);return H.some(Rp.partialTable(x,H.some({...d,rng:C})))}}return H.none()}))(s,i,o,n)})(b,x).bind(T=>T.fold(it(Nf,O),it(CO,O),it(lC,O),it(_O,O)));var O},O=>Dp(f,O)));var f,b,x})(t,n,s)},ng=(t,o)=>{let n=o;for(;n&&n!==t;){if(on(n)||zo(n))return n;n=n.parentNode}return null},Bp=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],wn=$e.each,rg=t=>{const o=t.dom,n=new Set(t.serializer.getTempAttrs()),s=i=>Wo(Bp,c=>tt(i,c))||n.has(i);return{compare:(i,c)=>{if(i.nodeName!==c.nodeName||i.nodeType!==c.nodeType)return!1;const d=p=>{const f={};return wn(o.getAttribs(p),b=>{const x=b.nodeName.toLowerCase();"style"===x||s(x)||(f[x]=o.getAttrib(p,x))}),f},u=(p,f)=>{for(const b in p)if(Gt(p,b)){const x=f[b];if(et(x)||p[b]!==x)return!1;delete f[b]}for(const b in f)if(Gt(f,b))return!1;return!0};return!(Te(i)&&Te(c)&&(!u(d(i),d(c))||!u(o.parseStyle(o.getAttrib(i,"style")),o.parseStyle(o.getAttrib(c,"style"))))||ls(i)||ls(c))},isAttributeInternal:s}},dC=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),uC=(t,o,n,s)=>{const i=n.name;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.name===i){const p=s.nodes[i];p?p.nodes.push(n):s.nodes[i]={filter:u,nodes:[n]}}}if(n.attributes)for(let c=0,d=o.length;c<d;c++){const u=o[c],p=u.name;if(p in n.attributes.map){const f=s.attributes[p];f?f.nodes.push(n):s.attributes[p]={filter:u,nodes:[n]}}}},Ey=(t,o)=>{const n=(s,i)=>{Yo(s,c=>{const d=dr(c.nodes);Ee(c.filter.callbacks,u=>{for(let p=d.length-1;p>=0;p--){const f=d[p];(i?void 0!==f.attr(c.filter.name):f.name===c.filter.name)&&!An(f.parent)||d.splice(p,1)}d.length>0&&u(d,c.filter.name,o)})})};n(t.nodes,!1),n(t.attributes,!0)},Ty=(t,o,n,s={})=>{const i=((c,d,u)=>{const p={nodes:{},attributes:{}};return u.firstChild&&((f,b)=>{let x=f;for(;x=x.walk();)uC(c,d,x,p)})(u),p})(t,o,n);Ey(i,s)},Df=(t,o,n,s)=>{if((t.pad_empty_with_br||o.insert)&&n(s)){const i=new pt("br",1);o.insert&&i.attr("data-mce-bogus","1"),s.empty().append(i)}else s.empty().append(new pt("#text",3)).value=Vn},Oy=(t,o)=>{const n=t?.firstChild;return ee(n)&&n===t.lastChild&&n.name===o},Qu=(t,o,n,s)=>s.isEmpty(o,n,i=>!0===t.getElementRule(i.name)?.paddEmpty),mC=t=>{let o;for(let n=t;n;n=n.parent){const s=n.attr("contenteditable");if("false"===s)break;"true"===s&&(o=n)}return H.from(o)},Ay=(t,o,n=t.parent)=>{if(o.getSpecialElements()[t.name])t.empty().remove();else{const s=t.children();for(const i of s)n&&!o.isValidChild(n.name,i.name)&&Ay(i,o,n);t.unwrap()}},Ny=(t,o,n,s=Kt)=>{const i=o.getTextBlockElements(),c=o.getNonEmptyElements(),d=o.getWhitespaceElements(),u=$e.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),p=new Set,f=b=>b!==n&&!u[b.name];for(let b=0;b<t.length;b++){const x=t[b];let C,O,S;if(!x.parent||p.has(x))continue;if(i[x.name]&&"li"===x.parent.name){let T=x.next;for(;T&&i[T.name];)T.name="li",p.add(T),x.parent.insert(T,x.parent),T=T.next;x.unwrap();continue}const R=[x];for(C=x.parent;C&&!o.isValidChild(C.name,x.name)&&f(C);C=C.parent)R.push(C);if(C&&R.length>1)if(Ry(o,x,C))Ay(x,o);else{R.reverse(),O=R[0].clone(),s(O);let T=O;for(let D=0;D<R.length-1;D++){o.isValidChild(T.name,R[D].name)&&D>0?(S=R[D].clone(),s(S),T.append(S)):S=T;for(let P=R[D].firstChild;P&&P!==R[D+1];){const F=P.next;S.append(P),P=F}T=S}Qu(o,c,d,O)?C.insert(x,R[0],!0):(C.insert(O,R[0],!0),C.insert(x,O)),C=R[0],(Qu(o,c,d,C)||Oy(C,"br"))&&C.empty().remove()}else if(x.parent){if("li"===x.name){let T=x.prev;if(T&&("ul"===T.name||"ol"===T.name)){T.append(x);continue}if(T=x.next,T&&("ul"===T.name||"ol"===T.name)&&T.firstChild){T.insert(x,T.firstChild,!0);continue}const D=new pt("ul",1);s(D),x.wrap(D);continue}if(o.isValidChild(x.parent.name,"div")&&o.isValidChild("div",x.name)){const T=new pt("div",1);s(T),x.wrap(T)}else Ay(x,o)}}},Ry=(t,o,n=o.parent)=>{return!(!n||(!t.children[o.name]||t.isValidChild(n.name,o.name))&&("a"!==o.name||!((s,i)=>{let c=s;for(;c;){if("a"===c.name)return!0;c=c.parent}return!1})(n))&&(s=n,"summary"!==s.name||!dC(o)||n?.firstChild===o&&n?.lastChild===o));var s},Dy=t=>t.collapsed?t:(o=>{const n=Oe.fromRangeStart(o),s=Oe.fromRangeEnd(o),i=o.commonAncestorContainer;return li(!1,i,s).map(c=>!od(n,s,i)&&od(n,c,i)?((d,u,p,f)=>{const b=document.createRange();return b.setStart(d,u),b.setEnd(p,f),b})(n.container(),n.offset(),c.container(),c.offset()):o).getOr(o)})(t),By=(t,o)=>{const n=t.getParent(o,t.isBlock);return n&&"LI"===n.nodeName?n:null},My=(t,o)=>{const n=Oe.after(t),s=ar(o).prev(n);return s?s.toRange():null},jD=["pre"],Iy=Ia,kO=(t,o,n)=>{var s,i;const c=t.selection,d=t.dom,u=t.parser,p=n.merge,f=Gu({validate:!0},t.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(o=wa(o)),-1===o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,b);let x=c.getRng();const C=x.startContainer,O=t.getBody();var F,q;C===O&&c.isCollapsed()&&d.isBlock(O.firstChild)&&(F=t,ee(q=O.firstChild)&&!F.schema.getVoidElements()[q.nodeName])&&d.isEmpty(O.firstChild)&&(x=d.createRng(),x.setStart(O.firstChild,0),x.setEnd(O.firstChild,0),c.setRng(x)),c.isCollapsed()||(F=>{const q=F.dom,$=Dy(F.selection.getRng());F.selection.setRng($);const ne=q.getParent($.startContainer,Iy);var ce,me,pe;ce=q,me=$,ee(pe=ne)&&pe===ce.getParent(me.endContainer,Iy)&&ef(re(pe),me)?Nf(F,$,re(ne)):$.startContainer===$.endContainer&&$.endOffset-$.startOffset==1&&Ae($.startContainer.childNodes[$.startOffset])?$.deleteContents():F.getDoc().execCommand("Delete",!1)})(t);const S=c.getNode(),R={context:S.nodeName.toLowerCase(),data:n.data,insert:!0},T=u.parse(o,R);if(!0===n.paste&&((t,o)=>{let n=o.firstChild,s=o.lastChild;return n&&"meta"===n.name&&(n=n.next),s&&"mce_marker"===s.attr("id")&&(s=s.prev),((i,c)=>{const d=i.getNonEmptyElements();return ee(c)&&(c.isEmpty(d)||(p=c,i.getBlockElements()[p.name]&&ee((f=p).firstChild)&&f.firstChild===f.lastChild&&(f=>"br"===f.name||f.value===Vn)(p.firstChild)));var p,f})(t,s)&&(s=s?.prev),!(!n||n!==s||"ul"!==n.name&&"ol"!==n.name)})(t.schema,T)&&((F,q)=>!!By(F,q))(d,S))return x=((t,o,n,s)=>{const i=((x,C,O)=>{const S=C.serialize(O);return(R=>{var T,D;const P=R.firstChild,F=R.lastChild;return P&&"META"===P.nodeName&&(null===(T=P.parentNode)||void 0===T||T.removeChild(P)),F&&"mce_marker"===F.id&&(null===(D=F.parentNode)||void 0===D||D.removeChild(F)),R})(x.createFragment(S))})(o,t,s),c=By(o,n.startContainer),d=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||ee(null==(o=n)?void 0:o.firstChild)&&o.firstChild===o.lastChild&&((s=o.firstChild).data===Vn||Ft(s)))?t.slice(0,-1):t;var s,o,n})(ft(null!==(p=i.firstChild?.childNodes)&&void 0!==p?p:[],x=>"LI"===x.nodeName));var p;const f=o.getRoot(),b=x=>{const C=Oe.fromRangeStart(n),O=ar(o.getRoot()),R=(1===x?O.prev(C):O.next(C))?.getNode();return!R||By(o,R)!==c};return c?b(1)?((x,C,O)=>{const S=x.parentNode;return S&&$e.each(C,R=>{S.insertBefore(R,x)}),((R,T)=>{const D=Oe.before(R),P=ar(T).next(D);return P?P.toRange():null})(x,O)})(c,d,f):b(2)?(x=c,O=f,o.insertAfter((C=d).reverse(),x),My(C[0],O)):((x,C,O,S)=>{const R=((D,P)=>{const F=P.cloneRange(),q=P.cloneRange();return F.setStartBefore(D),q.setEndAfter(D),[F.cloneContents(),q.cloneContents()]})(x,S),T=x.parentNode;return T&&(T.insertBefore(R[0],x),$e.each(C,D=>{T.insertBefore(D,x)}),T.insertBefore(R[1],x),T.removeChild(x)),My(C[C.length-1],O)})(c,d,f,n):null;var x,C,O})(f,d,c.getRng(),T),x&&c.setRng(x),o;!0===n.paste&&((F,q,$,ne)=>{var ce;const me=q.firstChild,pe=q.lastChild,we=me===("bookmark"===pe.attr("data-mce-type")?pe.prev:pe),se=st(jD,me.name);if(we&&se){const de="false"!==me.attr("contenteditable"),ye=(null===(ce=F.getParent($,F.isBlock))||void 0===ce?void 0:ce.nodeName.toLowerCase())===me.name,Le=H.from(ng(ne,$)).forall(on);return de&&ye&&Le}return!1})(d,T,S,t.getBody())&&(null===(s=T.firstChild)||void 0===s||s.unwrap()),(F=>{let q=F;for(;q=q.walk();)1===q.type&&q.attr("data-mce-fragment","1")})(T);let D=T.lastChild;if(D&&"mce_marker"===D.attr("id")){const F=D;for(D=D.prev;D;D=D.walk(!0))if(3===D.type||!d.isBlock(D.name)){D.parent&&t.schema.isValidChild(D.parent.name,"span")&&D.parent.insert(F,D,"br"===D.name);break}}if(t._selectionOverrides.showBlockCaretContainer(S),R.invalid||((F,q,$)=>{var ne;return Wo($.children(),dC)&&"SUMMARY"===(null===(ne=F.getParent(q,F.isBlock))||void 0===ne?void 0:ne.nodeName)})(d,S,T)){t.selection.setContent(b);let F,q=c.getNode();const $=t.getBody();for(Bo(q)?q=F=$:F=q;F&&F!==$;)q=F,F=F.parentNode;o=q===$?$.innerHTML:d.getOuterHTML(q);const ne=u.parse(o),ce=(de=>{for(let ye=de;ye;ye=ye.walk())if("mce_marker"===ye.attr("id"))return H.some(ye);return H.none()})(ne),me=ce.bind(mC).getOr(ne);ce.each(de=>de.replace(T));const pe=T.children(),we=null!==(i=T.parent)&&void 0!==i?i:ne;T.unwrap();const se=ft(pe,de=>Ry(t.schema,de,we));Ny(se,t.schema,me),Ty(u.getNodeFilters(),u.getAttributeFilters(),ne),o=f.serialize(ne),q===$?d.setHTML($,o):d.setOuterHTML(q,o)}else o=f.serialize(T),((F,q,$)=>{var ne;if("all"===$.getAttribute("data-mce-bogus"))null===(ne=$.parentNode)||void 0===ne||ne.insertBefore(F.dom.createFragment(q),$);else{const ce=$.firstChild,me=$.lastChild;!ce||ce===me&&"BR"===ce.nodeName?F.dom.setHTML($,q):F.selection.setContent(q,{no_events:!0})}})(t,o,S);var P;return((F,q)=>{const $=F.schema.getTextInlineElements(),ne=F.dom;if(q){const ce=F.getBody(),me=rg(F);$e.each(ne.select("*[data-mce-fragment]"),pe=>{if(ee($[pe.nodeName.toLowerCase()])&&cr(K_(ne,pe),de=>!rO.has(de)))for(let we=pe.parentElement;ee(we)&&we!==ce&&!Co(ne,pe,we);we=we.parentElement)if(me.compare(we,pe)){ne.remove(pe,!0);break}})}})(t,p),((F,q)=>{var $,ne,ce;let me;const pe=F.dom,we=F.selection;if(!q)return;we.scrollIntoView(q);const se=ng(F.getBody(),q);if(se&&"false"===pe.getContentEditable(se))return pe.remove(q),void we.select(se);let de=pe.createRng();const ye=q.previousSibling;if(Ae(ye)){de.setStart(ye,null!==(ne=null===($=ye.nodeValue)||void 0===$?void 0:$.length)&&void 0!==ne?ne:0);const rt=q.nextSibling;Ae(rt)&&(ye.appendData(rt.data),null===(ce=rt.parentNode)||void 0===ce||ce.removeChild(rt))}else de.setStartBefore(q),de.setEndBefore(q);const Le=pe.getParent(q,pe.isBlock);if(pe.remove(q),Le&&pe.isEmpty(Le)){const rt=Iy(Le);X(re(Le)),de.setStart(Le,0),de.setEnd(Le,0),rt||Le.getAttribute("data-mce-fragment")||!(me=(Ye=>{let Mt=Oe.fromRangeStart(Ye);return Mt=ar(F.getBody()).next(Mt),Mt?.toRange()})(de))?pe.add(Le,pe.create("br",rt?{}:{"data-mce-bogus":"1"})):(de=me,pe.remove(Le))}we.setRng(de)})(t,d.get("mce_marker")),P=t.getBody(),$e.each(P.getElementsByTagName("*"),F=>{F.removeAttribute("data-mce-fragment")}),((F,q,$)=>{H.from(F.getParent(q,"td,th")).map(re).each(ne=>{return me=$,void Os(ce=ne).each(pe=>{ta(pe).each(we=>{me.isBlock(Po(ce))&&oa(pe)&&me.isBlock(Po(we))&&le(pe)})});var ce,me})})(d,c.getStart(),t.schema),((F,q,$)=>{const ne=bu(re($),ce=>Qo(ce,re(q)));Aa(ne,ne.length-2).filter(Ts).fold(()=>Dd(F,q),ce=>Dd(F,ce.dom))})(t.schema,t.getBody(),c.getStart()),o},Bf=t=>t instanceof pt,Ip=(t,o,n)=>{var s;t.dom.setHTML(t.getBody(),o),!0!==n&&eg(s=t)&&js(s.getBody()).each(i=>{const c=i.getNode(),d=yo(c)?js(c).getOr(i):i;s.selection.setRng(d.toRange())})},gC=t=>ut(t)?t:wo,Py=(t,o,n)=>{const s=o(t),i=gC(n);return s.orThunk(()=>i(t)?H.none():((c,d,u)=>{let p=c.dom;const f=gC(u);for(;p.parentNode;){p=p.parentNode;const b=re(p),x=d(b);if(x.isSome())return x;if(f(b))break}return H.none()})(t,o,i))},Ly=x_,pC=(t,o,n)=>{const s=t.formatter.get(n);if(s)for(let i=0;i<s.length;i++){const c=s[i];if(Cl(c)&&!1===c.inherit&&t.dom.is(o,c.selector))return!0}return!1},Fy=(t,o,n,s,i)=>{const c=t.dom.getRoot();if(o===c)return!1;const d=t.dom.getParent(o,u=>!!pC(t,u,n)||u.parentNode===c||!!Nc(t,u,n,s,!0));return!!Nc(t,d,n,s,i)},Mf=(t,o,n)=>!(!xs(n)||!Ly(o,n.inline))||!(!_o(n)||!Ly(o,n.block))||!!Cl(n)&&Te(o)&&t.is(o,n.selector),hC=(t,o,n,s,i,c)=>{const d=n[s],u="attributes"===s;if(ut(n.onmatch))return n.onmatch(o,n,s);if(d)if(ac(d)){for(let p=0;p<d.length;p++)if(u?t.getAttrib(o,d[p]):$s(t,o,d[p]))return!0}else for(const p in d)if(Gt(d,p)){const f=u?t.getAttrib(o,p):$s(t,o,p),b=Uu(d[p],c),x=An(f)||Ro(f);if(x&&An(b))continue;if(i&&x&&!n.exact||(!i||n.exact)&&!Ly(f,gi(b,p)))return!1}return!0},Nc=(t,o,n,s,i)=>{const c=t.formatter.get(n),d=t.dom;if(c&&Te(o))for(let u=0;u<c.length;u++){const p=c[u];if(Mf(t.dom,o,p)&&hC(d,o,p,"attributes",i,s)&&hC(d,o,p,"styles",i,s)){const f=p.classes;if(f)for(let b=0;b<f.length;b++)if(!t.dom.hasClass(o,Uu(f[b],s)))return;return p}}},zy=(t,o,n,s,i)=>{if(s)return Fy(t,s,o,n,i);if(s=t.selection.getNode(),Fy(t,s,o,n,i))return!0;const c=t.selection.getStart();return!(c===s||!Fy(t,c,o,n,i))},Hy=t=>{if(t){const o=new he(t,t);for(let n=o.current();n;n=o.next())if(Ae(n))return n}return null},Vy=t=>{const o=nr("span");return jr(o,{id:Xh,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&I(o,Ba("\ufeff")),o},Uy=(t,o,n)=>{const s=t.dom,i=t.selection;if(fT(o))Xu(t,!1,re(o),n,!0);else{const c=i.getRng(),d=s.getParent(o,s.isBlock),u=c.startContainer,p=c.startOffset,f=c.endContainer,b=c.endOffset,x=(C=>{const O=Hy(C);return O&&"\ufeff"===O.data.charAt(0)&&O.deleteData(0,1),O})(o);s.remove(o,!0),u===x&&p>0&&c.setStart(x,p-1),f===x&&b>0&&c.setEnd(x,b-1),d&&s.isEmpty(d)&&Fa(re(d)),i.setRng(c)}},jy=(t,o,n)=>{const s=t.dom,i=t.selection;if(o)Uy(t,o,n);else if(!(o=Fd(t.getBody(),i.getStart())))for(;o=s.get(Xh);)Uy(t,o,n)},fC=(t,o)=>(t.appendChild(o),o),bC=(t,o)=>{var n;const s=Qs(t,(c,d)=>fC(c,d.cloneNode(!1)),o),i=null!==(n=s.ownerDocument)&&void 0!==n?n:document;return fC(s,i.createTextNode("\ufeff"))},$y=t=>{const o=Vy(!1),n=bC(t,o.dom);return{caretContainer:o,caretPosition:Oe(n,0)}},If=(t,o)=>{const{caretContainer:n,caretPosition:s}=$y(o);return kr(re(t),n),le(re(t)),s},Pf=(t,o)=>{if(ui(o.dom))return!1;const n=t.schema.getTextInlineElements();return Gt(n,Po(o))&&!ui(o.dom)&&!co(o.dom)},Zu={},vC=Et(["pre"]);((t,o)=>{Zu[t]||(Zu[t]=[]),Zu[t].push(n=>{if(!n.selection.getRng().collapsed){const s=n.selection.getSelectedBlocks(),i=ft(ft(s,vC),(c=s,d=>{const u=d.previousSibling;return vC(u)&&st(c,u)}));Ee(i,c=>{((d,u)=>{const p=re(u),f=ni(p).dom;le(p),j(re(d),[nr("br",f),nr("br",f),...pr(p)])})(c.previousSibling,c)})}var c})})("pre");const Lf=["fontWeight","fontStyle","color","fontSize","fontFamily"],Wy=(t,o)=>{const n=t.get(o);return qo(n)?yn(n,s=>{return xs(s)&&"span"===s.inline&&vt((i=s).styles)&&Wo(as(i.styles),c=>st(Lf,c));var i}):H.none()},Lp=(t,o)=>di(o,Oe.fromRangeStart(t)).isNone(),qy=(t,o)=>!1===ci(o,Oe.fromRangeEnd(t)).exists(n=>!Ft(n.getNode())||ci(o,n).isSome()),yC=t=>o=>Wr(o)&&t.isEditable(o),sg=t=>ft(t.getSelectedBlocks(),yC(t.dom)),Ff=$e.each,zf=t=>Te(t)&&!ls(t)&&!ui(t)&&!co(t),Fp=(t,o)=>{for(let n=t;n;n=n[o]){if(Ae(n)&&To(n.data))return t;if(Te(n)&&!ls(n))return n}return t},Vd=(t,o,n)=>{const s=rg(t),i=Dt(o)&&t.dom.isEditable(o),c=Dt(n)&&t.dom.isEditable(n);if(i&&c){const d=Fp(o,"previousSibling"),u=Fp(n,"nextSibling");if(s.compare(d,u)){for(let p=d.nextSibling;p&&p!==u;){const f=p;p=p.nextSibling,d.appendChild(f)}return t.dom.remove(u),$e.each($e.grep(u.childNodes),p=>{d.appendChild(p)}),d}}return n},xC=(t,o,n,s)=>{var i;if(s&&!1!==o.merge_siblings){const c=null!==(i=Vd(t,Kv(s),s))&&void 0!==i?i:s;Vd(t,c,Kv(c,!0))}},wC=(t,o,n)=>{Ff(t.childNodes,s=>{zf(s)&&(o(s)&&n(s),s.hasChildNodes()&&wC(s,o,n))})},_C=(t,o)=>n=>!(!n||!$s(t,n,o)),CC=(t,o,n)=>s=>{var i,c;t.setStyle(s,o,n),""===s.getAttribute("style")&&s.removeAttribute("style"),i=t,"SPAN"===(c=s).nodeName&&0===i.getAttribs(c).length&&i.remove(c,!0)},Ud=kc([{keep:[]},{rename:["name"]},{removed:[]}]),Rc=/^(src|href|style)$/,Hf=$e.each,ag=x_,SC=(t,o,n)=>t.isChildOf(o,n)&&o!==n&&!t.isBlock(n),TO=(t,o,n)=>{let s=o[n?"startContainer":"endContainer"],i=o[n?"startOffset":"endOffset"];if(Te(s)){const c=s.childNodes.length-1;!n&&i&&i--,s=s.childNodes[i>c?c:i]}return Ae(s)&&n&&i>=s.data.length&&(s=new he(s,t.getBody()).next()||s),Ae(s)&&!n&&0===i&&(s=new he(s,t.getBody()).prev()||s),s},kC=(t,o)=>{const n=o?"firstChild":"lastChild",s=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&s?"TR"===t.nodeName&&s[n]||s:t},Gy=(t,o,n,s)=>{var i;const c=t.create(n,s);return null===(i=o.parentNode)||void 0===i||i.insertBefore(c,o),c.appendChild(o),c},Ky=(t,o,n,s,i)=>{const c=re(o),d=re(t.create(s,i)),u=n?vu(c):ji(c);return j(d,u),n?(kr(c,d),Dn(d,c)):(ri(c,d),I(d,c)),d.dom},EC=(t,o,n)=>{const s=o.parentNode;let i;const c=t.dom,d=Rs(t);var u;_o(n)&&s===c.getRoot()&&(n.list_block&&ag(o,n.list_block)||Ee(dr(o.childNodes),u=>{Gm(t,d,u.nodeName.toLowerCase())?i?i.appendChild(u):(i=Gy(c,u,d),c.setAttribs(i,Ji(t))):i=null})),Cl(u=n)&&xs(u)&&oi(Xo(u,"mixed"),!0)&&!ag(n.inline,o)||c.remove(o,!0)},zp=(t,o,n)=>rs(t)?{name:o,value:null}:{name:t,value:Uu(o,n)},TC=(t,o)=>{""===t.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style"))},OC=(t,o,n,s,i)=>{let c=!1;Hf(n.styles,(d,u)=>{const{name:p,value:f}=zp(u,d,s),b=gi(f,p);(n.remove_similar||vn(f)||!Te(i)||ag($s(t,i,p),b))&&t.setStyle(o,p,""),c=!0}),c&&TC(t,o)},AC=(t,o,n,s,i)=>{const c=t.dom,d=rg(t),u=t.schema;if(xs(o)&&Eh(u,o.inline)&&Eu(u,s)&&s.parentElement===t.getBody())return EC(t,s,o),Ud.removed();if(!o.ceFalseOverride&&s&&"false"===c.getContentEditableParent(s)||s&&!Mf(c,s,o)&&(!o.links||"A"!==s.nodeName))return Ud.keep();const p=s,f=o.preserve_attributes;if(xs(o)&&"all"===o.remove&&qo(f)){const b=ft(c.getAttribs(p),x=>st(f,x.name.toLowerCase()));if(c.removeAllAttribs(p),Ee(b,x=>c.setAttrib(p,x.name,x.value)),b.length>0)return Ud.rename("span")}if("all"!==o.remove){OC(c,p,o,n,i),Hf(o.attributes,(x,C)=>{const{name:O,value:S}=zp(C,x,n);if(o.remove_similar||vn(S)||!Te(i)||ag(c.getAttrib(i,O),S)){if("class"===O){const R=c.getAttrib(p,O);if(R){let T="";if(Ee(R.split(/\s+/),D=>{/mce\-\w+/.test(D)&&(T+=(T?" ":"")+D)}),T)return void c.setAttrib(p,O,T)}}if(Rc.test(O)&&p.removeAttribute("data-mce-"+O),"style"===O&&Et(["li"])(p)&&"none"===c.getStyle(p,"list-style-type"))return p.removeAttribute(O),void c.setStyle(p,"list-style-type","none");"class"===O&&p.removeAttribute("className"),p.removeAttribute(O)}}),Hf(o.classes,x=>{x=Uu(x,n),Te(i)&&!c.hasClass(i,x)||c.removeClass(p,x)});const b=c.getAttribs(p);for(let x=0;x<b.length;x++)if(!d.isAttributeInternal(b[x].nodeName))return Ud.keep()}return"none"!==o.remove?(EC(t,p,o),Ud.removed()):Ud.keep()},$D=(t,o,n,s)=>AC(t,o,n,s,s).fold(Ve(s),i=>(t.dom.createFragment().appendChild(s),t.dom.rename(s,i)),Ve(null)),Yy=(t,o,n,s,i)=>{(s||t.selection.isEditable())&&((c,d,u,p,f)=>{const b=c.formatter.get(d),x=b[0],C=c.dom,O=c.selection,S=F=>{const q=(($,ne,ce,me,pe)=>{let we;return ne.parentNode&&Ee(Yv($.dom,ne.parentNode).reverse(),se=>{if(!we&&Te(se)&&"_start"!==se.id&&"_end"!==se.id){const de=Nc($,se,ce,me,pe);de&&!1!==de.split&&(we=se)}}),we})(c,F,d,u,f);return(($,ne,ce,me,pe,we,se,de)=>{var ye,Le;let rt,Ye;const Mt=$.dom;if(ce){const kt=ce.parentNode;for(let jt=me.parentNode;jt&&jt!==kt;jt=jt.parentNode){let It=Mt.clone(jt,!1);for(let dt=0;dt<ne.length&&(It=$D($,ne[dt],de,It),null!==It);dt++);It&&(rt&&It.appendChild(rt),Ye||(Ye=It),rt=It)}se.mixed&&Mt.isBlock(ce)||(me=null!==(ye=Mt.split(ce,me))&&void 0!==ye?ye:me),rt&&Ye&&(null===(Le=pe.parentNode)||void 0===Le||Le.insertBefore(rt,pe),Ye.appendChild(pe),xs(se)&&xC($,se,0,rt))}return me})(c,b,q,F,F,0,x,u)},R=F=>Wo(b,q=>Dc(c,q,u,F,F)),T=F=>{const q=dr(F.childNodes),$=R(F)||Wo(b,ce=>Mf(C,F,ce)),ne=F.parentNode;if(!$&&ee(ne)&&nf(x)&&R(ne),x.deep&&q.length)for(let ce=0;ce<q.length;ce++)T(q[ce]);Ee(["underline","line-through","overline"],ce=>{Te(F)&&c.dom.getStyle(F,"text-decoration")===ce&&F.parentNode&&Km(C,F.parentNode)===ce&&Dc(c,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ce}},void 0,F)})},D=F=>{const q=C.get(F?"_start":"_end");if(q){let $=q[F?"firstChild":"lastChild"];return ls(ne=$)&&Te(ne)&&("_start"===ne.id||"_end"===ne.id)&&($=$[F?"firstChild":"lastChild"]),Ae($)&&0===$.data.length&&($=F?q.previousSibling||q.nextSibling:q.nextSibling||q.previousSibling),C.remove(q,!0),$}var ne;return null},P=F=>{let q,$,ne=ju(C,F,b,F.collapsed);if(x.split){if(ne=Zm(ne),q=TO(c,ne,!0),$=TO(c,ne),q!==$){if(q=kC(q,!0),$=kC($,!1),SC(C,q,$)){const me=H.from(q.firstChild).getOr(q);return S(Ky(C,me,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void D(!0)}if(SC(C,$,q)){const me=H.from($.lastChild).getOr($);return S(Ky(C,me,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void D(!1)}q=Gy(C,q,"span",{id:"_start","data-mce-type":"bookmark"}),$=Gy(C,$,"span",{id:"_end","data-mce-type":"bookmark"});const ce=C.createRng();ce.setStartAfter(q),ce.setEndBefore($),Sp(C,ce,me=>{Ee(me,pe=>{ls(pe)||ls(pe.parentNode)||S(pe)})}),S(q),S($),q=D(!0),$=D()}else q=$=S(q);ne.startContainer=q.parentNode?q.parentNode:q,ne.startOffset=C.nodeIndex(q),ne.endContainer=$.parentNode?$.parentNode:$,ne.endOffset=C.nodeIndex($)+1}Sp(C,ne,ce=>{Ee(ce,T)})};if(p){if(wp(p)){const F=C.createRng();F.setStartBefore(p),F.setEndAfter(p),P(F)}else P(p);kp(c,d,p,u)}else O.isCollapsed()&&xs(x)&&!xp(c).length?((t,o,n,s)=>{const i=t.dom,c=t.selection;let d=!1;const u=t.formatter.get(o);if(!u)return;const p=c.getRng(),f=p.startContainer,b=p.startOffset;let x=f;Ae(f)&&(b!==f.data.length&&(d=!0),x=x.parentNode);const C=[];let O;for(;x;){if(Nc(t,x,o,n,s)){O=x;break}x.nextSibling&&(d=!0),C.push(x),x=x.parentNode}if(O)if(d){const S=c.getBookmark();p.collapse(!0);let R=ju(i,p,u,!0);R=Zm(R),t.formatter.remove(o,n,R,s),c.moveToBookmark(S)}else{const S=Fd(t.getBody(),O),R=ee(S)?i.getParents(O.parentNode,Vo,S):[],T=Vy(!1).dom;((F,q,$)=>{var ne,ce;const me=F.dom,pe=me.getParent($,it(v_,F.schema));pe&&me.isEmpty(pe)?null===(ne=$.parentNode)||void 0===ne||ne.replaceChild(q,$):((we=>{const se=J(we,"br"),de=ft((ye=>{const Le=[];let rt=ye.dom;for(;rt;)Le.push(re(rt)),rt=rt.lastChild;return Le})(we).slice(-1),oa);se.length===de.length&&Ee(de,le)})(re($)),me.isEmpty($)?null===(ce=$.parentNode)||void 0===ce||ce.replaceChild(q,$):me.insertAfter(q,$))})(t,T,S??O);const D=((F,q,$,ne,ce,me)=>{const pe=F.formatter,we=F.dom,se=ft(as(pe.get()),ye=>ye!==ne&&!Xe(ye,"removeformat")),de=(ye=F,Le=$,Nn(se,(Ye,Mt)=>{const kt=w_(ye,Mt,dt=>{const xt=to=>ut(to)||to.length>1&&"%"===to.charAt(0);return Wo(["styles","attributes"],to=>Xo(dt,to).exists(ie=>{const ue=qo(ie)?ie:gs(ie);return Wo(ue,xt)}))});return ye.formatter.matchNode(Le,Mt,{},kt)?Ye.concat([Mt]):Ye},[]));var ye,Le;if(ft(de,ye=>!((Le,rt,Ye)=>{const Mt=["inline","block","selector","attributes","styles","classes"],kt=jt=>zr(jt,(It,dt)=>Wo(Mt,xt=>xt===dt));return w_(Le,rt,jt=>{const It=kt(jt);return w_(Le,Ye,dt=>{const xt=kt(dt);return((to,ie,ue=So)=>dl(ue).eq(to,ie))(It,xt)})})})(F,ye,ne)).length>0){const ye=$.cloneNode(!1);return we.add(q,ye),pe.remove(ne,ce,ye,me),we.remove(ye),H.some(ye)}return H.none()})(t,T,O,o,n,s),P=bC([...C,...D.toArray(),...R],T);S&&Uy(t,S,ee(S)),c.setCursorLocation(P,1),i.isEmpty(O)&&i.remove(O)}})(c,d,u,f):(Gv(c,()=>rd(c,P),F=>xs(x)&&zy(c,d,u,F)),c.nodeChanged()),F=c,$=u,"removeformat"===(q=d)?Ee(sg(F.selection),ne=>{Ee(Lf,ce=>F.dom.setStyle(ne,ce,"")),TC(F.dom,ne)}):Wy(F.formatter,q).each(ne=>{Ee(sg(F.selection),ce=>OC(F.dom,ce,ne,$,null))}),kp(c,d,p,u);var F,q,$})(t,o,n,s,i)},Dc=(t,o,n,s,i)=>AC(t,o,n,s,i).fold(wo,c=>(t.dom.rename(s,c),!0),Vo),OO=$e.each,Xy=$e.each,Vf=(t,o,n,s)=>{if(Xy(n.styles,(i,c)=>{t.setStyle(o,c,Uu(i,s))}),n.styles){const i=t.getAttrib(o,"style");i&&t.setAttrib(o,"data-mce-style",i)}},AO=(t,o,n,s)=>{const i=t.formatter.get(o),c=i[0],d=!s&&t.selection.isCollapsed(),u=t.dom,p=t.selection,f=(S,R=c)=>{ut(R.onformat)&&R.onformat(S,R,n,s),Vf(u,S,R,n),Xy(R.attributes,(T,D)=>{u.setAttrib(S,D,Uu(T,n))}),Xy(R.classes,T=>{const D=Uu(T,n);u.hasClass(S,D)||u.addClass(S,D)})},b=(S,R)=>{let T=!1;return Xy(S,D=>!(!Cl(D)||("false"!==u.getContentEditable(R)||D.ceFalseOverride)&&(!ee(D.collapsed)||D.collapsed===d)&&u.is(R,D.selector)&&!ui(R)&&(f(R,D),T=!0,1))),T},C=(S,R,T)=>{const D=[];let P=!0;const F=c.inline||c.block,q=(S=>{if(_t(S)){const R=u.create(S);return f(R),R}return null})(F);Sp(S,R,$=>{let ne;const ce=me=>{let pe=!1,we=P,se=!1;const de=me.parentNode,ye=de.nodeName.toLowerCase(),Le=S.getContentEditable(me);ee(Le)&&(we=P,P="true"===Le,pe=!0,se=y_(t,me));const rt=P&&!pe;if(Ft(me)&&!((Ye,Mt,kt,jt)=>{if(Pd(Ye)&&xs(Mt)&&kt.parentNode){const It=bt(Ye.schema),dt=((t,o)=>((n,s)=>{const i=n.dom;return i.parentNode?(c=re(i.parentNode),yn(c.dom.childNodes,u=>(c=>!Qo(n,c)&&s(c))(re(u))).map(re)):H.none();var c})(t,o).isSome())(re(kt),xt=>ui(xt.dom));return Hr(It,jt)&&br(re(kt.parentNode),!1)&&!dt}return!1})(t,c,me,ye))return ne=null,void(_o(c)&&S.remove(me));if(Ye=me,_o(Mt=c)&&!0===Mt.wrapper&&Nc(t,Ye,o,n))ne=null;else{if(((Ye,Mt,kt)=>{const jt=_o(It=c)&&!0!==It.wrapper&&v_(t.schema,Ye)&&Gm(t,Mt,F);var It;return kt&&jt})(me,ye,rt)){const Ye=S.rename(me,F);return f(Ye),D.push(Ye),void(ne=null)}if(Cl(c)){let Ye=b(i,me);if(!Ye&&ee(de)&&nf(c)&&(Ye=b(i,de)),!xs(c)||Ye)return void(ne=null)}ee(q)&&((Ye,Mt,kt,jt)=>{const It=Ye.nodeName.toLowerCase(),dt=Gm(t,F,It)&&Gm(t,Mt,F),xt=!T&&Ae(Ye)&&Cu(Ye.data),to=ui(Ye),ie=!xs(c)||!S.isBlock(Ye);return(kt||jt)&&dt&&!xt&&!to&&ie})(me,ye,rt,se)?(ne||(ne=S.clone(q,!1),de.insertBefore(ne,me),D.push(ne)),se&&pe&&(P=we),ne.appendChild(me)):(ne=null,Ee(dr(me.childNodes),ce),pe&&(P=we),ne=null)}var Ye,Mt};Ee($,ce)}),!0===c.links&&Ee(D,$=>{const ne=ce=>{"A"===ce.nodeName&&f(ce,c),Ee(dr(ce.childNodes),ne)};ne($)}),Ee(D,$=>{const ne=(ce=>{let me=0;return Ee(ce.childNodes,pe=>{var we;ee(we=pe)&&Ae(we)&&0===we.length||ls(pe)||me++}),me})($);var ce;!(D.length>1)&&S.isBlock($)||0!==ne?(xs(c)||_o(c)&&c.wrapper)&&(c.exact||1!==ne||($=yn((ce=$).childNodes,qv).filter(pe=>"false"!==S.getContentEditable(pe)&&Mf(S,pe,c)).map(pe=>{const we=S.clone(pe,!1);return f(we),S.replace(we,ce,!0),S.remove(pe,!0),we}).getOr(ce)),((ce,me,pe,we)=>{OO(me,se=>{var de,ye,Le;xs(se)&&OO(ce.dom.select(se.inline,we),de=>{zf(de)&&Dc(ce,se,pe,de,se.exact?de:null)}),de=ce.dom,Le=we,(ye=se).clear_child_styles&&Ff(de.select(ye.links?"*:not(a)":"*",Le),Ye=>{zf(Ye)&&de.isEditable(Ye)&&Ff(ye.styles,(Mt,kt)=>{de.setStyle(Ye,kt,"")})})})})(t,i,n,$),((ce,me,pe,we,se)=>{const de=se.parentNode;Nc(ce,de,pe,we)&&Dc(ce,me,we,se)||me.merge_with_parents&&de&&ce.dom.getParent(de,ye=>!!Nc(ce,ye,pe,we)&&(Dc(ce,me,we,se),!0))})(t,c,o,n,$),((ce,me,pe,we)=>{if(me.styles&&me.styles.backgroundColor){const se=_C(ce,"fontSize");wC(we,de=>se(de)&&ce.isEditable(de),CC(ce,"backgroundColor",Uu(me.styles.backgroundColor,pe)))}})(S,c,n,$),((ce,me,pe,we)=>{const se=de=>{if(Dt(de)&&Te(de.parentNode)&&ce.isEditable(de)){const ye=Km(ce,de.parentNode);ce.getStyle(de,"color")&&ye?ce.setStyle(de,"text-decoration",ye):ce.getStyle(de,"text-decoration")===ye&&ce.setStyle(de,"text-decoration",null)}};me.styles&&(me.styles.color||me.styles.textDecoration)&&($e.walk(we,se,"childNodes"),se(we))})(S,c,0,$),((ce,me,pe,we)=>{if(xs(me)&&("sub"===me.inline||"sup"===me.inline)){const se=_C(ce,"fontSize");wC(we,ye=>se(ye)&&ce.isEditable(ye),CC(ce,"fontSize",""));const de=ft(ce.select("sup"===me.inline?"sub":"sup",we),ce.isEditable);ce.remove(de,!0)}})(S,c,0,$),xC(t,c,0,$)):S.remove($,!0)})},O=wp(s)?s:p.getNode();if("false"===u.getContentEditable(O)&&!y_(t,O))return b(i,s=O),void af(t,o,s,n);if(c){if(s)if(wp(s)){if(!b(i,s)){const S=u.createRng();S.setStartBefore(s),S.setEndAfter(s),C(u,ju(u,S,i),!0)}}else C(u,s,!0);else d&&xs(c)&&!xp(t).length?((S,R,T)=>{let D;const P=S.selection,F=S.formatter.get(R);if(!F)return;const q=P.getRng();let $=q.startOffset;const ne=q.startContainer.nodeValue;D=Fd(S.getBody(),P.getStart());const ce=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(ne&&$>0&&$<ne.length&&ce.test(ne.charAt($))&&ce.test(ne.charAt($-1))){const we=P.getBookmark();q.collapse(!0);let se=ju(S.dom,q,F);se=Zm(se),S.formatter.apply(R,T,se),P.moveToBookmark(we)}else{let we=D?Hy(D):null;D&&"\ufeff"===we?.data||(me=S.getDoc(),pe=Vy(!0).dom,D=me.importNode(pe,!0),we=D.firstChild,q.insertNode(D),$=1),S.formatter.apply(R,T,D),P.setCursorLocation(we,$)}var me,pe})(t,o,n):(p.setRng(Dy(p.getRng())),Gv(t,()=>{rd(t,(S,R)=>{const T=R?S:ju(u,S,i);C(u,T,!1)})},Vo),t.nodeChanged()),Wy(t.formatter,o).each(S=>{var R;Ee(ft((T=>{const D=T.getSelectedBlocks(),P=T.getRng();if(T.isCollapsed())return[];if(1===D.length)return Lp(P,D[0])&&qy(P,D[0])?D:[];{const F=gn(D).filter(ne=>Lp(P,ne)).toArray(),q=pn(D).filter(ne=>qy(P,ne)).toArray(),$=D.slice(1,-1);return F.concat($).concat(q)}})(R=t.selection),yC(R.dom)),R=>Vf(u,R,S,n))});R=t,Gt(Zu,S=o)&&Ee(Zu[S],T=>{T(R)})}var S,R;af(t,o,s,n)},NC=(t,o,n,s)=>{(s||t.selection.isEditable())&&AO(t,o,n,s)},NO=t=>Gt(t,"vars"),RC=t=>t.selection.getStart(),em=(t,o,n,s,i)=>Is(o,c=>{const d=t.formatter.matchNode(c,n,i??{},s);return!et(d)},c=>!!pC(t,c,n)||!s&&ee(t.formatter.matchNode(c,n,i,!0))),DC=(t,o)=>{const n=o??RC(t);return ft(Yv(t.dom,n),s=>Te(s)&&!co(s))},BC=(t,o,n)=>{const s=DC(t,o);Yo(n,(i,c)=>{const d=u=>{const p=em(t,s,c,u.similar,NO(u)?u.vars:void 0),f=p.isSome();if(u.state.get()!==f){u.state.set(f);const b=p.getOr(o);NO(u)?u.callback(f,{node:b,format:c,parents:s}):Ee(u.callbacks,x=>x(f,{node:b,format:c,parents:s}))}};Ee([i.withSimilar,i.withoutSimilar],d),Ee(i.withVars,d)})},MC=$e.explode,Uf=()=>{const t={};return{addFilter:(o,n)=>{Ee(MC(o),s=>{Gt(t,s)||(t[s]={name:s,callbacks:[]}),t[s].callbacks.push(n)})},getFilters:()=>gs(t),removeFilter:(o,n)=>{Ee(MC(o),s=>{if(Gt(t,s))if(ee(n)){const i=t[s],c=ft(i.callbacks,d=>d!==n);c.length>0?i.callbacks=c:delete t[s]}else delete t[s]})}}},IC=(t,o,n)=>{o.addNodeFilter("br",(s,i,c)=>{const d=$e.extend({},n.getBlockElements()),u=n.getNonEmptyElements(),p=n.getWhitespaceElements();d.body=1;const f=b=>b.name in d||Th(n,b);for(let b=0,x=s.length;b<x;b++){let C=s[b],O=C.parent;if(O&&f(O)&&C===O.lastChild){let S=C.prev;for(;S;){const R=S.name;if("span"!==R||"bookmark"!==S.attr("data-mce-type")){"br"===R&&(C=null);break}S=S.prev}if(C&&(C.remove(),Qu(n,u,p,O))){const R=n.getElementRule(O.name);R&&(R.removeEmpty?O.remove():R.paddEmpty&&Df(t,c,f,O))}}else{let S=C;for(;O&&O.firstChild===S&&O.lastChild===S&&(S=O,!d[O.name]);)O=O.parent;if(S===O){const R=new pt("#text",3);R.value=Vn,C.replace(R)}}}})},PC=t=>{const[o,...n]=t.split(","),s=n.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(i){const c=";base64"===i[2],d=c?(u=>{const p=/([a-z0-9+\/=\s]+)/i.exec(u);return p?p[1]:""})(s):decodeURIComponent(s);return H.some({type:i[1],data:d,base64Encoded:c})}return H.none()},jf=(t,o,n=!0)=>{let s=o;if(n)try{s=atob(o)}catch{return H.none()}const i=new Uint8Array(s.length);for(let c=0;c<i.length;c++)i[c]=s.charCodeAt(c);return H.some(new Blob([i],{type:t}))},LC=t=>new Promise((o,n)=>{const s=new FileReader;s.onloadend=()=>{o(s.result)},s.onerror=()=>{var i;n(null===(i=s.error)||void 0===i?void 0:i.message)},s.readAsDataURL(t)});let FC=0;const zC=(t,o,n)=>PC(t).bind(({data:s,type:i,base64Encoded:c})=>{if(o&&!c)return H.none();{const d=c?s:btoa(s);return n(d,i)}}),Jy=(t,o,n)=>{const s=t.create("blobid"+FC++,o,n);return t.add(s),s},HC=(t,o,n=!1)=>zC(o,n,(s,i)=>H.from(t.getByData(s,i)).orThunk(()=>jf(i,s).map(c=>Jy(t,c,s)))),Hp=(t,o)=>tt(t,`${o}/`),{entries:DO,setPrototypeOf:Qy,isFrozen:Br,getPrototypeOf:VC,getOwnPropertyDescriptor:UC}=Object;let{freeze:ws,seal:Zl,create:BO}=Object,{apply:ig,construct:jC}=typeof Reflect<"u"&&Reflect;ig||(ig=function(t,o,n){return t.apply(o,n)}),ws||(ws=function(t){return t}),Zl||(Zl=function(t){return t}),jC||(jC=function(t,o){return new t(...o)});const WD=ec(Array.prototype.forEach),Vp=ec(Array.prototype.pop),$f=ec(Array.prototype.push),cd=ec(String.prototype.toLowerCase),$C=ec(String.prototype.toString),tm=ec(String.prototype.match),_s=ec(String.prototype.replace),Zy=ec(String.prototype.indexOf),WC=ec(String.prototype.trim),Tl=ec(RegExp.prototype.test),Wf=(qf=TypeError,function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return jC(qf,o)});var qf;function ec(t){return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return ig(t,o,s)}}function $o(t,o,n){var s;n=null!==(s=n)&&void 0!==s?s:cd,Qy&&Qy(t,null);let i=o.length;for(;i--;){let c=o[i];if("string"==typeof c){const d=n(c);d!==c&&(Br(o)||(o[i]=d),c=d)}t[c]=!0}return t}function $d(t){const o=BO(null);for(const[n,s]of DO(t))o[n]=s;return o}function Gf(t,o){for(;null!==t;){const n=UC(t,o);if(n){if(n.get)return ec(n.get);if("function"==typeof n.value)return ec(n.value)}t=VC(t)}return function(n){return console.warn("fallback value for",n),null}}const e0=ws(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Kf=ws(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Wd=ws(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qC=ws(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),t0=ws(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qD=ws(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Up=ws(["#text"]),MO=ws(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),o0=ws(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),n0=ws(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),r0=ws(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IO=Zl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),PO=Zl(/<%[\w\W]*|[\w\W]*%>/gm),GD=Zl(/\${[\w\W]*}/gm),KD=Zl(/^data-[\-\w.\u00B7-\uFFFF]/),YD=Zl(/^aria-[\-\w]+$/),LO=Zl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),XD=Zl(/^(?:\w+script|data):/i),JD=Zl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),FO=Zl(/^html$/i);var zO=Object.freeze({__proto__:null,MUSTACHE_EXPR:IO,ERB_EXPR:PO,TMPLIT_EXPR:GD,DATA_ATTR:KD,ARIA_ATTR:YD,IS_ALLOWED_URI:LO,IS_SCRIPT_OR_DATA:XD,ATTR_WHITESPACE:JD,DOCTYPE_NAME:FO});const QD=()=>typeof window>"u"?null:window;var HO=function t(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QD();const n=Se=>t(Se);if(n.version="3.0.5",n.removed=[],!o||!o.document||9!==o.document.nodeType)return n.isSupported=!1,n;const s=o.document,i=s.currentScript;let{document:c}=o;const{DocumentFragment:d,HTMLTemplateElement:u,Node:p,Element:f,NodeFilter:b,NamedNodeMap:x=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:C,DOMParser:O,trustedTypes:S}=o,R=f.prototype,T=Gf(R,"cloneNode"),D=Gf(R,"nextSibling"),P=Gf(R,"childNodes"),F=Gf(R,"parentNode");if("function"==typeof u){const Se=c.createElement("template");Se.content&&Se.content.ownerDocument&&(c=Se.content.ownerDocument)}let q,$="";const{implementation:ne,createNodeIterator:ce,createDocumentFragment:me,getElementsByTagName:pe}=c,{importNode:we}=s;let se={};n.isSupported="function"==typeof DO&&"function"==typeof F&&ne&&void 0!==ne.createHTMLDocument;const{MUSTACHE_EXPR:de,ERB_EXPR:ye,TMPLIT_EXPR:Le,DATA_ATTR:rt,ARIA_ATTR:Ye,IS_SCRIPT_OR_DATA:Mt,ATTR_WHITESPACE:kt}=zO;let{IS_ALLOWED_URI:jt}=zO,It=null;const dt=$o({},[...e0,...Kf,...Wd,...t0,...Up]);let xt=null;const to=$o({},[...MO,...o0,...n0,...r0]);let ie=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ue=null,ze=null,He=!0,Ue=!0,wt=!1,zt=!0,uo=!1,Wt=!1,kn=!1,Tt=!1,Eo=!1,No=!1,po=!1,Fo=!0,Cs=!1,Pt=!0,Mo=!1,xr={},os=null;const ia=$o({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ea=null;const sl=$o({},["audio","video","img","source","image","track"]);let Gs=null;const Li=$o({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ns="http://www.w3.org/1998/Math/MathML",su="http://www.w3.org/2000/svg",al="http://www.w3.org/1999/xhtml";let rc=al,Fg=!1,hh=null;const au=$o({},[ns,su,al],$C);let Pl;const zg=["application/xhtml+xml","text/html"];let wr,Fc=null;const Hg=c.createElement("form"),fh=function(Se){return Se instanceof RegExp||Se instanceof Function},Gx=function(Se){if(!Fc||Fc!==Se){if(Se&&"object"==typeof Se||(Se={}),Se=$d(Se),Pl=Pl=-1===zg.indexOf(Se.PARSER_MEDIA_TYPE)?"text/html":Se.PARSER_MEDIA_TYPE,wr="application/xhtml+xml"===Pl?$C:cd,It="ALLOWED_TAGS"in Se?$o({},Se.ALLOWED_TAGS,wr):dt,xt="ALLOWED_ATTR"in Se?$o({},Se.ALLOWED_ATTR,wr):to,hh="ALLOWED_NAMESPACES"in Se?$o({},Se.ALLOWED_NAMESPACES,$C):au,Gs="ADD_URI_SAFE_ATTR"in Se?$o($d(Li),Se.ADD_URI_SAFE_ATTR,wr):Li,Ea="ADD_DATA_URI_TAGS"in Se?$o($d(sl),Se.ADD_DATA_URI_TAGS,wr):sl,os="FORBID_CONTENTS"in Se?$o({},Se.FORBID_CONTENTS,wr):ia,ue="FORBID_TAGS"in Se?$o({},Se.FORBID_TAGS,wr):{},ze="FORBID_ATTR"in Se?$o({},Se.FORBID_ATTR,wr):{},xr="USE_PROFILES"in Se&&Se.USE_PROFILES,He=!1!==Se.ALLOW_ARIA_ATTR,Ue=!1!==Se.ALLOW_DATA_ATTR,wt=Se.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=!1!==Se.ALLOW_SELF_CLOSE_IN_ATTR,uo=Se.SAFE_FOR_TEMPLATES||!1,Wt=Se.WHOLE_DOCUMENT||!1,Eo=Se.RETURN_DOM||!1,No=Se.RETURN_DOM_FRAGMENT||!1,po=Se.RETURN_TRUSTED_TYPE||!1,Tt=Se.FORCE_BODY||!1,Fo=!1!==Se.SANITIZE_DOM,Cs=Se.SANITIZE_NAMED_PROPS||!1,Pt=!1!==Se.KEEP_CONTENT,Mo=Se.IN_PLACE||!1,jt=Se.ALLOWED_URI_REGEXP||LO,rc=Se.NAMESPACE||al,ie=Se.CUSTOM_ELEMENT_HANDLING||{},Se.CUSTOM_ELEMENT_HANDLING&&fh(Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&fh(Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ie.allowCustomizedBuiltInElements=Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),uo&&(Ue=!1),No&&(Eo=!0),xr&&(It=$o({},[...Up]),xt=[],!0===xr.html&&($o(It,e0),$o(xt,MO)),!0===xr.svg&&($o(It,Kf),$o(xt,o0),$o(xt,r0)),!0===xr.svgFilters&&($o(It,Wd),$o(xt,o0),$o(xt,r0)),!0===xr.mathMl&&($o(It,t0),$o(xt,n0),$o(xt,r0))),Se.ADD_TAGS&&(It===dt&&(It=$d(It)),$o(It,Se.ADD_TAGS,wr)),Se.ADD_ATTR&&(xt===to&&(xt=$d(xt)),$o(xt,Se.ADD_ATTR,wr)),Se.ADD_URI_SAFE_ATTR&&$o(Gs,Se.ADD_URI_SAFE_ATTR,wr),Se.FORBID_CONTENTS&&(os===ia&&(os=$d(os)),$o(os,Se.FORBID_CONTENTS,wr)),Pt&&(It["#text"]=!0),Wt&&$o(It,["html","head","body"]),It.table&&($o(It,["tbody"]),delete ue.tbody),Se.TRUSTED_TYPES_POLICY){if("function"!=typeof Se.TRUSTED_TYPES_POLICY.createHTML)throw Wf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof Se.TRUSTED_TYPES_POLICY.createScriptURL)throw Wf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');q=Se.TRUSTED_TYPES_POLICY,$=q.createHTML("")}else void 0===q&&(q=function(Nt,Jt){if("object"!=typeof Nt||"function"!=typeof Nt.createPolicy)return null;let bn=null;const Kn="data-tt-policy-suffix";Jt&&Jt.hasAttribute(Kn)&&(bn=Jt.getAttribute(Kn));const En="dompurify"+(bn?"#"+bn:"");try{return Nt.createPolicy(En,{createHTML:Yn=>Yn,createScriptURL:Yn=>Yn})}catch{return console.warn("TrustedTypes policy "+En+" could not be created."),null}}(S,i)),null!==q&&"string"==typeof $&&($=q.createHTML(""));ws&&ws(Se),Fc=Se}},IR=$o({},["mi","mo","mn","ms","mtext"]),$1=$o({},["foreignobject","desc","title","annotation-xml"]),Qb=$o({},["title","style","font","a","script"]),Zb=$o({},Kf);$o(Zb,Wd),$o(Zb,qC);const W1=$o({},t0);$o(W1,qD);const xm=function(Se){$f(n.removed,{element:Se});try{Se.parentNode.removeChild(Se)}catch{Se.remove()}},bh=function(Se,Nt){try{$f(n.removed,{attribute:Nt.getAttributeNode(Se),from:Nt})}catch{$f(n.removed,{attribute:null,from:Nt})}if(Nt.removeAttribute(Se),"is"===Se&&!xt[Se])if(Eo||No)try{xm(Nt)}catch{}else try{Nt.setAttribute(Se,"")}catch{}},PR=function(Se){let Nt,Jt;if(Tt)Se="<remove></remove>"+Se;else{const En=tm(Se,/^[\r\n\t ]+/);Jt=En&&En[0]}"application/xhtml+xml"===Pl&&rc===al&&(Se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Se+"</body></html>");const bn=q?q.createHTML(Se):Se;if(rc===al)try{Nt=(new O).parseFromString(bn,Pl)}catch{}if(!Nt||!Nt.documentElement){Nt=ne.createDocument(rc,"template",null);try{Nt.documentElement.innerHTML=Fg?$:bn}catch{}}const Kn=Nt.body||Nt.documentElement;return Se&&Jt&&Kn.insertBefore(c.createTextNode(Jt),Kn.childNodes[0]||null),rc===al?pe.call(Nt,Wt?"html":"body")[0]:Wt?Nt.documentElement:Kn},LR=function(Se){return ce.call(Se.ownerDocument||Se,Se,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},Kx=function(Se){return"object"==typeof p?Se instanceof p:Se&&"object"==typeof Se&&"number"==typeof Se.nodeType&&"string"==typeof Se.nodeName},iu=function(Se,Nt,Jt){se[Se]&&WD(se[Se],bn=>{bn.call(n,Nt,Jt,Fc)})},q1=function(Se){let Nt;if(iu("beforeSanitizeElements",Se,null),(Jt=Se)instanceof C&&("string"!=typeof Jt.nodeName||"string"!=typeof Jt.textContent||"function"!=typeof Jt.removeChild||!(Jt.attributes instanceof x)||"function"!=typeof Jt.removeAttribute||"function"!=typeof Jt.setAttribute||"string"!=typeof Jt.namespaceURI||"function"!=typeof Jt.insertBefore||"function"!=typeof Jt.hasChildNodes))return xm(Se),!0;var Jt;const bn=wr(Se.nodeName);if(iu("uponSanitizeElement",Se,{tagName:bn,allowedTags:It}),Se.hasChildNodes()&&!Kx(Se.firstElementChild)&&(!Kx(Se.content)||!Kx(Se.content.firstElementChild))&&Tl(/<[/\w]/g,Se.innerHTML)&&Tl(/<[/\w]/g,Se.textContent))return xm(Se),!0;if(!It[bn]||ue[bn]){if(!ue[bn]&&G1(bn)&&(ie.tagNameCheck instanceof RegExp&&Tl(ie.tagNameCheck,bn)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(bn)))return!1;if(Pt&&!os[bn]){const Kn=F(Se)||Se.parentNode,En=P(Se)||Se.childNodes;if(En&&Kn)for(let Yn=En.length-1;Yn>=0;--Yn)Kn.insertBefore(T(En[Yn],!0),D(Se))}return xm(Se),!0}return Se instanceof f&&!function(Kn){let En=F(Kn);En&&En.tagName||(En={namespaceURI:rc,tagName:"template"});const Yn=cd(Kn.tagName),tr=cd(En.tagName);return!!hh[Kn.namespaceURI]&&(Kn.namespaceURI===su?En.namespaceURI===al?"svg"===Yn:En.namespaceURI===ns?"svg"===Yn&&("annotation-xml"===tr||IR[tr]):Boolean(Zb[Yn]):Kn.namespaceURI===ns?En.namespaceURI===al?"math"===Yn:En.namespaceURI===su?"math"===Yn&&$1[tr]:Boolean(W1[Yn]):Kn.namespaceURI===al?!(En.namespaceURI===su&&!$1[tr])&&!(En.namespaceURI===ns&&!IR[tr])&&!W1[Yn]&&(Qb[Yn]||!Zb[Yn]):!("application/xhtml+xml"!==Pl||!hh[Kn.namespaceURI]))}(Se)?(xm(Se),!0):"noscript"!==bn&&"noembed"!==bn&&"noframes"!==bn||!Tl(/<\/no(script|embed|frames)/i,Se.innerHTML)?(uo&&3===Se.nodeType&&(Nt=Se.textContent,Nt=_s(Nt,de," "),Nt=_s(Nt,ye," "),Nt=_s(Nt,Le," "),Se.textContent!==Nt&&($f(n.removed,{element:Se.cloneNode()}),Se.textContent=Nt)),iu("afterSanitizeElements",Se,null),!1):(xm(Se),!0)},Yx=function(Se,Nt,Jt){if(Fo&&("id"===Nt||"name"===Nt)&&(Jt in c||Jt in Hg))return!1;if((!Ue||ze[Nt]||!Tl(rt,Nt))&&(!He||!Tl(Ye,Nt)))if(!xt[Nt]||ze[Nt]){if(!(G1(Se)&&(ie.tagNameCheck instanceof RegExp&&Tl(ie.tagNameCheck,Se)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(Se))&&(ie.attributeNameCheck instanceof RegExp&&Tl(ie.attributeNameCheck,Nt)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(Nt))||"is"===Nt&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&Tl(ie.tagNameCheck,Jt)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(Jt))))return!1}else if(!Gs[Nt]&&!Tl(jt,_s(Jt,kt,""))&&("src"!==Nt&&"xlink:href"!==Nt&&"href"!==Nt||"script"===Se||0!==Zy(Jt,"data:")||!Ea[Se])&&(!wt||Tl(Mt,_s(Jt,kt,"")))&&Jt)return!1;return!0},G1=function(Se){return Se.indexOf("-")>0},K1=function(Se){let Nt,Jt,bn,Kn;iu("beforeSanitizeAttributes",Se,null);const{attributes:En}=Se;if(!En)return;const Yn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xt};for(Kn=En.length;Kn--;){Nt=En[Kn];const{name:tr,namespaceURI:Vg}=Nt;Jt="value"===tr?Nt.value:WC(Nt.value);const zR=Jt;if(bn=wr(tr),Yn.attrName=bn,Yn.attrValue=Jt,Yn.keepAttr=!0,Yn.forceKeepAttr=void 0,iu("uponSanitizeAttribute",Se,Yn),Jt=Yn.attrValue,Yn.forceKeepAttr)continue;if(!Yn.keepAttr){bh(tr,Se);continue}if(!zt&&Tl(/\/>/i,Jt)){bh(tr,Se);continue}uo&&(Jt=_s(Jt,de," "),Jt=_s(Jt,ye," "),Jt=_s(Jt,Le," "));const Xx=wr(Se.nodeName);if(Yx(Xx,bn,Jt)){if(!Cs||"id"!==bn&&"name"!==bn||(bh(tr,Se),Jt="user-content-"+Jt),q&&"object"==typeof S&&"function"==typeof S.getAttributeType&&!Vg)switch(S.getAttributeType(Xx,bn)){case"TrustedHTML":Jt=q.createHTML(Jt);break;case"TrustedScriptURL":Jt=q.createScriptURL(Jt)}if(Jt!==zR)try{Vg?Se.setAttributeNS(Vg,tr,Jt):Se.setAttribute(tr,Jt)}catch{bh(tr,Se)}}else bh(tr,Se)}iu("afterSanitizeAttributes",Se,null)},FR=function Se(Nt){let Jt;const bn=LR(Nt);for(iu("beforeSanitizeShadowDOM",Nt,null);Jt=bn.nextNode();)iu("uponSanitizeShadowNode",Jt,null),q1(Jt)||(Jt.content instanceof d&&Se(Jt.content),K1(Jt));iu("afterSanitizeShadowDOM",Nt,null)};return n.sanitize=function(Se){let Nt,Jt,bn,Kn,En=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Fg=!Se,Fg&&(Se="\x3c!--\x3e"),"string"!=typeof Se&&!Kx(Se)){if("function"!=typeof Se.toString)throw Wf("toString is not a function");if("string"!=typeof(Se=Se.toString()))throw Wf("dirty is not a string, aborting")}if(!n.isSupported)return Se;if(kn||Gx(En),n.removed=[],"string"==typeof Se&&(Mo=!1),Mo){if(Se.nodeName){const Vg=wr(Se.nodeName);if(!It[Vg]||ue[Vg])throw Wf("root node is forbidden and cannot be sanitized in-place")}}else if(Se instanceof p)Nt=PR("\x3c!----\x3e"),Jt=Nt.ownerDocument.importNode(Se,!0),1===Jt.nodeType&&"BODY"===Jt.nodeName||"HTML"===Jt.nodeName?Nt=Jt:Nt.appendChild(Jt);else{if(!Eo&&!uo&&!Wt&&-1===Se.indexOf("<"))return q&&po?q.createHTML(Se):Se;if(Nt=PR(Se),!Nt)return Eo?null:po?$:""}Nt&&Tt&&xm(Nt.firstChild);const Yn=LR(Mo?Se:Nt);for(;bn=Yn.nextNode();)q1(bn)||(bn.content instanceof d&&FR(bn.content),K1(bn));if(Mo)return Se;if(Eo){if(No)for(Kn=me.call(Nt.ownerDocument);Nt.firstChild;)Kn.appendChild(Nt.firstChild);else Kn=Nt;return(xt.shadowroot||xt.shadowrootmode)&&(Kn=we.call(s,Kn,!0)),Kn}let tr=Wt?Nt.outerHTML:Nt.innerHTML;return Wt&&It["!doctype"]&&Nt.ownerDocument&&Nt.ownerDocument.doctype&&Nt.ownerDocument.doctype.name&&Tl(FO,Nt.ownerDocument.doctype.name)&&(tr="<!DOCTYPE "+Nt.ownerDocument.doctype.name+">\n"+tr),uo&&(tr=_s(tr,de," "),tr=_s(tr,ye," "),tr=_s(tr,Le," ")),q&&po?q.createHTML(tr):tr},n.setConfig=function(Se){Gx(Se),kn=!0},n.clearConfig=function(){Fc=null,kn=!1},n.isValidAttribute=function(Se,Nt,Jt){Fc||Gx({});const bn=wr(Se),Kn=wr(Nt);return Yx(bn,Kn,Jt)},n.addHook=function(Se,Nt){"function"==typeof Nt&&(se[Se]=se[Se]||[],$f(se[Se],Nt))},n.removeHook=function(Se){if(se[Se])return Vp(se[Se])},n.removeHooks=function(Se){se[Se]&&(se[Se]=[])},n.removeAllHooks=function(){se={}},n}();const VO=$e.each,UO=$e.trim,ZD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],jp={ftp:21,http:80,https:443,mailto:25},eB=["img","video"],jO=(t,o,n)=>{const s=(i=>{try{return decodeURIComponent(i)}catch{return unescape(i)}})(o).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(s)||!t.allow_html_data_urls&&(/^data:image\//i.test(s)?(c=n,(ee(i=t.allow_svg_data_urls)?!i:!ee(c)||!st(eB,c))&&/^data:image\/svg\+xml/i.test(s)):/^data:/i.test(s)));var i,c};class Ol{static parseDataUri(o){let n;const s=decodeURIComponent(o).split(","),i=/data:([^;]+)/.exec(s[0]);return i&&(n=i[1]),{type:n,data:s[1]}}static isDomSafe(o,n,s={}){if(s.allow_script_urls)return!0;{const i=si.decode(o).replace(/[\s\u0000-\u001F]+/g,"");return!jO(s,i,n)}}static getDocumentBaseUrl(o){var n;let s;return s=0!==o.protocol.indexOf("http")&&"file:"!==o.protocol?null!==(n=o.href)&&void 0!==n?n:"":o.protocol+"//"+o.host+o.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(o,n={}){this.path="",this.directory="",o=UO(o),this.settings=n;const s=n.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o))return void(i.source=o);const c=0===o.indexOf("//");if(0!==o.indexOf("/")||c||(o=(s&&s.protocol||"http")+"://mce_host"+o),!/^[\w\-]*:?\/\//.test(o)){const u=s?s.path:new Ol(document.location.href).directory;if(""===s?.protocol)o="//mce_host"+i.toAbsPath(u,o);else{const p=/([^#?]*)([#?]?.*)/.exec(o);p&&(o=(s&&s.protocol||"http")+"://mce_host"+i.toAbsPath(u,p[1])+p[2])}}o=o.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);d&&VO(ZD,(u,p)=>{let f=d[p];f&&(f=f.replace(/\(mce_at\)/g,"@@")),i[u]=f}),s&&(i.protocol||(i.protocol=s.protocol),i.userInfo||(i.userInfo=s.userInfo),i.port||"mce_host"!==i.host||(i.port=s.port),i.host&&"mce_host"!==i.host||(i.host=s.host),i.source=""),c&&(i.protocol="")}setPath(o){const n=/^(.*?)\/?(\w+)?$/.exec(o);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(o){if("./"===o)return o;const n=new Ol(o,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const s=this.getURI(),i=n.getURI();if(s===i||"/"===s.charAt(s.length-1)&&s.substr(0,s.length-1)===i)return s;let c=this.toRelPath(this.path,n.path);return n.query&&(c+="?"+n.query),n.anchor&&(c+="#"+n.anchor),c}toAbsolute(o,n){const s=new Ol(o,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(o){if(this.host==o.host&&this.protocol==o.protocol){if(this.port==o.port)return!0;const n=this.protocol?jp[this.protocol]:null;if(n&&(this.port||n)==(o.port||n))return!0}return!1}toRelPath(o,n){let s,i,c=0,d="";const u=o.substring(0,o.lastIndexOf("/")).split("/"),p=n.split("/");if(u.length>=p.length)for(s=0,i=u.length;s<i;s++)if(s>=p.length||u[s]!==p[s]){c=s+1;break}if(u.length<p.length)for(s=0,i=p.length;s<i;s++)if(s>=u.length||u[s]!==p[s]){c=s+1;break}if(1===c)return n;for(s=0,i=u.length-(c-1);s<i;s++)d+="../";for(s=c-1,i=p.length;s<i;s++)d+=s!==c-1?"/"+p[s]:p[s];return d}toAbsPath(o,n){let s=0;const i=/\/$/.test(n)?"/":"",c=o.split("/"),d=n.split("/"),u=[];VO(c,x=>{x&&u.push(x)});const p=[];for(let x=d.length-1;x>=0;x--)0!==d[x].length&&"."!==d[x]&&(".."!==d[x]?s>0?s--:p.push(d[x]):s++);const f=u.length-s;let b;return b=f<=0?fa(p).join("/"):u.slice(0,f).join("/")+"/"+fa(p).join("/"),0!==b.indexOf("/")&&(b="/"+b),i&&b.lastIndexOf("/")!==b.length-1&&(b+=i),b}getURI(o=!1){let n;return this.source&&!o||(n="",o||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const tB=$e.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),GC="data-mce-type";let $O=0;const WO=(t,o,n,s,i)=>{var c,d,u,p;const f=o.validate,b=n.getSpecialElements();8===t.nodeType&&!o.allow_conditional_comments&&/^\[if/i.test(null!==(c=t.nodeValue)&&void 0!==c?c:"")&&(t.nodeValue=" "+t.nodeValue);const x=null!==(d=i?.tagName)&&void 0!==d?d:t.nodeName.toLowerCase();if("html"!==s&&n.isValid(s))return void(ee(i)&&(i.allowedTags[x]=!0));if(1!==t.nodeType||"body"===x)return;const C=re(t),O=gl(C,GC),S=Rr(C,"data-mce-bogus");if(!O&&_t(S))return void("all"===S?le(C):be(C));const R=n.getElementRule(x);if(!f||R){if(ee(i)&&(i.allowedTags[x]=!0),f&&R&&!O){if(Ee(null!==(u=R.attributesForced)&&void 0!==u?u:[],T=>{ln(C,T.name,"{$uid}"===T.value?"mce_"+$O++:T.value)}),Ee(null!==(p=R.attributesDefault)&&void 0!==p?p:[],T=>{gl(C,T.name)||ln(C,T.name,"{$uid}"===T.value?"mce_"+$O++:T.value)}),R.attributesRequired&&!Wo(R.attributesRequired,T=>gl(C,T))||R.removeEmptyAttrs&&(T=>{const D=T.dom.attributes;return null==D||0===D.length})(C))return void be(C);R.outputName&&R.outputName!==x&&((T,D)=>{const P=((q,$)=>{const ne=nr($),ce=_m(q);return jr(ne,ce),ne})(T,D);ri(T,P);const F=pr(T);j(P,F),le(T)})(C,R.outputName)}}else Gt(b,x)?le(C):be(C)},qO=(t,o,n,s,i,c)=>"html"!==n&&!Om(s)||!(i in tB&&jO(t,c,s))&&(!t.validate||o.isValid(s,i)||tt(i,"data-")||tt(i,"aria-")),GO=(t,o)=>t.hasAttribute(GC)&&("id"===o||"class"===o||"style"===o),s0=(t,o)=>t in o.getBoolAttrs(),Yf=(t,o,n,s)=>{const{attributes:i}=t;for(let c=i.length-1;c>=0;c--){const d=i[c],u=d.name,p=d.value;qO(o,n,s,t.tagName.toLowerCase(),u,p)||GO(t,u)?s0(u,n)&&t.setAttribute(u,u):t.removeAttribute(u)}},Xf=t=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`)};return HO().sanitize(t,n),t.innerHTML},$p=$e.makeMap,KC=$e.extend,YO=(t,o,n,s)=>{const i=t.name,c=i in n&&"title"!==i&&"textarea"!==i,d=o.childNodes;for(let u=0,p=d.length;u<p;u++){const f=d[u],b=new pt(f.nodeName.toLowerCase(),f.nodeType);if(Te(f)){const x=f.attributes;for(let C=0,O=x.length;C<O;C++){const S=x[C];b.attr(S.name,S.value)}Om(b.name)&&(s(f),b.value=f.innerHTML)}else Ae(f)?(b.value=f.data,c&&(b.raw=!0)):(_e(f)||Oo(f)||Bn(f))&&(b.value=f.data);Om(b.name)||YO(b,f,n,s),t.append(b)}},Wp=(t={},o=Au())=>{const n=Uf(),s=Uf(),i={validate:!0,root_name:"body",sanitize:!0,...t},c=new DOMParser,d=((R,T)=>{const D=(()=>{let P=[];const F=()=>P[P.length-1];return{track:q=>{op(q)&&P.push(q);let $=F();return $&&!$.contains(q)&&(P.pop(),$=F()),av($)},current:()=>av(F()),reset:()=>{P=[]}}})();if(R.sanitize){const P=((t,o,n)=>{const s=HO();return s.addHook("uponSanitizeElement",(i,c)=>{WO(i,t,o,n.track(i),c)}),s.addHook("uponSanitizeAttribute",(i,c)=>{((d,u,p,f,b)=>{const x=d.tagName.toLowerCase(),{attrName:C,attrValue:O}=b;b.keepAttr=qO(u,p,f,x,C,O),b.keepAttr?(b.allowedAttributes[C]=!0,s0(C,p)&&(b.attrValue=C),u.allow_svg_data_urls&&tt(O,"data:image/svg+xml")&&(b.forceKeepAttr=!0)):GO(d,C)&&(b.forceKeepAttr=!0)})(i,t,o,n.current(),c)}),s})(R,T,D);return{sanitizeHtmlElement:(q,$)=>{P.sanitize(q,((ne,ce)=>{const me={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return me.PARSER_MEDIA_TYPE=ce,ne.allow_script_urls?me.ALLOWED_URI_REGEXP=/.*/:ne.allow_html_data_urls&&(me.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),me})(R,$)),P.removed=[],D.reset()},sanitizeNamespaceElement:Xf}}return{sanitizeHtmlElement:(P,F)=>{const q=document.createNodeIterator(P,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let $;for(;$=q.nextNode();){const ne=D.track($);WO($,R,T,ne),Te($)&&Yf($,R,T,ne)}D.reset()},sanitizeNamespaceElement:Kt}})(i,o),p=n.getFilters,x=s.getFilters,O=(R,T)=>{const D=_t(T.attr(GC)),P=1===T.type&&!Gt(R,T.name)&&!Th(o,T)&&!Om(T.name);return 3===T.type||P&&!D},S={schema:o,addAttributeFilter:s.addFilter,getAttributeFilters:x,removeAttributeFilter:s.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:p,removeNodeFilter:n.removeFilter,parse:(R,T={})=>{var D;const P=i.validate,F=null!==(D=T.context)&&void 0!==D?D:i.root_name,q=((ye,Le,rt="html")=>{const Ye="xhtml"===rt?"application/xhtml+xml":"text/html",Mt=Gt(o.getSpecialElements(),Le.toLowerCase()),kt=Mt?`<${Le}>${ye}</${Le}>`:ye,It=c.parseFromString("xhtml"===rt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${kt}</body></html>`:`<body>${kt}</body>`,Ye).body;return d.sanitizeHtmlElement(It,Ye),Mt?It.firstChild:It})(R,F,T.format);Dd(o,q);const $=new pt(F,11);YO($,q,o.getSpecialElements(),d.sanitizeNamespaceElement),q.innerHTML="";const[ne,ce]=((ye,Le,rt,Ye)=>{const Mt=rt.validate,kt=Le.getNonEmptyElements(),jt=Le.getWhitespaceElements(),It=KC($p("script,style,head,html,body,title,meta,param"),Le.getBlockElements()),dt=bt(Le),xt=/[ \t\r\n]+/g,to=/^[ \t\r\n]+/,ie=/[ \t\r\n]+$/,ue=Ue=>{let wt=Ue.parent;for(;ee(wt);){if(wt.name in jt)return!0;wt=wt.parent}return!1},ze=Ue=>Ue.name in It||Th(Le,Ue)||Om(Ue.name)&&Ue.parent===ye,He=(Ue,wt)=>!ee(wt?Ue.prev:Ue.next)&&!An(Ue.parent)&&ze(Ue.parent)&&(Ue.parent!==ye||!0===Ye.isRootContent);return[Ue=>{var wt,uo,Wt;if(3===Ue.type&&!ue(Ue)){let zt=null!==(wt=Ue.value)&&void 0!==wt?wt:"";zt=zt.replace(xt," "),Wt=ze,(ee(uo=Ue.prev)&&(Wt(uo)||"br"===uo.name)||He(Ue,!0))&&(zt=zt.replace(to,"")),0===zt.length?Ue.remove():Ue.value=zt}},Ue=>{var wt,Wt,kn;if(1===Ue.type){const zt=Le.getElementRule(Ue.name);if(Mt&&zt){const uo=Qu(Le,kt,jt,Ue);zt.paddInEmptyBlock&&uo&&(Wt=>{let kn=Wt;for(;ee(kn);){if(kn.name in dt)return Qu(Le,kt,jt,kn);kn=kn.parent}return!1})(Ue)?Df(rt,Ye,ze,Ue):zt.removeEmpty&&uo?ze(Ue)?Ue.remove():Ue.unwrap():zt.paddEmpty&&(uo||Oy(Wt=Ue,"#text")&&(null===(kn=Wt?.firstChild)||void 0===kn?void 0:kn.value)===Vn)&&Df(rt,Ye,ze,Ue)}}else if(3===Ue.type&&!ue(Ue)){let zt=null!==(wt=Ue.value)&&void 0!==wt?wt:"";(Ue.next&&ze(Ue.next)||He(Ue,!1))&&(zt=zt.replace(ie,"")),0===zt.length?Ue.remove():Ue.value=zt}}]})($,o,i,T),me=[],we={nodes:{},attributes:{}},se=ye=>uC(p(),x(),ye,we);if(((ye,Le,rt)=>{const Ye=[];for(let Mt=ye,kt=Mt;Mt;kt=Mt,Mt=Mt.walk()){const jt=Mt;Ee(Le,It=>It(jt)),An(jt.parent)&&jt!==ye?Mt=kt:Ye.push(jt)}for(let Mt=Ye.length-1;Mt>=0;Mt--){const kt=Ye[Mt];Ee(rt,jt=>jt(kt))}})($,[ne,se],[ce,P?ye=>{return rt=me,void(Ry(o,Le=ye)&&rt.push(Le));var Le,rt}:Kt]),me.reverse(),P&&me.length>0)if(T.context){const{pass:ye,fail:Le}=Rt(me,rt=>rt.parent===$);Ny(Le,o,$,se),T.invalid=ye.length>0}else Ny(me,o,$,se);const de=((ye,Le)=>{var rt;const Ye=null!==(rt=Le.forced_root_block)&&void 0!==rt?rt:ye.forced_root_block;return!1===Ye?"":!0===Ye?"p":Ye})(i,T);return de&&("body"===$.name||T.isRootContent)&&((ye,Le)=>{const rt=KC($p("script,style,head,html,body,title,meta,param"),o.getBlockElements()),Ye=/^[ \t\r\n]+/,Mt=/[ \t\r\n]+$/;let kt=ye.firstChild,jt=null;const It=dt=>{var xt,to;dt&&(kt=dt.firstChild,kt&&3===kt.type&&(kt.value=null===(xt=kt.value)||void 0===xt?void 0:xt.replace(Ye,"")),kt=dt.lastChild,kt&&3===kt.type&&(kt.value=null===(to=kt.value)||void 0===to?void 0:to.replace(Mt,"")))};if(o.isValidChild(ye.name,Le.toLowerCase())){for(;kt;){const dt=kt.next;O(rt,kt)?(jt||(jt=new pt(Le,1),jt.attr(i.forced_root_block_attrs),ye.insert(jt,kt)),jt.append(kt)):(It(jt),jt=null),kt=dt}It(jt)}})($,de),T.invalid||Ey(we,T),$}};return((t,o)=>{const n=t.schema;o.remove_trailing_brs&&IC(o,t,n),t.addAttributeFilter("href",i=>{let c=i.length;const d=u=>{const p=u?$e.trim(u):"";return/\b(noopener)\b/g.test(p)?p:p.split(" ").filter(b=>b.length>0).concat(["noopener"]).sort().join(" ")};if(!o.allow_unsafe_link_target)for(;c--;){const u=i[c];"a"===u.name&&"_blank"===u.attr("target")&&u.attr("rel",d(u.attr("rel")))}}),o.allow_html_in_named_anchor||t.addAttributeFilter("id,name",i=>{let c,d,u,p,f=i.length;for(;f--;)if(p=i[f],"a"===p.name&&p.firstChild&&!p.attr("href"))for(u=p.parent,c=p.lastChild;c&&u;)d=c.prev,u.insert(c,p),c=d}),o.fix_list_elements&&t.addNodeFilter("ul,ol",i=>{let c,d,u=i.length;for(;u--;)if(c=i[u],d=c.parent,d&&("ul"===d.name||"ol"===d.name))if(c.prev&&"li"===c.prev.name)c.prev.append(c);else{const p=new pt("li",1);p.attr("style","list-style-type: none"),c.wrap(p)}});const s=n.getValidClasses();o.validate&&s&&t.addAttributeFilter("class",i=>{var c;let d=i.length;for(;d--;){const u=i[d],p=null!==(c=u.attr("class"))&&void 0!==c?c:"",f=$e.explode(p," ");let b="";for(let x=0;x<f.length;x++){const C=f[x];let O=!1,S=s["*"];S&&S[C]&&(O=!0),S=s[u.name],!O&&S&&S[C]&&(O=!0),O&&(b&&(b+=" "),b+=C)}b.length||(b=null),u.attr("class",b)}}),((i,c)=>{const{blob_cache:d}=c;if(d){const u=p=>{const f=p.attr("src");var b;(b=p).attr("src")===Ht.transparentSrc||ee(b.attr("data-mce-placeholder"))||(b=>ee(b.attr("data-mce-bogus")))(p)||An(f)||HC(d,f,!0).each(b=>{p.attr("src",b.blobUri())})};i.addAttributeFilter("src",p=>Ee(p,u))}})(t,o),o.convert_unsafe_embeds&&t.addNodeFilter("object,embed",i=>Ee(i,c=>{c.replace(((d,u,p,f,b)=>{let x;x=et(d)?"iframe":Hp(d,"image")?"img":Hp(d,"video")?"video":Hp(d,"audio")?"audio":"iframe";const C=new pt(x,1);return C.attr("audio"===x?{src:u}:{src:u,width:p,height:f}),"audio"!==x&&"video"!==x||C.attr("controls",""),"iframe"===x&&b&&C.attr("sandbox",""),C})(c.attr("type"),c.attr("object"===c.name?"data":"src"),c.attr("width"),c.attr("height"),o.sandbox_iframes))})),o.sandbox_iframes&&t.addNodeFilter("iframe",i=>Ee(i,c=>c.attr("sandbox","")))})(S,i),(T=i).inline_styles&&((t,o,n)=>{var s;const i=Dh();var c,d,u;o.convert_fonts_to_spans&&(c=t,d=i,u=$e.explode(null!==(s=o.font_size_legacy_values)&&void 0!==s?s:""),c.addNodeFilter("font",p=>{Ee(p,f=>{const b=d.parse(f.attr("style")),x=f.attr("color"),C=f.attr("face"),O=f.attr("size");var S;x&&(b.color=x),C&&(b["font-family"]=C),O&&jn(O).each(S=>{b["font-size"]=u[S-1]}),f.name="span",f.attr("style",d.serialize(b)),S=f,Ee(["color","face","size"],T=>{S.attr(T,null)})})})),((c,d,u)=>{c.addNodeFilter("strike",p=>{const f="html4"!==d.type;Ee(p,b=>{if(f)b.name="s";else{const x=u.parse(b.attr("style"));x["text-decoration"]="line-through",b.name="span",b.attr("style",u.serialize(x))}})})})(t,n,i)})(S,T,o),S;var T},XO=(t,o,n)=>{const s=Bf(c=t)?Gu({validate:!1}).serialize(c):c,i=o(s);var c;if(i.isDefaultPrevented())return i;if(Bf(t)){if(i.content!==s){const c=Wp({validate:!1,forced_root_block:!1,...n}).parse(i.content,{context:t.name});return{...i,content:c}}return{...i,content:t}}return i},JO=(t,o)=>{if(o.no_events)return Sa.value(o);{const n=t.dispatch("BeforeGetContent",o);return n.isDefaultPrevented()?Sa.error(Ym(t,{content:"",...n}).content):Sa.value(n)}},YC=(t,o,n)=>n.no_events?o:XO(o,i=>Ym(t,{...n,content:i}),{sanitize:Iv(t),sandbox_iframes:e_(t)}).content,a0=(t,o)=>{if(o.no_events)return Sa.value(o);{const n=XO(o.content,s=>{return i=t,c={...o,content:s},i.dispatch("BeforeSetContent",c);var i,c},{sanitize:Iv(t),sandbox_iframes:e_(t)});return n.isDefaultPrevented()?(lf(t,n),Sa.error(void 0)):Sa.value(n)}},XC=(t,o,n)=>{n.no_events||lf(t,{...n,content:o})},qp=(t,o,n)=>({element:t,width:o,rows:n}),JC=(t,o)=>({element:t,cells:o}),cs=(t,o)=>({x:t,y:o}),lg=(t,o)=>Da(t,o).bind(jn).getOr(1),QO=(t,o,n)=>{const s=t.rows;return!!(s[n]?s[n].cells:[])[o]},i0=t=>Nn(t,(o,n)=>n.cells.length>o?n.cells.length:o,0),Jf=(t,o)=>{const n=t.rows;for(let s=0;s<n.length;s++){const i=n[s].cells;for(let c=0;c<i.length;c++)if(Qo(i[c],o))return H.some(cs(c,s))}return H.none()},qd=(t,o,n,s,i)=>{const c=[],d=t.rows;for(let u=n;u<=i;u++){const p=d[u].cells,f=o<s?p.slice(o,s+1):p.slice(s,o+1);c.push(JC(d[u].element,f))}return c},om=t=>((o,n)=>{const s=Ru(o.element),i=nr("tbody");return j(i,n),I(s,i),s})(t,qt(t.rows,n=>{const s=qt(n.cells,c=>{const d=ww(c);return Cr(d,"colspan"),Cr(d,"rowspan"),d}),i=Ru(n.element);return j(i,s),i})),ZO=()=>O_([]),Gd=(t,o)=>o>=0&&o<t.length&&Vu(t.charAt(o)),QC=t=>wa(t.innerText),l0=t=>Te(t)?t.outerHTML:Ae(t)?si.encodeRaw(t.data,!1):_e(t)?"\x3c!--"+t.data+"--\x3e":"",tA=ba(()=>document.implementation.createHTMLDocument("undo")),c0=t=>{const o=t.serializer.getTempAttrs(),n=oO(t.getBody(),o);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:ft(qt(dr(n.childNodes),lr(wa,l0)),s=>s.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:wa(n.innerHTML),bookmark:null,beforeBookmark:null}},ZC=(t,o,n)=>{const s=n?o.beforeBookmark:o.bookmark;"fragmented"===o.type?((t,o)=>{((n,s)=>{let i=0;Ee(n,c=>{var d,u;0===c[0]?i++:1===c[0]?(((d,u,p)=>{const f=(b=>{let x;const C=document.createElement("div"),O=document.createDocumentFragment();for(b&&(C.innerHTML=b);x=C.firstChild;)O.appendChild(x);return O})(u);d.hasChildNodes()&&p<d.childNodes.length?d.insertBefore(f,d.childNodes[p]):d.appendChild(f)})(s,c[1],i),i++):2===c[0]&&(u=i,(d=s).hasChildNodes()&&u<d.childNodes.length&&d.removeChild(d.childNodes[u]))})})(((n,s)=>{const i=n.length+s.length+2,c=new Array(i),d=new Array(i),u=(x,C,O,S,R)=>{const T=f(x,C,O,S);if(null===T||T.start===C&&T.diag===C-S||T.end===x&&T.diag===x-O){let D=x,P=O;for(;D<C||P<S;)D<C&&P<S&&n[D]===s[P]?(R.push([0,n[D]]),++D,++P):C-x>S-O?(R.push([2,n[D]]),++D):(R.push([1,s[P]]),++P)}else{u(x,T.start,O,T.start-T.diag,R);for(let D=T.start;D<T.end;++D)R.push([0,n[D]]);u(T.end,C,T.end-T.diag,S,R)}},p=(x,C,O,S)=>{let R=x;for(;R-C<S&&R<O&&n[R]===s[R-C];)++R;return{start:x,end:R,diag:C}},f=(x,C,O,S)=>{const R=C-x,T=S-O;if(0===R||0===T)return null;const D=R-T,P=T+R,F=(P%2==0?P:P+1)/2;let q,$,ne,ce,me;for(c[1+F]=x,d[1+F]=C+1,q=0;q<=F;++q){for($=-q;$<=q;$+=2){for(ne=$+F,c[ne]=$===-q||$!==q&&c[ne-1]<c[ne+1]?c[ne+1]:c[ne-1]+1,ce=c[ne],me=ce-x+O-$;ce<C&&me<S&&n[ce]===s[me];)c[ne]=++ce,++me;if(D%2!=0&&D-q<=$&&$<=D+q&&d[ne-D]<=c[ne])return p(d[ne-D],$+x-O,C,S)}for($=D-q;$<=D+q;$+=2){for(ne=$+F-D,d[ne]=$===D-q||$!==D+q&&d[ne+1]<=d[ne-1]?d[ne+1]-1:d[ne-1],ce=d[ne]-1,me=ce-x+O-$;ce>=x&&me>=O&&n[ce]===s[me];)d[ne]=ce--,me--;if(D%2==0&&-q<=$&&$<=q&&d[ne]<=c[ne+D])return p(d[ne],$+x-O,C,S)}}return null},b=[];return u(0,n.length,0,s.length,b),b})(qt(dr(o.childNodes),l0),t),o)})(o.fragments,t.getBody()):t.setContent(o.content,{format:"raw",no_selection:!ee(s)||!Jh(s)||!s.isFakeCaret}),s&&(t.selection.moveToBookmark(s),t.selection.scrollIntoView())},d0=t=>"fragmented"===t.type?t.fragments.join(""):t.content,eS=t=>{const o=nr("body",tA());return We(o,d0(t)),Ee(J(o,"*[data-mce-bogus]"),be),Ge(o)},cg=(t,o)=>{return!(!t||!o)&&(s=o,!(d0(t)!==d0(s))||((n,s)=>eS(n)===eS(s))(t,o));var s},u0=t=>0===t.get(),Qf=(t,o,n)=>{u0(n)&&(t.typing=o)},tS=(t,o)=>{t.typing&&(Qf(t,!1,o),t.add())},oS=t=>({init:{bindEvents:Kt},undoManager:{beforeChange:(o,n)=>{return s=t,c=n,void(u0(o)&&c.set(ra(s.selection)));var s,c},add:(o,n,s,i,c,d)=>((u,p,f,b,x,C,O)=>{const S=c0(u),R=$e.extend(C||{},S);if(!u0(b)||u.removed)return null;const T=p.data[f.get()];if(u.dispatch("BeforeAddUndo",{level:R,lastLevel:T,originalEvent:O}).isDefaultPrevented()||T&&cg(T,R))return null;p.data[f.get()]&&x.get().each(F=>{p.data[f.get()].beforeBookmark=F});const D=cD(u);if(D&&p.data.length>D){for(let F=0;F<p.data.length-1;F++)p.data[F]=p.data[F+1];p.data.length--,f.set(p.data.length)}R.bookmark=ra(u.selection),f.get()<p.data.length-1&&(p.data.length=f.get()+1),p.data.push(R),f.set(p.data.length-1);const P={level:R,lastLevel:T,originalEvent:O};return f.get()>0?(u.setDirty(!0),u.dispatch("AddUndo",P),u.dispatch("change",P)):u.dispatch("AddUndo",P),R})(t,o,n,s,i,c,d),undo:(o,n,s)=>((i,c,d,u)=>{let p;return c.typing&&(c.add(),c.typing=!1,Qf(c,!1,d)),u.get()>0&&(u.set(u.get()-1),p=c.data[u.get()],ZC(i,p,!0),i.setDirty(!0),i.dispatch("Undo",{level:p})),p})(t,o,n,s),redo:(o,n)=>((s,i,c)=>{let d;return i.get()<c.length-1&&(i.set(i.get()+1),d=c[i.get()],ZC(s,d,!1),s.setDirty(!0),s.dispatch("Redo",{level:d})),d})(t,o,n),clear:(o,n)=>{return s=t,c=n,(i=o).data=[],c.set(0),i.typing=!1,void s.dispatch("ClearUndos");var s,i,c},reset:o=>{return(n=o).clear(),void n.add();var n},hasUndo:(o,n)=>{return s=t,i=o,n.get()>0||i.typing&&i.data[0]&&!cg(c0(s),i.data[0]);var s,i},hasRedo:(o,n)=>{return s=o,n.get()<s.data.length-1&&!s.typing;var s},transact:(o,n,s)=>{return d=s,tS(i=o,n),i.beforeChange(),i.ignore(d),i.add();var i,d},ignore:(o,n)=>((s,i)=>{try{s.set(s.get()+1),i()}finally{s.set(s.get()-1)}})(o,n),extra:(o,n,s,i)=>((c,d,u,p,f)=>{if(d.transact(p)){const b=d.data[u.get()].bookmark,x=d.data[u.get()-1];ZC(c,x,!0),d.transact(f)&&(d.data[u.get()-1].beforeBookmark=b)}})(t,o,n,s,i)},formatter:{match:(o,n,s,i)=>zy(t,o,n,s,i),matchAll:(o,n)=>((s,i,c)=>{const d=[],u={},p=s.selection.getStart();return s.dom.getParent(p,f=>{for(let b=0;b<i.length;b++){const x=i[b];!u[x]&&Nc(s,f,x,c)&&(u[x]=!0,d.push(x))}},s.dom.getRoot()),d})(t,o,n),matchNode:(o,n,s,i)=>Nc(t,o,n,s,i),canApply:o=>((n,s)=>{const i=n.formatter.get(s),c=n.dom;if(i&&n.selection.isEditable()){const d=n.selection.getStart(),u=Yv(c,d);for(let p=i.length-1;p>=0;p--){const f=i[p];if(!Cl(f))return!0;for(let b=u.length-1;b>=0;b--)if(c.is(u[b],f.selector))return!0}}return!1})(t,o),closest:o=>((n,s)=>{const i=c=>Qo(c,re(n.getBody()));return H.from(n.selection.getStart(!0)).bind(c=>Py(re(c),d=>Xa(s,u=>{return Nc(n,d.dom,f=u)?H.some(f):H.none();var f}),i)).getOrNull()})(t,o),apply:(o,n,s)=>NC(t,o,n,s),remove:(o,n,s,i)=>Yy(t,o,n,s,i),toggle:(o,n,s)=>((i,c,d,u)=>{const p=i.formatter.get(c);p&&(!zy(i,c,d,u)||"toggle"in p[0]&&!p[0].toggle?NC(i,c,d,u):Yy(i,c,d,u))})(t,o,n,s),formatChanged:(o,n,s,i,c)=>{return((C,O,S,R,T,D)=>{const P=O.get();Ee(S.split(","),F=>{const q=Xo(P,F).getOrThunk(()=>{const ne={withSimilar:{state:Zo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Zo(!1),similar:!1,callbacks:[]},withVars:[]};return P[F]=ne,ne}),$=()=>{const ne=DC(C);return em(C,ne,F,T,D).isSome()};if(et(D)){const ne=T?q.withSimilar:q.withoutSimilar;ne.callbacks.push(R),1===ne.callbacks.length&&ne.state.set($())}else q.withVars.push({state:Zo($()),similar:T,vars:D,callback:R})}),O.set(P)})(t,u=o,p=n,f=s,i,c),{unbind:()=>((C,O,S)=>{const R=C.get();Ee(O.split(","),T=>Xo(R,T).each(D=>{R[T]={withSimilar:{...D.withSimilar,callbacks:ft(D.withSimilar.callbacks,P=>P!==S)},withoutSimilar:{...D.withoutSimilar,callbacks:ft(D.withoutSimilar.callbacks,P=>P!==S)},withVars:ft(D.withVars,P=>P.callback!==S)}})),C.set(R)})(u,p,f)};var u,p,f}},editor:{getContent:o=>{return s=o,H.from((n=t).getBody()).fold(Ve("tree"===s.format?new pt("body",11):""),i=>((t,o,n)=>{let s;return s="raw"===o.format?$e.trim(wa(oO(n,t.serializer.getTempAttrs()).innerHTML)):"text"===o.format?((i,c)=>{const d=i.getDoc(),u=hl(re(i.getBody())),p=nr("div",d);ln(p,"data-mce-bogus","all"),Ed(p,{position:"fixed",left:"-9999999px",top:"0"}),We(p,c.innerHTML),nO(p),$t(p);const f=Yc(x=u)?x:re(ni(x).dom.body);var x;I(f,p);const b=wa(p.dom.innerText);return le(p),b})(t,n):"tree"===o.format?t.serializer.serialize(n,o):((i,c)=>{const d=Rs(i),u=new RegExp(`^(<${d}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${d}>[\r\n]*|<br \\/>[\r\n]*)$`);return c.replace(u,"")})(t,t.serializer.serialize(n,o)),"text"!==o.format&&!Ot(re(n))&&_t(s)?$e.trim(s):s})(n,s,i));var n,s},setContent:(o,n)=>{return i=o,c=n,H.from((s=t).getBody()).map(d=>Bf(i)?((u,p,f,b)=>{Ty(u.parser.getNodeFilters(),u.parser.getAttributeFilters(),f);const x=Gu({validate:!1},u.schema).serialize(f),C=wa(Ot(re(p))?x:$e.trim(x));return Ip(u,C,b.no_selection),{content:f,html:C}})(s,d,i,c):((u,p,f,b)=>{if(0===(f=wa(f)).length||/^\s+$/.test(f)){const x='<br data-mce-bogus="1">';"TABLE"===p.nodeName?f="<tr><td>"+x+"</td></tr>":/^(UL|OL)$/.test(p.nodeName)&&(f="<li>"+x+"</li>");const C=Rs(u);return u.schema.isValidChild(p.nodeName.toLowerCase(),C.toLowerCase())?(f=x,f=u.dom.createHTML(C,Ji(u),f)):f||(f=x),Ip(u,f,b.no_selection),{content:f,html:f}}{"raw"!==b.format&&(f=Gu({validate:!1},u.schema).serialize(u.parser.parse(f,{isRootContent:!0,insert:!0})));const x=Ot(re(p))?f:$e.trim(f);return Ip(u,x,b.no_selection),{content:x,html:x}}})(s,d,i,c)).getOr({content:i,html:Bf(c.content)?"":c.content});var s,i,c},insertContent:(o,n)=>kO(t,o,n),addVisual:o=>((n,s)=>{const i=n.dom,c=ee(s)?s:n.getBody();Ee(i.select("table,a",c),d=>{switch(d.nodeName){case"TABLE":const u=uD(n),p=i.getAttrib(d,"border");p&&"0"!==p||!n.hasVisual?i.removeClass(d,u):i.addClass(d,u);break;case"A":if(!i.getAttrib(d,"href")){const f=i.getAttrib(d,"name")||d.id,b=Dv(n);f&&n.hasVisual?i.addClass(d,b):i.removeClass(d,b)}}}),n.dispatch("VisualAid",{element:s,hasVisual:n.hasVisual})})(t,o)},selection:{getContent:(o,n)=>((s,i,c={})=>{const d=(u=c,p=i,{...u,format:p,get:!0,selection:!0,getInner:!0});var u,p;return JO(s,d).fold(un,u=>{const p=((f,b)=>{if("text"===b.format)return H.from((x=f).selection.getRng()).map(C=>{var O;const S=H.from(x.dom.getParent(C.commonAncestorContainer,x.dom.isBlock)),R=x.getBody(),T=S.map(ne=>ne.nodeName).getOr("div").toLowerCase(),D=re(C.cloneContents());nO(D),$t(D);const P=x.dom.add(R,T,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},D.dom),F=QC(P),q=wa(null!==(O=P.textContent)&&void 0!==O?O:"");if(x.dom.remove(P),Gd(q,0)||Gd(q,q.length-1)){const $=S.getOr(R),ne=QC($),ce=ne.indexOf(F);return-1===ce?F:(Gd(ne,ce-1)?" ":"")+F+(Gd(ne,ce+F.length)?" ":"")}return F}).getOr("");var x;{const x=((C,O)=>{const S=C.selection.getRng(),R=C.dom.create("body"),T=C.selection.getSel(),D=j_(C,Zh(T)),P=O.contextual?((t,o,n)=>{const s=$v(o,t);return s.length>0?((t,o)=>{return(n=t,s=o[0],$i(s,"table",it(Qo,n))).bind(n=>{const s=o[0],i=o[o.length-1],c=(d=>{const u=qp(Ru(d),0,[]);return Ee(J(d,"tr"),(p,f)=>{Ee(J(p,"td,th"),(b,x)=>{((C,O,S,R,T)=>{const D=lg(T,"rowspan"),P=lg(T,"colspan"),F=C.rows;for(let q=S;q<S+D;q++){F[q]||(F[q]=JC(ww(R),[]));for(let $=O;$<O+P;$++)F[q].cells[$]=q===S&&$===O?T:Ru(T)}})(u,((C,O,S)=>{for(;QO(C,O,S);)O++;return O})(u,x,f),f,p,b)})}),qp(u.element,i0(u.rows),u.rows)})(n);return(d=c,u=s,p=i,Jf(d,u).bind(f=>Jf(d,p).map(b=>((x,C,O)=>{const S=C.x,R=C.y,T=O.x,D=O.y,P=R<D?qd(x,S,R,T,D):qd(x,S,D,T,R);return qp(x.element,i0(P),P)})(d,f,b)))).map(d=>O_([om(d)]));var d,u,p}).getOrThunk(ZO);var n,s})(t,s):(i=t,d=n,(c=o).length>0&&c[0].collapsed?ZO():(u=i,f=d,((b,x)=>{const C=Nn(x,(O,S)=>(I(S,O),S),b);return x.length>0?O_([C]):C})(re((p=c[0]).cloneContents()),((t,o,n)=>{const s=re(o.commonAncestorContainer),i=Hd(s,t),c=ft(i,p=>n.isWrapper(Po(p))),d=(f=o,yn(p=i,b=>"li"===Po(b)&&ef(b,f)).fold(Ve([]),b=>{return(x=p,yn(x,C=>"ul"===Po(C)||"ol"===Po(C))).map(x=>{const C=nr(Po(x)),O=zr(hc(x),(S,R)=>tt(R,"list-style"));return Ed(C,O),[nr("li"),C]}).getOr([]);var x})),u=c.concat(d.length?d:(p=>Qn(p)?Ma(p).filter(is).fold(Ve([]),f=>[p,f]):is(p)?[p]:[])(s));var p,f;return qt(u,Ru)})(u,p,f))));var i,c,d,u,p,f})(re(C.getBody()),D,C.schema).dom:S.cloneContents();return P&&R.appendChild(P),C.selection.serializer.serialize(R,O)})(f,b);return"tree"===b.format?x:f.selection.isCollapsed()?"":x}})(s,u);return YC(s,p,u)})})(t,o,n)},autocompleter:{addDecoration:o=>((t,o)=>{if(YT(re(t.getBody())).isNone()){const s=Vi('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());I(s,re(o.extractContents())),o.insertNode(s.dom),Ma(s).each(i=>i.dom.normalize()),(n=s,((i,c)=>{const d=u=>{const p=pr(u);for(let f=p.length-1;f>=0;f--){const b=p[f];if(c(b))return H.some(b);const x=d(b);if(x.isSome())return x}return H.none()};return d(i)})(n,GT)).map(i=>{var c;t.selection.setCursorLocation(i.dom,"img"===Po(c=i)?1:Dr(c).fold(()=>pr(c).length,d=>d.length))})}var n})(t,o),removeDecoration:()=>{return o=t,n=re(t.getBody()),YT(n).each(s=>{const i=o.selection.getBookmark();be(s),o.selection.moveToBookmark(i)});var o,n}},raw:{getModel:()=>H.none()}}),Bc=t=>Gt(t.plugins,"rtc"),m0=t=>t.rtcInstance?t.rtcInstance:oS(t),Gr=t=>{const o=t.rtcInstance;if(o)return o;throw new Error("Failed to get RTC instance not yet initialized.")},nS=t=>Gr(t).init.bindEvents(),rS=t=>0===t.dom.length?(le(t),H.none()):H.some(t),g0=(t,o,n,s,i)=>{t.bind(c=>((s?Np:Yu)(c.dom,s?c.dom.length:0,i),o.filter(Go).map(d=>((u,p,f,b,x)=>{const C=u.dom,O=p.dom,S=b?C.length:O.length;b?(Sf(C,O,x,!1,!b),f.setStart(O,S)):(Sf(O,C,x,!1,!b),f.setEnd(O,S))})(c,d,n,s,i)))).orThunk(()=>{return(d=o,u=s,d.filter(p=>Qi.isBookmarkNode(p.dom)).bind(u?Kc:ta)).or(o).filter(Go).map(d=>((u,p,f)=>{Ma(u).each(b=>{const x=u.dom;p&&_f(b,Oe(x,0),f)?Yu(x,0,f):!p&&Cf(b,Oe(x,x.length),f)&&Np(x,x.length,f)})})(d,s,i));var d,u})},Yp=(t,o,n)=>{if(Gt(t,o)){const s=ft(t[o],i=>i!==n);0===s.length?delete t[o]:t[o]=s}},sS=t=>!(!t||!t.ownerDocument)&&Ui(re(t.ownerDocument),re(t)),aS=(t,o,n,s)=>{let i,c;const{selectorChangedWithUnbind:d}=((T,D)=>{let P,F;const q=(ne,ce)=>yn(ce,me=>T.is(me,ne)),$=ne=>T.getParents(ne,void 0,T.getRoot());return{selectorChangedWithUnbind:(ne,ce)=>(P||(P={},F={},D.on("NodeChange",me=>{const pe=me.element,we=$(pe),se={};Yo(P,(de,ye)=>{q(ye,we).each(Le=>{F[ye]||(Ee(de,rt=>{rt(!0,{node:Le,selector:ye,parents:we})}),F[ye]=de),se[ye]=de})}),Yo(F,(de,ye)=>{se[ye]||(delete F[ye],Ee(de,Le=>{Le(!1,{node:pe,selector:ye,parents:we})}))})})),P[ne]||(P[ne]=[]),P[ne].push(ce),q(ne,$(D.selection.getStart())).each(()=>{F[ne]=P[ne]}),{unbind:()=>{Yp(P,ne,ce),Yp(F,ne,ce)}})}})(t,s),u=(T,D)=>((P,F,q={})=>{const $=(ne=q,ce=F,{format:"html",...ne,set:!0,selection:!0,content:ce});var ne,ce;a0(P,$).each(ne=>{const ce=((pe,we)=>{if("raw"!==we.format){const se=pe.selection.getRng(),de=pe.dom.getParent(se.commonAncestorContainer,pe.dom.isBlock),ye=de?{context:de.nodeName.toLowerCase()}:{},Le=pe.parser.parse(we.content,{forced_root_block:!1,...ye,...we});return Gu({validate:!1},pe.schema).serialize(Le)}return we.content})(P,ne),me=P.selection.getRng();((pe,we,se)=>{const de=H.from(we.firstChild).map(re),ye=H.from(we.lastChild).map(re);pe.deleteContents(),pe.insertNode(we);const Le=de.bind(ta).filter(Go).bind(rS),rt=ye.bind(Kc).filter(Go).bind(rS);g0(Le,de,pe,!0,se),g0(rt,ye,pe,!1,se),pe.collapse(!1)})(me,me.createContextualFragment(ce),P.schema),P.selection.setRng(me),hf(P,me),XC(P,ce,ne)})})(s,T,D),p=T=>{const D=b();D.collapse(!!T),x(D)},f=()=>o.getSelection?o.getSelection():o.document.selection,b=()=>{let T;const D=(F,q,$)=>{try{return q.compareBoundaryPoints(F,$)}catch{return-1}},P=o.document;if(ee(s.bookmark)&&!eg(s)){const F=ly(s);if(F.isSome())return F.map(q=>j_(s,[q])[0]).getOr(P.createRange())}try{const F=f();F&&!qe(F.anchorNode)&&(T=F.rangeCount>0?F.getRangeAt(0):P.createRange(),T=j_(s,[T])[0])}catch{}if(T||(T=P.createRange()),Bo(T.startContainer)&&T.collapsed){const F=t.getRoot();T.setStart(F,0),T.setEnd(F,0)}return i&&c&&(0===D(T.START_TO_START,T,i)&&0===D(T.END_TO_END,T,i)?T=c:(i=null,c=null)),T},x=(T,D)=>{if(!((F=T)&&sS(F.startContainer)&&sS(F.endContainer)))return;var F;const P=f();if(T=s.dispatch("SetSelectionRange",{range:T,forward:D}).range,P){c=T;try{P.removeAllRanges(),P.addRange(T)}catch{}!1===D&&P.extend&&(P.collapse(T.endContainer,T.endOffset),P.extend(T.startContainer,T.startOffset)),i=P.rangeCount>0?P.getRangeAt(0):null}if(!T.collapsed&&T.startContainer===T.endContainer&&P?.setBaseAndExtent&&T.endOffset-T.startOffset<2&&T.startContainer.hasChildNodes()){const F=T.startContainer.childNodes[T.startOffset];F&&"IMG"===F.nodeName&&(P.setBaseAndExtent(T.startContainer,T.startOffset,T.endContainer,T.endOffset),P.anchorNode===T.startContainer&&P.focusNode===T.endContainer||P.setBaseAndExtent(F,0,F,1))}s.dispatch("AfterSetSelectionRange",{range:T,forward:D})},C=()=>{const T=f(),D=T?.anchorNode,P=T?.focusNode;if(!T||!D||!P||qe(D)||qe(P))return!0;const F=t.createRng(),q=t.createRng();try{F.setStart(D,T.anchorOffset),F.collapse(!0),q.setStart(P,T.focusOffset),q.collapse(!0)}catch{return!0}return F.compareBoundaryPoints(F.START_TO_START,q)<=0},O={dom:t,win:o,serializer:n,editor:s,expand:(T={type:"word"})=>x(qu(t).expand(b(),T)),collapse:p,setCursorLocation:(T,D)=>{const P=t.createRng();ee(T)&&ee(D)?(P.setStart(T,D),P.setEnd(T,D),x(P),p(!1)):(tf(t,P,s.getBody(),!0),x(P))},getContent:T=>((D,P={})=>{return q=P.format?P.format:"html",$=P,Gr(D).selection.getContent(q,$);var q,$})(s,T),setContent:u,getBookmark:(T,D)=>S.getBookmark(T,D),moveToBookmark:T=>S.moveToBookmark(T),select:(T,D)=>{return(P=t,F=T,q=D,H.from(F).bind($=>H.from($.parentNode).map(ne=>{const ce=P.nodeIndex($),me=P.createRng();return me.setStart(ne,ce),me.setEnd(ne,ce+1),q&&(tf(P,me,$,!0),tf(P,me,$,!1)),me}))).each(x),T;var P,F,q},isCollapsed:()=>{const T=b(),D=f();return!(!T||T.item)&&(T.compareEndPoints?0===T.compareEndPoints("StartToEnd",T):!D||T.collapsed)},isEditable:()=>{const T=b(),D=s.getBody().querySelectorAll('[data-mce-selected="1"]');return D.length>0?cr(D,P=>t.isEditable(P.parentElement)):V_(t,T)},isForward:C,setNode:T=>(u(t.getOuterHTML(T)),T),getNode:()=>((T,D)=>{if(!D)return T;let P=D.startContainer,F=D.endContainer;const q=D.startOffset,$=D.endOffset;let ne=D.commonAncestorContainer;D.collapsed||(P===F&&$-q<2&&P.hasChildNodes()&&(ne=P.childNodes[q]),Ae(P)&&Ae(F)&&(P=P.length===q?qT(P.nextSibling,!0):P.parentNode,F=0===$?qT(F.previousSibling,!1):F.parentNode,P&&P===F&&(ne=P)));const ce=Ae(ne)?ne.parentNode:ne;return Dt(ce)?ce:T})(s.getBody(),b()),getSel:f,setRng:x,getRng:b,getStart:T=>$T(s.getBody(),b(),T),getEnd:T=>WT(s.getBody(),b(),T),getSelectedBlocks:(T,D)=>((P,F,q,$)=>{const ne=[],ce=P.getRoot(),me=P.getParent(q||$T(ce,F,F.collapsed),P.isBlock),pe=P.getParent($||WT(ce,F,F.collapsed),P.isBlock);if(me&&me!==ce&&ne.push(me),me&&pe&&me!==pe){let we;const se=new he(me,ce);for(;(we=se.next())&&we!==pe;)P.isBlock(we)&&ne.push(we)}return pe&&me!==pe&&pe!==ce&&ne.push(pe),ne})(t,b(),T,D),normalize:()=>{const T=b(),D=f();if(!(Zh(D).length>1)&&fn(s)){const P=mf(t,T);return P.each(F=>{x(F,C())}),P.getOr(T)}return T},selectorChanged:(T,D)=>(d(T,D),O),selectorChangedWithUnbind:d,getScrollContainer:()=>{let T,D=t.getRoot();for(;D&&"BODY"!==D.nodeName;){if(D.scrollHeight>D.clientHeight){T=D;break}D=D.parentNode}return T},scrollIntoView:(T,D)=>{var P;ee(T)?((P=s).inline?PT:ny)(P,T,D):hf(s,b(),D)},placeCaretAt:(T,D)=>x(ST(T,D,s.getDoc())),getBoundingClientRect:()=>{const T=b();return T.collapsed?Oe.fromRangeStart(T).getClientRects()[0]:T.getBoundingClientRect()},destroy:()=>{o=i=c=null,R.destroy()}},S=Qi(O),R=$u(O,s);return O.bookmarkManager=S,O.controlSelection=R,O},p0=(t,o,n)=>{-1===$e.inArray(o,n)&&(t.addAttributeFilter(n,(s,i)=>{let c=s.length;for(;c--;)s[c].attr(i,null)}),o.push(n))},oA=(t,o)=>{const n=((t,o)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},i=o&&o.dom?o.dom:Sn.DOM,c=o&&o.schema?o.schema:Au(s),d=Wp(s,c);return p=s,f=i,(u=d).addAttributeFilter("data-mce-tabindex",(b,x)=>{let C=b.length;for(;C--;){const O=b[C];O.attr("tabindex",O.attr("data-mce-tabindex")),O.attr(x,null)}}),u.addAttributeFilter("src,href,style",(b,x)=>{const C="data-mce-"+x,O=p.url_converter,S=p.url_converter_scope;let R=b.length;for(;R--;){const T=b[R];let D=T.attr(C);void 0!==D?(T.attr(x,D.length>0?D:null),T.attr(C,null)):(D=T.attr(x),"style"===x?D=f.serializeStyle(f.parseStyle(D),T.name):O&&(D=O.call(S,D,x,T.name)),T.attr(x,D.length>0?D:null))}}),u.addAttributeFilter("class",b=>{let x=b.length;for(;x--;){const C=b[x];let O=C.attr("class");O&&(O=O.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),C.attr("class",O.length>0?O:null))}}),u.addAttributeFilter("data-mce-type",(b,x,C)=>{let O=b.length;for(;O--;){const S=b[O];"bookmark"===S.attr("data-mce-type")&&!C.cleanup&&(H.from(S.firstChild).exists(T=>{var D;return!Cu(null!==(D=T.value)&&void 0!==D?D:"")})?S.unwrap():S.remove())}}),u.addNodeFilter("noscript",b=>{var x;let C=b.length;for(;C--;){const O=b[C].firstChild;O&&(O.value=si.decode(null!==(x=O.value)&&void 0!==x?x:""))}}),u.addNodeFilter("script,style",(b,x)=>{var C;const O=R=>R.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let S=b.length;for(;S--;){const R=b[S],T=R.firstChild,D=null!==(C=T?.value)&&void 0!==C?C:"";if("script"===x){const P=R.attr("type");P&&R.attr("type","mce-no/type"===P?null:P.replace(/^mce\-/,"")),"xhtml"===p.element_format&&T&&D.length>0&&(T.value="// <![CDATA[\n"+O(D)+"\n// ]]>")}else"xhtml"===p.element_format&&T&&D.length>0&&(T.value="\x3c!--\n"+O(D)+"\n--\x3e")}}),u.addNodeFilter("#comment",b=>{let x=b.length;for(;x--;){const C=b[x],O=C.value;p.preserve_cdata&&0===O?.indexOf("[CDATA[")?(C.name="#cdata",C.type=4,C.value=f.decode(O.replace(/^\[CDATA\[|\]\]$/g,""))):0===O?.indexOf("mce:protected ")&&(C.name="#text",C.type=3,C.raw=!0,C.value=unescape(O).substr(14))}}),u.addNodeFilter("xml:namespace,input",(b,x)=>{let C=b.length;for(;C--;){const O=b[C];7===O.type?O.remove():1===O.type&&("input"!==x||O.attr("type")||O.attr("type","text"))}}),u.addAttributeFilter("data-mce-type",b=>{Ee(b,x=>{"format-caret"===x.attr("data-mce-type")&&(x.isEmpty(u.schema.getNonEmptyElements())?x.remove():x.unwrap())})}),u.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(b,x)=>{let C=b.length;for(;C--;)b[C].attr(x,null)}),p.remove_trailing_brs&&IC(p,u,u.schema),{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(u,p={})=>{const f={format:"html",...p},b=(S=u,D=R=f,ee(T=O=o)&&T.hasEventListeners("PreProcess")&&!D.no_events?((T,D,P)=>{let F;const q=T.dom;let $=D.cloneNode(!0);const ne=document.implementation;if(ne.createHTMLDocument){const ce=ne.createHTMLDocument("");$e.each("BODY"===$.nodeName?$.childNodes:[$],me=>{ce.body.appendChild(ce.importNode(me,!0))}),$="BODY"!==$.nodeName?ce.body.firstChild:ce.body,F=q.doc,q.doc=ce}return me={...P,node:$},T.dispatch("PreProcess",me),F&&(q.doc=F),$;var me})(O,S,R):S),x=((O,S,R)=>{const T=wa(R.getInner?S.innerHTML:O.getOuterHTML(S));return R.selection||Ot(re(S))?T:$e.trim(T)})(i,b,f),C=((O,S,R)=>{const T=R.selection?{forced_root_block:!1,...R}:R,D=O.parse(S,T);return(P=>{const F=$=>"br"===$?.name,q=P.lastChild;if(F(q)){const $=q.prev;F($)&&(q.remove(),$.remove())}})(D),D})(d,x,f);var O,S,R,T,D;return"tree"===f.format?C:((O,S,R,T,D)=>{var $;return((F,q,$)=>{return!q.no_events&&F?(ce=F,me={...q,content:$},ce.dispatch("PostProcess",me)).content:$;var ce,me})(O,D,($=T,Gu(S,R).serialize($)))})(o,s,c,C,f)},addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:it(p0,d,n),getTempAttrs:Ve(n),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter};var u,p,f})(t,o);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},dd=(t,o,n={})=>{const s=(i=n,c=o,{format:"html",...i,set:!0,content:c});var i,c;return a0(t,s).map(i=>{const c=(u=i.content,p=i,m0(t).editor.setContent(u,p));var u,p;return XC(t,c.html,i),c.content}).getOr(o)},iS="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),nA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Zf="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),lS=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],h0=(t,o)=>{const n=ft(o,s=>Gt(t,s));return Rn(n)},f0=(t,o)=>{const n=$e.makeMap(t.plugins," "),s=ft(o,i=>Gt(n,i));return Rn(s)},b0=t=>yn(lS,o=>o.name===t).fold(()=>t,o=>o.replacedWith?`${t}, replaced by ${o.replacedWith}`:t),Ws=Sn.DOM,dg=t=>H.from(t).each(o=>o.destroy()),ud=(()=>{const t={};return{add:(o,n)=>{t[o]=n},get:o=>t[o]?t[o]:{icons:{}},has:o=>Gt(t,o)}})(),ug=Tr.ModelManager,hi=(t,o)=>o.dom[t],nm=(t,o)=>parseInt(As(o,t),10),iA=it(hi,"clientWidth"),lA=it(hi,"clientHeight"),cA=it(nm,"margin-top"),eb=it(nm,"margin-left"),v0=t=>{const o=[],n=()=>{const p=t.theme;return p&&p.getNotificationManagerImpl?p.getNotificationManagerImpl():(()=>{const f=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:f,close:f,getArgs:f}})()},s=()=>H.from(o[0]),i=()=>{Ee(o,p=>{p.reposition()})},c=p=>{la(o,f=>f===p).each(f=>{o.splice(f,1)})},d=(p,f=!0)=>{return t.removed||!(x=(b=t).inline?b.getBody():b.getContentAreaContainer(),H.from(x).map(re)).map(Xc).getOr(!1)?{}:(f&&t.dispatch("BeforeOpenNotification",{notification:p}),yn(o,b=>{return!((x=n().getArgs(b)).type!==(C=p).type||x.text!==C.text||x.progressBar||x.timeout||C.progressBar||C.timeout);var x,C}).getOrThunk(()=>{t.editorManager.setActive(t);const b=n().open(p,()=>{c(b),i(),z_(t)&&s().fold(()=>t.focus(),x=>ry(re(x.getEl())))});return(x=>{o.push(x)})(b),i(),t.dispatch("OpenNotification",{notification:{...b}}),b}));var b,x},u=Ve(o);return(p=t).on("SkinLoaded",()=>{const f=RE(p);f&&d({text:f,type:"warning",timeout:0},!1),i()}),p.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(i)}),p.on("remove",()=>{Ee(o.slice(),f=>{n().close(f)})}),{open:d,close:()=>{s().each(p=>{n().close(p),c(p),i()})},getNotifications:u};var p},mg=Tr.PluginManager,gg=Tr.ThemeManager,y0=t=>{let o=[];const n=()=>{const d=t.theme;return d&&d.getWindowManagerImpl?d.getWindowManagerImpl():(()=>{const u=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:u,openUrl:u,alert:u,confirm:u,close:u}})()},s=(d,u)=>(...p)=>u?u.apply(d,p):void 0,i=d=>{t.dispatch("CloseWindow",{dialog:d}),o=ft(o,u=>u!==d),0===o.length&&t.focus()},c=d=>{t.editorManager.setActive(t),iy(t),t.ui.show();const u=d();return o.push(p=u),t.dispatch("OpenWindow",{dialog:p}),u;var p};return t.on("remove",()=>{Ee(o,d=>{n().close(d)})}),{open:(d,u)=>c(()=>n().open(d,u,i)),openUrl:d=>c(()=>n().openUrl(d,i)),alert:(d,u,p)=>{const f=n();f.alert(d,s(p||f,u))},confirm:(d,u,p)=>{const f=n();f.confirm(d,s(p||f,u))},close:()=>{H.from(o[o.length-1]).each(d=>{n().close(d),i(d)})}}},x0=(t,o)=>{t.notificationManager.open({type:"error",text:o})},w0=(t,o)=>{t._skinLoaded?x0(t,o):t.on("SkinLoaded",()=>{x0(t,o)})},ol=(t,o,n)=>{pi(t,o,{message:n}),console.error(n)},pg=(t,o,n)=>n?`Failed to load ${t}: ${n} from url ${o}`:`Failed to load ${t} url: ${o}`,hg=(t,...o)=>{const n=window.console;n&&(n.error?n.error(t,...o):n.log(t,...o))},tb=t=>"content/"+t+"/content.css",cS=(t,o)=>{const n=t.editorManager.baseURL+"/skins/content",s=`content${t.editorManager.suffix}.css`;return qt(o,i=>tinymce.Resource.has(tb(i))?i:/^[a-z0-9\-]+$/i.test(i)&&!t.inline?`${n}/${i}/${s}`:t.documentBaseURI.toAbsolute(i))},dS=()=>{let t={};const o=(s,i)=>({status:s,resultUri:i}),n=s=>s in t;return{hasBlobUri:n,getResultUri:s=>{const i=t[s];return i?i.resultUri:null},isPending:s=>!!n(s)&&1===t[s].status,isUploaded:s=>!!n(s)&&2===t[s].status,markPending:s=>{t[s]=o(1,null)},markUploaded:(s,i)=>{t[s]=o(2,i)},removeFailed:s=>{delete t[s]},destroy:()=>{t={}}}};let sB=0;const uS=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),mS=(t,o)=>((t,o)=>{const n={},s=(p,f)=>new Promise((b,x)=>{const C=new XMLHttpRequest;C.open("POST",o.url),C.withCredentials=o.credentials,C.upload.onprogress=S=>{f(S.loaded/S.total*100)},C.onerror=()=>{x("Image upload failed due to a XHR Transport error. Code: "+C.status)},C.onload=()=>{if(C.status<200||C.status>=300)return void x("HTTP Error: "+C.status);const S=JSON.parse(C.responseText);var R,T;S&&_t(S.location)?b((T=S.location,(R=o.basePath)?R.replace(/\/$/,"")+"/"+T.replace(/^\//,""):T)):x("Invalid JSON: "+C.responseText)};const O=new FormData;O.append("file",p.blob(),p.filename()),C.send(O)}),i=ut(o.handler)?o.handler:s,c=(p,f)=>({url:f,blobInfo:p,status:!0}),d=(p,f)=>({url:"",blobInfo:p,status:!1,error:f}),u=(p,f)=>{$e.each(n[p],b=>{b(f)}),delete n[p]};return{upload:(p,f)=>{return o.url||i!==s?(x=f,b=$e.grep(b=p,C=>!t.isUploaded(C.blobUri())),Promise.all($e.map(b,C=>{return t.isPending(C.blobUri())?(O=>{const S=O.blobUri();return new Promise(R=>{n[S]=n[S]||[],n[S].push(R)})})(C):(S=i,R=x,t.markPending((O=C).blobUri()),new Promise(T=>{let D,P;try{const F=()=>{D&&(D.close(),P=Kt)},q=ne=>{F(),t.markUploaded(O.blobUri(),ne),u(O.blobUri(),c(O,ne)),T(c(O,ne))},$=ne=>{F(),t.removeFailed(O.blobUri()),u(O.blobUri(),d(O,ne)),T(d(O,ne))};P=ne=>{ne<0||ne>100||H.from(D).orThunk(()=>H.from(R).map(Pr)).each(ce=>{D=ce,ce.progressBar.value(ne)})},S(O,P).then(q,ne=>{$(_t(ne)?{message:ne}:ne)})}catch(F){T(d(O,F))}}));var O,S,R}))):new Promise(b=>{b([])});var b,x}}})(o,{url:oD(t),basePath:nD(t),credentials:jw(t),handler:kE(t)}),_0={remove_similar:!0,inherit:!1},fg={selector:"td,th",..._0},pS={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...fg},tablecellverticalalign:{styles:{"vertical-align":"%value"},...fg},tablecellbordercolor:{styles:{borderColor:"%value"},...fg},tablecellclass:{classes:["%value"],...fg},tableclass:{selector:"table",classes:["%value"],..._0},tablecellborderstyle:{styles:{borderStyle:"%value"},...fg},tablecellborderwidth:{styles:{borderWidth:"%value"},...fg}},uA=Ve(pS),ob=$e.each,Ii=Sn.DOM,C0=t=>ee(t)&&vt(t),hS=(t,o)=>{const n=o&&o.schema||Au({}),s=d=>{const u=_t(d)?{name:d,classes:[],attrs:{}}:d,p=Ii.create(u.name);return f=p,(b=u).classes.length>0&&Ii.addClass(f,b.classes.join(" ")),Ii.setAttribs(f,b.attrs),p;var f,b},i=(d,u,p)=>{let f;const b=u[0],x=C0(b)?b.name:void 0,C=((R,T)=>{const P=n.getElementRule(R.nodeName.toLowerCase())?.parentsRequired;return!(!P||!P.length)&&(T&&st(P,T)?T:P[0])})(d,x);if(C)x===C?(f=b,u=u.slice(1)):f=C;else if(b)f=b,u=u.slice(1);else if(!p)return d;const O=f?s(f):Ii.create("div");O.appendChild(d),p&&$e.each(p,R=>{const T=s(R);O.insertBefore(T,d)});const S=C0(f)?f.siblings:void 0;return i(O,u,S)},c=Ii.create("div");if(t.length>0){const d=t[0],u=s(d),p=C0(d)?d.siblings:void 0;c.appendChild(i(u,t.slice(1),p))}return c},mA=t=>{let o="div";const n={name:o,classes:[],attrs:{},selector:t=$e.trim(t)};return"*"!==t&&(o=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,i,c,d,u)=>{switch(i){case"#":n.attrs.id=c;break;case".":n.classes.push(c);break;case":":-1!==$e.inArray("checked disabled enabled read-only required".split(" "),c)&&(n.attrs[c]=c)}if("["===d){const p=u.match(/([\w\-]+)(?:\=\"([^\"]+))?/);p&&(n.attrs[p[1]]=p[2])}return""})),n.name=o||"div",n},fS=(t,o)=>{let n="",s=sD(t);if(""===s)return"";const i=O=>_t(O)?O.replace(/%(\w+)/g,""):"",c=(O,S)=>Ii.getStyle(S??t.getBody(),O,!0);if(_t(o)){const O=t.formatter.get(o);if(!O)return"";o=O[0]}if("preview"in o){const O=o.preview;if(!1===O)return"";s=O||s}let d,u=o.block||o.inline||"span";const p=_t(f=o.selector)?(f=(f=f.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$e.map(f.split(/(?:>|\s+(?![^\[\]]+\]))/),O=>{const S=$e.map(O.split(/(?:~\+|~|\+)/),mA),R=S.pop();return S.length&&(R.siblings=S),R}).reverse()):[];var f;p.length>0?(p[0].name||(p[0].name=u),u=o.selector,d=hS(p,t)):d=hS([u],t);const b=Ii.select(u,d)[0]||d.firstChild;ob(o.styles,(O,S)=>{const R=i(O);R&&Ii.setStyle(b,S,R)}),ob(o.attributes,(O,S)=>{const R=i(O);R&&Ii.setAttrib(b,S,R)}),ob(o.classes,O=>{const S=i(O);Ii.hasClass(b,S)||Ii.addClass(b,S)}),t.dispatch("PreviewFormats"),Ii.setStyles(d,{position:"absolute",left:-65535}),t.getBody().appendChild(d);const x=c("fontSize"),C=/px$/.test(x)?parseInt(x,10):0;return ob(s.split(" "),O=>{let S=c(O,b);if(!("background-color"===O&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(S)&&(S=c(O),"#ffffff"===Dm(S).toLowerCase())||"color"===O&&"#000000"===Dm(S).toLowerCase())){if("font-size"===O&&/em|%$/.test(S)){if(0===C)return;S=parseFloat(S)/(/%$/.test(S)?100:1)*C+"px"}"border"===O&&S&&(n+="padding:0 2px;"),n+=O+":"+S+";"}}),t.dispatch("AfterPreviewFormats"),Ii.remove(d),n},gA=t=>{const o=(s=>{const i={},c=(d,u)=>{d&&(_t(d)?(qo(u)||(u=[u]),Ee(u,p=>{et(p.deep)&&(p.deep=!Cl(p)),et(p.split)&&(p.split=!Cl(p)||xs(p)),et(p.remove)&&Cl(p)&&!xs(p)&&(p.remove="none"),Cl(p)&&xs(p)&&(p.mixed=!0,p.block_expand=!0),_t(p.classes)&&(p.classes=p.classes.split(/\s+/))}),i[d]=u):Yo(d,(p,f)=>{c(f,p)}))};return c((d=>{const u=d.dom,p=d.schema.type,f={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:b=>{u.setStyle(b,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:b=>{u.setStyle(b,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const b={inline:"span",styles:{textDecoration:"line-through"},exact:!0},x={inline:"strike",remove:"all",preserve_attributes:["class","style"]},C={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==p?[C,b,x]:[b,C,x]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(b,x,C)=>Te(b)&&b.hasAttribute("href"),onformat:(b,x,C)=>{$e.each(C,(O,S)=>{u.setAttrib(b,S,O)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":b=>{var x;return null!==(x=b?.customValue)&&void 0!==x?x:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $e.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),b=>{f[b]={block:b,remove:"all"}}),f})(s)),c(uA()),c(Gw(s)),{get:d=>ee(d)?i[d]:i,has:d=>Gt(i,d),register:c,unregister:d=>(d&&i[d]&&delete i[d],i)}})(t),n=Zo({});return(s=>{s.addShortcut("meta+b","","Bold"),s.addShortcut("meta+i","","Italic"),s.addShortcut("meta+u","","Underline");for(let i=1;i<=6;i++)s.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);s.addShortcut("access+7","",["FormatBlock",!1,"p"]),s.addShortcut("access+8","",["FormatBlock",!1,"div"]),s.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(s=t).on("mouseup keydown",i=>{var c;((d,u,p)=>{const f=d.selection,b=d.getBody();jy(d,null,p),8!==u&&46!==u||!f.isCollapsed()||"\ufeff"!==f.getStart().innerHTML||jy(d,Fd(b,f.getStart()),!0),37!==u&&39!==u||jy(d,Fd(b,f.getStart()),!0)})(s,i.keyCode,(c=s.selection.getRng().endContainer,Ae(c)&&nt(c.data,Vn)))}),Bc(t)||((s,i)=>{s.set({}),i.on("NodeChange",c=>{BC(i,c.element,s.get())}),i.on("FormatApply FormatRemove",c=>{const d=H.from(c.node).map(u=>wp(u)?u:u.startContainer).bind(u=>Te(u)?H.some(u):H.from(u.parentElement)).getOrThunk(()=>RC(i));BC(i,d,s.get())})})(n,t),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply:(s,i,c)=>{var u,p,f;u=s,p=i,f=c,Gr(t).formatter.apply(u,p,f)},remove:(s,i,c,d)=>{var p,f,b,x;p=s,f=i,b=c,x=d,Gr(t).formatter.remove(p,f,b,x)},toggle:(s,i,c)=>{var u,p,f;u=s,p=i,f=c,Gr(t).formatter.toggle(u,p,f)},match:(s,i,c,d)=>{return p=s,f=i,b=c,x=d,Gr(t).formatter.match(p,f,b,x);var p,f,b,x},closest:s=>{return c=s,Gr(t).formatter.closest(c);var c},matchAll:(s,i)=>{return d=s,u=i,Gr(t).formatter.matchAll(d,u);var d,u},matchNode:(s,i,c,d)=>{return p=s,f=i,b=c,x=d,Gr(t).formatter.matchNode(p,f,b,x);var p,f,b,x},canApply:s=>{return c=s,Gr(t).formatter.canApply(c);var c},formatChanged:(s,i,c,d)=>{return p=n,f=s,b=i,x=c,C=d,Gr(t).formatter.formatChanged(p,f,b,x,C);var p,f,b,x,C},getCssText:it(fS,t)};var s},nb=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},bS=t=>{const o=ai(),n=Zo(0),s=Zo(0),i={data:[],typing:!1,beforeChange:()=>{var d,u;d=n,u=o,Gr(t).undoManager.beforeChange(d,u)},add:(c,d)=>{return p=i,f=s,b=n,x=o,C=c,O=d,Gr(t).undoManager.add(p,f,b,x,C,O);var p,f,b,x,C,O},dispatchChange:()=>{t.setDirty(!0);const c=c0(t);c.bookmark=ra(t.selection),t.dispatch("change",{level:c,lastLevel:Aa(i.data,s.get()).getOrUndefined()})},undo:()=>{return d=i,u=n,p=s,Gr(t).undoManager.undo(d,u,p);var d,u,p},redo:()=>{return d=s,u=i.data,Gr(t).undoManager.redo(d,u);var d,u},clear:()=>{var d,u;d=i,u=s,Gr(t).undoManager.clear(d,u)},reset:()=>{var d;d=i,Gr(t).undoManager.reset(d)},hasUndo:()=>{return d=i,u=s,Gr(t).undoManager.hasUndo(d,u);var d,u},hasRedo:()=>{return d=i,u=s,Gr(t).undoManager.hasRedo(d,u);var d,u},transact:c=>{return u=i,p=n,f=c,Gr(t).undoManager.transact(u,p,f);var u,p,f},ignore:c=>{var u,p;u=n,p=c,Gr(t).undoManager.ignore(u,p)},extra:(c,d)=>{var p,f,b,x;p=i,f=s,b=c,x=d,Gr(t).undoManager.extra(p,f,b,x)}};return Bc(t)||((c,d,u)=>{const p=Zo(!1),f=b=>{Qf(d,!1,u),d.add({},b)};c.on("init",()=>{d.add()}),c.on("BeforeExecCommand",b=>{nb(b.command)||(tS(d,u),d.beforeChange())}),c.on("ExecCommand",b=>{nb(b.command)||f(b)}),c.on("ObjectResizeStart cut",()=>{d.beforeChange()}),c.on("SaveContent ObjectResized blur",f),c.on("dragend",f),c.on("keyup",b=>{const x=b.keyCode;if(b.isDefaultPrevented())return;const C=Ht.os.isMacOS()&&"Meta"===b.key;(x>=33&&x<=36||x>=37&&x<=40||45===x||b.ctrlKey||C)&&(f(),c.nodeChanged()),46!==x&&8!==x||c.nodeChanged(),p.get()&&d.typing&&!cg(c0(c),d.data[0])&&(c.isDirty()||c.setDirty(!0),c.dispatch("TypingUndo"),p.set(!1),c.nodeChanged())}),c.on("keydown",b=>{const x=b.keyCode;if(!b.isDefaultPrevented()){if(!(x>=33&&x<=36||x>=37&&x<=40||45===x))return!(x<16||x>20)||224===x||91===x||d.typing||b.ctrlKey&&!b.altKey||b.metaKey?void((Ht.os.isMacOS()?b.metaKey:b.ctrlKey&&!b.altKey)&&d.beforeChange()):(d.beforeChange(),Qf(d,!0,u),d.add({},b),void p.set(!0));d.typing&&f(b)}}),c.on("mousedown",b=>{d.typing&&f(b)}),c.on("input",b=>{var x,C;b.inputType&&("insertReplacementText"===b.inputType||"insertText"===(x=b).inputType&&null===x.data||"insertFromPaste"===(C=b).inputType||"insertFromDrop"===C.inputType)&&f(b)}),c.on("AddUndo Undo Redo ClearUndos",b=>{b.isDefaultPrevented()||c.nodeChanged()})})(t,i,n),(c=t).addShortcut("meta+z","","Undo"),c.addShortcut("meta+y,meta+shift+z","","Redo"),i;var c},pA=[9,27,gt.HOME,gt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,gt.DOWN,gt.UP,gt.LEFT,gt.RIGHT].concat(Ht.browser.isFirefox()?[224]:[]),hA="data-mce-placeholder",fA=t=>"keydown"===t.type||"keyup"===t.type,vS=t=>{const o=t.keyCode;return o===gt.BACKSPACE||o===gt.DELETE},iB=(t,o)=>({from:t,to:o}),S0=(t,o)=>{const n=re(t),s=re(o.container());return Tf(n,s).map(i=>({block:i,position:o}))},bA=(t,o)=>hr(o,n=>Od(n)||on(n.dom),n=>Qo(n,t)).filter(Ts).getOr(t),vA=(t,o)=>{const n=((s,i)=>{const c=pr(s);return la(c,d=>i.isBlock(Po(d))).fold(Ve(c),d=>c.slice(0,d))})(t,o);return Ee(n,le),n},yA=(t,o)=>{const n=Hd(o,t);return yn(n.reverse(),s=>br(s)).each(le)},vr=(t,o,n,s,i)=>{if(br(n))return Fa(n),js(n.dom);0===ft(ji(i),d=>!br(d)).length&&br(o)&&kr(i,nr("br"));const c=di(n.dom,Oe.before(i.dom));return Ee(vA(o,s),d=>{kr(i,d)}),yA(t,o),c},yS=(t,o,n,s)=>{if(br(n)){if(br(o)){const d=Qs((u=>{const p=(f,b)=>yu(f).fold(()=>b,x=>s.isInline(Po(x))?p(x,b.concat(Ru(x))):b);return p(u,[])})(n),(u,p)=>(V(u,p),p),xa());X(o),I(o,d)}return le(n),js(o.dom)}const i=Di(n.dom);return Ee(vA(o,s),c=>{I(n,c)}),yA(t,o),i},xA=(t,o)=>{$m(t,o.dom).bind(n=>H.from(n.getNode())).map(re).filter(oa).each(le)},wA=(t,o,n,s)=>{return xA(!0,o),xA(!1,n),(i=o,c=n,Ui(c,i)?((d,u)=>{const p=Hd(u,d);return H.from(p[p.length-1])})(c,i):H.none()).fold(it(yS,t,o,n,s),it(vr,t,o,n,s));var i,c},bg=(t,o,n,s,i)=>o?wA(t,s,n,i):wA(t,n,s,i),md=(t,o)=>{const n=re(t.getBody());return(i=n.dom,c=o,d=t.selection.getRng(),d.collapsed?((u,p,f)=>{const b=S0(u,Oe.fromRangeStart(f)),x=b.bind(C=>li(p,u,C.position).bind(O=>S0(u,O).map(S=>{return R=u,T=p,Ft((D=S).position.getNode())&&!br(D.block)?$m(!1,D.block.dom).bind(P=>P.isEqual(D.position)?li(T,R,P).bind(F=>S0(R,F)):H.some(D)).getOr(D):D;var R,T,D})));return mr(b,x,iB).filter(C=>{return!Qo((O=C).from.block,O.to.block)&&((O,S)=>{const R=re(O);return Qo(bA(R,S.from.block),bA(R,S.to.block))})(u,C)&&(O=>!1===zo(O.from.block.dom)&&!1===zo(O.to.block.dom))(C)&&(O=>{const S=R=>qi(R)||rp(R.dom);return S(O.from.block)&&S(O.to.block)})(C);var O})})(i,c,d):H.none()).map(i=>()=>{bg(n,o,i.from.block,i.to.block,t.schema).each(c=>{t.selection.setRng(c.toRange())})});var i,c,d},gd=(t,o)=>{const n=re(o),s=it(Qo,t);return Hn(n,Od,s).isSome()},k0=(t,o)=>t.selection.isCollapsed()?H.none():(t=>{const o=re(t.getBody());return((n,s)=>{const i=di(n.dom,Oe.fromRangeStart(s)).isNone(),c=ci(n.dom,Oe.fromRangeEnd(s)).isNone();return!(gd(d=n,(u=s).startContainer)||gd(d,u.endContainer))&&i&&c;var d,u})(o,t.selection.getRng())?(n=t,H.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,s,i)=>{const c=s.getRng();return mr(Tf(n,re(c.startContainer)),Tf(n,re(c.endContainer)),(d,u)=>Qo(d,u)?H.none():H.some(()=>{c.deleteContents(),bg(n,!0,d,u,i).each(p=>{s.setRng(p.toRange())})})).getOr(H.none())})(o,t.selection,t.schema);var n})(t),pd=(t,o,n,s,i)=>H.from(o._selectionOverrides.showCaret(t,n,s,i)),rm=(t,o)=>t.dispatch("BeforeObjectSelected",{target:o}).isDefaultPrevented()?H.none():H.some((n=>{const s=n.ownerDocument.createRange();return s.selectNode(n),s})(o)),xS=(t,o,n)=>o.collapsed?((s,i,c)=>{const d=l_(1,s.getBody(),i),u=Oe.fromRangeStart(d),p=u.getNode();if(bp(p))return pd(1,s,p,!u.isAtEnd(),!1);const f=u.getNode(!0);if(bp(f))return pd(1,s,f,!1,!1);const b=ng(s.dom.getRoot(),u.getNode());return bp(b)?pd(1,s,b,!1,c):H.none()})(t,o,n).getOr(o):o,wS=t=>ad(t)||vf(t),CA=t=>id(t)||yf(t),_S=(t,o,n,s,i,c)=>{var d,u;pd(s,t,c.getNode(!i),i,!0).each(d=>{if(o.collapsed){const u=o.cloneRange();i?u.setEnd(d.startContainer,d.startOffset):u.setStart(d.endContainer,d.endOffset),u.deleteContents()}else o.deleteContents();t.selection.setRng(d)}),d=t.dom,Ae(u=n)&&0===u.data.length&&d.remove(u)},rb=(t,o)=>((n,s)=>{const i=n.selection.getRng();if(!Ae(i.commonAncestorContainer))return H.none();const c=s?Ds.Forwards:Ds.Backwards,d=ar(n.getBody()),u=it(c_,s?d.next:d.prev),p=s?wS:CA,f=Vm(c,n.getBody(),i),b=u(f),x=b&&el(s,b);if(!x||!Hv(f,x))return H.none();if(p(x))return H.some(()=>_S(n,i,f.getNode(),c,s,x));const C=u(x);return C&&p(C)&&Hv(x,C)?H.some(()=>_S(n,i,f.getNode(),c,s,C)):H.none()})(t,o),E0=(t,o)=>{const n=t.getBody();return o?js(n).filter(ad):Di(n).filter(id)},sb=t=>{const o=t.selection.getRng();return!o.collapsed&&(E0(t,!0).exists(n=>n.isEqual(Oe.fromRangeStart(o)))||E0(t,!1).exists(n=>n.isEqual(Oe.fromRangeEnd(o))))},Al=kc([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),SA=(t,o,n,s)=>li(o,t,n).bind(i=>{return c=i.getNode(),ee(c)&&(Od(re(c))||Qn(re(c)))||((d,u,p,f,b)=>{const x=C=>b.isInline(C.nodeName.toLowerCase())&&!od(p,f,d);return zv(!u,p).fold(()=>zv(u,f).fold(wo,x),x)})(t,o,n,i,s)?H.none():o&&zo(i.getNode())||!o&&zo(i.getNode(!0))?((d,u,p,f)=>{const b=f.getNode(!u);return Tf(re(d),re(p.getNode())).map(x=>br(x)?Al.remove(x.dom):Al.moveToElement(b)).orThunk(()=>H.some(Al.moveToElement(b)))})(t,o,n,i):o&&id(n)||!o&&ad(n)?H.some(Al.moveToPosition(i)):H.none();var c}),nl=(t,o)=>H.from(ng(t.getBody(),o)),EA=t=>{const o=t.dom,n=t.selection,s=ng(t.getBody(),n.getNode());if(on(s)&&o.isBlock(s)&&o.isEmpty(s)){const i=o.create("br",{"data-mce-bogus":"1"});o.setHTML(s,""),s.appendChild(i),n.setRng(Oe.before(i).toRange())}return!0},CS=(t,o)=>t.selection.isCollapsed()?((t,o)=>{const n=t.selection.getNode();return nl(t,n).filter(zo).fold(()=>((s,i,c,d)=>{const u=l_(i?1:-1,s,c),p=Oe.fromRangeStart(u),f=re(s);return!i&&id(p)?H.some(Al.remove(p.getNode(!0))):i&&ad(p)?H.some(Al.remove(p.getNode())):!i&&ad(p)&&tC(f,p,d)?tg(f,p,d).map(b=>Al.remove(b.getNode())):i&&id(p)&&pa(f,p,d)?Zn(f,p,d).map(b=>Al.remove(b.getNode())):(b=s,O=d,((S,R)=>{const T=R.getNode(!S),D=S?"after":"before";return Te(T)&&T.getAttribute("data-mce-caret")===D})(x=i,C=p)?(S=x,R=C.getNode(!x),An(R)?H.none():S&&zo(R.nextSibling)?H.some(Al.moveToElement(R.nextSibling)):!S&&zo(R.previousSibling)?H.some(Al.moveToElement(R.previousSibling)):H.none()).orThunk(()=>SA(b,x,C,O)):SA(b,x,C,O).bind(S=>((R,T,D)=>D.fold(P=>H.some(Al.remove(P)),P=>H.some(Al.moveToElement(P)),P=>od(T,P,R)?H.none():H.some(Al.moveToPosition(P))))(b,C,S)));var b,x,C,O,S,R})(t.getBody(),o,t.selection.getRng(),t.schema).map(s=>()=>{return s.fold((i=t,c=o,d=>(i._selectionOverrides.hideFakeCaret(),Xu(i,c,re(d)),!0)),((i,c)=>d=>{const u=c?Oe.before(d):Oe.after(d);return i.selection.setRng(u.toRange()),!0})(t,o),(i=>c=>(i.selection.setRng(c.toRange()),!0))(t));var i,c}),()=>H.some(Kt))})(t,o):((n,s)=>{const i=n.selection.getNode();return zo(i)&&!Ia(i)?nl(n,i.parentNode).filter(zo).fold(()=>H.some(()=>{var c;c=re(n.getBody()),Ee(J(c,".mce-offscreen-selection"),le),Xu(n,s,re(n.selection.getNode())),xy(n)}),()=>H.some(Kt)):sb(n)?H.some(()=>{Of(n,n.selection.getRng(),re(n.getBody()))}):H.none()})(t,o),Xp=(t,o)=>t.selection.isCollapsed()?((n,s)=>{const i=Oe.fromRangeStart(n.selection.getRng());return li(s,n.getBody(),i).filter(c=>s?aO(c):BD(c)).bind(c=>jo(s?0:-1,c)).map(c=>()=>n.selection.select(c))})(t,o):H.none(),Jp=Ae,TA=t=>Jp(t)&&t.data[0]===Er,SS=t=>Jp(t)&&t.data[t.data.length-1]===Er,T0=t=>{var o;return(null!==(o=t.ownerDocument)&&void 0!==o?o:document).createTextNode(Er)},O0=(t,o)=>t?(n=>{var s;if(Jp(n.previousSibling))return SS(n.previousSibling)||n.previousSibling.appendData(Er),n.previousSibling;if(Jp(n))return TA(n)||n.insertData(0,Er),n;{const i=T0(n);return null===(s=n.parentNode)||void 0===s||s.insertBefore(i,n),i}})(o):(n=>{var s,i;if(Jp(n.nextSibling))return TA(n.nextSibling)||n.nextSibling.insertData(0,Er),n.nextSibling;if(Jp(n))return SS(n)||n.appendData(Er),n;{const c=T0(n);return n.nextSibling?null===(s=n.parentNode)||void 0===s||s.insertBefore(c,n.nextSibling):null===(i=n.parentNode)||void 0===i||i.appendChild(c),c}})(o),lB=it(O0,!0),OA=it(O0,!1),kS=(t,o)=>Ae(t.container())?O0(o,t.container()):O0(o,t.getNode()),sm=(t,o)=>{const n=o.get();return n&&t.container()===n&&_a(n)},am=(t,o)=>o.fold(n=>{Oc(t.get());const s=lB(n);return t.set(s),H.some(Oe(s,s.length-1))},n=>js(n).map(s=>{if(sm(s,t)){const i=t.get();return Oe(i,1)}{Oc(t.get());const i=kS(s,!0);return t.set(i),Oe(i,1)}}),n=>Di(n).map(s=>{if(sm(s,t)){const i=t.get();return Oe(i,i.length-1)}{Oc(t.get());const i=kS(s,!1);return t.set(i),Oe(i,i.length-1)}}),n=>{Oc(t.get());const s=OA(n);return t.set(s),H.some(Oe(s,1))}),Qp=(t,o)=>{for(let n=0;n<t.length;n++){const s=t[n].apply(null,o);if(s.isSome())return s}return H.none()},ka=kc([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ES=(t,o)=>zu(o,t)||t,cB=(t,o,n)=>{const s=vy(n),i=ES(o,s.container());return Ac(t,i,s).fold(()=>ci(i,s).bind(it(Ac,t,i)).map(c=>ka.before(c)),H.none)},AA=(t,o)=>null===Fd(t,o),Zp=(t,o,n)=>Ac(t,o,n).filter(it(AA,o)),NA=(t,o,n)=>{const s=yy(n);return Zp(t,o,s).bind(i=>di(i,s).isNone()?H.some(ka.start(i)):H.none())},RA=(t,o,n)=>{const s=vy(n);return Zp(t,o,s).bind(i=>ci(i,s).isNone()?H.some(ka.end(i)):H.none())},DA=(t,o,n)=>{const s=yy(n),i=ES(o,s.container());return Ac(t,i,s).fold(()=>di(i,s).bind(it(Ac,t,i)).map(c=>ka.after(c)),H.none)},BA=t=>!og(ab(t)),sa=(t,o,n)=>Qp([cB,NA,RA,DA],[t,o,n]).filter(BA),ab=t=>t.fold(un,un,un,un),MA=t=>t.fold(Ve("before"),Ve("start"),Ve("end"),Ve("after")),A0=t=>t.fold(ka.before,ka.before,ka.after,ka.after),rn=t=>t.fold(ka.start,ka.start,ka.end,ka.end),dB=(t,o,n,s,i,c)=>mr(Ac(o,n,s),Ac(o,n,i),(d,u)=>d!==u&&((p,f,b)=>{const x=zu(f,p),C=zu(b,p);return ee(x)&&x===C})(n,d,u)?ka.after(t?d:u):c).getOr(c),uB=(t,o)=>t.fold(Vo,n=>{return i=o,!(MA(s=n)===MA(i)&&ab(s)===ab(i));var s,i}),er=(t,o)=>t?o.fold(lr(H.some,ka.start),H.none,lr(H.some,ka.after),H.none):o.fold(H.none,lr(H.some,ka.before),H.none,lr(H.some,ka.end)),IA=(t,o,n)=>{const s=t?1:-1;return o.setRng(Oe(n.container(),n.offset()+s).toRange()),o.getSel().modify("move",t?"forward":"backward","word"),!0};var rl;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(rl||(rl={}));const N0=(t,o)=>t===Ds.Backwards?fa(o):o,PA=(t,o,n)=>t===Ds.Forwards?o.next(n):o.prev(n),im=(t,o,n,s)=>Ft(s.getNode(o===Ds.Forwards))?rl.Br:!1===od(n,s)?rl.Block:rl.Wrap,fi=(t,o,n,s)=>{const i=ar(n);let c=s;const d=[];for(;c;){const u=PA(o,i,c);if(!u)break;if(Ft(u.getNode(!1)))return o===Ds.Forwards?{positions:N0(o,d).concat([u]),breakType:rl.Br,breakAt:H.some(u)}:{positions:N0(o,d),breakType:rl.Br,breakAt:H.some(u)};if(u.isVisible()){if(t(c,u)){const p=im(0,o,c,u);return{positions:N0(o,d),breakType:p,breakAt:H.some(u)}}d.push(u),c=u}else c=u}return{positions:N0(o,d),breakType:rl.Eol,breakAt:H.none()}},eh=(t,o,n,s)=>o(n,s).breakAt.map(i=>{const c=o(n,i).positions;return t===Ds.Backwards?c.concat(i):[i].concat(c)}).getOr([]),hd=(t,o)=>Nn(t,(n,s)=>n.fold(()=>H.some(s),i=>mr(gn(i.getClientRects()),gn(s.getClientRects()),(c,d)=>{const u=Math.abs(o-c.left);return Math.abs(o-d.left)<=u?s:i}).or(n)),H.none()),Nl=(t,o)=>gn(o.getClientRects()).bind(n=>hd(t,n.left)),Kd=it(fi,Oe.isAbove,-1),vg=it(fi,Oe.isBelow,1),R0=it(eh,-1,Kd),TS=it(eh,1,vg),OS=(t,o)=>Kd(t,o).breakAt.isNone(),LA=(t,o)=>vg(t,o).breakAt.isNone(),mB=(t,o)=>Nl(R0(t,o),o),FA=(t,o)=>Nl(TS(t,o),o),zA=zo,AS=(t,o)=>Math.abs(t.left-o),NS=(t,o)=>Math.abs(t.right-o),D0=(t,o)=>Na(t,(n,s)=>{const i=Math.min(AS(n,o),NS(n,o)),c=Math.min(AS(s,o),NS(s,o));return c===i&&Hr(s,"node")&&zA(s.node)||c<i?s:n}),gB=t=>{const o=n=>qt(n,s=>{const i=Gn(s);return i.node=t,i});if(Te(t))return o(t.getClientRects());if(Ae(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),o(n.getClientRects())}return[]},HA=t=>Lr(t,gB);var ib;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(ib||(ib={}));const Mc=(t,o,n,s,i,c)=>{let d=0;const u=[],p=x=>{let C=HA([x]);-1===t&&(C=C.reverse());for(let O=0;O<C.length;O++){const S=C[O];if(!n(S,f)){if(u.length>0&&o(S,Ss(u))&&d++,S.line=d,i(S))return!0;u.push(S)}}return!1},f=Ss(c.getClientRects());if(!f)return u;const b=c.getNode();return b&&(p(b),((x,C,O,S)=>{let R=S;for(;R=qh(R,x,ep,C);)if(O(R))return})(t,s,p,b)),u},lb=it(Mc,ib.Up,mp,Sc),VA=it(Mc,ib.Down,Sc,mp),RS=t=>Ss(t.getClientRects()),DS=t=>o=>o.line>t,BS=t=>o=>o.line===t,bi=(t,o)=>{t.selection.setRng(o),hf(t,t.selection.getRng())},MS=(t,o,n)=>H.some(xS(t,o,n)),UA=(t,o,n,s,i,c)=>{const d=o===Ds.Forwards,u=ar(t.getBody()),p=it(c_,d?u.next:u.prev),f=d?s:i;if(!n.collapsed){const S=gp(n);if(c(S))return pd(o,t,S,o===Ds.Backwards,!1);if(sb(t)){const R=n.cloneRange();return R.collapse(o===Ds.Backwards),H.from(R)}}const b=Vm(o,t.getBody(),n);if(f(b))return rm(t,b.getNode(!d));let x=p(b);const C=Jg(n);if(!x)return C?H.some(n):H.none();if(x=el(d,x),f(x))return pd(o,t,x.getNode(!d),d,!1);const O=p(x);return O&&f(O)&&Hv(x,O)?pd(o,t,O.getNode(!d),d,!1):C?MS(t,x.toRange(),!1):H.none()},jA=(t,o,n,s,i,c)=>{const d=Vm(o,t.getBody(),n),u=Ss(d.getClientRects()),p=o===ib.Down,f=t.getBody();if(!u)return H.none();if(sb(t)){const R=p?Oe.fromRangeEnd(n):Oe.fromRangeStart(n);return(p?FA:mB)(f,R).orThunk(()=>H.from(R)).map(T=>T.toRange())}const b=(p?VA:lb)(f,DS(1),d),x=ft(b,BS(1)),C=u.left,O=D0(x,C);if(O&&c(O.node)){const R=Math.abs(C-O.left),T=Math.abs(C-O.right);return pd(o,t,O.node,R<T,!1)}let S;if(S=s(d)?d.getNode():i(d)?d.getNode(!0):gp(n),S){const R=((D,P,F,q)=>{const $=ar(P);let ne,ce,me,pe;const we=[];let se=0;1===D?(ne=$.next,ce=Sc,me=mp,pe=Oe.after(q)):(ne=$.prev,ce=mp,me=Sc,pe=Oe.before(q));const de=RS(pe);do{if(!pe.isVisible())continue;const ye=RS(pe);if(me(ye,de))continue;we.length>0&&ce(ye,Ss(we))&&se++;const Le=Gn(ye);if(Le.position=pe,Le.line=se,F(Le))return we;we.push(Le)}while(pe=ne(pe));return we})(o,f,DS(1),S);let T=D0(ft(R,BS(1)),C);if(T||(T=Ss(ft(R,BS(0))),T))return MS(t,T.position.toRange(),!1)}return 0===x.length?IS(t,p).filter(p?i:s).map(R=>xS(t,R.toRange(),!1)):H.none()},IS=(t,o)=>{const n=t.selection.getRng(),s=o?Oe.fromRangeEnd(n):Oe.fromRangeStart(n),i=(c=s.container(),d=t.getBody(),Hn(re(c),u=>rT(u.dom),u=>u.dom===d).map(u=>u.dom).getOr(d));var c,d;if(o){const u=vg(i,s);return pn(u.positions)}{const u=Kd(i,s);return gn(u.positions)}},$A=(t,o,n)=>IS(t,o).filter(n).exists(s=>(t.selection.setRng(s.toRange()),!0)),B0=(t,o)=>{const n=t.dom.createRng();n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),t.selection.setRng(n)},WA=(t,o)=>{t?o.setAttribute("data-mce-selected","inline-boundary"):o.removeAttribute("data-mce-selected")},qA=(t,o,n)=>am(o,n).map(s=>(B0(t,s),n)),cb=(t,o,n)=>!!Lu(t)&&((t,o,n)=>{const s=t.getBody(),i=((c,d,u)=>{const p=Oe.fromRangeStart(c);if(c.collapsed)return p;{const f=Oe.fromRangeEnd(c);return u?di(d,f).getOr(f):ci(d,p).getOr(p)}})(t.selection.getRng(),s,n);return((c,d,u,p)=>{const f=el(c,p),b=sa(d,u,f);return sa(d,u,f).bind(it(er,c)).orThunk(()=>((x,C,O,S,R)=>{const T=el(x,R);return li(x,O,T).map(it(el,x)).fold(()=>S.map(A0),D=>sa(C,O,D).map(it(dB,x,C,O,T,D)).filter(it(uB,S))).filter(BA)})(c,d,u,b,p))})(n,it(tn,t),s,i).bind(c=>qA(t,o,c))})(t,o,n).isSome(),GA=(t,o,n)=>!!Lu(o)&&((s,i)=>{const c=i.selection.getRng(),d=s?Oe.fromRangeEnd(c):Oe.fromRangeStart(c);return!!ut(i.selection.getSel().modify)&&(s&&bc(d)?IA(!0,i.selection,d):!(s||!$l(d))&&IA(!1,i.selection,d))})(t,o),PS=it(GA,!0),yg=it(GA,!1),fd=(t,o,n)=>{if(Lu(t)){const s=IS(t,o).getOrThunk(()=>{const i=t.selection.getRng();return o?Oe.fromRangeEnd(i):Oe.fromRangeStart(i)});return sa(it(tn,t),t.getBody(),s).exists(i=>{const c=A0(i);return am(n,c).exists(d=>(B0(t,d),!0))})}return!1},ub=(t,o)=>n=>am(o,n).map(s=>()=>B0(t,s)),mb=(t,o,n,s)=>{const i=t.getBody(),c=it(tn,t);t.undoManager.ignore(()=>{t.selection.setRng(((d,u)=>{const p=document.createRange();return p.setStart(d.container(),d.offset()),p.setEnd(u.container(),u.offset()),p})(n,s)),Ef(t),sa(c,i,Oe.fromRangeStart(t.selection.getRng())).map(rn).bind(ub(t,o)).each(Ze)}),t.nodeChanged()},Yd=(t,o,n)=>{if(t.selection.isCollapsed()&&Lu(t)){const s=Oe.fromRangeStart(t.selection.getRng());return((i,c,d,u)=>{const p=(x=i.getBody(),C=u.container(),zu(C,x)||x),f=it(tn,i),b=sa(f,p,u);var x,C;return b.bind(x=>d?x.fold(Ve(H.some(rn(x))),H.none,Ve(H.some(A0(x))),H.none):x.fold(H.none,Ve(H.some(A0(x))),H.none,Ve(H.some(rn(x))))).map(ub(i,c)).getOrThunk(()=>{const x=Hu(d,p,u),C=x.bind(O=>sa(f,p,O));return mr(b,C,()=>Ac(f,p,u).bind(O=>{return mr(js(S=O),Di(S),(R,T)=>{const D=el(!0,R),P=el(!1,T);return ci(S,D).forall(F=>F.isEqual(P))}).getOr(!0)?H.some(()=>{Xu(i,d,re(O))}):H.none();var S})).getOrThunk(()=>C.bind(()=>x.map(O=>()=>{d?mb(i,c,u,O):mb(i,c,O,u)})))})})(t,o,n,s)}return H.none()},lm=(t,o)=>{const n=re(t.getBody()),s=re(t.selection.getStart()),i=Hd(s,n);return la(i,o).fold(Ve(i),c=>i.slice(0,c))},M0=t=>1===pc(t),gb=(t,o)=>{const n=it(Pf,t);return Lr(o,s=>n(s)?[s.dom]:[])},LS=t=>{const o=lm(n=t,s=>n.schema.isBlock(Po(s)));var n;return gb(t,o)},I0=(t,o)=>{const n=t.selection.getStart(),s=((i,c)=>{const d=c.parentElement;return Ft(c)&&!vn(d)&&i.dom.isEmpty(d)})(t,n)||__(re(n))?If(n,o):((i,c)=>{const{caretContainer:d,caretPosition:u}=$y(c);return i.insertNode(d.dom),u})(t.selection.getRng(),o);t.selection.setRng(s.toRange())},zS=t=>Ae(t.startContainer),cm=(t,o)=>t.selection.isCollapsed()?((t,o)=>{const n=ft(lm(s=t,i=>s.schema.isBlock(Po(i))||pc(i)>1),M0);var s;return pn(n).bind(s=>{const i=Oe.fromRangeStart(t.selection.getRng());return wy(o,i,s.dom)&&!__(s)?H.some(()=>((c,d,u,p)=>{const f=gb(d,p);if(0===f.length)Xu(d,c,u);else{const b=If(u.dom,f);d.selection.setRng(b.toRange())}})(o,t,s,n)):H.none()})})(t,o):(n=>{if((t=>{const o=t.selection.getRng();return 0===(n=o).startOffset&&zS(n)&&((n,s)=>{const i=s.startContainer.parentElement;return!vn(i)&&Pf(n,re(i))})(t,o)&&(n=>{return(i=>{const c=i.startContainer.parentNode,d=i.endContainer.parentNode;return!vn(c)&&!vn(d)&&c.isEqualNode(d)})(s=n)&&(i=>{const c=i.endContainer;return i.endOffset===(Ae(c)?c.length:c.childNodes.length)})(s)||(s=>!s.endContainer.isEqualNode(s.commonAncestorContainer))(n);var s})(o);var n})(n)){const s=LS(n);return H.some(()=>{Ef(n),((i,c)=>{const d=Si(c,LS(i));d.length>0&&I0(i,d)})(n,s)})}return H.none()})(t),th=t=>((o=>{const n=o.selection.getRng();return n.collapsed&&(zS(n)||o.dom.isEmpty(n.startContainer))&&!((t,o)=>Hn(t,n=>ui(n.dom),n=>o.isBlock(Po(n))).isSome())(re((s=o).selection.getStart()),s.schema);var s})(t)&&I0(t,[]),!0),P0=(t,o,n)=>ee(n)?H.some(()=>{t._selectionOverrides.hideFakeCaret(),Xu(t,o,re(n))}):H.none(),oh=(t,o)=>t.selection.isCollapsed()?((n,s)=>{const i=s?vf:yf,d=Vm(s?Ds.Forwards:Ds.Backwards,n.getBody(),n.selection.getRng());return i(d)?P0(n,s,d.getNode(!s)):H.from(el(s,d)).filter(u=>i(u)&&Hv(d,u)).bind(u=>P0(n,s,u.getNode(!s)))})(t,o):((n,s)=>{const i=n.selection.getNode();return fo(i)?P0(n,s,i):H.none()})(t,o),L0=t=>jn(t??"").getOr(0),HS=(t,o)=>(t||"table"===Po(o)?"margin":"padding")+("rtl"===As(o,"direction")?"-right":"-left"),VS=t=>{const o=bd(t);return!t.mode.isReadOnly()&&(o.length>1||(n=t,cr(o,i=>{const c=HS(Un(n),i),d=Wi(i,c).map(L0).getOr(0);return"false"!==n.dom.getContentEditable(i.dom)&&d>0})));var n},US=t=>is(t)||Qn(t),bd=t=>ft(Pe(t.selection.getSelectedBlocks()),o=>!US(o)&&!Ma(o).exists(US)&&hr(o,n=>on(n.dom)||zo(n.dom)).exists(n=>on(n.dom))),Xd=(t,o)=>{var n,s;const{dom:i}=t,c=EE(t),d=null!==(s=null===(n=/[a-z%]+$/i.exec(c))||void 0===n?void 0:n[0])&&void 0!==s?s:"px",u=L0(c),p=Un(t);Ee(bd(t),f=>{((b,x,C,O,S,R)=>{const T=HS(C,re(R)),D=L0(b.getStyle(R,T));if("outdent"===x){const P=Math.max(0,D-O);b.setStyle(R,T,P?P+S:"")}else b.setStyle(R,T,D+O+S)})(i,o,p,u,d,f.dom)})},Rl=t=>Xd(t,"outdent"),F0=t=>{if(t.selection.isCollapsed()&&VS(t)){const o=t.dom,n=t.selection.getRng(),s=Oe.fromRangeStart(n),i=o.getParent(n.startContainer,o.isBlock);if(null!==i&&py(re(i),s,t.schema))return H.some(()=>Rl(t))}return H.none()},z0=(t,o,n)=>Xa([F0,CS,rb,(s,i)=>Yd(s,o,i),md,Ju,Xp,oh,k0,cm],s=>s(t,n)).filter(s=>t.selection.isEditable()),jS=t=>void 0===t.touches||1!==t.touches.length?H.none():H.some(t.touches[0]),H0=(t,o)=>Gt(t,o.nodeName),$S=(t,o)=>!!Ae(o)||!!Te(o)&&!(H0(t.getBlockElements(),o)||ls(o)||Eu(t,o)||op(o)),JA=(t,o)=>{if(Ae(o)){if(0===o.data.length)return!0;if(/^\s+$/.test(o.data))return!o.nextSibling||H0(t,o.nextSibling)||op(o.nextSibling)}return!1},WS=t=>t.dom.create(Rs(t),Ji(t)),qS=t=>{const o=t.dom,n=t.selection,s=t.schema,i=s.getBlockElements(),c=n.getStart(),d=t.getBody();let u,p,f=!1;const b=Rs(t);if(!c||!Te(c))return;const x=d.nodeName.toLowerCase();if(!s.isValidChild(x,b.toLowerCase())||(F=i,q=d,Wo(cO(re(c),re(q)),ne=>H0(F,ne.dom))))return;var F,q;const C=n.getRng(),{startContainer:O,startOffset:S,endContainer:R,endOffset:T}=C,D=eg(t);let P=d.firstChild;for(;P;)if(Te(P)&&nE(s,P),$S(s,P)){if(JA(i,P)){p=P,P=P.nextSibling,o.remove(p);continue}u||(u=WS(t),d.insertBefore(u,P),f=!0),p=P,P=P.nextSibling,u.appendChild(p)}else u=null,P=P.nextSibling;f&&D&&(C.setStart(O,S),C.setEnd(R,T),n.setRng(C),t.nodeChanged())},Ic=(t,o,n)=>{const s=re(WS(t)),i=xa();I(s,i),n(o,s);const c=document.createRange();return c.setStartBefore(i.dom),c.setEndBefore(i.dom),c},Dl=t=>o=>-1!==(" "+o.attr("class")+" ").indexOf(t),V0=(t,o,n)=>function(s){const i=arguments,c=i[i.length-2],d=c>0?o.charAt(c-1):"";if('"'===d)return s;if(">"===d){const u=o.lastIndexOf("<",c);if(-1!==u&&-1!==o.substring(u,c).indexOf('contenteditable="false"'))return s}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(i[0])+'">'+t.dom.encode("string"==typeof i[1]?i[1]:i[0])+"</span>"},GS=(t,o)=>{o.hasAttribute("data-mce-caret")&&(Nd(o),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(o))},U0=(t,o)=>{const n=Sr(re(t.getBody()),"*[data-mce-caret]").map(i=>i.dom).getOrNull();if(n)return"compositionstart"===o.type?(o.preventDefault(),o.stopPropagation(),void GS(t,n)):void(vl(n)&&(GS(t,n),t.undoManager.add()))},KS=zo,YS=(t,o,n)=>{const s=ar(t.getBody()),i=it(c_,1===o?s.next:s.prev);if(n.collapsed){const c=t.dom.getParent(n.startContainer,"PRE");if(!c)return;if(!i(Oe.fromRangeStart(n))){const d=re((u=>{const p=u.dom.create(Rs(u));return p.innerHTML='<br data-mce-bogus="1">',p})(t));1===o?ri(re(c),d):kr(re(c),d),t.selection.select(d.dom,!0),t.selection.collapse()}}},XS=(t,o)=>((n,s)=>{const i=s?Ds.Forwards:Ds.Backwards,c=n.selection.getRng();return(d=i,u=n,p=c,UA(u,d,p,ad,id,KS)).orThunk(()=>(YS(n,i,c),H.none()));var d,u,p})(t,((n,s)=>{const i=s?n.getEnd(!0):n.getStart(!0);return og(i)?!s:s})(t.selection,o)).exists(n=>(bi(t,n),!0)),JS=(t,o)=>((n,s)=>{const i=s?1:-1,c=n.selection.getRng();return(d=i,u=n,p=c,jA(u,d,p,f=>ad(f)||iO(f),f=>id(f)||lO(f),KS)).orThunk(()=>(YS(n,i,c),H.none()));var d,u,p})(t,o).exists(n=>(bi(t,n),!0)),QS=(t,o)=>$A(t,o,o?id:ad),pb=(t,o)=>E0(t,!o).map(n=>{const s=n.toRange(),i=t.selection.getRng();return o?s.setStart(i.startContainer,i.startOffset):s.setEnd(i.endContainer,i.endOffset),s}).exists(n=>(bi(t,n),!0)),j0=t=>st(["figcaption"],Po(t)),$0=(t,o)=>!!t.selection.isCollapsed()&&((n,s)=>{const i=re(n.getBody()),c=Oe.fromRangeStart(n.selection.getRng());return((d,u,p)=>{const f=it(Qo,u);return hr(re(d.container()),b=>p.isBlock(Po(b)),f).filter(j0)})(c,i,n.schema).exists(()=>{if(d=i,p=c,s?LA(d.dom,p):OS(d.dom,p)){const d=Ic(n,i,s?I:Dn);return n.selection.setRng(d),!0}var d,p;return!1})})(t,o),ZS=(t,o)=>{return n=t,o?H.from(n.dom.getParent(n.selection.getNode(),"details")).map(i=>((c,d)=>{const u=c.selection.getRng(),p=Oe.fromRangeStart(u);return!(c.getBody().lastChild!==d||!LA(d,p)||(c.execCommand("InsertNewBlockAfter"),0))})(n,i)).getOr(!1):H.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(i=>H.from(n.dom.getParent(i,"details")).map(c=>((d,u,p)=>{const f=d.selection.getRng(),b=Oe.fromRangeStart(f);return!(d.getBody().firstChild!==u||!OS(p,b)||(d.execCommand("InsertNewBlockBefore"),0))})(n,c,i))).getOr(!1);var n},W0={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},QA=(t,o)=>o.keyCode===t.keyCode&&o.shiftKey===t.shiftKey&&o.altKey===t.altKey&&o.ctrlKey===t.ctrlKey&&o.metaKey===t.metaKey,eo=(t,...o)=>()=>t.apply(null,o),hb=(t,o)=>{return yn((s=o,Lr(qt(t,c=>({...W0,...c})),i=>QA(i,s)?[i]:[])),n=>n.action());var s},ZA=(t,o)=>{return Xa((s=o,Lr(qt(t,c=>({...W0,...c})),i=>QA(i,s)?[i]:[])),n=>n.action());var s},eN=(t,o)=>{const n=o?Ds.Forwards:Ds.Backwards,s=t.selection.getRng();return UA(t,n,s,vf,yf,fo).exists(i=>(bi(t,i),!0))},tN=(t,o)=>{const n=o?1:-1,s=t.selection.getRng();return jA(t,n,s,vf,yf,fo).exists(i=>(bi(t,i),!0))},fb=(t,o)=>$A(t,o,o?yf:vf),q0=kc([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),nh={...q0,none:t=>q0.none(t)},G0=(t,o,n)=>Lr(pr(t),s=>ea(s,o)?n(s)?[s]:[]:G0(s,o,n)),oN=(t,o)=>fl(t,"table",o),ek=(t,o,n,s,i=Vo)=>{const c=1===s;if(!c&&n<=0)return nh.first(t[0]);if(c&&n>=t.length-1)return nh.last(t[t.length-1]);{const d=n+s,u=t[d];return i(u)?nh.middle(o,u):ek(t,o,d,s,i)}},nN=(t,o)=>oN(t,o).bind(n=>{const s=G0(n,"th,td",Vo);return la(s,i=>Qo(t,i)).map(i=>({index:i,all:s}))}),rN=(t,o,n,s,i)=>{const c=J(re(n),"td,th,caption").map(u=>u.dom);var u;return((u,p,f)=>Nn(u,(b,x)=>b.fold(()=>H.some(x),C=>{const O=Math.sqrt(Math.abs(C.x-p)+Math.abs(C.y-f)),S=Math.sqrt(Math.abs(x.x-p)+Math.abs(x.y-f));return H.some(S<O?x:C)}),H.none()))(ft((u=t,Lr(c,f=>{const b={left:(x=Gn(f.getBoundingClientRect())).left- -1,top:x.top- -1,right:x.right+-2,bottom:x.bottom+-2,width:x.width+-1,height:x.height+-1};var x;return[{x:b.left,y:u(b),cell:f},{x:b.right,y:u(b),cell:f}]})),u=>o(u,i)),s,i).map(u=>u.cell)},hB=it(rN,t=>t.bottom,(t,o)=>t.y<o),fB=it(rN,t=>t.top,(t,o)=>t.y>o),bb=(t,o,n)=>{const s=t(o,n);return(i=s).breakType===rl.Wrap&&0===i.positions.length||!Ft(n.getNode())&&(i=>i.breakType===rl.Br&&1===i.positions.length)(s)?!((i,c,d)=>d.breakAt.exists(u=>i(c,u).breakAt.isSome()))(t,o,s):s.breakAt.isNone();var i},K0=it(bb,Kd),Y0=it(bb,vg),bB=(t,o,n,s)=>{const i=t.selection.getRng(),c=o?1:-1;return!(!s_()||!((d,u,p)=>{const f=Oe.fromRangeStart(u);return $m(!d,p).exists(b=>b.isEqual(f))})(o,i,n)||(pd(c,t,n,!o,!1).each(d=>{bi(t,d)}),0))},sN=(t,o,n)=>{const s=((c,d)=>{const u=d.getNode(c);return yo(u)?H.some(u):H.none()})(!!o,n),i=!1===o;s.fold(()=>bi(t,n.toRange()),c=>$m(i,t.getBody()).filter(d=>d.isEqual(n)).fold(()=>bi(t,n.toRange()),d=>{return u=o,f=c,void(p=t).undoManager.transact(()=>{const b=u?ri:kr,x=Ic(p,re(f),b);bi(p,x)});var u,p,f}))},vB=(t,o,n,s)=>{const i=t.selection.getRng(),c=Oe.fromRangeStart(i),d=t.getBody();if(!o&&K0(s,c)){const u=(p=d,(x=f=n,C=b=c,gn(C.getClientRects()).bind(O=>hB(x,O.left,O.top)).bind(O=>{return Nl(Di(S=O).map(R=>Kd(S,R).positions.concat(R)).getOr([]),C);var S})).orThunk(()=>gn(b.getClientRects()).bind(x=>hd(R0(p,Oe.before(f)),x.left))).getOr(Oe.before(f)));return sN(t,o,u),!0}var p,f,b,x,C;if(o&&Y0(s,c)){const u=((p,f,b)=>((x,C)=>pn(C.getClientRects()).bind(O=>fB(x,O.left,O.top)).bind(O=>{return Nl(js(S=O).map(R=>[R].concat(vg(S,R).positions)).getOr([]),C);var S}))(f,b).orThunk(()=>gn(b.getClientRects()).bind(x=>hd(TS(p,Oe.after(f)),x.left))).getOr(Oe.after(f)))(d,n,c);return sN(t,o,u),!0}return!1},aN=(t,o,n)=>H.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(s=>H.from(t.dom.getParent(s,"table")).map(i=>n(t,o,i,s))).getOr(!1),iN=(t,o)=>aN(t,o,bB),tk=(t,o)=>aN(t,o,vB),Bl=(t,o,n)=>n.fold(H.none,H.none,(s,i)=>{return(c=i,Ul(c,GT)).map(d=>{return(t=>{const o=Ep.getWin(t).dom,n=(i,c,d,u)=>Jm(o,i,c,d,u),s=t.match({domRange:c=>{const d=re(c.startContainer),u=re(c.endContainer);return Qm(d,c.startOffset,u,c.endOffset)},relative:df,exact:Qm});return((i,c)=>{var u;return((u,p)=>{const f=p.ltr();return f.collapsed?p.rtl().filter(b=>!1===b.collapsed).map(b=>Ho.rtl(re(b.endContainer),b.endOffset,re(b.startContainer),b.startOffset)).getOrThunk(()=>T_(0,Ho.ltr,f)):T_(0,Ho.ltr,f)})(0,(u=i,c.match({domRange:f=>({ltr:Ve(f),rtl:H.none}),relative:(f,b)=>({ltr:ba(()=>_T(u,f,b)),rtl:ba(()=>H.some(_T(u,b,f)))}),exact:(f,b,x,C)=>({ltr:ba(()=>Jm(u,f,b,x,C)),rtl:ba(()=>H.some(Jm(u,x,C,f,b)))})})))})(o,s).match({ltr:n,rtl:n})})(Ep.exact(u=d,0,u,0));var u});var c},s=>(t.execCommand("mceTableInsertRowAfter"),X0(t,o,s))),X0=(t,o,n)=>{return Bl(t,o,(i=bl,nN(s=n,void 0).fold(()=>nh.none(s),c=>ek(c.all,s,c.index,1,i))));var s,i},lN=(t,o,n)=>{return Bl(t,o,(i=bl,nN(s=n,void 0).fold(()=>nh.none(),c=>ek(c.all,s,c.index,-1,i))));var s,i},ok=(t,o)=>{const n=["table","li","dl"],s=re(t.getBody()),i=d=>{const u=Po(d);return Qo(d,s)||st(n,u)},c=t.selection.getRng();return(d=re(o?c.endContainer:c.startContainer),u=i,((p,f,b=wo)=>b(f)?H.none():st(p,Po(f))?H.some(f):$i(f,p.join(","),x=>ea(x,"table")||b(x)))(["td","th"],d,u)).map(d=>(oN(d,i).each(u=>{t.model.table.clearSelectedCells(u.dom)}),t.selection.collapse(!o),(o?X0:lN)(t,i,d).each(u=>{t.selection.setRng(u)}),!0)).getOr(!1);var d,u},tc=(t,o)=>({container:t,offset:o}),J0=Sn.DOM,vb=t=>o=>t===o?-1:0,nk=(t,o,n)=>{if(Ae(t)&&o>=0)return H.some(tc(t,o));{const s=Xi(J0);return H.from(s.backwards(t,o,vb(t),n)).map(i=>tc(i.container,i.container.data.length))}},dm=(t,o,n)=>{if(!Ae(t))return H.none();if(o>=0&&o<=t.data.length)return H.some(tc(t,o));{const i=Xi(J0);return H.from(i.backwards(t,o,vb(t),n)).bind(c=>dm(c.container,o+c.container.data.length,n))}},rk=(t,o,n)=>{if(!Ae(t))return H.none();const s=t.data;if(o<=s.length)return H.some(tc(t,o));{const i=Xi(J0);return H.from(i.forwards(t,o,vb(t),n)).bind(c=>rk(c.container,o-s.length,n))}},Q0=(t,o,n,s,i)=>{const c=Xi(t,(d=t,u=>d.isBlock(u)||st(["BR","IMG","HR","INPUT"],u.nodeName)||"false"===d.getContentEditable(u)));var d;return H.from(c.backwards(o,n,s,i))},sk=t=>wa(t.toString().replace(/\u00A0/g," ")),Z0=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),ak=(t,o)=>t.substring(o.length),cN=(t,o,n,s=0)=>{return(i=re(o.startContainer),fl(i,KT)).fold(()=>((c,d,u,p=0)=>{if(!(f=d).collapsed||!Ae(f.startContainer))return H.none();var f;const b={text:"",offset:0},x=c.getParent(d.startContainer,c.isBlock)||c.getRoot();return Q0(c,d.startContainer,d.startOffset,(C,O,S)=>(b.text=S+b.text,b.offset+=O,((R,T,D)=>{let P;const F=D.charAt(0);for(P=T-1;P>=0;P--){const q=R.charAt(P);if(Z0(q))return H.none();if(F===q&&Xe(R,D,P,T))break}return H.some(P)})(b.text,b.offset,u).getOr(O)),x).bind(C=>{const O=d.cloneRange();if(O.setStart(C.container,C.offset),O.setEnd(d.endContainer,d.endOffset),O.collapsed)return H.none();const S=sk(O);return 0!==S.lastIndexOf(u)||ak(S,u).length<p?H.none():H.some({text:ak(S,u),range:O,trigger:u})})})(t,o,n,s),c=>{const d=t.createRng();d.selectNode(c.dom);const u=sk(d);return H.some({range:d,text:ak(u,n),trigger:n})});var i},Jd=t=>{if(3===t.nodeType)return tc(t,t.data.length);{const o=t.childNodes;return o.length>0?Jd(o[o.length-1]):tc(t,o.length)}},ex=(t,o)=>{const n=t.childNodes;return n.length>0&&o<n.length?ex(n[o],0):n.length>0&&1===t.nodeType&&n.length===o?Jd(n[n.length-1]):tc(t,o)},dN=(t,o,n,s={})=>{var i;const c=o(),d=null!==(i=t.selection.getRng().startContainer.nodeValue)&&void 0!==i?i:"",u=ft(c.lookupByTrigger(n.trigger),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>{return b=t.dom,x=>{const C=ex(x.startContainer,x.startOffset);return!((O,S)=>{var R;const T=null!==(R=O.getParent(S.container,O.isBlock))&&void 0!==R?R:O.getRoot();return Q0(O,S.container,S.offset,(D,P)=>0===P?-1:P,T).filter(D=>{const P=D.container.data.charAt(D.offset-1);return!Z0(P)}).isSome()})(b,C)};var b})(n.range,d,n.text));if(0===u.length)return H.none();const p=Promise.all(qt(u,f=>f.fetch(n.text,f.maxResults,s).then(b=>({matchText:n.text,items:b,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return H.some({lookupData:p,context:n})};var vd;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(vd||(vd={}));const Qd=(t,o,n)=>t.stype===vd.Error?o(t.serror):n(t.svalue),xg=t=>({stype:vd.Value,svalue:t}),um=t=>({stype:vd.Error,serror:t}),yB=Qd,ik=t=>vt(t)&&as(t).length>100?" removed due to size":JSON.stringify(t,null,2),oc=(t,o)=>um([{path:t,getErrorInfo:o}]),tx=t=>(...o)=>{if(0===o.length)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<o.length;s++){const i=o[s];for(const c in i)Gt(i,c)&&(n[c]=t(n[c],i[c]))}return n},yb=tx((t,o)=>an(t)&&an(o)?yb(t,o):o),ck=(tx((t,o)=>o),t=>({tag:"defaultedThunk",process:Ve(t)})),dk=(t,o,n)=>{switch(t.tag){case"field":return o(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},uk=t=>({extract:(o,n)=>{return(s=t(n)).stype===vd.Error?oc(o,Ve(s.serror)):s;var s},toString:Ve("val")}),xb=uk(xg),wb=(t,o,n,s)=>s(Xo(t,o).getOrThunk(()=>n(t))),mN=(t,o,n,s,i)=>{const c=u=>i.extract(o.concat([s]),u),d=u=>u.fold(()=>xg(H.none()),p=>{return(b=i.extract(o.concat([s]),p)).stype===vd.Value?{stype:vd.Value,svalue:(0,H.some)(b.svalue)}:b;var b});switch(t.tag){case"required":return u=o,b=c,Xo(p=n,f=s).fold(()=>{return C=f,O=p,oc(u,()=>'Could not find valid *required* value for "'+C+'" in '+ik(O));var C,O},b);case"defaultedThunk":return wb(n,s,t.process,c);case"option":return((u,p,f)=>f(Xo(u,p)))(n,s,d);case"defaultedOptionThunk":return((u,p,f,b)=>b(Xo(u,p).map(x=>!0===x?f(u):x)))(n,s,t.process,d);case"mergeWithThunk":return wb(n,s,Ve({}),u=>{const p=yb(t.process(n),u);return c(p)})}var u,p,f,b},ox=t=>({extract:(o,n)=>((s,i,c)=>{const d={},u=[];for(const p of c)dk(p,(f,b,x,C)=>{const O=mN(x,s,i,f,C);yB(O,S=>{u.push(...S)},S=>{d[b]=S})},(f,b)=>{d[f]=b(i)});return u.length>0?um(u):xg(d)})(o,n,t),toString:()=>"obj{\n"+qt(t,n=>dk(n,(s,i,c,d)=>s+" -> "+d.toString(),(s,i)=>"state("+s+")")).join("\n")+"}"}),mk=t=>({extract:(o,n)=>(t=>{const o=(s=>{const i=[],c=[];return Ee(s,d=>{Qd(d,u=>c.push(u),u=>i.push(u))}),{values:i,errors:c}})(t);return o.errors.length>0?(n=o.errors,lr(um,Ci)(n)):xg(o.values);var n})(qt(n,(i,c)=>t.extract(o.concat(["["+c+"]"]),i))),toString:()=>"array("+t.toString()+")"}),_b=(t,o)=>((t,o)=>({extract:(n,s)=>Xo(s,t).fold(()=>{return c=t,oc(n,()=>'Choice schema did not contain choice key: "'+c+'"');var c},i=>{return c=n,d=s,Xo(u=o,p=i).fold(()=>{return b=u,x=p,oc(c,()=>'The chosen schema: "'+x+'" did not exist in branches: '+ik(b));var b,x},f=>f.extract(c.concat(["branch: "+p]),d));var c,d,u,p}),toString:()=>"chooseOn("+t+"). Possible values: "+as(o)}))(t,Fr(o,ox)),gk=Ve(xb),mm=(t,o)=>uk(n=>{const s=typeof n;return t(n)?xg(n):um(`Expected type: ${o} but got: ${s}`)}),xB=mm(rs,"number"),Cb=mm(_t,"string"),wB=mm(Qe,"boolean"),pk=mm(ut,"function"),rh=(t,o,n,s)=>({tag:"field",key:t,newKey:o,presence:n,prop:s}),hk=(t,o)=>({tag:"custom",newKey:t,instantiator:o}),pN=(t,o)=>rh(t,t,{tag:"required",process:{}},o),fk=t=>pN(t,Cb),gm=t=>pN(t,pk),nx=(t,o)=>rh(t,t,{tag:"option",process:{}},o),sh=t=>nx(t,Cb),wg=(t,o,n)=>rh(t,t,ck(o),n),rx=(t,o)=>wg(t,o,xB),Zd=(t,o,n)=>{return wg(t,o,(s=n,i=c=>st(s,c)?Sa.value(c):Sa.error(`Unsupported value: "${c}", choose one of "${s.join(", ")}".`),uk(c=>i(c).fold(um,xg))));var s,i},sx=(t,o)=>wg(t,o,wB),Pi=(t,o)=>wg(t,o,pk),_g=fk("type"),bk=gm("fetch"),ax=gm("onAction"),_B=Pi("onSetup",()=>Kt),hN=sh("text"),ah=sh("icon"),vk=sh("tooltip"),fN=sh("label"),bN=sx("active",!1),yk=sx("enabled",!0),vN=sx("primary",!1),Sb=t=>wg("type",t,Cb),yN=ox([_g,fk("trigger"),rx("minChars",1),((t,o)=>rh(t,t,ck(1),gk()))("columns"),rx("maxResults",10),nx("matches",pk),bk,ax,(xN=Cb,wg("highlightOn",[],mk(xN)))]);var xN;const vi=[yk,vk,ah,hN,_B],ix=[bN].concat(vi),wN=[Pi("predicate",wo),Zd("scope","node",["node","editor"]),Zd("position","selection",["node","selection","line"])],xk=vi.concat([Sb("contextformbutton"),vN,ax,hk("original",un)]),_N=ix.concat([Sb("contextformbutton"),vN,ax,hk("original",un)]),kb=vi.concat([Sb("contextformbutton")]),eu=ix.concat([Sb("contextformtogglebutton")]),Cg=_b("type",{contextformbutton:xk,contextformtogglebutton:_N});ox([Sb("contextform"),Pi("initValue",Ve("")),fN,((t,o)=>rh(t,t,{tag:"required",process:{}},mk(o)))("commands",Cg),nx("launch",_b("type",{contextformbutton:kb,contextformtogglebutton:eu}))].concat(wN));const wk=t=>{const o=ai(),n=Zo(!1),s=o.isSet,i=()=>{s()&&(Gr(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),o.clear())},c=ba(()=>(t=>{const o=t.ui.registry.getAll().popups,n=Fr(o,c=>{return(d=c,((t,o,n)=>{return s=(u=o.extract([t],d=n)).stype===vd.Error?{stype:vd.Error,serror:(u=>({input:d,errors:u}))(u.serror)}:u,Qd(s,Sa.error,Sa.value);var d,u,s})("Autocompleter",yN,{trigger:d.ch,...d})).fold(u=>{throw new Error("Errors: \n"+(f=>{const b=f.length>10?f.slice(0,10).concat([{path:[],getErrorInfo:Ve("... (only showing first ten failures)")}]):f;return qt(b,x=>"Failed path: ("+x.path.join(" > ")+")\n"+x.getErrorInfo())})((p=u).errors).join("\n")+"\n\nInput object: "+ik(p.input));var p},un);var d}),s=ki(Nr(n,c=>c.trigger)),i=gs(n);return{dataset:n,triggers:s,lookupByTrigger:c=>ft(i,d=>d.trigger===c)}})(t)),d=u=>{var p;(p=u,o.get().map(f=>cN(t.dom,t.selection.getRng(),f.trigger).bind(b=>dN(t,c,b,p))).getOrThunk(()=>((f,b)=>{const x=b(),C=f.selection.getRng();return(O=f.dom,S=C,R=x,Xa(R.triggers,T=>cN(O,S,T))).bind(O=>dN(f,b,O));var O,S,R})(t,c))).fold(i,p=>{var f,x;f=p.context,s()||(x=f.range,Gr(t).autocompleter.addDecoration(x),o.set({trigger:f.trigger,matchLength:f.text.length})),p.lookupData.then(f=>{o.get().map(b=>{const x=p.context;b.trigger===x.trigger&&(x.text.length-b.matchLength>=10?i():(o.set({...b,matchLength:x.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:f}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:f}))))})})})};t.addCommand("mceAutocompleterReload",(u,p)=>{const f=vt(p)?p.fetchOptions:{};d(f)}),t.addCommand("mceAutocompleterClose",i),((u,p)=>{const f=yv(p.load,50);u.on("keypress compositionend",b=>{27!==b.which&&f.throttle()}),u.on("keydown",b=>{const x=b.which;8===x?f.throttle():27===x&&p.cancelIfNecessary()}),u.on("remove",f.cancel)})(t,{cancelIfNecessary:i,load:d})},_k=ti().browser.isSafari(),Ck=t=>Fa(re(t)),CN=(t,o)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=o.textContent)||void 0===n?void 0:n.length)},Eb=(t,o)=>H.from(t.getParent(o.container(),"details")),Sk=(t,o)=>Eb(t,o).isSome(),kk=(t,o)=>{const n=o.getNode();et(n)||t.selection.setCursorLocation(n,o.offset())},Ek=(t,o,n)=>{const s=t.dom.getParent(o.container(),"details");if(s&&!s.open){const i=t.dom.select("summary",s)[0];i&&(n?js(i):Di(i)).each(c=>kk(t,c))}else kk(t,o)},SN=(t,o,n)=>{const{dom:s,selection:i}=t,c=t.getBody();if("character"===n){const d=Oe.fromRangeStart(i.getRng()),u=s.getParent(d.container(),s.isBlock),p=Eb(s,d),f=u&&s.isEmpty(u),b=vn(u?.previousSibling),x=vn(u?.nextSibling);return!!(f&&(o?x:b)&&Hu(!o,c,d).exists(C=>Sk(s,C)&&!Zr(p,Eb(s,C))))||Hu(o,c,d).fold(wo,C=>{const O=Eb(s,C);if(Sk(s,C)&&!Zr(p,O)){if(o||Ek(t,C,!1),u&&f){if(o&&b||!o&&x)return!0;Ek(t,C,o),t.dom.remove(u)}return!0}return!1})}return!1},Sg=(t,o,n)=>{return i=o,c=n,((d,u)=>{const p=H.from(d.getParent(u.startContainer,"details")),f=H.from(d.getParent(u.endContainer,"details"));if(p.isSome()||f.isSome()){const b=p.bind(x=>H.from(d.select("summary",x)[0]));return H.some({startSummary:b,startDetails:p,endDetails:f})}return H.none()})((s=t).dom,s.selection.getRng()).fold(()=>SN(s,i,c),d=>((t,o,n,s)=>{const i=t.selection.getRng(),c=Oe.fromRangeStart(i),d=t.getBody();return"selection"===s?((u,p)=>{const f=p.startSummary.exists(C=>C.contains(u.startContainer)),b=p.startSummary.exists(C=>C.contains(u.endContainer)),x=p.startDetails.forall(C=>p.endDetails.forall(O=>C!==O));return(f||b)&&!(f&&b)||x})(i,o):n?(u=c,o.startSummary.exists(f=>{return b=u,Di(x=f).exists(C=>Ft(C.getNode())&&di(x,C).exists(O=>O.isEqual(b))||C.isEqual(b));var b,x})||((u,p,f)=>f.startDetails.exists(b=>ci(u,p).forall(x=>!b.contains(x.container()))))(d,c,o)):((u,p)=>p.startSummary.exists(f=>{return b=u,js(f).exists(C=>C.isEqual(b));var b}))(c,o)||((u,p)=>p.startDetails.exists(f=>di(f,u).forall(b=>p.startSummary.exists(x=>!x.contains(u.container())&&x.contains(b.container())))))(c,o);var u})(s,d,i,c)||SN(s,i,c))||_k&&((s,i,c)=>{const d=s.selection,u=d.getNode(),p=d.getRng(),f=Oe.fromRangeStart(p);return!!fr(u)&&("selection"===c&&CN(p,u)||wy(i,f,u)?Ck(u):s.undoManager.transact(()=>{const b=d.getSel();let{anchorNode:x,anchorOffset:C,focusNode:O,focusOffset:S}=b??{};const R=()=>{ee(x)&&ee(C)&&ee(O)&&ee(S)&&b?.setBaseAndExtent(x,C,O,S)},T=(P,F)=>{Ee(P.childNodes,q=>{wp(q)&&F.appendChild(q)})},D=s.dom.create("span",{"data-mce-bogus":"1"});T(u,D),u.appendChild(D),R(),"word"!==c&&"line"!==c||null==b||b.modify("extend",i?"right":"left",c),!d.isCollapsed()&&CN(d.getRng(),D)?Ck(u):(s.execCommand(i?"ForwardDelete":"Delete"),x=b?.anchorNode,C=b?.anchorOffset,O=b?.focusNode,S=b?.focusOffset,T(D,u),R()),s.dom.remove(D)}),!0)})(t,o,n)?H.some(Kt):H.none();var s,i,c},yi=t=>(o,n,s={})=>{const i=o.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Kt,inputType:n},d=fw(new InputEvent(t));return o.dispatch(t,{...d,...c,...s})},ih=yi("input"),pm=yi("beforeinput"),kN=ti(),Tk=kN.os,Ok=Tk.isMacOS()||Tk.isiOS(),Ak=kN.browser.isFirefox(),kg=(t,o)=>{const n=t.dom,s=t.schema.getMoveCaretBeforeOnEnterElements();if(!o)return;if(/^(LI|DT|DD)$/.test(o.nodeName)){const c=(d=>{for(;d;){if(Te(d)||Ae(d)&&d.data&&/[\r\n\s]/.test(d.data))return d;d=d.nextSibling}return null})(o.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&o.insertBefore(n.doc.createTextNode(Vn),o.firstChild)}const i=n.createRng();if(o.normalize(),o.hasChildNodes()){const c=new he(o,o);let d,u=o;for(;d=c.current();){if(Ae(d)){i.setStart(d,0),i.setEnd(d,0);break}if(s[d.nodeName.toLowerCase()]){i.setStartBefore(d),i.setEndBefore(d);break}u=d,d=c.next()}d||(i.setStart(u,0),i.setEnd(u,0))}else Ft(o)?o.nextSibling&&n.isBlock(o.nextSibling)?(i.setStartBefore(o),i.setEndBefore(o)):(i.setStartAfter(o),i.setEndAfter(o)):(i.setStart(o,0),i.setEnd(o,0));t.selection.setRng(i),hf(t,i)},Tb=(t,o)=>{const n=t.getRoot();let s,i=o;for(;i!==n&&i&&"false"!==t.getContentEditable(i);){if("true"===t.getContentEditable(i)){s=i;break}i=i.parentNode}return i!==n?s:n},Nk=t=>H.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Rk=t=>{t.innerHTML='<br data-mce-bogus="1">'},Eg=(t,o)=>{Rs(t).toLowerCase()===o.tagName.toLowerCase()&&((n,s,i)=>{const c=n.dom;H.from(i.style).map(c.parseStyle).each(b=>{const x={...hc(re(s)),...b};c.setStyles(s,x)});const d=H.from(i.class).map(b=>b.split(/\s+/)),u=H.from(s.className).map(b=>ft(b.split(/\s+/),x=>""!==x));mr(d,u,(b,x)=>{const C=ft(x,S=>!st(b,S)),O=[...b,...C];c.setAttrib(s,"class",O.join(" "))});const p=["style","class"],f=zr(i,(b,x)=>!st(p,x));c.setAttribs(s,f)})(t,o,Ji(t))},EN=(t,o,n,s,i=!0,c,d)=>{const u=t.dom,p=t.schema,f=Rs(t),b=n?n.nodeName.toUpperCase():"";let x=o;const C=p.getTextInlineElements();let O;O=c||"TABLE"===b||"HR"===b?u.create(c||f,d||{}):n.cloneNode(!1);let S=O;if(i){do{if(C[x.nodeName]){if(ui(x)||ls(x))continue;const R=x.cloneNode(!1);u.setAttrib(R,"id",""),O.hasChildNodes()?(R.appendChild(O.firstChild),O.appendChild(R)):(S=R,O.appendChild(R))}}while((x=x.parentNode)&&x!==s)}else u.setAttrib(O,"style",null),u.setAttrib(O,"class",null);return Eg(t,O),Rk(S),O},TN=(t,o)=>{const n=t?.parentNode;return ee(n)&&n.nodeName===o},Dk=t=>ee(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Bk=t=>ee(t)&&/^(LI|DT|DD)$/.test(t.nodeName),cx=t=>{const o=t.parentNode;return Bk(o)?o:t},lh=(t,o,n)=>{let s=t[n?"firstChild":"lastChild"];for(;s&&!Te(s);)s=s[n?"nextSibling":"previousSibling"];return s===o},Ob=t=>Nn(Nr(hc(re(t)),(o,n)=>`${n}: ${o};`),(o,n)=>o+n,""),ON=(t,o)=>o&&"A"===o.nodeName&&t.isEmpty(o),dx=(t,o)=>t.nodeName===o||t.previousSibling&&t.previousSibling.nodeName===o,Ab=(t,o)=>ee(o)&&t.isBlock(o)&&!/^(TD|TH|CAPTION|FORM)$/.test(o.nodeName)&&!/^(fixed|absolute)/i.test(o.style.position)&&t.isEditable(o.parentNode)&&"false"!==t.getContentEditable(o),Mk=(t,o,n)=>Ae(o)?t?1===n&&o.data.charAt(n-1)===Er?0:n:n===o.data.length-1&&o.data.charAt(n)===Er?o.data.length:n:n,AN={insert:(t,o)=>{let n,s,i,c,d=!1;const u=t.dom,p=t.schema.getNonEmptyElements(),f=t.selection.getRng(),b=Rs(t),x=re(f.startContainer),C=gc(x,f.startOffset),O=C.exists(pe=>Ra(pe)&&!bl(pe)),S=f.collapsed&&O,R=(pe,we)=>EN(t,n,$,q,_E(t),pe,we),T=pe=>{const we=Mk(pe,n,s);if(Ae(n)&&(pe?we>0:we<n.data.length))return!1;if(n.parentNode===$&&d&&!pe||pe&&Te(n)&&n===$.firstChild)return!0;if(dx(n,"TABLE")||dx(n,"HR"))return d&&!pe||!d&&pe;const se=new he(n,$);let de;for(Ae(n)&&(pe&&0===we?se.prev():pe||we!==n.data.length||se.next());de=se.current();){if(Te(de)){if(!de.getAttribute("data-mce-bogus")){const ye=de.nodeName.toLowerCase();if(p[ye]&&"br"!==ye)return!1}}else if(Ae(de)&&!ku(de.data))return!1;pe?se.prev():se.next()}return!0},D=()=>{let pe;return pe=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==ne?R(b):R(),((we,se)=>{const de=zw(we);return!An(se)&&(_t(de)?st($e.explode(de),se.nodeName.toLowerCase()):de)})(t,c)&&Ab(u,c)&&u.isEmpty($,void 0,{includeZwsp:!0})?pe=u.split(c,$):u.insertAfter(pe,$),kg(t,pe),pe};mf(u,f).each(pe=>{f.setStart(pe.startContainer,pe.startOffset),f.setEnd(pe.endContainer,pe.endOffset)}),n=f.startContainer,s=f.startOffset;const P=!(!o||!o.shiftKey),F=!(!o||!o.ctrlKey);Te(n)&&n.hasChildNodes()&&!S&&(d=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,s=d&&Ae(n)?n.data.length:0);const q=Tb(u,n);if(!q||((pe,we)=>{const se=pe.dom.getParent(we,"ol,ul,dl");return null!==se&&"false"===pe.dom.getContentEditableParent(se)})(t,n))return;P||(n=((pe,we,se,de,ye)=>{var Le,rt;const Ye=pe.dom,Mt=null!==(Le=Tb(Ye,de))&&void 0!==Le?Le:Ye.getRoot();let kt=Ye.getParent(de,Ye.isBlock);if(!kt||!Ab(Ye,kt)){if(kt=kt||Mt,!kt.hasChildNodes()){const xt=Ye.create(we);return Eg(pe,xt),kt.appendChild(xt),se.setStart(xt,0),se.setEnd(xt,0),xt}let jt,It=de;for(;It&&It.parentNode!==kt;)It=It.parentNode;for(;It&&!Ye.isBlock(It);)jt=It,It=It.previousSibling;const dt=null===(rt=jt?.parentElement)||void 0===rt?void 0:rt.nodeName;if(jt&&dt&&pe.schema.isValidChild(dt,we.toLowerCase())){const xt=jt.parentNode,to=Ye.create(we);for(Eg(pe,to),xt.insertBefore(to,jt),It=jt;It&&!Ye.isBlock(It);){const ie=It.nextSibling;to.appendChild(It),It=ie}se.setStart(de,ye),se.setEnd(de,ye)}}return de})(t,b,f,n,s));let $=u.getParent(n,u.isBlock)||u.getRoot();c=ee($?.parentNode)?u.getParent($.parentNode,u.isBlock):null,i=$?$.nodeName.toUpperCase():"";const ne=c?c.nodeName.toUpperCase():"";if("LI"!==ne||F||($=c,c=c.parentNode,i=ne),Te(c)&&(pe=t,se=$,!P&&se.nodeName.toLowerCase()===Rs(pe)&&pe.dom.isEmpty(se)&&((de,ye,Le)=>{let rt=ye;for(;rt&&rt!==de&&vn(rt.nextSibling);){const Mt=rt.parentElement;if(!Mt||(Ye=Mt,!Gt(pe.schema.getTextBlockElements(),Ye.nodeName.toLowerCase())))return es(Mt);rt=Mt}var Ye;return!1})(pe.getBody(),se)))return((pe,we,se)=>{var de,ye,Le;const rt=we(Rs(pe)),Ye=pe.dom.getParent(se,es);Ye&&(pe.dom.insertAfter(rt,Ye),kg(pe,rt),(null!==(Le=null===(ye=null===(de=se.parentElement)||void 0===de?void 0:de.childNodes)||void 0===ye?void 0:ye.length)&&void 0!==Le?Le:0)>1&&pe.dom.remove(se))})(t,R,$);var pe,se;if(/^(LI|DT|DD)$/.test(i)&&Te(c)&&u.isEmpty($))return void((pe,we,se,de,ye)=>{const Le=pe.dom,rt=pe.selection.getRng(),Ye=se.parentNode;if(se===pe.getBody()||!Ye)return;var Mt;Dk(Mt=se)&&Dk(Mt.parentNode)&&(ye="LI");const kt=Bk(de)?Ob(de):void 0;let jt=Bk(de)&&kt?we(ye,{style:Ob(de)}):we(ye);if(lh(se,de,!0)&&lh(se,de,!1))if(TN(se,"LI")){const It=cx(se);Le.insertAfter(jt,It),(null===(xt=(dt=se).parentNode)||void 0===xt?void 0:xt.firstChild)===dt?Le.remove(It):Le.remove(se)}else Le.replace(jt,se);else if(lh(se,de,!0))TN(se,"LI")?(Le.insertAfter(jt,cx(se)),jt.appendChild(Le.doc.createTextNode(" ")),jt.appendChild(se)):Ye.insertBefore(jt,se),Le.remove(de);else if(lh(se,de,!1))Le.insertAfter(jt,cx(se)),Le.remove(de);else{se=cx(se);const It=rt.cloneRange();It.setStartAfter(de),It.setEndAfter(se);const dt=It.extractContents();if("LI"===ye&&((xt,to)=>xt.firstChild&&"LI"===xt.firstChild.nodeName)(dt)){const xt=ft(qt(jt.children,re),wi(ml("br")));jt=dt.firstChild,Le.insertAfter(dt,se),Ee(xt,to=>Dn(re(jt),to)),kt&&jt.setAttribute("style",kt)}else Le.insertAfter(dt,se),Le.insertAfter(jt,se);Le.remove(de)}var dt,xt;kg(pe,jt)})(t,R,c,$,b);if(!(S||$!==t.getBody()&&Ab(u,$)))return;const ce=$.parentNode;let me;if(S)me=R(b),C.fold(()=>{I(x,re(me))},pe=>{kr(pe,re(me))}),t.selection.setCursorLocation(me,0);else if(Gi($))me=Nd($),u.isEmpty($)&&Rk($),Eg(t,me),kg(t,me);else if(T(!1))me=D();else if(T(!0)&&ce){me=ce.insertBefore(R(),$);const pe=re(f.startContainer).dom.hasChildNodes()&&f.collapsed;kg(t,dx($,"HR")||pe?me:$)}else{const pe=(se=>{const de=se.cloneRange();return de.setStart(se.startContainer,Mk(!0,se.startContainer,se.startOffset)),de.setEnd(se.endContainer,Mk(!1,se.endContainer,se.endOffset)),de})(f).cloneRange();pe.setEndAfter($);const we=pe.extractContents();(se=>{Ee(M(re(se),Go),de=>{const ye=de.dom;ye.nodeValue=wa(ye.data)})})(we),(se=>{let de=se;do{Ae(de)&&(de.data=de.data.replace(/^[\r\n]+/,"")),de=de.firstChild}while(de)})(we),me=we.firstChild,u.insertAfter(we,$),((se,de,ye)=>{var Le;const rt=[];if(!ye)return;let Ye=ye;for(;Ye=Ye.firstChild;){if(se.isBlock(Ye))return;Te(Ye)&&!de[Ye.nodeName.toLowerCase()]&&rt.push(Ye)}let Mt=rt.length;for(;Mt--;)Ye=rt[Mt],(!Ye.hasChildNodes()||Ye.firstChild===Ye.lastChild&&""===(null===(Le=Ye.firstChild)||void 0===Le?void 0:Le.nodeValue)||ON(se,Ye))&&se.remove(Ye)})(u,p,me),((se,de)=>{de.normalize();const ye=de.lastChild;(!ye||Te(ye)&&/^(left|right)$/gi.test(se.getStyle(ye,"float",!0)))&&se.add(de,"br")})(u,$),u.isEmpty($)&&Rk($),me.normalize(),u.isEmpty(me)?(u.remove(me),D()):(Eg(t,me),kg(t,me))}u.setAttrib(me,"id",""),t.dispatch("NewBlock",{newBlock:me})},fakeEventName:"insertParagraph"},NN=(t,o,n)=>{const s=t.dom.createRng();n?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),t.selection.setRng(s),hf(t,s)},Tg=(t,o)=>{const n=nr("br");kr(re(o),n),t.undoManager.add()},SB=(t,o)=>{ux(t.getBody(),o)||ri(re(o),nr("br"));const n=nr("br");ri(re(o),n),NN(t,n.dom,!1),t.undoManager.add()},ux=(t,o)=>{return n=Oe.after(o),!!Ft(n.getNode())||ci(t,Oe.after(o)).map(s=>Ft(s.getNode())).getOr(!1);var n},RN=t=>t&&"A"===t.nodeName&&"href"in t,Ik=t=>t.fold(wo,RN,RN,wo),DN=(t,o)=>{o.fold(Kt,it(Tg,t),it(SB,t),Kt)},Pk={insert:(t,o)=>{const n=(s=>{const i=it(tn,s),c=Oe.fromRangeStart(s.selection.getRng());return sa(i,s.getBody(),c).filter(Ik)})(t);n.isSome()?n.each(it(DN,t)):((s,i)=>{const d=s.dom,u=s.selection.getRng();let p,f=!1;mf(d,u).each(T=>{u.setStart(T.startContainer,T.startOffset),u.setEnd(T.endContainer,T.endOffset)});let b=u.startOffset,x=u.startContainer;if(Te(x)&&x.hasChildNodes()){const T=b>x.childNodes.length-1;x=x.childNodes[Math.min(b,x.childNodes.length-1)]||x,b=T&&Ae(x)?x.data.length:0}let C=d.getParent(x,d.isBlock);const O=C&&C.parentNode?d.getParent(C.parentNode,d.isBlock):null;"LI"!==(O?O.nodeName.toUpperCase():"")||!(!i||!i.ctrlKey)||(C=O),Ae(x)&&b>=x.data.length&&(((T,D,P)=>{const F=new he(D,P);let q;const $=T.getNonEmptyElements();for(;q=F.next();)if($[q.nodeName.toLowerCase()]||Ae(q)&&q.length>0)return!0;return!1})(s.schema,x,C||d.getRoot())||(p=d.create("br"),u.insertNode(p),u.setStartAfter(p),u.setEndAfter(p),f=!0)),p=d.create("br"),Lh(d,u,p),NN(s,p,f),s.undoManager.add()})(t,o)},fakeEventName:"insertLineBreak"},Lk=(t,o)=>Nk(t).filter(n=>o.length>0&&ea(re(n),o)).isSome(),Ga=kc([{br:[]},{block:[]},{none:[]}]),kB=(t,o)=>{return Lk(n=t,Yl(n));var n},BN=t=>(o,n)=>Nk(o).filter(i=>Qn(re(i))).isSome()===t,mx=(t,o)=>(n,s)=>Nk(n).fold(Ve(""),d=>d.nodeName.toUpperCase())===t.toUpperCase()===o,MN=t=>{const o=Tb(t.dom,t.selection.getStart());return An(o)},Nb=t=>mx("pre",t),gx=t=>(o,n)=>Lw(o)===t,EB=(t,o)=>{return Lk(n=t,Fw(n));var n},px=(t,o)=>o,Fk=t=>{const o=Rs(t),n=Tb(t.dom,t.selection.getStart());return ee(n)&&t.schema.isValidChild(n.nodeName,o)},IN=t=>{const o=t.selection.getRng(),n=re(o.startContainer),s=gc(n,o.startOffset).map(i=>Ra(i)&&!bl(i));return o.collapsed&&s.getOr(!0)},Ml=(t,o)=>(n,s)=>Nn(t,(i,c)=>i&&c(n,s),!0)?H.some(o):H.none(),hx=(t,o,n)=>{o.selection.isCollapsed()||o.execCommand("delete"),ee(n)&&pm(o,t.fakeEventName).isDefaultPrevented()||(t.insert(o,n),ee(n)&&ih(o,t.fakeEventName))},ts=(t,o)=>{const n=()=>hx(Pk,t,o),s=()=>hx(AN,t,o),i=(c=t,d=o,Qp([Ml([kB],Ga.none()),Ml([Nb(!0),MN],Ga.none()),Ml([mx("summary",!0)],Ga.br()),Ml([Nb(!0),gx(!1),px],Ga.br()),Ml([Nb(!0),gx(!1)],Ga.block()),Ml([Nb(!0),gx(!0),px],Ga.block()),Ml([Nb(!0),gx(!0)],Ga.br()),Ml([BN(!0),px],Ga.br()),Ml([BN(!0)],Ga.block()),Ml([EB],Ga.br()),Ml([px],Ga.br()),Ml([Fk],Ga.block()),Ml([IN],Ga.block())],[c,!(!d||!d.shiftKey)]).getOr(Ga.none()));var c,d;switch(Ec(t)){case"linebreak":i.fold(n,n,Kt);break;case"block":i.fold(s,s,Kt);break;case"invert":i.fold(s,n,Kt);break;default:i.fold(n,s,Kt)}},PN=ti(),TB=PN.os.isiOS()&&PN.browser.isSafari(),zk=(t,o)=>{var n;o.isDefaultPrevented()||(o.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{ts(t,o)}))},Hk=ti(),Vk=t=>t.stopImmediatePropagation(),tu=t=>t.keyCode===gt.PAGE_UP||t.keyCode===gt.PAGE_DOWN,fx=(t,o,n)=>{n&&!t.get()?o.on("NodeChange",Vk,!0):!n&&t.get()&&o.off("NodeChange",Vk),t.set(n)},Uk=(t,o)=>{const n=o.container(),s=o.offset();return Ae(n)?(n.insertData(s,t),H.some(Oe(n,s+t.length))):Kh(o).map(i=>{const c=Ba(t);return o.isAtEnd()?ri(i,c):kr(i,c),Oe(c.dom,t.length)})},bx=it(Uk,Vn),vx=it(Uk," "),yx=t=>o=>{t.selection.setRng(o.toRange()),t.nodeChanged()},LN=t=>{const o=Oe.fromRangeStart(t.selection.getRng()),n=re(t.getBody());if(t.selection.isCollapsed()){const s=it(tn,t),i=Oe.fromRangeStart(t.selection.getRng());return sa(s,t.getBody(),i).bind((c=n,d=>d.fold(u=>di(c.dom,Oe.before(u)),u=>js(u),u=>Di(u),u=>ci(c.dom,Oe.after(u))))).map(c=>()=>{return(d=n,u=o,p=t.schema,f=>mO(d,f,p)?bx(u):vx(u))(c).each(yx(t));var d,u,p})}var c;return H.none()},xx=t=>{return Jn(Ht.browser.isFirefox()&&t.selection.isEditable()&&(o=t.dom,n=t.selection.getRng().startContainer,o.isEditable(o.getParent(n,"summary"))),()=>{const s=re(t.getBody());var i,c,d;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(i=s,c=Oe.fromRangeStart(t.selection.getRng()),d=t.schema,mO(i,c,d)?bx(c):vx(c)).each(yx(t))});var o,n},wx=t=>JE(t)?[{keyCode:gt.TAB,action:eo(ok,t,!0)},{keyCode:gt.TAB,shiftKey:!0,action:eo(ok,t,!1)}]:[],Rb=t=>{if(t.addShortcut("Meta+P","","mcePrint"),wk(t),Bc(t))return Zo(null);{const o=(t=>{const o=Zo(null),n=it(tn,t);return t.on("NodeChange",s=>{Lu(t)&&(((i,c,d)=>{const u=qt(J(re(c.getRoot()),'*[data-mce-selected="inline-boundary"]'),b=>b.dom),p=ft(u,i),f=ft(d,i);Ee(Si(p,f),it(WA,!1)),Ee(Si(f,p),it(WA,!0))})(n,t.dom,s.parents),((i,c)=>{const d=c.get();if(i.selection.isCollapsed()&&!i.composing&&d){const u=Oe.fromRangeStart(i.selection.getRng());Oe.isTextPosition(u)&&!bc(p=u)&&!$l(p)&&(B0(i,((t,o)=>{return Oe.isTextPosition(o)?(s=o,eT(n=t)&&s.container()===n?((i,c)=>{const d=t_(i.data.substr(0,c.offset())),u=t_(i.data.substr(c.offset()));return(d.text+u.text).length>0?(oT(i),Oe(i,c.offset()-d.count)):c})(n,s):ma(n,s)):((n,s)=>s.container()===n.parentNode?((i,c)=>{const d=c.container(),u=((p,f)=>{const b=Oa(p,f);return-1===b?H.none():H.some(b)})(dr(d.childNodes),i).map(p=>p<c.offset()?Oe(d,c.offset()-1):c).getOr(c);return Oc(i),u})(n,s):ma(n,s))(t,o);var n,s})(d,u)),c.set(null))}var p})(t,o),((i,c,d,u)=>{if(c.selection.isCollapsed()){const p=ft(u,i);Ee(p,f=>{const b=Oe.fromRangeStart(c.selection.getRng());sa(i,c.getBody(),b).bind(x=>qA(c,d,x))})}})(n,t,o,s.parents))}),o})(t);return(n=t).on("beforeinput",s=>{n.selection.isEditable()&&!Wo(s.getTargetRanges(),i=>!V_(n.dom,i))||s.preventDefault()}),(n=>{n.on("keyup compositionstart",it(U0,n))})(t),((n,s)=>{n.on("keydown",i=>{i.isDefaultPrevented()||((c,d,u)=>{const p=Ht.os.isMacOS()||Ht.os.isiOS();hb([{keyCode:gt.RIGHT,action:eo(XS,c,!0)},{keyCode:gt.LEFT,action:eo(XS,c,!1)},{keyCode:gt.UP,action:eo(JS,c,!1)},{keyCode:gt.DOWN,action:eo(JS,c,!0)},...p?[{keyCode:gt.UP,action:eo(pb,c,!1),metaKey:!0,shiftKey:!0},{keyCode:gt.DOWN,action:eo(pb,c,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:gt.RIGHT,action:eo(iN,c,!0)},{keyCode:gt.LEFT,action:eo(iN,c,!1)},{keyCode:gt.UP,action:eo(tk,c,!1)},{keyCode:gt.DOWN,action:eo(tk,c,!0)},{keyCode:gt.UP,action:eo(tk,c,!1)},{keyCode:gt.UP,action:eo(ZS,c,!1)},{keyCode:gt.DOWN,action:eo(ZS,c,!0)},{keyCode:gt.RIGHT,action:eo(eN,c,!0)},{keyCode:gt.LEFT,action:eo(eN,c,!1)},{keyCode:gt.UP,action:eo(tN,c,!1)},{keyCode:gt.DOWN,action:eo(tN,c,!0)},{keyCode:gt.RIGHT,action:eo(cb,c,d,!0)},{keyCode:gt.LEFT,action:eo(cb,c,d,!1)},{keyCode:gt.RIGHT,ctrlKey:!p,altKey:p,action:eo(PS,c,d)},{keyCode:gt.LEFT,ctrlKey:!p,altKey:p,action:eo(yg,c,d)},{keyCode:gt.UP,action:eo($0,c,!1)},{keyCode:gt.DOWN,action:eo($0,c,!0)}],u).each(f=>{u.preventDefault()})})(n,s,i)})})(t,o),((n,s)=>{let i=!1;n.on("keydown",c=>{i=c.keyCode===gt.BACKSPACE,c.isDefaultPrevented()||((d,u,p)=>{const f=p.keyCode===gt.BACKSPACE?"deleteContentBackward":"deleteContentForward",b=d.selection.isCollapsed(),x=b?"character":"selection",C=O=>b?O?"word":"line":"selection";ZA([{keyCode:gt.BACKSPACE,action:eo(F0,d)},{keyCode:gt.BACKSPACE,action:eo(CS,d,!1)},{keyCode:gt.DELETE,action:eo(CS,d,!0)},{keyCode:gt.BACKSPACE,action:eo(rb,d,!1)},{keyCode:gt.DELETE,action:eo(rb,d,!0)},{keyCode:gt.BACKSPACE,action:eo(Yd,d,u,!1)},{keyCode:gt.DELETE,action:eo(Yd,d,u,!0)},{keyCode:gt.BACKSPACE,action:eo(Ju,d,!1)},{keyCode:gt.DELETE,action:eo(Ju,d,!0)},{keyCode:gt.BACKSPACE,action:eo(Sg,d,!1,x)},{keyCode:gt.DELETE,action:eo(Sg,d,!0,x)},...Ok?[{keyCode:gt.BACKSPACE,altKey:!0,action:eo(Sg,d,!1,C(!0))},{keyCode:gt.DELETE,altKey:!0,action:eo(Sg,d,!0,C(!0))},{keyCode:gt.BACKSPACE,metaKey:!0,action:eo(Sg,d,!1,C(!1))}]:[{keyCode:gt.BACKSPACE,ctrlKey:!0,action:eo(Sg,d,!1,C(!0))},{keyCode:gt.DELETE,ctrlKey:!0,action:eo(Sg,d,!0,C(!0))}],{keyCode:gt.BACKSPACE,action:eo(Xp,d,!1)},{keyCode:gt.DELETE,action:eo(Xp,d,!0)},{keyCode:gt.BACKSPACE,action:eo(oh,d,!1)},{keyCode:gt.DELETE,action:eo(oh,d,!0)},{keyCode:gt.BACKSPACE,action:eo(k0,d,!1)},{keyCode:gt.DELETE,action:eo(k0,d,!0)},{keyCode:gt.BACKSPACE,action:eo(md,d,!1)},{keyCode:gt.DELETE,action:eo(md,d,!0)},{keyCode:gt.BACKSPACE,action:eo(cm,d,!1)},{keyCode:gt.DELETE,action:eo(cm,d,!0)}],p).filter(O=>d.selection.isEditable()).each(O=>{p.preventDefault(),pm(d,f).isDefaultPrevented()||(O(),ih(d,f))})})(n,s,c)}),n.on("keyup",c=>{var d,u,p;c.isDefaultPrevented()||(u=c,p=i,hb([{keyCode:gt.BACKSPACE,action:eo(EA,d=n)},{keyCode:gt.DELETE,action:eo(EA,d)},...Ok?[{keyCode:gt.BACKSPACE,altKey:!0,action:eo(th,d)},{keyCode:gt.DELETE,altKey:!0,action:eo(th,d)},...p?[{keyCode:Ak?224:91,action:eo(th,d)}]:[]]:[{keyCode:gt.BACKSPACE,ctrlKey:!0,action:eo(th,d)},{keyCode:gt.DELETE,ctrlKey:!0,action:eo(th,d)}]],u)),i=!1})})(t,o),(n=>{let s=H.none();n.on("keydown",i=>{var c;i.keyCode===gt.ENTER&&(TB&&(c=>{if(!c.collapsed)return!1;const d=c.startContainer;if(Ae(d)){const u=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,p=d.data.charAt(c.startOffset-1);return u.test(p)}return!1})(n.selection.getRng())?(s=H.some((c=n).selection.getBookmark()),c.undoManager.add()):zk(n,i))}),n.on("keyup",i=>{i.keyCode===gt.ENTER&&s.each(()=>{return d=i,(c=n).undoManager.undo(),s.fold(Kt,u=>c.selection.moveToBookmark(u)),zk(c,d),void(s=H.none());var c,d})})})(t),(n=>{n.on("keydown",s=>{var i,c;s.isDefaultPrevented()||(c=s,ZA([{keyCode:gt.SPACEBAR,action:eo(LN,i=n)},{keyCode:gt.SPACEBAR,action:eo(xx,i)}],c).each(d=>{c.preventDefault(),pm(i,"insertText",{data:" "}).isDefaultPrevented()||(d(),ih(i,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",s=>{s.isComposing||(i=>{const c=re(i.getBody());i.selection.isCollapsed()&&((t,o,n)=>{const s=o.container();if(!Ae(s))return H.none();if((i=>{const c=i.container();return Ae(c)&&Xe(c.data,Vn)})(o)){const i=fy(t,s,!1,n)||(c=>{const d=c.data,u=(p=>{const f=p.split("");return qt(f,(b,x)=>mi(b)&&x>0&&x<f.length-1&&h_(f[x-1])&&h_(f[x+1])?" ":b).join("")})(d);return u!==d&&(c.data=u,!0)})(s)||by(t,s,!1,n);return Jn(i,o)}if(qa(t,o,n)){const i=fy(t,s,!0,n)||by(t,s,!0,n);return Jn(i,o)}return H.none()})(c,Oe.fromRangeStart(i.selection.getRng()),i.schema).each(d=>{i.selection.setRng(d.toRange())})})(n)})})(t),(n=>{n.on("keydown",s=>{var c;s.isDefaultPrevented()||(c=s,hb([...wx(n)],c).each(d=>{c.preventDefault()}))})})(t),((n,s)=>{n.on("keydown",i=>{i.isDefaultPrevented()||((c,d,u)=>{const p=Ht.os.isMacOS()||Ht.os.isiOS();hb([{keyCode:gt.END,action:eo(QS,c,!0)},{keyCode:gt.HOME,action:eo(QS,c,!1)},...p?[]:[{keyCode:gt.HOME,action:eo(pb,c,!1),ctrlKey:!0,shiftKey:!0},{keyCode:gt.END,action:eo(pb,c,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:gt.END,action:eo(fb,c,!0)},{keyCode:gt.HOME,action:eo(fb,c,!1)},{keyCode:gt.END,action:eo(fd,c,!0,d)},{keyCode:gt.HOME,action:eo(fd,c,!1,d)}],u).each(f=>{u.preventDefault()})})(n,s,i)})})(t,o),((n,s)=>{if(Hk.os.isMacOS())return;const i=Zo(!1);n.on("keydown",c=>{tu(c)&&fx(i,n,!0)}),n.on("keyup",c=>{var d,u,p;c.isDefaultPrevented()||(p=c,hb([{keyCode:gt.PAGE_UP,action:eo(fd,d=n,!1,u=s)},{keyCode:gt.PAGE_DOWN,action:eo(fd,d,!0,u)}],p)),tu(c)&&i.get()&&(fx(i,n,!1),n.nodeChanged())})})(t,o),o}var n};class Db{constructor(o){let n;this.lastPath=[],this.editor=o;const s=this;"onselectionchange"in o.getDoc()||o.on("NodeChange click mouseup keyup focus",i=>{const c=o.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};"nodechange"!==i.type&&ey(d,n)||o.dispatch("SelectionChange"),n=d}),o.on("contextmenu",()=>{o.dispatch("SelectionChange")}),o.on("SelectionChange",()=>{const i=o.selection.getStart(!0);i&&fn(o)&&!s.isSameElementPath(i)&&o.dom.isChildOf(i,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("mouseup",i=>{!i.isDefaultPrevented()&&fn(o)&&("IMG"===o.selection.getNode().nodeName?kl.setEditorTimeout(o,()=>{o.nodeChanged()}):o.nodeChanged())})}nodeChanged(o={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!dD(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();s=n.getStart(!0)||i,s.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(s,i)||(s=i);const c=[];this.editor.dom.getParent(s,d=>d===i||(c.push(d),!1)),this.editor.dispatch("NodeChange",{...o,element:s,parents:c})}}isSameElementPath(o){let n;const s=this.editor,i=fa(s.dom.getParents(o,Vo,s.getBody()));if(i.length===this.lastPath.length){for(n=i.length;n>=0&&i[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=i,!0}return this.lastPath=i,!1}}const Il=dp("image"),Og=dp("event"),Bb=t=>o=>{o[Og]=t},jk=Bb(0),OB=Bb(2),FN=Bb(1),$k=dp("mode"),hm=t=>o=>{o[$k]=t},zN=(t,o)=>hm(o)(t),HN=hm(0),Wk=hm(2),NB=hm(1),VN=t=>o=>H.from(o[$k]).exists(s=>s===t),ch=VN(0),UN=VN(1),RB=["none","copy","link","move"],DB=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],qk=()=>{const t=new window.DataTransfer;let o="move",n="all";const s={get dropEffect(){return o},set dropEffect(i){st(RB,i)&&(o=i)},get effectAllowed(){return n},set effectAllowed(i){(t=>H.from(t[Og]).exists(n=>0===n))(s)&&st(DB,i)&&(n=i)},get items(){return i=s,c=t.items,{...c,get length(){return c.length},add:(d,u)=>{if(ch(i)){if(!_t(d))return c.add(d);if(!et(u))return c.add(d,u)}return null},remove:d=>{ch(i)&&c.remove(d)},clear:()=>{ch(i)&&c.clear()}};var i,c},get files(){return UN(s)?Object.freeze({length:0,item:i=>null}):t.files},get types(){return t.types},setDragImage:(i,c,d)=>{ch(s)&&(s[Il]={image:i,x:c,y:d},t.setDragImage(i,c,d))},getData:i=>UN(s)?"":t.getData(i),setData:(i,c)=>{ch(s)&&t.setData(i,c)},clearData:i=>{ch(s)&&t.clearData(i)}};return HN(s),s},jN=(t,o)=>t.setData("text/html",o),Gk="x-tinymce/html",Mb=Ve(Gk),_x="\x3c!-- "+Gk+" --\x3e",$N=t=>_x+t,Kk=t=>-1!==t.indexOf(_x),Yk="%MCEPASTEBIN%",Cx=t=>t.dom.get("mcepastebin"),BB=t=>ee(t)&&"mcepastebin"===t.id,Xk=t=>t===Yk,WN=(t,o)=>($e.each(o,n=>{t=sn(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),qN=t=>WN(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,n,s)=>n||s?Vn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Jk=(t,o)=>({content:t,cancelled:o}),Sx=(t,o)=>(t.insertContent(o,{merge:jE(t),paste:!0}),!0),Qk=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),GN=(t,o,n)=>{return!(t.selection.isCollapsed()||!Qk(o)||(s=t,i=o,c=n,s.undoManager.extra(()=>{c(s,i)},()=>{s.execCommand("mceInsertLink",!1,i)}),0));var s,i,c},KN=(t,o,n)=>{return s=t,!(!Qk(i=o)||!Wo(Zw(s),c=>nt(i.toLowerCase(),`.${c.toLowerCase()}`)))&&((s,i,c)=>(s.undoManager.extra(()=>{c(s,i)},()=>{s.insertContent('<img src="'+i+'">')}),!0))(t,o,n);var s,i},MB=(t=>{let o=0;return()=>"mceclip"+o++})(),IB=t=>{const o=qk();return jN(o,t),Wk(o),o},YN=(t,o,n,s,i)=>{const c=((f,b,x)=>{const C=f.dispatch("PastePreProcess",{content:b,internal:x}),O=((S,R)=>{const T=Wp({sanitize:Iv(S),sandbox_iframes:e_(S)},S.schema);T.addNodeFilter("meta",P=>{$e.each(P,F=>{F.remove()})});const D=T.parse(R,{forced_root_block:!1,isRootContent:!0});return Gu({validate:!0},S.schema).serialize(D)})(f,C.content);return f.hasEventListeners("PastePostProcess")&&!C.isDefaultPrevented()?((S,R,T)=>{const D=S.dom.create("div",{style:"display:none"},R),P=S.dispatch("PastePostProcess",{node:D,internal:T});return Jk(P.node.innerHTML,P.isDefaultPrevented())})(f,O,x):Jk(O,C.isDefaultPrevented())})(t,o,n);if(!c.cancelled){const d=c.content,u=()=>{return p=t,f=d,void(s||!pD(p)?Sx(p,f):(x=p,C=f,$e.each([GN,KN,Sx],O=>!O(x,C,Sx))));var p,f,x,C};i?pm(t,"insertFromPaste",{dataTransfer:IB(d)}).isDefaultPrevented()||(u(),ih(t,"insertFromPaste")):u()}},kx=(t,o,n,s)=>{const i=n||Kk(o);YN(t,o.replace(_x,""),i,!1,s)},Zk=(t,o,n)=>{const s=t.dom.encode(o).replace(/\r\n/g,"\n"),i=((c,d,u)=>{const p=c.split(/\n\n/),f=((C,O)=>{let S="<"+C;const R=Nr(O,(T,D)=>D+'="'+si.encodeAllRaw(T)+'"');return R.length&&(S+=" "+R.join(" ")),S+">"})(d,u),b="</"+d+">",x=qt(p,C=>C.split(/\n/).join("<br />"));return 1===x.length?x[0]:qt(x,C=>f+C+b).join("")})(Rd(s,$E(t)),Rs(t),Ji(t));YN(t,i,!1,!0,n)},Ib=t=>{const o={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const s=t.types[n];try{o[s]=t.getData(s)}catch{o[s]=""}}return o},ou=(t,o)=>o in t&&t[o].length>0,e1=t=>ou(t,"text/html")||ou(t,"text/plain"),t1=(t,o,n)=>{const s="paste"===o.type?o.clipboardData:o.dataTransfer;var i;if(Uh(t)&&s){const c=((d,u)=>{const p=u.items?Lr(dr(u.items),b=>"file"===b.kind?[b.getAsFile()]:[]):[],f=u.files?dr(u.files):[];return ft(p.length>0?p:f,(b=>{const x=Zw(b);return C=>tt(C.type,"image/")&&Wo(x,O=>(S=>{const R=S.toLowerCase(),T={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return $e.hasOwn(T,R)?"image/"+T[R]:"image/"+R})(O)===C.type)})(d))})(t,s);if(c.length>0)return o.preventDefault(),(i=c,Promise.all(qt(i,d=>LC(d).then(u=>({file:d,uri:u}))))).then(d=>{n&&t.selection.setRng(n),Ee(d,u=>{var p,f;p=t,PC((f=u).uri).each(({data:b,type:x,base64Encoded:C})=>{const O=C?b:btoa(b),S=f.file,R=p.editorUpload.blobCache,D=R.getByData(O,x)??((P,F,q,$)=>{const ne=MB(),ce=Vw(P)&&ee(q.name),me=ce?((se,de)=>{const ye=de.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ee(ye)?se.dom.encode(ye[1]):void 0})(P,q.name):ne,we=F.create(ne,q,$,me,ce?q.name:void 0);return F.add(we),we})(p,R,S,O);kx(p,`<img src="${D.blobUri()}">`,!1,!0)})})}),!0}return!1},o1=(t,o,n,s,i)=>{let c=qN(n);const d=ou(o,Mb())||Kk(n),u=!d&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c),p=Qk(c);(Xk(c)||!c.length||u&&!p)&&(s=!0),(s||p)&&(c=ou(o,"text/plain")&&u?o["text/plain"]:(f=>{const b=Au(),x=Wp({},b);let C="";const O=b.getVoidElements(),S=$e.makeMap("script noscript style textarea video audio iframe object"," "),R=b.getBlockElements(),T=D=>{const P=D.name,F=D;if("br"!==P){if("wbr"!==P)if(O[P]&&(C+=" "),S[P])C+=" ";else{if(3===D.type&&(C+=D.value),!(D.name in b.getVoidElements())){let q=D.firstChild;if(q)do{T(q)}while(q=q.next)}R[P]&&F.next&&(C+="\n","p"===P&&(C+="\n"))}}else C+="\n"};return f=WN(f,[/<!\[[^\]]+\]>/g]),T(x.parse(f)),C})(c)),Xk(c)||(s?Zk(t,c,i):kx(t,c,d,i))},n1=(t,o,n,s)=>{((i,c,d)=>{if(!i)return!1;try{return i.clearData(),i.setData("text/html",c),i.setData("text/plain",d),i.setData(Mb(),c),!0}catch{return!1}})(t.clipboardData,o.html,o.text)?(t.preventDefault(),s()):n(o.html,s)},XN=t=>(o,n)=>{const{dom:s,selection:i}=t,c=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=s.create("div",{contenteditable:"true"},o);s.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),s.add(t.getBody(),c);const u=i.getRng();d.focus();const p=s.createRng();p.selectNodeContents(d),i.setRng(p),kl.setEditorTimeout(t,()=>{i.setRng(u),s.remove(c),n()},0)},Ex=t=>({html:$N(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),r1=t=>{return!t.selection.isCollapsed()||!!(o=t).dom.getParent(o.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",o.getBody());var o},JN=(t,o)=>{var n,s;return qu.getCaretRangeFromPoint(null!==(n=o.clientX)&&void 0!==n?n:0,null!==(s=o.clientY)&&void 0!==s?s:0,t.getDoc())},ds=(t,o)=>{t.focus(),o&&t.selection.setRng(o)},yd=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,QN=t=>$e.trim(t).replace(yd,Dm).toLowerCase(),LB=(t,o,n)=>{const s=UE(t);if(n||"all"===s||!gD(t))return o;const i=s?s.split(/[, ]/):[];if(i&&"none"!==s){const c=t.dom,d=t.selection.getNode();o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(u,p,f,b)=>{const x=c.parseStyle(c.decode(f)),C={};for(let S=0;S<i.length;S++){const R=x[i[S]];let T=R,D=c.getStyle(d,i[S],!0);/color/.test(i[S])&&(T=QN(T),D=QN(D)),D!==T&&(C[i[S]]=R)}const O=c.serializeStyle(C,"span");return O?p+' style="'+O+'"'+b:p+b})}else o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return o.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,u,p)=>d+' style="'+u+'"'+p)},ZN=Ft,Ag=Ae,zB=t=>zo(t.dom),nc=t=>o=>Qo(re(t),o),eR=(t,o)=>hr(re(t),zB,nc(o)),tR=(t,o,n)=>{const s=new he(t,o),i=n?s.next.bind(s):s.prev.bind(s);let c=t;for(let d=n?t:i();d&&!ZN(d);d=i())Ca(d)&&(c=d);return c};var Ng;!function(t){t.Before="before",t.After="after"}(Ng||(Ng={}));const HB=(t,o)=>Math.abs(t.left-o),s1=(t,o)=>Math.abs(t.right-o),VB=(t,o,n)=>o>t.left&&o<t.right?0:Math.min(Math.abs(t.left-o),Math.abs(t.right-o)),a1=(t,o,n,s)=>{const i=b=>Ca(b.node)?H.some(b):Te(b.node)?a1(dr(b.node.childNodes),o,n,!1):H.none(),c=(b,x)=>{const C=Rn(b,(O,S)=>x(O,o,n)-x(S,o,n));return Xa(C,i).map(O=>{return s&&!Ae(O.node)&&C.length>1?(S=O,R=C[1],T=x,i(R).filter(D=>Math.abs(T(S,o,n)-T(D,o,n))<2&&Ae(D.node))).getOr(O):O;var S,R,T})},[d,u]=((t,o)=>{return(n=ft(t,n=>{return(s=o)>=(i=n).top&&s<=i.bottom;var s,i}),Nn(n,(s,i)=>s.fold(()=>H.some(i),c=>{const d=Math.min(i.left,c.left),u=Math.min(i.top,c.top),p=Math.max(i.right,c.right),f=Math.max(i.bottom,c.bottom);return H.some({top:u,right:p,bottom:f,left:d,width:p-d,height:f-u})}),H.none())).fold(()=>[[],t],n=>{const{pass:s,fail:i}=Rt(t,c=>((d,u)=>{const p=(f=d,b=u,Math.max(0,Math.min(f.bottom,b.bottom)-Math.max(f.top,b.top))/Math.min(d.height,u.height));var f,b;return((f,b)=>f.top<b.bottom&&f.bottom>b.top)(d,u)&&p>.5})(c,n));return[s,i]});var n})(HA(t),n),{pass:p,fail:f}=Rt(u,b=>b.top<n);return c(d,VB).orThunk(()=>c(f,Im)).orThunk(()=>c(p,Im))},i1=(t,o,n)=>((s,i,c)=>{const d=re(s),p=((t,o,n)=>H.from(t.dom.elementFromPoint(o,n)).map(mc))(ni(d),i,c).filter(f=>Ui(d,f)).getOr(d);return((f,b,x,C)=>{const O=(S,R)=>{const T=ft(S.dom.childNodes,wi(D=>Te(D)&&D.classList.contains("mce-drag-container")));return R.fold(()=>a1(T,x,C,!0),D=>{const P=ft(T,F=>F!==D.dom);return a1(P,x,C,!0)}).orThunk(()=>(Qo(S,f)?H.none():Gc(S)).bind(D=>O(D,H.some(S))))};return O(b,H.none())})(d,p,i,c)})(t,o,n).filter(s=>_l(s.node)).map(s=>{return{node:(i=s).node,position:HB(i,c=o)<s1(i,c)?Ng.Before:Ng.After};var i,c}),l1=t=>{var o,n;const s=t.getBoundingClientRect(),i=t.ownerDocument,c=i.documentElement,d=i.defaultView;return{top:s.top+(null!==(o=d?.scrollY)&&void 0!==o?o:0)-c.clientTop,left:s.left+(null!==(n=d?.scrollX)&&void 0!==n?n:0)-c.clientLeft}},Tx=t=>({target:t,srcElement:t}),Ox=zo,d1=((...t)=>o=>{for(let n=0;n<t.length;n++)if(t[n](o))return!0;return!1})(Ox,on),rR=(t,o,n,s)=>{const i=t.dom,c=o.cloneNode(!0);i.setStyles(c,{width:n,height:s}),i.setAttrib(c,"data-mce-selected",null);const d=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),i.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},Pb=(t,o)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+o,behavior:"smooth"})},Ax=Pb("left",-32),sR=Pb("left",32),u1=Pb("top",-32),Nx=Pb("top",32),m1=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},dh=(t,o,n,s,i)=>{"dragstart"===o&&jN(s,t.dom.getOuterHTML(n));const c=((t,o,n,s)=>{const i=((c,d)=>{const u=(p=>{const f=qk(),b=H.from(p[$k]);return Wk(p),jk(f),f.dropEffect=p.dropEffect,f.effectAllowed=p.effectAllowed,(x=p,H.from(x[Il])).each(x=>f.setDragImage(x.image,x.x,x.y)),Ee(p.types,x=>{"Files"!==x&&f.setData(x,p.getData(x))}),Ee(p.files,x=>f.items.add(x)),(x=>H.from(x[Og]))(p).each(x=>{var C;C=f,Bb(x)(C)}),b.each(x=>{zN(p,x),zN(f,x)}),f;var x})(c);return"dragstart"===d?(jk(u),HN(u)):"drop"===d?(OB(u),Wk(u)):(FN(u),NB(u)),u})(n,t);return et(s)?((c,d,u)=>{const p=ss("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:c,composedPath:p,initEvent:p,preventDefault:Kt,stopImmediatePropagation:Kt,stopPropagation:Kt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:p,initMouseEvent:p,getModifierState:p,dataTransfer:u,...Tx(d)}})(t,o,i):(c=t,d=s,u=o,p=i,{...d,dataTransfer:p,type:c,...Tx(u)});var c,d,u,p})(o,n,s,i);return t.dispatch(o,c)},g1=(t,o,n)=>{t.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>dh(o,"dragend",s.element,s.dataTransfer),i=>dh(o,"dragend",s.element,s.dataTransfer,i))}),p1(t)},p1=t=>{t.on(o=>{o.intervalId.clear(),m1(o.ghost)}),t.clear()},Lb=zo,aR=(t,o)=>ng(t.getBody(),o),jB=t=>{const o=t.selection,n=t.dom,s=t.getBody(),i=((t,o,n,s)=>{const i=ai();let c,d;const u=Rs(t),p=t.dom,f=()=>{(b=>{var x,C;const O=J(re(b),"*[contentEditable=false],video,audio,embed,object");for(let S=0;S<O.length;S++){const R=O[S].dom;let T=R.previousSibling;if(ua(T)){const D=T.data;1===D.length?null===(x=T.parentNode)||void 0===x||x.removeChild(T):T.deleteData(D.length-1,1)}T=R.nextSibling,Su(T)&&(1===T.data.length?null===(C=T.parentNode)||void 0===C||C.removeChild(T):T.deleteData(0,1))}})(o),d&&(Oc(d),d=null),i.on(b=>{p.remove(b.caret),i.clear()}),c&&(clearInterval(c),c=void 0)};return{show:(b,x)=>{let C;if(f(),n_(x))return null;if(!n(x))return d=((O,S)=>{var R;const T=(null!==(R=O.ownerDocument)&&void 0!==R?R:document).createTextNode(Er),D=O.parentNode;if(S){const P=O.previousSibling;if(Ad(P)){if(Mn(P))return P;if(ua(P))return P.splitText(P.data.length-1)}D?.insertBefore(T,O)}else{const P=O.nextSibling;if(Ad(P)){if(Mn(P))return P;if(Su(P))return P.splitText(1),P}O.nextSibling?D?.insertBefore(T,O.nextSibling):D?.appendChild(T)}return T})(x,b),C=x.ownerDocument.createRange(),bp(d.nextSibling)?(C.setStart(d,0),C.setEnd(d,0)):(C.setStart(d,1),C.setEnd(d,1)),C;{const O=((T,D,P)=>{var F;const q=(null!==(F=D.ownerDocument)&&void 0!==F?F:document).createElement(T);q.setAttribute("data-mce-caret",P?"before":"after"),q.setAttribute("data-mce-bogus","all"),q.appendChild(xa().dom);const $=D.parentNode;return P?$?.insertBefore(q,D):D.nextSibling?$?.insertBefore(q,D.nextSibling):$?.appendChild(q),q})(u,x,b),S=r_(o,x,b);p.setStyle(O,"top",S.top),d=O;const R=p.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});p.setStyles(R,{...S}),p.add(o,R),i.set({caret:R,element:x,before:b}),b&&p.addClass(R,"mce-visual-caret-before"),c=setInterval(()=>{i.on(T=>{s()?p.toggleClass(T.caret,"mce-visual-caret-hidden"):p.addClass(T.caret,"mce-visual-caret-hidden")})},500),C=x.ownerDocument.createRange(),C.setStart(O,0),C.setEnd(O,0)}return C},hide:f,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(b=>{const x=r_(o,b.element,b.before);p.setStyles(b.caret,{...x})})},destroy:()=>clearInterval(c)}})(t,s,n.isBlock,()=>eg(t)),c="sel-"+n.uniqueId(),d="data-mce-selected";let u;const p=T=>T!==s&&(Lb(T)||fo(T))&&n.isChildOf(T,s)&&n.isEditable(T.parentNode),f=(T,D,P,F=!0)=>t.dispatch("ShowCaret",{target:D,direction:T,before:P}).isDefaultPrevented()?null:(F&&o.scrollIntoView(D,-1===T),i.show(P,D)),b=T=>Mn(T)||Su(T)||ua(T),x=T=>b(T.startContainer)||b(T.endContainer),O=(T,D)=>{if(!T)return null;if(T.collapsed){if(!x(T)){const $=D?1:-1,ne=Vm($,s,T),ce=ne.getNode(!D);if(ee(ce)){if(_l(ce))return f($,ce,!!D&&!ne.isAtEnd(),!1);if(_a(ce)&&zo(ce.nextSibling)){const pe=n.createRng();return pe.setStart(ce,0),pe.setEnd(ce,0),pe}}const me=ne.getNode(D);if(ee(me)){if(_l(me))return f($,me,!D&&!ne.isAtEnd(),!1);if(_a(me)&&zo(me.previousSibling)){const pe=n.createRng();return pe.setStart(me,1),pe.setEnd(me,1),pe}}}return null}let P=T.startContainer,F=T.startOffset;const q=T.endOffset;if(Ae(P)&&0===F&&Lb(P.parentNode)&&(P=P.parentNode,F=n.nodeIndex(P),P=P.parentNode),!Te(P))return null;if(q===F+1&&P===T.endContainer){const $=P.childNodes[F];if(p($))return(ne=>{const ce=ne.cloneNode(!0),me=t.dispatch("ObjectSelected",{target:ne,targetClone:ce});if(me.isDefaultPrevented())return null;const pe=((se,de)=>{const ye=re(t.getBody()),Le=t.getDoc(),rt=Sr(ye,"#"+c).getOrThunk(()=>{const kt=Vi('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Le);return ln(kt,"id",c),I(ye,kt),kt}),Ye=n.createRng();X(rt),j(rt,[Ba(Vn,Le),re(de),Ba(Vn,Le)]),Ye.setStart(rt.dom.firstChild,1),Ye.setEnd(rt.dom.lastChild,0),Ed(rt,{top:n.getPos(se,t.getBody()).y+"px"}),ry(rt);const Mt=o.getSel();return Mt&&(Mt.removeAllRanges(),Mt.addRange(Ye)),Ye})(ne,me.targetClone),we=re(ne);return Ee(J(re(t.getBody()),`*[${d}]`),se=>{Qo(we,se)||Cr(se,d)}),n.getAttrib(ne,d)||ne.setAttribute(d,"1"),u=ne,R(),pe})($)}return null},S=()=>{u&&u.removeAttribute(d),Sr(re(t.getBody()),"#"+c).each(le),u=null},R=()=>{i.hide()};return Bc(t)||(t.on("click",T=>{n.isEditable(T.target)||(T.preventDefault(),t.focus())}),t.on("blur NewBlock",S),t.on("ResizeWindow FullscreenStateChanged",i.reposition),t.on("tap",T=>{const D=T.target,P=aR(t,D);Lb(P)?(T.preventDefault(),rm(t,P).each(O)):p(D)&&rm(t,D).each(O)},!0),t.on("mousedown",T=>{const D=T.target;if(D!==s&&"HTML"!==D.nodeName&&!n.isChildOf(D,s)||!((F,q,$)=>{const ne=re(F.getBody()),ce=F.inline?ne:re(ni(ne).dom.documentElement),me=((pe,we,se,de)=>{const ye=we.dom.getBoundingClientRect();return{x:se-(pe?ye.left+we.dom.clientLeft+eb(we):0),y:de-(pe?ye.top+we.dom.clientTop+cA(we):0)}})(F.inline,ce,q,$);return((pe,we,se)=>{const de=iA(pe),ye=lA(pe);return we>=0&&se>=0&&we<=de&&se<=ye})(ce,me.x,me.y)})(t,T.clientX,T.clientY))return;S(),R();const P=aR(t,D);Lb(P)?(T.preventDefault(),rm(t,P).each(O)):i1(s,T.clientX,T.clientY).each(F=>{var q;T.preventDefault(),(q=f(1,F.node,F.position===Ng.Before,!1))&&o.setRng(q),Dt(P)?P.focus():t.getBody().focus()})}),t.on("keypress",T=>{gt.modifierPressed(T)||Lb(o.getNode())&&T.preventDefault()}),t.on("GetSelectionRange",T=>{let D=T.range;if(u){if(!u.parentNode)return void(u=null);D=D.cloneRange(),D.selectNode(u),T.range=D}}),t.on("SetSelectionRange",T=>{T.range=(T=>{const D=t.schema.getVoidElements(),P=n.createRng(),F=T.startContainer,q=T.startOffset,$=T.endContainer,ne=T.endOffset;return Gt(D,F.nodeName.toLowerCase())?0===q?P.setStartBefore(F):P.setStartAfter(F):P.setStart(F,q),Gt(D,$.nodeName.toLowerCase())?0===ne?P.setEndBefore($):P.setEndAfter($):P.setEnd($,ne),P})(T.range);const D=O(T.range,T.forward);D&&(T.range=D)}),t.on("AfterSetSelectionRange",T=>{const D=T.range,P=D.startContainer.parentElement;var F,q;x(D)||Te(F=P)&&"mcepastebin"===F.id||R(),ee(q=P)&&n.hasClass(q,"mce-offscreen-selection")||S()}),(t=>{const o=ai(),n=Sn.DOM,s=document,i=(p=o,f=t,b=>{if(0===b.button){const x=yn(f.dom.getParents(b.target),d1).getOr(null);if(ee(x)&&(C=f.dom,O=f.getBody(),Ox(S=x)&&S!==O&&C.isEditable(S.parentElement))){const C=f.dom.getPos(x),O=f.getBody(),S=f.getDoc().documentElement;p.set({element:x,dataTransfer:qk(),dragging:!1,screenX:b.screenX,screenY:b.screenY,maxX:(f.inline?O.scrollWidth:S.offsetWidth)-2,maxY:(f.inline?O.scrollHeight:S.offsetHeight)-2,relX:b.pageX-C.x,relY:b.pageY-C.y,width:x.offsetWidth,height:x.offsetHeight,ghost:rR(f,x,x.offsetWidth,x.offsetHeight),intervalId:mE(100)})}}var C,O,S}),c=((t,o)=>{const n=Qc((i,c)=>{return u=i,p=c,(d=o)._selectionOverrides.hideFakeCaret(),void i1(d.getBody(),u,p).fold(()=>d.selection.placeCaretAt(u,p),f=>{const b=d._selectionOverrides.showCaret(1,f.node,f.position===Ng.Before,!1);b?d.selection.setRng(b):d.selection.placeCaretAt(u,p)});var d,u,p},0);o.on("remove",n.cancel);const s=t;return i=>t.on(c=>{const d=Math.max(Math.abs(i.screenX-c.screenX),Math.abs(i.screenY-c.screenY));if(!c.dragging&&d>10){const f=dh(o,"dragstart",c.element,c.dataTransfer,i);if(ee(f.dataTransfer)&&(c.dataTransfer=f.dataTransfer),f.isDefaultPrevented())return;c.dragging=!0,o.focus()}if(c.dragging){const f=i.currentTarget===o.getDoc().documentElement,b=((x,C)=>({pageX:C.pageX-x.relX,pageY:C.pageY+5}))(c,(C=i,O=(T=x=o).inline?l1(T.getBody()):{left:0,top:0},S=(T=>{const D=T.getBody();return T.inline?{left:D.scrollLeft,top:D.scrollTop}:{left:0,top:0}})(x),R=((T,D)=>{if(D.target.ownerDocument!==T.getDoc()){const P=l1(T.getContentAreaContainer()),F=(q=>{const $=q.getBody(),ne=q.getDoc().documentElement;return q.inline?{left:$.scrollLeft,top:$.scrollTop}:{left:$.scrollLeft||ne.scrollLeft,top:$.scrollTop||ne.scrollTop}})(T);return{left:D.pageX-P.left+F.left,top:D.pageY-P.top+F.top}}return{left:D.pageX,top:D.pageY}})(x,C),{pageX:R.left-O.left+S.left,pageY:R.top-O.top+S.top}));u=c.ghost,p=o.getBody(),u.parentNode!==p&&p.appendChild(u),((x,C,O,S,R,T,D,P,F,q,$,ne)=>{let ce=0,me=0;x.style.left=C.pageX+"px",x.style.top=C.pageY+"px",C.pageX+O>R&&(ce=C.pageX+O-R),C.pageY+S>T&&(me=C.pageY+S-T),x.style.width=O-ce+"px",x.style.height=S-me+"px";const pe=F.clientHeight,we=F.clientWidth,se=D+F.getBoundingClientRect().top,de=P+F.getBoundingClientRect().left;$.on(ye=>{ye.intervalId.clear(),ye.dragging&&ne&&(D+8>=pe?ye.intervalId.set(Nx(q)):D-8<=0?ye.intervalId.set(u1(q)):P+8>=we?ye.intervalId.set(sR(q)):P-8<=0?ye.intervalId.set(Ax(q)):se+16>=window.innerHeight?ye.intervalId.set(Nx(window)):se-16<=0?ye.intervalId.set(u1(window)):de+16>=window.innerWidth?ye.intervalId.set(sR(window)):de-16<=0&&ye.intervalId.set(Ax(window)))})})(c.ghost,b,c.width,c.height,c.maxX,c.maxY,i.clientY,i.clientX,o.getContentAreaContainer(),o.getWin(),s,f),n.throttle(i.clientX,i.clientY)}var x,C,T,O,S,R,u,p})})(o,t),d=((p,f)=>b=>{p.on(x=>{var C,O,S,R;if(x.intervalId.clear(),x.dragging){if(O=f,S=(O=>{const S=O.getSel();if(ee(S)){const R=S.getRangeAt(0).startContainer;return Ae(R)?R.parentNode:R}return null})(f.selection),R=x.element,!An(S)&&S!==R&&!O.dom.isChildOf(S,R)&&O.dom.isEditable(S)){const O=null!==(C=f.getDoc().elementFromPoint(b.clientX,b.clientY))&&void 0!==C?C:f.getBody();dh(f,"drop",O,x.dataTransfer,b).isDefaultPrevented()||f.undoManager.transact(()=>{((S,R)=>{const T=S.getParent(R.parentNode,S.isBlock);m1(R),T&&T!==S.getRoot()&&S.isEmpty(T)&&Fa(re(T))})(f.dom,x.element),(S=>{const R=S.getData("text/html");return""===R?H.none():H.some(R)})(x.dataTransfer).each(S=>f.insertContent(S)),f._selectionOverrides.hideFakeCaret()})}dh(f,"dragend",f.getBody(),x.dataTransfer,b)}}),p1(p)})(o,t),u=((p,f)=>b=>g1(p,f,H.some(b)))(o,t);var p,f;t.on("mousedown",i),t.on("mousemove",c),t.on("mouseup",d),n.bind(s,"mousemove",c),n.bind(s,"mouseup",u),t.on("remove",()=>{n.unbind(s,"mousemove",c),n.unbind(s,"mouseup",u)}),t.on("keydown",p=>{p.keyCode===gt.ESC&&g1(o,t,H.none())})})(T=t),Xw(T)&&(D=>{const P=$=>{if(!$.isDefaultPrevented()){const ne=$.dataTransfer;ne&&(st(ne.types,"Files")||ne.files.length>0)&&($.preventDefault(),"drop"===$.type&&w0(D,"Dropped file type is not supported"))}},F=$=>{ff(D,$.target)&&P($)},q=()=>{const $=Sn.DOM,ne=D.dom,ce=document,me=D.inline?D.getBody():D.getDoc(),pe=["drop","dragover"];Ee(pe,we=>{$.bind(ce,we,F),ne.bind(me,we,P)}),D.on("remove",()=>{Ee(pe,we=>{$.unbind(ce,we,F),ne.unbind(me,we,P)})})};D.on("init",()=>{kl.setEditorTimeout(D,q,0)})})(T),(T=>{const D=Qc(()=>{if(!T.removed&&T.getBody().contains(document.activeElement)){const P=T.selection.getRng();if(P.collapsed){const F=xS(T,P,!1);T.selection.setRng(F)}}},0);T.on("focus",()=>{D.throttle()}),T.on("blur",()=>{D.cancel()})})(t),(T=>{T.on("init",()=>{T.on("focusin",D=>{const P=D.target;if(fo(P)){const F=ng(T.getBody(),P),q=zo(F)?F:P;T.selection.getNode()!==q&&rm(T,q).each($=>T.selection.setRng($))}})})})(t)),{showCaret:f,showBlockCaretContainer:T=>{T.hasAttribute("data-mce-caret")&&(Nd(T),o.scrollIntoView(T))},hideFakeCaret:R,destroy:()=>{i.destroy(),u=null}};var T},$B=(t,o)=>{let n=o;for(let s=t.previousSibling;Ae(s);s=s.previousSibling)n+=s.data.length;return n},yr=(t,o,n,s,i)=>{if(Ae(n)&&(s<0||s>n.data.length))return[];const c=i&&Ae(n)?[$B(n,s)]:[s];let d=n;for(;d!==o&&d.parentNode;)c.push(t.nodeIndex(d,i)),d=d.parentNode;return d===o?c.reverse():[]},Fb=(t,o,n,s,i,c,d=!1)=>({start:yr(t,o,n,s,d),end:yr(t,o,i,c,d)}),Pc=(t,o)=>{const n=o.slice(),s=n.pop();return rs(s)?Nn(n,(i,c)=>i.bind(d=>H.from(d.childNodes[c])),H.some(t)).bind(i=>Ae(i)&&(s<0||s>i.data.length)?H.none():H.some({node:i,offset:s})):H.none()},h1=(t,o)=>Pc(t,o.start).bind(({node:n,offset:s})=>Pc(t,o.end).map(({node:i,offset:c})=>{const d=document.createRange();return d.setStart(n,s),d.setEnd(i,c),d})),Rg=(t,o,n)=>{if(o&&t.isEmpty(o)&&!n(o)){const s=o.parentNode;t.remove(o,Ae(o.firstChild)&&ku(o.firstChild.data)),Rg(t,s,n)}},Dg=(t,o,n,s=!0)=>{const i=o.startContainer.parentNode,c=o.endContainer.parentNode;o.deleteContents(),s&&!n(o.startContainer)&&(Ae(o.startContainer)&&0===o.startContainer.data.length&&t.remove(o.startContainer),Ae(o.endContainer)&&0===o.endContainer.data.length&&t.remove(o.endContainer),Rg(t,i,n),i!==c&&Rg(t,c,n))},zb=(t,o)=>H.from(t.dom.getParent(o.startContainer,t.dom.isBlock)),f1=(t,o,n)=>{const s=t.dynamicPatternsLookup({text:n,block:o});return{...t,blockPatterns:Sv(s).concat(t.blockPatterns),inlinePatterns:kv(s).concat(t.inlinePatterns)}},b1=(t,o,n,s)=>{const i=t.createRng();return i.setStart(o,0),i.setEnd(n,s),i.toString()},v1=(t,o,n)=>{((s,i,c)=>{if(Ae(s)&&0>=s.length)return H.some(tc(s,0));{const d=Xi(J0);return H.from(d.forwards(s,0,vb(s),c)).map(u=>tc(u.container,0))}})(o,0,o).each(s=>{const i=s.container;rk(i,n.start.length,o).each(u=>{const p=t.createRng();p.setStart(i,0),p.setEnd(u.container,u.offset),Dg(t,p,f=>f===o)});const c=re(i),d=fe(c);var u,p;/^\s[^\s]/.test(d)&&(u=c,p=d.slice(1),cn.set(u,p))})},iR=(t,o)=>t.create("span",{"data-mce-type":"bookmark",id:o}),Dx=(t,o)=>{const n=t.createRng();return n.setStartAfter(o.start),n.setEndBefore(o.end),n},lR=(t,o,n)=>{const s=h1(t.getRoot(),n).getOrDie("Unable to resolve path range"),i=s.startContainer,c=s.endContainer,d=0===s.endOffset?c:c.splitText(s.endOffset),u=0===s.startOffset?i:i.splitText(s.startOffset),p=u.parentNode;return{prefix:o,end:d.parentNode.insertBefore(iR(t,o+"-end"),d),start:p.insertBefore(iR(t,o+"-start"),u)}},y1=(t,o,n)=>{Rg(t,t.get(o.prefix+"-end"),n),Rg(t,t.get(o.prefix+"-start"),n)},Bx=t=>0===t.start.length,cR=(t,o,n,s)=>{const i=o.start;var c;return Q0(t,s.container,s.offset,(c=i,(d,u)=>{const p=d.data.substring(0,u),f=p.lastIndexOf(c.charAt(c.length-1)),b=p.lastIndexOf(c);return-1!==b?b+c.length:-1!==f?f+1:-1}),n).bind(d=>{var u,p;const f=null!==(p=null===(u=n.textContent)||void 0===u?void 0:u.indexOf(i))&&void 0!==p?p:-1;if(-1!==f&&d.offset>=f+i.length){const b=t.createRng();return b.setStart(d.container,d.offset-i.length),b.setEnd(d.container,d.offset),H.some(b)}return dm(d.container,d.offset-i.length,n).map(x=>{const C=t.createRng();return C.setStart(x.container,x.offset),C.setEnd(d.container,d.offset),C}).filter(x=>x.toString()===i).orThunk(()=>cR(t,o,n,tc(d.container,0)))})},x1=(t,o,n,s)=>{const i=t.dom,c=i.getRoot(),d=n.pattern,u=n.position.container,p=n.position.offset;return dm(u,p-n.pattern.end.length,o).bind(f=>{const b=Fb(i,c,f.container,f.offset,u,p,s);if(Bx(d))return H.some({matches:[{pattern:d,startRng:b,endRng:b}],position:f});{const x=Hb(t,n.remainingPatterns,f.container,f.offset,o,s),C=x.getOr({matches:[],position:f}),O=C.position;return((R,T,D,P,F,q=!1)=>{if(0===T.start.length&&!q){const $=R.createRng();return $.setStart(D,P),$.setEnd(D,P),H.some($)}return nk(D,P,F).bind($=>cR(R,T,F,$).bind(ne=>{var ce;return q&&(ne.endContainer===$.container&&ne.endOffset===$.offset||0===$.offset&&(null===(ce=ne.endContainer.textContent)||void 0===ce?void 0:ce.length)===ne.endOffset)?H.none():H.some(ne)}))})(i,d,O.container,O.offset,o,x.isNone()).map(R=>{const T=((D,P,F,q=!1)=>Fb(D,P,F.startContainer,F.startOffset,F.endContainer,F.endOffset,q))(i,c,R,s);return{matches:C.matches.concat([{pattern:d,startRng:T,endRng:b}]),position:tc(R.startContainer,R.startOffset)}})}})},Hb=(t,o,n,s,i,c)=>{const d=t.dom;return nk(n,s,d.getRoot()).bind(u=>{const p=b1(d,i,n,s);for(let f=0;f<o.length;f++){const b=o[f];if(!nt(p,b.end))continue;const x=o.slice();x.splice(f,1);const C=x1(t,i,{pattern:b,remainingPatterns:x,position:u},c);if(C.isNone()&&s>0)return Hb(t,o,n,s-1,i,c);if(C.isSome())return C}return H.none()})},dR=(t,o,n)=>{t.selection.setRng(n),"inline-format"===o.type?Ee(o.format,s=>{t.formatter.apply(s)}):t.execCommand(o.cmd,!1,o.value)},w1=(t,o,n,s,i,c)=>{var d;return((u,p)=>{const f=cr(u,b=>Wo(p,x=>b.pattern.start===x.pattern.start&&b.pattern.end===x.pattern.end));return u.length===p.length?f?u:p:u.length>p.length?u:p})(Hb(t,i.inlinePatterns,n,s,o,c).fold(()=>[],u=>u.matches),Hb(t,(d=i.inlinePatterns,Rn(d,(u,p)=>p.end.length-u.end.length)),n,s,o,c).fold(()=>[],u=>u.matches))},uR=(t,o)=>{if(0===o.length)return;const n=t.dom,s=t.selection.getBookmark(),i=((c,d)=>{const u=dp("mce_textpattern"),p=Qs(d,(f,b)=>{const x=lR(c,u+`_end${f.length}`,b.endRng);return f.concat([{...b,endMarker:x}])},[]);return Qs(p,(f,b)=>{const x=p.length-f.length-1,C=Bx(b.pattern)?b.endMarker:lR(c,u+`_start${x}`,b.startRng);return f.concat([{...b,startMarker:C}])},[])})(n,o);Ee(i,c=>{const d=n.getParent(c.startMarker.start,n.isBlock),u=p=>p===d;Bx(c.pattern)?((p,f,b,x)=>{const C=Dx(p.dom,b);Dg(p.dom,C,x),dR(p,f,C)})(t,c.pattern,c.endMarker,u):((p,f,b,x,C)=>{const O=p.dom,S=Dx(O,x),R=Dx(O,b);Dg(O,R,C),Dg(O,S,C);const D=Dx(O,{prefix:b.prefix,start:b.end,end:x.start});dR(p,f,D)})(t,c.pattern,c.startMarker,c.endMarker,u),y1(n,c.endMarker,u),y1(n,c.startMarker,u)}),t.selection.moveToBookmark(s)},aa=(t,o,n)=>{for(let s=0;s<t.length;s++)if(n(t[s],o))return!0;return!1},_1=Sn.DOM,GB=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,C1=t=>zr(t,o=>!1===et(o)),Vb=t=>{const o=t.options.get,n=t.editorUpload.blobCache;return C1({allow_conditional_comments:o("allow_conditional_comments"),allow_html_data_urls:o("allow_html_data_urls"),allow_svg_data_urls:o("allow_svg_data_urls"),allow_html_in_named_anchor:o("allow_html_in_named_anchor"),allow_script_urls:o("allow_script_urls"),allow_unsafe_link_target:o("allow_unsafe_link_target"),convert_unsafe_embeds:o("convert_unsafe_embeds"),convert_fonts_to_spans:o("convert_fonts_to_spans"),fix_list_elements:o("fix_list_elements"),font_size_legacy_values:o("font_size_legacy_values"),forced_root_block:o("forced_root_block"),forced_root_block_attrs:o("forced_root_block_attrs"),preserve_cdata:o("preserve_cdata"),inline_styles:o("inline_styles"),root_name:GB(t),sandbox_iframes:o("sandbox_iframes"),sanitize:o("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},mR=t=>{const o=t.options.get;return C1({custom_elements:o("custom_elements"),extended_valid_elements:o("extended_valid_elements"),invalid_elements:o("invalid_elements"),invalid_styles:o("invalid_styles"),schema:o("schema"),valid_children:o("valid_children"),valid_classes:o("valid_classes"),valid_elements:o("valid_elements"),valid_styles:o("valid_styles"),verify_html:o("verify_html"),padd_empty_block_inline_children:o("format_empty_lines")})},Ub=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Mx=t=>{const o=Ub(t),n=qw(t),s=t.contentCSS,i=()=>{o.unloadAll(s),t.inline||t.ui.styleSheetLoader.unloadAll(n)},c=()=>{t.removed?i():t.on("remove",i)};if(t.contentStyles.length>0){let p="";$e.each(t.contentStyles,f=>{p+=f+"\r\n"}),t.dom.addStyle(p)}const d=Promise.all(((p,f,b)=>{const{pass:x,fail:C}=Rt(f,R=>tinymce.Resource.has(tb(R))),S=[...x.map(R=>{const T=tinymce.Resource.get(tb(R));return _t(T)?Promise.resolve(Ub(p).loadRawCss(R,T)):Promise.resolve()}),Ub(p).loadAll(C)];return p.inline?S:S.concat([p.ui.styleSheetLoader.loadAll(b)])})(t,s,n)).then(c).catch(c),u=Ww(t);return u&&((p,f)=>{const b=re(p.getBody()),x=xu(hl(b)),C=nr("style");ln(C,"type","text/css"),I(C,Ba(f)),I(x,C),p.on("remove",()=>{le(C)})})(t,u),d},S1=t=>{var o;!0!==t.removed&&(Bc(o=t)||o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),(o=>{o.bindPendingEventDelegates(),o.initialized=!0,o.dispatch("Init"),o.focus(!0),(s=>{const i=s.dom.getRoot();s.inline||fn(s)&&s.selection.getStart(!0)!==i||js(i).each(c=>{const d=c.getNode(),u=yo(d)?js(d).getOr(c):c;s.selection.setRng(u.toRange())})})(o),o.nodeChanged({initial:!0});const n=Bv(o);ut(n)&&n.call(o,o),(s=>{const i=LE(s);i&&kl.setEditorTimeout(s,()=>{let c;c=!0===i?s:s.editorManager.get(i),c&&!c.destroyed&&(c.focus(),c.selection.scrollIntoView())},100)})(o)})(t))},gR=t=>{const o=t.getElement();let n=t.getDoc();t.inline&&(_1.addClass(o,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=o,t.contentAreaContainer=o);const s=t.getBody();var d,u;s.disabled=!0,t.readonly=Yw(t),t._editableRoot=BE(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===_1.getStyle(s,"position",!0)&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,t.editorUpload=(t=>{const o=(()=>{let R=[];const T=F=>{if(!F.blob||!F.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const q=F.id||"blobid"+sB+++(()=>{const me=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+me()+me()+me()})(),$=F.name||q,ne=F.blob;var ce;return{id:Ve(q),name:Ve($),filename:Ve(F.filename||$+"."+(ce=ne.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[ce.toLowerCase()]||"dat")),blob:Ve(ne),base64:Ve(F.base64),blobUri:Ve(F.blobUri||URL.createObjectURL(ne)),uri:Ve(F.uri)}},D=F=>yn(R,F).getOrUndefined(),P=F=>D(q=>q.id()===F);return{create:(F,q,$,ne,ce)=>{if(_t(F))return T({id:F,name:ne,filename:ce,blob:q,base64:$});if(vt(F))return T(F);throw new Error("Unknown input type")},add:F=>{P(F.id())||R.push(F)},get:P,getByUri:F=>D(q=>q.blobUri()===F),getByData:(F,q)=>D($=>$.base64()===F&&$.blob().type===q),findFirst:D,removeByUri:F=>{R=ft(R,q=>q.blobUri()!==F||(URL.revokeObjectURL(q.blobUri()),!1))},destroy:()=>{Ee(R,F=>{URL.revokeObjectURL(F.blobUri())}),R=[]}}})();let n,s;const i=dS(),c=[],d=R=>T=>t.selection?R(T):[],u=(R,T,D)=>{let P=0;do{P=R.indexOf(T,P),-1!==P&&(R=R.substring(0,P)+D+R.substr(P+T.length),P+=D.length-T.length+1)}while(-1!==P);return R},p=(R,T,D)=>(R=u(R,`src="${T}"`,`src="${D}"${D===Ht.transparentSrc?' data-mce-placeholder="1"':""}`),u(R,'data-mce-src="'+T+'"','data-mce-src="'+D+'"')),f=(R,T)=>{Ee(t.undoManager.data,D=>{"fragmented"===D.type?D.fragments=qt(D.fragments,P=>p(P,R,T)):D.content=p(D.content,R,T)})},b=()=>(n||(n=mS(t,i)),O().then(d(R=>{const T=qt(R,D=>D.blobInfo);return n.upload(T,uS(t)).then(d(D=>{const P=[];let F=!1;const q=qt(D,($,ne)=>{const{blobInfo:ce,image:me}=R[ne];let pe=!1;return $.status&&Uw(t)?($.url&&!Xe(me.src,$.url)&&(F=!0),o.removeByUri(me.src),Bc(t)||((we,se)=>{const de=t.convertURL(se,"src");var ye;f(we.src,se),jr(re(we),{src:Vw(t)?(ye=se,ye+(-1===ye.indexOf("?")?"?":"&")+(new Date).getTime()):se,"data-mce-src":de})})(me,$.url)):$.error&&($.error.remove&&(f(me.src,Ht.transparentSrc),P.push(me),pe=!0),w0(t,Va.translate(["Failed to upload image: {0}",$.error.message]))),{element:me,status:$.status,uploadUri:$.url,blobInfo:ce,removed:pe}});return P.length>0&&!Bc(t)?t.undoManager.transact(()=>{Ee(Pe(P),$=>{const ne=Ma($);var ce;le($),ne.each((ce=t,me=>{var pe,we;(pe=ce).dom.isEmpty((we=me).dom)&&ee(pe.schema.getTextBlockElements()[Po(we)])&&I(me,Vi('<br data-mce-bogus="1" />'))})),o.removeByUri($.dom.src)})}):F&&t.undoManager.dispatchChange(),q}))}))),x=()=>Hw(t)?b():Promise.resolve([]),C=R=>cr(c,T=>T(R)),O=()=>(s||(s=((t,o)=>{const n={};return{findAll:(s,i=Vo)=>{const c=ft((u=s)?dr(u.getElementsByTagName("img")):[],u=>{const p=u.src;return!u.hasAttribute("data-mce-bogus")&&!u.hasAttribute("data-mce-placeholder")&&!(!p||p===Ht.transparentSrc)&&(tt(p,"blob:")?!t.isUploaded(p)&&i(u):!!tt(p,"data:")&&i(u))}),d=qt(c,u=>{const p=u.src;if(Gt(n,p))return n[p].then(f=>_t(f)?f:{image:u,blobInfo:f.blobInfo});{const f=((b,x)=>{const C=()=>Promise.reject("Invalid data URI");if(tt(x,"blob:")){const R=b.getByUri(x);return ee(R)?Promise.resolve(R):(O=x,tt(O,"blob:")?(T=O,fetch(T).then(D=>D.ok?D.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${T} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):tt(O,"data:")?(S=O,new Promise((T,D)=>{PC(S).bind(({type:P,data:F,base64Encoded:q})=>jf(P,F,q)).fold(()=>D("Invalid data URI"),T)})):Promise.reject("Unknown URI format")).then(T=>LC(T).then(D=>zC(D,!1,P=>H.some(Jy(b,T,P))).getOrThunk(C)))}var T,O,S;return tt(x,"data:")?HC(b,x).fold(C,R=>Promise.resolve(R)):Promise.reject("Unknown image data format")})(o,p).then(b=>(delete n[p],{image:u,blobInfo:b})).catch(b=>(delete n[p],b));return n[p]=f,f}});var u;return Promise.all(d)}}})(i,o)),s.findAll(t.getBody(),C).then(d(R=>{const T=ft(R,D=>_t(D)?(w0(t,D),!1):"blob"!==D.uriType);return Bc(t)||Ee(T,D=>{f(D.image.src,D.blobInfo.blobUri()),D.image.src=D.blobInfo.blobUri(),D.image.removeAttribute("data-mce-src")}),T}))),S=R=>R.replace(/src="(blob:[^"]+)"/g,(T,D)=>{const P=i.getResultUri(D);if(P)return'src="'+P+'"';let F=o.getByUri(D);return F||(F=Nn(t.editorManager.get(),(q,$)=>q||$.editorUpload&&$.editorUpload.blobCache.getByUri(D),void 0)),F?'src="data:'+F.blob().type+";base64,"+F.base64()+'"':T});return t.on("SetContent",()=>{Hw(t)?x():O()}),t.on("RawSaveContent",R=>{R.content=S(R.content)}),t.on("GetContent",R=>{R.source_view||"raw"===R.format||"tree"===R.format||(R.content=S(R.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",R=>{Ee(R,T=>{const D=T.attr("src");if(!D||o.getByUri(D))return;const P=i.getResultUri(D);P&&T.attr("src",P)})})}),{blobCache:o,addFilter:R=>{c.push(R)},uploadImages:b,uploadImagesAuto:x,scanForImages:O,destroy:()=>{o.destroy(),i.destroy(),s=n=null}}})(t),t.schema=Au(mR(t)),t.dom=Sn(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Ev(t),referrerPolicy:$w(t),onSetAttrib:d=>{t.dispatch("SetAttrib",d)},force_hex_color:fD(t)}),t.parser=(d=>{const u=Wp(Vb(d),d.schema);return u.addAttributeFilter("src,href,style,tabindex",(p,f)=>{const b=d.dom,x="data-mce-"+f;let C=p.length;for(;C--;){const O=p[C];let S=O.attr(f);if(S&&!O.attr(x)){if(0===S.indexOf("data:")||0===S.indexOf("blob:"))continue;"style"===f?(S=b.serializeStyle(b.parseStyle(S),O.name),S.length||(S=null),O.attr(x,S),O.attr(f,S)):"tabindex"===f?(O.attr(x,S),O.attr(f,null)):O.attr(x,d.convertURL(S,f,O.name))}}}),u.addNodeFilter("script",p=>{let f=p.length;for(;f--;){const b=p[f],x=b.attr("type")||"no/type";0!==x.indexOf("mce-")&&b.attr("type","mce-"+x)}}),KE(d)&&u.addNodeFilter("#cdata",p=>{var f;let b=p.length;for(;b--;){const x=p[b];x.type=8,x.name="#comment",x.value="[CDATA["+d.dom.encode(null!==(f=x.value)&&void 0!==f?f:"")+"]]"}}),u.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",p=>{let f=p.length;const b=d.schema.getNonEmptyElements();for(;f--;){const x=p[f];x.isEmpty(b)&&0===x.getAll("br").length&&x.append(new pt("br",1))}}),u})(t),t.serializer=oA((d=>{const u=d.options.get;return{...Vb(d),...mR(d),...C1({remove_trailing_brs:u("remove_trailing_brs"),pad_empty_with_br:u("pad_empty_with_br"),url_converter:u("url_converter"),url_converter_scope:u("url_converter_scope"),element_format:u("element_format"),entities:u("entities"),entity_encoding:u("entity_encoding"),indent:u("indent"),indent_after:u("indent_after"),indent_before:u("indent_before")})}})(t),t),t.selection=aS(t.dom,t.getWin(),t.serializer,t),t.annotator=sd(t),t.formatter=gA(t),t.undoManager=bS(t),t._nodeChangeDispatcher=new Db(t),t._selectionOverrides=jB(t),(d=>{const u=ai(),p=Zo(!1),f=yv(b=>{d.dispatch("longpress",{...b,type:"longpress"}),p.set(!0)},400);d.on("touchstart",b=>{jS(b).each(x=>{f.cancel();const C={x:x.clientX,y:x.clientY,target:b.target};f.throttle(b),p.set(!1),u.set(C)})},!0),d.on("touchmove",b=>{f.cancel(),jS(b).each(x=>{u.on(C=>{((O,S)=>{const R=Math.abs(O.clientX-S.x),T=Math.abs(O.clientY-S.y);return R>5||T>5})(x,C)&&(u.clear(),p.set(!1),d.dispatch("longpresscancel"))})})},!0),d.on("touchend touchcancel",b=>{f.cancel(),"touchcancel"!==b.type&&u.get().filter(x=>x.target.isEqualNode(b.target)).each(()=>{p.get()?b.preventDefault():d.dispatch("tap",{...b,type:"tap"})})},!0)})(t),(u=d=t).on("click",p=>{u.dom.getParent(p.target,"details")&&p.preventDefault()}),(u=>{u.parser.addNodeFilter("details",p=>{const f=QE(u);Ee(p,b=>{"expanded"===f?b.attr("open","open"):"collapsed"===f&&b.attr("open",null)})}),u.serializer.addNodeFilter("details",p=>{const f=ZE(u);Ee(p,b=>{"expanded"===f?b.attr("open","open"):"collapsed"===f&&b.attr("open",null)})})})(d),(d=>{const u="contenteditable",p=" "+$e.trim(qE(d))+" ",f=" "+$e.trim(jh(d))+" ",b=Dl(p),x=Dl(f),C=GE(d);C.length>0&&d.on("BeforeSetContent",O=>{((S,R,T)=>{let D=R.length,P=T.content;if("raw"!==T.format){for(;D--;)P=P.replace(R[D],V0(S,P,jh(S)));T.content=P}})(d,C,O)}),d.parser.addAttributeFilter("class",O=>{let S=O.length;for(;S--;){const R=O[S];b(R)?R.attr(u,"true"):x(R)&&R.attr(u,"false")}}),d.serializer.addAttributeFilter(u,O=>{let S=O.length;for(;S--;){const R=O[S];(b(R)||x(R))&&(C.length>0&&R.attr("data-mce-content")?(R.name="#text",R.type=3,R.raw=!0,R.value=R.attr("data-mce-content")):R.attr(u,null))}})})(t),Bc(t)||((d=>{d.on("mousedown",u=>{u.detail>=3&&(u.preventDefault(),(t=>{const o=((n,s,i)=>{const c=Oe.fromRangeStart(n).getNode(),d=(x=s,C=i,hr(re(c),O=>on(O.dom)||C.isBlock(Po(O)),nc(x)).getOr(re(x)).dom),u=tR(c,d,!1),p=tR(c,d,!0),f=document.createRange();var x,C;return eR(u,d).fold(()=>{Ag(u)?f.setStart(u,0):f.setStartBefore(u)},b=>f.setStartBefore(b.dom)),eR(p,d).fold(()=>{Ag(p)?f.setEnd(p,p.data.length):f.setEndAfter(p)},b=>f.setEndAfter(b.dom)),f})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(Dy(o))})(d))})})(t),(d=>{(u=>{const p=[",",".",";",":","!","?"],f=[32],b=()=>{return O=WE(u),S=hD(u),{inlinePatterns:kv(O),blockPatterns:Sv(O),dynamicPatternsLookup:S};var O,S},x=()=>u.options.isSet("text_patterns_lookup");u.on("keydown",O=>{if(13===O.keyCode&&!gt.modifierPressed(O)&&u.selection.isCollapsed()){const S=b();(S.inlinePatterns.length>0||S.blockPatterns.length>0||x())&&((t,o)=>{const n=t.selection.getRng();return zb(t,n).map(s=>{var i;const c=Math.max(0,n.startOffset),d=f1(o,s,null!==(i=s.textContent)&&void 0!==i?i:""),u=w1(t,s,n.startContainer,c,d,!0),p=((f,b,x,C)=>{var O;const S=f.dom,R=Rs(f);if(!S.is(b,R))return[];const T=null!==(O=b.textContent)&&void 0!==O?O:"";return((D,P)=>{const F=Rn(D,(ne,ce)=>ce.start.length-ne.start.length),q=P.replace(Vn," ");return yn(F,$=>0===P.indexOf($.start)||0===q.indexOf($.start))})(x.blockPatterns,T).map(D=>$e.trim(T).length===D.start.length?[]:[{pattern:D,range:Fb(S,S.getRoot(),b,0,b,0,!0)}]).getOr([])})(t,s,d);return(p.length>0||u.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(Er,{preserve_zwsp:!0}),uR(t,u),((x,C)=>{if(0===C.length)return;const O=x.selection.getBookmark();Ee(C,S=>((R,T)=>{const P=T.pattern,F=h1(R.dom.getRoot(),T.range).getOrDie("Unable to resolve path range");return zb(R,F).each(q=>{"block-format"===P.type?(($,ne)=>{const ce=ne.get($);return qo(ce)&&gn(ce).exists(me=>Gt(me,"block"))})(P.format,R.formatter)&&R.undoManager.transact(()=>{v1(R.dom,q,P),R.formatter.apply(P.format)}):"block-command"===P.type&&R.undoManager.transact(()=>{v1(R.dom,q,P),R.execCommand(P.cmd,!1,P.value)})}),!0})(x,S)),x.selection.moveToBookmark(O)})(t,p);const f=t.selection.getRng(),b=nk(f.startContainer,f.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),b.each(x=>{const C=x.container;"\ufeff"===C.data.charAt(x.offset-1)&&(C.deleteData(x.offset-1,1),Rg(t.dom,C.parentNode,O=>O===t.dom.getRoot()))})}),!0)}).getOr(!1)})(u,S)&&O.preventDefault()}},!0);const C=()=>{if(u.selection.isCollapsed()){const O=b();(O.inlinePatterns.length>0||x())&&((S,R)=>{const T=S.selection.getRng();zb(S,T).map(D=>{const P=Math.max(0,T.startOffset-1),F=b1(S.dom,D,T.startContainer,P),q=f1(R,D,F),$=w1(S,D,T.startContainer,P,q,!1);$.length>0&&S.undoManager.transact(()=>{uR(S,$)})})})(u,O)}};u.on("keyup",O=>{aa(f,O,(S,R)=>S===R.keyCode&&!gt.modifierPressed(R))&&C()}),u.on("keypress",O=>{aa(p,O,(S,R)=>S.charCodeAt(0)===R.charCode)&&kl.setEditorTimeout(u,C)})})(d)})(t));const i=Rb(t);((t,o)=>{t.addCommand("delete",()=>{var n;z0(n=t,o,!1).fold(()=>{n.selection.isEditable()&&(Ef(n),xy(n))},Ze)}),t.addCommand("forwardDelete",()=>{var n;z0(n=t,o,!0).fold(()=>{n.selection.isEditable()&&fO(n,"ForwardDelete")},Ze)})})(t,i),(d=>{d.on("NodeChange",it(qS,d))})(t),(d=>{var u;const p=d.dom,f=Rs(d),b=null!==(u=NE(d))&&void 0!==u?u:"",x=(C,O)=>{if((T=>{if(fA(T)){const D=T.keyCode;return!vS(T)&&(gt.metaKeyPressed(T)||T.altKey||D>=112&&D<=123||st(pA,D))}return!1})(C))return;const S=d.getBody(),R=!(fA(T=C)&&!(vS(T)||"keyup"===T.type&&229===T.keyCode))&&((T,D,P)=>{if(br(re(D),!1)){const F=D.firstElementChild;return!F||!T.getStyle(D.firstElementChild,"padding-left")&&!T.getStyle(D.firstElementChild,"padding-right")&&P===F.nodeName.toLowerCase()}return!1})(p,S,f);var T;(""!==p.getAttrib(S,hA)!==R||O)&&(p.setAttrib(S,hA,R?b:null),p.setAttrib(S,"aria-placeholder",R?b:null),((T,D)=>{T.dispatch("PlaceholderToggle",{state:D})})(d,R),d.on(R?"keydown":"keyup",x),d.off(R?"keyup":"keydown",x))};To(b)&&d.on("init",C=>{x(C,!0),d.on("change SetContent ExecCommand",x),d.on("paste",O=>kl.setEditorTimeout(d,()=>x(O)))})})(t),(t=>{const o=Zo(!1),n=Zo(Mv(t)?"text":"html"),s=(i=>{const c=Zo(null);return{create:()=>((d,u)=>{const{dom:p,selection:f}=d,b=d.getBody();u.set(f.getRng());const x=p.add(d.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Yk);Ht.browser.isFirefox()&&p.setStyle(x,"left","rtl"===p.getStyle(b,"direction",!0)?65535:-65535),p.bind(x,"beforedeactivate focusin focusout",C=>{C.stopPropagation()}),x.focus(),f.select(x,!0)})(i,c),remove:()=>((d,u)=>{const p=d.dom;if(Cx(d)){let f;const b=u.get();for(;f=Cx(d);)p.remove(f),p.unbind(f);b&&d.selection.setRng(b)}u.set(null)})(i,c),getEl:()=>Cx(i),getHtml:()=>(d=>{const u=d.dom,p=(C,O)=>{C.appendChild(O),u.remove(O,!0)},[f,...b]=ft(d.getBody().childNodes,BB);Ee(b,C=>{p(f,C)});const x=u.select("div[id=mcepastebin]",f);for(let C=x.length-1;C>=0;C--){const O=u.create("div");f.insertBefore(O,x[C]),p(O,x[C])}return f?f.innerHTML:""})(i),getLastRng:c.get}})(t);var i,c,d;i=t,(Ht.browser.isChromium()||Ht.browser.isSafari())&&(d=LB,(c=i).on("PastePreProcess",u=>{u.content=d(c,u.content,u.internal)})),((i,c)=>{i.addCommand("mceTogglePlainTextPaste",()=>{((d,u)=>{"text"===u.get()?(u.set("html"),xT(d,!1)):(u.set("text"),xT(d,!0)),d.focus()})(i,c)}),i.addCommand("mceInsertClipboardContent",(d,u)=>{u.html&&kx(i,u.html,u.internal,!1),u.text&&Zk(i,u.text,!1)})})(t,n),(i=>{const c=p=>f=>{p(i,f)},d=HE(i);ut(d)&&i.on("PastePreProcess",c(d));const u=VE(i);ut(u)&&i.on("PastePostProcess",c(u))})(t),t.on("PreInit",()=>{(i=>{i.on("cut",(c=>d=>{!d.isDefaultPrevented()&&r1(c)&&c.selection.isEditable()&&n1(d,Ex(c),XN(c),()=>{if(Ht.browser.isChromium()||Ht.browser.isFirefox()){const u=c.selection.getRng();kl.setEditorTimeout(c,()=>{c.selection.setRng(u),c.execCommand("Delete")},0)}else c.execCommand("Delete")})})(i)),i.on("copy",(c=>d=>{!d.isDefaultPrevented()&&r1(c)&&n1(d,Ex(c),XN(c),Kt)})(i))})(t),((i,c)=>{Vh(i)&&i.on("dragend dragover draggesture dragdrop drop drag",d=>{d.preventDefault(),d.stopPropagation()}),Uh(i)||i.on("drop",d=>{const u=d.dataTransfer;u&&Wo(u.files,f=>/^image\//.test(f.type))&&d.preventDefault()}),i.on("drop",d=>{if(d.isDefaultPrevented())return;const u=JN(i,d);if(An(u))return;const p=Ib(d.dataTransfer),f=ou(p,Mb());if((!e1(p)||(S=>{const R=S["text/plain"];return!!R&&0===R.indexOf("file://")})(p))&&t1(i,d,u))return;const b=p[Mb()],x=b||p["text/html"]||p["text/plain"],C=((S,R,T,D)=>{const P=S.getParent(T,F=>Eu(R,F));if(!vn(S.getParent(T,"summary")))return!0;if(P&&Gt(D,"text/html")){const F=(new DOMParser).parseFromString(D["text/html"],"text/html").body;return!vn(F.querySelector(P.nodeName.toLowerCase()))}return!1})(i.dom,i.schema,u.startContainer,p),O=c.get();O&&!C||x&&(d.preventDefault(),kl.setEditorTimeout(i,()=>{i.undoManager.transact(()=>{(b||O&&C)&&i.execCommand("Delete"),ds(i,u);const S=qN(x);p["text/html"]?kx(i,S,f,!0):Zk(i,S,!0)})}))}),i.on("dragstart",d=>{c.set(!0)}),i.on("dragover dragend",d=>{Uh(i)&&!c.get()&&(d.preventDefault(),ds(i,JN(i,d))),"dragend"===d.type&&c.set(!1)}),(d=>{d.on("input",u=>{const p=f=>vn(f.querySelector("summary"));if("deleteByDrag"===u.inputType){const f=ft(d.dom.select("details"),p);Ee(f,b=>{Ft(b.firstChild)&&b.firstChild.remove();const x=d.dom.create("summary");x.appendChild(xa().dom),b.prepend(x)})}})})(i)})(t,o),((t,o,n)=>{((s,i,c)=>{let d;s.on("keydown",u=>{var p;(gt.metaKeyPressed(p=u)&&86===p.keyCode||p.shiftKey&&45===p.keyCode)&&!u.isDefaultPrevented()&&(d=u.shiftKey&&86===u.keyCode)}),s.on("paste",u=>{if(u.isDefaultPrevented()||(b=u,Ht.os.isAndroid()&&0===(null===(C=null===(x=b.clipboardData)||void 0===x?void 0:x.items)||void 0===C?void 0:C.length)))return;var b,x,C;const p="text"===c.get()||d;d=!1;const f=Ib(u.clipboardData);!e1(f)&&t1(s,u,i.getLastRng()||s.selection.getRng())||(ou(f,"text/html")?(u.preventDefault(),o1(s,f,f["text/html"],p,!0)):ou(f,"text/plain")&&ou(f,"text/uri-list")?(u.preventDefault(),o1(s,f,f["text/plain"],p,!0)):(i.create(),kl.setEditorTimeout(s,()=>{const b=i.getHtml();i.remove(),o1(s,f,b,p,!1)},0)))})})(t,o,n),(s=>{const i=d=>tt(d,"webkit-fake-url"),c=d=>tt(d,"data:");s.parser.addNodeFilter("img",(d,u,p)=>{if(!Uh(s)&&!0===(null===(b=p.data)||void 0===b?void 0:b.paste))for(const f of d){const b=f.attr("src");_t(b)&&!f.attr("data-mce-object")&&b!==Ht.transparentSrc&&(i(b)||!Qw(s)&&c(b))&&f.remove()}var b})})(t)})(t,s,n)})})(t);const c=(d=>{const u=d;return(p=d,Xo(p.plugins,"rtc").bind(f=>H.from(f.setup))).fold(()=>(u.rtcInstance=oS(d),H.none()),p=>(u.rtcInstance=(()=>{const f=Ve(null),b=Ve("");return{init:{bindEvents:Kt},undoManager:{beforeChange:Kt,add:f,undo:f,redo:f,clear:Kt,reset:Kt,hasUndo:wo,hasRedo:wo,transact:f,ignore:Kt,extra:Kt},formatter:{match:wo,matchAll:Ve([]),matchNode:Ve(void 0),canApply:wo,closest:b,apply:Kt,remove:Kt,toggle:Kt,formatChanged:Ve({unbind:Kt})},editor:{getContent:b,setContent:Ve({content:"",html:""}),insertContent:Ve(""),addVisual:Kt},selection:{getContent:b},autocompleter:{addDecoration:Kt,removeDecoration:Kt},raw:{getModel:Ve(H.none())}}})(),H.some(()=>p().then(f=>(u.rtcInstance=(b=>{const x=F=>vt(F)?F:{},{init:C,undoManager:O,formatter:S,editor:R,selection:T,autocompleter:D,raw:P}=b;return{init:{bindEvents:C.bindEvents},undoManager:{beforeChange:O.beforeChange,add:O.add,undo:O.undo,redo:O.redo,clear:O.clear,reset:O.reset,hasUndo:O.hasUndo,hasRedo:O.hasRedo,transact:(F,q,$)=>O.transact($),ignore:(F,q)=>O.ignore(q),extra:(F,q,$,ne)=>O.extra($,ne)},formatter:{match:(F,q,$,ne)=>S.match(F,x(q),ne),matchAll:S.matchAll,matchNode:S.matchNode,canApply:F=>S.canApply(F),closest:F=>S.closest(F),apply:(F,q,$)=>S.apply(F,x(q)),remove:(F,q,$,ne)=>S.remove(F,x(q)),toggle:(F,q,$)=>S.toggle(F,x(q)),formatChanged:(F,q,$,ne,ce)=>S.formatChanged(q,$,ne,ce)},editor:{getContent:F=>R.getContent(F),setContent:(F,q)=>({content:R.setContent(F,q),html:""}),insertContent:(F,q)=>(R.insertContent(F),""),addVisual:R.addVisual},selection:{getContent:(F,q)=>T.getContent(q)},autocompleter:{addDecoration:D.addDecoration,removeDecoration:D.removeDecoration},raw:{getModel:()=>H.some(P.getRawModel())}}})(f),f.rtc.isRemote)))));var p})(t);(d=>{const u=d.getDoc(),p=d.getBody();d.dispatch("PreInit"),FE(d)||(u.body.spellcheck=!1,_1.setAttrib(p,"spellcheck","false")),d.quirks=(t=>{const o=$e.each,n=gt.BACKSPACE,s=gt.DELETE,i=t.dom,c=t.selection,d=t.parser,u=Ht.browser,p=u.isFirefox(),f=u.isChromium()||u.isSafari(),b=Ht.deviceType.isiPhone()||Ht.deviceType.isiPad(),x=Ht.os.isMacOS()||Ht.os.isiOS(),C=(se,de)=>{try{t.getDoc().execCommand(se,!1,String(de))}catch{}},O=se=>se.isDefaultPrevented(),S=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},R=()=>{t.inline||i.bind(t.getDoc(),"mousedown mouseup",se=>{let de;if(se.target===t.getDoc().documentElement)if(de=c.getRng(),t.getBody().focus(),"mousedown"===se.type){if(Mn(de.startContainer))return;c.placeCaretAt(se.clientX,se.clientY)}else c.setRng(de)})},T=()=>{Range.prototype.getClientRects||t.on("mousedown",se=>{if(!O(se)&&"HTML"===se.target.nodeName){const de=t.getBody();de.blur(),kl.setEditorTimeout(t,()=>{de.focus()})}})},D=()=>{const se=Dv(t);t.on("click",de=>{const ye=de.target;/^(IMG|HR)$/.test(ye.nodeName)&&i.isEditable(ye)&&(de.preventDefault(),t.selection.select(ye),t.nodeChanged()),"A"===ye.nodeName&&i.hasClass(ye,se)&&0===ye.childNodes.length&&i.isEditable(ye.parentNode)&&(de.preventDefault(),c.select(ye))})},P=()=>{t.on("keydown",se=>{if(!O(se)&&se.keyCode===n&&c.isCollapsed()&&0===c.getRng().startOffset){const de=c.getNode().previousSibling;if(de&&de.nodeName&&"table"===de.nodeName.toLowerCase())return se.preventDefault(),!1}return!0})},F=()=>{Yw(t)||t.on("BeforeExecCommand mousedown",()=>{C("StyleWithCSS",!1),C("enableInlineTableEditing",!1),OE(t)||C("enableObjectResizing",!1)})},q=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},$=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},ne=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",se=>{let de;"HTML"===se.target.nodeName&&(de=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(de),t.selection.normalize(),t.nodeChanged())}))},ce=()=>{x&&t.on("keydown",se=>{!gt.metaKeyPressed(se)||se.shiftKey||37!==se.keyCode&&39!==se.keyCode||(se.preventDefault(),t.selection.getSel().modify("move",37===se.keyCode?"backward":"forward","lineboundary"))})},me=()=>{t.on("click",se=>{let de=se.target;do{if("A"===de.tagName)return void se.preventDefault()}while(de=de.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},pe=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",se=>{se.preventDefault()})})},we=Kt;return Bc(t)?(f&&(R(),D(),pe(),S(),b&&($(),ne(),me())),p&&(T(),F(),q(),ce())):(t.on("keydown",se=>{if(O(se)||se.keyCode!==gt.BACKSPACE)return;let de=c.getRng();const ye=de.startContainer,Le=de.startOffset,rt=i.getRoot();let Ye=ye;if(de.collapsed&&0===Le){for(;Ye.parentNode&&Ye.parentNode.firstChild===Ye&&Ye.parentNode!==rt;)Ye=Ye.parentNode;"BLOCKQUOTE"===Ye.nodeName&&(t.formatter.toggle("blockquote",void 0,Ye),de=i.createRng(),de.setStart(ye,0),de.setEnd(ye,0),c.setRng(de))}}),(()=>{const se=de=>{const ye=i.create("body"),Le=de.cloneContents();return ye.appendChild(Le),c.serializer.serialize(ye,{format:"html"})};t.on("keydown",de=>{const ye=de.keyCode;if(!O(de)&&(ye===s||ye===n)&&t.selection.isEditable()){const Le=t.selection.isCollapsed(),rt=t.getBody();if(Le&&!br(re(rt))||!Le&&!(Ye=>{const Mt=se(Ye),kt=i.createRng();return kt.selectNode(t.getBody()),Mt===se(kt)})(t.selection.getRng()))return;de.preventDefault(),t.setContent(""),rt.firstChild&&i.isBlock(rt.firstChild)?t.selection.setCursorLocation(rt.firstChild,0):t.selection.setCursorLocation(rt,0),t.nodeChanged()}})})(),Ht.windowsPhone||t.on("keyup focusin mouseup",se=>{gt.modifierPressed(se)||(de=>{const ye=de.getBody(),Le=de.selection.getRng();return Le.startContainer===Le.endContainer&&Le.startContainer===ye&&0===Le.startOffset&&Le.endOffset===ye.childNodes.length})(t)||c.normalize()},!0),f&&(R(),D(),t.on("init",()=>{C("DefaultParagraphSeparator",Rs(t))}),pe(),P(),d.addNodeFilter("br",se=>{let de=se.length;for(;de--;)"Apple-interchange-newline"===se[de].attr("class")&&se[de].remove()}),b?($(),ne(),me()):S()),p&&(t.on("keydown",se=>{if(!O(se)&&se.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&0===c.getRng().startOffset){const de=c.getNode(),ye=de.previousSibling;if("HR"===de.nodeName)return i.remove(de),void se.preventDefault();ye&&ye.nodeName&&"hr"===ye.nodeName.toLowerCase()&&(i.remove(ye),se.preventDefault())}}}),T(),(()=>{const se=()=>{const ye=i.getAttribs(c.getStart().cloneNode(!1));return()=>{const Le=c.getStart();Le!==t.getBody()&&(i.setAttrib(Le,"style",null),o(ye,rt=>{Le.setAttributeNode(rt.cloneNode(!0))}))}},de=()=>!c.isCollapsed()&&i.getParent(c.getStart(),i.isBlock)!==i.getParent(c.getEnd(),i.isBlock);t.on("keypress",ye=>{let Le;return!(!(O(ye)||8!==ye.keyCode&&46!==ye.keyCode)&&de()&&(Le=se(),t.getDoc().execCommand("delete",!1),Le(),ye.preventDefault(),1))}),i.bind(t.getDoc(),"cut",ye=>{if(!O(ye)&&de()){const Le=se();kl.setEditorTimeout(t,()=>{Le()})}})})(),F(),t.on("SetContent ExecCommand",se=>{"setcontent"!==se.type&&"mceInsertLink"!==se.command||o(i.select("a:not([data-mce-block])"),de=>{var ye;let Le=de.parentNode;const rt=i.getRoot();if(Le?.lastChild===de){for(;Le&&!i.isBlock(Le);){if((null===(ye=Le.parentNode)||void 0===ye?void 0:ye.lastChild)!==Le||Le===rt)return;Le=Le.parentNode}i.add(Le,"br",{"data-mce-bogus":1})}})}),q(),ce(),P(),t.on("drop",se=>{var de;const ye=null===(de=se.dataTransfer)||void 0===de?void 0:de.getData("text/html");_t(ye)&&/^<img[^>]*>$/.test(ye)&&t.dispatch("dragend",new window.DragEvent("dragend",se))}))),{refreshContentEditable:we,isHidden:()=>{if(!p||t.removed)return!1;const se=t.selection.getSel();return!se||!se.rangeCount||0===se.rangeCount}}})(d),d.dispatch("PostRender");const f=TE(d);void 0!==f&&(p.dir=f);const b=zE(d);b&&d.on("BeforeSetContent",x=>{$e.each(b,C=>{x.content=x.content.replace(C,O=>"\x3c!--mce:protected "+escape(O)+"--\x3e")})}),d.on("SetContent",()=>{d.addVisual(d.getBody())}),d.on("compositionstart compositionend",x=>{d.composing="compositionstart"===x.type})})(t),c.fold(()=>{const d=(u=>{let p=!1;const f=setTimeout(()=>{p||u.setProgressState(!0)},500);return()=>{clearTimeout(f),p=!0,u.setProgressState(!1)}})(t);Mx(t).then(()=>{S1(t),d()})},d=>{t.setProgressState(!0),Mx(t).then(()=>{d().then(u=>{t.setProgressState(!1),S1(t),nS(t)},u=>{t.notificationManager.open({type:"error",text:String(u)}),S1(t),nS(t)})})})},Lc=Vo,Ix=Sn.DOM,pR=Sn.DOM,Px=(t,o)=>({editorContainer:t,iframeContainer:o,api:{}}),k1=t=>{const o=t.getElement();return t.inline?Px(null):(n=>{const s=pR.create("div");return pR.insertAfter(s,n),Px(s,s)})(o)},Lx=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const s=$e.trim(CE(n)),i=n.ui.registry.getAll().icons,c={...ud.get("default").icons,...ud.get(s).icons};Yo(c,(d,u)=>{Gt(i,u)||n.ui.registry.addIcon(u,d)})})(t),(n=>{const s=fp(n);if(_t(s)){const i=gg.get(s);n.theme=i(n,gg.urls[s])||{},ut(n.theme.init)&&n.theme.init(n,gg.urls[s]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const s=Tc(n),i=ug.get(s);n.model=i(n,ug.urls[s])})(t),(n=>{const s=[];Ee(Rv(n),i=>{((c,d,u)=>{const p=mg.get(u),f=mg.urls[u]||c.documentBaseUrl.replace(/\/$/,"");if(u=$e.trim(u),p&&-1===$e.inArray(d,u)){if(c.plugins[u])return;try{const b=p(c,f)||{};c.plugins[u]=b,ut(b.init)&&(b.init(c,f),d.push(u))}catch(b){((x,C,O)=>{const S=Va.translate(["Failed to initialize plugin: {0}",C]);pi(x,"PluginLoadError",{message:S}),hg(S,O),w0(x,S)})(c,u,b)}}})(n,s,i.replace(/^\-/,""))})})(t);const o=await(n=>{const s=n.getElement();return n.orgDisplay=s.style.display,_t(fp(n))?(i=>{const c=i.theme.renderUI;return c?c():k1(i)})(n):ut(fp(n))?(i=>{const c=i.getElement(),d=fp(i)(i,c);return d.editorContainer.nodeType&&(d.editorContainer.id=d.editorContainer.id||i.id+"_parent"),d.iframeContainer&&d.iframeContainer.nodeType&&(d.iframeContainer.id=d.iframeContainer.id||i.id+"_iframecontainer"),d.height=d.iframeHeight?d.iframeHeight:c.offsetHeight,d})(n):k1(n)})(t);var n,s;((n,s)=>{const i={show:H.from(s.show).getOr(Kt),hide:H.from(s.hide).getOr(Kt),isEnabled:H.from(s.isEnabled).getOr(Vo),setEnabled:c=>{n.mode.isReadOnly()||H.from(s.setEnabled).each(d=>d(c))}};n.ui={...n.ui,...i}})(t,H.from(o.api).getOr({})),t.editorContainer=o.editorContainer,(n=t).contentCSS=n.contentCSS.concat(cS(s=n,$a(s)),(s=>cS(s,qw(s)))(n)),t.inline?gR(t):((n,s)=>{((i,c)=>{const d=i.translate("Rich Text Area"),u=Da(re(i.getElement()),"tabindex").bind(jn),p=((f,b,x,C)=>{const O=nr("iframe");return C.each(S=>ln(O,"tabindex",S)),jr(O,x),jr(O,{id:f+"_ifr",frameBorder:"0",allowTransparency:"true",title:b}),fs(O,"tox-edit-area__iframe"),O})(i.id,d,eD(i),u).dom;p.onload=()=>{p.onload=null,i.dispatch("load")},i.contentAreaContainer=c.iframeContainer,i.iframeElement=p,i.iframeHTML=(f=>{let b=xE(f)+"<html><head>";wE(f)!==f.documentBaseUrl&&(b+='<base href="'+f.documentBaseURI.getURI()+'" />'),b+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const x=Ri(f),C=tD(f),O=f.translate(Jw(f));return wl(f)&&(b+='<meta http-equiv="Content-Security-Policy" content="'+wl(f)+'" />'),b+=`</head><body id="${x}" class="mce-content-body ${C}" data-id="${f.id}" aria-label="${O}"><br></body></html>`,b})(i),Ix.add(c.iframeContainer,p)})(n,s),s.editorContainer&&(s.editorContainer.style.display=n.orgDisplay,n.hidden=Ix.isHidden(s.editorContainer)),n.getElement().style.display="none",Ix.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(i=>{const c=i.iframeElement,d=()=>{i.contentDocument=c.contentDocument,gR(i)};if(XE(i)||Ht.browser.isFirefox()){const p=i.getDoc();p.open(),p.write(i.iframeHTML),p.close(),d()}else{const p=((t,o,n,s)=>((i,c,d,u,p)=>{const f=(b=d,x=u,C=>{b(C)&&x((O=>{const S=re(wu(O).getOr(O.target)),R=()=>O.stopPropagation(),T=()=>O.preventDefault(),D=lr(T,R);return{target:S,x:O.clientX,y:O.clientY,stop:R,prevent:T,kill:D,raw:O}})(C))});var b,x;return i.dom.addEventListener(c,f,!1),{unbind:it(mt,i,c,f,!1)}})(t,"load",n,()=>{p.unbind(),d()}))(re(c),0,Lc);c.srcdoc=i.iframeHTML}})(n)})(t,{editorContainer:o.editorContainer,iframeContainer:o.iframeContainer})},fm=Sn.DOM,E1=t=>"-"===t.charAt(0),T1=(t,o,n)=>H.from(o).filter(s=>To(s)&&!ud.has(s)).map(s=>({url:`${t.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:H.some(s)})),hR=ti().deviceType,Fx=hR.isPhone(),YB=hR.isTablet(),jb=t=>{if(An(t))return[];{const o=qo(t)?t:t.split(/[ ,]/),n=qt(o,Zt);return ft(n,To)}},$b=(t,o)=>Gt(t.sections(),o),O1=(t,o)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Xo(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...o?{menubar:!1}:{}}),fR=(t,o)=>{var n;const s=null!==(n=o.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?$e.extend({},t.external_plugins,s):s},JB=(t,o)=>{const n=t.selection,s=t.dom;return/^ | $/.test(o)?((i,c,d,u)=>{const p=re(i.getRoot());return d=_f(p,Oe.fromRangeStart(c),u)?d.replace(/^ /,"&nbsp;"):d.replace(/^&nbsp;/," "),Cf(p,Oe.fromRangeEnd(c),u)?d.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):d.replace(/&nbsp;(<br( \/)?>)?$/," ")})(s,n.getRng(),o,t.schema):o},Bg=(t,o)=>{if(t.selection.isEditable()){const{content:n,details:s}=(i=>{if("string"!=typeof i){const c=$e.extend({paste:i.paste,data:{paste:i.paste}},i);return{content:i.content,details:c}}return{content:i,details:{}}})(o);a0(t,{...s,content:JB(t,n),format:"html",set:!1,selection:!0}).each(i=>{const c=(u=i.content,p=s,m0(t).editor.insertContent(u,p));var u,p;XC(t,c,i),t.addVisual()})}},bR={"font-size":"size","font-family":"face"},vR=ml("font"),A1=t=>(o,n)=>H.from(n).map(re).filter(Ts).bind(s=>{return(i=t,c=o,d=s.dom,Py(re(d),u=>{return Wi(p=u,i).orThunk(()=>vR(p)?Xo(bR,i).bind(f=>Da(p,f)):H.none());var p},u=>Qo(re(c),u))).or(((i,c)=>H.from(Sn.DOM.getStyle(c,i,!0)))(t,s.dom));var i,c,d}).getOr(""),QB=A1("font-size"),ZB=lr(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),A1("font-family")),yR=t=>js(t.getBody()).bind(o=>{const n=o.container();return H.from(Ae(n)?n.parentNode:n)}),Wb=(t,o)=>{return n=t,s=Fl(H.some,o),(i=n,H.from(i.selection.getRng()).bind(c=>{const d=i.getBody();return c.startContainer===d&&0===c.startOffset?H.none():H.from(i.selection.getStart(!0))})).orThunk(it(yR,n)).map(re).filter(Ts).bind(s);var n,s,i},Hx=(t,o)=>{if(/^[0-9.]+$/.test(o)){const n=parseInt(o,10);if(n>=1&&n<=7){const s=$e.explode(t.options.get("font_size_style_values")),i=$e.explode(t.options.get("font_size_classes"));return i.length>0?i[n-1]||o:s[n-1]||o}return o}return o},xR=t=>{const o=t.split(/\s*,\s*/);return qt(o,n=>-1===n.indexOf(" ")||tt(n,'"')||tt(n,"'")?n:`'${n}'`).join(",")},qb=(t,o)=>{const n=t.dom,s=t.selection.getRng(),i=o?t.selection.getStart():t.selection.getEnd(),c=o?s.startContainer:s.endContainer,d=Tb(n,c);if(!d||!d.isContentEditable)return;const u=o?kr:ri,p=Rs(t);((f,b,x,C)=>{const O=f.dom,S=T=>O.isBlock(T)&&T.parentElement===x,R=S(b)?b:O.getParent(C,S,x);return H.from(R).map(re)})(t,i,d,c).each(f=>{const b=EN(t,c,f.dom,d,!1,p);u(f,re(b)),t.selection.setCursorLocation(b,0),t.dispatch("NewBlock",{newBlock:b}),ih(t,"insertParagraph")})},_R=["toggleview"],CR=t=>st(_R,t.toLowerCase());class SR{constructor(o){this.commands={state:{},exec:{},value:{}},this.editor=o}execCommand(o,n=!1,s,i){const c=this.editor,d=o.toLowerCase(),u=i?.skip_focus;if(c.removed||("mcefocus"!==d&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)||u?ly(f=c).each(b=>f.selection.setRng(b)):c.focus()),c.dispatch("BeforeExecCommand",{command:o,ui:n,value:s}).isDefaultPrevented()))return!1;var f;const p=this.commands.exec[d];return!!ut(p)&&(p(d,n,s),c.dispatch("ExecCommand",{command:o,ui:n,value:s}),!0)}queryCommandState(o){if(!CR(o)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=o.toLowerCase(),s=this.commands.state[n];return!!ut(s)&&s(n)}queryCommandValue(o){if(!CR(o)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=o.toLowerCase(),s=this.commands.value[n];return ut(s)?s(n):""}addCommands(o,n="exec"){const s=this.commands;Yo(o,(i,c)=>{Ee(c.toLowerCase().split(","),d=>{s[n][d]=i})})}addCommand(o,n,s){const i=o.toLowerCase();this.commands.exec[i]=(c,d,u)=>n.call(s??this.editor,d,u)}queryCommandSupported(o){const n=o.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(o,n,s){this.commands.state[o.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(o,n,s){this.commands.value[o.toLowerCase()]=()=>n.call(s??this.editor)}}const nu="data-mce-contenteditable",Vx=(t,o,n)=>{try{t.getDoc().execCommand(o,!1,String(n))}catch{}},Gb=(t,o)=>{t.dom.contentEditable=o?"true":"false"},Mg=t=>t.readonly,kR=t=>{t.parser.addAttributeFilter("contenteditable",o=>{Mg(t)&&Ee(o,n=>{n.attr(nu,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(nu,o=>{Mg(t)&&Ee(o,n=>{n.attr("contenteditable",n.attr(nu))})}),t.serializer.addTempAttr(nu)},eM=["copy"],ER=$e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ux{static isNative(o){return!!ER[o.toLowerCase()]}constructor(o){this.bindings={},this.settings=o||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||wo}fire(o,n){return this.dispatch(o,n)}dispatch(o,n){const s=o.toLowerCase(),i=fv(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const c=this.bindings[s];if(c)for(let d=0,u=c.length;d<u;d++){const p=c[d];if(!p.removed){if(p.once&&this.off(s,p.func),i.isImmediatePropagationStopped())return i;if(!1===p.func.call(this.scope,i))return i.preventDefault(),i}}return i}on(o,n,s,i){if(!1===n&&(n=wo),n){const c={func:n,removed:!1};i&&$e.extend(c,i);const d=o.toLowerCase().split(" ");let u=d.length;for(;u--;){const p=d[u];let f=this.bindings[p];f||(f=[],this.toggleEvent(p,!0)),f=s?[c,...f]:[...f,c],this.bindings[p]=f}}return this}off(o,n){if(o){const s=o.toLowerCase().split(" ");let i=s.length;for(;i--;){const c=s[i];let d=this.bindings[c];if(!c)return Yo(this.bindings,(u,p)=>{this.toggleEvent(p,!1),delete this.bindings[p]}),this;if(d){if(n){const u=Rt(d,p=>p.func===n);d=u.fail,this.bindings[c]=d,Ee(u.pass,p=>{p.removed=!0})}else d.length=0;d.length||(this.toggleEvent(o,!1),delete this.bindings[c])}}}else Yo(this.bindings,(s,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(o,n,s){return this.on(o,n,s,{once:!0})}has(o){o=o.toLowerCase();const n=this.bindings[o];return!(!n||0===n.length)}}const Kb=t=>(t._eventDispatcher||(t._eventDispatcher=new Ux({scope:t,toggleEvent:(o,n)=>{Ux.isNative(o)&&t.toggleNativeEvent&&t.toggleNativeEvent(o,n)}})),t._eventDispatcher),N1={fire(t,o,n){return this.dispatch(t,o,n)},dispatch(t,o,n){const s=this;if(s.removed&&"remove"!==t&&"detach"!==t)return fv(t.toLowerCase(),o??{},s);const i=Kb(s).dispatch(t,o);if(!1!==n&&s.parent){let c=s.parent();for(;c&&!i.isPropagationStopped();)c.dispatch(t,i,!1),c=c.parent?c.parent():void 0}return i},on(t,o,n){return Kb(this).on(t,o,n)},off(t,o){return Kb(this).off(t,o)},once(t,o){return Kb(this).once(t,o)},hasEventListeners(t){return Kb(this).has(t)}},ru=Sn.DOM;let Ig;const jx=(t,o)=>{if("selectionchange"===o)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(o))return t.getDoc().documentElement;const n=Lm(t);return n?(t.eventRoot||(t.eventRoot=ru.select(n)[0]),t.eventRoot):t.getBody()},R1=(t,o,n)=>{var s;(s=t).hidden||Mg(s)?Mg(t)&&((s,i)=>{if("click"!==i.type||gt.metaKeyPressed(i))st(eM,i.type)&&s.dispatch(i.type,i);else{const c=re(i.target);(d=s,u=c,fl(u,"a",p=>Qo(p,re(d.getBody()))).bind(p=>Da(p,"href"))).each(d=>{if(i.preventDefault(),/^#/.test(d)){const u=s.dom.select(`${d},[name="${Re(d,"#")}"]`);u.length&&s.selection.scrollIntoView(u[0],!0)}else window.open(d,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var d,u})(t,n):t.dispatch(o,n)},D1=(t,o)=>{if(t.delegates||(t.delegates={}),t.delegates[o]||t.removed)return;const n=jx(t,o);if(Lm(t)){if(Ig||(Ig={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ig&&(Yo(Ig,(i,c)=>{t.dom.unbind(jx(t,c))}),Ig=null)})),Ig[o])return;const s=i=>{const c=i.target,d=t.editorManager.get();let u=d.length;for(;u--;){const p=d[u].getBody();(p===c||ru.isChildOf(c,p))&&R1(d[u],o,i)}};Ig[o]=s,ru.bind(n,o,s)}else{const s=i=>{R1(t,o,i)};ru.bind(n,o,s),t.delegates[o]=s}},Yb={...N1,bindPendingEventDelegates(){const t=this;$e.each(t._pendingNativeEvents,o=>{D1(t,o)})},toggleNativeEvent(t,o){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(o?n.initialized?D1(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(jx(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,o=t.getBody(),n=t.dom;t.delegates&&(Yo(t.delegates,(s,i)=>{t.dom.unbind(jx(t,i),i,s)}),delete t.delegates),!t.inline&&o&&n&&(o.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(o),n.unbind(t.getContainer()))}},tM=t=>_t(t)?{value:t.split(/[ ,]/),valid:!0}:Xn(t,_t)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},TR=(t,o)=>t+(Ro(o.message)?"":`. ${o.message}`),OR=t=>t.valid,B1=(t,o,n="")=>{const s=o(t);return Qe(s)?s?{value:t,valid:!0}:{valid:!1,message:n}:s},oM=["design","readonly"],AR=(t,o,n,s)=>{const i=n[o.get()],c=n[s];try{c.activate()}catch(d){return void console.error(`problem while activating editor mode ${s}:`,d)}var d;i.deactivate(),i.editorReadOnly!==c.editorReadOnly&&((d,u)=>{const p=re(d.getBody());var f,b,x;x=u,pl(f=p,b="mce-content-readonly")&&!x?zl(f,b):x&&fs(f,b),u?(d.selection.controlSelection.hideResizeRect(),d._selectionOverrides.hideFakeCaret(),(f=>{H.from(f.selection.getNode()).each(b=>{b.removeAttribute("data-mce-selected")})})(d),d.readonly=!0,Gb(p,!1),Ee(J(p,'*[contenteditable="true"]'),f=>{ln(f,nu,"true"),Gb(f,!1)})):(d.readonly=!1,d.hasEditableRoot()&&Gb(p,!0),Ee(J(p,`*[${nu}="true"]`),f=>{Cr(f,nu),Gb(f,!0)}),Vx(d,"StyleWithCSS",!1),Vx(d,"enableInlineTableEditing",!1),Vx(d,"enableObjectResizing",!1),z_(d)&&d.focus(),(f=>{f.selection.setRng(f.selection.getRng())})(d),d.nodeChanged())})(t,c.editorReadOnly),o.set(s),(d=t).dispatch("SwitchMode",{mode:s})},M1=$e.each,I1=$e.explode,nM={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},NR=$e.makeMap("alt,ctrl,shift,meta,access"),_n=t=>{const o={},n=Ht.os.isMacOS()||Ht.os.isiOS();M1(I1(t.toLowerCase(),"+"),c=>{c in NR?o[c]=!0:/^[0-9]{2,}$/.test(c)?o.keyCode=parseInt(c,10):(o.charCode=c.charCodeAt(0),o.keyCode=nM[c]||c.toUpperCase().charCodeAt(0))});const s=[o.keyCode];let i;for(i in NR)o[i]?s.push(i):o[i]=!1;return o.id=s.join(","),o.access&&(o.alt=!0,n?o.ctrl=!0:o.shift=!0),o.meta&&(n?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o};class P1{constructor(o){this.shortcuts={},this.pendingPatterns=[],this.editor=o;const n=this;o.on("keyup keypress keydown",s=>{!n.hasModifier(s)&&!n.isFunctionKey(s)||s.isDefaultPrevented()||(M1(n.shortcuts,i=>{n.matchShortcut(s,i)&&(n.pendingPatterns=i.subpatterns.slice(0),"keydown"===s.type&&n.executeShortcutAction(i))}),n.matchShortcut(s,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===s.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(o,n,s,i){const c=this,d=c.normalizeCommandFunc(s);return M1(I1($e.trim(o)),u=>{const p=c.createShortcut(u,n,d,i);c.shortcuts[p.id]=p}),!0}remove(o){const n=this.createShortcut(o);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(o){const n=this,s=o;return"string"==typeof s?()=>{n.editor.execCommand(s,!1,null)}:$e.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(o,n,s,i){const c=$e.map(I1(o,">"),_n);return c[c.length-1]=$e.extend(c[c.length-1],{func:s,scope:i||this.editor}),$e.extend(c[0],{desc:this.editor.translate(n),subpatterns:c.slice(1)})}hasModifier(o){return o.altKey||o.ctrlKey||o.metaKey}isFunctionKey(o){return"keydown"===o.type&&o.keyCode>=112&&o.keyCode<=123}matchShortcut(o,n){return!!n&&n.ctrl===o.ctrlKey&&n.meta===o.metaKey&&n.alt===o.altKey&&n.shift===o.shiftKey&&!!(o.keyCode===n.keyCode||o.charCode&&o.charCode===n.charCode)&&(o.preventDefault(),!0)}executeShortcutAction(o){return o.func?o.func.call(o.scope):null}}const L1=()=>{const t=(()=>{const o={},n={},s={},i={},c={},d={},u={},p={},f=(b,x)=>(C,O)=>{b[C.toLowerCase()]={...O,type:x}};return{addButton:f(o,"button"),addGroupToolbarButton:f(o,"grouptoolbarbutton"),addToggleButton:f(o,"togglebutton"),addMenuButton:f(o,"menubutton"),addSplitButton:f(o,"splitbutton"),addMenuItem:f(n,"menuitem"),addNestedMenuItem:f(n,"nestedmenuitem"),addToggleMenuItem:f(n,"togglemenuitem"),addAutocompleter:f(s,"autocompleter"),addContextMenu:f(c,"contextmenu"),addContextToolbar:f(d,"contexttoolbar"),addContextForm:f(d,"contextform"),addSidebar:f(u,"sidebar"),addView:f(p,"views"),addIcon:(b,x)=>i[b.toLowerCase()]=x,getAll:()=>({buttons:o,menuItems:n,icons:i,popups:s,contextMenus:c,contextToolbars:d,sidebars:u,views:p})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},vm=Sn.DOM,F1=$e.extend,z1=$e.each;class $x{constructor(o,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,F1(this,Yb);const i=this;this.id=o,this.hidden=!1;const c=((t,o,n,s,i)=>{var c;const d=t?{mobile:O1(null!==(c=i.mobile)&&void 0!==c?c:{},o)}:{},u=((t,o)=>{const n=((c,d)=>{const u={},p={};return vo(c,(f,b)=>st(t,b),lt(u),lt(p)),{t:u,f:p}})(o);return i=n.f,{sections:Ve(n.t),options:Ve(i)};var i})(["mobile"],yb(d,i)),p=$e.extend(n,s,u.options(),t&&$b(u,"mobile")?((f,b,x={})=>{const C=f.sections(),O=Xo(C,b).getOr({});return $e.extend({},x,O)})(u,"mobile"):{},{external_plugins:fR(s,u.options())});return((f,b,x,C)=>{const O=jb(x.forced_plugins),S=jb(C.plugins),R=$b(P=b,"mobile")?P.sections().mobile:{},T=((P,F,q,$)=>P&&$b(F,"mobile")?$:q)(f,b,S,R.plugins?jb(R.plugins):S),D=((P,F)=>[...jb(P),...jb(F)])(O,T);var P;return $e.extend(C,{forced_plugins:O,plugins:D})})(t,u,s,p)})(Fx||YB,Fx,S=n,s.defaultOptions,S);var S;this.options=((O,S)=>{const R={},T={},D=(F,q,$)=>{const ne=B1(q,$);return OR(ne)?(T[F]=ne.value,!0):(console.warn(TR(`Invalid value passed for the ${F} option`,ne)),!1)},P=F=>Gt(R,F);return{register:(F,q)=>{const $=_t(q.processor)?(ce=>{const me=(()=>{switch(ce){case"array":return qo;case"boolean":return Qe;case"function":return ut;case"number":return rs;case"object":return vt;case"string":return _t;case"string[]":return tM;case"object[]":return pe=>Xn(pe,vt);case"regexp":return pe=>sn(pe,RegExp);default:return Vo}})();return pe=>B1(pe,me,`The value must be a ${ce}.`)})(q.processor):q.processor,ne=((ce,me,pe)=>{if(!et(me)){const we=B1(me,pe);if(OR(we))return we.value;console.error(TR(`Invalid default value passed for the "${ce}" option`,we))}})(F,q.default,$);R[F]={...q,default:ne,processor:$},Xo(T,F).orThunk(()=>Xo(S,F)).each(ce=>D(F,ce,$))},isRegistered:P,get:F=>Xo(T,F).orThunk(()=>Xo(R,F).map(q=>q.default)).getOrUndefined(),set:(F,q)=>{if(P(F)){const $=R[F];return $.immutable?(console.error(`"${F}" is an immutable option and cannot be updated`),!1):D(F,q,$.processor)}return console.warn(`"${F}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:F=>{const q=P(F);return q&&delete T[F],q},isSet:F=>Gt(T,F)}})(0,c),(O=>{const S=O.options.register;S("id",{processor:"string",default:O.id}),S("selector",{processor:"string"}),S("target",{processor:"object"}),S("suffix",{processor:"string"}),S("cache_suffix",{processor:"string"}),S("base_url",{processor:"string"}),S("referrer_policy",{processor:"string",default:""}),S("language_load",{processor:"boolean",default:!0}),S("inline",{processor:"boolean",default:!1}),S("iframe_attrs",{processor:"object",default:{}}),S("doctype",{processor:"string",default:"<!DOCTYPE html>"}),S("document_base_url",{processor:"string",default:O.documentBaseUrl}),S("body_id",{processor:Ns(O,"tinymce"),default:"tinymce"}),S("body_class",{processor:Ns(O),default:""}),S("content_security_policy",{processor:"string",default:""}),S("br_in_pre",{processor:"boolean",default:!0}),S("forced_root_block",{processor:R=>{const T=_t(R)&&To(R);return T?{value:R,valid:T}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),S("forced_root_block_attrs",{processor:"object",default:{}}),S("newline_behavior",{processor:R=>{const T=st(["block","linebreak","invert","default"],R);return T?{value:R,valid:T}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),S("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),S("no_newline_selector",{processor:"string",default:""}),S("keep_styles",{processor:"boolean",default:!0}),S("end_container_on_empty_block",{processor:R=>Qe(R)||_t(R)?{valid:!0,value:R}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),S("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),S("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),S("font_size_classes",{processor:"string",default:""}),S("automatic_uploads",{processor:"boolean",default:!0}),S("images_reuse_filename",{processor:"boolean",default:!1}),S("images_replace_blob_uris",{processor:"boolean",default:!0}),S("icons",{processor:"string",default:""}),S("icons_url",{processor:"string",default:""}),S("images_upload_url",{processor:"string",default:""}),S("images_upload_base_path",{processor:"string",default:""}),S("images_upload_credentials",{processor:"boolean",default:!1}),S("images_upload_handler",{processor:"function"}),S("language",{processor:"string",default:"en"}),S("language_url",{processor:"string",default:""}),S("entity_encoding",{processor:"string",default:"named"}),S("indent",{processor:"boolean",default:!0}),S("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),S("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),S("indent_use_margin",{processor:"boolean",default:!1}),S("indentation",{processor:"string",default:"40px"}),S("content_css",{processor:R=>{const T=!1===R||_t(R)||Xn(R,_t);return T?_t(R)?{value:qt(R.split(","),Zt),valid:T}:qo(R)?{value:R,valid:T}:!1===R?{value:[],valid:T}:{value:R,valid:T}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:td(O)?[]:["default"]}),S("content_style",{processor:"string"}),S("content_css_cors",{processor:"boolean",default:!1}),S("font_css",{processor:R=>{const T=_t(R)||Xn(R,_t);return T?{value:qo(R)?R:qt(R.split(","),Zt),valid:T}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),S("inline_boundaries",{processor:"boolean",default:!0}),S("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),S("object_resizing",{processor:R=>{const T=Qe(R)||_t(R);return T?!1===R||Bw.isiPhone()||Bw.isiPad()?{value:"",valid:T}:{value:!0===R?"table,img,figure.image,div,video,iframe":R,valid:T}:{valid:!1,message:"Must be boolean or a string"}},default:!Mw}),S("resize_img_proportional",{processor:"boolean",default:!0}),S("event_root",{processor:"object"}),S("service_message",{processor:"string"}),S("theme",{processor:R=>!1===R||_t(R)||ut(R),default:"silver"}),S("theme_url",{processor:"string"}),S("formats",{processor:"object"}),S("format_empty_lines",{processor:"boolean",default:!1}),S("format_noneditable_selector",{processor:"string",default:""}),S("preview_styles",{processor:R=>{const T=!1===R||_t(R);return T?{value:!1===R?"":R,valid:T}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),S("custom_ui_selector",{processor:"string",default:""}),S("hidden_input",{processor:"boolean",default:!0}),S("submit_patch",{processor:"boolean",default:!0}),S("encoding",{processor:"string"}),S("add_form_submit_trigger",{processor:"boolean",default:!0}),S("add_unload_trigger",{processor:"boolean",default:!0}),S("custom_undo_redo_levels",{processor:"number",default:0}),S("disable_nodechange",{processor:"boolean",default:!1}),S("readonly",{processor:"boolean",default:!1}),S("editable_root",{processor:"boolean",default:!0}),S("plugins",{processor:"string[]",default:[]}),S("external_plugins",{processor:"object"}),S("forced_plugins",{processor:"string[]"}),S("model",{processor:"string",default:O.hasPlugin("rtc")?"plugin":"dom"}),S("model_url",{processor:"string"}),S("block_unsupported_drop",{processor:"boolean",default:!0}),S("visual",{processor:"boolean",default:!0}),S("visual_table_class",{processor:"string",default:"mce-item-table"}),S("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),S("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),S("setup",{processor:"function"}),S("init_instance_callback",{processor:"function"}),S("url_converter",{processor:"function",default:O.convertURL}),S("url_converter_scope",{processor:"object",default:O}),S("urlconverter_callback",{processor:"function"}),S("allow_conditional_comments",{processor:"boolean",default:!1}),S("allow_html_data_urls",{processor:"boolean",default:!1}),S("allow_svg_data_urls",{processor:"boolean"}),S("allow_html_in_named_anchor",{processor:"boolean",default:!1}),S("allow_script_urls",{processor:"boolean",default:!1}),S("allow_unsafe_link_target",{processor:"boolean",default:!1}),S("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),S("fix_list_elements",{processor:"boolean",default:!1}),S("preserve_cdata",{processor:"boolean",default:!1}),S("remove_trailing_brs",{processor:"boolean",default:!0}),S("pad_empty_with_br",{processor:"boolean",default:!1}),S("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),S("element_format",{processor:"string",default:"html"}),S("entities",{processor:"string"}),S("schema",{processor:"string",default:"html5"}),S("convert_urls",{processor:"boolean",default:!0}),S("relative_urls",{processor:"boolean",default:!0}),S("remove_script_host",{processor:"boolean",default:!0}),S("custom_elements",{processor:"string"}),S("extended_valid_elements",{processor:"string"}),S("invalid_elements",{processor:"string"}),S("invalid_styles",{processor:Pw}),S("valid_children",{processor:"string"}),S("valid_classes",{processor:Pw}),S("valid_elements",{processor:"string"}),S("valid_styles",{processor:Pw}),S("verify_html",{processor:"boolean",default:!0}),S("auto_focus",{processor:R=>_t(R)||!0===R}),S("browser_spellcheck",{processor:"boolean",default:!1}),S("protect",{processor:"array"}),S("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),S("deprecation_warnings",{processor:"boolean",default:!0}),S("a11y_advanced_options",{processor:"boolean",default:!1}),S("api_key",{processor:"string"}),S("paste_block_drop",{processor:"boolean",default:!1}),S("paste_data_images",{processor:"boolean",default:!0}),S("paste_preprocess",{processor:"function"}),S("paste_postprocess",{processor:"function"}),S("paste_webkit_styles",{processor:"string",default:"none"}),S("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),S("paste_merge_formats",{processor:"boolean",default:!0}),S("smart_paste",{processor:"boolean",default:!0}),S("paste_as_text",{processor:"boolean",default:!1}),S("paste_tab_spaces",{processor:"number",default:4}),S("text_patterns",{processor:R=>Xn(R,vt)||!1===R?{value:yE(!1===R?[]:R),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),S("text_patterns_lookup",{processor:R=>{return ut(R)?{value:(T=R,D=>{const P=T(D);return yE(P)}),valid:!0}:{valid:!1,message:"Must be a single function"};var T},default:R=>[]}),S("noneditable_class",{processor:"string",default:"mceNonEditable"}),S("editable_class",{processor:"string",default:"mceEditable"}),S("noneditable_regexp",{processor:R=>Xn(R,Iw)?{value:R,valid:!0}:Iw(R)?{value:[R],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),S("table_tab_navigation",{processor:"boolean",default:!0}),S("highlight_on_focus",{processor:"boolean",default:!1}),S("xss_sanitization",{processor:"boolean",default:!0}),S("details_initial_state",{processor:R=>{const T=st(["inherited","collapsed","expanded"],R);return T?{value:R,valid:T}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),S("details_serialized_state",{processor:R=>{const T=st(["inherited","collapsed","expanded"],R);return T?{value:R,valid:T}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),S("init_content_sync",{processor:"boolean",default:!1}),S("newdocument_content",{processor:"string",default:""}),S("force_hex_color",{processor:R=>{const T=["always","rgb_only","off"],D=st(T,R);return D?{value:R,valid:D}:{valid:!1,message:`Must be one of: ${T.join(", ")}.`}},default:"off"}),S("sandbox_iframes",{processor:"boolean",default:!1}),S("convert_unsafe_embeds",{processor:"boolean",default:!1}),O.on("ScriptsLoaded",()=>{S("directionality",{processor:"string",default:Va.isRtl()?"rtl":void 0}),S("placeholder",{processor:"string",default:ZR.getAttrib(O.getElement(),"placeholder")})})})(i);const d=this.options.get;d("deprecation_warnings")&&((O,S)=>{((R,T)=>{const D=(t=>{const o=h0(t,iS),n=t.forced_root_block;return!1!==n&&""!==n||o.push("forced_root_block (false only)"),Rn(o)})(R),P=(t=>f0(t,Zf))(T),F=P.length>0,q=D.length>0,$="mobile"===T.theme;if(F||q||$){const ne="\n- ",ce=$?`\n\nThemes:${ne}mobile`:"",me=F?`\n\nPlugins:${ne}${P.join(ne)}`:"",pe=q?`\n\nOptions:${ne}${D.join(ne)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+ce+me+pe)}})(O,S),((R,T)=>{const D=(t=>h0(t,nA))(R),P=(t=>f0(t,lS.map(o=>o.name)))(T),F=P.length>0,q=D.length>0;if(F||q){const $="\n- ",ne=F?`\n\nPlugins:${$}${P.map(b0).join($)}`:"",ce=q?`\n\nOptions:${$}${D.join($)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+ne+ce)}})(O,S)})(n,c);const u=d("suffix");u&&(s.suffix=u),this.suffix=s.suffix;const p=d("base_url");p&&s._setBaseUrl(p),this.baseUri=s.baseURI;const f=$w(i);f&&(Jc.ScriptLoader._setReferrerPolicy(f),Sn.DOM.styleSheetLoader._setReferrerPolicy(f));const b=ME(i);ee(b)&&Sn.DOM.styleSheetLoader._setContentCssCors(b),Tr.languageLoad=d("language_load"),Tr.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new Ol(wE(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=td(i),this.hasVisual=PE(i),this.shortcuts=new P1(this),this.editorCommands=new SR(this),(t=>{var o;(t=>{(o=>{const n=s=>()=>{Ee("left,center,right,justify".split(","),i=>{s!==i&&o.formatter.remove("align"+i)}),"none"!==s&&(o.formatter.toggle("align"+s,void 0),o.nodeChanged())};o.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(o=>{const n=s=>()=>{const i=o.selection,c=i.isCollapsed()?[o.dom.getParent(i.getNode(),o.dom.isBlock)]:i.getSelectedBlocks();return Wo(c,d=>ee(o.formatter.matchNode(d,s)))};o.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(o=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=o.getDoc();let i;try{s.execCommand(n)}catch{i=!0}if("paste"!==n||s.queryCommandEnabled(n)||(i=!0),i||!s.queryCommandSupported(n)){let c=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ht.os.isMacOS()||Ht.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:c,type:"error"})}}}),(o=>{o.editorCommands.addCommands({mceAddUndoLevel:()=>{o.undoManager.add()},mceEndUndoLevel:()=>{o.undoManager.add()},Undo:()=>{o.undoManager.undo()},Redo:()=>{o.undoManager.redo()}})})(t),(o=>{o.editorCommands.addCommands({mceSelectNodeDepth:(n,s,i)=>{let c=0;o.dom.getParent(o.selection.getNode(),d=>!Te(d)||c++!==i||(o.selection.select(d),!1),o.getBody())},mceSelectNode:(n,s,i)=>{o.selection.select(i)},selectAll:()=>{const n=o.dom.getParent(o.selection.getStart(),on);if(n){const s=o.dom.createRng();s.selectNodeContents(n),o.selection.setRng(s)}}})})(t),(o=>{o.editorCommands.addCommands({mceCleanup:()=>{const n=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(n)},insertImage:(n,s,i)=>{Bg(o,o.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{o.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,i)=>{Bg(o,o.dom.encode(i))},insertHTML:(n,s,i)=>{Bg(o,i)},mceInsertContent:(n,s,i)=>{Bg(o,i)},mceSetContent:(n,s,i)=>{o.setContent(i)},mceReplaceContent:(n,s,i)=>{o.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceNewDocument:()=>{o.setContent(Wa(o))}})})(t),(o=>{const n=(s,i,c)=>{const d=_t(c)?{href:c}:c,u=o.dom.getParent(o.selection.getNode(),"a");vt(d)&&_t(d.href)&&(d.href=d.href.replace(/ /g,"%20"),u&&d.href||o.formatter.remove("link"),d.href&&o.formatter.apply("link",d,u))};o.editorCommands.addCommands({unlink:()=>{if(o.selection.isEditable()){if(o.selection.isCollapsed()){const s=o.dom.getParent(o.selection.getStart(),"a");return void(s&&o.dom.remove(s,!0))}o.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(o=>{o.editorCommands.addCommands({Indent:()=>{Xd(o,"indent")},Outdent:()=>{Rl(o)}}),o.editorCommands.addCommands({Outdent:()=>VS(o)},"state")})(t),(o=>{o.editorCommands.addCommands({InsertNewBlockBefore:()=>{qb(o,!0)},InsertNewBlockAfter:()=>{qb(o,!1)}})})(t),(o=>{o.editorCommands.addCommands({insertParagraph:()=>{hx(AN,o)},mceInsertNewLine:(n,s,i)=>{ts(o,i)},InsertLineBreak:(n,s,i)=>{hx(Pk,o)}})})(t),(o=>{var n;(n=o).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":s=>{n.getDoc().execCommand(s);const i=n.dom.getParent(n.selection.getNode(),"ol,ul");if(i){const c=i.parentNode;if(c&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)){const d=n.selection.getBookmark();n.dom.split(c,i),n.selection.moveToBookmark(d)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":s=>{const i=n.dom.getParent(n.selection.getNode(),"ul,ol");return i&&("insertunorderedlist"===s&&"UL"===i.tagName||"insertorderedlist"===s&&"OL"===i.tagName)}},"state")})(o)})(t),(o=>{(n=>{const s=(i,c)=>{n.formatter.toggle(i,c),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>{s(i)},"ForeColor,HiliteColor":(i,c,d)=>{s(i,{value:d})},BackColor:(i,c,d)=>{s("hilitecolor",{value:d})},FontName:(i,c,d)=>{((u,p)=>{const f=Hx(u,p);u.formatter.toggle("fontname",{value:xR(f)}),u.nodeChanged()})(n,d)},FontSize:(i,c,d)=>{var u;(u=n).formatter.toggle("fontsize",{value:Hx(u,d)}),u.nodeChanged()},LineHeight:(i,c,d)=>{var u;(u=n).formatter.toggle("lineheight",{value:String(d)}),u.nodeChanged()},Lang:(i,c,d)=>{var u;s(i,{value:d.code,customValue:null!==(u=d.customCode)&&void 0!==u?u:null})},RemoveFormat:i=>{n.formatter.remove(i)},mceBlockQuote:()=>{s("blockquote")},FormatBlock:(i,c,d)=>{s(_t(d)?d:"p")},mceToggleFormat:(i,c,d)=>{s(d)}})})(o),(n=>{const s=i=>n.formatter.match(i);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>s(i),mceBlockQuote:()=>s("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Wb(i=n,c=>ZB(i.getBody(),c.dom)).getOr("");var i}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Wb(i=n,c=>QB(i.getBody(),c.dom)).getOr("");var i}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Wb(i=n,c=>{const d=re(i.getBody());return Py(c,p=>Wi(p,"line-height"),it(Qo,d)).getOrThunk(()=>{const p=parseFloat(As(c,"line-height")),f=parseFloat(As(c,"font-size"));return String(p/f)})}).getOr("");var i})})(o)})(t),(o=>{o.editorCommands.addCommands({mceRemoveNode:(n,s,i)=>{const c=i??o.selection.getNode();if(c!==o.getBody()){const d=o.selection.getBookmark();o.dom.remove(c,!0),o.selection.moveToBookmark(d)}},mcePrint:()=>{o.getWin().print()},mceFocus:(n,s,i)=>{var c;(c=o).removed||(!0===i?H_(c):(u=>{const p=u.selection,f=u.getBody();let b=p.getRng();u.quirks.refreshContentEditable(),ee(u.bookmark)&&!eg(u)&&ly(u).each(C=>{u.selection.setRng(C),b=C});const x=(C=u,O=p.getNode(),C.dom.getParent(O,S=>"true"===C.dom.getContentEditable(S)));var C,O;if(x&&u.dom.isChildOf(x,f))return F_(x),jT(u,b),void H_(u);u.inline||(Ht.browser.isOpera()||F_(f),u.getWin().focus()),(Ht.browser.isFirefox()||u.inline)&&(F_(f),jT(u,b)),H_(u)})(c))},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})})(t)})(this);const x=d("cache_suffix");x&&(Ht.cacheSuffix=x.replace(/^[\?\&]+/,"")),this.ui={registry:L1(),styleSheetLoader:void 0,show:Kt,hide:Kt,setEnabled:Kt,isEnabled:Vo},this.mode=(O=>{const S=Zo("design"),R=Zo({design:{activate:Kt,deactivate:Kt,editorReadOnly:!1},readonly:{activate:Kt,deactivate:Kt,editorReadOnly:!0}});return(T=O).serializer?kR(T):T.on("PreInit",()=>{kR(T)}),(T=>{T.on("ShowCaret",D=>{Mg(T)&&D.preventDefault()}),T.on("ObjectSelected",D=>{Mg(T)&&D.preventDefault()})})(O),{isReadOnly:()=>Mg(O),set:T=>((D,P,F,q)=>{if(q!==F.get()){if(!Gt(P,q))throw new Error(`Editor mode '${q}' is invalid`);D.initialized?AR(D,F,P,q):D.on("init",()=>AR(D,F,P,q))}})(O,R.get(),S,T),get:()=>S.get(),register:(T,D)=>{R.set(((P,F,q)=>{if(st(oM,F))throw new Error(`Cannot override default mode ${F}`);return{...P,[F]:{...q,deactivate:()=>{try{q.deactivate()}catch($){console.error(`problem while deactivating editor mode ${F}:`,$)}}}}})(R.get(),T,D))}};var T})(i),s.dispatch("SetupEditor",{editor:this});const C=mD(i);ut(C)&&C.call(i,i)}render(){(o=>{const n=o.id;Va.setCode(Tv(o));const s=()=>{fm.unbind(window,"ready",s),o.render()};if(!Md.Event.domLoaded)return void fm.bind(window,"ready",s);if(!o.getElement())return;const i=re(o.getElement()),c=_m(i);var p;o.on("remove",()=>{ha(i.dom.attributes,u=>Cr(i,u.name)),jr(i,c)}),o.ui.styleSheetLoader=uv.forElement(i,{contentCssCors:ME(p=o),referrerPolicy:$w(p)}),td(o)?o.inline=!0:(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden");const d=o.getElement().form||fm.getParent(n,"form");d&&(o.formElement=d,Nv(o)&&!$n(o.getElement())&&(fm.insertAfter(fm.create("input",{type:"hidden",name:n}),n),o.hasHiddenInput=!0),o.formEventDelegate=u=>{o.dispatch(u.type,u)},fm.bind(d,"submit reset",o.formEventDelegate),o.on("reset",()=>{o.resetContent()}),!iD(o)||d.submit.nodeType||d.submit.length||d._mceOldSubmit||(d._mceOldSubmit=d.submit,d.submit=()=>(o.editorManager.triggerSave(),o.setDirty(!1),d._mceOldSubmit(d)))),o.windowManager=y0(o),o.notificationManager=v0(o),"xml"===o.options.get("encoding")&&o.on("GetContent",u=>{u.save&&(u.content=fm.encode(u.content))}),lD(o)&&o.on("submit",()=>{o.initialized&&o.save()}),DE(o)&&(o._beforeUnload=()=>{!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0,set_dirty:!1})},o.editorManager.on("BeforeUnload",o._beforeUnload)),o.editorManager.add(o),((t,o)=>{const n=Jc.ScriptLoader,s=()=>{!t.removed&&(i=>{const c=fp(i);return!_t(c)||ee(gg.get(c))})(t)&&(i=>{const c=Tc(i);return ee(ug.get(c))})(t)&&Lx(t)};((i,c)=>{const d=fp(i);if(_t(d)&&!E1(d)&&!Gt(gg.urls,d)){const u=rD(i),p=u?i.documentBaseURI.toAbsolute(u):`themes/${d}/theme${c}.js`;gg.load(d,p).catch(()=>{ol(i,"ThemeLoadError",pg("theme",p,d))})}})(t,o),((i,c)=>{const d=Tc(i);if("plugin"!==d&&!Gt(ug.urls,d)){const u=Av(i),p=_t(u)?i.documentBaseURI.toAbsolute(u):`models/${d}/model${c}.js`;ug.load(d,p).catch(()=>{ol(i,"ModelLoadError",pg("model",p,d))})}})(t,o),((i,c)=>{const d=Tv(c),u=hp(c);if(!Va.hasCode(d)&&"en"!==d){const p=To(u)?u:`${c.editorManager.baseURL}/langs/${d}.js`;i.add(p).catch(()=>{ol(c,"LanguageLoadError",pg("language",p,d))})}})(n,t),((i,c,d)=>{const u=T1(c,"default",d),p=(f=c,H.from(SE(f)).filter(To).map(b=>({url:b,name:H.none()}))).orThunk(()=>T1(c,CE(c),""));var f;Ee((f=>{const b=[],x=C=>{b.push(C)};for(let C=0;C<f.length;C++)f[C].each(x);return b})([u,p]),f=>{i.add(f.url).catch(()=>{var b,x,C;b=c,x=f.url,C=f.name.getOrUndefined(),ol(b,"IconsLoadError",pg("icons",x,C))})})})(n,t,o),((i,c)=>{const d=(u,p)=>{mg.load(u,p).catch(()=>{ol(i,"PluginLoadError",pg("plugin",p,u))})};Yo(IE(i),(u,p)=>{d(p,u),i.options.set("plugins",Rv(i).concat(p))}),Ee(Rv(i),u=>{!(u=$e.trim(u))||mg.urls[u]||E1(u)||d(u,`plugins/${u}/plugin${c}.js`)})})(t,o),n.loadQueue().then(s,s)})(o,o.suffix)})(this)}focus(o){this.execCommand("mceFocus",!1,o)}hasFocus(){return eg(this)}translate(o){return Va.translate(o)}getParam(o,n,s){const i=this.options;return i.isRegistered(o)||(ee(s)?i.register(o,{processor:s,default:n}):i.register(o,{processor:Vo,default:n})),i.isSet(o)||et(n)?i.get(o):n}hasPlugin(o,n){return!(!st(Rv(this),o)||n&&void 0===mg.get(o))}nodeChanged(o){this._nodeChangeDispatcher.nodeChanged(o)}addCommand(o,n,s){this.editorCommands.addCommand(o,n,s)}addQueryStateHandler(o,n,s){this.editorCommands.addQueryStateHandler(o,n,s)}addQueryValueHandler(o,n,s){this.editorCommands.addQueryValueHandler(o,n,s)}addShortcut(o,n,s,i){this.shortcuts.add(o,n,s,i)}execCommand(o,n,s,i){return this.editorCommands.execCommand(o,n,s,i)}queryCommandState(o){return this.editorCommands.queryCommandState(o)}queryCommandValue(o){return this.editorCommands.queryCommandValue(o)}queryCommandSupported(o){return this.editorCommands.queryCommandSupported(o)}show(){const o=this;o.hidden&&(o.hidden=!1,o.inline?o.getBody().contentEditable="true":(vm.show(o.getContainer()),vm.hide(o.id)),o.load(),o.dispatch("show"))}hide(){const o=this;o.hidden||(o.save(),o.inline?(o.getBody().contentEditable="false",o===o.editorManager.focusedEditor&&(o.editorManager.focusedEditor=null)):(vm.hide(o.getContainer()),vm.setStyle(o.id,"display",o.orgDisplay)),o.hidden=!0,o.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(o,n){this.dispatch("ProgressState",{state:o,time:n})}load(o={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const i={...o,load:!0},c=$n(s)?s.value:s.innerHTML,d=n.setContent(c,i);return i.no_events||n.dispatch("LoadContent",{...i,element:s}),d}return""}save(o={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const i={...o,save:!0,element:s};let c=n.getContent(i);const d={...i,content:c};if(d.no_events||n.dispatch("SaveContent",d),"raw"===d.format&&n.dispatch("RawSaveContent",d),c=d.content,$n(s))s.value=c;else{!o.is_removing&&n.inline||(s.innerHTML=c);const u=vm.getParent(n.id,"form");u&&z1(u.elements,p=>p.name!==n.id||(p.value=c,!1))}return d.element=i.element=s=null,!1!==d.set_dirty&&n.setDirty(!1),c}setContent(o,n){return dd(this,o,n)}getContent(o){return((n,s={})=>{const i=(c=s,d=s.format?s.format:"html",{...c,format:d,get:!0,getInner:!0});var c,d;return JO(n,i).fold(un,c=>{const d=(p=c,m0(n).editor.getContent(p));var p;return YC(n,d,c)})})(this,o)}insertContent(o,n){n&&(o=F1({content:o},n)),this.execCommand("mceInsertContent",!1,o)}resetContent(o){void 0===o?dd(this,this.startContent,{format:"raw"}):dd(this,o),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(o){const n=!this.isNotDirty;this.isNotDirty=!o,o&&o!==n&&this.dispatch("dirty")}getContainer(){const o=this;return o.container||(o.container=o.editorContainer||vm.get(o.id+"_parent")),o.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=vm.get(this.id)),this.targetElm}getWin(){const o=this;if(!o.contentWindow){const n=o.iframeElement;n&&(o.contentWindow=n.contentWindow)}return o.contentWindow}getDoc(){const o=this;if(!o.contentDocument){const n=o.getWin();n&&(o.contentDocument=n.document)}return o.contentDocument}getBody(){var o,n;const s=this.getDoc();return null!==(n=null!==(o=this.bodyElement)&&void 0!==o?o:s?.body)&&void 0!==n?n:null}convertURL(o,n,s){const i=this,c=i.options.get,d=Hh(i);if(ut(d))return d.call(i,o,s,!0,n);if(!c("convert_urls")||"link"===s||vt(s)&&"LINK"===s.nodeName||0===o.indexOf("file:")||0===o.length)return o;const u=new Ol(o);return"http"!==u.protocol&&"https"!==u.protocol&&""!==u.protocol?o:c("relative_urls")?i.documentBaseURI.toRelative(o):o=i.documentBaseURI.toAbsolute(o,c("remove_script_host"))}addVisual(o){((n,s)=>{var c;c=s,Gr(this).editor.addVisual(c)})(0,o)}setEditableRoot(o){var n,s;(n=this)._editableRoot!==(s=o)&&(n._editableRoot=s,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:s}))}hasEditableRoot(){return this._editableRoot}remove(){(o=>{if(!o.removed){const{_selectionOverrides:n,editorUpload:s}=o,i=o.getBody(),c=o.getElement();i&&o.save({is_removing:!0}),o.removed=!0,o.unbindAllNativeEvents(),o.hasHiddenInput&&ee(c?.nextSibling)&&Ws.remove(c.nextSibling),o.dispatch("remove"),o.editorManager.remove(o),!o.inline&&i&&Ws.setStyle((d=o).id,"display",d.orgDisplay),(d=>{d.dispatch("detach")})(o),Ws.remove(o.getContainer()),dg(n),dg(s),o.destroy()}var d})(this)}destroy(o){((n,s)=>{const{selection:i,dom:c}=n;n.destroyed||(s||n.removed?(s||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),dg(i),dg(c)),(d=>{const u=d.formElement;u&&(u._mceOldSubmit&&(u.submit=u._mceOldSubmit,delete u._mceOldSubmit),Ws.unbind(u,"submit reset",d.formEventDelegate))})(n),(d=>{const u=d;u.contentAreaContainer=u.formElement=u.container=u.editorContainer=null,u.bodyElement=u.contentDocument=u.contentWindow=null,u.iframeElement=u.targetElm=null;const p=d.selection;p&&(u.selection=p.win=p.dom=p.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,o)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const uh=Sn.DOM,Xb=$e.each;let Wx,RR=!1,qs=[];const qx=t=>{const o=t.type;Xb(xd.get(),n=>{switch(o){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Pg=t=>{if(t!==RR){const o=Sn.DOM;t?(o.bind(window,"resize",qx),o.bind(window,"scroll",qx)):(o.unbind(window,"resize",qx),o.unbind(window,"scroll",qx)),RR=t}},mh=t=>{const o=qs;return qs=ft(qs,n=>t!==n),xd.activeEditor===t&&(xd.activeEditor=qs.length>0?qs[0]:null),xd.focusedEditor===t&&(xd.focusedEditor=null),o.length!==qs.length},gh="CSS1Compat"!==document.compatMode,xd={...N1,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.3",releaseDate:"2024-02-08",i18n:Va,activeEditor:null,focusedEditor:null,setup(){const t=this;let o="",n="",s=Ol.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)o=i.base||i.baseURL,n=i.suffix;else{const d=document.getElementsByTagName("script");for(let u=0;u<d.length;u++){const p=d[u].src||"";if(""===p)continue;const f=p.substring(p.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(p)){-1!==f.indexOf(".min")&&(n=".min"),o=p.substring(0,p.lastIndexOf("/"));break}}if(!o&&document.currentScript){const u=document.currentScript.src;-1!==u.indexOf(".min")&&(n=".min"),o=u.substring(0,u.lastIndexOf("/"))}}var c;t.baseURL=new Ol(s).toAbsolute(o),t.documentBaseURL=s,t.baseURI=new Ol(t.baseURL),t.suffix=n,(c=t).on("AddEditor",it(kD,c)),c.on("RemoveEditor",it(ED,c))},overrideDefaults(t){const o=t.base_url;o&&this._setBaseUrl(o);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const s=t.plugin_base_urls;void 0!==s&&Yo(s,(i,c)=>{Tr.PluginManager.urls[c]=i})},init(t){const o=this;let n;const s=$e.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let i=d=>{n=d};const c=()=>{let d=0;const u=[];let p;var f;uh.unbind(window,"ready",c),(f=>{const b=t.onpageload;b&&b.apply(o,[])})(),p=((f,b)=>{const x=[],C=ut(b)?O=>Wo(x,S=>b(S,O)):O=>st(x,O);for(let O=0,S=f.length;O<S;O++){const R=f[O];C(R)||x.push(R)}return x})((f=t,Ht.browser.isIE()||Ht.browser.isEdge()?(hg("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):gh?(hg("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):_t(f.selector)?uh.select(f.selector):ee(f.target)?[f.target]:[])),$e.each(p,f=>{var b;(b=o.get(f.id))&&b.initialized&&!(b.getContainer()||b.getBody()).parentNode&&(mh(b),b.unbindAllNativeEvents(),b.destroy(!0),b.removed=!0)}),p=$e.grep(p,f=>!o.get(f.id)),0===p.length?i([]):Xb(p,f=>{t.inline&&f.tagName.toLowerCase()in s?hg("Could not initialize inline editor on invalid inline target element",f):((b,x,C)=>{const O=new $x(b,x,o);u.push(O),O.on("init",()=>{++d===p.length&&i(u)}),O.targetElm=O.targetElm||C,O.render()})((b=>{let x=b.id;return x||(x=Xo(b,"name").filter(C=>!uh.get(C)).getOrThunk(uh.uniqueId),b.setAttribute("id",x)),x})(f),t,f)})};return uh.bind(window,"ready",c),new Promise(d=>{n?d(n):i=u=>{d(u)}})},get(t){return 0===arguments.length?qs.slice(0):_t(t)?yn(qs,o=>o.id===t).getOr(null):rs(t)&&qs[t]?qs[t]:null},add(t){const o=this,n=o.get(t.id);return n===t||(null===n&&qs.push(t),Pg(!0),o.activeEditor=t,o.dispatch("AddEditor",{editor:t}),Wx||(Wx=s=>{const i=o.dispatch("BeforeUnload");if(i.returnValue)return s.preventDefault(),s.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",Wx))),t},createEditor(t,o){return this.add(new $x(t,o,this))},remove(t){const o=this;let n;if(t){if(!_t(t))return n=t,vn(o.get(n.id))?null:(mh(n)&&o.dispatch("RemoveEditor",{editor:n}),0===qs.length&&window.removeEventListener("beforeunload",Wx),n.remove(),Pg(qs.length>0),n);Xb(uh.select(t),s=>{n=o.get(s.id),n&&o.remove(n)})}else for(let s=qs.length-1;s>=0;s--)o.remove(qs[s])},execCommand(t,o,n){var s;const i=this,c=vt(n)?null!==(s=n.id)&&void 0!==s?s:n.index:n;switch(t){case"mceAddEditor":return i.get(c)||new $x(c,n.options,i).render(),!0;case"mceRemoveEditor":{const d=i.get(c);return d&&d.remove(),!0}case"mceToggleEditor":{const d=i.get(c);return d?(d.isHidden()?d.show():d.hide(),!0):(i.execCommand("mceAddEditor",!1,n),!0)}}return!!i.activeEditor&&i.activeEditor.execCommand(t,o,n)},triggerSave:()=>{Xb(qs,t=>{t.save()})},addI18n:(t,o)=>{Va.add(t,o)},translate:t=>Va.translate(t),setActive(t){const o=this.activeEditor;this.activeEditor!==t&&(o&&o.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:o})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Ol(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Ol(this.baseURL)}};xd.setup();const DR=(()=>{const t=ai();return{FakeClipboardItem:o=>({items:o,types:as(o),getType:n=>Xo(o,n).getOrUndefined()}),write:o=>{t.set(o)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),H1=Math.min,ym=Math.max,Jb=Math.round,V1=(t,o,n)=>{let s=o.x,i=o.y;const c=t.w,d=t.h,u=o.w,p=o.h,f=(n||"").split("");return"b"===f[0]&&(i+=p),"r"===f[1]&&(s+=u),"c"===f[0]&&(i+=Jb(p/2)),"c"===f[1]&&(s+=Jb(u/2)),"b"===f[3]&&(i-=d),"r"===f[4]&&(s-=c),"c"===f[3]&&(i-=Jb(d/2)),"c"===f[4]&&(s-=Jb(c/2)),Lg(s,i,c,d)},Lg=(t,o,n,s)=>({x:t,y:o,w:n,h:s}),U1={inflate:(t,o,n)=>Lg(t.x-o,t.y-n,t.w+2*o,t.h+2*n),relativePosition:V1,findBestRelativePosition:(t,o,n,s)=>{for(let i=0;i<s.length;i++){const c=V1(t,o,s[i]);if(c.x>=n.x&&c.x+c.w<=n.w+n.x&&c.y>=n.y&&c.y+c.h<=n.h+n.y)return s[i]}return null},intersect:(t,o)=>{const n=ym(t.x,o.x),s=ym(t.y,o.y),i=H1(t.x+t.w,o.x+o.w),c=H1(t.y+t.h,o.y+o.h);return i-n<0||c-s<0?null:Lg(n,s,i-n,c-s)},clamp:(t,o,n)=>{let s=t.x,i=t.y,c=t.x+t.w,d=t.y+t.h;const u=o.x+o.w,p=o.y+o.h,f=ym(0,o.x-s),b=ym(0,o.y-i),x=ym(0,c-u),C=ym(0,d-p);return s+=f,i+=b,n&&(c+=f,d+=b,s-=x,i-=C),c-=x,d-=C,Lg(s,i,c-s,d-i)},create:Lg,fromClientRect:t=>Lg(t.left,t.top,t.width,t.height)},BR=(()=>{const t={},o={},n={};return{load:(s,i)=>{const c=`Script at URL "${i}" failed to load`,d=`Script at URL "${i}" did not call \`tinymce.Resource.add('${s}', data)\` within 1 second`;if(void 0!==t[s])return t[s];{const u=new Promise((p,f)=>{const b=((x,C,O=1e3)=>{let S=!1,R=null;const T=F=>(...q)=>{S||(S=!0,null!==R&&(clearTimeout(R),R=null),F.apply(null,q))},D=T(x),P=T(C);return{start:(...F)=>{S||null!==R||(R=setTimeout(()=>P.apply(null,F),O))},resolve:D,reject:P}})(p,f);o[s]=b.resolve,Jc.ScriptLoader.loadScript(i).then(()=>b.start(d),()=>b.reject(c))});return t[s]=u,u}},add:(s,i)=>{void 0!==o[s]&&(o[s](i),delete o[s]),t[s]=Promise.resolve(i),n[s]=i},has:s=>s in n,get:s=>n[s],unload:s=>{delete t[s]}}})();let ph;try{const t="__storage_test__";ph=window.localStorage,ph.setItem(t,t),ph.removeItem(t)}catch{ph=(()=>{let o={},n=[];const s={getItem:i=>o[i]||null,setItem:(i,c)=>{n.push(i),o[i]=String(c)},key:i=>n[i],removeItem:i=>{n=n.filter(c=>c===i),delete o[i]},clear:()=>{n=[],o={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})()}const j1={geom:{Rect:U1},util:{Delay:kl,Tools:$e,VK:gt,URI:Ol,EventDispatcher:Ux,Observable:N1,I18n:Va,LocalStorage:ph,ImageUploader:t=>{const o=dS(),n=mS(t,o);return{upload:(s,i=!0)=>n.upload(s,i?uS(t):void 0)}}},dom:{EventUtils:Md,TreeWalker:he,TextSeeker:Xi,DOMUtils:Sn,ScriptLoader:Jc,RangeUtils:qu,Serializer:oA,StyleSheetLoader:Tu,ControlSelection:$u,BookmarkManager:Qi,Selection:aS,Event:Md.Event},html:{Styles:Dh,Entities:si,Node:pt,Schema:Au,DomParser:Wp,Writer:q_,Serializer:Gu},Env:Ht,AddOnManager:Tr,Annotator:sd,Formatter:gA,UndoManager:bS,EditorCommands:SR,WindowManager:y0,NotificationManager:v0,EditorObservable:Yb,Shortcuts:P1,Editor:$x,FocusManager:P_,EditorManager:xd,DOM:Sn.DOM,ScriptLoader:Jc.ScriptLoader,PluginManager:mg,ThemeManager:gg,ModelManager:ug,IconManager:ud,Resource:BR,FakeClipboard:DR,trim:$e.trim,isArray:$e.isArray,is:$e.is,toArray:$e.toArray,makeMap:$e.makeMap,each:$e.each,map:$e.map,grep:$e.grep,inArray:$e.inArray,extend:$e.extend,walk:$e.walk,resolve:$e.resolve,explode:$e.explode,_addCacheSuffix:$e._addCacheSuffix},MR=$e.extend(xd,j1);(t=>{window.tinymce=t,window.tinyMCE=t})(MR),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(MR)}(),function(){"use strict";const ll=Object.getPrototypeOf,Xs=(e,r,a)=>{var l;return!!a(e,r.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===r.name},cl=e=>r=>(a=>{const l=typeof a;return null===a?"null":"object"===l&&Array.isArray(a)?"array":"object"===l&&Xs(a,String,(m,g)=>g.isPrototypeOf(m))?"string":l})(r)===e,Xr=e=>r=>typeof r===e,dl=e=>r=>e===r,So=cl("string"),ms=cl("object"),Ta=e=>{return r=e,a=Object,ms(r)&&Xs(r,a,(l,m)=>ll(l)===m);var r,a},On=cl("array"),Ya=dl(null),Js=Xr("boolean"),sn=dl(void 0),_t=e=>null==e,vt=e=>!_t(e),an=Xr("function"),qo=Xr("number"),vn=(e,r)=>{if(On(e)){for(let a=0,l=e.length;a<l;++a)if(!r(e[a]))return!1;return!0}return!1},Qe=()=>{},et=e=>()=>e(),An=(e,r)=>(...a)=>e(r.apply(null,a)),ee=e=>()=>e,ut=e=>e,rs=(e,r)=>e===r;function Xn(e,...r){return(...a)=>{const l=r.concat(a);return e.apply(null,l)}}const Kt=e=>r=>!e(r),lr=e=>()=>{throw new Error(e)},Fl=e=>e(),Ve=ee(!1),un=ee(!0);class N{constructor(r,a){this.tag=r,this.value=a}static some(r){return new N(!0,r)}static none(){return N.singletonNone}fold(r,a){return this.tag?a(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?N.some(r(this.value)):N.none()}bind(r){return this.tag?r(this.value):N.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:N.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return vt(r)?N.some(r):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const it=Array.prototype.slice,wi=Array.prototype.indexOf,ss=Array.prototype.push,Pr=(e,r)=>wi.call(e,r),Ze=(e,r)=>{const a=Pr(e,r);return-1===a?N.none():N.some(a)},wo=(e,r)=>Pr(e,r)>-1,Vo=(e,r)=>{for(let a=0,l=e.length;a<l;a++)if(r(e[a],a))return!0;return!1},H=(e,r)=>{const a=[];for(let l=0;l<e;l++)a.push(r(l));return a},_i=(e,r)=>{const a=[];for(let l=0;l<e.length;l+=r){const m=it.call(e,l,l+r);a.push(m)}return a},Je=(e,r)=>{const a=e.length,l=new Array(a);for(let m=0;m<a;m++)l[m]=r(e[m],m);return l},yt=(e,r)=>{for(let a=0,l=e.length;a<l;a++)r(e[a],a)},Oa=(e,r)=>{const a=[],l=[];for(let m=0,g=e.length;m<g;m++){const h=e[m];(r(h,m)?a:l).push(h)}return{pass:a,fail:l}},st=(e,r)=>{const a=[];for(let l=0,m=e.length;l<m;l++){const g=e[l];r(g,l)&&a.push(g)}return a},Wo=(e,r,a)=>(((l,m)=>{for(let g=l.length-1;g>=0;g--)m(l[g],g)})(e,(l,m)=>{a=r(a,l,m)}),a),qt=(e,r,a)=>(yt(e,(l,m)=>{a=r(a,l,m)}),a),Ee=(e,r)=>((a,l,m)=>{for(let g=0,h=a.length;g<h;g++){const v=a[g];if(l(v,g))return N.some(v);if(m(v,g))break}return N.none()})(e,r,Ve),ha=(e,r)=>{for(let a=0,l=e.length;a<l;a++)if(r(e[a],a))return N.some(a);return N.none()},Rt=e=>{const r=[];for(let a=0,l=e.length;a<l;++a){if(!On(e[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);ss.apply(r,e[a])}return r},ft=(e,r)=>Rt(Je(e,r)),Qs=(e,r)=>{for(let a=0,l=e.length;a<l;++a)if(!0!==r(e[a],a))return!1;return!0},Nn=e=>{const r=it.call(e,0);return r.reverse(),r},Is=(e,r)=>st(e,a=>!wo(r,a)),yn=(e,r)=>{const a={};for(let l=0,m=e.length;l<m;l++){const g=e[l];a[String(g)]=r(g,l)}return a},la=e=>[e],Ci=(e,r)=>{const a=it.call(e,0);return a.sort(r),a},Lr=(e,r)=>r>=0&&r<e.length?N.some(e[r]):N.none(),cr=e=>Lr(e,0),fa=e=>Lr(e,e.length-1),Si=an(Array.from)?Array.from:e=>it.call(e),Ps=(e,r)=>{for(let a=0;a<e.length;a++){const l=r(e[a],a);if(l.isSome())return l}return N.none()},Rn=Object.keys,Aa=Object.hasOwnProperty,gn=(e,r)=>{const a=Rn(e);for(let l=0,m=a.length;l<m;l++){const g=a[l];r(e[g],g)}},pn=(e,r)=>dr(e,(a,l)=>({k:l,v:r(a,l)})),dr=(e,r)=>{const a={};return gn(e,(l,m)=>{const g=r(l,m);a[g.k]=g.v}),a},Xa=e=>(r,a)=>{e[a]=r},as=(e,r,a,l)=>{gn(e,(m,g)=>{(r(m,g)?a:l)(m,g)})},sc=(e,r)=>{const a={};return as(e,r,Xa(a),Qe),a},Yo=(e,r)=>{const a=[];return gn(e,(l,m)=>{a.push(r(l,m))}),a},Fr=(e,r)=>{const a=Rn(e);for(let l=0,m=a.length;l<m;l++){const g=a[l],h=e[g];if(r(h,g,e))return N.some(h)}return N.none()},Jr=e=>Yo(e,ut),lt=(e,r)=>vo(e,r)?N.from(e[r]):N.none(),vo=(e,r)=>Aa.call(e,r),zr=(e,r)=>vo(e,r)&&null!=e[r],Nr=(e,r,a=rs)=>e.exists(l=>a(l,r)),gs=e=>{const r=[],a=l=>{r.push(l)};for(let l=0;l<e.length;l++)e[l].each(a);return r},Xo=(e,r,a)=>e.isSome()&&r.isSome()?N.some(a(e.getOrDie(),r.getOrDie())):N.none(),Gt=(e,r)=>null!=e?N.some(r(e)):N.none(),Hr=(e,r)=>e?N.some(r):N.none(),ki=(e,r,a)=>""===r||e.length>=r.length&&e.substr(a,a+r.length)===r,ac=(e,r)=>Fi(e,r)?e.substring(r.length):e,_r=(e,r,a=0,l)=>{const m=e.indexOf(r,a);return-1!==m&&(!!sn(l)||m+r.length<=l)},Fi=(e,r)=>ki(e,r,0),Ei=(e,r)=>ki(e,r,e.length-r.length),Ja=(Gc=/^\s+|\s+$/g,e=>e.replace(Gc,"")),Na=e=>e.length>0,zi=e=>!Na(e),Ss=e=>void 0!==e.style&&an(e.style.getPropertyValue),ba=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ls=(e,r)=>{const a=(r||document).createElement(e);return ba(a)},xe=(e,r)=>{const a=(r||document).createTextNode(e);return ba(a)},oe=ba,Ne=typeof window<"u"?window:Function("return this;")(),Re=(e,r)=>((a,l)=>{let m=l??Ne;for(let g=0;g<a.length&&null!=m;++g)m=m[a[g]];return m})(e.split("."),r),Xe=Object.getPrototypeOf,nt=e=>e.dom.nodeName.toLowerCase(),Yt=e=>r=>r.dom.nodeType===e,Zt=e=>ho(e)&&(e=>{const r=Re("ownerDocument.defaultView",e);return ms(e)&&((a=r,((l,m)=>{const g=Re("HTMLElement",m);if(null==g)throw new Error("HTMLElement not available on this browser");return g})(0,a)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xe(e).constructor.name));var a})(e.dom),ho=Yt(1),Io=Yt(3),To=Yt(9),Ro=Yt(11),jn=e=>r=>ho(r)&&nt(r)===e,or=(e,r)=>{const a=e.dom;if(1!==a.nodeType)return!1;{const l=a;if(void 0!==l.matches)return l.matches(r);if(void 0!==l.msMatchesSelector)return l.msMatchesSelector(r);if(void 0!==l.webkitMatchesSelector)return l.webkitMatchesSelector(r);if(void 0!==l.mozMatchesSelector)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},xn=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Jo=(e,r)=>e.dom===r.dom,ks=(e,r)=>{const a=e.dom,l=r.dom;return a!==l&&a.contains(l)},Qr=e=>oe(e.dom.ownerDocument),Es=e=>To(e)?e:Qr(e),Qa=e=>oe(Es(e).dom.documentElement),Hi=e=>oe(Es(e).dom.defaultView),Zs=e=>N.from(e.dom.parentNode).map(oe),Za=e=>N.from(e.dom.parentElement).map(oe),lc=e=>N.from(e.dom.offsetParent).map(oe),Ti=e=>Je(e.dom.childNodes,oe),ul=(e,r)=>N.from(e.dom.childNodes[r]).map(oe),zc=e=>ul(e,0),Vr=(e,r)=>({element:e,offset:r}),du=(e,r)=>{const a=Ti(e);return a.length>0&&r<a.length?Vr(a[r],0):Vr(e,r)},Hc=e=>Ro(e)&&vt(e.dom.host),cc=an(Element.prototype.attachShadow)&&an(Node.prototype.getRootNode),dc=ee(cc),Ur=cc?e=>oe(e.dom.getRootNode()):Es,ei=e=>Hc(e)?e:oe(Es(e).dom.body),Vc=e=>{const r=Ur(e);return Hc(r)?N.some(r):N.none()},Kg=e=>oe(e.dom.host),ps=e=>{const r=Io(e)?e.dom.parentNode:e.dom;if(null==r||null===r.ownerDocument)return!1;const a=r.ownerDocument;return Vc(oe(r)).fold(()=>a.body.contains(r),(l=ps,m=Kg,g=>l(m(g))));var l,m},va=()=>ti(oe(document)),ti=e=>{const r=e.dom.body;if(null==r)throw new Error("Body is not available yet");return oe(r)},Uc=(e,r,a)=>{if(!(So(a)||Js(a)||qo(a)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(r,a+"")},ro=(e,r,a)=>{Uc(e.dom,r,a)},hs=(e,r)=>{const a=e.dom;gn(r,(l,m)=>{Uc(a,m,l)})},zn=(e,r)=>{const a=e.dom.getAttribute(r);return null===a?void 0:a},ur=(e,r)=>N.from(zn(e,r)),uu=(e,r)=>{const a=e.dom;return!(!a||!a.hasAttribute)&&a.hasAttribute(r)},Ht=(e,r)=>{e.dom.removeAttribute(r)},mu=(e,r,a)=>{if(!So(a))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",a,":: Element ",e),new Error("CSS value must be a string: "+a);Ss(e)&&e.style.setProperty(r,a)},gu=(e,r)=>{Ss(e)&&e.style.removeProperty(r)},lo=(e,r,a)=>{mu(e.dom,r,a)},$e=(e,r)=>{const a=e.dom;gn(r,(l,m)=>{mu(a,m,l)})},oi=(e,r)=>{const a=e.dom;gn(r,(l,m)=>{l.fold(()=>{gu(a,m)},g=>{mu(a,m,g)})})},Zr=(e,r)=>{const a=e.dom,l=window.getComputedStyle(a).getPropertyValue(r);return""!==l||ps(e)?l:mr(a,r)},mr=(e,r)=>Ss(e)?e.style.getPropertyValue(r):"",Jn=(e,r)=>{const l=mr(e.dom,r);return N.from(l).filter(m=>m.length>0)},wm=e=>{const r={},a=e.dom;if(Ss(a))for(let l=0;l<a.style.length;l++){const m=a.style.item(l);r[m]=a.style[m]}return r},pu=(e,r,a)=>{const l=Ls(e);return lo(l,r,a),Jn(l,r).isSome()},mn=(e,r)=>{gu(e.dom,r),Nr(ur(e,"style").map(Ja),"")&&Ht(e,"style")},jc=e=>e.dom.offsetWidth,Po=(e,r)=>{const a=m=>{const g=r(m);if(g<=0||null===g){const h=Zr(m,e);return parseFloat(h)||0}return g},l=(m,g)=>qt(g,(h,v)=>{const y=Zr(m,v),_=void 0===y?0:parseInt(y,10);return isNaN(_)?h:h+_},0);return{set:(m,g)=>{if(!qo(g)&&!g.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+g);const h=m.dom;Ss(h)&&(h.style[e]=g+"px")},get:a,getOuter:a,aggregate:l,max:(m,g,h)=>{const v=l(m,h);return g>v?g-v:0}}},hu=Po("height",e=>{const r=e.dom;return ps(e)?r.getBoundingClientRect().height:r.offsetHeight}),gr=e=>hu.get(e),Ra=e=>hu.getOuter(e),Ts=(e,r)=>({left:e,top:r,translate:(a,l)=>Ts(e+a,r+l)}),Go=Ts,$c=(e,r)=>void 0!==e?e:void 0!==r?r:0,ca=e=>{const r=e.dom.ownerDocument,a=r.body,l=r.defaultView,m=r.documentElement;if(a===e.dom)return Go(a.offsetLeft,a.offsetTop);const g=$c(l?.pageYOffset,m.scrollTop),h=$c(l?.pageXOffset,m.scrollLeft),v=$c(m.clientTop,a.clientTop),y=$c(m.clientLeft,a.clientLeft);return ml(e).translate(h-y,g-v)},ml=e=>{const r=e.dom,a=r.ownerDocument.body;return a===r?Go(a.offsetLeft,a.offsetTop):ps(e)?(l=>{const m=l.getBoundingClientRect();return Go(m.left,m.top)})(r):Go(0,0)},uc=Po("width",e=>e.dom.offsetWidth),ln=e=>uc.get(e),jr=e=>uc.getOuter(e),Rr=e=>{let r,a=!1;return(...l)=>(a||(a=!0,r=e.apply(null,l)),r)},Da=()=>gl(0,0),gl=(e,r)=>({major:e,minor:r}),Cr={nu:gl,detect:(e,r)=>{const a=String(r).toLowerCase();return 0===e.length?Da():((l,m)=>{const g=((v,y)=>{for(let _=0;_<v.length;_++){const k=v[_];if(k.test(y))return k}})(l,m);if(!g)return{major:0,minor:0};const h=v=>Number(m.replace(g,"$"+v));return gl(h(1),h(2))})(e,a)},unknown:Da},_m=(e,r)=>{const a=String(r).toLowerCase();return Ee(e,l=>l.search(a))},Wc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,da=e=>r=>_r(r,e),fu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>_r(e,"edge/")&&_r(e,"chrome")&&_r(e,"safari")&&_r(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Wc],search:e=>_r(e,"chrome")&&!_r(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>_r(e,"msie")||_r(e,"trident")},{name:"Opera",versionRegexes:[Wc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:da("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:da("firefox")},{name:"Safari",versionRegexes:[Wc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(_r(e,"safari")||_r(e,"mobile/"))&&_r(e,"applewebkit")}],Yg=[{name:"Windows",search:da("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>_r(e,"iphone")||_r(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:da("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:da("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:da("linux"),versionRegexes:[]},{name:"Solaris",search:da("sunos"),versionRegexes:[]},{name:"FreeBSD",search:da("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:da("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Cm={browsers:ee(fu),oses:ee(Yg)},wd="Chromium",pl="Firefox",Vi=e=>{const r=e.current,l=m=>()=>r===m;return{current:r,version:e.version,isEdge:l("Edge"),isChromium:l(wd),isIE:l("IE"),isOpera:l("Opera"),isFirefox:l(pl),isSafari:l("Safari")}},nr=()=>Vi({current:void 0,version:Cr.unknown()}),Ba=Vi,re=(ee("Edge"),ee(wd),ee("IE"),ee("Opera"),ee(pl),ee("Safari"),"Windows"),qc="Android",_d="Solaris",Qo="FreeBSD",Ui="ChromeOS",Cd=e=>{const r=e.current,l=m=>()=>r===m;return{current:r,version:e.version,isWindows:l(re),isiOS:l("iOS"),isAndroid:l(qc),isMacOS:l("macOS"),isLinux:l("Linux"),isSolaris:l(_d),isFreeBSD:l(Qo),isChromeOS:l(Ui)}},ni=()=>Cd({current:void 0,version:Cr.unknown()}),Vl=Cd,Ma=(ee(re),ee("iOS"),ee(qc),ee("Linux"),ee("macOS"),ee(_d),ee(Qo),ee(Ui),e=>window.matchMedia(e).matches);var Gc;let bu=Rr(()=>((e,r,a)=>{const l=Cm.browsers(),m=Cm.oses(),g=r.bind(y=>{return _=l,Ps(y.brands,E=>{const A=E.brand.toLowerCase();return Ee(_,B=>{var L;return A===(null===(L=B.brand)||void 0===L?void 0:L.toLowerCase())}).map(B=>({current:B.name,version:Cr.nu(parseInt(E.version,10),0)}))});var _}).orThunk(()=>{return _m(l,_=e).map(k=>{const E=Cr.detect(k.versionRegexes,_);return{current:k.name,version:E}});var _}).fold(nr,Ba),h=(y=m,_=e,_m(y,_).map(k=>{const E=Cr.detect(k.versionRegexes,_);return{current:k.name,version:E}})).fold(ni,Vl),v=((y,_,k,E)=>{const A=y.isiOS()&&!0===/ipad/i.test(k),B=y.isiOS()&&!A,L=y.isiOS()||y.isAndroid(),G=L||E("(pointer:coarse)"),K=A||!B&&L&&E("(min-device-width:768px)"),Q=B||L&&!K,W=_.isSafari()&&y.isiOS()&&!1===/safari/i.test(k),z=!Q&&!K&&!W;return{isiPad:ee(A),isiPhone:ee(B),isTablet:ee(K),isPhone:ee(Q),isTouch:ee(G),isAndroid:y.isAndroid,isiOS:y.isiOS,isWebView:ee(W),isDesktop:ee(z)}})(h,g,e,a);var y,_;return{browser:g,os:h,deviceType:v}})(navigator.userAgent,N.from(navigator.userAgentData),Ma));const ta=()=>bu(),Kc=e=>{const r=oe((g=>{if(dc()&&vt(g.target)){const h=oe(g.target);if(ho(h)&&vt(h.dom.shadowRoot)&&g.composed&&g.composedPath){const v=g.composedPath();if(v)return cr(v)}}return N.from(g.target)})(e).getOr(e.target)),a=()=>e.stopPropagation(),l=()=>e.preventDefault(),m=An(l,a);return{target:r,x:e.clientX,y:e.clientY,stop:a,prevent:l,kill:m,raw:e}},ji=(e,r,a,l,m)=>{const g=(h=a,v=l,y=>{h(y)&&v(Kc(y))});var h,v;return e.dom.addEventListener(r,g,m),{unbind:Xn(vu,e,r,g,m)}},vu=(e,r,a,l)=>{e.dom.removeEventListener(r,a,l)},pr=(e,r)=>{Zs(e).each(a=>{a.dom.insertBefore(r.dom,e.dom)})},gc=(e,r)=>{var l;(l=e,N.from(l.dom.nextSibling).map(oe)).fold(()=>{Zs(e).each(l=>{Os(l,r)})},l=>{pr(l,r)})},yu=(e,r)=>{zc(e).fold(()=>{Os(e,r)},a=>{e.dom.insertBefore(r.dom,a.dom)})},Os=(e,r)=>{e.dom.appendChild(r.dom)},pc=(e,r)=>{yt(r,a=>{Os(e,a)})},Yc=e=>{e.dom.textContent="",yt(Ti(e),r=>{Oi(r)})},Oi=e=>{const r=e.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},$r=e=>{const r=void 0!==e?e.dom:document;return Go(r.body.scrollLeft||r.documentElement.scrollLeft,r.body.scrollTop||r.documentElement.scrollTop)},hl=(e,r,a)=>{const l=(void 0!==a?a.dom:document).defaultView;l&&l.scrollTo(e,r)},xu=(e,r,a,l)=>({x:e,y:r,width:a,height:l,right:e+a,bottom:r+l}),Sm=e=>{const r=void 0===e?window:e,l=$r(oe(r.document));return(m=>{const g=void 0===m?window:m;return ta().browser.isFirefox()?N.none():N.from(g.visualViewport)})(r).fold(()=>{const m=r.document.documentElement;return xu(l.left,l.top,m.clientWidth,m.clientHeight)},m=>xu(Math.max(m.pageLeft,l.left),Math.max(m.pageTop,l.top),m.width,m.height))},wu=()=>oe(document),km=(e,r)=>e.view(r).fold(ee([]),a=>{const l=e.owner(a),m=km(e,l);return[a].concat(m)});var Xc=Object.freeze({__proto__:null,view:e=>{var r;return(e.dom===document?N.none():N.from(null===(r=e.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(oe)},owner:e=>Qr(e)});const Sd=e=>{const r=wu(),a=$r(r);return((m,g)=>{const h=g.owner(m),v=km(g,h);return N.some(v)})(e,Xc).fold(Xn(ca,e),m=>{const g=ml(e),h=Wo(m,(v,y)=>{const _=ml(y);return{left:v.left+_.left,top:v.top+_.top}},{left:0,top:0});return Go(h.left+g.left+a.left,h.top+g.top+a.top)})},Hn=(e,r,a,l)=>({x:e,y:r,width:a,height:l,right:e+a,bottom:r+l}),hr=e=>{const r=ca(e),a=jr(e),l=Ra(e);return Hn(r.left,r.top,a,l)},Ul=e=>{const r=Sd(e),a=jr(e),l=Ra(e);return Hn(r.left,r.top,a,l)},$i=(e,r)=>{const a=Math.max(e.x,r.x),l=Math.max(e.y,r.y),m=Math.min(e.right,r.right),g=Math.min(e.bottom,r.bottom);return Hn(a,l,m-a,g-l)},Sr=()=>Sm(window);var fl=tinymce.util.Tools.resolve("tinymce.ThemeManager");const bl=e=>{const r=g=>g(e),a=ee(e),l=()=>m,m={tag:!0,inner:e,fold:(g,h)=>h(e),isValue:un,isError:Ve,map:g=>ko.value(g(e)),mapError:l,bind:r,exists:r,forall:r,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(e)},toOptional:()=>N.some(e)};return m},kd=e=>{const r=()=>a,a={tag:!1,inner:e,fold:(l,m)=>l(e),isValue:Ve,isError:un,map:r,mapError:l=>ko.error(l(e)),bind:r,exists:Ve,forall:un,getOr:ut,or:ut,getOrThunk:Fl,orThunk:Fl,getOrDie:lr(String(e)),each:Qe,toOptional:N.none};return a},ko={value:bl,error:kd,fromOption:(e,r)=>e.fold(()=>kd(r),bl)};var ya,e;(e=ya||(ya={}))[e.Error=0]="Error",e[e.Value=1]="Value";const _u=(e,r,a)=>e.stype===ya.Error?r(e.serror):a(e.svalue),Ed=e=>({stype:ya.Value,svalue:e}),As=e=>({stype:ya.Error,serror:e}),jl=Ed,Wi=As,hc=_u,fc=(e,r,a,l)=>({tag:"field",key:e,newKey:r,presence:a,prop:l}),kr=(e,r,a)=>{switch(e.tag){case"field":return r(e.key,e.newKey,e.presence,e.prop);case"custom":return a(e.newKey,e.instantiator)}},ri=e=>(...r)=>{if(0===r.length)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<r.length;l++){const m=r[l];for(const g in m)vo(m,g)&&(a[g]=e(a[g],m[g]))}return a},Dn=ri((e,r)=>Ta(e)&&Ta(r)?Dn(e,r):r),I=ri((e,r)=>r),V=e=>({tag:"defaultedThunk",process:e}),j=e=>V(ee(e)),X=e=>({tag:"mergeWithThunk",process:e}),le=e=>{const r=(l=>{const m=[],g=[];return yt(l,h=>{_u(h,v=>g.push(v),v=>m.push(v))}),{values:m,errors:g}})(e);return r.errors.length>0?(a=r.errors,An(Wi,Rt)(a)):jl(r.values);var a},be=e=>ms(e)&&Rn(e).length>100?" removed due to size":JSON.stringify(e,null,2),Pe=(e,r)=>Wi([{path:e,getErrorInfo:r}]),Ge=e=>({extract:(r,a)=>{return(l=e(a)).stype===ya.Error?(l=>Pe(r,ee(l)))(l.serror):l;var l},toString:ee("val")}),We=Ge(jl),Ke=(e,r,a,l)=>l(lt(e,r).getOrThunk(()=>a(e))),mt=(e,r,a,l,m)=>{const g=v=>m.extract(r.concat([l]),v),h=v=>v.fold(()=>jl(N.none()),y=>{return(_=m.extract(r.concat([l]),y)).stype===ya.Value?{stype:ya.Value,svalue:(0,N.some)(_.svalue)}:_;var _});switch(e.tag){case"required":return v=r,k=g,lt(y=a,_=l).fold(()=>{return A=_,B=y,Pe(v,()=>'Could not find valid *required* value for "'+A+'" in '+be(B));var A,B},k);case"defaultedThunk":return Ke(a,l,e.process,g);case"option":return((v,y,_)=>_(lt(v,y)))(a,l,h);case"defaultedOptionThunk":return((v,y,_,k)=>k(lt(v,y).map(E=>!0===E?_(v):E)))(a,l,e.process,h);case"mergeWithThunk":return Ke(a,l,ee({}),v=>{const y=Dn(e.process(a),v);return g(y)})}var v,y,_,k},ct=e=>({extract:(r,a)=>e().extract(r,a),toString:()=>e().toString()}),Ct=e=>{const r=je(e),a=Wo(e,(l,m)=>kr(m,g=>Dn(l,{[g]:!0}),ee(l)),{});return{extract:(l,m)=>{const g=Js(m)?[]:(e=>Rn(sc(e,vt)))(m),h=st(g,v=>!zr(a,v));return 0===h.length?r.extract(l,m):(y=h,Pe(l,()=>"There are unsupported fields: ["+y.join(", ")+"] specified"));var y},toString:r.toString}},je=e=>({extract:(r,a)=>((l,m,g)=>{const h={},v=[];for(const y of g)kr(y,(_,k,E,A)=>{const B=mt(E,l,m,_,A);hc(B,L=>{v.push(...L)},L=>{h[k]=L})},(_,k)=>{h[_]=k(m)});return v.length>0?Wi(v):jl(h)})(r,a,e),toString:()=>"obj{\n"+Je(e,a=>kr(a,(l,m,g,h)=>l+" -> "+h.toString(),(l,m)=>"state("+l+")")).join("\n")+"}"}),Do=e=>({extract:(r,a)=>{const l=Je(a,(m,g)=>e.extract(r.concat(["["+g+"]"]),m));return le(l)},toString:()=>"array("+e.toString()+")"}),St=(e,r)=>{const a=void 0!==r?r:ut;return{extract:(l,m)=>{const g=[];for(const h of e){const v=h.extract(l,m);if(v.stype===ya.Value)return{stype:ya.Value,svalue:a(v.svalue)};g.push(v)}return le(g)},toString:()=>"oneOf("+Je(e,l=>l.toString()).join(", ")+")"}},U=An(Do,je),w=ee(We),M=(e,r)=>Ge(a=>{const l=typeof a;return e(a)?jl(a):Wi(`Expected type: ${r} but got: ${l}`)}),J=M(qo,"number"),ge=M(So,"string"),he=M(Js,"boolean"),Be=M(an,"function"),qe=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(r=>qe(e[r]));default:return!1}},Te=Ge(e=>qe(e)?jl(e):Wi("Expected value to be acceptable for sending via postMessage")),Dt=(e,r)=>({extract:(a,l)=>lt(l,e).fold(()=>{return g=e,Pe(a,()=>'Choice schema did not contain choice key: "'+g+'"');var g},m=>{return g=a,h=l,lt(v=r,y=m).fold(()=>{return k=v,E=y,Pe(g,()=>'The chosen schema: "'+E+'" did not exist in branches: '+be(k));var k,E},_=>_.extract(g.concat(["branch: "+y]),h));var g,h,v,y}),toString:()=>"chooseOn("+e+"). Possible values: "+Rn(r)}),Vt=e=>Ge(r=>e(r).fold(Wi,jl)),Et=(e,r)=>((e,r)=>({extract:(a,l)=>{const m=Rn(l);var h,v;return((h,v)=>h.stype===ya.Value?(h=>{const v=Je(h,y=>fc(y,y,{tag:"required",process:{}},r));return je(v).extract(a,l)})(h.svalue):h)((h=a,v=m,Do(Ge(e)).extract(h,v)))},toString:()=>"setOf("+r.toString()+")"}))(a=>e(a).fold(As,Ed),r),Xt=(e,r,a)=>{return l=(v=r.extract([e],h=a)).stype===ya.Error?{stype:ya.Error,serror:(v=>({input:h,errors:v}))(v.serror)}:v,_u(l,ko.error,ko.value);var h,v,l},bo=e=>e.fold(r=>{throw new Error(yo(r))},ut),co=(e,r,a)=>bo(Xt(e,r,a)),yo=e=>"Errors: \n"+(r=>{const a=r.length>10?r.slice(0,10).concat([{path:[],getErrorInfo:ee("... (only showing first ten failures)")}]):r;return Je(a,l=>"Failed path: ("+l.path.join(" > ")+")\n"+l.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+be(e.input),xo=(e,r)=>Dt(e,pn(r,je)),$n=(e,r)=>((a,l)=>{const m=Rr(l);return{extract:(g,h)=>m().extract(g,h),toString:()=>m().toString()}})(0,r),Ae=fc,Oo=(e,r)=>({tag:"custom",newKey:e,instantiator:r}),Bn=e=>Vt(r=>wo(e,r)?ko.value(r):ko.error(`Unsupported value: "${r}", choose one of "${e.join(", ")}".`)),_e=e=>Ae(e,e,{tag:"required",process:{}},w()),Bo=(e,r)=>Ae(e,e,{tag:"required",process:{}},r),Wn=e=>Bo(e,J),Ft=e=>Bo(e,ge),hn=(e,r)=>Ae(e,e,{tag:"required",process:{}},Bn(r)),on=e=>Bo(e,Be),zo=(e,r)=>Ae(e,e,{tag:"required",process:{}},je(r)),Ia=(e,r)=>Ae(e,e,{tag:"required",process:{}},U(r)),rr=(e,r)=>Ae(e,e,{tag:"required",process:{}},Do(r)),fo=e=>Ae(e,e,{tag:"option",process:{}},w()),Wr=(e,r)=>Ae(e,e,{tag:"option",process:{}},r),es=e=>Wr(e,J),fr=e=>Wr(e,ge),Pa=(e,r)=>Wr(e,Bn(r)),Vn=e=>Wr(e,Be),bs=(e,r)=>Wr(e,Do(r)),cn=(e,r)=>Wr(e,je(r)),fe=(e,r)=>Ae(e,e,j(r),w()),Dr=(e,r,a)=>Ae(e,e,j(r),a),La=(e,r)=>Dr(e,r,J),oa=(e,r)=>Dr(e,r,ge),qi=(e,r,a)=>Dr(e,r,Bn(a)),is=(e,r)=>Dr(e,r,he),Qn=(e,r)=>Dr(e,r,Be),Td=(e,r,a)=>Dr(e,r,Do(a)),Od=(e,r,a)=>Dr(e,r,je(a)),Ot=e=>{let r=e;return{get:()=>r,set:a=>{r=a}}},xa=e=>{if(!On(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const r=[],a={};return yt(e,(l,m)=>{const g=Rn(l);if(1!==g.length)throw new Error("one and only one name per case");const h=g[0],v=l[h];if(void 0!==a[h])throw new Error("duplicate key detected:"+h);if("cata"===h)throw new Error("cannot have a case named cata (sorry)");if(!On(v))throw new Error("case arguments must be an array");r.push(h),a[h]=(...y)=>{const _=y.length;if(_!==v.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+v.length+" ("+v+"), got "+_);return{fold:(...k)=>{if(k.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+k.length);return k[m].apply(null,y)},match:k=>{const E=Rn(k);if(r.length!==E.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+E.join(","));if(!Qs(r,A=>wo(E,A)))throw new Error("Not all branches were specified when using match. Specified: "+E.join(", ")+"\nRequired: "+r.join(", "));return k[h].apply(null,y)},log:k=>{console.log(k,{constructors:r,constructor:h,params:y})}}}}),a};xa([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Fa=(e,r)=>({[e]:r}),Er=e=>(r=>{const a={};return yt(r,l=>{a[l.key]=l.value}),a})(e),Cu=e=>an(e)?e:Ve,wa=(e,r,a)=>{let l=e.dom;const m=Cu(a);for(;l.parentNode;){l=l.parentNode;const g=oe(l),h=r(g);if(h.isSome())return h;if(m(g))break}return N.none()},Xg=(e,r,a)=>{const l=r(e),m=Cu(a);return l.orThunk(()=>m(e)?N.none():wa(e,r,m))},Ad=(e,r)=>Jo(e.element,r.event.target),Gi={can:un,abort:Ve,run:Qe},_a=e=>{if(!zr(e,"can")&&!zr(e,"abort")&&!zr(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Gi,...e}},Mn=ee,vl=Mn("touchstart"),bc=Mn("touchmove"),$l=Mn("touchend"),Su=Mn("touchcancel"),ua=Mn("mousedown"),Nd=Mn("mousemove"),Jg=Mn("mouseout"),Qg=Mn("mouseup"),yl=Mn("mouseover"),Wl=Mn("focusin"),eE=Mn("focusout"),vc=Mn("keydown"),tE=Mn("keyup"),Em=Mn("input"),Zg=Mn("change"),Ca=Mn("click"),sw=Mn("transitioncancel"),ep=Mn("transitionend"),KR=Mn("transitionstart"),ku=Mn("selectstart"),qr=e=>ee("alloy."+e),oE={tap:qr("tap")},Rd=qr("focus"),tp=qr("blur.post"),aw=qr("paste.post"),Tm=qr("receive"),Ki=qr("execute"),Sh=qr("focus.item"),br=oE.tap,Om=qr("longpress"),op=qr("sandbox.close"),av=qr("typeahead.cancel"),iv=qr("system.init"),lv=qr("system.touchmove"),iw=qr("system.touchend"),cv=qr("system.scroll"),kh=qr("system.resize"),yc=qr("system.attached"),np=qr("system.detached"),Dd=qr("system.dismissRequested"),nE=qr("system.repositionRequested"),rp=qr("focusmanager.shifted"),Eh=qr("slotcontainer.visibility"),dv=qr("system.external.element.scroll"),Eu=qr("change.tab"),rE=qr("dismiss.tab"),Th=qr("highlight"),lw=qr("dehighlight"),nn=(e,r)=>{mv(e,e.element,r,{})},Bt=(e,r,a)=>{mv(e,e.element,r,a)},Tu=e=>{nn(e,Ki())},uv=(e,r,a)=>{mv(e,r,a,{})},mv=(e,r,a,l)=>{const m={target:r,...l};e.getSystem().triggerEvent(a,r,m)},cw=(e,r,a,l)=>{e.getSystem().triggerEvent(a,r,l.event)},Cn=e=>Er(e),sE=(e,r)=>({key:e,value:_a({abort:r})}),Oh=e=>({key:e,value:_a({run:(r,a)=>{a.event.prevent()}})}),Me=(e,r)=>({key:e,value:_a({run:r})}),dw=(e,r,a)=>({key:e,value:_a({run:(l,m)=>{r.apply(void 0,[l,m].concat(a))}})}),gv=e=>r=>({key:e,value:_a({run:(a,l)=>{Ad(a,l)&&r(a,l)}})}),sp=(e,r,a)=>{return m=r.partUids[a],Me(l=e,(g,h)=>{g.getSystem().getByUid(m).each(v=>{cw(v,v.element,l,h)})});var l,m},Bd=(e,r)=>Me(e,(a,l)=>{const m=l.event,g=a.getSystem().getByDom(m.target).getOrThunk(()=>Xg(m.target,h=>a.getSystem().getByDom(h).toOptional(),Ve).getOr(a));r(a,g,l)}),Am=e=>Me(e,(r,a)=>{a.cut()}),aE=e=>Me(e,(r,a)=>{a.stop()}),Ou=(e,r)=>gv(e)(r),qn=gv(yc()),xc=gv(np()),uw=gv(iv()),si=(pv=Ki(),e=>Me(pv,e)),Fs=e=>e.dom.innerHTML,Nm=(e,r)=>{const a=Qr(e).dom,l=oe(a.createDocumentFragment()),m=((g,h)=>{const v=(h||document).createElement("div");return v.innerHTML=g,Ti(oe(v))})(r,a);pc(l,m),Yc(e),Os(e,l)},Ah=(e,r)=>oe(e.dom.cloneNode(r)),ql=e=>{return Hc(r=e)?"#shadow-root":(l=>{const m=Ls("div"),g=oe(l.dom.cloneNode(!0));return Os(m,g),Fs(m)})(Ah(r,!1));var r},wc=Cn([((e,r)=>({key:e,value:_a({can:(a,l)=>{const m=l.event,g=m.originator,h=m.target;return _=h,!(Jo(y=g,a.element)&&!Jo(y,_)&&(console.warn(Rd()+" did not get interpreted by the desired target. \nOriginator: "+ql(g)+"\nTarget: "+ql(h)+"\nCheck the "+Rd()+" event handlers"),1));var y,_}})}))(Rd())]);var pv,iE=Object.freeze({__proto__:null,events:wc});let mw=0;const bt=e=>{const r=(new Date).getTime(),a=Math.floor(1e9*Math.random());return mw++,e+"_"+a+mw+String(r)},gw=ee("alloy-id-"),Au=ee("data-alloy-id"),pw=gw(),lE=Au(),hw=(e,r)=>{Object.defineProperty(e.dom,lE,{value:r,writable:!0})},Nh=e=>{const r=ho(e)?e.dom[lE]:null;return N.from(r)},Rm=e=>bt(e),cE=ut,Rh=e=>{const r=m=>`The component must be in a context to execute: ${m}`+(e?"\n"+ql(e().element)+" is not in context.":""),a=m=>()=>{throw new Error(r(m))},l=m=>()=>{console.warn(r(m))};return{debugInfo:ee("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Ve}},YR=Rh(),Dm=e=>Je(e,r=>Ei(r,"/*")?r.substring(0,r.length-2):r),Dh=(e,r)=>{const a=e.toString(),l=a.indexOf(")")+1,m=a.indexOf("("),g=a.substring(m+1,l-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:r,parameters:Dm(g)}),e},hv=bt("alloy-premade"),fw=e=>(Object.defineProperty(e.element.dom,hv,{value:e.uid,writable:!0}),Fa(hv,e)),fv=e=>lt(e,hv),bv=e=>((r,a)=>{const l=a.toString(),m=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,m-1).split(/,\s*/);return r.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Dm(h.slice(1))}),r})((r,...a)=>e(r.getApis(),r,...a),e),xl={init:()=>za({readState:ee("No State required")})},za=e=>e,ap=(e,r)=>{const a={};return gn(e,(l,m)=>{gn(l,(g,h)=>{const v=lt(a,h).getOr([]);a[h]=v.concat([r(m,g)])})}),a},_c=e=>({classes:sn(e.classes)?[]:e.classes,attributes:sn(e.attributes)?{}:e.attributes,styles:sn(e.styles)?{}:e.styles}),Md=e=>e.cHandler,bw=(e,r)=>({name:e,handler:r}),XR=(e,r)=>{const a={};return yt(e,l=>{a[l.name()]=l.handlers(r)}),a},Cc="alloy.base.behaviour",dE=je([Ae("dom","dom",{tag:"required",process:{}},je([_e("tag"),fe("styles",{}),fe("classes",[]),fe("attributes",{}),fo("value"),fo("innerHtml")])),_e("components"),_e("uid"),fe("events",{}),fe("apis",{}),Ae("eventOrder","eventOrder",(dp={[Ki()]:["disabling",Cc,"toggling","typeaheadevents"],[Rd()]:[Cc,"focusing","keying"],[iv()]:[Cc,"disabling","toggling","representing"],[Em()]:[Cc,"representing","streaming","invalidating"],[np()]:[Cc,"representing","item-events","tooltipping"],[ua()]:["focusing",Cc,"item-type-events"],[vl()]:["focusing",Cc,"item-type-events"],[yl()]:["item-type-events","tooltipping"],[Tm()]:["receiving","reflecting","tooltipping"]},X(ee(dp))),w()),fo("domModification")]),ip=e=>e.events,vv=(e,r)=>{const a=zn(e,r);return void 0===a||""===a?[]:a.split(" ")},Bm=e=>void 0!==e.dom.classList,Sn=e=>vv(e,"class"),uE=(e,r)=>((a,l,m)=>{const g=vv(a,l).concat([m]);return ro(a,l,g.join(" ")),!0})(e,"class",r),Jc=(e,r)=>((a,l,m)=>{const g=st(vv(a,l),h=>h!==m);return g.length>0?ro(a,l,g.join(" ")):Ht(a,l),!1})(e,"class",r),Zo=(e,r)=>{Bm(e)?e.dom.classList.add(r):uE(e,r)},lp=e=>{0===(Bm(e)?e.dom.classList:Sn(e)).length&&Ht(e,"class")},sr=(e,r)=>{Bm(e)?e.dom.classList.remove(r):Jc(e,r),lp(e)},Ha=(e,r)=>Bm(e)&&e.dom.classList.contains(r),Va=(e,r)=>{yt(r,a=>{Zo(e,a)})},Tr=(e,r)=>{yt(r,a=>{sr(e,a)})},mE=e=>Bm(e)?(r=>{const a=r.dom.classList,l=new Array(a.length);for(let m=0;m<a.length;m++){const g=a.item(m);null!==g&&(l[m]=g)}return l})(e):Sn(e),ai=e=>e.dom.value,Qc=(e,r)=>{if(void 0===r)throw new Error("Value.set was undefined");e.dom.value=r},yv=(e,r,a)=>{a.fold(()=>Os(e,r),l=>{Jo(l,r)||(pr(l,r),Oi(l))})},cp=(e,r,a)=>{const l=Je(r,a),m=Ti(e);return yt(m.slice(l.length),Oi),l},Nu=(e,r,a,l)=>{const m=ul(e,r),g=l(a,m),h=(_=m,ul(e,r).map(k=>{if(_.exists(E=>!Jo(E,k))){const E=_.map(nt).getOr("span"),A=Ls(E);return pr(k,A),A}return k}));var _;return yv(e,g.element,h),g},Mm=(e,r)=>{const a=Rn(e),l=Rn(r);return{toRemove:Is(l,a),toSet:((h,v)=>{const y={},_={};return as(h,(k,E)=>!vo(r,E)||k!==r[E],Xa(y),Xa(_)),{t:y,f:_}})(e).t}},Ih=(e,r)=>{const a=()=>A,l=Ot(YR),m=bo(Xt("custom.definition",dE,e)),g=(e=>{const r=(a=>{const l=lt(a,"behaviours").getOr({});return ft(Rn(l),m=>{const g=l[m];return vt(g)?[g.me]:[]})})(e);return((m,g)=>{const h=Je(g,y=>cn(y.name(),[_e("config"),fe("state",xl)])),v=Xt("component.behaviours",je(h),m.behaviours).fold(y=>{throw new Error(yo(y)+"\nComplete spec:\n"+JSON.stringify(m,null,2))},ut);return{list:g,data:pn(v,y=>{const _=y.map(k=>({config:k.config,state:k.state.init(k.config)}));return ee(_)})}})(e,r)})(e),h=g.list,v=(B=>B.data)(g),y=((B,L,G)=>{const K={...(Q=B).dom,uid:Q.uid,domChildren:Je(Q.components,ae=>ae.element)};var Q;const W=B.domModification.fold(()=>_c({}),_c);var Z,te;return Z=K,te=L.length>0?((ae,Ce,De,Fe)=>{const Ie={...Ce};yt(De,Ao=>{Ie[Ao.name()]=Ao.exhibit(ae,Fe)});const ot=ap(Ie,(Ao,Pn)=>({name:Ao,modification:Pn})),ht=Ao=>Wo(Ao,(Pn,ir)=>({...ir.modification,...Pn}),{}),At=Wo(ot.classes,(Ao,Pn)=>Pn.modification.concat(Ao),[]),Qt=ht(ot.attributes),oo=ht(ot.styles);return _c({classes:At,attributes:Qt,styles:oo})})(G,{"alloy.base.modification":W},L,K):W,{...Z,attributes:{...Z.attributes,...te.attributes},styles:{...Z.styles,...te.styles},classes:Z.classes.concat(te.classes)}})(m,h,v),_=((e,r)=>{const a=r.filter(l=>{return!(nt(l)!==e.tag||(m=e,m.innerHtml.isSome()&&m.domChildren.length>0)||(m=>vo(m.dom,hv))(l));var m}).bind(l=>((m,g)=>{try{const h=((v,y)=>{const{class:_,style:k,...E}=qt(y.dom.attributes,(Z,te)=>(Z[te.name]=te.value,Z),{}),{toSet:A,toRemove:B}=Mm(v.attributes,E),L=wm(y),{toSet:G,toRemove:K}=Mm(v.styles,L),Q=mE(y),W=Is(Q,v.classes),z=Is(v.classes,Q);return yt(B,Y=>Ht(y,Y)),hs(y,A),Va(y,z),Tr(y,W),yt(K,Y=>mn(y,Y)),$e(y,G),v.innerHtml.fold(()=>{var Z;cp(Z=y,v.domChildren,(ae,Ce)=>{const De=ul(Z,Ce);return yv(Z,ae,De),ae})},Y=>{Nm(y,Y)}),(()=>{const Y=y,Z=v.value.getOrUndefined();Z!==ai(Y)&&Qc(Y,Z??"")})(),y})(m,g);return N.some(h)}catch{return N.none()}})(e,l)).getOrThunk(()=>(l=>{const m=Ls(l.tag);return hs(m,l.attributes),Va(m,l.classes),$e(m,l.styles),l.innerHtml.each(h=>Nm(m,h)),pc(m,l.domChildren),l.value.each(h=>{Qc(m,h)}),m})(e));return hw(a,e.uid),a})(y,r),k=((B,L,G)=>{const K={"alloy.base.behaviour":ip(B)};return(Q=G,W=B.eventOrder,z=L,Y=K,((e,r)=>((a,l)=>{const m=(h=>{const v=[],y=[];return yt(h,_=>{_.fold(k=>{v.push(k)},k=>{y.push(k)})}),{errors:v,values:y}})(a);return m.errors.length>0?ko.error(Rt(m.errors)):(v={},ko.value(0===(h=m.values).length?v:Dn(v,I.apply(void 0,h))));var h,v})(Yo(e,(a,l)=>(1===a.length?ko.value(a[0].handler):((e,r,a)=>{const l=r[a];return l?((m,g,h,v)=>{try{const y=Ci(h,(_,k)=>{const E=_[g],A=k[g],B=v.indexOf(E),L=v.indexOf(A);if(-1===B)throw new Error("The ordering for "+m+" does not have an entry for "+E+".\nOrder specified: "+JSON.stringify(v,null,2));if(-1===L)throw new Error("The ordering for "+m+" does not have an entry for "+A+".\nOrder specified: "+JSON.stringify(v,null,2));return B<L?-1:L<B?1:0});return ko.value(y)}catch(y){return ko.error([y])}})("Event: "+a,"name",e,l).map(m=>(g=>{const h=(y=g,(...k)=>qt(y,(E,A)=>{return E&&(B=A,B.can).apply(void 0,k);var B},!0)),v=((y,_)=>(...k)=>qt(y,(E,A)=>{return E||(B=A,B.abort).apply(void 0,k);var B},!1))(g);var y;return{can:h,abort:v,run:(...y)=>{yt(g,_=>{_.run.apply(void 0,y)})}}})(Je(m,g=>g.handler))):ko.error(["The event ("+a+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Je(e,h=>h.name),null,2)])})(a,r,l)).map(m=>{const g=(v=>{const y=an(_=v)?{can:un,abort:Ve,run:_}:_;var _;return(_,k,...E)=>{const A=[_,k].concat(E);y.abort.apply(void 0,A)?k.stop():y.can.apply(void 0,A)&&y.run.apply(void 0,A)}})(m),h=a.length>1?st(r[l],v=>Vo(a,y=>y.name===v)).join(" > "):a[0].name;return Fa(l,{handler:g,purpose:h})}))))(((te,ae,Ce)=>{const De={...Ce,...XR(ae,te)};return ap(De,bw)})(Q,z,Y),W)).getOrDie();var Q,W,z,Y})(m,h,v),E=Ot(m.components),A={uid:e.uid,getSystem:l.get,config:B=>{const L=v;return(an(L[B.name()])?L[B.name()]:()=>{throw new Error("Could not find "+B.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:B=>an(v[B.name()]),spec:e,readState:B=>v[B]().map(L=>L.state.readState()).getOr("not enabled"),getApis:()=>m.apis,connect:B=>{l.set(B)},disconnect:()=>{l.set(Rh(a))},element:_,syncComponents:()=>{const B=Ti(_),L=ft(B,G=>l.get().getByDom(G).fold(()=>[],la));E.set(L)},components:E.get,events:k};return A},Or=e=>{const r=xe(e);return yw({element:r})},yw=e=>{const r=co("external.component",Ct([_e("element"),fo("uid")]),e),a=Ot(Rh()),l=r.uid.getOrThunk(()=>Rm("external"));hw(r.element,l);const m={uid:l,getSystem:a.get,config:N.none,hasConfigured:Ve,connect:g=>{a.set(g)},disconnect:()=>{a.set(Rh(()=>m))},getApis:()=>({}),element:r.element,spec:e,readState:ee("No state"),syncComponents:Qe,components:ee([]),events:{}};return fw(m)},gE=Rm,xv=(e,r)=>fv(e).getOrThunk(()=>{return((a,l)=>{const{events:m,...g}=cE(a),h=((y,_)=>{const k=lt(y,"components").getOr([]);return _.fold(()=>Je(k,na),E=>Je(k,(A,B)=>xv(A,ul(E,B))))})(g,l),v={...g,events:{...iE,...m},components:h};return ko.value(Ih(v,l))})((a=e,vo(a,"uid")?e:{uid:gE(""),...e}),r).getOrDie();var a}),na=e=>xv(e,N.none()),Yi=fw;var dp,xw=(e,r,a,l,m)=>e(a,l)?N.some(a):an(m)&&m(a)?N.none():r(a,l,m);const Ru=(e,r,a)=>{let l=e.dom;const m=an(a)?a:Ve;for(;l.parentNode;){l=l.parentNode;const g=oe(l);if(r(g))return N.some(g);if(m(g))break}return N.none()},ww=(e,r,a)=>xw((l,m)=>m(l),Ru,e,r,a),_w=(e,r,a)=>ww(e,r,a).isSome(),Xi=(e,r,a)=>Ru(e,l=>or(l,r),a),Du=(e,r)=>Ee(e.dom.childNodes,m=>{return g=oe(m),or(g,r);var g}).map(oe),Gn=(e,r)=>((a,l)=>{const m=void 0===l?document:l.dom;return xn(m)?N.none():N.from(m.querySelector(a)).map(oe)})(r,e),Gl=(e,r,a)=>xw((l,m)=>or(l,m),Xi,e,r,a),up="aria-controls",mp=()=>{const e=bt(up);return{id:e,link:r=>{ro(r,up,e)},unlink:r=>{Ht(r,up)}}},Sc=(e,r)=>{return _w(r,a=>Jo(a,e.element),Ve)||(a=e,(m=r,ww(m,g=>{if(!ho(g))return!1;const h=zn(g,"id");return void 0!==h&&h.indexOf(up)>-1}).bind(g=>{const h=zn(g,"id"),v=Ur(g);return Gn(v,`[${up}="${h}"]`)})).exists(m=>Sc(a,m)));var a,m};var Im;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Im||(Im={}));const gp=Ot({}),Bu=["alloy/data/Fields","alloy/debugging/Debugging"],Cw=(e,r,a)=>((l,m,g)=>{switch(lt(gp.get(),l).orThunk(()=>{const h=Rn(gp.get());return Ps(h,v=>l.indexOf(v)>-1?N.some(gp.get()[v]):N.none())}).getOr(Im.NORMAL)){case Im.NORMAL:return g(pE());case Im.LOGGING:{const h=((y,_)=>{const k=[],E=(new Date).getTime();return{logEventCut:(A,B,L)=>{k.push({outcome:"cut",target:B,purpose:L})},logEventStopped:(A,B,L)=>{k.push({outcome:"stopped",target:B,purpose:L})},logNoParent:(A,B,L)=>{k.push({outcome:"no-parent",target:B,purpose:L})},logEventNoHandlers:(A,B)=>{k.push({outcome:"no-handlers-left",target:B})},logEventResponse:(A,B,L)=>{k.push({outcome:"response",purpose:L,target:B})},write:()=>{const A=(new Date).getTime();wo(["mousemove","mouseover","mouseout",iv()],y)||console.log(y,{event:y,time:A-E,target:_.dom,sequence:Je(k,B=>wo(["cut","stopped","response"],B.outcome)?"{"+B.purpose+"} "+B.outcome+" at ("+ql(B.target)+")":B.outcome)})}}})(l,m),v=g(h);return h.write(),v}case Im.STOP:return!0}})(e,r,a),pE=ee({logEventCut:Qe,logEventStopped:Qe,logNoParent:Qe,logEventNoHandlers:Qe,logEventResponse:Qe,write:Qe}),Sw=ee([_e("menu"),_e("selectedMenu")]),kw=ee([_e("item"),_e("selectedItem")]);ee(je(kw().concat(Sw())));const hE=ee(je(kw())),QR=zo("initSize",[_e("numColumns"),_e("numRows")]),Mu=()=>zo("markers",[_e("backgroundMenu")].concat(Sw()).concat(kw())),Pm=e=>zo("markers",Je(e,_e)),Iu=(e,r,a)=>((()=>{const l=new Error;if(void 0!==l.stack){const m=l.stack.split("\n");Ee(m,g=>g.indexOf("alloy")>0&&!Vo(Bu,h=>g.indexOf(h)>-1)).getOr("unknown")}})(),Ae(r,r,a,Vt(l=>ko.value((...m)=>l.apply(void 0,m))))),Uo=e=>Iu(0,e,j(Qe)),ii=e=>Iu(0,e,j(N.none)),Zc=e=>Iu(0,e,{tag:"required",process:{}}),Ph=e=>Iu(0,e,{tag:"required",process:{}}),In=(e,r)=>Oo(e,ee(r)),Ew=e=>Oo(e,ut),wv=ee(QR),zs=(e,r,a,l,m,g,h,v=!1)=>({x:e,y:r,bubble:a,direction:l,placement:m,restriction:g,label:`${h}-${m}`,alwaysFit:v}),Ai=xa([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ed=Ai.southeast,Oe=Ai.southwest,pp=Ai.northeast,Lh=Ai.northwest,Kl=Ai.south,Tw=Ai.north,Ow=Ai.east,Aw=Ai.west,Pu=(e,r,a,l)=>{const m=e+r;return m>l?a:m<a?l:m},Ni=(e,r,a)=>Math.min(Math.max(e,r),a),Hs=(e,r)=>yn(["left","right","top","bottom"],a=>lt(r,a).map(l=>((m,g)=>{switch(g){case 1:return m.x;case 0:return m.x+m.width;case 2:return m.y;case 3:return m.y+m.height}})(e,l))),Id="layout",Nw=e=>e.x,Fh=(e,r)=>e.x+e.width/2-r.width/2,Rw=(e,r)=>e.x+e.width-r.width,zh=(e,r)=>e.y-r.height,_v=e=>e.y+e.height,Dw=(e,r)=>e.y+e.height/2-r.height/2,Vs=(e,r,a)=>zs(Nw(e),_v(e),a.southeast(),ed(),"southeast",Hs(e,{left:1,top:3}),Id),Us=(e,r,a)=>zs(Rw(e,r),_v(e),a.southwest(),Oe(),"southwest",Hs(e,{right:0,top:3}),Id),Ua=(e,r,a)=>zs(Nw(e),zh(e,r),a.northeast(),pp(),"northeast",Hs(e,{left:1,bottom:2}),Id),ja=(e,r,a)=>zs(Rw(e,r),zh(e,r),a.northwest(),Lh(),"northwest",Hs(e,{right:0,bottom:2}),Id),ra=(e,r,a)=>zs(Fh(e,r),zh(e,r),a.north(),Tw(),"north",Hs(e,{bottom:2}),Id),vs=(e,r,a)=>zs(Fh(e,r),_v(e),a.south(),Kl(),"south",Hs(e,{top:3}),Id),Cv=(e,r,a)=>{return zs((l=e).x+l.width,Dw(e,r),a.east(),Ow(),"east",Hs(e,{left:0}),Id);var l},Sa=(e,r,a)=>zs(e.x-r.width,Dw(e,r),a.west(),Aw(),"west",Hs(e,{right:1}),Id),kc=()=>[Vs,Us,Ua,ja,vs,ra,Cv,Sa],fE=()=>[Us,Vs,ja,Ua,vs,ra,Cv,Sa],bE=()=>[Ua,ja,Vs,Us,ra,vs],vE=()=>[ja,Ua,Us,Vs,ra,vs],Sv=()=>[Vs,Us,Ua,ja,vs,ra],kv=()=>[Us,Vs,ja,Ua,vs,ra];var yE=Object.freeze({__proto__:null,events:e=>Cn([Me(Tm(),(r,a)=>{const l=e.channels,m=Rn(l),g=a,h=(v=m,(y=g).universal?v:st(v,_=>wo(y.channels,_)));var v,y;yt(h,v=>{const y=l[v],_=y.schema,k=co("channel["+v+"] data\nReceiver: "+ql(r.element),_,g.data);y.onReceive(r,k)})})])}),Bw=[Bo("channels",Et(ko.value,Ct([Zc("onReceive"),fe("schema",w())])))];const Mw=(e,r,a)=>uw((l,m)=>{a(l,e,r)}),ZR=e=>({key:e,value:void 0}),Iw=(e,r,a,l,m,g,h)=>{const v=k=>zr(k,a)?k[a]():N.none(),y=pn(m,(k,E)=>{return A=a,((G,K,Q)=>{const W=Q.toString(),z=W.indexOf(")")+1,Y=W.indexOf("("),Z=W.substring(Y+1,z-1).split(/,\s*/);return G.toFunctionAnnotation=()=>({name:K,parameters:Dm(Z.slice(0,1).concat(Z.slice(3)))}),G})((G,...K)=>{const Q=[G].concat(K);return G.config({name:ee(A)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+A+". Using API: "+L)},W=>{const z=Array.prototype.slice.call(Q,1);return B.apply(void 0,[G,W.config,W.state].concat(z))})},L=E,B=k);var A,B,L}),_={...pn(g,(k,E)=>Dh(k,E)),...y,revoke:Xn(ZR,a),config:k=>{const E=co(a+"-config",e,k);return{key:a,value:{config:E,me:_,configAsRaw:Rr(()=>co(a+"-config",e,k)),initialConfig:k,state:h}}},schema:ee(r),exhibit:(k,E)=>Xo(v(k),lt(l,"exhibit"),(A,B)=>B(E,A.config,A.state)).getOrThunk(()=>_c({})),name:ee(a),handlers:k=>v(k).map(E=>lt(l,"events").getOr(()=>({}))(E.config,E.state)).getOr({})};return _},ve=e=>Er(e),Pw=Ct([_e("fields"),_e("name"),fe("active",{}),fe("apis",{}),fe("state",xl),fe("extra",{})]),Ns=e=>{const r=co("Creating behaviour: "+e.name,Pw,e);return((a,l,m,g,h,v)=>{const y=Ct(a),_=cn(l,[(k=a,Wr("config",Ct(k)))]);var k;return Iw(y,_,l,m,g,h,v)})(r.fields,r.name,r.active,r.apis,r.extra,r.state)},eD=Ct([_e("branchKey"),_e("branches"),_e("name"),fe("active",{}),fe("apis",{}),fe("state",xl),fe("extra",{})]),xE=e=>{const r=co("Creating behaviour: "+e.name,eD,e);return((a,l,m,g,h,v)=>{const y=a,_=cn(l,[Wr("config",a)]);return Iw(y,_,l,m,g,h,v)})(xo(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},wE=ee(void 0),Ri=Ns({fields:Bw,name:"receiving",active:yE});var tD=Object.freeze({__proto__:null,exhibit:(e,r)=>_c({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const wl=(e,r=!1)=>e.dom.focus({preventScroll:r}),Lw=e=>e.dom.blur(),Rs=e=>{const r=Ur(e).dom;return e.dom===r.activeElement},Ji=(e=wu())=>N.from(e.dom.activeElement).map(oe),Ec=e=>Ji(Ur(e)).filter(r=>e.dom.contains(r.dom)),Fw=(e,r)=>{const a=Ur(r),l=Ji(a).bind(g=>{const h=v=>Jo(g,v);return h(r)?N.some(r):((v,y)=>{const _=k=>{for(let E=0;E<k.childNodes.length;E++){const A=oe(k.childNodes[E]);if(y(A))return N.some(A);const B=_(k.childNodes[E]);if(B.isSome())return B}return N.none()};return _(v.dom)})(r,h)}),m=e(r);return l.each(g=>{Ji(a).filter(h=>Jo(h,g)).fold(()=>{wl(g)},Qe)}),m},Yl=(e,r,a,l,m)=>{const g=h=>h+"px";return{position:e,left:r.map(g),top:a.map(g),right:l.map(g),bottom:m.map(g)}},_E=(e,r)=>{var a;oi(e,(a=r,{...a,position:N.some(a.position)}))},zw=xa([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Hw=(e,r,a,l,m,g)=>{const h=r.rect,v=h.x-a,y=h.y-l,_=m-(v+h.width),k=g-(y+h.height),E=N.some(v),A=N.some(y),B=N.some(_),L=N.some(k),G=N.none();return r.direction.fold(()=>Yl(e,E,A,G,G),()=>Yl(e,G,A,B,G),()=>Yl(e,E,G,G,L),()=>Yl(e,G,G,B,L),()=>Yl(e,E,A,G,G),()=>Yl(e,E,G,G,L),()=>Yl(e,E,A,G,G),()=>Yl(e,G,A,B,G))},Vw=(e,r)=>e.fold(()=>{const a=r.rect;return Yl("absolute",N.some(a.x),N.some(a.y),N.none(),N.none())},(a,l,m,g)=>Hw("absolute",r,a,l,m,g),(a,l,m,g)=>Hw("fixed",r,a,l,m,g)),Uw=(e,r)=>{const a=Xn(Sd,r),l=e.fold(a,a,()=>{const h=$r();return Sd(r).translate(-h.left,-h.top)}),m=jr(r),g=Ra(r);return Hn(l.left,l.top,m,g)},CE=(e,r)=>r.fold(()=>e.fold(Sr,Sr,Hn),a=>e.fold(ee(a),ee(a),()=>{const l=SE(e,a.x,a.y);return Hn(l.left,l.top,a.width,a.height)})),SE=(e,r,a)=>{const l=Go(r,a);return e.fold(ee(l),ee(l),()=>{const m=$r();return l.translate(-m.left,-m.top)})},oD=zw.relative,nD=zw.fixed,jw="data-alloy-placement",kE=e=>ur(e,jw),Ev=xa([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Tv=e=>{const r=Ot(N.none()),a=()=>r.get().each(e);return{clear:()=>{a(),r.set(N.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{a(),r.set(N.some(l))}}},hp=()=>Tv(e=>e.unbind()),Un=()=>{const e=Tv(Qe);return{...e,on:r=>e.get().each(r)}},EE=un,$a=(e,r,a)=>ji(e,r,EE,a,!1),Ww=(e,r,a)=>ji(e,r,EE,a,!0),qw=Kc,TE=["top","bottom","right","left"],Ov="data-alloy-transition-timer",AE=(e,r)=>{((a,l)=>{const m=hu.max(a,l,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);lo(a,"max-height",m+"px")})(e,Math.floor(r))},NE=ee((e,r)=>{AE(e,r),$e(e,{"overflow-x":"hidden","overflow-y":"auto"})}),Lm=ee((e,r)=>{AE(e,r)}),RE=(e,r,a)=>void 0===e[r]?a:e[r],rD=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Tc=(e,r,a,l=1)=>{const m=e*l,g=r*l,h=y=>lt(a,y).getOr([]),v=(y,_,k)=>{const E=Is(rD,k);return{offset:Go(y,_),classesOn:ft(k,h),classesOff:ft(E,h)}};return{southeast:()=>v(-e,r,["top","alignLeft"]),southwest:()=>v(e,r,["top","alignRight"]),south:()=>v(-e/2,r,["top","alignCentre"]),northeast:()=>v(-e,-r,["bottom","alignLeft"]),northwest:()=>v(e,-r,["bottom","alignRight"]),north:()=>v(-e/2,-r,["bottom","alignCentre"]),east:()=>v(e,-r/2,["valignCentre","left"]),west:()=>v(-e,-r/2,["valignCentre","right"]),insetNortheast:()=>v(m,g,["top","alignLeft","inset"]),insetNorthwest:()=>v(-m,g,["top","alignRight","inset"]),insetNorth:()=>v(-m/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>v(m,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>v(-m,-g,["bottom","alignRight","inset"]),insetSouth:()=>v(-m/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>v(-m,-g/2,["valignCentre","right","inset"]),insetWest:()=>v(m,-g/2,["valignCentre","left","inset"])}},Av=()=>Tc(0,0,{}),Lu=ut,Gw=(e,r)=>a=>"rtl"===sD(a)?r:e,sD=e=>"rtl"===Zr(e,"direction")?"rtl":"ltr";var Pd;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(Pd||(Pd={}));const Kw="data-alloy-vertical-dir",aD=e=>_w(e,r=>ho(r)&&zn(r,"data-alloy-vertical-dir")===Pd.BottomToTop),td=()=>cn("layouts",[_e("onLtr"),_e("onRtl"),fo("onBottomLtr"),fo("onBottomRtl")]),Nv=(e,r,a,l,m,g,h)=>{const v=h.map(aD).getOr(!1),y=r.layouts.map(A=>A.onLtr(e)),_=r.layouts.map(A=>A.onRtl(e)),k=v?r.layouts.bind(A=>A.onBottomLtr.map(B=>B(e))).or(y).getOr(m):y.getOr(a),E=v?r.layouts.bind(A=>A.onBottomRtl.map(B=>B(e))).or(_).getOr(g):_.getOr(l);return Gw(k,E)(e)};var iD=[_e("hotspot"),fo("bubble"),fe("overrides",{}),td(),In("placement",(e,r,a)=>{const m=Uw(a,r.hotspot.element),g=Nv(e.element,r,Sv(),kv(),bE(),vE(),N.some(r.hotspot.element));return N.some(Lu({anchorBox:m,bubble:r.bubble.getOr(Av()),overrides:r.overrides,layouts:g}))})],lD=[_e("x"),_e("y"),fe("height",0),fe("width",0),fe("bubble",Av()),fe("overrides",{}),td(),In("placement",(e,r,a)=>{const l=SE(a,r.x,r.y),m=Hn(l.left,l.top,r.width,r.height),g=Nv(e.element,r,kc(),fE(),kc(),fE(),N.none());return N.some(Lu({anchorBox:m,bubble:r.bubble,overrides:r.overrides,layouts:g}))})];const DE=xa([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),cD=e=>e.fold(ut,(r,a,l)=>r.translate(-a,-l)),dD=e=>e.fold(ut,ut),Yw=e=>qt(e,(r,a)=>r.translate(a.left,a.top),Go(0,0)),BE=e=>{const r=Je(e,dD);return Yw(r)},ME=DE.screen,Rv=DE.absolute,IE=(e,r,a)=>{const l=Qr(e.element),m=$r(l),g=((h,v,y)=>{const _=Hi(y.root).dom;return N.from(_.frameElement).map(oe).filter(k=>{const E=Qr(k),A=Qr(h.element);return Jo(E,A)}).map(ca)})(e,0,a).getOr(m);return Rv(g,m.left,m.top)},Xw=(e,r,a,l)=>{const m=ME(Go(e,r));return N.some({point:m,width:a,height:l})},PE=(e,r,a,l,m)=>e.map(g=>{const h=[r,g.point],v=l.fold(()=>BE(h),()=>BE(h),()=>(z=>{const Y=Je(z,cD);return Yw(Y)})(h)),E={x:v.left,y:v.top,width:g.width,height:g.height},A=a.showAbove?bE():Sv(),B=a.showAbove?vE():kv(),L=Nv(m,a,A,B,A,B,N.none());return Lu({anchorBox:E,bubble:a.bubble.getOr(Av()),overrides:a.overrides,layouts:L})});var uD=[_e("node"),_e("root"),fo("bubble"),td(),fe("overrides",{}),fe("showAbove",!1),In("placement",(e,r,a)=>{const l=IE(e,0,r);return r.node.filter(ps).bind(m=>{const g=m.dom.getBoundingClientRect(),h=Xw(g.left,g.top,g.width,g.height),v=r.node.getOr(e.element);return PE(h,l,r,a,v)})})];const Dv=(e,r,a,l)=>({start:e,soffset:r,finish:a,foffset:l}),mD=(xa([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),e=>e.fold(ut,ut,ut)),Bv=xa([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Hh={domRange:Bv.domRange,relative:Bv.relative,exact:Bv.exact,exactFromRange:e=>Bv.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const r=e.match({domRange:l=>oe(l.startContainer),relative:(l,m)=>mD(l),exact:(l,m,g,h)=>l});return Hi(r)},range:Dv},LE=(e,r,a)=>{const l=e.document.createRange();var m,g;return m=l,r.fold(g=>{m.setStartBefore(g.dom)},(g,h)=>{m.setStart(g.dom,h)},g=>{m.setStartAfter(g.dom)}),g=l,a.fold(v=>{g.setEndBefore(v.dom)},(v,y)=>{g.setEnd(v.dom,y)},v=>{g.setEndAfter(v.dom)}),l},FE=(e,r,a,l,m)=>{const g=e.document.createRange();return g.setStart(r.dom,a),g.setEnd(l.dom,m),g},zE=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Vh=xa([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Uh=(e,r,a)=>r(oe(a.startContainer),a.startOffset,oe(a.endContainer),a.endOffset),HE=(e,r)=>{return(a=e,l=r,((g,h)=>{const v=h.ltr();return v.collapsed?h.rtl().filter(y=>!1===y.collapsed).map(y=>Vh.rtl(oe(y.endContainer),y.endOffset,oe(y.startContainer),y.startOffset)).getOrThunk(()=>Uh(0,Vh.ltr,v)):Uh(0,Vh.ltr,v)})(0,(g=a,l.match({domRange:v=>({ltr:ee(v),rtl:N.none}),relative:(v,y)=>({ltr:Rr(()=>LE(g,v,y)),rtl:Rr(()=>N.some(LE(g,y,v)))}),exact:(v,y,_,k)=>({ltr:Rr(()=>FE(g,v,y,_,k)),rtl:Rr(()=>N.some(FE(g,_,k,v,y)))})})))).match({ltr:(a,l,m,g)=>{const h=e.document.createRange();return h.setStart(a.dom,l),h.setEnd(m.dom,g),h},rtl:(a,l,m,g)=>{const h=e.document.createRange();return h.setStart(m.dom,g),h.setEnd(a.dom,l),h}});var a,l,g},VE=(e,r,a)=>st(((l,m)=>{const g=an(m)?m:Ve;let h=l.dom;const v=[];for(;null!=h.parentNode;){const y=h.parentNode,_=oe(y);if(v.push(_),!0===g(_))break;h=y}return v})(e,a),r),Wa=(e,r)=>((a,l)=>{const m=void 0===l?document:l.dom;return xn(m)?[]:Je(m.querySelectorAll(a),oe)})(r,e),UE=e=>{if(e.rangeCount>0){const r=e.getRangeAt(0),a=e.getRangeAt(e.rangeCount-1);return N.some(Dv(oe(r.startContainer),r.startOffset,oe(a.endContainer),a.endOffset))}return N.none()},gD=e=>{if(null===e.anchorNode||null===e.focusNode)return UE(e);{const r=oe(e.anchorNode),a=oe(e.focusNode);return((l,m,g,h)=>{const v=((_,k,E,A)=>{const B=Qr(_).dom.createRange();return B.setStart(_.dom,k),B.setEnd(E.dom,A),B})(l,m,g,h),y=Jo(l,g)&&m===h;return v.collapsed&&!y})(r,e.anchorOffset,a,e.focusOffset)?N.some(Dv(r,e.anchorOffset,a,e.focusOffset)):UE(e)}},jE=(e,r)=>(a=>{const l=a.getClientRects(),m=l.length>0?l[0]:a.getBoundingClientRect();return m.width>0||m.height>0?N.some(m).map(zE):N.none()})(HE(e,r)),pD=((e,r)=>{const a=l=>e(l)?N.from(l.dom.nodeValue):N.none();return{get:l=>{if(!e(l))throw new Error("Can only get text value of a text node");return a(l).getOr("")},getOption:a,set:(l,m)=>{if(!e(l))throw new Error("Can only set raw text value of a text node");l.dom.nodeValue=m}}})(Io),Mv=(e,r)=>({element:e,offset:r}),$E=(e,r)=>Io(e)?Mv(e,r):((a,l)=>{const m=Ti(a);if(0===m.length)return Mv(a,l);if(l<m.length)return Mv(m[l],0);{const g=m[m.length-1],h=Io(g)?(v=g,pD.get(v)).length:Ti(g).length;return Mv(g,h)}var v})(e,r),Qw=e=>void 0!==e.foffset,WE=(e,r)=>r.getSelection.getOrThunk(()=>()=>{return(l=e,N.from(l.getSelection())).filter(l=>l.rangeCount>0).bind(gD);var l})().map(a=>{if(Qw(a)){const l=$E(a.start,a.soffset),m=$E(a.finish,a.foffset);return Hh.range(l.element,l.offset,m.element,m.offset)}return a});var hD=[fo("getSelection"),_e("root"),fo("bubble"),td(),fe("overrides",{}),fe("showAbove",!1),In("placement",(e,r,a)=>{const l=Hi(r.root).dom,m=IE(e,0,r),g=WE(l,r).bind(v=>{if(Qw(v))return(_=l,k=Hh.exactFromRange(v),(E=>{const A=E.getBoundingClientRect();return A.width>0||A.height>0?N.some(A).map(zE):N.none()})(HE(_,k))).orThunk(()=>{const _=xe("\ufeff");pr(v.start,_);const k=jE(l,Hh.exact(_,0,_,1));return Oi(_),k}).bind(_=>Xw(_.left,_.top,_.width,_.height));var _,k;{const y=pn(v,k=>k.dom.getBoundingClientRect()),_={left:Math.min(y.firstCell.left,y.lastCell.left),right:Math.max(y.firstCell.right,y.lastCell.right),top:Math.min(y.firstCell.top,y.lastCell.top),bottom:Math.max(y.firstCell.bottom,y.lastCell.bottom)};return Xw(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),h=WE(l,r).bind(v=>Qw(v)?ho(v.start)?N.some(v.start):Za(v.start):N.some(v.firstCell)).getOr(e.element);return PE(g,m,r,a,h)})];const jh="link-layout",qE=e=>e.x+e.width,GE=(e,r)=>e.x-r.width,KE=(e,r)=>e.y-r.height+e.height,YE=e=>e.y,Iv=(e,r,a)=>zs(qE(e),YE(e),a.southeast(),ed(),"southeast",Hs(e,{left:0,top:2}),jh),XE=(e,r,a)=>zs(GE(e,r),YE(e),a.southwest(),Oe(),"southwest",Hs(e,{right:1,top:2}),jh),Zw=(e,r,a)=>zs(qE(e),KE(e,r),a.northeast(),pp(),"northeast",Hs(e,{left:0,bottom:3}),jh),JE=(e,r,a)=>zs(GE(e,r),KE(e,r),a.northwest(),Lh(),"northwest",Hs(e,{right:1,bottom:3}),jh),QE=()=>[Iv,XE,Zw,JE],ZE=()=>[XE,Iv,JE,Zw];var fD=[_e("item"),td(),fe("overrides",{}),In("placement",(e,r,a)=>{const l=Uw(a,r.item.element),m=Nv(e.element,r,QE(),ZE(),QE(),ZE(),N.none());return N.some(Lu({anchorBox:l,bubble:Av(),overrides:r.overrides,layouts:m}))})],e_=xo("type",{selection:hD,node:uD,hotspot:iD,submenu:fD,makeshift:lD});const bD=[rr("classes",ge),qi("mode","all",["all","layout","placement"])],eT=[fe("useFixed",Ve),fo("getBounds")],tT=[Bo("anchor",e_),cn("transition",bD)],t_=(e,r,a,l,m,g)=>{const h=co("placement.info",je(tT),m),v=h.anchor,y=l.element,_=a.get(l.uid);Fw(()=>{lo(y,"position","fixed");const k=Jn(y,"visibility");lo(y,"visibility","hidden");const E=r.useFixed()?(()=>{const A=document.documentElement;return nD(0,0,A.clientWidth,A.clientHeight)})():(A=>{const B=ca(A.element),L=A.element.dom.getBoundingClientRect();return oD(B.left,B.top,L.width,L.height)})(e);v.placement(e,v,E).each(A=>{const B=g.orThunk(()=>r.getBounds.map(Fl)),L=((Z,te,ae,Ce,De,Fe,Ie,ot)=>{const ht=RE(Ie,"maxHeightFunction",NE()),At=RE(Ie,"maxWidthFunction",Qe),oo=Z.origin;return((e,r,a,l)=>{const m=((g,h,v,y)=>{mn(h,"max-height"),mn(h,"max-width");const _={width:jr(k=h),height:Ra(k)};var k;return((E,A,B,L,G,K)=>{const Q=L.width,W=L.height,z=(Y,Z,te,ae,Ce)=>{const Fe=((e,r,a,l)=>{const m=e.bubble,g=m.offset,h=((Y,Z,te)=>{const ae=(ot,ht)=>Z[ot].map(At=>{const Qt="top"===ot||"bottom"===ot,oo=Qt?te.top:te.left,Ao=("left"===ot||"top"===ot?Math.max:Math.min)(At,ht)+oo;return Qt?Ni(Ao,Y.y,Y.bottom):Ni(Ao,Y.x,Y.right)}).getOr(ht),Ce=ae("left",Y.x),De=ae("top",Y.y),Fe=ae("right",Y.right),Ie=ae("bottom",Y.bottom);return Hn(Ce,De,Fe-Ce,Ie-De)})(l,e.restriction,g),y=e.y+g.top,_=Hn(e.x+g.left,y,r,a),{originInBounds:k,sizeInBounds:E,visibleW:A,visibleH:B}=((Y,Z)=>{const{x:te,y:ae,right:Ce,bottom:De}=Z,{x:Fe,y:Ie,right:ot,bottom:ht,width:At,height:Qt}=Y;return{originInBounds:Fe>=te&&Fe<=Ce&&Ie>=ae&&Ie<=De,sizeInBounds:ot<=Ce&&ot>=te&&ht<=De&&ht>=ae,visibleW:Math.min(At,Fe>=te?Ce-Fe:ot-te),visibleH:Math.min(Qt,Ie>=ae?De-Ie:ht-ae)}})(_,h),L=k&&E,G=L?_:((Y,Z)=>{const{x:te,y:ae,right:Ce,bottom:De}=Z,{x:Fe,y:Ie,width:ot,height:ht}=Y,At=Math.max(te,Ce-ot),Qt=Math.max(ae,De-ht),oo=Ni(Fe,te,At),Ao=Ni(Ie,ae,Qt),Pn=Math.min(oo+ot,Ce)-oo,ir=Math.min(Ao+ht,De)-Ao;return Hn(oo,Ao,Pn,ir)})(_,h),K=G.width>0&&G.height>0,{maxWidth:Q,maxHeight:W}=((Y,Z,te)=>{const ae=ee(Z.bottom-te.y),Ce=ee(te.bottom-Z.y),De=Y.fold(At=Ce,At,oo=ae,oo,At,oo,Qt=Ce,Qt),Fe=ee(Z.right-te.x),Ie=ee(te.right-Z.x);var At,Qt,oo;return{maxWidth:((ht,At,Qt,oo)=>ht.fold(At,oo,At,oo,Qt,Qt,At,oo))(Y,Ie,Ie,Fe),maxHeight:De}})(e.direction,G,l),z={rect:G,maxHeight:W,maxWidth:Q,direction:e.direction,placement:e.placement,classes:{on:m.classesOn,off:m.classesOff},layout:e.label,testY:y};return L||e.alwaysFit?Ev.fit(z):Ev.nofit(z,A,B,K)})(Y(B,L,G,E,K),Q,W,K);return Fe.fold(ee(Fe),(Ie,ot,ht,At)=>(Ce===At?ht>ae||ot>te:!Ce&&At)?Fe:Ev.nofit(Z,te,ae,Ce))};return qt(A,(Y,Z)=>{const te=Xn(z,Z);return Y.fold(ee(Y),te)},Ev.nofit({rect:B,maxHeight:L.height,maxWidth:L.width,direction:ed(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:B.y},-1,-1,!1)).fold(ut,ut)})(h,y.preference,g,_,v,y.bounds)})(e,r,a,l);return((g,h,v)=>{const y=Vw(v.origin,h);v.transition.each(_=>{((e,r,a,l,m,g)=>{const h=(v=l,y=m,g.exists(k=>{const E=v.mode;return"all"===E||k[E]!==y[E]}));var v,y,k,E;if(h||((v,y)=>((_,k)=>Qs(k,E=>Ha(_,E)))(v,y.classes))(e,l)){lo(e,"position",a.position);const v=Uw(r,e),y=Vw(r,{...m,rect:v}),_=yn(TE,k=>y[k]);((k,E)=>{const A=B=>parseFloat(B).toFixed(3);return Fr(E,(B,L)=>!((G,K,Q=rs)=>Xo(G,K,Q).getOr(G.isNone()&&K.isNone()))(k[L].map(A),B.map(A))).isSome()})(a,_)&&(oi(e,_),h&&(Va(k=e,(E=l).classes),ur(k,Ov).each(A=>{clearTimeout(parseInt(A,10)),Ht(k,Ov)}),((A,B)=>{const L=hp(),G=hp();let K;const Q=Z=>{var te;const ae=null!==(te=Z.raw.pseudoElement)&&void 0!==te?te:"";return Jo(Z.target,A)&&zi(ae)&&wo(TE,Z.raw.propertyName)},W=Z=>{if(_t(Z)||Q(Z)){L.clear(),G.clear();const te=Z?.raw.type;(_t(te)||te===ep())&&(clearTimeout(K),Ht(A,Ov),Tr(A,B.classes))}},z=$a(A,KR(),Z=>{Q(Z)&&(z.unbind(),L.set($a(A,ep(),W)),G.set($a(A,sw(),W)))}),Y=(Z=>{const te=Fe=>{const Ie=Zr(Z,Fe).split(/\s*,\s*/);return st(Ie,Na)},ae=Fe=>{if(So(Fe)&&/^[\d.]+/.test(Fe)){const Ie=parseFloat(Fe);return Ei(Fe,"ms")?Ie:1e3*Ie}return 0},Ce=te("transition-delay"),De=te("transition-duration");return qt(De,(Fe,Ie,ot)=>{const ht=ae(Ce[ot])+ae(Ie);return Math.max(Fe,ht)},0)})(A);requestAnimationFrame(()=>{K=setTimeout(W,Y+17),ro(A,Ov,K)})})(k,E)),jc(e))}else Tr(e,l.classes)})(g,v.origin,y,_,h,v.lastPlacement)}),_E(g,y)})(r,m,l),ro(r,jw,m.placement),((g,h)=>{const v=h.classes;Tr(g,v.off),Va(g,v.on)})(r,m),(0,l.maxHeightFunction)(r,m.maxHeight),((g,h,v)=>{(0,v.maxWidthFunction)(g,h.maxWidth)})(r,m,l),{layout:m.layout,placement:m.placement}})(Z.anchorBox,te,ae,{bounds:CE(oo,Fe),origin:oo,preference:Ce,maxHeightFunction:ht,maxWidthFunction:At,lastPlacement:De,transition:ot})})({anchorBox:(K=A).anchorBox,origin:E},l.element,K.bubble,K.layouts,_,B,K.overrides,h.transition);var K;a.set(l.uid,L)}),k.fold(()=>{mn(y,"visibility")},A=>{lo(y,"visibility",A)}),Jn(y,"left").isNone()&&Jn(y,"top").isNone()&&Jn(y,"right").isNone()&&Jn(y,"bottom").isNone()&&Nr(Jn(y,"position"),"fixed")&&mn(y,"position")},y)};var oT=Object.freeze({__proto__:null,position:(e,r,a,l,m)=>{const g=N.none();t_(e,r,a,l,m,g)},positionWithinBounds:t_,getMode:(e,r,a)=>r.useFixed()?"fixed":"absolute",reset:(e,r,a,l)=>{const m=l.element;yt(["position","left","right","top","bottom"],g=>mn(m,g)),Ht(m,jw),a.clear(l.uid)}});const ma=Ns({fields:eT,name:"positioning",active:tD,apis:oT,state:Object.freeze({__proto__:null,init:()=>{let e={};return za({readState:()=>e,clear:r=>{vt(r)?delete e[r]:e={}},set:(r,a)=>{e[r]=a},get:r=>lt(e,r)})}})}),o_=e=>e.getSystem().isConnected(),Oc=e=>{nn(e,np());const r=e.components();yt(r,Oc)},$h=e=>{const r=e.components();yt(r,$h),nn(e,yc())},nT=(e,r)=>{e.getSystem().addToWorld(r),ps(e.element)&&$h(r)},n_=e=>{Oc(e),e.getSystem().removeFromWorld(e)},r_=(e,r)=>{Os(e.element,r.element)},Fm=(e,r)=>{s_(e,r,Os)},s_=(e,r,a)=>{e.getSystem().addToWorld(r),a(e.element,r.element),ps(e.element)&&$h(r),e.syncComponents()},bp=e=>{Oc(e),Oi(e.element),e.getSystem().removeFromWorld(e)},_l=e=>{const r=Zs(e.element).bind(a=>e.getSystem().getByDom(a).toOptional());bp(e),r.each(a=>{a.syncComponents()})},rT=e=>{const r=e.components();yt(r,bp),Yc(e.element),e.syncComponents()},Wh=(e,r)=>{a_(e,r,Os)},Pv=(e,r)=>{a_(e,r,gc)},a_=(e,r,a)=>{a(e,r.element);const l=Ti(r.element);yt(l,m=>{r.getByDom(m).each($h)})},sT=e=>{const r=Ti(e.element);yt(r,a=>{e.getByDom(a).each(Oc)}),Oi(e.element)},i_=(e,r,a,l)=>{a.get().each(h=>{rT(e)});const m=r.getAttachPoint(e);Fm(m,e);const g=e.getSystem().build(l);return Fm(e,g),a.set(g),g},aT=(e,r,a,l)=>{const m=i_(e,r,a,l);return r.onOpen(e,m),m},iT=(e,r,a)=>{a.get().each(l=>{rT(e),_l(e),r.onClose(e,l),a.clear()})},lT=(e,r,a)=>a.isOpen(),zm=(e,r,a)=>{const l=r.getAttachPoint(e);var m,h;lo(e.element,"position",ma.getMode(l)),h=r.cloakVisibilityAttr,Jn((m=e).element,"visibility").fold(()=>{Ht(m.element,h)},y=>{ro(m.element,h,y)}),lo(m.element,"visibility","hidden")},Fu=(e,r,a)=>{var l;l=e.element,Vo(["top","left","right","bottom"],m=>Jn(l,m).isSome())||mn(e.element,"position"),((l,m,g)=>{ur(l.element,g).fold(()=>mn(l.element,m),h=>lo(l.element,m,h))})(e,"visibility",r.cloakVisibilityAttr)};var Lv=Object.freeze({__proto__:null,cloak:zm,decloak:Fu,open:aT,openWhileCloaked:(e,r,a,l,m)=>{zm(e,r),aT(e,r,a,l),m(),Fu(e,r)},close:iT,isOpen:lT,isPartOf:(e,r,a,l)=>lT(0,0,a)&&a.get().exists(m=>r.isPartOf(e,m,l)),getState:(e,r,a)=>a.get(),setContent:(e,r,a,l)=>a.get().map(()=>i_(e,r,a,l))}),qh=Object.freeze({__proto__:null,events:(e,r)=>Cn([Me(op(),(a,l)=>{iT(a,e,r)})])}),zu=[Uo("onOpen"),Uo("onClose"),_e("isPartOf"),_e("getAttachPoint"),fe("cloakVisibilityAttr","data-precloak-visibility")],od=Object.freeze({__proto__:null,init:()=>{const e=Un(),r=ee("not-implemented");return za({readState:r,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const jo=Ns({fields:zu,name:"sandboxing",active:qh,apis:Lv,state:od}),Ld=ee("dismiss.popups"),vp=ee("reposition.popups"),Fv=ee("mouse.released"),Gh=Ct([fe("isExtraPart",Ve),cn("fireEventInstead",[fe("event",Dd())])]),Hm=e=>{const r=co("Dismissal",Gh,e);return{[Ld()]:{schema:Ct([_e("target")]),onReceive:(a,l)=>{jo.isOpen(a)&&(jo.isPartOf(a,l.target)||r.isExtraPart(a,l.target)||r.fireEventInstead.fold(()=>jo.close(a),m=>nn(a,m.event)))}}}},l_=Ct([cn("fireEventInstead",[fe("event",nE())]),on("doReposition")]),zv=e=>{const r=co("Reposition",l_,e);return{[vp()]:{onReceive:a=>{jo.isOpen(a)&&r.fireEventInstead.fold(()=>r.doReposition(a),l=>nn(a,l.event))}}}},Vm=(e,r,a)=>{r.store.manager.onLoad(e,r,a)},Kh=(e,r,a)=>{r.store.manager.onUnload(e,r,a)};var c_=Object.freeze({__proto__:null,onLoad:Vm,onUnload:Kh,setValue:(e,r,a,l)=>{r.store.manager.setValue(e,r,a,l)},getValue:(e,r,a)=>r.store.manager.getValue(e,r,a),getState:(e,r,a)=>a}),Hv=Object.freeze({__proto__:null,events:(e,r)=>{const a=e.resetOnDom?[qn((l,m)=>{Vm(l,e,r)}),xc((l,m)=>{Kh(l,e,r)})]:[Mw(e,r,Vm)];return Cn(a)}});const Ds=()=>{const e=Ot(null);return za({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},cT=()=>{const e=Ot({}),r=Ot({});return za({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:r.get()}),lookup:a=>lt(e.get(),a).orThunk(()=>lt(r.get(),a)),update:a=>{const l=e.get(),m=r.get(),g={},h={};yt(a,v=>{g[v.value]=v,lt(v,"meta").each(y=>{lt(y,"text").each(_=>{h[_]=v})})}),e.set({...l,...g}),r.set({...m,...h})},clear:()=>{e.set({}),r.set({})}})};var nd=Object.freeze({__proto__:null,memory:Ds,dataset:cT,manual:()=>za({readState:Qe}),init:e=>e.store.manager.state(e)});const d_=(e,r,a,l)=>{const m=r.store;a.update([l]),m.setValue(e,l),r.onSetValue(e,l)};var u_=[fo("initialValue"),_e("getFallbackEntry"),_e("getDataKey"),_e("setValue"),In("manager",{setValue:d_,getValue:(e,r,a)=>{const l=r.store,m=l.getDataKey(e);return a.lookup(m).getOrThunk(()=>l.getFallbackEntry(m))},onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{d_(e,r,a,l)})},onUnload:(e,r,a)=>{a.clear()},state:cT})],yp=[_e("getValue"),fe("setValue",Qe),fo("initialValue"),In("manager",{setValue:(e,r,a,l)=>{r.store.setValue(e,l),r.onSetValue(e,l)},getValue:(e,r,a)=>r.store.getValue(e),onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{r.store.setValue(e,l)})},onUnload:Qe,state:xl.init})],dT=[fo("initialValue"),In("manager",{setValue:(e,r,a,l)=>{a.set(l),r.onSetValue(e,l)},getValue:(e,r,a)=>a.get(),onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},onUnload:(e,r,a)=>{a.clear()},state:Ds})],Vv=[Dr("store",{mode:"memory"},xo("mode",{memory:dT,manual:yp,dataset:u_})),Uo("onSetValue"),fe("resetOnDom",!1)];const at=Ns({fields:Vv,name:"representing",active:Hv,apis:c_,extra:{setValueFrom:(e,r)=>{const a=at.getValue(r);at.setValue(e,a)}},state:nd}),ys=(e,r)=>Od(e,{},Je(r,a=>{return l=a.name(),m="Cannot configure "+a.name()+" for "+e,Ae(l,l,{tag:"option",process:{}},Ge(g=>Wi("The field: "+l+" is forbidden. "+m)));var l,m}).concat([Oo("dump",ut)])),Yh=e=>e.dump,ar=(e,r)=>({...ve(r),...e.dump}),Um=ys,jm=ar,m_="placeholder",li=xa([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Hu=e=>vo(e,"uiType"),g_=(e,r,a,l)=>{return(m=e,h=a,v=l,Hu(h)&&h.uiType===m_?(k=h,E=v,(y=m).exists(A=>A!==k.owner)?li.single(!0,ee(k)):lt(E,k.name).fold(()=>{throw new Error("Unknown placeholder component: "+k.name+"\nKnown: ["+Rn(E)+"]\nNamespace: "+y.getOr("none")+"\nSpec: "+JSON.stringify(k,null,2))},A=>A.replace())):li.single(!1,ee(h))).fold((m,g)=>{const h=Hu(a)?g(r,a.config,a.validated):g(r),v=lt(h,"components").getOr([]),y=ft(v,_=>g_(e,r,_,l));return[{...h,components:y}]},(m,g)=>{if(Hu(a)){const h=g(r,a.config,a.validated);return a.validated.preprocess.getOr(ut)(h)}return g(r)});var m,h,v,y,k,E},$m=li.single,ci=li.multiple,di=ee(m_),js=xa([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Di=fe("factory",{sketch:ut}),Xh=fe("schema",[]),ui=_e("name"),Fd=Ae("pname","pname",V(e=>"<alloy."+bt(e.name)+">"),w()),uT=Oo("schema",()=>[fo("preprocess")]),Jh=fe("defaults",ee({})),Wm=fe("overrides",ee({})),mT=je([Di,Xh,ui,Fd,Jh,Wm]),vD=je([Di,Xh,ui,Jh,Wm]),gT=je([Di,Xh,ui,Fd,Jh,Wm]),pT=je([Di,uT,ui,_e("unit"),Fd,Jh,Wm]),Uv=e=>e.fold(N.some,N.none,N.some,N.some),p_=e=>{const r=a=>a.name;return e.fold(r,r,r,r)},jv=(e,r)=>a=>{const l=co("Converting part type",r,a);return e(l)},ga=jv(js.required,mT),ls=jv(js.external,vD),mi=jv(js.optional,gT),Qh=jv(js.group,pT),Vu=ee("entirety");var h_=Object.freeze({__proto__:null,required:ga,external:ls,optional:mi,group:Qh,asNamedPart:Uv,name:p_,asCommon:e=>e.fold(ut,ut,ut,ut),original:Vu});const Zh=(e,r,a,l)=>Dn(r.defaults(e,a,l),a,{uid:e.partUids[r.name]},r.overrides(e,a,l)),$v=(e,r)=>{const a={};return yt(r,l=>{Uv(l).each(m=>{const g=xp(e,m.pname);a[m.name]=h=>{const v=co("Part: "+m.name+" in "+e,je(m.schema),h);return{...g,config:h,validated:v}}})}),a},xp=(e,r)=>({uiType:di(),owner:e,name:r}),qm=(e,r,a)=>({uiType:di(),owner:e,name:r,config:a,validated:{}}),f_=e=>ft(e,r=>r.fold(N.none,N.some,N.none,N.none).map(a=>zo(a.name,a.schema.concat([Ew(Vu())]))).toArray()),Wv=e=>Je(e,p_),ef=(e,r,a)=>((l,m,g)=>{const h={},v={};return yt(g,y=>{y.fold(_=>{h[_.pname]=$m(!0,(k,E,A)=>_.factory.sketch(Zh(k,_,E,A)))},_=>{const k=m.parts[_.name];v[_.name]=ee(_.factory.sketch(Zh(m,_,k[Vu()]),k))},_=>{h[_.pname]=$m(!1,(k,E,A)=>_.factory.sketch(Zh(k,_,E,A)))},_=>{h[_.pname]=ci(!0,(k,E,A)=>Je(k[_.name],L=>_.factory.sketch(Dn(_.defaults(k,L,A),L,_.overrides(k,L)))))})}),{internals:ee(h),externals:ee(v)}})(0,r,a),tf=(e,r,a)=>((l,m,g,h)=>{const v=pn(h,(_,k)=>((E,A)=>{let B=!1;return{name:ee(E),required:()=>A.fold((L,G)=>L,(L,G)=>L),used:()=>B,replace:()=>{if(B)throw new Error("Trying to use the same placeholder more than once: "+E);return B=!0,A}}})(k,_)),y=(_=l,k=m,A=v,ft(g,B=>g_(_,k,B,A)));var _,k,A;return gn(v,_=>{if(!1===_.used()&&_.required())throw new Error("Placeholder: "+_.name()+" was not found in components list\nNamespace: "+l.getOr("none")+"\nComponents: "+JSON.stringify(m.components,null,2))}),y})(N.some(e),r,r.components,a),fn=(e,r,a)=>{const l=r.partUids[a];return e.getSystem().getByUid(l).toOptional()},rd=(e,r,a)=>fn(e,r,a).getOrDie("Could not find part: "+a),b_=(e,r,a)=>{const l={},m=r.partUids,g=e.getSystem();return yt(a,h=>{l[h]=ee(g.getByUid(m[h]))}),l},wp=(e,r)=>{const a=e.getSystem();return pn(r.partUids,(l,m)=>ee(a.getByUid(l)))},qv=e=>Rn(e.partUids),Gv=(e,r,a)=>{const l={},m=r.partUids,g=e.getSystem();return yt(a,h=>{l[h]=ee(g.getByUid(m[h]).getOrDie())}),l},hT=(e,r)=>{const a=Wv(r);return Er(Je(a,l=>({key:l,value:e+"-"+l})))},Kv=e=>Ae("partUids","partUids",X(r=>hT(r.uid,e)),w());var v_=Object.freeze({__proto__:null,generate:$v,generateOne:qm,schemas:f_,names:Wv,substitutes:ef,components:tf,defaultUids:hT,defaultUidsSchema:Kv,getAllParts:wp,getAllPartNames:qv,getPart:fn,getPartOrDie:rd,getParts:b_,getPartsOrDie:Gv});const Gm=(e,r,a,l,m)=>{const g=(v=m,((h=l).length>0?[zo("parts",h)]:[]).concat([_e("uid"),fe("dom",{}),fe("components",[]),Ew("originalSpec"),fe("debug.sketcher",{})]).concat(v));var h,v;return co(e+" [SpecSchema]",Ct(g.concat(r)),a)},of=(e,r,a,l,m)=>{const g=y_(m),h=f_(a),v=Kv(a),y=Gm(e,r,g,h,[v]),_=ef(0,y,a);return l(y,tf(e,y,_.internals()),g,_.externals())},y_=e=>vo(e,"uid")?e:{...e,uid:Rm("uid")},Uu=Ct([_e("name"),_e("factory"),_e("configFields"),fe("apis",{}),fe("extraApis",{})]),x_=Ct([_e("name"),_e("factory"),_e("configFields"),_e("partFields"),fe("apis",{}),fe("extraApis",{})]),gi=e=>{const r=co("Sketcher for "+e.name,Uu,e),a=pn(r.apis,bv),l=pn(r.extraApis,(m,g)=>Dh(m,g));return{name:r.name,configFields:r.configFields,sketch:m=>((g,h,v,y)=>{const _=y_(y);return v(Gm(g,h,_,[],[]),_)})(r.name,r.configFields,r.factory,m),...a,...l}},$s=e=>{const r=co("Sketcher for "+e.name,x_,e),a=$v(r.name,r.partFields),l=pn(r.apis,bv),m=pn(r.extraApis,(g,h)=>Dh(g,h));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:g=>of(r.name,r.configFields,r.partFields,r.factory,g),parts:a,...l,...m}},Km=e=>jn("input")(e)&&"radio"!==zn(e,"type")||jn("textarea")(e);var Yv=Object.freeze({__proto__:null,getCurrent:(e,r,a)=>r.find(e)});const w_=[_e("find")],_o=Ns({fields:w_,name:"composing",apis:Yv}),Cl=["input","button","textarea","select"],xs=(e,r,a)=>{(r.disabled()?Xv:C_)(e,r)},nf=(e,r)=>!0===r.useNative&&wo(Cl,nt(e.element)),fT=e=>{ro(e.element,"disabled","disabled")},__=e=>{Ht(e.element,"disabled")},_p=e=>{ro(e.element,"aria-disabled","true")},bT=e=>{ro(e.element,"aria-disabled","false")},Xv=(e,r,a)=>{r.disableClass.each(l=>{Zo(e.element,l)}),(nf(e,r)?fT:_p)(e),r.onDisabled(e)},C_=(e,r,a)=>{r.disableClass.each(l=>{sr(e.element,l)}),(nf(e,r)?__:bT)(e),r.onEnabled(e)},S_=(e,r)=>nf(e,r)?uu(e.element,"disabled"):"true"===zn(e.element,"aria-disabled");var vT=Object.freeze({__proto__:null,enable:C_,disable:Xv,isDisabled:S_,onLoad:xs,set:(e,r,a,l)=>{(l?Xv:C_)(e,r)}}),yD=Object.freeze({__proto__:null,exhibit:(e,r)=>_c({classes:r.disabled()?r.disableClass.toArray():[]}),events:(e,r)=>Cn([sE(Ki(),(a,l)=>S_(a,e)),Mw(e,r,xs)])}),xD=[Qn("disabled",Ve),fe("useNative",!0),fo("disableClass"),Uo("onDisabled"),Uo("onEnabled")];const Ut=Ns({fields:xD,name:"disabling",active:yD,apis:vT}),k_=(e,r,a,l)=>{const m=Wa(e.element,"."+r.highlightClass);yt(m,g=>{Vo(l,h=>Jo(h.element,g))||(sr(g,r.highlightClass),e.getSystem().getByDom(g).each(h=>{r.onDehighlight(e,h),nn(h,lw())}))})},Cp=(e,r,a,l)=>{k_(e,r,0,[l]),Jv(e,r,a,l)||(Zo(l.element,r.highlightClass),r.onHighlight(e,l),nn(l,Th()))},Jv=(e,r,a,l)=>Ha(l.element,r.highlightClass),rf=(e,r,a)=>Gn(e.element,"."+r.itemClass).bind(l=>e.getSystem().getByDom(l).toOptional()),E_=(e,r,a)=>{const l=Wa(e.element,"."+r.itemClass);return(l.length>0?N.some(l[l.length-1]):N.none()).bind(m=>e.getSystem().getByDom(m).toOptional())},ju=(e,r,a,l)=>{const m=Wa(e.element,"."+r.itemClass);return ha(m,g=>Ha(g,r.highlightClass)).bind(g=>{const h=Pu(g,l,0,m.length-1);return e.getSystem().getByDom(m[h]).toOptional()})},Sp=(e,r,a)=>{const l=Wa(e.element,"."+r.itemClass);return gs(Je(l,m=>e.getSystem().getByDom(m).toOptional()))};var wD=Object.freeze({__proto__:null,dehighlightAll:(e,r,a)=>k_(e,r,0,[]),dehighlight:(e,r,a,l)=>{Jv(e,r,a,l)&&(sr(l.element,r.highlightClass),r.onDehighlight(e,l),nn(l,lw()))},highlight:Cp,highlightFirst:(e,r,a)=>{rf(e,r).each(l=>{Cp(e,r,a,l)})},highlightLast:(e,r,a)=>{E_(e,r).each(l=>{Cp(e,r,a,l)})},highlightAt:(e,r,a,l)=>{((m,g,h,v)=>{const y=Wa(m.element,"."+g.itemClass);return N.from(y[v]).fold(()=>ko.error(new Error("No element found with index "+v)),m.getSystem().getByDom)})(e,r,0,l).fold(m=>{throw m},m=>{Cp(e,r,a,m)})},highlightBy:(e,r,a,l)=>{const m=Sp(e,r);Ee(m,l).each(g=>{Cp(e,r,a,g)})},isHighlighted:Jv,getHighlighted:(e,r,a)=>Gn(e.element,"."+r.highlightClass).bind(l=>e.getSystem().getByDom(l).toOptional()),getFirst:rf,getLast:E_,getPrevious:(e,r,a)=>ju(e,r,0,-1),getNext:(e,r,a)=>ju(e,r,0,1),getCandidates:Sp}),yT=[_e("highlightClass"),_e("itemClass"),Uo("onHighlight"),Uo("onDehighlight")];const en=Ns({fields:yT,name:"highlighting",apis:wD}),_D=[8],sd=[9],Qi=[13],sf=[27],pi=[32],af=[37],kp=[38],lf=[39],Ym=[40],xT=(e,r,a)=>{const l=Nn(e.slice(0,r)),m=Nn(e.slice(r+1));return Ee(l.concat(m),a)},gt=(e,r,a)=>{const l=Nn(e.slice(0,r));return Ee(l,a)},Xm=(e,r,a)=>{const l=e.slice(0,r),m=e.slice(r+1);return Ee(m.concat(l),a)},wT=(e,r,a)=>{const l=e.slice(r+1);return Ee(l,a)},Lo=e=>r=>wo(e,r.raw.which),Sl=e=>r=>Qs(e,a=>a(r)),$u=e=>!0===e.raw.shiftKey,_T=e=>!0===e.raw.ctrlKey,Jm=Kt($u),Ho=(e,r)=>({matches:e,classification:r}),T_=(e,r,a)=>{r.exists(l=>a.exists(m=>Jo(m,l)))||Bt(e,rp(),{prevFocus:r,newFocus:a})},Qv=()=>{const e=r=>Ec(r.element);return{get:e,set:(r,a)=>{const l=e(r);r.getSystem().triggerFocus(a,r.element);const m=e(r);T_(r,l,m)}}},CD=()=>{const e=r=>en.getHighlighted(r).map(a=>a.element);return{get:e,set:(r,a)=>{const l=e(r);r.getSystem().getByDom(a).fold(Qe,g=>{en.highlight(r,g)});const m=e(r);T_(r,l,m)}}};var Wu;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(Wu||(Wu={}));const Bi=(e,r,a,l,m)=>{const g=(v,y,_,k,E)=>{return(A=_(v,y,k,E),B=y.event,Ee(A,L=>L.matches(B)).map(L=>L.classification)).bind(L=>L(v,y,k,E));var A,B},h={schema:()=>e.concat([fe("focusManager",Qv()),Dr("focusInside","onFocus",Vt(v=>wo(["onFocus","onEnterOrSpace","onApi"],v)?ko.value(v):ko.error("Invalid value for focusInside"))),In("handler",h),In("state",r),In("sendFocusIn",m)]),processKey:g,toEvents:(v,y)=>{const _=v.focusInside!==Wu.OnFocusMode?N.none():m(v).map(E=>Me(Rd(),(A,B)=>{E(A,v,y),B.stop()})),k=[Me(vc(),(E,A)=>{g(E,A,a,v,y).fold(()=>{((B,L)=>{const G=Lo(pi.concat(Qi))(L.event);v.focusInside===Wu.OnEnterOrSpaceMode&&G&&Ad(B,L)&&m(v).each(K=>{K(B,v,y),L.stop()})})(E,A)},B=>{A.stop()})}),Me(tE(),(E,A)=>{g(E,A,l,v,y).each(B=>{A.stop()})})];return Cn(_.toArray().concat(k))}};return h},cf=e=>{const r=[fo("onEscape"),fo("onEnter"),fe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),fe("firstTabstop",0),fe("useTabstopAt",un),fo("visibilitySelector")].concat([e]),a=(k,E)=>{const A=k.visibilitySelector.bind(B=>Gl(E,B)).getOr(E);return gr(A)>0},l=(k,E)=>E.focusManager.get(k).bind(A=>Gl(A,E.selector)),m=(k,E,A)=>{((B,L)=>{const G=Wa(B.element,L.selector),K=st(G,Q=>a(L,Q));return N.from(K[L.firstTabstop])})(k,E).each(B=>{E.focusManager.set(k,B)})},g=(k,E,A,B)=>{const L=Wa(k.element,A.selector);return l(k,A).bind(G=>ha(L,Xn(Jo,G)).bind(K=>{return Q=k,Y=A,B(L,K,te=>{return a(ae=Y,Ce=te)&&ae.useTabstopAt(Ce);var ae,Ce}).fold(()=>Y.cyclic?N.some(!0):N.none(),te=>(Y.focusManager.set(Q,te),N.some(!0)));var Q,Y}))},h=(k,E,A)=>g(k,0,A,A.cyclic?xT:gt),v=(k,E,A)=>g(k,0,A,A.cyclic?Xm:wT),y=ee([Ho(Sl([$u,Lo(sd)]),h),Ho(Lo(sd),v),Ho(Sl([Jm,Lo(Qi)]),(k,E,A)=>A.onEnter.bind(B=>B(k,E)))]),_=ee([Ho(Lo(sf),(k,E,A)=>A.onEscape.bind(B=>B(k,E))),Ho(Lo(sd),(k,E,A)=>l(k,A).filter(B=>!A.useTabstopAt(B)).bind(B=>{return((G=L=B,Zs(G)).bind(zc).exists(G=>Jo(G,L))?h:v)(k,E,A);var L,G}))]);return Bi(r,xl.init,y,_,()=>N.some(m))};var Ep=cf(Oo("cyclic",Ve)),Zv=cf(Oo("cyclic",un));const df=(e,r,a)=>Km(a)&&Lo(pi)(r.event)?N.none():(uv(e,a,Ki()),N.some(!0)),Qm=(e,r)=>N.some(!0),O_=[fe("execute",df),fe("useSpace",!1),fe("useEnter",!0),fe("useControlEnter",!1),fe("useDown",!1)],CT=(e,r,a)=>a.execute(e,r,e.element);var ST=Bi(O_,xl.init,(e,r,a,l)=>{const m=a.useSpace&&!Km(e.element)?pi:[],h=a.useDown?Ym:[],v=m.concat(a.useEnter?Qi:[]).concat(h);return[Ho(Lo(v),CT)].concat(a.useControlEnter?[Ho(Sl([_T,Lo(Qi)]),CT)]:[])},(e,r,a,l)=>a.useSpace&&!Km(e.element)?[Ho(Lo(pi),Qm)]:[],()=>N.none());const ey=()=>{const e=Un();return za({readState:()=>e.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{e.set({numRows:r,numColumns:a})},getNumRows:()=>e.get().map(r=>r.numRows),getNumColumns:()=>e.get().map(r=>r.numColumns)})};var kT=Object.freeze({__proto__:null,flatgrid:ey,init:e=>e.state(e)});const ET=e=>(r,a,l,m)=>{const g=e(r.element);return N_(g,r,a,l,m)},A_=(e,r)=>{const a=Gw(e,r);return ET(a)},ty=(e,r)=>{const a=Gw(r,e);return ET(a)},uf=e=>(r,a,l,m)=>N_(e,r,a,l,m),N_=(e,r,a,l,m)=>l.focusManager.get(r).bind(g=>e(r.element,g,l,m)).map(g=>(l.focusManager.set(r,g),!0)),mf=uf,gf=uf,Zm=uf,qu=e=>{return!((r=e.dom).offsetWidth<=0&&r.offsetHeight<=0);var r},TT=(e,r,a)=>{const l=Wa(e,a);return m=st(l,qu),ha(m,h=>Jo(h,r)).map(h=>({index:h,candidates:m}));var m},R_=(e,r)=>ha(e,a=>Jo(r,a)),D_=(e,r,a,l)=>l(Math.floor(r/a),r%a).bind(m=>{const g=m.row*a+m.column;return g>=0&&g<e.length?N.some(e[g]):N.none()}),OT=(e,r,a,l,m)=>D_(e,r,l,(g,h)=>{const y=Pu(h,m,0,(g===a-1?e.length-g*l:l)-1);return N.some({row:g,column:y})}),oy=(e,r,a,l,m)=>D_(e,r,l,(g,h)=>{const v=Pu(g,m,0,a-1),_=Ni(h,0,(v===a-1?e.length-v*l:l)-1);return N.some({row:v,column:_})}),AT=[_e("selector"),fe("execute",df),ii("onEscape"),fe("captureTab",!1),wv()],NT=(e,r,a)=>{Gn(e.element,r.selector).each(l=>{r.focusManager.set(e,l)})},pf=e=>(r,a,l,m)=>TT(r,a,l.selector).bind(g=>e(g.candidates,g.index,m.getNumRows().getOr(l.initSize.numRows),m.getNumColumns().getOr(l.initSize.numColumns))),RT=(e,r,a)=>a.captureTab?N.some(!0):N.none(),B_=pf((e,r,a,l)=>OT(e,r,a,l,-1)),DT=pf((e,r,a,l)=>OT(e,r,a,l,1)),M_=pf((e,r,a,l)=>oy(e,r,a,l,-1)),BT=pf((e,r,a,l)=>oy(e,r,a,l,1)),MT=ee([Ho(Lo(af),A_(B_,DT)),Ho(Lo(lf),ty(B_,DT)),Ho(Lo(kp),mf(M_)),Ho(Lo(Ym),gf(BT)),Ho(Sl([$u,Lo(sd)]),RT),Ho(Sl([Jm,Lo(sd)]),RT),Ho(Lo(pi.concat(Qi)),(e,r,a,l)=>{return(m=e,g=a,g.focusManager.get(m).bind(h=>Gl(h,g.selector))).bind(m=>a.execute(e,r,m));var m,g})]),IT=ee([Ho(Lo(sf),(e,r,a)=>a.onEscape(e,r)),Ho(Lo(pi),Qm)]);var SD=Bi(AT,ey,MT,IT,()=>N.some(NT));const PT=(e,r,a,l,m)=>{const g=(h,v,y)=>m(h,v,l,0,y.length-1,y[v],_=>{return"button"===nt(k=y[_])&&"disabled"===zn(k,"disabled")?g(h,_,y):N.from(y[_]);var k});return TT(e,a,r).bind(h=>{const v=h.index;return g(v,v,h.candidates)})},LT=(e,r,a,l)=>PT(e,r,a,l,(m,g,h,v,y,_,k)=>{const E=Ni(g+h,v,y);return E===m?N.from(_):k(E)}),ny=(e,r,a,l)=>PT(e,r,a,l,(m,g,h,v,y,_,k)=>{const E=Pu(g,h,v,y);return E===m?N.none():k(E)}),hf=[_e("selector"),fe("getInitial",N.none),fe("execute",df),ii("onEscape"),fe("executeOnMove",!1),fe("allowVertical",!0),fe("allowHorizontal",!0),fe("cycles",!0)],ry=(e,r,a)=>{return(l=e,m=a,m.focusManager.get(l).bind(g=>Gl(g,m.selector))).bind(l=>a.execute(e,r,l));var l,m},FT=(e,r,a)=>{r.getInitial(e).orThunk(()=>Gn(e.element,r.selector)).each(l=>{r.focusManager.set(e,l)})},sy=(e,r,a)=>(a.cycles?ny:LT)(e,a.selector,r,-1),I_=(e,r,a)=>(a.cycles?ny:LT)(e,a.selector,r,1),zT=e=>(r,a,l,m)=>e(r,a,l,m).bind(()=>l.executeOnMove?ry(r,a,l):N.some(!0)),HT=ee([Ho(Lo(pi),Qm),Ho(Lo(sf),(e,r,a)=>a.onEscape(e,r))]);var VT=Bi(hf,xl.init,(e,r,a,l)=>{const m=[...a.allowHorizontal?af:[]].concat(a.allowVertical?kp:[]),g=[...a.allowHorizontal?lf:[]].concat(a.allowVertical?Ym:[]);return[Ho(Lo(m),zT(A_(sy,I_))),Ho(Lo(g),zT(ty(sy,I_))),Ho(Lo(Qi),ry),Ho(Lo(pi),ry)]},HT,()=>N.some(FT));const ay=(e,r,a)=>N.from(e[r]).bind(l=>N.from(l[a]).map(m=>({rowIndex:r,columnIndex:a,cell:m}))),UT=(e,r,a,l)=>{const g=Pu(a,l,0,e[r].length-1);return ay(e,r,g)},iy=(e,r,a,l)=>{const m=Pu(a,l,0,e.length-1),h=Ni(r,0,e[m].length-1);return ay(e,m,h)},ly=(e,r,a,l)=>{const g=Ni(a+l,0,e[r].length-1);return ay(e,r,g)},P_=(e,r,a,l)=>{const m=Ni(a+l,0,e.length-1),h=Ni(r,0,e[m].length-1);return ay(e,m,h)},kl=[zo("selectors",[_e("row"),_e("cell")]),fe("cycles",!0),fe("previousSelector",N.none),fe("execute",df)],Tp=(e,r,a)=>{r.previousSelector(e).orThunk(()=>Gn(e.element,r.selectors.cell)).each(l=>{r.focusManager.set(e,l)})},Op=(e,r)=>(a,l,m)=>{const g=m.cycles?e:r;return Gl(l,m.selectors.row).bind(h=>{const v=Wa(h,m.selectors.cell);return R_(v,l).bind(y=>{const _=Wa(a,m.selectors.row);return R_(_,h).bind(k=>{const E=(B=m,Je(_,L=>Wa(L,B.selectors.cell)));var B;return g(E,k,y).map(A=>A.cell)})})})},cy=Op((e,r,a)=>UT(e,r,a,-1),(e,r,a)=>ly(e,r,a,-1)),ff=Op((e,r,a)=>UT(e,r,a,1),(e,r,a)=>ly(e,r,a,1)),L_=Op((e,r,a)=>iy(e,a,r,-1),(e,r,a)=>P_(e,a,r,-1)),kD=Op((e,r,a)=>iy(e,a,r,1),(e,r,a)=>P_(e,a,r,1)),ED=ee([Ho(Lo(af),A_(cy,ff)),Ho(Lo(lf),ty(cy,ff)),Ho(Lo(kp),mf(L_)),Ho(Lo(Ym),gf(kD)),Ho(Lo(pi.concat(Qi)),(e,r,a)=>Ec(e.element).bind(l=>a.execute(e,r,l)))]),jT=ee([Ho(Lo(pi),Qm)]);var F_=Bi(kl,xl.init,ED,jT,()=>N.some(Tp));const eg=[_e("selector"),fe("execute",df),fe("moveOnTab",!1)],z_=(e,r,a)=>a.focusManager.get(e).bind(l=>a.execute(e,r,l)),H_=(e,r,a)=>{Gn(e.element,r.selector).each(l=>{r.focusManager.set(e,l)})},V_=(e,r,a)=>ny(e,a.selector,r,-1),U_=(e,r,a)=>ny(e,a.selector,r,1),$T=ee([Ho(Lo(kp),Zm(V_)),Ho(Lo(Ym),Zm(U_)),Ho(Sl([$u,Lo(sd)]),(e,r,a,l)=>a.moveOnTab?Zm(V_)(e,r,a,l):N.none()),Ho(Sl([Jm,Lo(sd)]),(e,r,a,l)=>a.moveOnTab?Zm(U_)(e,r,a,l):N.none()),Ho(Lo(Qi),z_),Ho(Lo(pi),z_)]),WT=ee([Ho(Lo(pi),Qm)]);var qT=Bi(eg,xl.init,$T,WT,()=>N.some(H_));const j_=[ii("onSpace"),ii("onEnter"),ii("onShiftEnter"),ii("onLeft"),ii("onRight"),ii("onTab"),ii("onShiftTab"),ii("onUp"),ii("onDown"),ii("onEscape"),fe("stopSpaceKeyup",!1),fo("focusIn")];var TD=Bi(j_,xl.init,(e,r,a)=>[Ho(Lo(pi),a.onSpace),Ho(Sl([Jm,Lo(Qi)]),a.onEnter),Ho(Sl([$u,Lo(Qi)]),a.onShiftEnter),Ho(Sl([$u,Lo(sd)]),a.onShiftTab),Ho(Sl([Jm,Lo(sd)]),a.onTab),Ho(Lo(kp),a.onUp),Ho(Lo(Ym),a.onDown),Ho(Lo(af),a.onLeft),Ho(Lo(lf),a.onRight),Ho(Lo(pi),a.onSpace)],(e,r,a)=>[...a.stopSpaceKeyup?[Ho(Lo(pi),Qm)]:[],Ho(Lo(sf),a.onEscape)],e=>e.focusIn);const GT=Ep.schema(),KT=Zv.schema(),OD=VT.schema(),YT=SD.schema(),AD=F_.schema(),dy=ST.schema(),ND=qT.schema(),XT=TD.schema(),pt=xE({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:GT,cyclic:KT,flow:OD,flatgrid:YT,matrix:AD,execution:dy,menu:ND,special:XT}),name:"keying",active:{events:(e,r)=>e.handler.toEvents(e,r)},apis:{focusIn:(e,r,a)=>{r.sendFocusIn(r).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},l=>{l(e,r,a)})},setGridSize:(e,r,a,l,m)=>{zr(a,"setGridSize")?a.setGridSize(l,m):console.error("Layout does not support setGridSize")}},state:kT}),JT=(e,r)=>{Fw(()=>{((a,l,m)=>{const g=a.components();var y;yt((y=a).components(),_=>Oi(_.element)),Yc(y.element),y.syncComponents();const h=Je(r,e.getSystem().build),v=Is(g,h);yt(v,y=>{Oc(y),a.getSystem().removeFromWorld(y)}),yt(h,y=>{o_(y)?r_(a,y):(a.getSystem().addToWorld(y),r_(a,y),ps(a.element)&&$h(y))}),a.syncComponents()})(e)},e.element)},$_=(e,r)=>{Fw(()=>{((a,l,m)=>{const g=a.components(),h=ft(l,_=>fv(_).toArray());yt(g,_=>{wo(h,_)||n_(_)});const v=(_=e.element,k=r,E=e.getSystem().buildOrPatch,cp(_,k,(A,B)=>Nu(_,B,A,E))),y=Is(g,v);var _,k,E;yt(y,_=>{o_(_)&&n_(_)}),yt(v,_=>{o_(_)||nT(a,_)}),a.syncComponents()})(e,r)},e.element)},QT=(e,r,a,l)=>{n_(r);const m=Nu(e.element,a,l,e.getSystem().buildOrPatch);nT(e,m),e.syncComponents()},uy=(e,r,a)=>{const l=e.getSystem().build(a);s_(e,l,r)},ZT=(e,r,a,l)=>{_l(r),uy(e,(m,g)=>{return v=g,void ul(h=m,a).fold(()=>{Os(h,v)},_=>{pr(_,v)});var h,v},l)},my=(e,r)=>e.components(),eO=(e,r,a,l,m)=>{const g=my(e);return N.from(g[l]).map(h=>(m.fold(()=>_l(h),v=>{(r.reuseDom?QT:ZT)(e,h,l,v)}),h))};var RD=Object.freeze({__proto__:null,append:(e,r,a,l)=>{uy(e,Os,l)},prepend:(e,r,a,l)=>{uy(e,yu,l)},remove:(e,r,a,l)=>{const m=my(e);Ee(m,h=>Jo(l.element,h.element)).each(_l)},replaceAt:eO,replaceBy:(e,r,a,l,m)=>{const g=my(e);return ha(g,l).bind(h=>eO(e,r,0,h,m))},set:(e,r,a,l)=>(r.reuseDom?$_:JT)(e,l),contents:my});const so=Ns({fields:[is("reuseDom",!0)],name:"replacing",apis:RD}),go=(e,r)=>({key:e,value:{config:{},me:((l,m)=>{const g=Cn(m);return Ns({fields:[_e("enabled")],name:l,active:{events:ee(g)}})})(e,r),configAsRaw:ee({}),initialConfig:{},state:xl}}),tO=(e,r)=>{r.ignore||(wl(e.element),r.onFocus(e))};var DD=Object.freeze({__proto__:null,focus:tO,blur:(e,r)=>{r.ignore||Lw(e.element)},isFocused:e=>Rs(e.element)}),oO=Object.freeze({__proto__:null,exhibit:(e,r)=>_c(r.ignore?{}:{attributes:{tabindex:"-1"}}),events:e=>Cn([Me(Rd(),(r,a)=>{tO(r,e),a.stop()})].concat(e.stopMousedown?[Me(ua(),(r,a)=>{a.event.prevent()})]:[]))}),nO=[Uo("onFocus"),fe("stopMousedown",!1),fe("ignore",!1)];const $t=Ns({fields:nO,name:"focusing",active:oO,apis:DD}),bf=(e,r,a,l)=>{const m=a.get();var g,v;a.set(l),g=e,v=a,r.toggleClass.each(y=>{v.get()?Zo(g.element,y):sr(g.element,y)}),((g,h,v)=>{const y=h.aria;y.update(g,y,v.get())})(e,r,a),m!==l&&r.onToggled(e,l)},W_=(e,r,a)=>{bf(e,r,a,!a.get())},q_=(e,r,a)=>{bf(e,r,a,r.selected)};var Gu=Object.freeze({__proto__:null,onLoad:q_,toggle:W_,isOn:(e,r,a)=>a.get(),on:(e,r,a)=>{bf(e,r,a,!0)},off:(e,r,a)=>{bf(e,r,a,!1)},set:bf}),rO=Object.freeze({__proto__:null,exhibit:()=>_c({}),events:(e,r)=>{const a=(l=e,m=r,g=W_,si(v=>{g(v,l,m)}));var l,m,g;const h=Mw(e,r,q_);return Cn(Rt([e.toggleOnExecute?[a]:[],[h]]))}});const G_=(e,r,a)=>{ro(e.element,"aria-expanded",a)};var K_=[fe("selected",!1),fo("toggleClass"),fe("toggleOnExecute",!0),Uo("onToggled"),Dr("aria",{mode:"none"},xo("mode",{pressed:[fe("syncWithExpanded",!1),In("update",(e,r,a)=>{ro(e.element,"aria-pressed",a),r.syncWithExpanded&&G_(e,0,a)})],checked:[In("update",(e,r,a)=>{ro(e.element,"aria-checked",a)})],expanded:[In("update",G_)],selected:[In("update",(e,r,a)=>{ro(e.element,"aria-selected",a)})],none:[In("update",Qe)]}))];const Co=Ns({fields:K_,name:"toggling",active:rO,apis:Gu,state:{init:()=>{const e=Ot(!1);return{get:()=>e.get(),set:r=>e.set(r),clear:()=>e.set(!1),readState:()=>e.get()}}}}),Y_=()=>{const e=(r,a)=>{a.stop(),Tu(r)};return[Me(Ca(),e),Me(br(),e),Am(vl()),Am(ua())]},Ap=e=>Cn(Rt([e.map(r=>si((a,l)=>{r(a),l.stop()})).toArray(),Y_()])),gy="alloy.item-hover",sO="alloy.item-focus",zd="alloy.item-toggled",X_=e=>{(Ec(e.element).isNone()||$t.isFocused(e))&&($t.isFocused(e)||$t.focus(e),Bt(e,gy,{item:e}))},J_=e=>{Bt(e,sO,{item:e})},aO=ee(gy),BD=ee(sO),vf=ee(zd),yf=e=>e.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),iO=[_e("data"),_e("components"),_e("dom"),fe("hasSubmenu",!1),fo("toggling"),Um("itemBehaviours",[Co,$t,pt,at]),fe("ignoreFocus",!1),fe("domModification",{}),In("builder",e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:yf(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:jm(e.itemBehaviours,[e.toggling.fold(Co.revoke,r=>{return Co.config({aria:{mode:"checked"},...sc(a=r,(l,m)=>"exclusive"!==m),onToggled:(l,m)=>{var g;an(a.onToggled)&&a.onToggled(l,m),Bt(g=l,zd,{item:g,state:m})}});var a}),$t.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:r=>{J_(r)}}),pt.config({mode:"execution"}),at.config({store:{mode:"memory",initialValue:e.data}}),go("item-type-events",[...Y_(),Me(yl(),X_),Me(Sh(),$t.focus)])]),components:e.components,eventOrder:e.eventOrder})),fe("eventOrder",{})],lO=[_e("dom"),_e("components"),In("builder",e=>({dom:e.dom,components:e.components,events:Cn([aE(Sh())])}))],ad=ee("item-widget"),id=ee([ga({name:"widget",overrides:e=>({behaviours:ve([at.config({store:{mode:"manual",getValue:r=>e.data,setValue:Qe}})])})})]),cO=[_e("uid"),_e("data"),_e("components"),_e("dom"),fe("autofocus",!1),fe("ignoreFocus",!1),Um("widgetBehaviours",[at,$t,pt]),fe("domModification",{}),Kv(id()),In("builder",e=>{const r=ef(ad(),e,id()),a=tf(ad(),e,r.internals()),l=g=>fn(g,e,"widget").map(h=>(pt.focusIn(h),h)),m=(g,h)=>(Km(h.event.target)||e.autofocus&&h.setSource(g.element),N.none());return{dom:e.dom,components:a,domModification:e.domModification,events:Cn([si((g,h)=>{l(g).each(v=>{h.stop()})}),Me(yl(),X_),Me(Sh(),(g,h)=>{e.autofocus?l(g):$t.focus(g)})]),behaviours:jm(e.widgetBehaviours,[at.config({store:{mode:"memory",initialValue:e.data}}),$t.config({ignore:e.ignoreFocus,onFocus:g=>{J_(g)}}),pt.config({mode:"special",focusIn:e.autofocus?g=>{l(g)}:wE(),onLeft:m,onRight:m,onEscape:(g,h)=>$t.isFocused(g)||e.autofocus?(e.autofocus&&h.setSource(g.element),N.none()):($t.focus(g),N.some(!0))})])}})],Hd=xo("type",{widget:cO,item:iO,separator:lO}),Q_=ee([Qh({factory:{sketch:e=>{const r=co("menu.spec item",Hd,e);return r.builder(r)}},name:"items",unit:"item",defaults:(e,r)=>vo(r,"uid")?r:{...r,uid:Rm("item")},overrides:(e,r)=>({type:r.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),dO=ee([_e("value"),_e("items"),_e("dom"),_e("components"),fe("eventOrder",{}),ys("menuBehaviours",[en,at,_o,pt]),Dr("movement",{mode:"menu",moveOnTab:!0},xo("mode",{grid:[wv(),In("config",(e,r)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:e.focusManager}))],matrix:[In("config",(e,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+e.markers.item},previousSelector:r.previousSelector,focusManager:e.focusManager})),_e("rowSelector"),fe("previousSelector",N.none)],menu:[fe("moveOnTab",!0),In("config",(e,r)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:r.moveOnTab,focusManager:e.focusManager}))]})),Bo("markers",hE()),fe("fakeFocus",!1),fe("focusManager",Qv()),Uo("onHighlight"),Uo("onDehighlight")]),Z_=ee("alloy.menu-focus"),Ku=$s({name:"Menu",configFields:dO(),partFields:Q_(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:ar(e.menuBehaviours,[en.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),at.config({store:{mode:"memory",initialValue:e.value}}),_o.config({find:N.some}),pt.config(e.movement.config(e,e.movement))]),events:Cn([Me(BD(),(m,g)=>{const h=g.event;m.getSystem().getByDom(h.target).each(v=>{en.highlight(m,v),g.stop(),Bt(m,Z_(),{menu:m,item:v})})}),Me(aO(),(m,g)=>{en.highlight(m,g.event.item)}),Me(vf(),(m,g)=>{const{item:h,state:v}=g.event;v&&"menuitemradio"===zn(h.element,"role")&&((y,_)=>{const k=Wa(y.element,'[role="menuitemradio"][aria-checked="true"]');yt(k,E=>{Jo(E,_.element)||y.getSystem().getByDom(E).each(A=>{Co.off(A)})})})(m,h)})]),components:r,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),py=(e,r,a,l)=>lt(a,l).bind(m=>lt(e,m).bind(g=>{const h=py(e,r,a,g);return N.some([g].concat(h))})).getOr([]),eC=e=>"prepared"===e.type?N.some(e.menu):N.none(),ID=eC,uO=bt("tiered-menu-item-highlight"),xf=bt("tiered-menu-item-dehighlight");var pa;!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(pa||(pa={}));const tC=ee("collapse-item"),tg=gi({name:"TieredMenu",configFields:[Ph("onExecute"),Ph("onEscape"),Zc("onOpenMenu"),Zc("onOpenSubmenu"),Uo("onRepositionMenu"),Uo("onCollapseMenu"),fe("highlightOnOpen",pa.HighlightMenuAndItem),zo("data",[_e("primary"),_e("menus"),_e("expansions")]),fe("fakeFocus",!1),Uo("onHighlightItem"),Uo("onDehighlightItem"),Uo("onHover"),Mu(),_e("dom"),fe("navigateOnHover",!0),fe("stayInDom",!1),ys("tmenuBehaviours",[pt,en,_o,so]),fe("eventOrder",{})],apis:{collapseMenu:(e,r)=>{e.collapseMenu(r)},highlightPrimary:(e,r)=>{e.highlightPrimary(r)},repositionMenus:(e,r)=>{e.repositionMenus(r)}},factory:(e,r)=>{const a=Un(),l=(()=>{const e=Ot({}),r=Ot({}),a=Ot({}),l=Un(),m=Ot({}),g=y=>h(y).bind(eC),h=y=>lt(r.get(),y),v=y=>lt(e.get(),y);return{setMenuBuilt:(y,_)=>{r.set({...r.get(),[y]:{type:"prepared",menu:_}})},setContents:(y,_,k,E)=>{l.set(y),e.set(k),r.set(_),m.set(E);const A=((B,L)=>{const G={};gn(B,(z,Y)=>{yt(z,Z=>{G[Z]=Y})});const K=L,Q=dr(L,(z,Y)=>({k:z,v:Y})),W=pn(Q,(z,Y)=>[Y].concat(py(G,K,Q,Y)));return pn(G,z=>lt(W,z).getOr([z]))})(E,k);a.set(A)},expand:y=>lt(e.get(),y).map(_=>{const k=lt(a.get(),y).getOr([]);return[_].concat(k)}),refresh:y=>lt(a.get(),y),collapse:y=>lt(a.get(),y).bind(_=>_.length>1?N.some(_.slice(1)):N.none()),lookupMenu:h,lookupItem:v,otherMenus:y=>{const _=m.get();return Is(Rn(_),y)},getPrimary:()=>l.get().bind(g),getMenus:()=>r.get(),clear:()=>{e.set({}),r.set({}),a.set({}),l.clear()},isClear:()=>l.get().isNone(),getTriggeringPath:(y,_)=>{const k=st(v(y).toArray(),E=>g(E).isSome());return lt(a.get(),y).bind(E=>{const A=Nn(k.concat(E));return(B=>{const L=[];for(let G=0;G<B.length;G++){const K=B[G];if(!K.isSome())return N.none();L.push(K.getOrDie())}return N.some(L)})(ft(A,(B,L)=>{return(G=B,K=_,Q=A.slice(0,L+1),g(G).bind(W=>{return(z=G,Fr(e.get(),(Y,Z)=>Y===z)).bind(z=>K(z).map(Y=>({triggeredMenu:W,triggeringItem:Y,triggeringPath:Q})));var z})).fold(()=>Nr(l.get(),B)?[]:[N.none()],G=>[N.some(G)]);var G,K,Q}))})}}})(),m=z=>at.getValue(z).value,h=en.highlight,v=(z,Y)=>{h(z,Y),en.getHighlighted(Y).orThunk(()=>en.getFirst(Y)).each(Z=>{e.fakeFocus?en.highlight(Y,Z):uv(z,Z.element,Sh())})},y=(z,Y)=>gs(Je(Y,Z=>z.lookupMenu(Z).bind(te=>"prepared"===te.type?N.some(te.menu):N.none()))),_=(z,Y,Z)=>{const te=y(Y,Y.otherMenus(Z));yt(te,ae=>{Tr(ae.element,[e.markers.backgroundMenu]),e.stayInDom||so.remove(z,ae)})},k=(z,Y)=>{const Z=(te=z,a.get().getOrThunk(()=>{const ae={},Ce=Wa(te.element,`.${e.markers.item}`),De=st(Ce,Fe=>"true"===zn(Fe,"aria-haspopup"));return yt(De,Fe=>{te.getSystem().getByDom(Fe).each(Ie=>{const ot=m(Ie);ae[ot]=Ie})}),a.set(ae),ae}));var te;gn(Z,(te,ae)=>{const Ce=wo(Y,ae);ro(te.element,"aria-expanded",Ce)})},E=(z,Y,Z)=>N.from(Z[0]).bind(te=>Y.lookupMenu(te).bind(ae=>{if("notbuilt"===ae.type)return N.none();{const Ce=ae.menu,De=y(Y,Z.slice(1));return yt(De,Fe=>{Zo(Fe.element,e.markers.backgroundMenu)}),ps(Ce.element)||so.append(z,Yi(Ce)),Tr(Ce.element,[e.markers.backgroundMenu]),v(z,Ce),_(z,Y,Z),N.some(Ce)}}));let A;var z;(z=A||(A={}))[z.HighlightSubmenu=0]="HighlightSubmenu",z[z.HighlightParent=1]="HighlightParent";const B=(z,Y,Z=A.HighlightSubmenu)=>{if(Y.hasConfigured(Ut)&&Ut.isDisabled(Y))return N.some(Y);{const te=m(Y);return l.expand(te).bind(ae=>(k(z,ae),N.from(ae[0]).bind(Ce=>l.lookupMenu(Ce).bind(De=>{const Fe=((Ie,ot,ht)=>{if("notbuilt"===ht.type){const At=Ie.getSystem().build(ht.nbMenu());return l.setMenuBuilt(ot,At),At}return ht.menu})(z,Ce,De);return ps(Fe.element)||so.append(z,Yi(Fe)),e.onOpenSubmenu(z,Y,Fe,Nn(ae)),Z===A.HighlightSubmenu?(en.highlightFirst(Fe),E(z,l,ae)):(en.dehighlightAll(Fe),N.some(Y))}))))}},L=(z,Y)=>{const Z=m(Y);return l.collapse(Z).bind(te=>(k(z,te),E(z,l,te).map(ae=>(e.onCollapseMenu(z,Y,ae),ae))))},G=z=>(Y,Z)=>Gl(Z.getSource(),`.${e.markers.item}`).bind(te=>Y.getSystem().getByDom(te).toOptional().bind(ae=>z(Y,ae).map(un))),K=Cn([Me(Z_(),(z,Y)=>{l.lookupItem(m(Y.event.item)).each(()=>{en.highlight(z,Y.event.menu);const ae=m(Y.event.item);l.refresh(ae).each(Ce=>_(z,l,Ce))})}),si((z,Y)=>{const Z=Y.event.target;z.getSystem().getByDom(Z).each(te=>{0===m(te).indexOf("collapse-item")&&L(z,te),B(z,te,A.HighlightSubmenu).fold(()=>{e.onExecute(z,te)},Qe)})}),qn((z,Y)=>{(Z=>{const te=(Ce=Z,De=e.data.primary,pn(e.data.menus,(Ie,ot)=>{const ht=()=>Ku.sketch({...Ie,value:ot,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(At,Qt)=>{Bt(At,uO,{menuComp:At,itemComp:Qt})},onDehighlight:(At,Qt)=>{Bt(At,xf,{menuComp:At,itemComp:Qt})},focusManager:e.fakeFocus?CD():Qv()});return ot===De?{type:"prepared",menu:Ce.getSystem().build(ht())}:{type:"notbuilt",nbMenu:ht}})),ae=pn(e.data.menus,(Y,Z)=>ft(Y.items,te=>"separator"===te.type?[]:[te.data.value]));var Ce,De;return l.setContents(e.data.primary,te,e.data.expansions,ae),l.getPrimary()})(z).each(Z=>{so.append(z,Yi(Z)),e.onOpenMenu(z,Z),e.highlightOnOpen===pa.HighlightMenuAndItem?v(z,Z):e.highlightOnOpen===pa.HighlightJustMenu&&h(z,Z)})}),Me(uO,(z,Y)=>{e.onHighlightItem(z,Y.event.menuComp,Y.event.itemComp)}),Me(xf,(z,Y)=>{e.onDehighlightItem(z,Y.event.menuComp,Y.event.itemComp)}),...e.navigateOnHover?[Me(aO(),(z,Y)=>{const Z=Y.event.item;((te,ae)=>{const Ce=m(ae);l.refresh(Ce).bind(De=>(k(te,De),E(te,l,De)))})(z,Z),B(z,Z,A.HighlightParent),e.onHover(z,Z)})]:[]]),Q=z=>en.getHighlighted(z).bind(en.getHighlighted),W={collapseMenu:z=>{Q(z).each(Y=>{L(z,Y)})},highlightPrimary:z=>{l.getPrimary().each(Y=>{v(z,Y)})},repositionMenus:z=>{l.getPrimary().bind(Z=>Q(z).bind(te=>{const ae=m(te),Ce=Jr(l.getMenus()),De=gs(Je(Ce,ID));return l.getTriggeringPath(ae,Fe=>{return ht=Fe,Ps(De,At=>{if(!At.getSystem().isConnected())return N.none();const Qt=en.getCandidates(At);return Ee(Qt,oo=>m(oo)===ht)});var ht})}).map(te=>({primary:Z,triggeringPath:te}))).fold(()=>{var Z;(Z=z,N.from(Z.components()[0]).filter(te=>"menu"===zn(te.element,"role"))).each(Z=>{e.onRepositionMenu(z,Z,[])})},({primary:Z,triggeringPath:te})=>{e.onRepositionMenu(z,Z,te)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:ar(e.tmenuBehaviours,[pt.config({mode:"special",onRight:G((z,Y)=>Km(Y.element)?N.none():B(z,Y,A.HighlightSubmenu)),onLeft:G((z,Y)=>Km(Y.element)?N.none():L(z,Y)),onEscape:G((z,Y)=>L(z,Y).orThunk(()=>e.onEscape(z,Y).map(()=>z))),focusIn:(z,Y)=>{l.getPrimary().each(Z=>{uv(z,Z.element,Sh())})}}),en.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),_o.config({find:z=>en.getHighlighted(z)}),so.config({})]),eventOrder:e.eventOrder,apis:W,events:K}},extraApis:{tieredData:(e,r,a)=>({primary:e,menus:r,expansions:a}),singleData:(e,r)=>({primary:e,menus:Fa(e,r),expansions:{}}),collapseItem:e=>({value:bt(tC()),meta:{text:e}})}}),Zn=gi({name:"InlineView",configFields:[_e("lazySink"),Uo("onShow"),Uo("onHide"),Vn("onEscape"),ys("inlineBehaviours",[jo,at,Ri]),cn("fireDismissalEventInstead",[fe("event",Dd())]),cn("fireRepositionEventInstead",[fe("event",nE())]),fe("getRelated",N.none),fe("isExtraPart",Ve),fe("eventOrder",N.none)],factory:(e,r)=>{const a=(h,v,y,_)=>{const k=e.lazySink(h).getOrDie();jo.openWhileCloaked(h,v,()=>ma.positionWithinBounds(k,h,y,_())),at.setValue(h,N.some({mode:"position",config:y,getBounds:_}))},l=(h,v,y,_)=>{const k=((E,A,B,L,G)=>{const K=()=>E.lazySink(A),Q="horizontal"===L.type?{layouts:{onLtr:()=>Sv(),onRtl:()=>kv()}}:{},W=z=>2===z.length?Q:{};return tg.sketch({dom:{tag:"div"},data:L.data,markers:L.menu.markers,highlightOnOpen:L.menu.highlightOnOpen,fakeFocus:L.menu.fakeFocus,onEscape:()=>(jo.close(A),E.onEscape.map(z=>z(A)),N.some(!0)),onExecute:()=>N.some(!0),onOpenMenu:(z,Y)=>{ma.positionWithinBounds(K().getOrDie(),Y,B,G())},onOpenSubmenu:(z,Y,Z,te)=>{const ae=K().getOrDie();ma.position(ae,Z,{anchor:{type:"submenu",item:Y,...W(te)}})},onRepositionMenu:(z,Y,Z)=>{const te=K().getOrDie();ma.positionWithinBounds(te,Y,B,G()),yt(Z,ae=>{const Ce=W(ae.triggeringPath);ma.position(te,ae.triggeredMenu,{anchor:{type:"submenu",item:ae.triggeringItem,...Ce}})})}})})(e,h,v,y,_);jo.open(h,k),at.setValue(h,N.some({mode:"menu",menu:k}))},m=h=>{jo.isOpen(h)&&at.getValue(h).each(v=>{switch(v.mode){case"menu":jo.getState(h).each(tg.repositionMenus);break;case"position":const y=e.lazySink(h).getOrDie();ma.positionWithinBounds(y,h,v.config,v.getBounds())}})},g={setContent:(h,v)=>{jo.setContent(h,v)},showAt:(h,v,y)=>{a(h,v,y,N.none)},showWithinBounds:a,showMenuAt:(h,v,y)=>{l(h,v,y,N.none)},showMenuWithinBounds:l,hide:h=>{jo.isOpen(h)&&(at.setValue(h,N.none()),jo.close(h))},getContent:h=>jo.getState(h),reposition:m,isOpen:jo.isOpen};return{uid:e.uid,dom:e.dom,behaviours:ar(e.inlineBehaviours,[jo.config({isPartOf:(h,v,y)=>{return Sc(v,y)||(k=y,e.getRelated(h).exists(E=>Sc(E,k)));var k},getAttachPoint:h=>e.lazySink(h).getOrDie(),onOpen:h=>{e.onShow(h)},onClose:h=>{e.onHide(h)}}),at.config({store:{mode:"memory",initialValue:N.none()}}),Ri.config({channels:{...Hm({isExtraPart:r.isExtraPart,...e.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...zv({...e.fireRepositionEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({}),doReposition:m})}})]),eventOrder:e.eventOrder,apis:g}},apis:{showAt:(e,r,a,l)=>{e.showAt(r,a,l)},showWithinBounds:(e,r,a,l,m)=>{e.showWithinBounds(r,a,l,m)},showMenuAt:(e,r,a,l)=>{e.showMenuAt(r,a,l)},showMenuWithinBounds:(e,r,a,l,m)=>{e.showMenuWithinBounds(r,a,l,m)},hide:(e,r)=>{e.hide(r)},isOpen:(e,r)=>e.isOpen(r),getContent:(e,r)=>e.getContent(r),setContent:(e,r,a)=>{e.setContent(r,a)},reposition:(e,r)=>{e.reposition(r)}}});var wf=tinymce.util.Tools.resolve("tinymce.util.Delay");const Bs=gi({name:"Button",factory:e=>{const r=Ap(e.action),a=e.dom.tag,l=m=>lt(e.dom,"attributes").bind(g=>lt(g,m));return{uid:e.uid,dom:e.dom,components:e.components,events:r,behaviours:jm(e.buttonBehaviours,[$t.config({}),pt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===a?{type:l("type").getOr("button"),...l("role").map(m=>({role:m})).getOr({})}:{role:e.role.getOr(l("role").getOr("button"))}},eventOrder:e.eventOrder}},configFields:[fe("uid",void 0),_e("dom"),fe("components",[]),Um("buttonBehaviours",[$t,pt]),fo("action"),fo("role"),fe("eventOrder",{})]}),ld=e=>{const r=((e,r)=>{const a=document.createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,e),new Error(l)}return ba(a.childNodes[0])})(e),a=Ti(r),l=qt(void 0!==(h=r).dom.attributes?h.dom.attributes:[],(y,_)=>"class"===_.name?y:{...y,[_.name]:_.value},{}),m=(h=>Array.prototype.slice.call(h.dom.classList,0))(r),g=0===a.length?{}:{innerHtml:Fs(r)};var h;return{tag:nt(r),classes:m,attributes:l,...g}},dn=e=>{const r=void 0!==e.uid&&zr(e,"uid")?e.uid:Rm("memento");return{get:a=>a.getSystem().getByUid(r).getOrDie(),getOpt:a=>a.getSystem().getByUid(r).toOptional(),asSpec:()=>({...e,uid:r})}},{entries:hy,setPrototypeOf:oC,isFrozen:mO,getPrototypeOf:_f,getOwnPropertyDescriptor:Cf}=Object;let{freeze:qa,seal:Xl,create:gO}=Object,{apply:fy,construct:by}=typeof Reflect<"u"&&Reflect;fy||(fy=function(e,r,a){return e.apply(r,a)}),qa||(qa=function(e){return e}),Xl||(Xl=function(e){return e}),by||(by=function(e,r){return new e(...r)});const PD=Ql(Array.prototype.forEach),pO=Ql(Array.prototype.pop),Yu=Ql(Array.prototype.push),Np=Ql(String.prototype.toLowerCase),Sf=Ql(String.prototype.toString),LD=Ql(String.prototype.match),Jl=Ql(String.prototype.replace),hO=Ql(String.prototype.indexOf),FD=Ql(String.prototype.trim),Zi=Ql(RegExp.prototype.test),kf=(Xu=TypeError,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return by(Xu,r)});var Xu;function Ql(e){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),m=1;m<a;m++)l[m-1]=arguments[m];return fy(e,r,l)}}function tn(e,r,a){var l;a=null!==(l=a)&&void 0!==l?l:Np,oC&&oC(e,null);let m=r.length;for(;m--;){let g=r[m];if("string"==typeof g){const h=a(g);h!==g&&(mO(r)||(r[m]=h),g=h)}e[g]=!0}return e}function og(e){const r=gO(null);for(const[a,l]of hy(e))r[a]=l;return r}function Ac(e,r){for(;null!==e;){const a=Cf(e,r);if(a){if(a.get)return Ql(a.get);if("function"==typeof a.value)return Ql(a.value)}e=_f(e)}return function(a){return console.warn("fallback value for",a),null}}const el=qa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vy=qa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),yy=qa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fO=qa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ef=qa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),zD=qa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Tf=qa(["#text"]),xy=qa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),wy=qa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nC=qa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Of=qa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),HD=Xl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bO=Xl(/<%[\w\W]*|[\w\W]*%>/gm),rC=Xl(/\${[\w\W]*}/gm),vO=Xl(/^data-[\-\w.\u00B7-\uFFFF]/),sC=Xl(/^aria-[\-\w]+$/),Rp=Xl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_y=Xl(/^(?:\w+script|data):/i),yO=Xl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aC=Xl(/^html$/i);var Cy=Object.freeze({__proto__:null,MUSTACHE_EXPR:HD,ERB_EXPR:bO,TMPLIT_EXPR:rC,DATA_ATTR:vO,ARIA_ATTR:sC,IS_ALLOWED_URI:Rp,IS_SCRIPT_OR_DATA:_y,ATTR_WHITESPACE:yO,DOCTYPE_NAME:aC});const xO=()=>typeof window>"u"?null:window;var wO=function e(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xO();const a=ke=>e(ke);if(a.version="3.0.5",a.removed=[],!r||!r.document||9!==r.document.nodeType)return a.isSupported=!1,a;const l=r.document,m=l.currentScript;let{document:g}=r;const{DocumentFragment:h,HTMLTemplateElement:v,Node:y,Element:_,NodeFilter:k,NamedNodeMap:E=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:A,DOMParser:B,trustedTypes:L}=r,G=_.prototype,K=Ac(G,"cloneNode"),Q=Ac(G,"nextSibling"),W=Ac(G,"childNodes"),z=Ac(G,"parentNode");if("function"==typeof v){const ke=g.createElement("template");ke.content&&ke.content.ownerDocument&&(g=ke.content.ownerDocument)}let Y,Z="";const{implementation:te,createNodeIterator:ae,createDocumentFragment:Ce,getElementsByTagName:De}=g,{importNode:Fe}=l;let Ie={};a.isSupported="function"==typeof hy&&"function"==typeof z&&te&&void 0!==te.createHTMLDocument;const{MUSTACHE_EXPR:ot,ERB_EXPR:ht,TMPLIT_EXPR:At,DATA_ATTR:Qt,ARIA_ATTR:oo,IS_SCRIPT_OR_DATA:Ao,ATTR_WHITESPACE:Pn}=Cy;let{IS_ALLOWED_URI:ir}=Cy,no=null;const Ks=tn({},[...el,...vy,...yy,...Ef,...Tf]);let ao=null;const Kr=tn({},[...xy,...wy,...nC,...Of]);let Tn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ka=null,Mr=null,Ys=!0,il=!0,Zx=!1,ew=!0,xh=!1,Ug=!1,X1=!1,wh=!1,jg=!1,nv=!1,rv=!1,J1=!0,jR=!1,Q1=!0,_h=!1,$g={},Wg=null;const Ln=tn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ch=null;const cu=tn({},["audio","video","img","source","image","track"]);let xM=null;const EI=tn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$R="http://www.w3.org/1998/Math/MathML",WR="http://www.w3.org/2000/svg",qg="http://www.w3.org/1999/xhtml";let tw=qg,wM=!1,_M=null;const $L=tn({},[$R,WR,qg],Sf);let ow;const WL=["application/xhtml+xml","text/html"];let xi,nw=null;const qL=g.createElement("form"),TI=function(ke){return ke instanceof RegExp||ke instanceof Function},CM=function(ke){if(!nw||nw!==ke){if(ke&&"object"==typeof ke||(ke={}),ke=og(ke),ow=ow=-1===WL.indexOf(ke.PARSER_MEDIA_TYPE)?"text/html":ke.PARSER_MEDIA_TYPE,xi="application/xhtml+xml"===ow?Sf:Np,no="ALLOWED_TAGS"in ke?tn({},ke.ALLOWED_TAGS,xi):Ks,ao="ALLOWED_ATTR"in ke?tn({},ke.ALLOWED_ATTR,xi):Kr,_M="ALLOWED_NAMESPACES"in ke?tn({},ke.ALLOWED_NAMESPACES,Sf):$L,xM="ADD_URI_SAFE_ATTR"in ke?tn(og(EI),ke.ADD_URI_SAFE_ATTR,xi):EI,Ch="ADD_DATA_URI_TAGS"in ke?tn(og(cu),ke.ADD_DATA_URI_TAGS,xi):cu,Wg="FORBID_CONTENTS"in ke?tn({},ke.FORBID_CONTENTS,xi):Ln,Ka="FORBID_TAGS"in ke?tn({},ke.FORBID_TAGS,xi):{},Mr="FORBID_ATTR"in ke?tn({},ke.FORBID_ATTR,xi):{},$g="USE_PROFILES"in ke&&ke.USE_PROFILES,Ys=!1!==ke.ALLOW_ARIA_ATTR,il=!1!==ke.ALLOW_DATA_ATTR,Zx=ke.ALLOW_UNKNOWN_PROTOCOLS||!1,ew=!1!==ke.ALLOW_SELF_CLOSE_IN_ATTR,xh=ke.SAFE_FOR_TEMPLATES||!1,Ug=ke.WHOLE_DOCUMENT||!1,jg=ke.RETURN_DOM||!1,nv=ke.RETURN_DOM_FRAGMENT||!1,rv=ke.RETURN_TRUSTED_TYPE||!1,wh=ke.FORCE_BODY||!1,J1=!1!==ke.SANITIZE_DOM,jR=ke.SANITIZE_NAMED_PROPS||!1,Q1=!1!==ke.KEEP_CONTENT,_h=ke.IN_PLACE||!1,ir=ke.ALLOWED_URI_REGEXP||Rp,tw=ke.NAMESPACE||qg,Tn=ke.CUSTOM_ELEMENT_HANDLING||{},ke.CUSTOM_ELEMENT_HANDLING&&TI(ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Tn.tagNameCheck=ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&TI(ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Tn.attributeNameCheck=ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Tn.allowCustomizedBuiltInElements=ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xh&&(il=!1),nv&&(jg=!0),$g&&(no=tn({},[...Tf]),ao=[],!0===$g.html&&(tn(no,el),tn(ao,xy)),!0===$g.svg&&(tn(no,vy),tn(ao,wy),tn(ao,Of)),!0===$g.svgFilters&&(tn(no,yy),tn(ao,wy),tn(ao,Of)),!0===$g.mathMl&&(tn(no,Ef),tn(ao,nC),tn(ao,Of))),ke.ADD_TAGS&&(no===Ks&&(no=og(no)),tn(no,ke.ADD_TAGS,xi)),ke.ADD_ATTR&&(ao===Kr&&(ao=og(ao)),tn(ao,ke.ADD_ATTR,xi)),ke.ADD_URI_SAFE_ATTR&&tn(xM,ke.ADD_URI_SAFE_ATTR,xi),ke.FORBID_CONTENTS&&(Wg===Ln&&(Wg=og(Wg)),tn(Wg,ke.FORBID_CONTENTS,xi)),Q1&&(no["#text"]=!0),Ug&&tn(no,["html","head","body"]),no.table&&(tn(no,["tbody"]),delete Ka.tbody),ke.TRUSTED_TYPES_POLICY){if("function"!=typeof ke.TRUSTED_TYPES_POLICY.createHTML)throw kf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof ke.TRUSTED_TYPES_POLICY.createScriptURL)throw kf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Y=ke.TRUSTED_TYPES_POLICY,Z=Y.createHTML("")}else void 0===Y&&(Y=function(Lt,io){if("object"!=typeof Lt||"function"!=typeof Lt.createPolicy)return null;let Fn=null;const Ar="data-tt-policy-suffix";io&&io.hasAttribute(Ar)&&(Fn=io.getAttribute(Ar));const Yr="dompurify"+(Fn?"#"+Fn:"");try{return Lt.createPolicy(Yr,{createHTML:Ir=>Ir,createScriptURL:Ir=>Ir})}catch{return console.warn("TrustedTypes policy "+Yr+" could not be created."),null}}(L,m)),null!==Y&&"string"==typeof Z&&(Z=Y.createHTML(""));qa&&qa(ke),nw=ke}},OI=tn({},["mi","mo","mn","ms","mtext"]),AI=tn({},["foreignobject","desc","title","annotation-xml"]),GL=tn({},["title","style","font","a","script"]),qR=tn({},vy);tn(qR,yy),tn(qR,fO);const SM=tn({},Ef);tn(SM,zD);const sv=function(ke){Yu(a.removed,{element:ke});try{ke.parentNode.removeChild(ke)}catch{ke.remove()}},Z1=function(ke,Lt){try{Yu(a.removed,{attribute:Lt.getAttributeNode(ke),from:Lt})}catch{Yu(a.removed,{attribute:null,from:Lt})}if(Lt.removeAttribute(ke),"is"===ke&&!ao[ke])if(jg||nv)try{sv(Lt)}catch{}else try{Lt.setAttribute(ke,"")}catch{}},NI=function(ke){let Lt,io;if(wh)ke="<remove></remove>"+ke;else{const Yr=LD(ke,/^[\r\n\t ]+/);io=Yr&&Yr[0]}"application/xhtml+xml"===ow&&tw===qg&&(ke='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ke+"</body></html>");const Fn=Y?Y.createHTML(ke):ke;if(tw===qg)try{Lt=(new B).parseFromString(Fn,ow)}catch{}if(!Lt||!Lt.documentElement){Lt=te.createDocument(tw,"template",null);try{Lt.documentElement.innerHTML=wM?Z:Fn}catch{}}const Ar=Lt.body||Lt.documentElement;return ke&&io&&Ar.insertBefore(g.createTextNode(io),Ar.childNodes[0]||null),tw===qg?De.call(Lt,Ug?"html":"body")[0]:Ug?Lt.documentElement:Ar},RI=function(ke){return ae.call(ke.ownerDocument||ke,ke,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null,!1)},GR=function(ke){return"object"==typeof y?ke instanceof y:ke&&"object"==typeof ke&&"number"==typeof ke.nodeType&&"string"==typeof ke.nodeName},Gg=function(ke,Lt,io){Ie[ke]&&PD(Ie[ke],Fn=>{Fn.call(a,Lt,io,nw)})},DI=function(ke){let Lt;if(Gg("beforeSanitizeElements",ke,null),(io=ke)instanceof A&&("string"!=typeof io.nodeName||"string"!=typeof io.textContent||"function"!=typeof io.removeChild||!(io.attributes instanceof E)||"function"!=typeof io.removeAttribute||"function"!=typeof io.setAttribute||"string"!=typeof io.namespaceURI||"function"!=typeof io.insertBefore||"function"!=typeof io.hasChildNodes))return sv(ke),!0;var io;const Fn=xi(ke.nodeName);if(Gg("uponSanitizeElement",ke,{tagName:Fn,allowedTags:no}),ke.hasChildNodes()&&!GR(ke.firstElementChild)&&(!GR(ke.content)||!GR(ke.content.firstElementChild))&&Zi(/<[/\w]/g,ke.innerHTML)&&Zi(/<[/\w]/g,ke.textContent))return sv(ke),!0;if(!no[Fn]||Ka[Fn]){if(!Ka[Fn]&&MI(Fn)&&(Tn.tagNameCheck instanceof RegExp&&Zi(Tn.tagNameCheck,Fn)||Tn.tagNameCheck instanceof Function&&Tn.tagNameCheck(Fn)))return!1;if(Q1&&!Wg[Fn]){const Ar=z(ke)||ke.parentNode,Yr=W(ke)||ke.childNodes;if(Yr&&Ar)for(let Ir=Yr.length-1;Ir>=0;--Ir)Ar.insertBefore(K(Yr[Ir],!0),Q(ke))}return sv(ke),!0}return ke instanceof _&&!function(Ar){let Yr=z(Ar);Yr&&Yr.tagName||(Yr={namespaceURI:tw,tagName:"template"});const Ir=Np(Ar.tagName),us=Np(Yr.tagName);return!!_M[Ar.namespaceURI]&&(Ar.namespaceURI===WR?Yr.namespaceURI===qg?"svg"===Ir:Yr.namespaceURI===$R?"svg"===Ir&&("annotation-xml"===us||OI[us]):Boolean(qR[Ir]):Ar.namespaceURI===$R?Yr.namespaceURI===qg?"math"===Ir:Yr.namespaceURI===WR?"math"===Ir&&AI[us]:Boolean(SM[Ir]):Ar.namespaceURI===qg?!(Yr.namespaceURI===WR&&!AI[us])&&!(Yr.namespaceURI===$R&&!OI[us])&&!SM[Ir]&&(GL[Ir]||!qR[Ir]):!("application/xhtml+xml"!==ow||!_M[Ar.namespaceURI]))}(ke)?(sv(ke),!0):"noscript"!==Fn&&"noembed"!==Fn&&"noframes"!==Fn||!Zi(/<\/no(script|embed|frames)/i,ke.innerHTML)?(xh&&3===ke.nodeType&&(Lt=ke.textContent,Lt=Jl(Lt,ot," "),Lt=Jl(Lt,ht," "),Lt=Jl(Lt,At," "),ke.textContent!==Lt&&(Yu(a.removed,{element:ke.cloneNode()}),ke.textContent=Lt)),Gg("afterSanitizeElements",ke,null),!1):(sv(ke),!0)},BI=function(ke,Lt,io){if(J1&&("id"===Lt||"name"===Lt)&&(io in g||io in qL))return!1;if((!il||Mr[Lt]||!Zi(Qt,Lt))&&(!Ys||!Zi(oo,Lt)))if(!ao[Lt]||Mr[Lt]){if(!(MI(ke)&&(Tn.tagNameCheck instanceof RegExp&&Zi(Tn.tagNameCheck,ke)||Tn.tagNameCheck instanceof Function&&Tn.tagNameCheck(ke))&&(Tn.attributeNameCheck instanceof RegExp&&Zi(Tn.attributeNameCheck,Lt)||Tn.attributeNameCheck instanceof Function&&Tn.attributeNameCheck(Lt))||"is"===Lt&&Tn.allowCustomizedBuiltInElements&&(Tn.tagNameCheck instanceof RegExp&&Zi(Tn.tagNameCheck,io)||Tn.tagNameCheck instanceof Function&&Tn.tagNameCheck(io))))return!1}else if(!xM[Lt]&&!Zi(ir,Jl(io,Pn,""))&&("src"!==Lt&&"xlink:href"!==Lt&&"href"!==Lt||"script"===ke||0!==hO(io,"data:")||!Ch[ke])&&(!Zx||Zi(Ao,Jl(io,Pn,"")))&&io)return!1;return!0},MI=function(ke){return ke.indexOf("-")>0},II=function(ke){let Lt,io,Fn,Ar;Gg("beforeSanitizeAttributes",ke,null);const{attributes:Yr}=ke;if(!Yr)return;const Ir={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ao};for(Ar=Yr.length;Ar--;){Lt=Yr[Ar];const{name:us,namespaceURI:rw}=Lt;io="value"===us?Lt.value:FD(Lt.value);const YL=io;if(Fn=xi(us),Ir.attrName=Fn,Ir.attrValue=io,Ir.keepAttr=!0,Ir.forceKeepAttr=void 0,Gg("uponSanitizeAttribute",ke,Ir),io=Ir.attrValue,Ir.forceKeepAttr)continue;if(!Ir.keepAttr){Z1(us,ke);continue}if(!ew&&Zi(/\/>/i,io)){Z1(us,ke);continue}xh&&(io=Jl(io,ot," "),io=Jl(io,ht," "),io=Jl(io,At," "));const PI=xi(ke.nodeName);if(BI(PI,Fn,io)){if(!jR||"id"!==Fn&&"name"!==Fn||(Z1(us,ke),io="user-content-"+io),Y&&"object"==typeof L&&"function"==typeof L.getAttributeType&&!rw)switch(L.getAttributeType(PI,Fn)){case"TrustedHTML":io=Y.createHTML(io);break;case"TrustedScriptURL":io=Y.createScriptURL(io)}if(io!==YL)try{rw?ke.setAttributeNS(rw,us,io):ke.setAttribute(us,io)}catch{Z1(us,ke)}}else Z1(us,ke)}Gg("afterSanitizeAttributes",ke,null)},KL=function ke(Lt){let io;const Fn=RI(Lt);for(Gg("beforeSanitizeShadowDOM",Lt,null);io=Fn.nextNode();)Gg("uponSanitizeShadowNode",io,null),DI(io)||(io.content instanceof h&&ke(io.content),II(io));Gg("afterSanitizeShadowDOM",Lt,null)};return a.sanitize=function(ke){let Lt,io,Fn,Ar,Yr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(wM=!ke,wM&&(ke="\x3c!--\x3e"),"string"!=typeof ke&&!GR(ke)){if("function"!=typeof ke.toString)throw kf("toString is not a function");if("string"!=typeof(ke=ke.toString()))throw kf("dirty is not a string, aborting")}if(!a.isSupported)return ke;if(X1||CM(Yr),a.removed=[],"string"==typeof ke&&(_h=!1),_h){if(ke.nodeName){const rw=xi(ke.nodeName);if(!no[rw]||Ka[rw])throw kf("root node is forbidden and cannot be sanitized in-place")}}else if(ke instanceof y)Lt=NI("\x3c!----\x3e"),io=Lt.ownerDocument.importNode(ke,!0),1===io.nodeType&&"BODY"===io.nodeName||"HTML"===io.nodeName?Lt=io:Lt.appendChild(io);else{if(!jg&&!xh&&!Ug&&-1===ke.indexOf("<"))return Y&&rv?Y.createHTML(ke):ke;if(Lt=NI(ke),!Lt)return jg?null:rv?Z:""}Lt&&wh&&sv(Lt.firstChild);const Ir=RI(_h?ke:Lt);for(;Fn=Ir.nextNode();)DI(Fn)||(Fn.content instanceof h&&KL(Fn.content),II(Fn));if(_h)return ke;if(jg){if(nv)for(Ar=Ce.call(Lt.ownerDocument);Lt.firstChild;)Ar.appendChild(Lt.firstChild);else Ar=Lt;return(ao.shadowroot||ao.shadowrootmode)&&(Ar=Fe.call(l,Ar,!0)),Ar}let us=Ug?Lt.outerHTML:Lt.innerHTML;return Ug&&no["!doctype"]&&Lt.ownerDocument&&Lt.ownerDocument.doctype&&Lt.ownerDocument.doctype.name&&Zi(aC,Lt.ownerDocument.doctype.name)&&(us="<!DOCTYPE "+Lt.ownerDocument.doctype.name+">\n"+us),xh&&(us=Jl(us,ot," "),us=Jl(us,ht," "),us=Jl(us,At," ")),Y&&rv?Y.createHTML(us):us},a.setConfig=function(ke){CM(ke),X1=!0},a.clearConfig=function(){nw=null,X1=!1},a.isValidAttribute=function(ke,Lt,io){nw||CM({});const Fn=xi(ke),Ar=xi(Lt);return BI(Fn,Ar,io)},a.addHook=function(ke,Lt){"function"==typeof Lt&&(Ie[ke]=Ie[ke]||[],Yu(Ie[ke],Lt))},a.removeHook=function(ke){if(Ie[ke])return pO(Ie[ke])},a.removeHooks=function(ke){Ie[ke]&&(Ie[ke]=[])},a.removeAllHooks=function(){Ie={}},a}();const Sy=e=>wO().sanitize(e);var Mi=tinymce.util.Tools.resolve("tinymce.util.I18n");const VD={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},iC="temporary-placeholder",Af=e=>()=>lt(e,iC).getOr("!not found!"),ky=(e,r)=>{const a=e.toLowerCase();if(Mi.isRtl()){const l=Ei(m=a,"-rtl")?m:m+"-rtl";return vo(r,l)?l:a}var m;return a},lC=(e,r)=>lt(r,ky(e,r)),_O=(e,r)=>{const a=r();return lC(e,a).getOrThunk(Af(a))},Nf=()=>go("add-focusable",[qn(e=>{Du(e.element,"svg").each(r=>ro(r,"focusable","false"))})]),CO=(e,r,a,l)=>{var m,g;const h=(y=r,Mi.isRtl()&&vo(VD,y)?["tox-icon--flip"]:[]),v=lt(a,ky(r,a)).or(l).getOrThunk(Af(a));var y;return{dom:{tag:e.tag,attributes:null!==(m=e.attributes)&&void 0!==m?m:{},classes:e.classes.concat(h),innerHtml:v},behaviours:ve([...null!==(g=e.behaviours)&&void 0!==g?g:[],Nf()])}},El=(e,r,a,l=N.none())=>CO(r,e,a(),l),cC={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Dp=gi({name:"Notification",factory:e=>{const r=dn({dom:ld(`<p>${Sy(e.translationProvider(e.text))}</p>`),behaviours:ve([so.config({})])}),a=k=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${k}%`}}}),l=k=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${k}%`}}),m=dn({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:ve([so.config({})])}),g={updateProgress:(k,E)=>{k.getSystem().isConnected()&&m.getOpt(k).each(A=>{so.set(A,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(E)]},l(E)])})},updateText:(k,E)=>{if(k.getSystem().isConnected()){const A=r.get(k);so.set(A,[Or(E)])}}},h=Rt([e.icon.toArray(),e.level.toArray(),e.level.bind(k=>N.from(cC[k])).toArray()]),v=dn(Bs.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[El("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:k=>{e.onAction(k)}})),_=[((k,E,A)=>{const B=A(),L=Ee(k,G=>vo(B,ky(G,B)));return CO({tag:"div",classes:["tox-notification__icon"]},L.getOr(iC),B,N.none())})(h,0,e.iconProvider),{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:ve([so.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(k=>["tox-notification","tox-notification--in",`tox-notification--${k}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:ve([$t.config({}),go("notification-events",[Me(Wl(),k=>{v.getOpt(k).each($t.focus)})])]),components:_.concat(e.progress?[m.asSpec()]:[]).concat(e.closeButton?[v.asSpec()]:[]),apis:g}},configFields:[fo("level"),_e("progress"),fo("icon"),_e("onAction"),_e("text"),_e("iconProvider"),_e("translationProvider"),is("closeButton",!0)],apis:{updateProgress:(e,r,a)=>{e.updateProgress(r,a)},updateText:(e,r,a)=>{e.updateText(r,a)}}});var tl,Rf,Ju=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ng=tinymce.util.Tools.resolve("tinymce.EditorManager"),Bp=tinymce.util.Tools.resolve("tinymce.Env");(function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"})(tl||(tl={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(Rf||(Rf={}));const wn=e=>r=>r.options.get(e),rg=e=>r=>N.from(e(r)),dC=e=>{const r=Bp.deviceType.isPhone(),a=Bp.deviceType.isTablet()||r,l=e.options.register,m=h=>So(h)||!1===h,g=h=>So(h)||qo(h);l("skin",{processor:h=>So(h)||!1===h,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(e.getElement().offsetHeight,400)}),l("width",{processor:g,default:Ju.DOM.getStyle(e.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>So(h)||Js(h),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>Js(h)||So(h)||On(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),H(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Rf.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:e.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:m,default:"#top"}),l("anchor_bottom",{processor:m,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>"both"===h||Js(h),default:!Bp.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},uC=wn("readonly"),Ey=wn("height"),Ty=wn("width"),Df=rg(wn("min_width")),Oy=rg(wn("min_height")),Qu=rg(wn("max_width")),mC=rg(wn("max_height")),Ay=rg(wn("style_formats")),Ny=wn("style_formats_merge"),Ry=wn("style_formats_autohide"),Dy=wn("content_langs"),SO=wn("removed_menuitems"),Mp=wn("toolbar_mode"),By=wn("toolbar_groups"),My=wn("toolbar_location"),UD=wn("fixed_toolbar_container"),jD=wn("fixed_toolbar_container_target"),Iy=wn("toolbar_persist"),kO=wn("toolbar_sticky_offset"),Bf=wn("menubar"),Ip=wn("toolbar"),gC=wn("file_picker_callback"),Py=wn("file_picker_validator_handler"),Ly=wn("font_size_input_default_unit"),pC=wn("file_picker_types"),Fy=wn("typeahead_urls"),Mf=wn("anchor_top"),hC=wn("anchor_bottom"),Nc=wn("draggable_modal"),zy=wn("statusbar"),Pp=wn("elementpath"),Hy=wn("branding"),Vy=wn("resize"),Uy=wn("paste_as_text"),jy=wn("sidebar_show"),fC=wn("promotion"),bC=wn("help_accessibility"),EO=wn("default_font_stack"),$y=e=>!1===e.options.get("skin"),If=e=>!1!==e.options.get("menubar"),Pf=e=>{const r=e.options.get("skin_url");if($y(e))return r;if(r)return e.documentBaseURI.toAbsolute(r);{const a=e.options.get("skin");return ng.baseURL+"/skins/ui/"+a}},Zu=e=>N.from(e.options.get("skin_url")),vC=e=>e.options.get("line_height_formats").split(" "),Lf=e=>{const r=Ip(e),a=So(r),l=On(r)&&r.length>0;return!Lp(e)&&(l||a||!0===r)},Wy=e=>{const r=H(9,l=>e.options.get("toolbar"+(l+1))),a=st(r,So);return Hr(a.length>0,a)},Lp=e=>Wy(e).fold(()=>{const r=Ip(e);return vn(r,So)&&r.length>0},un),qy=e=>My(e)===Rf.bottom,yC=e=>{var r;if(!e.inline)return N.none();const a=null!==(r=UD(e))&&void 0!==r?r:"";if(a.length>0)return Gn(va(),a);const l=jD(e);return vt(l)?N.some(oe(l)):N.none()},sg=e=>e.inline&&yC(e).isSome(),Ff=e=>yC(e).getOrThunk(()=>ei(Ur(oe(e.getElement())))),zf=e=>e.inline&&!If(e)&&!Lf(e)&&!Lp(e),Fp=e=>(e.options.get("toolbar_sticky")||e.inline)&&!sg(e)&&!zf(e),Vd=e=>!sg(e)&&"split"===e.options.get("ui_mode"),xC=e=>{const r=e.options.get("menu");return pn(r,a=>({...a,items:a.items}))};var wC=Object.freeze({__proto__:null,get ToolbarMode(){return tl},get ToolbarLocation(){return Rf},register:dC,getSkinUrl:Pf,getSkinUrlOption:Zu,isReadOnly:uC,isSkinDisabled:$y,getHeightOption:Ey,getWidthOption:Ty,getMinWidthOption:Df,getMinHeightOption:Oy,getMaxWidthOption:Qu,getMaxHeightOption:mC,getUserStyleFormats:Ay,shouldMergeStyleFormats:Ny,shouldAutoHideStyleFormats:Ry,getLineHeightFormats:vC,getContentLanguages:Dy,getRemovedMenuItems:SO,isMenubarEnabled:If,isMultipleToolbars:Lp,isToolbarEnabled:Lf,isToolbarPersist:Iy,getMultipleToolbarsOption:Wy,getUiContainer:Ff,useFixedContainer:sg,isSplitUiMode:Vd,getToolbarMode:Mp,isDraggableModal:Nc,isDistractionFree:zf,isStickyToolbar:Fp,getStickyToolbarOffset:kO,getToolbarLocation:My,isToolbarLocationBottom:qy,getToolbarGroups:By,getMenus:xC,getMenubar:Bf,getToolbar:Ip,getFilePickerCallback:gC,getFilePickerTypes:pC,useTypeaheadUrls:Fy,getAnchorTop:Mf,getAnchorBottom:hC,getFilePickerValidatorHandler:Py,getFontSizeInputDefaultUnit:Ly,useStatusBar:zy,useElementPath:Pp,promotionEnabled:fC,useBranding:Hy,getResize:Vy,getPasteAsText:Uy,getSidebarShow:jy,useHelpAccessibility:bC,getDefaultFontStack:EO});const _C="[data-mce-autocompleter]",CC=e=>Gl(e,_C);var Ud;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(Ud||(Ud={}));var Rc=Ud;const Hf="tox-menu-nav__js",ag="tox-collection__item",TO={normal:Hf,color:"tox-swatch"},kC="tox-collection__item--enabled",Gy="tox-collection__item-icon",Ky="tox-collection__item-label",zp="tox-collection__item--active",TC="tox-collection__item-container",OC="tox-collection__item-container--row",AC=e=>lt(TO,e).getOr(Hf),$D=e=>"color"===e?"tox-swatches":"tox-menu",Yy=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:$D(e),tieredMenu:"tox-tiered-menu"}),Dc=e=>{const r=Yy(e);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:AC(e)}},OO=(e,r,a)=>{const l=Yy(a);return{tag:"div",classes:Rt([[l.menu,`tox-menu-${r}-column`],e?[l.hasIcons]:[]])}},Xy=[Ku.parts.items({})],Vf=(e,r,a)=>{const l=Yy(a);return{dom:{tag:"div",classes:Rt([[l.tieredMenu]])},markers:Dc(a)}},AO=ee([fo("data"),fe("inputAttributes",{}),fe("inputStyles",{}),fe("tag","input"),fe("inputClasses",[]),Uo("onSetValue"),fe("styles",{}),fe("eventOrder",{}),ys("inputBehaviours",[at,$t]),fe("selectOnFocus",!0)]),NC=e=>ve([$t.config({onFocus:e.selectOnFocus?r=>{const a=r.element,l=ai(a);a.dom.setSelectionRange(0,l.length)}:Qe})]),NO=e=>({...NC(e),...ar(e.inputBehaviours,[at.config({store:{mode:"manual",...e.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>ai(r.element),setValue:(r,a)=>{ai(r.element)!==a&&Qc(r.element,a)}},onSetValue:e.onSetValue})])}),RC=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),em=gi({name:"Input",configFields:AO(),factory:(e,r)=>({uid:e.uid,dom:RC(e),components:[],behaviours:NO(e),eventOrder:e.eventOrder})}),DC=bt("refetch-trigger-event"),BC=bt("redirect-menu-item-interaction"),MC="tox-menu__searcher",Uf=e=>Gn(e.element,`.${MC}`).bind(r=>e.getSystem().getByDom(r).toOptional()),RO=Uf,IC=e=>({fetchPattern:at.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),PC=e=>{const r=(m,g)=>(g.cut(),N.none()),a=(m,g)=>(Bt(m,BC,{interactionEvent:g.event,eventType:g.event.raw.type}),N.some(!0)),l="searcher-events";return{dom:{tag:"div",classes:[ag]},components:[em.sketch({inputClasses:[MC,"tox-textfield"],inputAttributes:{...e.placeholder.map(m=>({placeholder:e.i18n(m)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:ve([go(l,[Me(Em(),m=>{nn(m,DC)}),Me(vc(),(m,g)=>{"Escape"===g.event.raw.key&&g.stop()})]),pt.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,pt.name()]}})]}},jf="tox-collection--results__js",LC=e=>{var r;return e.dom?{...e,dom:{...e.dom,attributes:{...null!==(r=e.dom.attributes)&&void 0!==r?r:{},id:bt("aria-item-search-result-id"),"aria-selected":"false"}}}:e},FC=(e,r)=>a=>{const l=_i(a,r);return Je(l,m=>({dom:e,components:m}))},zC=(e,r)=>{const a=[];let l=[];return yt(e,(m,g)=>{r(m,g)?(l.length>0&&a.push(l),l=[],(vo(m.dom,"innerHtml")||m.components&&m.components.length>0)&&l.push(m)):l.push(m)}),l.length>0&&a.push(l),Je(a,m=>({dom:{tag:"div",classes:["tox-collection__group"]},components:m}))},Jy=(e,r,a)=>Ku.parts.items({preprocess:l=>{const m=Je(l,a);return"auto"!==e&&e>1?FC({tag:"div",classes:["tox-collection__group"]},e)(m):zC(m,(g,h)=>"separator"===r[h].type)}}),HC=(e,r,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Jy(e,r,ut)]}),Hp=e=>Vo(e,r=>"icon"in r&&void 0!==r.icon),jd=e=>(console.error(yo(e)),console.log(e),N.none()),DO=(e,r,a,l,m)=>{const g=(h=a,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Ku.parts.items({preprocess:v=>zC(v,(y,_)=>"separator"===h[_].type)})]});var h;return{value:e,dom:g.dom,components:g.components,items:a}},Qy=(e,r,a,l,m)=>{if("color"===m.menuType){const g={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Ku.parts.items({preprocess:"auto"!==(h=l)?FC({tag:"div",classes:["tox-swatches__row"]},h):ut})]}]};return{value:e,dom:g.dom,components:g.components,items:a}}var h;if("normal"===m.menuType&&"auto"===l){const g=HC(l,a);return{value:e,dom:g.dom,components:g.components,items:a}}if("normal"===m.menuType||"searchable"===m.menuType){const g="searchable"!==m.menuType?HC(l,a):"search-with-field"===m.searchMode.searchMode?((h,v,y)=>{const _=bt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===h?["tox-collection--list"]:["tox-collection--grid"])},components:[PC({i18n:Mi.translate,placeholder:y.placeholder}),{dom:{tag:"div",classes:[...1===h?["tox-collection--list"]:["tox-collection--grid"],jf],attributes:{id:_}},components:[Jy(h,v,LC)]}]}})(l,a,m.searchMode):((h,v,y=!0)=>{const _=bt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",jf].concat(1===h?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:_}},components:[Jy(h,v,LC)]}})(l,a);return{value:e,dom:g.dom,components:g.components,items:a}}if("listpreview"===m.menuType&&"auto"!==l){const g=(h=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Ku.parts.items({preprocess:FC({tag:"div",classes:["tox-collection__group"]},h)})]}))(l);return{value:e,dom:g.dom,components:g.components,items:a}}return{value:e,dom:OO(r,l,m.menuType),components:Xy,items:a}},Br=Ft("type"),VC=Ft("name"),UC=Ft("label"),ws=Ft("text"),Zl=Ft("title"),BO=Ft("icon"),ig=Ft("value"),jC=on("fetch"),WD=on("getSubmenuItems"),Vp=on("onAction"),$f=on("onItemAction"),cd=Qn("onSetup",()=>Qe),$C=fr("name"),tm=fr("text"),_s=fr("icon"),Zy=fr("tooltip"),WC=fr("label"),Tl=fr("shortcut"),Wf=Vn("select"),qf=is("active",!1),ec=is("borderless",!1),$o=is("enabled",!0),$d=is("primary",!1),Gf=e=>fe("columns",e),e0=fe("meta",{}),Kf=Qn("onAction",Qe),Wd=e=>oa("type",e),qC=e=>Ae("name","name",V(()=>bt(`${e}-name`)),ge),t0=je([Br,tm]),qD=je([Wd("autocompleteitem"),qf,$o,e0,ig,tm,_s]),Up=[$o,Zy,_s,tm,cd],MO=je([Br,Vp].concat(Up)),o0=e=>Xt("toolbarbutton",MO,e),n0=[qf].concat(Up),r0=je(n0.concat([Br,Vp])),IO=e=>Xt("ToggleButton",r0,e),PO=[Qn("predicate",Ve),qi("scope","node",["node","editor"]),qi("position","selection",["node","selection","line"])],GD=Up.concat([Wd("contextformbutton"),$d,Vp,Oo("original",ut)]),KD=n0.concat([Wd("contextformbutton"),$d,Vp,Oo("original",ut)]),YD=Up.concat([Wd("contextformbutton")]),LO=n0.concat([Wd("contextformtogglebutton")]),XD=xo("type",{contextformbutton:GD,contextformtogglebutton:KD}),JD=je([Wd("contextform"),Qn("initValue",ee("")),WC,rr("commands",XD),Wr("launch",xo("type",{contextformbutton:YD,contextformtogglebutton:LO}))].concat(PO)),FO=je([Wd("contexttoolbar"),Ft("items")].concat(PO)),zO=[Br,Ft("src"),fr("alt"),Td("classes",[],ge)],QD=je(zO),HO=[Br,ws,$C,Td("classes",["tox-collection__item-label"],ge)],VO=je(HO),UO=ct(()=>Dt("type",{cardimage:QD,cardtext:VO,cardcontainer:ZD})),ZD=je([Br,oa("direction","horizontal"),oa("align","left"),oa("valign","middle"),rr("items",UO)]),jp=[$o,tm,Tl,Ae("value","value",V(()=>bt("menuitem-value")),w()),e0],eB=je([Br,WC,rr("items",UO),cd,Kf].concat(jp)),jO=je([Br,qf,_s].concat(jp)),Ol=[Br,Ft("fancytype"),Kf],tB=[fe("initData",{})].concat(Ol),GC=[Vn("select"),Od("initData",{},[is("allowCustomColors",!0),oa("storageKey","default"),bs("colors",w())])].concat(Ol),$O=xo("fancytype",{inserttable:tB,colorswatch:GC}),WO=je([Br,cd,Kf,_s].concat(jp)),qO=je([Br,WD,cd,_s].concat(jp)),GO=je([Br,_s,qf,cd,Vp].concat(jp)),s0=(e,r,a)=>{const l=Wa(e.element,"."+a);if(l.length>0){const m=ha(l,g=>{const h=g.dom.getBoundingClientRect().top,v=l[0].dom.getBoundingClientRect().top;return Math.abs(h-v)>r}).getOr(l.length);return N.some({numColumns:m,numRows:Math.ceil(l.length/m)})}return N.none()},Yf=e=>{return r=bt("unnamed-events"),ve([go(r,e)]);var r},KO=bt("tooltip.exclusive"),Xf=bt("tooltip.show"),$p=bt("tooltip.hide"),KC=(e,r,a)=>{e.getSystem().broadcastOn([KO],{})};var YO=Object.freeze({__proto__:null,hideAllExclusive:KC,setComponents:(e,r,a,l)=>{a.getTooltip().each(m=>{m.getSystem().isConnected()&&so.set(m,l)})}}),Wp=Object.freeze({__proto__:null,events:(e,r)=>{const a=l=>{r.getTooltip().each(m=>{_l(m),e.onHide(l,m),r.clearTooltip()}),r.clearTimer()};return Cn(Rt([[Me(Xf,l=>{r.resetTimer(()=>{(m=>{if(!r.isShowing()){KC(m);const g=e.lazySink(m).getOrDie(),h=m.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Cn("normal"===e.mode?[Me(yl(),v=>{nn(m,Xf)}),Me(Jg(),v=>{nn(m,$p)})]:[]),behaviours:ve([so.config({})])});r.setTooltip(h),Fm(g,h),e.onShow(m,h),ma.position(g,h,{anchor:e.anchor(m)})}})(l)},e.delay)}),Me($p,l=>{r.resetTimer(()=>{a(l)},e.delay)}),Me(Tm(),(l,m)=>{m.universal||wo(m.channels,KO)&&a(l)}),xc(l=>{a(l)})],"normal"===e.mode?[Me(Wl(),l=>{nn(l,Xf)}),Me(tp(),l=>{nn(l,$p)}),Me(yl(),l=>{nn(l,Xf)}),Me(Jg(),l=>{nn(l,$p)})]:[Me(Th(),(l,m)=>{nn(l,Xf)}),Me(lw(),l=>{nn(l,$p)})]]))}}),XO=[_e("lazySink"),_e("tooltipDom"),fe("exclusive",!0),fe("tooltipComponents",[]),fe("delay",300),qi("mode","normal",["normal","follow-highlight"]),fe("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:ee([vs,ra,Vs,Ua,Us,ja]),onRtl:ee([vs,ra,Vs,Ua,Us,ja])}})),Uo("onHide"),Uo("onShow")],JO=Object.freeze({__proto__:null,init:()=>{const e=Un(),r=Un(),a=()=>{e.on(clearTimeout)},l=ee("not-implemented");return za({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:a,resetTimer:(m,g)=>{a(),e.set(setTimeout(m,g))},readState:l})}});const YC=Ns({fields:XO,name:"tooltipping",active:Wp,state:JO,apis:YO}),a0="silver.readonly",XC=je([Bo("readonly",he)]),qp=(e,r)=>{const a=e.mainUi.outerContainer.element,l=[e.mainUi.mothership,...e.uiMotherships];r&&yt(l,m=>{m.broadcastOn([Ld()],{target:a})}),yt(l,m=>{m.broadcastOn([a0],{readonly:r})})},JC=(e,r)=>{e.on("init",()=>{e.mode.isReadOnly()&&qp(r,!0)}),e.on("SwitchMode",()=>qp(r,e.mode.isReadOnly())),uC(e)&&e.mode.set("readonly")},cs=()=>Ri.config({channels:{[a0]:{schema:XC,onReceive:(e,r)=>{Ut.set(e,r.readonly)}}}}),lg=e=>Ut.config({disabled:e}),QO=e=>Ut.config({disabled:e,disableClass:"tox-tbtn--disabled"}),i0=e=>Ut.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),Jf=(e,r)=>{const a=e.getApi(r);return l=>{l(a)}},qd=(e,r)=>qn(a=>{Jf(e,a)(l=>{const m=e.onSetup(l);an(m)&&r.set(m)})}),om=(e,r)=>xc(a=>Jf(e,a)(r.get())),oB=(e,r)=>si((a,l)=>{Jf(e,a)(e.onAction),e.triggersSubmenu||r!==Rc.CLOSE_ON_EXECUTE||(a.getSystem().isConnected()&&nn(a,op()),l.stop())}),ZO={[Ki()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Gp=gs,Kp=(e,r,a,l)=>{const m=Ot(Qe);return{type:"item",dom:r.dom,components:Gp(r.optComponents),data:e.data,eventOrder:ZO,hasSubmenu:e.triggersSubmenu,itemBehaviours:ve([go("item-events",[oB(e,a),qd(e,m),om(e,m)]),(g=()=>!e.enabled||l.isDisabled(),Ut.config({disabled:g,disableClass:"tox-collection__item--state-disabled"})),cs(),so.config({})].concat(e.itemBehaviours))};var g},Gd=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),QC=e=>{const r=Bp.os.isMacOS()||Bp.os.isiOS(),a=r?{alt:"\u2325",ctrl:"\u2303",shift:"\u21e7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},l=e.split("+");return Je(l,g=>{const h=g.toLowerCase().trim();return vo(a,h)?a[h]:g}).join(r?"":"+")},l0=(e,r,a=[Gy])=>El(e,{tag:"div",classes:a},r),eA=e=>({dom:{tag:"div",classes:[Ky]},components:[Or(Mi.translate(e))]}),tA=(e,r)=>({dom:{tag:"div",classes:r,innerHtml:e}}),c0=(e,r)=>({dom:{tag:"div",classes:[Ky]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Or(Mi.translate(r))]}]}),ZC=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Or(QC(e))]}),d0=e=>l0("checkmark",e,["tox-collection__item-checkmark"]),eS=e=>{const r=e.map(a=>({attributes:{title:Mi.translate(a),id:bt("menu-item")}})).getOr({});return{tag:"div",classes:[Hf,ag],...r}},cg=(e,r,a,l=N.none())=>"color"===e.presets?((m,g,h)=>{const v=m.ariaLabel,y=m.value,_=m.iconContent.map(k=>((E,A,B)=>{const L=A();return lC(E,L).or(B).getOrThunk(Af(L))})(k,g.icons,h));return{dom:(()=>{const E=_.getOr(""),B={tag:"div",attributes:v.map(L=>({title:g.translate(L)})).getOr({}),classes:["tox-swatch"]};return"custom"===y?{...B,tag:"button",classes:[...B.classes,"tox-swatches__picker-btn"],innerHtml:E}:"remove"===y?{...B,classes:[...B.classes,"tox-swatch--remove"],innerHtml:E}:vt(y)?{...B,attributes:{...B.attributes,"data-mce-color":y},styles:{"background-color":y},innerHtml:E}:B})(),optComponents:[]}})(e,r,l):((m,g,h,v)=>{const y={tag:"div",classes:[Gy]},_=h?m.iconContent.map(B=>El(B,y,g.icons,v)).orThunk(()=>N.some({dom:y})):N.none(),k=m.checkMark,E=N.from(m.meta).fold(()=>eA,B=>vo(B,"style")?Xn(c0,B.style):eA),A=m.htmlContent.fold(()=>m.textContent.map(E),B=>N.some(tA(B,[Ky])));return{dom:eS(m.ariaLabel),optComponents:[_,A,m.shortcutContent.map(ZC),k,m.caret]}})(e,r,a,l),u0=(e,r)=>lt(e,"tooltipWorker").map(a=>[YC.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:Lm}}),mode:"follow-highlight",onShow:(l,m)=>{a(g=>{YC.setComponents(l,[yw({element:oe(g)})])})}})]).getOr([]),Qf=(e,r)=>{const a=(l=Mi.translate(e),Ju.DOM.encode(l));var l;if(r.length>0){const l=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return a.replace(l,m=>`<span class="tox-autocompleter-highlight">${m}</span>`)}return a},tS=(e,r)=>Je(e,a=>{switch(a.type){case"cardcontainer":return g=a,h=tS(a.items,r),{dom:{tag:"div",classes:[TC,"vertical"===g.direction?"tox-collection__item-container--column":OC,"left"===g.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",(()=>{switch(g.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:h};case"cardimage":return((g,h,v)=>({dom:{tag:"img",classes:h,attributes:{src:g,alt:v.getOr("")}}}))(a.src,a.classes,a.alt);case"cardtext":const l=a.name.exists(g=>wo(r.cardText.highlightOn,g)),m=l?N.from(r.cardText.matchText).getOr(""):"";return tA(Qf(a.text,m),a.classes)}var g,h}),oS=$v(ad(),id()),Bc=e=>({value:rS(e)}),m0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Gr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,nS=e=>m0.test(e)||Gr.test(e),rS=e=>ac(e,"#").toUpperCase(),g0=e=>{const r=e.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},Yp=e=>{const r=g0(e.red)+g0(e.green)+g0(e.blue);return Bc(r)},sS=Math.min,aS=Math.max,p0=Math.round,nB=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,oA=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,dd=(e,r,a,l)=>({red:e,green:r,blue:a,alpha:l}),iS=e=>{const r=parseInt(e,10);return r.toString()===e&&r>=0&&r<=255},nA=e=>{let r,a,l;const m=(e.hue||0)%360;let g=e.saturation/100,h=e.value/100;if(g=aS(0,sS(g,1)),h=aS(0,sS(h,1)),0===g)return r=a=l=p0(255*h),dd(r,a,l,1);const v=m/60,y=h*g,_=y*(1-Math.abs(v%2-1)),k=h-y;switch(Math.floor(v)){case 0:r=y,a=_,l=0;break;case 1:r=_,a=y,l=0;break;case 2:r=0,a=y,l=_;break;case 3:r=0,a=_,l=y;break;case 4:r=_,a=0,l=y;break;case 5:r=y,a=0,l=_;break;default:r=a=l=0}return r=p0(255*(r+k)),a=p0(255*(a+k)),l=p0(255*(l+k)),dd(r,a,l,1)},Zf=e=>{const r=(g=>{const h={value:g.value.replace(m0,(k,E,A,B)=>E+E+A+A+B+B)},v=Gr.exec(h.value);return null===v?["FFFFFF","FF","FF","FF"]:v})(e),a=parseInt(r[1],16),l=parseInt(r[2],16),m=parseInt(r[3],16);return dd(a,l,m,1)},lS=(e,r,a,l)=>{const m=parseInt(e,10),g=parseInt(r,10),h=parseInt(a,10),v=parseFloat(l);return dd(m,g,h,v)},h0=e=>{if("transparent"===e)return N.some(dd(0,0,0,0));const r=nB.exec(e);if(null!==r)return N.some(lS(r[1],r[2],r[3],"1"));const a=oA.exec(e);return null!==a?N.some(lS(a[1],a[2],a[3],a[4])):N.none()},rA=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,sA=dd(255,0,0,1),f0=(e,r)=>{e.dispatch("ResizeContent",r)},aA=(e,r)=>{e.dispatch("TextColorChange",r)},rB=(e,r)=>e.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),b0=(e,r)=>()=>{e(),r()},Ws=e=>ud(e,"NodeChange",r=>{r.setEnabled(e.selection.isEditable())}),dg=(e,r)=>a=>{const l=Ws(e)(a),m=(g=e,h=r,v=>{const y=hp(),_=()=>{v.setActive(g.formatter.match(h));const k=g.formatter.formatChanged(h,v.setActive);y.set(k)};return g.initialized?_():g.once("init",_),()=>{g.off("init",_),y.clear()}})(a);var g,h;return()=>{l(),m()}},ud=(e,r,a)=>l=>{const m=()=>a(l),g=()=>{a(l),e.on(r,m)};return e.initialized?g():e.once("init",g),()=>{e.off("init",g),e.off(r,m)}},ug=e=>r=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,r.format)})},hi=(e,r)=>()=>e.execCommand(r);var nm=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const iA={},lA=e=>lt(iA,e).getOrThunk(()=>{const r=`tinymce-custom-colors-${e}`,a=nm.getItem(r);if(_t(a)){const m=nm.getItem("tinymce-custom-colors");nm.setItem(r,vt(m)?m:"[]")}const l=((m,g=10)=>{const h=nm.getItem(m),v=So(h)?JSON.parse(h):[],y=g-(_=v).length<0?_.slice(0,g):_;var _;const k=E=>{y.splice(E,1)};return{add:E=>{Ze(y,E).each(k),y.unshift(E),y.length>g&&y.pop(),nm.setItem(m,JSON.stringify(y))},state:()=>y.slice(0)}})(r,10);return iA[e]=l,l}),cA=(e,r)=>{lA(e).add(r)},eb=(e,r,a)=>({hue:e,saturation:r,value:a}),v0=e=>{let r=0,a=0,l=0;const m=e.red/255,g=e.green/255,h=e.blue/255,v=Math.min(m,Math.min(g,h)),y=Math.max(m,Math.max(g,h));return v===y?(l=v,eb(0,0,100*l)):(r=m===v?3:h===v?1:5,r=60*(r-(m===v?g-h:h===v?m-g:h-m)/(y-v)),a=(y-v)/y,l=y,eb(Math.round(r),Math.round(100*a),Math.round(100*l)))},mg=e=>Yp(nA(e)),gg=e=>{return(r=e,nS(r)?N.some({value:rS(r)}):N.none()).orThunk(()=>h0(e).map(Yp)).getOrThunk(()=>{const a=document.createElement("canvas");a.height=1,a.width=1;const l=a.getContext("2d");l.clearRect(0,0,a.width,a.height),l.fillStyle="#FFFFFF",l.fillStyle=e,l.fillRect(0,0,1,1);const m=l.getImageData(0,0,1,1).data;return Yp(dd(m[0],m[1],m[2],m[3]))});var r},y0="forecolor",x0="hilitecolor",w0=e=>{const r=[];for(let a=0;a<e.length;a+=2)r.push({text:e[a+1],value:"#"+gg(e[a]).value,icon:"checkmark",type:"choiceitem"});return r},ol=e=>r=>r.options.get(e),pg="#000000",hg=(e,r)=>r===y0&&e.options.isSet("color_map_foreground")?ol("color_map_foreground")(e):r===x0&&e.options.isSet("color_map_background")?ol("color_map_background")(e):ol("color_map")(e),tb=(e,r="default")=>Math.max(5,Math.ceil(Math.sqrt(hg(e,r).length))),cS=(e,r)=>{const a=ol("color_cols")(e),l=tb(e,r);return a===tb(e)?l:a},dA=(e,r="default")=>Math.round(r===y0?ol("color_cols_foreground")(e):r===x0?ol("color_cols_background")(e):ol("color_cols")(e)),dS=ol("custom_colors"),sB=ol("color_default_foreground"),aB=ol("color_default_background"),uS=(e,r)=>{const a=oe(e.selection.getStart()),l="hilitecolor"===r?Xg(a,m=>{if(ho(m)){const g=Zr(m,"background-color");return Hr(h0(g).exists(h=>0!==h.alpha),g)}return N.none()}).getOr("rgba(0, 0, 0, 0)"):Zr(a,"color");return h0(l).map(m=>"#"+Yp(m).value)},mS=e=>{const r="choiceitem",a={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[a,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},gS=(e,r,a,l)=>{"custom"===a?mA(e)(m=>{m.each(g=>{cA(r,g),e.execCommand("mceApplyTextcolor",r,g),l(g)})},uS(e,r).getOr(pg)):"remove"===a?(l(""),e.execCommand("mceRemoveTextcolor",r)):(l(a),e.execCommand("mceApplyTextcolor",r,a))},_0=(e,r,a)=>{return e.concat((l=r,Je(lA(l).state(),m=>({type:"choiceitem",text:m,icon:"checkmark",value:m}))).concat(mS(a)));var l},fg=(e,r,a)=>l=>{l(_0(e,r,a))},pS=(e,r,a)=>{e.setIconFill("forecolor"===r?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",a)},uA=(e,r)=>{e.setTooltip(r)},ob=(e,r)=>a=>{const l=uS(e,r);return Nr(l,a.toUpperCase())},Ii=(e,r,a)=>{if(zi(a))return"forecolor"===r?"Text color":"Background color";const l="forecolor"===r?"Text color {0}":"Background color {0}",m=_0(hg(e,r),r,!1),g=Ee(m,h=>h.value===a).getOr({text:""}).text;return e.translate([l,e.translate(g)])},C0=(e,r,a,l)=>{e.ui.registry.addSplitButton(r,{tooltip:Ii(e,a,l.get()),presets:"color",icon:"forecolor"===r?"text-color":"highlight-bg-color",select:ob(e,a),columns:dA(e,a),fetch:fg(hg(e,a),a,dS(e)),onAction:m=>{gS(e,a,l.get(),Qe)},onItemAction:(m,g)=>{gS(e,a,g,h=>{l.set(h),aA(e,{name:r,color:h})})},onSetup:m=>{pS(m,r,l.get());const g=h=>{h.name===r&&(pS(m,h.name,h.color),uA(m,Ii(e,a,h.color)))};return e.on("TextColorChange",g),b0(Ws(e)(m),()=>{e.off("TextColorChange",g)})}})},hS=(e,r,a,l,m)=>{e.ui.registry.addNestedMenuItem(r,{text:l,icon:"forecolor"===r?"text-color":"highlight-bg-color",onSetup:g=>(uA(g,Ii(e,a,m.get())),pS(g,r,m.get()),Ws(e)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:ob(e,a),initData:{storageKey:a},onAction:g=>{gS(e,a,g.value,h=>{m.set(h),aA(e,{name:r,color:h})})}}]})},mA=e=>(r,a)=>{let l=!1;e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:a},onAction:(g,h)=>{"hex-valid"===h.name&&(l=h.value)},onSubmit:g=>{const h=g.getData().colorpicker;l?(r(N.from(h)),g.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",h]))},onClose:Qe,onCancel:()=>{r(N.none())}})},fS=(e,r,a,l,m,g,h,v)=>{const y=Hp(r),_=gA(r,a,l,"color"!==m?"normal":"color",g,h,v);return Qy(e,y,_,l,{menuType:m})},gA=(e,r,a,l,m,g,h)=>gs(Je(e,v=>{return"choiceitem"===v.type?(y=v,Xt("choicemenuitem",jO,y)).fold(jd,_=>N.some(((k,E,A,B,L,G,K,Q=!0)=>{const W=cg({presets:A,textContent:E?k.text:N.none(),htmlContent:N.none(),ariaLabel:k.text,iconContent:k.icon,shortcutContent:E?k.shortcut:N.none(),checkMark:E?N.some(d0(K.icons)):N.none(),caret:N.none(),value:k.value},K,Q);return Dn(Kp({data:Gd(k),enabled:k.enabled,getApi:z=>({setActive:Y=>{Co.set(z,Y)},isActive:()=>Co.isOn(z),isEnabled:()=>!Ut.isDisabled(z),setEnabled:Y=>Ut.set(z,!Y)}),onAction:z=>B(k.value),onSetup:z=>(z.setActive(L),Qe),triggersSubmenu:!1,itemBehaviours:[]},W,G,K),{toggling:{toggleClass:kC,toggleOnExecute:!1,selected:k.active,exclusive:!0}})})(_,1===a,l,r,g(_.value),m,h,Hp(e)))):N.none();var y})),nb=(e,r)=>{const a=Dc(r);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===r?"tox-swatches__row":"tox-collection__group"),previousSelector:l=>"color"===r?Gn(l.element,"[aria-checked=true]"):N.none()}},bS=bt("cell-over"),pA=bt("cell-execute"),hA=(e,r,a)=>{const l=g=>Bt(g,pA,{row:e,col:r}),m=(g,h)=>{h.stop(),l(g)};return na({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:ve([go("insert-table-picker-cell",[Me(yl(),$t.focus),Me(Ki(),l),Me(Ca(),m),Me(br(),m)]),Co.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),$t.config({onFocus:g=>Bt(g,bS,{row:e,col:r})})])})},fA=e=>ft(e,r=>Je(r,Yi)),vS=(e,r)=>Or(`${r}x${e}`),iB={inserttable:(e,r)=>{const l=((h,v,y)=>{const _=[];for(let k=0;k<10;k++){const E=[];for(let A=0;A<10;A++){const B=h(k+1,A+1);E.push(hA(k,A,B))}_.push(E)}return _})((h=r,(v,y)=>h.shared.providers.translate(["{0} columns, {1} rows",y,v]))),m=vS(0,0),g=dn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[m],behaviours:ve([so.config({})])});var h;return{type:"widget",data:{value:bt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[oS.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:fA(l).concat(g.asSpec()),behaviours:ve([go("insert-table-picker",[qn(h=>{so.set(g.get(h),[m])}),Bd(bS,(h,v,y)=>{const{row:_,col:k}=y.event;((E,A,B,L,G)=>{for(let K=0;K<10;K++)for(let Q=0;Q<10;Q++)Co.set(E[K][Q],K<=A&&Q<=B)})(l,_,k),so.set(g.get(h),[vS(_+1,k+1)])}),Bd(pA,(h,v,y)=>{const{row:_,col:k}=y.event;e.onAction({numRows:_+1,numColumns:k+1}),nn(h,op())})]),pt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,r)=>{const a=((h,v)=>{const y=h.initData.allowCustomColors&&v.colorinput.hasCustomColors();return h.initData.colors.fold(()=>_0(v.colorinput.getColors(h.initData.storageKey),h.initData.storageKey,y),_=>_.concat(mS(y)))})(e,r),l=r.colorinput.getColorCols(e.initData.storageKey),m="color",g={...fS(bt("menu-value"),a,h=>{e.onAction({value:h})},l,m,Rc.CLOSE_ON_EXECUTE,e.select.getOr(Ve),r.shared.providers),markers:Dc(m),movement:nb(l,m)};return{type:"widget",data:{value:bt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[oS.widget(Ku.sketch(g))]}}},S0=e=>({type:"separator",dom:{tag:"div",classes:[ag,"tox-collection__group-heading"]},components:e.text.map(Or).toArray()});var bA=Object.freeze({__proto__:null,getCoupled:(e,r,a,l)=>a.getOrCreate(e,r,l),getExistingCoupled:(e,r,a,l)=>a.getExisting(e,r,l)}),vA=[Bo("others",Et(ko.value,w()))],yA=Object.freeze({__proto__:null,init:()=>{const e={},r=(l,m)=>{if(0===Rn(l.others).length)throw new Error("Cannot find any known coupled components");return lt(e,m)},a=ee({});return za({readState:a,getExisting:(l,m,g)=>r(m,g).orThunk(()=>(lt(m.others,g).getOrDie("No information found for coupled component: "+g),N.none())),getOrCreate:(l,m,g)=>r(m,g).getOrThunk(()=>{const h=lt(m.others,g).getOrDie("No information found for coupled component: "+g)(l),v=l.getSystem().build(h);return e[g]=v,v})})}});const vr=Ns({fields:vA,name:"coupling",apis:bA,state:yA}),yS=e=>{let r=N.none(),a=[];const l=h=>{m()?g(h):a.push(h)},m=()=>r.isSome(),g=h=>{r.each(v=>{setTimeout(()=>{h(v)},0)})};return e(h=>{m()||(r=N.some(h),yt(a,g),a=[])}),{get:l,map:h=>yS(v=>{l(y=>{v(h(y))})}),isReady:m}},xA={nu:yS,pure:e=>yS(r=>{r(e)})},wA=e=>{setTimeout(()=>{throw e},0)},bg=e=>{const r=a=>{e().then(a,wA)};return{map:a=>bg(()=>e().then(a)),bind:a=>bg(()=>e().then(l=>a(l).toPromise())),anonBind:a=>bg(()=>e().then(()=>a.toPromise())),toLazy:()=>xA.nu(r),toCached:()=>{let a=null;return bg(()=>(null===a&&(a=e()),a))},toPromise:e,get:r}},md=e=>bg(()=>new Promise(e)),gd=e=>bg(()=>Promise.resolve(e)),_A=ee("sink"),k0=ee(mi({name:_A(),overrides:ee({dom:{tag:"div"},behaviours:ve([ma.config({useFixed:un})]),events:Cn([Am(vc()),Am(ua()),Am(Ca())])})})),pd=(e,r)=>{const a=e.getHotspot(r).getOr(r),l="hotspot",m=e.getAnchorOverrides();return e.layouts.fold(()=>({type:l,hotspot:a,overrides:m}),g=>({type:l,hotspot:a,overrides:m,layouts:g}))},rm=(e,r,a,l,m,g,h)=>((y,_,k,E,A,B,L)=>{const G=(W=_,(0,y.fetch)(E).map(W)),K=CA(E,y);var W;return G.map(Q=>Q.bind(W=>N.from(tg.sketch({...B.menu(),uid:Rm(""),data:W,highlightOnOpen:L,onOpenMenu:(z,Y)=>{const Z=K().getOrDie();ma.position(Z,Y,{anchor:k}),jo.decloak(A)},onOpenSubmenu:(z,Y,Z)=>{const te=K().getOrDie();ma.position(te,Z,{anchor:{type:"submenu",item:Y}}),jo.decloak(A)},onRepositionMenu:(z,Y,Z)=>{const te=K().getOrDie();ma.position(te,Y,{anchor:k}),yt(Z,ae=>{ma.position(te,ae.triggeredMenu,{anchor:{type:"submenu",item:ae.triggeringItem}})})},onEscape:()=>($t.focus(E),jo.close(A),N.some(!0))}))))})(e,r,pd(e,a),a,l,m,h).map(y=>(y.fold(()=>{jo.isOpen(l)&&jo.close(l)},_=>{jo.cloak(l),jo.open(l,_),g(l)}),l)),xS=(e,r,a,l,m,g,h)=>(jo.close(l),gd(l)),wS=(e,r,a,l,m,g)=>{const h=vr.getCoupled(a,"sandbox");return(jo.isOpen(h)?xS:rm)(e,r,a,h,l,m,g)},CA=(e,r)=>e.getSystem().getByUid(r.uid+"-"+_A()).map(a=>()=>ko.value(a)).getOrThunk(()=>r.lazySink.fold(()=>()=>ko.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(e))),_S=e=>{jo.getState(e).each(r=>{tg.repositionMenus(r)})},rb=(e,r,a)=>{const l=mp(),m=CA(r,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:jm(e.sandboxBehaviours,[at.config({store:{mode:"memory",initialValue:r}}),jo.config({onOpen:(g,h)=>{const v=pd(e,r);l.link(r.element),e.matchWidth&&((y,_,k)=>{const E=_o.getCurrent(_).getOr(_),A=ln(y.element);k?lo(E.element,"min-width",A+"px"):uc.set(E.element,A)})(v.hotspot,h,e.useMinWidth),e.onOpen(v,g,h),void 0!==a&&void 0!==a.onOpen&&a.onOpen(g,h)},onClose:(g,h)=>{l.unlink(r.element),void 0!==a&&void 0!==a.onClose&&a.onClose(g,h)},isPartOf:(g,h,v)=>Sc(h,v)||Sc(r,v),getAttachPoint:()=>m().getOrDie()}),_o.config({find:g=>jo.getState(g).bind(h=>_o.getCurrent(h))}),Ri.config({channels:{...Hm({isExtraPart:Ve}),...zv({doReposition:_S})}})])}},E0=e=>{const r=vr.getCoupled(e,"sandbox");_S(r)},sb=()=>[fe("sandboxClasses",[]),Um("sandboxBehaviours",[_o,Ri,jo,at])],Al=ee([_e("dom"),_e("fetch"),Uo("onOpen"),ii("onExecute"),fe("getHotspot",N.some),fe("getAnchorOverrides",ee({})),td(),ys("dropdownBehaviours",[Co,vr,pt,$t]),_e("toggleClass"),fe("eventOrder",{}),fo("lazySink"),fe("matchWidth",!1),fe("useMinWidth",!1),fo("role")].concat(sb())),SA=ee([ls({schema:[Mu(),fe("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),k0()]),nl=$s({name:"Dropdown",configFields:Al(),partFields:SA(),factory:(e,r,a,l)=>{const m=y=>{jo.getState(y).each(_=>{tg.highlightPrimary(_)})},g=(y,_,k)=>wS(e,ut,y,l,_,k),h={expand:y=>{Co.isOn(y)||g(y,Qe,pa.HighlightNone).get(Qe)},open:y=>{Co.isOn(y)||g(y,Qe,pa.HighlightMenuAndItem).get(Qe)},refetch:y=>vr.getExistingCoupled(y,"sandbox").fold(()=>g(y,Qe,pa.HighlightMenuAndItem).map(Qe),_=>rm(e,ut,y,_,l,Qe,pa.HighlightMenuAndItem).map(Qe)),isOpen:Co.isOn,close:y=>{Co.isOn(y)&&g(y,Qe,pa.HighlightMenuAndItem).get(Qe)},repositionMenus:y=>{Co.isOn(y)&&E0(y)}},v=(y,_)=>(Tu(y),N.some(!0));return{uid:e.uid,dom:e.dom,components:r,behaviours:ar(e.dropdownBehaviours,[Co.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),vr.config({others:{sandbox:y=>rb(e,y,{onOpen:()=>Co.on(y),onClose:()=>Co.off(y)})}}),pt.config({mode:"special",onSpace:v,onEnter:v,onDown:(y,_)=>{if(nl.isOpen(y)){const k=vr.getCoupled(y,"sandbox");m(k)}else nl.open(y);return N.some(!0)},onEscape:(y,_)=>nl.isOpen(y)?(nl.close(y),N.some(!0)):N.none()}),$t.config({})]),events:Ap(N.some(y=>{g(y,m,pa.HighlightMenuAndItem).get(Qe)})),eventOrder:{...e.eventOrder,[Ki()]:["disabling","toggling","alloy.base.behaviour"]},apis:h,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),y=>({role:y})),..."button"===e.dom.tag?{type:lt(e.dom,"attributes").bind(y=>lt(y,"type")).getOr("button")}:{}}}}},apis:{open:(e,r)=>e.open(r),refetch:(e,r)=>e.refetch(r),expand:(e,r)=>e.expand(r),close:(e,r)=>e.close(r),isOpen:(e,r)=>e.isOpen(r),repositionMenus:(e,r)=>e.repositionMenus(r)}}),kA=(e,r,a)=>{RO(e).each(l=>{var m,g;g=l,ur(a.element,"id").each(v=>ro(g.element,"aria-activedescendant",v)),(Ha((m=r).element,jf)?N.some(m.element):Gn(m.element,"."+jf)).each(g=>{ur(g,"id").each(h=>ro(l.element,"aria-controls",h))})}),ro(a.element,"aria-selected","true")},EA=(e,r,a)=>{ro(a.element,"aria-selected","false")},CS=e=>vr.getExistingCoupled(e,"sandbox").bind(Uf).map(IC).map(r=>r.fetchPattern).getOr("");var Xp;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(Xp||(Xp={}));const SS=(e,r,a,l,m,g)=>{const h=Hp(r),v=gs(Je(r,_=>{const k=E=>((e,r,a,l,m)=>{const g=a.shared.providers,h=y=>m?{...y,shortcut:N.none(),icon:y.text.isSome()?N.none():y.icon}:y;switch(e.type){case"menuitem":return(v=e,Xt("menuitem",WO,v)).fold(jd,y=>N.some(((_,k,E,A=!0)=>{const B=cg({presets:"normal",iconContent:_.icon,textContent:_.text,htmlContent:N.none(),ariaLabel:_.text,caret:N.none(),checkMark:N.none(),shortcutContent:_.shortcut},E,A);return Kp({data:Gd(_),getApi:L=>({isEnabled:()=>!Ut.isDisabled(L),setEnabled:G=>Ut.set(L,!G)}),enabled:_.enabled,onAction:_.onAction,onSetup:_.onSetup,triggersSubmenu:!1,itemBehaviours:[]},B,k,E)})(h(y),r,g,l)));case"nestedmenuitem":return(y=e,Xt("nestedmenuitem",qO,y)).fold(jd,y=>N.some(((_,k,E,A=!0,B=!1)=>{const L=l0(B?"chevron-down":"chevron-right",E.icons,["tox-collection__item-caret"]),K=cg({presets:"normal",iconContent:_.icon,textContent:_.text,htmlContent:N.none(),ariaLabel:_.text,caret:N.some(L),checkMark:N.none(),shortcutContent:_.shortcut},E,A);return Kp({data:Gd(_),getApi:Q=>({isEnabled:()=>!Ut.isDisabled(Q),setEnabled:W=>Ut.set(Q,!W),setIconFill:(W,z)=>{Gn(Q.element,`svg path[class="${W}"], rect[class="${W}"]`).each(Y=>{ro(Y,"fill",z)})},setTooltip:W=>{const z=E.translate(W);hs(Q.element,{"aria-label":z,title:z})}}),enabled:_.enabled,onAction:Qe,onSetup:_.onSetup,triggersSubmenu:!0,itemBehaviours:[]},K,k,E)})(h(y),r,g,l,m)));case"togglemenuitem":return(y=>Xt("togglemenuitem",GO,y))(e).fold(jd,y=>N.some(((_,k,E,A=!0)=>{const B=cg({iconContent:_.icon,textContent:_.text,htmlContent:N.none(),ariaLabel:_.text,checkMark:N.some(d0(E.icons)),caret:N.none(),shortcutContent:_.shortcut,presets:"normal",meta:_.meta},E,A);return Dn(Kp({data:Gd(_),enabled:_.enabled,getApi:L=>({setActive:G=>{Co.set(L,G)},isActive:()=>Co.isOn(L),isEnabled:()=>!Ut.isDisabled(L),setEnabled:G=>Ut.set(L,!G)}),onAction:_.onAction,onSetup:_.onSetup,triggersSubmenu:!1,itemBehaviours:[]},B,k,E),{toggling:{toggleClass:kC,toggleOnExecute:!1,selected:_.active}})})(h(y),r,g,l)));case"separator":return(y=>Xt("separatormenuitem",t0,y))(e).fold(jd,y=>N.some(S0(y)));case"fancymenuitem":return(y=>Xt("fancymenuitem",$O,y))(e).fold(jd,y=>{return k=a,lt(iB,(_=y).fancytype).map(E=>E(_,k));var _,k});default:return console.error("Unknown item in general menu",e),N.none()}var y,v})(E,a,l,m?!vo(E,"text"):h,m);return"nestedmenuitem"===_.type&&_.getSubmenuItems().length<=0?k({..._,enabled:!1}):k(_)})),y="no-search"===(_=g).searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:_};var _;return(m?DO:Qy)(e,h,v,1,y)},T0=e=>tg.singleData(e.value,e),lB=["visible","hidden","clip"],OA=e=>Ja(e).length>0&&!wo(lB,e),kS=e=>{if(Zt(e)){const r=Zr(e,"overflow-x"),a=Zr(e,"overflow-y");return OA(r)||OA(a)}return!1},sm=(e,r)=>Vd(e)?(a=>{const l=VE(a,kS),m=0===l.length?Vc(a).map(Kg).map(g=>VE(g,kS)).getOr([]):l;return cr(m).map(g=>({element:g,others:m.slice(1)}))})(r):N.none(),am=e=>{const r=[...Je(e.others,hr),Sr()];return a=hr(e.element),qt(r,(m,g)=>$i(m,g),a);var a},Qp=(e,r,a)=>Gl(e,r,a).isSome(),ka=(e,r)=>{let a=null;return{cancel:()=>{null!==a&&(clearTimeout(a),a=null)},schedule:(...l)=>{a=setTimeout(()=>{e.apply(null,l),a=null},r)}}},ES=e=>{const r=e.raw;return void 0===r.touches||1!==r.touches.length?N.none():N.some(r.touches[0])},AA=(e,r)=>{const a=lt(e,"target").getOr(r);return Ot(a)},Zp=xa([{stopped:[]},{resume:["element"]},{complete:[]}]),NA=(e,r,a,l,m,g)=>{const h=e(r,l),v=((y,_)=>{const k=Ot(!1),E=Ot(!1);return{stop:()=>{k.set(!0)},cut:()=>{E.set(!0)},isStopped:k.get,isCut:E.get,event:y,setSource:_.set,getSource:_.get}})(a,m);return h.fold(()=>(g.logEventNoHandlers(r,l),Zp.complete()),y=>{const _=y.descHandler;return Md(_)(v),v.isStopped()?(g.logEventStopped(r,y.element,_.purpose),Zp.stopped()):v.isCut()?(g.logEventCut(r,y.element,_.purpose),Zp.complete()):Zs(y.element).fold(()=>(g.logNoParent(r,y.element,_.purpose),Zp.complete()),k=>(g.logEventResponse(r,y.element,_.purpose),Zp.resume(k)))})},RA=(e,r,a,l,m,g)=>NA(e,r,a,l,m,g).fold(un,h=>RA(e,r,a,h,m,g),Ve),DA=(e,r,a,l,m)=>{const g=AA(a,l);return RA(e,r,a,l,g,m)},sa=gi({name:"Container",factory:e=>{const{attributes:r,...a}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...a},components:e.components,behaviours:Yh(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[fe("components",[]),ys("containerBehaviours",[]),fe("events",{}),fe("domModification",{}),fe("eventOrder",{})]}),ab=e=>{const r=K=>Zs(e.element).fold(un,Q=>Jo(K,Q)),a=(()=>{const e=(()=>{const l={};return{registerId:(m,g,h)=>{gn(h,(v,y)=>{const _=void 0!==l[y]?l[y]:{};var k;_[g]={cHandler:Xn.apply(void 0,[(k=v).handler].concat(m)),purpose:k.purpose},l[y]=_})},unregisterId:m=>{gn(l,(g,h)=>{vo(g,m)&&delete g[m]})},filterByType:m=>lt(l,m).map(g=>Yo(g,(h,v)=>({id:v,descHandler:h}))).getOr([]),find:(m,g,h)=>lt(l,g).bind(v=>Xg(h,y=>{return _=v,Nh(k=y).bind(E=>lt(_,E)).map(E=>({element:k,descHandler:E}));var _,k},m))}})(),r={},a=l=>{Nh(l.element).each(m=>{delete r[m],e.unregisterId(m)})};return{find:(l,m,g)=>e.find(l,m,g),filter:l=>e.filterByType(l),register:l=>{const m=Nh((h=l).element).getOrThunk(()=>((y,_)=>{const k=bt(pw+"uid-");return hw(_,k),k})(0,h.element));var h;zr(r,m)&&((h,v)=>{const y=r[v];if(y!==h)throw new Error('The tagId "'+v+'" is already used by: '+ql(y.element)+"\nCannot use it for: "+ql(h.element)+"\nThe conflicting element is"+(ps(y.element)?" ":" not ")+"already in the DOM");a(h)})(l,m),e.registerId([l],m,l.events),r[m]=l},unregister:a,getById:l=>lt(r,l)}})(),l=(K,Q)=>a.find(r,K,Q),m=((e,r)=>{const a={stopBackspace:!0,...r},l=(E=>{const A=Un(),B=Ot(!1),L=ka(K=>{E.triggerEvent(Om(),K),B.set(!0)},400),G=Er([{key:vl(),value:K=>(ES(K).each(Q=>{L.cancel();const W={x:Q.clientX,y:Q.clientY,target:K.target};L.schedule(K),B.set(!1),A.set(W)}),N.none())},{key:bc(),value:K=>(L.cancel(),ES(K).each(Q=>{A.on(W=>{((z,Y)=>{const Z=Math.abs(z.clientX-Y.x),te=Math.abs(z.clientY-Y.y);return Z>5||te>5})(Q,W)&&A.clear()})}),N.none())},{key:$l(),value:K=>(L.cancel(),A.get().filter(Q=>Jo(Q.target,K.target)).map(Q=>B.get()?(K.prevent(),!1):E.triggerEvent(br(),K)))}]);return{fireIfReady:(K,Q)=>lt(G,Q).bind(W=>W(K))}})(a),m=Je(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),E=>$a(e,E,A=>{l.fireIfReady(A,E).each(B=>{B&&A.kill()}),a.triggerEvent(E,A)&&A.kill()})),g=Un(),h=$a(e,"paste",E=>{l.fireIfReady(E,"paste").each(A=>{A&&E.kill()}),a.triggerEvent("paste",E)&&E.kill(),g.set(setTimeout(()=>{a.triggerEvent(aw(),E)},0))}),v=$a(e,"keydown",E=>{var A;a.triggerEvent("keydown",E)?E.kill():a.stopBackspace&&(A=E).raw.which===_D[0]&&!wo(["input","textarea"],nt(A.target))&&!Qp(A.target,'[contenteditable="true"]')&&E.prevent()}),y=$a(e,"focusin",E=>{a.triggerEvent("focusin",E)&&E.kill()}),_=Un(),k=$a(e,"focusout",E=>{a.triggerEvent("focusout",E)&&E.kill(),_.set(setTimeout(()=>{a.triggerEvent(tp(),E)},0))});return{unbind:()=>{yt(m,E=>{E.unbind()}),v.unbind(),y.unbind(),k.unbind(),h.unbind(),g.on(clearTimeout),_.on(clearTimeout)}}})(e.element,{triggerEvent:(K,Q)=>Cw(K,Q.target,W=>{return DA(l,K,Z=Q,Z.target,W);var Z})}),g={debugInfo:ee("real"),triggerEvent:(K,Q,W)=>{Cw(K,Q,z=>DA(l,K,W,Q,z))},triggerFocus:(K,Q)=>{Nh(K).fold(()=>{wl(K)},W=>{Cw(Rd(),K,z=>(((Y,Z,te,ae,Ce)=>{const De=AA(te,ae);NA(Y,Z,te,ae,De,Ce)})(l,Rd(),{originator:Q,kill:Qe,prevent:Qe,target:K},K,z),!1))})},triggerEscape:(K,Q)=>{g.triggerEvent("keydown",K.element,Q.event)},getByUid:K=>L(K),getByDom:K=>G(K),build:na,buildOrPatch:xv,addToGui:K=>{y(K)},removeFromGui:K=>{_(K)},addToWorld:K=>{h(K)},removeFromWorld:K=>{v(K)},broadcast:K=>{E(K)},broadcastOn:(K,Q)=>{A(K,Q)},broadcastEvent:(K,Q)=>{B(K,Q)},isConnected:un},h=K=>{K.connect(g),Io(K.element)||(a.register(K),yt(K.components(),h),g.triggerEvent(iv(),K.element,{target:K.element}))},v=K=>{Io(K.element)||(yt(K.components(),v),a.unregister(K)),K.disconnect()},y=K=>{Fm(e,K)},_=K=>{_l(K)},k=K=>{const Q=a.filter(Tm());yt(Q,W=>{Md(W.descHandler)(K)})},E=K=>{k({universal:!0,data:K})},A=(K,Q)=>{k({universal:!1,channels:K,data:Q})},B=(K,Q)=>((W,z,Y)=>{const Z=(te=>{const ae=Ot(!1);return{stop:()=>{ae.set(!0)},cut:Qe,isStopped:ae.get,isCut:Ve,event:te,setSource:lr("Cannot set source of a broadcasted event"),getSource:lr("Cannot get source of a broadcasted event")}})(z);return yt(W,te=>{Md(te.descHandler)(Z)}),Z.isStopped()})(a.filter(K),Q),L=K=>a.getById(K).fold(()=>ko.error(new Error('Could not find component with uid: "'+K+'" in system.')),ko.value),G=K=>{const Q=Nh(K).getOr("not found");return L(Q)};return h(e),{root:e,element:e.element,destroy:()=>{m.unbind(),Oi(e.element)},add:y,remove:_,getByUid:L,getByDom:G,addToWorld:h,removeFromWorld:v,broadcast:E,broadcastOn:A,broadcastEvent:B}},MA=ee([fe("prefix","form-field"),ys("fieldBehaviours",[_o,at])]),A0=ee([mi({schema:[_e("dom")],name:"label"}),mi({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[_e("text")],name:"aria-descriptor"}),ga({factory:{sketch:e=>{const r=((a,l)=>{const m={};return gn(a,(g,h)=>{wo(l,h)||(m[h]=g)}),m})(e,["factory"]);return e.factory.sketch(r)}},schema:[_e("factory")],name:"field"})]),rn=$s({name:"FormField",configFields:MA(),partFields:A0(),factory:(e,r,a,l)=>{const m=ar(e.fieldBehaviours,[_o.config({find:v=>fn(v,e,"field")}),at.config({store:{mode:"manual",getValue:v=>_o.getCurrent(v).bind(at.getValue),setValue:(v,y)=>{_o.getCurrent(v).each(_=>{at.setValue(_,y)})}}})]),g=Cn([qn((v,y)=>{const _=b_(v,e,["label","field","aria-descriptor"]);_.field().each(k=>{const E=bt(e.prefix);_.label().each(A=>{ro(A.element,"for",E),ro(k.element,"id",E)}),_["aria-descriptor"]().each(A=>{const B=bt(e.prefix);ro(A.element,"id",B),ro(k.element,"aria-describedby",B)})})})]);return{uid:e.uid,dom:e.dom,components:r,behaviours:m,events:g,apis:{getField:v=>fn(v,e,"field"),getLabel:v=>fn(v,e,"label")}}},apis:{getField:(e,r)=>e.getField(r),getLabel:(e,r)=>e.getLabel(r)}});var dB=Object.freeze({__proto__:null,exhibit:(e,r)=>_c({attributes:Er([{key:r.tabAttr,value:"true"}])})}),uB=[fe("tabAttr","data-alloy-tabstop")];const er=Ns({fields:uB,name:"tabstopping",active:dB});var IA=tinymce.util.Tools.resolve("tinymce.html.Entities");const rl=(e,r,a,l)=>{const m=N0(e,r,a,l);return rn.sketch(m)},N0=(e,r,a,l)=>({dom:PA(a),components:e.toArray().concat([r]),fieldBehaviours:ve(l)}),PA=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),im=(e,r)=>rn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Or(r.translate(e))]}),fi=bt("form-component-change"),eh=bt("form-close"),hd=bt("form-cancel"),Nl=bt("form-action"),Kd=bt("form-submit"),vg=bt("form-block"),R0=bt("form-unblock"),TS=bt("form-tabchange"),OS=bt("form-resize"),mB=["input","textarea"],FA=e=>{const r=nt(e);return wo(mB,r)},zA=(e,r)=>{const a=r.getRoot(e).getOr(e.element);sr(a,r.invalidClass),r.notify.each(l=>{FA(e.element)&&ro(e.element,"aria-invalid",!1),l.getContainer(e).each(m=>{Nm(m,l.validHtml)}),l.onValid(e)})},AS=(e,r,a,l)=>{const m=r.getRoot(e).getOr(e.element);Zo(m,r.invalidClass),r.notify.each(g=>{FA(e.element)&&ro(e.element,"aria-invalid",!0),g.getContainer(e).each(h=>{Nm(h,l)}),g.onInvalid(e,l)})},NS=(e,r,a)=>r.validator.fold(()=>gd(ko.value(!0)),l=>l.validate(e)),D0=(e,r,a)=>(r.notify.each(l=>{l.onValidate(e)}),NS(e,r).map(l=>e.getSystem().isConnected()?l.fold(m=>(AS(e,r,0,m),ko.error(m)),m=>(zA(e,r),ko.value(m))):ko.error("No longer in system")));var gB=Object.freeze({__proto__:null,markValid:zA,markInvalid:AS,query:NS,run:D0,isInvalid:(e,r)=>{const a=r.getRoot(e).getOr(e.element);return Ha(a,r.invalidClass)}}),HA=Object.freeze({__proto__:null,events:(e,r)=>e.validator.map(a=>Cn([Me(a.onEvent,l=>{D0(l,e).get(ut)})].concat(a.validateOnLoad?[qn(l=>{D0(l,e).get(Qe)})]:[]))).getOr({})}),ib=[_e("invalidClass"),fe("getRoot",N.none),cn("notify",[fe("aria","alert"),fe("getContainer",N.none),fe("validHtml",""),Uo("onValid"),Uo("onInvalid"),Uo("onValidate")]),cn("validator",[_e("validate"),fe("onEvent","input"),fe("validateOnLoad",!0)])];const Mc=Ns({fields:ib,name:"invalidating",active:HA,apis:gB,extra:{validation:e=>r=>{const a=at.getValue(r);return gd(e(a))}}}),lb=Ns({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Cn([sE(ku(),un)]),exhibit:()=>_c({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),VA=bt("color-input-change"),RS=bt("color-swatch-change"),DS=bt("color-picker-cancel"),BS=mi({schema:[_e("dom")],name:"label"}),bi=e=>mi({name:e+"-edge",overrides:r=>r.model.manager.edgeActions[e].fold(()=>({}),a=>({events:Cn([dw(vl(),(l,m,g)=>a(l,g),[r]),dw(ua(),(l,m,g)=>a(l,g),[r]),dw(Nd(),(l,m,g)=>{g.mouseIsDown.get()&&a(l,g)},[r])])}))}),MS=bi("top-left"),UA=bi("top"),jA=bi("top-right"),IS=bi("right"),$A=bi("bottom-right"),B0=bi("bottom"),WA=bi("bottom-left"),qA=bi("left"),pB=ga({name:"thumb",defaults:ee({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Cn([sp(vl(),e,"spectrum"),sp(bc(),e,"spectrum"),sp($l(),e,"spectrum"),sp(ua(),e,"spectrum"),sp(Nd(),e,"spectrum"),sp(Qg(),e,"spectrum")])})}),cb=e=>$u(e.event);var GA=[BS,qA,IS,UA,B0,MS,jA,WA,$A,pB,ga({schema:[Oo("mouseIsDown",()=>Ot(!1))],name:"spectrum",overrides:e=>{const r=e.model.manager,a=(l,m)=>r.getValueFromEvent(m).map(g=>r.setValueFrom(l,e,g));return{behaviours:ve([pt.config({mode:"special",onLeft:(l,m)=>r.onLeft(l,e,cb(m)),onRight:(l,m)=>r.onRight(l,e,cb(m)),onUp:(l,m)=>r.onUp(l,e,cb(m)),onDown:(l,m)=>r.onDown(l,e,cb(m))}),er.config({}),$t.config({})]),events:Cn([Me(vl(),a),Me(bc(),a),Me(ua(),a),Me(Nd(),(l,m)=>{e.mouseIsDown.get()&&a(l,m)})])}}})];const db=ee("slider.change.value"),PS=e=>{const r=e.event.raw;if(-1!==r.type.indexOf("touch")){const a=r;return void 0!==a.touches&&1===a.touches.length?N.some(a.touches[0]).map(l=>Go(l.clientX,l.clientY)):N.none()}{const a=r;return void 0!==a.clientX?N.some(a).map(l=>Go(l.clientX,l.clientY)):N.none()}},yg=e=>e.model.minX,fd=e=>e.model.minY,ub=e=>e.model.minX-1,mb=e=>e.model.minY-1,Yd=e=>e.model.maxX,lm=e=>e.model.maxY,M0=e=>e.model.maxX+1,gb=e=>e.model.maxY+1,LS=(e,r,a)=>r(e)-a(e),FS=e=>LS(e,Yd,yg),I0=e=>LS(e,lm,fd),zS=e=>FS(e)/2,KA=e=>I0(e)/2,cm=(e,r)=>r?e.stepSize*e.speedMultiplier:e.stepSize,YA=e=>e.snapToGrid,th=e=>e.snapStart,P0=e=>e.rounded,oh=(e,r)=>void 0!==e[r+"-edge"],L0=e=>oh(e,"left"),HS=e=>oh(e,"right"),VS=e=>oh(e,"top"),US=e=>oh(e,"bottom"),bd=e=>e.model.value.get(),Xd=(e,r)=>({x:e,y:r}),Rl=(e,r)=>{Bt(e,db(),{value:r})},F0=(e,r,a,l)=>e<r?e:e>a?a:e===r?r-1:Math.max(r,e-l),z0=(e,r,a,l)=>e>a?e:e<r?r:e===a?a+1:Math.min(a,e+l),XA=(e,r,a)=>Math.max(r,Math.min(a,e)),jS=e=>{const{min:r,max:a,range:l,value:m,step:g,snap:h,snapStart:v,rounded:y,hasMinEdge:_,hasMaxEdge:k,minBound:E,maxBound:A,screenRange:B}=e,L=_?r-1:r,G=k?a+1:a;if(m<E)return L;if(m>A)return G;{const K=(z=E,Math.min(A,Math.max(m,z))-z),Q=XA(K/B*l+r,L,G);return h&&Q>=r&&Q<=a?((W,z,Y,Z,te)=>te.fold(()=>{const Ce=Math.round((W-z)/Z)*Z;return XA(z+Ce,z-1,Y+1)},ae=>{const De=Math.round((W-ae)%Z/Z),Fe=Math.floor((W-ae)/Z),Ie=Math.floor((Y-ae)/Z),ot=ae+Math.min(Ie,Fe+De)*Z;return Math.max(ae,ot)}))(Q,r,a,g,v):y?Math.round(Q):Q}var z},H0=e=>{const{min:r,max:a,range:l,value:m,hasMinEdge:g,hasMaxEdge:h,maxBound:v,maxOffset:y,centerMinEdge:_,centerMaxEdge:k}=e;return m<r?g?0:_:m>a?h?v:k:(m-r)/l*y},qS="left",Ic=e=>e.element.dom.getBoundingClientRect(),Dl=(e,r)=>e[r],V0=e=>{const r=Ic(e);return Dl(r,qS)},GS=e=>{const r=Ic(e);return Dl(r,"right")},U0=e=>{const r=Ic(e);return Dl(r,"top")},KS=e=>{const r=Ic(e);return Dl(r,"bottom")},YS=e=>{const r=Ic(e);return Dl(r,"width")},XS=e=>{const r=Ic(e);return Dl(r,"height")},JS=(e,r,a)=>(e+r)/2-a,QS=(e,r)=>{const a=Ic(e),l=Ic(r),m=Dl(a,qS),g=Dl(a,"right"),h=Dl(l,qS);return JS(m,g,h)},pb=(e,r)=>{const a=Ic(e),l=Ic(r),m=Dl(a,"top"),g=Dl(a,"bottom"),h=Dl(l,"top");return JS(m,g,h)},j0=(e,r)=>{Bt(e,db(),{value:r})},$0=(e,r,a)=>{const l={min:yg(r),max:Yd(r),range:FS(r),value:a,step:cm(r),snap:YA(r),snapStart:th(r),rounded:P0(r),hasMinEdge:L0(r),hasMaxEdge:HS(r),minBound:V0(e),maxBound:GS(e),screenRange:YS(e)};return jS(l)},ZS=e=>(r,a,l)=>((m,g,h,v)=>{const y=(m>0?z0:F0)(bd(h),yg(h),Yd(h),cm(h,v));return j0(g,y),N.some(y)})(e,r,a,l).map(un),W0=(e,r,a,l,m,g)=>{const h=((v,y,_,k,E)=>{const A=YS(v),B=k.bind(K=>N.some(QS(K,v))).getOr(0),L=E.bind(K=>N.some(QS(K,v))).getOr(A),G={min:yg(y),max:Yd(y),range:FS(y),value:_,hasMinEdge:L0(y),hasMaxEdge:HS(y),minBound:V0(v),minOffset:0,maxBound:GS(v),maxOffset:A,centerMinEdge:B,centerMaxEdge:L};return H0(G)})(r,g,a,l,m);return V0(r)-V0(e)+h},QA=ZS(-1),eo=ZS(1),hb=N.none,ZA=N.none,eN={"top-left":N.none(),top:N.none(),"top-right":N.none(),right:N.some((e,r)=>{Rl(e,M0(r))}),"bottom-right":N.none(),bottom:N.none(),"bottom-left":N.none(),left:N.some((e,r)=>{Rl(e,ub(r))})};var tN=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=$0(e,r,a);return j0(e,l),l},setToMin:(e,r)=>{const a=yg(r);j0(e,a)},setToMax:(e,r)=>{const a=Yd(r);j0(e,a)},findValueOfOffset:$0,getValueFromEvent:e=>PS(e).map(r=>r.left),findPositionOfValue:W0,setPositionFromValue:(e,r,a,l)=>{const m=bd(a),g=W0(e,l.getSpectrum(e),m,l.getLeftEdge(e),l.getRightEdge(e),a),h=ln(r.element)/2;lo(r.element,"left",g-h+"px")},onLeft:QA,onRight:eo,onUp:hb,onDown:ZA,edgeActions:eN});const fb=(e,r)=>{Bt(e,db(),{value:r})},q0=(e,r,a)=>{const l={min:fd(r),max:lm(r),range:I0(r),value:a,step:cm(r),snap:YA(r),snapStart:th(r),rounded:P0(r),hasMinEdge:VS(r),hasMaxEdge:US(r),minBound:U0(e),maxBound:KS(e),screenRange:XS(e)};return jS(l)},nh=e=>(r,a,l)=>((m,g,h,v)=>{const y=(m>0?z0:F0)(bd(h),fd(h),lm(h),cm(h,v));return fb(g,y),N.some(y)})(e,r,a,l).map(un),G0=(e,r,a,l,m,g)=>{const h=((v,y,_,k,E)=>{const A=XS(v),B=k.bind(K=>N.some(pb(K,v))).getOr(0),L=E.bind(K=>N.some(pb(K,v))).getOr(A),G={min:fd(y),max:lm(y),range:I0(y),value:_,hasMinEdge:VS(y),hasMaxEdge:US(y),minBound:U0(v),minOffset:0,maxBound:KS(v),maxOffset:A,centerMinEdge:B,centerMaxEdge:L};return H0(G)})(r,g,a,l,m);return U0(r)-U0(e)+h},oN=N.none,ek=N.none,nN=nh(-1),rN=nh(1),hB={"top-left":N.none(),top:N.some((e,r)=>{Rl(e,mb(r))}),"top-right":N.none(),right:N.none(),"bottom-right":N.none(),bottom:N.some((e,r)=>{Rl(e,gb(r))}),"bottom-left":N.none(),left:N.none()};var fB=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=q0(e,r,a);return fb(e,l),l},setToMin:(e,r)=>{const a=fd(r);fb(e,a)},setToMax:(e,r)=>{const a=lm(r);fb(e,a)},findValueOfOffset:q0,getValueFromEvent:e=>PS(e).map(r=>r.top),findPositionOfValue:G0,setPositionFromValue:(e,r,a,l)=>{const m=bd(a),g=G0(e,l.getSpectrum(e),m,l.getTopEdge(e),l.getBottomEdge(e),a),h=gr(r.element)/2;lo(r.element,"top",g-h+"px")},onLeft:oN,onRight:ek,onUp:nN,onDown:rN,edgeActions:hB});const bb=(e,r)=>{Bt(e,db(),{value:r})},K0=(e,r)=>({x:e,y:r}),Y0=(e,r)=>(a,l,m)=>((g,h,v,y,_)=>{const k=g>0?z0:F0,E=h?bd(y).x:k(bd(y).x,yg(y),Yd(y),cm(y,_)),A=h?k(bd(y).y,fd(y),lm(y),cm(y,_)):bd(y).y;return bb(v,K0(E,A)),N.some(E)})(e,r,a,l,m).map(un),bB=Y0(-1,!1),sN=Y0(1,!1),vB=Y0(-1,!0),aN=Y0(1,!0),iN={"top-left":N.some((e,r)=>{Rl(e,Xd(ub(r),mb(r)))}),top:N.some((e,r)=>{Rl(e,Xd(zS(r),mb(r)))}),"top-right":N.some((e,r)=>{Rl(e,Xd(M0(r),mb(r)))}),right:N.some((e,r)=>{Rl(e,Xd(M0(r),KA(r)))}),"bottom-right":N.some((e,r)=>{Rl(e,Xd(M0(r),gb(r)))}),bottom:N.some((e,r)=>{Rl(e,Xd(zS(r),gb(r)))}),"bottom-left":N.some((e,r)=>{Rl(e,Xd(ub(r),gb(r)))}),left:N.some((e,r)=>{Rl(e,Xd(ub(r),KA(r)))})};var tk=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=$0(e,r,a.left),m=q0(e,r,a.top),g=K0(l,m);return bb(e,g),g},setToMin:(e,r)=>{const a=yg(r),l=fd(r);bb(e,K0(a,l))},setToMax:(e,r)=>{const a=Yd(r),l=lm(r);bb(e,K0(a,l))},getValueFromEvent:e=>PS(e),setPositionFromValue:(e,r,a,l)=>{const m=bd(a),g=W0(e,l.getSpectrum(e),m.x,l.getLeftEdge(e),l.getRightEdge(e),a),h=G0(e,l.getSpectrum(e),m.y,l.getTopEdge(e),l.getBottomEdge(e),a),v=ln(r.element)/2,y=gr(r.element)/2;lo(r.element,"left",g-v+"px"),lo(r.element,"top",h-y+"px")},onLeft:bB,onRight:sN,onUp:vB,onDown:aN,edgeActions:iN});const Bl=$s({name:"Slider",configFields:[fe("stepSize",1),fe("speedMultiplier",10),fe("onChange",Qe),fe("onChoose",Qe),fe("onInit",Qe),fe("onDragStart",Qe),fe("onDragEnd",Qe),fe("snapToGrid",!1),fe("rounded",!0),fo("snapStart"),Bo("model",xo("mode",{x:[fe("minX",0),fe("maxX",100),Oo("value",e=>Ot(e.mode.minX)),_e("getInitialValue"),In("manager",tN)],y:[fe("minY",0),fe("maxY",100),Oo("value",e=>Ot(e.mode.minY)),_e("getInitialValue"),In("manager",fB)],xy:[fe("minX",0),fe("maxX",100),fe("minY",0),fe("maxY",100),Oo("value",e=>Ot({x:e.mode.minX,y:e.mode.minY})),_e("getInitialValue"),In("manager",tk)]})),ys("sliderBehaviours",[pt,at]),Oo("mouseIsDown",()=>Ot(!1))],partFields:GA,factory:(e,r,a,l)=>{const m=W=>rd(W,e,"thumb"),g=W=>rd(W,e,"spectrum"),h=W=>fn(W,e,"left-edge"),v=W=>fn(W,e,"right-edge"),y=W=>fn(W,e,"top-edge"),_=W=>fn(W,e,"bottom-edge"),k=e.model,E=k.manager,A=(W,z)=>{E.setPositionFromValue(W,z,e,{getLeftEdge:h,getRightEdge:v,getTopEdge:y,getBottomEdge:_,getSpectrum:g})},B=(W,z)=>{k.value.set(z);const Y=m(W);A(W,Y)},L=W=>{const z=e.mouseIsDown.get();e.mouseIsDown.set(!1),z&&fn(W,e,"thumb").each(Y=>{const Z=k.value.get();e.onChoose(W,Y,Z)})},G=(W,z)=>{z.stop(),e.mouseIsDown.set(!0),e.onDragStart(W,m(W))},K=(W,z)=>{z.stop(),e.onDragEnd(W,m(W)),L(W)},Q=W=>{fn(W,e,"spectrum").map(pt.focusIn)};return{uid:e.uid,dom:e.dom,components:r,behaviours:ar(e.sliderBehaviours,[pt.config({mode:"special",focusIn:Q}),at.config({store:{mode:"manual",getValue:W=>k.value.get(),setValue:B}}),Ri.config({channels:{[Fv()]:{onReceive:L}}})]),events:Cn([Me(db(),(W,z)=>{((Y,Z)=>{B(Y,Z);const te=m(Y);e.onChange(Y,te,Z),N.some(!0)})(W,z.event.value)}),qn((W,z)=>{const Y=k.getInitialValue();k.value.set(Y);const Z=m(W);A(W,Z);const te=g(W);e.onInit(W,Z,te,k.value.get())}),Me(vl(),G),Me($l(),K),Me(ua(),(W,z)=>{Q(W),G(W,z)}),Me(Qg(),K)]),apis:{resetToMin:W=>{E.setToMin(W,e)},resetToMax:W=>{E.setToMax(W,e)},setValue:B,refresh:A},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,r,a)=>{e.setValue(r,a)},resetToMin:(e,r)=>{e.resetToMin(r)},resetToMax:(e,r)=>{e.resetToMax(r)},refresh:(e,r)=>{e.refresh(r)}}}),X0=bt("rgb-hex-update"),lN=bt("slider-update"),ok=bt("palette-update"),J0=[ys("formBehaviours",[at])],vb=e=>"<alloy.field."+e+">",nk=(e,r)=>({uid:e.uid,dom:e.dom,components:r,behaviours:ar(e.formBehaviours,[at.config({store:{mode:"manual",getValue:a=>{const l=wp(a,e);return pn(l,(m,g)=>m().bind(h=>{return v=_o.getCurrent(h),y=new Error(`Cannot find a current component to extract the value from for form part '${g}': `+ql(h.element)),v.fold(()=>ko.error(y),ko.value);var v,y}).map(at.getValue))},setValue:(a,l)=>{gn(l,(m,g)=>{fn(a,e,g).each(h=>{_o.getCurrent(h).each(v=>{at.setValue(v,m)})})})}}})]),apis:{getField:(a,l)=>fn(a,e,l).bind(_o.getCurrent)}}),dm={getField:bv((e,r,a)=>e.getField(r,a)),sketch:e=>{const r=(()=>{const g=[];return{field:(h,v)=>(g.push(h),qm("form",vb(h),v)),record:ee(g)}})(),a=e(r),l=r.record(),m=Je(l,g=>ga({name:g,pname:vb(g)}));return of("form",J0,m,nk,a)}},rk=bt("valid-input"),Q0=bt("invalid-input"),sk=bt("validating-input"),Z0="colorcustom.rgb.",Jd=()=>_o.config({find:N.some}),ex=e=>_o.config({find:r=>ul(r.element,e).bind(a=>r.getSystem().getByDom(a).toOptional())}),dN=je([fe("preprocess",ut),fe("postprocess",ut)]),vd=(e,r)=>{const a=co("RepresentingConfigs.memento processors",dN,r);return at.config({store:{mode:"manual",getValue:l=>{const m=e.get(l),g=at.getValue(m);return a.postprocess(g)},setValue:(l,m)=>{const g=a.preprocess(m),h=e.get(l);at.setValue(h,g)}}})},Qd=(e,r,a)=>at.config({store:{mode:"manual",...e.map(l=>({initialValue:l})).getOr({}),getValue:r,setValue:a}}),xg=(e,r,a)=>Qd(e,l=>r(l.element),(l,m)=>a(l.element,m)),um=e=>at.config({store:{mode:"memory",initialValue:e}}),yB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var ik=tinymce.util.Tools.resolve("tinymce.Resource"),oc=tinymce.util.Tools.resolve("tinymce.util.Tools");const lk=(e,r)=>{let a=null;const l=()=>{Ya(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...m)=>{l(),a=setTimeout(()=>{a=null,e.apply(null,m)},r)}}},tx=bt("alloy-fake-before-tabstop"),yb=bt("alloy-fake-after-tabstop"),ck=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:ve([$t.config({ignore:!0}),er.config({})])}),uN=(e,r)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[ck([tx]),r,ck([yb])],behaviours:ve([ex(1)])}),dk=(e,r)=>{Bt(e,vc(),{raw:{which:9,shiftKey:r}})},uk=(e,r)=>{const a=r.element;Ha(a,tx)?dk(e,!0):Ha(a,yb)&&dk(e,!1)},xb=e=>Qp(e,["."+tx,"."+yb].join(","),Ve),wb=bt("update-dialog"),mN=bt("update-title"),ox=bt("update-body"),mk=bt("update-footer"),gN=bt("body-send-message"),_b=bt("dialog-focus-shifted"),gk=ta().browser,mm=gk.isSafari(),xB=gk.isFirefox(),Cb=mm||xB,wB=gk.isChromium(),pk=({scrollTop:e,scrollHeight:r,clientHeight:a})=>Math.ceil(e)+a>=r,rh=(e,r)=>e.scrollTo(0,"bottom"===r?99999999:r),hk=(e,r,a)=>{const l=e.dom;N.from(l.contentDocument).fold(a,m=>{let g=0;const h=((y,_)=>{const k=y.body;return N.from(!/^<!DOCTYPE (html|HTML)/.test(_)&&(!wB&&!mm||vt(k)&&(0!==k.scrollTop||Math.abs(k.scrollHeight-k.clientHeight)>1))?k:y.documentElement)})(m,r).map(y=>(g=y.scrollTop,y)).forall(pk),v=()=>{const y=l.contentWindow;vt(y)&&(h?rh(y,"bottom"):!h&&Cb&&0!==g&&rh(y,g))};mm&&l.addEventListener("load",v,{once:!0}),m.open(),m.write(r),m.close(),mm||v()})},pN=Hr(Cb,mm?500:200).map(e=>((r,a)=>{let l=null,m=null;return{cancel:()=>{Ya(l)||(clearTimeout(l),l=null,m=null)},throttle:(...g)=>{m=g,Ya(l)&&(l=setTimeout(()=>{const h=m;l=null,m=null,r.apply(null,h)},a))}}})(hk,e)),fk=bt("toolbar.button.execute"),gm=bt("common-button-display-events"),nx={[Ki()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[yc()]:["toolbar-button-events",gm],[ua()]:["focusing","alloy.base.behaviour",gm]},sh=e=>lo(e.element,"width",Zr(e.element,"width")),wg=(e,r,a)=>El(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},r),rx=(e,r)=>wg(e,r,[]),Zd=(e,r)=>wg(e,r,[so.config({})]),sx=(e,r,a)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Or(a.translate(e))],behaviours:ve([so.config({})])}),Pi=bt("update-menu-text"),_g=bt("update-menu-icon"),bk=(e,r,a)=>{const l=Ot(Qe),m=e.text.map(A=>dn(sx(A,r,a.providers))),g=e.icon.map(A=>dn(Zd(A,a.providers.icons))),h=(A,B)=>{const L=at.getValue(A);return $t.focus(L),Bt(L,"keydown",{raw:B.event.raw}),nl.close(L),N.some(!0)},v=e.role.fold(()=>({}),A=>({role:A})),y=e.tooltip.fold(()=>({}),A=>{const B=a.providers.translate(A);return{title:B,"aria-label":B}}),_=El("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},a.providers.icons),k=bt("common-button-display-events");return dn(nl.sketch({...e.uid?{uid:e.uid}:{},...v,dom:{tag:"button",classes:[r,`${r}--select`].concat(Je(e.classes,A=>`${r}--${A}`)),attributes:{...y}},components:Gp([g.map(A=>A.asSpec()),m.map(A=>A.asSpec()),N.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(A,B,L)=>{e.searchable&&RO(L).each(K=>$t.focus(K))},dropdownBehaviours:ve([...e.dropdownBehaviours,lg(()=>e.disabled||a.providers.isDisabled()),cs(),lb.config({}),so.config({}),go("dropdown-events",[qd(e,l),om(e,l)]),go(k,[qn((A,B)=>sh(A))]),go("menubutton-update-display-text",[Me(Pi,(A,B)=>{m.bind(L=>L.getOpt(A)).each(L=>{so.set(L,[Or(a.providers.translate(B.event.text))])})}),Me(_g,(A,B)=>{g.bind(L=>L.getOpt(A)).each(L=>{so.set(L,[Zd(B.event.icon,a.providers.icons)])})})])]),eventOrder:Dn(nx,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[yc()]:["toolbar-button-events","dropdown-events",k]}),sandboxBehaviours:ve([pt.config({mode:"special",onLeft:h,onRight:h}),go("dropdown-sandbox-events",[Me(DC,(A,B)=>{(L=>{const G=at.getValue(L),K=Uf(L).map(IC);nl.refetch(G).get(()=>{const Q=vr.getCoupled(G,"sandbox");K.each(W=>Uf(Q).each(z=>{return at.setValue(Y=z,(Z=W).fetchPattern),Y.element.dom.selectionStart=Z.selectionStart,void(Y.element.dom.selectionEnd=Z.selectionEnd);var Y,Z}))})})(A),B.stop()}),Me(BC,(A,B)=>{var L,G,K;G=B,(K=L=A,jo.getState(K).bind(en.getHighlighted).bind(en.getHighlighted)).each(K=>{((Q,W,z,Y)=>{const Z={...Y,target:W};Q.getSystem().triggerEvent(z,W,Z)})(L,K.element,G.event.eventType,G.event.interactionEvent)}),B.stop()})])]),lazySink:a.getSink,toggleClass:`${r}--active`,parts:{menu:{...Vf(0,0,e.presets),fakeFocus:e.searchable,onHighlightItem:kA,onCollapseMenu:(A,B,L)=>{en.getHighlighted(L).each(G=>{kA(A,L,G)})},onDehighlightItem:EA}},getAnchorOverrides:()=>({maxHeightFunction:(A,B)=>{NE()(A,B-10)}}),fetch:A=>md(Xn(e.fetch,A))})).asSpec()},ax=e=>"separator"===e.type,_B={type:"separator"},hN=(e,r)=>{const a=((l,m)=>{const g=qt(l,(h,v)=>So(v)?""===v?h:"|"===v?h.length>0&&!ax(h[h.length-1])?h.concat([_B]):h:vo(m,v.toLowerCase())?h.concat([m[v.toLowerCase()]]):h:h.concat([v]),[]);return g.length>0&&ax(g[g.length-1])&&g.pop(),g})(So(e)?e.split(" "):e,r);return Wo(a,(l,m)=>{if(vo(m,"getSubmenuItems")){const h=((v,y)=>{const _=v.getSubmenuItems(),k=hN(_,y);return{item:v,menus:Dn(k.menus,{[v.value]:k.items}),expansions:Dn(k.expansions,{[v.value]:v.value})}})((v=>{const y=lt(v,"value").getOrThunk(()=>bt("generated-menu-item"));return Dn({value:y},v)})(m),r);return{menus:Dn(l.menus,h.menus),items:[h.item,...l.items],expansions:Dn(l.expansions,h.expansions)}}return{...l,items:[m,...l.items]}},{menus:{},expansions:{},items:[]})},ah=(e,r,a,l)=>{const m=bt("primary-menu"),g=hN(e,a.shared.providers.menuItems());if(0===g.items.length)return N.none();const h=l.search.fold(()=>({searchMode:"no-search"}),A=>({searchMode:"search-with-field",placeholder:A.placeholder})),v=SS(m,g.items,r,a,l.isHorizontalMenu,h),y=l.search.fold(()=>({searchMode:"no-search"}),A=>({searchMode:"search-with-results"})),_=pn(g.menus,(E,A)=>SS(A,E,r,a,!1,y)),k=Dn(_,Fa(m,v));return N.from(tg.tieredData(m,k,g.expansions))},vk=e=>!vo(e,"items"),fN="data-value",bN=(e,r,a,l)=>Je(a,m=>vk(m)?{type:"togglemenuitem",text:m.text,value:m.value,active:m.value===l,onAction:()=>{at.setValue(e,m.value),Bt(e,fi,{name:r}),$t.focus(e)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>bN(e,r,m.items,l)}),yk=(e,r)=>Ps(e,a=>vk(a)?Hr(a.value===r,a):yk(a.items,r)),vN=gi({name:"HtmlSelect",configFields:[_e("options"),ys("selectBehaviours",[$t,at]),fe("selectClasses",[]),fe("selectAttributes",{}),fo("data")],factory:(e,r)=>{const a=Je(e.options,m=>({dom:{tag:"option",value:m.value,innerHtml:m.text}})),l=e.data.map(m=>Fa("initialValue",m)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:a,behaviours:ar(e.selectBehaviours,[$t.config({}),at.config({store:{mode:"manual",getValue:m=>ai(m.element),setValue:(m,g)=>{const h=cr(e.options);Ee(e.options,v=>v.value===g).isSome()?Qc(m.element,g):-1===m.element.dom.selectedIndex&&""===g&&h.each(v=>Qc(m.element,v.value))},...l}})])}}}),Sb=ee([fe("field1Name","field1"),fe("field2Name","field2"),Zc("onLockedChange"),Pm(["lockClass"]),fe("locked",!1),Um("coupledFieldBehaviours",[_o,at])]),yN=(e,r)=>ga({factory:rn,name:e,overrides:a=>({fieldBehaviours:ve([go("coupled-input-behaviour",[Me(Em(),l=>{var m,g,h;(m=l,g=a,h=r,fn(m,g,h).bind(_o.getCurrent)).each(m=>{fn(l,a,"lock").each(g=>{Co.isOn(g)&&a.onLockedChange(l,m,g)})})})])])})}),xN=ee([yN("field1","field2"),yN("field2","field1"),ga({factory:Bs,schema:[_e("dom")],name:"lock",overrides:e=>({buttonBehaviours:ve([Co.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),vi=$s({name:"FormCoupledInputs",configFields:Sb(),partFields:xN(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,behaviours:jm(e.coupledFieldBehaviours,[_o.config({find:N.some}),at.config({store:{mode:"manual",getValue:m=>{const g=Gv(m,e,["field1","field2"]);return{[e.field1Name]:at.getValue(g.field1()),[e.field2Name]:at.getValue(g.field2())}},setValue:(m,g)=>{const h=Gv(m,e,["field1","field2"]);zr(g,e.field1Name)&&at.setValue(h.field1(),g[e.field1Name]),zr(g,e.field2Name)&&at.setValue(h.field2(),g[e.field2Name])}}})]),apis:{getField1:m=>fn(m,e,"field1"),getField2:m=>fn(m,e,"field2"),getLock:m=>fn(m,e,"lock")}}),apis:{getField1:(e,r)=>e.getField1(r),getField2:(e,r)=>e.getField2(r),getLock:(e,r)=>e.getLock(r)}}),ix=e=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==r){const a=parseFloat(r[1]);return ko.value({value:a,unit:r[2]})}return ko.error(e)},wN=(e,r)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=m=>vo(a,m);return e.unit===r?N.some(e.value):l(e.unit)&&l(r)?N.some(a[e.unit]===a[r]?e.value:e.value/a[e.unit]*a[r]):N.none()},xk=e=>N.none(),_N=(e,r)=>{const a=e.label.map(k=>im(k,r)),l=[Ut.config({disabled:()=>e.disabled||r.isDisabled()}),cs(),pt.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:k=>(nn(k,Kd),N.some(!0))}),go("textfield-change",[Me(Em(),(k,E)=>{Bt(k,fi,{name:e.name})}),Me(aw(),(k,E)=>{Bt(k,fi,{name:e.name})})]),er.config({})],m=e.validation.map(k=>Mc.config({getRoot:E=>Za(E.element),invalidClass:"tox-invalid",validator:{validate:E=>{const A=at.getValue(E),B=k.validator(A);return gd(!0===B?ko.value(A):ko.error(B))},validateOnLoad:k.validateOnLoad}})).toArray(),g={...e.placeholder.fold(ee({}),k=>({placeholder:r.translate(k)})),...e.inputMode.fold(ee({}),k=>({inputmode:k}))},h=rn.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map(k=>({data:k})).getOr({}),inputAttributes:g,inputClasses:[e.classname],inputBehaviours:ve(Rt([l,m])),selectOnFocus:!1,factory:em}),v=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[h]}:h,y=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),_=[Ut.config({disabled:()=>e.disabled||r.isDisabled(),onDisabled:k=>{rn.getField(k).each(Ut.disable)},onEnabled:k=>{rn.getField(k).each(Ut.enable)}}),cs()];return rl(a,v,y,_)},kb=(e,r)=>r.getAnimationRoot.fold(()=>e.element,a=>a(e)),eu=e=>e.dimension.property,Cg=(e,r)=>e.dimension.getDimension(r),lx=(e,r)=>{const a=kb(e,r);Tr(a,[r.shrinkingClass,r.growingClass])},wk=(e,r)=>{sr(e.element,r.openClass),Zo(e.element,r.closedClass),lo(e.element,eu(r),"0px"),jc(e.element)},_k=(e,r)=>{sr(e.element,r.closedClass),Zo(e.element,r.openClass),mn(e.element,eu(r))},Ck=(e,r,a,l)=>{a.setCollapsed(),lo(e.element,eu(r),Cg(r,e.element)),lx(e,r),wk(e,r),r.onStartShrink(e),r.onShrunk(e)},CN=(e,r,a,l)=>{const m=l.getOrThunk(()=>Cg(r,e.element));a.setCollapsed(),lo(e.element,eu(r),m),jc(e.element);const g=kb(e,r);sr(g,r.growingClass),Zo(g,r.shrinkingClass),wk(e,r),r.onStartShrink(e)},Eb=(e,r,a)=>{const l=Cg(r,e.element);("0px"===l?Ck:CN)(e,r,a,N.some(l))},Sk=(e,r,a)=>{const l=kb(e,r),m=Ha(l,r.shrinkingClass),g=Cg(r,e.element);_k(e,r);const h=Cg(r,e.element);(m?()=>{lo(e.element,eu(r),g),jc(e.element)}:()=>{wk(e,r)})(),sr(l,r.shrinkingClass),Zo(l,r.growingClass),_k(e,r),lo(e.element,eu(r),h),a.setExpanded(),r.onStartGrow(e)},kk=(e,r,a)=>{const l=kb(e,r);return!0===Ha(l,r.growingClass)},Ek=(e,r,a)=>{const l=kb(e,r);return!0===Ha(l,r.shrinkingClass)};var SN=Object.freeze({__proto__:null,refresh:(e,r,a)=>{if(a.isExpanded()){mn(e.element,eu(r));const l=Cg(r,e.element);lo(e.element,eu(r),l)}},grow:(e,r,a)=>{a.isExpanded()||Sk(e,r,a)},shrink:(e,r,a)=>{a.isExpanded()&&Eb(e,r,a)},immediateShrink:(e,r,a)=>{a.isExpanded()&&Ck(e,r,a)},hasGrown:(e,r,a)=>a.isExpanded(),hasShrunk:(e,r,a)=>a.isCollapsed(),isGrowing:kk,isShrinking:Ek,isTransitioning:(e,r,a)=>kk(e,r)||Ek(e,r),toggleGrow:(e,r,a)=>{(a.isExpanded()?Eb:Sk)(e,r,a)},disableTransitions:lx,immediateGrow:(e,r,a)=>{a.isExpanded()||(_k(e,r),lo(e.element,eu(r),Cg(r,e.element)),lx(e,r),a.setExpanded(),r.onStartGrow(e),r.onGrown(e))}}),CB=Object.freeze({__proto__:null,exhibit:(e,r,a)=>_c(r.expanded?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:Fa(r.dimension.property,"0px")}),events:(e,r)=>Cn([Ou(ep(),(a,l)=>{l.event.raw.propertyName===e.dimension.property&&(lx(a,e),r.isExpanded()&&mn(a.element,e.dimension.property),(r.isExpanded()?e.onGrown:e.onShrunk)(a))})])}),Sg=[_e("closedClass"),_e("openClass"),_e("shrinkingClass"),_e("growingClass"),fo("getAnimationRoot"),Uo("onShrunk"),Uo("onStartShrink"),Uo("onGrown"),Uo("onStartGrow"),fe("expanded",!1),Bo("dimension",xo("property",{width:[In("property","width"),In("getDimension",e=>ln(e)+"px")],height:[In("property","height"),In("getDimension",e=>gr(e)+"px")]}))];const yi=Ns({fields:Sg,name:"sliding",active:CB,apis:SN,state:Object.freeze({__proto__:null,init:e=>{const r=Ot(e.expanded);return za({isExpanded:()=>!0===r.get(),isCollapsed:()=>!1===r.get(),setCollapsed:Xn(r.set,!1),setExpanded:Xn(r.set,!0),readState:()=>"expanded: "+r.get()})}})}),ih=e=>({isEnabled:()=>!Ut.isDisabled(e),setEnabled:r=>Ut.set(e,!r),setActive:r=>{const a=e.element;r?(Zo(a,"tox-tbtn--enabled"),ro(a,"aria-pressed",!0)):(sr(a,"tox-tbtn--enabled"),Ht(a,"aria-pressed"))},isActive:()=>Ha(e.element,"tox-tbtn--enabled"),setText:r=>{Bt(e,Pi,{text:r})},setIcon:r=>Bt(e,_g,{icon:r})}),pm=(e,r,a,l,m=!0)=>bk({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:l,fetch:(g,h)=>{const v={pattern:e.search.isSome()?CS(g):""};e.fetch(y=>{h(ah(y,Rc.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:e.search}))},v,ih(g))},onSetup:e.onSetup,getApi:ih,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...m?[er.config({})]:[]]},r,a.shared),kN=(e,r,a)=>{const l=g=>h=>{const v=!h.isActive();h.setActive(v),g.storage.set(v),a.shared.getSink().each(y=>{r().getOpt(y).each(_=>{wl(_.element),Bt(_,Nl,{name:g.name,value:g.storage.get()})})})},m=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Je(e,h=>{const v=h.text.fold(()=>({}),y=>({text:y}));return{type:h.type,active:!1,...v,onAction:l(h),onSetup:m(h)}}))}},Tk=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Or(e)]}),Ok=bt("leaf-label-event-id"),Ak=({leaf:e,onLeafAction:r,visible:a,treeId:l,selectedId:m,backstage:g})=>{const h=e.menu.map(y=>pm(y,"tox-mbtn",g,N.none(),a)),v=[Tk(e.title)];return h.each(y=>v.push(y)),Bs.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:v,role:"treeitem",action:y=>{r(e.id),y.getSystem().broadcastOn([`update-active-item-${l}`],{value:e.id})},eventOrder:{[vc()]:[Ok,"keying"]},buttonBehaviours:ve([...a?[er.config({})]:[],Co.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ri.config({channels:{[`update-active-item-${l}`]:{onReceive:(y,_)=>{(_.value===e.id?Co.on:Co.off)(y)}}}}),go(Ok,[qn((y,_)=>{m.each(k=>{(k===e.id?Co.on:Co.off)(y)})}),Me(vc(),(y,_)=>{const E="ArrowRight"===_.event.raw.code;"ArrowLeft"===_.event.raw.code?(Xi(y.element,".tox-tree--directory").each(A=>{y.getSystem().getByDom(A).each(B=>{Du(A,".tox-tree--directory__label").each(L=>{B.getSystem().getByDom(L).each($t.focus)})})}),_.stop()):E&&_.stop()})])])})},kg=bt("directory-label-event-id"),Tb=({directory:e,visible:r,noChildren:a,backstage:l})=>{const m=e.menu.map(_=>pm(_,"tox-mbtn",l,N.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(v=l.shared.providers.icons,k=v,El("chevron-right",{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:[]},k))]},Tk(e.title)];var k,v;m.each(_=>{g.push(_)});const y=_=>{Xi(_.element,".tox-tree--directory").each(k=>{_.getSystem().getByDom(k).each(E=>{const A=!Co.isOn(E);Co.toggle(E),Bt(_,"expand-tree-node",{expanded:A,node:e.id})})})};return Bs.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:g,action:y,eventOrder:{[vc()]:[kg,"keying"]},buttonBehaviours:ve([...r?[er.config({})]:[],go(kg,[Me(vc(),(_,k)=>{const E="ArrowRight"===k.event.raw.code,A="ArrowLeft"===k.event.raw.code;E&&a&&k.stop(),(E||A)&&Xi(_.element,".tox-tree--directory").each(B=>{_.getSystem().getByDom(B).each(L=>{!Co.isOn(L)&&E||Co.isOn(L)&&A?(y(_),k.stop()):A&&!Co.isOn(L)&&(Xi(L.element,".tox-tree--directory").each(G=>{Du(G,".tox-tree--directory__label").each(K=>{L.getSystem().getByDom(K).each($t.focus)})}),k.stop())})})})])])})},Nk=({children:e,onLeafAction:r,visible:a,treeId:l,expandedIds:m,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(v=>"leaf"===v.type?Ak({leaf:v,selectedId:g,onLeafAction:r,visible:a,treeId:l,backstage:h}):Eg({directory:v,expandedIds:m,selectedId:g,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:h})),behaviours:ve([yi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),so.config({})])}),Rk=bt("directory-event-id"),Eg=({directory:e,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:m,expandedIds:g,selectedId:h})=>{const{children:v}=e,y=Ot(g),_=g.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Tb({directory:e,visible:a,noChildren:0===e.children.length,backstage:m}),Nk({children:v,expandedIds:g,selectedId:h,onLeafAction:r,visible:_,treeId:l,backstage:m})],behaviours:ve([go(Rk,[qn((k,E)=>{Co.set(k,_)}),Me("expand-tree-node",(k,E)=>{const{expanded:A,node:B}=E.event;y.set(A?[...y.get(),B]:y.get().filter(L=>L!==B))})]),Co.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(k,E)=>{const A=k.components()[1],B=(L=E,v.map(G=>"leaf"===G.type?Ak({leaf:G,selectedId:h,onLeafAction:r,visible:L,treeId:l,backstage:m}):Eg({directory:G,expandedIds:y.get(),selectedId:h,onLeafAction:r,labelTabstopping:L,treeId:l,backstage:m})));var L;E?yi.grow(A):yi.shrink(A),so.set(A,B)}})])}},EN=bt("tree-event-id");var TN=Object.freeze({__proto__:null,events:(e,r)=>{const a=e.stream.streams.setup(e,r);return Cn([Me(e.event,a),xc(()=>r.cancel())].concat(e.cancelEvent.map(l=>[Me(l,()=>r.cancel())]).getOr([])))}});const Dk=e=>{const r=Ot(null);return za({readState:()=>({timer:null!==r.get()?"set":"unset"}),setTimer:a=>{r.set(a)},cancel:()=>{const a=r.get();null!==a&&a.cancel()}})};var Bk=Object.freeze({__proto__:null,throttle:Dk,init:e=>e.stream.streams.state(e)}),cx=[Bo("stream",xo("mode",{throttle:[_e("delay"),fe("stopEvent",!0),In("streams",{setup:(e,r)=>{const a=e.stream,l=lk(e.onStream,a.delay);return r.setTimer(l),(m,g)=>{l.throttle(m,g),a.stopEvent&&g.stop()}},state:Dk})]})),fe("event","input"),fo("cancelEvent"),Zc("onStream")];const lh=Ns({fields:cx,name:"streaming",active:TN,state:Bk}),Ob=(e,r,a)=>{const l=at.getValue(a);at.setValue(r,l),dx(r)},ON=(e,r)=>{const a=e.element,l=ai(a),m=a.dom;"number"!==zn(a,"type")&&r(m,l)},dx=e=>{ON(e,(r,a)=>r.setSelectionRange(a.length,a.length))},Ab=ee("alloy.typeahead.itemexecute"),Mk=ee([fo("lazySink"),_e("fetch"),fe("minChars",5),fe("responseTime",1e3),Uo("onOpen"),fe("getHotspot",N.some),fe("getAnchorOverrides",ee({})),fe("layouts",N.none()),fe("eventOrder",{}),Od("model",{},[fe("getDisplayText",e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value),fe("selectsOver",!0),fe("populateFromBrowse",!0)]),Uo("onSetValue"),ii("onExecute"),Uo("onItemExecute"),fe("inputClasses",[]),fe("inputAttributes",{}),fe("inputStyles",{}),fe("matchWidth",!0),fe("useMinWidth",!1),fe("dismissOnBlur",!0),Pm(["openClass"]),fo("initialData"),ys("typeaheadBehaviours",[$t,at,lh,pt,Co,vr]),Oo("lazyTypeaheadComp",()=>Ot(N.none)),Oo("previewing",()=>Ot(!0))].concat(AO()).concat(sb())),AN=ee([ls({schema:[Mu()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(r,a,l)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(m=>{((g,h,v)=>{if(g.selectsOver){const y=at.getValue(h),_=g.getDisplayText(y),k=at.getValue(v);return 0===g.getDisplayText(k).indexOf(_)?N.some(()=>{var A;Ob(0,h,v),A=_.length,ON(h,(B,L)=>B.setSelectionRange(A,L.length))}):N.none()}return N.none()})(e.model,m,l).fold(()=>{e.model.selectsOver?(en.dehighlight(a,l),e.previewing.set(!0)):e.previewing.set(!1)},g=>{g(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(m=>{e.model.populateFromBrowse&&Ob(0,m,l),ur(l.element,"id").each(g=>ro(m.element,"aria-activedescendant",g))})},onExecute:(r,a)=>e.lazyTypeaheadComp.get().map(l=>(Bt(l,Ab(),{item:a}),!0)),onHover:(r,a)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(l=>{e.model.populateFromBrowse&&Ob(0,l,a)})}})})]),NN=$s({name:"Typeahead",configFields:Mk(),partFields:AN(),factory:(e,r,a,l)=>{const m=(E,A,B)=>{e.previewing.set(!1);const L=vr.getCoupled(E,"sandbox");if(jo.isOpen(L))_o.getCurrent(L).each(G=>{en.getHighlighted(G).fold(()=>{B(G)},()=>{cw(L,G.element,"keydown",A)})});else{const G=K=>{_o.getCurrent(K).each(B)};rm(e,h(E),E,L,l,G,pa.HighlightMenuAndItem).get(Qe)}},g=NC(e),h=E=>A=>A.map(B=>{const L=Jr(B.menus),G=ft(L,K=>st(K.items,Q=>"item"===Q.type));return at.getState(E).update(Je(G,K=>K.data)),B}),v=E=>_o.getCurrent(E),y="typeaheadevents",_=[$t.config({}),at.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:E=>ai(E.element),getFallbackEntry:E=>({value:E,meta:{}}),setValue:(E,A)=>{Qc(E.element,e.model.getDisplayText(A))},...e.initialData.map(E=>Fa("initialValue",E)).getOr({})}}),lh.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(E,A)=>{const B=vr.getCoupled(E,"sandbox");if($t.isFocused(E)&&ai(E.element).length>=e.minChars){const L=v(B).bind(K=>en.getHighlighted(K).map(at.getValue));e.previewing.set(!0);const G=K=>{v(B).each(Q=>{L.fold(()=>{e.model.selectsOver&&en.highlightFirst(Q)},W=>{en.highlightBy(Q,z=>at.getValue(z).value===W.value),en.getHighlighted(Q).orThunk(()=>(en.highlightFirst(Q),N.none()))})})};rm(e,h(E),E,B,l,G,pa.HighlightJustMenu).get(Qe)}},cancelEvent:av()}),pt.config({mode:"special",onDown:(E,A)=>(m(E,A,en.highlightFirst),N.some(!0)),onEscape:E=>{const A=vr.getCoupled(E,"sandbox");return jo.isOpen(A)?(jo.close(A),N.some(!0)):N.none()},onUp:(E,A)=>(m(E,A,en.highlightLast),N.some(!0)),onEnter:E=>{const A=vr.getCoupled(E,"sandbox"),B=jo.isOpen(A);if(B&&!e.previewing.get())return v(A).bind(L=>en.getHighlighted(L)).map(L=>(Bt(E,Ab(),{item:L}),!0));{const L=at.getValue(E);return nn(E,av()),e.onExecute(A,E,L),B&&jo.close(A),N.some(!0)}}}),Co.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),vr.config({others:{sandbox:E=>rb(e,E,{onOpen:()=>Co.on(E),onClose:()=>{e.lazyTypeaheadComp.get().each(A=>Ht(A.element,"aria-activedescendant")),Co.off(E)}})}}),go(y,[qn(E=>{e.lazyTypeaheadComp.set(N.some(E))}),xc(E=>{e.lazyTypeaheadComp.set(N.none())}),si(E=>{const A=Qe;wS(e,h(E),E,l,A,pa.HighlightMenuAndItem).get(Qe)}),Me(Ab(),(E,A)=>{const B=vr.getCoupled(E,"sandbox");Ob(0,E,A.event.item),nn(E,av()),e.onItemExecute(E,B,A.event.item,at.getValue(E)),jo.close(B),dx(E)})].concat(e.dismissOnBlur?[Me(tp(),E=>{const A=vr.getCoupled(E,"sandbox");Ec(A.element).isNone()&&jo.close(A)})]:[]))],k={[np()]:[at.name(),lh.name(),y],...e.eventOrder};return{uid:e.uid,dom:RC(Dn(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ar(e.typeaheadBehaviours,_)},eventOrder:k}}}),Tg=e=>({...e,toCached:()=>Tg(e.toCached()),bindFuture:r=>Tg(e.bind(a=>a.fold(l=>gd(ko.error(l)),l=>r(l)))),bindResult:r=>Tg(e.map(a=>a.bind(r))),mapResult:r=>Tg(e.map(a=>a.map(r))),mapError:r=>Tg(e.map(a=>a.mapError(r))),foldResult:(r,a)=>e.map(l=>l.fold(r,a)),withTimeout:(r,a)=>Tg(md(l=>{let m=!1;const g=setTimeout(()=>{m=!0,l(ko.error(a()))},r);e.get(h=>{m||(clearTimeout(g),l(h))})}))}),ux=(e,r,a=[],l,m,g)=>{const h=r.fold(()=>({}),_=>({action:_})),v={buttonBehaviours:ve([lg(()=>!e.enabled||g.isDisabled()),cs(),er.config({}),go("button press",[Oh("click"),Oh("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...h},y=Dn(v,{dom:l});return Dn(y,{components:m})},RN=(e,r,a,l=[])=>{const m={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(v=>({"aria-label":a.translate(v),title:a.translate(v)})).getOr({})},g=e.icon.map(v=>rx(v,a.icons)),h=Gp([g]);return ux(e,r,l,m,h,a)},Ik=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},DN=(e,r,a,l=[],m=[])=>{const g=a.translate(e.text),h=e.icon.map(k=>rx(k,a.icons)),v=[h.getOrThunk(()=>Or(g))],y=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),_=[...Ik(y),...h.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...m];return ux(e,r,l,{tag:"button",classes:_,attributes:{title:g}},v,a)},Pk=(e,r,a,l=[],m=[])=>{const g=DN(e,N.some(r),a,l,m);return Bs.sketch(g)},Lk=(e,r)=>a=>{"custom"===r?Bt(a,Nl,{name:e,value:{}}):"submit"===r?nn(a,Kd):"cancel"===r?nn(a,hd):console.error("Unknown button type: ",r)},Ga=(e,r,a)=>{if("menu"===r){const l=()=>h,m=e,g={...e,type:"menubutton",search:N.none(),onSetup:v=>(v.setEnabled(e.enabled),Qe),fetch:kN(m.items,l,a)},h=dn(pm(g,"tox-tbtn",a,N.none()));return h.asSpec()}if("custom"===(m=r)||"cancel"===m||"submit"===m){const l=Lk(e.name,r),m={...e,borderless:!1};return Pk(m,l,a.shared.providers,[])}var m;if(((l,m)=>"togglebutton"===m)(0,r))return((l,m)=>{var g,h;const v=l.icon.map(W=>Zd(W,m.icons)).map(dn),y=l.buttonType.getOr(l.primary?"primary":"secondary"),_={...l,name:null!==(g=l.name)&&void 0!==g?g:"",primary:"primary"===y,tooltip:N.from(l.tooltip),enabled:null!==(h=l.enabled)&&void 0!==h&&h,borderless:!1},k=_.tooltip.map(W=>({"aria-label":m.translate(W),title:m.translate(W)})).getOr({}),E=Ik(y??"secondary"),A=l.icon.isSome()&&l.text.isSome(),B={tag:"button",classes:[...E.concat(l.icon.isSome()?["tox-button--icon"]:[]),...l.active?["tox-button--enabled"]:[],...A?["tox-button--icon-and-text"]:[]],attributes:k},L=m.translate(l.text.getOr("")),G=Or(L),K=[...Gp([v.map(W=>W.asSpec())]),...l.text.isSome()?[G]:[]],Q=ux(_,N.some(W=>{Bt(W,Nl,{name:l.name,value:{setIcon:z=>{v.map(Y=>Y.getOpt(W).each(Z=>{so.set(Z,[Zd(z,m.icons)])}))}}})}),[],B,K,m);return Bs.sketch(Q)})(e,a.shared.providers);throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")},kB={type:"separator"},BN=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:Qe}),mx=(e,r)=>({type:"menuitem",value:r,text:e,meta:{attach:void 0},onAction:Qe}),MN=(e,r)=>{return(a=>Je(a,BN))((a=e,st(r,m=>m.type===a)));var a},Nb=e=>MN("header",e.targets),gx=e=>MN("anchor",e.targets),EB=e=>N.from(e.anchorTop).map(r=>mx("<top>",r)).toArray(),px=e=>N.from(e.anchorBottom).map(r=>mx("<bottom>",r)).toArray(),Fk=(e,r)=>{const a=e.toLowerCase();return st(r,l=>{var m;const h=null!==(m=l.value)&&void 0!==m?m:"";return _r((void 0!==l.meta&&void 0!==l.meta.text?l.meta.text:l.text).toLowerCase(),a)||_r(h.toLowerCase(),a)})},IN=bt("aria-invalid"),Ml=(e,r)=>{e.dom.checked=r},hx=e=>e.dom.checked,ts=e=>(r,a,l,m)=>lt(a,"name").fold(()=>e(a,m,N.none()),g=>r.field(g,e(a,m,lt(l,g)))),PN={bar:ts((e,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Je(e.items,r.shared.interpreter)})),collection:ts((e,r,a)=>((e,r,a)=>{const l=e.label.map(E=>im(E,r)),m=r.icons(),g=E=>(A,B)=>{Gl(B.event.target,"[data-collection-item-value]").each(L=>{E(A,B,L,zn(L,"data-collection-item-value"))})},h=g((E,A,B,L)=>{A.stop(),r.isDisabled()||Bt(E,Nl,{name:e.name,value:L})}),v=[Me(yl(),g((E,A,B)=>{wl(B)})),Me(Ca(),h),Me(br(),h),Me(Wl(),g((E,A,B)=>{Gn(E.element,"."+zp).each(L=>{sr(L,zp)}),Zo(B,zp)})),Me(eE(),g(E=>{Gn(E.element,"."+zp).each(A=>{sr(A,zp)})})),si(g((E,A,B,L)=>{Bt(E,Nl,{name:e.name,value:L})}))],y=(E,A)=>Je(Wa(E.element,".tox-collection__item"),A),_=rn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ut},behaviours:ve([Ut.config({disabled:r.isDisabled,onDisabled:E=>{y(E,A=>{Zo(A,"tox-collection__item--state-disabled"),ro(A,"aria-disabled",!0)})},onEnabled:E=>{y(E,A=>{sr(A,"tox-collection__item--state-disabled"),Ht(A,"aria-disabled")})}}),cs(),so.config({}),at.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(E,A)=>{((B,L)=>{const G=Je(L,W=>{const z=Mi.translate(W.text),Y=1===e.columns?`<div class="tox-collection__item-label">${z}</div>`:"",Z=`<div class="tox-collection__item-icon">${Ce=W.icon,null!==(De=m[Ce])&&void 0!==De?De:Ce}</div>`,te={_:" "," - ":" ","-":" "},ae=z.replace(/\_| \- |\-/g,Ce=>te[Ce]);var Ce,De;return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${IA.encodeAllRaw(W.value)}" title="${ae}" aria-label="${ae}">${Z}${Y}</div>`}),K="auto"!==e.columns&&e.columns>1?_i(G,e.columns):[G],Q=Je(K,W=>`<div class="tox-collection__group">${W.join("")}</div>`);Nm(B.element,Q.join(""))})(E,A),"auto"===e.columns&&s0(E,5,"tox-collection__item").each(({numRows:B,numColumns:L})=>{pt.setGridSize(E,B,L)}),nn(E,OS)}}),er.config({}),pt.config((k=e.columns,1===k?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===k?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${ag}`}})),go("collection-events",v)]),eventOrder:{[Ki()]:["disabling","alloy.base.behaviour","collection-events"]}});var k;return rl(l,_,["tox-form__group--collection"],[])})(e,r.shared.providers,a)),alertbanner:ts((e,r)=>((a,l)=>{const m=_O(a.icon,l.icons);return sa.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${a.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:a.url?void 0:m},components:a.url?[Bs.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:m,attributes:{title:l.translate(a.iconTooltip)}},action:g=>Bt(g,Nl,{name:"alert-banner",value:a.url}),buttonBehaviours:ve([Nf()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:l.translate(a.text)}}]})})(e,r.shared.providers)),input:ts((e,r,a)=>{return m=r.shared.providers,g=a,_N({name:(l=e).name,multiline:!1,label:l.label,inputMode:l.inputMode,placeholder:l.placeholder,flex:!1,disabled:!l.enabled,classname:"tox-textfield",validation:N.none(),maximized:l.maximized,data:g},m);var l,m,g}),textarea:ts((e,r,a)=>{return m=r.shared.providers,g=a,_N({name:(l=e).name,multiline:!0,label:l.label,inputMode:N.none(),placeholder:l.placeholder,flex:!0,disabled:!l.enabled,classname:"tox-textarea",validation:N.none(),maximized:l.maximized,data:g},m);var l,m,g}),label:ts((e,r)=>((a,l)=>{const m="tox-label";return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:[m,..."center"===a.align?[`${m}--center`]:[],..."end"===a.align?[`${m}--end`]:[]]},components:[Or(l.providers.translate(a.label))]},...Je(a.items,l.interpreter)],behaviours:ve([Jd(),so.config({}),(g=N.none(),xg(g,Fs,Nm)),pt.config({mode:"acyclic"})])};var g})(e,r.shared)),iframe:(Ng=(e,r,a)=>((l,m,g)=>{const h="tox-dialog__iframe",v=l.transparent?[]:[`${h}--opaque`],y=l.border?["tox-navobj-bordered"]:[],_={...l.label.map(B=>({title:B})).getOr({}),...g.map(B=>({srcdoc:B})).getOr({}),...l.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},k=((B,L)=>{const G=Ot(B.getOr(""));return{getValue:K=>G.get(),setValue:(K,Q)=>{if(G.get()!==Q){const W=K.element,z=()=>ro(W,"srcdoc",Q);L?pN.fold(ee(hk),Y=>Y.throttle)(W,Q,z):z()}G.set(Q)}}})(g,l.streamContent),E=l.label.map(B=>im(B,m)),A=rn.parts.field({factory:{sketch:B=>uN(N.from(y),{uid:B.uid,dom:{tag:"iframe",attributes:_,classes:[h,...v]},behaviours:ve([er.config({}),$t.config({}),Qd(g,k.getValue,k.setValue),Ri.config({channels:{[_b]:{onReceive:(L,G)=>{G.newFocus.each(K=>{Za(L.element).each(Q=>{(Jo(L.element,K)?Zo:sr)(Q,"tox-navobj-bordered-focus")})})}}}})])})}});return rl(E,A,["tox-form__group--stretched"],[])})(e,r.shared.providers,a),(e,r,a,l)=>{const m=Dn(r,{source:"dynamic"});return ts(Ng)(e,m,a,l)}),button:ts((e,r)=>((a,l)=>{const m=Lk(a.name,"custom");return g=N.none(),h=rn.parts.field({factory:Bs,...DN(a,N.some(m),l,[um(""),Jd()])}),rl(g,h,[],[]);var g,h})(e,r.shared.providers)),checkbox:ts((e,r,a)=>((l,m,g)=>{const h=E=>(E.element.dom.click(),N.some(!0)),v=rn.parts.field({factory:{sketch:ut},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ve([Jd(),Ut.config({disabled:()=>!l.enabled||m.isDisabled(),onDisabled:E=>{Za(E.element).each(A=>Zo(A,"tox-checkbox--disabled"))},onEnabled:E=>{Za(E.element).each(A=>sr(A,"tox-checkbox--disabled"))}}),er.config({}),$t.config({}),xg(g,hx,Ml),pt.config({mode:"special",onEnter:h,onSpace:h,stopSpaceKeyup:!0}),go("checkbox-events",[Me(Zg(),(E,A)=>{Bt(E,fi,{name:l.name})})])])}),y=rn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Or(m.translate(l.label))],behaviours:ve([lb.config({})])}),_=E=>El("checked"===E?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+E]},m.icons),k=dn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[_("checked"),_("unchecked")]});return rn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[v,k.asSpec(),y],fieldBehaviours:ve([Ut.config({disabled:()=>!l.enabled||m.isDisabled()}),cs()])})})(e,r.shared.providers,a)),colorinput:ts((e,r,a)=>((l,m,g,h)=>{const v=rn.parts.field({factory:em,inputClasses:["tox-textfield"],data:h,onSetValue:E=>Mc.run(E).get(Qe),inputBehaviours:ve([Ut.config({disabled:m.providers.isDisabled}),cs(),er.config({}),Mc.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>Za(E.element),notify:{onValid:E=>{const A=at.getValue(E);Bt(E,VA,{color:A})}},validator:{validateOnLoad:!1,validate:E=>{const A=at.getValue(E);if(0===A.length)return gd(ko.value(!0));{const B=Ls("span");lo(B,"background-color",A);const L=Jn(B,"background-color").fold(()=>ko.error("blah"),G=>ko.value(A));return gd(L)}}}})]),selectOnFocus:!1}),y=l.label.map(E=>im(E,m.providers)),_=(E,A)=>{Bt(E,RS,{value:A})},k=dn((E={dom:{tag:"span",attributes:{"aria-label":m.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Us,Vs,vs],onLtr:()=>[Vs,Us,vs]},components:[],fetch:fg(g.getColors(l.storageKey),l.storageKey,g.hasCustomColors()),columns:g.getColorCols(l.storageKey),presets:"color",onItemAction:(E,A)=>{k.getOpt(E).each(B=>{"custom"===A?g.colorPicker(L=>{L.fold(()=>nn(B,DS),G=>{_(B,G),cA(l.storageKey,G)})},"#ffffff"):_(B,"remove"===A?"":A)})}},nl.sketch({dom:E.dom,components:E.components,toggleClass:"mce-active",dropdownBehaviours:ve([lg((A=m).providers.isDisabled),cs(),lb.config({}),er.config({})]),layouts:E.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:A.getSink,fetch:B=>md(L=>E.fetch(L)).map(L=>N.from(T0(Dn(fS(bt("menu-value"),L,G=>{E.onItemAction(B,G)},E.columns,E.presets,Rc.CLOSE_ON_EXECUTE,Ve,A.providers),{movement:nb(E.columns,E.presets)})))),parts:{menu:Vf(0,0,E.presets)}})));var E,A;return rn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:y.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[v,k.asSpec()]}]),fieldBehaviours:ve([go("form-field-events",[Me(VA,(E,A)=>{k.getOpt(E).each(B=>{lo(B.element,"background-color",A.event.color)}),Bt(E,fi,{name:l.name})}),Me(RS,(E,A)=>{rn.getField(E).each(B=>{at.setValue(B,A.event.value),_o.getCurrent(E).each($t.focus)})}),Me(DS,(E,A)=>{rn.getField(E).each(B=>{_o.getCurrent(E).each($t.focus)})})])])})})(e,r.shared,r.colorinput,a)),colorpicker:ts((e,r,a)=>((l,m,g)=>{const h=_=>"tox-"+_,v=((e,r)=>gi({name:"ColourPicker",configFields:[_e("dom"),fe("onValidHex",Qe),fe("onInvalidHex",Qe)],factory:l=>{const m=((e,r,a,l)=>{const m=(k,E)=>Mc.config({invalidClass:r("invalid"),notify:{onValidate:A=>{Bt(A,sk,{type:k})},onValid:A=>{Bt(A,rk,{type:k,value:at.getValue(A)})},onInvalid:A=>{Bt(A,Q0,{type:k,value:at.getValue(A)})}},validator:{validate:A=>{const B=at.getValue(A),L=E(B)?ko.value(!0):ko.error(e("aria.input.invalid"));return gd(L)},validateOnLoad:!1}}),g=(k,E,A,B,L)=>{const G=e(Z0+"range"),W=[rn.parts.label({dom:{tag:"label",attributes:{"aria-label":B}},components:[Or(A)]}),rn.parts.field({data:L,factory:em,inputAttributes:{type:"text",..."hex"===E?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:ve([m(E,k),er.config({})]),onSetValue:Y=>{Mc.isInvalid(Y)&&Mc.run(Y).get(Qe)}})],z="hex"!==E?[rn.parts["aria-descriptor"]({text:G})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:W.concat(z)}},h=(k,E)=>{at.setValue(k,{red:E.red,green:E.green,blue:E.blue})},v=dn({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),y=(k,E)=>{v.getOpt(k).each(A=>{lo(A.element,"background-color","#"+E.value)})};return gi({factory:()=>{const k={red:Ot(N.some(255)),green:Ot(N.some(255)),blue:Ot(N.some(255)),hex:Ot(N.some("ffffff"))},E=Z=>k[Z].get(),A=(Z,te)=>{k[Z].set(te)},B=Z=>{const ae=Z.green,Ce=Z.blue;A("red",N.some(Z.red)),A("green",N.some(ae)),A("blue",N.some(Ce))},L=(Z,te)=>{const ae=te.event;"hex"!==ae.type?A(ae.type,N.none()):l(Z)},G=(Z,te)=>{const ae=te.event;"hex"===ae.type?((Ce,De)=>{a(Ce);const Fe=Bc(De);A("hex",N.some(Fe.value));const Ie=Zf(Fe);h(Ce,Ie),B(Ie),Bt(Ce,X0,{hex:Fe}),y(Ce,Fe)})(Z,ae.value):((Ce,De,Fe)=>{const Ie=parseInt(Fe,10);A(De,N.some(Ie)),E("red").bind(ot=>E("green").bind(ht=>E("blue").map(At=>dd(ot,ht,At,1)))).each(ot=>{const ht=((At,Qt)=>{const oo=Yp(Qt);return dm.getField(At,"hex").each(Ao=>{$t.isFocused(Ao)||at.setValue(At,{hex:oo.value})}),oo})(Ce,ot);Bt(Ce,X0,{hex:ht}),y(Ce,ht)})})(Z,ae.type,ae.value)},K=Z=>({label:e(Z0+Z+".label"),description:e(Z0+Z+".description")}),Q=K("red"),W=K("green"),z=K("blue"),Y=K("hex");return Dn(dm.sketch(Z=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[Z.field("red",rn.sketch(g(iS,"red",Q.label,Q.description,255))),Z.field("green",rn.sketch(g(iS,"green",W.label,W.description,255))),Z.field("blue",rn.sketch(g(iS,"blue",z.label,z.description,255))),Z.field("hex",rn.sketch(g(nS,"hex",Y.label,Y.description,"ffffff"))),v.asSpec()],formBehaviours:ve([Mc.config({invalidClass:r("form-invalid")}),go("rgb-form-events",[Me(rk,G),Me(Q0,L),Me(sk,L)])])})),{apis:{updateHex:(Z,te)=>{at.setValue(Z,{hex:te.value}),((ae,Ce)=>{const De=Zf(Ce);h(ae,De),B(De)})(Z,te),y(Z,te)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(k,E,A)=>{k.updateHex(E,A)}},extraApis:{}})})(e,r,l.onValidHex,l.onInvalidHex),g=((G,K)=>{const Q=Bl.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[K("sv-palette-spectrum")]}}),W=Bl.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[K("sv-palette-thumb")],innerHtml:`<div class=${K("sv-palette-inner-thumb")} role="presentation"></div>`}}),z=(Y,Z)=>{const{width:te,height:ae}=Y,Ce=Y.getContext("2d");if(null===Ce)return;Ce.fillStyle=Z,Ce.fillRect(0,0,te,ae);const De=Ce.createLinearGradient(0,0,te,0);De.addColorStop(0,"rgba(255,255,255,1)"),De.addColorStop(1,"rgba(255,255,255,0)"),Ce.fillStyle=De,Ce.fillRect(0,0,te,ae);const Fe=Ce.createLinearGradient(0,0,0,ae);Fe.addColorStop(0,"rgba(0,0,0,0)"),Fe.addColorStop(1,"rgba(0,0,0,1)"),Ce.fillStyle=Fe,Ce.fillRect(0,0,te,ae)};return gi({factory:Y=>{const Z=ee({x:0,y:0}),te=ve([_o.config({find:N.some}),$t.config({})]);return Bl.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":G(["Saturation {0}%, Brightness {1}%",0,0])},classes:[K("sv-palette")]},model:{mode:"xy",getInitialValue:Z},rounded:!1,components:[Q,W],onChange:(ae,Ce,De)=>{qo(De)||ro(ae.element,"aria-valuetext",G(["Saturation {0}%, Brightness {1}%",Math.floor(De.x),Math.floor(100-De.y)])),Bt(ae,ok,{value:De})},onInit:(ae,Ce,De,Fe)=>{z(De.element.dom,rA(sA))},sliderBehaviours:te})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(Y,Z,te)=>{((ae,Ce)=>{const De=ae.components()[0].element.dom,Fe=eb(Ce,100,100),Ie=nA(Fe);z(De,rA(Ie))})(Z,te)},setThumb:(Y,Z,te)=>{((ae,Ce)=>{const De=v0(Zf(Ce));Bl.setValue(ae,{x:De.saturation,y:100-De.value}),ro(ae.element,"aria-valuetext",G(["Saturation {0}%, Brightness {1}%",De.saturation,De.value]))})(Z,te)}},extraApis:{}})})(e,r),h={paletteRgba:Ot(sA),paletteHue:Ot(0)},v=dn(((G,K)=>{const Q=Bl.parts.spectrum({dom:{tag:"div",classes:[K("hue-slider-spectrum")],attributes:{role:"presentation"}}}),W=Bl.parts.thumb({dom:{tag:"div",classes:[K("hue-slider-thumb")],attributes:{role:"presentation"}}});return Bl.sketch({dom:{tag:"div",classes:[K("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ee(0)},components:[Q,W],sliderBehaviours:ve([$t.config({})]),onChange:(z,Y,Z)=>{ro(z.element,"aria-valuenow",Math.floor(360-3.6*Z)),Bt(z,lN,{value:Z})}})})(0,r)),y=dn(g.sketch({})),_=dn(m.sketch({})),k=(G,K,Q)=>{y.getOpt(G).each(W=>{g.setHue(W,Q)})},E=(G,K)=>{_.getOpt(G).each(Q=>{m.updateHex(Q,K)})},A=(G,K,Q)=>{v.getOpt(G).each(W=>{Bl.setValue(W,100-Q/360*100)})},B=(G,K)=>{y.getOpt(G).each(Q=>{g.setThumb(Q,K)})},L=(G,K,Q,W)=>{((z,Y)=>{const Z=Zf(z);h.paletteRgba.set(Z),h.paletteHue.set(Y)})(K,Q),yt(W,z=>{z(G,K,Q)})};return{uid:l.uid,dom:l.dom,components:[y.asSpec(),v.asSpec(),_.asSpec()],behaviours:ve([go("colour-picker-events",[Me(X0,(()=>{const G=[k,A,B];return(K,Q)=>{const W=Q.event.hex,z=v0(Zf(W));L(K,W,z.hue,G)}})()),Me(ok,(()=>{const G=[E];return(K,Q)=>{const W=Q.event.value,z=h.paletteHue.get(),Y=eb(z,W.x,100-W.y),Z=mg(Y);L(K,Z,z,G)}})()),Me(lN,(()=>{const G=[k,E];return(K,Q)=>{const W=(100-Q.event.value)/100*360,z=h.paletteRgba.get(),Y=v0(z),Z=eb(W,Y.saturation,Y.value),te=mg(Z);L(K,te,W,G)}})())]),_o.config({find:G=>_.getOpt(G)}),pt.config({mode:"acyclic"})])}}}))((_=m,k=>So(k)?_.translate(yB[k]):_.translate(k)),h),y=dn(v.sketch({dom:{tag:"div",classes:[h("color-picker-container")],attributes:{role:"presentation"}},onValidHex:_=>{Bt(_,Nl,{name:"hex-valid",value:!0})},onInvalidHex:_=>{Bt(_,Nl,{name:"hex-valid",value:!1})}}));var _;return{dom:{tag:"div"},components:[y.asSpec()],behaviours:ve([Qd(g,_=>{const k=y.get(_);return _o.getCurrent(k).bind(E=>at.getValue(E).hex).map(E=>"#"+ac(E,"#")).getOr("")},(_,k)=>{const E=N.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(k)).bind(B=>Lr(B,1)),A=y.get(_);_o.getCurrent(A).fold(()=>{console.log("Can not find form")},B=>{at.setValue(B,{hex:E.getOr("")}),dm.getField(B,"hex").each(L=>{nn(L,Em())})})}),Jd()])}})(0,r.shared.providers,a)),dropzone:ts((e,r,a)=>((l,m,g)=>{const h=(L,G)=>{G.stop()},v=L=>(G,K)=>{yt(L,Q=>{Q(G,K)})},y=(L,G)=>{var K;Ut.isDisabled(L)||k(L,null===(K=G.event.raw.dataTransfer)||void 0===K?void 0:K.files)},_=(L,G)=>{k(L,G.event.raw.target.files)},k=(L,G)=>{G&&(at.setValue(L,((K,Q)=>{const W=oc.explode(Q.getOption("images_file_types"));return st(Si(K),z=>Vo(W,Y=>Ei(z.name.toLowerCase(),`.${Y.toLowerCase()}`)))})(G,m)),Bt(L,fi,{name:l.name}))},E=dn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ve([go("input-file-events",[Am(Ca()),Am(br())])])}),A=l.label.map(L=>im(L,m)),B=rn.parts.field({factory:{sketch:L=>({uid:L.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ve([um(g.getOr([])),Jd(),Ut.config({}),Co.config({toggleClass:"dragenter",toggleOnExecute:!1}),go("dropzone-events",[Me("dragenter",v([h,Co.toggle])),Me("dragleave",v([h,Co.toggle])),Me("dragover",h),Me("drop",v([h,y])),Me(Zg(),_)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Or(m.translate("Drop an image here"))]},Bs.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Or(m.translate("Browse for an image")),E.asSpec()],action:G=>{E.get(G).element.dom.click()},buttonBehaviours:ve([er.config({}),lg(m.isDisabled),cs()])})]}]})}});return rl(A,B,["tox-form__group--stretched"],[])})(e,r.shared.providers,a)),grid:ts((e,r)=>{return{dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${(a=e).columns}col`]},components:Je(a.items,r.shared.interpreter)};var a}),listbox:ts((e,r,a)=>((l,m,g)=>{const h=m.shared.providers,v=g.bind(E=>yk(l.items,E)).orThunk(()=>cr(l.items).filter(vk)),y=l.label.map(E=>im(E,h)),k={dom:{tag:"div",classes:["tox-listboxfield"]},components:[rn.parts.field({dom:{},factory:{sketch:E=>bk({uid:E.uid,text:v.map(A=>A.text),icon:N.none(),tooltip:l.label,role:N.none(),fetch:(A,B)=>{const L=bN(A,l.name,l.items,at.getValue(A));B(ah(L,Rc.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:N.none()}))},onSetup:ee(Qe),getApi:ee({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[er.config({}),Qd(v.map(A=>A.value),A=>zn(A.element,fN),(A,B)=>{yk(l.items,B).each(L=>{ro(A.element,fN,L.value),Bt(A,Pi,{text:L.text})})})]},"tox-listbox",m.shared)}})]};return rn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([y.toArray(),[k]]),fieldBehaviours:ve([Ut.config({disabled:ee(!l.enabled),onDisabled:E=>{rn.getField(E).each(Ut.disable)},onEnabled:E=>{rn.getField(E).each(Ut.enable)}})])})})(e,r,a)),selectbox:ts((e,r,a)=>((l,m,g)=>{const h=Je(l.items,E=>({text:m.translate(E.text),value:E.value})),v=l.label.map(E=>im(E,m)),y=rn.parts.field({dom:{},...g.map(E=>({data:E})).getOr({}),selectAttributes:{size:l.size},options:h,factory:vN,selectBehaviours:ve([Ut.config({disabled:()=>!l.enabled||m.isDisabled()}),er.config({}),go("selectbox-change",[Me(Zg(),(E,A)=>{Bt(E,fi,{name:l.name})})])])}),_=l.size>1?N.none():N.some(El("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},m.icons)),k={dom:{tag:"div",classes:["tox-selectfield"]},components:Rt([[y],_.toArray()])};return rn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([v.toArray(),[k]]),fieldBehaviours:ve([Ut.config({disabled:()=>!l.enabled||m.isDisabled(),onDisabled:E=>{rn.getField(E).each(Ut.disable)},onEnabled:E=>{rn.getField(E).each(Ut.enable)}}),cs()])})})(e,r.shared.providers,a)),sizeinput:ts((e,r)=>((a,l)=>{let m=xk;const g=bt("ratio-event"),h=B=>El(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},l.icons),v=vi.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:l.translate(a.label.getOr("Constrain proportions"))}},components:[h("lock"),h("unlock")],buttonBehaviours:ve([Ut.config({disabled:()=>!a.enabled||l.isDisabled()}),cs(),er.config({})])}),y=B=>({dom:{tag:"div",classes:["tox-form__group"]},components:B}),_=B=>rn.parts.field({factory:em,inputClasses:["tox-textfield"],inputBehaviours:ve([Ut.config({disabled:()=>!a.enabled||l.isDisabled()}),cs(),er.config({}),go("size-input-events",[Me(Wl(),(L,G)=>{Bt(L,g,{isField1:B})}),Me(Zg(),(L,G)=>{Bt(L,fi,{name:a.name})})])]),selectOnFocus:!1}),k=B=>({dom:{tag:"label",classes:["tox-label"]},components:[Or(l.translate(B))]}),E=vi.parts.field1(y([rn.parts.label(k("Width")),_(!0)])),A=vi.parts.field2(y([rn.parts.label(k("Height")),_(!1)]));return vi.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[E,A,y([k("\xa0"),v])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(B,L,G)=>{ix(at.getValue(B)).each(K=>{m(K).each(Q=>{at.setValue(L,(W=>{const z={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let Y=W.value.toFixed((Z=W.unit)in z?z[Z]:1);var Z;return-1!==Y.indexOf(".")&&(Y=Y.replace(/\.?0*$/,"")),Y+W.unit})(Q))})})},coupledFieldBehaviours:ve([Ut.config({disabled:()=>!a.enabled||l.isDisabled(),onDisabled:B=>{vi.getField1(B).bind(rn.getField).each(Ut.disable),vi.getField2(B).bind(rn.getField).each(Ut.disable),vi.getLock(B).each(Ut.disable)},onEnabled:B=>{vi.getField1(B).bind(rn.getField).each(Ut.enable),vi.getField2(B).bind(rn.getField).each(Ut.enable),vi.getLock(B).each(Ut.enable)}}),cs(),go("size-input-events2",[Me(g,(B,L)=>{const G=L.event.isField1,K=G?vi.getField1(B):vi.getField2(B),Q=G?vi.getField2(B):vi.getField1(B),W=K.map(at.getValue).getOr(""),z=Q.map(at.getValue).getOr("");m=((Y,Z)=>{const te=ix(Y).toOptional(),ae=ix(Z).toOptional();return Xo(te,ae,(Ce,De)=>wN(Ce,De.unit).map(Fe=>De.value/Fe).map(Fe=>{return Ie=Fe,ot=De.unit,ht=>wN(ht,ot).map(At=>({value:At*Ie,unit:ot}));var Ie,ot}).getOr(xk)).getOr(xk)})(W,z)})])])})})(e,r.shared.providers)),slider:ts((e,r,a)=>((l,m,g)=>{const h=Bl.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Or(m.translate(l.label))]}),v=Bl.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),y=Bl.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Bl.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:l.min,maxX:l.max,getInitialValue:ee(g.getOrThunk(()=>(Math.abs(l.max)-Math.abs(l.min))/2))},components:[h,v,y],sliderBehaviours:ve([Jd(),$t.config({})]),onChoose:(_,k,E)=>{Bt(_,fi,{name:l.name,value:E})}})})(e,r.shared.providers,a)),urlinput:ts((e,r,a)=>((l,m,g,h)=>{const v=m.shared.providers,y=W=>{const z=at.getValue(W);g.addToHistory(z.value,l.filetype)},_={...h.map(W=>({initialData:W})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":IN,type:"url"},minChars:0,responseTime:0,fetch:W=>{const z=((Z,te,ae)=>{var Ce,De;const Fe=at.getValue(te),Ie=null!==(De=null===(Ce=Fe?.meta)||void 0===Ce?void 0:Ce.text)&&void 0!==De?De:Fe.value;return ae.getLinkInformation().fold(()=>[],ot=>{const ht=Fk(Ie,(Qt=ae.getHistory(Z),Je(Qt,oo=>mx(oo,oo))));var Qt,At;return"file"===Z?(At=[ht,Fk(Ie,Nb(ot)),Fk(Ie,Rt([EB(ot),gx(ot),px(ot)]))],qt(At,(Qt,oo)=>0===Qt.length||0===oo.length?Qt.concat(oo):Qt.concat(kB,oo),[])):ht})})(l.filetype,W,g),Y=ah(z,Rc.BUBBLE_TO_SANDBOX,m,{isHorizontalMenu:!1,search:N.none()});return gd(Y)},getHotspot:W=>K.getOpt(W),onSetValue:(W,z)=>{W.hasConfigured(Mc)&&Mc.run(W).get(Qe)},typeaheadBehaviours:ve([...g.getValidationHandler().map(W=>Mc.config({getRoot:z=>Za(z.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(z,Y)=>{A.getOpt(z).each(Z=>{ro(Z.element,"title",v.translate(Y))})}},validator:{validate:z=>{const Y=at.getValue(z);return Tg(md(Z=>{W({type:l.filetype,url:Y.value},te=>{if("invalid"===te.status){const ae=ko.error(te.message);Z(ae)}else{const ae=ko.value(te.message);Z(ae)}})}))},validateOnLoad:!1}})).toArray(),Ut.config({disabled:()=>!l.enabled||v.isDisabled()}),er.config({}),go("urlinput-events",[Me(Em(),W=>{const z=ai(W.element),Y=z.trim();Y!==z&&Qc(W.element,Y),"file"===l.filetype&&Bt(W,fi,{name:l.name})}),Me(Zg(),W=>{Bt(W,fi,{name:l.name}),y(W)}),Me(aw(),W=>{Bt(W,fi,{name:l.name}),y(W)})])]),eventOrder:{[Em()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:W=>W.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:m.shared.getSink,parts:{menu:Vf(0,0,"normal")},onExecute:(W,z,Y)=>{Bt(z,Kd,{})},onItemExecute:(W,z,Y,Z)=>{y(W),Bt(W,fi,{name:l.name})}},k=rn.parts.field({..._,factory:NN}),E=l.label.map(W=>im(W,v)),A=dn(((W,z,Y=W,Z=W)=>El(Y,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+W],attributes:{title:v.translate(Z),"aria-live":"polite",...z.fold(()=>({}),te=>({id:te}))}},v.icons))("invalid",N.some(IN),"warning")),B=dn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[A.asSpec()]}),L=g.getUrlPicker(l.filetype),G=bt("browser.url.event"),K=dn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[k,B.asSpec()],behaviours:ve([Ut.config({disabled:()=>!l.enabled||v.isDisabled()})])}),Q=dn(Pk({name:l.name,icon:N.some("browse"),text:l.picker_text.or(l.label).getOr(""),enabled:l.enabled,primary:!1,buttonType:N.none(),borderless:!0},W=>nn(W,G),v,[],["tox-browse-url"]));return rn.sketch({dom:PA([]),components:E.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Rt([[K.asSpec()],L.map(()=>Q.asSpec()).toArray()])}]),fieldBehaviours:ve([Ut.config({disabled:()=>!l.enabled||v.isDisabled(),onDisabled:W=>{rn.getField(W).each(Ut.disable),Q.getOpt(W).each(Ut.disable)},onEnabled:W=>{rn.getField(W).each(Ut.enable),Q.getOpt(W).each(Ut.enable)}}),cs(),go("url-input-events",[Me(G,W=>{_o.getCurrent(W).each(z=>{const Y=at.getValue(z),Z={fieldname:l.name,...Y};L.each(te=>{te(Z).get(ae=>{at.setValue(z,ae),Bt(W,fi,{name:l.name})})})})})])])})})(e,r,r.urlinput,a)),customeditor:ts(e=>{const r=Un(),a=dn({dom:{tag:e.tag}}),l=Un();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ve([go("custom-editor-events",[qn(m=>{a.getOpt(m).each(g=>{var h;(h=e,vo(h,"init")?e.init(g.element.dom):ik.load(e.scriptId,e.scriptUrl).then(h=>h(g.element.dom,e.settings))).then(h=>{l.on(v=>{h.setValue(v)}),l.clear(),r.set(h)})})})]),Qd(N.none(),()=>r.get().fold(()=>l.get().getOr(""),m=>m.getValue()),(m,g)=>{r.get().fold(()=>l.set(g),h=>h.setValue(g))}),Jd()]),components:[a.asSpec()]}}),htmlpanel:ts(e=>sa.sketch("presentation"===e.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:ve([er.config({}),$t.config({})])})),imagepreview:ts((e,r,a)=>((l,m)=>{const g=Ot(m.getOr({url:""})),h=dn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:m.map(k=>({src:k.url})).getOr({})}}),v=dn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[h.asSpec()]}),y={};l.height.each(k=>y.height=k);const _=m.map(k=>({url:k.url,zoom:N.from(k.zoom),cachedWidth:N.from(k.cachedWidth),cachedHeight:N.from(k.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:y,attributes:{role:"presentation"}},components:[v.asSpec()],behaviours:ve([Jd(),Qd(_,()=>g.get(),(k,E)=>{const A={url:E.url};E.zoom.each(L=>A.zoom=L),E.cachedWidth.each(L=>A.cachedWidth=L),E.cachedHeight.each(L=>A.cachedHeight=L),g.set(A);const B=()=>{const{cachedWidth:L,cachedHeight:G,zoom:K}=A;if(!sn(L)&&!sn(G)){if(sn(K)){const W=((z,Y,Z)=>{const te=ln(z),ae=gr(z);return Math.min(te/Y,ae/Z,1)})(k.element,L,G);A.zoom=W}const Q=((W,z,Y,Z,te)=>{const ae=Y*te,Ce=Z*te,De=Math.max(0,W/2-ae/2),Fe=Math.max(0,z/2-Ce/2);return{left:De.toString()+"px",top:Fe.toString()+"px",width:ae.toString()+"px",height:Ce.toString()+"px"}})(ln(k.element),gr(k.element),L,G,A.zoom);v.getOpt(k).each(W=>{$e(W.element,Q)})}};h.getOpt(k).each(L=>{const G=L.element;var K;E.url!==zn(G,"src")&&(ro(G,"src",E.url),sr(k.element,"tox-imagepreview__loaded")),B(),(K=G,new Promise((Q,W)=>{const z=()=>{Z(),Q(K)},Y=[$a(K,"load",z),$a(K,"error",()=>{Z(),W("Unable to load data from image: "+K.dom.src)})],Z=()=>yt(Y,te=>te.unbind());K.dom.complete&&z()})).then(Q=>{k.getSystem().isConnected()&&(Zo(k.element,"tox-imagepreview__loaded"),A.cachedWidth=Q.dom.naturalWidth,A.cachedHeight=Q.dom.naturalHeight,B())})})})])}})(e,a)),table:ts((e,r)=>((a,l)=>{const m=v=>({dom:{tag:"td",innerHtml:l.translate(v)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(h=a.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Je(h,v=>({dom:{tag:"th",innerHtml:l.translate(v)}}))}]}),(g=a.cells,{dom:{tag:"tbody"},components:Je(g,v=>({dom:{tag:"tr"},components:Je(v,m)}))})],behaviours:ve([er.config({}),$t.config({})])};var g,h})(e,r.shared.providers)),tree:ts((e,r)=>((a,l)=>{const m=a.onLeafAction.getOr(Qe),g=a.onToggleExpand.getOr(Qe),v=Ot(a.defaultExpandedIds),y=Ot(a.defaultSelectedId),_=bt("tree-id"),k=(E,A)=>a.items.map(B=>"leaf"===B.type?Ak({leaf:B,selectedId:E,onLeafAction:m,visible:!0,treeId:_,backstage:l}):Eg({directory:B,selectedId:E,onLeafAction:m,expandedIds:A,labelTabstopping:!0,treeId:_,backstage:l}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:k(y.get(),v.get()),behaviours:ve([pt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),go(EN,[Me("expand-tree-node",(E,A)=>{const{expanded:B,node:L}=A.event;v.set(B?[...v.get(),L]:v.get().filter(G=>G!==L)),g(v.get(),{expanded:B,node:L})})]),Ri.config({channels:{[`update-active-item-${_}`]:{onReceive:(E,A)=>{y.set(N.some(A.value)),so.set(E,k(N.some(A.value),v.get()))}}}}),so.config({})])}})(e,r)),panel:ts((e,r)=>{return{dom:{tag:"div",classes:(a=e).classes},components:Je(a.items,r.shared.interpreter)};var a})},TB={field:(e,r)=>r,record:ee([])},zk=(e,r,a,l)=>{const m=Dn(l,{shared:{interpreter:g=>Hk(e,g,a,m)}});return Hk(e,r,a,m)},Hk=(e,r,a,l)=>lt(PN,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),m=>m(e,r,a,l)),Vk=(e,r,a)=>Hk(TB,e,r,a),tu="layout-inset",fx=e=>e.x,Uk=(e,r)=>e.x+e.width/2-r.width/2,bx=(e,r)=>e.x+e.width-r.width,vx=e=>e.y,yx=(e,r)=>e.y+e.height-r.height,LN=(e,r)=>e.y+e.height/2-r.height/2,xx=(e,r,a)=>zs(bx(e,r),yx(e,r),a.insetSouthwest(),Lh(),"southwest",Hs(e,{right:0,bottom:3}),tu),wx=(e,r,a)=>zs(fx(e),yx(e,r),a.insetSoutheast(),pp(),"southeast",Hs(e,{left:1,bottom:3}),tu),Rb=(e,r,a)=>zs(bx(e,r),vx(e),a.insetNorthwest(),Oe(),"northwest",Hs(e,{right:0,top:2}),tu),Db=(e,r,a)=>zs(fx(e),vx(e),a.insetNortheast(),ed(),"northeast",Hs(e,{left:1,top:2}),tu),Il=(e,r,a)=>zs(Uk(e,r),vx(e),a.insetNorth(),Kl(),"north",Hs(e,{top:2}),tu),Og=(e,r,a)=>zs(Uk(e,r),yx(e,r),a.insetSouth(),Tw(),"south",Hs(e,{bottom:3}),tu),Bb=(e,r,a)=>zs(bx(e,r),LN(e,r),a.insetEast(),Aw(),"east",Hs(e,{right:0}),tu),jk=(e,r,a)=>zs(fx(e),LN(e,r),a.insetWest(),Ow(),"west",Hs(e,{left:1}),tu),OB=e=>{switch(e){case"north":return Il;case"northeast":return Db;case"northwest":return Rb;case"south":return Og;case"southeast":return wx;case"southwest":return xx;case"east":return Bb;case"west":return jk}},FN=(e,r,a,l,m)=>kE(l).map(OB).getOr(Il)(e,r,a,l,m),AB=e=>{switch(e){case"north":return Og;case"northeast":return wx;case"northwest":return xx;case"south":return Il;case"southeast":return Db;case"southwest":return Rb;case"east":return jk;case"west":return Bb}},$k=(e,r,a,l,m)=>kE(l).map(AB).getOr(Il)(e,r,a,l,m),hm={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},zN=(e,r,a)=>{const l={maxHeightFunction:Lm()};return()=>a()?{type:"node",root:ei(Ur(e())),node:N.from(e()),bubble:Tc(12,12,hm),layouts:{onRtl:()=>[Db],onLtr:()=>[Rb]},overrides:l}:{type:"hotspot",hotspot:r(),bubble:Tc(-12,12,hm),layouts:{onRtl:()=>[Vs,Us,vs],onLtr:()=>[Us,Vs,vs]},overrides:l}},HN=(e,r,a,l)=>{const m={maxHeightFunction:Lm()};return()=>l()?{type:"node",root:ei(Ur(r())),node:N.from(r()),bubble:Tc(12,12,hm),layouts:{onRtl:()=>[Il],onLtr:()=>[Il]},overrides:m}:e?{type:"node",root:ei(Ur(r())),node:N.from(r()),bubble:Tc(0,-Ra(r()),hm),layouts:{onRtl:()=>[ra],onLtr:()=>[ra]},overrides:m}:{type:"hotspot",hotspot:a(),bubble:Tc(0,0,hm),layouts:{onRtl:()=>[ra],onLtr:()=>[ra]},overrides:m}},Wk=(e,r,a)=>()=>a()?{type:"node",root:ei(Ur(e())),node:N.from(e()),layouts:{onRtl:()=>[Il],onLtr:()=>[Il]}}:{type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[vs],onLtr:()=>[vs]}},NB=(e,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const a=e.selection.getRng(),l=e.model.table.getSelectedCells();if(l.length>1){const g=l[l.length-1],h={firstCell:oe(l[0]),lastCell:oe(g)};return N.some(h)}return N.some(Hh.range(oe(a.startContainer),a.startOffset,oe(a.endContainer),a.endOffset))}}),VN=e=>r=>({type:"node",root:e(),node:r}),ch=(e,r,a,l)=>{const m=sg(e),g=()=>oe(e.getBody()),h=()=>oe(e.getContentAreaContainer()),v=()=>m||!l();return{inlineDialog:zN(h,r,v),inlineBottomDialog:HN(e.inline,h,a,v),banner:Wk(h,r,v),cursor:NB(e,g),node:VN(g)}},UN=e=>(r,a)=>{mA(e)(r,a)},RB=e=>()=>dS(e),DB=e=>r=>hg(e,r),qk=e=>r=>dA(e,r),jN=e=>()=>Nc(e),Gk=e=>zr(e,"items"),Mb=e=>zr(e,"format"),_x=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],$N=e=>qt(e,(r,a)=>{if(vo(a,"items")){const l=$N(a.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:a.title,items:l.formats}])}}if(vo(a,"inline")||vo(a,"block")||vo(a,"selector")){const l=`custom-${So(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:a}]),formats:r.formats.concat([{title:a.title,format:l,icon:a.icon}])}}return{...r,formats:r.formats.concat(a)}},{customFormats:[],formats:[]}),Kk=e=>Ay(e).map(r=>{const a=((l,m)=>{const g=$N(m),h=v=>{yt(v,y=>{l.formatter.has(y.name)||l.formatter.register(y.name,y.format)})};return l.formatter?h(g.customFormats):l.on("init",()=>{h(g.customFormats)}),g.formats})(e,r);return Ny(e)?_x.concat(a):a}).getOr(_x),Yk=(e,r,a)=>({...e,type:"formatter",isSelected:r(e.format),getStylePreview:a(e.format)}),Cx=(e,r,a,l)=>{const m=g=>Je(g,h=>Gk(h)?(v=>{const y=m(v.items);return{...v,type:"submenu",getStyleItems:ee(y)}})(h):Mb(h)?Yk(h,a,l):(v=>{const y=Rn(v);return 1===y.length&&wo(y,"title")})(h)?{...h,type:"separator"}:(v=>{const y=So(v.name)?v.name:bt(v.title),_=`custom-${y}`,k={...v,type:"formatter",format:_,isSelected:a(_),getStylePreview:l(_)};return e.formatter.register(y,k),k})(h));return m(r)},BB=oc.trim,Xk=e=>r=>{return!(!vt(a=r)||1!==a.nodeType||r.contentEditable!==e&&r.getAttribute("data-mce-contenteditable")!==e);var a},WN=Xk("true"),qN=Xk("false"),Jk=(e,r,a,l,m)=>({type:e,title:r,url:a,level:l,attach:m}),Sx=e=>e.innerText||e.textContent,Qk=e=>{return(r=e)&&"A"===r.nodeName&&void 0!==(r.id||r.name)&&KN(e);var r},GN=e=>e&&/^(H[1-6])$/.test(e.nodeName),KN=e=>(r=>{let a=r;for(;a=a.parentNode;){const l=a.contentEditable;if(l&&"inherit"!==l)return WN(a)}return!1})(e)&&!qN(e),MB=e=>GN(e)&&KN(e),IB=e=>{var r;const a=(l=e).id?l.id:bt("h");var l;return Jk("header",null!==(r=Sx(e))&&void 0!==r?r:"","#"+a,(l=>GN(l)?parseInt(l.nodeName.substr(1),10):0)(e),()=>{e.id=a})},YN=e=>{const r=e.id||e.name,a=Sx(e);return Jk("anchor",a||"#"+r,"#"+r,0,Qe)},kx=e=>BB(e.title).length>0,Zk=e=>{const r=Je(Wa(oe(e),"h1,h2,h3,h4,h5,h6,a:not([href])"),m=>m.dom);return st((a=r,Je(st(a,MB),IB)).concat((a=>Je(st(a,Qk),YN))(r)),kx);var a},Ib="tinymce-url-history",ou=e=>So(e)&&/^https?/.test(e),e1=e=>ms(e)&&Fr(e,r=>{return!(On(a=r)&&a.length<=5&&Qs(a,ou));var a}).isNone(),t1=()=>{const e=nm.getItem(Ib);if(null===e)return{};let r;try{r=JSON.parse(e)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Ib+" was not valid JSON",a),{};throw a}return e1(r)?r:(console.log("Local storage "+Ib+" was not valid format",r),{})},o1=e=>{const r=t1();return lt(r,e).getOr([])},PB=(e,r)=>{if(!ou(e))return;const a=t1(),l=lt(a,r).getOr([]),m=st(l,g=>g!==e);a[r]=[e].concat(m).slice(0,5),(g=>{if(!e1(g))throw new Error("Bad format for history:\n"+JSON.stringify(g));nm.setItem(Ib,JSON.stringify(g))})(a)},n1=e=>!!e,XN=e=>pn(oc.makeMap(e,/[, ]/),n1),Ex=e=>N.from(gC(e)),r1=e=>N.from(e).filter(So).getOrUndefined(),ds=v_,yd=h_,QN=ee([fe("shell",!1),_e("makeItem"),fe("setupItem",Qe),Um("listBehaviours",[so])]),LB=mi({name:"items",overrides:()=>({behaviours:ve([so.config({})])})}),FB=ee([LB]),ZN=$s({name:ee("CustomList")(),configFields:QN(),partFields:FB(),factory:(e,r,a,l)=>{const m=e.shell?{behaviours:[so.config({})],components:[]}:{behaviours:[],components:r};return{uid:e.uid,dom:e.dom,components:m.components,behaviours:ar(e.listBehaviours,m.behaviours),apis:{setItems:(g,h)=>{var v;(v=g,e.shell?N.some(v):fn(v,e,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},y=>{const _=so.contents(y),k=h.length,E=k-_.length,A=E>0?H(E,()=>e.makeItem()):[],B=_.slice(k);yt(B,G=>so.remove(y,G)),yt(A,G=>so.append(y,G));const L=so.contents(y);yt(L,(G,K)=>{e.setupItem(g,G,h[K],K)})})}}}},apis:{setItems:(e,r,a)=>{e.setItems(r,a)}}}),Ag=ee([_e("dom"),fe("shell",!0),ys("toolbarBehaviours",[so])]),zB=ee([mi({name:"groups",overrides:()=>({behaviours:ve([so.config({})])})})]),nc=$s({name:"Toolbar",configFields:Ag(),partFields:zB(),factory:(e,r,a,l)=>{const m=e.shell?{behaviours:[so.config({})],components:[]}:{behaviours:[],components:r};return{uid:e.uid,dom:e.dom,components:m.components,behaviours:ar(e.toolbarBehaviours,m.behaviours),apis:{setGroups:(g,h)=>{var v;(v=g,e.shell?N.some(v):fn(v,e,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},y=>{so.set(y,h)})},refresh:Qe},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)}}}),eR=Qe,tR=Ve,oR=ee([]);var Ng,HB=Object.freeze({__proto__:null,setup:eR,isDocked:tR,getBehaviours:oR});const s1=e=>(Nr(Jn(e,"position"),"fixed")?N.none():lc(e)).orThunk(()=>{const r=Ls("span");return Zs(e).bind(a=>{Os(a,r);const l=lc(r);return Oi(r),l})}),nR=e=>s1(e).map(ca).getOrThunk(()=>Go(0,0)),VB=(e,r)=>{const a=e.element;Zo(a,r.transitionClass),sr(a,r.fadeOutClass),Zo(a,r.fadeInClass),r.onShow(e)},a1=(e,r)=>{const a=e.element;Zo(a,r.transitionClass),sr(a,r.fadeInClass),Zo(a,r.fadeOutClass),r.onHide(e)},i1=(e,r)=>e.y>=r.y,l1=(e,r)=>e.bottom<=r.bottom,Tx=(e,r,a)=>({location:"top",leftX:r,topY:a.bounds.y-e.y}),c1=(e,r,a)=>({location:"bottom",leftX:r,bottomY:e.bottom-a.bounds.bottom}),Ox=e=>e.box.x-e.win.x,d1=(e,r,a)=>a.getInitialPos().map(l=>{const m=((g,h)=>{const v=h.optScrollEnv.fold(ee(g.bounds.y),y=>y.scrollElmTop+(g.bounds.y-y.currentScrollTop));return Go(g.bounds.x,v)})(l,r);return{box:Hn(m.left,m.top,ln(e),gr(e)),location:l.location}}),rR=(e,r,a,l,m)=>{const g=((v,y)=>{const _=y.optScrollEnv.fold(ee(v.y),k=>v.y+k.currentScrollTop-k.scrollElmTop);return Go(v.x,_)})(r,a),h=Hn(g.left,g.top,r.width,r.height);l.setInitialPos({style:wm(e),position:Zr(e,"position")||"static",bounds:h,location:m.location})},Pb=(e,r,a)=>a.getInitialPos().bind(l=>{var m;switch(a.clearInitialPos(),l.position){case"static":return N.some({morph:"static"});case"absolute":const g=s1(e).getOr(va()),h=hr(g),v=null!==(m=g.dom.scrollTop)&&void 0!==m?m:0;return N.some({morph:"absolute",positionCss:Yl("absolute",lt(l.style,"left").map(y=>r.x-h.x),lt(l.style,"top").map(y=>r.y-h.y+v),lt(l.style,"right").map(y=>h.right-r.right),lt(l.style,"bottom").map(y=>h.bottom-r.bottom))});default:return N.none()}}),Ax=e=>{switch(e.location){case"top":return N.some({morph:"fixed",positionCss:Yl("fixed",N.some(e.leftX),N.some(e.topY),N.none(),N.none())});case"bottom":return N.some({morph:"fixed",positionCss:Yl("fixed",N.some(e.leftX),N.none(),N.none(),N.some(e.bottomY))});default:return N.none()}},u1=(e,r,a)=>{a.setDocked(!1),yt(["left","right","top","bottom","position"],l=>mn(e.element,l)),r.onUndocked(e)},Nx=(e,r,a,l)=>{const m="fixed"===l.position;a.setDocked(m),_E(e.element,l),(m?r.onDocked:r.onUndocked)(e)},m1=(e,r,a,l,m=!1)=>{r.contextual.each(g=>{g.lazyContext(e).each(h=>{const v=(y=h).y<(_=l.bounds).bottom&&y.bottom>_.y;var y,_;v!==a.isVisible()&&(a.setVisible(v),m&&!v?(Va(e.element,[g.fadeOutClass]),g.onHide(e)):(v?VB:a1)(e,g))})})},dh=(e,r,a,l,m)=>{m1(e,r,a,l,!0),Nx(e,r,a,m.positionCss)},Rx=(e,r,a)=>{e.getSystem().isConnected()&&((l,m,g)=>{const h=m.lazyViewport(l);m1(l,m,g,h),((e,r,a)=>{const l=e.element;return Nr(Jn(l,"position"),"fixed")?(v=m=l,y=g=r,_=h=a,d1(v,y,_).filter(({box:k})=>{return E=_.getModes(),A=k,B=y,Qs(E,L=>{switch(L){case"bottom":return l1(A,B.bounds);case"top":return i1(A,B.bounds)}});var E,A,B}).bind(({box:k})=>Pb(v,k,_))).orThunk(()=>g.optScrollEnv.bind(v=>d1(m,g,h)).bind(({box:v,location:y})=>{const _=Sr(),k=Ox({win:_,box:v}),E="top"===y?Tx(_,k,g):c1(_,k,g);return Ax(E)})):((m,g,h)=>{const v=hr(m),y=Sr(),_=((k,E,A)=>{const B=E.win,L=E.box,G=Ox(E);return Ps(k,K=>{switch(K){case"bottom":return l1(L,A.bounds)?N.none():N.some(c1(B,G,A));case"top":return i1(L,A.bounds)?N.none():N.some(Tx(B,G,A));default:return N.none()}}).getOr({location:"no-dock"})})(h.getModes(),{win:y,box:v},g);return"top"===_.location||"bottom"===_.location?(rR(m,v,g,h,_),Ax(_)):N.none()})(l,r,a);var m,g,h,v,y,_})(l,h,g).each(v=>{((y,_,k,E,A)=>{switch(A.morph){case"static":return u1(y,_,k);case"absolute":return Nx(y,_,k,A.positionCss);case"fixed":dh(y,_,k,E,A)}})(l,m,g,h,v)})})(e,r,a)},g1=(e,r,a)=>{a.isDocked()&&((l,m,g)=>{const h=l.element;g.setDocked(!1);const v=m.lazyViewport(l);((y,_,k)=>{const E=y.element;return d1(E,_,k).bind(({box:A})=>Pb(E,A,k))})(l,v,g).each(y=>{switch(y.morph){case"static":u1(l,m,g);break;case"absolute":Nx(l,m,g,y.positionCss)}}),g.setVisible(!0),m.contextual.each(y=>{Tr(h,[y.fadeInClass,y.fadeOutClass,y.transitionClass]),y.onShow(l)}),Rx(l,m,g)})(e,r,a)},p1=e=>(r,a,l)=>{const m=a.lazyViewport(r);((g,h,v,y)=>{const _=hr(g),k=Sr(),E=y(k,Ox({win:k,box:_}),h);return"bottom"===E.location||"top"===E.location?(A=g,B=_,L=h,K=E,(G=v).getInitialPos().fold(()=>rR(A,B,L,G,K),()=>Qe),Ax(E)):N.none();var A,B,L,G,K})(r.element,m,l,e).each(g=>{dh(r,a,l,m,g)})},UB=p1(Tx),Lb=p1(c1);var aR=Object.freeze({__proto__:null,refresh:Rx,reset:g1,isDocked:(e,r,a)=>a.isDocked(),getModes:(e,r,a)=>a.getModes(),setModes:(e,r,a,l)=>a.setModes(l),forceDockToTop:UB,forceDockToBottom:Lb}),jB=Object.freeze({__proto__:null,events:(e,r)=>Cn([Ou(ep(),(a,l)=>{e.contextual.each(m=>{Ha(a.element,m.transitionClass)&&(Tr(a.element,[m.transitionClass,m.fadeInClass]),(r.isVisible()?m.onShown:m.onHidden)(a)),l.stop()})}),Me(cv(),(a,l)=>{Rx(a,e,r)}),Me(dv(),(a,l)=>{Rx(a,e,r)}),Me(kh(),(a,l)=>{g1(a,e,r)})])}),$B=[cn("contextual",[Ft("fadeInClass"),Ft("fadeOutClass"),Ft("transitionClass"),on("lazyContext"),Uo("onShow"),Uo("onShown"),Uo("onHide"),Uo("onHidden")]),Qn("lazyViewport",()=>({bounds:Sr(),optScrollEnv:N.none()})),Td("modes",["top","bottom"],ge),Uo("onDocked"),Uo("onUndocked")];const yr=Ns({fields:$B,name:"docking",active:jB,apis:aR,state:Object.freeze({__proto__:null,init:e=>{const r=Ot(!1),a=Ot(!0),l=Un(),m=Ot(e.modes);return za({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:m.get,setModes:m.set,readState:()=>`docked:  ${r.get()}, visible: ${a.get()}, modes: ${m.get().join(",")}`})}})}),Fb=ee(bt("toolbar-height-change")),Pc={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},h1="tox-tinymce--toolbar-sticky-on",Rg="tox-tinymce--toolbar-sticky-off",Dg=(e,r)=>wo(yr.getModes(e),r),zb=e=>{const r=e.element;Za(r).each(a=>{const l="padding-"+yr.getModes(e)[0];if(yr.isDocked(e)){const m=ln(a);lo(r,"width",m+"px"),lo(a,l,Ra(g=r)+(parseInt(Zr(g,"margin-top"),10)||0)+(parseInt(Zr(g,"margin-bottom"),10)||0)+"px")}else mn(r,"width"),mn(a,l);var g})},f1=(e,r)=>{r?(sr(e,Pc.fadeOutClass),Va(e,[Pc.transitionClass,Pc.fadeInClass])):(sr(e,Pc.fadeInClass),Va(e,[Pc.fadeOutClass,Pc.transitionClass]))},b1=(e,r)=>{const a=oe(e.getContainer());r?(Zo(a,h1),sr(a,Rg)):(Zo(a,Rg),sr(a,h1))},v1=(e,r)=>{const a=Un(),l=r.getSink,m=v=>{l().each(y=>v(y.element))},g=v=>{e.inline||zb(v),b1(e,yr.isDocked(v)),v.getSystem().broadcastOn([vp()],{}),l().each(y=>y.getSystem().broadcastOn([vp()],{}))},h=e.inline?[]:[Ri.config({channels:{[Fb()]:{onReceive:zb}}})];return[$t.config({}),yr.config({contextual:{lazyContext:v=>{const y=Ra(v.element),_=e.inline?e.getContentAreaContainer():e.getContainer();return N.from(_).map(k=>{const E=hr(oe(k));return sm(e,v.element).fold(()=>{const A=E.height-y,B=E.y+(Dg(v,"top")?0:y);return Hn(E.x,B,E.width,A)},A=>{const B=$i(E,am(A)),L=Dg(v,"top")?B.y:B.y+y;return Hn(B.x,L,B.width,B.height-y)})})},onShow:()=>{m(v=>f1(v,!0))},onShown:v=>{m(y=>Tr(y,[Pc.transitionClass,Pc.fadeInClass])),a.get().each(y=>{((_,k)=>{const E=Qr(k);Ji(E).filter(A=>!Jo(k,A)).filter(A=>Jo(A,oe(E.dom.body))||ks(_,A)).each(()=>wl(k))})(v.element,y),a.clear()})},onHide:v=>{var y,_;(y=v.element,_=l,Ec(y).orThunk(()=>_().toOptional().bind(k=>Ec(k.element)))).fold(a.clear,a.set),m(y=>f1(y,!1))},onHidden:()=>{m(v=>Tr(v,[Pc.transitionClass]))},...Pc},lazyViewport:v=>sm(e,v.element).fold(()=>{const y=Sr(),_=kO(e),k=y.y+(Dg(v,"top")?_:0),E=y.height-(Dg(v,"bottom")?_:0);return{bounds:Hn(y.x,k,y.width,E),optScrollEnv:N.none()}},y=>({bounds:am(y),optScrollEnv:N.some({currentScrollTop:y.element.dom.scrollTop,scrollElmTop:ca(y.element).top})})),modes:[r.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var iR=Object.freeze({__proto__:null,setup:(e,r,a)=>{e.inline||(r.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{a().each(yr.reset)}),e.on("ResizeWindow ResizeEditor",()=>{a().each(zb)}),e.on("SkinLoaded",()=>{a().each(l=>{yr.isDocked(l)?yr.reset(l):yr.refresh(l)})}),e.on("FullscreenStateChanged",()=>{a().each(yr.reset)})),e.on("AfterScrollIntoView",l=>{a().each(m=>{yr.refresh(m);const g=m.element;qu(g)&&((h,v)=>{const y=Qr(v),_=Hi(v).dom.innerHeight,k=$r(y),E=oe(h.elm),A=Ul(E),B=gr(E),L=A.y,G=L+B,K=ca(v),Q=gr(v),W=K.top,z=W+Q,Y=Math.abs(W-k.top)<2,Z=Math.abs(z-(k.top+_))<2;Y&&L<z?hl(k.left,L-Q,y):Z&&G>W&&hl(k.left,L-_+B+Q,y)})(l,g)})}),e.on("PostRender",()=>{b1(e,!1)})},isDocked:e=>e().map(yr.isDocked).getOr(!1),getBehaviours:v1});const Dx=je([Br,Bo("items",St([U([VC,rr("items",ge)]),ge]))].concat(Up)),lR=[fr("text"),fr("tooltip"),fr("icon"),Dr("search",!1,St([he,je([fr("placeholder")])],e=>Js(e)?e?N.some({placeholder:N.none()}):N.none():N.some(e))),on("fetch"),Qn("onSetup",()=>Qe)],y1=je([Br,...lR]),Bx=e=>Xt("menubutton",y1,e),cR=je([Br,Zy,_s,tm,Wf,jC,cd,qi("presets","normal",["normal","color","listpreview"]),Gf(1),Vp,$f]);var x1=gi({factory:(e,r)=>{const a={focus:pt.focusIn,setMenus:(l,m)=>{const g=Je(m,h=>{const y=Bx({type:"menubutton",text:h.text,fetch:_=>{_(h.getItems())}}).mapError(_=>yo(_)).getOrDie();return pm(y,"tox-mbtn",r.backstage,N.some("menuitem"))});so.set(l,g)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:ve([so.config({}),go("menubar-events",[qn(l=>{e.onSetup(l)}),Me(yl(),(l,m)=>{Gn(l.element,".tox-mbtn--active").each(g=>{Gl(m.event.target,".tox-mbtn").each(h=>{Jo(g,h)||l.getSystem().getByDom(g).each(v=>{l.getSystem().getByDom(h).each(y=>{nl.expand(y),nl.close(v),$t.focus(y)})})})})}),Me(rp(),(l,m)=>{m.event.prevFocus.bind(g=>l.getSystem().getByDom(g).toOptional()).each(g=>{m.event.newFocus.bind(h=>l.getSystem().getByDom(h).toOptional()).each(h=>{nl.isOpen(g)&&(nl.expand(h),nl.close(g))})})})]),pt.config({mode:"flow",selector:".tox-mbtn",onEscape:l=>(e.onEscape(l),N.some(!0))}),er.config({})]),apis:a,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[_e("dom"),_e("uid"),_e("onEscape"),_e("backstage"),fe("onSetup",Qe)],apis:{focus:(e,r)=>{e.focus(r)},setMenus:(e,r,a)=>{e.setMenus(r,a)}}});const Hb="container",dR=[ys("slotBehaviours",[])],w1=e=>"<alloy.field."+e+">",uR=(e,r)=>{const a=k=>qv(e),l=(k,E)=>(A,B)=>fn(A,e,B).map(L=>k(L,B)).getOr(E),m=(k,E)=>"true"!==zn(k.element,"aria-hidden"),g=l(m,!1),h=l((k,E)=>{if(m(k)){const A=k.element;lo(A,"display","none"),ro(A,"aria-hidden","true"),Bt(k,Eh(),{name:E,visible:!1})}}),v=(k=h,(E,A)=>{yt(A,B=>k(E,B))}),y=l((k,E)=>{if(!m(k)){const A=k.element;mn(A,"display"),Ht(A,"aria-hidden"),Bt(k,Eh(),{name:E,visible:!0})}}),_={getSlotNames:a,getSlot:(k,E)=>fn(k,e,E),isShowing:g,hideSlot:h,hideAllSlots:k=>v(k,a()),showSlot:y};var k;return{uid:e.uid,dom:e.dom,components:r,behaviours:Yh(e.slotBehaviours),apis:_}},WB=pn({getSlotNames:(e,r)=>e.getSlotNames(r),getSlot:(e,r,a)=>e.getSlot(r,a),isShowing:(e,r,a)=>e.isShowing(r,a),hideSlot:(e,r,a)=>e.hideSlot(r,a),hideAllSlots:(e,r)=>e.hideAllSlots(r),showSlot:(e,r,a)=>e.showSlot(r,a)},e=>bv(e)),aa={...WB,sketch:e=>{const r=(()=>{const g=[];return{slot:(h,v)=>(g.push(h),qm(Hb,w1(h),v)),record:ee(g)}})(),a=e(r),l=r.record(),m=Je(l,g=>ga({name:g,pname:w1(g)}));return of(Hb,dR,m,uR,a)}},qB=je([_s,Zy,Qn("onShow",Qe),Qn("onHide",Qe),cd]),_1=e=>({element:()=>e.element.dom}),GB=(e,r)=>{const a=Je(Rn(r),l=>{const g=bo(Xt("sidebar",qB,r[l]));return{name:l,getApi:_1,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Je(a,l=>{const m=Ot(Qe);return e.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Yf([qd(l,m),om(l,m),Me(Eh(),(g,h)=>{const v=h.event;Ee(a,_=>_.name===v.name).each(_=>{(v.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},C1=e=>aa.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:GB(r,e),slotBehaviours:Yf([qn(a=>aa.hideAllSlots(a))])})),Vb=(e,r)=>{ro(e,"role",r)},mR=e=>_o.getCurrent(e).bind(r=>yi.isGrowing(r)||yi.hasGrown(r)?_o.getCurrent(r).bind(a=>Ee(aa.getSlotNames(a),l=>aa.isShowing(a,l))):N.none()),Ub=bt("FixSizeEvent"),Mx=bt("AutoSizeEvent");var S1=Object.freeze({__proto__:null,block:(e,r,a,l)=>{ro(e.element,"aria-busy",!0);const m=r.getRoot(e).getOr(e),g=ve([pt.config({mode:"special",onTab:()=>N.some(!0),onShiftTab:()=>N.some(!0)}),$t.config({})]),h=l(m,g),v=m.getSystem().build(h);so.append(m,Yi(v)),v.hasConfigured(pt)&&r.focus&&pt.focusIn(v),a.isBlocked()||r.onBlock(e),a.blockWith(()=>so.remove(m,v))},unblock:(e,r,a)=>{Ht(e.element,"aria-busy"),a.isBlocked()&&r.onUnblock(e),a.clear()},isBlocked:(e,r,a)=>a.isBlocked()}),gR=[Qn("getRoot",N.none),is("focus",!0),Uo("onBlock"),Uo("onUnblock")];const Lc=Ns({fields:gR,name:"blocking",apis:S1,state:Object.freeze({__proto__:null,init:()=>{const e=Tv(r=>r.destroy());return za({readState:e.isSet,blockWith:r=>{e.set({destroy:r})},clear:e.clear,isBlocked:e.isSet})}})}),Ix=e=>_o.getCurrent(e).each(r=>wl(r.element,!0)),Px=(e,r,a)=>({within:e,extra:r,withinWidth:a}),k1=(e,r,a)=>{const l=qt(e,(h,v)=>((y,_)=>{const k=a(y);return N.some({element:y,start:_,finish:_+k,width:k})})(v,h.len).fold(ee(h),y=>({len:y.finish,list:h.list.concat([y])})),{len:0,list:[]}).list,m=st(l,h=>h.finish<=r),g=Wo(m,(h,v)=>h+v.width,0);return{within:m,extra:l.slice(m.length),withinWidth:g}},Lx=e=>Je(e,r=>r.element),fm=(e,r)=>{const a=Je(r,l=>Yi(l));nc.setGroups(e,a)},E1=(e,r,a)=>{const l=r.builtGroups.get();if(0===l.length)return;const m=rd(e,r,"primary"),g=vr.getCoupled(e,"overflowGroup");lo(m.element,"visibility","hidden");const h=l.concat([g]),v=Ps(h,_=>Ec(_.element).bind(k=>_.getSystem().getByDom(k).toOptional()));a([]),fm(m,h);const y=((_,k,E,A)=>{const B=((Q,W,z)=>{const Y=k1(W,Q,z);return 0===Y.extra.length?N.some(Y):N.none()})(_,k,E).getOrThunk(()=>k1(k,_-E(A),E)),L=B.within,G=B.extra,K=B.withinWidth;return 1===G.length&&G[0].width<=E(A)?((Q,W,z)=>{const Y=Lx(Q.concat(W));return Px(Y,[],z)})(L,G,K):G.length>=1?((Q,W,z,Y)=>{const Z=Lx(Q).concat([z]);return Px(Z,Lx(W),Y)})(L,G,A,K):(z=K,Px(Lx(L),[],z));var z})(ln(m.element),r.builtGroups.get(),_=>ln(_.element),g);0===y.extra.length?(so.remove(m,g),a([])):(fm(m,y.within),a(y.extra)),mn(m.element,"visibility"),jc(m.element),v.each($t.focus)},T1=ee([ys("splitToolbarBehaviours",[vr]),Oo("builtGroups",()=>Ot([]))]),KB=ee([Pm(["overflowToggledClass"]),Vn("getOverflowBounds"),_e("lazySink"),Oo("overflowGroups",()=>Ot([])),Uo("onOpened"),Uo("onClosed")].concat(T1())),hR=ee([ga({factory:nc,schema:Ag(),name:"primary"}),ls({schema:Ag(),name:"overflow"}),ls({name:"overflow-button"}),ls({name:"overflow-group"})]),Fx=ee((e,r)=>{((a,l)=>{const m=uc.max(a,l,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);lo(a,"max-width",m+"px")})(e,Math.floor(r))}),YB=ee([Pm(["toggledClass"]),_e("lazySink"),on("fetch"),Vn("getBounds"),cn("fireDismissalEventInstead",[fe("event",Dd())]),td(),Uo("onToggled")]),jb=ee([ls({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ve([Co.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),ls({factory:nc,schema:Ag(),name:"toolbar",overrides:e=>({toolbarBehaviours:ve([pt.config({mode:"cyclic",onEscape:r=>(fn(r,e,"button").each($t.focus),N.none())})])})})]),zx=Un(),$b=(e,r)=>{const a=vr.getCoupled(e,"toolbarSandbox");jo.isOpen(a)?jo.close(a):jo.open(a,r.toolbar())},O1=(e,r,a,l)=>{const m=a.getBounds.map(h=>h()),g=a.lazySink(e).getOrDie();ma.positionWithinBounds(g,r,{anchor:{type:"hotspot",hotspot:e,layouts:l,overrides:{maxWidthFunction:Fx()}}},m)},fR=(e,r,a,l,m)=>{nc.setGroups(r,m),O1(e,r,a,l),Co.on(e)},bm=$s({name:"FloatingToolbarButton",factory:(e,r,a,l)=>({...Bs.sketch({...l.button(),action:m=>{$b(m,l)},buttonBehaviours:jm({dump:l.button().buttonBehaviours},[vr.config({others:{toolbarSandbox:m=>((g,h,v)=>{const y=mp();return{dom:{tag:"div",attributes:{id:y.id}},behaviours:ve([pt.config({mode:"special",onEscape:_=>(jo.close(_),N.some(!0))}),jo.config({onOpen:(_,k)=>{const E=zx.get().getOr(!1);v.fetch().get(A=>{fR(g,k,v,h.layouts,A),y.link(g.element),E||pt.focusIn(k)})},onClose:()=>{Co.off(g),zx.get().getOr(!1)||$t.focus(g),y.unlink(g.element)},isPartOf:(_,k,E)=>Sc(k,E)||Sc(g,E),getAttachPoint:()=>v.lazySink(g).getOrDie()}),Ri.config({channels:{...Hm({isExtraPart:Ve,...v.fireDismissalEventInstead.map(_=>({fireEventInstead:{event:_.event}})).getOr({})}),...zv({doReposition:()=>{jo.getState(vr.getCoupled(g,"toolbarSandbox")).each(_=>{O1(g,_,v,h.layouts)})}})}})])}})(m,a,e)}})])}),apis:{setGroups:(m,g)=>{jo.getState(vr.getCoupled(m,"toolbarSandbox")).each(h=>{fR(m,h,e,a.layouts,g)})},reposition:m=>{jo.getState(vr.getCoupled(m,"toolbarSandbox")).each(g=>{O1(m,g,e,a.layouts)})},toggle:m=>{$b(m,l)},toggleWithoutFocusing:m=>{var g,h;g=m,h=l,zx.set(!0),$b(g,h),zx.clear()},getToolbar:m=>jo.getState(vr.getCoupled(m,"toolbarSandbox")),isOpen:m=>jo.isOpen(vr.getCoupled(m,"toolbarSandbox"))}}),configFields:YB(),partFields:jb(),apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},reposition:(e,r)=>{e.reposition(r)},toggle:(e,r)=>{e.toggle(r)},toggleWithoutFocusing:(e,r)=>{e.toggleWithoutFocusing(r)},getToolbar:(e,r)=>e.getToolbar(r),isOpen:(e,r)=>e.isOpen(r)}}),XB=ee([_e("items"),Pm(["itemSelector"]),ys("tgroupBehaviours",[pt])]),JB=ee([Qh({name:"items",unit:"item"})]),Bg=$s({name:"ToolbarGroup",configFields:XB(),partFields:JB(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,behaviours:ar(e.tgroupBehaviours,[pt.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),bR=e=>Je(e,r=>Yi(r)),vR=(e,r,a)=>{E1(e,a,l=>{a.overflowGroups.set(l),r.getOpt(e).each(m=>{bm.setGroups(m,bR(l))})})},A1=$s({name:"SplitFloatingToolbar",configFields:KB(),partFields:hR(),factory:(e,r,a,l)=>{const m=dn(bm.sketch({fetch:()=>md(g=>{g(bR(e.overflowGroups.get()))}),layouts:{onLtr:()=>[Us,Vs],onRtl:()=>[Vs,Us],onBottomLtr:()=>[ja,Ua],onBottomRtl:()=>[Ua,ja]},getBounds:a.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>e[h?"onOpened":"onClosed"](g)}));return{uid:e.uid,dom:e.dom,components:r,behaviours:ar(e.splitToolbarBehaviours,[vr.config({others:{overflowGroup:()=>Bg.sketch({...l["overflow-group"](),items:[m.asSpec()]})}})]),apis:{setGroups:(g,h)=>{e.builtGroups.set(Je(h,g.getSystem().build)),vR(g,m,e)},refresh:g=>vR(g,m,e),toggle:g=>{m.getOpt(g).each(h=>{bm.toggle(h)})},toggleWithoutFocusing:g=>{m.getOpt(g).each(bm.toggleWithoutFocusing)},isOpen:g=>m.getOpt(g).map(bm.isOpen).getOr(!1),reposition:g=>{m.getOpt(g).each(h=>{bm.reposition(h)})},getOverflow:g=>m.getOpt(g).bind(bm.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},refresh:(e,r)=>{e.refresh(r)},reposition:(e,r)=>{e.reposition(r)},toggle:(e,r)=>{e.toggle(r)},toggleWithoutFocusing:(e,r)=>{e.toggle(r)},isOpen:(e,r)=>e.isOpen(r),getOverflow:(e,r)=>e.getOverflow(r)}}),QB=ee([Pm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Uo("onOpened"),Uo("onClosed")].concat(T1())),ZB=ee([ga({factory:nc,schema:Ag(),name:"primary"}),ga({factory:nc,schema:Ag(),name:"overflow",overrides:e=>({toolbarBehaviours:ve([yi.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:r=>{fn(r,e,"overflow-button").each(a=>{Co.off(a),$t.focus(a)}),e.onClosed(r)},onGrown:r=>{pt.focusIn(r),e.onOpened(r)},onStartGrow:r=>{fn(r,e,"overflow-button").each(Co.on)}}),pt.config({mode:"acyclic",onEscape:r=>(fn(r,e,"overflow-button").each($t.focus),N.some(!0))})])})}),ls({name:"overflow-button",overrides:e=>({buttonBehaviours:ve([Co.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),ls({name:"overflow-group"})]),yR=(e,r)=>{fn(e,r,"overflow-button").bind(()=>fn(e,r,"overflow")).each(a=>{Wb(e,r),yi.toggleGrow(a)})},Wb=(e,r)=>{fn(e,r,"overflow").each(a=>{E1(e,r,l=>{const m=Je(l,g=>Yi(g));nc.setGroups(a,m)}),fn(e,r,"overflow-button").each(l=>{yi.hasGrown(a)&&Co.on(l)}),yi.refresh(a)})},Hx=$s({name:"SplitSlidingToolbar",configFields:QB(),partFields:ZB(),factory:(e,r,a,l)=>{const m="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:r,behaviours:ar(e.splitToolbarBehaviours,[vr.config({others:{overflowGroup:g=>Bg.sketch({...l["overflow-group"](),items:[Bs.sketch({...l["overflow-button"](),action:h=>{nn(g,m)}})]})}}),go("toolbar-toggle-events",[Me(m,g=>{yR(g,e)})])]),apis:{setGroups:(g,h)=>{((v,y)=>{const _=Je(y,v.getSystem().build);e.builtGroups.set(_)})(g,h),Wb(g,e)},refresh:g=>Wb(g,e),toggle:g=>yR(g,e),isOpen:g=>fn(g,e,"overflow").map(yi.hasGrown).getOr(!1)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},refresh:(e,r)=>{e.refresh(r)},toggle:(e,r)=>{e.toggle(r)},isOpen:(e,r)=>e.isOpen(r)}}),xR=e=>({dom:{tag:"div",classes:["tox-toolbar__group"],...e.title.fold(()=>({}),a=>({attributes:{title:a}}))},components:[Bg.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:ve([er.config({}),$t.config({})])}),qb=e=>Bg.sketch(xR(e)),wR=(e,r)=>{const a=qn(l=>{const m=Je(e.initGroups,qb);nc.setGroups(l,m)});return ve([i0(e.providers.isDisabled),cs(),pt.config({mode:r,onEscape:e.onEscape,selector:".tox-toolbar__group"}),go("toolbar-events",[a])])},_R=e=>{const r=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":xR({title:N.none(),items:[]}),"overflow-button":RN({name:"more",icon:N.some("more-drawer"),enabled:!0,tooltip:N.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:N.none(),borderless:!1},N.none(),e.providers)},splitToolbarBehaviours:wR(e,r)}},CR=e=>{const r=_R(e),a=A1.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return A1.sketch({...r,lazySink:e.getSink,getOverflowBounds:()=>{const l=e.moreDrawerData.lazyHeader().element,m=Ul(l),g=Qa(l),h=Ul(g),v=Math.max(g.dom.scrollHeight,h.height);return Hn(m.x+4,h.y,m.width-8,v)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[a],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:l=>e.onToggled(l,!0),onClosed:l=>e.onToggled(l,!1)})},SR=e=>{const r=Hx.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=Hx.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=_R(e);return Hx.sketch({...l,components:[r,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:m=>{m.getSystem().broadcastOn([Fb()],{type:"opened"}),e.onToggled(m,!0)},onClosed:m=>{m.getSystem().broadcastOn([Fb()],{type:"closed"}),e.onToggled(m,!1)}})},nu=e=>{const r=e.cyclicKeying?"cyclic":"acyclic";return nc.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===tl.scrolling?["tox-toolbar--scrolling"]:[])},components:[nc.parts.groups({})],toolbarBehaviours:wR(e,r)})},Vx=[tm,_s,fr("tooltip"),qi("buttonType","secondary",["primary","secondary"]),is("borderless",!1),on("onAction")],Gb={button:[...Vx,ws,hn("type",["button"])],togglebutton:[...Vx,is("active",!1),hn("type",["togglebutton"])]},Mg=[hn("type",["group"]),Td("buttons",[],xo("type",Gb))],kR=xo("type",{...Gb,group:Mg}),eM=je([Td("buttons",[],kR),on("onShow"),on("onHide")]),ER=(e,r)=>((a,l)=>{var m,g;const h="togglebutton"===a.type,v=a.icon.map(W=>Zd(W,l.icons)).map(dn),y={...a,name:h?a.text.getOr(a.icon.getOr("")):null!==(m=a.text)&&void 0!==m?m:a.icon.getOr(""),primary:"primary"===a.buttonType,buttonType:N.from(a.buttonType),tooltip:a.tooltip,icon:a.icon,enabled:!0,borderless:a.borderless},_=Ik(null!==(g=a.buttonType)&&void 0!==g?g:"secondary"),k=h?a.text.map(l.translate):N.some(l.translate(a.text)),E=k.map(Or),A=y.tooltip.or(k).map(W=>({"aria-label":l.translate(W),title:l.translate(W)})).getOr({}),B=v.map(W=>W.asSpec()),L=Gp([B,E]),G=a.icon.isSome()&&E.isSome(),K={tag:"button",classes:_.concat(...a.icon.isSome()&&!G?["tox-button--icon"]:[]).concat(...G?["tox-button--icon-and-text"]:[]).concat(...a.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===a.type&&a.active?["tox-button--enabled"]:[]),attributes:A},Q=ux(y,N.some(W=>{const z=Y=>{v.map(Z=>Z.getOpt(W).each(te=>{so.set(te,[Zd(Y,l.icons)])}))};return h?a.onAction({setIcon:z,setActive:Y=>{const Z=W.element;Y?(Zo(Z,"tox-button--enabled"),ro(Z,"aria-pressed",!0)):(sr(Z,"tox-button--enabled"),Ht(Z,"aria-pressed"))},isActive:()=>Ha(W.element,"tox-button--enabled")}):"button"===a.type?a.onAction({setIcon:z}):void 0}),[],K,L,l);return Bs.sketch(Q)})(e,r),Ux=ta().deviceType,Kb=Ux.isPhone(),N1=Ux.isTablet();var ru=$s({name:"silver.View",configFields:[_e("viewConfig")],partFields:[mi({factory:{sketch:e=>{let r=!1;const a=Je(e.buttons,l=>{return"group"===l.type?(r=!0,g=e.providers,{dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Je(l.buttons,h=>ER(h,g))}):ER(l,e.providers);var g});return{uid:e.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...Kb||N1?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:ve([$t.config({}),pt.config({mode:"flow",selector:"button, .tox-button",focusInside:Wu.OnEnterOrSpaceMode})]),components:r?a:[sa.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),sa.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}}},schema:[_e("buttons"),_e("providers")],name:"header"}),mi({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,apis:{getPane:g=>ds.getPart(g,e,"pane"),getOnShow:g=>e.viewConfig.onShow,getOnHide:g=>e.viewConfig.onHide}}),apis:{getPane:(e,r)=>e.getPane(r),getOnShow:(e,r)=>e.getOnShow(r),getOnHide:(e,r)=>e.getOnHide(r)}});const Ig=(e,r,a)=>Yo(r,(l,m)=>{const g=bo(Xt("view",eM,l));return e.slot(m,ru.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[ru.parts.header({buttons:g.buttons,providers:a})]:[],ru.parts.pane({})]}))}),jx=(e,r)=>aa.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:Ig(a,e,r),slotBehaviours:Yf([qn(l=>aa.hideAllSlots(l))])})),R1=e=>Ee(aa.getSlotNames(e),r=>aa.isShowing(e,r)),D1=(e,r,a)=>{aa.getSlot(e,r).each(l=>{ru.getPane(l).each(m=>{a(l)({getContainer:ee(m.element.dom)})})})};var Yb=gi({factory:(e,r)=>{const a={setViews:(l,m)=>{so.set(l,[jx(m,r.backstage.shared.providers)])},whichView:l=>_o.getCurrent(l).bind(R1),toggleView:(l,m,g,h)=>_o.getCurrent(l).exists(v=>{const y=R1(v),_=y.exists(E=>h===E),k=aa.getSlot(v,h).isSome();return k&&(aa.hideAllSlots(v),_?((E=>{const A=E.element;lo(A,"display","none"),ro(A,"aria-hidden","true")})(l),m()):(g(),(E=>{const A=E.element;mn(A,"display"),Ht(A,"aria-hidden")})(l),aa.showSlot(v,h),D1(v,h,ru.getOnShow)),y.each(E=>D1(v,E,ru.getOnHide))),k})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:ve([so.config({}),_o.config({find:l=>{const m=so.contents(l);return cr(m)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[_e("backstage")],apis:{setViews:(e,r,a)=>e.setViews(r,a),toggleView:(e,r,a,l,m)=>e.toggleView(r,a,l,m),whichView:(e,r)=>e.whichView(r)}});const tM=yd.optional({factory:x1,name:"menubar",schema:[_e("backstage")]}),TR=yd.optional({factory:{sketch:e=>ZN.sketch({uid:e.uid,dom:e.dom,listBehaviours:ve([pt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>nu({type:e.type,uid:bt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),N.some(!0))}),setupItem:(r,a,l,m)=>{nc.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[_e("dom"),_e("onEscape")]}),OR=yd.optional({factory:{sketch:e=>{return((a=e).type===tl.sliding?SR:a.type===tl.floating?CR:nu)({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),N.some(!0)),onToggled:(a,l)=>e.onToolbarToggled(l),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes});var a}},name:"toolbar",schema:[_e("dom"),_e("onEscape"),_e("getSink")]}),B1=yd.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:e.components,behaviours:ve((e.sticky?v1:oR)(e.editor,e.sharedBackstage))})},name:"header",schema:[_e("dom")]}),oM=yd.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u26a1\ufe0fUpgrade"}}]})},name:"promotion",schema:[_e("dom")]}),AR=yd.optional({name:"socket",schema:[_e("dom")]}),M1=yd.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ve([er.config({}),$t.config({}),yi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{_o.getCurrent(r).each(aa.hideAllSlots),nn(r,Mx)},onGrown:r=>{nn(r,Mx)},onStartGrow:r=>{Bt(r,Ub,{width:Jn(r.element,"width").getOr("")})},onStartShrink:r=>{Bt(r,Ub,{width:ln(r.element)+"px"})}}),so.config({}),_o.config({find:r=>{const a=so.contents(r);return cr(a)}})])}],behaviours:ve([ex(0),go("sidebar-sliding-events",[Me(Ub,(r,a)=>{lo(r.element,"width",a.event.width)}),Me(Mx,(r,a)=>{mn(r.element,"width")})])])})},name:"sidebar",schema:[_e("dom")]}),I1=yd.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ve([so.config({}),Lc.config({focus:!1}),_o.config({find:r=>cr(r.components())})]),components:[]})},name:"throbber",schema:[_e("dom")]}),nM=yd.optional({factory:Yb,name:"viewWrapper",schema:[_e("backstage")]}),NR=yd.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]});var _n=$s({name:"OuterContainer",factory:(e,r,a)=>{let l=!1;const m={getSocket:g=>ds.getPart(g,e,"socket"),setSidebar:(g,h,v)=>{ds.getPart(g,e,"sidebar").each(y=>{return k=h,E=v,void _o.getCurrent(_=y).each(A=>{so.set(A,[C1(k)]);const B=E?.toLowerCase();So(B)&&vo(k,B)&&_o.getCurrent(A).each(L=>{aa.showSlot(L,B),yi.immediateGrow(A),mn(A.element,"width"),Vb(_.element,"region")})});var _,k,E})},toggleSidebar:(g,h)=>{ds.getPart(g,e,"sidebar").each(v=>{return _=h,void _o.getCurrent(y=v).each(k=>{_o.getCurrent(k).each(E=>{yi.hasGrown(k)?aa.isShowing(E,_)?(yi.shrink(k),Vb(y.element,"presentation")):(aa.hideAllSlots(E),aa.showSlot(E,_),Vb(y.element,"region")):(aa.hideAllSlots(E),aa.showSlot(E,_),yi.grow(k),Vb(y.element,"region"))})});var y,_})},whichSidebar:g=>ds.getPart(g,e,"sidebar").bind(mR).getOrNull(),getHeader:g=>ds.getPart(g,e,"header"),getToolbar:g=>ds.getPart(g,e,"toolbar"),setToolbar:(g,h)=>{ds.getPart(g,e,"toolbar").each(v=>{const y=Je(h,qb);v.getApis().setGroups(v,y)})},setToolbars:(g,h)=>{ds.getPart(g,e,"multiple-toolbar").each(v=>{const y=Je(h,_=>Je(_,qb));ZN.setItems(v,y)})},refreshToolbar:g=>{ds.getPart(g,e,"toolbar").each(h=>h.getApis().refresh(h))},toggleToolbarDrawer:g=>{ds.getPart(g,e,"toolbar").each(h=>{Gt(h.getApis().toggle,v=>v(h))})},toggleToolbarDrawerWithoutFocusing:g=>{ds.getPart(g,e,"toolbar").each(h=>{Gt(h.getApis().toggleWithoutFocusing,v=>v(h))})},isToolbarDrawerToggled:g=>ds.getPart(g,e,"toolbar").bind(h=>N.from(h.getApis().isOpen).map(v=>v(h))).getOr(!1),getThrobber:g=>ds.getPart(g,e,"throbber"),focusToolbar:g=>{ds.getPart(g,e,"toolbar").orThunk(()=>ds.getPart(g,e,"multiple-toolbar")).each(h=>{pt.focusIn(h)})},setMenubar:(g,h)=>{ds.getPart(g,e,"menubar").each(v=>{x1.setMenus(v,h)})},focusMenubar:g=>{ds.getPart(g,e,"menubar").each(h=>{x1.focus(h)})},setViews:(g,h)=>{ds.getPart(g,e,"viewWrapper").each(v=>{Yb.setViews(v,h)})},toggleView:(g,h)=>ds.getPart(g,e,"viewWrapper").exists(v=>Yb.toggleView(v,()=>m.showMainView(g),()=>m.hideMainView(g),h)),whichView:g=>ds.getPart(g,e,"viewWrapper").bind(Yb.whichView).getOrNull(),hideMainView:g=>{l=m.isToolbarDrawerToggled(g),l&&m.toggleToolbarDrawer(g),ds.getPart(g,e,"editorContainer").each(h=>{const v=h.element;lo(v,"display","none"),ro(v,"aria-hidden","true")})},showMainView:g=>{l&&m.toggleToolbarDrawer(g),ds.getPart(g,e,"editorContainer").each(h=>{const v=h.element;mn(v,"display"),Ht(v,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:r,apis:m,behaviours:e.behaviours}},configFields:[_e("dom"),_e("behaviours")],partFields:[B1,tM,OR,TR,AR,M1,oM,I1,nM,NR],apis:{getSocket:(e,r)=>e.getSocket(r),setSidebar:(e,r,a,l)=>{e.setSidebar(r,a,l)},toggleSidebar:(e,r,a)=>{e.toggleSidebar(r,a)},whichSidebar:(e,r)=>e.whichSidebar(r),getHeader:(e,r)=>e.getHeader(r),getToolbar:(e,r)=>e.getToolbar(r),setToolbar:(e,r,a)=>{e.setToolbar(r,a)},setToolbars:(e,r,a)=>{e.setToolbars(r,a)},refreshToolbar:(e,r)=>e.refreshToolbar(r),toggleToolbarDrawer:(e,r)=>{e.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(e,r)=>{e.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(e,r)=>e.isToolbarDrawerToggled(r),getThrobber:(e,r)=>e.getThrobber(r),setMenubar:(e,r,a)=>{e.setMenubar(r,a)},focusMenubar:(e,r)=>{e.focusMenubar(r)},focusToolbar:(e,r)=>{e.focusToolbar(r)},setViews:(e,r,a)=>{e.setViews(r,a)},toggleView:(e,r,a)=>e.toggleView(r,a),whichView:(e,r)=>e.whichView(r)}});const P1={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},L1=e=>e.split(" "),vm=(e,r)=>{const a={...P1,...r.menus},l=Rn(r.menus).length>0,m=L1(void 0===r.menubar||!0===r.menubar?"file edit view insert format tools table help":!1===r.menubar?"":r.menubar),g=st(m,v=>{const y=vo(P1,v);return l?y||lt(r.menus,v).exists(_=>vo(_,"items")):y}),h=Je(g,v=>{const y=a[v];return((_,k,E)=>{const A=SO(E).split(/[ ,]/);return{text:_.title,getItems:()=>ft(_.items,B=>{const L=B.toLowerCase();return 0===L.trim().length||Vo(A,G=>G===L)?[]:"separator"===L||"|"===L?[{type:"separator"}]:k.menuItems[L]?[k.menuItems[L]]:[]})}})({title:y.title,items:L1(y.items)},r,e)});return st(h,v=>v.getItems().length>0&&Vo(v.getItems(),y=>So(y)||"separator"!==y.type))},F1=(e,r,a)=>(e.on("remove",()=>a.unload(r)),a.load(r)),z1=(e,r,a,l)=>(e.on("remove",()=>l.unloadRawCss(r)),l.loadRawCss(r,a)),$x=async(e,r)=>{const a="ui/"+Zu(e).getOr("default")+"/skin.css",l=tinymce.Resource.get(a);return So(l)?Promise.resolve(z1(e,a,l,e.ui.styleSheetLoader)):F1(e,r+"/skin.min.css",e.ui.styleSheetLoader)},uh=async(e,r)=>{var a;if(a=oe(e.getElement()),Vc(a).isSome()){const l="ui/"+Zu(e).getOr("default")+"/skin.shadowdom.css",m=tinymce.Resource.get(l);return So(m)?(z1(e,l,m,Ju.DOM.styleSheetLoader),Promise.resolve()):F1(e,r+"/skin.shadowdom.min.css",Ju.DOM.styleSheetLoader)}},Xb=(e,r)=>{return(async(a,l)=>{Zu(l).fold(()=>{const g=Pf(l);g&&l.contentCSS.push(g+(a?"/content.inline":"/content")+".min.css")},g=>{const h="ui/"+g+(a?"/content.inline":"/content")+".css",v=tinymce.Resource.get(h);if(So(v))z1(l,h,v,l.ui.styleSheetLoader);else{const y=Pf(l);y&&l.contentCSS.push(y+(a?"/content.inline":"/content")+".min.css")}});const m=Pf(l);if(!$y(l)&&So(m))return Promise.all([$x(l,m),uh(l,m)]).then()})(e,r).then((a=>{const l=()=>{a._skinLoaded=!0,a.dispatch("SkinLoaded")};return()=>{a.initialized?l():a.on("init",l)}})(r),(a=r,()=>{a.dispatch("SkinLoadError",{message:"Skin could not be loaded"})}));var a},Wx=Xn(Xb,!1),RR=Xn(Xb,!0),qs=(e,r,a)=>e.translate([r,e.translate(a)]),qx=(e,r)=>{const a=(g,h,v,y)=>{const _=e.shared.providers.translate(g.title);if("separator"===g.type)return N.some({type:"separator",text:_});if("submenu"===g.type){const k=ft(g.getStyleItems(),E=>l(E,h,y));return 0===h&&k.length<=0?N.none():N.some({type:"nestedmenuitem",text:_,enabled:k.length>0,getSubmenuItems:()=>ft(g.getStyleItems(),E=>l(E,h,y))})}return N.some({type:"togglemenuitem",text:_,icon:g.icon,active:g.isSelected(y),enabled:!v,onAction:r.onAction(g),...g.getStylePreview().fold(()=>({}),k=>({meta:{style:k}}))})},l=(g,h,v)=>{const y="formatter"===g.type&&r.isInvalid(g);return 0===h?y?[]:a(g,h,!1,v).toArray():a(g,h,y,v).toArray()},m=g=>{const h=r.getCurrentValue(),v=r.shouldHide?0:1;return ft(g,y=>l(y,v,h))};return{validateItems:m,getFetch:(g,h)=>(v,y)=>{const _=h(),k=m(_);y(ah(k,Rc.CLOSE_ON_EXECUTE,g,{isHorizontalMenu:!1,search:N.none()}))}}},Pg=(e,r,a)=>{const l=a.dataset,m="basic"===l.type?()=>Je(l.data,g=>Yk(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:qx(r,a),getStyleItems:m}},mh=(e,r,a,l,m)=>{const{items:g,getStyleItems:h}=Pg(0,r,a);return bk({text:a.icon.isSome()?N.none():a.text,icon:a.icon,tooltip:N.from(a.tooltip),role:N.none(),fetch:g.getFetch(r,h),onSetup:v=>{const y=_=>v.setTooltip(qs(e,l,_.value));return e.on(m,y),b0(ud(e,"NodeChange",_=>{const k=_.getComponent();a.updateText(k),Ut.set(_.getComponent(),!e.selection.isEditable())})(v),()=>e.off(m,y))},getApi:v=>({getComponent:ee(v),setTooltip:y=>{const _=r.shared.providers.translate(y);hs(v.element,{"aria-label":_,title:_})}}),columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)};var gh;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(gh||(gh={}));const xd=(e,r,a)=>{var g,m;return{type:"basic",data:(g=e.options.get(r),m=a===gh.SemiColon?g.replace(/;$/,"").split(";"):g.split(" "),Je(m,g=>{let h=g,v=g;const y=g.split("=");return y.length>1&&(h=y[0],v=y[1]),{title:h,format:v}}))}},DR="Alignment {0}",ym=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],Jb=e=>{const r={type:"basic",data:ym};return{tooltip:qs(e,DR,"left"),text:N.none(),icon:N.some("align-left"),isSelectedFor:a=>()=>e.formatter.match(a),getCurrentValue:N.none,getPreviewFor:a=>N.none,onAction:a=>()=>Ee(ym,l=>l.format===a.format).each(l=>e.execCommand(l.command)),updateText:a=>{const l=Ee(ym,m=>e.formatter.match(m.format)).fold(ee("left"),m=>m.title.toLowerCase());Bt(a,_g,{icon:`align-${l}`}),e.dispatch("AlignTextUpdate",{value:l})},dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},V1=(e,r)=>{const a=r(),l=Je(a,m=>m.format);return N.from(e.formatter.closest(l)).bind(m=>Ee(a,g=>g.format===m)).orThunk(()=>Hr(e.formatter.match("p"),{title:"Paragraph",format:"p"}))},Lg="Block {0}",U1="Paragraph",BR=e=>{const r=xd(e,"block_formats",gh.SemiColon);return{tooltip:qs(e,Lg,U1),text:N.some(U1),icon:N.none(),isSelectedFor:a=>()=>e.formatter.match(a),getCurrentValue:N.none,getPreviewFor:a=>()=>{const l=e.formatter.get(a);return l?N.some({tag:l.length>0&&(l[0].inline||l[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(a))}):N.none()},onAction:ug(e),updateText:a=>{const l=V1(e,()=>r.data).fold(ee(U1),m=>m.title);Bt(a,Pi,{text:l}),e.dispatch("BlocksTextUpdate",{value:l})},dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},ph="Font {0}",j1="System Font",MR=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],t=e=>{const r=e.split(/\s*,\s*/);return Je(r,a=>a.replace(/^['"]+|['"]+$/g,""))},o=(e,r)=>r.length>0&&Qs(r,a=>e.indexOf(a.toLowerCase())>-1),n=e=>{const r=()=>{const l=_=>_?t(_)[0]:"",m=e.queryCommandValue("FontName"),g=a.data,h=m?m.toLowerCase():"",v=EO(e);return{matchOpt:Ee(g,_=>{const k=_.format;return k.toLowerCase()===h||l(k).toLowerCase()===l(h).toLowerCase()}).orThunk(()=>Hr(((_,k)=>{if(0===_.indexOf("-apple-system")||k.length>0){const E=t(_.toLowerCase());return o(E,MR)||o(E,k)}return!1})(h,v),{title:j1,format:h})),font:m}},a=xd(e,"font_family_formats",gh.SemiColon);return{tooltip:qs(e,ph,j1),text:N.some(j1),icon:N.none(),isSelectedFor:l=>m=>m.exists(g=>g.format===l),getCurrentValue:()=>{const{matchOpt:l}=r();return l},getPreviewFor:l=>()=>N.some({tag:"div",styles:-1===l.indexOf("dings")?{"font-family":l}:{}}),onAction:l=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,l.format)})},updateText:l=>{const{matchOpt:m,font:g}=r(),h=m.fold(ee(g),v=>v.title);Bt(l,Pi,{text:h}),e.dispatch("FontFamilyTextUpdate",{value:h})},dataset:a,shouldHide:!1,isInvalid:Ve}},s={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},i=(()=>{const e="[0-9]+",r="[eE][+-]?"+e,a=m=>`(?:${m})?`,l=["Infinity",e+"\\."+a(e)+a(r),"\\."+e+a(r),e+a(r)].join("|");return new RegExp(`^([+-]?(?:${l}))(.*)$`)})(),c=(e,r)=>N.from(i.exec(e)).bind(a=>{const l=Number(a[1]),m=a[2];return g=m,Vo(r,v=>Vo(s[v],y=>g===y))?N.some({value:l,unit:m}):N.none();var g}),d={tab:ee(9),escape:ee(27),enter:ee(13),backspace:ee(8),delete:ee(46),left:ee(37),up:ee(38),right:ee(39),down:ee(40),space:ee(32),home:ee(36),end:ee(35),pageUp:ee(33),pageDown:ee(34)},u="Font size {0}",p="12pt",f={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},b={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},x=(e,r)=>/[0-9.]+px$/.test(e)?((a,l)=>{const m=Math.pow(10,l);return Math.round(a*m)/m})(72*parseInt(e,10)/96,r||0)+"pt":lt(b,e).getOr(e),C=e=>lt(f,e).getOr(""),O=e=>{const r=()=>{let m=N.none();const g=l.data,h=e.queryCommandValue("FontSize");if(h)for(let v=3;m.isNone()&&v>=0;v--){const y=x(h,v),_=C(y);m=Ee(g,k=>k.format===h||k.format===y||k.format===_)}return{matchOpt:m,size:h}},a=ee(N.none),l=xd(e,"font_size_formats",gh.Space);return{tooltip:qs(e,u,p),text:N.some(p),icon:N.none(),isSelectedFor:m=>g=>g.exists(h=>h.format===m),getPreviewFor:a,getCurrentValue:()=>{const{matchOpt:m}=r();return m},onAction:m=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,m.format)})},updateText:m=>{const{matchOpt:g,size:h}=r(),v=g.fold(ee(h),y=>y.title);Bt(m,Pi,{text:v}),e.dispatch("FontSizeTextUpdate",{value:v})},dataset:l,shouldHide:!1,isInvalid:Ve}},S="Format {0}",R=(e,r)=>{const a="Paragraph";return{tooltip:qs(e,S,a),text:N.some(a),icon:N.none(),isSelectedFor:l=>()=>e.formatter.match(l),getCurrentValue:N.none,getPreviewFor:l=>()=>{const m=e.formatter.get(l);return void 0!==m?N.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))}):N.none()},onAction:ug(e),updateText:l=>{const m=v=>Gk(v)?ft(v.items,m):Mb(v)?[{title:v.title,format:v.format}]:[],g=ft(Kk(e),m),h=V1(e,ee(g)).fold(ee(a),v=>v.title);Bt(l,Pi,{text:h}),e.dispatch("StylesTextUpdate",{value:h})},shouldHide:Ry(e),isInvalid:l=>!e.formatter.canApply(l.format),dataset:r}},T=ee([_e("toggleClass"),_e("fetch"),Zc("onExecute"),fe("getHotspot",N.some),fe("getAnchorOverrides",ee({})),td(),Zc("onItemExecute"),fo("lazySink"),_e("dom"),Uo("onOpen"),ys("splitDropdownBehaviours",[vr,pt,$t]),fe("matchWidth",!1),fe("useMinWidth",!1),fe("eventOrder",{}),fo("role")].concat(sb())),D=ga({factory:Bs,schema:[_e("dom")],name:"arrow",defaults:()=>({buttonBehaviours:ve([$t.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(e.uid).each(Tu)},buttonBehaviours:ve([Co.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),P=ga({factory:Bs,schema:[_e("dom")],name:"button",defaults:()=>({buttonBehaviours:ve([$t.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(e.uid).each(a=>{e.onExecute(a,r)})}})}),F=ee([D,P,mi({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[_e("text")],name:"aria-descriptor"}),ls({schema:[Mu()],name:"menu",defaults:e=>({onExecute:(r,a)=>{r.getSystem().getByUid(e.uid).each(l=>{e.onItemExecute(l,r,a)})}})}),k0()]),q=$s({name:"SplitDropdown",configFields:T(),partFields:F(),factory:(e,r,a,l)=>{const m=_=>{_o.getCurrent(_).each(k=>{en.highlightFirst(k),pt.focusIn(k)})},g=_=>{wS(e,ut,_,l,m,pa.HighlightMenuAndItem).get(Qe)},h=_=>{const k=rd(_,e,"button");return Tu(k),N.some(!0)},v={...Cn([qn((_,k)=>{fn(_,e,"aria-descriptor").each(E=>{const A=bt("aria");ro(E.element,"id",A),ro(_.element,"aria-describedby",A)})})]),...Ap(N.some(g))};return{uid:e.uid,dom:e.dom,components:r,apis:{repositionMenus:_=>{Co.isOn(_)&&E0(_)}},eventOrder:{...e.eventOrder,[Ki()]:["disabling","toggling","alloy.base.behaviour"]},events:v,behaviours:ar(e.splitDropdownBehaviours,[vr.config({others:{sandbox:_=>{const k=rd(_,e,"arrow");return rb(e,_,{onOpen:()=>{Co.on(k),Co.on(_)},onClose:()=>{Co.off(k),Co.off(_)}})}}}),pt.config({mode:"special",onSpace:h,onEnter:h,onDown:_=>(g(_),N.some(!0))}),$t.config({}),Co.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,r)=>e.repositionMenus(r)}}),$=e=>({isEnabled:()=>!Ut.isDisabled(e),setEnabled:r=>Ut.set(e,!r),setText:r=>Bt(e,Pi,{text:r}),setIcon:r=>Bt(e,_g,{icon:r})}),ne=e=>({setActive:r=>{Co.set(e,r)},isActive:()=>Co.isOn(e),isEnabled:()=>!Ut.isDisabled(e),setEnabled:r=>Ut.set(e,!r),setText:r=>Bt(e,Pi,{text:r}),setIcon:r=>Bt(e,_g,{icon:r})}),ce=(e,r)=>e.map(a=>({"aria-label":r.translate(a),title:r.translate(a)})).getOr({}),me=bt("focus-button"),pe=(e,r,a,l,m)=>{const g=r.map(v=>dn(sx(v,"tox-tbtn",m))),h=e.map(v=>dn(Zd(v,m.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:ce(a,m)},components:Gp([h.map(v=>v.asSpec()),g.map(v=>v.asSpec())]),eventOrder:{[ua()]:["focusing","alloy.base.behaviour",gm],[yc()]:[gm,"toolbar-group-button-events"]},buttonBehaviours:ve([i0(m.isDisabled),cs(),go(gm,[qn((v,y)=>sh(v)),Me(Pi,(v,y)=>{g.bind(_=>_.getOpt(v)).each(_=>{so.set(_,[Or(m.translate(y.event.text))])})}),Me(_g,(v,y)=>{h.bind(_=>_.getOpt(v)).each(_=>{so.set(_,[Zd(y.event.icon,m.icons)])})}),Me(ua(),(v,y)=>{y.event.prevent(),nn(v,me)})])].concat(l.getOr([])))}},we=(e,r,a)=>{var l;const m=Ot(Qe),g=pe(e.icon,e.text,e.tooltip,N.none(),a);return Bs.sketch({dom:g.dom,components:g.components,eventOrder:nx,buttonBehaviours:{...ve([go("toolbar-button-events",[(h={onAction:e.onAction,getApi:r.getApi},si((v,y)=>{Jf(h,v)(_=>{Bt(v,fk,{buttonApi:_}),h.onAction(_)})})),qd(r,m),om(r,m)]),i0(()=>!e.enabled||a.isDisabled()),cs()].concat(r.toolbarButtonBehaviours)),[gm]:null===(l=g.buttonBehaviours)||void 0===l?void 0:l[gm]}});var h},se=(e,r,a)=>we(e,{toolbarButtonBehaviours:a.length>0?[go("toolbarButtonWith",a)]:[],getApi:$,onSetup:e.onSetup},r),de=(e,r,a)=>we(e,{toolbarButtonBehaviours:[so.config({}),Co.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[go("toolbarToggleButtonWith",a)]:[]),getApi:ne,onSetup:e.onSetup},r),ye=(e,r,a)=>l=>md(m=>r.fetch(m)).map(m=>N.from(T0(Dn(fS(bt("menu-value"),m,g=>{r.onItemAction(e(l),g)},r.columns,r.presets,Rc.CLOSE_ON_EXECUTE,r.select.getOr(Ve),a),{movement:nb(r.columns,r.presets),menuBehaviours:Yf("auto"!==r.columns?[]:[qn((g,h)=>{s0(g,4,AC(r.presets)).each(({numRows:v,numColumns:y})=>{pt.setGridSize(g,v,y)})})])})))),Le=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],rt=(e,r)=>(a,l,m)=>{const g=e(a).mapError(h=>yo(h)).getOrDie();return r(g,l,m)},Ye={button:rt(o0,(e,r)=>se(e,r.shared.providers,[])),togglebutton:rt(IO,(e,r)=>de(e,r.shared.providers,[])),menubutton:rt(Bx,(e,r)=>pm(e,"tox-tbtn",r,N.none(),!1)),splitbutton:rt(e=>Xt("SplitButton",cR,e),(e,r)=>((a,l)=>{const m=v=>({isEnabled:()=>!Ut.isDisabled(v),setEnabled:y=>Ut.set(v,!y),setIconFill:(y,_)=>{Gn(v.element,`svg path[class="${y}"], rect[class="${y}"]`).each(k=>{ro(k,"fill",_)})},setActive:y=>{ro(v.element,"aria-pressed",y),Gn(v.element,"span").each(_=>{v.getSystem().getByDom(_).each(k=>Co.set(k,y))})},isActive:()=>Gn(v.element,"span").exists(y=>v.getSystem().getByDom(y).exists(Co.isOn)),setText:y=>Gn(v.element,"span").each(_=>v.getSystem().getByDom(_).each(k=>Bt(k,Pi,{text:y}))),setIcon:y=>Gn(v.element,"span").each(_=>v.getSystem().getByDom(_).each(k=>Bt(k,_g,{icon:y}))),setTooltip:y=>{const _=l.providers.translate(y);hs(v.element,{"aria-label":_,title:_})}}),g=Ot(Qe),h={getApi:m,onSetup:a.onSetup};return q.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...ce(a.tooltip,l.providers)}},onExecute:v=>{const y=m(v);y.isEnabled()&&a.onAction(y)},onItemExecute:(v,y,_)=>{},splitDropdownBehaviours:ve([QO(l.providers.isDisabled),cs(),go("split-dropdown-events",[qn((v,y)=>sh(v)),Me(me,$t.focus),qd(h,g),om(h,g)]),lb.config({})]),eventOrder:{[yc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:l.getSink,fetch:ye(m,a,l.providers),parts:{menu:Vf(0,0,a.presets)},components:[q.parts.button(pe(a.icon,a.text,N.none(),N.some([Co.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),l.providers)),q.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:_O("chevron-down",l.providers.icons)},buttonBehaviours:ve([QO(l.providers.isDisabled),cs(),Nf()])}),q.parts["aria-descriptor"]({text:l.providers.translate("To open the popup, press Shift+Enter")})]})})(e,r.shared)),grouptoolbarbutton:rt(e=>Xt("GroupToolbarButton",Dx,e),(e,r,a)=>{const l=a.ui.registry.getAll().buttons,m={[Kw]:r.shared.header.isPositionedAtTop()?Pd.TopToBottom:Pd.BottomToTop};if(Mp(a)===tl.floating)return((g,h,v,y)=>{const _=h.shared,k=Ot(Qe),E={toolbarButtonBehaviours:[],getApi:$,onSetup:g.onSetup},A=[go("toolbar-group-button-events",[qd(E,k),om(E,k)])];return bm.sketch({lazySink:_.getSink,fetch:()=>md(B=>{B(Je((g=>kt(a,{buttons:l,toolbar:g,allowToolbarGroups:!1},r,N.none()))(g.items),qb))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:pe(g.icon,g.text,g.tooltip,N.some(A),_.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:y}}}})})(e,r,0,m);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},Mt={styles:(e,r)=>{const a={type:"advanced",...r.styles};return mh(e,r,R(e,a),S,"StylesTextUpdate")},fontsize:(e,r)=>mh(e,r,O(e),u,"FontSizeTextUpdate"),fontsizeinput:(e,r)=>((a,l,m)=>{let g=N.none();const h=ud(a,"NodeChange SwitchMode",z=>{const Y=z.getComponent();g=N.some(Y),m.updateInputValue(Y),Ut.set(Y,!a.selection.isEditable())}),v=z=>({getComponent:ee(z)}),y=Ot(Qe),_=bt("custom-number-input-events"),k=(z,Y,Z)=>{const te=g.map(Ie=>at.getValue(Ie)).getOr(""),ae=m.getNewValue(te,z),Ce=te.length-`${ae}`.length,De=g.map(Ie=>Ie.element.dom.selectionStart-Ce),Fe=g.map(Ie=>Ie.element.dom.selectionEnd-Ce);m.onAction(ae,Z),g.each(Ie=>{at.setValue(Ie,ae),Y&&(De.each(ot=>Ie.element.dom.selectionStart=ot),Fe.each(ot=>Ie.element.dom.selectionEnd=ot))})},E=(z,Y)=>k((Z,te)=>Z-te,z,Y),A=(z,Y)=>k((Z,te)=>Z+te,z,Y),B=z=>Za(z.element).fold(N.none,Y=>(wl(Y),N.some(!0))),L=z=>Rs(z.element)?(zc(z.element).each(Y=>wl(Y)),N.some(!0)):N.none(),G=(z,Y,Z,te)=>{const ae=Ot(Qe),Ce=l.shared.providers.translate(Z),De=bt("altExecuting"),Fe=ud(a,"NodeChange SwitchMode",ot=>{Ut.set(ot.getComponent(),!a.selection.isEditable())}),Ie=ot=>{Ut.isDisabled(ot)||z(!0)};return Bs.sketch({dom:{tag:"button",attributes:{title:Ce,"aria-label":Ce},classes:te.concat(Y)},components:[rx(Y,l.shared.providers.icons)],buttonBehaviours:ve([Ut.config({}),go(De,[qd({onSetup:Fe,getApi:v},ae),om({getApi:v},ae),Me(vc(),(ot,ht)=>{ht.event.raw.keyCode!==d.space()&&ht.event.raw.keyCode!==d.enter()||Ut.isDisabled(ot)||z(!1)}),Me(Ca(),Ie),Me($l(),Ie)])]),eventOrder:{[vc()]:[De,"keying"],[Ca()]:[De,"alloy.base.behaviour"],[$l()]:[De,"alloy.base.behaviour"]}})},K=dn(G(z=>E(!1,z),"minus","Decrease font size",[])),Q=dn(G(z=>A(!1,z),"plus","Increase font size",[])),W=dn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[em.sketch({inputBehaviours:ve([Ut.config({}),go(_,[qd({onSetup:h,getApi:v},y),om({getApi:v},y)]),go("input-update-display-text",[Me(Pi,(z,Y)=>{at.setValue(z,Y.event.text)}),Me(eE(),z=>{m.onAction(at.getValue(z))}),Me(Zg(),z=>{m.onAction(at.getValue(z))})]),pt.config({mode:"special",onEnter:z=>(k(ut,!0,!0),N.some(!0)),onEscape:B,onUp:z=>(A(!0,!1),N.some(!0)),onDown:z=>(E(!0,!1),N.some(!0)),onLeft:(z,Y)=>(Y.cut(),N.none()),onRight:(z,Y)=>(Y.cut(),N.none())})])})],behaviours:ve([$t.config({}),pt.config({mode:"special",onEnter:L,onSpace:L,onEscape:B}),go("input-wrapper-events",[Me(yl(),z=>{yt([K,Q],Y=>{const Z=oe(Y.get(z).element.dom);Rs(Z)&&Lw(Z)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[K.asSpec(),W.asSpec(),Q.asSpec()],behaviours:ve([$t.config({}),pt.config({mode:"flow",focusInside:Wu.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:z=>Rs(z.element)?N.none():(wl(z.element),N.some(!0))})])}})(e,r,(a=>{const l=()=>a.queryCommandValue("FontSize");return{updateInputValue:m=>Bt(m,Pi,{text:l()}),onAction:(m,g)=>a.execCommand("FontSize",!1,m,{skip_focus:!g}),getNewValue:(m,g)=>{c(m,["unsupportedLength","empty"]);const h=l(),v=c(m,["unsupportedLength","empty"]).or(c(h,["unsupportedLength","empty"])),y=v.map(B=>B.value).getOr(16),_=Ly(a),k=v.map(B=>B.unit).filter(B=>""!==B).getOr(_),E=g(y,(B=k,null!==(L={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[B])&&void 0!==L?L:{step:1}).step),A=`${(B=>B>=0)(E)?E:y}${k}`;var B,L;return A!==h&&((B,L)=>{B.dispatch("FontSizeInputTextUpdate",L)})(a,{value:A}),A}}})(e)),fontfamily:(e,r)=>mh(e,r,n(e),ph,"FontFamilyTextUpdate"),blocks:(e,r)=>mh(e,r,BR(e),Lg,"BlocksTextUpdate"),align:(e,r)=>mh(e,r,Jb(e),DR,"AlignTextUpdate")},kt=(e,r,a,l)=>{const m=(h=>{const v=h.toolbar;return!1===v?[]:void 0===v||!0===v?(_=>{const k=Je(Le,E=>{const A=st(E.items,B=>vo(_,B)||vo(Mt,B));return{name:E.name,items:A}});return st(k,E=>E.items.length>0)})(h.buttons):So(v)?(_=>{const k=_.split("|");return Je(k,E=>({items:E.trim().split(" ")}))})(v):vn(v,k=>vo(k,"name")&&vo(k,"items"))?v:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(r),g=Je(m,h=>{const v=ft(h.items,y=>{return 0===y.trim().length?[]:(_=e,k=r.buttons,E=y,A=r.allowToolbarGroups,B=a,L=l,lt(k,E.toLowerCase()).orThunk(()=>L.bind(G=>Ps(G,K=>lt(k,K+E.toLowerCase())))).fold(()=>lt(Mt,E.toLowerCase()).map(G=>G(_,B)),G=>{return"grouptoolbarbutton"!==G.type||A?(Q=B,W=_,lt(Ye,(K=G).type).fold(()=>(console.error("skipping button defined by",K),N.none()),z=>N.some(z(K,Q,W)))):(console.warn(`Ignoring the '${E}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),N.none());var K,Q,W})).toArray();var _,k,E,A,B,L});return{title:N.from(e.translate(h.name)),items:v}});return st(g,h=>h.items.length>0)},jt=(e,r,a,l)=>{const m=r.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(vn(g,So)){const v=g.map(y=>kt(e,{toolbar:y,buttons:h,allowToolbarGroups:a.allowToolbarGroups},l,N.none()));_n.setToolbars(m,v)}else _n.setToolbar(m,kt(e,a,l,N.none()))},It=ta(),dt=It.os.isiOS()&&It.os.version.major<=12;var xt=Object.freeze({__proto__:null,render:(e,r,a,l,m)=>{const{mainUi:g,uiMotherships:h}=r,v=Ot(0),y=g.outerContainer;Wx(e);const _=oe(m.targetNode),k=ei(Ur(_));var G,K;Pv(_,g.mothership),G=k,K=r,Vd(e)&&Pv(K.mainUi.mothership.element,K.popupUi.mothership),Wh(G,K.dialogUi.mothership),e.on("SkinLoaded",()=>{_n.setSidebar(y,a.sidebar,jy(e)),jt(e,r,a,l),v.set(e.getWin().innerWidth),_n.setMenubar(y,vm(e,a)),_n.setViews(y,a.views),((L,G)=>{const{uiMotherships:K}=G,Q=L.dom;let W=L.getWin();const z=L.getDoc().documentElement,Y=Ot(Go(W.innerWidth,W.innerHeight)),Z=Ot(Go(z.offsetWidth,z.offsetHeight)),te=()=>{const Fe=Y.get();Fe.left===W.innerWidth&&Fe.top===W.innerHeight||(Y.set(Go(W.innerWidth,W.innerHeight)),f0(L))},ae=()=>{const Fe=L.getDoc().documentElement,Ie=Z.get();Ie.left===Fe.offsetWidth&&Ie.top===Fe.offsetHeight||(Z.set(Go(Fe.offsetWidth,Fe.offsetHeight)),f0(L))},Ce=Fe=>{L.dispatch("ScrollContent",Fe)};Q.bind(W,"resize",te),Q.bind(W,"scroll",Ce);const De=Ww(oe(L.getBody()),"load",ae);L.on("hide",()=>{yt(K,Fe=>{lo(Fe.element,"display","none")})}),L.on("show",()=>{yt(K,Fe=>{mn(Fe.element,"display")})}),L.on("NodeChange",ae),L.on("remove",()=>{De.unbind(),Q.unbind(W,"resize",te),Q.unbind(W,"scroll",Ce),W=null})})(e,r)});const E=_n.getSocket(y).getOrDie("Could not find expected socket element");if(dt){$e(E.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const L=((K,Q)=>{let W=null;return{cancel:()=>{Ya(W)||(clearTimeout(W),W=null)},throttle:(...z)=>{Ya(W)&&(W=setTimeout(()=>{W=null,K.apply(null,z)},20))}}})(()=>{e.dispatch("ScrollContent")}),G=$a(E.element,"scroll",L.throttle);e.on("remove",G.unbind)}JC(e,r),e.addCommand("ToggleSidebar",(L,G)=>{_n.toggleSidebar(y,G),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var L;return null!==(L=_n.whichSidebar(y))&&void 0!==L?L:""}),e.addCommand("ToggleView",(L,G)=>{if(_n.toggleView(y,G)){const K=y.element;g.mothership.broadcastOn([Ld()],{target:K}),yt(h,Q=>{Q.broadcastOn([Ld()],{target:K})}),Ya(_n.whichView(y))&&(e.focus(),e.nodeChanged(),_n.refreshToolbar(y))}}),e.addQueryValueHandler("ToggleView",()=>{var L;return null!==(L=_n.whichView(y))&&void 0!==L?L:""});const A=Mp(e);A!==tl.sliding&&A!==tl.floating||e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const L=e.getWin().innerWidth;L!==v.get()&&(_n.refreshToolbar(r.mainUi.outerContainer),v.set(L))});return{iframeContainer:E.element.dom,editorContainer:y.element.dom,api:{setEnabled:L=>{qp(r,!L)},isEnabled:()=>!Ut.isDisabled(y)}}}});const to=e=>/^[0-9\.]+(|px)$/i.test(""+e)?N.some(parseInt(""+e,10)):N.none(),ie=e=>qo(e)?e+"px":e,ue=(e,r,a)=>{const l=r.filter(g=>e<g),m=a.filter(g=>e>g);return l.or(m).getOr(e)},ze=e=>{const r=Ty(e),a=Df(e),l=Qu(e);return to(r).map(m=>ue(m,a,l))},{ToolbarLocation:He,ToolbarMode:Ue}=wC,zt=(e,r)=>{const a=hr(e);return{pos:r?a.y:a.bottom,bounds:a}};var uo=Object.freeze({__proto__:null,render:(e,r,a,l,m)=>{const{mainUi:g}=r,h=Un(),v=oe(m.targetNode),y=((e,r,a,l,m)=>{const{mainUi:g,uiMotherships:h}=a,v=Ju.DOM,y=sg(e),_=Fp(e),k=Qu(e).or(ze(e)),E=l.shared.header,A=E.isPositionedAtTop,B=Mp(e),L=B===Ue.sliding||B===Ue.floating,G=Ot(!1),K=()=>G.get()&&!e.removed,Q=Z=>L?Z.fold(ee(0),te=>te.components().length>1?gr(te.components()[1].element):0):0,W=()=>{yt(h,Z=>{Z.broadcastOn([vp()],{})})},z=Z=>{if(!K())return;y||m.on(ae=>{const Ce=k.getOrThunk(()=>{const De=to(Zr(va(),"margin-left")).getOr(0);return ln(va())-ca(r).left+De});lo(ae.element,"max-width",Ce+"px")});const te=y?N.none():(()=>{if(y)return N.none();if(ca(g.outerContainer.element).left+jr(g.outerContainer.element)>=window.innerWidth-40||Jn(g.outerContainer.element,"width").isSome()){lo(g.outerContainer.element,"position","absolute"),lo(g.outerContainer.element,"left","0px"),mn(g.outerContainer.element,"width");const ae=jr(g.outerContainer.element);return N.some(ae)}return N.none()})();var ae;L&&_n.refreshToolbar(g.outerContainer),y||(ae=te,m.on(Ce=>{const De=_n.getToolbar(g.outerContainer),Fe=Q(De),Ie=hr(r),{top:ot,left:ht}=(oo=e,Ao=g.outerContainer.element,Vd(oo)?s1(Ao):N.none()).fold(()=>({top:A()?Math.max(Ie.y-gr(Ce.element)+Fe,0):Ie.bottom,left:Ie.x}),oo=>{var Ao;const Pn=hr(oo),ir=null!==(Ao=oo.dom.scrollTop)&&void 0!==Ao?Ao:0,no=Jo(oo,va()),Ks=no?Math.max(Ie.y-gr(Ce.element)+Fe,0):Ie.y-Pn.y+ir-gr(Ce.element)+Fe;return{top:A()?Ks:Ie.bottom,left:no?Ie.x:Ie.x-Pn.x}}),At={position:"absolute",left:Math.round(ht)+"px",top:Math.round(ot)+"px"},Qt=ae.map(oo=>{const Ao=$r(),Pn=window.innerWidth-(ht-Ao.left);return{width:Math.max(Math.min(oo,Pn),150)+"px"}}).getOr({});var oo,Ao;$e(g.outerContainer.element,{...At,...Qt})})),_&&m.on(Z),W()},Y=()=>!(y||!_||!K())&&m.get().exists(Z=>{const te=E.getDockingMode(),ae=(De=>{switch(My(e)){case He.auto:const Fe=_n.getToolbar(g.outerContainer),Ie=Q(Fe),ot=gr(De.element)-Ie,ht=hr(r);if(ht.y>ot)return"top";{const At=Qa(r),Qt=Math.max(At.dom.scrollHeight,gr(At));return ht.bottom<Qt-ot||Sr().bottom<ht.bottom-ot?"bottom":"top"}case He.bottom:return"bottom";default:return"top"}})(Z);return ae!==te&&(Ce=ae,m.on(De=>{yr.setModes(De,[Ce]),E.setDockingMode(Ce);const Fe=A()?Pd.TopToBottom:Pd.BottomToTop;ro(De.element,Kw,Fe)}),!0);var Ce});return{isVisible:K,isPositionedAtTop:A,show:()=>{G.set(!0),lo(g.outerContainer.element,"display","flex"),v.addClass(e.getBody(),"mce-edit-focus"),yt(h,Z=>{mn(Z.element,"display")}),Y(),Vd(e)?z(Z=>yr.isDocked(Z)?yr.reset(Z):yr.refresh(Z)):z(yr.refresh)},hide:()=>{G.set(!1),lo(g.outerContainer.element,"display","none"),v.removeClass(e.getBody(),"mce-edit-focus"),yt(h,Z=>{lo(Z.element,"display","none")})},update:z,updateMode:()=>{Y()&&z(yr.reset)},repositionPopups:W}})(e,v,r,l,h),_=Iy(e);RR(e);const k=()=>{if(h.isSet())return void y.show();h.set(_n.getHeader(g.outerContainer).getOrDie());const A=Ff(e);Vd(e)?(Pv(v,g.mothership),Pv(v,r.popupUi.mothership)):Wh(A,g.mothership),Wh(A,r.dialogUi.mothership),jt(e,r,a,l),_n.setMenubar(g.outerContainer,vm(e,a)),y.show(),((B,L,G,K)=>{const Q=Ot(zt(L,G.isPositionedAtTop())),W=te=>{const{pos:ae,bounds:Ce}=zt(L,G.isPositionedAtTop()),{pos:De,bounds:Fe}=Q.get(),Ie=Ce.height!==Fe.height||Ce.width!==Fe.width;Q.set({pos:ae,bounds:Ce}),Ie&&f0(B,te),G.isVisible()&&(De!==ae?G.update(yr.reset):Ie&&(G.updateMode(),G.repositionPopups()))};K||(B.on("activate",G.show),B.on("deactivate",G.hide)),B.on("SkinLoaded ResizeWindow",()=>G.update(yr.reset)),B.on("NodeChange keydown",te=>{requestAnimationFrame(()=>W(te))});let z=0;const Y=lk(()=>G.update(yr.refresh),33);B.on("ScrollWindow",()=>{const te=$r().left;te!==z&&(z=te,Y.throttle()),G.updateMode()}),Vd(B)&&B.on("ElementScroll",te=>{G.update(yr.refresh)});const Z=hp();Z.set(Ww(oe(B.getBody()),"load",te=>W(te.raw))),B.on("remove",()=>{Z.clear()})})(e,v,y,_),e.nodeChanged()};return e.on("show",k),e.on("hide",y.hide),_||(e.on("focus",k),e.on("blur",y.hide)),e.on("init",()=>{(e.hasFocus()||_)&&k()}),JC(e,r),{editorContainer:g.outerContainer.element.dom,api:{show:k,hide:y.hide,setEnabled:A=>{qp(r,!A)},isEnabled:()=>!Ut.isDisabled(g.outerContainer)}}}});const Wt="contexttoolbar-hide",kn=(e,r)=>Me(fk,(a,l)=>{const m=(g=e.get(a),{hide:()=>nn(g,op()),getValue:()=>at.getValue(g)});var g;r.onAction(m,l.event.buttonApi)}),Eo=(e,r,a)=>r.bottom-e.y>=a&&e.bottom-r.y>=a,No=e=>{const r=(a=>{const l=a.getBoundingClientRect();if(l.height<=0&&l.width<=0){const m=du(oe(a.startContainer),a.startOffset).element;return(Io(m)?Zs(m):N.some(m)).filter(ho).map(g=>g.dom.getBoundingClientRect()).getOr(l)}return l})(e.selection.getRng());if(e.inline){const a=$r();return Hn(a.left+r.left,a.top+r.top,r.width,r.height)}{const a=Ul(oe(e.getBody()));return Hn(a.x+r.left,a.y+r.top,r.width,r.height)}},po=(e,r,a,l=0)=>{const m=Sm(window),g=hr(oe(e.getContentAreaContainer())),h=If(e)||Lf(e)||Lp(e),{x:v,width:y}=((_,k,E)=>{const A=Math.max(_.x+E,k.x);return{x:A,width:Math.min(_.right-E,k.right)-A}})(g,m,l);if(e.inline&&!h)return Hn(v,m.y,y,m.height);{const _=r.header.isPositionedAtTop(),{y:k,bottom:E}=((A,B,L,G,K,Q)=>{const W=oe(A.getContainer()),z=Gn(W,".tox-editor-header").getOr(W),Y=hr(z),te=G&&!(Y.y>=B.bottom);if(A.inline&&te)return{y:Math.max(Y.bottom+Q,L.y),bottom:L.bottom};if(A.inline&&!te)return{y:L.y,bottom:Math.min(Y.y-Q,L.bottom)};const ae="line"===K?hr(W):B;return te?{y:Math.max(Y.bottom+Q,L.y),bottom:Math.min(ae.bottom-Q,L.bottom)}:{y:Math.max(ae.y+Q,L.y),bottom:Math.min(Y.y-Q,L.bottom)}})(e,g,m,_,a,l);return Hn(v,k,y,E-k)}},Fo={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Cs={maxHeightFunction:Lm(),maxWidthFunction:Fx()},Pt=e=>"node"===e,Mo=(e,r,a,l,m)=>{const g=No(e),h=l.lastElement().exists(v=>Jo(a,v));return((v,y)=>{const _=v.selection.getRng(),k=du(oe(_.startContainer),_.startOffset);return _.startContainer===_.endContainer&&_.startOffset===_.endOffset-1&&Jo(k.element,y)})(e,a)?h?FN:Il:h?((v,y,_)=>{const k=Jn(v,"position");lo(v,"position",y);const E=Eo(g,hr(r),-20)&&!l.isReposition()?$k:FN;return k.each(A=>lo(v,"position",A)),E})(r,l.getMode()):("fixed"===l.getMode()?m.y+$r().top:m.y)+(gr(r)+12)<=g.y?Il:Og},xr=(e,r,a,l)=>{const m=h=>(v,y,_,k,E)=>({...Mo(e,k,h,a,E)({...v,y:E.y,height:E.height},y,_,k,E),alwaysFit:!0}),g=h=>Pt(l)?[m(h)]:[];return r?{onLtr:h=>[vs,Vs,Us,Ua,ja,ra].concat(g(h)),onRtl:h=>[vs,Us,Vs,ja,Ua,ra].concat(g(h))}:{onLtr:h=>[ra,vs,Ua,Vs,ja,Us].concat(g(h)),onRtl:h=>[ra,vs,ja,Us,Ua,Vs].concat(g(h))}},os=(e,r)=>{const a=st(r,g=>g.predicate(e.dom)),{pass:l,fail:m}=Oa(a,g=>"contexttoolbar"===g.type);return{contextToolbars:l,contextForms:m}},Ea=bt("forward-slide"),sl=bt("backward-slide"),Gs=bt("change-slide-event"),Li="tox-pop--resizing",ns="tox-pop--transition",al=(e,r)=>{const a=()=>{const l=r.getOptions(e),m=r.getCurrent(e).map(r.hash),g=Un();return Je(l,h=>({type:"togglemenuitem",text:r.display(h),onSetup:v=>{const y=k=>{k&&(g.on(E=>E.setActive(!1)),g.set(v)),v.setActive(k)};y(Nr(m,r.hash(h)));const _=r.watcher(e,h,y);return()=>{g.clear(),_()}},onAction:()=>r.setCurrent(e,h)}))};e.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(a()),onSetup:r.onToolbarSetup}),e.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:a,onSetup:r.onMenuSetup})},Fg=e=>ud(e,"NodeChange",r=>{r.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),hh=(e,r)=>a=>{a.setActive(r.get());const l=m=>{r.set(m.state),a.setActive(m.state)};return e.on("PastePlainTextToggle",l),b0(()=>e.off("PastePlainTextToggle",l),Ws(e)(a))},au=(e,r)=>()=>{e.execCommand("mceToggleFormat",!1,r)},zg=(e,r)=>ud(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!e.mode.isReadOnly()&&e.undoManager[r]())}),wr=e=>ud(e,"VisualAid",r=>{r.setActive(e.hasVisual)}),Hg=e=>So(e)?e.split(/[ ,]/):e,fh=e=>r=>r.options.get(e),Gx=fh("contextmenu_never_use_native"),IR=fh("contextmenu_avoid_overlap"),$1=e=>{const r=e.ui.registry.getAll().contextMenus,a=e.options.get("contextmenu");return e.options.isSet("contextmenu")?a:st(a,l=>vo(r,l))},Qb=(e,r)=>({type:"makeshift",x:e,y:r}),Zb=e=>"longpress"===e.type||0===e.type.indexOf("touch"),xm=e=>({type:"selection",root:oe(e.selection.getNode())}),bh=(e,r,a)=>{switch(a){case"node":return{type:"node",node:N.some(oe((l=e).selection.getNode())),root:oe(l.getBody())};case"point":return((e,r)=>"contextmenu"===r.type||"longpress"===r.type?e.inline?(a=>{if(Zb(a)){const l=a.touches[0];return Qb(l.pageX,l.pageY)}return Qb(a.pageX,a.pageY)})(r):((a,l)=>{const m=Ju.DOM.getPos(a);return Qb((g=l).x+m.x,g.y+m.y);var g})(e.getContentAreaContainer(),(a=>{if(Zb(a)){const l=a.touches[0];return Qb(l.clientX,l.clientY)}return Qb(a.clientX,a.clientY)})(r)):xm(e))(e,r);case"selection":return xm(e)}var l},PR=(e,r,a,l,m,g)=>{const h=a(),v=bh(e,r,g);ah(h,Rc.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:N.none()}).map(y=>{r.preventDefault(),Zn.showMenuAt(m,{anchor:v},{menu:{markers:Dc("normal")},data:y})})},LR={onLtr:()=>[vs,Vs,Us,Ua,ja,ra,Il,Og,Db,wx,Rb,xx],onRtl:()=>[vs,Us,Vs,ja,Ua,ra,Il,Og,Rb,xx,Db,wx]},Kx={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},iu=(e,r,a,l,m,g)=>{const h=ta(),v=h.os.isiOS(),y=h.os.isMacOS(),_=h.os.isAndroid(),k=h.deviceType.isTouch(),E=()=>{const A=a();((B,L,G,K,Q,W,z)=>{const Y=((Z,te,ae)=>{const Ce=bh(Z,te,ae);return{bubble:Tc(0,"point"===ae?12:0,Kx),layouts:LR,overrides:{maxWidthFunction:Fx(),maxHeightFunction:Lm()},...Ce}})(B,L,W);ah(G,Rc.CLOSE_ON_EXECUTE,K,{isHorizontalMenu:!0,search:N.none()}).map(Z=>{L.preventDefault();const te=z?pa.HighlightMenuAndItem:pa.HighlightNone;Zn.showMenuWithinBounds(Q,{anchor:Y},{menu:{markers:Dc("normal"),highlightOnOpen:te},data:Z,type:"horizontal"},()=>N.some(po(B,K.shared,"node"===W?"node":"selection"))),B.dispatch(Wt)})})(e,r,A,l,m,g,!(_||v||y&&k))};if((y||v)&&"node"!==g){const A=()=>{(B=>{const L=B.selection.getRng(),G=()=>{wf.setEditorTimeout(B,()=>{B.selection.setRng(L)},10),W()};B.once("touchend",G);const K=z=>{z.preventDefault(),z.stopImmediatePropagation()};B.on("mousedown",K,!0);const Q=()=>W();B.once("longpresscancel",Q);const W=()=>{B.off("touchend",G),B.off("longpresscancel",Q),B.off("mousedown",K)}})(e),E()};((B,L)=>{const G=B.selection;if(G.isCollapsed()||L.touches.length<1)return!1;{const K=L.touches[0],Q=G.getRng();return jE(B.getWin(),Hh.domRange(Q)).exists(W=>W.left<=K.clientX&&W.right>=K.clientX&&W.top<=K.clientY&&W.bottom>=K.clientY)}})(e,r)?A():(e.once("selectionchange",A),e.once("touchend",()=>e.off("selectionchange",A)))}else E()},q1=e=>So(e)?"|"===e:"separator"===e.type,Yx={type:"separator"},G1=e=>{const r=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(So(e))return e;switch(e.type){case"separator":return Yx;case"submenu":return{type:"nestedmenuitem",...r(e),getSubmenuItems:()=>{const l=e.getSubmenuItems();return So(l)?l:Je(l,G1)}};default:const a=e;return{type:"menuitem",...r(a),onAction:et(a.onAction)}}},K1=(e,r)=>{if(0===r.length)return e;const a=fa(e).filter(l=>!q1(l)).fold(()=>[],l=>[Yx]);return e.concat(a).concat(r).concat([Yx])},FR=(e,r)=>{return!("longpress"===(a=r).type||vo(a,"touches")||2===r.button&&(r.target!==e.getBody()||""!==r.pointerType));var a},Se=(e,r)=>FR(e,r)?e.selection.getStart(!0):r.target,Nt=(e,r,a)=>{const l=ta().deviceType.isTouch,m=na(Zn.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>e.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:ve([go("dismissContextMenu",[Me(Dd(),(v,y)=>{jo.close(v),e.focus()})])])})),g=()=>Zn.hide(m),h=v=>{if(Gx(e)&&v.preventDefault(),v.ctrlKey&&!Gx(e)||(_=>0===$1(_).length)(e))return;const y=((_,k)=>{const E=IR(_),A=FR(_,k)?"selection":"point";if(Na(E)){const B=Se(_,k);return Qp(oe(B),E)?"node":A}return A})(e,v);(l()?iu:PR)(e,v,()=>{const _=Se(e,v),k=e.ui.registry.getAll(),E=$1(e);return((A,B,L)=>{const G=qt(B,(K,Q)=>lt(A,Q.toLowerCase()).map(W=>{const z=W.update(L);if(So(z)&&Na(Ja(z)))return K1(K,z.split(" "));if(On(z)&&z.length>0){const Y=Je(z,G1);return K1(K,Y)}return K}).getOrThunk(()=>K.concat([Q])),[]);return G.length>0&&q1(G[G.length-1])&&G.pop(),G})(k.contextMenus,E,_)},a,m,y)};e.on("init",()=>{const v="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");e.on(v,g),e.on("longpress contextmenu",h)})},Jt=xa([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),bn=e=>r=>r.translate(-e.left,-e.top),Kn=e=>r=>r.translate(e.left,e.top),En=e=>(r,a)=>qt(e,(l,m)=>m(l),Go(r,a)),Yn=(e,r,a)=>e.fold(En([Kn(a),bn(r)]),En([bn(r)]),En([])),tr=(e,r,a)=>e.fold(En([Kn(a)]),En([]),En([Kn(r)])),Vg=(e,r,a)=>e.fold(En([]),En([bn(a)]),En([Kn(r),bn(a)])),zR=(e,r,a)=>{const l=e.fold((m,g)=>({position:N.some("absolute"),left:N.some(m+"px"),top:N.some(g+"px")}),(m,g)=>({position:N.some("absolute"),left:N.some(m-a.left+"px"),top:N.some(g-a.top+"px")}),(m,g)=>({position:N.some("fixed"),left:N.some(m+"px"),top:N.some(g+"px")}));return{right:N.none(),bottom:N.none(),...l}},Xx=(e,r,a,l)=>{const m=(g,h)=>(v,y)=>{const _=g(r,a,l);return h(v.getOr(_.left),y.getOr(_.top))};return e.fold(m(Vg,Y1),m(tr,vh),m(Yn,ev))},Y1=Jt.offset,vh=Jt.absolute,ev=Jt.fixed,kM=(e,r)=>{const a=zn(e,r);return sn(a)?NaN:parseInt(a,10)},EM=(e,r,a,l)=>Ps(e,m=>((v,y,_,k,E,A)=>{const B=tr(v,E,A),L=tr(y,E,A);return Math.abs(B.left-L.left)<=_&&Math.abs(B.top-L.top)<=k})(r,m.sensor,m.range.left,m.range.top,a,l)?N.some({output:Xx(m.output,r,a,l),extra:m.extra}):N.none());var HI=Object.freeze({__proto__:null,snapTo:(e,r,a,l)=>{const m=r.getTarget(e.element);if(r.repositionTarget){const g=Qr(e.element),h=$r(g),v=nR(m),y={coord:Xx((k=l).output,k.output,h,v),extra:k.extra},_=zR(y.coord,0,v);oi(m,_)}var k}});const rM="data-initial-z-index",TM=(e,r)=>{var a;e.getSystem().addToGui(r),Zs((a=r).element).filter(ho).each(l=>{Jn(l,"z-index").each(m=>{ro(l,rM,m)}),lo(l,"z-index",Zr(a.element,"z-index"))})},VI=e=>{Zs(e.element).filter(ho).each(a=>{ur(a,rM).fold(()=>mn(a,"z-index"),l=>lo(a,"z-index",l)),Ht(a,rM)}),e.getSystem().removeFromGui(e)},OM=(e,r,a)=>e.getSystem().build(sa.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:a}));var UI=cn("snaps",[_e("getSnapPoints"),Uo("onSensor"),_e("leftAttr"),_e("topAttr"),fe("lazyViewport",Sr),fe("mustSnap",!1)]);const sM=[fe("useFixed",Ve),_e("blockerClass"),fe("getTarget",ut),fe("onDrag",Qe),fe("repositionTarget",!0),fe("onDrop",Qe),Qn("getBounds",Sr),UI],AM=(e,r)=>({bounds:e.getBounds(),height:Ra(r.element),width:jr(r.element)}),aM=(e,r,a,l,m)=>{const g=a.update(l,m),h=a.getStartData().getOrThunk(()=>AM(r,e));g.each(v=>{((y,_,k,E)=>{const A=_.getTarget(y.element);if(_.repositionTarget){const B=Qr(y.element),L=$r(B),G=nR(A),K=(e=>{return(r=Jn(e,"left"),a=Jn(e,"top"),l=Jn(e,"position"),r.isSome()&&a.isSome()&&l.isSome()?N.some((m=r.getOrDie(),g=a.getOrDie(),h=l.getOrDie(),("fixed"===h?ev:Y1)(parseInt(m,10),parseInt(g,10)))):N.none()).getOrThunk(()=>{const m=ca(e);return vh(m.left,m.top)});var m,g,h,r,a,l})(A),Q=(z=y,Z=K,te=L,ae=G,Ce=E,De=k,((Fe,Ie,ot,ht,At)=>{const Qt=At.bounds,oo=tr(Ie,ot,ht),Ao=Ni(oo.left,Qt.x,Qt.x+Qt.width-At.width),Pn=Ni(oo.top,Qt.y,Qt.y+Qt.height-At.height),ir=vh(Ao,Pn);return Ie.fold(()=>{const no=Vg(ir,ot,ht);return Y1(no.left,no.top)},ee(ir),()=>{const no=Yn(ir,ot,ht);return ev(no.left,no.top)})})(0,_.snaps.fold(()=>{const Fe=(ot=Ce.left,ht=Ce.top,Z.fold((Qt,oo)=>Y1(Qt+ot,oo+ht),(Qt,oo)=>vh(Qt+ot,oo+ht),(Qt,oo)=>ev(Qt+ot,oo+ht)));var ot,ht;const At=Yn(Fe,te,ae);return ev(At.left,At.top)},Fe=>{const Ie=((e,r,a,l,m,g)=>{const h=(E=a,A=l,((B,L)=>{const G=B.element,K=kM(G,L.leftAttr),Q=kM(G,L.topAttr);return isNaN(K)||isNaN(Q)?N.none():N.some(Go(K,Q))})(e,r).fold(()=>E,B=>ev(B.left+A.left,B.top+A.top))),v=r.mustSnap?((e,r,a,l,m)=>{const g=r.getSnapPoints(e);return EM(g,a,l,m).orThunk(()=>qt(g,(v,y)=>{const k=((E,A,B,L,G,K)=>{const Q=tr(E,G,K),W=tr(A,G,K),z=Math.abs(Q.left-W.left),Y=Math.abs(Q.top-W.top);return Go(z,Y)})(a,y.sensor,0,0,l,m);return v.deltas.fold(()=>({deltas:N.some(k),snap:N.some(y)}),E=>(k.left+k.top)/2<=(E.left+E.top)/2?{deltas:N.some(k),snap:N.some(y)}:v)},{deltas:N.none(),snap:N.none()}).snap.map(v=>({output:Xx(v.output,a,l,m),extra:v.extra})))})(e,r,h,m,g):((e,r,a,l,m)=>{const g=r.getSnapPoints(e);return EM(g,a,l,m)})(e,r,h,m,g),y=Yn(h,m,g);var E,A;return((_,k,E)=>{const A=_.element;ro(A,k.leftAttr,E.left+"px"),ro(A,k.topAttr,E.top+"px")})(e,r,y),v.fold(()=>({coord:ev(y.left,y.top),extra:N.none()}),_=>({coord:_.output,extra:_.extra}))})(z,Fe,Z,Ce,te,ae);return Ie.extra.each(ot=>{Fe.onSensor(z,ot)}),Ie.coord}),te,ae,De)),W=zR(Q,0,G);oi(A,W)}var z,Z,te,ae,Ce,De;_.onDrag(y,A,E)})(e,r,h,v)})},NM=(e,r,a,l)=>{r.each(VI),a.snaps.each(g=>{((y,_)=>{const k=y.element;Ht(k,_.leftAttr),Ht(k,_.topAttr)})(e,g)});const m=a.getTarget(e.element);l.reset(),a.onDrop(e,m)},iM=e=>(r,a)=>{const l=m=>{a.setStartData(AM(r,m))};return Cn([Me(cv(),m=>{a.getStartData().each(()=>l(m))}),...e(r,a,l)])};var $I=Object.freeze({__proto__:null,getData:e=>N.from(Go(e.x,e.y)),getDelta:(e,r)=>Go(r.left-e.left,r.top-e.top)});const RM=(e,r,a)=>[Me(ua(),(l,m)=>{if(0!==m.event.raw.button)return;m.stop();const g=()=>NM(l,N.some(y),e,r),h=ka(g,200),v={drop:g,delayDrop:h.schedule,forceDrop:g,move:_=>{h.cancel(),aM(l,e,r,$I,_)}},y=OM(l,e.blockerClass,(_=v,Cn([Me(ua(),_.forceDrop),Me(Qg(),_.drop),Me(Nd(),(k,E)=>{_.move(E.event)}),Me(Jg(),_.delayDrop)])));var _;a(l),TM(l,y)})],WI=[...sM,In("dragger",{handlers:iM(RM)})];var DM=Object.freeze({__proto__:null,getData:e=>{const r=e.raw.touches;return 1===r.length?(a=>{const l=a[0];return N.some(Go(l.clientX,l.clientY))})(r):N.none()},getDelta:(e,r)=>Go(r.left-e.left,r.top-e.top)});const BM=(e,r,a)=>{const l=Un(),m=g=>{NM(g,l.get(),e,r),l.clear()};return[Me(vl(),(g,h)=>{h.stop();const v=()=>m(g),y={drop:v,delayDrop:Qe,forceDrop:v,move:k=>{aM(g,e,r,DM,k)}},_=OM(g,e.blockerClass,(k=y,Cn([Me(vl(),k.forceDrop),Me($l(),k.drop),Me(Su(),k.drop),Me(bc(),(E,A)=>{k.move(A.event)})])));var k;l.set(_),a(g),TM(g,_)}),Me(bc(),(g,h)=>{h.stop(),aM(g,e,r,DM,h.event)}),Me($l(),(g,h)=>{h.stop(),m(g)}),Me(Su(),m)]},qI=WI,GI=[...sM,In("dragger",{handlers:iM(BM)})],KI=[...sM,In("dragger",{handlers:iM((e,r,a)=>[...RM(e,r,a),...BM(e,r,a)])})];var YI=Object.freeze({__proto__:null,mouse:qI,touch:GI,mouseOrTouch:KI}),XI=Object.freeze({__proto__:null,init:()=>{let e=N.none(),r=N.none();const a=ee({});return za({readState:a,reset:()=>{e=N.none(),r=N.none()},update:(l,m)=>l.getData(m).bind(g=>((h,v)=>{const y=e.map(_=>h.getDelta(_,v));return e=N.some(v),y})(l,g)),getStartData:()=>r,setStartData:l=>{r=N.some(l)}})}});const tv=xE({branchKey:"mode",branches:YI,name:"dragging",active:{events:(e,r)=>e.dragger.handlers(e,r)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:N.from(e.extra)})},state:XI,apis:HI}),MM=(e,r,a,l,m,g)=>e.fold(()=>tv.snap({sensor:vh(a-20,l-20),range:Go(m,g),output:vh(N.some(a),N.some(l)),extra:{td:r}}),h=>{const v=a-20,y=l-20,_=h.element.dom.getBoundingClientRect();return tv.snap({sensor:vh(v,y),range:Go(40,40),output:vh(N.some(a-_.width/2),N.some(l-_.height/2)),extra:{td:r}})}),IM=(e,r,a)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(l,m)=>{const g=m.td;var h,v;h=r.get(),v=g,h.exists(y=>Jo(y,v))||(r.set(g),a(g))},mustSnap:!0}),PM=e=>dn(Bs.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ve([tv.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),lb.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}));var yh;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(yh||(yh={}));const LM=(e,r,a)=>{const l=oe(e.getContainer()),m=((g,h,v,y,_)=>{const k={height:ue(y+h.top,Oy(g),mC(g))};return v===yh.Both&&(k.width=ue(_+h.left,Df(g),Qu(g))),k})(e,r,a,gr(l),ln(l));gn(m,(g,h)=>{qo(g)&&lo(l,h,ie(g))}),e.dispatch("ResizeEditor")},HR=(e,r,a,l)=>{const m=Go(20*a,20*l);return LM(e,m,r),N.some(!0)},ZI=(e,r)=>({dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const l=(()=>{const l=[],m=bC(e),g=Pp(e),h=Hy(e)||e.hasPlugin("wordcount");return g&&l.push(((e,r,a)=>{var l;const m=null!==(l={}.delimiter)&&void 0!==l?l:"\u203a";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ve([pt.config({mode:"flow",selector:"div[role=button]"}),Ut.config({disabled:a.isDisabled}),cs(),er.config({}),so.config({}),go("elementPathEvents",[qn((g,h)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>pt.focusIn(g)),e.on("NodeChange",v=>{const y=(k=>{const E=[];let A=k.length;for(;A-- >0;){const L=k[A];if(1===L.nodeType&&"BR"!==(B=L).nodeName&&!B.getAttribute("data-mce-bogus")&&"bookmark"!==B.getAttribute("data-mce-type")){const G=rB(e,L);if(G.isDefaultPrevented()||E.push({name:G.name,element:L}),G.isPropagationStopped())break}}var B;return E})(v.parents),_=y.length>0?qt(y,(k,E,A)=>{const B=(G=E.element,Bs.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":K=A,"aria-level":K+1}},components:[Or(E.name)],action:Q=>{e.focus(),e.selection.select(G),e.nodeChanged()},buttonBehaviours:ve([lg(a.isDisabled),cs()])}));var G,K;return k.concat(0===A?[B]:[{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Or(` ${m} `)]},B])},[]):[];so.set(g,_)})})])]),components:[]}})(e,0,r)),m&&l.push((()=>{const v=QC("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Or(Mi.translate(["Press {0} for help",v]))]}})()),h&&l.push((()=>{const v=[];return e.hasPlugin("wordcount")&&v.push(((y,_)=>{const k=(E,A,B)=>so.set(E,[Or(_.translate(["{0} "+B,A[B]]))]);return Bs.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ve([lg(_.isDisabled),cs(),er.config({}),so.config({}),at.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),go("wordcount-events",[si(E=>{const A=at.getValue(E),B="words"===A.mode?"characters":"words";at.setValue(E,{mode:B,count:A.count}),k(E,A.count,B)}),qn(E=>{y.on("wordCountUpdate",A=>{const{mode:B}=at.getValue(E);at.setValue(E,{mode:B,count:A.wordCount}),k(E,A.wordCount,B)})})])]),eventOrder:{[Ki()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,r)),Hy(e)&&v.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Mi.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:ve([$t.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:v}})()),l.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{const v="tox-statusbar__text-container--flex-start",y="tox-statusbar__text-container--flex-end";if(m){const _="tox-statusbar__text-container-3-cols";return h||g?h&&!g?[_,y]:[_,v]:[_,"tox-statusbar__text-container--space-around"]}return[h&&!g?y:v]})()]},components:l}]:[]})(),m=((g,h)=>{const v=(_=>{const k=Vy(_);return!1===k?yh.None:"both"===k?yh.Both:yh.Vertical})(g);if(v===yh.None)return N.none();const y=v===yh.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return N.some(El("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:h.translate("Resize"),"aria-label":h.translate(y)},behaviours:[tv.config({mode:"mouse",repositionTarget:!1,onDrag:(_,k,E)=>LM(g,E,v),blockerClass:"tox-blocker"}),pt.config({mode:"special",onLeft:()=>HR(g,v,-1,0),onRight:()=>HR(g,v,1,0),onUp:()=>HR(g,v,0,-1),onDown:()=>HR(g,v,0,1)}),er.config({}),$t.config({})]},h.icons))})(e,r);return l.concat(m.toArray())})()}),FM=(e,r)=>r.get().getOrDie(`UI for ${e} has not been rendered`),eP=(e,r)=>{const a=e.inline,l=a?uo:xt,m=Fp(e)?iR:HB,g=(()=>{const te=Un(),ae=Un(),Ce=Un();return{dialogUi:te,popupUi:ae,mainUi:Ce,getUiMotherships:()=>{const De=te.get().map(Ie=>Ie.mothership),Fe=ae.get().map(Ie=>Ie.mothership);return De.fold(()=>Fe.toArray(),Ie=>Fe.fold(()=>[Ie],ot=>Jo(Ie.element,ot.element)?[Ie]:[Ie,ot]))},lazyGetInOuterOrDie:(De,Fe)=>()=>Ce.get().bind(Ie=>Fe(Ie.outerContainer)).getOrDie(`Could not find ${De} element in OuterContainer`)}})(),h=Un(),v=Un(),y=Un(),_=ta().deviceType.isTouch()?["tox-platform-touch"]:[],k=qy(e),E=Mp(e),A=dn({dom:{tag:"div",classes:["tox-anchorbar"]}}),B=dn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),L=()=>g.mainUi.get().map(te=>te.outerContainer).bind(_n.getHeader),G=g.lazyGetInOuterOrDie("anchor bar",A.getOpt),K=g.lazyGetInOuterOrDie("bottom anchor bar",B.getOpt),Q=g.lazyGetInOuterOrDie("toolbar",_n.getToolbar),W=g.lazyGetInOuterOrDie("throbber",_n.getThrobber),z=((te,ae,Ce,De)=>{const Fe=Ot(!1),Ie=(no=>{const Ks=Ot(qy(no)?"bottom":"top");return{isPositionedAtTop:()=>"top"===Ks.get(),getDockingMode:Ks.get,setDockingMode:Ks.set}})(ae),ot={icons:()=>ae.ui.registry.getAll().icons,menuItems:()=>ae.ui.registry.getAll().menuItems,translate:Mi.translate,isDisabled:()=>ae.mode.isReadOnly()||!ae.ui.isEnabled(),getOption:ae.options.get},ht=(e=>({getHistory:o1,addToHistory:PB,getLinkInformation:()=>{return Fy(r=e)?N.some({targets:Zk(r.getBody()),anchorTop:r1(Mf(r)),anchorBottom:r1(hC(r))}):N.none();var r},getValidationHandler:()=>N.from(Py(e)),getUrlPicker:r=>{return((m,g)=>{const h=(v=>{const y=N.from(pC(v)).filter(n1).map(XN);return Ex(v).fold(Ve,_=>y.fold(un,k=>Rn(k).length>0&&k))})(m);return Js(h)?h?Ex(m):N.none():h[g]?Ex(m):N.none()})(a=e,l=r).map(m=>g=>md(h=>{const v={filetype:l,fieldname:g.fieldname,...N.from(g.meta).getOr({})};m.call(a,(y,_)=>{if(!So(y))throw new Error("Expected value to be string");if(void 0!==_&&!ms(_))throw new Error("Expected meta to be a object");h({value:y,meta:_})},g.value,v)}));var a,l}}))(ae),At=(no=>{const Ks=Mr=>()=>no.formatter.match(Mr),ao=Mr=>()=>{const Ys=no.formatter.get(Mr);return void 0!==Ys?N.some({tag:Ys.length>0&&(Ys[0].inline||Ys[0].block)||"div",styles:no.dom.parseStyle(no.formatter.getCssText(Mr))}):N.none()},Kr=Ot([]),Tn=Ot([]),Ka=Ot(!1);return no.on("PreInit",Mr=>{const Ys=Kk(no),il=Cx(no,Ys,Ks,ao);Kr.set(il)}),no.on("addStyleModifications",Mr=>{const Ys=Cx(no,Mr.items,Ks,ao);Tn.set(Ys),Ka.set(Mr.replace)}),{getData:()=>{const Mr=Ka.get()?[]:Kr.get(),Ys=Tn.get();return Mr.concat(Ys)}}})(ae),Qt={colorPicker:UN(no=ae),hasCustomColors:RB(no),getColors:DB(no),getColorCols:qk(no)},oo=(no=>({isDraggableModal:jN(no)}))(ae),Ao={shared:{providers:ot,anchors:ch(ae,Ce,De,Ie.isPositionedAtTop),header:Ie},urlinput:ht,styles:At,colorinput:Qt,dialog:oo,isContextMenuOpen:()=>Fe.get(),setContextMenuState:no=>Fe.set(no)},Pn={...Ao,shared:{...Ao.shared,interpreter:no=>Vk(no,{},Pn),getSink:te.popup}},ir={...Ao,shared:{...Ao.shared,interpreter:no=>Vk(no,{},ir),getSink:te.dialog}};var no;return{popup:Pn,dialog:ir}})({popup:()=>ko.fromOption(g.popupUi.get().map(te=>te.sink),"(popup) UI has not been rendered"),dialog:()=>ko.fromOption(g.dialogUi.get().map(te=>te.sink),"UI has not been rendered")},e,G,K),Z=te=>{const ae=ie((Ie=>{const ot=Ey(Ie),ht=Oy(Ie),At=mC(Ie);return to(ot).map(Qt=>ue(Qt,ht,At))})(De=e).getOr(Ey(De))),Ce=ie((De=>ze(De).getOr(Ty(De)))(e));var De;return e.inline||(pu("div","width",Ce)&&lo(te.element,"width",Ce),pu("div","height",ae)?lo(te.element,"height",ae):lo(te.element,"height","400px")),ae};return{popups:{backstage:z.popup,getMothership:()=>FM("popups",y)},dialogs:{backstage:z.dialog,getMothership:()=>FM("dialogs",v)},renderUI:()=>{const te=(()=>{const te=(()=>{const Ao={attributes:{[Kw]:k?Pd.BottomToTop:Pd.TopToBottom}},Pn=_n.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:z.popup,onEscape:()=>{e.focus()}}),ir=_n.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:z.popup.shared.getSink,providers:z.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:il=>{e.dispatch("ToggleToolbarDrawer",{state:il})},type:E,lazyToolbar:Q,lazyHeader:()=>L().getOrDie("Could not find header element"),...Ao}),no=_n.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:z.popup.shared.providers,onEscape:()=>{e.focus()},type:E}),Ks=Lp(e),ao=Lf(e),Kr=If(e),Tn=fC(e),Ka=_n.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ys=Tn?[Ka,Pn]:[Pn];return _n.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ks||ao||Kr?[]:["tox-editor-header--empty"]),...Ao},components:Rt([Kr?Ys:[],Ks?[no]:ao?[ir]:[],sg(e)?[]:[A.asSpec()]]),sticky:Fp(e),editor:e,sharedBackstage:z.popup.shared})})(),ae={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[_n.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),_n.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},Ce=_n.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:z.popup}),De=_n.parts.viewWrapper({backstage:z.popup}),Fe=zy(e)&&!a?N.some(ZI(e,z.popup.shared.providers)):N.none(),Ie=Rt([k?[]:[te],a?[]:[ae],k?[te]:[]]),ot=_n.parts.editorContainer({components:Rt([Ie,a?[]:[B.asSpec(),...Fe.toArray()]])}),ht=zf(e),At={role:"application",...Mi.isRtl()?{dir:"rtl"}:{},...ht?{"aria-hidden":"true"}:{}},Qt=na(_n.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(k?["tox-tinymce--toolbar-bottom"]:[]).concat(_),styles:{visibility:"hidden",...ht?{opacity:"0",border:"0"}:{}},attributes:At},components:[ot,...a?[]:[De],Ce],behaviours:ve([cs(),Ut.config({disableClass:"tox-tinymce--disabled"}),pt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),oo=ab(Qt);return h.set(oo),{mothership:oo,outerContainer:Qt}})(),ae=(()=>{const De=Ff(e),Fe=Jo(va(),De)&&"grid"===Zr(De,"display"),Ie={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(_),attributes:{...Mi.isRtl()?{dir:"rtl"}:{}}},behaviours:ve([ma.config({useFixed:()=>m.isDocked(L)})])},ot={dom:{styles:{width:document.body.clientWidth+"px"}},events:Cn([Me(kh(),Qt=>{lo(Qt.element,"width",document.body.clientWidth+"px")})])},ht=na(Dn(Ie,Fe?ot:{})),At=ab(ht);return v.set(At),{sink:ht,mothership:At}})(),Ce=Vd(e)?(()=>{const De={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(_),attributes:{...Mi.isRtl()?{dir:"rtl"}:{}}},behaviours:ve([ma.config({useFixed:()=>m.isDocked(L),getBounds:()=>r.getPopupSinkBounds()})])},Fe=na(De),Ie=ab(Fe);return y.set(Ie),{sink:Fe,mothership:Ie}})():(y.set((De=ae).mothership),De);var De;return g.dialogUi.set(ae),g.popupUi.set(Ce),g.mainUi.set(te),(De=>{const{mainUi:Fe,popupUi:Ie,uiMotherships:ot}=De;pn(By(e),(ao,Kr)=>{e.ui.registry.addGroupToolbarButton(Kr,ao)});const{buttons:ht,menuItems:At,contextToolbars:Qt,sidebars:oo,views:Ao}=e.ui.registry.getAll(),Pn=Wy(e),ir={menuItems:At,menus:xC(e),menubar:Bf(e),toolbar:Pn.getOrThunk(()=>Ip(e)),allowToolbarGroups:E===tl.floating,buttons:ht,sidebar:oo,views:Ao};var no;no=Fe.outerContainer,e.addShortcut("alt+F9","focus menubar",()=>{_n.focusMenubar(no)}),e.addShortcut("alt+F10","focus toolbar",()=>{_n.focusToolbar(no)}),e.addCommand("ToggleToolbarDrawer",(ao,Kr)=>{Kr?.skipFocus?_n.toggleToolbarDrawerWithoutFocusing(no):_n.toggleToolbarDrawer(no)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>_n.isToolbarDrawerToggled(no)),((ao,Kr,Tn)=>{const Ka=(Ln,Ch)=>{yt([Kr,...Tn],cu=>{cu.broadcastEvent(Ln,Ch)})},Mr=(Ln,Ch)=>{yt([Kr,...Tn],cu=>{cu.broadcastOn([Ln],Ch)})},Ys=Ln=>Mr(Ld(),{target:Ln.target}),il=wu(),Zx=$a(il,"touchstart",Ys),ew=$a(il,"touchmove",Ln=>Ka(lv(),Ln)),xh=$a(il,"touchend",Ln=>Ka(iw(),Ln)),Ug=$a(il,"mousedown",Ys),X1=$a(il,"mouseup",Ln=>{0===Ln.raw.button&&Mr(Fv(),{target:Ln.target})}),wh=Ln=>Mr(Ld(),{target:oe(Ln.target)}),jg=Ln=>{0===Ln.button&&Mr(Fv(),{target:oe(Ln.target)})},nv=()=>{yt(ao.editorManager.get(),Ln=>{ao!==Ln&&Ln.dispatch("DismissPopups",{relatedTarget:ao})})},rv=Ln=>Ka(cv(),qw(Ln)),J1=Ln=>{Mr(vp(),{}),Ka(kh(),qw(Ln))},jR=Ur(oe(ao.getElement())),Q1=Ww(jR,"scroll",Ln=>{requestAnimationFrame(()=>{if(null!=ao.getContainer()){const Ch=sm(ao,Kr.element).map(cu=>[cu.element,...cu.others]).getOr([]);Vo(Ch,cu=>Jo(cu,Ln.target))&&(ao.dispatch("ElementScroll",{target:Ln.target.dom}),Ka(dv(),Ln))}})}),_h=()=>Mr(vp(),{}),$g=Ln=>{Ln.state&&Mr(Ld(),{target:oe(ao.getContainer())})},Wg=Ln=>{Mr(Ld(),{target:oe(Ln.relatedTarget.getContainer())})};ao.on("PostRender",()=>{ao.on("click",wh),ao.on("tap",wh),ao.on("mouseup",jg),ao.on("mousedown",nv),ao.on("ScrollWindow",rv),ao.on("ResizeWindow",J1),ao.on("ResizeEditor",_h),ao.on("AfterProgressState",$g),ao.on("DismissPopups",Wg)}),ao.on("remove",()=>{ao.off("click",wh),ao.off("tap",wh),ao.off("mouseup",jg),ao.off("mousedown",nv),ao.off("ScrollWindow",rv),ao.off("ResizeWindow",J1),ao.off("ResizeEditor",_h),ao.off("AfterProgressState",$g),ao.off("DismissPopups",Wg),Ug.unbind(),Zx.unbind(),ew.unbind(),xh.unbind(),X1.unbind(),Q1.unbind()}),ao.on("detach",()=>{yt([Kr,...Tn],sT),yt([Kr,...Tn],Ln=>Ln.destroy())})})(e,Fe.mothership,ot),m.setup(e,z.popup.shared,L),((e,r)=>{var a;a=e,yt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],l=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:hi(a,l.cmd),onSetup:dg(a,l.name)})}),a.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ws(a),onAction:hi(a,"JustifyNone")}),(e=>{var r,a;(a=>{oc.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(l,m)=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:dg(a,l.name),onAction:au(a,l.name)})});for(let l=1;l<=6;l++){const m="h"+l;a.ui.registry.addToggleButton(m,{text:m.toUpperCase(),tooltip:"Heading "+l,onSetup:dg(a,m),onAction:au(a,m)})}})(r=e),a=r,oc.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],l=>{a.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onAction:hi(a,l.action)})}),oc.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],l=>{a.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:Ws(a),onAction:hi(a,l.action)})}),(a=>{oc.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],l=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:hi(a,l.action),onSetup:dg(a,l.name)})})})(r),(r=>{oc.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],a=>{r.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onAction:hi(r,a.action)})}),oc.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],a=>{r.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onSetup:Ws(r),onAction:hi(r,a.action)})}),r.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ws(r),onAction:au(r,"code")})})(e)})(e),((a,l)=>{((m,g)=>{const h=Pg(0,g,Jb(m));m.ui.registry.addNestedMenuItem("align",{text:g.shared.providers.translate("Align"),onSetup:Ws(m),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})})(a,l),((m,g)=>{const h=Pg(0,g,n(m));m.ui.registry.addNestedMenuItem("fontfamily",{text:g.shared.providers.translate("Fonts"),onSetup:Ws(m),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})})(a,l),((m,g)=>{const h={type:"advanced",...g.styles},v=Pg(0,g,R(m,h));m.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Ws(m),getSubmenuItems:()=>v.items.validateItems(v.getStyleItems())})})(a,l),((m,g)=>{const h=Pg(0,g,BR(m));m.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Ws(m),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})})(a,l),((m,g)=>{const h=Pg(0,g,O(m));m.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Ws(m),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})})(a,l)})(e,r),(a=>{var l;(l=a).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:zg(l,"hasUndo"),onAction:hi(l,"undo")}),l.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:zg(l,"hasRedo"),onAction:hi(l,"redo")}),(l=>{l.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:zg(l,"hasUndo"),onAction:hi(l,"undo")}),l.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:zg(l,"hasRedo"),onAction:hi(l,"redo")})})(a)})(e),(a=>{var v;(v=a).addCommand("mceApplyTextcolor",(y,_)=>{var k,E,A;E=y,A=_,(k=v).undoManager.transact(()=>{k.focus(),k.formatter.apply(E,{value:A}),k.nodeChanged()})}),v.addCommand("mceRemoveTextcolor",y=>{var _,k;k=y,(_=v).undoManager.transact(()=>{_.focus(),_.formatter.remove(k,{value:null},void 0,!0),_.nodeChanged()})});const l=sB(a),m=aB(a),g=Ot(l),h=Ot(m);C0(a,"forecolor","forecolor",g),C0(a,"backcolor","hilitecolor",h),hS(a,"forecolor","forecolor","Text color",g),hS(a,"backcolor","hilitecolor","Background color",h)})(e),(a=>{var l;(l=a).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:hi(l,"mceToggleVisualAid")}),(l=>{l.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:wr(l),onAction:hi(l,"mceToggleVisualAid")})})(a)})(e),(a=>{var l;(l=a).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Fg(l),onAction:hi(l,"outdent")}),l.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ws(l),onAction:hi(l,"indent")})})(e),(e=>{var r;al(e,{name:"lineheight",text:"Line height",icon:"line-height",getOptions:vC,hash:a=>{return(l=a,c(l,["fixed","relative","empty"]).map(({value:g,unit:h})=>g+h)).getOr(a);var l},display:ut,watcher:(a,l,m)=>a.formatter.formatChanged("lineheight",m,!1,{value:l}).unbind,getCurrent:a=>N.from(a.queryCommandValue("LineHeight")),setCurrent:(a,l)=>a.execCommand("LineHeight",!1,l),onToolbarSetup:Ws(r=e),onMenuSetup:Ws(r)}),(r=>N.from(Dy(r)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ee(a),hash:l=>sn(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,m,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:m.code,customValue:null!==(h=m.customCode)&&void 0!==h?h:null}).unbind},getCurrent:l=>{const m=oe(l.selection.getNode());return Xg(m,g=>N.some(g).filter(ho).bind(h=>ur(h,"lang").map(v=>({code:v,customCode:ur(h,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(l,m)=>l.execCommand("Lang",!1,m),onToolbarSetup:l=>{const m=hp();return l.setActive(r.formatter.match("lang",{},void 0,!0)),m.set(r.formatter.formatChanged("lang",l.setActive,!0)),b0(m.clear,Ws(r)(l))},onMenuSetup:Ws(r)})))(e).each(r=>al(e,r))})(e),(a=>{const l=Ot(Uy(a)),m=()=>a.execCommand("mceTogglePlainTextPaste");a.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:m,onSetup:hh(a,l)}),a.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:m,onSetup:hh(a,l)})})(e)})(e,z.popup),Nt(e,z.popup.shared.getSink,z.popup),(ao=>{const{sidebars:Kr}=ao.ui.registry.getAll();yt(Rn(Kr),Tn=>{const Ka=Kr[Tn],Mr=()=>Nr(N.from(ao.queryCommandValue("ToggleSidebar")),Tn);ao.ui.registry.addToggleButton(Tn,{icon:Ka.icon,tooltip:Ka.tooltip,onAction:Ys=>{ao.execCommand("ToggleSidebar",!1,Tn),Ys.setActive(Mr())},onSetup:Ys=>{Ys.setActive(Mr());const il=()=>Ys.setActive(Mr());return ao.on("ToggleSidebar",il),()=>{ao.off("ToggleSidebar",il)}}})})})(e),((e,r,a)=>{const l=Ot(!1),m=Un(),g=v=>{var y;l.get()&&("focusin"!==(y=v).type||!(y.composed?cr(y.composedPath()):N.from(y.target)).map(oe).filter(ho).exists(_=>Ha(_,"mce-pastebin")))&&(v.preventDefault(),Ix(r()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",g),e.on("BeforeExecCommand",v=>{"mcefocus"===v.command.toLowerCase()&&!0!==v.value&&g(v)})});const h=v=>{v!==l.get()&&(l.set(v),((y,_,k,E)=>{const A=_.element;if(((B,L)=>{const G="tabindex",K=`data-mce-${G}`;N.from(B.iframeElement).map(oe).each(Q=>{L?(ur(Q,G).each(W=>ro(Q,K,W)),ro(Q,G,-1)):(Ht(Q,G),ur(Q,K).each(W=>{ro(Q,G,W),Ht(Q,K)}))})})(y,k),k)Lc.block(_,(B=E,(L,G)=>({dom:{tag:"div",attributes:{"aria-label":B.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ld('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))),mn(A,"display"),Ht(A,"aria-hidden"),y.hasFocus()&&Ix(_);else{const B=_o.getCurrent(_).exists(L=>Rs(L.element));Lc.unblock(_),lo(A,"display","none"),ro(A,"aria-hidden","true"),B&&y.focus()}var B})(e,r(),v,a.providers),e.dispatch("AfterProgressState",{state:v}))};e.on("ProgressState",v=>{if(m.on(clearTimeout),qo(v.time)){const y=wf.setEditorTimeout(e,()=>h(v.state),v.time);m.set(y)}else h(v.state),m.clear()})})(e,W,z.popup.shared),((e,r,a,l)=>{const m=l.backstage,g=m.shared,h=ta().deviceType.isTouch,v=Un(),y=Un(),_=Un(),k=na((te=>{const ae=Ot([]);return Zn.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:Ce=>{ae.set([]),Zn.getContent(Ce).each(De=>{mn(De.element,"visibility")}),sr(Ce.element,Li),mn(Ce.element,"width")},inlineBehaviours:ve([go("context-toolbar-events",[Ou(ep(),(Ce,De)=>{"width"===De.event.raw.propertyName&&(sr(Ce.element,Li),mn(Ce.element,"width"))}),Me(Gs,(Ce,De)=>{const Fe=Ce.element;mn(Fe,"width");const Ie=ln(Fe);Zn.setContent(Ce,De.event.contents),Zo(Fe,Li);const ot=ln(Fe);lo(Fe,"width",Ie+"px"),Zn.getContent(Ce).each(ht=>{De.event.focus.bind(At=>(wl(At),Ec(Fe))).orThunk(()=>(pt.focusIn(ht),Ji(Ur(Fe))))}),setTimeout(()=>{lo(Ce.element,"width",ot+"px")},0)}),Me(Ea,(Ce,De)=>{Zn.getContent(Ce).each(Fe=>{ae.set(ae.get().concat([{bar:Fe,focus:Ji(Ur(Ce.element))}]))}),Bt(Ce,Gs,{contents:De.event.forwardContents,focus:N.none()})}),Me(sl,(Ce,De)=>{fa(ae.get()).each(Fe=>{ae.set(ae.get().slice(0,ae.get().length-1)),Bt(Ce,Gs,{contents:Yi(Fe.bar),focus:Fe.focus})})})]),pt.config({mode:"special",onEscape:Ce=>fa(ae.get()).fold(()=>te.onEscape(),De=>(nn(Ce,sl),N.some(!0)))})]),lazySink:()=>ko.value(te.sink)})})({sink:a,onEscape:()=>(e.focus(),N.some(!0))})),E=()=>{const te=_.get().getOr("node"),ae=Pt(te)?1:0;return po(e,g,te,ae)},A=()=>!(e.removed||h()&&m.isContextMenuOpen()),B=()=>{if(A()){const te=E(),ae=Nr(_.get(),"node")?(Ce=e,v.get().filter(Fe=>ps(Fe)&&Zt(Fe)).map(Ul).getOrThunk(()=>No(Ce))):No(e);return te.height<=0||!Eo(ae,te,.01)}var Ce;return!0},L=()=>{v.clear(),y.clear(),_.clear(),Zn.hide(k)},G=()=>{if(Zn.isOpen(k)){const te=k.element;mn(te,"display"),B()?lo(te,"display","none"):(y.set(0),Zn.reposition(k))}},K=te=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[te],behaviours:ve([pt.config({mode:"acyclic"}),go("pop-dialog-wrap-events",[qn(ae=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>pt.focusIn(ae))}),xc(ae=>{e.shortcuts.remove("ctrl+F9")})])])}),Q=Rr(()=>((e,r)=>{const a={},l=[],m=[],g={},h={},v=Rn(e);return yt(v,y=>{const _=e[y];var k,E,A;"contextform"===_.type?((k,E)=>{const A=bo(Xt("ContextForm",JD,E));a[k]=A,A.launch.map(B=>{g["form:"+k]={...E.launch,type:"contextformtogglebutton"===B.type?"togglebutton":"button",onAction:()=>{r(A)}}}),"editor"===A.scope?m.push(A):l.push(A),h[k]=A})(y,_):"contexttoolbar"===_.type&&(k=y,(A=E=_,Xt("ContextToolbar",FO,A)).each(B=>{"editor"===E.scope?m.push(B):l.push(B),h[k]=B}))}),{forms:a,inNodeScope:l,inEditorScope:m,lookupTable:h,formNavigators:g}})(r,te=>{const ae=W([te]);Bt(k,Ea,{forwardContents:K(ae)})})),W=te=>{const{buttons:ae}=e.ui.registry.getAll(),Ce={...ae,...Q().formNavigators},De=Mp(e)===tl.scrolling?tl.scrolling:tl.default,Fe=Rt(Je(te,Ie=>"contexttoolbar"===Ie.type?kt(e,{buttons:Ce,toolbar:Ie.items,allowToolbarGroups:!1},l.backstage,N.some(["form:"])):((e,r)=>{const a=e.label.fold(()=>({}),g=>({"aria-label":g})),l=dn(em.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ve([pt.config({mode:"special",onEnter:g=>m.findPrimary(g).map(h=>(Tu(h),!0)),onLeft:(g,h)=>(h.cut(),N.none()),onRight:(g,h)=>(h.cut(),N.none())})])})),m=((g,h,v)=>{const y=Je(h,_=>{return dn((k=g,A=v,"contextformtogglebutton"===(E=_).type?((B,L,G)=>{const{primary:K,...Q}=L.original,W=bo(IO({...Q,type:"togglebutton",onAction:Qe}));return de(W,G,[kn(B,L)])})(k,E,A):((B,L,G)=>{const{primary:K,...Q}=L.original,W=bo(o0({...Q,type:"button",onAction:Qe}));return se(W,G,[kn(B,L)])})(k,E,A)));var k,E,A});return{asSpecs:()=>Je(y,_=>_.asSpec()),findPrimary:_=>Ps(h,(k,E)=>k.primary?N.from(y[E]).bind(A=>A.getOpt(_)).filter(Kt(Ut.isDisabled)):N.none())}})(l,e.commands,r);return[{title:N.none(),items:[l.asSpec()]},{title:N.none(),items:m.asSpecs()}]})(Ie,g.providers)));return nu({type:De,uid:bt("context-toolbar"),initGroups:Fe,onEscape:N.none,cyclicKeying:!0,providers:g.providers})},z=(te,ae)=>{if(Z.cancel(),!A())return;const Ce=W(te),De=te[0].position,Fe=((ot,ht)=>{const At="node"===ot?g.anchors.node(ht):g.anchors.cursor(),Qt=(oo=e,Ao=ot,Pn=h(),ir={lastElement:v.get,isReposition:()=>Nr(y.get(),0),getMode:()=>ma.getMode(a)},"line"===Ao?{bubble:Tc(12,0,Fo),layouts:{onLtr:()=>[Cv],onRtl:()=>[Sa]},overrides:Cs}:{bubble:Tc(0,12,Fo,1/12),layouts:xr(oo,Pn,ir,Ao),overrides:Cs});var oo,Ao,Pn,ir;return Dn(At,Qt)})(De,ae);_.set(De),y.set(1);const Ie=k.element;mn(Ie,"display"),Nr(Xo(ae,v.get(),Jo),!0)||(sr(Ie,ns),ma.reset(a,k)),Zn.showWithinBounds(k,K(Ce),{anchor:Fe,transition:{classes:[ns],mode:"placement"}},()=>N.some(E())),ae.fold(v.clear,v.set),B()&&lo(Ie,"display","none")};let Y=!1;const Z=lk(()=>{!e.hasFocus()||e.removed||Y||(Ha(k.element,ns)?Z.throttle():((te,ae)=>{const Ce=oe(ae.getBody()),De=Ie=>Jo(Ie,Ce),Fe=oe(ae.selection.getNode());return De(Ie=Fe)||ks(Ce,Ie)?((Ie,ot,ht)=>{const At=os(Ie,ot);if(At.contextForms.length>0)return N.some({elem:Ie,toolbars:[At.contextForms[0]]});{const Qt=os(Ie,ht);if(Qt.contextForms.length>0)return N.some({elem:Ie,toolbars:[Qt.contextForms[0]]});if(At.contextToolbars.length>0||Qt.contextToolbars.length>0){const oo=(Ao=>{if(Ao.length<=1)return Ao;{const Pn=ao=>Vo(Ao,Kr=>Kr.position===ao),ir=ao=>st(Ao,Kr=>Kr.position===ao),no=Pn("selection"),Ks=Pn("node");if(no||Ks){if(Ks&&no){const ao=ir("node"),Kr=Je(ir("selection"),Tn=>({...Tn,position:"node"}));return ao.concat(Kr)}return ir(no?"selection":"node")}return ir("line")}})(At.contextToolbars.concat(Qt.contextToolbars));return N.some({elem:Ie,toolbars:oo})}return N.none()}})(Fe,te.inNodeScope,te.inEditorScope).orThunk(()=>((Ie,ot,ht)=>Ie(ot)?N.none():wa(ot,At=>{if(ho(At)){const{contextToolbars:Qt,contextForms:oo}=os(At,ht.inNodeScope),Ao=oo.length>0?oo:(Pn=>{if(Pn.length<=1)return Pn;{const ir=no=>Ee(Pn,Ks=>Ks.position===no);return ir("selection").orThunk(()=>ir("node")).orThunk(()=>ir("line")).map(no=>no.position).fold(()=>[],no=>st(Pn,Ks=>Ks.position===no))}})(Qt);return Ao.length>0?N.some({elem:At,toolbars:Ao}):N.none()}return N.none()},Ie))(De,Fe,te)):N.none();var Ie})(Q(),e).fold(L,te=>{z(te.toolbars,N.some(te.elem))}))},17);e.on("init",()=>{e.on("remove",L),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",G),e.on("click keyup focus SetContent",Z.throttle),e.on(Wt,L),e.on("contexttoolbar-show",te=>{const ae=Q();lt(ae.lookupTable,te.toolbarKey).each(Ce=>{z([Ce],Hr(te.target!==e,te.target)),Zn.getContent(k).each(pt.focusIn)})}),e.on("focusout",te=>{wf.setEditorTimeout(e,()=>{Ec(a.element).isNone()&&Ec(k.element).isNone()&&L()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&L()}),e.on("AfterProgressState",te=>{te.state?L():e.hasFocus()&&Z.throttle()}),e.on("dragstart",()=>{Y=!0}),e.on("dragend drop",()=>{Y=!1}),e.on("NodeChange",te=>{Ec(k.element).fold(Z.throttle,Qe)})})})(e,Qt,Ie.sink,{backstage:z.popup}),((e,r)=>{const a=Ot([]),l=Ot([]),m=Ot(!1),g=Un(),h=Un(),v=W=>{const z=Ul(W);return MM(E.getOpt(r),W,z.x,z.y,z.width,z.height)},y=W=>{const z=Ul(W);return MM(A.getOpt(r),W,z.right,z.bottom,z.width,z.height)},_=IM(()=>Je(a.get(),W=>v(W)),g,W=>{h.get().each(z=>{e.dispatch("TableSelectorChange",{start:W,finish:z})})}),k=IM(()=>Je(l.get(),W=>y(W)),h,W=>{g.get().each(z=>{e.dispatch("TableSelectorChange",{start:z,finish:W})})}),E=PM(_),A=PM(k),B=na(E.asSpec()),L=na(A.asSpec()),G=(W,z,Y,Z)=>{const te=Y(z);tv.snapTo(W,te),((ae,Ce,De,Fe)=>{const Ie=Ce.dom.getBoundingClientRect();mn(ae.element,"display");const ot=Hi(oe(e.getBody())).dom.innerHeight;(Ie[Z]<0||Ie[Z]>ot)&&lo(ae.element,"display","none")})(W,z)},K=W=>G(B,W,v,"top"),Q=W=>G(L,W,y,"bottom");ta().deviceType.isTouch()&&(e.on("TableSelectionChange",W=>{m.get()||(Fm(r,B),Fm(r,L),m.set(!0)),g.set(W.start),h.set(W.finish),W.otherCells.each(z=>{a.set(z.upOrLeftCells),l.set(z.downOrRightCells),K(W.start),Q(W.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{g.get().each(K),h.get().each(Q)}),e.on("TableSelectionClear",()=>{m.get()&&(_l(B),_l(L),m.set(!1)),g.clear(),h.clear()}))})(e,Ie.sink);const Ks={targetNode:e.getElement(),height:Z(Fe.outerContainer)};return l.render(e,De,ir,z.popup,Ks)})({popupUi:Ce,dialogUi:ae,mainUi:te,uiMotherships:g.getUiMotherships()})}}},tP=ee([_e("lazySink"),fo("dragBlockClass"),Qn("getBounds",Sr),fe("useTabstopAt",un),fe("firstTabstop",0),fe("eventOrder",{}),ys("modalBehaviours",[pt]),ii("onExecute"),Ph("onEscape")]),lM={sketch:ut},oP=ee([mi({name:"draghandle",overrides:(e,r)=>({behaviours:ve([tv.config({mode:"mouse",getTarget:a=>Xi(a,'[role="dialog"]').getOr(a),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(r,null,2)).message),getBounds:e.getDragBounds})])})}),ga({schema:[_e("dom")],name:"title"}),ga({factory:lM,schema:[_e("dom")],name:"close"}),ga({factory:lM,schema:[_e("dom")],name:"body"}),mi({factory:lM,schema:[_e("dom")],name:"footer"}),ls({factory:{sketch:(e,r)=>({...e,dom:r.dom,components:r.components})},schema:[fe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),fe("components",[])],name:"blocker"})]),Ms=$s({name:"ModalDialog",configFields:tP(),partFields:oP(),factory:(e,r,a,l)=>{const m=Un(),g=bt("modal-events"),h={...e.eventOrder,[yc()]:[g].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:r,apis:{show:v=>{m.set(v);const y=e.lazySink(v).getOrDie(),_=l.blocker(),k=y.getSystem().build({..._,components:_.components.concat([Yi(v)]),behaviours:ve([$t.config({}),go("dialog-blocker-events",[Ou(Wl(),()=>{Lc.isBlocked(v)||pt.focusIn(v)})])])});Fm(y,k),pt.focusIn(v)},hide:v=>{m.clear(),Zs(v.element).each(y=>{v.getSystem().getByDom(y).each(_=>{_l(_)})})},getBody:v=>rd(v,e,"body"),getFooter:v=>fn(v,e,"footer"),setIdle:v=>{Lc.unblock(v)},setBusy:(v,y)=>{Lc.block(v,y)}},eventOrder:h,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ar(e.modalBehaviours,[so.config({}),pt.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),Lc.config({getRoot:m.get}),go(g,[qn(v=>{((y,_)=>{const k=ur(y,"id").fold(()=>{const E=bt("dialog-label");return ro(_,"id",E),E},ut);ro(y,"aria-labelledby",k)})(v.element,rd(v,e,"title").element)})])])}},apis:{show:(e,r)=>{e.show(r)},hide:(e,r)=>{e.hide(r)},getBody:(e,r)=>e.getBody(r),getFooter:(e,r)=>e.getFooter(r),setBusy:(e,r,a)=>{e.setBusy(r,a)},setIdle:(e,r)=>{e.setIdle(r)}}}),nP=je([Br,VC].concat(jp)),rP=he,cM=[qC("button"),_s,qi("align","end",["start","end"]),$d,$o,Pa("buttonType",["primary","secondary"])],zM=[...cM,ws],dM=[hn("type",["submit","cancel","custom"]),...zM],sP=[hn("type",["menu"]),tm,Zy,_s,rr("items",nP),...cM],aP=[...cM,hn("type",["togglebutton"]),Ft("tooltip"),_s,tm,is("active",!1)],iP=xo("type",{submit:dM,cancel:dM,custom:dM,menu:sP,togglebutton:aP}),lP=[Br,ws,hn("level",["info","warn","error","success"]),BO,fe("url","")],cP=je(lP),dP=[Br,ws,$o,qC("button"),_s,ec,Pa("buttonType",["primary","secondary","toolbar"]),$d],uP=je(dP),Jx=[Br,VC],lu=Jx.concat([WC]),mP=Jx.concat([UC,$o]),gP=je(mP),pP=he,hP=lu.concat([Gf("auto")]),fP=je(hP),bP=U([ig,ws,BO]),vP=lu.concat([oa("storageKey","default")]),yP=je(vP),xP=ge,wP=je(lu),_P=ge,CP=Jx.concat([oa("tag","textarea"),Ft("scriptId"),Ft("scriptUrl"),Dr("settings",void 0,Te)]),SP=Jx.concat([oa("tag","textarea"),on("init")]),kP=Vt(e=>Xt("customeditor.old",Ct(SP),e).orThunk(()=>Xt("customeditor.new",Ct(CP),e))),EP=ge,TP=je(lu),OP=Do(We),AP=e=>[Br,Wn("columns"),e],NP=[Br,Ft("html"),qi("presets","presentation",["presentation","document"])],RP=je(NP),DP=lu.concat([is("border",!1),is("sandboxed",!0),is("streamContent",!1),is("transparent",!0)]),BP=je(DP),MP=ge,IP=je(Jx.concat([fr("height")])),PP=je([Ft("url"),es("zoom"),es("cachedWidth"),es("cachedHeight")]),LP=lu.concat([fr("inputMode"),fr("placeholder"),is("maximized",!1),$o]),FP=je(LP),zP=ge,HP=e=>[Br,UC,e,qi("align","start",["start","center","end"])],VP=[ws,ig],UP=[ws,rr("items",$n(0,()=>HM))],HM=St([je(VP),je(UP)]),jP=lu.concat([rr("items",HM),$o]),$P=je(jP),WP=ge,qP=lu.concat([Ia("items",[ws,ig]),La("size",1),$o]),GP=je(qP),KP=ge,YP=lu.concat([is("constrain",!0),$o]),XP=je(YP),VM=je([Ft("width"),Ft("height")]),JP=Jx.concat([UC,La("min",0),La("max",0)]),QP=je(JP),ZP=J,eL=[Br,rr("header",ge),rr("cells",Do(ge))],tL=je(eL),oL=lu.concat([fr("placeholder"),is("maximized",!1),$o]),nL=je(oL),rL=ge,UM=[hn("type",["directory","leaf"]),Zl,Ft("id"),Wr("menu",y1)],jM=je(UM),sL=UM.concat([rr("children",$n(0,()=>Dt("type",{directory:$M,leaf:jM})))]),$M=je(sL),aL=Dt("type",{directory:$M,leaf:jM}),iL=[Br,rr("items",aL),Vn("onLeafAction"),Vn("onToggleExpand"),Td("defaultExpandedIds",[],ge),fr("defaultSelectedId")],lL=je(iL),cL=lu.concat([qi("filetype","file",["image","media","file"]),$o,fr("picker_text")]),dL=je(cL),uL=je([ig,e0]),uM=e=>Ae("items","items",{tag:"required",process:{}},Do(Vt(r=>Xt(`Checking item of ${e}`,mM,r).fold(a=>ko.error(yo(a)),a=>ko.value(a))))),mM=ct(()=>{return Dt("type",{alertbanner:cP,bar:je((e=uM("bar"),[Br,e])),button:uP,checkbox:gP,colorinput:yP,colorpicker:wP,dropzone:TP,grid:je(AP(uM("grid"))),iframe:BP,input:FP,listbox:$P,selectbox:GP,sizeinput:XP,slider:QP,textarea:nL,urlinput:dL,customeditor:kP,htmlpanel:RP,imagepreview:IP,collection:fP,label:je(HP(uM("label"))),table:tL,tree:lL,panel:WM});var e}),mL=[Br,fe("classes",[]),rr("items",mM)],WM=je(mL),gL=[qC("tab"),Zl,rr("items",mM)],pL=[Br,Ia("tabs",gL)],hL=je(pL),fL=zM,bL=iP,vL=je([Ft("title"),Bo("body",Dt("type",{panel:WM,tabpanel:hL})),oa("size","normal"),Td("buttons",[],bL),fe("initialData",{}),Qn("onAction",Qe),Qn("onChange",Qe),Qn("onSubmit",Qe),Qn("onClose",Qe),Qn("onCancel",Qe),Qn("onTabChange",Qe)]),yL=je([hn("type",["cancel","custom"]),...fL]),xL=je([Ft("title"),Ft("url"),es("height"),es("width"),bs("buttons",yL),Qn("onAction",Qe),Qn("onCancel",Qe),Qn("onClose",Qe),Qn("onMessage",Qe)]),gM=e=>ms(e)?[e].concat(ft(Jr(e),gM)):On(e)?ft(e,gM):[],wL=e=>So(e.type)&&So(e.name),_L={checkbox:pP,colorinput:xP,colorpicker:_P,dropzone:OP,input:zP,iframe:MP,imagepreview:PP,selectbox:KP,sizeinput:VM,slider:ZP,listbox:WP,size:VM,textarea:rL,urlinput:uL,customeditor:EP,collection:bP,togglemenuitem:rP},CL=e=>{const r=st(gM(e),wL),a=ft(r,l=>{return(m=l,N.from(_L[m.type])).fold(()=>[],m=>[Bo(l.name,m)]);var m});return je(a)},qM=e=>{var r;return{internalDialog:bo(Xt("dialog",vL,e)),dataValidator:CL(e),initialData:null!==(r=e.initialData)&&void 0!==r?r:{}}},ov={open:(e,r)=>{const a=qM(r);return e(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(e,r)=>e(bo(Xt("dialog",xL,r))),redial:e=>qM(e)};var SL=Object.freeze({__proto__:null,events:(e,r)=>{const a=(l,m)=>{e.updateState.each(g=>{const h=g(l,m);r.set(h)}),e.renderComponents.each(g=>{const h=g(m,r.get());(e.reuseDom?$_:JT)(l,h)})};return Cn([Me(Tm(),(l,m)=>{const g=m;g.universal||wo(g.channels,e.channel)&&a(l,g.data)}),qn((l,m)=>{e.initialData.each(g=>{a(l,g)})})])}}),kL=Object.freeze({__proto__:null,getState:(e,r,a)=>a}),EL=[_e("channel"),fo("renderComponents"),fo("updateState"),fo("initialData"),is("reuseDom",!0)];const Ll=Ns({fields:EL,name:"reflecting",active:SL,apis:kL,state:Object.freeze({__proto__:null,init:()=>{const e=Ot(N.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(N.none())}}})}),GM=e=>{const r=[],a={};return gn(e,(l,m)=>{l.fold(()=>{r.push(m)},g=>{a[m]=g})}),r.length>0?ko.error(r):ko.value(a)},TL=(e,r,a)=>{const l=dn(dm.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:Je(e.items,h=>zk(g,h,r,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:ve([pt.config({mode:"acyclic",useTabstopAt:Kt(xb)}),(m=l,_o.config({find:m.getOpt})),vd(l,{postprocess:g=>GM(g).fold(h=>(console.error(h),{}),ut)}),go("dialog-body-panel",[Me(Wl(),(g,h)=>{g.getSystem().broadcastOn([_b],{newFocus:N.some(h.event.target)})})])])};var m},OL=gi({name:"TabButton",configFields:[fe("uid",void 0),_e("value"),Ae("dom","dom",X(()=>({attributes:{role:"tab",id:bt("aria"),"aria-selected":"false"}})),w()),fo("action"),fe("domModification",{}),ys("tabButtonBehaviours",[$t,pt,at]),_e("view")],factory:(e,r)=>({uid:e.uid,dom:e.dom,components:e.components,events:Ap(e.action),behaviours:ar(e.tabButtonBehaviours,[$t.config({}),pt.config({mode:"execution",useSpace:!0,useEnter:!0}),at.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),AL=ee([_e("tabs"),_e("dom"),fe("clickToDismiss",!1),ys("tabbarBehaviours",[en,pt]),Pm(["tabClass","selectedClass"])]),NL=Qh({factory:OL,name:"tabs",unit:"tab",overrides:e=>{const r=(l,m)=>{en.dehighlight(l,m),Bt(l,rE(),{tabbar:l,button:m})},a=(l,m)=>{en.highlight(l,m),Bt(l,Eu(),{tabbar:l,button:m})};return{action:l=>{const m=l.getSystem().getByUid(e.uid).getOrDie(),g=en.isHighlighted(m,l);(g&&e.clickToDismiss?r:g?Qe:a)(m,l)},domModification:{classes:[e.markers.tabClass]}}}}),RL=ee([NL]),KM=$s({name:"Tabbar",configFields:AL(),partFields:RL(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ar(e.tabbarBehaviours,[en.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(m,g)=>{ro(g.element,"aria-selected","true")},onDehighlight:(m,g)=>{ro(g.element,"aria-selected","false")}}),pt.config({mode:"flow",getInitial:m=>en.getHighlighted(m).map(g=>g.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),DL=gi({name:"Tabview",configFields:[ys("tabviewBehaviours",[so])],factory:(e,r)=>({uid:e.uid,dom:e.dom,behaviours:ar(e.tabviewBehaviours,[so.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),BL=ee([fe("selectFirst",!0),Uo("onChangeTab"),Uo("onDismissTab"),fe("tabs",[]),ys("tabSectionBehaviours",[])]),ML=ga({factory:KM,schema:[_e("dom"),zo("markers",[_e("tabClass"),_e("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),IL=ga({factory:DL,name:"tabview"}),PL=ee([ML,IL]),Qx=$s({name:"TabSection",configFields:BL(),partFields:PL(),factory:(e,r,a,l)=>{const m=(g,h)=>{fn(g,e,"tabbar").each(v=>{h(v).each(Tu)})};return{uid:e.uid,dom:e.dom,components:r,behaviours:Yh(e.tabSectionBehaviours),events:Cn(Rt([e.selectFirst?[qn((g,h)=>{m(g,en.getFirst)})]:[],[Me(Eu(),(g,h)=>{(v=>{const y=at.getValue(v);fn(v,e,"tabview").each(_=>{Ee(e.tabs,k=>k.value===y).each(k=>{const E=k.view();ur(v.element,"id").each(A=>{ro(_.element,"aria-labelledby",A)}),so.set(_,E),e.onChangeTab(_,v,E)})})})(h.event.button)}),Me(rE(),(g,h)=>{e.onDismissTab(g,h.event.button)})]])),apis:{getViewItems:g=>fn(g,e,"tabview").map(h=>so.contents(h)).getOr([]),showTab:(g,h)=>{m(g,v=>{const y=en.getCandidates(v);return Ee(y,_=>at.getValue(_)===h).filter(_=>!en.isHighlighted(v,_))})}}}},apis:{getViewItems:(e,r)=>e.getViewItems(r),showTab:(e,r,a)=>{e.showTab(r,a)}}}),YM=(e,r)=>{lo(e,"height",r+"px"),lo(e,"flex-basis",r+"px")},VR=(e,r,a)=>{Xi(e,'[role="dialog"]').each(l=>{Gn(l,'[role="tablist"]').each(m=>{a.get().map(g=>(lo(r,"height","0"),lo(r,"flex-basis","0"),Math.min(g,((h,v,y)=>{const _=Qa(h).dom,k=Xi(h,".tox-dialog-wrap").getOr(h);let E;E="fixed"===Zr(k,"position")?Math.max(_.clientHeight,window.innerHeight):Math.max(_.offsetHeight,_.scrollHeight);const A=gr(v),B=v.dom.offsetLeft>=y.dom.offsetLeft+ln(y)?Math.max(gr(y),A):A,L=parseInt(Zr(h,"margin-top"),10)||0,G=parseInt(Zr(h,"margin-bottom"),10)||0;return E-(gr(h)+L+G-B)})(l,r,m)))).each(g=>{YM(r,g)})})})},pM=e=>Gn(e,'[role="tabpanel"]'),XM="send-data-to-section",JM="send-data-to-view",LL=(e,r,a)=>{const l=Ot({}),m=_=>{const k=at.getValue(_),E=GM(k).getOr({}),A=l.get(),B=Dn(A,E);l.set(B)},g=_=>{const k=l.get();at.setValue(_,k)},h=Ot(null),v=Je(e.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Or(a.shared.providers.translate(_.title))],view:()=>[dm.sketch(k=>({dom:{tag:"div",classes:["tox-form"]},components:Je(_.items,E=>zk(k,E,r,a)),formBehaviours:ve([pt.config({mode:"acyclic",useTabstopAt:Kt(xb)}),go("TabView.form.events",[qn(g),xc(m)]),Ri.config({channels:Er([{key:XM,value:{onReceive:m}},{key:JM,value:{onReceive:g}}])})])}))]})),y=(_=>{const k=Un();return{extraEvents:[qn(A=>{const B=A.element;pM(B).each(L=>{var K;lo(L,"visibility","hidden"),A.getSystem().getByDom(L).toOptional().each(G=>{var W,z,Y;(W=>cr(Ci(W,(z,Y)=>z>Y?-1:z<Y?1:0)))((z=L,Y=G,Je(W=_,(Z,te)=>{so.set(Y,W[te].view());const ae=z.dom.getBoundingClientRect();return so.set(Y,[]),ae.height}))).fold(k.clear,k.set)}),VR(B,L,k),mn(L,"visibility"),K=A,cr(_).each(Q=>Qx.showTab(K,Q.value)),requestAnimationFrame(()=>{VR(B,L,k)})})}),Me(kh(),A=>{const B=A.element;pM(B).each(L=>{VR(B,L,k)})}),Me(OS,(A,B)=>{const L=A.element;pM(L).each(G=>{const K=Ji(Ur(G));lo(G,"visibility","hidden");const Q=Jn(G,"height").map(z=>parseInt(z,10));mn(G,"height"),mn(G,"flex-basis");const W=G.dom.getBoundingClientRect().height;Q.forall(z=>W>z)?(k.set(W),VR(L,G,k)):Q.each(z=>{YM(G,z)}),mn(G,"visibility"),K.each(wl)})})],selectFirst:!1}})(v);return Qx.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,k,E)=>{const A=at.getValue(k);Bt(_,TS,{name:A,oldName:h.get()}),h.set(A)},tabs:v,components:[Qx.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[KM.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ve([er.config({})])}),Qx.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:y.selectFirst,tabSectionBehaviours:ve([go("tabpanel",y.extraEvents),pt.config({mode:"acyclic"}),_o.config({find:_=>cr(Qx.getViewItems(_))}),Qd(N.none(),_=>(_.getSystem().broadcastOn([XM],{}),l.get()),(_,k)=>{l.set(k),_.getSystem().broadcastOn([JM],{})})])})},QM=(e,r,a,l,m)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(g=>({id:g})).getOr({}),...m?{"aria-live":"polite"}:{}}},components:[],behaviours:ve([ex(0),Ll.config({channel:`${ox}-${r}`,updateState:(g,h)=>N.some({isTabPanel:()=>"tabpanel"===h.body.type}),renderComponents:g=>{const h=g.body;return"tabpanel"===h.type?[LL(h,g.initialData,l)]:[TL(h,g.initialData,l)]},initialData:e})])}),FL=Bp.deviceType.isTouch(),ZM=(e,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,r]}),eI=(e,r)=>Ms.parts.close(Bs.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:e,buttonBehaviours:ve([er.config({})])})),tI=()=>Ms.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),oI=(e,r)=>Ms.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ld(`<p>${Sy(r.translate(e))}</p>`)}]}]}),nI=e=>Ms.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),rI=(e,r)=>[sa.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),sa.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],hM=e=>{const r="tox-dialog",a=r+"-wrap",l=a+"__backdrop",m=r+"__disable-scroll";return Ms.sketch({lazySink:e.lazySink,onEscape:g=>(e.onEscape(g),N.some(!0)),useTabstopAt:g=>!xb(g),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[r].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:ld(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:FL?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:ve([$t.config({}),go("dialog-events",e.dialogEvents.concat([Ou(Wl(),(g,h)=>{Lc.isBlocked(g)||pt.focusIn(g)}),Me(rp(),(g,h)=>{g.getSystem().broadcastOn([_b],{newFocus:h.event.newFocus})})])),go("scroll-lock",[qn(()=>{Zo(va(),m)}),xc(()=>{sr(va(),m)})]),...e.extraBehaviours]),eventOrder:{[Ki()]:["dialog-events"],[yc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[np()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},sI=e=>Bs.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:ve([er.config({})]),components:[El("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:r=>{nn(r,hd)}}),aI=(e,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(m=>({id:m})).getOr({})}},components:[],behaviours:ve([Ll.config({channel:`${mN}-${r}`,initialData:e,renderComponents:m=>[Or(l.translate(m.title))]})])}),iI=()=>({dom:ld('<div class="tox-dialog__draghandle"></div>')}),lI=(e,r,a)=>((l,m,g)=>{const h=Ms.parts.title(aI(l,m,N.none(),g)),v=Ms.parts.draghandle(iI()),y=Ms.parts.close(sI(g)),_=[h].concat(l.draggable?[v]:[]).concat([y]);return sa.sketch({dom:ld('<div class="tox-dialog__header"></div>'),components:_})})({title:a.shared.providers.translate(e),draggable:a.dialog.isDraggableModal()},r,a.shared.providers),cI=(e,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:ld('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),dI=(e,r,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const m=Gn(e().element,".tox-dialog__header").map(g=>gr(g));Ms.setBusy(e(),(g,h)=>cI(l.message,h,r,m))},onUnblock:()=>{Ms.setIdle(e())}}),uI="tox-dialog--fullscreen",fM="tox-dialog--width-lg",bM="tox-dialog--width-md",UR=e=>{switch(e){case"large":return N.some(fM);case"medium":return N.some(bM);default:return N.none()}},mI=(e,r)=>{const a=oe(r.element.dom);Ha(a,uI)||(Tr(a,[fM,bM]),UR(e).each(l=>Zo(a,l)))},gI=(e,r)=>{const a=oe(e.element.dom),l=mE(a),m=Ee(l,g=>g===fM||g===bM).or(UR(r));var g,h;g=a,h=[uI,...m.toArray()],yt(h,v=>{var y,_,E,A;_=v,Bm(y=g)?y.dom.classList.toggle(_):(A=_,wo(Sn(E=y),A)?Jc(E,A):uE(E,A)),lp(y)})},pI=(e,r,a)=>na(hM({...e,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[um({}),...e.extraBehaviours],onEscape:l=>{nn(l,hd)},dialogEvents:r,eventOrder:{[Tm()]:[Ll.name(),Ri.name()],[yc()]:["scroll-lock",Ll.name(),"messages","dialog-events","alloy.base.behaviour"],[np()]:["alloy.base.behaviour","dialog-events","messages",Ll.name(),"scroll-lock"]}})),vM=(e,r={})=>Je(e,a=>"menu"===a.type?(l=>{const m=Je(l.items,g=>{const h=lt(r,g.name).getOr(Ot(!1));return{...g,storage:h}});return{...l,items:m}})(a):a),hI=e=>qt(e,(r,a)=>"menu"===a.type?qt(a.items,(l,m)=>(l[m.name]=m.storage,l),r):r,{}),fI=(e,r)=>[Bd(Wl(),uk),e(eh,(a,l,m,g)=>{Ji(Ur(g.element)).fold(Qe,Lw),r.onClose(),l.onClose()}),e(hd,(a,l,m,g)=>{l.onCancel(a),nn(g,eh)}),Me(R0,(a,l)=>r.onUnblock()),Me(vg,(a,l)=>r.onBlock(l.event))],bI=(e,r,a)=>{const l=(g,h)=>Me(g,(v,y)=>{m(v,(_,k)=>{h(e(),_,y.event,v)})}),m=(g,h)=>{Ll.getState(g).get().each(v=>{h(v.internalDialog,g)})};return[...fI(l,r),l(Kd,(g,h)=>h.onSubmit(g)),l(fi,(g,h,v)=>{h.onChange(g,{name:v.name})}),l(Nl,(g,h,v,y)=>{const _=()=>y.getSystem().isConnected()?pt.focusIn(y):void 0,k=B=>uu(B,"disabled")||ur(B,"aria-disabled").exists(L=>"true"===L),E=Ur(y.element),A=Ji(E);h.onAction(g,{name:v.name,value:v.value}),Ji(E).fold(_,B=>{k(B)||A.exists(L=>ks(B,L)&&k(L))?_():a().toOptional().filter(L=>!ks(L.element,B)).each(_)})}),l(TS,(g,h,v)=>{h.onTabChange(g,{newTabName:v.name,oldTabName:v.oldName})}),xc(g=>{const h=e();at.setValue(g,h.getData())})]},zL=(e,r)=>{const a=r.map(g=>g.footerButtons).getOr([]),l=Oa(a,g=>"start"===g.align),m=(g,h)=>sa.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${g}`]},components:Je(h,v=>v.memento.asSpec())});return[m("start",l.pass),m("end",l.fail)]},vI=(e,r,a)=>({dom:ld('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ve([Ll.config({channel:`${mk}-${r}`,initialData:e,updateState:(l,m)=>{const g=Je(m.buttons,h=>{const v=dn(Ga(y=h,y.type,a));var y;return{name:h.name,align:h.align,memento:v}});return N.some({lookupByName:h=>{return v=l,_=h,Ee(g,k=>k.name===_).bind(k=>k.memento.getOpt(v));var v,_},footerButtons:g})},renderComponents:zL})])}),yI=(e,r,a)=>Ms.parts.footer(vI(e,r,a)),xI=(e,r)=>{if(e.getRoot().getSystem().isConnected()){const a=_o.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return dm.getField(a,r).orThunk(()=>e.getFooter().bind(m=>Ll.getState(m).get()).bind(m=>m.lookupByName(r)))}return N.none()},wI=(e,r,a)=>{const l=g=>{const h=e.getRoot();h.getSystem().isConnected()&&g(h)},m={getData:()=>{const g=e.getRoot(),h=g.getSystem().isConnected()?e.getFormWrapper():g;return{...at.getValue(h),...pn(a,v=>v.get())}},setData:g=>{l(h=>{const v=m.getData(),y=Dn(v,g),_=((E,A)=>{const B=E.getRoot();return Ll.getState(B).get().map(L=>bo(Xt("data",L.dataValidator,A))).getOr(A)})(e,y),k=e.getFormWrapper();at.setValue(k,_),gn(a,(E,A)=>{vo(y,A)&&E.set(y[A])})})},setEnabled:(g,h)=>{xI(e,g).each(h?Ut.enable:Ut.disable)},focus:g=>{xI(e,g).each($t.focus)},block:g=>{if(!So(g))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(h=>{Bt(h,vg,{message:g})})},unblock:()=>{l(g=>{nn(g,R0)})},showTab:g=>{l(h=>{const v=e.getBody();Ll.getState(v).get().exists(y=>y.isTabPanel())&&_o.getCurrent(v).each(y=>{Qx.showTab(y,g)})})},redial:g=>{l(h=>{const v=e.getId(),y=r(g),_=vM(y.internalDialog.buttons,a);h.getSystem().broadcastOn([`${wb}-${v}`],y),h.getSystem().broadcastOn([`${mN}-${v}`],y.internalDialog),h.getSystem().broadcastOn([`${ox}-${v}`],y.internalDialog),h.getSystem().broadcastOn([`${mk}-${v}`],{...y.internalDialog,buttons:_}),m.setData(y.initialData)})},close:()=>{l(g=>{nn(g,eh)})},toggleFullscreen:e.toggleFullscreen};return m},_I=(e,r,a,l=!1,m)=>{const g=bt("dialog"),h=bt("dialog-label"),v=bt("dialog-content"),y=e.internalDialog,_=Ot(y.size),k=UR(_.get()).toArray(),E=dn((z={title:y.title,draggable:!0},Y=g,Z=h,te=a.shared.providers,sa.sketch({dom:ld('<div class="tox-dialog__header"></div>'),components:[aI(z,Y,N.some(Z),te),iI(),sI(te)],containerBehaviours:ve([tv.config({mode:"mouse",blockerClass:"blocker",getTarget:ae=>Gl(ae,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),A=dn(((z,Y,Z,te,ae)=>QM(z,Y,N.some(Z),te,ae))({body:y.body,initialData:y.initialData},g,v,a,l)),B=vM(y.buttons),L=hI(B),G=Hr(0!==B.length,dn(((z,Y,Z)=>vI(z,Y,Z))({buttons:B},g,a))),K=bI(()=>W,{onBlock:z=>{Lc.block(Q,(Y,Z)=>{const te=E.getOpt(Q).map(ae=>gr(ae.element));return cI(z.message,Z,a.shared.providers,te)})},onUnblock:()=>{Lc.unblock(Q)},onClose:()=>r.closeWindow()},a.shared.getSink),Q=na({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...k],attributes:{role:"dialog","aria-labelledby":h}},eventOrder:{[Tm()]:[Ll.name(),Ri.name()],[Ki()]:["execute-on-form"],[yc()]:["reflecting","execute-on-form"]},behaviours:ve([pt.config({mode:"cyclic",onEscape:z=>(nn(z,eh),N.some(!0)),useTabstopAt:z=>!xb(z)&&("button"!==nt(z)||"disabled"!==zn(z,"disabled")),firstTabstop:1}),Ll.config({channel:`${wb}-${g}`,updateState:(z,Y)=>(_.set(Y.internalDialog.size),mI(Y.internalDialog.size,z),m(),N.some(Y)),initialData:e}),$t.config({}),go("execute-on-form",K.concat([Ou(Wl(),(z,Y)=>{pt.focusIn(z)}),Me(rp(),(z,Y)=>{z.getSystem().broadcastOn([_b],{newFocus:Y.event.newFocus})})])),Lc.config({getRoot:()=>N.some(Q)}),so.config({}),um({})]),components:[E.asSpec(),A.asSpec(),...G.map(z=>z.asSpec()).toArray()]}),W=wI({getId:ee(g),getRoot:ee(Q),getFooter:()=>G.map(z=>z.get(Q)),getBody:()=>A.get(Q),getFormWrapper:()=>{const z=A.get(Q);return _o.getCurrent(z).getOr(z)},toggleFullscreen:()=>{gI(Q,_.get())}},r.redial,L);var z,Y,Z,te;return{dialog:Q,instanceApi:W}};var yM=tinymce.util.Tools.resolve("tinymce.util.URI");const HL=["insertContent","setContent","execCommand","close","block","unblock"],CI=e=>ms(e)&&-1!==HL.indexOf(e.mceAction),SI=(e,r)=>bo(Xt("data",r,e)),kI=e=>Qp(e,".tox-alert-dialog")||Qp(e,".tox-confirm-dialog"),UL=(e,r,a)=>r&&a?[]:[yr.config({contextual:{lazyContext:()=>N.some(hr(oe(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>sm(e,l.element).map(m=>({bounds:am(m),optScrollEnv:N.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:ca(m.element).top})})).getOrThunk(()=>({bounds:Sr(),optScrollEnv:N.none()}))})];fl.add("silver",e=>{var h;dC(h=e),(v=>{const y=v.options.register,_=E=>vn(E,So)?{value:w0(E),valid:!0}:{valid:!1,message:"Must be an array of strings."},k=E=>qo(E)&&E>0?{value:E,valid:!0}:{valid:!1,message:"Must be a positive number."};y("color_map",{processor:_,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),y("color_map_background",{processor:_}),y("color_map_foreground",{processor:_}),y("color_cols",{processor:k,default:tb(v)}),y("color_cols_foreground",{processor:k,default:cS(v,y0)}),y("color_cols_background",{processor:k,default:cS(v,x0)}),y("custom_colors",{processor:"boolean",default:!0}),y("color_default_foreground",{processor:"string",default:pg}),y("color_default_background",{processor:"string",default:pg})})(h),(v=>{const y=v.options.register;y("contextmenu_avoid_overlap",{processor:"string",default:""}),y("contextmenu_never_use_native",{processor:"boolean",default:!1}),y("contextmenu",{processor:_=>!1===_?{value:[],valid:!0}:So(_)||vn(_,So)?{value:Hg(_),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(h);let r=()=>Sr();const{dialogs:a,popups:l,renderUI:m}=eP(e,{getPopupSinkBounds:()=>r()});((e,r)=>{const a=bt("autocompleter"),l=Ot(!1),m=Ot(!1),g=na(Zn.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:ve([go("dismissAutocompleter",[Me(Dd(),()=>k()),Me(Th(),(B,L)=>{ur(L.event.target,"id").each(G=>ro(oe(e.getBody()),"aria-activedescendant",G))})])]),lazySink:r.getSink})),h=()=>Zn.isOpen(g),v=m.get,y=()=>{if(h()){Zn.hide(g),e.dom.remove(a,!1);const B=oe(e.getBody());ur(B,"aria-owns").filter(L=>L===a).each(()=>{Ht(B,"aria-owns"),Ht(B,"aria-activedescendant")})}},_=()=>Zn.getContent(g).bind(B=>Lr(B.components(),0)),k=()=>e.execCommand("mceAutocompleterClose"),E=B=>{const L=(G=>{const K=Ps(G,Q=>N.from(Q.columns)).getOr(1);return ft(G,Q=>((e,r,a,l,m,g,h)=>{const v=1===l,y=!v||Hp(e);return gs(Je(e,_=>{switch(_.type){case"separator":return(k=_,Xt("Autocompleter.Separator",t0,k)).fold(jd,E=>N.some(S0(E)));case"cardmenuitem":return(E=_,Xt("cardmenuitem",eB,E)).fold(jd,E=>N.some(((A,B,L,G)=>{const K={dom:eS(A.label),optComponents:[N.some({dom:{tag:"div",classes:[TC,OC]},components:tS(A.items,G)})]};return Kp({data:Gd({text:N.none(),...A}),enabled:A.enabled,getApi:Q=>({isEnabled:()=>!Ut.isDisabled(Q),setEnabled:W=>{Ut.set(Q,!W),yt(Wa(Q.element,"*"),z=>{Q.getSystem().getByDom(z).each(Y=>{Y.hasConfigured(Ut)&&Ut.set(Y,!W)})})}}),onAction:A.onAction,onSetup:A.onSetup,triggersSubmenu:!1,itemBehaviours:N.from(G.itemBehaviours).getOr([])},K,B,L.providers)})({...E,onAction:A=>{E.onAction(A),a(E.value,E.meta)}},m,g,{itemBehaviours:u0(E.meta,g),cardText:{matchText:r,highlightOn:h}})));default:return(E=>Xt("Autocompleter.Item",qD,E))(_).fold(jd,E=>N.some(((A,B,L,G,K,Q,W,z=!0)=>{const Y=cg({presets:"normal",textContent:N.none(),htmlContent:L?A.text.map(Z=>Qf(Z,B)):N.none(),ariaLabel:A.text,iconContent:A.icon,shortcutContent:N.none(),checkMark:N.none(),caret:N.none(),value:A.value},W.providers,z,A.icon);return Kp({data:Gd(A),enabled:A.enabled,getApi:ee({}),onAction:Z=>K(A.value,A.meta),onSetup:ee(Qe),triggersSubmenu:!1,itemBehaviours:u0(A.meta,W)},Y,Q,W.providers)})(E,r,v,0,a,m,g,y)))}var E,k}))})(Q.items,Q.matchText,(z,Y)=>{const Z=e.selection.getRng();var te,ae;(te=e.dom,ae=Z,CC(oe(ae.startContainer)).map(Ce=>{const De=te.createRng();return De.selectNode(Ce.dom),De})).each(te=>{const ae={hide:()=>k(),reload:Ce=>{y(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ce})}};l.set(!0),Q.onAction(ae,te,z,Y),l.set(!1)})},K,Rc.BUBBLE_TO_SANDBOX,r,Q.highlightOn))})(B);var G,K,Q;L.length>0?(G=B,K=L,(Q=oe(e.getBody()),Gn(Q,_C)).each(W=>{const z=Ps(G,Y=>N.from(Y.columns)).getOr(1);Zn.showMenuAt(g,{anchor:{type:"node",root:oe(e.getBody()),node:N.from(W)}},((Y,Z,te,ae)=>{const Ce=nb(Z,ae),De=Dc(ae);return{data:T0({...Y,movement:Ce,menuBehaviours:Yf("auto"!==Z?[]:[qn((Fe,Ie)=>{s0(Fe,4,De.item).each(({numColumns:ot,numRows:ht})=>{pt.setGridSize(Fe,ht,ot)})})])}),menu:{markers:Dc(ae),fakeFocus:te===Xp.ContentFocus}}})(Qy("autocompleter-value",!0,K,z,{menuType:"normal"}),z,Xp.ContentFocus,"normal"))}),_().each(en.highlightFirst),ro(oe(e.getBody()),"aria-owns",a),e.inline||A()):y()},A=()=>{e.dom.get(a)&&e.dom.remove(a,!1);const B=e.getDoc().documentElement,L=e.selection.getNode(),G=Ah(g.element,!0);$e(G,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${L.offsetTop}px`,left:`${L.offsetLeft}px`}),e.dom.add(B,G.dom),Gn(G,'[role="menu"]').each(K=>{mn(K,"position"),mn(K,"max-height")})};e.on("AutocompleterStart",({lookupData:B})=>{m.set(!0),l.set(!1),E(B)}),e.on("AutocompleterUpdate",({lookupData:B})=>E(B)),e.on("AutocompleterEnd",()=>{y(),m.set(!1),l.set(!1)}),((B,L)=>{const G=(Q,W)=>{Bt(Q,vc(),{raw:W})},K=()=>B.getMenu().bind(en.getHighlighted);L.on("keydown",Q=>{const W=Q.which;B.isActive()&&(B.isMenuOpen()?13===W?(K().each(Tu),Q.preventDefault()):40===W?(K().fold(()=>{B.getMenu().each(en.highlightFirst)},z=>{G(z,Q)}),Q.preventDefault(),Q.stopImmediatePropagation()):37!==W&&38!==W&&39!==W||K().each(z=>{G(z,Q),Q.preventDefault(),Q.stopImmediatePropagation()}):13!==W&&38!==W&&40!==W||B.cancelIfNecessary())}),L.on("NodeChange",Q=>{B.isActive()&&!B.isProcessingAction()&&CC(oe(Q.element)).isNone()&&B.cancelIfNecessary()})})({cancelIfNecessary:k,isMenuOpen:h,isActive:v,isProcessingAction:l.get,getMenu:_},e)})(e,l.backstage.shared);const g=(e=>{const r=e.editor,a=Fp(r),l=(y=>{const _=y.shared;return{open:(k,E)=>{const A=()=>{Ms.hide(K),E()},B=dn(Ga({name:"close-alert",text:"OK",primary:!0,buttonType:N.some("primary"),align:"end",enabled:!0,icon:N.none()},"cancel",y)),L=tI(),G=eI(A,_.providers),K=na(hM({lazySink:()=>_.getSink(),header:ZM(L,G),body:oI(k,_.providers),footer:N.some(nI(rI([],[B.asSpec()]))),onEscape:A,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Me(hd,A)],eventOrder:{}}));Ms.show(K);const Q=B.get(K);$t.focus(Q)}}})(e.backstages.dialog),m=(y=>{const _=y.shared;return{open:(k,E)=>{const A=z=>{Ms.hide(Q),E(z)},B=dn(Ga({name:"yes",text:"Yes",primary:!0,buttonType:N.some("primary"),align:"end",enabled:!0,icon:N.none()},"submit",y)),L=Ga({name:"no",text:"No",primary:!1,buttonType:N.some("secondary"),align:"end",enabled:!0,icon:N.none()},"cancel",y),G=tI(),K=eI(()=>A(!1),_.providers),Q=na(hM({lazySink:()=>_.getSink(),header:ZM(G,K),body:oI(k,_.providers),footer:N.some(nI(rI([],[L,B.asSpec()]))),onEscape:()=>A(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Me(hd,()=>A(!1)),Me(Kd,()=>A(!0))],eventOrder:{}}));Ms.show(Q);const W=B.get(Q);$t.focus(W)}}})(e.backstages.dialog),h=(y,_,k,E)=>ov.open((A,B,L)=>{const G=SI(B,L),K=Un(),Q=e.backstages.popup.shared.header.isPositionedAtTop(),W=()=>K.on(Z=>{Zn.reposition(Z),a&&Q||yr.refresh(Z)}),z=_I({dataValidator:L,initialData:G,internalDialog:A},{redial:ov.redial,closeWindow:()=>{K.on(Zn.hide),r.off("ResizeEditor",W),K.clear(),k(z.instanceApi)}},e.backstages.popup,E.ariaAttrs,W),Y=na(Zn.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:E.persistent?{event:"doNotDismissYet"}:{},...Q?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ve([go("window-manager-inline-events",[Me(Dd(),(Z,te)=>{nn(z.dialog,hd)})]),...UL(r,a,Q)]),isExtraPart:(Z,te)=>kI(te)}));return K.set(Y),Zn.showWithinBounds(Y,Yi(z.dialog),{anchor:_},()=>{const Z=r.inline?va():oe(r.getContainer()),te=hr(Z);return N.some(te)}),a&&Q||(yr.refresh(Y),r.on("ResizeEditor",W)),z.instanceApi.setData(G),pt.focusIn(z.dialog),z.instanceApi},y);return{open:(y,_,k)=>{if(!sn(_)){if("toolbar"===_.inline)return h(y,e.backstages.popup.shared.anchors.inlineDialog(),k,_);if("bottom"===_.inline)return((y,_,k,E)=>ov.open((A,B,L)=>{const G=SI(B,L),K=Un(),Q=e.backstages.popup.shared.header.isPositionedAtTop(),W=()=>K.on(Z=>{Zn.reposition(Z),yr.refresh(Z)}),z=_I({dataValidator:L,initialData:G,internalDialog:A},{redial:ov.redial,closeWindow:()=>{K.on(Zn.hide),r.off("ResizeEditor ScrollWindow ElementScroll",W),K.clear(),k(z.instanceApi)}},e.backstages.popup,E.ariaAttrs,W),Y=na(Zn.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:E.persistent?{event:"doNotDismissYet"}:{},...Q?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ve([go("window-manager-inline-events",[Me(Dd(),(Z,te)=>{nn(z.dialog,hd)})]),yr.config({contextual:{lazyContext:()=>N.some(hr(oe(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Z=>sm(r,Z.element).map(te=>({bounds:am(te),optScrollEnv:N.some({currentScrollTop:te.element.dom.scrollTop,scrollElmTop:ca(te.element).top})})).getOrThunk(()=>({bounds:Sr(),optScrollEnv:N.none()}))})]),isExtraPart:(Z,te)=>kI(te)}));return K.set(Y),Zn.showWithinBounds(Y,Yi(z.dialog),{anchor:_},()=>e.backstages.popup.shared.getSink().toOptional().bind(Z=>{const te=sm(r,Z.element).map(De=>am(De)).getOr(Sr()),ae=hr(oe(r.getContentAreaContainer())),Ce=$i(ae,te);return N.some(Hn(Ce.x,Ce.y,Ce.width,Ce.height-15))})),yr.refresh(Y),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",W),z.instanceApi.setData(G),pt.focusIn(z.dialog),z.instanceApi},y))(y,e.backstages.popup.shared.anchors.inlineBottomDialog(),k,_);if("cursor"===_.inline)return h(y,e.backstages.popup.shared.anchors.cursor(),k,_)}return((y,_)=>ov.open((k,E,A)=>{const B=E,L=((G,K,Q)=>{const W=bt("dialog"),z=G.internalDialog,Y=lI(z.title,W,Q),Z=Ot(z.size),te=UR(Z.get()).toArray(),ae=((oo,Ao,Pn)=>{const ir=QM(oo,Ao,N.none(),Pn,!1);return Ms.parts.body(ir)})({body:z.body,initialData:z.initialData},W,Q),Ce=vM(z.buttons),De=hI(Ce),Fe=Hr(0!==Ce.length,yI({buttons:Ce},W,Q)),Ie=bI(()=>Qt,dI(()=>ht,Q.shared.providers,K),Q.shared.getSink),ot={id:W,header:Y,body:ae,footer:Fe,extraClasses:te,extraBehaviours:[Ll.config({channel:`${wb}-${W}`,updateState:(oo,Ao)=>(Z.set(Ao.internalDialog.size),mI(Ao.internalDialog.size,oo),N.some(Ao)),initialData:G})],extraStyles:{}},ht=pI(ot,Ie,Q),At={getId:ee(W),getRoot:ee(ht),getBody:()=>Ms.getBody(ht),getFooter:()=>Ms.getFooter(ht),getFormWrapper:()=>{const oo=Ms.getBody(ht);return _o.getCurrent(oo).getOr(oo)},toggleFullscreen:()=>{gI(ht,Z.get())}},Qt=wI(At,K.redial,De);return{dialog:ht,instanceApi:Qt}})({dataValidator:A,initialData:B,internalDialog:k},{redial:ov.redial,closeWindow:()=>{Ms.hide(L.dialog),_(L.instanceApi)}},e.backstages.dialog);return Ms.show(L.dialog),L.instanceApi.setData(B),L.instanceApi},y))(y,k)},openUrl:(y,_)=>{return E=_,ov.openUrl(A=>{const B=((e,r,a,l)=>{const m=bt("dialog"),g=lI(e.title,m,l),h=(Q=>{const W={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[uN(N.none(),{dom:{tag:"iframe",attributes:{src:Q.url}},behaviours:ve([er.config({}),$t.config({})])})]}],behaviours:ve([pt.config({mode:"acyclic",useTabstopAt:Kt(xb)})])};return Ms.parts.body(W)})(e),v=e.buttons.bind(Q=>0===Q.length?N.none():N.some(yI({buttons:Q},m,l))),y=((Q,W)=>{const z=(Z,te)=>Me(Z,(ae,Ce)=>{Y(ae,(De,Fe)=>{te(K,De,Ce.event,ae)})}),Y=(Z,te)=>{Ll.getState(Z).get().each(ae=>{te(ae,Z)})};return[...fI(z,W),z(Nl,(Z,te,ae)=>{te.onAction(Z,{name:ae.name})})]})(0,dI(()=>G,l.shared.providers,r)),_={...e.height.fold(()=>({}),Q=>({height:Q+"px","max-height":Q+"px"})),...e.width.fold(()=>({}),Q=>({width:Q+"px","max-width":Q+"px"}))},k=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],E=new yM(e.url,{base_uri:new yM(window.location.href)}),A=`${E.protocol}://${E.host}${E.port?":"+E.port:""}`,B=hp(),L=[Ll.config({channel:`${wb}-${m}`,updateState:(Q,W)=>N.some(W),initialData:e}),go("messages",[qn(()=>{const Q=$a(oe(window),"message",W=>{if(E.isSameOrigin(new yM(W.raw.origin))){const z=W.raw.data;CI(z)?((Y,Z,te)=>{switch(te.mceAction){case"insertContent":Y.insertContent(te.content);break;case"setContent":Y.setContent(te.content);break;case"execCommand":const ae=!!Js(te.ui)&&te.ui;Y.execCommand(te.cmd,ae,te.value);break;case"close":Z.close();break;case"block":Z.block(te.message);break;case"unblock":Z.unblock()}})(a,K,z):!CI(Y=z)&&ms(Y)&&vo(Y,"mceAction")&&e.onMessage(K,z)}var Y});B.set(Q)}),xc(B.clear)]),Ri.config({channels:{[gN]:{onReceive:(Q,W)=>{Gn(Q.element,"iframe").each(z=>{const Y=z.dom.contentWindow;vt(Y)&&Y.postMessage(W,A)})}}}})],G=pI({id:m,header:g,body:h,footer:v,extraClasses:k,extraBehaviours:L,extraStyles:_},y,l),K=(Q=>{const W=z=>{Q.getSystem().isConnected()&&z(Q)};return{block:z=>{if(!So(z))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");W(Y=>{Bt(Y,vg,{message:z})})},unblock:()=>{W(z=>{nn(z,R0)})},close:()=>{W(z=>{nn(z,eh)})},sendMessage:z=>{W(Y=>{Y.getSystem().broadcastOn([gN],z)})}}})(G);return{dialog:G,instanceApi:K}})(A,{closeWindow:()=>{Ms.hide(B.dialog),E(B.instanceApi)}},r,e.backstages.dialog);return Ms.show(B.dialog),B.instanceApi},y);var E},alert:(y,_)=>{l.open(y,_)},close:y=>{y.close()},confirm:(y,_)=>{m.open(y,_)}}})({editor:e,backstages:{popup:l.backstage,dialog:a.backstage}});return{renderUI:()=>{const h=m();return sm(e,l.getMothership().element).each(v=>{r=()=>am(v)}),h},getWindowManagerImpl:ee(g),getNotificationManagerImpl:()=>((h,v,y)=>{const _=v.backstage.shared,k=()=>{const E=hr(oe(h.getContentAreaContainer())),A=Sr(),B=Ni(A.x,E.x,E.right),L=Ni(A.y,E.y,E.bottom),G=Math.max(E.right,A.right),K=Math.max(E.bottom,A.bottom);return N.some(Hn(B,L,G-B,K-L))};return{open:(E,A)=>{const B=()=>{A(),Zn.hide(G)},L=na(Dp.sketch({text:E.text,level:wo(["success","error","warning","warn","info"],E.type)?E.type:void 0,progress:!0===E.progressBar,icon:E.icon,closeButton:E.closeButton,onAction:B,iconProvider:_.providers.icons,translationProvider:_.providers.translate})),G=na(Zn.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:_.getSink,fireDismissalEventInstead:{},..._.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));y.add(G),qo(E.timeout)&&E.timeout>0&&wf.setEditorTimeout(h,()=>{B()},E.timeout);const K={close:B,reposition:()=>{const Q=Yi(L),W={maxHeightFunction:Lm()},z=h.notificationManager.getNotifications();if(z[0]===K){const Y={..._.anchors.banner(),overrides:W};Zn.showWithinBounds(G,Q,{anchor:Y},k)}else Ze(z,K).each(Y=>{const Z=z[Y-1].getEl(),te={type:"node",root:va(),node:N.some(oe(Z)),overrides:W,layouts:{onRtl:()=>[vs],onLtr:()=>[vs]}};Zn.showWithinBounds(G,Q,{anchor:te},k)})},text:Q=>{Dp.updateText(L,Q)},settings:E,getEl:()=>L.element.dom,progressBar:{value:Q=>{Dp.updateProgress(L,Q)}}};return K},close:E=>{E.close()},getArgs:E=>E.settings}})(e,{backstage:l.backstage},l.getMothership())}})}(),function(){"use strict";var ll=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xs=xe=>oe=>(Ne=>{const Re=typeof Ne;return null===Ne?"null":"object"===Re&&Array.isArray(Ne)?"array":"object"===Re&&(Xe=tt=Ne,(nt=String).prototype.isPrototypeOf(Xe)||(null===(Yt=tt.constructor)||void 0===Yt?void 0:Yt.name)===nt.name)?"string":Re;var Xe,tt,nt,Yt})(oe)===xe,cl=xe=>oe=>typeof oe===xe,Xr=Xs("string"),dl=Xs("object"),So=Xs("array"),Ta=cl("boolean"),On=xe=>!(null==xe),Ya=cl("function"),Js=(xe,oe)=>{if(So(xe)){for(let Ne=0,Re=xe.length;Ne<Re;++Ne)if(!oe(xe[Ne]))return!1;return!0}return!1},sn=()=>{},_t=(xe,oe)=>xe===oe;class vt{constructor(oe,Ne){this.tag=oe,this.value=Ne}static some(oe){return new vt(!0,oe)}static none(){return vt.singletonNone}fold(oe,Ne){return this.tag?Ne(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?vt.some(oe(this.value)):vt.none()}bind(oe){return this.tag?oe(this.value):vt.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:vt.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return On(oe)?vt.some(oe):vt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}vt.singletonNone=new vt(!1);const an=Array.prototype.indexOf,qo=Array.prototype.push,vn=xe=>{const oe=[];for(let Ne=0,Re=xe.length;Ne<Re;++Ne){if(!So(xe[Ne]))throw new Error("Arr.flatten item "+Ne+" was not an array, input: "+xe);qo.apply(oe,xe[Ne])}return oe},Qe=(xe,oe)=>{for(let Ne=0;Ne<xe.length;Ne++){const Re=oe(xe[Ne],Ne);if(Re.isSome())return Re}return vt.none()},et=(xe,oe,Ne=_t)=>xe.exists(Re=>Ne(Re,oe)),An=xe=>{const oe=[],Ne=Re=>{oe.push(Re)};for(let Re=0;Re<xe.length;Re++)xe[Re].each(Ne);return oe},ee=(xe,oe)=>xe?vt.some(oe):vt.none(),ut=xe=>oe=>oe.options.get(xe),rs=ut("link_assume_external_targets"),Xn=ut("link_context_toolbar"),Kt=ut("link_list"),lr=ut("link_default_target"),Fl=ut("link_default_protocol"),Ve=ut("link_target_list"),un=ut("link_rel_list"),N=ut("link_class_list"),it=ut("link_title"),wi=ut("allow_unsafe_link_target"),ss=ut("link_quicklink");var Pr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ze=xe=>Xr(xe.value)?xe.value:"",wo=(xe,oe)=>{const Ne=[];return Pr.each(xe,Re=>{const Xe=Xr((tt=Re).text)?tt.text:Xr(tt.title)?tt.title:"";var tt;if(void 0!==Re.menu){const tt=wo(Re.menu,oe);Ne.push({text:Xe,items:tt})}else{const tt=oe(Re);Ne.push({text:Xe,value:tt})}}),Ne},Vo=(xe=Ze)=>oe=>vt.from(oe).map(Ne=>wo(Ne,xe)),H=xe=>Vo(Ze)(xe),_i=Vo,Je=(xe,oe)=>Ne=>({name:xe,type:"listbox",label:oe,items:Ne}),yt=Ze,Oa=Object.keys,st=Object.hasOwnProperty,Wo=(xe,oe)=>st.call(xe,oe);var qt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ee=tinymce.util.Tools.resolve("tinymce.util.URI");const ha=xe=>On(xe)&&"a"===xe.nodeName.toLowerCase(),Rt=xe=>ha(xe)&&!!Nn(xe),ft=(xe,oe)=>{if(xe.collapsed)return[];{const Ne=xe.cloneContents(),Re=Ne.firstChild,Xe=new qt(Re,Ne),tt=[];let nt=Re;do{oe(nt)&&tt.push(nt)}while(nt=Xe.next());return tt}},Qs=xe=>/^\w+:/i.test(xe),Nn=xe=>{var oe,Ne;return null!==(Ne=null!==(oe=xe.getAttribute("data-mce-href"))&&void 0!==oe?oe:xe.getAttribute("href"))&&void 0!==Ne?Ne:""},Is=(xe,oe)=>{const Ne=["noopener"],Re=xe?xe.split(/\s+/):[],Xe=nt=>nt.filter(Yt=>-1===Pr.inArray(Ne,Yt)),tt=oe?(nt=Xe(nt=Re)).length>0?nt.concat(Ne):Ne:Xe(Re);var nt;return tt.length>0?(nt=>Pr.trim(nt.sort().join(" ")))(tt):""},yn=(xe,oe)=>(oe=oe||Lr(xe.selection.getRng())[0]||xe.selection.getNode(),Ps(oe)?vt.from(xe.dom.select("a[href]",oe)[0]):vt.from(xe.dom.getParent(oe,"a[href]"))),la=(xe,oe)=>yn(xe,oe).isSome(),Ci=(xe,oe)=>oe.fold(()=>xe.getContent({format:"text"}),Ne=>Ne.innerText||Ne.textContent||"").replace(/\uFEFF/g,""),Lr=xe=>ft(xe,Rt),cr=xe=>Pr.grep(xe,Rt),fa=xe=>cr(xe).length>0,Si=xe=>{const oe=xe.schema.getTextInlineElements();if(yn(xe).exists(Re=>Re.hasAttribute("data-mce-block")))return!1;const Ne=xe.selection.getRng();return!!Ne.collapsed||0===ft(Ne,Re=>1===Re.nodeType&&!ha(Re)&&!Wo(oe,Re.nodeName.toLowerCase())).length},Ps=xe=>On(xe)&&"FIGURE"===xe.nodeName&&/\bimage\b/i.test(xe.className),gn=(xe,oe,Ne)=>{const Re=((Xe,tt)=>{const nt=Xe.options.get,Yt={allow_html_data_urls:nt("allow_html_data_urls"),allow_script_urls:nt("allow_script_urls"),allow_svg_data_urls:nt("allow_svg_data_urls")},Zt=tt.href;return{...tt,href:Ee.isDomSafe(Zt,"a",Yt)?Zt:""}})(xe,Ne);xe.hasPlugin("rtc",!0)?xe.execCommand("createlink",!1,(xe=>{const{class:oe,href:Ne,rel:Re,target:Xe,text:tt,title:nt}=xe;return((Yt,Zt)=>{const ho={};var Io,jn,or;return Io=ho,jn=(To,Ro)=>{Io[Ro]=To},or=sn,((xn,Jo)=>{const ks=Oa(xn);for(let Qr=0,Es=ks.length;Qr<Es;Qr++){const Qa=ks[Qr];Jo(xn[Qa],Qa)}})(Yt,(xn,Jo)=>{(!1===(xe=>null===xe)(xn)?jn:or)(xn,Jo)}),ho})({class:oe.getOrNull(),href:Ne,rel:Re.getOrNull(),target:Xe.getOrNull(),text:tt.getOrNull(),title:nt.getOrNull()})})(Re)):((xe,oe,Ne)=>{const Re=xe.selection.getNode(),Xe=yn(xe,Re),tt=((nt,Yt)=>{const Zt={...Yt};if(0===un(nt).length&&!wi(nt)){const ho=Is(Zt.rel,"_blank"===Zt.target);Zt.rel=ho||null}return vt.from(Zt.target).isNone()&&!1===Ve(nt)&&(Zt.target=lr(nt)),Zt.href=(ho=Zt.href,"http"!==(Io=rs(nt))&&"https"!==Io||Qs(ho)?ho:Io+"://"+ho),Zt;var ho,Io})(xe,(Zt=(Io,To)=>(nt[To].each(Ro=>{Io[To]=Ro.length>0?Ro:null}),Io),ho={href:(nt=Ne).href},((Io,To)=>{for(let Ro=0,jn=Io.length;Ro<jn;Ro++)To(Io[Ro])})(["title","rel","class","target"],(Io,To)=>{ho=Zt(ho,Io)}),ho));var nt,Zt,ho;xe.undoManager.transact(()=>{Ne.href===oe.href&&oe.attach(),Xe.fold(()=>{((nt,Yt,Zt,ho)=>{const Io=nt.dom;Ps(Yt)?Xa(Io,Yt,ho):Zt.fold(()=>{nt.execCommand("mceInsertLink",!1,ho)},To=>{nt.insertContent(Io.createHTML("a",ho,Io.encode(To)))})})(xe,Re,Ne.text,tt)},nt=>{xe.focus(),((Yt,Zt,ho,Io)=>{ho.each(To=>{Wo(Zt,"innerText")?Zt.innerText=To:Zt.textContent=To}),Yt.dom.setAttribs(Zt,Io),Yt.selection.select(Zt)})(xe,nt,Ne.text,tt)})})})(xe,oe,Re)},pn=xe=>{var oe;xe.hasPlugin("rtc",!0)?xe.execCommand("unlink"):(oe=xe).undoManager.transact(()=>{const Ne=oe.selection.getNode();Ps(Ne)?dr(oe,Ne):(Re=>{const Xe=Re.dom,tt=Re.selection,nt=tt.getBookmark(),Yt=tt.getRng().cloneRange(),Zt=Xe.getParent(Yt.startContainer,"a[href]",Re.getBody()),ho=Xe.getParent(Yt.endContainer,"a[href]",Re.getBody());Zt&&Yt.setStartBefore(Zt),ho&&Yt.setEndAfter(ho),tt.setRng(Yt),Re.execCommand("unlink"),tt.moveToBookmark(nt)})(oe),oe.focus()})},dr=(xe,oe)=>{var Ne;const Re=xe.dom.select("img",oe)[0];if(Re){const Xe=xe.dom.getParents(Re,"a[href]",oe)[0];Xe&&(null===(Ne=Xe.parentNode)||void 0===Ne||Ne.insertBefore(Re,Xe),xe.dom.remove(Xe))}},Xa=(xe,oe,Ne)=>{var Re;const Xe=xe.select("img",oe)[0];if(Xe){const tt=xe.create("a",Ne);null===(Re=Xe.parentNode)||void 0===Re||Re.insertBefore(tt,Xe),tt.appendChild(Xe)}},as=(xe,oe)=>Qe(oe,Ne=>{return Wo(Xe=Ne,"items")&&null!=Xe.items?as(xe,Ne.items):ee(Ne.value===xe,Ne);var Xe});var Yo=tinymce.util.Tools.resolve("tinymce.util.Delay");const Fr=xe=>{const oe=xe.href;return oe.indexOf("@")>0&&-1===oe.indexOf("/")&&-1===oe.indexOf("mailto:")?vt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ne=>({...Ne,href:"mailto:"+oe})}):vt.none()},Jr=(xe,oe)=>Ne=>{const Re=Ne.href;return 1===xe&&!Qs(Re)||0===xe&&/^\s*www(\.|\d\.)/i.test(Re)?vt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${oe}:// prefix?`,preprocess:Xe=>({...Xe,href:oe+"://"+Re})}):vt.none()},lt=xe=>{const oe=xe.dom.select("a:not([href])"),Ne=vn(((Re,Xe)=>{const tt=Re.length,nt=new Array(tt);for(let Yt=0;Yt<tt;Yt++)nt[Yt]=Xe(Re[Yt]);return nt})(oe,Re=>{const Xe=Re.name||Re.id;return Xe?[{text:Xe,value:"#"+Xe}]:[]}));return Ne.length>0?vt.some([{text:"None",value:""}].concat(Ne)):vt.none()},vo=xe=>{const oe=N(xe);return oe.length>0?H(oe):vt.none()},zr=xe=>{try{return vt.some(JSON.parse(xe))}catch{return vt.none()}},Nr=(xe,oe)=>{const Ne=un(xe);if(Ne.length>0){const Re=et(oe,"_blank"),Xe=tt=>Is(yt(tt),Re);return(!1===wi(xe)?_i(Xe):H)(Ne)}return vt.none()},gs=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Xo=xe=>{const oe=Ve(xe);return So(oe)?H(oe).orThunk(()=>vt.some(gs)):!1===oe?vt.none():vt.some(gs)},Gt=(xe,oe,Ne)=>{const Re=xe.getAttrib(oe,Ne);return null!==Re&&Re.length>0?vt.some(Re):vt.none()},ki=xe=>{var Ne;(Ne=xe,((xe,oe)=>(Ne=>{const Re=tt=>Ne.convertURL(tt.value||tt.url||"","href"),Xe=Kt(Ne);return new Promise(tt=>{Xr(Xe)?fetch(Xe).then(nt=>nt.ok?nt.text().then(zr):Promise.reject()).then(tt,()=>tt(vt.none())):Ya(Xe)?Xe(nt=>tt(vt.some(nt))):tt(vt.from(Xe))}).then(tt=>tt.bind(_i(Re)).map(nt=>nt.length>0?[{text:"None",value:""}].concat(nt):nt))})(xe).then(Ne=>{const Re=((Xe,tt)=>{const nt=Xe.dom,Yt=Si(Xe)?vt.some(Ci(Xe.selection,tt)):vt.none(),Zt=tt.bind(Ro=>vt.from(nt.getAttrib(Ro,"href"))),ho=tt.bind(Ro=>vt.from(nt.getAttrib(Ro,"target"))),Io=tt.bind(Ro=>Gt(nt,Ro,"rel")),To=tt.bind(Ro=>Gt(nt,Ro,"class"));return{url:Zt,text:Yt,title:tt.bind(Ro=>Gt(nt,Ro,"title")),target:ho,rel:Io,linkClass:To}})(xe,oe);return{anchor:Re,catalogs:{targets:Xo(xe),rels:Nr(xe,Re.target),classes:vo(xe),anchor:lt(xe),link:Ne},optNode:oe,flags:{titleEnabled:it(xe)}}}))(Ne,yn(Ne))).then(Ne=>{var Xe,tt;return((Xe,tt,nt)=>{const Yt=Xe.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Zt=Xe.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],ho=((Ro,jn)=>{const or=Ro.anchor,xn=or.url.getOr("");return{url:{value:xn,meta:{original:{value:xn}}},text:or.text.getOr(""),title:or.title.getOr(""),anchor:xn,link:xn,rel:or.rel.getOr(""),target:or.target.or(jn).getOr(""),linkClass:or.linkClass.getOr("")}})(Xe,vt.from(lr(nt))),Io=Xe.catalogs,To=((xe,oe)=>{const Ne={text:xe.text,title:xe.title};return{onChange:(Xe,tt)=>{const nt=tt.name;return"url"===nt?(Yt=>{const Zt=ee(Ne.text.length<=0,vt.from(null===(Io=(ho=Yt.url).meta)||void 0===Io?void 0:Io.text).getOr(ho.value));var ho,Io;const To=ee(Ne.title.length<=0,vt.from(null===(jn=Yt.url.meta)||void 0===jn?void 0:jn.title).getOr(""));var jn;return Zt.isSome()||To.isSome()?vt.some({...Zt.map(Ro=>({text:Ro})).getOr({}),...To.map(Ro=>({title:Ro})).getOr({})}):vt.none()})(Xe()):an.call(["anchor","link"],nt)>-1?((Xe,tt)=>{const nt=(Yt=oe,Zt=tt,"link"===Zt?Yt.link:"anchor"===Zt?Yt.anchor:vt.none()).getOr([]);var Yt,Zt;return((ho,Io,To,Ro)=>{const jn=Ro[Io],or=ho.length>0;return void 0!==jn?as(jn,To).map(xn=>({url:{value:xn.value,meta:{text:or?ho:xn.text,attach:sn}},text:or?ho:xn.text})):vt.none()})(Ne.text,tt,nt,Xe)})(Xe(),nt):(("text"===nt||"title"===nt)&&(Ne[nt]=Xe()[nt]),vt.none())}}})(ho,Io);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:vn([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Yt,Zt,An([Io.anchor.map(Je("anchor","Anchors")),Io.rels.map(Je("rel","Rel")),Io.targets.map(Je("target","Open link in...")),Io.link.map(Je("link","Link list")),Io.classes.map(Je("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ho,onChange:(Ro,{name:jn})=>{To.onChange(Ro.getData,{name:jn}).each(or=>{Ro.setData(or)})},onSubmit:tt}})(Ne,(Xe=xe,tt=Ne,nt=>{const Yt=nt.getData();if(!Yt.url.value)return pn(Xe),void nt.close();const Zt=To=>vt.from(Yt[To]).filter(Ro=>!et(tt.anchor[To],Ro)),ho={href:Yt.url.value,text:Zt("text"),target:Zt("target"),rel:Zt("rel"),class:Zt("linkClass"),title:Zt("title")},Io={href:Yt.url.value,attach:void 0!==Yt.url.meta&&Yt.url.meta.attach?Yt.url.meta.attach:sn};var To,Ro;(To=Xe,Ro=ho,Qe([Fr,Jr(rs(To),Fl(To))],jn=>jn(Ro)).fold(()=>Promise.resolve(Ro),jn=>new Promise(or=>{((xn,Jo,ks)=>{const Qr=xn.selection.getRng();Yo.setEditorTimeout(xn,()=>{xn.windowManager.confirm(Jo,Es=>{xn.selection.setRng(Qr),(xn=>{or(xn?jn.preprocess(Ro):Ro)})(Es)})})})(To,jn.message)}))).then(To=>{gn(Xe,Io,To)}),nt.close()}),xe)}).then(Ne=>{xe.windowManager.open(Ne)})};var ac=tinymce.util.Tools.resolve("tinymce.util.VK");const _r=(xe,oe)=>xe.dom.getParent(oe,"a[href]"),Fi=xe=>_r(xe,xe.selection.getStart()),Ei=(xe,oe)=>{if(oe){const Ne=Nn(oe);if(/^#/.test(Ne)){const Re=xe.dom.select(Ne);Re.length&&xe.selection.scrollIntoView(Re[0],!0)}else(Re=>{const Xe=document.createElement("a");Xe.target="_blank",Xe.href=Re,Xe.rel="noreferrer noopener";const tt=document.createEvent("MouseEvents");var nt,Yt;tt.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),nt=Xe,Yt=tt,document.body.appendChild(nt),nt.dispatchEvent(Yt),document.body.removeChild(nt)})(oe.href)}},Ja=xe=>()=>{xe.execCommand("mceLink",!1,{dialog:!0})},Na=xe=>()=>{Ei(xe,Fi(xe))},zi=(xe,oe)=>(xe.on("NodeChange",oe),()=>xe.off("NodeChange",oe)),Ss=xe=>oe=>{const Ne=()=>{oe.setActive(!xe.mode.isReadOnly()&&la(xe,xe.selection.getNode())),oe.setEnabled(xe.selection.isEditable())};return Ne(),zi(xe,Ne)},ba=xe=>oe=>{const Ne=()=>{oe.setEnabled(xe.selection.isEditable())};return Ne(),zi(xe,Ne)},ic=xe=>oe=>{const Ne=()=>{return oe.setEnabled(1===((Re=xe).selection.isCollapsed()?cr(Re.dom.getParents(Re.selection.getStart())):Lr(Re.selection.getRng())).length);var Re};return Ne(),zi(xe,Ne)},Ls=xe=>oe=>{const Ne=xe.dom.getParents(xe.selection.getStart()),Re=Xe=>{var nt;oe.setEnabled((fa(Xe)||(nt=xe.selection.getRng(),Lr(nt).length>0))&&xe.selection.isEditable())};return Re(Ne),zi(xe,Xe=>Re(Xe.parents))};ll.add("link",xe=>{var oe;(oe=>{const Ne=oe.options.register;Ne("link_assume_external_targets",{processor:Re=>{const Xe=Xr(Re)||Ta(Re);return Xe?!0===Re?{value:1,valid:Xe}:"http"===Re||"https"===Re?{value:Re,valid:Xe}:{value:0,valid:Xe}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Ne("link_context_toolbar",{processor:"boolean",default:!1}),Ne("link_list",{processor:Re=>Xr(Re)||Ya(Re)||Js(Re,dl)}),Ne("link_default_target",{processor:"string"}),Ne("link_default_protocol",{processor:"string",default:"https"}),Ne("link_target_list",{processor:Re=>Ta(Re)||Js(Re,dl),default:!0}),Ne("link_rel_list",{processor:"object[]",default:[]}),Ne("link_class_list",{processor:"object[]",default:[]}),Ne("link_title",{processor:"boolean",default:!0}),Ne("allow_unsafe_link_target",{processor:"boolean",default:!1}),Ne("link_quicklink",{processor:"boolean",default:!1})})(xe),(oe=xe).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ja(oe),onSetup:Ss(oe)}),oe.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Na(oe),onSetup:ic(oe)}),oe.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>pn(oe),onSetup:Ls(oe)}),(oe=>{oe.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Na(oe),onSetup:ic(oe)}),oe.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:ba(oe),onAction:Ja(oe)}),oe.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>pn(oe),onSetup:Ls(oe)})})(xe),(oe=>{oe.ui.registry.addContextMenu("link",{update:Ne=>oe.dom.isEditable(Ne)?fa(oe.dom.getParents(Ne,"a"))?"link unlink openlink":"link":""})})(xe),(oe=>{const Ne=Re=>{const Xe=oe.selection.getNode();return Re.setEnabled(la(oe,Xe)),sn};oe.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ss(oe)},label:"Link",predicate:Re=>Xn(oe)&&la(oe,Re),initValue:()=>yn(oe).fold(()=>"",Nn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Re=>{const Xe=oe.selection.getNode();return Re.setActive(la(oe,Xe)),Ss(oe)(Re)},onAction:Re=>{const Xe=Re.getValue(),tt=(nt=>{const Yt=yn(oe),Zt=Si(oe);if(Yt.isNone()&&Zt){const ho=Ci(oe.selection,Yt);return ee(0===ho.length,nt)}return vt.none()})(Xe);gn(oe,{href:Xe,attach:sn},{href:Xe,text:tt,title:vt.none(),rel:vt.none(),target:vt.none(),class:vt.none()}),oe.selection.collapse(!1),Re.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ne,onAction:Re=>{pn(oe),Re.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ne,onAction:Re=>{Na(oe)(),Re.hide()}}]})})(xe),(oe=>{oe.on("click",Ne=>{const Re=_r(oe,Ne.target);Re&&ac.metaKeyPressed(Ne)&&(Ne.preventDefault(),Ei(oe,Re))}),oe.on("keydown",Ne=>{if(!Ne.isDefaultPrevented()&&13===Ne.keyCode&&!0===(Re=Ne).altKey&&!1===Re.shiftKey&&!1===Re.ctrlKey&&!1===Re.metaKey){const Re=Fi(oe);Re&&(Ne.preventDefault(),Ei(oe,Re))}var Re})})(xe),(oe=>{oe.addCommand("mceLink",(Ne,Re)=>{!0!==Re?.dialog&&ss(oe)?oe.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):ki(oe)})})(xe),(oe=>{oe.addShortcut("Meta+K","",()=>{oe.execCommand("mceLink")})})(xe)})}(),function(){"use strict";var ll=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xs=I=>V=>(j=>{const X=typeof j;return null===j?"null":"object"===X&&Array.isArray(j)?"array":"object"===X&&(le=be=j,(Pe=String).prototype.isPrototypeOf(le)||(null===(Ge=be.constructor)||void 0===Ge?void 0:Ge.name)===Pe.name)?"string":X;var le,be,Pe,Ge})(V)===I,cl=I=>V=>typeof V===I,Xr=Xs("string"),dl=Xs("array"),So=cl("boolean"),ms=I=>void 0===I,Ta=I=>!(null==I),On=cl("function"),Ya=cl("number"),Js=()=>{},sn=I=>()=>I,_t=I=>I,vt=(I,V)=>I===V;function an(I,...V){return(...j)=>{const X=V.concat(j);return I.apply(null,X)}}const qo=I=>{I()},vn=sn(!1),Qe=sn(!0);class et{constructor(V,j){this.tag=V,this.value=j}static some(V){return new et(!0,V)}static none(){return et.singletonNone}fold(V,j){return this.tag?j(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?et.some(V(this.value)):et.none()}bind(V){return this.tag?V(this.value):et.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:et.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return Ta(V)?et.some(V):et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}et.singletonNone=new et(!1);const An=Object.keys,ee=Object.hasOwnProperty,ut=(I,V)=>{const j=An(I);for(let X=0,le=j.length;X<le;X++){const be=j[X];V(I[be],be)}},rs=(I,V)=>{const j={};var X,be,Pe,Ge;return be=V,X=j,Pe=(le,be)=>{X[be]=le},Ge=Js,ut(I,(We,Ke)=>{(be(We,Ke)?Pe:Ge)(We,Ke)}),j},Xn=I=>An(I).length,Kt=(I,V)=>lr(I,V)?et.from(I[V]):et.none(),lr=(I,V)=>ee.call(I,V),Fl=(I,V)=>lr(I,V)&&null!=I[V],Ve=Array.prototype.indexOf,un=Array.prototype.push,N=(I,V)=>Ve.call(I,V)>-1,it=(I,V)=>{for(let j=0,X=I.length;j<X;j++)if(V(I[j],j))return!0;return!1},wi=(I,V)=>{const j=[];for(let X=0;X<I;X++)j.push(V(X));return j},ss=(I,V)=>{const j=I.length,X=new Array(j);for(let le=0;le<j;le++)X[le]=V(I[le],le);return X},Pr=(I,V)=>{for(let j=0,X=I.length;j<X;j++)V(I[j],j)},Ze=(I,V)=>{const j=[];for(let X=0,le=I.length;X<le;X++){const be=I[X];V(be,X)&&j.push(be)}return j},wo=(I,V,j)=>(Pr(I,(X,le)=>{j=V(j,X,le)}),j),Vo=(I,V)=>((j,X,le)=>{for(let be=0,Pe=j.length;be<Pe;be++){const Ge=j[be];if(X(Ge,be))return et.some(Ge);if(le(Ge,be))break}return et.none()})(I,V,vn),H=(I,V)=>(j=>{const X=[];for(let le=0,be=j.length;le<be;++le){if(!dl(j[le]))throw new Error("Arr.flatten item "+le+" was not an array, input: "+j);un.apply(X,j[le])}return X})(ss(I,V)),_i=(I,V)=>{for(let j=0,X=I.length;j<X;++j)if(!0!==V(I[j],j))return!1;return!0},Je=(I,V)=>V>=0&&V<I.length?et.some(I[V]):et.none(),yt=(I,V)=>{for(let j=0;j<I.length;j++){const X=V(I[j],j);if(X.isSome())return X}return et.none()},Oa=I=>{if(null==I)throw new Error("Node cannot be null or undefined");return{dom:I}},st={fromHtml:(I,V)=>{const j=(V||document).createElement("div");if(j.innerHTML=I,!j.hasChildNodes()||j.childNodes.length>1){const X="HTML does not have a single root node";throw console.error(X,I),new Error(X)}return Oa(j.childNodes[0])},fromTag:(I,V)=>{const j=(V||document).createElement(I);return Oa(j)},fromText:(I,V)=>{const j=(V||document).createTextNode(I);return Oa(j)},fromDom:Oa,fromPoint:(I,V,j)=>et.from(I.dom.elementFromPoint(V,j)).map(Oa)},Wo=(I,V)=>{const j=I.dom;if(1!==j.nodeType)return!1;{const X=j;if(void 0!==X.matches)return X.matches(V);if(void 0!==X.msMatchesSelector)return X.msMatchesSelector(V);if(void 0!==X.webkitMatchesSelector)return X.webkitMatchesSelector(V);if(void 0!==X.mozMatchesSelector)return X.mozMatchesSelector(V);throw new Error("Browser lacks native selectors")}},qt=I=>1!==I.nodeType&&9!==I.nodeType&&11!==I.nodeType||0===I.childElementCount,Ee=(I,V)=>I.dom===V.dom,ha=Wo;typeof window<"u"||Function("return this;")();const Rt=I=>I.dom.nodeName.toLowerCase(),ft=I=>I.dom.nodeType,Qs=I=>V=>ft(V)===I,Nn=Qs(1),Is=Qs(3),yn=Qs(9),la=Qs(11),Ci=I=>V=>Nn(V)&&Rt(V)===I,Lr=I=>yn(I)?I:st.fromDom(I.dom.ownerDocument),cr=I=>et.from(I.dom.parentNode).map(st.fromDom),fa=I=>et.from(I.dom.nextSibling).map(st.fromDom),Si=I=>ss(I.dom.childNodes,st.fromDom),Ps=On(Element.prototype.attachShadow)&&On(Node.prototype.getRootNode)?I=>st.fromDom(I.dom.getRootNode()):Lr,Rn=I=>st.fromDom(I.dom.host),Aa=I=>{const V=Is(I)?I.dom.parentNode:I.dom;if(null==V||null===V.ownerDocument)return!1;const j=V.ownerDocument;return(be=>{const Pe=Ps(be);return la(Ge=Pe)&&Ta(Ge.dom.host)?et.some(Pe):et.none();var Ge})(st.fromDom(V)).fold(()=>j.body.contains(V),(X=Aa,le=Rn,be=>X(le(be))));var X,le};var gn=(I,V,j,X,le)=>I(j,X)?et.some(j):On(le)&&le(j)?et.none():V(j,X,le);const pn=(I,V,j)=>{let X=I.dom;const le=On(j)?j:vn;for(;X.parentNode;){X=X.parentNode;const be=st.fromDom(X);if(V(be))return et.some(be);if(le(be))break}return et.none()},dr=(I,V,j)=>pn(I,X=>Wo(X,V),j),as=(I,V)=>((j,X)=>{const le=void 0===X?document:X.dom;return qt(le)?et.none():et.from(le.querySelector(j)).map(st.fromDom)})(V,I),sc=(I,V,j)=>gn((X,le)=>Wo(X,le),dr,I,V,j),Yo=(I,V=!1)=>{return Aa(I)?I.dom.isContentEditable:(j=I,sc(j,"[contenteditable]")).fold(sn(V),X=>"true"===Fr(X));var j},Fr=I=>I.dom.contentEditable,Jr=I=>V=>Ee(V,st.fromDom(I.getBody())),lt=I=>/^\d+(\.\d+)?$/.test(I)?I+"px":I,vo=I=>st.fromDom(I.selection.getStart()),zr=(I,V)=>{let j=[];return Pr(Si(I),X=>{V(X)&&(j=j.concat([X])),j=j.concat(zr(X,V))}),j},Nr=(I,V)=>Ze(Si(I),le=>Wo(le,V)),gs=(I,V)=>((j,X)=>{const le=void 0===X?document:X.dom;return qt(le)?[]:ss(le.querySelectorAll(j),st.fromDom)})(V,I),Xo=(I,V,j)=>{if(!(Xr(j)||So(j)||Ya(j)))throw console.error("Invalid call to Attribute.set. Key ",V,":: Value ",j,":: Element ",I),new Error("Attribute value was not simple");I.setAttribute(V,j+"")},Gt=(I,V)=>{const j=I.dom.getAttribute(V);return null===j?void 0:j},Hr=(I,V)=>et.from(Gt(I,V)),ki=(I,V)=>{I.dom.removeAttribute(V)},ac=(I,V,j=vt)=>I.exists(X=>j(X,V)),_r=(I,V,j)=>I.isSome()&&V.isSome()?et.some(j(I.getOrDie(),V.getOrDie())):et.none(),Fi=(I,V)=>{return j=I,""===(X=V)||j.length>=X.length&&j.substr(0,0+X.length)===X;var j,X},Ei=(Ja=/^\s+|\s+$/g,I=>I.replace(Ja,""));var Ja;const Na=I=>I.length>0,zi=(I,V=10)=>{const j=parseInt(I,V);return isNaN(j)?et.none():et.some(j)},Ss=I=>void 0!==I.style&&On(I.style.getPropertyValue),ba=(I,V)=>{const j=I.dom,X=window.getComputedStyle(j).getPropertyValue(V);return""!==X||Aa(I)?X:ic(j,V)},ic=(I,V)=>Ss(I)?I.style.getPropertyValue(V):"",Ls=(I,V)=>{const X=ic(I.dom,V);return et.from(X).filter(le=>le.length>0)},xe=(I,V,j=0)=>Hr(I,V).map(X=>parseInt(X,10)).getOr(j),oe=(I,V)=>Ne(I,V,Qe),Ne=(I,V,j)=>H(Si(I),X=>Wo(X,V)?j(X)?[X]:[]:Ne(X,V,j)),Re=["tfoot","thead","tbody","colgroup"],Xe=(I,V,j)=>({element:I,rowspan:V,colspan:j}),tt=(I,V,j)=>({element:I,cells:V,section:j}),nt=(I,V)=>sc(I,"table",V),Yt=I=>oe(I,"tr"),Zt=I=>nt(I).fold(sn([]),V=>Nr(V,"colgroup")),ho=I=>cr(I).map(V=>{const j=Rt(V);return N(Re,j)?j:"tbody"}).getOr("tbody"),Io=I=>Hr(I,"data-snooker-locked-cols").bind(V=>et.from(V.match(/\d+/g))).map(V=>((j,X)=>{const le={};for(let be=0,Pe=j.length;be<Pe;be++){const Ge=j[be];le[String(Ge)]=X(Ge,be)}return le})(V,Qe)),To=(I,V)=>I+","+V,jn=I=>(I=>{const V={},j=[];var X;const le=(X=I,Je(X,0)).map(Ct=>Ct.element).bind(nt).bind(Io).getOr({});let be=0,Pe=0,Ge=0;const{pass:We,fail:Ke}=((Ct,je)=>{const Do=[],St=[];for(let U=0,w=Ct.length;U<w;U++){const M=Ct[U];(mo=M,"colgroup"===mo.section?Do:St).push(M)}var mo;return{pass:Do,fail:St}})(I);Pr(Ke,Ct=>{const je=[];Pr(Ct.cells,Do=>{let St=0;for(;void 0!==V[To(Ge,St)];)St++;const mo=Fl(le,St.toString()),U={element:Do.element,rowspan:Do.rowspan,colspan:Do.colspan,row:Ge,column:St,isLocked:mo};for(let w=0;w<Do.colspan;w++)for(let M=0;M<Do.rowspan;M++){const J=St+w,ge=To(Ge+M,J);V[ge]=U,Pe=Math.max(Pe,J+1)}je.push(U)}),be++,j.push(tt(Ct.element,je,Ct.section)),Ge++});const{columns:mt,colgroups:ct}=(Ct=We,Je(Ct,Ct.length-1)).map(Ct=>{const je=(St=>{const mo={};let U=0;return Pr(St.cells,w=>{const M=w.colspan;wi(M,J=>{const ge=U+J;mo[ge]={element:w.element,colspan:M,column:ge}}),U+=M}),mo})(Ct);return{colgroups:[(St=Ct.element,mo=((St,mo)=>{const U=[];return ut(St,(w,M)=>{U.push(mo(w,M))}),U})(je,_t),{element:St,columns:mo})],columns:je};var St,mo}).getOrThunk(()=>({colgroups:[],columns:{}}));var Ct;return{grid:((Ct,je)=>({rows:Ct,columns:je}))(be,Pe),access:V,all:j,columns:mt,colgroups:ct}})((j=>{const X=Yt(j);return le=[...Zt(j),...X],be=ho,ss(le,Pe=>{if("colgroup"===Rt(Pe)){const Ge=ss(Wo(We=Pe,"colgroup")?Nr(We,"col"):H(Zt(We),Ke=>Nr(Ke,"col")),We=>{const Ke=xe(We,"span",1);return Xe(We,1,Ke)});return tt(Pe,Ge,"colgroup")}var We;{const Ge=ss((We=>oe(We,"th,td"))(Pe),We=>{const Ke=xe(We,"rowspan",1),mt=xe(We,"colspan",1);return Xe(We,Ke,mt)});return tt(Pe,Ge,be(Pe))}});var le,be})(I)),or=(I,V,j)=>et.from(I.access[To(V,j)]),xn=(I,V,j)=>{const X=((le,be)=>{const Pe=H(le.all,Ge=>Ge.cells);return Ze(Pe,le=>j(V,le.element))})(I);return X.length>0?et.some(X[0]):et.none()},Jo=(I,V)=>et.from(I.columns[V]);var ks=tinymce.util.Tools.resolve("tinymce.util.Tools");const Qr=(I,V,j)=>{const X=I.select("td,th",V);let le;for(let be=0;be<X.length;be++){const Pe=I.getStyle(X[be],j);if(ms(le)&&(le=Pe),le!==Pe)return""}return le},Es=(I,V,j)=>{ks.each("left center right".split(" "),X=>{X!==j&&I.formatter.remove("align"+X,{},V)}),j&&I.formatter.apply("align"+j,{},V)},Qa=(I,V,j)=>{I.dispatch("TableModified",{...j,table:V})},Hi=(I,V,j)=>{return le=j,(be=>{const Pe=parseFloat(be);return isNaN(Pe)?et.none():et.some(Pe)})(ba(I,V)).getOr(le);var le};var Za=tinymce.util.Tools.resolve("tinymce.Env");const lc=wi(5,I=>{const V=`${I+1}px`;return{title:V,value:V}}),Ti=ss(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],I=>({title:I,value:I.toLowerCase()})),zc=I=>{var V;const j=I.dom,X=null!==(V=j.getParent(I.selection.getStart(),j.isBlock))&&void 0!==V?V:I.getBody();return(I=>((V,j)=>{const X=V.dom;return(X.getBoundingClientRect().width||X.offsetWidth)-Hi(be=V,"padding-left",0)-Hi(be,"padding-right",0)-Hi(be,"border-left-width",0)-Hi(be,"border-right-width",0);var be})(I))(st.fromDom(X))+"px"},Vr=I=>V=>V.options.get(I),du=Vr("table_sizing_mode"),Hc=Vr("table_border_widths"),cc=Vr("table_border_styles"),dc=Vr("table_cell_advtab"),Ur=Vr("table_row_advtab"),ei=Vr("table_advtab"),Vc=Vr("table_appearance_options"),Kg=Vr("table_grid"),ps=Vr("table_style_by_css"),va=Vr("table_cell_class_list"),ti=Vr("table_row_class_list"),Uc=Vr("table_class_list"),ro=Vr("table_toolbar"),hs=Vr("table_background_color_map"),zn=Vr("table_border_color_map"),ur=I=>"fixed"===du(I),uu=I=>"responsive"===du(I),Ht=I=>{const V=I.options,j=V.get("table_default_styles");return V.isSet("table_default_styles")?j:(le=j,uu(X=I)||!ps(X)?le:ur(X)?{...le,width:zc(X)}:{...le,width:"100%"});var X,le},mu=I=>{const V=I.options,j=V.get("table_default_attributes");return V.isSet("table_default_attributes")?j:(le=j,uu(X=I)||ps(X)?le:ur(X)?{...le,width:zc(X)}:{...le,width:"100%"});var X,le},gu=(I,V)=>V.column>=I.startCol&&V.column+V.colspan-1<=I.finishCol&&V.row>=I.startRow&&V.row+V.rowspan-1<=I.finishRow,$e=jn,oi=(I,V)=>{cr(I).each(j=>{j.dom.insertBefore(V.dom,I.dom)})},Zr=(I,V)=>{fa(I).fold(()=>{cr(I).each(j=>{mr(j,V)})},j=>{oi(j,V)})},mr=(I,V)=>{I.dom.appendChild(V.dom)},Jn=(I,V)=>{Pr(V,(j,X)=>{Zr(0===X?I:V[X-1],j)})},wm=I=>{const V=I.dom;null!==V.parentNode&&V.parentNode.removeChild(V)},pu=((I,V)=>{const j=X=>I(X)?et.from(X.dom.nodeValue):et.none();return{get:X=>{if(!I(X))throw new Error("Can only get text value of a text node");return j(X).getOr("")},getOption:j,set:(X,le)=>{if(!I(X))throw new Error("Can only set raw text value of a text node");X.dom.nodeValue=le}}})(Is);var mn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Po=(I,V,j)=>V.bind(X=>j.filter(an(I.eq,X))),hu={up:sn({selector:dr,closest:sc,predicate:pn,all:(I,V)=>{const j=On(V)?V:vn;let X=I.dom;const le=[];for(;null!=X.parentNode;){const be=X.parentNode,Pe=st.fromDom(be);if(le.push(Pe),!0===j(Pe))break;X=be}return le}}),down:sn({selector:gs,predicate:zr}),styles:sn({get:ba,getRaw:Ls,set:(I,V,j)=>{((X,le,be)=>{if(!Xr(be))throw console.error("Invalid call to CSS.set. Property ",le,":: Value ",be,":: Element ",X),new Error("CSS value must be a string: "+be);Ss(X)&&X.style.setProperty(le,be)})(I.dom,V,j)},remove:(I,V)=>{var j,X;X=V,Ss(j=I.dom)&&j.style.removeProperty(X),ac(Hr(I,"style").map(Ei),"")&&ki(I,"style")}}),attrs:sn({get:Gt,set:(I,V,j)=>{Xo(I.dom,V,j)},remove:ki,copyTo:(I,V)=>{((j,X)=>{const le=j.dom;ut(X,(be,Pe)=>{Xo(le,Pe,be)})})(V,wo(I.dom.attributes,(j,X)=>(j[X.name]=X.value,j),{}))}}),insert:sn({before:oi,after:Zr,afterAll:Jn,append:mr,appendAll:(I,V)=>{Pr(V,j=>{mr(I,j)})},prepend:(I,V)=>{var j;(j=I,et.from(j.dom.childNodes[0]).map(st.fromDom)).fold(()=>{mr(I,V)},j=>{I.dom.insertBefore(V.dom,j.dom)})},wrap:(I,V)=>{oi(I,V),mr(V,I)}}),remove:sn({unwrap:I=>{const V=Si(I);V.length>0&&Jn(I,V),wm(I)},remove:wm}),create:sn({nu:st.fromTag,clone:I=>st.fromDom(I.dom.cloneNode(!1)),text:st.fromText}),query:sn({comparePosition:(I,V)=>I.dom.compareDocumentPosition(V.dom),prevSibling:I=>et.from(I.dom.previousSibling).map(st.fromDom),nextSibling:fa}),property:sn({children:Si,name:Rt,parent:cr,document:I=>Lr(I).dom,isText:Is,isComment:I=>8===ft(I)||"#comment"===Rt(I),isElement:Nn,isSpecial:I=>{const V=Rt(I);return N(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],V)},getLanguage:I=>Nn(I)?Hr(I,"lang"):et.none(),getText:I=>pu.get(I),setText:(I,V)=>pu.set(I,V),isBoundary:I=>!!Nn(I)&&("body"===Rt(I)||N(mn,Rt(I))),isEmptyTag:I=>!!Nn(I)&&N(["br","img","hr","input"],Rt(I)),isNonEditable:I=>Nn(I)&&"false"===Gt(I,"contenteditable")}),eq:Ee,is:ha},gr=I=>dr(I,"table"),Ra=(I,V,j)=>as(I,V).bind(X=>as(I,j).bind(le=>{return(be=gr,Pe=[X,le],Ge=hu,Ke=Pe,Ke.length>0?(ct=(Ge,We)=>be(We),((I,V,j,X)=>{const le=V(I,j);return be=(Ge,We)=>{const Ke=V(I,We);return Po(I,Ge,Ke)},Pe=le,((Ge,We)=>{for(let Ke=Ge.length-1;Ke>=0;Ke--)We(Ge[Ke])})(X,(Ge,We)=>{Pe=be(Pe,Ge)}),Pe;var be,Pe})(Ge,ct,(Ko=Ke)[0],Ko.slice(1))):et.none()).map(Ge=>({first:X,last:le,table:Ge}));var Ge,Ke,ct,Ko,be,Pe})),Ts=I=>ss(I,st.fromDom),Go="data-mce-selected",$c="data-mce-first-selected",ca="data-mce-last-selected",ml={selected:Go,selectedSelector:"td["+Go+"],th["+Go+"]",firstSelected:$c,firstSelectedSelector:"td["+$c+"],th["+$c+"]",lastSelected:ca,lastSelectedSelector:"td["+ca+"],th["+ca+"]"},uc=I=>(V,j)=>{const X=Rt(V),le="col"===X||"colgroup"===X?nt(be=V).bind(Pe=>((Ke,mt)=>{const ct=gs(Ke,mt);return ct.length>0?et.some(ct):et.none()})(Pe,ml.firstSelectedSelector)).fold(sn(be),Pe=>Pe[0]):V;var be;return sc(le,I,j)},ln=uc("th,td,caption"),jr=uc("th,td"),Rr=I=>Ts(I.model.table.getSelectedCells()),gl=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Cr=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,_m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Wc=I=>{return(V=I,Fi(V,"#")?(j=V,j.substring(1)):V).toUpperCase();var j,V},da=I=>{const V=I.toString(16);return(1===V.length?"0"+V:V).toUpperCase()},fu=I=>{return V=da(I.red)+da(I.green)+da(I.blue),{value:Wc(V)};var V},Yg=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Cm=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,fs=(I,V,j,X)=>({red:I,green:V,blue:j,alpha:X}),wd=(I,V,j,X)=>{const le=parseInt(I,10),be=parseInt(V,10),Pe=parseInt(j,10),Ge=parseFloat(X);return fs(le,be,Pe,Ge)},zl=I=>{if("transparent"===I)return et.some(fs(0,0,0,0));const V=Yg.exec(I);if(null!==V)return et.some(wd(V[1],V[2],V[3],"1"));const j=Cm.exec(I);return null!==j?et.some(wd(j[1],j[2],j[3],j[4])):et.none()},pl=I=>{let V=I;return{get:()=>V,set:j=>{V=j}}},mc=(I,V,j)=>X=>{const le=(Ge=>{const We=pl(et.none()),Ke=()=>We.get().each(Ge);return{clear:()=>{Ke(),We.set(et.none())},isSet:()=>We.get().isSome(),get:()=>We.get(),set:mt=>{Ke(),We.set(et.some(mt))}}})(Ge=>Ge.unbind()),be=!Na(j),Pe=()=>{const Ge=Rr(I),We=Ke=>I.formatter.match(V,{value:j},Ke.dom,be);be?(X.setActive(!it(Ge,We)),le.set(I.formatter.formatChanged(V,Ke=>X.setActive(!Ke),!0))):(X.setActive(_i(Ge,We)),le.set(I.formatter.formatChanged(V,X.setActive,!1,{value:j})))};return I.initialized?Pe():I.on("init",Pe),le.clear},Vi=I=>Fl(I,"menu"),nr=I=>ss(I,V=>{const j=V.text||V.title||"";return Vi(V)?{text:j,items:nr(V.menu)}:{text:j,value:V.value}}),Ba=(I,V,j,X)=>ss(V,le=>{const be=le.text||le.title;return Vi(le)?{type:"nestedmenuitem",text:be,getSubmenuItems:()=>Ba(I,le.menu,j,X)}:{text:be,type:"togglemenuitem",onAction:()=>X(le.value),onSetup:mc(I,j,le.value)}}),re=(I,V)=>j=>{I.execCommand("mceTableApplyCellStyle",!1,{[V]:j})},qc=I=>H(I,V=>Vi(V)?[{...V,menu:qc(V.menu)}]:Na(V.value)?[V]:[]),Hl=(I,V,j,X)=>le=>le(Ba(I,V,j,X)),ea=(I,V,j)=>{const X=ss(V,le=>{return{text:le.title,value:"#"+(Pe=le.value,(be=Pe,Ge=be,Cr.test(Ge)||_m.test(Ge)?et.some({value:Wc(be)}):et.none()).orThunk(()=>zl(Pe).map(fu)).getOrThunk(()=>{const Ge=document.createElement("canvas");Ge.height=1,Ge.width=1;const We=Ge.getContext("2d");We.clearRect(0,0,Ge.width,Ge.height),We.fillStyle="#FFFFFF",We.fillStyle=Pe,We.fillRect(0,0,1,1);const Ke=We.getImageData(0,0,1,1).data;return fu(fs(Ke[0],Ke[1],Ke[2],Ke[3]))})).value,type:"choiceitem"};var Ge,be,Pe});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:X.length>0?X:void 0,allowCustomColors:!1},onAction:le=>{I.execCommand("mceTableApplyCellStyle",!1,{[j]:"remove"===le.value?"":le.value})}}]},_d=I=>()=>{const V="header"===I.queryCommandValue("mceTableRowType")?"body":"header";I.execCommand("mceTableRowType",!1,{type:V})},Qo=I=>()=>{const V="th"===I.queryCommandValue("mceTableColType")?"td":"th";I.execCommand("mceTableColType",!1,{type:V})},Ui=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:gl}],Cd=I=>Ui.concat((V=>{const j=nr(va(V));return j.length>0?et.some({name:"class",type:"listbox",label:"Class",items:j}):et.none()})(I).toArray()),ni=(I,V)=>{const j=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(nr(cc(I)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===V?[{name:"borderwidth",type:"input",label:"Border width"}].concat(j):j}},Vl=(I,V)=>{const j=I.dom;return{setAttrib:(X,le)=>{j.setAttrib(V,X,le)},setStyle:(X,le)=>{j.setStyle(V,X,le)},setFormat:(X,le)=>{""===le?I.formatter.remove(X,{value:null},V,!0):I.formatter.apply(X,{value:le},V)}}},Ma=Ci("th"),Gc=(I,V)=>I&&V?"sectionCells":I?"section":"cells",ta=(I,V)=>yt(I.all,j=>Vo(j.cells,X=>Ee(V,X.element))),ji=(I,V)=>((I,V,j)=>{const X=(be=>{const Pe=[],Ge=We=>{Pe.push(We)};for(let We=0;We<be.length;We++)be[We].each(Ge);return Pe})(ss(V.selection,be=>{return(Pe=be,((We,Ke,mt=vn)=>mt(Ke)?et.none():N(We,Rt(Ke))?et.some(Ke):dr(Ke,We.join(","),ct=>Wo(ct,"table")||mt(ct)))(["td","th"],Pe,void 0)).bind(We=>ta(I,We)).filter(j);var Pe}));return X.length>0?et.some(X):et.none()})(I,V,Qe),vu=(I,V)=>_i(V,j=>ta(I,j).exists(be=>!be.isLocked)),pr=(I,V)=>{return(X=V,X.mergable).filter(j=>vu(I,j.cells));var X},gc=(I,V)=>{return(X=V,X.unmergable).filter(j=>vu(I,j));var X},yu=((I=>{if(!dl(I))throw new Error("cases must be an array");if(0===I.length)throw new Error("there must be at least one case");const V=[],j={};Pr(I,(X,le)=>{const be=An(X);if(1!==be.length)throw new Error("one and only one name per case");const Pe=be[0],Ge=X[Pe];if(void 0!==j[Pe])throw new Error("duplicate key detected:"+Pe);if("cata"===Pe)throw new Error("cannot have a case named cata (sorry)");if(!dl(Ge))throw new Error("case arguments must be an array");V.push(Pe),j[Pe]=(...We)=>{const Ke=We.length;if(Ke!==Ge.length)throw new Error("Wrong number of arguments to case "+Pe+". Expected "+Ge.length+" ("+Ge+"), got "+Ke);return{fold:(...mt)=>{if(mt.length!==I.length)throw new Error("Wrong number of arguments to fold. Expected "+I.length+", got "+mt.length);return mt[le].apply(null,We)},match:mt=>{const ct=An(mt);if(V.length!==ct.length)throw new Error("Wrong number of arguments to match. Expected: "+V.join(",")+"\nActual: "+ct.join(","));if(!_i(V,Ko=>N(ct,Ko)))throw new Error("Not all branches were specified when using match. Specified: "+ct.join(", ")+"\nRequired: "+V.join(", "));return mt[Pe].apply(null,We)},log:mt=>{console.log(mt,{constructors:V,constructor:Pe,params:We})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(I,V)=>{const j=jn(I);return ji(j,V).bind(X=>{const le=X[X.length-1];return(I=>{const V=ss(I,le=>(be=>{const Pe="thead"===be.section,Ge=ac((We=>{const Ke=Ze(We,mt=>Ma(mt.element));return 0===Ke.length?et.some("td"):Ke.length===We.length?et.some("th"):et.none()})(be.cells),"th");return"tfoot"===be.section?{type:"footer"}:Pe||Ge?{type:"header",subType:Gc(Pe,Ge)}:{type:"body"}})(le).type),j=N(V,"header"),X=N(V,"footer");if(j||X){const le=N(V,"body");return!j||le||X?j||le||!X?et.none():et.some("footer"):et.some("header")}return et.some("body")})(j.all.slice(X[0].row,le.row+le.rowspan))}).getOr("")}),Os=I=>{return Fi(I,"rgb")?zl(V=I).map(fu).map(j=>"#"+j.value).getOr(V):I;var V},pc=I=>{const V=st.fromDom(I);return{borderwidth:Ls(V,"border-width").getOr(""),borderstyle:Ls(V,"border-style").getOr(""),bordercolor:Ls(V,"border-color").map(Os).getOr(""),backgroundcolor:Ls(V,"background-color").map(Os).getOr("")}},Yc=I=>{const V=I[0],j=I.slice(1);return Pr(j,X=>{Pr(An(V),le=>{ut(X,(be,Pe)=>{const Ge=V[le];""!==Ge&&le===Pe&&Ge!==be&&(V[le]="")})})}),V},Oi=(I,V,j,X)=>Vo(I,le=>!ms(j.formatter.matchNode(X,V+le))).getOr(""),$r=an(Oi,["left","center","right"],"align"),hl=an(Oi,["top","middle","bottom"],"valign"),xu=I=>nt(st.fromDom(I)).map(V=>{const j={selection:Ts(I.cells)};return yu(V,j)}).getOr(""),Sm=(I,V)=>{const j=jn(I),X=H(j.all,Pe=>Pe.cells),le=Ze(X,be=>it(V,Pe=>Ee(be.element,Pe)));return ss(le,be=>({element:be.element.dom,column:Jo(j,be.column).map(Pe=>Pe.element.dom)}))},wu=(I,V,j,X)=>{const le=X.getData();X.close(),I.undoManager.transact(()=>{((be,Pe,Ge,We)=>{const Ke=rs(We,(mt,ct)=>Ge[ct]!==mt);Xn(Ke)>0&&Pe.length>=1&&nt(Pe[0]).each(mt=>{const ct=Sm(mt,Pe),Ko=Xn(rs(Ke,(je,Do)=>"scope"!==Do&&"celltype"!==Do))>0,Ct=lr(Ke,"celltype");(Ko||lr(Ke,"scope"))&&((je,Do,St,mo)=>{const U=1===Do.length;Pr(Do,w=>{const M=w.element,J=U?Qe:mo,ge=Vl(je,M);var he,Be,qe,Te;he=ge,Be=w.column.map(he=>Vl(je,he)).getOr(ge),qe=St,(Te=J)("scope")&&he.setAttrib("scope",qe.scope),Te("class")&&he.setAttrib("class",qe.class),Te("height")&&he.setStyle("height",lt(qe.height)),Te("width")&&Be.setStyle("width",lt(qe.width)),dc(je)&&((he,Be,qe)=>{qe("backgroundcolor")&&he.setFormat("tablecellbackgroundcolor",Be.backgroundcolor),qe("bordercolor")&&he.setFormat("tablecellbordercolor",Be.bordercolor),qe("borderstyle")&&he.setFormat("tablecellborderstyle",Be.borderstyle),qe("borderwidth")&&he.setFormat("tablecellborderwidth",lt(Be.borderwidth))})(ge,St,J),mo("halign")&&Es(je,M,St.halign),mo("valign")&&((he,Be,qe)=>{ks.each("top middle bottom".split(" "),Te=>{Te!==qe&&he.formatter.remove("valign"+Te,{},Be)}),qe&&he.formatter.apply("valign"+qe,{},Be)})(je,M,St.valign)})})(be,ct,We,an(lr,Ke)),Ct&&be.execCommand("mceTableCellType",!1,{type:We.celltype,no_events:!0}),Qa(be,mt.dom,{structure:Ct,style:Ko})})})(I,V,j,le),I.focus()})},km=I=>{const V=Rr(I);if(0===V.length)return;const j=((be,Pe)=>{const Ge=nt(Pe[0]).map(We=>ss(Sm(We,Pe),Ke=>((mt,ct,Ko,Ct)=>{const je=mt.dom,Do=(mo,U)=>je.getStyle(mo,U)||je.getAttrib(mo,U);return{width:Do(Ct.getOr(ct),"width"),height:Do(ct,"height"),scope:je.getAttrib(ct,"scope"),celltype:(St=ct,St.nodeName.toLowerCase()),class:je.getAttrib(ct,"class",""),halign:$r(mt,ct),valign:hl(mt,ct),...Ko?pc(ct):{}};var St})(be,Ke.element,dc(be),Ke.column)));return Yc(Ge.getOrDie())})(I,V),X={type:"tabpanel",tabs:[{title:"General",name:"general",items:Cd(I)},ni(I,"cell")]},le={type:"panel",items:[{type:"grid",columns:2,items:Cd(I)}]};I.windowManager.open({title:"Cell Properties",size:"normal",body:dc(I)?X:le,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:j,onSubmit:an(wu,I,V,j)})},Xc=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Sd=I=>Xc.concat((V=>{const j=nr(ti(V));return j.length>0?et.some({name:"class",type:"listbox",label:"Class",items:j}):et.none()})(I).toArray()),Hn=(I,V,j,X)=>{const le=X.getData();X.close(),I.undoManager.transact(()=>{((be,Pe,Ge,We)=>{const Ke=rs(We,(mt,ct)=>Ge[ct]!==mt);if(Xn(Ke)>0){const mt=lr(Ke,"type"),ct=!mt||Xn(Ke)>1;ct&&((Ko,Ct,je,Do)=>{const St=1===Ct.length?Qe:Do;Pr(Ct,mo=>{const U=Vl(Ko,mo);var w,M,J;w=U,M=je,(J=St)("class")&&w.setAttrib("class",M.class),J("height")&&w.setStyle("height",lt(M.height)),Ur(Ko)&&((w,M,J)=>{J("backgroundcolor")&&w.setStyle("background-color",M.backgroundcolor),J("bordercolor")&&w.setStyle("border-color",M.bordercolor),J("borderstyle")&&w.setStyle("border-style",M.borderstyle)})(U,je,St),Do("align")&&Es(Ko,mo,je.align)})})(be,Pe,We,an(lr,Ke)),mt&&be.execCommand("mceTableRowType",!1,{type:We.type,no_events:!0}),nt(st.fromDom(Pe[0])).each(Ko=>Qa(be,Ko.dom,{structure:mt,style:ct}))}})(I,V,j,le),I.focus()})},hr=I=>{const V=((I,V)=>{const j=jr(I),X=j.bind(le=>nt(le)).map(le=>Yt(le));return _r(j,X,(le,be)=>Ze(be,Pe=>it(Ts(Pe.dom.cells),Ge=>"1"===Gt(Ge,V)||Ee(Ge,le)))).getOr([])})(vo(I),ml.selected);if(0===V.length)return;const j=ss(V,Pe=>((Ge,We,Ke)=>{const mt=Ge.dom;return{height:mt.getStyle(We,"height")||mt.getAttrib(We,"height"),class:mt.getAttrib(We,"class",""),type:xu(We),align:$r(Ge,We),...Ke?pc(We):{}}})(I,Pe.dom,Ur(I))),X=Yc(j),le={type:"tabpanel",tabs:[{title:"General",name:"general",items:Sd(I)},ni(I,"row")]},be={type:"panel",items:[{type:"grid",columns:2,items:Sd(I)}]};I.windowManager.open({title:"Row Properties",size:"normal",body:Ur(I)?le:be,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:X,onSubmit:an(Hn,I,ss(V,Pe=>Pe.dom),X)})},Ul=(I,V,j)=>{const X=j?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],le=Vc(I)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],be=V.length>0?[{type:"listbox",name:"class",label:"Class",items:V}]:[];return X.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(le).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(be)},$i=(I,V,j,X)=>{if("TD"===V.tagName||"TH"===V.tagName)Xr(j)&&Ta(X)?I.setStyle(V,j,X):I.setStyles(V,j);else if(V.children)for(let le=0;le<V.children.length;le++)$i(I,V.children[le],j,X)},Sr=(I,V,j,X)=>{const le=I.dom,be=X.getData(),Pe=rs(be,(Ge,We)=>j[We]!==Ge);X.close(),""===be.class&&delete be.class,I.undoManager.transact(()=>{if(!V){const Ge=zi(be.cols).getOr(1),We=zi(be.rows).getOr(1);I.execCommand("mceInsertTable",!1,{rows:We,columns:Ge}),V=jr(vo(I),Jr(I)).bind(Ke=>nt(Ke,Jr(I))).map(Ke=>Ke.dom).getOrDie()}if(Xn(Pe)>0){const Ge={border:lr(Pe,"border"),bordercolor:lr(Pe,"bordercolor"),cellpadding:lr(Pe,"cellpadding")};((Ke,mt,ct,Ko)=>{const Ct=Ke.dom,je={},Do={},St=ps(Ke),mo=ei(Ke);if(ms(ct.class)||(je.class=ct.class),Do.height=lt(ct.height),St?Do.width=lt(ct.width):Ct.getAttrib(mt,"width")&&(je.width=(U=ct.width)?U.replace(/px$/,""):""),St?(Do["border-width"]=lt(ct.border),Do["border-spacing"]=lt(ct.cellspacing)):(je.border=ct.border,je.cellpadding=ct.cellpadding,je.cellspacing=ct.cellspacing),St&&mt.children){const U={};if(Ko.border&&(U["border-width"]=lt(ct.border)),Ko.cellpadding&&(U.padding=lt(ct.cellpadding)),mo&&Ko.bordercolor&&(U["border-color"]=ct.bordercolor),!(w=>{for(const M in w)if(ee.call(w,M))return!1;return!0})(U))for(let w=0;w<mt.children.length;w++)$i(Ct,mt.children[w],U)}var U;if(mo){const U=ct;Do["background-color"]=U.backgroundcolor,Do["border-color"]=U.bordercolor,Do["border-style"]=U.borderstyle}Ct.setStyles(mt,{...Ht(Ke),...Do}),Ct.setAttribs(mt,{...mu(Ke),...je})})(I,V,be,Ge);const We=le.select("caption",V)[0];(We&&!be.caption||!We&&be.caption)&&I.execCommand("mceTableToggleCaption"),Es(I,V,be.align)}if(I.focus(),I.addVisual(),Xn(Pe)>0){const Ge=lr(Pe,"caption"),We=!Ge||Xn(Pe)>1;Qa(I,V,{structure:Ge,style:We})}})},fl=(I,V)=>{const j=I.dom;let X,le=((We,Ke)=>{const mt=Ht(We),ct=mu(We),Ko=Ke?{borderstyle:Kt(mt,"border-style").getOr(""),bordercolor:Os(Kt(mt,"border-color").getOr("")),backgroundcolor:Os(Kt(mt,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...mt,...ct,...Ko,...(()=>{const Ct=mt["border-width"];return ps(We)&&Ct?{border:Ct}:Kt(ct,"border").fold(()=>({}),je=>({border:je}))})(),...Kt(mt,"border-spacing").or(Kt(ct,"cellspacing")).fold(()=>({}),Ct=>({cellspacing:Ct})),...Kt(mt,"border-padding").or(Kt(ct,"cellpadding")).fold(()=>({}),Ct=>({cellpadding:Ct}))}})(I,ei(I));V?(le.cols="1",le.rows="1",ei(I)&&(le.borderstyle="",le.bordercolor="",le.backgroundcolor="")):(X=j.getParent(I.selection.getStart(),"table",I.getBody()),X?le=((We,Ke,mt)=>{const ct=We.dom,Ko=ps(We)?ct.getStyle(Ke,"border-spacing")||ct.getAttrib(Ke,"cellspacing"):ct.getAttrib(Ke,"cellspacing")||ct.getStyle(Ke,"border-spacing"),Ct=ps(We)?Qr(ct,Ke,"padding")||ct.getAttrib(Ke,"cellpadding"):ct.getAttrib(Ke,"cellpadding")||Qr(ct,Ke,"padding");return{width:ct.getStyle(Ke,"width")||ct.getAttrib(Ke,"width"),height:ct.getStyle(Ke,"height")||ct.getAttrib(Ke,"height"),cellspacing:Ko??"",cellpadding:Ct??"",border:((je,Do)=>{const St=Ls(st.fromDom(Do),"border-width");return ps(We)&&St.isSome()?St.getOr(""):je.getAttrib(Do,"border")||Qr(We.dom,Do,"border-width")||Qr(We.dom,Do,"border")||""})(ct,Ke),caption:!!ct.select("caption",Ke)[0],class:ct.getAttrib(Ke,"class",""),align:$r(We,Ke),...mt?pc(Ke):{}}})(I,X,ei(I)):ei(I)&&(le.borderstyle="",le.bordercolor="",le.backgroundcolor=""));const be=nr(Uc(I));be.length>0&&le.class&&(le.class=le.class.replace(/\s*mce\-item\-table\s*/g,""));const Pe={type:"grid",columns:2,items:Ul(I,be,V)},Ge=ei(I)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[Pe]},ni(I,"table")]}:{type:"panel",items:[Pe]};I.windowManager.open({title:"Table Properties",size:"normal",body:Ge,onSubmit:an(Sr,I,X,le),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:le})},kd=_t,ko=I=>{const V=(j,X)=>Hr(j,X).exists(le=>parseInt(le,10)>1);return I.length>0&&_i(I,j=>V(j,"rowspan")||V(j,"colspan"))?et.some(I):et.none()},ya=(I,V,j)=>{return V.length<=1?et.none():(X=I,le=j.firstSelectedSelector,be=j.lastSelectedSelector,Ra(X,le,be).bind(Pe=>{const Ge=ct=>Ee(X,ct),We="thead,tfoot,tbody,table",Ke=dr(Pe.first,We,Ge),mt=dr(Pe.last,We,Ge);return Ke.bind(ct=>mt.bind(Ko=>{return Ee(ct,Ko)?(je=Pe.first,Do=Pe.last,((I,V,j)=>((X,le,be)=>{const Pe=xn(X,le,Ee),Ge=xn(X,be,Ee);return Pe.bind(We=>Ge.map(Ke=>{return mt=We,ct=Ke,{startRow:Math.min(mt.row,ct.row),startCol:Math.min(mt.column,ct.column),finishRow:Math.max(mt.row+mt.rowspan-1,ct.row+ct.rowspan-1),finishCol:Math.max(mt.column+mt.colspan-1,ct.column+ct.colspan-1)};var mt,ct}))})(I,V,j).bind(X=>((le,be)=>{let Pe=!0;const Ge=an(gu,be);for(let We=be.startRow;We<=be.finishRow;We++)for(let Ke=be.startCol;Ke<=be.finishCol;Ke++)Pe=Pe&&or(le,We,Ke).exists(Ge);return Pe?et.some(be):et.none()})(I,X)))($e(Pe.table),je,Do)):et.none();var je,Do}))})).map(Pe=>({bounds:Pe,cells:V}));var X,le,be};var Ed=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const hc=I=>{var V;const j=null!==(V=Ed.read())&&void 0!==V?V:[];return yt(j,X=>et.from(X.getType(I)))},fc=()=>hc("x-tinymce/dom-table-rows"),kr=()=>hc("x-tinymce/dom-table-columns"),ri=I=>V=>{const j=()=>{V.setEnabled(I.selection.isEditable())};return I.on("NodeChange",j),j(),()=>{I.off("NodeChange",j)}},Dn=I=>V=>{const j=()=>{V.setEnabled(I.selection.isEditable())};return I.on("NodeChange",j),j(),()=>{I.off("NodeChange",j)}};ll.add("table",I=>{const V=(I=>{const V=pl(et.none()),j=pl([]);let X=et.none();const le=Ci("caption"),be=St=>X.forall(mo=>!mo[St]),Pe=()=>ln(vo(I),Jr(I)).bind(St=>{return _r(nt(St),ln((U=I,st.fromDom(U.selection.getEnd())),Jr(I)).bind(nt),(U,w)=>{return Ee(U,w)?le(St)?et.some({element:M=St,mergable:et.none(),unmergable:et.none(),selection:[M]}):et.some(((M,J,ge)=>({element:ge,mergable:ya(J,M,ml),unmergable:ko(M),selection:kd(M)}))(Rr(I),U,St)):et.none();var M}).bind(_t);var U}),Ge=St=>nt(St.element).map(mo=>{const U=jn(mo),w=ji(U,St).getOr([]),M=wo(w,(J,ge)=>(ge.isLocked&&(J.onAny=!0,0===ge.column?J.onFirst=!0:ge.column+ge.colspan>=U.grid.columns&&(J.onLast=!0)),J),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:pr(U,St).isSome(),unmergeable:gc(U,St).isSome(),locked:M}}),We=()=>{V.set((St=>{let mo,U=!1;return(...w)=>(U||(U=!0,mo=St.apply(null,w)),mo)})(Pe)()),X=V.get().bind(Ge),Pr(j.get(),qo)},Ke=St=>(St(),j.set(j.get().concat([St])),()=>{j.set(Ze(j.get(),mo=>mo!==St))}),mt=(St,mo)=>Ke(()=>V.get().fold(()=>{St.setEnabled(!1)},U=>{St.setEnabled(!mo(U)&&I.selection.isEditable())})),ct=(St,mo,U)=>Ke(()=>V.get().fold(()=>{St.setEnabled(!1),St.setActive(!1)},w=>{St.setEnabled(!mo(w)&&I.selection.isEditable()),St.setActive(U(w))})),Ko=St=>X.exists(mo=>mo.locked[St]),Ct=(St,mo)=>U=>ct(U,w=>le(w.element),()=>I.queryCommandValue(St)===mo),je=Ct("mceTableRowType","header"),Do=Ct("mceTableColType","th");return I.on("NodeChange ExecCommand TableSelectorChange",We),{onSetupTable:St=>mt(St,mo=>!1),onSetupCellOrRow:St=>mt(St,mo=>le(mo.element)),onSetupColumn:St=>mo=>mt(mo,U=>le(U.element)||Ko(St)),onSetupPasteable:St=>mo=>mt(mo,U=>le(U.element)||St().isNone()),onSetupPasteableColumn:(St,mo)=>U=>mt(U,w=>le(w.element)||St().isNone()||Ko(mo)),onSetupMergeable:St=>mt(St,mo=>be("mergeable")),onSetupUnmergeable:St=>mt(St,mo=>be("unmergeable")),resetTargets:We,onSetupTableWithCaption:St=>ct(St,vn,mo=>nt(mo.element,Jr(I)).exists(U=>((I,V)=>Vo(I.dom.childNodes,le=>{return be=st.fromDom(le),Wo(be,"caption");var be}).map(st.fromDom))(U).isSome())),onSetupTableRowHeaders:je,onSetupTableColumnHeaders:Do,targets:V.get}})(I);(j=>{const X=j.options.register;X("table_border_widths",{processor:"object[]",default:lc}),X("table_border_styles",{processor:"object[]",default:Ti}),X("table_cell_advtab",{processor:"boolean",default:!0}),X("table_row_advtab",{processor:"boolean",default:!0}),X("table_advtab",{processor:"boolean",default:!0}),X("table_appearance_options",{processor:"boolean",default:!0}),X("table_grid",{processor:"boolean",default:!Za.deviceType.isTouch()}),X("table_cell_class_list",{processor:"object[]",default:[]}),X("table_row_class_list",{processor:"object[]",default:[]}),X("table_class_list",{processor:"object[]",default:[]}),X("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),X("table_background_color_map",{processor:"object[]",default:[]}),X("table_border_color_map",{processor:"object[]",default:[]})})(I),(I=>{ut({mceTableProps:an(fl,I,!1),mceTableRowProps:an(hr,I),mceTableCellProps:an(km,I),mceInsertTableDialog:an(fl,I,!0)},(V,j)=>I.addCommand(j,()=>{return X=V,void((be=vo(I),Pe=Ci("table"),gn((Ge,We)=>We(Ge),pn,be,Pe,void 0)).forall(Yo)&&X());var be,Pe,X}))})(I),((j,X)=>{const le=Ct=>()=>j.execCommand(Ct),be=(Ct,je)=>!!j.queryCommandSupported(je.command)&&(j.ui.registry.addMenuItem(Ct,{...je,onAction:On(je.onAction)?je.onAction:le(je.command)}),!0),Pe=(Ct,je)=>{j.queryCommandSupported(je.command)&&j.ui.registry.addToggleMenuItem(Ct,{...je,onAction:On(je.onAction)?je.onAction:le(je.command)})},Ge=Ct=>{j.execCommand("mceInsertTable",!1,{rows:Ct.numRows,columns:Ct.numColumns})},We=[be("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:X.onSetupCellOrRow}),be("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:X.onSetupCellOrRow}),be("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:X.onSetupCellOrRow}),be("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:X.onSetupCellOrRow}),be("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:X.onSetupCellOrRow}),be("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:X.onSetupCellOrRow}),be("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:X.onSetupPasteable(fc)}),be("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:X.onSetupPasteable(fc)})],Ke=[be("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:X.onSetupColumn("onFirst")}),be("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:X.onSetupColumn("onLast")}),be("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:X.onSetupColumn("onAny")}),be("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:X.onSetupColumn("onAny")}),be("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:X.onSetupColumn("onAny")}),be("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:X.onSetupPasteableColumn(kr,"onFirst")}),be("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:X.onSetupPasteableColumn(kr,"onLast")})],mt=[be("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:X.onSetupCellOrRow}),be("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:X.onSetupMergeable}),be("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:X.onSetupUnmergeable})];Kg(j)?j.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ge}],onSetup:Dn(j)}):j.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:le("mceInsertTableDialog"),onSetup:Dn(j)}),j.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:le("mceInsertTableDialog"),onSetup:Dn(j)}),be("tableprops",{text:"Table properties",onSetup:X.onSetupTable,command:"mceTableProps"}),be("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:X.onSetupTable,command:"mceTableDelete"}),N(We,!0)&&j.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:sn("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),N(Ke,!0)&&j.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:sn("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),N(mt,!0)&&j.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:sn("tablecellprops tablemergecells tablesplitcells")}),j.ui.registry.addContextMenu("table",{update:()=>(X.resetTargets(),X.targets().fold(sn(""),Ct=>"caption"===Rt(Ct.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const ct=qc(Uc(j));0!==ct.length&&j.queryCommandSupported("mceTableToggleClass")&&j.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Ba(j,ct,"tableclass",Ct=>j.execCommand("mceTableToggleClass",!1,Ct)),onSetup:X.onSetupTable});const Ko=qc(va(j));0!==Ko.length&&j.queryCommandSupported("mceTableCellToggleClass")&&j.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Ba(j,Ko,"tablecellclass",Ct=>j.execCommand("mceTableCellToggleClass",!1,Ct)),onSetup:X.onSetupCellOrRow}),j.queryCommandSupported("mceTableApplyCellStyle")&&(j.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Ba(j,gl,"tablecellverticalalign",re(j,"vertical-align")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Ba(j,Hc(j),"tablecellborderwidth",re(j,"border-width")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Ba(j,cc(j),"tablecellborderstyle",re(j,"border-style")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>ea(j,hs(j),"background-color"),onSetup:X.onSetupCellOrRow}),j.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>ea(j,zn(j),"border-color"),onSetup:X.onSetupCellOrRow})),Pe("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:X.onSetupTableWithCaption}),Pe("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:_d(j),onSetup:X.onSetupTableRowHeaders}),Pe("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Qo(j),onSetup:X.onSetupTableRowHeaders})})(I,V),((j,X)=>{j.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:ri(j),fetch:Ke=>Ke("inserttable | cell row column | advtablesort | tableprops deletetable")});const le=Ke=>()=>j.execCommand(Ke),be=(Ke,mt)=>{j.queryCommandSupported(mt.command)&&j.ui.registry.addButton(Ke,{...mt,onAction:On(mt.onAction)?mt.onAction:le(mt.command)})},Pe=(Ke,mt)=>{j.queryCommandSupported(mt.command)&&j.ui.registry.addToggleButton(Ke,{...mt,onAction:On(mt.onAction)?mt.onAction:le(mt.command)})};be("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:X.onSetupTable}),be("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:X.onSetupTable}),be("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:X.onSetupCellOrRow}),be("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:X.onSetupMergeable}),be("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:X.onSetupUnmergeable}),be("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:X.onSetupCellOrRow}),be("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:X.onSetupCellOrRow}),be("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:X.onSetupCellOrRow}),be("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:X.onSetupCellOrRow}),be("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:X.onSetupColumn("onFirst")}),be("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:X.onSetupColumn("onLast")}),be("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:X.onSetupColumn("onAny")}),be("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:X.onSetupCellOrRow}),be("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:X.onSetupCellOrRow}),be("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:X.onSetupPasteable(fc)}),be("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:X.onSetupPasteable(fc)}),be("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:X.onSetupColumn("onAny")}),be("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:X.onSetupColumn("onAny")}),be("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:X.onSetupPasteableColumn(kr,"onFirst")}),be("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:X.onSetupPasteableColumn(kr,"onLast")}),be("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:ri(j)});const Ge=qc(Uc(j));0!==Ge.length&&j.queryCommandSupported("mceTableToggleClass")&&j.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Hl(j,Ge,"tableclass",Ke=>j.execCommand("mceTableToggleClass",!1,Ke)),onSetup:X.onSetupTable});const We=qc(va(j));0!==We.length&&j.queryCommandSupported("mceTableCellToggleClass")&&j.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Hl(j,We,"tablecellclass",Ke=>j.execCommand("mceTableCellToggleClass",!1,Ke)),onSetup:X.onSetupCellOrRow}),j.queryCommandSupported("mceTableApplyCellStyle")&&(j.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Hl(j,gl,"tablecellverticalalign",re(j,"vertical-align")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Hl(j,Hc(j),"tablecellborderwidth",re(j,"border-width")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Hl(j,cc(j),"tablecellborderstyle",re(j,"border-style")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Ke=>Ke(ea(j,hs(j),"background-color")),onSetup:X.onSetupCellOrRow}),j.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Ke=>Ke(ea(j,zn(j),"border-color")),onSetup:X.onSetupCellOrRow})),Pe("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:X.onSetupTableWithCaption}),Pe("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:_d(j),onSetup:X.onSetupTableRowHeaders}),Pe("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Qo(j),onSetup:X.onSetupTableColumnHeaders})})(I,V),(j=>{const X=ro(j);X.length>0&&j.ui.registry.addContextToolbar("table",{predicate:le=>j.dom.is(le,"table")&&j.getBody().contains(le)&&j.dom.isEditable(le.parentNode),items:X,scope:"node",position:"node"})})(I)})}();
</script>

</body>
</html>
