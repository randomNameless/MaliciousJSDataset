<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>launch-bce04406fb62.min.html</title>
</head>
<body>

<script>
// For license information, see `https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/launch-bce04406fb62.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2024-04-15T16:21:47Z",turbineBuildDate:"2023-02-22T20:37:26Z",turbineVersion:"27.5.0"},environment:{id:"ENe2f07d31938f4ecf84a47210e7519e74",stage:"production"},dataElements:{"Build Environment":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.environment.stage"}},mdManagerToCDMapping:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return{URL:["pageName"],TITLE:["pageTitle"],SITE:["brand"],CATEGORYDSPNAME:["contentSiteSection"],SCTNDSPNAME:["contentSubSection"],SUBSECTION:["contentSubSection2"],BEHAVIORALINTERACTION:["behavioralInteraction"],UNIQUEID:["pageUniqueID"],DELIVERY_CHANNEL:["platform"],IMGURL:["imageURL"],CONTENTCONTRIBUTOR:["contentContributor"],ORIGINALPUBLISHDATE:["originalPublishDate"],TYPE:["contentPageType"],USERID:["userid"],SUBSCRIPTIONID:["subscriptionid"]}}}},"browser page title":{defaultValue:"",modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"title"}},"Campaign ID":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="";if(!window._satellite.hasOwnProperty("campaign_landing")){function t(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}searchParams=location.search.toLowerCase(),e=t("mbid",searchParams).length>0?t("mbid",searchParams).replace(/_/g,":"):(e=t("utm_medium",searchParams)+":"+t("utm_source",searchParams)+":"+t("utm_campaign",searchParams)+":"+t("utm_term",searchParams)+":"+t("utm_content",searchParams)+":"+t("utm_type",searchParams)).replace(/:+\s*$/,"").toLowerCase(),_satellite.logger.log("cmpid is "+e)}return e}}},"browser referrer":{defaultValue:"",modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"referrer"}},userid:{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){userid=null;try{userid=window.mdManager.getKeys().USERID[0]}catch(e){userid=null}return userid}}},"OneTrust Targeting Check":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){function e(){try{_satellite.logger.info("TEST: Checking Consent taken from OneTrust cookie OptanonConsent");var e=_satellite.cookie.get("OptanonConsent");if(void 0!==e&&e){var t=","+e.split("groups=")[1].split("&")[0].match(/(C000\d):1/gi).join(",").replace(/:1/g,"");return _satellite.logger.info("TEST: Cookie Consent taken from OneTrust cookie OptanonConsent",t),t}return _satellite.logger.info("TEST: Consent not found in OneTrust cookie"),""}catch(e){return _satellite.logger.info("TEST Failed while Checking Consent from cookie",e),""}}function t(){try{_satellite.logger.info("TEST: Checking Consent taken from OneTrust Object OptanonActiveGroups");var e=window.OptanonActiveGroups;return e&&",,"!==e?(_satellite.logger.info("TEST: Cookie Consent taken from OneTrust Object OptanonActiveGroups",e),e):(_satellite.logger.info("TEST: Consent not found in OneTrust Object"),"")}catch(e){return _satellite.logger.info("TEST: Failed while Checking Consent from OneTrust Object",e),""}}var n="staging"==_satellite.environment.stage||"development"==_satellite.environment.stage,i=e();return n&&console.log("TEST (CHECKOT) Cookie string",i),""!=i?i.indexOf("C0004")>=0?(n&&console.log("TEST (CHECKOT) Consent given via Cookie"),"consentgiven"):(n&&console.log("TEST (CHECKOT) Consent not in Cookie"),"consentnotgiven"):(i=t(),console.log("TEST (CHECKOT) OptanonActiveGroups string",i),""!=i?i.indexOf("C0004")>=0?(n&&console.log("TEST (CHECKOT) Consent given via Variable"),"consentgiven"):(n&&console.log("TEST (CHECKOT) Consent not in Variable"),"consentnotgiven"):(n&&console.log("TEST (CHECKOT) Neither Cookie or Variable is set. Return consentgiven"),"consentgiven"))}}},"browser page URL":{defaultValue:"",modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"url"}}},extensions:{core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPd22815afd48447aa955be6a3a012e3b5/",modules:{"core/src/lib/dataElements/javascriptVariable.js":{name:"javascript-variable",displayName:"JavaScript Variable",script:function(e,t,n){"use strict";var i=n("../helpers/getObjectProperty.js");e.exports=function(e){return i(window,e.path)}}},"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/pageInfo.js":{name:"page-info",displayName:"Page Info",script:function(e,t,n){"use strict";var i=n("@adobe/reactor-document");e.exports=function(e){switch(e.attribute){case"url":return i.location.href;case"hostname":return i.location.hostname;case"pathname":return i.location.pathname;case"protocol":return i.location.protocol;case"referrer":return i.referrer;case"title":return i.title}}}},"core/src/lib/conditions/variable.js":{name:"variable",displayName:"Variable",script:function(e,t,n){"use strict";var i=n("../helpers/getObjectProperty"),r=n("../helpers/textMatch");e.exports=function(e){var t=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(i(window,e.name),t)}}},"core/src/lib/events/domReady.js":{name:"dom-ready",displayName:"DOM Ready",script:function(e,t,n){"use strict";var i=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){i.registerDomReadyTrigger(t)}}},"core/src/lib/conditions/path.js":{name:"path",displayName:"Path Without Query String",script:function(e,t,n){"use strict";var i=n("@adobe/reactor-document"),r=n("../helpers/textMatch");e.exports=function(e){var t=i.location.pathname;return e.paths.some((function(e){var n=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(t,n)}))}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,n,i){"use strict";var r,a,o,s,l=n("@adobe/reactor-document"),c=n("@adobe/reactor-promise"),u=n("./helpers/decorateCode"),d=n("./helpers/loadCodeSequentially"),p=n("../../../node_modules/postscribe/dist/postscribe"),h=n("./helpers/unescapeHtmlCode"),g=n("../helpers/findPageScript").getTurbine,f=(a=function(e){p(l.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return r&&"script"===t&&(e.attrs.nonce=r),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=h(e.attrs[t])})),e.src&&(e.src=h(e.src))),e},error:function(e){i.logger.error(e.msg)}})},o=[],s=function(){if(l.body)for(;o.length;)a(o.shift());else setTimeout(s,20)},function(e){o.push(e),s()}),_=function(){if(l.currentScript)return l.currentScript.async;var e=g();return!e||e.async}();e.exports=function(e,t){var n;r=i.getExtensionSettings().cspNonce;var a={settings:e,event:t},o=a.settings.source;if(o)return a.settings.isExternal?d(o).then((function(e){return e?(n=u(a,e),f(n.code),n.promise):c.resolve()})):(n=u(a,o),_||"loading"!==l.readyState?f(n.code):l.write&&!1===i.propertySettings.ruleComponentSequencingEnabled?l.write(n.code):f(n.code),n.promise)}}},"core/src/lib/events/directCall.js":{name:"direct-call",displayName:"Direct Call",script:function(e,t,n,i){"use strict";var r={};window._satellite=window._satellite||{},window._satellite.track=function(e,t){e=e.trim();var n=r[e];if(n){var a={identifier:e,detail:t};n.forEach((function(e){e(a)}));var o=['Rules using the direct call event type with identifier "'+e+'" have been triggered'+(t?" with additional detail:":".")];t&&o.push(t),i.logger.log.apply(i.logger,o)}else i.logger.log('"'+e+'" does not match any direct call identifiers.')},e.exports=function(e,t){var n=r[e.identifier];n||(n=r[e.identifier]=[]),n.push(t)}}},"core/src/lib/conditions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source.call(t.element,t,t.target)}}},"core/src/lib/events/customEvent.js":{name:"custom-event",displayName:"Custom Event",script:function(e,t,n){"use strict";var i=n("./helpers/createBubbly")(),r=[];e.exports=function(e,t){var n=e.type;-1===r.indexOf(n)&&(r.push(n),window.addEventListener(n,i.evaluateEvent,!0)),i.addListener(e,(function(e){e.nativeEvent.type===n&&(e.detail=e.nativeEvent.detail,t(e))}))}}},"core/src/lib/events/pageBottom.js":{name:"page-bottom",displayName:"Page Bottom",script:function(e,t,n){"use strict";var i=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){i.registerPageBottomTrigger(t)}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,n){"use strict";var i=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){i.registerLibraryLoadedTrigger(t)}}},"core/src/lib/conditions/valueComparison.js":{name:"value-comparison",displayName:"Value Comparison",script:function(e,t,n){"use strict";var i=n("../helpers/stringAndNumberUtils").isString,r=n("../helpers/stringAndNumberUtils").isNumber,a=n("../helpers/stringAndNumberUtils").castToStringIfNumber,o=n("../helpers/stringAndNumberUtils").castToNumberIfString,s=function(e,t){return t&&i(e)?e.toLowerCase():e},l=function(e){return function(t,n,r){return t=a(t),n=a(n),i(t)&&i(n)&&e(t,n,r)}},c=function(e){return function(t,n){return t=o(t),n=o(n),r(t)&&r(n)&&e(t,n)}},u=function(e){return function(t,n,i){return e(s(t,i),s(n,i))}},d={equals:u((function(e,t){return e==t})),doesNotEqual:function(){return!d.equals.apply(null,arguments)},contains:l(u((function(e,t){return-1!==e.indexOf(t)}))),doesNotContain:function(){return!d.contains.apply(null,arguments)},startsWith:l(u((function(e,t){return 0===e.indexOf(t)}))),doesNotStartWith:function(){return!d.startsWith.apply(null,arguments)},endsWith:l(u((function(e,t){return e.substring(e.length-t.length,e.length)===t}))),doesNotEndWith:function(){return!d.endsWith.apply(null,arguments)},matchesRegex:l((function(e,t,n){return new RegExp(t,n?"i":"").test(e)})),doesNotMatchRegex:function(){return!d.matchesRegex.apply(null,arguments)},lessThan:c((function(e,t){return e<t})),lessThanOrEqual:c((function(e,t){return e<=t})),greaterThan:c((function(e,t){return e>t})),greaterThanOrEqual:c((function(e,t){return e>=t})),isTrue:function(e){return!0===e},isTruthy:function(e){return Boolean(e)},isFalse:function(e){return!1===e},isFalsy:function(e){return!e}};e.exports=function(e){return d[e.comparison.operator](e.leftOperand,e.rightOperand,Boolean(e.comparison.caseInsensitive))}}},"core/src/lib/helpers/getObjectProperty.js":{script:function(e){"use strict";e.exports=function(e,t){for(var n=t.split("."),i=e,r=0,a=n.length;r<a;r++){if(null==i)return;i=i[n[r]]}return i}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-window"),r=n("@adobe/reactor-document"),a=-1!==i.navigator.appVersion.indexOf("MSIE 10"),o="WINDOW_LOADED",s="DOM_READY",l="PAGE_BOTTOM",c=[l,s,o],u=function(e,t){return{element:e,target:e,nativeEvent:t}},d={};c.forEach((function(e){d[e]=[]}));var p=function(e,t){c.slice(0,g(e)+1).forEach((function(e){f(t,e)}))},h=function(){return"complete"===r.readyState?o:"interactive"===r.readyState?a?null:s:void 0},g=function(e){return c.indexOf(e)},f=function(e,t){d[t].forEach((function(t){_(e,t)})),d[t]=[]},_=function(e,t){var n=t.trigger,i=t.syntheticEventFn;n(i?i(e):null)};i._satellite=i._satellite||{},i._satellite.pageBottom=p.bind(null,l),r.addEventListener("DOMContentLoaded",p.bind(null,s),!0),i.addEventListener("load",p.bind(null,o),!0),i.setTimeout((function(){var e=h();e&&p(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){d[l].push({trigger:e})},registerDomReadyTrigger:function(e){d[s].push({trigger:e,syntheticEventFn:u.bind(null,r)})},registerWindowLoadedTrigger:function(e){d[o].push({trigger:e,syntheticEventFn:u.bind(null,i)})}}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,n){"use strict";var i=n("./decorators/decorateGlobalJavaScriptCode"),r=n("./decorators/decorateNonGlobalJavaScriptCode"),a={javascript:function(e,t){return e.settings.global?i(e,t):r(e,t)},html:n("./decorators/decorateHtmlCode")};e.exports=function(e,t){return a[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-promise"),r=n("./getSourceByUrl"),a=i.resolve();e.exports=function(e){var t=new i((function(t){var n=r(e);i.all([n,a]).then((function(e){var n=e[0];t(n)}))}));return a=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var n,i;n=this,i=function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(1));e.exports=r.default},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(){}function o(){var e=g.shift();if(e){var t=d.last(e);t.afterDequeue(),e.stream=s.apply(void 0,e),t.afterStreamStart()}}function s(e,t,n){function i(e){e=n.beforeWrite(e),f.write(e),n.afterWrite(e)}(f=new u.default(e,n)).id=h++,f.name=n.name||f.id,l.streams[f.name]=f;var r=e.ownerDocument,s={close:r.close,open:r.open,write:r.write,writeln:r.writeln};c(r,{close:a,open:a,write:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(t.join("")+"\n")}});var d=f.win.onerror||a;return f.win.onerror=function(e,t,i){n.error({msg:e+" - "+t+": "+i}),d.apply(f.win,[e,t,i])},f.write(t,(function(){c(r,s),f.win.onerror=d,n.done(),f=null,o()})),f}function l(e,t,n){if(d.isFunction(n))n={done:n};else if("clear"===n)return g=[],f=null,void(h=0);n=d.defaults(n,p);var i=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,n];return e.postscribe={cancel:function(){i.stream?i.stream.abort():i[1]=a}},n.beforeEnqueue(i),g.push(i),f||o(),e.postscribe}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=l;var u=r(n(2)),d=i(n(4)),p={afterAsync:a,afterDequeue:a,afterStreamStart:a,afterWrite:a,autoFix:!0,beforeEnqueue:a,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:a,error:function(e){throw new Error(e.msg)},releaseAsync:!1},h=0,g=[],f=null;c(l,{streams:{},queue:g,WriteStream:u.default})},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=p+t,i=e.getAttribute(n);return u.existy(i)?String(i):i}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=p+t;u.existy(n)&&""!==n?e.setAttribute(i,n):e.removeAttribute(i)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=r(n(3)),u=i(n(4)),d=!1,p="data-ps-",h="ps-style",g="ps-script",f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.root=t,this.options=n,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new c.default("",{autoFix:n.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();u.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,n=void 0,i=void 0,r=[];(t=this.parser.readToken())&&!(n=u.isScript(t))&&!(i=u.isStyle(t));)(t=this.options.beforeWriteToken(t))&&r.push(t);r.length>0&&this._writeStaticTokens(r),n&&this._handleScriptToken(t),i&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,d&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),d&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,n=[],i=[],r=[],a=e.length,o=0;o<a;o++){var s=e[o],l=s.toString();if(n.push(l),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=t++;i.push(l.replace(/(\/?>)/," "+p+"id="+c+" $1")),s.attrs.id!==g&&s.attrs.id!==h&&r.push("atomicTag"===s.type?"":"<"+s.tagName+" "+p+"proxyof="+c+(s.unary?" />":">"))}}else i.push(l),r.push("endTag"===s.type?l:"")}return{tokens:e,raw:n.join(""),actual:i.join(""),proxy:r.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];u.existy(e=t.shift());){var n=1===e.nodeType;if(!n||!o(e,"proxyof")){n&&(this.actuals[o(e,"id")]=e,s(e,"id"));var i=e.parentNode&&o(e.parentNode,"proxyof");i&&this.actuals[i].appendChild(e)}t.unshift.apply(t,u.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,h),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),u.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var n=this.doc.getElementById(t);n&&n.parentNode.replaceChild(e,n)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var n=this._buildScript(e),i=this._shouldRelease(n),r=this.options.afterAsync;e.src&&(n.src=e.src,this._scriptLoadHandler(n,i?r:function(){t(),r()}));try{this._insertCursor(n,g),n.src&&!i||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return u.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}function i(){n(),null!=t&&t(),t=null}function r(e){n(),o(e),null!=t&&t(),t=null}function a(e,t){var n=e["on"+t];null!=n&&(e["_on"+t]=n)}var o=this.options.error;a(e,"load"),a(e,"error"),l(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){r({msg:"onload handler failed "+t+" @ "+e.src})}i()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void r({msg:"onerror handler failed "+t+" @ "+e.src})}r({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&i()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=f},function(e){var t;t=function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(n(1));e.exports=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=r(n(2)),s=r(n(3)),l=i(n(6)),c=n(5),u={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.stream=n;var r=!1,s={};for(var c in o)o.hasOwnProperty(c)&&(i.autoFix&&(s[c+"Fix"]=!0),r=r||s[c+"Fix"]);r?(this._readToken=(0,l.default)(this,s,(function(){return t._readTokenImpl()})),this._peekToken=(0,l.default)(this,s,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in u)if(u.hasOwnProperty(e)&&u[e].test(this.stream)){var t=s[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream},e}();for(var p in t.default=d,d.tokenToString=function(e){return e.toString()},d.escapeAttributes=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=(0,c.escapeQuotes)(e[n],null));return t},d.supports=o,o)o.hasOwnProperty(p)&&(d.browserHasFlaw=d.browserHasFlaw||!o[p]&&p)},function(e,t){"use strict";t.__esModule=!0;var n=!1,i=!1,r=window.document.createElement("div");try{var a="<P><I></P></I>";r.innerHTML=a,t.tagSoup=n=r.innerHTML!==a}catch(e){t.tagSoup=n=!1}try{r.innerHTML="<P><i><P></P></i></P>",t.selfClose=i=2===r.childNodes.length}catch(e){t.selfClose=i=!1}r=null,t.tagSoup=n,t.selfClose=i},function(e,t,n){"use strict";function i(e){var t=e.indexOf("-->");if(t>=0)return new c.CommentToken(e.substr(4,t-1),t+3)}function r(e){var t=e.indexOf("<");return new c.CharsToken(t>=0?t:e.length)}function a(e){var t,n,i;if(-1!==e.indexOf(">")){var r=e.match(u.startTag);if(r){var a=(t={},n={},i=r[2],r[2].replace(u.attr,(function(e,r){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",n[arguments[5]]=!0):t[r]=arguments[2]||arguments[3]||arguments[4]||u.fillAttr.test(r)&&r||"":t[r]="",i=i.replace(e,"")})),{v:new c.StartTagToken(r[1],r[0].length,t,n,!!r[3],i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===a?"undefined":l(a)))return a.v}}}function o(e){var t=a(e);if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var i=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(i)return new c.AtomicTagToken(t.tagName,i[0].length+t.length,t.attrs,t.booleanAttrs,i[1])}}}function s(e){var t=e.match(u.endTag);if(t)return new c.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=i,t.chars=r,t.startTag=a,t.atomicTag=o,t.endTag=s;var c=n(4),u={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var r=n(5),a=(t.Token=function e(t,n){i(this,e),this.type=t,this.length=n,this.text=""},t.CommentToken=function(){function e(t,n){i(this,e),this.type="comment",this.length=n||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){i(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,n,r,a,o){i(this,e),this.type=t,this.length=r,this.text="",this.tagName=n,this.attrs=a,this.booleanAttrs=o,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+e.tagName;for(var i in e.attrs)if(e.attrs.hasOwnProperty(i)){n+=" "+i;var a=e.attrs[i];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[i]||(n+='="'+(0,r.escapeQuotes)(a)+'"')}return e.rest&&(n+=" "+e.rest),e.unary&&!e.html5Unary?n+="/>":n+=">",null!=t&&(n+=t+"</"+e.tagName+">"),n},e}());t.StartTagToken=function(){function e(t,n,r,a,o,s){i(this,e),this.type="startTag",this.length=n,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=a,this.html5Unary=!1,this.unary=o,this.rest=s}return e.prototype.toString=function(){return a.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,n,r,a,o){i(this,e),this.type="atomicTag",this.length=n,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1,this.content=o}return e.prototype.toString=function(){return a.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,n){i(this,e),this.type="endTag",this.length=n,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=n},function(e,t){"use strict";function n(e){return e&&"startTag"===e.type&&(e.unary=s.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function i(e,t){var i=e.stream,r=n(t());return e.stream=i,r}function r(e,t){var n=t.pop();e.prepend("</"+n.tagName+">")}function a(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1},e}function o(e,t,o){function s(){var t=i(e,o);t&&u[t.type]&&u[t.type](t)}var c=a(),u={startTag:function(n){var i=n.tagName;"TR"===i.toUpperCase()&&c.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),s()):t.selfCloseFix&&l.test(i)&&c.containsTagName(i)?c.lastTagNameEq(i)?r(e,c):(e.prepend("</"+n.tagName+">"),s()):n.unary||c.push(n)},endTag:function(n){c.last()?t.tagSoupFix&&!c.lastTagNameEq(n.tagName)?r(e,c):c.pop():t.tagSoupFix&&(o(),s())}};return function(){return s(),n(o())}}t.__esModule=!0,t.default=o;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function n(e){return null!=e}function i(e){return"function"==typeof e}function r(e,t,n){var i=void 0,r=e&&e.length||0;for(i=0;i<r;i++)t.call(n,e[i],i)}function a(e,t,n){for(var i in e)e.hasOwnProperty(i)&&t.call(n,i,e[i])}function o(e,t){return e=e||{},a(t,(function(t,i){n(e[t])||(e[t]=i)})),e}function s(e){try{return Array.prototype.slice.call(e)}catch(i){var t=(n=[],r(e,(function(e){n.push(e)})),{v:n});if("object"===(void 0===t?"undefined":p(t)))return t.v}var n}function l(e){return e[e.length-1]}function c(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function u(e){return c(e,"script")}function d(e){return c(e,"style")}t.__esModule=!0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=n,t.isFunction=i,t.each=r,t.eachKey=a,t.defaults=o,t.toArray=s,t.last=l,t.isTag=c,t.isScript=u,t.isStyle=d}])},"object"==typeof t&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof t?t.postscribe=i():n.postscribe=i()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-document").createElement("div");e.exports=function(e){return i.innerHTML=e,i.textContent||i.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-document"),r=function(e){for(var t=i.querySelectorAll("script"),n=0;n<t.length;n++){var r=t[n];if(e.test(r.src))return r}},a=function(){return r(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:a,byRegexPattern:r}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:i.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-promise"),r=0;e.exports=function(e,t){var n="_runScript"+ ++r,a=new i((function(t,r){_satellite[n]=function(a){delete _satellite[n],new i((function(t){t(a.call(e.event.element,e.event,e.event.target,i))})).then(t,r)}}));return{code:'<script>_satellite["'+n+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:a}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-promise"),a=0,o={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=o[e];t&&(delete o[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=o[e];t&&(delete o[e],t.reject())};var s=function(e){return-1!==e.indexOf("${reactorCallbackId}")},l=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},c=function(e){return e.settings.isExternal};e.exports=function(e,t){var n;return c(e)&&(t=i.replaceTokens(t,e.event)),s(t)?(n=new r((function(e,t){o[String(a)]={resolve:e,reject:t}})),t=l(t,a),a+=1):n=r.resolve(),{code:t,promise:n}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-load-script"),r=n("@adobe/reactor-promise"),a=n("../../helpers/findPageScript").byRegexPattern,o={},s={},l=function(e){return s[e]||(s[e]=i(e)),s[e]};_satellite.__registerScript=function(e,t){var n;if(document.currentScript)n=document.currentScript.getAttribute("src");else{var i=new RegExp(".*"+e+".*");n=a(i).getAttribute("src")}o[n]=t},e.exports=function(e){return o[e]?r.resolve(o[e]):new r((function(t){l(e).then((function(){t(o[e])}),(function(){t()}))}))}}},
"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,n){"use strict";var i=n("./weakMap"),r=n("./matchesProperties"),a=n("./matchesSelector");e.exports=function(){var e=[],t=new i,n={addListener:function(t,n){e.push({settings:t,callback:n})},evaluateEvent:function(n,i){if(e.length&&!t.has(n)){for(var o=n.target,s=!1;o;){for(var l=!1,c=!1,u=0;u<e.length;u++){var d=e[u],p=d.settings.elementSelector,h=d.settings.elementProperties;if((!1!==d.settings.bubbleFireIfChildFired||!s)&&(o===n.target||!1!==d.settings.bubbleFireIfParent)&&(o===n.target||p||h&&Object.keys(h).length)&&(!p||a(o,p))&&(!h||r(o,h))){var g={};i?Object.keys(n).forEach((function(e){g[e]=n[e]})):g.nativeEvent=n,g.element=o,g.target=n.target,!1!==d.callback(g)&&(c=!0,d.settings.bubbleStop&&(l=!0))}}if(l)break;c&&(s=!0),o=o.parentNode}t.set(n,!0)}},__reset:function(){e=[]}};return n}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,n){"use strict";var i=n("@adobe/reactor-window").WeakMap;if(void 0===i){var r=Object.defineProperty,a=Date.now()%1e9;(i=function(){this.name="__st"+(1e9*Math.random()>>>0)+a+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:r(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}e.exports=i}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,n){"use strict";var i=n("./../../helpers/textMatch"),r=function(e,t){return"@text"===t||"innerText"===t?e.textContent||e.innerText:t in e?e[t]:e.getAttribute?e.getAttribute(t):void 0};e.exports=function(e,t){return!t||t.every((function(t){var n=r(e,t.name),a=t.valueIsRegex?new RegExp(t.value,"i"):t.value;return i(n,a)}))}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,n,i){"use strict";e.exports=function(e,t){var n=e.matches||e.msMatchesSelector;if(n)try{return n.call(e,t)}catch(e){return i.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}},"core/src/lib/helpers/stringAndNumberUtils.js":{script:function(e){"use strict";var t=function(e){return"number"==typeof e&&isFinite(e)},n=function(e){return"string"==typeof e||e instanceof String},i=function(e){return t(e)?String(e):e},r=function(e){return n(e)?Number(e):e};e.exports={isNumber:t,isString:n,castToStringIfNumber:i,castToNumberIfString:r}}}}},"adobe-video-analytics":{displayName:"Adobe Media Analytics for Audio and Video",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPda19e4cc14f2458a8e6fd7f159b67247/",settings:{ovp:"",ssl:!0,channel:"",appVersion:"",playerName:"",debugLogging:!1,trackingServer:"discoverydp.hb.omtrdc.net",exportNamespace:"ADB"},modules:{"adobe-video-analytics/src/lib/sharedModules/getInstance.js":{name:"get-instance",shared:!0,script:function(e,t,n){"use strict";var i=n("../helpers/getInstance");e.exports=i}},"adobe-video-analytics/src/lib/sharedModules/mediaHeartbeat.js":{name:"media-heartbeat",shared:!0,script:function(e,t,n,i){"use strict";var r=n("../helpers/mediaHeartbeat");n("../helpers/exportGlobal")(i.getExtensionSettings()),e.exports=r}},"adobe-video-analytics/src/lib/helpers/getInstance.js":{script:function(e,t,n,i){"use strict";function r(e){if(!e||"object"!=typeof e||"function"!=typeof e.getQoSObject||"function"!=typeof e.getCurrentPlaybackTime)throw new Error("Delegate must be a valid object with getQosObject() and getCurrentPlaybackTime() functions.");this._delegate=e}function a(e,t){t&&"object"==typeof t||(t={});var n=new c;return n.trackingServer=e.trackingServer,n.debugLogging=e.debugLogging,n.appVersion=e.appVersion,n.ssl=e.ssl,n.channel="string"==typeof t.channel?t.channel:e.channel,n.ovp="string"==typeof t.ovp?t.ovp:e.ovp,n.playerName="string"==typeof t.playerName?t.playerName:e.playerName,"string"==typeof n.playerName&&""!==n.playerName||(n.playerName="unknown"),n}var o=n("@adobe/reactor-promise"),s=n("../codeLibrary/MediaSDK.min"),l=s.va.MediaHeartbeat,c=s.va.MediaHeartbeatConfig,u=s.va.MediaHeartbeatDelegate,d=i.getExtensionSettings(),p=i.getSharedModule("adobe-analytics","get-tracker");s.core.extend(r.prototype,u.prototype),r.prototype.getCurrentPlaybackTime=function(){return this._delegate.getCurrentPlaybackTime()},r.prototype.getQoSObject=function(){return this._delegate.getQoSObject()},e.exports=function(e,t){return o.resolve().then((function(){var n=new r(e),o=a(d,t);if(!p){var s="Error getting a reference to Analytics shared module. Make sure Adobe Analytics Extension is configured properly.";throw i.logger.error(s),new Error(s)}return p().then((function(e){return new l(n,o,e)}))}))}}},"adobe-video-analytics/src/lib/codeLibrary/MediaSDK.min.js":{script:function(e,t){var n,i;n="undefined"!=typeof self?self:this,i=function(e){var t={};(function(){var e;!function(e){if(void 0===t)var t={};if(void 0===n)var n={};if(void 0===i)var i={};if(i.radio||(i.radio={}),i.plugin||(i.plugin={}),void 0===r)var r={};r.clock||(r.clock={}),function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function i(e,i,r,a,o,s){return t(n(t(t(i,e),t(a,s)),o),r)}function r(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function a(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}function l(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var i,l,c,u,d,p=1732584193,h=-271733879,g=-1732584194,f=271733878;for(i=0;i<e.length;i+=16)l=p,c=h,u=g,d=f,p=r(p,h,g,f,e[i],7,-680876936),f=r(f,p,h,g,e[i+1],12,-389564586),g=r(g,f,p,h,e[i+2],17,606105819),h=r(h,g,f,p,e[i+3],22,-1044525330),p=r(p,h,g,f,e[i+4],7,-176418897),f=r(f,p,h,g,e[i+5],12,1200080426),g=r(g,f,p,h,e[i+6],17,-1473231341),h=r(h,g,f,p,e[i+7],22,-45705983),p=r(p,h,g,f,e[i+8],7,1770035416),f=r(f,p,h,g,e[i+9],12,-1958414417),g=r(g,f,p,h,e[i+10],17,-42063),h=r(h,g,f,p,e[i+11],22,-1990404162),p=r(p,h,g,f,e[i+12],7,1804603682),f=r(f,p,h,g,e[i+13],12,-40341101),g=r(g,f,p,h,e[i+14],17,-1502002290),p=a(p,h=r(h,g,f,p,e[i+15],22,1236535329),g,f,e[i+1],5,-165796510),f=a(f,p,h,g,e[i+6],9,-1069501632),g=a(g,f,p,h,e[i+11],14,643717713),h=a(h,g,f,p,e[i],20,-373897302),p=a(p,h,g,f,e[i+5],5,-701558691),f=a(f,p,h,g,e[i+10],9,38016083),g=a(g,f,p,h,e[i+15],14,-660478335),h=a(h,g,f,p,e[i+4],20,-405537848),p=a(p,h,g,f,e[i+9],5,568446438),f=a(f,p,h,g,e[i+14],9,-1019803690),g=a(g,f,p,h,e[i+3],14,-187363961),h=a(h,g,f,p,e[i+8],20,1163531501),p=a(p,h,g,f,e[i+13],5,-1444681467),f=a(f,p,h,g,e[i+2],9,-51403784),g=a(g,f,p,h,e[i+7],14,1735328473),p=o(p,h=a(h,g,f,p,e[i+12],20,-1926607734),g,f,e[i+5],4,-378558),f=o(f,p,h,g,e[i+8],11,-2022574463),g=o(g,f,p,h,e[i+11],16,1839030562),h=o(h,g,f,p,e[i+14],23,-35309556),p=o(p,h,g,f,e[i+1],4,-1530992060),f=o(f,p,h,g,e[i+4],11,1272893353),g=o(g,f,p,h,e[i+7],16,-155497632),h=o(h,g,f,p,e[i+10],23,-1094730640),p=o(p,h,g,f,e[i+13],4,681279174),f=o(f,p,h,g,e[i],11,-358537222),g=o(g,f,p,h,e[i+3],16,-722521979),h=o(h,g,f,p,e[i+6],23,76029189),p=o(p,h,g,f,e[i+9],4,-640364487),f=o(f,p,h,g,e[i+12],11,-421815835),g=o(g,f,p,h,e[i+15],16,530742520),p=s(p,h=o(h,g,f,p,e[i+2],23,-995338651),g,f,e[i],6,-198630844),f=s(f,p,h,g,e[i+7],10,1126891415),g=s(g,f,p,h,e[i+14],15,-1416354905),h=s(h,g,f,p,e[i+5],21,-57434055),p=s(p,h,g,f,e[i+12],6,1700485571),f=s(f,p,h,g,e[i+3],10,-1894986606),g=s(g,f,p,h,e[i+10],15,-1051523),h=s(h,g,f,p,e[i+1],21,-2054922799),p=s(p,h,g,f,e[i+8],6,1873313359),f=s(f,p,h,g,e[i+15],10,-30611744),g=s(g,f,p,h,e[i+6],15,-1560198380),h=s(h,g,f,p,e[i+13],21,1309151649),p=s(p,h,g,f,e[i+4],6,-145523070),f=s(f,p,h,g,e[i+11],10,-1120210379),g=s(g,f,p,h,e[i+2],15,718787259),h=s(h,g,f,p,e[i+9],21,-343485551),p=t(p,l),h=t(h,c),g=t(g,u),f=t(f,d);return[p,h,g,f]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){return c(l(u(e),8*e.length))}function p(e,t){var n,i,r=u(e),a=[],o=[];for(a[15]=o[15]=void 0,r.length>16&&(r=l(r,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^r[n],o[n]=1549556828^r[n];return i=l(a.concat(u(t)),512+8*t.length),c(l(o.concat(i),640))}function h(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function g(e){return unescape(encodeURIComponent(e))}function f(e){return d(g(e))}function _(e){return h(f(e))}function m(e,t){return p(g(e),g(t))}function v(e,t){return h(m(e,t))}function y(e,t,n){return t?n?m(t,e):v(t,e):n?f(e):_(e)}e.md5=y}(t),function(e){"use strict";var t={startsWith:function(e,t){return 0==e.indexOf(t)}};e.StringUtils=t}(t),function(e){"use strict";var t={clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},merge:function(e,n){var i=t.clone(e);for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i},append:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}};e.ObjectUtils=t}(t),function(e){"use strict";function t(e){if(null==e)return!0;for(var t=0;t<e.length;++t)if(isNaN(e[t]))return!1;return!0}function n(e,n){if("string"!=typeof e||"string"!=typeof n)return NaN;var i=e.split("."),r=n.split(".");if(!t(i)||!t(r))return NaN;for(var a=Math.max(i.length,r.length),o=0;o<a;++o){var s=null!=i[o]?i[o]:"0",l=null!=r[o]?r[o]:"0";if((s=Number(s))>(l=Number(l)))return 1;if(s<l)return-1}return 0}var i={isGreaterThan:function(e,t){return n(e,t)>0},isGreaterThanEqual:function(e,t){return n(e,t)>=0},isLessThan:function(e,t){return n(e,t)<0},isLessThanEqual:function(e,t){return n(e,t)<=0},isSame:function(e,t){return 0===n(e,t)},isDifferent:function(e,t){return 0!==n(e,t)}};e.VersionUtils=i}(t),function(e){"use strict";function t(e,t,n){this.fn=e,this.ctx=t,this.params=n}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(i),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var e=this;!function t(){var n=e._queue.shift();n?e._runCommand(n,(function(){e._isSuspended||t()})):e._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function n(){e.run(),null!=t&&t.call(i)}var i=this;if(0==this._lastTs)n();else{var r=(new Date).getTime(),a=r-this._lastTs;this._lastTs=r,a<this._delay?setTimeout(n,this._delay-a):n()}},e.radio.CommandQueue=t}(i),function(e){"use strict";function t(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function n(e,n){if(e===n)return!0;for(var i=(e||"").split(t.SEPARATOR),r=(n||"").split(t.SEPARATOR),a=!0,o=0;o<i.length;o++)a=a&&(i[o]===t.WILDCARD||i[o]===r[o]);return a}t.WILDCARD="*",t.SEPARATOR=":",t.prototype.toString=function(){return"<channel: "+this._name+">"},t.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(i,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},t.prototype.on=function(e,t,n){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:n}))},t.prototype.off=function(e,t,n){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!n)return void(this._listeners={});if(e)this._removeListener(e,t,n);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,n)}},t.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&n(t,e.name))for(var i=this._listeners[t].slice(0),r=0;r<i.length;r++){var a=i[r];a.fn.call(a.ctx,e)}},t.prototype.comply=function(e,t,n){this._isShutDown||(this._commands[e]={cmd:t,ctx:n})},t.prototype.command=function(e,t){if(!this._isShutDown){var n=this._commands[e];if(!n)return void this._logger.warn(i,"#command > No command handler for: "+e);n.cmd.call(n.ctx,t)}},t.prototype.reply=function(e,t,n){this._isShutDown||(this._requests[e]={fn:t,ctx:n})},t.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(i,"#request > No request handler for: "+e),null)}},t.prototype._removeListener=function(e,t,n){t="function"==typeof t?t:null;var i=this._listeners[e];if(i){if(!i.length||null==t&&!n)return void delete this._listeners[e];for(var r=0;r<i.length;r++){var a=i[r];null!==t&&t!==a.fn||n&&n!==a.ctx||this._listeners[e].splice(r,1)}}};var i="radio::Channel";e.radio.Channel=t}(i),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var n=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new n(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(i),function(e){"use strict";function t(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}e.extend=t}(i),function(e){"use strict";function t(){}t.prototype.write=function(){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(i),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(i),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(i),function(e){"use strict";function t(){this._logWriter=new i}function n(e){return e<10?"00"+e:e<100?"0"+e:""+e}var i=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,a,t)},t.prototype.info=function(e,t){this._log(e,r,t)},t.prototype.warn=function(e,t){this._log(e,o,t)},t.prototype.error=function(e,t){this._log(e,s,t)},t.prototype._log=function(e,t,i){if(t==s||this._enabled){var r="",a=new Date;r+="["+a.toTimeString()+"."+n(a.getMilliseconds())+"] ["+t+"] ",r+="["+e+"] "+i,this._logWriter.write(r)}};var r="INFO",a="DEBUG",o="WARN",s="ERROR";e.Logger=t}(i),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+n.SEPARATOR+this._eventName},e.Trigger=t}(i),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(i),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},t.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var i,r,a=!1;for(r in this._events)if(e===r){a=!0;break}if(a){for(i=this._events[r].length-1;i>=0;i--){var o=this._events[r][i];t===o.cb&&n===o.ctx&&this._events[r].splice(i,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,n;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var i=this._events[t].slice(0),r=i.length;for(n=0;n<r;n++)i[n].cb.call(i[n].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,n;if(e){for(n in this._events)if(this._events.hasOwnProperty(n)){for(t=this._events[n].length-1;t>=0;t--)this._events[n][t].ctx===e&&this._events[n].splice(t,1);this._events[n].length||delete this._events[n]}}else this._events={}},e.EventDispatcher=t}(i),function(e){"use strict";function t(){}function n(e,t){this.url=e||null,this.method=t,this._xmlhttp=null}function i(){i.__super__.constructor.call(this),this._connection=null}var r=e.Event,a=e.EventDispatcher;t.GET="GET",i.RESPONSE="response",i.INSTANCE="instance",e.extend(i,a),i.prototype.close=function(){this.removeAllListeners(null)},i.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},i.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var n=new window.XMLHttpRequest;"withCredentials"in n&&(t=n).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var a={};a[i.INSTANCE]=this;var o=this;t.onload=function(){if(t.status&&parseInt(t.status,10)>=400)return this.onerror();a[i.RESPONSE]=t.responseText,o.dispatchEvent(new r(r.SUCCESS,a))},t.onerror=function(){o.dispatchEvent(new r(r.ERROR,a))}}return t},i.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[i.RESPONSE]="",t[i.INSTANCE]=this,this.dispatchEvent(new r(r.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=n,e.URLLoader=i}(i),function(e){"use strict";var t="2.2.1.229",n="1bf77a",i={getVersion:function(){return"js-extn-"+t+"-"+n},getMajor:function(){return i.getNumberAtPosition(0)},getMinor:function(){return i.getNumberAtPosition(1)},getMicro:function(){return i.getNumberAtPosition(2)},getPatch:function(){return i.getNumberAtPosition(3)},getBuild:function(){return n},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(".")[e]}};e.Version=i}(n),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(n),function(e){"use strict";function t(){this.debugLogging=!1}e.HeartbeatConfig=t}(n),function(e){"use strict";function t(){}t.prototype.onError=function(){},e.HeartbeatDelegate=t}(n),function(e){"use strict";function t(){}t.prototype.configure=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(i),function(e){"use strict";function t(e,t,n,i){this.trigger=e,this.action=n,this.plugin=t,this._paramMappings={},this.mergeParams(i)}var n=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];this._paramMappings[n.getKeyName()]=n}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var i=new n(e,t);this._paramMappings.hasOwnProperty(i.getKeyName())&&delete this._paramMappings[i.getKeyName()]},e.plugin.Behaviour=t}(i),function(e){"use strict";function t(e,t,i){this._pluginName=e,this._key=t,this._paramName=i||e+n.SEPARATOR+t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+n.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(i),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new i(this._logger),this._dataChannel=this._radio.channel(o),this._ctrlChannel=this._radio.channel(s)}var n=e.Event,i=e.radio.Radio,r=e.radio.Channel,a=e.plugin.Behaviour;t.ERROR="error",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),this._plugins[t]=e,e.bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,n,i){this._dataChannel.on(e+r.SEPARATOR+t,n,i)},t.prototype.off=function(e,t,n,i){var a=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(a,n,i)},t.prototype.trigger=function(e){var t=e.name,n=this._behaviours[t];if(n){var i,r,a,o,s,l={},c={};for(i=0;i<n.length;i++)if(o=(a=n[i]).getParams())for(r=0;r<o.length;r++)l[(s=o[r]).getPluginName()]=l[s.getPluginName()]||[],s.key in l[s.getPluginName()]||l[s.getPluginName()].push(s.getKey());for(var u in l)l.hasOwnProperty(u)&&(c[u]=this.request(u,l[u]));for(i=0;i<n.length;i++){var d={_behaviour:a=n[i],_eventData:e.data||{}};if(o=a.getParams()){for(r=0;r<o.length;r++)d[(s=o[r]).getParamName()]=c[s.getPluginName()]?c[s.getPluginName()][s.getKey()]:null;this.command(a.plugin.getName(),a.action,d)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){var n=this._plugins[e];return n&&t&&0!=t.length?n.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;var i=new n(t.ERROR,e);this._ctrlChannel.trigger(i)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,n){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,n,e)},t.prototype.command=function(e,t,n){this._dataChannel.command(e+r.SEPARATOR+t,n)},t.prototype.registerBehaviour=function(e,t,n,i){var r=e.getName(),o=new a(e,t,n,i);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(o)};var o="data_channel",s="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=t}(i),function(e,t){"use strict";function n(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new i}var i=e.Logger,r=e.Trigger,a=e.Event,o=t.ErrorInfo;n.INITIALIZED="initialized",n.prototype.configure=function(){},n.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new o("Invalid state.","Plugin already destroyed."))},n.prototype.setup=function(){this._trigger(n.INITIALIZED),this._isInitialized=!0},n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},n.prototype.enable=function(){this._isEnabled=!0,this._enabled()},n.prototype.disable=function(){this._isEnabled=!1,this._disabled()},n.prototype.getName=function(){return this._name},n.prototype.getLogger=function(){return this._logger},n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var n=0;n<e.length;n++){var i=e[n];this._dataResolver.hasOwnProperty(i)&&(t=t||{},"function"==typeof this._dataResolver[i]?t[i]=this._dataResolver[i].call(this):t[i]=this._dataResolver[i])}return t},n.prototype.toString=function(){return"<plugin: "+this._name+">"},n.prototype._enabled=function(){},n.prototype._disabled=function(){},n.prototype._teardown=function(){},n.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},n.prototype._trigger=function(e,t){var n=a.createFromTrigger(new r(this.getName(),e));n.data=t,this._pluginManager.trigger(n)},e.plugin.BasePlugin=n}(i,n),function(e){"use strict";function t(e,t,n){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==n?n:r,this._nextTickTimestamp=0,this.reset()}function n(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var n=this;this._clock=window.setInterval((function(){n._onTick()}),1e3*a)}t.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},t.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-o/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},t.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},n.prototype.createTimer=function(e,n,i){this._timers[e]=new t(e,n,i)},n.prototype.destroyTimer=function(e){delete this._timers[e]},n.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(i,"#resumeTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!0,t&&n.reset())},n.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(i,"#pauseTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!1,t&&n.reset())},n.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},n.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(t.interval>1&&this._logger.debug(i,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=r&&t.repeatCount--):this.destroyTimer(t.name))}};var i="service.clock::TimerManager",r=-1,a=.25,o=1e3*a;e.clock.TimerDescriptor=t,e.clock.TimerManager=n}(r),function(e,t,n){"use strict";function i(e){if(i.__super__.constructor.call(this,s),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=n.clock.TimerManager,a=t.StringUtils,o=e.plugin.BasePlugin;e.extend(i,o),i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,u,this._cmdResume),this._pluginManager.comply(this,c,this._cmdPause),this._pluginManager.comply(this,d,this._cmdDestroy)},i.prototype._teardown=function(){this._timerManager.destroy()},i.prototype._cmdCreate=function(e){var t=e[g]||v;this._timerManager.createTimer(e[p],e[h],t)},i.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[p],!!e[_])},i.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[p],!!e[_])},i.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[p])},i.prototype.onTick=function(e,t,n){e+=".tick";var i={};i[p]=e,i[h]=t,i[f]=n,this._trigger(e,i)},i.prototype._setupDataResolver=function(){var e={},t=this._timerManager;e[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];if(n=n||{},a.startsWith(r,m)){var o=r.split(m+".");o.length>0&&(n[r]=e[m].call(this,o[1]))}}return n}};var s="service.clock",l="create",c="pause",u="resume",d="destroy",p="name",h="interval",g="repeat_count",f="tick",_="reset",m="is_paused",v=-1;n.clock.ClockService=i}(i,t,r),function(e,t,n){"use strict";function i(e,t){if(this._logger=new r,this._pluginManager=new a(this._logger),this._pluginManager.addPlugin(new o(this._logger)),t)for(var n=0;n<t.length;n++)this._pluginManager.addPlugin(t[n]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,a=e.plugin.PluginManager,o=t.clock.ClockService;i.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(s,"Instance is destroyed.")},i.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var s="Heartbeat";n.Heartbeat=i}(i,r,n),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=i),e.ADB.va||(e.ADB.va=n),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===t)var t={};!function(e){"use strict";var t={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};e.AssetType=t}(t),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(t),function(e){"use strict";function t(){this.debugLogging=!1}e.VideoPlayerPluginConfig=t}(t),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},
t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,s),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var i=e.plugin.ParamMapping,r=e.Trigger,a=e.plugin.BasePlugin,o=t.VideoPlayerPluginConfig;e.extend(n,a),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof o))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype._cmdVideoIdleStart=function(){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},n.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(f),this._trigger(_),e.isInAd&&(this._trigger(S),this._isTrackingAdBreak=!0),e.isInAd&&(this._trigger(A),this._isTrackingAd=!0),e.isInChapter&&this._trigger(O),this._trigger(b)),this._videoIdle=!1},n.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(f),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(_)}},n.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(p),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},n.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(h),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},n.prototype.beginReporting=function(){this._logger.info(this._logTag,"#beginReporting()"),this._canProcess()&&this._startSessionIfNeeded("beginReporting")&&this._trigger(F)},n.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(b),this._startPlayheadTimer())},n.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()){this._stopPlayheadTimer();var e={};e[U]=!1,this._isPaused=!0,this._trigger(I,e)}},n.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(w))},n.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(D),this._startPlayheadTimer())},n.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(P))},n.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(M),this._startPlayheadTimer())},n.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(e&&e());var n={};n[B]=e,(t=void 0===t||!!t)?this._trigger(m,n):(this._trigger(v),this._trigger(g,n))}},n.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(y,e)},n.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(O)},n.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(N)},n.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(L)},n.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(S),this._isTrackingAdBreak=!0)},n.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(k),this._isTrackingAdBreak=!1)},n.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(A),this._isTrackingAd=!0)},n.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(E),this._isTrackingAd=!1)},n.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(C),this._isTrackingAd=!1)},n.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(R)},n.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[H]=d,t[q]=e,this._trigger(x,t)}},n.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[H]=u,t[q]=e,this._trigger(x,t)}},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(c,j),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(c,V),this,"handleVideoIdleResume",[new i(l,"ad.isInAdBreak","isInAdBreak"),new i(l,"ad.isInAd","isInAd"),new i(l,"chapter.isInChapter","isInChapter")])},n.prototype._setupDataResolver=function(){function e(){return o.video||(o.video=s._delegate.getVideoInfo(),s._logger.info(s._logTag,"Data from delegate > VideoInfo: "+o.video)),o.video}function t(){return o.ad||(o.ad=s._delegate.getAdInfo(),s._logger.info(s._logTag,"Data from delegate > AdInfo: "+o.ad)),o.ad}function n(){return o.pod||(o.pod=s._delegate.getAdBreakInfo(),s._logger.info(s._logTag,"Data from delegate > AdBreakInfo: "+o.pod)),o.pod}function i(){return o.chapter||(o.chapter=s._delegate.getChapterInfo(),s._logger.info(s._logTag,"Data from delegate > ChapterInfo: "+o.chapter)),o.chapter}function r(){return o.qos||(o.qos=s._delegate.getQoSInfo(),s._logger.info(s._logTag,"Data from delegate > QoSInfo: "+o.qos)),o.qos}var a={},o={},s=this;a["video.id"]=function(){var t=e(),n=t?t.id:null;return s._logger.debug(s._logTag,"Resolving video.id: "+n),n},a["video.name"]=function(){var t=e(),n=t?t.name:null;return s._logger.debug(s._logTag,"Resolving video.name: "+n),n},a["video.length"]=function(){var t=e(),n=t?t.length:NaN;return s._logger.debug(s._logTag,"Resolving video.length: "+n),n},a["video.playerName"]=function(){var t=e(),n=t?t.playerName:null;return s._logger.debug(s._logTag,"Resolving video.playerName: "+n),n},a["video.mediaType"]=function(){var t=e(),n=t?t.mediaType:null;return s._logger.debug(s._logTag,"Resolving video.mediaType: "+n),n},a["video.streamType"]=function(){var t=e(),n=t?t.streamType:null;return s._logger.debug(s._logTag,"Resolving video.streamType: "+n),n},a["video.playhead"]=function(){var t=e(),n=t?t.playhead:NaN;return s._logger.debug(s._logTag,"Resolving video.playhead: "+n),n},a["video.resumed"]=function(){var t=e(),n=!!t&&t.resumed;return s._logger.debug(s._logTag,"Resolving video.resumed: "+n),n},a["video.playheadStalled"]=function(){return this._playheadStalled},a["pod.name"]=function(){var e=n(),t=e?e.name:null;return s._logger.debug(s._logTag,"Resolving pod.name: "+t),t},a["pod.playerName"]=function(){var e=n(),t=e?e.playerName:null;return s._logger.debug(s._logTag,"Resolving pod.playerName: "+t),t},a["pod.position"]=function(){var e=n(),t=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving pod.position: "+t),t},a["pod.startTime"]=function(){var e=n(),t=e?e.startTime:NaN;return s._logger.debug(s._logTag,"Resolving pod.startTime: "+t),t},a["ad.isInAd"]=function(){var e=null!=t();return s._logger.debug(s._logTag,"Resolving ad.isInAd: "+e),e},a["ad.isInAdBreak"]=function(){var e=null!=n();return s._logger.debug(s._logTag,"Resolving ad.isInAdBreak: "+e),e},a["ad.id"]=function(){var e=t(),n=e?e.id:null;return s._logger.debug(s._logTag,"Resolving ad.id: "+n),n},a["ad.name"]=function(){var e=t(),n=e?e.name:null;return s._logger.debug(s._logTag,"Resolving ad.name: "+n),n},a["ad.length"]=function(){var e=t(),n=e?e.length:NaN;return s._logger.debug(s._logTag,"Resolving ad.length: "+n),n},a["ad.position"]=function(){var e=t(),n=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving ad.position: "+n),n},a["ad.granularTracking"]=function(){var e=t(),n=!!e&&e.granularTracking;return s._logger.debug(s._logTag,"Resolving ad.granularTracking: "+n),n},a["ad.trackingInterval"]=function(){var e=G;return s._logger.debug(s._logTag,"Resolving ad.trackingInterval: "+e),e},a["chapter.isInChapter"]=function(){var e=null!=i();return s._logger.debug(s._logTag,"Resolving chapter.isInChapter: "+e),e},a["chapter.name"]=function(){var e=i(),t=e?e.name:null;return s._logger.debug(s._logTag,"Resolving chapter.name: "+t),t},a["chapter.length"]=function(){var e=i(),t=e?e.length:NaN;return s._logger.debug(s._logTag,"Resolving chapter.length: "+t),t},a["chapter.position"]=function(){var e=i(),t=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving chapter.position: "+t),t},a["chapter.startTime"]=function(){var e=i(),t=e?e.startTime:NaN;return s._logger.debug(s._logTag,"Resolving chapter.startTime: "+t),t},a["qos.bitrate"]=function(){var e=r(),t=e?e.bitrate:NaN;return s._logger.debug(s._logTag,"Resolving qos.bitrate: "+t),t},a["qos.fps"]=function(){var e=r(),t=e?e.fps:NaN;return s._logger.debug(s._logTag,"Resolving qos.fps: "+t),t},a["qos.droppedFrames"]=function(){var e=r(),t=e?e.droppedFrames:NaN;return s._logger.debug(s._logTag,"Resolving qos.droppedFrames: "+t),t},a["qos.startupTime"]=function(){var e=r(),t=e?1e3*e.startupTime:NaN;return s._logger.debug(s._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;o={};for(var t=null,n=0;n<e.length;n++){var i=e[n];(t=t||{})[i]=a.hasOwnProperty(i)?a[i].call(this):null}return t}},n.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(I)))},n.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(b)))},n.prototype._startPlayheadTimer=function(){var e=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval((function(){if(e._canProcess()){var t=e._dataResolver(["ad.isInAd","video.playhead"]);if(e._isTrackingAdBreak)e._playheadStalled&&e._trackExitStall();else{var n=t["video.playhead"];n!=e._previousPlayhead?e._trackExitStall():e._previousPlayhead>=0&&n==e._previousPlayhead&&++e._stalledPlayheadCount==K&&e._trackPlayheadStall(),n!=e._previousPlayhead&&n>0&&!e._contentStarted&&(e._isPaused||e._isBuffering||e._isSeeking||(e._logger.info(e._logTag,"#_playheadTimer playhead progress to: "+n),e._trigger(T),e._contentStarted=!0)),e._previousPlayhead=n}}}),Y))},n.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},n.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},n.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd&&(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),1))};var s="player",l=s,c="adobe-heartbeat",u="sourceErrorExternal",d="sourceErrorSDK",p="video_load",h="video_unload",g="video_session_end",f="video_start",_="video_resume",m="video_complete",v="video_skip",y="timed_metadata",b="play",I="pause",T="content_start",S="adbreak_start",k="adbreak_complete",A="ad_start",E="ad_complete",C="ad_skip",w="buffer_start",D="buffer_complete",P="seek_start",M="seek_complete",O="chapter_start",N="chapter_complete",L="chapter_skip",R="bitrate_change",x="track_error",j="video_idle_start",V="video_idle_resume",F="video_begin_reporting",B="callback",U="filter_report",H="source",q="error_id",Y=1001,G=1,K=2;t.VideoPlayerPlugin=n}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function n(e,t,n,i,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+n,this._logger=r,this._isDestroyed=!1,this._createTimer(n,i),this._installHandlers()}var i=e.Event;n.KEY_NAME="name",n.KEY_INTERVAL="interval",n.KEY_RESET="reset",n.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,l,t)},n.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,s,t)},n.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[n.KEY_NAME]=r+"."+this._name,this._pluginManager.command(a,c,e)}},n.prototype.setInterval=function(e){var t=u+"."+r+"."+this._name,n=this._pluginManager.request(a,[t])[t];this.pause(!0),this._createTimer(this._name,e),n||this.resume(!0)},n.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.resume(t)},n.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.pause(t)},n.prototype._onTick=function(e,t){this._channel.trigger(new i("clock:"+this._name+".tick",t))},n.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(a,r+"."+this._name+".tick",this._onTick,this)},n.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},n.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var i={};i[n.KEY_NAME]=r+"."+this._name,i[n.KEY_INTERVAL]=this._interval,this._pluginManager.command(a,o,i)};var r="heartbeat",a="service.clock",o="create",s="pause",l="resume",c="destroy",u="is_paused";t.clock.Timer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,a,s,i)}var i=e.Event,r=t.clock.Timer;e.extend(n,r),n.prototype._onCheckStatusComplete=function(e){var t=e.data[d];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");t>o?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s)},n.prototype._getSettings=function(){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new i(l))},n.prototype._installHandlers=function(){n.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(u,this._onCheckStatusComplete,this),this._channel.reply(d,(function(){return this._interval}),this)};var a="check_status",o=600,s=180,l="clock:check_status.tick",c="clock:check_status.get_settings",u="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,a,i),this._doNotOverrideInterval=!1}var i=t.clock.Timer;e.extend(n,i),n.prototype._onCheckStatusComplete=function(e){var t=e.data[o];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a)},n.prototype._onUpdateReportingInterval=function(e){var t=e.data[o];if(this._doNotOverrideInterval=!!e.data[s],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+t+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(a)},n.prototype._installHandlers=function(){n.__super__._installHandlers.call(this),this._channel.on(c,this._onCheckStatusComplete,this),this._channel.on(l,this._onUpdateReportingInterval,this),this._channel.reply(o,(function(){return this._interval}),this)};var r="reporting",a=10,o="reporting_interval",s="do_not_override_interval",l="reporting:update_interval",c="net:check_status_complete";t.clock.ReportingTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,a,i)}var i=t.clock.Timer;e.extend(n,i);var r="idle",a=1800;t.clock.IdleTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,a,i)}var i=t.clock.Timer;e.extend(n,i);var r="flush_filter",a=.25;t.clock.FlushFilterTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,n){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!n)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new a(e,t,n),this._checkStatusTimer=new i(e,t,n),this._flushFilterTimer=new r(e,t,n),this._idleTimer=new o(e,t,n)}var i=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,a=t.clock.ReportingTimer,o=t.clock.IdleTimer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this.value=e,this.hint=t}function i(e){this.realm=e,this.data={}}n.HINT_SHORT="short",i.prototype.setField=function(e,t,i){this.data[e]=new n(t,i)},i.prototype._createAccessor=function(e,t,n){var i=this;return function(){return arguments.length&&(i[e]=arguments[0],i.setField(t,arguments[0],n)),i[e]}},t.model.Dao=i,t.model.DaoField=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var i=t.model.Dao;e.extend(n,i),t.model.AdDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var i=t.model.Dao,r=t.model.DaoField;e.extend(n,i),t.model.AdobeAnalyticsDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var i=t.model.Dao;e.extend(n,i),t.model.ChapterDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new r(e.adData()):null;this.adData(t);var i=e.chapterData()?new a(e.chapterData()):null;this.chapterData(i)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var i=t.model.Dao,r=t.model.AdDao,a=t.model.ChapterDao;e.extend(n,i),n.TYPE_AD="ad",n.TYPE_MAIN_CONTENT="main",t.model.AssetDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var i=t.model.Dao;e.extend(n,i),n.EVENT_TYPE_AA_START="aa_start",n.EVENT_TYPE_AA_AD_START="aa_ad_start",n.EVENT_TYPE_START="start",n.EVENT_TYPE_RESUME="resume",n.EVENT_TYPE_CHAPTER_START="chapter_start",n.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",n.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",n.EVENT_TYPE_PLAY="play",n.EVENT_TYPE_PAUSE="pause",n.EVENT_TYPE_STALL="stall",n.EVENT_TYPE_BUFFER="buffer",n.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_COMPLETE="complete",n.EVENT_TYPE_SKIP="skip",n.EVENT_TYPE_END="end",t.model.EventDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var i=t.model.Dao;e.extend(n,i),t.model.QoSDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var i=t.model.Dao;e.extend(n,i);var r="unknown";t.model.ServiceProviderDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var i=t.model.Dao;e.extend(n,i),t.model.SessionDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type())}else this.type(null)}var i=t.model.Dao;e.extend(n,i),t.model.StreamDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var i=t.model.Dao;e.extend(n,i),t.model.UserDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var i=t.model.Dao;e.extend(n,i),t.model.AudienceManagerDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,n,l,c){this.eventData=new r,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(n),this.assetData=new a(e._assetData),this.streamData=new o(e._streamData),this.qosData=new s(e._qosData),this.cuserData=i.clone(e._cuserData),this.meta=l,this.callback=c,this.filterReport=!0}var i=e.ObjectUtils,r=t.model.EventDao,a=t.model.AssetDao,o=t.model.StreamDao,s=t.model.QoSDao;t.model.TrackItem=n}(e.ADB.va.utils,t),function(e,t){"use strict";function n(e,t,n,l,c,u){this.adobeAnalyticsData=e,this.userData=t,this.aamData=n,this.serviceProviderData=l,this.sessionData=c,this.eventData=new r(u.eventData),this.assetData=new a(u.assetData),this.streamData=new o(u.streamData),this.qosData=new s(u.qosData),this.cuserData=i.clone(u.cuserData),this.meta=i.clone(u.meta),this.callback=u.callback,this.filterReport=u.filterReport}var i=e.ObjectUtils,r=t.model.EventDao,a=t.model.AssetDao,o=t.model.StreamDao,s=t.model.QoSDao;t.model.CUserDao,t.model.Report=n}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(){},t.prototype.serializeDao=function(){},t.prototype.serializeMap=function(){},t.prototype.serializeNumber=function(){},t.prototype.serializeString=function(){},e.model.ISerializer=t}(t),function(e,t){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var i=t.model.Dao,r=t.model.DaoField,a=t.model.ISerializer;e.extend(n,a),n.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter((function(e){return!!e})).join("&"),
callback:e.callback}},n.prototype.serializeDao=function(e){return this._processDao(e).filter((function(e){return!!e})).join("&")},n.prototype.serializeMap=function(e,t){var n=[],i=t||"meta";for(var r in e)e.hasOwnProperty(r)&&e[r]&&n.push("s:"+i+":"+r+"="+window.encodeURIComponent(e[r]));return n.join("&")},n.prototype.serializeNumber=function(e,t,n,i){var a=s;return null==t||isNaN(t)?null:(i===r.HINT_SHORT&&(a=l),a+":"+n+":"+e+"="+Math.floor(t))},n.prototype.serializeString=function(e,t,n){return t?c+":"+n+":"+e+"="+window.encodeURIComponent(t):null},n.prototype._processDao=function(e){var t=[];for(var n in e.data)if(e.data.hasOwnProperty(n)){var r=e.data[n],a=r.value,s=r.hint,l=null,c=e.realm;if(null==a)continue;"number"==typeof a?l=this.serializeNumber(n,a,c,s):"string"==typeof a?l=this.serializeString(n,a,c,s):a instanceof i?l=this.serializeDao(a):this._logger.warn(o,"#_processDao() > Unable to serialize DAO. Field: "+n+". Value: "+a+"."),l&&t.push(l)}return t};var o="ah::QuerystringSerializer",s="l",l="h",c="s";t.model.QuerystringSerializer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}n.prototype.parse=function(){var e,t,n,c,u,d,p;window.DOMParser?d=(new window.DOMParser).parseFromString(this._data,"text/xml"):((d=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,d.loadXML(this._data)),(p=parseInt(d.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=p),(p=parseInt(d.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=p),(p=parseInt(d.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1==p),d.getElementsByTagName("trackingDisabled")[0]&&(c=1==(p=parseInt(d.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10))),u=!d.getElementsByTagName("nielsenEnabled")[0]||1==(p=parseInt(d.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10));var h={};return h[r]=e,h[a]=t,h[o]=n,h[l]=c,h[s]=u,this._logger.debug(i,"#parse() > Obtained configuration settings."),h};var i="ah::SettingsParser",r="reporting_interval",a="check_status_interval",o="track_external_errors",s="nielsen_enabled",l="tracking_disabled";t.network.SettingsParser=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._beginReporting=!1,this._sendingRequest=!1,this._requestsQueue=[],this._quietMode=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new l(t),this._installEventListeners()}var i=e.Event,r=e.URLRequestMethod,a=e.URLRequest,o=e.URLLoader,s=t.network.SettingsParser,l=t.model.QuerystringSerializer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(c,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(c,"#_onApiConfig(sb_server="+t[u]+", check_status_server="+t[d]+", publisher="+t[p]+", quiet_mode="+t[h]+", ssl="+t[g]+")"),this._trackingServer=this._updateRequestProtocol(t[u],t[g]),this._checkStatusServer=this._updateRequestProtocol(t[d],t[g]),this._publisher=t[p],this._quietMode=t[h],this._isConfigured=!0},n.prototype._onBeginReporting=function(){this._logger.debug(c,"#_onBeginReporting()"),this._beginReporting=!0,this._sendNextRequest(),this._onClockCheckStatusTick()},n.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var n=t[f];if(this._prevReportSent&&this._prevReportSent.eventData&&n.eventData&&this._prevReportSent.eventData.playhead==n.eventData.playhead&&this._prevReportSent.eventData.ts==n.eventData.ts&&this._prevReportSent.eventData.prevTs==n.eventData.prevTs&&this._prevReportSent.eventData.type==n.eventData.type)this._logger.debug(c,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+r);else{this._prevReportSent=n;var i=this._serializer.serializeReport(n),r=this._trackingServer+"/?"+i.serializedOutput;this._processRequest(r,i.callback)}}else this._logger.warn(c,"#_onFilterReportAvailable() > Unable to send request: not configured.")},n.prototype._processRequest=function(e,t){this._requestsQueue.push({url:e,callback:t}),this._sendNextRequest()},n.prototype._sendNextRequest=function(){if(this._beginReporting)if(this._sendingRequest)this._logger.debug(c,"#_sendNextRequest() > Exiting as we are currently sending a request.");else{var e=this._requestsQueue.shift();if(e){this._sendingRequest=!0,this._logger.debug(c,"#_sendNextRequest() > "+e.url);var t=this,n=new o,s=function(){n.close(),e.callback&&e.callback.call(null),t._sendingRequest=!1,t._sendNextRequest()},l=function(){s()},u=function(){t._logger.warn(c,"#_onFilterReportAvailable() > Failed to send heartbeat report."),s()};if(!this._quietMode){n.addEventListener(i.SUCCESS,l,this),n.addEventListener(i.ERROR,u,this);var d=new a(e.url,r.GET);n.load(d)}}else this._logger.debug(c,"#_sendNextRequest() > Exiting as we have no requests to send.")}else this._logger.debug(c,"#_sendNextRequest() > Exiting as we have not started reporting.")},n.prototype._onClockCheckStatusTick=function(){function e(e){if(e.data){var t=new s(e.data.response,n._logger).parse();t?n._channel.trigger(new i(b,t)):n._logger.warn(c,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}p.close()}function t(){n._logger.warn(c,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),p.close()}if(this._isConfigured)if(this._publisher)if(this._beginReporting){var n=this,l=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),u=this._checkStatusServer+l+".xml?r="+(new Date).getTime(),d=new a(u,r.GET),p=new o;p.addEventListener(i.SUCCESS,e,this),p.addEventListener(i.ERROR,t,this),this._logger.debug(c,"#_onClockCheckStatusTick() > Get new settings from: "+u),p.load(d)}else this._logger.debug(c,"#_onClockCheckStatusTick() > Exiting as we have not started reporting.");else this._logger.warn(c,"#_onClockCheckStatusTick() > Publisher is NULL.");else this._logger.warn(c,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},n.prototype._updateRequestProtocol=function(e,t){var n=e;return 0===n.indexOf("http://")?n=n.slice(7):0===n.indexOf("https://")&&(n=n.slice(8)),t?"https://"+n:"http://"+n},n.prototype._installEventListeners=function(){this._channel.on(_,this._onApiConfig,this),this._channel.on(m,this._onBeginReporting,this),this._channel.on(v,this._onFilterReportAvailable,this),this._channel.on(y,this._onClockCheckStatusTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var c="ah::Network",u="tracking_server",d="check_status_server",p="publisher",h="quiet_mode",g="ssl",f="report",_="api:config",m="api:video_begin_reporting",v="filter:data_available",y="clock:check_status.tick",b="net:check_status_complete";t.network.Network=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new l,this._installEventListeners()}function i(e){var t=[];return e&&e.forEach((function(e){e.eventData.type()==u.EVENT_TYPE_PAUSE||e.eventData.type()==u.EVENT_TYPE_STALL||e.eventData.type()==u.EVENT_TYPE_BUFFER?(!e.filterReport||e.eventData.duration()>b)&&t.push(e):t.push(e)})),t}function r(e){var t=-1,n=-1,i=[];return e.forEach((function(e){e.eventData.type()==u.EVENT_TYPE_START?e.assetData.type()==d.TYPE_MAIN_CONTENT?-1==t?t=i.push(e)-1:(e.eventData.prevTs(-1),i[t]=e):-1==n?n=i.push(e)-1:(e.eventData.prevTs(-1),i[n]=e):i.push(e)})),i}function a(e){var t=[];return e.forEach((function(n){if(n.eventData.type()==u.EVENT_TYPE_PLAY){if(n.eventData.duration()>y)t.push(n);else if(0==n.eventData.duration()&&n.assetData.type()==d.TYPE_MAIN_CONTENT){var i=o(e);i.indexOf(n)==i.length-1&&t.push(n)}}else t.push(n)})),t}function o(e){var t=[];return e.forEach((function(e){e.eventData.type()!=u.EVENT_TYPE_PLAY&&e.eventData.type()!=u.EVENT_TYPE_BUFFER&&e.eventData.type()!=u.EVENT_TYPE_START||t.push(e)})),t}var s=e.radio.Command,l=e.radio.CommandQueue,c=e.Event,u=t.model.EventDao,d=t.model.AssetDao;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(T,"#destroy()"),this._uninstallEventListeners(),this.clear())},n.prototype.clear=function(){this._logger.debug(T,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},n.prototype.flush=function(){this._workQueue.addCommand(new s(this._flushBufferReport,this))},n.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[_];if(t){var n=t.sessionData.sessionId();this._reportBuffer[n]=this._reportBuffer[n]||[],this._reportBuffer[n].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var i={};i[f]=!0,i[m]=1,this._channel.command(v,i)}}},n.prototype._flushBufferReport=function(){function e(e){if(e)for(var n=0;n<e.length;n++){var i=e[n],r=i.sessionData.sessionId();t._tsHistory[r]=t._tsHistory[r]||{};var a=i.eventData.type()+"."+(i.assetData.type()==d.TYPE_AD?i.assetData.adData().adId():i.assetData.videoId());t._tsHistory[r].hasOwnProperty(a)&&i.eventData.prevTs(t._tsHistory[r][a]),t._tsHistory[r][a]=i.eventData.ts()}}if(!this._isDestroyed){var t=this;for(var n in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(n)){var o=a(r(i(this._reportBuffer[n])));e(o);for(var s=0;s<o.length;s++){var l=o[s],u={};u[_]=l,this._channel.trigger(new c(h,u))}}this._reportBuffer={};var p=this._channel.request(I),g=this._tsHistory[p]||{};this._tsHistory={},this._tsHistory[p]=g,this._isBufferingInProgress=!1}},n.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new s(this._bufferReport,this,[t]))},n.prototype._onClockFlushFilterTick=function(){this.flush()},n.prototype._installEventListeners=function(){this._channel.on(p,this._onContextReportAvailable,this),this._channel.on(g,this._onClockFlushFilterTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var p="context:report_available",h="filter:data_available",g="clock:flush_filter.tick",f="reset",_="report",m="repeat_count",v="clock:flush_filter.resume",y=250,b=250,I="session_id",T="ah::ReportFilter";t.filter.ReportFilter=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){var t=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=n}(e.ADB.va,t),function(e,t){"use strict";function n(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var i=t.model.Report;n.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new i(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r="ah::ReportFactory";t.context.ReportFactory=n}(e.ADB.core,t),function(e,t,n,i){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=pe,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new c,this._serviceProviderData=new u,this._userData=new d,this._aamData=new p,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new b(this,this._logger),this._inputDataValidator=new I((function(e){this._logger.error(T,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new s(k,e))}),this),this._trackExternalErrors=!0,this._installEventListeners()}var a=n.md5,o=n.ObjectUtils,s=e.Event,l=i.model.SessionDao,c=i.model.AdobeAnalyticsDao,u=i.model.ServiceProviderDao,d=i.model.UserDao,p=i.model.AudienceManagerDao,h=i.model.EventDao,g=i.model.AssetDao,f=i.model.StreamDao,_=i.model.QoSDao,m=i.model.AdDao,v=i.model.ChapterDao,y=i.model.TrackItem,b=i.context.ReportFactory,I=i.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(T,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(T,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[P]);n.assetData.adData(null),n.assetData.type(g.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(n)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(T,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[P]);this._sendHit(n)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(T,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(){this._logger.debug(T,"#_onApiVideoUnload()"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(T,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(T,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._serviceProviderData.playerName(t.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(g.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var n=t.metaNielsen?o.merge(t.metaVideo,t.metaNielsen):t.metaVideo,i=new y(this,h.EVENT_TYPE_START,t.playhead,n,t._eventData[P]);this._sendHit(i)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(T,"#_onApiVideoResume(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(g.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var n=new y(this,h.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[P]);this._sendHit(n)}},r.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(T,"#_onApiVideoSessionEnd()");var t=e.data;if(this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var n=new y(this,h.EVENT_TYPE_END,t.playhead,null,t._eventData[P]);n.assetData.adData(null),n.assetData.type(g.TYPE_MAIN_CONTENT),this._sendHit(n)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(T,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var n=new y(this,h.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[P]);this._sendHit(n),this._isVideoComplete=!0}},r.prototype._onApiVideoSkip=function(e){this._logger.debug(T,"#_onApiVideoSkip()");var t=e.data;if(this._checkCall("_onApiVideoSkip")){var n=new y(this,h.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[P]);this._sendHit(n),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(T,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[P]);this._sendHit(n)}},r.prototype._onApiPause=function(e){this._logger.debug(T,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=t.playheadStalled?h.EVENT_TYPE_STALL:h.EVENT_TYPE_PAUSE,i=new y(this,n,t.playhead,null,t._eventData[P]);t._eventData.hasOwnProperty(M)&&(i.filterReport=t._eventData[M]),this._sendHit(i)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(T,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[P]);this._sendHit(n)}},r.prototype._onApiAdBreakStart=function(e){this._logger.debug(T,"#_onApiAdBreakStart()");var t=e.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._updateLastInbandItemToBuffering())},r.prototype._onApiAdBreakComplete=function(e){this._logger.debug(T,"#_onApiAdBreakComplete()");var t=e.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._restoreLastInbandItem())},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(T,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){var n=new m;n.adId(t.adId),n.adName(t.adName),n.adLength(t.adLength),n.resolver(t.podPlayerName),n.podId(a(this._assetData.videoId())+"_"+t.podPosition),n.podPosition(t.adPosition+""),n.podName(t.podName),n.podOffset(t.podSecond),n.sid(this._generateSessionId()),this._assetData.adData(n),this._assetData.type(g.TYPE_AD),this._updateQoSInfo(t);var i=o.merge(t.metaVideo,t.metaAd);i=t.metaNielsen?o.merge(i,t.metaNielsen):i,i=t.metaAdNielsen?o.merge(i,t.metaAdNielsen):i;var r=new y(this,h.EVENT_TYPE_START,t.playhead,i,t._eventData[P]);if(this._sendHit(r),this._restoreLastInbandItem(),t.adGranularTracking){var s=t.adTrackingInterval?t.adTrackingInterval:this._reportingInterval;this._updateReportingInterval(s,!0)}}},r.prototype._onApiAdComplete=function(e){this._logger.debug(T,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=g.TYPE_AD)return void this._logger.warn(T,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[P]);this._sendHit(n),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(g.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiAdSkip=function(e){this._logger.debug(T,"#_onApiAdSkip()");var t=e.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=g.TYPE_AD)return void this._logger.warn(T,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[P]);this._sendHit(n),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(g.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(T,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var n=new v;n.id(a(this._assetData.videoId())+"_"+t.chapterPosition),n.name(t.chapterName),n.length(t.chapterLength),n.position(t.chapterPosition),n.offset(t.chapterOffset),n.sid(this._generateSessionId()),this._assetData.chapterData(n),this._updateQoSInfo(t);var i=o.merge(t.metaVideo,t.metaChapter),r=new y(this,h.EVENT_TYPE_CHAPTER_START,t.playhead,i,t._eventData[P]);r.assetData.adData(null),r.assetData.type(g.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(T,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(T,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[P]);n.assetData.adData(null),n.assetData.type(g.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},r.prototype._onApiChapterSkip=function(e){this._logger.debug(T,"#_onApiChapterSkip()");var t=e.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(T,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_CHAPTER_SKIP,t.playhead,null,t._eventData[P]);n.assetData.adData(null),n.assetData.type(g.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(T,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[P]);this._sendHit(n)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(T,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===S){this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_ERROR,0,null,t._eventData[P]);n.eventData.id(t._eventData.error_id),n.eventData.source(t._eventData.source),this._sendHit(n)}}else this._logger.warn(T,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(T,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var n=new y(this,h.EVENT_TYPE_ERROR,0);n.eventData.id(t.error_id),n.eventData.source(t.source),this._sendHit(n)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(T,"#_onApiQuantumEnd(interval="+this._channel.request(C)+")");var t=e.data;if(this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var n=this._lastInBandItem;if(n){this._updateQoSInfo(t);var i=new y(this,n.eventData.type(),t.playhead,n.meta,n.callback);i.filterReport=n.filterReport,this._sendHit(i,!0)}}},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[L],this._reportingInterval=t[R],this._reportingInterval||(this._reportingInterval=pe),this._logger.debug(T,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(){var e=this._generateSessionId();this._sessionData=new l,this._sessionData.sessionId(e),this._logger.debug(T,"#_resetSessionId(new sessionId="+e+")")},r.prototype._installEventListeners=function(){this._channel.on(j,this._onApiAnalyticsStart,this),this._channel.on(V,this._onApiAnalyticsAdStart,this),this._channel.on(F,this._onApiVideoLoad,this),this._channel.on(B,this._onApiVideoUnload,this),this._channel.on(U,this._onApiVideoStart,this),this._channel.on(H,this._onApiVideoComplete,this),this._channel.on(q,this._onApiVideoSkip,this),this._channel.on(Y,this._onApiVideoResume,this),this._channel.on(G,this._onApiVideoSessionEnd,this),this._channel.on(K,this._onApiAdBreakStart,this),this._channel.on(W,this._onApiAdBreakComplete,this),this._channel.on(z,this._onApiAdStart,this),this._channel.on(Q,this._onApiAdComplete,this),this._channel.on(J,this._onApiAdSkip,this),this._channel.on($,this._onApiPlay,this),this._channel.on(X,this._onApiPause,this),this._channel.on(Z,this._onApiBufferStart,this),this._channel.on(ee,this._onApiChapterStart,this),this._channel.on(te,this._onApiChapterComplete,this),this._channel.on(ne,this._onApiChapterSkip,this),this._channel.on(ae,this._onApiBitrateChange,this),this._channel.on(ie,this._onApiTrackError,this),this._channel.on(re,this._onApiTrackInternalError,this),this._channel.on(oe,this._onApiQuantumEnd,this),this._channel.on(le,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(w,(function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null}),this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(T,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new f,this._qosData=new _,this._sessionData=new l,this._assetData=new g,this._cuserData=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===e||(this._logger.warn(T,"#"+e+"() > The video content already completed."),
!1):(this._logger.warn(T,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateReportingInterval=function(e,t){var n={};n[x]=!!t,n[R]=e,this._channel.trigger(new s(ce,n))},r.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,n=(new Date).getTime(),i=t.assetData.type()===g.TYPE_AD||e.assetData.type()===g.TYPE_AD,r=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),a=Math.abs(n-t.eventData.ts()),o=Math.abs(r-a),s=a;s>ue?(this._logger.warn(T," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to 0 as calculated duration ("+s+")exceeds 10mins"),s=0):t.eventData.type()==h.EVENT_TYPE_PLAY&&!i&&!this._doNotOverrideEventDuration&&o>de&&(s=Math.min(r,a),this._logger.warn(T," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to "+s+" as calculated error delta ("+o+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,t.eventData.duration(s),t.eventData.ts(n),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var e=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==g.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==h.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),e=this._lastInBandItem.eventData.playhead());var t=new y(this,h.EVENT_TYPE_BUFFER,e,null,null);t.assetData.adData(null),t.assetData.type(g.TYPE_MAIN_CONTENT),this._lastInBandItem=t},r.prototype._restoreLastInbandItem=function(){if(null!=this._stashedLastInBandItem){var e=null;this._stashedLastInBandItem.eventData.type()==h.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==g.TYPE_AD?e=this._lastInBandItem.meta:(e=this._stashedMainMetadata,this._stashedMainMetadata=null));var t=new y(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),e,this._stashedLastInBandItem.callback);t.filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=t,this._stashedLastInBandItem=null}},r.prototype._flushLastInbandItem=function(e){if(this._lastInBandItem){this._updateQoSInfo(e);var t=new y(this,this._lastInBandItem.eventData.type(),e.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback);this._sendHit(t,!0)}},r.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);var n={};if(n[O]=t,this._channel.trigger(new s(se,n)),t.eventData.type()==h.EVENT_TYPE_START||t.eventData.type()==h.EVENT_TYPE_PLAY||t.eventData.type()==h.EVENT_TYPE_PAUSE||t.eventData.type()==h.EVENT_TYPE_STALL||t.eventData.type()==h.EVENT_TYPE_BUFFER){var i={};i[N]=!0,this._channel.command(A,i)}},r.prototype._sendHit=function(e,t){switch(e.eventData.type()){case h.EVENT_TYPE_START:case h.EVENT_TYPE_PLAY:case h.EVENT_TYPE_PAUSE:case h.EVENT_TYPE_STALL:case h.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==h.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==g.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case h.EVENT_TYPE_COMPLETE:case h.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==h.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==g.TYPE_MAIN_CONTENT){this._lastInBandItem=null,this._stashedLastInBandItem=null;var n={};n[N]=!0,this._channel.command(E,n)}else e.assetData.type()==g.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(g.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case h.EVENT_TYPE_CHAPTER_START:case h.EVENT_TYPE_CHAPTER_COMPLETE:case h.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==h.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==h.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var T="ah::Context",S="sourceErrorSDK",k="error",A="clock:reporting.resume",E="clock:reporting.pause",C="reporting_interval",w="session_id",D="reset_session_id",P="callback",M="filter_report",O="report",N="reset",L="track_external_errors",R="reporting_interval",x="do_not_override_interval",j="api:aa_start",V="api:aa_ad_start",F="api:video_load",B="api:video_unload",U="api:video_start",H="api:video_complete",q="api:video_skip",Y="api:video_resume",G="api:video_session_end",K="api:adbreak_start",W="api:adbreak_complete",z="api:ad_start",Q="api:ad_complete",J="api:ad_skip",$="api:play",X="api:pause",Z="api:buffer_start",ee="api:chapter_start",te="api:chapter_complete",ne="api:chapter_skip",ie="api:track_error",re="api:track_internal_error",ae="api:bitrate_change",oe="api:quantum_end",se="context:report_available",le="net:check_status_complete",ce="reporting:update_interval",ue=6e5,de=2e3,pe=10;i.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";function t(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp=n,this.sdk=n,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var n="unknown";e.AdobeHeartbeatPluginConfig=t}(t),function(e){"use strict";function t(){}t.prototype.onError=function(){},t.prototype.onTrackingDisabled=function(){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,n){"use strict";function i(e){i.__super__.constructor.call(this,_),this._radio=new l(this._logger),this._channel=this._radio.channel(k),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new h(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,u=t.Version,d=n.context.Context,p=n.filter.ReportFilter,h=n.network.Network,g=n.clock.Clock,f=n.AdobeHeartbeatPluginConfig;e.extend(i,o),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",n={};n[se]=this._config.trackingServer,n[le]=t,n[ce]=this._config.publisher,n[ue]=this._config.quietMode,n[de]=this._config.ssl,this._channel.trigger(new r(_e,n)),this._isConfigured=!0},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._channel.on(A,this._onError,this),this._clock=new g(this._pluginManager,this._channel,this._logger),this._channel.command(Ue),this._channel.trigger(new r(ze)),this._channel.on(he,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},i.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},i.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):i.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},i.prototype._cmdAnalyticsError=function(){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(A,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},i.prototype._cmdAnalyticsStart=function(e){this._canProcess()&&this._channel.trigger(new r(ge,e))},i.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(fe,e))},i.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ve,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(me,e)),this._isTrackingSessionActive=!0)},i.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ve,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},i.prototype._cmdBeginReporting=function(){this._canProcess()&&this._channel.trigger(new r(Fe,{}))},i.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new r(Se,e))},i.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new r(ye,e)),this._filter.flush())},i.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(be,e))},i.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Ie,e))},i.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},i.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(Pe,e)),this._isPaused=!0,this._runIdleTimer(!0))},i.prototype._cmdAdBreakStart=function(e){this._canProcess()&&this._channel.trigger(new r(ke,e))},i.prototype._cmdAdBreakComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ae,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ee,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ce,e))},i.prototype._cmdAdSkip=function(e){this._canProcess()&&this._channel.trigger(new r(we,e))},i.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Me,e)),this._isBuffering=!0,this._runIdleTimer(!0))},i.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new r(Pe,e)):this._resumePlaybackIfPossible(e))},i.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Pe,e)),this._isSeeking=!0,this._runIdleTimer(!0))},i.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Oe,e))},i.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ne,e))},i.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Le,e))},i.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(je,e))},i.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(Re,e))},i.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Ve,e))},i.prototype._onCheckStatusComplete=function(e){if(this._canProcess()){var t=!1;e&&e.data&&e.data[pe]&&(t=e.data[pe]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+t+")"),t&&this._delegate&&this._delegate.onTrackingDisabled()}},i.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(ee),this._channel.trigger(new r(Se,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(X))},i.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[ae]=Be,t[oe]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(xe,t)),this._runReportingTimer(!1),this._trigger(A,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},i.prototype._runIdleTimer=function(e){var t={};t[re]=!0,e?this._channel.command(Ke,t):this._channel.command(We,t)},i.prototype._runFlushFilterTimer=function(e){var t={};t[re]=!0,e?this._channel.command(Ye,t):this._channel.command(Ge,t)},i.prototype._runReportingTimer=function(e){var t={};t[re]=!0,e?this._channel.command(He,t):this._channel.command(qe,t)},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,w),this,"handleVideoLoad",[new s(v,"rsid","rsid"),new s(v,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new a(y,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new a(y,te),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new a(y,P),this,"handleVideoSessionEnd",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,M),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"rsid","rsid"),new s(v,"tracking_server","trackingServer"),new s(v,"channel","channel"),new s(v,"meta.video.*","metaVideo"),new s(v,"ssl","useSsl"),new s(b,"meta","metaNielsen"),new s(m,"publisher","publisher"),new s(m,"sdk","sdk"),new s(m,"ovp","ovp"),new s(m,"version","version"),new s(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new a(y,N),this,"handleVideoComplete",[new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,L),this,"handleVideoSkip",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,O),this,"handleVideoResume",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new a(y,R),this,"handlePlay",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,x),this,"handlePause",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,V),this,"handleAdBreakStart",[new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,F),this,"handleAdBreakComplete",[new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,B),this,"handleAdStart",[new s(y,"video.playhead","playhead"),new s(y,"ad.id","adId"),new s(y,"ad.name","adName"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"ad.granularTracking","adGranularTracking"),new s(y,"ad.trackingInterval","adTrackingInterval"),new s(y,"pod.name","podName"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"pod.startTime","podSecond"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.ad.*","metaAd"),new s(b,"meta","metaNielsen"),new s(b,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new a(y,U),this,"handleAdComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,H),this,"handleAdSkip",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,q),this,"handleBufferStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,Y),this,"handleBufferComplete",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,G),this,"handleSeekStart",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,K),this,"handleSeekComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAd","isInAd"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"chapter.isInChapter","isInChapter"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,W),this,"handleChapterStart",[new s(y,"video.playhead","playhead"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(v,"meta.video.*","metaVideo"),new s(v,"meta.chapter.*","metaChapter"),new s(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(y,z),this,"handleChapterComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,Q),this,"handleChapterSkip",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,J),this,"handleBitrateChange",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,$),this,"handleTrackError"),this._pluginManager.registerBehaviour(new a(I,ne),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,j),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(I,ie),this,"handleIdleTick",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(m,ee),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,A),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new a(v,E),this,"handleAnalyticsStart",[new s(v,"vid","vid"),new s(v,"aid","aid"),new s(v,"mid","mid"),new s(v,"customerIDs","customerIDs"),new s(v,"blob","blob"),new s(v,"loc_hint","loc_hint"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,C),this,"handleAnalyticsAdStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")])},i.prototype._setupDataResolver=function(){var e={},t=this;e.version=function(){return u.getVersion()},e.api_level=function(){return u.getApiLevel()},e.tracking_server=function(){return t._config?t._config.trackingServer:null},e.publisher=function(){return t._config?t._config.publisher:null},e.quiet_mode=function(){return!!t._config&&t._config.quietMode},e.ovp=function(){return t._config?t._config.ovp:null},e.sdk=function(){return t._config?t._config.sdk:null},e.is_primetime=function(){return!!t._config&&t._config.__isPrimetime},e.psdk_version=function(){return t._config?t._config.__psdkVersion:null},e.session_id=function(){return t._channel.request(T)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];(n=n||{})[r]=e.hasOwnProperty(r)?e[r].call(this):null}return n}},i.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new r(De,e)),this._runIdleTimer(!1))},i.prototype._resumePlaybackFromIdle=function(){this._trigger(ee),this._filter.clear(),this._channel.trigger(new r(S)),this._trigger(Z),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var _="adobe-heartbeat",m=_,v="adobe-analytics",y="player",b="nielsen",I="service.clock",T="session_id",S="reset_session_id",k="heartbeat-channel",A="error",E="aa_start",C="sc_ad_start",w="video_load",D="video_unload",P="video_session_end",M="video_start",O="video_resume",N="video_complete",L="video_skip",R="play",x="pause",j="content_start",V="adbreak_start",F="adbreak_complete",B="ad_start",U="ad_complete",H="ad_skip",q="buffer_start",Y="buffer_complete",G="seek_start",K="seek_complete",W="chapter_start",z="chapter_complete",Q="chapter_skip",J="bitrate_change",$="track_error",X="video_idle_start",Z="video_idle_resume",ee="quantum_close",te="video_begin_reporting",ne="heartbeat.reporting.tick",ie="heartbeat.idle.tick",re="reset",ae="source",oe="error_id",se="tracking_server",le="check_status_server",ce="publisher",ue="quiet_mode",de="ssl",pe="tracking_disabled",he="net:check_status_complete",ge="api:aa_start",fe="api:aa_ad_start",_e="api:config",me="api:video_load",ve="api:video_unload",ye="api:video_start",be="api:video_complete",Ie="api:video_skip",Te="api:video_resume",Se="api:video_session_end",ke="api:adbreak_start",Ae="api:adbreak_complete",Ee="api:ad_start",Ce="api:ad_complete",we="api:ad_skip",De="api:play",Pe="api:pause",Me="api:buffer_start",Oe="api:chapter_start",Ne="api:chapter_complete",Le="api:chapter_skip",Re="api:track_error",xe="api:track_internal_error",je="api:bitrate_change",Ve="api:quantum_end",Fe="api:video_begin_reporting",Be="sourceErrorHeartbeat",Ue="clock:check_status.resume",He="clock:reporting.resume",qe="clock:reporting.pause",Ye="clock:flush_filter.resume",Ge="clock:flush_filter.pause",Ke="clock:idle.resume",We="clock:idle.pause",ze="clock:check_status.get_settings";n.AdobeHeartbeatPlugin=i}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===t)var t={};!function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!e.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof e.mediaType)return this._fail("The media type for the main video must be a String.");if(""===e.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){var t=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=n}(e.ADB.va,t),function(e){"use strict";function t(){this.channel=n,this.debugLogging=!1}var n="";e.AdobeAnalyticsPluginConfig=t}(t),function(e){"use strict";function t(){}t.prototype.onError=function(){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,n,i){"use strict";function r(e){this._aaPlugin=e}function a(e,t){if(a.__super__.constructor.call(this,v),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(e.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=e,this._appMeasurementBridge=new r(this),this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._appMeasurementReady=!1,this._beginReporting=!1,this._workQueue=new d(!0,S),this._inputDataValidator=new m((function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout((function(){t._trigger(k,e),t._delegate&&t._delegate.onError(t._errorInfo)}),0)}),this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var o=e.Trigger,s=e.plugin.BasePlugin,l=e.plugin.ParamMapping,c=e.radio.Channel,u=e.radio.Command,d=e.radio.CommandQueue,p=t.ErrorInfo,h=n.md5,g=n.StringUtils,f=n.ObjectUtils,_=i.AdobeAnalyticsPluginConfig,m=i.InputDataValidator;r.prototype.onAppMeasurementReady=function(){this._aaPlugin&&this._aaPlugin._onAppMeasurementReady()},r.prototype.release=function(){this._aaPlugin=null},e.extend(a,s),a.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof _))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},a.prototype.bootstrap=function(e){
a.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},a.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this._appMeasurementBridge,this._appMeasurementBridge.onAppMeasurementReady,[]),a.__super__.setup.call(this)},a.prototype.setVideoMetadata=function(e){this._videoMetadata=f.clone(e)},a.prototype.setAdMetadata=function(e){this._adMetadata=f.clone(e)},a.prototype.setChapterMetadata=function(e){this._chapterMetadata=f.clone(e)},a.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._appMeasurementBridge.release()},a.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):a.__super__._canProcess.call(this)},a.prototype._cmdVideoLoad=function(){this._errorInfo=null},a.prototype._cmdBeginReporting=function(){this._logger.debug(this._logTag,"#_cmdBeginReporting()"),this._beginReporting=!0,this._resumeWorkQueue()},a.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new u(this._executeOpen,this,[e]))},a.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new u(this._executeOpenAd,this,[e]))},a.prototype._cmdHeartbeatPluginError=function(){this._errorInfo||(this._errorInfo=new p("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(k,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},a.prototype._track=function(e){try{var t=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars="",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t}catch(e){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},a.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","videoLength","playerName"])){var t={};for(var n in e.metaVideo)e.metaVideo.hasOwnProperty(n)&&(t[n]=e.metaVideo[n]);if(e.metaNielsen)for(var n in e.metaNielsen)e.metaNielsen.hasOwnProperty(n)&&(t[n]=e.metaNielsen[n]);t["a.contentType"]=e.streamType,t["a.media.name"]=e.videoId,t["a.media.friendlyName"]=e.videoName||"",t["a.media.length"]=Math.floor(e.videoLength)||"0.0",t["a.media.playerName"]=e.playerName,t["a.media.channel"]=e.channel||"",t["a.media.view"]=!0,t["a.media.vsid"]=e.sessionId;var i={};i.contextData=t,"audio"===e.mediaType?(i.pev3=C,i.ms_a="1"):i.pev3=A,i.pe=e.isPrimetime?P:D,this._track(i);var r=this;setTimeout((function(){r._trigger(N,e)}),0)}},a.prototype._executeOpenAd=function(e){var t=h(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var n={};for(i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(n[i]=e.metaVideo[i]);for(i in e.metaAd)e.metaAd.hasOwnProperty(i)&&(n[i]=e.metaAd[i]);if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(n[i]=e.metaNielsen[i]);n["a.contentType"]=e.streamType,n["a.media.name"]=e.videoId,n["a.media.playerName"]=e.playerName,n["a.media.channel"]=e.channel||"",n["a.media.vsid"]=e.sessionId,n["a.media.friendlyName"]=e.videoName||"",n["a.media.length"]=Math.floor(e.videoLength)||"0.0",n["a.media.ad.name"]=e.adId,n["a.media.ad.friendlyName"]=e.adName||"",n["a.media.ad.podFriendlyName"]=e.podName||"",n["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",n["a.media.ad.playerName"]=e.podPlayerName,n["a.media.ad.pod"]=t,n["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",n["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",n["a.media.ad.view"]=!0;var r={};r.contextData=n,"audio"===e.mediaType?(r.pev3=w,r.ms_a="1"):r.pev3=E,r.pe=e.isPrimetime?O:M,this._track(r);var a=this;setTimeout((function(){a._trigger(L,e)}),0)}},a.prototype._setupDataResolver=function(){var e={},t=this;e.rsid=function(){return t._appMeasurement.account},e.tracking_server=function(){return t._appMeasurement.ssl&&t._appMeasurement.trackingServerSecure?t._appMeasurement.trackingServerSecure:t._appMeasurement.trackingServer},e.ssl=function(){return t._appMeasurement.ssl},e.vid=function(){return t._appMeasurement.visitorID},e.aid=function(){return t._appMeasurement.analyticsVisitorID},e.mid=function(){return t._appMeasurement.marketingCloudVisitorID},e.blob=function(){return t._appMeasurement.audienceManagerBlob},e.loc_hint=function(){return t._appMeasurement.audienceManagerLocationHint?parseInt(t._appMeasurement.audienceManagerLocationHint):""},e.customerIDs=function(){var e={},n=t._appMeasurement.visitor.getCustomerIDs();for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];if("object"==typeof r){for(var a in r)r.hasOwnProperty(a)&&("authState"==a?e[i+".as"]=r[a]:e[i+"."+a]=r[a]);e[i+".as"]||(e[i+".as"]="0")}}return e},e.channel=function(){return t._config?t._config.channel:null},e.meta=function(e){var n=e.split(".");if(n.length<2)return null;var i=n.shift();switch(e=n.join("."),i){case"video":return e==c.WILDCARD?t._videoMetadata:t._videoMetadata[e];case"ad":return e==c.WILDCARD?t._adMetadata:t._adMetadata[e];case"chapter":return e==c.WILDCARD?t._chapterMetadata:t._chapterMetadata[e];default:return null}},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];n=n||{},g.startsWith(r,"meta.")?n[r]=e.meta(r.split("meta.")[1]):n[r]=e.hasOwnProperty(r)?e[r].call(this):null}return n}},a.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new o(I,R),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new o(I,V),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new o(I,x),this,"handleVideoStart",[new l(I,"video.id","videoId"),new l(I,"video.mediaType","mediaType"),new l(I,"video.streamType","streamType"),new l(I,"video.name","videoName"),new l(I,"video.length","videoLength"),new l(I,"video.playerName","playerName"),new l(I,"video.streamType","streamType"),new l(T,"is_primetime","isPrimetime"),new l(T,"session_id","sessionId"),new l(y,"channel","channel"),new l(y,"meta.video.*","metaVideo"),new l(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new o(I,j),this,"handleAdStart",[new l(I,"video.id","videoId"),new l(I,"video.mediaType","mediaType"),new l(I,"video.streamType","streamType"),new l(I,"video.playhead","playhead"),new l(I,"video.playerName","playerName"),new l(I,"video.name","videoName"),new l(I,"video.length","videoLength"),new l(I,"ad.id","adId"),new l(I,"ad.length","adLength"),new l(I,"ad.position","adPosition"),new l(I,"ad.name","adName"),new l(I,"pod.name","podName"),new l(I,"pod.position","podPosition"),new l(I,"pod.playerName","podPlayerName"),new l(I,"pod.startTime","podSecond"),new l(T,"is_primetime","isPrimetime"),new l(T,"session_id","sessionId"),new l(y,"channel","channel"),new l(y,"meta.video.*","metaVideo"),new l(y,"meta.ad.*","metaAd"),new l(b,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new o(T,k),this,"handleHeartbeatPluginError")},a.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"#_onAppMeasurementReady"),this._appMeasurementReady=!0,this._resumeWorkQueue()},a.prototype._resumeWorkQueue=function(){this._appMeasurementReady&&this._beginReporting&&(this._logger.debug(this._logTag,"#_resumeWorkQueue"),this._workQueue.resume())};var v="adobe-analytics",y=v,b="nielsen",I="player",T="adobe-heartbeat",S=2e3,k="error",A="video",E="videoAd",C="audio",w="audioAd",D="ms_s",P="msp_s",M="msa_s",O="mspa_s",N="aa_start",L="sc_ad_start",R="video_load",x="video_start",j="ad_start",V="video_begin_reporting";i.AdobeAnalyticsPlugin=a}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";var t={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},n={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},i={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};e.VideoMetadataKeys=t,e.AudioMetadataKeys=n,e.AdMetadataKeys=i}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(e,t){"use strict";function n(){this._processAction=!0,this._store={}}function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._rules=[]}n.prototype.setRuleName=function(e){this._ruleName=e},n.prototype.getRuleName=function(){return this._ruleName},n.prototype.setData=function(e,t){this._store[e]=t},n.prototype.getData=function(e){return this._store[e]},n.prototype.shouldProcessAction=function(){return this._processAction},n.prototype.stopProcessingAction=function(){this._processAction=!1},n.prototype.startProcessingAction=function(){this._processAction=!0},i.createContext=function(){return new n},i.createPredicate=function(e,t,n){return{fn:e,expectedValue:t,msg:n}},i.prototype.registerRule=function(e,t,n,i,r){this._rules.push({name:e,desc:t,preconditions:n,actions:i,scope:r})},i.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},i.prototype._handleFailure=function(e,t){this._logger.error(r,e.desc+" -  "+t.msg)},i.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},i.prototype.processRule=function(e,t){var n=!0,a=this._getRule(e);if(a){var o=a.scope;t||(t=i.createContext()),t.setRuleName(e);for(var s=!1,l=0;l<a.preconditions.length;++l){var c=a.preconditions[l];if(s=!!c.fn.call(o,t)!==c.expectedValue){this._handleFailure(a,c);break}}if(s)n=!1;else{for(t.startProcessingAction(),this._enterAction&&this._enterAction.call(o,t),l=0;l<a.actions.length;++l){var u=a.actions[l];if(!t.shouldProcessAction()){this._logger.info(r,"Stopping actions for "+a.desc);break}u.call(o,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(o,t)}}else this._logger.warn(r,"No registered event found for ruleName "+e),n=!1;return n};var r="RuleEngine";t._RuleEngine=i}((e=this).ADB.core,e.ADB.va),function(e,t){"use strict";function n(e,t,n){this.taskFn=e,this.scope=t,this.interval=n,this.remainingInterval=n}function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._tasks=[],this._pausedTasks=[]}n.prototype.elapsedTime=function(e){this.remainingInterval-=e},n.prototype.shouldExecute=function(){return this.remainingInterval<=0},n.prototype.execute=function(){this.taskFn.call(this.scope)},i.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},i.prototype._runTasksForTime=function(e){var t=[],n=e-this._lastTickTime;this._lastTickTime=e;for(var i=0;i<this._tasks.length;){var r=this._tasks[i];r.elapsedTime(n),r.shouldExecute()?(t.push(r),this._tasks.splice(i,1)):++i}for(this._checkStopTimer(),i=0;i<t.length;++i)t[i].execute()},i.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},i.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(r,"#startTimer()"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval((function(){e._onTick()}),a))},i.prototype._stopTimer=function(){this._timer&&(this._logger.info(r,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},i.prototype._checkStartTimer=function(){this._tasks.length>0&&this._startTimer()},i.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},i.prototype._removeTask=function(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return e.splice(n,1),!0;return!1},i.prototype.scheduleTask=function(e,t,i){if(this._logger.info(r,"#scheduleTask()"),!e)throw new Error("Reference to the taskFn cannot be NULL");var a=new n(e,t,i);return this._tasks.push(a),this._checkStartTimer(),a},i.prototype.cancelTask=function(e){this._logger.info(r,"#cancelTask()"),this._removeTask(this._tasks,e),this._checkStopTimer()},i.prototype.pauseTask=function(e){this._logger.info(r,"#pauseTask()"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},i.prototype.resumeTask=function(e){this._logger.info(r,"#resumeTask()"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},i.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var r="TaskScheduler",a=250;t._TaskScheduler=i}(e.ADB.core,e.ADB.va),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(e.ADB.va),function(e){"use strict";function t(){this.data={}}var n=e.plugins.videoplayer.VideoInfo,i=e.plugins.videoplayer.AdBreakInfo,r=e.plugins.videoplayer.AdInfo,a=e.plugins.videoplayer.ChapterInfo,o=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME="a.name",t.MEDIAINFO_KEY_VIDEOID="a.videoId",t.MEDIAINFO_KEY_ADID="a.adId",t.MEDIAINFO_KEY_LENGTH="a.length",t.MEDIAINFO_KEY_PLAYHEAD="a.playhead",t.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",t.MEDIAINFO_KEY_STREAMTYPE="a.streamType",t.MEDIAINFO_KEY_POSITION="a.position",t.MEDIAINFO_KEY_STARTTIME="a.startTime",t.MEDIAINFO_KEY_BITRATE="a.bitrate",t.MEDIAINFO_KEY_FPS="a.fps",t.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",t.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",t.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new n;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.mediaType=null!=this.getValue(t.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(t.MEDIAINFO_KEY_MEDIATYPE):"",e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):"",e},t.prototype.createAdBreakInfo=function(){var e=new i;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new r;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new a;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new o;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},t.prototype.isEqual=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||"function"!=typeof e.getValue)return!1;for(var n=[t.MEDIAINFO_KEY_NAME,t.MEDIAINFO_KEY_VIDEOID,t.MEDIAINFO_KEY_ADID,t.MEDIAINFO_KEY_LENGTH,t.MEDIAINFO_KEY_PLAYHEAD,t.MEDIAINFO_KEY_STREAMTYPE,t.MEDIAINFO_KEY_MEDIATYPE,t.MEDIAINFO_KEY_POSITION,t.MEDIAINFO_KEY_STARTTIME,t.MEDIAINFO_KEY_BITRATE,t.MEDIAINFO_KEY_FPS,t.MEDIAINFO_KEY_DROPPEDFRAMES,t.MEDIAINFO_KEY_STARTUPTIME,t.MEDIAINFO_KEY_TIMEDMETADATA],i=0;i<n.length;++i){var r=n[i];if(this.getValue(r)!==e.getValue(r))return!1}return!0},e.MediaObject=t}(e.ADB.va),function(e){"use strict";function t(e,n){if(!n)throw new Error("Visitor instance cannot be NULL");this._visitor=n,this._logger=e,this._status=t.OPT_UNKNOWN,this._optInFetchPermissionsCallback=this._optInFetchPermissionsCallback.bind(this)}var n="PrivacyManager";t.prototype.getStatus=function(){return this._status},t.prototype.configure=function(e){this.reset(),this._callback=e,this._optIn=window.adobe&&window.adobe.optIn?window.adobe.optIn:void 0,this._optIn&&this._optIn.doesOptInApply?(this._logger.info(n,"OptIn service enabled"),this._waitingForOptInCallback=!0,this._optInMediaApproved=!1):this._logger.info(n,"OptIn service does not apply"),this._waitingForVisitorCallback=!0,this._visitorOptOut=!1,this._fetchVisitorOptOut(),this._fetchOptIn(),this._updateStatus()},t.prototype.reset=function(){this._unsubscribeOptIn(),this._status=t.OPT_UNKNOWN,this._callback=null},t.prototype._fetchVisitorOptOut=function(){this._logger.info(n,"Fetching Visitor.isOptedOut");try{var e=this;this._visitor.isOptedOut((function(t){e._logger.info(n,"Visitor.isOptedOut : "+t),e._waitingForVisitorCallback=!1,e._visitorOptOut=t,e._updateStatus()}),void 0,!0)}catch(e){this._logger.warn(n,"Error fetching Visitor.isOptedOut"),this._waitingForVisitorCallback=!1}},t.prototype._fetchOptIn=function(){try{if(!this._optIn||!this._optIn.doesOptInApply)return;this._logger.info(n,"Fetching permissions from OptIn service"),this._optInListenerRegistered||(this._optIn.fetchPermissions(this._optInFetchPermissionsCallback,!0),this._optInListenerRegistered=!0)}catch(e){this._logger.warn(n,"Error fetching permissions from OptIn service"),this._waitingForOptInCallback=!1}},t.prototype._unsubscribeOptIn=function(){try{this._optIn&&this._optInListenerRegistered&&(this._optIn.off("complete",this._optInFetchPermissionsCallback),this._optInListenerRegistered=!1)}catch(e){this._logger.error(n,"Error unsubscribing from OptIn service")}},t.prototype._optInFetchPermissionsCallback=function(){this._waitingForOptInCallback=!1;var e=this._optIn.isApproved(this._optIn.Categories.ECID),t=this._optIn.isApproved(this._optIn.Categories.ANALYTICS),i=void 0===this._optIn.Categories.MEDIA_ANALYTICS||this._optIn.isApproved(this._optIn.Categories.MEDIA_ANALYTICS);this._optInMediaApproved=e&&t&&i,this._logger.info(n,"OptIn fetchPermissions ECID : "+e+" Analytics : "+t+" Media : "+i),this._updateStatus()},t.prototype._updateStatus=function(){if(!(this._waitingForVisitorCallback||this._optIn&&this._optIn.doesOptInApply&&this._waitingForOptInCallback)){var e=this._visitorOptOut||this._optIn&&this._optIn.doesOptInApply&&!this._optInMediaApproved?t.OPT_OUT:t.OPT_IN;if(this._status!==e){this._logger.info(n,"Privacy changed from "+this._status+" to "+e),this._status=e;var i=this;setTimeout((function(){try{i._callback&&i._callback(e)}catch(e){}}),0)}}},t.OPT_OUT="optout",t.OPT_IN="optin",t.OPT_UNKNOWN="optunknown",e._PrivacyManager=t}(e.ADB.va),function(e,t){"use strict";function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}e.extend(n,t.plugins.aa.AdobeAnalyticsPluginDelegate),n.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(i,t.plugins.ah.AdobeHeartbeatPluginDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},i.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._onDelegateTrackingDisabled()},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.videoplayer.VideoPlayerPluginDelegate),a.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},a.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},a.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},a.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},a.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=n,t._MediaHeartbeatPluginDelegate=i,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=a}(e.ADB.core,e.ADB.va),function(e,t){"use strict";function n(e,i){n.__super__.constructor.call(this),this._heartbeat=e,this._logger=i,this._validator=new t.plugins.nielsen.MetadataValidator(i)}var i="MediaHeartbeatNielsenPluginDelegate",r={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};t.plugins.nielsen&&e.extend(n,t.plugins.nielsen.NielsenPluginDelegate),n.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenContentMetadata);if(e&&"object"==typeof e)return this._validator.validateContentMetadata(e,"MediaHeartbeat.NielsenContentMetadataKeys"),e;this._logger.warn(i,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},n.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(r.NielsenAdMetadata);if(e&&"object"==typeof e)return this._validator.validateAdMetadata(e,"MediaHeartbeat.NielsenAdMetadataKeys"),e;this._logger.warn(i,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},n.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenChannelMetadata);if(e&&"object"==typeof e)return this._validator.validateChannelMetadata(e,"MediaHeartbeat.NielsenChannelMetadataKeys"),e;this._logger.warn(i,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},n.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},t.plugins.nielsen&&(t._NielsenObjectKey=r,t._NielsenPluginDelegate=n)}(e.ADB.core,e.ADB.va),function(t,n){"use strict";function i(){}function r(t,i,r){if(this._appMeasurement=r||e.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!t)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!i||"object"!=typeof i||!i.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=i,this._delegate=t,this._debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new a,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new y(this._logger),this._taskScheduler=new b(this._logger),this._privacyManager=new I(this._logger,this._appMeasurement.visitor),this._resetState(),this._setupRules()}var a=t.Logger,o=n.MediaObject,s=n.Heartbeat,l=n.HeartbeatConfig,c=n._ADBMediaHeartbeatDelegate,u=n.plugins.videoplayer.VideoPlayerPlugin,d=n.plugins.videoplayer.VideoPlayerPluginConfig,p=n._MediaHeartbeatVideoPlayerPluginDelegate,h=n.plugins.aa.AdobeAnalyticsPlugin,g=n.plugins.aa.AdobeAnalyticsPluginConfig,f=n._MediaAnalyticsPluginDelegate,_=n.plugins.ah.AdobeHeartbeatPlugin,m=n.plugins.ah.AdobeHeartbeatPluginConfig,v=n._MediaHeartbeatPluginDelegate,y=n._RuleEngine,b=n._TaskScheduler,I=n._PrivacyManager,T=n.utils.ObjectUtils,S=n.utils.VersionUtils;if(i.prototype.getCurrentPlaybackTime=function(){return null},i.prototype.getQoSObject=function(){return null},r.MediaType={Video:"video",Audio:"audio"},r.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},r.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},r.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},r.VideoMetadataKeys=n.plugins.aa.VideoMetadataKeys,r.AudioMetadataKeys=n.plugins.aa.AudioMetadataKeys,r.AdMetadataKeys=n.plugins.aa.AdMetadataKeys,r.createMediaObject=function(e,t,n,i,a){var s=new o;s.setValue(o.MEDIAINFO_KEY_VIDEOID,t),s.setValue(o.MEDIAINFO_KEY_NAME,e),s.setValue(o.MEDIAINFO_KEY_LENGTH,n),s.setValue(o.MEDIAINFO_KEY_PLAYHEAD,0);var l=i||r.StreamType.VOD;return s.setValue(o.MEDIAINFO_KEY_STREAMTYPE,l),("string"!=typeof a||a!=r.MediaType.Video&&a!=r.MediaType.Audio)&&(a=r.MediaType.Video),s.setValue(o.MEDIAINFO_KEY_MEDIATYPE,a),s},r.createAdBreakObject=function(e,t,n){var i=new o;return i.setValue(o.MEDIAINFO_KEY_NAME,e),i.setValue(o.MEDIAINFO_KEY_POSITION,t),i.setValue(o.MEDIAINFO_KEY_STARTTIME,n),i},r.createAdObject=function(e,t,n,i){var r=new o;return r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_ADID,t),r.setValue(o.MEDIAINFO_KEY_POSITION,n),r.setValue(o.MEDIAINFO_KEY_LENGTH,i),r},r.createChapterObject=function(e,t,n,i){var r=new o;return r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_POSITION,t),r.setValue(o.MEDIAINFO_KEY_LENGTH,n),r.setValue(o.MEDIAINFO_KEY_STARTTIME,i),r},r.createQoSObject=function(e,t,n,i){var r=new o;return r.setValue(o.MEDIAINFO_KEY_BITRATE,e),r.setValue(o.MEDIAINFO_KEY_FPS,n),r.setValue(o.MEDIAINFO_KEY_DROPPEDFRAMES,i),r.setValue(o.MEDIAINFO_KEY_STARTUPTIME,t),r},r.createTimedMetadataObject=function(e){var t=new o;return t.setValue(o.MEDIAINFO_KEY_TIMEDMETADATA,e),t},r.version=function(){return n.Version.getVersion()},r.prototype.trackSessionStart=function(e,t){this._logger.info(D,"#::trackSessionStart()");var n=y.createContext();n.setData(P,e),n.setData(R,this._cleanContextData(t)),this._processRule(C.SessionStart,n)},r.prototype.trackPlay=function(){this._logger.info(D,"#::trackPlay()"),this._processRule(C.Play)},r.prototype.trackPause=function(){this._logger.info(D,"#::trackPause()"),this._processRule(C.Pause)},r.prototype.trackComplete=function(){this._logger.info(D,"#::trackComplete()"),this._processRule(C.VideoComplete)},r.prototype.trackSessionEnd=function(){this._logger.info(D,"#::trackSessionEnd()"),this._processRule(C.SessionEnd)},r.prototype.trackError=function(e){this._logger.info(D,"#::trackError()");var t=y.createContext();t.setData(x,e),this._processRule(C.Error,t)},r.prototype.trackEvent=function(e,t,n){this._logger.info(D,"#::trackEvent() - "+e);var i,a=y.createContext();switch(e){case r.Event.AdBreakStart:a.setData(M,t),a.setData(R,this._cleanContextData(n)),i=C.AdBreakStart;break;case r.Event.AdBreakComplete:i=C.AdBreakComplete;break;case r.Event.AdStart:a.setData(O,t),a.setData(R,this._cleanContextData(n)),i=C.AdStart;break;case r.Event.AdComplete:i=C.AdComplete;break;case r.Event.AdSkip:i=C.AdSkip;break;case r.Event.SeekStart:i=C.SeekStart;break;case r.Event.SeekComplete:i=C.SeekComplete;break;case r.Event.ChapterStart:a.setData(N,t),a.setData(R,this._cleanContextData(n)),i=C.ChapterStart;break;case r.Event.ChapterComplete:i=C.ChapterComplete;break;case r.Event.ChapterSkip:i=C.ChapterSkip;break;case r.Event.BufferStart:i=C.BufferStart;break;case r.Event.BufferComplete:i=C.BufferComplete;break;case r.Event.BitrateChange:i=C.BitrateChange;break;case r.Event.TimedMetadataUpdate:i=C.TimedMetadataUpdate,a.setData(L,t);break;default:return void this._logger.error(D,"Incorrect event name.")}this._processRule(i,a)},n.plugins.nielsen){var k=n.MediaHeartbeatConfig;k.prototype.nielsenConfigKey=void 0,k.prototype.nielsenAppInfo=void 0;var A=n._NielsenObjectKey;r.MediaObjectKey.NielsenContentMetadata=A.NielsenContentMetadata,r.MediaObjectKey.NielsenAdMetadata=A.NielsenAdMetadata,r.MediaObjectKey.NielsenChannelMetadata=A.NielsenChannelMetadata,r.NielsenContentMetadataKeys=n.plugins.nielsen.ContentMetadataKeys,r.NielsenChannelMetadataKeys=n.plugins.nielsen.ChannelMetadataKeys,r.NielsenAdMetadataKeys=n.plugins.nielsen.AdMetadataKeys,r.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}r.prototype._setState=function(e,t){this._mediaState[e]=t},r.prototype._isInState=function(e){return this._mediaState[e]},r.prototype._isTrackingDisabled=function(){return this._mediaHeartbeatDisabled},r.prototype._isInSession=function(){return this._isInState(E.Session)},r.prototype._isInMedia=function(){return this._isInState(E.Media)},r.prototype._isInAd=function(){return this._isInState(E.Ad)},r.prototype._isInAdBreak=function(){return this._isInState(E.AdBreak)},r.prototype._isInChapter=function(){return this._isInState(E.Chapter)},r.prototype._isInPlay=function(){return this._isInState(E.PlayPause)},r.prototype._isInPause=function(){return!this._isInState(E.PlayPause)},r.prototype._isInBuffer=function(){return this._isInState(E.Buffer)},r.prototype._isInSeek=function(){return this._isInState(E.Seek)},r.prototype._isPlatformTrackingSupported=function(){return!this._appMeasurement.unsupportedBrowser},r.prototype._isAudioTrackingSupported=function(e){return e.getData(P).getValue(o.MEDIAINFO_KEY_MEDIATYPE)!==r.MediaType.Audio||S.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},r.prototype._isValidMediaObject=function(e){var t=e.getData(P);if(t&&t instanceof o){var n=t.getValue(r.MediaObjectKey.MediaResumed);null!=n&&"boolean"!=typeof n&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");var i=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime)
;null!=i&&(("string"==typeof i||"number"==typeof i)&&!isNaN(i)||this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds."));var a=t.getValue(r.MediaObjectKey.StandardMediaMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},r.prototype._isValidAdBreakObject=function(e){var t=e.getData(M);return t&&t instanceof o},r.prototype._isDifferentAdBreakObject=function(e){var t=e.getData(M);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(t))},r.prototype._isValidAdObject=function(e){var t=e.getData(O);if(t&&t instanceof o){var n=t.getValue(F);null!=n&&"boolean"!=typeof n&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");var i=t.getValue(r.MediaObjectKey.StandardAdMetadata);return null!=i&&"object"!=typeof i&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},r.prototype._isDifferentAdObject=function(e){var t=e.getData(O);return!(this._currentAdObject&&this._currentAdObject.isEqual(t))},r.prototype._isValidChapterObject=function(e){var t=e.getData(N);return t&&t instanceof o},r.prototype._isDifferentChapterObject=function(e){var t=e.getData(N);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(t))},r.prototype._isValidTimedMetadataObject=function(e){var t=e.getData(L);if(t&&t instanceof o){var n=t.getValue(o.MEDIAINFO_KEY_TIMEDMETADATA);return n&&"string"==typeof n}return!1},r.prototype._shouldAllowPlayerStateChange=function(){return!(this._isInState(E.AdBreak)&&!this._isInState(E.Ad))},r.prototype._didBeginReporting=function(){return this._isInState(E.Reporting)},r.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(D,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(C.Play))},r.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case C.SeekStart:case C.BufferStart:this._logger.info(D,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case C.SeekComplete:case C.BufferComplete:this._logger.info(D,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case C.Play:this._logger.info(D,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),e.stopProcessingAction();break;case C.Pause:this._logger.info(D,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case C.AdBreakStart:this._logger.info(D,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case C.Play:this._logger.info(D,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playUnhandledFromPrerollWaitTime=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case C.Pause:this._logger.info(D,"Received trackPause before first trackPlay."),this._prerollWaitEnabled=!1;break;case C.AdBreakStart:this._logger.info(D,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},r.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===C.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===C.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==C.AdStart||this._isInState(E.FPlayPause)||this._cmdPlay(e),this._prerollWaitEnabled||!this._playUnhandledFromPrerollWaitTime||t!==C.BufferComplete&&t!==C.SeekComplete&&t!==C.AdBreakComplete||this._isInState(E.FPlayPause)||this._isInState(E.Buffer)||this._isInState(E.Seek)||(this._logger.info(D,"Executing pending API:trackPlay. This case most likely happens tracking Preroll AdBreak without any Ads."),this._cmdPlay(e))},r.prototype._cmdConfigure=function(){this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat(),this._privacyManager.configure(this._onPrivacyChange.bind(this))},r.prototype._cmdBeginReporting=function(){this._playerPlugin&&this._playerPlugin.beginReporting(),this._setState(E.Reporting,!0)},r.prototype._cmdSessionStart=function(e){var t=e.getData(P),n=e.getData(R);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var i=t.getValue(r.MediaObjectKey.StandardMediaMetadata);i&&"object"==typeof i||(i=null);var a=t.getValue(r.MediaObjectKey.MediaResumed);"boolean"==typeof a&&(this._videoInfo.resumed=a);var o=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof o&&"number"!=typeof o||isNaN(o)||(this._prerollWaitTime=Number(o),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));var s=this._prepareMetadata(i,n);s[j]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(s),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(E.Session,!0),this._setState(E.Media,!0)},r.prototype._destroyHeartbeat=function(e,t){e&&e.trackVideoUnload(),t&&t.destroy()},r.prototype._cmdVideoEnd=function(e){var t=e.getRuleName()===C.VideoComplete;if(this._isInState(E.Reporting)){var n=this,i=this._heartbeat,r=this._playerPlugin;this._playerPlugin.trackComplete((function(){n._destroyHeartbeat(r,i)}),t)}else this._destroyHeartbeat(this._playerPlugin,this._heartbeat);this._setState(E.Media,!1)},r.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(D,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(e),e.stopProcessingAction())},r.prototype._cmdSessionEnd=function(){this._setState(E.Session,!1),this._resetState()},r.prototype._cmdDisableTracking=function(){this._logger.info(D,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},r.prototype._cmdBufferStart=function(){this._playerPlugin.trackBufferStart(),this._setState(E.Buffer,!0)},r.prototype._cmdBufferComplete=function(){this._isInState(E.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(E.Buffer,!1)},r.prototype._cmdSeekStart=function(){this._playerPlugin.trackSeekStart(),this._setState(E.Seek,!0)},r.prototype._cmdSeekComplete=function(){this._isInState(E.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(E.Seek,!1)},r.prototype._cmdPlay=function(){this._playerPlugin.trackPlay(),this._setState(E.PlayPause,!0),this._setState(E.FPlayPause,!0),this._playUnhandledFromPrerollWaitTime=!1},r.prototype._cmdPause=function(){this._playerPlugin.trackPause(),this._setState(E.PlayPause,!1),this._setState(E.FPlayPause,!0)},r.prototype._cmdAdBreakStart=function(e){var t=e.getData(M);this._currentAdBreakObject=t,this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"",this._playerPlugin.trackAdBreakStart(),this._setState(E.AdBreak,!0)},r.prototype._cmdAdBreakComplete=function(){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(E.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(E.AdBreak,!1)},r.prototype._cmdAdStart=function(e){var t=e.getData(O),n=e.getData(R);this._currentAdObject=t,this._adInfo=t.createAdInfo();var i=t.getValue(F);"boolean"==typeof i&&(this._adInfo.granularTracking=i);var a=t.getValue(r.MediaObjectKey.StandardAdMetadata);a&&"object"==typeof a||(a=null);var o=this._prepareMetadata(a,n);this._aaPlugin.setAdMetadata(o),this._playerPlugin.trackAdStart(),this._setState(E.Ad,!0)},r.prototype._cmdAdComplete=function(){this._currentAdObject=null,this._adInfo=null,this._isInState(E.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(E.Ad,!1)},r.prototype._cmdAdSkip=function(){this._currentAdObject=null,this._adInfo=null,this._isInState(E.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(E.Ad,!1)},r.prototype._cmdChapterStart=function(e){var t=e.getData(N),n=e.getData(R);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo();var i=this._prepareMetadata(null,n);this._aaPlugin.setChapterMetadata(i),this._playerPlugin.trackChapterStart(),this._setState(E.Chapter,!0)},r.prototype._cmdChapterComplete=function(){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(E.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(E.Chapter,!1)},r.prototype._cmdChapterSkip=function(){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(E.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(E.Chapter,!1)},r.prototype._cmdError=function(e){var t=e.getData(x);t||(t="unknown_error_id"),this._playerPlugin.trackVideoPlayerError(t)},r.prototype._cmdBitrate=function(){this._playerPlugin.trackBitrateChange()},r.prototype._cmdTimedMetadataUpdate=function(e){var t=e.getData(L).getValue(o.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(t)},r.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},r.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(C.SessionStart,"API:trackSessionStart",[y.createPredicate(this._isPlatformTrackingSupported,!0,w.ErrUnSupportedPlatform),y.createPredicate(this._isTrackingDisabled,!1,w.ErrTrackingDisabled),y.createPredicate(this._isInSession,!1,w.ErrInSession),y.createPredicate(this._isValidMediaObject,!0,w.ErrInvalidMediaObject),y.createPredicate(this._isAudioTrackingSupported,!0,w.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(C.SessionEnd,"API:trackSessionEnd",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(C.VideoComplete,"API:trackComplete",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(C.Error,"API:trackError",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(C.Play,"API:trackPlay",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(C.Pause,"API:trackPause",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!1,w.ErrInBuffer),y.createPredicate(this._isInSeek,!1,w.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(C.BufferStart,"API:trackEvent(BufferStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!1,w.ErrInBuffer),y.createPredicate(this._isInSeek,!1,w.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(C.BufferComplete,"API:trackEvent(BufferComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!0,w.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(C.SeekStart,"API:trackEvent(SeekStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInSeek,!1,w.ErrInSeek),y.createPredicate(this._isInBuffer,!1,w.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(C.SeekComplete,"API:trackEvent(SeekComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInSeek,!0,w.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(C.AdBreakStart,"API:trackEvent(AdBreakStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isValidAdBreakObject,!0,w.ErrInvalidAdBreakObject),y.createPredicate(this._isDifferentAdBreakObject,!0,w.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(C.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(C.AdStart,"API:trackEvent(AdStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),y.createPredicate(this._isValidAdObject,!0,w.ErrInvalidAdObject),y.createPredicate(this._isDifferentAdObject,!0,w.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(C.AdComplete,"API:trackEvent(AdComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),y.createPredicate(this._isInAd,!0,w.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(C.AdSkip,"API:trackEvent(AdSkip)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),y.createPredicate(this._isInAd,!0,w.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(C.ChapterStart,"API:trackEvent(ChapterStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isValidChapterObject,!0,w.ErrInvalidChapterObject),y.createPredicate(this._isDifferentChapterObject,!0,w.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(C.ChapterComplete,"API:trackEvent(ChapterComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInChapter,!0,w.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(C.ChapterSkip,"API:trackEvent(ChapterSkip)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInChapter,!0,w.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(C.BitrateChange,"API:trackEvent(BitrateChange)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(C.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isValidTimedMetadataObject,!0,w.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this),this._ruleEngine.registerRule(C.DisableTracking,"Internal::DisableTracking",[y.createPredicate(this._isTrackingDisabled,!1,w.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(C.BeginReporting,"Internal::BeginReporting",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._didBeginReporting,!1,w.ErrBeginReporting)],[this._cmdBeginReporting],this)},r.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new h(this._appMeasurement,new f(this));var e=new g;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},r.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new _(new v(this));var t=new m(this._config.trackingServer,e);t.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp?this._config.ovp:"",t.ssl=this._config.ssl,t.sdk=this._config.appVersion?this._config.appVersion:"";var i=this._primetimeTVSDKVersion();i&&i.length>0&&(t.__primetime=!0,t.__psdkVersion=i),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},r.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new u(new p(this));var e=new d;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},r.prototype._configureOtherPlugins=function(){if(n.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new n.plugins.nielsen.NielsenPlugin(new n._NielsenPluginDelegate(this,this._logger));var e=new n.plugins.nielsen.NielsenPluginConfig;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}},r.prototype._configureHeartbeat=function(){var e=new l;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new s(new c(this),this._plugins),this._heartbeat.configure(e)},r.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._privacyManager.reset(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=B,this._playReceived=!1,this._playUnhandledFromPrerollWaitTime=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},r.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(V):null},r.prototype._cleanContextData=function(e){if(null==e||"object"!=typeof e)return null;var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];"number"!=typeof i&&"string"!=typeof i&&"boolean"!=typeof i||(t[n]=i)}return t},r.prototype._prepareMetadata=function(e,t){var n={};if(t&&T.append(n,t),e){var i=this._cleanContextData(e);T.append(n,i)}return delete n[j],n},r.prototype._onDelegateError=function(e){this._logger.error(D,e.getMessage()+" | "+e.getDetails())},r.prototype._onDelegateTrackingDisabled=function(){this._processRule(C.SessionEnd),this._processRule(C.DisableTracking)},r.prototype._onPrivacyChange=function(e){this._logger.info(D,"#_onPrivacyChange: Privacy Status: "+e),e===I.OPT_IN?this._processRule(C.BeginReporting):e===I.OPT_OUT&&this._processRule(C.SessionEnd)};var E={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8,Reporting:9},C={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20,BeginReporting:21},w={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= '2.11.0' to support tracking audio content.",ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrBeginReporting:"MediaHeartbeat has already started reporting."},D="MediaHeartbeat",P="key_media_object",M="key_adbreak_object",O="key_ad_object",N="key_chapter_object",L="key_timed_metadata_object",R="key_custom_metadata",x="key_error_id",j="a.media.streamType",V="a.__pttvsdkVersion",F="granular_ad_tracking",B=250;n._MediaHeartbeatRule=C,n._MediaHeartbeatErrorMessage=w,n.MediaHeartbeatDelegate=i,n.MediaHeartbeat=r,n.MediaHeartbeat._debugLogging=!1}(e.ADB.core,e.ADB.va),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=core),e.ADB.va||(e.ADB.va=va),e.ADB.va.plugins||(e.ADB.va.plugins={})}).call(t),e.va=t.ADB.va,e.core=t.ADB.core},"function"==typeof define&&define.amd?define(["exports"],i):"object"==typeof t&&"string"!=typeof t.nodeName?i(t):i(n.ADB={})}},"adobe-video-analytics/src/lib/helpers/mediaHeartbeat.js":{script:function(e,t,n){"use strict";var i=n("../codeLibrary/MediaSDK.min"),r=n("./deepFreeze"),a=i.va.MediaHeartbeat,o=(i.va.MediaHeartbeatDelegate,{Event:a.Event,MediaType:a.MediaType,StreamType:a.StreamType,MediaObjectKey:a.MediaObjectKey,VideoMetadataKeys:a.VideoMetadataKeys,AudioMetadataKeys:a.AudioMetadataKeys,AdMetadataKeys:a.AdMetadataKeys,version:a.version,createMediaObject:a.createMediaObject,createAdBreakObject:a.createAdBreakObject,createAdObject:a.createAdObject,createChapterObject:a.createChapterObject,createQoSObject:a.createQoSObject});e.exports=r(o)}},"adobe-video-analytics/src/lib/helpers/exportGlobal.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-window"),a=n("@adobe/reactor-object-assign"),o=n("./deepFreeze"),s=n("../codeLibrary/MediaSDK.min"),l=n("./getInstance"),c=n("./mediaHeartbeat"),u=s.va.MediaHeartbeatDelegate;e.exports=function(e){try{var t=e&&e.exportNamespace;if(t){var n={MediaHeartbeat:a({getInstance:l},c),MediaHeartbeatDelegate:u};if(void 0===r[t]||"object"==typeof r[t]&&!r[t])r[t]=o(n);else{var s='Exporting APIs to Browser window["'+t+'"] failed as it is not null/undefined.';i.logger.error(s)}}}catch(e){s='Exporting APIs to Browser window["'+t+'"] failed with reason'+e.message+".",i.logger.error(s)}}}},"adobe-video-analytics/src/lib/helpers/deepFreeze.js":{script:function(e){"use strict";function t(e){return Object.getOwnPropertyNames(e).forEach((function(n){var i=e[n];"object"==typeof i&&null!==i&&t(i)})),Object.freeze(e)}e.exports=t}}}},"adobe-analytics":{displayName:"Adobe Analytics",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPbf7b42aa08bc4f10879b1484195e80d1/",settings:{orgId:"9AE0F0145936E3790A495CAA@AdobeOrg",libraryCode:{type:"managed",accounts:{staging:["discoverydp-golfglobaldev"],production:["discoverydp-golfglobal"],development:["discoverydp-golfglobaldev"]},scopeTrackerGlobally:!0},moduleProperties:{audienceManager:{config:{partner:"discovery"}}},trackerProperties:{pageURL:"%page url%",pageName:"%page title%",currencyCode:"USD",trackingServer:"discoverydp.d3.sc.omtrdc.net",trackInlineStats:!0,trackDownloadLinks:!0,trackExternalLinks:!0,trackingServerSecure:"discoverydp.d3.sc.omtrdc.net",linkDownloadFileTypes:["doc","docx","eps","jpg","png","svg","xls","ppt","pptx","pdf","xlsx","tab","csv","zip","txt","vsd","vxd","xml","js","css","rar","exe","wma","mov","avi","wmv","mp3","wav","m4v"]}},modules:{"adobe-analytics/src/lib/actions/sendBeacon.js":{name:"send-beacon",displayName:"Send Beacon",script:function(e,t,n,i){"use strict";var r=n("../sharedModules/getTracker"),a=n("../helpers/getNodeLinkText"),o=function(e){return e&&e.nodeName&&"a"===e.nodeName.toLowerCase()},s=function(e){return o(e)?a(e):"link clicked"},l=function(e,t,n){if("page"===t.type)i.logger.info("Firing page view beacon."),e.t();else{var r={linkType:t.linkType||"o",linkName:t.linkName||s(n)};i.logger.info("Firing link track beacon using the values: "+JSON.stringify(r)+"."),e.tl(o(n)?n:"true",r.linkType,r.linkName)}};e.exports=function(e,t){return r().then((function(n){l(n,e,t.element)}),(function(e){i.logger.error("Cannot send beacon: "+e)}))}}},"adobe-analytics/src/lib/actions/setVariables.js":{name:"set-variables",displayName:"Set Variables",script:function(e,t,n,i){"use strict";var r=n("../sharedModules/getTracker"),a=n("../helpers/applyTrackerVariables");e.exports=function(e,t){return r().then((function(n){i.logger.info("Set variables on the tracker."),a(n,e.trackerProperties),e.customSetup&&e.customSetup.source&&e.customSetup.source.call(t.element,t,n)}),(function(e){i.logger.error("Cannot set variables: "+e)}))}}},"adobe-analytics/src/lib/actions/clearVariables.js":{name:"clear-variables",displayName:"Clear Variables",script:function(e,t,n,i){"use strict";var r=n("../sharedModules/getTracker");e.exports=function(){return r().then((function(e){e.clearVars&&(i.logger.info("Clear variables."),e.clearVars())}),(function(e){i.logger.error("Cannot clear variables: "+e)}))}}},"adobe-analytics/src/lib/sharedModules/getTracker.js":{script:function(e,t,n,i){"use strict";var r,a=n("@adobe/reactor-cookie"),o=n("@adobe/reactor-promise"),s=n("@adobe/reactor-window"),l=n("../helpers/settingsHelper"),c=n("../helpers/augmenters"),u=n("../helpers/applyTrackerVariables"),d=n("../helpers/loadLibrary"),p=n("../helpers/generateVersion")(i.buildInfo.turbineBuildDate),h="beforeSettings",g=i.getSharedModule("adobe-mcid","mcid-instance"),f=function(e){return!e||"true"===a.get(e)},_=function(e){return o.all(c.map((function(t){var n;try{n=t(e)}catch(e){setTimeout((function(){throw e}))}return o.resolve(n)}))).then((function(){return e}))},m=function(e){return g&&(i.logger.info("Setting MCID instance on the tracker."),e.visitor=g),e},v=function(e){return i.logger.info('Setting version on tracker: "'+p+'".'),void 0!==e.tagContainerMarker?e.tagContainerMarker=p:"string"==typeof e.version&&e.version.substring(e.version.length-5)!=="-"+p&&(e.version+="-"+p),e},y=function(e,t,n){return t.loadPhase===h&&t.source&&(i.logger.info("Calling custom script before settings."),t.source.call(s,n)),u(n,e||{}),t.loadPhase!==h&&t.source&&(i.logger.info("Calling custom script after settings."),t.source.call(s,n)),n},b=function(e,t){return l.isAudienceManagementEnabled(e)&&(t.loadModule("AudienceManagement"),i.logger.info("Initializing AudienceManagement module"),t.AudienceManagement.setup(e.moduleProperties.audienceManager.config)),t},I=(r=i.getExtensionSettings(),f(r.trackingCookieName)?d(r).then(_).then(m).then(v).then(y.bind(null,r.trackerProperties,r.customSetup||{})).then(b.bind(null,r)):o.reject("EU compliance was not acknowledged by the user."));e.exports=function(){return I}},name:"get-tracker",shared:!0},"adobe-analytics/src/lib/sharedModules/augmentTracker.js":{name:"augment-tracker",shared:!0,script:function(e,t,n){"use strict";var i=n("../helpers/augmenters");e.exports=function(e){i.push(e)}}},"adobe-analytics/src/lib/helpers/getNodeLinkText.js":{script:function(e){"use strict";var t=function(e){return e&&e.replace(/\s+/g," ").trim()},n=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,i=function(e){return!(e&&e.nodeName&&e.nodeName.match(n))},r=function(e){var t=[],n=!1;return i(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((function(e){var i=r(e);t=t.concat(i.supportedNodes),n=n||i.includesUnsupportedNodes}))):n=!0,{supportedNodes:t,includesUnsupportedNodes:n}},a=function(e,t,n){var i;return n&&n!==e.nodeName.toUpperCase()||(i=e.getAttribute(t)),i};e.exports=function(e){var n=t(e.innerText||e.textContent),i=r(e);if(!n||i.includesUnsupportedNodes){var o,s,l,c,u=[];i.supportedNodes.forEach((function(e){e.getAttribute&&(o=o||t(e.getAttribute("alt")),s=s||t(e.getAttribute("title")),l=l||t(a(e,"value","INPUT")),c=c||t(a(e,"src","IMG"))),e.nodeValue&&u.push(e.nodeValue)})),(n=t(u.join("")))||(n=t(o||s||l||c||""))}return n}}},"adobe-analytics/src/lib/helpers/settingsHelper.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-window"),a={LIB_TYPES:{MANAGED:"managed",PREINSTALLED:"preinstalled",REMOTE:"remote",CUSTOM:"custom"},MANAGED_LIB_PATHS:{APP_MEASUREMENT:"AppMeasurement.js",ACTIVITY_MAP:"AppMeasurement_Module_ActivityMap.js",AUDIENCE_MANAGEMENT:"AppMeasurement_Module_AudienceManagement.js"},getReportSuites:function(e){var t=e.production;return e[i.environment.stage]&&(t=e[i.environment.stage]),t.join(",")},isActivityMapEnabled:function(e){return!(e.libraryCode&&!e.libraryCode.useActivityMap&&!1===e.libraryCode.useActivityMap)},isAudienceManagementEnabled:function(e){var t=!1;return e&&e.moduleProperties&&e.moduleProperties.audienceManager&&e.moduleProperties.audienceManager.config&&r&&r._satellite&&r._satellite.company&&r._satellite.company.orgId&&(t=!0),t}};e.exports=a}},"adobe-analytics/src/lib/helpers/augmenters.js":{script:function(e){"use strict";e.exports=[]}},"adobe-analytics/src/lib/helpers/applyTrackerVariables.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-query-string"),a=n("@adobe/reactor-window"),o=/eVar([0-9]+)/,s=/prop([0-9]+)/,l=new RegExp("^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$"),c=function(e,t,n){return n.indexOf(e)===t},u=function(e,t,n){var i=Object.keys(t).filter(l.test.bind(l));return n&&i.push("events"),(i=i.concat((e.linkTrackVars||"").split(","))).filter((function(e,t){return"None"!==e&&e&&c(e,t,i)
})).join(",")},d=function(e,t){var n=t.map((function(e){return e.name}));return(n=n.concat((e.linkTrackEvents||"").split(","))).filter((function(e,t){return"None"!==e&&c(e,t,n)})).join(",")},p=function(e,t,n){e[t]=n[t].join(",")},h=function(e,t,n){var i=n.dynamicVariablePrefix||"D=";n[t].forEach((function(t){var n;if("value"===t.type)n=t.value;else{var r=o.exec(t.value);if(r)n=i+"v"+r[1];else{var a=s.exec(t.value);a&&(n=i+"c"+a[1])}}e[t.name]=n}))},g={linkDownloadFileTypes:p,linkExternalFilters:p,linkInternalFilters:p,hierarchies:function(e,t,n){n[t].forEach((function(t){e[t.name]=t.sections.join(t.delimiter)}))},props:h,eVars:h,campaign:function(e,t,n){if("queryParam"===n[t].type){var i=r.parse(a.location.search);e[t]=i[n[t].value]}else e[t]=n[t].value},events:function(e,t,n){var i=n[t].map((function(e){var t=e.name;return e.id&&(t=[t,e.id].join(":")),e.value&&(t=[t,e.value].join("=")),t}));e[t]=i.join(",")}};e.exports=function(e,t){var n={};t=t||{},Object.keys(t).forEach((function(e){var i=g[e],r=t[e];i?i(n,e,t):n[e]=r})),n.events&&e.events&&e.events.length>0&&(n.events=e.events+","+n.events);var r=t&&t.events&&t.events.length>0,a=u(e,n,r);a&&(n.linkTrackVars=a);var o=d(e,t.events||[]);o&&(n.linkTrackEvents=o),i.logger.info('Applying the following properties on tracker: "'+JSON.stringify(n)+'".'),Object.keys(n).forEach((function(t){e[t]=n[t]}))}}},"adobe-analytics/src/lib/helpers/loadLibrary.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-load-script"),a=n("@adobe/reactor-window"),o=n("@adobe/reactor-promise"),s=n("./settingsHelper"),l=n("./pollHelper"),c=function(e,t){if(!a.s_gi)throw new Error("Unable to create AppMeasurement tracker, `s_gi` function not found."+a.AppMeasurement);i.logger.info('Creating AppMeasurement tracker with these report suites: "'+t+'"');var n=a.s_gi(t);return e.libraryCode.scopeTrackerGlobally&&(i.logger.info("Setting the tracker as window.s"),a.s=n),n},u=function(e){var t=[];switch(e.libraryCode.type){case s.LIB_TYPES.MANAGED:t.push(i.getHostedLibFileUrl(s.MANAGED_LIB_PATHS.APP_MEASUREMENT)),s.isActivityMapEnabled(e)&&t.push(i.getHostedLibFileUrl(s.MANAGED_LIB_PATHS.ACTIVITY_MAP));break;case s.LIB_TYPES.CUSTOM:t.push(e.libraryCode.source);break;case s.LIB_TYPES.REMOTE:t.push("https:"===a.location.protocol?e.libraryCode.httpsUrl:e.libraryCode.httpUrl)}if(s.isAudienceManagementEnabled(e)){var n={namespace:a._satellite.company.orgId};e.moduleProperties.audienceManager.config.visitorService=n,t.push(i.getHostedLibFileUrl(s.MANAGED_LIB_PATHS.AUDIENCE_MANAGEMENT))}return t},d=function(e){return o.all(u(e).map((function(e){return i.logger.info("Loading script: "+e),r(e)})))},p=function(e,t){if(e.libraryCode.accounts)if(t.sa){var n=s.getReportSuites(e.libraryCode.accounts);i.logger.info('Setting the following report suites on the tracker: "'+n+'"'),t.sa(n)}else i.logger.warn("Cannot set report suites on tracker. `sa` method not available.");return t},h=function(e){if(a[e])return i.logger.info('Found tracker located at: "'+e+'".'),a[e];throw new Error('Cannot find the global variable name: "'+e+'".')};e.exports=function(e){var t=d(e);switch(e.libraryCode.type){case s.LIB_TYPES.MANAGED:var n=s.getReportSuites(e.libraryCode.accounts);return t.then(c.bind(null,e,n));case s.LIB_TYPES.PREINSTALLED:return t.then(l.poll.bind(null,a,e.libraryCode.trackerVariableName)).then(p.bind(null,e));case s.LIB_TYPES.CUSTOM:case s.LIB_TYPES.REMOTE:return t.then(h.bind(null,e.libraryCode.trackerVariableName)).then(p.bind(null,e));default:throw new Error("Cannot load library. Type not supported.")}}}},"adobe-analytics/src/lib/helpers/generateVersion.js":{script:function(e){"use strict";var t=8,n=function(e){return e.getUTCDate().toString(36)},i=function(e){return e.substr(e.length-1)},r=function(e){return Math.floor(e.getUTCHours()/t)},a=function(e){var t=(e.getUTCMonth()+1+12*r(e)).toString(36);return i(t)},o=function(e){return(e.getUTCFullYear()-2010).toString(36)};e.exports=function(e){var t=new Date(e);if(isNaN(t))throw new Error("Invalid date provided");return("L"+o(t)+a(t)+n(t)).toUpperCase()}}},"adobe-analytics/src/lib/helpers/pollHelper.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-promise"),a=40,o=250,s=function(e,t,n){i.logger.info('Found property located at: "'+t+'"].'),e(n)},l=function(e,t){return new r((function(n,i){if(e[t])return s(n,t,e[t]);var r=1,l=setInterval((function(){e[t]&&(s(n,t,e[t]),clearInterval(l)),r>=a&&(clearInterval(l),i(new Error('Bailing out. Cannot find the variable name: "'+t+'"].'))),r++}),o)}))};e.exports={poll:function(e,t){return i.logger.info('Waiting for the property to become accessible at: "'+t+'"].'),l(e,t)}}}}}},"common-analytics-plugins":{displayName:"Common Analytics Plugins",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP627a25c51967405590ccc51bba101d07/",modules:{"common-analytics-plugins/src/lib/actions/initialize.js":{name:"initialize",displayName:"Initialize",script:function(e,t,n,i){"use strict";var r,a=i.getSharedModule("adobe-analytics","augment-tracker"),o=i.getSharedModule("adobe-analytics","get-tracker");e.exports=function(e){e&&(r=e)},void 0===o?i.logger.error('The "Common Analytics Plugins" extension requires that the "Adobe Analytics" extension be installed in the same Launch web property and it is not.'):a((function(e){(r.gqp||r.mv||r.pt)&&(e.pt=function(e,t,n,i){for(var r=0,a=(e=e.split(t||",")).length;r<a;r++)if(t=this[n](e[r],i))return t;return""}),(r.ft||r.apl||r.il||r.gtbe||r.gttc)&&(e.inList=function(e,t,n,i){if("string"!=typeof t)return!1;if("string"==typeof e)e=e.split(n||",");else if("object"!=typeof e)return!1;n=0;for(var r=e.length;n<r;n++)if(1==i&&t===e[n]||t.toLowerCase()===e[n].toLowerCase())return!0;return!1}),(r.fpo||r.gplt||r.gppv)&&(e.p_fo=function(e){var t=this;return t.__fo||(t.__fo={}),!t.__fo[e]&&(t.__fo[e]={},!0)}),r.ggc&&(e.getGeoCoordinates=function(){var e=this,t="",n=e.c_r("s_ggc").split("|"),i={timeout:5e3,maximumAge:0},r=function(n){n=n.coords;var i=new Date;i.setTime(i.getTime()+18e5),e.c_w("s_ggc",parseFloat(n.latitude.toFixed(4))+"|"+parseFloat(n.longitude.toFixed(4)),i),t="latitude="+parseFloat(n.latitude.toFixed(4))+" | longitude="+parseFloat(n.longitude.toFixed(4))},a=function(){t="error retrieving geo coordinates"};return 1<n.length&&(t="latitude="+n[0]+" | longitude="+n[1]),navigator.geolocation&&navigator.geolocation.getCurrentPosition(r,a,i),""===t&&(t="geo coordinates not supported"),t}),r.ns&&(window.zeroPad=function(e,t){if(e=parseInt(e),t=parseInt(t),isNaN(e)||isNaN(t))return"";var n=t-e.toString().length+1;return Array(+(0<n&&n)).join("0")+e},window.randomNumber=function(e){e="number"==typeof e?17>Math.abs(e)?Math.round(Math.abs(e)):17:10;for(var t="1",n=0;n<e;n++)t+="0";return t=Number(t),(t=Math.floor(Math.random().toFixed(e)*t)+"").length!==e&&"undefined"!=typeof zeroPad&&(t=zeroPad(t,e)),t},window.twoDecimals=function(e){return void 0===e||void 0===e||isNaN(e)?0:Number(Number(e).toFixed(2))}),r.apv&&(e.addProductEvar=function(e,t,n){if("string"==typeof e&&"string"==typeof t&&""!==t)if(n=n||!1,this.products){var i,r=this.products.split(","),a=r.length;for(n=n?0:a-1;n<a;n++)(i=r[n].split(";"))[5]&&-1<i[5].toLowerCase().indexOf("evar")?i[5]=i[5]+"|"+e+"="+t:i[5]?i[5]=e+"="+t:i[5]||(i[4]||(i[4]=""),i[3]||(i[3]=""),i[2]||(i[2]=""),i[1]||(i[1]=""),i[5]=e+"="+t),r[n]=i.join(";");this.products=r.join(",")}else this.products=";;;;;"+e+"="+t}),r.ape&&(e.addProductEvent=function(e,t,n){var i=this;if("string"==typeof e)if(t=isNaN(t)?"1":String(t),n=n||!1,i.events=i.apl(i.events,e),i.products){var r,a=i.products.split(",");for(n=n?0:a.length-1;n<a.length;n++)(r=a[n].split(";"))[4]&&r[4].includes("event")?r[4]=r[4]+"|"+e+"="+t:r[5]?r[4]=e+"="+t:r[4]||(r[3]||(r[3]=""),r[2]||(r[2]=""),r[1]||(r[1]=""),r[4]=e+"="+t),a[n]=r.join(";");i.products=a.join(",")}else i.products=";;;;"+e+"="+t}),r.apl&&(e.apl=function(e,t,n,i,r){if(!e||"string"==typeof e){if(void 0===this.inList||"string"!=typeof t||""===t)return e;n=n||",",1==(i=i||n)&&(i=n,r||(r=1)),2==i&&1!=r&&(i=n);for(var a=(t=t.split(",")).length,o=0;o<a;o++)this.inList(e,t[o],n,r)||(e=e?e+i+t[o]:t[o])}return e}),(r.cs||r.mv)&&(window.cleanStr=function(e){if("string"==typeof e){for(e=(e=(e=(e=(e=e.replace(/<\/?[^>]+(>|$)/g,"")).replace(/^\s+|\s+$/g,"")).replace(/[\u2018\u2019\u201A]/g,"'")).replace(/\t+/g,"")).replace(/[\n\r]/g," ");-1<e.indexOf("  ");)e=e.replace(/\s\s/g," ");return e}return""}),r.rfl&&(e.rfl=function(e,t,n,i,r){if(!e||!t)return"";var a=[],o="";i=i||n,r=!!r,n=(e=e.split(n||",")).length;for(var s=0;s<n;s++)-1<e[s].indexOf(":")&&((o=e[s].split(":"))[1]=o[0]+":"+o[1],e[s]=o[0]),-1<e[s].indexOf("=")&&((o=e[s].split("="))[1]=o[0]+"="+o[1],e[s]=o[0]),e[s]!==t&&o?a.push(o[1]):e[s]!==t?a.push(e[s]):e[s]===t&&r&&(o?a.push(o[1]):a.push(e[s]),r=!1),o="";return a.join(i)}),r.gvo&&(e.getValOnce=function(e,t,n,i){if(t=t||"s_gvo",n=n||0,i="m"===i?6e4:864e5,e&&e!==this.c_r(t)){var r=new Date;return r.setTime(r.getTime()+n*i),this.c_w(t,e,0===n?0:r),e}return""}),r.gpv&&(e.getPreviousValue=function(e,t,n){var i=this,r="",a=!0;if(t=t||"s_gpv",n){a=!1,n=n.split(",");for(var o=i.events?i.events.split(","):"",s=0,l=n.length;s<l;s++){for(var c=0,u=o.length;c<u;c++)if(n[s]===o[c]){a=!0;break}if(!0===a)break}}return!0===a&&((a=new Date).setTime(a.getTime()+18e5),i.c_r(t)&&(r=i.c_r(t)),e?i.c_w(t,e,a):i.c_w(t,"no previous value",a)),r}),r.gapv&&(e.getAndPersistValue=function(e,t,n){var i=new Date;return t=t||"s_gapv",(n=n||0)?i.setTime(i.getTime()+864e5*n):i.setTime(i.getTime()+18e5),e||(e=this.c_r(t)),this.c_w(t,e,i),e}),(r.ft||r.gtbe||r.gttc)&&(e.formatTime=function(e,t,n){var i=this;if(!(void 0===e||isNaN(e)||0>Number(e))){if("string"==typeof t&&"d"===t||("string"!=typeof t||!i.inList("h,m,s",t))&&86400<=e){t=86400;var r="days";n=isNaN(n)?4:t/(n*t)}else"string"==typeof t&&"h"===t||("string"!=typeof t||!i.inList("m,s",t))&&3600<=e?(t=3600,r="hours",n=isNaN(n)?4:t/(n*t)):"string"==typeof t&&"m"===t||("string"!=typeof t||!i.inList("s",t))&&60<=e?(t=60,r="minutes",n=isNaN(n)?2:t/(n*t)):(t=1,r="seconds",n=isNaN(n)?.2:t/n);return 0===(e=Math.round(e*n/t)/n+" "+r).indexOf("1 ")&&(e=e.substring(0,e.length-1)),e}}),r.gtslv&&(e.getTimeSinceLastVisit=function(){var e=this,t=new Date,n=t.getTime(),i=e.c_r("s_tslv")||0,r=Math.round((n-i)/1e3);return t.setTime(n+63072e6),e.c_w("s_tslv",n,t),i?1800<r&&e.formatTime?e.formatTime(r):"":"New Visitor"}),r.gdslv&&(e.getDaysSinceLastVisit=function(){var e=new Date,t=e.getTime(),n=this.c_r("s_dslv");if(e.setTime(t+94608e6),this.c_w("s_dslv",t,e),n){if(18e5<(e=t-n)){if(31536e6<e)return"More than a year";if(2592e6<e)return"More than 30 days";if(e<2592000001&&6048e5<e)return"More than 7 days";if(e<604800001&&864e5<e)return"Less than 7 days";if(e<86400001)return"Less than 1 day"}return""}return"New Visitor"}),r.gnr&&(e.getNewRepeat=function(e){var t=this,n="s_nr"+(e=e||30),i=new Date,r=t.c_r(n),a=r.split("-"),o=i.getTime();return i.setTime(o+864e5*e),""===r||18e4>o-a[0]&&"New"===a[1]?(t.c_w(n,o+"-New",i),"New"):(t.c_w(n,o+"-Repeat",i),"Repeat")}),r.gplt&&(e.getPageLoadTime=function(){var e=this;if("undefined"!=typeof performance&&e.p_fo("performance")){var t=performance;t.clearResourceTimings(),""!==e.c_r("s_plt")&&(0<t.timing.loadEventEnd&&clearInterval(e.pi),e._pltLoadTime=e.c_r("s_plt"),e._pltPreviousPage=e.c_r("s_pltp"),e.c_w("s_plt",""),e.c_w("s_pltp","")),0===t.timing.loadEventEnd?e.pi=setInterval((function(){e.performanceWriteFull()}),250):0<t.timing.loadEventEnd&&(e.ptc?e.ptc===t.timing.loadEventEnd&&1===t.getEntries().length&&(e.pwp=setInterval((function(){e.performanceWritePart()}),500)):e.performanceWriteFull())}},e.performanceWriteFull=function(){var e=this,t=performance.timing;0<t.loadEventEnd&&(clearInterval(e.pi),""===e.c_r("s_plt")&&(e.c_w("s_plt",e.performanceCheck(t.loadEventEnd,t.navigationStart)),e.c_w("s_pltp",e.pageName))),e.ptc=t.loadEventEnd},e.performanceWritePart=function(){var e=this,t=performance;0<t.getEntries().length&&(e.ppfe===t.getEntries().length?clearInterval(e.pwp):e.ppfe=t.getEntries().length),""===e.c_r("s_plt")&&(e.c_w("s_plt",((t.getEntries()[t.getEntries().length-1].responseEnd-t.getEntries()[0].startTime)/1e3).toFixed(2)),e.c_w("s_pltp",e.pageName))},e.performanceCheck=function(e,t){if(0<=e&&0<=t)return 6e4>e-t&&0<=e-t?parseFloat((e-t)/1e3).toFixed(2):60}),r.gpn&&(window.getPageName=function(e,t,n,i){var r=location.hostname,a=location.pathname.substring(1).split("/"),o=a.length,s=location.search.substring(1).split("&"),l=s.length,c=location.hash.substring(1).split("&"),u=c.length;if(i=i||"|",e=e||r,t=t||"",n=n||"",1===o&&""===a[0])e=e+i+"home";else for(r=0;r<o;r++)e=e+i+decodeURIComponent(a[r]);if(t&&(1!==l||""!==s[0]))for(o=(a=t.split(",")).length,r=0;r<o;r++)for(t=0;t<l;t++)if(a[r]===s[t].split("=")[0]){e=e+i+decodeURIComponent(s[t]);break}if(n&&(1!==u||""!==c[0]))for(s=(n=n.split(",")).length,r=0;r<s;r++)for(t=0;t<u;t++)if(n[r]===c[t].split("=")[0]){e=e+i+decodeURIComponent(c[t]);break}return e.substring(e.length-i.length)===i?e.substring(0,e.length-i.length):e}),r.grl&&(window.getResponsiveLayout=function(e,t,n){if(!(isNaN(e)||isNaN(t)||isNaN(n)||t<e||n<t)){var i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return(e<t&&i<=t?i<=e?"phone portrait layout":"phone landscape layout":i<=t?"phone layout":i<=n?"tablet layout":"desktop layout")+":"+i+"x"+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)}}),r.gqp&&(e.getQueryParam=function(e,t,n){var i=this,r="",a=function(e,t){var n=(t=(t=t.split("?").join("&")).split("#").join("&")).indexOf("&"),r="";return e&&(-1<n||t.indexOf("=")>n)&&(n=t.substring(n+1),r=i.pt(n,"&","gpval",e)),r},o=(e=e.split(",")).length;if(i.gpval=function(e,t){if(e){var n=e.split("="),i=n[0];if(n=!n[1]||n[1],t.toLowerCase()==i.toLowerCase())return"boolean"==typeof n?n:this.unescape(n)}return""},t=t||"",n=(n||(i.pageURL?i.pageURL:location.href))+"",(4<t.length||-1<t.indexOf("="))&&n&&4>n.length){var s=t;t=n,n=s}for(var l=0;l<o;l++)"string"==typeof(s=a(e[l],n))?(s=-1<s.indexOf("#")?s.substring(0,s.indexOf("#")):s,r+=r?t+s:s):r=""===r?s:r+(t+s);return r}),r.gtp&&(window.getTimeParting=function(e){return e=document.documentMode?void 0:e||"Etc/GMT",e=(new Date).toLocaleDateString("en-US",{timeZone:e,minute:"numeric",hour:"numeric",weekday:"long",day:"numeric",year:"numeric",month:"long"}),"year="+(e=/([a-zA-Z]+).*?([a-zA-Z]+).*?([0-9]+).*?([0-9]+)(.*?)([0-9])(.*)/.exec(e))[4]+" | month="+e[2]+" | date="+e[3]+" | day="+e[1]+" | time="+(e[6]+e[7])}),r.gtbe&&(e.getTimeBetweenEvents=function(e,t,n,i,r,a,o,s,l){var c=this;if("string"==typeof e&&void 0!==t&&"string"==typeof n&&void 0!==i){r=r||"s_tbe",a=isNaN(a)?1:Number(a);var u=!1,d=!1,p=e.split(","),h=n.split(",");l=l?l.split(","):[];for(var g,f=c.c_r(r),_=new Date,m=_.getTime(),v=new Date,y=0;y<l.length;++y)if(c.inList(c.events,l[y]))return v.setDate(v.getDate()-1),void c.c_w(r,"",v);for(v.setTime(v.getTime()+864e5*a),y=0;y<p.length&&!u&&!0!==(u=c.inList(c.events,p[y]));++y);for(y=0;y<h.length&&!d&&!0!==(d=c.inList(c.events,h[y]));++y);return 1===p.length&&1===h.length&&e===n&&u&&d?(f&&(g=(m-f)/1e3),c.c_w(r,m,a?v:0)):(!u||1!=t&&f||c.c_w(r,m,a?v:0),d&&f&&(g=(_.getTime()-f)/1e3,!0===i&&(v.setDate(v.getDate()-1),c.c_w(r,"",v)))),g?c.formatTime(g,o,s):""}}),r.gttc&&(e.getTimeToComplete=function(e,t,n){if("stop"===(e=e?e.toLowerCase():"start")||"start"===e){t=t||"s_gttc",n=n||0;var i=this,r=i.c_r(t),a=new Date;if("start"!==e||r){if("stop"===e&&r)return e=Math.round((a.getTime()-r)/1e3),i.c_w(t,"",0),i.formatTime(e)}else i.c_w(t,a.getTime(),n?new Date(a.getTime()+864e5*n):0)}}),r.gvd&&(e.getVisitDuration=function(){var e=new Date,t=e.getTime(),n=this.c_r("s_dur");(isNaN(n)||18e5<t-n)&&(n=t);var i=t-n;return e.setTime(t+18e5),this.c_w("s_dur",n+"",e),0===i?"first hit of visit":0===(i=Math.floor(i/6e4))?"less than a minute":1===i?"1 minute":i+" minutes"}),r.gvn&&(e.getVisitNum=function(e,t){var n=this,i=function(e){return!isNaN(e)&&(0|parseFloat(e))===parseFloat(e)};if(e=e||365,"boolean"==typeof(t=t?!!t:!!i(e))){var r=(new Date).getTime(),a=endOfDatePeriod(e);if(n.c_r("s_vnc"+e))var o=n.c_r("s_vnc"+e).split("&vn="),s=o[1];return n.c_r("s_ivc")?s?(a.setTime(r+18e5),n.c_w("s_ivc",!0,a),s):"unknown visit number":void 0!==s?(s++,i=t&&i(e)?r+864e5*e:o[0],a.setTime(i),n.c_w("s_vnc"+e,i+"&vn="+s,a),a.setTime(r+18e5),n.c_w("s_ivc",!0,a),s):(i=i(e)?r+864e5*e:endOfDatePeriod(e).getTime(),n.c_w("s_vnc"+e,i+"&vn=1",a),a.setTime(r+18e5),n.c_w("s_ivc",!0,a),"1")}},window.endOfDatePeriod=function(e){var t=new Date,n=isNaN(e)?0:Math.floor(e);if(t.setHours(23),t.setMinutes(59),t.setSeconds(59),"w"===e&&(n=6-t.getDay()),"m"===e){n=t.getMonth()+1;var i=t.getFullYear();n=new Date(i||1970,n||1,0).getDate()-t.getDate()}return t.setDate(t.getDate()+n),"y"===e&&(t.setMonth(11),t.setDate(31)),t}),r.mv&&(e.manageVars=function(e,t,n){var i=this;if(!i[e])return!1;t=t||"",n=n||!0;var r,a="pageName,purchaseID,channel,server,pageType,campaign,state,zip,events,products,transactionID";for(r=1;76>r;r++)a+=",prop"+r;for(r=1;251>r;r++)a+=",eVar"+r;for(r=1;6>r;r++)a+=",hier"+r;for(r=1;4>r;r++)a+=",list"+r;for(r in i.contextData)a+=",contextData."+r;if(t){if(1==n)a=t.replace("['",".").replace("']","");else if(0==n){for(x in t=t.split(","),n=a.split(","),a="",t)for(y in"string"==typeof t[x]&&-1<t[x].indexOf("contextData")&&(t[x]="contextData."+t[x].split("'")[1]),n)t[x]===n[y]&&(n[y]="");for(y in n)a+=n[y]?","+n[y]:""}return i.pt(a,",",e,0),!0}return!(""!==t||!n||(i.pt(a,",",e,0),0))},e.lowerCaseVars=function(e){var t=this;t[e]&&("events"!==e&&-1===e.indexOf("contextData")?(t[e]=t[e].toString(),0!==t[e].indexOf("D=")&&(t[e]=t[e].toLowerCase())):-1<e.indexOf("contextData")&&(e=e.substring(e.indexOf(".")+1),t.contextData[e]&&(t.contextData[e]=t.contextData[e].toString().toLowerCase())))},s.cleanStr=window.cleanStr)}))}}}},"adobe-mcid":{displayName:"Experience Cloud ID Service",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP31a59fd25d824db7be52972a70e94c1c/",settings:{orgId:"9AE0F0145936E3790A495CAA@AdobeOrg"},modules:{"adobe-mcid/src/lib/actions/setCustomerIds.js":{name:"set-customer-ids",displayName:"Set Customer IDs",script:function(e,t,n,i){"use strict";var r=n("../sharedModules/mcidInstance"),a=i.logger,o=function(e){return"string"==typeof e&&e.length>0},s=function(e){var t={},n=[];return e.forEach((function(e){var i=e.integrationCode,r=e.value;o(i)&&o(r)?(t[i]={id:r},e.hasOwnProperty("authState")&&(t[e.integrationCode].authState=e.authState),e.hasOwnProperty("hashType")&&(t[e.integrationCode].hashType=e.hashType)):n.push(e)})),n.length&&a.warn("Rejected these customer ids: "+JSON.stringify(n)),t};e.exports=function(e){if(r){var t=s(e.customerIds);r.setCustomerIDs(t),a.info("Set Customer IDs: "+JSON.stringify(t))}else a.warn("MCID instance cannot be found. Cannot set Customer IDs.")}}},"adobe-mcid/src/lib/sharedModules/mcidInstance.js":{script:function(e,t,n,i){"use strict";var r=n("@adobe/reactor-document"),a=n("../codeLibrary/VisitorAPI"),o=n("../../view/utils/timeUnits"),s=function(e){return e.reduce((function(e,t){var n=/^(true|false)$/i.test(t.value)?JSON.parse(t.value):t.value;return e[t.name]=n,e}),{})},l=function(e){var t=i.getExtensionSettings();if("string"!=typeof t.orgId)throw new TypeError("Org ID is not a string.");var n=s(t.variables||[]),r=t.doesOptInApply;r&&("boolean"==typeof r?n.doesOptInApply=r:t.optInCallback&&(n.doesOptInApply=t.optInCallback));var a=t.isOptInStorageEnabled;a&&(n.isOptInStorageEnabled=a);var l=t.optInCookieDomain;l&&(n.optInCookieDomain=l);var c=t.optInStorageExpiry;if(c){var u=t.timeUnit;if(u&&o[u]){var d=c*o[u];n.optInStorageExpiry=d}}else!0===a&&(n.optInStorageExpiry=33696e3);var p=t.previousPermissions;p&&(n.previousPermissions=p);var h=t.preOptInApprovals;if(h)n.preOptInApprovals=h;else{var g=t.preOptInApprovalInput;g&&(n.preOptInApprovals=g)}var f=t.isIabContext;f&&(n.isIabContext=f);var _=e.getInstance(t.orgId,n);return i.logger.info('Created instance using orgId: "'+t.orgId+'"'),i.logger.info("Set variables: "+JSON.stringify(n)),_.getMarketingCloudVisitorID((function(e){i.logger.info("Obtained Marketing Cloud Visitor Id: "+e)}),!0),_},c=function(e){return(i.getExtensionSettings().pathExclusions||[]).some((function(t){return t.valueIsRegex?new RegExp(t.value,"i").test(e):t.value===e}))},u=null;_satellite.getVisitorId=function(){return u},c(r.location.pathname)?i.logger.warn("MCID library not loaded. One of the path exclusions matches the current path."):u=l(a),e.exports=u},name:"mcid-instance",shared:!0},"adobe-mcid/src/lib/codeLibrary/VisitorAPI.js":{script:function(e){e.exports=(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!P.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach((function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)}),this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function i(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function r(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}function a(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function o(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)return 1;if(r>i)return-1}return 0}function s(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return r(n.concat(i))?(a(n,i),o(n,i)):NaN}function l(e){return e===Object(e)&&0===Object.keys(e).length}function c(e){return"function"==typeof e||e instanceof Array&&e.length}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=ue("log",e,t),this.warn=ue("warn",e,t),this.error=ue("error",e,t)}function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookieName,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies;if(!e||!t)return{get:Ae,set:Ae,remove:Ae};var n={remove:function(){t.remove(e)},get:function(){var n=t.get(e),i={};try{i=JSON.parse(n)}catch(n){i={}}return i},set:function(i,r){r=r||{};var a=n.get(),o=Object.assign(a,i);t.set(e,JSON.stringify(o),{domain:r.optInCookieDomain||"",cookieLifetime:r.optInStorageExpiry||3419e4,secure:r.secure,sameSite:r.sameSite,expires:!0})}};return n}function p(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function h(){function e(e,t){var n=fe(e);return n.length?n.every((function(e){return!!t[e]})):_e(t)}function t(){w(E),C(te.COMPLETE),v(m.status,m.permissions),s&&_.set(m.permissions,{optInCookieDomain:l,optInStorageExpiry:c,secure:p,sameSite:h}),y.execute(Me)}function n(e){return function(n,i){if(!me(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return C(te.CHANGED),Object.assign(E,ve(fe(n),e)),i||t(),m}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.doesOptInApply,a=i.previousPermissions,o=i.preOptInApprovals,s=i.isOptInStorageEnabled,l=i.optInCookieDomain,c=i.optInStorageExpiry,u=i.isIabContext,p=i.secureCookie,h=i.sameSiteCookie,g=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies,f=Ee(a);Ce(f,"Invalid `previousPermissions`!"),Ce(o,"Invalid `preOptInApprovals`!");var _=d({cookieName:"adobeujs-optin"},{cookies:g}),m=this,v=ee(m),y=se(),b=Ie(f),I=Ie(o),T=s?_.get():{},S={},k=function(e,t){return Te(e)||t&&Te(t)?te.COMPLETE:te.PENDING}(b,T),A=function(e,t,n){var i=ve(oe,!r);return r?Object.assign({},i,e,t,n):i}(I,b,T),E=ye(A),C=function(e){return k=e},w=function(e){return A=e};m.deny=n(!1),m.approve=n(!0),m.denyAll=m.deny.bind(m,oe),m.approveAll=m.approve.bind(m,oe),m.isApproved=function(t){return e(t,m.permissions)},m.isPreApproved=function(t){return e(t,I)},m.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?m.on(te.COMPLETE,e):Ae;return!r||r&&m.isComplete||o?e(m.permissions):t||y.add(Me,(function(){return e(m.permissions)})),n},m.complete=function(){m.status===te.CHANGED&&t()},m.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(Oe);S[e.name]||(S[e.name]=e,e.onRegister.call(e,m))},m.execute=Pe(S),m.memoizeContent=function(e){ke(e)&&_.set(e,{optInCookieDomain:l,optInStorageExpiry:c,secure:p,sameSite:h})},m.getMemoizedContent=function(e){var t=_.get();if(t)return t[e]},Object.defineProperties(m,{permissions:{get:function(){return A}},status:{get:function(){return k}},Categories:{get:function(){return ne}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return m.status===te.PENDING}},isComplete:{get:function(){return m.status===te.COMPLETE}},__plugins:{get:function(){return Object.keys(S)}},isIabContext:{get:function(){return u}}})}function g(e,t){function n(){r=null,e.call(e,new p("The call took longer than you wanted!"))}function i(){r&&(clearTimeout(r),e.apply(e,arguments))}if(void 0===t)return e;var r=setTimeout(n,t);return i}function f(){if(window.__tcfapi)return window.__tcfapi;var e=window;if(e!==window.top){for(var t;!t;){e=e.parent;try{e.frames.__tcfapiLocator&&(t=e)}catch(e){}if(e===window.top)break}if(t){var n={};return window.__tcfapi=function(e,i,r,a){var o=Math.random()+"",s={__tcfapiCall:{command:e,parameter:a,version:i,callId:o}};n[o]=r,t.postMessage(s,"*")},window.addEventListener("message",(function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__tcfapiReturn){var i=t.__tcfapiReturn;"function"==typeof n[i.callId]&&(n[i.callId](i.returnValue,i.success),delete n[i.callId])}}),!1),window.__tcfapi}he.error("__tcfapi not found")}else he.error("__tcfapi not found")}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!0===e.vendor.consents[t],r=n.every((function(t){return!0===e.purpose.consents[t]}));return i&&r}function m(){var e=this;e.name="iabPlugin",e.version="0.0.2";var t,n=se(),i={transparencyAndConsentData:null},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i[e]=t};e.fetchConsentData=function(e){var t=g(e.callback,e.timeout);a({callback:t})},e.isApproved=function(e){var t=e.callback,n=e.category,r=e.timeout;if(i.transparencyAndConsentData)return t(null,_(i.transparencyAndConsentData,ie[n],re[n]));var o=g((function(e,i){t(e,_(i,ie[n],re[n]))}),r);a({category:n,callback:o})},e.onRegister=function(n){t=n;var i=Object.keys(ie),r=function(e,t){!e&&t&&(i.forEach((function(e){var i=_(t,ie[e],re[e]);n[i?"approve":"deny"](e,!0)})),n.complete())};e.fetchConsentData({callback:r})};var a=function(e){var a=e.callback;if(i.transparencyAndConsentData)return a(null,i.transparencyAndConsentData);n.add("FETCH_CONSENT_DATA",a),o((function(e,a){if(a){var o=ye(e),s=t.getMemoizedContent("iabConsentHash"),l=pe(o.tcString).toString(32);o.consentString=e.tcString,o.hasConsentChangedSinceLastCmpPull=s!==l,r("transparencyAndConsentData",o),t.memoizeContent({iabConsentHash:l})}n.execute("FETCH_CONSENT_DATA",[null,i.transparencyAndConsentData])}))},o=function(e){var t=De(ie),n=f();"function"==typeof n&&n("getTCData",2,e,t)}}var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i)for(t in n=arguments[i])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};var y,b,I={MESSAGES:{HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},STATE_KEYS_MAP:{MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},ASYNC_API_MAP:{MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},SYNC_API_MAP:{CUSTOMERIDS:"getCustomerIDs"},ALL_APIS:{MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},FIELDGROUP_TO_FIELD:{MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},FIELDS:{MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},AUTH_STATE:{UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},OPT_OUT:{GLOBAL:"global"},SAME_SITE_VALUES:{LAX:"Lax",STRICT:"Strict",NONE:"None"}},T=I.STATE_KEYS_MAP,S=function(e){function t(){}function n(t,n){var i=this;return function(){var r=e(0,t),a={};return a[t]=r,i.setStateAndPublish(a),n(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var i=this.findField(T.MCMID,e),r=n.call(this,T.MCMID,e);return void 0!==i?i:r()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID((function(t){e({MCMID:t})}))}},k=I.MESSAGES,A=I.ASYNC_API_MAP,E=I.SYNC_API_MAP,C=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(k.GETSTATE),""}}function n(n){this[A[n]]=function(i){i=i||e;var r=this.findField(n,i),a=t.call(this,n,i);return void 0!==r?r:a()}}function i(t){this[E[t]]=function(){return this.findField(t,e)||{}}}Object.keys(A).forEach(n,this),Object.keys(E).forEach(i,this)},w=I.ASYNC_API_MAP,D=function(){Object.keys(w).forEach((function(e){this[w[e]]=function(t){this.callbackRegistry.add(e,t)}}),this)},P=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)};var i=function(){var e=navigator.appName,t=navigator.userAgent;return"Microsoft Internet Explorer"===e||t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0&&t.indexOf("Windows NT 6")>=0};n.getIeVersion=function(){return document.documentMode?document.documentMode:i()?7:null},n.isFirefox=function(e){return!!/Firefox\/([0-9\.]+)(?:\s|$)/.test(e||window.navigator.userAgent)},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),Object.create(null))},n.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}})),M=(P.isObjectEmpty,P.isValueEmpty,P.getIeVersion,P.isFirefox,P.encodeAndBuildRequest,P.isObject,P.defineGlobalNamespace,P.pluck,P.parseOptOut,P.normalizeBoolean,n),O=I.MESSAGES,N={0:"prefix",1:"orgID",2:"state"},L=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach((function(e,n){void 0!==e&&(t[N[n]]=2!==n?e:JSON.parse(e))})),t}catch(e){}},this.isInvalid=function(n){var i=this.parse(n);if(!i||Object.keys(i).length<2)return!0;var r=e!==i.orgID,a=!t||n.origin!==t,o=-1===Object.keys(O).indexOf(i.prefix);return r||a||o},this.send=function(n,i,r){var a=i+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{n.postMessage(a,t)}catch(e){}}},R=I.MESSAGES,x=function(e,t,n,i){function r(e){Object.assign(h,e)}function a(e){Object.assign(h.state,e),Object.assign(h.state.ALLFIELDS,e),h.callbackRegistry.executeAll(h.state)}function o(e){if(!_.isInvalid(e)){f=!1;var t=_.parse(e);h.setStateAndPublish(t.state)}}function s(e){!f&&g&&(f=!0,_.send(i,e))}function l(){r(new S(n._generateID)),h.getMarketingCloudVisitorID(),h.callbackRegistry.executeAll(h.state,!0),v.removeEventListener("message",c)}function c(e){if(!_.isInvalid(e)){var t=_.parse(e);f=!1,v.clearTimeout(h._handshakeTimeout),v.removeEventListener("message",c),r(new C(h)),
v.addEventListener("message",o),h.setStateAndPublish(t.state),h.callbackRegistry.hasCallbacks()&&s(R.GETSTATE)}}function u(){g&&postMessage?(v.addEventListener("message",c),s(R.HANDSHAKE),h._handshakeTimeout=setTimeout(l,250)):l()}function d(){v.s_c_in||(v.s_c_il=[],v.s_c_in=0),h._c="Visitor",h._il=v.s_c_il,h._in=v.s_c_in,h._il[h._in]=h,v.s_c_in++}function p(){function e(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(h[e]=function(){})}Object.keys(n).forEach(e),h.getSupplementalDataID=n.getSupplementalDataID,h.isAllowed=function(){return!0}}var h=this,g=t.whitelistParentDomain;h.state={ALLFIELDS:{}},h.version=n.version,h.marketingCloudOrgID=e,h.cookieDomain=n.cookieDomain||"",h._instanceType="child";var f=!1,_=new L(e,g);h.callbackRegistry=M(),h.init=function(){d(),p(),r(new D(h)),u()},h.findField=function(e,t){if(void 0!==h.state[e])return t(h.state[e]),h.state[e]},h.messageParent=s,h.setStateAndPublish=a},j=I.MESSAGES,V=I.ALL_APIS,F=I.ASYNC_API_MAP,B=I.FIELDGROUP_TO_FIELD,U=function(e,t){function n(){var t={};return Object.keys(V).forEach((function(n){var i=V[n],r=e[i]();P.isValueEmpty(r)||(t[n]=r)})),t}function i(){var t=[];return e._loading&&Object.keys(e._loading).forEach((function(n){if(e._loading[n]){var i=B[n];t.push(i)}})),t.length?t:null}function r(t){return function n(){var r=i();if(r){var a=F[r[0]];e[a](n,!0)}else t()}}function a(e,i){var r=n();t.send(e,i,r)}function o(e){l(e),a(e,j.HANDSHAKE)}function s(e){r((function(){a(e,j.PARENTSTATE)}))()}function l(n){function i(i){r.call(e,i),t.send(n,j.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=i}return function(e){t.isInvalid(e)||(t.parse(e).prefix===j.HANDSHAKE?o:s)(e.source)}},H=function(e,t){function n(e){return function(n){i[e]=n,++r===a&&t(i)}}var i={},r=0,a=Object.keys(e).length;Object.keys(e).forEach((function(t){var i=e[t];if(i.fn){var r=i.args||[];r.unshift(n(t)),i.fn.apply(i.context||null,r)}}))},q={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var r=i(n,"cookieLifetime"),a=i(n,"expires"),o=i(n,"domain"),s=i(n,"secure"),l=i(n,"sameSite"),c=s?"Secure":"",u=l?"SameSite="+l+";":"";if(a&&"SESSION"!==r&&"NONE"!==r){var d=""!==t?parseInt(r||0,10):-60;if(d)(a=new Date).setTime(a.getTime()+1e3*d);else if(1===a){var p=(a=new Date).getYear();a.setYear(p+2+(p<1900?1900:0))}}else a=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(a?" expires="+a.toGMTString()+";":"")+(o?" domain="+o+";":"")+u+c,this.get(e)===t):0},remove:function(e,t){var n=i(t,"domain");n=n?" domain="+n+";":"";var r=i(t,"secure"),a=i(t,"sameSite"),o=r?"Secure":"",s=a?"SameSite="+a+";":"";document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+n+s+o}},Y=function(e,t){!e&&v.location&&(e=v.location.hostname);var n,i=e.split("."),r=t||{};for(n=i.length-2;n>=0;n--)if(r.domain=i.slice(n).join("."),q.set("TEST_AMCV_COOKIE_WRITE","cookie",r))return q.remove("TEST_AMCV_COOKIE_WRITE",r),r.domain;return""},G={compare:s,isLessThan:function(e,t){return s(e,t)<0},areVersionsDifferent:function(e,t){return 0!==s(e,t)},isGreaterThan:function(e,t){return s(e,t)>0},isEqual:function(e,t){return 0===s(e,t)}},K=!!v.postMessage,W={postMessage:function(e,t,n){var i=1;t&&(K?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},receiveMessage:function(e,t){var n;try{K&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;e(n)}),v.addEventListener?v[e?"addEventListener":"removeEventListener"]("message",n):v[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}}},z=function(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10,c=(""+Date.now()).substr(-6).split("").reverse("").join("");if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*o),4>t&&c[t]<o&&(n=+c[t]),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;19>t;t++)n=Math.floor(Math.random()*s),6>t&&c[t]<s?(r+=c[t],n=c[t]):r+=i.substring(n,n+1),0===t&&9==n?s=3:((1==t||2==t)&&10!=s&&2>n||2<t)&&(s=10),n=Math.floor(Math.random()*l),a+=i.substring(n,n+1),0===t&&9==n?l=3:((1==t||2==t)&&10!=l&&2>n||2<t)&&(l=10);return r+a},Q=function(e){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(v.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new v[this.corsMetadata.corsType]},fireCORS:function(t,n){function i(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void r.handleCORSError(t,null,"Response is not JSON")}catch(e){return void r.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var i=t.callback,a=v,o=0;o<i.length;o++)a=a[i[o]];a(n)}catch(e){r.handleCORSError(t,e,"Error forming callback function")}}var r=this;n&&(t.loadErrorHandler=n);try{var a=this.getCORSInstance();a.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(a.withCredentials=!0,a.timeout=e.loadTimeout,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4===this.readyState&&200===this.status&&i(this.responseText)}),a.onerror=function(e){r.handleCORSError(t,e,"onerror")},a.ontimeout=function(e){r.handleCORSError(t,e,"ontimeout")},a.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,n,i){e.CORSErrors.push({corsData:t,error:n,description:i}),t.loadErrorHandler&&("ontimeout"===i?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},J={POST_MESSAGE_ENABLED:!!v.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},$=function(e,t){var n=v.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:J.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(r=n.createElement("iframe")).sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=i.id,r.name=i.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(r)}function t(e){r.addEventListener("load",(function(){r.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.fireIframeLoadedCallbacks(e),i.requestToProcess()}))}this.startedAttachingIframe=!0;var i=this,r=n.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach((function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})})),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var i,r=this;if(t===Object(t)&&t.ibs)if(i=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,o,s,l=!1;for(a=0,o=this.jsonForComparison.length;a<o;a++)if(s=this.jsonForComparison[a],i===JSON.stringify(s.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):n()}else n();if((this.receivedThirdPartyCookiesNotification||!J.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout((function(){r.messageSendingInterval=J.POST_MESSAGE_ENABLED?null:150}),this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,n){var i=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return i?r&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",r),parseInt(i,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),i=r)):(i=r)&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)(r=t[i]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),P.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,i){var r="syncOnPage"===i,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,s,l=e._getField(a),c=!1,u=!1,d=Math.ceil((new Date).getTime()/J.MILLIS_PER_DAY);l?(o=l.split("*"),c=(s=this.pruneSyncData(o,t.id,d)).dataPresent,u=s.dataValid,c&&u||this.fireSync(r,t,n,o,a,d)):(o=[],this.fireSync(r,t,n,o,a,d))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):n>=a&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort((function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)}));e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,i,r,a,o){var s=this;if(t){if("img"===n.tag){var l,c,u,d,p=n.url,h=e.loadSSL?"https:":"http:";for(l=0,c=p.length;l<c;l++){u=p[l],d=/^\/\//.test(u);var g=new Image;g.addEventListener("load",function(t,n,i,r){return function(){s.onPagePixels[t]=null,e._readVisitor();var o,l,c,u,d=e._getField(a),p=[];if(d)for(l=0,c=(o=d.split("*")).length;l<c;l++)(u=o[l]).match("^"+n.id+"-")||p.push(u);s.setSyncTrackingData(p,n,i,r)}}(this.onPagePixels.length,n,a,o)),g.src=(d?h:"")+u,this.onPagePixels.push(g)}}}else this.addMessage(i),this.setSyncTrackingData(r,n,a,o)},addMessage:function(t){var n=encodeURIComponent(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((J.POST_MESSAGE_ENABLED?"":n)+t)},setSyncTrackingData:function(t,n,i,r){t.push(n.id+"-"+(r+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?J.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout((function(){t.sendMessages()}),this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){W.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(n,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===n.readyState||"loaded"===n.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>J.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(n.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},X={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{type:"boolean"},disableThirdPartyCalls:{type:"boolean"},discardTrackingServerECID:{type:"boolean"},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{type:"boolean"},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{type:"boolean"},disableThirdPartyCookies:{type:"boolean"},idSyncDisableSyncs:{type:"boolean"},disableIdSyncs:{type:"boolean"},idSyncIDCallResult:{},idSyncSSLUseAkamai:{type:"boolean"},isCoopSafe:{type:"boolean"},isIabContext:{type:"boolean"},isOptInStorageEnabled:{type:"boolean"},loadSSL:{type:"boolean"},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{type:"boolean"},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{type:"boolean"},sameSiteCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},useLocalStorage:{type:"boolean"},whitelistIframeDomains:{},whitelistParentDomain:{}},Z={getConfigNames:function(){return Object.keys(X)},getConfigs:function(){return X},normalizeConfig:function(e,t){return X[e]&&"boolean"===X[e].type?"function"!=typeof t?t:t():t}},ee=function(e){var t={};return e.on=function(e,n,i){if(!n||"function"!=typeof n)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:n,context:i})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},e.off=function(e,n){t.hasOwnProperty(e)&&(t[e]=t[e].filter((function(e){if(e.callback!==n)return e})))},e.publish=function(e){if(t.hasOwnProperty(e)){var n=[].slice.call(arguments,1);t[e].slice(0).forEach((function(e){e.callback.apply(e.context,n)}))}},e.publish},te={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},ne={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",MEDIA_ANALYTICS:"mediaaa"},ie=(t(y={},ne.AAM,565),t(y,ne.ECID,565),y),re=(t(b={},ne.AAM,[1,10]),t(b,ne.ECID,[1,10]),b),ae=["videoaa","iabConsentHash"],oe=function(e){return Object.keys(e).map((function(t){return e[t]}))}(ne),se=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,n){if(!c(n))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var i=e.callbacks[t].push(n)-1;return function(){e.callbacks[t].splice(i,1)}},e.execute=function(t,n){if(e.callbacks[t]){n=(n=void 0===n?[]:n)instanceof Array?n:[n];try{for(;e.callbacks[t].length;){var i=e.callbacks[t].shift();"function"==typeof i?i.apply(null,n):i instanceof Array&&i[1].apply(i[0],n)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,n){(n||t&&!l(t))&&Object.keys(e.callbacks).forEach((function(n){var i=void 0!==t[n]?t[n]:"";e.execute(n,i)}),e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},le=function(){},ce=function(e){var t=window.console;return!!t&&"function"==typeof t[e]},ue=function(e,t,n){return n()?function(){if(ce(e)){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console[e].apply(console,[t].concat(i))}}:le},de=u,pe=function(){for(var e=[],t=0;t<256;t++){for(var n=t,i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;e.push(n)}return function(t,n){t=unescape(encodeURIComponent(t)),n||(n=0),n^=-1;for(var i=0;i<t.length;i++){var r=255&(n^t.charCodeAt(i));n=n>>>8^e[r]}return(n^=-1)>>>0}}(),he=new de("[ADOBE OPT-IN]"),ge=function(t,n){return e(t)===n},fe=function(e,t){return e instanceof Array?e:ge(e,"string")?[e]:t||[]},_e=function(e){var t=Object.keys(e);return!!t.length&&t.every((function(t){return!0===e[t]}))},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(!e||be(e))&&fe(e).every((function(e){return oe.indexOf(e)>-1||t&&ae.indexOf(e)>-1}))},ve=function(e,t){return e.reduce((function(e,n){return e[n]=t,e}),{})},ye=function(e){return JSON.parse(JSON.stringify(e))},be=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},Ie=function(e){if(ke(e))return e;try{return JSON.parse(e)}catch(e){return{}}},Te=function(e){return void 0===e||(ke(e)?me(Object.keys(e),!0):Se(e))},Se=function(e){try{var t=JSON.parse(e);return!!e&&ge(e,"string")&&me(Object.keys(t),!0)}catch(e){return!1}},ke=function(e){return null!==e&&ge(e,"object")&&!1===Array.isArray(e)},Ae=function(){},Ee=function(e){return ge(e,"function")?e():e},Ce=function(e,t){Te(e)||he.error("".concat(t))},we=function(e){return Object.keys(e).map((function(t){return e[t]}))},De=function(e){return we(e).filter((function(e,t,n){return n.indexOf(e)===t}))},Pe=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,i=t.params,r=void 0===i?{}:i,a=t.callback,o=void 0===a?Ae:a;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var s=n.split("."),l=e[s[0]],c=s[1];if(!l||"function"!=typeof l[c])throw new Error("Make sure the plugin and API name exist.");var u=Object.assign(r,{callback:o});l[c].call(l,u)}catch(e){he.error("[execute] Something went wrong: "+e.message)}}};p.prototype=Object.create(Error.prototype),p.prototype.constructor=p;var Me="fetchPermissions",Oe="[OptIn#registerPlugin] Plugin is invalid.";h.Categories=ne,h.TimeoutError=p;var Ne=Object.freeze({OptIn:h,IabPlugin:m}),Le=function(e,t){e.publishDestinations=function(n){var i=arguments[1],r=arguments[2];try{r="function"==typeof r?r:n.callback}catch(e){r=function(){}}var a=t;if(a.readyToAttachIframePreliminary()){if("string"==typeof n){if(!n.length)return void r({error:"subdomain is not a populated string."});if(!(i instanceof Array&&i.length))return void r({error:"messages is not a populated array."});var o=!1;if(i.forEach((function(e){"string"==typeof e&&e.length&&(a.addMessage(e),o=!0)})),!o)return void r({error:"None of the messages are populated strings."})}else{if(!P.isObject(n))return void r({error:"Invalid parameters passed."});var s=n;if("string"!=typeof(n=s.subdomain)||!n.length)return void r({error:"config.subdomain is not a populated string."});var l=s.urlDestinations;if(!(l instanceof Array&&l.length))return void r({error:"config.urlDestinations is not a populated array."});var c=[];l.forEach((function(e){P.isObject(e)&&(e.hideReferrer?e.message&&a.addMessage(e.message):c.push(e))})),function e(){c.length&&setTimeout((function(){var t=new Image,n=c.shift();t.src=n.url,a.onPageDestinationsFired.push(n),e()}),100)}()}a.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),a.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(a.subdomain=n,a.doAttachIframe=!0,a.url=a.getUrl(),a.readyToAttachIframe()?(a.iframeLoadedCallbacks.push((function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})})),a.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):a.iframeLoadedCallbacks.push((function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})}))}else r({error:"The destination publishing iframe is disabled in the Visitor library."})}},Re=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",l=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||[],p=d.length,h={},g=2;p<64;g++)if(!h[g]){for(i=0;i<313;i+=g)h[i]=g;u[p]=a(g,.5)*o|0,d[p++]=a(g,1/3)*o|0}for(t+="\x80";t.length%64-56;)t+="\0";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;l[i>>2]|=r<<(3-i)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,r=0;r<l.length;){var f=l.slice(r,r+=16),_=u;for(u=u.slice(0,8),i=0;i<64;i++){var m=f[i-15],v=f[i-2],y=u[0],b=u[4],I=u[7]+(n(b,6)^n(b,11)^n(b,25))+(b&u[5]^~b&u[6])+d[i]+(f[i]=i<16?f[i]:f[i-16]+(n(m,7)^n(m,18)^m>>>3)+f[i-7]+(n(v,17)^n(v,19)^v>>>10)|0);(u=[I+((n(y,2)^n(y,13)^n(y,22))+(y&u[1]^y&u[2]^u[1]&u[2]))|0].concat(u))[4]=u[4]+I|0}for(i=0;i<8;i++)u[i]=u[i]+_[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var T=u[i]>>8*r&255;s+=(T<16?0:"")+T.toString(16)}return s},xe=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=Re(e)),e},je=function(e){return String(e).trim().toLowerCase()},Ve=Ne.OptIn;P.defineGlobalNamespace(),window.adobe.OptInCategories=Ve.Categories;var Fe=function(t,n,i){function r(){y._customerIDsHashChanged=!1}function a(e){var t=e;return function(e){var n=e||E.location.href;try{var i=y._extractParamFromUri(n,t);if(i)return te.parsePipeDelimetedKeyValues(i)}catch(e){}}}function o(e){function t(e,t,n){e&&e.match(J.VALID_VISITOR_ID_REGEX)&&(n===O&&(A=!0),t(e))}t(e[O],y.setMarketingCloudVisitorID,O),y._setFieldExpire(V,-1),t(e[x],y.setAnalyticsVisitorID)}function s(e){e=e||{},y._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",y._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},y._supplementalDataIDLast=e.supplementalDataIDLast||"",y._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function l(e){function t(e,t,n){return(n=n?n+="|":n)+(e+"=")+encodeURIComponent(t)}function n(e,n){var i=n[0],r=n[1];return null!=r&&r!==F&&(e=t(i,r,e)),e}return function(e){return(e=e?e+="|":e)+"TS="+te.getTimestampInSeconds()}(e.reduce(n,""))}function c(e){var t=e.minutesToLive,n="";return(y.idSyncDisableSyncs||y.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}function u(){return!(!y.configs.doesOptInApply||b.optIn.isComplete&&d())}function d(){return y.configs.doesOptInApply&&y.configs.isIabContext?b.optIn.isApproved(b.optIn.Categories.ECID)&&k:b.optIn.isApproved(b.optIn.Categories.ECID)}function p(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["syncIdentity",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach((function(e){var t=e[0],n=2===e.length?e[1]:"",i=y[t];y[t]=function(e){return d()&&y.isAllowed()?i.apply(y,arguments):("function"==typeof e&&y._callCallback(e,[n]),n)}}))}function h(){var e=y._getAudienceManagerURLData(),t=e.url;return y._loadData(M,t,null,e)}function g(e,t){if(k=!0,e)throw new Error("[IAB plugin] : "+e);t&&t.gdprApplies&&(T=t.consentString,S=t.hasConsentChangedSinceLastCmpPull?1:0),h(),m()}function f(e,t){if(k=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(T=t.consentString,S=t.hasConsentChangedSinceLastCmpPull?1:0),y.init(),m()}function _(){b.optIn.isComplete&&(b.optIn.isApproved(b.optIn.Categories.ECID)?y.configs.isIabContext?b.optIn.execute({command:"iabPlugin.fetchConsentData",callback:f}):(y.init(),m()):y.configs.isIabContext?b.optIn.execute({command:"iabPlugin.fetchConsentData",callback:g}):(p(),m()))}function m(){b.optIn.off("complete",_)}if(!i||i.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var y=this,b=window.adobe,T="",S=0,k=!1,A=!1;y.version="5.5.0";var E=v,C=E.Visitor;C.version=y.version,C.AuthState=I.AUTH_STATE,C.OptOut=I.OPT_OUT,E.s_c_in||(E.s_c_il=[],E.s_c_in=0),y._c="Visitor",y._il=E.s_c_il,y._in=E.s_c_in,y._il[y._in]=y,E.s_c_in++,y._instanceType="regular",y._log={requests:[]},y.marketingCloudOrgID=t,y.cookieName="AMCV_"+t,y.sessionCookieName="AMCVS_"+t;var w={};n&&n.secureCookie&&n.sameSiteCookie&&(w={sameSite:n.sameSiteCookie,secure:n.secureCookie}),y.cookieDomain=y.useLocalStorage?"":Y(null,w),y.loadSSL=!0,y.loadTimeout=3e4,y.CORSErrors=[],y.marketingCloudServer=y.audienceManagerServer="dpm.demdex.net",y.sdidParamExpiry=30;var D=null,M="MC",O="MCMID",N="MCIDTS",R="A",x="MCAID",j="AAM",V="MCAAMB",F="NONE",B=function(e){return!Object.prototype[e]},K=Q(y);y.FIELDS=I.FIELDS,y.cookieRead=function(e){return y.useLocalStorage?e===y.sessionCookieName?sessionStorage.getItem(e):localStorage.getItem(e):q.get(e)},y.cookieWrite=function(e,t,n){var i=""+t;if(y.useLocalStorage)return e===y.sessionCookieName?sessionStorage.setItem(e,i):localStorage.setItem(e,i);var r=y.cookieLifetime?(""+y.cookieLifetime).toUpperCase():"",a={expires:n,domain:y.cookieDomain,cookieLifetime:r};return y.configs&&y.configs.secureCookie&&"https:"===location.protocol&&(a.secure=!0),y.configs&&y.configs.sameSiteCookie&&"https:"===location.protocol&&(a.sameSite=I.SAME_SITE_VALUES[y.configs.sameSiteCookie.toUpperCase()]||"Lax"),q.set(e,i,a)},y.removeCookie=function(e){if(y.useLocalStorage)return e===y.sessionCookieName?sessionStorage.removeItem(e):localStorage.removeItem(e);var t={domain:y.cookieDomain};return y.configs&&y.configs.secureCookie&&"https:"===location.protocol&&(t.secure=!0),y.configs&&y.configs.sameSiteCookie&&"https:"===location.protocol&&(t.sameSite=I.SAME_SITE_VALUES[y.configs.sameSiteCookie.toUpperCase()]||"Lax"),q.remove(e,t)},y.resetState=function(e){e?y._mergeServerState(e):s()},y._isAllowedDone=!1,y._isAllowedFlag=!1,y.isAllowed=function(){return y._isAllowedDone||(y._isAllowedDone=!0,(y.cookieRead(y.cookieName)||y.cookieWrite(y.cookieName,"T",1))&&(y._isAllowedFlag=!0)),"T"===y.cookieRead(y.cookieName)&&y.removeCookie(y.cookieName),y._isAllowedFlag},y.setMarketingCloudVisitorID=function(e){y._setMarketingCloudFields(e)},y._use1stPartyMarketingCloudServer=!1,y.getMarketingCloudVisitorID=function(e,t){y.marketingCloudServer&&y.marketingCloudServer.indexOf(".demdex.net")<0&&(y._use1stPartyMarketingCloudServer=!0);var n=y._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return y._getRemoteField(O,i,e,t,n)};var X=function(e,t){var n={};y.getMarketingCloudVisitorID((function(){t.forEach((function(e){n[e]=y._getField(e,!0)})),-1!==t.indexOf("MCOPTOUT")?y.isOptedOut((function(t){n.MCOPTOUT=t,e(n)}),null,!0):e(n)}),!0)};y.getVisitorValues=function(e,t){var n={MCMID:{fn:y.getMarketingCloudVisitorID,args:[!0],context:y},MCOPTOUT:{fn:y.isOptedOut,args:[void 0,!0],context:y},MCAID:{fn:y.getAnalyticsVisitorID,args:[!0],context:y},MCAAMLH:{fn:y.getAudienceManagerLocationHint,args:[!0],context:y},MCAAMB:{fn:y.getAudienceManagerBlob,args:[!0],context:y}},i=t&&t.length?P.pluck(n,t):n;t&&-1===t.indexOf("MCAID")?X(e,t):H(i,e)},y._currentCustomerIDs={},y._customerIDsHashChanged=!1,y._newCustomerIDsHash="",y.setCustomerIDs=function(t,n){if(!y.isOptedOut()&&t){if(!P.isObject(t)||P.isObjectEmpty(t))return!1;var i,a,o,s;for(i in y._readVisitor(),t)if(B(i)&&(y._currentCustomerIDs.dataSources=y._currentCustomerIDs.dataSources||{},n=(a=t[i]).hasOwnProperty("hashType")?a.hashType:n,a))if("object"===e(a)){var l={};if(a.id){if(n){if(!(s=xe(je(a.id),n)))return;a.id=s,l.hashType=n}l.id=a.id}null!=a.authState&&(l.authState=a.authState),y._currentCustomerIDs.dataSources[i]=l}else if(n){if(!(s=xe(je(a),n)))return;y._currentCustomerIDs.dataSources[i]={id:s,hashType:n}}else y._currentCustomerIDs.dataSources[i]={id:a};var c=y.getCustomerIDs(!0),u=y._getField("MCCIDH"),d="";for(o in u||(u=0),c){var p=c[o];if(!P.isObjectEmpty(p))for(i in p)B(i)&&(d+=(d?"|":"")+i+"|"+((a=p[i]).id?a.id:"")+(a.authState?a.authState:""))}y._newCustomerIDsHash=String(y._hash(d)),y._newCustomerIDsHash!==u&&(y._customerIDsHashChanged=!0,y._mapCustomerIDs(r))}},y.syncIdentity=function(t,n){if(!y.isOptedOut()&&t){if(!P.isObject(t)||P.isObjectEmpty(t))return!1;var i,a,o,s,l;for(i in y._readVisitor(),t)if(B(i)&&(y._currentCustomerIDs.nameSpaces=y._currentCustomerIDs.nameSpaces||{},n=(a=t[i]).hasOwnProperty("hashType")?a.hashType:n,a&&"object"===e(a))){var c={};if(a.id){if(n){if(!(o=xe(je(a.id),n)))return;a.id=o,c.hashType=n}c.id=a.id}null!=a.authState&&(c.authState=a.authState),a.dataSource&&(y._currentCustomerIDs.dataSources=y._currentCustomerIDs.dataSources||{},s=a.dataSource,y._currentCustomerIDs.dataSources[s]=c),y._currentCustomerIDs.nameSpaces[i]=c}var u=y.getCustomerIDs(!0),d=y._getField("MCCIDH"),p="";for(l in d||(d="0"),u){var h=u[l];if(!P.isObjectEmpty(h))for(i in h)B(i)&&(p+=(p?"|":"")+i+"|"+((a=h[i]).id?a.id:"")+(a.authState?a.authState:""))}y._newCustomerIDsHash=String(y._hash(p)),y._newCustomerIDsHash!==d&&(y._customerIDsHashChanged=!0,y._mapCustomerIDs(r))}},y.getCustomerIDs=function(e){y._readVisitor();var t,n,i={dataSources:{},nameSpaces:{}},r=y._currentCustomerIDs.dataSources;for(t in r)B(t)&&(n=r[t]).id&&(i.dataSources[t]||(i.dataSources[t]={}),i.dataSources[t].id=n.id,null!=n.authState?i.dataSources[t].authState=n.authState:i.dataSources[t].authState=C.AuthState.UNKNOWN,n.hashType&&(i.dataSources[t].hashType=n.hashType));var a=y._currentCustomerIDs.nameSpaces;for(t in a)B(t)&&(n=a[t]).id&&(i.nameSpaces[t]||(i.nameSpaces[t]={}),i.nameSpaces[t].id=n.id,null!=n.authState?i.nameSpaces[t].authState=n.authState:i.nameSpaces[t].authState=C.AuthState.UNKNOWN,n.hashType&&(i.nameSpaces[t].hashType=n.hashType));return e?i:i.dataSources},y.setAnalyticsVisitorID=function(e){y._setAnalyticsFields(e)},y.getAnalyticsVisitorID=function(e,t,n){if(!te.isTrackingServerPopulated()&&!n)return y._callCallback(e,[""]),"";var i="";if(n||(i=y.getMarketingCloudVisitorID((function(){y.getAnalyticsVisitorID(e,!0)}))),i||n){var r=n?y.marketingCloudServer:y.trackingServer,a="";y.loadSSL&&(n?y.marketingCloudServerSecure&&(r=y.marketingCloudServerSecure):y.trackingServerSecure&&(r=y.trackingServerSecure));var o={};if(r){
var s="http"+(y.loadSSL?"s":"")+"://"+r+"/id",l=y.configs.cookieLifetime,c="d_visid_ver="+y.version+"&mcorgid="+encodeURIComponent(y.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(l?"&cl="+encodeURIComponent(l):"")+(y.idSyncDisable3rdPartySyncing||y.disableThirdPartyCookies?"&d_coppa=true":""),u=["s_c_il",y._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+c+"&callback=s_c_il%5B"+y._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+c,o.callback=u}return o.url=a,y._getRemoteField(n?O:x,a,e,t,o)}return""},y.getAudienceManagerLocationHint=function(e,t){if(y.getMarketingCloudVisitorID((function(){y.getAudienceManagerLocationHint(e,!0)}))){var n=y._getField(x);if(!n&&te.isTrackingServerPopulated()&&(n=y.getAnalyticsVisitorID((function(){y.getAudienceManagerLocationHint(e,!0)}))),n||!te.isTrackingServerPopulated()){var i=y._getAudienceManagerURLData(),r=i.url;return y._getRemoteField("MCAAMLH",r,e,t,i)}}return""},y.getLocationHint=y.getAudienceManagerLocationHint,y.getAudienceManagerBlob=function(e,t){if(y.getMarketingCloudVisitorID((function(){y.getAudienceManagerBlob(e,!0)}))){var n=y._getField(x);if(!n&&te.isTrackingServerPopulated()&&(n=y.getAnalyticsVisitorID((function(){y.getAudienceManagerBlob(e,!0)}))),n||!te.isTrackingServerPopulated()){var i=y._getAudienceManagerURLData(),r=i.url;return y._customerIDsHashChanged&&y._setFieldExpire(V,-1),y._getRemoteField(V,r,e,t,i)}}return""},y._supplementalDataIDCurrent="",y._supplementalDataIDCurrentConsumed={},y._supplementalDataIDLast="",y._supplementalDataIDLastConsumed={},y.getSupplementalDataID=function(e,t){y._supplementalDataIDCurrent||t||(y._supplementalDataIDCurrent=y._generateID(1));var n=y._supplementalDataIDCurrent;return y._supplementalDataIDLast&&!y._supplementalDataIDLastConsumed[e]?(n=y._supplementalDataIDLast,y._supplementalDataIDLastConsumed[e]=!0):n&&(y._supplementalDataIDCurrentConsumed[e]&&(y._supplementalDataIDLast=y._supplementalDataIDCurrent,y._supplementalDataIDLastConsumed=y._supplementalDataIDCurrentConsumed,y._supplementalDataIDCurrent=n=t?"":y._generateID(1),y._supplementalDataIDCurrentConsumed={}),n&&(y._supplementalDataIDCurrentConsumed[e]=!0)),n};var Z=!1;y._liberatedOptOut=null,y.getOptOut=function(e,t){var n=y._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(d())return y._getRemoteField("MCOPTOUT",i,e,t,n);if(y._registerCallback("liberatedOptOut",e),null!==y._liberatedOptOut)return y._callAllCallbacks("liberatedOptOut",[y._liberatedOptOut]),Z=!1,y._liberatedOptOut;if(Z)return null;Z=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/\.demdex\.net\/id\?/,".demdex.net/optOutStatus?"),n.callback=[r],v[r]=function(e){if(e===Object(e)){var t,n,i=P.parseOptOut(e,t,F);t=i.optOut,n=1e3*i.d_ottl,y._liberatedOptOut=t,setTimeout((function(){y._liberatedOptOut=null}),n)}y._callAllCallbacks("liberatedOptOut",[t]),Z=!1},K.fireCORS(n),null},y.isOptedOut=function(e,t,n){t||(t=C.OptOut.GLOBAL);var i=y.getOptOut((function(n){var i=n===C.OptOut.GLOBAL||n.indexOf(t)>=0;y._callCallback(e,[i])}),n);return i?i===C.OptOut.GLOBAL||i.indexOf(t)>=0:null};var ee={subscribed:!1,callbacks:[]};y.onReceiveEcid=function(e){if(d())return y.getMarketingCloudVisitorID(e,!0);ee.subscribed=!0,e&&"function"==typeof e&&ee.callbacks.push(e)},y._fields=null,y._fieldsExpired=null,y._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},y._generateID=z,y._generateLocalMID=function(){var e=y._generateID(0);return re.isClientSideMarketingCloudVisitorID=!0,e},y._callbackList=null,y._callCallback=function(e,t){try{"function"==typeof e?e.apply(E,t):e[1].apply(e[0],t)}catch(e){}},y._registerCallback=function(e,t){t&&(null==y._callbackList&&(y._callbackList={}),null==y._callbackList[e]&&(y._callbackList[e]=[]),y._callbackList[e].push(t))},y._callAllCallbacks=function(e,t){if(null!=y._callbackList){var n=y._callbackList[e];if(n)for(;n.length>0;)y._callCallback(n.shift(),t)}},y._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),a=te.parseHash(e),o=te.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),l=s[0]+"?",c=s[1];return l+te.addQueryParamAtLocation(c,r,i)+a},y._extractParamFromUri=function(e,t){var n=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(n&&n.length)return decodeURIComponent(n[1])},y._parseAdobeMcFromUrl=a(J.ADOBE_MC),y._parseAdobeMcSdidFromUrl=a(J.ADOBE_MC_SDID),y._attemptToPopulateSdidFromUrl=function(e){var n=y._parseAdobeMcSdidFromUrl(e),i=1e9;n&&n.TS&&(i=te.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&i<y.sdidParamExpiry&&(y._supplementalDataIDCurrent=n.SDID,y._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},y._attemptToPopulateIdsFromUrl=function(){var e=y._parseAdobeMcFromUrl();if(e&&e.TS){var n=te.getTimestampInSeconds()-e.TS;if(Math.floor(n/60)>J.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;o(e)}},y._mergeServerState=function(e){if(e)try{if((e=function(e){return te.isObject(e)?e:JSON.parse(e)}(e))[y.marketingCloudOrgID]){var t=e[y.marketingCloudOrgID];!function(e){te.isObject(e)&&y.setCustomerIDs(e)}(t.customerIDs),s(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},y._timeout=null,y._loadData=function(e,t,n,i){t=y._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=y._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=y._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),re.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===K.corsMetadata.corsType&&K.fireCORS(i,n,e)},y._clearTimeout=function(e){null!=y._timeout&&y._timeout[e]&&(clearTimeout(y._timeout[e]),y._timeout[e]=0)},y._settingsDigest=0,y._getSettingsDigest=function(){if(!y._settingsDigest){var e=y.version;y.audienceManagerServer&&(e+="|"+y.audienceManagerServer),y.audienceManagerServerSecure&&(e+="|"+y.audienceManagerServerSecure),y._settingsDigest=y._hash(e)}return y._settingsDigest},y._readVisitorDone=!1,y._readVisitor=function(){if(!y._readVisitorDone){y._readVisitorDone=!0;var e,t,n,i,r,a,o=y._getSettingsDigest(),s=!1,l=y.cookieRead(y.cookieName),c=new Date;if(l||A||y.discardTrackingServerECID||(l=y.cookieRead(J.FIRST_PARTY_SERVER_COOKIE)),null==y._fields&&(y._fields={}),l&&"T"!==l)for((l=l.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(s=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)n=(t=l[e].split("-"))[0],i=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),s&&("MCCIDH"===n&&(i=""),r>0&&(r=c.getTime()/1e3-60)),n&&i&&(y._setField(n,i,1),r>0&&(y._fields["expire"+n]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!y.cookieRead(y.sessionCookieName))&&(y._fieldsExpired||(y._fieldsExpired={}),y._fieldsExpired[n]=!0)));!y._getField(x)&&te.isTrackingServerPopulated()&&(l=y.cookieRead("s_vi"))&&(l=l.split("|")).length>1&&l[0].indexOf("v1")>=0&&((e=(i=l[1]).indexOf("["))>=0&&(i=i.substring(0,e)),i&&i.match(J.VALID_VISITOR_ID_REGEX)&&y._setField(x,i))}},y._appendVersionTo=function(e){var t="vVersion|"+y.version,n=e?y._getCookieVersion(e):null;return n?G.areVersionsDifferent(n,y.version)&&(e=e.replace(J.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},y._writeVisitor=function(){var e,t,n=y._getSettingsDigest();for(e in y._fields)B(e)&&y._fields[e]&&"expire"!==e.substring(0,6)&&(t=y._fields[e],n+=(n?"|":"")+e+(y._fields["expire"+e]?"-"+y._fields["expire"+e]:"")+"|"+t);n=y._appendVersionTo(n),y.cookieWrite(y.cookieName,n,1)},y._getField=function(e,t){return null==y._fields||!t&&y._fieldsExpired&&y._fieldsExpired[e]?null:y._fields[e]},y._setField=function(e,t,n){null==y._fields&&(y._fields={}),y._fields[e]=t,n||y._writeVisitor()},y._getFieldList=function(e,t){var n=y._getField(e,t);return n?n.split("*"):null},y._setFieldList=function(e,t,n){y._setField(e,t?t.join("*"):"",n)},y._getFieldMap=function(e,t){var n=y._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},y._setFieldMap=function(e,t,n){var i,r=null;if(t)for(i in r=[],t)B(i)&&(r.push(i),r.push(t[i]));y._setFieldList(e,r,n)},y._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==y._fields&&(y._fields={}),y._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(y._fieldsExpired||(y._fieldsExpired={}),y._fieldsExpired[e]=!0):y._fieldsExpired&&(y._fieldsExpired[e]=!1),n&&(y.cookieRead(y.sessionCookieName)||y.cookieWrite(y.sessionCookieName,"1"))},y._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=F),t&&(t===F||t.match(J.VALID_VISITOR_ID_REGEX))||(t="")),t},y._setFields=function(t,n){if(y._clearTimeout(t),null!=y._loading&&(y._loading[t]=!1),re.fieldGroupObj[t]&&re.setState(t,!1),t===M){!0!==re.isClientSideMarketingCloudVisitorID&&(re.isClientSideMarketingCloudVisitorID=!1);var i=y._getField(O);if(!i||y.overwriteCrossDomainMCIDAndAID){if(!(i="object"===e(n)&&n.mid?n.mid:y._findVisitorID(n))){if(y._use1stPartyMarketingCloudServer&&!y.tried1stPartyMarketingCloudServer)return y.tried1stPartyMarketingCloudServer=!0,void y.getAnalyticsVisitorID(null,!1,!0);i=y._generateLocalMID()}y._setField(O,i)}i&&i!==F||(i=""),"object"===e(n)&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&y._setFields(j,n),y._use1stPartyMarketingCloudServer&&n.mid&&y._setFields(R,{id:n.id})),y._callAllCallbacks(O,[i])}if(t===j&&"object"===e(n)){var r=604800;null!=n.id_sync_ttl&&n.id_sync_ttl&&(r=parseInt(n.id_sync_ttl,10));var a=ne.getRegionAndCheckIfChanged(n,r);y._callAllCallbacks("MCAAMLH",[a]);var o=y._getField(V);(n.d_blob||n.blob)&&((o=n.d_blob)||(o=n.blob),y._setFieldExpire(V,r),y._setField(V,o)),o||(o=""),y._callAllCallbacks(V,[o]),!n.error_msg&&y._newCustomerIDsHash&&y._setField("MCCIDH",y._newCustomerIDsHash)}if(t===R){var s=y._getField(x);s&&!y.overwriteCrossDomainMCIDAndAID||((s=y._findVisitorID(n))?s!==F&&y._setFieldExpire(V,-1):s=F,y._setField(x,s)),s&&s!==F||(s=""),y._callAllCallbacks(x,[s])}if(y.idSyncDisableSyncs||y.disableIdSyncs)ne.idCallNotProcesssed=!0;else{ne.idCallNotProcesssed=!1;var l={};l.ibs=n.ibs,l.subdomain=n.subdomain,ne.processIDCallData(l)}if(n===Object(n)){var c,u;d()&&y.isAllowed()&&(c=y._getField("MCOPTOUT"));var p=P.parseOptOut(n,c,F);c=p.optOut,u=p.d_ottl,y._setFieldExpire("MCOPTOUT",u,!0),y._setField("MCOPTOUT",c),y._callAllCallbacks("MCOPTOUT",[c])}},y._loading=null,y._getRemoteField=function(e,t,n,i,r){var a,o="",s=te.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(d()&&y.isAllowed())if(y._readVisitor(),!(!(o=y._getField(e,!0===l[e]))||y._fieldsExpired&&y._fieldsExpired[e])||y.disableThirdPartyCalls&&!s)o||(e===O?(y._registerCallback(e,n),o=y._generateLocalMID(),y.setMarketingCloudVisitorID(o)):e===x?(y._registerCallback(e,n),o="",y.setAnalyticsVisitorID(o)):(o="",i=!0));else if(e===O||"MCOPTOUT"===e?a=M:"MCAAMLH"===e||e===V?a=j:e===x&&(a=R),a)return!t||null!=y._loading&&y._loading[a]||(null==y._loading&&(y._loading={}),y._loading[a]=!0,a===j&&(S=0),y._loadData(a,t,(function(t){if(!y._getField(e)){t&&re.setState(a,!0);var n="";e===O?n=y._generateLocalMID():a===j&&(n={error_msg:"timeout"}),y._setFields(a,n)}}),r)),y._registerCallback(e,n),o||(t||y._setFields(a,{id:F}),"");return e!==O&&e!==x||o!==F||(o="",i=!0),n&&i&&y._callCallback(n,[o]),e===O&&ee.subscribed&&(ee.callbacks&&ee.callbacks.length&&ee.callbacks.forEach((function(e){y._callCallback(e,[o])})),ee.subscribed=!1,ee.callbacks.length=0),o},y._setMarketingCloudFields=function(e){y._readVisitor(),y._setFields(M,e)},y._mapCustomerIDs=function(e){y.getAudienceManagerBlob(e,!0)},y._setAnalyticsFields=function(e){y._readVisitor(),y._setFields(R,e)},y._setAudienceManagerFields=function(e){y._readVisitor(),y._setFields(j,e)},y._getAudienceManagerURLData=function(e){var t=y.audienceManagerServer,n="",i=y._getField(O),r=y._getField(V,!0),a=y._getField(x),o=a&&a!==F?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(y.loadSSL&&y.audienceManagerServerSecure&&(t=y.audienceManagerServerSecure),t){var s,l,c,u=y.getCustomerIDs(!0);if(u)for(l in u){var d=u[l];if(!P.isObjectEmpty(d)){var p="nameSpaces"===l?"&d_cid_ns=":"&d_cid_ic=";for(s in d)B(s)&&(c=d[s],o+=p+encodeURIComponent(s)+"%01"+encodeURIComponent(c.id?c.id:"")+(c.authState?"%01"+c.authState:""))}}e||(e="_setAudienceManagerFields");var h="http"+(y.loadSSL?"s":"")+"://"+t+"/id",g="d_visid_ver="+y.version+(T&&-1!==h.indexOf("demdex.net")?"&gdpr=1&gdpr_consent="+T:"")+(S&&-1!==h.indexOf("demdex.net")?"&d_cf="+S:"")+"&d_rtbd=json&d_ver=2"+(!i&&y._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(y.marketingCloudOrgID)+"&d_nsid="+(y.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(y.idSyncDisable3rdPartySyncing||y.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===D?"&d_coop_safe=1":!1===D?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,f=["s_c_il",y._in,e];return{url:n=h+"?"+g+"&d_cb=s_c_il%5B"+y._in+"%5D."+e,corsUrl:h+"?"+g,callback:f}}return{url:n}},y.appendVisitorIDsTo=function(e){try{var t=[[O,y._getField(O)],[x,y._getField(x)],["MCORGID",y.marketingCloudOrgID]];return y._addQuerystringParam(e,J.ADOBE_MC,l(t))}catch(t){return e}},y.appendSupplementalDataIDTo=function(e,t){if(!(t=t||y.getSupplementalDataID(te.generateRandomString(),!0)))return e;try{var n=l([["SDID",t],["MCORGID",y.marketingCloudOrgID]]);return y._addQuerystringParam(e,J.ADOBE_MC_SDID,n)}catch(t){return e}};var te={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var i=e.split("&");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===x&&(t||(t=y.trackingServer),n||(n=y.trackingServerSecure),!("string"!=typeof(i=y.loadSSL?n:t)||!i.length)&&i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0);var i},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){q.remove(e,{domain:y.cookieDomain})},isTrackingServerPopulated:function(){return!!y.trackingServer||!!y.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e}),{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};y._helpers=te;var ne=$(y,C);y._destinationPublishing=ne,y.timeoutMetricsLog=[];var ie,re={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case M:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case R:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case j:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};y.isClientSideMarketingCloudVisitorID=function(){return re.isClientSideMarketingCloudVisitorID},y.MCIDCallTimedOut=function(){return re.MCIDCallTimedOut},y.AnalyticsIDCallTimedOut=function(){return re.AnalyticsIDCallTimedOut},y.AAMIDCallTimedOut=function(){return re.AAMIDCallTimedOut},y.idSyncGetOnPageSyncInfo=function(){return y._readVisitor(),y._getField("MCSYNCSOP")},y.idSyncByURL=function(e){if(!y.isOptedOut()){var t=c(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=ne;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=P.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},y.idSyncByDataSource=function(e){if(!y.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,y.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},Le(y,ne),y._getCookieVersion=function(e){e=e||y.cookieRead(y.cookieName);var t=J.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},y._resetAmcvCookie=function(e){var t=y._getCookieVersion();t&&!G.isLessThan(t,e)||y.removeCookie(y.cookieName)},y.setAsCoopSafe=function(){D=!0},y.setAsCoopUnsafe=function(){D=!1},function(){if(y.configs=Object.create(null),te.isObject(n))for(var e in n)B(e)&&(y[e]=n[e],y.configs[e]=n[e])}(),p(),y.init=function(){u()&&(b.optIn.fetchPermissions(_,!0),!b.optIn.isApproved(b.optIn.Categories.ECID))||ie||(ie=!0,function(){if(te.isObject(n)){y.idSyncContainerID=y.idSyncContainerID||0,D="boolean"==typeof y.isCoopSafe?y.isCoopSafe:te.parseBoolean(y.isCoopSafe),y.resetBeforeVersion&&y._resetAmcvCookie(y.resetBeforeVersion),y._attemptToPopulateIdsFromUrl(),y._attemptToPopulateSdidFromUrl(),y._readVisitor();var e=y._getField(N),t=Math.ceil((new Date).getTime()/J.MILLIS_PER_DAY);y.idSyncDisableSyncs||y.disableIdSyncs||!ne.canMakeSyncIDCall(e,t)||(y._setFieldExpire(V,-1),y._setField(N,t)),y.getMarketingCloudVisitorID(),y.getAudienceManagerLocationHint(),y.getAudienceManagerBlob(),y._mergeServerState(y.serverState)}else y._attemptToPopulateIdsFromUrl(),y._attemptToPopulateSdidFromUrl()}(),function(){if(!y.idSyncDisableSyncs&&!y.disableIdSyncs){ne.checkDPIframeSrc();var e=function(){var e=ne;e.readyToAttachIframe()&&e.attachIframe()};E.addEventListener("load",(function(){C.windowLoaded=!0,e()}));try{W.receiveMessage((function(e){ne.receiveMessage(e.data)}),ne.iframeHost)}catch(e){}}}(),y.whitelistIframeDomains&&J.POST_MESSAGE_ENABLED&&(y.whitelistIframeDomains=y.whitelistIframeDomains instanceof Array?y.whitelistIframeDomains:[y.whitelistIframeDomains],y.whitelistIframeDomains.forEach((function(e){var n=new L(t,e),i=U(y,n);W.receiveMessage(i,e)}))))}};Fe.config=Z,v.Visitor=Fe;var Be=Fe,Ue=function(e){if(P.isObject(e))return Object.keys(e).filter((function(t){return""!==e[t]&&Z.getConfigs()[t]})).reduce((function(t,n){var i=Z.normalizeConfig(n,e[n]),r=P.normalizeBoolean(i);return t[n]=r,t}),Object.create(null))},He=Ne.OptIn,qe=Ne.IabPlugin;Be.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=v.s_c_il;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i&&"Visitor"===i._c&&i.marketingCloudOrgID===e)return i}}();if(n)return n;var i=Ue(t)||{};!function(e){v.adobe.optIn=v.adobe.optIn||function(){var t=P.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext","sameSiteCookie","secureCookie"]),n=e.optInCookieDomain||e.cookieDomain;n=(n=n||Y())===window.location.hostname?"":n,t.optInCookieDomain=n;var i=new He(t,{cookies:q});if(t.isIabContext&&t.doesOptInApply){var r=new qe;i.registerPlugin(r)}return i}()}(i||{});var r=e.split("").reverse().join(""),a=new Be(e,null,r);i.cookieDomain&&(a.cookieDomain=i.cookieDomain),i.sameSiteCookie&&i.secureCookie&&(a.configs={sameSiteCookie:i.sameSiteCookie,secureCookie:i.secureCookie}),v.s_c_il.splice(--v.s_c_in,1);var o=P.getIeVersion();if("number"==typeof o&&o<10)return a._helpers.replaceMethodsWithFunction(a,(function(){}));var s=function(){try{return v.self!==v.parent}catch(e){return!0}}()&&(!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e.removeCookie("TEST_AMCV_COOKIE"),!0)}(a)||P.isFirefox()&&!function(t){var n="AMCV_"+e;return!!t.cookieRead(n)}(a)&&i.whitelistParentDomain)&&v.parent?new x(e,i,a,v.parent):new Be(e,i,r);return a=null,s.init(),s},function(){function e(){Be.windowLoaded=!0}v.addEventListener?v.addEventListener("load",e):v.attachEvent&&v.attachEvent("onload",e),Be.codeLoadEnd=(new Date).getTime()}()}(),Visitor)}},"adobe-mcid/src/view/utils/timeUnits.js":{script:function(e){var t={Hours:3600,Days:86400,Weeks:604800,Months:2592e3,Years:31536e3};e.exports=t}}}}},company:{orgId:"9AE0F0145936E3790A495CAA@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"GOLF DIGEST (disc core site)",settings:{domains:["golfdigest.com"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!1},id:"PR7e182907d3704494bad94770985588e6"},rules:[{id:"RL011c99e2c98a4910a6d06ab700ffd3f0",name:"LiveIntent - On GD+ Subscription Page Load - C0004",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RC2765934c333a4f2c8a010f8bd2c9c3c7-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL08296a6dcf5f476ca61e608bfb7c56a4",name:"Floodlight - On GD+ Payment Screen Load - C0004",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"pianoSelectTerm"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RCcb95ffbd61bf487f8afbbec778ea2dc7-source.min.js",language:"html",isExternal:!0}}]},{id:"RL0ae4c2f794e44074b5c6adbd9a100484",name:"Track State - Adobe - C0002",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"track_state"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return void 0===window.launchFiredTags||1!=window.launchFiredTags["Adobe PV"]}}}],actions:[{modulePath:"common-analytics-plugins/src/lib/actions/initialize.js",settings:{cs:!1,ft:!1,il:!1,mv:!1,ns:!1,pt:!1,ape:!1,apl:!1,apv:!1,fpo:!1,ggc:!1,gnr:!0,gpn:!1,gpv:!1,gqp:!1,grl:!1,gtp:!1,gvd:!1,gvn:!0,gvo:!1,rfl:!1,gapv:!1,gplt:!1,gtbe:!1,gttc:!1,gdslv:!1,gtslv:!1}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L"),delete t.contextData.custom_event,Object.keys(_satellite.getVar("mdManagerToCDMapping")).forEach((function(e){_satellite.getVar("mdManagerToCDMapping")[e].forEach((function(n){try{multiValueFields=["SUBSCRIPTIONID"],multiValueFields.includes(e)?t.contextData[n]=window.mdManager.getKeys()[e].join("|"):t.contextData[n]=window.mdManager.getKeys()[e][0]}catch(e){}}))})),t.contextData.virtual_rsid="golfdigest",t.contextData.newRepeat=t.getNewRepeat(730),t.contextData.visitnum_calmonth=t.getVisitNum("m"),t.contextData.pageurl=window.location.href,t.contextData.platform="web",OptanonActiveGroups.includes("C0004")||(t.contextData["cm.ssf"]="1"),queryString=window.location.search,urlParams=new URLSearchParams(queryString),urlParams.get("uuid")&&(t.contextData.userid=urlParams.get("uuid")),sessionStorage.getItem("adobePrevPage")&&(t.contextData.prevPage=sessionStorage.getItem("adobePrevPage"),sessionStorage.removeItem("adobePrevPage")),sessionStorage.setItem("adobePrevPage",("contentPageType"in t.contextData?t.contextData.contentPageType:"")+"|"+("pageTitle"in t.contextData?t.contextData.pageTitle:"")),(localStorage.hasOwnProperty("adobeLastHitTstamp")&&Date.now()-localStorage.getItem("adobeLastHitTstamp")>18e5||!localStorage.hasOwnProperty("adobeLastHitTstamp"))&&localStorage.removeItem("adobeUniqueContentList"),console.log("time since last hit"+(Date.now()-localStorage.getItem("adobeLastHitTstamp"))),!("contentPageType"in t.contextData)||!("pageUniqueID"in t.contextData)||t.contextData.contentPageType.toLowerCase().includes("landingpage")||t.contextData.contentPageType.toLowerCase().includes("homepage")||t.contextData.contentPageType.toLowerCase().includes("error")||(newContentID=t.contextData.pageUniqueID.split("|")[2],localStorage.hasOwnProperty("adobeUniqueContentList")?(uniqueContentList=JSON.parse(localStorage.getItem("adobeUniqueContentList")),uniqueContentList[newContentID]=1,localStorage.setItem("adobeUniqueContentList",JSON.stringify(uniqueContentList))):(uniqueContentList={},uniqueContentList[newContentID]=1,localStorage.setItem("adobeUniqueContentList",JSON.stringify(uniqueContentList)))),localStorage.hasOwnProperty("adobeUniqueContentList")&&(uniqueContentList=JSON.parse(localStorage.getItem("adobeUniqueContentList")),t.contextData.uniqueContentCountVisit=Object.keys(uniqueContentList).length),localStorage.setItem("adobeLastHitTstamp",Date.now()),function(){function e(e){sessionStorage.setItem("newLinkTrackingMap",JSON.stringify(e))}function n(e){for(key in e)t.contextData[key]=e[key];t.linkTrackEvents="event24",t.linkTrackVars=Object.keys(t.contextData).map((function(e){return"contextData."+e})).join(","),t.events="event24",_satellite.logger.log("Link track vars: "+JSON.stringify(t.linkTrackVars)),t.tl(this,"o","AMACTION:Module Link Click")}function i(t,i,r,a,o){void 0===a&&(a=0),void 0===o&&(o=""),t.forEach((function(t,s){t.addEventListener("click",(function(){linkTrackingMap={moduleName:i+"|"+String(r),moduleIndex:String(r),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector(".o-StoryCard__a-HeadlineText").innerText,linkPosition:String(s+a),componentTitle:o},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)}))}))}function r(e){return prevSibling=e.previousElementSibling,prevSibling&&(prevPrevSibling=prevSibling.previousElementSibling),"undefined"!=typeof prevSibling&&prevSibling&&"heading section"==prevSibling.getAttribute("class")?prevSibling.querySelector(".o-Heading__a-Title").innerText:"undefined"!=typeof prevPrevSibling&&prevPrevSibling&&"heading section"==prevPrevSibling.getAttribute("class")?prevPrevSibling.querySelector(".o-Heading__a-Title").innerText:""}var a,o;!function(){if(null!==sessionStorage.getItem("newLinkTrackingMap")){for(key in metaMap=JSON.parse(sessionStorage.getItem("newLinkTrackingMap")),metaMap)t.contextData[key]=metaMap[key];sessionStorage.removeItem("newLinkTrackingMap")}}(),_satellite.logger.log("Attempting to add click tracking to subnav"),subNavModules=document.querySelectorAll("div.o-Header__a-SubNav")[0],"undefined"!=typeof subNavModules&&subNavModules.querySelectorAll("li a").forEach((function(t,i){t.addEventListener("click",(function(){linkTrackingMap={moduleName:"Sub Nav|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.innerText,linkPosition:String(i),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)}))})),function(){_satellite.logger.log("Attempting to add click tracking to hamburger");try{hamburgerModules=document.querySelectorAll("nav.o-Header__m-NavMenu")[0],hamburgerModules.querySelectorAll("li.o-NavMenu__a-NavListItem").forEach((function(t,i){firstAnchor=t.querySelector("a"),firstAnchor.addEventListener("click",(function(){linkTrackingMap={moduleName:"Hamburger Menu|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:t.innerText,linkPosition:String(i),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)}))}))}catch(e){}}(),_satellite.logger.log("Attempting to add click tracking to features module"),featureModules=document.querySelectorAll("div.storyFeature"),featureModules.forEach((function(t,r){featureImgLink=t.querySelector("a.o-StoryFeature__m-MediaWrap"),featureImgLink.addEventListener("click",(function(){linkTrackingMap={moduleName:"Featured|"+String(r),moduleIndex:String(r),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector("img").getAttribute("title").slice(),linkPosition:String(0),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)})),featureTextLink=t.querySelector("a.o-StoryFeature__m-Text"),featureTextLink.addEventListener("click",(function(){linkTrackingMap={moduleName:"Featured|"+String(r),moduleIndex:String(r),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector(".o-StoryFeature__a-Title").innerText,linkPosition:String(0),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)})),storyCards=t.querySelectorAll(".o-StoryCard"),i(storyCards,"Featured",r,1)})),_satellite.logger.log("Attempting to add click tracking to story grid"),storyGridModules=document.querySelectorAll("div.storyGridList.section"),storyGridModules.forEach((function(e,t){componentTitle=r(e),storyCards=e.querySelectorAll(".o-StoryCard"),i(storyCards,"Story Grid",t,0,componentTitle)})),_satellite.logger.log("Attempting to add click tracking to carousel"),carouselModules=document.querySelectorAll("div.carousel.section"),carouselModules.forEach((function(e,t){componentTitle=r(e),storyCards=e.querySelectorAll(".o-StoryCard"),i(storyCards,"Carousel",t,0,componentTitle)})),_satellite.logger.log("Attempting to add click tracking to Special features carousel"),specialFeatureCarouselModules=document.querySelectorAll("div.specialFeatureCarousel.section"),specialFeatureCarouselModules.forEach((function(e,t){componentTitle=e.querySelector(".o-SpecialFeatureCarousel__a-Heading").innerText,storyCards=e.querySelectorAll(".o-StoryCard"),i(storyCards,"Special Feature Carousel",t,0,componentTitle)})),a=20,o=setInterval((function(){_satellite.logger.log("track_state: Attempting to add click tracking to Riser, numRepeats left",a);try{riserModuleAnchors=document.querySelector("div.relatedRiser").querySelectorAll("div.riser-item a")}catch(e){_satellite.logger.log("cannot find riser module: "+JSON.stringify(e))}"undefined"!=typeof riserModuleAnchors&&riserModuleAnchors.length>0&&(riserModuleAnchors.forEach((function(t,i){_satellite.logger.log("track_state: attaching click handler to index "+i),t.addEventListener("click",(function(){linkTrackingMap={moduleName:"Article Riser|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector("div.riser-text-wrapper span.riser-hed").innerText,linkPosition:String(i),componentTitle:""},e(linkTrackingMap),n(linkTrackingMap)}))})),_satellite.logger.log("Successful attach click tracker to riser on w/ "+String(a)+" tries left"),clearInterval(o)),a<=0&&(clearInterval(o),_satellite.logger.log("track_state: Riser not found")),a--}),250)}(),"development"==_satellite.environment.stage&&console.log("Track Action C0002 - page bottom triggered")}},trackerProperties:{pageURL:"%browser page URL%",campaign:{type:"value",value:"%Campaign ID%"},pageName:"%browser page title%",referrer:"%browser referrer%"}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RCec32a574038a4b9fab90553a92014c9a-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL14387369520344288872c2c0f710cfef",name:"DFP Tag for archive.golfdigest.com",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return window.location.hostname.includes("archive.golfdigest.com")}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RCecb26428e1b54deb82bfcea0f5530301-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL16c641eaaf5244a8a1d29f3b73546cb5",name:"Comscore - prod only - C0004",events:[{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],
conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var waitForGeoCount = 0;\nvar refreshIntervalId;\n\n// Set the environments for debugging\n//\nvar envs = ['development', 'staging'];\nvar inDev = envs.includes(_satellite.environment.stage);\n\n// This is an interval function that runs periodically.  Checking to see\n// if needed data is available.  If the window.runComscore variable is never set\n// then for some reason we can't get the user's location so just fire the tag\n//\nwindow.waitForGeo = function () {\n\n  if (inDev) console.log('Comscore: WaitForGeo Enter', waitForGeoCount, window.runComscore);\n  if (window.runComscore == true) {\n    if (inDev) {\n      console.log('Comscore:WaitForGeo: GeoLocation already fired. Clearing wait');\n    }\n    clearInterval(refreshIntervalId); \n  }\n\n  waitForGeoCount++;\n  if (waitForGeoCount > 10) {\n    if (inDev) {\n      console.log('Comscore: WaitForGeo. Continent never found, firing tag');\n    }\n    clearInterval(refreshIntervalId);\n    fireTag();\n  }\n}\n\n// Check the conditions on whether to fire the Comscore tag\n//\nfunction checkConditions() {\n  if (inDev) {\n    console.log('Comscore: checkConditions: enter');\n  }\n  \n  showVariables();\n  \n  // Do not fire the script if:\n  //    User is in California and C0004 is not active\n  // OR User in in EU and C0002 is not active\n  //\n  try {\n    if ((!OptanonActiveGroups.includes(',C0004,')) && (_satellite.getVar('geoState') == 'CA')) {\n      if (inDev) {\n        console.log('Comscore checkConditions: User in CA and C0004 not active so not firing');\n      }\n      return false;\n    }\n    if ((!OptanonActiveGroups.includes(',C0002,')) && (_satellite.getVar('geoContinent') == 'EU')) {\n      if (inDev) {\n        console.log('Comscore checkConditions: User in EU and C0002 not active so not firing');\n      }\n      return false;\n    }\n  } catch(e) {}\n\n  if (inDev) {\n    console.log('Comscore checkConditions: Conditions met, return True');\n  }\n  return true;\n}\n\nfunction fireTag() {\n  // Has the rule fired already?\n  //\n  if (typeof window.launchFiredTags !== 'undefined' && window.launchFiredTags.Comscore == true) {\n    if (inDev) {\n      console.log('Comscore checkConditions: Tag has already fired, do not fire again, return false');\n    }\n    return;\n  }\n  if (inDev) {\n    console.log('Comscore: Firing Tag');\n  }\n  var _comscore = _comscore || [];\n  _comscore.push({ c1: \"2\", c2: \"6035094\" });\n    \n  // This is the script to fire the beacon\n  //\n  var s = document.createElement(\"script\"), el = document.getElementsByTagName(\"script\")[0]; s.async = true;\n  s.src = (document.location.protocol == \"https:\" ? \"https://sb\" : \"http://b\") + \".scorecardresearch.com/beacon.js\";\n  el.parentNode.insertBefore(s, el);\n  \n  // Log a message to Datadog for analytics\n  /*\n  if (DD_LOGS) {\n    DD_LOGS.onReady(function() {\n      window.DD_LOGS.logger.info('V8: ComScore Beacon Loaded', { service: 'GOLFDIGEST', id : window.ddUniqueId });\n      if (inDev) {\n        console.log('DEBUG: ID: ' + window.ddUniqueId + ': ' + ' Comscore beacon.js was requested');\n      }\n    });\n  }\n  */\n   \n  // Flag so Tag only gets fired once per page\n  //\n  if (typeof window.launchFiredTags !== 'object'){\n    window.launchFiredTags = {};\n  }\n  window.launchFiredTags.Comscore = true;\n} \nfunction showVariables() {\n   // Debugging Code\n  if (inDev) {\n    try {\n      console.log('Comscore Optanon: ', OptanonActiveGroups);\n      if (OptanonActiveGroups.includes(',C0004,')) {\n        console.log('Comscore Includes C0004 is TRUE');\n      } else {\n        console.log('Comscore Includes C0004 is FALSE');\n      }\n    } catch(e) {}\n    console.log('Comscore Continent', _satellite.getVar('geoContinent'));\n    console.log('Comscore Country', _satellite.getVar('geoCountry'));\n    console.log('Comscore State', _satellite.getVar('geoState'));\n  } \n}\n\n// Gets fired after the Get Location rule retrieves the Geo location of the user\n//\nfunction runAction() {\n\n  if (inDev) {\n    console.log('Comscore: runAction Enter, setting window.runComscore to true');\n  }\n  \n  var continent = _satellite.getVar('geoContinent');\n  window.runComscore = true;\n\n  if (typeof continent !== 'undefined') {\n    if (inDev) {\n      console.log('Comscore runAction: Continent Now Defined. Check conditions and exit');\n    }\n    if (checkConditions()) {\n      fireTag();\n    }\n    return;\n  } else {\n    console.error(\"Comscore plugin unable to detect user's country\");\n  }\n}\n\n//// MAIN\n// \n\n// Check if rule fired already since there are 2 events that can cause it to fire\n//\nif (typeof window.comscoreRuleFired !== 'undefined' && window.comscoreRuleFired == true) {\n  if (inDev) {\n    console.log('Comscore Action: Rule already fired, so just return');\n  }\n  return;\n}\nwindow.runComscore = false;\nwindow.comscoreRuleFired = true;\n\n// The GetLocation Rule will set this variable once it retrieves the user's continent\n//\nvar continent = _satellite.getVar('geoContinent');\nif (inDev) {\n  console.log('Comscore Action Loaded: Continent: ', continent, typeof continent, window.runComscore);\n}\nif (typeof continent === 'undefined') {\n  // Get Location rule has not yet retrieved the geo location\n  //\n  if (inDev) {\n    console.log('Comscore Action: Continent Undefined. Setting up event listener ');\n  }\n  // The Get Location rule will fire this event when it retrieves the user's location\n  //\n  if (inDev) console.log('ComscoreDebug: adding event listener');\n  document.addEventListener(\"GeoLocationDetected\", runAction);\n  \n  // Just in case that event never fires, set up a function that will fire the rule\n  //\n  refreshIntervalId = setInterval(waitForGeo, 1000);\n} else {\n  if (inDev) {\n    console.log('Comscore Action: Continent Already defined. Check conditions');\n  }\n  if (checkConditions()) {\n    if (inDev) console.log('ComscoreDebug: checkConditions returns true, firing tag');\n    fireTag();\n  }\n}\n\n\n\n",language:"javascript"}}]},{id:"RL1726c772f179466c913c194f245e98ad",name:"Temp Piano Conversion Add Handler",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var numRepeats = 20,\ntpInterval = setInterval(function () {\n    if(typeof window.tp !== 'undefined'){\n      window.tp.push([\"addHandler\", \"checkoutComplete\", function(conversion){\n        // _satellite.track is an Adobe Launch call, which can then forward the event to Adobe Analytics\n        \n        conversion_metadata = {\n          'chargeAmount': conversion['chargeAmount'],\n          'chargeCurrency': conversion['chargeCurrency'],\n          'promotionId': conversion['promotionId'],\n          'rid': conversion['rid'],\n          'startedAt': conversion['startedAt'],\n          'termConversionId': conversion['termConversionId'],\n          'termId': conversion['termId'],\n          'uid': conversion['uid'],\n          'email' : conversion['email'] // added Vernick 12/6/22\n        };\n        \n        _satellite.track('piano_purchase', conversion_metadata);\n        _satellite.logger.info(\"successfully tracked conversion with context metdata: \"  +JSON.stringify(conversion_metadata));\n        \n      }]);\n\n      tp.push([\"addHandler\", \"showTemplate\", function(templateParams){\n        // _satellite.track is an Adobe Launch call, which can then forward the event to Adobe Analytics\n        _satellite.track('pianoShowTemplate', {\n            'offerId': templateParams['offerId'],\n            'termIds': templateParams['termIds']\n          }\n        );\n        _satellite.logger.info(\"successfully tracked show template with context metdata: \"  +JSON.stringify(templateParams));\n        \n      }]);\n\n\n\n      tp.push([\"addHandler\", \"showOffer\", function(offerParams){\n          // _satellite.track is an Adobe Launch call, which can then forward the event to Adobe Analytics\n        _satellite.track('pianoShowOffer', {\n\t         'offerId': offerParams['offerId'],\n\t         'templateId': offerParams['templateId'],\n\t         'templateVariantId': offerParams['templateVariantId']  \n        });\n\n        _satellite.logger.info(\"successfully tracked show offer with context metdata: \"  +JSON.stringify(offerParams));\n      }]);\n        \n      tp.push([\"addHandler\", \"checkoutSelectTerm\", function(termDetails, iframeId){\n        _satellite.track('pianoSelectTerm', {\n          'termId': termDetails['termId'],\n        \t'termName': termDetails['termName'],\n        \t'resourceId': termDetails['resourceId'],\n          'resourceName': termDetails['resourceName']  \n        });\n        _satellite.logger.info(\"successfully tracked checkout select term with context metdata: \"  +JSON.stringify(termDetails));\n      }]);\n\n      tp.push([\"addHandler\", \"checkoutStateChange\", function(stateView){\n        _satellite.track('pianoCheckoutStateChange', {\n          'stateName': stateView['stateName'],\n          'offerId': stateView['offerId'],\n          'offer': stateView['offer'],\n          'state1': stateView['state1'],\n          'state2': stateView['state2'],\n          'auth': stateView['auth'],\n          'confirmation': stateView['confirmation']  \n        });\n\n        _satellite.logger.info(\"successfully tracked check out state change with context metdata: \"  +JSON.stringify(stateView));\n      }]);\n\n\n\n      _satellite.logger.info(\"successfully loaded piano tracking on try \" + numRepeats);\n      clearInterval(tpInterval);\n    } else {\n      _satellite.logger.info(\"tp not found, try #\" + numRepeats);\n    }\n    if(numRepeats <= 0){\n      clearInterval(tpInterval);\n    }\n    numRepeats--;\n}, 250)\n\n//tp.push attaches the event handler for completion of purchase\n",language:"javascript"}}]},{id:"RL31ab020a1a504f38acc612895a7bab37",name:"track_action - Adobe - C0002",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"track_action"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/clearVariables.js",settings:{}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RC4606dd831aab4b6cab65f18859c0ea6c-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL327d8431aac842bda273493af9503e74",name:"Browsi tag - C0004",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!("articlepage"!=mdManager.getKeys().TYPE[0]||!["golf-news-tours","the-loop"].includes(mdManager.getKeys().CATEGORYDSPNAME[0]))}}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0004",valueIsRegex:!0}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return void 0===window.launchFiredTags||1!=window.launchFiredTags.Browsi}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var head = document.getElementsByTagName('head')[0];\n\nvar browsi_script = document.createElement('script');\n\nbrowsi_script.src = \"https://cdn.browsiprod.com/bootstrap/bootstrap.js\";\nbrowsi_script.setAttribute('id', \"browsi-tag\");\nbrowsi_script.setAttribute('data-pubKey', \"pgatour\");\nbrowsi_script.setAttribute('data-siteKey', \"golfdigest\");\nhead.appendChild(browsi_script);\n\nif (typeof window.launchFiredTags !== 'object'){\n  window.launchFiredTags = {};\n}\n\nwindow.launchFiredTags['Browsi'] = true;",language:"javascript"}}]},{id:"RL36947c084b664475b8d61a304b09c468",name:"Floodlight - On GD+ Completed Purchase - C0004",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"piano_purchase"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RCeab63a54d56a4b749004d10c80bda22f-source.min.js",language:"html",isExternal:!0}}]},{id:"RL37423ee23e384b41a5d73017be6eea31",name:"Floodlight - On GD+ Subscription Page Load - C0004",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RC6894a8d2b6ed4e82934373b7b75e3f9f-source.min.js",language:"html",isExternal:!0}}]},{id:"RL3a9770c89bd04d3baa669151546cf6ee",name:"Google Ads - GD+ Subscription - C0004",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"piano_purchase"},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RCed188f97abe94d32a65e0f91f8af98f9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4006782e110c487386c56d5c064da52e",name:"GD+ Piano Checkout State Change - C0002",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"pianoCheckoutStateChange"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=e.detail;OptanonActiveGroups.includes("C0004")||(t.contextData["cm.ssf"]="1"),"stateName"in e.detail&&"offer"==e.detail.stateName&&(delete t.contextData.custom_event,"offerId"in e.detail&&(t.contextData.linktitle=e.detail.offerId),t.linkTrackVars=Object.keys(t.contextData).map((function(e){return"contextData."+e})).join(",")+",products",t.tl(!0,"o","AMACTION:Show Offer")),_satellite.logger.log("piano checkoutStateChange called"),_satellite.logger.log(JSON.stringify(n))}},trackerProperties:{}}}]},{id:"RL417cbc040ddf4b1bac53823279e26080",name:"Experience Cloud ID Sync - Page Bottom",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"track_action"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"USERID"in window.mdManager.getKeys()&&window.mdManager.getKeys().USERID.length>0&&window.mdManager.getKeys().USERID[0].length>5}}}],actions:[{modulePath:"adobe-mcid/src/lib/actions/setCustomerIds.js",settings:{customerIds:[{value:"%userid%",hashType:"",authState:1,integrationCode:"golftvuid"}]}}]},{id:"RL4fd995b74c3149dcbd870a9d66540600",name:"LiveIntent - On GD+ Completed Purchase - C0004",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"piano_purchase"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RC2c7fddc0eb854bdd9fc67f6722afad17-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RL4feafe7ea532467cb7f18b56fc98f3fb",name:"Google Ads Page Load - C0004",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"\nfunction gtag(){\n  dataLayer.push(arguments);\n}\n\nwindow.dataLayer = window.dataLayer || [];\nvar envs = ['staging', 'development'];\nvar inDev = envs.includes(_satellite.environment.stage);\nvar fired = false;\nconsole.log('GTAG: inDev: ' + inDev + ' stage: ' + _satellite.environment.stage);\n\nif (inDev) {\n  console.log('GTAG: Firing rule');\n}\n\n// This is a Data element that will return either 'consentgiven' or 'consentnotgiven'\n//\nwindow.OneTrustCallee = \"GTAG\";  // Global var for data element function check\nvar consent = _satellite.getVar('OneTrust Targeting Check');\nif (inDev) {\n    console.log('GTAG: OT Targeting Check returns ' + consent);\n}\n\nif ((typeof window.launchFiredTags !== 'undefined') && (window.launchFiredTags.Google === true)) {\n  fired = true;\n  if (inDev) {\n    console.log('GTAG already fired and loaded');\n  }\n}\n\n// If the script hasn't fired yet and consent is given, then download the gtag script\n//\nif (!fired && (consent == 'consentgiven')) {\n  if (inDev) {\n    console.log('GTAG: Requesting script to be downloaded');\n  }\n  let scriptEle = document.createElement(\"script\");\n  scriptEle.setAttribute(\"src\", document.location.protocol + '//www.googletagmanager.com/gtag/js?id=AW-845714320');\n  scriptEle.setAttribute(\"type\", \"text/javascript\");\n  scriptEle.setAttribute(\"async\", true);\n\n  document.body.appendChild(scriptEle);\n\n  // success event \n  if (inDev) {\n    scriptEle.addEventListener(\"load\", () => {\n      console.log(\"GTAG: JS loaded\")\n    });\n  }\n   // error event\n  scriptEle.addEventListener(\"error\", (ev) => {\n    console.log(\"GTAG: Error on loading file\", ev);\n  });\n  \n  // Specify that the script was launched\n  //\n  if (typeof window.launchFiredTags !== 'object') {\n    window.launchFiredTags = {};\n  }\n  if (inDev) {\n    console.log('GTAG: Setting launchFiredTags.Google to true');\n  }\n  window.launchFiredTags.Google = true;\n\n  // Set up the GTAG Config for Google Ads\n  //\n  gtag('js', new Date());\n  gtag('config', 'AW-845714320');\n  \n} else {\n  if (inDev) {\n    console.log(\"GTAG: Tag had already fired.  not reloading script\");\n  }\n}",language:"javascript"}}]},{id:"RL57459dd2f4ae4769ba883faa85b0459c",name:"Floodlight - All Page Load - C0004",events:[{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"console.log('Floodlight: Enter Action');\n\n// Arguments are global object with function arguments\n//\nfunction gtag(){\n  //console.log('gtag:Floodlight firing args follow', arguments); \n  dataLayer.push(arguments);\n}\n  \nvar inDev = (_satellite.environment.stage == 'staging') || (_satellite.environment.stage == 'development');\nvar fired = false;\n  \n_satellite.logger.log('Floodlight: All Page load Action started inDev', inDev);\n\n// This is a Data element that will return either 'consentgiven' or 'consentnotgiven'\n//\nwindow.OneTrustCallee = \"Floodlight\";  // Set global name\nvar consent = _satellite.getVar('OneTrust Targeting Check');\nif (inDev) {\n    console.log('Floodlight: OT Targeting Check returns ' + consent);\n}\n  \nif ((typeof window.launchFiredTags !== 'undefined') && (window.launchFiredTags.Floodlight === true)) {\n  fired = true;\n  if (inDev) {\n    console.log('Floodlight already fired');\n  }\n} else {\n  if (inDev) {\n    console.log('Floodlight not fired yet.');\n  }\n}\n\nif ((!fired) && (consent == 'consentgiven')) {\n  if (inDev) {\n    console.log('Floodlight: Requesting script to be downloaded');\n  }\n  let scriptEle = document.createElement(\"script\");\n  scriptEle.setAttribute(\"src\", 'https://www.googletagmanager.com/gtag/js?id=DC-9865608');\n  scriptEle.setAttribute(\"type\", \"text/javascript\");\n  scriptEle.setAttribute(\"async\", true);\n\n  document.body.appendChild(scriptEle);\n  \n  // success event \n  scriptEle.addEventListener(\"load\", () => {\n    if (inDev) {\n      console.log(\"Floodlight: File loaded\");\n    }\n  });\n  // error event\n  scriptEle.addEventListener(\"error\", (ev) => {\n    console.log(\"Floodlight: Error on loading file\", ev);\n  });\n  \n  window.dataLayer = window.dataLayer || [];\n  \n  gtag('js', new Date());\n  \n  gtag('config', 'DC-9865608');\n    \n  if (typeof window.launchFiredTags !== 'object'){\n    window.launchFiredTags = {};\n  }\n  \n  window.launchFiredTags.Floodlight = true;\n} else {\n  if (inDev) {\n    console.log(\"Floodlight: Tag had already fired.  not reloading script\");\n  }\n}\n\n  \n",language:"javascript"}}]},{id:"RL5e434473f80f4c23876773262a1632ad",name:"Jebbit Campanion - C0004",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return void 0===window.launchFiredTags||1!=window.launchFiredTags.Jebbit||(console.log("Jebbit had already fired"),!1)}}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"        (function(i,s,o,g,r,a,m) {\n          i['JebbitObject']={};i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)};\n          a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;\n          m.parentNode.insertBefore(a,m);\n        })(window,document,'script','https://js.jebbit.com/companion/v1/widget.js','jebbit');\n      window.jebbit('init', '28490574-3bbd-48ea-be25-d5e0574a676b');\n\nif (typeof window.launchFiredTags !== 'object'){\n  window.launchFiredTags = {};\n}\nwindow.launchFiredTags['Jebbit'] = true;",language:"javascript"}}]},{id:"RL79991a31565147df874caa0bc6326de4",name:"Load Subscriptions",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"\nvar numRepeats = 20;\ntpInterval = setInterval(function () {\n  if(typeof window.tp !== 'undefined'){\n    tp.push([\"init\", function() {\n      var params = {\n        aid : \"zUkajvWJ04\"  // The Golfdigest application ID\n      };\n      var callback = function(response) {\n        var resourceList = '';\n        _satellite.logger.info(\"LoadSubscriptions: Response from PIANO /access/check returned\");\n        _satellite.logger.info(response);\n        if (response.total > 0) {\n          // the user has access\n          _satellite.logger.info('LoadSubscriptions: user has ' + response.total + ' product subscriptions');\n          for (var i = 0; i < response.count; i++) {\n            var resource = response.data[i].resource.name;\n            if (i > 0) resourceList += ',';\n            resourceList += resource;\n          }\n          _satellite.logger.info(resourceList);\n        }\n        else {\n          // the user does not have access\n          _satellite.logger.info('LoadSubscriptions: user has NO product subscriptions');\n        }\n        // Push the resource list onto the data layer\n        window.dataLayer = window.dataLayer || [];\n        window.dataLayer.push({'premium_subscriptions': resourceList});\n        \n      } // end function\n      tp.api.callApi(\"/access/list\", params, callback);  // This calls the Piano backend API using a wrapper function\n    }]);\n  \n    clearInterval(tpInterval);\n  } else {\n    _satellite.logger.info(\"LoadSubscriptions: tp object not found, try #\" + numRepeats);\n  }\n  if(numRepeats <= 0){\n    clearInterval(tpInterval);\n    _satellite.logger.info(\"LoadSubscriptions: Never got access to window.tp\");\n  }\n  numRepeats--;\n}, 250);  // setInterval function\n",language:"javascript"}}]},{id:"RL8d228fb446c84d8f9690061fb08ce962",name:"Parse.ly Page Tag - C0002",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!(!window.location.href.includes("error-page/404")&&document.querySelector('link[rel="canonical"]').href.includes("error-page/404")&&(_satellite.logger.log("404 on non-404 URL, supressing Parse.ly"),1))}}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"// Set inDev variable\n//\nvar envs = ['development', 'staging'];\nvar inDev = envs.includes(_satellite.environment.stage);\n\n// Did the script fire yet?\n//\nif ((typeof window.launchFiredTags !== 'undefined') && (window.launchFiredTags.Parsely === true)) {\n  if (inDev) {\n    _satellite.logger.info('Parse.ly already fired');\n  }\n} else {\n  // Load the script\n  let scriptEle = document.createElement(\"script\");\n    \n  if (inDev) {\n    scriptEle.setAttribute(\"src\", document.location.protocol + '//cdn.parsely.com/keys/sandbox.golfdigest.com/p.js');\n  } else {\n    scriptEle.setAttribute(\"src\", document.location.protocol + '//cdn.parsely.com/keys/golfdigest.com/p.js');\n  }\n  scriptEle.setAttribute(\"type\", \"text/javascript\");\n  //scriptEle.setAttribute(\"async\", true);\n  scriptEle.id = 'parsely-cfg';\n\n  let body = document.body;\n//    document.body.appendChild(scriptEle);\n  body.appendChild(scriptEle);\n\n/** This was the original code.  I modified to above - 9/11 vernick\n(function(d) {\n    var b = d.body;\n    var e = d.createElement('script');\n\n    e.id = 'parsely-cfg';\n    if (_satellite.environment.stage == 'production'){\n      e.src = '//cdn.parsely.com/keys/golfdigest.com/p.js';\n    } else {\n      e.src = '//cdn.parsely.com/keys/sandbox.golfdigest.com/p.js';\n    }\n    b.appendChild(e);\n})(document);\n*/\n\n  // Set that the rule fired already so it doesn't fire again\n  //\n  if (typeof window.launchFiredTags !== 'object'){\n    window.launchFiredTags = {};\n  }\n\n  window.launchFiredTags.Parsely = true;\n\n  // Logging to datadog\n  // Turned off 9/12/2023 - vernick\n  /*\n  if (DD_LOGS) {\n    DD_LOGS.onReady(function() {\n      window.DD_LOGS.logger.info('V9: Parse.ly p.js requested', { service: 'GOLFDIGEST', id : window.ddUniqueId });\n      if (inDev) {\n        console.log('DEBUG: ID: ' + window.ddUniqueId + ': ' + ' Parse.ly p.js was requested');\n      }\n    });\n  }\n  */\n}",language:"javascript"}}]},{id:"RL9e87050d90924595ad2e6e3459570a94",name:"Track Page View - Adobe - C0002",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50},{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return void 0===window.launchFiredTags||1!=window.launchFiredTags["Adobe PV"]}}}],actions:[{modulePath:"common-analytics-plugins/src/lib/actions/initialize.js",settings:{cs:!1,ft:!1,il:!1,mv:!1,ns:!1,pt:!1,ape:!1,apl:!1,apv:!1,fpo:!1,ggc:!1,gnr:!0,gpn:!1,gpv:!1,gqp:!1,grl:!1,gtp:!1,gvd:!1,gvn:!0,gvo:!1,rfl:!1,gapv:!1,gplt:!1,gtbe:!1,gttc:!1,gdslv:!1,gtslv:!1}},{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L"),delete t.contextData.custom_event,Object.keys(_satellite.getVar("mdManagerToCDMapping")).forEach((function(e){_satellite.getVar("mdManagerToCDMapping")[e].forEach((function(n){try{multiValueFields=["SUBSCRIPTIONID"],multiValueFields.includes(e)?t.contextData[n]=window.mdManager.getKeys()[e].join("|"):t.contextData[n]=window.mdManager.getKeys()[e][0]}catch(e){}}))})),document.querySelectorAll('script[type="application/ld+json"]').forEach((function(e){jsonTags={};try{jsonTags=JSON.parse(e.innerText)}catch(e){console.log(e)}jsonTags.forEach((function(e){"@context"in e&&"http://schema.org"==e["@context"]&&"keywords"in e&&(t.contextData.contenttags=e.keywords.join(",").substr(0,249))}))})),t.contextData.virtual_rsid="golfdigest",t.contextData.newRepeat=t.getNewRepeat(730),t.contextData.visitnum_calmonth=t.getVisitNum("m"),t.contextData.pageurl=window.location.href,t.contextData.platform="web",OptanonActiveGroups.includes("C0004")||(t.contextData["cm.ssf"]="1"),queryString=window.location.search,urlParams=new URLSearchParams(queryString),urlParams.get("uuid")&&(t.contextData.userid=urlParams.get("uuid")),sessionStorage.getItem("adobePrevPage")&&(t.contextData.prevPage=sessionStorage.getItem("adobePrevPage"),sessionStorage.removeItem("adobePrevPage")),sessionStorage.setItem("adobePrevPage",("contentPageType"in t.contextData?t.contextData.contentPageType:"")+"|"+("pageTitle"in t.contextData?t.contextData.pageTitle:"")),(localStorage.hasOwnProperty("adobeLastHitTstamp")&&Date.now()-localStorage.getItem("adobeLastHitTstamp")>18e5||!localStorage.hasOwnProperty("adobeLastHitTstamp"))&&localStorage.removeItem("adobeUniqueContentList"),console.log("time since last hit"+(Date.now()-localStorage.getItem("adobeLastHitTstamp"))),!("contentPageType"in t.contextData)||!("pageUniqueID"in t.contextData)||t.contextData.contentPageType.toLowerCase().includes("landingpage")||t.contextData.contentPageType.toLowerCase().includes("homepage")||t.contextData.contentPageType.toLowerCase().includes("error")||(newContentID=t.contextData.pageUniqueID.split("|")[2],localStorage.hasOwnProperty("adobeUniqueContentList")?(uniqueContentList=JSON.parse(localStorage.getItem("adobeUniqueContentList")),uniqueContentList[newContentID]=1,localStorage.setItem("adobeUniqueContentList",JSON.stringify(uniqueContentList))):(uniqueContentList={},uniqueContentList[newContentID]=1,localStorage.setItem("adobeUniqueContentList",JSON.stringify(uniqueContentList)))),localStorage.hasOwnProperty("adobeUniqueContentList")&&(uniqueContentList=JSON.parse(localStorage.getItem("adobeUniqueContentList")),t.contextData.uniqueContentCountVisit=Object.keys(uniqueContentList).length),localStorage.setItem("adobeLastHitTstamp",Date.now()),function(){function e(e){sessionStorage.setItem("newLinkTrackingMap",JSON.stringify(e))}function n(e){for(key in e)t.contextData[key]=e[key];t.linkTrackEvents="event24",t.linkTrackVars=Object.keys(t.contextData).map((function(e){return"contextData."+e})).join(","),t.events="event24",_satellite.logger.log("Link track vars: "+JSON.stringify(t.linkTrackVars)),t.tl(this,"o","AMACTION:Module Link Click")}function i(t,i,r,a,o){void 0===a&&(a=0),void 0===o&&(o=""),t.forEach((function(t,s){t.addEventListener("click",(function(){linkTrackingMap={moduleName:i+"|"+String(r),moduleIndex:String(r),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector(".o-StoryCard__a-HeadlineText").innerText,linkPosition:String(s+a),componentTitle:o},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)}))}))}function r(e){return prevSibling=e.previousElementSibling,prevSibling&&(prevPrevSibling=prevSibling.previousElementSibling),
"undefined"!=typeof prevSibling&&prevSibling&&"heading section"==prevSibling.getAttribute("class")?prevSibling.querySelector(".o-Heading__a-Title").innerText:"undefined"!=typeof prevPrevSibling&&prevPrevSibling&&"heading section"==prevPrevSibling.getAttribute("class")?prevPrevSibling.querySelector(".o-Heading__a-Title").innerText:""}var a,o;!function(){if(null!==sessionStorage.getItem("newLinkTrackingMap")){for(key in metaMap=JSON.parse(sessionStorage.getItem("newLinkTrackingMap")),metaMap)t.contextData[key]=metaMap[key];sessionStorage.removeItem("newLinkTrackingMap")}}(),_satellite.logger.log("Attempting to add click tracking to subnav"),subNavModules=document.querySelectorAll("div.o-Header__a-SubNav")[0],"undefined"!=typeof subNavModules&&subNavModules.querySelectorAll("li a").forEach((function(t,i){t.addEventListener("click",(function(){linkTrackingMap={moduleName:"Sub Nav|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.innerText,linkPosition:String(i),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)}))})),function(){_satellite.logger.log("Attempting to add click tracking to hamburger");try{hamburgerModules=document.querySelectorAll("nav.o-Header__m-NavMenu")[0],hamburgerModules.querySelectorAll("li.o-NavMenu__a-NavListItem").forEach((function(t,i){firstAnchor=t.querySelector("a"),firstAnchor.addEventListener("click",(function(){linkTrackingMap={moduleName:"Hamburger Menu|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:t.innerText,linkPosition:String(i),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)}))}))}catch(e){}}(),_satellite.logger.log("Attempting to add click tracking to features module"),featureModules=document.querySelectorAll("div.storyFeature"),featureModules.forEach((function(t,r){featureImgLink=t.querySelector("a.o-StoryFeature__m-MediaWrap"),featureImgLink.addEventListener("click",(function(){linkTrackingMap={moduleName:"Featured|"+String(r),moduleIndex:String(r),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector("img").getAttribute("title").slice(),linkPosition:String(0),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)})),featureTextLink=t.querySelector("a.o-StoryFeature__m-Text"),featureTextLink.addEventListener("click",(function(){linkTrackingMap={moduleName:"Featured|"+String(r),moduleIndex:String(r),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector(".o-StoryFeature__a-Title").innerText,linkPosition:String(0),componentTitle:""},_satellite.logger.log(JSON.stringify(linkTrackingMap)),e(linkTrackingMap),n(linkTrackingMap)})),storyCards=t.querySelectorAll(".o-StoryCard"),i(storyCards,"Featured",r,1)})),_satellite.logger.log("Attempting to add click tracking to story grid"),storyGridModules=document.querySelectorAll("div.storyGridList.section"),storyGridModules.forEach((function(e,t){componentTitle=r(e),storyCards=e.querySelectorAll(".o-StoryCard"),i(storyCards,"Story Grid",t,0,componentTitle)})),_satellite.logger.log("Attempting to add click tracking to carousel"),carouselModules=document.querySelectorAll("div.carousel.section"),carouselModules.forEach((function(e,t){componentTitle=r(e),storyCards=e.querySelectorAll(".o-StoryCard"),i(storyCards,"Carousel",t,0,componentTitle)})),_satellite.logger.log("Attempting to add click tracking to special features carousel"),specialFeatureCarouselModules=document.querySelectorAll("div.specialFeatureCarousel.section"),specialFeatureCarouselModules.forEach((function(e,t){componentTitle=e.querySelector(".o-SpecialFeatureCarousel__a-Heading").innerText,storyCards=e.querySelectorAll(".o-StoryCard"),i(storyCards,"Special Feature Carousel",t,0,componentTitle)})),a=20,o=setInterval((function(){_satellite.logger.log("track_page_view: Attempting to add click tracking to riser, tries left",a);try{riserModuleAnchors=document.querySelector("div.relatedRiser").querySelectorAll("div.riser-item a")}catch(e){_satellite.logger.log("track_page_view: cannot find riser module: "+JSON.stringify(e))}"undefined"!=typeof riserModuleAnchors&&riserModuleAnchors.length>0&&(riserModuleAnchors.forEach((function(t,i){_satellite.logger.log("attaching click handler to index "+i),t.addEventListener("click",(function(){linkTrackingMap={moduleName:"Article Riser|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:this.querySelector("div.o-StoryCard__a-Headline").innerText,linkPosition:String(i),componentTitle:"Article List"},e(linkTrackingMap),n(linkTrackingMap)}))})),_satellite.logger.log("attaching click handler to collapase"),document.querySelector('div.relatedRiser div.riser-header-wrapper button[data-type="riser-toggle"]').addEventListener("click",(function(){linkTrackingMap={moduleName:"Article Riser|0",moduleIndex:String(0),locUrl:window.location.href,TargetUrl:this.href,linkTitle:"Collapse",linkPosition:String(0),componentTitle:"Collapse"},n(linkTrackingMap)})),_satellite.logger.log("Successful attach click tracker to riser on w/ "+String(a)+" tries left"),clearInterval(o)),a<=0&&(_satellite.logger.log("track_page_view: Riser not found, attemptiong to clear interval",a,typeof a),clearInterval(o)),a--}),250)}(),function(){try{"SUBSCRIPTIONREQUIRED"in mdManager.getKeys()?subscriptionrequired="true"==mdManager.getKeys().SUBSCRIPTIONREQUIRED?"locked":"unlocked":subscriptionrequired="unlocked",t.contextData.videoAccessType=subscriptionrequired}catch(e){}}(),console.log("page bottom triggered")}},trackerProperties:{pageURL:"%browser page URL%",campaign:{type:"value",value:"%Campaign ID%"},pageName:"%browser page title%",referrer:"%browser referrer%"}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"if (typeof window.launchFiredTags !== 'object'){\n  window.launchFiredTags = {};\n}\nwindow.launchFiredTags['Adobe PV'] = true;\n/* Commented out to turn off\n  if (DD_LOGS) {\n    DD_LOGS.onReady(function() {\n      window.DD_LOGS.logger.info('V8: Adobe PV sent', { service: 'GOLFDIGEST', id : window.ddUniqueId });\n    });\n  }\n*/",language:"javascript"}}]},{id:"RLa0a523f3f0e24cfc973efa05436fe82a",name:"Get GeoLocation",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var envs = ['development', 'staging'];\nvar inDev = envs.includes(_satellite.environment.stage);\n\n\nwindow.geofeedlaunch = function(options) {\n\n    // string two digit continent code EU, NA, OC, AS, SA, AF\n  \n    var continent = options.continent.toString();\n    _satellite.setVar('geoContinent', continent);\n  \n    // string two digit ISO country code\n    var country = options.country.toString();\n    _satellite.setVar('geoCountry', country);\n  \n    // string two digit state code\n    var state = options.state.toString();\n    _satellite.setVar('geoState', state);\n  \n    if (inDev) {\n      console.log('geolocation: ', continent, country, state);\n      console.log('geolocation: firing GeoLocationDetected event');\n    }  \n    const theEvent = new Event(\"GeoLocationDetected\");\n    document.dispatchEvent(theEvent);\n};\n\n// Call geo-location JSON service\nif (inDev) {\n   console.log(\"geolocation: creating script to get location\");\n}\n\n// Note that the last element in the route specifies the windows function to call, so geofeedlaunch matches the function name above\n//\nvar json = document.createElement('script');\njson.setAttribute('src', 'https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeedlaunch');\ndocument.head.appendChild(json);\n",language:"javascript"}}]},{id:"RLa6c916d896df45ad8b3ce9c1f3ee1f42",name:"Metabet - C0004",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex",caseInsensitive:!0},leftOperand:"%Build Environment%",rightOperand:"(^production$|^staging$)"}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script defer src="https://go.metabet.io/js/global.js?siteID=golfdigest"></script>',language:"html"}}]},{id:"RLa7c81985b0904c8f9458237622e71fb9",name:"Wunderkind - On All page load -C0004",events:[{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"function DDLog(message) {\n  //turn off logging to Datadog\n  if (true) return;\n  \n  if (DD_LOGS) {\n    DD_LOGS.onReady(function() {\n      window.DD_LOGS.logger.log('V6: ' + message, { service: 'GOLFDIGEST', id : window.ddUniqueId }, 'info');\n      if (inDev) {\n        console.log('DEBUG: ID: ' + window.ddUniqueId + ': ' + message);\n      }\n    });\n  } else {\n    if (inDev) {\n      console.log(\"DDLOG: DD_LOGS null\");\n    }\n  }\n\n}\n\nfunction checkLoaded() {\n  if (typeof window.bouncex !== 'undefined') {\n    if (inDev) console.log('Wunderkind: Bouncex exists, send beacon, clear interval');\n    clearInterval(wkTimer);\n    // s.tl(true,'o','TEST:wunderkind_bouncex_exists');\n    DDLog('Wunderkind Bouncex Loaded');\n  } else {\n    wkTimerTries--;\n    if (inDev) console.log('Wunderkind: wkTimerTries ' + wkTimerTries);\n    if (wkTimerTries === 0) {\n      clearInterval(wkTimer);\n      if (inDev) console.log('Wunderkind: bouncex never loaded, cleared wkTimerTries, send beacon');\n      //s.tl(true,'o','TEST:wunderkind_bouncex_not_loaded');\n      DDLog('Wunderkind Bouncex Not Loaded');\n    }\n  }\n}\n\n\nvar inDev = (_satellite.environment.stage == 'staging') || (_satellite.environment.stage == 'development');\nvar fired = false;\nvar wkTimer = null;\nvar wkTimerTries = 10;\n\n_satellite.logger.log('Wunderkind: All Page load Action started inDev', inDev);\n\n// This is a Data element that will return either 'consentgiven' or 'consentnotgiven'\n//\nwindow.OneTrustCallee = \"Wunderkind\";  // Global var for data element function check\nlet consent = _satellite.getVar('OneTrust Targeting Check');\nif (inDev) {\n    console.log('Wunderkind: OT Targeting Check returns ' + consent);\n}\n\nif (typeof consent === 'undefined') {\n  DDLog('Wunderkind: getVar OneTrust Targeting Check returns undefined');\n}\nif ((typeof window.launchFiredTags !== 'undefined') && (window.launchFiredTags.Wunderkind === true)) {\n  fired = true;\n  if (inDev) {\n    _satellite.logger.info('Wunderkind already fired');\n  }\n}\n/*  This is the function that wunderkind gave us.  I modified so it only runs if the tag has not fired yet\n\n  (function(d) { \n    var e = d.createElement('script'); \n    e.src = d.location.protocol + '//tag.wknd.ai/5687/i.js'; \n    e.async = true; \n    d.getElementsByTagName(\"head\")[0].appendChild(e); }(document)); \n*/\n\n// If the script hasn't fired yet and consent is given, then download the wunderkind script\n//\nif ((fired === false) && (typeof consent !== 'undefined') && (consent === 'consentgiven')) {\n  \n  if (inDev) {\n    console.log('Wunderkind: Requesting script to be downloaded');\n  }\n  \n  DDLog('Wunderkind Requesting i.js, consent: ' + consent);\n  \n  try {\n    let scriptEle = document.createElement(\"script\");\n    \n    scriptEle.setAttribute(\"src\", document.location.protocol + '//tag.wknd.ai/5687/i.js');\n    scriptEle.setAttribute(\"type\", \"text/javascript\");\n    scriptEle.setAttribute(\"async\", true);\n\n    let head = document.getElementsByTagName(\"head\")[0];\n//    document.body.appendChild(scriptEle);\n    head.appendChild(scriptEle);\n    \n    // For debugging.  Check to see if the Wunderkind decision engine was loaded.\n    //\n    if (inDev) {\n      console.log('Wunderkind: setting up event listeners and check loaded interval');\n    }\n    // success event \n    scriptEle.addEventListener(\"load\", () => {\n      _satellite.logger.info(\"Wunderkind: File loaded\");\n\n      DDLog('Wunderkind i.js Loaded.  Checking for bouncex');\n      // turn off in production\n      // wkTimer = setInterval(checkLoaded, 1000);  \n    });\n    // error event\n    scriptEle.addEventListener(\"error\", (ev) => {\n      console.log(\"Wunderkind: Error on loading file\", ev);\n      DDLog('Wunderkind i.js Errored');\n    });\n    \n    /* Use for Debugging\n  if (inDev) {\n    var now = Date.now();\n    console.log(\"Wunderkind: All Page Load: Fired script download \" + now);\n    var consentCookie = _satellite.cookie.get('OptanonConsent');\n    console.log(\"Wunderkind: consentCookie\", consentCookie);\n    var oneTrustObject = window.OptanonActiveGroups;\n    console.log(\"Wunderkind: OptanonActiveGroups\", oneTrustObject)\n  }\n  */\n  \n    // Specify that the script was launched\n    //\n    if (typeof window.launchFiredTags !== 'object') {\n      window.launchFiredTags = {};\n    }\n    _satellite.logger.log('Wunderkind: Setting launchFiredTags.Wunderkind to true');\n    window.launchFiredTags.Wunderkind = true;\n    \n  } catch (e) {\n    console.log('Wunderkind: ERROR adding script');\n    console.log(e);\n  } \n\n} else {\n  if (inDev) {\n    console.log(\"Wunderkind: Tag had already fired.  not reloading script\");\n  }\n  DDLog('Wunderkind: Not requesting i.js Fired: ' + fired + ', consent: ' + consent);\n}\nif (inDev) {\n  console.log('Wunderkind: completed action');\n}\n\n",language:"javascript"}}]},{id:"RLaf240709d48c4b3aaec4951c1aba5c60",name:"GD+ Piano selectTerm - C0002",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"pianoSelectTerm"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=e.detail;delete t.contextData.custom_event,OptanonActiveGroups.includes("C0004")||(t.contextData["cm.ssf"]="1"),t.contextData.subscriptionid=n.termId,t.contextData.subscriptionplan=n.termName,t.contextData.shoppingproducts="rid="+n.resourceId,t.products=";"+n.termId+";1;",t.linkTrackVars=Object.keys(t.contextData).map((function(e){return"contextData."+e})).join(",")+",products",_satellite.logger.log("piano selectTerm called"),_satellite.logger.log(JSON.stringify(n))}},trackerProperties:{}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"AMACTION:Term Selection",linkType:"o"}}]},{id:"RLbda01ed8236d4046a72e0c414e819a76",name:"Shopping Embed click tracking - C0002",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"(function(){\n  narrative_module_list = document.querySelectorAll('div.shoppingEmbed div.m-ProductsList.is-narrative');\n\n\n  narrative_module_list.forEach(function(moduleElem, moduleIndex){\n    moduleElem.querySelectorAll('div.m-Product__m-Body').forEach(function(prodElem, prodIndex){\n      var prod_name = prodElem.getAttribute('data-product-title');\n      var external_url = prodElem.querySelector('div.m-Product__m-ButtonWrap a').getAttribute('href');\n\n      (function(){\n        prodElem.querySelectorAll('div.m-Product__m-Body a').forEach(function(linkElem){\n            linkElem.addEventListener('click', function(){\n              _satellite.track('track_action', {\n                'custom_event': 'external_link_click',\n                'moduleName': 'shopping embed',\n                'componentTitle': 'narrative|' + (moduleIndex+1),\n                'linkTitle': prod_name,\n                'linkPosition': prodIndex + 1,\n                'targetUrl': external_url\n              });\n            }, false);\n        });\n      })();\n\n\n    });\n  });\n\n\n  grid_module_list = document.querySelectorAll('div.shoppingEmbed div.m-Body.is-grid');\n\n  regular_grid_count = 0;\n  carousel_grid_count = 0;\n  cur_module_index = 0;\n\n  grid_module_list.forEach(function(moduleElem, moduleIndex){\n    module_type = moduleElem.classList.contains('is-carousel') ? 'carousel grid' : 'regular grid';\n\n    if(module_type == 'carousel grid'){\n      carousel_grid_count++;\n      cur_module_index = carousel_grid_count;\n    }\n\n    if(module_type == 'regular grid'){\n      regular_grid_count++;\n      cur_module_index = regular_grid_count;\n    }\n\n\n    moduleElem.querySelectorAll('div.m-Product__m-Body').forEach(function(prodElem, prodIndex){\n      prod_name = prodElem.getAttribute('data-product-title');\n      external_url = prodElem.querySelector('a').getAttribute('href');\n      prodElem.querySelectorAll('a').forEach(function(linkElem){\n        (function(){\n          var contextVars = {\n            'custom_event': 'external_link_click',\n            'moduleName': 'shopping embed',\n            'componentTitle': module_type + '|' + (cur_module_index),\n            'linkTitle': prod_name,\n            'linkPosition': prodIndex + 1,\n            'targetUrl': external_url\n          }\n\n          linkElem.addEventListener('click', function(){\n            _satellite.track('track_action', Object.assign({}, contextVars));\n          }, false);\n        })();\n\n      });\n    });\n  });\n})();\n",language:"javascript"}}]},{id:"RLc07b4033970f4067aa30391188ebd5e0",name:"Galleries Advance Track Page View - C0002",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"gallery_advance_page"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){Object.keys(_satellite.getVar("mdManagerToCDMapping")).forEach((function(e){_satellite.getVar("mdManagerToCDMapping")[e].forEach((function(n){t.contextData[n]=window.mdManager.getKeys()[e][0]}))})),t.contextData.virtual_rsid="golfdigest",t.trackModLocalStorage(),OptanonActiveGroups.includes("C0004")||(t.contextData["cm.ssf"]="1"),console.log("page bottom triggered")}},trackerProperties:{pageURL:"%browser page URL%",pageName:"%browser page title%",referrer:"%browser referrer%"}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"page"}}]},{id:"RLdc3faba9a0fb4a9d9811d4c344754182",name:"GD Schools and GD+ - Piano Purchase - Adobe - C0002",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"piano_purchase"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:"C0002",valueIsRegex:!0}}],actions:[{modulePath:"adobe-analytics/src/lib/actions/setVariables.js",settings:{customSetup:{source:function(e,t){var n=e.detail;delete t.contextData.custom_event,OptanonActiveGroups.includes("C0004")||(t.contextData["cm.ssf"]="1"),t.contextData.custom_event="purchase_success",t.contextData.purchaseid=n.termConversionId,t.contextData.subscriptionid=n.termId,t.contextData.shoppingproducts="rid="+n.rid,t.products=";"+n.termId+";1;"+n.chargeAmount,t.linkTrackVars=Object.keys(t.contextData).map((function(e){return"contextData."+e})).join(",")+",products"}},trackerProperties:{pageURL:"%browser page URL%",campaign:{type:"value",value:"%Campaign ID%"},pageName:"%browser page title%",referrer:"%browser referrer%"}}},{modulePath:"adobe-analytics/src/lib/actions/sendBeacon.js",settings:{type:"link",linkName:"Piano Purchase",linkType:"o"}}]},{id:"RLe6096cc4f7884c0c847bba4fafbbc9c3",name:"Wunderkind - On GD+ Completed Purchase",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"piano_purchase"},ruleOrder:60}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RC4ef4bbf51eb34bab9eef139c73ffe5e9-source.min.js",language:"javascript",isExternal:!0}}]},{id:"RLeea1877606d846558f739bcf93a07081",name:"LiveIntent - On Page Load - C0004",events:[{modulePath:"core/src/lib/events/customEvent.js",settings:{type:"OneTrustGroupsUpdated",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50},{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"var inDev = (_satellite.environment.stage == 'staging') || (_satellite.environment.stage == 'development');\nvar fired = false;\n\n_satellite.logger.log('LiveIntent: All Page load Action started inDev', inDev);\n\n// This is a Data element that will return either 'consentgiven' or 'consentnotgiven'\n//\nwindow.OneTrustCallee = \"LiveIntent\";  // Global var for getVar function\nvar consent = _satellite.getVar('OneTrust Targeting Check');\nif (inDev) {\n    console.log('LiveIntent: OT Targeting Check returns ' + consent);\n}\n\nif ((typeof window.launchFiredTags !== 'undefined') && (window.launchFiredTags.LiveIntent === true)) {\n  fired = true;\n  if (inDev) {\n    console.log('LiveIntent already fired');\n  }\n}\n\n// If the script hasn't fired yet and consent is given, then download the wunderkind script\n//\nif (!fired && (consent == 'consentgiven')) {\n  if (inDev) {\n    console.log('LiveIntent: Requesting script to be downloaded');\n  }\n  let scriptEle = document.createElement(\"script\");\n  scriptEle.setAttribute(\"src\", document.location.protocol + '//b-code.liadm.com/a-02cr.min.js');\n  scriptEle.setAttribute(\"type\", \"text/javascript\");\n  scriptEle.setAttribute(\"async\", true);\n\n  document.body.appendChild(scriptEle);\n\n  // success event \n  scriptEle.addEventListener(\"load\", () => {\n    if (inDev) {\n      console.log(\"LiveIntent: File loaded\");\n    }\n  });\n   // error event\n  scriptEle.addEventListener(\"error\", (ev) => {\n    console.log(\"LiveIntent: Error on loading file\", ev);\n  });\n  \n  // Specify that the script was launched\n  //\n  if (typeof window.launchFiredTags !== 'object') {\n    window.launchFiredTags = {};\n  }\n  _satellite.logger.log('LiveIntent: Setting launchFiredTags.LiveIntent to true');\n  window.launchFiredTags.LiveIntent = true;\n  \n} else {\n  if (inDev) {\n    console.log(\"LiveIntent: Tag had already fired.  not reloading script\");\n  }\n}\n",language:"javascript"}}]},{id:"RLf5f2944e77194a18b275995afe1b92e2",name:"Initialize Adobe Analytics Plugins",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"common-analytics-plugins/src/lib/actions/initialize.js",settings:{cs:!1,ft:!1,il:!1,mv:!1,ns:!1,pt:!1,ape:!1,apl:!1,apv:!1,fpo:!1,ggc:!1,gnr:!0,gpn:!1,gpv:!1,gqp:!1,grl:!1,gtp:!1,gvd:!1,gvn:!0,gvo:!1,rfl:!1,gapv:!1,gplt:!1,gtbe:!1,gttc:!1,gdslv:!1,gtslv:!1}}]},{id:"RLf964b201dddb480795b3c3dfbb82f9a1",name:"LiveIntent - On GD+ Payment Screen Load - C0004",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"pianoSelectTerm"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe-golf-digest-plus"}]}},{modulePath:"core/src/lib/conditions/variable.js",settings:{name:"OptanonActiveGroups",value:",C0004,",valueIsRegex:!0}}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/479fbb05b9cf/14bb33a6fc85/8222662a8a3c/RCad5b2187e89a4fd7a555009a308587ad-source.min.js",language:"javascript",isExternal:!0}}]}]};var _satellite=function(){"use strict";function e(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}function n(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}function i(e){var t={exports:{}};return e(t,t.exports),t.exports}function r(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}function a(e){return Boolean(e&&void 0!==e.length)}function o(){}function s(e,t){return function(){e.apply(t,arguments)}}function l(e){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,l._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void d(t.promise,e)}u(t.promise,i)}else(1===e._state?u:d)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof l)return e._state=3,e._value=t,void p(e);if("function"==typeof n)return void g(s(n,t),e)}e._state=1,e._value=t,p(e)}catch(t){d(e,t)}}function d(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&l._immediateFn((function(){e._handled||l._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function g(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,d(t,e))}))}catch(e){if(n)return;n=!0,d(t,e)}}function f(e){return!0===Be(e)&&"[object Object]"===Object.prototype.toString.call(e)}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function v(e){return e.substr(0,e.indexOf("["))}function y(e,t,n){if(e.length&&Ue(t)){var i=e[0];if(1!==e.length){var r=e.slice(1);if(!m(i))return y(r,t[i],n);var a=t[i=v(i)];Array.isArray(a)&&a.forEach((function(e){return y(r,e,n)}))}else t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=n(t[i]))}}if(window.atob){var b=document,I=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,k=t()?Object.assign:function(t){for(var n,i,r=e(t),a=1;a<arguments.length;a++){for(var o in n=Object(arguments[a]))T.call(n,o)&&(r[o]=n[o]);if(I){i=I(n);for(var s=0;s<i.length;s++)S.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r},A=k,E=window,C=function(e,t,n,i){var r,a=Boolean(t&&Array.isArray(n)),o=Boolean(a&&e),s=document.createElement("a");if(a){var l=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||l(),/^\/\/.+/.test(e)?s.href=E.location.protocol+e:s.href=e),s.hostname||l(),-1===n.indexOf(s.hostname)){var c=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw c.code="dynamic_host_not_allowed",c}}var u=function(){if(null!=r)return r;if(o){var e=s.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),r=s.protocol+"//"+e}else r="";return r},d=function(e){return o&&"string"==typeof e?[u(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},p={getTurbineHost:u,decorateWithDynamicHost:d,get isDynamicEnforced(){return a}};return E&&i.onDebugChanged((function(e){e?E.dynamicHostResolver=p:delete E.dynamicHostResolver})),p},w=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(n){t.push({rule:e,event:n})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},D="debug",P=function(e,t){var n=function(){return"true"===e.getItem(D)},i=function(t){e.setItem(D,t)},r=[],a=function(e){r.push(e)};return t.outputEnabled=n(),{onDebugChanged:a,getDebugEnabled:n,setDebugEnabled:function(e){n()!==e&&(i(e),t.outputEnabled=e,r.forEach((function(t){t(e)})))}}},M="Module did not export a function.",O=function(e,t,n){return function(i,r,a){a=a||[];var o=e.getModuleExports(i.modulePath);if("function"!=typeof o)throw new Error(M);var s=e.getModuleDefinition(i.modulePath),l=i.settings||{};!i.hasTransformedFilePaths&&s.filePaths&&(n(l,s.filePaths,i.modulePath),i.hasTransformedFilePaths=!0);var c=t(l,r);return o.bind(null,c).apply(null,a)}},N=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},L={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},R="\ud83d\ude80",x=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":R,j=!1,V=function(e){if(j&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(x),e!==L.DEBUG||window.console[e]||(e=L.INFO),window.console[e].apply(window.console,t)}},F=V.bind(null,L.LOG),B=V.bind(null,L.INFO),U=V.bind(null,L.DEBUG),H=V.bind(null,L.WARN),q=V.bind(null,L.ERROR),Y=function(){var e=j;j=!0,V.apply(null,Array.prototype.concat(L.WARN,Array.prototype.slice.call(arguments))),e||(j=!1)},G={log:F,info:B,debug:U,warn:H,error:q,deprecation:Y,get outputEnabled(){return j},set outputEnabled(e){j=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:F.bind(null,t),info:B.bind(null,t),debug:U.bind(null,t),warn:H.bind(null,t),error:q.bind(null,t)}}},K="com.adobe.reactor.",W=function(e,t){var n=K+(t||"");return{getItem:function(t){try{return E[e].getItem(n+t)}catch(e){return null}},setItem:function(t,i){try{return E[e].setItem(n+t,i),!0}catch(e){return!1}}}},z="dataElements.",Q=W("sessionStorage",z),J=W("localStorage",z),$={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},X={},Z=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},ee={setValue:function(e,t,n){var i;switch(t){case $.PAGEVIEW:return void(X[e]=n);case $.SESSION:return void((i=Z(n))&&Q.setItem(e,i));case $.VISITOR:return void((i=Z(n))&&J.setItem(e,i))}},getValue:function(e,t){var n;switch(t){case $.PAGEVIEW:return X.hasOwnProperty(e)?X[e]:null;case $.SESSION:return null===(n=Q.getItem(e))?n:JSON.parse(n);case $.VISITOR:return null===(n=J.getItem(e))?n:JSON.parse(n)}}},te=function(e,t,n,i){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+n+(i?"\n"+i:"")},ne=function(e,t,n,i,r){return function(a,o){var s=t(a);if(!s)return i?"":void 0;var l,c,u=s.storageDuration;try{l=e.getModuleExports(s.modulePath),c=e.getModuleDefinition(s.modulePath)}catch(e){return void G.error(te(s,a,e.message,e.stack))}if("function"==typeof l){var d,p=s.settings||{};!s.hasTransformedFilePaths&&c.filePaths&&(r(p,c.filePaths,s.modulePath),s.hasTransformedFilePaths=!0);try{d=l(n(p,o),o)}catch(e){return void G.error(te(s,a,e.message,e.stack))}return u&&(null!=d?ee.setValue(a,u,d):d=ee.getValue(a,u)),null==d&&null!=s.defaultValue&&(d=s.defaultValue),"string"==typeof d&&(s.cleanText&&(d=N(d)),s.forceLowerCase&&(d=d.toLowerCase())),d}G.error(te(s,a,"Module did not export a function."))}},ie={text:function(e){return e.textContent},cleanText:function(e){return N(e.textContent)}},re=function(e,t,n){for(var i,r=e,a=0,o=t.length;a<o;a++){if(null==r)return;var s=t[a];if(n&&"@"===s.charAt(0)){var l=s.slice(1);r=ie[l](r)}else if(r.getAttribute&&(i=s.match(/^getAttribute\((.+)\)$/))){var c=i[1];r=r.getAttribute(c)}else r=r[s]}return r},ae=function(e,t,n){return function(i,r){var a;if(t(i))a=n(i,r);else{var o=i.split("."),s=o.shift()
;"this"===s?r&&(a=re(r.element,o,!0)):"event"===s?r&&(a=re(r,o)):"target"===s?r&&(a=re(r.target,o)):a=re(e[s],o)}return a}},oe=function(e,t){return function(n){var i=n.split(".")[0];return Boolean(t(n)||"this"===i||"event"===i||"target"===i||e.hasOwnProperty(i))}},se=function(e,t,n){var i={exports:{}};return e.call(i.exports,i,i.exports,t,n),i.exports},le=function(){var e={},t=function(t){var n=e[t];if(!n)throw new Error("Module "+t+" not found.");return n},n=function(){Object.keys(e).forEach((function(e){try{i(e)}catch(n){var t="Error initializing module "+e+". "+n.message+(n.stack?"\n"+n.stack:"");G.error(t)}}))},i=function(e){var n=t(e);return n.hasOwnProperty("exports")||(n.exports=se(n.definition.script,n.require,n.turbine)),n.exports};return{registerModule:function(t,n,i,r,a){var o={definition:n,extensionName:i,require:r,turbine:a};o.require=r,e[t]=o},hydrateCache:n,getModuleExports:i,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},ce=!1,ue=function(e){return function(t,n){var i=e._monitors;i&&(ce||(G.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),ce=!0),i.forEach((function(e){e[t]&&e[t](n)})))}},de=function(e,t,n){var i,r,a,o,s=[],l=function(i,r,a){if(!e(r))return i;s.push(r);var o=t(r,a);return s.pop(),null==o&&n?"":o};return i=function(e,t){var n=/^%([^%]+)%$/.exec(e);return n?l(e,n[1],t):e.replace(/%(.+?)%/g,(function(e,n){return l(e,n,t)}))},r=function(e,t){for(var n={},i=Object.keys(e),r=0;r<i.length;r++){var a=i[r],s=e[a];n[a]=o(s,t)}return n},a=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++)n.push(o(e[i],t));return n},o=function(e,t){return"string"==typeof e?i(e,t):Array.isArray(e)?a(e,t):"object"==typeof e&&null!==e?r(e,t):e},function(e,t){return s.length>10?(G.error("Data element circular reference detected: "+s.join(" -> ")),e):o(e,t)}},pe=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)e[n]=t[n]}}},he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ge=setTimeout;l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){var n=new this.constructor(o);return c(this,new h(e,t,n)),n},l.prototype.finally=r,l.all=function(e){return new l((function(t,n){function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(e,t)}),n)}r[e]=a,0==--o&&t(r)}catch(e){n(e)}}if(!a(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var o=r.length,s=0;s<r.length;s++)i(s,r[s])}))},l.resolve=function(e){return e&&"object"==typeof e&&e.constructor===l?e:new l((function(t){t(e)}))},l.reject=function(e){return new l((function(t,n){n(e)}))},l.race=function(e){return new l((function(t,n){if(!a(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,r=e.length;i<r;i++)l.resolve(e[i]).then(t,n)}))},l._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){ge(e,0)},l._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var fe=n(Object.freeze({__proto__:null,default:l})),_e="undefined"!=typeof window&&window.Promise||void 0!==he&&he.Promise||fe.default||fe,me=function(e,t,n){return function(i,r,a,o){return o.then((function(){var o,s=i.delayNext;return new _e((function(t,n){var r=e(i,a,[a]);if(!s)return t();var l=i.timeout,c=new _e((function(e,t){o=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+l/1e3+" seconds to complete. "))}),l)}));_e.race([r,c]).then(t,n)})).catch((function(e){return clearTimeout(o),e=t(e),n(i,r,e),_e.reject(e)})).then((function(){clearTimeout(o)}))}))}},ve=function(e,t,n,i,r){return function(a,o,s,l){return l.then((function(){var l;return new _e((function(t,n){var i=e(a,s,[s]),r=a.timeout,o=new _e((function(e,t){l=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+r/1e3+" seconds to complete. "))}),r)}));_e.race([i,o]).then(t,n)})).catch((function(e){return clearTimeout(l),e=t(e),i(a,o,e),_e.reject(e)})).then((function(e){if(clearTimeout(l),!n(a,e))return r(a,o),_e.reject()}))}))}},ye=_e.resolve(),be=function(e,t,n){return function(i,r){return i.conditions&&i.conditions.forEach((function(t){ye=e(t,i,r,ye)})),i.actions&&i.actions.forEach((function(e){ye=t(e,i,r,ye)})),ye=(ye=ye.then((function(){n(i)}))).catch((function(){}))}},Ie=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},Te=function(e,t,n,i){return function(r,a){var o;if(r.conditions)for(var s=0;s<r.conditions.length;s++){o=r.conditions[s];try{var l=e(o,a,[a]);if(Ie(l))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(o,l))return n(o,r),!1}catch(e){return i(o,r,e),!1}}return!0}},Se=function(e,t){return function(n,i){e(n,i)&&t(n,i)}},ke=function(e){return function(t){var n=e.getModuleDefinition(t.modulePath);return n&&n.displayName||t.modulePath}},Ae=function(e){return function(t){var n=t.rule,i=t.event,r=e.getModuleDefinition(i.modulePath).name;return{$type:e.getModuleExtensionName(i.modulePath)+"."+r,$rule:{id:n.id,name:n.name}}}},Ee=function(e,t,n,i,r,a){return function(o,s){var l=s.rule,c=s.event;c.settings=c.settings||{};try{var u=r(s);t(c,null,[function(t){var i=n(u,t);o((function(){e(i,l)}))}])}catch(e){a.error(i(c,l,e))}}},Ce=function(e,t,n,i){return function(r,a,o){var s=t(r);n.error(e(s,a.name,o)),i("ruleActionFailed",{rule:a,action:r})}},we=function(e,t,n,i){return function(r,a,o){var s=t(r);n.error(e(s,a.name,o)),i("ruleConditionFailed",{rule:a,condition:r})}},De=function(e,t,n){return function(i,r){var a=e(i);t.log('Condition "'+a+'" for rule "'+r.name+'" was not met.'),n("ruleConditionFailed",{rule:r,condition:i})}},Pe=function(e,t){return function(n){e.log('Rule "'+n.name+'" fired.'),t("ruleCompleted",{rule:n})}},Me=function(e,t,n){return function(i,r){var a;if(i.actions)for(var o=0;o<i.actions.length;o++){a=i.actions[o];try{e(a,r,[r])}catch(e){return void t(a,i,e)}}n(i)}},Oe=function(e,t,n,i){return function(r,a){i("ruleTriggered",{rule:a}),e?n(a,r):t(a,r)}},Ne=function(e,t,n){return'Failed to execute "'+e+'" for "'+t+'" rule. '+n.message+(n.stack?"\n"+n.stack:"")},Le=function(e,t){return t&&!e.negate||!t&&e.negate},Re=[],xe=!1,je=function(e){xe?e():Re.push(e)},Ve=function(e,t,n){e(t).forEach((function(e){n(je,e)})),xe=!0,Re.forEach((function(e){e()})),Re=[]},Fe=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},Be=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},Ue=function(e){var t,n;return!1!==f(e)&&("function"==typeof(t=e.constructor)&&(!1!==f(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},He=function(e,t){return Ue(t=t||{})?t=A({},t,e):A(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return G.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},qe=function(e,t){return function(n,i){var r=e[n];if(r){var a=r.modules;if(a)for(var o=Object.keys(a),s=0;s<o.length;s++){var l=o[s],c=a[l];if(c.shared&&c.name===i)return t.getModuleExports(l)}}}},Ye=function(e,t){return function(){return t?e(t):{}}},Ge=function(e,t,n){return function(i){if(n){var r=i.split(".");r.splice(r.length-1||1,0,"min"),i=r.join(".")}return e(t)+i}},Ke=".js",We=function(e){return e.substr(0,e.lastIndexOf("/"))},ze=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},Qe=function(e,t){ze(t,Ke)||(t+=Ke);var n=t.split("/"),i=We(e).split("/");return n.forEach((function(e){e&&"."!==e&&(".."===e?i.length&&i.pop():i.push(e))})),i.join("/")},Je=i((function(e){!function(t){if(e.exports=t(),!!0){var n=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=n,i}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(i){function r(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},r.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!=typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),l=s.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(s[0]);if(l=(i.read||i)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(r[c]=l,e===c)break}catch(e){}}return e?r[e]:r}}return r.set=a,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){a(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}return n((function(){}))}))})),$e={get:Je.get,set:Je.set,remove:Je.remove},Xe=function(e,t){return new _e((function(n,i){t.onload=function(){n(t)},t.onerror=function(){i(new Error("Failed to load script "+e))}}))},Ze=function(e){var t=document.createElement("script");t.src=e,t.async=!0;var n=Xe(e,t);return document.getElementsByTagName("head")[0].appendChild(t),n},et=function(e,t,n,i){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var a=/\+/g;e=e.split(t);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var l=0;l<s;++l){var c,u,d,p,h=e[l].replace(a,"%20"),g=h.indexOf(n);g>=0?(c=h.substr(0,g),u=h.substr(g+1)):(c=h,u=""),d=decodeURIComponent(c),p=decodeURIComponent(u),_(r,d)?Array.isArray(r[d])?r[d].push(p):r[d]=[r[d],p]:r[d]=p}return r},tt=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},nt=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var r=encodeURIComponent(tt(i))+n;return Array.isArray(e[i])?e[i].map((function(e){return r+encodeURIComponent(tt(e))})).join(t):r+encodeURIComponent(tt(e[i]))})).join(t):i?encodeURIComponent(tt(i))+n+encodeURIComponent(tt(e)):""},it=i((function(e,t){t.decode=t.parse=et,t.encode=t.stringify=nt})),rt="@adobe/reactor-",at={cookie:$e,document:b,"load-script":Ze,"object-assign":A,promise:_e,"query-string":{parse:function(e){return"string"==typeof e&&(e=e.trim().replace(/^[?#&]/,"")),it.parse(e)},stringify:function(e){return it.stringify(e)}},window:E},ot=function(e){return function(t){if(0===t.indexOf(rt)){var n=t.substr(rt.length),i=at[n];if(i)return i}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},st=function(e,t,n,i,r,a,o){var s=e.extensions,l=e.buildInfo,c=e.environment,u=e.property.settings;if(s){var d=qe(s,t);Object.keys(s).forEach((function(p){var h=s[p],g=h.settings;Array.isArray(h.filePaths)&&(g=a(g,h.filePaths));var f=Ye(i,g);if(h.modules){var _=G.createPrefixedLogger(h.displayName),m=Ge(o,h.hostedLibFilesBaseUrl,l.minified),v={buildInfo:l,environment:c,property:{name:e.property.name,id:e.property.id},getDataElementValue:r,getExtensionSettings:f,getHostedLibFileUrl:m,getSharedModule:d,logger:_,propertySettings:u,replaceTokens:i,onDebugChanged:n.onDebugChanged,get debugEnabled(){return n.getDebugEnabled()}};Object.keys(h.modules).forEach((function(e){var n=h.modules[e],i=ot((function(n){var i=Qe(e,n);return t.getModuleExports(i)}));t.registerModule(e,n,p,i,v)}))}})),t.hydrateCache()}return t},lt=function(e,t,n,i,r){var a=G.createPrefixedLogger("Custom Script");e.track=function(e){G.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=a,e.notify=function(e,t){switch(G.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:a.info(e);break;case 4:a.warn(e);break;case 5:a.error(e);break;default:a.log(e)}},e.getVar=i,e.setVar=r,e.setCookie=function(e,t,n){var i="",r={};n&&(i=", { expires: "+n+" }",r.expires=n);var a='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+i+").";G.deprecation(a),$e.set(e,t,r)},e.readCookie=function(e){return G.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),$e.get(e)},e.removeCookie=function(e){G.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),$e.remove(e)},e.cookie=$e,e.pageBottom=function(){},e.setDebug=n;var o=!1;Object.defineProperty(e,"_container",{get:function(){return o||(G.warn("_satellite._container may change at any time and should only be used for debugging."),o=!0),t}})},ct=function(e,t){return function(n,i,r){return e&&Ue(n)&&Object.keys(n).length&&Array.isArray(i)&&i.length?(i.forEach((function(e){Boolean(null!=r&&/^core\/.*actions.*\/customCode\.js$/.test(r))&&"source"===e&&!n.isExternal||y(e.split("."),n,t)})),n):n}},ut=window._satellite;if(ut&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var dt=ut.container;delete ut.container;var pt=A({},dt.buildInfo);Object.defineProperty(pt,"environment",{get:function(){return G.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),dt.environment.stage}}),dt.buildInfo=pt;var ht,gt=P(W("localStorage"),G),ft="";b.currentScript&&b.currentScript.getAttribute("src")&&(ft=b.currentScript.getAttribute("src"));try{ht=C(ft,Boolean(dt.company.dynamicCdnEnabled),dt.company.cdnAllowList,gt)}catch(e){throw G.warn("Please review the following error:"),e}var _t,mt=ct(ht.isDynamicEnforced,ht.decorateWithDynamicHost),vt=le(),yt=dt.property.settings.undefinedVarsReturnEmpty,bt=dt.property.settings.ruleComponentSequencingEnabled,It=dt.dataElements||{},Tt=function(e){return It[e]},St=function(){return _t.apply(null,arguments)},kt=ne(vt,Tt,St,yt,mt),At={},Et=pe(At),Ct=oe(At,Tt),wt=ae(At,Tt,kt);_t=de(Ct,wt,yt),lt(ut,dt,gt.setDebugEnabled,wt,Et),st(dt,vt,gt,_t,kt,mt,ht.decorateWithDynamicHost);var Dt=ue(ut),Pt=O(vt,_t,mt),Mt=ke(vt),Ot=De(Mt,G,Dt),Nt=we(Ne,Mt,G,Dt),Lt=Ce(Ne,Mt,G,Dt),Rt=Pe(G,Dt),xt=Ee(Oe(bt,Se(Te(Pt,Le,Ot,Nt),Me(Pt,Lt,Rt)),be(ve(Pt,Fe,Le,Nt,Ot),me(Pt,Fe,Lt),Rt),Dt),Pt,He,Ne,Ae(vt),G);Ve(w,dt.rules||[],xt)}return ut}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();
</script>

</body>
</html>
