<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>worker-c3cc14a6c3dc9d613887420c3a8068efbr.html</title>
</head>
<body>

<script>
(function(){"use strict";function e(e){}const t=self;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function i(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{d(n.next(e))}catch(e){s(e)}}function a(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((n=n.apply(e,t||[])).next())}))}let n;window.setInterval=t.setInterval.bind(t),window.setTimeout=t.setTimeout.bind(t),window.clearInterval=t.clearInterval.bind(t),window.clearTimeout=t.clearTimeout.bind(t),window.addEventListener=t.addEventListener.bind(t),window.encodeURIComponent=t.encodeURIComponent.bind(t),window.decodeURIComponent=t.decodeURIComponent.bind(t),window.JSON=self.JSON,document=window.document,window.window=window,t._onMessage=e,window.workerThread=t,window.VWO.modules={vwoUtils:{cookies:{}},utils:{},tags:{},phoenixPlugins:{events:{predefinedEvents:{}}}};const o={test:e=>{var t;return n=null===(t=window.VWO)||void 0===t?void 0:t.phoenix,window.workerThread&&n&&e===n.store.getters},transformer:function(e){return e===n.store.getters.settings.campaigns||e===n.store.getters.allSettings.dataStore.campaigns?"vwojFnGPlugCamp":e===n.store.getters.allSettings?"vwojFnGPlugAllSet":e},parse:(e,t)=>{if("vwojFnGPlugCamp"===t)return window._vwo_exp;if("vwojFnGPlugAllSet"===t){const e=Object.assign({},window.VWO._.allSettings);return delete e.triggers,delete e.tags,e}return t}},s=[o],r={stringify:function(e,t,i){try{return JSON.stringify(e,(function(e,n){if(!i){const e=s.filter((e=>e.test(n)));if(e.length>0){const i=t=>e.reduce(((e,t)=>t.transformer(e)),t);return JSON.parse(r.stringify(n,t,i))}}i&&(n=i(n));const o=e?this:t;var a;return n instanceof Function||"function"==typeof n?n.type==="vwoWrappedFn_"+(window.mainThread?"WT":"MT")?"_NuPreW"+n.name.slice(0,n.name.indexOf("_")+1):(a=n.toString()).length<8||"function"!==a.substring(0,8)?"_NuFrRa"+window.functionWrapper.wrap(n,o)+"_":"_NuFrNf"+window.functionWrapper.wrap(n,o)+"_":n instanceof RegExp?"_PxEgEr_"+n:n}))}catch(e){return window.VWO&&window.VWO._&&window.VWO._.customError&&window.VWO._.customError({msg:"JSONfn.stringify failed!",url:"jsonFn.ts",lineno:15,colno:16,source:e}),""}},parse:function(e,t){if(!e)return e;function i(e){const t=e+"_wrappedFn",i={[t](...t){const i={type:"callWrappedFunction",id:e,args:r.stringify(t)};return window.fetcher.request(i).send()}}[t];return i.type="vwoWrappedFn_"+(window.mainThread?"WT":"MT"),i}const n=!!t&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;return JSON.parse(e,(function(e,t){for(const i of s)t=i.parse(e,t);var o;if("string"!=typeof t)return t;if(t.length<8)return t;if(o=t.substring(0,7),n&&t.match(n))return new Date(t);if("_NuPreW"===o){const e=t.match(/_NuPreW([0-9]*)_/)[1];return window.functionWrapper.unwrap(e)}if("_NuFrNf"===o){const e=t.match(/_NuFrNf([0-9]*)_/)[1];return i(e)}if("_PxEgEr"===o)return eval(t.slice(8));if("_NuFrRa"===o){const e=+t.match(/_NuFrRa([0-9]*)_/)[1];return i(e)}return t}))},clone:function(e,t){return this.parse(this.stringify(e),t)}};let a=0;const d={},l={};function c(e,t,i){var n;const o=this.postMessage.bind(this);if("response"===(null===(n=e)||void 0===n?void 0:n.type)){const t=e;return{resolve:function(e){let i=t.encapsulatedData;const n=t.isErrorPresent;i&&(i="function"==typeof e?e(t.encapsulatedData):t.encapsulatedData),n?l[t.twoWayCommId](i):d[t.twoWayCommId](i)}}}{const n={type:"response",encapsulatedData:e,twoWayCommId:t,isErrorPresent:i};return{send:function(){try{return o(n),!0}catch(e){return!1}}}}}function u(e){var t;if(this.sendingLayer=this.postMessage,"request"===(null===(t=e)||void 0===t?void 0:t.type)){const t=e,n=t.encapsulatedData;return{resolve:e=>i(this,void 0,void 0,(function*(){try{const i=yield e(n);return c.call(this,i,t.twoWayCommId).send(),!0}catch(e){const i=r.stringify(e.message);return c.call(this,i,t.twoWayCommId,!0).send(),!1}}))}}{const t={type:"request",encapsulatedData:e,twoWayCommId:++a};return{send:()=>new Promise(((e,i)=>{try{d[t.twoWayCommId]=e,l[t.twoWayCommId]=i,this.sendingLayer(t)}catch(e){console.log(e),i(e)}}))}}}var g;!function(e){e[e.Object=0]="Object",e[e.Property=1]="Property",e[e.Document=2]="Document",e[e.Variable=3]="Variable",e[e.OverWrite=4]="OverWrite",e[e.Delete=5]="Delete"}(g||(g={}));class h{constructor(){this.masterObject={}}static isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}static createProxy(e,t,i){if(e.__isProxy||!this.isObject(e))return e;const n=e;return Object.defineProperty(n,"__transferData",{value:!0,enumerable:!1,writable:!0}),new Proxy(n,{set:(e,n,o)=>{if("__isProxy"===n||e[n]===o)return!0;if(typeof e[n]==typeof o&&"function"!=typeof o&&JSON.stringify(o)===JSON.stringify(e[n]))return!0;if(this.isObject(o)?e[n]=this.proxify(o,t,i+n.toString()+"."):e[n]=o,"__transferData"===n||!e.__transferData)return!0;const s={path:i+n.toString()+".",value:o};return s.value=r.stringify(o,e),t({type:"sync",data:s,syncType:g.Object}),!0},get:(e,t)=>"__isProxy"===t||e[t],deleteProperty:(e,n)=>{if(n in e){if(delete e[n],!e.__transferData)return!0;const o={path:i.toString(),key:n};t({type:"sync",data:JSON.stringify(o),syncType:g.Delete})}return!0}})}isKey(e){return e in this.masterObject}static proxify(e,t,i){return this.isObject(e)?(Object.keys(null!=e?e:{}).forEach((n=>{this.isObject(e[n])&&(e[n]=this.proxify(e[n],t,i+n+"."))})),this.createProxy(e,t,i)):e}register(e,t,i){t in this.masterObject&&console.error("Key already exists!"),null==e&&(e={});const n=h.proxify(e,i,t+".");return this.masterObject[t]={proxy:n},n}append(e,t){return t in this.masterObject||console.error("Key doesn't exist!"),JSON.stringify(e)!==JSON.stringify(this.masterObject[t].proxy)&&console.error(`The object doesn't match the object registered under the key ${t}!`),this.masterObject[t].proxy}static getProxy(e,t,i){return this.proxify(e,t,i+".")}static sync(e,t,i,n,o){if(null==e||!e.__isProxy)return e;let s=null,r=i+".";return 1===n.length?(e.__transferData=!1,e[n[0]]=this.proxify(t,o,r+n[0]+"."),e.__transferData=!0,e):(s=e[n[0]],n.forEach(((e,t)=>{r+=e+".",0!==t&&t!==n.length-1&&(e in s||(s.__transferData=!1,s[e]=this.proxify({},o,r),s.__transferData=!0),s=s[e])})),s.__transferData=!1,s[n.pop()]=this.proxify(t,o,r),s.__transferData=!0,e)}}const{toString:v}=Object.prototype;function p(e){return"[object Object]"===v.call(e)}function w(e){return"[object Array]"===v.call(e)}const E={CAMPAIGN_FLOW_START:"cFS",TEST_NOT_RUNNING:"tNR",CAMPAIGN_FLOW_END:"cFE",REGISTER_CONVERSION:"vwo_rC",CONVERT_GOAL_FOR_ALL_EXPERIMENTS:"cGFAE",UNHIDE_ALL_VARIATIONS:"uAV",DIMENSION_TAG_PUSHED:"dTP",CONVERT_VISIT_GOAL_FOR_EXPERIMENT:"cVGFE",UNHIDE_SECTION:"uS",EXCLUDE_URL:"eURL",BEFORE_REDIRECT_TO_URL:"bRTR",URL_CHANGED:"uC",HIDE_ELEMENTS:"hE",ELEMENT_LOAD_ERROR:"eLTTE",NOT_REDIRECTING:"vwo_notRedirecting",VISIBILITY_TRIGGERED:"vwo_visibilityTriggered",VARIATION_APPLIED:"vwo_vA",ELEMENT_LOAD_TIMER_STOP:"eLTSt",SEND_NEW_VISITOR_CALL:"sNVC",CONVERT_REVENUE_GOALS_FOR_EXPERIMENT:"cRGFE",CHOOSE_COMBINATION:"cC",START_APPLY_CHANGES:"sAC",END_APPLY_CHANGES:"eAC",CAMPAIGN_COMBI_CREATED:"cCC",ELEMENT_LOADED:"eL",ELEMENT_NOT_LOADED:"eNL",MATCH_WILDCARD:"mW",DELETE_CSS_RULE:"dCSSR",SPLIT_READY_TO_REDIRECT:"sURL",SESSION:"vwo_session",NEW_SESSION:"newSession",UNHIDE_VARIATION:"uV",NEW_SESSION_CREATED:"newSessionCreated",PAUSE:"pause",SPLIT_URL:"sURL",SHOULD_EXECUTE_LIB_ERROR:"shouldExecLib",UPDATE_SETTINGS_CALL:"uSC",EXCLUDE_GOAL_URL:"eGURL",HEATMAP_CLICK:"hCl",POST_URL_CHANGE:"hC",AFTER_SAMPLING_TRIGGER:"sT",CONVERT_ALL_VISIT_GOALS_FOR_EXPERIMENT:"cAVGFE",OPT_OUT:"oO",POST_INIT:"vwo_postInit",PAGE_VIEW:"vwo_pageView",ELEMENT_CHANGES_APPLIED:"elementChangesApplied",REGISTER_HIT:"registerHit",REDIRECT_DECISION:"rD",RETRACK_VISITOR:"retrackVisitor",CAMPAIGN_NOT_ELIGIBLE:"runCampaign.notEligible",UNHIDE_ELEMENT:"unhideElement",TOGGLE_VISIBILITY_LOCK:"runCampaign.toggleVisibilityLock",CAMPAIGN_READY:"runCampaign.campaignReady",MODIFIED_ELEMENT:"runTestCampaign.modifiedEl",ERROR:"error",SSR_COMPLETE:"vwo_mutationObserved",SET_ENV:"setEnvironment",ACTIVATED:"vwo_activated",_ACTIVATED:"vwo__activated",RECORDING_NOT_ELIGIBLE:"rNE",VARIATION_SHOWN:"vwo_variationShown",NEW_SURVEY_FOUND:"nSF",SYNC_VISITOR_PROP:"vwo_syncVisitorProp",TAG_EVALUATED:"vwo_tagEval",HTML_ELEMENT_LOADED:"vwo_elementLoaded",CAMPAIGN_UNLOADED:"vwo_campUnload",CAMPAIGNS_LOADED:"vwo_campaignsLoaded",EXECUTE_FUNNEL_FOR_GOAL_CAMPAIGN:"executeFunnelCampForGoalCampaign",EDITOR_APPLY_CHANGES_COMPLETE:"editorApplyChangesComplete",INIT_VWO_INTERNALS:"initVWOInternals",SET_CAMPAIGN_TO_OBSERVE:"setCampaignToObserve",SEGMENTATION_EVALUATED:"sE",ELEMENTS_SHOWN_WITHOUT_CHANGES:"eSWC",CUSTOM_CONVERSION:"vwo_conversion",REVENUE_CONVERSION:"vwo_revenue",DOM_SUBMIT:"vwo_dom_submit",DOM_CLICK:"vwo_dom_click",ERROR_ONPAGE:"vwo_errorOnPage",CURSOR_THRASHED:"vwo_cursorThrashed",PAGE_REFRESHED:"vwo_pageRefreshed",QUICK_BACK:"vwo_quickBack",COPY:"vwo_copy",SELECTION:"vwo_selection",LEAVE_INTENT:"vwo_leaveIntent",TAB_IN:"vwo_tabIn",TAB_OUT:"vwo_tabOut",REPEATED_SCROLLED:"vwo_repeatedScrolled",REPEATED_HOVERED:"vwo_repeatedHovered",GOAL_CONVERTED:"vwo_goalConverted",GOAL_VISIT:"vwo_goalVisit",EVALUATE_GOAL_PAGE_FOR_PREJS:"vwo_evalPreCampJs",GROUP_WINNER_CHOOSEN:"vwo_groupWinnerChosen",CHECK_SEGMENTATION:"checkSegmentation",TRACK_NEW_SESSION_CREATED:"tnSC",TRACK_SESSION_CREATED:"tSC",PAGE_UNLOAD:"vwo_pageUnload",SPA_VISIBILITY_SERVICE:"visibilityForSpa",SESSION_INIT_COMPLETE:"vwo_sessionInitComplete",TIB_DONE:"vwo_topInitializeBeginDone",TOGGLE_MUT_OBSERVER:"toggleMutationObserver",DOM_CONTENTLOADED:"vwo_dom_DOMContentLoaded",SPLIT_VARIATION_SHOWN:"splitVariationShown",VWO_EXECUTED:"vE",ACTIVATE_API_TRIGGERED:"aAT",CAMPAIGN_TAG_EXECUTED:"cTE",RUN_REVERT_TAGS:"runrT",VARIATION_SHOWN_SENT:"vwo_variationShownSent",PAGE_EXIT:"pageExitEvent",COOKIE_CONSENT_ACCEPTED:"cCA",COOKIE_CONSENT_REJECTED:"cCR",COOKIE_CONSENT_TIMEOUT:"cCT",LOAD_SURVEY_LIB:"loadSurveyLib",NATIVE_DOM_CONTENT_LOADED:"vwo_domReady",RECOM_BLOCK_SHOWN:"vwo_recommendation_block_shown",SYNC_EVENTS_COMPLETED:"vwo_syncEventsCallCompleted",SEND_SYNC_CALL:"vwo_sendSyncCall"},f={SET_COOKIE:"sC",GET_COOKIE:"gC",ERASE_COOKIE:"eC",SET_THIRD_PARTY_COOKIE:"sTPC",SET_THIRD_PARTY_COOKIE_ERROR:"sTPCE"};class _{constructor(){this.handleEmptyValue=e=>""===e?"~":e,this.revertEmptyValue=e=>"~"===e?"":e,this.encodeData=e=>{const t=Object.entries(e);let i="";for(let e=0;e<t.length;e++){const[n,o]=t[e],{sId:s,mId:r,p:a,id:d}=o,l=`p.rU:${encodeURIComponent(this.handleEmptyValue(a.rU))},p.t:${encodeURIComponent(this.handleEmptyValue(a.t))},p.u:${encodeURIComponent(this.handleEmptyValue(a.u))}`;i+=`${n}:${this.handleEmptyValue(s)},${this.handleEmptyValue(r)},${l},${this.handleEmptyValue(d)}|`}return i.slice(0,-1)},this.decodeData=e=>{if("~"===e)return;const t={},i=e.split("|");for(let e=0;e<i.length;e++){const[n,...o]=i[e].split(":"),[s,r,...a]=o.join(":").split(","),d=this.revertEmptyValue(a.pop()||""),l={};for(let e=0;e<a.length;e++){const t=a[e],[i,...n]=t.split(":");if(i.startsWith("p.")){l[i.slice(2)]=this.revertEmptyValue(decodeURIComponent(n.join(":")))}}t[n]={sId:this.revertEmptyValue(s),mId:this.revertEmptyValue(r),p:l,id:d}}return t},this.consentMode=window.VWO.consentMode||!1,this.goalCookieStore={}}processQueue(){var e;const t=this.consentMode.deferredQueue||[];for(;t.length>0;){const i=t.shift();null===(e=i.payload)||void 0===e||e.call(i)}}extractSavedCalls(){const e=this.getSyncDataFromConsentCookie();if(e)return this.decodeData(e)}overrideCookies(e){const t=e._create;e._create=(...i)=>{if(!this.consentMode.dT)return this.consentMode.hT&&i[0].includes("_goal")?(this.setGoalCookie(i[0],i[1]),void this.consentMode.deferredQueue.push({method:"fn",payload:()=>t.apply(e,i)})):t.apply(e,i)};const i=e.createThirdParty;e.createThirdParty=function(...t){const n=window.VWO.consentMode;if(!n.dT){if(!n.hT)return i.apply(e,t);{const[o,s,r,a]=t;if(window.VWO.modules.utils.consentModeUtils.triggerEvent(f.SET_COOKIE,o,s,r,a,!0),"_vwo"!==o&&this._create(o,s,r,a),"_combi_choose"===o.slice(-13))return;n.deferredQueue.push({method:"fn",payload:()=>i.apply(e,t)})}}};const n=e.get;e.get=(...t)=>{if(!this.consentMode.dT||"_vis_opt_test_cookie"!==t[0]){if(this.consentMode.hT){const e=this.getGoalCookie(t[0]);if(e)return e}return n.apply(e,t)}};const o=e.waitForThirdPartySync;e.waitForThirdPartySync=function(t){return window.VWO.consentMode.hT?t():o.apply(e,t)}}initConsentMode(){const e=this.consentMode||{};if(e.goalLogs=[],window.VWO.consentMode.deferredQueue=window.VWO.consentMode.deferredQueue||[],e.timeOut&&(this.consentMode.wFC=!1,this.consentMode.dT=!0,this.triggerEvent(E.COOKIE_CONSENT_TIMEOUT)),"P"===e.cConfig.cPB&&this.handlePartiallyBlocked(e),e.preview)return this.handlePreviewMode(e);this.handleConsentRejected()}handlePartiallyBlocked(e){if(e.savedCalls=this.extractSavedCalls(),e.hT&&this.setupConsentAcceptedListener(e),e.cCA&&e.savedCalls&&window.VWO._.phoenixMT.on("vwo_phoenixInitialized",(()=>{this.syncSaved(e.savedCalls),this.updateConsentCookie("~"),delete e.savedCalls})),!1===e.hT&&e.preview&&!e.dT&&!e.cCA){let e;for(const t in window._vwo_exp){e=window._vwo_exp[t];break}const t=window.VWO._.cookies.get("_vis_opt_exp_"+e.id+"_combi");if(e.multiple_domains&&t){const i="SPLIT_URL"===e.type||null,n={id:e.id,mId:""};this.syncTpc(n,t,i,e,!0)}}}setupConsentAcceptedListener(e){const t=window.VWO._.phoenixMT.on(E.COOKIE_CONSENT_ACCEPTED,(()=>{e.savedCalls&&(this.syncSaved(e.savedCalls),delete e.savedCalls),this.processQueue(),!e.preview&&this.triggerEvent(E.COOKIE_CONSENT_ACCEPTED),this.updateConsentCookie("~"),window.VWO._.phoenixMT.off(t)}))}queueGoalLogs(e,t,i,n){const o=window.VWO.consentMode;if(!o||!o.preview)return!0;if(o.dT)return!1;if(!o.hT)return!0;if(!window.mainThread)return window.fetcher.getValue('VWO.modules.utils.consentModeUtils.queueGoalLogs("${{1}}","${{2}}", "${{3}}", "${{4}}")',null,{captureGroups:[e,t,i,n]}),!1;let{goalLogs:s}=o;return s.push({expId:e,goalId:t,revenue:i,success:n}),!1}triggerGoalLogs(){const e=window.VWO.consentMode.goalLogs;for(;e.length>0;){const t=e.shift(),{expId:i,goalId:n,revenue:o,success:s}=t;window.VWO.modules.tags.wildCardCallback({oldArgs:[i,n,o,s],campaignId:i,goalId:n},E.REGISTER_CONVERSION)}}handlePreviewMode(e){e.hT&&window.VWO.phoenix&&window.VWO.phoenix('on("${{1}}", "${{2}}")',null,{captureGroups:[E.URL_CHANGED,()=>{window.fetcher.setValue("VWO.consentMode.goalLogs",[])}]}),this.setupConsentTimeoutListener(e),this.setupConsentAcceptedListenerForPreview(e),this.setupConsentRejectedListenerForPreview(e)}setupConsentTimeoutListener(e){window.VWO._.phoenixMT.on(E.COOKIE_CONSENT_TIMEOUT,(()=>{this.triggerEvent(E.COOKIE_CONSENT_TIMEOUT),e.wFC&&window.fetcher.setValue("VWO.consentMode.wFC",!1),window.fetcher.setValue("VWO.consentMode.dT",!0)}))}setupConsentAcceptedListenerForPreview(e){window.VWO._.phoenixMT.on(E.COOKIE_CONSENT_ACCEPTED,(()=>{this.triggerEvent(E.COOKIE_CONSENT_ACCEPTED),this.triggerGoalLogs(),e.wFC&&window.fetcher.setValue("VWO.consentMode.wFC",!1),!e.dT&&window.fetcher.setValue("VWO.consentMode.dT",!1)}))}setupConsentRejectedListenerForPreview(e){window.VWO._.phoenixMT.on(E.COOKIE_CONSENT_REJECTED,(()=>{this.triggerEvent(E.COOKIE_CONSENT_REJECTED),window.fetcher.setValue("VWO.consentMode.dT",!0)}))}handleConsentRejected(){window.VWO._.phoenixMT.on(E.COOKIE_CONSENT_REJECTED,(()=>{window.fetcher.setValue("VWO.consentMode.dT",!0)}))}triggerEvent(e){window.VWO.phoenix&&window.VWO.phoenix('trigger("${{1}}")',null,{captureGroups:[e]})}getGoalCookie(e){return this.goalCookieStore[e]}setGoalCookie(e,t){return window.mainThread&&window.fetcher.getValue('VWO.modules.utils.consentModeUtils.setGoalCookie("${{1}}","${{2}}")',null,{captureGroups:[e,t]}),this.goalCookieStore[e]=t}deferOnConsent(e,t,i,n,o,s,...r){if(!this.consentMode)return;const{dT:a,hT:d,deferredQueue:l}=this.consentMode;if(a)return!0;if(d){if(["applySyncRequest","handlerForReqFromWT"].includes(e)){if(!o.includes("_goal"))return!1;if(this.setGoalCookie(o,s),"handlerForReqFromWT"===e)return l.push({method:e,payload:()=>document.cookie=r[0]})}return o&&o.name===E.VARIATION_SHOWN&&this.saveForSync(s.d),i&&i(n||{}),l.push({method:e,payload:()=>t[e].apply(t,r)}),!0}}prepareDataForSync(e,t,i){const n={d:{}};n.d.msgId=e.mId,n.d.visId=e.mId.split("-")[0],n.d.sessionId=e.sId;const o={title:e.p.t,url:e.p.u,referrerUrl:e.p.rU};return this.consentMode.customParams=o,n.d.event={props:{page:o,id:e.id,variation:t,isFirst:1},name:E.VARIATION_SHOWN,time:Date.now()},null!=i&&(n.d.event.props.isSplitVariation=i),n}addCustomParams(e){const t=this.consentMode;return!t||(!t.customParams||(!e.includes(E.VARIATION_SHOWN)&&!e.includes("l.gif")||"P"!==t.cConfig.cPB||!("P"===t.cConfig.cPB&&!t.hT)))}syncSaved(e){const t={VWO:{firedTime:Date.now()},executingTagTrigger:null,name:E.VARIATION_SHOWN,props:{},time:Date.now()};Object.keys(e).map((i=>{const n=e[i],o=window._vwo_exp[n.id];let s=null,r=null;if("SPLIT_URL"===o.type&&(s=!0,r="1"!=i),!window.VWO._.cookies.get("_vis_opt_exp_"+n.id+"_combi"))return;const a=this.prepareDataForSync(n,i,r);window.VWO.modules.tags.dataSync.utils.addDataFromMTAndSend(null,null,a,null,!0,null,t,+n.id),this.syncImg(n,i,o),this.syncTpc(n,i,s,o)}))}syncTpc(e,t,i,n,o=!1){if(!n.multiple_domains)return;const s=[`_vwo_uuid_${e.id}`,e.mId.split("-")[0],3650,void 0,e.id,void 0,n];!o&&window.VWO._.cookies.createThirdParty(...s),s[0]=`_vis_opt_exp_${e.id}_combi`,s[1]=t,s[3]=100,window.VWO._.cookies.createThirdParty(...s),null!=i&&(s[0]=`_vis_opt_exp_${e.id}_split`,window.VWO._.cookies.createThirdParty(...s))}syncImg(e,t,i){let n=window.VWO.modules.utils.libUtils.extraData2();const o=encodeURIComponent(n);n=i.ps||void 0===i.ps?"&ed="+o:"";const s="l.gif?experiment_id="+e.id+"&account_id="+window._vwo_acc_id+"&cu="+encodeURIComponent(e.p.u)+"&combination="+t+"&s=1&sId="+e.sId+"&u="+e.mId.split("-")[0]+n;window.VWO.modules.tags.dataSync.utils.sendCall(null,{url:s},null,null,!0)}saveForSync(e){let t=this.getSyncDataFromConsentCookie(),i=t?this.decodeData(t):{};const n={rU:e.event.props.page.referrerUrl,u:e.event.props.page.url,t:e.event.props.page.title},o={sId:e.sessionId,mId:e.msgId,p:n,id:e.event.props.id},s=Object.assign(Object.assign({},i),{[e.event.props.variation]:o});let r=this.encodeData(s);this.updateConsentCookie(r)}getSyncDataFromConsentCookie(){const e=document.cookie.split("; ").find((e=>e.startsWith("_vwo_consent=")));if(e){const t=decodeURIComponent(e.split("=")[1]).split(":");if(t.length>1)return t.shift(),"~"===t[0]?null:t.join(":")}return null}updateConsentCookie(e){const t=document.cookie.match(/(^|;\s*)_vwo_consent=([^;]*)/),i=t?t[2]:null;let n="";if(i){n=decodeURIComponent(i).split(":")[0]}const o=encodeURIComponent(`${n}:${e}`);document.cookie=`_vwo_consent=${o}; path=/; domain=.${window.VWO.consentMode.domain}; max-age=31536000`}}const m=function(){const e=window.VWO.consentMode;return!!e&&!!e.dT},O=new _;window.VWO.modules.utils.consentModeUtils=O;let S=!1;function y(e){return e.split(";").reduce(((e,t)=>{const i=t.indexOf("=");if(-1!==i){const n=t.substring(0,i).trim(),o=t.substring(i+1).trim();e[n]=o}else e[t.trim()]="";return e}),{})}class T{constructor(){this.operations=[]}push(e,t){this.operations.push({name:e,value:t})}pop_front(){this.operations.splice(0,1)}fullfil(e,t=!0){const i=y(e);t&&this.pop_front(),this.operations.forEach((e=>{i[e.name]=e.value}));return Object.entries(i).map((e=>e.join("="))).join("; ")}}class C{static internalUtils(){var e,t;return{isCookiePayloadObject:e=>!(!p(e)||!["value","fromThread","origin"].reduce(((t,i)=>t&&i in e),!0)),isCurrentContextMT:!!(null===(t=null===(e=window)||void 0===e?void 0:e.mainThread)||void 0===t?void 0:t.webWorker)}}getSetter(e){let t;return t=new T,i=>{if("string"==typeof i)i={value:i};else if(!C.internalUtils().isCookiePayloadObject(i))return void console.error("Invalid value type!");const{value:n,fromThread:o}=i;let{origin:s}=i,r=!0;if(C.internalUtils().isCurrentContextMT||"MAIN"===o)document.__cookie=n,r="MAIN"!==o;else{{const e=n.indexOf("="),i=n.substring(0,e).trim(),o=y(n);let a=!1;(o.expires&&new Date(o.expires)<new Date(Date.now())||"0"===o["max-age"])&&(a=!0);const d=y(document.__cookie);a?i in d?delete d[i]:r=!1:(d[i]=o[i],t.push(i,o[i]),s="WORKER"),document.__cookie=Object.entries(d).map((e=>e.join("="))).join(";")}}return"MAIN"===o&&(document.__cookie=t.fullfil(document.__cookie,"WORKER"===s)),r&&e({type:"sync",data:{propertyName:"cookie",value:{value:C.internalUtils().isCurrentContextMT?document.__cookie:n,fromThread:C.internalUtils().isCurrentContextMT?"MAIN":"WORKER",origin:S?"WORKER":s}},syncType:g.Document}),!0}}}function I(e){if(!C.internalUtils().isCookiePayloadObject(e))return void console.error("Invalid value type!");const{value:t}=e;if(window.VWO.consentMode){if(m())return;let e=t.split("=");if(O.deferOnConsent("handlerForReqFromWT",null,null,null,e[0],e[1],t))return}S=!0,document.cookie=t,S=!1}let N={},A;class V{static register(e,t){switch(e){case"cookie":0;default:this.registerProperty(e,t)}}static registerProperty(e,t){if(document){if(e in window.document){let i;i=Object.getOwnPropertyDescriptor(window.document,e);const n={enumerable:i.enumerable,configurable:i.configurable,get:()=>document["__"+e],set:this.internalUtils.getSetter(e,t)};Object.defineProperty(window.document,"__"+e,i),Object.defineProperty(window.document,e,n)}}else console.error("The property doesn't exist on the `DOCUMENT` object.")}static sync({propertyName:e,value:t}){document[e]=t}}V.internalUtils={getSetter:(e,t)=>{switch(e){case"cookie":return(new C).getSetter(t);default:return i=>(JSON.stringify(document["__"+e])===JSON.stringify(i)||(document["__"+e]=i,t({type:"sync",data:{propertyName:e,value:document["__"+e]},syncType:g.Document})),!0)}},isKeyNonConfigurable:e=>{var t,i,n;const o=[document,null===(t=null===window||void 0===window?void 0:window.Document)||void 0===t?void 0:t.prototype,null===(i=null===window||void 0===window?void 0:window.HTMLDocument)||void 0===i?void 0:i.prototype];for(let t=0;t<o.length;t++)if(!1===(null===(n=Object.getOwnPropertyDescriptor(o[t]||{},e))||void 0===n?void 0:n.configurable))return!0;return!1}};class b{static register(e,t,i,n){i in e?console.error("The property must not pre-exist inside the object."):Object.defineProperty(e,i,{enumerable:!0,configurable:!1,get:()=>e[`__${i}`],set:o=>(e[`__${i}`]=o,n({type:"sync",data:{identifier:t,property:i,value:o},syncType:g.Property}),!0)})}}const R={get:e=>{try{return window.localStorage.getItem(e)}catch(e){return""}},set:(e,t)=>{try{return window.localStorage.setItem(e,t)}catch(e){return""}},remove:e=>{try{return window.localStorage.removeItem(e)}catch(e){return!1}},getItem:function(e){return this.get(e)},setItem:function(e,t){this.set(e,t)},deleteAll:function(){},deleteItem:function(e){this.remove(e)}};function P(e){A=e}function x(){class e{constructor(e){this.__transferData=!0,this.length=(null==e?void 0:e.length)||0,this.value=e||{},this.callback=window.fetcher.postMessage.bind(window.fetcher)}key(e){if(e>=this.length)return null;const t=Object.keys(this.value);for(let i=0;i<t.length;i++)if(i===e)return t[i]}getItem(e){return e in this.value?this.value[e]:null}setItem(e,t){if(e in this.value){if(this.value[e]===t)return}else this.length++;return this.value[e]=t,this.callback({data:{key:e,value:t},type:"sync",syncType:{type:"custom",method:"localStorage",operation:"setItem"}}),null}removeItem(e){return e in this.value?(this.length--,delete this.value[e],this.callback({data:{key:e},type:"sync",syncType:{type:"custom",method:"localStorage",operation:"removeItem"}}),null):null}clear(){return 0===this.length||(this.length=0,this.value={},this.callback({data:{},type:"sync",syncType:{type:"custom",method:"localStorage",operation:"clear"}})),null}}window.localStorage=new e(window.localStorage)}function D(e){if("number"!=typeof e.syncType){switch(window.localStorage.__transferData&&(window.localStorage.__transferData=!1),e.syncType.operation){case"setItem":window.localStorage.setItem(e.data.key,e.data.value);break;case"removeItem":window.localStorage.removeItem(e.data.key);break;case"clear":window.localStorage.clear();break;default:return}window.localStorage.__transferData&&(window.localStorage.__transferData=!0)}}window.VWO._.localStorageService=R;class L{}L.syncLocalStorage=x;class U extends L{constructor(){super(),this.objectSyncer=new h}register(e,t,i={},n="",o=!1){if("object"!=typeof i||Array.isArray(i))return;const s=window.fetcher.postMessage.bind(window.fetcher);switch(e){case"custom":switch(t){case"localStorage":U.syncLocalStorage();break;default:throw new Error("Unknown property name!")}break;case g.Object:{const e=this.objectSyncer.register(i,t,s);return o&&s({data:{value:JSON.stringify(i),path:t},type:"sync",syncType:g.OverWrite}),e}case g.Property:b.register(i,n,t,s);break;case g.Document:V.register(t,s);break;default:console.error("Unknown 'syncAblesEnum' type!")}}append(e,t){return this.objectSyncer.append(e,t)}static sync(e,t){var i;const{data:n}=e;if("object"!=typeof e.syncType||"custom"!==e.syncType.type)switch(e.syncType){case g.Object:{n.value=r.parse(n.value);const e=n.path.substring(0,n.path.lastIndexOf(".")).split(".");window[e[0]]=h.sync(window[e[0]],n.value,e[0],e.splice(1),t);break}case g.Document:V.sync(n);break;case g.Property:case g.Variable:t(n);break;case g.OverWrite:if(!("__transferData"in(null!==(i=window[n.path])&&void 0!==i?i:{})))return void(window[n.path]=JSON.parse(n.value));window[n.path]=h.getProxy(JSON.parse(n.value),t,n.path);break;case g.Delete:{const e=JSON.parse(n),t=e.path.substring(0,e.path.lastIndexOf(".")).split(".").reduce(((e,t)=>Object.keys(e).length?e[t]:window[t]),{}),i=e.key;i in t&&(t.__transferData=!1,delete t[i],t.__transferData=!0);break}default:console.error("Unknown 'syncAblesEnum' type!")}else switch(e.syncType.method){case"localStorage":D(e);break;default:return}}declare(e,t){b.register(window,"window",e,t)}}const W=window.VWOEventsArchInCompatibilityMode,k=(e,t)=>{if(e&&"function"==typeof e&&e.bind)try{e=e.bind(t)}catch(t){if(/(cannot be invoked without 'new')|(Cannot call a class constructor without |new|)/i.test(t.message))return e;console.error(t)}return e};function M(e,t,i={}){if("window"===e)return window;let n=window;const{captureGroups:o=null,filter:s}=i,r=e.split("."),a=r.length;for(let e=0;e<a;e++){let t=r[e];if(t.endsWith(")")){const e=t.substring(0,t.indexOf("("));let i=t.substring(t.indexOf("("));i="["+i.slice(1,i.length-1)+"]";const s=i.slice(1,i.length-1).split(",");s.forEach(((e,t)=>{e.startsWith('"')||(s[t]='"vwoCurrThreadRef'+e+'"')}));const r=JSON.parse(i,((e,t)=>{let i;if("string"==typeof t){if(i=t.match(/\${{([0-9]*)}}/))return o[i[1]-1];if(i=t.match(/vwoCurrThreadRef(.*)/))return M(i[1])}return t}));n=n[e](...r)}else{let e=!1;t.endsWith("?")&&(t=t.slice(0,-1),e=!0);const i=n[t];if(n=k(i,n),e&&null==n)return n}}if(s){const e={};s.forEach((t=>{e[t]=n[t]})),n=e}return n}const G=function(e){return window.functionWrapper.unwrap(e.id)(...r.parse(e.args))},F=function(e){var t,n;return i(this,void 0,void 0,(function*(){switch(e.type){case"callWrappedFunction":{let t=G(e);return t&&"function"==typeof t.then&&(t=yield t),r.stringify(t)}case"vwoClassInstanceBridge":{const t=e.path.dest.lastIndexOf(".");let i=window,n=e.path.dest;-1!==t&&(i=M(e.path.dest.slice(0,t)),n=e.path.dest.substr(t+1));const o=i[n],[s,r]=new o(...e.args);return r.otherSide=(...t)=>{const i=e.path.src+"."+s+"."+t[0];return t[0]=i,window.fetcher.getValue(...t)},""+s}default:{let i,o;if("setValue"===(e=r.parse(e)).type){-1==e.path.lastIndexOf(".")&&(e.path="window."+e.path);const t=e.path;e.path=t.slice(0,t.lastIndexOf(".")),i=t.slice(t.lastIndexOf(".")+1)}(null===(t=e.config)||void 0===t?void 0:t.captureGroups)&&(e.config.captureGroups=r.parse(e.config.captureGroups));const s=o=M(e.path,e.args,null==e?void 0:e.config);return(null===(n=e.config)||void 0===n?void 0:n.constructable)?o=new s(...e.args):"function"==typeof s&&(o=s(...e.args||[])),i&&(o=s[i]=e.val),o=yield o,r.stringify(o)}}}))};class j{}class H extends j{init(){var e,t,i;this.thread=(null===(t=null===(e=window)||void 0===e?void 0:e.mainThread)||void 0===t?void 0:t.webWorker)||(null===(i=window)||void 0===i?void 0:i.workerThread),this.request=u,this.response=c,this.thread.onmessage=this.onMessage.bind(this)}onMessage(e){var t,i,n,o;const{data:s}=e;switch(s.type){case"initDone":window.vwo_initDone(s);break;case"request":this.request(s).resolve(F);break;case"response":this.response(s).resolve(r.parse.bind(r));break;case"sync":{let e=e=>null;switch(s.syncType){case g.OverWrite:case g.Object:e=this.postMessage.bind(this);break;case g.Property:case g.Document:case g.Variable:case g.Delete:}U.sync(s,e);break}default:window.VwoUnitTestsRunning&&("unit-test"===s.type?eval(s.code):"unit-test-result"===s.type&&(null===(i=null===(t=window.PromiseResolver)||void 0===t?void 0:t[s.id])||void 0===i||i.resolve(s))),null===(o=(n=this.thread)._onMessage)||void 0===o||o.call(n,e)}}postMessage(e){try{this.thread.postMessage(e)}catch(e){console.error(e)}}getValue(e,t,i={}){let n;(null==i?void 0:i.captureGroups)&&(n=r.stringify(i.captureGroups));const o={path:e,args:t,config:Object.assign(Object.assign({},i),{captureGroups:n})};return this.request(r.stringify(o)).send().catch((()=>{}))}setValue(e,t){const i={type:"setValue",path:e,val:t};return this.request(r.stringify(i)).send().catch((()=>{}))}}class $ extends j{init(){}onMessage(){}postMessage(){this.onMessage.apply(this,arguments)}getValue(e,t,i={}){return new Promise((i=>{t?Array.isArray(t)?i(window[e](...t)):t.captureGroups.forEach(((t,i)=>{e.replace(`{{${i}}}`,r.parse(t))})):i(e)}))}setValue(e,t){return window[e]=t}}class B extends H{init(){var e,t,i,n,o;this.thread=(null===(t=null===(e=window)||void 0===e?void 0:e.mainThread)||void 0===t?void 0:t.webWorker)?window.vwoChannelFW:null===(i=window)||void 0===i?void 0:i.workerThread,this.request=u,this.response=c,(null===(o=null===(n=window)||void 0===n?void 0:n.mainThread)||void 0===o?void 0:o.webWorker)?this.thread.port1.onmessage=this.onMessage.bind(this):(this.thread.onmessage=this.isMessageChannel(this.thread)&&this.onMessage.bind(this),this.auxiliaryMessageHandler())}auxiliaryMessageHandler(){const e=this;let t;t=function(i){const{vwoChannelToW:n,vwoChannelFW:o}=i.data;n&&o&&(window.vwoChannelToW=n,window.vwoChannelFW=o,e.thread=n,e.thread.onmessage=e.onMessage.bind(e),self.removeEventListener("message",t))},self.addEventListener("message",t)}isMessageChannel(e){return e&&e.port1 instanceof MessagePort&&e.port2 instanceof MessagePort}postMessage(e){var t,i;try{(null===(i=null===(t=window)||void 0===t?void 0:t.mainThread)||void 0===i?void 0:i.webWorker)?window.vwoChannelToW.port2.postMessage(e):window.vwoChannelFW.postMessage(e)}catch(e){console.error(e)}}}const J=W?$:B;window.fetcher=new J;class K{constructor(){this.id=0,this.store={}}wrap(e,t){const i=this.id++;return this.store=this.store||{},this.store[i]=t?e.bind(t):e,i}unwrap(e){return this.store[e]}}var z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Y(e){var t={exports:{}};return e(t,t.exports),t.exports}var X=function(e){return e&&e.Math==Math&&e},q=X("object"==typeof globalThis&&globalThis)||X("object"==typeof window&&window)||X("object"==typeof self&&self)||X("object"==typeof z&&z)||function(){return this}()||Function("return this")(),Q=function(e){try{return!!e()}catch(e){return!0}},Z=!Q((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),ee={}.propertyIsEnumerable,te=Object.getOwnPropertyDescriptor,ie={f:te&&!ee.call({1:2},1)?function(e){var t=te(this,e);return!!t&&t.enumerable}:ee},ne=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},oe={}.toString,se="".split,re=Q((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==function(e){return oe.call(e).slice(8,-1)}(e)?se.call(e,""):Object(e)}:Object,ae=function(e){return re(function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}(e))},de=function(e){return"object"==typeof e?null!==e:"function"==typeof e},le=function(e,t){if(!de(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!de(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!de(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!de(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")},ce={}.hasOwnProperty,ue=function(e,t){return ce.call(e,t)},ge=q.document,he=de(ge)&&de(ge.createElement),ve=!Z&&!Q((function(){return 7!=Object.defineProperty(("div",he?ge.createElement("div"):{}),"a",{get:function(){return 7}}).a})),pe=Object.getOwnPropertyDescriptor,we={f:Z?pe:function(e,t){if(e=ae(e),t=le(t,!0),ve)try{return pe(e,t)}catch(e){}if(ue(e,t))return ne(!ie.f.call(e,t),e[t])}},Ee=function(e){if(!de(e))throw TypeError(String(e)+" is not an object");return e},fe=Object.defineProperty,_e={f:Z?fe:function(e,t,i){if(Ee(e),t=le(t,!0),Ee(i),ve)try{return fe(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},me=Z?function(e,t,i){return _e.f(e,t,ne(1,i))}:function(e,t,i){return e[t]=i,e},Oe=function(e,t){try{me(q,e,t)}catch(i){q[e]=t}return t},Se=q["__core-js_shared__"]||Oe("__core-js_shared__",{}),ye=Function.toString;"function"!=typeof Se.inspectSource&&(Se.inspectSource=function(e){return ye.call(e)});var Te,Ce,Ie,Ne,Ae=Se.inspectSource,Ve=q.WeakMap,be="function"==typeof Ve&&/native code/.test(Ae(Ve)),Re=Y((function(e){(e.exports=function(e,t){return Se[e]||(Se[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),Pe=0,xe=Math.random(),De=Re("keys"),Le={},Ue=q.WeakMap;if(be){var We=Se.state||(Se.state=new Ue),ke=We.get,Me=We.has,Ge=We.set;Te=function(e,t){return t.facade=e,Ge.call(We,e,t),t},Ce=function(e){return ke.call(We,e)||{}},Ie=function(e){return Me.call(We,e)}}else{var Fe=De[Ne="state"]||(De[Ne]=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Pe+xe).toString(36)}(Ne));Le[Fe]=!0,Te=function(e,t){return t.facade=e,me(e,Fe,t),t},Ce=function(e){return ue(e,Fe)?e[Fe]:{}},Ie=function(e){return ue(e,Fe)}}var je={set:Te,get:Ce,has:Ie,enforce:function(e){return Ie(e)?Ce(e):Te(e,{})},getterFor:function(e){return function(t){var i;if(!de(t)||(i=Ce(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}},He=Y((function(e){var t=je.get,i=je.enforce,n=String(String).split("String");(e.exports=function(e,t,o,s){var r,a=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet;"function"==typeof o&&("string"!=typeof t||ue(o,"name")||me(o,"name",t),(r=i(o)).source||(r.source=n.join("string"==typeof t?t:""))),e!==q?(a?!l&&e[t]&&(d=!0):delete e[t],d?e[t]=o:me(e,t,o)):d?e[t]=o:Oe(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Ae(this)}))})),$e=q,Be=function(e){return"function"==typeof e?e:void 0},Je=Math.ceil,Ke=Math.floor,ze=function(e){return isNaN(e=+e)?0:(e>0?Ke:Je)(e)},Ye=Math.min,Xe=Math.max,qe=Math.min,Qe=function(e){return function(t,i,n){var o,s,r=ae(t),a=(o=r.length)>0?Ye(ze(o),9007199254740991):0,d=function(e,t){var i=ze(e);return i<0?Xe(i+t,0):qe(i,t)}(n,a);if(e&&i!=i){for(;a>d;)if((s=r[d++])!=s)return!0}else for(;a>d;d++)if((e||d in r)&&r[d]===i)return e||d||0;return!e&&-1}},Ze=(Qe(!0),Qe(!1)),et=function(e,t){var i,n=ae(e),o=0,s=[];for(i in n)!ue(Le,i)&&ue(n,i)&&s.push(i);for(;t.length>o;)ue(n,i=t[o++])&&(~Ze(s,i)||s.push(i));return s},tt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],it=tt.concat("length","prototype"),nt={f:Object.getOwnPropertyNames||function(e){return et(e,it)}},ot={f:Object.getOwnPropertySymbols},st=function(e,t){return arguments.length<2?Be($e[e])||Be(q[e]):$e[e]&&$e[e][t]||q[e]&&q[e][t]}("Reflect","ownKeys")||function(e){var t=nt.f(Ee(e)),i=ot.f;return i?t.concat(i(e)):t},rt=function(e,t){for(var i=st(t),n=_e.f,o=we.f,s=0;s<i.length;s++){var r=i[s];ue(e,r)||n(e,r,o(t,r))}},at=/#|\.prototype\./,dt=function(e,t){var i=ct[lt(e)];return i==gt||i!=ut&&("function"==typeof t?Q(t):!!t)},lt=dt.normalize=function(e){return String(e).replace(at,".").toLowerCase()},ct=dt.data={},ut=dt.NATIVE="N",gt=dt.POLYFILL="P",ht=dt,vt=we.f,pt=function(e,t){var i,n,o,s,r,a=e.target,d=e.global,l=e.stat;if(i=d?q:l?q[a]||Oe(a,{}):(q[a]||{}).prototype)for(n in t){if(s=t[n],o=e.noTargetGet?(r=vt(i,n))&&r.value:i[n],!ht(d?n:a+(l?".":"#")+n,e.forced)&&void 0!==o){if(typeof s==typeof o)continue;rt(s,o)}(e.sham||o&&o.sham)&&me(s,"sham",!0),He(i,n,s,e)}},wt=Object.keys||function(e){return et(e,tt)},Et=ie.f,ft=function(e){return function(t){for(var i,n=ae(t),o=wt(n),s=o.length,r=0,a=[];s>r;)i=o[r++],Z&&!Et.call(n,i)||a.push(e?[i,n[i]]:n[i]);return a}},_t=(ft(!0),ft(!1));pt({target:"Object",stat:!0},{values:function(e){return _t(e)}}),$e.Object.values;var mt=function(e,t,i){var n=le(t);n in e?_e.f(e,n,ne(0,i)):e[n]=i},Ot,St,yt,Tt,Ct,It,Nt;pt({target:"Object",stat:!0,sham:!Z},{getOwnPropertyDescriptors:function(e){for(var t,i,n=ae(e),o=we.f,s=st(n),r={},a=0;s.length>a;)void 0!==(i=o(n,t=s[a++]))&&mt(r,t,i);return r}}),$e.Object.getOwnPropertyDescriptors,function(e){e.DOM="vwo_dom"}(Ot||(Ot={})),function(e){e.WILD_CARD="*",e.TRIGGER="trigger",e.POST_INIT="post-init",e.TIMER="vwo_timer"}(St||(St={})),function(e){e.URL_CHANGE="vwo_urlChange",e.LEAVE_INTENT="vwo_leaveIntent",e.CLICK_EVENT="vwo_dom_click",e.SUBMIT_EVENT="vwo_dom_submit",e.PAGE_LOAD_EVENT="vwo_page_load"}(yt||(yt={})),function(e){e.PAGE_VIEW="vwo_pageView",e.PAGE_UNLOAD_EVENT="vwo_pageUnload"}(Tt||(Tt={})),function(e){e.EXIT_CONDITIONS="__exitConditions"}(Ct||(Ct={})),function(e){e.DOM_CONTENT_LOADED="DOMContentLoaded",e.SCROLL="scroll",e.CLICK="click",e.SUBMIT="submit"}(It||(It={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(Nt||(Nt={}));class At{constructor(e){this.setLevel(e)}setLevel(e="warn"){this.logLevel=Nt[e.toUpperCase()]}info(e,t={}){this.customLog(Nt.INFO,e,t)}debug(e,t={}){this.customLog(Nt.DEBUG,e,t)}warn(e,t={}){var i,n;this.customLog(Nt.WARN,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}error(e,t={}){var i,n;this.customLog(Nt.ERROR,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}customLog(e,t,i,n=null){var o,s,r;if(e>=this.logLevel){const a=this.formatMessage(e,t,i);null===(r=null===(s=null===(o=window.VWOEvents)||void 0===o?void 0:o.store)||void 0===s?void 0:s.actions)||void 0===r||r.addLogsForDebugging(a),n?n(a):this.consoleLog(e,[a])}}consoleLog(e,t){switch(e){case Nt.INFO:console.info(...t);break;case Nt.WARN:console.warn(...t);break;case Nt.ERROR:console.error(...t);break;default:console.log(...t)}}formatMessage(e,t,i){var n,o;const s=Object.keys(i).reduce(((e,t)=>e.replace(new RegExp(`{{${t}}}`,"g"),i[t])),t),r=Ot.DOM+"_";let a=i;const d=(null===(n=i.data)||void 0===n?void 0:n.vwoEventName)||i.vwoEventName;d!==r+It.CLICK&&d!==r+It.SUBMIT||(a=i.data?null===(o=i.data)||void 0===o?void 0:o.props:a.props,a=a||{name:d});let l=JSON.stringify;try{l=window.VWO._.native.JSON.stringify||JSON.stringify}catch(e){}return`VWO: [${Nt[e].toUpperCase()}] [${(new Date).toUTCString()}] ${s} ${l(a)}`}}class Vt{static parseUrl(e){try{e=decodeURIComponent(e)}catch(e){console.warn("Not a valid URL.")}const t=/^((((\w+)(:\/\/))?((\w+):(\w+)@)?(www\.)?)([^?#\/:\s]*)?:?([0-9][^?#\/\s]*)?)\/?([^?#\s]*)\??([^#]*)#?(.*)$/.exec(e.trim());if(!t)throw new Error("Not a valid URL.");return t&&{url:t[0],origin:t[1].replace(t[6],""),protocol:t[4]||"",hasWWW:Boolean(t[9]),username:t[7]||"",password:t[8]||"",host:(t[9]||"")+t[10],domain:t[10],port:t[11]||"",path:t[12],query:t[13]||"",queryParams:t[13]?t[13].split("&").reduce(((e,t)=>{const[i,n=""]=t.split("=");return e[i]=n,e}),{}):{},fragment:t[14]||"",urlWithoutProtocol:t[0].replace(t[3],""),urlWithoutProtocolAndWww:t[0].replace(t[2],"")}}}var bt=new At(Vt.parseUrl(window.location.href).queryParams.vwoLogLevel||"error");const{toString:Rt}=Object.prototype;function Pt(e){return"[object Object]"===Rt.call(e)}function xt(e){return"[object Array]"===Rt.call(e)}function Dt(e){return"[object Null]"===Rt.call(e)}function Lt(e){return"[object Undefined]"===Rt.call(e)}function Ut(e){return!Lt(e)&&!Dt(e)}function Wt(e){return!Number.isNaN(e)&&"[object Number]"===Rt.call(e)}function kt(e){return"[object String]"===Rt.call(e)}function Mt(e){return"[object Boolean]"===Rt.call(e)}function Gt(e){return"[object Function]"===Rt.call(e)}function Ft(e){return"[object AsyncFunction]"===Rt.call(e)}function jt(e){return Pt(e)?"Object":xt(e)?"Array":Dt(e)?"Null":Lt(e)?"Undefined":function(e){return e!=e}(e)?"NaN":Wt(e)?"Number":kt(e)?"String":Mt(e)?"Boolean":function(e){return"[object Date]"===Rt.call(e)}(e)?"Date":function(e){return"[object RegExp]"===Rt.call(e)}(e)?"Regex":Gt(e)?"Function":Ft(e)?"AsyncFunction":function(e){return"[object Promise]"===Rt.call(e)}(e)?"Promise":"Unknown Type"}var Ht,$t,Bt,Jt,Kt=new class{mergeNestedObjects(...e){return e.reduce(((e,t)=>this.recursivelyMerge(e,t)))}mergeNestedObjectsV2(e={mergeArrays:!1},...t){return t.reduce(((t,i)=>this.recursivelyMerge(t,i,{},e)))}createNestedObjects(e,t){let i=e;return t&&t.split(".").forEach((e=>{Object.prototype.hasOwnProperty.call(i,e)||(i[e]={}),i=i[e]})),i}clearNestedObject(e,t){let i=e;const n=t.split("."),o=n[n.length-1];for(let e=0;e<n.length-1;e++)i=i[n[e]];Pt(i[o])?i[o]={}:delete i[o]}recursivelyMerge(e,t,i={},n={mergeArrays:!1}){if(Pt(e)&&Pt(t)){const o={};Object.keys(e).concat(Object.keys(t)).forEach((e=>{o[e]=1}));const s=Object.getOwnPropertyDescriptors(e),r=Object.getOwnPropertyDescriptors(t);return Object.keys(o).forEach((o=>{r[o]?Object.defineProperty(i,o,r[o]):Object.defineProperty(i,o,s[o]),this.recursivelyMerge(e[o],t[o],i[o],n)})),i}return n.mergeArrays&&xt(e)&&xt(t)?(xt(i)||(i=[]),i.splice(0,i.length,...e.concat(t)),i):t||e}};!function(e){e.SETTINGS="settings",e.CUSTOM="custom",e.TRIGGERS="triggers",e.TAGS="tags",e.EVENTS="events",e.DEBUG="debug",e.ROOT="root"}(Ht||(Ht={})),($t||($t={})).HISTORY="history",function(e){e.LOGS="logs"}(Bt||(Bt={})),function(e){e.ALIAS="$alias"}(Jt||(Jt={}));class zt{constructor(){this.originalValues={[Ht.SETTINGS]:{},[Ht.CUSTOM]:{},[Ht.TRIGGERS]:{},[Ht.EVENTS]:{[$t.HISTORY]:[]},[Ht.DEBUG]:{[Bt.LOGS]:[]}},this.reset()}reset(){this.values=JSON.parse(JSON.stringify(this.originalValues)),this.setValues(this.values)}getValue(e=""){try{return e.split(".").reduce(((e,t)=>e[t]),this.values)}catch(e){return null}}setValues(e,t=""){const i=this.getNamespace(t);if(Pt(e)){const t=i?Kt.createNestedObjects(this.values,i):this.values;Object.keys(e).forEach((i=>{const n=Object.getOwnPropertyDescriptor(e,i);Object.prototype.hasOwnProperty.call(n,"get")?Object.defineProperty(t,i,n):t[i]=e[i]}))}}clear(e){const t=this.getNamespace(e);Kt.clearNestedObject(this.values,t)}getNamespace(e){return(null==e?void 0:e.startsWith("."))?e.substring(1):e}}zt.logger=new At("warn");var Yt=new zt,Xt,qt=new class{constructor(){this.plugins={}}register(e){bt.debug(`Registering plugin '${e.pluginName}' in Plugins factory`),this.plugins[e.pluginName]=e}unregister(e){let t;t=kt(e)?e:e.pluginName,bt.debug(`Unregistering plugin '${t}' in Plugins factory`),this.plugins[t].removeAll(),delete this.plugins[t]}unregisterAll(){bt.debug("Unregistering all plugins in Plugins factory"),Object.keys(this.plugins).forEach((e=>{this.plugins[e].removeAll(),delete this.plugins[e]}))}clearData(){bt.debug("Clearing the data of all the plugins"),Object.keys(this.plugins).forEach((e=>{this.plugins[e].clearData()}))}};!function(e){e.EVENT="event",e.EVENT_PROPS="eventProps",e.STORAGE="storage",e.FORMULA="formula",e.OPERATOR="operator",e.TAG="tag",e.CONDITION_LEVEL_OPERATOR="clOperator"}(Xt||(Xt={}));var Qt,Zt=new class{get(e){return this[e]}set(e,t){this[e]=t}};!function(e){e[e.EXCLUDE_PASSED=1]="EXCLUDE_PASSED",e[e.INCLUDE_PASSED=2]="INCLUDE_PASSED",e[e.INCLUDE_FAILED=3]="INCLUDE_FAILED"}(Qt||(Qt={}));var ei,ti=Qt;!function(e){e.OR="o",e.AND="a"}(ei||(ei={}));var ii=ei;class ni{constructor(){this.experimentConfig={},this.pageConfig={},this.experimentConfigCache={},this.pageConfigCache={},this.previewParamsCleanedUrlCache={},ni.cleanerRegex=/(^https?:\/\/)?(w{3}\.)?(.*?)?((?:\/)(?:home|default|index)\.\w{3,4})?(\/)?([?#].*)?$/i,ni.logicalOperators=[ii.AND,ii.OR]}static get currentUrl(){return window.location.href}add(e,t){if(bt.debug("Adding pageGroup config to phoenix"),Ut(e)&&(Object.hasOwnProperty.call(e,"ec")&&e.ec.forEach((e=>{const t=Object.keys(e)[0];this.experimentConfig[t]||(this.experimentConfig[t]=e[t])})),Object.hasOwnProperty.call(e,"pc")&&e.pc.forEach((e=>{const t=Object.keys(e)[0];this.pageConfig[t]||(this.pageConfig[t]=e[t])}))),Ut(t)){if(xt(t.pc)){const e=this.getCache(ni.currentUrl,!0);t.pc.forEach((t=>{e[t]={didMatch:!0,reason:ti.INCLUDE_PASSED,cacheHit:!0}}))}if(xt(t.ec)){const e=this.getCache(ni.currentUrl);t.ec.forEach((t=>{e[t]={didMatch:!0,reason:ti.INCLUDE_PASSED,cacheHit:!0}}))}}}getCache(e,t){return t?(this.pageConfigCache=this.pageConfigCache||{},this.pageConfigCache[e]=this.pageConfigCache[e]||{},this.pageConfigCache[e]):(this.experimentConfigCache=this.experimentConfigCache||{},this.experimentConfigCache[e]=this.experimentConfigCache[e]||{},this.experimentConfigCache[e])}getPreviewParamsCleanedUrl(e){return e?(this.previewParamsCleanedUrlCache=this.previewParamsCleanedUrlCache||{},this.previewParamsCleanedUrlCache[e]||(this.previewParamsCleanedUrlCache[e]=Zt.get("jsLibUtils").getCleanedUrl(e,!0)),this.previewParamsCleanedUrlCache[e]):e}getIndexFileCleanedUrl(e){return e?(this.indexFileCleanedUrlCache=this.indexFileCleanedUrlCache||{},this.indexFileCleanedUrlCache[e]||(this.indexFileCleanedUrlCache[e]=e.replace(ni.cleanerRegex,"$1$2$3$5$6")),this.indexFileCleanedUrlCache[e]):e}validatePage(e,t,i,n){const o=t?this.pageConfig[e]:this.experimentConfig[e];if(!o)return bt.info(`ConfigId ${e} is not present inside ${t?"pageConfig":"experimentConfig"}`),{didMatch:!1,reason:ti.INCLUDE_FAILED,cacheHit:!1};const s=i||ni.currentUrl,r=this.getCache(s,t);if(r&&Object.hasOwnProperty.call(r,e))return bt.info(`Fetching value from cache for ${t?"pageConfigId":"experimentConfigId"} = ${e}`),r[e].cacheHit=!0,r[e];let a;const d=o.exc,l=o.inc;if(Array.isArray(d)&&d.length>0){const t=this.evaluateDSL(d,s,n||!1);if(t)return a={didMatch:!t,reason:ti.EXCLUDE_PASSED,cacheHit:!1},n||(r[e]=a),a}if(Array.isArray(l))if(l.length){const e=this.evaluateDSL(l,s,n||!1);a=e?{didMatch:e,reason:ti.INCLUDE_PASSED,cacheHit:!1}:{didMatch:e,reason:ti.INCLUDE_FAILED,cacheHit:!1}}else a={didMatch:!0,reason:ti.INCLUDE_PASSED,cacheHit:!1};return a=a||{didMatch:!1,reason:ti.INCLUDE_FAILED,cacheHit:!1},n||(r[e]=a),a}evaluateDSL(e,t,i){if(!xt(e)||e.length<2)return bt.error("Invalid dsl tree",e),!1;const n=[];return e.forEach((e=>{var o;let s;if(e||(s=!1),kt(e)&&(s=e),xt(e))if(ni.logicalOperators.includes(e[0]))s=this.evaluateDSL(e,t,i);else{const[n,r,...a]=e,d=null===(o=qt.plugins[Xt.OPERATOR])||void 0===o?void 0:o.get(r);let l;if(n.includes("url"))l=this.getIndexFileCleanedUrl(this.getPreviewParamsCleanedUrl(t));else{const e=a[0];l=this.validatePage(e,!0,t,i).didMatch,a[0]=!0}s=null==d?void 0:d(l,...a,{jsLibUtils:Zt.get("jsLibUtils"),pageUrl:!0})}n.push(s||!1)})),this.evaluateTree(n)}evaluateTree(e){let t=!1;switch(e[0]){case ii.AND:t=!e.includes(!1);break;case ii.OR:t=e.includes(!0)}return t}}var oi=new ni,si=new class{constructor(){const e=function(e,t){Object.defineProperty(this,e,{get:t,enumerable:!0})}.bind(this);e("settings",(()=>Yt.values[Ht.SETTINGS])),e("custom",(()=>Yt.values[Ht.CUSTOM])),e("url",(()=>window._vis_opt_url||window.location.href)),e("refUrl",(()=>window.document.referrer))}get triggers(){return Yt.values[Ht.TRIGGERS]}get tags(){return Yt.values[Ht.TAGS]}get pageGroupExperimentConfig(){return oi.experimentConfig}get pageGroupPageConfig(){return oi.pageConfig}get events(){return Yt.values[Ht.EVENTS]}get eventsHistory(){return this.events[$t.HISTORY]}get window(){return window}addNameSpace(e=""){const t=e.split(".")[0];t in this||Object.defineProperty(this,t,{get:()=>Yt.values[t],configurable:!0,enumerable:!0})}getValue(e=""){return Yt.getValue(e)}getHistoryEvents(e){var t,i,n;const o=[];null===(t=this.events[$t.HISTORY])||void 0===t||t.forEach((({name:t,event:i})=>{t===e&&o.push(i)}));const s=null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.crossStore;let r=null==s?void 0:s.getLocal({key:$t.HISTORY});return r&&(r=JSON.parse(r)),r&&r.forEach((({name:t,event:i})=>{t===e&&o.push(i)})),o}async getCrossStoreHistoryEvents(e){return new Promise((t=>{const i=[];window.fetcher.getValue("VWO._.crossStore.getLocal",[{key:$t.HISTORY}]).then((n=>{let o;n&&(o=JSON.parse(n)),o&&o.forEach((({name:t,event:n})=>{t===e&&i.push(n)})),t(i)})).catch((()=>{t(i)}))}))}},ri={MAX_EVENTS_HISTORY:1e4,MAX_LOGS_HISTORY:1e3,EVENTS_TO_PERSIST:["s.q","s.r"]};class ai{refreshState(e){Yt.setValues(e)}addValues(e,t=Ht.CUSTOM){const i=t===Ht.ROOT?"":t;Yt.setValues(e,i),i?si.addNameSpace(i):Object.keys(e).forEach((e=>{si.addNameSpace(e)}))}set(e,t,i=Ht.CUSTOM){this.addValues({[e]:t},i)}clear(e){Yt.clear(e)}clearAll(){Yt.reset()}updateSettings(e,t=""){this.addValues(e,t?`${Ht.SETTINGS}.${t}`:Ht.SETTINGS)}addEventInHistory({name:e,event:t}){const i=Yt.values[Ht.EVENTS][$t.HISTORY];i.push({name:e,event:t}),i.length>ri.MAX_EVENTS_HISTORY&&i.shift(),ri.EVENTS_TO_PERSIST.indexOf(e)>-1&&window.fetcher.getValue("VWO._.crossStore.getLocal",[{key:$t.HISTORY}]).then((i=>{let n=i;n?(n=JSON.parse(n),n.push({name:e,event:t})):n=[{name:e,event:t}],window.fetcher.getValue("VWO._.crossStore.set",[$t.HISTORY,JSON.stringify(n)])})).catch((e=>{console.log(e)}))}addLogsForDebugging(e){const t=Yt.values[Ht.DEBUG][Bt.LOGS];t.push(e),t.length>ri.MAX_LOGS_HISTORY&&t.shift()}updateTriggerState(e,t){this.addValues({state:t},`${Ht.TRIGGERS}.${e}`)}updateTriggerLastMetTS(e,t){this.addValues({lastMetTS:t},`${Ht.TRIGGERS}.${e}`)}updateTagState(e,t){ai.logger.debug(`Updating tag ${e} in store' with `,t),this.addValues(t,`${Ht.TAGS}.${e}`)}clearTriggerState(e=""){this.clear(e?`${Ht.TRIGGERS}.${e}`:Ht.TRIGGERS)}updateTriggerExecutionCount(e,t){this.addValues({executionCount:t},`${Ht.TRIGGERS}.${e}`)}}ai.logger=new At("warn");var di=new ai,li=new class{setStoragePlugin(e){this.storagePlugin=e}};const ci="{{survey_id}}";function ui(e,t){if(e.filters)for(let i=0;i<e.filters.length;i++)if("string"!=typeof e.filters[i])for(let n=0;n<e.filters[i].length;n++)e.filters[i][n]===ci&&(e.filters[i][n]=t);return e}var gi=new class{async execute({callbacks:e,data:t,eventName:i}){let n=t;for(let t=0;t<e.length;t++)if(Gt(e[t])||Ft(e[t])){const o=await e[t](n,i);o&&(n=o)}}};const hi=function(){var e,t;return(null===(t=null===(e=window.VWO)||void 0===e?void 0:e._)||void 0===t?void 0:t.performance)||window.performance};function vi(e){const t=e;return t.VWO=t.VWO||{firedTime:Date.now()},t.VWO.firedTime=t.VWO.firedTime||Date.now(),t}var pi,wi=new class{constructor(){this.events={},this.eventIdsMapping={},this.globalInterceptors={},this.eventId=0,this.eventsFrequencyManager={}}setGlobalInterceptors(e={}){this.globalInterceptors=e}async trigger(e,t={},i={}){const n=vi(t);e!==St.TIMER&&bt.info(`Triggering event '${e}'`,{data:n,event:this.events[e]}),hi().mark("event-"+e),Object.values(St).every((t=>!e.startsWith(t)))&&(this.addComputedEventProps(e,n),await this.trigger(St.WILD_CARD,n,{eventName:e}),di.addEventInHistory({name:e,event:n}));const o=this.events[e];let s;s=this.eventsFrequencyManager[e]?this.eventsFrequencyManager[e].then((()=>this.executeListeners(e,n,i,o))):this.executeListeners(e,n,i,o),this.eventsFrequencyManager[e]=s,await s}async executeListeners(e,t,i={},n){const o=null==n?void 0:n.length;if(o){const s=[],r=n.push;n.push=o=>{r.call(n,o),s.push(new Promise((n=>{queueMicrotask((async()=>{await gi.execute({callbacks:[this.globalInterceptors.before,o.before,o.fn,this.globalInterceptors.after,o.after],data:t,eventName:i.eventName||e}),this.eventIdsMapping[o.id].executionCount++,n(null)}))})))};for(let r=0;r<o;++r){const o=n[r];bt.debug(`Synchronously executing listener for event '${o.id}' with event name '${e}'`),s.push(gi.execute({callbacks:[this.globalInterceptors.before,o.before,o.fn,this.globalInterceptors.after,o.after],data:t,eventName:i.eventName||e}).then((()=>{this.eventIdsMapping[o.id].executionCount++})))}await Promise.all(s),n.push=r}else e!==St.TIMER&&bt.debug(`No callbacks for the event ${e}. Events List in eventBus is`,this.events)}on(e,t,{before:i,after:n}={}){var o;bt.debug(`Attaching listener for event name '${e}'`);const s=++this.eventId,r=Object.assign(Object.assign({id:s,fn:t},i&&{before:i}),n&&{after:n});return this.events[e]=this.events[e]||[],this.events[e].push(r),this.eventIdsMapping[s]={executionCount:0,event:r},null===(o=qt.plugins[Xt.EVENT])||void 0===o||o.addDomEvent(e),this.eventId}off(e,t){var i,n;bt.debug(`Removing a listener for event '${e}'`,{reference:t});const o=null===(i=this.events[e])||void 0===i?void 0:i.push;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter((e=>Gt(t)?e.fn!==t:e.id!==Number(t))),o&&(this.events[e].push=o)}remove(e){bt.debug(`Removing all the listener for event '${e}'`),this.events[e]=[]}removeAll(){bt.debug("Removing all the listener for every event"),this.events={},this.eventIdsMapping={}}event(e){return{register(t,i){bt.debug(`Registering hooks for event ID '${e}'`,{hook:t}),this.eventIdsMapping[e][t]=i},get executionCount(){return this.eventIdsMapping[e].executionCount},get hasExecuted(){return Boolean(this.eventIdsMapping[e].executionCount)}}}addComputedEventProps(e,t){var i,n;const o=(null===(i=qt.plugins[Xt.EVENT_PROPS])||void 0===i?void 0:i.get("*"))||{},s=(null===(n=qt.plugins[Xt.EVENT_PROPS])||void 0===n?void 0:n.get(e))||{},r=Object.assign(Object.assign({},o),s);Object.keys(r).forEach((i=>{t[i]=r[i](t,e)}))}};!function(e){e.AND="a",e.OR="o"}(pi||(pi={}));var Ei,fi=new class{evaluateExpression(e){return e&&this.recursivelyEvaluateTree(0,e)}recursivelyEvaluateTree(e,t){const i=t[e];if(Mt(i))return Boolean(t[e]);if(xt(i))return Boolean(i[0]);if(!Ut(i))return!0;const n=2*(e+1)-1,o=2*(e+1);return this.isValid(kt(i)?i:JSON.parse(JSON.stringify(i)),this.recursivelyEvaluateTree(n,t),this.recursivelyEvaluateTree(o,t))}isValid(e,t,i){switch(e){case pi.AND:return t&&i;case pi.OR:return t||i;default:throw new Error(e)}}};class _i{clearData(){}}!function(e){e.EVENT="event",e.FORMULA="formula",e.CUSTOM="custom",e.SETTINGS="settings",e.DEFAULT="default",e.STORAGE="storage",e.WINDOW="window",e.TAGS="tags"}(Ei||(Ei={}));var mi=new class{async getValue({event:e,variableName:t,formulaValues:i}){return bt.debug(`Extracting value of variable '${t}'`),xt(t)?Promise.all(t.map((async t=>await this.extractVariableValue({event:e,variableName:t,formulaValues:i})))):this.extractVariableValue({event:e,variableName:t,formulaValues:i})}async extractVariableValue({event:e,variableName:t,formulaValues:i}){var n,o;bt.debug(`Extracting value of variable '${t}'`);const{type:s,key:r}=this.getVariableTypeAndKey(t);let a,d=!1;switch(bt.debug(`Evaluated type and key of variable '${t}' are `,{type:s,key:r}),s){case Ei.EVENT:a=e;break;case Ei.FORMULA:a=i;break;case Ei.CUSTOM:a=si.custom;break;case Ei.SETTINGS:a=si.settings;break;case Ei.WINDOW:a=this.getValueFromMtWindow(r);break;case Ei.TAGS:try{a=r.startsWith("js")?await(null===(n=qt.plugins[Xt.TAG])||void 0===n?void 0:n.get(r).fn()):null===(o=qt.plugins[Xt.TAG])||void 0===o?void 0:o.get(r).fn}catch(e){}break;case Ei.STORAGE:{const e=qt.plugins[Xt.STORAGE],t=r.split("."),[i,n,o]=t,s=null==e?void 0:e.get(i);a="includes"===n?await(s&&s.includes?s.includes(o,"cookies"===i):void 0):await(s&&s.getItem?s.getItem(n,"cookies"===i):void 0);break}default:a=si,d=!0}let l=s===Ei.STORAGE||s===Ei.WINDOW?a:this.extractValue(a,r);return l=s===Ei.TAGS?a:l,d&&Lt(l)&&(l=this.getValueFromMtWindow(r)),bt.debug(`Evaluated value of variable '${t}' is '${l}'`),l}async getValueFromMtWindow(e){const t=window.fetcher||{getValue:e=>Promise.resolve(window[e])};let i;try{i=await t.getValue(e)}catch(e){}return i}getVariableTypeAndKey(e){var t;bt.debug(`Getting type and key of variable '${e}'`);const i=e.split("."),n=null===(t=i.splice(0,1)[0])||void 0===t?void 0:t.toLowerCase();return Object.values(Ei).includes(n)?{type:n,key:i.join(".")}:{type:Ei.DEFAULT,key:e}}extractValue(e,t){try{return e[t]||t.split(".").reduce(((e,t)=>e[t]),e)}catch(e){return}}},Oi=new class{sum(e,t){return e.reduce(((e,i)=>e+t.reduce(((e,t)=>e+(Number(i[t])||0)),0)),0)}multiply(e,t){return e.reduce(((e,i)=>e+t.reduce(((e,t)=>e*(Number(i[t])||1)),1)),1)}};class Si{static ordered(e,t){const i=Si.getTriggerConditionsOrderState(e.id);for(let n=0;n<t.length;n++){const o=t[n];if(!i[o]&&!e.currentSatisfiedConditions[o])return!1;i[o]=!0,di.updateTriggerState(Si.generateTriggerOrderingNamespace(e.id),i)}return!0}static strict(e,t){const i=Object.keys(Si.getTriggerConditionsOrderState(e.id)).map((e=>Number(e))).sort(((e,i)=>t.indexOf(e)-t.indexOf(i))),n=Object.keys(e.currentSatisfiedConditions).filter((t=>Boolean(e.currentSatisfiedConditions[t]))).map((e=>Number(e))).sort(((e,i)=>t.indexOf(e)-t.indexOf(i))),o=[...i,...n].slice(0,t.length);let s={};for(let i=0;i<o.length;i++){if(t[i]!==o[i]){s={};for(let e=0;e<n.length&&t[e]===n[e];e++)s[n[e]]=!0;return di.updateTriggerState(Si.generateTriggerOrderingNamespace(e.id),s),!1}s[o[i]]=!0}return di.updateTriggerState(Si.generateTriggerOrderingNamespace(e.id),s),o.length===t.length}static generateTriggerOrderingNamespace(e){return e+".order"}static getTriggerConditionsOrderState(e){return si.getValue(`${Ht.TRIGGERS}.${this.generateTriggerOrderingNamespace(e)}.state`)||{}}}var yi={sum:Oi.sum,multiply:Oi.multiply,ordered:Si.ordered,strict:Si.strict};const Ti={UNKNOWN_SET_API_TYPE:"Unknown type '{{type}}' found in set API.",EVENTS:{ALREADY_EXISTS:"Event with name '{{eventName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Event with name '{{eventName}}' has not been registered yet. Please use 'add' API to register it."},OPERATORS:{ALREADY_EXISTS:"Operator with name '{{operatorName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Operator with name '{{operatorName}}' has not been registered yet. Please use 'add' API to register it."},FORMULAS:{ALREADY_EXISTS:"Formula with name '{{formulaName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Formula with name '{{formulaName}}' has not been registered yet. Please use 'add' API to register it."},STORAGES:{ALREADY_EXISTS:"Storage with name '{{storageName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Storage with name '{{storageName}}' has not been registered yet. Please use 'add' API to register it."},TAGS:{ALREADY_EXISTS:"Tag with name '{{tagName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Tag with name '{{tagName}}' has not been registered yet. Please use 'add' API to register it."},EVENT_PROP:{ALREADY_EXISTS:"Event property with name '{{propName}}' already exists for event '{{eventName}}'. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Event property with name '{{propName}}' has not been registered yet for event '{{eventName}}'. Please use 'add' API to register it."}},Ci={EVENTS:{NO_EVENT_TO_REMOVE:"Unable to remove Event '{{eventName}}' as it's not been registered."},OPERATORS:{NO_OPERATOR_TO_REMOVE:"Unable to remove Operator '{{operatorName}}' as it's not been registered."},FORMULAS:{NO_FORMULA_TO_REMOVE:"Unable to remove Formula '{{formulaName}}' as it's not been registered."},STORAGES:{NO_STORAGE_TO_REMOVE:"Unable to remove Storage '{{storageName}}' as it's not been registered."},TAGS:{NO_TAG_TO_REMOVE:"Unable to remove Tag '{{tagName}}' as it's not been registered."},EVENT_PROP:{NO_EVENT_PROP_TO_REMOVE:"Unable to remove Event property '{{propName}}' for event '{{eventName}}' as it's not been registered."}};class Ii extends _i{constructor(){super(),this.pluginName=Xt.FORMULA,this.formulas={},this.initialize()}add(e,t){bt.debug(`Adding formula '${e}' in FormulasManager`),this.formulas[e]?bt.error(Ti.FORMULAS.ALREADY_EXISTS,{formulaName:e}):this.formulas[e]=t}update(e,t){bt.debug(`Updating formula '${e}' in FormulasManager`),this.formulas[e]=t}get(e){return bt.debug(`Getting formula '${e}' in FormulasManager`),this.formulas[e]?this.formulas[e]:(bt.error(Ti.FORMULAS.NOT_REGISTERED,{formulaName:e}),null)}remove(e){bt.debug(`Removing formula '${e}' in FormulasManager`),this.formulas[e]?delete this.formulas[e]:bt.warn(Ci.FORMULAS.NO_FORMULA_TO_REMOVE,{formulaName:e})}removeAll(){bt.debug("Removing all formulas in FormulasManager"),this.formulas={}}initialize(){Object.keys(yi).forEach((e=>{this.add(e,yi[e])}))}}var Ni=new class{evaluate(e=[],t){const i={};return e.forEach((e=>{const n=this.evaluateFormulaExpression(e,t);i[e.id]=n})),i}evaluateFilter(e,t){return e.reduce(((e,t)=>this.evaluateFormulaExpression(t,e)),t)}evaluateArgs(e,t){return e.map((e=>this.evaluateFormulaExpression(e,t)))}evaluateFormulaExpression(e,t){var i;return(e.fn||(null===(i=qt.plugins[Xt.FORMULA])||void 0===i?void 0:i.get(e.type)))(Ut(e.filters)?this.evaluateFilter(e.filters,t):t,Ut(e.args)?e.args.map((e=>Pt(e)?this.evaluateArgs([e],t)[0]:e)):e.args)}};class Ai{clearData(){}get persistedState(){return""}}function Vi(e){return e&&e instanceof Ai}function bi(e){return Pt(e)&&!Vi(e)}var Ri=new class{constructor(){this.serializeValidationQueue={}}async isValid(e,t,i,n,o={},s=!1){bt.debug(`Checking validity of trigger '${e}'`,{trigger:t,event:i,eventName:n}),this.saveEventState(e,n,!0);const{isValid:r,shouldRemoveEventListener:a}=await this.validateTrigger(t,i,{eventName:n,triggerName:e,exitTriggersMet:o,validateFromState:s});return this.saveTriggerState(e,this.hasTriggerMetBefore(e)||r),{isValid:r,shouldRemoveEventListener:a}}async validateTrigger(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r,validateFromState:a}={},d){return n?(this.serializeValidationQueue[n]=this.serializeValidationQueue[n]||Promise.resolve(),this.serializeValidationQueue[n]=this.serializeValidationQueue[n].then((()=>a?this.validateFromState(e,{triggerName:n,exitTriggersMet:s}):this.validateTriggerHandler(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r},d))),this.serializeValidationQueue[n]):this.validateTriggerHandler(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r},d)}async validateFromState(e,{triggerName:t}={}){const i={},n=e=>{const o=e=>()=>xt(e)?n(e):e?!1!==e.persistState&&this.hasConditionMetBefore(t,e.id)?(i[e.id]=!0,Promise.resolve([!0,this.getTimeStampForConditionMet(t,e.id)])):Promise.resolve([!1,0]):null;return Vi(e[0])?e[0].fn({},...e.slice(1).map(o)):o(e[0])()};let o=e.cnds;e.dslv&&1!==e.dslv||(o=this.convertLevelOrderToTree(e.cnds,0),o=xt(o)?o:[o]);const s=(await n(o))[0];return{isValid:(!e.formula||e.formula.every((e=>{var n,o;return null===(o=null===(n=qt.plugins[Xt.FORMULA])||void 0===n?void 0:n.get(e.type))||void 0===o?void 0:o({id:t,currentSatisfiedConditions:i},e.args)})))&&s,shouldRemoveEventListener:!1}}iterateAndValidate(e,t,i,n,o,s,r={}){const a=e=>async(r={})=>{if(xt(e))return this.iterateAndValidate(e,t,i,n,o,s,r);let a=!0,d=!1;if(i){if((!r.doNotUseCache||n!==e.event)&&!1!==e.persistState&&this.hasConditionMetBefore(i,e.id))return bt.debug("Trigger condition already met before. Skipping it's validation.",{triggerName:i,conditionId:e.id}),[!0,this.getTimeStampForConditionMet(i,e.id)];a=this.hasEventOccurred(i,e.event),e.hist&&e.event!==n&&(d=!0),a||bt.debug("Event hasn't occurred before. Skipping it's validation.",{triggerName:i,event:e.event})}if(n&&e.event!==n)return[!1,0];const l=(a||d)&&await this.validateTriggerOperand(e,e.event===n||(null==t?void 0:t.useUnsavedEvents)?t:{fromLocalStorage:!0},{eventName:e.event,skipEventProps:o,triggerName:i});return!l&&!1!==e.persistState&&this.hasConditionMetBefore(i,e.id)?[!0,this.getTimeStampForConditionMet(i,e.id)]:(i&&this.saveConditionState(i,e.id,l,n===e.event?t.VWO.firedTime:null),l&&!1!==e.persistState&&(s[e.id]=!0),[l,l?this.getTimeStampForConditionMet(i,e.id):0])};return Vi(e[0])?e[0].fn(r,...e.slice(1).map(a)):a(e[0])()}convertLevelOrderToTree(e,t){if(!e[t])return null;if(kt(e[t])||Vi(e[t])){const i=[e[t]],n=this.convertLevelOrderToTree(e,2*(t+1)-1);n&&i.push(n);const o=this.convertLevelOrderToTree(e,2*(t+1));return o&&i.push(o),i}return e[t]}async validateTriggerHandler(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r}={},a){try{if(!e||!Pt(e))return{isValid:!0,shouldRemoveEventListener:!1};if(r){const{cnds:t}=e,i=e=>xt(e)?e.some(i):!(!bi(e)||e.event!==St.TIMER);if(t.some(i))return{isValid:!0,shouldRemoveEventListener:!1}}const d={};let l=!1;if(i){const{cnds:s}=e,r=s.length,d=async e=>{if(xt(e))return void await Promise.all(e.map(d));a&&bi(e)&&ui(e,a);let s=!1;if(bi(e)&&e.event===i){let r=!0;(e.filters||[]).forEach((async e=>{kt(e)||"exec"===e[1]&&(r=!1)})),r&&(s=await this.validateTriggerOperand(e,t,{eventName:i,triggerName:n,skipEventProps:o}))}s&&(l=!0)};for(let e=0;e<r;++e)await d(s[e])}else l=!0;let c=null==e?void 0:e.cnds;e.dslv&&1!==e.dslv||(c=this.convertLevelOrderToTree(c,0),c=xt(c)?c:[c]);const u=(await this.iterateAndValidate(c,t,n,i,o,d,{}))[0];bt.debug("Generated tree conditions for trigger",{triggerName:n,treeConditions:u});const g=!e.formula||e.formula.every((e=>{var t,i;return null===(i=null===(t=qt.plugins[Xt.FORMULA])||void 0===t?void 0:t.get(e.type))||void 0===i?void 0:i({id:n,currentSatisfiedConditions:d},e.args)})),h=this.shouldRemoveEventListener(i,c,d,s);return{isValid:l&&g&&u,shouldRemoveEventListener:h}}catch(i){let o;throw(null==e?void 0:e.cnds)||(o="Empty Triggger Present - "+n),126657===window._vwo_acc_id&&window.VWO._.customError&&window.VWO._.customError({msg:i.stack||i.message||"Something wrong in TValidator",url:"Error in triggerValidator",lineno:252,colno:5,source:JSON.stringify({triggerName:n,event:t,trigger:JSON.stringify(e),errMsg:i.message,errStk:i.stack})}),new Error(o||i)}}async validateTriggerOperand({filters:e,formula:t,id:i,hist:n},o,{eventName:s,triggerName:r,skipEventProps:a=!1}={}){var d;const l=Ni.evaluate(t,[o]);if(n&&Object.keys(n).length&&s&&o){const e=window.VWO.modules.eventHistHandler.getEventsByDate(s,n.dr,o);let t;if(null===(d=n.pf)||void 0===d?void 0:d.length){const i=this.evaluateDSL.bind(this),o=null==e?void 0:e.map((async e=>i(n.pf,{triggerName:r,eventName:s,event:e,formulaValues:l})));t=o&&await Promise.all(o),t=e.filter(((e,i)=>t[i]))}else t=e;Object.keys(n.data).length&&(o._meta=window.VWO.modules.eventHistHandler.getCumulativeData(t,n.data))}const c=null==e?void 0:e.map((async(e,t)=>{var n,d,c,u,g,h;if(kt(e))return e;const v=null===(u=null===(c=null===(d=null===(n=o)||void 0===n?void 0:n.preComputedConds)||void 0===d?void 0:d[r])||void 0===c?void 0:c[i])||void 0===u?void 0:u[t];if("boolean"==typeof v)return v;let[p,w,...E]=e;if((null===(g=window._vwoCc)||void 0===g?void 0:g.syncServerUrl)&&(E=await Promise.all(this.processRhsOperand(E))),a&&p.startsWith(Ei.EVENT+"."))return!0;const f=await mi.getValue({event:o,variableName:p,formulaValues:l}),_=null===(h=qt.plugins[Xt.OPERATOR])||void 0===h?void 0:h.get(w);return await(null==_?void 0:_(f,...E,{eventName:s,triggerName:r,jsLibUtils:Zt.get("jsLibUtils")}))||!1})),u=c&&await Promise.all(c);return!u||this.evaluateFilterExpression(u)}evaluateFilterExpression(e){if(!Mt(e[0]))return fi.evaluateExpression(e);for(let t=e.length-1;t>=0;--t)if(!e[t])return!1;return!0}hasEventOccurred(e,t){return Boolean(si.getValue(`${Ht.TRIGGERS}.${this.generateTriggerEventId(e,t)}.state`))}hasConditionMetBefore(e,t){return Boolean(si.getValue(`${Ht.TRIGGERS}.${this.generateTriggerConditionId(e,t)}.state`))}getTimeStampForConditionMet(e,t){return Number(si.getValue(`${Ht.TRIGGERS}.${this.generateTriggerConditionId(e,t)}.lastMetTS`))}hasTriggerMetBefore(e){return Boolean(si.getValue(`${Ht.TRIGGERS}.${e}.state`))}saveTriggerState(e,t){di.updateTriggerState(e,t)}saveEventState(e,t,i){bt.debug("Saving trigger event's state i.e. it's event occurred or not.",{triggerName:e,eventName:t,state:i}),di.updateTriggerState(this.generateTriggerEventId(e,t),i)}saveConditionState(e,t,i,n){bt.debug("Saving trigger condition's state i.e. it's condition satisfied or not.",{triggerName:e,conditionId:t,state:i}),di.updateTriggerState(this.generateTriggerConditionId(e,t),i),i&&di.updateTriggerLastMetTS(this.generateTriggerConditionId(e,t),n)}generateTriggerConditionId(e,t){return`${e}.trigger.${t}`}generateTriggerEventId(e,t){return`${e}.event.${t}`}shouldRemoveEventListener(e,t,i,n){if(e===St.TIMER){const e=t=>xt(t)?t.every(e):!(bi(t)&&t.event===St.TIMER&&!n[t.exitTrigger]&&!i[t.id]);return t.every(e)}return!1}async evaluateDSL(e,{triggerName:t,eventName:i,event:n,formulaValues:o}){if(xt(e)&&e.length>1){const s=e.map((async e=>{var s,r;let a;if(e||(a=!1),kt(e)&&(a=e),xt(e))if([ii.AND,ii.OR].includes(e[0]))a=this.evaluateDSL(e,{triggerName:t,eventName:i,event:n,formulaValues:o});else{let[d,l,...c]=e;(null===(s=window._vwoCc)||void 0===s?void 0:s.syncServerUrl)&&(c=await Promise.all(this.processRhsOperand(c)));const u=null===(r=qt.plugins[Xt.OPERATOR])||void 0===r?void 0:r.get(l),g=await mi.getValue({event:n,variableName:d,formulaValues:o});a=await(null==u?void 0:u(g,...c,{eventName:i,triggerName:t,jsLibUtils:Zt.get("jsLibUtils")}))||!1}return a})),r=s&&await Promise.all(s);return this.evaluateTree(r)}return!1}evaluateTree(e){let t=!1;switch(e[0]){case ii.AND:t=!e.includes(!1);break;case ii.OR:t=e.includes(!0)}return t}processRhsOperand(e){return e.map((e=>{if("string"==typeof e&&e.startsWith("{{")&&e.endsWith("}}")){const t=e.slice(2,-2);return mi.getValueFromMtWindow(t)}return e}))}},Pi=new class{constructor(){this.triggerEventListeners={}}initialize(e){Object.keys(e).forEach((t=>{this.triggerEventListeners[t]?di.updateTriggerExecutionCount(t,0):this.add(t,e[t])}))}add(e,t,i){var n;bt.debug(`Attaching event listeners for all the events using in '${e}' trigger conditions.`);const o={};this.triggerEventListeners[e]=this.triggerEventListeners[e]||{};const s=n=>{var r,a;if(xt(n))n.forEach(s);else if(bi(n)){if(i&&ui(n,i),null===(r=qt.plugins[Xt.EVENT])||void 0===r||r.updateConditions(n.event,[this.extractDomEventFromCondition(e,n)]),!this.triggerEventListeners[e][n.event]){n.persistState&&this.executeTriggerValidatorOfHistoryEvents(e,t,n.event),n.hist&&(window.VWO.modules.eventHistHandler.triggerEvents.push({triggerName:e,trigger:t,eventName:n.event}),(null===(a=window._vwoCc)||void 0===a?void 0:a.syncServerUrl)||this.validateEventFromHistHandler(e,t,n.event));const i=wi.on(n.event,(async(n,o)=>{await this.validateAndDispatchTriggerEvent(e,t,n,o,i)}));this.triggerEventListeners[e][n.event]=i}if(n.exitTrigger){const i=this.getTriggerEventName(n.exitTrigger),s=wi.on(i,(r=>{o[n.exitTrigger]=1;const a=this.triggerEventListeners[e][n.event];this.validateAndDispatchTriggerEvent(e,t,r,n.event,a,o),wi.off(i,s)}));this.triggerEventListeners[e][i]=s}}};null===(n=null==t?void 0:t.cnds)||void 0===n||n.forEach(s)}async validateTriggerFromHistory(e,t){let i=t;t.cnds&&(i=t.cnds);const n=null==i?void 0:i.map((async t=>{var i;if(null===(i=t)||void 0===i?void 0:i.event){const i=si.getHistoryEvents(t.event),n=await si.getCrossStoreHistoryEvents(t.event);let o=!1;const s=[...i,...n].map((async i=>{const{isValid:n}=await Ri.isValid(e,{cnds:[t]},i,t.event);n&&(o=n)}));return await Promise.all(s),o}return Array.isArray(t)?this.validateTriggerFromHistory(e,t):t})),o=await Promise.all(n);return fi.evaluateExpression(o)}executeTriggerValidatorOfHistoryEvents(e,t,i){si.getHistoryEvents(i).forEach((n=>this.validateAndDispatchTriggerEvent(e,t,n,i)))}async validateEventFromHistHandler(e,t,i){await Ri.isValid(e,t,vi({isCustomEvent:!0,fromLocalStorage:!0}),i)}async validateAndDispatchTriggerEvent(e,t,i,n,o,s,r=!1){var a,d,l;try{let a=this.getExecutionCount(e)||0;if(t.occurrence&&t.occurrence<=a)return;const{isValid:d,shouldRemoveEventListener:l}=await Ri.isValid(e,t,i,n,s,r);if(l&&wi.off(n,o),d){if(a=this.getExecutionCount(e)||0,t.occurrence&&t.occurrence<=a)return;di.updateTriggerExecutionCount(e,a+1),await wi.trigger(this.getTriggerEventName(e),i)}}catch(t){if(126657===window._vwo_acc_id){const i=(null===(l=null===(d=null===(a=window.VWO)||void 0===a?void 0:a._)||void 0===d?void 0:d.allSettings)||void 0===l?void 0:l.triggers[e])||"defNotFound";window.VWO._.customError&&window.VWO._.customError({msg:t.stack||t.message||"Something wrong in validateAndDispatch",url:"Error in validateAndDispatch",lineno:252,colno:5,source:JSON.stringify({triggerName:e,triggerDef:i,errMsg:t.message,errStk:t.stack})})}}}remove(e){bt.debug(`Removing event listeners of trigger '${e}'`),Object.entries(this.triggerEventListeners[e]).forEach((([e,t])=>{wi.off(e,t)})),delete this.triggerEventListeners[e]}removeAll(){Object.keys(this.triggerEventListeners).forEach((e=>{this.remove(e)}))}extractDomEvents(e){bt.debug("Extracting DOM events from triggers config");const t={};return Object.keys(e).forEach((i=>{var n,o;null===(o=null===(n=e[i])||void 0===n?void 0:n.cnds)||void 0===o||o.forEach((e=>{bi(e)&&this.extractDomEventFromCondition(i,e)&&(t[e.event]=t[e.event]||[],t[e.event].push(Object.assign(Object.assign({},e),{triggerName:i})))}))})),t}extractDomEventFromCondition(e,t){if(t.event===Tt.PAGE_UNLOAD_EVENT)this.setPageUnloadTrigger(e);else if(t.event.toLowerCase().includes(Ot.DOM+"_"))return Object.assign(Object.assign({},t),{triggerName:e});return null}setPageUnloadTrigger(e){window.VWO._.pageUnloadTriggers=window.VWO._.pageUnloadTriggers||{},window.VWO._.pageUnloadTriggers[e]=!0}getTriggerEventName(e){return`${St.TRIGGER}.${e}`}getExecutionCount(e){const t=si.getValue(`${Ht.TRIGGERS}.${e}.executionCount`);return null!=t?t:0}},xi={log:(new class{log({event:e,data:t,getters:i,actions:n,vwoEvents:o}){console.log(e,t,i,n,o)}}).log},Di=Object.freeze({__proto__:null,default:xi});class Li extends _i{constructor(){super(),this.pluginName=Xt.TAG,this.tags={},this.initialize()}add(e,t,{occurrence:i,scope:n,sync:o}={}){bt.debug(`Adding tag '${e}' in TagsManager`),this.tags[e]?bt.error(Ti.TAGS.ALREADY_EXISTS,{tagName:e}):this.tags[e]={fn:t,occurrence:i,scope:n,sync:o}}update(e,t,{occurrence:i,scope:n,sync:o,fireUniquelyForEveryEvent:s}={}){bt.debug(`Updating tag '${e}' in TagsManager`),this.tags[e]={fn:t,occurrence:i,scope:n,sync:o,fireUniquelyForEveryEvent:s}}get(e){return bt.debug(`Getting tag '${e}' in TagsManager`),this.tags[e]?this.tags[e]:(bt.error(Ti.TAGS.NOT_REGISTERED,{tagName:e}),null)}remove(e){bt.debug(`Removing tag '${e}' in TagsManager`),this.tags[e]?delete this.tags[e]:bt.warn(Ci.TAGS.NO_TAG_TO_REMOVE,{tagName:e})}removeAll(){bt.debug("Removing all tags in TagsManager"),this.tags={}}initialize(){Object.keys(Di).forEach((e=>{this.add(e,Di[e])}))}}var Ui=new class{flushTagData(e){delete this._vwoEventsInstance[e]}getVwoInstanceObject(){return this._vwoEventsInstance}async executeTagUniquelyForEveryEvent(e){if(!e||!e.tags)return;const t=[];Object.keys(e.tags).forEach((i=>{const n=e.tags[i];if(n){const o=n.data,s=this.getTagDetails(i).fn({data:o,event:e.event,getters:si,actions:di,vwoEvents:this._vwoEventsInstance});t.push(s)}})),await Promise.all(t)}async execute(e,t,i,n,o){var s,r,a,d,l,c;if(this._vwoEventsInstance=o,"metric"===t.id&&(null===(d=null===(a=null===(r=null===(s=window.VWO)||void 0===s?void 0:s.modules)||void 0===r?void 0:r.utils)||void 0===a?void 0:a.libUtils)||void 0===d?void 0:d.isBot2()))return;const u="metric"===t.id||"sampleVisitor"===t.id?t.data:await mi.getValue({variableName:`${Ht.SETTINGS}.${t.data}`}),g=this.generateTagId(t.id),h=si.tags[g].executionCount||0,v=this.getTagDetails(t.id);if(!Wt(v.occurrence)||h<v.occurrence){bt.info(`Started executing tag '${t.id}' because of:`,i),di.updateTagState(g,{hasExecuted:!0,executionCount:(si.tags[g].executionCount||0)+1,stoppedByExitCondition:!1}),hi().mark("tag-"+t.id);const o=i.name;if(this._vwoEventsInstance[o]=this._vwoEventsInstance[o]||{},o&&n.fireUniquelyForEveryEvent)return this._vwoEventsInstance[o].event=this._vwoEventsInstance[o].event||i,this._vwoEventsInstance[o].tags=this._vwoEventsInstance[o].tags||{},this._vwoEventsInstance[o].tags[t.id]=this._vwoEventsInstance[o].tags[t.id]||{},this._vwoEventsInstance[o].tags[t.id].data=this._vwoEventsInstance[o].tags[t.id].data||[],void this._vwoEventsInstance[o].tags[t.id].data.push(u);n.sync||await Promise.resolve();const s=null===(c=null===(l=v.fn)||void 0===l?void 0:l.type)||void 0===c?void 0:c.startsWith("vwoWrappedFn");i.executingTagTrigger=n.triggerName,await v.fn({data:u,event:i,getters:si,actions:di,vwoEvents:s?null:e})}else bt.info(`Maximum occurrence of ${v.occurrence} has reached. Skipping executing tag '${t.id}'`)}generateTagId(e){return""+e}getTagDetails(e){var t;return null===(t=qt.plugins[Xt.TAG])||void 0===t?void 0:t.get(e)}};let Wi=0;var ki=new class{constructor(){this.rulesMap={}}initialize(e,t){this.vwoEventsInstance=e,Object.keys(t).forEach((e=>{this.remove(e),this.add(t[e],e)}))}add(e,t){(xt(e.triggers)?e.triggers:[e.triggers]).forEach((i=>{this.rulesMap[i]?bt.debug(`Skipping adding the listeners for trigger ${i} as rulesMap exist`):this.attachTriggersListeners(this.vwoEventsInstance,i),this.rulesMap[i]=this.rulesMap[i]||[],e.tags.forEach((n=>{this.rulesMap[i].push(Object.assign(Object.assign({},e),{id:t,tags:[n]}))})),this.sortPriorityRuleTags(i)}))}remove(e){bt.debug(`Removing all event listeners of rule '${e}'`),Object.keys(this.rulesMap).forEach((t=>{this.rulesMap[t]=this.rulesMap[t].filter((t=>t.id!==e))}))}removeAll(){Object.keys(this.rulesMap).forEach((e=>{wi.remove(Pi.getTriggerEventName(e)),delete this.rulesMap[e]}))}generateRandomRuleId(){return Wi++,"rule_"+Wi}attachTriggersListeners(e,t){wi.on(Pi.getTriggerEventName(t),(async i=>{const n=this.rulesMap[t].map((n=>n.tags.map((async o=>{var s,r,a;const d=Ut(o.shouldConsiderParentExitCondition)?o.shouldConsiderParentExitCondition:n.shouldConsiderParentExitCondition,l=this.getExitConditions(i,n.exitCondition,o.exitCondition,d),c=await this.shouldExit(i,l),u=Ui.generateTagId(o.id);if(di.updateTagState(u,{stoppedByExitCondition:c,lastExitConditions:l}),c)bt.info(`Exit condition(s) met. Not executing tag '${o.id}'`,l);else{const n=null===(r=null===(s=this.vwoEventsInstance.tags)||void 0===s?void 0:s.tags)||void 0===r?void 0:r[o.id];await Ui.execute(Object.assign(Object.assign({},e),{[Ct.EXIT_CONDITIONS]:l,clearData:e.clearData.bind(e)}),o,i,{sync:n.sync||(null===(a=i.props)||void 0===a?void 0:a.fireLinkedTagSync),fireUniquelyForEveryEvent:n.fireUniquelyForEveryEvent,triggerName:t},e)}}))));await Promise.all(Array.prototype.concat.apply([],n))}))}sortPriorityRuleTags(e){this.rulesMap[e].sort(((e,t)=>{const i=e.tags[0],n=t.tags[0];return(Ut(i.priority)&&-1!==i.priority?i.priority:1/0)-(Ut(n.priority)&&-1!==n.priority?n.priority:1/0)}))}assignExecutionProperty(e){const t=this.rulesMap[e],i={},n=["sync","fireUniquelyForEveryEvent"];for(let e=t.length-1;e>=0;e--){const o=t[e].tags[0],s=i[o.id]||Ui.getTagDetails(o.id);Object.keys(n).forEach((e=>{const t=n[e];o[t]=s[t]})),i[o.id]=s}}getExitConditions(e,t,i,n=!0){const o=n?[...e[Ct.EXIT_CONDITIONS]||[]]:[];return t&&o.push(t),i&&o.push(i),o}async shouldExit(e,t=[]){const i=t.length;for(let n=0;n<i;++n){const i=t[n];if(await Ri.validateTriggerOperand({filters:i},e))return!0}return!1}};class Mi{static get(e){const t=document.cookie.split("; ").find((t=>t.startsWith(e+"=")));return(null==t?void 0:t.split("=")[1])||""}static expire(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}}class Gi{static init(){Gi.actualReferrer=Mi.get("_vwo_referrer"),Mi.expire("_vwo_referrer"),"string"!=typeof Gi.actualReferrer&&(Gi.actualReferrer=document.referrer)}static get(){return-1===window.location.search.search("_vwo_test_ref")?document.referrer||"":Gi.actualReferrer}}Gi.actualReferrer="";class Fi{static get(){const{queryParams:e}=Vt.parseUrl(document.URL);let t,i;const n=Gi.get();if(/facebook\.com|quora\.com|reddit\.com|imgur\.com|tapiture\.com|disqus\.com|9gag\.com|tumblr\.com|plus\.google|stumbleupon\.com|twitter\.com|linkedin|del\.icio\.us|delicious\.com|technorati|digg\.com| hootsuite|stumbleupon|myspace|bit\.ly|tr\.im|tinyurl|ow\.ly|reddit|m\.facebook\.com|youtube|flickr|pinterest\.com|^https:\/\/t\.co\/|tweetdeck/.test(n))return"soc";Fi.organicReferralSource()&&(t=!0);const{gclid:o,utm_medium:s}=e;if(n&&(i=!0),t&&o)return"pst";if(s){if("email"===(null==s?void 0:s.toString().toLowerCase()))return"eml";if(null==s?void 0:s.toString().match(new RegExp("^(?:cpc|ppc|cpa|cpm|cpv|cpp)$","i")))return"pst"}else if(t)return"org";return i?"ref":"dir"}static organicReferralSource(){for(let e=0;e<Fi.organicReferrals.length;e++)if(-1!==Gi.get().indexOf(Fi.organicReferrals[e].s))return Fi.organicReferrals[e].i;return 0}}Fi.organicReferrals=[{s:"search.yahoo.com/",p:"p",i:1},{s:"www.google.",p:"q",i:2},{s:"www.bing.com/",p:"q",i:3},{s:".ask.com/",p:"q",i:4},{s:"www.search.com/",p:"q",i:5},{s:"www.baidu.com/",p:"wd",i:6},{s:"search.aol.com/",p:"q",i:7},{s:"duckduckgo.com/",p:"q",i:8}];const ji={get url(){return window._vis_opt_url||window.location.href},get refUrl(){return Gi.get()},get trafficSource(){return Fi.get()},get queryParams(){return Vt.parseUrl(window._vis_opt_url||window.location.href).queryParams},get timeSpent(){const e=Date.now();return Math.floor((Date.now()-e)/1e3)},get scroll(){var e,t;const{scrollY:i,innerHeight:n}=window,o=100*i/((null===(e=document.body)||void 0===e?void 0:e.offsetHeight)-n);return{pxTop:i,pxBottom:(null===(t=document.body)||void 0===t?void 0:t.offsetHeight)-n-i,top:o,bottom:100-o}},get operatingSystem(){var e;const{visitorDetails:t}=ji;if(null===(e=null==t?void 0:t.UA)||void 0===e?void 0:e.os)return t.UA.os;const{appVersion:i}=window.navigator;return i.includes("Win")?"windows":i.includes("Mac")?"macOS":i.includes("X11")?"unix":i.includes("Linux")?"linux":""},get browser(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.UA)||void 0===t?void 0:t.br},get visitorDetails(){var e,t,i,n;return(null===(n=null===(i=null===(t=null===(e=window.VWO)||void 0===e?void 0:e._)||void 0===t?void 0:t.allSettings)||void 0===i?void 0:i.dataStore)||void 0===n?void 0:n.plugins)||{}},get userAgent(){return navigator.userAgent},get deviceType(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.UA)||void 0===t?void 0:t.dt},get deviceName(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.UA)||void 0===t?void 0:t.de},get day(){return(new Date).getDay().toString()},get hour(){return(new Date).getHours()},get visitorType(){var e,t;const i=null===(t=null===(e=window.VWO)||void 0===e?void 0:e.data)||void 0===t?void 0:t.vi;return(null==i?void 0:i.vt)||"new"},get oldVisitorType(){var e,t;const i=null===(t=null===(e=window.VWO)||void 0===e?void 0:e.data)||void 0===t?void 0:t.vi;return(null==i?void 0:i.vt)||"new"},get ip(){var e;return null===(e=ji.visitorDetails)||void 0===e?void 0:e.IP},get country(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.cn},get countryCode(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.cc},get city(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.c},get region(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.r},get gpc(){var e,t;return null===(t=null===(e=ji.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.p},get loc(){var e,t,i;const{visitorDetails:n}=ji;return{countryCode:null===(e=null==n?void 0:n.GEO)||void 0===e?void 0:e.cc,city:null===(t=null==n?void 0:n.GEO)||void 0===t?void 0:t.c,region:null===(i=null==n?void 0:n.GEO)||void 0===i?void 0:i.r}}};var Hi;!function(e){e.LOCAL_STORAGE="localStorage",e.LOCAL_STORAGE_SERVICE="localStorageService"}(Hi||(Hi={}));var $i=new class extends class{}{constructor(){super(),this.storageName=Hi.LOCAL_STORAGE}get(){return window.localStorage}getItem(e){return window.localStorage.getItem(e)}set(e){Object.keys(e).forEach((t=>{window.localStorage.setItem(t,e[t])}))}setItem(e,t){window.localStorage.setItem(e,t)}deleteAll(){window.localStorage.clear()}deleteItem(e){window.localStorage.removeItem(e)}includes(){return 0}},Bi=Object.freeze({__proto__:null,localStorage:$i});class Ji extends _i{constructor(){super(),this.pluginName=Xt.STORAGE,this.storages={},this.initialize()}add(e,t){bt.debug(`Adding storage plugin '${t.storageName}' in StoragesManager`),this.storages[e]?bt.error(Ti.STORAGES.ALREADY_EXISTS,{storageName:e}):this.storages[e]=t}update(e,t){bt.debug(`Updating storage plugin '${e}' in StoragesManager`),this.storages[e]=t}get(e){return bt.debug(`Getting storage plugin '${e}' in StoragesManager`),this.storages[e]?this.storages[e]:(bt.error(Ti.STORAGES.NOT_REGISTERED,{storageName:e}),null)}remove(e){bt.debug(`Removing storage plugin '${e}' in StoragesManager`),this.storages[e]?delete this.storages[e]:bt.warn(Ci.STORAGES.NO_STORAGE_TO_REMOVE,{storageName:e})}removeAll(){bt.debug("Removing all storage plugins in StoragesManager"),this.storages={}}initialize(){Object.keys(Bi).forEach((e=>{this.add(e,Bi[e])}))}}var Ki,zi,Yi=new class extends _i{constructor(){super(),this.pluginName=Xt.OPERATOR,this.operators={}}add(e,t){bt.debug(`Adding operator '${e}' in OperatorsManager`),this.operators[e]?bt.error(Ti.OPERATORS.ALREADY_EXISTS,{operatorName:e}):this.operators[e]=t}update(e,t){bt.debug(`Updating operator '${e}' in OperatorsManager`),this.operators[e]=t}get(e){return bt.debug(`Getting operator '${e}' in OperatorsManager`),this.operators[e]?this.operators[e]:(bt.error(Ti.OPERATORS.NOT_REGISTERED,{operatorName:e}),null)}remove(e){bt.debug(`Removing operator '${e}' in OperatorsManager`),this.operators[e]?delete this.operators[e]:bt.warn(Ci.OPERATORS.NO_OPERATOR_TO_REMOVE,{operatorName:e})}removeAll(){bt.debug("Removing all operators in OperatorsManager"),this.operators={}}initialize(e){Object.assign(this.operators,e)}};!function(e){e.EQUAL="eq",e.NOT_EQUAL="neq",e.EQUAL_CASE_SENSITIVE="eqs",e.NOT_EQUAL_CASE_SENSITIVE="neqs",e.REGEX="reg",e.REGEX_CASE_SENSITIVE="regs",e.CONTAINS="cn",e.NOT_CONTAINS="ncn",e.BLANK="bl",e.NOT_BLANK="nbl",e.GREATER_THAN="gt",e.LESS_THAN="lt",e.GREATER_THAN_EQUAL="gte",e.LESS_THAN_EQUAL="lte",e.IN="in",e.NOT_IN="nin",e.EXEC="exec",e.SELECTOR="sel",e.IN_LOCATION="inloc",e.NOT_IN_LOCATION="ninloc",e.URL_REGEX="urlReg",e.NOT_URL_REGEX="nUrlReg",e.RANGE_COMPARISON="rg",e.PAGE_CONFIG_EVALUATION="pgc"}(Ki||(Ki={})),function(e){e.PAGE="PAGE",e.EVENT="EVENT",e.JS_VARIABLE="JS_VARIABLE"}(zi||(zi={}));class Xi extends _i{constructor(e,{globals:t={}}={}){super(),this.pluginName=Xt.EVENT,this.vwoEventsInstance=e,this.config={domEventsDebounceTime:t.domEventsDebounceTime},this.events={},this.initialize()}add(...e){var t,i;let n,o,s,r;Pt(e[0])?([{eventName:n}]=e,o=e[0].on.bind(e[0]),s=null===(t=e[0].off)||void 0===t?void 0:t.bind(e[0]),r=null===(i=e[0].eventConditionsUpdate)||void 0===i?void 0:i.bind(e[0])):[n,o,s,r]=e,bt.debug(`Adding event listener '${n}' in EventsManager`),this.events[n]?bt.error(Ti.EVENTS.ALREADY_EXISTS,{eventName:n}):(this.events[n]={on:o,off:s,eventConditionsUpdate:r},o((e=>this.triggerCustomEvent(n,e)),{vwoEvents:this.vwoEventsInstance}))}updateCustomEvents(...e){var t;let i,n,o;Pt(e[0])?([{eventName:i}]=e,n=e[0].on.bind(e[0]),o=null===(t=e[0].off)||void 0===t?void 0:t.bind(e[0])):[i,n,o]=e,bt.debug(`Updating event listener '${i}' in EventsManager`),this.events[i]={on:n,off:o},n((e=>this.triggerCustomEvent(i,e)),{vwoEvents:this.vwoEventsInstance})}update(e){Object.keys(e).forEach((t=>{this.updateCustomEvents(t,e[t].fn)}))}get(e){return bt.debug(`Getting event listener '${e}' definition from EventsManager`),this.events[e]?this.events[e]:(bt.error(Ti.EVENTS.NOT_REGISTERED,{eventName:e}),null)}remove(e){var t,i;bt.debug(`Removing event listener '${e}' from EventsManager`),this.events[e]?(null===(i=(t=this.events[e]).off)||void 0===i||i.call(t),delete this.events[e],wi.remove(e)):bt.warn(Ci.EVENTS.NO_EVENT_TO_REMOVE,{eventName:e})}removeAll(){bt.debug("Removing all event listeners from EventsManager"),Object.keys(this.events).forEach((e=>{var t,i;null===(i=(t=this.events[e]).off)||void 0===i||i.call(t)})),wi.removeAll(),this.events={}}addDomEvent(e,t){var i,n,o,s;if(null===(s=null===(o=null===(n=null===(i=window.VWO)||void 0===i?void 0:i.modules)||void 0===n?void 0:n.utils)||void 0===o?void 0:o.libUtils)||void 0===s?void 0:s.isBot2())return;const{preDefinedEvents:r}=this.vwoEventsInstance;!this.events[e]&&e.toLowerCase().includes(Ot.DOM+"_")&&(e===Ot.DOM+"_click"?this.add(new r.ClickDomEvent(t)):e===Ot.DOM+"_submit"?this.add(new r.SubmitDomEvent(t)):this.add(new r.GenericDomEvent(e,t,this.config.domEventsDebounceTime)))}updateConditions(e,t){if(this.events[e]){if(null!==t[0]){const{eventConditionsUpdate:i}=this.events[e];i&&Array.isArray(t)&&i(t)}}else this.addDomEvent(e,t)}triggerCustomEvent(e,t){wi.trigger(e,t)}initialize(){const{preDefinedEvents:e}=this.vwoEventsInstance;Object.keys(e).forEach((t=>{t.endsWith("DomEvent")||this.add(new e[t])}))}}const qi={[Ki.EQUAL]:(e,t)=>String(e).toLowerCase()===String(t).toLowerCase(),[Ki.NOT_EQUAL]:(e,t)=>!qi[Ki.EQUAL](e,t),[Ki.EQUAL_CASE_SENSITIVE]:(e,t)=>String(e)===String(t),[Ki.NOT_EQUAL_CASE_SENSITIVE]:(e,t)=>!qi[Ki.EQUAL_CASE_SENSITIVE](e,t),[Ki.REGEX](e,t){try{return new RegExp(t,"i").test(String(e))}catch(e){return!1}},[Ki.URL_REGEX](e,t,i){const n=null==i?void 0:i.jsLibUtils;return n?n.verifyUrl(e,t,null,null==i?void 0:i.pageUrl):qi[Ki.REGEX](e,t)},[Ki.NOT_URL_REGEX]:(e,t,i)=>!qi[Ki.URL_REGEX](e,t,i),[Ki.REGEX_CASE_SENSITIVE](e,t){try{return new RegExp(t).test(String(e))}catch(e){return!1}},[Ki.CONTAINS]:(e,t)=>String(e).toLowerCase().includes(String(t).toLowerCase()),[Ki.NOT_CONTAINS]:(e,t)=>!qi[Ki.CONTAINS](e,t),[Ki.BLANK]:e=>!e,[Ki.NOT_BLANK]:e=>!qi[Ki.BLANK](e),[Ki.GREATER_THAN](e,t){if(!Ut(e)||!Ut(t))return!1;const i=+e,n=+t;return Wt(i)&&Wt(n)&&i>n},[Ki.GREATER_THAN_EQUAL](e,t){if(!Ut(e)||!Ut(t))return!1;const i=+e,n=+t;return Wt(i)&&Wt(n)&&i>=n},[Ki.LESS_THAN](e,t){if(!Ut(e)||!Ut(t))return!1;const i=+e,n=+t;return Wt(i)&&Wt(n)&&i<n},[Ki.LESS_THAN_EQUAL](e,t){if(!Ut(e)||!Ut(t))return!1;const i=+e,n=+t;return Wt(i)&&Wt(n)&&i<=n},[Ki.NOT_IN_LOCATION](e,t){let i=!1;if(!t||0===t.length)return!1;for(let n=0;n<t.length;n++){const o=t[n];if(o===e.countryCode||o===`${e.countryCode}-${e.region}`||o===`${e.countryCode}-${e.region}-${e.city}`){i=!1;break}i=!0}return i},[Ki.IN_LOCATION](e,t){let i=!1;if(!t||0===t.length)return!1;for(let n=0;n<t.length;n++){const o=t[n];if(o===e.countryCode||o===`${e.countryCode}-${e.region}`||o===`${e.countryCode}-${e.region}-${e.city}`){i=!0;break}}return i},[Ki.IN]:(e,t)=>t.map((e=>String(e).toLowerCase())).includes(String(e).toLowerCase()),[Ki.NOT_IN]:(e,t)=>!qi[Ki.IN](e,t),[Ki.RANGE_COMPARISON](e,t){try{let i=JSON.parse;try{i=window.VWO._.native.JSON.parse||JSON.parse}catch(e){}const n=i(e),o=t.split("'")[1].split("-"),s=o[0],r=o[1];return qi[Ki.GREATER_THAN_EQUAL](n[0],parseInt(s,10))&&qi[Ki.LESS_THAN_EQUAL](n[0],parseInt(r,10))}catch(e){return bt.info("RANGE OPERATOR ERROR: "+(e&&e.stack)),!1}},[Ki.PAGE_CONFIG_EVALUATION]:(e,t)=>oi.validatePage(t,!1,e).didMatch};var Qi=Object.assign(qi,{sel:()=>!1,[Ki.EXEC](e,t,i={triggerName:""}){if(!e)return!1;let n;n=t&&"object"==typeof t?t.triggerName:i.triggerName;for(let i=0;i<e.length;i++){const o=e[i];if(!o)break;window.VWO._.pageNo=window.VWO._.pageNo||0;const{pageNo:s}=window.VWO._,r=()=>{s===window.VWO._.pageNo&&wi.trigger(Pi.getTriggerEventName(n))};try{o(r,window.vwo_$,"string"==typeof t?{sel:t,triggerName:n}:void 0)}catch(e){bt.warn("Issue with custom trigger "+(null==o?void 0:o.toString()))}}return!1}});Yi.initialize(Qi);const Zi={};class en extends _i{constructor(){super(),this.pluginName=Xt.EVENT_PROPS,this.eventsProps={},this.initialize()}add(e,t,i){bt.debug(`Adding computed prop '${t}' of event '${e}'.`),this.eventsProps[e]=this.eventsProps[e]||{},this.eventsProps[e][t]?bt.error(Ti.EVENT_PROP.ALREADY_EXISTS,{propName:t,eventName:e}):this.eventsProps[e][t]=i}update(e,t,i){bt.debug(`Updating computed prop '${t}' of event '${e}'.`),this.eventsProps[e]=this.eventsProps[e]||{},this.eventsProps[e][t]=i}get(e,t){var i;return bt.debug(`Getting '${t||"all"}' computed prop of event '${e}'.`),t?(null===(i=this.eventsProps[e])||void 0===i?void 0:i[t])?this.eventsProps[e][t]:(bt.error(Ti.EVENT_PROP.NOT_REGISTERED,{eventName:e,propName:t}),null):this.eventsProps[e]||{}}remove(e,t){var i;bt.debug(`Removing '${t||"all"}' computed prop of event '${e}'.`),t?(null===(i=this.eventsProps[e])||void 0===i?void 0:i[t])?delete this.eventsProps[e][t]:bt.warn(Ci.EVENT_PROP.NO_EVENT_PROP_TO_REMOVE,{eventName:e,propName:t}):this.eventsProps[e]={}}removeAll(){bt.debug("Removing all computed props of all events"),this.eventsProps={}}initialize(){Object.keys(Zi).forEach((e=>{Object.keys(Zi[e]).forEach((t=>{this.add(e,t,Zi[e][t])}))}))}}var tn=Object.freeze({__proto__:null,A:class extends Ai{async fn(e,...t){const i=await Promise.all(t.map((t=>t(e))));let n=0;for(let e=i.length-1;e>=0;--e){const t=i[e];if(!t[0])return[!1,0];n=t[1]>n?t[1]:n}return[!0,n]}toJSON(){return"a"}},O:class extends Ai{async fn(e,...t){const i=await Promise.all(t.map((t=>t(e))));let n=1/0,o=!1;for(let e=i.length-1;e>=0;--e){const t=i[e];t[0]&&(o=!0,n=t[1]<n?t[1]:n)}return[o,o?n:0]}toJSON(){return"o"}},TS:class extends Ai{constructor({data:e},{trigger:t,triggerName:i}){super(),[this.op]=e;const n=e[1];this.threshold="INF"===n?1/0:1e3*n,this.validateFromStateAndDispatchTriggerEvent=()=>Pi.validateAndDispatchTriggerEvent(i,t,{},"",null,null,!0),this.isTimeoutCompleted=!1}lt(e,t){if(e[0]&&t[0]){this.previousLHS=e[1];const i=t[1]-e[1];if(i>=0&&i<=this.threshold)return[!0,t[1]]}return[!1,0]}gtn(e,t){if(!e[0])return[!1,0];if(this.isTimeoutCompleted)return[!0,e[1]+this.threshold];if(this.threshold===1/0)return[!1,0];if(t[1]>e[1])return this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.lt(e,t)[0]?[!1,0]:[!0,e[1]+this.threshold];if(!this.timeout||this.previousLHS!==e[1]){this.previousLHS=e[1],this.isTimeoutCompleted=!1;const t=e[1]+this.threshold-Date.now();this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.isTimeoutCompleted=!0,this.validateFromStateAndDispatchTriggerEvent()}),t>0?t:0)}return[!1,0]}async fn(e,t,i){const n=await t({doNotUseCache:e.doNotUseCache||!this._persistedState}),o=i?await i({doNotUseCache:e.doNotUseCache||!this._persistedState}):[!1,0];if(n[0]&&!n[1])return[!0,0];if(!e.doNotUseCache&&this._persistedState)return this._persistedState;const s=this[this.op](n,o);return s[0]&&(this._persistedState=s),s}get persistedData(){var e;return null!==(e=JSON.stringify(this._persistedState))&&void 0!==e?e:""}toJSON(){return{op:"ts",data:[this.op,this.threshold/1e3]}}clearData(){clearTimeout(this.timeout),this.timeout=void 0,this.isTimeoutCompleted=!1,this._persistedState=null}}});class nn extends _i{constructor(){super(),this.pluginName=Xt.CONDITION_LEVEL_OPERATOR,this.operators={},this.initialize()}add(e,t){bt.debug(`Adding Condition Level operator '${e}' in CLOperatorsManager`),this.operators[e]?bt.error(Ti.OPERATORS.ALREADY_EXISTS,{operatorName:e}):this.operators[e]={definition:t,instances:[]}}update(e,t){bt.debug(`Updating operator '${e}' in CLOperatorsManager`),this.operators[e].definition=t}get(e,t,{trigger:i,triggerName:n}){bt.debug(`Getting operator '${e}' in CLOperatorsManager`);const o=this.operators[e.toUpperCase()];if(!o)return bt.error(Ti.OPERATORS.NOT_REGISTERED,{operatorName:e}),null;const s=new o.definition(t,{trigger:i,triggerName:n});return o.instances.push(s),s}remove(e){bt.debug(`Removing operator '${e}' in CLOperatorsManager`),this.operators[e]?delete this.operators[e]:bt.warn(Ci.OPERATORS.NO_OPERATOR_TO_REMOVE,{operatorName:e})}removeAll(){bt.debug("Removing all operators in CLOperatorsManager"),this.operators={}}initialize(){Object.keys(tn).forEach((e=>{this.add(e,tn[e])}))}clearData(){Object.keys(this.operators).forEach((e=>{this.operators[e].instances.forEach((e=>{e.clearData()}))}))}}var on,sn,rn=new class{execute(e,t){this.initializeStore(t.dataStore,t.storages,t.props),this.initializeOperators(t.operators),this.initializeFormulas(),this.initializeTags(t.tags),this.initializeEventsProps(t.eventsProps),this.initializeEvents(e,t.events,t.globals),this.initializeTriggers(t.triggers),this.initializePages(t.pages,t.pagesEval),this.initializeRules(e,t.rules)}clear(){qt.unregisterAll(),Pi.removeAll(),ki.removeAll(),wi.removeAll(),di.clearAll()}initializeOperators(e){bt.debug("Initializing Operators");const t=qt.plugins[Xt.OPERATOR]||Yi;Object.keys(e).forEach((i=>{t.update(i,e[i])})),qt.register(t)}initializeFormulas(){bt.debug("Initializing Formulas"),qt.register(qt.plugins[Xt.FORMULA]||new Ii)}initializeStore(e,t,i){bt.debug("Initializing Store");const n=qt.plugins[Xt.STORAGE]||new Ji;Object.keys(t).forEach((e=>{n.update(e,t[e]),li.setStoragePlugin(n.get(e))})),di.addValues(e,Ht.SETTINGS),di.set("storages",n,Ht.ROOT),class{static initialize(e){di.addValues(e,Ht.ROOT),di.addValues(ji,Ht.ROOT)}}.initialize(i),qt.register(n)}initializeEventsProps(e){bt.debug("Initializing Events computed props");const t=qt.plugins[Xt.EVENT_PROPS]||new en;Object.keys(e).forEach((i=>{Object.keys(e[i]).forEach((n=>{t.update(i,n,e[i][n])}))})),qt.register(t)}initializeEvents(e,t,i){bt.debug("Initializing Events");const n=qt.plugins[Xt.EVENT]||new Xi(e,{globals:i});n.update(t),qt.register(n)}initializeTriggers(e){bt.debug("Initializing Triggers"),Pi.initialize(e)}initializePages(e,t){bt.debug("Initializing Pages"),oi.add(e,t)}initializeTags(e){bt.debug("Initializing Tags");const t=qt.plugins[Xt.TAG]||new Li;Object.keys(e).forEach((i=>{const n=e[i];t.update(i,n.fn,{occurrence:n.occurrence,scope:n.scope,sync:n.sync,fireUniquelyForEveryEvent:n.fireUniquelyForEveryEvent})})),qt.register(t)}initializeRules(e,t){bt.debug("Initializing Rules",t),ki.initialize(e,t)}initializeCLOperators(){bt.debug("Initializing CL_Operators");const e=qt.plugins[Xt.CONDITION_LEVEL_OPERATOR]||new nn;qt.register(e)}};!function(e){e.OR="OR"}(on||(on={})),function(e){e.ALL="*"}(sn||(sn={}));class an{static or(...e){return e._validationType=on.OR,e}static validateJSON(e,t,i="settings"){try{if(e){const n=e._validationType===on.OR&&xt(e)?e:[e],o=e._validationType===on.OR&&xt(e)?e.find((e=>jt(e)===jt(t))):e;if(!an.isSchemaMatching(n,t))return an.logger.info(`Settings schema validation failed for '${i}'.`,{expectedSchema:an.getStringifiedSchemaValues(e),actualValue:t}),an.getNewInitializedValue(e);if(Pt(o))Object.keys(t).forEach((e=>{t[e]=an.validateJSON(o[e]||o[sn.ALL],t[e],`${i}.${e}`)}));else if(xt(o))return t.map(((e,t)=>an.validateJSON(o[0]===an.RECURSION?n:o[0],e,`${i}.${t}`)))}return t}catch(e){return an.logger.error("Got exception while validating settings schema",{err:e}),t}}static isSchemaMatching(e,t){return e.some((e=>jt(t)===jt(e)||jt(t)===(null==e?void 0:e.name)))}static getNewInitializedValue(e){if(Gt(e))return new e;let t=e;return e._validationType===on.OR&&xt(e)&&(t=e.find((e=>an.isArraySchema(e)||an.isObjectSchema(e)))||e[0]),an.isObjectSchema(t)?{}:an.isArraySchema(t)?[]:void 0}static isArraySchema(e){return"Array"===e.name||xt(e)}static isObjectSchema(e){return"Object"===e.name||Pt(e)}static getStringifiedSchemaValues(e){return Gt(e)?e.name:xt(e)?e.map((e=>an.getStringifiedSchemaValues(e))):Pt(e)?Object.keys(e).reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:an.getStringifiedSchemaValues(e[i])})),{}):e}}an.logger=new At("warn"),an.RECURSION="r";class dn{constructor(e,...t){var i;this.vwoEventsInstance=e,this.currentSettings={},this.baseSettings={globals:{},dataStore:{},props:{},operators:{},eventsProps:{},events:{},triggers:{},pages:{ec:[],pc:[]},pagesEval:{ec:[],pc:[]},tags:{},rules:{},storages:{},jsLibUtils:{}},this.replace(...t),Zt.set("jsLibUtils",null===(i=this.currentSettings)||void 0===i?void 0:i.jsLibUtils)}add(...e){rn.initializeCLOperators();const t=this.preProcessSettings(e);return this.currentSettings.pagesEval={},this.currentSettings=Kt.mergeNestedObjects(this.currentSettings,...t),this.initialize(),this.currentSettings}replace(...e){return this.resetSettings(),this.add(...e)}remove(){this.resetSettings(),rn.clear()}initialize(){rn.execute(this.vwoEventsInstance,this.currentSettings)}resetSettings(){this.currentSettings=Object.assign({},this.baseSettings)}preProcessSettings(e){let t=this.preProcessRules(e);for(let e=this.preProcessSettings.length-1;e>=0;--e){const i=t[e];if(i.triggers){const e={};Object.keys(i.triggers).forEach((t=>{e[t]=this.preProcessTriggers(t,i.triggers[t])})),i.triggers=e}}return t=this.preProcessCampaigns(t),this.getValidatedSettings(t)}getValidatedSettings(e){const t={id:an.or(String,Number),type:String,filters:[an.or(String,Array)],args:Array,fn:Function},i=[{dataStore:Object,props:Object,operators:{"*":Function},eventsProps:{"*":{"*":Function}},events:{"*":{fn:Function}},triggers:{"*":{cnds:[an.or(String,Boolean,null,Array,[an.RECURSION],{id:an.or(String,Number),event:String,filters:[an.or(String,Array)],formula:[t],op:String,data:[an.or(String,Number)]})],formula:[t]}},tags:{"*":{fn:an.or(Function,Object.getPrototypeOf((async function(){})).constructor),occurrence:Number,scope:String}},rules:{"*":{triggers:an.or(String,[String]),tags:[{id:String,priority:Number,exitCondition:[an.or(String,Array)],shouldConsiderParentExitCondition:Boolean}],exitCondition:[an.or(String,Array)],shouldConsiderParentExitCondition:Boolean}},storages:{"*":Object}}];return an.validateJSON(i,e)}preProcessRules(e){const t={},i=this;return Object.keys(this.currentSettings.rules).forEach((e=>{const n=this.currentSettings.rules[e],o=[];n.tags.forEach((e=>{o.push(JSON.stringify(i.sortTag(e)))})),t[n.triggers[0]]=o})),e.map((e=>{let{rules:n}=e;if(n=n||[],xt(n)){const e={};n.forEach((n=>{let o=!1;const s=[],r=ki.generateRandomRuleId(),a={triggers:n.triggers,tags:[]};n.tags.forEach((e=>{const r=n.triggers[0],a=JSON.stringify(i.sortTag(e));t[r]=t[r]||[],t[r].includes(a)||(o=!0,t[r].push(a),s.push(e))})),o&&(a.tags=s,e[r]=a)})),n=e}return Object.assign(Object.assign({},e),{rules:n})}))}sortTag(e){return Object.keys(e).sort().reduce(((t,i)=>(t[i]=e[i],t)),{})}preProcessCampaigns(e){return e.map((e=>{if(Pt(e.triggers)&&Ut(e.triggers)&&Pt(e.dataStore)&&Ut(e.dataStore)){const{triggers:t}=e,{campaigns:i}=e.dataStore;Object.keys(i).forEach((e=>{const n=i[e].triggers[0];Pt(t[n])&&Ut(t[n])&&(t[n].occurrence=1)}))}return e}))}preProcessTriggers(e,t){var i;if(t&&t.cnds&&t.cnds.length>=0){const n=(i,o,s)=>{if(xt(i))i.forEach(n);else if(i){if(kt(i)||Ut(i.op)){const n=kt(i)?i:i.op;s[o]=qt.plugins[Xt.CONDITION_LEVEL_OPERATOR].get(n,i,{trigger:t,triggerName:e})}Ut(i.persistState)||"vwo_postInit"===i.event&&(i.persistState=!0)}};null===(i=t.cnds)||void 0===i||i.forEach(n)}return t}}class ln{static getTriggersConditionInfo(e,t){const i=t=>xt(t)?t.map(i):bi(t)?Object.assign(Object.assign({},t),{hasEventFired:Ri.hasEventOccurred(e,t.event),arePartialConditionsMet:Ri.hasConditionMetBefore(e,t.id)}):Vi(t)?`${JSON.stringify(t)} -> ${t.persistedState}`:"string"==typeof t?t:JSON.stringify(t);return t.map(i)}static tag(e,t){var i;const n=Ui.generateTagId(t),o=si.tags[n],s=null===(i=qt.plugins[Xt.TAG])||void 0===i?void 0:i.get(t),r=Object.values(e.currentSettings.rules).filter((e=>e.tags.some((e=>e.id===t)))).reduce(((e,t)=>{const i=xt(t.triggers)?t.triggers:[t.triggers];return e.push(...i),e}),[]).reduce(((t,i)=>{const n=si.triggers[i];return Object.assign(Object.assign({},t),{[i]:{areConditionsMet:n.state,cndsState:this.getTriggersConditionInfo(i,e.currentSettings.triggers[i].cnds)}})}),{});return{hasExecuted:o.hasExecuted||!1,executionCount:o.executionCount||0,fn:s.fn,occurrence:s.occurrence||null,scope:s.scope||null,stoppedByExitCondition:o.stoppedByExitCondition,lastExitConditions:o.lastExitConditions,dependentTriggers:r}}static trigger(e,t){return{areConditionsMet:si.triggers[t].state,cndsState:this.getTriggersConditionInfo(t,e.currentSettings.triggers[t].cnds)}}static page(e,t,i){const n=oi.validatePage(e,t,i,!0);let o=t?"pageConfig":"experimentConfig";if(n){switch(n.reason){case ti.EXCLUDE_PASSED:o="Url matches the excludes of "+o;break;case ti.INCLUDE_FAILED:o="Url does not match the includes of "+o;break;case ti.INCLUDE_PASSED:o="Url matches the includes of "+o}return delete n.reason,Object.assign(Object.assign({},n),{brief:o})}}}const cn=function(){};class un{constructor(e,t){this.toJSON=()=>{const e=Object.assign({},this);return delete e.preDefinedEvents,e},this.store={state:Yt,getters:si,actions:di},this.eventBus=wi,this.preDefinedEvents=null==t?void 0:t.preDefinedEvents,this.debug={tag:e=>ln.tag(this.settings,e),trigger:e=>ln.trigger(this.settings,e),page:(e,t,i)=>ln.page(e,t,i)},this.rules=ki,this.triggers=Pi,this.pageGroup=oi,Object.assign(this,this.getEventMethods()),Gi.init(),this.activate(e)}get version(){return"1.1.22"}add(...e){this.settings.add(...e),wi.trigger(St.POST_INIT)}replace(...e){this.settings.replace(...e),wi.trigger(St.POST_INIT)}on(e,t,{before:i,after:n}={}){if(kt(e))return wi.on(e,t,{before:i,after:n});const o=Date.now()*Math.floor(1e3*Math.random());this.tags.add(o,t),this.rules.add({triggers:[o.toString()],tags:[{id:o.toString()}]},this.rules.generateRandomRuleId());const s=this.settings.preProcessTriggers(o.toString(),e);return Pi.add(o.toString(),s),o}async validateTrigger(e,t={},i,n){return bt.info("Validating Trigger conditions through API",{trigger:e,event:t}),(await Ri.validateTrigger(e,t,i,n)).isValid}validateTriggerFromHistory(e,t){return Pi.validateTriggerFromHistory(e,t)}validateAndDispatchTriggerEvent(e,t,i,n,o,s,r=!1){return Pi.validateAndDispatchTriggerEvent(e,t,vi(i),n,o,s,r)}destroy(){this.settings.remove()}async isValid(e,t,i){await Ri.isValid(e,t,vi({isCustomEvent:!0,fromLocalStorage:!0}),i)}activate(e){bt.info("Activating Phoenix!"),this.settings=new dn(this,...e),this.initializeValues(),wi.trigger(St.POST_INIT)}getEventMethods(){return{on:this.on,off:wi.off.bind(wi),removeEvent:wi.remove.bind(wi),async trigger(e,t={},i){try{Object.defineProperty(t,Ct.EXIT_CONDITIONS,{value:this[Ct.EXIT_CONDITIONS],enumerable:!1,writable:!0});try{if(await wi.trigger(e,t),e&&Ui.getVwoInstanceObject()&&Ui.getVwoInstanceObject()[e]){const t=Ui.getVwoInstanceObject()[e];Ui.flushTagData(e),await Ui.executeTagUniquelyForEveryEvent(t)}}catch(e){if(126657!=window._vwo_acc_id)throw new Error(e);window.VWO._.customError&&window.VWO._.customError({msg:e.stack||e.message||"Something wrong",url:"Error while triggering(2nd block)",lineno:252,colno:5,source:JSON.stringify({event:t,opt_url:window._vis_opt_url,errMsg:e.message,errStk:e.stack})})}(Gt(i)||Ft(i))&&await i(t)}catch(e){window.VWO._.customError&&window.VWO._.customError({msg:e.stack||e.message||"Something wrong",url:"Trigger.ts",lineno:252,colno:5,source:JSON.stringify({event:t,opt_url:window._vis_opt_url,errMsg:e.message,errStk:e.stack})})}},getEvent:wi.event.bind(wi)}}initializeValues(){this.operators=qt.plugins[Xt.OPERATOR],this.formulas=qt.plugins[Xt.FORMULA],this.events=qt.plugins[Xt.EVENT],this.storages=qt.plugins[Xt.STORAGE],this.tags=qt.plugins[Xt.TAG],this.eventsProps=qt.plugins[Xt.EVENT_PROPS]}deactivate(){this.trigger=cn,this.add=cn}clearData(){qt.clearData()}}un.version="1.1.22";class gn{constructor(){this.storageLookUpKey="_vwo_store_content"}otherSide(...e){return e[0]="VWO.modules.vwoUtils.contentSync."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}}const hn=function(...e){window.fetcher.getValue("VWO._.triggerEvent",e)};let vn;function pn(e){vn=e}function wn(e){window.VWO=null!=e?e:vn}const En=window.VWO._&&window.VWO._.customError||function(){},fn=window.encodeURIComponent,_n=window.decodeURIComponent,mn=function(e){return btoa&&vn._.ac&&vn._.ac.bsECJ?btoa(e):fn(e)},On=function(e){if(atob)try{return atob(e)}catch(e){}return _n(e)},Sn=R.set,yn=R.get,Tn=window.clearTimeout,Cn=window.setTimeout,In=Math.floor,Nn=Math.pow,An="(",Vn=")",bn="_vis_opt_",Rn="_vwo_",Pn="_vis_",xn=864e5,Dn=31536e6,Ln={[bn+"out"]:0,[bn+"exp_*_combi"]:10,[bn+"exp_*_combi_choose"]:11,[bn+"exp_*_goal_*"]:12,[bn+"exp_*_exclude"]:13,[bn+"exp_*_split"]:14,[bn+"test_cookie"]:20,[bn+"s"]:21,[Rn+"ds"]:22,[Rn+"sn"]:23,[Rn+"referrer"]:24,[Rn+"uuid"]:30,[Rn+"uuid_*"]:31,[Rn+"uuid_v2"]:32,[Rn+"app_version_*_*"]:40,[Pn+"preview_*"]:41,[Pn+"editor"]:42,[Pn+"heatmap_*"]:43};let Un;for(const e in Ln)Ln[e]=$n(Ln[e]),Ln["debug"+e]="d"+Ln[e];function Wn(){for(var e=document.cookie.split(/; ?/),t={},i=0;i<e.length;i++){var n=e[i].split("=");try{const e=_n(n[0]);let i;i="_vwo"===e?On(n[1]):_n(n[1]),t[e]=i}catch(e){}}return t}function kn(e){return["_vis_opt_out","_vwo_ssm","_vwo_ss","_vwo_global_opt_out"].indexOf(e)<0&&(e.indexOf("_vis_opt_")>-1||e.indexOf("_vwo_")>-1||e.indexOf("_vis_")>-1)}function Mn(e){let t,i;return()=>(i=i||Cn((()=>{i=t=void 0}),1),t=t||e())}let Gn=Mn(Wn);function Fn(e){return Gn()[_n(e)]}function jn(e,t,i,n=4e12){t="_vwo"===e?mn(t):fn(t);let o=fn(e)+"="+t+"; ";i&&(o+="domain="+i+"; "),"_vwo"===e&&(n=Date.now()+Dn),n&&(o+="expires="+new Date(n).toUTCString()+"; "),o+="path=/",window.VWO._=window.VWO._||{},window.VWO._.ss&&(o+="; secure; samesite=none; Partitioned;"),document.cookie=o,Gn=Mn(Wn)}function Hn(){Gn=Mn(Wn)}function $n(e){"string"==typeof e&&(e=+e),e<0&&(e=0);let t="";for(;e;){const i=e%64;let n=i.toString(36);i>=36&&(n=String.fromCharCode(i+29)),62===i&&(n="_"),63===i&&(n="-"),t=n+t,e=In(e/64)}return t||e+""}function Bn(e){let t=0,i=0;for(;e;){const n=e.slice(-1);let o=26*+/[A-Z]/.test(n)+parseInt(n,36);"_"===n&&(o=62),"-"===n&&(o=63),t+=o*Nn(64,i++),e=e.slice(0,-1)}return t}function Jn(e,t){return!e||"number"!=typeof e[2]||Date.now()>t+e[2]*xn}class Kn{constructor(e,t,i="cookie",n=!0,o,s,r){var a,d,l,c;this.threadInstanceSync=!1,this.defaultDelim1=(null===(d=null===(a=window._vwoCc)||void 0===a?void 0:a.cJ)||void 0===d?void 0:d.pd)||"~",this.delim1=(null===(c=null===(l=window._vwoCc)||void 0===l?void 0:l.cJ)||void 0===c?void 0:c.cd)||this.defaultDelim1,this.backwardCompatible=n,this.cookieSyncUrl=o,this.jarName=e,this.cookieStorageStrategy=i,this.domain=t,this.syncingOff=s,this.strategyConfig=r,this.syncingOff?this.cookies=this.syncFromTPCValue():this.cookies=this.syncFromCookies(),this.strategyConfig&&(this.strategyConfig.callback=this.strategyConfig.callback||function(){},this.strategyConfig.cookieJarValue=this.strategyConfig.cookieJarValue||""),Un=Bn(this.getInJar("ts")||"0")||Date.now(),this.setInJar("ts",$n(Un),2e3),this.backwardCompatible&&this.getAll(!1,!0),this.backwardCompatible||this.syncingOff||"custom"===i||this.syncCookiesToJar(),this.threadInstanceSync=!0}syncCookiesToJar(){const e=document.cookie.split(/; ?/),t=this.getAll();for(var i=0;i<e.length;i++){const n=e[i].split("="),o=t[n[0]];kn(n[0])&&!o&&(this.setInJar(_n(n[0]),_n(n[1]),100),window.VWO._.cookies.create(n[0],n[1],void 0,void 0,-1,!0))}}getInJar(e,t=!1){if(e=this.mapKey(e),!this.cookies)return;const i=this.cookies[e];return Jn(i,Un)?(delete this.cookies[e],void(this.syncingOff||this.syncToCookies())):t?i.slice(1):i[1]}expired(e){e=this.mapKey(e);const t=this.cookies[e];if(t)return Jn(t,Un)}setInJar(e,t,i){return e=this.mapKey(e),this.cookies[e]=[e,t,i+(Date.now()-Un)/xn],this.threadInstanceSync&&this.otherSide("updateJarMemory",[e,this.cookies[e]]),this.syncingOff||this.syncToCookies(),this.getInJar(e)}syncToCookies(){let e="";for(const t in this.cookies){const i=this.cookies[t];e+=(e?Vn:"")+this.encodeCookie(...i)}if("custom"===this.cookieStorageStrategy)return Hn(),e=mn(e),void this.strategyConfig.callback(e);"ls"!==this.cookieStorageStrategy&&"both"!==this.cookieStorageStrategy||Sn(this.jarName,e),"cookie"!==this.cookieStorageStrategy&&"both"!==this.cookieStorageStrategy||jn(this.jarName,e,this.domain)}getStoredJarValue(e){let t="";for(const e in this.cookies){const i=this.cookies[e];t+=(t?Vn:"")+this.encodeCookie(...i)}return e?mn(t):t}syncFromTPCValue(){let e=window.VWO.data.tpc?window.VWO.data.tpc._vwo:void 0;const t={};if(!e)return t;e=e.split(Vn);for(let i=0;i<e.length;i++){const n=this.decodeCookie(e[i],this.cookieStorageStrategy);n&&(t[n[0]]=n)}return t}syncFromCookies(){let e="";this.cookies={},"custom"===this.cookieStorageStrategy?e=On(this.strategyConfig.cookieJarValue):"ls"===this.cookieStorageStrategy?e=yn(this.jarName):"cookie"===this.cookieStorageStrategy?e=Fn(this.jarName):"both"===this.cookieStorageStrategy&&(e=Fn(this.jarName)||yn(this.jarName)),e=e||"";const t=e.split(Vn);for(let i=0;e&&i<t.length;i++){const e=this.decodeCookie(t[i],this.cookieStorageStrategy);e&&(this.cookies[e[0]]=e)}return this.cookies}encodeCookie(e,t,i){return`${e}${this.delim1}${t}${An}${$n(In(100*i))}`}decodeCookie(e,t){try{let t;const i=e.indexOf(this.delim1)>-1?this.delim1:this.defaultDelim1;if(e.indexOf(i)>-1)t=e.split(i);else{const i=/ts(.)/.exec(e),n=i&&i[1];n&&(t=e.split(n),this.delim1=n)}const n=t[1].split(An);return[t[0],n[0],Bn(n[1])/100]}catch(i){const n=`Error occurred while decoding the cookie in cookieJar for strategy: ${t}. Cookie Value to be decoded: ${e}. ${i}`;return void En({msg:n,url:"cookie-jar.js",lineno:257,colno:26,source:fn(n)})}}mapKey(e){if(Ln[e])return Ln[e];const t=/([0-9]+)/g,i=e.replace(t,"*");if(Ln[i]){const n=e.match(t)||[];return Ln[i]+"*"+n.map($n).join("*")}return e}unmapKey(e){const t=e.split("*"),i=t[0];let n="";for(const e in Ln)if(Ln[e]===i){n=e;break}for(let e=1;e<t.length;e++)n=n.replace("*",""+Bn(t[e]));return(n||"ts"===e)&&n||e}getAll(e=!1,t=!1){const i={};for(const n in this.cookies){const o=this.unmapKey(n);let s=this.cookies[n][1];"ts"!==n&&(s=this.get(o,t)),!1===this.expired(n)&&(i[o]=e?[s,new Date(this.cookies[n][2]*xn+Un)]:s)}return i}get(e,t=!1){const i=this.expired(e),n=this.getInJar(e,!0);let o,s;n&&([o,s]=n);const r="*"===o;if("custom"!==this.cookieStorageStrategy&&r){const t=Fn(e);return!t&&o&&this.setInJar(e,"",-1),t}if(this.backwardCompatible){const n=Fn(e);return n&&i?void jn(e,"",this.domain,-1):(!t||!o||"ts"===e||n&&n!==o||jn(e,o,this.domain,Un+s*xn),n||!o||t||"ts"===e?(n&&o&&n!==o&&this.setInJar(e,n,s-(Date.now()-Un)/xn),n||o):void this.setInJar(e,"",-1))}return this.getInJar(e)}xmlSuccess(){window.VWO._.cookies.create("_vis_opt_test_cookie",1,void 0,void 0,void 0,!0)}set(e,t,i){if(t+="","number"==typeof i?this.setInJar(e,t,i):this.setInJar(e,"*",2e3),"custom"!==this.cookieStorageStrategy&&(this.backwardCompatible||"number"!=typeof i)){let n;n=null===i?null:Date.now()+i*xn,jn(e,t,this.domain,n)}this.cookieSyncUrl&&(Tn(this.cookieSyncTimeout),this.cookieSyncTimeout=Cn((()=>{this.syncViaXML(this.xmlSuccess)}),1e3))}updateJarMemory(e,t){this.cookies[e]=t}otherSide(...e){e[0]="VWO.modules.vwoUtils.cookies.CookieJar."+e[0],window.fetcher.getValue(...e)}}const zn={primary:(e,t,i=!1,n,o)=>new Proxy(t,{construct(t,s){this.store=this.store||["1"];const r=new t(...s),a=this.store.length;this.store.push(r);let d=s;i&&(d=n(r)),Object.defineProperty(r,"otherSideCreated",{value:!1,enumerable:!1,writable:!0}),r.otherSide=(...e)=>r.otherSideCreated.then((()=>r.otherSide(...e).then((e=>e))));const l={type:"vwoClassInstanceBridge",id:a,args:d,path:e};return r.otherSideCreated=new Promise((t=>{window.fetcher.request(l).send().then((i=>{r.otherSide=(...t)=>{const n=e.dest+"."+i+"."+t[0];return t[0]=n,window.fetcher.getValue(...t)},t(null),o&&o(i)}))})),r},get(e,t){return"symbol"==typeof t||isNaN(+t)?e:this.store[t]}}),secondary:(e,t,i)=>new Proxy(t,{construct(e,t){this.store=this.store||["1"];const n=new e(...t),o=this.store.length;return this.store.push(n),i&&i(n),[o,n]},get(e,t){return"symbol"==typeof t||isNaN(+t)?e:this.store[t]}})};class Yn extends Kn{syncViaXML(e){this.otherSide("syncViaXML",[e])}}function Xn(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function qn(e,t){window.fetcher.getValue("VWO.modules.vwoUtils.urlUtils.customEvent",[e,t])}window.VWO.modules.vwoUtils.cookies.CookieJar=zn.secondary("VWO.modules.vwoUtils.cookies.CookieJar",Yn,(e=>{"_vwo"===e.jarName&&window.VWO._.cookieInitWT(e)}));var Qn,Zn=window._vwo_acc_id,eo=[],to=0,io,no=!1,oo=function(){for(var e=0;e<eo.length;e++)eo[e].d||(eo[e].c(),eo[e].d=!0)};function so(){return window._vis_debug}function ro(e){const t=window.VWO;return t._.cLFE||!t.data.cj||Object.values(t.data.cj).every((e=>void 0===e))||(e.backwardCompatible=t.data.cj.bc||!1,e.strategy=e.strategy||t.data.cj.s),e}const ao={domain:void 0,_create:function(e,t,i,n,o,s,r){var a,d;so()&&0!==e.indexOf("debug")&&(e="debug"+e);const l=i>0;let c=window._vis_opt_cookieDays;window.VWO._.cLFE&&(s=!1),"_vwo_sn"!==e&&"_vwo_ds"!==e&&"_vis_opt_test_cookie"!==e&&!isNaN(c=parseFloat(c))&&isFinite(c)&&l&&(i=c);var u="";if(o?u+="; expires="+new Date(o).toGMTString():i?u+="; expires="+new Date((new Date).getTime()+864e5*i).toGMTString():!1===i&&(u="; expires=Thu, 01 Jan 1970 00:00:01 GMT"),n||(n=ao.domain),void 0!==n){n=(null===(d=null===(a=window.VWO._.allSettings.dataStore.plugins.DACDNCONFIG)||void 0===a?void 0:a.jsConfig)||void 0===d?void 0:d.dNISD)&&!window._vis_opt_domain?"":"; domain=."+n}const g=e+"="+encodeURIComponent(t)+u+(n||"")+"; path=/";window.VWO._.ss&&!r?(document.cookie=g+"; secure; samesite=none; Partitioned;",6===window._vwo_acc_id&&e.indexOf("_vwo_ds")>-1&&!no&&(this.create(e,"",!1,n,1,s,!0),no=!0)):document.cookie=g},create:function(e,t,i,n,o,s,r){this._create(e,t,i,n,o,s,r),hn(f.SET_COOKIE,e,t,i,o),qn("meta",{ckName:e,ckValue:t,ckDays:i,ckExpiryTs:o})},get:function(e,t,i){var n;e=e.trim(),!i&&so()&&(e="debug"+e),window.VWO._.cLFE;var o=document.cookie.match(new RegExp("(?:^|;)\\s*"+e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+"=(.*?)(?:;|$)","i"));return n=o&&decodeURIComponent(o[1]),hn(f.GET_COOKIE,e,n),n},erase:function(e,t,i){this.create(e,"",!1,t,1,i),hn(f.ERASE_COOKIE,e)},mergeInFPJar:function(){if(window.VWO._.cLFE)return;const e=this.createThirdPartyJar().getAll(!0);for(const t in e){if("ts"===t)continue;const i=e[t][1],n=e[t][0];window.VWO._.jar.set(t,n,(i-Date.now())/864e5)}},createThirdPartyJar:function(){return Qn||(Qn=new Yn("_vwo_third_party",ao.domain,void 0,!1,void 0,!0),window.VWO._.tpj=Qn,Qn)},setThirdPartyCookiesInJar:function(e,t,i,n){const o=this.createThirdPartyJar(),s=n?(n-Date.now())/864e5:i;o.set(e,t,s)},getThirdPartyJarValue:function(){const e=Qn.getStoredJarValue();return e.length?e:null},createThirdParty:function(e,t,i,n,o,s,r){if(!window.mainThread)return window.fetcher.getValue("VWO._.cookies.createThirdParty",[e,t,i,n,o,s,r]);var a,d,l,c;let u=!1;if(o&&(u=r?r.multiple_domains:window._vwo_exp[o].multiple_domains),"_vwo"!==e&&this._create(e,t,i,n),so()&&0!==e.indexOf("debug")&&(e="debug"+e),!((c=window.vwo_$)&&o&&u||s||"_vwo"===e))return void hn(f.SET_THIRD_PARTY_COOKIE_ERROR,e,t,i,n);a=c("<iframe>").attr({height:"1px",width:"1px",border:"0",class:"vwo_iframe",name:"vwo_"+Math.random(),style:"position: absolute; left: -2000px; display: none"}).appendTo("head").load((function(){-1!==e.indexOf("split")&&this.parentNode.removeChild(this),--to||oo()})),to++;const g=window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com";d=g+"/ping_tpc.php?account="+Zn+"&name="+encodeURIComponent(e)+"&value="+encodeURIComponent(t)+"&days="+i+"&random="+Math.random(),/MSIE (\d+\.\d+);/.test(navigator.userAgent)?a.attr("src",d):767218===window._vwo_acc_id||window.VWO._.lastPageUnloadURL?window.VWO.modules.tags.dataSync.utils.sendCall(null,{url:"/ping_tpc.php?account="+Zn+"&name="+encodeURIComponent(e)+"&value="+encodeURIComponent(t)+"&days="+i+"&random="+Math.random()},null,oo,!0):((l=c("<form>").attr({action:g+"/ping_tpc.php","accept-charset":"UTF-8",target:a.attr("name"),enctype:"application/x-www-form-urlencoded",method:"post",id:"vwo_form",style:"display:none"}).appendTo("head")).attr("action",d).submit(),l.remove()),hn(f.SET_COOKIE,e,t,i,o,!0)},waitForThirdPartySync:function(e){return i(this,void 0,void 0,(function*(){window.mainThread?eo.push({c:e}):yield window.fetcher.getValue('VWO._.cookies.waitForThirdPartySync("${{1}}")',null,{captureGroups:[e]})}))},setJar(e){window.VWO._.jar=io=e},init:function(e){window.VWO._.jar=null},getAll:function(e=!1){if(e&&window.VWO._.isCookieFallbackEnabled)return window.fetcher.getValue("window.VWO._.cookies.getAll");const t=document.cookie.split(/; ?/),i={};for(let e=0;e<t.length;e++){const n=t[e].split("="),o=n[0],s=n[1];try{i[o]=s}catch(e){}}return i},getItem:function(e,t=!1){return t&&window.VWO._.isCookieFallbackEnabled?window.fetcher.getValue("window.VWO._.cookies.getItem",[e]):e.indexOf("_vis_opt_")>-1||e.indexOf("_vwo_")>-1?this.get(e)||this.get(e,!0):this.get(e,!0,!0)},setItem:function(e,t){this.create(e,t)},deleteAll:function(){},deleteItem:function(){},includes:function(e,t=!1){if(t&&window.VWO._.isCookieFallbackEnabled)return window.fetcher.getValue("window.VWO._.cookies.includes",[e]);const i=new RegExp(e),n=Object.keys(ao.getAll());for(let e=0;e<n.length;e++)if(i.test(n[e]))return 1;return 0}};window.VWO._.cookies=ao;class lo{constructor(e){this.storageConfig=e}getValWithPref(e){const{prefer:t,cookieExpDays:i}=this.storageConfig,n=R.get(e),o=R.get(e);return"cookie"==t?R.set(e,n):"ls"==t&&ao.create(e,o,i),{cookie:JSON.parse(n),ls:JSON.parse(o)}}getVal(e){const{strategy:t,prefer:i}=this.storageConfig;for(const n of t)return"all"==n?this.getValWithPref(e)[i]:"ls"==n?JSON.parse(R.get(e)):ao.get(e)}setVal(e,t){const{strategy:i,cookieExpDays:n}=this.storageConfig;for(const o of i)"all"==o?(R.set(e,t),ao.create(e,t,n)):"cookie"==o?ao.create(e,t,n):R.set(e,t)}}class co extends gn{constructor(e,t,i){super(),this.contentSyncLocation="VWO._.contentSyncService",this.url=t,this.globalLookupContext=i,this.storageObj=new lo(e)}parseStorageInfo(e,t,i){if(!e)return;const[n,o]=t.split(".");return e[n]=e[n]||{},e[n][o]=e[n][o]||{},e[n][o][i]}getInfoFromGlobalObject(e,t){if(!e)return;const[i,n]=t.split(".");return e[i]=e[i]||{},e[i][n]=e[i][n]||{},{argVn:e[i][n].args||{},vn:e[i][n].vn}}fixResponse(e){const t={fns:{}};e.fns=e.fns||{};for(const i in e.fns)for(const n in e.fns[i]){const o=e.fns[i][n],s=JSON.stringify(JSON.parse(n));t.fns[i]=t.fns[i]||{},t.fns[i][s]=o}return t}syncGet(e,t,i=!0){if(!this.storageObj)return{dataPresent:!1};const n=this.storageObj.getVal(this.storageLookUpKey),o=JSON.stringify(t),s=this.getInfoFromGlobalObject(this.globalLookupContext,e),r=s&&s.vn,a=s&&s.argVn,d=this.parseStorageInfo(n,e,o);if(d&&i){const i=d;let n=!1;for(const s in a)for(const r in a[s])if(i.argVn[s]&&i.argVn[s][r]&&parseInt(i.argVn[s][r])<parseInt(a[s][r])){n=!0,this.syncFromBackend(e,t,o,this.url);break}return r&&parseInt(r)>parseInt(i.vn)&&!n&&this.syncFromBackend(e,t,o,this.url),{dataPresent:!0,val:i.val}}return this.syncFromBackend(e,t,o,this.url),{dataPresent:!1}}syncFromBackend(e,t,n,o){return i(this,void 0,void 0,(function*(){yield this.otherSide("syncFromBackend",[e,t,n,o])}))}updateStorage(e){return i(this,void 0,void 0,(function*(){const t=window.VWO._.contentSyncService,i=t.storageObj.getVal(t.storageLookUpKey);let n={};(i||!1)&&(n=i);const o=(e=t.fixResponse(e)).fns;for(const e in o){const t=o[e];for(const i in t){n.fns=n.fns||{},n.fns[e]=n.fns[e]||{};const o=n.fns[e][i];if(o)if(parseInt(o.vn)==parseInt(t[i].vn)){const o=n.fns[e][i].argVn;let s=!0;for(const e in o){if(!t[i].argVn[e]||!s){s=!1;break}for(const n in o[e]){const r=t[i].argVn[e][n],a=o[e][n];if(!r||parseInt(a)<=parseInt(r)){s=!1;break}}}!s&&(n.fns[e][i]=t[i])}else parseInt(o.vn)<parseInt(t[i].vn)&&(n.fns[e][i]=t[i]);else n.fns[e][i]=t[i]}}t.storageObj.setVal(t.storageLookUpKey,JSON.stringify(n))}))}}window.VWO.modules.tags={};class uo{otherSide(...e){e[0]="VWO.modules.tags.checkEnvironment."+e[0],window.fetcher.getValue(...e)}}window.VWO.modules.tags.checkEnvironment={};const go="lT",ho="sT",vo="ivp",po="gp",wo="ca",Eo=10,fo=2,_o=function(){},mo="w",Oo=[739074,714884,708439,765649],So={VS_DATA:"vwoVsData"},yo="vwoStandardTrigger",To=window.VWO.TRACK_SESSION_COOKIE_EXPIRY_CUSTOM||1/48,Co="_vis_opt_",Io="_vwo_",No={TRACK_GLOBAL_COOKIE_NAME:"_vwo_ds",TRACK_SESSION_COOKIE_NAME:"_vwo_sn",TRACK_SESSION_COOKIE_EXPIRY:To,SESSION_TIMER_EXPIRE:60*To*60*1e3*24,COOKIE_VERSION:3,COOKIE_TS_INDEX:1,COOKIE_VERSION_INDEX:0,FIRST_SESSION_ID_INDEX:0,PC_TRAFFIC_INDEX:1,RELATIVE_SESSION_ID_INDEX:0,PAGE_ID_INFORMATION_INDEX:1,SESSION_SYNCED_STATE_INDEX:4,PAGE_ID_EXPIRY:15,GLOBAL_OPT_OUT:"_vwo_global_opt_out",OPT_OUT:"_vis_opt_out",TEST_COOKIE:"_vis_opt_test_cookie",COOKIE_JAR:"_vwo",SAME_SITE:"_vwo_ssm",UUID:"uuid",UUID_V2:"uuid_v2",VWO_COOKIE_QUERY_PARAM:"vwo_q",DEFAULT_EXPIRY:100,UUID_COOKIE_EXPIRY:365.2425};function Ao(){return Math.min(window.VWO.TRACK_GLOBAL_COOKIE_EXPIRY_CUSTOM||window.VWO.data.rp||90,90)}function Vo(){return{[Co+"test_cookie"]:0,[Io+"ds"]:Ao(),[Io+"sn"]:To,[Io+"referrer"]:18e-5,[Io+"uuid"]:3650,[Io+"uuid_v2"]:366,[No.SAME_SITE]:3650}}class bo{otherSide(...e){return e[0]="window.VWO.modules.utils.campaignUtils."+e[0],window.fetcher.getValue(...e)}updateGoalCookieValueForExperience(e,t){let i=e?e.split("mE_")[1].split(","):[];return i.includes(t)||i.push(t),`mE_${i.join(",")}`}isGoalTriggeredForExperience(e,t){return(e?e.split("mE_")[1].split(","):[]).includes(t)}}let Ro;function Po(e){if(!e)return e;try{e=window.decodeURIComponent(e)}catch(e){}return e}const xo=function(){if(void 0!==Ro)return Ro;const e=[],t=window.VWO._.allSettings.dataStore.campaigns;let i,n;for(let i in t)e.push(i);return Ro=!!(i=(window.location.search+window.location.hash).match(/.*_vis_test_id=(.*?)&.*_vis_opt_preview_combination=(.*)$/))&&(!(!e.includes(i[1])||!t[i[1]]||void 0===t[i[1]].combs[n=Po(i[2])])&&n),Ro},Do=e=>window._vis_heatmap?e:e[0],Lo=Object.keys;function Uo(e,t){if(!(e instanceof Array))return-1;for(var i=0;i<e.length;i++)if(t===e[i])return i;return-1}function Wo(e,t,i){var n,o,s,r=!1;return-1===t||i?(o=requestAnimationFrame,s=cancelAnimationFrame):(o=setTimeout,s=clearTimeout),function(...i){r&&(s(n),n=null),n=o((function(){e.apply(this,i)}),t),r=!0}}function ko(e,t){return e.length>t?e.slice(0,t-1)+"...":e}function Mo(){}try{Mo.prototype=Object.create(Array.prototype),Object.defineProperty(Mo.prototype,"clear",{value:void 0,writable:!0,enumerable:!1})}catch(z){}const Go=/:nth-parent\((\d+)\)$/,Fo=/[A-Za-z1-9]*?:tm\(["']([\s\S]*?)["']\)(?:\:nth-parent\(\d\))?/,jo=e=>e.indexOf(":tm(")>-1,Ho=e=>!!jo(e),$o=e=>{const t=e.match(Go)||[];if(t.length<2)return;const i=+t[1];return isNaN(i)?void 0:i};function Bo(){const e={};return function(t){if(e[t])return e[t];if(jo(t)){const{targetElement:i,targetText:n,ancestorLevelCount:o,childSel:s}=(e=>{const t=e.match(Fo)||[e],i=t[0],[n]=e.split(":tm("),o=t[1],s=$o(i),r=void 0!==t.index?e.slice(t.index+i.length,e.length).trim():"",a=n.trim().split(" ");return{targetElement:1==a.length?a[0].toUpperCase():a.map((e=>(-1===e.search(/(\.|#)/)&&(e=e.toUpperCase()),e))).join(" "),targetText:o,ancestorLevelCount:s,childSel:r}})(t);return e[t]={targetElement:i,targetText:n,ancestorLevelCount:o,childSel:s}}return{targetElement:"",targetText:""}}}const Jo=Bo(),Ko={};function zo(e){if(Array.isArray(Ko[e]))return Ko[e];const t=e.split("<vwo_sep>");return 1===t.length?Ko[e]=[{sel:e,isTxtSel:!0}]:Ko[e]=t.map((e=>({sel:e.trim(),isTxtSel:Ho(e)})))}const Yo=e=>"number"==typeof e,Xo=(e,t)=>!(!e||e.sel!==t),qo=(e,t)=>Yo(e)&&e===t,Qo=({targetElement:e,targetText:t,ancestorLevelCount:i,childSel:n},o,s)=>{const r=[e,t].join(".");if(!s||!Array.isArray(s[r]))return null;for(let e=0;e<s[r].length;e++){const t=o[s[r][e]];if(!t)return null;const a=!i&&!t.d||qo(i,t.d),d=!n&&!t.cd||Xo(t.cd,n);if(a&&d)return t}return null},Zo=e=>{const t=zo(e),i=window.VWO._.txtCfg||{},n=i.mp=i.mp||{};let o="";const s=e=>{o+=e+","};for(const e of t)if(e.isTxtSel)if(n[e.sel])s(n[e.sel]);else{const t=Jo(e.sel),o=Qo(t,i.t,i.txtSelMap);if(o&&o.s){const t="."+o.s;s(t),n[e.sel]=t}}else s(e.sel);return o},es=()=>{window.VWO._.txtCfg&&window.VWO._.txtCfg.mp&&window.fetcher.setValue("window.VWO._.txtCfg.mp",window.VWO._.txtCfg.mp)};class ts{constructor(){this.uuid="",this.TPJarExpiry=730,this.preview=xo,this.hideElExpression="{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}",this.domIndependentCampaigns=["ANALYSIS","SURVEY","ANALYZE_RECORDING","ANALYZE_HEATMAP","ANALYZE_FORM","TRACK","FUNNEL","INSIGHTS_FUNNEL","INSIGHTS_METRIC"],this.sessionBasedCampaigns=["ANALYZE_RECORDING","ANALYZE_HEATMAP","ANALYZE_FORM","TRACK","FUNNEL","INSIGHTS_FUNNEL","INSIGHTS_METRIC"]}otherSide(...e){return e[0]="VWO.modules.utils.libUtils."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}isDomDependent(e){return"VISUAL_AB"===e||"VISUAL"===e}isTestingCampaign(e){return this.isDomDependent(e)||"SPLIT_URL"===e}generateUUID(){return"Jxxxxxxxxxxx4xxxyxxxxxx5xxxxxxxx9".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16).toUpperCase()}))}isDomIndependentCampaign(e){return-1!==this.domIndependentCampaigns.indexOf(e)}isSessionBasedCampaign2(e){const t=e.type;return-1!==this.sessionBasedCampaigns.indexOf(t)}hasInsightsMetric(e){return"INSIGHTS_FUNNEL"===e||"INSIGHTS_METRIC"===e}isBot2(){return window.VWO._.isBot||window.navigator.userAgent.toLowerCase().indexOf("bot")>=0||window.navigator.userAgent.toLowerCase().indexOf("spider")>=0||window.navigator.userAgent.toLowerCase().indexOf("preview")>=0}isPageBasedGoal(e){return"SEPARATE_PAGE"===e||"CUSTOM_GOAL"===e||"REVENUE_TRACKING"===e}isSplitVariation(e){return"SPLIT_URL"===e.type&&e[vo]}shouldTrackUserForCampaign(e){return"number"==typeof e&&(e=window._vwo_exp[e]),!e||!window._vwo_code||!window._vwo_code[go]&&!window._vwo_code[ho]||(this.isDomIndependentCampaign(e.type)||this.isSplitVariation(e))}getUUIDString(e){return e?"&u="+e:""}isAnalyzeCampaign(e){return"ANALYZE_RECORDING"===e||"ANALYZE_HEATMAP"===e||"ANALYZE_FORM"===e}updateGoalsKind(e){const t={};Object.keys(e).forEach((i=>{const n=e[i],o=e[i].mt;o&&Object.keys(n.goals).length&&Object.entries(o).forEach((([e,n])=>{const o=this.getGoalKind(n);o&&(t[i]=t[i]||{},t[i][e]=o)}))})),window.VWO._.goalsToBeConvertedSynchronously=t}getGoalKind(e){let t;const i=window.VWO._.allSettings.triggers[e];if(i)if("object"==typeof i.cnds[0]){switch(i.cnds[0].event){case E.DOM_CLICK:t="CLICK_ELEMENT";break;case E.DOM_SUBMIT:t="FORM_SUBMIT";break;case E.PAGE_UNLOAD:t="PAGE_UNLOAD"}}else{switch(i.cnds[1].event){case E.DOM_SUBMIT:case E.DOM_CLICK:t="ENGAGEMENT"}}return t}isXpathAllHead(e,t,i=!1){if(e.muts=e.muts||{},"boolean"==typeof e.muts.pvtMut&&!i)return e.muts.pvtMut;const n=t.split(",");let o=!0;for(let e=0;e<n.length;e++)if(n[e].trim()&&"head"!==n[e].toLowerCase()){o=!1;break}return i||(e.muts.pvtMut=o),o}isEligibleToSendCall(e,t){return!xo()&&(t&&!t.visDebug||!window._vis_debug)&&this.shouldTrackUserForCampaign(e)&&(t&&t.vwoInternalProperties.shouldExecuteLib||window.VWO._.shouldExecuteLib)}isPersonalizeCampaign(e){var t;return"TARGETING"===(null===(t=e.iType)||void 0===t?void 0:t.type)}doNotHideElements(e){return e&&"boolean"==typeof e}getMatchedCookies(e){let t=[];return document.cookie&&(t=document.cookie.match(e)||[]),t}getCombinationCookie(){let e=this.getMatchedCookies(/(?:^|;)\s?(_vis_opt_exp_\d+_combi=[^;$]*)/gi);e=e.map((function(e){try{const t=decodeURIComponent(e);return/_vis_opt_exp_\d+_combi=(?:\d+,?)+\s*$/.test(t)?t:""}catch(e){return""}}));const t=[];return e.forEach((function(e){const i=e.match(/([\d,]+)/g);i&&t.push(i.join("-"))})),t.join("|")}getSelectorPath(e,t){let i="",n="",o=t.sections[1].variations[e];if("string"==typeof o&&(o=vwo_$.parseJSON(o)),o)for(let e=0;e<o.length;e++){let s=o[e].xpath;s&&(o[e].dHE?t.dHE=!0:(t.mSP&&(s=s.replace(/html\.vwo_p_s_\w+\s*/g,"")),Ho(s)?i+=Zo(s):i+=s+",")),o[e].cpath&&!o[e].dHE&&(n+=o[e].cpath+",")}return{variationXPathSelector:i,variationCPathSelector:n}}getCampaignXPath(e){const t={selector:"",selectorPerVariation:{},cPathSelector:"",cPathSelectorPerVariation:{}};if(e.xPath)return t.selector=e.xPath,t.cPathSelector=e.cPath,t;if(!this.isDomDependent(e.type))return t;let i=e.combination_chosen||e.cc;const n=e.sections;if("VISUAL_AB"===e.type){if(i)1!=i&&(t.selector=this.getSelectorPath(i,e).variationXPathSelector);else for(i in e.combs)if(e.combs.hasOwnProperty(i)){const{variationXPathSelector:n,variationCPathSelector:o}=this.getSelectorPath(i,e);t.selector+=n,t.cPathSelector+=o,t.cPathSelectorPerVariation[i]=o,t.selectorPerVariation[i]=n.substring(0,n.length-1)}}else{const e=Lo(n);let i=e.length;for(;i--;)n[e[i]].path&&(t.selector+=n[e[i]].path+",")}return!e.dHE||t.selector&&!this.isXpathAllHead(e,t.selector,!0)||(t.selector=(t.selector||"")+".vwo_dummy_selector,"),t.cPathSelector&&(t.cPathSelector=t.cPathSelector.substring(0,t.cPathSelector.length-1)),t.selector&&(t.selector=t.selector.substring(0,t.selector.length-1)),es(),t}}function is(e,t){window.fetcher.getValue('VWO.modules.utils.helperFunctions.onUrlChange("${{1}}", "${{2}}")',null,{captureGroups:[e,t]})}function ns(e,t){let i,n=!1;return function(...o){n&&(clearTimeout(i),i=null),i=setTimeout((function(){e.apply(null,o)}),t),n=!0}}class os{otherSide(...e){return e[0]="VWO.modules.tags.dataSync."+e[0],window.fetcher.getValue(...e)}}var ss={PARSE_TLD:"pTLD"},rs=["co","org","com","net","edu","au","ac"],as;function ds(e){var t,i=e.split("."),n=i.length,o=i[n-2];return o&&rs.includes(o)?(t=i[n-3]+"."+o+"."+i[n-1],hn(ss.PARSE_TLD,e,t),t):(t=o+"."+i[n-1],hn(ss.PARSE_TLD,e,t),t)}const ls={init:function(){as=ao.get("_vwo_referrer"),ao.erase("_vwo_referrer"),"string"!=typeof as&&(as=document.referrer)},get:function(){return-1!==location.search.search("_vwo_test_ref")?document.referrer:as},set:function(){ao.create("_vwo_referrer",as,18e-5)}};window.VWO.modules.vwoUtils.referrer=ls;const cs={get navigator(){return navigator},get pageTitle(){return document.title},get doNotTrack(){return window.doNotTrack},get windowName(){return window.name},get currentUrl(){return window._vis_opt_url||window.location.href},get location(){return window.location},get document(){return window.location},get history(){return window.history},get accountId(){return window._vwo_acc_id},get smartCodeVersion(){return window._vwo_code_version},get serverUrl(){return window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com/"},get vwoText(){return window._vwo_text},get vwoCode(){return window._vwo_code},get MutationObserver(){let e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return window.Zone&&window.Zone.__symbol__&&(e=window[window.Zone.__symbol__("MutationObserver")]),e},get vwoInternalProperties(){return window.VWO._},get cookie(){return document.cookie},get visDebug(){return window._vis_debug},get cookieDomain(){return window._vis_opt_domain||window._vwo_cookieDomain||ds(window.location.host||new URL(document.URL).host)},get vwoStyle(){return window._vwo_style},get screen(){return window.screen},get vwoCss(){return window._vwo_css},get visOptUrl(){return window._vis_opt_url},get allSettings(){return window.VWO._.allSettings},get apiSectionCallback(){return window._vwo_api_section_callback},get encodeURIComponent(){return window.encodeURIComponent},get page(){return{title:cs.pageTitle,url:cs.currentUrl,referrerUrl:ls.get()}},get timeSpentInASession(){var e,t,i,n,o,s;return+Date.now()-1e3*+(null===(i=null===(t=null===(e=window.VWO.phoenix)||void 0===e?void 0:e.store)||void 0===t?void 0:t.getters)||void 0===i?void 0:i.sessionStart)?(+Date.now()-1e3*+(null===(s=null===(o=null===(n=window.VWO.phoenix)||void 0===n?void 0:n.store)||void 0===o?void 0:o.getters)||void 0===s?void 0:s.sessionStart))/1e3:0},get vwoUUID(){return window._vwo_uuid}};function us(e){try{return e()}catch(e){return}}window.VWO.modules.dataStorePlugin=cs;const gs={[E.VARIATION_SHOWN]:{ignoreMetricDataCheck:!0},[E.ERROR_ONPAGE]:{},[E.CURSOR_THRASHED]:{},[E.PAGE_REFRESHED]:{},[E.QUICK_BACK]:{},[E.COPY]:{},[E.SELECTION]:{},[E.TAB_IN]:{},[E.TAB_OUT]:{},[E.LEAVE_INTENT]:{},[E.REPEATED_SCROLLED]:{},[E.REPEATED_HOVERED]:{},[E.PAGE_VIEW]:{},[E.DOM_CLICK]:{},[E.DOM_SUBMIT]:{},[E.CUSTOM_CONVERSION]:{},[E.REVENUE_CONVERSION]:{},[E.SYNC_VISITOR_PROP]:{ignoreMetricDataCheck:!0},[E.PAGE_UNLOAD]:{}},hs=e=>!!gs[e],vs=e=>!!us((()=>window.VWO._.allSettings.dataStore.events[e].nw));class ps{constructor(){this.vwoEventsToBeSynced=Object.assign({},gs),this.allowedMetaDataProps={ogName:!0,source:!0}}otherSide(...e){return e[0]="VWO.modules.tags.dataSync.utils."+e[0],window.fetcher.getValue(...e)}shouldSendEventCall(e,t){var i;const n=t.name;if(!n)return!1;const o=this.vwoEventsToBeSynced[t.name];if(void 0===o&&!t.props.isCustomEvent&&!t.props.isSurveyEvent)return!1;if(!window.VWO._.allSettings.dataStore.events[n]){let e;try{e=JSON.parse(window.localStorage.getItem(ps.UNREG_EVENT_LOCAL_STORAGE_NAME))||{}}catch(t){e={}}if(e[n])return!1;{e[n]=!0;const t=JSON.stringify(e);window.localStorage.setItem(ps.UNREG_EVENT_LOCAL_STORAGE_NAME,t)}}if(t.props.isCustomEvent||t.props.isSurveyEvent||t.props.forceCall)return!0;if(!o||!o.ignoreMetricDataCheck){const e=null===(i=t._vwo)||void 0===i?void 0:i.eventDataConfig;if(!e||Object.keys(e).length<=0)return!1}if(t.name!==E.VARIATION_SHOWN)return!0;let s="non-analytics";location.href.includes("jsMode=Any")&&(s="analytics");const r=null==t?void 0:t.props,a=null==r?void 0:r.id;if(!r||!a)return!1;const d=e.currentSettings.dataStore.campaigns[a]||window._vwo_exp[a],l=window.VWO.modules.utils.libUtils.isSessionBasedCampaign2(d),c="SURVEY"===d.type;return!(!("analytics"===s||"non-analytics"===s&&r.isFirst)||l||c)}evaluateDataForEventsCall(e,t,i){var n,o,s,r,a;let d=!0;const l=null===(o=null===(n=i._vwo)||void 0===n?void 0:n.eventDataConfig)||void 0===o?void 0:o.addVwoPageMeta;null===(r=null===(s=i._vwo)||void 0===s?void 0:s.eventDataConfig)||void 0===r||delete r.addVwoPageMeta,this.syncAdditionalDataWithEventsData(null===(a=i._vwo)||void 0===a?void 0:a.eventDataConfig,i);const c=i.eventUuid,u={d:{}};if(u.d.msgId=`${t}-${+new Date}`,u.d.visId=t,c&&(u.d.eventUuid=c),u.d.event={props:this.excludeEventPropsNotToBeSynced(e,i.name,i.props),name:i.name,time:i.time},i.props.$metaData){const e={},t=i.props.$metaData;for(const i in t)Object.prototype.hasOwnProperty.call(this.allowedMetaDataProps,i)&&(e[i]=t[i]);Object.keys(e).length>0&&(u.d.event.props.vwoMeta=u.d.event.props.vwoMeta||{},Object.assign(u.d.event.props.vwoMeta,e)),delete u.d.event.props.$metaData}return i.props.$visitor&&(u.d.visitor=i.props.$visitor,delete i.props.$visitor,Object.keys(u.d.visitor.props).length<=0&&(d=!1)),u.d.event.props.page=i.page||this.getPageInfo(l),this.resetDataForCurrentEvent(i),{payload:u,shouldSyncCall:d}}getPageInfo(e){var t;const i=cs.page;return e&&(i.cnnUrl=document.querySelector&&((null===(t=document.querySelector("link[rel='canonical']"))||void 0===t?void 0:t.href)||""),i.pageViewId=window.VWO._.track.getTrackPageId&&window.VWO._.track.getTrackPageId()||window.VWO._.pageId),i}syncAdditionalDataWithEventsData(e,t){if(e)for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&"shouldSyncData"!==i){const n=e[i];if(void 0===n)continue;t.props?t.props[i]=n:t[i]=n}}resetDataForCurrentEvent(e){var t;let i=(null===(t=e._vwo)||void 0===t?void 0:t.eventDataConfig)||{};(i||e.props)&&(i={},e.props={})}excludeEventPropsNotToBeSynced(e,t,i){var n,o,s,r,a,d,l;const c=["fireLinkedTagSync","isTrusted","page","$visitor","isCustomEvent","forceCall","VWO"];if(!i.isCustomEvent){const i=(null===(r=null===(s=null===(o=null===(n=e.currentSettings)||void 0===n?void 0:n.dataStore)||void 0===o?void 0:o.events)||void 0===s?void 0:s[t])||void 0===r?void 0:r.nS)||(null===(l=null===(d=null===(a=window.VWO._.allSettings.dataStore)||void 0===a?void 0:a.events)||void 0===d?void 0:d[t])||void 0===l?void 0:l.nS)||[];Array.prototype.push.apply(c,i)}if(!c||!c.length)return i;const u={},g=window.VWO._.allSettings.dataStore.events[t];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e];c.indexOf(e)>-1?delete u[e]:u[e]=!g&&t?ko(t,100):t}return u}}ps.UNREG_EVENT_LOCAL_STORAGE_NAME="vwoUnRegEvents";class ws extends ps{sendCall(e,t,i,n,o,s,r){return this.otherSide("sendCall",[e,t,i,n,o,s,r])}addDataFromMTAndSend(e,t,i,n,o,s,r,a){return bs(r.name),this.otherSide("addDataFromMTAndSend",[e,t,i,n,o,s,r,a])}getDataForEventsCall(e,t,n){return i(this,void 0,void 0,(function*(){const i=window.VWO.modules.tags.sessionInfoService,{payload:o,shouldSyncCall:s}=this.evaluateDataForEventsCall(e,t,n);return o.d.sessionId=yield i.getSessionId(),{data:o,shouldSyncCall:s}}))}}var Es=new ws;class fs extends os{execute({event:e,getters:t},n,o,s,r){return i(this,void 0,void 0,(function*(){if(t.visDebug)(o=o||_o)(s);else if(Es.shouldSendEventCall(t,e)){r=r||(yield ar.createUUIDCookie2(t,n));const{data:i,shouldSyncCall:a}=yield Es.getDataForEventsCall(t,r,e);a&&(yield Es.addDataFromMTAndSend(t,null,i,o,!0,s,e,null==n?void 0:n.id))}else(o=o||_o)(s)}))}}const _s=new fs,ms=_s.execute.bind(_s);function Os(e,t){var i;const n=e.conflictingPropsData||{};if(!e.props){e.props={};const i=["name","props","_vwo","_meta","conflictingPropsData","eventUuid"];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i.includes(t)||(e.props[t]=e[t]));Object.assign(e.props,n),Object.keys(t).forEach((i=>{e.props[i]=t[i]}))}e.aux&&(e.props.aux=e.aux),e.time=e.time||(null===(i=e.VWO)||void 0===i?void 0:i.firedTime)||+new Date}const Ss={};function ys({vwoEvents:e,getters:t,data:n,actions:o,event:s},r,a={},d=null){var l,c;return i(this,void 0,void 0,(function*(){if(s.name=r||s.name,null===(l=Ss[s.name])||void 0===l?void 0:l.shouldWaitForCallbackExecution)return;let i;Os(s,a),s.name===E.VARIATION_SHOWN&&(i=t.settings.campaigns[s.props.id]);const u=null===(c=s._vwo)||void 0===c?void 0:c.eventDataConfig;if(u){const i=Object.keys(u);for(let r=i.length-1;r>=0;--r){const a=i[r];s._vwo.eventDataConfig=u[a],delete u[a],yield ms({getters:t,event:s,data:n,actions:o,vwoEvents:e},null,d,s.props,a)}}else yield ms({getters:t,event:s,data:n,actions:o,vwoEvents:e},i,d,s.props)}))}function Ts(e,t,n,o=null){const s=window.phoenix;return n.name=n.name||t,Ss[t]=Ss[t]||{},Ss[t].shouldWaitForCallbackExecution=!0,(e=e||s).trigger(t,n,(function(e){return i(this,void 0,void 0,(function*(){const i=s.store,n=i.getters;Ss[t].shouldWaitForCallbackExecution=!1,yield ys({getters:n,actions:i.actions,event:e,vwoEvents:s,data:{}},t,{},o)}))}))}function Cs(e,t,i,n={},o=null){return Ts(e,t,Object.assign({name:t,time:+new Date,props:i},n),o)}const Is={variationShown(e,t,n){return i(this,void 0,void 0,(function*(){e=e||window.phoenix,n&&void 0===n.isFirst&&(n.isFirst=t.isFirst),yield Cs(e,E.VARIATION_SHOWN,t,{},ar.variationShownCallback)}))},dimensionTagPushed(e,t){Cs(e=e||window.phoenix,E.DIMENSION_TAG_PUSHED,t)},unhideElement(e,t,i){i||Cs(e,E.UNHIDE_ELEMENT,void 0,t)}},Ns=e=>!!us((()=>window.VWO._.eventsSynced[e])),As=()=>{window.VWO.phoenix.on(E.END_APPLY_CHANGES,(()=>{const e=us((()=>window.VWO.phoenix.store.getters)),t=e.eventsHistory||[],i=window.VWO._.allSettings.dataStore.events;if(t.length>0)try{const n=(e=>e.reduce(((e,t)=>(e[t.name]=t.event,e)),{}))(t);for(const t in i)if(hs(t)&&vs(t)&&n[t]&&!Ns(t)){const i=n[t];i.props=i.props||{},i.props.forceCall=!0,ys({getters:e,actions:window.VWO.phoenix.store.actions,event:n[t],vwoEvents:window.VWO.phoenix,data:{}},t)}}catch(e){}}))},Vs=()=>{window.VWO._.eventsSynced={}},bs=e=>{window.VWO._.eventsSynced=window.VWO._.eventsSynced||{},window.VWO._.eventsSynced[e]=!0};window.VWO.modules.events={syncEventsDataToDataLayer:ys,fireEventAndSyncData:Ts,events:Is,markEventSyncedWT:bs};const Rs={VISITOR_IS_NOT_OPTED_OUT:"visitorIsNotOptedOut",VISITOR_IS_OPTED_OUT_COMPLETELY:"visitorIsOptedOutCompletely",VISITOR_IS_OPTED_OUT:"visitorIsOptedOut"};var Ps;!function(e){e[e.OPTED_OUT_WITH_EXPERIENCE=0]="OPTED_OUT_WITH_EXPERIENCE",e[e.OPTED_OUT_PARTIALLY=1]="OPTED_OUT_PARTIALLY",e[e.OPTED_OUT_COMPLETELY=2]="OPTED_OUT_COMPLETELY"}(Ps||(Ps={}));class xs{setOptOutStateConfig(){let e,t,i,n;switch(e=window.VWO._.isWorkerThread?window.phoenix.storages.storages.cookies.get("_vis_opt_out",!0):window.VWO._.cookies.get("_vis_opt_out",!0),e&&(e=Number(e)),e){case 0:t=Rs.VISITOR_IS_OPTED_OUT,i=!0,n=!1;break;case 1:case 2:t=Rs.VISITOR_IS_OPTED_OUT_COMPLETELY,i=!1,n=!1;break;default:t=Rs.VISITOR_IS_NOT_OPTED_OUT,i=!0,n=!0}window.VWO.phoenix&&window.fetcher.setValue("window.VWO._.optOutStates",{state:t,executeLib:i,shouldWeTrackVisitor:n}),window.VWO._.optOutStates={state:t,executeLib:i,shouldWeTrackVisitor:n}}callStopAnalyzeAndSurvey(){window.VWO._.optOutStates.shouldWeTrackVisitor||(window.VWO._.isWorkerThread?window.fetcher.getValue("window.VWO.modules.otherLibDeps.stopAnalyzeAndSurvey"):window.VWO.modules.otherLibDeps.stopAnalyzeAndSurvey())}getOptOutStateConfig(){return window.VWO._.optOutStates}shouldExecuteLibOnBasisOfCurrentOptOutState(){return!(!xo()&&!window._vis_debug)||(this.getOptOutStateConfig().executeLib||window._removeVwoGlobalStyle(),this.getOptOutStateConfig().executeLib)}shouldWeTrackVisitor(){return!(!xo()&&!window._vis_debug)||this.getOptOutStateConfig().shouldWeTrackVisitor}isVisitorOptedOut(){return!xo()&&!window._vis_debug&&this.getOptOutStateConfig().state!==Rs.VISITOR_IS_NOT_OPTED_OUT}}const Ds=new xs;function Ls(e){const t=e.storages.storages.cookies.get("_vis_opt_out",!0);return!!(t||window.location.href.indexOf("vwo_opt_out=1")>-1)&&("0"!==t&&("2"!==t&&window.fetcher.getValue("window.VWO.optOut.process",[{accountId:e.accountId,domain:e.cookieDomain}]),!0))}var Us,Ws,ks,Ms,Gs,Fs,js;window.VWO.modules.vwoUtils.optOut=Ds,function(e){e.DOM="vwo_dom"}(Us||(Us={})),function(e){e.WILD_CARD="*",e.TRIGGER="trigger",e.POST_INIT="post-init",e.TIMER="vwo_timer"}(Ws||(Ws={})),function(e){e.URL_CHANGE="vwo_urlChange",e.LEAVE_INTENT="vwo_leaveIntent",e.CLICK_EVENT="vwo_dom_click",e.SUBMIT_EVENT="vwo_dom_submit",e.PAGE_LOAD_EVENT="vwo_page_load"}(ks||(ks={})),function(e){e.PAGE_VIEW="vwo_pageView",e.PAGE_UNLOAD_EVENT="vwo_pageUnload"}(Ms||(Ms={})),function(e){e.EXIT_CONDITIONS="__exitConditions"}(Gs||(Gs={})),function(e){e.DOM_CONTENT_LOADED="DOMContentLoaded",e.SCROLL="scroll",e.CLICK="click",e.SUBMIT="submit"}(Fs||(Fs={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(js||(js={}));class Hs{constructor(e){this.setLevel(e)}setLevel(e="warn"){this.logLevel=js[e.toUpperCase()]}info(e,t={}){this.customLog(js.INFO,e,t)}debug(e,t={}){this.customLog(js.DEBUG,e,t)}warn(e,t={}){var i,n;this.customLog(js.WARN,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}error(e,t={}){var i,n;this.customLog(js.ERROR,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}customLog(e,t,i,n=null){var o,s,r;if(e>=this.logLevel){const a=this.formatMessage(e,t,i);null===(r=null===(s=null===(o=window.VWOEvents)||void 0===o?void 0:o.store)||void 0===s?void 0:s.actions)||void 0===r||r.addLogsForDebugging(a),n?n(a):this.consoleLog(e,[a])}}consoleLog(e,t){switch(e){case js.INFO:console.info(...t);break;case js.WARN:console.warn(...t);break;case js.ERROR:console.error(...t);break;default:console.log(...t)}}formatMessage(e,t,i){var n,o;const s=Object.keys(i).reduce(((e,t)=>e.replace(new RegExp(`{{${t}}}`,"g"),i[t])),t),r=`${Us.DOM}_`;let a=i;const d=(null===(n=i.data)||void 0===n?void 0:n.vwoEventName)||i.vwoEventName;d!==r+Fs.CLICK&&d!==r+Fs.SUBMIT||(a=i.data?null===(o=i.data)||void 0===o?void 0:o.props:a.props,a=a||{name:d});let l=JSON.stringify;try{l=window.VWO._.native.JSON.stringify||JSON.stringify}catch(e){}return`VWO: [${js[e].toUpperCase()}] [${(new Date).toUTCString()}] ${s} ${l(a)}`}}var $s=new Hs("warn");class Bs{toAbsURL(e){return new URL(e,document.baseURI).href}isHashPresent(e){return-1!==e.indexOf("#")}isQueryParamPresent(e,t){var i=e.indexOf("#"),n=e.indexOf("?"),o=t?-1:e.indexOf("=");return-1===i?-1!==n||-1!==o:-1!==n&&i>n||-1!==o&&i>o}otherSide(...e){return e[0]="VWO.modules.vwoUtils.urlUtils."+e[0],window.fetcher.getValue(...e)}}var Js=function(e){return e.replace(/^(https?:\/\/)(?:w{3}\.)?(.*?)(?:\/(?:home|default|index)\..{3,4}|\/$)?(?:\/)?([\?#].*)?$/i,"$1$2$3")},Ks=function(e){return e.replace(/^(https?:\/\/)(?:w{3}\.)?(.*?)(?:(?:home|default|index)\..{3,4})?([\?#].*)?$/i,"$1$2$3")},zs=function(e){return Ks(e).replace(/\/\?/gi,"?")},Ys=window._vis_opt_url,Xs;class qs{constructor(){Xs=this}regexEscape(e){return e.replace(/[\-\[\]{}()*+?.,\/\\^$|#\s]/g,"\\$&")}cleanURL(e,t){return Ys&&!t?Ys:e.replace(/^(.*[^\*])(\/(home|default|index)\..{3,4})((\?|#).*)*$/i,"$1$4")}removeWWW(e,t){return e=e.replace(/^(https?:\/\/)(www\.)?(.*)$/i,"$1$3"),t&&(e=e.replace(/(^\*?|\/\/)www\./i,"$1")),e}stripSlashes(e,t,i){if(e=e.replace(/\/$/,""),t){var n=e.indexOf("/?");e.indexOf("?")-1===n&&(e=e.replace(/\/\?([^\?]*)(.*)/,"?$1$2"))}if(i){var o=e.indexOf("/#");e.indexOf("#")-1===o&&(e=e.replace(/\/#([^#]*)(.*)/,"#$1$2"))}return e}cleanPattern(e){let t="";return{regex:e.replace(/\(\?([a-zA-Z])\)/g,((...e)=>(e[1]&&(t+=e[1]),""))),flags:t}}matchRegex(e,t,i,n){if("string"!=typeof e||"string"!=typeof t)return!1;let o="ig";if(n){const{regex:i,flags:n}=Xs.cleanPattern(t);o=n||"g";try{return new RegExp(i,o).exec(e)||Xs.matchRelativeUrl(e,i,o)}catch(e){const n="Failed to create regex for the pattern: "+t+", the cleaned regex derived from the pattern is: "+i+" and regexFlag is: "+o;return $s.error(n),!1}}var s=function(i){return new RegExp(t,o).exec(e)||new RegExp(t,o).exec(i(e))||Xs.matchRelativeUrl(e,t,o,i)};let r=Js,a=!1;390187==window._vwo_acc_id&&(a=!0),a&&(r=zs);var d=s(r);return d&&!a?(r=Ks,i&&s(r)||d):d}matchRelativeUrl(e,t,i,n){if(0===e.indexOf("http"))return!1;const o=(new Bs).toAbsURL(e);var s=new RegExp(t,i).exec(o);return n&&!s&&(s=new RegExp(t,i).exec(n(o))),!!s}matchWildcard(e,t,i){if("string"!=typeof e||"string"!=typeof t)return!1;const n=new Bs;var o=n.isQueryParamPresent(t),s=n.isHashPresent(t),r=n.isQueryParamPresent(e),a=n.isHashPresent(e);o||(r&&a?e=e.replace(/^(.*?)(\?[^#]*)(#?.*)$/,"$1$3"):r&&!a&&(e=e.replace(/^(.*)(\?.*)$/,"$1"))),s||a&&(e=e.replace(/^(.*?)(#.*)$/,"$1")),"/"!==e&&(e=Xs.stripSlashes(e,r,a)),"/"!==t&&(t=Xs.stripSlashes(t,o,s));var d,l,c=new RegExp("^"+Xs.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi");return c.test(e)?(c=new RegExp("^"+Xs.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi"),!i||c.exec(e)):(e=Xs.removeWWW(e),t=Xs.removeWWW(t,!0),(c=new RegExp("^"+Xs.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi")).test(e)?(c=new RegExp("^"+Xs.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi"),!i||c.exec(e)):(d=Xs.cleanURL(t,!0),-1===t.indexOf("*")&&((l=Xs.removeWWW(n.toAbsURL(e)).replace(/\/$/,"").replace(/\/\?/,"?"))===t||l===d)||(e=Xs.cleanURL(e),t=d,!!(c=new RegExp("^"+Xs.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi")).test(e)&&(c=new RegExp("^"+Xs.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi"),!i||c.exec(e)))))}}const Qs=new qs;window.VWO.modules.vwoUtils.url=Qs,window.VWO._.matchRegex=Qs.matchRegex;class Zs{verifyUrl(e,t,i,n){let o=!1;const s=n?e:this.getCleanedUrl(e);if(t)if(n)o=!!Qs.matchRegex(s,t,null,n);else{const i=this.getCleanedUrl(e,!0);o=!(!Qs.matchRegex(s,t,null,n)&&!Qs.matchRegex(i,t,!0,n))}else o=Qs.matchWildcard(s,i)||Qs.matchWildcard(e,i);return o}getCleanedUrl(e,t){if(!e)return;let i;return-1!==e.search(/_vis_(test_id|hash|opt_(preview_combination|random))=[a-z\.\d,]+&?/)?(i=e.replace(/_vis_(test_id|hash|opt_(preview_combination|random))=[a-z\.\d,]+&?/g,""),i=t?i.replace(/(\??&?)$/,""):i.replace(/(\/?\??&?)$/,"")):i=t?e:e.replace(/\/$/,""),i}compareUrlWithIncludeExcludeRegex(e,t,i,n){const o={};return i&&Qs.matchRegex(e,i)?(o.didMatch=!1,o.reason=1,o):(o.didMatch=this.verifyUrl(e,t,n),o.reason=o.didMatch?2:3,o)}}const er=new Zs;class tr extends Zs{compareUrlWithIncludeExcludeRegex(e,t,n,o){return i(this,void 0,void 0,(function*(){return window.fetcher.getValue('VWO.modules.utils.urlUtils.compareUrlWithIncludeExcludeRegex("${{1}}", "${{2}}", "${{3}}", "${{4}}")',null,{captureGroups:[e,t,n,o]})}))}}const ir=new tr;window.VWO.modules.utils.urlUtils=ir;const nr={cb:"combi",gl:"goal",ex:"exclude",ud:"uuid",sp:"split"},or={},sr=(e,t=window.VWO._.cookies.setItem)=>{try{const i=e.currentUrl,n=new URL(i).searchParams.get(No.VWO_COOKIE_QUERY_PARAM);if(n){const e=(e,i)=>{or[e]||(t(e,i),or[e]=!0)},i=decodeURIComponent(n).split("|");for(const t of i){const[i,n]=t.split("="),[o,s,r]=i.split("_");if(nr[o]){const t=nr[o];if("uuid"===t)e(`_vwo_uuid_${s}`,n);else{const i=`_vis_opt_exp_${s}_${t}`;"goal"===t&&r?r.split(",").forEach((t=>{e(`${i}_${t}`,n)})):e(i,n)}}}}}catch(e){}};class rr extends ts{constructor(){super(...arguments),this.loadScriptLoadedScripts={},this.thirdPartyCookiesSuccess={},this.TPJarExpiry=730,this.urlCache={},this.additionalStyle=window._vwo_acc_id>742099||718480===window._vwo_acc_id?"-webkit-transform:none;-ms-transform:none;transform:none;":"",this.hideElExpression=`{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;${this.additionalStyle}}`,this.validateWithSkipEventPropAndSkipValidationIfTimer=function(e){return window.VWO.phoenix.validateTrigger(e,null,{skipEventProps:!0,skipValidationIfTimer:!0})}}isGloballyOptedOut(e){return!!parseInt(e.storages.storages.cookies.get(No.GLOBAL_OPT_OUT,!0),10)}getSettings(e,t){return i(this,void 0,void 0,(function*(){if(window._vis_debug||xo()||this.isBot2()||window.VWO._.selfHosted)return;const{dcdnUrl:i=""}=window._VWO||{},n=t.serverUrl;if(i){const e=window._vwo_code?4:5,o=new URLSearchParams(window.location.search).get("ma")?`&ma=${new URLSearchParams(window.location.search).get("ma")}`:"",s=`?a=${t.accountId}&settings_type=${e}${o}`,r=us((()=>window.VWO._.allSettings.dataStore.plugins)),a=window.VWO.sTs?`&ts=${window.VWO.sTs}`:"",d=`&dt=${us((()=>r.UA.dt))}&cc=${us((()=>r.GEO.cc))}`;return this.loadScriptWithFallback(`${n}${i.slice(1)}${s}${a}${d}`,`${n}settings.js${s}`)}const o=[],s=t.vwoInternalProperties.experimentIds,r=t.settings.campaigns;let a=!1;const d=t.pageGroupPageConfig,l=t.pageGroupExperimentConfig,c=[],u=[];for(const e in d)Object.hasOwnProperty.call(d,e)&&c.push(e);for(const e in l)Object.hasOwnProperty.call(l,e)&&u.push(e);const g=[];for(let e=0;e<s.length;e++)r[s[e]]?("ANALYZE_RECORDING"===r[s[e]].type&&(a=!0),o.push(s[e])):g.push(s[e]);let h=yield t.storages.storages.cookies.get("wgs_uuid");h=h||"";let v=n+"settings.js?a="+t.accountId+"&settings_type="+e+"&vn=&eventArch=1&uuid="+h;if(1==e&&window.VWO._.txtCfg&&(v+="&tS=1"),2!==e&&3!==e||(v=v+"&u="+encodeURIComponent(t.currentUrl)),u.length){v+="&ec="+u.join("|")}if(c.length){v+="&pc="+c.join("|")}if(a&&(v+="&rc=1"),t.smartCodeVersion>=1.4&&t.smartCodeVersion<2){let e;if(vn._.jar){const t=vn._.jar.getAll();e=t&&Object.keys(t).filter((function(e){return e.match(/(vis_opt_exp_\d*._combi+)/g)})).map((function(e){return(e+"="+t[e]).match(/([\d,]+)/g).join("-")})).join("|")}else e=window._vwo_code.getCombinationCookie&&this.getCombinationCookie();e&&(v+="&c="+e)}if(4!==e&&o.length){const e="&exc="+o.join("|");v.length+e.length<2e3&&(v+=e)}this.loadScript(v,this.firePageViewEvent,(()=>{}),{defer:!0})}))}firePageViewEvent(e={}){return i(this,void 0,void 0,(function*(){const t=window.VWO.phoenix,i=window.VWO.phoenix.store.getters;yield window.VWO._.session_init_complete,t.trigger(E.START_APPLY_CHANGES),Ts(t,E.PAGE_VIEW,{name:E.PAGE_VIEW,time:+new Date,props:{url:i.currentUrl}},(()=>{t.trigger(E.END_APPLY_CHANGES),t.trigger(E.AFTER_SAMPLING_TRIGGER),window.fetcher.getValue("VWO._.phoenixMT.trigger",[E.END_APPLY_CHANGES]),e.shouldFireDomLoad&&t.trigger(E.DOM_CONTENTLOADED)}))}))}fireAuxiliaryPageView(){if(window.VWO._.auxPageViewFired)return;window.VWO._.auxPageViewFired=!0;const e=window.VWO.phoenix,t=window.VWO.phoenix.store.getters;Ts(e,E.PAGE_VIEW,{name:E.PAGE_VIEW,time:+new Date,aux:!0,props:{url:t.currentUrl}})}doNotTrack(e){if(e.settings.vwoData.dntEnabled)return"yes"===e.navigator.doNotTrack||"1"==e.navigator.doNotTrack||"1"==e.navigator.msDoNotTrack||"1"==e.doNotTrack}_optOut(e,t){return Ls(e)?(t.trigger(E.OPT_OUT,{oldArgs:[!0]}),!0):(t.trigger(E.OPT_OUT,{oldArgs:[!1]}),!1)}setTPCJarValue(e,t,n,o,s,r,a){return i(this,void 0,void 0,(function*(){const i=e.storages.storages.cookies;yield i.setThirdPartyCookiesInJar(t,n,o,r),this.__vwoCookie=yield i.getThirdPartyJarValue(),this.dTP=this.dTP||ns((()=>window.VWO.phoenix.storages.get("cookies").createThirdParty.call(window.VWO.phoenix.storages.get("cookies"),"_vwo",this.__vwoCookie,this.TPJarExpiry,void 0,void 0,void 0,a)),50),this.__vwoCookie&&this.dTP()}))}setCampaignIds(e){return i(this,void 0,void 0,(function*(){this.otherSide('setCampaignIds("${{1}}", "${{2}}")',null,[e]);const{actions:t,getters:i}=vn.phoenix.store,n=i.vwoInternalProperties.experimentIds||[];e.forEach((e=>n.push(+e))),t.addValues({experimentIds:n},"vwoInternalProperties")}))}isCustomTrigger(e){var t;return null===(t=e.cnds)||void 0===t?void 0:t.some((function(e){var t;return"object"==typeof e&&null!==e&&(null===(t=e.filters)||void 0===t?void 0:t.some((function(e){return e instanceof Array&&e.indexOf("exec")>=0})))}))}addListener(e,t,i,n){if(!i||!Object.keys(i).length)return;let o;const s=i.eventName,r=i.triggerID,a=i.trigger;if(r){const t=e.currentSettings.triggers[r];o=t&&this.isCustomTrigger(t)?`trigger.${r}`:t}if(o=o||s||a,o){return[o,t.on(o,n)]}}extraData2(e){return i(this,void 0,void 0,(function*(){return this.otherSide('extraData2("${{1}}")',null,[e])}))}isBotScreen(){return i(this,void 0,void 0,(function*(){return this.otherSide("isBotScreen")}))}shouldTrackUserForCampaign(e){return"number"==typeof e&&(e=window._vwo_exp[e]),!e||!window._vwo_code||!window._vwo_code[go]&&!window._vwo_code[ho]||(this.isDomIndependentCampaign(e.type)||this.isSplitVariation(e))}createCookie(e,t,n,o,s){return i(this,void 0,void 0,(function*(){const i=(e=e||vn.phoenix.store.getters).storages.storages.cookies;this.shouldTrackUserForCampaign(s)&&(s&&s.multiple_domains?yield i.createThirdParty(t,n,o,void 0,s.id,void 0,s):i.create(t,n,o))}))}createUUIDCookie2(e,t){return i(this,void 0,void 0,(function*(){if(Ds.isVisitorOptedOut())return;e=e||window.VWO.phoenix.store.getters;const i=yield this.getUUID(e,t),n=t&&t.id&&t.multiple_domains?"_"+t.id:"";return(yield e.storages.storages.cookies.get("_vwo_uuid"+n))||(yield this.createCookie(e,"_vwo_uuid"+n,i,No.UUID_COOKIE_EXPIRY,t)),vn.data=vn.data||{},vn.data.vin=vn.data.vin||{},vn.data.vin.uuid=i,yield window.fetcher.setValue("VWO.data.vin",vn.data.vin),i}))}getUUID(e,t){e=e||vn.phoenix.store.getters,t=t||{},this.uuid=e.vwoUUID;const i=t&&t.id&&t.multiple_domains&&e.storages.storages.cookies.get("_vwo_uuid_"+t.id)||e.storages.storages.cookies.get("_vwo_uuid");return this.uuid=i||this.uuid||this.generateUUID(),this.uuid}getSplitDecision(e,t){return window._vis_debug||xo()?this.otherSide("getSplitDecision",[t]):e.storages.storages.cookies.get("_vis_opt_exp_"+t+"_split")}loadScript(e,t,i,n={allowReload:!1}){this.loadScriptLoadedScripts[e]?null==t||t():(n.allowReload||(this.loadScriptLoadedScripts[e]=1),window.fetcher.getValue('VWO.modules.utils.loadScript("${{1}}", "${{2}}", "${{3}}", "${{4}}")',null,{captureGroups:[e,t,i,n]}))}loadScriptWithFallback(e,t){this.loadScript(e,(()=>{this.loadScript(t,this.firePageViewEvent,(()=>{}),{defer:!0,allowReload:!0}),window.VWO._.customError&&window.VWO._.customError({msg:`settings.js type ${window._vwo_code?4:5} cdn request failed.`,url:window.location.href,uuid:window.VWO._.cookies.get("_vwo_uuid"),source:encodeURIComponent("settingsjs")})}),(()=>{}),{defer:!0,allowReload:!0})}checkForWrongConsent(e,t){return t&&"http:"===e.location.protocol}setThirdPartyCookiesForApplicableCamps(e){const t=(t,i)=>{const n="_vwo_uuid_"===t.substring(0,10)?No.UUID_COOKIE_EXPIRY:100;this.createCookie(e,t,i,n)};if(p(e.settings.crossDomain)&&!e.flags.cookieLessModeEnabled){const i=Object.keys(e.settings.crossDomain);for(let n=0;n<i.length;n++){const o=i[n];if(this.thirdPartyCookiesSuccess[o])continue;const s=e.settings.crossDomain[o];let r=Object.keys(s).length-1;for(;r>=0;){const e=s[r];t(e.name,e.value),r--}this.thirdPartyCookiesSuccess[o]=!0}}sr(e,t)}shouldExecuteLib({getters:e,actions:t,vwoEvents:n}){return i(this,void 0,void 0,(function*(){const{doCookiesMatter:i,areCookiesDisabled:o,shouldStopExecWhenSsmNotFound:s,isSSApp:r}=window.VWO._.envUtils;if(i){const i=this.checkForWrongConsent(e,r);if(i||s){e.vwoCode&&e.vwoCode.finish(),Ts(n,E.SHOULD_EXECUTE_LIB_ERROR,i?{message:"SameSite;Secure enabled but visitor landed on HTTP page and thus cookies can't be created",oldArgs:[void 0,void 0,void 0,void 0,void 0,void 0,1]}:{message:"Visitor has been to HTTPS page when SameSite and Secure cookies were dropped",oldArgs:[void 0,!0,void 0,void 0,void 0,void 0,2]});const o=[{shouldExecuteLib:!1,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,o,"vwoInternalProperties")}}if(this.isTrackingNotPossible){const e=[{shouldExecuteLib:!this.isTrackingNotPossible,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,e,"vwoInternalProperties")}if(!o){if(this.preview()||e.visDebug){const e=[{shouldExecuteLib:!0,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,e,"vwoInternalProperties")}if(this.doNotTrack(e)||this.isGloballyOptedOut(e)||this._optOut(e,n)){e.vwoCode&&e.vwoCode.finish(),Ts(n,E.SHOULD_EXECUTE_LIB_ERROR,{message:"User has opted out"}),this.isTrackingNotPossible=!0,t.addValues({optOut:!0},"vwoInternalProperties");const i=[{shouldExecuteLib:!1,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,i,"vwoInternalProperties")}const i=[{shouldExecuteLib:!0,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,i,"vwoInternalProperties")}t.addValues({cookiesDisabled:!0},"vwoInternalProperties"),m()||Ts(n,E.SHOULD_EXECUTE_LIB_ERROR,{message:"Cookies disabled",oldArgs:[void 0,o]}),this.isTrackingNotPossible=!0;return this.setPropertiesToBothThreads(t,[{shouldExecuteLib:!1,destinationMT:"VWO._.shouldExecuteLib"}],"vwoInternalProperties")}))}insertCSS(e,t){this.otherSide("insertCSS",[e,t])}unhideCampaignLevelStyle(e){window.fetcher.getValue("VWO.modules.utils.libUtils.removeCampaignLevelStyleTag",[e])}setXpathAndHideEl(e,t,n,o=!0){const s=this;let r,a,d="";const l=[e.id],c=this.isPersonalizeCampaign(e),u=e.sen;let{visibilityServiceCache:g}=window.VWO._;if(e.id)for(r=l.length;r--;){a=l[r],g=g||{};const h=g[a]&&g[a].xpath||{},v=g[a]&&g[a].cpath||{},p=Object.assign(h,v);let{selector:w,selectorPerVariation:E,cPathSelector:f,cPathSelectorPerVariation:_}=Object.keys(p).length>0?p:this.getCampaignXPath(e);if(w=w||n||"",f=f||"",_=_||{},w.split(",").forEach((function(e){performance.mark(`el-${e}-hidden`)})),e.xPath=w,f&&(e.cPath=f),window.VWO._.ac&&window.VWO._.ac.PRTHD||window.VWO._.preventHidingInSPA||!o)return;if(c&&Object.keys(E).forEach((function(n){return i(this,void 0,void 0,(function*(){const i=e.sections[1].triggers[n],o=t.currentSettings.triggers[i],r=e.sections[1].sen;if((!r||!s.doNotHideElements(r[n]))&&(yield s.validateWithSkipEventPropAndSkipValidationIfTimer(o))){let e="";E[n]&&(e=E[n]),_[n]&&(e+=(e.length>0?",":"")+_[n]),e.length>0&&(","===e[e.length-1]&&(e=e.substring(0,e.length-1)),e+=s.hideElExpression,s.insertCSS("_vis_opt_path_hides_"+a+"_"+n,e))}}))})),this.doNotHideElements(u))return;w&&(d=w),f&&(d+=(d.length>0?",":"")+f),d&&(d+=s.hideElExpression,this.insertCSS("_vis_opt_path_hides_"+a,d))}else d=t.vwoText||"",this.insertCSS("_vis_opt_path_hides",d)}setPropertiesToBothThreads(e,t,i){let n={};t.forEach((e=>{const t=Object.keys(e)[0],i=e[t];n=Object.assign(Object.assign({},n),{[t]:i}),window.fetcher.setValue(e.destinationMT,i)})),e.addValues(n,i)}checkAndInitializeClickClass(){if(!window.VWO.isVwoClickClassInitialized){const e=window.VWO._.allSettings.dataStore.campaigns;let t=!1;const i=["ANALYZE_HEATMAP","ANALYZE_RECORDING"];for(const n in e)if(e[n].clickmap||i.includes(e[n].type)){t=!0;break}if(t){const e=window.VWO.modules.phoenixPlugins.events.predefinedEvents;window.VWO.phoenix.events.add(new e.ClickDomEvent)}}}areSettingsCached(){return!1}setFlagForCachingIfEnabled(e,t){try{const e=window.VWO._.allSettings.dataStore.plugins.DACDNCONFIG,i=((null==e?void 0:e.SCC)&&JSON.parse(e.SCC),[{isSettingsCachingEnabled:!1,destinationMT:"VWO._.isSettingsCachingEnabled"}]);this.setPropertiesToBothThreads(t,i,"vwoInternalProperties")}catch(e){}}addListenerForSessionInitComplete(){vn._.session_init_complete=new Promise((e=>{const t=window.VWO.phoenix.on(E.SESSION_INIT_COMPLETE,(()=>{window.VWO.phoenix.off(E.SESSION_INIT_COMPLETE,t),e()}))}))}isCurrentURLSplitVariation({chosenVariation:e,getters:t,campaignData:i}){if("SPLIT_URL"!==i.type)return!1;let n="";const o=ir.getCleanedUrl(t.currentUrl),s=this.urlCache[i.id]=this.urlCache[i.id]||{},r=s[o]||s[t.currentUrl];if(void 0!==r)return r;let a=!1,d=t.currentUrl;const l=i.sections;return l[1].variationsRegex?(n=l[1].variationsRegex[e],a=ir.verifyUrl(t.currentUrl,n,null)):(n=l[1].variations[e],a=Qs.matchWildcard(o,n),d=o),s[d]=!!a}variationShownCallback(e){var t;const{id:i,variation:n}=e,o=window.VWO.phoenix;switch(null===(t=window._vwo_exp[i])||void 0===t?void 0:t.type){case"VISUAL_AB":case"VISUAL":o.trigger(E.VARIATION_SHOWN_SENT,{oldArgs:[""+i,n]});break;case"SPLIT_URL":1==n&&o.trigger(E.VARIATION_SHOWN_SENT,{oldArgs:[""+i,n]})}}}const ar=new rr;var dr;window.VWO.modules.utils.libUtils=ar,function(e){e.ANALYSIS="r",e.ANALYZE_FORM="a",e.ANALYZE_HEATMAP="a",e.ANALYZE_RECORDING="a",e.FUNNEL="t",e.SURVEY="s",e.TRACK="t",e.INSIGHTS_FUNNEL="t",e.INSIGHTS_METRIC="t"}(dr||(dr={}));const lr=function(e,t){let i=0;for(let t=e.length-1;t>=0;t--)i+=e.charCodeAt(t);let n=i+t;for(let e=0;e<19;e++)n=(9301*n+49297)%233280;return n/233280},cr=function(e,t){return e/(t/100)},ur={getRandom:function(e,t){return window.VWO._.allSettings.dataStore.CIF?lr(e,t):Math.random()},getRandomForVariation:function(e,t){return e&&t&&window.VWO._.allSettings.dataStore.CIF?cr(e,t):Math.random()}},gr=()=>window._vwoCc||{},hr=e=>{const t=gr();return t.SPA_SPLIT=t.SPA_SPLIT||{},!(!t.SPA_SPLIT[e]&&!t.SPA_SPLIT["*"])},vr=(()=>{const e=gr().debugConfig||{};return{CLICK_DEBUG:e.CLICK_DEBUG,TIMEOUT_DEBUG:e.TIMEOUT_DEBUG,GA_DEBUG:e.GA_DEBUG,URL_DEBUG:e.URL_DEBUG,VARIATION_SHOWN_DEBUG:e.VARIATION_SHOWN_DEBUG}})(),pr=()=>gr().syncServerUrl;class wr extends bo{constructor(){super(...arguments),this.campaignsInternalMap=window.VWO._.campaignsInternalMap={}}markGoalTriggered(e,t,n){var o,s;return i(this,void 0,void 0,(function*(){if("TRACK"===e.type)yield null===(s=(o=window.tracklib).markGoalTriggered)||void 0===s?void 0:s.call(o,e.id,t);else{let i=n.storages.storages.cookies.get("_vis_opt_exp_"+e.id+"_goal_"+t);if(e.mE){const t=n.storages.storages.cookies.get("_vis_opt_exp_"+e.id+"_combi");i=this.updateGoalCookieValueForExperience(i,t)}else e.goals[t].mca&&i&&(i=+i+1);yield ar.createCookie(n,"_vis_opt_exp_"+e.id+"_goal_"+t,String(null!=i?i:1),100,e)}}))}isGoalTriggered(e,t,n){var o,s;return i(this,void 0,void 0,(function*(){if("TRACK"===e.type){return!(yield null===(s=(o=window.tracklib).shouldTriggerGoal)||void 0===s?void 0:s.call(o,e.id,t))}if(e.goals[t].mca)return null;const i=n.storages.storages.cookies.get("_vis_opt_exp_"+e.id+"_goal_"+t);if(e.mE){const t=n.storages.storages.cookies.get("_vis_opt_exp_"+e.id+"_combi");return this.isGoalTriggeredForExperience(i,t)}return i}))}clearTimeouts(e){return i(this,void 0,void 0,(function*(){yield this.otherSide("clearTimeoutsHandler",[e]),delete e.timeout}))}clearTimerAfterTimeout(e,t){return i(this,void 0,void 0,(function*(){clearTimeout(e[mo]),e[mo]=setTimeout((()=>{this.clearTimeouts(e)}),(yield t.vwoInternalProperties.SPA_ELEMENT_WAIT_TIMEOUT)||2e3)}))}getTrackGoalIdFromExp(e,t){return Xn(t.settings.campaigns[e].goals)[0]}isExcluded(e,t){const i=window.tracklib,n=window.VWO._.insightsUtils;return"TRACK"===t.type?i.isGoalExcluded(this.getTrackGoalIdFromExp(t.id,e)):"FUNNEL"===t.type?i.isFunnelExcluded(t.id):"INSIGHTS_FUNNEL"===t.type?n.isFunnelExcluded(t.id):ar.isAnalyzeCampaign(t.type)?i.isAnalyzeCampaignExcluded(t.id):!!e.storages.storages.cookies.get("_vis_opt_exp_"+t.id+"_exclude")}getCombi(e,t,n){return i(this,void 0,void 0,(function*(){e=e||vn.phoenix.store.getters;const i=window.tracklib,o=window.VWO._.insightsUtils;if("TRACK"===t.type)return(null==i?void 0:i.isGoalIncluded)?yield i.isGoalIncluded(this.getTrackGoalIdFromExp(t.id,e)):void(n||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["track.delayedGoalConversion",{campaignId:t.id,type:"TRACK",goalId:this.getTrackGoalIdFromExp(t.id,e)}]]})));if("FUNNEL"===t.type)return(null==i?void 0:i.isFunnelIncluded)?yield i.isFunnelIncluded(t.id):void(n||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["track.delayedGoalConversion",{campaignId:t.id,type:"FUNNEL"}]]})));if("INSIGHTS_FUNNEL"===t.type)return yield o.isFunnelIncluded(t.id);if(ar.hasInsightsMetric(t.type)){if(t.ready)return window.VWO._.insightsUtils.isVisBucketedForTrack()}else if(null==ar?void 0:ar.isAnalyzeCampaign(t.type))return i.isAnalyzeCampaignIncluded?yield i.isAnalyzeCampaignIncluded(t.id):void(n||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["track.delayedGoalConversion",{campaignId:t.id,type:t.type}]]})));return this.getCombiCookie(e,t.id)}))}getCombiCookie(e,t){return i(this,void 0,void 0,(function*(){return(e.visDebug||xo())&&(yield window.VWO._.previewDebuggerBooted),e.storages.storages.cookies.get("_vis_opt_exp_"+t+"_combi")}))}getCombiCookieFromMT(e){return this.otherSide("getCombiCookie",[e])}exclude(e,t){return i(this,void 0,void 0,(function*(){if("INSIGHTS_METRIC"===t.type)return;const i=window.tracklib,n=window.VWO._.insightsUtils;"TRACK"===t.type?yield i.excludeGoal(this.getTrackGoalIdFromExp(t.id,e)):"FUNNEL"===t.type?yield i.excludeFunnel(t.id):"INSIGHTS_FUNNEL"===t.type?yield n.excludeFunnel(t.id):ar.isAnalyzeCampaign(t.type)?yield i.excludeAnalyzeCampaign(t.id):yield ar.createCookie(e,"_vis_opt_exp_"+t.id+"_exclude","1",100,t)}))}include(e,t,n,o){return i(this,void 0,void 0,(function*(){if("INSIGHTS_METRIC"===o.type)return;let i=!1;const s=window.tracklib,r=window.VWO._.insightsUtils;return"TRACK"===o.type?yield s.includeGoal(this.getTrackGoalIdFromExp(o.id,e)):"FUNNEL"===o.type?yield s.includeFunnel(t):"INSIGHTS_FUNNEL"===o.type?yield r.includeFunnel(t):ar.isAnalyzeCampaign(o.type)?yield s.includeAnalyzeCampaign(t):(yield ar.createCookie(e,"_vis_opt_exp_"+t+"_combi",n,100,o),i=!0),{isCookieCreated:i}}))}isLogged(e,t,i){if(i||!window.VWO._.allSettings.dataStore.campaigns[t].mE)return e.storages.storages.cookies.get("_vis_opt_exp_"+t+"_combi_choose")}isBucketed(e,t,n){return i(this,void 0,void 0,(function*(){return!!(yield this.getCombi(e,t,n))}))}shouldBucket(e,t){return i(this,void 0,void 0,(function*(){const i=t.type,n=window.tracklib,o=void 0!==vn.data.pc[dr[i]],s=window.VWO._.insightsUtils;let r,a=t.pc_traffic;if(a=void 0===a?100:a,!a)return!1;this.campaignsInternalMap[t.id]&&this.campaignsInternalMap[t.id].r?r=this.campaignsInternalMap[t.id].r:(this.campaignsInternalMap[t.id]={},r=this.campaignsInternalMap[t.id].r=ur.getRandom(e.vwoUUID,t.id));const d=ar.isSessionBasedCampaign2(t)?yield vn._.sessionInfoService.getPcTraffic():100*r;let l=n.isFeatureBucketed&&Number(yield n.isFeatureBucketed(dr[i]));return ar.hasInsightsMetric(i)&&(l=Number(yield s.isVisBucketedForTrack())),(!o||l)&&d<=a}))}chooseCombination(e,t,n){var o,s,r;return i(this,void 0,void 0,(function*(){let i;if(Ds.isVisitorOptedOut())return;const a=t&&t.id&&(t.combination_chosen||t.cc);if(t&&ar.isPersonalizeCampaign(t)){if(a&&"0"!==a&&!t.debug)return a}else if(a&&"0"!==a)return a;if(window.chooseCombinationPersonalisation&&window.vwoPersonalisationCampaigns&&window.vwoPersonalisationCampaigns.indexOf&&-1!==window.vwoPersonalisationCampaigns.indexOf(+t.id)&&(i=window.chooseCombinationPersonalisation(t.id),0!=i)){return""+(parseInt(i.split(":")[1],10)+1)}const d=!!window.VWO._.allSettings.dataStore.CIF,l=n&&n.scaleInfo||t.combs,c={},u={};let g,h,v,p=ur.getRandomForVariation(null===(o=this.campaignsInternalMap[null==t?void 0:t.id])||void 0===o?void 0:o.r,null==t?void 0:t.pc_traffic),w=d?Xn(l).sort():Xn(l),E=w.length,f=0,_=!1,m=!1;for(pr()&&ar.isPersonalizeCampaign(t)&&(yield window.VWO._.syncEventsCallCompleted),v=0;v<E;v++){i=w[v];const o=n?i:t.id;if(h=e.settings.campaigns[o].type,!isNaN(parseFloat(l[i]))&&0!=l[i])if("VISUAL_AB"===h||"SPLIT_URL"===h){g=n?n.segmentInfo:t.sections[1].triggers;const o=g[i];0===g.length||!1===(null===(s=e.currentSettings.triggers[o])||void 0===s?void 0:s.cnds[0])?(m=!0,u[i]=l[i]):(n?yield window.VWO.phoenix.validateTrigger(e.currentSettings.triggers[g[i]],null,{skipEventProps:!0,skipValidationIfTimer:!0}):!pr()&&e.triggers[o]&&"boolean"==typeof e.triggers[o].state?e.triggers[o].state:yield window.VWO.phoenix.validateTrigger(e.currentSettings.triggers[o],pr()?{useUnsavedEvents:!0}:null))&&(1!=g[i]&&(_=!0),c[i]=f+l[i],f+=l[i])}else c[i]=f+l[i],f+=l[i]}if(!_&&m)for(w=Xn(u),E=w.length,v=0;v<E;v++)i=w[v],c[i]=f+u[i],f+=u[i];let O=-1;const S=null===(r=null==t?void 0:t.sections[1])||void 0===r?void 0:r.priority;if(S)for(E=S.length,v=0;v<E;v++)if(c[S[v]]){O=v;break}if(O>=0)return S[O]+"";for(0<f&&1!==f&&(p*=f),w=d?Xn(c).sort():Xn(c),E=w.length,v=0;v<E;v++)if(i=w[v],!isNaN(parseFloat(l[i]))&&p<=c[i])return i}))}getGroupBasedCampaigns({getters:e}){var t,i;let n=[],o=null===(i=null===(t=e.settings.vwoData)||void 0===t?void 0:t.gC)||void 0===i?void 0:i.map((e=>e.c));o=o||[];for(const e of o)n=n.concat(e);return n.map((e=>""+e))}firePatternMatchingEvent(e,t,i,n,o,s){1===i?e.trigger(E.EXCLUDE_URL,{oldArgs:[t]}):e.trigger(E.MATCH_WILDCARD,{oldArgs:[t,n,o,s]})}doExperimentHere(e,t,i,n={}){let o;if(t.pg_config){const n=t.pg_config[0];o=i.pageGroup.validatePage(n,null,e.currentUrl)}else o=er.compareUrlWithIncludeExcludeRegex(e.currentUrl,n.urlRegex||t.urlRegex,n.excludeUrl||t.exclude_url,n.urlPattern||t.url_pattern);return[o.didMatch,o.reason]}checkForVariationTargeting(e){const t=e.sections[1].triggers;return!(!t||0===t.length)}executeCampaignJS(e,t){const i=e.id,n=e.combination_chosen||e.cc,o=`${t}Executed`;if(e.globalCode[t]&&!e.globalCode[o])try{window.VWO.phoenix.settings.currentSettings.tags[e.globalCode[t]].fn(i,n),e.globalCode[o]=!0}catch(e){}}}const Er=new wr;window.VWO.modules.utils.campaignUtils=Er;class fr{otherSide(...e){e[0]="VWO.modules.tags.checkEnvironment.utils."+e[0],window.fetcher.getValue(...e)}}class _r extends fr{checkCookieJarMismatch({getters:e,vwoEvents:t}){const i=e.storages.storages,n=i.localStorageService,o=i.cookies;let s;!(s=o.get(No.COOKIE_JAR,!0))&&!(s=n.get(No.COOKIE_JAR))||e.vwoInternalProperties.jar||(o.create(No.COOKIE_JAR,s,!1),n.remove(No.COOKIE_JAR),t.trigger(E.ERROR,{error:`_vwo(value = ${s}) cookie found but Cookie jar is not created. Deleting it.`}))}checkForTimeout({getters:e,actions:t,vwoEvents:i}){if(e.vwoCode&&window.vwoCodeEndBeforeVA&&!e.vwoCode[ho]){i.trigger(E.SHOULD_EXECUTE_LIB_ERROR,{message:"SSM cookie found",oldArgs:[null,void 0,void 0,void 0,!0]});const e=[{[go]:1,destinationMT:"window._vwo_code.lT"}];ar.setPropertiesToBothThreads(t,e,"vwoCode")}}addDomListenerForSettings(e){this.otherSide('addDomReadyListener("${{1}}")',null,{captureGroups:[()=>{e.trigger(E.NATIVE_DOM_CONTENT_LOADED)}]})}addDomListenerForTimeout(e){this.otherSide('addDomReadyListener("${{1}}")',null,{captureGroups:[function(){window.VWO.phoenix.store.getters.vwoInternalProperties.willRedirectionOccur||window.fetcher.getValue("window._removeVwoGlobalStyle");for(const t in window.VWO.phoenix.store.getters.settings.campaigns){const i=window.VWO.phoenix.store.getters.settings.campaigns[t];i&&"object"==typeof i&&(i.dontKillTimer?Er.clearTimerAfterTimeout(i,e):setTimeout((()=>{Er.clearTimeouts(i)}),500))}window.VWO._.coreLib.finished=1,window.vwo_libExecuted=!0,window.fetcher.setValue("vwo_libExecuted",!0)}]})}}var mr=new _r;class Or{migrateCookiesToSSM({getters:e}){const t=Vo(),i=e.storages.storages.cookies,n=i.getAll();if(e.vwoInternalProperties.ss&&!n[No.SAME_SITE]){for(const e in n)e!==Io+No.UUID_V2&&(e.indexOf(Co)>=0||e.indexOf(Io)>=0)&&(Object.prototype.hasOwnProperty.call(t,e)?i.create(e,decodeURIComponent(n[e]),t[e],void 0,void 0,!0):i.create(e,decodeURIComponent(n[e]),No.DEFAULT_EXPIRY,void 0,void 0,!0));i.create(No.SAME_SITE,1,t[No.SAME_SITE],void 0,void 0,!0)}}unhideIfNoCampaignsRunning({getters:e}){const t=e.settings.campaigns;0!==Object.keys(t).length||t.constructor}mergeThirdPartyCookiesInFirstPartyJar({getters:e,vwoEvents:t}){e.settings.vwoData.tpc&&e.settings.vwoData.tpc._vwo&&(e.vwoInternalProperties.jar?e.storages.storages.cookies.mergeInFPJar():t.trigger(E.ERROR,{data:`TPC._vwo (value = ${e.settings.vwoData.tpc._vwo}) value found but cookie jar not available. Value of CJ is ${e.settings.vwoData.cj}.`}))}setListenerForCustomAndDomEvents({vwoEvents:e,getters:t,data:i,actions:n}){ar.addListener(t,e,{eventName:"*"},((o,s)=>{o.name=o.name||s,ys({vwoEvents:e,getters:t,data:i,actions:n,event:o},s)}))}updateGlobalOptOutCookie(e,t){const i=e.storages.storages.cookies;t?i._create(No.GLOBAL_OPT_OUT,1,No.DEFAULT_EXPIRY):i.erase(No.GLOBAL_OPT_OUT)}}var Sr=new Or;function yr({event:e,data:t,getters:i,actions:n,vwoEvents:o}){if(is(!1,(function(){o.trigger("hashchange")})),Ds.shouldWeTrackVisitor()){const e=i.storages.get("cookies");if(!e.get("_vis_opt_test_cookie")){const t=e.get("_vis_opt_s");t?e.create("_vis_opt_s",parseInt(t.split("|")[0],10)+1+"|",100):e.create("_vis_opt_s","1|",100)}e.create("_vis_opt_test_cookie",1)}Sr.migrateCookiesToSSM({event:e,data:t,getters:i,actions:n,vwoEvents:o}),Sr.unhideIfNoCampaignsRunning({event:e,data:t,getters:i,actions:n,vwoEvents:o}),Sr.mergeThirdPartyCookiesInFirstPartyJar({event:e,data:t,getters:i,actions:n,vwoEvents:o}),Sr.setListenerForCustomAndDomEvents({event:e,data:t,getters:i,actions:n,vwoEvents:o});const s=Object.keys(i.settings.campaigns);ar.setCampaignIds(s);ar.setPropertiesToBothThreads(n,[{willRedirectionOccur:!1,destinationMT:"VWO._.willRedirectionOccur"}],"vwoInternalProperties"),n.addValues({waitingForThirdPartySync:!1},"vwoInternalProperties"),i.vwoCode&&ar.setFlagForCachingIfEnabled(i,n)}class Tr{otherSide(...e){return e[0]="VWO.modules.tags.setSession."+e[0],window.fetcher.getValue(...e)}}class Cr{otherSide(...e){return e[0]="VWO.modules.tags.sessionInfoService."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}}let Ir;Cr.LOCAL_STORAGE_SESSION_EXPIRY=30,Cr.LOCAL_STORAGE_NAME=window._vis_debug?"debug_vwoSn":"vwoSn",Cr.ACCOUNT_ID=window._vwo_acc_id;class Nr extends Cr{constructor(e,t){super(),Ir=this,this.visitorInformation=window.VWO.data.vi=window.VWO.data.vi||{},ar.addListener(e,t,{eventName:E.NEW_SESSION},(function(){return i(this,void 0,void 0,(function*(){yield Ir.otherSide("eraseSessionCookie()",null,[])}))})),ar.addListener(e,t,{eventName:E.REDIRECT_DECISION},(function(t){return i(this,void 0,void 0,(function*(){const i=e.allSettings.dataStore.campaigns[t.oldArgs[1]];ar.isSessionBasedCampaign2(i)&&(yield Ir.otherSide("markPageIdSessionExpiry()"))}))}))}getSessionId(){return this.otherSide("getSessionId()")}shouldSendSessionInfoInCall(){return!0}setSNCookieValueByIndex2(e,t){return this.otherSide("setSNCookieValueByIndex2",[e,t])}getPcTraffic(){return this.otherSide("getPcTraffic()")}setPageIdValue(e){window.phoenix.store.actions.addValues({pageId:e},"vwoInternalProperties"),window.phoenix.store.actions.addValues({pageViewCount:e},"root")}}class Ar extends Tr{execute({getters:e,actions:t,vwoEvents:i}){let n;window.VWO.modules.tags.sessionInfoService?n=window.VWO.modules.tags.sessionInfoService:(n=new Nr(e,i),window.VWO.modules.tags.sessionInfoService=n,t.addValues({sessionInfoService:n},"vwoInternalProperties"))}}const Vr=new Ar,br=Vr.execute.bind(Vr);window.VWO.modules.tags.setSession=br;const Rr=window.performance||window.workerThread.performance,Pr={mark:(e="")=>{e="vwo-"+e,Rr.mark&&Rr.mark(e)},measure:(e,t,i)=>{t="vwo-"+t,i="vwo-"+i;try{Rr.measure&&Rr.measure(e,t,i)}catch(e){$s.debug(e)}}};class xr{}class Dr extends xr{shouldFetchTestingCampaigns(e,t){return 1!=e||!t.vwoInternalProperties.disableAutofetchSettings}fetchSettings(e,t,i){this.shouldFetchTestingCampaigns(e,t)&&Wo((()=>{this.shouldFetchTestingCampaigns(e,t)&&ar.getSettings(e,t)}),+i||0)()}fetchSettingsBasedOnCode(e){const{isSettingsCachingEnabled:t}=window.VWO._,{vwoCode:i,vwoInternalProperties:{SPA_SETTINGS_DELAY:n,SPA_NEW_PAGE_SETTINGS_DELAY:o}}=e,s=i?t?4:1:2,r=i?n:o;this.fetchSettings(s,e,r)}execute({getters:e},t=!1){if(ar.areSettingsCached())return;if(e.visDebug||xo()||!e.vwoInternalProperties.isSpaEnabled)return;if(!!us((()=>window._VWO.dcdnUrl)))return window.VWO.phoenix.on(E.NATIVE_DOM_CONTENT_LOADED,(()=>this.fetchSettingsBasedOnCode(e)));this.fetchSettingsBasedOnCode(e)}}const Lr=new Dr,Ur=Lr.execute.bind(Lr);class Wr extends uo{constructor(){super(...arguments),this.checkEnvironmentInitialized=!1}execute({event:e,data:t,getters:n,actions:o,vwoEvents:s}){return i(this,void 0,void 0,(function*(){if(!this.checkEnvironmentInitialized)if(this.checkEnvironmentInitialized=!0,br({event:e,data:t,getters:n,actions:o,vwoEvents:s}),yr({event:e,data:t,getters:n,actions:o,vwoEvents:s}),ar.shouldExecuteLib({event:e,data:t,getters:n,actions:o,vwoEvents:s}),mr.checkCookieJarMismatch({event:e,data:t,getters:n,actions:o,vwoEvents:s}),mr.checkForTimeout({event:e,data:t,getters:n,actions:o,vwoEvents:s}),mr.addDomListenerForTimeout(n),us((()=>window._vwo_code.sT||window._vwo_code.lT))&&us((()=>window._vwoCc.debugConfig.TIMEOUT_DEBUG))&&us((()=>window.fetcher.getValue("window.VWO.modules.utils.libUtils.sendErrorLogsInCaseOfTimeout"))),n.vwoInternalProperties.shouldExecuteLib){if(ar.setThirdPartyCookiesForApplicableCamps(n),window._vis_debug||window._vis_heatmap){const e=n.vwoInternalProperties.experimentIds,t=Do(e);yield s.trigger(E.CAMPAIGN_FLOW_START,{oldArgs:[t]})}s.on(E.RUN_REVERT_TAGS,(()=>{window.fetcher.getValue("window.VWO._.phoenixMT.trigger",[E.RUN_REVERT_TAGS])})),Pr.mark("event-"+E.PAGE_VIEW),yield ar.firePageViewEvent(),Ur({event:e,data:t,getters:n,actions:o,vwoEvents:s});new URLSearchParams(window.location.search).has("dcdnUrl")&&(window._VWO.dcdnUrl="/dcdn/settings.js",window.fetcher.setValue("window._VWO.dcdnUrl",[window._VWO.dcdnUrl]));!!us((()=>window._VWO.dcdnUrl))&&mr.addDomListenerForSettings(s),s.trigger(E.UPDATE_SETTINGS_CALL)}else window.fetcher.getValue("window._removeVwoGlobalStyle")}))}}const kr=new Wr,Mr=kr.execute.bind(kr);window.VWO.modules.tags.checkEnvironment.fn=kr;const Gr=function(...e){return e[0]="VWO.modules.tags.visibilityService."+e[0],window.fetcher.getValue(...e)};let Fr=!1;function jr({getters:e,vwoEvents:t}){Fr||(ar.addListener(e,t,{eventName:E.UNHIDE_ELEMENT},(function(e){const{ruleName:t,campaignData:i,variation:n,rulesArr:o}=e;let s;i&&(s={id:i.id,variation:n}),window.fetcher.getValue("VWO.modules.utils.libUtils.delCSSWrapper",[{ruleName:t,campaignData:s,rulesArr:o}])})),Fr=!0)}function Hr({vwoEvents:e},t){var i,n,o,s,r,a,d,l,c=Xn(t.sections),u=c.length,g=t.type;if("VISUAL_AB"===g)for(;u--;)if(i=c[u],(n=t.sections[i]).variations)for(s=(o=Xn(n.variations)).length,e.trigger(E.UNHIDE_SECTION,{id:t.id,key:i},i);s--;)if(r=o[s],d=n.variations[r],n.variations[r]=d="string"==typeof d?d&&vwo_$.parseJSON(d):d,d)for(a=d.length,e.trigger(E.UNHIDE_VARIATION,{id:t.id,key:i});a--;){const i={ruleName:"",campaignData:t,rulesArr:[]};l=d[a].xpath,d[a].cpath?i.rulesArr=[l,d[a].cpath]:i.ruleName=l,Is.unhideElement(e,i)}else e.trigger(E.UNHIDE_VARIATION,{id:t.id,key:i},i);else e.trigger(E.UNHIDE_SECTION,{id:t.id,key:i});else if("VISUAL"===g)for(;u--;)i=c[u],l=t.sections[i].path,Is.unhideElement(e,{ruleName:l,campaignData:t});else"SPLIT_URL"===g&&Is.unhideElement(e,{ruleName:"*",campaignData:t})}function $r({event:e,data:t,getters:i,actions:n,vwoEvents:o},s){const r=[],a=i.settings.campaigns;for(const d in a){const l=a[d],c=l.sen,u=l.sections[1],g=u.sen;if(Object.prototype.hasOwnProperty.call(a,d)){if(c&&!ar.doNotHideElements(c)){const l=ar.addListener(i,o,{triggerID:c},(()=>{Hr({event:e,data:t,getters:i,actions:n,vwoEvents:o},a[d]),o.trigger(E.CHECK_SEGMENTATION,s)}));l&&r.push(l)}if(g){const e=u.variations;for(const t in e){const n=e[t],s=g[t];n&&!ar.doNotHideElements(s)&&ar.addListener(i,o,{triggerID:s},(()=>{for(const e of n){const i=e.xpath,n={ruleName:"",campaignData:l,variation:t};e.cpath?n.rulesArr=[i,e.cpath]:n.ruleName=i,o.trigger(E.UNHIDE_ELEMENT,n)}}))}}}}return r}function Br({vwoEvents:e},t,i){return t.forEach((t=>{e.off.apply(t)})),Gr("unhideElementsAfterTimer",[i])}class Jr{modifyTriggerConditions(e,t){const i=[];return Array.isArray(e)?(e.forEach((e=>{if(Array.isArray(e))i.push(this.modifyTriggerConditions(e,t));else{const n=t(e);i.push(n)}})),i):e}getExitTrigger(e){for(let t=0;t<e.length;t++){if(Array.isArray(e[t])){const i=this.getExitTrigger(e[t]);if(i)return i}if("object"==typeof e[t]&&null!==e[t]&&e[t].exitTrigger)return e[t].exitTrigger}}}var Kr=new Jr;let zr=[];const Yr={state:{}};function Xr({getters:e,vwoEvents:t,campaignData:i}){if(ar.isDomDependent(i.type)&&"VISUAL"!==i.type&&Er.getCombi(e,i))return t.trigger(E.CAMPAIGN_UNLOADED,{expId:i.id})}function qr({getters:e,expId:t,combination:i}){try{const n=window._vwo_exp[t];if(!ar.isDomDependent(n.type)||"VISUAL"===n.type)return;const o=n.sections[1].variations[i],s=t=>!(!e.triggers[t]||!e.triggers[t].state);for(let e=0;e<o.length;e++){const t=o[e].t;t&&(Yr.state[t]=s(t))}window.fetcher.getValue('window.VWO.modules.utils.tagExecutor.updateTriggerStates("${{1}}")',null,{captureGroups:[Yr.state]})}catch(e){}}function Qr(){zr.forEach((e=>e())),zr=[]}function Zr(e){window.VWO.phoenix.trigger(E.TAG_EVALUATED,{tG:{[e]:!0}})}function ea(e,t,{isWaitForElementEvent:i,campId:n,preventCallBackRemovalOnSpa:o,isCampUnloadEvent:s}){const r=window.VWO.phoenix,a=window.VWO.phoenix.store.getters,d=`trigger.${e}`;if(l=e,a.triggers[l]&&a.triggers[l].state&&!s)return t(d);var l;r.on(d,(function(){try{t(d)}catch(e){window.VWO&&window.VWO._&&window.VWO._.customError&&window.VWO._.customError({msg:`Error occurred while executing "${d}" trigger`,url:"triggerBasedTagExecutorWT.ts",lineno:93,colno:10,source:e})}r.removeEvent(d)})),o||zr.push((function(){r.removeEvent(d)})),i&&r.trigger(E.HTML_ELEMENT_LOADED,{expId:n})}window.VWO.modules.utils.tagExecutor={attachTriggerListenersForTagExecution:ea,fireTagEvaluatedEvent:Zr};const ta=function(e){return window.VWO.phoenix.validateTrigger(e,null,{skipEventProps:!0,skipValidationIfTimer:!0})},ia=function(e){return window.VWO.phoenix.validateTrigger(e,null,{skipEventProps:!0})},na=function({event:e,data:t,getters:n,actions:o,vwoEvents:s}){return i(this,void 0,void 0,(function*(){if(n.vwoCode&&(n.vwoCode[go]||n.vwoCode[ho]))return s.trigger(E.VISIBILITY_TRIGGERED),void s.trigger(E.NOT_REDIRECTING);const r=[],{visibilityServiceCache:a}=window.VWO._;if(window.VWO._.auxPageViewFired)return;const d=n.settings.campaigns;let l=!1;const c={hideElementsTriggered:!1,segmentCndsSatisfied:void 0},u=[],g=Er.getGroupBasedCampaigns({event:e,data:t,getters:n,actions:o,vwoEvents:s});yield Promise.all(Object.keys(d).map((t=>i(this,void 0,void 0,(function*(){var i,h,v,p,w,f;const _=d[t],m=d[t].type;if("FUNNEL"===m||_.ready)return;const O=null===(i=_.triggers)||void 0===i?void 0:i[0],S=O&&s.settings.currentSettings.triggers[O];let y;const T="SPLIT_URL"===m,C="SURVEY"===m,I=null!==(v=null===(h=null==a?void 0:a[t])||void 0===h?void 0:h.dEH)&&void 0!==v?v:null!==(f=null===(w=null===(p=e)||void 0===p?void 0:p._vwo)||void 0===w?void 0:w.doExperimentHere)&&void 0!==f?f:Er.doExperimentHere(n,_,s)[0],N=yield us((()=>Er.getCombiCookie(n,+t)));if(_.exec=!!N,C&&I&&!window.VWO._.allSettings.dataStore.previewExtraSettings&&(window.VWO.phoenix.trigger(E.LOAD_SURVEY_LIB),window.fetcher.setValue("window.VWO._.shouldLoadSurveyLib",!0)),T&&I&&(l=!0,S&&(y=yield ia(S))&&u.push(t)),!I)return(xo()||window._vis_debug)&&S&&((null!=y?y:yield ta(S))||(c.segmentCndsSatisfied=!1,s.trigger(E.CHECK_SEGMENTATION,c))),Xr({getters:n,vwoEvents:s,campaignData:_}),void(_.isApplicable=0);r.push(t);const A=-1===g.indexOf(t)||g.indexOf(t)>=0&&_.shouldHideElement,V=hr(t),b=T&&!V?window.VWO._.bodyPath:void 0,R=S&&(null!=y?y:yield ta(S)),P=A&&!_.manual;if(R&&P&&(_.isApplicable=1),!_.eHIR&&_.cA&&_.isApplicable)return;if(R){if(c.segmentCndsSatisfied=!0,P?("DEPLOY"===_.type&&(_.orgType=_.type,_.type="VISUAL_AB"),ar.setXpathAndHideEl(_,n,b),T||(s.trigger(E.HIDE_ELEMENTS,{oldArgs:[_.id,_.cc]}),c.hideElementsTriggered=!0)):ar.setXpathAndHideEl(_,n,b,!1),_.ss&&_.ss.csa){const e="trigger."+yo,t=s.on(e,(()=>{const i=window.VWO.phoenix.store.getters.triggers;i[O]&&!i[O].state&&Xr({getters:n,vwoEvents:s,campaignData:_}),s.off(e,t)}))}}else Xr({getters:n,vwoEvents:s,campaignData:_}),c.segmentCndsSatisfied=!1,s.trigger(E.CHECK_SEGMENTATION,c);const x=Kr.getExitTrigger(S.cnds);S&&x&&!T&&ar.addListener(n,s,{triggerID:x},(()=>{_.ready||("SPLIT_URL"===m&&s.trigger(E.NOT_REDIRECTING),Hr({event:e,data:_,getters:n,actions:o,vwoEvents:s},_),s.trigger(E.CHECK_SEGMENTATION,c))})),_.debug&&o.updateSettings({cc:_.debug.v},`campaigns.${t}`),Pr.mark("tag-visibilityService")}))))),l&&0!==u.length||s.trigger(E.NOT_REDIRECTING);const h=[{executableCampaignsOnCurrentPage:r,destinationMT:"window.VWO._.executableCampaignsOnCurrentPage"}];ar.setPropertiesToBothThreads(o,h,"vwoInternalProperties"),window.fetcher.getValue("VWO.modules.utils.libUtils.delCSS",[{ruleName:"*",campaignData:t}]),jr({event:e,data:t,getters:n,actions:o,vwoEvents:s});const v=$r({event:e,data:t,getters:n,actions:o,vwoEvents:s},c);Br({event:e,data:t,getters:n,actions:o,vwoEvents:s},v,c),s.trigger(E.RUN_REVERT_TAGS),s.trigger(E.VISIBILITY_TRIGGERED)}))};class oa{}class sa{}class ra extends sa{constructor(){super(...arguments),this.preview=xo,this.noopFn=function(){}}isTimedOut(e){return e.vwoCode&&(e.vwoCode[go]||e.vwoCode[ho])}unhideElForCombinationsToNotUse(e,t,i,n){if("VISUAL_AB"!==i.type)return;ar.isPersonalizeCampaign(i)&&ar.unhideCampaignLevelStyle(i.id);const o=i.sections[1].variations,s=Lo(o);for(let e=0;e<s.length;e++)if(s[e]!==t){let t=o[s[e]];if("object"!=typeof t&&(t=JSON.parse(t)),!t)continue;for(let o=0;o<t.length;o++){const r=t[o].xpath,a={ruleName:"",campaignData:i,variation:ar.isPersonalizeCampaign(i)?s[e]:null};t[o].cpath?a.rulesArr=[r,t[o].cpath]:a.ruleName=r,Is.unhideElement(n,a,t[o].dHE)}}}unhideVariationIfNotSplit(e,t,i){"SPLIT_URL"!==t.type&&this.unhideVariation(e,t,i)}unhideVariation(e,t,i){const n=Lo(t.sections);let o,s,r,a,d,l,c,u,g=n.length;const h=t.type;if("VISUAL_AB"===h)for(;g--;)if(o=n[g],s=t.sections[o],s.variations)for(r=Lo(s.variations),a=r.length,i.trigger(E.UNHIDE_SECTION,{oldArgs:[t.id,o,!a]});a--;)if(d=r[a],c=s.variations[d],s.variations[d]=c="string"==typeof c?c&&JSON.parse(c):c,c)for(l=c.length,i.trigger(E.UNHIDE_VARIATION,{oldArgs:[t.id,o,d,!l]});l--;){u=c[l].xpath;const e={ruleName:"",campaignData:t,key:o,oldArgs:[t.id,o,d,u]};c[l].cpath?e.rulesArr=[u,c[l].cpath]:e.ruleName=u,Is.unhideElement(i,e,c[l].dHE)}else i.trigger(E.UNHIDE_VARIATION,{oldArgs:[t.id,o,d,!c]});else i.trigger(E.UNHIDE_SECTION,{oldArgs:[t.id,o,!0]});else if("VISUAL"===h)for(;g--;)o=n[g],u=t.sections[o].path,i.trigger(E.UNHIDE_ELEMENT,{ruleName:u,campaignData:t,key:o,oldArgs:[t.id,o,void 0,u]});else"SPLIT_URL"===h&&(i.trigger(E.UNHIDE_ELEMENT,{ruleName:"*",campaignData:t,oldArgs:[t.id,void 0,void 0,"*"]}),i.trigger(E.UNHIDE_ELEMENT,{ruleName:"body",campaignData:t,oldArgs:[t.id,void 0,void 0,"body"]}))}isSplit(e,t,n){return i(this,void 0,void 0,(function*(){if("SPLIT_URL"===t.type&&("RUNNING"===t.status||this.preview()||window._vis_debug)){let i;const o=yield ar.getSplitDecision(e,t.id);if(!o)return!1;if(ar.isCurrentURLSplitVariation({chosenVariation:o,getters:e,campaignData:t}))return i=yield Er.getCombi(e,t),t.combination_chosen=o,t[vo]=1,n.trigger(E.CHOOSE_COMBINATION,{oldArgs:[t.id,o,!0]}),i||this.preview()?this.preview()||(n.trigger(E.SPLIT_VARIATION_SHOWN,{oldArgs:[""+t.id,i]}),Ts(n,E.CAMPAIGN_READY,{id:t.id,combination:i})):(i=o,t&&void 0===t.isFirst&&(t.isFirst=1),yield Er.include(e,t.id,i,t),n.trigger(E.REGISTER_HIT,{oldArgs:[""+t.id,i]}),Ts(n,E.CAMPAIGN_READY,{id:t.id,combination:i})),this.currentUrlValidationForSplitFromLs(t.id)&&(n.trigger(E.VARIATION_SHOWN_SENT,{oldArgs:[""+t.id,i]}),window.fetcher.getValue("window.VWO._.phoenixMT.trigger",[E.VARIATION_SHOWN_SENT,t.id]),744263===window._vwo_acc_id&&window.VWO._.customError&&window.VWO._.customError({msg:"fireVariationShownSentForSplit - from runCampaign",url:window.location.href,uuid:window.VWO._.cookies.get("_vwo_uuid")})),window.fetcher.getValue("VWO.modules.utils.collectAndSendDataForGA",[t.id,i]),!0}return!1}))}currentUrlValidationForSplitFromLs(e){var t;const i=JSON.parse(window.localStorage.getItem(So.VS_DATA));return(null===(t=null==i?void 0:i[e])||void 0===t?void 0:t.u)===window.location.href}checkSplitVariationAndMarkReady(e,t,n){return i(this,void 0,void 0,(function*(){if(yield this.isSplit(e,t,n))return n.trigger(E.NOT_REDIRECTING),Is.unhideElement(n,{ruleName:"*",campaignData:t,oldArgs:[t.id,void 0,void 0,"*"]}),this.unhideVariationIfNotSplit(e,t,n),t.ready=!0,t.cA=!0,!0}))}getCombination(e,t,n){return i(this,void 0,void 0,(function*(){let i=!1,o=this.preview()||(t.mE?void 0:yield Er.getCombi(e,t));return(o||t.combination_chosen)&&(i=!0),o=o||Er.isLogged(e,t.id)||!n&&(yield Er.chooseCombination(e,t)),{alreadyChosen:i,combi:o}}))}registerHit(e,t,n,o,s,r,a){return i(this,void 0,void 0,(function*(){if(r=r||this.noopFn,!n.mE&&(yield Er.isBucketed(e,n))||ar.isBot2()||!ar.shouldTrackUserForCampaign(n))return r(a);if("TRACK"===n.type){var i=Er.getTrackGoalIdFromExp(n.id,e);yield window.fetcher.getValue('VWO.push("${{1}}", "${{2}}")',null,{captureGroups:[["tag",n.id,t,"session",!0],["tag",i,null,"eg"]]})}else"INSIGHTS_FUNNEL"===n.type&&(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["tag",`${n.id}`,null,"fIds"]]}));o.trigger(E.SEND_NEW_VISITOR_CALL,{combination:t,campaignData:n,function(){}}),yield ms({getters:e,event:{time:+new Date,name:E.REGISTER_HIT,props:{id:""+n.id,combination:t}},actions:{},vwoEvents:{},data:{}},n,r,a),s||o.trigger(E.REGISTER_HIT,{oldArgs:[""+n.id,t]}),Ts(o,E.CAMPAIGN_READY,{id:n.id,combination:t})}))}createTempCombiCookie(e,t,n){return i(this,void 0,void 0,(function*(){yield ar.createCookie(e,"_vis_opt_exp_"+t.id+"_combi_choose",n,100,t)}))}recordVisitor(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(!t)return;const i=n.type;o&&!(yield Er.isLogged(e,n.id))?(yield this.registerHit(e,t,n,s),ar.isDomDependent(i)&&(yield this.createTempCombiCookie(e,n,t))):Ts(s,E.CAMPAIGN_READY,{id:n.id,combination:t}),window.fetcher.getValue("VWO.modules.utils.collectAndSendDataForGA",[n.id,t])}))}deleteCampaignParams(e){delete e.ready,delete e.timedout,delete e[vo]}setMutsData(e){e.muts=e.muts||{},e.muts.pre=e.muts.pre||{},e.muts.post=e.muts.post||{},e.muts.pre.enabled&&(e.manual=!0)}handleDeployCampaign(e){"DEPLOY"===e.type&&(e.orgType=e.type,e.type="VISUAL_AB")}handlePCTraffic(e){e.pc_traffic=void 0===e.pc_traffic?100:e.pc_traffic}checkAlreadyChosenForMultiExperience(e,t,n){return i(this,void 0,void 0,(function*(){if(t.mE){const i=(yield Er.getCombi(e,t))||Er.isLogged(e,t.id,!0);return n==i}}))}preProcessCampaignData({data:e}){this.setMutsData(e),this.handleDeployCampaign(e),this.handlePCTraffic(e),e.globalCode=e.globalCode||{},e.goals||(e.goals={}),ar.isDomIndependentCampaign(e.type)&&(e.clickmap=0),"FUNNEL"===e.type?(e.g=e.g||e.goals,e.goals={},e.segment_code=void 0===e.segment_code?"true":e.segment_code,e.manual=!0,e.v=e.v||1):e.manual=!!e.manual}processCampaign({data:e,event:t,actions:n,getters:o,vwoEvents:s,executingTagTrigger:r}){var a,d;return i(this,void 0,void 0,(function*(){let i,l;const c="SPLIT_URL"===e.type;if(!this.preview()&&(yield Er.isExcluded(o,e))&&!ar.isSessionBasedCampaign2(e))return s.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,!0,!0]}),c&&(s.trigger(E.NOT_REDIRECTING),Is.unhideElement(s,{ruleName:"*",campaignData:e})),void this.unhideVariationIfNotSplit(o,e,s);if(this.deleteCampaignParams(e),c&&(yield this.checkSplitVariationAndMarkReady(o,e,s)))return void s.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,!0]});if(!ar.shouldTrackUserForCampaign(e))return e.timedout=!0,c&&(s.trigger(E.NOT_REDIRECTING),Is.unhideElement(s,{ruleName:"*",campaignData:e})),void this.unhideVariation(o,e,s);const u=Er.doExperimentHere(o,e,s)[0];if(u){const t=(ar.isPersonalizeCampaign(e)&&e.sections[1].triggers[null===(a=e.debug)||void 0===a?void 0:a.v])===r;if(s.trigger(E.SEGMENTATION_EVALUATED,{oldArgs:[e.id,u,t,!0]}),ar.isDomDependent(e.type)&&(i=yield this.getCombination(o,e,!0),l=i.alreadyChosen,i.combi&&(e.cc=i.combi)),!this.preview()&&!(yield Er.isBucketed(o,e))&&!(yield Er.shouldBucket(o,e)))return s.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,!0,void 0,void 0,!0]}),yield Er.exclude(o,e),"SPLIT_URL"===e.type&&(s.trigger(E.NOT_REDIRECTING),Is.unhideElement(s,{ruleName:"*",campaignData:e})),void this.unhideVariationIfNotSplit(o,e,s);if(ar.shouldTrackUserForCampaign(e)?(e.ready=!0,e.cA=!0):e.timedout=!0,c)if(this.isTimedOut(o))s.trigger(E.NOT_REDIRECTING),Is.unhideElement(s,{ruleName:"*",campaignData:e});else{i=yield this.getCombination(o,e),l=i.alreadyChosen,e.combination_chosen=i.combi;const t=[{willRedirectionOccur:!0,destinationMT:"VWO._.willRedirectionOccur"}];"1"!==e.combination_chosen&&ar.setPropertiesToBothThreads(n,t,"vwoInternalProperties");const r=yield ar.isBotScreen();Er.executeCampaignJS(e,"pre"),yield Is.variationShown(s,Object.assign(Object.assign({id:e.id,variation:e.combination_chosen,isFirst:l?0:1,isSplitVariation:"1"!==e.combination_chosen},r&&{vwoMeta:{isBot:r}}),{fireLinkedTagSync:"FUNNEL"===e.type}),e)}else{i=yield this.getCombination(o,e);const t=e.combination_chosen=i.combi;if(l=i.alreadyChosen||(yield this.checkAlreadyChosenForMultiExperience(o,e,t)),delete e.cc,!t)return s.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,void 0,void 0,!0,ar.isPersonalizeCampaign(e)]}),this.unhideVariationIfNotSplit(o,e,s),o.vwoInternalProperties.isSpaEnabled&&s.trigger(E.TEST_NOT_RUNNING,{oldArgs:[e.id]}),void(e.ready=!1);s.trigger(E.CHOOSE_COMBINATION,{oldArgs:[e.id,t,l,ar.isPersonalizeCampaign(e)?l:void 0]}),this.recordVisitor(o,t,e,!l,s),this.unhideElForCombinationsToNotUse(o,t,e,s),"VISUAL_AB"===e.type&&1==t&&(s.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,void 0,void 0,void 0,!0]}),this.unhideVariationIfNotSplit(o,e,s)),Er.executeCampaignJS(e,"pre");const n=yield ar.isBotScreen();yield Is.variationShown(s,Object.assign(Object.assign({id:e.id,variation:i.combi,isFirst:l?0:1},n&&{vwoMeta:{isBot:n}}),{fireLinkedTagSync:"FUNNEL"===e.type}),e)}}else o.vwoInternalProperties.isSpaEnabled&&s.trigger(E.TEST_NOT_RUNNING,{oldArgs:[e.id]}),ar.shouldTrackUserForCampaign(e)&&(s.trigger(E.GOAL_VISIT,{expId:e.id}),(null===(d=null==e?void 0:e.globalCode)||void 0===d?void 0:d.pre)&&s.trigger(`${E.EVALUATE_GOAL_PAGE_FOR_PREJS}_${e.id}`)),Hr({data:e,event:t,getters:o,actions:n,vwoEvents:s},e),this.unhideVariationIfNotSplit(o,e,s)}))}}var aa=new ra;function da(e){var t;return(xo()||window._vis_debug)&&(null===(t=e.debug)||void 0===t?void 0:t.v)}function la(e,t){var i,n,o,s;if((null===(i=e.triggers)||void 0===i?void 0:i[0])==t)return!1;return(null===(s=null===(o=null===(n=e.sections)||void 0===n?void 0:n[1])||void 0===o?void 0:o.triggers)||void 0===s?void 0:s[e.debug.v])!==t}function ca(e,t){return!e.ready&&!(da(e)&&ar.isPersonalizeCampaign(e)&&la(e,t))}class ua extends oa{constructor(){super(...arguments),this.listenerAdded=!1,this.runCampaignSync={}}executeWrapper(e,t){return i(this,void 0,void 0,(function*(){const n=e.data.id;this.runCampaignSync[n]?this.runCampaignSync[n]=this.runCampaignSync[n].then((()=>i(this,void 0,void 0,(function*(){try{yield this.execute(e,t)}catch(e){$s.error(e)}})))):this.runCampaignSync[n]=this.execute(e,t),yield this.runCampaignSync[n],delete this.runCampaignSync[n]}))}execute({event:e,data:t,actions:n,getters:o,vwoEvents:s},r){return i(this,void 0,void 0,(function*(){if(m())return;"SURVEY"===t.type&&(yield vn._.insightsOnConsentPromise);const{executingTagTrigger:a}=e;if(delete e.executingTagTrigger,!ca(t,a))return;if(o=o||vn.phoenix.store.getters,n=n||vn.phoenix.store.actions,t.isTriggerValidated=!0,!r&&"FUNNEL"===t.type)return;if(Pr.mark(`runCampaignStart-${t.id}`),!o.vwoInternalProperties.shouldExecuteLib)return"SPLIT_URL"===t.type&&s.trigger(E.NOT_REDIRECTING),void Is.unhideElement(s,{ruleName:"*",campaignData:t});if(o.vwoInternalProperties.willRedirectionOccur)return;"TRACK"===t.type&&(yield this.processFunnelCampaign({getters:o,actions:n,vwoEvents:s,data:t,event:e})),this.listenerAdded||(s.on(E.EXECUTE_FUNNEL_FOR_GOAL_CAMPAIGN,(t=>i(this,void 0,void 0,(function*(){yield this.processFunnelCampaign({getters:o,actions:n,vwoEvents:s,data:t.campaign,event:e})})))),this.listenerAdded=!0),aa.preProcessCampaignData({event:e,data:t,actions:n,getters:o,vwoEvents:s});const d=yield Er.getCombiCookie(o,t.id);yield window.VWO._.visibilityTriggered,t.isProcessing=1,yield aa.processCampaign({event:e,data:t,actions:n,getters:o,vwoEvents:s,executingTagTrigger:a}),delete t.isProcessing,t.ready&&!d&&(e._vwo=e._vwo||{campaignsConverted:[]},e._vwo.campaignsConverted.push(t.id)),s.trigger(E.CAMPAIGN_FLOW_END)}))}processFunnelCampaign({getters:e,actions:t,vwoEvents:n,data:o,event:s}){return i(this,void 0,void 0,(function*(){if(!o.funnel)return;const r=yield window.fetcher.getValue("VWO._.commonCookieHandler.getDataStore()"),a=o.funnel.map((a=>i(this,void 0,void 0,(function*(){const i=r.split(":")[fo].split(",");let d,l,c,u=i.length;const g=e.settings.campaigns[a.id].g[0].id===parseInt(Object.keys(o.goals)[0],Eo),h=a.triggers[0],v=yield window.VWO.phoenix.validateTrigger(window.VWO.phoenix.settings.currentSettings.triggers[h],null,{triggerName:h});for(;u--;)d=i[u].split("_"),l=d[0],parseInt(l,Eo)===parseInt(a.id,Eo)&&(c=!0);v&&g&&!c&&(yield this.execute({event:s,data:e.settings.campaigns[a.id],actions:t,getters:e,vwoEvents:n},!0))}))));yield Promise.all(a)}))}}const ga=new ua,ha=ga.executeWrapper.bind(ga);class va extends ra{constructor(){super(...arguments),this.preview=xo,this.currentCombinationXPaths={}}checkAndApplyChanges(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(!t||!t.ready)return;let i,r=!1;if(i="","SPLIT_URL"===t.type)this.runSplitCampaign(t,e,o,n);else{if(i=this.preview()||(yield Er.getCombi(e,t)),i){if(t.mE){const n=yield Er.chooseCombination(e,t);if(i!=n&&(r=!0,i=n),!i)return}}else if(r=!0,i=yield Er.chooseCombination(e,t),!i)return;n.trigger(E.ELEMENT_LOAD_TIMER_STOP,{oldArgs:[t.id,i]}),e.vwoInternalProperties.isSpaEnabled&&void 0===t.dontKillTimer&&(t.dontKillTimer=!0),qr({getters:e,expId:t.id,combination:i}),this.otherSide("tryApplyingChanges",[i,t,null,s]),yield this.record(e,i,t,r,n),ar.isDomIndependentCampaign(t.type)&&ar.shouldTrackUserForCampaign(t)&&n.trigger(E.GOAL_VISIT,{expId:t.id});for(const e in this.currentCombinationXPaths)Object.prototype.hasOwnProperty.call(this.currentCombinationXPaths,e)&&n.trigger(E.ELEMENT_NOT_LOADED,{oldArgs:[t.id,this.currentCombinationXPaths[e][0],this.currentCombinationXPaths[e][1],e]})}}))}record(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(!o||!t)return;(yield Er.include(e,n.id,t,n)).isCookieCreated&&window.fetcher.getValue("VWO._.phoenixMT.trigger",[E.CAMPAIGN_COMBI_CREATED]),e.storages.storages.cookies.erase("_vis_opt_exp_"+n.id+"_combi_choose"),n.id&&n.multiple_domains}))}runSplitCampaign(e,t,n,o){return i(this,void 0,void 0,(function*(){let s;window._vis_debug||(s=xo()||(yield Er.getCombi(t,e))||(yield ar.getSplitDecision(t,e.id)));const r=e.sections[1].variations,a=t.storages.storages.cookies;if(s=parseInt(s,Eo),s)1===s?(Is.unhideElement(o,{ruleName:"*",campaignData:e,oldArgs:[e.id,void 0,void 0,"*"]}),o.trigger(E.NOT_REDIRECTING),o.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,!0]}),e.combination_chosen=s,o.trigger(E.CHOOSE_COMBINATION,{oldArgs:[e.id,s,!0]}),this.recordVisitor(t,s,e,!1,o)):(ar.createCookie(t,"_vis_opt_exp_"+e.id+"_split",s,100,e),ls.set(),o.trigger(E.SPLIT_URL,{oldArgs:[e.id]}),this.redirectToURL(t,n,e,r[s],s,o));else{if(isNaN(s=parseInt(yield Er.chooseCombination(t,e),Eo)))return o.trigger(E.CHOOSE_COMBINATION,{oldArgs:[e.id,void 0,!1]}),void o.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,!0]});if(e.multiple_domains&&1!==s){ar.createCookie(t,"_vis_opt_exp_"+e.id+"_split",s,100,e),ls.set(),o.trigger(E.SPLIT_URL,{oldArgs:[e.id]});const d=[{willRedirectionOccur:!0,destinationMT:"VWO._.willRedirectionOccur"}];ar.setPropertiesToBothThreads(n,d,"vwoInternalProperties"),n.addValues({waitingForThirdPartySync:!0},"vwoInternalProperties"),a.waitForThirdPartySync((()=>i(this,void 0,void 0,(function*(){n.addValues({waitingForThirdPartySync:!1},"vwoInternalProperties"),this.redirectToURL(t,n,e,r[s],s,o,!0)}))))}else 1!==s?(ar.createCookie(t,"_vis_opt_exp_"+e.id+"_split",s,100,e),ls.set(),o.trigger(E.SPLIT_URL,{oldArgs:[e.id]}),this.redirectToURL(t,n,e,r[s],s,o,!0)):(o.trigger(E.NOT_REDIRECTING),Is.unhideElement(o,{ruleName:"*",campaignData:e,oldArgs:[e.id,void 0,void 0,"*"]}),e.combination_chosen=s,o.trigger(E.CHOOSE_COMBINATION,{oldArgs:[e.id,s,!1]}),o.trigger(E.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,!0]}),yield this.recordVisitor(t,"1",e,!0,o),this.record(t,"1",e,!0,o))}}))}redirectToURL(e,t,i,n,o,s,r){if(this.isTimedOut(e))return;ar.setPropertiesToBothThreads(t,[{willRedirectionOccur:!0,destinationMT:"VWO._.willRedirectionOccur"}],"vwoInternalProperties"),s.trigger(E.REDIRECT_DECISION,{oldArgs:[!0,i.id]}),r?this.registerHit(e,o,i,s,!0,this.processRedirect.bind(this),{getters:e,campaignData:i,redirectURL:n,isNewVisitor:r,context:this}):this.processRedirect({getters:e,campaignData:i,redirectURL:n,isNewVisitor:r,context:this})}processRedirect({getters:e,campaignData:t,redirectURL:i,isNewVisitor:n}){this.otherSide("processRedirect",[{getters:e,campaignData:t,redirectURL:i,isNewVisitor:n}])}otherSide(...e){e[0]="VWO.modules.tags.runTestCampaign.utils."+e[0],window.fetcher.getValue(...e)}}var pa=new va;const wa=function({event:e,getters:t,actions:n,vwoEvents:o}){return i(this,void 0,void 0,(function*(){Pr.mark(`runTestCampaignStart-${e.props.id}`),Pr.measure(`runCampaignMinusRunTestCampaignStart-${e.props.id}`,`runCampaignStart-${e.props.id}`,`runTestCampaignStart-${e.props.id}`),Pr.measure(`vwo-campaign-execution-${e.props.id}`,"tag-visibilityService",`runTestCampaignStart-${e.props.id}`);const i=t.settings.campaigns[e.props.id];yield pa.checkAndApplyChanges(t,i,o,n),Er.executeCampaignJS(i,"post")}))};class Ea{serializeNonGoalData(e){ar.isDomIndependentCampaign(e.type)&&(e.clickmap=0),("ANALYSIS"===e.type||ar.isAnalyzeCampaign(e.type))&&(e.goals={})}serializeData(e){this.serializeNonGoalData(e);const t=e.goals;for(const e in t)ar.isPageBasedGoal(t[e].type)?(t[e].pUrl=t[e].pUrl||t[e].urlRegex,t[e].pExcludeUrl=t[e].pExcludeUrl||t[e].excludeUrl):t[e].pUrl=t[e].pUrl||".*"}isGoalEligible(e,t,i){i=i||window.VWO.phoenix;const n=(t=t||i.store.getters).currentUrl;return e.pExcludeUrl&&Qs.matchRegex(n,e.pExcludeUrl)?(i.trigger(E.EXCLUDE_GOAL_URL),!1):e.pUrl?ir.verifyUrl(n,e.pUrl,null):ir.verifyUrl(n,null,e.urlRegex)}registerConversion(e,t,n,o,s,r,a){return i(this,void 0,void 0,(function*(){if(ar.hasInsightsMetric(n.type))return;if(!Ds.shouldWeTrackVisitor())return;t=t||1;const i=window.VWO.phoenix;e=e||i.store.getters,yield this._triggerGoalConversion(i,e,t,n,o,s,Object.assign(Object.assign({},a||{}),{combination:(null==a?void 0:a.combination)||(yield Er.getCombi(e,n,r))}))}))}getImgUrlForConversion(e,t,n,o,s,r){return i(this,void 0,void 0,(function*(){var i,a;const d=e.id;if(a="c.gif?account_id="+o.accountId+"&experiment_id="+d+"&goal_id="+t+"&ru="+encodeURIComponent(yield ls.get())+(void 0===s?"":"&r="+s)+ar.getUUIDString((null==r?void 0:r.uuid)||(yield ar.getUUID(o,e))),"TRACK"===e.type){i=(null==r?void 0:r.sId)||(yield o.vwoInternalProperties.sessionInfoService.getSessionId()),yield window.VWO.phoenix.trigger(E.EXECUTE_FUNNEL_FOR_GOAL_CAMPAIGN,{campaign:e});let n=null==r?void 0:r.gtAndF;if(n||(n=yield window.tracklib.getGtAndF(t)),n){return a+"&s="+i+"&ifs="+ +(i===((null==r?void 0:r.sId)||(yield o.vwoInternalProperties.sessionInfoService.getSessionId())))+"&t=1&cu="+encodeURIComponent((null==r?void 0:r.pageUrl)||o.currentUrl)+n}return""}return(yield o.vwoInternalProperties.sessionInfoService.shouldSendSessionInfoInCall())&&(i=yield o.vwoInternalProperties.sessionInfoService.getSessionId()),a+"&combination="+n+(i=i?"&sId="+i:"")}))}_triggerGoalConversion(e,t,n,o,s,r,a){return i(this,void 0,void 0,(function*(){const i=a.combination;if(!r&&(!i||(yield Er.isGoalTriggered(o,n,t))||ar.isBot2()))return void(yield e.trigger(E.REGISTER_CONVERSION,{oldArgs:[o.id,n,s,!1],campaignId:o.id,goalId:n}));"REVENUE_TRACKING"!==o.goals[n].type&&(s=void 0);const d=yield this.getImgUrlForConversion(o,n,i,t,s,{uuid:a.uuid,gtAndF:a.gtAndF,sId:a.sId,pageUrl:a.pageUrl});d&&((yield ar.isEligibleToSendCall(o.id,t))&&(yield Es.sendCall(t,{url:d},null,null)),yield Er.markGoalTriggered(o,n,t)),O.queueGoalLogs(o.id,n,s,!!d)&&(yield e.trigger(E.REGISTER_CONVERSION,{oldArgs:[o.id,n,s,!!d],campaignId:o.id,goalId:n}))}))}}const fa=new Ea;class _a{}class ma extends _a{shouldWeTriggerMetric(e,t,i,n,o){const s=n.isFirst,{excludeUrl:r,pExcludeUrl:a,urlRegex:d,pUrl:l}=o;let c;c=!(r||a||d||l)||fa.isGoalEligible(o,e,t);return!(!ar.isSessionBasedCampaign2(n)&&s&&i.name===E.PAGE_VIEW&&"CUSTOM_GOAL"===o.type)&&c}isItCustomConversionEvent(e){return e.name===E.CUSTOM_CONVERSION}}var Oa=new ma;class Sa{constructor(){this.whiteListedEventsForVsKey=[E.PAGE_VIEW,E.CUSTOM_CONVERSION,E.DOM_CLICK,E.DOM_SUBMIT,E.REVENUE_CONVERSION]}getCurrentEventData(e,t,i){const n={};if(!(Object.keys(t).length<=0))return Object.keys(t).forEach((o=>{var s;n[o]=n[o]||{},n[o]={vwoMeta:{metric:t[o].metrics}},this.whiteListedEventsForVsKey.includes(e)&&t[o].comb&&(n[o].vwoMeta.vS=t[o].comb),(null===(s=i[o])||void 0===s?void 0:s.length)>0&&(n[o].matchedSelectors=i[o])})),n}}class ya extends Sa{constructor(){super(...arguments),this.mutex={}}execute({data:e,vwoEvents:t,getters:n,event:o}){var s;return i(this,void 0,void 0,(function*(){if([E.DOM_CLICK,E.DOM_SUBMIT,E.PAGE_UNLOAD].includes(o.name))return;if(n.vwoInternalProperties.willRedirectionOccur)return;if(ar.isBot2())return;const r={},a={};for(const s of e)for(const e of s.campaigns){const s=e.c,d=e.g;let l,c,u=s&&n.currentSettings.dataStore.campaigns[s],g=!1;const h=s+"-"+d;this.mutex[h]||(this.mutex[h]=Promise.resolve()),this.mutex[h]&&(c=this.mutex[h].then((()=>i(this,void 0,void 0,(function*(){var i,c,h,v;if(!s||!d||(null===(c=null===(i=o._vwo)||void 0===i?void 0:i.campaignsConverted)||void 0===c?void 0:c.includes(s))||!u)return;if(l=u.goals[d],!l)return;g=ar.isSessionBasedCampaign2(u);const p="SEPARATE_PAGE"===l.type,w="TRACK"===u.type;if(g&&w&&!p)return;let f=ar.hasInsightsMetric(u.type);if(o.name===E.PAGE_VIEW){if(o.aux&&!f)return;if(f&&!o.aux)return}const _=u.triggers[0];if(!g&&!(null===(h=window._vwoCc)||void 0===h?void 0:h.ignoreCSAForGoals)&&(null===(v=null==u?void 0:u.ss)||void 0===v?void 0:v.csa)&&!(yield t.validateTrigger(n.currentSettings.triggers[_],null,{triggerName:_})))return;if((null==u?void 0:u.mE)&&Er.doExperimentHere(n,u,t)[0]&&!u.combination_chosen)return;if(!ar.shouldTrackUserForCampaign(u)||!(yield Er.isBucketed(n,u,!p))||!Oa.shouldWeTriggerMetric(n,t,o,u,l))return;if(p&&delete l.pageVisited,yield Er.isGoalTriggered(u,d,n))return;u||(u={id:s,goals:{[d]:{}},type:e.sess});const m=e.uuid||(yield ar.createUUIDCookie2(n,u));if(!g||f){if("CUSTOM_GOAL"===(null==l?void 0:l.type)&&(null==l?void 0:l.url)){const e=l.url;r[m]=r[m]||[],r[m].indexOf(e)<0&&r[m].push(e)}a[m]=a[m]||{};const e="id_"+s;a[m].metrics=a[m].metrics||{},a[m].metrics[e]=a[m].metrics[e]||[],a[m].metrics[e].push("g_"+d),u.isEventMigrated&&!o.isCustomEvent&&(a[m].comb=a[m].comb||{},a[m].comb[e]=yield Er.getCombi(n,u,!0))}var O=!0;window.VWO._.isBeaconAvailable=o.isBeaconAvailable,window.VWO._.isLinkRedirecting=o.isLinkRedirecting;yield fa.registerConversion(n,d,u,o.revenue,!0,!0,{combination:e.combination,uuid:m,gtAndF:e.gtAndF,sId:e.sId,pageUrl:e.pageUrl}),t.trigger(E.GOAL_CONVERTED,{campaignId:u.id,goalId:d}),window.VWO._.isLinkRedirecting=!1,O=O&&window.VWO._.isBeaconAvailable}))))),this.mutex[h]=c,yield c}const d=this.getCurrentEventData(o.name,a,r);o._vwo=(null==o?void 0:o._vwo)||{},o._vwo.eventDataConfig=(null===(s=o._vwo)||void 0===s?void 0:s.eventDataConfig)||{},o._vwo.eventDataConfig=d}))}}const Ta=new ya,Ca=Ta.execute.bind(Ta);window.VWO.modules.tags.metricWT=Ca;class Ia{otherSide(...e){return e[0]="VWO.modules.tags.prePostMutation.fn."+e[0],window.fetcher.getValue(...e)}}window.VWO.modules.tags.prePostMutation={};class Na{otherSide(...e){return e[0]="VWO.modules.tags.prePostMutation.utils."+e[0],window.fetcher.getValue(...e)}}class Aa extends Na{isMonitorPageChangesRequired(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];if(i.muts&&i.muts.post&&i.muts.post.enabled)return!0}return!1}getWaitForDOMRenderingConfigAndHideElements(e){let t=!1,i=10,n=1e3;for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o],r=s.muts&&s.muts.pre;r&&r.enabled&&(t=!0,r.timer&&r.timer>i&&(i=r.timer),r.timeout&&r.timeout>n&&(n=r.timeout))}return{enabled:t,timer:i,timeout:n}}waitForDOMRenderingAndExecuteCampaign(e){return this.otherSide("waitForDOMRenderingAndExecuteCampaign",[e])}monitorPageForChanges(){return this.otherSide("monitorPageForChanges")}}const Va=new Aa;function ba(){Ra("attachEditorChangeObserverEvents")}function Ra(...e){return e[0]="VWO.modules.tags.prePostMutation.editorChangesObserver."+e[0],window.fetcher.getValue(...e)}window.VWO.modules.tags.prePostMutation.utils=Va;class Pa extends Ia{constructor(){super(...arguments),this.editorChangeObserverEventsAttached=!1}execute({data:e,getters:t,vwoEvents:n}){return i(this,void 0,void 0,(function*(){e=t.settings.campaigns;const i=t.MutationObserver;let o,s=Promise.resolve();if(i){const t=Va.getWaitForDOMRenderingConfigAndHideElements(e);t.enabled?s=Va.waitForDOMRenderingAndExecuteCampaign(t):n.trigger(E.SSR_COMPLETE)}Va.isMonitorPageChangesRequired(e)&&(o=Va.monitorPageForChanges(),this.editorChangeObserverEventsAttached||(ba(),this.editorChangeObserverEventsAttached=!0)),yield Promise.all([s,o])}))}}const xa=new Pa,Da=xa.execute.bind(xa);window.VWO.modules.tags.prePostMutation.fn=xa;class La{formatErrorObject(e){return"string"==typeof e&&(e={msg:e}),e}setCustomError(e){const t=this;window.VWO._.customError=function(i){i=t.formatErrorObject(i),e(i)}}}class Ua extends La{errorTracking({getters:e}){return i(this,void 0,void 0,(function*(){const t=yield window.fetcher.getValue('VWO.modules.tags.errorTrackingCallback("${{1}}")',null,{captureGroups:[e]});this.setCustomError(t)}))}}const Wa=new Ua,ka=Wa.errorTracking;function Ma(e){return i(this,void 0,void 0,(function*(){const t=e.data,i=e.event.name;yield window.fetcher.getValue('VWO.modules.tags.sampleVisitor("${{1}}","${{2}}")',null,{captureGroups:[t,i]})}))}class Ga{}class Fa extends Ga{constructor(e,t){super(),this.flattenedGroup=[],this.groupsConfig=e,this.campaigns=t,this.expPossibleToRunMap={}}flattenGroupsData(){if(this.groupsConfig)for(let e=0;e<this.groupsConfig.length;e++){if(this.groupsConfig[e].c instanceof Array)for(let t=0;t<this.groupsConfig[e].c.length;t++)this.groupsConfig[e].c[t]=this.groupsConfig[e].c[t].toString();this.flattenedGroup=this.flattenedGroup.concat(this.groupsConfig[e].c)}}isExperimentReadyToRun(e,t,n){return i(this,void 0,void 0,(function*(){const i=t.triggers[0];return Er.doExperimentHere(e,t,n)[0]&&(yield window.VWO.phoenix.validateTrigger(e.currentSettings.triggers[i],null,{skipEventProps:!0,skipValidationIfTimer:!0}))}))}checkForExistingWinner(e,t){return i(this,void 0,void 0,(function*(){return e=e||window.phoenix.store.getters,!!((yield Er.getCombiCookie(e,t))||Er.isLogged(e,t,!0)||"SPLIT_URL"===this.campaigns[t].type&&(yield ar.getSplitDecision(e,t))||1===this.expPossibleToRunMap[t])}))}checkWinnerAlreadyExists(e){for(let t=0;t<e.length;t++){const i=parseInt(e[t],10);if(1===this.expPossibleToRunMap[i])return i}}checkIfStringArray(e){return!!Array.isArray(e)}processExperimentsOnBasisOfRandomness(e,t){return i(this,void 0,void 0,(function*(){const n={},o={},s=t.c;let r=0;if(!this.checkIfStringArray(s))return;let a=this.checkWinnerAlreadyExists(s);if(!a){for(let e=0;e<s.length;e++)2===this.expPossibleToRunMap[s[e]]&&(r+=1,o[s[e]]=this.campaigns[s[e]].triggers);if(!r){const t=s.map((t=>i(this,void 0,void 0,(function*(){4===this.expPossibleToRunMap[t]&&(yield Er.exclude(e,this.campaigns[t]))}))));return void(yield Promise.all(t))}for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&(n[e]=+(100/r).toFixed(2));a=yield Er.chooseCombination(e,null,{scaleInfo:n,segmentInfo:o}),this.expPossibleToRunMap[a]=1}}))}processExperimentsOnBasisOfPriorityAndWeight(e,t){return i(this,void 0,void 0,(function*(){const n=t.c,o=t.p,s=t.wt;if(!this.checkIfStringArray(n))return;let r=this.checkWinnerAlreadyExists(n);if(!r){if(o&&o.length)for(let e=0;e<o.length;e++)if(2===this.expPossibleToRunMap[o[e]]){r=o[e],this.expPossibleToRunMap[r]=1;break}if(!r&&s){const t={},i={};let n=0,o=0;const a=Object.keys(s);for(let e=0;e<a.length;e++)2===this.expPossibleToRunMap[a[e]]&&(n+=1,i[a[e]]=this.campaigns[a[e]].triggers,o+=s[a[e]]);if(n){for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=+(100*s[e]/o).toFixed(2));r=yield Er.chooseCombination(e,null,{scaleInfo:t,segmentInfo:i}),this.expPossibleToRunMap[r]=1}}if(!r){const t=n.map((t=>i(this,void 0,void 0,(function*(){4===this.expPossibleToRunMap[t]&&(yield Er.exclude(e,this.campaigns[t]))}))));yield Promise.all(t)}}}))}updateExperiments(e){return i(this,void 0,void 0,(function*(){let t,n=!1,o=!1,s=!1;const r=Object.keys(this.campaigns).map((r=>i(this,void 0,void 0,(function*(){if(Object.prototype.hasOwnProperty.call(this.campaigns,r)){const i=e.settings.currentSettings.triggers[window._vwo_exp[r].triggers[0]],a="SPLIT_URL"===this.campaigns[r].type;let d;0!==this.expPossibleToRunMap[r]&&1!==this.expPossibleToRunMap[r]||(this.campaigns[r].shouldHideElement=1),1===this.expPossibleToRunMap[r]&&(e.trigger(E.GROUP_WINNER_CHOOSEN,{groupWinner:parseInt(r,Eo)}),a&&(n=!0,(d=yield window.VWO.phoenix.validateTrigger(i,null,{skipEventProps:!0}))&&(s=!0))),!a||o&&t||(this.flattenedGroup.indexOf(r)<0?d&&Er.doExperimentHere(e.store.getters,window._vwo_exp[r],e)[0]&&(t=!0):o=!0)}}))));yield Promise.all(r),n&&s||!o||t||e.trigger(E.NOT_REDIRECTING)}))}filterByGroupType(e){const t=this.groupsConfig.map((t=>1==t.et?this.processExperimentsOnBasisOfRandomness(e,t):2==t.et?this.processExperimentsOnBasisOfPriorityAndWeight(e,t):void 0));return Promise.all(t)}filterExperimentsFromGroups({getters:e,vwoEvents:t}){var n;return i(this,void 0,void 0,(function*(){if(!(null===(n=this.groupsConfig)||void 0===n?void 0:n.length)){for(const e in this.campaigns)Object.prototype.hasOwnProperty.call(this.campaigns,e)&&t.trigger(E.GROUP_WINNER_CHOOSEN,{groupWinner:parseInt(e,Eo)});return}let o=!1;const s=Object.keys(this.campaigns).map((n=>i(this,void 0,void 0,(function*(){n=n.toString();const i=this.campaigns[n];if(Uo(this.flattenedGroup,n)<0)this.expPossibleToRunMap[n]=0;else if(yield Er.isExcluded(e,i))this.expPossibleToRunMap[n]=3;else{o=!0;const s=this.checkForExistingWinner(e,i.id),r=this.isExperimentReadyToRun(e,i,t);(yield s)?this.expPossibleToRunMap[n]=1:1!==this.expPossibleToRunMap[n]&&(yield r)&&((yield Er.shouldBucket(e,i))?this.expPossibleToRunMap[n]=2:this.expPossibleToRunMap[n]=4)}}))));return yield Promise.all(s),o&&(yield this.filterByGroupType(e)),this.updateExperiments(t)}))}}class ja{}class Ha extends ja{constructor(){super(),this.campaignsData={}}processCampaigns({event:e,getters:t,actions:i,vwoEvents:n,data:o}){const s=t.settings.vwoData.gC,r=t.settings.campaigns,a=new Fa(s,r);return a.flattenGroupsData(),a.filterExperimentsFromGroups({actions:i,getters:t,event:e,vwoEvents:n,data:o})}processGroupCampaigns({event:e,data:t,getters:i,actions:n,vwoEvents:o}){if(window.VWO._.pageData=window.VWO._.pageData||{},window.fetcher.setValue("VWO._.pageData",window.VWO._.pageData),window.VWO._.pageData._grp_campaign_called)return void o.trigger("vwo_groupCampTriggered");window.VWO._.pageData._grp_campaign_called=!0,window.fetcher.setValue("VWO._.pageData._grp_campaign_called",!0);const s=Er.getGroupBasedCampaigns({event:e,data:t,getters:i,actions:n,vwoEvents:o});if(s.length){for(const e of s)this.campaignsData[e]=i.settings.campaigns[e];return this.processCampaigns({event:e,getters:i,actions:n,vwoEvents:o,data:this.campaignsData}).then((()=>{o.trigger("vwo_groupCampTriggered")}))}o.trigger("vwo_groupCampTriggered")}}const $a=new Ha,Ba=$a.processGroupCampaigns.bind($a);window.VWO.modules.tags.groupCampaigns=Ba;class Ja{}class Ka{}class za extends Ka{debounceGetSettings({getters:e}){Wo(ar.getSettings(2,e),e.vwoInternalProperties.SPA_NEW_PAGE_SETTINGS_DELAY)}resetTriggerStates(){var e,t,i,n;const o=vn.phoenix;vn._.pageNo="number"==typeof vn._.pageNo?vn._.pageNo+1:0;const s="vwo_timer",r=null===(i=null===(t=null===(e=o.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.values)||void 0===i?void 0:i.triggers,a=o.settings.currentSettings.triggers,d=o.triggers.triggerEventListeners;Ts(o,E.POST_INIT,{}),o.eventBus.remove(s);for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e)){const t=null===(n=a[e])||void 0===n?void 0:n.cnds;let i,l;r[e]&&(i=r[e].event,l=r[e].trigger);let c,u=!1;if(t){const e=t=>{if(t&&"string"!=typeof t){if(Array.isArray(t))return t.forEach(e);if("[object Object]"===t.toString()&&void 0!==t.id){l&&l[t.id]&&(l[t.id].state=!1);t.event===s&&(u=!0,c=t.exitTrigger)}}};t.forEach(e)}if(i){r[e].state=!1;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&delete i[e]}u&&(c&&(o.eventBus.remove(o.triggers.getTriggerEventName(c)),c=null),delete d[e].vwo_timer,o.triggers.add(e,a[e]),u=!1)}o.events.events.vwo_timer.eventConditionsUpdate()}resetExpParams(e,t,i){const n=e.currentSettings.dataStore.campaigns;for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&(!i||"TRACK"===n[t].type)){const r=n[t];if(r[wo]=0,i&&"TRACK"===r.type){const t=r.triggers[0];e.triggers[t]&&(e.triggers[t].executionCount=0)}delete r[vo],delete r[po],delete r.clicks,delete r.combination_chosen,delete r.mutElg,delete r.segment_eligble,delete r.isFirst,r.muts&&delete r.muts.pvtMut,779155==window._vwo_acc_id?!r.isProcessing&&delete r.ready:delete r.ready,delete r.timedout,delete r.processed,delete r[vo],Er.checkForVariationTargeting(r)&&delete r.xPath,clearTimeout(r[mo]),delete r[mo],delete r.globalCode.preExecuted,delete r.globalCode.postExecuted;for(var o=Lo(r.sections),s=0;s<o.length;s++)delete r.sections[o[s]].loaded}if(window._vis_debug&&!i){e.getValue("tags.segmentEligibilityTest")&&t.addValues({executionCount:0},"tags.segmentEligibilityTest")}}resetTriggerExecutionCount(e){const t=e.triggers;Object.keys(t).forEach((e=>{t[e].executionCount=0}))}}var Ya=new za;class Xa extends Ja{constructor(){super(...arguments),this.lastExecutedForUrl=window.location.href}execute({event:e,data:t,getters:n,actions:o,vwoEvents:s}){var r,a,d,l;return i(this,void 0,void 0,(function*(){Object.assign(window.location,(null==e?void 0:e.location)||{});const i=window.location.href=(null===(r=null==e?void 0:e.props)||void 0===r?void 0:r.virtualPageUrl)||(null===(a=null==e?void 0:e.location)||void 0===a?void 0:a.href)||(yield window.fetcher.getValue("location.href"));if(n.previousUrl=this.lastExecutedForUrl,window._vis_opt_url=void 0,this.lastExecutedForUrl===i||n.vwoInternalProperties.waitingForThirdPartySync)return;if(n.vwoInternalProperties.willRedirectionOccur)return;(null===(d=null==e?void 0:e.props)||void 0===d?void 0:d.virtualPageUrl)||(this.lastExecutedForUrl=i),s.clearData(),Ya.resetTriggerStates(),Qr(),Ya.resetExpParams(s.store.getters,o),Ya.resetTriggerExecutionCount(s.store.getters),s.trigger(E.URL_CHANGED);if(ar.setPropertiesToBothThreads(o,[{willRedirectionOccur:!1,destinationMT:"VWO._.willRedirectionOccur"}],"vwoInternalProperties"),ar.addListenerForSessionInitComplete(),br({event:e,data:t,getters:n,actions:o,vwoEvents:s}),n.accountId,Vs(),window.VWO._.campaignsInternalMap={},window.VWO._.preventHidingInSPA=null===(l=window.VWO.featureInfo)||void 0===l?void 0:l.dNHEL,window.VWO._.pageData=window.VWO._.pageData||{},delete window.VWO._.pageData._grp_campaign_called,yield ar.shouldExecuteLib({event:e,data:t,getters:n,actions:o,vwoEvents:s}),window.fetcher.setValue("window.VWO._.urlChangeProcessingPending",!1),n.vwoInternalProperties.shouldExecuteLib){if(window._vis_debug||window._vis_heatmap){const e=n.vwoInternalProperties.experimentIds,t=Do(e);s.trigger(E.CAMPAIGN_FLOW_START,{oldArgs:[t]})}n.vwoCode&&(n.vwoCode[go]=!1,n.vwoCode[ho]=!1),window.VWO._.visibilityTriggered=new Promise((e=>{const t=s.on(E.VISIBILITY_TRIGGERED,(()=>{s.off(t),e()}))})),delete window.VWO._.auxPageViewFired,window.VWO._.insightsUtils.activateFunnels(),(n.visDebug||xo()||window.VWO._.selfHosted)&&(yield ar.firePageViewEvent({shouldFireDomLoad:!0})),window.VWO._.isSettingsCachingEnabled?(window.VWO._.updateSettingsSuccess||ar.areSettingsCached())&&(s.trigger(ks.PAGE_LOAD_EVENT),yield ar.firePageViewEvent({shouldFireDomLoad:!0})):Ya.debounceGetSettings({event:e,data:t,getters:n,actions:o,vwoEvents:s}),s.trigger(E.POST_URL_CHANGE,{oldArgs:[ir.getCleanedUrl(i),n.vwoInternalProperties.willRedirectionOccur]})}}))}}const qa=new Xa,Qa=qa.execute.bind(qa);function Za({data:e,event:t,getters:i,vwoEvents:n}){const o=t.props;!1===o.segmentCndsSatisfied?n.trigger(E.SEGMENTATION_EVALUATED,{oldArgs:[e.id,o.segmentCndsSatisfied,!0]}):o.hideElementsTriggered&&n.trigger(E.ELEMENTS_SHOWN_WITHOUT_CHANGES,{oldArgs:[e.id]})}const ed=function({getters:e,vwoEvents:t}){return i(this,void 0,void 0,(function*(){const i=Object.keys(e.settings.campaigns||{});if(!xo()&&!window._vis_debug||!window.VWO._.blockedState&&!m())for(const n of i){const i=e.settings.campaigns[n],o=er.getCleanedUrl(e.currentUrl),s=i.urlRegex,r=i.url_pattern;let a=!1;if("SPLIT_URL"===i.type){const t=yield ar.getSplitDecision(e,i.id);t&&ar.isCurrentURLSplitVariation({chosenVariation:t,getters:e,campaignData:i})&&(a=!0)}const[d,l]=a?[!0,2]:Er.doExperimentHere(e,i,t,{urlRegex:s,urlPattern:r});Er.firePatternMatchingEvent(t,i.id,l,o,s||r,d),t.trigger("executePatternMatching",{_vwo:{doExperimentHere:"SPLIT_URL"===i.type?null:d}})}}))},td={init:function(e,t){window.fetcher.getValue("VWO._.vwoLib.initTrack",[e,t])},processEvent:function(e,t,i,n,o){if("[object Array]"!==Object.prototype.toString.call(e))return 0;try{var s,r,a,d=e[0],l=e.slice(1),c=-1!==d.indexOf(".");return c&&0===d.indexOf(t)||!c?(c?(s=i[(r=d.split("."))[0]][r[1]],a=i[r[0]]):(s=i[d],a=i),s?(window.VWO._.prVWO=window.VWO._.prVWO.concat(o.queue?o.splice(n,1):o.queue),s.apply(a,l),1):0):0}catch(t){return console.log("Error occured in VWO Process Event ("+(e&&e[0])+"): ",t),0}}};class id{constructor(){this.noOp=function(){}}getPhoenixConfig(){const e={tags:{checkEnvironment:{fn:Mr,sync:!0},prePostMutation:{fn:Da,sync:!0},visibilityService:{fn:na,sync:!0},groupCampaigns:{fn:Ba,sync:!0},runCampaign:{fn:ha,sync:!0},metric:{fn:Ca,sync:!0,fireUniquelyForEveryEvent:!0},runTestCampaign:{fn:wa,sync:!0},errorTracking:{fn:ka,sync:!0},sampleVisitor:{fn:Ma},urlChange:{fn:Qa,sync:!0},executePreCampJsForGoalsPage:{fn:({data:e})=>{Er.executeCampaignJS(e,"pre")},sync:!0}},storages:{localStorageService:R,cookies:ao},jsLibUtils:{verifyUrl:function(){return ir.verifyUrl.apply(ir,arguments)},getCleanedUrl:function(){return ir.getCleanedUrl.apply(ir,arguments)}}};return window._vis_debug&&(e.tags.segmentEligibilityTest={fn:Za,sync:!1,occurrence:1},e.tags.compareUrlAndFireResultantEvent={fn:ed,sync:!0}),e}setFunnelExps(e){var t,i;const n=null===(t=null==e?void 0:e.settings)||void 0===t?void 0:t.campaigns,o=[];for(const e in window._vwo_exp)if(window._vwo_exp[e].funnel)for(const t of window._vwo_exp[e].funnel){const e=t;(null===(i=window._vwo_exp[e.id])||void 0===i?void 0:i.g)||(window._vwo_exp[e.id]=e,window._vwo_exp[e.id].g=e.goals,window._vwo_exp[e.id].goals={},o.push(e.id+""),n&&(n[e.id]=window._vwo_exp[e.id]))}return o}sendMessageToParentFrame(e){return window.fetcher.getValue("VWO.modules.utils.initUtils.sendMessageToParentFrame",[e])}initializeCookieJar(e="ignoreCustomConfig"){for(var t,i=Array.prototype.slice.apply(vn).length,n=0;n<i;n++)if("config"===vn[n][0]){t=n;break}"number"==typeof t&&td.processEvent(["config",vn[t][1]],"jslib",vn,t,vn);var o=vn.config();"ignoreCustomConfig"!==e&&((o=o||{}).storage={strategy:"custom",backwardCompatible:!1,strategyConfig:{callback:this.sendMessageToParentFrame,cookieJarValue:this.getCookieJarValidValue(e)}}),ao.init(o&&o.storage)}getCookieJarValidValue(e){return["null",null,void 0,"undefined"].indexOf(e)>-1?"":e}setupCookieJar(e){let t;e&&(t=location.search.match(/.*_vwo_store=([^&]*)/),t=t?t[1]:""),this.initializeCookieJar(t)}}var nd=new id;class od{mergeNestedObjects(...e){return e.reduce(((e,t)=>this.recursivelyMerge(e,t)))}mergeNestedObjectsV2(e={mergeArrays:!1},...t){return t.reduce(((t,i)=>this.recursivelyMerge(t,i,{},e)))}createNestedObjects(e,t){let i=e;return t&&t.split(".").forEach((e=>{Object.prototype.hasOwnProperty.call(i,e)||(i[e]={}),i=i[e]})),i}clearNestedObject(e,t){let i=e;const n=t.split("."),o=n[n.length-1];for(let e=0;e<n.length-1;e++)i=i[n[e]];p(i[o])?i[o]={}:delete i[o]}recursivelyMerge(e,t,i={},n={mergeArrays:!1}){if(p(e)&&p(t)){const o={};Object.keys(e).concat(Object.keys(t)).forEach((e=>{o[e]=1}));const s=Object.getOwnPropertyDescriptors(e),r=Object.getOwnPropertyDescriptors(t);return Object.keys(o).forEach((o=>{r[o]?Object.defineProperty(i,o,r[o]):Object.defineProperty(i,o,s[o]),this.recursivelyMerge(e[o],t[o],i[o],n)})),i}return n.mergeArrays&&w(e)&&w(t)?(w(i)||(i=[]),i.splice(0,i.length,...e.concat(t)),i):t||e}}var sd=new od,rd,ad,dd;function ld(...e){return e[0]="VWO.modules.otherLibDeps."+e[0],window.fetcher.getValue(...e)}function cd(e){return ld('storeSurveyDataInVWOSurveySettings("${{1}}")',null,{captureGroups:[e]})}!function(e){e.SUM="sum",e.COUNT="count",e.AVG="avg",e.MIN="min",e.MAX="max",e.FIRST_VALUE="first",e.LAST_VALUE="last",e.MEAN="mean",e.MEDIAN="median"}(rd||(rd={})),function(e){e.SINCE="s",e.WITHIN="w",e.FROM="f"}(ad||(ad={})),function(e){e.DAYS="d",e.WEEKS="w",e.MONTHS="m",e.YEARS="y"}(dd||(dd={}));class ud{setItem(e,t){e=this.getKeyBasedOnMode(e),R.set(e,JSON.stringify(t))}getItem(e){return e=this.getKeyBasedOnMode(e),R.get(e)}removeItem(e){e=this.getKeyBasedOnMode(e),R.remove(e)}getKeyBasedOnMode(e){if(!window._vis_debug)return e;return"debug"+e+"_"+Object.keys(window._vwo_exp||{}).join("_")}}class gd extends ud{constructor(){super(...arguments),this.isStorageSyncerForCurrentSessionEnabled=!1,this.areEventHistSessionListenersAttached=!1,this.areUrlChangeListenersAttached=!1,this.areEventHistListenersAttached=!1}initialize(){this.eventHist=JSON.parse(this.getItem("_vwo_eventHist")||"{}"),this.eventHistForCurrentSession=JSON.parse(this.getItem("_vwo_eventHistSession")||"{}"),this.currentSessionEvents=window.VWO._.allSettings.dataStore.cSE||{},this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.customSyncURL=pr(),this.syncEventsConfig=this.customSyncURL?E.SEND_SYNC_CALL:window.VWO._.allSettings.dataStore.syncEvent||"sessionCreated",this.triggerEvents=[]}clearHistEventData(){window.VWO._.ac.cSHS?vd.clearsyE():(xo()||window._vis_heatmap||!Object.keys(this.syncEvents).length)&&vd.clearHistoricalDataOfType(pd.Events)}addEventHistSessionListeners(){(window.VWO._.ac.cSHS||Object.keys(this.currentSessionEvents).length||Object.keys(this.eventHistForCurrentSession).length)&&(this.isStorageSyncerForCurrentSessionEnabled||!Object.keys(this.currentSessionEvents).length&&!window.VWO._.ac.cSHS||(this.isStorageSyncerForCurrentSessionEnabled=!0,window.VWO.modules.utils.storageSyncer.add(this.getKeyBasedOnMode("_vwo_eventHistSession"),(e=>{try{this.eventHistForCurrentSession=JSON.parse(e)||{}}catch(e){}}))),this.areEventHistSessionListenersAttached||(window.VWO.phoenix.on(E.NEW_SESSION_CREATED,(()=>{this.clearEventHistSessionData()})),window.VWO.phoenix.on(E.TRACK_NEW_SESSION_CREATED,(()=>{this.clearEventHistSessionData()})),this.areEventHistSessionListenersAttached=!0))}clearEventHistSessionData(){this.eventHistForCurrentSession={},vd.clearHistoricalDataOfType(pd.SessionEvents)}addUrlChangeListener(){xo()||window._vis_heatmap||!Object.keys(this.syncEvents).length&&!Object.keys(this.currentSessionEvents).length||this.areUrlChangeListenersAttached||(window.VWO.phoenix.on(E.URL_CHANGED,(()=>{this.triggerEvents.forEach((e=>i(this,void 0,void 0,(function*(){(this.eventHist[e.eventName]||this.eventHistForCurrentSession[e.eventName])&&(yield window.VWO.phoenix.isValid(e.triggerName,e.trigger,e.eventName))})))),this.shouldSyncEvents=!window.VWO._.ac.cSHS&&!!Object.keys(this.syncEvents).length})),this.areUrlChangeListenersAttached=!0)}addEventHistListeners(){if(!xo()&&!window._vis_heatmap&&(window.VWO._.ac.cSHS||Object.keys(this.syncEvents).length||this.customSyncURL)&&!this.areEventHistListenersAttached){if(this.areEventHistListenersAttached=!0,window.VWO.modules.utils.storageSyncer.add(this.getKeyBasedOnMode("_vwo_eventHist"),(e=>{try{this.eventHist=JSON.parse(e)||{}}catch(e){}})),window.VWO._.ac.cSHS)return void this.addListenerForSyEUpdation();if(this.shouldSyncEvents=!0,window._vis_debug)return void this.addListenerForSyEUpdation();"pageView"===this.syncEventsConfig?window.VWO.phoenix.on(E.PAGE_VIEW,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})):this.syncEventsConfig===E.SEND_SYNC_CALL?window.VWO.phoenix.on(E.SEND_SYNC_CALL,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})):"sessionCreated"===this.syncEventsConfig&&(window.VWO.phoenix.on(E.NEW_SESSION_CREATED,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})),window.VWO.phoenix.on(E.TRACK_NEW_SESSION_CREATED,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})),this.addListenerForSyEUpdation())}}addListenersForHistoricalEvents(){this.addEventHistListeners(),this.addEventHistSessionListeners(),this.addUrlChangeListener()}addListenerForSyEUpdation(){const e=window.VWO.phoenix.on(E.PAGE_VIEW,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},window.VWO._.ac.cSHS||(JSON.stringify(this.syncEvents)!==this.getItem("_vwo_syE")&&(Object.keys(this.syncEvents).length&&this.setItem("_vwo_syE",this.syncEvents),this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)),window._vis_debug&&window.VWO.phoenix.off(E.PAGE_VIEW,e))}))}setEventHistInLS(e){this.eventHist[e].length?this.setItem("_vwo_eventHist",this.eventHist):delete this.eventHist[e]}setSessionEventHistInLS(e){this.eventHistForCurrentSession[e].length?this.setItem("_vwo_eventHistSession",this.eventHistForCurrentSession):delete this.eventHistForCurrentSession[e]}deleteUncessaryProps(e){const t=Object.assign({},e);return delete t.name,delete t.props,delete t._meta,delete t.time,delete t.page,delete t.isCustomEvent,delete t.executingTagTrigger,delete t._vwo,t}updateEventHist(e,t){var i,n;if(!xo()&&!window._vis_heatmap&&(window.VWO._.ac.cSHS||(null===(i=window._vwoCc)||void 0===i?void 0:i.syncServerUrl)||Object.keys(this.syncEvents).length||Object.keys(this.currentSessionEvents).length))if(window.VWO._.ac.cSHS||(null===(n=window._vwoCc)||void 0===n?void 0:n.syncServerUrl)){this.eventHist[e]=this.eventHist[e]||[],this.eventHistForCurrentSession[e]=this.eventHistForCurrentSession[e]||[];const i=this.deleteUncessaryProps(t);this.eventHistForCurrentSession[e].push(Object.assign({},i)),this.setSessionEventHistInLS(e),i.ts=t.time,this.eventHist[e].push(i),this.setEventHistInLS(e)}else{if(Object.keys(this.syncEvents).length){if(this.eventHist[e]=this.eventHist[e]||[],Object.prototype.hasOwnProperty.call(this.syncEvents,"*")){const i=this.deleteUncessaryProps(t);i.ts=t.time,this.eventHist[e].push(i)}else if(Object.prototype.hasOwnProperty.call(this.syncEvents,e)){const i={};if(Array.isArray(this.syncEvents[e]))for(let n of this.syncEvents[e])void 0!==t[n]&&(i[n]=t[n]);i.ts=t.time,this.eventHist[e].push(i)}this.setEventHistInLS(e)}if(Object.keys(this.currentSessionEvents).length){if(this.eventHistForCurrentSession[e]=this.eventHistForCurrentSession[e]||[],Object.prototype.hasOwnProperty.call(this.currentSessionEvents,"*")){const i=this.deleteUncessaryProps(t);this.eventHistForCurrentSession[e].push(i)}else if(Object.prototype.hasOwnProperty.call(this.currentSessionEvents,e)){const i={};if(Array.isArray(this.currentSessionEvents[e]))for(let n of this.currentSessionEvents[e])void 0!==t[n]&&(i[n]=t[n]);this.eventHistForCurrentSession[e].push(i)}this.setSessionEventHistInLS(e)}}}syncEventsData(){return i(this,void 0,void 0,(function*(){if(xo()||window._vis_heatmap||!Object.keys(this.syncEvents).length&&!this.customSyncURL)return;let e=yield ar.getUUID(window.VWO.phoenix.store.getters),t="";if(window._vis_debug){const i=ao.get("_vwo_uuid",!1,!0);if(!i)return;window._vwo_exp&&Object.keys(window._vwo_exp).length&&(e=i,t="&cId="+Object.keys(window._vwo_exp).join("|"))}const i=this.customSyncURL||window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com/",n="sync/events?a="+window._vwo_acc_id+"&uuid="+e+t;try{const e=yield fetch(i+n),t=yield e.json();this.eventHist=t,this.eventHist&&Object.keys(this.eventHist).length?this.setItem("_vwo_eventHist",this.eventHist):this.removeItem("_vwo_eventHist"),window.VWO.phoenix.trigger(E.SYNC_EVENTS_COMPLETED),this.validateHistEventsPostSync()}catch(e){window.VWO.phoenix.trigger(E.SYNC_EVENTS_COMPLETED),this.validateHistEventsPostSync(),$s.warn("Error in syncing historical Events Data.")}}))}validateHistEventsPostSync(){this.customSyncURL&&this.triggerEvents.forEach((e=>i(this,void 0,void 0,(function*(){yield window.VWO.phoenix.validateAndDispatchTriggerEvent(e.triggerName,e.trigger,{useUnsavedEvents:!0},e.eventName)}))))}getEventsByDate(e,t,i){var n,o;const s=Object.assign({},i);let r;if(delete s.page,delete s.isCustomEvent,delete s.name,"cs"===t)return r=[...this.eventHistForCurrentSession[e]||[],s],s.fromLocalStorage&&(r=[...this.eventHistForCurrentSession[e]||[]]),r;{r=[...this.eventHist[e]||[],Object.assign(Object.assign({},s),{ts:+new Date})],s.fromLocalStorage&&(r=[...this.eventHist[e]||[]]),s.useUnsavedEvents&&(r=[...this.eventHist[e]||[],...(null===(o=null===(n=window._VWO)||void 0===n?void 0:n.unsavedEventsHistory)||void 0===o?void 0:o[e])||[]]);const{firstDate:i,lastDate:a}=this.getDateRange(t,r),d=this.binSearchFirstIndex(i,r),l=this.binSearchLastIndex(a,r);return-1===d||-1===l?[]:r.slice(d,l+1)}}getDateRange(e,t){let i,n;const o=e.split("-"),s=o[0],r=o[1];return s===ad.SINCE?(n=new Date,i=new Date,r[r.length-1]===dd.DAYS?i.setDate(i.getDate()-Number(r.slice(0,r.length-1))):r[r.length-1]===dd.WEEKS?i.setDate(i.getDate()-7*Number(r.slice(0,r.length-1))):r[r.length-1]===dd.MONTHS?i.setMonth(i.getMonth()-Number(r.slice(0,r.length-1))):r[r.length-1]===dd.YEARS?i.setFullYear(i.getFullYear()-Number(r.slice(0,r.length-1))):i=new Date(r)):s===ad.FROM?(i=new Date(o[1]),n=new Date(o[2])):s===ad.WITHIN&&(i=new Date(t[0].ts),n=new Date(i),r[r.length-1]===dd.DAYS?n.setDate(i.getDate()+Number(r.slice(0,r.length-1))):r[r.length-1]===dd.WEEKS?n.setDate(i.getDate()+7*Number(r.slice(0,r.length-1))):r[r.length-1]===dd.MONTHS?n.setMonth(i.getMonth()+Number(r.slice(0,r.length-1))):r[r.length-1]===dd.YEARS?n.setFullYear(i.getFullYear()+Number(r.slice(0,r.length-1))):n=new Date(r)),i.setHours(0,0,0,0),n.setHours(23,59,59,59),i=+i,n=+n,{firstDate:i,lastDate:n}}binSearchFirstIndex(e,t){let i,n,o=0,s=t.length-1;for(;o<=s;)i=Math.floor((o-s)/2+s),n=t[i].ts,n>=e?s=i-1:o=i+1;return o>=t.length?-1:o}binSearchLastIndex(e,t){let i,n,o=0,s=t.length-1;for(;o<=s;)i=Math.floor((o-s)/2+s),n=t[i].ts,n>e?s=i-1:o=i+1;return s<0?-1:s}getCumulativeData(e,t){if(0===e.length)return{"*":{count:0}};const i={};for(let n in t){for(let o of e)i[n]=i[n]||{},"*"===n?(i[n].count=i[n].count||0,i["*"].count++):Object.prototype.hasOwnProperty.call(o,n)&&this.handleOps(o[n],t[n],i[n]);if(t[n].includes(rd.AVG)&&void 0!==i[n][rd.AVG]&&(i[n][rd.AVG]=i[n][rd.AVG].sum/i[n][rd.AVG].count),t[n].includes(rd.MEDIAN)&&void 0!==i[n][rd.MEDIAN]){const e=i[n][rd.MEDIAN],t=Math.floor(e.length/2),o=[...e].sort(((e,t)=>e-t));i[n][rd.MEDIAN]=e.length%2!=0?o[t]:(o[t-1]+o[t])/2}}return i}handleOps(e,t,i){e=+e;for(let n of t)switch(n){case rd.COUNT:i.count=i.count||0,i.count++;break;case rd.SUM:i.sum=i.sum||0,i.sum+=e;break;case rd.MIN:i.min=Math.min(e,i.min||e);break;case rd.MAX:i.max=Math.max(e,i.max||e);break;case rd.FIRST_VALUE:void 0===i.first&&(i.first=e);break;case rd.LAST_VALUE:i.last=e;break;case rd.AVG:i.avg=i.avg||{},i.avg.sum=i.avg.sum||0,i.avg.sum+=e,i.avg.count=i.avg.count||0,i.avg.count++;break;case rd.MEDIAN:i.median=i.median||[],i.median.push(e)}}}const hd=new gd,vd={get syncEvents(){return hd.syncEvents},get syncAttributes(){return Ed.syncVisAttrs},get eventHistory(){return hd.eventHist},get visitorProperties(){return Ed.visitorAttrs},clearHistoricalDataOfType(e){e===pd.Attributes?(R.remove(Ed.getKeyBasedOnMode("_vwo_syV")),R.remove(Ed.getKeyBasedOnMode("_vwo_visProps"))):e===pd.Events?(R.remove(hd.getKeyBasedOnMode("_vwo_syE")),R.remove(hd.getKeyBasedOnMode("_vwo_eventHist"))):e===pd.SessionEvents&&R.remove(hd.getKeyBasedOnMode("_vwo_eventHistSession"))},clearHistoricalData(e,t){window.VWO._.ac.cSHS||(Object.keys(t).length||(R.remove(hd.getKeyBasedOnMode("_vwo_syE")),R.remove(hd.getKeyBasedOnMode("_vwo_eventHist"))),Array.isArray(e)&&(null==e?void 0:e.length)||(R.remove(Ed.getKeyBasedOnMode("_vwo_syV")),R.remove(Ed.getKeyBasedOnMode("_vwo_visProps"))))},clearsyE(){R.remove(hd.getKeyBasedOnMode("_vwo_syE"))},clearsyV(){R.remove(Ed.getKeyBasedOnMode("_vwo_syV"))}};var pd;!function(e){e[e.Attributes=0]="Attributes",e[e.Events=1]="Events",e[e.SessionEvents=2]="SessionEvents"}(pd||(pd={}));class wd extends ud{constructor(){super(...arguments),this.areListenersAttachedAndStorageSyncerEnabled=!1}initialize(){var e;this.visitorAttrs=JSON.parse(this.getItem("_vwo_visProps")||"{}"),this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV||{},this.customSyncURL=pr(),this.syncAttrConfig=this.customSyncURL?E.SEND_SYNC_CALL:window.VWO._.allSettings.dataStore.syncAttr||"sessionCreated",xo()||window._vis_heatmap||!(window.VWO._.ac.cSHS||Array.isArray(this.syncVisAttrs)&&(null===(e=this.syncVisAttrs)||void 0===e?void 0:e.length)||this.customSyncURL)?vd.clearHistoricalDataOfType(pd.Attributes):(this.addListenerAndEnableStorageSyncer(),this.visitorAttrs&&Object.keys(this.visitorAttrs).length&&this.addAttrToGetters())}addListenerAndEnableStorageSyncer(){this.areListenersAttachedAndStorageSyncerEnabled||(window.VWO._.ac.cSHS?vd.clearsyV():(this.shouldSyncAttr=!0,this.addVisAttrListeners()),this.storageSyncAcrossTabs(),this.areListenersAttachedAndStorageSyncerEnabled=!0)}storageSyncAcrossTabs(){window.VWO.modules.utils.storageSyncer.add(this.getKeyBasedOnMode("_vwo_visProps"),(e=>{try{this.visitorAttrs=JSON.parse(e)||{}}catch(e){}}))}addVisAttrListeners(){window._vis_debug?this.addListenerForSyVUpdation():("pageView"===this.syncAttrConfig?window.VWO.phoenix.on(E.PAGE_VIEW,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})):this.syncAttrConfig===E.SEND_SYNC_CALL?window.VWO.phoenix.on(E.SEND_SYNC_CALL,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})):"sessionCreated"===this.syncAttrConfig&&(window.VWO.phoenix.on(E.NEW_SESSION_CREATED,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})),window.VWO.phoenix.on(E.TRACK_NEW_SESSION_CREATED,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})),this.addListenerForSyVUpdation()),window.VWO.phoenix.on(E.URL_CHANGED,(()=>{this.shouldSyncAttr=!0})))}addListenerForSyVUpdation(){const e=window.VWO.phoenix.on(E.PAGE_VIEW,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,JSON.stringify(this.syncVisAttrs)!==this.getItem("_vwo_syV")&&(Array.isArray(this.syncVisAttrs)&&this.syncVisAttrs.length&&this.setItem("_vwo_syV",this.syncVisAttrs),this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)),window._vis_debug&&window.VWO.phoenix.off(E.PAGE_VIEW,e)}))}updateVisAttr(e){var t,i,n;if(!xo()&&!window._vis_heatmap&&(window.VWO._.ac.cSHS||(null===(t=window._vwoCc)||void 0===t?void 0:t.syncServerUrl)||Array.isArray(this.syncVisAttrs)&&(null===(i=this.syncVisAttrs)||void 0===i?void 0:i.length))){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(window.VWO._.ac.cSHS||(null===(n=window._vwoCc)||void 0===n?void 0:n.syncServerUrl)||this.syncVisAttrs.includes("*")||this.syncVisAttrs.includes(t))&&(this.visitorAttrs[t]=e[t]);try{Object.keys(this.visitorAttrs).length&&this.setItem("_vwo_visProps",this.visitorAttrs)}catch(e){}}}syncVisData(){var e;return i(this,void 0,void 0,(function*(){if(xo()||window._vis_heatmap||window.VWO._.ac.cSHS||(!Array.isArray(this.syncVisAttrs)||!(null===(e=this.syncVisAttrs)||void 0===e?void 0:e.length))&&!this.customSyncURL)return;let t=yield ar.getUUID(window.VWO.phoenix.store.getters),i="";if(window._vis_debug){const e=ao.get("_vwo_uuid",!1,!0);if(!e)return;Object.keys(window._vwo_exp||{}).length&&(t=e,i="&cId="+Object.keys(window._vwo_exp).join("|"))}const n=this.customSyncURL||window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com/",o="sync/attributes?a="+window._vwo_acc_id+"&uuid="+t+i;try{const e=yield fetch(n+o),t=yield e.json();this.visitorAttrs=t,this.visitorAttrs&&Object.keys(this.visitorAttrs).length?(this.setItem("_vwo_visProps",this.visitorAttrs),this.addAttrToGetters()):this.removeItem("_vwo_visProps")}catch(e){$s.warn("Error in syncing Historical Attributes Data.")}}))}addAttrToGetters(){for(const e in this.visitorAttrs)Object.prototype.hasOwnProperty.call(this.visitorAttrs,e)&&window.VWO.phoenix.store.actions.set(e,this.visitorAttrs[e],"")}}const Ed=new wd;function fd(e,t,i){const n=window.VWO;switch(e.toLowerCase()){case"tags":n.phoenix.tags.add(t,i.fn);break;case"operators":n.phoenix.operators.add(i.fn);break;case"storages":n.phoenix.storages.add(i);break;case"store":n.phoenix.store.actions.addValues(i)}}class _d{constructor(e){this.toJSON=function(){const e=Object.assign({},this);return delete e.modules,e},Object.keys(e).forEach((t=>{this[t]=e[t]}))}config(e){return e&&(this.configSettings=e),this.configSettings}definePlugin(e,t={}){const i=e.split(".")[0],n=e.split(".")[1],o=window.VWO;o.phoenix?fd(i,n,t):(o.pluginStorage=o.pluginStorage||{},o.pluginStorage[i]=o.pluginStorage[i]||{},n?(o.pluginStorage[i][n]=o.pluginStorage[i][n]||{},o.pluginStorage[i][n]=sd.mergeNestedObjects(o.pluginStorage[i][n],t)):o.pluginStorage[i]=sd.mergeNestedObjects(o.pluginStorage[i],t))}updateSettings(e,t,n){var o,s,r,a,d;return i(this,void 0,void 0,(function*(){const i=window.VWO._.allSettings.dataStore.campaigns,l=this.phoenix.store.getters,c=null===(o=t.dataStore)||void 0===o?void 0:o.campaigns,u=Array.isArray(window._VWO.fSeg)?window._VWO.fSeg:[];if(c)for(const e in c)(i[e]||u.includes(e))&&delete c[e];const g=JSON.parse(JSON.stringify(c)),h=JSON.parse(JSON.stringify((null===(s=t.dataStore)||void 0===s?void 0:s.syE)||{})),v=JSON.parse(JSON.stringify((null===(r=t.dataStore)||void 0===r?void 0:r.syV)||{})),p=JSON.parse(JSON.stringify((null===(a=t.dataStore)||void 0===a?void 0:a.cSE)||{})),w=Object.keys(g);for(var f in c)window.VWO._.allSettings.dataStore.campaigns[f]=c[f],c[f]=window.VWO._.allSettings.dataStore.campaigns[f];this.phoenix.add(t),1!==n&&4!==n||window.fetcher.getValue("VWO._.phoenixMT.trigger",["vwo_campaignsLoaded"]),ar.checkAndInitializeClickClass(),this.phoenix.store.actions.addValues({currentSettings:this.phoenix.settings.currentSettings},"root"),window.VWO._.allSettings.dataStore.syE=h,window.VWO._.allSettings.dataStore.syV=v,window.VWO._.allSettings.dataStore.cSE=p,window.VWO.modules.eventHistHandler.syncEvents=h,window.VWO.modules.eventHistHandler.currentSessionEvents=p,window.VWO.modules.eventHistHandler.addListenersForHistoricalEvents(),(window.VWO._.ac.cSHS||Array.isArray(v)&&(null==v?void 0:v.length))&&Ed.addListenerAndEnableStorageSyncer(),vd.clearHistoricalData(v,h),cd(g);const _=nd.setFunnelExps(this.phoenix.store.getters);w.push(..._),ar.setCampaignIds(w),ar.setThirdPartyCookiesForApplicableCamps(this.phoenix.store.getters);for(const e in window.VWO._.allSettings.dataStore.campaigns)Object.prototype.hasOwnProperty.call(window.VWO._.allSettings.dataStore.campaigns,e)&&fa.serializeData(window.VWO._.allSettings.dataStore.campaigns[e]);if(window.fetcher.getValue("VWO._.loadNonTestingLibraries",[w,n]),(2==n||5==n||4===n&&l.previousUrl&&l.previousUrl!==l.currentUrl)&&(this.phoenix.trigger(ks.PAGE_LOAD_EVENT),yield ar.firePageViewEvent({shouldFireDomLoad:!0})),(4===n||2==n)&&e)for(var f in g)ar.isSessionBasedCampaign2(g[f])&&(null===(d=window.VWO._.track)||void 0===d?void 0:d.isUserBucketed())&&(yield Ts(this.phoenix,E._ACTIVATED,{id:f}));window.VWO.push(["setVariation"]),window.VWO._.updateSettingsSuccess=1}))}addPhoenix(e){this.event=function(t,i,n){pr()&&(window._VWO.unsavedEventsHistory=window._VWO.unsavedEventsHistory||{},window._VWO.unsavedEventsHistory[t]=window._VWO.unsavedEventsHistory[t]||[],window._VWO.unsavedEventsHistory[t].push(Object.assign(Object.assign({},i),{ts:Date.now(),VWO:{firedTime:this.ts}}))),(i=i||{}).isCustomEvent=!0,i.page=cs.page,Ts(e,t,i,(()=>{var e;window.VWO.modules.eventHistHandler.updateEventHist(t,i),pr()&&(null===(e=window._VWO.unsavedEventsHistory)||void 0===e||delete e[t]),null==n||n()}))},this.phoenix=e}splice(...e){const t=this.queue.splice.apply(this.queue,e);return this.length=this.queue.length,t}push(...e){const t=this.queue.push.apply(this.queue,e);return this.length=this.queue.length,this[this.length-1]=this.queue[this.queue.length-1],t}sort(...e){return this.queue.sort.apply(this.queue,e)}visitor(e){if(!e)return;const t=e.$metaData;delete e.$metaData;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.phoenix.store.actions.set(t,e[t],"");Ts(this.phoenix,E.SYNC_VISITOR_PROP,{$visitor:{props:e},$metaData:t,isCustomEvent:!0},(()=>{Ed.updateVisAttr(e)}))}syncAttributes(){Ed.syncVisData()}syncEvents(){window.VWO.modules.eventHistHandler.syncEventsData()}}class md{otherSide(...e){return e[0]="VWO.modules.tags.backwardCompatibilityUtils."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}}class Od{}function Sd(e){const t=[];return e.forEach((e=>{var i;null===(i=e.filters)||void 0===i||i.forEach(((i,n)=>{const o=i[0].substring(0,i[0].indexOf("."));if("event"===o||"page"===o){const o=JSON.parse(JSON.stringify(i));t.push({condition:o,triggerName:e.triggerName,condId:e.id,filterId:n})}}))})),t}let yd,Td={promise:new Promise((function(e){yd=e})),resolve:yd};class Cd extends Od{constructor(e){super(),this.eventName=ks.CLICK_EVENT,this.attachedFilters=e&&Sd(e)||[],window.VWO.isVwoClickClassInitialized=!0}initializeMT(){return[this.attachedFilters]}eventConditionsUpdate(e){e&&(this.attachedFilters=[...this.attachedFilters,...Sd(e)],this.otherSide("eventConditionsUpdate",[this.attachedFilters]))}isGoalEligible(e,t,i){return fa.isGoalEligible(e,window.VWO.phoenix.store.getters,window.VWO.phoenix)}registerConversion(e,t,n){return i(this,void 0,void 0,(function*(){yield fa.registerConversion(window.VWO.phoenix.store.getters,t,n)}))}on(e){Td.promise.then((t=>{this.otherSide("on",[e,{serverUrl:t.serverUrl,vwoUUID:t.vwoUUID,useCapturePhase:t.settings.plugins.DACDNCONFIG.UCP}])}))}off(){}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Id=zn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.ClickDomEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.ClickDomEvent"},Cd,!0,(e=>e.initializeMT()));let Nd;window.VWO.modules.phoenixPlugins.events.predefinedEvents.ClickDomEvent=Id;let Ad={promise:new Promise((e=>{Nd=e})),resolve:Nd};class Vd extends Od{constructor(e){super(),this.eventName=E.DOM_SUBMIT,this.attachedFilters=Sd(e)}initializeMT(){return[this.attachedFilters]}eventConditionsUpdate(e){e&&(this.attachedFilters=[...this.attachedFilters,...Sd(e)],this.otherSide("eventConditionsUpdate",[this.attachedFilters]))}isGoalEligible(e,t,i){return fa.isGoalEligible(e,window.VWO.phoenix.store.getters,window.VWO.phoenix)}registerConversion(e,t,n){return i(this,void 0,void 0,(function*(){yield fa.registerConversion(window.VWO.phoenix.store.getters,t,n)}))}on(e){Ad.promise.then((t=>{this.otherSide("on",[e,{vwoUUID:t.vwoUUID,useCapturePhase:t.settings.plugins.DACDNCONFIG.UCP}])}))}off(){}otherSide(...e){throw new Error("entered into outdated otherSide")}}const bd=zn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.SubmitDomEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.SubmitDomEvent"},Vd,!0,(e=>e.initializeMT()));window.VWO.modules.phoenixPlugins.events.predefinedEvents.SubmitDomEvent=bd;const Rd=function(){};class Pd extends md{sendRegisterCall(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(o=o||Rd,s.visDebug||xo())return o(),!0;var i,r,a=yield ar.createUUIDCookie2(s,n),d=yield ar.extraData2(),l="",c=null;if((yield s.vwoInternalProperties.sessionInfoService.shouldSendSessionInfoInCall())&&(l="&sId="+(c=yield s.vwoInternalProperties.sessionInfoService.getSessionId()),yield s.vwoInternalProperties.sessionInfoService.setSNCookieValueByIndex2(No.SESSION_SYNCED_STATE_INDEX,1)),Oo.includes(window._vwo_acc_id)&&"l.gif"==e){let e=window.localStorage.getItem("vwo_newSessionCreated");try{e=JSON.parse(e)||{}}catch(t){e={}}const t="new"==e.user;if(null==e||delete e.user,t){const t=0==Object.keys(e).length,i=!t&&(null==e?void 0:e.sessionId)!=c,o=!t&&(null==e?void 0:e.uuid)!=a;if(i||o||t){let r="Session didn't create properly due to";t&&(r+=" session call failure"),i&&(r+=" session id mismatch"),o&&(r+=" uuid mismatch"),window.VWO._.customError&&window.VWO._.customError({msg:r,url:"utilsWT.ts",lineno:71,colno:5,source:JSON.stringify({lastSessionData:e,current:{uuid:a,sessionIdStore:c,sessionCookie:window.VWO._.cookies.get(No.TRACK_SESSION_COOKIE_NAME)},expId:(null==n?void 0:n.id)||"not-found",cURL:s.currentUrl})})}}}const u=encodeURIComponent(d),g=d;d=n.ps||void 0===n.ps?"&ed="+u:"",i="&s="+(n.version>=4?vn.data.vi&&"new"===vn.data.vi.vt?1:2:parseInt(((yield s.storages.storages.cookies.get("_vis_opt_s"))||"").split("|")[0],10)),r=e+"?experiment_id="+n.id+"&account_id="+s.accountId+"&cu="+encodeURIComponent(s.currentUrl)+"&combination="+t+i+l+ar.getUUIDString(a)+d;try{d&&JSON.parse(decodeURIComponent(u)).lt}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:`extraData(ed) is not a JSON string [while sending call for '${e}']`,url:"utilsWT.ts",lineno:101,colno:5,source:JSON.stringify({extraData:g,lt:(new Date).getTime(),referrer:ls.get(),requestURL:r})})}ar.isSessionBasedCampaign2(n)||"SURVEY"===n.type||(yield this.otherSide('sendRegisterCall("${{1}}", "${{2}}", "${{3}}")',null,[s,r,o]))}))}markRevenueGoal(e,t,n){return i(this,void 0,void 0,(function*(){if(void 0!==(yield window.fetcher.getValue("_vis_opt_revenue"))){n.trigger(E.CONVERT_REVENUE_GOALS_FOR_EXPERIMENT,{oldArgs:[e.id,window._vis_opt_revenue]});const i=Lo(e.goals);let o,s=i.length;for(;s--;)o=i[s],"REVENUE_TRACKING"===e.goals[o].type&&fa.isGoalEligible(e.goals[o],t,n)&&(yield fa.registerConversion(t,o,e,window._vis_opt_revenue))}}))}pollForNewVisitor({vwoEvents:e,getters:t}){const n=this;ar.addListener(t,e,{eventName:E.SEND_NEW_VISITOR_CALL},(function(e){return i(this,void 0,void 0,(function*(){const{combination:i,campaignData:o,callbackFn:s}=e;yield n.sendRegisterCall("l.gif",i,o,s,t)}))}))}goalRevenuePoll({vwoEvents:e,getters:t}){const n=this;ar.addListener(t,e,{eventName:E.VARIATION_SHOWN},(function(o){return i(this,void 0,void 0,(function*(){const i=t.settings.campaigns[o.props.id];yield n.markRevenueGoal(i,t,e)}))}))}customGoalConversion(e,t){return i(this,void 0,void 0,(function*(){const i=vn.phoenix.store.getters;if(isNaN(parseInt(e,10)))return;vn.phoenix.trigger(E.CONVERT_GOAL_FOR_ALL_EXPERIMENTS,{oldArgs:[e]});var n,o=Lo(i.settings.campaigns);let s=o.length;for(;s--;)n=o[s],"object"==typeof i.settings.campaigns[n].goals[e]&&"TRACK"===i.settings.campaigns[n].type===t&&fa.isGoalEligible(i.settings.campaigns[n].goals[e],vn.phoenix.store.getters,vn.phoenix)&&(yield fa.registerConversion(vn.phoenix.store.getters,e,i.settings.campaigns[n]))}))}customRevenueConversion(e,t){return i(this,void 0,void 0,(function*(){const i=vn.phoenix.store.getters;if(isNaN(parseFloat(e)))return;var n,o,s;vn.phoenix.trigger(E.CONVERT_ALL_VISIT_GOALS_FOR_EXPERIMENT,{oldArgs:[e]});var r,a=Lo(i.settings.campaigns);let d=a.length;for(;d--;)if(r=a[d],"TRACK"===i.settings.campaigns[r].type===t)for(s=(o=Lo(i.settings.campaigns[r].goals)).length;s--;)n=o[s],"REVENUE_TRACKING"===i.settings.campaigns[r].goals[n].type&&fa.isGoalEligible(i.settings.campaigns[r].goals[n],window.VWO.phoenix.store.getters,window.VWO.phoenix)&&(yield fa.registerConversion(window.VWO.phoenix.store.getters,n,i.settings.campaigns[r],e))}))}delayedGoalConversion(e){return i(this,void 0,void 0,(function*(){let t;const i=vn.phoenix,n=i.store.getters,o=n.settings.campaigns[e.campaignId];e=e||{};const s=window.tracklib;"TRACK"===e.type?t=yield s.isGoalIncluded(e.goalId):"FUNNEL"===e.type?t=yield s.isFunnelIncluded(e.campaignId):ar.isAnalyzeCampaign(e.type)&&(t=yield s.isAnalyzeCampaignIncluded(e.campaignId)),fa._triggerGoalConversion(i,n,e.goalId,o,e.revenue,!1,{combination:t})}))}makeSessionAndTagCall(e,t){const n=this;ar.addListener(e,t,{eventName:E.DIMENSION_TAG_PUSHED},(function(e){return i(this,void 0,void 0,(function*(){const{props:t}=e;yield n.otherSide('makeCallForTagsAndSession("${{1}}", "${{2}}")',null,[t,"sessionUpdate"])}))}))}initialise({event:e,actions:t,vwoEvents:n,data:o,getters:s}){return i(this,void 0,void 0,(function*(){for(const e in s.settings.campaigns)Object.prototype.hasOwnProperty.call(s.settings.campaigns,e)&&fa.serializeData(s.settings.campaigns[e]);this.attachEventListeners(s),this.pollForNewVisitor({event:e,actions:t,vwoEvents:n,data:o,getters:s}),this.goalRevenuePoll({event:e,actions:t,vwoEvents:n,data:o,getters:s}),yield this.declareVWOAPI(),this.makeSessionAndTagCall(s,n)}))}attachEventListeners(e){Td.resolve(e),Ad.resolve(e)}declareVWOAPI(){return i(this,void 0,void 0,(function*(){yield this.otherSide("declareVWOAPI()",null,[])}))}}window.VWO.modules.tags.activate=function(){return i(this,void 0,void 0,(function*(){const{getters:e,actions:t}=window.VWO.phoenix.store;Ya.resetTriggerStates(),Ya.resetExpParams(e,t),Ya.resetTriggerExecutionCount(e),ar.firePageViewEvent()}))};const xd=new Pd;window.VWO.modules.tags.backwardCompatibilityUtils=xd;class Dd{}function Ld(...e){return e[0]="VWO.modules.tags."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}class Ud extends Dd{execute({event:e,actions:t,vwoEvents:n,data:o,getters:s}){return i(this,void 0,void 0,(function*(){ar.addListener(s,n,{eventName:"*"},(function(e,t){Ld('wildCardCallback("${{1}}", "${{2}}")',null,[e,t])}));const i=xd.initialise({event:e,actions:t,vwoEvents:n,data:o,getters:s}),r=window.fetcher.getValue("VWO.modules.tags.backwardCompatibility");yield Promise.all([i,r])}))}}const Wd=new Ud,kd=Wd.execute;window.VWO.modules.tags.backwardCompatibility=kd;class Md extends Od{constructor(e,t,i){super();const n=`${Us.DOM}_`;this.eventName=e,this.domEventsDebounceTime=i,this.domEventName=e.includes(n)?e.substr(n.length):e,this.attachedFilters=Sd(t)}initializeMT(){return[this.eventName,this.domEventName,this.domEventsDebounceTime,this.attachedFilters]}eventConditionsUpdate(e){e&&(this.attachedFilters=[...this.attachedFilters,...Sd(e)],this.otherSide("eventConditionsUpdate",[this.attachedFilters]))}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Gd=zn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.GenericDOMEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.GenericDOMEvent"},Md,!0,(e=>e.initializeMT()));window.VWO.modules.phoenixPlugins.events.predefinedEvents.GenericDOMEvent=Gd;class Fd extends Od{constructor({occurrence:e=1e3}={}){super(),this.eventName=Ws.TIMER,this.occurrence=e,this.start=Date.now()}eventConditionsUpdate(){this.start=Date.now()}on(e){this.interval=window.setInterval((()=>{const t={time:Date.now(),timeSpent:Math.floor((Date.now()-this.start)/1e3)};e(t)}),this.occurrence)}off(){window.clearInterval(this.interval)}}class jd extends Od{constructor(e){super(),this.eventName=ks.URL_CHANGE,this.events=e||["pushState","replaceState","hashchange","popstate"]}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Hd=zn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.UrlChangeEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.UrlChangeEvent"},jd);window.VWO.modules.phoenixPlugins.events.predefinedEvents.UrlChangeEvent=Hd;class $d extends Od{constructor(){super(...arguments),this.eventName=ks.LEAVE_INTENT}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Bd=zn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.LeaveIntentEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.LeaveIntentEvent"},$d);window.VWO.modules.phoenixPlugins.events.predefinedEvents.LeaveIntentEvent=Bd;class Jd extends Od{constructor(){super(...arguments),this.eventName=ks.PAGE_LOAD_EVENT}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Kd=zn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.PageLoadEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.PageLoadEvent"},Jd);window.VWO.modules.phoenixPlugins.events.predefinedEvents.PageLoadEvent=Kd;var zd=Object.freeze({__proto__:null,GenericDomEvent:Gd,TimeEvent:Fd,UrlChangeEvent:Hd,LeaveIntentEvent:Bd,ClickDomEvent:Id,SubmitDomEvent:bd,PageLoadEvent:Kd});const Yd=e=>!!e,Xd=function(e,t,i){if(e&&t){const n=e.countryCode,o=e.city,s=e.region;return el.f_in_list(n,t,i)||el.f_in_list(`${n}-${s}`,t,i)||el.f_in_list(`${n}-${s}-${o}`,t,i)}},qd=function(e,t,i){if(e&&t){const n=e.countryCode,o=e.city,s=e.region;return el.f_nin_list(n,t,i)&&el.f_nin_list(`${n}-${s}`,t,i)&&el.f_nin_list(`${n}-${s}-${o}`,t,i)}},Qd=(e,t,i)=>{if(!Yd(e))return!1;const n=i.syncGet("fns.list",[e,t]);return!!n.dataPresent&&n.val},Zd=(e,t,i)=>{if(""===e)return!0;if(!Yd(e))return!1;const n=i.syncGet("fns.list",[e,t]);return!!n.dataPresent&&!n.val},el={f_in_list:Qd,f_nin_list:Zd,f_in_loc:Xd,f_nin_loc:qd};class tl{constructor(e){window.VWO._.contentSyncService=new co({strategy:["ls"]},e,window.VWO.data.content)}}function il(){try{queueMicrotask((()=>{}))}catch(e){self.queueMicrotask=function(e){Promise.resolve().then(e)}}}class nl{constructor(){this.queue={}}add(e,t){this.queue[e]=this.queue[e]||[],this.queue[e].push(t),this.otherSide("addListener",[e])}processQueue(e,t){this.queue[e]&&this.queue[e].length&&this.queue[e].forEach((e=>{e(t)}))}otherSide(...e){e[0]="VWO.modules.utils.storageSyncer."+e[0],window.fetcher.getValue(...e)}}const ol=new nl;function sl(...e){return e[0]="VWO.modules.settingsCaching."+e[0],window.fetcher.getValue(...e)}function rl(e){return i(this,void 0,void 0,(function*(){e.vwoCode&&sl("initializeCaching")}))}function al(){window.VWO.phoenix.on(E.CAMPAIGN_FLOW_START,(()=>{window.VWO._.previewDebuggerBooted=new Promise((e=>{const t=window.VWO.phoenix.on(E.TIB_DONE,(()=>{window.VWO.phoenix.off(E.TIB_DONE,t),e()}))}))}))}window.VWO.modules.utils.storageSyncer=ol,window.functionWrapper=new K,window.fetcher.init();const dl=window.VWO;window.VWO._.cookieInitWT=e=>{ao.setJar(e)},window.setVWO=e=>{const t=new _d(e);pn(t),wn(t),window.VWO.modules=dl.modules,Object.assign(window.VWO._,dl._)},window.phoenixInstantiate=()=>{var e;try{window=Object.assign(window,window.fakeWindow),delete window.fakeWindow,window.window=window,document=window.document;const t=window.VWO;window.VWO._.isWorkerThread=!0;const i=window.VWOSettings;if(i[1]=Object.assign(i[1],nd.getPhoenixConfig()),window.VWO.consentMode){const e=ao.get;ao.get=function(...t){const i=window.VWO.consentMode;if(!i.dT){if(i.hT){const e=window.VWO.modules.utils.consentModeUtils.getGoalCookie(t[0]);if(e)return e}return e.apply(ao,t)}}}i[1].storages.cookies=ao;const n=new U;window._vwo_exp=window.VWO._.allSettings.dataStore.campaigns,window._vwo_exp=n.register(g.Object,"_vwo_exp",window._vwo_exp),window.VWO._.allSettings.dataStore.campaigns=window._vwo_exp,n.register(g.Document,"cookie"),window._vwo_surveySettings=n.register(g.Object,"_vwo_surveySettings",window._vwo_surveySettings),window.tracklib=n.register(g.Object,"",{},"",!1),n.register("custom","localStorage"),i[0]=window.VWO._.allSettings,t.definePlugin("props",cs),i[2]=t.pluginStorage,window.VWO.modules.eventHistHandler=hd,window.VWO.modules.eventHistHandler.initialize(),window.phoenix=new un(i,{preDefinedEvents:zd});new tl(window.phoenix.store.getters.serverUrl);window.phoenix.store.actions.addValues({currentSettings:window.phoenix.settings.currentSettings},"root"),window.VWO.addPhoenix(window.phoenix),ar.addListenerForSessionInitComplete(),ar.isBot2()||ar.checkAndInitializeClickClass(),window.phoenix.store.getters.flags=window.phoenix.store.getters.flags||{},window.phoenix.store.getters.flags.cookieLessModeEnabled=!!window.VWO._.cLFE,Ed.initialize(),window.VWO.modules.eventHistHandler.clearHistEventData(),window.VWO.modules.eventHistHandler.addListenersForHistoricalEvents(),kd({event:void 0,data:void 0,getters:window.phoenix.store.getters,actions:window.phoenix.store.actions,vwoEvents:window.phoenix}),t.phoenix.operators.add("inlist",(function(e,t){return!!el.f_in_list(e,t,window.VWO._.contentSyncService)})),t.phoenix.operators.add("ninlist",(function(e,t){return!!el.f_nin_list(e,t,window.VWO._.contentSyncService)})),t.phoenix.operators.add("inloclist",(function(e,t){return!!el.f_in_loc(e,t,window.VWO._.contentSyncService)})),t.phoenix.operators.add("ninloclist",(function(e,t){return!el.f_nin_loc(e,t,window.VWO._.contentSyncService)})),window.isInsightsOnConsentEnabled&&(t._.insightsOnConsentPromise=new Promise((e=>{t.phoenix.on("trigger.InsightsOnConsentTrigger",e)}))),window.VWO.phoenix.store.getters.settings.campaigns=window._vwo_exp,i[1].storages.cookies.domain=window.VWO.phoenix.store.getters.cookieDomain;const o=window.phoenix.store.getters,s=o.settings.plugins,r={vwoData:{accountJSInfo:null===(e=o.settings.vwoData)||void 0===e?void 0:e.accountJSInfo}};s&&(r.plugins={DACDNCONFIG:s.DACDNCONFIG}),window.phoenix.on(E.RETRACK_VISITOR,(()=>{const{getters:e,actions:t}=window.VWO.phoenix.store;Ya.resetExpParams(e,t,!0)})),il(),As();return queueMicrotask((()=>{al(),window.VWO._.visibilityTriggered=new Promise((e=>{const t=window.phoenix.on(E.VISIBILITY_TRIGGERED,(()=>{window.phoenix.off(t),e()}))})),pr()&&(window.VWO._.syncEventsCallCompleted=new Promise((e=>{const t=window.phoenix.on(E.SYNC_EVENTS_COMPLETED,(()=>{window.phoenix.off(t),e()}))}))),window.VWO._.insightsUtils.activateFunnels(),pr()&&Ts(t.phoenix,E.SEND_SYNC_CALL,{}),Ts(t.phoenix,E.POST_INIT,{}).then((()=>{window.fetcher.getValue("VWO.modules.utils.libUtils.initAuxiliaryPageView"),rl(o)}))})),{cookieDomain:o.cookieDomain,accountId:o.accountId,flags:o.flags,vwoInternalProperties:{},settings:r}}catch(e){window.vwo_libExecuted=!0,window.fetcher.setValue("vwo_libExecuted",!0),window.fetcher.getValue("window._removeVwoGlobalStyle"),$s.error("Error in phoenix initialization at worker:",e.stack)}}})();

</script>

</body>
</html>
