import{a as le,r as W,l as $,m as S,o as t,p as s,q as o,c as y,u as e,a9 as Xe,s as m,x as d,w as c,a2 as I,H as D,G as Q,t as b,A as be,B as Ce,e as ke,v as x,I as Ye,b as Ze,f as E,h as eo,i as oo,z,a1 as J,a3 as K,y as T,aa as fe,C as to}from"./entry.be43a630.js";import{_ as lo}from"./product-list.d8b1b851.js";import{_ as so}from"./design-list.e3cf6605.js";import{_ as no}from"./loading-more.f68c3d6b.js";import{_ as ao}from"./member-detail.248df319.js";import{_ as io,a as co}from"./register.c4f0e784.js";import{_ as ro}from"./dialog.45e10f12.js";import{_ as uo}from"./client-only.60925487.js";import{u as _o}from"./use-member-service.8c90a4a7.js";import{u as mo}from"./use-seller-public-shop-service.5e22b69c.js";const se=a=>(be("data-v-772451b1"),a=a(),Ce(),a),po={class:"container"},go={class:"filter-container"},vo={class:"filter category-filter"},ho=se(()=>o("div",null,"Category",-1)),fo=se(()=>o("div",{class:"line"},null,-1)),bo=["onClick"],Co=se(()=>o("div",{class:"line"},null,-1)),ko={key:0,class:"right-line"},yo={__name:"product-filter",props:{modelValue:{type:Object,default:()=>({caption:"",categories:[],tags:[],priceRange:[0,300]})},inputTag:{type:String,default:""},mobileMode:{type:Boolean,default:!1}},emits:["update:modelValue","search","category-change","add-tag-filter"],setup(a,{emit:r}){const g=a;W(!0);const v=W(!0);W(!0);const u=$({get(){return g.modelValue},set(h){r("update:modelValue",h)}});return $({get(){return g.inputTag},set(h){r("update:inputTag",h)}}),(h,p)=>{const O=S("el-input"),F=S("ArrowUpBold"),N=S("el-icon");return t(),s("div",po,[o("div",go,[a.mobileMode?m("",!0):(t(),y(O,{key:0,modelValue:e(u).caption,"onUpdate:modelValue":p[0]||(p[0]=_=>e(u).caption=_),class:"search",placeholder:"Search products","prefix-icon":e(Xe),onInput:p[1]||(p[1]=_=>e(u).caption=e(u).caption.replace(/[\[\]%_^]/g,"")),onChange:p[2]||(p[2]=_=>r("search"))},null,8,["modelValue","prefix-icon"])),o("div",vo,[o("div",{class:"title",onClick:p[3]||(p[3]=_=>v.value=!e(v)||a.mobileMode)},[ho,a.mobileMode?m("",!0):(t(),y(N,{key:0,class:I(["arrow",e(v)?"active":""])},{default:d(()=>[c(F)]),_:1},8,["class"]))]),fo,o("div",{class:I(["toggle",e(v)?"active":""])},[(t(!0),s(D,null,Q(e(u).categories,(_,w)=>(t(),s("div",{key:w,class:"filter-item",onClick:H=>r("category-change",_)},[(t(),s("div",{class:I(["checkbox",_.selected?"active":""]),key:w},null,2)),o("span",{class:I(["check-name",_.selected?"active":""])},b(_.name),3)],8,bo))),128))],2),Co])]),a.mobileMode?m("",!0):(t(),s("div",ko))])}}},$o=le(yo,[["__scopeId","data-v-772451b1"]]);const So={class:"collection-container"},wo={class:"filters-container"},Vo={class:"title"},xo={key:0},Mo={key:1},Lo={class:"count"},Po={class:"filters"},To={class:"collection-filter-item"},Io={class:"collection-list"},No={class:"item-content"},Ao=["onClick"],Uo={class:"image-slot"},Bo={class:"title-content"},Do={class:"count"},Fo={class:"collection-products"},Ro={class:"image-slot"},jo={__name:"collection-list",props:{modelValue:{type:Object,default:()=>[]},searchParams:{type:Object,default:()=>({caption:"",categories:[],tags:[],priceRange:[0,300]})},listingMode:{type:Boolean,default:!1},selectedCollection:{type:Object,default:()=>null}},emits:["update:searchParams","select-collection"],setup(a,{emit:r}){const g=a;ke();const v=$(()=>window.innerWidth>=2e3?6:window.innerWidth>=1800?5:window.innerWidth>=1600?4:window.innerWidth>=1330?3:2),u=$({get(){return g.modelValue}});$({get(){return g.searchParams},set(p){r("update:searchParams",p)}});const h=()=>{r("select-collection",null)};return(p,O)=>{const F=S("el-button"),N=S("Picture"),_=S("el-icon"),w=S("el-image"),H=S("el-tooltip");return t(),s("div",So,[o("div",wo,[o("div",Vo,[g.selectedCollection?(t(),s("span",xo,b(g.selectedCollection.caption),1)):(t(),s("span",Mo,[x(" Collections "),o("span",Lo,b(e(u).length),1)]))]),o("div",Po,[o("div",To,[g.selectedCollection?(t(),y(F,{key:0,onClick:h},{default:d(()=>[x("Back")]),_:1})):m("",!0)])])]),o("div",Io,[(t(!0),s(D,null,Q(e(u),(M,ne)=>(t(),s("div",{class:I(["collection-item-box",{"collection-item-box-listing-mode":g.listingMode}]),key:ne},[o("div",No,[o("div",{class:"collection-title",onClick:V=>r("select-collection",M)},[c(w,{class:"title-image",fit:"scale-down",src:M.sectionImageUrl,loading:"lazy"},{error:d(()=>[o("div",Uo,[c(_,null,{default:d(()=>[c(N)]),_:1})])]),_:2},1032,["src"]),o("div",Bo,[c(H,{content:M.caption,placement:"top"},{default:d(()=>[o("div",{class:"name",style:Ye({"-webkit-line-clamp":e(v)})},b(M.caption),5)]),_:2},1032,["content"]),o("div",Do,b(M.productCount??0)+" Products",1)])],8,Ao),o("div",Fo,[(t(!0),s(D,null,Q(M.productImageUrl,(V,L)=>(t(),y(w,{key:L,class:"product-image",src:V,loading:"lazy"},{error:d(()=>[o("div",Ro,[c(_,null,{default:d(()=>[c(N)]),_:1})])]),_:2},1032,["src"]))),128))])])],2))),128))])])}}},zo=le(jo,[["__scopeId","data-v-9b45c62b"]]);const Wo=a=>(be("data-v-6901bb0e"),a=a(),Ce(),a),Oo={class:"container"},Ho={class:"banner"},Go=["src"],qo={class:"shop-detail"},Eo={class:"shop-name"},Jo={key:0,class:"shop-desc"},Ko={class:"member-avatar"},Qo=["src"],Xo={key:1,class:"avatar-img word"},Yo={key:2,class:"member-name two-line-clamp"},Zo=["innerHTML"],et={key:0,class:"list-tab"},ot=["onClick"],tt={class:"display-mode"},lt=["src"],st=["src"],nt=["src"],at=["src"],it={class:"serp"},ct={key:0,class:"filter"},rt={key:0,class:"buttons"},dt=Wo(()=>o("span",null,"Looks like you've reached the end",-1)),ut={class:"mobile-shop-left-menu"},_t={id:"global-nav-mobile-header"},mt=["onClick"],pt={key:0,id:"global-nav-mobile-welcome-message"},gt={id:"global-nav-mobile-welcome-message-user"},vt={key:1,id:"global-nav-mobile-create-account-message"},ht=["onClick"],ft={__name:"serp",props:{currentTab:{type:String,default:""},designId:{type:Number,default:0}},async setup(a){const r=a,g=Ze(),{s3StaticUrl:v,sellRoutePrefix:u}=ke(),h=W(g.params.shopId),{publicShopStore:p,memberStore:O,shopStore:F,globalStore:N}=to(),{member:_,globalAuthing:w,globalAuthLogin:H}=E(O);E(F);const{topDomain:M,env:ne,openMobileMenu:V}=E(N),{useMobileLayout:L}=eo(),{memberName:ye,isLogin:X,authChange:G,signOut:$e}=_o(),{memberProfile:C,shopDetail:R,selectedCollection:ae,searchParams:f,inputTag:ie,designs:ce,selectedDesignId:P,products:re,searchLoading:q,searchCollectionLoading:Se,collections:Y,collectionProducts:Z,feedbackLoading:we,tabs:Ve,selectedTab:A,redirectFromTab:de}=E(p),{getMemberProfile:bt,getCategories:xe,handleSearch:j,handleCategoryChange:ue,handleAddTagFilter:_e,handleSelectCollection:Me,searchCollectionProducts:Le,handleFeedBack:Pe,handleSearchDesignProducts:ee,searchDesigns:Te}=mo(),k=W(!1);oo(async()=>{if(A.value=r.currentTab,R.value.collectionCount===0&&g.name==="shop-shopId"&&!de.value){z(`/shop/${h.value}/products`);return}await xe(),r.designId?(P.value=r.designId,ee()):j()});const oe=$(()=>{let i=re.value;return!B.value&&!U.value&&(i=re.value.filter(l=>!l.hide)),f.value.caption&&(i=i.filter(l=>l.caption.toLowerCase().includes(f.value.caption.toLowerCase()))),i}),U=$(()=>/admin_cp\d+/gi.test(R.value.storeId)),B=$(()=>/@cafepress\.com$/.test(C.value.email)),Ie=$(()=>{var i;return(i=C.value.email)==null?void 0:i.replace(/\s/g,"").slice(0,1)}),me=$(()=>C.value?C.value.showAlias&&C.value.alias?C.value.alias:`Artist${C.value.memberNo}`:""),Ne=i=>{A.value!==i&&(A.value=i,de.value=!0,f.value.caption="",i==="Products"?(P.value=null,z(`/shop/${h.value}/products`)):z(`/shop/${h.value}`))},Ae=i=>{ue(i,!0)},Ue=()=>{clickChat(),V.value=!1},Be=()=>{j(),V.value=!1},De=i=>{P.value=i,ee(!0),z(`/shop/${h.value}/products?designId=${i}`),window.scrollTo(0,0)},Fe=()=>{P.value=null,f.value.noMoreProduct=!1,r.designId&&ce.value.length===0&&j(),z(`/shop/${h.value}/products`)},Re=$(()=>r.currentTab==="Products"?P.value?"Products":"Designs":r.currentTab==="Collections"?ae.value?"Products":"Collections":""),je=()=>{X.value?$e():G("global","login")},ze=()=>{G("global","register")};return(i,l)=>{var ve,he;const pe=$o,We=zo,ge=lo,te=S("el-button"),Oe=so,He=no,Ge=ao,qe=S("el-drawer"),Ee=io,Je=co,Ke=ro,Qe=uo;return t(),s("div",Oo,[o("div",Ho,[o("img",{class:"banner-img",src:e(R).coverImageUrl??`${e(v)}/${e(u)}/svg/shop-cover-default.svg`},null,8,Go),o("div",qo,[o("div",Eo,b(e(R).storeName),1),e(L)?m("",!0):(t(),s("div",Jo,b(e(R).metaDesc),1))]),o("div",Ko,[((ve=e(C))==null?void 0:ve.photoImageNo)>0?(t(),s("img",{key:0,class:"avatar-img",src:(he=e(C))==null?void 0:he.avatarUrl},null,8,Qo)):(t(),s("div",Xo,b(e(Ie)),1)),e(me)?(t(),s("div",Yo,[o("span",{innerHTML:e(me)},null,8,Zo)])):m("",!0)])]),!e(B)&&!e(U)?(t(),s("div",et,[(t(!0),s(D,null,Q(e(Ve),n=>(t(),s("div",{key:n,class:I(["tab-title",e(A)===n.name?"active":""]),onClick:Ct=>Ne(n.name)},b(n.name),11,ot))),128)),o("div",tt,[J(o("img",{src:`${e(v)}/${e(u)}/svg/grid-active.svg`,onClick:l[0]||(l[0]=n=>k.value=!1)},null,8,lt),[[K,!e(k)]]),J(o("img",{src:`${e(v)}/${e(u)}/svg/grid.svg`,onClick:l[1]||(l[1]=n=>k.value=!1)},null,8,st),[[K,e(k)]]),J(o("img",{src:`${e(v)}/${e(u)}/svg/list-active.svg`,onClick:l[2]||(l[2]=n=>k.value=!0)},null,8,nt),[[K,e(k)]]),J(o("img",{src:`${e(v)}/${e(u)}/svg/list.svg`,onClick:l[3]||(l[3]=n=>k.value=!0)},null,8,at),[[K,!e(k)]])])])):m("",!0),o("div",it,[!e(L)&&!e(B)&&!e(U)?(t(),s("div",ct,[c(pe,{modelValue:e(f),"onUpdate:modelValue":l[4]||(l[4]=n=>T(f)?f.value=n:null),"input-tag":e(ie),"mobile-mode":e(L),onSearch:e(j),onCategoryChange:e(ue),onAddTagFilter:e(_e)},null,8,["modelValue","input-tag","mobile-mode","onSearch","onCategoryChange","onAddTagFilter"])])):m("",!0),o("div",{class:I(["list",{profile:e(B)||e(U)}])},[e(A)==="Collections"?(t(),s(D,{key:0},[c(We,{modelValue:e(Y),"onUpdate:modelValue":l[5]||(l[5]=n=>T(Y)?Y.value=n:null),"listing-mode":e(k),"search-params":e(f),"selected-collection":e(ae),onSelectCollection:e(Me)},null,8,["modelValue","listing-mode","search-params","selected-collection","onSelectCollection"]),c(ge,{modelValue:e(Z),"onUpdate:modelValue":l[6]||(l[6]=n=>T(Z)?Z.value=n:null),"listing-mode":e(k),internal:e(B)||e(U),"search-loading":e(q),onNext:e(Le)},null,8,["modelValue","listing-mode","internal","search-loading","onNext"])],64)):m("",!0),e(A)==="Products"?(t(),s(D,{key:1},[e(P)?(t(),s("div",rt,[c(te,{onClick:Fe},{default:d(()=>[x(" Back ")]),_:1}),e(_).memberNo===e(C).memberNo?(t(),y(te,{key:0,onClick:e(Pe),loading:e(we)},{default:d(()=>[x(" fetch missing products ")]),_:1},8,["onClick","loading"])):m("",!0)])):m("",!0),e(P)?(t(),y(ge,{key:1,modelValue:e(oe),"onUpdate:modelValue":l[7]||(l[7]=n=>T(oe)?oe.value=n:null),"listing-mode":e(k),internal:e(B)||e(U),"search-loading":e(q),onNext:e(ee)},null,8,["modelValue","listing-mode","internal","search-loading","onNext"])):(t(),y(Oe,{key:2,loading:e(q),designs:e(ce),onSearchDesignProducts:De,onLoadingMore:e(Te)},null,8,["loading","designs","onLoadingMore"]))],64)):m("",!0),c(He,{class:"loading-more",loading:e(q)||e(Se),noMore:e(f).noMoreProduct},{loading:d(()=>[o("span",null,"Loading More "+b(e(Re))+"...",1)]),"no-more":d(()=>[dt]),_:1},8,["loading","noMore"]),e(C).profilePrivate?m("",!0):(t(),y(Ge,{key:2}))],2)]),e(L)?(t(),y(Qe,{key:1},{default:d(()=>[c(qe,{modelValue:e(V),"onUpdate:modelValue":l[9]||(l[9]=n=>T(V)?V.value=n:null),direction:"ltr",size:"310","show-close":!1,"with-header":!1},{default:d(()=>[o("div",ut,[o("div",_t,[o("a",{href:"javascript:;",class:"global-nav-mobile-auth-btn",onClick:fe(je,["stop"])},b(e(X)?"Logout":"Login"),9,mt),e(X)?(t(),s("div",pt,[x(" Welcome "),o("span",gt,b(e(ye)),1),x(" ! ")])):(t(),s("div",vt,[x(" or "),o("a",{href:"javascript:;",onClick:fe(ze,["stop"])},"Create an account",8,ht)])),o("a",{href:"javascript:;",class:"global-nav-mobile-chat-btn",id:"global-nav-mobile-btn-live-chat",onClick:Ue},"Live Chat")]),c(pe,{class:"mobile-filter",modelValue:e(f),"onUpdate:modelValue":l[8]||(l[8]=n=>T(f)?f.value=n:null),"input-tag":e(ie),"mobile-mode":!0,onSearch:e(j),onCategoryChange:Ae,onAddTagFilter:e(_e)},null,8,["modelValue","input-tag","onSearch","onAddTagFilter"]),c(te,{class:"mobile-category-search",onClick:Be,plain:""},{default:d(()=>[x("Search Results")]),_:1})])]),_:1},8,["modelValue"]),c(Ke,{modelValue:e(w),"onUpdate:modelValue":l[12]||(l[12]=n=>T(w)?w.value=n:null),showHeader:!1,width:"402px",fullscreen:e(L),"close-on-click-modal":!1},{default:d(()=>[e(H)?(t(),y(Ee,{key:0,onToRegister:l[10]||(l[10]=n=>e(G)("global","register"))})):(t(),y(Je,{key:1,onToLogin:l[11]||(l[11]=n=>e(G)("global","login"))}))]),_:1},8,["modelValue","fullscreen"])]),_:1})):m("",!0)])}}},Tt=le(ft,[["__scopeId","data-v-6901bb0e"]]);export{Tt as _};
