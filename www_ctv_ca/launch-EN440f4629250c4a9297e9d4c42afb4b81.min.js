// For license information, see `https://assets.adobedtm.com/launch-EN440f4629250c4a9297e9d4c42afb4b81.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2024-06-26T13:52:53Z",turbineBuildDate:"2023-02-22T20:37:26Z",turbineVersion:"27.5.0"},environment:{id:"EN440f4629250c4a9297e9d4c42afb4b81",stage:"production"},dataElements:{User_Auth_Location:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.authLocation"}},Page_Section:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.section"}},playbackLanguage:{defaultValue:"",forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.playbackLanguage"}},Page_Name:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.name"}},User_Subscription_Type:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.subscriptionType"}},"Optly Experiments":{cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{const e=window.optimizely.get("state").getActiveExperimentIds(),t=window.optimizely.get("state").getVariationMap(),n=[];return e.forEach((e=>{const a="("+e+"):("+t[e].id+")";n.push(a)})),String(n)}catch(e){try{_dataManager.console("Optimizely eVar44: "+e)}catch(e){console.log("Optimizely eVar44: "+e)}}}}},Page_Day_Parts:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.dayParts"}},Subsection_4:{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.subsection4"}},Article_Author:{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.article.author"}},User_ID:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="";return window.digitalData&&digitalData.user&&(e=digitalData.user.id||digitalData.user.userId||"").indexOf("@")>-1&&(e=""),e}}},Subsection_1:{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.subsection1"}},Site_Name:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.siteName"}},Event_Name:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.eventData.name"}},User_Subscription_Partners:{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.subscriptionPartners"}},Subsection_3:{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.subsection3"}},User_Profile_Type:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.profileType"}},Show_Name:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.show.name"}},Page_Collection_ID:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.collectionId"}},Article_Title:{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.article.title"}},Site_Platform:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.platform"}},Article_Source:{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.article.source"}},siteVersion:{defaultValue:"",cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.version"}},Subsection_2:{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.subsection2"}},Page_External_Referrer:{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(document.referrer&&!document.referrer.match(/(crave|bellmedia)\.ca/))return document.referrer}}},Search_Term:{defaultValue:"",forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.search.term"}},Page_URL:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"https://"+document.location.hostname+document.location.pathname}}},Page_Hostname:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"hostname"}},Gift_Promo_Code:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.purchase.promoCode"}},User_BDU:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.authBDU"}},profileLanguage:{defaultValue:"",forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.profileLanguage"}},User_Auth_Error_Type:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return window.digitalData&&digitalData.eventData&&digitalData.eventData.name&&"authentication error"==digitalData.eventData.name?digitalData.error&&digitalData.error.type?digitalData.error.type.replace(/\<br\>/g,""):"no error available":""}}},User_Status:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.user.authStatus"}},Page_Filter_List:{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.filterList"}},Page_Content_Type:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.contentType"}},Article_Id:{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.article.id"}},Page_Date:{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"digitalData.page.currentDate"}},Campaign_ID:{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"cid",caseInsensitive:!0}}},extensions:{core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPcfb4767bc0bd40d0af2245ed4e7d1cd4/",modules:{"core/src/lib/dataElements/javascriptVariable.js":{name:"javascript-variable",displayName:"JavaScript Variable",script:function(e,t,n){"use strict";var a=n("../helpers/getObjectProperty.js");e.exports=function(e){return a(window,e.path)}}},"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/pageInfo.js":{name:"page-info",displayName:"Page Info",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document");e.exports=function(e){switch(e.attribute){case"url":return a.location.href;case"hostname":return a.location.hostname;case"pathname":return a.location.pathname;case"protocol":return a.location.protocol;case"referrer":return a.referrer;case"title":return a.title}}}},"core/src/lib/dataElements/queryStringParameter.js":{name:"query-string-parameter",displayName:"Query String Parameter",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window"),r=n("@adobe/reactor-query-string");e.exports=function(e){var t=r.parse(a.location.search);if(!e.caseInsensitive)return t[e.name];for(var n=e.name.toLowerCase(),i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];if(s.toLowerCase()===n)return t[s]}}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerLibraryLoadedTrigger(t)}}},"core/src/lib/conditions/domain.js":{name:"domain",displayName:"Domain",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=/[|\\{}()[\]^$+*?.-]/g,i=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")};e.exports=function(e){var t=a.location.hostname;return e.domains.some((function(e){return t.match(new RegExp("(^|\\.)"+i(e)+"$","i"))}))}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,n,a){"use strict";var r,i,o,s,c=n("@adobe/reactor-document"),l=n("@adobe/reactor-promise"),u=n("./helpers/decorateCode"),d=n("./helpers/loadCodeSequentially"),g=n("../../../node_modules/postscribe/dist/postscribe"),p=n("./helpers/unescapeHtmlCode"),f=n("../helpers/findPageScript").getTurbine,m=(i=function(e){g(c.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return r&&"script"===t&&(e.attrs.nonce=r),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=p(e.attrs[t])})),e.src&&(e.src=p(e.src))),e},error:function(e){a.logger.error(e.msg)}})},o=[],s=function(){if(c.body)for(;o.length;)i(o.shift());else setTimeout(s,20)},function(e){o.push(e),s()}),v=function(){if(c.currentScript)return c.currentScript.async;var e=f();return!e||e.async}();e.exports=function(e,t){var n;r=a.getExtensionSettings().cspNonce;var i={settings:e,event:t},o=i.settings.source;if(o)return i.settings.isExternal?d(o).then((function(e){return e?(n=u(i,e),m(n.code),n.promise):l.resolve()})):(n=u(i,o),v||"loading"!==c.readyState?m(n.code):c.write&&!1===a.propertySettings.ruleComponentSequencingEnabled?c.write(n.code):m(n.code),n.promise)}}},"core/src/lib/events/pageBottom.js":{name:"page-bottom",displayName:"Page Bottom",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerPageBottomTrigger(t)}}},"core/src/lib/conditions/path.js":{name:"path",displayName:"Path Without Query String",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=n("../helpers/textMatch");e.exports=function(e){var t=a.location.pathname;return e.paths.some((function(e){var n=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(t,n)}))}}},"core/src/lib/conditions/subdomain.js":{name:"subdomain",displayName:"Subdomain",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=n("../helpers/textMatch");e.exports=function(e){var t=a.location.hostname;return e.subdomains.some((function(e){var n=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return r(t,n)}))}}},"core/src/lib/events/windowLoaded.js":{name:"window-loaded",displayName:"Window Loaded",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerWindowLoadedTrigger(t)}}},"core/src/lib/events/mousedown.js":{name:"mousedown",displayName:"Mousedown",script:function(e,t,n){"use strict";var a=n("./helpers/createBubbly")();document.addEventListener("mousedown",a.evaluateEvent,!0),e.exports=function(e,t){a.addListener(e,t)}}},"core/src/lib/events/domReady.js":{name:"dom-ready",displayName:"DOM Ready",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerDomReadyTrigger(t)}}},"core/src/lib/helpers/getObjectProperty.js":{script:function(e){"use strict";e.exports=function(e,t){for(var n=t.split("."),a=e,r=0,i=n.length;r<i;r++){if(null==a)return;a=a[n[r]]}return a}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window"),r=n("@adobe/reactor-document"),i=-1!==a.navigator.appVersion.indexOf("MSIE 10"),o="WINDOW_LOADED",s="DOM_READY",c="PAGE_BOTTOM",l=[c,s,o],u=function(e,t){return{element:e,target:e,nativeEvent:t}},d={};l.forEach((function(e){d[e]=[]}));var g=function(e,t){l.slice(0,f(e)+1).forEach((function(e){m(t,e)}))},p=function(){return"complete"===r.readyState?o:"interactive"===r.readyState?i?null:s:void 0},f=function(e){return l.indexOf(e)},m=function(e,t){d[t].forEach((function(t){v(e,t)})),d[t]=[]},v=function(e,t){var n=t.trigger,a=t.syntheticEventFn;n(a?a(e):null)};a._satellite=a._satellite||{},a._satellite.pageBottom=g.bind(null,c),r.addEventListener("DOMContentLoaded",g.bind(null,s),!0),a.addEventListener("load",g.bind(null,o),!0),a.setTimeout((function(){var e=p();e&&g(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){d[c].push({trigger:e})},registerDomReadyTrigger:function(e){d[s].push({trigger:e,syntheticEventFn:u.bind(null,r)})},registerWindowLoadedTrigger:function(e){d[o].push({trigger:e,syntheticEventFn:u.bind(null,a)})}}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,n){"use strict";var a=n("./decorators/decorateGlobalJavaScriptCode"),r=n("./decorators/decorateNonGlobalJavaScriptCode"),i={javascript:function(e,t){return e.settings.global?a(e,t):r(e,t)},html:n("./decorators/decorateHtmlCode")};e.exports=function(e,t){return i[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise"),r=n("./getSourceByUrl"),i=a.resolve();e.exports=function(e){var t=new a((function(t){var n=r(e);a.all([n,i]).then((function(e){var n=e[0];t(n)}))}));return i=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var n,a;n=this,a=function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=a(n(1));e.exports=r.default},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function o(){var e=f.shift();if(e){var t=d.last(e);t.afterDequeue(),e.stream=s.apply(void 0,e),t.afterStreamStart()}}function s(e,t,n){function a(e){e=n.beforeWrite(e),m.write(e),n.afterWrite(e)}(m=new u.default(e,n)).id=p++,m.name=n.name||m.id,c.streams[m.name]=m;var r=e.ownerDocument,s={close:r.close,open:r.open,write:r.write,writeln:r.writeln};l(r,{close:i,open:i,write:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(t.join("")+"\n")}});var d=m.win.onerror||i;return m.win.onerror=function(e,t,a){n.error({msg:e+" - "+t+": "+a}),d.apply(m.win,[e,t,a])},m.write(t,(function(){l(r,s),m.win.onerror=d,n.done(),m=null,o()})),m}function c(e,t,n){if(d.isFunction(n))n={done:n};else if("clear"===n)return f=[],m=null,void(p=0);n=d.defaults(n,g);var a=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,n];return e.postscribe={cancel:function(){a.stream?a.stream.abort():a[1]=i}},n.beforeEnqueue(a),f.push(a),m||o(),e.postscribe}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=c;var u=r(n(2)),d=a(n(4)),g={afterAsync:i,afterDequeue:i,afterStreamStart:i,afterWrite:i,autoFix:!0,beforeEnqueue:i,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:i,error:function(e){throw new Error(e.msg)},releaseAsync:!1},p=0,f=[],m=null;l(c,{streams:{},queue:f,WriteStream:u.default})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=g+t,a=e.getAttribute(n);return u.existy(a)?String(a):a}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=g+t;u.existy(n)&&""!==n?e.setAttribute(a,n):e.removeAttribute(a)}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=r(n(3)),u=a(n(4)),d=!1,g="data-ps-",p="ps-style",f="ps-script",m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.root=t,this.options=n,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new l.default("",{autoFix:n.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();u.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,n=void 0,a=void 0,r=[];(t=this.parser.readToken())&&!(n=u.isScript(t))&&!(a=u.isStyle(t));)(t=this.options.beforeWriteToken(t))&&r.push(t);r.length>0&&this._writeStaticTokens(r),n&&this._handleScriptToken(t),a&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,d&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),d&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,n=[],a=[],r=[],i=e.length,o=0;o<i;o++){var s=e[o],c=s.toString();if(n.push(c),s.attrs){if(!/^noscript$/i.test(s.tagName)){var l=t++;a.push(c.replace(/(\/?>)/," "+g+"id="+l+" $1")),s.attrs.id!==f&&s.attrs.id!==p&&r.push("atomicTag"===s.type?"":"<"+s.tagName+" "+g+"proxyof="+l+(s.unary?" />":">"))}}else a.push(c),r.push("endTag"===s.type?c:"")}return{tokens:e,raw:n.join(""),actual:a.join(""),proxy:r.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];u.existy(e=t.shift());){var n=1===e.nodeType;if(!n||!o(e,"proxyof")){n&&(this.actuals[o(e,"id")]=e,s(e,"id"));var a=e.parentNode&&o(e.parentNode,"proxyof");a&&this.actuals[a].appendChild(e)}t.unshift.apply(t,u.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,p),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),u.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var n=this.doc.getElementById(t);n&&n.parentNode.replaceChild(e,n)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var n=this._buildScript(e),a=this._shouldRelease(n),r=this.options.afterAsync;e.src&&(n.src=e.src,this._scriptLoadHandler(n,a?r:function(){t(),r()}));try{this._insertCursor(n,f),n.src&&!a||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return u.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}function a(){n(),null!=t&&t(),t=null}function r(e){n(),o(e),null!=t&&t(),t=null}function i(e,t){var n=e["on"+t];null!=n&&(e["_on"+t]=n)}var o=this.options.error;i(e,"load"),i(e,"error"),c(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){r({msg:"onload handler failed "+t+" @ "+e.src})}a()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void r({msg:"onerror handler failed "+t+" @ "+e.src})}r({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&a()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=m},function(e){var t;t=function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=a(n(1));e.exports=r.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=r(n(2)),s=r(n(3)),c=a(n(6)),l=n(5),u={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.stream=n;var r=!1,s={};for(var l in o)o.hasOwnProperty(l)&&(a.autoFix&&(s[l+"Fix"]=!0),r=r||s[l+"Fix"]);r?(this._readToken=(0,c.default)(this,s,(function(){return t._readTokenImpl()})),this._peekToken=(0,c.default)(this,s,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in u)if(u.hasOwnProperty(e)&&u[e].test(this.stream)){var t=s[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream},e}();for(var g in t.default=d,d.tokenToString=function(e){return e.toString()},d.escapeAttributes=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=(0,l.escapeQuotes)(e[n],null));return t},d.supports=o,o)o.hasOwnProperty(g)&&(d.browserHasFlaw=d.browserHasFlaw||!o[g]&&g)},function(e,t){"use strict";t.__esModule=!0;var n=!1,a=!1,r=window.document.createElement("div");try{var i="<P><I></P></I>";r.innerHTML=i,t.tagSoup=n=r.innerHTML!==i}catch(e){t.tagSoup=n=!1}try{r.innerHTML="<P><i><P></P></i></P>",t.selfClose=a=2===r.childNodes.length}catch(e){t.selfClose=a=!1}r=null,t.tagSoup=n,t.selfClose=a},function(e,t,n){"use strict";function a(e){var t=e.indexOf("-->");if(t>=0)return new l.CommentToken(e.substr(4,t-1),t+3)}function r(e){var t=e.indexOf("<");return new l.CharsToken(t>=0?t:e.length)}function i(e){var t,n,a;if(-1!==e.indexOf(">")){var r=e.match(u.startTag);if(r){var i=(t={},n={},a=r[2],r[2].replace(u.attr,(function(e,r){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",n[arguments[5]]=!0):t[r]=arguments[2]||arguments[3]||arguments[4]||u.fillAttr.test(r)&&r||"":t[r]="",a=a.replace(e,"")})),{v:new l.StartTagToken(r[1],r[0].length,t,n,!!r[3],a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===i?"undefined":c(i)))return i.v}}}function o(e){var t=i(e);if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var a=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(a)return new l.AtomicTagToken(t.tagName,a[0].length+t.length,t.attrs,t.booleanAttrs,a[1])}}}function s(e){var t=e.match(u.endTag);if(t)return new l.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=a,t.chars=r,t.startTag=i,t.atomicTag=o,t.endTag=s;var l=n(4),u={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var r=n(5),i=(t.Token=function e(t,n){a(this,e),this.type=t,this.length=n,this.text=""},t.CommentToken=function(){function e(t,n){a(this,e),this.type="comment",this.length=n||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){a(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,n,r,i,o){a(this,e),this.type=t,this.length=r,this.text="",this.tagName=n,this.attrs=i,this.booleanAttrs=o,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+e.tagName;for(var a in e.attrs)if(e.attrs.hasOwnProperty(a)){n+=" "+a;var i=e.attrs[a];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[a]||(n+='="'+(0,r.escapeQuotes)(i)+'"')}return e.rest&&(n+=" "+e.rest),e.unary&&!e.html5Unary?n+="/>":n+=">",null!=t&&(n+=t+"</"+e.tagName+">"),n},e}());t.StartTagToken=function(){function e(t,n,r,i,o,s){a(this,e),this.type="startTag",this.length=n,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=i,this.html5Unary=!1,this.unary=o,this.rest=s}return e.prototype.toString=function(){return i.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,n,r,i,o){a(this,e),this.type="atomicTag",this.length=n,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=o}return e.prototype.toString=function(){return i.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,n){a(this,e),this.type="endTag",this.length=n,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=n},function(e,t){"use strict";function n(e){return e&&"startTag"===e.type&&(e.unary=s.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function a(e,t){var a=e.stream,r=n(t());return e.stream=a,r}function r(e,t){var n=t.pop();e.prepend("</"+n.tagName+">")}function i(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1},e}function o(e,t,o){function s(){var t=a(e,o);t&&u[t.type]&&u[t.type](t)}var l=i(),u={startTag:function(n){var a=n.tagName;"TR"===a.toUpperCase()&&l.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),s()):t.selfCloseFix&&c.test(a)&&l.containsTagName(a)?l.lastTagNameEq(a)?r(e,l):(e.prepend("</"+n.tagName+">"),s()):n.unary||l.push(n)},endTag:function(n){l.last()?t.tagSoupFix&&!l.lastTagNameEq(n.tagName)?r(e,l):l.pop():t.tagSoupFix&&(o(),s())}};return function(){return s(),n(o())}}t.__esModule=!0,t.default=o;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function n(e){return null!=e}function a(e){return"function"==typeof e}function r(e,t,n){var a=void 0,r=e&&e.length||0;for(a=0;a<r;a++)t.call(n,e[a],a)}function i(e,t,n){for(var a in e)e.hasOwnProperty(a)&&t.call(n,a,e[a])}function o(e,t){return e=e||{},i(t,(function(t,a){n(e[t])||(e[t]=a)})),e}function s(e){try{return Array.prototype.slice.call(e)}catch(a){var t=(n=[],r(e,(function(e){n.push(e)})),{v:n});if("object"===(void 0===t?"undefined":g(t)))return t.v}var n}function c(e){return e[e.length-1]}function l(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function u(e){return l(e,"script")}function d(e){return l(e,"style")}t.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=n,t.isFunction=a,t.each=r,t.eachKey=i,t.defaults=o,t.toArray=s,t.last=c,t.isTag=l,t.isScript=u,t.isStyle=d}])},"object"==typeof t&&"object"==typeof e?e.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof t?t.postscribe=a():n.postscribe=a()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document").createElement("div");e.exports=function(e){return a.innerHTML=e,a.textContent||a.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),r=function(e){for(var t=a.querySelectorAll("script"),n=0;n<t.length;n++){var r=t[n];if(e.test(r.src))return r}},i=function(){return r(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:i,byRegexPattern:r}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:a.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise"),r=0;e.exports=function(e,t){var n="_runScript"+ ++r,i=new a((function(t,r){_satellite[n]=function(i){delete _satellite[n],new a((function(t){t(i.call(e.event.element,e.event,e.event.target,a))})).then(t,r)}}));return{code:'<script>_satellite["'+n+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:i}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,n,a){"use strict";var r=n("@adobe/reactor-promise"),i=0,o={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=o[e];t&&(delete o[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=o[e];t&&(delete o[e],t.reject())};var s=function(e){return-1!==e.indexOf("${reactorCallbackId}")},c=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},l=function(e){return e.settings.isExternal};e.exports=function(e,t){var n;return l(e)&&(t=a.replaceTokens(t,e.event)),s(t)?(n=new r((function(e,t){o[String(i)]={resolve:e,
reject:t}})),t=c(t,i),i+=1):n=r.resolve(),{code:t,promise:n}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-load-script"),r=n("@adobe/reactor-promise"),i=n("../../helpers/findPageScript").byRegexPattern,o={},s={},c=function(e){return s[e]||(s[e]=a(e)),s[e]};_satellite.__registerScript=function(e,t){var n;if(document.currentScript)n=document.currentScript.getAttribute("src");else{var a=new RegExp(".*"+e+".*");n=i(a).getAttribute("src")}o[n]=t},e.exports=function(e){return o[e]?r.resolve(o[e]):new r((function(t){c(e).then((function(){t(o[e])}),(function(){t()}))}))}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,n){"use strict";var a=n("./weakMap"),r=n("./matchesProperties"),i=n("./matchesSelector");e.exports=function(){var e=[],t=new a,n={addListener:function(t,n){e.push({settings:t,callback:n})},evaluateEvent:function(n,a){if(e.length&&!t.has(n)){for(var o=n.target,s=!1;o;){for(var c=!1,l=!1,u=0;u<e.length;u++){var d=e[u],g=d.settings.elementSelector,p=d.settings.elementProperties;if((!1!==d.settings.bubbleFireIfChildFired||!s)&&(o===n.target||!1!==d.settings.bubbleFireIfParent)&&(o===n.target||g||p&&Object.keys(p).length)&&(!g||i(o,g))&&(!p||r(o,p))){var f={};a?Object.keys(n).forEach((function(e){f[e]=n[e]})):f.nativeEvent=n,f.element=o,f.target=n.target,!1!==d.callback(f)&&(l=!0,d.settings.bubbleStop&&(c=!0))}}if(c)break;l&&(s=!0),o=o.parentNode}t.set(n,!0)}},__reset:function(){e=[]}};return n}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window").WeakMap;if(void 0===a){var r=Object.defineProperty,i=Date.now()%1e9;(a=function(){this.name="__st"+(1e9*Math.random()>>>0)+i+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:r(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}e.exports=a}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,n){"use strict";var a=n("./../../helpers/textMatch"),r=function(e,t){return"@text"===t||"innerText"===t?e.textContent||e.innerText:t in e?e[t]:e.getAttribute?e.getAttribute(t):void 0};e.exports=function(e,t){return!t||t.every((function(t){var n=r(e,t.name),i=t.valueIsRegex?new RegExp(t.value,"i"):t.value;return a(n,i)}))}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,n,a){"use strict";e.exports=function(e,t){var n=e.matches||e.msMatchesSelector;if(n)try{return n.call(e,t)}catch(e){return a.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}}}}},company:{orgId:"BB3937CB5B349FE70A495EAE@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"Crave 2.0",settings:{domains:["bellmedia.ca","9c9media.com","crave.ca","ctv.ca","noovo.ca","9c9media.ca"],undefinedVarsReturnEmpty:!0,ruleComponentSequencingEnabled:!0},id:"PR7cc96b4bf56145d99727d25f35a5ac09"},rules:[{id:"RL01e78b1d0078496082e7067991e62800",name:"Crave Listener",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["crave.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!-- Xandr Universal Pixel - Initialization (include only once per page) -->\n<script>\n!function(e,i){if(!e.pixie){var n=e.pixie=function(e,i,a){n.actionQueue.push({action:e,actionValue:i,params:a})};n.actionQueue=[];var a=i.createElement("script");a.async=!0,a.src="//acdn.adnxs.com/dmp/up/pixie.js";var t=i.getElementsByTagName("head")[0];t.insertBefore(a,t.firstChild)}}(window,document);\npixie(\'init\', \'bd5e2dc7-ee55-4ea3-b4e2-efe08921d96e\');\n</script>\n<script>\nvar craveListener = {\n  debugConsole: function debugConsole(message) {\n    if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== "production") {\n      console.log(message);\n    }\n  },\n  setListeners: function setListeners(pageURL) {\n    document.addEventListener("digitalDataLoaded", function () {\n      craveListener.pageViewCallback(pageURL);\n    });\n  },\n  checkPage: function checkPage(pageURL) {\n    var status = false;\n\n    if (typeof pageURL !== "string") {\n      pageURL = String(window.document.URL).split("?")[0];\n    }\n\n    var whiteList = ["/tv-shows/billions\\/?$"];\n\n    if (craveListener.checkBrand(window.digitalData)) {\n      whiteList.forEach(function (listItem) {\n        var regexTest = new RegExp(listItem);\n\n        if (regexTest.test(pageURL)) {\n          status = true;\n        }\n      });\n    }\n\n    return status;\n  },\n  checkBrand: function checkBrand(metadata) {\n    if (!!metadata && !!metadata.page && metadata.page.siteName === "crave") {\n      return true;\n    }\n\n    return false;\n  },\n  pageViewCallback: function pageViewCallback(pageURL) {\n    if (craveListener.checkPage(pageURL)) {\n      try {\n        pixie("event", "PageView");\n      } catch (error) {\n        craveListener.debugConsole(error);\n      }\n    }\n  }\n};\n\ncraveListener.setListeners();\n</script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL02c54247e0544409a91fb5512eeba1b8",name:"Twitter Confirmation Page",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/subscribe/success"}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!-- Twitter single-event website tag code -->\n<script src="//platform.twitter.com/oct.js" type="text/javascript"></script>\n<script type="text/javascript">\n    twttr.conversion.trackPid(\'o2omn\', {\n        tw_sale_amount: 0,\n        tw_order_quantity: 0\n    });\n</script>\n<noscript>\n    <img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=o2omn&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />\n    <img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=o2omn&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />\n</noscript>\n<!-- End Twitter single-event website tag code -->',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL069dc3672f3748e6988d4a55c753df8d",name:"CTV Superhub - Marketing Tags",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["ctv.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-QZ21TSDTEW\"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n</script>\n<!-- Facebook Pixel Code -->\n<script>\n    ! function(f, b, e, v, n, t, s) {\n        if (f.fbq) return;\n        n = f.fbq = function()\n\n        {\n            n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n        };\n        if (!f._fbq) f._fbq = n;\n        n.push = n;\n        n.loaded = !0;\n        n.version = '2.0';\n        n.queue = [];\n        t = b.createElement(e);\n        t.async = !0;\n        t.src = v;\n        s = b.getElementsByTagName(e)[0];\n        s.parentNode.insertBefore(t, s)\n    }(window, document, 'script',\n        'https://connect.facebook.net/en_US/fbevents.js');\n    fbq('init', '1752959568153686');\n    fbq('init', '417766778714379');\n</script>\n<noscript><img height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id=1752959568153686&ev=PageView&noscript=1\" /></noscript>\n<!-- End Facebook Pixel Code -->\n<!-- Twitter universal website tag code -->\n<script>\n    ! function(e, t, n, s, u, a) {\n        e.twq || (s = e.twq = function() {\n                s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);\n            }, s.version = '1.1', s.queue = [], u = t.createElement(n), u.async = !0, u.src = '//static.ads-twitter.com/uwt.js',\n            a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))\n    }(window, document, 'script');\n    // Insert Twitter Pixel ID and Standard Event data below\n    twq('init', 'o30fp');\n</script>\n<!-- End Twitter universal website tag code -->\n<script>\nconst ctvhubTags = {\n    debugConsole: (message) => {\n        if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== \"production\") {\n            console.log(message);\n        }\n    },\n    setPageViewListener: (callback) => {\n        document.addEventListener(\"digitalDataLoaded\", callback);\n    },\n    pageViewCallback: () => {\n        try {\n            gtag(\"config\", \"G-QZ21TSDTEW\");\n        } catch (err) {\n            ctvhubTags.debugConsole(err);\n        }\n\n        try {\n            fbq(\"track\", \"PageView\");\n        } catch (err) {\n            ctvhubTags.debugConsole(err);\n        }\n\n        try {\n            twq(\"track\", \"PageView\");\n        } catch (err) {\n            ctvhubTags.debugConsole(err);\n        }\n\n        try {\n            if (ctvhubTags.secondAct(document.URL)) {\n                (function() {\n                    var a = String(Math.floor(Math.random() * 10000000000000000));\n                    new Image().src = 'https://pubads.g.doubleclick.net/activity;dc_iu=/5479/DFPAudiencePixel;ord=' + a + ';dc_seg=7239653815?';\n                })();\n            }\n        } catch (err) {\n            ctvhubTags.debugConsole(err);\n        }\n    },\n    secondAct: (targetURL) => {\n        let result = false;\n        if (typeof(targetURL) === \"string\") {\n            const splitURL = targetURL.split('?')[0];\n            const regexTest = new RegExp(\"/shows/second-act\\/?$\");\n            if (regexTest.test(splitURL)) {\n                result = true;\n            }\n        }\n\n        return result;\n    }\n};\nctvhubTags.setPageViewListener(ctvhubTags.pageViewCallback);\n</script>",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL0a9f6be8bcf648fba103b37318497df2",name:"GA360 Tracking on Crave Home",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/(en|fr)(\\/$|$)",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src="https://www.googletagmanager.com/gtag/js?id=UA-52328914-7"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag(\'set\', \'linker\', {\'domains\': [\'crave.ca\', \'bellmedia.ca\']});\n  gtag(\'js\', new Date());\n</script>\n<script>\nvar ga360 = {\n  debugConsole: function debugConsole(message) {\n    if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== "production") {\n      console.log(message);\n    }\n  },\n  setListeners: function setListeners(pageURL) {\n    if (ga360.checkPage(pageURL)) {\n      ga360.setPageViewListener(ga360.pageViewCallback);\n    }\n  },\n  checkPage: function checkPage(pageURL) {\n    var status = false;\n\n    if (typeof pageURL !== "string") {\n      pageURL = document.URL;\n    }\n\n    pageURL = pageURL.split("?")[0];\n    var whiteList = ["/(en|fr)(\\/$|$)"];\n    whiteList.forEach(function (listItem) {\n      var regexTest = new RegExp(listItem);\n\n      if (regexTest.test(pageURL)) {\n        status = true;\n      }\n    });\n    return status;\n  },\n  populateMetadata: function populateMetadata(adobeData) {\n    if (!gtag || !adobeData || typeof(adobeData) !== "object") {\n      return false;\n    }\n\n    var metadata = {};\n\n    if (adobeData.page && adobeData.page.name) {\n      metadata.pageName = adobeData.page.name;\n      gtag("set", "dimension1", metadata.pageName);\n    }\n\n    if (adobeData.user && adobeData.user.subscriptionType) {\n      metadata.subscriptionType = adobeData.user.subscriptionType;\n      gtag("set", "dimension2", metadata.subscriptionType);\n    }\n\n    return metadata;\n  },\n  setPageViewListener: function setPageViewListener(callback) {\n    document.addEventListener("digitalDataLoaded", callback);\n  },\n  pageViewCallback: function pageViewCallback() {\n    ga360.populateMetadata(window.digitalData);\n    gtag("config", "UA-52328914-7");\n  }\n};\nga360.setListeners();\n</script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL0ceec27815864d0fa5d390e1253606e4",name:"Permutive - Development Version",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:".*localhost.*",valueIsRegex:!0},{value:".*.local",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script>\n  \t!function (n, e, o, r, i) {\n\t\t\tif (!e) {\n\t\t\t\te = e || {}, window.permutive = e, e.q = [], e.config = i || {}, e.config.projectId = o, e.config.apiKey = r, e.config.environment = e.config.environment || "production";\n\t\t\t\tfor (var t = ["addon", "identify", "track", "trigger", "query", "segment", "segments", "ready", "on", "once", "user", "consent"], c = 0; c < t.length; c++) {\n\t\t\t\t\tvar f = t[c];\n\t\t\t\t\te[f]  = function (n) {\n\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\tvar o = Array.prototype.slice.call(arguments, 0);\n\t\t\t\t\t\t\te.q.push({functionName: n, arguments: o})\n\t\t\t\t\t\t}\n\t\t\t\t\t}(f)\n\t\t\t\t}\n\t\t\t}\n\t\t}(document, window.permutive, "289d106c-df24-4cd9-a9fa-753e928c23ad", "b1a4360a-3db9-4b39-b09d-c3e14666840a", {});\n\t\twindow.googletag = window.googletag || {}, window.googletag.cmd = window.googletag.cmd || [], window.googletag.cmd.push(function () {\n\t\t\tif (0 === window.googletag.pubads().getTargeting("permutive").length) {\n\t\t\t\tvar g = window.localStorage.getItem("_pdfps");\n\t\t\t\twindow.googletag.pubads().setTargeting("permutive", g ? JSON.parse(g) : [])\n\t\t\t}\n\t\t}); \n</script>\n\n<script>   \n  var permutiveLoader = {\n    "setListeners": function setListeners() {\n      document.addEventListener("pageViewFired", permutiveLoader.pageView);\n    },\n    "pageView": function pageView() {\n      if (window.digitalData) {\n        permutive.addon("web", {\n          "page": {\n            "user_info": {\n              "authBDU": digitalData.user.authBDU,\n              "authStatus": digitalData.user.authStatus,\n              "userId": digitalData.user.userId,\n              "profileType": digitalData.user.profileType,\n              "subscriptionType": digitalData.user.subscriptionType,\n              "profileLanguage": digitalData.user.profileLanguage,\n              "playbackLanguage": digitalData.user.playbackLanguage\n            },\n            "product_info": {\n              "platform": digitalData.page.platform,\n              "productName": digitalData.page.siteName,\n              "environment": _satellite.environment.stage\n            },\n            "page_info": {\n              "type": digitalData.page.type,\n              "siteSection": digitalData.page.siteSection,\n              "subsection1": digitalData.page.subsection1,\n              "subsection2": digitalData.page.subsection2,\n              "subsection3": digitalData.page.subsection3,\n              "subsection4": digitalData.page.subsection4,\n              "name": digitalData.page.name\n            }\n          }\n        });\n      } else {\n        permutive.addon("web", {});\n      }\n    }\n  };\n  permutiveLoader.setListeners();\n</script>\n\n\n\n<script async src="https://cdn.permutive.com/289d106c-df24-4cd9-a9fa-753e928c23ad-web.js"></script>\n\n\n\n\n\n',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL1645ba10202c4c999a7de718d0a44a05",name:"Crave Registration Flow TikTok Listeners",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["bellmedia.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:'var tiktok = {\n  setListeners: function setListeners(pageURL) {\n    document.addEventListener("digitalDataLoaded", function () {\n      tiktok.pageViewCallback(pageURL);\n    });\n    document.addEventListener("accountHashChange", function () {\n      tiktok.pageViewCallback(pageURL);\n    });\n    document.addEventListener("purchaseSuccess", function (event) {\n      tiktok.completePurchaseCallback(pageURL, event);\n    });\n    document.addEventListener("registrationSuccess", function () {\n      tiktok.registrationSuccessCallback(pageURL);\n    });\n  },\n  checkPage: function checkPage(pageURL) {\n    if (typeof pageURL !== "string") {\n      pageURL = String(window.document.URL);\n    }\n\n    pageURL = pageURL.split("?")[0];\n    var whiteList = {\n      "login": "/login\\/?$",\n      "register": "/register\\/?$",\n      "subscribe": "/subscribe\\/?\\#?\\/?$",\n      "purchaseSuccess": "/subscribe/success\\/?$",\n      "confirmResub": "/account/subscriptions/crave\\/?\\#?$",\n      "resubSuccess": "/account/subscriptions/crave/success\\/?$"\n    };\n\n    if (tiktok.checkBrand(window.digitalData)) {\n      for (var pageType in whiteList) {\n        var regexTest = new RegExp(whiteList[pageType]);\n\n        if (regexTest.test(pageURL)) {\n          return pageType;\n        }\n      }\n    }\n\n    return false;\n  },\n  checkBrand: function checkBrand(metadata) {\n    if (!!metadata && !!metadata.page && metadata.page.siteBrand === "crave") {\n      return true;\n    }\n\n    return false;\n  },\n  pageViewCallback: function pageViewCallback(pageURL) {\n    var validPage = tiktok.checkPage(pageURL);\n\n    if (validPage) {\n      ttq.page();\n      ttq.track("ViewContent");\n    }\n  },\n  completePurchaseCallback: function completePurchaseCallback(pageURL, event) {\n    var validPage = tiktok.checkPage(pageURL);\n\n    if (validPage) {\n      var total = null;\n      var subscriptionType = null;\n      var subscriptionPeriod = null;\n\n      if (event && event.detail) {\n        if (typeof event.detail.total === "number") {\n          total = event.detail.total;\n        }\n\n        if (event.detail.subscription) {\n          subscriptionPeriod = event.detail.subscription;\n        }\n\n        if (event.detail.user && event.detail.user.subscriptionType) {\n          subscriptionType = event.detail.user.subscriptionType;\n        }\n      }\n\n      ttq.track(\'Purchase\', {\n        value: total,\n        subscriptionType: subscriptionType,\n        subscriptionPeriod: subscriptionPeriod\n      });\n    }\n  },\n  registrationSuccessCallback: function registrationSuccessCallback(pageURL) {\n    var validPage = tiktok.checkPage(pageURL);\n\n    if (validPage) {\n      ttq.track(\'Registration\');\n    }\n  }\n};\ntiktok.setListeners();',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL186a31a3c70d47ef89ac723c8bda0885",name:"Permutive DMP",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["bellmedia.ca","9c9media.com"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script>  !function(n,e,o,r,i){if(!e){e=e||{},window.permutive=e,e.q=[],e.config=i||{},e.config.projectId=o,e.config.apiKey=r,e.config.environment=e.config.environment||"production";for(var t=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],c=0;c<t.length;c++){var f=t[c];e[f]=function(n){return function(){var o=Array.prototype.slice.call(arguments,0);e.q.push({functionName:n,arguments:o})}}(f)}}}(document,window.permutive,"289d106c-df24-4cd9-a9fa-753e928c23ad","b1a4360a-3db9-4b39-b09d-c3e14666840a",{}); \nwindow.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){if(0===window.googletag.pubads().getTargeting("permutive").length){var g=window.localStorage.getItem("_pdfps");window.googletag.pubads().setTargeting("permutive",g?JSON.parse(g):[])}}); \n \nvar permutiveLoader = {\n  "setListeners": function setListeners() {\n    document.addEventListener("pageViewFired", permutiveLoader.pageView);\n  },\n  "pageView": function pageView() {\n    if (window.digitalData) {\n      permutive.addon("web", {\n        "page": {\n          "user_info": {\n            "authBDU": digitalData.user.authBDU,\n            "authStatus": digitalData.user.authStatus,\n            "userId": digitalData.user.userId,\n            "profileType": digitalData.user.profileType,\n            "subscriptionType": digitalData.user.subscriptionType,\n            "profileLanguage": digitalData.user.profileLanguage,\n            "playbackLanguage": digitalData.user.playbackLanguage\n          },\n          "product_info": {\n            "platform": digitalData.page.platform,\n            "productName": digitalData.page.siteName,\n            "environment": _satellite.environment.stage\n          },\n          "page_info": {\n            "type": digitalData.page.type,\n            "siteSection": digitalData.page.siteSection,\n            "subsection1": digitalData.page.subsection1,\n            "subsection2": digitalData.page.subsection2,\n            "subsection3": digitalData.page.subsection3,\n            "subsection4": digitalData.page.subsection4,\n            "name": digitalData.page.name\n          }\n        }\n      });\n    } else {\n      permutive.addon("web", {});\n    }\n  }\n};\npermutiveLoader.setListeners();\n</script>\n<script async src="https://cdn.permutive.com/289d106c-df24-4cd9-a9fa-753e928c23ad-web.js"></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL1fb5519c21ae46c293dd77e96a569ce1",name:"Google/GA4 Noovo",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<!-- Google tag (gtag.js) -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-MLQK8SNS77\"></script> \n<script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-MLQK8SNS77'); </script>",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL2136a6a5cda0447ea6f800124131222a",name:"Initialize Data Manager",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:42}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,
source:'window._dataManager = (() => {\n    let firstPageLoaded = false;\n    let maxRetries = 3;\n    var queuedEvents = [];\n\n    const brandAllowList = {\n        "crave": false,\n        "bma": true,\n        "ctvhub": false,\n        "tsn": false,\n        "rds": false,\n        "noovo": false\n    };\n\n    let adobeEnabled = true;\n\n    return {\n        init: function init(url) {\n            if (this.testMode && _satellite.environment.stage !== "production") {\n                url = this.testURL;\n            }\n\n            this.initDataLayer();\n            this.setDefaultValues();\n            this.setRSID();\n            this.setMetadata();\n            this.checkEnabled(window.digitalData);\n            this.checkPreventDefault(url);\n        },\n        initDataLayer: () => {\n            if (!window.digitalData) {\n                window.digitalData = {};\n            }\n            if (!window.digitalData.page) {\n                window.digitalData.page = {};\n            }\n            if (!window.digitalData.user) {\n                window.digitalData.user = {};\n            }\n            if (!window.digitalData.launch) {\n                window.digitalData.launch = {};\n            }\n        },\n        setDefaultValues: function setDefaultValues() {\n            digitalData.page.siteName = digitalData.page.siteName || _dataManager.detectSiteName(document.URL);\n            if (!digitalData.page.productName) {\n                digitalData.page.productName = digitalData.page.siteName;\n            }\n            digitalData.user.authStatus = digitalData.user.authStatus || "anonymous";\n            digitalData.page.platform = digitalData.page.platform || "web";\n            digitalData.page.contentType = digitalData.page.contentType || "web page";\n            digitalData.page.type = digitalData.page.type || _dataManager.getPageType();\n        },\n        checkEnabled: (dataLayer) => {\n            let brand;\n\n            if (dataLayer?.page?.siteBrand && dataLayer?.page?.siteName === "bma") {\n                    brand = dataLayer?.page?.siteBrand;\n            } else {\n                brand = dataLayer?.page?.siteName;\n            }\n\n            if (brand === "ctv") {\n                brand = "ctvhub";\n            }\n\n            if (brandAllowList[brand] === false) {\n                adobeEnabled = false;\n            }\n        },\n        setMetadata: function setMetadata() {\n            digitalData.page.name = _dataManager.getPageName();\n            digitalData.page.section = digitalData.page.name.split(":")[1];\n            var d = new Date(),\n                hours = d.getHours(),\n                ampm = "am",\n                days = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"];\n\n            if (hours > 12) {\n                hours -= 12;\n                ampm = "pm";\n            }\n\n            digitalData.page.currentDate = d.getFullYear() + "-" + (d.getMonth() < 9 ? "0" : "") + (d.getMonth() + 1) + "-" + (d.getDate() < 10 ? "0" : "") + d.getDate();\n            digitalData.page.dayParts = days[d.getDay()] + " " + (hours < 10 ? "0" : "") + hours + ":" + (d.getMinutes() < 10 ? "0" : "") + d.getMinutes() + " " + ampm;\n            if (digitalData.page.type == "grid") {\n                var $coll = document.querySelector("div[data-collection-id]");\n\n                if ($coll && $coll.getAttribute("data-collection-id") && $coll.getAttribute("data-collection-name")) {\n                    digitalData.page.collectionId = $coll.getAttribute("data-collection-id") + ":" + $coll.getAttribute("data-collection-name");\n                }\n            } else if (_dataManager.Util.cookieRead("v31")) {\n                digitalData.page.collectionId = _dataManager.Util.cookieRead("v31");\n                _dataManager.Util.cookieWrite("v31", "", -1);\n            }\n\n            if (digitalData.page.collectionId) {\n                digitalData.page.collectionId = digitalData.page.collectionId.replace(/\\s+$/, "");\n            }\n        },\n        console: (message) => {\n            if (_satellite && _satellite.environment && _satellite.environment.stage && _satellite.environment.stage !== "production") {\n                window.console.log(message);\n            }\n        },\n        bindEventHandlers: function bindEventHandlers() {\n            // set timer for first page view\n            window.setTimeout(_dataManager.triggerFirstPageView, 3000);\n\n            // register events\n            var events = [\n                "accountHashChange",\n                "addToFavourites",\n                "authError",\n                "authSuccess",\n                "changePlaybackLanguage",\n                "changeProfileLanguage",\n                "digitalDataLoaded",\n                "episodeListClick",\n                "giftRedemptionSuccess",\n                "loginProblemsClick",\n                "passwordProblemsClick",\n                "purchaseSuccess",\n                "registrationSuccess",\n                "removeFromFavourites",\n                "screenView",\n                "searchResultsUpdated",\n                "showLinkClick",\n                "showOverlayOpen"\n            ];\n\n            for (var i = 0; i < events.length; i++) {\n                document.addEventListener(events[i], function(e) {\n                    window._dataManager.console("!!!LAUNCH LOGGED EVENT: " + e.type);\n\n                    window._dataManager.console(e.detail);\n\n                    if (window.digitalData) {\n                        if (digitalData.pageLoaded) {\n                            digitalData.eventData = null;\n                        }\n\n                        var eType = "pageEvent",\n                            eName = "",\n                            eDetail;\n                        var userData;\n\n                        if (e.detail && e.detail.user) {\n                            userData = e.detail.user;\n                        } else if (window.savedUserData) {\n                            userData = savedUserData;\n                            savedUserData = null;\n                            eName = "authentication success";\n                        }\n\n                        if (userData) {\n                            digitalData.user = digitalData.user || {};\n\n                            for (var x in userData) {\n                                if (userData[x]) {\n                                    digitalData.user[x] = userData[x];\n\n                                    if (x == "authBDU") {\n                                        digitalData.user[x] = digitalData.user[x].replace("bdu:", "");\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    switch (e.type) {\n                        case "accountHashChange":\n                            var invalidViews = ["checkservices"],\n                                isValidView = true;\n\n                            if (e.detail.page) {\n                                for (var i = 0; i < invalidViews.length; i++) {\n                                    if (e.detail.page.stepName == invalidViews[i]) {\n                                        isValidView = false;\n                                        break;\n                                    }\n                                }\n\n                                if (isValidView) {\n                                    digitalData.page.stepName = e.detail.page.stepName;\n\n                                    if (digitalData.page.stepName == "bdu") {\n                                        digitalData.page.stepName = "choose provider";\n                                    }\n\n                                    eType = "pageView";\n                                } else {\n                                    eType = "";\n                                }\n                            }\n\n                            break;\n\n                        case "addToFavourites":\n                            eName = "add to favourites";\n                            digitalData.show = e.detail.show;\n                            break;\n\n                        case "authError":\n                            eName = "authentication error";\n\n                            if (e.detail.error) {\n                                digitalData.error = {\n                                    type: e.detail.error.type\n                                };\n                            }\n\n                            break;\n\n                        case "authSuccess":\n                            eName = "authentication success";\n                            break;\n\n                        case "changePlaybackLanguage":\n                            eName = "change playback language";\n                            if (e.detail && typeof(e.detail.language) === "string") {\n                                eDetail = {\n                                    language: e.detail.language\n                                };\n                            }\n                            break;\n\n                        case "changeProfileLanguage":\n                            eName = "change profile language";\n                            if (e.detail && typeof(e.detail.language) === "string") {\n                                eDetail = {\n                                    language: e.detail.language\n                                };\n                            }\n                            break;\n\n                        case "digitalDataLoaded":\n                            _dataManager.init();\n                            firstPageLoaded = true;\n                            digitalData.pageLoaded = true;\n\n                            if (digitalData.page.type == "search") {\n                                if (window.savedSearchData) {\n                                    digitalData.search = savedSearchData;\n                                    savedSearchData = null;\n                                } else {\n                                    // track this on the searchResultsUpdated event\n                                    return;\n                                }\n                            }\n\n                            eType = "pageView";\n                            break;\n\n                        case "episodeListClick":\n                            eName = "episode list click";\n                            digitalData.show = e.detail.show;\n                            break;\n\n                        case "giftRedemptionSuccess":\n                            digitalData.purchase = {\n                                promoCode: e.detail.promoCode,\n                                type: e.detail.purchaseType || "subscription"\n                            };\n                            eName = "gift redemption success";\n                            break;\n\n                        case "loginProblemsClick":\n                            eName = "login problems click";\n                            break;\n\n                        case "passwordProblemsClick":\n                            eName = "password problems click";\n                            break;\n\n                        case "purchaseSuccess":\n                            digitalData.purchase = {\n                                type: e.detail.purchaseType || "subscription"\n                            };\n                            eName = e.detail.purchaseType == "gift" ? "gift subscription purchase" : "subscription purchase";\n                            break;\n\n                        case "registrationSuccess":\n                            eName = "registration success";\n                            break;\n\n                        case "removeFromFavourites":\n                            eName = "remove from favourites";\n                            digitalData.show = e.detail.show;\n                            break;\n\n                        case "screenView":\n                            if (e.detail.page) {\n                                for (var j in e.detail.page) {\n                                    digitalData.page[j] = e.detail.page[j];\n                                }\n                            }\n                            if (!digitalData.page.section) {\n                                digitalData.page.section = digitalData.page.type;\n                            }\n                            eType = "pageView";\n                            break;\n\n                        case "searchResultsUpdated":\n                            digitalData.page.type = "search";\n                            if (digitalData.pageLoaded) {\n                                digitalData.search = {\n                                    term: e.detail.search.term\n                                };\n                                eType = "pageView";\n                            } else {\n                                window.savedSearchData = e.detail.search;\n                                return;\n                            }\n\n                            break;\n\n                        case "showLinkClick":\n                            if (e.detail.show && e.detail.show.collectionId && e.detail.show.collectionName) {\n                                _dataManager.Util.cookieWrite("v31", e.detail.show.collectionId + ":" + e.detail.show.collectionName.toLowerCase());\n                            }\n\n                            eName = eType = "";\n                            break;\n\n                        case "showOverlayOpen":\n                            digitalData.page.type = "show";\n                            digitalData.show = e.detail.show;\n\n                            if (digitalData.show.name) {\n                                digitalData.show.name = digitalData.show.name.replace("Promotional Teaser: Base - ", "");\n                            }\n\n                            if (digitalData.show.collectionId && digitalData.show.collectionName) {\n                                digitalData.page.collectionId = (digitalData.show.collectionId + ":" + digitalData.show.collectionName).replace(/\\s+$/, "");\n                            } else if (digitalData.show.collectionName) {\n                                digitalData.page.collectionId = digitalData.show.collectionName.replace(/\\s+$/, "");\n                            }\n\n                            eType = "pageView";\n                            break;\n                    }\n\n                    if (digitalData.pageLoaded || eName == "authentication success") {\n                        delete digitalData.eventData;\n                        if (eName) {\n                            digitalData.eventData = {\n                                name: eName\n                            };\n\n                            if (eDetail) {\n                                if (!digitalData.eventData.detail) {\n                                    digitalData.eventData.detail = {};\n                                }\n                                const eDetailKeys = Object.keys(eDetail);\n                                eDetailKeys.forEach((key) => {\n                                    digitalData.eventData.detail[key] = eDetail[key];\n                                });\n                            }\n                        }\n                        if (eType && e.type === "showOverlayOpen" && e.detail) {\n                            if (e.detail.show) {\n                                const showKeys = Object.keys(e.detail.show);\n                                showKeys.forEach((key) => {\n                                    if (e.detail.show[key] === null) {\n                                        e.detail.show[key] = "";\n                                    }\n                                    e.detail.show[key] = String(e.detail.show[key]);\n                                });\n                            }\n                            document.dispatchEvent(new CustomEvent("pageViewFired"));\n                            _dataManager.satelliteTrack("pageView", e.detail);\n                        } else if (eType) {\n                            if (eType == "pageView" && !window._dataManager.preventDefault) {\n                                digitalData.page.name = _dataManager.getPageName();\n                                document.dispatchEvent(new CustomEvent("pageViewFired"));\n                                _dataManager.satelliteTrack(eType);\n                            } else if (eType == "pageView" && window._dataManager.preventDefault) {\n                                digitalData.page.name = _dataManager.getPageName();\n                            } else {\n                                _dataManager.satelliteTrack(eType);\n                            }\n                        }\n                    }\n                });\n            }\n        },\n        satelliteTrack: function satelliteTrack(eventType, eventDetails) {\n            if (adobeEnabled) {\n                if (!_satellite.track || !digitalData.pageLoaded || typeof(window.s) === "undefined") {\n                    queuedEvents.push({\n                        type: eventType,\n                        details: eventDetails\n                    });\n\n                    window._dataManager.console("satelliteTrack: _satellite.track is not ready - queueing event");\n                    window.setTimeout(_dataManager.trackQueue, "2000");\n                    return false;\n                }\n\n                _satellite.track(eventType, eventDetails);\n            }\n        },\n        trackQueue: () => {\n            if (!_satellite.track || !digitalData.pageLoaded || typeof(window.s) === "undefined") {\n                window._dataManager.console("trackQueue: _satellite.track is not ready");\n                if (maxRetries > 0) {\n                    window.setTimeout(_dataManager.trackQueue, "2000");\n                    maxRetries -= 1;\n                }\n                return false;\n            }\n            if (queuedEvents.length > 0) {\n                _dataManager.init();\n                queuedEvents.forEach(function(element) {\n                    if (element.type === "pageView") {\n                        document.dispatchEvent(new CustomEvent("digitalDataLoaded"));\n                    } else {\n                        _dataManager.satelliteTrack(element.type, element.details);\n                    }\n                });\n                queuedEvents = [];\n            }\n        },\n        setRSID: () => {\n            const rsid = window._dataManager.populateRSID(window.digitalData.page.siteName);\n\n            if (window.s) {\n                s.setAccount(rsid);\n            }\n        },\n        populateRSID: function populateRSID(originalSiteName) {\n            const siteName = String(originalSiteName).toLowerCase();\n            const brands = Object.keys(brandAllowList);\n            let sitePart = "global";\n            let rsid;\n\n            if (brands.includes(siteName)) {\n                if (siteName === "ctvhub") {\n                    sitePart = "ctvsuperhub";\n                } else if (siteName === "bma") {\n                    const siteBrand = String(window.digitalData.page.siteBrand).toLowerCase();\n                    if (brands.includes(siteBrand)) {\n                        sitePart = siteBrand;\n                    } else if (siteBrand === "ctv") {\n                        sitePart = "ctvsuperhub";\n                    }\n                } else {\n                    sitePart = siteName;\n                }\n            }\n\n            if (window._satellite.environment.stage === "development" || window._satellite.environment.stage === "staging") {\n                rsid = "bellmedia" + sitePart + "dev";\n            } else if (window._satellite.environment.stage === "production") {\n                rsid = "bellmedia" + sitePart + "prod";\n            }\n\n            return rsid;\n        },\n        getQueryStringParameterValue: function getQueryStringParameterValue(parameterName, queryString) {\n            if (typeof parameterName !== "string") {\n                window._dataManager.console("_dataManager - getQueryStringParameter: invalid parameterName");\n\n                return false;\n            }\n\n            if (typeof queryString === "undefined") {\n                queryString = window.document.URL;\n            }\n\n            var regexTest = new RegExp(parameterName + "=([^&\\\\s]*)");\n            var parameterValue = queryString.match(regexTest);\n\n            if (parameterValue === null) {\n                window._dataManager.console("_dataManager - getQueryStringParameter: parameter does not exist");\n\n                return null;\n            } else {\n                return parameterValue[1];\n            }\n        },\n        checkPreventDefault: function checkPreventDefault(queryString) {\n            if (typeof queryString === "undefined") {\n                queryString = window.document.URL;\n            }\n\n            if (this.getQueryStringParameterValue("preventdefault", queryString) === "true") {\n                this.preventDefault = true;\n            } else {\n                this.preventDefault = false;\n            }\n        },\n        getPageType: function getPageType() {\n            var path = document.location.pathname,\n                type = "other";\n\n            if (document.querySelector(".carousel")) {\n                if (path == "/") {\n                    type = "home";\n                } else {\n                    type = "landing";\n                }\n            } else if (document.querySelector(".search-results")) {\n                type = "search";\n            } else if (document.querySelector(".axismedia-landing-page")) {\n                type = "show";\n            } else if (document.querySelector(".web-videoplayer")) {\n                type = "playback";\n            } else if (document.querySelector(".linear-video")) {\n                type = "live";\n            } else if (document.querySelector(".marketing")) {\n                type = "registration";\n            } else if (document.querySelector(".is-axismedia-type")) {\n                type = "grid";\n            }\n\n            return type;\n        },\n        getPageName: function getPageName() {\n            var safeTrim = obj => {\n                if (!obj) {\n                    return String(obj);\n                }\n                return typeof(obj) == "string" ? obj.trim() : obj.toString().trim();\n            };\n\n            if (!digitalData || !digitalData.page) {\n                return "undefined";\n            }\n\n            var name = safeTrim(digitalData.page.siteName) + ":";\n            var type = safeTrim(digitalData.page.type);\n\n            if (type == "grid") {\n                if (digitalData.page.collectionId) {\n                    name += "collection:" + safeTrim(digitalData.page.collectionId);\n                } else {\n                    name += "landing:" + safeTrim(document.location.pathname.split("/")[1]);\n\n                    if (digitalData.page.mainFilter) {\n                        name += ":" + safeTrim(digitalData.page.mainFilter.value);\n                    }\n                }\n            } else if (type && type.match(/playback|show|movie/) !== null) {\n                name += `${ type }${ digitalData.show.name === undefined ? "" :  ( ":" + safeTrim(digitalData.show.name ) ) }`;\n            } else if (type == "other") {\n                var path = document.location.pathname.split("/");\n\n                for (var i = 0; i < path.length; i++) {\n                    if (path[i]) {\n                        name += (name.lastIndexOf(":") == name.length - 1 ? "" : ":") + safeTrim(path[i]);\n                    }\n                }\n            } else if (digitalData.page.siteName === "bma") {\n                name += safeTrim(digitalData.page.siteBrand) + ":";\n                name += type;\n                if (digitalData.page.stepName) {\n                    name += ":" + safeTrim(digitalData.page.stepName);\n                }\n            } else {\n                name += type;\n\n                if (digitalData.page.categoryName || digitalData.page.collectionName || digitalData.page.genre) {\n                    if (digitalData.page.categoryName) {\n                        name += ":" + safeTrim(digitalData.page.categoryName);\n                    }\n                    if (digitalData.page.collectionName) {\n                        name += ":" + safeTrim(digitalData.page.collectionName);\n                    }\n                    if (digitalData.page.genre) {\n                        name += ":" + safeTrim(digitalData.page.genre);\n                    }\n                } else if (digitalData.page.screenName) {\n                    name += ":" + safeTrim(digitalData.page.screenName);\n                } else if (type == "login") {\n                    if (digitalData.page.stepName && digitalData.page.stepName != "login") {\n                        name += ":" + safeTrim(digitalData.page.stepName);\n                    } else {\n                        name += ":choose method";\n                    }\n                }\n            }\n\n            return name.toLowerCase().replace(/ /g, "-");\n        },\n        triggerFirstPageView: () => {\n            if (!firstPageLoaded) {\n                document.dispatchEvent(new CustomEvent(\'digitalDataLoaded\'));\n                return true;\n            }\n\n            return false;\n        },\n        detectSiteName: (URL) => {\n            const noovoTest = new RegExp(/noovo\\.ca?(\\/|$)/gm);\n            const ctvTest = new RegExp(/ctv\\.ca?(\\/|$)/gm);\n            const craveTest = new RegExp(/(bond.*\\.entpay\\.bellmedia\\.ca?(\\/|$))|(crave\\.ca?(\\/|$))/gm);\n            const bmaTest = new RegExp(/(account\\.bellmedia\\.ca?(\\/|$))/gm);\n\n            if (URL.match(noovoTest)) {\n                return "noovo";\n            }\n\n            if (URL.match(ctvTest)) {\n                return "ctv";\n            }\n\n            if (URL.match(craveTest)) {\n                return "crave";\n            }\n\n            if (URL.match(bmaTest)) {\n                return "bma";\n            }\n        },\n        Util: {\n            cookieRead: (name) => {\n                try {\n                    s.Util.cookieRead(name);\n                } catch (error) {\n                    _dataManager.console("Error: s.Util.cookieRead: " + error);\n                }\n            },\n            cookieWrite: (name, value, duration) => {\n                try {\n                    s.Util.cookieWrite(name, value, duration);\n                } catch (error) {\n                    _dataManager.console("Error: s.Util.cookieWrite: " + error);\n                }\n            },\n            returnAdobeState: () => {\n                return adobeEnabled;\n            },\n            resetEnabled: () => {\n                adobeEnabled = true;\n            }\n        }\n    };\n})();\n\n_dataManager.bindEventHandlers();',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL293a5ac123124dd0998bd19dd91769cf",name:"Optimizely Library",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"(sandbox\\.)?account.bellmedia.ca",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/653e7ca2fc48/28cf2c8d1fb5/47e0dfc6a5dc/RC48cd86caf8814b899329ebece28c9847-source.min.js",language:"html",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL379dd7b76fed44e4afae4bf67484aa17",name:"CSS - My Cravings Login Click",events:[{modulePath:"core/src/lib/events/mousedown.js",settings:{elementSelector:"div.message-login a",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/653e7ca2fc48/28cf2c8d1fb5/47e0dfc6a5dc/RCbff5136fdec44d0ca76cd9e8c7f7a197-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL3d010dc748984c84895a982d780ca42b",name:"TSN Marketing Tags",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"account.bellmedia.ca$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{
source:'<!-- Bing Universal Tag -->\n<script>\n    (function(w, d, t, r, u) {\n        var f, n, i;\n        w[u] = w[u] || [], f = function() {\n            var o = {\n                ti: "15327251"\n            };\n            o.q = w[u], w[u] = new UET(o), w[u].push("pageLoad")\n        }, n = d.createElement(t), n.src = r, n.async = 1, n.onload = n.onreadystatechange = function() {\n            var s = this.readyState;\n            s && s !== "loaded" && s !== "complete" || (f(), n.onload = n.onreadystatechange = null)\n        }, i = d.getElementsByTagName(t)[0], i.parentNode.insertBefore(n, i)\n    })(window, document, "script", "//bat.bing.com/bat.js", "uetq");\n</script>\n<!-- End Bing Universal Tag -->\n<!-- Global site tag (gtag.js) - DoubleClick -->\n<script async src="https://www.googletagmanager.com/gtag/js?id=DC-6169686"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag(\'js\', new Date());\n\n    gtag(\'config\', \'DC-11024383\', {\n        \'send_page_view\': false\n    });\n    gtag(\'config\', \'AW-722333678\', {\n        \'send_page_view\': false\n    });\n</script>\n<!-- End of global snippet: Please do not remove -->\n<!-- Global site tag (gtag.js) - Google AdWords: 803817420 -->\n<script async src="https://www.googletagmanager.com/gtag/js?id=AW-803817420"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag(\'js\', new Date());\n\n    gtag(\'config\', \'AW-803817420\', {\n        \'send_page_view\': false\n    });\n</script>\n<!-- Snap Pixel Code -->\n<script type=\'text/javascript\'>\n    (function(e, t, n) {\n        if (e.snaptr) return;\n        var a = e.snaptr = function() {\n            a.handleRequest ? a.handleRequest.apply(a, arguments) : a.queue.push(arguments)\n        };\n        a.queue = [];\n        var s = \'script\';\n        r = t.createElement(s);\n        r.async = !0;\n        r.src = n;\n        var u = t.getElementsByTagName(s)[0];\n        u.parentNode.insertBefore(r, u);\n    })(window, document, \'https://sc-static.net/scevent.min.js\');\n</script> <!-- End Snap Pixel Code -->\n<!-- Twitter universal website tag code -->\n<script>\n    ! function(e, t, n, s, u, a) {\n        e.twq || (s = e.twq = function() {\n                s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);\n            }, s.version = \'1.1\', s.queue = [], u = t.createElement(n), u.async = !0, u.src = \'//static.ads-twitter.com/uwt.js\',\n            a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))\n    }(window, document, \'script\');\n    // Insert Twitter Pixel ID and Standard Event data below\n    twq(\'init\', \'nzkmw\');\n</script>\n<!-- End Twitter universal website tag code -->\n<script src="//platform.twitter.com/oct.js" type="text/javascript"></script>\n<script>\nvar tsnListener = {\n  debugConsole: function debugConsole(message) {\n    if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== "production") {\n      console.log(message);\n    }\n  },\n  setListeners: function setListeners(pageURL) {\n    if (tsnListener.checkBrand(window.digitalData)) {\n        snaptr(\'init\', \'b554d2d1-8a72-4ff5-92fa-75a2ca5cea8f\');\n    }\n    document.addEventListener("digitalDataLoaded", function () {\n      tsnListener.pageViewCallback(pageURL);\n    });\n    document.addEventListener("accountHashChange", function () {\n      tsnListener.pageViewCallback(pageURL);\n    });\n    document.addEventListener("purchaseSuccess", function (event) {\n      tsnListener.completePurchaseCallback(pageURL, event.detail);\n    });\n    document.addEventListener("registrationSuccess", function () {\n      tsnListener.registrationSuccessCallback(pageURL);\n    });\n  },\n  checkPage: function checkPage(pageURL) {\n    var status = false;\n\n    if (typeof pageURL !== "string") {\n      pageURL = String(window.document.URL).split("?")[0];\n    }\n\n    var whiteList = ["/login\\/?$", "/register\\/?$", "/subscribe\\/?\\#?\\/?$", "/subscribe/success\\/?$", "/account/subscriptions/tsn\\/?$"];\n\n    if (tsnListener.checkBrand(window.digitalData)) {\n      whiteList.forEach(function (listItem) {\n        var regexTest = new RegExp(listItem);\n\n        if (regexTest.test(pageURL)) {\n          status = true;\n        }\n      });\n    }\n\n    return status;\n  },\n  checkBrand: function checkBrand(metadata) {\n    if (!!metadata && !!metadata.page && metadata.page.siteBrand === "tsn") {\n      return true;\n    }\n\n    return false;\n  },\n  checkSubscription: function checkSubscription(eventDetail) {\n    var subscriptionType = null;\n\n    if (eventDetail && eventDetail.user && eventDetail.user.subscriptionType === "tsn" && eventDetail.subscription) {\n      var subValue = String(eventDetail.subscription).toLowerCase();\n      var subList = {\n        "daily": "daily",\n        "monthly": "monthly"\n      };\n\n      for (var subType in subList) {\n        var regexTest = new RegExp(subList[subType]);\n\n        if (regexTest.test(subValue)) {\n          return subType;\n        }\n      }\n    }\n\n    return subscriptionType;\n  },\n  pageViewCallback: function pageViewCallback(pageURL) {\n    if (tsnListener.checkPage(pageURL)) {\n      try {\n        fbq("track", "PageView");\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        gtag("event", "page_view", {\n          send_to: "DC-11024383"\n        });\n        gtag("event", "page_view", {\n          send_to: "AW-722333678"\n        });\n        gtag("event", "page_view", {\n          send_to: "AW-803817420"\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        snaptr("track", "PAGE_VIEW");\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        twq("track", "PageView");\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n    }\n  },\n  completePurchaseCallback: function completePurchaseCallback(pageURL, eventDetail) {\n    var subType;\n\n    if (eventDetail && eventDetail.subscription) {\n      subType = eventDetail.subscription;\n    }\n\n    if (tsnListener.checkPage(pageURL)) {\n      try {\n        window.uetq = window.uetq || [];\n        window.uetq.push("event", "Confirmation", {\n          "event_category": "Subscription",\n          "event_label": "Sign-up",\n          "event_value": eventDetail.total\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        gtag("event", "conversion", {\n          "allow_custom_scripts": true,\n          "u1": subType,\n          "send_to": "DC-11024383/tsnf20/tsnsu0+unique"\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        gtag("event", "conversion", {\n          "send_to": "AW-803817420/8s05CNyF74IBEMyPpf8C"\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        gtag("event", "conversion", {\n          "send_to": "AW-722333678/K9r4CJ6wxqYBEO7ft9gC"\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        twttr.conversion.trackPid("o2e6w", {\n          tw_sale_amount: eventDetail.total,\n          tw_order_quantity: 1\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        fbq("track", "Purchase");\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      try {\n        snaptr("track", "SIGN_UP");\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n\n      if (tsnListener.checkSubscription(eventDetail) === "daily") {\n        try {\n          twttr.conversion.trackPid("o2e6x", {\n            tw_sale_amount: eventDetail.total,\n            tw_order_quantity: 1\n          });\n        } catch (error) {\n          tsnListener.debugConsole(error);\n        }\n\n        try {\n          fbq("track", "DayPassSubscribe");\n        } catch (error) {\n          tsnListener.debugConsole(error);\n        }\n      }\n\n      if (tsnListener.checkSubscription(eventDetail) === "monthly") {\n        try {\n          twttr.conversion.trackPid("o2e6y", {\n            tw_sale_amount: eventDetail.total,\n            tw_order_quantity: 1\n          });\n        } catch (error) {\n          tsnListener.debugConsole(error);\n        }\n\n        try {\n          fbq("track", "MonthPassSubscribe");\n        } catch (error) {\n          tsnListener.debugConsole(error);\n        }\n      }\n    }\n  },\n  registrationSuccessCallback: function registrationSuccessCallback(pageURL) {\n    if (tsnListener.checkPage(pageURL)) {\n      try {\n        twttr.conversion.trackPid("o2e0r", {\n          tw_sale_amount: 0,\n          tw_order_quantity: 0\n        });\n      } catch (error) {\n        tsnListener.debugConsole(error);\n      }\n    }\n  }\n};\ntsnListener.setListeners();\n</script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL417065d284314365a037ff5453ad318a",name:"GA360 Tracking on UM Subscription Flow",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"account.bellmedia.ca$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src="https://www.googletagmanager.com/gtag/js?id=UA-52328914-7"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag(\'set\', \'linker\', {\n    \'accept_incoming\': true\n  });\n  gtag(\'js\', new Date());\n</script>\n<script>\nvar ga360 = {\n  setListeners: function setListeners(pageURL) {\n    document.addEventListener("digitalDataLoaded", function () {\n      ga360.pageViewCallback(pageURL);\n    });\n    document.addEventListener("accountHashChange", function () {\n      ga360.pageViewCallback(pageURL);\n    });\n    document.addEventListener("purchaseSuccess", function (event) {\n      ga360.completePurchaseCallback(pageURL, event);\n    });\n  },\n  checkPage: function checkPage(pageURL) {\n    if (typeof pageURL !== "string") {\n      pageURL = String(window.document.URL);\n    }\n\n    pageURL = pageURL.split("?")[0];\n    var whiteList = {\n      "identifier": "/register/identifier\\/?$",\n      "password": "/register/password\\/?$",\n      "login": "/register\\/?$",\n      "subscribe": "/subscribe\\/?\\#?\\/?$",\n      "purchaseSuccess": "/subscribe/success\\/?$",\n      "confirmResub": "/account/subscriptions/crave\\/?\\#?$",\n      "resubSuccess": "/account/subscriptions/crave/success\\/?$"\n    };\n\n    if (ga360.checkBrand(window.digitalData)) {\n      for (var pageType in whiteList) {\n        var regexTest = new RegExp(whiteList[pageType]);\n\n        if (regexTest.test(pageURL)) {\n          return pageType;\n        }\n      }\n    }\n\n    return false;\n  },\n  checkBrand: function checkBrand(metadata) {\n    if (!!metadata && !!metadata.page && metadata.page.siteBrand === "crave") {\n      return true;\n    }\n\n    return false;\n  },\n  populateMetadata: function populateMetadata(adobeData) {\n    if (!gtag || !adobeData || typeof(adobeData) !== "object") {\n      return false;\n    }\n\n    var metadata = {};\n\n    if (adobeData.page && adobeData.page.name) {\n      metadata.pageName = adobeData.page.name;\n      gtag("set", "dimension1", metadata.pageName);\n    }\n\n    if (adobeData.user && adobeData.user.subscriptionType) {\n      metadata.subscriptionType = adobeData.user.subscriptionType;\n      gtag("set", "dimension2", metadata.subscriptionType);\n    }\n\n    return metadata;\n  },\n  pageViewCallback: function pageViewCallback(pageURL) {\n    var validPage = ga360.checkPage(pageURL);\n\n    if (validPage) {\n      ga360.populateMetadata(window.digitalData);\n      gtag("config", "UA-52328914-7", {\n        "page_title": document.title,\n        "page_location": location.href,\n        "page_path": location.pathname\n      });\n    }\n  },\n  completePurchaseCallback: function completePurchaseCallback(pageURL, event) {\n    var validPage = ga360.checkPage(pageURL);\n\n    if (validPage) {\n      ga360.populateMetadata(window.digitalData);\n\n      if (validPage === "subscribe" || validPage === "purchaseSuccess") {\n        gtag("event", "complete purchase clicked", {\n          "event_category": "subscription flow"\n        });\n      } else if (validPage === "confirmResub" || validPage === "resubSuccess") {\n        gtag("event", "resub purchase clicked", {\n          "event_category": "account management"\n        });\n      }\n\n      gtag("event", "new or resub purchase clicked", {\n        "event_category": "account management/subscription flow"\n      });\n    }\n\n    ga360.optimizelyEvents(event);\n  },\n  optimizelyEvents: function optimizelyEvents(event) {\n    var total = null;\n    var subscriptionType = null;\n    var subscriptionPeriod = null;\n\n    if (event && event.detail) {\n      if (typeof event.detail.total === "number") {\n        total = event.detail.total;\n      }\n\n      if (event.detail.subscription) {\n        subscriptionPeriod = event.detail.subscription;\n      }\n\n      if (event.detail.user && event.detail.user.subscriptionType) {\n        subscriptionType = event.detail.user.subscriptionType;\n      }\n    }\n\n    window[\'optimizely\'] = window[\'optimizely\'] || [];\n    window[\'optimizely\'].push({\n      type: "event",\n      eventName: "purchaseSuccess",\n      tags: {\n        value: total,\n        subscriptionType: subscriptionType,\n        subscriptionPeriod: subscriptionPeriod\n      }\n    });\n  }\n};\nga360.setListeners();\n</script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL529d31e1d10d4d6390e579c053ae31ee",name:"Amazon Page Load Pixel",events:[{modulePath:"core/src/lib/events/pageBottom.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"\\/subscribe(\\/)?$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<!-- Use of this pixel is subject to the Amazon ad specs and policies at http://www.amazon.com/b/?&node=7253015011 -->\n<script type='text/javascript'>\n    var _pix = document.getElementById('_pix_id_189e1e40-113b-8b69-4644-04fe3a5ec489');\n    if (!_pix) {\n        var protocol = '//';\n        var a = Math.random() * 1000000000000000000;\n        _pix = document.createElement('iframe');\n        _pix.style.display = 'none';\n        _pix.setAttribute('src', protocol + 's.amazon-adsystem.com/iu3?d=generic&ex-fargs=%3Fid%3D189e1e40-113b-8b69-4644-04fe3a5ec489%26type%3D4%26m%3D7&ex-fch=416613&ex-src=https://www.crave.ca/subscribe&ex-hargs=v%3D1.0%3Bc%3D7745458665822%3Bp%3D189E1E40-113B-8B69-4644-04FE3A5EC489' + '&cb=' + a);\n        _pix.setAttribute('id', '_pix_id_189e1e40-113b-8b69-4644-04fe3a5ec489');\n        document.body.appendChild(_pix);\n    }\n</script>\n<noscript><img height='1' width='1' border='0' alt='' src='https://s.amazon-adsystem.com/iui3?d=forester-did&ex-fargs=%3Fid%3D189e1e40-113b-8b69-4644-04fe3a5ec489%26type%3D4%26m%3D7&ex-fch=416613&ex-src=https://www.crave.ca/subscribe&ex-hargs=v%3D1.0%3Bc%3D7745458665822%3Bp%3D189E1E40-113B-8B69-4644-04FE3A5EC489' /></noscript>",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL544ab744df2841d180f289cf1e1cd9d0",name:"OneTrust/Noovo/ScriptRef",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script type="text/javascript" src="https://cdn.cookielaw.org/consent/6735de89-1526-4738-8b53-ebc73739ef6d/OtAutoBlock.js" ></script>\n<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="6735de89-1526-4738-8b53-ebc73739ef6d" ></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL6227318f3d2c44bfb289ad4bf11ae1c1",name:"OneTrust/mParticle/Integration/Dev",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"cravedev1.entpay.9c9media.ca"}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="1ce38bb3-3def-4170-8e57-bb8fd139b0c8-test" ></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL62ebe9b364004ca683933329bdf698c6",name:"Noovo Tags Listener",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:'const noovoVideo = {\n    debugConsole: (message) => {\n        if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== "production") {\n            console.log(message);\n        }\n    },\n    getPlayer: (array) => {\n        if (!Array.isArray(array)) {\n            return;\n        }\n\n        return array.length > 0 ? array.slice(-1).pop() : null;\n    },\n    getTitle: (playerInstance) => {\n        return playerInstance?._instanceBMVideoplayerJw?._jwplayerInstance?.getPlaylistItem()?.title;\n    },\n    setListeners: () => {\n        try {\n            const playerInstance = noovoVideo.getPlayer(window.BMVidiPlayerInstances);\n            const jwPlayer = playerInstance._instanceBMVideoplayerJw._jwplayer();\n            const title = noovoVideo.getTitle(playerInstance);\n            jwPlayer.once("play", () => {\n                noovoVideo.videoStartCallback(title);\n            });\n        } catch (error) {\n            noovoVideo.debugConsole("noovoVideo[setListeners]: " + error)\n        }\n    },\n    videoStartCallback: (title) => {\n        try {\n            gtag(\'event\', \'video_view\', {\n                \'send_to\': \'AW-397180234/ucMqCPf6kYQDEMr6sb0B\',\n                \'video_title\': title\n            });\n        } catch (error) {\n            noovoVideo.debugConsole("noovoVideo[gtag]: " + error);\n        }\n\n        try {\n            fbq(\'trackSingleCustom\', \'1296439223722665\', \'video_view\', {\n                \'video_title\': title\n            });\n        } catch (error) {\n            noovoVideo.debugConsole("noovoVideo[fbq]: " + error);\n        }\n    }\n};\n\nconst noovoListener = {\n    debugConsole: (message) => {\n        if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== "production") {\n            console.log(message);\n        }\n    },\n    setListeners: () => {\n        document.addEventListener("digitalDataLoaded", noovoListener.pageViewCallback);\n    },\n    pageViewCallback: (pageURL) => {\n        try {\n            fbq("trackSingle", "1296439223722665", "PageView");\n            fbq("trackSingle", "959349314656084", "PageView");\n            if (noovoListener.checkPage(pageURL)) {\n                fbq("trackSingle", "855636215129668", "PageView");\n            }\n        } catch (error) {\n            noovoListener.debugConsole("noovoListener: " + error);\n        }\n        try {\n            gtag(\'event\', \'Page View\');\n        } catch (error) {\n            noovoListener.debugConsole("noovoListener: " + error);\n        }\n        try {\n            window.setTimeout(noovoVideo.setListeners, 3000);\n        } catch (error) {\n            noovoListener.debugConsole("noovoListener: " + error);\n        }\n    },\n    checkPage: (pageURL) => {\n        if (typeof(pageURL) !== "string") {\n            pageURL = String(window.document.URL);\n        }\n\n        pageURL = pageURL.split("?")[0];\n\n        const whiteList = {\n            "completement-lycee": "/emissions/completement-lycee\\/?$"\n        };\n\n        for (const pageType in whiteList) {\n            const regexTest = new RegExp(whiteList[pageType]);\n            if (regexTest.test(pageURL)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n};\n\nnoovoListener.setListeners();',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL71ef33c685974992b43164f6a6a6f53b",name:"Braze/Noovo",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:49}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"qa.noovo.ca"}]},timeout:2e3},{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script>\n  const initializeBrazeForCrave = () => {\n    let KEYS = {\n      "dev": "76683631-2f45-426a-bcd9-cc6c0301b92e",\n      "prod": "889564a5-45ab-45a2-a853-0e454389ad2f"\n    }\n\n    let envKey = (window._satellite.buildInfo.environment !== "production" ? KEYS.dev : KEYS.prod)\n\n    appboy.initialize(envKey, {\n        baseUrl: "sdk.iad-03.braze.com",\n        enableLogging: location.host.includes(\'qa.noovo\')\n    });\n\n    appboy.openSession();\n  }\n  \n  //initializeBrazeForCrave();  \n</script>\n',language:"html"},timeout:500,delayNext:!0}]},{id:"RL81e9edef514742f3bd412d72c411e24d",name:"Noovo Ad Libraries",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:49}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<!-- Facebook Pixel Code -->\n<script>\n    ! function(f, b, e, v, n, t, s) {\n        if (f.fbq) return;\n        n = f.fbq = function() {\n            n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n        }\n\n        ;\n        if (!f._fbq) f._fbq = n;\n        n.push = n;\n        n.loaded = !0;\n        n.version = '2.0';\n        n.queue = [];\n        t = b.createElement(e);\n        t.async = !0;\n        t.src = v;\n        s = b.getElementsByTagName(e)[0];\n        s.parentNode.insertBefore(t, s)\n    }(window, document, 'script',\n        'https://connect.facebook.net/en_US/fbevents.js');\n    fbq.disablePushState = true;\n    fbq('init', '1296439223722665');\n    fbq('init', '959349314656084');\n    fbq('init', '855636215129668');\n</script>\n<noscript>\n    <img height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id=1296439223722665&ev=PageView&noscript=1\" />\n    <img height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id=959349314656084&ev=PageView&noscript=1\" />\n</noscript>\n<!-- End Facebook Pixel Code -->\n<!-- Global site tag (gtag.js) - Google Ads: 10808802777 -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=AW-10808802777\"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n\n    gtag('config', 'AW-10808802777', {\n        send_page_view: false\n    });\n    gtag('config', 'AW-397180234', {\n        send_page_view: false\n    });\n</script>",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL88d449d26c614af9b14ce55979875e9b",name:"GA360 Tracking on en/fr Subscribe Pages",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"/(en|fr)/subscribe\\/?$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src="https://www.googletagmanager.com/gtag/js?id=UA-52328914-7"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag(\'set\', \'linker\', {\'domains\': [\'crave.ca\', \'bellmedia.ca\']});\n  gtag(\'js\', new Date());\n</script>\n<script>\nvar ga360 = {\n  debugConsole: function debugConsole(message) {\n    if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== "production") {\n      console.log(message);\n    }\n  },\n  setListeners: function setListeners(pageURL) {\n    if (ga360.checkPage(pageURL)) {\n      ga360.setPageViewListener(ga360.pageViewCallback);\n      window.addEventListener("load", ga360.setButtonListeners);\n    }\n  },\n  checkPage: function checkPage(pageURL) {\n    var status = false;\n\n    if (typeof pageURL !== "string") {\n      pageURL = String(document.URL).split("?")[0];\n    }\n\n    var whiteList = ["/(en|fr)/subscribe\\/?$"];\n    whiteList.forEach(function (listItem) {\n      var regexTest = new RegExp(listItem);\n\n      if (regexTest.test(pageURL)) {\n        status = true;\n      }\n    });\n    return status;\n  },\n  populateMetadata: function populateMetadata(adobeData) {\n    if (!gtag || !adobeData || typeof(adobeData) !== "object") {\n      return false;\n    }\n\n    var metadata = {};\n\n    if (adobeData.page && adobeData.page.name) {\n      metadata.pageName = adobeData.page.name;\n      gtag("set", "dimension1", metadata.pageName);\n    }\n\n    if (adobeData.user && adobeData.user.subscriptionType) {\n      metadata.subscriptionType = adobeData.user.subscriptionType;\n      gtag("set", "dimension2", metadata.subscriptionType);\n    }\n\n    return metadata;\n  },\n  setPageViewListener: function setPageViewListener(callback) {\n    document.addEventListener("digitalDataLoaded", callback);\n  },\n  setDTCListeners: function setDTCListeners(callback) {\n    var dtcListener = function dtcListener(event) {\n      var element = event.target;\n\n      if (element.tagName == \'A\' && element.classList.contains("sc-9w1e9d-12")) {\n        var parentClass = element.parentElement.classList[0];\n        var label = ga360.getDTCLabel(parentClass);\n        callback(label);\n      }\n    };\n\n    document.addEventListener("click", dtcListener);\n  },\n  setBDUListeners: function setBDUListeners(callback) {\n    try {\n      var button = document.getElementsByClassName("sc-9w1e9d-11")[0];\n      button.addEventListener("click", callback);\n    } catch (error) {\n      ga360.debugConsole("ga360.setBDUListeners: " + error);\n    }\n  },\n  getDTCLabel: function getDTCLabel(parentClass) {\n    try {\n      var sections = {\n        "navigation": "sc-9w1e9d-97",\n        "hero": "sc-9w1e9d-9",\n        "packages": "sc-9w1e9d-78",\n        "footer": "sc-9w1e9d-93"\n      };\n\n      for (var label in sections) {\n        if (parentClass === sections[label]) {\n          return label;\n        }\n      }\n    } catch (error) {\n      ga360.debugConsole("ga360.getDTCLabel: " + error);\n    }\n  },\n  pageViewCallback: function pageViewCallback() {\n    ga360.populateMetadata(window.digitalData);\n    gtag("config", "UA-52328914-7");\n  },\n  BDUcallback: function BDUcallback() {\n    ga360.populateMetadata(window.digitalData);\n    gtag("event", "subscribeBDU clicked", {\n      "event_category": "promotions",\n      "event_label": "hero"\n    });\n  },\n  DTCcallback: function DTCcallback(label) {\n    ga360.populateMetadata(window.digitalData);\n    gtag("event", "subscribeDTC clicked", {\n      "event_category": "promotions",\n      "event_label": label\n    });\n  },\n  setButtonListeners: function setButtonListeners() {\n    ga360.setDTCListeners(ga360.DTCcallback);\n    ga360.setBDUListeners(ga360.BDUcallback);\n  }\n};\nga360.setListeners();\n</script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL92fce0144f7540eab29520146200fcdb",name:"mParticle Google AdWords Kit",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,
source:"var mpAdWordsKit = (function (exports) {\n    /* eslint-disable no-undef*/\n\n    //\n    //  Copyright 2017 mParticle, Inc.\n    //\n    //  Licensed under the Apache License, Version 2.0 (the \"License\");\n    //  you may not use this file except in compliance with the License.\n    //  You may obtain a copy of the License at\n    //\n    //      http://www.apache.org/licenses/LICENSE-2.0\n    //\n    //  Unless required by applicable law or agreed to in writing, software\n    //  distributed under the License is distributed on an \"AS IS\" BASIS,\n    //  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    //  See the License for the specific language governing permissions and\n    //  limitations under the License.\n\n        var name = 'GoogleAdWords',\n            moduleId = 82,\n            MessageType = {\n                SessionStart: 1,\n                SessionEnd: 2,\n                PageView: 3,\n                PageEvent: 4,\n                CrashReport: 5,\n                OptOut: 6,\n                Commerce: 16\n            },\n            ENHANCED_CONVERSION_DATA = \"GoogleAds.ECData\";\n\n        var constructor = function () {\n            var self = this,\n                isInitialized = false,\n                forwarderSettings,\n                labels,\n                customAttributeMappings,\n                reportingService,\n                eventQueue = [],\n                gtagSiteId;\n\n            self.name = name;\n\n            function processEvent(event) {\n                var reportEvent = false;\n                var sendEventFunction = function() {};\n                var generateEventFunction = function () {};\n                var conversionLabel;\n                var eventPayload;\n\n                if (isInitialized) {\n                    // First, process anything in the queue\n                    processQueue(eventQueue);\n\n                    try {\n                        if (window.gtag && forwarderSettings.enableGtag == 'True') {\n                            if (event.CustomFlags && \n                                Object.keys(event.CustomFlags).length &&\n                                event.CustomFlags[ENHANCED_CONVERSION_DATA]\n                            ) {\n                                if (forwarderSettings.enableEnhancedConversions === 'True') {\n                                    setEnhancedConversionData(\n                                        event.CustomFlags[ENHANCED_CONVERSION_DATA]\n                                    );\n                                } else {\n                                    console.warn('You have a custom flag of enhanced conversions, but you have not enabled enhanced converisons');\n                                }\n                            }\n\n                            sendEventFunction = sendGtagEvent;\n                            generateEventFunction = generateGtagEvent;\n                            generateCommerceEvent = generateGtagCommerceEvent;\n\n                        } else if (window.google_trackConversion) {\n                            // window.google_trackConversion is a legacy API and will be deprecated\n                            sendEventFunction = sendAdwordsEvent;\n                            generateEventFunction = generateAdwordsEvent;\n                            generateCommerceEvent = generateAdwordsCommerceEvent;\n\n                        } else {\n                            eventQueue.push({\n                                action: processEvent,\n                                data: event\n                            });\n\n                            return 'Can\\'t send to forwarder ' + name + ', not initialized. Event added to queue.';\n                        }\n\n                        // Get conversionLabel to be used for event generation\n                        var conversionLabel = getConversionLabel(event);\n                        var customProps = getCustomProps(event);\n\n                        if (conversionLabel) {\n                            // Determines the proper event to fire\n                            if (event.EventDataType == MessageType.PageView || event.EventDataType == MessageType.PageEvent) {\n                                eventPayload = generateEventFunction(event, conversionLabel, customProps);\n                            } else if (event.EventDataType == MessageType.Commerce && event.ProductAction) {\n                                eventPayload = generateCommerceEvent(event, conversionLabel, customProps);\n                            }\n        \n                            if (eventPayload) {\n                               reportEvent = sendEventFunction(eventPayload);\n                            }\n        \n                            if (reportEvent && reportingService) {\n                                reportingService(self, event);\n        \n                                return 'Successfully sent to ' + name;\n                            }\n                        }\n\n                        return 'Can\\'t send to forwarder: ' + name + '. Event not mapped';\n                    }\n                    catch (e) {\n                        console.error('Can\\t send to forwarder', e);\n                        return 'Can\\'t send to forwarder: ' + name + ' ' + e;\n                    }\n                } else {\n                    eventQueue.push({\n                        action: processEvent,\n                        data: event\n                    });\n                }\n\n                return 'Can\\'t send to forwarder ' + name + ', not initialized. Event added to queue.';\n            }\n\n            function setEnhancedConversionData(enhancedConversionData) {\n                if (enhancedConversionData.email) {\n                    window.enhanced_conversion_data.email = enhancedConversionData.email;\n                }\n                if (enhancedConversionData.phone_number) {\n                    window.enhanced_conversion_data.phone_number = enhancedConversionData.phone_number;\n                }\n                if (enhancedConversionData.first_name) {\n                    window.enhanced_conversion_data.first_name = enhancedConversionData.first_name;\n                }\n                if (enhancedConversionData.last_name) {\n                    window.enhanced_conversion_data.last_name = enhancedConversionData.last_name;\n                }\n                if (enhancedConversionData.home_address) {\n                    window.enhanced_conversion_data.home_address =\n                        enhancedConversionData.home_address;\n                }\n            }\n\n            // Converts an mParticle Commerce Event into either Legacy or gtag Event\n            function generateCommerceEvent(mPEvent, conversionLabel, isPageEvent) {\n                if (mPEvent.ProductAction\n                    && mPEvent.ProductAction.ProductList\n                    && mPEvent.ProductAction.ProductActionType) {\n\n                    if (window.gtag && forwarderSettings.enableGtag == 'True') {\n                        return generateGtagCommerceEvent(mPEvent, conversionLabel, isPageEvent);\n                    } else if (window.google_trackConversion) {\n                        return generateAdwordsCommerceEvent(mPEvent, conversionLabel, isPageEvent);\n                    } else {\n                        console.error('Unrecognized Commerce Event', mPEvent);\n                        return false;\n                    }\n                        \n                } else {\n                    return false;\n                }\n            }\n\n\n            // ** Adwords Events\n            function getBaseAdWordEvent() {\n                var adWordEvent = {};\n                adWordEvent.google_conversion_value = 0;\n                adWordEvent.google_conversion_language = 'en';\n                adWordEvent.google_conversion_format = '3';\n                adWordEvent.google_conversion_color = 'ffffff';\n                adWordEvent.google_remarketing_only = forwarderSettings.remarketingOnly == 'True';\n                adWordEvent.google_conversion_id = forwarderSettings.conversionId;\n                return adWordEvent;\n            }\n\n            function generateAdwordsEvent(mPEvent, conversionLabel, customProps) {\n                var adWordEvent = getBaseAdWordEvent();\n                adWordEvent.google_conversion_label = conversionLabel;\n                adWordEvent.google_custom_params = customProps;\n\n                return adWordEvent;\n            }\n\n            function generateAdwordsCommerceEvent(mPEvent, conversionLabel, customProps) {\n                var adWordEvent = getBaseAdWordEvent();\n                adWordEvent.google_conversion_label = conversionLabel;\n\n                if (mPEvent.ProductAction.ProductActionType === mParticle.ProductActionType.Purchase\n                    && mPEvent.ProductAction.TransactionId) {\n                    adWordEvent.google_conversion_order_id = mPEvent.ProductAction.TransactionId;\n                }\n\n                if (mPEvent.CurrencyCode) {\n                    adWordEvent.google_conversion_currency = mPEvent.CurrencyCode;\n                }\n\n                if (mPEvent.ProductAction.TotalAmount) {\n                    adWordEvent.google_conversion_value = mPEvent.ProductAction.TotalAmount;\n                }\n\n                adWordEvent.google_custom_params = customProps;\n                return adWordEvent;\n            }\n\n            // gtag Events\n            function getBaseGtagEvent(conversionLabel) {\n                return {\n                    'send_to': gtagSiteId + '/' + conversionLabel,\n                    'value': 0,\n                    'language': 'en',\n                    'remarketing_only': forwarderSettings.remarketingOnly == 'True'\n                }\n            }\n\n            function generateGtagEvent(mPEvent, conversionLabel, customProps) {\n                if (!conversionLabel) { return null; }\n                var conversionPayload = getBaseGtagEvent(conversionLabel);\n                conversionPayload.transaction_id = mPEvent.SourceMessageId;\n                return mergeObjects(conversionPayload, customProps);\n            }\n\n            function generateGtagCommerceEvent(mPEvent, conversionLabel, customProps) {\n                if (!conversionLabel) { return null; }\n                var conversionPayload = getBaseGtagEvent(conversionLabel);\n\n                if (mPEvent.ProductAction.ProductActionType === mParticle.ProductActionType.Purchase\n                    && mPEvent.ProductAction.TransactionId) {\n                    conversionPayload.transaction_id = mPEvent.ProductAction.TransactionId;\n                } else {\n                    conversionPayload.transaction_id = mPEvent.SourceMessageId;\n                }\n\n                if (mPEvent.CurrencyCode) {\n                    conversionPayload.currency = mPEvent.CurrencyCode;\n                }\n\n                if (mPEvent.ProductAction.TotalAmount) {\n                    conversionPayload.value = mPEvent.ProductAction.TotalAmount;\n                }\n\n                return mergeObjects(conversionPayload, customProps);\n            }\n\n            function sendGtagEvent(payload) {\n                try {\n                    gtag('event', 'conversion', payload);\n                } catch (e) {\n                    console.error('gtag is not available to send payload: ', payload, e);\n                    return false;\n                }\n                return true;\n            }\n\n            function sendAdwordsEvent(payload) {\n                try {\n                    window.google_trackConversion(payload);\n                } catch (e) {\n                    console.error('google_trackConversion is not available to send payload: ', payload, e);\n                    return false;\n                }\n                return true;\n            }\n\n            // Looks up an Event's conversionLabel from customAttributeMappings based on computed jsHash value\n            function getConversionLabel(event) {\n                var jsHash = calculateJSHash(event.EventDataType, event.EventCategory, event.EventName);\n                var type = event.EventDataType === MessageType.PageEvent ? 'EventClass.Id' : 'EventClassDetails.Id';\n                var conversionLabel = null;\n                var mappingEntry = findValueInMapping(jsHash, type, labels);\n\n                if (mappingEntry) {\n                    conversionLabel = mappingEntry.value;\n                }\n\n                return conversionLabel;\n            }\n\n            // Filters Event.EventAttributes for attributes that are in customAttributeMappings\n            function getCustomProps(event) {\n                var customProps = {};\n                var attributes = event.EventAttributes;\n                var type = event.EventDataType === MessageType.PageEvent ? 'EventAttributeClass.Id' : 'EventAttributeClassDetails.Id';\n\n                if (attributes) {\n                    for (var attributeKey in attributes) {\n                        if (attributes.hasOwnProperty(attributeKey)) {\n                            var jsHash = calculateJSHash(event.EventDataType, event.EventCategory, attributeKey);\n                            var mappingEntry = findValueInMapping(jsHash, type, customAttributeMappings);\n                            if (mappingEntry) {\n                                customProps[mappingEntry.value] = attributes[attributeKey];\n                            }\n                        }\n                    }\n                }\n\n                return customProps;\n            }\n\n            function findValueInMapping(jsHash, type, mapping) {\n                if (mapping) {\n                    var filteredArray = mapping.filter(function (mappingEntry) {\n\n                        if (mappingEntry.jsmap && mappingEntry.maptype && mappingEntry.value) {\n                            return mappingEntry.jsmap == jsHash && mappingEntry.maptype == type;\n                        }\n\n                        return false;\n                    });\n\n                    if (filteredArray && filteredArray.length > 0) {\n                        return filteredArray[0];\n                    }\n                }\n                return null;\n            }\n\n            function calculateJSHash(eventDataType, eventCategory, name) {\n                var preHash = [eventDataType, eventCategory, name].join('');\n\n                return mParticle.generateHash(preHash);\n            }\n\n            function loadGtagSnippet() {\n                (function () {\n                    window.dataLayer = window.dataLayer || [];\n                    window.gtag = function(){dataLayer.push(arguments);};\n\n                    var gTagScript = document.createElement('script');\n                    gTagScript.async = true;\n                    gTagScript.onload = function () {\n                        gtag('js', new Date());\n                        if (forwarderSettings.enableEnhancedConversions === 'True') {\n                            gtag('config', gtagSiteId, {\n                                allow_enhanced_conversions: true\n                            });\n                        } else {\n                            gtag('config', gtagSiteId);\n                        }\n                        isInitialized = true;\n                        processQueue(eventQueue);\n                    };\n                    gTagScript.src = 'https://www.googletagmanager.com/gtag/js?id=' + gtagSiteId;\n                    document.getElementsByTagName('head')[0].appendChild(gTagScript);\n                })();\n            }\n\n            function loadLegacySnippet() {\n                (function () {\n                    var googleAdwords = document.createElement('script');\n                    googleAdwords.type = 'text/javascript';\n                    googleAdwords.async = true;\n                    googleAdwords.onload = function() {\n                        isInitialized = true;\n                        processQueue(eventQueue);\n                    };\n                    googleAdwords.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://www.googleadservices.com/pagead/conversion_async.js';\n                    document.getElementsByTagName('head')[0].appendChild(googleAdwords);\n                })();\n            }\n\n            function initForwarder(settings, service, testMode) {\n                window.enhanced_conversion_data = {};\n                forwarderSettings = settings;\n                reportingService = service;\n\n                try {\n                    if (!forwarderSettings.conversionId) {\n                        return 'Can\\'t initialize forwarder: ' + name + ', conversionId is not defined';\n                    }\n\n                    gtagSiteId = \"AW-\" + forwarderSettings.conversionId;\n\n                    if (testMode !== true) {\n                        if (forwarderSettings.enableGtag == 'True') {\n                            loadGtagSnippet();\n                        } else {\n                            loadLegacySnippet();\n                        }\n                    } else {\n                        isInitialized = true;\n                        processQueue(eventQueue);\n                    }\n\n                    if (!forwarderSettings.conversionId) {\n                        return 'Can\\'t initialize forwarder: ' + name + ', conversionId is not defined';\n                    }\n\n                    forwarderSettings.remarketingOnly = forwarderSettings.remarketingOnly == 'True';\n\n                    try {\n                        if (forwarderSettings.labels) {\n                            labels = JSON.parse(forwarderSettings.labels.replace(/&quot;/g, '\"'));\n                        }\n\n                        if (forwarderSettings.customParameters) {\n                            customAttributeMappings = JSON.parse(forwarderSettings.customParameters.replace(/&quot;/g, '\"'));\n                        }\n                    } catch (e) {\n                        return 'Can\\'t initialize forwarder: ' + name + ', Could not process event to label mapping';\n                    }\n\n                    return 'Successfully initialized: ' + name;\n                }\n                catch (e) {\n                    return 'Failed to initialize: ' + name;\n                }\n            }\n\n            function processQueue(queue) {\n                var item;\n                \n                if ((window.gtag || window.google_trackConversion) && queue.length > 0) {\n                    try {\n                        while (queue.length > 0) {\n                            item = queue.shift();\n                            item.action(item.data);\n                        }\n                    } catch (e) {\n                        console.error('Error on mParticle Adwords Kit', e);\n                    }\n                }\n            }\n\n            this.init = initForwarder;\n            this.process = processEvent;\n            this.processQueue = processQueue;\n        };\n\n        function getId() {\n            return moduleId;\n        }\n\n        function register(config) {\n            if (!config) {\n                console.log('You must pass a config object to register the kit ' + name);\n                return;\n            }\n\n            if (!isObject(config)) {\n                console.log('\\'config\\' must be an object. You passed in a ' + typeof config);\n                return;\n            }\n\n            if (isObject(config.kits)) {\n                config.kits[name] = {\n                    constructor: constructor\n                };\n            } else {\n                config.kits = {};\n                config.kits[name] = {\n                    constructor: constructor\n                };\n            }\n            console.log('Successfully registered ' + name + ' to your mParticle configuration');\n        }\n\n        function isObject(val) {\n            return val != null && typeof val === 'object' && Array.isArray(val) === false;\n        }\n\n        function mergeObjects() {\n            var resObj = {};\n            for(var i=0; i < arguments.length; i += 1) {\n                 var obj = arguments[i],\n                     keys = Object.keys(obj);\n                 for(var j=0; j < keys.length; j += 1) {\n                     resObj[keys[j]] = obj[keys[j]];\n                 }\n            }\n            return resObj;\n        }\n\n        if (typeof window !== 'undefined') {\n            if (window && window.mParticle && window.mParticle.addForwarder) {\n                window.mParticle.addForwarder({\n                    name: name,\n                    constructor: constructor,\n                    getId: getId\n                });\n            }\n        }\n\n        var GoogleAdWordsEventForwarder = {\n            register: register\n        };\n\n    exports.default = GoogleAdWordsEventForwarder;\n\n    return exports;\n\n}({}));",language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL93045835d3f84b379c2345710f215577",name:"OneTrust/Crave/ScriptRef",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:43}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["9c9media.ca","crave.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="c5546ae6-3625-44b8-bac5-e2035b185fa4-test" ></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL9933de1896434be79f8a10d8f5c09140",name:"Braze/CTV",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:49}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"qa.ctv.ca"}]},timeout:2e3},{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["ctv.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<script>\n  initializeBrazeForCTV = () => {    \n    let KEYS = {\n      dev: '65b1a6f3-4603-4605-972f-289d6d8359ac',\n      prod: '08103f8d-d7ca-4587-ab52-51c2f9fdbb64'\n    }\n\n    let envKey = (window._satellite.environment.stage !== \"production\" ? KEYS.dev : KEYS.prod)\n\n    \n    appboy.initialize(envKey, {\n        baseUrl: \"sdk.iad-03.braze.com\",\n        enableLogging: location.host.includes('qa.ctv.ca')\n    });\n\n    appboy.openSession();\n    \n  }\n  \n  //initializeBrazeForCTV()\n</script>\n",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLa1105a205fde4349b3d5a17ba4ead7f7",name:"OneTrustTCF/Manager",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:46}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["9c9media.ca","ctv.ca","crave.ca","noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script>\n    class TCFManager {\n        configuration() {\n            let _environment = _satellite.environment.stage\n            return {\n                "regions": {\n                    "gdpr": [\n                        "AT",\n                        "BE",\n                        "BG",\n                        "CY",\n                        "DE",\n                        "DK",\n                        "EE",\n                        "ES",\n                        "FI",\n                        "FR",\n                        "GB",\n                        "GR",\n                        "HR",\n                        "HU",\n                        "IE",\n                        "IS",\n                        "IT",\n                        "LI",\n                        "LT",\n                        "LU",\n                        "LV",\n                        "MT",\n                        "NL",\n                        "NO",\n                        "PL",\n                        "PT",\n                        "RO",\n                        "SE",\n                        "SI",\n                        "SK"\n                    ],\n                    "ccpa": {\n                        "country": "US",\n                        "state": "CA"\n                    }\n                },\n                "permutive": {\n                    "url": "https://cdn.permutive.com",\n                    "guid": "289d106c-df24-4cd9-a9fa-753e928c23ad",\n                },\n                "token": {\n                    "title": "consent_granted"\n                },\n                "logging": (_environment !== "staging")\n            }\n        }\n\n        log(message) {\n            this.configuration().logging && console.info(`[BMAE]: -> ${message}...`)\n        }\n\n        createDMP() {\n            const tag = {\n                reference: document.createElement(\'script\'),\n                source: `${this.configuration().permutive.url}/${this.configuration().permutive.guid}-web.js`,\n                asyncMode: true\n            }\n            const DOM = {\n                head: document.getElementsByTagName(\'head\')[0],\n                initialScriptTag: document.getElementsByTagName(\'script\') [0]\n            }\n\n            tag.reference.src   = tag.source\n            tag.reference.async = tag.asyncMode;\n\n            this.log("Permutive script reference inserted")\n            DOM.head.insertAdjacentElement(\'beforeend\', tag.reference)\n        }\n      \n        \n\n        isRegulated(obj) {\n            const GDPR           = this.configuration().regions.gdpr\n            const CCPA           = this.configuration().regions.ccpa\n            const currentCountry = obj.getGeolocationData().country\n            const currentState   = obj.getGeolocationData().state\n\n            if (GDPR.includes(currentCountry)) return true\n            if (CCPA.country === currentCountry) {\n                if (CCPA.state === currentState) return true\n            }\n\n            return false\n        }\n\n        cookieMap(obj, splitter = "; ") {\n            return Object.fromEntries(obj.split(splitter).map(c => {\n                const [key, ...v] = c.split(\'=\');\n                return [key, v.join(\'=\')];\n            }));\n        }\n\n        getCookie(name) {\n            const cookies = document.cookie.split(\';\')\n                .reduce((acc, cookieString) => {\n                    const [key, value] = cookieString.split(\'=\').map(s => s.trim());\n                    if (key && value) {\n                        acc[key] = decodeURIComponent(value);\n                    }\n                    return acc;\n                }, {});\n            return name ? cookies[name] || \'\' : cookies;\n        }\n\n        createCookie(name, value) {\n            document.cookie = `${name}=${value};expires=Sun, 1 Dec 2099 23:59:59 GMT`\n        }\n    }\n</script>\n',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLa3d32a29998f40979eff1da69ca38ef0",name:"Crave TikTok Library",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:49}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["crave.ca","bellmedia.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script>\n    ! function(w, d, t) {\n        w.TiktokAnalyticsObject = t;\n        var ttq = w[t] = w[t] || [];\n        ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"], ttq.setAndDefer = function(t, e) {\n            t[e] = function() {\n                t.push([e].concat(Array.prototype.slice.call(arguments, 0)))\n            }\n        };\n        for (var i = 0; i < ttq.methods.length; i++) ttq.setAndDefer(ttq, ttq.methods[i]);\n        ttq.instance = function(t) {\n            for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++) ttq.setAndDefer(e, ttq.methods[n]);\n            return e\n        }, ttq.load = function(e, n) {\n            var i = "https://analytics.tiktok.com/i18n/pixel/events.js";\n            ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = i, ttq._t = ttq._t || {}, ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {};\n            var o = document.createElement("script");\n            o.type = "text/javascript", o.async = !0, o.src = i + "?sdkid=" + e + "&lib=" + t;\n            var a = document.getElementsByTagName("script")[0];\n            a.parentNode.insertBefore(o, a)\n        };\n\n        ttq.load(\'CH7CTJ3C77U3G72V3460\');\n        ttq.page();\n    }(window, document, \'ttq\');\n</script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLa74a0f43ae4c45e1a74b545d726cd7e6",name:"RDS Marketing Tags",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"account.bellmedia.ca$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{
source:"<!-- Bing Universal Tag -->\n<script>\n    (function(w, d, t, r, u) {\n        var f, n, i;\n        w[u] = w[u] || [], f = function() {\n            var o = {\n                ti: \"20257082\"\n            };\n            o.q = w[u], w[u] = new UET(o)\n        }, n = d.createElement(t), n.src = r, n.async = 1, n.onload = n.onreadystatechange = function() {\n            var s = this.readyState;\n            s && s !== \"loaded\" && s !== \"complete\" || (f(), n.onload = n.onreadystatechange = null)\n        }, i = d.getElementsByTagName(t)[0], i.parentNode.insertBefore(n, i)\n    })(window, document, \"script\", \"//bat.bing.com/bat.js\", \"uetq\");\n</script>\n<!-- End Bing Universal Tag -->\n<!-- Global site tag (gtag.js) - Google Ads: 867221177 -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=AW-867221177\"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n\n    gtag('config', 'AW-867221177', {\n        'send_page_view': false\n    });\n</script>\n<!-- \nStart of global snippet: Please do not remove\nPlace this snippet between the <head> and </head> tags on every page of your site.\n-->\n<!-- Global site tag (gtag.js) - Google Marketing Platform -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=DC-9488296\"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n\n    gtag('config', 'DC-9488296', {\n        'send_page_view': false\n    });\n</script>\n<!-- End of global snippet: Please do not remove -->\n<!-- Twitter universal website tag code -->\n<script>\n    ! function(e, t, n, s, u, a) {\n        e.twq || (s = e.twq = function() {\n                s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);\n            }, s.version = '1.1', s.queue = [], u = t.createElement(n), u.async = !0, u.src = '//static.ads-twitter.com/uwt.js',\n            a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))\n    }(window, document, 'script');\n    // Insert Twitter Pixel ID and Standard Event data below\n    twq('init', 'nzl60');\n</script>\n<!-- End Twitter universal website tag code -->\n<script>\nvar rdsListener = {\n  debugConsole: function debugConsole(message) {\n    if (window._satellite && window._satellite.environment && window._satellite.environment.stage !== \"production\") {\n      console.log(message);\n    }\n  },\n  setListeners: function setListeners(pageURL) {\n    document.addEventListener(\"digitalDataLoaded\", function () {\n      rdsListener.pageViewCallback(pageURL);\n    });\n    document.addEventListener(\"accountHashChange\", function () {\n      rdsListener.pageViewCallback(pageURL);\n    });\n    document.addEventListener(\"purchaseSuccess\", function (event) {\n      rdsListener.completePurchaseCallback(pageURL, event);\n    });\n    document.addEventListener(\"registrationSuccess\", function () {\n      rdsListener.registrationSuccessCallback(pageURL);\n    });\n  },\n  checkPage: function checkPage(pageURL) {\n    var status = false;\n\n    if (typeof pageURL !== \"string\") {\n      pageURL = String(window.document.URL).split(\"?\")[0];\n    }\n\n    var whiteList = [\"/login\\/?$\", \"/register\\/?$\", \"/subscribe\\/?\\#?\\/?$\", \"/subscribe/success\\/?$\", \"/account/subscriptions/rds\\/?$\"];\n\n    if (rdsListener.checkBrand(window.digitalData)) {\n      whiteList.forEach(function (listItem) {\n        var regexTest = new RegExp(listItem);\n\n        if (regexTest.test(pageURL)) {\n          status = true;\n        }\n      });\n    }\n\n    return status;\n  },\n  checkBrand: function checkBrand(metadata) {\n    if (metadata && metadata.page && metadata.page.siteBrand === \"rds\") {\n      return true;\n    }\n\n    return false;\n  },\n  pageViewCallback: function pageViewCallback(pageURL) {\n    if (rdsListener.checkPage(pageURL)) {\n      try {\n        fbq(\"track\", \"PageView\");\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n\n      try {\n        twq(\"track\", \"PageView\");\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n\n      try {\n        gtag(\"event\", \"page_view\", {\n          send_to: \"DC-9488296\"\n        });\n        gtag(\"event\", \"page_view\", {\n          send_to: \"AW-867221177\"\n        });\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n\n      try {\n        window.uetq.push('event', 'page_view', {\n          'page_path': document.location.pathname\n        });\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n    }\n  },\n  completePurchaseCallback: function completePurchaseCallback(pageURL, event) {\n    if (rdsListener.checkPage(pageURL)) {\n      var transactionID;\n      var total;\n\n      if (event && event.detail) {\n        if (event.detail.transactionID) {\n          transactionID = String(event.detail.transactionID);\n        }\n\n        if (event.detail.total) {\n          total = String(event.detail.total);\n        }\n      }\n\n      try {\n        gtag('event', 'purchase', {\n          'allow_custom_scripts': true,\n          'value': total,\n          'transaction_id': transactionID,\n          'send_to': 'DC-9488296/sales/rds-p0+transactions'\n        });\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n\n      try {\n        gtag('event', 'conversion', {\n          'send_to': 'AW-867221177/CVhKCJWQj-MBELn9wp0D',\n          'value': total,\n          'currency': 'CAD',\n          'transaction_id': transactionID\n        });\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n\n      try {\n        fbq('track', 'Purchase', {\n          value: total,\n          currency: 'CAD',\n          contents: [{\n            id: '301',\n            quantity: 1\n          }, {\n            id: '401',\n            quantity: 2\n          }],\n          content_type: 'product'\n        });\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n    }\n  },\n  registrationSuccessCallback: function registrationSuccessCallback(pageURL) {\n    if (rdsListener.checkPage(pageURL)) {\n      try {\n        gtag('event', 'conversion', {\n          'send_to': 'AW-867221177/M9xmCPn2_eIBELn9wp0D'\n        });\n        gtag('event', 'conversion', {\n          'allow_custom_scripts': true,\n          'send_to': 'DC-9488296/invmedia/enreg0+standard'\n        });\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n\n      try {\n        fbq('track', 'Lead');\n      } catch (error) {\n        rdsListener.debugConsole(error);\n      }\n    }\n  }\n};\nrdsListener.setListeners();\n</script>",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLb5889fe581b64feabf9cef582de9b8a4",name:"Crave TikTok Page View",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["crave.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:'var tiktokListener = {\n  setListeners: function setListeners() {\n    document.addEventListener("digitalDataLoaded", function () {\n      try {\n        ttq.page();\n        ttq.track("ViewContent");\n      } catch (error) {\n        try {\n          window._dataManager.console("tiktokListener: " + error);\n        } catch (error) {\n          console.log("tiktokListener: _dataManager.console error " + error);\n        }\n      }\n    });\n  }\n};\n\ntiktokListener.setListeners();',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLb95b0834675d4f7ebd375ba6a8e6b057",name:"Trigger Page Load for Testing Pages",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/653e7ca2fc48/28cf2c8d1fb5/47e0dfc6a5dc/RC16027f5b213449ada3a7e1b26ed1741c-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLbd71fe7527eb47ef91bf972fd778fac0",name:"Braze/SDK",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:40}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script type="text/javascript">\n  +function(a,p,P,b,y){a.braze={};a.brazeQueue=[];for(var s="BrazeSdkMetadata DeviceProperties Card Card.prototype.dismissCard Card.prototype.removeAllSubscriptions Card.prototype.removeSubscription Card.prototype.subscribeToClickedEvent Card.prototype.subscribeToDismissedEvent Card.fromContentCardsJson ImageOnly CaptionedImage ClassicCard ControlCard ContentCards ContentCards.prototype.getUnviewedCardCount Feed Feed.prototype.getUnreadCardCount ControlMessage InAppMessage InAppMessage.SlideFrom InAppMessage.ClickAction InAppMessage.DismissType InAppMessage.OpenTarget InAppMessage.ImageStyle InAppMessage.Orientation InAppMessage.TextAlignment InAppMessage.CropType InAppMessage.prototype.closeMessage InAppMessage.prototype.removeAllSubscriptions InAppMessage.prototype.removeSubscription InAppMessage.prototype.subscribeToClickedEvent InAppMessage.prototype.subscribeToDismissedEvent InAppMessage.fromJson FullScreenMessage ModalMessage HtmlMessage SlideUpMessage User User.Genders User.NotificationSubscriptionTypes User.prototype.addAlias User.prototype.addToCustomAttributeArray User.prototype.addToSubscriptionGroup User.prototype.getUserId User.prototype.getUserId User.prototype.incrementCustomUserAttribute User.prototype.removeFromCustomAttributeArray User.prototype.removeFromSubscriptionGroup User.prototype.setCountry User.prototype.setCustomLocationAttribute User.prototype.setCustomUserAttribute User.prototype.setDateOfBirth User.prototype.setEmail User.prototype.setEmailNotificationSubscriptionType User.prototype.setFirstName User.prototype.setGender User.prototype.setHomeCity User.prototype.setLanguage User.prototype.setLastKnownLocation User.prototype.setLastName User.prototype.setPhoneNumber User.prototype.setPushNotificationSubscriptionType InAppMessageButton InAppMessageButton.prototype.removeAllSubscriptions InAppMessageButton.prototype.removeSubscription InAppMessageButton.prototype.subscribeToClickedEvent FeatureFlag FeatureFlag.prototype.getStringProperty FeatureFlag.prototype.getNumberProperty FeatureFlag.prototype.getBooleanProperty automaticallyShowInAppMessages destroyFeed hideContentCards showContentCards showFeed showInAppMessage deferInAppMessage toggleContentCards toggleFeed changeUser destroy getDeviceId getDeviceId initialize isPushBlocked isPushPermissionGranted isPushSupported logCardClick logCardDismissal logCardImpressions logContentCardImpressions logContentCardClick logCustomEvent logFeedDisplayed logInAppMessageButtonClick logInAppMessageClick logInAppMessageHtmlClick logInAppMessageImpression logPurchase openSession requestPushPermission removeAllSubscriptions removeSubscription requestContentCardsRefresh requestFeedRefresh refreshFeatureFlags requestImmediateDataFlush enableSDK isDisabled setLogger setSdkAuthenticationSignature addSdkMetadata disableSDK subscribeToContentCardsUpdates subscribeToFeedUpdates subscribeToInAppMessage subscribeToSdkAuthenticationFailures toggleLogging unregisterPush wipeData handleBrazeAction subscribeToFeatureFlagsUpdates getAllFeatureFlags logFeatureFlagImpression".split(" "),i=0;i<s.length;i++){for(var m=s[i],k=a.braze,l=m.split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=(new Function("return function "+m.replace(/\\./g,"_")+"(){window.brazeQueue.push(arguments); return true}"))()}window.braze.getDeferredInAppMessage=function(){return new window.braze.InAppMessage};window.braze.getCachedContentCards=function(){return new window.braze.ContentCards};window.braze.getCachedFeed=function(){return new window.braze.Feed};window.braze.getUser=function(){return new window.braze.User};window.braze.getFeatureFlag=function(){return new window.braze.FeatureFlag};(y=p.createElement(P)).type=\'text/javascript\';\n    y.src=\'https://js.appboycdn.com/web-sdk/5.2/braze.min.js\';\n    y.async=1;(b=p.getElementsByTagName(P)[0]).parentNode.insertBefore(y,b)\n  }(window,document,\'script\');\n</script>\n\n\n',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLc5f72eefaacc4cb6b3fc7787c7856a75",name:"OneTrust/CTV/ScriptRef",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:43}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["ctv.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="c9f16745-fe08-4355-974a-22861f63119b-test" ></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLc65528518ce5488190d5d28be1307753",name:"Braze/Crave ",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:49}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"bond.local",valueIsRegex:!1},{value:"craveqa.entpay.9c9media.ca"},{value:"cravedev1.entpay.9c9media.ca"},{value:"cravestg.entpay.9c9media.ca"},{value:"cravepreprod.entpay.9c9media.ca"},{value:"bondqa.entpay.9c9media.ca"},{value:"bonddev1.entpay.9c9media.ca"},{value:"bondstg.entpay.9c9media.ca"},{value:"bondpreprod.entpay.9c9media.ca"}]},timeout:2e3},{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["crave.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<script>\n  const initializeBrazeForCrave = () => {\n    let KEYS = {\n      dev: '7a226577-78b5-4034-a91a-1922cefe1237',\n      prod: 'a876415d-2975-472f-8b5f-a809357e058f'\n    }\n\n    let envKey = (window._satellite.buildInfo.environment !== \"production\" ? KEYS.dev : KEYS.prod)\n\n    \n    appboy.initialize(envKey, {\n        baseUrl: \"sdk.iad-03.appboy.com\",\n        enableLogging: location.host.includes('entpay')\n    });\n\n    appboy.openSession();\n    \n  }\n  \n  //initializeBrazeForCrave();  \n</script>\n",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLca035c6cb0b74829a067107f053535b0",name:"Amazon Click Subscribe Pixels",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"\\/subscribe(\\/)?$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"https://assets.adobedtm.com/653e7ca2fc48/28cf2c8d1fb5/47e0dfc6a5dc/RC46b96527601443499af04d247d6f9416-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLda5f2e5bd04a4019866315d68050a703",name:"GroupM Marketing Tags - All Pages",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:51}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"^((\\/)?vidi\\-chromecast).*$",valueIsRegex:!0},{value:"^((\\/)?login(?![a-z])).*$",valueIsRegex:!0}]},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["crave.ca","9c9media.com"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!-- \nStart of global snippet: Please do not remove\nPlace this snippet between the <head> and </head> tags on every page of your site.\n-->\n<!-- Global site tag (gtag.js) - Google Marketing Platform -->\n<script async src="https://www.googletagmanager.com/gtag/js?id=DC-6169686"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n        dataLayer.push(arguments);\n    }\n    gtag("js", new Date());\n\n    gtag("config", "DC-6169686");\n    gtag("config", "AW-948316229");\n</script>\n<!-- End of global snippet: Please do not remove -->\n\n<!-- Facebook Pixel Code -->\n<script>\n    ! function(f, b, e, v, n, t, s) {\n        if (f.fbq) return;\n        n = f.fbq = function() {\n            n.callMethod ?\n                n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n        };\n        if (!f._fbq) f._fbq = n;\n        n.push = n;\n        n.loaded = !0;\n        n.version = "2.0";\n        n.queue = [];\n        t = b.createElement(e);\n        t.async = !0;\n        t.src = v;\n        s = b.getElementsByTagName(e)[0];\n        s.parentNode.insertBefore(t, s)\n    }(window,\n        document, "script", "//connect.facebook.net/en_US/fbevents.js");\n\n    fbq("init", "185969465077460");\n    fbq("track", "PageView");\n</script>\n<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=185969465077460&ev=PageView&noscript=1" /></noscript>\n<!-- End Facebook Pixel Code -->\n\n<script src="//platform.twitter.com/oct.js" type="text/javascript"></script>\n<script type="text/javascript">\n    twttr.conversion.trackPid("nu6e9", {\n        tw_sale_amount: 0,\n        tw_order_quantity: 0\n    });\n</script>\n<noscript>\n    <img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=nu6e9&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />\n    <img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=nu6e9&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />\n</noscript>\n<!-- Twitter universal website tag code -->\n<script>\n    ! function(e, t, n, s, u, a) {\n        e.twq || (s = e.twq = function() {\n                s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);\n            }, s.version = \'1.1\', s.queue = [], u = t.createElement(n), u.async = !0, u.src = \'//static.ads-twitter.com/uwt.js\',\n            a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))\n    }(window, document, \'script\');\n    // Insert Twitter Pixel ID and Standard Event data below\n    twq(\'init\', \'o2noe\');\n    twq(\'track\', \'PageView\');\n</script>\n<!-- End Twitter universal website tag code -->',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLef653c74bdc84c499da4230cf7c1005b",name:"CSS - Header Login Click",events:[{modulePath:"core/src/lib/events/mousedown.js",settings:{elementSelector:"div.user-login a",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/653e7ca2fc48/28cf2c8d1fb5/47e0dfc6a5dc/RCf22bc1e93cf94287a6a40be64d11b6f9-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLf723bb1e0a374092b9dbdf4153a16260",name:"OneTrust/Banner/Styles",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<style>\n  #onetrust-pc-sdk .ot-pc-footer-logo {\n    display:none;\n  }\n</style>",language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLfeaa199bd61f4188b93f34a39defbf3d",name:"OneTrust/Permutive",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/domain.js",settings:{domains:["9c9media.ca","crave.ca","ctv.ca","noovo.ca"]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script>  !function(n,e,o,r,i){if(!e){e=e||{},window.permutive=e,e.q=[],e.config=i||{},e.config.projectId=o,e.config.apiKey=r,e.config.environment=e.config.environment||"production";for(var t=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],c=0;c<t.length;c++){var f=t[c];e[f]=function(n){return function(){var o=Array.prototype.slice.call(arguments,0);e.q.push({functionName:n,arguments:o})}}(f)}}}(document,window.permutive,"289d106c-df24-4cd9-a9fa-753e928c23ad","b1a4360a-3db9-4b39-b09d-c3e14666840a",{}); \nwindow.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){if(0===window.googletag.pubads().getTargeting("permutive").length){var g=window.localStorage.getItem("_pdfps");window.googletag.pubads().setTargeting("permutive",g?JSON.parse(g):[])}}); \n \nvar permutiveLoader = {\n  "setListeners": function setListeners() {\n    document.addEventListener("pageViewFired", permutiveLoader.pageView);\n  },\n  "pageView": function pageView() {\n    if (window.digitalData) {\n      permutive.addon("web", {\n        "page": {\n          "user_info": {\n            "authBDU": digitalData.user.authBDU,\n            "authStatus": digitalData.user.authStatus,\n            "userId": digitalData.user.userId,\n            "profileType": digitalData.user.profileType,\n            "subscriptionType": digitalData.user.subscriptionType,\n            "profileLanguage": digitalData.user.profileLanguage,\n            "playbackLanguage": digitalData.user.playbackLanguage\n          },\n          "product_info": {\n            "platform": digitalData.page.platform,\n            "productName": digitalData.page.siteName,\n            "environment": _satellite.environment.stage\n          },\n          "page_info": {\n            "type": digitalData.page.type,\n            "siteSection": digitalData.page.siteSection,\n            "subsection1": digitalData.page.subsection1,\n            "subsection2": digitalData.page.subsection2,\n            "subsection3": digitalData.page.subsection3,\n            "subsection4": digitalData.page.subsection4,\n            "name": digitalData.page.name\n          }\n        }\n      });\n    } else {\n      permutive.addon("web", {});\n    }\n  }\n};\npermutiveLoader.setListeners();\n</script>\n<script async src="https://cdn.permutive.com/289d106c-df24-4cd9-a9fa-753e928c23ad-web.js"></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLffa4f20559ff41919ddeffc72fa7171b",name:"Reddit Tracking Pixel",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/path.js",settings:{paths:[{value:"\\/subscribe(\\/)?$",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"<!-- Reddit Conversion Pixel -->\n\n<script>\n\n!function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement(\"script\");t.src=\"https://www.redditstatic.com/ads/pixel.js\",t.async=!0;var s=d.getElementsByTagName(\"script\")[0];s.parentNode.insertBefore(t,s)}}(window,document);rdt('init','t2_39sau17c');rdt('track', 'PageVisit');\n\n</script>\n\n<!-- DO NOT MODIFY -->\n\n<!-- End Reddit Conversion Pixel -->",language:"html"},timeout:2e3,delayNext:!0}]}]};var _satellite=function(){"use strict";function e(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}function n(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})})),t}function a(e){var t={exports:{}};return e(t,t.exports),t.exports}function r(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}function i(e){return Boolean(e&&void 0!==e.length)}function o(){}function s(e,t){return function(){e.apply(t,arguments)}}function c(e){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,c._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var a;try{a=n(e._value)}catch(e){return void d(t.promise,e)}u(t.promise,a)}else(1===e._state?u:d)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof c)return e._state=3,e._value=t,void g(e);if("function"==typeof n)return void f(s(n,t),e)}e._state=1,e._value=t,g(e)}catch(t){d(e,t)}}function d(e,t){e._state=2,e._value=t,g(e)}function g(e){2===e._state&&0===e._deferreds.length&&c._immediateFn((function(){e._handled||c._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,d(t,e))}))}catch(e){if(n)return;n=!0,d(t,e)}}function m(e){return!0===qe(e)&&"[object Object]"===Object.prototype.toString.call(e)}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function b(e){return e.substr(0,e.indexOf("["))}function y(e,t,n){if(e.length&&Be(t)){var a=e[0];if(1!==e.length){var r=e.slice(1);if(!h(a))return y(r,t[a],n);var i=t[a=b(a)];Array.isArray(i)&&i.forEach((function(e){return y(r,e,n)}))}else t.hasOwnProperty(a)&&"string"==typeof t[a]&&(t[a]=n(t[a]))}}if(window.atob){var w=document,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,E=t()?Object.assign:function(t){for(var n,a,r=e(t),i=1;i<arguments.length;i++){for(var o in n=Object(arguments[i]))P.call(n,o)&&(r[o]=n[o]);if(L){a=L(n);for(var s=0;s<a.length;s++)C.call(n,a[s])&&(r[a[s]]=n[a[s]])}}return r},D=E,_=window,k=function(e,t,n,a){var r,i=Boolean(t&&Array.isArray(n)),o=Boolean(i&&e),s=document.createElement("a");if(i){var c=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||c(),/^\/\/.+/.test(e)?s.href=_.location.protocol+e:s.href=e),s.hostname||c(),-1===n.indexOf(s.hostname)){var l=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw l.code="dynamic_host_not_allowed",l}}var u=function(){if(null!=r)return r;if(o){var e=s.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),r=s.protocol+"//"+e}else r="";return r},d=function(e){return o&&"string"==typeof e?[u(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},g={getTurbineHost:u,decorateWithDynamicHost:d,get isDynamicEnforced(){return i}};return _&&a.onDebugChanged((function(e){e?_.dynamicHostResolver=g:delete _.dynamicHostResolver})),g},T=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(n){t.push({rule:e,event:n})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},x="debug",j=function(e,t){var n=function(){return"true"===e.getItem(x)},a=function(t){e.setItem(x,t)},r=[],i=function(e){r.push(e)};return t.outputEnabled=n(),{onDebugChanged:i,getDebugEnabled:n,setDebugEnabled:function(e){n()!==e&&(a(e),t.outputEnabled=e,r.forEach((function(t){t(e)})))}}},S="Module did not export a function.",A=function(e,t,n){return function(a,r,i){i=i||[];var o=e.getModuleExports(a.modulePath);if("function"!=typeof o)throw new Error(S);var s=e.getModuleDefinition(a.modulePath),c=a.settings||{};!a.hasTransformedFilePaths&&s.filePaths&&(n(c,s.filePaths,a.modulePath),a.hasTransformedFilePaths=!0);var l=t(c,r);return o.bind(null,l).apply(null,i)}},R=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},N={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},I="\ud83d\ude80",U=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":I,O=!1,M=function(e){if(O&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(U),e!==N.DEBUG||window.console[e]||(e=N.INFO),window.console[e].apply(window.console,t)}},V=M.bind(null,N.LOG),q=M.bind(null,N.INFO),B=M.bind(null,N.DEBUG),F=M.bind(null,N.WARN),$=M.bind(null,N.ERROR),W=function(){var e=O;O=!0,M.apply(null,Array.prototype.concat(N.WARN,Array.prototype.slice.call(arguments))),e||(O=!1)},G={log:V,info:q,debug:B,warn:F,error:$,deprecation:W,get outputEnabled(){return O},set outputEnabled(e){O=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:V.bind(null,t),info:q.bind(null,t),debug:B.bind(null,t),warn:F.bind(null,t),error:$.bind(null,t)}}},z="com.adobe.reactor.",H=function(e,t){var n=z+(t||"");return{getItem:function(t){try{return _[e].getItem(n+t)}catch(e){return null}},setItem:function(t,a){try{return _[e].setItem(n+t,a),!0}catch(e){return!1}}}},K="dataElements.",Q=H("sessionStorage",K),J=H("localStorage",K),Y={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},Z={},X=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},ee={setValue:function(e,t,n){var a;switch(t){case Y.PAGEVIEW:return void(Z[e]=n);case Y.SESSION:return void((a=X(n))&&Q.setItem(e,a));case Y.VISITOR:return void((a=X(n))&&J.setItem(e,a))}},getValue:function(e,t){var n;switch(t){case Y.PAGEVIEW:return Z.hasOwnProperty(e)?Z[e]:null;case Y.SESSION:return null===(n=Q.getItem(e))?n:JSON.parse(n);case Y.VISITOR:return null===(n=J.getItem(e))?n:JSON.parse(n)}}},te=function(e,t,n,a){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+n+(a?"\n"+a:"")},ne=function(e,t,n,a,r){return function(i,o){var s=t(i);if(!s)return a?"":void 0;var c,l,u=s.storageDuration;try{c=e.getModuleExports(s.modulePath),l=e.getModuleDefinition(s.modulePath)}catch(e){return void G.error(te(s,i,e.message,e.stack))}if("function"==typeof c){var d,g=s.settings||{};!s.hasTransformedFilePaths&&l.filePaths&&(r(g,l.filePaths,s.modulePath),s.hasTransformedFilePaths=!0);try{d=c(n(g,o),o)}catch(e){return void G.error(te(s,i,e.message,e.stack))}return u&&(null!=d?ee.setValue(i,u,d):d=ee.getValue(i,u)),null==d&&null!=s.defaultValue&&(d=s.defaultValue),"string"==typeof d&&(s.cleanText&&(d=R(d)),s.forceLowerCase&&(d=d.toLowerCase())),d}G.error(te(s,i,"Module did not export a function."))}},ae={text:function(e){return e.textContent},cleanText:function(e){return R(e.textContent)}},re=function(e,t,n){for(var a,r=e,i=0,o=t.length;i<o;i++){if(null==r)return;var s=t[i];if(n&&"@"===s.charAt(0)){var c=s.slice(1);r=ae[c](r)}else if(r.getAttribute&&(a=s.match(/^getAttribute\((.+)\)$/))){var l=a[1];r=r.getAttribute(l)}else r=r[s]}return r},ie=function(e,t,n){return function(a,r){var i;if(t(a))i=n(a,r);else{var o=a.split("."),s=o.shift();"this"===s?r&&(i=re(r.element,o,!0)):"event"===s?r&&(i=re(r,o)):"target"===s?r&&(i=re(r.target,o)):i=re(e[s],o)}return i}},oe=function(e,t){return function(n){var a=n.split(".")[0];return Boolean(t(n)||"this"===a||"event"===a||"target"===a||e.hasOwnProperty(a))}},se=function(e,t,n){var a={exports:{}};return e.call(a.exports,a,a.exports,t,n),a.exports},ce=function(){var e={},t=function(t){var n=e[t];if(!n)throw new Error("Module "+t+" not found.");return n},n=function(){Object.keys(e).forEach((function(e){try{a(e)}catch(n){var t="Error initializing module "+e+". "+n.message+(n.stack?"\n"+n.stack:"");G.error(t)}}))},a=function(e){var n=t(e);return n.hasOwnProperty("exports")||(n.exports=se(n.definition.script,n.require,n.turbine)),n.exports};return{registerModule:function(t,n,a,r,i){var o={definition:n,extensionName:a,require:r,turbine:i};o.require=r,e[t]=o},hydrateCache:n,getModuleExports:a,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},le=!1,ue=function(e){return function(t,n){var a=e._monitors;a&&(le||(G.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),le=!0),a.forEach((function(e){
e[t]&&e[t](n)})))}},de=function(e,t,n){var a,r,i,o,s=[],c=function(a,r,i){if(!e(r))return a;s.push(r);var o=t(r,i);return s.pop(),null==o&&n?"":o};return a=function(e,t){var n=/^%([^%]+)%$/.exec(e);return n?c(e,n[1],t):e.replace(/%(.+?)%/g,(function(e,n){return c(e,n,t)}))},r=function(e,t){for(var n={},a=Object.keys(e),r=0;r<a.length;r++){var i=a[r],s=e[i];n[i]=o(s,t)}return n},i=function(e,t){for(var n=[],a=0,r=e.length;a<r;a++)n.push(o(e[a],t));return n},o=function(e,t){return"string"==typeof e?a(e,t):Array.isArray(e)?i(e,t):"object"==typeof e&&null!==e?r(e,t):e},function(e,t){return s.length>10?(G.error("Data element circular reference detected: "+s.join(" -> ")),e):o(e,t)}},ge=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)e[n]=t[n]}}},pe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fe=setTimeout;c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){var n=new this.constructor(o);return l(this,new p(e,t,n)),n},c.prototype.finally=r,c.all=function(e){return new c((function(t,n){function a(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,(function(t){a(e,t)}),n)}r[e]=i,0==--o&&t(r)}catch(e){n(e)}}if(!i(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var o=r.length,s=0;s<r.length;s++)a(s,r[s])}))},c.resolve=function(e){return e&&"object"==typeof e&&e.constructor===c?e:new c((function(t){t(e)}))},c.reject=function(e){return new c((function(t,n){n(e)}))},c.race=function(e){return new c((function(t,n){if(!i(e))return n(new TypeError("Promise.race accepts an array"));for(var a=0,r=e.length;a<r;a++)c.resolve(e[a]).then(t,n)}))},c._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){fe(e,0)},c._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var me=n(Object.freeze({__proto__:null,default:c})),ve="undefined"!=typeof window&&window.Promise||void 0!==pe&&pe.Promise||me.default||me,he=function(e,t,n){return function(a,r,i,o){return o.then((function(){var o,s=a.delayNext;return new ve((function(t,n){var r=e(a,i,[i]);if(!s)return t();var c=a.timeout,l=new ve((function(e,t){o=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+c/1e3+" seconds to complete. "))}),c)}));ve.race([r,l]).then(t,n)})).catch((function(e){return clearTimeout(o),e=t(e),n(a,r,e),ve.reject(e)})).then((function(){clearTimeout(o)}))}))}},be=function(e,t,n,a,r){return function(i,o,s,c){return c.then((function(){var c;return new ve((function(t,n){var a=e(i,s,[s]),r=i.timeout,o=new ve((function(e,t){c=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+r/1e3+" seconds to complete. "))}),r)}));ve.race([a,o]).then(t,n)})).catch((function(e){return clearTimeout(c),e=t(e),a(i,o,e),ve.reject(e)})).then((function(e){if(clearTimeout(c),!n(i,e))return r(i,o),ve.reject()}))}))}},ye=ve.resolve(),we=function(e,t,n){return function(a,r){return a.conditions&&a.conditions.forEach((function(t){ye=e(t,a,r,ye)})),a.actions&&a.actions.forEach((function(e){ye=t(e,a,r,ye)})),ye=(ye=ye.then((function(){n(a)}))).catch((function(){}))}},Le=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},Pe=function(e,t,n,a){return function(r,i){var o;if(r.conditions)for(var s=0;s<r.conditions.length;s++){o=r.conditions[s];try{var c=e(o,i,[i]);if(Le(c))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(o,c))return n(o,r),!1}catch(e){return a(o,r,e),!1}}return!0}},Ce=function(e,t){return function(n,a){e(n,a)&&t(n,a)}},Ee=function(e){return function(t){var n=e.getModuleDefinition(t.modulePath);return n&&n.displayName||t.modulePath}},De=function(e){return function(t){var n=t.rule,a=t.event,r=e.getModuleDefinition(a.modulePath).name;return{$type:e.getModuleExtensionName(a.modulePath)+"."+r,$rule:{id:n.id,name:n.name}}}},_e=function(e,t,n,a,r,i){return function(o,s){var c=s.rule,l=s.event;l.settings=l.settings||{};try{var u=r(s);t(l,null,[function(t){var a=n(u,t);o((function(){e(a,c)}))}])}catch(e){i.error(a(l,c,e))}}},ke=function(e,t,n,a){return function(r,i,o){var s=t(r);n.error(e(s,i.name,o)),a("ruleActionFailed",{rule:i,action:r})}},Te=function(e,t,n,a){return function(r,i,o){var s=t(r);n.error(e(s,i.name,o)),a("ruleConditionFailed",{rule:i,condition:r})}},xe=function(e,t,n){return function(a,r){var i=e(a);t.log('Condition "'+i+'" for rule "'+r.name+'" was not met.'),n("ruleConditionFailed",{rule:r,condition:a})}},je=function(e,t){return function(n){e.log('Rule "'+n.name+'" fired.'),t("ruleCompleted",{rule:n})}},Se=function(e,t,n){return function(a,r){var i;if(a.actions)for(var o=0;o<a.actions.length;o++){i=a.actions[o];try{e(i,r,[r])}catch(e){return void t(i,a,e)}}n(a)}},Ae=function(e,t,n,a){return function(r,i){a("ruleTriggered",{rule:i}),e?n(i,r):t(i,r)}},Re=function(e,t,n){return'Failed to execute "'+e+'" for "'+t+'" rule. '+n.message+(n.stack?"\n"+n.stack:"")},Ne=function(e,t){return t&&!e.negate||!t&&e.negate},Ie=[],Ue=!1,Oe=function(e){Ue?e():Ie.push(e)},Me=function(e,t,n){e(t).forEach((function(e){n(Oe,e)})),Ue=!0,Ie.forEach((function(e){e()})),Ie=[]},Ve=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},qe=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},Be=function(e){var t,n;return!1!==m(e)&&("function"==typeof(t=e.constructor)&&(!1!==m(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},Fe=function(e,t){return Be(t=t||{})?t=D({},t,e):D(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return G.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},$e=function(e,t){return function(n,a){var r=e[n];if(r){var i=r.modules;if(i)for(var o=Object.keys(i),s=0;s<o.length;s++){var c=o[s],l=i[c];if(l.shared&&l.name===a)return t.getModuleExports(c)}}}},We=function(e,t){return function(){return t?e(t):{}}},Ge=function(e,t,n){return function(a){if(n){var r=a.split(".");r.splice(r.length-1||1,0,"min"),a=r.join(".")}return e(t)+a}},ze=".js",He=function(e){return e.substr(0,e.lastIndexOf("/"))},Ke=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},Qe=function(e,t){Ke(t,ze)||(t+=ze);var n=t.split("/"),a=He(e).split("/");return n.forEach((function(e){e&&"."!==e&&(".."===e?a.length&&a.pop():a.push(e))})),a.join("/")},Je=a((function(e){!function(t){if(e.exports=t(),!!0){var n=window.Cookies,a=window.Cookies=t();a.noConflict=function(){return window.Cookies=n,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(a){function r(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=a.write?a.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var s=i[o].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(a.read||a)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(r[l]=c,e===l)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){i(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}return n((function(){}))}))})),Ye={get:Je.get,set:Je.set,remove:Je.remove},Ze=function(e,t){return new ve((function(n,a){t.onload=function(){n(t)},t.onerror=function(){a(new Error("Failed to load script "+e))}}))},Xe=function(e){var t=document.createElement("script");t.src=e,t.async=!0;var n=Ze(e,t);return document.getElementsByTagName("head")[0].appendChild(t),n},et=function(e,t,n,a){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var i=/\+/g;e=e.split(t);var o=1e3;a&&"number"==typeof a.maxKeys&&(o=a.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var c=0;c<s;++c){var l,u,d,g,p=e[c].replace(i,"%20"),f=p.indexOf(n);f>=0?(l=p.substr(0,f),u=p.substr(f+1)):(l=p,u=""),d=decodeURIComponent(l),g=decodeURIComponent(u),v(r,d)?Array.isArray(r[d])?r[d].push(g):r[d]=[r[d],g]:r[d]=g}return r},tt=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},nt=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(a){var r=encodeURIComponent(tt(a))+n;return Array.isArray(e[a])?e[a].map((function(e){return r+encodeURIComponent(tt(e))})).join(t):r+encodeURIComponent(tt(e[a]))})).join(t):a?encodeURIComponent(tt(a))+n+encodeURIComponent(tt(e)):""},at=a((function(e,t){t.decode=t.parse=et,t.encode=t.stringify=nt})),rt="@adobe/reactor-",it={cookie:Ye,document:w,"load-script":Xe,"object-assign":D,promise:ve,"query-string":{parse:function(e){return"string"==typeof e&&(e=e.trim().replace(/^[?#&]/,"")),at.parse(e)},stringify:function(e){return at.stringify(e)}},window:_},ot=function(e){return function(t){if(0===t.indexOf(rt)){var n=t.substr(rt.length),a=it[n];if(a)return a}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},st=function(e,t,n,a,r,i,o){var s=e.extensions,c=e.buildInfo,l=e.environment,u=e.property.settings;if(s){var d=$e(s,t);Object.keys(s).forEach((function(g){var p=s[g],f=p.settings;Array.isArray(p.filePaths)&&(f=i(f,p.filePaths));var m=We(a,f);if(p.modules){var v=G.createPrefixedLogger(p.displayName),h=Ge(o,p.hostedLibFilesBaseUrl,c.minified),b={buildInfo:c,environment:l,property:{name:e.property.name,id:e.property.id},getDataElementValue:r,getExtensionSettings:m,getHostedLibFileUrl:h,getSharedModule:d,logger:v,propertySettings:u,replaceTokens:a,onDebugChanged:n.onDebugChanged,get debugEnabled(){return n.getDebugEnabled()}};Object.keys(p.modules).forEach((function(e){var n=p.modules[e],a=ot((function(n){var a=Qe(e,n);return t.getModuleExports(a)}));t.registerModule(e,n,g,a,b)}))}})),t.hydrateCache()}return t},ct=function(e,t,n,a,r){var i=G.createPrefixedLogger("Custom Script");e.track=function(e){G.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=i,e.notify=function(e,t){switch(G.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:i.info(e);break;case 4:i.warn(e);break;case 5:i.error(e);break;default:i.log(e)}},e.getVar=a,e.setVar=r,e.setCookie=function(e,t,n){var a="",r={};n&&(a=", { expires: "+n+" }",r.expires=n);var i='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+a+").";G.deprecation(i),Ye.set(e,t,r)},e.readCookie=function(e){return G.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),Ye.get(e)},e.removeCookie=function(e){G.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),Ye.remove(e)},e.cookie=Ye,e.pageBottom=function(){},e.setDebug=n;var o=!1;Object.defineProperty(e,"_container",{get:function(){return o||(G.warn("_satellite._container may change at any time and should only be used for debugging."),o=!0),t}})},lt=function(e,t){return function(n,a,r){return e&&Be(n)&&Object.keys(n).length&&Array.isArray(a)&&a.length?(a.forEach((function(e){Boolean(null!=r&&/^core\/.*actions.*\/customCode\.js$/.test(r))&&"source"===e&&!n.isExternal||y(e.split("."),n,t)})),n):n}},ut=window._satellite;if(ut&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var dt=ut.container;delete ut.container;var gt=D({},dt.buildInfo);Object.defineProperty(gt,"environment",{get:function(){return G.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),dt.environment.stage}}),dt.buildInfo=gt;var pt,ft=j(H("localStorage"),G),mt="";w.currentScript&&w.currentScript.getAttribute("src")&&(mt=w.currentScript.getAttribute("src"));try{pt=k(mt,Boolean(dt.company.dynamicCdnEnabled),dt.company.cdnAllowList,ft)}catch(e){throw G.warn("Please review the following error:"),e}var vt,ht=lt(pt.isDynamicEnforced,pt.decorateWithDynamicHost),bt=ce(),yt=dt.property.settings.undefinedVarsReturnEmpty,wt=dt.property.settings.ruleComponentSequencingEnabled,Lt=dt.dataElements||{},Pt=function(e){return Lt[e]},Ct=function(){return vt.apply(null,arguments)},Et=ne(bt,Pt,Ct,yt,ht),Dt={},_t=ge(Dt),kt=oe(Dt,Pt),Tt=ie(Dt,Pt,Et);vt=de(kt,Tt,yt),ct(ut,dt,ft.setDebugEnabled,Tt,_t),st(dt,bt,ft,vt,Et,ht,pt.decorateWithDynamicHost);var xt=ue(ut),jt=A(bt,vt,ht),St=Ee(bt),At=xe(St,G,xt),Rt=Te(Re,St,G,xt),Nt=ke(Re,St,G,xt),It=je(G,xt),Ut=_e(Ae(wt,Ce(Pe(jt,Ne,At,Rt),Se(jt,Nt,It)),we(be(jt,Ve,Ne,Rt,At),he(jt,Ve,Nt),It),xt),jt,Fe,Re,De(bt),G);Me(T,dt.rules||[],Ut)}return ut}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();