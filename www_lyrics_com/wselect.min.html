<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wselect.min.html</title>
</head>
<body>

<script>
!function(e,t,n){var r={lang:"EN",url:""},o={},c={init:function(e){return o=jQuery.extend(r,e||{}),this.each(function(){n(this).addClass("wselect-cnt").bind("mouseup",c.muHandler)})},muHandler:function(e){n(this);if(null!=c.expandSelection()){var t=c.injectMarkup();if(""!=t){var r=o.url+encodeURIComponent(t).replace(/[!'()*]/g,escape);location.href=r}}},expandSelection:function(){var n;if(e.getSelection&&e.getSelection().modify){var r=e.getSelection();(n=r.toString())&&0!=n.length||(r.modify("extend","forward","character"),(n=(r=e.getSelection()).toString())&&0!=n.length||(r.modify("extend","backward","character"),n=(r=e.getSelection()).toString()));var o=c.countWords(n);if(o>3)return null;for(i=0;i<o;i++)r.modify("move","backward","word");for(var i=0;i<o;i++)r.modify("extend","forward","word")}else if(t.selection&&"Text"==t.selection.type){var a=t.selection.createRange();(n=a.text)&&0!=n.length||(a.moveEnd("character",1),(n=(a=t.selection.createRange()).text)&&0!=n.length||(a.moveStart("character",1),n=(a=t.selection.createRange()).text)),a.moveStart("word",-1),a.moveEnd("word",1),a.select()}return!0},injectMarkup:function(){var n,r,o="",i=jQuery('<span class="wselect"/>').get(0);if(e.getSelection?n=e.getSelection():t.getSelection?n=t.getSelection():t.selection&&(n=t.selection),void 0===n||!n)return o;if(e.getSelection||t.getSelection){o=n.toString(),r=n.getRangeAt(0);var a=t.createRange();a.setStart(n.focusNode,r.startOffset),a.setEnd(n.focusNode,r.endOffset),a.surroundContents(i),n.removeAllRanges()}else t.selection&&"Text"==t.selection.type&&(o=(r=n.createRange()).text,r&&(r.surroundContents?(r.surroundContents(i),n.empty()):r.select&&r.select()));return c.normalizeSelectionText(o)},countWords:function(e){var t=0,n=e.match(/\b/g);return n&&(t=n.length/2),t},normalizeSelectionText:function(e){var t=jQuery.trim(e);return t=c.charTrim(t,".,?!#/$%^*;:{}_~-—[]'\""),t=t.replace(/[\.,\?\!\#\/\$\%\^\*;:•\{\}\_\~\—\[\]]/g," "),t=t.replace(/\s{2,}/g," "),t=jQuery.trim(t)},charTrim:function(e,t){var n,r=0,o=0;for(e+="",n=t?(t+="").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \n\r\t\f\v            ​\u2028\u2029　",r=e.length,o=0;o<r;o++)if(-1===n.indexOf(e.charAt(o))){e=e.substring(o);break}for(o=(r=e.length)-1;o>=0;o--)if(-1===n.indexOf(e.charAt(o))){e=e.substring(0,o+1);break}return-1===n.indexOf(e.charAt(0))?e:""}};n.fn.wselect=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void n.error("Method "+e+" does not exist."):c.init.apply(this,arguments)}}(this,document,jQuery);
</script>

</body>
</html>
