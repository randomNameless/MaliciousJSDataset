fourSq.ui.chainautocompleter.ChainInput=function(a){};
fourSq.ui.chainautocompleter.ChainInput=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.chainautocompleter.ChainInput.__super__.initialize.call(this,a);this.$chainInput_=this.$el.find("input.chainAutocomplete")},decorate:function(){return this.decorateChainInput_()},toggleChainInput_:function(a){this.$chainInput_.prop("disabled",a);this.$chainInput_.toggleClass("disabledInput",a)},reset:function(){this.toggleChainInput_(!1);this.$chainInput_.val("")},disableInputs:function(){this.toggleChainInput_(!0)},
enableInputs:function(){this.toggleChainInput_(!1)},setChain_:function(a){this.$chainInput_.val(a.name);this.trigger(fourSq.ui.chainautocompleter.ChainInput.Events.CHAIN_SELECTED,a)},decorateChainInput_:function(){var a=[new fourSq.ui.chainautocompleter.ChainCompleter],b=fourSq.bind(function(a,b){this.setChain_(b.item.chain)},this);fourSq.autocomplete.applyCompleters(this.$chainInput_,a,b,null,null,void 0,void 0,!1,0);this.autocompleteOnFocus_(this.$chainInput_);return this},autocompleteOnFocus_:function(a){a.focus(function(b){b=
$.trim(a.val());0===b.length?a.autocomplete("search",""):a.autocomplete("search",b)})}},{Events:{CHAIN_SELECTED:"fourSq.ui.hainautocompleter.ChainInput:CHAIN_SELECTED"}});fourSq.ui.chainautocompleter.ChainCompleter=function(a,b){};
fourSq.ui.chainautocompleter.ChainCompleter=fourSq.Class.extend({initialize:function(){fourSq.ui.chainautocompleter.ChainCompleter.__super__.initialize.call(this);this.results_=[]},header:function(){return""},clear:function(){this.results_=[]},fetch:function(a,b){if(2<=a.length)this.fetchResults_(a,b);else if(0===a.length){var c=this;this.getStaticResults_(function(a){c.results_=_.filter(a,function(a){return!0});b(c.results_)})}},fetchResults_:function(a,b){fourSq.api.services.Search.venueChainAutocompletion({query:a,
group:"venueChains"},fourSq.bind(function(a){this.results_=_.first(a,fourSq.ui.chainautocompleter.ChainCompleter.LIMIT);b(this.results_)},this),fourSq.emptyFunction)},getStaticResults_:function(a){a([])},render:function(){return _.map(this.results_,fourSq.bind(function(a){return{label:templates.fourSq.autocomplete.chainCompletionWithEntities({chain:a}),item:{chain:a}}},this))}},{LIMIT:10});"undefined"==typeof helpers.autocomplete&&(helpers.autocomplete={});"undefined"==typeof helpers.autocomplete.desktop&&(helpers.autocomplete.desktop={});"undefined"==typeof helpers.autocomplete.desktop.chain&&(helpers.autocomplete.desktop.chain={});
helpers.autocomplete.desktop.chain.chainAutocompleter=function(a,b){return'\x3cdiv class\x3d"chainAutocompleter"\x3e\x3cinput type\x3d"text" class\x3d"formStyle chainAutocomplete" id\x3d"chainAutocomplete" placeholder\x3d"'+helpers.autocomplete.desktop.chain.chainAutocompleterPlaceholder_(null)+'" /\x3e\x3c/div\x3e'};helpers.autocomplete.desktop.chain.chainAutocompleterPlaceholder_=function(a,b){return"Start typing a chain name"};
fourSq.ui.categoryautocompleter.TwoStepCategoryInput=function(a){};
fourSq.ui.categoryautocompleter.TwoStepCategoryInput=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.categoryautocompleter.TwoStepCategoryInput.__super__.initialize.call(this,a);this.$rootCategoryInput_=this.$el.find("input.rootCategoryAutocomplete");this.$subcategoryInput_=this.$el.find("input.subcategoryAutocomplete");this.llHinter_=a.llHinter;this.hierarchy_=a.hierarchy;this.getBannedCategoryIds_=a.getBannedCategoryIds;this.parentCatId_=null;fourSq.isDefined(a.startingTabIndex)&&(this.$rootCategoryInput_.attr("tabindex",
a.startingTabIndex.toString()),this.$subcategoryInput_.attr("tabindex",(a.startingTabIndex+1).toString()))},decorate:function(){return this.decorateRootCategoryInput_().decorateSubcategoryInput_()},toggleSubcategoryInput_:function(a){this.$subcategoryInput_.prop("disabled",a);this.$subcategoryInput_.toggleClass("disabledInput",a)},reset:function(){this.parentCatId_=null;this.toggleSubcategoryInput_(!0);this.$rootCategoryInput_.val("");this.$subcategoryInput_.val("")},disableInputs:function(){this.toggleSubcategoryInput_(!0);
this.$rootCategoryInput_.prop("disabled",!0)},enableInputs:function(){this.$rootCategoryInput_.prop("disabled",!1);this.parentCatId_&&this.toggleSubcategoryInput_(!1)},decorateRootCategoryInput_:function(){var a=[new fourSq.ui.categoryautocompleter.HierarchicalRootCategoryCompleter({llHinter:this.llHinter_,getBannedCategoryIds:this.getBannedCategoryIds_,hierarchy:this.hierarchy_})],b=fourSq.bind(function(a,b){this.setParentCat_(b.item.parent);var e=b.item.child;e&&this.setChildCat_(e)},this);fourSq.autocomplete.applyCompleters(this.$rootCategoryInput_,
a,b,null,null,void 0,void 0,!1,0);this.$rootCategoryInput_.on("input",fourSq.bind(function(){this.parentCatId_=null;this.toggleSubcategoryInput_(!0)},this));this.autocompleteOnFocus_(this.$rootCategoryInput_);return this},setParentCat_:function(a){this.$rootCategoryInput_.val(a.name);this.parentCatId_=a.id;this.toggleSubcategoryInput_(!1);this.$subcategoryInput_.val("")},setChildCat_:function(a){this.$subcategoryInput_.val(a.name);this.trigger(fourSq.ui.categoryautocompleter.TwoStepCategoryInput.Events.SUBCATEGORY_SELECTED,
a)},decorateSubcategoryInput_:function(){var a=[new fourSq.ui.categoryautocompleter.SubcategoryCompleter({llHinter:this.llHinter_,hierarchy:this.hierarchy_,getBannedCategoryIds:this.getBannedCategoryIds_,getParentId:fourSq.bind(function(){return this.parentCatId_},this)})],b=fourSq.bind(function(a,b){this.setChildCat_(b.item.category)},this);fourSq.autocomplete.applyCompleters(this.$subcategoryInput_,a,b,null,null,void 0,void 0,!1,0);this.autocompleteOnFocus_(this.$subcategoryInput_);return this},
autocompleteOnFocus_:function(a){a.focus(function(b){b=$.trim(a.val());0===b.length?a.autocomplete("search",""):a.autocomplete("search",b)})}},{Events:{SUBCATEGORY_SELECTED:"fourSq.ui.categoryautocompleter.TwoStepCategoryInput:SUBCATEGORY_SELECTED"}});fourSq.ui.categoryautocompleter.BaseCategoryCompleter=function(a){};
fourSq.ui.categoryautocompleter.BaseCategoryCompleter=fourSq.Class.extend({initialize:function(a){fourSq.ui.categoryautocompleter.BaseCategoryCompleter.__super__.initialize.call(this,a);this.results_=[];this.llHinter_=a.llHinter;this.hierarchy_=a.hierarchy;this.getBannedCategoryIds_=a.getBannedCategoryIds},header:function(){return""},clear:function(){this.results_=[]},fetch:function(a,b){if(2<=a.length)this.fetchResults_(a,b);else if(0===a.length){var c=this;this.getStaticResults_(function(a){c.results_=
_.filter(a,function(a){return!_.contains(c.getBannedCategoryIds_(),a.id)});b(c.results_)})}},fetchResults_:function(a,b){var c=fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG;this.llHinter_&&(c=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(this.llHinter_()));fourSq.api.services.Search.categoryAutocompletion({query:a,ll:c,group:"categories",includePrivateCategories:!0,filterTopLevelCats:this.filterTopLevelCats_()},fourSq.bind(function(a){a=_.filter(a,fourSq.bind(function(a){return!_.contains(this.getBannedCategoryIds_(),
a.id)&&this.fetchResultsFilter_(a)},this));this.results_=_.first(a,fourSq.ui.categoryautocompleter.BaseCategoryCompleter.LIMIT);b(this.results_)},this),fourSq.emptyFunction)},fetchResultsFilter_:function(a){return!0},filterTopLevelCats_:fourSq.abstractMethod,getStaticResults_:fourSq.abstractMethod,render:fourSq.abstractMethod},{LIMIT:10});fourSq.ui.categoryautocompleter.HierarchicalRootCategoryCompleter=function(a,b){};
fourSq.ui.categoryautocompleter.HierarchicalRootCategoryCompleter=fourSq.ui.categoryautocompleter.BaseCategoryCompleter.extend({getStaticResults_:function(a){a(this.hierarchy_.getRootCategories())},filterTopLevelCats_:function(){return!1},makeCategoryItem_:function(a,b){return{label:templates.fourSq.autocomplete.hierarchicalCategoryCompletion({parentCategory:a,category:b}),item:{parent:a?a:b,child:a?b:a}}},render:function(){var a=_.map(this.results_,fourSq.bind(function(a){var b=this.hierarchy_.getTopParent(a.id);
return this.makeCategoryItem_(b,a)},this));if(_.some(this.results_,fourSq.bind(function(a){return fourSq.isDefinedAndNotNull(a.query)},this))){var b=_.map(this.results_,function(a){return a.id}),c=_.map(this.results_,fourSq.bind(function(a){var c=_.reject(this.hierarchy_.getChildren(a.id),function(a){return _.contains(b,a.id)});return _.map(c,fourSq.bind(function(b){return this.makeCategoryItem_(a,b)},this))},this));return _.first(a.concat(_.flatten(c)),fourSq.ui.categoryautocompleter.BaseCategoryCompleter.LIMIT)}return a}});fourSq.ui.categoryautocompleter.SubcategoryCompleter=function(a){};
fourSq.ui.categoryautocompleter.SubcategoryCompleter=fourSq.ui.categoryautocompleter.BaseCategoryCompleter.extend({initialize:function(a){fourSq.ui.categoryautocompleter.SubcategoryCompleter.__super__.initialize.call(this,a);this.getParentId_=a.getParentId},getStaticResults_:function(a){var b=this.hierarchy_.getChildren(this.getParentId_());a(b)},filterTopLevelCats_:function(){return!0},fetchResultsFilter_:function(a){return this.hierarchy_.getTopParent(a.id).id===this.getParentId_()},render:function(){return _.map(this.results_,
fourSq.bind(function(a){return{label:templates.fourSq.autocomplete.categoryCompletionWithEntities({category:a}),item:{category:a}}},this))}});fourSq.ui.categoryautocompleter.CategoryHierarchy=function(a){};
fourSq.ui.categoryautocompleter.CategoryHierarchy=fourSq.Class.extend({initialize:function(a){fourSq.ui.categoryautocompleter.CategoryHierarchy.__super__.initialize.call(this);this.catMap_={};this.parentMap_={};_.each(a.categories,fourSq.bind(this.addCat_,this))},addCat_:function(a,b){this.catMap_[a.id]=a;b&&(this.parentMap_[a.id]=b.id);_.each(a.categories,fourSq.bind(function(b){this.addCat_(b,a)},this))},get:function(a){return this.catMap_[a]||null},getParent:function(a){return(a=this.parentMap_[a])?
this.get(a):null},getTopParent:function(a){for(var b=null;this.getParent(a);)b=this.getParent(a),a=b.id;return b},getChildren:function(a){return fourSq.api.models.companion.category.CategoryUtil.withAllChildren(this.catMap_[a]).slice(1)},getRootCategories:function(){return _.filter(_.values(this.catMap_),fourSq.bind(function(a){return!this.getParent(a.id)},this))}},{fetchHierarchy:function(a){fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchy_||fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchingHierarchy_||
(fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchingHierarchy_=!0,fourSq.api.services.Venue.categories({cc:a},function(a){fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchy_=new fourSq.ui.categoryautocompleter.CategoryHierarchy({categories:a});fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchingHierarchy_=!1;_.each(fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchyCallbacks_,function(a){a(fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchy_)})},function(){fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchingHierarchy_=
!1}))},withHierarchy:function(a,b){fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchy_?b(fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchy_):(fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchyCallbacks_.push(b),fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchHierarchy(a))}});fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchy_=null;fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchingHierarchy_=!1;
fourSq.ui.categoryautocompleter.CategoryHierarchy.hierarchyCallbacks_=[];"undefined"==typeof helpers.autocomplete&&(helpers.autocomplete={});"undefined"==typeof helpers.autocomplete.desktop&&(helpers.autocomplete.desktop={});"undefined"==typeof helpers.autocomplete.desktop.category&&(helpers.autocomplete.desktop.category={});
helpers.autocomplete.desktop.category.twoStepCategoryAutocompleter=function(a,b){return'\x3cdiv class\x3d"twoStepCategoryAutocompleter"\x3e\x3cinput type\x3d"text" class\x3d"formStyle rootCategoryAutocomplete" id\x3d"rootCategoryAutocomplete" placeholder\x3d"'+helpers.autocomplete.desktop.category.topCategoryAutocompleterPlaceholder_(null)+'" aria-label\x3d"Category name input" /\x3e\x3cinput disabled type\x3d"text" class\x3d"disabled formStyle subcategoryAutocomplete disabledInput" id\x3d"subcategoryAutocomplete" placeholder\x3d"'+
helpers.autocomplete.desktop.category.bottomCategoryAutocompleterPlaceholder_(null)+'" aria-label\x3d"Subcategory address input" /\x3e\x3c/div\x3e'};helpers.autocomplete.desktop.category.topCategoryAutocompleterPlaceholder_=function(a,b){return"Start typing a category name"};helpers.autocomplete.desktop.category.bottomCategoryAutocompleterPlaceholder_=function(a,b){return"Enter a subcategory name"};
fourSq.views.hours.TimeframeEditor=function(a){};
fourSq.views.hours.TimeframeEditor=fourSq.ui.View.extend({initialize:function(a){fourSq.views.hours.TimeframeEditor.__super__.initialize.call(this,a);this.venueId_=a.venueId;this.timeframe_=a.timeframe||null;this.seasonalTimeframe_=null;this.onAdd_=a.onAdd;this.dayToggles_=[];this.closed_=this.touched_=this.clearing_=!1;this.$submit_=this.$el.find(".timeframeEditorSubmit");this.$closed_=this.$el.find(".timeframeClosedSubmit");this.$covidClosure_=this.$el.find("#covidClosure");this.$preview_=this.$el.find(".timeframeEditorPreview");
this.$form_=this.$el.find("form.timeframeEditorForm");this.$status_=this.$el.find(".timeframeEditorStatus");this.$dayToggles_=this.$el.find(".dayToggles");this.toTimeInput_=this.fromTimeInput_=null;this.showSeasonalHoursEditor_=a.showSeasonalHoursEditor;this.getSeasonalModeCb_=a.getSeasonalModeCb},decorate:function(){var a=this.$el.find(".dayToggles").find(".toggleButton").toArray();this.dayToggles_=_.map(a,fourSq.bind(function(a){return(new fourSq.views.Toggle({el:a,callback:fourSq.bind(this.handleChange_,
this)})).decorate()},this));this.fromTimeInput_=(new fourSq.views.TimeInput({el:this.$el.find(".fromTime").find(".timeInputContainer").get(0),onChange:fourSq.bind(this.handleChange_,this),onSelect:fourSq.bind(function(){this.$el.find(".toTime").find("input").focus()},this),inputId:"fromTime",militaryTime:!1,autoToTwelve:!0})).decorate();this.toTimeInput_=(new fourSq.views.TimeInput({el:this.$el.find(".toTime").find(".timeInputContainer").get(0),onChange:fourSq.bind(this.handleChange_,this),onTouch:fourSq.bind(this.enableForm_,
this),onSelect:fourSq.bind(function(){this.$el.find(".timeframeEditorSubmit").focus()},this),inputId:"toTime",militaryTime:!1,autoToTwelve:!0})).decorate();this.$closed_.click(fourSq.bind(this.handleClosed_,this));this.getForm_().submit(fourSq.bind(this.handleAdd_,this));this.handleChange_();this.startSeasonalMonthInput_=(new fourSq.views.hours.CalendarDropdown({el:this.$el.find(".startDateEditor").get(0),selectEndDateByDefault:!1})).render().decorate();this.endSeasonalMonthInput_=(new fourSq.views.hours.CalendarDropdown({el:this.$el.find(".endDateEditor").get(0),
selectEndDateByDefault:!0})).render().decorate();return this},handleClosed_:function(){this.closed_=!0;this.seasonalTimeframe_=null;this.displayErrors_([]);this.handleChange_();this.handleAdd_()},clear:function(){this.clearing_=!0;this.timeframe_=null;_.each(this.dayToggles_,function(a){a.setChecked(!1)});this.fromTimeInput_.clear();this.toTimeInput_.clear();this.displayErrors_([]);this.$preview_.hide();this.disableForm_();this.clearing_=!1},asTemplate:function(a){return $(helpers.venue.hours.hoursItem({timeframe:this.timeframe_,
editable:a,blurred:!1}))},asSeasonalTemplate:function(a){return $(templates.fourSq.venue.hours.seasonalRangeHours({seasonalHour:this.seasonalTimeframe_,editable:a}))},asTimeframe:function(){var a=this.getTimes_(),b=this.getDays_();return fourSq.util.Hours.toTimeframe(b,a.start,a.end)},asSeasonalTimeframe:function(){var a=this.getTimes_(),b=this.getDays_(),c=this.getSeasonalDates_(),a=this.closed_?fourSq.util.Hours.closedTimeframe(b,0,0):fourSq.util.Hours.toTimeframe(b,a.start,a.end);return{startMonth:c.startMonth,
startDay:c.startDay,endMonth:c.endMonth,endDay:c.endDay,timeframes:[a],closed:this.closed_,covid:this.$covidClosure_.is(":checked")}},asParam:function(){var a=this.getSeasonalModeCb_()?this.asSeasonalTimeframe():this.asTimeframe();return fourSq.util.Hours.toParams({timeframes:[a]}).join("")},getForm_:function(){1>this.$form_.length&&(this.$el.wrapInner('\x3cform class\x3d"timeframeEditorForm"\x3e\x3c/form\x3e'),this.$form_=this.$el.find("form.timeframeEditorForm"));return this.$form_},enableForm_:function(){this.$submit_.prop("disabled",
!1).removeClass("disabledButton").addClass("greenButton")},disableForm_:function(){this.$submit_.prop("disabled",!0).addClass("disabledButton").removeClass("greenButton")},getDays_:function(){return this.closed_?_.pluck(this.dayToggles_,"name"):_.pluck(_.filter(this.dayToggles_,function(a){return a.checked()}),"name")},getTimes_:function(){var a=this.closed_?0:this.fromTimeInput_.minutesSinceMidnight(),b=this.closed_?0:this.toTimeInput_.minutesSinceMidnight();a>=b&&b<=60*(fourSq.util.Hours.MaxOpenHour-
24)&&(b+=1440);return{start:a,end:b}},getSeasonalDates_:function(){var a=this.$el.find(".startDateEditor"),b=this.$el.find(".endDateEditor"),c=parseInt(a.find(".monthPicker").val(),10),a=parseInt(a.find(".dayPicker").val(),10),d=parseInt(b.find(".monthPicker").val(),10),b=parseInt(b.find(".dayPicker").val(),10);return{startMonth:c,startDay:a,endMonth:d,endDay:b}},displayErrors_:function(a){this.$el.find(".error").removeClass("error");this.$el.find(".hint").removeClass("hint");_.each(a,fourSq.bind(function(a,
c){fourSq.isDefinedAndNotNull(a.field)&&(this.touched_?a.field.addClass("error"):0===c&&a.field.addClass("hint"),0===c&&a.field.focus())},this));0<a.length?(this.$status_.text(a[0].message).toggleClass("errorDisplay",this.touched_).show(),this.disableForm_(),this.$preview_.empty().hide()):(this.$status_.text("").hide(),this.enableForm_())},getClientErrors_:function(){var a=this.closed_,b=this.getTimes_(),c=_.some(this.dayToggles_,function(a){return a.checked()}),d="",e=[];a||c||(d=this.touched_?helpers.venue.hours.noDaysError({}):
helpers.venue.hours.noDaysHint({}),e.push({field:this.$el.find(".dayToggles"),message:d}));isNaN(b.start)&&(d=this.touched_?helpers.venue.hours.openingError({}):helpers.venue.hours.openingHint({}),e.push({field:this.fromTimeInput_.textInput,message:d}));isNaN(b.end)&&(d=this.touched_?helpers.venue.hours.closingError({}):helpers.venue.hours.closingHint({}),e.push({field:this.toTimeInput_.textInput,message:d}));b.end<b.start&&e.push({field:this.toTimeInput_.textInput,message:helpers.venue.hours.orderingError({maxOpenHour:fourSq.util.Hours.MaxOpenHour})});
return e},handleChange_:function(){if(!this.clearing_){this.touched_=_.some(this.dayToggles_,function(a){return a.touched()})&&this.toTimeInput_.touched()&&this.fromTimeInput_.touched();var a=this.getClientErrors_();0===a.length?(this.disableForm_(),fourSq.api.services.Venue.validateHours(this.venueId_,this.asParam(),fourSq.bind(this.handleSuccess_,this),fourSq.bind(this.handleFailure_,this))):this.displayErrors_(a)}},handleFailure_:function(a){fourSq.debug.error(a);this.timeframe_=null;this.displayErrors_([helpers.venue.hours.fatalError({})])},
handleSuccess_:function(a){a.status===fourSq.api.services.Venue.hoursValidationStatus.OK||a.status===fourSq.api.services.Venue.hoursValidationStatus.POPULARHOURSWARNING||a.status===fourSq.api.services.Venue.hoursValidationStatus.SUSPICIOUSVALUESWARNING?(this.getSeasonalModeCb_()?(this.seasonalTimeframe_=a.seasonalHours[0],a=this.asSeasonalTemplate(!1)):(this.timeframe_=a.hours.timeframes.pop(),a=this.asTemplate(!1)),this.$preview_.empty().append(a).show(),this.displayErrors_([])):this.handleFailure_(a)},
handleAdd_:function(){if(this.getSeasonalModeCb_()?!this.seasonalTimeframe_:!this.timeframe_)return!1;var a=this.onAdd_();this.clear();return a}});fourSq.views.hours.Editor=function(a){};
fourSq.views.hours.Editor=fourSq.ui.View.extend({initialize:function(a){fourSq.views.hours.Editor.__super__.initialize.call(this,a);this.venue_=a.venue;this.onFinish_=a.onFinish||fourSq.emptyFunction;this.onValidate_=a.onValidate||fourSq.emptyFunction;this.dryRun_=a.dryRun||!1;this.touched_=!1;this.inlineForm_=a.inlineForm;this.creatingView_=a.creatingView;this.suppressButtons_=a.suppressButtons;this.forManager_=a.forManager;this.$freeFormError_=this.$timeframeError_=this.$freeFormTimeframes_=this.seasonalTimeframes_=
this.timeframes_=null;this.humanHours_=this.venue_.defaultHours||this.venue_.hours||this.venue_.editingMetadata&&this.venue_.editingMetadata.humanHours&&this.venue_.editingMetadata.humanHours.hours||null;this.seasonalHours_=this.venue_.seasonalHours||this.venue_.editingMetadata&&this.venue_.editingMetadata.seasonalHours||null;this.machineHours_=this.venue_.editingMetadata&&this.venue_.editingMetadata.machineHours&&this.venue_.editingMetadata.machineHours.hours||null;this.successMessage_=a.successMessage||
templates.fourSq.venue.hours.successNotification();this.seasonalMode_=!1;this.showSeasonalHoursEditor_=a.showSeasonalHoursEditor},render:function(){var a;a=this.inlineForm_?templates.fourSq.venue.hours.compactEditor({venue:this.venue_,defaultHours:this.humanHours_,seasonalHours:this.seasonalHours_,showSeasonalHoursEditor:this.showSeasonalHoursEditor_}):templates.fourSq.venue.hours.editorWithWrapper({venue:this.venue_,hours:this.humanHours_,suppressButtons:this.suppressButtons_,forManager:this.forManager_});
this.$el.empty().append(a);this.decorate();this.$el.find(".hoursLink").click(fourSq.bind(function(){this.$el.parents(".accordionRow").toggleClass("showDefaultHoursLink");this.seasonalMode_?this.$el.removeClass("seasonal"):this.$el.addClass("seasonal");this.seasonalMode_=!this.seasonalMode_;this.timeframeEditor_.clear()},this));return this},decorate:function(){this.$timeframeError_=this.$el.find(".timeframeError");this.$freeFormError_=this.$el.find(".freeformError");this.$freeFormTimeframes_=this.$el.find(".freeFormTimeframes");
this.$freeFormTimeframes_.change(fourSq.bind(this.handleFreeFormEdit_,this));this.$freeFormTimeframes_.keyup(fourSq.bind(function(a){$(a.currentTarget).change()},this));this.$freeFormTimeframes_.on("paste",fourSq.bind(function(a){$(a.currentTarget).change()},this));this.$el.find(".toggleEditorMode a").click(fourSq.bind(function(){this.$el.toggleClass("freeformMode")},this));new fourSq.views.HoursHelpFlyout({anchor:this.$el.find(".hoursTip").get(0),direction:fourSq.ui.Flyout.Directions.BELOW});this.timeframeEditor_=
(new fourSq.views.hours.TimeframeEditor({el:this.$el.find(".timeframeEditor").get(0),venueId:this.venue_.id,onAdd:fourSq.bind(this.handleTimeframeAdd_,this),showSeasonalHoursEditor:this.showSeasonalHoursEditor_,getSeasonalModeCb:fourSq.bind(this.getSeasonalMode,this)})).decorate();this.$save_=this.$el.find(".hoursEditorSave");this.$cancel_=this.$el.find(".hoursEditorCancel");this.machineHours_?this.timeframes_=this.machineHours_.timeframes||[]:(fourSq.api.services.Venue.hours(this.venue_.id,fourSq.bind(function(a){this.timeframes_=
a.hours.timeframes||[];this.trigger("hours-loaded")},this),fourSq.emptyFunction),this.showSeasonalHoursEditor_&&fourSq.api.services.Venue.seasonalHours(this.venue_.id,fourSq.bind(function(a){this.seasonalTimeframes_=a.seasonalHours},this),fourSq.emptyFunction));this.$cancel_.click(fourSq.bind(this.finish_,this));this.bindDeleteHoursButtons_(this.$el.find(".timespan"));this.on("success",fourSq.bind(function(){fourSq.ui.Notifier.getInstance().info({title:this.successMessage_,duration:9E3});this.finish_()},
this));this.on("failure",function(){fourSq.ui.Notifier.getInstance().error(templates.fourSq.venue.hours.failureNotification())});return this},getSeasonalMode:function(){return this.seasonalMode_},touch_:function(){this.touched_||(this.dryRun_?this.$save_.click(fourSq.bind(this.validate_,this)):this.$save_.click(fourSq.bind(this.save_,this)),this.$save_.removeClass("disabledButton").addClass("greenButton"),this.touched_=!0)},handleFreeFormEdit_:function(a){a=$(a.currentTarget).val();if(a===this.lastFreeFormText_)return!1;
this.lastFreeFormText_=a;var b=fourSq.util.HoursParser.parse(a);this.$freeFormError_.hide();b?fourSq.api.services.Venue.validateHours(this.venue_.id,fourSq.util.Hours.toParam(b),fourSq.bind(function(a){if(a.status!==fourSq.api.services.Venue.hoursValidationStatus.ERROR){this.timeframes_=b.timeframes;var d=$(_.map(a.hours.timeframes,function(a){return helpers.venue.hours.hoursItem({timeframe:a,editable:!0,blurred:!1})}).join(""));this.seasonalMode_?d.appendTo(this.$el.find(".seasonalHoursEditorList .fullHoursList").empty()):
d.appendTo(this.$el.find(".hoursEditorList .fullHoursList").empty());this.bindDeleteHoursButtons_(d);this.touch_();this.trigger("change");a.status!==fourSq.api.services.Venue.hoursValidationStatus.OK&&(this.$freeFormError_.text(a.message).show(),this.$freeFormError_.addClass("warning").removeClass("error").show())}else this.$freeFormError_.text(templates.fourSq.venue.hours.parseFailureMessage()).show()},this),fourSq.emptyFunction):a&&this.$freeFormError_.text(templates.fourSq.venue.hours.parseFailureMessage()).show()},
getApiHours:function(a){if(a&&this.showSeasonalHoursEditor_){a=fourSq.util.Hours.toParam({timeframes:this.timeframes_});var b=fourSq.util.Hours.toParam({timeframes:this.seasonalTimeframes_});return a+":"+b}return fourSq.util.Hours.toParam({timeframes:this.seasonalMode_?this.seasonalTimeframes_:this.timeframes_})},hasHours:function(){return!!(this.timeframes_&&0<this.timeframes_.length)},save:function(){fourSq.api.services.Venue.proposeEdit(this.venue_.id,{hours:this.getApiHours(!0),creatingView:this.creatingView_},
"Hours editor",fourSq.bind(function(){this.trigger("success")},this),fourSq.bind(function(a){this.trigger("failure",a)},this))},save_:function(){this.save()},validate_:function(){fourSq.api.services.Venue.validateHours(this.venue_.id,this.getApiHours(!1),fourSq.bind(function(a){this.timeframeEditor_.clear();this.onValidate_(this.getApiHours(!1),a);this.finish_()},this),fourSq.emptyFunction)},finish_:function(){this.timeframeEditor_.clear();this.onFinish_()},handleTimeframeAdd_:function(){if(this.seasonalMode_){this.seasonalTimeframes_.push(this.timeframeEditor_.asSeasonalTimeframe());
var a=this.timeframeEditor_.asSeasonalTemplate(!0);a.appendTo(this.$el.find(".seasonalHoursEditorList .fullHoursList"))}else this.timeframes_.push(this.timeframeEditor_.asTimeframe()),a=this.timeframeEditor_.asTemplate(!0),a.appendTo(this.$el.find(".hoursEditorList .fullHoursList"));this.trigger("change");this.bindDeleteHoursButtons_(a);this.$timeframeError_.hide();fourSq.api.services.Venue.validateHours(this.venue_.id,this.getApiHours(!1),fourSq.bind(function(a){a.status!==fourSq.api.services.Venue.hoursValidationStatus.ERROR?
(this.touch_(),a.status!==fourSq.api.services.Venue.hoursValidationStatus.OK&&(this.$timeframeError_.text(a.message),this.$timeframeError_.addClass("warning").removeClass("error").show())):(this.$timeframeError_.text(a.message),this.$timeframeError_.addClass("error").removeClass("warning").show())},this),fourSq.emptyFunction);return!1},bindDeleteHoursButtons_:function(a){a.find(".deleteHours").click(fourSq.bind(function(a){var c=$(a.currentTarget);a=c.parent(".timespan");var d=a.prevAll(".timespan").length;
if(this.seasonalMode_){var c=c.parent().parent(),e=c.prevAll(".seasonalRange").length;this.seasonalTimeframes_[e].timeframes.splice(d,1);0===this.seasonalTimeframes_[e].timeframes.length&&(c.remove(),this.seasonalTimeframes_.splice(e,1))}else this.timeframes_.splice(d,1);a.remove();this.trigger("change");this.touch_()},this))}});fourSq.views.HoursHelpFlyout=function(a){};
fourSq.views.HoursHelpFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){fourSq.views.HoursHelpFlyout.__super__.initialize.call(this,a);this.users_=a.users||[]},getRenderedContentsHtml:function(){return templates.fourSq.venue.hours.hoursHelp()}});fourSq.views.hours.CalendarDropdown=function(a){};
fourSq.views.hours.CalendarDropdown=fourSq.ui.View.extend({initialize:function(a){fourSq.views.hours.CalendarDropdown.__super__.initialize.call(this,a);this.selectEndDateByDefault_=a.selectEndDateByDefault},render:function(){this.getDays_(this.selectEndDateByDefault_);return this},decorate:function(){this.$el.find(".monthPicker").on("change",fourSq.bind(function(){this.trigger(this.getDays_(this.selectEndDateByDefault_))},this));return this},getDays_:function(a){var b=this.$el.find(".monthPicker").val(),
c=31;if("2"===b)c=28;else if("4"===b||"6"===b||"9"===b||"11"===b)c=30;var d=this.$el.find(".dayPicker");d.empty();_.each(_.range(1,c+1),function(e){var f=document.createElement("option");"2"===b&&e===c?(f.value=e,f.textContent="28/29"):f.textContent=e;e===c&&a&&(f.selected=!0);d.append(f)})}});
"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.helper&&(templates.fourSq.helper={});"undefined"==typeof templates.fourSq.helper.autocomplete&&(templates.fourSq.helper.autocomplete={});"undefined"==typeof templates.fourSq.helper.autocomplete.desktop&&(templates.fourSq.helper.autocomplete.desktop={});
templates.fourSq.helper.autocomplete.desktop.base=function(a,b){return'\x3cdiv class\x3d"autocomplete"\x3e\x3cdiv class\x3d"search"\x3e'+templates.fourSq.helper.autocomplete.desktop.search(a)+'\x3c/div\x3e\x3cdiv class\x3d"results hidden"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.helper.autocomplete.desktop.search=function(a,b){return'\x3cinput type\x3d"text" class\x3d"query" placeholder\x3d"'+(a.searchPlaceholder?soy.$$escapeHtml(a.searchPlaceholder):"Find a place")+'" /\x3e'+(a.hideLocation?"":'\x3cdiv class\x3d"location"\x3e\x3cdiv class\x3d"view"\x3e\x3cspan class\x3d"in"\x3ein \x3c/span\x3e\x3cspan class\x3d"name"\x3e'+soy.$$escapeHtml(a.initialLocation)+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"edit"\x3e\x3cinput type\x3d"text" class\x3d"name" value\x3d"'+
soy.$$escapeHtml(a.initialLocation)+'" /\x3e\x3c/div\x3e\x3c/div\x3e')};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.helper&&(templates.fourSq.helper={});"undefined"==typeof templates.fourSq.helper.autocomplete&&(templates.fourSq.helper.autocomplete={});"undefined"==typeof templates.fourSq.helper.autocomplete.desktop&&(templates.fourSq.helper.autocomplete.desktop={});
templates.fourSq.helper.autocomplete.desktop.venueResultsContainer=function(a,b){return'\x3cdiv class\x3d"venue resultList"\x3e'+templates.fourSq.helper.autocomplete.desktop.venueResults(a)+"\x3c/div\x3e"};
templates.fourSq.helper.autocomplete.desktop.venueResults=function(a,b){for(var c="",d=a.venues,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cdiv class\x3d"result" data-vid\x3d"v'+soy.$$escapeHtml(g.id)+'"\x3e'+helpers.venue.primaryCategoryIcon(soy.$$augmentMap(g,{size:32}))+'\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(g.name)+"\x3c/div\x3e"+(g.neighborhood?'\x3cdiv class\x3d"detail"\x3e'+soy.$$escapeHtml(g.neighborhood)+(g.categories&&0<g.categories.length?'\x3cspan class\x3d"categorySeparator"\x3e\x26middot;\x3c/span\x3e'+
soy.$$escapeHtml(g.categories[0].shortName):"")+"\x3c/div\x3e":g.location.address?'\x3cdiv class\x3d"detail"\x3e'+helpers.venue.addressWithCross(g)+"\x3c/div\x3e":"")+"\x3c/div\x3e");return c+=0==a.venues.length?'\x3cdiv class\x3d"noResults"\x3eNo places found\x3c/div\x3e':""};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.helper&&(templates.fourSq.helper={});"undefined"==typeof templates.fourSq.helper.autocomplete&&(templates.fourSq.helper.autocomplete={});"undefined"==typeof templates.fourSq.helper.autocomplete.desktop&&(templates.fourSq.helper.autocomplete.desktop={});"undefined"==typeof templates.fourSq.helper.autocomplete.desktop.user&&(templates.fourSq.helper.autocomplete.desktop.user={});
templates.fourSq.helper.autocomplete.desktop.user.resultsContainer=function(a,b){return'\x3cdiv class\x3d"user resultList"\x3e'+templates.fourSq.helper.autocomplete.desktop.user.results(a)+"\x3c/div\x3e"};
templates.fourSq.helper.autocomplete.desktop.user.results=function(a,b){for(var c="",d=a.users,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cdiv class\x3d"result" data-uid\x3d"u'+soy.$$escapeHtml(g.id)+'"\x3e'+helpers.user.xsmallImage(g)+'\x3cdiv class\x3d"name"\x3e'+helpers.user.fullName(g)+"\x3c/div\x3e\x3c/div\x3e");return c+=0==a.users.length?'\x3cdiv class\x3d"noResults"\x3eNo one found\x3c/div\x3e':""};fourSq.autocomplete.desktop.view.CompleterView=function(a){};
fourSq.autocomplete.desktop.view.CompleterView=fourSq.ui.View.extend({initialize:function(a){this.completerService_=a.completerService;this.resultSelector_=".result";this.selectedClass_="selected";this.$scrollParent_=a.$scrollParent||this.$el.parent();this.columns_=a.columns||1},decorate:function(){this.$el.on("mousemove",this.resultSelector_,fourSq.bind(this.onResultHover_,this));return this},reset:function(){this.completerService_.reset();this.clearResults_();this.stopLoading()},startLoading:function(){this.$el.addClass("loading");
this.clearResults_()},stopLoading:function(){this.$el.removeClass("loading")},performQuery:function(a){this.completerService_.performQuery(a)},hasSelection_:function(a,b){this.trigger(fourSq.autocomplete.desktop.view.CompleterView.Events.RESULT,{type:a,payload:b})},maybeUp:function(){return this.moveSelected_(-1,0)},maybeDown:function(){return this.moveSelected_(1,0)},maybeLeft:function(){return 1<this.columns_?this.moveSelected_(0,-1):!0},maybeRight:function(){return 1<this.columns_?this.moveSelected_(0,
1):!0},maybeNext:function(){return this.moveSelected_(0,1)},maybePrevious:function(){return this.moveSelected_(0,-1)},maybeConfirmSelection:function(){var a=this.$selected_();a.click();return 0<a.length},clearSelected:function(){this.$selected_().removeClass(this.selectedClass_)},hasSelection:function(){return 0<this.$selected_().length},onResultHover_:function(a){this.trigger(fourSq.autocomplete.desktop.view.CompleterView.Events.GAIN_FOCUS);this.select_(a.currentTarget)},getResultEls_:function(){return this.$el.find(this.resultSelector_).toArray()},
$selected_:function(){return this.$el.find(this.resultSelector_).filter("."+this.selectedClass_)},moveSelected_:function(a,b){var c=this.getResultEls_();if(0===c.length)return!1;var d=this.selectedIndexShift_(a,b,c);if(null===d)return this.clearSelected(),!1;this.select_(c[d]);return!0},selectedIndexShift_:function(a,b,c){var d=this.selectedIndex_(c);a=a*this.columns_+b;(b=0>a)&&0>d?(d=c.length,a=-1):!b&&0>d&&(d=-1,a=1);d+=a;return 0>d||d>=c.length?null:d},selectedIndex_:function(a){var b=this.$selected_().get(0);
a=_.map(a,function(a){return a===b});return _.indexOf(a,!0)},select_:function(a){this.clearSelected();a=$(a);a.addClass(this.selectedClass_);this.$scrollParent_&&fourSq.ui.util.scrollContainerTo(a,this.$scrollParent_)},clearResults_:fourSq.emptyFunction},{Events:{RESULT:"CompleterView:Result",GAIN_FOCUS:"CompleterView:GAIN_FOCUS"}});fourSq.autocomplete.desktop.core.AutocompleteView=function(a){};
fourSq.autocomplete.desktop.core.AutocompleteView=fourSq.ui.View.extend({initialize:function(a){a=a||{};this.minQueryLength_=a.minQueryLength||2;this.componentFactory_=a.componentFactory;this.completerFactory_=a.completerFactory;this.resultsView_=this.searchView_=null},setQuery:function(a){this.searchView_.setQuery(a)},render:function(){return this.decorate()},decorate:function(a){a=_.extend({search:".search",searchSelectors:void 0,results:".results"},a);var b=this.$el.find(a.search);this.searchView_=
this.searchView_||this.componentFactory_.createSearchView(b);this.searchView_.decorate(a.searchSelectors||{});a=this.$el.find(a.results);this.resultsView_=this.resultsView_||this.componentFactory_.createResultsView(a,this.completerFactory_);this.resultsView_.render();this.searchView_.on(fourSq.autocomplete.desktop.view.SearchView.Events.EMPTY,fourSq.bind(this.resultsView_.hide,this.resultsView_));this.searchView_.on(fourSq.autocomplete.desktop.view.SearchView.Events.QUERY,fourSq.bind(this.performQuery_,
this));this.searchView_.on(fourSq.autocomplete.desktop.view.SearchView.Events.LOST_FOCUS,fourSq.bind(this.resultsView_.hide,this.resultsView_));this.searchView_.on(fourSq.autocomplete.desktop.view.SearchView.Events.GOT_FOCUS,fourSq.bind(this.resultsView_.show,this.resultsView_));this.resultsView_.on(fourSq.autocomplete.desktop.view.ResultsView.Events.RESULT,function(a){this.trigger(fourSq.autocomplete.desktop.core.AutocompleteView.Events.RESULT,a)},this);this.resultsView_.hide();return this},performQuery_:function(a){a.query&&
a.query.length>=this.minQueryLength_?(this.resultsView_.show(),this.resultsView_.performQuery(a)):this.resultsView_.hide()},findVenue:function(a){this.searchView_.setQuery(a)},pickResult:function(a){this.resultsView_.pickResult(a)},getResultsView:function(){return this.resultsView_}},{Events:{RESULT:"AutocompleteView:RESULT"}});fourSq.autocomplete.desktop.core.CompleterFactory=function(a){};fourSq.autocomplete.desktop.core.CompleterFactory=fourSq.Class.extend({initialize:function(a){this.options=a||{}},getCompleters:function(a){return[]}});fourSq.autocomplete.desktop.core.CompleterService=function(a,b){};
fourSq.autocomplete.desktop.core.CompleterService=fourSq.EventTarget.extend({minQueryLength_:2,initialize:function(){this.currentQueries_=[]},performQuery:function(a){if(!(fourSq.isUndefinedOrNull(a.query)||a.query.length<this.minQueryLength_)){var b=fourSq.curry(this.preprocessResults_,this,a),c=fourSq.curry(this.onError_,this,a);this.currentQueries_.push(a);this.runQuery_(a,b,c)}},reset:function(){this.currentQueries_=[]},runQuery_:fourSq.abstractMethod,preprocessResults_:function(a,b,c){return fourSq.bind(function(d){_.contains(this.currentQueries_,
a)&&b.call(c,d);this.removeQuery_(a)},this)},onError_:function(a){_.contains(this.currentQueries_,a)&&this.trigger(fourSq.autocomplete.desktop.core.CompleterService.Events.ERROR);this.removeQuery_(a)},removeQuery_:function(a){a=_.indexOf(this.currentQueries_,a);-1<a&&this.currentQueries_.splice(a,1)}},{Events:{ERROR:"CompleterService:ERROR"}});fourSq.autocomplete.desktop.core.ComponentFactory=function(a,b){};
fourSq.autocomplete.desktop.core.ComponentFactory=fourSq.Class.extend({createLocationLookupService:function(){return new fourSq.autocomplete.desktop.core.LocationLookupService},createResultNavigationController:function(){return new fourSq.autocomplete.desktop.core.ResultNavigationController},createSearchView:function(a){return new fourSq.autocomplete.desktop.view.SearchView({el:a,componentFactory:this})},createResultsView:function(a,b){return new fourSq.autocomplete.desktop.view.ResultsView({el:a,
componentFactory:this,completerFactory:b})},createSearchLocationView:function(a){return 0===a.length?new fourSq.autocomplete.desktop.view.NoOpSearchLocationView:new fourSq.autocomplete.desktop.view.SearchLocationViewImpl({el:a,componentFactory:this})},createQueryField:function(a){return new fourSq.autocomplete.desktop.view.QueryField({el:a,componentFactory:this})}});fourSq.autocomplete.desktop.core.LocationLookupService=function(a,b){};
fourSq.autocomplete.desktop.core.LocationLookupService=fourSq.EventTarget.extend({initialize:function(){this.latLng_=this.name_=null},updateLocation:function(a){this.name_=a},getLatLng:function(a){a(this.latLng_)},getLatLngOrNull:function(){return this.latLng_},error_:function(){this.trigger(fourSq.autocomplete.desktop.core.LocationLookupService.Events.ERROR)},update_:function(a){this.trigger(fourSq.autocomplete.desktop.core.LocationLookupService.Events.UPDATED,a)},updating_:function(){this.trigger(fourSq.autocomplete.desktop.core.LocationLookupService.Events.UPDATING)}},
{Events:{ERROR:"LocationLookupService:ERROR",UPDATING:"LocationLookupService:UPDATING",UPDATED:"LocationLookupService:UPDATED"}});fourSq.autocomplete.desktop.core.ResultNavigationController=function(a,b){};
fourSq.autocomplete.desktop.core.ResultNavigationController=fourSq.EventTarget.extend({initialize:function(){this.isEnabled_=!0},decorate:function(){$(window).keyup(fourSq.bind(this.onKeyUp_,this));return this},enable:function(){this.isEnabled_=!0},disable:function(){this.isEnabled_=!1},onKeyUp_:function(a){if(this.isEnabled_)switch(a.keyCode){case fourSq.util.KeyConstants.UP:this.trigger(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.UP);break;case fourSq.util.KeyConstants.DOWN:this.trigger(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.DOWN);
break;case fourSq.util.KeyConstants.LEFT:this.trigger(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.LEFT);break;case fourSq.util.KeyConstants.RIGHT:this.trigger(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.RIGHT);break;case fourSq.util.KeyConstants.ENTER:this.trigger(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.SELECT);break;case fourSq.util.KeyConstants.ESCAPE:this.trigger(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.CANCEL)}}},
{Events:{UP:"ResultNavigationController:UP",DOWN:"ResultNavigationController:DOWN",LEFT:"ResultNavigationController:LEFT",RIGHT:"ResultNavigationController:RIGHT",SELECT:"ResultNavigationController:SELECT",CANCEL:"ResultNavigationController:CANCEL"}});fourSq.autocomplete.desktop.view.SearchLocationView=function(a,b){};fourSq.autocomplete.desktop.view.SearchLocationView=fourSq.ui.View.extend({decorate:fourSq.emptyFunction,getLatLng:fourSq.abstractMethod,hasFocus:fourSq.abstractMethod},{Events:{RESCIND_FOCUS:"SearchLocationView:RESCIND_FOCUS",UPDATING:"SearchLocationView:UPDATING",UPDATED:"SearchLocationView:UPDATED",LOST_FOCUS:"SearchLocationView:LOST_FOCUS"}});fourSq.autocomplete.desktop.view.SearchLocationViewImpl=function(a){};
fourSq.autocomplete.desktop.view.SearchLocationViewImpl=fourSq.autocomplete.desktop.view.SearchLocationView.extend({initialize:function(a){a=a||{componentFactory:void 0};this.componentFactory_=a.componentFactory||new fourSq.autocomplete.desktop.core.ComponentFactory;this.$editName_=this.$viewName_=null;this.isEditing_=!1;this.locationLookupService_=this.componentFactory_.createLocationLookupService()},decorate:function(a){a=_.extend({viewName:".view .name",editName:".edit .name"},a);this.$viewName_=
this.$el.find(a.viewName);this.$editName_=this.$el.find(a.editName);this.$viewName_.click(fourSq.bind(this.editMode_,this));this.$editName_.blur(fourSq.bind(this.submitEdit_,this));this.$editName_.keyup(fourSq.bind(this.keyPressed_,this));this.locationLookupService_.on(fourSq.autocomplete.desktop.core.LocationLookupService.Events.ERROR,this.failedLocationLookup_,this);this.locationLookupService_.on(fourSq.autocomplete.desktop.core.LocationLookupService.Events.UPDATING,this.updatingLocation_,this);
this.locationLookupService_.on(fourSq.autocomplete.desktop.core.LocationLookupService.Events.UPDATED,this.updatedLocation_,this);this.locationLookupService_.updateLocation(this.$editName_.val());return this},getLatLng:function(){return this.locationLookupService_.getLatLngOrNull()},hasFocus:function(){return this.isEditing_},editMode_:function(){this.$el.addClass("editing");this.$editName_.focus();this.isEditing_=!0},cancelEdit_:function(){var a=this.$viewName_.text();this.$editName_.val(a);this.viewMode_()},
submitEdit_:function(){var a=this.$editName_.val();""===fourSq.util.trim(a)?this.cancelEdit_():(this.isCurrentLocation_(a)||this.locationLookupService_.updateLocation(a),this.$viewName_.text(a),this.viewMode_())},viewMode_:function(){this.$el.removeClass("editing");this.isEditing_=!1;this.trigger(fourSq.autocomplete.desktop.view.SearchLocationView.Events.LOST_FOCUS)},isCurrentLocation_:function(a){var b=this.$viewName_.text();return fourSq.util.trim(b)===fourSq.util.trim(a)},keyPressed_:function(a){a.keyCode===
fourSq.util.KeyConstants.ENTER?(a.preventDefault(),this.submitEdit_(),this.trigger(fourSq.autocomplete.desktop.view.SearchLocationView.Events.RESCIND_FOCUS)):a.keyCode===fourSq.util.KeyConstants.ESCAPE&&(a.preventDefault(),this.cancelEdit_(),this.trigger(fourSq.autocomplete.desktop.view.SearchLocationView.Events.RESCIND_FOCUS))},failedLocationLookup_:function(){},updatedLocation_:function(a){this.isEditing_||(this.$viewName_.text(a.name),this.$editName_.val(a.name));this.trigger(fourSq.autocomplete.desktop.view.SearchLocationView.Events.UPDATED,
a)},updatingLocation_:function(a){this.trigger(fourSq.autocomplete.desktop.view.SearchLocationView.Events.UPDATING)}},{Events:{RESCIND_FOCUS:"SearchLocationView:RESCIND_FOCUS",UPDATING:"SearchLocationView:UPDATING",UPDATED:"SearchLocationView:UPDATED",LOST_FOCUS:"SearchLocationView:LOST_FOCUS"}});fourSq.autocomplete.desktop.view.NoOpSearchLocationView=function(a,b){};fourSq.autocomplete.desktop.view.NoOpSearchLocationView=fourSq.autocomplete.desktop.view.SearchLocationView.extend({getLatLng:function(){return{lat:40.723537,lng:-74.005313}},hasFocus:function(){return!1}});fourSq.autocomplete.desktop.view.QueryField=function(a,b){};
fourSq.autocomplete.desktop.view.QueryField=fourSq.ui.View.extend({initialize:function(){this.isTyping_=!1;this.currentQuery_="";this.debouncedDoQuery_=_.debounce(fourSq.bind(this.doQuery_,this),fourSq.autocomplete.desktop.view.QueryField.BOUNCE_DELAY)},decorate:function(){this.$el.keyup(fourSq.bind(this.onKeyUp_,this));this.$el.on("paste",fourSq.bind(this.onPaste_,this));this.$el.blur(fourSq.bind(this.onBlur_,this));this.$el.focus(fourSq.bind(this.onFocus_,this));return this},getQuery:function(){return this.currentQuery_},
setQuery:function(a){this.$el.val(a);this.doQuery_()},hasFocus:function(){return this.$el.is(":focus")},onKeyUp_:function(a){a.keyCode===fourSq.util.KeyConstants.ESCAPE?this.$el.blur():fourSq.util.KeyConstants.isVisible(a.keyCode)&&(this.isTyping_||(this.isTyping_=!0,this.trigger(fourSq.autocomplete.desktop.view.QueryField.Events.TYPING)),this.currentQuery_=null,this.debouncedDoQuery_())},onPaste_:function(){this.currentQuery_=null;this.debouncedDoQuery_()},onBlur_:function(){this.trigger(fourSq.autocomplete.desktop.view.QueryField.Events.LOST_FOCUS)},
onFocus_:function(){this.trigger(fourSq.autocomplete.desktop.view.QueryField.Events.GOT_FOCUS)},doQuery_:function(){this.isTyping_=!1;this.currentQuery_=fourSq.util.trim(this.$el.val());""!==this.currentQuery_?this.trigger(fourSq.autocomplete.desktop.view.QueryField.Events.QUERY,this.currentQuery_):this.trigger(fourSq.autocomplete.desktop.view.QueryField.Events.EMPTY)}},{Events:{EMPTY:"QueryField:EMPTY",TYPING:"QueryField:TYPING",QUERY:"QueryField:QUERY",LOST_FOCUS:"QueryField:LOST_FOCUS",GOT_FOCUS:"QueryField:GOT_FOCUS"},
BOUNCE_DELAY:300});fourSq.autocomplete.desktop.view.ResultsView=function(a,b){};
fourSq.autocomplete.desktop.view.ResultsView=fourSq.ui.View.extend({initialize:function(a){var b=a.completerFactory||new fourSq.autocomplete.desktop.core.CompleterFactory;this.componentFactory_=a.componentFactory||new fourSq.autocomplete.desktop.core.ComponentFactory;this.completerViews_=b.getCompleters({$scrollParent:this.$el});this.currentlyNavigatingCompleterViewIndex_=this.resultNavigationController_=null},render:function(){this.resultNavigationController_=this.resultNavigationController_||this.componentFactory_.createResultNavigationController();
_.each(this.completerViews_,fourSq.bind(function(a){a.render();this.$el.append(a.$el)},this));return this.decorate()},decorate:function(){_.each(this.completerViews_,fourSq.bind(function(a,b){a.on(fourSq.autocomplete.desktop.view.CompleterView.Events.RESULT,function(a){this.trigger(fourSq.autocomplete.desktop.view.ResultsView.Events.RESULT,a)},this);a.on(fourSq.autocomplete.desktop.view.CompleterView.Events.GAIN_FOCUS,fourSq.curry(this.completerGainFocus_,this,b))},this));this.resultNavigationController_.on(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.UP,
fourSq.bind(this.maybeUp_,this));this.resultNavigationController_.on(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.DOWN,fourSq.bind(this.maybeDown_,this));this.resultNavigationController_.on(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.LEFT,fourSq.bind(this.maybeLeft_,this));this.resultNavigationController_.on(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.RIGHT,fourSq.bind(this.maybeRight_,this));this.resultNavigationController_.on(fourSq.autocomplete.desktop.core.ResultNavigationController.Events.SELECT,
fourSq.bind(this.maybeConfirmSelection_,this));this.resultNavigationController_.decorate();return this},reset:function(){_.each(this.completerViews_,function(a){a.reset()})},hide:function(){this.isHidden()||(this.$el.addClass("hidden"),this.resultNavigationController_.disable(),this.reset())},show:function(){this.isHidden()&&(this.$el.removeClass("hidden"),this.resultNavigationController_.enable(),this.reset())},isHidden:function(){return this.$el.hasClass("hidden")},setLoading:function(){_.each(this.completerViews_,
function(a){a.startLoading()})},performQuery:function(a){_.each(this.completerViews_,function(b){b.performQuery(a)})},pickResult:function(a){this.maybeClearSelection_();for(var b=1;b<=a;b++)this.maybeNext_();this.maybeConfirmSelection_()},completerGainFocus_:function(a){null!==this.currentlyNavigatingCompleterViewIndex_&&this.currentlyNavigatingCompleterViewIndex_!==a&&this.currentlyNavigatingCompleterView_().clearSelected();this.currentlyNavigatingCompleterViewIndex_=a},currentlyNavigatingCompleterView_:function(a){a=
a||{startAtBottom:void 0};null===this.currentlyNavigatingCompleterViewIndex_&&_.each(this.completerViews_,fourSq.bind(function(a,c){a.hasSelection()&&(this.currentlyNavigatingCompleterViewIndex_=c)},this));null===this.currentlyNavigatingCompleterViewIndex_&&(this.currentlyNavigatingCompleterViewIndex_=a.startAtBottom?this.completerCount_()-1:0);return this.completerViews_[this.currentlyNavigatingCompleterViewIndex_]},incrementCurrentlyNavigatingCompleterView_:function(){this.currentlyNavigatingCompleterViewIndex_>=
this.completerCount_()-1?this.currentlyNavigatingCompleterViewIndex_=null:this.currentlyNavigatingCompleterViewIndex_++},decrementCurrentlyNavigatingCompleterView_:function(){0===this.currentlyNavigatingCompleterViewIndex_?this.currentlyNavigatingCompleterViewIndex_=null:this.currentlyNavigatingCompleterViewIndex_--},maybeClearSelection_:function(){null!==this.currentlyNavigatingCompleterViewIndex_&&(this.completerViews_[this.currentlyNavigatingCompleterViewIndex_].clearSelected(),this.currentlyNavigatingCompleterViewIndex_=
null)},maybeUp_:function(){for(var a=0;a<this.completerCount_()&&!this.currentlyNavigatingCompleterView_({startAtBottom:!0}).maybeUp();a++)this.decrementCurrentlyNavigatingCompleterView_()},maybeDown_:function(){for(var a=0;a<this.completerCount_()&&!this.currentlyNavigatingCompleterView_().maybeDown();a++)this.incrementCurrentlyNavigatingCompleterView_()},maybeNext_:function(){for(var a=0;a<this.completerCount_()&&!this.currentlyNavigatingCompleterView_({startAtBottom:!0}).maybeNext();a++)this.decrementCurrentlyNavigatingCompleterView_()},
maybePrevious_:function(){for(var a=0;a<this.completerCount_()&&!this.currentlyNavigatingCompleterView_().maybePrevious();a++)this.incrementCurrentlyNavigatingCompleterView_()},maybeLeft_:function(){var a=this.currentlyNavigatingCompleterView_();a&&a.maybeLeft()},maybeRight_:function(){var a=this.currentlyNavigatingCompleterView_();a&&a.maybeRight()},maybeConfirmSelection_:function(){var a=this.currentlyNavigatingCompleterView_();a&&a.maybeConfirmSelection()},completerCount_:function(){return this.completerViews_.length}},
{Events:{RESULT:"ResultsView:Result"}});fourSq.autocomplete.desktop.view.SearchView=function(a){};
fourSq.autocomplete.desktop.view.SearchView=fourSq.ui.View.extend({initialize:function(a){a=a||{componentFactory:void 0};this.componentFactory_=a.componentFactory||new fourSq.autocomplete.desktop.core.ComponentFactory;this.$query_=this.queryField_=this.searchLocationView_=null;this.isPreparing_=!1},decorate:function(a){a=_.extend({query:".query",location:".location",locationSelectors:void 0},a);var b=this.$el.find(a.location);this.searchLocationView_=this.searchLocationView_||this.componentFactory_.createSearchLocationView(b);
this.searchLocationView_.decorate(a.locationSelectors);this.$query_=this.$el.find(a.query);this.queryField_=this.queryField_||this.componentFactory_.createQueryField(this.$query_);this.queryField_.decorate();this.searchLocationView_.on(fourSq.autocomplete.desktop.view.SearchLocationView.Events.RESCIND_FOCUS,this.focusOnQuery_,this);this.searchLocationView_.on(fourSq.autocomplete.desktop.view.SearchLocationView.Events.UPDATING,this.maybePreparing_,this);this.searchLocationView_.on(fourSq.autocomplete.desktop.view.SearchLocationView.Events.UPDATED,
this.maybePrepared_,this);this.searchLocationView_.on(fourSq.autocomplete.desktop.view.SearchLocationView.Events.LOST_FOCUS,this.maybeLostFocus_,this);this.queryField_.on(fourSq.autocomplete.desktop.view.QueryField.Events.EMPTY,fourSq.curry(this.trigger,this,fourSq.autocomplete.desktop.view.SearchView.Events.EMPTY));this.queryField_.on(fourSq.autocomplete.desktop.view.QueryField.Events.TYPING,this.maybePreparing_,this);this.queryField_.on(fourSq.autocomplete.desktop.view.QueryField.Events.QUERY,this.maybePrepared_,
this);this.queryField_.on(fourSq.autocomplete.desktop.view.QueryField.Events.GOT_FOCUS,this.gotFocus_,this);this.queryField_.on(fourSq.autocomplete.desktop.view.QueryField.Events.LOST_FOCUS,this.maybeLostFocus_,this);return this},setQuery:function(a){this.queryField_.setQuery(a)},maybeLostFocus_:function(){_.delay(fourSq.bind(function(){this.queryField_.hasFocus()||this.searchLocationView_.hasFocus()||this.trigger(fourSq.autocomplete.desktop.view.SearchView.Events.LOST_FOCUS)},this),fourSq.autocomplete.desktop.view.SearchView.FOCUS_CHECK_DELAY)},
gotFocus_:function(){this.trigger(fourSq.autocomplete.desktop.view.SearchView.Events.GOT_FOCUS);this.maybePrepared_()},maybePreparing_:function(){this.isPreparing_||(this.isPreparing_=!0,this.trigger(fourSq.autocomplete.desktop.view.SearchView.Events.PREPARING))},maybePrepared_:function(){var a=this.queryField_.getQuery(),b=null===a,c=this.searchLocationView_.getLatLng();b||null===c||(this.isPreparing_=!1,this.trigger(fourSq.autocomplete.desktop.view.SearchView.Events.QUERY,{query:a,ll:c}))},focusOnQuery_:function(){this.$query_.focus()}},
{Events:{PREPARING:"SearchView:PREPARING",QUERY:"SearchView:QUERY",LOST_FOCUS:"SearchView:LOST_FOCUS",GOT_FOCUS:"SearchView:GOT_FOCUS",EMPTY:"SearchView:EMPTY"},FOCUS_CHECK_DELAY:200});fourSq.autocomplete.desktop.venue.ComponentFactoryWithGeocoderService=function(a,b){};fourSq.autocomplete.desktop.venue.ComponentFactoryWithGeocoderService=fourSq.autocomplete.desktop.core.ComponentFactory.extend({createLocationLookupService:function(){return new fourSq.autocomplete.desktop.venue.LocationLookupGeocoderService}});fourSq.autocomplete.desktop.venue.LocationLookupGeocoderService=function(a,b){};
fourSq.autocomplete.desktop.venue.LocationLookupGeocoderService=fourSq.autocomplete.desktop.core.LocationLookupService.extend({initialize:function(){fourSq.autocomplete.desktop.venue.LocationLookupGeocoderService.__super__.initialize.call(this);this.isFetchingQuery_=null},updateLocation:function(a){this.isFetchingQuery_=a;this.name_=this.latLng_=null;fourSq.api.services.Geo.geocode({query:a},fourSq.curry(this.geocodeSuccess_,this,a),fourSq.curry(this.geocodeError_,this,a));this.updating_()},getLatLng:function(a){if(this.isFetchingQuery){var b=
_.once(function(b){fourSq.isDefinedAndNotNull(b&&b.ll)?a(b.ll):a(null)});this.on(fourSq.autocomplete.desktop.core.LocationLookupService.Events.UPDATED,b);this.on(fourSq.autocomplete.desktop.core.LocationLookupService.Events.ERROR,b)}else _.defer(fourSq.curry(a,null,this.latLng_))},geocodeSuccess_:function(a,b){if(this.isCurrentQuery_(a)){var c=fourSq.api.models.companion.geo.GeocodeResponseUtil.bestInterpretation(b);c?(this.isFetching_=null,c=c.feature,this.latLng_=c.geometry.center,this.name_=c.name,
this.update_({name:this.name_,ll:this.latLng_})):this.geocodeError_(a)}},geocodeError_:function(a){this.isCurrentQuery_(a)&&(this.isFetching_=null,this.error_())},isCurrentQuery_:function(a){return a===this.isFetchingQuery_}});fourSq.autocomplete.desktop.venue.VenueCompleterService=function(a){};
fourSq.autocomplete.desktop.venue.VenueCompleterService=fourSq.autocomplete.desktop.core.CompleterService.extend({initialize:function(a){a=a||{};this.limit_=a.limit||fourSq.autocomplete.desktop.venue.VenueCompleterService.DEFAULT_RESULT_LIMIT;this.withFallback_=!!a.withFallback},runQuery_:function(a,b,c){var d=b(this.processResults_,this),e=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a.ll),f=5<this.limit_?this.limit_:void 0,g=fourSq.bind(function(){fourSq.api.services.Venue.search({ll:e,
query:a.query,limit:f},d,c)},this);fourSq.api.services.Search.venueAutocompletion({ll:e,query:a.query,isMobile:!1,limit:f,group:a.group,radius:a.radius,supervenueOnly:a.supervenueOnly},fourSq.bind(function(a){0===a.length&&this.withFallback_?g():d(a)},this),c)},processResults_:function(a){this.trigger(fourSq.autocomplete.desktop.venue.VenueCompleterService.Events.VENUE_RESULTS,a)}},{Events:{VENUE_RESULTS:"VenueCompleterService:VENUE_RESULTS"},DEFAULT_RESULT_LIMIT:20});fourSq.autocomplete.desktop.venue.VenueCompleterView=function(a){};
fourSq.autocomplete.desktop.venue.VenueCompleterView=fourSq.autocomplete.desktop.view.CompleterView.extend({initialize:function(a){fourSq.autocomplete.desktop.venue.VenueCompleterView.__super__.initialize.call(this,a);this.venues_=[];this.venueCompleterService_=a.completerService},render:function(){var a=templates.fourSq.helper.autocomplete.desktop.venueResultsContainer({venues:this.venues_});this.setEl_($(a));return this.decorate()},renderResults_:function(){var a=templates.fourSq.helper.autocomplete.desktop.venueResults({venues:this.venues_});
this.$el.empty().append(a);fourSq.retina.isRetina()&&(new fourSq.ui.RetinaFairy({el:this.$el})).resprinkle()},decorate:function(){fourSq.autocomplete.desktop.venue.VenueCompleterView.__super__.decorate.call(this);this.venueCompleterService_.on(fourSq.autocomplete.desktop.venue.VenueCompleterService.Events.VENUE_RESULTS,function(a){this.venues_=a;this.renderResults_();this.stopLoading()},this);this.$el.on("click",".result",fourSq.bind(function(a){var b=$(a.currentTarget).data("vid"),b=_.isString(b)?
b.replace(/^v/,""):"";a=_.find(this.venues_,function(a){return a.id===b});this.hasSelection_(fourSq.autocomplete.desktop.venue.VenueCompleterView.RESULT_TYPE,a)},this));return this},clearResults_:function(){this.venues_=[];this.renderResults_()}},{RESULT_TYPE:"venue"});fourSq.autocomplete.desktop.venue.VenueOnlyCompleterFactory=function(a){};
fourSq.autocomplete.desktop.venue.VenueOnlyCompleterFactory=fourSq.autocomplete.desktop.core.CompleterFactory.extend({initialize:function(a){fourSq.autocomplete.desktop.venue.VenueOnlyCompleterFactory.__super__.initialize.call(this,a);this.withFallback_=!(!a||!a.withFallback)},getCompleters:function(a){return[this.createVenueCompleterView_(a)]},createVenueCompleterService_:function(){return new fourSq.autocomplete.desktop.venue.VenueCompleterService({limit:this.options.resultLimit,withFallback:this.withFallback_})},
createVenueCompleterView_:function(a){return new fourSq.autocomplete.desktop.venue.VenueCompleterView({completerService:this.createVenueCompleterService_(),$scrollParent:a.$scrollParent,columns:this.options.columns})}});fourSq.autocomplete.desktop.VenueAutocompleteView=function(a){};fourSq.autocomplete.desktop.VenueAutocompleteView=fourSq.autocomplete.desktop.core.AutocompleteView.extend({initialize:function(a){fourSq.autocomplete.desktop.VenueAutocompleteView.__super__.initialize.call(this,a);this.componentFactory_=this.componentFactory_||new fourSq.autocomplete.desktop.venue.ComponentFactoryWithGeocoderService;this.completerFactory_=this.completerFactory_||new fourSq.autocomplete.desktop.venue.VenueOnlyCompleterFactory}});
(function(){var a=L.Marker.prototype.onAdd,b=L.Marker.prototype.onRemove;L.Marker.mergeOptions({bounceOnAdd:!1,bounceOnAddOptions:{duration:1E3,height:-1},bounceOnAddCallback:function(){}});L.Marker.include({_toPoint:function(a){return this._map.latLngToContainerPoint(a)},_toLatLng:function(a){return this._map.containerPointToLatLng(a)},_motionStep:function(a){var b=this,e=new Date;b._intervalId=setInterval(function(){var f=(new Date-e)/a.duration;1<f&&(f=1);var g=a.delta(f);a.step(g);1===f&&(a.end(),
clearInterval(b._intervalId))},a.delay||10)},_bounceMotion:function(a,b,e){var f=L.latLng(this._origLatlng),g=this._dropPoint.y,h=this._dropPoint.x,l=this._point.y-g,p=this;this._motionStep({delay:10,duration:b||1E3,delta:a,step:function(a){p._dropPoint.y=g+l*a-(p._map.project(p._map.getCenter()).y-p._origMapCenter.y);p._dropPoint.x=h-(p._map.project(p._map.getCenter()).x-p._origMapCenter.x);p.setLatLng(p._toLatLng(p._dropPoint))},end:function(){p.setLatLng(f);"function"===typeof e&&e()}})},_easeOutBounce:function(a){return a<
1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounce:function(a,b){this._origLatlng=this.getLatLng();this._bounce(a,b)},_bounce:function(a,b){"function"===typeof a&&(b=a,a=null);a=a||{duration:1E3,height:-1};"number"===typeof a&&(a.duration=a,a.height=b);this._origMapCenter=this._map.project(this._map.getCenter());this._dropPoint=this._getDropPoint(a.height);this._bounceMotion(this._easeOutBounce,a.duration,b)},_getDropPoint:function(a){this._point=
this._toPoint(this._origLatlng);a=void 0===a||0>a?this._toPoint(this._map.getBounds()._northEast).y:this._point.y-a;return new L.Point(this._point.x,a)},onAdd:function(b){this._map=b;this._origLatlng=this._latlng;!0===this.options.bounceOnAdd&&("undefined"!==typeof this.options.bounceOnAddDuration&&(this.options.bounceOnAddOptions.duration=this.options.bounceOnAddDuration),"undefined"!==typeof this.options.bounceOnAddHeight&&(this.options.bounceOnAddOptions.height=this.options.bounceOnAddHeight),
this._dropPoint=this._getDropPoint(this.options.bounceOnAddOptions.height),this.setLatLng(this._toLatLng(this._dropPoint)));a.call(this,b);!0===this.options.bounceOnAdd&&this._bounce(this.options.bounceOnAddOptions,this.options.bounceOnAddCallback)},onRemove:function(a){clearInterval(this._intervalId);b.call(this,a)}})})();"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venue&&(templates.fourSq.venue={});"undefined"==typeof templates.fourSq.venue.editing&&(templates.fourSq.venue.editing={});templates.fourSq.venue.editing.mapHelpClickToPlacePin=function(a,b){return"Click to place a pin and update the venue's location on the map"};templates.fourSq.venue.editing.mapHelpZoomInToPlacePin=function(a,b){return"Enter an address above, or zoom in further in on the map to place a pin"};
templates.fourSq.venue.editing.mapHelpDragPinToUpdate=function(a,b){return"Drag the pin to update the venue's location on the map"};templates.fourSq.venue.editing.mapHelpPleaseZoomIn=function(a,b){return"Zoom in more to place a pin"};templates.fourSq.venue.editing.mapHelpRemovedPin=function(a,b){return"We removed the pin you added. Click on the map to drop a new pin"};templates.fourSq.venue.editing.mapHelpMoveCorrection=function(a,b){return"Move the map pin if it needs to be corrected"};
templates.fourSq.venue.editing.mapEditor=function(a,b){return'\x3cdiv class\x3d"mapEditor"\x3e\x3cdiv class\x3d"mapHelp"\x3e'+soy.$$escapeHtml(null!=a.initialHelp?a.initialHelp:"")+'\x3c/div\x3e\x3cdiv id\x3d"'+soy.$$escapeHtml(a.id)+'"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venue.editing.venueDisplay=function(a,b){var c='\x3cdiv class\x3d"venueDisplay"\x3e\x3cspan class\x3d"venueName"\x3e'+soy.$$escapeHtml(a.venue.name)+"\x3c/span\x3e",d=helpers.category.iconOrDefault({icon:null==a.venue?null:null==a.venue.categories[0]?null:a.venue.categories[0].icon});return c+='\x3cspan class\x3d"venueIcon"\x3e'+soy.$$escapeHtml(d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d))+"\x3c/span\x3e"+(a.showAddressImporter?
'\x3cspan class\x3d"link addressImporter"\x3ecopy address from this place\x3c/a\x3e':"")+'\x3cspan class\x3d"unselect"\x3e\x3c/span\x3e\x3c/div\x3e'};fourSq.venue.editing.MapEditor=function(a){};
fourSq.venue.editing.MapEditor=fourSq.ui.View.extend({initialize:function(a){fourSq.venue.editing.MapEditor.__super__.initialize.call(this,a);var b=fourSq.api.models.companion.geo.LatLngUtil.toLeaflet(a.initialLatLng||fourSq.api.models.companion.geo.LatLngUtil.latLng(0,0));this.map_=fourSq.map.MapGenerator.generate(a.mapId,{center:b,zoom:a.initialZoom||13},{enableSatelliteLayer:!0});this.marker_=null;this.autoRemoveMarker_=!!a.autoRemoveMarker;this.minimumDistanceForRecentering_=a.minimumDistanceForRecentering;
this.userModifiedPin_=this.didPlacePin_=!1;this.clickTimeout_=null;this.map_.on("click",fourSq.bind(this.onMapClick_,this));this.map_.on("zoomend",fourSq.bind(this.onMapZoomEnd_,this));this.map_.on("dragend",fourSq.bind(this.onMapDragEnd_,this));var c=fourSq.curry(this.trigger,this,fourSq.venue.editing.MapEditor.Events.MAP_MOVED);this.map_.on("move",c);this.map_.on("zoomend",c);this.$mapHelp_=this.$el.find(".mapHelp");a.placePinInitially&&this.placePin_(b,!1)},getMap:function(){return this.map_},
didPlacePin:function(){return this.didPlacePin_},getCenter:function(){return fourSq.api.models.companion.geo.LatLngUtil.fromLeaflet(this.map_.getCenter())},canPlacePin_:function(){return 15<=this.map_.getZoom()},markerInViewport_:function(){return this.marker_&&this.map_.getBounds().contains(this.marker_.getLatLng())},clearClickTimeout_:function(){fourSq.isNull(this.clickTimeout_)||(window.clearTimeout(this.clickTimeout_),this.clickTimeout_=null)},onMapClick_:function(a){fourSq.isNull(this.clickTimeout_)?
this.clickTimeout_=window.setTimeout(fourSq.bind(function(){this.clearClickTimeout_();this.onSingleClick_(a.latlng)},this),300):this.clearClickTimeout_()},onMapDragEnd_:function(){this.didPlacePin_?this.markerInViewport_()?this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpDragPinToUpdate()):this.autoRemoveMarker_&&(this.removePin(),this.updateMapError_(templates.fourSq.venue.editing.mapHelpRemovedPin())):this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpClickToPlacePin())},onMapZoomEnd_:function(){var a=
this.canPlacePin_();this.didPlacePin_&&!a?this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpClickToPlacePin()):this.didPlacePin_&&a?this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpDragPinToUpdate()):this.canPlacePin_()?this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpClickToPlacePin()):this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpZoomInToPlacePin())},removePin:function(){this.map_.removeLayer(this.marker_);this.marker_=null;this.didPlacePin_=!1},removeLayer:function(a){this.map_.removeLayer(a)},
getCustomIcon:function(){return new L.Icon.Default.extend({_getIconUrl:function(a){return"shadow"===a?"https://ss1.4sqi.net/img/leaflet/images/marker-shadow-266e0e95e0a6e5a217da66c114320f52.png":"https://ss0.4sqi.net/img/leaflet/images/marker-icon-ed9aa0b76a58a5a016efad37b874348e.png"}})},makeMarker_:function(a,b){var c=L.Icon.Default.extend({_getIconUrl:function(a){return"shadow"===a?"https://ss1.4sqi.net/img/leaflet/images/marker-shadow-266e0e95e0a6e5a217da66c114320f52.png":"https://ss0.4sqi.net/img/leaflet/images/marker-icon-ed9aa0b76a58a5a016efad37b874348e.png"}});
return new L.Marker(a,{draggable:!0,bounceOnAdd:b,bounceOnAddOptions:fourSq.venue.editing.MapEditor.BounceParams,icon:new c,alt:"marker icon"})},setUserModifiedPin_:function(){this.userModifiedPin_||(this.userModifiedPin_=!0,this.trigger(fourSq.venue.editing.MapEditor.Events.USER_MODIFIED_PIN))},placePin_:function(a,b){b&&this.setUserModifiedPin_();if(b&&!this.canPlacePin_())return this.updateMapError_(templates.fourSq.venue.editing.mapHelpPleaseZoomIn()),!1;fourSq.isNull(this.marker_)?(this.marker_=
this.makeMarker_(a,b),this.map_.addLayer(this.marker_),this.registerListenersOnMarker_()):this.marker_.setLatLng(a);this.didPlacePin_=!0;this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpDragPinToUpdate());this.trigger(fourSq.venue.editing.MapEditor.Events.LOCATION_UPDATED);return!0},onSingleClick_:function(a){this.placePin_(a,!0)&&this.map_.panTo(a)},getLatLng:function(){return this.marker_&&fourSq.api.models.companion.geo.LatLngUtil.fromLeaflet(this.marker_.getLatLng())},setLatLng:function(a,
b,c){a=fourSq.api.models.companion.geo.LatLngUtil.toLeaflet(a);this.placePin_(a,!1);b&&this.map_.panTo(a);c&&this.map_.setZoom(15)},getMapCenter:function(){return this.map_.getCenter()},updateMapError_:function(a){this.$el.addClass("error");this.$mapHelp_.empty().append(a)},updateMapHelp_:function(a){this.$el.removeClass("error");this.$mapHelp_.empty().append(a)},registerListenersOnMarker_:function(){this.marker_.on("dragend",fourSq.bind(function(){this.map_.panTo(this.marker_.getLatLng());this.setUserModifiedPin_();
this.trigger(fourSq.venue.editing.MapEditor.Events.LOCATION_UPDATED)},this));this.marker_.on("move",fourSq.curry(this.trigger,this,fourSq.venue.editing.MapEditor.Events.LOCATION_UPDATING))},onGeocodeSuccess_:function(a,b){if(b||!this.userModifiedPin_||!this.didPlacePin_){var c=fourSq.api.models.companion.geo.LatLngUtil.toLeaflet(a.feature.geometry.center);if(!fourSq.isDefinedAndNotNull(this.minimumDistanceForRecentering_)||fourSq.map.MapUtil.distanceBetween(this.map_.getCenter(),c)>this.minimumDistanceForRecentering_)this.map_.setView(c,
16),a.feature.encumbered||100!==a.feature.woeType?this.updateMapHelp_(templates.fourSq.venue.editing.mapHelpClickToPlacePin()):this.placePin_(c,!1)}},updateAddress:function(a,b){fourSq.api.services.Geo.geocode({query:a},fourSq.bind(function(a){a&&((a=fourSq.api.models.companion.geo.GeocodeResponseUtil.bestInterpretation(a))?(this.onGeocodeSuccess_(a,!!b),this.trigger(fourSq.venue.editing.MapEditor.Events.ADDRESS_UPDATE_SUCCEEDED)):this.trigger(fourSq.venue.editing.MapEditor.Events.ADDRESS_UPDATE_FAILED))},
this),fourSq.bind(function(){this.trigger(fourSq.venue.editing.MapEditor.Events.ADDRESS_UPDATE_FAILED)},this))},addLayerToMap:function(a,b){this.map_.addLayer(a,b)}},{Events:{LOCATION_UPDATED:"locationUpdated",LOCATION_UPDATING:"locationUpdating",MAP_MOVED:"mapMoved",ADDRESS_UPDATE_SUCCEEDED:"addressUpdateSucceeded",ADDRESS_UPDATE_FAILED:"addressUpdateFailed",USER_MODIFIED_PIN:"userModifiedPin"},BounceParams:{duration:1E3,height:-1}});fourSq.venue.editing.ParentChooserView=function(a){};
fourSq.venue.editing.ParentChooserView=fourSq.ui.View.extend({initialize:function(a){fourSq.venue.editing.ParentChooserView.__super__.initialize.call(this,a);this.llHinter_=a.llHinter;this.gettingParentAddress_=!1;if(this.initialParent=a.initialParent)this.parentVenueId_=this.initialParent.id;this.addressImporterCb=a.addressImporterCb;this.showAddressImporter=a.showAddressImporter;a.selfVenue&&(this.selfVenue=a.selfVenue);this.decorate()},decorate:function(){this.$parentChooserEl_=this.$el.find(".parentChooser .autocomplete");
this.$parentDisplayEl_=this.$el.find(".parentDisplay");this.parentChooser_=(new fourSq.autocomplete.desktop.VenueAutocompleteView({el:this.$parentChooserEl_,componentFactory:new fourSq.venue.editing.ComponentFactoryWithVenue({llHinter:this.llHinter_}),completerFactory:new fourSq.venue.editing.ParentCompleterFactory({venue:this.selfVenue})})).decorate();fourSq.isDefinedAndNotNull(this.initialParent)&&this.decorateParentVenue_();this.parentChooser_.on(fourSq.autocomplete.desktop.core.AutocompleteView.Events.RESULT,
fourSq.bind(function(a){a.type===fourSq.autocomplete.desktop.venue.VenueCompleterView.RESULT_TYPE&&(this.parentVenueId_=a.payload.id,this.displayParentVenue_(a.payload))},this))},isInExplicitState:function(){var a=this.$el.hasClass("inputMode")&&""===this.$parentChooserEl_.find(".search .query").val();return fourSq.isDefined(this.parentVenueId_)||a},getParentId:function(){return this.parentVenueId_},resetInput:function(){this.$parentChooserEl_.find(".search .query").val("")},displayParentVenue_:function(a){this.$parentDisplayEl_.empty().append(templates.fourSq.venue.editing.venueDisplay({venue:a,
showAddressImporter:this.showAddressImporter}));this.trigger(fourSq.venue.editing.ParentChooserView.Events.CHANGE_PARENT);this.toggleParentSectionMode_(!0);this.decorateParentVenue_()},decorateParentVenue_:function(){this.$el.find(".venueDisplay .unselect").click(fourSq.bind(function(){this.parentVenueId_=void 0;this.resetInput();this.trigger(fourSq.venue.editing.ParentChooserView.Events.CHANGE_PARENT);this.toggleParentSectionMode_(!1)},this));this.$el.find(".venueDisplay .addressImporter").click(fourSq.bind(function(){!0!==
this.gettingParentAddress_&&(this.gettingParentAddress_=!0,fourSq.api.services.Venue.detail(this.getParentId(),fourSq.bind(function(a){this.gettingParentAddress_=!1;this.addressImporterCb(a)},this),fourSq.bind(function(a){this.gettingParentAddress_=!1},this)))},this))},toggleParentSectionMode_:function(a){this.$el.toggleClass("displayMode",a).toggleClass("inputMode",!a)}},{Events:{CHANGE_PARENT:"ParentChooser:CHANGE_PARENT"}});fourSq.venue.editing.TranslatedNameEditorView=function(a){};
fourSq.venue.editing.TranslatedNameEditorView=fourSq.ui.View.extend({initialize:function(a){fourSq.venue.editing.TranslatedNameEditorView.__super__.initialize.call(this,a);this.$el.append($(templates.fourSq.venueflag.translatedNameEditor()));this.names_=a.names;this.nameLang_=a.nameLang;this.showIataInLanguageSelector_=a.showIataInLanguageSelector;this.namesDict_={};_.each(this.names_,function(a){this.namesDict_[a.lang]=a.name},this);this.$namesTable_=this.$el.find(".namesTable")},decorate:function(){this.addNameAddSection();
this.updateDisplayedNames();return this},updateDisplayedNames:function(){this.$namesTable_.empty();var a=_.map(this.namesDict_,function(a,c){return[c,a]}),a=_.sortBy(a,function(a){return fourSq.i18n.Languages.getLanguageName(a[0])});_.each(a,function(a){a[0]!=this.nameLang_&&this.addNameRow(a[0],a[1])},this)},addNameRow:function(a,b){var c=$(".nameInput [data-lang\x3d"+a+"]");if(c.array)c.val(b);else{var d=$(templates.fourSq.venueflag.nameRow({name:b,langCode:a,langName:fourSq.i18n.Languages.getLanguageName(a)}));
this.$namesTable_.append(d);d.find(".removeButton").click(fourSq.bind(function(b){fourSq.isDefinedAndNotNull(a)&&delete this.namesDict_[a];this.updateDisplayedNames();d.remove();this.trigger(fourSq.venue.editing.TranslatedNameEditorView.Events.CHANGE)},this))}this.trigger(fourSq.venue.editing.TranslatedNameEditorView.Events.CHANGE)},displayError:function(a){var b=this.$el.find(".errors");b.empty();b.append(a)},addNameAddSection:function(){var a=this.$el.find(".nameAddSection");this.languageSelector_=
(new fourSq.venueflag.views.LanguageSelector({el:a.find("select"),showIata:this.showIataInLanguageSelector_})).decorate();a.find(".addButton").click(fourSq.bind(function(){var b=a.find(".name"),c=a.find(".lang"),d=b.val(),c=c.val();fourSq.isDefinedAndNotNull(d)&&""!==d||this.displayError($(templates.fourSq.venueflag.missingName()));fourSq.isDefinedAndNotNull(c)&&""!==c||this.displayError($(templates.fourSq.venueflag.missingLanguage()));this.namesDict_[c]=d;this.trigger(fourSq.venue.editing.TranslatedNameEditorView.Events.CHANGE);
this.updateDisplayedNames();this.languageSelector_.clearLanguage();b.val("")},this))},addChangesToDict:function(a){var b={};_.each(this.$el.find(".nameInput").toArray(),function(c){a[c.name]=$(c).val();b[$(c).data("lang")]=1},this);_.each(this.names_,function(c){c.lang===this.nameLang_||"unk"===c.lang||b[c.lang]||(a["name:"+c.lang]="")},this)}},{Events:{CHANGE:"TranslatedNameEditorView:CHANGE"}});fourSq.venue.editing.NoOpVenueLatLngView=function(a){};fourSq.venue.editing.NoOpVenueLatLngView=fourSq.autocomplete.desktop.view.NoOpSearchLocationView.extend({initialize:function(a){fourSq.venue.editing.NoOpVenueLatLngView.__super__.initialize.call(this,a);this.llHinter_=a.llHinter},getLatLng:function(){return this.llHinter_()}});fourSq.venue.editing.ComponentFactoryWithVenue=function(a){};fourSq.venue.editing.ComponentFactoryWithVenue=fourSq.autocomplete.desktop.venue.ComponentFactoryWithGeocoderService.extend({initialize:function(a){fourSq.venue.editing.ComponentFactoryWithVenue.__super__.initialize.call(this,a);this.llHinter_=a.llHinter},createSearchLocationView:function(){return new fourSq.venue.editing.NoOpVenueLatLngView({llHinter:this.llHinter_})}});fourSq.venue.editing.ParentCompleterService=function(a){};
fourSq.venue.editing.ParentCompleterService=fourSq.autocomplete.desktop.venue.VenueCompleterService.extend({initialize:function(a){fourSq.venue.editing.ParentCompleterService.__super__.initialize(this,a);this.selfVenue=a.venue;this.responseCache_={};this.waitResponse_=0;this.results_=[]},performQuery:function(a){var b=$.extend({},a);a.radius=400;a.group="venues";b.supervenueOnly=!0;this.waitResponse_=2;this.results_=[];fourSq.venue.editing.ParentCompleterService.__super__.performQuery.call(this,a);
fourSq.venue.editing.ParentCompleterService.__super__.performQuery.call(this,b)},runQuery_:function(a,b,c){var d=b(this.processResults_,this),e=a.query.match(fourSq.venue.editing.ParentCompleterService.OID_REGEX);if(e){var f=e[0];this.responseCache_[f]?d([this.responseCache_[f]]):fourSq.api.services.Venue.detail(f,fourSq.bind(function(a){this.responseCache_[f]=a;d([a])},this))}else fourSq.venue.editing.ParentCompleterService.__super__.runQuery_.call(this,a,b,c)},preprocessResults_:function(a,b,c){return fourSq.bind(function(d){_.contains(this.currentQueries_,
a)&&b.call(c,a.supervenueOnly,d);this.removeQuery_(a)},this)},processResults_:function(a,b){this.waitResponse_--;this.results_=a?this.results_.concat(b):b.concat(this.results_);if(0===this.waitResponse_){var c=_.uniq(this.results_,!1,function(a){return a.id}),d=c;this.selfVenue&&(d=_.filter(c,fourSq.bind(function(a){return a.id!==this.selfVenue.id},this)));this.trigger(fourSq.autocomplete.desktop.venue.VenueCompleterService.Events.VENUE_RESULTS,d);this.results_=[]}}},{OID_REGEX:/[0-9a-fA-F]{24}/});fourSq.venue.editing.ParentCompleterFactory=function(a){};fourSq.venue.editing.ParentCompleterFactory=fourSq.autocomplete.desktop.venue.VenueOnlyCompleterFactory.extend({initialize:function(a){fourSq.venue.editing.ParentCompleterFactory.__super__.initialize.call(this,a);this.venue=a.venue},createVenueCompleterService_:function(){return new fourSq.venue.editing.ParentCompleterService({limit:this.options.resultLimit,venue:this.venue})}});
fourSq.i18n.Languages={getLanguageName:function(a){if("unk"===a)return"";if("iata"===a)return"IATA";if("stat"===a)return"Station Code";var b=fourSq.i18n.Languages.languageMap[a];return fourSq.isDefinedAndNotNull(b)?b[0]:a},foursquareLanguages:"en it de es fr ja th ko ru pt id tr zh".split(" "),languageMap:{aa:["Afar","Afar"],ab:["Abkhazian","\u0410\u04a7\u0441\u0443\u0430"],af:["Afrikaans","Afrikaans"],ak:["Akan","Akana"],am:["Amharic","\u12a0\u121b\u122d\u129b"],an:["Aragonese","Aragon\u00e9s"],
ar:["Arabic","\u0627\u0644\u0639\u0631\u0628\u064a\u0629"],as:["Assamese","\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be"],av:["Avar","\u0410\u0432\u0430\u0440"],ay:["Aymara","Aymar"],az:["Azerbaijani","Az\u0259rbaycanca / \u0622\u0630\u0631\u0628\u0627\u064a\u062c\u0627\u0646"],ba:["Bashkir","\u0411\u0430\u0448\u04a1\u043e\u0440\u0442"],be:["Belarusian","\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f"],bg:["Bulgarian","\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"],bh:["Bihari",
"\u092d\u094b\u091c\u092a\u0941\u0930\u0940"],bi:["Bislama","Bislama"],bm:["Bambara","Bamanankan"],bn:["Bengali","\u09ac\u09be\u0982\u09b2\u09be"],bo:["Tibetan","\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42 / Bod skad"],br:["Breton","Brezhoneg"],bs:["Bosnian","Bosanski"],ca:["Catalan","Catal\u00e0"],ce:["Chechen","\u041d\u043e\u0445\u0447\u0438\u0439\u043d"],ch:["Chamorro","Chamoru"],co:["Corsican","Corsu"],cr:["Cree","Nehiyaw"],cs:["Czech","\u010cesky"],cu:["Old Church Slavonic / Old Bulgarian","\u0441\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a / slov\u011bn\u012dsk\u016d"],
cv:["Chuvash","\u0427\u0103\u0432\u0430\u0448"],cy:["Welsh","Cymraeg"],da:["Danish","Dansk"],de:["German","Deutsch"],dv:["Divehi","\u078b\u07a8\u0788\u07ac\u0780\u07a8\u0784\u07a6\u0790\u07b0"],dz:["Dzongkha","\u0f47\u0f7c\u0f44\u0f0b\u0f41"],ee:["Ewe","\u0190\u028b\u025b"],el:["Greek","\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"],en:["English","English"],eo:["Esperanto","Esperanto"],es:["Spanish","Espa\u00f1ol"],et:["Estonian","Eesti"],eu:["Basque","Euskara"],fa:["Persian","\u0641\u0627\u0631\u0633\u06cc"],
ff:["Peul","Fulfulde"],fi:["Finnish","Suomi"],fj:["Fijian","Na Vosa Vakaviti"],fo:["Faroese","F\u00f8royskt"],fr:["French","Fran\u00e7ais"],fy:["West Frisian","Frysk"],ga:["Irish","Gaeilge"],gd:["Scottish Gaelic","G\u00e0idhlig"],gl:["Galician","Galego"],gn:["Guarani","Ava\u00f1e'\u1ebd"],gu:["Gujarati","\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"],gv:["Manx","Gaelg"],ha:["Hausa","\u0647\u064e\u0648\u064f\u0633\u064e"],he:["Hebrew","\u05e2\u05d1\u05e8\u05d9\u05ea"],hi:["Hindi","\u0939\u093f\u0928\u094d\u0926\u0940"],
ho:["Hiri Motu","Hiri Motu"],hr:["Croatian","Hrvatski"],ht:["Haitian","Kr\u00e8yol ayisyen"],hu:["Hungarian","Magyar"],hy:["Armenian","\u0540\u0561\u0575\u0565\u0580\u0565\u0576"],hz:["Herero","Otsiherero"],ia:["Interlingua","Interlingua"],id:["Indonesian","Bahasa Indonesia"],ie:["Interlingue","Interlingue"],ig:["Igbo","Igbo"],ii:["Sichuan Yi","\ua187\ua259 / \u56db\u5ddd\u5f5d\u8bed"],ik:["Inupiak","I\u00f1upiak"],io:["Ido","Ido"],is:["Icelandic","\u00cdslenska"],it:["Italian","Italiano"],iu:["Inuktitut",
"\u1403\u14c4\u1483\u144e\u1450\u1466"],ja:["Japanese","\u65e5\u672c\u8a9e"],jv:["Javanese","Basa Jawa"],ka:["Georgian","\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"],kg:["Kongo","KiKongo"],ki:["Kikuyu","G\u0129k\u0169y\u0169"],kj:["Kuanyama","Kuanyama"],kk:["Kazakh","\u049a\u0430\u0437\u0430\u049b\u0448\u0430"],kl:["Greenlandic","Kalaallisut"],km:["Cambodian","\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"],kn:["Kannada","\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"],ko:["Korean","\ud55c\uad6d\uc5b4"],
kr:["Kanuri","Kanuri"],ks:["Kashmiri","\u0915\u0936\u094d\u092e\u0940\u0930\u0940 / \u0643\u0634\u0645\u064a\u0631\u064a"],ku:["Kurdish","Kurd\u00ee / \u0643\u0648\u0631\u062f\u06cc"],kv:["Komi","\u041a\u043e\u043c\u0438"],kw:["Cornish","Kernewek"],ky:["Kirghiz","K\u0131rg\u0131zca / \u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430"],la:["Latin","Latina"],lb:["Luxembourgish","L\u00ebtzebuergesch"],lg:["Ganda","Luganda"],li:["Limburgian","Limburgs"],ln:["Lingala","Ling\u00e1la"],lo:["Lao","\u0ea5\u0eb2\u0ea7 / Pha xa lao"],
lt:["Lithuanian","Lietuvi\u0173"],lv:["Latvian","Latvie\u0161u"],mg:["Malagasy","Malagasy"],mh:["Marshallese","Kajin Majel / Ebon"],mi:["Maori","M\u0101ori"],mk:["Macedonian","\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438"],ml:["Malayalam","\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"],mn:["Mongolian","\u041c\u043e\u043d\u0433\u043e\u043b"],mo:["Moldovan","Moldoveneasc\u0103"],mr:["Marathi","\u092e\u0930\u093e\u0920\u0940"],ms:["Malay","Bahasa Melayu"],mt:["Maltese","bil-Malti"],my:["Burmese",
"Myanmasa"],na:["Nauruan","Dorerin Naoero"],nd:["North Ndebele","Sindebele"],ne:["Nepali","\u0928\u0947\u092a\u093e\u0932\u0940"],ng:["Ndonga","Oshiwambo"],nl:["Dutch","Nederlands"],nn:["Norwegian Nynorsk","Norsk (nynorsk)"],no:["Norwegian","Norsk (bokm\u00e5l / riksm\u00e5l)"],nr:["South Ndebele","isiNdebele"],nv:["Navajo","Din\u00e9 bizaad"],ny:["Chichewa","Chi-Chewa"],oc:["Occitan","Occitan"],oj:["Ojibwa","\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0 / Anishinaabemowin"],om:["Oromo","Oromoo"],
or:["Oriya","\u0b13\u0b21\u0b3c\u0b3f\u0b06"],os:["Ossetian / Ossetic","\u0418\u0440\u043e\u043d\u0430\u0443"],pa:["Panjabi / Punjabi","\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 / \u092a\u0902\u091c\u093e\u092c\u0940 / \u067e\u0646\u062c\u0627\u0628\u064a"],pi:["Pali","P\u0101li / \u092a\u093e\u0934\u093f"],pl:["Polish","Polski"],ps:["Pashto","\u067e\u069a\u062a\u0648"],pt:["Portuguese","Portugu\u00eas"],qu:["Quechua","Runa Simi"],rm:["Raeto Romance","Rumantsch"],rn:["Kirundi","Kirundi"],ro:["Romanian",
"Rom\u00e2n\u0103"],ru:["Russian","\u0420\u0443\u0441\u0441\u043a\u0438\u0439"],rw:["Rwandi","Kinyarwandi"],sa:["Sanskrit","\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d"],sc:["Sardinian","Sardu"],sd:["Sindhi","\u0938\u093f\u0928\u0927\u093f"],se:["Northern Sami","S\u00e1megiella"],sg:["Sango","S\u00e4ng\u00f6"],sh:["Serbo-Croatian","Srpskohrvatski / \u0421\u0440\u043f\u0441\u043a\u043e\u0445\u0440\u0432\u0430\u0442\u0441\u043a\u0438"],si:["Sinhalese","\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"],sk:["Slovak",
"Sloven\u010dina"],sl:["Slovenian","Sloven\u0161\u010dina"],sm:["Samoan","Gagana Samoa"],sn:["Shona","chiShona"],so:["Somalia","Soomaaliga"],sq:["Albanian","Shqip"],sr:["Serbian","\u0421\u0440\u043f\u0441\u043a\u0438"],ss:["Swati","SiSwati"],st:["Southern Sotho","Sesotho"],su:["Sundanese","Basa Sunda"],sv:["Swedish","Svenska"],sw:["Swahili","Kiswahili"],ta:["Tamil","\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"],te:["Telugu","\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"],tg:["Tajik","\u0422\u043e\u04b7\u0438\u043a\u04e3"],
th:["Thai","\u0e44\u0e17\u0e22 / Phasa Thai"],ti:["Tigrinya","\u1275\u130d\u122d\u129b"],tk:["Turkmen","\u0422\u0443\u0440\u043a\u043c\u0435\u043d / \u062a\u0631\u0643\u0645\u0646"],tl:["Tagalog / Filipino","Tagalog"],tn:["Tswana","Setswana"],to:["Tonga","Lea Faka-Tonga"],tr:["Turkish","T\u00fcrk\u00e7e"],ts:["Tsonga","Xitsonga"],tt:["Tatar","Tatar\u00e7a"],tw:["Twi","Twi"],ty:["Tahitian","Reo M\u0101`ohi"],ug:["Uyghur","Uy\u01a3urq\u0259 / \u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5"],uk:["Ukrainian",
"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"],ur:["Urdu","\u0627\u0631\u062f\u0648"],uz:["Uzbek","\u040e\u0437\u0431\u0435\u043a"],ve:["Venda","Tshiven\u1e13a"],vi:["Vietnamese","Ti\u1ebfng Vi\u1ec7t"],vo:["Volap\u00fck","Volap\u00fck"],wa:["Walloon","Walon"],wo:["Wolof","Wollof"],xh:["Xhosa","isiXhosa"],yi:["Yiddish","\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9"],yo:["Yoruba","Yor\u00f9b\u00e1"],za:["Zhuang","Cuengh / T\u00f4\u00f4 / \u58ee\u8bed"],zh:["Chinese","\u4e2d\u6587"],zu:["Zulu",
"isiZulu"]}};fourSq.i18n.Countries={preferredLanguageMap:{AD:"ca",AE:"ar",AF:"fa",AL:"sq",AM:"hy",AO:"pt",AR:"es",AT:"de",AU:"en",AW:"nl",AX:"sv",AZ:"az",BA:"bs",BD:"bn",BE:"nl",BF:"fr",BG:"bg",BH:"ar",BI:"fr",BJ:"fr",BL:"fr",BN:"ms",BO:"es",BQ:"nl",BR:"pt",BT:"dz",BY:"be",CA:"en",CC:"ms",CD:"fr",CF:"fr",CG:"fr",CH:"de",CI:"fr",CL:"es",CN:"zh",CO:"es",CR:"es",CU:"es",CV:"pt",CW:"nl",CY:"el",CZ:"cs",DE:"de",DJ:"fr",DK:"da",DO:"es",DZ:"ar",EC:"es",EE:"et",EG:"ar",EH:"ar",ER:"aa",ES:"es",ET:"am",FI:"fi",FO:"fo",
FR:"fr",GA:"fr",GB:"en",GE:"ka",GF:"fr",GL:"kl",GN:"fr",GP:"fr",GQ:"es",GR:"el",GT:"es",GW:"pt",HK:"zh",HN:"es",HR:"hr",HT:"ht",HU:"hu",ID:"id",IL:"he",IN:"en",IQ:"ar",IR:"fa",IS:"is",IT:"it",JO:"ar",JP:"ja",KG:"ky",KH:"km",KM:"ar",KP:"ko",KR:"ko",KW:"ar",KZ:"kk",LA:"lo",LB:"ar",LI:"de",LK:"si",LT:"lt",LU:"lb",LV:"lv",LY:"ar",MA:"ar",MC:"fr",MD:"ro",ME:"sr",MF:"fr",MG:"fr",MH:"mh",MK:"mk",ML:"fr",MM:"my",MN:"mn",MO:"zh",MP:"tl",MQ:"fr",MR:"ar",MT:"mt",MV:"dv",MW:"ny",MX:"es",MY:"ms",MZ:"pt",NC:"fr",
NE:"fr",NI:"es",NL:"nl",NO:"no",NP:"ne",NR:"na",OM:"ar",PA:"es",PE:"es",PF:"fr",PH:"tl",PK:"ur",PL:"pl",PM:"fr",PS:"ar",PT:"pt",PY:"es",QA:"ar",RE:"fr",RO:"ro",RS:"sr",RU:"ru",RW:"rw",SA:"ar",SD:"ar",SE:"sv",SG:"en",SI:"sl",SJ:"no",SK:"sk",SM:"it",SN:"fr",SO:"so",SR:"nl",ST:"pt",SV:"es",SX:"nl",SY:"ar",TD:"fr",TF:"fr",TG:"fr",TH:"th",TJ:"tg",TL:"pt",TM:"tk",TN:"ar",TO:"to",TR:"tr",TW:"zh",TZ:"sw",UA:"uk",US:"en",UY:"es",UZ:"uz",VA:"la",VE:"es",VN:"vi",VU:"bi",WF:"fr",WS:"sm",XK:"sq",YE:"ar",YT:"fr",
ZA:"zu"}};fourSq.views.FlagCategoryEditor=function(a){};
fourSq.views.FlagCategoryEditor=fourSq.ui.View.extend({initialize:function(a){fourSq.views.FlagCategoryEditor.__super__.initialize.call(this,a);this.venue_=a.venue;this.creatingView_=a.creatingView;this.currentCategories_=_.sortBy(this.venue_.categories,function(a){return!a.primary});this.initialCategoryIds_=_.pluck(this.currentCategories_,"id");this.decorated_=!1;this.$currentCategories_=null;this.categoryTemplate_=a.categoryTemplate||helpers.categoryEditor.currentCategories;this.extraTemplateArgs_=
a.extraTemplateArgs||{}},renderCurrentCategories_:function(){1===this.currentCategories_.length&&(this.currentCategories_[0].primary=!0);var a=this.categoryTemplate_(_.extend({categories:this.currentCategories_},this.extraTemplateArgs_));this.$currentCategories_.replaceWith(a);this.$currentCategories_=this.$el.find(".currentCategories");this.bindCategoryActions_(this.$currentCategories_)},decorate:function(){this.decorated_||(this.$currentCategories_=this.$el.find(".currentCategories"),this.bindCategoryActions_(this.$currentCategories_),
this.decorated_=!0);return this},bindCategoryActions_:function(a){a.find(".categoryRemove").click(fourSq.bind(this.onRemove_,this));a.find(".categoryPromote").click(fourSq.bind(this.onPromote_,this))},onRemove_:function(a){var b=$(a.currentTarget).parent(".category").attr("id");this.currentCategories_=_.reject(this.currentCategories_,function(a){return a.id===b});!_.some(this.currentCategories_,function(a){return a.primary})&&0<this.currentCategories_.length&&(this.currentCategories_[0].primary=!0);
this.renderCurrentCategories_();this.trigger("change");return!1},onPromote_:function(a){if(1>=this.currentCategories_.length)return!1;var b=$(a.currentTarget).parent(".category").attr("id");a=_.find(this.currentCategories_,function(a){return a.id===b});if(!fourSq.isDefinedAndNotNull(a))return!1;_.each(this.currentCategories_,function(a){a.primary=!1});a.primary=!0;this.renderCurrentCategories_();this.trigger("change");return!1},currentCategories:function(){return this.currentCategories_},addCategory:function(a){_.some(this.currentCategories_,
function(b){return b.id===a.id})?this.trigger("alreadyExists"):this.canHaveMoreCategories()?(this.currentCategories_.push(a),this.renderCurrentCategories_(),this.trigger("change"),this.trigger("addedCategory")):this.trigger("tooManyCategories")},canHaveMoreCategories:function(){return 3>this.currentCategories_.length},saveCategories:function(){var a=_.find(this.currentCategories_,function(a){return a.primary}),b=_.filter(this.currentCategories_,function(a){return!a.primary}),c=void 0;a&&(c=a.id);
a=_.pluck(b,"id");c={primaryCategoryId:c,addCategoryIds:a.join(","),creatingView:this.creatingView_};a=_.pluck(this.currentCategories_,"id");a=_.difference(this.initialCategoryIds_,a);0<a.length&&(c.removeCategoryIds=a.join(","));fourSq.api.services.Venue.proposeEdit(this.venue_.id,c,"",fourSq.bind(function(){this.trigger("success")},this),fourSq.bind(function(){this.trigger("failure")},this))}});fourSq.views.FlagChainEditor=function(a){};
fourSq.views.FlagChainEditor=fourSq.ui.View.extend({initialize:function(a){fourSq.views.FlagChainEditor.__super__.initialize.call(this,a);this.venue_=a.venue;this.creatingView_=a.creatingView;this.currentChains_=this.venue_.venueChains||[];1<=this.currentChains_.length&&(this.currentChains_[0].primary=!0);this.initialChainIds_=_.pluck(this.currentChains_,"id");this.decorated_=!1;this.$currentChains_=null;this.chainTemplate_=a.chainTemplate||helpers.chainEditor.currentChains;this.extraTemplateArgs_=
a.extraTemplateArgs||{}},renderCurrentChains_:function(){1===this.currentChains_.length&&(this.currentChains_[0].primary=!0);var a=this.chainTemplate_(_.extend({chains:this.currentChains_},this.extraTemplateArgs_));this.$currentChains_.replaceWith(a);this.$currentChains_=this.$el.find(".currentChains");this.bindChainActions_(this.$currentChains_)},decorate:function(){this.decorated_||(this.$currentChains_=this.$el.find(".currentChains"),this.bindChainActions_(this.$currentChains_),this.decorated_=
!0);return this},bindChainActions_:function(a){a.find(".chainRemove").click(fourSq.bind(this.onRemove_,this));a.find(".chainPromote").click(fourSq.bind(this.onPromote_,this))},onRemove_:function(a){var b=$(a.currentTarget).parent(".chain").attr("id");this.currentChains_=_.reject(this.currentChains_,function(a){return a.id===b});!_.some(this.currentChains_,function(a){return a.primary})&&0<this.currentChains_.length&&(this.currentChains_[0].primary=!0);this.renderCurrentChains_();this.trigger("change");
return!1},onPromote_:function(a){if(1>=this.currentChains_.length)return!1;var b=$(a.currentTarget).parent(".chain").attr("id");a=_.find(this.currentChains_,function(a){return a.id===b});if(!fourSq.isDefinedAndNotNull(a))return!1;_.each(this.currentChains_,function(a){a.primary=!1});a.primary=!0;this.renderCurrentChains_();this.trigger("change");return!1},currentChains:function(){return this.currentChains_},addChain:function(a){_.some(this.currentChains_,function(b){return b.id===a.id})?this.trigger("alreadyExists"):
this.canHaveMoreChains()?(this.currentChains_.push(a),this.renderCurrentChains_(),this.trigger("change"),this.trigger("addedChain")):this.trigger("tooManyChains")},canHaveMoreChains:function(){return 3>this.currentChains_.length},saveChains:function(){var a=_.find(this.currentChains_,function(a){return a.primary}),b=_.filter(this.currentChains_,function(a){return!a.primary}),b=_.pluck(b,"id"),c=void 0;a&&a.id!==this.initialChainIds_[0]&&(c=a.id);a={primaryVenueChainId:c,creatingView:this.creatingView_};
b=_.difference(b,this.initialChainIds_);0<b.length&&(a.addVenueChainIds=b.join(","));b=_.pluck(this.currentChains_,"id");b=_.difference(this.initialChainIds_,b);0<b.length&&(a.removeVenueChainIds=b.join(","));fourSq.api.services.Venue.proposeEdit(this.venue_.id,a,"",fourSq.bind(function(){this.trigger("success")},this),fourSq.bind(function(){this.trigger("failure")},this))}});"undefined"==typeof helpers.categoryEditor&&(helpers.categoryEditor={});
helpers.categoryEditor.currentCategories=function(a,b){var c='\x3cdiv class\x3d"cells continuous currentCategories"\x3e',d=a.categories,e=d.length;if(0<e)for(var f=0;f<e;f++)var g=d[f],c=c+(g.primary?'\x3cdiv class\x3d"cell header"\x3ePrimary category\x3c/div\x3e'+helpers.categoryEditor.categoryCell({category:g,removable:!0,actionCount:1,level:0,useBg:a.useBg}):"");else c+='\x3cdiv class\x3d"cell"\x3eThis location currently has no categories. Add one?\x3c/div\x3e';c+=1<a.categories.length?'\x3cdiv class\x3d"cell header"\x3e\x3cdiv\x3eSecondary categories\x3c/div\x3e\x3cdiv class\x3d"hint"\x3eTap the "\x3cspan class\x3d"hintEmphasis"\x3e+\x3c/span\x3e" to make it primary\x3c/div\x3e\x3c/div\x3e':
"";d=a.categories;e=d.length;for(f=0;f<e;f++)g=d[f],c+=g.primary?"":helpers.categoryEditor.categoryCell({category:g,removable:!0,promotable:!0,actionCount:2,level:0,useBg:a.useBg});return c+"\x3c/div\x3e"};
helpers.categoryEditor.categoryCell=function(a,b){var c='\x3cdiv class\x3d"cell category'+(a.actionCount?" actions"+soy.$$escapeHtml(a.actionCount):"")+" level"+soy.$$escapeHtml(a.level)+'" id\x3d"'+soy.$$escapeHtml(a.category.id)+'" data-level\x3d"'+soy.$$escapeHtml(a.level)+'"\x3e\x3ca href\x3d"#select" class\x3d"categorySelect"\x3e\x3cdiv class\x3d"selectContainer"\x3e\x3cdiv class\x3d"'+(0<a.level?"pressable ":"")+'button"\x3e',d=a.useBg?"categoryIcon-bg-32 s-c-bg-32-"+soy.$$escapeHtml(a.category.id):
"categoryIcon-32 s-c-32-"+soy.$$escapeHtml(a.category.id);return c+='\x3cspan class\x3d"'+soy.$$escapeHtml(d)+' needsRetina"\x3e\x3c/span\x3e\x3cspan class\x3d"categoryName"\x3e'+soy.$$escapeHtml(a.category.name)+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e"+(a.expandable?'\x3ca href\x3d"#expand" class\x3d"categoryExpand"\x3e\x3cdiv class\x3d"actionContainer"\x3e\x3cdiv class\x3d"expander action pressable button"\x3e\x3cdiv class\x3d"expanderSprite"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e':
"")+(a.promotable?'\x3ca href\x3d"#promote" class\x3d"categoryPromote"\x3e\x3cdiv class\x3d"actionContainer"\x3e\x3cdiv class\x3d"promoter action pressable button"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/icon-blue-add-56a66a6b4384c6b963244a0fdbea6033.png")+'" alt\x3d"make primary category"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e':"")+(a.removable?'\x3ca href\x3d"#remove" class\x3d"categoryRemove"\x3e\x3cdiv class\x3d"actionContainer"\x3e\x3cdiv class\x3d"remover action pressable button"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml("https://ss0.4sqi.net/img/search_cancel-cf200f91a983e2455ed6f3b931529125.png")+'" alt\x3d"remove category"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e':"")+"\x3c/div\x3e"};"undefined"==typeof helpers.chainEditor&&(helpers.chainEditor={});
helpers.chainEditor.currentChains=function(a,b){var c='\x3cdiv class\x3d"cells continuous currentChains"\x3e',d=a.chains,e=d.length;if(0<e)for(var f=0;f<e;f++)var g=d[f],c=c+(g.primary?'\x3cdiv class\x3d"cell header"\x3ePrimary chain\x3c/div\x3e'+helpers.chainEditor.chainCell({chain:g,removable:!0,actionCount:1}):"");else c+='\x3cdiv class\x3d"cell"\x3eThis location is not currently a member of any chains. Add it to one?\x3c/div\x3e';c+=1<a.chains.length?'\x3cdiv class\x3d"cell header"\x3e\x3cdiv\x3eSecondary chains\x3c/div\x3e\x3cdiv class\x3d"hint"\x3eTap the "\x3cspan class\x3d"hintEmphasis"\x3e+\x3c/span\x3e" to make it primary\x3c/div\x3e\x3c/div\x3e':
"";d=a.chains;e=d.length;for(f=0;f<e;f++)g=d[f],c+=g.primary?"":helpers.chainEditor.chainCell({chain:g,removable:!0,promotable:!0,actionCount:2});return c+"\x3c/div\x3e"};
helpers.chainEditor.chainCell=function(a,b){var c='\x3cdiv class\x3d"cell chain'+(a.actionCount?" actions"+soy.$$escapeHtml(a.actionCount):"")+'" id\x3d"'+soy.$$escapeHtml(a.chain.id)+'"\x3e\x3ca href\x3d"#select" class\x3d"chainSelect"\x3e\x3cdiv class\x3d"selectContainer"\x3e\x3cdiv class\x3d"pressable button"\x3e';return c+='\x3cspan class\x3d"'+soy.$$escapeHtml("")+' needsRetina"\x3e\x3c/span\x3e\x3cspan class\x3d"chainName"\x3e'+soy.$$escapeHtml(a.chain.bestName.name)+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e"+
(a.promotable?'\x3ca href\x3d"#promote" class\x3d"chainPromote"\x3e\x3cdiv class\x3d"actionContainer"\x3e\x3cdiv class\x3d"promoter action pressable button"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/icon-blue-add-56a66a6b4384c6b963244a0fdbea6033.png")+'" alt\x3d"make primary chain"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e':"")+(a.removable?'\x3ca href\x3d"#remove" class\x3d"chainRemove"\x3e\x3cdiv class\x3d"actionContainer"\x3e\x3cdiv class\x3d"remover action pressable button"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml("https://ss0.4sqi.net/img/search_cancel-cf200f91a983e2455ed6f3b931529125.png")+'" alt\x3d"remove chain"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e':"")+"\x3c/div\x3e"};helpers.chainEditor.venueChainNameWithLink=function(a,b){return helpers.chainEditor.venueChainNameWithLinkWithDomain(a)};
helpers.chainEditor.venueChainNameWithLinkWithDomain=function(a,b){return'\x3ca href\x3d"/admin/chain/'+soy.$$escapeHtml(a.venueChain.id)+'"'+(a.target?' target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+(a.extraClass?' class\x3d"'+soy.$$escapeHtml(a.extraClass)+'"':"")+"\x3e"+soy.$$escapeHtml(a.venueChain.bestName.name)+"\x3c/a\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});
templates.fourSq.venueflag.inputRow=function(a,b){return'\x3cdiv class\x3d"inputRow'+(a.extraClasses?" "+soy.$$escapeHtml(a.extraClasses):"")+'" data-field\x3d"'+soy.$$escapeHtml(a.field)+'"\x3e\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"label"\x3e'+soy.$$escapeHtml(a.label)+'\x3c/div\x3e\x3cdiv class\x3d"input"\x3e'+soy.$$escapeHtml(a.content)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e'+(a.extraContent?'\x3cdiv class\x3d"extraContent"\x3e'+soy.$$escapeHtml(a.extraContent)+
"\x3c/div\x3e":"")+'\x3c/div\x3e\x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e'};templates.fourSq.venueflag.toggleInputRow=function(a,b){var c="",d=templates.fourSq.venueflag.availabilityAttributeInput(a);return c+=templates.fourSq.venueflag.inputRow({field:a.field,label:a.label,content:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraContent:a.extraContent,extraClasses:a.extraClasses})};
templates.fourSq.venueflag.availabilityAttributeInput=function(a,b){return'\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"'+soy.$$escapeHtml(a.field)+'" data-field\x3d"'+soy.$$escapeHtml(a.field)+'" value\x3d"yes" class\x3d"availabilityAttribute '+soy.$$escapeHtml(a.field)+'"'+("yes"==a.currValue?"checked":"")+'/\x3eYes\x3c/label\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"'+soy.$$escapeHtml(a.field)+'" data-field\x3d"'+soy.$$escapeHtml(a.field)+'" value\x3d"no" class\x3d"availabilityAttribute '+
soy.$$escapeHtml(a.field)+'"'+("no"==a.currValue?"checked":"")+"/\x3eNo\x3c/label\x3e"};templates.fourSq.venueflag.checkboxField=function(a,b){return'\x3clabel\x3e\x3cinput type\x3d"checkbox" class\x3d"'+soy.$$escapeHtml(a.className)+" "+soy.$$escapeHtml(a.value)+'" data-label\x3d"'+soy.$$escapeHtml(a.name)+'" data-field\x3d"'+soy.$$escapeHtml(a.value)+'"'+("yes"==a.checked?"checked":"")+(a.fieldType?' data-field-type\x3d"'+soy.$$escapeHtml(a.fieldType)+'"':"")+"/\x3e"+soy.$$escapeHtml(a.name)+"\x3c/label\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.successMaybeUpsell=function(a,b){a=a||{};return'\x3cdiv class\x3d"thanks finalMessage'+(a.inviteForSU?" invite":"")+'"\x3e'+(a.inviteForSU?templates.fourSq.venueflag.successInviteForSU(null):a.linkToQueues?templates.fourSq.venueflag.successLinkToQueues(null):templates.fourSq.venueflag.successGenericThankYou(null))+"\x3c/div\x3e"};
templates.fourSq.venueflag.successInviteForSU=function(a,b){return'\x3ch3 class\x3d"header"\x3eThanks for your help! Would you like to become a Foursquare Superuser?\x3c/h3\x3e\x3cp class\x3d"message"\x3eBy becoming a Superuser, your edits will carry more weight.\x3c/p\x3e\x3cp class\x3d"message"\x3eYou will also get access to new tools to review suggested edits from other users.\x3c/p\x3e\x3ca href\x3d"/edit/join" target\x3d"_blank" class\x3d"joinButton greenButton"\x3eYes, I\'m in!\x3c/a\x3e'};
templates.fourSq.venueflag.successLinkToQueues=function(a,b){return templates.fourSq.venueflag.successGenericThankYou(null)+'\x3cdiv class\x3d"separator"\x3e\x3c/div\x3e\x3cdiv class\x3d"queueMessage"\x3e\x3cp class\x3d"message callout"\x3eYou\'re on a roll. Would you like to review suggested edits from other people for places near you?\x3c/p\x3e\x3ca href\x3d"/edit/details" target\x3d"_blank" class\x3d"queueButton greenButton"\x3eSure!\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.successGenericThankYou=function(a,b){return'\x3ch3 class\x3d"header"\x3eThanks for your help! You\'re pretty good at this stuff.\x3c/h3\x3e\x3cp class\x3d"message"\x3eYou might not see your suggested edits right away, but they\u2019re in the queue and we\u2019ll review them shortly.\x3c/p\x3e'};templates.fourSq.venueflag.genericFailure=function(a,b){return'\x3cdiv class\x3d"failure finalMessage"\x3e\x3ch3 class\x3d"header"\x3eEep! An Error!\x3c/h3\x3e\x3cp class\x3d"message"\x3eSorry! Looks like something went wrong. Please try submitting again later.\x3c/p\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.accordionRow=function(a,b){return'\x3cdiv class\x3d"accordionRow"\x3e\x3cdiv class\x3d"accordionHeader"\x3e\x3cspan class\x3d"carat"\x3e\x3c/span\x3e\x3cdiv class\x3d"headerText"\x3e\x3c/div\x3e\x3cdiv class\x3d"headerVenueText"\x3e\x3c/div\x3e\x3cdiv class\x3d"updated"\x3eUpdated\x3c/div\x3e\x3cdiv class\x3d"error"\x3eError\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"accordionPane"\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.categoryHeader=function(a,b){return"Categories"};templates.fourSq.venueflag.categoryVenueHeader=function(a,b){for(var c="",d=a.venue.categories,e=d.length,f=0;f<e;f++)c+=soy.$$escapeHtml(d[f].name)+(f!=e-1?", ":"");return c};
templates.fourSq.venueflag.currentCategories=function(a,b){for(var c='\x3cdiv class\x3d"cells continuous currentCategories"\x3e',d=a.categories,e=d.length,f=0;f<e;f++)var g=d[f],c=c+(g.primary?templates.fourSq.venueflag.categoryCell({category:g,removable:!0}):templates.fourSq.venueflag.categoryCell({category:g,removable:!0,promotable:!0}));return c+"\x3c/div\x3e"};
templates.fourSq.venueflag.categoryCell=function(a,b){return'\x3cdiv class\x3d"cell category" id\x3d"'+soy.$$escapeHtml(a.category.id)+'"\x3e\x3cspan class\x3d"categorySelect"\x3e\x3cdiv class\x3d"categoryListing"\x3e\x3cdiv class\x3d"button"\x3e\x3cspan class\x3d"categoryIcon"\x3e'+helpers.category.iconOrDefault({icon:a.category.icon,size:24})+'\x3c/span\x3e\x3cspan class\x3d"categoryName"\x3e'+soy.$$escapeHtml(a.category.name)+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/span\x3e"+(a.removable?'\x3ca href\x3d"#remove" class\x3d"categoryRemove"\x3e\x3cdiv class\x3d"actionContainer removeContainer"\x3e\x3cspan class\x3d"remover action pressable button"\x3eremove\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e':
"")+(a.promotable?'\x3ca href\x3d"#promote" class\x3d"categoryPromote"\x3e\x3cdiv class\x3d"actionContainer labelContainer"\x3e\x3cspan class\x3d"promoter action pressable button"\x3eSet as primary\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e':'\x3cdiv class\x3d"actionContainer labelContainer"\x3e\x3cspan class\x3d"primaryLabel"\x3ePrimary\x3c/span\x3e\x3c/div\x3e')+"\x3c/div\x3e"};
templates.fourSq.venueflag.category=function(a,b){return'\x3cdiv class\x3d"flagVenueCategory"\x3e\x3cdiv class\x3d"categoryAddSection"\x3e\x3cdiv class\x3d"help"\x3eAdd a new category:\x3c/div\x3e'+helpers.autocomplete.desktop.category.twoStepCategoryAutocompleter(null)+'\x3cdiv class\x3d"tooManyCategoriesMessage"\x3eOnly 3 categories are allowed, please delete one before adding another.\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"categoryEditSection"\x3e'+templates.fourSq.venueflag.currentCategories({categories:a.venue.categories})+
"\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.chainHeader=function(a,b){return"Chains"};templates.fourSq.venueflag.chainVenueHeader=function(a,b){var c="";if(a.venue.venueChains)for(var d=a.venue.venueChains,e=d.length,f=0;f<e;f++)c+=soy.$$escapeHtml(d[f].bestName.name)+(f!=e-1?", ":"");return c};
templates.fourSq.venueflag.currentChains=function(a,b){for(var c='\x3cdiv class\x3d"cells continuous currentChains"\x3e',d=a.chains,e=d.length,f=0;f<e;f++)var g=d[f],c=c+(g.primary?templates.fourSq.venueflag.chainCell({chain:g,removable:!0}):templates.fourSq.venueflag.chainCell({chain:g,promotable:!0}));return c+"\x3c/div\x3e"};
templates.fourSq.venueflag.chainCell=function(a,b){return'\x3cdiv class\x3d"cell chain " id\x3d"'+soy.$$escapeHtml(a.chain.id)+'"\x3e\x3cspan class\x3d"chainSelect"\x3e\x3cdiv class\x3d"chainListing"\x3e\x3cdiv class\x3d"button"\x3e\x3cspan class\x3d"chainLogo"\x3e'+helpers.category.iconOrDefault({icon:a.chain.logo,size:24,transparent:!0})+'\x3c/span\x3e\x3cspan class\x3d"chainName"\x3e'+helpers.chainEditor.venueChainNameWithLink({venueChain:a.chain,target:"_blank"})+'\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/span\x3e\x3ca href\x3d"#remove" class\x3d"chainRemove"\x3e\x3cdiv class\x3d"actionContainer removeContainer"\x3e\x3cspan class\x3d"remover action pressable button"\x3eremove\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e'+
(a.promotable?'\x3ca href\x3d"#promote" class\x3d"chainPromote"\x3e\x3cdiv class\x3d"actionContainer labelContainer"\x3e\x3cspan class\x3d"promoter action pressable button"\x3eSet as primary\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e':'\x3cdiv class\x3d"actionContainer labelContainer"\x3e\x3cspan class\x3d"primaryLabel"\x3ePrimary\x3c/span\x3e\x3c/div\x3e')+"\x3c/div\x3e"};
templates.fourSq.venueflag.chain=function(a,b){return'\x3cdiv class\x3d"flagVenueChain"\x3e\x3cdiv class\x3d"chainAddSection"\x3e\x3cdiv class\x3d"help"\x3eAdd a new chain:\x3c/div\x3e'+helpers.autocomplete.desktop.chain.chainAutocompleter(null)+'\x3cdiv class\x3d"tooManyChainsMessage"\x3eOnly 3 chains are allowed, please delete one before adding another.\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chainEditSection"\x3e'+(a.venue.venueChains?templates.fourSq.venueflag.currentChains({chains:a.venue.venueChains}):
"")+"\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});
templates.fourSq.venueflag.dragFlagPage=function(a,b){return'\x3cdiv id\x3d"flagArea" class\x3d"desktop venueFlagModal"\x3e\x3cdiv class\x3d"accordion"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttons"\x3e\x3ca class\x3d"disabledButton saveButton"\x3esave\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cscript type\x3d"text/javascript"\x3efourSq.venueflag.pages.DesktopPage.init({el: $(\'#flagArea\').get(0), model: '+a.venue+", showNfc: "+soy.$$escapeHtml(a.showNfc)+"});\x3c/script\x3e"};
templates.fourSq.venueflag.dragPageTitle=function(a,b){return"Flag - "+soy.$$escapeHtml(a.venue.name)+(a.neighborhood?" - "+soy.$$escapeHtml(a.neighborhood):"")+(a.venue.location?" - "+(a.venue.location.city&&a.venue.location.city==a.venue.location.state?soy.$$escapeHtml(a.venue.location.city):helpers.venue.cityState(a.venue)):"")};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.featuresHeader=function(a,b){return"Features"};templates.fourSq.venueflag.featuresVenueHeader=function(a,b){return helpers.venue.compactAttributes(a)};templates.fourSq.venueflag.music=function(a,b){return templates.fourSq.venueflag.checkboxField(soy.$$augmentMap(a,{className:"musicButton",fieldType:"music"}))};
templates.fourSq.venueflag.musicOptionsInputMulti_=function(a,b){a=a||{};return templates.fourSq.venueflag.music({value:"liveMusic",name:"Live Music",checked:null==a.music?null:null==a.music.liveMusic?null:a.music.liveMusic.availability})+templates.fourSq.venueflag.music({value:"jukeboxMusic",name:"Jukebox",checked:null==a.music?null:null==a.music.jukeboxMusic?null:a.music.jukeboxMusic.availability})};
templates.fourSq.venueflag.diningOption=function(a,b){return"\x3cdiv\x3e"+templates.fourSq.venueflag.checkboxField(soy.$$augmentMap(a,{className:"diningOptionButton"}))+"\x3c/div\x3e"};templates.fourSq.venueflag.diningOptionDefault=function(a,b){return"Select one or more"};
templates.fourSq.venueflag.diningOptionPicker=function(a,b){return'\x3cdiv class\x3d"fakeDropdownContainer"\x3e\x3cdiv class\x3d"fakeDropdownContents"\x3e'+templates.fourSq.venueflag.diningOption({value:"sitDownDining",name:"Table Service",checked:null==a.attributeMap.diningOptions?null:null==a.attributeMap.diningOptions.sitDownDining?null:a.attributeMap.diningOptions.sitDownDining.availability})+templates.fourSq.venueflag.diningOption({value:"barService",name:"Bar Service",checked:null==a.attributeMap.diningOptions?
null:null==a.attributeMap.diningOptions.barService?null:a.attributeMap.diningOptions.barService.availability})+templates.fourSq.venueflag.diningOption({value:"takeout",name:"Take-out",checked:null==a.attributeMap.diningOptions?null:null==a.attributeMap.diningOptions.takeout?null:a.attributeMap.diningOptions.takeout.availability})+templates.fourSq.venueflag.diningOption({value:"delivery",name:"Delivery",checked:null==a.attributeMap.diningOptions?null:null==a.attributeMap.diningOptions.delivery?null:
a.attributeMap.diningOptions.delivery.availability})+templates.fourSq.venueflag.diningOption({value:"driveThrough",name:"Drive-thru",checked:null==a.attributeMap.diningOptions?null:null==a.attributeMap.diningOptions.driveThrough?null:a.attributeMap.diningOptions.driveThrough.availability})+'\x3c/div\x3e\x3ca class\x3d"fakeDropdownButton greyButton"\x3e\x3cdiv class\x3d"dropdownSummary diningOptionSummary"\x3e'+templates.fourSq.venueflag.diningOptionDefault(null)+'\x3c/div\x3e\x3cspan class\x3d"arrow"\x3e\x26#x25BC;\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.parking=function(a,b){return templates.fourSq.venueflag.checkboxField(soy.$$augmentMap(a,{className:"parkingButton",fieldType:"parking"}))};
templates.fourSq.venueflag.parkingOptionsInputMulti_=function(a,b){a=a||{};return templates.fourSq.venueflag.parking({value:"streetParking",name:"Street Parking",checked:null==a.parking?null:null==a.parking.streetParking?null:a.parking.streetParking.availability})+templates.fourSq.venueflag.parking({value:"publicLot",name:"Public Lot",checked:null==a.parking?null:null==a.parking.publicLot?null:a.parking.publicLot.availability})+templates.fourSq.venueflag.parking({value:"privateLot",name:"Private Lot",
checked:null==a.parking?null:null==a.parking.privateLot?null:a.parking.privateLot.availability})+templates.fourSq.venueflag.parking({value:"valetParking",name:"Valet Parking",checked:null==a.parking?null:null==a.parking.valetParking?null:a.parking.valetParking.availability})};
templates.fourSq.venueflag.featuresEditForm=function(a,b){var c='\x3cdiv class\x3d"content attributeForm"\x3e'+(a.attributeMap.privateRoom?templates.fourSq.venueflag.toggleInputRow({label:"Private Room",field:"privateRoom",currValue:null==a.attributeMap.privateRoom?null:null==a.attributeMap.privateRoom.privateRoom?null:a.attributeMap.privateRoom.privateRoom.availability}):"");if(a.attributeMap.music)var d=templates.fourSq.venueflag.musicOptionsInputMulti_({music:a.attributeMap.music}),c=c+templates.fourSq.venueflag.toggleInputRow({label:"Music",
field:"hasMusic",currValue:null==a.attributeMap.music?null:null==a.attributeMap.music.hasMusic?null:a.attributeMap.music.hasMusic.availability,extraContent:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraClasses:"inputMulti"});a.attributeMap.diningOptions&&(d=templates.fourSq.venueflag.diningOptionPicker(a),c+=templates.fourSq.venueflag.inputRow({field:"diningOptions",label:"Dining Options",content:d&&d.contentKind&&d.contentKind==
goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d)}));a.attributeMap.parking&&(d=templates.fourSq.venueflag.parkingOptionsInputMulti_({parking:a.attributeMap.parking}),c+=templates.fourSq.venueflag.toggleInputRow({label:"Parking",field:"hasParking",currValue:null==a.attributeMap.parking?null:null==a.attributeMap.parking.hasParking?null:a.attributeMap.parking.hasParking.availability,extraContent:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?
d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraClasses:"inputMulti"}));return c+=(a.attributeMap.wheelchairAccessible?templates.fourSq.venueflag.toggleInputRow({label:"Wheelchair Accessible",field:"wheelchairAccessible",currValue:null==a.attributeMap.wheelchairAccessible?null:null==a.attributeMap.wheelchairAccessible.wheelchairAccessible?null:a.attributeMap.wheelchairAccessible.wheelchairAccessible.availability}):"")+(a.attributeMap.coatCheck?templates.fourSq.venueflag.toggleInputRow({label:"Coat Check",
field:"coatCheck",currValue:null==a.attributeMap.coatCheck?null:null==a.attributeMap.coatCheck.coatCheck?null:a.attributeMap.coatCheck.coatCheck.availability}):"")+(a.attributeMap.smoking?templates.fourSq.venueflag.toggleInputRow({label:"Smoking",field:"smoking",currValue:null==a.attributeMap.smoking?null:null==a.attributeMap.smoking.smoking?null:a.attributeMap.smoking.smoking.availability}):"")+(a.attributeMap.restroom?templates.fourSq.venueflag.toggleInputRow({label:"Restroom",field:"restroom",
currValue:null==a.attributeMap.restroom?null:null==a.attributeMap.restroom.restroom?null:a.attributeMap.restroom.restroom.availability}):"")+(a.attributeMap.atm?templates.fourSq.venueflag.toggleInputRow({label:"ATM",field:"atm",currValue:null==a.attributeMap.atm?null:null==a.attributeMap.atm.atm?null:a.attributeMap.atm.atm.availability}):"")+(a.attributeMap.tvs?templates.fourSq.venueflag.toggleInputRow({label:"TVs",field:"tvs",currValue:null==a.attributeMap.tvs?null:null==a.attributeMap.tvs.tvs?null:
a.attributeMap.tvs.tvs.availability}):"")+"\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.hoursHeader=function(a,b){a=a||{};return'\x3cdiv class\x3d"defaultHoursHeader"\x3eHours\x3c/div\x3e'+(a.showSeasonalHoursEditor?'\x3cdiv class\x3d"seasonalHoursHeader"\x3eSeasonal Hours\x3c/div\x3e':"")};
templates.fourSq.venueflag.hoursVenueHeader=function(a,b){var c='\x3cdiv class\x3d"hoursVenueHeader"\x3e';if(null!=a.hours&&a.hours.timeframes){for(var c=c+'\x3cspan class\x3d"hoursHeader"\x3e',d=a.hours.timeframes,e=d.length,f=0;f<e;f++){for(var g=d[f],c=c+('\x3cspan class\x3d"timeframeDays"\x3e'+soy.$$escapeHtml(g.days)+" \x3c/span\x3e"),g=g.open,h=g.length,l=0;l<h;l++)c+=soy.$$escapeHtml(g[l].renderedTime)+(l!=h-1?", ":"");c+=f!=e-1?", ":""}c+="\x3c/span\x3e"}return c+"\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.namesHelp=function(a,b){return'\x3cdiv class\x3d"namesHelp"\x3eYou can enter names in multiple languages! Check out our \x3ca href\x3d"https://foursquare.atlassian.net/servicedesk/customer/portal/20/topic/f1dc53ca-614a-42dc-8f10-9ce221ef4a12"\x3estyle guide\x3c/a\x3e.\x3c/div\x3e'};
templates.fourSq.venueflag.labeledLatLngHelp=function(a,b){return'\x3cdiv class\x3d"labeledLatLngHelp"\x3eYou can enter the lat/lng that will be displayed as a pin on the map (display lat/lng), or the best lat/lng to navigate to (routing lat/lng), e.g. an entrance to the venue. Most venues do not need a separate routing lat/lng as the display lat/lng is usually acceptable for navigation. However, it is useful for certain large venues or venues without direct street access.\x3c/div\x3e'};
templates.fourSq.venueflag.addressHelp=function(a,b){return'\x3cdiv class\x3d"addressHelp"\x3eNeed help? Check out our \x3ca href\x3d"http://support.foursquare.com/entries/214565-What-is-the-style-guide-for-adding-and-editing-places-"\x3estyle guide\x3c/a\x3e.\x3c/div\x3e'};templates.fourSq.venueflag.parentHelp=function(a,b){return'\x3cdiv class\x3d"parentHelp"\x3eIs this place inside another place (e.g. a mall, an airport)? Enter the name of the place it\'s inside here, or paste a link. \x3ca href\x3d"https://foursquare.atlassian.net/servicedesk/customer/portal/20/topic/f1dc53ca-614a-42dc-8f10-9ce221ef4a12"\x3eLearn more.\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.editInput=function(a,b){return'\x3cinput type\x3d"text" class\x3d"formStyle flagEditInput '+soy.$$escapeHtml(a.fieldName)+(a.extraClass?" "+soy.$$escapeHtml(a.extraClass):"")+'"'+(a.value?'value\x3d"'+soy.$$escapeHtml(a.value)+'"':"")+(a.inputId?'id\x3d"'+soy.$$escapeHtml(a.inputId)+'"':"")+(a.placeholder?'placeholder\x3d"'+soy.$$escapeHtml(a.placeholder)+'"':"")+'name\x3d"'+soy.$$escapeHtml(a.fieldName)+'" aria-label\x3d"'+soy.$$escapeHtml(a.fieldName)+' input" /\x3e'};
templates.fourSq.venueflag.editInputBlock=function(a,b){return'\x3cdiv class\x3d"inputBlock '+soy.$$escapeHtml(a.fieldName)+'"\x3e\x3clabel\x3e\x3cspan class\x3d"inputLabel"\x3e'+soy.$$escapeHtml(a.label)+"\x3c/span\x3e"+templates.fourSq.venueflag.editInput(a)+'\x3c/label\x3e\x3cspan class\x3d"errorMessage"\x3e\x3c/span\x3e\x3c/div\x3e'};templates.fourSq.venueflag.infoHeader=function(a,b){return"Name, Address and Contact Info"};
templates.fourSq.venueflag.infoVenueHeader=function(a,b){return soy.$$escapeHtml(a.venue.name)+" "+helpers.venue.addressCityStateNoCross({location:a.venue.location})};
templates.fourSq.venueflag.addressSection=function(a,b){return function(){var b='\x3cdiv class\x3d"sectionHeader"\x3eAddress and Location\x3c/div\x3e\x3cdiv class\x3d"editBlock"\x3e\x3cdiv class\x3d"leftCol"\x3e';a.venue.permissions.usesAddress&&(b+=templates.fourSq.venueflag.editInputBlock({label:function(a){return a&&a.contentKind&&a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}('Address \x3cspan class\x3d"hoverInfoTip addressTip"\x3e(?)\x3c/span\x3e'),
fieldName:"address",value:a.venue.location.address})+templates.fourSq.venueflag.editInputBlock({label:"Cross street",fieldName:"crossStreet",value:a.venue.location.crossStreet}));var d=helpers.venue.cityState(a.venue),b=b+(templates.fourSq.venueflag.editInputBlock({label:"City",fieldName:"location",value:d,inputId:"locationAutocomplete"})+templates.fourSq.venueflag.editInputBlock({label:"City",fieldName:"city",value:a.venue.location.city})+'\x3cdiv class\x3d"inputBlock state"\x3e\x3clabel\x3e\x3cdiv class\x3d"inputLabel"\x3eState\x3c/div\x3e'+
templates.fourSq.venueflag.editInput({fieldName:"state",value:a.venue.location.state})+'\x3c/label\x3e\x3cspan class\x3d"errorMessage"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rightCol"\x3e'+templates.fourSq.venueflag.editInputBlock({label:"Postal Code",fieldName:"zip",value:a.venue.location.postalCode})+(a.venue.permissions.hideNeighborhood?"":templates.fourSq.venueflag.editInputBlock({label:"Neighborhood",fieldName:"neighborhood",extraClass:"location",value:null!=a.venue.location.neighborhood?
a.venue.location.neighborhood:"",inputId:"locationAutocomplete"}))+'\x3cdiv class\x3d"country inputBlock"\x3e\x3clabel\x3e\x3cdiv class\x3d"inputLabel"\x3eCountry\x3c/div\x3e\x3cselect class\x3d"countryPicker" aria-label\x3d"Country select"\x3e\x3c/select\x3e\x3c/label\x3e\x3cspan class\x3d"errorMessage"\x3e\x3c/span\x3e\x3c/div\x3e');a.showAdvanced&&(d=soy.$$escapeHtml(a.venue.location.lat+","+a.venue.location.lng),b+=templates.fourSq.venueflag.editInputBlock({label:function(a){return a&&a.contentKind&&
a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}("Lat/Lng"+(a.showLabeledLatLngEditor?'\x3cspan class\x3d"hoverInfoTip labeledLatLngTipDisplay"\x3e(?)\x3c/span\x3e':"")),fieldName:"ll",value:d}),a.showLabeledLatLngEditor&&(d=templates.fourSq.venueflag.routingLatLng({location:a.venue.location,setLabeledLatLngByDefault:a.setLabeledLatLngByDefault}),b+=templates.fourSq.venueflag.editInputBlock({label:function(a){return a&&a.contentKind&&a.contentKind==
goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}('Routing Lat/Lng\x3cspan class\x3d"hoverInfoTip labeledLatLngTipRouting"\x3e(?)\x3c/span\x3e'),fieldName:"labeledLL",value:d})+'\x3cdiv class\x3d"link editLatLng"\x3e\x3cdiv class\x3d"link editRoutingLatLng"\x3eEdit routing lat/lng\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"link editLatLng"\x3e\x3cdiv class\x3d"link editDisplayLatLng"\x3eEdit display lat/lng\x3c/div\x3e\x3c/div\x3e'));return b+="\x3c/div\x3e"+(a.showParentEditor?
'\x3cdiv class\x3d"parentEditor"\x3e\x3clabel\x3e\x3cspan class\x3d"inputLabel"\x3eInside \x3cspan class\x3d"hoverInfoTip parentTip"\x3e(?)\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"parentBlock"\x3e\x3cdiv class\x3d"parentWrapper"\x3e'+templates.fourSq.venueflag.subvenueSection(a)+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e":"")+"\x3c/div\x3e"}()};
templates.fourSq.venueflag.routingLatLng=function(a,b){return function(){var b="";if(a.setLabeledLatLngByDefault)var d=_.filter(a.location.labeledLatLngs,function(a){return"routing"===a.label}),b=b+(0<d.length?soy.$$escapeHtml(d[0].lat)+","+soy.$$escapeHtml(d[0].lng):"");return b}()};templates.fourSq.venueflag.missingName=function(a,b){return"\x3cdiv\x3ePlease enter a name\x3c/div\x3e"};templates.fourSq.venueflag.missingLanguage=function(a,b){return"\x3cdiv\x3ePlease enter a language\x3c/div\x3e"};
templates.fourSq.venueflag.nameAddSection=function(a,b){return'\x3cdiv class\x3d"nameAddSection"\x3e\x3cdiv class\x3d"errors"\x3e\x3c/div\x3e\x3cdiv class\x3d"languageAutocompleteHolder"\x3e\x3cdiv class\x3d"helpLabel"\x3eLanguage\x3c/div\x3e\x3cselect class\x3d"lang" placeholder\x3d"Language" aria-label\x3d"Language select" /\x3e\x3c/div\x3e\x3cdiv class\x3d"nameInputHolder"\x3e\x3cdiv class\x3d"helpLabel"\x3eName\x3c/div\x3e\x3cinput class\x3d"name" placeholder\x3d"Name" aria-label\x3d"Venue name input" /\x3e\x3c/div\x3e\x3cdiv class\x3d"link addButton greenButton"\x3eAdd Name\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.nameRow=function(a,b){return'\x3cdiv class\x3d"nameRow"\x3e\x3cdiv class\x3d"lang" data-lang\x3d'+soy.$$escapeHtml(a.langCode)+"\x3e"+soy.$$escapeHtml(a.langName)+'\x3c/div\x3e\x3cinput name\x3d"name'+(a.langCode&&"unk"!=a.langCode?":"+soy.$$escapeHtml(a.langCode):"")+'" class\x3d"nameInput formStyle" data-lang\x3d"'+soy.$$escapeHtml(a.langCode)+'" value\x3d"'+soy.$$escapeHtml(a.name)+'" aria-label\x3d"language" /\x3e'+("unk"!=a.langCode?'\x3cdiv class\x3d"removeButton link"\x3eremove\x3c/div\x3e':
"")+"\x3c/div\x3e"};templates.fourSq.venueflag.translatedNameEditor=function(a,b){return'\x3cdiv class\x3d"namesTable"\x3e\x3c/div\x3e'+templates.fourSq.venueflag.nameAddSection(null)};
templates.fourSq.venueflag.contactSection=function(a,b){var c='\x3cdiv class\x3d"sectionHeader"\x3eContact and Other Info\x3c/div\x3e\x3cdiv class\x3d"editBlock"\x3e\x3cdiv class\x3d"leftCol"\x3e'+(a.venue.permissions.usesPhone?templates.fourSq.venueflag.editInputBlock({label:"Phone",fieldName:"phone",value:a.venue.contact.formattedPhone}):"")+templates.fourSq.venueflag.editInputBlock({label:"Website",fieldName:"url",value:a.venue.url})+'\x3c/div\x3e\x3cdiv class\x3d"rightCol"\x3e',d=a.venue.contact.twitter?
soy.$$escapeHtml("@"+a.venue.contact.twitter):"",c=c+(templates.fourSq.venueflag.editInputBlock({label:"Twitter",fieldName:"twitter",value:d,placeholder:"@twittername"})+(a.showFacebookEditor?templates.fourSq.venueflag.editInputBlock({label:"Facebook",fieldName:"facebookUrl",value:a.venue.contact.facebookUsername?"https://facebook.com/"+soy.$$escapeHtml(a.venue.contact.facebookUsername):a.venue.contact.facebook?"https://facebook.com/"+soy.$$escapeHtml(a.venue.contact.facebook):"",placeholder:"facebook.com/username"}):
""));a.showInstagramEditor&&(d=a.venue.contact.instagram?soy.$$escapeHtml("@"+a.venue.contact.instagram):"",c+=templates.fourSq.venueflag.editInputBlock({label:"Instagram",fieldName:"instagram",value:d,placeholder:"@instagramhandle"}));return c+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.venueflag.subvenueSection=function(a,b){return'\x3cdiv class\x3d"parentSection '+(a.venue.parent?"displayMode":"inputMode")+'"\x3e\x3cdiv class\x3d"parentDisplay"\x3e'+(a.venue.parent?templates.fourSq.venue.editing.venueDisplay({venue:a.venue.parent}):"")+'\x3c/div\x3e\x3cdiv class\x3d"parentChooser autocomplete"\x3e'+templates.fourSq.helper.autocomplete.desktop.base({initialLocation:"",hideLocation:!0})+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.venueflag.venueDisplay=function(a,b){return'\x3cdiv class\x3d"venueDisplay"\x3e\x3cspan class\x3d"venueName"\x3e'+soy.$$escapeHtml(a.venue.name)+'\x3c/span\x3e\x3cspan class\x3d"venueIcon"\x3e'+helpers.category.iconOrDefault({icon:null==a.venue?null:null==a.venue.categories[0]?null:a.venue.categories[0].icon})+'\x3c/span\x3e\x3cspan class\x3d"unselect"\x3e\x3c/span\x3e\x3c/div\x3e'};templates.fourSq.venueflag.latLngError=function(a,b){return"\x3cspan\x3eLat/Lng is invalid\x3c/span\x3e"};
templates.fourSq.venueflag.info=function(a,b){return'\x3cdiv class\x3d"flagVenueInfo cityAutocomplete"\x3e\x3cdiv class\x3d"errorMessage"\x3e\x3c/div\x3e\x3cdiv class\x3d"inputArea"\x3e\x3cdiv class\x3d"primaryNameArea"\x3e\x3cdiv class\x3d"primaryNameLabel"\x3e\x3clabel\x3eName'+(a.showTranslatedNameEditor?'\x3cspan class\x3d"hoverInfoTip namesTip"\x3e(?)\x3c/span\x3e':"")+(a.primaryNameLanguage&&a.showTranslatedNameEditor?"\x3cbr/\x3e("+soy.$$escapeHtml(a.primaryNameLanguage)+")":"")+'\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"nameInputDiv"\x3e\x3cinput class\x3d"formStyle venueNameInput nameInput flagEditInput" data-lang\x3d"'+
soy.$$escapeHtml(a.venue.nameLang)+'" type\x3d"text" aria-label\x3d"Venue name input"'+(a.primaryNameOverride&&a.showTranslatedNameEditor?'value\x3d"'+soy.$$escapeHtml(a.primaryNameOverride)+'"':'value\x3d"'+soy.$$escapeHtml(a.venue.name)+'"')+'name\x3d"name"/\x3e\x3cdiv class\x3d"errorMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+(a.showTranslatedNameEditor?'\x3cdiv class\x3d"link editOtherNames"\x3eEdit names in other languages\x3c/div\x3e\x3cdiv class\x3d"namesSection"\x3e\x3c/div\x3e':"")+"\x3c/div\x3e"+
templates.fourSq.venueflag.addressSection(a)+templates.fourSq.venueflag.contactSection(a)+(a.venue.allowMenuUrlEdit?'\x3cdiv class\x3d"menu editBlock inputBlock"\x3e\x3clabel\x3e\x3cspan class\x3d"inputLabel"\x3eMenu\x3c/span\x3e\x3c/label\x3e'+templates.fourSq.venueflag.editInput({value:null!=(null==a.venue.menu?null:a.venue.menu.externalUrl)?null==a.venue.menu?null:a.venue.menu.externalUrl:"",fieldName:"menuUrl",placeholder:"Link to the menu on another site"})+'\x3cdiv class\x3d"errorMessage"\x3e\x3c/div\x3e\x3c/div\x3e':
"")+'\x3cdiv class\x3d"description editBlock inputBlock"\x3e\x3clabel\x3e\x3cspan class\x3d"inputLabel"\x3eDescription\x3c/span\x3e\x3c/label\x3e\x3ctextarea name\x3d"description" class\x3d"formStyle description flagEditInput" aria-label\x3d"flag description input"\x3e'+(a.venue.description?soy.$$escapeHtml(a.venue.description):"")+'\x3c/textarea\x3e\x3cdiv class\x3d"errorMessage"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"id"\x3e\x3cspan class\x3d"inputLabel" style\x3d"user-select: none;"\x3eId\x3c/span\x3e\x3cspan class\x3d"id" aria-label\x3d"place id"\x3e'+
soy.$$escapeHtml(a.venue.id)+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv\x3e"+templates.fourSq.venue.editing.mapEditor({id:"flagMap",initialHelp:templates.fourSq.venue.editing.mapHelpMoveCorrection(null)})+'\x3cdiv class\x3d"osmLink"\x3e\x3ca href\x3d"http://www.openstreetmap.org/edit?editor\x3did"\x3eEdit map\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.venueflag.noGeoResultsMessage=function(a,b){return'\x3ca class\x3d"ui-corner-all"\x3eNo matches, use this location anyway?\x3c/a\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.modalRoot=function(a,b){return'\x3cdiv\x3e\x3cdiv class\x3d"accordion"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttons"\x3e\x3ca class\x3d"disabledButton saveButton"\x3eSubmit\x3c/a\x3e\x3ca class\x3d"cancelButton"\x3eCancel\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.removeHeader=function(a,b){return"Problem with this place?"};templates.fourSq.venueflag.removeOption=function(a,b){return'\x3cdiv class\x3d"removeReasonButton '+soy.$$escapeHtml(a.className)+'"\x3e\x3cdiv class\x3d"image"\x3e\x3c/div\x3e\x3cdiv class\x3d"label"\x3e'+soy.$$escapeHtml(a.label)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.venueflag.privateHelp=function(a,b){return'\x3cdiv class\x3d"helpMsg"\x3ePrivate places (like \u201cMy Car\u201d or \u201cOffice Rooftop\u201d) will be hidden from search results, except to people who check in often and their friends. Places categorized as homes have extra privacy settings (see this \x3ca href\x3d"http://support.foursquare.com/entries/20454393-Can-I-make-my-home-private-on-Foursquare-" rel\x3d"nofollow" target\x3d"_blank"\x3eFAQ\x3c/a\x3e for more details).\x3c/div\x3e'};
templates.fourSq.venueflag.closedHelp=function(a,b){return'\x3cdiv class\x3d"helpMsg"\x3eThis place has gone out of business or been replaced with a different business. Or, this is an temporary event that has ended.\x3c/div\x3e'};templates.fourSq.venueflag.reopenHelp=function(a,b){return'\x3cdiv class\x3d"helpMsg"\x3eWas this place erroneously flagged as out of business?\x3c/div\x3e'};templates.fourSq.venueflag.un_deleteHelp=function(a,b){return'\x3cdiv class\x3d"helpMsg"\x3eWas this place erroneously deleted?\x3c/div\x3e'};
templates.fourSq.venueflag.doesntExistHelp=function(a,b){return'\x3cdiv class\x3d"helpMsg"\x3eIs this not a real place?\x3c/div\x3e'};templates.fourSq.venueflag.inappropriateHelp=function(a,b){return'\x3cdiv class\x3d"helpMsg"\x3eThe name of this place is hateful, vulgar, harassing, or obscene. If tips or photos are inappropriate, please report them individually.\x3c/div\x3e'};
templates.fourSq.venueflag.remove=function(a,b){return'\x3cdiv class\x3d"venueEditContent removePane"\x3e\x3cdiv class\x3d"removeOptions"\x3e\x3cdiv class\x3d"introText"\x3ePick the option that best finishes the sentence: "This place is ..."\x3c/div\x3e'+templates.fourSq.venueflag.removeButtons_(null)+"\x3c/div\x3e"+templates.fourSq.venueflag.commentBox_(null)+'\x3cdiv class\x3d"removeSecondaryPanel"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.commentBox_=function(a,b){return'\x3ctextarea class\x3d"formStyle problemReason" placeholder\x3d"'+templates.fourSq.venueflag.commentBoxPlaceholder_(null)+'"\x3e\x3c/textarea\x3e'};templates.fourSq.venueflag.commentBoxPlaceholder_=function(a,b){return"Any additional comments?"};
templates.fourSq.venueflag.removeButtons_=function(a,b){return'\x3cdiv class\x3d"removeReasonButtons"\x3e'+templates.fourSq.venueflag.removeOption({label:"Closed",className:"closed"})+templates.fourSq.venueflag.removeOption({label:"Not closed",className:"not_closed"})+templates.fourSq.venueflag.removeOption({label:"Real / Not Spam",className:"un_delete"})+templates.fourSq.venueflag.removeOption({label:"Inappropriate",className:"inappropriate"})+templates.fourSq.venueflag.removeOption({label:"A Duplicate",
className:"duplicate"})+templates.fourSq.venueflag.removeOption({label:"A Home",className:"home"})+templates.fourSq.venueflag.removeOption({label:"Private / Other",className:"private"})+"\x3c/div\x3e"};
templates.fourSq.venueflag.duplicateItem=function(a,b){return'\x3cdiv class\x3d"duplicateEntry"\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox" class\x3d"duplicate" /\x3e\x3cdiv class\x3d"dupeVenueInfo"\x3e'+helpers.venue.nameWithLink({venue:a.venue,target:"_blank"})+(a.venue.location.address?'\x3cspan class\x3d"address" title\x3d"'+soy.$$escapeHtml(a.venue.location.address)+'"\x3e'+soy.$$escapeHtml(a.venue.location.address)+"\x3c/span\x3e":"")+((null==a.venue?0:null==a.venue.location?0:a.venue.location.distance)?
soy.$$escapeHtml(a.venue.location.distance)+" meters away":"")+"\x3c/div\x3e\x3c/label\x3e\x3c/div\x3e"};templates.fourSq.venueflag.duplicates=function(a,b){return'\x3cdiv\x3e\x3cdiv class\x3d"dupesSpinner"\x3eLooking for likely duplicates ...\x3cbr/\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+'" height\x3d"32" width\x3d"32" alt\x3d"wait"/\x3e\x3c/div\x3e\x3cdiv class\x3d"noDupesMsg hiddenForSearch"\x3eSorry, we couldn\'t find any likely duplicates for this venue, if you know of a venue that is a duplicate of this venue, please enter it below.\x3c/div\x3e\x3cp class\x3d"helpMsg hiddenForSearch hiddenForNoDupes"\x3eAre any of these duplicates of this place? Check all that apply\x3c/p\x3e\x3cdiv class\x3d"duplicatesListSection hiddenForSearch hiddenForNoDupes"/\x3e\x3cdiv class\x3d"questionSection hiddenForSearch hiddenForNoDupes"\x3eIs there a duplicate place that isn\u2019t on this list? Enter the Foursquare URL or ID.\x3c/div\x3e\x3cdiv class\x3d"hiddenForSearch"\x3e\x3cinput type\x3d"text" class\x3d"formStyle dupeInput" placeholder\x3d"Foursquare ID or URL"/\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.homeReasonRow=function(a,b){return'\x3cdiv class\x3d"homeReasonRow"\x3e\x3clabel\x3e\x3cinput id\x3d"'+soy.$$escapeHtml(a.value)+'" type\x3d"radio" value\x3d"'+soy.$$escapeHtml(a.value)+'" name\x3d"home" class\x3d"home"/\x3e'+soy.$$escapeHtml(a.label)+"\x3c/label\x3e\x3c/div\x3e"};
templates.fourSq.venueflag.home=function(a,b){return"\x3cdiv\x3e"+templates.fourSq.venueflag.homeReasonRow({label:"This place should be categorized as a home",value:"home_recategorize"})+templates.fourSq.venueflag.homeReasonRow({label:"This place is my home and I\u2019d like to remove it",value:"home_remove"})+'\x3cp class\x3d"helpMsg"\x3eThe exact address and location of homes are hidden on Foursquare, except to the people who created them and their friends. For more information on homes and private places, see \x3ca href\x3d"http://support.foursquare.com/entries/20454393-Can-I-make-my-home-private-on-Foursquare-"\x3eour FAQ\x3c/a\x3e.\x3c/p\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venueflag&&(templates.fourSq.venueflag={});templates.fourSq.venueflag.attributesHeader=function(a,b){return"Details"};templates.fourSq.venueflag.attributesVenueHeader=function(a,b){return helpers.venue.compactAttributesWithoutPrice(a)};
templates.fourSq.venueflag.pricingAttributeInputMulti_=function(a,b){return'\x3clabel\x3e\x3cinput type\x3d"checkbox" data-field\x3d"'+soy.$$escapeHtml(a.field)+'" value\x3d"free" class\x3d"pricingAttribute '+soy.$$escapeHtml(a.field)+'"'+("free"==a.currValue||"freeandpaid"==a.currValue?"checked":"")+'/\x3eFree\x3c/label\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox" data-field\x3d"'+soy.$$escapeHtml(a.field)+'" value\x3d"paid" class\x3d"pricingAttribute '+soy.$$escapeHtml(a.field)+'"'+("paid"==a.currValue||
"freeandpaid"==a.currValue?"checked":"")+"/\x3ePaid\x3c/label\x3e"};templates.fourSq.venueflag.card=function(a,b){return templates.fourSq.venueflag.checkboxField(soy.$$augmentMap(a,{className:"cardButton",fieldType:"card"}))};
templates.fourSq.venueflag.cardPicker=function(a,b){return templates.fourSq.venueflag.card({value:"visa",name:"Visa",checked:null==a.attributeMap.payments.visa?null:a.attributeMap.payments.visa.availability})+templates.fourSq.venueflag.card({value:"masterCard",name:"MasterCard",checked:null==a.attributeMap.payments.masterCard?null:a.attributeMap.payments.masterCard.availability})+templates.fourSq.venueflag.card({value:"americanExpress",name:"American Express",checked:null==a.attributeMap.payments.americanExpress?
null:a.attributeMap.payments.americanExpress.availability})+templates.fourSq.venueflag.card({value:"discover",name:"Discover",checked:null==a.attributeMap.payments.discover?null:a.attributeMap.payments.discover.availability})+(null!=a.showNfc&&a.showNfc?templates.fourSq.venueflag.card({value:"nfc",name:"NFC Payments",checked:null==a.attributeMap.payments.nfc?null:a.attributeMap.payments.nfc.availability}):"")};
templates.fourSq.venueflag.priceInput=function(a,b){return'\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"price" data-field\x3d"priceTier" value\x3d"'+soy.$$escapeHtml(a.value)+'" class\x3d"availabilityAttribute priceTier"'+(a.currValue==a.value?"checked":"")+"/\x3e"+soy.$$escapeHtml(a.label)+"\x3c/label\x3e"};
templates.fourSq.venueflag.pricePicker=function(a,b){return function(){return templates.fourSq.venueflag.priceInput({label:a.currency,value:"1",currValue:a.currValue})+templates.fourSq.venueflag.priceInput({label:_([a.currency,a.currency]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(""),value:"2",currValue:a.currValue})+templates.fourSq.venueflag.priceInput({label:_([a.currency,a.currency,a.currency]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(""),
value:"3",currValue:a.currValue})+templates.fourSq.venueflag.priceInput({label:_([a.currency,a.currency,a.currency,a.currency]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(""),value:"4",currValue:a.currValue})}()};templates.fourSq.venueflag.meal=function(a,b){return"\x3cdiv\x3e"+templates.fourSq.venueflag.checkboxField(soy.$$augmentMap(a,{className:"mealButton"}))+"\x3c/div\x3e"};templates.fourSq.venueflag.mealSummaryDefault=function(a,b){return"Select one or more"};
templates.fourSq.venueflag.mealPicker=function(a,b){return'\x3cdiv class\x3d"fakeDropdownContainer"\x3e\x3cdiv class\x3d"fakeDropdownContents"\x3e'+templates.fourSq.venueflag.meal({value:"breakfast",name:"Breakfast",checked:null==a.attributeMap.serves?null:null==a.attributeMap.serves.breakfast?null:a.attributeMap.serves.breakfast.availability})+templates.fourSq.venueflag.meal({value:"brunch",name:"Brunch",checked:null==a.attributeMap.serves?null:null==a.attributeMap.serves.brunch?null:a.attributeMap.serves.brunch.availability})+
templates.fourSq.venueflag.meal({value:"lunch",name:"Lunch",checked:null==a.attributeMap.serves?null:null==a.attributeMap.serves.lunch?null:a.attributeMap.serves.lunch.availability})+templates.fourSq.venueflag.meal({value:"happyHour",name:"Happy Hour",checked:null==a.attributeMap.serves?null:null==a.attributeMap.serves.happyHour?null:a.attributeMap.serves.happyHour.availability})+templates.fourSq.venueflag.meal({value:"dinner",name:"Dinner",checked:null==a.attributeMap.serves?null:null==a.attributeMap.serves.dinner?
null:a.attributeMap.serves.dinner.availability})+templates.fourSq.venueflag.meal({value:"dessert",name:"Dessert",checked:null==a.attributeMap.serves?null:null==a.attributeMap.serves.dessert?null:a.attributeMap.serves.dessert.availability})+'\x3c/div\x3e\x3ca class\x3d"fakeDropdownButton greyButton"\x3e\x3cdiv class\x3d"dropdownSummary mealSummary"\x3e'+templates.fourSq.venueflag.mealSummaryDefault(null)+'\x3c/div\x3e\x3cspan class\x3d"arrow"\x3e\x26#x25BC;\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.drink=function(a,b){return"\x3cdiv\x3e"+templates.fourSq.venueflag.checkboxField(soy.$$augmentMap(a,{className:"drinkButton"}))+"\x3c/div\x3e"};templates.fourSq.venueflag.drinkSummaryDefault=function(a,b){return"Select one or more"};
templates.fourSq.venueflag.drinkPicker=function(a,b){return'\x3cdiv class\x3d"fakeDropdownContainer"\x3e\x3cdiv class\x3d"fakeDropdownContents"\x3e'+templates.fourSq.venueflag.drink({value:"beer",name:"Beer",checked:null==a.attributeMap.drinks?null:null==a.attributeMap.drinks.beer?null:a.attributeMap.drinks.beer.availability})+templates.fourSq.venueflag.drink({value:"wine",name:"Wine",checked:null==a.attributeMap.drinks?null:null==a.attributeMap.drinks.wine?null:a.attributeMap.drinks.wine.availability})+
templates.fourSq.venueflag.drink({value:"fullBar",name:"Full Bar",checked:null==a.attributeMap.drinks?null:null==a.attributeMap.drinks.fullBar?null:a.attributeMap.drinks.fullBar.availability})+templates.fourSq.venueflag.drink({value:"cocktails",name:"Cocktails",checked:null==a.attributeMap.drinks?null:null==a.attributeMap.drinks.cocktails?null:a.attributeMap.drinks.cocktails.availability})+templates.fourSq.venueflag.drink({value:"byo",name:"BYO",checked:null==a.attributeMap.drinks?null:null==a.attributeMap.drinks.byo?
null:a.attributeMap.drinks.byo.availability})+'\x3c/div\x3e\x3ca class\x3d"fakeDropdownButton greyButton"\x3e\x3cdiv class\x3d"dropdownSummary drinkSummary"\x3e'+templates.fourSq.venueflag.drinkSummaryDefault(null)+'\x3c/div\x3e\x3cspan class\x3d"arrow"\x3e\x26#x25BC;\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venueflag.attributeEditForm=function(a,b){var c='\x3cdiv class\x3d"content attributeForm"\x3e';if(a.attributeMap.serves)var d=templates.fourSq.venueflag.mealPicker(a),c=c+templates.fourSq.venueflag.inputRow({field:"meals",label:"Serves",content:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraClasses:"restaurantAttribute"}),d=templates.fourSq.venueflag.drinkPicker(a),c=c+templates.fourSq.venueflag.inputRow({field:"drinks",
label:"Drinks",content:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraClasses:"restaurantAttribute"});a.attributeMap.price&&(d=templates.fourSq.venueflag.pricePicker({currValue:null==a.attributeMap.price?null:null==a.attributeMap.price.price?null:a.attributeMap.price.price.priceTier,currency:fourSq.util.safeSubstring(null==a.attributeMap.price?null:null==a.attributeMap.price.price?null:a.attributeMap.price.price.displayValue,
0,1)}),c+=templates.fourSq.venueflag.inputRow({field:"price",label:"Price",content:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d)}));a.attributeMap.payments&&(d=templates.fourSq.venueflag.cardPicker(a),c+=templates.fourSq.venueflag.toggleInputRow({label:"Credit Cards",field:"creditCards",currValue:null==a.attributeMap.payments.creditCards?null:a.attributeMap.payments.creditCards.availability,extraContent:d&&d.contentKind&&d.contentKind==
goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraClasses:"inputMulti"}));c+=a.attributeMap.reservations?templates.fourSq.venueflag.toggleInputRow({label:"Reservations",field:"reservations",currValue:null==a.attributeMap.reservations?null:null==a.attributeMap.reservations.reservations?null:a.attributeMap.reservations.reservations.availability}):"";a.attributeMap.wifi&&(d=templates.fourSq.venueflag.pricingAttributeInputMulti_({field:"wifi",currValue:null==a.attributeMap.wifi?
null:null==a.attributeMap.wifi.wifi?null:a.attributeMap.wifi.wifi.pricing}),c+=templates.fourSq.venueflag.toggleInputRow({label:"Wi-Fi",field:"wifi",currValue:null==a.attributeMap.wifi?null:null==a.attributeMap.wifi.wifi?null:a.attributeMap.wifi.wifi.availability,extraContent:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),extraClasses:"inputMulti"}));return c+=(a.attributeMap.outdoorSeating?templates.fourSq.venueflag.toggleInputRow({label:"Outdoor Seating",
field:"outdoorSeating",currValue:null==a.attributeMap.outdoorSeating?null:null==a.attributeMap.outdoorSeating.outdoorSeating?null:a.attributeMap.outdoorSeating.outdoorSeating.availability}):"")+(a.attributeMap.delivery?templates.fourSq.venueflag.toggleInputRow({label:"Delivery",field:"delivery",currValue:null==a.attributeMap.delivery?null:null==a.attributeMap.delivery.delivery?null:a.attributeMap.delivery.delivery.availability}):"")+"\x3c/div\x3e"};fourSq.venueflag.views.CategorySingletonFactory=function(a,b){};
fourSq.venueflag.views.CategorySingletonFactory=fourSq.EventTarget.extend({categoryByIdMap_:null,categoryParentsMap_:null,done:!1,getCategory:function(a){return this.categoryByIdMap_[a]},getParentIds:function(a){return this.categoryParentsMap_[a]},init:function(){fourSq.api.services.Venue.categories({},fourSq.bind(this.parseCategories,this));return this.done_},parseCategories:function(a){this.parseCategoriesHelper(a,[]);this.trigger("categoriesParsed");this.done_=!0},parseCategoriesHelper:function(a,
b){this.categoryByIdMap_={};this.categoryParentsMap_={};_.each(a,fourSq.bind(function(a){this.categoryByIdMap_[a.id]=a;this.categoryParentsMap_[a.id]=b;this.parseCategoriesHelper(a.categories,b.concat([a.id]))},this))}});fourSq.venueflag.views.CategorySingleton=new fourSq.venueflag.views.CategorySingletonFactory;fourSq.venueflag.views.Step2Frame=function(a){};fourSq.venueflag.views.Step2Frame=fourSq.ui.View.extend({name:function(){},initialize:function(a){this.model=a.model;this.decorated=this.modified=this.editOkay=!1},header:function(){},venueHeader:function(){},save:fourSq.emptyFunction,enableSave:function(){this.modified=this.editOkay=!0;this.trigger("enableSave")},disableSave:function(){this.trigger("disableSave")},validationError:function(){this.editOkay=!1;this.trigger("validationError")}});fourSq.venueflag.views.VenueFlagAccordion=function(a){};
fourSq.venueflag.views.VenueFlagAccordion=fourSq.ui.View.extend({initialize:function(a){this.venues_=a.venues;this.expandedPanes_=a.expandedPanes||["info"];this.alwaysExpandedPanes_=a.alwaysExpandedPanes||[];this.hiddenPanes_=a.hiddenPanes||[];this.creatingView_=a.creatingView;this.highlightedField_=a.highlightedField;this.config_=a.config;this.checkinLocations_=a.checkinLocations||[];this.linkToQueues_=this.inviteForSU_=!1},saveSuccess:function(){this.trigger("showFinalMessage",$(templates.fourSq.venueflag.successMaybeUpsell({inviteForSU:this.inviteForSU_,
linkToQueues:this.linkToQueues_})),this.inviteForSU_,this.linkToQueues_)},saveFailure:function(a){"string"===typeof a&&a||(a=$(templates.fourSq.venueflag.genericFailure()));this.trigger("showFinalMessage",a,!1,!1)},allPanesOkay:function(){return _.every(this.views_,function(a){return!a.modified||a.editOkay})},checkIfInviteForSU:function(){(this.config_.afterEditUpsellToSU||this.config_.afterEditUpsellToQueues)&&fourSq.api.services.User.upgradeEligible("self",fourSq.bind(function(a){this.inviteForSU_=
this.config_.afterEditUpsellToSU&&"shouldInvite"===a.eligible},this),fourSq.emptyFunction)},createViews_:function(){var a=[new fourSq.venueflag.views.InfoFrame({model:this.model,checkinLocations:this.checkinLocations_,creatingView:this.creatingView_,highlightedField:this.highlightedField_,config:this.config_}),new fourSq.venueflag.views.CategoryFrame({model:this.model,creatingView:this.creatingView_}),new fourSq.venueflag.views.HoursFrame({model:this.model,creatingView:this.creatingView_,showSeasonalHoursEditor:this.config_.showSeasonalHoursEditor})];
if(this.config_.showChainEditor){var b=new fourSq.venueflag.views.ChainFrame({model:this.model,creatingView:this.creatingView_});a.splice(2,0,b)}var c=[];this.model.permissions.canEditAttributes&&(b=new fourSq.venueflag.views.AttributesFrame({model:this.model,creatingView:this.creatingView_,config:this.config_}),a.push(b),c.push(b));this.config_.showFeaturesFrame&&(b=new fourSq.venueflag.views.FeaturesFrame({model:this.model,creatingView:this.creatingView_}),a.push(b),c.push(b));fourSq.api.services.Venue.attributes(this.model.id,
function(a){_.each(c,function(b){b.onAttributesReceived(a)})});a.push(new fourSq.venueflag.views.RemoveFrame({model:this.model,venues:this.venues_,creatingView:this.creatingView_}));return a},render:function(){this.views_=this.createViews_();fourSq.api.models.companion.user.UserUtil.currentUser();this.checkIfInviteForSU();this.saveButton_=this.$el.find(".saveButton");this.saveButton_.click(fourSq.bind(function(a){$(a.target).prop("disabled")||(this.saveButton_.addClass("disabledButton"),this.saveButton_.prop("disabled",
!0),this.saveButton_.removeClass("greenButton"),fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.SUBMIT,{section:fourSq.stats.action.Section.VENUE_DETAIL_EDITING_MODAL,element:fourSq.stats.action.Element.SAVE_EDIT,ids:fourSq.api.models.companion.log.Oids.build({venueId:this.model.id})})),_.each(this.views_,fourSq.bind(function(a){a.modified&&a.save(fourSq.bind(this.saveSuccess,this),fourSq.bind(this.saveFailure,this))},this)))},this));this.views_=_.filter(this.views_,fourSq.bind(function(a){return-1===
this.hiddenPanes_.indexOf(a.name())},this));var a=[];_.each(this.views_,fourSq.bind(function(b){var c=$(templates.fourSq.venueflag.accordionRow({}));c.find(".headerText").append(b.header());c.find(".headerVenueText").append(b.venueHeader());var d=b.render(),e=c.find(".accordionPane"),f=fourSq.bind(function(){c.addClass("updated").removeClass("error");this.allPanesOkay()&&(this.saveButton_.removeClass("disabledButton"),this.saveButton_.prop("disabled",!1),this.saveButton_.addClass("greenButton"))},
this),g=fourSq.bind(function(){this.allPanesOkay()||(this.saveButton_.addClass("disabledButton"),this.saveButton_.prop("disabled",!0),this.saveButton_.removeClass("greenButton"))},this),h=fourSq.bind(function(){g();c.addClass("error")},this);if(_.contains(this.alwaysExpandedPanes_,b.name())||_.contains(this.expandedPanes_,b.name()))c.addClass("expanded"),_.contains(this.alwaysExpandedPanes_,b.name())&&c.addClass("alwaysExpanded"),b.decorated=!0,a.push(fourSq.bind(b.decorate,b)),d.on("enableSave",
f),d.on("disableSave",g),d.on("validationError",h);e.append(d.el);_.contains(this.alwaysExpandedPanes_,b.name())||(e=c.find(".accordionHeader"),e.addClass("expandable"),e.click(fourSq.bind(function(){var a=c.hasClass("expanded");this.$el.find(".accordionRow").removeClass("expanded");a||(c.addClass("expanded"),b.decorated||(b.decorated=!0,b.decorate()));d.on("enableSave",f);d.on("disableSave",g);d.on("validationError",h)},this)));this.$el.find(".accordion").append(c)},this));a&&_.each(a,fourSq.bind(function(a){a()},
this));return this}});fourSq.venueflag.views.DialogWizard=function(a){};
fourSq.venueflag.views.DialogWizard=fourSq.ui.View.extend({initialize:function(a){this.expandedPanes_=a.expandedPanes||["info"];this.model=a.model;this.config_=a.config;this.checkinLocations_=a.checkinLocations||[];this.creatingView_=a.creatingView},render:function(){this.dialog_||(this.setEl_($(templates.fourSq.venueflag.modalRoot({}))),this.config_.showOsmEditLink&&this.$el.addClass("showOsmEditLink"),this.accordion_=new fourSq.venueflag.views.VenueFlagAccordion({el:this.el,expandedPanes:this.expandedPanes_,
model:this.model,venues:null,checkinLocations:this.checkinLocations_,creatingView:this.creatingView_,config:this.config_}),this.dialog_=new fourSq.ui.dialog.Dialog({contentElement:this.$el,className:"venueFlagModal",hasCloseButton:!0,opacity:.1,positionTop:!0}),this.accordion_.on("showFinalMessage",fourSq.bind(this.showFinalMessage,this)),this.$el.find(".cancelButton").click(fourSq.bind(function(){this.dialog_.close()},this)),this.dialog_.show(),this.accordion_.render())},showFinalMessage:function(a,
b,c){this.$el.empty().append(a);$(".venueFlagModal .content").addClass("afterEdit");this.logUpsell_(b,c);b||c||setTimeout(fourSq.bind(function(){this.dialog_.close()},this),6E3)},logUpsell_:function(a,b){if(a||b){var c=fourSq.stats.action.Section.VENUE_DETAIL_EDITING_MODAL,d,e=fourSq.stats.action.Element.UPSELL_ACCEPT_LINK,f=null;a?(d=fourSq.stats.action.Component.UPSELL_TO_SU,f=".joinButton"):b&&(d=fourSq.stats.action.Component.UPSELL_TO_QUEUES,f=".queueButton");var g=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,
{component:d,section:c});fourSq.stats.logActions(g);fourSq.stats.Util.logActionOnLinkClick(this.$el.find(f),function(){return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:e,component:d,section:c})})}}});fourSq.venueflag.views.DesktopWizard=function(a){};
fourSq.venueflag.views.DesktopWizard=fourSq.ui.View.extend({initialize:function(a){this.expandedPanes_=a.expandedPanes||["info"];this.model=a.model;this.showNfc=a.showNfc},decorate:function(){var a=fourSq.venueflag.models.DefaultConfig;a.showTranslatedNameEditor=!0;a.showNfc=this.showNfc;this.accordion_=(new fourSq.venueflag.views.VenueFlagAccordion({el:this.el,expandedPanes_:[],alwaysExpandedPanes:["attributes"],hiddenPanes:["remove"],model:this.model,venues:null,creatingView:"desktop-flag-page",
config:a})).render();this.accordion_.trigger("showFinalMessage",fourSq.bind(this.showFinalMessage,this))},showFinalMessage:function(a){this.$el.empty().append(a)}});fourSq.venueflag.views.BaseAttributesFrame=function(a){};
fourSq.venueflag.views.BaseAttributesFrame=fourSq.venueflag.views.Step2Frame.extend({initialize:function(a){this.model=a.model;this.creatingView_=a.creatingView;this.edits_={};this.config=a.config||fourSq.venueflag.models.DefaultConfig},onAttributesReceived:function(a){this.attributes_=a;this.edits_={};var b={};fourSq.isDefinedAndNotNull(a)&&_.each(a.groups,function(a){b[a.type]={};_.each(a.items,function(d){b[a.type][d.name]=d})});this.renderFromAttributes(b);this.bindEditInputs_();this.decorateFakeDropdowns_();
this.decorate();0< !this.$el.find("div.inputRow").length&&this.$el.parents("div.accordionRow").addClass("hide")},bindExpandableInput_:function(a){a.find("input").change(fourSq.bind(this.enableSave,this));var b=fourSq.bind(function(b){b="yes"===$(b.target).val();a.parents(".inputRow").toggleClass("on",b)},this);a.change(b);_.some(a.toArray(),function(a){return"yes"==$(a).val()&&$(a).is(":checked")})&&a.parents(".inputRow").addClass("on")},deleteFieldsOfType_:function(a){_.each(this.$el.find("[data-field-type\x3d"+
a+"]").toArray(),fourSq.bind(function(a){delete this.edits_[$(a).data("field")]},this))},bindEditInputs_:function(){this.$el.find("input:radio").change(fourSq.bind(function(a){this.enableSave();a=$(a.target);var b=a.data("field");_.isArray(a.val())?this.edits_[b]=a.val().join(","):this.edits_[b]=a.val()},this));this.$el.find("input:checkbox").change(fourSq.bind(function(a){this.enableSave();a=$(a.target);var b=a.data("field");a.is(":checked")?this.edits_[b]="yes":this.edits_[b]="no"},this))},decorateFakeDropdowns_:function(){_.each(this.$el.find(".fakeDropdownContainer").toArray(),
function(a){(new fourSq.views.FakeDropdown({el:a})).decorate()})},save:function(a,b){var c=this.buildProposeEditInputs_(),c=_.extend({creatingView:this.creatingView_},c);fourSq.api.services.Venue.proposeEdit(this.model.id,c,"",a,b);this.edits_={}},buildProposeEditInputs_:fourSq.abstractMethod,renderFromAttributes:fourSq.abstractMethod});fourSq.venueflag.views.AttributesFrame=function(a,b){};
fourSq.venueflag.views.AttributesFrame=fourSq.venueflag.views.BaseAttributesFrame.extend({initialize:function(a){fourSq.venueflag.views.AttributesFrame.__super__.initialize.call(this,a)},name:function(){return"attributes"},header:function(){return templates.fourSq.venueflag.attributesHeader()},venueHeader:function(){return templates.fourSq.venueflag.attributesVenueHeader({attributeGroups:_.filter(this.model.attributes.groups,fourSq.venueflag.views.AttributesFrame.relevantAttributeGroup)})},buildProposeEditInputs_:function(){if(0===
this.$el.find("[data-field\x3dwifi][value\x3dno]:checked").size()&&fourSq.isDefinedAndNotNull(this.edits_.wifi)){var a=1==this.$el.find("[data-field\x3dwifi][value\x3dfree]:checked").size(),b=1==this.$el.find("[data-field\x3dwifi][value\x3dpaid]:checked").size();a&&(this.edits_.wifi="free");b&&(this.edits_.wifi="paid");a&&b&&(this.edits_.wifi="freeandpaid")}"no"===this.edits_.creditCards&&this.deleteFieldsOfType_("card");return this.edits_},renderFromAttributes:function(a){this.$el.empty().append(templates.fourSq.venueflag.attributeEditForm({attributeMap:a,
showNfc:this.config.showNfc}));this.bindExtraEditInputs_()},setMealSummaryText_:function(){this.$mealSummaryText.empty();var a=$(".mealButton:checked").toArray();0<a.length?this.$mealSummaryText.append(_.map(a,function(a){return $(a).data("label")}).join(", ")):this.$mealSummaryText.append(templates.fourSq.venueflag.mealSummaryDefault())},setDrinkSummaryText_:function(){this.$drinkSummaryText.empty();var a=$(".drinkButton:checked").toArray();0<a.length?this.$drinkSummaryText.append(_.map(a,function(a){return $(a).data("label")}).join(", ")):
this.$drinkSummaryText.append(templates.fourSq.venueflag.drinkSummaryDefault())},bindExtraEditInputs_:function(){this.$wifiEl=this.$el.find(".availabilityAttribute.wifi");this.bindExpandableInput_(this.$wifiEl);this.$acceptsCards=this.$el.find(".availabilityAttribute.creditCards");this.bindExpandableInput_(this.$acceptsCards);this.$mealSummaryText=this.$el.find(".mealSummary");this.$drinkSummaryText=this.$el.find(".drinkSummary");this.$el.find(".mealButton").change(fourSq.bind(this.setMealSummaryText_,
this));this.$el.find(".drinkButton").change(fourSq.bind(this.setDrinkSummaryText_,this));this.setMealSummaryText_();this.setDrinkSummaryText_()}},{relevantAttributeGroup:function(a){return a&&("price"===a.type||"serves"===a.type||"drinks"===a.type||"payments"===a.type||"reservations"===a.type||"wifi"===a.type||"outdoorSeating"===a.type)}});fourSq.venueflag.views.FeaturesFrame=function(a,b){};
fourSq.venueflag.views.FeaturesFrame=fourSq.venueflag.views.BaseAttributesFrame.extend({initialize:function(a){fourSq.venueflag.views.FeaturesFrame.__super__.initialize.call(this,a)},name:function(){return"features"},header:function(){return templates.fourSq.venueflag.featuresHeader()},venueHeader:function(){return templates.fourSq.venueflag.featuresVenueHeader({attributeGroups:_.filter(this.model.attributes.groups,fourSq.venueflag.views.FeaturesFrame.relevantAttributeGroup)})},renderFromAttributes:function(a){this.$el.empty().append(templates.fourSq.venueflag.featuresEditForm({attributeMap:a}));
this.bindExtraEditInputs_()},buildProposeEditInputs_:function(){"no"===this.edits_.hasParking&&this.deleteFieldsOfType_("parking");"no"===this.edits_.hasMusic&&this.deleteFieldsOfType_("music");return this.edits_},setDiningOptionSummaryText_:function(){this.$diningOptionSummaryText.empty();var a=$(".diningOptionButton:checked").toArray();0<a.length?this.$diningOptionSummaryText.append(_.map(a,function(a){return $(a).data("label")}).join(", ")):this.$diningOptionSummaryText.append(templates.fourSq.venueflag.diningOptionDefault())},
bindExtraEditInputs_:function(){this.$musicEl_=this.$el.find(".availabilityAttribute.hasMusic");this.bindExpandableInput_(this.$musicEl_);this.$parkingEl_=this.$el.find(".availabilityAttribute.hasParking");this.bindExpandableInput_(this.$parkingEl_);this.$diningOptionSummaryText=this.$el.find(".diningOptionSummary");this.$el.find(".diningOptionButton").change(fourSq.bind(this.setDiningOptionSummaryText_,this));this.setDiningOptionSummaryText_()}},{relevantAttributeGroup:function(a){return a&&("privateRoom"===
a.type||"music"===a.type||"parking"===a.type||"wheelchairAccessible"===a.type||"coatCheck"===a.type||"smoking"===a.type||"restroom"===a.type||"atm"===a.type||"tvs"===a.type)}});fourSq.venueflag.views.CategoryFrame=function(a){};
fourSq.venueflag.views.CategoryFrame=fourSq.venueflag.views.Step2Frame.extend({initialize:function(a){fourSq.venueflag.views.CategoryFrame.__super__.initialize.call(this,a);this.creatingView_=a.creatingView;this.twoStepCategoryInput_=null;fourSq.ui.categoryautocompleter.CategoryHierarchy.fetchHierarchy(this.model.location.cc)},name:function(){return"category"},header:function(){return templates.fourSq.venueflag.categoryHeader()},venueHeader:function(){return templates.fourSq.venueflag.categoryVenueHeader({venue:this.model})},save:function(a,
b){this.categoryPane_.on("success",a);this.categoryPane_.on("failure",b);this.categoryPane_.saveCategories()},render:function(){this.setEl_($(templates.fourSq.venueflag.category({venue:this.model})));return this},decorate:function(){this.categoryPane_=new fourSq.views.FlagCategoryEditor({el:this.el,venue:this.model,categoryTemplate:templates.fourSq.venueflag.currentCategories,creatingView:this.creatingView_});this.categoryPane_.decorate();this.categoryPane_.on("change",fourSq.bind(function(){this.onChange_()},
this));this.categoryPane_.on("tooManyCategories",fourSq.bind(function(){this.toggleControlsEnabled_()},this));this.decorateTwoStepCategoryInput_();this.toggleControlsEnabled_()},decorateTwoStepCategoryInput_:function(){var a=fourSq.bind(function(){return fourSq.api.models.companion.geo.LatLngUtil.latLng(this.model.location.lat,this.model.location.lng)},this);fourSq.ui.categoryautocompleter.CategoryHierarchy.withHierarchy(this.model.location.cc,fourSq.bind(function(b){this.twoStepCategoryInput_=(new fourSq.ui.categoryautocompleter.TwoStepCategoryInput({el:this.$el.find(".twoStepCategoryAutocompleter"),
llHinter:a,hierarchy:b,getBannedCategoryIds:fourSq.bind(function(){return _.map(this.categoryPane_.currentCategories(),function(a){return a.id})},this)})).decorate();this.twoStepCategoryInput_.on(fourSq.ui.categoryautocompleter.TwoStepCategoryInput.Events.SUBCATEGORY_SELECTED,fourSq.bind(function(a){this.categoryPane_.addCategory(a)},this));this.categoryPane_.on("addedCategory",fourSq.bind(function(){this.twoStepCategoryInput_.reset()},this))},this))},toggleControlsEnabled_:function(){this.twoStepCategoryInput_&&
(this.categoryPane_.canHaveMoreCategories()?(this.twoStepCategoryInput_.enableInputs(),this.$el.removeClass("tooManyCategories")):(this.twoStepCategoryInput_.disableInputs(),this.$el.addClass("tooManyCategories")))},onChange_:function(){this.toggleControlsEnabled_();this.enableSave()}});fourSq.venueflag.views.ChainFrame=function(a){};
fourSq.venueflag.views.ChainFrame=fourSq.venueflag.views.Step2Frame.extend({initialize:function(a){fourSq.venueflag.views.ChainFrame.__super__.initialize.call(this,a);this.creatingView_=a.creatingView;this.$chainInput_=null},name:function(){return"chain"},header:function(){return templates.fourSq.venueflag.chainHeader()},venueHeader:function(){return templates.fourSq.venueflag.chainVenueHeader({venue:this.model})},save:function(a,b){this.chainPane_.on("success",a);this.chainPane_.on("failure",b);
this.chainPane_.saveChains()},render:function(){this.model.venueChains&&1<=this.model.venueChains.length&&(this.model.venueChains[0].primary=!0);this.setEl_($(templates.fourSq.venueflag.chain({venue:this.model})));return this},decorate:function(){this.chainPane_=new fourSq.views.FlagChainEditor({el:this.el,venue:this.model,chainTemplate:templates.fourSq.venueflag.currentChains,creatingView:this.creatingView_});this.chainPane_.decorate();this.chainPane_.on("change",fourSq.bind(function(){this.onChange_()},
this));this.chainPane_.on("tooManyChains",fourSq.bind(function(){this.toggleControlsEnabled_()},this));this.decorateChainInput_();this.toggleControlsEnabled_()},decorateChainInput_:function(){this.chainInput_=(new fourSq.ui.chainautocompleter.ChainInput({el:this.$el.find(".chainAutocompleter")})).decorate();this.chainInput_.on(fourSq.ui.chainautocompleter.ChainInput.Events.CHAIN_SELECTED,fourSq.bind(function(a){this.chainPane_.addChain(a)},this));this.chainPane_.on("addedChain",fourSq.bind(function(){this.chainInput_.reset()},
this))},toggleControlsEnabled_:function(){this.chainInput_&&(this.chainPane_.canHaveMoreChains()?(this.chainInput_.enableInputs(),this.$el.removeClass("tooManyChains")):(this.chainInput_.disableInputs(),this.$el.addClass("tooManyChains")))},onChange_:function(){this.toggleControlsEnabled_();this.enableSave()}});fourSq.venueflag.views.HoursFrame=function(a){};
fourSq.venueflag.views.HoursFrame=fourSq.venueflag.views.Step2Frame.extend({name:function(){return"hours"},initialize:function(a){this.model=a.model;this.creatingView_=a.creatingView;this.showSeasonalHoursEditor_=a.showSeasonalHoursEditor},header:function(){return templates.fourSq.venueflag.hoursHeader({showSeasonalHoursEditor:this.showSeasonalHoursEditor_})},venueHeader:function(){return $(templates.fourSq.venueflag.hoursVenueHeader({hours:this.model.defaultHours||this.model.hours}))},render:function(){this.editor_=
(new fourSq.views.hours.Editor({venue:this.model,inlineForm:!0,dryRun:!0,creatingView:this.creatingView_,showSeasonalHoursEditor:this.showSeasonalHoursEditor_})).render();this.editor_.on("change",fourSq.bind(this.enableSave,this));this.setEl_(this.editor_.$el);return this},save:function(a,b){this.editor_.off("success");this.editor_.on("success",a);this.editor_.off("failure");this.editor_.on("failure",b);this.editor_.save()}});fourSq.venueflag.views.InfoFrame=function(a){};
fourSq.venueflag.views.InfoFrame=fourSq.venueflag.views.Step2Frame.extend({initialize:function(a){this.model=a.model;this.checkinLocations_=a.checkinLocations||[];this.creatingView_=a.creatingView;this.config_=a.config},name:function(){return"info"},header:function(){return templates.fourSq.venueflag.infoHeader()},venueHeader:function(){return templates.fourSq.venueflag.infoVenueHeader({venue:this.model})},showErrorOnField:function(a,b){if("state"==a||"city"==a)a="location";var c;c="venuename"==a?
$(".nameInputDiv"):$(".flagEditInput[name\x3d"+a+"]").parents(".inputBlock");c.addClass("hasError");c.find(".errorMessage").empty().append(b)},responseHandler:function(a){$(".inputBlock.hasError").removeClass("hasError");$(".inputBlock .errorMessage").empty();$(".nameInputDiv.hasError").removeClass("hasError");$(".nameInputDiv .errorMessage").empty();a=a.errors&&a.errors.items||[];_.each(a,fourSq.bind(function(a){this.showErrorOnField(a.field,a.msg)},this));_.isEmpty(a)?this.enableSave():this.validationError()},
render:function(){var a=fourSq.api.models.companion.user.UserUtil.currentUser(),a=fourSq.isDefinedAndNotNull(a)&&(1<=a.superuser||fourSq.isDefinedAndNotNull(this.model.roles)&&0<this.model.roles.length),a={venue:this.model,showAdvanced:a,showFacebookEditor:this.config_.canEditFacebook,showParentEditor:this.config_.showParentEditor,showTranslatedNameEditor:this.config_.showTranslatedNameEditor,showLabeledLatLngEditor:this.config_.showLabeledLatLngEditor,setLabeledLatLngByDefault:this.config_.setLabeledLatLngByDefault,
showInstagramEditor:this.config_.canEditInstagram};if(this.model.nameLang){a.primaryNameLanguage=fourSq.i18n.Languages.getLanguageName(this.model.nameLang);var b=_.find(this.model.names,fourSq.bind(function(a){return a.lang===this.model.nameLang},this));fourSq.isDefinedAndNotNull(b)&&(a.primaryNameOverride=b.name)}this.setEl_($(templates.fourSq.venueflag.info(a)));this.originalFields_=this.buildInputValueDict_({});this.$el.find(".editOtherNames").click(fourSq.bind(function(){this.$el.toggleClass("showTranslatedNamesEditor")},
this));this.$el.find(".editLatLng").click(fourSq.bind(function(){this.$el.toggleClass("showLabeledLatLngEditor");var a=this.curLL_;this.curLL_=this.deemphasizedLL_;this.deemphasizedLL_=a;var a=this.getCurLatLng_(),b=this.getDeemphasizedLatLng_();fourSq.isDefinedAndNotNull(a)?this.mapEditor_.setLatLng(a):this.mapEditor_.removePin();fourSq.isDefinedAndNotNull(this.deemphasizedMarker_)&&this.mapEditor_.removeLayer(this.deemphasizedMarker_);fourSq.isDefinedAndNotNull(b)&&this.putDeemphasizedPin_(b);this.mapEditor_.getMap().setView(this.getCurLatLng_())},
this));return this},getRoutingLatLng_:function(){var a=_.find(this.model.location.labeledLatLngs,function(a){return"routing"==a.label});return a?a.lat+","+a.lng:""},noGeoResultsFunction_:function(){var a=$(templates.fourSq.venueflag.noGeoResultsMessage());a.click(fourSq.bind(function(){$(".flagVenueInfo").addClass("manualLocationOverride");var a=$(".flagEditInput.location").val().split(","),c=a[0],d="";1<a.length&&(c=a.slice(0,a.length-1).join(", "),d=a[1]);$(".flagEditInput.city").val(c);$(".flagEditInput.state").val(d);
$(".locationAutocomplete.ui-autocomplete").hide()},this));return a},decorate:function(){if(!this.decorated_){this.decorated_=!0;new fourSq.views.AddressHelpFlyout({anchor:this.$el.find(".addressTip").get(0),direction:fourSq.ui.Flyout.Directions.BELOW});new fourSq.views.ParentHelpFlyout({anchor:this.$el.find(".parentTip").get(0),direction:fourSq.ui.Flyout.Directions.BELOW});var a=this.$el.find(".namesTip");this.config_.showTranslatedNameEditor&&0<a.length&&new fourSq.views.NamesHelpFlyout({anchor:a.get(0),
direction:fourSq.ui.Flyout.Directions.BELOW});a=this.$el.find(".labeledLatLngTipDisplay");this.config_.showLabeledLatLngEditor&&0<a.length&&new fourSq.views.LabeledLatLngHelpFlyout({anchor:a.get(0),direction:fourSq.ui.Flyout.Directions.BELOW});a=this.$el.find(".labeledLatLngTipRouting");this.config_.showLabeledLatLngEditor&&0<a.length&&new fourSq.views.LabeledLatLngHelpFlyout({anchor:a.get(0),direction:fourSq.ui.Flyout.Directions.BELOW});a=fourSq.bind(function(){return{lat:this.model.location.lat,
lng:this.model.location.lng}},this);this.locationInputView_=(new fourSq.ui.LocationInputView({el:this.$el.find(".inputBlock.location"),llHinter:a,useAutocomplete:!0,enableResetButton:!1,allowCountry:!0,woeRestrict:"SUBURB,TOWN,ADMIN3,ADMIN2,ADMIN1",baseActionData:{section:fourSq.stats.action.Section.VENUE_DETAIL_EDITING_MODAL},noResultsFn:fourSq.bind(this.noGeoResultsFunction_,this),refitAutocompleteMenu:!0,autocompleteBias:"LOCAL"})).decorate();var b=fourSq.bind(function(a){a=a.location;_.each({address:a.address,
crossStreet:a.crossStreet,zip:a.postalCode,location:a.city+", "+a.state},function(a,b){var c=this.$el.find("input."+b);c.val(a);fourSq.ui.util.cssAnimation({el:c,toAdd:"borderPulse"})},this)},this);this.parentChooser_=new fourSq.venue.editing.ParentChooserView({el:this.$el.find(".parentSection"),llHinter:a,initialParent:this.model.parent,showAddressImporter:this.config_.showParentAddressImporter,addressImporterCb:b,selfVenue:this.model});this.parentChooser_.on(fourSq.venue.editing.ParentChooserView.Events.CHANGE_PARENT,
fourSq.bind(this.enableSave,this));this.config_.showTranslatedNameEditor&&(b=this.$el.find(".namesSection"),this.translatedNameEditor_=(new fourSq.venue.editing.TranslatedNameEditorView({el:b,id:this.model.id,nameLang:this.model.nameLang,names:this.model.names,showIataInLanguageSelector:this.config_.showIataInLanguageSelector})).decorate(),this.languageAutocompleter_=new fourSq.venueflag.views.LanguageAutocompleter({el:b.find("select")}),this.model.nameLang&&(b=this.$el.find(".venueNameInput"),b.addClass("withLanguage"),
b.attr("name","name:"+this.model.nameLang)));b=this.$el.find(".inputBlock.neighborhood");if(b.length){var c=fourSq.api.models.companion.geo.LatLngBoundsUtil.fromLeaflet(fourSq.map.MapUtil.radiusToBounds(new L.latLng(this.model.location.lat||0,this.model.location.lng||0),fourSq.venueflag.views.InfoFrame.NEIGHBORHOOD_RADIUS));this.neighborhoodInputView_=(new fourSq.ui.LocationInputView({el:b,llHinter:a,boundsHinter:function(){return c},useAutocomplete:!0,enableResetButton:!1,woeRestrict:"SUBURB",baseActionData:{section:fourSq.stats.action.Section.VENUE_DETAIL_EDITING_MODAL},
autocompleteBias:"LOCAL"})).decorate()}fourSq.ui.CountryPicker(this.$el.find(".countryPicker"),this.model.location.cc);this.$el.find("input,textarea").keyup(fourSq.bind(this.enableSave,this));this.$el.find("input,textarea").on("paste",fourSq.bind(this.enableSave,this));var d=fourSq.bind(function(){var a={dryRun:!0,creatingView:this.creatingView_};this.buildProposeEditInputs_(a);fourSq.api.services.Venue.proposeEdit(this.model.id,a,"",fourSq.bind(this.responseHandler,this),fourSq.bind(function(a){this.responseHandler(a.response.response)},
this))},this);this.$el.find("input,textarea").change(d);if(fourSq.isDefinedAndNotNull(this.translatedNameEditor_))this.translatedNameEditor_.on(fourSq.venue.editing.TranslatedNameEditorView.Events.CHANGE,fourSq.bind(function(){this.languageAutocompleter_.clearLanguage();this.enableSave();d()},this));this.$el.find("select").change(fourSq.bind(this.enableSave,this));this.mapEditor_||(a=fourSq.api.models.companion.geo.LatLngUtil.latLng(this.model.location.lat||0,this.model.location.lng||0),this.mapEditor_=
new fourSq.venue.editing.MapEditor({el:this.$el.find(".mapEditor"),mapId:"flagMap",initialLatLng:a,placePinInitially:!0,initialZoom:16,minimumDistanceForRecentering:500}),this.llInput_=this.$el.find(".flagEditInput.ll"),this.labeledLLInput_=this.$el.find(".flagEditInput.labeledLL"),this.mapAnchor_=this.$el.find(".osmLink").find("a"),a=this.$el.find(".showLabeledLatLngEditor"),this.curLL_=0<a.length?this.labeledLLInput_:this.llInput_,this.deemphasizedLL_=0<a.length?this.llInput_:this.labeledLLInput_,
this.curLL_.change(fourSq.bind(function(){this.mapEditor_.setLatLng(this.parseLatLng_(this.curLL_.val()))},this)),this.labeledLLMarkerMoved_=this.llMarkerMoved_=!1,a=fourSq.bind(function(){this.curLL_==this.llInput_?this.llMarkerMoved_=!0:this.labeledLLMarkerMoved_=!0;var a=this.mapEditor_.getLatLng();a&&this.curLL_.val(a.lat+","+a.lng);this.llInput_.val()==this.originalFields_.ll&&this.labeledLLInput_.val()==this.originalFields_.labeledLL||this.enableSave()},this),this.mapEditor_.on(fourSq.venue.editing.MapEditor.Events.LOCATION_UPDATING,
a),this.mapEditor_.on(fourSq.venue.editing.MapEditor.Events.LOCATION_UPDATED,a),_.each(this.checkinLocations_,fourSq.bind(function(a){a=new L.Marker(new L.LatLng(a.lat,a.lng),{icon:new fourSq.map.icon.BlueDotIcon,alt:"Blue dot icon"});this.mapEditor_.addLayerToMap(a)},this)),a=fourSq.bind(function(){var a=this.mapEditor_.getMapCenter();this.mapAnchor_.attr("href","/about/osm?lat\x3d"+a.lat+"\x26lon\x3d"+a.lng)},this),this.mapEditor_.on(fourSq.venue.editing.MapEditor.Events.MAP_MOVED,a),a(),fourSq.isDefinedAndNotNull(this.getDeemphasizedLatLng_())&&
this.putDeemphasizedPin_(this.getDeemphasizedLatLng_()),this.config_.showLabeledLatLngEditor&&fourSq.isDefinedAndNotNull(this.getCurLatLng_())&&fourSq.isDefinedAndNotNull(this.getDeemphasizedLatLng_())&&(a=fourSq.map.MapUtil.midpoint(this.getCurLatLng_(),this.getDeemphasizedLatLng_()),b=fourSq.map.MapUtil.distanceBetween(this.getCurLatLng_(),this.getDeemphasizedLatLng_()),a=fourSq.map.MapUtil.radiusToBounds(a,100>b?100:b/2),this.mapEditor_.getMap().fitBounds(a)),this.setupMapUpdating_());return this}},
getDeemphasizedLatLng_:function(){var a=this.parseLatLng_(this.deemphasizedLL_.val());return fourSq.isDefinedAndNotNull(a)?a:null},getCurLatLng_:function(){var a=this.parseLatLng_(this.curLL_.val());return fourSq.isDefinedAndNotNull(a)?a:null},putDeemphasizedPin_:function(a){fourSq.isDefinedAndNotNull(a)&&(this.deemphasizedMarker_=this.makeDeemphasizedMarker_(a),this.mapEditor_.addLayerToMap(this.deemphasizedMarker_))},parseLatLng_:function(a){try{var b=a.split(",");if(2==b.length){var c=parseFloat(b[0]),
d=parseFloat(b[1]);if(!isNaN(c)&&!isNaN(d))return new L.LatLng(c,d)}}catch(e){}},makeDeemphasizedMarker_:function(a){var b=L.Icon.Default.extend({_getIconUrl:function(a){return"shadow"===a?"https://ss1.4sqi.net/img/leaflet/images/marker-shadow-266e0e95e0a6e5a217da66c114320f52.png":"https://ss0.4sqi.net/img/leaflet/images/marker-icon-ed9aa0b76a58a5a016efad37b874348e.png"}});return new L.Marker(a,{opacity:.3,icon:new b,alt:"marker icon"})},setupMapUpdating_:function(){var a=this.$el.find(".flagEditInput");
a.filter(".address, .zip, .city, .state, .location").change(fourSq.bind(function(){var b=$(".flagVenueInfo").hasClass(".manualLocationOverride"),b=[a.filter(".address").val(),a.filter(".zip").val(),b?a.filter(".city").val():"",b?a.filter(".state").val():"",b?"":a.filter(".location").val()].join(" ").replace(/\s+/g," ");this.mapEditor_.updateAddress(b,!0)},this))},failureCallback:function(a,b){var c=a.response.meta;"param_error"===c.errorType?this.responseHandler(a.response.response):b(c.errorDetail)},
buildInputValueDict_:function(a){_(this.$el.find(":input.flagEditInput")).each(function(b){a[b.name]=b.value});a.parentId=this.model.parent&&this.model.parent.id;return a},buildProposeEditInputs_:function(a){_(this.$el.find(":input.flagEditInput")).each(fourSq.bind(function(b){b.value!=this.originalFields_[b.name]&&(a[b.name]=b.value)},this));fourSq.isDefinedAndNotNull(this.locationInputView_.getCurrentGeoId())&&(a.geoId=this.locationInputView_.getCurrentGeoId());this.neighborhoodInputView_&&fourSq.isDefinedAndNotNull(this.neighborhoodInputView_.getCurrentGeoId())&&
(a.neighborhoodGeoId=this.neighborhoodInputView_.getCurrentGeoId());this.parentChooser_.getParentId()!==this.originalFields_.parentId&&this.parentChooser_.isInExplicitState()&&(a.parentId=this.parentChooser_.getParentId()||"");fourSq.isDefinedAndNotNull(this.translatedNameEditor_)&&this.translatedNameEditor_.addChangesToDict(a);return a},parseLatLngFromField_:function(a,b,c){try{var d=_.map(c[a].split(","),$.trim);return fourSq.api.models.companion.geo.LatLngUtil.latLng(Number(d[0]),Number(d[1]))}catch(e){this.showErrorOnField(a,
$(templates.fourSq.venueflag.latLngError()))}},saveLatLngChange_:function(a,b,c,d,e,f){a?(a=this.curLL_==b?this.mapEditor_.getLatLng():this.deemphasizedMarker_.getLatLng(),e[c]=a):f[d]&&(a=this.parseLatLngFromField_(d,c,f),fourSq.isDefinedAndNotNull(a)&&(e[c]=a));return e},save:function(a,b){var c=this.buildProposeEditInputs_({});c.creatingView=this.creatingView_;var d=fourSq.bind(function(a){this.failureCallback(a,b)},this);fourSq.api.services.Venue.proposeEdit(this.model.id,c,void 0,a,d);var e=
this.config_.setLabeledLatLngByDefault?"d":void 0,f={},f=this.saveLatLngChange_(this.llMarkerMoved_,this.llInput_,e,"ll",f,c),f=this.saveLatLngChange_(this.labeledLLMarkerMoved_,this.labeledLLInput_,"r","labeledLL",f,c);"r"in f&&e in f?fourSq.api.services.Venue.mislocated(this.model.id,f[e],e,f.r,"r",void 0,"",a,d):"r"in f?fourSq.api.services.Venue.mislocated(this.model.id,f.r,"r",void 0,void 0,void 0,"",a,d):e in f&&fourSq.api.services.Venue.mislocated(this.model.id,f[e],e,void 0,void 0,void 0,"",
a,d)}},{NEIGHBORHOOD_RADIUS:5E4});fourSq.views.AddressHelpFlyout=function(a){};fourSq.views.AddressHelpFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){fourSq.views.AddressHelpFlyout.__super__.initialize.call(this,a);this.users_=a.users||[]},getRenderedContentsHtml:function(){return templates.fourSq.venueflag.addressHelp()}});fourSq.views.ParentHelpFlyout=function(a,b){};
fourSq.views.ParentHelpFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){fourSq.views.ParentHelpFlyout.__super__.initialize.call(this,a);this.users_=a.users||[]},getRenderedContentsHtml:function(){return templates.fourSq.venueflag.parentHelp()}});fourSq.views.NamesHelpFlyout=function(a,b){};fourSq.views.NamesHelpFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){fourSq.views.NamesHelpFlyout.__super__.initialize.call(this,a);this.users_=a.users||[]},getRenderedContentsHtml:function(){return templates.fourSq.venueflag.namesHelp()}});
fourSq.views.LabeledLatLngHelpFlyout=function(a,b){};fourSq.views.LabeledLatLngHelpFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){fourSq.views.LabeledLatLngHelpFlyout.__super__.initialize.call(this,a);this.users_=a.users||[]},getRenderedContentsHtml:function(){return templates.fourSq.venueflag.labeledLatLngHelp()}});fourSq.venueflag.views.LanguageSelector=function(a){};
fourSq.venueflag.views.LanguageSelector=fourSq.ui.View.extend({initialize:function(a){fourSq.venueflag.views.LanguageSelector.__super__.initialize.call(this,a);var b=$('\x3coption value\x3d""\x3e\x3c/option\x3e');this.$el.append(b);this.selected_=a.selected;this.sortAndAddLanguages(fourSq.i18n.Languages.foursquareLanguages);b=_.difference(_.keys(fourSq.i18n.Languages.languageMap),fourSq.i18n.Languages.foursquareLanguages);this.sortAndAddLanguages(b);a.showIata&&this.sortAndAddLanguages(["iata","stat"]);
this.$el.on("change",fourSq.bind(function(a,b){this.trigger(fourSq.venueflag.views.LanguageSelector.Events.CHANGE)},this))},getLanguage:function(){return this.$el.val()},clearLanguage:function(){this.$el.val("")},addOption:function(a){var b=$('\x3coption value\x3d"'+a+'"\x3e'+fourSq.i18n.Languages.getLanguageName(a)+"\x3c/option\x3e");a===this.selected_&&b.attr("selected",!0);this.$el.append(b)},sortLanguages:function(a){return _.sortBy(a,function(a){return fourSq.i18n.Languages.getLanguageName(a)})},
sortAndAddLanguages:function(a){a=this.sortLanguages(a);_.each(a,this.addOption,this)}},{Events:{CHANGE:"LanguageSelector:CHANGE",SELECT:"LanguageSelector:SELECT"}});fourSq.venueflag.views.LanguageAutocompleter=function(a){};
fourSq.venueflag.views.LanguageAutocompleter=fourSq.ui.View.extend({initialize:function(a){fourSq.venueflag.views.LanguageAutocompleter.__super__.initialize.call(this,a);this.comboBox_=new fourSq.venueflag.Combobox(this.$el,fourSq.bind(function(a,c){this.trigger(fourSq.venueflag.views.LanguageAutocompleter.Events.CHANGE)},this))},getLanguage:function(){return this.comboBox_.select.val()},clearLanguage:function(){this.comboBox_.input.val("")}},{Events:{CHANGE:"LanguageAutocompleter:CHANGE"}});fourSq.venueflag.Combobox=function(a,b){this.select=a;var c=a.hide(),d=c.children(":selected"),d=d.first().val()?d.first().text():"",e=a.attr("id"),f=this.input=$("\x3cinput\x3e").insertAfter(c).val(d.toString()).attr("placeholder",c.attr("placeholder").toString()).autocomplete({appendTo:a.parent(),autoFocus:!0,delay:0,minLength:0,position:{offset:"0, -4"},source:function(a,b){var d=new RegExp($.ui.autocomplete.escapeRegex(a.term),"i");b(c.children("option").map(function(){var b=$(this).text();if(this.value&&
(!a.term||d.test(b)))return{label:b.replace(new RegExp("(?![^\x26;]+;)(?!\x3c[^\x3c\x3e]*)("+$.ui.autocomplete.escapeRegex(a.term)+")(?![^\x3c\x3e]*\x3e)(?![^\x26;]+;)","gi"),"\x3cstrong\x3e$1\x3c/strong\x3e"),value:b,option:this}}))},select:function(a,c){c.item.option.selected=!0;b(a,c)},change:function(a,b){if(!b.item){var d=new RegExp("^"+$.ui.autocomplete.escapeRegex($(this).val())+"$","i"),e=!1;c.children("option").each(function(){if($(this).text().match(d))return this.selected=e=!0,!1});if(!e)return $(this).val(""),
c.val(""),f.data("autocomplete").term="",!1}}}).addClass("ui-widget ui-widget-content ui-corner-left");f.data("autocomplete")._renderItem=function(a,b){a.addClass(e);return $("\x3cli\x3e\x3c/li\x3e").data("item.autocomplete",b).append("\x3ca\x3e"+b.label+"\x3c/a\x3e").appendTo(a)}};fourSq.venueflag.views.remove.DuplicateItem=function(a){};
fourSq.venueflag.views.remove.DuplicateItem=fourSq.ui.View.extend({initialize:function(a){this.otherVenue_=a.otherVenue},render:function(){var a=new L.LatLng(this.model.location.lat,this.model.location.lng),b=new L.LatLng(this.otherVenue_.location.lat,this.otherVenue_.location.lng),a=fourSq.map.MapUtil.distanceBetween(a,b);this.setEl_($(templates.fourSq.venueflag.duplicateItem({venue:this.model,distance:a})));this.checkbox_=this.$el.find("input.duplicate");return this},isSelected:function(){return this.checkbox_.is(":checked")}});fourSq.venueflag.views.remove.DuplicatesPane=function(a){};
fourSq.venueflag.views.remove.DuplicatesPane=fourSq.ui.View.extend({initialize:function(a){this.venues_=a.venues||[];this.creatingView_=a.creatingView},render:function(){this.setEl_($(templates.fourSq.venueflag.duplicates({})));this.dupeInput=this.$el.find(".dupeInput");return this},decorate:function(){var a=this.venues_,b=String(window.localStorage.getItem("venue-search-store"))||"[]",b=JSON.parse(b)||[];_(b).any(fourSq.bind(function(a){return a.id==this.model.id},this))&&(a=b);a&&0!==a.length?this.renderDupes(a):
(this.$el.removeClass("dupesWaiting"),fourSq.api.services.Venue.search({ll:this.model.location.lat+","+this.model.location.lng,intent:"loosematch",query:this.model.name},fourSq.bind(function(a){this.$el.removeClass("dupesWaiting");this.renderDupes(a);this.$el.find("input:checkbox").click(fourSq.bind(function(){this.trigger("selected")},this))},this)),this.$el.addClass("dupesWaiting"))},save:function(a,b,c){var d=this.dupViews_.filter(function(a){return a.isSelected()}).map(function(a){return a.model.id}),
e=fourSq.util.trim(this.dupeInput.val()||"");e&&d.push(e);fourSq.api.services.Venue.proposeDuplicates(this.model.id,{venueId:d.join(","),comment:a,creatingView:this.creatingView_},b,c)},renderDupes:function(a){var b=this.$el.find(".duplicatesListSection");a=_(a||[]).filter(fourSq.bind(function(a){return this.model.id!=a.id},this));this.dupViews_=_(a).map(function(a){a=new fourSq.venueflag.views.remove.DuplicateItem({model:a,otherVenue:this.model});b.append(a.render().el);return a},this);0===this.dupViews_.length&&
this.$el.addClass("noDupesFound");this.$el.find(".dupeInput").keypress(fourSq.bind(function(){this.trigger("enableSave")},this));this.$el.find(".dupeInput").on("paste",fourSq.bind(function(){this.trigger("enableSave")},this));this.$el.find("input:checkbox").change(fourSq.bind(function(){0<this.$el.find("input:checkbox :selected").size()?this.trigger("enableSave"):this.trigger("disableSave")},this))}});fourSq.venueflag.views.remove.HomePane=function(a){};
fourSq.venueflag.views.remove.HomePane=fourSq.ui.View.extend({initialize:function(a){this.creatingView_=a.creatingView},render:function(){this.setEl_($(templates.fourSq.venueflag.home({})));this.$el.find("input:radio").change(fourSq.bind(function(){this.trigger("enableSave")},this));return this},save:function(a,b,c){var d=this.$el.find(".home:checked");0===d.length?c():fourSq.api.services.Venue.flag(this.model.id,{problem:$(d[0]).val(),comment:a,creatingView:this.creatingView_},b,c)}});fourSq.venueflag.views.RemoveFrame=function(a){};
fourSq.venueflag.views.RemoveFrame=fourSq.venueflag.views.Step2Frame.extend({initialize:function(a){this.creatingView_=a.creatingView},name:function(){return"remove"},header:function(){return templates.fourSq.venueflag.removeHeader()},render:function(){this.setEl_($(templates.fourSq.venueflag.remove({})));this.secondaryPanel_=this.$el.find(".removeSecondaryPanel");this.reason_=this.secondaryView_=null;return this},setSecondary:function(a,b,c){this.reason_===a?(this.secondaryView_=this.reason_=null,
this.disableSave(),this.$el.removeClass("reasonSelected")):(this.$el.addClass("reasonSelected"),this.$el.removeClass(this.reason_),this.$el.addClass(a),this.reason_=a,this.secondaryView_=b,this.secondaryPanel_.empty().append(c))},setSecondaryView:function(a,b){this.setSecondary(a,b,b.render().el);b.on("enableSave",fourSq.bind(this.enableSave,this));b.on("disableSave",fourSq.bind(this.disableSave,this))},setSecondaryContent:function(a,b){this.setSecondary(a,null,b);this.enableSave()},decorate:function(){this.model.closed&&
this.$el.find(".removeOptions").addClass("closed");this.model.deleted&&this.$el.find(".removeOptions").addClass("deleted");$(".removeReasonButton").click(fourSq.bind(function(a){var b=this.$el.find(".removeOptions .image.selected");this.$el.find(".removeOptions .image").removeClass("selected");var c=$(a.currentTarget).find(".image");b.get(0)!==c.get(0)&&$(a.currentTarget).find(".image").toggleClass("selected")},this));$(".removeReasonButton.duplicate").click(fourSq.bind(function(){this.setSecondaryView("duplicate",
new fourSq.venueflag.views.remove.DuplicatesPane({model:this.model,creatingView:this.creatingView_}));this.secondaryView_.decorate();this.secondaryView_.on("selected",fourSq.bind(this.enableSave,this))},this));$(".removeReasonButton.home").click(fourSq.bind(function(){this.setSecondaryView("home",new fourSq.venueflag.views.remove.HomePane({model:this.model,creatingView:this.creatingView_}))},this));$(".removeReasonButton.private").click(fourSq.bind(function(){this.setSecondaryContent("private",$(templates.fourSq.venueflag.privateHelp({})))},
this));$(".removeReasonButton.closed").click(fourSq.bind(function(){this.setSecondaryContent("closed",$(templates.fourSq.venueflag.closedHelp({})))},this));$(".removeReasonButton.not_closed").click(fourSq.bind(function(){this.setSecondaryContent("not_closed",$(templates.fourSq.venueflag.reopenHelp({})))},this));$(".removeReasonButton.un_delete").click(fourSq.bind(function(){this.setSecondaryContent("un_delete",$(templates.fourSq.venueflag.un_deleteHelp({})))},this));$(".removeReasonButton.doesnt_exist").click(fourSq.bind(function(){this.setSecondaryContent("doesnt_exist",
$(templates.fourSq.venueflag.doesntExistHelp({})))},this));$(".removeReasonButton.inappropriate").click(fourSq.bind(function(){this.setSecondaryContent("doesnt_exist",$(templates.fourSq.venueflag.inappropriateHelp({})))},this))},save:function(a,b){var c=this.$el.find(".problemReason").val()||void 0;this.secondaryView_?this.secondaryView_.save(c,a,b):this.reason_&&fourSq.api.services.Venue.flag(this.model.id,{problem:this.reason_,comment:c,creatingView:this.creatingView_},a,b)}});fourSq.venueflag.pages.DesktopPage=function(a){};fourSq.venueflag.pages.DesktopPage=fourSq.views.Page.extend({initialize:function(a){fourSq.venueflag.pages.DesktopPage.__super__.initialize.call(this,{});(new fourSq.venueflag.views.DesktopWizard(a)).decorate()}});