var videoInContent={isFullscreen:false,scrolling:false,admPlayProgressing:null,currentPlayingVideo:null,playedVideoIds:[],players:[],init:function(a){if(detectmob()){return}(function(){var i=jQuery.event.special,n="D"+(+new Date()),m="D"+(+new Date()+1);i.scrollstart={setup:function(){var p,o=function(s){var q=this,r=arguments;if(p){clearTimeout(p)}else{s.type="scrollstart";jQuery.event.handle.apply(q,r)}p=setTimeout(function(){p=null},i.scrollstop.latency)};jQuery(this).bind("scroll",o).data(n,o)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(n))}};i.scrollstop={latency:500,setup:function(){var p,o=function(s){var q=this,r=arguments;if(p){clearTimeout(p)}p=setTimeout(function(){p=null;s.type="scrollstop";jQuery.event.handle.apply(q,r)},i.scrollstop.latency)};jQuery(this).bind("scroll",o).data(m,o)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(m))}}})();var f=this;var c="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";$(document).on(c,function(){f.changeIsFullscreen()});var j=[];var b=$(window);var l=b.height();var g=$(a).find('iframe[src*="vcplayer.vcmedia.vn"][playType=0], iframe[src*="123.31.11.105"][playType=0], iframe[src*="vcplayer.mediacdn.vn"][playType=0]');function d(m){const i={};i.iframe=$(m);i.wrap=$(m).parents(".VCSortableInPreviewMode");i.timer=false;i.loaded=false;i.progressing=false;return i}for(var e=g.length-1;e>=0;e--){var k=g[e];var h=$(k).attr("id");f.players[h]=d(k)}b.on("scroll",function(){f.scrolling=true;g.each(function(o,r){var n=$(this);var s=b.scrollTop();var m=(s+l);var q=n.outerHeight();var p=n.offset().top;var i=(p+q);if(s>p||m<i){f.stopVideo(n)}})});b.on("scrollstop",function(){f.scrolling=false;if(f.admPlayProgressing!=null){var q=f.admPlayProgressing.find('iframe[src*="vcplayer.vcmedia.vn"][playType=0], iframe[src*="123.31.11.105"][playType=0], iframe[src*="vcplayer.mediacdn.vn"][playType=0]');var i=q.attr("id")}g.each(function(u,x){var t=$(this);var y=b.scrollTop();var s=(y+l);var w=t.outerHeight();var v=t.offset().top;var r=(v+w);if(y<v&&s>r){j.push(t)}else{f.stopVideo(t)}});if(j.length>0){var o=undefined;if(j.length>=2){if(f.admPlayProgressing!=null){var p=f.admPlayProgressing.find('iframe[src*="vcplayer.vcmedia.vn"][playType=0], iframe[src*="123.31.11.105"][playType=0], iframe[src*="vcplayer.mediacdn.vn"][playType=0]');if(j[0].is(f.currentPlayingVideo)||j[1].is(f.currentPlayingVideo)||j[0].is(p)||j[1].is(p)){if(f.currentPlayingVideo==undefined||f.currentPlayingVideo==null){o=p}else{o=f.currentPlayingVideo}}else{o=j[0];f.stopVideo(j[1])}}else{if(j[0].is(f.currentPlayingVideo)||j[1].is(f.currentPlayingVideo)){o=f.currentPlayingVideo}else{o=j[0];f.stopVideo(j[1])}}}else{o=j[0]}var m=o.parents(".VCSortableInPreviewMode");var n=o.attr("id");if(f.playedVideoIds.indexOf(n)<0){f.admPlayProgress(m)}else{if($.inArray("#"+n,readyVideoIds)>=0){f.playVideo(o)}}}j.length=0})},playVideo:function(c){var e=this;if((e.currentPlayingVideo!=null&&e.currentPlayingVideo.is(c))){return}var d=$(c);var b=d.attr("id");d.parents(".VCSortableInPreviewMode").find(".pause-vd-notify").hide();var g=document.getElementById(b);if(g){var a=d.parents(".VCSortableInPreviewMode");e.hideWrapLoading(a);var f={action:"request",method:"play"};if(g.contentWindow){g.contentWindow.postMessage(f,"*")}e.players[b].progressing=false;e.currentPlayingVideo=c;if(e.playedVideoIds.indexOf(b)<0){e.playedVideoIds.push(b)}}},stopVideo:function(c){var e=this;var d=$(c);var b=d.attr("id");var a=d.parents(".VCSortableInPreviewMode");if(e.players[b]==undefined){return}e.players[b].progressing=false;if(e.playedVideoIds.indexOf(b)<0){clearInterval(e.players[b].timer);e.resetWrapLoading(a);return}var g=document.getElementById(b);if(g){var f={action:"request",method:"pause"};if(g.contentWindow){g.contentWindow.postMessage(f,"*")}if(c.is(e.currentPlayingVideo)){e.currentPlayingVideo=null}d.parents(".VCSortableInPreviewMode").find(".pause-vd-notify").show()}},admPlayProgress:function(c){var f=this;f.admPlayProgressing=c;var a=3;var e=$(c);var d=e.find('iframe[src*="vcplayer.vcmedia.vn"], iframe[src*="123.31.11.105"], iframe[src*="vcplayer.mediacdn.vn"]');var g=d.attr("id");if(g==undefined){return}if(f.scrolling||f.playedVideoIds.indexOf(g)>=0||f.players[g].progressing){return}if(e.find(".bg-wraper").length>0){e.find(".loading-vid-icon").hide();e.find(".loading-vid-countdown").fadeIn(1500);e.find(".loading-vid-countdown").addClass("quickspin");e.find(".bg-wraper").addClass("bgPoster");if(detectmob()){if($.inArray("#"+g,readyVideoIds)>=0){videoInContent.playVideo(g)}e.find(".bg-wraper").hide()}else{f.players[g].progressing=true;e.find(".lvc-label").show();e.find(".lvc-number").show();f.players[g].timer=setInterval(function(){if(a>=0){if(a==0){videoInContent.playVideo(d)}e.find(".lvc-number").html(a)}else{clearInterval(f.players[g].timer);e.find(".bg-wraper").hide()}a=a-1},500)}}else{if($.inArray("#"+g,readyVideoIds)>=0){videoInContent.playVideo(d)}}},hideWrapLoading:function(a){a.find(".loading-vid-countdown").hide();a.find(".loading-vid-icon").hide();a.find(".bg-wraper").removeClass("bgPoster");a.find(".bg-wraper").css("display","none");a.find(".lvc-label").hide();a.find(".lvc-number").hide()},resetWrapLoading:function(a){a.find(".loading-vid-countdown").hide();a.find(".loading-vid-icon").show();a.find(".bg-wraper").removeClass("bgPoster");a.find(".bg-wraper").css("display","block");a.find(".lvc-label").hide();a.find(".lvc-number").html("3");a.find(".lvc-number").hide()},hideControlBar:function(b){var c=$(b);var a=c.attr("id");var e=document.getElementById(a);if(e){var d='admReviceMessageToPlayer("hidecontrolbar")';if(e.contentWindow){e.contentWindow.postMessage(d,"*")}}},getCurrentTime:function(b,d){var c=$(b);var a=c.attr("id");var f=document.getElementById(a);if(f){var e={action:"request",method:"currentTime",cid:d};if(f.contentWindow){f.contentWindow.postMessage(e,"*")}}},setCurrentTime:function(a,c){var b=$(a);b.attr("src",b.attr("src")+"&currentTime="+c);waitingVideoIdForReady.push("#"+b.attr("id"))},seekCurrentTime:function(b,e){var d=this;var c=$(b);var a=c.attr("id");var g=document.getElementById(a);if(g){var f={action:"request",method:"currentTime",args:[e]};if(g.contentWindow){g.contentWindow.postMessage(f,"*")}}setTimeout(function(){d.playVideo(b)},100)},stopAllVideo:function(){$('iframe[src*="vcplayer.vcmedia.vn"], iframe[src*="123.31.11.105"], iframe[src*="vcplayer.mediacdn.vn"]').each(function(){var a=$(this);var c=document.getElementById(a.attr("id"));if(c){var b={action:"request",method:"pause"};if(c.contentWindow){c.contentWindow.postMessage(b,"*")}}})},changeIsFullscreen:function(){var a=this;a.isFullscreen=!a.isFullscreen}};