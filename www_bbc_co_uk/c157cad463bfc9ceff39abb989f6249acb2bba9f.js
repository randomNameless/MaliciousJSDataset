define("musicnav/ab",function(){var a=function(a,b){this.fraction=a||.1,b=b||"default",this.key="BBCMusic_AB_"+b,this.setup()};return a.prototype={testState:{inTest:!1,group:null},setup:function(){var a;if(sessionStorage)return(a=sessionStorage.getItem(this.key))?void(this.testState=JSON.parse(a)):void this.calculateGroup()},calculateGroup:function(){var a=Math.random(),b=Math.random();a<this.fraction&&(this.testState.inTest=!0,.5>b?this.testState.group="A":this.testState.group="B"),this.save()},save:function(){sessionStorage.setItem(this.key,JSON.stringify(this.testState))},isInTest:function(){return this.testState.inTest},isA:function(){return"A"==this.testState.group}},a}),define("musicnav/ab/clips",["jquery-1.9","istats-1","musicnav/ab"],function(a,b,c){return{init:function(d,e){var f="ab_musicnav",g=new c(.3,"clips"),h="music_ab_musicnav_";g.isInTest()&&(g.isA()?(a(".mn_clips").html(d),h+="bucket_a"):(a("body").addClass(f),a(".mn_clips").html(e),h+="bucket_b"),b.log("click",h),a(".mn_clips").one("click",function(){b.log("click",h+"_clicked")}))}}}),define("musicnav/ab/feedback",["jquery-1.9","istats-1","musicnav/ab"],function(a,b,c){return{init:function(d,e){var f="ab_musicnav",g=new c(.3,"feedback_text"),h="music_ab_musicnav_";if(g.isInTest()){var i=a(".link-feedback a");g.isA()?(i.html(d),h+="bucket_a"):(a("body").addClass(f),i.html(e),h+="bucket_b"),b.log("click",h),i.one("click",function(){b.log("click",h+"_clicked")})}}}}),define("musicnav/musicnav",["jquery-1.9","require"],function(a){var b,c={selectors:{responsiveMenu:"#mn-links-panel",responsiveMenuButton:"#mn-hamburger-button",responsiveMenuButtonIcon:"#mn-hamburger-button i",responsiveMenuItem:".mn-menu-item",desktopSearchButton:".mn-search-button",desktopSearchField:".mn-search-field",responsiveMenuCheckbox:"#mn-status",menuLink:"a.mn_menu_item"},events:{responsiveMenuOpened:"musicnav_responsive_menu_opened",responsiveMenuClosed:"musicnav_responsive_menu_closed"}},d={init:function(e){c=a.extend({},c,e),a("body").on("click",function(a){d.escapeResponsiveMenu(a)}),d.bindResize(),d.bindLinks(),d.bindFocusOnArtistSearch(),d.makeResponsiveMenuAccessibile(),b=require("musicnav/search")},escapeResponsiveMenu:function(b){!d.responsiveMenuIsActive()||a(c.selectors.responsiveMenuCheckbox).is(b.target)||a(c.selectors.responsiveMenu).is(b.target)||a(c.selectors.responsiveMenuButton).is(b.target)||a(c.selectors.responsiveMenuButtonIcon).is(b.target)||a(c.selectors.responsiveMenuItem).is(b.target)||d.closeResponsiveMenu(b)},toggleHamburger:function(){a(c.selectors.responsiveMenuCheckbox).attr("checked",!this.responsiveMenuIsActive())},fadeBackground:function(){a('#orb-modules [class*="content"]').css({opacity:.1})},showBackground:function(){a('#orb-modules [class*="content"]').css({opacity:1})},bindResize:function(){a(window).resize(function(b){a(window).width()>799&&d.responsiveMenuIsActive()&&d.closeResponsiveMenu(b)})},bindLinks:function(){a(c.selectors.menuLink).click(function(a){d.closeResponsiveMenu()})},responsiveMenuIsActive:function(){return a(c.selectors.responsiveMenuCheckbox).is(":checked")},bindFocusOnArtistSearch:function(){a(c.selectors.desktopSearchButton).focus(function(b){a(this).trigger("click")}),a(c.selectors.desktopSearchField).focus(function(b){a(this).trigger("click")})},closeResponsiveMenu:function(b){b&&b.preventDefault(),a(c.selectors.responsiveMenuCheckbox).attr("checked",!1),this.showBackground()},makeResponsiveMenuAccessibile:function(){var e=a(c.selectors.responsiveMenuCheckbox),f=a(c.selectors.responsiveMenuButton),g='<button id="mn-hamburger-button" aria-controls="mn-links-panel">';g+=f.html(),g+="</button>",f.replaceWith(g),g=a(c.selectors.responsiveMenuButton),g.on("click",function(a){a.preventDefault();var c=e.prop("checked");e.prop("checked",!c),c?d.showBackground():(b.close(),d.fadeBackground())})}};return{init:function(a){return d.init(a)},close:function(){d.closeResponsiveMenu()}}}),define("musicnav/search",["jquery-1.9","require"],function(a){a.extend(a.easing,{def:"swing",easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c}});var b,c={autosuggestInterval:500,searchQuery:"",active:!1,keycodes:{backspace:8,tab:9,enter:13,escape:27,up:38,down:40,"delete":46},translations:{},activePage:"",staticBaseUrl:"",iChefBaseUrl:"",autoSuggestBaseUrl:"",events:{searchOpen:"musicnav_search_open",searchClosed:"musicnav_search_closed",searchCleared:"musicnav_search_cleared",searchFinalised:"musicnav_search_finalised",searchAutoSuggestShown:"musicnav_search_autosuggest_shown"},resultsCount:{playlists:null,artists:null,clips:null}},d={musicNav:"#mn",searchContainer:".mn-search",searchResults:".mn-search-results",searchInput:"#mn-search-input",searchBackground:"#mn-search-background",searchClear:"#mn-search-clear, #mn-search-clear-border",barLinks:".mn-bar-links",searchOpen:"#mn-search-open",searchClose:"#mn-search-close",hamburgerButton:"#mn-hamburger-button",searchSubmit:"#mn-search-submit",searchResultLink:"li.results-item a",musicLogo:".mn-logo",seeMoreLinks:".see-more-results-link"},e={},f=null,g={autoSuggestTimer:!1,xhrHttp:{},construct:function(){e.musicNav=a(d.musicNav),e.searchResults=a(d.searchResults),e.searchInput=a(d.searchInput),e.hamburgerButton=a(d.hamburgerButton)},init:function(d){c=a.extend({},c,d),b=require("musicnav/musicnav"),this.setSearchQuery(c.searchQuery),this.initSearchToggle(),this.initSearchSubmit(),this.initClearSearchQuery(),this.initAutoSuggest(),"/music/clips"==window.location.pathname&&this.closeAfterClipClick()},setSearchQuery:function(b){b=a("<div />").html(b).text(),e.searchInput.val(b),b&&a(d.searchClear).show(),c.searchQuery=b,f=b},initSearchToggle:function(){e.searchInput.on("click, focus",function(a){void 0===document.iplayerRadioApp?g.openSearchBar(a):a.preventDefault()}),a(d.searchOpen).click(function(a){void 0===document.iplayerRadioApp?(g.openSearchBar(a),e.searchInput.is(":focus")||e.searchInput.focus()):a.preventDefault()}),a(d.searchSubmit).click(function(a){c.active||c.searchQuery||(g.openSearchBar(a),e.searchInput.is(":focus")||e.searchInput.focus())}),a(d.searchClose).click(function(a){g.closeSearchBar(a)})},initSearchSubmit:function(){a(d.searchSubmit).click(function(b){e.searchInput.val()?a(document).trigger(c.events.searchFinalised):b.preventDefault()})},initClearSearchQuery:function(){e.searchInput.keyup(function(b){this.value?a(d.searchClear).fadeIn(200):(a(d.searchClear).fadeOut(200),g.clearSearchQuery(b))}),a(d.searchClear).click(function(a){g.clearSearchQuery(a)})},initAutoSuggest:function(){function b(a){d();var b=a.charCode||a.keyCode||a.which;b!=c.keycodes.escape&&(g.autoSuggestTimer=setInterval(f,c.autosuggestInterval))}function d(){g.autoSuggestTimer!==!1&&(clearInterval(g.autoSuggestTimer),g.autoSuggestTimer=!1)}function f(){d(),g.autoSuggest()}e.searchInput.keydown(b),a(window).resize(function(){g.verticallyCentreResultDescriptions()})},keystrokeListener:function(b){var f=b.charCode||b.keyCode||b.which;f==c.keycodes.tab&&0===a(b.target).parents(".mn-search-container, .mn-search-results").length&&(b.shiftKey&&a(b.target).is(d.musicLogo)?g.closeSearchBar(b):(b.preventDefault(),b.stopPropagation(),e.searchInput.val()?e.searchInput.focus():g.closeSearchBar(b))),f==c.keycodes.escape&&g.closeSearchBar(b)},showOverlay:function(){if(!a(d.searchBackground).length){var b=a("<div>").attr("id",d.searchBackground.substr(1));a("#orb-modules").prepend(b),b.fadeIn(200)}},hideOverlay:function(){var b=a(d.searchBackground);b.fadeOut(200,function(){b.remove()})},isAnimating:function(){return a(d.barLinks).is(":animated")||a(d.searchClose).is(":animated")},openSearchBar:function(f){return this.isAnimating()?(f.preventDefault(),!c.active&&e.searchInput.is(":focus")&&a(d.musicLogo).focus(),!1):c.active?!1:(c.active=!0,b.close(),this.showOverlay(),a(window).width()<800?this.openSearchBar__Mobile():this.openSearchBar__Desktop(),a("#mn-disableinteraction").length>0?a("#mn-disableinteraction").show():a("#mn-main").append('<div id="mn-disableinteraction" class="mn-disableinteraction"></div>'),a(document).trigger(c.events.searchOpen),void a(window).on("keyup",g.keystrokeListener))},openSearchBar__Mobile:function(){a(d.barLinks).hide().css({"max-width":0}),"search"!=c.activePage&&e.hamburgerButton.fadeOut(),e.musicNav.addClass("mn-search-is-open"),a(d.searchClose).fadeIn(200)},openSearchBar__Desktop:function(){a(d.barLinks).css({opacity:0}).animate({"max-width":0},{duration:1e3,easing:"easeOutCubic",complete:function(){a(d.barLinks).hide()}}),e.musicNav.addClass("mn-search-is-open"),a(d.searchClose).fadeIn(200),"search"!=c.activePage&&e.hamburgerButton.hide()},closeSearchBar:function(b){if(this.isAnimating())return!1;if(!c.active)return!1;c.active=!1,this.abortAjax(),f=null,e.searchInput.val(c.searchQuery),c.searchQuery&&a(d.searchClear).show();var h=a("#mn-search-close, .mn-search-results");c.searchQuery||(h=h.add(d.searchClear)),a(window).width()<600?(h.add(d.searchContainer),this.closeSearchBar__Mobile(b,h)):a(window).width()<800?this.closeSearchBar__Mobile(b,h):this.closeSearchBar__Desktop(b,h),a(window).off("keyup",g.keystrokeListener)},closeSearchBar__Mobile:function(b,d){d.fadeOut(200).promise().done(function(){g.resetSearchDisplay(),g.resetFocus(b),a(document).trigger(c.events.searchClosed)})},closeSearchBar__Desktop:function(b,e){e.fadeOut(200).promise().done(function(){a(d.barLinks).css({opacity:0}).show().animate({"max-width":580},{duration:300,easing:"easeInCubic",complete:function(){a(d.barLinks).fadeIn(200,function(){g.resetSearchDisplay(),g.resetFocus(b),a(document).trigger(c.events.searchClosed)})}})})},resetSearchDisplay:function(){e.musicNav.removeClass("mn-search-is-open"),a(d.barLinks).css({opacity:"",display:"","max-width":""});var b=a(d.searchContainer);b.css({display:""}),e.hamburgerButton.css({display:""}),this.clearSearchResults(),this.hideOverlay(),a("#mn-disableinteraction").hide()},resetFocus:function(b){if(b&&"keyup"==b.type&&!a(b.target).is(d.musicLogo)&&!a(b.target).closest("#orb-banner").length){var c=a("a.mn_playlists");c.is(":visible")?c.focus():e.hamburgerButton.is(":visible")&&e.hamburgerButton.focus()}},clearSearchResults:function(){e.searchResults.find("ul").empty()},clearSearchQuery:function(b){b.preventDefault(),e.searchInput.val(""),e.searchResults.fadeOut(200),a(d.searchClear).fadeOut(200),e.searchInput.focus(),this.abortAjax(),a(document).trigger(c.events.searchCleared),f=null},abortAjax:function(){"abort"in this.xhrHttp&&(this.xhrHttp.abort(),this.xhrHttp={})},autoSuggest:function(){var b=e.searchInput.val();""!==b&&f!==b&&(f=b,this.abortAjax(),this.xhrHttp=a.ajax({url:c.autoSuggestBaseUrl,data:{q:b},dataType:"json",cache:!0}),a.when(this.xhrHttp).done(function(a){"object"==typeof a&&g.showAutoSuggestResults(b,a)}))},showAutoSuggestResults:function(b,d){if(e.searchResults.find("ul").empty(),c.resultsCount={playlists:null,artists:null,clips:null},a.isArray(d.playlists)){c.resultsCount.playlists=d.playlists.length;var f=d.playlists;if(f.length){var g="";for(i=0,i_len=f.length;i<i_len;i++)g+='<li class="results-item is-playlist"><a class="playlist clearfix" href="/music/playlists/'+f[i].id+'"><div class="thumbnail">',f[i].image_id&&(g+='<img src="'+c.iChefBaseUrl+"160x160/"+f[i].image_id+'" alt="">'),g+='</div><div class="description">'+f[i].name+"</div></a></li>";a(".mn-search-results-playlists ul").html(g),a(".mn-search-results-playlists").show()}else a(".mn-search-results-playlists").hide()}if(a.isArray(d.artists)){c.resultsCount.artists=d.artists.length;var h=d.artists;if(h.length){var j="";for(i=0,i_len=h.length;i<i_len;i++)j+='<li class="results-item is-artist"><a class="artist clearfix" href="/music/artists/'+h[i].id+'"><div class="thumbnail">',j+=h[i].image_id?'<img src="'+c.iChefBaseUrl+"160x160/"+h[i].image_id+'" alt="">':'<img src="'+c.staticBaseUrl+'img/search/artists/avatar.png" alt="">',j+='</div><div class="description">'+h[i].name+"</div></a></li>";a(".mn-search-results-artists ul").html(j),a(".mn-search-results-artists").show()}else a(".mn-search-results-artists").hide()}if(a.isArray(d.clips)){c.resultsCount.clips=d.clips.length;var k=d.clips;if(k.length){var l,m="";for(i=0,i_len=k.length;i<i_len;i++)l=this.humanizeDuration(k[i].duration),m+='<li class="results-item is-clip"><a class="clip clearfix" href="/music/clips#'+k[i].id+'"><div class="thumbnail">',k[i].image_id&&(m+='<img src="'+c.iChefBaseUrl+"160x90/"+k[i].image_id+'" alt=""><div class="duration-wrapper">'),m+="Audio"==k[i].media_type?'<div class="icon"><i class="gelicon gelicon--listen" aria-hidden="true"></i></div>':'<div class="icon"><i class="gelicon gelicon--play" aria-hidden="true"></i></div>',m+='<div class="duration">'+l+'</div></div></div><div class="description">'+k[i].name+'<div class="mobile-duration">'+l+"</div></div></a></li>";a(".mn-search-results-clips ul").html(m),a(".mn-search-results-clips").show()}else a(".mn-search-results-clips").hide()}b.length<=4?(a(".search-more-results-generic-text").hide(),a(".search-more-results-for-text").show().find(".query").html(b)):(a(".search-more-results-generic-text").show().find(".query").html(b),a(".search-more-results-for-text").hide()),this.updateSeeMoreLinks(b),e.searchResults.show(),this.verticallyCentreResultDescriptions(),a(document).trigger(c.events.searchAutoSuggestShown)},verticallyCentreResultDescriptions:function(){a(".mn-search-results .description").each(function(){var b=a(this),c=b.height();b.css({"margin-top":-(c/2)})})},updateSeeMoreLinks:function(b){var c,e,f=a(d.seeMoreLinks);f.each(function(){e=a(this).data("filter"),c=this.pathname+"?q="+b+"&filter="+e,this.href=c})},closeAfterClipClick:function(){a(document).on("click",".mn-search-results-clips a.clip",function(b){b.preventDefault();var d=this.href;a(document).one(c.events.searchClosed,function(){window.location.href=d}),g.closeSearchBar()})},humanizeDuration:function(a){var b,d;if("number"!=typeof a||1>a)return"";if(60>a)b=a,d=1==a?"sec":"secs";else if(3570>a){var e=Math.round(a/60);b=e,d=1==e?"min":"mins"}else{var f=Math.round(a/3600);b=f,d=1==f?"hour":"hours"}return b+" "+c.translations[d]}};return g.construct(),{init:function(a){return g.init(a)},close:function(){g.closeSearchBar()},setSearchQuery:function(a){g.setSearchQuery(a)},countAutoSuggestPlaylists:function(){return c.resultsCount.playlists},countAutoSuggestArtists:function(){return c.resultsCount.artists},countAutoSuggestClips:function(){return c.resultsCount.clips},countRecent:function(){}}}),define("musicnav/stats",["jquery-1.9","istats-1","musicnav/search"],function(a,b,c){var d={version:null,debug:!1,defaultLabels:{app_name:"music",app_type:"responsive",ml_name:"barlesque",bbc_site:"music"},searchEvents:{searchOpen:"musicnav_search_open",searchClosed:"musicnav_search_closed",searchCleared:"musicnav_search_cleared",searchFinalised:"musicnav_search_finalised",searchAutoSuggestShown:"musicnav_search_autosuggest_shown"}},e={init:function(b){b=b||{},a.extend(d,b),d.debug&&window.console,!b.version&&window.console||(d.defaultLabels.app_version=d.version),this.initDesktopMenuStats(),this.initResponsiveMenuStats(),this.initSearchStats(),this.initAutoSuggestStats()},initDesktopMenuStats:function(){this.trackEvent(".mn-logo","click","click","musicnav-logo"),this.trackEvent(".mn_playlists","click","click","musicnav-playlists"),this.trackEvent(".mn_clips","click","click","musicnav-av"),this.trackEvent(".mn_tracks","click","click","musicnav-tracks"),this.trackEvent(".mn_artists","click","click","musicnav-artists"),this.trackEvent(".mn_playlister","click","click","musicnav-playlister"),this.trackLink(".mn-logo","musicnav"),this.trackLink(".mn_playlists","musicnav"),this.trackLink(".mn_clips","musicnav"),this.trackLink(".mn_tracks","musicnav"),this.trackLink(".mn_artists","musicnav"),this.trackLink(".mn_playlister","musicnav")},initResponsiveMenuStats:function(){this.trackEvent(".mn_responsive_music_home","click","click","musicnav-home"),this.trackEvent(".mn_responsive_playlists","click","click","musicnav-playlists"),this.trackEvent(".mn_responsive_clips","click","click","musicnav-av"),this.trackEvent(".mn_responsive_tracks","click","click","musicnav-tracks"),this.trackEvent(".mn_responsive_artists","click","click","musicnav-artists"),this.trackEvent(".mn_responsive_playlister","click","click","musicnav-playlister"),this.trackLink(".mn_responsive_music_home","musicnav"),this.trackLink(".mn_responsive_playlists","musicnav"),this.trackLink(".mn_responsive_clips","musicnav"),this.trackLink(".mn_responsive_tracks","musicnav"),this.trackLink(".mn_responsive_artists","musicnav"),this.trackLink(".mn_responsive_playlister","musicnav")},initSearchStats:function(){this.trackEvent(document,d.searchEvents.searchOpen,"focus","musicnav-search"),this.trackEvent(document,d.searchEvents.searchClosed,"close","musicnav-search"),this.trackEvent(document,d.searchEvents.searchCleared,"clear","musicnav-search"),this.trackEvent(document,d.searchEvents.searchFinalised,"search","musicnav-search",function(){return{search_term:a("#mn-search-input").val()}}),this.trackEvent(document,d.searchEvents.searchAutoSuggestShown,"autosuggest-load","musicnav-search-autosuggest",function(b){return{search_term:a("#mn-search-input").val(),ns_search_term:a("#mn-search-input").val(),search_results_count_artists:c.countAutoSuggestArtists(),search_results_count_playlists:c.countAutoSuggestPlaylists(),search_results_count_av:c.countAutoSuggestClips(),search_results_count_recent:c.countRecent()}})},initAutoSuggestStats:function(){a(document).on(d.searchEvents.searchAutoSuggestShown,function(){e.trackLink(".mn-search-results-playlists li.results-item a","musicnav-autosuggest-playlist"),e.trackLink(".mn-search-results-artists li.results-item a","musicnav-autosuggest-artist"),e.trackLink(".mn-search-results-clips li.results-item a","musicnav-autosuggest-av"),e.trackLink('a.see-more-results-link[data-filter="playlists"]',"musicnav-autosuggest-playlist"),e.trackLink('a.see-more-results-link[data-filter="artists"]',"musicnav-autosuggest-artist"),e.trackLink('a.see-more-results-link[data-filter="clips"]',"musicnav-autosuggest-av")}),this.trackEvent(".mn-search-results li.results-item a","click","autosuggest-click","musicnav-search-results-select",function(b){return{search_term:a("#mn-search-input").val(),search_results_count_artists:c.countAutoSuggestArtists(),search_results_count_playlists:c.countAutoSuggestPlaylists(),search_results_count_av:c.countAutoSuggestClips(),search_results_count_recent:c.countRecent(),search_item_type:e.getIstatsItemType(b),search_item_position:a(b).closest("li").index()+1}}),this.trackEvent("a.see-more-results-link","click","autosuggest-click","musicnav-search-results-more",function(b){return{search_term:a("#mn-search-input").val(),search_results_count_artists:c.countAutoSuggestArtists(),search_results_count_playlists:c.countAutoSuggestPlaylists(),search_results_count_av:c.countAutoSuggestClips(),search_results_count_recent:c.countRecent(),search_item_type:e.getIstatsItemTypeForSeeMoreLinks(b)}})},initSearchResultsPageStats:function(b,c){d.debug&&window.console,a(".plr-search-filter li:not(.filter-title) a").each(function(){e.trackEvent(this,"click","click","search-filter-"+a(this).data("istats-filter"),function(c){return{search_term:b,search_results_count_artists:a(".plr-search-results-artists li").length,search_results_count_playlists:a(".plr-search-results-playlists li").length,search_results_count_av:a(".plr-search-results-clips li").length}})}),this.trackEvent("a.result-link","click","click","search-results-select",function(c){return{search_term:b,search_results_count_artists:a(".plr-search-results-artists li").length,search_results_count_playlists:a(".plr-search-results-playlists li").length,search_results_count_av:a(".plr-search-results-clips li").length,search_item_type:a(c).data("istats-type"),search_item_position:a(c).closest("li").index()+1}}),this.trackLink("a.result-link","musicnav-searchresults-"+c)},trackEvent:function(b,c,d,f,g){function h(b){g=b.data.labels,a.isFunction(g)&&(g=g(this)),e.logEvent(d,f,g)}a.isFunction(g)||(g=g||{}),"string"==typeof b?a(document).on(c,b,{labels:g},h):a(b).on(c,{labels:g},h)},trackLink:function(c,f,g){var h=a(c);"undefined"!=typeof g&&h.click(function(a){e.updateTrackedLinkLabels(this,g)}),d.debug&&window.console,b.track("internal",{region:h,linkLocation:f})},logEvent:function(c,e,f){d.debug&&window.console;var g=a.extend({},d.defaultLabels,f,{breakpoint_type:this.breakpointType()});b.log(c,e,g)},updateTrackedLinkLabels:function(b,c){var d=a.param(c);b.linktrack=d},getIstatsItemType:function(b){return $el=a(b),$el.hasClass("playlist")?"playlist":$el.hasClass("artist")?"artist":$el.hasClass("clip")?"av":void 0},getIstatsItemTypeForSeeMoreLinks:function(b){var c="";switch(a(b).data("filter")){case"playlists":c="playlist";break;case"artists":c="artist";break;case"clips":c="av"}return c},breakpointType:function(){var b=a(window).width();return b>=1008?"1008px-up":b>=600?"600px-1007px":b>=400?"400px-599px":"0-399px"}};return{init:function(a){e.init(a)},initSearchResultsPageStats:function(a,b){e.initSearchResultsPageStats(a,b)}}});