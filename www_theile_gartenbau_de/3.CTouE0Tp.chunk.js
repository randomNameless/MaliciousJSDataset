import{k as e}from"./4.C_rgEAoe.chunk.js";import{g as t,z as r,w as n,u as a,q as i,n as o,k as s,r as u,c as l,A as c,e as d,p,f as h,B as f,v as g,C as m,t as _,D as b,E as v,s as D,F as y,l as w,i as C,G as E,a as k,_ as A,H as F,I as x,j as I,b as S,J as T,h as B}from"./5.D_uKc_ak.chunk.js";import{a as z,g as P,c as M,b as O,h as j,d as R,t as $}from"./6.D_CKFAbE.chunk.js";var q="__test_storage_support__",U=function(e){void 0===e&&(e="local");try{var t="session"===e?window.sessionStorage:window.localStorage;return t.setItem(q,"@@test"),"@@test"!==t.getItem(q)?!1:(t.removeItem(q),!0)}catch(r){return!1}},L=function(){var e=Object.create(null);return{getItem:function(t){var r=e[t];return"string"==typeof r?r:null},setItem:function(t,r){e[t]=r},removeItem:function(t){delete e[t]},clear:function(){e=Object.create(null)}}}();const N=t(e=>(t,r)=>{if(0!==t)return;if("function"!=typeof e)return r(0,()=>{}),void r(2);let n,a=!1;r(0,e=>{a||(a=2===e,a&&"function"==typeof n&&n())}),a||(n=e(e=>{a||r(1,e)},e=>{a||void 0===e||(a=!0,r(2,e))},()=>{a||(a=!0,r(2))}))});var V,H=function(e,t){return e===t};function Z(e){return void 0===e&&(e=H),function(t){return function(r,n){if(0===r){var a,i,o=!1;t(0,(function(t,r){0===t&&(i=r),1===t?o&&e(a,r)?i(1):(o=!0,a=r,n(1,r)):n(t,r)}))}}}}function G(e){return function(t){return function(r,n){if(0===r){var a,i=null,o=function(e,t){if(0!==e)return 1===e?(n(1,t),void i(1)):void(2===e&&(i=null));(i=t)(1)},s=function(e,t){2===e&&null!==i&&i(2,t),a(e,t)};t(0,(function(t,r){if(0===t)return a=r,void n(0,s);if(1!==t){if(2===t){if(n(2,r),null===i)return;i(2,r)}}else{if(null!==i)return;e(r)(0,o)}}))}}}}V="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var Y,W,J=("function"==typeof(W=V.Symbol)?W.observable?Y=W.observable:(Y=W("observable"),W.observable=Y):Y="@@observable",Y);const Q=r(Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}))).default;const X=t(e=>(t,r)=>{if(0!==t)return;let n;r(0,e=>{2===e&&n&&(n.unsubscribe?n.unsubscribe():n())}),e=e[Q]?e[Q]():e,n=e.subscribe({next:e=>r(1,e),error:e=>r(2,e),complete:()=>r(2)})}),K=e=>(t,r)=>{if(0!==t)return;let n=!1;e.then(e=>{n||(r(1,e),n||r(2))},e=>{n||r(2,e)}),r(0,e=>{2===e&&(n=!0)})};const ee=t((function(...e){let t=e[0];for(let r=1,n=e.length;r<n;r++)t=e[r](t);return t}));const te=t(e=>t=>(r,n)=>{if(0!==r)return;let a;t(0,(t,r)=>{0===t?(a=r,n(0,(e,t)=>{0!==e&&a(e,t)}),n(1,e)):n(t,r)})});const re=t(e=>t=>(r,n)=>{0===r&&t(0,(t,r)=>{n(t,1===t?e(r):r)})});function ne(e){return t=>n(re(e)(t))}var ae=function(){},ie={};function oe(e){var t,r,n=[],a=!1,i=ie;return function(o,s){if(0===o){if(i!==ie)return s(0,ae),a&&s(1,r),void s(2,i);n.push(s);var u=function(e,r){if(2!==e)i===ie&&t(e,r);else{var a=n.indexOf(s);-1!==a&&n.splice(a,1)}};1!==n.length?(s(0,u),a&&i===ie&&s(1,r)):e(0,(function(e,o){if(0===e)return t=o,void s(0,u);1===e&&(a=!0,r=o);var l=n.slice(0);2===e&&(i=o,n=null),l.forEach((function(t){t(e,o)}))}))}}}const se=t((function(){let e=[];return(t,r)=>{if(0===t){const t=r;e.push(t),t(0,r=>{if(2===r){const r=e.indexOf(t);r>-1&&e.splice(r,1)}})}else{const n=e.slice(0);for(let a,i=0,o=n.length;i<o;i++)a=n[i],e.indexOf(a)>-1&&a(t,r)}}})),ue={},le=e=>t=>(r,n)=>{if(0!==r)return;let a,i,o=!1,s=ue;t(0,(t,r)=>{if(0===t)return a=r,e(0,(e,t)=>0===e?(i=t,void i(1)):1===e?(s=void 0,i(2),a(2),void(o&&n(2))):void(2===e&&(i=null,t&&(s=t,a(2),o&&n(e,t))))),o=!0,n(0,(e,t)=>{s===ue&&(2===e&&i&&i(2),a(e,t))}),void(s!==ue&&n(2,s));2===t&&i(2),n(t,r)})},ce=(e,t,r)=>t=>(r,n)=>{0===r&&t(0,(t,r)=>{1===t&&void 0!==r&&e&&e(r),n(t,r)})};function de(e){const t=function(e){try{return window.localStorage}catch(t){return"SecurityError"===t.name&&e?e:U()?window.localStorage:L}}(e);return{setItem:(e,r)=>new Promise(n=>n(t.setItem(e,r))),getItem:e=>new Promise(r=>r(t.getItem(e))),removeItem:e=>new Promise(r=>r(t.removeItem(e)))}}function pe(e,t){return[].concat(...t.map(e))}function he(e){return"object"==typeof e&&null!==e&&!a(e)}function fe(t,r){return e(r).reduce((e,n)=>(e[n]=t(r[n]),e),{})}function ge(e){let t=e.trim();if(0===t.length)return"";if(1===t.length)return t.toLowerCase();if(/^[a-z\d]+$/.test(t))return t;return t!==t.toLowerCase()&&(t=function(e){let t=e,r=!1,n=!1,a=!1;for(let i=0;i<t.length;i++){const e=t[i];r&&/[a-zA-Z]/.test(e)&&e.toUpperCase()===e?(t=t.slice(0,i)+"-"+t.slice(i),r=!1,a=n,n=!0,i++):n&&a&&/[a-zA-Z]/.test(e)&&e.toLowerCase()===e?(t=t.slice(0,i-1)+"-"+t.slice(i-1),a=n,n=!1,r=!0):(r=e.toLowerCase()===e,a=n,n=e.toUpperCase()===e)}return t}(t)),t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase()),t}function me(e){return a(e)?e:[e]}function _e(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(e(n))return n}}function be(e,t){for(let r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function ve(e,t){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return t[r]}function De(e,t,r){for(let n=t;n>=0;n--)if(e(r[n]))return n;return-1}function ye(e,t){return De(e,t.length-1,t)}function we(e,t){if(e<=0)return[];const r=[];for(;e--;)r.push(t);return r}function Ce(t,r){return e(r).forEach(e=>{t(r[e],e)})}function Ee(){return Math.random().toString(36).substring(2)}function ke(e){const t=Ee();return i(t,e)?ke(e):t}function Ae(e,t){const r="string"==typeof e?e.split("."):e;let n=0,a=t;for(;a&&n<r.length;)a=a[r[n++]];return a}function Fe(e,t){return-1!==t.indexOf(e)}function xe(e){return 0===(a(e)?e:Object.keys(e)).length}function Ie(e,t){return t.reduce((t,r)=>(t[r[e]]=r,t),{})}function Se(e){return e.length>0?e[e.length-1]:void 0}function Te(t,r){return e(r).reduce((e,n)=>(Object.defineProperty(e,t(n),{value:r[n],enumerable:!0}),e),{})}function Be(t,r){return e(r).reduce((e,n)=>(e[n]=t(r[n],n),e),{})}function ze(e,t){if(xe(t))return e;const r={};return Ce((n,o)=>{if(i(o,t))if(he(e[o])&&he(t[o]))r[o]=ze(e[o],t[o]);else if(a(e[o])&&a(t[o])){const n=Math.max(e[o].length,t[o].length);r[o]=new Array(n);for(let a=0;a<n;a++)a in t[o]?r[o][a]=t[o][a]:a in e[o]&&(r[o][a]=e[o][a])}else r[o]=t[o];else r[o]=e[o]},e),Ce((e,n)=>{i(n,r)||(r[n]=t[n])},t),r}function Pe(t){return e(t).map(e=>t[e])}function Me(e,t){const r="function"==typeof e?e:t=>Ae(e,t);return(a(t)?[...t]:Pe(t)).sort((e,t)=>r(e)-r(t))}function Oe(t,r){return e(r).reduce((e,n)=>(t(r[n],n)||(e[n]=r[n]),e),{})}function je(e,t){return Oe((t,r)=>-1!==e.indexOf(r),t)}function Re(e,t){return e.reduce((e,r)=>(e[r]=t[r],e),{})}function $e(t,r){return e(r).reduce((e,n)=>(t(r[n])&&(e[n]=r[n]),e),{})}function qe(e,t){return e.reduce((e,r)=>(i(r,t)&&(e[r]=t[r]),e),{})}function Ue(e,t){return t.filter(t=>!e(t))}function Le(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Ne(e,t){if(Le(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!i(r[a],t)||!Le(e[r[a]],t[r[a]]))return!1;return!0}function Ve(e,t){if(t.length<=e)return t;const r=t.split(" "),n=[];let a=0;for(const i of r){if(a+i.length>e)break;a+=i.length+1,n.push(i)}return n.join(" ")+"..."}function He(e,t,r){const n=De(t=>!e(t),t,r);return n===t?[]:r.slice(n+1,t+1)}function Ze(e,t){return e===t?0:e<t?-1:1}de();const Ge=/\s+$/;function Ye(e){return e.replace(Ge,"")}function We(e,t){const r=[];return t.filter(t=>{const n=e(t);return-1===r.indexOf(n)&&(r.push(n),!0)})}function Je(e,t,r){return[...r.slice(0,e),t,...r.slice(e+1,r.length)]}const Qe=/(?:[^:]+:\/\/)?([^/\s]+)/;function Xe(e){const t=e.match(Qe);return t&&t[1]}const Ke=(e,t)=>z(t)[e],et=/^(?:https?:)?\/\/[^/]+\/([^?#]+)/,tt=e=>{const t=e.match(et);return"/"+(t&&t[1]||"")},rt=/^((http(s)?:)?\/\/)/,nt=e=>e.replace(rt,""),at=/^((http(s)?:)?\/\/)/,it=e=>{const t=e.match(at);return t?t[2]:null},ot=(e,t)=>{if(0===Object.keys(t).length)return e;const r=P(e),n=tt(e),a=M(e)?z(e):{},i=O({...a,...t});return e.indexOf("#")>-1?""+r+n+"?"+i+"#"+e.split("#")[1]:""+r+n+"?"+i},st=(e,t)=>{if(-1===e.indexOf("?"))return e;const r=z(e);if(xe(r))return e;if(Object.keys(r).every(e=>!t.includes(e)))return e;t.forEach(e=>delete r[e]);const[n]=e.split("?"),a=ot(n,r);return e.indexOf("#")>-1?a+"#"+e.split("#")[1]:a},ut=e=>"https://"+nt(e);function lt(e,t){return t=t||{},new Promise((function(r,n){var a=new XMLHttpRequest,i=[],o=[],s={},u=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:u,headers:{keys:function(){return i},entries:function(){return o},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var l in a.open(t.method||"get",e,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,r){i.push(t=t.toLowerCase()),o.push([t,r]),s[t]=s[t]?s[t]+","+r:r})),r(u())},a.onerror=n,a.withCredentials="include"==t.credentials,t.headers)a.setRequestHeader(l,t.headers[l]);a.send(t.body||null)}))}const ct="accept_greeting",dt="cancel_greeting",pt="check_goals",ht="deactivate_chat",ft="delete_chat_properties",gt="delete_event_properties",mt="delete_thread_properties",_t="get_chat",bt="get_customer",vt="get_form",Dt="get_predicted_agent",yt="get_url_info",wt="list_chats",Ct="list_group_statuses",Et="list_threads",kt="login",At="mark_events_as_seen",Ft="resume_chat",xt="send_event",It="send_rich_message_postback",St="send_sneak_peek",Tt="set_customer_session_fields",Bt="start_chat",zt="update_chat_properties",Pt="update_customer",Mt="update_customer_page",Ot="update_event_properties",jt="update_thread_properties",Rt="upload_file",$t="file",qt="filled_form",Ut="message",Lt="system_message",Nt="custom",Vt="chat_deactivated",Ht="customer_disconnected",Zt="customer_side_storage_updated",Gt="groups_status_updated",Yt="incoming_chat",Wt="incoming_event",Jt="incoming_typing_indicator",Qt="queue_position_updated",Xt="thread_properties_updated",Kt="user_added_to_chat",er=Object.freeze(Object.defineProperty({__proto__:null,CHAT_DEACTIVATED:"chat_deactivated",CHAT_PROPERTIES_DELETED:"chat_properties_deleted",CHAT_PROPERTIES_UPDATED:"chat_properties_updated",CHAT_TRANSFERRED:"chat_transferred",CUSTOMER_DISCONNECTED:"customer_disconnected",CUSTOMER_SIDE_STORAGE_UPDATED:"customer_side_storage_updated",CUSTOMER_UPDATED:"customer_updated",EVENTS_MARKED_AS_SEEN:"events_marked_as_seen",EVENT_PROPERTIES_DELETED:"event_properties_deleted",EVENT_PROPERTIES_UPDATED:"event_properties_updated",EVENT_UPDATED:"event_updated",GREETING_ACCEPTED:"greeting_accepted",GREETING_CANCELED:"greeting_canceled",GROUPS_STATUS_UPDATED:"groups_status_updated",INCOMING_CHAT:"incoming_chat",INCOMING_EVENT:"incoming_event",INCOMING_GREETING:"incoming_greeting",INCOMING_MULTICAST:"incoming_multicast",INCOMING_RICH_MESSAGE_POSTBACK:"incoming_rich_message_postback",INCOMING_TYPING_INDICATOR:"incoming_typing_indicator",QUEUE_POSITION_UPDATED:"queue_position_updated",THREAD_PROPERTIES_DELETED:"thread_properties_deleted",THREAD_PROPERTIES_UPDATED:"thread_properties_updated",USER_ADDED_TO_CHAT:"user_added_to_chat",USER_REMOVED_FROM_CHAT:"user_removed_from_chat"},Symbol.toStringTag,{value:"Module"})),tr="customer";function rr(){const e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}const nr=(e,t)=>{const r=function(r){const n=Object.create(r);n.action=(t,n)=>{const a={type:e,payload:t};n&&(a.meta=n),r.dispatch(a)};for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t(n,...i)};return r.toString=()=>e,r},ar=(e,t)=>{const r="REQUEST_"+e,n=nr(e,t),a=function(e){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];const u=Object.create(e);let l;if(u.action=(t,a)=>{const{promise:s,resolve:u,reject:c}=rr();e.dispatch({type:r,payload:{...t,meta:a,resolve:u,reject:c}}),l=s,l.then(()=>{n(e,...i)},o)},t(u,...i),void 0===l)throw new Error("You forgot to call `action` handler in "+r+" creator.");return l};return a.toString=()=>r,{actionMethod:n,requestActionMethod:a}},ir=(e,t)=>{if("object"!=typeof e||null===e||Array.isArray(e))throw new Error("bindActionMethods expects a plain object with actionMethods as values.");return fe(e=>((e,t)=>function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e(t,...n)})(e,t),e)},or=(e,t)=>(t[void 0]&&console.warn(["Reducer contains an 'undefined' action type.","Have you misspelled a constant?"].join("\n")),function(r,n){return void 0===r&&(r=e),i(n.type,t)?t[n.type](r,n.payload):r}),sr=(e,t)=>{if("object"!=typeof e||null===e||Array.isArray(e))throw new Error("bindSelectors expects a plain object with selectors as values.");return fe(e=>((e,t)=>function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e(t(),...n)})(e,t),e)},ur=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(e,r)=>t.reduce((e,t)=>t(e,r),e)},lr=Object.freeze({success:!0}),cr=(e,t)=>{const r={id:t.id,authorId:t.author_id,createdAt:t.created_at,threadId:e,properties:t.properties||{}};return void 0!==t.custom_id&&(r.customId=t.custom_id),r},dr=(e,t)=>{let r,n,a,i;t.height>t.width?(r="height",n="width",a=t.height,i=t.width):(r="width",n="height",a=t.width,i=t.height);const o=e/a;return{[r]:Math.ceil(Math.min(a,e)),[n]:Math.ceil(Math.min(o*i,i))}},pr=(e,t)=>void 0!==t.width&&void 0!==t.height?((e,t)=>({...cr(e,t),type:"file",contentType:t.content_type,url:t.url,name:t.name,width:t.width,height:t.height,thumbnails:{default:{url:t.thumbnail_url,...dr(300,t)},high:{url:t.thumbnail2x_url,...dr(600,t)}},...t.alternative_text&&{alternativeText:t.alternative_text}}))(e,t):{...cr(e,t),type:"file",contentType:t.content_type,url:t.url,name:t.name},hr=e=>{const t={};if("string"==typeof e.title&&(t.title=e.title),"string"==typeof e.subtitle&&(t.subtitle=e.subtitle),e.image){const{image:r}=e;t.image={url:r.url,name:r.name,...r.alternative_text&&{alternativeText:r.alternative_text}}}return e.buttons&&(t.buttons=e.buttons.map(e=>{switch(e.type){case"message":case"copy":case"phone":return{type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};case"cancel":return{type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,role:e.role||"default"};case"url":{const t={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return e.target&&(t.target=e.target),t}case"webview":return{type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};default:return{text:e.text,postbackId:e.postback_id,userIds:e.user_ids,role:e.role||"default"}}})),t},fr=(e,t)=>{switch(t.type){case"file":return pr(e,t);case"form":return((e,t)=>({...cr(e,t),authorId:"system",type:"form",formId:t.form_id,fields:t.fields}))(e,t);case"filled_form":return((e,t)=>({...cr(e,t),type:"filled_form",formId:t.form_id,fields:t.fields.map(e=>{switch(e.type){case"group_chooser":{if(!e.answer)return e;const{group_id:t,...r}=e.answer;return{...e,answer:{...r,groupId:t}}}default:return e}})}))(e,t);case"message":return((e,t)=>({...cr(e,t),type:"message",text:t.text}))(e,t);case"rich_message":return((e,t)=>{switch(t.template_id){case"cards":case"quick_replies":case"sticker":return{...cr(e,t),type:"rich_message",template:t.template_id,elements:t.elements.map(hr)};default:return null}})(e,t);case"system_message":return((e,t)=>{const r={...cr(e,{...t,author_id:"system"}),type:"system_message",text:t.text,systemMessageType:t.system_message_type};return t.text_vars&&(r.textVars=t.text_vars),r})(e,t);case"custom":return((e,t)=>({...cr(e,t),type:"custom",...t.content&&{content:t.content}}))(e,t);default:return null}},gr=e=>({id:e.id,addon:e.addon||null,uniqueId:e.unique_id,displayedFirstTime:e.displayed_first_time,isExitIntent:e.is_exit_intent,accepted:e.accepted||!1,subtype:e.subtype||"greeting",event:fr(null,e.event),agent:{id:e.agent.id,name:e.agent.name,avatar:e.agent.avatar,jobTitle:e.agent.job_title,isBot:e.agent.is_bot||!1}}),mr=function(e){return void 0===e&&(e={}),e.group_ids?{groupIds:e.group_ids}:{}},_r=e=>fe(e=>e.events_seen_up_to?e.events_seen_up_to:null,Ie("id",e)),br=(e,t)=>{const r=t.properties||{};return{id:t.id,chatId:e,active:t.active,access:mr(t.access),createdAt:t.created_at,userIds:t.user_ids,events:t.events.map(e=>fr(t.id,e)).filter(Boolean),properties:r,previousThreadId:t.previous_thread_id||null,nextThreadId:t.next_thread_id||null,queue:t.queue?kr(t.queue):null}},vr=e=>({id:e.id,access:mr(e.access),users:e.users.map(Ar),properties:e.properties||{},eventsSeenUpToMap:_r(e.users)}),Dr=e=>{const t=qe(["avatar","email","name"],e);return e.session_fields&&(t.sessionFields=e.session_fields.reduce((e,t)=>{const[r]=Object.keys(t);return e[r]=t[r],e},{})),t},yr=e=>{const t=Dr(e);return{id:e.id,type:"customer",...t,sessionFields:t.sessionFields||{}}},wr=e=>{const{statistics:t}=e;return{...yr(e),statistics:{chatsCount:t.chats_count,threadsCount:t.threads_count,visitsCount:t.visits_count,pageViewsCount:t.page_views_count,greetingsShownCount:t.greetings_shown_count,greetingsAcceptedCount:t.greetings_accepted_count}}},Cr=e=>{const{agent:t,queue:r}=e;return{agent:{id:t.id,type:"agent",name:t.name,avatar:t.avatar,jobTitle:t.job_title,isBot:t.is_bot},queue:r}},Er=e=>({position:e.position,waitTime:e.wait_time}),kr=e=>({...Er(e),queuedAt:e.queued_at}),Ar=e=>{return"customer"===e.type?{...yr(r=e),present:r.present}:{id:(t=e).id,type:"agent",name:t.name,avatar:t.avatar,jobTitle:t.job_title,present:t.present};var t,r},Fr=e=>"offline"===e?"offline":"online",xr=e=>({chatId:e.chat_id,properties:e.properties}),Ir=e=>{const t={chatId:e.chat_id,threadId:e.thread_id,transferredTo:{...e.transferred_to.agent_ids&&{agentIds:e.transferred_to.agent_ids},...e.transferred_to.group_ids&&{groupIds:e.transferred_to.group_ids}},queue:e.queue?kr(e.queue):null};return"manual"===e.reason?{...t,reason:e.reason,requesterId:e.requester_id}:{...t,reason:e.reason}},Sr=e=>({id:e.id,...Dr(e)}),Tr=e=>({chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}),Br=e=>({chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}),zr=e=>{const t=e.thread_id;return{chatId:e.chat_id,threadId:t,event:fr(t,e.event)}},Pr=e=>({chatId:e.chat_id,userId:e.user_id,seenUpTo:e.seen_up_to}),Mr=e=>({uniqueId:e.unique_id}),Or=e=>{const{chat:t}=e;return{chat:{...vr(t),thread:br(t.id,t.thread)}}},jr=e=>({chatId:e.chat_id,event:fr(e.thread_id,e.event)}),Rr=e=>gr(e),$r=e=>({userId:e.user_id,chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,postback:e.postback}),qr=e=>{const{chat_id:t,typing_indicator:r}=e;return{chatId:t,typingIndicator:{authorId:r.author_id,isTyping:r.is_typing}}},Ur=e=>({chatId:e.chat_id,threadId:e.thread_id,queue:Er(e.queue)}),Lr=e=>({chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}),Nr=e=>({chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}),Vr=e=>({chatId:e.chat_id,user:Ar(e.user),present:e.user.present}),Hr=e=>({chatId:e.chat_id,userId:e.user_id}),Zr=e=>e.map(e=>{switch(e.type){case"group_chooser":return{...e,options:e.options.map(e=>{let{group_id:t,...r}=e;return{...r,groupId:t}})};case"rating":{const{comment_label:t,...r}=e;return{...r,commentLabel:t}}default:return e}}),Gr=e=>{const t=e.map((e,t)=>({...e,id:String(t)}));return Zr(t)},Yr=e=>{const t=!("id"in e.fields[0]);return{id:e.id,fields:t?Gr(e.fields):Zr(e.fields)}},Wr=e=>e.enabled?{...e,form:Yr(e.form)}:e,Jr=e=>{const t={url:e.url};return e.title&&(t.title=e.title),e.description&&(t.description=e.description),e.image_url&&(t.imageUrl="https://"+nt(e.image_url),e.image_width&&e.image_height&&(t.imageWidth=e.image_width,t.imageHeight=e.image_height)),t},Qr=e=>{let{online_groups_ids:t,customer_groups:r}=e;if(!t)return"offline";return Fe(r.monitoring.id,t)?"online":"offline"},Xr=e=>{const t=e.chats_summary.map(e=>{let{id:t,active:r,access:n,last_thread_created_at:a,last_thread_id:i,last_event_per_type:o,properties:s={},users:u}=e;const l={id:t,active:r,access:mr(n),properties:s,users:u.map(Ar),lastThreadId:i||null,lastThreadCreatedAt:a||null,eventsSeenUpToMap:_r(u)};if(!o)return l;l.lastEventsPerType=fe(e=>fr(e.thread_id,e.event),o);const c=o,d=Se(Object.keys(c).map(e=>c[e]).sort((e,t)=>e.thread_id===t.thread_id?Ze(e.event.created_at,t.event.created_at):Ze(e.thread_created_at,t.thread_created_at)));return d&&l.lastEventsPerType&&(l.lastEvent=l.lastEventsPerType[d.event.type]),l});return{chatsSummary:Me(e=>{var t;let{lastEvent:r,order:n}=e;return-1*(null!=(t=void 0!==r?r.timestamp:n)?t:0)},t),totalChats:e.total_chats,users:We(e=>e.id,pe(e=>e.users,t)),previousPageId:e.previous_page_id||null,nextPageId:e.next_page_id||null}},Kr=e=>e.groups_status,en=(e,t)=>({threads:t.threads.map(t=>br(e.payload.chat_id,t)),previousPageId:t.previous_page_id||null,nextPageId:t.next_page_id||null}),tn=e=>{const{__priv_dynamic_config:t,chats:r,greeting:n}=e;return{dynamicConfig:t,customer:wr(e.customer),availability:Qr(t),chats:r.map(t=>({id:t.chat_id,active:"has_active_thread"in t?t.has_active_thread:e.has_active_thread,hasUnreadEvents:t.has_unread_events})),...n&&{greeting:gr(n)}}},rn=e=>{switch(e.action){case"chat_deactivated":return{action:e.action,payload:{chatId:e.payload.chat_id}};case"chat_properties_deleted":return{action:e.action,payload:(t=e.payload,{chatId:t.chat_id,properties:t.properties})};case"chat_properties_updated":return{action:e.action,payload:xr(e.payload)};case"chat_transferred":return{action:e.action,payload:Ir(e.payload)};case"customer_side_storage_updated":case"customer_disconnected":return{action:e.action,payload:e.payload};case"customer_updated":return{action:e.action,payload:Sr(e.payload)};case"event_properties_deleted":return{action:e.action,payload:Tr(e.payload)};case"event_properties_updated":return{action:e.action,payload:Br(e.payload)};case"event_updated":return{action:e.action,payload:zr(e.payload)};case"events_marked_as_seen":return{action:e.action,payload:Pr(e.payload)};case"greeting_accepted":case"greeting_canceled":return{action:e.action,payload:Mr(e.payload)};case"groups_status_updated":return{action:e.action,payload:e.payload};case"incoming_chat":return{action:e.action,payload:Or(e.payload)};case"incoming_event":return{action:e.action,payload:jr(e.payload)};case"incoming_greeting":return{action:e.action,payload:Rr(e.payload)};case"incoming_multicast":return{action:e.action,payload:e.payload};case"incoming_rich_message_postback":return{action:e.action,payload:$r(e.payload)};case"incoming_typing_indicator":return{action:e.action,payload:qr(e.payload)};case"queue_position_updated":return{action:e.action,payload:Ur(e.payload)};case"thread_properties_deleted":return{action:e.action,payload:Lr(e.payload)};case"thread_properties_updated":return{action:e.action,payload:Nr(e.payload)};case"user_added_to_chat":return{action:e.action,payload:Vr(e.payload)};case"user_removed_from_chat":return{action:e.action,payload:Hr(e.payload)}}var t},nn=e=>{let{request:t,response:r}=e;switch(r.action){case"accept_greeting":case"cancel_greeting":case"delete_chat_properties":case"delete_event_properties":case"delete_thread_properties":return{action:r.action,payload:lr};case"get_chat":return{action:r.action,payload:(n=r.payload,{...vr(n),thread:n.thread?br(n.id,n.thread):null})};case"get_customer":return{action:r.action,payload:wr(r.payload)};case"get_form":return{action:r.action,payload:Wr(r.payload)};case"get_predicted_agent":return{action:r.action,payload:Cr(r.payload)};case"get_url_info":return{action:r.action,payload:Jr(r.payload)};case"list_chats":return{action:r.action,payload:Xr(r.payload)};case"list_group_statuses":return{action:r.action,payload:Kr(r.payload)};case"list_threads":return{action:r.action,payload:en(t,r.payload)};case"login":return{action:r.action,payload:tn(r.payload)};case"mark_events_as_seen":case"send_sneak_peek":case"set_customer_session_fields":case"send_rich_message_postback":case"update_chat_properties":case"update_customer":case"update_customer_page":case"update_event_properties":case"update_thread_properties":return{action:r.action,payload:lr}}var n},an=e=>({code:e.type.toUpperCase(),message:e.message});var on,sn,un,ln,cn,dn,pn,hn,fn,gn;function mn(){return gn?fn:(gn=1,fn=function(e){var t={};t.src_Any=(sn?on:(sn=1,on=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)).source,t.src_Cc=(ln?un:(ln=1,un=/[\0-\x1F\x7F-\x9F]/)).source,t.src_Z=(dn?cn:(dn=1,cn=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/)).source,t.src_P=(hn?pn:(hn=1,pn=/[!-#%-\*,-/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E49\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/)).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|[><｜]|\\(|"+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t})}function _n(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(r){e[r]=t[r]}))})),e}function bn(e){return Object.prototype.toString.call(e)}function vn(e){return"[object Function]"===bn(e)}function Dn(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var yn={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var wn={"http:":{validate:function(e,t,r){var n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){var n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){var n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Cn="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function En(e){var t=e.re=mn()(e.__opts__),r=e.__tlds__.slice();function n(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");var a=[];function i(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var r=e.__schemas__[t];if(null!==r){var n={validate:null,link:null};if(e.__compiled__[t]=n,"[object Object]"===bn(r))return!function(e){return"[object RegExp]"===bn(e)}(r.validate)?vn(r.validate)?n.validate=r.validate:i(t,r):n.validate=function(e){return function(t,r){var n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}(r.validate),void(vn(r.normalize)?n.normalize=r.normalize:r.normalize?i(t,r):n.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===bn(e)}(r)?i(t,r):a.push(t)}})),a.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var o=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(Dn).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function kn(e,t){var r=e.__index__,n=e.__last_index__,a=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=a,this.text=a,this.url=a}function An(e,t){var r=new kn(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Fn(e,t){if(!(this instanceof Fn))return new Fn(e,t);var r;t||(r=e,Object.keys(r||{}).reduce((function(e,t){return e||yn.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=_n({},yn,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=_n({},wn,e),this.__compiled__={},this.__tlds__=Cn,this.__tlds_replaced__=!1,this.re={},En(this)}Fn.prototype.add=function(e,t){return this.__schemas__[e]=t,En(this),this},Fn.prototype.set=function(e){return this.__opts__=_n(this.__opts__,e),this},Fn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,r,n,a,i,o,s,u;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(a=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||u<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(i=n.index+n[1].length,o=n.index+n[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o)),this.__index__>=0},Fn.prototype.pretest=function(e){return this.re.pretest.test(e)},Fn.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},Fn.prototype.match=function(e){var t=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(An(this,t)),t=this.__last_index__);for(var n=t?e.slice(t):e;this.test(n);)r.push(An(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return r.length?r:null},Fn.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,r){return e!==r[t-1]})).reverse(),En(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,En(this),this)},Fn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},Fn.prototype.onCompile=function(){};var xn=Fn;const In=t(xn);var Sn={exports:{}},Tn=Sn.exports=function(){function e(e,t,r){return r&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e,r),e}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}n.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:a,changeDefaults:function(e){n.exports.defaults=e}};var i=/[&<>"']/,o=/[&<>"']/g,s=/[<>"']|&(?!#?\w+;)/,u=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function(e){return l[e]},d=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function p(e){return e.replace(d,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var h=/(^|[^\[])\^/g,f=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,m={},_=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,v=/^([^:]+:\/*[^/]*)[\s\S]*$/;function D(e,t){m[" "+e]||(_.test(e)?m[" "+e]=e+"/":m[" "+e]=y(e,"/",!0));var r=-1===(e=m[" "+e]).indexOf(":");return"//"===t.substring(0,2)?r?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?r?t:e.replace(v,"$1")+t:e+t}function y(e,t,r){var n=e.length;if(0===n)return"";for(var a=0;a<n;){var i=e.charAt(n-a-1);if(i!==t||r){if(i===t||!r)break;a++}else a++}return e.substr(0,n-a)}var w=function(e,t){if(t){if(i.test(e))return e.replace(o,c)}else if(s.test(e))return e.replace(u,c);return e},C=p,E=function(e,t){e=e.source||e,t=t||"";var r={replace:function(t,n){return n=(n=n.source||n).replace(h,"$1"),e=e.replace(t,n),r},getRegex:function(){return new RegExp(e,t)}};return r},k=function(e,t,r){if(e){var n;try{n=decodeURIComponent(p(r)).replace(f,"").toLowerCase()}catch(a){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!g.test(r)&&(r=D(t,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(a){return null}return r},A={exec:function(){}},F=function(e){for(var t,r,n=1;n<arguments.length;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},x=function(e,t){var r=e.replace(/\|/g,(function(e,t,r){for(var n=!1,a=t;--a>=0&&"\\"===r[a];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(/\\\|/g,"|");return r},I=y,S=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var r=e.length,n=0,a=0;a<r;a++)if("\\"===e[a])a++;else if(e[a]===t[0])n++;else if(e[a]===t[1]&&--n<0)return a;return-1},T=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},B=function(e,t){if(t<1)return"";for(var r="";t>1;)1&t&&(r+=e),t>>=1,e+=e;return r+e},z=n.exports.defaults,P=I,M=x,O=w,j=S;function R(e,t,r){var n=t.href,a=t.title?O(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:r,href:n,title:a,text:i}:{type:"image",raw:r,href:n,title:a,text:O(i)}}var $=function(){function e(e){this.options=e||z}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:P(r,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var r=t[0],n=function(e,t){var r=e.match(/^(\s+)(?:```)/);if(null===r)return t;var n=r[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e})).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim():t[2],text:n}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var r=t[2].trim();if(/#$/.test(r)){var n=P(r,"#");this.options.pedantic?r=n.trim():n&&!/ $/.test(n)||(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var r={type:"table",header:M(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(r.header.length===r.align.length){var n,a=r.align.length;for(n=0;n<a;n++)/^ *-+: *$/.test(r.align[n])?r.align[n]="right":/^ *:-+: *$/.test(r.align[n])?r.align[n]="center":/^ *:-+ *$/.test(r.align[n])?r.align[n]="left":r.align[n]=null;for(a=r.cells.length,n=0;n<a;n++)r.cells[n]=M(r.cells[n],r.header.length);return r}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var r=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:r}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var r,n,a,i,o,s,u,l,c,d=t[0],p=t[2],h=p.length>1,f={type:"list",raw:d,ordered:h,start:h?+p.slice(0,-1):"",loose:!1,items:[]},g=t[0].match(this.rules.block.item),m=!1,_=g.length;a=this.rules.block.listItemStart.exec(g[0]);for(var b=0;b<_;b++){if(d=r=g[b],this.options.pedantic||(c=r.match(new RegExp("\\n\\s*\\n {0,"+(a[0].length-1)+"}\\S")))&&(o=r.length-c.index+g.slice(b+1).join("\n").length,f.raw=f.raw.substring(0,f.raw.length-o),d=r=r.substring(0,c.index),_=b+1),b!==_-1){if(i=this.rules.block.listItemStart.exec(g[b+1]),this.options.pedantic?i[1].length>a[1].length:i[1].length>=a[0].length||i[1].length>3){g.splice(b,2,g[b]+(!this.options.pedantic&&i[1].length<a[0].length&&!g[b].match(/\n$/)?"":"\n")+g[b+1]),b--,_--;continue}(!this.options.pedantic||this.options.smartLists?i[2][i[2].length-1]!==p[p.length-1]:h===(1===i[2].length))&&(o=g.slice(b+1).join("\n").length,f.raw=f.raw.substring(0,f.raw.length-o),b=_-1),a=i}n=r.length,~(r=r.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(n-=r.length,r=this.options.pedantic?r.replace(/^ {1,4}/gm,""):r.replace(new RegExp("^ {1,"+n+"}","gm"),"")),r=P(r,"\n"),b!==_-1&&(d+="\n"),s=m||/\n\n(?!\s*$)/.test(d),b!==_-1&&(m="\n\n"===d.slice(-2),s||(s=m)),s&&(f.loose=!0),this.options.gfm&&(l=void 0,(u=/^\[[ xX]\] /.test(r))&&(l=" "!==r[1],r=r.replace(/^\[[ xX]\] +/,""))),f.items.push({type:"list_item",raw:d,task:u,checked:l,loose:s,text:r})}return f}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):O(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var r={type:"table",header:M(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];var n,a=r.align.length;for(n=0;n<a;n++)/^ *-+: *$/.test(r.align[n])?r.align[n]="right":/^ *:-+: *$/.test(r.align[n])?r.align[n]="center":/^ *:-+ *$/.test(r.align[n])?r.align[n]="left":r.align[n]=null;for(a=r.cells.length,n=0;n<a;n++)r.cells[n]=M(r.cells[n].replace(/^ *\| *| *\| *$/g,""),r.header.length);return r}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:O(t[1])}},t.tag=function(e,t,r){var n=this.rules.inline.tag.exec(e);if(n)return!t&&/^<a /i.test(n[0])?t=!0:t&&/^<\/a>/i.test(n[0])&&(t=!1),!r&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?r=!0:r&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(r=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:t,inRawBlock:r,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):O(n[0]):n[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;var n=P(r.slice(0,-1),"\\");if((r.length-n.length)%2==0)return}else{var a=j(t[2],"()");if(a>-1){var i=(0===t[0].indexOf("!")?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,i).trim(),t[3]=""}}var o=t[2],s="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);u&&(o=u[1],s=u[3])}else s=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(r)?o.slice(1):o.slice(1,-1)),R(t,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0])}},t.reflink=function(e,t){var r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){var n=(r[2]||r[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])||!n.href){var a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return R(r,n,r[0])}},t.emStrong=function(e,t,r){void 0===r&&(r="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&(!n[3]||!r.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var a=n[1]||n[2]||"";if(!a||a&&(""===r||this.rules.inline.punctuation.exec(r))){var i,o,s=n[0].length-1,u=s,l=0,c="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+s);null!=(n=c.exec(t));)if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6])if(o=i.length,n[3]||n[4])u+=o;else if(!((n[5]||n[6])&&s%3)||(s+o)%3){if(!((u-=o)>0))return o=Math.min(o,o+u+l),Math.min(s,o)%2?{type:"em",raw:e.slice(0,s+n.index+o+1),text:e.slice(1,s+n.index+o)}:{type:"strong",raw:e.slice(0,s+n.index+o+1),text:e.slice(2,s+n.index+o-1)}}else l+=o}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var r=t[2].replace(/\n/g," "),n=/[^ ]/.test(r),a=/^ /.test(r)&&/ $/.test(r);return n&&a&&(r=r.substring(1,r.length-1)),r=O(r,!0),{type:"codespan",raw:t[0],text:r}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var r,n,a=this.rules.inline.autolink.exec(e);if(a)return n="@"===a[2]?"mailto:"+(r=O(this.options.mangle?t(a[1]):a[1])):r=O(a[1]),{type:"link",raw:a[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}},t.url=function(e,t){var r;if(r=this.rules.inline.url.exec(e)){var n,a;if("@"===r[2])a="mailto:"+(n=O(this.options.mangle?t(r[0]):r[0]));else{var i;do{i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(i!==r[0]);n=O(r[0]),a="www."===r[1]?"http://"+n:n}return{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}},t.inlineText=function(e,t,r){var n,a=this.rules.inline.text.exec(e);if(a)return n=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):O(a[0]):a[0]:O(this.options.smartypants?r(a[0]):a[0]),{type:"text",raw:a[0],text:n}},e}(),q=A,U=E,L=F,N={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:q,table:q,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};N.def=U(N.def).replace("label",N._label).replace("title",N._title).getRegex(),N.bullet=/(?:[*+-]|\d{1,9}[.)])/,N.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,N.item=U(N.item,"gm").replace(/bull/g,N.bullet).getRegex(),N.listItemStart=U(/^( *)(bull) */).replace("bull",N.bullet).getRegex(),N.list=U(N.list).replace(/bull/g,N.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+N.def.source+")").getRegex(),N._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",N._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,N.html=U(N.html,"i").replace("comment",N._comment).replace("tag",N._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),N.paragraph=U(N._paragraph).replace("hr",N.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",N._tag).getRegex(),N.blockquote=U(N.blockquote).replace("paragraph",N.paragraph).getRegex(),N.normal=L({},N),N.gfm=L({},N.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),N.gfm.nptable=U(N.gfm.nptable).replace("hr",N.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",N._tag).getRegex(),N.gfm.table=U(N.gfm.table).replace("hr",N.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",N._tag).getRegex(),N.pedantic=L({},N.normal,{html:U("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",N._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:q,paragraph:U(N.normal._paragraph).replace("hr",N.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",N.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var V={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:q,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:q,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};V.punctuation=U(V.punctuation).replace(/punctuation/g,V._punctuation).getRegex(),V.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,V.escapedEmSt=/\\\*|\\_/g,V._comment=U(N._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),V.emStrong.lDelim=U(V.emStrong.lDelim).replace(/punct/g,V._punctuation).getRegex(),V.emStrong.rDelimAst=U(V.emStrong.rDelimAst,"g").replace(/punct/g,V._punctuation).getRegex(),V.emStrong.rDelimUnd=U(V.emStrong.rDelimUnd,"g").replace(/punct/g,V._punctuation).getRegex(),V._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,V._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,V._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,V.autolink=U(V.autolink).replace("scheme",V._scheme).replace("email",V._email).getRegex(),V._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,V.tag=U(V.tag).replace("comment",V._comment).replace("attribute",V._attribute).getRegex(),V._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,V._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,V._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,V.link=U(V.link).replace("label",V._label).replace("href",V._href).replace("title",V._title).getRegex(),V.reflink=U(V.reflink).replace("label",V._label).getRegex(),V.reflinkSearch=U(V.reflinkSearch,"g").replace("reflink",V.reflink).replace("nolink",V.nolink).getRegex(),V.normal=L({},V),V.pedantic=L({},V.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:U(/^!?\[(label)\]\((.*?)\)/).replace("label",V._label).getRegex(),reflink:U(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",V._label).getRegex()}),V.gfm=L({},V.normal,{escape:U(V.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),V.gfm.url=U(V.gfm.url,"i").replace("email",V.gfm._extended_email).getRegex(),V.breaks=L({},V.gfm,{br:U(V.br).replace("{2,}","*").getRegex(),text:U(V.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var H={block:N,inline:V},Z=$,G=n.exports.defaults,Y=H.block,W=H.inline,J=B;function Q(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function X(e){var t,r,n="",a=e.length;for(t=0;t<a;t++)r=e.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),n+="&#"+r+";";return n}var K=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||G,this.options.tokenizer=this.options.tokenizer||new Z,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:Y.normal,inline:W.normal};this.options.pedantic?(t.block=Y.pedantic,t.inline=W.pedantic):this.options.gfm&&(t.block=Y.gfm,this.options.breaks?t.inline=W.breaks:t.inline=W.gfm),this.tokenizer.rules=t}t.lex=function(e,r){return new t(r).lex(e)},t.lexInline=function(e,r){return new t(r).inlineTokens(e)};var r=t.prototype;return r.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},r.blockTokens=function(e,t,r){var n,a,i,o,s,u,l=this;for(void 0===t&&(t=[]),void 0===r&&(r=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(r){return!!(n=r.call(l,e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.type&&t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),(o=t[t.length-1])&&"paragraph"===o.type?(o.raw+="\n"+n.raw,o.text+="\n"+n.text):t.push(n);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.nptable(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),n.tokens=this.blockTokens(n.text,[],r),t.push(n);else if(n=this.tokenizer.list(e)){for(e=e.substring(n.raw.length),i=n.items.length,a=0;a<i;a++)n.items[a].tokens=this.blockTokens(n.items[a].text,[],!1);t.push(n)}else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(r&&(n=this.tokenizer.def(e)))e=e.substring(n.raw.length),this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else if(s=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,r=e.slice(1),n=void 0;l.options.extensions.startBlock.forEach((function(e){"number"==typeof(n=e.call(this,r))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}(),r&&(n=this.tokenizer.paragraph(s)))o=t[t.length-1],u&&"paragraph"===o.type?(o.raw+="\n"+n.raw,o.text+="\n"+n.text):t.push(n),u=s.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),(o=t[t.length-1])&&"text"===o.type?(o.raw+="\n"+n.raw,o.text+="\n"+n.text):t.push(n);else if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}return t},r.inline=function(e){var t,r,n,a,i,o,s=e.length;for(t=0;t<s;t++)switch((o=e[t]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},a=o.header.length,r=0;r<a;r++)o.tokens.header[r]=[],this.inlineTokens(o.header[r],o.tokens.header[r]);for(a=o.cells.length,r=0;r<a;r++)for(i=o.cells[r],o.tokens.cells[r]=[],n=0;n<i.length;n++)o.tokens.cells[r][n]=[],this.inlineTokens(i[n],o.tokens.cells[r][n]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(a=o.items.length,r=0;r<a;r++)this.inline(o.items[r].tokens)}return e},r.inlineTokens=function(e,t,r,n){var a,i,o,s=this;void 0===t&&(t=[]),void 0===r&&(r=!1),void 0===n&&(n=!1);var u,l,c,d=e;if(this.tokens.links){var p=Object.keys(this.tokens.links);if(p.length>0)for(;null!=(u=this.tokenizer.rules.inline.reflinkSearch.exec(d));)p.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(d=d.slice(0,u.index)+"["+J("a",u[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(u=this.tokenizer.rules.inline.blockSkip.exec(d));)d=d.slice(0,u.index)+"["+J("a",u[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(u=this.tokenizer.rules.inline.escapedEmSt.exec(d));)d=d.slice(0,u.index)+"++"+d.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(r){return!!(a=r.call(s,e,t))&&(e=e.substring(a.raw.length),t.push(a),!0)}))))if(a=this.tokenizer.escape(e))e=e.substring(a.raw.length),t.push(a);else if(a=this.tokenizer.tag(e,r,n))e=e.substring(a.raw.length),r=a.inLink,n=a.inRawBlock,(i=t[t.length-1])&&"text"===a.type&&"text"===i.type?(i.raw+=a.raw,i.text+=a.text):t.push(a);else if(a=this.tokenizer.link(e))e=e.substring(a.raw.length),"link"===a.type&&(a.tokens=this.inlineTokens(a.text,[],!0,n)),t.push(a);else if(a=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(a.raw.length),i=t[t.length-1],"link"===a.type?(a.tokens=this.inlineTokens(a.text,[],!0,n),t.push(a)):i&&"text"===a.type&&"text"===i.type?(i.raw+=a.raw,i.text+=a.text):t.push(a);else if(a=this.tokenizer.emStrong(e,d,c))e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],r,n),t.push(a);else if(a=this.tokenizer.codespan(e))e=e.substring(a.raw.length),t.push(a);else if(a=this.tokenizer.br(e))e=e.substring(a.raw.length),t.push(a);else if(a=this.tokenizer.del(e))e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],r,n),t.push(a);else if(a=this.tokenizer.autolink(e,X))e=e.substring(a.raw.length),t.push(a);else if(r||!(a=this.tokenizer.url(e,X))){if(o=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,r=e.slice(1),n=void 0;s.options.extensions.startInline.forEach((function(e){"number"==typeof(n=e.call(this,r))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),a=this.tokenizer.inlineText(o,n,Q))e=e.substring(a.raw.length),"_"!==a.raw.slice(-1)&&(c=a.raw.slice(-1)),l=!0,(i=t[t.length-1])&&"text"===i.type?(i.raw+=a.raw,i.text+=a.text):t.push(a);else if(e){var h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}else e=e.substring(a.raw.length),t.push(a);return t},e(t,0,[{key:"rules",get:function(){return{block:Y,inline:W}}}]),t}(),ee=n.exports.defaults,te=k,re=w,ne=function(){function e(e){this.options=e||ee}var t=e.prototype;return t.code=function(e,t,r){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var a=this.options.highlight(e,n);null!=a&&a!==e&&(r=!0,e=a)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+re(n,!0)+'">'+(r?e:re(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:re(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,r,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(r)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,r){var n=t?"ol":"ul";return"<"+n+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+n+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,r){if(null===(e=te(this.options.sanitize,this.options.baseUrl,e)))return r;var n='<a href="'+re(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>"},t.image=function(e,t,r){if(null===(e=te(this.options.sanitize,this.options.baseUrl,e)))return r;var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ae=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,r){return""+r},t.image=function(e,t,r){return""+r},t.br=function(){return""},e}(),ie=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var r=e,n=0;if(this.seen.hasOwnProperty(r)){n=this.seen[e];do{r=e+"-"+ ++n}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=n,this.seen[r]=0),r},t.slug=function(e,t){void 0===t&&(t={});var r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)},e}(),oe=ne,se=ae,ue=ie,le=n.exports.defaults,ce=C,de=K,pe=function(){function e(e){this.options=e||le,this.options.renderer=this.options.renderer||new oe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new se,this.slugger=new ue}e.parse=function(t,r){return new e(r).parse(t)},e.parseInline=function(t,r){return new e(r).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var r,n,a,i,o,s,u,l,c,d,p,h,f,g,m,_,b,v,D,y="",w=e.length;for(r=0;r<w;r++)if(d=e[r],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(D=this.options.extensions.renderers[d.type].call(this,d))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type))switch(d.type){case"space":continue;case"hr":y+=this.renderer.hr();continue;case"heading":y+=this.renderer.heading(this.parseInline(d.tokens),d.depth,ce(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":y+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(l="",u="",i=d.header.length,n=0;n<i;n++)u+=this.renderer.tablecell(this.parseInline(d.tokens.header[n]),{header:!0,align:d.align[n]});for(l+=this.renderer.tablerow(u),c="",i=d.cells.length,n=0;n<i;n++){for(u="",o=(s=d.tokens.cells[n]).length,a=0;a<o;a++)u+=this.renderer.tablecell(this.parseInline(s[a]),{header:!1,align:d.align[a]});c+=this.renderer.tablerow(u)}y+=this.renderer.table(l,c);continue;case"blockquote":c=this.parse(d.tokens),y+=this.renderer.blockquote(c);continue;case"list":for(p=d.ordered,h=d.start,f=d.loose,i=d.items.length,c="",n=0;n<i;n++)_=(m=d.items[n]).checked,b=m.task,g="",m.task&&(v=this.renderer.checkbox(_),f?m.tokens.length>0&&"text"===m.tokens[0].type?(m.tokens[0].text=v+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=v+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:v}):g+=v),g+=this.parse(m.tokens,f),c+=this.renderer.listitem(g,b,_);y+=this.renderer.list(c,p,h);continue;case"html":y+=this.renderer.html(d.text);continue;case"paragraph":y+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(c=d.tokens?this.parseInline(d.tokens):d.text;r+1<w&&"text"===e[r+1].type;)c+="\n"+((d=e[++r]).tokens?this.parseInline(d.tokens):d.text);y+=t?this.renderer.paragraph(c):c;continue;default:var C='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else y+=D||"";return y},t.parseInline=function(e,t){t=t||this.renderer;var r,n,a,i="",o=e.length;for(r=0;r<o;r++)if(n=e[r],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type])||!1===(a=this.options.extensions.renderers[n.type].call(this,n))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))switch(n.type){case"escape":i+=t.text(n.text);break;case"html":i+=t.html(n.text);break;case"link":i+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":i+=t.image(n.href,n.title,n.text);break;case"strong":i+=t.strong(this.parseInline(n.tokens,t));break;case"em":i+=t.em(this.parseInline(n.tokens,t));break;case"codespan":i+=t.codespan(n.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(n.tokens,t));break;case"text":i+=t.text(n.text);break;default:var s='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}else i+=a||"";return i},e}(),he=$,fe=ne,ge=ae,me=ie,_e=F,be=T,ve=w,De=n.exports.getDefaults,ye=n.exports.changeDefaults,we=n.exports.defaults;function Ce(e,t,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(r=t,t=null),t=_e({},Ce.defaults,t||{}),be(t),r){var n,a=t.highlight;try{n=de.lex(e,t)}catch(u){return r(u)}var i=function(e){var i;if(!e)try{t.walkTokens&&Ce.walkTokens(n,t.walkTokens),i=pe.parse(n,t)}catch(u){e=u}return t.highlight=a,e?r(e):r(null,i)};if(!a||a.length<3)return i();if(delete t.highlight,!n.length)return i();var o=0;return Ce.walkTokens(n,(function(e){"code"===e.type&&(o++,setTimeout((function(){a(e.text,e.lang,(function(t,r){if(t)return i(t);null!=r&&r!==e.text&&(e.text=r,e.escaped=!0),0==--o&&i()}))}),0))})),void(0===o&&i())}try{var s=de.lex(e,t);return t.walkTokens&&Ce.walkTokens(s,t.walkTokens),pe.parse(s,t)}catch(u){if(u.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ve(u.message+"",!0)+"</pre>";throw u}}return Ce.options=Ce.setOptions=function(e){return _e(Ce.defaults,e),ye(Ce.defaults),Ce},Ce.getDefaults=De,Ce.defaults=we,Ce.use=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a,i=_e.apply(void 0,[{}].concat(r)),o=Ce.defaults.extensions||{renderers:{},childTokens:{}};r.forEach((function(t){if(t.extensions&&(a=!0,t.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=o.renderers?o.renderers[e.name]:null;o.renderers[e.name]=t?function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=e.renderer.apply(this,n);return!1===i&&(i=t.apply(this,n)),i}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");o[e.level]?o[e.level].unshift(e.tokenizer):o[e.level]=[e.tokenizer],e.start&&("block"===e.level?o.startBlock?o.startBlock.push(e.start):o.startBlock=[e.start]:"inline"===e.level&&(o.startInline?o.startInline.push(e.start):o.startInline=[e.start]))}e.childTokens&&(o.childTokens[e.name]=e.childTokens)}))),t.renderer&&function(){var e=Ce.defaults.renderer||new fe,r=function(r){var n=e[r];e[r]=function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=t.renderer[r].apply(e,i);return!1===s&&(s=n.apply(e,i)),s}};for(var n in t.renderer)r(n);i.renderer=e}(),t.tokenizer&&function(){var e=Ce.defaults.tokenizer||new he,r=function(r){var n=e[r];e[r]=function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=t.tokenizer[r].apply(e,i);return!1===s&&(s=n.apply(e,i)),s}};for(var n in t.tokenizer)r(n);i.tokenizer=e}(),t.walkTokens){var r=Ce.defaults.walkTokens;i.walkTokens=function(n){t.walkTokens.call(e,n),r&&r(n)}}a&&(i.extensions=o),Ce.setOptions(i)}))},Ce.walkTokens=function(e,t){for(var n,a=function(){var e=n.value;switch(t(e),e.type){case"table":for(var a,i=r(e.tokens.header);!(a=i()).done;){var o=a.value;Ce.walkTokens(o,t)}for(var s,u=r(e.tokens.cells);!(s=u()).done;)for(var l,c=r(s.value);!(l=c()).done;){var d=l.value;Ce.walkTokens(d,t)}break;case"list":Ce.walkTokens(e.items,t);break;default:Ce.defaults.extensions&&Ce.defaults.extensions.childTokens&&Ce.defaults.extensions.childTokens[e.type]?Ce.defaults.extensions.childTokens[e.type].forEach((function(r){Ce.walkTokens(e[r],t)})):e.tokens&&Ce.walkTokens(e.tokens,t)}},i=r(e);!(n=i()).done;)a()},Ce.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=_e({},Ce.defaults,t||{}),be(t);try{var r=de.lexInline(e,t);return t.walkTokens&&Ce.walkTokens(r,t.walkTokens),pe.parseInline(r,t)}catch(n){if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ve(n.message+"",!0)+"</pre>";throw n}},Ce.Parser=pe,Ce.parser=pe.parse,Ce.Renderer=fe,Ce.TextRenderer=ge,Ce.Lexer=de,Ce.lexer=de.lex,Ce.Tokenizer=he,Ce.Slugger=me,Ce.parse=Ce,Ce}();const Bn=t(Tn),zn=new In,{map:Pn}=Array.prototype,Mn=["A","UL","OL","LI","STRONG","EM","BR","DEL","CODE","PRE"],On=new Tn.Renderer;On.link=function(e,t,r){const n=zn.match(r);return n&&n.length>1?r:'<a href="'+e+'" target="_blank" rel="nofollow noopener">'+r+"</a>"};const jn=new Tn.Renderer;Object.assign(jn,On),jn.list=function(e,t,r){let n=r;return e.replace(Rn,()=>t?n+++". ":"- ")},jn.listitem=function(e){return""+Rn+e};const Rn="%list-item%",$n=e=>e.replace(/\n+$/,"");function qn(e,t,r){if(function(e,t){let r=e.parentNode;for(;r;){if(r.nodeName===t)return!0;r=r.parentNode}return!1}(e,"A"))return e.textContent;if(null===e.textContent)return null;const n=zn.match(e.textContent);if(!n||0===n.length)return e.textContent;const[a]=Array.from(n).reduce((t,a,i)=>{let[o,s]=t;return o.push(e.textContent.slice(s,a.index),u.createElement(null!=r?r:"a",{href:a.url,target:"_blank",rel:"nofollow noopener"},a.text)),i===n.length-1&&o.push(e.textContent.slice(a.lastIndex)),[o,a.lastIndex]},[[],0]);return u.createElement(u.Fragment,{key:t},...a)}function Un(e){const t=Bn(e,{renderer:jn}),r=new DOMParser,{body:n}=r.parseFromString(t,"text/html");return n?$n(n.textContent||""):""}const Ln=e=>{var t,r;let{template:n,root:a,preserveLists:i,limit:o,linkComponent:s=null}=e;const l=null!=(t=null==a?void 0:a.props)?t:{},c=null!=(r=null==a?void 0:a.component)?r:u.Fragment,d=u.useMemo(()=>{try{const e=new DOMParser,t=$n(Bn(n,i?{renderer:jn}:{renderer:On})),{body:r}=e.parseFromString(t,"text/html");return r?function(e,t,r){let n=0,a=!1;const i=e=>Pn.call(e,(e,o)=>{if("#text"===e.nodeName)return r?a?null:e.textContent&&e.textContent.length+n<r?(n+=e.textContent.length,qn(e,o,t)):(a=!0,e.textContent=Ve(r-n,e.textContent),qn(e,o,t)):qn(e,o,t);if(!Fe(e.nodeName,Mn))return e.hasChildNodes()?i(e.childNodes):null;const s={key:o,...e.hasChildNodes()&&{children:i(e.childNodes)}};if("A"===e.nodeName){let r=e.getAttribute("href");if(!r||j(r))return i(e.childNodes);if(/\S+@\S+\.\S+/.test(r)||it(r)||(r="https://"+r),t)return u.createElement(t,{href:r,...s});const n={...s,href:r,target:"_blank",rel:"nofollow noopener"};return u.createElement("a",n)}return u.createElement(e.nodeName.toLowerCase(),s)});return i(e)}(r.childNodes,s,o):""}catch(e){return console.error("ReactMD: error while parsing template: '"+n+"'",e),n}},[n,i,o,s]);return u.createElement(c,l,d)},Nn="not_initialized",Vn=e=>{let{id:t,serverId:r=null,active:n=!0,participants:a=[],properties:i}=e;if("string"!=typeof t)throw new Error("Chat ID has to be a string.");if(null!==r&&t!==r)throw new Error('If serverId is given ("'+r+'") it should match id ("'+t+'").');return{id:t,serverId:r,active:n,participants:a,properties:i}},Hn=e=>{let{id:t,type:r,author:n,timestamp:a,own:i,serverId:o=null,thread:s=null,serverTimestamp:u=null,delivered:l=!0,seen:c=!1,failed:d=!1,properties:p={}}=e;if("string"!=typeof t)throw new Error("Event ID has to be a string.");if("string"!=typeof r)throw new Error("Event has to have string `type` property.");if(null!==o&&t!==o)throw new Error('If serverId is given ("'+o+'") it should match id ("'+t+'").');return{id:t,serverId:o,type:r,thread:s,author:n,own:i,timestamp:a,serverTimestamp:u,delivered:l,seen:c,failed:d,properties:p}},Zn=e=>{let{id:t,serverId:r=t,type:n=null,name:a=null,email:i=null,avatar:o=null,properties:s={}}=e;if("string"!=typeof t)throw new Error("User ID has to be a string.");return{id:t,serverId:r,type:n,name:a,email:i,avatar:o,properties:s}};function Gn(e,t){return e===t}function Yn(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}function Wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gn,r=null,n=null;return function(){return Yn(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}function Jn(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var Qn=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=0,o=n.pop(),s=Jn(n),u=e.apply(void 0,[function(){return i++,o.apply(null,arguments)}].concat(r)),l=Wn((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=o,l.recomputations=function(){return i},l.resetRecomputations=function(){return i=0},l}}(Wn),Xn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cache={}}return e.prototype.set=function(e,t){this._cache[e]=t},e.prototype.get=function(e){return this._cache[e]},e.prototype.remove=function(e){delete this._cache[e]},e.prototype.clear=function(){this._cache={}},e}();function Kn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Xn;return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=void 0,i=void 0;"function"==typeof r?(console.warn('[re-reselect] Deprecation warning: "selectorCreator" argument is discouraged and will be removed in the upcoming major release. Please use "options.selectorCreator" instead.'),a=new n,i=r):(a=r.cacheObject||new n,i=r.selectorCreator||Qn);var o=function(){var r=e.apply(void 0,arguments);if("string"==typeof r||"number"==typeof r){var n=a.get(r);return void 0===n&&(n=i.apply(void 0,t),a.set(r,n)),n.apply(void 0,arguments)}};return o.getMatchingSelector=function(){var t=e.apply(void 0,arguments);return a.get(t)},o.removeMatchingSelector=function(){var t=e.apply(void 0,arguments);a.remove(t)},o.clearCache=function(){a.clear()},o.resultFunc=t[t.length-1],o}}const ea=(e,t)=>t,ta=(e,t)=>Ae(t.replace(/\//gi,"."),e.views),ra=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ae(r+"._default",e.views)},na=e=>e.views.current,aa=e=>e.session.connectionState,ia=e=>e.entities.chats.byIds,oa=(e,t)=>ia(e)[t],sa=(e,t,r)=>oa(e,t).events.byIds[r],ua=(e,t,r)=>sa(e,t,oa(e,t).events.serverIdsMapping[r]),la=(e,t,r)=>!!sa(e,t,r),ca=(e,t)=>oa(e,t).events.byIds,da=Kn([(e,t)=>oa(e,t).events.orderedIds,ca],(e,t)=>e.map(e=>t[e]))(ea),pa=Kn([oa,da],(e,t)=>({...e,events:t}))(ea),ha=(e,t)=>!!oa(e,t),fa=e=>fe(t=>{let{id:r}=t;return pa(e,r)},ia(e)),ga=e=>e.entities.users.byIds,ma=e=>ga(e)[(e=>e.session.id)(e)],_a=(e,t)=>ga(e)[t],ba=(e,t)=>!!_a(e,t),va=(e,t)=>{var r;return null==(r=e.views)?void 0:r.Chat[t].timeline},Da=e=>ma(e).id,ya=Kn([da,Da],(e,t)=>ve(e=>{let{delivered:r,author:n}=e;return r&&n===t},e))(ea),wa=Kn([da,Da],(e,t)=>ve(e=>{let{seen:r,author:n}=e;return r&&n===t},e))(ea),Ca={boosters:!0,form:!0,system_message:!0},Ea=Qn([da,e=>ma(e).id],(e,t)=>ye(e=>{const r=e.author===t&&"message"===e.type,n=!!e.properties&&"file"===e.properties.serverType,a=!0===e.seen&&!Ca[e.type]&&Boolean(e.serverId);return r&&!n||a},e)),ka=(e,t)=>e.author!==t&&!e.seen&&!Ca[e.type],Aa=(e,t)=>{const r=Ea(e,t),n=ma(e).id;return da(e,t).slice(r+1).filter(e=>ka(e,n))},Fa=(e,t)=>Se(Aa(e,t)),xa=Kn([(e,t)=>oa(e,t).participants,ga],(e,t)=>e.map(e=>t[e]))(ea);function Ia(e,t){if(void 0===t)return e.application;const r=t;return e.application[r]}const Sa=Object.freeze(Object.defineProperty({__proto__:null,getApplicationState:Ia,getChat:pa,getChatByServerId:(e,t)=>pa(e,e.entities.chats.serverIdsMapping[t]),getChatList:e=>{var t;return null==(t=e.views)?void 0:t.ChatList},getChats:fa,getConnectionState:aa,getCurrentView:na,getDefaultView:ra,getEvent:sa,getEventByServerId:ua,getEvents:da,getIndexedEvents:ca,getLastDeliveredEvent:ya,getLastEvent:(e,t)=>Se(da(e,t)),getLastSeenAgentEvent:(e,t)=>{const r=Ea(e,t);if(-1===r)return null;const n=ma(e).id;return _e(e=>ka(e,n),da(e,t).slice(r+1))},getLastSeenEvent:wa,getLastUnseenEvent:Fa,getParticipants:xa,getSessionUser:ma,getSessionUserId:Da,getTimeline:va,getUnseenCount:(e,t)=>Aa(e,t).length,getUser:_a,getUserByServerId:(e,t)=>_a(e,e.entities.users.serverIdsMapping[t]),getUsers:ga,getView:ta,hasChat:ha,hasEvent:la,hasEventByServerId:(e,t,r)=>!!ua(e,t,r),hasUser:ba,localize:(e,t,r,n)=>{let a=e.localization[t];const i=e.application.language;if(void 0===a)return"";if("object"==typeof a&&i){const e=new Intl.PluralRules(i);if(void 0===n)return a[e.select(1)];a=a[e.select(n)]}return r?Object.keys(r).reduce((e,t)=>e.replace(new RegExp("%"+t+"%","g"),r[t]),a):a}},Symbol.toStringTag,{value:"Module"})),Ta=["delivered","failed","properties","seen","serverTimestamp","thread"],Ba=(e,t)=>e.forEach(e=>{if(i(e,t))throw new Error("Updating `"+e+"` property is not possible.")}),za=nr("ADD_VIEW",(function(e,t,r){let{action:n,getState:a}=e;if(void 0===r&&(r={}),ta(a(),t))throw new Error('There is already the "'+t+'" view. It has to be unique.');return n({name:t,data:r}),ta(a(),t)})),Pa=nr("SET_CURRENT_VIEW",(e,t)=>{let{action:r,getState:n}=e;if(!ta(n(),t)){const e=ra(n());if(!e)throw new Error('Given view "'+t+"\" doesn't exist.");return r({name:e}),na(n())}return r({name:t}),na(n())}),Ma=nr("UPDATE_VIEW",(e,t,r)=>{let{action:n,getState:a}=e;if(!ta(a(),t))throw new Error('There is no "'+t+'" view. You should add it first.');return n({name:t,data:r}),ta(a(),t)}),Oa=nr("SET_DEFAULT_VIEW",(e,t,r)=>{let{action:n,getState:a}=e;return n({name:r,path:t}),ta(a(),t+"/"+r)}),ja=nr("ADD_CHAT",(e,t)=>{let{action:r,getState:n}=e;const{events:a=[],...i}=t;if(i.id&&ha(n(),i.id))throw new Error('There is already a chat with "'+i.id+'" ID. It has to be unique.');const o=_e(e=>!ba(n(),e),a.map(e=>e.author).concat(i.participants||[]));if(o)throw new Error('Given user ("'+o+"\") doesn't exist. You should add it first.");const s=i.id||ke(fa(n()));return r({id:s,chat:Vn({...i,id:s}),events:a.map(Hn)}),pa(n(),s)}),Ra=nr("ADD_EVENT",(e,t,r)=>{var n;let{action:a,getState:i}=e;const{id:o,serverId:s}=r,u=i();if(o&&s&&o!==s)throw new Error('Specified ID ("'+o+'") differs from specified serverId ("'+s+'"). You either should use only ID or both should be the same.');if(!ha(u,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(la(u,t,o))throw new Error('There is already an event with "'+o+'" ID in this chat ("'+t+'"). It has to be unique.');if(!ba(u,r.author))throw new Error('Specified author ("'+r.author+"\") doesn't exist. You should add it first.");return a({id:o,chat:t,event:Hn({...r,timestamp:null!=(n=r.timestamp)?n:Date.now(),own:r.author===Da(u)})}),sa(i(),t,o)}),$a=nr("REMOVE_EVENT",(e,t,r)=>{let{action:n,getState:a}=e;const i=a();if(!ha(i,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!la(i,t,r))throw new Error('There is no event with "'+r+'" ID in this chat ("'+t+'").');n({id:r,chat:t})}),qa=nr("ADD_HISTORY_EVENTS",(e,t,r)=>{let{action:n,getState:a}=e;const i=a();if(!ha(i,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');r.forEach(e=>{if(la(i,t,e.id))throw new Error('There is already an event with "'+e.id+'" ID in this chat ("'+t+'"). It has to be unique.');if(!ba(i,e.author))throw new Error('Specified author ("'+e.author+"\") doesn't exist. You should add it first.")});const o=Da(i);n({chat:t,events:r.map(e=>Hn({...e,serverId:e.id,own:e.author===o}))})}),Ua=nr("ADD_PARTICIPANT",(e,t,r)=>{let{action:n,getState:a}=e;if(!ha(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ba(a(),r))throw new Error('Given user ("'+r+"\") doesn't exist. You should add it first.");return n({chat:t,user:r}),xa(a(),t)}),La=nr("ADD_USER",(e,t)=>{let{action:r,getState:n}=e;const{id:a}=t;if(ba(n(),a))throw new Error('There is already a user with "'+a+'" ID. It has to be unique.');return r({id:a,user:Zn(t)}),_a(n(),a)}),Na=nr("FLUSH_CHAT",(e,t)=>{let{action:r,getState:n}=e;if(!ha(n(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return r({id:t}),pa(n(),t)}),Va=nr("RECALCULATE_TIMELINE",(e,t)=>{let{action:r,getState:n}=e;if(!ha(n(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return r({id:t}),va(n(),t)}),Ha=nr("REMOVE_PARTICIPANT",(e,t,r)=>{let{action:n,getState:a}=e;if(!ha(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ba(a(),r))throw new Error('Given user ("'+r+"\") doesn't exist. You should add it first.");return n({chat:t,user:r}),xa(a(),t)}),Za=nr("SEND_EVENT",(e,t,r,n)=>{let{action:a,getState:i}=e;if(!ha(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(la(i(),t,r.id))throw new Error('There is already an event with "'+r.id+'" ID in this chat ("'+t+'"). It has to be unique.');const o=r.id||ke(ca(i(),t));return a({id:o,chat:t,event:Hn({...r,author:ma(i()).id,own:!0,id:o,timestamp:Date.now(),delivered:!1})},n),sa(i(),t,o)}),Ga=nr("SET_APPLICATION_STATE",(e,t)=>{let{action:r,getApplicationState:n}=e;if(!t||xe(t))throw new Error("Given data object is empty.");return r(t),n()}),Ya=nr("UPDATE_FEATURE",(e,t,r)=>{let{action:n,getApplicationState:a}=e;if(!r||!t||xe(r))throw new Error("Given data object is empty.");return n({feature:t,data:r}),a()}),Wa=nr("SET_CONNECTION_STATE",(e,t)=>{let{action:r,getState:n}=e;return r({connectionState:t}),aa(n())}),Ja=nr("SET_CHAT_SERVER_ID",(e,t,r)=>{let{action:n,getState:a}=e;if(!ha(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(null!==pa(a(),t).serverId)throw new Error('Chat with "'+t+'" ID has already serverId.');return n({id:t,serverId:r}),pa(a(),t)}),Qa=nr("SET_EVENT_DATA",(e,t,r,n)=>{let{action:a,getState:i}=e;if(!ha(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!la(i(),t,r))throw new Error('There is no "'+r+'" event in "'+t+'" chat. You should add it first.');return Ba(["id","type","own"],n),a({chat:t,id:r,data:{...qe(Ta.concat("author","serverId","timestamp"),n),own:n.author===Da(i())}}),sa(i(),t,r)}),Xa=nr("SET_EVENT_SERVER_ID",(e,t,r,n)=>{let{action:a,getState:i}=e;if(!ha(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!la(i(),t,r))throw new Error('There is no "'+r+'" event in "'+t+'" chat. You should add it first.');if(null!==sa(i(),t,r).serverId)throw new Error('Event with "'+r+'" ID has already serverId.');return a({chat:t,id:r,serverId:n}),sa(i(),t,r)}),Ka=nr("SET_LOCALIZATION",(e,t)=>{let{action:r}=e;r(t)}),ei=nr("SET_USER_SERVER_ID",(e,t,r)=>{let{action:n,getState:a}=e;if(!ba(a(),t))throw new Error('There is no "'+t+'" user. You should add it first.');if(null!==_a(a(),t).serverId)throw new Error('User with "'+t+'" ID has already serverId.');return n({id:t,serverId:r}),_a(a(),t)}),{actionMethod:ti,requestActionMethod:ri}=ar("SET_USER_PROPERTIES",(e,t,r)=>{let{action:n,getState:a}=e;if(!ba(a(),t))throw new Error('There is no user with "'+t+'" ID. You should add it first.');return n({id:t,properties:r}),_a(a(),t)}),{actionMethod:ni,requestActionMethod:ai}=ar("UPDATE_CHAT",(e,t,r,n)=>{let{action:a,getState:i}=e;if(!ha(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return Ba(["id","participants","events"],r),a({id:t,data:qe(["active","properties"],r)},n),pa(i(),t)}),{actionMethod:ii,requestActionMethod:oi}=ar("UPDATE_EVENT",(e,t,r,n)=>{let{action:a,getState:i}=e;if(!ha(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!la(i(),t,r))throw new Error('There is no "'+r+'" event in "'+t+'" chat. You should add it first.');return Ba(["id","type","author","own","timestamp"],n),a({chat:t,id:r,data:qe(Ta,n)}),sa(i(),t,r)}),{actionMethod:si,requestActionMethod:ui}=ar("UPDATE_USER",(e,t,r)=>{let{action:n,getState:a}=e;if(!ba(a(),t))throw new Error('There is no user with "'+t+'" ID. You should add it first.');return Ba(["id","type"],r),n({id:t,data:qe(["name","email","avatar","properties"],r)}),_a(a(),t)}),li=Object.freeze(Object.defineProperty({__proto__:null,addChat:ja,addEvent:Ra,addHistoryEvents:qa,addParticipant:Ua,addUser:La,addView:za,flushChat:Na,recalculateTimeline:Va,removeEvent:$a,removeParticipant:Ha,requestSetUserProperties:ri,requestUpdateChat:ai,requestUpdateEvent:oi,requestUpdateUser:ui,sendEvent:Za,setApplicationState:Ga,setChatServerId:Ja,setConnectionState:Wa,setCurrentView:Pa,setDefaultView:Oa,setEventData:Qa,setEventServerId:Xa,setLocalization:Ka,setUserProperties:ti,setUserServerId:ei,updateChat:ni,updateEvent:ii,updateFeature:Ya,updateUser:si,updateView:Ma},Symbol.toStringTag,{value:"Module"}));function ci(){}function di(){}di.resetWarningCache=ci;!function(){function e(e,t,r,n,a,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:di,resetWarningCache:ci};r.PropTypes=r}();var pi=function(e){e()},hi=function(){return pi},fi={exports:{}},gi={};
/** @license React v16.7.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(gi,"__esModule",{value:!0});var mi="function"==typeof Symbol&&Symbol.for,_i=mi?Symbol.for("react.element"):60103,bi=mi?Symbol.for("react.portal"):60106,vi=mi?Symbol.for("react.fragment"):60107,Di=mi?Symbol.for("react.strict_mode"):60108,yi=mi?Symbol.for("react.profiler"):60114,wi=mi?Symbol.for("react.provider"):60109,Ci=mi?Symbol.for("react.context"):60110,Ei=mi?Symbol.for("react.async_mode"):60111,ki=mi?Symbol.for("react.concurrent_mode"):60111,Ai=mi?Symbol.for("react.forward_ref"):60112,Fi=mi?Symbol.for("react.suspense"):60113,xi=mi?Symbol.for("react.memo"):60115,Ii=mi?Symbol.for("react.lazy"):60116;function Si(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case _i:switch(e=e.type){case Ei:case ki:case vi:case yi:case Di:case Fi:return e;default:switch(e=e&&e.$$typeof){case Ci:case Ai:case wi:return e;default:return t}}case Ii:case xi:case bi:return t}}}function Ti(e){return Si(e)===ki}gi.typeOf=Si,gi.AsyncMode=Ei,gi.ConcurrentMode=ki,gi.ContextConsumer=Ci,gi.ContextProvider=wi,gi.Element=_i,gi.ForwardRef=Ai,gi.Fragment=vi,gi.Lazy=Ii,gi.Memo=xi,gi.Portal=bi,gi.Profiler=yi,gi.StrictMode=Di,gi.Suspense=Fi,gi.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===vi||e===ki||e===yi||e===Di||e===Fi||"object"==typeof e&&null!==e&&(e.$$typeof===Ii||e.$$typeof===xi||e.$$typeof===wi||e.$$typeof===Ci||e.$$typeof===Ai)},gi.isAsyncMode=function(e){return Ti(e)||Si(e)===Ei},gi.isConcurrentMode=Ti,gi.isContextConsumer=function(e){return Si(e)===Ci},gi.isContextProvider=function(e){return Si(e)===wi},gi.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===_i},gi.isForwardRef=function(e){return Si(e)===Ai},gi.isFragment=function(e){return Si(e)===vi},gi.isLazy=function(e){return Si(e)===Ii},gi.isMemo=function(e){return Si(e)===xi},gi.isPortal=function(e){return Si(e)===bi},gi.isProfiler=function(e){return Si(e)===yi},gi.isStrictMode=function(e){return Si(e)===Di},gi.isSuspense=function(e){return Si(e)===Fi},fi.exports=gi;var Bi=fi.exports,zi={};zi[Bi.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zi[Bi.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var Pi,Mi={},Oi="function"==typeof Symbol&&Symbol.for,ji=Oi?Symbol.for("react.element"):60103,Ri=Oi?Symbol.for("react.portal"):60106,$i=Oi?Symbol.for("react.fragment"):60107,qi=Oi?Symbol.for("react.strict_mode"):60108,Ui=Oi?Symbol.for("react.profiler"):60114,Li=Oi?Symbol.for("react.provider"):60109,Ni=Oi?Symbol.for("react.context"):60110,Vi=Oi?Symbol.for("react.async_mode"):60111,Hi=Oi?Symbol.for("react.concurrent_mode"):60111,Zi=Oi?Symbol.for("react.forward_ref"):60112,Gi=Oi?Symbol.for("react.suspense"):60113,Yi=Oi?Symbol.for("react.suspense_list"):60120,Wi=Oi?Symbol.for("react.memo"):60115,Ji=Oi?Symbol.for("react.lazy"):60116,Qi=Oi?Symbol.for("react.block"):60121,Xi=Oi?Symbol.for("react.fundamental"):60117,Ki=Oi?Symbol.for("react.responder"):60118,eo=Oi?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function to(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ji:switch(e=e.type){case Vi:case Hi:case $i:case Ui:case qi:case Gi:return e;default:switch(e=e&&e.$$typeof){case Ni:case Zi:case Ji:case Wi:case Li:return e;default:return t}}case Ri:return t}}}function ro(e){return to(e)===Hi}Mi.AsyncMode=Vi,Mi.ConcurrentMode=Hi,Mi.ContextConsumer=Ni,Mi.ContextProvider=Li,Mi.Element=ji,Mi.ForwardRef=Zi,Mi.Fragment=$i,Mi.Lazy=Ji,Mi.Memo=Wi,Mi.Portal=Ri,Mi.Profiler=Ui,Mi.StrictMode=qi,Mi.Suspense=Gi,Mi.isAsyncMode=function(e){return ro(e)||to(e)===Vi},Mi.isConcurrentMode=ro,Mi.isContextConsumer=function(e){return to(e)===Ni},Mi.isContextProvider=function(e){return to(e)===Li},Mi.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ji},Mi.isForwardRef=function(e){return to(e)===Zi},Mi.isFragment=function(e){return to(e)===$i},Mi.isLazy=function(e){return to(e)===Ji},Mi.isMemo=function(e){return to(e)===Wi},Mi.isPortal=function(e){return to(e)===Ri},Mi.isProfiler=function(e){return to(e)===Ui},Mi.isStrictMode=function(e){return to(e)===qi},Mi.isSuspense=function(e){return to(e)===Gi},Mi.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===$i||e===Hi||e===Ui||e===qi||e===Gi||e===Yi||"object"==typeof e&&null!==e&&(e.$$typeof===Ji||e.$$typeof===Wi||e.$$typeof===Li||e.$$typeof===Ni||e.$$typeof===Zi||e.$$typeof===Xi||e.$$typeof===Ki||e.$$typeof===eo||e.$$typeof===Qi)},Mi.typeOf=to,Pi=l.unstable_batchedUpdates,pi=Pi;const no="connected",ao="disconnected",io="fakely_connected",oo="reconnecting",so="scheduled_reconnecting",uo="liveChatChatId",lo="openAIChatId",co="email_prompt",po="message_draft",ho=100,fo=20,go="Invalid `chat.id`",mo="Move chat to mobile",_o={labs:"https://mobile-chat.labs.livechat.com/chat-widget-moment/",staging:"https://mobile-chat.staging.livechat.com/chat-widget-moment/",production:"https://mobile-chat.livechat.com/chat-widget-moment/"},bo=1500,vo="feaf6c0e-9f43-48ff-9ad0-8e24e0350932",Do=100,yo=/^\s+$/,wo=/^(?:\s+|[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/;function Co(e){let t=null,r=0;for(;t=wo.exec(e);){const n=t[0];if(e=e.slice(n.length),yo.test(n)||r++,r>3)return!1}return!e}const Eo=["xS94WbAZR","pJw7AxJZg"],ko=["DfltarqcrRoA5ZoZ","UsDoxZQESkzF0qds"];function Ao(e){return Eo.includes(e)}function Fo(e){return ko.includes(e)}const xo="not_ready",Io="ready",So="bootstrapped",To="chatbotChatId",Bo="chatbot-agent",zo=18e5,Po=1e3,Mo=["failed","cancelled","expired"],Oo="openai_bot",jo="https://cdn.files-text.com/api/ow/img/integrations/openai/orb.gif";function Ro(){return(Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Uo(e){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function No(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Vo(e,t,r){return(Vo=No()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Lo(a,r.prototype),a}).apply(null,arguments)}function Ho(e){var t="function"==typeof Map?new Map:void 0;return(Ho=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Vo(e,arguments,Uo(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Lo(n,e)})(e)}var Zo=function(e){function t(t){return $o(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/master/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return qo(t,e),t}(Ho(Error));function Go(e){return Math.round(255*e)}function Yo(e,t,r){return Go(e)+","+Go(t)+","+Go(r)}function Wo(e,t,r,n){if(void 0===n&&(n=Yo),0===t)return n(r,r,r);var a=(e%360+360)%360/60,i=(1-Math.abs(2*r-1))*t,o=i*(1-Math.abs(a%2-1)),s=0,u=0,l=0;a>=0&&a<1?(s=i,u=o):a>=1&&a<2?(s=o,u=i):a>=2&&a<3?(u=i,l=o):a>=3&&a<4?(u=o,l=i):a>=4&&a<5?(s=o,l=i):a>=5&&a<6&&(s=i,l=o);var c=r-i/2;return n(s+c,u+c,l+c)}var Jo={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var Qo=/^#[a-fA-F0-9]{6}$/,Xo=/^#[a-fA-F0-9]{8}$/,Ko=/^#[a-fA-F0-9]{3}$/,es=/^#[a-fA-F0-9]{4}$/,ts=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,rs=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ns=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,as=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function is(e){if("string"!=typeof e)throw new Zo(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Jo[t]?"#"+Jo[t]:e}(e);if(t.match(Qo))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(Xo)){var r=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:r}}if(t.match(Ko))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(es)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var a=ts.exec(t);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10)};var i=rs.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var o=ns.exec(t);if(o){var s="rgb("+Wo(parseInt(""+o[1],10),parseInt(""+o[2],10)/100,parseInt(""+o[3],10)/100)+")",u=ts.exec(s);if(!u)throw new Zo(4,t,s);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var l=as.exec(t);if(l){var c="rgb("+Wo(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",d=ts.exec(c);if(!d)throw new Zo(4,t,c);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+l[4])}}throw new Zo(5)}function os(e){return function(e){var t,r=e.red/255,n=e.green/255,a=e.blue/255,i=Math.max(r,n,a),o=Math.min(r,n,a),s=(i+o)/2;if(i===o)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var u=i-o,l=s>.5?u/(2-i-o):u/(i+o);switch(i){case r:t=(n-a)/u+(n<a?6:0);break;case n:t=(a-r)/u+2;break;default:t=(r-n)/u+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:l,lightness:s,alpha:e.alpha}:{hue:t,saturation:l,lightness:s}}(is(e))}var ss=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function us(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function ls(e){return us(Math.round(255*e))}function cs(e,t,r){return ss("#"+ls(e)+ls(t)+ls(r))}function ds(e,t,r){return Wo(e,t,r,cs)}function ps(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return ss("#"+us(e)+us(t)+us(r));if("object"==typeof e&&void 0===t&&void 0===r)return ss("#"+us(e.red)+us(e.green)+us(e.blue));throw new Zo(6)}function hs(e,t,r,n){if("string"==typeof e&&"number"==typeof t){var a=is(e);return"rgba("+a.red+","+a.green+","+a.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return"rgba("+e+","+t+","+r+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?ps(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Zo(7)}function fs(e){if("object"!=typeof e)throw new Zo(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return hs(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return ps(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return function(e,t,r,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n)return"rgba("+Wo(e,t,r)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===n)return e.alpha>=1?ds(e.hue,e.saturation,e.lightness):"rgba("+Wo(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new Zo(2)}(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return function(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return ds(e,t,r);if("object"==typeof e&&void 0===t&&void 0===r)return ds(e.hue,e.saturation,e.lightness);throw new Zo(1)}(e);throw new Zo(8)}function gs(e){return function e(t,r,n){return function(){var a=n.concat(Array.prototype.slice.call(arguments));return a.length>=r?t.apply(this,a):e(t,r,a)}}(e,e.length,[])}function ms(e,t){if("transparent"===t)return t;var r=os(t);return fs(Ro({},r,{hue:r.hue+parseFloat(e)}))}var _s=gs(ms);function bs(e,t,r){return Math.max(e,Math.min(t,r))}function vs(e,t){if("transparent"===t)return t;var r=os(t);return fs(Ro({},r,{lightness:bs(0,1,r.lightness-parseFloat(e))}))}var Ds=gs(vs);function ys(e,t){if("transparent"===t)return t;var r=os(t);return fs(Ro({},r,{saturation:bs(0,1,r.saturation-parseFloat(e))}))}var ws=gs(ys);function Cs(e){if("transparent"===e)return 0;var t=is(e),r=Object.keys(t).map((function(e){var r=t[e]/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)})),n=r[0],a=r[1],i=r[2];return parseFloat((.2126*n+.7152*a+.0722*i).toFixed(3))}function Es(e,t){var r=Cs(e),n=Cs(t);return parseFloat((r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)).toFixed(2))}function ks(e,t){if("transparent"===t)return t;var r=os(t);return fs(Ro({},r,{lightness:bs(0,1,r.lightness+parseFloat(e))}))}var As=gs(ks);function Fs(e,t,r){if("transparent"===t)return r;if("transparent"===r)return t;var n=is(t),a=Ro({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),i=is(r),o=Ro({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),s=a.alpha-o.alpha,u=2*parseFloat(e)-1,l=((u*s==-1?u:u+s)/(1+u*s)+1)/2,c=1-l;return hs({red:Math.floor(a.red*l+o.red*c),green:Math.floor(a.green*l+o.green*c),blue:Math.floor(a.blue*l+o.blue*c),alpha:a.alpha+(o.alpha-a.alpha)*(parseFloat(e)/1)})}var xs=gs(Fs);function Is(e,t){return"transparent"===t?t:xs(parseFloat(e),"rgb(0, 0, 0)",t)}var Ss=gs(Is);function Ts(e,t){return"transparent"===t?t:xs(parseFloat(e),"rgb(255, 255, 255)",t)}var Bs=gs(Ts);function zs(e,t){if("transparent"===t)return t;var r=is(t);return hs(Ro({},r,{alpha:bs(0,1,(100*("number"==typeof r.alpha?r.alpha:1)-100*parseFloat(e))/100)}))}var Ps=gs(zs);function Ms(e){return void 0===e&&(e=-1),function(t){return function(r,n){if(0===r){var a,i=!1,o=e,s=function(e,t){a(e,t)};!function e(){t(0,(function(t,r){return 0===t?(a=r,i?void s(1):(i=!0,void n(0,s))):2===t&&r&&0!==o?(o--,void e()):void n(t,r)}))}()}}}}function Os(){const e=se();return[e,()=>{const t=new Error("Destroyed.");t.code="DESTROYED",e(2,t)}]}const js=Ee();let Rs=0;const $s=e=>{const t=document.createElement("a");if(t.href=e,t.origin)return"null"===t.origin?"*":t.origin;const r=t.protocol.length>4?t.protocol:window.location.protocol;let n;return n=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host,r+"//"+n};function qs(e,t){let{frame:r,targetOrigin:n=$s(r.src),handshakeRetry:a={}}=e;void 0===t&&(t={});const[i,o]=c(t),[s,u]=Os(),l=Rs++,I=r.contentWindow,S=d(),T=(e,t)=>A(js,l,e,t),B=e=>{I.postMessage(e,n)},z=p(f(),h(e=>e.owner===js&&e.instance===l),le(s),g),P=m(S,z,T,B),M=p(v(z,B,T(x,o),null),b(a.interval||500),Ms(a.count||5),_(1),D(e=>y in e?p(v(z,B,T(F)),C(()=>e.data)):w(()=>e)),le(s),g),O=E(P,S.emit,B,i);return p(M,D(()=>z),k(O)),{api:P,destroy:u,handshake$:M}}function Us(){return new Promise(e=>{const t=()=>{document.body?e(document.body):setTimeout(t,100)};t()})}function Ls(e){const{parentNode:t}=e;t&&t.removeChild(e)}const Ns=(e,t)=>{const r=document.createElement("iframe");return e.appendChild(r),r.src=t,r};function Vs(e,t){let{onConnected:r,...n}=e;const a=!n.frame,i=(e=>{if(e.frame)return e.frame;const{container:t,url:r}=e;return Ns(t,r)})(n),[o,s]=Os();let u;const l=()=>{a&&Ls(i),u?u.destroy():s()};return p(S(i,"load"),D(()=>N((e,r)=>{let a=function(e,t){const{api:r,destroy:n,handshake$:a}=qs(e,t);return{destroy:n,promise:p(a,C(e=>(r.data=e,r.destroy=n,r)),I)}}({...n,frame:i},t);return a.promise.then(e,r),u=a,a.destroy})),Ms(),le(o),k(e=>{e.destroy=l,e.frame=i,r(e)})),{destroy:l,frame:i}}function Hs(){return(Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zs=["allow-forms","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","function"==typeof document.hasStorageAccess&&"allow-storage-access-by-user-activation"].filter(Boolean).join(" "),Gs=["all","agents"],Ys=function(e){return"number"!=typeof e||Number.isNaN(e)?e:""+e},Ws=function(e,t,r){if(!t.length||t.length>r)throw new Error(e+" can not be empty and can only be "+r+" characters long.")},Js=function(e){if("string"!=typeof(e=Ys(e)))throw new Error("`text` must be a string or a number.");e=e.trim(),Ws("`text`",e,1024)},Qs=function(e,t){return new Error('Attribute with key "'+e+'" is invalid. '+t)},Xs=o,Ks=Object.freeze({sendMessage:function(e){var t=e.text,r=e.postback;if(Js(t),void 0!==r){if("string"!=typeof r)throw new Error("`postback` must be a string.");Ws("`postback`",r,1024)}},sendSystemMessage:function(e){var t=e.text,r=e.recipients;if(Js(t),void 0!==r&&-1===Gs.indexOf(r))throw new Error("`recipients` can only be one of: "+Gs+".")},setAttributes:function(e){if(!e||"object"!=typeof e)throw new Error("`attributes` must be a plain object (with shape such as `{ key: 'value' }`).");var t=Object.keys(e);if(t.length>99)throw new Error("The maximum number of attributes is 99.");t.forEach((function(t){var r=Ys(e[t]);if(t=Ys(t),!/^[\w-]{1,128}$/.test(t))throw Qs(t,"Key must be between 1-128 characters long and can only contain alpha-numeric, underscore and dash characters.");if("string"!=typeof r)throw Qs(t,"Value must be a string or a number.");Ws("Value",r,1024)}))},setExternalLink:function(e){if("string"==typeof e){if(!/^https:\/\//.test(e))throw new Error("`externalLink` has to be a HTTPS URL.")}else if(null!==e)throw new Error("`externalLink` has to be a string or null.")},setIsFragile:function(e){if("boolean"!=typeof e)throw new Error("`setIsFragile` argument value can not be empty and must be a boolean.")},getIdentityTransferToken:function(){},updateCustomerData:function(e){if(!e)throw new Error("`updateUserData` arguments values can not be empty.");if(e.email&&"string"!=typeof e.email)throw new Error("`updateUserData` argument `email` has to be a string.");if(e.name&&"string"!=typeof e.name)throw new Error("`updateUserData` argument `name` has to be a string.")},close:Xs,setTitle:function(e){if("string"!=typeof e)throw new Error("`setTitle` argument value has to be a string.");Ws("`title`",e,1024)}}),eu=function(e){var t=P(e);if(!/chatbot\.com$/.test(t))return e;var r=R($(M(e)));if(!r.p)return e;try{var n=JSON.parse(atob(r.p));return n.url?decodeURIComponent(n.url):e}catch(a){return e}};function tu(e,t){var r,n=eu(e.url),a=T((function(e){return"function"==typeof e}),t),i=a[0],o=a[1],s=Be((function(e,t){return function(){return Ks[t].apply(Ks,arguments),e.apply(void 0,arguments)}}),i),u=Vs(Hs({},e,{targetOrigin:"*"}),Hs({},o,s,{supportedMethods:Object.keys(s)})),l=u.destroy,c=u.frame;return c.sandbox=Zs,{destroy:l,frame:c,title:(r=n,Ke("moment-title",r)||Xe(r))}}const ru=()=>"bb9e5b2f1ab480e4a715977b7b1b4279";var nu=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","active","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","aigo","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnl","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","chase","chat","cheap","chintai","christmas","chrome","chrysler","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","er","ericsson","erni","es","esq","estate","esurance","et","etisalat","eu","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodhands","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","iselect","ismaili","ist","istanbul","it","itau","itv","iveco","iwc","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jlc","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","llc","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","meo","merckmsd","metlife","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","mobily","moda","moe","moi","mom","monash","money","monster","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nadex","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","panerai","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sapo","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","sport","spot","spreadbetting","sr","srl","srt","st","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","symantec","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","telecity","telefonica","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","uconnect","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vista","vistaprint","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","ಭಾರತ","慈善","集团","在线","한국","ଭାରତ","大众汽车","点看","คอม","ভাৰত","ভারত","八卦","موقع","বাংলা","公益","公司","香格里拉","网站","移动","我爱你","москва","қаз","католик","онлайн","сайт","联通","срб","бг","бел","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","ею","ポイント","新闻","工行","家電","كوم","中文网","中信","中国","中國","娱乐","谷歌","భారత్","ලංකා","電訊盈科","购物","クラウド","ભારત","通販","भारतम्","भारत","भारोत","网店","संगठन","餐厅","网络","ком","укр","香港","诺基亚","食品","飞利浦","台湾","台灣","手表","手机","мон","الجزائر","عمان","ارامكو","ایران","العليان","اتصالات","امارات","بازار","پاکستان","الاردن","موبايلي","بارت","بھارت","المغرب","ابوظبي","السعودية","ڀارت","كاثوليك","سودان","همراه","عراق","مليسيا","澳門","닷컴","政府","شبكة","بيتك","عرب","გე","机构","组织机构","健康","ไทย","سورية","招聘","рус","рф","珠宝","تونس","大拿","みんな","グーグル","ελ","世界","書籍","ഭാരതം","ਭਾਰਤ","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","مصر","قطر","广东","இலங்கை","இந்தியா","հայ","新加坡","فلسطين","政务","xperia","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zippo","zm","zone","zuerich","zw"];const au=t(nu),iu=e=>{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},ou=e=>{navigator.clipboard?navigator.clipboard.writeText(e).catch(iu):iu(e)},su=e=>{var t,r;const n="feade1d6c3f17748ae4c8d917a1e1068",a=Boolean(null==(t=e.properties.group[n])?void 0:t.forwardTicketFormToHelpdesk),i=!!e.__unsafeProperties.license&&e.__unsafeProperties.license.licenseinboundForwardingToHelpdeskEnabled,o=null==(r=e.properties.license[n])?void 0:r.hdLicenseID;return"number"==typeof o&&o>-1&&(a||i)?"helpdesk":e.__unsafeProperties.group.offlineMessagesEnabled?"offline_message":"livechat"},uu=e=>fetch("https://api.helpdesk.com/v1/externalTickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.ok?e.json():Promise.reject()).then(e=>{let{ID:t}=e;return{id:t}}),lu=600,cu=300,du=304,pu=Object.freeze(Object.defineProperty({__proto__:null,def:"6px",lg:"8px",md:"6px",none:"0px",round:"50%",sm:"4px",xl:"12px",xs:"2px",xxl:"16px"},Symbol.toStringTag,{value:"Module"})),hu={50:"#FFFAE5",100:"#F7C56E",500:"#FFD000",800:"#3A352C"},fu={100:"#FF7C6B",500:"#D93311"},gu={100:"#77Cf9D",500:"#268750"},mu={100:"#FA6681",500:"#E30D34"},_u="#2000F0",bu={0:"#FFFFFF",15:"#F6F6F7",25:"#F0F0F0",50:"#F8F8F8",75:"#EDEDED",100:"#E3E3E3",200:"#D5D5D5",300:"#C0C0C0",400:"#B3B3B3",425:"#A6A4A4",450:"#949494",500:"#757575",525:"#707070",550:"#6E6E6E",600:"#575757",625:"#474747",650:"#333333",700:"#2E2E2E",800:"#252525",900:"#111111"},vu=Object.freeze(Object.defineProperty({__proto__:null,accent:"#2000F0",brand:{orange:"#FF5100",black:"#1B1B20"},grayscale:bu,green:gu,red:fu,ruby:mu,webkitOutline:"#3B99FC",yellow:hu},Symbol.toStringTag,{value:"Module"})),Du={...vu,border:bu[500],borderSubtle:bu[100],divider:bu[100],error:fu[500],errorContrast:bu[0],subtleFeedback:hu[50],subtleFeedbackContrast:bu[900],caution:hu[500],cautionContrast:bu[900],success:gu[500],successContrast:bu[0],primaryTextColor:bu[900],secondaryTextColor:bu[550],tertiaryTextColor:bu[400],surface:bu[0],surfaceVariant:bu[25],surfaceVariantHover:"#E6E6E6",surfaceInteractive:bu[50],surfaceInteractivePressed:bu[600],surfaceDecorative:bu[100],surfaceFade:bu[15],hintSurface:bu[800],floatSurface:bu[0],pressedElement:bu[300],notification:mu[500],notificationContrast:bu[0],widgetBackground:bu[50],disabled:bu[100],disabledContrast:bu[600],inactiveElement:bu[450],formIconColor:bu[50],trademarkFooterText:bu[600],itemHover:bu[625],successHover:"#2FA763",inactiveElementHover:bu[425],secondaryButtonBackground:bu[100],secondaryButtonBackgroundHover:bu[200],decorations:{decorOne:"#FFDAB9",decorTwo:"#D9CCFA",decorThree:"#FACCCC",decorFour:"#F4F791",decorFive:"#F1C9FC"}},yu={...vu,border:bu[600],borderSubtle:bu[650],divider:bu[700],error:fu[100],errorContrast:bu[900],subtleFeedback:hu[800],subtleFeedbackContrast:hu[100],caution:hu[100],cautionContrast:bu[900],success:gu[100],successContrast:bu[900],primaryTextColor:bu[0],secondaryTextColor:bu[400],tertiaryTextColor:bu[600],surface:bu[800],surfaceVariant:bu[700],surfaceVariantHover:"#333333",surfaceInteractive:bu[700],surfaceInteractivePressed:bu[400],surfaceDecorative:bu[700],surfaceFade:bu[700],hintSurface:bu[550],floatSurface:bu[700],pressedElement:bu[600],notification:mu[100],notificationContrast:bu[900],widgetBackground:bu[900],disabled:bu[700],disabledContrast:bu[400],inactiveElement:bu[600],formIconColor:bu[900],trademarkFooterText:bu[400],itemHover:bu[525],successHover:"#99DBB5",inactiveElementHover:bu[800],secondaryButtonBackground:bu[650],secondaryButtonBackgroundHover:bu[625],decorations:{decorOne:"#D7650F",decorTwo:"#400CC6",decorThree:"#AF3C3C",decorFour:"#ACB125",decorFive:"#831AA2"}},wu=Object.freeze(Object.defineProperty({__proto__:null,dark:yu,light:Du},Symbol.toStringTag,{value:"Module"})),Cu=15e3,Eu=1e3,ku=600,Au=15e3,Fu=200,xu=60,Iu=360,Su="16px",Tu=15e3,Bu=1e3,zu=600,Pu=15e3,Mu=200,Ou=60,ju=360,Ru="16px",$u=2;function qu(e,t){return ee(X(e),te(e.getState()),re(t),Z(Ne))}const Uu=(e,t)=>ee(qu(e,e=>e.application.readyState),h(e=>e===t),_(1),oe),Lu=()=>{if((e=window.matchMedia)&&/native code/.test(String(e))){return!window.matchMedia("(hover: none)").matches}var e;return!0},Nu=()=>Fe(navigator.platform,["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"])&&Fe("Version/17",navigator.userAgent),Vu=()=>/mobile/gi.test(navigator.userAgent)&&!("MacIntel"===navigator.platform&&Fe("iPad",navigator.userAgent)),Hu=()=>Vu()||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>0,Zu=()=>Fe("Chrome",navigator.userAgent),Gu=()=>{const e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):0},Yu=()=>/Firefox/.test(navigator.userAgent),Wu=()=>!Zu()&&/Safari/.test(navigator.userAgent),Ju=200,Qu=8,Xu=8,Ku=8,el=360,tl=8,rl=20,nl={recommendations:{width:"392px",height:"286px"},mobileRecommendations:{width:"100%",height:"286px"}},al=(e,t)=>{e.getApplicationState("recommendations").products.length>0||ee(qu(e,e=>e.application.page),ce(t=>Rc(e,t.url)),re(()=>Fp(e)),h(e=>e.length>=3),G(e=>{return K(Promise.all([Promise.resolve(e),(r=t.call,n=e,r("/v1.0/recommendations/match","POST",{pages:n}))]));var r,n}),_(1),ne(t=>{let[r,n]=t;return ee(Uu(e,"ready"),re(()=>[r,n]))}),k(t=>{let[r,n]=t;return function(e,t,r){let{products:n,id:a}=t;void 0===r&&(r=!0);const{recommendations:i}=e.getApplicationState(),o=null==i?void 0:i.hiddenIds.includes(a),s={...i,id:a,products:n};if(e.setApplicationState({recommendations:s}),!o){const t=!r;e.setApplicationState({recommendations:{...s,hasSeen:t,isVisible:t}}),zc(e,{},{scheduleRerender:t}),ol(e,"recommendations")}}(e,{products:n,id:"h="+r.join(",")+"&t="+(new Date).getTime()})}))},il={visitorCounter:-1,recommendations:-1,googleReviews:-1,contactInvitation:-1,chatBotGreeting:-1},ol=(e,t)=>{var r;if("recommendations"===t)return zc(e,{eventsQueue:[t]},{scheduleRerender:!1}),Mc(e,{transitionState:"hidden",hidden:!0}),Pc(e,{transitionState:"hidden",hidden:!0}),Oc(e,{transitionState:"hidden",hidden:!0}),void jc(e,{transitionState:"hidden",hidden:!0});const n=null!=(r=e.getView("minimized").eventsQueue)?r:[];zc(e,{eventsQueue:[].concat(n,[t])},{scheduleRerender:!1})},sl=(e,t)=>{var r;const n=null!=(r=e.getView("minimized").eventsQueue)?r:[];zc(e,{eventsQueue:n.filter(e=>e!==t)},{scheduleRerender:!1})},ul=()=>{Object.values(il).forEach(e=>window.clearTimeout(e))},ll=(e,t)=>{function r(t){return()=>{e.emit("resize-to-theme-size"),e.once("resize-to-theme-size-done",t)}}ul();const n="visitorCounter"===t&&Boolean(e.getApplicationState("googleReviews")),a=e.getApplicationState("contactInvitation").hasSeen;switch(t){case"visitorCounter":il.visitorCounter=window.setTimeout(r(()=>{Pc(e,{transitionState:"shown"}),il.visitorCounter=window.setTimeout(()=>{Pc(e,{transitionState:"hidden"})},15600)}),n?0:4e3);break;case"recommendations":(e=>{const t=Vu(),r=t?nl.mobileRecommendations:nl.recommendations,n=e.getApplicationState("recommendations");if(n.hidden)return;zc(e,{resizeBubbleAnimation:"shrink"}),e.emit("resize-request",{...r,maximized:!1,ignoreHorizontalOffset:t}),e.once("resize-request-done",()=>e.setApplicationState({recommendations:{...n,isVisible:!0,hasSeen:!0,animation:"show"}}))})(e);break;case"googleReviews":il.googleReviews=window.setTimeout(r(()=>{Mc(e,{transitionState:"shown"}),il.googleReviews=window.setTimeout(()=>{Mc(e,{transitionState:"hidden"})},15600)}),4e3);break;case"contactInvitation":il.contactInvitation=window.setTimeout(r(()=>{Oc(e,{transitionState:"shown"})}),a?0:5e3);break;case"chatBotGreeting":il.chatBotGreeting=window.setTimeout(r(()=>{jc(e,{transitionState:"shown"})}),0);break;default:return}},cl=e=>{ee(Uu(e,"bootstrapped"),ne(()=>qu(e,()=>(e=>{const t=e.getView("minimized").eventsQueue;return null!=t&&t.length?t[0]:null})(e))),h(t=>{if(!t||!bp(e,"minimized"))return!1;const r=e.getApplicationState(t);return!!r&&!r.isVisible}),k(t=>{ll(e,t)})),ee(qu(e,e=>e.application.visibility.state),h(e=>"maximized"===e),k(ul)),ee(qu(e,()=>{var t;return null==(t=e.getApplicationState("visitorCounter"))?void 0:t.transitionState}),h(e=>"hidden"===e),k(()=>{sl(e,"visitorCounter")})),ee(qu(e,()=>{var t;return null==(t=e.getApplicationState("googleReviews"))?void 0:t.transitionState}),h(e=>"hidden"===e),k(()=>{sl(e,"googleReviews")})),ee(qu(e,e=>{var t,r;return null!=(t=null==(r=e.application.recommendations)?void 0:r.hiddenIds)?t:[]}),h(t=>{const r=e.getApplicationState("recommendations");return r&&t.includes(r.id)}),k(()=>{sl(e,"recommendations")})),ee(qu(e,()=>{var t;return null==(t=e.getApplicationState("contactInvitation"))?void 0:t.transitionState}),h(e=>"hidden"===e),k(()=>{sl(e,"contactInvitation")})),ee(qu(e,()=>{var t;return null==(t=e.getApplicationState("chatBotGreeting"))?void 0:t.transitionState}),h(e=>"hidden"===e),k(()=>{sl(e,"chatBotGreeting")}))},dl=U()?window.localStorage:L,pl=[/sendURLToGuardwareProxy/i,/safari-extension:\/\//],hl=!("true"===dl.getItem("_livechat_has_visited"));dl.setItem("_livechat_has_visited","true");const fl=(e,t,r,n)=>{const{timeZone:a}=(new Intl.DateTimeFormat).resolvedOptions(),i={type:e+"_"+r,license:(null==n?void 0:n.license)||$c(),userAgent:navigator.userAgent,mobile:Vu(),timeZone:String(a),logVersion:"2024-11-07",firstTimeVisitor:hl,severity:t,lc_env:"production",...n};if(a){const[e]=a.split("/");e!==a&&(i.timeZoneArea=String(e))}return(e=>{let{type:t,license:r,...n}=e;if(window.location.href.includes("openwidget.com"))return Promise.resolve();const a={licence_id:r.toString(),event_id:t,message:JSON.stringify(n)};return lt("https://queue.livechatinc.com/logs",{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:O(a)}).then(()=>Promise.resolve()).catch(o)})(i)},gl=function(e,t,r,n){void 0===n&&(n="chat_widget");const a={};var i;if(t instanceof Error?(a.errorMessage=t.message,a.stack=t.stack,a.code=t.code):a.errorMessage=JSON.stringify({error:t}),i=a,!pl.some(e=>e.test(i.errorMessage+" "+i.stack)))return he(r)||(r={meta:JSON.stringify({info:r})}),fl(n,"Error",e,{...r,...a})},ml=function(e,t,r){return void 0===r&&(r="chat_widget"),fl(r,"Informational",e,t)},_l=e=>fl("chat_widget","Notice",e),bl=e=>ml("chat_started",e),vl=e=>ml("chat_rated",e),Dl=e=>ml("widget_opened",e),yl=(e,t)=>ml("potential_connection_problem_"+e,t),wl=()=>Ae("webkit.messageHandlers.iosMobileWidget.postMessage",window)?"ios":!!Ae("androidMobileWidget.postMessage",window)&&"android",Cl=e=>window.androidMobileWidget.postMessage(JSON.stringify(e)),El=e=>window.webkit.messageHandlers.iosMobileWidget.postMessage(e),kl=(()=>{const e=wl();return"android"===e?Cl:"ios"===e?El:null})(),Al=()=>Boolean(wl()),Fl=e=>{kl&&(kl({messageType:"uiReady"}),e.on("add_event",t=>{let{event:r}=t;if("message"!==r.type)return;const n=e.getUser(r.author).name;kl({messageType:"newMessage",text:r.properties.text,id:r.id,timestamp:r.timestamp,author:{name:n}})}),e.on("mobile_wrapper_minimize_intent",()=>{kl({messageType:"hideChatWindow"})}))},xl={light:{maxModifier:.7},dark:{maxModifier:.5}};function Il(e,t,r){return Es(e,r)>Es(t,r)?e:t}const Sl=function(e,t,r){void 0===r&&(r=0);const n=Es(e,t),a=Zc(t),{maxModifier:i}=xl[a?"light":"dark"];if(r>=5)return e;const o=i-n/4.5*.5;if(n>=4.5)return e;const s=a?Ds(o,e):As(o,e);return Es(s,t)>=4.5?s:Sl(s,t,r+1)},Tl=e=>{const t=e.variant||"light",r=wu[t],n=e.customJson||{},a=Gc(e.titlebarBackgroundColor)?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.065)",i=Gc(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.05)",o=Gc(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.2)",s=Gc(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.1)",u=Il(yu.primaryTextColor,Du.primaryTextColor,e.ctaColor),l=Sl(e.ctaColor,r.surface),c=Xc(e.agentMessageColorBackground);return ze({name:e.name,variant:t,iconTheme:e.name,showMessageAvatar:"modern"!==e.name,colors:{agentBarText:e.agentbarText,agentBarBackground:e.agentbarBackgroundColor,cta:e.ctaColor,ctaText:u,minimizedIcon:e.minimizedColorIcon,minimizedBackground:e.minimizedColorBackground,background:e.backgroundColor,visitorMessageText:e.visitorMessageColorText,visitorMessageBackground:e.visitorMessageColorBackground,systemMessage:e.systemMessageColor,agentMessageBackground:e.agentMessageColorBackground,agentMessageText:e.agentMessageColorText,minimizedText:e.minimizedColorText,titleBarText:e.titlebarText,titleBarBackgroundColor:e.titlebarBackgroundColor,quickRepliesColor:l,lighterOppositeTitleBarColor:a,decorativeOppositeAgentBarColor:i,lighterOppositeAgentBarColor:o,codeBlockBackgroundColor:c},AgentBar:{css:{background:e.agentbarBackgroundColor,color:e.agentbarText},IconButton:{css:{background:{default:"transparent",active:o}}}},Form:{IconButton:{css:{background:{default:"rgba(0, 0, 0, 0.05)",active:e.ctaColor},color:{default:r.formIconColor,active:u}}}},ChatSummary:{Icon:{color:e.minimizedColorIcon}},Maximized:{css:{background:e.backgroundColor}},Message:{own:{Bubble:{css:{background:"modern"===e.name?"transparent":e.visitorMessageColorBackground,color:e.visitorMessageColorText}}},system:{Bubble:{css:{color:e.systemMessageColor}}},Bubble:{css:{background:"modern"===e.name?"transparent":e.agentMessageColorBackground,color:e.agentMessageColorText}},css:{color:e.systemMessageColor}},TypingIndicator:{css:{color:e.systemMessageColor}},Minimized:{MinimizedBubble:{css:{color:e.minimizedColorText,backgroundColor:{default:e.minimizedColorBackground,hasAvatar:"transparent"}},Icon:{color:e.minimizedColorIcon}},MinimizedBar:{css:{color:e.minimizedColorText,backgroundColor:e.minimizedColorBackground},Icon:{color:e.minimizedColorIcon}}},TitleBar:{css:{background:"modern"===e.name?e.titlebarBackgroundColor:e.agentbarBackgroundColor,color:"modern"===e.name?e.titlebarText:e.agentbarText},HourGlassLabel:{css:{backgroundColor:i}}},DividerLabel:{css:{color:e.systemMessageColor,borderColor:s}},TextComposer:{css:{background:r.surface},IconButton:{css:{background:{active:e.ctaColor}},active:{Icon:{color:u}}}}},n)},Bl=[0,2,4,6,8,1,3,5,7,9],zl=e=>e.replace(/\b(?:\d[ -]*?){8,15}((?:\d[ -]*?){4})\b/g,(e,t)=>{const r=e.replace(/(-|\s)/g,"");return(e=>{if(/[^0-9-\s]+/.test(e))return!1;const t=e.replace(/\D/g,"");let r,n=t.length,a=1,i=0;for(;n;)r=parseInt(t.charAt(--n),10),i+=(a^=1)?Bl[r]:r;return i&&i%10==0})(r)?""+(e=>{const t=e%4,r=t?4-t:0,n=Math.floor(e/4)+(t?1:0)-r-1,a=we(r,"XXX"),i=we(n,"XXXX");return a.concat(i).join("-").concat("-")})(r.length)+t:e}),Pl=e=>{let t=0;return e.split("").forEach(e=>{const r=e.charCodeAt(0);t=(t<<5)-t+r,t&=t}),t},Ml=(e,t)=>Pl(e)%(1/t)==0;(new In).tlds(au);const Ol=(e,t,r)=>{const n=be(t=>t.name===e,r);return-1!==n?Je(n,{...r[n],defaultValue:t},r):r},jl=(e,t,r)=>{e.addEvent(t,{...r,serverId:r.serverId||null})},Rl=(e,t,r)=>{let{systemMessageType:n,textVariables:a,text:i}=r;jl(e,t,{id:ke(e.getIndexedEvents("liveChatChatId")),serverId:null,type:"system_message",author:"system",seen:!0,properties:B({systemMessageType:n,textVariables:a,defaultText:i})})},$l=e=>{e.updateChat("liveChatChatId",{active:!1,properties:{ended:!0,queued:!1,agentIsTyping:!1}}),e.setApplicationState({greetingsMuted:!1})},ql=e=>{e.setApplicationState({eyeCatcher:{...e.getApplicationState().eyeCatcher,hidden:!0}})},Ul=e=>{const t=ap(e);if(!t||!t.properties.uniqueId||ip(e,t))return;const{invitation:r}=e.getApplicationState();var n;e.setApplicationState({invitation:{...r,hiddenIds:[].concat(r.hiddenIds,[t.properties.uniqueId])}}),Ml(e.getSessionUser().serverId,.01)&&(n={minimizedType:_d(e),greetingId:t.properties.id,greetingUniqueId:t.properties.uniqueId,greetingType:t.properties.type,greetingSubtype:t.properties.subtype,greetingAddon:t.properties.addon||"none"},ml("greeting_dismissed",n)),e.emit("render-minimized")},Ll=e=>{const t=ap(e);if(!t||!t.properties.uniqueId||op(e))return;const{invitation:r}=e.getApplicationState();e.setApplicationState({invitation:{...r,displayedIds:[].concat(r.displayedIds,[t.properties.uniqueId])}})},Nl=function(e,t){let{shouldMaintainModality:r=!0}=void 0===t?{}:t;bp(e,"maximized")||e.setApplicationState({visibility:{...e.getApplicationState("visibility"),state:"maximized",...!r&&{interactionModality:"virtual"}}})},Vl=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);const{visibility:n,destroyed:a}=e.getApplicationState();!t&&"hidden"===n.state&&n.forced||"minimized"===n.state||(!_p(e)||Ed("liveChatChatId",e)||a?e.setApplicationState({visibility:{...e.getApplicationState("visibility"),state:"hidden"}}):r||!e.getView("Moment").show?(e.setApplicationState({visibility:{...e.getApplicationState("visibility"),state:"minimized"}}),zc(e,{bubbleHoverState:!1})):e.emit("request_close_moment"))},Hl=e=>{bp(e,"minimized")&&e.setApplicationState({visibility:{state:"hidden"}})},Zl=(e,t)=>{let{id:r,active:n=!0,thread:a,group:i,agent:o,queued:s=!1,timestamp:u}=t;null===e.getChat("liveChatChatId").serverId&&e.setChatServerId("liveChatChatId",r);const l={ended:!1,queued:s,fakeAgentMessageId:null,lastThread:a,currentAgent:o,timestamp:u};"number"==typeof i&&(l.group=i),ql(e),e.updateChat("liveChatChatId",{active:n,properties:l}),Cc(e),e.setApplicationState({hidden:!1});const{readyState:c}=e.getApplicationState();"not_ready"===c||bp(e,"maximized")||(e.setCurrentView("Chat"),Nl(e,{shouldMaintainModality:!1}))},Gl=function(e,t,r){void 0===r&&(r={});const n=ud("creditCardMasking",e).enabled?(e=>zl(e.replaceAll(/\/\/(\S*):(\S*)@/g,"//****:****@")))(t):t;return{type:Co(n)?"emoji":"message",thread:kp(e),properties:B({text:n,...r})}},Yl=function(e,t,r,n){void 0===n&&(n=void 0),e.sendEvent(t,Gl(e,r,{triggeredBy:n}))},Wl=(e,t,r)=>{e.setApplicationState({messageDraft:r,initialMessageDraft:null})},Jl=(e,t,r,n)=>{const{quickReplies:a}=r.properties,i=a[n];r.properties.invitation?xc(e,r.id,i):Yl(e,t,i.text,{type:"quick_reply",event:r.id,button:i})},Ql=(e,t,r)=>{const n=pp(e,t);jl(e,t,{...r,seen:!0,type:"message_draft",author:e.getSessionUserId(),id:ke(e.getIndexedEvents("liveChatChatId"))}),n||nc(e),e.setCurrentView("Chat")},Xl=(e,t)=>{const r=e.getChat(t).active,n=Pd(e);return Boolean(n&&!r)},Kl=function(e,t,r,n){void 0===n&&(n=void 0);const a=e.getApplicationState("invitation").current,i=e.getEvent(t,a),o=Gl(e,r,{triggeredBy:n,...i&&{fromGreeting:{...Re(["id","uniqueId"],i.properties)}}});if(!(ud("preChatAfterGreeting",e).enabled&&Xl(e,t)))return e.setCurrentView("Chat"),void e.sendEvent(t,o);Ql(e,t,o)},ec=(e,t,r)=>{if(Bp(e)&&!ld(e))return;if(!Xl(e,t))return void e.setApplicationState({initialMessageDraft:r});const n=Gl(e,r);Ql(e,t,n)},tc=(e,t,r)=>{let{text:n,recipients:a="all"}=r;e.sendEvent(t,{type:"custom_system_message",thread:kp(e),properties:{text:n.trim(),recipients:a}})},rc=(e,t)=>{e.updateChat("liveChatChatId",{properties:{currentAgent:t}})},nc=e=>{if(!Od(e,"prechat")){const t=e.getView("Chat/prechat");_c(e,t)}},ac=(e,t)=>{const{properties:{rate:r,rateComment:n}}=e.getChat("liveChatChatId");let{fields:a,...i}=t;r&&(a=Ol("rating",r,a)),n&&(a=Ol("rateComment",n,a)),_c(e,{...i,fields:a})},ic=e=>{const t=od(e);e.updateChat(t,{properties:{startChatAgainPending:!0}})},oc=function(e,t,r){let{chatId:n,forced:a}=void 0===r?{}:r;e.updateChat("liveChatChatId",{properties:{startChatAgainPending:!1}}),vc(e);const{properties:{lastThread:i},serverId:o}=e.getChat("liveChatChatId");if(a||!cd(e)||o&&n!==o)e.flushChat(t),n&&e.setChatServerId("liveChatChatId",n);else{wc(e);const t=Dd(e,"liveChatChatId");t&&e.removeEvent("liveChatChatId",t.id)}e.updateChat(t,{properties:{agentIsTyping:!1,ended:!1,fakeAgentMessageId:null,lastThread:i,loadingHistory:!1,queued:!1,rate:null,rateComment:null,transcriptSentTo:null}}),e.setApplicationState({greetingsMuted:!1})},sc=e=>{e.updateChat("liveChatChatId",{properties:{rate:null,rateComment:null,transcriptSentTo:null}})},uc=(e,t)=>{const r=t.getApplicationState("config");t.setApplicationState({config:{...r,features:{...r.features,homeScreen:{enabled:Wc(e)},fileSharing:{enabled:"1"===e.properties.license.core["attachments.enable_for_visitors"]},agentAvatar:{enabled:e.__unsafeProperties.group.hasAgentAvatarsEnabled},continuousChat:{enabled:"1"===e.properties.license.core.continuous_chat_widget_enabled},chatHistory:{enabled:"1"===e.properties.license.core.customer_history_enabled},rating:{enabled:e.__unsafeProperties.group.ratingEnabled},emailTranscript:{enabled:e.__unsafeProperties.group.transcriptButtonEnabled},logo:e.__unsafeProperties.group.logo.enabled?{enabled:!0,path:e.__unsafeProperties.group.logo.src}:{enabled:!1,path:void 0},linksPreview:{enabled:e.__unsafeProperties.group.linksUnfurlingEnabled},ticketForm:{enabled:"ticketForm"in e,mode:e.__unsafeProperties.ticketFormMode||su(e)},queue:{writingInQueueEnabled:Yc(e)},preChatForm:{enabled:"prechatForm"in e},preChatAfterGreeting:{enabled:e.__unsafeProperties.group.prechatFormAfterGreetingEnabled},creditCardMasking:{enabled:!!e.__unsafeProperties.license&&e.__unsafeProperties.license.creditCardMaskingEnabled},hideTrademark:{enabled:e.__unsafeProperties.group.hasHiddenTrademark||!1===e.isPoweredByEnabled},disableSounds:{enabled:!e.__unsafeProperties.group.hasSoundsEnabled},minimized:{enabled:!e.__unsafeProperties.group.disabledMinimized},mobileMinimized:{enabled:e.__unsafeProperties.group.hasCustomMobileSettings?!e.__unsafeProperties.group.disabledMinimizedOnMobile:!e.__unsafeProperties.group.disabledMinimized},hideOnInit:{enabled:e.__unsafeProperties.group.hideOnInit}},minimizedType:e.__unsafeProperties.group.minimizedType,mobileMinimizedType:e.__unsafeProperties.group.minimizedTypeOnMobile,theme:ze(r.theme,Tl(e.__unsafeProperties.group.theme)),screenPosition:e.__unsafeProperties.group.screenPosition,mobileScreenPosition:e.__unsafeProperties.group.hasCustomMobileSettings?e.__unsafeProperties.group.screenPositionOnMobile:e.__unsafeProperties.group.screenPosition,nonProfitLicense:!!e.__unsafeProperties.license&&e.__unsafeProperties.license.nonProfit,properties:e.properties,screenOffset:{x:e.__unsafeProperties.group.offsetX,y:e.__unsafeProperties.group.offsetY}}}),t.getApplicationState("config").features.disableSounds.enabled&&t.setApplicationState({muted:!0})},lc=(e,t,r)=>{const n=e.getApplicationState("config");e.setApplicationState({config:{...n,features:ze(n.features,{[t]:r})}})},cc=(e,t)=>{lc(e,t,{enabled:!1})},dc=(e,t,r)=>{lc(e,t,{enabled:!0,...r})},pc=(e,t)=>{try{const r=JSON.parse(t).filter(e=>{let{template_id:t}=e;return"moment"===t||"links"===t});if(xe(r))return;dc(e,"boosters",{items:r.map(e=>{if("links"===e.template_id)return{id:e.id,template:e.template_id,links:e.links};const t={type:e.action.type,label:e.action.label,url:e.action.url};return{id:e.id,template:e.template_id,title:e.title,description:e.description,icon:e.icon,action:t}})})}catch(r){}},hc=(e,t,r)=>{const n={answered:!0};r&&(n.fields=r.properties.fields,r.id&&e.setEventServerId("liveChatChatId",t,r.id)),e.updateEvent("liveChatChatId",t,{properties:n})},fc=(e,t)=>{var r;t.properties.receivedFirstTime&&Ml(e.getSessionUser().serverId,.01)&&(r={minimizedType:_d(e),greetingId:t.properties.id,greetingUniqueId:t.properties.uniqueId,greetingType:t.properties.type,greetingSubtype:t.properties.subtype,greetingAddon:t.properties.addon||"none"},ml("greeting_displayed",r))},gc=(e,t)=>{const{defaultWidget:r,embedded:n,actingAsDirectLink:a,availability:i,greetingsMuted:o}=e.getApplicationState(),s=Od(e,"prechat");rc(e,t.author),"openwidget"===r&&(e=>{const t=e.getApplicationState("recommendations");ul(),zc(e,{eventsQueue:[]},{scheduleRerender:!1}),Mc(e,{transitionState:"hidden",hidden:!0}),Pc(e,{transitionState:"hidden",hidden:!0}),Oc(e,{transitionState:"hidden",hidden:!0}),e.setApplicationState({recommendations:{...t,isVisible:!1,hiddenIds:[].concat(t.hiddenIds,[t.id]),hidden:!0}})})(e),"bar"!==_d(e)&&ql(e),Cc(e),kc(e);const u=ap(e);var l,c,d,p,h,f;u&&(f={minimizedType:_d(e),greetingId:null==(l=u.properties)?void 0:l.id,greetingUniqueId:null==(c=u.properties)?void 0:c.uniqueId,greetingType:null==(d=u.properties)?void 0:d.type,greetingSubtype:null==(p=u.properties)?void 0:p.subtype,greetingAddon:(null==(h=u.properties)?void 0:h.addon)||"none"},ml("greeting_not_canceled",f),e.removeEvent("liveChatChatId",u.id));me(t.properties.cards||t.properties.card).filter(Boolean).forEach(t=>{t.title&&(t.title=Hc(e,t.title)),t.subtitle&&(t.subtitle=Hc(e,t.subtitle)),t.buttons&&(t.buttons.forEach(e=>e.invitation=!0),n&&!a||t.buttons.filter(e=>"url"===e.type&&"target"in e).forEach(e=>e.target="new"))});const g=ke(e.getIndexedEvents("liveChatChatId"));jl(e,"liveChatChatId",{...t,seen:!o,id:g,properties:{...t.properties,...t.properties.text&&{text:Hc(e,t.properties.text)}}}),e.updateChat("liveChatChatId",{properties:{fakeAgentMessageId:g}}),e.setApplicationState({invitation:{...e.getApplicationState("invitation"),current:g}}),t.properties.receivedFirstTime&&e.setCurrentView("Chat"),bp(e,"maximized")||(ip(e,t)&&t.properties.receivedFirstTime&&!o?Nl(e,{shouldMaintainModality:!1}):ip(e,t)||Vl(e,!0)),ld(e)&&"offline"===i&&s&&nc(e),o||fc(e,t),e.emit("render-minimized")},mc=(e,t)=>{const r=(new Date).toISOString();e.setApplicationState({config:{...e.getApplicationState("config"),features:{...e.getApplicationState("config").features,ticketForm:{...e.getApplicationState("config").features.ticketForm,additionalInfo:{lastDisplayedReason:t,lastDisplayedAt:r}}}}}),_c(e,e.getView("Chat/ticketForm"))},_c=(e,t)=>{const r={formType:t.type,formId:t.id,fields:t.fields};if(Od(e)){const{id:t}=e.getLastEvent("liveChatChatId");return e.updateEvent("liveChatChatId",t,{properties:r})}const n=ke(e.getIndexedEvents("liveChatChatId"));return jl(e,"liveChatChatId",{id:n,type:"form",author:"system",properties:r})},bc=(e,t)=>{const r=e.getView("Moment");if(r.show&&!t.wasTriggeredByGreeting)return r.data.url===t.url?void e.emit("request_expand_moment"):void e.emit("request_expand_moment",{nextMoment:t});nd(t.url)?(e.updateView("Moment",{show:!0,data:t}),r.show&&e.emit("request_expand_moment")):Rl(e,"liveChatChatId",{text:"Link attached to the button is invalid."})},vc=function(e,t){void 0===t&&(t=!1),e.updateView("Moment",{show:!1,data:{}}),t&&Vl(e)},Dc=(e,t)=>{e.requestUpdateUser(e.getSessionUser().id,t)},yc=(e,t)=>{var r;e.setUserServerId(e.getSessionUser().id,t),e.setApplicationState({testGroup:(r=t,Pl(r)%2?"A":"B")})},wc=function(e,t){if(void 0===t&&(t=void 0),Od(e,t)){const{id:t}=e.getLastEvent("liveChatChatId");e.removeEvent("liveChatChatId",t)}},Cc=e=>{wc(e,"prechat")},Ec=e=>{wc(e,"postchat")},kc=e=>{wc(e,"ticket")},Ac=(e,t,r)=>{const n=Ae("error.details.errors",e);if(!n)return void r();const a=n.reduce((e,r)=>"requester.email"===r.field?{...e,email:t("invalid_email")}:"requester.name"===r.field?{...e,name:r.message}:e,{});xe(a)?r():r(a)},Fc=e=>{const t="email_prompt",{properties:{lastThread:r}}=e.getChat("liveChatChatId");e.hasEvent("liveChatChatId",t)&&e.removeEvent("liveChatChatId",t);!!Kd(e).find(e=>"form"===e.type&&"ask_for_email"===e.properties.formId)||e.addEvent("liveChatChatId",{id:t,serverId:null,seen:!0,type:"email_prompt",author:"system",thread:r})},xc=function(e,t,r,n){switch(void 0===n&&(n=!1),Fe(r.type,["message","webview"])&&Nl(e),e.emit("rich_greeting_button_clicked",{button:r,event:e.getEvent("liveChatChatId",t)}),r.type){case"message":Kl(e,"liveChatChatId",r.text,{event:t,button:r});break;case"webview":bc(e,{url:r.value,wasTriggeredByGreeting:n,source:n?"targeted_message":"rich_message"});break;case"cancel":Bc(e,"liveChatChatId",t);break;case"copy":return void ou(r.value)}},Ic=e=>{e.emit("start_thread")},Sc=function(e,t,r){void 0===r&&(r="button");const n=e.getChat("liveChatChatId"),a=Fe("image",t.type);(Fe(["clipboard","drag"],r)||Math.random()<.1)&&ml("file_upload_added",{uploadSource:r}),e.sendEvent("liveChatChatId",{type:"file",thread:n.properties.lastThread,properties:{name:t.name.substring(0,255),progress:0,finished:!1,failed:!1,failReason:null,fileType:a?"image":"other",url:a?URL.createObjectURL(t):null,uploadSource:r}},{file:t})},Tc=(e,t)=>{op(e)&&np(e)&&e.setApplicationState({greetingsMuted:!0}),e.removeEvent("liveChatChatId",t),setTimeout(()=>e.emit("render-minimized"),0)},Bc=(e,t,r)=>{const n=e.getChat(t),{mobile:a}=e.getApplicationState(),i=e.getEvent(t,r);var o;!n.active&&i&&(Ml(e.getSessionUser().serverId,.01)&&(o={mobile:a,greetingId:i.properties.id,greetingUniqueId:i.properties.uniqueId,greetingType:i.properties.type,greetingSubtype:i.properties.subtype,greetingAddon:i.properties.addon||"none",minimizedType:_d(e)},ml("greeting_canceled",o)),e.emit("request_cancel_greeting",i))},zc=function(e,t,r){let{scheduleRerender:n=!0}=void 0===r?{}:r;const a=e.getView("minimized"),i={...a,...t};JSON.stringify(a)!==JSON.stringify(i)&&(e.updateView("minimized",i),n&&setTimeout(()=>e.emit("render-minimized"),0))},Pc=(e,t)=>{const{session:r,transitionState:n}=t,a={...e.getApplicationState("visitorCounter")||{},...r&&{session:r},transitionState:n,...void 0!==t.hidden?{hidden:t.hidden}:{},isVisible:!!n&&"hidden"!==n};e.setApplicationState({visitorCounter:a}),e.emit("render-minimized")},Mc=(e,t)=>{const{transitionState:r}=t,n={...e.getApplicationState("googleReviews"),transitionState:r,...void 0!==t.hidden?{hidden:t.hidden}:{},isVisible:!!r&&"hidden"!==r};e.setApplicationState({googleReviews:n}),e.emit("render-minimized")},Oc=(e,t)=>{var r;const n=e.getApplicationState("contactInvitation"),a=null!=(r=t.transitionState)?r:n.transitionState,i={...n,transitionState:a,...void 0!==t.hidden?{hidden:t.hidden}:{},isVisible:!!a&&"hidden"!==a,hasSeen:void 0!==t.hasSeen?t.hasSeen:n.hasSeen};e.setApplicationState({contactInvitation:i}),t.transitionState&&e.emit("render-minimized")},jc=(e,t)=>{var r;const n=e.getApplicationState("chatBotGreeting"),a=null!=(r=t.transitionState)?r:n.transitionState,i={...n,transitionState:a,isVisible:!!a&&"hidden"!==a,text:void 0!==t.text?t.text:n.text,hidden:void 0!==t.hidden?t.hidden:n.hidden,hasSeen:void 0!==t.hasSeen?t.hasSeen:n.hasSeen};e.setApplicationState({chatBotGreeting:i}),t.transitionState&&e.emit("render-minimized")},Rc=(e,t)=>{const{history:r}=e.getApplicationState("locationHistory"),n=(new Date).getTime();if(r.length&&Se(r)===t)return void e.setApplicationState({locationHistory:{history:r,updatedAt:n}});const a=[].concat(r.slice(-10),[t]);e.setApplicationState({locationHistory:{history:a,updatedAt:n}})},$c=()=>{const e=z(window.location.search);return parseInt((()=>{const e=String(window.location).match(/licen(?:s|c)e\/g?(\d+)/);return e?e[1]:null})()||e.license_id,10)},qc=e=>{const t=parseInt(e,10);return t>-1?t:null},Uc=e=>"group"in e?qc(e.group):"groups"in e?qc(e.groups):null,Lc=()=>"1"===Ke("unique_groups",window.location.search)||"1"===Ke("unique_group",window.location.search),Nc=e=>{const{name:t}=e.getSessionUser();return t||e.localize("client")},Vc=e=>{const t=sd("liveChatChatId",e);if(!t)throw new Error("Current chat agent is undefined");if(!t.name)throw new Error("Current chat agent name is undefined");return t.name},Hc=function(e,t,r){void 0===r&&(r={});const{name:n=Nc(e),agent:a=Vc(e)}=r;return t.replace(/%name%/g,n).replace(/%agent%/g,a)},Zc=e=>Cs(e)>.7,Gc=e=>Cs(e)<=.179,Yc=e=>{var t;return Boolean(null==(t=e.properties.license.bb9e5b2f1ab480e4a715977b7b1b4279)?void 0:t.messaging_in_queue_enabled)},Wc=e=>{var t;return Boolean(null==(t=e.properties.group.bb9e5b2f1ab480e4a715977b7b1b4279)?void 0:t.homescreen_enabled)},Jc=e=>"https://"+e+"."+("api"===e?"livechatinc":"livechat")+".com",Qc=()=>{const e=document.createElement("video"),t=document.createElement("canvas");return navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",displaySurface:"browser"},audio:!1}).then(t=>(e.srcObject=t,e.play())).then(()=>new Promise(e=>{setTimeout(e,150)})).then(()=>{t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight);const r=((e,t)=>{const[r,n]=e.split(","),a=r.match(/:(.*?);/)[1],i=atob(n);let o=i.length;const s=new Uint8Array(o);for(;o--;)s[o]=i.charCodeAt(o);return new File([s],t,{type:a})})(t.toDataURL("image/png"),"screenshot.png");return e.srcObject.getTracks().forEach(e=>e.stop()),r}):Promise.reject(new Error("Screen sharing is not supported"))},Xc=e=>Gc(e)?ws(.1,As(.1,e)):ws(.2,Ds(.15,e));function Kc(e,t,r){if(e.startsWith(r))return e;const n=[e,t],a=JSON.stringify(n),i=btoa(a),o=new URL("/v1.0/t/link",r);return o.searchParams.set("d",i),o.toString()}function ed(e){return"https://cdn.livechat-files.com/api/file/lc/main/default/logo/sz2tt7jpJ6VJwBo.png"===ut(e)}const td=e=>{const{x:t,y:r,width:n,height:a}=e.target.getBoundingClientRect();return{x:t,y:r,width:n,height:a}},rd=(e,t)=>{const{name:r,email:n}=fe(e=>"string"==typeof e?Ye(e):e,Re(["email","name"],e));return r===t("client")?{email:n}:{email:n,name:r}},nd=e=>!!e&&(e=>{const t=it(e);return!t||"https:"===t||!1})(eu(e)),ad=e=>{var t;return{id:e.id,name:null!=(t=e.title)?t:"",text:e.description,icon:e.icon,action:{label:e.action.label,type:"button",value:e.action.url},properties:{}}},id=(e,t)=>{var r,n,a;const i=ud("logo",e),o=i.enabled?ut(i.path):"",s=ud("boosters",e),u=null==(r=s.items)?void 0:r.find(e=>Fo(e.id)),l=null==(n=s.items)?void 0:n.find(e=>Ao(e.id)),c=null==(a=s.items)?void 0:a.find(e=>"links"===e.id),d={apps:[]};u&&d.apps.push({...ad(u),trademarkLink:"https://www.knowledgebase.com/?utm_source=chat_window&utm_medium=referral&utm_campaign=home_screen",trademarkLinkAnchor:"Powered by KnowledgeBase"}),l&&(d.apps.push(ad(l)),e.on("send_helpdesk_form",r=>{t(r).then(t=>e.emit("send_helpdesk_form_success",t)).catch(t=>e.emit("send_helpdesk_form_error",t))}),e.addView("HelpdeskTicketForm",{isLoading:!0,hasFetchingError:!1})),e.addView("Homescreen",d),dc(e,"livechatIntegration",{name:"livechat_integration",enabled:!0,properties:{licenseId:e.getApplicationState().license}}),c&&dc(e,"links",{enabled:!0,name:"links",properties:{links:c.links}}),e.setApplicationState({header:{text:"",logo:o,backgroundType:"gradient"}})},od=e=>{const{currentChat:t}=e.getApplicationState();if(!t)throw new Error("Current chat is not set");return t},sd=(e,t)=>{const r=t.getChat(e).properties.currentAgent;return r?Pp(t,r):null},ud=(e,t)=>t.getApplicationState("config").features[e],ld=e=>ud("continuousChat",e).enabled,cd=e=>ud("chatHistory",e).enabled,dd=e=>!!e.getView("Chat").liveChatChatId.hasDividers,pd=e=>Md(e)&&!ld(e),hd=(e,t,r)=>{let{authorPredicate:n,lastSeenPredicate:a}=t;const i=r.getEvents(e),o=He(e=>n(e)||!e.seen,ye(a,i),i);return Ue(n,o)},fd=(e,t,r)=>{const n=r.getSessionUserId();return hd(e,{authorPredicate:e=>e.author!==n,lastSeenPredicate:e=>(e.serverTimestamp||e.timestamp)<=t},r)},gd=(e,t,r)=>{const n=r.getSessionUserId();return hd(e,{authorPredicate:e=>e.author===n,lastSeenPredicate:e=>e.timestamp<=t},r)},md=(e,t,r)=>{const n=e.getEvent(t,r);if("message_draft"===n.type&&null===n.serverId){const r=ve(e=>"message_draft"===e.type,e.getEvents(t));return n.id===(null==r?void 0:r.id)?e.localize("not_sent_yet"):null}if(!n.own)return null;if(n.failed)return"Message not sent";if(n.seen){const n=e.getLastSeenEvent(t);return n&&r===n.id?e.localize("message_read"):null}const a=e.getLastDeliveredEvent(t);return a&&r===a.id?e.localize("message_delivered"):null},_d=e=>{const t=e.getApplicationState("config");return!0===e.getApplicationState("mobile")?t.mobileMinimizedType:t.minimizedType},bd=e=>{const{config:t}=e.getApplicationState();return!0===e.getApplicationState("mobile")?t.mobileScreenPosition:t.screenPosition},vd=(e,t)=>cd(e)&&e.getChat(t).properties.hasMoreHistory,Dd=(e,t)=>{const{fakeAgentMessageId:r}=e.getChat(t).properties;return r?e.getEvent(t,r):null},yd=(e,t)=>!!Dd(e,t),wd=e=>{const{embedded:t,actingAsDirectLink:r,isInCustomContainer:n}=e.getApplicationState();return!!t&&!r&&!n},Cd=(e,t)=>{const{active:r,properties:{queued:n}}=t.getChat("liveChatChatId");if(r||n)return!1;const{availability:a,readyState:i}=t.getApplicationState();return"online"===a&&("not_ready"===i||(!bp(t,"maximized")||xe(t.getEvents(e))))},Ed=(e,t)=>{if(cd(t))return!1;const{availability:r,embedded:n,actingAsDirectLink:a,isInCustomContainer:i,defaultWidget:o}=t.getApplicationState(),s=t.getChat(e);return"livechat"===o&&n&&!a&&!i&&!s.active&&!s.properties.ended&&"offline"===r&&!Md(t)},kd=e=>"connected"===e.getConnectionState(),Ad=e=>"disconnected"===e.getConnectionState(),Fd=e=>"reconnecting"===e.getConnectionState()||Ad(e),xd=(e,t)=>{if(t<0)return null;const r=e[t];return r.own&&"message"===r.type?null:"system_message"===r.type||"rich_message_postback"===r.type?xd(e,t-1):r.properties.quickReplies?r:null},Id=(e,t)=>{const r=t.getEvents(e),n=xd(r,r.length-1);return n&&(n.properties.invitation||t.getChat(e).active)?n:null},Sd=(e,t)=>{const{availability:r}=t.getApplicationState(),{active:n,properties:{queued:a,ended:i}}=t.getChat(e);if(a)return t.localize("embedded_waiting_for_operator");const o=sd(e,t);return n&&o?t.localize("embedded_chat_with",{operator:o.name}):i?t.localize("embedded_chat_ended"):"online"===r?t.localize("embedded_chat_now"):Md(t)||ld(t)?t.localize("embedded_leave_message"):t.localize("agents_not_available")},Td=(e,t)=>{var r;const n=e.getChat(t),a=ld(e);if(e.getApplicationState().limitReached)return null;if(Gd(e)&&!Yd(e))return null;if("chatbotChatId"===t&&!n.properties.ended&&!1===(null==(r=ud("chatbotIntegration",e))?void 0:r.properties.showTextField))return n.properties.isAnsweringQuestion?"text":null;if(n.active){var i;const r=tp(e),n=e.getChat(t).properties.currentAgent;return null!=r&&null!=(i=r.properties)&&i.useFixedAnswers&&(null==r?void 0:r.author)===n?null:"text"}return pp(e,t)||Od(e)?null:!n.properties.ended||a&&!Pd(e)&&"chatbotChatId"!==t?a||"offline"!==e.getApplicationState().availability?yd(e,"liveChatChatId")?Pd(e)&&ud("preChatAfterGreeting",e).enabled?a&&"offline"===e.getApplicationState().availability?null:"requestPrechat":null!=(o=sd(t,e))&&o.properties.isBot&&!n.properties.starting||jd(e)?"startChat":"text":a?Pd(e)?"offline"===e.getApplicationState().availability?null:"requestPrechat":"text":a&&n.properties.ended?"text":null:null:"startChatAgain";var o},Bd=(e,t)=>!!t.getChat(e).properties.starting,zd=e=>e.getApplicationState("config").theme.name,Pd=e=>e.getApplicationState().config.features.preChatForm.enabled,Md=e=>e.getApplicationState().config.features.ticketForm.enabled,Od=function(e,t){void 0===t&&(t=void 0);const r=ve(e=>"form"===e.type,e.getEvents("liveChatChatId"));if(!r)return!1;const{properties:n}=r;return!n.answered&&"ask_for_email"!==n.formId&&("string"!=typeof t||n.formType===t)},jd=e=>{const{properties:{groupHasProbableQueue:t}}=e.getChat("liveChatChatId");return!!t},Rd=e=>{const{active:t,properties:{queued:r,ended:n,startChatAgainPending:a,currentAgent:i}}=e.getChat("liveChatChatId"),{availability:o,limitReached:s}=e.getApplicationState(),u=ld(e),l=Md(e);return!(!s||l&&!u)||"offline"===o&&(!(n&&!a)&&(u?!i&&!r:!t&&!r&&!l))},$d=e=>{const t=od(e);return Boolean(sd(t,e))&&!("modern"===zd(e)&&Od(e))&&!((e,t)=>!!t.getChat(e).properties.queued)(t,e)&&!Rd(e)},qd=e=>{var t;return Boolean(null==(t=e.getView("Homescreen"))||null==(t=t.apps)?void 0:t.find(e=>Ao(e.id)))},Ud=e=>{const t=e.getApplicationState().defaultWidget,r=od(e);return"openAIChatId"===r||"chatbotChatId"===r?!e.getChat(r).properties.agentIsTyping&&("Chat"===e.getCurrentView()&&lp(e)):("openwidget"!==t||"Chat"===e.getCurrentView())&&(!(!Gd(e)||e.getView("Chat/queue"))||!dp(e)&&lp(e))},Ld=e=>{const t=e.getLastEvent("liveChatChatId");return!!t&&("form"===t.type&&"ticket"===t.properties.formType&&t.properties.answered)},Nd=e=>{const{nonProfitLicense:t}=e.getApplicationState("config");return t},Vd=e=>{const{actingAsDirectLink:t,isInCustomContainer:r,mobileWrapper:n,embedded:a}=e.getApplicationState();return!t&&!r&&(n||a)},Hd=e=>Boolean(e.getApplicationState("invitation").current),Zd=e=>{const{lastThread:t,currentAgent:r,queued:n}=e.getChat("liveChatChatId").properties;if(!ld(e)||r||n)return!1;return!!!ve(e=>{let{type:r,thread:n}=e;return"email_prompt"===r&&n===t},e.getEvents("liveChatChatId"))},Gd=e=>e.getChat("liveChatChatId").properties.queued,Yd=e=>{var t;return Boolean(null==(t=ud("queue",e))?void 0:t.writingInQueueEnabled)},Wd=e=>ud("fileSharing",e).enabled,Jd=e=>{const{active:t}=e.getChat("liveChatChatId");return t&&!Fd(e)},Qd=e=>!Fd(e)&&!e.getApplicationState("disableSendingMessage"),Xd=Qn([e=>da(e,"liveChatChatId"),e=>pa(e,"liveChatChatId").properties.lastThread],(e,t)=>{return He(e=>e.thread===t,(r=e).length-1,r);var r}),Kd=e=>Xd(e.getState()),ep=Qn([e=>Xd(e),e=>Da(e)],(e,t)=>ve(e=>"system"!==e.author&&e.author!==t,e)),tp=e=>ep(e.getState()),rp=(e,t)=>{if(e.hasEvent("liveChatChatId",t)){const{properties:r}=e.getEvent("liveChatChatId",t);return r.invitation}return!1},np=e=>!e.getApplicationState().mobile&&"bar"===_d(e),ap=e=>{const t=Dd(e,"liveChatChatId");return t&&t.properties.invitation?t:null},ip=function(e,t){void 0===t&&(t=ap(e));const{availability:r,invitation:n}=e.getApplicationState();return!("offline"!==r&&!np(e))||(!t||Boolean(t&&Fe(t.properties.uniqueId,n.hiddenIds)))},op=function(e,t){void 0===t&&(t=ap(e));const{invitation:r}=e.getApplicationState();return Boolean(t&&Fe(t.properties.uniqueId,r.displayedIds))},sp=e=>!Kd(e).some(e=>{let{author:t,own:r}=e;return!r&&"system"!==t}),up=e=>{const{formType:t,fields:r,answered:n}=e.properties,a=r.filter(e=>e.answer&&e.label);return"ticket"!==t&&n&&xe(a)},lp=e=>{const t=od(e),r=e.getEvents(t);return xe(r)||r.every(e=>"form"===e.type&&up(e))},cp=e=>{const t=e.getEvents("liveChatChatId");return xe(t)||t.every(e=>"form"===e.type&&up(e)||e.properties.invitation||e.properties.welcomeMessage)},dp=e=>$d(e)||Rd(e)||Gd(e),pp=(e,t)=>e.getEvents(t).some(e=>"message_draft"===e.type&&null===e.serverId),hp=e=>{const{embedded:t,actingAsDirectLink:r}=e.getApplicationState();return!t||r?"direct_link":"code"},fp=Qn([e=>Xd(e)],e=>e.filter(e=>"file"===e.type&&!e.delivered&&!e.properties.canceled)),gp=e=>fp(e.getState()),mp=e=>e.getChat("liveChatChatId").serverId,_p=e=>{const{mobile:t}=e.getApplicationState();return ud(t?"mobileMinimized":"minimized",e).enabled},bp=(e,t)=>e.getApplicationState("visibility").state===t,vp=(e,t)=>{const r=e.getApplicationState("config").properties.license;return Object.keys(r).some(e=>r[e][t])},Dp=e=>ud("hideTrademark",e).enabled,yp=(e,t)=>e.getApplicationState("config").properties.license[t],wp=e=>{const{language:t,isPreview:r}=e.getApplicationState();if("en"!==t||r)return!1;const n=yp(e,"a9f288b2883da20306d30e179067406f");return Boolean(null==n?void 0:n.transfer_identity_enabled)},Cp=e=>{const t=yp(e,"632cead4b282481a422dd4e1d1567449");return{url:null==t?void 0:t.widget_message_box_moment_url,height:null==t?void 0:t.widget_message_box_moment_height}},Ep=e=>{var t;const{url:r}=Cp(e);return{disabled:!e.getChat("liveChatChatId").active||!sd("liveChatChatId",e),visible:nd(r)&&(null==(t=e.getView("Moment"))||null==(t=t.data)?void 0:t.url)!==r}},kp=e=>e.getChat("liveChatChatId").active?e.getChat("liveChatChatId").properties.lastThread:null,Ap=e=>e.getView("minimized"),Fp=e=>{const{history:t,updatedAt:r}=e.getApplicationState("locationHistory");return r-(new Date).getTime()>18e5?[]:t},xp=e=>{var t;return Boolean(null==(t=e.getApplicationState("recommendations"))?void 0:t.isVisible)},Ip=e=>e.localize(e.getApplicationState("limitReached")||!ld(e)?"agents_not_available":"agents_not_available_continuous"),Sp=e=>{const t=e.getView("Chat/queue"),r=t&&t.numberInQueue,n=t&&t.waitingTime;return(e=>{const t=e.localize("user_in_queue"),{fields:r}=e.getView("Chat/prechat");if(!r||xe(r))return t;const n=r.find(e=>{let{meta:t}=e;return t&&"groupSelect"===t});if(!n||!n.options||xe(n.options))return t;const a=n.options.find(t=>{let{groupNumber:r}=t;return r===e.getApplicationState("group")});return a&&a.queueTemplate?a.queueTemplate:t})(e).replace(/%number%/g,"**"+r+"**").replace(/%minutes%/g,"**"+Math.floor(n/60)+"**")},Tp=e=>{if(e.getApplicationState("isPreview"))return!1;if(!ud("rating",e).enabled)return!1;if(Fd(e))return!1;const{active:t,properties:{rate:r}}=e.getChat("liveChatChatId");if(!t||r)return!1;return(e=>{const{properties:{timestamp:t}}=e.getChat("liveChatChatId");if(!t)return 0;const r=Kd(e);if(!r||0===(null==r?void 0:r.length))return 0;const n=ve(e=>"system_message"!==e.type,r);return n?n.timestamp-t:0})(e)/1e3/60>2&&(e=>Kd(e).some(e=>{let{author:t,own:r,properties:n}=e;return!r&&"system"!==t&&!n.invitation&&!n.welcomeMessage}))(e)},Bp=e=>"offline"===e.getApplicationState("availability"),zp=e=>{if(!ud("homeScreen",e).enabled)return!1;return!("modern"===zd(e))},Pp=(e,t)=>{const r=e.getUser(t);var n;return"openai_bot"===r.id?{...r,avatar:null!=(n=r.avatar)?n:"https://cdn.files-text.com/api/ow/img/integrations/openai/orb.gif"}:r},Mp=(e,t)=>{if(!t)return"_blank";if("chatbotChatId"!==od(e))return"_blank";const{page:r}=e.getApplicationState();return Xe(t)===Xe(r.url)?"_parent":"_blank"},Op=e=>{const t=ap(e);return t&&t.properties.quickReplies?t:null},jp={};function Rp(e,t){let{query:r={},jsonpParam:n="jsonp",callbackName:a}=void 0===t?{}:t;return new Promise((t,i)=>{Us().then(o=>{const s=document.createElement("script"),u=a||ke(jp);jp[u]=!0;const l="__"+u;window[l]=e=>{delete jp[u],delete window[l],Ls(s),t(e)},s.src=e+"?"+O({...r,[n]:l}),s.addEventListener("error",()=>{setTimeout(()=>i(new Error("JSONP request failed.")),100)}),o.appendChild(s)})})}const $p=/\.([a-z]{1,})$/i,qp=e=>{let{__priv:t}=e;const r={enabled:!0,x:parseInt(t.group["embedded_chat.eye_grabber.x"])+15,y:parseInt(t.group["embedded_chat.eye_grabber.y"]),src:ut(t.group["embedded_chat.eye_grabber.path"])};if(-1!==r.src.indexOf("/default/eyeCatchers/")){const e=r.src.match($p)[1];r.srcset={"1x":r.src,"2x":r.src.replace(new RegExp("\\."+e,"i"),"-2x."+e)}}return r},Up=(e,t)=>{const r="get_dynamic_configuration"===e?"v3.6":"v3.4";return(e=>{let{licenseId:t,region:r}=e;return"https://api"+(e=>e&&"dal"!==e?"-"+e:"")(r)+(e=>1520===e?".staging":"")(t)+".livechatinc.com"})(t)+"/"+r+"/customer/action/"+e},Lp=function(e,t){let{validateDefaultWidget:r=!0}=void 0===t?{}:t;return Rp(Up("get_dynamic_configuration",e),{query:{license_id:e.licenseId,client_id:null!="c5e4f61e1a6c3b1521b541bc5c5a2ac5"?"c5e4f61e1a6c3b1521b541bc5c5a2ac5":"",url:st(e.url,["cw_configurator"]),..."number"==typeof e.groupId&&{group_id:e.groupId},...e.channelType&&{channel_type:e.channelType},...e.skipCodeInstallationTracking&&{test:1},...e.productName&&{origin:e.productName},...e.integrationName&&{implementation_type:e.integrationName}}}).then(t=>{if(t.error)switch(t.error.type){case"misdirected_request":return Lp({...e,region:t.error.data.region});case"license_not_found":{if("direct_link"===e.channelType){const t=O({utm_source:"expired_chat_link",utm_medium:"referral",utm_campaign:"lc_"+e.licenseId});window.location.replace("https://www.livechat.com/expired-chat-link/?"+t)}const t=new Error("License not found");throw t.code="LICENSE_NOT_FOUND",t}default:{const e=new Error(t.error.message);throw e.code=t.error.type.toUpperCase(),e}}if(1520===e.licenseId&&(t.default_widget="livechat"),r&&"livechat"!==t.default_widget){const e=new Error("The 'default_widget' is not 'livechat', but instead: '"+t.default_widget+"'");throw e.code="DEFAULT_WIDGET_NOT_LIVECHAT",e.organizationId=t.organization_id,e.defaultWidget=t.default_widget,e}if(!t.livechat_active){if("direct_link"===e.channelType){const t=O({utm_source:"expired_chat_link",utm_medium:"referral",utm_campaign:"lc_"+e.licenseId});window.location.replace("https://www.livechat.com/expired-chat-link/?"+t)}const t=new Error("License expired");throw t.code="LICENSE_EXPIRED",t}if(!t.livechat.domain_allowed){const e=new Error("Current domain is not added to the allowlist.");throw e.code="DOMAIN_NOT_ALLOWED",e}return n=t,a=e.region,{organizationId:n.organization_id,groupId:n.livechat.group_id,clientLimitExceeded:n.livechat.client_limit_exceeded,configVersion:n.livechat.config_version,localizationVersion:n.livechat.localization_version,onlineGroupIds:n.livechat.online_group_ids||[],region:a||null,language:n.livechat.language};var n,a})},Np=e=>{var t,r;const n="feade1d6c3f17748ae4c8d917a1e1068",a=Boolean(null==(t=e.properties.group[n])?void 0:t.forwardTicketFormToHelpdesk),i="1"===e.__priv.license["helpdesk.inbound_forwarding"],o=null==(r=e.properties.license[n])?void 0:r.hdLicenseID;return"number"==typeof o&&o>-1&&(a||i)},Vp=(e,t)=>t.includes(e)?e:t[0],Hp=e=>Rp(Up("get_configuration",e),{callbackName:"lc_static_config",query:{organization_id:e.organizationId,version:e.version,..."number"==typeof e.groupId&&{group_id:e.groupId}}}).then(e=>(e=>{const{buttons:t,allowed_domains:r,prechat_form:n,ticket_form:a,__priv:i,properties:o,...s}=e,u="0"===i.group.tickets_enabled,l=!Boolean(i.disable_native_tickets)&&Boolean(a),c=Np(e),d=u||c||l;return{...s,...n&&{prechatForm:Yr(n)},...d&&a&&{ticketForm:Yr(a)},properties:o,buttons:t.map(e=>"image"===e.type?{id:e.id,type:e.type,onlineValue:ut(e.online_value),offlineValue:ut(e.offline_value)}:{id:e.id,type:e.type,onlineValue:e.online_value,offlineValue:e.offline_value}),...r&&{allowedDomains:r},__unsafeProperties:{...i.s&&{s:!0},group:{chatBoosters:i.group.chat_boosters,disabledMinimized:"1"===i.group["chat_window.disable_minimized"],disabledMinimizedOnMobile:"1"===i.group["chat_window.mobile_disable_minimized"],disabledOnMobile:"1"===i.group["chat_window.hide_on_mobile"],eyeCatcher:"1"===i.group["embedded_chat.display_eye_catcher"]?qp(e):{enabled:!1},hasAgentAvatarsEnabled:"1"===i.group["chat_window.display_avatar"],hasCustomMobileSettings:"1"===i.group["chat_window.custom_mobile_settings"],hasHiddenTrademark:"1"===i.group["chat_window.hide_trademark"],hasSoundsEnabled:"0"===i.group["chat_window.disable_sounds"],initiallyHidden:"1"===i.group["chat_window.hide_on_init"]||"1"===i.group["chat_window.disable_minimized"],initiallyHiddenOnMobile:"1"===i.group["chat_window.mobile_hide_on_init"]||"1"===i.group["chat_window.mobile_disable_minimized"],hideOnInit:"1"===i.group["chat_window.hide_on_init"],language:i.group.language,linksUnfurlingEnabled:"1"===i.group.links_unfurling,logo:"1"===i.group["chat_window.display_logo"]?{enabled:!0,src:i.group["chat_window.logo_path"]}:{enabled:!1},minimizedType:Vp(i.group["chat_window.theme.minimized"],["circle","bar"]),minimizedTypeOnMobile:i.group["chat_window.mobile_minimized_theme"],offlineMessagesEnabled:u,offsetX:parseInt(i.group["chat_window.offset_x"]),offsetXOnMobile:parseInt(i.group["chat_window.mobile_offset_x"]),offsetY:parseInt(i.group["chat_window.offset_y"]),offsetYOnMobile:parseInt(i.group["chat_window.mobile_offset_y"]),prechatFormAfterGreetingEnabled:"1"===i.group.pre_chat_survey_after_greeting,ratingEnabled:"1"===i.group["rate_me.enabled"],screenPosition:Vp(i.group["chat_window.screen_position"],["right","left"]),screenPositionOnMobile:Vp(i.group["chat_window.mobile_screen_position"],["right","left"]),transcriptButtonEnabled:"1"===i.group["chat_window.display_transcript_button"],theme:{name:Vp(i.group["chat_window.new_theme.name"],["smooth","modern"]),variant:Vp(i.group["chat_window.new_theme.variant"],["light","dark"]),customJson:i.group["chat_window.new_theme.custom_json"],agentbarBackgroundColor:i.group["chat_window.new_theme.agentbar_background_color"],agentbarText:i.group["chat_window.new_theme.agentbar_text"],agentMessageColorBackground:i.group["chat_window.new_theme.agent_message_color_background"],agentMessageColorText:i.group["chat_window.new_theme.agent_message_color_text"],backgroundColor:i.group["chat_window.new_theme.background_color"],ctaColor:i.group["chat_window.new_theme.cta_color"],minimizedColorBackground:i.group["chat_window.new_theme.minimized_color_background"],minimizedColorIcon:i.group["chat_window.new_theme.minimized_color_icon"],minimizedColorText:i.group["chat_window.new_theme.minimized_color_text"],systemMessageColor:i.group["chat_window.new_theme.system_message_color"],titlebarBackgroundColor:i.group["chat_window.new_theme.titlebar_background_color"],titlebarText:i.group["chat_window.new_theme.titlebar_text"],visitorMessageColorBackground:i.group["chat_window.new_theme.visitor_message_color_background"],visitorMessageColorText:i.group["chat_window.new_theme.visitor_message_color_text"]}},license:{creditCardMaskingEnabled:"1"===i.license.mask_credit_cards,nonProfit:"1"===i.license.non_profit,licenseinboundForwardingToHelpdeskEnabled:"1"===i.license["helpdesk.inbound_forwarding"]},helpdeskIntegrationEnabled:c,ticketFormMode:(p=e,Np(p)?"helpdesk":"0"===p.__priv.group.tickets_enabled?"offline_message":"livechat")}};var p})(e)),Zp=e=>Rp(Up("get_localization",e),{callbackName:"lc_localization",query:{organization_id:e.organizationId,version:e.version,language:e.language,..."number"==typeof e.groupId&&{group_id:e.groupId}}}).then(e=>Te(e=>e.toLowerCase(),e));export{Fl as $,pa as A,Ia as B,Dl as C,ld as D,Hd as E,_d as F,wl as G,Lc as H,cd as I,vd as J,Kd as K,uo as L,$u as M,Se as N,zp as O,bl as P,xe as Q,Io as R,_e as S,Ee as T,fe as U,$c as V,gl as W,oe as X,Z as Y,me as Z,xo as _,ot as a,ui as a$,Hu as a0,Al as a1,qe as a2,ke as a3,nl as a4,ip as a5,Zu as a6,Do as a7,Fa as a8,ec as a9,ut as aA,Hc as aB,Us as aC,pc as aD,id as aE,qd as aF,rr as aG,N as aH,he as aI,J as aJ,ja as aK,Ra as aL,La as aM,Na as aN,ai as aO,oi as aP,Za as aQ,Ga as aR,Wa as aS,aa as aT,Pa as aU,ta as aV,Oa as aW,ni as aX,ii as aY,si as aZ,ti as a_,ha as aa,lo as ab,Ul as ac,ql as ad,Fe as ae,_p as af,ml as ag,_l as ah,Uc as ai,So as aj,Ns as ak,Ls as al,qs as am,_u as an,Te as ao,Ce as ap,Ne as aq,wu as ar,Il as as,As as at,Ae as au,Ln as av,Nl as aw,Vl as ax,ze as ay,Tl as az,Oc as b,bc as b$,ri as b0,Ja as b1,sa as b2,_a as b3,na as b4,ra as b5,or as b6,Ya as b7,Ie as b8,Zn as b9,dl as bA,Oe as bB,Vu as bC,Ke as bD,Ro as bE,se as bF,$e as bG,qo as bH,$o as bI,Ds as bJ,Ye as bK,xn as bL,nu as bM,Ss as bN,Bs as bO,xs as bP,bu as bQ,Zc as bR,Ps as bS,Mp as bT,pu as bU,Gu as bV,Yu as bW,zd as bX,wp as bY,mo as bZ,td as b_,Pe as ba,$a as bb,qa as bc,Ua as bd,be,Ha as bf,Xa as bg,Qa as bh,ei as bi,Ka as bj,Nn as bk,Ma as bl,Va as bm,za as bn,fa as bo,Je as bp,ma as bq,Me as br,ve as bs,ur as bt,Be as bu,sr as bv,Sa as bw,ir as bx,li as by,hi as bz,ge as c,gp as c$,eu as c0,_o as c1,Jc as c2,tu as c3,tt as c4,vc as c5,Dc as c6,Yl as c7,vp as c8,tc as c9,op as cA,Ve as cB,bd as cC,Ou as cD,ju as cE,Ru as cF,Tu as cG,Bu as cH,zu as cI,Mu as cJ,Pu as cK,xp as cL,rl as cM,Ju as cN,Xu as cO,el as cP,tl as cQ,Ku as cR,Qu as cS,ap as cT,sd as cU,Sd as cV,Wd as cW,Jd as cX,uu as cY,Qn as cZ,U as c_,od as ca,mp as cb,Dp as cc,Vd as cd,Un as ce,Lu as cf,jc as cg,Kc as ch,ud as ci,du as cj,cu as ck,lu as cl,xu as cm,Iu as cn,Su as co,Fu as cp,ku as cq,Eu as cr,Au as cs,Cu as ct,Re as cu,Kl as cv,Ap as cw,zc as cx,Ll as cy,xc as cz,ol as d,Mt as d$,gd as d0,Sc as d1,Wl as d2,Cp as d3,Rl as d4,Fd as d5,Qd as d6,Ep as d7,ic as d8,Ic as d9,Ue as dA,Wu as dB,Cs as dC,it as dD,Fo as dE,pd as dF,Od as dG,Op as dH,Nu as dI,_s as dJ,is as dK,rd as dL,up as dM,pp as dN,md as dO,Qc as dP,tp as dQ,jo as dR,Nt as dS,Lt as dT,qt as dU,$t as dV,Ut as dW,xt as dX,tr as dY,pt as dZ,kt as d_,Td as da,Tp as db,Kn as dc,Pp as dd,Jl as de,nc as df,kp as dg,rp as dh,ou as di,po as dj,dd as dk,Id as dl,Rd as dm,hs as dn,To as dp,ed as dq,$d as dr,Gd as ds,Ip as dt,Sp as du,cp as dv,nt as dw,Nd as dx,Ud as dy,Ao as dz,dc as e,Ec as e$,Ht as e0,wt as e1,Yt as e2,Vt as e3,er as e4,Kt as e5,Jt as e6,Wt as e7,Gt as e8,Fr as e9,It as eA,St as eB,zt as eC,Ot as eD,jt as eE,vo as eF,wd as eG,ce as eH,le as eI,Ad as eJ,so as eK,yl as eL,io as eM,ao as eN,rc as eO,Tc as eP,Ed as eQ,Hl as eR,yd as eS,oc as eT,ac as eU,oo as eV,no as eW,Pd as eX,yc as eY,kd as eZ,fd as e_,Zt as ea,Xt as eb,Qt as ec,_t as ed,lr as ee,Bt as ef,Ft as eg,an as eh,nn as ei,rn as ej,Rt as ek,Et as el,Tt as em,Pt as en,ct as eo,dt as ep,ht as eq,ft as er,gt as es,mt as et,bt as eu,vt as ev,Dt as ew,yt as ex,Ct as ey,At as ez,qu as f,Bd as f0,vl as f1,hc as f2,cc as f3,go as f4,sc as f5,Md as f6,Ld as f7,kc as f8,Cc as f9,Po as fA,mc as fa,G as fb,pe as fc,Dd as fd,hp as fe,fo as ff,Zl as fg,sp as fh,$l as fi,fc as fj,jl as fk,co as fl,gc as fm,Cd as fn,ho as fo,Ac as fp,Zd as fq,Fc as fr,bo as fs,Co as ft,ye as fu,su as fv,Oo as fw,Mo as fx,Bo as fy,zo as fz,Mc as g,Lp as h,bp as i,Hp as j,Zp as k,ru as l,lc as m,Pc as n,je as o,ee as p,uc as q,cl as r,al as s,ne as t,lt as u,te as v,K as w,re as x,de as y,Uu as z};
