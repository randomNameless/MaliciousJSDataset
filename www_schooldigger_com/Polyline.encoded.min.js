(function(){"use strict";var n=function(n){return n=typeof n=="number"?{precision:n}:n||{},n.precision=n.precision||5,n.factor=n.factor||Math.pow(10,n.precision),n.dimension=n.dimension||2,n},t={encode:function(t,i){var u,f,o,r,e;for(i=n(i),u=[],f=0,o=t.length;f<o;++f)if(r=t[f],i.dimension===2)u.push(r.lat||r[0]),u.push(r.lng||r[1]);else for(e=0;e<i.dimension;++e)u.push(r[e]);return this.encodeDeltas(u,i)},decode:function(t,i){var r,u,f,s,e,o;for(i=n(i),r=this.decodeDeltas(t,i),u=[],f=0,s=r.length;f+(i.dimension-1)<s;){for(e=[],o=0;o<i.dimension;++o)e.push(r[f++]);u.push(e)}return u},encodeDeltas:function(t,i){var f,r,o,u,e,s;for(i=n(i),f=[],r=0,o=t.length;r<o;)for(u=0;u<i.dimension;++u,++r)e=t[r],s=e-(f[u]||0),f[u]=e,t[r]=s;return this.encodeFloats(t,i)},decodeDeltas:function(t,i){var e,r,u,o,f;for(i=n(i),e=[],r=this.decodeFloats(t,i),u=0,o=r.length;u<o;)for(f=0;f<i.dimension;++f,++u)r[u]=Math.round((e[f]=r[u]+(e[f]||0))*i.factor)/i.factor;return r},encodeFloats:function(t,i){i=n(i);for(var r=0,u=t.length;r<u;++r)t[r]=Math.round(t[r]*i.factor);return this.encodeSignedIntegers(t)},decodeFloats:function(t,i){var r,u,f;for(i=n(i),r=this.decodeSignedIntegers(t),u=0,f=r.length;u<f;++u)r[u]/=i.factor;return r},encodeSignedIntegers:function(n){for(var i,t=0,r=n.length;t<r;++t)i=n[t],n[t]=i<0?~(i<<1):i<<1;return this.encodeUnsignedIntegers(n)},decodeSignedIntegers:function(n){for(var r,t=this.decodeUnsignedIntegers(n),i=0,u=t.length;i<u;++i)r=t[i],t[i]=r&1?~(r>>1):r>>1;return t},encodeUnsignedIntegers:function(n){for(var i="",t=0,r=n.length;t<r;++t)i+=this.encodeUnsignedInteger(n[t]);return i},decodeUnsignedIntegers:function(n){for(var u,f=[],t=0,i=0,r=0,e=n.length;r<e;++r)u=n.charCodeAt(r)-63,t|=(u&31)<<i,u<32?(f.push(t),t=0,i=0):i+=5;return f},encodeSignedInteger:function(n){return n=n<0?~(n<<1):n<<1,this.encodeUnsignedInteger(n)},encodeUnsignedInteger:function(n){for(var t,i="";n>=32;)t=(32|n&31)+63,i+=String.fromCharCode(t),n>>=5;return t=n+63,i+String.fromCharCode(t)}},i;typeof module=="object"&&typeof module.exports=="object"&&(module.exports=t);typeof L=="object"&&(L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(n,i){return L.polyline(t.decode(n),i)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(n,i){return L.polygon(t.decode(n),i)}),i={encodePath:function(){return t.encode(this.getLatLngs())}},L.Polyline.prototype.encodePath||L.Polyline.include(i),L.Polygon.prototype.encodePath||L.Polygon.include(i),L.PolylineUtil=t)})();