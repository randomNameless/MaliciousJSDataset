!function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).braintree||(t.braintree={})).googlePayment=e()}(function(){return function n(o,i,a){function s(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return s(o[t][1][e]||e)},r,r.exports,n,o,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){"use strict";var a={};function n(r){var e,n,t,o,i=JSON.stringify(r);return!r.forceScriptReload&&(e=a[i])||(n=document.createElement("script"),t=r.dataAttributes||{},o=r.container||document.head,n.src=r.src,n.id=r.id||"",n.async=!0,r.type&&n.setAttribute("type","".concat(r.type)),r.crossorigin&&n.setAttribute("crossorigin","".concat(r.crossorigin)),Object.keys(t).forEach(function(e){n.setAttribute("data-".concat(e),"".concat(t[e]))}),e=new Promise(function(e,t){n.addEventListener("load",function(){e(n)}),n.addEventListener("error",function(){t(new Error("".concat(r.src," failed to load.")))}),n.addEventListener("abort",function(){t(new Error("".concat(r.src," has aborted.")))}),o.appendChild(n)}),a[i]=e),e}n.clearCache=function(){a={}},t.exports=n},{}],2:[function(e,t,r){t.exports=e("./dist/load-script")},{"./dist/load-script":1}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deferred=function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];setTimeout(function(){try{r.apply(void 0,e)}catch(e){console.log("Error in callback function"),console.log(e)}},1)}}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.once=function(r){var n=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n||(n=!0,r.apply(void 0,e))}}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.promiseOrCallback=function(e,t){if(!t)return e;e.then(function(e){return t(null,e)}).catch(function(e){return t(e)})}},{}],6:[function(e,t,r){"use strict";var o=e("./lib/deferred"),i=e("./lib/once"),a=e("./lib/promise-or-callback");function s(n){return function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"function"==typeof t[t.length-1]&&(e=t.pop(),e=i.once(o.deferred(e))),a.promiseOrCallback(n.apply(this,t),e)}}s.wrapPrototype=function(n,e){var o=(e=void 0===e?{}:e).ignoreMethods||[],i=!0===e.transformPrivateMethods;return Object.getOwnPropertyNames(n.prototype).filter(function(e){var t="constructor"!==e&&"function"==typeof n.prototype[e],r=-1===o.indexOf(e),e=i||"_"!==e.charAt(0);return t&&e&&r}).forEach(function(e){var t=n.prototype[e];n.prototype[e]=s(t)}),n},t.exports=s},{"./lib/deferred":3,"./lib/once":4,"./lib/promise-or-callback":5}],7:[function(e,t,r){"use strict";e=e("../lib/braintree-error");t.exports={GOOGLE_PAYMENT_NOT_ENABLED:{type:e.types.MERCHANT,code:"GOOGLE_PAYMENT_NOT_ENABLED",message:"Google Pay is not enabled for this merchant."},GOOGLE_PAYMENT_GATEWAY_ERROR:{code:"GOOGLE_PAYMENT_GATEWAY_ERROR",message:"There was an error when tokenizing the Google Pay payment method.",type:e.types.UNKNOWN},GOOGLE_PAYMENT_UNSUPPORTED_VERSION:{code:"GOOGLE_PAYMENT_UNSUPPORTED_VERSION",type:e.types.MERCHANT}}},{"../lib/braintree-error":15}],8:[function(e,t,r){"use strict";var i=e("../lib/analytics"),a=e("../lib/assign").assign,n=e("../lib/convert-methods-to-error"),s=e("../lib/find"),o=e("../lib/generate-google-pay-configuration"),c=e("../lib/braintree-error"),u=e("./errors"),p=e("../lib/methods"),e=e("@braintree/wrap-promise"),d={1:"_createV1PaymentDataRequest",2:"_createV2PaymentDataRequest"};function l(e){if(this._createPromise=e.createPromise,this._client=e.client,this._useDeferredClient=e.useDeferredClient,this._googlePayVersion=e.googlePayVersion||1,this._googleMerchantId=e.googleMerchantId,this._isUnsupportedGooglePayAPIVersion())throw new c({code:u.GOOGLE_PAYMENT_UNSUPPORTED_VERSION.code,message:"The Braintree SDK does not support Google Pay version "+this._googlePayVersion+". Please upgrade the version of your Braintree SDK and contact support if this error persists.",type:u.GOOGLE_PAYMENT_UNSUPPORTED_VERSION.type})}l.prototype._waitForClient=function(){return this._client?Promise.resolve():this._createPromise.then(function(e){this._client=e}.bind(this))},l.prototype._isUnsupportedGooglePayAPIVersion=function(){return!(this._googlePayVersion in d)},l.prototype._getDefaultConfig=function(){return this._defaultConfig||(this._defaultConfig=o(this._client.getConfiguration(),this._googlePayVersion,this._googleMerchantId)),this._defaultConfig},l.prototype._createV1PaymentDataRequest=function(e){var t=this._getDefaultConfig(),r=e.cardRequirements&&e.cardRequirements.allowedCardNetworks,n=t.cardRequirements.allowedCardNetworks,r=r||n;return(e=a({},t,e)).cardRequirements.allowedCardNetworks=r,e},l.prototype._createV2PaymentDataRequest=function(e){var o=this._getDefaultConfig();return e.allowedPaymentMethods&&e.allowedPaymentMethods.forEach(function(e){var t,r,n=s(o.allowedPaymentMethods,"type",e.type);n&&(t=e,r=n,Object.keys(r).forEach(function(e){"object"==typeof r[e]?t[e]=a({},r[e],t[e]):t[e]=t[e]||r[e]}))}),e=a({},o,e)},l.prototype.createPaymentDataRequest=function(e){return this._useDeferredClient?this._waitForClient().then(function(){return this._createPaymentDataRequestSyncronously(e)}.bind(this)):this._createPaymentDataRequestSyncronously(e)},l.prototype._createPaymentDataRequestSyncronously=function(e){var e=a({},e),t=this._googlePayVersion,r=d[t];return i.sendEvent(this._createPromise,"google-payment.v"+t+".createPaymentDataRequest"),this[r](e)},l.prototype.parseResponse=function(n){var o=this;return Promise.resolve().then(function(){var e,t=(2===n.apiVersion?n.paymentMethodData.tokenizationData:n.paymentMethodToken).token,t=JSON.parse(t),r=t.error;return r?Promise.reject(r):(i.sendEvent(o._createPromise,"google-payment.parseResponse.succeeded"),t.paypalAccounts?(e=t.paypalAccounts[0],i.sendEvent(o._createPromise,"google-payment.parseResponse.succeeded.paypal"),Promise.resolve({nonce:e.nonce,type:e.type,description:e.description})):(e=t.androidPayCards[0],i.sendEvent(o._createPromise,"google-payment.parseResponse.succeeded.google-payment"),Promise.resolve({nonce:e.nonce,type:e.type,description:e.description,details:{cardType:e.details.cardType,lastFour:e.details.lastFour,lastTwo:e.details.lastTwo,isNetworkTokenized:e.details.isNetworkTokenized,bin:e.details.bin},binData:e.binData})))}).catch(function(e){return i.sendEvent(o._createPromise,"google-payment.parseResponse.failed"),Promise.reject(new c({code:u.GOOGLE_PAYMENT_GATEWAY_ERROR.code,message:u.GOOGLE_PAYMENT_GATEWAY_ERROR.message,type:u.GOOGLE_PAYMENT_GATEWAY_ERROR.type,details:{originalError:e}}))})},l.prototype.teardown=function(){return n(this,p(l.prototype)),Promise.resolve()},t.exports=e.wrapPrototype(l)},{"../lib/analytics":11,"../lib/assign":13,"../lib/braintree-error":15,"../lib/convert-methods-to-error":17,"../lib/find":23,"../lib/generate-google-pay-configuration":24,"../lib/methods":26,"./errors":7,"@braintree/wrap-promise":6}],9:[function(e,t,r){"use strict";var o=e("./google-payment"),i=e("../lib/braintree-error"),a=e("../lib/create-assets-url"),s=e("../lib/create-deferred-client"),c=e("../lib/basic-component-verification"),n=e("@braintree/wrap-promise"),u=e("./errors");t.exports={create:n(function(r){var n="Google Pay";return c.verify({name:n,client:r.client,authorization:r.authorization}).then(function(){var t,e=s.create({authorization:r.authorization,client:r.client,debug:r.debug,assetsUrl:a.create(r.authorization),name:n}).then(function(e){var t=e.getConfiguration();return r.client=e,t.gatewayConfiguration.androidPay?e:Promise.reject(new i(u.GOOGLE_PAYMENT_NOT_ENABLED))});return r.createPromise=e,t=new o(r),r.useDeferredClient?t:e.then(function(e){return t._client=e,t})})}),VERSION:"3.103.0"}},{"../lib/basic-component-verification":14,"../lib/braintree-error":15,"../lib/create-assets-url":18,"../lib/create-deferred-client":20,"./errors":7,"./google-payment":8,"@braintree/wrap-promise":6}],10:[function(e,t,r){"use strict";var i=e("./create-authorization-data"),a=e("./json-clone"),s=e("./constants");t.exports=function(e,t){var r,n=t?a(t):{},t=i(e.authorization).attrs,o=a(e.analyticsMetadata);for(r in n.braintreeLibraryVersion=s.BRAINTREE_LIBRARY_VERSION,n._meta)n._meta.hasOwnProperty(r)&&(o[r]=n._meta[r]);return n._meta=o,t.tokenizationKey?n.tokenizationKey=t.tokenizationKey:n.authorizationFingerprint=t.authorizationFingerprint,n}},{"./constants":16,"./create-authorization-data":19,"./json-clone":25}],11:[function(e,t,r){"use strict";var s=e("./constants"),c=e("./add-metadata");t.exports={sendEvent:function(e,o,i){var a=Date.now();return Promise.resolve(e).then(function(e){var t=Date.now(),r=e.getConfiguration(),e=e._request,n=r.gatewayConfiguration.analytics.url,t={analytics:[{kind:s.ANALYTICS_PREFIX+o,isAsync:Math.floor(t/1e3)!==Math.floor(a/1e3),timestamp:a}]};e({url:n,method:"post",data:c(r,t),timeout:s.ANALYTICS_REQUEST_TIMEOUT_MS},i)}).catch(function(e){i&&i(e)})}}},{"./add-metadata":10,"./constants":16}],12:[function(e,t,r){"use strict";e=e("@braintree/asset-loader/load-script");t.exports={loadScript:e}},{"@braintree/asset-loader/load-script":2}],13:[function(e,t,r){"use strict";var n="function"==typeof Object.assign?Object.assign:o;function o(e){for(var t,r,n=1;n<arguments.length;n++)for(r in t=arguments[n])t.hasOwnProperty(r)&&(e[r]=t[r]);return e}t.exports={assign:n,_assign:o}},{}],14:[function(e,t,r){"use strict";var n=e("./braintree-error"),o=e("./errors"),i="3.103.0";t.exports={verify:function(e){var t,r;return e?(r=e.name,t=e.client,e=e.authorization,t||e?e||t.getVersion()===i?Promise.resolve():Promise.reject(new n({type:o.INCOMPATIBLE_VERSIONS.type,code:o.INCOMPATIBLE_VERSIONS.code,message:"Client (version "+t.getVersion()+") and "+r+" (version "+i+") components must be from the same SDK version."})):Promise.reject(new n({type:o.INSTANTIATION_OPTION_REQUIRED.type,code:o.INSTANTIATION_OPTION_REQUIRED.code,message:"options.client is required when instantiating "+r+"."}))):Promise.reject(new n({type:o.INVALID_USE_OF_INTERNAL_FUNCTION.type,code:o.INVALID_USE_OF_INTERNAL_FUNCTION.code,message:"Options must be passed to basicComponentVerification function."}))}}},{"./braintree-error":15,"./errors":22}],15:[function(e,t,r){"use strict";e=e("./enumerate");function n(e){if(!n.types.hasOwnProperty(e.type))throw new Error(e.type+" is not a valid type.");if(!e.code)throw new Error("Error code required.");if(!e.message)throw new Error("Error message required.");this.name="BraintreeError",this.code=e.code,this.message=e.message,this.type=e.type,this.details=e.details}((n.prototype=Object.create(Error.prototype)).constructor=n).types=e(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),n.findRootError=function(e){return e instanceof n&&e.details&&e.details.originalError?n.findRootError(e.details.originalError):e},t.exports=n},{"./enumerate":21}],16:[function(e,t,r){"use strict";var n="3.103.0";t.exports={ANALYTICS_PREFIX:"web.",ANALYTICS_REQUEST_TIMEOUT_MS:2e3,ASSETS_URLS:{production:"https://assets.braintreegateway.com",sandbox:"https://assets.braintreegateway.com"},CLIENT_API_URLS:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},FRAUDNET_SOURCE:"BRAINTREE_SIGNIN",FRAUDNET_FNCLS:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",FRAUDNET_URL:"https://c.paypal.com/da/r/fb.js",BUS_CONFIGURATION_REQUEST_EVENT:"BUS_CONFIGURATION_REQUEST",GRAPHQL_URLS:{production:"https://payments.braintree-api.com/graphql",sandbox:"https://payments.sandbox.braintree-api.com/graphql"},INTEGRATION_TIMEOUT_MS:6e4,VERSION:n,INTEGRATION:"custom",SOURCE:"client",PLATFORM:"web",BRAINTREE_LIBRARY_VERSION:"braintree/web/"+n}},{}],17:[function(e,t,r){"use strict";var n=e("./braintree-error"),o=e("./errors");t.exports=function(t,e){e.forEach(function(e){t[e]=function(){throw new n({type:o.METHOD_CALLED_AFTER_TEARDOWN.type,code:o.METHOD_CALLED_AFTER_TEARDOWN.code,message:e+" cannot be called after teardown."})}})}},{"./braintree-error":15,"./errors":22}],18:[function(e,t,r){"use strict";var n=e("./constants").ASSETS_URLS;t.exports={create:function(e){return n.production}}},{"./constants":16}],19:[function(e,t,r){"use strict";var o=e("../lib/vendor/polyfill").atob,i=e("../lib/constants").CLIENT_API_URLS;t.exports=function(e){var t,r,n={attrs:{},configUrl:""};return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(e)?(r=(t=(t=e).split("_"))[0],t={merchantId:t.slice(2).join("_"),environment:r},n.environment=t.environment,n.attrs.tokenizationKey=e,n.configUrl=i[t.environment]+"/merchants/"+t.merchantId+"/client_api/v1/configuration"):(r=JSON.parse(o(e)),n.environment=r.environment,n.attrs.authorizationFingerprint=r.authorizationFingerprint,n.configUrl=r.configUrl,n.graphQL=r.graphQL),n}},{"../lib/constants":16,"../lib/vendor/polyfill":27}],20:[function(e,t,r){"use strict";var n=e("./braintree-error"),o=e("./assets"),i=e("./errors"),a="3.103.0";t.exports={create:function(e){var t=Promise.resolve();return e.client?Promise.resolve(e.client):(t=window.braintree&&window.braintree.client?t:o.loadScript({src:e.assetsUrl+"/web/"+a+"/js/client.min.js"}).catch(function(e){return Promise.reject(new n({type:i.CLIENT_SCRIPT_FAILED_TO_LOAD.type,code:i.CLIENT_SCRIPT_FAILED_TO_LOAD.code,message:i.CLIENT_SCRIPT_FAILED_TO_LOAD.message,details:{originalError:e}}))})).then(function(){return window.braintree.client.VERSION!==a?Promise.reject(new n({type:i.INCOMPATIBLE_VERSIONS.type,code:i.INCOMPATIBLE_VERSIONS.code,message:"Client (version "+window.braintree.client.VERSION+") and "+e.name+" (version "+a+") components must be from the same SDK version."})):window.braintree.client.create({authorization:e.authorization,debug:e.debug})})}}},{"./assets":12,"./braintree-error":15,"./errors":22}],21:[function(e,t,r){"use strict";t.exports=function(e,r){return r=null==r?"":r,e.reduce(function(e,t){return e[t]=r+t,e},{})}},{}],22:[function(e,t,r){"use strict";e=e("./braintree-error");t.exports={INVALID_USE_OF_INTERNAL_FUNCTION:{type:e.types.INTERNAL,code:"INVALID_USE_OF_INTERNAL_FUNCTION"},INSTANTIATION_OPTION_REQUIRED:{type:e.types.MERCHANT,code:"INSTANTIATION_OPTION_REQUIRED"},INCOMPATIBLE_VERSIONS:{type:e.types.MERCHANT,code:"INCOMPATIBLE_VERSIONS"},CLIENT_SCRIPT_FAILED_TO_LOAD:{type:e.types.NETWORK,code:"CLIENT_SCRIPT_FAILED_TO_LOAD",message:"Braintree client script could not be loaded."},METHOD_CALLED_AFTER_TEARDOWN:{type:e.types.MERCHANT,code:"METHOD_CALLED_AFTER_TEARDOWN"}}},{"./braintree-error":15}],23:[function(e,t,r){"use strict";t.exports=function(e,t,r){for(var n=0;n<e.length;n++)if(e[n].hasOwnProperty(t)&&e[n][t]===r)return e[n];return null}},{}],24:[function(e,t,r){"use strict";var n="3.103.0",o=e("./assign").assign;function s(e,t){var r=e.analyticsMetadata,e={gateway:"braintree","braintree:merchantId":e.gatewayConfiguration.merchantId,"braintree:apiVersion":"v1","braintree:sdkVersion":n,"braintree:metadata":JSON.stringify({source:r.source,integration:r.integration,sessionId:r.sessionId,version:n,platform:r.platform})};return o({},e,t)}t.exports=function(e,t,r){var n,o,i=e.gatewayConfiguration.androidPay,a="production"===e.gatewayConfiguration.environment?"PRODUCTION":"TEST";return 2===t?(n={apiVersion:2,apiVersionMinor:0,environment:a,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:i.supportedNetworks.map(function(e){return e.toUpperCase()})},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:s(e,{"braintree:authorizationFingerprint":i.googleAuthorizationFingerprint})}}]},r&&(n.merchantInfo={merchantId:r}),i.paypalClientId&&(o={type:"PAYPAL",parameters:{purchase_context:{purchase_units:[{payee:{client_id:i.paypalClientId},recurring_payment:!0}]}},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:s(e,{"braintree:paypalClientId":i.paypalClientId})}},n.allowedPaymentMethods.push(o))):(n={environment:a,allowedPaymentMethods:["CARD","TOKENIZED_CARD"],paymentMethodTokenizationParameters:{tokenizationType:"PAYMENT_GATEWAY",parameters:s(e,{"braintree:authorizationFingerprint":i.googleAuthorizationFingerprint})},cardRequirements:{allowedCardNetworks:i.supportedNetworks.map(function(e){return e.toUpperCase()})}},"TOKENIZATION_KEY"===e.authorizationType&&(n.paymentMethodTokenizationParameters.parameters["braintree:clientKey"]=e.authorization),r&&(n.merchantId=r),t&&(n.apiVersion=t)),n}},{"./assign":13}],25:[function(e,t,r){"use strict";t.exports=function(e){return JSON.parse(JSON.stringify(e))}},{}],26:[function(e,t,r){"use strict";t.exports=function(t){return Object.keys(t).filter(function(e){return"function"==typeof t[e]})}},{}],27:[function(e,t,r){"use strict";var n="function"==typeof atob?atob:o;function o(e){var t,r,n,o,i,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="";if(!new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$").test(e))throw new Error("Non base64 encoded input passed to window.atob polyfill");for(i=0;r=a.indexOf(e.charAt(i++)),t=(15&(n=a.indexOf(e.charAt(i++))))<<4|(o=a.indexOf(e.charAt(i++)))>>2&15,o=(3&o)<<6|63&a.indexOf(e.charAt(i++)),s+=String.fromCharCode((63&r)<<2|n>>4&3)+(t?String.fromCharCode(t):"")+(o?String.fromCharCode(o):""),i<e.length;);return s}t.exports={atob:function(e){return n.call(window,e)},_atob:o}},{}]},{},[9])(9)});