"use strict";(self.webpackChunkdjango_content_services=self.webpackChunkdjango_content_services||[]).push([[48],{3991:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});var s=r(6379),a=r(7090);class n extends s.V{constructor(e){super(),this.element=e;const t=e.classList.contains("promotional")?"promotional":"breakingnews";(new a.s).getFeatureBar(t).then((e=>{if(e){const t=document.createElement("div");t.innerHTML=e;const r=t.firstElementChild;r&&(r.removeAttribute("data-feature-bar"),this.element.replaceWith(r))}})).catch((e=>logger("error",e)))}}var i=n},9928:function(e,t,r){r.d(t,{d:function(){return a}});var s=r(4942);class a{get id(){return this._id}constructor(e){this.el=e,(0,s.Z)(this,"_id",void 0),(0,s.Z)(this,"analyticsValues",[]),this._id=e.getAttribute("data-article-id")}setAnalyticsValue(e,t){const r={name:e,value:t};this.analyticsValues.push(r)}getOuterHTML(){let e=this.el.getAttribute("data-evt-val")||"";if(e){this.analyticsValues.forEach((t=>{e=e.replace("${ "+t.name+" }",t.value.toString())}));const t=JSON.parse(e);for(const e in t)t[e]||delete t[e];this.el.setAttribute("data-evt-val",JSON.stringify(t))}return this.el.outerHTML}}},7090:function(e,t,r){r.d(t,{s:function(){return c}});var s=r(4942),a=r(4921),n=r(9928),i=r(6379),o=r(7717);class c extends i.V{constructor(...e){super(...e),(0,s.Z)(this,"DEFAULT_MODEL_TEMPLATE","vehicle-card-list")}async fetchList(e,t,r,s=0){let n="";switch(r){case a.RH.GLOBE_NEWSWIRE:n="/api-root/content_external/globe_newswire/";break;case a.RH.RSS:n=e;break;default:n=`/api-root/lists/${e}/expanded/?format=json&name=${t}&from=${s}&type=${r}&replace_video=false`}return fetch(n).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async fetchListHtml(e,t,r,s=0,i,c,l,h,d,m,_,g){let p="";switch(r){case a.RH.TRENDING:p="/api-root/audience/trending_articles_by_market/?limit=10&format=html";break;case a.RH.RELATED_ARTICLES:p=`/api-root/audience/related_stories/${e}/?limit=5&format=html&category=${t}&native_ad_enabled=${m}&native_ad_counter=${_}`;break;case a.RH.RSS:case a.RH.PARTNER_FEED:p=e+(e.indexOf("?")>-1?"&":"?")+`format=html&load_origin_urls=${i}&is_sponsored=${c}`;break;default:p=`/api-root/lists/${e}/expanded/?format=html&name=${t}&from=${s}&type=${r}&load_origin_urls=${i}&is_sponsored=${c}&slugs_accepted=${l}&slugs_excluded=${h}&replace_video=false&native_ad_enabled=${m}&native_ad_counter=${_}&bookmark_enabled=${g}`}return d&&(p+=`&template_name=${d}`),fetch(p).then((async e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html"),r=[];return this.getElements("article",t).forEach((e=>{r.push(new n.d(e))})),r})).catch((e=>(0,o.kg)("error",e)))}async fetchVideoPlaylist(e){return fetch(`/api-root/media/videos/playlists/${e}/player/json/`).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async fetchVideoPlaylistByTags(e,t,r){return fetch(`/api-root/media/videos/jw/${e}/${t}/${r}/player/`).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async fetchSailthruClient(e){return fetch(`/api-root/sailthru_client/user_profile/?token=${e}`).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async checkCaptcha(e){const t=`${location.origin.toString()}/api-root/verify/recaptcha/`;return fetch(t,{method:"POST",body:e}).then((async e=>e.json()))}async fetchEventLink(e){return fetch(`/api-root/subscription/events/${e}/event-meeting-url/`).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async fetchWeatherForRegionAndCity(e,t){return fetch(`/api-root/weather/current_conditions/${e}/${t}/?format=html`).then((async e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html");return this.getElement(".weather-widget__main-area",t)})).catch((e=>(0,o.kg)("error",e)))}async fetchDrivingMake(e=0,t=1){let r="";0!==e&&(r+=`&year=${e}`),t>1&&(""!==r&&(r+="&"),r+=`page=${t}`);return fetch(`/api-root/driving/makes/?${r}`).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async fetchDrivingModels(e){const t=new URLSearchParams;e.make&&t.set("make",e.make),e.bodystyle&&t.set("bodystyle",e.bodystyle),e.year&&t.set("year",e.year),e.price_min&&t.set("min_msrp",e.price_min.toString()),e.price_max&&t.set("max_msrp",e.price_max.toString()),e.seats&&t.set("number_of_seats",e.seats.toString()),e.power_source&&t.set("power_source",e.power_source.toString()),e.transmission&&t.set("transmission",e.transmission.toString()),e.page&&t.set("page",e.page.toString()),e.page_size&&t.set("page_size",e.page_size.toString()),e.ordering&&t.set("ordering",e.ordering.toString()),e.use_latest_year&&t.set("use_latest_year",e.use_latest_year.toString()),e.format&&t.set("format",e.format),e.template_name&&t.set("template_name",e.template_name||this.DEFAULT_MODEL_TEMPLATE);const r=["/api-root/driving/models/",t.toString()];return fetch(r.join("?")).then((async t=>"html"!==e.format?t.json():t)).catch((e=>(0,o.kg)("error",e)))}async fetchDrivingVehicles(e){const t=new URLSearchParams;e.id&&t.set("vehicle_id",e.id),e.clicked_id&&t.set("clicked_id",e.clicked_id),e.selected_ids&&t.set("selected_ids",e.selected_ids),e.disabled_ids&&t.set("disabled_ids",e.disabled_ids),e.make&&t.set("make",e.make),e.model&&t.set("model",e.model),e.bodystyle&&t.set("bodystyle",e.bodystyle),e.year&&t.set("year",e.year),e.page&&t.set("page",e.page.toString()),e.page_size&&t.set("page_size",e.page_size.toString()),e.format&&t.set("format",e.format),e.template_name&&t.set("template_name",e.template_name||this.DEFAULT_MODEL_TEMPLATE);const r=["/api-root/driving/vehicles/",t.toString()];return fetch(r.join("?")).then((async t=>"html"!==e.format?t.json():t)).catch((e=>console.error(e)))}async fetchDrivingVehicle(e){return fetch(`/api-root/driving/vehicles/${e}`).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async fetchDrivingSponsoredVehicle(e){const t=new URLSearchParams;e.vehicle_ids&&t.set("vehicle_ids",e.vehicle_ids.join(",")),e.bodystyles&&t.set("bodystyle",e.bodystyles.join(",")),e.msrps&&t.set("msrp",e.msrps.join(","));const r=["/api-root/driving/sponsored-car-comparison/",t.toString()];return fetch(r.join("?")).then((async e=>e.json())).catch((e=>(0,o.kg)("error",e)))}async getFeatureBar(e,t="html"){const r=[`/api-root/feature_bar/${e}`,`format=${t}`],s=await fetch(r.join("?"));if(s.ok)return"html"!==t?s.json():s.text();(0,o.kg)("error",s)}}}}]);
//# sourceMappingURL=ad8ac97227878109ef3848.js.map