"use strict";(self.webpackChunkdjango_content_services=self.webpackChunkdjango_content_services||[]).push([[33],{7725:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});var i=s(4942),n=s(4680),r=s(3538),o=s(4921),c=s(4374),a=s(6379),u=s(9468);const{header:{search:m}}=r.CLASS_NAME;class h extends a.V{constructor(t){if(super(),this.wrapper=t,(0,i.Z)(this,"toggle",void 0),(0,i.Z)(this,"input",void 0),(0,i.Z)(this,"form",void 0),(0,i.Z)(this,"submit",void 0),this.initToggle(),this.initInput(),this.initForm(),this.initSubmit(),!(this.toggle&&this.input&&this.form&&this.submit))return this.wrapper.remove(),this.toggle&&this.toggle.remove(),this.input&&this.input.remove(),this.form&&this.form.remove(),void(this.submit&&this.submit.remove());this.toggle.addEventListener(o.tw.CLICK,(()=>this.openSearchForm())),this.toggle.addEventListener(o.tw.KEYDOWN,(t=>{this.previousElementFocus(t)})),this.input.addEventListener(o.tw.KEYDOWN,(t=>{this.trackSearchFormInputKeyEvents(t)})),this.form.addEventListener(o.tw.SUBMIT,(()=>{(0,c.BE)("Search",this.input,!0)})),this.submit.addEventListener(o.tw.KEYDOWN,(t=>{this.trackSubmitSearchButtonKeyEvents(t)})),window.addEventListener(o.tw.CLICK,(t=>{const e=null==t?void 0:t.target;e!==this.toggle&&e.closest("button")!==this.toggle&&e!==this.input&&e.closest("input")!==this.input&&e!==this.submit&&e.closest("button")!==this.submit&&this.closeSearchForm()})),this.input.addEventListener(o.tw.CLICK,(t=>{t.preventDefault()})),u.N.getInstance().search=this}initToggle(){const t=this.getElement(`.${m.toggle}`,this.wrapper);t&&(this.toggle=t)}initInput(){const t=this.getElement(`#${m.inputId}`,this.wrapper);t&&(this.input=t)}initForm(){const t=this.getElement(`.${m.form}`,this.wrapper);t&&(this.form=t)}initSubmit(){const t=this.getElement(`.${m.submit}`,this.wrapper);t&&(this.submit=t)}openSearchForm(){this.toggle.classList.add(m.hiddenButton),this.toggle.setAttribute(o.fB.EXPANDED,"true"),this.form.classList.remove(m.hiddenForm),this.input.focus()}closeSearchForm(t){this.toggle.classList.remove(m.hiddenButton),this.toggle.setAttribute(o.fB.EXPANDED,"false"),this.form.classList.add(m.hiddenForm),t&&this.toggle.focus()}previousElementFocus(t){if(t.key===o.Jz.TAB&&t.shiftKey){const e=this.getElement(`[${n.ATTR_NAME.header.menu.target}='${r.CLASS_NAME.header.mainMenu._}']`);e&&(t.preventDefault(),e.focus(),this.closeSearchForm(!1))}else;}trackSearchFormInputKeyEvents(t){switch(this.previousElementFocus(t),t.key){case o.Jz.ESC:case o.Jz.ESC_IE:return void this.closeSearchForm(!0);default:return}}trackSubmitSearchButtonKeyEvents(t){switch(t.key){case o.Jz.ESC:case o.Jz.ESC_IE:return void this.closeSearchForm(!0);case o.Jz.TAB:if(t.shiftKey)return;return void this.closeSearchForm(!1);default:return}}focus(){this.toggle.classList.contains(m.hiddenButton)?this.input.focus():this.toggle.focus()}}var l=h},9468:function(t,e,s){s.d(e,{N:function(){return r}});var i=s(4942),n=s(4921);class r{constructor(){(0,i.Z)(this,"menus",{[n.lB.PRIMARY]:void 0,[n.lB.ACCOUNT]:void 0}),(0,i.Z)(this,"search",void 0)}static getInstance(){return this._instance||(this._instance=new this)}closeAllMenus(){for(const t of Object.values(this.menus))t&&t.closeMenu()}}(0,i.Z)(r,"_instance",void 0)},2238:function(t,e,s){s.d(e,{G:function(){return i}});const i="custom-event"},4374:function(t,e,s){s.d(e,{BE:function(){return r},M:function(){return u},uk:function(){return a},vk:function(){return c}});var i=s(2238),n=s(7717);const r=(t,e,s)=>{if(!e||!e.value)return;const{mparticleInputTextKey:n,inputTextValue:r}=o(e,s),c={event_name:"form_submission",control_fields:{mparticle:{keys:{form_name:"form_name",...n},mp_event_type:"Other"},permutive:{keys:{form_name:"form_name"}}},form_name:t,...r};document.dispatchEvent(new CustomEvent(i.G,{detail:c}))},o=(t,e)=>{let s={},i={};return e&&(s={input_text:t.value},i={input_text:"input_text"}),{mparticleInputTextKey:i,inputTextValue:s}},c=(t,e,s,r,o,c,a,u,m,h)=>{try{const n={filter_type:"filter_type"},l={filter_type:"Standard"},d={};t.length&&(n.make="make",d.make="car_make",l.make=t.join(",")),e.length&&(n.model="model",d.model="car_model",l.model=e.join(",")),(!e.length||e.length>1)&&(s.length&&(n.body_style="body_style",d.body_style="car_bodystyle",l.body_style=s.join(",")),r&&(n.min_price="min_price",d.min_price="min_price",l.min_price=r),o&&(n.max_price="max_price",d.max_price="max_price",l.max_price=o)),c.length&&(n.years="years",l.years=c.join(",")),a.length&&(n.seats="seats",l.seats=a.join(",")),u.length&&(n.power_sources="power_sources",l.power_sources=u.join(",")),m.length&&(n.transmissions="transmissions",l.transmissions=m.join(",")),n.sort="sort",l.sort=h||"popular";const p={event_name:"find_vehicle_submit",control_fields:{mparticle:{keys:n,mp_event_type:"Other"},permutive:{keys:d}},...l};document.dispatchEvent(new CustomEvent(i.G,{detail:p}))}catch(t){(0,n.kg)("error",t)}},a=(t,e)=>{try{const s={event_name:"click_to_section",control_fields:{mparticle:{keys:{source_section:"source_section",target_name:"target_name"}}},source_section:t,target_name:e};document.dispatchEvent(new CustomEvent(i.G,{detail:s}))}catch(t){(0,n.kg)("error",t)}},u=(t,e,s)=>{try{const n={event_name:"submission_error",control_fields:{mparticle:{keys:{error_message:"error_message",form_name:"form_name",input_id:"input_id"},mp_event_type:"UserContent"}},error_message:t,form_name:e,input_id:s};document.dispatchEvent(new CustomEvent(i.G,{detail:n}))}catch(t){(0,n.kg)("error",t)}}}}]);
//# sourceMappingURL=098cc1234fa67e2df6ad33.js.map