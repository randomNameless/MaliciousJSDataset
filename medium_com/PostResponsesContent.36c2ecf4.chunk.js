"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[2886],{16765:(e,n,i)=>{i.d(n,{M8:()=>u,Kl:()=>p,X2:()=>c});var t=i(45458),a=i(62544),o=i(11656),d=i(92571),s=i(19176),l=i(93240),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebarContent_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"responsesCount"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedRepliesParentEntity_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getCatalogSlugId_Catalog"}}]}}].concat((0,t.A)(s.DM.definitions),(0,t.A)(l.S.definitions))},m=([{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebarContent_threadedPostResponseConnection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ThreadedPostResponseConnection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}},{kind:"Field",name:{kind:"Name",value:"to"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedReplies_threadedPostResponseConnection"}}]}}].concat((0,t.A)(s.Dv.definitions)),{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebar_threadedCatalogResponseConnection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ThreadedCatalogResponseConnection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}},{kind:"Field",name:{kind:"Name",value:"to"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"posts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_post"}}]}}]}}]}}].concat((0,t.A)(a.UZ.definitions),(0,t.A)(d.uS.definitions),(0,t.A)(d.jC.definitions),(0,t.A)(o.gK.definitions))}),p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultCatalogResponses"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responsesCount"}},{kind:"Field",name:{kind:"Name",value:"threadedCatalogResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"defaultPagingOptions"}}},{kind:"Argument",name:{kind:"Name",value:"sortType"},value:{kind:"Variable",name:{kind:"Name",value:"sortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}},{kind:"Field",name:{kind:"Name",value:"to"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"posts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_post"}}]}}]}}]}}]}}].concat((0,t.A)(a.UZ.definitions),(0,t.A)(d.uS.definitions),(0,t.A)(o.gK.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebar_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebarContent_catalog"}}]}}].concat((0,t.A)(r.definitions))},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PagedThreadedCatalogResponsesQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogResponsesPagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"catalogId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"responsesCount"}},{kind:"Field",name:{kind:"Name",value:"responsesLocked"}},{kind:"Field",name:{kind:"Name",value:"threadedCatalogResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"catalogResponsesPagingOptions"}}},{kind:"Argument",name:{kind:"Name",value:"sortType"},value:{kind:"Variable",name:{kind:"Name",value:"sortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedCatalogResponsesSidebar_threadedCatalogResponseConnection"}}]}}]}}]}}]}}].concat((0,t.A)(m.definitions))}},86444:(e,n,i)=>{i.r(n),i.d(n,{PostResponsesContent:()=>G});var t=i(80296),a=i(39181),o=i(96540),d=i(46225),s=i(91052),l=i(88726),r=i(75636),m=i(2550),p=i(52290),c=i(28072),u=i(99731),k=i(56942),v=i(72130),g=i(49287),S=i(20239),N=i(42976),y=i(39160),h=i(65550),f=i(46879),C=i(74793),R=i(70694),E=i(44402),T=i(60603),b=i(80045),x=i(8389),F=i(86527),I=i(36557),_=i(85361),P=i(66274),D=i(43389),A=i(95087),w=i(79756),B=i(58192),V=["__typename"],L={paddingLeft:"24px"};function O(e){var n,i,t,d,s=e.post,l=e.threadDepth,r=e.parentEntity,m=(0,E.l)(),c=(0,v.$L)(),u=(0,g.jI)(),k=(0,o.useContext)(D.o),S=k.responseSortType,N=k.rootEntityId,y=(0,a.I)(_.X,{notifyOnNetworkStatusChange:!0,variables:{postId:s.id,sortType:S,paging:{limit:w.TC}}}),h=y.data,f=y.loading,C=y.fetchMore,R=null==h||null===(n=h.post)||void 0===n?void 0:n.threadedPostResponses,T=null!==(i=null==R?void 0:R.posts)&&void 0!==i?i:[],O=((null===(t=s.postResponses)||void 0===t?void 0:t.count)||0)-T.length,M=null==R||null===(d=R.pagingInfo)||void 0===d?void 0:d.next,j=(0,o.useCallback)((function(){if(M){M.__typename;var e=(0,b.A)(M,V);C({variables:{paging:e}})}}),[C,M]);return(0,o.useEffect)((function(){c.event("response.expanded",{postId:s.id,parentPostId:s.id,rootPostId:N,threadDepth:l,context:x.J.INLINE_POST_RESPONSE,source:u})}),[]),o.createElement(o.Fragment,null,o.createElement("div",{className:m([(0,A.C)(!1),L])},T.map((function(e,n){return o.createElement(Z,{key:e.id,response:e,parentEntity:r,threadDepth:l,omitBottomBorder:n===T.length-1,index:n})})),f&&o.createElement(P.V,null)),!f&&O>0&&o.createElement(p.a,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},o.createElement(I.kZ,{color:"ACCENT",scale:"M"},o.createElement(F.N,{linkStyle:"OBVIOUS",onClick:j},(0,B.s)(!1,O)))))}var M=i(36897),j=i(51772),z=i(60602),Q=i(88615),U=i(23406);function Z(e){var n,i=e.response,a=e.parentEntity,d=e.threadDepth,s=void 0===d?1:d,l=e.omitBottomBorder,r=e.index,m=(0,E.l)(),c=(0,T.e)(!1),u=(0,t.A)(c,4),k=u[0],v=u[1],S=u[3],N=(0,T.e)(!1),y=(0,t.A)(N,4),h=y[0],f=y[2],b=y[3],x=(0,o.useContext)(U.u),F=x.addContinueThisThreadSidebar,I=x.openSidebar,_=(0,o.useCallback)((function(){F(i,!0),window.requestAnimationFrame((function(){return I()}))}),[F,i,I]),P=(0,R.kb)(i),D=null===(n=i.creator)||void 0===n?void 0:n.name,B=D?"Replying to ".concat(D):void 0;return o.createElement(z.a.Provider,{value:{inResponseToEntityId:a.id,inResponseToEntityTypename:"Post",threadDepthFromRootEntity:s,threadDepthOnPage:s,isThreadedResponsesVisible:k,showThreadedResponses:v,toggleThreadedResponses:S,toggleCreateReply:b,hideCreateReply:f,loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1,showContinueThisThreadSidebar:_}},o.createElement(p.a,{borderBottom:l?void 0:"neutral.primary"},P?o.createElement(M.L,{responsePost:i,parentEntity:a,index:r,omitBottomBorder:!0}):o.createElement(j.N,{storyResponse:i,parentEntity:a,omitBottomBorder:!0}),h&&o.createElement("div",{className:m((0,A.C)(k,!0))},o.createElement(g.Ne,{source:{susiEntry:(0,w.gz)("Post")},extendSource:!0},o.createElement(C.jG,{localStorageId:"".concat(i.id,"-reply")},o.createElement(Q.Q,{parentEntityId:i.id,parentEntityTypename:"Post",hideReplyEditing:f,placeholder:B,showEditorHeader:!1})))),k&&o.createElement(O,{post:i,threadDepth:s+1,parentEntity:a})))}var H=i(47687),K=i(52798),X=i(16022),$=i(11211),q=i(21044),J=N.CD.TOP;function G(e){var n,i,C,R,E,T,b,x=e.post,F=(0,S.D)(),I=(0,v.$L)(),P=(0,g.jI)(),A=(0,y.d4)((function(e){return{isBot:e.client.viewerIsBot,authDomain:e.config.authDomain}})),w=A.isBot,B=A.authDomain,V=(0,m.A)().viewerId,L=(0,o.useContext)(U.u).openSidebar,O=(0,o.useState)(N.IZ.NOT_DISTRIBUTED),M=(0,t.A)(O,2),j=M[0],z=M[1],Q=(0,r.z)({name:"enable_post_bottom_responses_input",placeholder:!1}),G=(0,r.z)({name:"num_post_bottom_responses_to_show",placeholder:"3"}),W=x.id,Y=(0,a.I)(_.X,{variables:{postId:W,sortType:J,paging:{limit:parseInt("".concat(G))}},ssr:w}).data,ee=(0,a.I)(s.i).data,ne=(0,q.J)(),ie=ne.hidePopoverMenu,te=ne.handleClickOverflowDots,ae=ne.isPopoverMenuVisible,oe=(0,H.S)(I,P,ie,W),de=(0,H.n)(ie,W),se=null!==(n=null===(i=x.postResponses)||void 0===i?void 0:i.count)&&void 0!==n?n:0,le=null!==(C=null==Y||null===(R=Y.post)||void 0===R||null===(E=R.threadedPostResponses)||void 0===E?void 0:E.posts)&&void 0!==C?C:[],re=V===(null===(T=x.creator)||void 0===T?void 0:T.id),me=null==x||null===(b=x.collection)||void 0===b?void 0:b.viewerEdge.isEditor,pe=re||me,ce=se?"16px":"0",ue=(0,h.L)()?"-".concat(d.mW,"px"):"0";return o.createElement(D.o.Provider,{value:{setIsSavingResponse:function(){},responsesLocked:x.responsesLocked,editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){},setInResponseToQuote:function(){},responseDistribution:j,setResponseDistribution:z,responseSortType:J,rootEntityId:W,rootEntityTypename:"Post",isResponsesSidebarVisible:!1}},o.createElement(p.a,{marginBottom:se?{xs:"64px",sm:"64px",md:"88px",lg:"88px",xl:"88px"}:"54px"},o.createElement(l.i,{marginBottom:{xs:"64px",sm:"64px",md:"72px",lg:"72px",xl:"72px"},borderColor:F.colorTokens.border.neutral.primary.base}),o.createElement(c.P,{size:"app"},o.createElement(p.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},o.createElement(k.DZ,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},se?o.createElement(o.Fragment,null,"Responses (",se,")"):"No responses yet"),o.createElement(p.a,{display:"flex",gap:"18px"},o.createElement(K.I,null),pe&&o.createElement($.U,{responsesLocked:x.responsesLocked,infoLink:(0,f.C4)(B,W),handleClickOverflowDots:te,isPopoverMenuVisible:ae,hidePopoverMenu:ie,lockResponses:oe,unlockResponses:de,parentEntityTypename:"Post"}))),Q&&o.createElement(p.a,{margin:{xs:"32px ".concat(ue," ").concat(ce),sm:"32px ".concat(ue," ").concat(ce),md:"40px 0 ".concat(ce),lg:"40px 0 ".concat(ce),xl:"40px 0 ".concat(ce)},paddingBottom:se?"6px":void 0,borderBottom:se?"neutral.primary":void 0},o.createElement(X.n,{parentEntityId:W,parentEntityTypename:"Post",viewerPronouns:(null==ee?void 0:ee.viewer)||void 0,scrollIntoView:!1,autofocus:!1,showPublishCheckbox:!0})),le.map((function(e,n){return o.createElement(Z,{key:e.id,response:e,parentEntity:x,index:n})})),!x.responsesLocked&&le.length<se&&o.createElement(p.a,{marginTop:"32px"},o.createElement(u.$n,{onClick:L,width:{xs:"100%",sm:"100%",md:"min-width",lg:"min-width",xl:"min-width"}},"See all responses")))))}},47687:(e,n,i)=>{i.d(n,{S:()=>d,n:()=>s});var t=i(80296),a=i(95420),o=i(79083),d=function(e,n,i,d){var s=(0,a.n)(o.OH,{variables:{postId:d},update:function(t){e.event("responses.locked",{postId:d,source:n}),l(t,d,!0,i)}});return(0,t.A)(s,1)[0]},s=function(e,n){var i=(0,a.n)(o.Rz,{variables:{postId:n},update:function(i){l(i,n,!1,e)}});return(0,t.A)(i,1)[0]},l=function(e,n,i,t){e.modify({id:e.identify({__typename:"Post",id:n}),fields:{responsesLocked:function(){return i}}}),t()}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/PostResponsesContent.36c2ecf4.chunk.js.map