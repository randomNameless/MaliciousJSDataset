/*! For license information please see 2527.a0afad8a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[2527],{52752:(e,t,n)=>{n.d(t,{A:()=>a});var r,o=n(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const a=function(e){return o.createElement("svg",i({width:25,height:25,className:"svgIcon-use"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M5 12.5q0 .828.586 1.414.585.585 1.414.586.828 0 1.414-.586.585-.586.586-1.414 0-.828-.586-1.414A1.93 1.93 0 0 0 7 10.5q-.828 0-1.414.586-.585.586-.586 1.414m5.617 0q0 .828.586 1.414.587.585 1.414.586.828 0 1.414-.586t.586-1.414-.586-1.414a1.93 1.93 0 0 0-1.414-.586q-.827 0-1.414.586-.586.586-.586 1.414m5.6 0q0 .828.586 1.414.585.585 1.432.586.827 0 1.413-.586t.587-1.414q0-.828-.587-1.414a1.93 1.93 0 0 0-1.413-.586q-.847 0-1.432.586t-.587 1.414z"})))}},17180:(e,t,n)=>{n.d(t,{El:()=>i,Ox:()=>r,_5:()=>o});var r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},o=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))},i=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"NOT_FOUND"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},8389:(e,t,n)=>{var r;n.d(t,{J:()=>r}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(r||(r={}))},52798:(e,t,n)=>{n.d(t,{I:()=>u});var r,o=n(96540),i=n(86527),a=n(5600),s=n(44402);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}const c=function(e){return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,viewBox:"0 0 25 25"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z",clipRule:"evenodd"})))};var u=function(){var e=(0,s.l)();return o.createElement(a.G,{tooltipText:"View community guidelines"},o.createElement(i.N,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},o.createElement(c,null)))}},36897:(e,t,n)=>{n.d(t,{L:()=>W});var r=n(45458),o=n(80296),i=n(96540),a=n(82487),s=n(43389),l=n(92554),c=n(52290),u=n(36557),d=n(44402),p=n(58262),m=n(21771),f=n(58887),h=n(96009),v=n(64467),g=n(73711),y=n(42976),E=n(94644);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=250,R=5;function w(e,t,n){return"char"===e&&t>x||"line"===e&&n>R}function O(e){var t=e.paragraphs,n=e.truncateStrategy,r=e.isExpanded,o=(0,d.l)(),a=0,s=0,l="none"!==n&&!r;return i.createElement("pre",{className:o({whiteSpace:"pre-wrap"})},t.map((function(e){if(!r&&w(n,a,s))return null;var t=(null==e?void 0:e.text)||"";a+=t.length||0,s+=t.split("\n").length||0;var d=k(k({},e),{},{dropCapImage:null,hasDropCap:null}),p=!r&&w(n,a,s);if(p&&"char"===n){var m=x-(a-t.length||0);d.markups=d.markups.reduce((function(e,t){if(t.start<m){var n=k({},t);n.end>m&&(n.end=m),e.push(n)}return e}),[]),d.text=(0,E.Mc)(t,m)}return i.createElement(c.a,{padding:"5px 0px",key:e.name||e.id},i.createElement(u.kZ,{scale:"M",color:"DARKER",tag:"div"},i.createElement("div",{className:o({lineHeight:"24px"})},i.createElement(g.O,{paragraph:d,richTextStyle:"FULL_PAGE",paragraphStyle:y.FU.P}),l&&p&&"...")))})).filter((function(e){return!!e})))}var S,T=n(57975),P=n(60602),I=n(51739),D=n(75636),C=n(86527),N=n(72130),A=n(49287);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(null,arguments)}const L=function(e){return i.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21"},e),S||(S=i.createElement("path",{d:"m8.562 6.138 4.43 4.362-4.43 4.362-.554-.554 3.808-3.808-3.808-3.808",clipRule:"evenodd"})))};var M;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(null,arguments)}const B=function(e){return i.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:29,height:29},e),M||(M=i.createElement("path",{d:"M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4S4 8.21 4 13.384s4.53 9.385 10.1 9.385c1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.63.63 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.4 5.4 0 0 1-.154-.75zm-3.85 1.324-.083-.28-.388.12a9.7 9.7 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262s4.03-8.263 8.99-8.263c4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"})))};var V=n(65550),F=n(79756);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H="Show more replies",G=function(e){var t=e.response,n=t.postResponses,r=t.id,o=(null==n?void 0:n.count)||0,a=i.useContext(P.a),l=a.inResponseToEntityId,p=a.inResponseToEntityTypename,m=a.isThreadedResponsesVisible,f=a.toggleThreadedResponses,h=a.threadDepthOnPage,v=a.toggleCreateReply,g=a.loadThreadedResponses,y=a.isThreadedResponsesQueryCalled,E=a.showContinueThisThreadSidebar,b=a.threadDepthFromRootEntity,k=i.useContext(s.o),x=k.rootEntityId,R=k.rootEntityTypename,w=(0,N.$L)(),O=(0,A.jI)(),S=(0,d.l)(),j=function(e){return function(t){return{fill:e?t.colorTokens.background.accent.primary.base:t.colorTokens.foreground.neutral.primary.base,height:"25px",width:"25px"}}},M=!!(0,D.z)({name:"enable_lite_continue_this_thread",placeholder:!1}),_=h>=I.qg,U=_&&o>0,G=(0,V.L)(),Q=function(e,t){return i.createElement(c.a,{display:"flex",alignItems:"center"},i.createElement(B,{className:S(j(U)),"aria-label":"responses"}),i.createElement(c.a,{tag:"div",marginLeft:"8px",marginTop:"2px"},i.createElement(u.kZ,{color:e,tag:"p",scale:"M"},t)))},z=Z(Z(Z({postId:r},(0,F.rz)(l,p)),(0,F.DL)(x,R)),{},{threadDepth:b,source:O}),q=t.mediumUrl?i.createElement(C.N,{linkStyle:"SUBTLE",href:t.mediumUrl},Q("ACCENT",H)):null,K=function(){E(),w.event("response.continue",Z({},z))},Y=M?i.createElement(C.N,{linkStyle:"SUBTLE",onClick:K},Q("ACCENT",H)):q;return i.createElement(c.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},i.createElement(c.a,{display:"flex",alignItems:"center"},i.createElement(T.W,{buttonStyle:"SUBTLE_MARGIN",post:t,shouldShowResponsiveLabelText:!0,susiEntry:(0,F.gz)(p)}),i.createElement(c.a,{marginLeft:"12px",display:"flex",alignItems:"center",height:"25px"},U?Y:o>0&&i.createElement(C.N,{linkStyle:"SUBTLE",onClick:function(){!function(e){e?w.event("response.collapsed",Z({},z)):e||w.event("response.expanded",Z({},z))}(m),f()}},Q("DARKER",function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")}(o,m))))),U?i.createElement(c.a,{marginTop:"5px"},i.createElement(C.N,{linkStyle:"SUBTLE",onClick:K},i.createElement(L,{className:S(j(!0)),height:"26px",width:"26px"}))):!G&&i.createElement(c.a,{paddingRight:"6px"},i.createElement(u.kZ,{color:"DARKER",scale:"M"},i.createElement(C.N,{onClick:function(){_?K():(y||g(),v())},inline:!0},"Reply"))))},Q=n(8381),z=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},q=function(e){var t,n=e.simpleResponse,r=e.parentEntity,a=e.omitBottomBorder,v=n.creator,g=n.content,y=n.mediumUrl,E=i.useState(!1),b=(0,o.A)(E,2),k=b[0],x=b[1],w=i.useRef(null),S=(0,d.l)(),T=i.useContext(s.o).sidebarRef;(0,p.n)(w,n,T);var P=null==g||null===(t=g.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(v&&g&&P&&y))return null;var I,D=(I=P.map((function(e){return e.text||""}))).join("").length>320?"char":I.join("\n").split("\n").length>R?"line":"none",C="none"!==D,N=C&&!k;return i.createElement(m.V,{post:n,presentationContext:"POST_PREVIEW",isFullPost:!C},i.createElement(c.a,{paddingTop:"25px",paddingBottom:"16px",borderBottom:a?void 0:"neutral.primary",ref:w},i.createElement(f.T,{response:n,responseType:Q.a.SIMPLE,parentEntity:r}),i.createElement(h.c,{inResponseToMediaResource:n.inResponseToMediaResource}),i.createElement(c.a,{marginTop:"5px",wordBreak:"break-word"},i.createElement(l.r.Provider,{value:!0},i.createElement(O,{paragraphs:P,truncateStrategy:D,isExpanded:k}))),N&&i.createElement("button",{onClick:function(){return x(!0)},className:S(z)},i.createElement(u.kZ,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),i.createElement(G,{response:n})))},K=n(78265),Y=n(16022),$=n(15371),W=function(e){var t,n=e.responsePost,l=e.index,c=e.parentEntity,u=e.omitBottomBorder,d=(0,i.useState)(!1),p=(0,o.A)(d,2),m=p[0],f=p[1],h=(0,i.useState)(null),v=(0,o.A)(h,2),g=v[0],y=v[1],E=(0,i.useContext)(s.o),b=E.editingResponsesAtIndices,k=E.setEditingResponsesAtIndices;return(0,i.useEffect)((function(){if(m&&!b.includes(l)&&k([].concat((0,r.A)(b),[l])),!m&&b.includes(l)){var e=b.filter((function(e){return e!==l}));k(e)}}),[m,b,k]),n?m?i.createElement(a.o.Provider,{value:{isEditing:m,setIsEditing:f,latestRev:n.latestRev,createdAt:n.createdAt,setEditingQuote:y,editingQuote:g}},i.createElement(A.Ne,{source:{index:l},key:n.id,extendSource:!0},i.createElement(Y.n,{type:K.o.edit,parentEntityId:c.id,parentEntityTypename:c.__typename,responseId:n.id,initialValue:null===(t=n.content)||void 0===t?void 0:t.bodyModel,parentCreatorName:"Catalog"===c.__typename?c.creator.username:"",parentEntitySlug:"Catalog"===c.__typename?(0,$.KY)(c):""}))):i.createElement(a.o.Provider,{value:{isEditing:m,setIsEditing:f,setEditingQuote:y,editingQuote:g}},i.createElement(A.Ne,{source:{index:l},key:n.id,extendSource:!0},i.createElement(q,{parentEntity:c,simpleResponse:n,omitBottomBorder:u}))):null}},82487:(e,t,n)=>{n.d(t,{o:()=>r});var r=n(96540).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},58887:(e,t,n)=>{n.d(t,{T:()=>ve});var r=n(80296),o=n(96540),i=n(70600),a=n(36469),s=n(88474),l=n(18677),c=n(39),u=n(44402),d=function(e){var t=e.title,n=e.backgroundColor,r=e.color,i=void 0===r?"white":r,a=(0,u.l)(),s=(0,c.Z)({name:"detail",scale:"XS",color:"LIGHTER"});return o.createElement("div",{className:a([s,function(){return{color:i,backgroundColor:n,borderRadius:"4px",marginLeft:"4px",padding:"0 4px"}}])},t)},p=n(27721),m=n(23393),f=n(52290),h=n(41299),v=n(86527),g=n(5600),y=n(36557),E=n(49287),b=n(20239),k=n(39160),x=n(52752),R=n(46879),w=n(95420),O=n(69733),S=n(43629),T=n(43389),P=n(79756),I=n(14782),D=n(92759),C=n(72130),N=n(91830),A=function(e,t){e.modify({id:e.identify({__typename:"Post",id:t}),fields:{postResponses:function(e,t){return t.DELETE},threadedPostResponses:function(e,t){return t.DELETE}}})},j=function(e,t){e.modify({id:e.identify({__typename:"Catalog",id:t}),fields:{responsesCount:function(e,t){return t.DELETE},threadedCatalogResponses:function(e,t){return t.DELETE}}})},L=function(e){var t,n,i=e.response,a=e.parentEntity,s=e.hidePopoverMenu,l=(0,p.R)().value,c=o.useContext(T.o).rootEntityTypename,u=(0,C.$L)(),d=(0,E.jI)(),m=(0,O.wA)(),f=o.useState(!1),h=(0,r.A)(f,2),g=h[0],y=h[1],b=function(){return y(!1)},k=null==i||null===(t=i.creator)||void 0===t?void 0:t.id,x=o.useCallback((function(e,t,n){"Post"===t&&A(e,n),"Catalog"===t&&j(e,n)}),[]),R=(0,w.n)(S.k,{variables:{targetUserId:k||"",userId:(null==l?void 0:l.id)||""},update:function(e){x(e,a.__typename,a.id)},onCompleted:function(){b();var e=(0,P.bY)(c);m((0,N.MZ)({message:"Responses by this user have been hidden".concat(e?" from this ".concat(e):"",".")}))}}),L=(0,r.A)(R,1)[0],M=(null==l?void 0:l.id)===(null===(n=a.creator)||void 0===n?void 0:n.id);return(null==l?void 0:l.id)===k?null:l&&k&&M?o.createElement(o.Fragment,null,o.createElement(I.q3,null,o.createElement(v.N,{onClick:function(){y(!0)}},"Block this author")),g&&o.createElement(D.D,{onConfirm:function(){u.event("user.blocked",{userId:k,source:d}),L()},isVisible:g,isInResponsesSidebar:!0,hide:function(){b(),s()}})):null},M=n(60602),_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteResponseMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"responseId"}}}]}]}}]},B=n(92162),V=n(64467);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,V.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e,t,n){e.modify({id:"Post:".concat(t),fields:{postResponses:function(e){var t;return U(U({},e),{},{count:(null!==(t=e.count)&&void 0!==t?t:1)-1})},threadedPostResponses:function(e,t){var r=t.readField;return U(U({},e),{},{posts:((null==e?void 0:e.posts)||[]).filter((function(e){return r("id",e)!==n}))})}}})},H=function(e,t,n){e.modify({id:"Catalog:".concat(t),fields:{threadedCatalogResponses:function(e,t){var r=t.readField;return U(U({},e),{},{posts:((null==e?void 0:e.posts)||[]).filter((function(e){return r("id",e)!==n}))})},responsesCount:function(e){return(null!=e?e:1)-1}}})},G=function(e){var t,n,i=e.response,a=e.hidePopoverMenu,s=o.useState(!1),l=(0,r.A)(s,2),c=l[0],u=l[1],d=(0,C.$L)(),m=(0,E.jI)(),f=(0,O.wA)(),h=(0,p.R)().value,g=o.useContext(M.a),y=g.inResponseToEntityId,b=g.inResponseToEntityTypename,k=o.useContext(T.o).sidebarRef,x=(0,w.n)(_,{variables:{responseId:i.id},update:function(e){if("Post"===b)Z(e,y,i.id);else{if("Catalog"!==b)return;H(e,y,i.id)}d.event("responses.removed",{postId:i.id,source:m}),f((0,N.MZ)({message:"Successfully deleted response."})),a()}}),R=(0,r.A)(x,1)[0];return null!=h&&h.id&&(null==h?void 0:h.id)===(null===(t=i.creator)||void 0===t?void 0:t.id)?(null!=k&&k.current&&(n=k.current.scrollTop),o.createElement(o.Fragment,null,o.createElement(I.q3,null,o.createElement(v.N,{onClick:function(){return u(!0)}},"Delete")),c&&o.createElement(B.G,{isDialogOpen:c,cancelDialogAction:function(){u(!1),null!=k&&k.current&&(k.current.scrollTop=n)},confirmDialogAction:R,responseDistribution:i.responseDistribution,hide:function(){return u(!1)}}))):null},Q=n(82487),z=n(83858),q=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,r=e.confirmDialogAction;return o.createElement(z.d,{isDialogOpen:t,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:n,confirmDialogAction:r,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},K=n(42976),Y=function(e){var t,n,i=e.response,a=(0,p.R)().value,s=o.useState(!1),l=(0,r.A)(s,2),c=l[0],u=l[1],d=o.useContext(Q.o),m=d.setIsEditing,f=d.isEditing,h=d.setEditingQuote,g=(null===(t=i.creator)||void 0===t?void 0:t.id)===(null==a?void 0:a.id),y=o.useContext(T.o).sidebarRef;if(null!=y&&y.current&&(n=y.current.scrollTop),!g)return null;var E=i.responseDistribution===K.IZ.DISTRIBUTED;return o.createElement(o.Fragment,null,o.createElement(I.q3,null,o.createElement(v.N,{onClick:function(){E?u(!0):(i.inResponseToMediaResource&&h(i.inResponseToMediaResource.mediumQuote),m(!f))}},"Edit this response")),c&&o.createElement(q,{isDialogOpen:c,cancelDialogAction:function(){u(!1),null!=y&&y.current&&(y.current.scrollTop=n)},confirmDialogAction:function(){u(!1),null!=y&&y.current&&(y.current.scrollTop=n),i.inResponseToMediaResource&&h(i.inResponseToMediaResource.mediumQuote),m(!f)}}))},$=n(49603),W=function(e){var t,n,i,a=e.responseToBeHidden,s=e.parentEntity,l=e.hidePopoverMenu,c=(0,p.R)().value,u=(0,O.wA)(),d=(0,C.$L)(),m=(0,E.jI)(),f=o.useContext(M.a),h=f.inResponseToEntityId,g=f.inResponseToEntityTypename,y=o.useContext(T.o).responseSortType,b=(null==c?void 0:c.id)===(null===(t=s.creator)||void 0===t?void 0:t.id),k="Post"===s.__typename&&(null==s||null===(n=s.collection)||void 0===n?void 0:n.viewerEdge.isEditor),x=(null==c?void 0:c.id)===(null===(i=a.creator)||void 0===i?void 0:i.id),R=(0,w.n)($.we,{variables:{postResponseId:a.id,parentPostId:h},update:function(e){!function(e){var t=e.inResponseToPostId,n=e.responseToBeHiddenId,r=e.responseSortType,o=e.dispatch,i=e.source,a=e.reporter,s=e.hidePopoverMenu;Z(e.cache,t,n),o((0,N.MZ)({toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:n,parentPostId:t,sortType:r}})),a.event("response.hidden",{postId:n,source:i}),s()}({cache:e,inResponseToPostId:h,responseToBeHiddenId:a.id,responseSortType:y,dispatch:u,source:m,reporter:d,hidePopoverMenu:l})}}),S=(0,r.A)(R,1)[0],P=(0,w.n)($.u7,{variables:{catalogResponseId:a.id,parentCatalogId:h},update:function(e){!function(e){var t=e.inResponseToCatalogId,n=e.responseToBeHiddenId,r=e.responseSortType,o=e.dispatch,i=e.hidePopoverMenu,a=e.reporter,s=e.source;H(e.cache,t,n),o((0,N.MZ)({toastStyle:"HIDE_CATALOG_RESPONSE",extraParams:{responseId:n,parentCatalogId:t,sortType:r}})),a.event("response.hidden",{postId:n,source:s}),i()}({cache:e,inResponseToCatalogId:h,responseToBeHiddenId:a.id,responseSortType:y,dispatch:u,source:m,reporter:d,hidePopoverMenu:l})}}),D=(0,r.A)(P,1)[0],A=o.useCallback((function(){"Post"===g&&S(),"Catalog"===g&&D()}),[g]);return x||"Catalog"===s.__typename&&!b||"Post"===s.__typename&&!b&&!k?null:o.createElement(I.q3,null,o.createElement(v.N,{onClick:A},"Hide this response"))},J=n(58168),X=n(83573),ee=n(21335),te=n(43634),ne=n(71984),re=function(e){var t,n=e.response,i=e.parentEntity,a=e.hidePopoverMenu,s=(0,p.R)().value,l=(0,ee.cd)(n.creator).viewerEdge,c=(0,C.$L)(),u=(0,E.jI)(),d=o.useState(!1),m=(0,r.A)(d,2),f=m[0],h=m[1],g=i.__typename,y=function(e){var t,n=e.response,i=e.parentEntityTypename,a=e.parentEntityId,s=n.id,l=(null===(t=n.creator)||void 0===t?void 0:t.id)||"",c=(0,O.wA)(),u=(0,w.n)(X.s,{variables:{targetPostId:s,targetAuthorId:l,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){c((0,N.MZ)({message:"Successfully reported post."}))}}),d=(0,r.A)(u,2),p=d[0],m=d[1];return{reportStory:o.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return p({variables:{targetPostId:s,targetAuthorId:l,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},update:function(e){n&&("Post"===i&&A(e,a),"Catalog"===i&&j(e,a))}})}),[n,p]),error:null==m?void 0:m.error,loading:null==m?void 0:m.loading}}({response:n,parentEntityTypename:g,parentEntityId:i.id}),b=y.reportStory,k=(null==s?void 0:s.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);if(!n.creator||k)return null;var x="Post"===i.__typename?{post:i}:{};return o.createElement(o.Fragment,null,o.createElement(I.q3,null,null!=s&&s.id?o.createElement(v.N,{onClick:function(){return h(!0)}},"Report this response"):o.createElement(te.r,(0,J.A)({operation:"register",susiEntry:(0,P.gz)(g)},x),"Report this response")),o.createElement(ne.e,{onSubmit:function(e,t){return c.event("response.flagged",{postId:n.id,reason:t,source:u}),b({alsoBlockAuthor:e,reportReason:t})},isVisible:f,hide:function(){h(!1),a()},type:"response",alreadyBlocking:!(null==l||!l.isBlocking)}))},oe=n(1491),ie=n(1722),ae=n(56743),se=n(51771),le=function(e){var t=e.response,n=e.hidePopoverMenu,r=(0,oe.f)(),i=(0,C.$L)(),a=(0,p.R)().value,s=(0,E.jI)(),l=(0,ie.h)(t),c=(0,k.Dy)((function(e){return e.multiVote.clapsPerPost})),u=(0,O.wA)(),d=(0,se.F)(c,t,l.viewerEdge),m=d.clapCount,f=d.viewerClapCount,h=o.useCallback((function(){r(t,(null==a?void 0:a.id)||"",-f),u((0,ae.K7)({postId:t.id,clapCount:m-f,viewerClapCount:0,viewerHasClappedSinceFetch:!0})),i.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:f,source:s}),n()}),[n,t.id,null==a?void 0:a.id,m,f,r]);return null!=a&&a.id&&0!==m&&0!==f?o.createElement(I.q3,null,o.createElement(v.N,{onClick:h},"Undo applause for this response")):null},ce=n(8381),ue=n(65550),de={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},pe=function(e){var t=e.response,n=e.responseType,r=e.parentEntity,i=e.isPopoverMenuVisible,a=e.hidePopoverMenu,s=(0,u.l)(),l=t.creator,c=(0,ue.L)(),d=o.useRef(null);return o.useEffect((function(){var e=function(e){var t;null!=d&&null!==(t=d.current)&&void 0!==t&&t.contains(e.target)||a()};if(i)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[i]),t&&l?o.createElement("div",{className:s(de),ref:d},o.createElement(I.Ni,null,o.createElement(re,{response:t,parentEntity:r,hidePopoverMenu:a}),o.createElement(W,{responseToBeHidden:t,parentEntity:r,hidePopoverMenu:a}),o.createElement(L,{response:t,parentEntity:r,hidePopoverMenu:a}),n===ce.a.SIMPLE&&o.createElement(le,{response:t,hidePopoverMenu:a}),n===ce.a.SIMPLE&&!c&&o.createElement(Y,{response:t}),o.createElement(G,{response:t,hidePopoverMenu:a}))):null},me=n(29977),fe=n(22841),he=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},ve=function(e){var t,n=e.response,c=e.responseType,w=e.parentEntity,O=(0,p.R)().value,S=(0,u.l)(),T=(0,b.D)(),I=n.creator,D=n.mediumUrl,C=n.createdAt,N=o.useState(!1),A=(0,r.A)(N,2),j=A[0],L=A[1],M=(0,k.d4)((function(e){return e.config.authDomain})),_=(0,s.E)(I),B=(0,o.useCallback)((function(e){e.nativeEvent.stopPropagation(),L(!j)}),[j]);if(!n||!I||!D)return null;var V=(null===(t=w.creator)||void 0===t?void 0:t.id)===I.id,F=(null==O?void 0:O.id)===I.id,U=null;V?U=o.createElement(d,{title:"Author",backgroundColor:T.colorTokens.background.accent.primary.base}):F&&(U=o.createElement(d,{title:"You",backgroundColor:T.colorTokens.background.neutral.secondary.base,color:T.colorTokens.foreground.neutral.secondary.base}));var Z=function(e,t){return e&&t===ce.a.SIMPLE}(n,c)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt);return o.createElement(o.Fragment,null,o.createElement(f.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},o.createElement(f.a,{display:"flex",flexDirection:"row",alignItems:"center"},o.createElement(m.H8,{scale:"XS",user:I,showBadge:!0}),o.createElement(f.a,{paddingLeft:"12px"},o.createElement(f.a,{display:"flex",alignItems:"center"},o.createElement(h.R,{placement:"top",targetDistance:me.f,mouseEnterDelay:g.A,mouseLeaveDelay:200,noArrow:!0,popoverRenderFn:function(){return o.createElement(fe.J,{user:I,trackingV2:!0})}},o.createElement(v.N,{href:(0,R.EpC)(I,M)},o.createElement(f.a,{display:"flex",alignItems:"center"},o.createElement(f.a,{display:"flex",alignItems:"baseline"},o.createElement(y.kZ,{scale:"M",color:"DARKER",clamp:1},I.name),o.createElement(i.U,{user:I,scale:"S",clamp:1,paddingLeft:"4px"})),_&&o.createElement(f.a,{marginLeft:"2px",marginTop:"1px"},o.createElement(a.b,{size:"S"}))))),U),o.createElement(v.N,{href:D,linkStyle:"SUBTLE",inline:!0,follow:!1},o.createElement(y.kZ,{scale:"M"},o.createElement(l.f,{timestamp:null!=C?C:0}),Z&&o.createElement(o.Fragment,null,"Â (edited)"))))),o.createElement(v.N,{onClick:B,inline:!0,className:S(he)},o.createElement(x.A,null))),j&&o.createElement("div",{className:S({position:"relative"})},o.createElement(E.Ne,{source:{susiEntry:(0,P.gz)(w.__typename)},extendSource:!0},o.createElement(pe,{response:n,responseType:c,parentEntity:w,isPopoverMenuVisible:j,hidePopoverMenu:function(){return L(!1)}}))))}},66274:(e,t,n)=>{n.d(t,{V:()=>l});var r=n(96540),o=n(52290),i=n(98761),a=n(44402),s={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},l=function(){var e=(0,i.h)({shimmerKeyframesName:s}).shimmerKeyframesName,t=(0,a.l)();return r.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},r.createElement(o.a,{display:"flex",flexDirection:"row"},r.createElement(o.a,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{marginLeft:"8px",marginTop:"4px"},r.createElement(o.a,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),r.createElement(o.a,{marginTop:"12px"},r.createElement(o.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))}},96009:(e,t,n)=>{n.d(t,{c:()=>m});var r=n(64467),o=n(96540),i=n(45639),a=n(44402),s=n(20239),l=n(42976),c=n(42396),u=n(38893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.inResponseToMediaResource,n=(0,a.l)(),r=(0,s.D)(),d=(0,c.x)((function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var r=n.split("--")[0];if(r){var o=document.getElementById(r);if(o){var i=(null==o?void 0:o.offsetTop)-100;i&&window.scrollTo({top:i,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),m=null==t?void 0:t.mediumQuote;if(!m)return null;var f=(0,u.Oi)(m);if(!f||!f.type)return null;var h=f.type;return h===l.FU.IMG||h===l.FU.IFRAME||h===l.FU.COVER_TITLE||h===l.FU.HR||h===l.FU.MIXTAPE_EMBED||h===l.FU.SECTION_CAPTION?null:o.createElement("div",{onClick:d,onKeyDown:d,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},o.createElement(i.i,{paragraph:p(p({},f),{},{name:"embedded-quote-".concat(m.quoteId,"-").concat(f.name)}),paragraphStyle:h,spaceTop:4,richTextStyle:"STREAM"}))}},43389:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(96540),o=n(42976),i=r.createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null},sidebarRef:null,responseDistribution:o.IZ.NOT_DISTRIBUTED,setResponseDistribution:function(){},responseSortType:o.CD.TOP,rootEntityId:"",isResponsesSidebarVisible:!1,showCreateReplyEditor:!1})},51772:(e,t,n)=>{n.d(t,{N:()=>b});var r=n(96540),o=n(58887),i=n(52290),a=n(86975),s=n(36557),l=n(44402),c=n(20239),u=n(21771),d=n(42976),p=n(86684),m=n(80591),f=n(27715),h=n(46879),v=n(96009),g=n(8381);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){return{fill:e.colorTokens.foreground.neutral.secondary.base,float:"right"}},b=function(e){var t,n,b=e.storyResponse,k=e.parentEntity,x=e.omitBottomBorder,R=(0,l.l)(),w=(0,c.D)(),O=b.creator,S=b.previewContent,T=b.mediumUrl,P=b.clapCount,I=b.responsesCount,D=null==S||null===(t=S.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(O&&S&&S.bodyModel&&T&&D))return null;var C=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.text&&(n.push(o),n.length>=2))break}}catch(e){r.e(e)}finally{r.f()}return{title:n[0],subtitle:n[1]}}(D);if(!C.title&&!C.subtitle)return null;var N,A=null!==(null===(n=b.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),j=I||0;return r.createElement(u.V,{post:b,presentationContext:"POST_PREVIEW",isFullPost:!1},r.createElement(i.a,{paddingTop:"25px",paddingBottom:"20px",borderBottom:x?void 0:"neutral.primary"},r.createElement(o.T,{response:b,responseType:g.a.STORY,parentEntity:k}),r.createElement(v.c,{inResponseToMediaResource:b.inResponseToMediaResource}),r.createElement(a.D,{href:(0,h.us)(b)},r.createElement("div",{className:R({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:A?"12px":"16px",backgroundColor:w.backgroundColor})},r.createElement("div",{className:R(E)},r.createElement(s.kZ,{scale:"S",color:"LIGHTER",tag:"div"},r.createElement(i.a,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:(null!=P?P:0)>0||j>0?"20px":"0"},(null!=P?P:0)>0?r.createElement(i.a,{display:"flex",alignItems:"center"},r.createElement(i.a,{tag:p.A,marginRight:"2px"}),r.createElement("div",null,(0,f.Ct)(null!=P?P:0))):null,j>0?r.createElement(i.a,{display:"flex",alignItems:"center"},r.createElement(i.a,{tag:m.A,marginLeft:P?"8px":"0",marginRight:"2px"}),r.createElement("div",null,(0,f.Ct)(j))):null))),r.createElement(s.kZ,{scale:"M",clamp:2,color:"DARKER"},C.title&&r.createElement(i.a,null,C.title.text),C.subtitle&&r.createElement("div",{className:R((N=C.title.type,function(e){return{color:N===d.FU.H3?e.colorTokens.foreground.neutral.secondary.base:e.colorTokens.foreground.neutral.primary.base}}))},C.subtitle.text))))))}},15939:(e,t,n)=>{n.d(t,{c:()=>h});var r=n(64467),o=n(45458),i=n(96540),a=n(8389),s=n(43389),l=n(52290),c=n(72130),u=n(49287),d=n(95087),p=n(79756);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.replies,n=e.parentEntity,r=e.inResponseToEntityId,m=e.threadDepthFromRootEntity,h=e.threadDepthOnPage,v=void 0===h?1:h,g=e.displayBottomBorder,y=void 0!==g&&g,E=e.isShowAutoExpandedResponse,b=void 0!==E&&E,k=e.autoExpandedResponseIds,x=void 0===k?[]:k,R=e.inResponseToEntityTypename,w=(0,c.$L)(),O=(0,u.jI)(),S=i.useContext(s.o),T=S.rootEntityId,P=S.rootEntityTypename,I=S.isResponsesSidebarVisible,D=S.showCreateReplyEditor,C=(0,o.A)((null==t?void 0:t.posts)||[]);return b&&(C=C.filter((function(e){return x.some((function(t){return t===e.id}))}))),i.useEffect((function(){b&&I&&C.forEach((function(e){w.event("response.autoExpanded",f(f(f({postId:e.id},(0,p.rz)(r,R)),(0,p.DL)(T,P)),{},{threadDepth:m,context:a.J.INLINE_POST_RESPONSE,source:O}))}))}),[]),C&&0!==C.length?i.createElement(l.a,null,C.map((function(e,t,o){if(!e)return null;var a=t!==o.length-1||y;return i.createElement(d.W,{reply:e,parentEntity:n,bottomBorder:a,index:t,inResponseToEntityId:r,inResponseToEntityTypename:R,key:e.id,threadDepthFromRootEntity:m,threadDepthOnPage:v,showCreateReplyEditor:D&&0===t})}))):null}},95087:(e,t,n)=>{n.d(t,{C:()=>A,W:()=>j});var r=n(64467),o=n(80045),i=n(45458),a=n(80296),s=n(77969),l=n(96540),c=n(74793),u=n(8389),d=n(70694),p=n(36897),m=n(66274),f=n(43389),h=n(51772),v=n(60602),g=n(88615),y=n(23406),E=n(85864),b=n(52290),k=n(86527),x=n(36557),R=n(72130),w=n(49287),O=n(44402),S=n(15939),T=n(51387),P=n(79756),I=n(58192),D=["__typename"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t){return function(n){return{marginBottom:e?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(n.colorTokens.border.neutral.primary.base),padding:t?"0 24px":void 0}}},j=function(e){var t,n,r,C,j,L,M=e.reply,_=e.parentEntity,B=e.bottomBorder,V=e.index,F=e.inResponseToEntityId,U=e.threadDepthOnPage,Z=void 0===U?1:U,H=e.threadDepthFromRootEntity,G=e.showCreateReplyEditor,Q=void 0!==G&&G,z=e.inResponseToEntityTypename,q=(0,O.l)(),K=(0,w.jI)(),Y=(0,R.$L)(),$=l.useState(null!==(t=M.threadedPostResponses)&&void 0!==t&&t.autoExpandedPostIds?(0,i.A)(M.threadedPostResponses.autoExpandedPostIds):[]),W=(0,a.A)($,1)[0],J=l.useState(Boolean(W.length)),X=(0,a.A)(J,2),ee=X[0],te=X[1],ne=l.useContext(f.o),re=ne.responsesLocked,oe=ne.isLockedResponse,ie=ne.inResponseToQuote,ae=ne.setInResponseToQuote,se=ne.setIsSavingResponse,le=ne.sidebarRef,ce=ne.responseDistribution,ue=ne.setResponseDistribution,de=ne.responseSortType,pe=ne.rootEntityId,me=ne.rootEntityTypename,fe=ne.isResponsesSidebarVisible,he=l.useContext(y.u).addContinueThisThreadSidebar,ve=l.useState([]),ge=(0,a.A)(ve,2),ye=ge[0],Ee=ge[1],be=l.useRef(null),ke=null===(n=M.creator)||void 0===n?void 0:n.name;ke&&(L="Replying to ".concat(ke));var xe=(0,s._)(T.t,{variables:{postId:M.id,postResponsesPaging:{limit:P.TC},sortType:de},ssr:!1}),Re=(0,a.A)(xe,2),we=Re[0],Oe=Re[1],Se=Oe.called,Te=Oe.data,Pe=Oe.loading,Ie=Oe.fetchMore;l.useEffect((function(){var e;null!=be&&null!==(e=be.current)&&void 0!==e&&e.getBoundingClientRect&&be.current.getBoundingClientRect().bottom>window.innerHeight&&be.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var De=null==Te||null===(r=Te.post)||void 0===r?void 0:r.threadedPostResponses;ee&&!Se&&we();var Ce,Ne=(null==De?void 0:De.posts)||[],Ae=(null===(C=M.postResponses)||void 0===C?void 0:C.count)||0,je=(0,I.M)(ee,W,Ne.length,Ae),Le=je>0,Me=null==De||null===(j=De.pagingInfo)||void 0===j?void 0:j.next;return Me&&(Ce=function(){if(Ie){Me.__typename;var e=(0,o.A)(Me,D);Ie({variables:{postId:M.id,postResponsesPaging:e}})}}),l.createElement(E.B,{initialVisibility:ee},(function(e){var t=e.isVisible,n=e.toggle,r=e.show;return l.createElement(E.B,{initialVisibility:Q},(function(e){var o,i=e.isVisible,a=e.hide,s=e.toggle;return l.createElement(b.a,{borderBottom:B?"neutral.primary":"NONE",marginLeft:"24px",marginRight:Z>1?"0":"24px"},l.createElement(v.a.Provider,{value:{inResponseToEntityId:F,isThreadedResponsesVisible:t,inResponseToEntityTypename:z,toggleThreadedResponses:function(){Se||we(),te(!1),n()},showThreadedResponses:function(){Se||(we(),Y.event("response.expanded",N(N(N({postId:M.id},(0,P.rz)(F,z)),(0,P.DL)(pe,me)),{},{threadDepth:H,context:u.J.INLINE_POST_RESPONSE,source:K}))),te(!1),r()},threadDepthFromRootEntity:H,threadDepthOnPage:Z,hideCreateReply:a,toggleCreateReply:s,loadThreadedResponses:we,isThreadedResponsesQueryCalled:Se,isThreadedResponsesQueryLoading:Pe,showContinueThisThreadSidebar:function(){he(M)}}},l.createElement("div",{ref:0===V?be:void 0},(0,d.kb)(M)?l.createElement(p.L,{responsePost:M,index:V,parentEntity:_,omitBottomBorder:!0}):l.createElement(w.Ne,{source:{index:V},key:M.id,extendSource:!0},l.createElement(h.N,{storyResponse:M,parentEntity:_,omitBottomBorder:!0}))),i&&l.createElement("div",{className:q(A(t,!0))},l.createElement(w.Ne,{source:{susiEntry:(0,P.gz)(z)},extendSource:!0},l.createElement(c.jG,{localStorageId:"".concat(M.id,"-reply")},l.createElement(g.Q,{parentEntityId:M.id,parentEntityTypename:"Post",hideReplyEditing:a,placeholder:L,showEditorHeader:!1}))))),t&&l.createElement("div",{className:q(A(Le))},Pe&&l.createElement(b.a,{marginLeft:"24px"},l.createElement(m.V,null)),(null==De?void 0:De.posts)&&(null==De||null===(o=De.posts)||void 0===o?void 0:o.length)>0&&l.createElement(f.o.Provider,{value:{setIsSavingResponse:se,responsesLocked:re,isLockedResponse:oe,editingResponsesAtIndices:ye,setEditingResponsesAtIndices:Ee,inResponseToQuote:ie,setInResponseToQuote:ae,sidebarRef:le,responseDistribution:ce,setResponseDistribution:ue,responseSortType:de,rootEntityId:pe,rootEntityTypename:me,isResponsesSidebarVisible:fe}},l.createElement(S.c,{replies:De,parentEntity:_,inResponseToEntityId:M.id,inResponseToEntityTypename:"Post",threadDepthOnPage:Z+1,threadDepthFromRootEntity:H+1,isShowAutoExpandedResponse:ee,autoExpandedResponseIds:W}))),Le&&(t||ee)&&l.createElement(b.a,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},l.createElement(x.kZ,{color:"ACCENT",scale:"M"},l.createElement(k.N,{linkStyle:"OBVIOUS",onClick:function(){ee?(te(!1),r()):Ce()}},(0,I.s)(ee,je)))))}))}))}},88615:(e,t,n)=>{n.d(t,{Q:()=>B});var r=n(82284),o=n(10467),i=n(80296),a=n(64467),s=n(96540),l=n(69733),c=n(17180),u=n(8389),d=n(43389),p=n(60602),m=n(45458),f=n(95420),h=n(79756),v=n(16765),g=n(62544),y=n(92571),E={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishCatalogResponseMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToCatalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deltas"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Delta"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseDistributionType"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publishCatalogResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inResponseToCatalogId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToCatalogId"}}},{kind:"Argument",name:{kind:"Name",value:"deltas"},value:{kind:"Variable",name:{kind:"Name",value:"deltas"}}},{kind:"Argument",name:{kind:"Name",value:"responseDistribution"},value:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}}]}}]}}]}}].concat((0,m.A)(g.UZ.definitions),(0,m.A)(y.uS.definitions),(0,m.A)(y.jC.definitions))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(99836),R=n(78265),w=n(41281),O={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PublishPostThreadedResponse_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}}]}}].concat((0,m.A)(g.UZ.definitions),(0,m.A)(y.uS.definitions),(0,m.A)(y.jC.definitions))},S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishPostThreadedResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deltas"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Delta"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToQuoteId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseDistributionType"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publishPostThreadedResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inResponseToPostId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToPostId"}}},{kind:"Argument",name:{kind:"Name",value:"deltas"},value:{kind:"Variable",name:{kind:"Name",value:"deltas"}}},{kind:"Argument",name:{kind:"Name",value:"inResponseToQuoteId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToQuoteId"}}},{kind:"Argument",name:{kind:"Name",value:"responseDistribution"},value:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PublishPostThreadedResponse_post"}}]}}]}}].concat((0,m.A)(O.definitions))};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=n(36557),D=n(72130),C=n(49287),N=n(44402),A=n(42976),j=n(91830);function L(){L=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",f="suspendedYield",h="executing",v="completed",g={};function y(){}function E(){}function b(){}var k={};u(k,s,(function(){return this}));var x=Object.getPrototypeOf,R=x&&x(x(N([])));R&&R!==n&&o.call(R,s)&&(k=R);var w=b.prototype=y.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,s,l){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,r.A)(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=m;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=P(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=p(t,n,r);if("normal"===c.type){if(o=r.done?v:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,r.A)(t)+" is not iterable")}return E.prototype=b,i(w,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:E,configurable:!0}),E.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,s,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e){var t=e.parentEntityId,n=e.parentEntityTypename,r=e.placeholder,a=e.hideReplyEditing,g=void 0===a?function(){}:a,y=e.editorOpenByDefault,b=void 0===y||y,T=e.showEditorHeader,M=void 0===T||T,B=e.viewerPronouns,V=e.autofocus,F=e.scrollIntoView,U=void 0===F||F,Z=e.showPublishCheckbox,H=void 0===Z?!b:Z,G=s.useContext(d.o),Q=G.setIsSavingResponse,z=G.responsesLocked,q=G.inResponseToQuote,K=G.setInResponseToQuote,Y=G.responseDistribution,$=G.setResponseDistribution,W=G.responseSortType,J=G.rootEntityId,X=G.rootEntityTypename,ee=s.useContext(p.a),te=ee.showThreadedResponses,ne=ee.isThreadedResponsesQueryLoading,re=ee.threadDepthFromRootEntity,oe=(0,C.jI)(),ie=(0,D.$L)(),ae=(0,l.wA)(),se=(0,N.l)(),le=s.useRef(null);s.useEffect((function(){var e;U&&null!=le&&null!==(e=le.current)&&void 0!==e&&e.getBoundingClientRect&&le.current.getBoundingClientRect().bottom>window.innerHeight&&le.current.scrollIntoView({behavior:"smooth",block:"end"})}),[U]);var ce=s.useCallback((function(e){Q(!1);var t="Something went wrong. Please try again.";(0,c._5)(e)?t="Youâve reached the limit for responses that can be published in one day.":(0,c.El)(e)&&(t="This post is not accepting responses."),ae((0,j.MZ)({message:t,toastStyle:"ERROR"}))}),[]),ue=s.useCallback((function(e){if(e){ie.event("inlineEditor.publish",{postId:t,context:u.J.INLINE_POST_RESPONSE,source:oe});var r=(0,h.DL)(J,X),o=(0,h.rz)(t,n);ie.event("response.created",_(_(_({postId:e.id},o),r),{},{threadDepth:re+1,context:u.J.INLINE_POST_RESPONSE,source:oe})),e.responseDistribution===A.IZ.DISTRIBUTED&&ie.event("response.distributed",_(_(_({postId:e.id},o),r),{},{threadDepth:re+1,context:u.J.INLINE_POST_RESPONSE,source:oe})),Q(!1),te(),e.responseDistribution===A.IZ.DISTRIBUTED&&(ae((0,j.MZ)({toastStyle:"PUBLISH_RESPONSE",extraParams:{response:e},duration:5e3})),$(A.IZ.NOT_DISTRIBUTED))}}),[ie,oe,re,J,X,t,n,te]),de=function(e){var t=e.parentPostId,n=e.onCompleted,r=e.onError;return(0,f.n)(S,{update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.publishPostThreadedResponse;if(o){var i=e.writeFragment({data:o,fragment:O,fragmentName:"PublishPostThreadedResponse_post"});e.modify({id:e.identify({__typename:"Post",id:t}),fields:{postResponses:function(e){var t;return P(P({},e),{},{count:(null!==(t=null==e?void 0:e.count)&&void 0!==t?t:0)+1})},threadedPostResponses:function(e){return P(P({},e),{},{posts:e.posts?[i].concat((0,m.A)(e.posts)):[i]})}}})}},onCompleted:n,onError:r})}({parentPostId:t,onCompleted:function(e){ue(null==e?void 0:e.publishPostThreadedResponse)},onError:function(e){ce(null==e?void 0:e.graphQLErrors)}}),pe=(0,i.A)(de,2),me=pe[0],fe=pe[1],he=fe.loading,ve=fe.error,ge=function(e){var t=e.parentCatalogId,n=e.responseSortType,r=e.onCompleted,o=e.onError;return(0,f.n)(E,{update:function(e,r){var o,i,a,s,l=function(e,t,n){return{id:e.identify({__typename:"Catalog",id:t}),fragment:v.Kl,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultCatalogResponses",variables:{sortType:n,defaultPagingOptions:{limit:h.TC}}}}(e,t,n),c=(i=e.readFragment(l),s=null==(o=r.data)?void 0:o.publishCatalogResponse,null!=i&&i.threadedCatalogResponses&&"Post"===(null==s?void 0:s.__typename)?k(k({},i),{},{responsesCount:(i.responsesCount||0)+1,threadedCatalogResponses:k(k({},i.threadedCatalogResponses),{},{posts:[s].concat((0,m.A)((null===(a=i.threadedCatalogResponses)||void 0===a?void 0:a.posts)||[]))})}):null);null!==c&&e.writeFragment(k(k({},l),{},{data:k({},c)}))},onCompleted:r,onError:o})}({parentCatalogId:t,responseSortType:W,onCompleted:function(e){ue(null==e?void 0:e.publishCatalogResponse)},onError:function(e){ce(null==e?void 0:e.graphQLErrors)}}),ye=(0,i.A)(ge,2),Ee=ye[0],be=ye[1],ke=be.loading,xe=be.error,Re=s.useCallback((function(e,r){return Q(!0),"Post"===n?me({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:(null==q?void 0:q.id)||null,responseDistribution:Y||null,sortType:W}}).then((function(e){var t;null!=e&&null!==(t=e.data)&&void 0!==t&&t.publishPostThreadedResponse?r():null!=e&&e.errors&&ce(e.errors)})):"Catalog"===n?Ee({variables:{inResponseToCatalogId:t,deltas:e,responseDistribution:Y||null,sortType:W}}).then((function(e){var t;null!=e&&null!==(t=e.data)&&void 0!==t&&t.publishCatalogResponse?r():null!=e&&e.errors&&ce(e.errors)})):void 0}),[n,t,q,Y,W]),we=s.useCallback((0,o.A)(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(void 0),g(),e.abrupt("return",{preventStateUpdate:!1});case 3:case"end":return e.stop()}}),e)}))),[g]),Oe=(0,c.Ox)(ve)||(0,c.Ox)(xe)||z;return s.useEffect((function(){Oe&&Q(!1)}),[Oe]),Oe?s.createElement(x.x,{message:(0,h.it)(X)}):s.createElement("div",{ref:le},s.createElement(I.kZ,{scale:"M",color:"DARKER",tag:"div"},s.createElement("div",{className:se({lineHeight:"24px"})},s.createElement(w.d,{isPublishingResponse:he||ke,publishResponse:Re,type:R.o.create,inResponseToQuote:q,onClose:we,editorOpenByDefault:b,placeholder:r,showEditorHeader:M,disableReplyButton:ne,showPublishCheckbox:H,responseDistribution:Y,toggleResponseDistribution:function(){Y===A.IZ.DISTRIBUTED?$(A.IZ.NOT_DISTRIBUTED):$(A.IZ.DISTRIBUTED)},viewerPronouns:B,autofocus:V}))))}},99836:(e,t,n)=>{n.d(t,{x:()=>u});var r=n(96540),o=n(43389),i=n(79756),a=n(52290),s=n(86527),l=n(36557),c=n(46879),u=function(e){var t=e.message,n=r.useContext(o.o).rootEntityTypename,u=(0,i.bY)(n),d="The author has closed discussion".concat(u?" for this ".concat(u):"","."),p=t||d;return r.createElement(a.a,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},r.createElement(l.kZ,{scale:"M",tag:"span",color:"DARKER"},p," ",r.createElement(s.N,{href:(0,c.GPf)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},78265:(e,t,n)=>{var r;n.d(t,{o:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},41281:(e,t,n)=>{n.d(t,{d:()=>ge});var r,o=n(82284),i=n(80296),a=n(10467),s=n(64467),l=n(2404),c=n.n(l),u=n(96540),d=n(42295),p=n(38913),m=n(70600),f=n(74793),h=n(47266),v=n(37333),g=n(70694),y=n(27799),E=n(86143),b=n(18677),k=n(60602),x=n(45639),R=n(44402),w=n(42976),O=n(38893),S=function(e){var t=e.quote,n=(0,R.l)();if(!t)return null;var r=(0,O.Oi)(t);return r?u.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},u.createElement(x.i,{paragraph:r,paragraphStyle:w.FU.P,spaceTop:4,richTextStyle:"STREAM"})):null},T=function(e){var t=e.onFocus,n=e.responseContent,r=e.setResponseContent,o=e.setIsEmpty,i=e.isEditorOpen,a=(0,R.l)();return u.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;o(!t),r(t)},onFocus:t,className:a({width:"100%",padding:"14px",resize:"none",minHeight:i?"100px":"0",height:i?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},P=n(24960),I=n(5600),D=n(36557),C=n(20239),N=n(18642),A=n(78693),j=n(44379);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(null,arguments)}const M=function(e){return u.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21"},e),r||(r=u.createElement("path",{fill:"#000",d:"m5.82 6.215-1.776 4.993h3.63zm-.281-1.89h1.186l4.316 11.268 1.08.22v.738H8.036v-.738l1.116-.088.132-.255-1.301-3.436H3.737L2.454 15.47l.184.255 1.17.088v.738H.282v-.738l1.037-.22zM17.949 14.899v-3.173q-2.259.624-2.971 1.143-.703.518-.703 1.362 0 .677.387 1.081.395.396 1.054.396.423 0 .967-.203.554-.202 1.266-.606m0 .606q-.87.598-1.6.888-.72.282-1.353.281-1.046 0-1.68-.633-.623-.632-.623-1.67 0-1.15.94-1.81.95-.66 4.316-1.468v-.571q0-1.134-.37-1.573-.368-.44-1.283-.44-.343 0-.676.07a4.4 4.4 0 0 0-.695.212v1.511h-1.239q-.325 0-.448-.114-.114-.123-.114-.44 0-.878 1.01-1.458 1.02-.58 2.628-.58 1.416 0 2.057.615.642.615.641 1.977v5.22l.308.291.95.088v.65h-2.532z"})))};var _=n(58952),B=n(79200),V=function(e,t,n){var r=t&&!e;return{margin:"0 4px",cursor:e?"default":"pointer",opacity:e?"0.3":"1",padding:"6px",borderRadius:"4px",display:"inline-flex",justifyContent:"center",backgroundColor:r?n.colorTokens.background.accent.quaternary.base:null,":hover":{backgroundColor:e?null:t?n.colorTokens.background.accent.quaternary.base:n.colorTokens.background.neutral.secondary.base},"> svg > path":{fill:r?n.colorTokens.background.accent.primary.base:N.Dx},"> span > svg > path":{fill:r?n.colorTokens.background.accent.primary.base:N.Dx}}},F=function(e){var t=e.editor,n=e.buttonKeys,r=e.showSubMenu,o=e.disabled,i=e.setShowSubMenu,a=(0,R.l)();return t&&n&&n.length>0?u.createElement(P.A,{disablePortalOverlay:!0,isVisible:r&&!o,noArrow:!0,noPortal:!0,placement:"top",targetDistance:10,popoverRenderFn:function(){return u.createElement(D.kZ,{tag:"span",scale:"M"},u.createElement("span",{className:a({display:"flex",padding:"8px 4px"})},n.map((function(e){return u.createElement(U,{key:e,format:e,disabled:o,slateEditor:t,showSubMenu:r,setShowSubMenu:i})}))))},customZIndex:A.Ay.selectionMenu,referenceHeight:"100%",refTag:"span",shouldAnimateOpen:!0},u.createElement(M,null)):null},U=function(e){var t=e.format,n=e.disabled,r=e.slateEditor,o=e.subMenuKeys,i=void 0===o?[]:o,a=e.showSubMenu,s=e.setShowSubMenu,l=(0,R.l)(),c=(0,C.D)(),d=(0,f.Yd)(),p=d.setBackgroundSelection,m=d.setMode,h=t===z?a:(0,g.At)(r,t);if(!p||!m)return null;var v=function(e){switch(e){case H:return"Bold (âB)";case G:return"Italic (âI)";case Q:return"Link (âK)";case z:return"Formatting options";default:return"Click to format"}}(t);return u.createElement(I.G,{tooltipText:v,targetDistance:10,isVisible:!(t===z&&a)},u.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:function(e){if(e.stopPropagation(),!n)switch(t){case"title":case"bq":return(0,g.qj)(r,t);case z:return void s(!a);default:return(0,g.wh)(r,t)}},className:l(V(n,h,c))},function(e,t,n,r,o,i){switch(e){case H:return u.createElement(j.A,null);case G:return u.createElement(_.A,null);case Q:return u.createElement(B.A,null);case z:return u.createElement(F,{editor:n,buttonKeys:r,showSubMenu:t,disabled:o,setShowSubMenu:i})}}(t,h,r,i,n,s)))},Z=n(52290),H="bold",G="italic",Q="link",z="format",q=function(e){var t=e.editor,n=e.disabled,r=e.showSubMenu,o=e.setShowSubMenu;return 3===e.editorDepth?u.createElement(D.kZ,{tag:"span",scale:"M"},u.createElement(U,{key:z,format:z,disabled:n,slateEditor:t,subMenuKeys:[H,G],showSubMenu:r,setShowSubMenu:o})):u.createElement(D.kZ,{tag:"span",scale:"M"},u.createElement(Z.a,{display:"flex"},u.createElement(U,{key:H,format:H,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o}),u.createElement(U,{key:G,format:G,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o})))},K=n(78265),Y=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0}).includeInitialDeltas,n=[],r=e.split("\n");return t&&(n=[{type:8,index:0,section:{name:$(),startIndex:0}}]),r.forEach((function(e,t){n.push({type:1,paragraph:{markups:[],name:$(),text:e,type:1},verifySameName:!1,index:t})})),n},$=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},W=n(79756),J=n(75636),X=n(27721),ee=n(43634),te=n(23393),ne=n(99731),re=n(53424),oe=n(1771),ie=n(46445),ae=function(e){var t=e.isVisible,n=e.hide,r=(0,X.R)().value;return u.createElement(oe.T,null,(function(e){var o=e.mutate;return u.createElement(ie.T,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){o()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==r?void 0:r.unverifiedEmail,".")}))},se=n(39),le=n(61333);function ce(){ce=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",f="suspendedYield",h="executing",v="completed",g={};function y(){}function E(){}function b(){}var k={};u(k,s,(function(){return this}));var x=Object.getPrototypeOf,R=x&&x(x(N([])));R&&R!==n&&r.call(R,s)&&(k=R);var w=b.prototype=y.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,s,l){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,o.A)(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=m;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=P(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=p(t,n,r);if("normal"===c.type){if(o=r.done?v:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,o.A)(t)+" is not iterable")}return E.prototype=b,i(w,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:E,configurable:!0}),E.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(w),u(w,c,"Generator"),u(w,s,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(){return{"& button":{border:"none"}}},me="400ms",fe="300ms",he=function(e,t){var n=de(de({},t),{},{display:"flex"});return de(de({},n),{},e?{transition:"opacity ".concat(me,", max-height ").concat(me),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(me,", max-height ").concat(me),opacity:0,maxHeight:0})},ve=function(e){return{transition:"min-height ".concat(me),minHeight:e?"100px":"15px",'& [data-slate-placeholder="true"]':{top:0}}},ge=function(e){var t,n=e.createdAt,r=e.isPublishingResponse,o=e.disableReplyButton,s=void 0!==o&&o,l=e.publishResponse,x=e.type,O=void 0===x?K.o.create:x,P=e.onClose,I=void 0===P?(0,a.A)(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):P,N=e.inResponseToQuote,A=e.initialValue,j=e.placeholder,L=void 0===j?"What are your thoughts?":j,M=e.editorOpenByDefault,_=void 0!==M&&M,B=e.showEditorHeader,V=void 0===B||B,F=e.showPublishCheckbox,U=void 0!==F&&F,H=e.responseDistribution,G=void 0===H?w.IZ.NOT_DISTRIBUTED:H,Q=e.toggleResponseDistribution,z=e.viewerPronouns,$=e.autofocus,oe=void 0===$||$,ie=O===K.o.edit,ue=(0,R.l)(),ge=(0,C.D)(),ye=!!(0,J.z)({name:"enable_lite_response_markup",placeholder:!1}),Ee=(0,le.n8)(navigator.userAgent),be=O===K.o.edit,ke=(0,f.Yd)(),xe=ke.value,Re=ke.clearValue,we=(0,y.AO)([y.dn]),Oe=we.editor,Se=we.renderLeaf,Te=we.renderElement,Pe=(0,E.z)(Oe),Ie=(0,u.useCallback)((function(e){ye&&Pe(e)}),[E.z,ye]),De=null===Oe.selection,Ce=(0,u.useState)(!1),Ne=(0,i.A)(Ce,2),Ae=Ne[0],je=Ne[1],Le=(0,u.useContext)(k.a),Me=Le.threadDepthOnPage,_e=Le.inResponseToEntityTypename,Be=Me+ +!ie,Ve=(0,u.useState)(ie||_),Fe=(0,i.A)(Ve,2),Ue=Fe[0],Ze=Fe[1],He=(0,u.useState)(!0),Ge=(0,i.A)(He,2),Qe=Ge[0],ze=Ge[1],qe=(0,u.useState)(null),Ke=(0,i.A)(qe,2),Ye=Ke[0],$e=Ke[1],We=(0,u.useState)(!1),Je=(0,i.A)(We,2),Xe=Je[0],et=Je[1],tt=(0,u.useState)((t=A)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),nt=(0,i.A)(tt,2),rt=nt[0],ot=nt[1],it=(0,u.useRef)(d.Node.string(Oe)),at=(0,u.useState)(!1),st=(0,i.A)(at,2),lt=st[0],ct=st[1],ut=(0,u.useCallback)((function(){return ct(!1)}),[]),dt=(0,X.R)().value,pt=(0,se.Z)({name:"detail",scale:"M",color:"DARKER"}),mt=(0,u.useCallback)((function(){je(!1)}),[]),ft=(0,u.useCallback)((function(){Ze(!0)}),[]),ht=(0,u.useCallback)((function(){(0,g.yF)(Oe),je(!1)}),[]),vt=(0,u.useCallback)((function(){I().then((function(e){e.preventStateUpdate||(Ze(!1),Ee?ot(""):(0,g.bK)(Oe),null==Re||Re())}))}),[I]),gt=(0,u.useCallback)((function(){return Ee?Y(rt,ie?{includeInitialDeltas:!1}:void 0):(0,g.Mr)(Oe,ie?{includeInitialDeltas:!1}:void 0)}),[rt,ie]);(0,u.useEffect)((function(){N&&Ze(!0)}),[N]),(0,u.useEffect)((function(){var e=d.Node.string(Oe);ze(e.trim().length<=0);var t=gt();et(!c()(Ye,t)),e!==it.current&&je(!1),it.current=e}),[xe]),(0,u.useEffect)((function(){var e=gt();$e(e)}),[A]),(0,u.useEffect)((function(){oe&&Ue&&!Ee&&(_||be||p.rL.blur(Oe),setTimeout((function(){return p.rL.focus(Oe)}),0))}),[Ue,oe]);var yt,Et,bt,kt,xt,Rt=u.createElement("div",{className:ue(he(Ue,{padding:"0 14px",alignSelf:"flex-end"}))},(ye||!U)&&u.createElement("div",{className:ue(pe)},u.createElement(ne.$n,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return vt()},"data-testid":"CancelResponseButton"},"Cancel")),u.createElement(ne.$n,{buttonStyle:"STRONG",size:"SMALL",disabled:Qe||r||!Xe||s,onClick:function(){var e=Ee?Y(rt,ie?{includeInitialDeltas:!1}:void 0):(0,g.Mr)(Oe,ie?{includeInitialDeltas:!1}:void 0);null!=dt&&dt.unverifiedEmail?ct(!0):l(e,vt)},"data-testid":"ResponseRespondButton"},ie?"Update":"Respond")),wt=u.createElement(q,{editor:Oe,disabled:De,showSubMenu:Ae,setShowSubMenu:je,editorDepth:Be}),Ot=u.createElement("span",{role:"checkbox","aria-checked":G===w.IZ.DISTRIBUTED,tabIndex:0,onMouseDown:function(e){e.preventDefault(),De||null==Q||Q()},onKeyDown:function(e){!De&&e&&"Enter"===e.key&&(null==Q||Q())}},u.createElement(re.S,{checked:G===w.IZ.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px",disabled:De},"Also publish to my profile"));return u.createElement(Z.a,{marginBottom:_?"0":"20px"},u.createElement("div",{className:ue({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:Ue?"14px":"0",paddingBottom:Ue?"14px":"0",transition:"padding-top ".concat(me,", padding-bottom ").concat(me)})},dt&&V&&u.createElement("div",{className:ue((kt=Ue,xt={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},de(de({},xt),{},kt?{transition:"opacity ".concat(me,", max-height ").concat(me,", margin-bottom ").concat(me),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(fe,", max-height ").concat(fe,", margin-bottom ").concat(fe),opacity:0,maxHeight:0,marginBottom:"0"})))},u.createElement(Z.a,{display:"flex",alignItems:"center"},u.createElement(te.H8,{scale:"XS",user:dt,showBadge:!0}),u.createElement(Z.a,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},u.createElement(Z.a,{display:"flex",flexWrap:"wrap",alignItems:"baseline"},u.createElement("span",{className:ue([pt,{wordBreak:"break-word",paddingRight:"4px"}])},dt.name),z&&u.createElement(m.U,{user:z,scale:"S",paddingTop:"2px"})),ie&&n&&u.createElement(D.kZ,{scale:"M",color:"LIGHTER"},u.createElement(b.f,{timestamp:n}))))),Ue&&u.createElement(S,{quote:N}),u.createElement(Z.a,{display:"flex",flexDirection:"column",position:"relative"},dt?u.createElement("div",{className:ue(ve(Ue))},Ee?u.createElement(T,{onFocus:ft,responseContent:rt,setIsEmpty:ze,setResponseContent:ot,isEditorOpen:Ue}):u.createElement(Z.a,{padding:"14px"},u.createElement(v.j,{editor:Oe},u.createElement(h.a,{onFocus:ft,onBlur:mt,onClick:ht,renderLeaf:Se,renderElement:Te,placeholder:L,onKeyDown:Ie,autofocus:oe})))):u.createElement(ee.r,{operation:"register",susiEntry:(0,W.gz)(_e)},u.createElement(Z.a,{padding:"14px"},u.createElement(D.kZ,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),(bt=ye?wt:U?Ot:null)?u.createElement("div",{className:ue(he(Ue,{justifyContent:"space-between",marginLeft:"".concat(ye?"10px":"14px"),color:ge.colorTokens.foreground.neutral.secondary.base}))},bt,Rt):Rt,u.createElement("div",{className:ue((yt=!!dt,Et=Ue,{right:"14px",bottom:yt?"10px":"8px",position:"absolute",pointerEvents:"none",opacity:Et?0:1,transition:"opacity 100ms".concat(Et?"":" 200ms")}))},u.createElement(ne.$n,{buttonStyle:"STRONG",size:"SMALL",disabled:!0},"Respond")))),u.createElement(ae,{isVisible:lt,hide:ut}),ye&&U&&u.createElement("div",{className:ue(he(Ue,{marginTop:"14px"}))},Ot))}},16022:(e,t,n)=>{n.d(t,{n:()=>f});var r=n(64467),o=n(96540),i=n(53259),a=n.n(i),s=n(26365),l=n(95765),c=n(78265);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={delay:1e3,timeout:2e4,loading:function(e){return e.error?o.createElement(s.z,{error:e.error}):e.timedOut?o.createElement(s.z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?o.createElement(l.x,null):null}},m=a()(d(d({},p),{},{loader:function(){return n.e(5258).then(n.bind(n,15279))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[15279]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return o.createElement(n,t)}})),f=function(e){var t=e.parentEntityId,n=e.parentEntityTypename,r=e.responseId,i=e.parentCreatorName,a=e.parentEntitySlug,s=e.type,l=void 0===s?c.o.create:s,u=e.initialValue,d=e.viewerPronouns,p=e.editorOpenByDefault,f=e.autofocus,h=e.scrollIntoView,v=e.showPublishCheckbox;return o.createElement(m,{parentEntitySlug:a,parentEntityId:t,parentEntityTypename:n,parentCreatorName:i,responseId:r,type:l,initialValue:u,viewerPronouns:d,editorOpenByDefault:p,autofocus:f,scrollIntoView:h,showPublishCheckbox:v})}},11211:(e,t,n)=>{n.d(t,{U:()=>x});var r=n(96540),o=n(79756),i=n(52290),a=n(86527),s=n(49287),l=n(44402),c=n(52752),u=n(14782),d=n(80296),p=n(43389),m=n(3005),f=n(99731),h=n(56942),v=n(36557),g=function(){return{fontStyle:"italic",textAlign:"center"}},y=function(e){var t,n=e.responsesLocked,s=e.unlockResponses,c=e.lockResponses,y=(0,l.l)(),E=r.useContext(p.o).rootEntityTypename,b=r.useState(!1),k=(0,d.A)(b,2),x=k[0],R=k[1];t=!0===n?r.createElement(a.N,{onClick:s},"Open discussion"):r.createElement(a.N,{onClick:function(){return R(!0)}},"Close discussion");var w="Closing a discussion prevents responses from being added or edited",O=(0,o.bY)(E);return r.createElement(r.Fragment,null,r.createElement(u.q3,null,t),x&&r.createElement(m.l,{isVisible:x,hide:function(){return R(!1)},withCloseButton:!1,noPortal:!0,padding:50},r.createElement(i.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},r.createElement(h.DZ,{scale:"M"},"Close Discussion"),r.createElement(i.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},r.createElement(v.kZ,{scale:"M",color:"DARKER"},O?"".concat(w," on your ").concat(O,". Existing responses will remain on your ").concat(O,"."):w)),r.createElement(i.a,{display:"flex",marginBottom:"20px"},r.createElement(a.N,{onClick:function(){return R(!1)}},r.createElement(v.kZ,{scale:"M",color:"DARKER"},"Cancel")),r.createElement(i.a,{marginLeft:"25px"},r.createElement(f.$n,{buttonStyle:"ERROR",onClick:c,"data-test-id":"close-discussion-button"},"Close discussion"))),r.createElement("div",{className:y(g)},r.createElement(v.kZ,{scale:"M"},"You can reopen the discussion at any time.")))))},E={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},b=function(e){var t=e.responsesLocked,n=e.isPopoverMenuVisible,o=e.hidePopoverMenu,i=e.lockResponses,s=e.unlockResponses,c=e.manageResponsesLink,d=(0,l.l)(),p=r.useRef(null);return r.useEffect((function(){var e=function(e){var t;null!=p&&null!==(t=p.current)&&void 0!==t&&t.contains(e.target)||o()};if(n)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[n]),r.createElement("div",{className:d(E),ref:p},r.createElement(u.Ni,null,c&&r.createElement(u.q3,null,r.createElement(a.N,{href:c},"Manage responses")),r.createElement(y,{responsesLocked:t,hidePopoverMenu:o,lockResponses:i,unlockResponses:s})))},k=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},x=function(e){var t=e.responsesLocked,n=e.infoLink,u=e.lockResponses,d=e.unlockResponses,p=e.hidePopoverMenu,m=e.isPopoverMenuVisible,f=e.handleClickOverflowDots,h=e.parentEntityTypename,v=(0,l.l)(),g="managementPopoverMenu";return r.createElement(i.a,null,r.createElement(a.N,{"aria-controls":g,"aria-expanded":m?"true":"false",onClick:f,inline:!0,className:v(k)},r.createElement(c.A,null)),m&&r.createElement("div",{id:g,className:v({position:"relative"})},r.createElement(s.Ne,{source:{susiEntry:(0,o.gz)(h)},extendSource:!0},r.createElement(b,{responsesLocked:t,isPopoverMenuVisible:m,hidePopoverMenu:p,manageResponsesLink:n,unlockResponses:d,lockResponses:u}))))}},21044:(e,t,n)=>{n.d(t,{J:()=>i});var r=n(80296),o=n(96540),i=function(){var e=o.useState(!1),t=(0,r.A)(e,2),n=t[0],i=t[1];return{handleClickOverflowDots:o.useCallback((function(e){e.nativeEvent.stopPropagation(),i(!n)}),[n]),hidePopoverMenu:o.useCallback((function(){i(!1)}),[]),isPopoverMenuVisible:n}}},92162:(e,t,n)=>{n.d(t,{F:()=>a,G:()=>s});var r=n(96540),o=n(83858),i=n(42976),a=function(){return r.createElement("div",null,"Deleted responses are gone forever.",r.createElement("br",null),"Are you sure?")},s=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,s=e.confirmDialogAction,l=e.responseDistribution,c=e.hide,u=l===i.IZ.DISTRIBUTED,d=u?"Delete response and story":"Delete",p=u?"This response is also a story on your profile. Are you sure you want to delete this response?":r.createElement(a,null);return r.createElement(o.d,{isDialogOpen:t,dialogHeading:d,dialogDescription:p,cancelDialogAction:n,confirmDialogAction:s,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:c})}},83858:(e,t,n)=>{n.d(t,{d:()=>d});var r=n(96540),o=n(43389),i=n(3005),a=n(52290),s=n(86527),l=n(99731),c=n(56942),u=n(36557),d=function(e){var t=e.isDialogOpen,n=e.dialogHeading,d=e.dialogDescription,p=e.cancelDialogAction,m=e.confirmDialogAction,f=e.confirmDialogButtonText,h=e.confirmButtonStyle,v=void 0===h?"STRONG":h,g=e.hide,y=r.useContext(o.o).sidebarRef,E=function(e){var t;null!=y&&null!==(t=y.current)&&void 0!==t&&t.style&&(y.current.style.overflowY=e?"hidden":"")};return r.useEffect((function(){return E(t),function(){E(!1)}}),[t]),r.createElement(i.l,{isVisible:t,hide:g,withCloseButton:!1,noPortal:!0,padding:50},r.createElement(a.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},r.createElement(c.DZ,{scale:"M"},n),r.createElement(a.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},r.createElement(u.kZ,{scale:"M",color:"DARKER"},d)),r.createElement(a.a,{display:"flex",marginBottom:"20px"},r.createElement(s.N,{onClick:p},r.createElement(u.kZ,{scale:"M",color:"DARKER"},"Cancel")),r.createElement(a.a,{marginLeft:"25px"},r.createElement(l.$n,{buttonStyle:v,onClick:m,"data-test-id":"close-discussion-button"},f)))))}},8381:(e,t,n)=>{var r;n.d(t,{a:()=>r}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(r||(r={}))},58192:(e,t,n)=>{n.d(t,{M:()=>i,s:()=>a});var r=n(55127),o=n.n(r),i=function(e,t,n,r){var o=t.length;return o&&e?r-o:n?r-n:0},a=function(e,t){return e?"Show ".concat(t," more ").concat(o()("reply",t)):"Load more replies (".concat(t,")")}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2527.a0afad8a.chunk.js.map