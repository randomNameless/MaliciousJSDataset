(function($){var isMobile=/iPhone|iPod|Android/i.test(navigator.userAgent),dataOriginalWidth='original-width',dataOriginalHeight='original-height',constants={collapseExpandIcon:'collapseExpandIcon',hasLargeText:'hasLargeText',expanded:'expanded'},selectors={captionTitleContainer:'.captionTitleContainer',navigationContainer:'.navigationIconsTopMostWrapper > div',navigationIconsTopMostWrapper:'.navigationIconsTopMostWrapper',swiper:'.swiper-container.preview',slide:'.wbSlideContainer',imageContainer:'.wbSlideContainer .imageContainer',slideWrapper:'.swiper-wrapper'},navigationDotsBottomOffset=14,isCaptionOnTop=function(slider){return $(slider).data('captiontop')},addClass=function(container,name){container&&container.classList.add(name)},removeClass=function(container,name){container&&container.classList.remove(name)},showIcon=function(container){if(!container.children[0])return false;var childContainerHeight=container.children[0].offsetHeight;return childContainerHeight>40},adjustNavigationDots=function(sliderContainer,currentSlideNode){var navigationContainer=$(sliderContainer).find(selectors.navigationContainer),dotsContainer=navigationContainer.find('.swiper-pagination');if(isCaptionOnTop(sliderContainer)||!currentSlideNode||isMobile)return;var captionBoxNode=$(currentSlideNode).find(selectors.captionTitleContainer);if(captionBoxNode.length===0){dotsContainer.css('bottom',navigationDotsBottomOffset);return}dotsContainer.css('bottom',captionBoxNode.outerHeight()+navigationDotsBottomOffset)},cleanUpLightBox=function(){$(this).find('.shinybox').shinybox('destroy')},initializeShinyBox=function(el,noTitleCaptionBox){el.shinybox({verticalSwipeDisable:true,beforeOpen:function(){if(isMobile){$('.shinybox-overlay').addClass('mobile-view')}else{$('.shinybox-overlay').removeClass('mobile-view')}},noTitleCaptionBox:noTitleCaptionBox,sort:function(a,b){if($(a).length){return $(a).data('dom-index')-$(b).data('dom-index')}else{return 1}}})},init=function(){$(selectors.swiper).css('opacity',0);$(selectors.swiper).each(function(){var $this=$(this),data=$this.data('swiper'),captionEnabled=$this.data('captionenabled');data.on={init:function(){var slides=this.el.swiper.slides,duplicateFirstSlide=slides[slides.length-1];if(captionEnabled)initEllipsesCode(this);$this.find('.swiper-slide-duplicate .shinybox').data('ignore',true);if(duplicateFirstSlide){duplicateFirstSlide.querySelector('.swiper-lazy').classList.remove('swiper-lazy-loading')}this.el.swiper.lazy.loadInSlide(slides.length-1);$(this.el).css('opacity',1);initializeShinyBox($this.find('.shinybox'),!captionEnabled)},slideChange:function(){if(captionEnabled)return;var previousSlideNode=this.slides[this.previousIndex],currentSlideNode=this.slides[this.activeIndex];removeClass(previousSlideNode,constants.expanded);removeClass(currentSlideNode,constants.expanded);adjustNavigationDots(this.el,currentSlideNode)}};if(this.swiper&&this.swiper.destroyed)this.swiper.destroyed=false;new Swiper(this,data)})};function initEllipsesCode(mySwiper){var jqueryNode=$(mySwiper.el),fn=function(event){var targetElement=$(event.target),currentSlide=targetElement.closest(selectors.slide);if(targetElement.hasClass(constants.collapseExpandIcon)){if(currentSlide.hasClass(constants.expanded)){removeClass(currentSlide[0],constants.expanded)}else{addClass(currentSlide[0],constants.expanded)}adjustNavigationDots(mySwiper.el,currentSlide)}};jqueryNode.off('click');jqueryNode.on('click',fn);adjustNavigationDots(mySwiper.el,mySwiper.slides[mySwiper.activeIndex]);$(mySwiper.el).find(selectors.captionTitleContainer).each(function(){showIcon(this)&&addClass(this,constants.hasLargeText)})}function _parseInt(value){return parseInt(value,10)}function fixDim(dim){return Math.max(Math.round(_parseInt(dim)),1)}function appendPx(value){return String(value)+'px'}function setNodeDimensions(node,ratio){node.height(fixDim(node.data(dataOriginalHeight)*ratio));node.width(fixDim(node.data(dataOriginalWidth)*ratio))}function resizeNodes(){$(selectors.swiper).each(function(){var slider=$(this),originalWidth=Number(slider.data(dataOriginalWidth)),sliderWidth=Math.min(originalWidth,slider.parent().width()),slides=slider.find(selectors.slide),sliderImageContainer=slider.find(selectors.imageContainer),sliderNavigationContainer=slider.find(selectors.navigationContainer),sliderCaptionContainer=slider.find(selectors.slide+' '+selectors.captionTitleContainer);sliderImageContainer.css('height','auto');sliderCaptionContainer.css('display','none');var isFullWidth=slider.hasClass('full-width');if(isFullWidth){var ratio=sliderWidth/originalWidth,styleDimension={width:slider.data(dataOriginalWidth)*ratio,height:slider.data(dataOriginalHeight)*ratio};slider.find(selectors.slide).css(styleDimension);slider.find(selectors.slide+' .swiper-lazy').css(styleDimension)}else{$(slides).each(function(){var slide=$(this),slideImg=slide.find('.swiper-lazy:first-child'),originalSlideWidth=slide.data(dataOriginalWidth),ratio=sliderWidth/originalSlideWidth;setNodeDimensions(slide,ratio);setNodeDimensions($(slideImg),ratio)})}var height=slider.find(selectors.slideWrapper).height();sliderNavigationContainer.css('height',height);sliderImageContainer.css('height',height);sliderCaptionContainer.css('display','flex');var swiper=this.swiper;if(swiper){cleanUpLightBox.apply(this);var activeIndex=swiper.realIndex;var params=swiper.params;params.initialSlide=activeIndex;swiper.destroy(false);var updatedSwiper=new Swiper(this,params);updatedSwiper.slideReset(0)}})}$(window).on('changed-to-mobile-view',resizeNodes);$(window).on('view-chosen',function(evt,isDesktopView){isMobile=!isDesktopView;$(init)})}(window.oneJQuery));