<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>app.ee96ef.html</title>
</head>
<body>

<script>
(self.webpackChunk_scribd_app_content_preview=self.webpackChunk_scribd_app_content_preview||[]).push([[524],{26824:(e,t,n)=>{"use strict";var a=n(96540),r=n(23791),l=n(67628),i=n(12964),s=n(33664),o=n(38544),c=n(11865),u=n(82419),m=n(2720),d=n(50997),p=n(88127),E=n(97326),v=n(49785),_=n(60842),h=n(48074),g=n(80072),b=n(83993),f=n(35070),w=n(61492),N=n(35290),y=n(24834),I=n(1525),A=n(8443),S=n(36376),O=n(38551),T=n(28218),D=n(55425),R=n(971),k=n(19567),C=n(28609),L=n(70021),P=n(65494),U=n(61344),x=n(5898);const B={CONTENT_ITEM_UPDATED:"contentItem/CONTENT_ITEM_UPDATED",CONTENT_UNLOCKED:"contentItem/CONTENT_UNLOCKED"};var M=n(62020);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={appLink:null,author:{name:null,url:null,id:null,type:null,description:null,hasPublishedDocuments:!1,imageUrl:null,initials:null,retinaImageUrl:null,slug:null},contentItemUrl:null,contentType:null,contentLength:null,contributors:[],consumptionTime:0,criticReviews:[],crosslinks:{categories:[],relatedCategories:[],relatedAuthors:[]},currentUserReviewId:null,description:null,difficultyLevels:null,documentRestriction:null,downloadUrl:null,editorialBlurb:{title:null,description:null},id:null,imageUrl:null,instruments:null,isbn:null,isSeries:!1,isPartOfSeries:!1,isUnlocked:!1,listenProgress:null,otherFormats:[],publisher:{id:null,name:null,url:null},readProgress:null,readUrl:null,releaseDate:null,retinaImageUrl:null,shortTitle:null,shouldShowPreview:!1,summaryCallout:null,summaryList:null,title:null,translators:[]};const H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.CONTENT_ITEM_UPDATED:return(0,x.Ay)(e,(e=>{var{data:n}=t;return W(W({},e),{},{documentRestriction:n.documentRestriction,expiryDate:n.expiryDate})}));case B.CONTENT_UNLOCKED:return(0,x.Ay)(e,(e=>W(W({},e),{},{isUnlocked:!0})));case M.A.REVIEW_ADDED:return(0,x.Ay)(e,(e=>{var{review:n}=t;e.currentUserReviewId=n.id}));case M.A.REVIEW_DELETED:return(0,x.Ay)(e,(n=>{var{reviewId:a}=t;e.currentUserReviewId===a&&(n.currentUserReviewId=null)}));default:return(0,x.Ay)(null,(()=>e))}};function V(){return{type:B.CONTENT_UNLOCKED}}var z=n(39552),Q=[D.g2.AUDIOBOOK,D.g2.BOOK];const X=(0,z.Mz)([e=>e.contentItem.otherFormats],(e=>e.find((e=>Q.includes(e.type)))));function K(e){return(t,n)=>{var{contentItem:{documentRestriction:a,expiryDate:l}}=n();return c.nF.asPromise("get",{url:"".concat(e,"/data")}).then((e=>{var n,i;e.error?((0,c.Cp)(new Error("Content Preview [fetchData]: ".concat(e.error))),t((0,k.A)({autoDismiss:!0,type:D.Jr.ERROR,content:r.A.t("shared.errors.something_went_wrong"),showIcon:!1}))):((0,o.vA)((()=>{t(function(e){return{type:B.CONTENT_ITEM_UPDATED,data:e}}(e.contentItem)),t((0,C.A)(e.documents)),t((0,L.A)(e.compilation)),t((0,P.A)(e.personalization.trialDuration)),t((0,U.A)(e.personalization.country))})),n=a,i=l,(0,c.sx)("content_preview:view",{access_level:n,expiration:i}),(0,R.oe)(e.compilation.uuid))})).catch((e=>{(0,c.Cp)(new Error("Content Preview [fetchData]: ".concat(e.message)))}))}}var q=n(96074);function Y(e){var{collections:t,compilation:n,contentItem:a,currentPage:r,documents:l,flashes:i,i18n:s,modal:o,nwayTests:c,personalization:D,ratings:R,reviews:k,savedDocuments:C,static:{config:L,routes:P,showListFaq:U},user:x}=e,B=(0,u.HY)({aiAssistant:m.A,collections:d.A,compilation:p.A,contentItem:H,currentPage:E.A,document:v.A,documents:_.A,flashes:h.A,i18n:g.A,modal:b.A,nwayTests:f.A,personalization:w.A,quickview:N.A,ratings:y.A,reviews:I.A,savedDocuments:A.A,static:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{},routes:{}}},toast:S.A,user:O.A,viewport:T.A}),M=(0,u.Zz)((0,u.Tw)(q.A)),F={collections:t,compilation:n,contentItem:a,currentPage:r,documents:l,flashes:i,i18n:s,nwayTests:c,personalization:D,ratings:R,reviews:k,savedDocuments:C,static:{config:L,routes:P,showListFaq:U},user:x};return F.modal=o,(0,u.y$)(B,F,M)}function J(e){var t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset()).toLocaleDateString(r.A.language,{year:"numeric",month:"short",day:"numeric"})}function Z(e){if(!e)return new Set([]);var t=(/^[?#]/.test(e)?e.slice(1):e).split("&");return new Set(t)}var $=n(77725),ee="content_preview";function te(e){e.current.scrollIntoView()}var ne=n(86090),ae=n(24371),re=n(64821),le=n(87688),ie=n(23525),se=n(57593),oe=n(55572),ce=n(53528),ue=n(63448),me=n(9826),de=n(51374),pe=n(89666),Ee=n(53600),ve=n(30107),_e=n(48946),he=n(75914);const ge="c6zdDH",be="_3I1kFz",fe="n4Chq5",we="_2xku7H",Ne="_2s6Wip",ye="_3UH_p8",Ie="_3bN4i5";const Ae=(0,o.Ng)((e=>({author:e.contentItem.author})))((function(e){var{author:t}=e;if(0===Object.entries(t).length)return null;var{description:n,imageUrl:l,initials:i,name:s,retinaImageUrl:o,url:c}=t;return a.createElement("div",{"data-e2e":"about-author"},a.createElement("a",{className:ge,href:c},a.createElement("div",{className:be},a.createElement(he.cG,{imageUrl:l,initials:i,isAuthor:!0,retinaImageUrl:o,size:D.F0.L,style:D.Jj.HEADER,className:be})),a.createElement("div",{className:Ne},a.createElement("div",{className:fe},r.A.t("content_preview.author")),a.createElement("h3",{className:ye},s))),a.createElement(oe.LA,{buttonText:r.A.t("shared.common.read_more"),dataE2E:"content-preview-author-description",text:n,maxLines:3,expandButtonClassName:Ie,className:we}))}));const Se={format:"g8mMbi"};function Oe(e){var{type:t,url:n,isInlineOnMobile:l}=e,{ariaLabel:i,icon:s,typeLabel:o}=function(e){var t=r.A.t("content_types.ebook"),n="book_fill";e===D.g2.AUDIOBOOK&&(t=r.A.t("content_types.audiobook"),n="audiobook_fill");return{ariaLabel:r.A.t("content_preview.formats.link_aria_label",{content_type:t}),icon:n,typeLabel:t}}(t);return a.createElement("a",{className:Se.format,"aria-label":i,href:n},a.createElement(oe.In,{icon:s}),l?a.createElement(a.Fragment,null,a.createElement(oe.s8,{width:550,above:!0,inline:!0},r.A.t("content_preview.formats.also_available",{content_type:o.toLowerCase()})),a.createElement(oe.s8,{width:550,atOrBelow:!0,inline:!0},o)):o)}Oe.defaultProps={isInlineOnMobile:!1};const Te="_2WW_p_",De="_2NpkCc";var Re=e=>{var{formats:t}=e,n=a.createElement("p",{className:De},r.A.t("content_preview.formats.also_available",{content_type:""}).trim().concat("..."));return 1===t.length?a.createElement(oe.s8,{width:c.fi.breakpoint_550,atOrBelow:!0},n):n};function ke(e){var{formats:t}=e;return 0===t.length?null:a.createElement("div",{className:Te},a.createElement(Re,{formats:t}),t.map((e=>{var{type:n,url:r}=e;return a.createElement(Oe,{type:n,url:r,isInlineOnMobile:1===t.length,key:r})})))}ke.defaultProps={formats:[]};const Ce=(0,o.Ng)((e=>({formats:e.contentItem.otherFormats})))(ke);var Le=n(49634),Pe=n(87614),Ue=[D.XQ.GEO_RESTRICTED,D.XQ.NOT_AVAILABLE,D.XQ.THROTTLED];function xe(e){var{documentRestriction:t,type:n}=e,a=n===D.g2.AUDIOBOOK,l=a?Pe.OUZ:Pe.UxT,i=function(e){var{documentRestriction:t,isAudiobook:n}=e,a=!Ue.includes(t);return n?a?r.A.t("content_preview.alternate_format.switch_to_audiobook"):r.A.t("content_preview.alternate_format.listen_to_the_audiobook_instead"):a?r.A.t("content_preview.alternate_format.switch_to_ebook"):r.A.t("content_preview.alternate_format.read_the_ebook_instead")}({documentRestriction:t,isAudiobook:a});return{icon:l,text:i}}const Be="Hq3R1y";function Me(e){var{altFormat:t,documentRestriction:n}=e;if(!t||!n)return null;var{type:r,url:l}=t,{icon:i,text:s}=xe({documentRestriction:n,type:r});return a.createElement(Le.QW,{"aria-label":s,className:Be,"data-e2e":"alternate-content-book",href:l,leftIcon:i},s)}Me.defaultProps={documentRestriction:null,altFormat:null};const Fe=(0,o.Ng)((e=>({altFormat:X(e),documentRestriction:e.contentItem.documentRestriction})))(Me);var We="Android",Ge="content_preview",je=(e,t)=>{var n,a;return e===D.rI.EVERAND?t?(n=r.A.t("everand.content_preview.get_app.listen_on"),a=r.A.t("everand.content_preview.get_app.download_to_listen")):(n=r.A.t("everand.content_preview.get_app.read_on"),a=r.A.t("everand.content_preview.get_app.download_to_read")):t?(n=r.A.t("content_preview.get_app.listen_on"),a=r.A.t("content_preview.get_app.download_to_listen")):(n=r.A.t("content_preview.get_app.read_on"),a=r.A.t("content_preview.get_app.download_to_read")),{heading:n,subtitle:a}};const He="_3WZnEI",Ve="_38jG5F",ze="_2_C5X6",Qe="_2ymix7",Xe="_357Y3j";var Ke=n(30145);const qe=(0,o.Ng)((e=>{var{imageUrl:t,title:n,contentType:a}=e.contentItem,r=e.static.config.twilio.enabled,l=e.static.config.brand,i=[D.g2.PODCAST,D.g2.PODCAST_EPISODE,D.g2.AUDIOBOOK].includes(a),{isSubscriber:s}=e.user;return{brand:l,content:{coverImageUrl:t,title:n,type:a},isAudio:i,isSubscriber:s,isTwilioEnabled:r}}),(e=>({openModal:t=>e((0,Ke.A)(t))})))((function(e){var{brand:t,content:n,openModal:r,isAudio:l,isTwilioEnabled:i,isSubscriber:s}=e;if(!s)return null;var{heading:o,subtitle:u}=je(t,l),m=e=>{(0,c.sx)("".concat(Ge,":get_app_promo:web:").concat(e,":click")),r({document:n,saveOnSuccess:!1,twilioEnabled:i,trackingPrefix:Ge})};return a.createElement("div",{className:He,"data-e2e":"app-promo-banner"},a.createElement("h3",{className:Ve},o),a.createElement("div",{className:ze},u),a.createElement("ul",{className:Qe},a.createElement("li",null,a.createElement(Le.QW,{"data-e2e":"app-promo-ios",className:Xe,onClick:()=>m("iOS"),type:"button"},a.createElement(oe.In,{icon:"apple_mark"}),"iOS")),a.createElement("li",null,a.createElement(Le.QW,{"data-e2e":"app-promo-android",className:Xe,type:"button",onClick:()=>m(We)},a.createElement(oe.In,{icon:"android_mark"}),We))))}));var Ye=n(39067),Je=n.n(Ye);const Ze="_1EKBI4",$e="_2_Guns",et="LdkbXF",tt="_2p7uUF";Je().defaultProps={brand:null,locale:"en_US",isAudio:!1};const nt=(0,o.Ng)((e=>{var{contentType:t,id:n,imageUrl:a,retinaImageUrl:r,title:l}=e.contentItem,{config:{brand:i,twilio:{enabled:s}},routes:{androidStoreUrl:o,iosStoreUrl:c}}=e.static;return{androidStoreUrl:o,brand:i,content:{coverImageUrl:a,id:n,title:l,retinaCoverImageUrl:r,type:t},iosStoreUrl:c,isAudio:[D.g2.AUDIOBOOK,D.g2.PODCAST,D.g2.PODCAST_EPISODE].includes(t),isSubscriber:e.user.isSubscriber,isTwilioEnabled:s,locale:e.i18n.currentLanguage.lang,saveOnSuccess:!1}}),(e=>({openModal:t=>{var{document:n,twilioEnabled:a}=t;return e((0,Ke.A)({document:n,saveOnSuccess:!0,slim:!0,trackingPrefix:"get_app_modal",twilioEnabled:a}))}})))((function(e){var{androidStoreUrl:t,brand:n,content:r,iosStoreUrl:l,isAudio:i,isSubscriber:s,isTwilioEnabled:o,locale:c,openModal:u}=e;if(!s)return null;var{heading:m,subtitle:d}=je(n,i);return a.createElement("div",{"data-e2e":"app-promo-banner"},a.createElement("h3",{className:Ze},m),a.createElement("p",{className:$e},d),a.createElement(oe.p1,{androidStoreUrl:t,className:et,imageClass:tt,iosStoreUrl:l,locale:c,openModal:()=>{u({document:r,twilioEnabled:o})}}))}));var at=n(53683);function rt(e){var{type:t}=e,n=(0,o.d4)((e=>e.contentItem)).isUnlocked;return a.createElement(at.rx,{type:n?at.xP.UNLOCKED:t,size:at.mu.SMALL})}rt.defaultProps={type:""};const lt="OQyTlL",it="_3KvpGg",st="_2-9Int";function ot(e){var{contentLength:t,isAbridged:n,isPlusTitle:l,isUnlimitedTitle:i,isUnlocked:s,plansEnabled:o}=e,u=n?r.A.t("content_types.audiobook_abridged"):r.A.t("content_types.audiobook");return a.createElement("div",{className:lt},o&&(l||i||s)?a.createElement(a.Fragment,null,a.createElement(rt,{type:s?r.A.t("shared.plans.unlocked"):l?D.Uc.PLUS:D.Uc.UNLIMITED}),a.createElement(Pe.pBB,{className:st})):null,a.createElement("span",{className:it},u),a.createElement(Pe.pBB,{className:st}),a.createElement("span",{className:it},(0,c.m8)(t)))}ot.defaultProps={isAbridged:!1,isPlusTitle:!1,isUnlimitedTitle:!1,isUnlocked:!1,plansEnabled:!1};const ct=(0,o.Ng)((e=>{var t,n,a,r,l=e.contentItem,i=null!==(t=null===(n=e.personalization)||void 0===n?void 0:n.featureFlags)&&void 0!==t?t:{};return{contentLength:l.contentLength,isAbridged:Boolean(l.isAbridged),isPlusTitle:(null===l||void 0===l||null===(a=l.catalog)||void 0===a?void 0:a.tier)===D.Uc.PLUS,isUnlimitedTitle:(null===l||void 0===l||null===(r=l.catalog)||void 0===r?void 0:r.tier)===D.Uc.UNLIMITED,isUnlocked:null===l||void 0===l?void 0:l.isUnlocked,plansEnabled:Boolean(i.plansEnabled)}}))(ot),ut={wrapper:"_2mzx8C",text:"_1a3bj9",dot:"tdQ-3F"};function mt(e){var{consumptionTime:t}=e;return 0===t?null:a.createElement(a.Fragment,null,a.createElement(Pe.pBB,{className:ut.dot}),a.createElement("span",{className:ut.text,"data-e2e":"content-time"},(0,c.m8)(t)))}function dt(e){var{contentLength:t,consumptionTime:n,isPlusTitle:l,isUnlimitedTitle:i,isUnlocked:s,plansEnabled:o}=e;return a.createElement("div",{className:ut.wrapper},o&&(l||i||s)?a.createElement(a.Fragment,null,a.createElement(rt,{type:s?r.A.t("shared.plans.unlocked"):l?D.Uc.PLUS:D.Uc.UNLIMITED}),a.createElement(Pe.pBB,{className:ut.dot})):null,a.createElement("span",{className:ut.text},r.A.t("content_types.ebook")),a.createElement(Pe.pBB,{className:ut.dot}),a.createElement("span",{className:ut.text,"data-e2e":"content-length"},r.A.t("shared.content_lengths.page_with_count",{count:t})),a.createElement(mt,{consumptionTime:n}))}dt.defaultProps={consumptionTime:0,isPlusTitle:!1,isUnlimitedTitle:!1,isUnlocked:!1,plansEnabled:!1};const pt=(0,o.Ng)((e=>{var t,n,a,r,l=e.contentItem,i=null!==(t=null===(n=e.personalization)||void 0===n?void 0:n.featureFlags)&&void 0!==t?t:{};return{consumptionTime:l.consumptionTime,contentLength:l.contentLength,isPlusTitle:(null===l||void 0===l||null===(a=l.catalog)||void 0===a?void 0:a.tier)===D.Uc.PLUS,isUnlimitedTitle:(null===l||void 0===l||null===(r=l.catalog)||void 0===r?void 0:r.tier)===D.Uc.UNLIMITED,isUnlocked:null===l||void 0===l?void 0:l.isUnlocked,plansEnabled:Boolean(i.plansEnabled)}}))(dt);const Et=(0,o.Ng)((e=>({crumbs:e.currentPage.breadcrumbs})))(oe.qp),vt={wrapper:"_3_evbs",responsive:"_166Usa",contributor:"_2ndSt3",andMoreButton:"_2AEFXU"};function _t(e){var{contributor:t,isLast:n,isPossessive:r,separator:l}=e,i=n&&r?t.possessiveName:t.name;return a.createElement(a.Fragment,null,l,a.createElement(oe.QW,{className:vt.contributor,href:t.url,"data-user_id":t.id},i))}const ht={wrapper:"_3m-yXb",andMoreButton:"_12-_Db",contributor:"rroope"};function gt(e){var{contributor:t,isLast:n,isPossessive:r,separator:l}=e,i=n&&r?t.possessiveName:t.name;return a.createElement(a.Fragment,null,l,a.createElement(Le.QW,{className:ht.contributor,href:t.url,"data-user_id":t.id},i))}var bt=4,ft=3;function wt(e){var{"data-e2e":t,contributors:n,label:l,isPossessive:i}=e;if(!n.length)return null;var s,o,c=n.length,[u,m]=(0,a.useState)(c>4),[d,p]=(0,a.useState)(!1),E=e=>e===c-1,v=e=>0===e?null:E(e)?" ".concat(r.A.t("shared.byline.and")," "):", ";return c<=bt||d?s=n:(o=c-ft,s=n.slice(0,ft)),a.createElement("p",{className:vt.wrapper,"data-e2e":t},"".concat(l," "),s.map(((e,t)=>a.createElement(_t,{key:e.id,contributor:e,isLast:E(t),isPossessive:i,separator:v(t)}))),u?a.createElement(a.Fragment,null," ".concat(r.A.t("shared.byline.and")," "),a.createElement(oe.QW,{className:vt.andMoreButton,onClick:()=>{m(!1),p(!0)}},r.A.t("content_preview.byline.and_more_with_count.more_with_count",{count:o}))):null)}var Nt=4,yt=3;function It(e){var{"data-e2e":t,contributors:n,label:l,isPossessive:i}=e;if(!n.length)return null;var s,o,c=n.length,[u,m]=(0,a.useState)(c>4),[d,p]=(0,a.useState)(!1),E=e=>e===c-1,v=e=>0===e?null:E(e)?" ".concat(r.A.t("shared.byline.and")," "):", ";return c<=Nt||d?s=n:(o=c-yt,s=n.slice(0,yt)),a.createElement("p",{className:ht.wrapper,"data-e2e":t},"".concat(l," "),s.map(((e,t)=>a.createElement(gt,{key:e.id,contributor:e,isLast:E(t),isPossessive:i,separator:v(t)}))),u?a.createElement(a.Fragment,null," ".concat(r.A.t("shared.byline.and")," "),a.createElement(Le.QW,{className:ht.andMoreButton,onClick:()=>{m(!1),p(!0)}},r.A.t("content_preview.byline.and_more_with_count.more_with_count",{count:o}))):null)}const At=(e,t)=>{if(t===D.g2.SUMMARY_CANONICAL)return r.A.t("shared.common.key_insights");if(t===D.g2.DOCUMENT)return r.A.t("shared.common.uploaded_by");if(t!==D.g2.AUDIOBOOK)return r.A.t("shared.byline.by");switch(e.type){case"author":return r.A.t("shared.byline.written_by");case"publisher":return r.A.t("shared.byline.published_by");default:return r.A.t("shared.byline.by")}},St="_1gvXkP";function Ot(e){var{contentType:t,contributors:n,"data-e2e":l,narrators:i}=e;return n.length||i.length?a.createElement("div",{className:St,"data-e2e":l},a.createElement(wt,{"data-e2e":"authors",contributors:n,label:At(n[0],t),isPossessive:t===D.g2.SUMMARY_CANONICAL}),a.createElement(wt,{"data-e2e":"narrators",contributors:i,label:r.A.t("shared.byline.narrated_by"),isPossessive:!1})):null}Ot.defaultProps={contributors:[],narrators:[]};var Tt=["translator","editor","user"],Dt=e=>{var{contributors:t}=e.contentItem,n=t.filter((e=>!Tt.includes(e.type)));return{contentType:e.contentItem.contentType,contributors:n,narrators:e.contentItem.narrators}};const Rt=(0,o.Ng)(Dt)(Ot),kt="_1_xT58";function Ct(e){var{contentType:t,contributors:n,"data-e2e":l,narrators:i}=e;return n.length||i.length?a.createElement("div",{className:kt,"data-e2e":l},a.createElement(It,{"data-e2e":"authors",contributors:n,label:At(n[0],t),isPossessive:t===D.g2.SUMMARY_CANONICAL}),a.createElement(It,{"data-e2e":"narrators",contributors:i,label:r.A.t("shared.byline.narrated_by"),isPossessive:!1})):null}Ct.defaultProps={contributors:[],narrators:[]};const Lt=(0,o.Ng)(Dt)(Ct);var Pt=n(92629),Ut=n(27631);const xt={wrapper:"_1TRm51",button:"_3AAxs5",card:"_3QQaFb",cardItem:"_3J7nHt",cardListWrapper:"_1_NlAg",cardList:"_1ACzOV",position:"_2J-5Q7"};function Bt(e){var{document:t,index:n,isLoggedIn:r,isSaved:l,plansEnabled:i}=e,{handleSave:s}=(0,Ut.A)({documentId:t.id,isSaved:l,page:ee}),o=t.upvoteCount+t.downvoteCount;return a.createElement(R.QY,{uuid:t.uuid},a.createElement(oe.z6,{author:t.author,authorUrl:t.authorUrl,className:xt.card,catalog:t.catalog,contentPreviewUrl:t.previewUrl,"data-e2e":"series-card-item",description:t.description||"",id:t.id,imageUrl:t.imageUrl,isLoggedIn:r,isPreSaved:l,isSeries:t.isSeries,isUnlocked:t.isUnlocked,onSaveClick:s,onRemoveClick:s,plansEnabled:i,ranking:n,rankingClassName:xt.position,rating:t.ratingAverage,retinaImageUrl:t.retinaImageUrl,thumbnailType:t.type===D.g2.AUDIOBOOK?D.RO.AUDIOBOOK:D.RO.BOOK,title:t.title,totalRatings:o,type:t.type}))}Bt.defaultProps={plansEnabled:!1};function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gt=(0,z.Mz)((e=>e.documents),(e=>e.savedDocuments),(e=>{var t;return null===e||void 0===e||null===(t=e.compilation)||void 0===t?void 0:t.modules.find((e=>"from_series"===e.type))}),(e=>e.user),(e=>{var t,n,a;return null!==(t=null===(n=e.personalization)||void 0===n||null===(a=n.featureFlags)||void 0===a?void 0:a.plansEnabled)&&void 0!==t&&t}),((e,t,n,a,r)=>{if(!n||0===Object.values(e).length)return{};var{documents:l,subtitle:i,title:s,uuid:o}=n,{isLoggedIn:c,isBot:u}=a;return{documents:l.map((t=>Ft(Ft({},e[t.id]),{},{uuid:t.uuid}))),isBot:u,isLoggedIn:c,plansEnabled:r,savedDocuments:t,subtitle:i,title:s,uuid:o}}));var jt=6,Ht=3;function Vt(e){return e<=D.LO.DS2.m?Ht:jt}var zt=29767;function Qt(){var e=function(){var e=(0,o.d4)((e=>e.viewport.width)),[t,n]=(0,a.useState)(Vt(e));return(0,a.useEffect)((()=>{n(Vt(e))}),[e]),t}(),[t,n]=(0,a.useState)(e),{documents:l,isBot:i,isLoggedIn:s,plansEnabled:c,savedDocuments:u,subtitle:m,title:d,uuid:p}=(0,o.d4)(Gt);if(!l)return null;var E=i?l:l.slice(0,t);return a.createElement("div",{"data-e2e":"card-list",className:xt.wrapper},a.createElement(R.Y9,{title:d,subtitle:m,uuid:p}),a.createElement("div",{className:xt.cardListWrapper},a.createElement("ul",{className:xt.cardList},E.map((e=>{var t=void 0===e.position||e.position===zt?"":e.position.toString();return a.createElement("li",{key:e.id,className:xt.cardItem},a.createElement(Bt,{document:e,index:t,isLoggedIn:s,isSaved:Boolean(u.saved[e.id]||u.finished[e.id]),plansEnabled:c}))}))),t>=l.length?null:a.createElement(Pt.tA,{className:xt.button,onClick:()=>n(t+e),size:Pt.BN.LARGE},r.A.t("shared.common.show_more"))))}const Xt={wrapper:"_17hG7G",categoryHeader:"_2twUFo",list:"_2PAlte",listItem:"LCUQkb"};function Kt(e){var{categories:t,header:n}=e;return t&&0!==t.length?a.createElement("div",{className:Xt.wrapper,"data-e2e":"category-crosslinks"},""===n?null:a.createElement("h2",{className:Xt.categoryHeader},n),a.createElement(oe.El,null,a.createElement("ul",{className:Xt.list},t.map((e=>{var{href:t,id:n,label:r,thumbnailUrl:l,retinaThumbnailUrl:i}=e;return a.createElement("li",{"data-e2e":"category-crosslinks-item",className:Xt.listItem,key:n,onClick:()=>function(e){var{href:t,id:n,slug:a}=e;(0,c.sx)("seo_crosslinks:click",{category:{id:n,slug:a},destination:t,location:window.location.href,page:ee})}(e)},a.createElement(oe.DY,{href:t,label:r,thumbnailUrl:l,retinaThumbnailUrl:i}))}))))):null}Kt.defaultProps={categories:[],header:""};var qt=n(21726),Yt=n(70426);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){var{inPlansV2:t,onTrialButtonClick:n,onReadButtonClick:r,wrapperClassName:l}=e,i=(0,o.wA)(),s=(0,o.d4)((e=>e.contentItem)),u=(0,o.d4)((e=>e.documents[s.id])),m=(0,o.d4)((e=>e.user)),d=(0,qt.A)({contentItem:s,user:m,brand:D.rI.EVERAND,contentType:s.contentType}),p=()=>{(0,o.vA)((()=>{i(V()),u&&i((0,Yt.A)(Zt(Zt({},u),{},{isUnlocked:!0})))}))},E=()=>{(0,c.sx)("BUTTON_CLICK",{cta:"unlock_title",doc_id:s.id,page:"content_preview",type:"premium_credits"})};return t?a.createElement(oe.WQ,{contentType:s.contentType,document:s,handleUnlockButtonTracking:E,onTrialButtonClick:n,onReadButtonClick:r,onUnlock:p,page:"content_preview",userContentStatus:d,wrapperClassName:l}):a.createElement(oe.wT,{contentType:s.contentType,document:s,handleUnlockButtonTracking:E,onTrialButtonClick:n,onReadButtonClick:r,onUnlock:p,page:"content_preview",userContentStatus:d,wrapperClassName:l})}oe.wT.propTypes={inPlansV2:Je().bool,onReadButtonClick:Je().func,onTrialButtonClick:Je().func,wrapperClassName:Je().string},oe.wT.defaultProps={inPlansV2:!1,onReadButtonClick:c.lQ,onTrialButtonClick:c.lQ};const tn="_5qBFsi";function nn(e){var{children:t}=e;return a.createElement("section",{className:tn},t)}const an=(0,o.Ng)((e=>{var{consumptionTime:t,contentLength:n,contentType:a,isSeries:r}=e.contentItem;return{consumptionTime:t,contentLength:n,contentType:a,isSeries:r}}))(oe.qt),rn="FtRy_z";var ln=e=>({contentType:e.contentItem.contentType,title:e.contentItem.title});const sn=(0,o.Ng)(ln)((function(e){var{contentType:t,"data-e2e":n,title:r}=e,l=t===D.g2.PODCAST_EPISODE?(0,c.pL)(r):r;return a.createElement("h1",{className:rn,"data-e2e":n,dangerouslySetInnerHTML:{__html:l}})}));var on=n(40451),cn=n.n(on);const un="_442oJ",mn="yi6rdq",dn="_1LsOiy",pn="_2DSt--";var En="initial",vn="truncated",_n="expanded";const hn=(0,o.Ng)(ln)((function(e){var{contentType:t,"data-e2e":n,title:l}=e,i=t===D.g2.PODCAST_EPISODE?(0,c.pL)(l):l,[s,o]=(0,a.useState)(En),u=s===_n,m=s===En,d=(0,a.useCallback)((e=>{if(e){var{clientHeight:t,scrollHeight:n}=e;n>t&&m&&o(vn)}}));return a.createElement(a.Fragment,null,a.createElement("h1",{className:cn()(un,{[mn]:!u}),"data-e2e":n,ref:d,dangerouslySetInnerHTML:{__html:i}}),u?null:a.createElement(Le.QW,{className:cn()(dn,{[pn]:m}),onClick:()=>{o(_n)}},r.A.t("content_preview.title.show_full_title")))})),gn="bp-yv6",bn="W7ze9R",fn="_34Ip3E",wn="_3PNZqj";const Nn=(0,o.Ng)((e=>{var{documentRestriction:t,expiryDate:n,availableDate:a}=e.contentItem;return{documentRestriction:t,expiryDate:n,availableDate:a}}))((function(e){var{documentRestriction:t,expiryDate:n,availableDate:l,"data-e2e":i}=e,s=((e,t,n)=>({[D.XQ.NOT_AVAILABLE]:r.A.t("content_preview.unavailable"),[D.XQ.GEO_RESTRICTED]:r.A.t("content_preview.geo_restricted"),[D.XQ.EXPIRING]:r.A.t("shared.content_preview.leaving_everand",{date:J(t)}),[D.XQ.THROTTLED]:r.A.t("content_preview.available_on",{date:J(n)})}[e]))(t,n,l);if(!s)return a.createElement("div",{className:wn});var o=t===D.XQ.THROTTLED,c=t===D.XQ.EXPIRING;return a.createElement("div",{className:cn()(gn,{[bn]:o,[fn]:c}),"data-e2e":i},a.createElement(oe.In,{icon:o?"availablesoon_small":"remove_download"}),a.createElement("span",null,s))}));const yn="_3uE4Wm";const In=(0,o.Ng)((e=>({contentType:e.contentItem.contentType,docId:e.contentItem.id})))((function(e){var{contentType:t,docId:n}=e;return a.createElement(oe.nF,{className:yn,href:"/recs_explainer/".concat(t,"/").concat(n),target:"_blank","data-testid":"debug-recs-button"},"Debug Recs")}));var An=(e,t)=>{var{editorialBlurb:n={},description:a="",contentType:r}=e.contentItem;return{contentType:r,description:a,showHeading:t.showHeading||!!n.title||!!n.description}};const Sn=(0,o.Ng)(An)(oe.VY),On="_3ezex7",Tn="zt5bAo",Dn="_3y7kZQ";function Rn(e){var{contentType:t,description:n,isSeries:l,maxLines:i}=e;if(!n)return null;return a.createElement("div",{className:On},a.createElement("h2",{className:Tn},!0===l?r.A.t("content_preview.description.about_this_series"):t===D.g2.AUDIOBOOK?r.A.t("content_preview.description.about_this_audiobook"):r.A.t("content_preview.description.about_this_ebook")),a.createElement(oe.LA,{buttonText:r.A.t("shared.common.read_more"),expandButtonClassName:Dn,containsHTML:!0,maxLines:i,text:n,"data-e2e":"description"}))}Rn.defaultProps={isSeries:!1};const kn=(0,o.Ng)(An)(Rn),Cn="hlnPwV",Ln="_1kkbOy",Pn="_2G_WQf";const Un=(0,o.Ng)((e=>{var{editorialBlurb:t={}}=e.contentItem;return{description:t.description,title:t.title}}))((function(e){var{title:t,description:n}=e;return n?a.createElement("div",{"data-e2e":"content-preview-editorial"},a.createElement("h2",{className:Cn},r.A.t("content_preview.editors_note")),t?a.createElement("h3",{className:Ln},t):null,a.createElement("p",{className:Pn},n)):null}));var xn="advanced",Bn="beginner",Mn="intermediate",Fn="mixed",Wn=(Object.values(D.g2),"alto_sax"),Gn="bass",jn="brass",Hn="cello",Vn="clarinet",zn="double_bass",Qn="drums_percussion",Xn="flute_piccolo",Kn="french_horn",qn="guitar",Yn="piano",Jn="recorder",Zn="tenor_sax",$n="trombone",ea="trumpet",ta="tuba",na="ukulele",aa="viola",ra="violin",la="vocal",ia="woodwinds",sa=5,oa=0,ca="format",ua="isbn",ma="language",da="publisher",pa="releaseDate",Ea="asc",va="desc",_a="rightClickTrackingData";const ha="_3Owc-7",ga="_2_-H2f",ba="_2bWSTt",fa="KVyf11",wa="_3F3ya5",Na="RR8NLw",ya="_1XQU7p",Ia="_2BNTS2";function Aa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sa extends a.PureComponent{constructor(){super(...arguments),Aa(this,"buttonMenuLabel",(e=>e===Ea?r.A.t("content_preview.episode_list.sort_oldest"):r.A.t("content_preview.episode_list.sort_newest"))),Aa(this,"renderButton",(()=>a.createElement(Le.QW,{className:fa},a.createElement("span",null,this.buttonMenuLabel(this.props.sortDirection)),a.createElement(oe.In,{className:Ia,icon:"dropdown_alt","data-e2e":"podcast-series-sort-menu-icon"})))),Aa(this,"renderMenu",(()=>a.createElement("ul",{role:"menu",className:wa},[Ea,va].map((e=>{var t=this.props.sortDirection===e;return a.createElement("li",{role:"none",key:e},a.createElement(Le.QW,{className:Na,onClick:()=>this.props.onSort(e)},a.createElement("span",{className:cn()(ya,{selected:t})},this.buttonMenuLabel(e)),t?a.createElement(oe.In,{icon:"checkmark_bold",hiddenText:r.A.t("content_preview.episode_list.sort_selected")}):null))})))))}get episodeCount(){var{currentPage:e,perPage:t,episodeCount:n}=this.props;return 0===n?r.A.t("content_preview.episode_list.episode_count",{count:n}):r.A.t("content_preview.episode_list.episode_range",{min:(e-1)*t+1,max:Math.min(e*t,n),count:n})}render(){return a.createElement("div",null,a.createElement("div",{className:ha},a.createElement("h2",{className:ga},r.A.t("content_preview.episode_list.title"),a.createElement("span",{className:ba,"data-e2e":"podcast-series-table-header-episode-count"},this.episodeCount)),a.createElement(oe.s8,{atOrAbove:!0,width:c.fi.breakpoint_550},a.createElement("div",null,a.createElement(oe.y$,{button:this.renderButton(),menu:this.renderMenu(),noFullscreen:!0})))))}}function Oa(e){var{isSaved:t}=e,n=t?"saved_for_later_1px":"save_for_later_1px";return a.createElement(oe.In,{icon:n})}const Ta="_3Vsupb",Da="_2f4mb1",Ra="T5o9hd",ka="_1z5ofR",Ca="_1CL7W0",La="_34dHxy",Pa="_20L7el",Ua="_350w58",xa="_1QF0HN",Ba="_32Nr1A",Ma="_13qdQY";function Fa(e){var{episode:t,onPlay:n}=e;return a.createElement("li",{className:Ta,"data-e2e":"content-preview-list-item"},a.createElement("div",{className:Pa},a.createElement(Le.QW,{className:Ua,"data-e2e":"podcast-episode-player-button",target:"_blank",href:t.url,"aria-label":r.A.t("content_preview.episode_list.start_playing_episode",{episodeTitle:t.title}),onClick:()=>n(t.documentId)},a.createElement(oe.In,{icon:"audiobook_play_small"})),a.createElement(oe.s8,{atOrAbove:!0,width:c.fi.breakpoint_550},a.createElement("div",{className:Ca},r.A.t("shared.content_lengths.minute_with_count",{count:t.duration})))),a.createElement("div",{className:Da},a.createElement("a",{href:t.previewUrl},a.createElement("h3",{className:La,"data-e2e":"podcast-episode-title"},t.title),a.createElement("p",{className:Ra},t.description),a.createElement(oe.s8,{below:!0,width:c.fi.breakpoint_550},a.createElement("div",{className:ka},r.A.t("shared.content_lengths.minute_with_count",{count:t.duration}))))),a.createElement("div",{className:xa},a.createElement("div",{className:Ba,tabIndex:-1},t.releaseDate),a.createElement(oe.Fn,{className:Ma,id:t.id,title:t.title,page:ee},a.createElement(Oa,{isLoading:!1}))))}function Wa(e){var{isSaved:t}=e,n=t?"saved_for_later_1px":"save_for_later_1px";return a.createElement(oe.In,{icon:n})}const Ga="_2nfmZV",ja="_3lLCN7",Ha="_1nfXuX",Va="_1IBctF",za="MUEOwH",Qa="ZMwJNm",Xa="_1AbM9M",Ka="_2zmIjo",qa="_2CLEgp",Ya="_1qKON5",Ja="_3vSU2_",Za="CQO7ZI",$a="_2PSO5a";function er(e){var{episodes:t,sortDirection:n,onSort:l,onPlay:i}=e,s=n===Ea?"arrow_small_up_alt":"dropdown_alt";return a.createElement("table",{className:Ga},a.createElement("thead",null,a.createElement("tr",{className:ja},a.createElement("th",null,a.createElement(oe.s6,null,r.A.t("content_preview.episode_list.heading_row.play"))),a.createElement("th",null,r.A.t("content_preview.episode_list.heading_row.title")),a.createElement("th",null,a.createElement(Le.QW,{className:Va,onClick:()=>l(n===Ea?va:Ea)},r.A.t("content_preview.episode_list.heading_row.date"),a.createElement(oe.In,{className:za,icon:s,"data-e2e":"podcast-series-sort-button"}))),a.createElement("th",null,a.createElement(oe.s6,null,r.A.t("content_preview.episode_list.heading_row.save"))))),a.createElement("tbody",null,t.map((e=>a.createElement("tr",{key:e.id,className:Ha},a.createElement("td",{className:Ja},a.createElement(Le.QW,{className:Qa,"data-e2e":"podcast-episode-player-button",target:"_blank",href:e.url,"aria-label":r.A.t("content_preview.episode_list.start_playing_episode",{episodeTitle:e.title}),rel:"noopener noreferrer nofollow",onClick:()=>i(e.documentId)},a.createElement(oe.In,{icon:"audiobook_play_small"}))),a.createElement("td",{className:Xa},a.createElement("a",{href:e.previewUrl,target:"_blank"},a.createElement("h3",{className:Ya,"data-e2e":"podcast-episode-title"},e.title),a.createElement("p",{className:Ka},e.description),a.createElement("div",{className:qa},r.A.t("shared.content_lengths.minute_with_count",{count:e.duration})))),a.createElement("td",{className:Za},e.releaseDate),a.createElement("td",null,a.createElement(oe.Fn,{className:$a,id:e.documentId,title:e.title,page:ee,"data-e2e":"podcast-episode-save-button"},a.createElement(Wa,null))))))))}var tr=n(32054),nr=n(12784),ar=n.n(nr);const rr="_2cideL",lr="_1PRynt",ir="_1voUFS",sr="_3M9CPL",or="_2Fj3Mi",cr="_3BpuqI",ur="_1PMZbz",mr="_1xY3sE",dr="_1D29WR";function pr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Er={DESKTOP:c.fi.breakpoint_1024,TABLET:c.fi.breakpoint_700},vr=8,_r=6,hr=2;class gr extends a.Component{constructor(e){super(e),pr(this,"updateWidth",(()=>{this.setState({pageRange:this.pagesOnScreenSize()})})),pr(this,"handlePageClick",(e=>{var{selected:t}=e;this.props.onPageChange(t+1)})),pr(this,"pagesOnScreenSize",(()=>{var{TABLET:e,DESKTOP:t}=Er,n=window.innerWidth;return n>=t?vr:n>=e?_r:hr})),pr(this,"renderNextButton",(()=>a.createElement(a.Fragment,null,a.createElement(oe.s8,{below:!0,width:c.fi.breakpoint_550},a.createElement("span",{"data-e2e":"pagination_next"},r.A.t("content_preview.episode_list.pagination.next"))),a.createElement(oe.In,{className:mr,icon:"right_caret_alt"})))),pr(this,"renderPreviousButton",(()=>a.createElement(a.Fragment,null,a.createElement(oe.In,{className:mr,icon:"arrow_small_left_alt"}),a.createElement(oe.s8,{below:!0,width:c.fi.breakpoint_550},a.createElement("span",{"data-e2e":"pagination_previous"},r.A.t("content_preview.episode_list.pagination.previous")))))),pr(this,"renderAriaLabel",(e=>r.A.t("search.pagination.page_number",{page_number:e}))),this.state={pageRange:this.pagesOnScreenSize()},this.updateWidth=ar()(this.updateWidth,100)}componentDidMount(){this.updateWidth(),window.addEventListener("resize",this.updateWidth)}componentWillUnmount(){window.removeEventListener("resize",this.updateWidth)}render(){return a.createElement("div",{"data-e2e":"pagination"},a.createElement(tr.A,{previousLabel:this.renderPreviousButton(),nextLabel:this.renderNextButton(),breakLabel:"...",breakClassName:dr,forcePage:this.props.currentPage-1,pageCount:this.props.pageCount,marginPagesDisplayed:1,pageRangeDisplayed:this.state.pageRange,onPageChange:this.handlePageClick,containerClassName:rr,ariaLabelBuilder:this.renderAriaLabel,activeClassName:lr,pageClassName:sr,pageLinkClassName:ir,previousClassName:or,nextClassName:cr,disabledClassName:ur}))}}const br="_3jKjV6",fr="_26QG2W",wr="BByrCW";function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ir extends a.PureComponent{constructor(){super(...arguments),yr(this,"containerRef",(0,a.createRef)()),yr(this,"_isMounted",!1),yr(this,"urlParams",new URLSearchParams(this.props.location.search)),yr(this,"state",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({episodes:this.props.episodes,loading:!1},this.initialPagination)),yr(this,"handleEpisodeClick",(e=>{(0,c.sx)("podcasts:podcast_series:play:click",{document_id:e,user_id:this.props.userId})})),yr(this,"handlePageChange",(e=>this.updateHistory({page:e}))),yr(this,"handleSortChange",(e=>this.updateHistory({sort:e}))),yr(this,"fetchEpisodes",(e=>{var{page:t=1,sort:n=this.state.sort}=e,a=(0,c.JT)(this.props.location.pathname,{page:t,sort:n});this.setState({loading:!0},(()=>c.nF.asPromise("get",{url:a}).then((e=>{this._isMounted&&this.setState({episodes:e.episodes,page:e.pagination.currentPage,sort:n,loading:!1})})).then((()=>{this.scrollToTop()})).catch((()=>{this._isMounted&&this.setState({loading:!1})}))))}))}get pageCount(){return this.props.pagination.pageCount}get scrollBuffer(){return window.innerWidth<c.fi.breakpoint_550?78:84}get initialPagination(){return{page:this.props.pagination.currentPage,sort:this.urlParams.get("sort")||va}}componentDidMount(){this._isMounted=!0}componentDidUpdate(e){var{search:t,state:n=this.initialPagination}=this.props.location,{search:a}=e.location;t!==a&&this.fetchEpisodes(n)}componentWillUnmount(){this._isMounted=!1}updateHistory(e){var{page:t=1,sort:n=this.state.sort}=e,a=(0,c.JT)(this.props.location.pathname,{page:t,sort:n});this.props.history.push(a,{page:t,sort:n})}scrollToTop(){var e=this.containerRef.current.getBoundingClientRect().top+window.pageYOffset-this.scrollBuffer;scrollTo({top:e,behavior:"smooth"})}render(){return a.createElement("div",{className:br,"data-e2e":"content-preview-episode-list",ref:this.containerRef},this.state.loading?a.createElement(oe.fO,{className:fr,"data-e2e":"podcast-series-table-loading",size:"large"}):null,a.createElement(Sa,{currentPage:this.state.page,perPage:10,episodeCount:this.props.episodeCount,sortDirection:this.state.sort,onSort:this.handleSortChange}),a.createElement(oe.s8,{atOrAbove:!0,width:c.fi.breakpoint_550},a.createElement("ul",{className:wr,"data-e2e":"content-preview-list"},this.state.episodes.map((e=>a.createElement(Fa,{key:e.id,episode:e,onPlay:this.handleEpisodeClick}))))),a.createElement(oe.s8,{below:!0,width:c.fi.breakpoint_550},a.createElement(er,{episodes:this.state.episodes,sortDirection:this.state.sort,onSort:this.handleSortChange,onPlay:this.handleEpisodeClick})),a.createElement(gr,{currentPage:this.state.page,pageCount:this.pageCount,onPageChange:this.handlePageChange}))}}Ir.defaultProps={episodes:[]};const Ar=(0,o.Ng)((e=>{var{episodes:t,episodeCount:n,pagination:a}=e.contentItem;return{episodes:t,episodeCount:n,pagination:a,userId:e.user.id}}))((0,ne.y)(Ir)),Sr="_1oDj1d",Or="_2dbJCJ",Tr="_2eYeDR",Dr="_1kzZFv";var Rr=e=>{var{documentRestriction:t}=e.contentItem;return{documentRestriction:t}};const kr=(0,o.Ng)(Rr)((function(e){var{documentRestriction:t}=e;return t!==D.XQ.FULL_ACCESS?null:a.createElement("div",{className:Sr,"data-e2e":"included-in-your-membership"},a.createElement(oe.In,{icon:"checkmark_bold"}),a.createElement("div",{className:Or},a.createElement("div",{className:Tr},r.A.t("content_preview.included_in_your_membership.included")),a.createElement("div",{className:Dr},r.A.t("content_preview.included_in_your_membership.no_additional"))))})),Cr="_fNiNf";(0,o.Ng)(Rr)((function(e){var{documentRestriction:t}=e;return t!==D.XQ.FULL_ACCESS?null:a.createElement("p",{className:Cr,"data-e2e":"included-in-your-membership"},r.A.t("content_preview.included_in_your_membership.included"))}));const Lr="_1qvgrU";function Pr(e){var{children:t}=e;return a.createElement("div",{className:Lr},a.createElement(oe.tH,null,t))}const Ur={wrapper:"PJSb-8",title:"_3pFfsX",content:"_2v4Bd4"};function xr(e){var{label:t,children:n,"data-e2e":r}=e;return a.createElement("div",{className:Ur.wrapper,"data-e2e":r},a.createElement("span",{className:Ur.title,"data-e2e":"label"},"".concat(t,":")),a.createElement("div",{className:Ur.content,"data-e2e":"value"},n))}const Br="thPfwz",Mr="_3bR0aB",Fr="_3UVu7t";const Wr=(0,o.Ng)((e=>({format:e.contentItem.contentType})))((function(e){var{format:t}=e;return t?a.createElement(xr,{label:r.A.t("content_preview.metadata.format"),"data-e2e":"content-preview-metadata-format"},a.createElement("div",{className:Br},a.createElement("div",{className:Mr},function(e){switch(e){case D.g2.BOOK:case D.g2.BOOK_EXCERPT:case D.g2.BOOK_UNAVAILABLE:return r.A.t("content_types.book");case D.g2.SHEET_MUSIC:case D.g2.SHEET_MUSIC_CHAPTER:return r.A.t("content_types.sheet_music");case D.g2.PODCAST_EPISODE:return r.A.t("content_types.podcast_episode");default:return r.A.t("content_types.".concat(e))}}(t)),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement("div",{className:Fr},a.createElement(Ce,null))))):null}));const Gr=(0,o.Ng)((e=>({isbn:e.contentItem.isbn})))((function(e){var{isbn:t}=e;return t?a.createElement(xr,{label:r.A.t("content_preview.metadata.isbn"),"data-e2e":"metadata-isbn"},a.createElement("span",null,t)):null}));const jr=(0,o.Ng)((e=>({language:e.contentItem.language})))((function(e){var{language:t}=e;return t?a.createElement(xr,{label:r.A.t("content_preview.metadata.language"),"data-e2e":"content-preview-metadata-language"},a.createElement("span",null,t)):null}));const Hr="_2VwaJs";const Vr=(0,o.Ng)((e=>{var{publisher:t={}}=e.contentItem;return{name:t.name,url:t.url}}))((function(e){var{name:t,url:n}=e;return t?a.createElement(xr,{label:r.A.t("content_preview.metadata.publisher"),"data-e2e":"metadata-publisher"},n?a.createElement(oe.QW,{className:Hr,href:n},t):a.createElement("span",null,t)):null}));const zr=(0,o.Ng)((e=>({releaseDate:e.contentItem.releaseDate})))((function(e){var{releaseDate:t}=e;if(!t)return null;var n=J(t);return a.createElement(xr,{label:r.A.t("content_preview.metadata.released"),"data-e2e":"content-preview-metadata-release-date"},a.createElement("span",null,n))})),Qr="_2kgMB-",Xr="_3EkD_G";function Kr(e){var{types:t}=e;return a.createElement("div",{className:t.length<=2?Xr:Qr,"data-e2e":"content-preview-metadata"},t.map(((e,t)=>{var n="".concat(e,"_").concat(t);switch(e){case ca:return a.createElement(Wr,{key:n});case ua:return a.createElement(Gr,{key:n});case da:return a.createElement(Vr,{key:n});case pa:return a.createElement(zr,{key:n});case ma:return a.createElement(jr,{key:n});default:return null}})))}const qr="_2balqs",Yr="_3ctsXW",Jr="_1OJGbU",Zr="_3dNsS3",$r="_3f04Xy";function el(e){var{isbn:t,language:n,publisher:l,releaseDate:i,translators:s}=e;if(!t&&!n&&!l.name&&!i)return null;var{name:o,url:c}=l,u=i?J(i):null;return a.createElement("div",{className:qr,"data-e2e":"desktop-metadata"},n?a.createElement("div",{className:Yr,"data-e2e":"content-preview-metadata-language"},a.createElement("span",{className:Jr,"data-e2e":"label"},r.A.t("content_preview.metadata.language")),a.createElement("span",{className:$r,"data-e2e":"value"},n)):null,o?a.createElement("div",{className:Yr,"data-e2e":"metadata-publisher"},a.createElement("span",{className:Jr,"data-e2e":"label"},r.A.t("content_preview.metadata.publisher")),c?a.createElement(Le.QW,{buttonStyle:Le.mj.NONE,className:Zr,"data-e2e":"value",href:c},o):a.createElement("span",{className:$r,"data-e2e":"value"},o)):null,s&&s.length>0?a.createElement("div",{className:Yr,"data-e2e":"content-preview-metadata-translator"},a.createElement("span",{className:Jr,"data-e2e":"label"},r.A.t("content_preview.metadata.translator")),a.createElement("span",{className:$r,"data-e2e":"value"},s.length>1?"".concat(s[0]," ").concat(r.A.t("shared.byline.and")," ").concat(s[1]):s[0])):null,u?a.createElement("div",{className:Yr,"data-e2e":"content-preview-metadata-release-date"},a.createElement("span",{className:Jr,"data-e2e":"label"},r.A.t("content_preview.metadata.release_date")),a.createElement("span",{className:$r,"data-e2e":"value"},u)):null,t?a.createElement("div",{className:Yr,"data-e2e":"metadata-isbn"},a.createElement("span",{className:Jr,"data-e2e":"label"},r.A.t("content_preview.metadata.isbn")),a.createElement("span",{className:$r,"data-e2e":"value"},t)):null)}el.defaultProps={isbn:null,language:null,publisher:{},releaseDate:null};const tl=(0,o.Ng)((e=>{var{isbn:t,language:n,publisher:a,releaseDate:r,translators:l=[]}=e.contentItem;return{isbn:t,language:n,publisher:a,releaseDate:r,translators:l.map((e=>e.name))}}))(el),nl="_3Umz6i",al="_2ViBKF",rl="_3jPWRf",ll="_2TZYFx",il="_3HdvZf",sl="IyP8gP";var ol="get_app_mobile_banner:closed",cl="content_preview:get_app_promo:mobile";const ul=e=>{var{isAudio:t,isSubscriber:n,appLink:l}=e,[i,s]=(0,a.useState)((0,c.Ri)(ol)),[o,u]=(0,a.useState)();(0,a.useEffect)((()=>{i&&(0,c.L3)(ol,i)}),[i]),(0,a.useEffect)((()=>{window.navigator.userAgent.match(/ipad|iphone/i)&&u(!0)}),[]);var m=o?"ios":"android";return i||!n?null:a.createElement("div",{className:nl},a.createElement("div",{className:al},a.createElement(oe.QW,{className:il,onClick:()=>{(0,c.sx)("".concat(cl,":").concat(m,":close")),s(!0)},"aria-hidden":"true",type:"button"},a.createElement(oe.In,{icon:"close"}),a.createElement(oe.s6,null,r.A.t("shared.common.dismiss_message"))),a.createElement("h3",{className:rl},t?r.A.t("content_preview.app_promo.listen_offline"):r.A.t("content_preview.app_promo.read_offline")),a.createElement("div",{className:ll},r.A.t("content_preview.app_promo.download_free_app_everand")),a.createElement(oe.QW,{href:l,onClick:()=>{(0,c.sx)("".concat(cl,":").concat(m,":click"))},className:sl},a.createElement(oe.In,{icon:o?"apple_mark":"android_mark"}),o?r.A.t("content_preview.app_promo.get_ios"):r.A.t("content_preview.app_promo.get_android"))))};const ml=(0,o.Ng)((e=>{var{appLink:t,contentType:n}=e.contentItem,{isSubscriber:a}=e.user;return{appLink:t,isAudio:[D.g2.PODCAST,D.g2.PODCAST_EPISODE,D.g2.AUDIOBOOK].includes(n),isSubscriber:a}}))(ul),dl="_1ppj-l",pl="cR1DPQ";const El=(0,o.Ng)((e=>({isSubscriber:e.user.isSubscriber})))((function(e){var{children:t,className:n,isSubscriber:r}=e;if(!t)return null;var l=!r,[i,s]=(0,a.useState)(l);return(0,a.useEffect)((()=>{if(l){var e=document.getElementById("subscription-banner");if(e){var t=document.getElementById("global_header"),n={rootMargin:"-".concat(t.getBoundingClientRect().height,"px 0px 0px 0px")},a=new IntersectionObserver((e=>{var[t]=e;t.isIntersecting?s(!0):s(!1)}),n);return a.observe(e),()=>a.unobserve(e)}}}),[l]),a.createElement("div",{"data-e2e":"mobile-sticky-wrapper",className:cn()(dl,{[pl]:i},n)},t)})),vl="_1GDe8M",_l="_2c3S1j";const hl=(0,o.Ng)((e=>({url:e.contentItem.podcastUrl,title:e.contentItem.podcastTitle})))((function(e){var{url:t,title:n,"data-e2e":l}=e;return a.createElement("p",{className:vl,"data-e2e":l},r.A.t("shared.podcast_episode.from"),a.createElement(Le.QW,{className:_l,href:t,"data-e2e":"podcasts-header-series-link"},n))}));var gl=n(10616);const bl="uoJe6v",fl="dASyCF",wl="HN2GdM",Nl="_3qdsOb";function yl(e){var{backToTopTargetRef:t,pageWidth:n,isSeries:r,isSubscriber:l}=e,i=function(e){var[t,n]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{if(e.current){var t=new IntersectionObserver((e=>{var[t]=e;t.isIntersecting||t.boundingClientRect.top<0?n(!0):n(!1)}));return t.observe(e.current),()=>t.disconnect()}}),[e]),t}(t);if(!i)return null;var s=n>D.LO.DS2[D.F0.S]?gl.g.LARGE:gl.g.SMALL,o=n<=D.LO.DS2[D.F0.S]&&!l;return a.createElement(gl.A,{className:bl,breakpointHideClassName:cn()(fl,{[wl]:r||l,[Nl]:o}),isSticky:!0,size:s})}yl.defaultProps={backToTopTargetRef:{current:null},isSeries:!1,isSubscriber:!1};const Il=(0,o.Ng)((e=>({pageWidth:e.viewport.width})))(yl);function Al(e){var{url:t}=e;return a.createElement(oe.nF,{href:t},r.A.t("content_preview.actions.continue_browsing"))}const Sl="_3fWrzw",Ol="_2cJqMe",Tl="_2b2G-H";function Dl(e){var{type:t,className:n,thin:r}=e;return"horizontal"===t?a.createElement("hr",{className:cn()(Sl,n,{[Tl]:r})}):a.createElement("div",{className:Ol})}Dl.defaultProps={type:"horizontal",thin:!1};const Rl=e=>{switch(e){case D.XQ.SAMPLE:return r.A.t("content_preview.flags.sample");case D.XQ.EXPIRING:return r.A.t("content_preview.flags.expiring");case D.XQ.GEO_RESTRICTED:return r.A.t("content_preview.flags.geo_restricted");case D.XQ.NOT_AVAILABLE:return r.A.t("content_preview.flags.not_available");case D.XQ.THROTTLED:return r.A.t("content_preview.flags.throttled");default:return null}};const kl=e=>{switch(e){case D.XQ.SAMPLE:return"is_sample";case D.XQ.EXPIRING:return"is_expiring_content";case D.XQ.GEO_RESTRICTED:return"is_geo_restricted";case D.XQ.SCRIBD_SELECT:return"is_scribd_select";case D.XQ.NOT_AVAILABLE:return"is_unavailable";case D.XQ.THROTTLED:return"is_available_soon";default:return null}},Cl={wrapper:"_2D3B7O",is_scribd_select:"_3slPdX",is_purchase:"_1E7ya2",is_geo_restricted:"_2MgkLy",is_unavailable:"_1FQS6N",is_expiring_content:"_1FlvuR",is_sample:"_1mSfOv",is_available_soon:"_3cYj0u","icon-ic_scribd_badge_logo":"_27dP-D"};function Ll(e){var{type:t}=e;if(null===t)return null;var n=kl(t),r=Rl(t);return null===n||null===r?null:a.createElement("span",{className:cn()(Cl.wrapper,Cl[n]),"data-e2e":"thumbnail-flag"},r)}const Pl="_3ld4U4",Ul="_2sCno-";function xl(e){var{contentItem:t,oauthSignupUrl:n,isDisabled:l,isSubscriber:i,onOpenDownloadModal:s,onAddDocumentToSaved:o}=e;return a.createElement(oe.QW,{className:Pl,"data-e2e":"download-to-app",onClick:()=>{(0,c.sx)("library_button:download_to_app:click",{doc_id:t.id}),i?(0,c.Fr)()?o(t.id).finally((()=>{(0,c.V2)(t.downloadUrl)})):s({id:t.id,coverImageUrl:t.imageUrl,title:t.title,type:t.contentType}):(0,c.V2)("".concat(n,"?behavior_tag=download&doc_id=").concat(t.id))},disabled:l},a.createElement(oe.In,{className:Ul,icon:"storeoffline"}),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},r.A.t("shared.common.download")),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},r.A.t("content_preview.download_to_app")))}xl.defaultProps={isSubscriber:!1,isDisabled:!1};var Bl=n(96435),Ml=e=>({contentItem:e.contentItem,isSubscriber:e.user.isSubscriber,oauthSignupUrl:e.static.routes.oauthSignupUrl}),Fl=e=>({onOpenDownloadModal:t=>e((0,Ke.A)({document:t,saveOnSuccess:!0,slim:!0,trackingData:{doc_id:t.id,page:ee},trackingPrefix:"get_app_modal"})),onAddDocumentToSaved:t=>e((0,Bl.A)(t))});const Wl=(0,o.Ng)(Ml,Fl)(xl);function Gl(){return Gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gl.apply(this,arguments)}function jl(e){var{contentItem:t,isDesktopWidth:n,isDisabled:l,isSubscriber:i,oauthSignupUrl:s,onOpenDownloadModal:o,onAddDocumentToSaved:u}=e,m={disabled:l,iconDefault:Pe.ox0,iconSelected:Pe.ox0,onClick:()=>{(0,c.sx)("library_button:download_to_app:click",{doc_id:t.id}),i?(0,c.Fr)()?u(t.id).finally((()=>{(0,c.V2)(t.downloadUrl)})):o({coverImageUrl:t.imageUrl,id:t.id,retinaCoverImageUrl:t.imageUrl,title:t.title,type:t.contentType}):(0,c.V2)("".concat(s,"?behavior_tag=download&doc_id=").concat(t.id))}},d=n?"download-to-app-desktop":"download-to-app-mobile",p=n?D.TP.HORIZONTAL:D.TP.VERTICAL,E=n?r.A.t("content_preview.download_to_app"):r.A.t("shared.common.download");return a.createElement(he.Ul,Gl({},m,{buttonStyle:p,"data-e2e":d}),E)}jl.defaultProps={isSubscriber:!1,isDisabled:!1};const Hl=(0,o.Ng)(Ml,Fl)(jl),Vl="EBBWLm",zl="_2TGtVV";var Ql=n(13468),Xl=n(2778);const Kl=(0,o.Ng)((e=>({id:e.contentItem.id,hasLists:e.collections.collectionsCount>0})),(e=>({onClick:(t,n)=>{var a=n?"add":"create";return(0,c.sx)("library_btn:add_to_list:click",{doc_id:t,action:a}),e((0,Xl.A)((()=>e((0,Ql.A)({name:n?D.R8.ADD_TO_LIST:D.R8.CREATE_LIST}))),{trackingData:{page:ee},userAction:D.kf.USER_ACTIONS.CREATE_A_LIST}))}})))((function(e){var{id:t,hasLists:n,onClick:l,isDisabled:i}=e,s=n?r.A.t("content_preview.lists.add_to"):r.A.t("content_preview.lists.create");return a.createElement(oe.QW,{className:Vl,"data-e2e":"actions-list",onClick:()=>l(t,n),disabled:i},a.createElement(oe.In,{className:zl,icon:"addtolist"}),s)}));var ql=n(26559);const Yl=(0,o.Ng)((e=>({hasDunningLock:e.user.hasDunningLock,listenUrl:e.contentItem.listenUrl,hasProgress:e.contentItem.listenProgress})),(e=>({openLockShockRoadblockModal:()=>e((0,ql.A)())})))(oe.kK);var Jl=e=>({listenUrl:e.contentItem.listenUrl});(0,o.Ng)(Jl)((function(e){var{listenUrl:t}=e;return a.createElement(oe.nF,{href:t,target:"_blank",rel:"noopener noreferrer nofollow"},r.A.t("shared.common.play_preview"))}));function Zl(e){var{className:t,isDesktopWidth:n,listenUrl:l,size:i}=e;return a.createElement(he.jn,{"data-e2e":n?"play-preview-desktop":"play-preview-mobile",className:t,href:l,target:"_blank",rel:"noopener noreferrer nofollow",size:i},r.A.t("shared.common.play_preview"))}Zl.defaultProps={className:"",size:D.F0.L};const $l=(0,o.Ng)(Jl)(Zl);(0,o.Ng)((e=>({url:e.contentItem.audioSampleUrl})))(oe.Xr);const ei="j1ax8U";function ti(e){var{handleOpenSignUpModal:t,hasProgress:n,isDesktopWidth:r,listenUrl:l,userContentStatus:i}=e;switch(i){case D.DW.LOGGED_IN_SUBSCRIBER:case D.DW.SUBSCRIBER_DUNNING_LOCK:case D.DW.SUBSCRIBER_FULL_ACCESS:return a.createElement(oe.ZJ,{className:ei,hasProgress:n,listenUrl:l});case D.DW.SUBSCRIBER_THROTTLED:return a.createElement($l,{isDesktopWidth:r,className:ei,size:D.F0.L});case D.DW.LOGGED_IN_ABORTED:case D.DW.LOGGED_IN_CANCELED_EXPIRED:case D.DW.LOGGED_IN_PAUSED:case D.DW.LOGGED_IN_TRIAL_ELIGIBLE:case D.DW.LOGGED_IN_TRIAL_INELIGIBLE:case D.DW.LOGGED_OUT_PREVIEW:case D.DW.LOGGED_OUT_TRIAL_ELIGIBLE:return a.createElement(oe.cB,{"data-e2e":r?"start-trial-btn-desktop":"start-trial-btn-mobile",className:ei,copyType:D.JU.READ_FREE,openSignUpModal:t});default:return null}}ti.defaultProps={hasProgress:!1,isDesktopWidth:!1};var ni=n(56189);const ai=(0,o.Ng)((e=>({documentType:e.contentItem.contentType,listenUrl:e.contentItem.listenUrl,userContentStatus:(0,qt.A)(e),hasProgress:Boolean(e.contentItem.listenProgress)})),((e,t)=>({handleOpenSignUpModal:n=>{var{nextUrl:a}=n;return e((0,ni.A)({documentType:t.documentType,nextUrl:a,trackingData:{loc:"primary_audiobook_action",page:ee}}))}})))(ti);function ri(e){var{isDesktopWidth:t,userContentStatus:n}=e;switch(n){case D.DW.LOGGED_IN_PAUSED:return t?"resume-membership-btn-desktop":"resume-membership-btn-mobile";case D.DW.LOGGED_IN_ABORTED:case D.DW.LOGGED_IN_CANCELED_EXPIRED:case D.DW.LOGGED_IN_TRIAL_INELIGIBLE:return t?"restart-subscription-btn-desktop":"restart-subscription-btn-mobile";case D.DW.LOGGED_OUT_PREVIEW:case D.DW.LOGGED_IN_TRIAL_ELIGIBLE:case D.DW.LOGGED_OUT_TRIAL_ELIGIBLE:return t?"start-trial-btn-desktop":"start-trial-btn-mobile";default:return null}}function li(e){var{buttonStyle:t,className:n,isDesktopWidth:l,isPrimaryButton:i,readUrl:s,size:o}=e,c=i?he.jn:Pt.tA,u=o;return o||(u=i?D.F0.L:Pt.BN.LARGE),a.createElement(c,{className:n,"data-e2e":l?"read-preview-desktop":"read-preview-mobile",href:s,size:u,buttonStyle:t},r.A.t("shared.actions.read_preview"))}li.defaultProps={buttonStyle:Pt.TH.DEFAULT,className:"",isDesktopWidth:!1,isPrimaryButton:!1,size:null};var ii=e=>({readUrl:e.contentItem.readUrl});const si=(0,o.Ng)(ii)(li),oi="_2X8VWm";var ci=()=>{(0,c.XI)(D.ej.CONTENT_PREVIEW_PRIMARY_ACTION_START_FREE),(0,c.sx)("content_preview:primary_action_cta:click",(0,c.$I)())};function ui(e){var{hasProgress:t,handleOpenSignUpModal:n,isDesktopWidth:r,readUrl:l,userContentStatus:i}=e;switch(i){case D.DW.LOGGED_IN_SUBSCRIBER:case D.DW.SUBSCRIBER_DUNNING_LOCK:case D.DW.SUBSCRIBER_FULL_ACCESS:return a.createElement(oe.fL,{className:oi,hasProgress:t,readUrl:l});case D.DW.SUBSCRIBER_THROTTLED:return a.createElement(si,{isDesktopWidth:r,className:oi,isPrimaryButton:!0,size:D.F0.L});case D.DW.LOGGED_IN_ABORTED:case D.DW.LOGGED_IN_CANCELED_EXPIRED:case D.DW.LOGGED_IN_PAUSED:case D.DW.LOGGED_IN_TRIAL_INELIGIBLE:return a.createElement(oe.cB,{"data-e2e":ri({isDesktopWidth:r,userContentStatus:i}),className:oi,copyType:D.JU.READ_FREE,openSignUpModal:n});case D.DW.LOGGED_IN_TRIAL_ELIGIBLE:case D.DW.LOGGED_OUT_PREVIEW:case D.DW.LOGGED_OUT_TRIAL_ELIGIBLE:return a.createElement(oe.cB,{"data-e2e":ri({isDesktopWidth:r,userContentStatus:i}),className:oi,copyType:D.JU.READ_FREE,openSignUpModal:n,onClick:ci});default:return null}}ui.defaultProps={hasProgress:!1,isDesktopWidth:!1};const mi=(0,o.Ng)((e=>({booksUrl:e.static.routes.booksPath,documentType:e.contentItem.contentType,hasProgress:Boolean(e.contentItem.readProgress),readUrl:e.contentItem.readUrl,userContentStatus:(0,qt.A)(e)})),((e,t)=>({handleOpenSignUpModal:n=>{var{nextUrl:a}=n;return e((0,ni.A)({documentType:t.documentType,nextUrl:a,trackingData:{loc:"primary_book_action",page:ee}}))}})))(ui),di={button:"_18ctGU",hovered:"uQR9Dz",selected:"qncly4",selectedHovered:"_3HN3NJ",starEmpty:"_3W_FXy",starFilled:"a-k6j9"};var pi=e=>{var{shouldShowFilledStar:t}=e;return t?a.createElement(Pe.BQ2,{className:di.starFilled}):a.createElement(Pe.UOJ,{className:di.starEmpty})};function Ei(e){var{handleClick:t,shouldShowFilledStar:n,shouldShowHoveredState:l,shouldShowSelectedHoveredState:i,shouldShowSelectedText:s,tooltipText:o,updateHoveredValue:c,value:u}=e,m=s?r.A.t("shared.star_ratings.selected"):null;return a.createElement(he.T_,{content:o},a.createElement("button",{"aria-hidden":!1,className:cn()(di.button,{[di.selected]:n,[di.hovered]:l,[di.selectedHovered]:i&&n}),key:"star_".concat(u),onClick:e=>{t(e)},onFocus:()=>c(u),onMouseOver:()=>c(u),role:"button",type:"button",value:u},a.createElement(pi,{shouldShowFilledStar:n}),a.createElement(oe.s6,null,r.A.t("shared.star_ratings.rate_as_rating_out_of_5",{value:u}),", ",o,". ",m)))}function vi(){return vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vi.apply(this,arguments)}const _i=(0,o.Ng)((e=>({hasDunningLock:e.user.hasDunningLock,readUrl:e.contentItem.readUrl,hasProgress:e.contentItem.readProgress})),(e=>({openLockShockRoadblockModal:()=>e((0,ql.A)())})))((function(e){var{readUrl:t,hasProgress:n,hasDunningLock:l,openLockShockRoadblockModal:i}=e,s=l?{onClick:i}:{href:t};return a.createElement(oe.nF,vi({className:cn()({disabled:l})},s,{"data-e2e":"read-button"}),n?r.A.t("shared.actions.read_continue"):r.A.t("content_preview.actions.read_start"))}));(0,o.Ng)((e=>({readUrl:e.contentItem.readUrl,hasProgress:e.contentItem.readProgress})))(oe.fL);var hi="outline";function gi(e){var{readUrl:t,style:n}=e,l=n===hi?oe.rp:oe.nF;return a.createElement(l,{href:t,"data-e2e":"read-preview"},r.A.t("shared.actions.read_preview"))}gi.defaultProps={style:hi};const bi=(0,o.Ng)(ii)(gi);(0,o.Ng)((e=>({url:e.static.routes.subscribeUrl})))((function(e){var{url:t}=e;return a.createElement(oe.nF,{href:t,"data-e2e":"restart-subscription"},r.A.t("shared.common.restart_subscription"))}));const fi=(0,o.Ng)((e=>({url:e.static.routes.paymentFixUrl})))((function(e){var{url:t}=e;return a.createElement(oe.nF,{href:t,"data-e2e":"resume-membership"},r.A.t("shared.resume_membership"))})),wi="_1hkDd0",Ni="_1x9-Wm";var yi=e=>{var{isSaved:t}=e;return a.createElement(a.Fragment,null,a.createElement(oe.In,{className:Ni,icon:t?"saved_for_later_2px":"save_for_later_2px"}),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},t?r.A.t("shared.common.remove"):r.A.t("shared.common.save")),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},t?r.A.t("content_preview.save.remove"):r.A.t("content_preview.save.add")))};const Ii=(0,o.Ng)((e=>({id:e.contentItem.id,title:e.contentItem.title})))((function(e){var{id:t,title:n,isDisabled:r,isSaved:l}=e;return a.createElement(oe.Fn,{className:wi,"data-e2e":l?"remove-content":"save-content",id:t,title:n,page:ee,isDisabled:r},a.createElement(yi,null))}));const Ai="_1GzrXx",Si="_17HI9y";function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Oi.apply(this,arguments)}function Ti(e){var{documentId:t,title:n,isSaved:l,isDesktopWidth:i}=e,{handleSave:s,isLoading:o}=(0,Ut.A)({documentId:t,isSaved:l,page:ee}),{ariaLabel:u,dataE2E:m,Icon:d,textContentLg:p,textContentSm:E}=function(e,t,n){var a={title:(0,c.pL)(n)};return t?{ariaLabel:r.A.t("shared.common.library.remove_with_title",a),dataE2E:e?"remove-content-desktop":"remove-content-mobile",Icon:Pe.IMx,textContentLg:r.A.t("shared.common.saved"),textContentSm:r.A.t("shared.common.saved")}:{ariaLabel:r.A.t("shared.common.library.add_with_title",a),dataE2E:e?"save-content-desktop":"save-content-mobile",Icon:Pe.IhA,textContentLg:r.A.t("shared.common.save"),textContentSm:r.A.t("content_preview.save.add")}}(i,l,n),v={"aria-label":u,disabled:o,iconClassName:Si,iconDefault:d,iconSelected:d,onClick:s},_=i?D.TP.HORIZONTAL:D.TP.VERTICAL,h=i?E:p;return a.createElement(he.Ul,Oi({className:Ai,"data-e2e":m,buttonStyle:_},v),h)}Ti.defaultProps={isDesktopWidth:!1};const Di=(0,o.Ng)((e=>{var{id:t,title:n}=e.contentItem,{saved:a,finished:r}=e.savedDocuments;return{documentId:t,title:n,isSaved:t in a||t in r}}))(Ti),Ri="ICIGFW";function ki(e){var{className:t}=e,n=(0,o.d4)((e=>e.static.config.brand)),r=(0,o.d4)((e=>e.contentItem.audioSampleUrl)),l=(0,o.d4)(qt.A),i=n===D.rI.EVERAND?Pt.TH.MONOTONE_BLACK:Pt.TH.DEFAULT;switch(l){case D.DW.LOGGED_IN_ABORTED:case D.DW.LOGGED_IN_CANCELED_EXPIRED:case D.DW.LOGGED_IN_PAUSED:case D.DW.LOGGED_IN_TRIAL_ELIGIBLE:case D.DW.LOGGED_IN_TRIAL_INELIGIBLE:case D.DW.LOGGED_OUT_PREVIEW:case D.DW.LOGGED_OUT_TRIAL_ELIGIBLE:return a.createElement(oe.gU,{buttonStyle:i,className:cn()(Ri,t),url:r});default:return null}}ki.defaultProps={className:null};const Ci="_3rmlzd";function Li(e){var{className:t,isDesktopWidth:n,userContentStatus:r}=e,l=(0,o.d4)((e=>e.static.config.brand))===D.rI.EVERAND?Pt.TH.MONOTONE_BLACK:Pt.TH.DEFAULT;switch(r){case D.DW.LOGGED_IN_PAUSED:case D.DW.LOGGED_IN_ABORTED:case D.DW.LOGGED_IN_TRIAL_INELIGIBLE:case D.DW.LOGGED_IN_CANCELED_EXPIRED:case D.DW.LOGGED_OUT_PREVIEW:case D.DW.LOGGED_IN_TRIAL_ELIGIBLE:case D.DW.LOGGED_OUT_TRIAL_ELIGIBLE:return a.createElement(si,{isDesktopWidth:n,className:cn()(Ci,t),buttonStyle:l});default:return null}}Li.defaultProps={className:null};const Pi=(0,o.Ng)((e=>({booksUrl:e.static.routes.booksPath,userContentStatus:(0,qt.A)(e)})))(Li),Ui={wrapper:"_1WNpD7"};function xi(e){var{title:t,message:n,contentItemUrl:r,imageUrl:l,facebookAppId:i,onClick:s}=e;return a.createElement("ul",{className:Ui.wrapper},a.createElement("li",null,a.createElement(oe.B_,{appId:i,url:r,onClick:s})),a.createElement("li",null,a.createElement(oe._A,{shareText:t,url:r,onClick:s})),l?a.createElement("li",null,a.createElement(oe.h8,{title:t,imageUrl:l,url:r,onClick:s})):null,a.createElement("li",null,a.createElement(oe.tR,{title:t,message:n,onClick:s})))}const Bi="_1YNM-H",Mi="wlIGav";function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fi.apply(this,arguments)}function Wi(e){var t=e.contentType===D.g2.PODCAST_EPISODE?"top":"bottom",n=a.createElement(oe.QW,{className:Bi,"data-e2e":"content-preview-share",disabled:e.isDisabled},a.createElement(oe.In,{className:Mi,icon:"share"}),r.A.t("content_preview.share"));return a.createElement(oe.y$,{button:n,menu:a.createElement(xi,Fi({},e,{onClick:(e,t)=>{if((0,c.sx)("collection:share_via_".concat(e,"_button:click"),{page:ee}),t)return t()}})),forcePosition:t})}Wi.defaultProps={isDisabled:!1};var Gi=n(87921);const ji=(0,o.Ng)((e=>{var{contentType:t,imageUrl:n,contentItemUrl:a}=e.contentItem;return{contentType:t,imageUrl:n,contentItemUrl:a,facebookAppId:e.static.config.facebook.appID}}))(Wi);const Hi="AkP_l-";function Vi(){return Vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vi.apply(this,arguments)}function zi(e){var{contentItemUrl:t,message:n,openSocialMediaShare:l,title:i,shouldShowUpsellVariant:s}=e,o={"data-e2e":"content-preview-share",iconClassName:Hi,iconDefault:Pe.SYj,iconSelected:Pe.SYj,onClick:()=>function(e){var{contentItemUrl:t,message:n,openSocialMediaShare:a,title:r}=e;(0,c.Fr)()&&navigator.share?navigator.share({title:r,url:t}):a({message:n,title:r})}({contentItemUrl:t,message:n,openSocialMediaShare:l,title:i})};return a.createElement(a.Fragment,null,s?a.createElement(he.Ul,Vi({},o,{buttonStyle:D.TP.VERTICAL}),r.A.t("content_preview.share")):a.createElement(a.Fragment,null,a.createElement(he.s8,{above:!0,inline:!1,size:D.F0.S},a.createElement(he.Ul,Vi({},o,{buttonStyle:D.TP.VERTICAL}),r.A.t("content_preview.share"))),a.createElement(he.s8,{atAndBelow:!0,inline:!1,size:D.F0.S},a.createElement(he.Ul,Vi({},o,{buttonStyle:D.TP.HORIZONTAL}),r.A.t("content_preview.share_title")))))}zi.defaultProps={shouldShowUpsellVariant:!1};const Qi=(0,o.Ng)(null,(e=>({openSocialMediaShare:t=>{var{message:n,title:a}=t;return e((0,Gi.A)({message:n,title:a}))}})))(zi),Xi="tuNY49";var Ki=e=>({isLoggedIn:e.user.isLoggedIn,isSubscriber:e.user.isSubscriber,oauthSignupUrl:e.static.routes.oauthSignupUrl,subscribeUrl:e.static.routes.subscribeUrl,trialDuration:e.personalization.trialDuration}),qi=e=>({openSignUp:t=>e((0,ni.A)({trackingData:{page:"content_preview",loc:"start_free_trial"},nextUrl:t}))});const Yi=(0,o.Ng)(Ki,qi)((function(e){var{checkoutEntryPointButtonName:t,isLoggedIn:n,isSubscriber:l,trialDuration:i,subscribeUrl:s,oauthSignupUrl:o,openSignUp:u}=e;return a.createElement(oe.nF,{className:Xi,onClick:()=>{l||((0,c.XI)(t),(0,c.sx)("content_preview:primary_action_cta:click",(0,c.$I)())),n?(0,c.V2)(s):(new c.ZZ).inTest()?(0,c.V2)(o):u(s)},"data-e2e":"start-trial-btn"},r.A.t("shared.trial_duration.start_trial_days",{trialDuration:i}))}));function Ji(e){var{buttonStyle:t,checkoutEntryPointButtonName:n,className:l,"data-e2e":i,eventName:s,isLoggedIn:o,isSubscriber:u,oauthSignupUrl:m,openSignUp:d,size:p,subscribeUrl:E,trialDuration:v}=e,_=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e=new IntersectionObserver((e=>{var[t]=e,n=new CustomEvent("bannerStartTrialButtonChange",{detail:{isBannerStartTrialButtonVisible:t.isIntersecting}});window.dispatchEvent(n)}));return _.current&&e.observe(_.current),()=>{_.current&&e.unobserve(_.current)}}),[]);return a.createElement("div",{ref:_},a.createElement(he.jn,{buttonStyle:t,className:l,onClick:()=>{u||((0,c.XI)(n),(0,c.sx)(s,(0,c.$I)())),o?(0,c.V2)(E):(new c.ZZ).inTest()?(0,c.V2)(m):d(E)},"data-e2e":i,size:p},r.A.t("shared.trial_duration.start_trial_days",{trialDuration:v})))}Ji.defaultProps={buttonStyle:D._C.DEFAULT,className:null,"data-e2e":"start-trial-btn",size:D.F0.L};const Zi=(0,o.Ng)(Ki,qi)(Ji);function $i(){return a.createElement(oe.rp,{disabled:!0},r.A.t("content_preview.actions.unavailable"))}const es=(0,o.Ng)((e=>({url:e.contentItem.podcastUrl})))((function(e){var{url:t}=e;return a.createElement(oe.rp,{href:t,"data-e2e":"view-podcast-show-cta"},r.A.t("content_preview.podcast_episode.view_podcast_show"))}));function ts(e){var{brand:t,contentItemUrl:n,contentType:a,primaryAuthor:l,rootUrl:i,title:s}=e,o=void 0,c=void 0,u={document_title:s,document_url:n,primary_author:l.name,root_url:i};switch(a){case D.g2.AUDIOBOOK:o=t===D.rI.EVERAND?r.A.t("everand.social.hi_there_i_m_listening_to",u):r.A.t("social.hi_there_i_m_listening_to",u),c=t===D.rI.EVERAND?r.A.t("everand.social.im_listening_to_document",{document_title:u.document_title}):r.A.t("social.im_listening_to_document",{document_title:u.document_title});break;case D.g2.BOOK:case D.g2.SHEET_MUSIC:o=t===D.rI.EVERAND?r.A.t("everandsocial.hi_there_i_m_reading",u):r.A.t("social.hi_there_i_m_reading",u),c=t===D.rI.EVERAND?r.A.t("everand.social.im_reading_document",{document_title:u.document_title,document_url:u.document_url}):r.A.t("social.im_reading_document",{document_title:u.document_title});break;case D.g2.PODCAST:o=t===D.rI.EVERAND?r.A.t("everand.social.hi_there_i_m_listening_to_no_author",u):r.A.t("social.hi_there_i_m_listening_to_no_author",u),c=t===D.rI.EVERAND?r.A.t("everand.social.im_listening_to_document",{document_title:u.document_title,document_url:u.document_url}):r.A.t("social.im_listening_to_document",{document_title:u.document_title});break;case D.g2.PODCAST_EPISODE:o=t===D.rI.EVERAND?r.A.t("everand.social.hi_there_i_m_listening_to_episode_of",u):r.A.t("social.hi_there_i_m_listening_to_episode_of",u),c=t===D.rI.EVERAND?r.A.t("everand.social.i_m_listening_to_episode_of",{series_title:u.document_title}):r.A.t("social.i_m_listening_to_episode_of",{series_title:u.document_title})}return{shareMessage:o,shareTitle:c}}const ns="_2c1PZ1",as="_2R50ir";function rs(e){var{contentItemUrl:t,contentType:n,isDisabled:r,isSaved:l,primaryAuthor:i,rootUrl:s,title:o}=e,{shareMessage:u,shareTitle:m}=ts({contentItemUrl:t,contentType:n,primaryAuthor:i,rootUrl:s,title:o});return void 0===u||void 0===m?null:a.createElement("ul",{className:ns,"data-e2e":"actions"},a.createElement("li",{className:as},a.createElement(Ii,{isDisabled:r,isSaved:l})),a.createElement("li",{className:as},a.createElement(Kl,{isDisabled:r})),n===D.g2.PODCAST?null:a.createElement("li",{className:as},a.createElement(Wl,{isDisabled:r})),a.createElement(oe.s8,{classes:as,atOrBelow:!0,width:c.fi.breakpoint_550},a.createElement("li",null,a.createElement(ji,{title:m,message:u,isDisabled:r}))))}rs.defaultProps={primaryAuthor:{name:"",possessiveName:""}};const ls=(0,o.Ng)((e=>{var{contentItemUrl:t,contentType:n,contributors:a,id:r,title:l}=e.contentItem,{rootUrl:i}=e.static.routes,{saved:s}=e.savedDocuments,o=(0,qt.A)(e);return{contentItemUrl:t,contentType:n,isDisabled:o===D.DW.LOGGED_IN_UNAVAILABLE||o===D.DW.LOGGED_OUT_UNAVAILABLE,isSaved:r in s,primaryAuthor:Array.isArray(a)&&a.length>0?a[0]:{},rootUrl:i,title:l}}))(rs),is="_3cILhi",ss="FfPUOk",os="_1WgwVw",cs="_6Ud1F0",us="_1iCuqW",ms="_1BtpAB",ds="xclYAP";function ps(e){var{brand:t,contentItemUrl:n,contentType:r,contentUnavailable:l,isDesktopWidth:i,isLoading:s,primaryAuthor:o,rootUrl:c,title:u,shouldShowUpsellVariant:m}=e;if(!0===s)return m?a.createElement("div",{className:ms},a.createElement(he.O0,{className:ds}),a.createElement(he.O0,{className:ds}),a.createElement(he.O0,{className:ds})):null;var{shareMessage:d,shareTitle:p}=ts({brand:t,contentItemUrl:n,contentType:r,primaryAuthor:o,rootUrl:c,title:u});return void 0===d||void 0===p?null:a.createElement("div",{className:is},a.createElement("ul",{className:m?os:ss},l?null:a.createElement(a.Fragment,null,a.createElement("li",{className:m?us:cs},a.createElement(Di,{isDesktopWidth:i})),a.createElement("li",{className:m?us:cs},a.createElement(Hl,{isDesktopWidth:i}))),a.createElement("li",{className:m?us:cs},a.createElement(Qi,{title:p,message:d,contentItemUrl:n,shouldShowUpsellVariant:m}))))}ps.defaultProps={isDesktopWidth:!1,primaryAuthor:{name:"",possessiveName:""},shouldShowUpsellVariant:!1};var{LOADING:Es,LOGGED_IN_UNAVAILABLE:vs,LOGGED_OUT_UNAVAILABLE:_s}=D.DW;const hs=(0,o.Ng)((e=>{var{contentItemUrl:t,contentType:n,contributors:a,title:r}=e.contentItem,{rootUrl:l}=e.static.routes,{brand:i}=e.static.config,s=(0,qt.A)(e);return{brand:i,contentItemUrl:t,contentType:n,contentUnavailable:s===vs||s===_s,isLoading:s===Es,primaryAuthor:Array.isArray(a)&&a.length>0?a[0]:{},rootUrl:l,title:r}}))(ps),gs={wrapper:"_3WDy5b"};var bs=e=>[...Array(e).keys()];function fs(e){var{stars:t}=e,n=Math.floor(t),r=t%1!==0,l=sa-Math.ceil(t);return a.createElement("div",{className:gs.wrapper,"data-e2e":"stars"},bs(n).map((e=>a.createElement(oe.In,{key:e,icon:"star_small_fill"}))),r?a.createElement(oe.In,{icon:"star_small_halffill"}):null,bs(l).map((e=>a.createElement(oe.In,{key:e,icon:"star_small_outline"}))))}var ws=e=>{var{id:t}=e.contentItem,{ratingCount:n,averageRating:a}=e.ratings[t];return{ratingsCount:n,rating:(0,c.AY)(a)}};const Ns={wrapper:"_3GSy7x"};function ys(e){var{rating:t,ratingsCount:n}=e,l=1===n?r.A.t("shared.common.rating"):r.A.t("shared.common.ratings");return a.createElement("div",{className:Ns.wrapper},t,"/",sa," (",n.toLocaleString(r.A.language),a.createElement(oe.s8,{atOrBelow:!0,inline:!0,width:c.fi.breakpoint_450},"\xa0",l),")")}const Is="_2PYfPm",As="_2JMVTJ",Ss="_1F2Bd-";const Os=(0,o.Ng)(ws)((function(e){var{rating:t,ratingsCount:n}=e;return t&&n?a.createElement("div",{className:Is,"data-e2e":"content-preview-ratings"},a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement("span",{className:Ss},r.A.t("shared.common.ratings"),":")),a.createElement("div",{className:As},a.createElement(fs,{stars:t}),a.createElement(ys,{rating:t,ratingsCount:n}))):null})),Ts="_2LxazJ",Ds="_1k0mYj",Rs="_2I3hZ0",ks="_2fsvwK";function Cs(e){var{rating:t,ratingsCount:n,onClick:l}=e;return a.createElement("div",{className:Ts},a.createElement(he.ZK,{"data-e2e":"stars",rating:t,style:D.un.DEFAULT_NON_RESPONSIVE}),0===t?null:a.createElement("p",{className:Ds},t,"/",D.ry),a.createElement("p",{className:Rs},"(",a.createElement(Le.QW,{className:ks,onClick:l},n.toLocaleString(r.A.language)," ",r.A.t("shared.star_ratings.ratings",{count:n})),")"))}Cs.defaultProps={onClick:c.lQ};const Ls=(0,o.Ng)(ws)(Cs);var Ps=e=>({compilation:e.compilation,documentCount:Object.keys(e.documents).length,isBot:e.user.isBot,shortTitle:e.contentItem.shortTitle}),Us=n(82810);function xs(e,t){if(!t||0===t.length)return null;if(e===D.g2.SUMMARY_CANONICAL)return function(e){return e.some((e=>e.type===D.g2.BOOK))?r.A.t("content_preview.summary_promotion.dive_deeper_by_reading"):r.A.t("content_preview.summary_promotion.dive_deeper_by_listening")}(t);var n=t[0].consumptionTime,a=null;return n&&(a=r.A.t("content_preview.summary_promotion.gain_key_insights_in_x_minutes",{count:Math.round(n/60)})),a}const Bs="AlDVLe",Ms="_2F9Loo",Fs="_1GljR_",Ws="Adr5NW",Gs="_1inevI",js="_2lZhT8";function Hs(e){var{allDocuments:t,contentType:n,module:l,page:i}=e,{documents:s,type:o,uuid:u}=l;if(!s||!s.length)return null;var m=s.map((e=>t[e.id])),d=function(e){switch(e){case D.g2.AUDIOBOOK:return r.A.t("content_preview.summary_promotion.is_this_audiobook_for_you");case D.g2.SUMMARY_CANONICAL:return r.A.t("content_preview.summary_promotion.interested_in_full_title");default:return r.A.t("content_preview.summary_promotion.is_this_book_for_you")}}(n),p=xs(n,m);return a.createElement(R.tG,{name:o,uuid:u},a.createElement("section",{className:Bs,"aria-labelledby":"oe-header"},a.createElement("div",{className:Ms},a.createElement("h2",{className:Fs,id:"oe-header"},d),a.createElement("p",{className:Ws},p),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},a.createElement(kr,null))),a.createElement("div",{className:Gs},a.createElement("ul",{className:js},s.map((e=>a.createElement("li",{key:e.uuid},a.createElement(R.QY,{uuid:e.uuid},a.createElement(Us.am,{documentId:e.id,page:i}))))))),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement(kr,null))))}Hs.defaultProps={allDocuments:{}};const Vs=(0,o.Ng)((e=>({brand:e.static.config.brand,allDocuments:e.documents,contentType:e.contentItem.contentType})))(Hs);var zs="author_spotlight",Qs="from_author",Xs="from_series",Ks="similar_to",qs="related_podcasts",Ys="top_category",Js="related_article",Zs="other_editions",$s="podcast_anthology";const eo="_3YLj-c",to="_1jWPBF";function no(e){var{compilation:t,documentCount:n,isSeriesPage:l,shortTitle:i,showTitle:s}=e;return t.modules.length&&n?a.createElement("div",{"data-e2e":"recommendations"},s?a.createElement("h2",{className:to},r.A.t("content_preview.related_to",{shortTitle:i})):null,t.modules.map((e=>{switch(e.type){case Zs:return a.createElement(Vs,{className:eo,key:e.uuid,module:e,page:ee});case Qs:case Js:case"top":case Ys:case qs:case Ks:return a.createElement("div",{id:e.type,key:e.uuid,"data-e2e":e.type},a.createElement(R.a5,{className:eo,module:e,page:ee}));case Xs:case $s:return!0===l?null:a.createElement("div",{id:e.type,key:e.uuid,"data-e2e":e.type},a.createElement(R.a5,{className:eo,module:e,page:ee}));default:return(0,c.Cp)(new Error("unsupported module.type: ".concat(e.type))),null}}))):null}no.defaultProps={showTitle:!0,isSeriesPage:!1};const ao=(0,o.Ng)(Ps)(no),ro="_3Bzy2p",lo="_3sicU2";function io(e){var{compilation:t,documentCount:n,isBot:l,isSeriesPage:i,shortTitle:s}=e;return t.modules.length&&n?a.createElement("div",{"data-e2e":"recommendations","data-testid":"Recommendations"},a.createElement("h2",{className:lo},r.A.t("content_preview.related_to",{shortTitle:s})),t.modules.map((e=>{switch(e.type){case Js:case"top":case Ys:case qs:case Ks:case $s:return a.createElement("div",{className:ro,"data-testid":e.type,"data-e2e":e.type,id:e.type,key:e.uuid},a.createElement(R.UG,{cell:Us.AR,isBot:l,module:e,page:ee,renderPastMargin:!0}));case zs:case Qs:case Zs:return null;case Xs:return!0===i?null:a.createElement("div",{className:ro,"data-testid":e.type,"data-e2e":e.type,id:e.type,key:e.uuid},a.createElement(R.UG,{cell:Us.AR,isBot:l,module:e,page:ee,renderPastMargin:!0}));default:return(0,c.Cp)(new Error("unsupported module.type: ".concat(e.type))),null}}))):null}io.defaultProps={isSeriesPage:!1};const so=(0,o.Ng)(Ps)(io),oo={text:"_1kiPoq",label:"_1AsrKx"};function co(e){var{author:t,reviewText:n}=e;return a.createElement(a.Fragment,null,a.createElement("p",{className:oo.text},n),a.createElement("span",{className:oo.label},t))}const uo={heading:"_1aWqFM",icon:"_32KNLJ",list:"_1Ew0We",listItem:"_1vRKqW",quote:"_1UsrCD"};function mo(e){var{header:t,items:n,itemRenderer:l,maxItems:i}=e;if(!n||!n.length)return null;var[s,o]=(0,a.useState)(n.length>i);return a.createElement("div",null,a.createElement("h3",{className:uo.heading},t),a.createElement("ul",{className:uo.list},n.map(((e,t)=>{var n=!!(s&&t>=i);return a.createElement("li",{key:e.id,className:cn()({visually_hidden:n},uo.listItem)},a.createElement("blockquote",{className:uo.quote},l(e)))}))),s?a.createElement(oe.QW,{onClick:()=>o(!1)},r.A.t("shared.common.show_more"),a.createElement(oe.In,{icon:"dropdown_alt",className:uo.icon})):null)}mo.defaultProps={maxItems:1/0};const po="_3C6YEb",Eo="_1TWlyY",vo="_3DoEYC",_o="xGtvXh",ho="_2w1OkR",go="_3UafxQ",bo="n61Gi7",fo="CrfxXg",wo="_4P59wQ";function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Io extends a.PureComponent{constructor(){super(...arguments),yo(this,"state",this.initialState),yo(this,"_isMounted",!1),yo(this,"textareaRef",a.createRef()),yo(this,"handleReviewTextChange",(e=>this.setState({reviewText:e}))),yo(this,"handleReviewTextKeyDown",(e=>{if(!this.state.editing&&e.which!==c.RP.tab)return this.props.isLoggedIn?this.setState({editing:!0}):(new c.ZZ).inTest()?void(0,c.V2)(this.props.oauthSignupUrl):this.props.openSignUp()})),yo(this,"handleRate",((e,t)=>this.rate(e,t))),yo(this,"handleSubmit",(()=>{this.validate()&&this.setState({loading:!0},(()=>{this.props.onSubmit({documentId:this.props.contentItem.id,text:this.state.reviewText,reviewId:this.props.userReview.id}).then((()=>{this.trackReview(this.hasReview?"updated":"added"),this._isMounted&&this.setState({loading:!1},this.props.onHide)})).catch((()=>{this._isMounted&&this.setState({loading:!1})}))}))})),yo(this,"handleCancel",(()=>this.hasReview?this.props.onHide():this.setState(this.initialState)))}get initialState(){return{editing:!1,errors:[],loading:!1,reviewText:this.props.userReview.reviewText||""}}get canSubmit(){return this.state.editing||this.hasReview}get hasRating(){return this.props.userRating>0}get hasReview(){return!!this.props.userReview.id}get needsRating(){return!!this.state.errors.find((e=>"rating"===e.input))}get submitButtonText(){return this.hasReview?r.A.t("shared.common.update"):r.A.t("content_preview.reviews.post")}get textAreaHelpText(){return this.canSubmit?r.A.t("content_preview.reviews.minimum_length"):null}get userRatingText(){switch(this.props.userRating){case 1:return r.A.t("content_preview.reviews.placeholder_rating_one");case 2:return r.A.t("content_preview.reviews.placeholder_rating_two");case 3:return r.A.t("content_preview.reviews.placeholder_rating_three");case 4:return r.A.t("content_preview.reviews.placeholder_rating_four");case 5:return r.A.t("content_preview.reviews.placeholder_rating_five");default:return null}}get textareaPlaceholderText(){var{contentType:e,title:t}=this.props.contentItem;switch(e){case D.g2.SHEET_MUSIC_CHAPTER:case D.g2.SHEET_MUSIC:return r.A.t("shared.review_form.placeholder_text_song");case D.g2.AUDIOBOOK:return r.A.t("shared.review_form.placeholder_text_audiobook");case D.g2.PODCAST_EPISODE:return r.A.t("shared.review_form.placeholder_text_podcast_episode");default:return this.hasRating?this.userRatingText:r.A.t("shared.review_form.placeholder_with_title",{title:t})}}get wordCount(){var e=this.state.reviewText.trim();return e.length?e.split(/\s+/).length:0}get reviewText(){return this.state.reviewText.replace(/<br>/gm,"\n")}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}trackReview(e){(0,c.sx)("ratings:review:".concat(e),{word_document_id:this.props.contentItem.id,review_id:this.props.userReview.id,review_word_count:this.wordCount})}rate(e,t){this.props.onRate(this.props.contentItem.id,t),this.setState((e=>({errors:e.errors.filter((e=>"rating"!==e.input))}))),(0,c.sx)("ratings:rating:update",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({word_document_id:this.props.contentItem.id,rating:t},e))}validate(){var e=[],t=10-this.wordCount;return t>0?(e.push({input:"review-text",message:r.A.t("content_preview.reviews.more_words_needed",{count:t})}),this.textareaRef.current.focus()):this.state.reviewText.length>=1e4&&(e.push({input:"review-text",message:r.A.t("content_preview.reviews.maximum_length")}),this.textareaRef.current.focus()),this.hasRating||e.push({input:"rating",message:r.A.t("content_preview.reviews.rating_required")}),this.setState({errors:e}),0===e.length}render(){return a.createElement("form",{className:po},a.createElement("div",{tabIndex:"0"},a.createElement("div",{className:go},r.A.t("content_preview.reviews.what_did_you_think")),a.createElement("div",{className:bo},a.createElement(oe.nl,{rate:this.handleRate,rating:this.props.userRating,page:ee,location:"reviews",isMobile:!1,isClearable:!this.hasReview}),this.needsRating?a.createElement("div",{className:fo},a.createElement(oe.In,{className:wo,icon:"warn"}),r.A.t("content_preview.reviews.rating_required")):null)),a.createElement(oe.fs,{name:"review-text",className:cn()(_o,{[ho]:this.canSubmit}),disabled:this.state.loading,errors:this.state.errors,helpText:this.textAreaHelpText,label:r.A.t("shared.common.write_review"),maxLength:1e4,nodeRef:this.textareaRef,placeholder:this.textareaPlaceholderText,value:this.reviewText,handleKeydown:this.handleReviewTextKeyDown,onChange:this.handleReviewTextChange,showOptional:!0}),this.canSubmit?a.createElement("div",{className:Eo},a.createElement(oe.QW,{className:vo,disabled:this.state.loading,onClick:this.handleCancel},r.A.t("shared.common.cancel")),a.createElement(oe.nF,{className:cn()(vo,{loading:this.state.loading}),disabled:this.state.loading,loading:this.state.loading,onClick:this.handleSubmit},this.submitButtonText)):null)}}Io.defaultProps={userReview:{}};var Ao=n(46028),So=n(46950),Oo=n(81474);const To=(0,o.Ng)((e=>{var{contentItem:t,ratings:n,reviews:a,user:r}=e,{currentUserReviewId:l}=t,{routes:i}=e.static,s={contentItem:t,isLoggedIn:r.isLoggedIn,oauthSignupUrl:i.oauthSignupUrl,userRating:n[t.id].userRating};return l&&a.data[l]&&(s.userReview={id:l,reviewText:a.data[l].reviewText}),s}),(e=>({openSignUp:()=>e((0,ni.A)({trackingData:{page:ee,loc:"write_review"},userAction:D.kf.USER_ACTIONS.REVIEW})),onRate:(t,n)=>e((0,Xl.A)((()=>e((0,Ao.A)(t,n,r.A.t("shared.star_ratings.your_rating_was_not_saved")))),{trackingData:{page:ee,loc:"star_ratings"},userAction:D.kf.USER_ACTIONS.RATE})),onSubmit:t=>{var{documentId:n,reviewId:a,text:r}=t;return e(a?(0,So.A)(n,a,r):(0,Oo.A)(n,r))}})))(Io);const Do={wrapper:"_33DEp5",heading:"_2-SDYk",average:"_3AVMi6",stats:"D8evJH"};function Ro(e){var{shortTitle:t,averageRating:n,ratingCount:l,reviewCount:i}=e,s=function(e){var t=e;return t=Math.min(t,sa),Math.max(t,oa)}(n);return a.createElement("div",{className:Do.wrapper},a.createElement("h3",{className:Do.heading},r.A.t("content_preview.reviews.ratings",{title:t})),a.createElement("data",{className:Do.average,value:s},s>0?s.toFixed(1):0),a.createElement(fs,{stars:s}),a.createElement("div",{className:Do.stats},l," ",r.A.t("shared.common.ratings")," / ",i||0," ",r.A.t("shared.common.reviews")))}var ko=n(85166);const Co="_4Mubkq",Lo="_2Dcbxo",Po="_22t8bx";var Uo=n(50093),xo=(e,t)=>{var{id:n}=t;return{documentId:e.contentItem.id,isAdmin:!!e.user.isAdmin,isCurrentUserReview:n===e.contentItem.currentUserReviewId,isLoggedIn:e.user.isLoggedIn}},Bo=e=>({openConfirmDeleteReviewModal:(t,n)=>e((0,Uo.A)({reviewId:t,documentId:n}))});const Mo=(0,o.Ng)(xo,Bo)((function(e){var{id:t,documentId:n,isAdmin:l,isCurrentUserReview:i,openConfirmDeleteReviewModal:s,onEditReview:o}=e;if(!i&&!l)return null;var c=l&&!i?r.A.t("content_preview.reviews.delete_admin"):r.A.t("content_preview.reviews.delete");return a.createElement("div",{className:Co},i&&a.createElement(a.Fragment,null,a.createElement(oe.QW,{className:Po,onClick:o},r.A.t("content_preview.reviews.edit")),a.createElement("span",{className:Lo},"\u2022")),a.createElement(oe.QW,{className:Po,type:"button",onClick:()=>s(t,n)},c))})),Fo="_2Xx0vl",Wo="_3-fEHP",Go="_1rIB7y",jo="_2_Xj9l",Ho="_33RdLV",Vo="-_JfPg";var zo=n(85302),Qo=(e,t)=>{var{currentUserVote:n,reviewId:a}=t,{isLoggedIn:r}=e.user,{id:l}=e.contentItem;return{isLoggedIn:r,isUpvote:1===n,isDownvote:-1===n,isCurrentUserReview:a===e.contentItem.currentUserReviewId,documentId:l}},Xo=(e,t)=>{var{reviewId:n}=t;return{handleRemoveVote:t=>e((0,zo.A)(t,n,0)),handleUpvote:t=>e((0,zo.A)(t,n,1)),handleDownvote:t=>e((0,zo.A)(t,n,-1))}};const Ko=(0,o.Ng)(Qo,Xo)((function(e){var{documentId:t,isCurrentUserReview:n,isDownvote:l,isLoggedIn:i,isUpvote:s,handleDownvote:o,handleRemoveVote:c,handleUpvote:u}=e;return!i||n?null:s||l?a.createElement("div",{className:Fo},a.createElement("div",{className:Wo},s?r.A.t("content_preview.reviews.found_helpful"):r.A.t("content_preview.reviews.found_unhelpful")),a.createElement(oe.QW,{className:Vo,type:"button",onClick:()=>c(t)},r.A.t("shared.common.undo"))):a.createElement("div",{className:Fo},a.createElement("div",{className:Wo},r.A.t("content_preview.reviews.is_helpful")),a.createElement(oe.QW,{className:Go,type:"button",onClick:()=>u(t)},a.createElement(oe.In,{className:Ho,icon:"thumbsup_outline_small"}),a.createElement(oe.In,{className:jo,icon:"thumbsup_fill_small"}),a.createElement(oe.s6,null,r.A.t("content_preview.reviews.review_helpful_label"))),a.createElement(oe.QW,{className:Go,type:"button",onClick:()=>o(t)},a.createElement(oe.In,{className:Ho,icon:"thumbsdown_outline_small"}),a.createElement(oe.In,{className:jo,icon:"thumbsdown_fill_small"}),a.createElement(oe.s6,null,r.A.t("content_preview.reviews.review_unhelpful_label"))))})),qo="_3C8zNQ",Yo="_308M_i",Jo="_1dBngh",Zo="_2jbTvQ",$o="_1e2S2z",ec="_2lc21m",tc="_2wk_n_",nc="yL1rMo",ac="_1Mo1QR",rc="sVO4b2";function lc(e){var{id:t,reviewText:n,author:l,rating:i,onEditReview:s,upvotes:o,currentUserVote:u}=e,{truncationRef:m,truncationState:d,handleTruncationExpandClick:p}=(0,ko.Pi)(161);return a.createElement("div",{className:qo,"data-e2e":"content-preview-review"},a.createElement("div",{className:Yo},a.createElement("div",{"aria-hidden":!0,className:ec},l),a.createElement("div",{className:Jo},a.createElement(fs,{stars:i}),a.createElement("span",{className:Zo},"(".concat(i,"/").concat(sa,")"))),a.createElement(oe.s8,{below:!0,width:c.fi.breakpoint_700},o>0&&a.createElement("p",{className:$o},r.A.t("content_preview.reviews.helpful_count",{count:o})),a.createElement(Ko,{currentUserVote:u,reviewId:t}),a.createElement(Mo,{id:t,onEditReview:s}))),a.createElement("div",null,a.createElement("div",{className:cn()(tc,{[ac]:d===ko.tQ.TRUNCATED,[nc]:d===ko.tQ.EXPANDED}),ref:m,dangerouslySetInnerHTML:{__html:n}}),d===ko.tQ.TRUNCATED?a.createElement(oe.QW,{role:"button",onClick:p,className:rc},r.A.t("shared.common.read_more")):null),a.createElement(oe.s8,{atOrAbove:!0,width:c.fi.breakpoint_700},o>0&&a.createElement("p",{className:$o},r.A.t("content_preview.reviews.helpful_count",{count:o})),a.createElement(Ko,{currentUserVote:u,reviewId:t}),a.createElement(Mo,{id:t,onEditReview:s})))}lc.defaultProps={currentUserVote:0,upvotes:0};const ic="_3C-_En",sc="_24VC-N",oc="_1E0d7C",cc="L4iPYV",uc="_1oEoyx";function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mc.apply(this,arguments)}function dc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pc extends a.PureComponent{constructor(){super(...arguments),dc(this,"state",{loading:!1}),dc(this,"_isMounted",!1),dc(this,"handleLoadMore",(()=>this.fetchReviews(this.currentPage+1)))}get canLoadMore(){var{reviewCount:e,reviews:t,isEditing:n}=this.props,a=n?t.length+1:t.length;return!(!e||0===e)&&!!(a<e)}get currentPage(){return Math.ceil(this.props.reviews.length/6)}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}fetchReviews(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setState({loading:!0},(()=>{this.props.onFetchReviews(this.props.documentId,e).finally((()=>{this._isMounted&&this.setState({loading:!1})}))}))}render(){return a.createElement("div",{className:ic},a.createElement("h3",{className:sc},r.A.t("content_preview.reviews.reader_reviews")),a.createElement("ul",{className:oc},this.props.reviews.map((e=>a.createElement("li",{key:e.id,className:cc},a.createElement(lc,mc({onEditReview:this.props.onEditReview},e)))))),this.canLoadMore?a.createElement("div",{className:uc},a.createElement(oe.rp,{disabled:this.state.loading,loading:this.state.loading,onClick:this.handleLoadMore},r.A.t("shared.common.load_more"))):null)}}var Ec=n(31570),vc=(e,t)=>{var{isEditing:n}=t,a=[...e.reviews.ids].map((t=>e.reviews.data[t]));return n&&(a=a.filter((e=>!e.currentUserReview))),{brand:e.static.config.brand,documentId:e.contentItem.id,reviews:a,reviewCount:e.reviews.reviewCount,isLoggedIn:e.user.isLoggedIn}},_c=e=>({onFetchReviews:(t,n)=>e((0,Ec.A)(t,n))});const hc=(0,o.Ng)(vc,_c)(pc),gc="_3ihZ5p";function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bc.apply(this,arguments)}const fc=(0,o.Ng)((e=>{var{id:t,shortTitle:n,criticReviews:a,currentUserReviewId:r}=e.contentItem;return{shortTitle:n,criticReviews:a,currentUserReviewId:r,ratings:e.ratings[t],reviewCount:e.reviews.reviewCount}}))((function(e){var{shortTitle:t,criticReviews:n,currentUserReviewId:l,ratings:i,reviewCount:s}=e,o=!!l,[c,u]=(0,a.useState)(!!o),m=!o||c;return a.createElement("div",{"data-e2e":"content-preview-reviews"},a.createElement("h2",{className:gc},r.A.t("shared.common.reviews")),a.createElement("div",null,a.createElement(Ro,bc({shortTitle:t,reviewCount:s},i)),m?a.createElement(To,{onHide:()=>u(!1)}):null,a.createElement(mo,{header:r.A.t("content_preview.reviews.critic"),items:n,itemRenderer:co}),a.createElement(hc,{isEditing:c,onEditReview:()=>u(!0)})))})),wc="_9GlT8l";function Nc(e){var{children:t}=e;return a.createElement("div",{className:wc},a.createElement(oe.tH,null,t))}const yc="_17dp-9",Ic="fgTucM";const Ac=(0,o.Ng)((e=>{var t,{contentType:n}=e.contentItem,a=e.compilation.modules.find((e=>e.type===Xs));return{count:(null===a||void 0===a||null===(t=a.documents)||void 0===t?void 0:t.length)||0,contentType:n}}))((function(e){var{count:t,contentType:n}=e;return a.createElement("div",{className:Ic,"data-e2e":"content-length"},n===D.g2.AUDIOBOOK?r.A.t("content_types.audiobook_series"):r.A.t("content_types.ebook_series"),a.createElement(Pe.pBB,{className:yc}),r.A.t("home.logged_in.content_quickview.count_titles",{count:t}))}));function Sc(e,t){if(void 0===t||0===Object.keys(e).length)return null;var n=t.documents.slice(0,3).map((t=>e[t.id]));return n.length<3?[n[2],n[1],n[0]]:[n[1],n[2],n[0]]}var Oc=(0,z.Mz)((e=>e.documents),(e=>e.compilation.modules.find((e=>e.type===Xs))),(e=>e.contentItem.contentType),((e,t,n)=>({thumbnails:Sc(e,t),contentType:n})));const Tc={wrapper:"_3JQjbz",book:"_1tBSoh",shimmer:"_3BqWki",audiobook:"_1U28p_",background:"DKcGLd",center:"_3_ClUE",side:"_9SVoLE",imgWrapper:"_1fqhk8",image:"_12hWM6"};var Dc=2;function Rc(){var{thumbnails:e,contentType:t}=(0,o.d4)(Oc);return null===e?a.createElement("div",{className:cn()(Tc.wrapper,Tc.shimmer,Tc[t])},a.createElement(oe.WA,null)):a.createElement("div",{"data-e2e":"series-thumbnail",className:cn()(Tc.wrapper,Tc[t])},a.createElement("div",{className:Tc.background}),e.map(((e,n)=>a.createElement("div",{className:cn()(Tc.imgWrapper,{[Tc.center]:n===Dc},{[Tc.side]:n!==Dc},Tc[t]),key:n},void 0===e?null:a.createElement(oe.oD,{altText:e.title,"aria-label":e.title,imageStyles:Tc.image,src:e.imageUrl,srcSet:e.retinaImageUrl})))))}const kc=e=>{switch(e){case xn:return r.A.t("content_preview.sheet_music_levels.advanced");case Bn:return r.A.t("content_preview.sheet_music_levels.beginner");case Mn:return r.A.t("content_preview.sheet_music_levels.intermediate");case Fn:return r.A.t("content_preview.sheet_music_levels.mixed");default:return""}};const Cc=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length?r.A.t("content_preview.sheet_music_levels.instruments"):0===e.length?r.A.t("content_preview.sheet_music_levels.difficulty_level"):r.A.t("content_preview.sheet_music_levels.difficulty_instruments_title")};const Lc=e=>{switch(e){case Wn:return r.A.t("shared.instruments.alto_sax");case Gn:return r.A.t("shared.instruments.bass");case jn:return r.A.t("shared.instruments.brass");case Hn:return r.A.t("shared.instruments.cello");case Vn:return r.A.t("shared.instruments.clarinet");case zn:return r.A.t("shared.instruments.double_bass");case Qn:return r.A.t("shared.instruments.drums_percussion");case Xn:return r.A.t("shared.instruments.flute_piccolo");case Kn:return r.A.t("shared.instruments.french_horn");case qn:return r.A.t("shared.instruments.guitar");case Yn:return r.A.t("shared.instruments.piano");case Jn:return r.A.t("shared.instruments.recorder");case Zn:return r.A.t("shared.instruments.tenor_sax");case $n:return r.A.t("shared.instruments.trombone");case ea:return r.A.t("shared.instruments.trumpet");case ta:return r.A.t("shared.instruments.tuba");case na:return r.A.t("shared.instruments.ukulele");case aa:return r.A.t("shared.instruments.viola");case ra:return r.A.t("shared.instruments.violin");case la:return r.A.t("shared.instruments.vocal");case ia:return r.A.t("shared.instruments.woodwinds");default:return""}},Pc={wrapper:"_1T0W2t",heading:"_3Ftdsc",list:"_147VXE",listItem:"_2RRmRk",categoryLink:"_3aRAUj",labelContainer:"_3yIozN",instrument:"_2pC07N",label:"_2D6yZD",secondaryLabel:"qoFAm6",icon:"oZmDhi",advanced:"_1TGjXk",beginner:"_2W03a9",intermediate:"_1NNcxZ",mixed:"cD_cMo",brass:"_3fPUc5",trumpet:"_3w0YhA",tuba:"_2UWCDf",trombone:"_34imPU",french_horn:"Spn6Aq",tenor_sax:"_22NGdh",alto_sax:"_2eVvRs",drums_percussion:"O0RjA7",guitar:"_461wEH",bass:"_38m4Qq",ukulele:"_13_b3Y",piano:"_1HM7YG",cello:"_1a4xX6",violin:"_2kmX7t",viola:"_1Gh7JM",double_bass:"_2L2dRM",vocal:"_1ANSsZ",woodwinds:"_3AVQ05",clarinet:"_1CHJFj",flute_piccolo:"_6wJ5-S",recorder:"_3ECehL"};function Uc(e){var{difficultyLevels:t,instruments:n}=e;return 0===t.length&&0===n.length?null:a.createElement("div",{className:Pc.wrapper},a.createElement(oe.s6,null,r.A.t("shared.common.about")),a.createElement("h3",{className:Pc.heading},Cc(t,n)),a.createElement("ul",{className:Pc.list},t.map((e=>a.createElement("li",{className:Pc.listItem,key:e.id},a.createElement("div",null,a.createElement("span",{className:cn()(Pc.icon,Pc[e.name])})),a.createElement("div",{className:Pc.labelContainer},a.createElement("span",{className:Pc.label},kc(e.name)),a.createElement("span",{className:Pc.secondaryLabel},r.A.t("content_preview.sheet_music_levels.level")))))),n.map((e=>a.createElement("li",{className:Pc.listItem,key:e.id},a.createElement("a",{className:Pc.categoryLink,href:e.href},a.createElement("div",null,a.createElement("span",{className:cn()(Pc.icon,Pc[e.name])})),a.createElement("div",{className:cn()(Pc.labelContainer,Pc.instrument)},a.createElement("span",{className:Pc.label},Lc(e.name)),a.createElement("span",{className:Pc.secondaryLabel},r.A.t("content_preview.sheet_music_levels.instrument")))))))))}Uc.defaultProps={difficultyLevels:[],instruments:[]};const xc=(0,o.Ng)((e=>({difficultyLevels:e.contentItem.difficultyLevels,instruments:e.contentItem.instruments})))(Uc),Bc="_16l64s";const Mc=(0,o.Ng)((e=>({isChapter:e.contentItem.contentType===D.g2.SHEET_MUSIC_CHAPTER,sheetMusicUrl:e.static.routes.sheetMusicPath,userContentStatus:(0,qt.A)(e)})))((function(e){var{isChapter:t,sheetMusicUrl:n,userContentStatus:r}=e;switch(r){case D.DW.LOADING:return a.createElement(a.Fragment,null,a.createElement(oe.nF,{className:Bc,loading:!0}),a.createElement(oe.rp,{loading:!0}));case D.DW.LOGGED_IN_SUBSCRIBER:case D.DW.SUBSCRIBER_DUNNING_LOCK:case D.DW.SUBSCRIBER_FULL_ACCESS:return a.createElement(_i,null);case D.DW.LOGGED_IN_UNAVAILABLE:return a.createElement(Al,{url:n});case D.DW.LOGGED_IN_ABORTED:case D.DW.LOGGED_IN_CANCELED_EXPIRED:case D.DW.LOGGED_IN_PAUSED:case D.DW.LOGGED_IN_TRIAL_INELIGIBLE:return a.createElement(a.Fragment,null,a.createElement(fi,null),t?a.createElement($i,null):a.createElement(bi,null));case D.DW.LOGGED_IN_TRIAL_ELIGIBLE:case D.DW.LOGGED_OUT_PREVIEW:case D.DW.LOGGED_OUT_TRIAL_ELIGIBLE:return a.createElement(a.Fragment,null,a.createElement(Yi,{checkoutEntryPointButtonName:D.ej.CONTENT_PREVIEW_PRIMARY_ACTION_START_FREE}),t?a.createElement($i,null):a.createElement(bi,null));case D.DW.LOGGED_OUT_UNAVAILABLE:return a.createElement(a.Fragment,null,a.createElement(Al,{url:n}),a.createElement($i,null));default:return null}}));const Fc=(0,o.Ng)((e=>{var t,n,a,r,l;return{availableDate:e.contentItem.availableDate,documentRestriction:e.contentItem.documentRestriction,expiryDate:e.contentItem.expiryDate,plansEnabled:null!==(t=null===(n=e.personalization)||void 0===n||null===(a=n.featureFlags)||void 0===a?void 0:a.plansEnabled)&&void 0!==t&&t,transitionStatus:null===(r=e.contentItem)||void 0===r||null===(l=r.catalog)||void 0===l?void 0:l.transitionStatus}}))(oe.hC);function Wc(e){var{brand:t,isDS2Banner:n=!1,isEligibleForFreeTrial:a,plansEnabled:l,subscriptionPrice:i}=e;return{headline:t===D.rI.EVERAND?n?r.A.t("content_preview.banner.headline"):r.A.t("everand.content_preview.content.enjoy_millions_of_ebooks_audiobooks_magazines_free_trial"):n?r.A.t("content_preview.content.enjoy_millions_of_ebooks_audiobooks_magazines_free_trial"):r.A.t("content_preview.banner.headline"),subtitle:l?r.A.t("explore.banner.after_trial_cancel_anytime",{price:i}):a?r.A.t("content_preview.banner.trial_eligible_subtitle",{price:i}):r.A.t("content_preview.banner.trial_ineligible_subtitle",{price:i})}}var Gc=n(35961),jc=n.n(Gc),Hc=n(84936),Vc=n.n(Hc),zc=n(15235),Qc=n.n(zc),Xc=n(32430),Kc=n.n(Xc),qc=n(19718),Yc=n.n(qc),Jc=n(55835),Zc=n.n(Jc),$c=n(42650),eu=n.n($c),tu=n(87183),nu=n.n(tu),au=n(89330),ru=n.n(au),lu=n(18823),iu=n.n(lu),su=n(79214),ou=n.n(su),cu=n(64579),uu=n.n(cu),mu=n(96516),du=n.n(mu),pu=n(25465),Eu=n.n(pu),vu=n(43664),_u=n.n(vu),hu=n(16069),gu=n.n(hu),bu=n(39460),fu=n.n(bu),wu=n(84761),Nu=n.n(wu),yu=n(90544),Iu=n.n(yu),Au=n(62949),Su=n.n(Au),Ou=n(83340),Tu=n.n(Ou),Du=n(31521),Ru=n.n(Du),ku=n(27848),Cu=n.n(ku),Lu=n(28573),Pu=n.n(Lu);function Uu(e,t,n){if(null===t)return a.createElement("div",{className:e.imageWrapper});var r=t?a.createElement("img",{alt:"",role:"presentation",src:(0,c.Q$)(n.mobile["1x"]),srcSet:(0,c.Q$)(n.mobile["2x"]),"data-testid":"image-mobile"}):a.createElement("img",{alt:"",role:"presentation",src:(0,c.Q$)(n.desktop["1x"]),srcSet:(0,c.Q$)(n.desktop["2x"]),"data-testid":"image-desktop"});return a.createElement("div",{className:e.imageWrapper},r)}function xu(e){return e<=c.fi.breakpoint_700}var Bu=n(44450),Mu=n.n(Bu),Fu=n(37367),Wu=n.n(Fu),Gu=n(38334),ju=n.n(Gu),Hu=n(62579),Vu=n.n(Hu),zu=n(53313),Qu=n.n(zu),Xu=n(84432),Ku=n.n(Xu),qu=n(86203),Yu=n.n(qu),Ju=n(10950),Zu=n.n(Ju),$u=n(97065),em=n.n($u),tm=n(77240),nm=n.n(tm),am=n(90515),rm=n.n(am),lm=n(14942),im=n.n(lm);const sm={wrapper:"_2diSkg",banner:"_3Y7a5O",contentWrapper:"_3M8rzf",headline:"_17tFR4",headlineEverand:"_22OwHV",cta:"_3pe7nh",ctaEverand:"_3Gimc8",subtitle:"_2U9F-z",subtitleEverand:"_3YT1j8",imageWrapper:"_1m4xBy"};var om=()=>{(0,c.XI)(D.ej.CONTENT_PREVIEW_SUBSCRIPTION_BANNER_START_FREE),(0,c.sx)("podcast.subscription_banner_cta:click",(0,c.$I)())};function cm(e){var{brand:t,currentLanguage:n,handleCtaClick:l,isEligibleForFreeTrial:i,isSubscriber:s,pageWidth:o,plansEnabled:c,subscriptionPrice:u,trialDuration:m}=e;if(s)return null;var[d,p]=(0,a.useState)(null),E=function(e){switch(e){case D.Yj.ES.prefix:return{desktop:{"1x":em(),"2x":"".concat(nm()," 2x")},mobile:{"1x":rm(),"2x":"".concat(im()," 2x")}};case D.Yj.PT.prefix:return{desktop:{"1x":Qu(),"2x":"".concat(Ku()," 2x")},mobile:{"1x":Yu(),"2x":"".concat(Zu()," 2x")}};default:return{desktop:{"1x":Mu(),"2x":"".concat(Wu()," 2x")},mobile:{"1x":ju(),"2x":"".concat(Vu()," 2x")}}}}(n);return(0,a.useEffect)((()=>{p(xu(o));var e=ar()((()=>p(xu(o))),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)})),a.createElement("section",{className:sm.wrapper,"data-e2e":"subscription-banner"},a.createElement("div",{className:sm.banner},Uu(sm,d,E),a.createElement("div",{className:sm.contentWrapper},a.createElement("h2",{className:cn()(sm.headline,{[sm.headlineEverand]:t===D.rI.EVERAND})},(e=>e===D.rI.EVERAND?r.A.t("everand.documents.promo.discover_this_podcast_and_more"):r.A.t("content_preview.banner.podcast_headline"))(t)),a.createElement("p",{className:cn()(sm.subtitle,{[sm.subtitleEverand]:t===D.rI.EVERAND})},((e,t,n)=>e===D.rI.EVERAND?t?r.A.t("everand.content_preview.banner.podcast_subtitle_from_price",{price:n}):r.A.t("everand.content_preview.banner.podcast_subtitle",{price:n}):r.A.t("content_preview.banner.podcast_subtitle",{price:n}))(t,c,u)),!i||m?a.createElement(oe.hX,{className:cn()(sm.cta,{[sm.ctaEverand]:t===D.rI.EVERAND}),"data-e2e":"subscription-banner-cta",copyType:D.JU.START_TRIAL,onClick:om,openSignUpModal:l,theme:D.sJ.SECONDARY_TEAL}):a.createElement(oe.MX,{className:cn()(sm.cta,{[sm.ctaEverand]:t===D.rI.EVERAND}),"data-e2e":"subscription-banner-cta",tooltipContent:r.A.t("shared.loading_button.tooltip_content.loading")}))))}cm.defaultProps={brand:null,plansEnabled:!1};const um=(0,o.Ng)((e=>({currentLanguage:e.i18n.currentLanguage.prefix,isEligibleForFreeTrial:e.user.isEligibleForFreeTrial,isSubscriber:e.user.isSubscriber,pageWidth:e.viewport.width,plansEnabled:e.personalization.featureFlags.plansEnabled,subscriptionPrice:e.personalization.subscriptionPrice,trialDuration:e.personalization.trialDuration})),((e,t)=>({handleCtaClick:n=>{var{nextUrl:a}=n;return e((0,ni.A)({documentType:t.documentType,trackingData:{loc:"subscription_banner",page:"content_preview"},nextUrl:a}))}})))(cm),mm={wrapper:"_1-5UbK",banner:"_1W7vtS",contentWrapper:"_3IqjZK",headline:"_2MFCLk",headlineEverand:"ygU8cD",cta:"EIzv_F",ctaEverand:"_2gNRvp",subtitle:"_22bkoM",subtitleEverand:"_1wggMb",imageWrapper:"_2dajxk"};function dm(e){var{brand:t,currentLanguage:n,documentType:l,handleCtaClick:i,isEligibleForFreeTrial:s,isSubscriber:o,pageWidth:u,plansEnabled:m,subscriptionPrice:d,trialDuration:p}=e;if(o)return null;if([D.g2.PODCAST,D.g2.PODCAST_EPISODE].includes(l))return a.createElement(um,{brand:t});var[E,v]=(0,a.useState)(null),_=Wc({brand:t,isEligibleForFreeTrial:s,plansEnabled:m,subscriptionPrice:d}),h=function(e){switch(e){case D.Yj.ES.prefix:return{desktop:{"1x":ru(),"2x":"".concat(iu()," 2x")},mobile:{"1x":ou(),"2x":"".concat(uu()," 2x")}};case D.Yj.PT.prefix:return{desktop:{"1x":Yc(),"2x":"".concat(Zc()," 2x")},mobile:{"1x":eu(),"2x":"".concat(nu()," 2x")}};default:return{desktop:{"1x":jc(),"2x":"".concat(Vc()," 2x")},mobile:{"1x":Qc(),"2x":"".concat(Kc()," 2x")}}}}(n);return(0,a.useEffect)((()=>{v(xu(u));var e=ar()((()=>{v(xu(u))}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)})),a.createElement("section",{className:cn()(mm.wrapper),"data-e2e":"subscription-banner",id:"subscription-banner"},a.createElement("div",{className:mm.banner},Uu(mm,E,h),a.createElement("div",{className:mm.contentWrapper},a.createElement("h2",{className:cn()(mm.headline,{[mm.headlineEverand]:t===D.rI.EVERAND})},_.headline),!s||p?a.createElement(oe.hX,{className:cn()(mm.cta,{[mm.ctaEverand]:t===D.rI.EVERAND}),copyType:D.JU.START_TRIAL,"data-e2e":"subscription-banner-cta",onClick:()=>{(0,c.XI)(D.ej.CONTENT_PREVIEW_SUBSCRIPTION_BANNER_START_FREE),(0,c.sx)("content_preview:subscription_banner_cta:click",(0,c.$I)())},openSignUpModal:i,theme:D.sJ.SECONDARY_TEAL}):a.createElement(oe.MX,{className:cn()(mm.cta,{[mm.ctaEverand]:t===D.rI.EVERAND}),"data-e2e":"subscription-banner-cta",tooltipContent:r.A.t("shared.loading_button.tooltip_content.loading")}),a.createElement("p",{className:cn()(mm.subtitle,{[mm.subtitleEverand]:t===D.rI.EVERAND})},_.subtitle))))}dm.defaultProps={plansEnabled:!1};var pm=e=>{var t,n;return{brand:e.static.config.brand,currentLanguage:e.i18n.currentLanguage.prefix,documentType:e.contentItem.contentType,isEligibleForFreeTrial:e.user.isEligibleForFreeTrial,isSubscriber:e.user.isSubscriber,pageWidth:e.viewport.width,plansEnabled:null===(t=e.personalization)||void 0===t||null===(n=t.featureFlags)||void 0===n?void 0:n.plansEnabled,subscriptionPrice:e.personalization.subscriptionPrice,trialDuration:e.personalization.trialDuration}},Em=(e,t)=>({handleCtaClick:n=>{var{nextUrl:a}=n;return e((0,ni.A)({documentType:t.documentType,trackingData:{loc:"subscription_banner",page:"content_preview"},nextUrl:a}))}});const vm=(0,o.Ng)(pm,Em)(dm);var _m=n(55530);const hm="m7Udx1",gm="_34sIKf",bm="GvWrRi",fm="_31uN3S",wm="_3aq1Rs",Nm="_1hheju",ym="_3vO37m";var Im={desktop:"(min-width: ".concat(D.LO.DS2[D.F0.L],"px)"),mobile:"(max-width: ".concat(D.LO.DS2[D.F0.S],"px)")};function Am(e){var{brand:t,currentLanguage:n,documentType:l,isEligibleForFreeTrial:i,isSubscriber:s,subscriptionPrice:o,trialDuration:u}=e;if(s)return null;if([D.g2.PODCAST,D.g2.PODCAST_EPISODE].includes(l))return a.createElement(um,null);var m=function(e){switch(e){case D.Yj.ES.prefix:return{desktop:{"1x":Tu(),"2x":"".concat(Ru()," 2x")},mobile:{"1x":Cu(),"2x":"".concat(Pu()," 2x")}};case D.Yj.PT.prefix:return{desktop:{"1x":fu(),"2x":"".concat(Nu()," 2x")},mobile:{"1x":Iu(),"2x":"".concat(Su()," 2x")}};default:return{desktop:{"1x":du(),"2x":"".concat(Eu()," 2x")},mobile:{"1x":_u(),"2x":"".concat(gu()," 2x")}}}}(n),d=(0,a.useMemo)((()=>Object.keys(m).map((e=>a.createElement("source",{"data-testid":"image-".concat(e),key:e,media:Im[e],srcSet:"".concat((0,c.Q$)(m[e]["1x"]),", ").concat((0,c.Q$)(m[e]["2x"]))})))),[m]),p=Wc({brand:t,isDS2Banner:!0,isEligibleForFreeTrial:i,subscriptionPrice:o});return a.createElement(_m.Ev,{className:hm,"data-e2e":"subscription-banner"},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:12},a.createElement("div",{className:gm,id:"subscription-banner"},a.createElement("div",{className:Nm},a.createElement("picture",null,d,a.createElement("img",{alt:"",role:"presentation",src:(0,c.Q$)(m.desktop["1x"]),srcSet:(0,c.Q$)(m.desktop["2x"])}))),a.createElement("div",{className:bm},a.createElement("p",{className:wm},p.headline),i&&null===u?a.createElement(oe.MX,{className:fm,"data-e2e":"subscription-banner-cta",size:D.F0.S,tooltipContent:r.A.t("shared.loading_button.tooltip_content.loading")}):a.createElement(Zi,{buttonStyle:D._C.MONOTONE_BLACK,checkoutEntryPointButtonName:D.ej.CONTENT_PREVIEW_SUBSCRIPTION_BANNER_START_FREE,className:fm,"data-e2e":"subscription-banner-cta",eventName:"content_preview:subscription_banner_cta:click",size:D.F0.S}),a.createElement("p",{className:ym},p.subtitle))))))}Am.defaultProps={trialDuration:null};const Sm=(0,o.Ng)(pm,Em)(Am);var Om=n(34026),Tm=n.n(Om),Dm=n(651),Rm=n.n(Dm),km=n(3094),Cm=n.n(km),Lm=n(89271),Pm=n.n(Lm),Um=n(88364),xm=n.n(Um),Bm=n(31937),Mm=n.n(Bm),Fm=n(59208),Wm=n.n(Fm),Gm=n(63933),jm=n.n(Gm);const Hm="WPNFPp",Vm="_1Dk_FK",zm="_1seHbz",Qm="_2mDrN6",Xm="_1zXScm",Km="icgA33",qm="_2nvSn3",Ym="_2j6WoV",Jm="_1miiOS";var Zm={desktop:"(min-width: ".concat(D.LO.DS2[D.F0.L],"px)"),mobile:"(max-width: ".concat(D.LO.DS2[D.F0.S],"px)")};function $m(e){var{currentLanguage:t,documentType:n,isEligibleForFreeTrial:l,isPaused:i,isSubscriber:s,plansEnabled:o,subscriptionPrice:u,trialDuration:m}=e;if(s||i)return null;if([D.g2.PODCAST,D.g2.PODCAST_EPISODE].includes(n))return a.createElement(um,null);var d=function(e,t){if(t)return{desktop:{"1x":Tm(),"2x":"".concat(Rm()," 2x")},mobile:{"1x":Cm(),"2x":"".concat(Pm()," 2x")}};switch(e){case D.Yj.ES.prefix:return{desktop:{"1x":Tu(),"2x":"".concat(Ru()," 2x")},mobile:{"1x":Cu(),"2x":"".concat(Pu()," 2x")}};case D.Yj.PT.prefix:return{desktop:{"1x":fu(),"2x":"".concat(Nu()," 2x")},mobile:{"1x":Iu(),"2x":"".concat(Su()," 2x")}};default:return{desktop:{"1x":xm(),"2x":"".concat(Mm()," 2x")},mobile:{"1x":Wm(),"2x":"".concat(jm()," 2x")}}}}(t,o),p=(0,a.useMemo)((()=>Object.keys(d).map((e=>a.createElement("source",{"data-testid":"image-".concat(e),key:e,media:Zm[e],srcSet:"".concat((0,c.Q$)(d[e]["1x"]),", ").concat((0,c.Q$)(d[e]["2x"]))})))),[d]),E=function(e){var{isDS2Banner:t=!1,isEligibleForFreeTrial:n,plansEnabled:a,subscriptionPrice:l}=e;return{headline:t?r.A.t("everand.content_preview.content.enjoy_millions_of_ebooks_audiobooks_magazines_free_trial"):r.A.t("content_preview.banner.headline"),subtitle:a?r.A.t("explore.banner.after_trial_cancel_anytime",{price:l}):n?r.A.t("shared.common.only_price_after_trial__html",{price:l}):r.A.t("content_preview.banner.trial_ineligible_subtitle",{price:l})}}({isDS2Banner:!0,isEligibleForFreeTrial:l,plansEnabled:o,subscriptionPrice:u});return a.createElement(_m.Ev,{className:Hm,"data-e2e":"subscription-banner","data-testid":"subscription-banner"},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:12},a.createElement("div",{className:Vm,id:"subscription-banner"},a.createElement("div",{className:qm},a.createElement("picture",null,p,a.createElement("img",{alt:"",className:Ym,role:"presentation",src:(0,c.Q$)(d.desktop["1x"]),srcSet:(0,c.Q$)(d.desktop["2x"])}))),a.createElement("div",{className:zm},a.createElement("p",{className:Km},E.headline),a.createElement("p",{className:Jm,dangerouslySetInnerHTML:{__html:E.subtitle}}),l&&null===m?a.createElement(oe.MX,{className:Xm,"data-e2e":"subscription-banner-cta",size:D.F0.S,tooltipContent:r.A.t("shared.loading_button.tooltip_content.loading")}):a.createElement(Zi,{buttonStyle:D._C.MONOTONE_BLACK,checkoutEntryPointButtonName:D.ej.CONTENT_PREVIEW_SUBSCRIPTION_BANNER_START_FREE,className:Qm,"data-e2e":"subscription-banner-cta",eventName:"content_preview:subscription_banner_cta:click",size:D.F0.S}))))))}$m.defaultProps={plansEnabled:!1,trialDuration:null};const ed=(0,o.Ng)((e=>({brand:e.static.config.brand,currentLanguage:e.i18n.currentLanguage.prefix,documentType:e.contentItem.contentType,isEligibleForFreeTrial:e.user.isEligibleForFreeTrial,isPaused:e.user.isPaused,isSubscriber:e.user.isSubscriber,plansEnabled:e.personalization.featureFlags.plansEnabled,subscriptionPrice:e.personalization.subscriptionPrice,trialDuration:e.personalization.trialDuration})))($m);const td="_1pTWZ0",nd="_3o9X23",ad="_33ilLG",rd="ep0dxl";function ld(e){var{documentRestriction:t,imageUrl:n,retinaImageUrl:r,rounded:l,square:i,title:s}=e;return a.createElement("div",{className:td,"data-e2e":"thumbnail"},a.createElement(Ll,{type:t}),a.createElement("img",{alt:s,"aria-label":s,className:cn()(nd,{[rd]:l,[ad]:i}),src:n,srcSet:"".concat(r," 2x")}))}ld.defaultProps={square:!1};const id=(0,o.Ng)(((e,t)=>{var{imageUrl:n,title:a,retinaImageUrl:r,documentRestriction:l}=e.contentItem;return{documentRestriction:l,imageUrl:n,retinaImageUrl:r,square:t.square,title:a}}))(ld);var sd={[D.g2.AUDIOBOOK]:{DESKTOP:[70,30],NO_ALT_FORMAT:[90,10]},[D.g2.BOOK]:{DESKTOP:[75,25],NO_ALT_FORMAT:[92,8]}};const od={wrapper:"_3WRw2O",alternateFormat:"_3l01nH",mobile:"_1krx8U",audiobook:"_2bZRRf",book:"uejO1z",thumbnail:"_3q4hyJ"};function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cd.apply(this,arguments)}function ud(e){var{brand:t,contentType:n,isDesktopWidth:r,documentRestriction:l,hasAltFormat:i,id:s,imageUrl:o,pageWidth:u,retinaImageUrl:m,title:d}=e,p=(0,c.q8)(null,null,null,s,t),E=function(e,t,n){return e&&Object.keys(sd).includes(t)?n?{backgroundImage:"linear-gradient(180deg, ".concat(e," ").concat(sd[t].DESKTOP[0],"%, var(--color-snow-100) ").concat(sd[t].DESKTOP[1],"%)")}:{backgroundImage:"linear-gradient(180deg, ".concat(e," ").concat(sd[t].NO_ALT_FORMAT[0],"%, transparent ").concat(sd[t].NO_ALT_FORMAT[1],"%)")}:null}(p,n,i),v=u>=620?D.F0.M:D.F0.S,_={"aria-label":d,alt:d,className:od.thumbnail,imageUrl:o,restrictionType:l,retinaImageUrl:m,thumbnailStyle:D.YQ.SHADOW,thumbnailType:n===D.g2.AUDIOBOOK?D.RO.AUDIOBOOK_CONTENT_CELL:D.RO.BOOK_CONTENT_CELL};return a.createElement("div",{"data-e2e":r?"thumbnail-desktop":"thumbnail-mobile"},r?a.createElement("div",{className:cn()(od.wrapper),style:E},a.createElement(he.Vz,cd({},_,{size:v})),i?a.createElement("span",{className:od.alternateFormat},a.createElement(Fe,null)):null):a.createElement("div",{className:cn()(od.wrapper,od.mobile,od[n]),style:{backgroundColor:p}},a.createElement(he.s8,{atAndBelow:!0,size:D.F0.XS},a.createElement(he.Vz,cd({},_,{size:D.F0.L}))),a.createElement(he.s8,{above:!0,size:D.F0.XS},a.createElement(he.s8,{atAndBelow:!0,size:D.F0.XXS},a.createElement(he.Vz,cd({},_,{size:D.F0.M}))),a.createElement(he.s8,{above:!0,size:D.F0.XXS},a.createElement(he.Vz,cd({},_,{size:D.F0.S}))))))}ud.defaultProps={brand:null,isDesktopWidth:!1,documentRestriction:null,retinaImageUrl:"",title:""};const md=(0,o.Ng)((e=>{var{contentType:t,documentRestriction:n,id:a,imageUrl:r,retinaImageUrl:l,title:i}=e.contentItem,s=X(e),{brand:o}=e.static.config;return{brand:o,contentType:t,documentRestriction:n,hasAltFormat:!!s,id:a,imageUrl:r,pageWidth:e.viewport.width,retinaImageUrl:l,title:i}}))(ud);var dd=n(91501);function pd(){var e,t,n=(0,o.d4)((e=>e.contentItem)),{date:r,to:l}=null!==(e=null===n||void 0===n||null===(t=n.catalog)||void 0===t?void 0:t.transitionStatus)&&void 0!==e?e:{};return r?a.createElement(dd.g,{date:r,to:l,shouldWrap:!0}):null}const Ed="gFw1MQ",vd="_2wXHtw",_d="_2x-vM1",hd="lQSEO3",gd="_3etpCA";function bd(e){var{documentId:t,upvoteCount:n,downvoteCount:l,userRating:i,onUpvote:s,onDownvote:o}=e,u=i>=3,m=i>0&&i<3;return a.createElement("div",{className:Ed},a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement("span",{className:_d},r.A.t("shared.common.ratings"),":")),a.createElement("div",{className:vd},a.createElement(oe.m_,{content:r.A.t("shared.upvotes.like")},a.createElement(oe.QW,{className:hd,onClick:u?c.lQ:()=>s(t)},a.createElement(oe.In,{icon:u?"thumbsup_fill_small":"thumbsup_outline_small"}),a.createElement(oe.s6,null,u?r.A.t("shared.upvotes.up_votes_you_marked_this_as_liked"):r.A.t("shared.upvotes.up_votes_mark_as_like")),a.createElement("span",{className:gd},n))),a.createElement(oe.m_,{content:r.A.t("shared.upvotes.dislike")},a.createElement(oe.QW,{className:hd,onClick:m?c.lQ:()=>o(t)},a.createElement(oe.In,{icon:m?"thumbsdown_fill_small":"thumbsdown_outline_small"}),a.createElement("span",{className:gd},l),a.createElement(oe.s6,null,m?r.A.t("shared.upvotes.down_votes_you_marked_this_as_disliked"):r.A.t("shared.upvotes.down_votes_mark_as_dislike"))))))}bd.defaultProps={upvoteCount:0,downvoteCount:0,userRating:null};var fd=n(72473),wd=n(98496);const Nd=(0,o.Ng)((e=>{var{id:t}=e.contentItem,n=e.ratings[t];return{upvoteCount:n.upvoteCount,downvoteCount:n.downvoteCount,userRating:n.userRating,documentId:t}}),(e=>{var t={trackingData:{page:ee,loc:"upvote"},userAction:D.kf.USER_ACTIONS.RATE};return{onUpvote:n=>e((0,Xl.A)((()=>e((0,fd.A)(n,r.A.t("shared.star_ratings.your_rating_was_not_saved")))),t)),onDownvote:n=>e((0,Xl.A)((()=>e((0,wd.A)(n,r.A.t("shared.star_ratings.your_rating_was_not_saved")))),t))}}))(bd);var yd=[D.DW.LOGGED_IN_SUBSCRIBER,D.DW.SUBSCRIBER_DUNNING_LOCK,D.DW.SUBSCRIBER_FULL_ACCESS];function Id(e){var t=(0,qt.A)(e);return yd.includes(t)}var Ad={fetchData:K},Sd=n(44870);const Od="_1-iE9O",Td="_24yqbQ";function Dd(e){var{author:t,authorModule:n,relatedAuthorsCrosslinks:r}=e;return t||n||0!==r.length?a.createElement("section",{className:Od},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:6,s:4},a.createElement(Ae,null)),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL})),n?a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:10,l:12},a.createElement("div",{className:Td,key:n.uuid,"data-e2e":n.type},a.createElement(R.wq,{"data-e2e":"carousel-wrap",module:n},a.createElement(R.Vw,{cell:Us.AR,documents:n.documents,page:ee})))),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL})):null,0!==r.length?a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:10,l:12},a.createElement(R.sE,{authors:r,page:ee})),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL})):null):null}Dd.defaultProps={authorModule:null,relatedAuthorsCrosslinks:[]};const Rd=(0,o.Ng)((e=>({author:e.contentItem.author,authorModule:e.compilation.modules.find((e=>e.type===Qs)),relatedAuthorsCrosslinks:e.contentItem.crosslinks.relatedAuthors})))(Dd);const kd=(0,o.Ng)((e=>({showDebug:e.user.isAdmin})),null)((function(e){var{showDebug:t}=e;return t?a.createElement(_m.Ev,null,a.createElement(_m.Hy,{xl:12},a.createElement(In,null))):null})),Cd={dividerWrapper:"_2uswlN",loadingMainSectionWrapper:"_1QoiZL",mainSectionWrapper:"_1Te4fG",preserveContentActionsListWrapper:"_2-Eni2",preserveAction:"_2SMBqL",primaryButtonContainer:"_2Qki--",secondaryButton:"_7HcDUM",secondaryButtonVariant:"_2Ddlaa",topWrapper:"_2caV33"};function Ld(e){var{hasAltFormat:t,isFullAccess:n,isUnavailable:r,primaryButton:l,secondaryButton:i}=e,s=(0,a.useRef)(null);return(0,a.useEffect)((()=>{var e=new IntersectionObserver((e=>{var[t]=e,n=new CustomEvent("mainSectionPrimaryButtonChange",{detail:{isPrimaryButtonVisible:t.isIntersecting}});window.dispatchEvent(n)}),{threshold:.5});return s.current&&e.observe(s.current),()=>{s.current&&e.unobserve(s.current)}}),[]),a.createElement("div",{className:Cd.mainSectionWrapper},r||n?a.createElement(a.Fragment,null,t?a.createElement(Fe,null):a.createElement(Fc,null),a.createElement(he.Li,{className:Cd.dividerWrapper,type:D.aG.INLINE})):a.createElement(a.Fragment,null,a.createElement("div",{className:Cd.primaryButtonContainer,ref:s},a.createElement(l,null)),a.createElement(i,{className:Cd.secondaryButton})))}function Pd(e){var{hasAltFormat:t}=e;return a.createElement(a.Fragment,null,t?a.createElement(he.O0,{className:Cd.topWrapper}):null,a.createElement(he.O0,{className:Cd.loadingMainSectionWrapper}),a.createElement("div",{className:Cd.preserveContentActionsListWrapper},a.createElement(he.O0,{className:Cd.preserveAction}),a.createElement(he.O0,{className:Cd.preserveAction}),a.createElement(he.O0,{className:Cd.preserveAction})))}function Ud(e){var{isFullAccess:t,isUnavailable:n}=e;return a.createElement("div",{className:Cd.topWrapper},n||t?a.createElement(Fc,null):a.createElement(Fe,null))}function xd(e){var{hasAltFormat:t,isFullAccess:n,isLoading:r,isUnavailable:l,primaryButton:i,secondaryButton:s}=e;return!0===r?a.createElement(Pd,{hasAltFormat:t}):a.createElement(a.Fragment,null,t?a.createElement(Ud,{isFullAccess:n,isUnavailable:l}):null,a.createElement(Ld,{hasAltFormat:t,isFullAccess:n,isUnavailable:l,primaryButton:i,secondaryButton:s}),a.createElement("div",{className:Cd.preserveContentActionsListWrapper},a.createElement(hs,null)))}Ld.defaultProps={primaryButton:null},xd.defaultProps={primaryButton:null};var{EXPIRING:Bd,FULL_ACCESS:Md,GEO_RESTRICTED:Fd,NOT_AVAILABLE:Wd}=D.XQ;const Gd=(0,o.Ng)((e=>{var{documentRestriction:t}=e.contentItem,n=X(e),a=(0,qt.A)(e);return{hasAltFormat:!!n,isFullAccess:t===Md,isLoading:a===D.DW.LOADING,isUnavailable:[Bd,Fd,Wd].some((e=>t===e))}}))(xd);var jd=n(66209),Hd=n(86717),Vd=n(17230);const zd={wrapper:"_3Ecpzu",voteLabel:"_3e90jD"};function Qd(e){var{handleOnVote:t,label:n,icon:r,voteCount:l}=e;return a.createElement("div",{className:zd.wrapper},a.createElement(Vd.QW,{type:Vd.lP.BUTTON,onClick:t,"aria-label":n,buttonStyle:D._C.MONOTONE_BLACK},r),a.createElement("span",{className:zd.voteLabel},l))}const Xd="_3VNLw3",Kd="_1fwn5Z",qd="dTTVzp",Yd="_2RP83p";var Jd=n(48799);const Zd=(0,o.Ng)((e=>{var t,n,{isLoggedIn:a}=e.user,r=null===(t=e.reviews)||void 0===t?void 0:t.reviewsSummaryVote,{downvotes:l,upvotes:i,word_document_id:s}=(null===(n=e.reviews)||void 0===n?void 0:n.reviewsSummary)||{};return{documentId:s,downvotes:l,isDownvote:-1===r,isLoggedIn:a,isUpvote:1===r,upvotes:i}}),(e=>({handleRemovevote:t=>e((0,Jd.A)(t,0)),handleUpvote:t=>e((0,Jd.A)(t,1)),handleDownvote:t=>e((0,Jd.A)(t,-1))})))((function(e){var{documentId:t,downvotes:n,handleDownvote:l,handleRemovevote:i,handleUpvote:s,isDownvote:o,isLoggedIn:c,isUpvote:u,upvotes:m}=e,d=o?a.createElement(Hd.laV,{alt:""}):a.createElement(Hd.cFr,{alt:""}),p=u?a.createElement(Hd.kvT,{alt:""}):a.createElement(Hd.BaC,{alt:""});return c?a.createElement("div",{className:Xd},a.createElement("span",{className:Kd},r.A.t("content_preview.reviews.helpful")),a.createElement("div",{className:qd},a.createElement(Qd,{handleOnVote:()=>{u?i(t):s(t)},icon:p,label:r.A.t("content_preview.reviews.ai_review_summary.upvote_label"),voteCount:m}),a.createElement(Qd,{handleOnVote:()=>{o?i(t):l(t)},icon:d,label:r.A.t("content_preview.reviews.ai_review_summary.downvote_label"),voteCount:n}))):m>0&&a.createElement("p",{className:Yd},r.A.t("content_preview.reviews.helpful_count",{count:m}))})),$d={wrapper:"_3cOSOc",line:"_27lkjj",hideLine:"_1pNsfj",heading:"_2yDKKh",tagWrapper:"q9nxZJ",description:"_3nrwEI",readMore:"_2muVfI"};function ep(e){var{reviewsSummaryText:t}=e,n=window.innerWidth<D.LO.DS2[D.F0.S];return a.createElement("div",{"data-e2e":"ai-review-summary",className:$d.wrapper},a.createElement("span",{className:$d.line,"aria-hidden":"true"}),a.createElement("div",null,a.createElement("h3",{className:$d.heading},r.A.t("content_preview.reviews.ai_review_summary.title.what_our_readers_think")),a.createElement("div",{className:$d.tagWrapper},a.createElement(jd.j,{"data-e2e":"ai-enhanced-tag",heading:r.A.t("content_preview.reviews.ai_review_summary.ai_enhanced_tag_text"),headingLeftIcon:Hd.yd2,onClick:()=>{(0,c.sx)("content_preview:ratings:ai_review_summary:ai_enhanced_tag:click")},statusBadgeText:r.A.t("content_preview.reviews.ai_review_summary.ai_enhanced_tag_text")},r.A.t("content_preview.reviews.ai_review_summary.ai_enhanced_tag_tooltip"))),a.createElement(oe.LA,{buttonText:r.A.t("shared.common.read_more"),dataE2E:"content-preview-ai-description",text:t,maxLines:n?12:5,expandButtonClassName:$d.readMore,className:$d.description}),a.createElement(Zd,null)))}var tp=[1,2,3,4,5],np=e=>r.A.t("content_preview.reviews.stars",{count:e}),ap=(e,t,n,a)=>e||(n?r.A.t("shared.common.saved"):t?r.A.t("content_preview.reviews.tap_to_edit"):0===a?r.A.t("content_preview.reviews.tap_to_rate"):null);const rp={wrapper:"_3KcL3G",clearRating:"x0V8Rt",error:"Go6pa5",feedback:"_26IQU8"};function lp(e){var{errorMessage:t,handleClearRatingClick:n,inEditMode:l,informRatingSaved:i,rating:s}=e,o=ap(t,l,i,s),c=Boolean(t),u=s>0&&!l&&!i;return a.createElement("div",{className:rp.wrapper},u?a.createElement(Le.QW,{className:rp.clearRating,onClick:n},r.A.t("shared.star_ratings.clear_rating")):null,a.createElement("span",{className:cn()(rp.feedback,{[rp.error]:c})},o))}lp.defaultProps={errorMessage:null,inEditMode:!1,informRatingSaved:!1};const ip={wrapper:"_1SfVIh",ratingButton:"_100JjY"};function sp(e){var{handleBlur:t,handleClick:n,hoveredValue:r,selectedStar:l,updateHoveredValue:i}=e;return a.createElement("div",{className:ip.wrapper},tp.map((e=>{var s=e<=l,o=e===l,c=e<=r,u=0!==l&&c;return a.createElement("span",{key:"star_".concat(e),className:ip.ratingButton,onBlur:t,onMouseLeave:t},a.createElement(Ei,{handleClick:n,shouldShowHoveredState:c,shouldShowSelectedText:o,shouldShowSelectedHoveredState:u,shouldShowFilledStar:s,tooltipText:np(e),updateHoveredValue:i,value:e}))})))}sp.defaultProps={hoveredValue:0,selectedStar:0};const op="_3DO8BK",cp="_2QpLvS";var up=e=>{var{informRatingSaved:t,rating:n}=e;return t?a.createElement(oe.s6,null,a.createElement("span",{role:"status","aria-live":"polite","aria-atomic":"true"},r.A.t("shared.star_ratings.user_rating_star_rating_saved",{userRating:n}))):null};function mp(e){var{errorMessage:t,inEditMode:n,rate:l,rating:i}=e,[s,o]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),m=i>0&&!n&&!c;return a.createElement("div",{"data-e2e":"star-ratings"},a.createElement("h3",{className:op},r.A.t("content_preview.reviews.what_did_you_think")),a.createElement("div",{className:cp},a.createElement(sp,{handleBlur:()=>{o(0)},handleClick:e=>{e.preventDefault();var t=Number(e.currentTarget.value);i!==t&&(u(!0),setTimeout((()=>{u(!1)}),1e3),l(t))},hoveredValue:s,selectedStar:i,updateHoveredValue:e=>{o(e)}}),a.createElement(lp,{handleClearRatingClick:e=>{e.preventDefault(),l(0)},errorMessage:t,inEditMode:n,informRatingSaved:c,isClearable:m,rating:i}),a.createElement(up,{informRatingSaved:c,rating:i})))}mp.defaultProps={errorMessage:null,inEditMode:!1,rating:0};var dp=1e4,pp="rating",Ep=10,vp="review-text",_p={[pp]:[],[vp]:[]},hp={MORE_WORDS_NEEDED:e=>({input:vp,get message(){return r.A.t("content_preview.reviews.words_needed",{count:e})}}),MAX_TEXT_LENGTH:{input:vp,get message(){return r.A.t("content_preview.reviews.maximum_length")}},RATING_REQUIRED:{input:pp,get message(){return r.A.t("content_preview.reviews.rating_required")}},RATING_REQUEST_ERROR:{input:pp,get message(){return r.A.t("shared.star_ratings.your_rating_was_not_saved")}}};const gp="r_ioyI";const bp=e=>{var{errors:t,inEditMode:n,onRate:r,rating:l}=e,i=(0,a.useRef)(),s=t[pp].length>0?t[pp][0].message:null;return(0,a.useEffect)((()=>{s&&i.current.focus()}),[s]),(0,a.useEffect)((()=>{n&&i.current.focus()}),[n]),a.createElement("div",{ref:i,tabIndex:"0","data-testid":"ratings"},a.createElement("div",{className:gp},a.createElement(mp,{errorMessage:s,inEditMode:n,rate:r,rating:l})))},fp="ufrNvm";const wp=e=>{var{contentType:t,errors:n,isEditing:l,isLoading:i,isLoggedIn:s,oauthSignupUrl:o,openSignUp:u,reviewText:m,setReviewText:d,setIsEditing:p}=e,[E,v]=(0,a.useState)(!1),_=(0,a.useRef)();(0,a.useEffect)((()=>{n[vp].length>0&&v(!0)}),[n[vp].length]),(0,a.useEffect)((()=>{E&&0===n[pp].length&&_.current.focus()}),[E]);return a.createElement(a.Fragment,null,a.createElement(he.TM,{"aria-describedby":vp,className:fp,disabled:i,hasError:!n,helperText:r.A.t("content_preview.reviews.minimum_length_shortened"),label:r.A.t("shared.common.write_review"),maxLength:dp,name:vp,nodeRef:_,placeholder:r.A.t("content_preview.reviews.reviews_text_area_placeholder",{content_type:t}),value:m,onKeyDown:e=>{if(l||e.which===c.RP.tab)return null;s?p(!0):(new c.ZZ).inTest()?(0,c.V2)(o):u()},onChange:e=>{d(e.target.value)}}),n[vp].length>0?a.createElement(he.dz,{message:n[vp][0].message}):null)},Np={buttons:"K7fop9",button:"_1nO9zX",filled:"_2HSoJ7"};function yp(e){var{canSubmit:t,handleClick:n,isLoading:l,onHide:i,resetState:s,inEditMode:o}=e;if(!1===t)return null;return a.createElement("div",{className:Np.buttons},a.createElement(Le.QW,{className:Np.button,disabled:l,onClick:()=>{o?i():s()}},r.A.t("shared.common.cancel")),a.createElement(he.jn,{className:cn()([Np.button,Np.filled],{loading:l}),disabled:l,loading:l,onClick:n},r.A.t("content_preview.reviews.post")))}function Ip(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ap(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sp=e=>(t,n)=>{(0,c.sx)("ratings:rating:update",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ip(Object(n),!0).forEach((function(t){Ap(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ip(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({word_document_id:e,rating:n},t))},Op=(e,t,n)=>a=>{(0,c.sx)("ratings:review:".concat(a),{word_document_id:e,review_id:t,review_word_count:n})};function Tp(e){return e.trim().length?e.trim().split(/\s+/).length:0}function Dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(n),!0).forEach((function(t){kp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cp(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}function Lp(){var[e,t]=(0,a.useState)(!1),n=function(){var e,n=(e=function*(e,n,a){t(!0);try{yield n({documentId:e.documentId,text:e.reviewText,reviewId:e.userReviewId}),a()}finally{t(!1)}},function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function i(e){Cp(l,a,r,i,s,"next",e)}function s(e){Cp(l,a,r,i,s,"throw",e)}i(void 0)}))});return function(e,t,a){return n.apply(this,arguments)}}();return{handleSubmit:n,isLoading:e}}const Pp="_1UAXoB";function Up(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}function xp(e){var{contentItem:t,isLoggedIn:n,onHide:r,oauthSignupUrl:l,onRate:i,onSubmit:s,openSignUp:o,ratingRequestPending:c,showForm:u,userRating:m,userReview:d}=e;if(!1===u)return null;var[p,E]=(0,a.useState)(!1),[v,_]=(0,a.useState)(d.reviewText),{clearAllErrors:h,clearRatingErrors:g,errors:b,handleRatingRequestFailure:f,isFormValid:w}=function(){var[e,t]=(0,a.useState)(Rp({},_p));return{clearAllErrors:()=>{t(Rp({},_p))},clearRatingErrors:()=>{t(Rp(Rp({},e),{},{[pp]:[]}))},errors:e,handleRatingRequestFailure:()=>{t(Rp(Rp({},e),{},{[pp]:[hp.RATING_REQUEST_ERROR]}))},isFormValid:e=>{var{userRating:n,reviewText:a,wordCount:r}=e,l={[pp]:[],[vp]:[]},i=Ep-r;return 0===n&&l[pp].push(hp.RATING_REQUIRED),i>0?l[vp].push(hp.MORE_WORDS_NEEDED(i)):a.length>=dp&&l[vp].push(hp.MAX_TEXT_LENGTH),t(l),0===l[pp].length&&0===l[vp].length}}}(),{handleSubmit:N,isLoading:y}=Lp(),I={documentId:t.id,reviewText:v,userRating:m,userReviewId:d.id,wordCount:Tp(v)},{trackRating:A,trackReview:S}=(e=>{var{documentId:t,userReviewId:n,wordCount:a}=e;return{trackRating:Sp(t),trackReview:Op(t,n,a)}})(I),O=Boolean(I.userReviewId),T=function(){var e,t=(e=function*(e){if(!c){g(),A({location:"reviews",page:ee},e);try{yield i(I.documentId,e)}catch(t){f()}}},function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function i(e){Up(l,a,r,i,s,"next",e)}function s(e){Up(l,a,r,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return a.createElement("form",{className:Pp},a.createElement(bp,{errors:b,inEditMode:O,onRate:T,rating:m}),a.createElement(wp,{contentType:t.contentType,errors:b,isEditing:p,isLoading:y,isLoggedIn:n,oauthSignupUrl:l,openSignUp:o,reviewText:v.replace(/<br>/gm,"\n"),setIsEditing:E,setReviewText:_}),a.createElement(yp,{canSubmit:p||O,handleClick:()=>{w(I)&&(N(I,s,r),S(O?"updated":"added"))},inEditMode:O,isLoading:y,onHide:r,resetState:()=>{E(!1),_(d.reviewText||""),h()}}))}function Bp(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}xp.defaultProps={userReview:{id:null,reviewText:""}};var Mp={trackingData:{page:ee,loc:"star_ratings"},userAction:D.kf.USER_ACTIONS.RATE};const Fp=(0,o.Ng)((e=>{var{contentItem:t,ratings:n,reviews:a,user:r}=e,{currentUserReviewId:l}=t,{routes:i}=e.static,s={contentItem:t,isLoggedIn:r.isLoggedIn,oauthSignupUrl:i.oauthSignupUrl,ratingRequestPending:Boolean(n[t.id].xhrPending),userRating:n[t.id].userRating};return l&&a.data[l]&&(s.userReview={id:l,reviewText:a.data[l].reviewText}),s}),(e=>({openSignUp:()=>e((0,ni.A)({trackingData:{page:ee,loc:"write_review"},userAction:D.kf.USER_ACTIONS.REVIEW})),onRate:(t,n)=>new Promise(((a,r)=>{var l=()=>a(),i=()=>r(new Error(hp.RATING_REQUEST_ERROR.message));return e((0,Xl.A)((()=>e((0,Ao.A)(t,n,null,l,i))),Mp))})),onSubmit:function(){var t,n=(t=function*(t){var{documentId:n,reviewId:a,text:l}=t;200===(a?yield e((0,So.A)(n,a,l)):yield e((0,Oo.A)(n,l))).statusCode&&e((0,k.A)({autoDismiss:!0,type:D.Jr.NOTICE,content:r.A.t("content_preview.reviews.rating_and_review_posted"),showIcon:!1}))},function(){var e=this,n=arguments;return new Promise((function(a,r){var l=t.apply(e,n);function i(e){Bp(l,a,r,i,s,"next",e)}function s(e){Bp(l,a,r,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()})))(xp),Wp={wrapper:"_1OJ7DA",dotDiv:"_3ksXBZ",heading:"_2Efa7A",noRatings:"Zz6Ga6",stats:"_27RXH3"};function Gp(e){var{averageRating:t,ratingCount:n,reviewCount:l,title:i}=e;return a.createElement("div",{className:Wp.wrapper},a.createElement("h3",{className:Wp.heading},r.A.t("content_preview.reviews.reviews_for_title",{title:i})),a.createElement(he.ZK,{"data-e2e":"stars",labelClassName:0===n?Wp.noRatings:"",rating:t,style:D.un.INLINE_JUMBO_TEXT_NON_RESPONSIVE,totalRatings:n}),a.createElement("p",{className:Wp.stats},a.createElement("span",null,n.toLocaleString(r.A.language)," ",r.A.t("shared.star_ratings.ratings",{count:n})),a.createElement(Pe.pBB,{className:Wp.dotDiv}),a.createElement("span",null,r.A.t("content_preview.reviews.reviews",{count:l}))))}Gp.defaultProp={ratingCount:0,reviewCount:0};const jp="_1Mzk58",Hp="Cu0MwH",Vp="_2P-kYV";const zp=(0,o.Ng)(xo,Bo)((function(e){var{documentId:t,id:n,isAdmin:l,isCurrentUserReview:i,isLoggedIn:s,onEditReview:o,openConfirmDeleteReviewModal:c}=e;return!1===s||!1===i&&!1===l?null:!0===i?a.createElement("div",{className:jp},a.createElement(Le.QW,{className:Vp,leftIcon:Pe.ffu,onClick:o},r.A.t("content_preview.reviews.edit")),a.createElement(Le.QW,{className:Hp,leftIcon:Pe.n$P,onClick:()=>c(n,t)},r.A.t("content_preview.reviews.delete"))):a.createElement("div",{className:jp},a.createElement(Le.QW,{className:Hp,leftIcon:Pe.n$P,onClick:()=>c(n,t)},r.A.t("content_preview.reviews.delete_admin")))})),Qp="_2EE9VL";const Xp=(0,o.Ng)(Qo,Xo)((function(e){var{documentId:t,downvotes:n,upvotes:l,handleDownvote:i,handleRemoveVote:s,handleUpvote:o,isDownvote:c,isUpvote:u}=e,m=null;return!0===u?m=0:!0===c&&(m=1),a.createElement(a.Fragment,null,a.createElement("span",{className:Qp},r.A.t("content_preview.reviews.helpful")),a.createElement(oe.To,{downvotes:n,upvotes:l,handleDownvote:()=>i(t),handleRemoveVote:()=>s(t),handleUpvote:()=>o(t),userVote:m,style:D.i_.INLINE_TEXT}))})),Kp={wrapper:"_34eOby",author:"_1dO1aT",description:"_2DyfOl",helpful:"_1EtJvW",rating:"_1QPUhI",readMore:"_28u4VV",review:"_3szpFc",userRating:"Ui3EaT",vote:"_1Eu6qW"};function qp(e){var{author:t,currentUserReview:n,currentUserVote:l,downvotes:i,id:s,isLoggedIn:o,onEditReview:c,rating:u,reviewText:m,upvotes:d}=e,p=(!1===o||!0===n)&&d>0,E=!0===o&&!1===n;return a.createElement("div",{"data-e2e":"content-preview-review",className:Kp.wrapper},a.createElement("div",{className:Kp.userRating},a.createElement("div",{"aria-hidden":!0,className:Kp.author,"data-testid":"author"},t),a.createElement("div",{className:Kp.rating},a.createElement(he.ZK,{rating:u,style:D.un.INLINE_TEXT_NON_RESPONSIVE})),a.createElement(he.s8,{atAndBelow:!0,size:D.F0.S},a.createElement(zp,{id:s,onEditReview:c}))),a.createElement("div",{className:Kp.review},a.createElement(oe.LA,{buttonText:r.A.t("shared.common.read_more"),expandButtonClassName:Kp.readMore,containsHTML:!0,maxLines:5,text:m,className:Kp.description}),!1===p?null:a.createElement("p",{className:Kp.helpful},r.A.t("book_preview.reviews.helpful_count",{count:d})),!1===E?null:a.createElement("div",{className:Kp.vote},a.createElement(Xp,{currentUserVote:l,reviewId:s,upvotes:d,downvotes:i})),a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement(zp,{id:s,onEditReview:c}))))}const Yp="PyLvER",Jp="_1zXKlo",Zp="_2wghY1",$p="_3l_fF_";function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eE.apply(this,arguments)}qp.defualtProps={brand:null};const tE=(0,o.Ng)(vc,_c)((function(e){var{brand:t,documentId:n,isEditing:l,isLoggedIn:i,reviewCount:s,reviews:o,onEditReview:c,onFetchReviews:u}=e,[m,d]=(0,a.useState)(!1),[p,E]=(0,a.useState)(!1),[v,_]=(0,a.useState)(2);(0,a.useEffect)((()=>{if(s&&0!==s){var e=l?o.length+1:o.length;E(e<s)}else E(!1)}),[o,s]);var h=t===D.rI.EVERAND?Pt.TH.MONOTONE_BLACK:Pt.TH.DEFAULT;return a.createElement(a.Fragment,null,a.createElement("ul",{className:$p},o.map((e=>a.createElement("li",{key:e.id},!0===e.currentUserReview?a.createElement(he.Li,{className:Zp}):null,a.createElement(qp,eE({onEditReview:c},e,{isLoggedIn:i})),a.createElement(he.Li,{className:Zp}))))),a.createElement("div",{className:Jp},!1===p?null:a.createElement(Pt.tA,{className:Yp,buttonStyle:h,size:Pt.BN.LARGE,disabled:m,onClick:()=>{d(!0),u(n,v).then((()=>{_(v+1)})).finally((()=>{d(!1)}))}},r.A.t("shared.common.show_more"))))}));function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nE.apply(this,arguments)}const aE=(0,o.Ng)((e=>{var t,n,a;return{criticReviews:e.contentItem.criticReviews,currentUserReviewId:e.contentItem.currentUserReviewId,isReviewsSummaryAvailable:!(null===(t=e.reviews)||void 0===t||!t.reviewsSummary),ratings:e.ratings[e.contentItem.id],reviewCount:e.reviews.reviewCount,reviewsSummaryText:null===(n=e.reviews)||void 0===n||null===(a=n.reviewsSummary)||void 0===a?void 0:a.reviews_summary_text,reviewsSummaryEnabled:e.reviews.reviewsSummaryEnabled,shortTitle:e.contentItem.shortTitle}}))((function(e){var{currentUserReviewId:t,isReviewsSummaryAvailable:n,ratings:r,reviewCount:l,reviewsSummaryText:i,reviewsSummaryEnabled:s,shortTitle:o}=e,c=!!t,[u,m]=(0,a.useState)(c),d=!c||u;return a.createElement("section",{"data-e2e":"reviews","data-testid":"content-preview-reviews"},a.createElement(Gp,nE({title:o,reviewCount:l},r)),s&&n?a.createElement(ep,{reviewsSummaryText:i}):null,a.createElement(Fp,{showForm:d,onHide:()=>m(!1)}),a.createElement(tE,{isEditing:u,onEditReview:()=>m(!0)}))}));var rE=(0,z.Mz)([e=>e.contentItem,e=>e.compilation.modules],((e,t)=>{var n,a=!1;return t.forEach((e=>{e.type===zs?n=e:e.type===Xs&&(a=!0)})),{authorSpotlightModule:n,contentItem:e,hasSeriesModule:a,isLoading:0===t.length}}));function lE(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}const iE=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=(0,a.useState)(!1),l=(0,o.wA)(),{search:i}=(0,ne.zy)(),{id:s}=(0,o.d4)((e=>e.contentItem)),{isLoggedIn:c}=(0,o.d4)((e=>e.user)),{saved:u}=(0,o.d4)((e=>e.savedDocuments)),m=Z(i).has("action=save-for-later")&&e,d=t&&c&&void 0!==u[s],{handleSave:p}=(0,Ut.A)({documentId:s,isSaved:!1,page:ee});return(0,a.useEffect)((()=>{function e(){var t;return t=function*(){m&&(yield p(),n(!0))},e=function(){var e=this,n=arguments;return new Promise((function(a,r){var l=t.apply(e,n);function i(e){lE(l,a,r,i,s,"next",e)}function s(e){lE(l,a,r,i,s,"throw",e)}i(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m]),(0,a.useEffect)((()=>{d&&l((0,k.A)({type:D.Jr.NOTICE,content:r.A.t("content_preview.saved_for_later")}))}),[d]),null};var sE=n(36764),oE=n(4551),cE=n(85943);function uE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uE(Object(n),!0).forEach((function(t){dE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pE=e=>{var t=(0,o.d4)((e=>e.contentItem)),n=(0,o.d4)((e=>e.documents[t.id])),l=(0,o.d4)((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.currentPlan})),i=(0,o.wA)(),{search:s}=(0,ne.zy)(),c=Z(s).has("unlock_after_upgrade=true")&&e&&!t.isUnlocked,u=()=>{i((0,sE.A)())},m=()=>{(0,o.vA)((()=>{i((0,sE.A)()),i((0,k.A)({type:D.Jr.SUCCESS,content:r.A.t("shared.plans.youve_unlocked_this_title")})),i(V()),i((0,oE.A)((null===l||void 0===l?void 0:l.availableUnlocks)-1)),n&&i((0,Yt.A)(mE(mE({},n),{},{isUnlocked:!0})))}))},d=()=>{(0,o.vA)((()=>{i((0,sE.A)()),i((0,k.A)({type:D.Jr.ERROR,content:r.A.t("shared.errors.something_went_wrong")}))}))};return(0,a.useEffect)((()=>{l&&[D.oT.PLUS,D.oT.PLUS_V2,D.oT.STANDARD_V2].includes(l.type)&&l.availableUnlocks>0&&c&&i((0,cE.A)({availableUnlocks:l.availableUnlocks,documentId:t.id,closeModal:u,onError:d,onSuccess:m,renewalDate:J(l.unlocksRenewal.date),renewalAmount:l.unlocksRenewal.amount}))}),[c]),null},EE="EsHFhp",vE="_1JpSqB",_E="o-g8Mo",hE="_2g-oQ2",gE="M5TClN",bE="_3dYfQR",fE="_16Bli0",wE="_1n3oa6",NE="_2AL58A",yE="kbhQDd",IE="nu1g0Z",AE="_3A8y3P",SE="_2ML9ZC",OE="_3wnHx7",TE="_4dZ_1e",DE="_27R4Ux",RE="_1U0rcv",kE="ptFCfJ";function CE(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}var LE=e=>{var{aiAssistantExperience:t,author:n,categories:l,contentItemId:i,fetchData:s,inPlansV2:o,isSubscriber:c,match:u,pageWidth:m,plansEnabled:d,relatedCategories:p,themes:E,tropes:v}=e,[_,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),f=(0,a.useRef)(),w=(0,a.useRef)();iE(_),pE(_),(0,a.useEffect)((()=>{function e(){var t;return t=function*(){yield s(u.url),h(!0)},e=function(){var e=this,n=arguments;return new Promise((function(a,r){var l=t.apply(e,n);function i(e){CE(l,a,r,i,s,"next",e)}function s(e){CE(l,a,r,i,s,"throw",e)}i(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u.url]),(0,a.useEffect)((()=>{if((0,Sd.o)(i,"search:module_item:click","/search",_a),window){var e=e=>{var t;b(null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.isPrimaryButtonVisible)};return window.addEventListener("mainSectionPrimaryButtonChange",e),()=>{window.removeEventListener("mainSectionPrimaryButtonChange",e)}}}),[]);var N=m<=D.LO.DS2[D.F0.S]&&!c;return a.createElement("section",{className:NE},a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement("div",{className:DE},a.createElement(md,null))),a.createElement(_m.Ev,null,a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:6,l:7,m:5,s:4},a.createElement(ct,null),a.createElement(hn,{"data-e2e":"desktop-content-title"}),a.createElement(Lt,{"data-e2e":"desktop-byline"}),a.createElement(Ls,{onClick:()=>te(w)}),a.createElement("div",{className:OE},a.createElement(he.s8,{atAndBelow:!0,size:D.F0.S},a.createElement(Fc,{"data-e2e":"desktop-content-availability"})),d?a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement(pd,null)):null),a.createElement(he.s8,{above:!0,size:D.F0.S},d?a.createElement("div",{className:vE},a.createElement(en,{wrapperClassName:_E,inPlansV2:o})):a.createElement(Gd,{primaryButton:ai,secondaryButton:ki}),a.createElement(he.Li,{type:D.aG.INLINE})),E.length>0||v.length>0?a.createElement("div",{className:kE},a.createElement(Us.CO,{tropes:v,themes:E})):null,a.createElement(kn,{maxLines:14}),a.createElement(Un,null),a.createElement("div",{className:wE},a.createElement(Kt,{categories:l})),a.createElement(tl,null),a.createElement(he.s8,{below:!0,size:D.F0.M},c?a.createElement(he.Li,{className:yE,type:D.aG.INLINE}):null,a.createElement(nt,null))),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.L}),_?a.createElement(_m.Hy,{xl:3,l:4,m:3,hideBelow:D.F0.M},a.createElement("div",{className:RE},a.createElement("div",{className:TE},a.createElement(md,{isDesktopWidth:!0})),d?a.createElement("div",{className:vE},a.createElement(en,{wrapperClassName:_E,inPlansV2:o})):a.createElement("div",{className:_E},a.createElement(ai,{isDesktopWidth:!0}),a.createElement(ki,null)),a.createElement(hs,{isDesktopWidth:!0}))):a.createElement(_m.Hy,{xl:3,l:4,m:3,hideBelow:D.F0.M},a.createElement("div",{className:RE},a.createElement("div",{className:TE},a.createElement(md,{isDesktopWidth:!0}))),a.createElement("div",{className:fE},a.createElement(he.O0,{className:cn()(hE,gE)}),a.createElement(he.O0,{className:cn()(hE,bE)})))),a.createElement(he.Li,{type:D.aG.SECTION}),void 0!==n.name?a.createElement(oe.tH,null,a.createElement("div",{className:SE,ref:f}),a.createElement(re.A,{whenVisible:!0},a.createElement(Rd,null)),a.createElement(he.Li,{type:D.aG.SECTION})):null,a.createElement(oe.tH,null,a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:10,l:12},a.createElement(kd,null),a.createElement(so,null),a.createElement(Kt,{categories:p,header:r.A.t("shared.common.related_categories")})),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL})))),a.createElement(he.Li,{type:D.aG.SECTION}),a.createElement(oe.tH,null,a.createElement("div",{className:AE,ref:w,id:"reviews"}),a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:2,l:1,hideBelow:D.F0.L}),a.createElement(_m.Hy,{xl:8,l:10,m:8,s:4},a.createElement(aE,null),a.createElement(Et,{"data-e2e":"breadcrumbs",className:EE,wrapCrumbs:!0}))))),t?null:a.createElement(Il,{backToTopTargetRef:f,isSubscriber:c}),c&&!d||!g&&N?a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement(El,{className:cn()({[IE]:N})},a.createElement(ai,null))):null))};LE.defaultProps={categories:[],relatedCategories:[],themes:[],tropes:[]};const PE=a.memo(LE),UE=(0,o.Ng)((e=>{var t,n,a,r,l,i,s,o,c;return{aiAssistantExperience:null===(t=e.nwayTests.ai_assistant_experience)||void 0===t?void 0:t.value,author:e.contentItem.author,categories:e.contentItem.crosslinks.categories,contentItemId:e.contentItem.id,inPlansV2:null!==(n=null===(a=e.personalization)||void 0===a||null===(r=a.featureFlags)||void 0===r?void 0:r.inPlansV2)&&void 0!==n&&n,isSubscriber:Id(e),pageWidth:e.viewport.width,plansEnabled:null!==(l=null===(i=e.personalization)||void 0===i||null===(s=i.featureFlags)||void 0===s?void 0:s.plansEnabled)&&void 0!==l&&l,relatedCategories:e.contentItem.crosslinks.relatedCategories,themes:null!==(o=e.contentItem.themes)&&void 0!==o?o:[],tropes:null!==(c=e.contentItem.tropes)&&void 0!==c?c:[]}}),Ad)(PE);var xE=n(97331),BE=n.n(xE),ME=e=>Math.ceil(e.scrollHeight/e.offsetHeight);const FE="ZaXmqY",WE="_3kqVPj",GE="_1dE5gK",jE="_1cDbju",HE="_37FhhX",VE="_1m2YOM",zE="_2UnNyS",QE="_1uXFzD",XE="yWHs7V";const KE=(0,o.Ng)((e=>({authorName:e.contentItem.contributors[0].name,documentId:e.contentItem.id,documentType:e.contentItem.contentType,pageWidth:e.viewport.width,shortTitle:e.contentItem.shortTitle,shouldShowPreview:e.contentItem.shouldShowPreview,subscribeUrl:e.static.routes.subscribeUrl})),(e=>({openSignUp:(t,n)=>e((0,ni.A)({documentType:t,subscribeUrl:n,trackingData:{page:"content_preview",loc:"end_of_preview_sign_up_link"}}))})))((function(e){var{authorName:t,documentId:n,documentType:l,openSignUp:i,pageWidth:s,shortTitle:o,subscribeUrl:u}=e,m=(0,a.useRef)(),[d,p]=(0,a.useState)(1),[E,v]=(0,a.useState)(1),_=()=>{v(ME(m.current)),p((e=>{var{offsetHeight:t,scrollHeight:n,scrollTop:a}=e;return Math.ceil(a+t)>=n?ME(e):Math.ceil((a+1)/t)})(m.current))},h=((e,t,n)=>{var r=(0,a.useRef)(null),l=(0,a.useCallback)(BE()((()=>{var{scrollTop:a}=e.current,l=a>r.current?D.jI.DOWN:D.jI.UP;(0,c.sx)("preview_reader:scroll_dir:update",{doc_id:n,scroll_dir:l}),r.current=a,t()}),100),[]);return(0,a.useEffect)((()=>(r.current=e.current.scrollTop,()=>l.cancel())),[]),l})(m,_,n);return(0,a.useEffect)(_,[s]),a.createElement("div",null,a.createElement("h2",{className:HE,"data-e2e":"preview-heading"},r.A.t("content_preview.book_preview.book_preview")),a.createElement("div",{className:FE},a.createElement("h3",{className:XE},o," - ",t),a.createElement("div",{className:VE},a.createElement("div",{className:zE,ref:m,onScroll:h,"data-e2e":"preview","data-testid":"preview"},a.createElement("div",{className:VE},a.createElement("div",{"data-e2e":"preview-content",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:""}}),a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement("div",{className:GE},a.createElement("div",null,r.A.t("content_preview.book_preview.enjoying_the_preview")),a.createElement(Le.QW,{className:jE,onClick:()=>{(0,c.XI)(D.ej.CONTENT_PREVIEW_PREVIEW_SIGN_UP),(0,c.sx)("content_preview:end_of_preview:click",(0,c.$I)()),i(l,u)}},r.A.t("content_preview.book_preview.subscribe_to_continue_reading")))))),a.createElement(he.s8,{atAndBelow:!0,size:D.F0.S,classes:WE},a.createElement(Zi,{checkoutEntryPointButtonName:D.ej.CONTENT_PREVIEW_PREVIEW_START_FREE,eventName:"content_preview:primary_action_cta:click"}))),a.createElement("div",{className:QE},r.A.t("shared.common.page_x_of_y",{currentPage:d,totalPages:E}))))}));function qE(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}var YE=e=>{var{aiAssistantExperience:t,author:n,categories:l,contentItemId:i,fetchData:s,inPlansV2:o,isSubscriber:c,match:u,pageWidth:m,plansEnabled:d,relatedCategories:p,shouldShowPreview:E,themes:v,tropes:_}=e,[h,g]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!1),w=(0,a.useRef)(),N=(0,a.useRef)();iE(h),pE(h),(0,a.useEffect)((()=>{function e(){var t;return t=function*(){yield s(u.url),g(!0)},e=function(){var e=this,n=arguments;return new Promise((function(a,r){var l=t.apply(e,n);function i(e){qE(l,a,r,i,s,"next",e)}function s(e){qE(l,a,r,i,s,"throw",e)}i(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u.url]),(0,a.useEffect)((()=>{if((0,Sd.o)(i,"search:module_item:click","/search",_a),window){var e=e=>{var t;f(null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.isPrimaryButtonVisible)};return window.addEventListener("mainSectionPrimaryButtonChange",e),()=>{window.removeEventListener("mainSectionPrimaryButtonChange",e)}}}),[]);var y=m<=D.LO.DS2[D.F0.S]&&!c;return a.createElement("section",{className:NE},a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement("div",{className:DE},a.createElement(md,null))),a.createElement(_m.Ev,null,a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:6,l:7,m:5,s:4},a.createElement(pt,null),a.createElement(hn,{"data-e2e":"desktop-content-title"}),a.createElement(Lt,{"data-e2e":"desktop-byline"}),a.createElement(Ls,{onClick:()=>te(N)}),a.createElement("div",{className:OE},a.createElement(he.s8,{atAndBelow:!0,size:D.F0.S},a.createElement(Fc,{"data-e2e":"desktop-content-availability"})),d?a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement(pd,null)):null),a.createElement(he.s8,{above:!0,size:D.F0.S},d?a.createElement("div",{className:vE},a.createElement(en,{wrapperClassName:_E,inPlansV2:o})):a.createElement(Gd,{primaryButton:mi,secondaryButton:Pi}),a.createElement(he.Li,{type:D.aG.INLINE})),v.length>0||_.length>0?a.createElement("div",{className:kE},a.createElement(Us.CO,{tropes:_,themes:v})):null,a.createElement(kn,{maxLines:14}),a.createElement(Un,null),a.createElement("div",{className:wE},a.createElement(Kt,{categories:l})),a.createElement(tl,null),a.createElement(he.s8,{below:!0,size:D.F0.M},c?a.createElement(he.Li,{className:yE,type:D.aG.INLINE}):null,a.createElement(nt,null))),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.L}),h?a.createElement(_m.Hy,{xl:3,l:4,m:3,hideBelow:D.F0.M},a.createElement("div",{className:RE},a.createElement("div",{className:TE},a.createElement(md,{isDesktopWidth:!0})),d?a.createElement("div",{className:vE},a.createElement(en,{wrapperClassName:_E,inPlansV2:o})):a.createElement("div",{className:_E},a.createElement(mi,{isDesktopWidth:!0}),a.createElement(Pi,{isDesktopWidth:!0})),a.createElement(hs,{isDesktopWidth:!0}))):a.createElement(_m.Hy,{xl:3,l:4,m:3,hideBelow:D.F0.M},a.createElement("div",{className:RE},a.createElement("div",{className:TE},a.createElement(md,{isDesktopWidth:!0}))),a.createElement("div",{className:fE},a.createElement(he.O0,{className:cn()(hE,gE)}),a.createElement(he.O0,{className:cn()(hE,bE)})))),a.createElement(he.Li,{type:D.aG.SECTION}),void 0!==n.name?a.createElement(oe.tH,null,a.createElement("div",{className:SE,ref:w}),a.createElement(re.A,{whenVisible:!0},a.createElement(Rd,null)),a.createElement(he.Li,{type:D.aG.SECTION})):null,a.createElement(oe.tH,null,a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:10,l:12},a.createElement(kd,null),a.createElement(so,null),a.createElement(Kt,{categories:p,header:r.A.t("shared.common.related_categories")})),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL})))),a.createElement(he.Li,{type:D.aG.SECTION}),a.createElement(oe.tH,null,a.createElement("div",{className:AE,ref:N,id:"reviews"}),a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:2,l:1,hideBelow:D.F0.L}),a.createElement(_m.Hy,{xl:8,l:10,m:8,s:4},a.createElement(aE,null))))),!0===E?a.createElement(a.Fragment,null,a.createElement(he.Li,{type:D.aG.SECTION}),a.createElement(oe.tH,null,a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:2,l:1,hideBelow:D.F0.L}),a.createElement(_m.Hy,{xl:8,l:10,m:8,s:4},a.createElement(KE,null))))):null,a.createElement(oe.tH,null,a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:2,l:1,hideBelow:D.F0.L}),a.createElement(_m.Hy,{xl:8,l:10,m:8,s:4},a.createElement(Et,{"data-e2e":"breadcrumbs",className:EE,wrapCrumbs:!0}))))),t?null:a.createElement(Il,{backToTopTargetRef:w,isSubscriber:c}),c&&!d||!b&&y?a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement(El,{className:cn()({[IE]:y})},a.createElement(mi,null))):null))};YE.defaultProps={categories:[],relatedCategories:[],shouldShowPreview:!1,themes:[],tropes:[]};const JE=a.memo(YE),ZE=(0,o.Ng)((e=>{var t,n,a,r,l,i,s,o,c;return{aiAssistantExperience:null===(t=e.nwayTests.ai_assistant_experience)||void 0===t?void 0:t.value,author:e.contentItem.author,categories:e.contentItem.crosslinks.categories,contentItemId:e.contentItem.id,inPlansV2:null!==(n=null===(a=e.personalization)||void 0===a||null===(r=a.featureFlags)||void 0===r?void 0:r.inPlansV2)&&void 0!==n&&n,isSubscriber:Id(e),pageWidth:e.viewport.width,plansEnabled:null!==(l=null===(i=e.personalization)||void 0===i||null===(s=i.featureFlags)||void 0===s?void 0:s.plansEnabled)&&void 0!==l&&l,relatedCategories:e.contentItem.crosslinks.relatedCategories,shouldShowPreview:e.contentItem.shouldShowPreview,themes:null!==(o=e.contentItem.themes)&&void 0!==o?o:[],tropes:null!==(c=e.contentItem.tropes)&&void 0!==c?c:[]}}),(e=>({fetchData:t=>e(K(t))})))(JE);var $E={fetchData:K};const ev="FzT2ww",tv="_25L_pN",nv="_2Uv6Ub",av="_1e2XM8",rv="hF46kB",lv="QF5301",iv="aE5fiw",sv="_3Dc2Nt";class ov extends a.PureComponent{componentDidMount(){this.props.fetchData(this.props.match.url),(0,Sd.o)(this.props.contentItemId,"search:module_item:click","/search",_a)}render(){var e=[ma,ca];return a.createElement(a.Fragment,null,a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_950},a.createElement(ml,null)),a.createElement("section",{className:ev},a.createElement(Et,{className:tv}),a.createElement(nn,null,a.createElement(Pr,null,a.createElement("div",{className:nv},a.createElement(id,{square:!0,rounded:!0}),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},!0===this.props.plansEnabled&&!0===this.props.isUnlimitedTitle?a.createElement("div",{className:iv},a.createElement(rt,{type:D.Uc.UNLIMITED})):null,a.createElement(sn,{"data-e2e":"mobile-content-title"}))),a.createElement(ls,null),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement(Dl,null))),a.createElement(Nc,null,a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},!0===this.props.plansEnabled&&!0===this.props.isUnlimitedTitle?a.createElement("div",{className:iv},a.createElement(rt,{type:D.Uc.UNLIMITED})):null,a.createElement(sn,{"data-e2e":"desktop-content-title"})),a.createElement("div",{className:av},a.createElement(Nd,null),a.createElement(an,null)),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550,"data-e2e":"mobile-metadata"},a.createElement(Kr,{types:e})),a.createElement(Dl,null),a.createElement(Sn,{showHeading:!0}),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_950},a.createElement(qe,null)),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550,"data-e2e":"desktop-metadata"},a.createElement(Kr,{types:e})))),a.createElement(oe.tH,null,a.createElement(Ar,null),a.createElement(re.A,{whenVisible:!0},a.createElement(ao,{isSeriesPage:!0,showTitle:!1})))))}}const cv=(0,o.Ng)((e=>{var t,n,a,r=e.contentItem,l=null!==(t=null===(n=e.personalization)||void 0===n?void 0:n.featureFlags)&&void 0!==t?t:{};return{contentItemId:r.id,isUnlimitedTitle:(null===r||void 0===r||null===(a=r.catalog)||void 0===a?void 0:a.tier)===D.Uc.UNLIMITED,plansEnabled:Boolean(l.plansEnabled)}}),$E)(ov);var uv={fetchData:K};class mv extends a.PureComponent{componentDidMount(){this.props.fetchData(this.props.match.url),(0,Sd.o)(this.props.contentItemId,"search:module_item:click","/search",_a)}render(){var e=[pa,ca],t="not_available"!==this.props.documentRestriction;return a.createElement(a.Fragment,null,a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_950},a.createElement(ml,null)),a.createElement("section",{className:ev},a.createElement(Et,{className:tv}),a.createElement(nn,null,a.createElement(Pr,null,a.createElement("div",{className:nv},a.createElement(id,{square:!0}),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},!t&&a.createElement(Nn,{"data-e2e":"mobile-content-availability"}),!0===this.props.plansEnabled&&!0===this.props.isUnlimitedTitle?a.createElement("div",{className:iv},a.createElement(rt,{type:D.Uc.UNLIMITED})):null,a.createElement(sn,{"data-e2e":"mobile-content-title"}),a.createElement(hl,{"data-e2e":"mobile-byline"}))),a.createElement("div",{className:lv,"data-e2e":"actions-wrapper"},t&&a.createElement(Yl,null),a.createElement(es,null)),a.createElement(ls,null),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement(Dl,null))),a.createElement(Nc,null,a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},!t&&a.createElement(Nn,{"data-e2e":"desktop-content-availability"}),!0===this.props.plansEnabled&&!0===this.props.isUnlimitedTitle?a.createElement("div",{className:iv},a.createElement(rt,{type:D.Uc.UNLIMITED})):null,a.createElement(sn,{"data-e2e":"desktop-content-title"}),a.createElement(hl,{"data-e2e":"desktop-byline"})),a.createElement("div",{className:av},a.createElement(Nd,null),a.createElement(an,null)),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550,"data-e2e":"mobile-metadata"},a.createElement(Kr,{types:e})),a.createElement(Dl,null),a.createElement(Sn,{showHeading:!0}),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_950},a.createElement(qe,null)),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550,"data-e2e":"desktop-metadata"},a.createElement(Kr,{types:e})))),a.createElement(oe.tH,null,a.createElement(re.A,{whenVisible:!0},a.createElement(ao,{showTitle:!1})))))}}const dv=(0,o.Ng)((e=>{var t,n,a,r=e.contentItem,l=null!==(t=null===(n=e.personalization)||void 0===n?void 0:n.featureFlags)&&void 0!==t?t:{};return{contentItemId:r.id,documentRestriction:null===r||void 0===r?void 0:r.documentRestriction,isUnlimitedTitle:(null===r||void 0===r||null===(a=r.catalog)||void 0===a?void 0:a.tier)===D.Uc.UNLIMITED,plansEnabled:Boolean(l.plansEnabled)}}),uv)(mv);var pv=n(14832);function Ev(e){var{authorSpotlightModule:t}=e;return void 0!==t?a.createElement(a.Fragment,null,a.createElement(pv.S,{"data-e2e":"author-spotlight",isAuthor:!0,subtitle:t.subtitle,title:t.title,imageUrl:t.titleUrl,retinaImageUrl:t.titleUrl,style:D.Jj.HEADER,typeText:r.A.t("explore.category.author_spotlight")}),a.createElement(_m.TW,null,a.createElement(_m.Hy,null,t.documents.length<3?null:a.createElement(R.hw,{cellMode:D.Of.DESCRIPTION,"data-e2e":"author-spotlight-carousel",documents:t.documents,module:{id:t.id,uuid:t.uuid}})))):a.createElement(Rd,null)}function vv(e){var{children:t}=e;return a.createElement(a.Fragment,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),t,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}))}const _v="_1fHsdl",hv="_2iGF6i",gv="_320cnI",bv="_24BUBC",fv="_1gnF2h",wv="_2dAmJh",Nv="_13Jkn0",yv="_2r4JN9",Iv="_1oQ8iG",Av="_23rhIQ",Sv="_20Z3Vo";function Ov(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}var Tv=[da,pa,ca];const Dv=(0,o.Ng)((e=>{var t;return{aiAssistantExperience:null===(t=e.nwayTests.ai_assistant_experience)||void 0===t?void 0:t.value,brand:e.static.config.brand,isLoggedIn:e.user.isLoggedIn}}),(e=>({fetchData:t=>e(K(t))})))((function(e){var{aiAssistantExperience:t,brand:n,fetchData:l,isLoggedIn:i}=e,[s,c]=(0,a.useState)(!1),u=(0,a.useRef)(),m=(0,a.useRef)(),d=(0,a.useRef)(),p=(0,ne.W5)(),E=n===D.rI.EVERAND&&t&&i,{authorSpotlightModule:v,contentItem:_,hasSeriesModule:h,isLoading:g}=(0,o.d4)(rE);return iE(s),(0,a.useEffect)((()=>{function e(){var t;return t=function*(){yield l(p.url),c(!0)},e=function(){var e=this,n=arguments;return new Promise((function(a,r){var l=t.apply(e,n);function i(e){Ov(l,a,r,i,s,"next",e)}function s(e){Ov(l,a,r,i,s,"throw",e)}i(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p.url]),a.createElement("div",{className:_v},a.createElement("span",{className:Nv}),a.createElement(_m.Ev,null,a.createElement(oe.tH,null,a.createElement(he.s8,{above:!0,size:D.F0.S,classes:Av},!1===h&&!1===g?a.createElement("div",{className:DE},a.createElement(md,null)):a.createElement(Rc,null)),a.createElement(_m.TW,null,a.createElement(vv,null,a.createElement(_m.Hy,{xl:6,l:7,m:5,s:4},a.createElement("div",{className:Sv},a.createElement(Ac,null),a.createElement(hn,{"data-e2e":"desktop-content-title"}),a.createElement(Lt,{"data-e2e":"desktop-byline"}),a.createElement(Ls,{onClick:()=>te(m)}),a.createElement(he.s8,{below:!0,size:D.F0.S},a.createElement(oe.hC,{"data-e2e":"status-tag",availableDate:_.availableDate,expiryDate:_.expiryDate,documentRestriction:_.documentRestriction})),a.createElement(he.s8,{above:!0,size:D.F0.S},a.createElement(oe.hC,{"data-e2e":"status-tag",availableDate:_.availableDate,expiryDate:_.expiryDate,documentRestriction:_.documentRestriction}),a.createElement(he.jn,{className:cn()(fv,{[bv]:h}),onClick:()=>te(d),size:D.F0.L},r.A.t("content_preview.view_titles_in_series")),a.createElement("div",{className:yv},a.createElement(hs,null)),a.createElement(he.Li,{type:D.aG.INLINE}))),a.createElement("div",{className:wv},a.createElement(kn,{isSeries:!0,maxLines:5})),a.createElement(tl,{types:Tv})),a.createElement(_m.Hy,{xl:1,l:1,hideBelow:D.F0.L}),a.createElement(_m.Hy,{xl:3,l:4,m:3,hideBelow:D.F0.S},a.createElement(he.s8,{below:!0,size:D.F0.S},a.createElement("div",{className:RE},!1===h&&!1===g?a.createElement("div",{className:TE},a.createElement(md,null)):a.createElement(Rc,null),a.createElement(he.jn,{className:cn()(gv,{[bv]:h}),onClick:()=>te(d),size:D.F0.L},r.A.t("content_preview.view_titles_in_series")),a.createElement(hs,{isDesktopWidth:!0}))))))),a.createElement(oe.tH,null,a.createElement("div",{className:Iv,ref:d}),a.createElement(_m.TW,null,a.createElement(vv,null,a.createElement(_m.Hy,{xl:10,l:12},a.createElement(Qt,null))))),a.createElement(he.Li,{type:D.aG.SECTION}),a.createElement(oe.tH,null,a.createElement("div",{className:SE,ref:u}),a.createElement(re.A,{whenVisible:!0},a.createElement(Ev,{authorSpotlightModule:v}))),a.createElement(he.Li,{type:D.aG.SECTION}),a.createElement(oe.tH,null,a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(vv,null,a.createElement(_m.Hy,{xl:10,l:12},a.createElement(so,{isSeriesPage:!0}),a.createElement(Kt,{categories:_.crosslinks.categories,header:r.A.t("shared.common.related_categories")})))))),a.createElement(he.Li,{type:D.aG.SECTION}),a.createElement(oe.tH,null,a.createElement("div",{className:Iv,ref:m,id:"reviews"}),a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:2,l:1,hideBelow:D.F0.L}),a.createElement(_m.Hy,{xl:8,l:10,m:8,s:4},a.createElement(aE,null),a.createElement(Et,{"data-e2e":"breadcrumbs",className:hv,wrapCrumbs:!0}))))),t?null:a.createElement(Il,{backToTopTargetRef:u,isSeries:!0}),E&&a.createElement(le.eM,null)))}));const Rv="_372zRk";function kv(e){var{chapterId:t,shortTitle:n,tableOfContents:l}=e;if(t){var i=l.findIndex((e=>e.id===t))+1,s=l.length;return a.createElement(a.Fragment,null,a.createElement("p",{className:Rv},r.A.t("content_preview.sheet_music.song_x_of_n",{number_x:i,number_n:s,book_title:n})),a.createElement(Sn,null))}return a.createElement(Sn,null)}kv.defaultProps={chapterId:null};const Cv=(0,o.Ng)((e=>({chapterId:e.contentItem.chapterId,shortTitle:e.contentItem.shortTitle,tableOfContents:e.contentItem.tableOfContents})))(kv),Lv="goFucS",Pv="Ag7Ql7",Uv="_1ue2Pp",xv="Gdk8lw",Bv="h04xnz",Mv="_2sApC4";const Fv=(0,o.Ng)((e=>({items:e.contentItem.tableOfContents,chapterId:e.contentItem.chapterId})))((function(e){var{items:t,chapterId:n}=e,[l,i]=(0,a.useState)(t.length>6);if(!t.length)return null;var s=n?r.A.t("content_preview.sheet_music.more_songs"):r.A.t("content_preview.table_of_contents"),o=l?t.slice(0,6):t;return a.createElement("div",null,a.createElement("h3",{className:Lv},s),a.createElement("ul",{className:Pv},o.map((e=>a.createElement("li",{key:e.title,className:cn()(Uv,{[xv]:e.id===n})},a.createElement("a",{href:e.href},e.title,a.createElement(oe.In,{icon:"right_caret_alt",className:Bv}))))),l?a.createElement("li",null,a.createElement(oe.QW,{className:Mv,onClick:()=>i(!1)},r.A.t("shared.text_links.view_more"),a.createElement(oe.In,{icon:"dropdown_alt",className:Bv}))):null))}));class Wv extends a.PureComponent{componentDidMount(){this.props.fetchData(this.props.match.url),(0,Sd.o)(this.props.contentItemId,"search:module_item:click","/search",_a)}render(){var e=[da,pa,ua,ca];return a.createElement(a.Fragment,null,a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_950},a.createElement(ml,null)),a.createElement("section",{className:ev},a.createElement(Et,{className:tv}),a.createElement(nn,null,a.createElement(Pr,null,a.createElement("div",{className:nv},a.createElement(id,null),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement("div",{className:sv},!0===this.props.plansEnabled&&!0===this.props.isUnlimitedTitle?a.createElement("div",{className:iv},a.createElement(rt,{type:D.Uc.UNLIMITED})):null,a.createElement(Nn,{"data-e2e":"mobile-content-availability"})),a.createElement(sn,{"data-e2e":"mobile-content-title"}),a.createElement(Rt,{"data-e2e":"mobile-byline"}))),a.createElement("div",{className:lv,"data-e2e":"actions-wrapper"},a.createElement(Mc,null)),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement(kr,null)),a.createElement(ls,null),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550},a.createElement(Dl,null))),a.createElement(Nc,null,a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},a.createElement("div",{className:sv},!0===this.props.plansEnabled&&!0===this.props.isUnlimitedTitle?a.createElement("div",{className:iv},a.createElement(rt,{type:D.Uc.UNLIMITED})):null,a.createElement(Nn,{"data-e2e":"desktop-content-availability"})),a.createElement(sn,{"data-e2e":"desktop-content-title"}),a.createElement(Rt,{"data-e2e":"desktop-byline"})),a.createElement("div",{className:av,id:"reviews"},a.createElement(Os,null),a.createElement(an,null)),a.createElement(oe.s8,{above:!0,width:c.fi.breakpoint_550,"data-e2e":"mobile-metadata"},a.createElement(Kr,{types:e})),a.createElement(Dl,null),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550},a.createElement("div",{className:rv},a.createElement(kr,null))),a.createElement(Cv,null),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_950},a.createElement(qe,null)),a.createElement(oe.s8,{atOrBelow:!0,width:c.fi.breakpoint_550,"data-e2e":"desktop-metadata"},a.createElement(Kr,{types:e})))),a.createElement(oe.tH,null,a.createElement(xc,null),a.createElement(Fv,null),a.createElement(re.A,{whenVisible:!0},a.createElement(ao,{showTitle:!1})),a.createElement(Dl,{thin:!0}),a.createElement(re.A,{whenVisible:!0},a.createElement(fc,null)))))}}Wv.defaultProps={isUnlimitedTitle:!1,plansEnabled:!1};const Gv=(0,o.Ng)((e=>{var t,n,a,r=e.contentItem,l=null!==(t=null===(n=e.personalization)||void 0===n?void 0:n.featureFlags)&&void 0!==t?t:{};return{contentItemId:r.id,isUnlimitedTitle:(null===r||void 0===r||null===(a=r.catalog)||void 0===a?void 0:a.tier)===D.Uc.UNLIMITED,plansEnabled:Boolean(l.plansEnabled)}}),(e=>({fetchData:t=>e(K(t))})))(Wv);const jv={processorListWrapper:"_3SSO9O",controlsContainer:"_3__MLh",playButton:"Ki5Kkn",slider:"_11YdlL",processorsContainer:"_39f8FR",processor:"h1F3a-",processorName:"_3hRcUG",processorSummaryFig:"_1-MjDZ",disabledProcessor:"_3iWM-f",selectedProcessor:"_3H1Z2n",emptyProcessor:"V12b5_"};function Hv(e){var{processors:t,processorStep:n,setProcessorStep:r,setPreviousProcessorStep:l,setHighlightedStep:i,rankStates:s,setTooltipHeight:o}=e,[c,u]=(0,a.useState)(),[m,d]=(0,a.useState)(!1),p=t.filter((e=>e.is_run)),E=e=>{clearInterval(e),d(!1)},v=()=>r((e=>{if(l(e),e<t.length-1&&t.slice(e+1,t.length).some((e=>e.is_run))){for(var n=e+1;n<t.length-1&&!t[n].is_run;)n+=1;return n}return E(c),0}));return(0,a.useEffect)((()=>{n===t.length-1&&E(c)}),[n]),a.createElement("div",{className:jv.processorListWrapper},a.createElement("div",{className:jv.controlsContainer},a.createElement("button",{className:jv.playButton,type:"button",onClick:()=>m?E(c):(v(),u(setInterval(v,4500)),void d(!0))},m?"Pause":"Play"),a.createElement("div",{className:jv.slider},a.createElement("input",{type:"range",min:0,max:p.length-1,value:(e=>{var n=t[e].name;return p.findIndex((e=>e.name===n))})(n),onChange:e=>r((n=>(l(n),(e=>{var n=p[e].name;return t.findIndex((e=>e.name===n))})(+e.target.value)))),id:"running-processor-step"}))),a.createElement("table",{className:jv.processorsContainer},a.createElement("thead",null,a.createElement("tr",{className:cn()(jv.processor,jv.emptyProcessor)},a.createElement("td",{className:jv.processorName}),a.createElement("td",{className:jv.processorSummaryFig},"\u{1f500}"),a.createElement("td",{className:jv.processorSummaryFig},"\u{1f6ab}"),a.createElement("td",{className:jv.processorSummaryFig},"\u2702\ufe0f"))),a.createElement("tbody",null,t.map(((e,u)=>a.createElement("tr",{className:cn()(jv.processor,{[jv.disabledProcessor]:!e.is_run,[jv.selectedProcessor]:t[n].name===e.name}),onClick:()=>(e=>{var n;null!==(n=t[e])&&void 0!==n&&n.is_run&&(E(c),r((t=>(l(t),e))))})(u),onMouseEnter:e=>{i(u),o(e.target.getBoundingClientRect().top)},onMouseLeave:()=>i(null),key:"processor_label_".concat(e.name)},a.createElement("td",{className:jv.processorName},e.name),u>0&&a.createElement(a.Fragment,null,a.createElement("td",{className:jv.processorSummaryFig},s[u].rerankedDocCount),a.createElement("td",{className:jv.processorSummaryFig},s[u].removedDocIds.length),a.createElement("td",{className:jv.processorSummaryFig},s[u].limitedDocCount))))))))}const Vv={cardWrapper:"yF7GFf",processorHeader:"_28n3I-",disabledProcessorHeader:"_3lV2Uk",content:"_1Qt580",title:"zxmf8l",listSectionContainer:"_1UP9x9",tooltipSection:"_8IYFK8"};var zv=e=>String(e).replaceAll("_"," "),Qv=e=>"string"===typeof e?zv(e):Array.isArray(e)?e.map(Qv).join(", "):e;function Xv(e){var{processor:t,height:n}=e;if(!t||!n)return null;var r=t.is_run,l=t.run_conditions?Object.entries(t.run_conditions):[],i=t.filter_info?Object.entries(t.filter_info):[];return a.createElement("div",{className:Vv.cardWrapper,style:{top:"".concat(n,"px")}},a.createElement("div",{className:cn()(Vv.processorHeader,{[Vv.disabledProcessorHeader]:!r})},"".concat(t.type," Details")),a.createElement("div",{className:Vv.content},a.createElement("div",null,a.createElement("span",{className:Vv.title},t.name),a.createElement("span",null," (".concat(r?"on":"off",")"))),a.createElement("p",null,t.desc),a.createElement("div",{className:Vv.listSectionContainer},l.length?a.createElement("div",{className:Vv.tooltipSection},a.createElement("span",null,"Run conditions:"),a.createElement("ul",null,l.map((e=>{var[t,n]=e;return a.createElement("li",{key:t},"".concat(zv(t)," : ").concat(zv(n)))})))):null,i.length?a.createElement("div",{className:Vv.tooltipSection},a.createElement("span",null,"Filter info:"),a.createElement("ul",null,i.map((e=>{var[t,n]=e;return a.createElement("li",{key:t},"".concat(zv(t)," : ").concat(Qv(n)))})))):null,t.ranker_score_names&&t.ranker_score_names.length?a.createElement("div",{className:Vv.tooltipSection},a.createElement("span",null,"Processor Scores:"),a.createElement("ul",null,t.ranker_score_names.map((e=>a.createElement("li",{key:e},zv(e)))))):null)))}const Kv={processorPanelWrapper:"-XppMr",title:"_1kNDhF"};function qv(e){var{processors:t,processorStep:n,setProcessorStep:r,setPreviousProcessorStep:l,rankStates:i}=e,[s,o]=(0,a.useState)(),[c,u]=(0,a.useState)(null);return a.createElement("div",{className:Kv.processorPanelWrapper},a.createElement(Hv,{processors:t,processorStep:n,setProcessorStep:r,setPreviousProcessorStep:l,setHighlightedStep:o,rankStates:i,setTooltipHeight:u}),s>=0&&a.createElement(Xv,{processor:t[s]||null,height:c}))}const Yv="_3PZWun",Jv="DxzUll",Zv="_3vEciJ";var $v={WIDTH:1300,HEIGHT:500,MARGIN:{LEFT:20,RIGHT:10,TOP:20,BOTTOM:10},NUM_COLS:25,IMG_WIDTH:40,IMG_HEIGHT:75,ROW_SPACING:50,COL_SPACING:50,BORDER_PADDING:14},e_=.4,t_=1250;const n_={gridWrapper:"n3JgVQ"};function a_(e){var t,{initialState:n,transitionState:r,documents:l,selectedRecDetails:i,setSelectedRecDetails:s}=e,o=(0,a.useRef)(),c=e=>r.sortedDocIds.findIndex((t=>t===e)),u=(t=Object.keys(l),Math.ceil(t.length/$v.NUM_COLS)),m=d3.scaleBand().domain(d3.range($v.NUM_COLS)),d=d3.scaleBand().domain(d3.range(u)).range([0,Object.keys(l).length]),p=e=>m(e%$v.NUM_COLS)+$v.COL_SPACING*(e%$v.NUM_COLS),E=e=>d(Math.floor(e/$v.NUM_COLS))+$v.ROW_SPACING*Math.floor(e/$v.NUM_COLS),v=e=>m(c(e)%$v.NUM_COLS)+$v.COL_SPACING*(c(e)%$v.NUM_COLS),_=e=>d(Math.floor(c(e)/$v.NUM_COLS))+$v.ROW_SPACING*Math.floor(c(e)/$v.NUM_COLS),h=e=>r.removedDocIds.includes(e),g=r.sortedDocIds.filter((e=>!n.sortedDocIds.includes(e)));return(0,a.useEffect)((()=>{var e=d3.select(o.current),t=e.selectAll(".thumbnailGroup").data([!0]).join("g").attr("class","thumbnailGroup").attr("transform","translate(".concat($v.MARGIN.LEFT,", ").concat($v.MARGIN.TOP,")")),a=t.selectAll(".thumbnail-image").data(n.sortedDocIds).join("image").attr("class",(e=>"thumbnail-image t-img-".concat(e))).attr("x",((e,t)=>p(t))).attr("y",((e,t)=>E(t))).attr("width",$v.IMG_WIDTH).attr("height",$v.IMG_HEIGHT).attr("xlink:href",(e=>l[e].imageUrl)).style("opacity",((e,t)=>t<n.visibleCount?1:e_)).on("click",((e,t)=>s(l[t])));r.removedDocIds.length&&(a=a.transition().duration(t_).attr("x",((e,t)=>h(e)?p(t)+$v.IMG_WIDTH/2:p(t))).attr("y",((e,t)=>h(e)?E(t)+$v.IMG_HEIGHT/2:E(t))).attr("width",(e=>h(e)?0:$v.IMG_WIDTH)).attr("height",(e=>h(e)?0:$v.IMG_HEIGHT))),(a=a.transition().duration(t_).attr("x",((e,t)=>h(e)?p(t)+$v.IMG_WIDTH/2:v(e))).attr("y",((e,t)=>h(e)?E(t)+$v.IMG_HEIGHT/2:_(e)))).transition().duration(t_).style("opacity",(e=>c(e)<r.visibleCount?1:e_)),g&&t.selectAll(".thumbnail-image-added").data(g).join("image").attr("class",(e=>"thumbnail-image-added t-img-".concat(e))).attr("x",(e=>v(e)+$v.IMG_WIDTH/2)).attr("y",(e=>_(e)+$v.IMG_HEIGHT/2)).attr("width",0).attr("height",0).attr("xlink:href",(e=>l[e].imageUrl)).style("opacity",((e,t)=>t<n.visibleCount?1:e_)).on("click",((e,t)=>s(l[t]))).transition().duration(t_).delay(2*t_).attr("x",(e=>v(e))).attr("y",(e=>_(e))).attr("width",$v.IMG_WIDTH).attr("height",$v.IMG_HEIGHT).style("opacity",(e=>c(e)<r.visibleCount?1:e_));var u=n.sortedDocIds.findIndex((e=>e===(null===i||void 0===i?void 0:i.id)));e.selectAll(".borderGroup").data([!0]).join("g").attr("class","borderGroup").attr("transform","translate(".concat($v.MARGIN.LEFT,", ").concat($v.MARGIN.TOP,")")).selectAll(".thumbnail-border").data([!0]).join("rect").attr("class","thumbnail-border").attr("x",i&&!h(i.id)?m(u%$v.NUM_COLS)+$v.COL_SPACING*(u%$v.NUM_COLS)-$v.BORDER_PADDING/2:0).attr("y",i&&!h(i.id)?d(Math.floor(u/$v.NUM_COLS))+$v.ROW_SPACING*Math.floor(u/$v.NUM_COLS):0).attr("width",$v.IMG_WIDTH+$v.BORDER_PADDING).attr("height",$v.IMG_HEIGHT).style("fill","none").style("stroke","#cf2b2b").style("stroke-width",4).style("opacity",i&&!h(i.id)?1:0).transition().duration(t_).delay(r.removedDocIds.length?t_:0).attr("x",i&&!h(i.id)?m(c(i.id)%$v.NUM_COLS)+$v.COL_SPACING*(c(i.id)%$v.NUM_COLS)-$v.BORDER_PADDING/2:0).attr("y",i&&!h(i.id)?d(Math.floor(c(i.id)/$v.NUM_COLS))+$v.ROW_SPACING*Math.floor(c(i.id)/$v.NUM_COLS):0)}),[r]),(0,a.useEffect)((()=>{i&&d3.select(".thumbnail-border").style("opacity",1).attr("x",i&&!h(i.id)?m(c(i.id)%$v.NUM_COLS)+$v.COL_SPACING*(c(i.id)%$v.NUM_COLS)-$v.BORDER_PADDING/2:0).attr("y",i&&!h(i.id)?d(Math.floor(c(i.id)/$v.NUM_COLS))+$v.ROW_SPACING*Math.floor(c(i.id)/$v.NUM_COLS):0)}),[i]),a.createElement("div",{className:n_.gridWrapper},a.createElement("svg",{ref:o,viewBox:"0 0 ".concat($v.MARGIN.LEFT+$v.WIDTH+$v.MARGIN.RIGHT," ").concat($v.MARGIN.TOP+$v.HEIGHT+$v.MARGIN.BOTTOM)}))}a_.defaultProps={selectedRecDetails:null,setSelectedRecDetails:()=>{}};const r_={cardWrapper:"_1Zio2x",contentSection:"_2ZMZqS",title:"_29IE9_",author:"_3y3gFN",score:"_1xyxDc",thumbnailSection:"_1PY-1v",thumbnail:"_1hrQmW",emptyMessage:"nQbeYt"};function l_(e){var{doc:t,processorRecScores:n,rankState:r}=e,l=r.sortedDocIds.findIndex((e=>e===(null===t||void 0===t?void 0:t.id)));return a.createElement("div",{className:r_.cardWrapper},t?a.createElement(a.Fragment,null,a.createElement("div",{className:r_.contentSection},a.createElement("div",{className:r_.title},t.title),a.createElement("div",{className:r_.author},t.author),a.createElement("div",{className:r_.score},"Position #".concat(l+1)),null===n||void 0===n?void 0:n.map((e=>a.createElement("div",{className:r_.score,key:e.name},"".concat(e.name.replaceAll("_"," "),": ").concat(isNaN(e.score)?e.score:e.score.toFixed(2)))))),a.createElement("div",{className:r_.thumbnailSection},a.createElement("img",{alt:"selected-rec-thumbnail",className:r_.thumbnail,src:t.imageUrl}))):a.createElement("div",{className:r_.emptyMessage},"Select a rec to see more details."))}l_.defaultProps={doc:null,processorRecScores:[]};const i_=(0,o.Ng)((e=>({documents:e.documents})),null)((function(e){var{documents:t,processors:n,previousProcessorStep:r,currentProcessorStep:l,recScores:i,rankStates:s}=e,[o,c]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),d=n[l];return(0,a.useEffect)((()=>{d.ranker_score_names||m(null),o&&d.ranker_score_names&&m(d.ranker_score_names.map((e=>({name:e,score:i[o.id]["".concat(d.key,"_").concat(e)]}))))}),[d,o]),a.createElement("div",{className:Yv},a.createElement("div",{className:Jv}," Recommendations "),s.length&&a.createElement(a.Fragment,null,a.createElement(a_,{selectedRecDetails:o,setSelectedRecDetails:c,initialState:s[r],transitionState:s[l],documents:t}),a.createElement("div",{className:Zv},a.createElement(l_,{doc:o,processorRecScores:u,rankState:s[l]}))))})),s_={modalWrapper:"_1cEtyK",modalContainer:"_2fyV1S",modalHead:"YZIVXk",title:"_1GHs2-",closeButton:"_3-Kl3s",modalBody:"_3bIJ-Y",modalOpen:"_3igdgQ"};function o_(e){var{setShowModal:t,module:n}=e,[r,l]=(0,a.useState)([]),[i,s]=(0,a.useState)(0),[o,c]=(0,a.useState)(0);return(0,a.useEffect)((()=>{var e=[];n.explainer.rec_processors.forEach(((t,a,r)=>{var l,i,s,o,c=e=>e.filter((e=>!t.rec_ids.includes(e))),u=c((null===(l=e[a-1])||void 0===l?void 0:l.sortedDocIds)||t.rec_ids),m=[];"filter"===t.type&&(m=t.limit?c(null===(s=r[a-1])||void 0===s?void 0:s.rec_ids.slice(0,t.limit)):c(null===(o=r[a-1])||void 0===o?void 0:o.rec_ids));var d=t.rec_ids.concat(u).filter((e=>!m.includes(e))),p=r.slice(0,a+1).map((e=>e.limit)).filter((e=>e>0)),E=Math.min(...p)||Object.keys(n.explainer.rec_processors[0].rec_ids).length;e.push({sortedDocIds:d,visibleCount:E,removedDocIds:m,limitedDocCount:(null===(i=r[a-1])||void 0===i?void 0:i.rec_ids.length)-t.rec_ids.length-m.length,rerankedDocCount:t.rec_ids.filter(((e,t)=>{var n;return(null===(n=r[a-1])||void 0===n?void 0:n.rec_ids[t])!==e})).length})})),l(e)}),[]),a.createElement("div",{className:s_.modalWrapper},a.createElement("div",{className:s_.modalContainer},a.createElement("div",{className:s_.modalHead},a.createElement("div",{className:s_.title},"Recommendations Explainer: ",n.title),a.createElement("button",{className:s_.closeButton,type:"button",onClick:()=>(document.body.classList.remove(s_.modalOpen),void t(!1))},"\xd7")),r.length&&a.createElement("div",{className:s_.modalBody},a.createElement(qv,{processors:n.explainer.rec_processors,processorStep:i,setProcessorStep:s,setPreviousProcessorStep:c,rankStates:r}),a.createElement(i_,{processors:n.explainer.rec_processors,previousProcessorStep:o,currentProcessorStep:i,recScores:n.explainer.rec_scores,rankStates:r}))))}const c_={cardWrapper:"_3CHysE",scoresContainer:"_3YQRMN",score:"_2m501X"},u_={thumbnailWrapper:"_2gfcge",m:"_3oskM0",s:"_3ZmEO5",xs:"_1SA9Ej"};function m_(e){var{doc:t,size:n}=e,{imageUrl:r,retinaImageUrl:l,title:i}=t;return a.createElement("div",{className:u_.thumbnailWrapper},a.createElement("img",{className:u_[n],alt:i,src:r,srcSet:l}))}function d_(e){var{document:t,module:n}=e,r=n.explainer.rec_processors,l=n.explainer.rec_scores[t.id];return a.createElement("div",{className:c_.cardWrapper},a.createElement(m_,{doc:t}),a.createElement("div",null,t.id),a.createElement("div",null,t.title),a.createElement("div",null,t.author),r.filter((e=>e.is_run)).map((e=>{var t=e.ranker_score_names;return t&&a.createElement("div",{className:c_.scoresContainer,key:"scores for ".concat(e.name)},a.createElement("div",null,"Scores for ",e.name),t.map((t=>{var n=l["".concat(e.key,"_").concat(t)];return a.createElement("div",{className:c_.score,key:t},t.replaceAll("_"," "),":"," ","number"===typeof n&&n%1!==0?n.toFixed(2):n)})))})))}m_.defaultProps={size:D.F0.S};const p_={list:"_2sDjpZ",listItem:"_1DJMzu"};var E_=7,v_=11;function __(e){var t,{module:n,moduleDocs:r,page:l}=e,[i,s]=(0,a.useState)(r.slice(0,v_)),o=(0,a.useRef)(),c=(0,a.useCallback)((t=o,e=>{t.current&&t.current.disconnect(),t.current=new IntersectionObserver((e=>{e[0].isIntersecting&&s(r)})),e&&t.current.observe(e)}),[]);return a.createElement("ul",{className:p_.list},i.map(((e,t)=>a.createElement("li",{className:p_.listItem,key:e.uuid,ref:t===E_?c:null},a.createElement(R.QY,{uuid:e.uuid},a.createElement(d_,{module:n,document:e,documentId:e.id,page:l}))))))}const h_={carouselWrapper:"_2Iwk6L",buttonContainer:"_1kjgoG",modalButton:"V3xaV3"};function g_(e){var{module:t,moduleDocs:n,setShowModal:r,setModule:l}=e;return a.createElement("div",{className:h_.carouselWrapper},a.createElement(R.wq,{module:t,renderPastMargin:!0,paginated:!0},a.createElement("div",{className:h_.buttonContainer},a.createElement("button",{className:h_.modalButton,type:"button",onClick:()=>{return e=t,document.body.classList.add(s_.modalOpen),l(e),void r(!0);var e}},"Recs Explainer Visualization")),a.createElement(__,{module:t,moduleDocs:n,page:"content-preview"})))}const b_="_3Kna5x";function f_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f_(Object(n),!0).forEach((function(t){N_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y_=(0,o.Ng)((e=>({modules:e.compilation.modules,documents:e.documents})),null)((function(e){var{modules:t,documents:n,setShowModal:r,setModule:l}=e;return a.createElement("div",{className:b_},t&&t.filter((e=>e.explainer)).map((e=>{var t=e.documents.map((e=>w_(w_({},n[+e.id]),{},{uuid:e.uuid})));return a.createElement(g_,{module:e,moduleDocs:t,setShowModal:r,setModule:l,key:"carousel_for_".concat(e.title)})})))})),I_="lCby6T",A_="_3fuHHz",S_="_1Vh7uD",O_="dxNpGW",T_="_1fF0Le",D_="_1zspJZ",R_="_38D9zE",k_="_47JEv0";const C_=(0,o.Ng)((e=>({title:e.contentItem.title,author:e.contentItem.author.name,imageUrl:e.contentItem.imageUrl,itemUrl:e.contentItem.contentItemUrl,contentType:e.contentItem.contentType,description:e.contentItem.description})),null)((function(e){var{title:t,author:n,contentType:r,description:l,itemUrl:i,imageUrl:s}=e,o={__html:l};return a.createElement("div",{className:I_},a.createElement("div",{className:A_},a.createElement("div",{className:S_},t),a.createElement("div",{className:O_},r),a.createElement("div",{className:T_},n),a.createElement("div",{className:D_,dangerouslySetInnerHTML:o})),a.createElement("div",{className:R_},a.createElement("a",{href:i,target:"_blank"},a.createElement("img",{alt:"Thumbnail for selected rec.",className:k_,src:s}))))})),L_="_1S6n5W",P_="_2xy6b3",U_="_3Rf9Cn",x_="_1sTT78",B_="_2nqpuN",M_="_3978Pz",F_="_32MfmP",W_="_3R9YRB";function G_(){return a.createElement("div",{className:L_},Array.from(Array(7)).map(((e,t)=>a.createElement(a.Fragment,{key:"skeleton_column_".concat(t)},a.createElement(he.O0,{className:P_}),a.createElement(he.O0,{className:cn()(U_,M_)}),a.createElement(he.O0,{className:cn()(U_,x_)}),a.createElement(he.O0,{className:cn()(U_,B_)}),a.createElement(he.O0,{className:cn()(U_,x_)}),a.createElement(he.O0,{className:cn()(U_,B_)}),a.createElement(he.O0,{className:cn()(U_,x_)}),a.createElement(he.O0,{className:cn()(U_,M_)})))),a.createElement("div",{className:F_},a.createElement("div",{className:W_},"loading...")))}function j_(e,t,n,a,r,l,i){try{var s=e[l](i),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(a,r)}var H_=e=>{var{fetchData:t,match:n}=e,[r,l]=(0,a.useState)(!1),[i,s]=(0,a.useState)(!1),[o,u]=(0,a.useState)(!1),[m,d]=(0,a.useState)();return(0,a.useEffect)((()=>{(0,c.ki)({path:"https://cdnjs.cloudflare.com/ajax/libs/d3/7.3.0/d3.js",onload:()=>l(!0)})}),[]),(0,a.useEffect)((()=>{function e(){var a;return a=function*(){yield t(n.url),s(!0)},e=function(){var e=this,t=arguments;return new Promise((function(n,r){var l=a.apply(e,t);function i(e){j_(l,n,r,i,s,"next",e)}function s(e){j_(l,n,r,i,s,"throw",e)}i(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n.url]),a.createElement("section",{className:NE},a.createElement(_m.Ev,null,a.createElement(oe.tH,null,a.createElement(re.A,{whenVisible:!0},a.createElement(_m.TW,null,a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}),a.createElement(_m.Hy,{xl:10,l:12},r&&a.createElement(a.Fragment,null,m&&o&&a.createElement(o_,{setShowModal:u,module:m}),a.createElement(C_,null),a.createElement(y_,{setShowModal:u,setModule:d})),!i&&a.createElement(G_,null)),a.createElement(_m.Hy,{xl:1,hideBelow:D.F0.XL}))))))};const V_=a.memo(H_),z_=(0,o.Ng)((e=>({compilation:e.compilation,documents:e.documents,user:e.user})),(e=>({fetchData:t=>e(K(t))})))(V_);const Q_=(0,o.Ng)((e=>({contentType:e.contentItem.contentType})))((function(e){var{contentType:t,match:n}=e;return t===D.g2.SHEET_MUSIC||t===D.g2.SHEET_MUSIC_CHAPTER?a.createElement(Gv,{match:n}):a.createElement(ZE,{match:n})}));function X_(e){var{match:t}=e,{url:n}=t,r=/\/\/+/g;if(n.match(r)){var l=n.replace(r,"/");return a.createElement(ne.rd,{to:l})}return null}const K_={[D.R8.ACCOUNT_CREATION]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{AccountCreationSPA:t}=e;return t}))},[D.R8.ADD_TO_LIST]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{AddToList:t}=e;return t}))},[D.R8.CREATE_LIST]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{CreateList:t}=e;return t}))},[D.R8.GET_APP]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{GetApp:t}=e;return t}))},[D.R8.LANGUAGE_PICKER]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{LanguagePicker:t}=e;return t}))},[D.R8.LOCK_SHOCK_ROADBLOCK]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{LockShockRoadblock:t}=e;return t}))},[D.R8.CONFIRM_UNSAVE_ITEM_IN_LIST]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{ConfirmUnsaveItemInList:t}=e;return t}))},[D.R8.CONFIRM_DELETE_REVIEW]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{ConfirmDeleteReview:t}=e;return t}))},[D.R8.RENEW_UPGRADE_PLAN]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{RenewUpgradePlan:t}=e;return t}))},[D.R8.ONBOARDING]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{Onboarding:t}=e;return t}))},[D.R8.PROGRESSIVE_PROFILE]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{ProgressiveProfileDS1:t}=e;return t}))}},q_={[D.R8.ACCOUNT_CREATION]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{AccountCreationSPA:t}=e;return t}))},[D.R8.CONFIRM_DELETE_REVIEW]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{ConfirmDeleteReviewDS2:t}=e;return t}))},[D.R8.CONFIRM_UNSAVE_ITEM_IN_LIST]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{ConfirmUnsaveItemInListDS2:t}=e;return t}))},[D.R8.GET_APP]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{GetAppDS2:t}=e;return t}))},[D.R8.LANGUAGE_PICKER]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{LanguagePicker:t}=e;return t}))},[D.R8.LOCK_SHOCK_ROADBLOCK]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{LockShockRoadblockDS2:t}=e;return t}))},[D.R8.UNLOCK_TITLE]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{UnlockTitle:t}=e;return t}))},[D.R8.ONBOARDING]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{OnboardingDS2:t}=e;return t}))},[D.R8.PROGRESSIVE_PROFILE]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{ProgressiveProfileDS2:t}=e;return t}))},[D.R8.RENEW_UPGRADE_PLAN]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{RenewUpgradePlan:t}=e;return t}))},[D.R8.SOCIAL_MEDIA_SHARE]:{component:()=>n.e(172).then(n.bind(n,61172)).then((e=>{var{SocialMediaShare:t}=e;return t}))}};n(30316),n(72894),n(76513),n(38181),n(2340),n(56241),n(11147),n(77441),n(49734),n(64974),n(39380),n(34419),n(607),n(59466),n(24232),n(38460),n(9797),n(82392),n(77705),n(77142),n(48147),n(95284),n(99486),n(3284),n(71109);const Y_="_1BBjPx";const J_=(0,o.Ng)((e=>{var t;return{aiAssistantExperience:null===(t=e.nwayTests.ai_assistant_experience)||void 0===t?void 0:t.value,brand:e.static.config.brand,isLoggedIn:e.user.isLoggedIn,isSubscriber:e.user.isSubscriber}}))((0,ne.y)((0,ae.Es)((function(e){var{aiAssistantExperience:t,brand:n,isLoggedIn:r,location:l,isSubscriber:i}=e,[s,c]=(0,a.useState)(!0),u=(0,o.d4)((e=>e.contentItem.contentType)),{pathname:m,search:d}=l,p=(0,ce.Zq)(),E=n===D.rI.EVERAND&&t&&r;(0,ue.A)(d),(0,me.A)(d),(0,de.A)(),(0,pe.A)({brand:n,isSubscriber:i});var v=u===D.g2.BOOK||u===D.g2.AUDIOBOOK||m.includes("/series/");return(0,a.useEffect)((()=>(window.Scribd&&(window.Scribd.isCpds2=v),c(!1),(0,_e._7)({brand:n,page:ee}))),[]),(0,Ee.A)(),a.createElement(a.Fragment,null,a.createElement(oe.tH,null,a.createElement(oe.Vh,null,!0===v?a.createElement(ie.$N,null):a.createElement(ie._E,null),a.createElement(ie.pr,{page:ee,brand:n})),!0===v?null:a.createElement(se.qM,null),!0===v?n===D.rI.EVERAND?a.createElement(ed,null):a.createElement(Sm,null):a.createElement(vm,null)),a.createElement(oe.tH,null,a.createElement("main",{className:!0===v?null:Y_,"data-e2e":"content-preview-app"},a.createElement(ne.dO,null,a.createElement(ne.qh,{path:"/series/:id",component:Dv}),a.createElement(ne.qh,{path:"/book/:id/:slug/:chapterId",component:Q_}),a.createElement(ne.qh,{path:"/book/:id",component:Q_}),a.createElement(ne.qh,{path:"/audiobook/:id",component:UE}),a.createElement(ne.qh,{path:"/podcast/:id",component:dv}),a.createElement(ne.qh,{path:"/podcast-show/:id",component:cv}),a.createElement(ne.qh,{path:"/recs_explainer/book/:id",component:z_}),a.createElement(ne.qh,{path:"/recs_explainer/audiobook/:id",component:z_}),a.createElement(ne.qh,{path:ve.$K},a.createElement(ne.rd,{to:p})),a.createElement(ne.qh,{path:"*",component:X_}))),a.createElement(re.A,{whenVisible:!0},a.createElement(ie.JY,{page:ee}))),!0===v?a.createElement(oe.tH,null,a.createElement(ie.E5,null),a.createElement(ie.Sv,{mapper:q_})):a.createElement(oe.tH,null,a.createElement(ie.PT,{mapper:K_}),a.createElement(ie.tx,null)),!s&&E&&a.createElement(oe.tH,null,a.createElement(le.eM,null)))}))));Je().object.isRequired,Je().object.isRequired,Je().object.isRequired,Je().object.isRequired,Je().object.isRequired,Je().object.isRequired,Je().string.isRequired;n.p=window.Scribd.publicPath;(0,i.aI)("content-preview",(e=>{var t=(0,c.rB)(e,"static.routes");!function(e){var{contentItem:t,i18n:n,static:{config:a,routes:r},user:l}=e;(0,$.JL)(n.locale),c.X8.sentryTag(a.brand),c.X8.fullStoryTag(a.brand),c.X8.optimizelyTag(a.brand),c.X8.googleAnalyticsTag(a.thirdPartyTags.googleAnalytics,a.brand),c.X8.siftScienceTag(a.thirdPartyTags.siftScience),(0,$.HR)(a.webAnalytics.url,l.id,t.id,a.brand),(0,$.p)({applicationId:"59a751bd-9a0d-493b-8ac5-c5f8e1937d05",clientToken:"pubcc3ee9076b8c506df6eb20fa52ebf9e9",service:"content-preview",env:Scribd.Sentry.environment,sessionSampleRate:10,sessionReplaySampleRate:0},l),c.X8.googleOneTap({contentType:t.contentType,googleClientId:a.google.clientId,isLoggedIn:l.isLoggedIn,page:ee,subscribeUrl:r.subscribeUrl})}(t);var n=Y(t);return a.createElement(o.Kq,{store:n},a.createElement(s.Kd,null,a.createElement(l.xC,{i18n:r.A},a.createElement(J_,null))))}))},13748:()=>{},90884:()=>{}},e=>{e.O(0,[524],(()=>{e.E(172)}),5);var t=t=>e(e.s=t);e.O(0,[63],(()=>(t(28875),t(26824))));e.O()}]);
//# sourceMappingURL=https://www.scribd.com/webpack/content-preview/app.ee96ef.js.map
</script>

</body>
</html>
