<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>square.html</title>
</head>
<body>

<script>

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f444690e-e02a-5539-87b6-0661cd92ced4")}catch(e){}}();
(()=>{"use strict";var e={7111:(e,t,r)=>{var n=r(6733),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},7988:(e,t,r)=>{var n=r(2359),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a constructor")}},8505:(e,t,r)=>{var n=r(6733),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},9736:(e,t,r)=>{var n=r(95),i=r(2391),o=r(1787).f,a=n("unscopables"),s=Array.prototype;void 0===s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},6637:(e,t,r)=>{var n=r(966).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},7728:(e,t,r)=>{var n=r(1321),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},1176:(e,t,r)=>{var n=r(5052),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},9772:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},2460:(e,t,r)=>{var n=r(4229);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},9918:(e,t,r)=>{var n,i,o,a=r(9772),s=r(7400),c=r(9859),u=r(6733),l=r(5052),d=r(8270),h=r(1589),p=r(9821),f=r(5762),g=r(4768),m=r(6616),v=r(1321),y=r(7567),E=r(6540),_=r(95),S=r(1441),I=r(6407),b=I.enforce,A=I.get,O=c.Int8Array,C=O&&O.prototype,T=c.Uint8ClampedArray,w=T&&T.prototype,R=O&&y(O),P=C&&y(C),N=Object.prototype,D=c.TypeError,L=_("toStringTag"),x=S("TYPED_ARRAY_TAG"),k="TypedArrayConstructor",M=a&&!!E&&"Opera"!==h(c.opera),U=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},H={BigInt64Array:8,BigUint64Array:8},F=function(e){var t=y(e);if(l(t)){var r=A(t);return r&&d(r,k)?r[k]:F(t)}},B=function(e){if(!l(e))return!1;var t=h(e);return d(j,t)||d(H,t)};for(n in j)(o=(i=c[n])&&i.prototype)?b(o)[k]=i:M=!1;for(n in H)(o=(i=c[n])&&i.prototype)&&(b(o)[k]=i);if((!M||!u(R)||R===Function.prototype)&&(R=function(){throw new D("Incorrect invocation")},M))for(n in j)c[n]&&E(c[n],R);if((!M||!P||P===N)&&(P=R.prototype,M))for(n in j)c[n]&&E(c[n].prototype,P);if(M&&y(w)!==P&&E(w,P),s&&!d(P,L))for(n in U=!0,m(P,L,{configurable:!0,get:function(){return l(this)?this[x]:void 0}}),j)c[n]&&f(c[n],x,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:U&&x,aTypedArray:function(e){if(B(e))return e;throw new D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!E||v(R,e)))return e;throw new D(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(s){if(r)for(var i in j){var o=c[i];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(r){try{o.prototype[e]=t}catch(e){}}}P[e]&&!r||g(P,e,r?t:M&&C[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,i;if(s){if(E){if(r)for(n in j)if((i=c[n])&&d(i,e))try{delete i[e]}catch(e){}if(R[e]&&!r)return;try{return g(R,e,r?t:M&&R[e]||t)}catch(e){}}for(n in j)!(i=c[n])||i[e]&&!r||g(i,e,t)}},getTypedArrayConstructor:F,isView:function(e){if(!l(e))return!1;var t=h(e);return"DataView"===t||d(j,t)||d(H,t)},isTypedArray:B,TypedArray:R,TypedArrayPrototype:P}},3816:(e,t,r)=>{var n=r(9859),i=r(5968),o=r(7400),a=r(9772),s=r(1805),c=r(5762),u=r(6616),l=r(8312),d=r(4229),h=r(7728),p=r(3329),f=r(4237),g=r(7331),m=r(781),v=r(6201),y=r(7567),E=r(6540),_=r(8151).f,S=r(7065),I=r(9794),b=r(4555),A=r(6407),O=s.PROPER,C=s.CONFIGURABLE,T="ArrayBuffer",w="DataView",R="prototype",P="Wrong index",N=A.getterFor(T),D=A.getterFor(w),L=A.set,x=n[T],k=x,M=k&&k[R],U=n[w],j=U&&U[R],H=Object.prototype,F=n.Array,B=n.RangeError,V=i(S),q=i([].reverse),G=v.pack,z=v.unpack,$=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},W=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},X=function(e){return G(m(e),23,4)},Q=function(e){return G(e,52,8)},Z=function(e,t,r){u(e[R],t,{configurable:!0,get:function(){return r(this)[t]}})},J=function(e,t,r,n){var i=D(e),o=g(r),a=!!n;if(o+t>i.byteLength)throw new B(P);var s=i.bytes,c=o+i.byteOffset,u=I(s,c,c+t);return a?u:q(u)},ee=function(e,t,r,n,i,o){var a=D(e),s=g(r),c=n(+i),u=!!o;if(s+t>a.byteLength)throw new B(P);for(var l=a.bytes,d=s+a.byteOffset,h=0;h<t;h++)l[d+h]=c[u?h:t-h-1]};if(a){var te=O&&x.name!==T;if(d((function(){x(1)}))&&d((function(){new x(-1)}))&&!d((function(){return new x,new x(1.5),new x(NaN),1!==x.length||te&&!C})))te&&C&&c(x,"name",T);else{(k=function(e){return h(this,M),new x(g(e))})[R]=M;for(var re,ne=_(x),ie=0;ne.length>ie;)(re=ne[ie++])in k||c(k,re,x[re]);M.constructor=k}E&&y(j)!==H&&E(j,H);var oe=new U(new k(2)),ae=i(j.setInt8);oe.setInt8(0,2147483648),oe.setInt8(1,2147483649),!oe.getInt8(0)&&oe.getInt8(1)||l(j,{setInt8:function(e,t){ae(this,e,t<<24>>24)},setUint8:function(e,t){ae(this,e,t<<24>>24)}},{unsafe:!0})}else M=(k=function(e){h(this,M);var t=g(e);L(this,{type:T,bytes:V(F(t),0),byteLength:t}),o||(this.byteLength=t,this.detached=!1)})[R],j=(U=function(e,t,r){h(this,j),h(e,M);var n=N(e),i=n.byteLength,a=p(t);if(a<0||a>i)throw new B("Wrong offset");if(a+(r=void 0===r?i-a:f(r))>i)throw new B("Wrong length");L(this,{type:w,buffer:e,byteLength:r,byteOffset:a,bytes:n.bytes}),o||(this.buffer=e,this.byteLength=r,this.byteOffset=a)})[R],o&&(Z(k,"byteLength",N),Z(U,"buffer",D),Z(U,"byteLength",D),Z(U,"byteOffset",D)),l(j,{getInt8:function(e){return J(this,1,e)[0]<<24>>24},getUint8:function(e){return J(this,1,e)[0]},getInt16:function(e){var t=J(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=J(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return K(J(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return K(J(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return z(J(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return z(J(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){ee(this,1,e,$,t)},setUint8:function(e,t){ee(this,1,e,$,t)},setInt16:function(e,t){ee(this,2,e,Y,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){ee(this,2,e,Y,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){ee(this,4,e,W,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){ee(this,4,e,W,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){ee(this,4,e,X,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){ee(this,8,e,Q,t,arguments.length>2&&arguments[2])}});b(k,T),b(U,w),e.exports={ArrayBuffer:k,DataView:U}},7065:(e,t,r)=>{var n=r(2991),i=r(3231),o=r(9646);e.exports=function(e){for(var t=n(this),r=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);u>s;)t[s++]=e;return t}},6570:(e,t,r)=>{var n=r(9996).forEach,i=r(6038)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},9540:(e,t,r)=>{var n=r(905),i=r(3231),o=r(9646),a=function(e){return function(t,r,a){var s,c=n(t),u=o(c),l=i(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9996:(e,t,r)=>{var n=r(7636),i=r(5968),o=r(9337),a=r(2991),s=r(9646),c=r(7501),u=i([].push),l=function(e){var t=1===e,r=2===e,i=3===e,l=4===e,d=6===e,h=7===e,p=5===e||d;return function(f,g,m,v){for(var y,E,_=a(f),S=o(_),I=n(g,m),b=s(S),A=0,O=v||c,C=t?O(f,b):r||h?O(f,0):void 0;b>A;A++)if((p||A in S)&&(E=I(y=S[A],A,_),e))if(t)C[A]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return A;case 2:u(C,y)}else switch(e){case 4:return!1;case 7:u(C,y)}return d?-1:i||l?l:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},6038:(e,t,r)=>{var n=r(4229);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},3143:(e,t,r)=>{var n=r(7111),i=r(2991),o=r(9337),a=r(9646),s=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),h=a(l),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in d){u=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw new s("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(u=r(u,d[p],p,l));return u}};e.exports={left:c(!1),right:c(!0)}},9794:(e,t,r)=>{var n=r(3231),i=r(9646),o=r(2324),a=Array,s=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=a(s(l-u,0)),h=0;u<l;u++,h++)o(d,h,e[u]);return d.length=h,d}},1909:(e,t,r)=>{var n=r(5968);e.exports=n([].slice)},3867:(e,t,r)=>{var n=r(9794),i=Math.floor,o=function(e,t){var r=e.length,c=i(r/2);return r<8?a(e,t):s(e,o(n(e,0,c),t),o(n(e,c),t),t)},a=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},s=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e};e.exports=o},8760:(e,t,r)=>{var n=r(3718),i=r(2359),o=r(5052),a=r(95)("species"),s=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===s||n(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},7501:(e,t,r)=>{var n=r(8760);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4575:(e,t,r)=>{var n=r(95)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},7079:(e,t,r)=>{var n=r(5968),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1589:(e,t,r)=>{var n=r(1601),i=r(6733),o=r(7079),a=r(95)("toStringTag"),s=Object,c="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?r:c?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},3370:(e,t,r)=>{var n=r(5968),i=r(8312),o=r(5926).getWeakData,a=r(7728),s=r(1176),c=r(9650),u=r(5052),l=r(9003),d=r(9996),h=r(8270),p=r(6407),f=p.set,g=p.getterFor,m=d.find,v=d.findIndex,y=n([].splice),E=0,_=function(e){return e.frozen||(e.frozen=new S)},S=function(){this.entries=[]},I=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};S.prototype={get:function(e){var t=I(this,e);if(t)return t[1]},has:function(e){return!!I(this,e)},set:function(e,t){var r=I(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var d=e((function(e,i){a(e,p),f(e,{type:t,id:E++,frozen:void 0}),c(i)||l(i,e[n],{that:e,AS_ENTRIES:r})})),p=d.prototype,m=g(t),v=function(e,t,r){var n=m(e),i=o(s(t),!0);return!0===i?_(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).has(e):r&&h(r,t.id)}}),i(p,r?{get:function(e){var t=m(this);if(u(e)){var r=o(e);return!0===r?_(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},9789:(e,t,r)=>{var n=r(3103),i=r(9859),o=r(5968),a=r(6541),s=r(4768),c=r(5926),u=r(9003),l=r(7728),d=r(6733),h=r(9650),p=r(5052),f=r(4229),g=r(4575),m=r(4555),v=r(835);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",S=i[e],I=S&&S.prototype,b=S,A={},O=function(e){var t=o(I[e]);s(I,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return E&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(a(e,!d(S)||!(E||I.forEach&&!f((function(){(new S).entries().next()})))))b=r.getConstructor(t,e,y,_),c.enable();else if(a(e,!0)){var C=new b,T=C[_](E?{}:-0,1)!==C,w=f((function(){C.has(1)})),R=g((function(e){new S(e)})),P=!E&&f((function(){for(var e=new S,t=5;t--;)e[_](t,t);return!e.has(-0)}));R||((b=t((function(e,t){l(e,I);var r=v(new S,e,b);return h(t)||u(t,r[_],{that:r,AS_ENTRIES:y}),r}))).prototype=I,I.constructor=b),(w||P)&&(O("delete"),O("has"),y&&O("get")),(P||T)&&O(_),E&&I.clear&&delete I.clear}return A[e]=b,n({global:!0,constructor:!0,forced:b!==S},A),m(b,e),E||r.setStrong(b,e,y),b}},7081:(e,t,r)=>{var n=r(8270),i=r(4826),o=r(7933),a=r(1787);e.exports=function(e,t,r){for(var s=i(t),c=a.f,u=o.f,l=0;l<s.length;l++){var d=s[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},8127:(e,t,r)=>{var n=r(95)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},7528:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3684:e=>{e.exports=function(e,t){return{value:e,done:t}}},5762:(e,t,r)=>{var n=r(7400),i=r(1787),o=r(5358);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,r)=>{var n=r(9310),i=r(1787),o=r(5358);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},6616:(e,t,r)=>{var n=r(6039),i=r(1787);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},4768:(e,t,r)=>{var n=r(6733),i=r(1787),o=r(6039),a=r(8400);e.exports=function(e,t,r,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(n(r)&&o(r,u,s),s.global)c?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},8312:(e,t,r)=>{var n=r(4768);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},8400:(e,t,r)=>{var n=r(9859),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},7400:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3777:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},2635:(e,t,r)=>{var n=r(9859),i=r(5052),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8865:(e,t,r)=>{var n=r(2635)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},2671:(e,t,r)=>{var n=r(598).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},8506:(e,t,r)=>{var n=r(598);e.exports=/MSIE|Trident/.test(n)},8801:(e,t,r)=>{var n=r(9859),i=r(7079);e.exports="process"===i(n.process)},598:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},6358:(e,t,r)=>{var n,i,o=r(9859),a=r(598),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},9811:(e,t,r)=>{var n=r(598).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,r)=>{var n=r(9859),i=r(7933).f,o=r(5762),a=r(4768),s=r(8400),c=r(7081),u=r(6541);e.exports=function(e,t){var r,l,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?n:m?n[f]||s(f,{}):(n[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=i(r,l))&&p.value:r[l],!u(g?l:f+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(r,l,h,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,r)=>{r(7950);var n=r(4745),i=r(4768),o=r(3466),a=r(4229),s=r(95),c=r(5762),u=s("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=s(e),p=!a((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=p&&!a((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var g=n(/./[h]),m=t(h,""[e],(function(e,t,r,i,a){var s=n(e),c=t.exec;return c===o||c===l.exec?p&&!a?{done:!0,value:g(t,r,i)}:{done:!0,value:s(r,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,h,m[1])}d&&c(l[h],"sham",!0)}},8476:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},3171:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},7636:(e,t,r)=>{var n=r(4745),i=r(7111),o=r(7188),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},7188:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},266:(e,t,r)=>{var n=r(7188),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1805:(e,t,r)=>{var n=r(7400),i=r(8270),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},3411:(e,t,r)=>{var n=r(5968),i=r(7111);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},4745:(e,t,r)=>{var n=r(7079),i=r(5968);e.exports=function(e){if("Function"===n(e))return i(e)}},5968:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);e.exports=n?a:function(e){return function(){return o.apply(e,arguments)}}},1333:(e,t,r)=>{var n=r(9859),i=r(6733);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},8830:(e,t,r)=>{var n=r(1589),i=r(5300),o=r(9650),a=r(5495),s=r(95)("iterator");e.exports=function(e){if(!o(e))return i(e,s)||i(e,"@@iterator")||a[n(e)]}},8403:(e,t,r)=>{var n=r(266),i=r(7111),o=r(1176),a=r(9821),s=r(8830),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(i(r))return o(n(r,e));throw new c(a(e)+" is not iterable")}},5300:(e,t,r)=>{var n=r(7111),i=r(9650);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},17:(e,t,r)=>{var n=r(5968),i=r(2991),o=Math.floor,a=n("".charAt),s=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,h){var p=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),s(h,g,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>f){var h=o(l/10);return 0===h?i:h<=f?void 0===n[h-1]?a(s,1):n[h-1]+a(s,1):i}u=n[l-1]}return void 0===u?"":u}))}},9859:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},8270:(e,t,r)=>{var n=r(5968),i=r(2991),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5977:e=>{e.exports={}},8385:(e,t,r)=>{var n=r(1333);e.exports=n("document","documentElement")},4394:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(2635);e.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},6201:e=>{var t=Array,r=Math.abs,n=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;e.exports={pack:function(e,s,c){var u,l,d,h=t(c),p=8*c-s-1,f=(1<<p)-1,g=f>>1,m=23===s?n(2,-24)-n(2,-77):0,v=e<0||0===e&&1/e<0?1:0,y=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,u=f):(u=i(o(e)/a),e*(d=n(2,-u))<1&&(u--,d*=2),(e+=u+g>=1?m/d:m*n(2,1-g))*d>=2&&(u++,d/=2),u+g>=f?(l=0,u=f):u+g>=1?(l=(e*d-1)*n(2,s),u+=g):(l=e*n(2,g-1)*n(2,s),u=0));s>=8;)h[y++]=255&l,l/=256,s-=8;for(u=u<<s|l,p+=s;p>0;)h[y++]=255&u,u/=256,p-=8;return h[--y]|=128*v,h},unpack:function(e,t){var r,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,c=o-7,u=i-1,l=e[u--],d=127&l;for(l>>=7;c>0;)d=256*d+e[u--],c-=8;for(r=d&(1<<-c)-1,d>>=-c,c+=t;c>0;)r=256*r+e[u--],c-=8;if(0===d)d=1-s;else{if(d===a)return r?NaN:l?-1/0:1/0;r+=n(2,t),d-=s}return(l?-1:1)*r*n(2,d-t)}}},9337:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(7079),a=Object,s=n("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?s(e,""):a(e)}:a},835:(e,t,r)=>{var n=r(6733),i=r(5052),o=r(6540);e.exports=function(e,t,r){var a,s;return o&&n(a=t.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&o(e,s),e}},8511:(e,t,r)=>{var n=r(5968),i=r(6733),o=r(5353),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},5926:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(5977),a=r(5052),s=r(8270),c=r(1787).f,u=r(8151),l=r(166),d=r(5343),h=r(1441),p=r(8476),f=!1,g=h("meta"),m=0,v=function(e){c(e,g,{value:{objectID:"O"+m++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=u.f,t=i([].splice),r={};r[g]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===g){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,g)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!s(e,g)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return p&&f&&d(e)&&!s(e,g)&&v(e),e}};o[g]=!0},6407:(e,t,r)=>{var n,i,o,a=r(1180),s=r(9859),c=r(5052),u=r(5762),l=r(8270),d=r(5353),h=r(4399),p=r(5977),f="Object already initialized",g=s.TypeError,m=s.WeakMap;if(a||d.state){var v=d.state||(d.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw new g(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,n=function(e,t){if(l(e,y))throw new g(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},1943:(e,t,r)=>{var n=r(95),i=r(5495),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},3718:(e,t,r)=>{var n=r(7079);e.exports=Array.isArray||function(e){return"Array"===n(e)}},9098:(e,t,r)=>{var n=r(1589);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},6733:(e,t,r)=>{var n=r(3777),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},2359:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),a=r(1589),s=r(1333),c=r(8511),u=function(){},l=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},6541:(e,t,r)=>{var n=r(4229),i=r(6733),o=/#|\.prototype\./,a=function(e,t){var r=c[s(e)];return r===l||r!==u&&(i(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},2292:(e,t,r)=>{var n=r(5052),i=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&i(e)===e}},9650:e=>{e.exports=function(e){return null==e}},5052:(e,t,r)=>{var n=r(6733),i=r(3777),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},4231:e=>{e.exports=!1},8311:(e,t,r)=>{var n=r(5052),i=r(7079),o=r(95)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"===i(e))}},9395:(e,t,r)=>{var n=r(1333),i=r(6733),o=r(1321),a=r(6969),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,s(e))}},9003:(e,t,r)=>{var n=r(7636),i=r(266),o=r(1176),a=r(9821),s=r(1943),c=r(9646),u=r(1321),l=r(8403),d=r(8830),h=r(7281),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var m,v,y,E,_,S,I,b=r&&r.that,A=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),C=!(!r||!r.IS_ITERATOR),T=!(!r||!r.INTERRUPTED),w=n(t,b),R=function(e){return m&&h(m,"normal",e),new f(!0,e)},P=function(e){return A?(o(e),T?w(e[0],e[1],R):w(e[0],e[1])):T?w(e,R):w(e)};if(O)m=e.iterator;else if(C)m=e;else{if(!(v=d(e)))throw new p(a(e)+" is not iterable");if(s(v)){for(y=0,E=c(e);E>y;y++)if((_=P(e[y]))&&u(g,_))return _;return new f(!1)}m=l(e,v)}for(S=O?e.next:m.next;!(I=i(S,m)).done;){try{_=P(I.value)}catch(e){h(m,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},7281:(e,t,r)=>{var n=r(266),i=r(1176),o=r(5300);e.exports=function(e,t,r){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return i(a),r}},2247:(e,t,r)=>{var n=r(693).IteratorPrototype,i=r(2391),o=r(5358),a=r(4555),s=r(5495),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),a(e,l,!1,!0),s[l]=c,e}},2707:(e,t,r)=>{var n=r(3103),i=r(266),o=r(4231),a=r(1805),s=r(6733),c=r(2247),u=r(7567),l=r(6540),d=r(4555),h=r(5762),p=r(4768),f=r(95),g=r(5495),m=r(693),v=a.PROPER,y=a.CONFIGURABLE,E=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,S=f("iterator"),I="keys",b="values",A="entries",O=function(){return this};e.exports=function(e,t,r,a,f,m,C){c(r,t,a);var T,w,R,P=function(e){if(e===f&&k)return k;if(!_&&e&&e in L)return L[e];switch(e){case I:case b:case A:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",D=!1,L=e.prototype,x=L[S]||L["@@iterator"]||f&&L[f],k=!_&&x||P(f),M="Array"===t&&L.entries||x;if(M&&(T=u(M.call(new e)))!==Object.prototype&&T.next&&(o||u(T)===E||(l?l(T,E):s(T[S])||p(T,S,O)),d(T,N,!0,!0),o&&(g[N]=O)),v&&f===b&&x&&x.name!==b&&(!o&&y?h(L,"name",b):(D=!0,k=function(){return i(x,this)})),f)if(w={values:P(b),keys:m?k:P(I),entries:P(A)},C)for(R in w)(_||D||!(R in L))&&p(L,R,w[R]);else n({target:t,proto:!0,forced:_||D},w);return o&&!C||L[S]===k||p(L,S,k,{name:f}),g[t]=k,w}},693:(e,t,r)=>{var n,i,o,a=r(4229),s=r(6733),c=r(5052),u=r(2391),l=r(7567),d=r(4768),h=r(95),p=r(4231),f=h("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||a((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=u(n)),s(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},5495:e=>{e.exports={}},9646:(e,t,r)=>{var n=r(4237);e.exports=function(e){return n(e.length)}},6039:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),a=r(8270),s=r(7400),c=r(1805).CONFIGURABLE,u=r(8511),l=r(6407),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,g=n("".slice),m=n("".replace),v=n([].join),y=s&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||c&&e.name!==t)&&(s?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&a(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return a(n,"source")||(n.source=v(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||u(this)}),"toString")},5510:(e,t,r)=>{var n=r(7235),i=Math.abs,o=2220446049250313e-31,a=1/o;e.exports=function(e,t,r,s){var c=+e,u=i(c),l=n(c);if(u<s)return l*function(e){return e+a-a}(u/s/t)*s*t;var d=(1+t/o)*u,h=d-(d-u);return h>r||h!=h?l*(1/0):l*h}},781:(e,t,r)=>{var n=r(5510);e.exports=Math.fround||function(e){return n(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},7235:e=>{e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},917:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},7272:(e,t,r)=>{var n=r(8311),i=TypeError;e.exports=function(e){if(n(e))throw new i("The method doesn't accept regular expressions");return e}},5496:(e,t,r)=>{var n=r(9859),i=r(4229),o=r(5968),a=r(3326),s=r(1017).trim,c=r(1647),u=o("".charAt),l=n.parseFloat,d=n.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!i((function(){l(Object(h))}));e.exports=p?function(e){var t=s(a(e)),r=l(t);return 0===r&&"-"===u(t,0)?-0:r}:l},47:(e,t,r)=>{var n=r(7400),i=r(5968),o=r(266),a=r(4229),s=r(5632),c=r(894),u=r(9195),l=r(2991),d=r(9337),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||a((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!==h({},e)[r]||s(h({},t)).join("")!==i}))?function(e,t){for(var r=l(e),i=arguments.length,a=1,h=c.f,p=u.f;i>a;)for(var g,m=d(arguments[a++]),v=h?f(s(m),h(m)):s(m),y=v.length,E=0;y>E;)g=v[E++],n&&!o(p,m,g)||(r[g]=m[g]);return r}:h},2391:(e,t,r)=>{var n,i=r(1176),o=r(219),a=r(3837),s=r(5977),c=r(8385),u=r(2635),l=r(4399),d="prototype",h="script",p=l("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?m(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):m(n);for(var i=a.length;i--;)delete v[d][a[i]];return v()};s[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[p]=e):r=v(),void 0===t?r:o.f(r,t)}},219:(e,t,r)=>{var n=r(7400),i=r(7137),o=r(1787),a=r(1176),s=r(905),c=r(5632);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},1787:(e,t,r)=>{var n=r(7400),i=r(4394),o=r(7137),a=r(1176),s=r(9310),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=n?o?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=l(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(a(e),t=s(t),a(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7933:(e,t,r)=>{var n=r(7400),i=r(266),o=r(9195),a=r(5358),s=r(905),c=r(9310),u=r(8270),l=r(4394),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},166:(e,t,r)=>{var n=r(7079),i=r(905),o=r(8151).f,a=r(9794),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"===n(e)?function(e){try{return o(e)}catch(e){return a(s)}}(e):o(i(e))}},8151:(e,t,r)=>{var n=r(140),i=r(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,r)=>{var n=r(8270),i=r(6733),o=r(2991),a=r(4399),s=r(7528),c=a("IE_PROTO"),u=Object,l=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},5343:(e,t,r)=>{var n=r(4229),i=r(5052),o=r(7079),a=r(2460),s=Object.isExtensible,c=n((function(){s(1)}));e.exports=c||a?function(e){return!!i(e)&&(!a||"ArrayBuffer"!==o(e))&&(!s||s(e))}:s},1321:(e,t,r)=>{var n=r(5968);e.exports=n({}.isPrototypeOf)},140:(e,t,r)=>{var n=r(5968),i=r(8270),o=r(905),a=r(9540).indexOf,s=r(5977),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(s,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~a(l,r)||c(l,r));return l}},5632:(e,t,r)=>{var n=r(140),i=r(3837);e.exports=Object.keys||function(e){return n(e,i)}},9195:(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},6540:(e,t,r)=>{var n=r(3411),i=r(1176),o=r(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},7664:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(5968),a=r(7567),s=r(5632),c=r(905),u=o(r(9195).f),l=o([].push),d=n&&i((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){for(var r,i=c(t),o=s(i),h=d&&null===a(i),p=o.length,f=0,g=[];p>f;)r=o[f++],n&&!(h?r in i:u(i,r))||l(g,e?[r,i[r]]:i[r]);return g}};e.exports={entries:h(!0),values:h(!1)}},2914:(e,t,r)=>{var n=r(266),i=r(6733),o=r(5052),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&i(r=e.toString)&&!o(s=n(r,e)))return s;if(i(r=e.valueOf)&&!o(s=n(r,e)))return s;if("string"!==t&&i(r=e.toString)&&!o(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},4826:(e,t,r)=>{var n=r(1333),i=r(5968),o=r(8151),a=r(894),s=r(1176),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?c(t,r(e)):t}},6060:(e,t,r)=>{var n=r(1787).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},8115:(e,t,r)=>{var n=r(266),i=r(1176),o=r(6733),a=r(7079),s=r(3466),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===a(e))return n(s,e,t);throw new c("RegExp#exec called on incompatible receiver")}},3466:(e,t,r)=>{var n,i,o=r(266),a=r(5968),s=r(3326),c=r(895),u=r(5650),l=r(3036),d=r(2391),h=r(6407).get,p=r(2926),f=r(461),g=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,y=a("".charAt),E=a("".indexOf),_=a("".replace),S=a("".slice),I=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),b=u.BROKEN_CARET,A=void 0!==/()??/.exec("")[1];(I||A||b||p||f)&&(v=function(e){var t,r,n,i,a,u,l,p=this,f=h(p),O=s(e),C=f.raw;if(C)return C.lastIndex=p.lastIndex,t=o(v,C,O),p.lastIndex=C.lastIndex,t;var T=f.groups,w=b&&p.sticky,R=o(c,p),P=p.source,N=0,D=O;if(w&&(R=_(R,"y",""),-1===E(R,"g")&&(R+="g"),D=S(O,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(O,p.lastIndex-1))&&(P="(?: "+P+")",D=" "+D,N++),r=new RegExp("^(?:"+P+")",R)),A&&(r=new RegExp("^"+P+"$(?!\\s)",R)),I&&(n=p.lastIndex),i=o(m,w?r:p,D),w?i?(i.input=S(i.input,N),i[0]=S(i[0],N),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:I&&i&&(p.lastIndex=p.global?i.index+i[0].length:n),A&&i&&i.length>1&&o(g,i[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&T)for(i.groups=u=d(null),a=0;a<T.length;a++)u[(l=T[a])[0]]=i[l[1]];return i}),e.exports=v},895:(e,t,r)=>{var n=r(1176);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3349:(e,t,r)=>{var n=r(266),i=r(8270),o=r(1321),a=r(895),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!o(s,e)?t:n(a,e)}},5650:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=o||n((function(){return!i("a","y").sticky})),s=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},2926:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},461:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:(e,t,r)=>{var n=r(9650),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},1832:(e,t,r)=>{var n=r(1333),i=r(6616),o=r(95),a=r(7400),s=o("species");e.exports=function(e){var t=n(e);a&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},4555:(e,t,r)=>{var n=r(1787).f,i=r(8270),o=r(95)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},4399:(e,t,r)=>{var n=r(3036),i=r(1441),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5353:(e,t,r)=>{var n=r(9859),i=r(8400),o="__core-js_shared__",a=n[o]||i(o,{});e.exports=a},3036:(e,t,r)=>{var n=r(4231),i=r(5353);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.33.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7942:(e,t,r)=>{var n=r(1176),i=r(7988),o=r(9650),a=r(95)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||o(r=n(s)[a])?t:i(r)}},966:(e,t,r)=>{var n=r(5968),i=r(3329),o=r(3326),a=r(8885),s=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(a(t)),h=i(r),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h))<55296||n>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?s(d,h):n:e?u(d,h,h+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},7456:(e,t,r)=>{var n=r(598);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},6650:(e,t,r)=>{var n=r(5968),i=r(4237),o=r(3326),a=r(3124),s=r(8885),c=n(a),u=n("".slice),l=Math.ceil,d=function(e){return function(t,r,n){var a,d,h=o(s(t)),p=i(r),f=h.length,g=void 0===n?" ":o(n);return p<=f||""===g?h:((d=c(g,l((a=p-f)/g.length))).length>a&&(d=u(d,0,a)),e?h+d:d+h)}};e.exports={start:d(!1),end:d(!0)}},3124:(e,t,r)=>{var n=r(3329),i=r(3326),o=r(8885),a=RangeError;e.exports=function(e){var t=i(o(this)),r="",s=n(e);if(s<0||s===1/0)throw new a("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(r+=t);return r}},9445:(e,t,r)=>{var n=r(1805).PROPER,i=r(4229),o=r(1647);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},1017:(e,t,r)=>{var n=r(5968),i=r(8885),o=r(3326),a=r(1647),s=n("".replace),c=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},4860:(e,t,r)=>{var n=r(6358),i=r(4229),o=r(9859).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},143:(e,t,r)=>{var n=r(5968);e.exports=n(1..valueOf)},3231:(e,t,r)=>{var n=r(3329),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},9123:(e,t,r)=>{var n=r(2066),i=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},7331:(e,t,r)=>{var n=r(3329),i=r(4237),o=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw new o("Wrong length or index");return r}},905:(e,t,r)=>{var n=r(9337),i=r(8885);e.exports=function(e){return n(i(e))}},3329:(e,t,r)=>{var n=r(917);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},4237:(e,t,r)=>{var n=r(3329),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},2991:(e,t,r)=>{var n=r(8885),i=Object;e.exports=function(e){return i(n(e))}},4262:(e,t,r)=>{var n=r(2002),i=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new i("Wrong offset");return r}},2002:(e,t,r)=>{var n=r(3329),i=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new i("The argument can't be less than 0");return t}},2066:(e,t,r)=>{var n=r(266),i=r(5052),o=r(9395),a=r(5300),s=r(2914),c=r(95),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=a(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},9310:(e,t,r)=>{var n=r(2066),i=r(9395);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1601:(e,t,r)=>{var n={};n[r(95)("toStringTag")]="z",e.exports="[object z]"===String(n)},3326:(e,t,r)=>{var n=r(1589),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},6045:e=>{var t=Math.round;e.exports=function(e){var r=t(e);return r<0?0:r>255?255:255&r}},9821:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},2574:(e,t,r)=>{var n=r(3103),i=r(9859),o=r(266),a=r(7400),s=r(8200),c=r(9918),u=r(3816),l=r(7728),d=r(5358),h=r(5762),p=r(2292),f=r(4237),g=r(7331),m=r(4262),v=r(6045),y=r(9310),E=r(8270),_=r(1589),S=r(5052),I=r(9395),b=r(2391),A=r(1321),O=r(6540),C=r(8151).f,T=r(5215),w=r(9996).forEach,R=r(1832),P=r(6616),N=r(1787),D=r(7933),L=r(6407),x=r(835),k=L.get,M=L.set,U=L.enforce,j=N.f,H=D.f,F=i.RangeError,B=u.ArrayBuffer,V=B.prototype,q=u.DataView,G=c.NATIVE_ARRAY_BUFFER_VIEWS,z=c.TYPED_ARRAY_TAG,$=c.TypedArray,Y=c.TypedArrayPrototype,W=c.aTypedArrayConstructor,K=c.isTypedArray,X="BYTES_PER_ELEMENT",Q="Wrong length",Z=function(e,t){W(e);for(var r=0,n=t.length,i=new e(n);n>r;)i[r]=t[r++];return i},J=function(e,t){P(e,t,{configurable:!0,get:function(){return k(this)[t]}})},ee=function(e){var t;return A(V,e)||"ArrayBuffer"===(t=_(e))||"SharedArrayBuffer"===t},te=function(e,t){return K(e)&&!I(t)&&t in e&&p(+t)&&t>=0},re=function(e,t){return t=y(t),te(e,t)?d(2,e[t]):H(e,t)},ne=function(e,t,r){return t=y(t),!(te(e,t)&&S(r)&&E(r,"value"))||E(r,"get")||E(r,"set")||r.configurable||E(r,"writable")&&!r.writable||E(r,"enumerable")&&!r.enumerable?j(e,t,r):(e[t]=r.value,e)};a?(G||(D.f=re,N.f=ne,J(Y,"buffer"),J(Y,"byteOffset"),J(Y,"byteLength"),J(Y,"length")),n({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:re,defineProperty:ne}),e.exports=function(e,t,r){var a=e.match(/\d+/)[0]/8,c=e+(r?"Clamped":"")+"Array",u="get"+e,d="set"+e,p=i[c],y=p,E=y&&y.prototype,_={},I=function(e,t){j(e,t,{get:function(){return function(e,t){var r=k(e);return r.view[u](t*a+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=k(e);i.view[d](t*a+i.byteOffset,r?v(n):n,!0)}(this,t,e)},enumerable:!0})};G?s&&(y=t((function(e,t,r,n){return l(e,E),x(S(t)?ee(t)?void 0!==n?new p(t,m(r,a),n):void 0!==r?new p(t,m(r,a)):new p(t):K(t)?Z(y,t):o(T,y,t):new p(g(t)),e,y)})),O&&O(y,$),w(C(p),(function(e){e in y||h(y,e,p[e])})),y.prototype=E):(y=t((function(e,t,r,n){l(e,E);var i,s,c,u=0,d=0;if(S(t)){if(!ee(t))return K(t)?Z(y,t):o(T,y,t);i=t,d=m(r,a);var h=t.byteLength;if(void 0===n){if(h%a)throw new F(Q);if((s=h-d)<0)throw new F(Q)}else if((s=f(n)*a)+d>h)throw new F(Q);c=s/a}else c=g(t),i=new B(s=c*a);for(M(e,{buffer:i,byteOffset:d,byteLength:s,length:c,view:new q(i)});u<c;)I(e,u++)})),O&&O(y,$),E=y.prototype=b(Y)),E.constructor!==y&&h(E,"constructor",y),U(E).TypedArrayConstructor=y,z&&h(E,z,c);var A=y!==p;_[c]=y,n({global:!0,constructor:!0,forced:A,sham:!G},_),X in y||h(y,X,a),X in E||h(E,X,a),R(c)}):e.exports=function(){}},8200:(e,t,r)=>{var n=r(9859),i=r(4229),o=r(4575),a=r(9918).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,c=n.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},5215:(e,t,r)=>{var n=r(7636),i=r(266),o=r(7988),a=r(2991),s=r(9646),c=r(8403),u=r(8830),l=r(1943),d=r(9098),h=r(9918).aTypedArrayConstructor,p=r(9123);e.exports=function(e){var t,r,f,g,m,v,y,E,_=o(this),S=a(e),I=arguments.length,b=I>1?arguments[1]:void 0,A=void 0!==b,O=u(S);if(O&&!l(O))for(E=(y=c(S,O)).next,S=[];!(v=i(E,y)).done;)S.push(v.value);for(A&&I>2&&(b=n(b,arguments[2])),r=s(S),f=new(h(_))(r),g=d(f),t=0;r>t;t++)m=A?b(S[t],t):S[t],f[t]=g?p(m):+m;return f}},1441:(e,t,r)=>{var n=r(5968),i=0,o=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},6969:(e,t,r)=>{var n=r(4860);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7137:(e,t,r)=>{var n=r(7400),i=r(4229);e.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1180:(e,t,r)=>{var n=r(9859),i=r(6733),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},95:(e,t,r)=>{var n=r(9859),i=r(3036),o=r(8270),a=r(1441),s=r(4860),c=r(6969),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||a;e.exports=function(e){return o(l,e)||(l[e]=s&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2994:(e,t,r)=>{var n=r(3103),i=r(4745),o=r(4229),a=r(3816),s=r(1176),c=r(3231),u=r(4237),l=r(7942),d=a.ArrayBuffer,h=a.DataView,p=h.prototype,f=i(d.prototype.slice),g=i(p.getUint8),m=i(p.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(s(this),e);for(var r=s(this).byteLength,n=c(e,r),i=c(void 0===t?r:t,r),o=new(l(this,d))(u(i-n)),a=new h(this),p=new h(o),v=0;n<i;)m(p,v++,g(a,n++));return o}})},9529:(e,t,r)=>{var n=r(3103),i=r(9540).includes,o=r(4229),a=r(9736);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},5735:(e,t,r)=>{var n=r(905),i=r(9736),o=r(5495),a=r(6407),s=r(1787).f,c=r(2707),u=r(3684),l=r(4231),d=r(7400),h="Array Iterator",p=a.set,f=a.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(r){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{s(g,"name",{value:"values"})}catch(e){}},3108:(e,t,r)=>{var n=r(3103),i=r(3143).left,o=r(6038),a=r(6358);n({target:"Array",proto:!0,forced:!r(8801)&&a>79&&a<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},8836:(e,t,r)=>{var n=r(3103),i=r(5496);n({target:"Number",stat:!0,forced:Number.parseFloat!==i},{parseFloat:i})},1657:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(3329),a=r(143),s=r(3124),c=r(4229),u=RangeError,l=String,d=Math.floor,h=i(s),p=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},v=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+h("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,s=a(this),c=o(e),d=[0,0,0,0,0,0],f="",E="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(f="-",s=-s),s>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(s*g(2,69,1))-69)<0?s*g(2,-t,1):s/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(d,0,r),n=c;n>=7;)m(d,1e7,0),n-=7;for(m(d,g(10,n,1),0),n=t-1;n>=23;)v(d,1<<23),n-=23;v(d,1<<n),m(d,1,1),v(d,2),E=y(d)}else m(d,0,r),m(d,1<<-t,0),E=y(d)+h("0",c);return c>0?f+((i=E.length)<=c?"0."+h("0",c-i)+E:p(E,0,i-c)+"."+p(E,i-c)):f+E}})},3105:(e,t,r)=>{var n=r(3103),i=r(47);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},5883:(e,t,r)=>{var n=r(3103),i=r(7664).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},1804:(e,t,r)=>{var n=r(3103),i=r(9003),o=r(2324);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},7890:(e,t,r)=>{var n=r(3103),i=r(7664).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},7368:(e,t,r)=>{var n=r(7400),i=r(9859),o=r(5968),a=r(6541),s=r(835),c=r(5762),u=r(8151).f,l=r(1321),d=r(8311),h=r(3326),p=r(3349),f=r(5650),g=r(6060),m=r(4768),v=r(4229),y=r(8270),E=r(6407).enforce,_=r(1832),S=r(95),I=r(2926),b=r(461),A=S("match"),O=i.RegExp,C=O.prototype,T=i.SyntaxError,w=o(C.exec),R=o("".charAt),P=o("".replace),N=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,k=/a/g,M=new O(x)!==x,U=f.MISSED_STICKY,j=f.UNSUPPORTED_Y;if(a("RegExp",n&&(!M||U||I||b||v((function(){return k[A]=!1,O(x)!==x||O(k)===k||"/a/i"!==String(O(x,"i"))}))))){for(var H=function(e,t){var r,n,i,o,a,u,f=l(C,this),g=d(e),m=void 0===t,v=[],_=e;if(!f&&g&&m&&e.constructor===H)return e;if((g||l(C,e))&&(e=e.source,m&&(t=p(_))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),_=e,I&&"dotAll"in x&&(n=!!t&&N(t,"s")>-1)&&(t=P(t,/s/g,"")),r=t,U&&"sticky"in x&&(i=!!t&&N(t,"y")>-1)&&j&&(t=P(t,/y/g,"")),b&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=R(e,n)))t+=R(e,++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:w(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(a,l))throw new T("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],v=o[1]),a=s(O(e,t),f?this:C,H),(n||i||v.length)&&(u=E(a),n&&(u.dotAll=!0,u.raw=H(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=R(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+R(e,++n);return i}(e),r)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==_)try{c(a,"source",""===_?"(?:)":_)}catch(e){}return a},F=u(O),B=0;F.length>B;)g(H,O,F[B++]);C.constructor=H,H.prototype=C,m(i,"RegExp",H,{constructor:!0})}_("RegExp")},7950:(e,t,r)=>{var n=r(3103),i=r(3466);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},8233:(e,t,r)=>{var n=r(1805).PROPER,i=r(4768),o=r(1176),a=r(3326),s=r(4229),c=r(3349),u="toString",l=RegExp.prototype[u],d=s((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),h=n&&l.name!==u;(d||h)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+a(e.source)+"/"+a(c(e))}),{unsafe:!0})},6708:(e,t,r)=>{var n,i=r(3103),o=r(4745),a=r(7933).f,s=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".endsWith),f=o("".slice),g=Math.min,m=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=a(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(s(r),n),o=c(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},1235:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(7272),a=r(8885),s=r(3326),c=r(8127),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},4069:(e,t,r)=>{var n=r(266),i=r(4954),o=r(1176),a=r(9650),s=r(4237),c=r(3326),u=r(8885),l=r(5300),d=r(6637),h=r(8115);i("match",(function(e,t,r){return[function(t){var r=u(this),i=a(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),a=r(t,n,i);if(a.done)return a.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var l,p=[],f=0;null!==(l=h(n,i));){var g=c(l[0]);p[f]=g,""===g&&(n.lastIndex=d(i,s(n.lastIndex),u)),f++}return 0===f?null:p}]}))},5734:(e,t,r)=>{var n=r(3103),i=r(6650).start;n({target:"String",proto:!0,forced:r(7456)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5940:(e,t,r)=>{var n=r(3171),i=r(266),o=r(5968),a=r(4954),s=r(4229),c=r(1176),u=r(6733),l=r(9650),d=r(3329),h=r(4237),p=r(3326),f=r(8885),g=r(6637),m=r(5300),v=r(17),y=r(8115),E=r(95)("replace"),_=Math.max,S=Math.min,I=o([].concat),b=o([].push),A=o("".indexOf),O=o("".slice),C="$0"==="a".replace(/./,"$0"),T=!!/./[E]&&""===/./[E]("a","$0");a("replace",(function(e,t,r){var o=T?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:m(e,E);return o?i(o,e,n,r):i(t,p(n),e,r)},function(e,i){var a=c(this),s=p(e);if("string"==typeof i&&-1===A(i,o)&&-1===A(i,"$<")){var l=r(t,a,s,i);if(l.done)return l.value}var f=u(i);f||(i=p(i));var m,E=a.global;E&&(m=a.unicode,a.lastIndex=0);for(var C,T=[];null!==(C=y(a,s))&&(b(T,C),E);)""===p(C[0])&&(a.lastIndex=g(s,h(a.lastIndex),m));for(var w,R="",P=0,N=0;N<T.length;N++){for(var D,L=p((C=T[N])[0]),x=_(S(d(C.index),s.length),0),k=[],M=1;M<C.length;M++)b(k,void 0===(w=C[M])?w:String(w));var U=C.groups;if(f){var j=I([L],k,x,s);void 0!==U&&b(j,U),D=p(n(i,void 0,j))}else D=v(L,s,x,k,U,i);x>=P&&(R+=O(s,P,x)+D,P=x+L.length)}return R+O(s,P)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||T)},8319:(e,t,r)=>{var n=r(3171),i=r(266),o=r(5968),a=r(4954),s=r(1176),c=r(9650),u=r(8311),l=r(8885),d=r(7942),h=r(6637),p=r(4237),f=r(3326),g=r(5300),m=r(9794),v=r(8115),y=r(3466),E=r(5650),_=r(4229),S=E.UNSUPPORTED_Y,I=4294967295,b=Math.min,A=[].push,O=o(/./.exec),C=o(A),T=o("".slice);a("split",(function(e,t,r){var o;return o="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),a=void 0===r?I:r>>>0;if(0===a)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,a);for(var s,c,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,p+"g");(s=i(y,v,o))&&!((c=v.lastIndex)>g&&(C(h,T(o,g,s.index)),s.length>1&&s.index<o.length&&n(A,h,m(s,1)),d=s[0].length,g=c,h.length>=a));)v.lastIndex===s.index&&v.lastIndex++;return g===o.length?!d&&O(v,"")||C(h,""):C(h,T(o,g)),h.length>a?m(h,0,a):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),a=c(t)?void 0:g(t,e);return a?i(a,t,n,r):i(o,f(n),t,r)},function(e,n){var i=s(this),a=f(e),c=r(o,i,a,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(S?"g":"y"),m=new u(S?"^(?:"+i.source+")":i,g),y=void 0===n?I:n>>>0;if(0===y)return[];if(0===a.length)return null===v(m,a)?[a]:[];for(var E=0,_=0,A=[];_<a.length;){m.lastIndex=S?0:_;var O,w=v(m,S?T(a,_):a);if(null===w||(O=b(p(m.lastIndex+(S?_:0)),a.length))===E)_=h(a,_,l);else{if(C(A,T(a,E,_)),A.length===y)return A;for(var R=1;R<=w.length-1;R++)if(C(A,w[R]),A.length===y)return A;_=E=O}}return C(A,T(a,E)),A}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),S)},4112:(e,t,r)=>{var n,i=r(3103),o=r(4745),a=r(7933).f,s=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".startsWith),f=o("".slice),g=Math.min,m=d("startsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=a(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(e){var t=c(l(this));u(e);var r=s(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return p?p(t,n,r):f(t,r,r+n.length)===n}})},5794:(e,t,r)=>{var n=r(3103),i=r(1017).trim;n({target:"String",proto:!0,forced:r(9445)("trim")},{trim:function(){return i(this)}})},8857:(e,t,r)=>{var n=r(9918),i=r(7065),o=r(9123),a=r(1589),s=r(266),c=r(5968),u=r(4229),l=n.aTypedArray,d=n.exportTypedArrayMethod,h=c("".slice);d("fill",(function(e){var t=arguments.length;l(this);var r="Big"===h(a(this),0,3)?o(e):+e;return s(i,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},5688:(e,t,r)=>{var n=r(9859),i=r(266),o=r(9918),a=r(9646),s=r(4262),c=r(2991),u=r(4229),l=n.RangeError,d=n.Int8Array,h=d&&d.prototype,p=h&&h.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,m=!u((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),v=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=s(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(m)return i(p,this,r,t);var n=this.length,o=a(r),u=0;if(o+t>n)throw new l("Wrong length");for(;u<o;)this[t+u]=r[u++]}),!m||v)},315:(e,t,r)=>{var n=r(9859),i=r(4745),o=r(4229),a=r(7111),s=r(3867),c=r(9918),u=r(2671),l=r(8506),d=r(6358),h=r(9811),p=c.aTypedArray,f=c.exportTypedArrayMethod,g=n.Uint16Array,m=g&&i(g.prototype.sort),v=!(!m||o((function(){m(new g(2),null)}))&&o((function(){m(new g(2),{})}))),y=!!m&&!o((function(){if(d)return d<74;if(u)return u<67;if(l)return!0;if(h)return h<602;var e,t,r=new g(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(m(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));f("sort",(function(e){return void 0!==e&&a(e),y?m(this,e):s(p(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!y||v)},556:(e,t,r)=>{var n=r(9859),i=r(3171),o=r(9918),a=r(4229),s=r(1909),c=n.Int8Array,u=o.aTypedArray,l=o.exportTypedArrayMethod,d=[].toLocaleString,h=!!c&&a((function(){d.call(new c(1))}));l("toLocaleString",(function(){return i(d,h?s(u(this)):u(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])})))},3675:(e,t,r)=>{r(2574)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},6418:(e,t,r)=>{var n,i=r(8476),o=r(9859),a=r(5968),s=r(8312),c=r(5926),u=r(9789),l=r(3370),d=r(5052),h=r(6407).enforce,p=r(4229),f=r(1180),g=Object,m=Array.isArray,v=g.isExtensible,y=g.isFrozen,E=g.isSealed,_=g.freeze,S=g.seal,I={},b={},A=!o.ActiveXObject&&"ActiveXObject"in o,O=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},C=u("WeakMap",O,l),T=C.prototype,w=a(T.set);if(f)if(A){n=l.getConstructor(O,"WeakMap",!0),c.enable();var R=a(T.delete),P=a(T.has),N=a(T.get);s(T,{delete:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),R(this,e)||t.frozen.delete(e)}return R(this,e)},has:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)||t.frozen.has(e)}return P(this,e)},get:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)?N(this,e):t.frozen.get(e)}return N(this,e)},set:function(e,t){if(d(e)&&!v(e)){var r=h(this);r.frozen||(r.frozen=new n),P(this,e)?w(this,e,t):r.frozen.set(e,t)}else w(this,e,t);return this}})}else i&&p((function(){var e=_([]);return w(new C,e,1),!y(e)}))&&s(T,{set:function(e,t){var r;return m(e)&&(y(e)?r=I:E(e)&&(r=b)),w(this,e,t),r===I&&_(e),r===b&&S(e),this}})},2356:(e,t,r)=>{r(6418)},1939:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),a=r(6570),s=r(5762),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},6886:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),a=r(5735),s=r(5762),c=r(95),u=c("iterator"),l=c("toStringTag"),d=a.values,h=function(e,t){if(e){if(e[u]!==d)try{s(e,u,d)}catch(t){e[u]=d}if(e[l]||s(e,l,t),i[t])for(var r in a)if(e[r]!==a[r])try{s(e,r,a[r])}catch(t){e[r]=a[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};r.r(e),r.d(e,{FunctionToString:()=>it,InboundFilters:()=>Ze,LinkedErrors:()=>Dr});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>Ht,Dedupe:()=>Vt,GlobalHandlers:()=>sr,HttpContext:()=>pr,LinkedErrors:()=>_r,TryCatch:()=>Ar}),r(5735),r(3105),r(6886),r(9529),r(7950),r(1235),r(1939);var n=/android/i;function i(){var e=window.navigator.userAgent;return!!e&&Boolean((e.includes("Safari")&&(e.includes("iPhone")||e.includes("iPad"))&&!e.includes("Trident")||e.includes("AppleWebKit")&&!(e.includes("Android")||e.includes("Linux")||e.includes("Trident"))&&(e.includes("Mobile")||e.includes("iPhone")||e.includes("iPad"))&&!e.includes("Macintosh")&&!e.includes("Windows"))&&!(e.includes("Chrome")||e.includes("CriOS")||e.includes("Edg")))}function o(){var e=window.navigator.userAgent;return!!e&&Boolean((e.includes("Safari")||e.includes("AppleWebKit"))&&(e.includes("Macintosh")||e.includes("Windows"))&&!e.includes("iPhone")&&!e.includes("iPad")&&!e.includes("Chrome")&&!e.includes("Edg")&&!e.includes("Firefox"))}var a={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);null!==t&&(n[e]=t)})),n},isAndroid:function(){return n.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},get isSecureContext(){return window.isSecureContext},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},get supportsCryptoDigest(){var e;return void 0!==(null===(e=crypto.subtle)||void 0===e?void 0:e.digest)},get supportsDocumentVisibilityState(){return void 0!==document.visibilityState},get supportsPerformanceEntries(){return"performance"in window&&"function"==typeof window.performance.getEntriesByType},get supportsSendBeacon(){return void 0!==window.navigator.sendBeacon},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&([e]=window.navigator.languages),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};r(8233);const s="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function c(e){return e&&e.Math==Math?e:void 0}const u="object"==typeof globalThis&&c(globalThis)||"object"==typeof window&&c(window)||"object"==typeof self&&c(self)||"object"==typeof r.g&&c(r.g)||function(){return this}()||{};function l(){return u}function d(e,t,r){const n=r||u,i=n.__SENTRY__=n.__SENTRY__||{};return i[e]||(i[e]=t())}const h=["debug","info","warn","error","log","assert","trace"],p={};function f(e){if(!("console"in u))return e();const t=u.console,r={},n=Object.keys(p);n.forEach((e=>{const n=p[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const g=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return s?h.forEach((r=>{t[r]=(...t)=>{e&&f((()=>{u.console[r](`Sentry Logger [${r}]:`,...t)}))}})):h.forEach((e=>{t[e]=()=>{}})),t}(),m=Object.prototype.toString;function v(e){switch(m.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return T(e,Error)}}function y(e,t){return m.call(e)===`[object ${t}]`}function E(e){return y(e,"ErrorEvent")}function _(e){return y(e,"DOMError")}function S(e){return y(e,"String")}function I(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function b(e){return null===e||I(e)||"object"!=typeof e&&"function"!=typeof e}function A(e){return y(e,"Object")}function O(e){return"undefined"!=typeof Event&&T(e,Event)}function C(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function T(e,t){try{return e instanceof t}catch(e){return!1}}function w(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const R=l(),P=80;function N(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let o=0,a=0;const s=" > ",c=s.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||P;for(;r&&o++<n&&(u=D(r,l),!("html"===u||o>1&&a+i.length*c+u.length>=d));)i.push(u),a+=u.length,r=r.parentNode;return i.reverse().join(s)}catch(e){return"<unknown>"}}function D(e,t){const r=e,n=[];let i,o,a,s,c;if(!r||!r.tagName)return"";if(R.HTMLElement&&r instanceof HTMLElement&&r.dataset&&r.dataset.sentryComponent)return r.dataset.sentryComponent;n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&S(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)a=l[c],s=r.getAttribute(a),s&&n.push(`[${a}="${s}"]`);return n.join("")}function L(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function x(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{w(n)?r.push("[VueViewModel]"):r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function k(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!S(e)&&(y(t,"RegExp")?t.test(e):!!S(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function M(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);"function"==typeof i&&j(i,n),e[t]=i}function U(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){s&&g.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function j(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,U(e,"__sentry_original__",t)}catch(e){}}function H(e){return e.__sentry_original__}function F(e){if(v(e))return{message:e.message,name:e.name,stack:e.stack,...V(e)};if(O(e)){const t={type:e.type,target:B(e.target),currentTarget:B(e.currentTarget),...V(e)};return"undefined"!=typeof CustomEvent&&T(e,CustomEvent)&&(t.detail=e.detail),t}return e}function B(e){try{return"undefined"!=typeof Element&&T(e,Element)?N(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function V(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function q(e){return G(e,new Map)}function G(e,t){if(function(e){if(!A(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=G(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(G(e,t))})),n}return e}function z(){const e=u,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function $(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Y(e){const{message:t,event_id:r}=e;if(t)return t;const n=$(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function W(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function K(e,t){const r=$(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function X(e){if(e&&e.__sentry_captured__)return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}const Q="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var Z;function J(e){return new te((t=>{t(e)}))}function ee(e){return new te(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Z||(Z={}));class te{constructor(e){te.prototype.__init.call(this),te.prototype.__init2.call(this),te.prototype.__init3.call(this),te.prototype.__init4.call(this),this._state=Z.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new te(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new te(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(Z.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Z.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Z.PENDING&&(C(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Z.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Z.RESOLVED&&e[1](this._value),this._state===Z.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function re(){return d("globalEventProcessors",(()=>[]))}function ne(e){re().push(e)}function ie(e,t,r,n=0){return new te(((i,o)=>{const a=e[n];if(null===t||"function"!=typeof a)i(t);else{const s=a({...t},r);Q&&a.id&&null===s&&g.log(`Event processor "${a.id}" dropped event`),C(s)?s.then((t=>ie(e,t,r,n+1).then(i))).then(null,o):ie(e,s,r,n+1).then(i).then(null,o)}}))}const oe=1e3;function ae(){return Date.now()/oe}const se=function(){const{performance:e}=u;if(!e||!e.now)return ae;const t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/oe}();let ce;(()=>{const{performance:e}=u;if(!e||!e.now)return void(ce="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,o=i<t,a=e.timing&&e.timing.navigationStart,s="number"==typeof a?Math.abs(a+r-n):t;o||s<t?i<=s?(ce="timeOrigin",e.timeOrigin):ce="navigationStart":ce="dateNow"})();const ue="production";function le(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||se(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:z()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const de=/\(error: (.*)\)/,he=/captureMessage|captureException/;const pe="<anonymous>";function fe(e){try{return e&&"function"==typeof e&&e.name||pe}catch(e){return pe}}function ge(e,t=100,r=1/0){try{return ve("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function me(e,t=3,r=102400){const n=ge(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?me(e,t-1,r):n;var i}function ve(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[a,s]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(w(t))return"[VueViewModel]";if(function(e){return A(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${fe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(a(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return ve("",d.toJSON(),l-1,i,o)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const f=F(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(p>=i){h[e]="[MaxProperties ~]";break}const t=f[e];h[e]=ve(e,t,l-1,i,o),p++}return s(t),h}const ye=1;function Ee(e){const{spanId:t,traceId:r}=e.spanContext(),{data:n,op:i,parent_span_id:o,status:a,tags:s,origin:c}=_e(e);return q({data:n,op:i,parent_span_id:o,span_id:t,status:a,tags:s,trace_id:r,origin:c})}function _e(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}const Se=new WeakMap;const Ie=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function be(e,t){return Be().captureEvent(e,t)}function Ae(e,t){Be().addBreadcrumb(e,t)}function Oe(){return Be().getClient()}function Ce(e){return e.transaction}function Te(e,t,r){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=r&&r.getUser()||{},a=q({environment:n.environment||ue,release:n.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function we(e){const t=Oe();if(!t)return{};const r=Te(_e(e).trace_id||"",t,Be().getScope()),n=Ce(e);if(!n)return r;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:a}=n.metadata;null!=o&&(r.sample_rate=`${o}`);const s=_e(n);return a&&"url"!==a&&(r.transaction=s.description),r.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return Boolean(t&ye)}(n)),t.emit&&t.emit("createDsc",r),r}function Re(e,t){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:r,tags:n,user:i,contexts:o,level:a,transactionName:s}=t,c=q(r);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=q(n);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=q(i);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=q(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),a&&(e.level=a),s&&(e.transaction=s)}(e,t),n&&function(e,t){e.contexts={trace:Ee(t),...e.contexts};const r=Ce(t);if(r){e.sdkProcessingMetadata={dynamicSamplingContext:we(t),...e.sdkProcessingMetadata};const n=_e(r).description;n&&(e.tags={transaction:n,...e.tags})}}(e,n),function(e,t){var r;e.fingerprint=e.fingerprint?(r=e.fingerprint,Array.isArray(r)?r:[r]):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function Pe(e,t){const{extra:r,tags:n,user:i,contexts:o,level:a,sdkProcessingMetadata:s,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:f}=t;Ne(e,"extra",r),Ne(e,"tags",n),Ne(e,"user",i),Ne(e,"contexts",o),Ne(e,"sdkProcessingMetadata",s),a&&(e.level=a),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function Ne(e,t,r){if(r&&Object.keys(r).length){e[t]={...e[t]};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[t][n]=r[n])}}let De;class Le{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=xe()}static clone(e){return e?e.clone():new Le}clone(){const e=new Le;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&le(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Le){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(A(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=xe(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:ae(),...e},i=this._breadcrumbs;return i.push(n),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:r,_tags:n,_extra:i,_user:o,_level:a,_fingerprint:s,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:r,tags:n,extra:i,user:o,level:a,fingerprint:s||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:h}}applyToEvent(e,t={},r=[]){return Re(e,this.getScopeData()),ie([...r,...re(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:z();if(!this._client)return g.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r&&r.event_id?r.event_id:z();if(!this._client)return g.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:z();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function xe(){return{traceId:z(),spanId:z().substring(16)}}const ke="7.111.0",Me=parseFloat(ke),Ue=100;class je{constructor(e,t,r,n=Me){let i,o;this._version=n,t?i=t:(i=new Le,i.setClient(e)),r?o=r:(o=new Le,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let r;try{r=e(t)}catch(e){throw this.popScope(),e}return C(r)?r.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:z(),n=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:n,...t,event_id:r}),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:z(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n}),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:z();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...t,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Ue}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const a={timestamp:ae(),...e},s=i?f((()=>i(a,t))):a;null!==s&&(n.emit&&n.emit("beforeAddBreadcrumb",s,t),r.addBreadcrumb(s,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Fe(this);try{e(this)}finally{Fe(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Q&&g.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return Q&&!r&&(this.getClient()?g.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):g.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let r={};"ok"===e.status&&(r={status:"exited"}),le(e,r)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=ue}=r&&r.getOptions()||{},{userAgent:o}=u.navigator||{},a=function(e){const t=se(),r={sid:z(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return q({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&le(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),s=t.getSession&&t.getSession();return s&&"ok"===s.status&&le(s,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_callExtensionMethod(e,...t){const r=He().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);Q&&g.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function He(){return u.__SENTRY__=u.__SENTRY__||{extensions:{},hub:void 0},u}function Fe(e){const t=He(),r=Ve(t);return qe(t,e),r}function Be(){const e=He();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=He()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Ve(e).isOlderThan(Me)||qe(e,new je),Ve(e);var t}(e)}function Ve(e){return d("hub",(()=>new je),e)}function qe(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const Ge=[];function ze(e,t){for(const r of t)r&&r.afterAllSetup&&r.afterAllSetup(e)}function $e(e,t,r){if(r[t.name])Q&&g.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===Ge.indexOf(t.name)&&(t.setupOnce(ne,Be),Ge.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign(((t,n)=>r(t,n,e)),{id:t.name});e.addEventProcessor(n)}Q&&g.log(`Integration installed: ${t.name}`)}}function Ye(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}const We=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Ke=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Xe="InboundFilters",Qe=(e={})=>({name:Xe,setupOnce(){},processEvent(t,r,n){const i=n.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:We],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Ke],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(Q&&g.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Y(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let r;e.message&&t.push(e.message);try{r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`)),Q&&0===t.length&&g.error(`Could not extract message for event ${Y(e)}`),t}(e).some((e=>k(e,t)))}(e,t.ignoreErrors)?(Q&&g.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Y(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&k(r,t)}(e,t.ignoreTransactions)?(Q&&g.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Y(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=Je(e);return!!r&&k(r,t)}(e,t.denyUrls)?(Q&&g.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Y(e)}.\nUrl: ${Je(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=Je(e);return!r||k(r,t)}(e,t.allowUrls)&&(Q&&g.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Y(e)}.\nUrl: ${Je(e)}`),!0)}(t,o)?null:t}}),Ze=Ye(Xe,Qe);function Je(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return Q&&g.error(`Cannot extract url for event ${Y(e)}`),null}}let et;const tt="FunctionToString",rt=new WeakMap,nt=()=>({name:tt,setupOnce(){et=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=H(this),r=rt.has(Oe())&&void 0!==t?t:this;return et.apply(r,e)}}catch(e){}},setup(e){rt.set(e,!0)}}),it=Ye(tt,nt),ot={},at={};function st(e,t){ot[e]=ot[e]||[],ot[e].push(t)}function ct(e,t){at[e]||(t(),at[e]=!0)}function ut(e,t){const r=e&&ot[e];if(r)for(const n of r)try{n(t)}catch(t){s&&g.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${fe(n)}\nError:`,t)}}function lt(){"console"in u&&h.forEach((function(e){e in u.console&&M(u.console,e,(function(t){return p[e]=t,function(...t){ut("console",{args:t,level:e});const r=p[e];r&&r.apply(u.console,t)}}))}))}const dt=u,ht=1e3;let pt,ft,gt;function mt(){if(!dt.document)return;const e=ut.bind(null,"dom"),t=vt(e,!0);dt.document.addEventListener("click",t,!1),dt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=dt[t]&&dt[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(M(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},a=o[r]=o[r]||{refCount:0};if(!a.handler){const n=vt(e);a.handler=n,t.call(this,r,n,i)}a.refCount++}catch(e){}return t.call(this,r,n,i)}})),M(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}function vt(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(e){return null}}(r);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;U(r,"_sentryCaptured",!0),n&&!n._sentryId&&U(n,"_sentryId",z());const i="keypress"===r.type?"input":r.type;(function(e){if(e.type!==ft)return!1;try{if(!e.target||e.target._sentryId!==gt)return!1}catch(e){}return!0})(r)||(e({event:r,name:i,global:t}),ft=r.type,gt=n?n._sentryId:void 0),clearTimeout(pt),pt=dt.setTimeout((()=>{gt=void 0,ft=void 0}),ht)}}const yt=u,Et="__sentry_xhr_v3__";function _t(){if(!yt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;M(e,"open",(function(e){return function(...t){const r=Date.now(),n=S(t[0])?t[0].toUpperCase():void 0,i=function(e){if(S(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!n||!i)return e.apply(this,t);this[Et]={method:n,url:i,request_headers:{}},"POST"===n&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[Et];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}ut("xhr",{args:[n,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?M(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),M(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[Et];return i&&S(r)&&S(n)&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),M(e,"send",(function(e){return function(...t){const r=this[Et];return r?(void 0!==t[0]&&(r.body=t[0]),ut("xhr",{args:[r.method,r.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)):e.apply(this,t)}}))}const St=l();function It(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function bt(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in St))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(It(St.fetch))return!0;let e=!1;const t=St.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=It(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){s&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&M(u,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:Ot(t),method:At(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Ot(t),method:At(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return ut("fetch",{...i}),e.apply(u,t).then((e=>(ut("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw ut("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}))}function At(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Ot(e){return"string"==typeof e?e:e?At(e,"url")?e.url:e.toString?e.toString():"":""}const Ct=l(),Tt=u;let wt;function Rt(){if(!function(){const e=Ct.chrome,t=e&&e.app&&e.app.runtime,r="history"in Ct&&!!Ct.history.pushState&&!!Ct.history.replaceState;return!t&&r}())return;const e=Tt.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=wt,t=String(r);wt=t,ut("history",{from:e,to:t})}return e.apply(this,t)}}Tt.onpopstate=function(...t){const r=Tt.location.href,n=wt;if(wt=r,ut("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},M(Tt.history,"pushState",t),M(Tt.history,"replaceState",t)}const Pt=["fatal","error","warning","log","info","debug"];function Nt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}const Dt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Lt=u;let xt=0;function kt(){return xt>0}function Mt(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(H(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>Mt(e,t)));return e.apply(this,i)}catch(e){throw xt++,setTimeout((()=>{xt--})),function(...e){const t=Be();if(2===e.length){const[r,n]=e;return r?t.withScope((()=>(t.getStackTop().scope=r,n(r)))):t.withScope(n)}t.withScope(e[0])}((r=>{var i;r.addEventProcessor((e=>(t.mechanism&&(W(e,void 0,void 0),K(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,Be().captureException(i,function(e){if(e)return function(e){return e instanceof Le||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ie.includes(e)))}(e)?{captureContext:e}:e}(undefined))})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}j(n,e),U(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const Ut="Breadcrumbs",jt=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Ut,setupOnce(){},setup(e){var r;t.console&&function(e){const t="console";st(t,e),ct(t,lt)}(function(e){return function(t){if(Oe()!==e)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,"warn"===n?"warning":Pt.includes(n)?n:"log"),message:x(t.args," ")};var n;if("assert"===t.level){if(!1!==t.args[0])return;r.message=`Assertion failed: ${x(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1)}Ae(r,{input:t.args,level:t.level})}}(e)),t.dom&&(r=function(e,t){return function(r){if(Oe()!==e)return;let n,i,o="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>1024&&(Dt&&g.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=1024),"string"==typeof o&&(o=[o]);try{const e=r.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;n=N(t,{keyAttrs:o,maxStringLength:a}),i=function(e){if(!R.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){n="<unknown>"}if(0===n.length)return;const s={category:`ui.${r.name}`,message:n};i&&(s.data={"ui.component_name":i}),Ae(s,{event:r.event,name:r.name,global:r.global})}}(e,t.dom),st("dom",r),ct("dom",mt)),t.xhr&&function(e){st("xhr",e),ct("xhr",_t)}(function(e){return function(t){if(Oe()!==e)return;const{startTimestamp:r,endTimestamp:n}=t,i=t.xhr[Et];if(!r||!n||!i)return;const{method:o,url:a,status_code:s,body:c}=i;Ae({category:"xhr",data:{method:o,url:a,status_code:s},type:"http"},{xhr:t.xhr,input:c,startTimestamp:r,endTimestamp:n})}}(e)),t.fetch&&function(e){const t="fetch";st(t,e),ct(t,bt)}(function(e){return function(t){if(Oe()!==e)return;const{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Ae({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:r,endTimestamp:n});else{const e=t.response;Ae({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:r,endTimestamp:n})}}}(e)),t.history&&function(e){const t="history";st(t,e),ct(t,Rt)}(function(e){return function(t){if(Oe()!==e)return;let r=t.from,n=t.to;const i=Nt(Lt.location.href);let o=r?Nt(r):void 0;const a=Nt(n);o&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Ae({category:"navigation",data:{from:r,to:n}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Oe()===e&&Ae({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Y(t)},{event:t})}}(e))}}},Ht=Ye(Ut,jt),Ft="Dedupe",Bt=()=>{let e;return{name:Ft,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!Gt(e,t)&&!!qt(e,t))))}(e,t)||!!function(e,t){const r=zt(t),n=zt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!Gt(e,t)&&!!qt(e,t)))}(e,t))}(t,e))return Dt&&g.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},Vt=Ye(Ft,Bt);function qt(e,t){let r=$t(e),n=$t(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function Gt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function zt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function $t(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}let Yt=null;function Wt(){Yt=u.onerror,u.onerror=function(e,t,r,n,i){return ut("error",{column:n,error:i,line:r,msg:e,url:t}),!(!Yt||Yt.__SENTRY_LOADER__)&&Yt.apply(this,arguments)},u.onerror.__SENTRY_INSTRUMENTED__=!0}let Kt=null;function Xt(){Kt=u.onunhandledrejection,u.onunhandledrejection=function(e){return ut("unhandledrejection",e),!(Kt&&!Kt.__SENTRY_LOADER__)||Kt.apply(this,arguments)},u.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Qt(e,t){const r=Jt(e,t),n={type:t&&t.name,value:tr(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Zt(e,t){return{exception:{values:[Qt(e,t)]}}}function Jt(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(er.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const er=/Minified React error #\d+;/i;function tr(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function rr(e,t,r,n,i){let o;if(E(t)&&t.error)return Zt(e,t.error);if(_(t)||y(t,"DOMException")){const i=t;if("stack"in t)o=Zt(e,t);else{const t=i.name||(_(i)?"DOMError":"DOMException"),a=i.message?`${t}: ${i.message}`:t;o=nr(e,a,r,n),W(o,a)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return v(t)?Zt(e,t):A(t)||O(t)?(o=function(e,t,r,n){const i=Oe(),o=i&&i.getOptions().normalizeDepth,a={exception:{values:[{type:O(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:ir(t,{isUnhandledRejection:n})}]},extra:{__serialized__:me(t,o)}};if(r){const t=Jt(e,r);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,r,i),K(o,{synthetic:!0}),o):(o=nr(e,t,r,n),W(o,`${t}`,void 0),K(o,{synthetic:!0}),o)}function nr(e,t,r,n){const i={};if(n&&r){const n=Jt(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(I(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return i.logentry={message:e,params:r},i}return i.message=t,i}function ir(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(F(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return L(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:L(n,t)}return""}(e),n=t?"promise rejection":"exception";return E(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:O(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}const or="GlobalHandlers",ar=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:or,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){!function(t){const r="error";st(r,(t=>{const{stackParser:r,attachStacktrace:n}=lr();if(Oe()!==e||kt())return;const{msg:i,url:o,line:a,column:s,error:c}=t,u=void 0===c&&S(i)?function(e,t,r,n){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=E(e)?e.message:e,a="Error";const s=o.match(i);s&&(a=s[1],o=s[2]);return cr({exception:{values:[{type:a,value:o}]}},t,r,n)}(i,o,a,s):cr(rr(r,c||i,void 0,n,!1),o,a,s);u.level="error",be(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),ct(r,Wt)}()}(e),ur("onerror")),t.onunhandledrejection&&(function(e){!function(t){const r="unhandledrejection";st(r,(t=>{const{stackParser:r,attachStacktrace:n}=lr();if(Oe()!==e||kt())return;const i=function(e){if(b(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),o=b(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:rr(r,i,void 0,n,!0);o.level="error",be(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})),ct(r,Xt)}()}(e),ur("onunhandledrejection"))}}},sr=Ye(or,ar);function cr(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},c=s.frames=s.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=S(t)&&t.length>0?t:function(){try{return R.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function ur(e){Dt&&g.log(`Global Handler attached: ${e}`)}function lr(){const e=Oe();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const dr="HttpContext",hr=()=>({name:dr,setupOnce(){},preprocessEvent(e){if(!Lt.navigator&&!Lt.location&&!Lt.document)return;const t=e.request&&e.request.url||Lt.location&&Lt.location.href,{referrer:r}=Lt.document||{},{userAgent:n}=Lt.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),pr=Ye(dr,hr);function fr(e,t,r=250,n,i,o,a){if(!(o.exception&&o.exception.values&&a&&T(a.originalException,Error)))return;const s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;s&&(o.exception.values=(c=gr(e,t,i,a.originalException,n,o.exception.values,s,0),u=r,c.map((e=>(e.value&&(e.value=L(e.value,u)),e)))))}function gr(e,t,r,n,i,o,a,s){if(o.length>=r+1)return o;let c=[...o];if(T(n[i],Error)){mr(a,s);const o=e(t,n[i]),u=c.length;vr(o,i,u,s),c=gr(e,t,r,n[i],i,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(T(n,Error)){mr(a,s);const u=e(t,n),l=c.length;vr(u,`errors[${o}]`,l,s),c=gr(e,t,r,n,i,[u,...c],u,l)}})),c}function mr(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function vr(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}const yr="LinkedErrors",Er=(e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:yr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();fr(Qt,o.stackParser,o.maxValueLength,r,t,e,n)}}},_r=Ye(yr,Er),Sr=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ir="TryCatch",br=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ir,setupOnce(){t.setTimeout&&M(Lt,"setTimeout",Or),t.setInterval&&M(Lt,"setInterval",Or),t.requestAnimationFrame&&M(Lt,"requestAnimationFrame",Cr),t.XMLHttpRequest&&"XMLHttpRequest"in Lt&&M(XMLHttpRequest.prototype,"send",Tr);const e=t.eventTarget;e&&(Array.isArray(e)?e:Sr).forEach(wr)}}},Ar=Ye(Ir,br);function Or(e){return function(...t){const r=t[0];return t[0]=Mt(r,{mechanism:{data:{function:fe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Cr(e){return function(t){return e.apply(this,[Mt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:fe(e)},handled:!1,type:"instrument"}})])}}function Tr(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&M(r,e,(function(t){const r={mechanism:{data:{function:e,handler:fe(t)},handled:!1,type:"instrument"}},n=H(t);return n&&(r.mechanism.data.handler=fe(n)),Mt(t,r)}))})),e.apply(this,t)}}function wr(e){const t=Lt,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(M(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Mt(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:fe(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,Mt(n,{mechanism:{data:{function:"addEventListener",handler:fe(n),target:e},handled:!1,type:"instrument"}}),i])}})),M(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}const Rr=[Qe(),nt(),br(),jt(),ar(),Er(),Bt(),hr()];function Pr(e,t){const r={type:t.name||t.constructor.name,value:t.message},n=function(e,t){return e(t.stack||"",1)}(e,t);return n.length&&(r.stacktrace={frames:n}),r}const Nr="LinkedErrors",Dr=Ye(Nr,((e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:Nr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();fr(Pr,o.stackParser,o.maxValueLength,r,t,e,n)}}})),Lr=e;let xr={};Lt.Sentry&&Lt.Sentry.Integrations&&(xr=Lt.Sentry.Integrations);const kr={...xr,...Lr,...t},Mr="?";function Ur(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const jr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Hr=/\((\S*)(?::(\d+))(?::(\d+))\)/,Fr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Br=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Vr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,qr=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=de.test(r)?r.replace(de,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),he.test(t[t.length-1].function||"")&&(t.pop(),he.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=jr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Hr.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=Gr(t[1]||Mr,t[2]);return Ur(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Fr.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Br.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Mr;return[r,e]=Gr(r,e),Ur(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Vr.exec(e);return t?Ur(t[2],t[1]||Mr,+t[3],t[4]?+t[4]:void 0):void 0}]),Gr=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Mr,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class zr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const $r=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Yr(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:a,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${a}`}function Wr(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Kr(e,t=[]){return[e,t]}function Xr(e,t){const[r,n]=e;return[r,[...n,t]]}function Qr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function Zr(e,t){return(t||new TextEncoder).encode(e)}function Jr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[Zr(i,t),e]:i.push("string"==typeof e?Zr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(ge(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function en(e,t){const r="string"==typeof e.data?Zr(e.data,t):e.data;return[q({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const tn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function rn(e){return tn[e]}function nn(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}const on=6e4;const an=30;function sn(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return ee(new zr("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new te(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{J(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||an)){let n={};function i(i){const o=[];if(Qr(i,((t,r)=>{const i=rn(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=cn(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return J();const a=Kr(i[0],o),s=t=>{Qr(a,((r,n)=>{const i=cn(r,n);e.recordDroppedEvent(t,rn(n),i)}))};return r.add((()=>t({body:Jr(a,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Q&&g.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r,,,o]=e.split(":",5),a=parseInt(t,10),s=1e3*(isNaN(a)?60:a);if(r)for(const e of r.split(";"))"metric_bucket"===e&&o&&!o.split(";").includes("custom")||(i[e]=n+s);else i.all=n+s}else a?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?on:n-t}(a,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof zr)return Q&&g.error("Skipped sending event because buffer is full."),s("queue_overflow"),J();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function cn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let un;function ln(e,t=function(){if(un)return un;if(It(Lt.fetch))return un=Lt.fetch.bind(Lt);const e=Lt.document;let t=Lt.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){Dt&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return un=t.bind(Lt)}()){let r=0,n=0;return sn(e,(function(i){const o=i.body.length;r+=o,n++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,a).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return un=void 0,r-=o,n--,ee(e)}}))}const dn="7";function hn(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:dn,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const pn="Not capturing exception because it's already been captured.";class fn{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=$r.exec(e);if(!t)return void f((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[r,n,i="",o,a="",s]=t.slice(1);let c="",u=s;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Wr({host:o,pass:i,path:c,projectId:u,port:a,protocol:r,publicKey:n})}(e):Wr(e);if(t&&function(e){if(!s)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(g.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(g.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(g.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(g.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):Q&&g.warn("No DSN provided, client will not send events."),this._dsn){const t=hn(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(X(e))return void(Q&&g.log(pn));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=I(e)?e:String(e),a=b(e)?this.eventFromMessage(o,t,r):this.eventFromException(e,r);return this._process(a.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&X(t.originalException))return void(Q&&g.log(pn));let n=t&&t.event_id;const i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,i||r).then((e=>{n=e}))),n}captureSession(e){"string"!=typeof e.release?Q&&g.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),le(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e))))):J(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Q&&g.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];$e(this,e,this._integrations),t||ze(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=function(e,t,r,n){const i=nn(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const a=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:Yr(n)},...i&&{trace:q({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Kr(a,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=Xr(r,en(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,r,n){const i=nn(r);return Kr({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:Yr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const r=`${e}:${t}`;Q&&g.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}captureAggregateMetrics(e){Q&&g.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=function(e,t,r,n){const i={sent_at:(new Date).toISOString()};r&&r.sdk&&(i.sdk={name:r.sdk.name,version:r.sdk.version}),n&&t&&(i.dsn=Yr(t));const o=function(e){const t=function(e){let t="";for(const r of e){const e=Object.entries(r.tags),n=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${r.name}@${r.unit}:${r.metric}|${r.metricType}${n}|T${r.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Kr(i,[o])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&$e(e,t,r)})),r}(this,e),ze(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(le(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new te((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n=function(){return Be().getIsolationScope()}()){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),function(e,t,r,n,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,c={...t,event_id:t.event_id||r.event_id||z(),timestamp:t.timestamp||ae()},l=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:ue),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=L(e.message,o));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=L(a.value,o));const s=e.request;s&&s.url&&(s.url=L(s.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const r=u._sentryDebugIds;if(!r)return;let n;const i=Se.get(t);i?n=i:(n=new Map,Se.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const a=n.get(i);a?o=a:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(c,e.stackParser);const d=function(e,t){if(!t)return e;const r=e?e.clone():new Le;return r.update(t),r}(n,r.captureContext);r.mechanism&&K(c,r.mechanism);const h=i&&i.getEventProcessors?i.getEventProcessors():[],p=(De||(De=new Le),De).getScopeData();o&&Pe(p,o.getScopeData()),d&&Pe(p,d.getScopeData());const f=[...r.attachments||[],...p.attachments];return f.length&&(r.attachments=f),Re(c,p),ie([...h,...re(),...p.eventProcessors],c,r).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach((e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof a&&a>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:ge(e.data,t,r)}})))},...e.user&&{user:ge(e.user,t,r)},...e.contexts&&{contexts:ge(e.contexts,t,r)},...e.extra&&{extra:ge(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=ge(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>{const n=_e(e).data;return n&&(e.data=ge(n,t,r)),e}))),n}(e,a,s):e)))}(i,e,t,r,this,n).then((e=>{if(null===e)return e;const t={...n.getPropagationContext(),...r?r.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:a}=t;e.contexts={trace:{trace_id:n,span_id:i,parent_span_id:o},...e.contexts};const s=a||Te(n,this,r);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if(Q){const t=e;"log"===t.logLevel?g.log(t.message):g.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n,o=mn(e),a=gn(e),s=e.type||"error",c=`before send for type \`${s}\``;if(a&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),ee(new zr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===s?"replay":s,l=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,l).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new zr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;return gn(t)&&n?n(t,r):mn(t)&&i?i(t,r):t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(C(e))return e.then((e=>{if(!A(e)&&null!==e)throw new zr(r);return e}),(e=>{throw new zr(`${t} rejected with ${e}`)}));if(!A(e)&&null!==e)throw new zr(r);return e}(i,c)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",u,e),new zr(`${c} returned \`null\`, will not send event.`,"log");const i=r&&r.getSession();!o&&i&&this._updateSessionFromEvent(i,n);const a=n.transaction_info;if(o&&a&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...a,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof zr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new zr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Q&&g.error("Error while sending event:",e)}));Q&&g.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function gn(e){return void 0===e.type}function mn(e){return"transaction"===e.type}class vn extends fn{constructor(e){!function(e,t,r=[t],n="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:r.map((e=>({name:`${n}:@sentry/${e}`,version:ke}))),version:ke}),e._metadata=i}(e,"browser",["browser"],Lt.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Lt.document&&Lt.document.addEventListener("visibilitychange",(()=>{"hidden"===Lt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=rr(e,t,r&&r.syntheticException||void 0,n);return K(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),J(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=nr(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),J(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Dt&&g.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:Yr(n)}},o=function(e){return[{type:"user_report"},e]}(e);return Kr(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Dt&&g.log("No outcomes to send"));if(!this._dsn)return void(Dt&&g.log("No dsn provided, will not send outcomes"));Dt&&g.log("Sending outcomes:",e);const t=(r=e,Kr((n=this._options.tunnel&&Yr(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:ae(),discarded_events:r}]]));var r,n;this._sendEnvelope(t)}}class yn{constructor(e){this.debug=e.debug??!1;const t={debug:this.debug,dist:`${e.release.split("@")[1]}-${e.environment}`,dsn:e.dsn,environment:e.environment,integrations:[...Rr,new kr.GlobalHandlers({onerror:e.useGlobalHandlers??!1,onunhandledrejection:e.useGlobalHandlers??!1})],release:e.release,stackParser:qr,transport:e.transport??ln};e.beforeSend&&(t.beforeSend=e.beforeSend);const r=new vn(t),n=new Le;e.initialScope&&n.update(e.initialScope),this.hub=new je(r,n),!0===e.useGlobalHandlers&&Fe(this.hub)}setCustomTags(e){this.hub.configureScope((t=>{Object.entries(e).forEach((([e,r])=>{t.setTag(e,r)}))}))}setUser(e){this.hub.setUser({id:e})}captureException(e,t){this.debug&&console.error("[Sentry exception]",e,t),this.hub.captureException(e,t)}addBreadcrumb(e,t){this.debug&&console.log("[Sentry Breadcrumb]",e,t),this.hub.addBreadcrumb(e,t)}}const En=-1;async function _n(e,t,r=new Error("Promise timeout exceeded")){let n=En;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}const Sn=(e,t)=>Math.min(200*Math.pow(2,e-1)+Math.floor(1e3*Math.random()),t);class In extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,In.prototype)}}class bn extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,bn.prototype)}}class An extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,An.prototype)}}var On;function Cn(e,t){return{body:e,status:t.status,statusText:t.statusText}}function Tn(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function wn(e,t,r=1,n=Date.now()){const i=Date.now()-n,{body:o,headers:a={},credentials:s="include",mode:c="cors",timeoutMs:u=1e4,maxAttempts:l=3,maxBackoffMs:d=32e3}=t;let h=null;void 0!==window.AbortController&&null!==window.AbortController&&(h=new window.AbortController);const p={...t,body:null!=o?JSON.stringify(o):null,credentials:s,headers:Tn(a),mode:c,signal:h?h.signal:null};try{const t=await _n(window.fetch.bind(null,e,p),u,new In(r,i,e));return await async function(e,t){let r={};const n=e.status;if(!(n<On.INTERNAL_SERVER_ERROR))return Cn(r,e);{let i;try{return n!==On.NO_CONTENT&&(r=await e.json()),Cn(r,e)}catch(r){if(r instanceof Error){const n=r.toString();try{i=await e.text(),i=`${i} ${n}`}catch{i=n}throw new bn(t,e.status,i)}throw new bn(t,e.status,JSON.stringify(r))}}}(t,e)}catch(o){if(o instanceof In)h?.abort();else{if(o instanceof bn)throw o;if(r===l)throw new An(r,i,e)}if(r===l)throw o;const a=Sn(r,d);return new Promise((i=>{setTimeout((()=>{i(wn(e,t,r+1,n))}),a)}))}}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED"}(On||(On={}));const Rn=function(e,t){return wn(e,{...t,method:"POST"})};var Pn;!function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(Pn||(Pn={}));var Nn,Dn,Ln,xn,kn,Mn,Un,jn,Hn,Fn,Bn,Vn,qn,Gn,zn,$n,Yn,Wn=null!=="production"?"production":"development",Kn="local",Xn={get ANALYTICS_CLIENT_VERSION(){return"3.0.5"},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(Wn){case Pn.production:return"squareup.com";case Pn.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.PCI_CONNECT_API_HOST)},get ASSET_BASE_URL(){return function(e){switch(e){case Pn.production:return"https://web.squarecdn.com";case Pn.sandbox:return"https://sandbox.web.squarecdn.com";case Pn.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(Pn[Wn])},get ASSET_URL(){return this.VERSION===Kn?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CONNECT_API_URL(){return"https://connect.".concat(this.API_PUBLIC_HOST)},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return Wn!==Pn.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},GIFT_CARD_IFRAME(e){return"".concat(this.ASSET_URL,"/gift-card-element-iframe").concat(e?"":"-embedded",".html")},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe.html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PCI_CONNECT_API_HOST(){return"pci-connect.".concat(this.API_PUBLIC_HOST)},get SENTRY_DSN(){switch(Wn){case Pn.test:case Pn.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},SINGLE_CARD_IFRAME(e){return"".concat(this.ASSET_URL,"/single-card-element-iframe").concat(e?"":"-embedded",".html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},get VERSION(){return null!=="1.63.1"?"1.63.1":Kn},env:Wn,staticAsset(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)}};r(8836),r(1657),r(5883),r(7890),r(7368),r(6708),r(4069),r(5940),r(4112),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Nn||(Nn={}));class Qn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,Qn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class Zn extends Qn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,Zn.prototype)}}class Jn extends Qn{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,Jn.prototype)}}class ei extends Qn{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,ei.prototype)}}class ti extends Qn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,ti.prototype)}}class ri extends Qn{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,ri.prototype)}}class ni extends Qn{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,ni.prototype)}}class ii extends Qn{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,ii.prototype)}}class oi extends Qn{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,oi.prototype)}}class ai extends Qn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,ai.prototype)}toJSON(){return{errors:this.errors.map((e=>{var t={};return["name","message","type","code","token"].forEach((function(r){r in e&&(t[r]=e[r])})),t})),name:this.name}}}class si extends Qn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,si.prototype)}}class ci extends Qn{constructor(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).concat(e);super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(t.join("\n"))),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,ci.prototype)}}class ui extends Qn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,ui.prototype)}}class li extends Qn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,li.prototype)}}class di extends Qn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,di.prototype)}}!function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Dn||(Dn={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(Ln||(Ln={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(xn||(xn={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(kn||(kn={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Mn||(Mn={})),function(e){e.UNKNOWN="Unknown"}(Un||(Un={})),function(e){e.GIFT="Gift"}(jn||(jn={}));class hi extends Qn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(Ln),...Object.values(kn)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,hi.prototype)}}class pi extends Qn{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,pi.prototype)}}class fi extends Qn{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(void 0!==r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,fi.prototype)}}class gi extends Qn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,gi.prototype)}}class mi extends Qn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,mi.prototype)}}class vi extends Qn{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,vi.prototype)}}class yi extends Qn{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,yi.prototype)}}class Ei extends Qn{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,Ei.prototype)}}class _i extends Qn{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,_i.prototype)}}class Si extends Qn{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,Si.prototype)}}class Ii extends Qn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Ii.prototype)}}class bi extends Qn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS and have a secure context"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,bi.prototype)}}class Ai extends Qn{constructor(e,t){var r=null!=t?t:null==e?void 0:e.field;super("Method unsupported: ".concat(null==e?void 0:e.message).concat(void 0!==r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,Ai.prototype)}}class Oi extends Qn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,Oi.prototype)}}class Ci extends Qn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Ci.prototype)}}class Ti extends Qn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Ti.prototype)}}class wi extends Qn{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,wi.prototype)}}class Ri extends Qn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Ri.prototype)}}class Pi extends Qn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Pi.prototype)}}class Ni extends Qn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Ni.prototype)}}class Di extends Qn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,Di.prototype)}}class Li extends Qn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Li.prototype)}}class xi extends Qn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,xi.prototype)}}class ki extends Qn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,ki.prototype)}}!function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(Hn||(Hn={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(Fn||(Fn={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Bn||(Bn={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(Vn||(Vn={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(qn||(qn={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(Gn||(Gn={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(zn||(zn={})),function(e){e.MINT="mint",e.WHITE="white"}($n||($n={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(Yn||(Yn={}));var Mi,Ui,ji,Hi,Fi,Bi,Vi,qi,Gi,zi,$i,Yi,Wi,Ki,Xi,Qi=["borderColor","borderRadius","borderWidth"],Zi=["borderColor","borderWidth"],Ji=["color"],eo=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Mi||(Mi={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(Ui||(Ui={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(ji||(ji={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(Hi||(Hi={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(Fi||(Fi={})),function(e){e.DARK="dark",e.LIGHT="light"}(Bi||(Bi={})),function(e){e.FULL="full",e.STATIC="static"}(Vi||(Vi={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(qi||(qi={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(Gi||(Gi={})),function(e){e.STATIC="static",e.FILL="fill"}(zi||(zi={})),function(e){e.LONG="long",e.SHORT="short"}($i||($i={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Yi||(Yi={})),function(e){e.APPLE_PAY="Apple Pay",e.AFTERPAY_CLEARPAY="AfterpayClearpay",e.CARD="Card",e.GOOGLE_PAY="Google Pay",e.GIFT_CARD="Gift Card",e.ACH="ACH",e.CASH_APP_PAY="Cash App Pay"}(Wi||(Wi={})),function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(Ki||(Ki={}));class to{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(Xi||(Xi={}));class ro extends Qn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,ro.prototype)}}class no extends Qn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,no.prototype)}}class io extends Qn{constructor(){super("The Payment 'locationId' option is not in the correct format."),this.name="InvalidLocationIdError",Object.setPrototypeOf(this,io.prototype)}}function oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")}var ao=new RegExp(/^[\w.-]+$/i),so=new RegExp(/sq0at/i);function co(e){return Xn.env===e}function uo(){return co(Pn.production)}var lo=/^_/g,ho=/(?!^)([A-Z])/g,po=/[\s_]+(?=[A-Za-z])/g;function fo(e){return"JPY"===e.toUpperCase()?0:2}var go,mo={buildUrl:oo,convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(lo,"-").replace(ho," $1").replace(po,"-").toLowerCase()},decimalPlaces:fo,delay:function(e){return new Promise((t=>{setTimeout(t,e)}))},enumValues:function(e){return Object.values(e)},formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isNonBlankString:function(e){return void 0!==e&&""!==e},isProduction:uo,isStaging:function(){return co(Pn.staging)},isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},moneyAmountToInternationalizedCurrency:function(e,t,r){var n=fo(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)},moneyAmountToPaymentRequestAmount:function(e,t){var r=fo(t);return(e/Math.pow(10,r)).toFixed(r)},paymentRequestAmountToMoneyAmount:function(e,t){var r=fo(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new _i(e,t);var[o,a,s=""]=i;if(0===r)return Number(a);var c="0".repeat(r-s.length);return Number(a+s+c)},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},versionedUrl:function(e){return oo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}};class vo{constructor(e){this.recordErrorMetrics=!1;var t={beforeSend:(t,r)=>{var n;if(!Xn.ENABLE_ERROR_LOGGING)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(this.recordErrorMetrics){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var a="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.source,", error: ").concat(o);Rn(Xn.METRICS_ERROR_URL,{body:{error_message:a,sdk_version:Xn.VERSION}}).catch((()=>{}))}return t},dsn:Xn.SENTRY_DSN,environment:Xn.env,release:"web-payments-sdk@".concat(Xn.VERSION),transport:e.transport,useGlobalHandlers:e.useGlobalHandlers};this.browserErrorLogger=new yn(t),this.browserErrorLogger.setCustomTags({applicationId:e.applicationId,applicationUrl:e.applicationUrl,source:e.source,version:Xn.VERSION})}setRecordErrorMetrics(e){this.recordErrorMetrics=e}setCustomTags(e){this.browserErrorLogger.setCustomTags(e)}setUser(e){this.browserErrorLogger.setUser(e)}addBreadcrumb(e,t){this.browserErrorLogger.addBreadcrumb(e,t)}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mo.isInstanceOf(e,[An,In])||(e instanceof bn&&this.browserErrorLogger.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage}),this.browserErrorLogger.captureException(e,{captureContext:{tags:t}}))}}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(go||(go={}));var yo,Eo,_o={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},So={message:"The requested resource was not found.",type:"NOT_FOUND"},Io={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},bo={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Ao={message:"Request not authorized.",type:"UNAUTHORIZED"},Oo={message:"An unknown error has occurred",type:"UNKNOWN"};class Co extends Qn{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,Co.prototype)}}class To extends Qn{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){switch(e){case On.UNAUTHORIZED:return Ao;case On.NOT_FOUND:return So;case On.TOO_MANY_REQUESTS:return bo;case On.INTERNAL_SERVER_ERROR:return _o;case On.SERVICE_UNAVAILABLE:return Io;default:return Oo}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,To.prototype)}}class wo extends Qn{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,wo.prototype)}}class Ro extends Qn{constructor(e){super(e),this.name="InvalidIframeError",Object.setPrototypeOf(this,Ro.prototype)}}class Po extends Qn{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,Po.prototype)}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(yo||(yo={})),function(e){e.UNKNOWN="UNKNOWN"}(Eo||(Eo={}));var No={[Eo.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}},Do={message:"An unknown error has occurred",type:"UNKNOWN"};new Set(["EXPIRED_PLAID_SESSION","INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID","DATABASE_INSIGHTS_VERIFICATION_FAILURE"]);var Lo,xo={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(Lo||(Lo={}));class ko extends Qn{constructor(e){super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,ko.prototype)}}function Mo(){return new xi([xo.UNKNOWN])}function Uo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(r),!0).forEach((function(t){Ho(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ho(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fo={HttpRequestInvalidJsonError:bn,HttpRequestNetworkError:An,HttpRequestTimeoutError:In,InternalError:Co,InternalHttpError:To,InternalPaymentMethodError:wo,InternalTimeoutError:Po,InternalValidationError:ko,InvalidIframeError:Ro};function Bo(e){return Object.values(Fo).some((t=>e instanceof t))}var Vo={AfterpayAmountOutsideLimitsError:ri,AfterpayMerchantError:ii,AfterpayRequestError:ti,AfterpayUnsupportedCurrencyError:ni,BrowserNotSupportedError:Ii,ElementNotFoundError:si,InvalidCurrencyFormatError:_i,InvalidElementTypeError:wi,InvalidEventListenerCallbackError:li,InvalidOptionError:di,InvalidPaymentRequestError:ci,InvalidPaymentRequestUpdateError:ui,PaymentMethodUnsupportedError:Ai,PlaidMissingNameError:Zn,TokenizationError:xi,UnexpectedError:ki,VerifyBuyerError:ai,WebSdkEmbedError:bi},qo=jo(jo(jo({},Vo),Fo),{},{AfterpayInvalidPaymentRequestError:oi,AfterpayOnTokenizeListenerError:Jn,InvalidApplicationIdError:ro,InvalidInputStylePropertyError:Pi,InvalidInputStyleValueError:Ni,InvalidStylesError:Li,PaymentMethodAlreadyAttachedError:Oi,PaymentMethodAlreadyDestroyedError:Ti,PaymentMethodMissingListener:ei,PaymentMethodNotAttachedError:Ci,SqError:Qn}),Go=new Set(["CLEAR","CONFIG_UPDATED","CONFIGURED","DESTROYED","DETACHED","EVENT_LISTENER_ADDED","EVENT_LISTENER_ON_COMPLETE_RESPONSE","FOCUSED","OVERRIDE_STRINGS","RECALCULATED_SIZE","SET_LOCALE","SET_ERROR"]);function zo(e){return Go.has(e)}var $o=new Set(["IFRAME_MESSENGER_TIMEOUT_ERROR","INVALID_REDIRECT_URI","INVALID_TRANSACTION_ID","PAYMENTS_REUSE"]);function Yo(e){return $o.has(e)}var Wo,Ko,Xo,Qo=new Set(["GET_PRODUCT_INFORMATION","LOAD","MAIN_IFRAME","NONCE"]),Zo={ATTACH:!0,BUILD:!0,INITIALIZATION:!1,PROOF_OF_WORK:!1};function Jo(e){return e in Zo}function ea(e,t){var r={};return Object.keys(e).forEach((n=>{var i;"object"==typeof e[n]&&!Array.isArray(e[n])&&n in t?r[n]=ea(e[n],t[n]):r[n]=null!==(i=t[n])&&void 0!==i?i:e[n]})),r}!function(e){e.Ach="ACH",e.Afterpay="Afterpay",e.App="WebSDK",e.ApplePay="Apple Pay",e.Card="Card",e.CashApp="Cash App",e.CashAppPayV1="Cash App Pay V1",e.GooglePay="Google Pay",e.Masterpass="Masterpass",e.GiftCard="Gift Card",e.Fields="Fields",e.PaymentRequest="Payment Request"}(Wo||(Wo={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(Xo||(Xo={}));var ta={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},inputFieldTitles:{cardNumber:"Credit card number",cvv:"CVV",expirationDate:"Expiration date",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP Code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},inputFieldTitles:{giftCardNumber:"Gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},inputFieldTitles:{cardNumber:"Número de la tarjeta de crédito",cvv:"Código CVV",expirationDate:"Fecha de vencimiento",postalCodes:{CA:"Código postal",GB:"Código postal",US:"Código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta de regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta de regalo"},inputFieldTitles:{giftCardNumber:"Número de la tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta de regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},inputFieldTitles:{cardNumber:"Numéro de carte bancaire",cvv:"CVV",expirationDate:"Date d’expiration",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},inputFieldTitles:{giftCardNumber:"Numéro de carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},inputFieldTitles:{cardNumber:"Numéro de carte bancaire",cvv:"CVV",expirationDate:"Date d’expiration",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},inputFieldTitles:{giftCardNumber:"Numéro de carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},inputFieldTitles:{cardNumber:"クレジットカード番号",cvv:"CVV",expirationDate:"有効期限",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIPコード"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},inputFieldTitles:{giftCardNumber:"ギフトカード番号"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},ra={en:Xo.enUS,es:Xo.esES,fr:Xo.frFR,ja:Xo.jaJP},na=ra.en;class ia{constructor(e){this.currentLocale=na,this.currentTranslations=ta[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),n=this.currentLocale;if(e in ta)this.currentLocale=e;else{if(!function(e){return["en","ja","fr","es"].includes(e)}(t))return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=ra[t]}this.currentTranslations=ta[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return void 0!==r&&void 0!==i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?ea(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var oa="INVALID_VALUE",aa="SANITIZED",sa=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),ca=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),ua=new Set([...ca.values(),"eventName"]),la=new Set(["includeInputLabels","postalCode","style"]),da=new Set(["includeInputLabels","style"]),ha=new Set(["lineItems","total","shippingOptions","shippingContact"]),pa=new Set(["buttonColor","buttonSizeMode","buttonType"]),fa=new Set(["shape","size","values","theme","width"]),ga=Ra(Hn),ma=Ra(Dn),va=Ra(Mn),ya=Ra(Ki),Ea=Ra(Ln),_a=Ra(kn),Sa=Ra(Xo),Ia=Ra(Gi),ba=Ra(zi),Aa=Ra($i),Oa=Ra(Fi),Ca=Ra(Hi),Ta=Ra(Bi),wa=Ra(Vi);function Ra(e){return new Set(Object.values(e))}function Pa(e){return JSON.stringify({value:e})}function Na(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,a]=e;if(t.has(o)){var s=a;r.has(o)?s=aa:o in n&&(s=n[o].has(a)?a:oa),i[o]=s}})),JSON.stringify(i)}function Da(e){return Na(e,fa,void 0,{shape:Ca,size:Oa,theme:Ta,values:Ta,width:wa})}var La=function(e,t,r){switch(e){case"CONFIGURED":case"CONFIG_UPDATED":return function(e,t){switch(e){case Wo.Card:case Wo.GiftCard:return function(e,t){return Na(t,e===Wo.Card?la:da)}(e,t);case Wo.GooglePay:return function(e){return Na(e,pa,void 0,{buttonColor:Ia,buttonSizeMode:ba,buttonType:Aa})}(t);case Wo.PaymentRequest:return function(e){return Na(e,sa,ha)}(t);case Wo.CashAppPayV1:return Da(t)}return oa}(t,r);case"FOCUSED":return Pa(function(e,t){if("string"!=typeof t)return oa;switch(e){case Wo.Card:if(Ea.has(t))return t;break;case Wo.GiftCard:if(_a.has(t))return t}return oa}(t,r));case"SET_LOCALE":return Pa(function(e){return"string"!=typeof e?oa:Sa.has(e)?e:oa}(r));case"EVENT_LISTENER_ADDED":return Pa(function(e,t){if("string"!=typeof t)return oa;switch(e){case Wo.Ach:if(ga.has(t))return t;break;case Wo.Card:if(ma.has(t))return t;break;case Wo.GiftCard:if(va.has(t))return t;break;case Wo.PaymentRequest:if(ya.has(t))return t}return oa}(t,r));case"EVENT_LISTENER_ON_COMPLETE_RESPONSE":return function(e,t){return e===Wo.PaymentRequest?function(e){return Na(e,ua,ca,{eventName:ya})}(t):oa}(t,r);default:return""}};function xa(e,t){return void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function ka(e,t){return Boolean(e.querySelector(t))}r(1804);var Ma=function(e){var t,r=void 0!==e.angular,n=ka(e.document,"[ng-version]")||void 0!==e.getAllAngularRootElements||void 0!==e.getAngularVersion,i=void 0!==e.bootstrap,o=void 0!==e.Ember,a=void 0!==e.jQuery,s=ka(e.document,'form[action*="paypal.com"]'),c=function(e){return xa(e,(function(e){return"__k"in e||"_component"in e||"__c"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=ka(e.document,"*[data-reactroot]");if(t)return t;return xa(e,(function(e){return"_reactRootContainer"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=void 0!==e.__NUXT__||void 0!==e.$nuxt,r=void 0!==e.__VUE__;if(r||t)return r||t;return xa(e,(function(e){return"__vue__"in e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:a,nextJS:void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:s,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return r})))},Ua=/[$()*+.?[\\\]^{|}]/g,ja=new RegExp(Ua.source),Ha=function(e){return ja.test(e)?e.replace(Ua,"\\$&"):e},Fa={CARD_NONCE_ENDPOINT:new RegExp(Ha(Xn.CARD_NONCE_ENDPOINT)),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(Ha(Xn.GET_PRODUCT_INFORMATION_ENDPOINT)),LIBRARY_RESOURCE:new RegExp("".concat(Ha(Xn.ASSET_BASE_URL),"/([\\w\\d.-]*/)?square\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(Ha(Xn.ASSET_URL),"/main-iframe"))};function Ba(e,t){if(!a.supportsPerformanceEntries)return null;var r=a.windowPerformance,n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var Va=function(e){switch(e){case"GET_PRODUCT_INFORMATION":return Ba("fetch",Fa.GET_PRODUCT_INFORMATION_ENDPOINT);case"MAIN_IFRAME":return Ba("navigation",Fa.MAIN_IFRAME_RESOURCE);case"LOAD":return Ba("script",Fa.LIBRARY_RESOURCE);case"NONCE":return Ba("fetch",Fa.CARD_NONCE_ENDPOINT);default:return null}};function qa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(r),!0).forEach((function(t){za(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function za(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $a=Xn.METRICS_URL,Ya=Xn.METRICS_V2_URL;function Wa(e){return zo(e.event)}function Ka(e){return Yo(e.event)}function Xa(e){return!Wa(e)&&!Ka(e)}class Qa{constructor(e,t){this.sdkVersion=Xn.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1,this.logVisibilityEvent=this.logVisibilityEvent.bind(this),this.flushAllMetrics=this.flushAllMetrics.bind(this)}setAvt(e){this.avt=e}setFeatureFlagValues(e){this.featureFlagValues=e}logEvent(e,t,r,n){try{var i=this.getMetricsLoggerBody(e,t,r,n);if(this.session=i.session,this.disableBeacon||!a.supportsSendBeacon||!a.supportsDocumentVisibilityState)return void Rn($a,{body:i}).catch((e=>{this.errorLogger.captureException(e)}));this.metricsBuffer.push(i),"NONCE:OK"!==e.event&&"DESTROYED"!==e.event||this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",this.logVisibilityEvent),document.addEventListener("visibilitychange",this.flushAllMetrics),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))}catch(e){this.errorLogger.captureException(e)}}clearEventListener(){document.removeEventListener("visibilitychange",this.logVisibilityEvent),document.removeEventListener("visibilitychange",this.flushAllMetrics)}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(Ma(window))),this.jsFramework}eventDuration(e,t){var r,[n,i]=e.event.split(":");if(Jo(n)){var o;if(Jo(r=n)&&!Zo[r]?o=n:void 0!==t&&(o="".concat(n,":").concat(t)),void 0===o)return null;if("START"===i){var a=Date.now();return this.manualTelemetryStarts[o]=a,null}if("OK"===i||"ERROR"===i){if(!(o in this.manualTelemetryStarts))return null;var s=this.manualTelemetryStarts[o];return delete this.manualTelemetryStarts[o],Date.now()-s}}return"START"!==i&&function(e){return Qo.has(e)}(n)?Va(n):null}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(Ya,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Rn(Ya,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,r){var n=Ga(Ga({},this.applicationData),{},{instanceId:e,sessionId:t});return void 0!==r&&(n.paymentMethodTrackingId=r),n}getMetricsLoggerBody(e,t,r,n){var i=function(){if(a.windowLocation===a.windowParentLocation)return{origin:a.windowLocation.origin,pathname:a.windowLocation.pathname};var e=a.documentReferrer;return e&&0!==e.length?(Ko||(Ko=document.createElement("a")),Ko.href="".concat(e),{origin:Ko.origin,pathname:Ko.pathname}):{origin:"",pathname:""}}(),o={innerHeight:a.windowInnerHeight,innerWidth:a.windowInnerWidth,isSecureContext:a.isSecureContext,language:a.windowNavigationLanguage},s=this.eventDuration(e,n),{event:c,eventSource:u}=e,{sdkVersion:l}=this,d=this.metricsSession(t,r,n),h={appLocation:i,avt:this.avt,browserData:o,event:c,eventSource:u,paymentMethodTrackingId:n,sdkVersion:l,session:d};return Wa(e)&&void 0!==e.eventConfigurationValues&&(h.eventConfigurationValues=La(e.event,u,e.eventConfigurationValues)),Ka(e)?h.internalConfigurationValues=JSON.stringify(e.errorMessage):Xa(e)&&void 0!==this.featureFlagValues&&(h.internalConfigurationValues=JSON.stringify(this.featureFlagValues)),null!==s&&s>0&&(h.duration=s),Xa(e)&&void 0!==e.sloStatus&&(h.sloStatus=e.sloStatus),"INITIALIZATION:OK"===c&&(h.jsFramework=this.getJSFrameworkValue()),h}logVisibilityEvent(){var e={event:"visible"===a.documentVisibilityState?"VISIBILITY:VISIBLE":"VISIBILITY:HIDDEN",eventSource:Wo.App},t=this.getMetricsLoggerBody(e,this.session.instanceId,this.session.sessionId,this.session.paymentMethodTrackingId);this.metricsBuffer.push(t)}flushAllMetrics(){"hidden"===a.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)}}r(2356);class Za extends Error{constructor(e="Unknown error",t){super(e),void 0!==t&&(this.token=t),this.name="AnalyticsError"}}class Ja extends Za{constructor(){super("Three ds method timed out while waiting for a response"),this.name="ThreeDSMethodTimeoutError"}}class es extends Za{constructor(){super("Form is no longer connected"),this.name="ThreeDSMethodFormError"}}class ts extends Za{constructor(){super("Three ds method failed with unexpected error"),this.name="ThreeDSMethodError"}}class rs extends Za{constructor(e,t){super(`Received 3DS method response with transaction ID ${e}, expected ${t}`),this.name="ThreeDSMethodTransactionIdError"}}class ns extends Za{constructor(){super("Form is no longer connected"),this.name="ChallengeFlowFormError"}}class is extends Za{constructor(){super("Challenge flow failed with unknown error"),this.name="ChallengeFlowError"}}class os extends Za{constructor(e,t){super(`Received Challenge response with transaction ID ${e}, expected ${t}`),this.name="ChallengeResponseTransactionIdError"}}class as extends Za{constructor(e){super(`The verification was not successful: ${e}`,e),this.name="VerificationError"}}class ss extends Za{constructor(){super("A verification request is already in progress"),this.name="VerificationInProgressError"}}class cs extends Za{constructor(e){super(`The time to complete the verification has expired: ${e}`),this.name="VerificationTimeoutError"}}function us(e,t,r){const n=new Error(void 0!==r?`${e}\nSee: ${r}`:e);return n.name=t,n}const ls={analyticsParametersRequiredError:function(){return us("The Analytics library must be initialized with analyticsParameters to call verifyBuyer.","AnalyticsParametersRequiredError")},buildError:us,invalidArgumentError:function(e,t){return us(`The Analytics '${e}' argument must be of type '${t}'`,"InvalidArgumentError")},invalidElementTypeError:function(e,t){return us(`An element with selector ${e} must be of type '${t}'`,"InvalidElementTypeError")},invalidFunctionArgumentError:function(e,t,r){return us(`The '${e}' function '${t}' argument must be of type '${r}'.`,"InvalidFunctionArgumentError")},invalidFunctionCallbackError:function(e,t){return us(`The '${e}' '${t}' callback must be a function.`,"InvalidFunctionCallbackError")},missingArgumentError:function(e){return us(`The Analytics '${e}' argument is required.`,"MissingArgumentError")},missingChargeVerificationArgumentError:function(e,t){return us(`The '${e}' '${t}' is required when verificationDetails.intent is 'CHARGE'.`,"MissingChargeVerificationArgumentError")},missingElementAttributeError:function(e,t){return us(`An element with selector '${e}' attribute '${t}' is required`,"MissingElementAttributeError")},missingElementError:function(e){return us(`An element with selector '${e}' cannot be found.`,"MissingElementError")},missingFunctionArgumentError:function(e,t){return us(`The '${e}' '${t}' argument is required.`,"MissingFunctionArgumentError")},missingFunctionCallbackError:function(e,t){return us(`The '${e}' '${t}' callback is required.`,"MissingFunctionCallbackError")},noIdsError:function(){return us("One of analyticsParameters.locationId or analyticsParameters.accountId must be specified.","NoIdsError")},outOfRangeArgumentError:function(e,t,r,n,i=!1){return us(`The '${e}' function '${t}' argument must be within range: ${r} and ${n} (${(i?"inclusive":"exclusive")+" of upper limit"}).`,"OutOfRangeArgumentError")},tooManyIdsError:function(){return us("Only one of analyticsParameters.locationId or analyticsParameters.accountId can be specified.","TooManyIdsError")},unexpectedAnalyticsClientError:function(){return us("An unknown error has occurred","UnexpectedAnalyticsClientError")}},ds={get documentVisibilityState(){return document.visibilityState},windowLocationHref:()=>window.location.href,get windowLocationOrigin(){return window.location.origin},get windowNavigationBeacon(){return window.navigator.sendBeacon.bind(window.navigator)}};let hs;const ps=[],fs={};let gs,ms=e=>{ps.push(e)};function vs(e){if(e.origin!==hs)return;const t=e.data;if("object"==typeof t&&"string"==typeof t.instanceId){const e=fs[t.instanceId];"function"==typeof e&&e(t)}}function ys(e){gs?.contentWindow&&gs.contentWindow.postMessage(e,hs)}function Es(){let e;for(window.addEventListener("message",vs,!1);e=ps.shift();)ys(e);ms=ys}function _s(){gs=document.createElement("iframe"),gs.setAttribute("width","0"),gs.setAttribute("height","0"),gs.setAttribute("src",`${hs}/payments/data/frame.html?referer=${encodeURIComponent(ds.windowLocationHref())}`),gs.setAttribute("style","border: none !important; display: block !important; visibility: hidden !important"),gs.setAttribute("sandbox","allow-scripts allow-same-origin"),gs.addEventListener("load",Es),document.body.appendChild(gs)}var Ss,Is,bs={init(e){hs=e,void 0===gs&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",_s):_s())},listenFor(e,t){fs[e]=t},reset(){gs&&(window.removeEventListener("message",vs),gs.removeEventListener("load",Es),gs.remove(),gs=void 0),ps.length=0;for(const e in fs)delete fs[e];document.removeEventListener("DOMContentLoaded",_s)},send(e){ms(e)}};!function(e){e.AUTHENTICATED="Y",e.AUTHENTICATION_ATTEMPTED="A",e.CHALLENGE_REQUIRED="C",e.DECOUPLED_CHALLENGE_REQUIRED="D",e.NOT_AUTHENTICATED="N",e.AUTHENTICATION_COULD_NOT_BE_PERFORMED="U",e.INFORMATIONAL_ONLY="I",e.REJECTED="R"}(Ss||(Ss={})),function(e){e._250X400="01",e._390X400="02",e._500X600="03",e._600X400="04",e.FULL_SCREEN="05"}(Is||(Is={}));class As{constructor(e){this.iframeInputs=e,this.eventListenerReference=this.handleResponse.bind(this)}async handle(){const e=new Promise(((e,t)=>{this.threeDSPromiseResolve=e,this.threeDSPromiseReject=t}));return this.build(),this.submit(),e}build(){void 0!==this.iframeInputs.iframeSelector&&document.querySelector(this.iframeInputs.iframeSelector)?this.iframe=document.querySelector(this.iframeInputs.iframeSelector):this.buildDefault();const e=`${this.iframeInputs.baseID}-form`;if(document.getElementById(e))this.form=document.getElementById(e);else{this.form=document.createElement("form"),this.form.setAttribute("id",e),this.form.setAttribute("name",`${this.iframeInputs.baseName}Form`),this.form.setAttribute("method","POST"),this.form.setAttribute("action",this.iframeInputs.notificationURL),this.form.setAttribute("target",this.iframe.name);const t=document.createElement("input");t.setAttribute("name",this.iframeInputs.notificationData.name),t.setAttribute("value",this.iframeInputs.notificationData.data),t.setAttribute("type","hidden"),this.form.appendChild(t),document.body.appendChild(this.form)}window.addEventListener("message",this.eventListenerReference)}buildDefault(){const e=`${this.iframeInputs.baseID}-modal`;document.getElementById(e)?this.modal=document.getElementById(e):(this.modal=document.createElement("div"),this.modal.id=e,this.modal.classList.add("square_threeds_modal"),document.body.appendChild(this.modal));const t=`${this.iframeInputs.baseID}-iframe`,r=document.getElementById(t);r&&this.modal.contains(r)?this.iframe=document.getElementById(t):(this.iframe=document.createElement("iframe"),this.iframe.id=t,this.iframe.name=`${this.iframeInputs.baseName}Iframe`,this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("width",this.iframeInputs.width),this.iframe.setAttribute("height",this.iframeInputs.height),this.iframe.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-pointer-lock"),this.iframe.setAttribute("style","visibility: hidden"),this.iframe.setAttribute("allowpaymentrequest","false"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.setAttribute("allow","payment *;publickey-credentials-get *"),this.iframe.classList.add("square_threeds_iframe"),this.modal.appendChild(this.iframe))}handleResponse(e){const t=e.data;if("object"==typeof t&&t.type===this.iframeInputs.listenerMessageType){this.destroy();try{this.iframeInputs.validateMessage(t),this.threeDSPromiseResolve(t)}catch(e){this.threeDSPromiseReject(e)}}}submit(){this.form.isConnected?(this.form.submit(),void 0!==this.iframeInputs.onShow&&this.iframeInputs.onShow(this.iframe,this.modal),void 0!==this.iframeInputs.timeoutSeconds&&(this.timeoutID=window.setTimeout(this.timedOut.bind(this),1e3*this.iframeInputs.timeoutSeconds))):(this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_FORM_DISCONNECTED")))}timedOut(){this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_TIMEOUT"))}destroy(){void 0!==this.timeoutID&&window.clearTimeout(this.timeoutID),window.removeEventListener("message",this.eventListenerReference),void 0!==this.iframeInputs.onDestroy&&this.iframeInputs.onDestroy(this.iframe),this.form.isConnected&&this.form.remove(),void 0!==this.modal&&this.modal.isConnected&&(this.iframe.isConnected&&this.iframe.remove(),this.modal.remove())}}function Os(e){switch(e){case"SQUARE_3DS_IFRAME_TIMEOUT":return new Ja;case"SQUARE_3DS_IFRAME_FORM_DISCONNECTED":return new es;default:return new ts}}class Cs{constructor(e){if(void 0===e.threeDsMethodUrl||void 0===e.threeDsMethodNotificationUrl)throw new Error(`Cannot complete 3DS method flow, one or more of threeDSMethodUrl and threeDSMethodNotificationUrl are undefined. Transaction data: ${JSON.stringify(e)}`);this.threeDsMethodUrl=e.threeDsMethodUrl,this.threeDSMethodData={threeDSMethodNotificationURL:e.threeDsMethodNotificationUrl,threeDSServerTransID:e.threeDSServerTransId},this.square3DSMethodIframe=new As({baseID:"sq-threeds-3ds-method",baseName:"3DSMethod",getErrorMessage:Os,height:"10",listenerMessageType:"threeDsMethodResponse",notificationData:{data:btoa(JSON.stringify(this.threeDSMethodData)),name:"threeDSMethodData"},notificationURL:this.threeDsMethodUrl,timeoutSeconds:11,validateMessage:this.validateMessage.bind(this),width:"10"})}async handle3DSMethod(){return this.square3DSMethodIframe.handle()}validateMessage(e){if(e.threeDsServerTransId!==this.threeDSMethodData.threeDSServerTransID)throw new rs(e.threeDsServerTransId,this.threeDSMethodData.threeDSServerTransID)}}const Ts="data-challenge-displayed",ws="VISIBLE";function Rs(e){return"SQUARE_3DS_IFRAME_FORM_DISCONNECTED"===e?new ns:new is}class Ps{constructor(e,t,r,n){if(this.errorLogger=t,this.esLogger=r,void 0===e.acsUrl||void 0===e.encodedCReq)throw new Error(`Cannot complete Challenge flow, acsUrl or encodedCReq is undefined. Transaction data: ${JSON.stringify(e)}`);this.acsUrl=e.acsUrl,this.challengeFlowData={encodedCReq:e.encodedCReq,threeDSServerTransID:e.threeDSServerTransId};const i=this.decodeChallengeWindowSize();void 0!==n&&({challengeDisplayedCallback:this.challengeDisplayedCallback,challengeHiddenCallback:this.challengeHiddenCallback,elementSelector:this.iframeSelector}=n);const o={baseID:"sq-threeds-challenge-flow",baseName:"3DSChallengeFlow",getErrorMessage:Rs,height:`${i.height}`,listenerMessageType:"challengeResponse",notificationData:{data:this.challengeFlowData.encodedCReq,name:"creq"},notificationURL:this.acsUrl,onDestroy:this.onDestroy.bind(this),onShow:this.onShow.bind(this),timeoutSeconds:610,validateMessage:this.validateMessage.bind(this),width:`${i.width}`};void 0!==this.iframeSelector&&(o.iframeSelector=this.iframeSelector),this.squareChallengeFlowIframe=new As(o)}async handleChallengeFlow(){const e=this.decodeCReq(this.challengeFlowData.encodedCReq);return e&&this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_req",tds_analyticsjs_c_req_message_version:e.messageVersion,tds_base_three_ds_server_trans_id:e.threeDsServerTransId||this.challengeFlowData.threeDSServerTransID}),this.squareChallengeFlowIframe.handle().then((e=>(this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_res",tds_analyticsjs_c_res_message_version:e.messageVersion,tds_analyticsjs_c_res_trans_status:e.transStatus,tds_base_three_ds_server_trans_id:e.threeDsServerTransId}),e)))}onShow(e,t){e.setAttribute(Ts,ws),e.setAttribute("style","visibility: visible"),void 0!==this.challengeDisplayedCallback&&this.challengeDisplayedCallback(),t&&t.classList.add("square_threeds_modal__show")}onDestroy(e){const t=e.getAttribute(Ts)===ws;e.setAttribute(Ts,"REMOVED"),void 0!==this.challengeHiddenCallback&&t&&this.challengeHiddenCallback()}validateMessage(e){if(e.threeDsServerTransId!==this.challengeFlowData.threeDSServerTransID)throw new os(e.threeDsServerTransId,this.challengeFlowData.threeDSServerTransID)}decodeChallengeWindowSize(){let e=Is._250X400;try{const t=JSON.parse(atob(this.challengeFlowData.encodedCReq));null!==t&&"object"==typeof t&&"challengeWindowSize"in t&&(e=t.challengeWindowSize)}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}switch(e){case Is._390X400:return{height:400,width:390};case Is._500X600:return{height:600,width:500};case Is._600X400:return{height:400,width:600};case Is.FULL_SCREEN:return{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};case Is._250X400:default:return{height:400,width:250}}}decodeCReq(e){try{return JSON.parse(atob(e))}catch(t){return this.errorLogger.addBreadcrumb({data:{encodedCReq:e},message:"Unable to parse JSON for challenge request message",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-challenge"}}}),null}}}var Ns;!function(e){e.COMPLETED="COMPLETED",e.ERROR="ERROR"}(Ns||(Ns={}));class Ds{constructor(e,t){this.userChallenged=!1,this.esLogger=e,this.errorLogger=t}async execute3dsAuthentication(e,t){this.configuration=e,this.threeDsTransactionData=t,await this.handle3DSMethodFlow();try{const e=await this.authenticate();await this.handleAuthenticateResponse(e)}catch(e){this.handleError(e)}}async handle3DSMethodFlow(){if(void 0!==this.threeDsTransactionData?.threeDsMethodUrl)try{const e=new Cs(this.threeDsTransactionData);await e.handle3DSMethod()}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}}async handleChallengeFlow(e){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"buyer_challenged",analyticsjsverification_challenge_type:"3DS",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_user_challenged:!0,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken});const t={threeDSServerTransId:e.three_ds_server_trans_id};return void 0!==e.encoded_creq&&(t.encodedCReq=e.encoded_creq),void 0!==e.challenge_acs_url&&(t.acsUrl=e.challenge_acs_url),new Ps(t,this.errorLogger,this.esLogger,this.configuration.verifyBuyerCustomElement).handleChallengeFlow()}authenticate(){const e={browser_info:{color_depth:window.screen.colorDepth,java_enabled:window.navigator.javaEnabled(),screen_height:window.innerHeight,screen_width:window.innerWidth},client_id:"",token:this.threeDsTransactionData.verificationToken};return this.configuration.callbacks.postAuthenticate(e)}async handleAuthenticateResponse(e){if(void 0===e.errors)if(e.three_ds_trans_status===Ss.CHALLENGE_REQUIRED)try{this.userChallenged=!0,await this.handleChallengeFlow(e),this.configuration.callbacks.onComplete({status:Ns.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:!0})}catch(e){this.handleError(e)}else this.configuration.callbacks.onComplete({status:Ns.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged});else this.configuration.callbacks.onComplete({status:Ns.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}handleError(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}}),this.configuration.callbacks.onComplete({status:Ns.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}}class Ls{constructor(e,t,r){this.callback=e,this.onError=r,this.called=!1,this.callback=e,this.timeout=window.setTimeout((()=>this.timedOut()),t),this.onError=r}invoke(...e){this.called?this.callback(...this.onError):(clearTimeout(this.timeout),this.called=!0,this.callback(...e))}timedOut(){this.invoke(...this.onError)}}function xs(e){return e instanceof Za}class ks{constructor(e,t,r,n,i){this.instanceId=e,this.applicationId=t,this.analyticsParameters=r,this.esLogger=n,this.errorLogger=i,this.challengeUpdatesQueue=[],this.verificationUpdatePending=!1,this.userChallenged=!1,(()=>{this.pendingVerifyBuyerCall&&this.verifyBuyer(this.pendingVerifyBuyerCall.verificationId,this.pendingVerifyBuyerCall.source,this.pendingVerifyBuyerCall.details,this.pendingVerifyBuyerCall.callback,this.pendingVerifyBuyerCall.verifyBuyerCustomElement)})()}verifyBuyer(e,t,r,n,i){void 0===this.verifyBuyerCallback?(this.squareThreeds=new Ds(this.esLogger,this.errorLogger),this.verifyBuyerCallback=new Ls(((e,t)=>{n(e,t),delete this.verifyBuyerCallback}),9e5,[new cs(e)]),this.getVerification(e,t,r)):n(new ss,null)}updateVerification(e,t){const r=t.some((e=>{if("SQUARE_THREEDS"===e.type){const t=e.square_threeds_verification?.status;return function(e){return"CANCELED"===e||"REJECTED"===e||"AUTHENTICATED"===e||"COMPLETED"===e}(t)||"ERROR"===t}return!1})),n={challengeUpdates:t,token:this.token},i={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:n,instanceId:this.instanceId,type:"requestVerificationUpdate",verificationId:e,version:2};!this.verificationUpdatePending||r?(bs.send(i),this.verificationUpdatePending=!r):this.challengeUpdatesQueue.push(t)}handleThreeDsAuthenticate(e,t){xs(t)?this.threeDsAuthenticatePromiseReject(t):this.threeDsAuthenticatePromiseResolve(t)}handleChallenges(e,t){if(void 0===this.verifyBuyerCallback)return;const r=this.challengeUpdatesQueue.shift();if(void 0!==r?this.updateVerification(e,r):this.verificationUpdatePending=!1,xs(t))return void this.verifyBuyerCallback.invoke(t,null);this.token=t.token;const n={token:this.token,userChallenged:this.userChallenged};switch(t.status){case"COMPLETED":this.verifyBuyerCallback.invoke(null,n);break;case"CANCELED":this.verifyBuyerCallback.invoke(new as(t.token),null);break;case"PENDING":for(const r of t.challenges)if("SQUARE_THREEDS"===r.type){if(this.squareThreedsConfiguration={callbacks:{onComplete:t=>{this.handleSquareThreeDsComplete(t,e)},postAuthenticate:t=>this.handlePostAuthenticate(t,e)}},!this.isValidSquareThreeDsChallenge(r))return;this.squareThreeDsTransactionData={directoryServerId:r.square_three_ds_verification.directory_server_id,messageVersion:r.square_three_ds_verification.message_version,threeDSServerTransId:r.square_three_ds_verification.three_ds_server_transaction_id,threeDsMethodNotificationUrl:r.square_three_ds_verification?.three_ds_method_notification_url,threeDsMethodUrl:r.square_three_ds_verification?.three_ds_method_url,verificationId:e,verificationToken:this.token},this.squareThreeds.execute3dsAuthentication(this.squareThreedsConfiguration,this.squareThreeDsTransactionData)}break;default:this.errorLogger.captureException(new Za(`Invalid verification response status: ${t.status}`),{captureContext:{tags:{action:"nonFatal-verify"}}})}}isValidSquareThreeDsChallenge(e){return void 0!==e.square_three_ds_verification?.three_ds_server_transaction_id}getVerification(e,t,r){const n={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{source:t,verificationDetails:r},instanceId:this.instanceId,type:"requestVerification",verificationId:e,version:2};bs.send(n)}handleSquareThreeDsComplete(e,t){this.userChallenged=e.userChallenged;const r={square_threeds_verification:{directory_server_id:this.squareThreeDsTransactionData.directoryServerId,message_version:this.squareThreeDsTransactionData.messageVersion,status:e.status===Ns.COMPLETED?Ns.COMPLETED:Ns.ERROR,three_ds_server_transaction_id:e.threeDsServerTransId},type:"SQUARE_THREEDS"};this.updateVerification(t,[r])}handlePostAuthenticate(e,t){const r=new Promise(((e,t)=>{this.threeDsAuthenticatePromiseResolve=e,this.threeDsAuthenticatePromiseReject=t}));return bs.send({analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{...e,client_id:this.applicationId},instanceId:this.instanceId,type:"requestThreeDsAuthenticate",verificationId:t,version:3}),r}}function Ms(e,t){if(!e)throw ls.missingFunctionCallbackError("IframeCustomElement",t);if("function"!=typeof e)throw ls.invalidFunctionCallbackError("IframeCustomElement",t)}function Us(e){if("object"!=typeof e||!e)return"";const t=[];return"string"==typeof e.familyName&&e.familyName&&t.push("familyName"),"string"==typeof e.givenName&&e.givenName&&t.push("givenName"),"string"==typeof e.email&&e.email&&t.push("email"),"string"==typeof e.country&&e.country&&t.push("country"),"string"==typeof e.countryName&&e.countryName&&t.push("countryName"),"string"==typeof e.region&&e.region&&t.push("region"),"string"==typeof e.city&&e.city&&t.push("city"),"object"==typeof e.addressLines&&e.addressLines.join()&&t.push("addressLines"),"string"==typeof e.postalCode&&e.postalCode&&t.push("postalCode"),"string"==typeof e.phone&&e.phone&&t.push("phone"),t.join(",")}class js{constructor(e,t,r,n){this.applicationId=e,this.esLogger=t,this.errorLogger=r,this.instanceId=`sq-analytics-${(new Date).getMilliseconds()}-${1e5*Math.random()}`,function(e,t){if(!e)throw ls.missingArgumentError("applicationId");if("string"!=typeof e)throw ls.invalidArgumentError("applicationId","string");if(t){const e="locationId"in t,r="accountId"in t;if(!e&&!r)throw ls.noIdsError();if(e&&r)throw ls.tooManyIdsError();if(e&&"string"!=typeof t.locationId)throw ls.invalidArgumentError("analyticsParameters.locationId","string");if(r&&"string"!=typeof t.accountId)throw ls.invalidArgumentError("analyticsParameters.accountId","string")}}(e,n),bs.listenFor(this.instanceId,this.messageReceived.bind(this)),n&&(this.verifier=new ks(this.instanceId,this.applicationId,n,this.esLogger,this.errorLogger),this.analyticsParameters=n)}async getToken(){return new Promise(((e,t)=>{try{this._getToken((t=>e(t)))}catch(e){t(e)}}))}async verifyBuyer(e,t,r){return new Promise(((n,i)=>{this._verifyBuyer(e,t,((e,t)=>{e?i(e):n(t)}),r)}))}messageReceived(e){if("receiveToken"===e.type&&"function"==typeof this.tokenCallback)this.tokenCallback(e.token),delete this.tokenCallback;else if("receiveVerification"===e.type||"receiveVerificationUpdate"===e.type){const t="receiveVerification"===e.type?"receive_verification":"receive_verification_update";this.esLogger.trackAnalyticsEvent({analyticsjs_event:t,analyticsjsverification_id:e.verificationId,analyticsjsverification_verification_token:e.response.token}),this.verifier.handleChallenges(e.verificationId,e.response)}else"receiveThreeDsAuthenticate"===e.type&&(this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:e.verificationId,analyticsjsverification_verification_token:e.token}),this.verifier.handleThreeDsAuthenticate(e.verificationId,e.response))}_getToken(e){try{if(void 0!==this.tokenCallback)return;this.tokenCallback=e;const t={applicationId:this.applicationId,instanceId:this.instanceId,type:"requestToken",version:1};bs.send(t)}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"getToken"}}}),ls.unexpectedAnalyticsClientError()}}_verifyBuyer(e,t,r,n){const i=t,o=`verify-buyer-${(new Date).getMilliseconds()}-${1e5*Math.random()}`;try{this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_invoked",analyticsjsverification_amount:i.amount,analyticsjsverification_contact_fields:Us(i.billingContact),analyticsjsverification_currency:i.currencyCode,analyticsjsverification_custom_score:null===i.customScore?void 0:i.customScore,analyticsjsverification_id:o,analyticsjsverification_intent:i.intent,analyticsjsverification_source:e,analyticsjsverification_source_prefix:e.substr(0,5),analyticsjsverification_square_product:i.squareProduct})}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),ls.unexpectedAnalyticsClientError()}try{!function(e,t,r,n,i){const o="verifyBuyer";if(!e)throw ls.analyticsParametersRequiredError();if(void 0===t)throw ls.missingFunctionArgumentError(o,"source");if("string"!=typeof t)throw ls.invalidFunctionArgumentError(o,"source","string");if(!r)throw ls.missingFunctionArgumentError(o,"verificationDetails");if("object"!=typeof r)throw ls.invalidFunctionArgumentError(o,"verificationDetails","object");if(function(e,t){const r="verificationDetails";if("object"!=typeof t.billingContact)throw ls.invalidFunctionArgumentError(e,`${r}.billingContact`,"object");const{customScore:n}=t;if(null!=n){if("number"!=typeof n||Number.isNaN(n))throw ls.invalidFunctionArgumentError(e,`${r}.customScore`,"integer");if(n<0||n>1e3)throw ls.outOfRangeArgumentError(e,`${r}.customScore`,0,1e3,!0)}if("string"!=typeof t.intent)throw ls.invalidFunctionArgumentError(e,`${r}.intent`,"string");if("CHARGE"===t.intent||"CHARGE_AND_STORE"===t.intent){if(!t.currencyCode)throw ls.missingChargeVerificationArgumentError(e,`${r}.currencyCode`);if("string"!=typeof t.currencyCode)throw ls.invalidFunctionArgumentError(e,`${r}.currencyCode`,"string");if(!t.amount)throw ls.missingChargeVerificationArgumentError(e,`${r}.amount`);if("string"!=typeof t.amount)throw ls.invalidFunctionArgumentError(e,`${r}.amount`,"string")}}(o,r),!n)throw ls.missingFunctionCallbackError(o,"verifyBuyerCallback");if("function"!=typeof n)throw ls.invalidFunctionCallbackError(o,"verifyBuyerCallback");void 0!==i&&(function(e){if("string"!=typeof e)throw ls.invalidArgumentError("iframeElementSelector","string");const t=document.querySelector(e);if(null===t)throw ls.missingElementError(e);if(null===t.getAttribute("name"))throw ls.missingElementAttributeError(e,"name");if("iframe"!==t.tagName.toLowerCase()||null===t.contentDocument&&null===t.contentWindow)throw ls.invalidElementTypeError(e,"IFrameElement")}(i.elementSelector),Ms(i.challengeDisplayedCallback,"elementVisibleCallback"),Ms(i.challengeHiddenCallback,"elementRemovedCallback"))}(this.analyticsParameters,e,i,r,n)}catch(t){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_completed",analyticsjsverification_error:t.name,analyticsjsverification_id:o,analyticsjsverification_source:e}),t}try{this.verifier.verifyBuyer(o,e,i,((t,n)=>{const i={analyticsjs_event:"verify_buyer_completed",analyticsjsverification_id:o,analyticsjsverification_source:e};t&&(i.analyticsjsverification_error=t.name),n&&(i.analyticsjsverification_user_challenged=n.userChallenged,i.analyticsjsverification_verification_token=n.token),this.esLogger.trackAnalyticsEvent(i),r(t,n)}),n)}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),ls.unexpectedAnalyticsClientError()}}}const Hs=(e,t,r,n)=>new js(e,t,r,n),Fs=/^https?:\/\//;function Bs(e){if(!e)return"";if(!Fs.test(e))return"[Not Parsable]";const t=new URL(e);return`${t.protocol}//${t.host}`}const Vs={buyer_challenged:"analyticsjsverification",receive_three_ds_authenticate:"analyticsjsverification",receive_verification:"analyticsjsverification",receive_verification_update:"analyticsjsverification",verify_buyer_completed:"analyticsjsverification",verify_buyer_invoked:"analyticsjsverification"};function qs(e){const t=document.cookie.split(";");for(const r of t){const[t,n]=r.split("=");if(void 0!==t&&t.trim()===e&&void 0!==n)return decodeURIComponent(n)}return null}class Gs{constructor(e,t,r,n){const{locationId:i,avt:o}=r;this.es=e,this.errorLogger=n,this.telemetryStarts={},this.baseEvent=function(e,t,r){return"accountId"in r?{anonymous_user_token:t,oauth_credential_account_id:r.accountId,oauth_credential_client_id:e}:{anonymous_user_token:t,oauth_credential_client_id:e,oauth_credential_location_id:r.locationId}}(t,o,{locationId:i??""})}trackAnalyticsEvent(e){try{const t={catalog_name:Vs[e.analyticsjs_event],...this.baseEvent,analyticsjsverification_duration:this.getAnalyticsEventDuration(e),browser_height:window.innerHeight,browser_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,subject_anonymous_token:qs("_savt"),webpage_base_url:ds.windowLocationOrigin,webpage_full_url:Bs(ds.windowLocationHref()),webpage_path:"",webpage_referrer:Bs(window.document.referrer),webpage_referrer_path:"",webpage_referrer_search:"",webpage_search:"",webpage_title:window.document.title,...e};this.es.trackV2(t)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream Track Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}trackTdsEvent(e){try{this.es.trackV2(e)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream TrackTdsEvent Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}getAnalyticsEventDuration(e){const t=e.analyticsjs_event,r=e.analyticsjsverification_id;if("verify_buyer_invoked"===t)return this.telemetryStarts[r]=Date.now(),null;if("verify_buyer_completed"===t){const e=this.telemetryStarts[r];return void 0===e?null:(delete this.telemetryStarts[r],Date.now()-e)}return null}}class zs{constructor(e){this.metricsBatchUrl=`${e.pciConnectApiUrl}/v2/analytics/aux`,this.errorLogger=e.errorLogger,this.analyticsClientVersion=e.analyticsClientVersion,this.metricsBuffer=[],this.disableBeacon=!1}trackV2(e){const t={u_library_name:"analytics-client",u_library_version:this.analyticsClientVersion,...e};this.postMetricsEvent(t,!1)}postMetricsEvent(e,t=!1){this.disableBeacon?Rn(this.metricsBatchUrl,{body:{analytics:[e]}}).catch((t=>{this.errorLogger.addBreadcrumb({data:{event:e},message:"Unable to HTTP Post analytics event",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})})):(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===ds.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=setInterval((()=>{this.buildAndSendBeacon()}),1e3)))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{const e=new Blob([JSON.stringify({analytics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});ds.windowNavigationBeacon(this.metricsBatchUrl,e)}catch(e){this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send beacons for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}}),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Rn(this.metricsBatchUrl,{body:{analytics:this.metricsBuffer}}).catch((e=>{this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send HTTP request for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}})}))}this.metricsBuffer=[]}}}const $s={setupClient(e,t){const{connectApiUrl:r,environment:n,hostname:i,locationId:o,pciConnectApiUrl:a,clientVersion:s,webSdkVersion:c}=t;bs.init(r);const u=void 0===s||""===s?`web-payments-sdk@${c}`:`analytics-client@${s}`,l=new yn({dsn:"https://4197e265423545aba2d849d023e8cd33@o160250.ingest.sentry.io/1516559",environment:n,initialScope:{tags:{applicationId:e,applicationUrl:i,source:"analytics-client",webSdkVersion:c}},release:u}),d=new zs({analyticsClientVersion:u,errorLogger:l,pciConnectApiUrl:a}),h=new Gs(d,e,t,l);return void 0===o?Hs(e,h,l):Hs(e,h,l,{locationId:o})}};var Ys={addStyleElement:function(e,t,r,n){Ws(e,t,document.head).then(r).catch(n)},addStyleElementToTarget:Ws,hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}};function Ws(e,t,r){return new Promise(((n,i)=>{if(Ys.hasExistingStyleElement(t))n();else{var o=document.createElement("link");o.onload=()=>{n()},o.onerror=()=>{i(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))},o.href=e,o.rel="stylesheet",o.type="text/css",o.id=t,r.appendChild(o)}}))}var Ks=Ys;function Xs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(r),!0).forEach((function(t){Zs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Js,ec="".concat(Xn.ASSET_URL,"/square-threeds-modal.css");class tc{constructor(e,t,r){this.applicationId=e,this.locationId=void 0!==t&&t.length>0?t:void 0,this.avt=r}verifyBuyer(e,t){var r,n=this.getAnalyticsClient(),i=Qs(Qs({},t),{},{billingContact:(r=t.billingContact,function(e){return"region"in e||"country"in e||"countryName"in e}(r)?r:{addressLines:r.addressLines,city:r.city,country:r.countryCode,email:r.email,familyName:r.familyName,givenName:r.givenName,phone:r.phone,postalCode:r.postalCode,region:r.state})});return n.verifyBuyer(e,i)}getAnalyticsClient(){if(this.analyticsClient)return this.analyticsClient;Ks.addStyleElement(ec,"sq-threeds-modal-styles");var e=$s.setupClient(this.applicationId,{avt:this.avt,clientVersion:Xn.ANALYTICS_CLIENT_VERSION,connectApiUrl:Xn.CONNECT_API_URL,environment:Xn.env,hostname:a.windowLocation.origin,locationId:this.locationId,pciConnectApiUrl:Xn.API_URL,webSdkVersion:Xn.VERSION});return this.analyticsClient=e,e}}!function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(Js||(Js={})),Xn.HYDRATION_ENDPOINT;var rc="UPDATE_SESSION";class nc{constructor(e,t){this.errorLogger=e,this.messenger=t}}function ic(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function oc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ic(o,n,i,a,s,"next",e)}function s(e){ic(o,n,i,a,s,"throw",e)}a(void 0)}))}}var ac,sc="LOCALE_CHANGED_EVENT";class cc extends nc{constructor(e,t,r,n,i,o,a,s,c,u,l){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=a,this.featureFlagValues=s,this.isTestMerchant=c,this.analyticsBackend=u,this.proofOfWorkComputePromise=l}addLocaleChangedListener(e){this.eventTarget.addEventListener(sc,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(sc,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(sc,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(rc,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(sc,r),this.messenger.sendOneWayMessage(rc,{session:this.session.serialize()}),t}updateSession(e){var t=this;return oc((function*(){t.session.setSessionId(e),t.errorLogger.setCustomTags({sessionId:e}),yield t.messenger.sendOneWayMessage(rc,{session:t.session.serialize()})}))()}waitForProofOfWorkCompletion(){var e=this;return oc((function*(){var t=yield e.proofOfWorkComputePromise;void 0!==t&&t!==e.session.powCounter&&e.session.setPowCounter(t),e.session.serializationHasChanged()&&(yield e.messenger.sendOneWayMessage(rc,{session:e.session.serialize()}))}))()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.GOOGLE_PAY_REQUIRES_HTTPS="GOOGLE_PAY_REQUIRES_HTTPS",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN",e.UNABLE_TO_LOAD="UNABLE_TO_LOAD"}(ac||(ac={}));var uc,lc={message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},dc={message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},hc={message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},pc={message:"Google Pay requires HTTPS. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},fc={message:"Configuration is invalid.",type:"INVALID_CONFIG"},gc={message:"Temporarily unable to register the payment method.",type:"UNABLE_TO_LOAD"},mc={message:"An unknown error has occurred.",type:"UNKNOWN"};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(uc||(uc={}));var vc={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"}};class yc extends Qn{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");n+=" and must be a(n) ".concat(r),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,yc.prototype)}}class Ec extends Qn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,Ec.prototype)}}class _c{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n+=1)r[n]===t&&(r.splice(n,1),n-=1)}dispatchEvent(e,t){if(e in this.listeners){var r=new to(e,t),n=[...this.listeners[e]];for(var i of n)try{i(r)}catch(e){console.error(e)}}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var Sc=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class Ic{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t){Yo(e)?this.logMetricEvent({errorMessage:t,event:e,eventSource:this.eventSource}):zo(e)?this.logMetricEvent({event:e,eventConfigurationValues:t,eventSource:this.eventSource}):this.logMetricEvent({event:e,eventSource:this.eventSource,sloStatus:t})}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}logMetricEvent(e){return this.metricsLogger.logEvent(e,this.session.instanceId,this.session.sessionId,this.paymentMethodTrackingId)}}r(5794);var bc,Ac=[Oi,Ti,Ci,xi];function Oc(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Cc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Oc(o,n,i,a,s,"next",e)}function s(e){Oc(o,n,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(bc||(bc={}));class Tc{constructor(e){this.status=bc.DETACHED,this.eventTarget=new _c,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}static withErrorCapture(e,t,r){return Cc((function*(){try{return yield Promise.resolve(e(...arguments))}catch(e){throw mo.isInstanceOf(e,Ac)?e:(t.captureException(e),new ki("using ".concat(r)))}}))}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve(!0)}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===bc.DESTROYED)throw new Ti(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===bc.ATTACHED)throw new Oi(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==bc.ATTACHED)throw new Ci(this.methodType)}}var wc={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};class Rc extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,Rc.prototype)}}class Pc extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,Pc.prototype)}}class Nc{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t,r={}){if(!0===r.once){const r=t;t=n=>{this.removeEventListener(e,t),r(n)}}if(r.signal){if(r.signal.aborted)return;r.signal.addEventListener("abort",(()=>{this.removeEventListener(e,t)}))}const n=this.listeners.get(e);void 0===n?this.listeners.set(e,[t]):n.push(t);const i=this.eventBuffer.get(e);i&&(i.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new Pc(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0===t?this.eventBuffer.set(e.type,[e]):t.push(e)}}}class Dc{constructor(){this.eventTarget=new Nc}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}const Lc={get DEV_ENV(){return"development"},get IFRAME_NAME(){return"ach_authz"},get PRODUCTION_ENV(){return"production"},get SANDBOX_ENV(){return"sandbox"},get TEST_ENV(){return"test"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}},getIframeSrc(e,t,r){return`${this.getSDKBaseUrlForEnv(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave-${r?"inline":"external"}.html`},getSDKBaseUrlForEnv(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}},xc=function(e,t,r){const n=document.createElement("iframe");return new Promise(((i,o)=>{n.onerror=e=>{o(e)},n.onload=()=>{i(n)},n.setAttribute("id","ach-auth-enclave"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("style","position: fixed; inset: 0px; z-index: 2147483647; border-width: 0px; display: block; overflow: hidden auto;"),n.setAttribute("src",Lc.getIframeSrc(e,t,r)),document.body.append(n)}))},kc=function(e){e.parentElement?.removeChild(e)};class Mc extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,Mc.prototype)}}class Uc extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,Uc.prototype)}}class jc extends Error{constructor(e,t,r){void 0!==r?(super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${null===document.getElementById(r)?"does not exist":"exists"}`),this.iframeID=r):super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`),this.type=e,this.id=t,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,jc.prototype)}}const Hc="channel:connected",Fc="channel:connecting",Bc="channel:close",Vc="channel:error";class qc{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(Fc):this.handleConnecting(e);break;case this.messageWithName(Hc):this.handleConnected();break;case this.messageWithName(Bc):this.close();break;case this.messageWithName(Vc):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=void 0!==e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(Bc)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new Mc("message channel is already connected");if(e){if(void 0===e.origin)throw new Mc("message channel remote.origin must be defined");if(null===e.window)throw new Mc("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(Fc),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new Mc("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(Hc)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new Mc("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(Vc)),this.errorHandler&&this.errorHandler(new Mc("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}function Gc(){return`${Date.now()}${Math.floor(8e3*Math.random())}`}var zc,$c;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(zc||(zc={}));class Yc{constructor(e={}){this.messageListeners=new Map,this.channel=new qc(e.name),this.channel.onmessage=this.handleMessage.bind(this),void 0!==e.payloadSerializer&&(this.payloadSerializer=e.payloadSerializer),void 0!==e.errorSerializer&&(this.errorSerializer=e.errorSerializer)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Gc(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Gc(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Gc(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${zc.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${zc.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t=Gc()){return this.addMessageEventListener(e,t),t}connect(e,t){void 0!==t&&(this.iframeID=t),this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners.get(e.data.type);void 0!==e.data.type&&"undefined"!==e.data.type?t?(!0===e.data.mustAcknowledge&&this.acknowledge(e.data),t.forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new Mc(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new Uc("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new jc(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const{errorSerializer:t}=this,{payloadSerializer:r}=this;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[zc.ACK,zc.OK,zc.ERROR].forEach((t=>{const r=this.messageListeners.get(`${e.type}:${t}`);void 0!==r&&r.delete(n)}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((a,s)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),a({}))},messageType:`${e.type}:${zc.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0===r)a(t);else{const e=r.deserialize(t);a(e)}},messageType:`${e.type}:${zc.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0===t)s(r);else{const e=t.deserialize(r);s(e)}},messageType:`${e.type}:${zc.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${zc.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,payload:void 0,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new Uc("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e,i=this.messageListeners.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else this.messageListeners.set(r,new Map([[t,[n]]]))}}!function(e){e.CAPTURE_AUTHORIZATION="CAPTURE_AUTHORIZATION"}($c||($c={}));const Wc=function(){const e={name:Lc.IFRAME_NAME};return new Yc(e)},Kc=async function(e,t,r){const n=Lc.getSDKBaseUrlForEnv(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},Xc=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/,Qc=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];function Zc(e){return"string"==typeof e&&e.length>0}const Jc={build(e,t,r){const n=Wc(),i=new Dc;return Promise.resolve(Object.freeze({addEventListener:function(e,t){i.addEventListener(e,t)},captureAuthorization:async function(o){let a;try{const s=function(e){if(!e.idempotencyKey)throw new Rc("idempotencyKey is invalid");if(!e.applicationId)throw new Rc("applicationId is invalid");if(!e.locationId)throw new Rc("locationId is invalid");if(null===e.total||!("total"in e))throw new Rc("total needs to be provided");if("object"!=typeof e.total)throw new Rc("total needs to be a struct with amount and currencyCode");if("number"!=typeof e.total.amount)throw new Rc("total.amount needs to be a number");if(!Zc(e.total.currencyCode))throw new Rc("total.currencyCode needs to be valid");const t={applicationId:e.applicationId,idempotencyKey:e.idempotencyKey,locationId:e.locationId,total:e.total};if("CHARGE"!==e.intent&&"RECURRING_CHARGE"!==e.intent)throw new Rc("intent needs to be one of CHARGE or RECURRING_CHARGE");if("CHARGE"===e.intent){if("bankNonce"in e&&"bankAccountId"in e)throw new Rc("only one of bankNonce or bankAccountId needs to be provided");if("bankNonce"in e&&Zc(e.bankNonce))return{...t,bankNonce:e.bankNonce,kind:"ONE_TIME_BANK_NONCE"};if("bankAccountId"in e&&Zc(e.bankAccountId))return{...t,bankAccountId:e.bankAccountId,kind:"ONE_TIME_BANK_ACCOUNT_ID"};throw new Rc("one of bankNonce or bankAccountId needs to be provided")}{if(!e.bankAccountId)throw new Rc("bankAccountId needs to be provided for recurring payments");if("WEEKLY"!==e.cadence&&"MONTHLY"!==e.cadence)throw new Rc("Unsupported cadence. Must be one of: WEEKLY, MONTHLY");if(!e.startDate)throw new Rc("Invalid startDate");const r=function(e){const t=function(e){const t=e.match(Xc);if(!t)throw new Rc("Date did not match the YYYY-MM-DD format");const[r,n,i,o]=t.map(Number);return new Date(n,i-1,o)}(e);if(function(e,t){const r=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`,n=new Date(`${r}T00:00:00${t}`),i=new Date(n.getTime());return i.setDate(i.getDate()+1),{endDate:i,endDateMillis:i.getTime(),startDate:n,startDateMillis:n.getTime()}}(t,"-08:00").endDateMillis<Date.now())throw new Rc("Start date is already over");return{day:t.getDate(),month:t.getMonth()+1,weekday:Qc[t.getDay()],year:t.getFullYear()}}(e.startDate);return{...t,bankAccountId:e.bankAccountId,cadence:e.cadence,kind:"RECURRING",startDate:r}}}(o);a=await xc(e,t,r),await Kc(n,a,e);const c=await n.request($c.CAPTURE_AUTHORIZATION,s);"success"===c.kind?i.dispatchEvent({token:c.token,type:"signed"}):i.dispatchEvent({type:"canceled"})}catch(e){i.dispatchEvent({error:e,type:"error"})}a&&kc(a)}}))}};var eu=["bankAccountDetails"];function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ru(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nu(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var iu,ou={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:a,onError:s}=e;function c(){var e;return e=function*(e){var c=!i.getFeatureFlagValues().use_external_ach_iframe,u=yield Jc.build(t,Xn.VERSION,c);i.metricsHandler.logEvent("ACH_AUTH:START");var{bankAccountDetails:l}=e,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,eu);u.addEventListener("signed",(function(e){o(e.token,l),i.metricsHandler.logEvent("ACH_AUTH:OK")})),u.addEventListener("canceled",(function(){i.metricsHandler.logEvent("ACH_AUTH:CANCEL"),a()})),u.addEventListener("error",(function(e){var{error:t}=e;t instanceof Rc?s(new di(t.message)):(s(new ki("authorizing the payment")),i.errorLogger.captureException(t)),i.metricsHandler.logEvent("ACH_AUTH:ERROR")})),yield u.captureAuthorization(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(r),!0).forEach((function(t){ru(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({applicationId:n.applicationId,idempotencyKey:r,locationId:n.locationId},d))},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){nu(o,n,i,a,s,"next",e)}function s(e){nu(o,n,i,a,s,"throw",e)}a(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}},au=function(){var e=document.createElement("div");return e.setAttribute("style","position:fixed; top: 0; left: 0; width: 100vw; height: 100%; z-index: 3; background-color: ".concat("rgba(0, 0, 0, 0.8)","; opacity: 0;")),document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))},su=function(e){e&&(e.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){e.style.opacity="0"})),setTimeout((function(){e.remove()}),160))};!function(e){e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(iu||(iu={}));class cu{constructor(e){this.id=Sc(),this.context=e}request(e,t){return this.context.messenger.request(e,{body:t,featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession()})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}class uu extends Error{constructor(e,t,r){super(`error loading script ${e}: ${t} ${r?r.toString():""}`),this.name="ScriptLoaderError",Object.setPrototypeOf(this,uu.prototype)}}const lu={};function du(e){delete lu[e],document.getElementById(e)?.remove()}function hu(e,t){const r=t();if(void 0!==r)return Promise.resolve(r);if(e.id in lu)return lu[e.id];const n=document.createElement("script");for(const t in e){const r=e[t];void 0!==r&&n.setAttribute(t,r)}return lu[e.id]=new Promise(((r,i)=>{n.onload=()=>{const n=t();void 0===n?(du(e.id),i(new uu(e.src,"location returned undefined"))):r(n)},n.onerror=(t,r,n,o,a)=>{du(e.id),i(new uu(e.src,"Unknown error occurred",a))}})),document.body.appendChild(n),lu[e.id]}function pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fu(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gu(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function mu(){var e;return e=function*(e,t,r,n){try{var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(r),!0).forEach((function(t){fu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"square-payments-".concat(e,"-script")},t);return yield hu(i,(()=>{var e;return"google.payments"===r?null===(e=window.google)||void 0===e?void 0:e.payments:window[r]}))}catch(e){throw n.captureException(e),new Ai(gc)}},mu=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){gu(o,n,i,a,s,"next",e)}function s(e){gu(o,n,i,a,s,"throw",e)}a(void 0)}))},mu.apply(this,arguments)}var vu={load:function(e,t,r,n){return mu.apply(this,arguments)}};function yu(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var Eu=new Set(["ITEM_ERROR"]),_u=new Set(["en","es"]),Su=["US"];function Iu(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function bu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Iu(o,n,i,a,s,"next",e)}function s(e){Iu(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Au=(e,t)=>bu((function*(){var r=new cu(e),n=function(e,t,r,n){var i;function o(){var s;return s=function*(){var o=yield function(e,t){var r=e.getSession();if(void 0===r.locationId||""===r.locationId)throw new ki("locationId not defined when creating OAuth Plaid Link Session");var n=a.windowNavigationLanguage.slice(0,2),i={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,languageCode:n,locationId:r.locationId,redirectUri:""}};return t.request(iu.CREATE_OAUTH_PLAID_LINK_SESSION,i)}(t,r);return function(r){return new Promise(((o,s)=>{var[c]=a.windowNavigationLanguage.split("-");_u.has(c)||(c="en");var{errorLogger:u,metricsHandler:l,isTestMerchant:d}=t,h="sandbox";Xn.env!==Pn.production||d||(h="production"),i=e.create({clientName:"Square, Inc.",countryCodes:Su,env:h,language:c,onEvent:(e,t)=>{e!==Hn.ERROR||Eu.has(t.error_type)||u.captureException(new wo("PlaidErrorEvent: ".concat(JSON.stringify(t)),Wi.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(l.logEvent("EXTERNAL_SESSION:ERROR"),Eu.has(e.error_type)||u.captureException(new wo("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(JSON.stringify(t)),Wi.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(0===t.accounts.length){l.logEvent("EXTERNAL_SESSION:ERROR");var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return u.captureException(n),void s(n)}l.logEvent("EXTERNAL_SESSION:OK"),o({gringottsSessionToken:r.gringottsSessionToken,kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id})},product:["auth"],token:r.plaidLinkToken}),l.logEvent("EXTERNAL_SESSION:START"),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=s.apply(e,t);function o(e){yu(i,r,n,o,a,"next",e)}function a(e){yu(i,r,n,o,a,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(yield vu.load("plaid-link",{src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},"Plaid",e.errorLogger),e,r,{onEvent:t});function i(){return i=bu((function*(e){var t=yield n.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return o.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:Xi.CANCEL}})),i.apply(this,arguments)}function o(){return(o=bu((function*(t,n,i,o){yield e.waitForProofOfWorkCompletion();var a=e.getSession(),s={accountHolderName:t,gringottsSessionToken:o,plaidPublicToken:n,selectedPlaidBankAccountId:i},c={bankNonceRequest:{clientId:a.applicationId,instanceId:a.instanceId,locationId:a.locationId,paymentMethodTrackingId:e.getPaymentMethodTrackingId(),plaidLinkData:s,sessionId:a.sessionId,websdkVersion:Xn.VERSION}};try{var u=yield r.request(iu.REQUEST_ACH_BANK_NONCE,c);return e.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{accountDetails:u.accountDetails,bankNonce:u.bankNonce,status:Xi.OK}}catch(e){throw e instanceof xi?e:new xi([Do])}}))).apply(this,arguments)}return Object.freeze({destroy:function(){n.destroy()},run:function(e){return i.apply(this,arguments)}})}))();function Ou(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Cu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ou(o,n,i,a,s,"next",e)}function s(e){Ou(o,n,i,a,s,"throw",e)}a(void 0)}))}}class Tu extends Tc{constructor(e,t){var r;super(e),this.methodType=Wi.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(mo.isNonBlankString(e)){var t;try{t=new URL(e)}catch(t){throw new fi("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new fi("redirectURI",e,"URI must not contain query parameters");return!0}throw new fi("redirectURI","".concat(e),"Must be a valid URI")}(null==t?void 0:t.redirectURI)}catch(e){this.metricsHandler.logEvent("INVALID_REDIRECT_URI",e.message)}try{!function(e){if(mo.isNonBlankString(e)){if(e.length>50)throw new fi("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new fi("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==t?void 0:t.transactionId)}catch(e){this.metricsHandler.logEvent("INVALID_TRANSACTION_ID",e.message)}this.transactionId=null!==(r=null==t?void 0:t.transactionId)&&void 0!==r?r:Sc()}initialize(){var e=this;return Cu((function*(){var t=e.dispatchPlaidEvent.bind(e);e.plaidNonceFlow=yield Au(e.context,t),e.achAuthFlow=ou.build({context:e.context,env:Xn.env,onCanceled:e.dispatchCancelResult.bind(e),onError:e.dispatchError.bind(e),onSigned:e.dispatchSuccessfulTokenResult.bind(e),session:e.session,transactionId:e.transactionId})}))()}tokenize(e){var t=this;return Cu((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new xi([wc]);if(void 0===e||"string"!=typeof e.accountHolderName||""===e.accountHolderName.trim())throw new Zn;var r=t.context.getFeatureFlagValues().can_use_ach_auth;if(!function(e,t){switch(t){case"NO_SUPPORT":return Ru(e);case"SUPPORTED":case"LEGACY":return!0;case"REQUIRED":return!Ru(e);default:return!1}}(e,r))throw new di("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(Hn.ON_TOKENIZATION)){var n="Add event listener for '".concat(Hn.ON_TOKENIZATION,"' before calling tokenize.");console.error("".concat(n," This will result in an error when using the Plaid OAuth flow."))}if(void 0===t.achAuthFlow||void 0===t.plaidNonceFlow)throw new ki("Must call initialize() before tokenize() call");if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return wu(e)&&"RECURRING_CHARGE"===e.intent}(e))return t.veil=yield au(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,cadence:e.cadence,intent:e.intent,startDate:e.startDate,total:e.total}));if(function(e){return wu(e)&&"CHARGE"===e.intent}(e)&&void 0!==e.bankAccountId&&""!==e.bankAccountId)return t.veil=yield au(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,intent:e.intent,total:e.total}));Ru(e)?(t.context.metricsHandler.logEvent("ACH_LEGACY:START"),console.warn("You need to add two new parameters to ach.tokenize(), intent and total, before January 29, 2025 to continue processing ACH payments with the Web Payments SDK. Please complete these steps ASAP to prevent failed ACH payments: https://developer.squareup.com/docs/web-payments/add-ach#step-2-get-the-payment-token-from-the-ach-payment-method")):t.veil=yield au();var i=yield t.plaidNonceFlow.run(e);if(Ru(e)||"LEGACY"===r)switch(t.context.metricsHandler.logEvent("ACH_LEGACY:OK"),i.status){case Xi.OK:var o=t.buildSuccessfulTokenResult(i.bankNonce,i.accountDetails);return t.dispatchTokenizationEvent(o),t.resetFirstInteraction(),o;case Xi.CANCEL:var a=t.buildCancelTokenResult();return t.dispatchTokenizationEvent(a),a;default:throw new ki("Unexpected tokenize flow status")}return void(yield t.runAchAuthFlowBasedOnPlaidResult(i,e))}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1,su(t.veil)}}))()}destroy(){var e;return this.status=bc.DESTROYED,this.metricsHandler.logEvent("DESTROYED"),null===(e=this.plaidNonceFlow)||void 0===e||e.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return Cu((function*(){if(e.status===Xi.CANCEL)r.dispatchTokenizationEvent(r.buildCancelTokenResult());else switch(t.intent){case"CHARGE":yield r.achAuthFlow.run({bankAccountDetails:e.accountDetails,bankNonce:e.bankNonce,intent:t.intent,total:t.total});break;case"STORE":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new di("Unsupported intent ".concat(t.intent,". Must be one of: CHARGE, STORE, RECURRING_CHARGE"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}buildCancelTokenResult(){return{status:Xi.CANCEL}}buildSuccessfulTokenResult(e,t){var r={status:Xi.OK,token:e};return t&&(r.details={bankAccount:t,method:Wi.ACH}),r}dispatchCancelResult(){this.dispatchTokenizationEvent(this.buildCancelTokenResult())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=this.buildSuccessfulTokenResult(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(Hn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(Hn.ON_TOKENIZATION,{tokenResult:e})}}function wu(e){return"intent"in e}function Ru(e){return!("intent"in e)}var Pu,Nu=[ti,ri,ni,ii],Du=[xi];!function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(Pu||(Pu={}));var Lu,xu,ku,Mu,Uu=new Set(["DIV","SPAN"]),ju=new Set(["DIV","SPAN"]),Hu=new Set(["DIV","SPAN","BUTTON"]);function Fu(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new si(e);r=n}else{if(!(e instanceof HTMLElement))throw new wi(e,t);if(r=e,!document.contains(r))throw new si(r)}if(!t.has(r.nodeName))throw new wi(r,t);return r}function Bu(e){return Fu(e,Uu)}function Vu(e){return Fu(e,Hu)}function qu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(r),!0).forEach((function(t){zu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zu(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $u(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((n=>{var[i,o]=n;if("object"==typeof o){var a=$u("object"==typeof e[i]?e[i]:{},t[i]);return a.missingFields.forEach((e=>{var[t,n]=e;r.push(["".concat(i,".").concat(t),n])})),a.isValid}return i in e&&typeof e[i]===o||(r.push([i,o]),!1)})).every(Boolean),missingFields:r}}function Yu(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=$u({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Gu(Gu({},e.missingFieldsMap),o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(Lu||(Lu={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(xu||(xu={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(ku||(ku={})),function(e){e.UPDATE="update"}(Mu||(Mu={})),r(8319),r(3108);var Wu="".concat(Xn.ASSET_URL,"/afterpay.css"),Ku="sq-afterpay-styles",Xu={[Fn.BLACK]:{[Bn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[Bn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[Bn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[Fn.MINT]:{[Bn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[Bn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[Bn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},Qu={[Fn.BLACK]:{[Bn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[Bn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[Bn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[Fn.MINT]:{[Bn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[Bn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[Bn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},Zu=new Set(["US","CA","AU","NZ"]);function Ju(e,t){var r=0;return e.forEach((e=>{r+=mo.paymentRequestAmountToMoneyAmount(e,t)})),mo.moneyAmountToPaymentRequestAmount(r,t)}function el(e,t){return Ju(e.map((e=>e.amount)),t)}var tl=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},rl=function(e,t){return e.map((e=>({amount:{amount:e.amount,currency:t},displayName:e.label})))},nl=function(e,t){return e.map((e=>({imageUrl:e.imageUrl,name:e.label,pageUrl:e.productUrl,price:{amount:e.amount,currency:t},quantity:1,sku:e.id})))},il=function(e,t){return e.shippingOptions.map((e=>{var r;return{description:"",id:e.id,name:e.label,orderAmount:{amount:e.total.amount,currency:t.currencyCode},shippingAmount:{amount:e.amount,currency:t.currencyCode},taxAmount:{amount:el(null!==(r=e.taxLineItems)&&void 0!==r?r:[],t.currencyCode),currency:t.currencyCode}}}))},ol=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=el(e.lineItems,e.currencyCode);return e.discounts&&(t=Ju([t,(r=e.discounts,n=e.currencyCode,"-".concat(el(r,n)))],e.currencyCode)),{amount:t,currency:e.currencyCode}}var r,n;return{amount:Ju([e.total.amount],e.currencyCode),currency:e.currencyCode}},al=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}},sl=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{addressLines:n,city:e.suburb,countryCode:e.countryCode,familyName:r,givenName:t,phone:e.phoneNumber,postalCode:e.postcode,state:e.state}};function cl(e,t){return $u({[t]:e},{[t]:{addressLines:"object",city:"string",countryCode:"string",familyName:"string",givenName:"string",postalCode:"string",state:"string"}})}var ul=function(e){return cl(e,"shippingContact")};function ll(e){var[t,r]=e.split("-");return Zu.has(r)}var dl=function(e,t){return ll(t)?Xu[e]:Qu[e]},hl=function(e){return ll(e)?"afterpay-brand.svg":"clearpay-brand.svg"};function pl(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var fl=[25,50,75,100];class gl{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var{today:r,weeks:n}=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget;this.periodText=[r,"2 ".concat(n),"4 ".concat(n),"6 ".concat(n)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(Mu.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,Ks.addStyleElement(Wu,Ku,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new ki("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>mo.moneyAmountToInternationalizedCurrency(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=hl(n.locale),a='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(Xn.staticAsset(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*fl[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.periodText[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",a),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){pl(o,n,i,a,s,"next",e)}function s(e){pl(o,n,i,a,s,"throw",e)}a(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=hl(this.locale);e.src=Xn.staticAsset(t)}this.buildAmounts().map((e=>mo.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=mo.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return ml(t,0);case 1:return ml(t,1);case 2:return ml(t,-2);case 3:return ml(t,-1);default:return[]}}}function ml(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function vl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(r),!0).forEach((function(t){El(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function El(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _l(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Sl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){_l(o,n,i,a,s,"next",e)}function s(e){_l(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Il=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),bl=new Set(["AUD","GBP","USD","CAD","EUR"]),Al={[Fn.BLACK]:"#000",[Fn.MINT]:"#b2fce4"};class Ol extends Tc{constructor(e,t,r,n,i){if(super(n),this.methodType=Wi.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new cu(this.context),this.total=this.totalMoney(),void 0===this.session.locationId||""===this.session.locationId)throw new Ai(fc,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}))}attach(e,t){var r=this;return Sl((function*(){var n;r.throwIfDestroyedOrAlreadyAttached(),r.status=bc.ATTACHED,r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logEvent("CONFIGURED",t);try{n=Vu(e)}catch(e){throw r.metricsHandler.logEvent("ATTACH:ERROR","good"),r.status=bc.DETACHED,e}if(!0!==(null==t?void 0:t.useCustomButton)){var i,o,a=document.createElement("div");n.appendChild(a);var s=a.attachShadow({mode:"open"});try{yield Ks.addStyleElementToTarget(Wu,Ku,s)}catch(e){throw r.status=bc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new ki("attaching Afterpay")}var c=null!==(i=null==t?void 0:t.buttonColor)&&void 0!==i?i:Fn.BLACK,u=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Bn.BuyNowWithAfterpay;if(!["black","mint"].includes(c))throw r.status=bc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new fi("buttonColor",c);var l=dl(c,r.session.locale)[u];if(!l)throw r.status=bc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","bad"),new fi("buttonType",u);var d=document.createElement("button");d.setAttribute("type","button"),d.setAttribute("class","sq-ap__button"),d.setAttribute("style","background-color: ".concat(Al[c],"; background-image: url(").concat(Xn.staticAsset(l),");")),s.append(d)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===Vn.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent("ATTACH:OK","good"),r.element=n,r.onTokenizeHandlerAdded&&r.element.addEventListener("click",Sl((function*(){yield r.openPaymentModal()})))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){Fu(e,ju)}(e),this.afterpayMessagingLibrary.createPlacements({attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size},targetSelector:e}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return Sl((function*(){if(!bl.has(r.req.currencyCode))throw new oi("Currency is not supported by Afterpay. Valid currencies are: ".concat([...bl].join(", ")));var n=new gl(r.req,r.context),i=Vu(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=mo.convertLocaleToUnderscore(this.session.locale);Il.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(yl(yl({},e),{},{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",Sl((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return Sl((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new Jn;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new xi([No.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===bc.DESTROYED?Promise.resolve(!1):(this.detachElement(bc.DESTROYED,"DESTROYED"),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(bc.DETACHED,"DETACHED"),Promise.resolve(!0)}internalSetCheckoutToken(){var e=this;return Sl((function*(){try{var t=yield e.paymentMessenger.request(Pu.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw mo.isInstanceOf(t,[...Nu,_i,ci,oi])||(e.errorLogger.captureException(t),r=new ki("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return Sl((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent("FIRST_INTERACTION:OK")),t.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),t.emitTokenizationResult(void 0,r),e.reject(r.message)}}))()}completeCheckout(e){var t=this;return Sl((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){yield t.context.waitForProofOfWorkCompletion();var r=yield t.paymentMessenger.request(Pu.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.metricsHandler.logEvent("EXTERNAL_SESSION:OK");var n={details:{method:Wi.AFTERPAY_CLEARPAY,shipping:{contact:{email:r.afterpayData.email}}},status:Xi.OK,token:r.token};r.billingContact&&(n.details.billing=r.billingContact),r.shippingContact&&(n.details.shipping={contact:r.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(n)}else t.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),t.emitTokenizationResult({status:Xi.CANCEL})}catch(e){var i=e;t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),mo.isInstanceOf(e,Du)||(t.errorLogger.captureException(e),i=new ki("tokenizing Afterpay")),t.emitTokenizationResult(void 0,i)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.total.amount=mo.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(Yn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:al(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(Yn.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new ei("PaymentRequest",Yn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(Lu.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.req.dispatchEvent(Yn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:sl(e)},(e=>{if(void 0===e.error)if(e.shippingErrors)t.reject(Lu.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=il(e,r);t.resolve(n)}else t.reject(Lu.SHIPPING_ADDRESS_UNSUPPORTED)}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({error:t,result:e}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,instanceID:this.session.instanceId,locationID:this.locationID,paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact,sessionID:this.session.sessionId,websdkVersion:Xn.VERSION}}buildCheckoutPayload(){var e,t={amount:ol(this.req),applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl};if(this.req.lineItems&&(t.items=nl(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=rl(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=ul(e);if(!r.isValid)throw new ci(r.missingFields);t.shipping=tl(e)}return t}totalMoney(){return{amount:mo.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return Sl((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({reject:r,resolve:t})}));e.afterpayLibrary.transfer(yl({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(Sc()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,a={addressMode:this.transferOptions.addressMode,countryCode:this.req.countryCode,onCommenceCheckout:(o=Sl((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=Sl((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),shippingOptionRequired:this.req.requestShippingContact,target:"#".concat(n.id)};this.req.requestShippingContact?(a.onShippingAddressChange=this.onShippingAddressChange.bind(this),a.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(a),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}var Cl,Tl,wl=function(e){var t="b8a38183b2e5959390488e48f9b109f6a73fd53c",r="https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(t);return Xn.env===Pn.staging&&(r="https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(t)),Xn.env!==Pn.production||e.isTestMerchant||(r="https://portal.afterpay.com/afterpay.js?merchant_key=".concat(t)),Promise.all([vu.load("afterpay",{src:r},"AfterPay",e.errorLogger),vu.load("afterpay-messaging",{src:"https://js.afterpay.com/afterpay-1.x.js"},"Afterpay",e.errorLogger)])},Rl={buildIframeWithAttributes:function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},removeIframe:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},Pl=[Ci,Di,Pi,Ni,Li],Nl=[Pi,Ni,Di,Li,Oi,Ti,ki],Dl=[xi,Ci,Ec];!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(Cl||(Cl={})),function(e){e.CARD_BRAND_CHANGED="cardBrandChanged",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.SET_POSTAL_COUNTRY="setPostalCountry",e.ESCAPE="escape",e.SUBMIT="submit"}(Tl||(Tl={}));var Ll=["top","right","bottom","left"],xl="sq-focus",kl="sq-error",Ml=".".concat(xl),Ul=".".concat(kl),jl={ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/},Hl=/\s(?![^(]*\))/,Fl=new Set(["screen","all","print","speech"]),Bl=new Set(["and"]),Vl=new Set(["not","only"]),ql=new Set(["portrait","landscape"]),Gl=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),zl=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),$l=new Set([100,200,300,400,500,600,700,800,900]),Yl=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Wl=new Set(["normal"]),Kl=new Set(["smaller","larger"]),Xl=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Ql=new Set(["none","antialiased","subpixel-antialiased"]),Zl=new Set(["grayscale","auto"]),Jl=new Set(["none"]);function ed(e){return e.split(/, ?(?![^(]*\))/).every((e=>function(e){if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r+=1),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n+=1){var i=t.shift();if(void 0===i||!ad(i))return!1}switch(t.length){case 0:return!0;case 1:return ud(t[0])||cd(t[0]);case 2:return cd(t[0])&&(ud(t[1])||sd(t[1]));case 3:return cd(t[0])&&sd(t[1])&&ud(t[2]);default:return!1}}(e)))}function td(e){return["border-box","content-box"].includes(e)}function rd(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||Sd(e)||Ad(e)}(e)))}function nd(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(id)}function id(e){return 0===Number(e)||Sd(e)||Ad(e)}function od(e){return 0===Number(e)||Sd(e)||Ad(e)||Id(e)||Od(e)}function ad(e){return 0===Number(e)||_d(e)||bd(e)}function sd(e){return 0===Number(e)||_d(e)||bd(e)}function cd(e){return 0===Number(e)||Sd(e)||Ad(e)}function ud(e){return function(e){return zl.has(e.toLowerCase())}(e)||function(e){return jl.HEX.test(e)}(e)||function(e){return jl.RGB.test(e)}(e)||function(e){return jl.RGBA.test(e)}(e)}function ld(e){return function(e){return Gl.has(e.toLowerCase())}(e)||function(e){return Kl.has(e.toLowerCase())}(e)||Sd(e)||Cd(e)||Ad(e)||Td(e)}function dd(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Xl.has(t);var t}))}function hd(e){var t=Number(e);return Number.isNaN(t)?Yl.has(e.toLowerCase()):$l.has(t)}function pd(e){return"normal"===e||bd(e)||function(e){return Cd(e)||function(e){return jl.NEGATIVE_PT.test(e)}(e)}(e)||_d(e)}function fd(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||Wl.has(e)||Ad(e)||Sd(e)||Cd(e)||Td(e)}function gd(e){return Ql.has(e)}function md(e){return Zl.has(e)}function vd(e){return Jl.has(e)}function yd(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return Sd(e)||Ad(e)||Td(e)||0===Number(e)}(e)))}function Ed(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return Sd(n)||Ad(n)||Td(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return jl.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return jl.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return ql.has(e)}(n);default:return!1}}function _d(e){return Sd(e)||Id(e)}function Sd(e){return jl.POSITIVE_PX.test(e)}function Id(e){return jl.NEGATIVE_PX.test(e)}function bd(e){return Ad(e)||Od(e)}function Ad(e){return jl.POSITIVE_EM.test(e)}function Od(e){return jl.NEGATIVE_EM.test(e)}function Cd(e){return jl.POSITIVE_PT.test(e)}function Td(e){return jl.POSITIVE_PERCENT.test(e)}var wd={sanitizeDeclarationValue:function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return ud;case"-webkit-box-shadow":case"box-shadow":return ed;case"box-sizing":return td;case"font-family":return dd;case"font-size":return ld;case"font-weight":return hd;case"letter-spacing":return pd;case"line-height":return fd;case"padding":return yd;case"-webkit-font-smoothing":return gd;case"-moz-osx-font-smoothing":return md;case"display":return vd;case"border-radius":return rd;case"border-width":return nd;case"top":case"bottom":case"left":case"right":return od;case"width":return function(e){return""!==e};default:return}})(e);return r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},validateMediaQuery:function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(Hl);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(Vl.has(t[0])&&(n=1),t.length===n+1)return Fl.has(t[n]);if(!Fl.has(t[n])||!Bl.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?Ed(o):Bl.has(o)))return!1;return!0}));var t}};function Rd(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Pi(e);var i=mo.cssProperty(e),o=wd.sanitizeDeclarationValue(i,t);if(0===o.length)throw new Ni(e,t);return n&&(o+=" !important"),mo.formatCSSKeyValuePair(i,o)}function Pd(e,t,r){var n,i=[],o=[],a=new Set(null!==(n=e.excludeProperties)&&void 0!==n?n:[]);for(var[s,c]of Object.entries(t))if(!a.has(s))try{i.push(Rd(s,null!=c?c:"",r))}catch(e){o.push(e)}if(o.length>0)throw new Li(o);return Object.fromEntries(e.toSelectors.map((function(e){return[e,i]})))}function Nd(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:a,toProperty:s,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(mo.isNonBlankString(l)){var d=u?u(l):l;try{var h=Rd(null!=s?s:o,d,void 0!==s?[...r,s]:r,a);c.forEach((e=>{e in n||(n[e]=[]),n[e].push(h)}))}catch(e){i.push(e)}}})),i.length>0)throw new Li(i);return n}var Dd,Ld={borderChainToDirectionValue:function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},compileStyleString:function e(t,r,n){var i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],s=[...Object.keys(r.selectorMappings),...Object.keys(null!==(i=r.selectorPropertyMappings)&&void 0!==i?i:{})],c=new Set(s),u=new Set(Object.values(n));Object.keys(t).forEach((e=>{u.has(e)||function(e,t){return!t&&wd.validateMediaQuery(e)}(e,o)||a.push(new Di(e))}));var l={};function d(e){for(var[t,r]of Object.entries(e))t in l||(l[t]=[]),l[t].push(...r)}for(var h of c){var p,f,g,m,v=t[h],y=null!==(p=r.allowedAttributes[h])&&void 0!==p?p:[],E=null!==(f=r.selectorMappings[h])&&void 0!==f?f:[],_=null!==(g=null===(m=r.selectorPropertyMappings)||void 0===m?void 0:m[h])&&void 0!==g?g:[];if(v){try{d(Pd(E,v,y))}catch(e){e instanceof Li&&a.push(...e.errors)}try{d(Nd(_,v,y))}catch(e){e instanceof Li&&a.push(...e.errors)}}}if(Object.keys(t).filter((e=>!c.has(e)&&wd.validateMediaQuery(e))).forEach((i=>{try{var o=e(t[i],r,n,!0);l[i]=[o]}catch(e){a.push(...e.errors)}})),a.length>0)throw new Li(a);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(l)}},xd="sq-card-iframe-container",kd="sq-card-wrapper",Md="sq-card-component",Ud="sq-card-message",jd="sq-card-message-error",Hd="sq-card-message-no-error",Fd="sq-visible",Bd=".".concat(kd),Vd=".".concat(Md),qd=".".concat(xd),Gd="".concat(Bd).concat(Ml),zd="".concat(Bd).concat(Ul),$d="".concat(Bd," ").concat(Vd),Yd="".concat(Bd," ").concat(qd),Wd="".concat(Gd," ").concat(qd),Kd="".concat(zd," ").concat(qd),Xd=".sq-card-message-error",Qd=".sq-card-message-error::before",Zd=".sq-card-message-no-error",Jd=".sq-card-message-no-error::before",eh="".concat(qd).concat("::before"),th=["borderWidth"];function rh(e){var t=["".concat(e).concat(Ul," ").concat(eh),"".concat(e).concat(Ml," ").concat(eh)];return Ll.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=Ld.borderChainToDirectionValue(r,e);return t.startsWith("0")?t:"-".concat(t)})};var r}))}function nh(e,t){return Ld.compileStyleString(e,function(e){var t="#".concat(e);return{allowedAttributes:{[xn.CARD_COMPONENT]:Qi,[xn.CARD_COMPONENT_FOCUS]:Zi,[xn.CARD_COMPONENT_ERROR]:Zi,[xn.CARD_INPUT_HELPER_TEXT]:Ji,[xn.CARD_INPUT_HELPER_ICON]:eo,[xn.CARD_INPUT_ERROR_TEXT]:Ji,[xn.CARD_INPUT_ERROR_ICON]:eo},selectorMappings:{[xn.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Yd)]},[xn.CARD_COMPONENT_FOCUS]:{excludeProperties:th,toSelectors:["".concat(t).concat(Wd)]},[xn.CARD_COMPONENT_ERROR]:{excludeProperties:th,toSelectors:["".concat(t).concat(Kd)]},[xn.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(Zd)]},[xn.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Jd)]},[xn.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(Xd)]},[xn.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Qd)]}},selectorPropertyMappings:{[xn.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Yd)]}],[xn.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(eh),"".concat(t).concat($d)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Yd)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=Ld.borderChainToDirectionValue(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...rh(t)],[xn.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(Ul," ").concat(eh)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Ul," ").concat(eh)]}],[xn.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(Ml," ").concat(eh)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Ml," ").concat(eh)]}],[xn.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Qd)]}],[xn.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Jd)]}]}}}(t),xn)}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(Dd||(Dd={}));class ih{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,merchantName:n,applicationId:i,avt:o,hostname:a,locationId:s,instanceId:c,sessionId:u,sourceUrl:l,locale:d}=e;this.applicationId=i,this.locationId=s,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.merchantName=n,this.hostname=a,this.sourceUrl=l,this._locale=d,this.avt=o}get sessionId(){return this._sessionId}get powCounter(){return this._powCounter}setSessionId(e){this._sessionId=e,this._serialized=void 0}setTranslationOverrides(e){this._translationOverrides=e,this._serialized=void 0}setLocale(e){this._locale=e,this._serialized=void 0}setPowCounter(e){this._powCounter=e,this._serialized=void 0}serializationHasChanged(){return void 0===this._serialized}serialize(){var e,t;return this._serialized||(this._serialized={applePayMerchantIdentifier:null!==(e=this.applePayMerchantIdentifier)&&void 0!==e?e:"",applicationId:this.applicationId,avt:this.avt,cashAppPayMerchantIdentifier:null!==(t=this.cashAppPayMerchantIdentifier)&&void 0!==t?t:"",hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,merchantName:this.merchantName,sessionId:this._sessionId,sourceUrl:this.sourceUrl},void 0!==this._translationOverrides&&(this._serialized.translationOverrides=this._translationOverrides),void 0!==this._powCounter&&(this._serialized.powCounter=this._powCounter)),this._serialized}}function oh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function ah(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){oh(o,n,i,a,s,"next",e)}function s(e){oh(o,n,i,a,s,"throw",e)}a(void 0)}))}}function sh(){return sh=ah((function*(e,t){var r=new Promise(((e,r)=>{var n=setTimeout((function(){var e;window.removeEventListener("message",i),r(((e=new Error("Web Payments SDK was unable to be initialized in time")).type="InitializationTimeoutError",e))}),1e4),i=function r(i){"main-iframe:loaded"===i.data&&i.origin===Xn.ASSET_BASE_URL&&(clearTimeout(n),window.removeEventListener("message",r),t.addBreadcrumb({message:"Processed main-iframe:loaded message"}),e())};window.addEventListener("message",i)})),n=function(e,t){return ch.apply(this,arguments)}(e,t),[i,o]=yield Promise.all([n,r]);return i})),sh.apply(this,arguments)}function ch(){return(ch=ah((function*(e,t){var r=yield Rl.buildIframeWithAttributes({frameborder:"0",height:"0",scrolling:"no",src:e,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"});return t.addBreadcrumb({message:"main iframe loaded"}),r}))).apply(this,arguments)}var uh={build:function(e,t){return sh.apply(this,arguments)},getIframeSrc:function(e){var t=new URL(Xn.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}},lh=function(e){var t,r=new(null!==(t=qo[e.name])&&void 0!==t?t:Qn);return r.fromSerializedError(e),r},dh=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class hh extends Yc{constructor(e){super({errorSerializer:{deserialize:e=>e instanceof Error?e:lh(e),serialize:e=>e instanceof Qn?dh(e):e},name:e})}setErrorLogger(e,t){this.setErrorHandler((function(r,n){var i,o,a,s;void 0!==n&&(i=null===(a=n.data.payload)||void 0===a||null===(a=a.session)||void 0===a?void 0:a.instanceId,o=null===(s=n.data.payload)||void 0===s||null===(s=s.session)||void 0===s?void 0:s.sessionId),r instanceof jc?t.logEvent({errorMessage:r.message,event:"IFRAME_MESSENGER_TIMEOUT_ERROR",eventSource:Wo.App},i,o):e.captureException(r)}))}}function ph(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function fh(){var e;return e=function*(e,t,r,n,i){var o=new hh(i);return o.setErrorLogger(t,r),o.connect({origin:Xn.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage("INITIALIZE",n),o},fh=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ph(o,n,i,a,s,"next",e)}function s(e){ph(o,n,i,a,s,"throw",e)}a(void 0)}))},fh.apply(this,arguments)}var gh={build:function(e,t,r,n,i){return fh.apply(this,arguments)}};function mh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function vh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){mh(o,n,i,a,s,"next",e)}function s(e){mh(o,n,i,a,s,"throw",e)}a(void 0)}))}}function yh(e){return Eh.apply(this,arguments)}function Eh(){return Eh=vh((function*(e){var t;if(a.supportsCryptoDigest){var r=(new TextEncoder).encode(e),n=yield crypto.subtle.digest("SHA-256",r);t=new Uint8Array(n)}else{var i=new(yield hu({crossorigin:"anonymous",id:"square-sha256",integrity:"sha256-4wDf1MFeUObkJyxW9pU1Vs6xVxFFeuND/SlfPgCEW8E=",src:"".concat(Xn.ASSET_URL,"/sha256.js")},(()=>window.Square?window.Square._utils.Sha256:void 0)));i.update(e),t=yield i.digest()}return Array.from(t).map((e=>e.toString(16).padStart(2,"0"))).join("")})),Eh.apply(this,arguments)}function _h(){return(_h=vh((function*(e,t,r){var n=0,i="",o=r.join(",");do{n+=1;var a="".concat(e,":").concat(n,":").concat(o);i=yield yh(a)}while(!i.startsWith(t));return n}))).apply(this,arguments)}r(2994),r(5734),r(3675),r(8857),r(5688),r(315),r(556);var Sh={compute:function(e,t,r){return _h.apply(this,arguments)}};function Ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ah={block_insecure_contexts:!1,can_use_ach_auth:"NO_SUPPORT",can_use_interac:!1,can_use_override_strings:!1,client_log_level:"NONE",client_side_encryption:"NO",one_shot_authentication_eligibility:!1,record_error_metrics:!1,staging_cashapp_setup:"SANDBOX",use_external_ach_iframe:!1,use_external_iframes:!1};function Oh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ch(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Oh(o,n,i,a,s,"next",e)}function s(e){Oh(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Th(){return Th=Ch((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:c}=e;t.logEvent({event:"INITIALIZATION:START",eventSource:Wo.App});var u,l=n.getCurrentLocale();try{u=yield function(e,t,r,n,i,o){return Rh.apply(this,arguments)}(i,o,s,l,t,r)}catch(e){var d="InitializationTimeoutError"===e.type?"good":"bad";if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:Wo.App,sloStatus:d}),"bad"===d&&r.captureException(e),Bo(e))throw new ki("initializing the payment method");throw e}try{var{avt:h,sessionId:p,applePartnerInternalMerchantIdentifier:f,cashAppPayMerchantIdentifier:g,merchantName:m,instanceId:v,paymentMethodSupportDetail:y,featureFlagValues:E,isTestMerchant:_,powPrefix:S}=yield u.request(Dd.REQUEST_HYDRATION,{body:{applicationId:i,hostname:s,locationId:o}}),I=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(r),!0).forEach((function(t){bh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ih(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Ah);for(var[r,n]of Object.entries(Ah)){var i=r;if(i in e){var o=e[i];t[i]="boolean"==typeof n?"true"===o:o}}return t}(E);if(I.block_insecure_contexts&&!0!==a.isSecureContext)throw new bi;t.setAvt(h);var b=new ih({applePayMerchantIdentifier:f,applicationId:i,avt:h,cashAppPayMerchantIdentifier:g,hostname:s,instanceId:v,locale:l,locationId:o,merchantName:m,sessionId:p,sourceUrl:c}),A=Promise.resolve(void 0);return void 0!==S&&(A=function(e,t,r,n,i,o,a){return wh.apply(this,arguments)}(i,o,p,v,S,t,r)),t.setFeatureFlagValues(I),t.logEvent({event:"INITIALIZATION:OK",eventSource:Wo.App,sloStatus:"good"},v,p),{featureFlagValues:I,isTestMerchant:_,localeStrings:n,messenger:u,paymentMethodSupportDetail:y,proofOfWorkComputePromise:A,session:b}}catch(e){if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:Wo.App,sloStatus:"WebSdkEmbedError"===e.name?"good":"bad"}),Bo(e))throw new ki("initializing the payment method");throw e}})),Th.apply(this,arguments)}function wh(){return(wh=Ch((function*(e,t,r,n,i,o,a){o.logEvent({event:"PROOF_OF_WORK:START",eventSource:Wo.App},n,r);var s=[e,t,n];try{var c=yield Sh.compute(r,i,s);return o.logEvent({event:"PROOF_OF_WORK:OK",eventSource:Wo.App},n,r),c}catch(e){a.captureException(e),o.logEvent({event:"PROOF_OF_WORK:ERROR",eventSource:Wo.App},n,r)}}))).apply(this,arguments)}function Rh(){return(Rh=Ch((function*(e,t,r,n,i,o){var a=yield uh.build(uh.getIframeSrc({applicationId:e,hostname:r}),o);return yield gh.build(a,o,i,{applicationId:e,hostname:r,locale:n,locationId:t})}))).apply(this,arguments)}var Ph={initializePayment:function(e,t,r,n){return Th.apply(this,arguments)},validateCardVerificationDetails:function(e,t){var r,n=[];return null===e||"object"!=typeof e?(n.push(new yc(t,"details","object")),n):(null!==e.billingContact&&"object"==typeof e.billingContact||n.push(new yc(t,"details.billingContact","object")),["CHARGE","CHARGE_AND_STORE"].includes(e.intent)||n.push(new yc(t,"details.intent","string")),!["CHARGE","CHARGE_AND_STORE"].includes(e.intent)||"number"==typeof(null===(r=e.total)||void 0===r?void 0:r.amount)&&"string"==typeof e.total.currencyCode||n.push(new yc(t,"details.total","object")),"boolean"!=typeof e.customerInitiated&&n.push(new yc(t,"details.customerInitiated","boolean")),"boolean"!=typeof e.sellerKeyedIn&&n.push(new yc(t,"details.sellerKeyedIn","boolean")),n)},validateVerificationDetails:function(e,t){var r=[];return null!==e.billingContact&&"object"==typeof e.billingContact||r.push(new yc(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE","CHARGE_AND_STORE"].includes(e.intent)||r.push(new yc(t,"details.intent","string")),"CHARGE"!==e.intent&&"CHARGE_AND_STORE"!==e.intent||(e.amount&&"string"==typeof e.amount||r.push(new yc(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new yc(t,"details.currencyCode","string"))),r}};function Nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nh(Object(r),!0).forEach((function(t){Lh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function kh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){xh(o,n,i,a,s,"next",e)}function s(e){xh(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Mh="single-card-wrapper",Uh="emptyMessage",jh=[Ln.CARD_NUMBER,Ln.EXPIRATION_DATE,Ln.CVV,Ln.POSTAL_CODE];function Hh(e){return"".concat(Mh,"-").concat(e)}function Fh(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=nh(e,Hh(t))}var Bh,Vh,qh=class extends Tc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Wi.CARD,this.postalCountry="US",this.onResize=this.onResize.bind(this),this.id=Sc(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new cu(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return kh((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),t.validateOptions(r),t.metricsHandler.logEvent("CONFIG_UPDATED",r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Fh(r.style,t.id);try{yield t.paymentMessenger.request(Cl.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType})}catch(e){if(mo.isInstanceOf(e,Pl))throw e;throw t.errorLogger.captureException(e),new ki("configuring the Card Element")}}))()}attach(e){var t=this;return kh((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=bc.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logEvent("CONFIGURED",t.initialOptions);try{r=Bu(e)}catch(e){throw t.metricsHandler.logEvent("ATTACH:ERROR","good"),t.status=bc.DETACHED,e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status=bc.DETACHED;var n=mo.isInstanceOf(e,Nl),i=n&&!(e instanceof ki);if(t.metricsHandler.logEvent("ATTACH:ERROR",i?"good":"bad"),n)throw e;throw t.errorLogger.captureException(e),new ki("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(bc.DETACHED,"DETACHED")}destroy(){var e=this;return kh((function*(){if(e.status===bc.DESTROYED)return!1;var t=yield e.detachElement(bc.DESTROYED,"DESTROYED");return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return kh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Ln).includes(e))throw new hi(e);t.metricsHandler.logEvent("FOCUSED",e);try{return yield t.paymentMessenger.request(Cl.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return kh((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(Cl.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(e){var t=this;return kh((function*(){var r=t.context.getFeatureFlagValues().one_shot_authentication_eligibility;if(r&&void 0!==e&&t.validateCardVerificationDetails(e),t.throwIfDestroyedOrNotAttached(),t.tokenizeInProcess)throw new xi([wc]);t.tokenizeInProcess=!0,yield t.context.waitForProofOfWorkCompletion();try{var n=yield t.paymentMessenger.request(Cl.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:t.methodType});t.tokenizeInProcess=!1,t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId);var i=function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{billing:r,card:t,method:Wi.CARD},status:Xi.OK,token:n}}(n);return r&&void 0!==e&&void 0!==i.token&&(yield t.verifyBuyer(e,i.token,!0)),i}catch(e){if(t.tokenizeInProcess=!1,e instanceof ko)return{errors:e.errors,status:Xi.INVALID};throw mo.isInstanceOf(e,Dl)?e:(t.errorLogger.captureException(e),Mo())}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent("RECALCULATED_SIZE"),this.onResize()}setError(e){var t=this;return kh((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Ln).includes(e))throw new hi(e);t.metricsHandler.logEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request(Cl.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return kh((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(Cl.LOAD_CARDS_FORM,{configuration:Dh(Dh({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(!(r in t))throw new pi(r);if(!t[r](n))throw new fi(r,n)}))}verifyBuyer(e,t,r){var n=this;return kh((function*(){var i=!0===r?"OSA_VERIFICATION":"VERIFICATION";try{n.context.metricsHandler.logEvent("".concat(i,":START"));var o={amount:mo.moneyAmountToPaymentRequestAmount(e.total.amount,e.total.currencyCode),billingContact:e.billingContact,currencyCode:e.total.currencyCode,customerInitiated:e.customerInitiated,intent:e.intent,sellerKeyedIn:e.sellerKeyedIn};yield n.context.analyticsBackend.verifyBuyer(t,o),n.context.metricsHandler.logEvent("".concat(i,":OK"))}catch(e){if(n.context.metricsHandler.logEvent("".concat(i,":ERROR")),"UnexpectedAnalyticsClientError"===e.name)throw Mo();throw new ai(e)}}))()}validateCardVerificationDetails(e){var t=Ph.validateCardVerificationDetails(e,"tokenize");if(t.length>0)throw new Ec(t)}buildErrorMessage(e){switch(e){case Ln.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case Ln.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case Ln.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case Ln.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case Ln.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case Ln.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case Ln.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case Ln.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:Uh,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(jd),this.cardDetail.classList.add(Hd)):(e=null!==(n=jh.find((e=>this.errorList.has(e))))&&void 0!==n?n:Uh,t=this.buildErrorMessage(e),this.cardDetail.classList.add(jd),this.cardDetail.classList.remove(Hd)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Fd):this.cardDetail.classList.remove(Fd))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;void 0!==this.focusedInput&&null!==this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(xl)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(kl))}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Dn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(kl);break;case Dn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Dn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(xl);break;case Dn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={[Tl.SET_POSTAL_COUNTRY]:t,[Tl.FOCUS_CLASS_ADDED]:e,[Tl.FOCUS_CLASS_REMOVED]:e,[Tl.ERROR_CLASS_ADDED]:e,[Tl.ERROR_CLASS_REMOVED]:e,[Tl.CARD_BRAND_CHANGED]:e,[Tl.POSTAL_CODE_CHANGED]:e,[Tl.SUBMIT]:e,[Tl.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){var t=this.context.getFeatureFlagValues().use_external_iframes;return Rl.buildIframeWithAttributes({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Xn.SINGLE_CARD_IFRAME(t),width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return kh((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Hh(t.id),t.wrapperElement.classList.add(kd),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Ud),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(xd),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Md),t.wrapperElement.appendChild(t.cardDetail),Ks.addStyleElement(Xn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Fh(t.initialOptions.style,t.id)}))()}onResize(e){var t;if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,void 0===this.currentResizeTimeout)){var r=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};r(null!==(t=this.lastResizeWidth)&&void 0!==t?t:0),this.currentResizeTimeout=window.setTimeout((()=>{var e;r(null!==(e=this.lastResizeWidth)&&void 0!==e?e:0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return kh((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(Cl.DESTROY);return r.element&&(Rl.removeIframe(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}};class Gh extends Qn{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Gh.prototype)}}function zh(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function $h(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){zh(o,n,i,a,s,"next",e)}function s(e){zh(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yh(Object(r),!0).forEach((function(t){Kh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(Bh||(Bh={})),function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(Vh||(Vh={}));var Xh=new Set(["USD"]),Qh="cash_app_pay_v1_element";class Zh extends Tc{constructor(e,t,r,n,i){if(super(n),this.methodType=Wi.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.isMobile=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new cu(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!mo.isNonBlankString(this.session.locationId))throw new Ai(fc,"locationId");if(!mo.isNonBlankString(this.session.cashAppPayMerchantIdentifier))throw new Ai(fc,"merchantId");if(!Xh.has(this.req.currencyCode))throw new vi("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Xh].join(", ")));var o=mo.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode);if(o<1)throw new vi("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new yi;var a=Wh({actions:{payment:{amount:{currency:this.req.currencyCode,value:o},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(a).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[Vh.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[Vh.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[Vh.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[Vh.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[Vh.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(Vh).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return $h((function*(){n.throwIfDestroyedOrAlreadyAttached(),n.metricsHandler.logEvent("ATTACH:START");var i,o=t,a=!1===o;void 0!==o&&!a&&"values"in o&&(null!==(i=o.theme)&&void 0!==i||(o.theme=o.values));var s=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){fa.has(e)&&(t[e]="string")})),$u(e,t)}(o);if(!s.isValid)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new gi(s.missingFields);var c=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:Ca,size:Oa,theme:Ta,width:wa},i=JSON.parse(Da(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===oa&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(o);if(!c.isValid)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new mi(c.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw n.metricsHandler.logEvent("ATTACH:ERROR","good"),new Ei;void 0===o||a||n.metricsHandler.logEvent("CONFIGURED",o),n.status=bc.ATTACHED,n.element=a?Vu(e):Bu(e);try{var u=document.createElement("div");u.id=Qh,a?n.element.before(u):n.element.appendChild(u);var l="#".concat(Qh);n.renderController=yield n.CashAppPayInstance.render(l,{button:o,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){throw n.metricsHandler.logEvent("ATTACH:ERROR","bad"),n.status=bc.DETACHED,e}}))()}destroy(){return this.status===bc.DESTROYED?Promise.resolve(!1):(this.detachElement(bc.DESTROYED,"DESTROYED"),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(Vh).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(bc.DETACHED,"DETACHED"),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return $h((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:Xi.CANCEL};this.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={errors:[new ki("tokenizing Cash App Pay")],status:Xi.ERROR};this.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return $h((function*(){var{customerProfile:{cashtag:r},grants:n,referenceId:i}=e,o=n.payment,{total:{amount:a},currencyCode:s}=t.req;try{if(!o)throw new Gh;yield t.context.waitForProofOfWorkCompletion();var c=yield t.paymentMessenger.request(Bh.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,{applicationId:t.session.applicationId,cashAppPayData:{cashtag:r,grantId:o.grantId,isMobile:t.isMobile,referenceId:i,totalAmount:{amount:a,currency:s}},clientID:t.session.applicationId,instanceID:t.session.instanceId,locationID:t.session.locationId,paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,sessionID:t.session.sessionId,websdkVersion:Xn.VERSION});return t.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),{details:{cashAppPay:{cashtag:r,referenceId:i},method:Wi.CASH_APP_PAY},status:Xi.OK,token:c.token}}catch(e){var u=e;return t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),mo.isInstanceOf(e,[xi])||(t.errorLogger.captureException(e),u=new ki("tokenizing CashAppPay")),{errors:[u],status:Xi.ERROR}}}))()}beginAuthorizationFlow(){var e=this;return $h((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new ki("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:VALIDATING");try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent("CASH_APP_PAY_AUTH:START")):e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:INVALID")}catch(t){throw e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:ERROR"),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent("EXTERNAL_SESSION:START"),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK")),this.isMobile=e.isMobile,this.dispatchEvent("customerInteraction",Wh({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(Qh);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logEvent(t)}}function Jh(){return(Jh=$h((function*(e){var t="https://sandbox.kit.cash.app/v1/pay.js",r=Xn.env!==Pn.sandbox&&Xn.env!==Pn.production&&"STAGING"===e.getFeatureFlagValues().staging_cashapp_setup;r&&(t="https://kit.cashstaging.app/v1/pay.js"),Xn.env!==Pn.production||e.isTestMerchant||(t="https://kit.cash.app/v1/pay.js");var n=yield vu.load("cash-app-pay",{src:t},"CashApp",e.errorLogger),i="CAS-CI_SQ_SELLER_STAGING";return Xn.env===Pn.sandbox||Xn.env===Pn.production&&e.isTestMerchant?i="CAS-CI_SQ_SELLER_SANDBOX":Xn.env===Pn.production?i="CA-CI_SQ_SELLER":r&&(i="SQ_SELLER"),n.pay({clientId:i})}))).apply(this,arguments)}var ep,tp={initialize:function(e){return Jh.apply(this,arguments)}},rp=[Pi,Ni,Di,Li,Oi,ki];function np(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ip(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?np(Object(r),!0).forEach((function(t){op(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):np(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function op(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ap(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function sp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ap(o,n,i,a,s,"next",e)}function s(e){ap(o,n,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(ep||(ep={}));var cp,up="gift-card-wrapper",lp=[kn.GIFT_CARD_NUMBER];class dp extends Tc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Wi.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=Sc(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new cu(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t,this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return sp((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=bc.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logEvent("CONFIGURED",t.initialOptions);try{r=Bu(e)}catch(e){throw t.metricsHandler.logEvent("ATTACH:ERROR","good"),t.status=bc.DETACHED,e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status=bc.DETACHED;var n=mo.isInstanceOf(e,rp),i=!n||e instanceof ki?"bad":"good";if(t.metricsHandler.logEvent("ATTACH:ERROR",i),n)throw e;throw t.errorLogger.captureException(e),new ki("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(bc.DETACHED,"DETACHED")}destroy(){return this.status===bc.DESTROYED?Promise.resolve(!1):this.detachElement(bc.DESTROYED,"DESTROYED")}configure(e){var t=this;return sp((function*(){t.throwIfDestroyedOrNotAttached(),t.validateOptions(e),void 0!==e.includeInputLabels&&(t.inputLabelsIncluded=Boolean(e.includeInputLabels),t.onResize()),void 0!==e.style&&pp(e.style,t.id),t.metricsHandler.logEvent("CONFIG_UPDATED",e);try{yield t.paymentMessenger.request(ep.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType})}catch(e){if(mo.isInstanceOf(e,Pl))throw e;throw t.errorLogger.captureException(e),new ki("configuring the Gift Card Element")}}))()}focus(e){var t=this;return sp((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(kn).includes(e))throw new hi(e);t.metricsHandler.logEvent("FOCUSED",e);try{return yield t.paymentMessenger.request(ep.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return sp((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(ep.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return sp((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new xi([wc]);e.tokenizeInProcess=!0,yield e.context.waitForProofOfWorkCompletion();try{var t=yield e.paymentMessenger.request(ep.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:Wi.GIFT_CARD},status:Xi.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof ko)return{errors:t.errors,status:Xi.INVALID};throw mo.isInstanceOf(t,Dl)?t:(e.errorLogger.captureException(t),Mo())}}))()}setError(e){var t=this;return sp((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(kn).includes(e))throw new hi(e);t.metricsHandler.logEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request(ep.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return sp((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(ep.LOAD_GIFT_CARDS_FORM,{configuration:ip(ip({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(!(r in t))throw new pi(r);if(!t[r](n))throw new fi(r,n)}))}buildCardElement(e){var t=this;return sp((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=hp(t.id),t.wrapperElement.classList.add(kd),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Ud),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(xd),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Md),t.wrapperElement.appendChild(t.cardDetail),Ks.addStyleElement(Xn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&pp(t.initialOptions.style,t.id)}))()}buildCardIframe(e){var t=this.context.getFeatureFlagValues().use_external_iframes;return Rl.buildIframeWithAttributes({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Xn.GIFT_CARD_IFRAME(t),width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&void 0===this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(jd),this.cardDetail.classList.add(Hd)):(e=null!==(n=lp.find((e=>this.errorList.has(e))))&&void 0!==n?n:lp[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(jd),this.cardDetail.classList.remove(Hd)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Fd):this.cardDetail.classList.remove(Fd))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Mn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(kl);break;case Mn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Mn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(xl);break;case Mn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}removeFocusClass(){setTimeout((()=>{var e;void 0!==this.focusedInput&&null!==this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(xl)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(kl))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[Tl.FOCUS_CLASS_ADDED]:e,[Tl.FOCUS_CLASS_REMOVED]:e,[Tl.ERROR_CLASS_ADDED]:e,[Tl.ERROR_CLASS_REMOVED]:e,[Tl.CARD_BRAND_CHANGED]:e,[Tl.SUBMIT]:e,[Tl.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===kn.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===kn.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return sp((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(ep.DESTROY);return r.element&&(Rl.removeIframe(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function hp(e){return"".concat(up,"-").concat(e)}function pp(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=nh(e,hp(t))}!function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(cp||(cp={}));class fp extends Qn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,fp.prototype)}}function gp(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}class mp extends _c{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners){var n=new to(e,t),o=[...i.listeners[e]],a=function*(){var t,i;try{t=s(n)}catch(t){throw new li(e,t.message)}if(t instanceof Promise)try{i=yield _n((()=>t),3e4,new fp(e))}catch(t){if(t instanceof fp)throw t;throw new li(e,t.message)}else i=t;r&&r(i)};for(var s of o)yield*a()}},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){gp(o,r,i,a,s,"next",e)}function s(e){gp(o,r,i,a,s,"throw",e)}a(void 0)}))})()}}var vp={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function yp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ep(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(r),!0).forEach((function(t){_p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sp,Ip,bp,Ap,Op,Cp,Tp,wp={amount:"string",label:"string"},Rp={amount:"string",id:"string",label:"string"},Pp={};function Np(e,t){var r,n,i,o,{lineItems:a,taxLineItems:s,discounts:c,shippingLineItems:u}=e,l=!1,d=[],h=a,p=s,f=u,g=Dp(c);return void 0===t||void 0===a&&void 0===s&&void 0===u&&void 0===g||(null!==(r=h)&&void 0!==r||(h=t.lineItems),null!==(n=p)&&void 0!==n||(p=t.taxLineItems),null!==(i=g)&&void 0!==i||(g=Dp(t.discounts)),null!==(o=f)&&void 0!==o||(f=t.shippingLineItems)),[h,p,g,f].forEach((e=>{void 0!==e&&(l=!0,d.push(...e))})),l?d:void 0}function Dp(e){return void 0===e?e:e.map((e=>Ep(Ep({},e),{},{amount:"-".concat(e.amount)})))}function Lp(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function xp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Lp(o,n,i,a,s,"next",e)}function s(e){Lp(o,n,i,a,s,"throw",e)}a(void 0)}))}}function kp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Up{constructor(e,t,r){this.eventTarget=new mp,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r,Hp(this)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kp(Object(r),!0).forEach((function(t){Mp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,discounts:this.discounts,lineItems:this.lineItems,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingLineItems:this.shippingLineItems,shippingOptions:this.shippingOptions,taxLineItems:this.taxLineItems,total:this.total},e),r=new Up(t,this.localeStrings,this.updateLock);return Hp(r),!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),void 0!==e.countryCode&&(this._countryCode=e.countryCode),void 0!==e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(Mu.UPDATE,r),this.logMetrics("CONFIG_UPDATED",t),!0)}addEventListener(e,t){switch(mo.enumValues(Ki).includes(e)&&this.logMetrics("EVENT_LISTENER_ADDED",e),e){case Ki.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case Ki.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case Mu.UPDATE:this.updateEventListener(t);break;case Yn.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case Yn.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new yc("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(mo.enumValues(Yn).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=Yu(e.shippingOptions,"shippingOptions",{amount:"string",id:"string",label:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=$u({"shippingOptions.total":r.total},{"shippingOptions.total":wp})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=Yu(r.taxLineItems,"shippingOptions.taxLineItems",wp)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new ui(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:a,error:s,total:c}=e;if(t){var u=Yu(t,"lineItem",wp);if(!u.isValid)return u}if(r){var l=Yu(r,"discounts",wp);if(!l.isValid)return l}if(n){var d=Yu(n,"taxLineItems",wp);if(!d.isValid)return d}if(i){var h=Yu(i,"shippingLineItems",wp);if(!h.isValid)return h}if(a){var p=Yu(a,"shippingOption",Rp);if(!p.isValid)return p}if(c){var f=$u({total:c},{total:wp});if(!f.isValid)return f}if(void 0!==s&&"string"!=typeof s)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=$u(o,Pp);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new ui(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Ki.SHIPPING_CONTACT_CHANGED,function(){var r=xp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.contactError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(Ki.SHIPPING_OPTION_CHANGED,function(){var r=xp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Yn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=xp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(Yn.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(Mu.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function jp(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function Hp(e){var{isValid:t,missingFields:r}=$u(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}}),n=[];if(e.countryCode in vp||n.push("Country code '".concat(e.countryCode,"' is not a valid ISO country code.")),!t||n.length>0)throw new ci(r,n)}function Fp(e,t){return new Intl.NumberFormat(a.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}function Bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bp(Object(r),!0).forEach((function(t){qp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(Sp||(Sp={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(Ip||(Ip={})),function(e){e.FULL="FULL",e.MIN="MIN"}(bp||(bp={})),function(e){e.CARD="CARD"}(Ap||(Ap={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(Op||(Op={})),function(e){e.SUCCESS="SUCCESS"}(Cp||(Cp={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(Tp||(Tp={}));var Gp=["PAN_ONLY","CRYPTOGRAM_3DS"],zp=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"],$p="LINE_ITEM";function Yp(e){return{label:e.label,price:e.amount,status:!0===e.pending?Sp.Estimated:Sp.Final,type:$p}}function Wp(e,t){var r=null!=t?t:e;return r?r.map((e=>Yp(e))):[]}function Kp(e,t){return t.map((t=>function(e,t){return{description:Fp(t.amount,e),id:t.id,label:t.label}}(e,t)))}function Xp(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:Kp(e,i)};return i.some((e=>e.id===t))&&(o.defaultSelectedOptionId=t),o}}function Qp(e,t){return null==t?void 0:t.find((t=>t.id===e))}function Zp(e,t,r,n,i,o){var{countryCode:a,currencyCode:s,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:h,requestShippingContact:p,shippingOptions:f}=t,g=jp(t),m=Boolean(p||g),v=Vp(Vp({},e),{},{emailRequired:Boolean(h),merchantInfo:i,shippingAddressRequired:m,shippingOptionRequired:g,transactionInfo:{countryCode:a,currencyCode:s,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(v.transactionInfo.displayItems=Wp([],Np({discounts:d,lineItems:u,taxLineItems:l},t))),m&&(v.shippingAddressParameters={phoneNumberRequired:!0}),g){var y=Xp(s,o,[],f);y&&(v.shippingOptionParameters=y)}return r.length>0&&(v.callbackIntents=r),v}function Jp(e,t){var r=[];return void 0!==e.error&&r.push({intent:t,message:e.error,reason:Yi.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:Yi.SHIPPING_ADDRESS_INVALID})})),r}function ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(r),!0).forEach((function(t){rf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ef(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nf(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function of(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){nf(o,n,i,a,s,"next",e)}function s(e){nf(o,n,i,a,s,"throw",e)}a(void 0)}))}}var af=["#google"];class sf extends Tc{constructor(e,t,r,n,i){var o;super(r),this.methodType=Wi.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new cu(r),jp(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=jp(e)&&t.includes(Ki.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(Ki.SHIPPING_CONTACT_CHANGED);return n?r.push(Ip.SHIPPING_ADDRESS,Ip.SHIPPING_OPTION):i&&r.push(Ip.SHIPPING_ADDRESS),(!a.isAndroid()||n||i)&&r.push(Ip.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var s,c,u,l,d=function(e,t,r,n){var i=Tp.TEST;Xn.env!==Pn.production||e.isTestMerchant||(i=Tp.PRODUCTION);var o={environment:i,merchantInfo:n},s=t.includes(Ip.SHIPPING_OPTION)||t.includes(Ip.SHIPPING_ADDRESS);if(!a.isAndroid()||s){var c={onPaymentAuthorized:()=>({transactionState:Cp.SUCCESS})};s&&(c.onPaymentDataChanged=r),o.paymentDataCallbacks=c}return o}(r,this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(d),this.isReadyToPayRequest=(s=this.session.applicationId,c=this.req.requestBillingContact,u=this.context.getFeatureFlagValues().can_use_interac,l=[...zp],u&&l.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:Gp,allowedCardNetworks:l,billingAddressParameters:{format:c?bp.FULL:bp.MIN,phoneNumberRequired:Boolean(c)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:s},type:Op.PAYMENT_GATEWAY},type:Ap.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(Ki.SHIPPING_OPTION_CHANGED)&&e.push(Ki.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(Ki.SHIPPING_CONTACT_CHANGED)&&e.push(Ki.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return of((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=bc.ATTACHED;var a=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:Gi.DEFAULT,s=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:zi.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:$i.LONG;r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logEvent("CONFIGURED",t);try{r.element=Vu(e)}catch(e){throw r.status=bc.DETACHED,r.metricsHandler.logEvent("ATTACH:ERROR","good"),e}r.isReadyToPay=yield r.checkIfReadyToPay("ATTACH:ERROR",!0);try{var u=r.googlePayClient.createButton({buttonColor:a,buttonSizeMode:s,buttonType:c,onClick:()=>{}});r.element.appendChild(u),r.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){r.status=bc.DETACHED;var l=r.asDeveloperError(e);if(r.metricsHandler.logEvent("ATTACH:ERROR",l?"good":"bad"),l)throw l;throw r.errorLogger.captureException(r.asInternalError(e),{context:"createButton"}),new Ai(mc,e)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(bc.DETACHED,"DETACHED"),Promise.resolve(!0)}destroy(){return this.status===bc.DESTROYED?Promise.resolve(!1):(this.detachElement(bc.DESTROYED,"DESTROYED"),Promise.resolve(!0))}tokenize(){var e=this;return of((function*(){var t,r;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent("EXTERNAL_SESSION:START"),e.isReadyToPay=null!==(t=e.isReadyToPay)&&void 0!==t?t:yield e.checkIfReadyToPay("EXTERNAL_SESSION:ERROR",!1),e.paymentRequestLockController.lock(e);try{r=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent("EXTERNAL_SESSION:OK")}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Xi.CANCEL};throw e.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e.errorLogger.captureException(e.asInternalError(t),{context:"loadPaymentData"}),new ki("tokenizing Google Pay.")}var{token:n,details:i}=yield e.requestGooglePayCardNonce(r);return{details:i,status:Xi.OK,token:n}}))()}validateConfiguration(){var e=af.join(", ");if(document.querySelectorAll(e).length>0)throw new Ri(this.methodType,e)}checkIfReadyToPay(e,t){var r=this;return of((function*(){var n=!1;try{var{result:i}=yield r.googlePayClient.isReadyToPay(r.isReadyToPayRequest);(n=i)||r.metricsHandler.logEvent(e,t?"good":void 0)}catch(n){var o=r.asDeveloperError(n),a=o?"good":"bad";if(r.metricsHandler.logEvent(e,t?a:void 0),o)throw o;r.errorLogger.captureException(r.asInternalError(n),{context:"isReadyToPay"})}if(n){var s=r.callbackIntents.length>0?Sp.Unknown:Sp.Final;try{return r.googlePayClient.prefetchPaymentData(Zp(r.isReadyToPayRequest,r.req,r.callbackIntents,s,r.merchantInfo,r.selectedShippingOptionId)),n}catch(t){r.metricsHandler.logEvent(e,"bad"),r.errorLogger.captureException(r.asInternalError(t),{context:"prefetchPaymentData"})}}throw new Ai(hc)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(Zp(this.isReadyToPayRequest,this.req,this.callbackIntents,Sp.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case Ip.INITIALIZE:case Ip.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case Ip.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new wo("Unknown callbackTrigger: ".concat(e.callbackTrigger),Wi.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return of((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(Ki.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=Qp(e,t);return i?this.status===bc.DESTROYED?Promise.resolve({optionErrors:[{intent:Ip.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Yi.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(Ki.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",tf(tf({},t),{},{eventName:Ki.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),e({optionErrors:Jp(t,Ip.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return of((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,{shippingOptions:o}=t;r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:a,optionErrors:s}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=tf(tf({},r),a),u=[...n,...s];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(Ki.SHIPPING_CONTACT_CHANGED)?this.status!==bc.DESTROYED?this.req.dispatchEvent(Ki.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",tf(tf({},e),{},{eventName:Ki.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),n({contactErrors:Jp(e,Ip.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:Ip.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Yi.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:a,currencyCode:s}=t,c=r,u=Yp(null!==(i=e.total)&&void 0!==i?i:o),l={countryCode:a,currencyCode:s,totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Wp(Np(t),Np(e,t));d.length>0&&(l.displayItems=d);var h={newTransactionInfo:l},p=Xp(s,n,c,e.shippingOptions);return p&&(h.newShippingOptionParameters=p),h}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return of((function*(){var r=Qp(t.selectedShippingOptionId,t.shippingOptions);yield t.context.waitForProofOfWorkCompletion();try{var n=yield t.paymentMethodMessenger.request(cp.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,a={details:{card:r,method:Wi.GOOGLE_PAY},token:n};return i&&(a.details.shipping={contact:i},t&&(a.details.shipping.option=t)),o&&(a.details.card&&(a.details.card.billing=o),a.details.billing=o),a}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof xi||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}asDeveloperError(e){if(e instanceof Error)return"SecurityError"===e.name?e:void 0;var t=e;return"DEVELOPER_ERROR"===t.statusCode&&t.statusMessage.includes("secure context")?new Ai(pc):void 0}asInternalError(e){return e instanceof Error?e:new wo(JSON.stringify(e),this.methodType)}}function cf(){return cf=of((function*(e,t){return{authJwt:(yield e.request(cp.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:"05498866192997955200",merchantName:t.merchantName}})),cf.apply(this,arguments)}var uf,lf,df=function(e){var t=function(e,t){return cf.apply(this,arguments)}(e.messenger,e.getSession()),r=vu.load("google-link",{src:"https://pay.google.com/gp/p/js/pay.js"},"google.payments",e.errorLogger);return Promise.all([r,t])};class hf{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}function pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ff(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(r),!0).forEach((function(t){gf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(uf||(uf={})),function(e){e.PENDING="pending",e.FINAL="final"}(lf||(lf={}));var mf={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},vf=["visa","masterCard","jcb","discover","amex"];function yf(e){var t;return{amount:e.amount,label:e.label,type:null!==(t=e.pending)&&void 0!==t&&t?lf.PENDING:lf.FINAL}}function Ef(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function _f(e,t){return t?yf(t):e}function Sf(e,t){return t?t.map(yf):e}function If(e,t){return t?t.map(Ef):e}function bf(e){for(var t=3;t>0&&!e.supportsVersion(t);)t-=1;return t}function Af(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:a,familyName:s,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:null==o?void 0:o.toUpperCase(),email:c,familyName:s,givenName:a,phone:u,postalCode:i,state:n}}function Of(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function Cf(e,t,r){return{errors:(n=e,i=[],void 0!==n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var t,[r,n]=e,o=null!==(t=mf[r])&&void 0!==t?t:"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",o,n))})),i),newLineItems:Sf(t.lineItems,Np(e,r)),newShippingMethods:If(t.shippingMethods,e.shippingOptions),newTotal:_f(t.total,e.total)};var n,i}function Tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tf(Object(r),!0).forEach((function(t){Rf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pf(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Nf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Pf(o,n,i,a,s,"next",e)}function s(e){Pf(o,n,i,a,s,"throw",e)}a(void 0)}))}}class Df extends Error{}class Lf extends Tc{constructor(e,t,r){if(super(t),this.methodType=Wi.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new cu(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new Ai(lc);if(!window.ApplePaySession.canMakePayments())throw new Ai(dc);this.SessionHandle=window.ApplePaySession,this.validateConfiguration()}tokenize(){var e=this;return Nf((function*(){var t=Tc.withErrorCapture(e.tokenizeWrapped.bind(e),e.errorLogger,"Apple Pay");return yield t()}))()}tokenizeWrapped(){var e=this;return Nf((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new xi([wc]);e.applePayPaymentRequest=function(e,t){var r=[...vf];null!=t&&t&&r.push("interac");var n,i,o={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:Sf([],Np(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:If([],e.shippingOptions),supportedNetworks:r,total:yf(e.total)};return e.shippingContact&&(o.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:vp[null!==(i=n.countryCode)&&void 0!==i?i:""],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(o.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(o.requiredShippingContactFields=["postalAddress","name","email","phone"]),o}(e.req,e.context.getFeatureFlagValues().can_use_interac);var t=new e.SessionHandle(bf(e.SessionHandle),e.applePayPaymentRequest),r=e.shippingContactChanged.bind(e);t.onshippingcontactselected=t=>{r(t.shippingContact,e.applePayPaymentRequest)};var n=e.shippingOptionChanged.bind(e);t.onshippingmethodselected=t=>{n(t.shippingMethod,e.applePayPaymentRequest)};var i=new Promise(((e,r)=>{t.oncancel=()=>{r(new Df)}})),o=new Promise(((r,n)=>{t.onvalidatemerchant=function(){var t=Nf((function*(t){try{var i=yield e.requestApplePayMerchantValidity(t.validationURL,e.applePayPaymentRequest);r(i)}catch(e){n(e)}}));return function(e){return t.apply(this,arguments)}}()})),a=new Promise(((r,n)=>{t.onpaymentauthorized=function(){var t=Nf((function*(t){try{var i=yield e.requestApplePayCardNonce(t);r(i)}catch(e){n(e)}}));return function(e){return t.apply(this,arguments)}}()}));e.currentSession=t,e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.begin();try{var s=yield Promise.race([o,i]);t.completeMerchantValidation(s);var{token:c,details:u}=yield Promise.race([a,i]);return e.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),{details:u,status:Xi.OK,token:c}}catch(t){if(t instanceof Df)return e.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Xi.CANCEL};throw e.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),t}finally{e.deleteApplePaySession()}}))()}destroy(){return this.currentSession&&(this.currentSession.abort(),this.deleteApplePaySession()),this.status=bc.DESTROYED,this.metricsHandler.logEvent("DESTROYED"),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(void 0===e.applePayMerchantIdentifier||""===e.applePayMerchantIdentifier)throw new Ai(fc,"applePayMerchantIdentifier");if(void 0===e.locationId||""===e.locationId)throw new Ai(fc,"locationId")}requestApplePayCardNonce(e){var t=this;return Nf((function*(){var r;yield t.context.waitForProofOfWorkCompletion();var n={applepayData:e.payment},i=null!==(r=t.selectedShippingMethod)&&void 0!==r?r:t.getDefaultShippingMethod();try{var o=yield t.paymentMethodMessenger.request(uf.REQUEST_APPLE_PAY_CARD_NONCE,n);return t.getApplePaySession().completePayment(t.SessionHandle.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(o.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,a={details:{card:r,method:Wi.APPLE_PAY},token:n};if(i){var s={contact:i};t&&(s.option=Of(t)),a.details.shipping=s}return o&&(a.details.card&&(a.details.card.billing=o),a.details.billing=o),a}(o,i)}catch(e){throw t.getApplePaySession().completePayment(t.SessionHandle.STATUS_FAILURE),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return Nf((function*(){var n,i=t.total.label,o=r.session,a={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request(uf.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,a)}catch(e){throw r.getApplePaySession().abort(),e}try{return JSON.parse(n.session)}catch(e){throw r.getApplePaySession().abort(),e}}))()}shippingContactChanged(e,t){var r=bf(this.SessionHandle)>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(Ki.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(Ki.SHIPPING_CONTACT_CHANGED,{contactOrOption:Af(e)},(e=>{this.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",wf(wf({},e),{},{eventName:Ki.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=Of(i)),void 0!==n&&this.req.hasEventListener(Ki.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=Ef(n),this.req.dispatchEvent(Ki.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",wf(wf({},t),{},{eventName:Ki.SHIPPING_OPTION_CHANGED})),e(wf(wf({},r),t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=bf(this.SessionHandle)>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(Ki.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(Ki.SHIPPING_OPTION_CHANGED,{contactOrOption:Of(e)},r):r({})}updateApplePayPaymentRequest(e){this.applePayPaymentRequest.total=e.newTotal,e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),function(e){return"newShippingMethods"in e}(e)&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){return t=>{var r=Cf(t,e,this.req);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.getApplePaySession().completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){return t=>{var r=function(e,t,r,n){return ff({status:n},Cf(e,t,r))}(t,e,this.req,this.SessionHandle.STATUS_SUCCESS);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.getApplePaySession().completeShippingContactSelection(r.status,r.newShippingMethods,r.newTotal,r.newLineItems)}}updateApplePayShippingMethodV3(e){return t=>{var r=function(e,t,r){return{newLineItems:Sf(t.lineItems,Np(e,r)),newTotal:_f(t.total,e.total)}}(t,e,this.req);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.getApplePaySession().completeShippingMethodSelection(r)}}updateApplePayShippingMethodLegacy(e){return t=>{var r=function(e,t,r,n){return ff({status:n},Cf(e,t,r))}(t,e,this.req,this.SessionHandle.STATUS_SUCCESS);this.updateApplePayPaymentRequest(r),this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.getApplePaySession().completeShippingMethodSelection(r.status,r.newTotal,r.newLineItems)}}getDefaultShippingMethod(){var{shippingMethods:e}=this.applePayPaymentRequest;return e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.currentSession,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent("FIRST_INTERACTION:OK"),this.wasFirstInteractionCalled=!0)}getApplePaySession(){if(void 0===this.currentSession)throw new ki("getting Apple Pay Session");return this.currentSession}}var xf=function(e,t,r,n,i){return new Ol(e,t,r,n,i)},kf=function(e,t,r){return new Lf(e,t,r)},Mf=function(e,t,r,n,i){return new Zh(e,t,r,n,i)},Uf=function(e,t,r,n,i){return new sf(e,t,r,n,i)};function jf(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function Hf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){jf(o,n,i,a,s,"next",e)}function s(e){jf(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Ff(e,t){var{paymentMethodSupportDetail:r}=t,n=t.getSession();if(void 0===n.locationId||0===n.locationId.length)throw new Ai(fc,"locationId");if(null!=r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:i}=r[e],o=mc;throw void 0!==i&&i in uc&&(o=vc[i]),new Ai(o)}}function Bf(e){if(!(e instanceof Up))throw new ci([["paymentRequest","PaymentRequest"]])}function Vf(e,t,r,n){var i=r.some((e=>t instanceof e));return e.metricsHandler.logEvent("BUILD:ERROR",i?"good":"bad"),i?t:(e.errorLogger.captureException(t),new ki(n))}class qf{constructor(e,t,r){this.localeStrings=new ia(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap,this.paymentsNumCalls=1}overrideStrings(e){var t=this;return Hf((function*(){try{var r=yield t.getPaymentContext(Wo.App);if(!r.getFeatureFlagValues().can_use_override_strings)throw new Si("overrideStrings");r.metricsHandler.logEvent("OVERRIDE_STRINGS",e),r.setTranslationOverrides(e)}catch(e){if(Bo(e))throw t.errorLogger.captureException(e),new ki("overriding the strings");throw e}}))()}setLocale(e){var t=this;return Hf((function*(){try{var r=yield t.getPaymentContext(Wo.App);return r.metricsHandler.logEvent("SET_LOCALE",e),r.setLocale(e)}catch(e){if(Bo(e))throw t.errorLogger.captureException(e),new ki("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return Hf((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new yc("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new yc("verifyBuyer","source","string")),null===t||"object"!=typeof t?n.push(new yc("verifyBuyer","details","object")):n.push(...Ph.validateVerificationDetails(t,"verifyBuyer")),n.length>0)throw new Ec(n);var i=yield r.getPaymentContext(Wo.App);try{i.metricsHandler.logEvent("VERIFICATION:START");var o=yield i.analyticsBackend.verifyBuyer(e,t);return i.metricsHandler.logEvent("VERIFICATION:OK"),o}catch(e){if(i.metricsHandler.logEvent("VERIFICATION:ERROR"),"UnexpectedAnalyticsClientError"===e.name)throw new ki("verifying buyer");throw new ai(e)}}))()}card(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Wo.Card);r.metricsHandler.logEvent("BUILD:START");try{var n=new qh(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){throw Vf(r,e,[pi,fi],"initializing card")}}))()}paymentRequest(e){var t=new hf,r=new Up(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext(Wo.PaymentRequest).then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent("CONFIGURED",e)})),r}googlePay(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Wo.GooglePay);r.metricsHandler.logEvent("BUILD:START");try{Ff(Js.GOOGLE_PAY,r),function(){if("undefined"==typeof ShadowRoot)throw new Ai(hc)}(),Bf(e);var n=t.getPaymentRequestLock(e),[i,o]=yield df(r),a=Uf(i,e,r,o,n);return r.metricsHandler.logEvent("BUILD:OK","good"),a}catch(e){throw Vf(r,e,[Ri,ci,Ai],"initializing googlePay")}}))()}applePay(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Wo.ApplePay);r.metricsHandler.logEvent("BUILD:START");try{Ff(Js.APPLE_PAY,r),Bf(e);var n=t.getPaymentRequestLock(e),i=kf(e,r,n);return r.metricsHandler.logEvent("BUILD:OK","good"),i}catch(e){throw Vf(r,e,[ci,Ai],"initializing applePay")}}))()}ach(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Wo.Ach);r.metricsHandler.logEvent("BUILD:START");try{Ff(Js.ACH,r);var n=new Tu(r,e);return yield n.initialize(),r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){throw Vf(r,e,[fi,Ai],"initializing ach")}}))()}giftCard(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Wo.GiftCard);r.metricsHandler.logEvent("BUILD:START");try{var n=new dp(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){throw Vf(r,e,[pi,fi],"initializing giftcard")}}))()}afterpayClearpay(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Wo.Afterpay);r.metricsHandler.logEvent("BUILD:START");try{Ff(Js.AFTERPAY,r),Bf(e);var n=t.getPaymentRequestLock(e),[i,o]=yield wl(r),a=xf(i,o,e,r,n);return yield a.internalSetCheckoutToken(),r.metricsHandler.logEvent("BUILD:OK","good"),a}catch(e){throw Vf(r,e,[Jn,oi,ti,_i,ci,Ai],"initializing afterpay")}}))()}cashAppPay(e,t){var r=this;return Hf((function*(){var n=yield r.getPaymentContext(Wo.CashAppPayV1);n.metricsHandler.logEvent("BUILD:START");try{Ff(Js.CASH_APP_PAY_V1,n),Bf(e);var i=r.getPaymentRequestLock(e),o=yield tp.initialize(n),a=Mf(o,e,t,n,i);return n.metricsHandler.logEvent("BUILD:OK","good"),a}catch(e){throw Vf(n,e,[vi,yi,ci,Ai],"initializing cashAppPay")}}))()}markPaymentsReuse(){this.paymentsNumCalls+=1,this.metrics.logEvent({errorMessage:JSON.stringify({paymentsNumCalls:this.paymentsNumCalls}),event:"PAYMENTS_REUSE",eventSource:Wo.App})}getPaymentContext(e){var t=this;return Hf((function*(){var{featureFlagValues:r,messenger:n,session:i,paymentMethodSupportDetail:o,proofOfWorkComputePromise:a,isTestMerchant:s}=yield t.initializePaymentMethod(),c={instanceId:i.instanceId,sessionId:i.sessionId};void 0!==i.avt&&(t.errorLogger.setUser(i.avt),c.avt=i.avt),t.errorLogger.setCustomTags(c);var u,l=Sc(),d=new Ic(t.metrics,i,e,l);t.contextEventTarget||(t.contextEventTarget=new _c),void 0===t.analyticsBackend&&(t.analyticsBackend=new tc(i.applicationId,i.locationId,null!==(u=i.avt)&&void 0!==u?u:""));var h=new cc(t.errorLogger,n,d,i,o,t.localeStrings,t.contextEventTarget,r,s,t.analyticsBackend,a);return t.errorLogger.setRecordErrorMetrics(h.getFeatureFlagValues().record_error_metrics),h}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=Ph.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new ki("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}var Gf=new Map,zf={_utils:{},errors:Vo,payments:function(e,t){var r,n="".concat(e,"-").concat(null!=t?t:""),i=Gf.get(n);if(void 0!==i)return i.markPaymentsReuse(),i;if(!(r=a.windowLocation).hostname.endsWith("localhost")&&"https:"!==r.protocol)throw new bi;if(!a.isSupported())throw new Ii;if(function(e){if(!function(e){return!(e.length<22||e.length>37)&&ao.test(e)&&!so.test(e)}(e))throw new ro;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new ro;if(r&&!uo())throw new no(Pn.production,Xn.env);if(n&&!co(Pn.sandbox))throw new no(Pn.sandbox,Xn.env)}(e),null!=t&&"string"!=typeof t)throw new io;var{hostname:o,origin:s}=a.windowLocation,c=new vo({applicationId:e,applicationUrl:s,source:"web-payments-sdk-public",useGlobalHandlers:!1}),u={applicationId:e,hostname:o,locationId:null!=t?t:"",sourceUrl:s},l=new Qa(c,{applicationId:e,hostname:o,locationId:null!=t?t:""});l.logEvent({event:"LOAD:OK",eventSource:Wo.App});var d=new qf(u,l,c);return Gf.set(n,d),d}};"Square"in window?Object.assign(window.Square,zf):window.Square=zf})()})();
//# debugId=f444690e-e02a-5539-87b6-0661cd92ced4

</script>

</body>
</html>
