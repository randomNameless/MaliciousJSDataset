(function(){function a(){const a=document.querySelectorAll(`.${t}`),b=a.length;for(let c=0;c<b;c++){const b=a[c],d=b.getAttribute("data-conversion-id"),e=b.getAttribute("data-conversion-event-name"),f=b.getAttribute("data-conversion-type"),g=b.getAttribute("data-conversion-subevent");let h=b.getAttribute("data-conversion-value");isNaN(h)&&(h="0.0");const i=b.getAttribute("data-efdomain-value")||null,j=b.getAttribute("data-pixeldomain-value")||null;p(i,j),y.push({id:d,eventName:e,type:f,subevent:g,value:h}),b.parentNode.removeChild(b)}}function b({id:a,eventName:b,testModeList:c}){return c.filter(c=>c.eventName===b&&(c.advertiserId===a||c.campaignId===a))[0]}function c(a){const b=document.createElement("div");b.style="height: 100px;background-color: rgb(158, 158, 158);font-family: Roboto;font-size: 13px;color: white;position: fixed;bottom: 20px;left: 20px;margin: auto;border-radius: 10px;box-shadow: rgba(50, 50, 50, 0.27) 0px 4px 9px 0px;padding: 5px 20px;display: flex;justify-content: center;align-items: center;flex-direction: column;",b.setAttribute("time",B),b.className=r;const c=new Date;return b.innerHTML=`<div><Strong>${a}</Strong></div><div>EngageFront pixel detected</div><div>${c.toLocaleString()}</div>`,b}function d(){return document.getElementsByClassName(r)}function e(a){if(0!==a.length){const b=d();if(0===b.length){const{reportingName:b}=a[0],d=c(b);document.body.appendChild(d),setTimeout(function(){f(d),e(a.slice(1))},2e3)}else setTimeout(function(){e(a)},2e3)}}function f(a){a.parentNode.removeChild(a)}function g({conversions:a,message:c}){const d=[],e=[];return a.forEach(({id:a,eventName:f,type:g})=>{const h=b({id:a,eventName:f,testModeList:c});h?d.push({id:a,eventName:f,reportingName:h.reportingName,type:g}):e.push({id:a,eventName:f,type:g})}),{conversionsToShowNotification:d,conversionsToFire:e}}function h(a){a.forEach(({id:a,eventName:b,type:c,subevent:d,value:e})=>k({id:a,eventName:b,type:c,subevent:d,value:e}))}function i(){const a=function(b){const c=b.data;if(-1<b.origin.indexOf(u)){A=!0;let b=[],d=[];if("EF fire all pixels"===c)d=y;else{const a=g({conversions:y,message:c});b=a.conversionsToShowNotification,d=a.conversionsToFire}0<d.length&&h(d),0<b.length&&e(b),window.removeEventListener(`message`,a),m()}};window.addEventListener(`message`,a)}function j({id:a,eventName:b,type:c}){}function k({id:a,eventName:b,type:c,subevent:d,value:e}){const f=document.createElement("img");f.alt="";const g=new Date().getTime(),h=`${v}/x/b?data=`;let i={};if("campaign"===c&&b&&a)i.camp_id=a,i.event_name=b;else if("advertiser"===c&&b&&a)i.advertiser_org_id=a,i.event_name=b;else return void j({id:a,eventName:b,type:c});d&&(i.subevent=`${d}`),e&&(i.value=`${e.replace(/\$|,/g,"")}`),f.src=`${h}${encodeURIComponent(JSON.stringify(i)).replaceAll("%7B%7B","{{").replaceAll("%7D%7D","}}")}&url=${q()}&ts=${g}`,f.style.display="none",document.body.appendChild(f)}function l(){const a=document.createElement("iframe");a.src=w,a.height=0,a.width=0,a.style.display="none",a.className=s,document.body.appendChild(a),z=a}function m(){z.parentNode.removeChild(z)}function n(){return 0<y.length}function o(){i(),l(),setTimeout(function(){A||h(y)},5e3)}function p(a,b){return null===a?void(w=u+"/objects/conversioniframe.html",x=u+"/pixelerrors"):(w=a+"/objects/conversioniframe.html",x=a+"/pixelerrors",u=a,void(v=b))}function q(){const a=window===top?location.href:document.referrer,b=new URL(a);return encodeURIComponent(`${b.origin}${b.pathname}`)}const r="pixel-popup",s="pixel-iframe",t="ENGAGE_FRONT";let u="https://dashboard.engagefront.com",v="https://engagefront.theweathernetwork.com",w="/objects/conversioniframe.html",x="/pixelerrors";const y=[];let z=null,A=!1;const B=new Date().toISOString();(function(){a(),n()&&o()})()})();