(this["webpackJsonpexternal-embed"]=this["webpackJsonpexternal-embed"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a,o,r,i,c,l,u,s=n(0),d=n.n(s),p=n(39),m=n.n(p),h=n(6),b=n(7),f=n(9),g=n(8),v=n(110),S=n(107),y=n(111),x=n(16),E=n(4),w=n(5),_=w.a.div(a||(a=Object(E.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n  box-sizing: border-box;\n  text-align: center;\n  padding: 12px;\n  background-color: ",";\n"])),(function(e){return e.backgroundColor?e.backgroundColor:"#f3f4f6"})),O=w.a.div(o||(o=Object(E.a)(["\n  max-width: 28rem;\n  margin-left: auto;\n  margin-right: auto;\n"]))),C=w.a.div(r||(r=Object(E.a)(["\n  margin-bottom: 1.5rem;\n"]))),k=w.a.h2(i||(i=Object(E.a)(["\n  color: ",";\n  font-family: ",";\n  font-size: 28px;\n  line-height: 1;\n  margin-block: 0;\n  margin-bottom: 0.4;\n"])),(function(e){return e.textColor?e.textColor:"#000"}),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"})),j=w.a.p(c||(c=Object(E.a)(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 400;\n  color: ",";\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.textColor?e.textColor:"#000"})),F=w.a.a(l||(l=Object(E.a)(["\n"]))),I=w.a.img(u||(u=Object(E.a)(["\n  position: absolute;\n  display: block;\n  right: 12px;\n  bottom: 12px;\n  max-height: 18px;\n  opacity: .3;\n  transition: all .25s ease-out;\n\n  :hover {\n    opacity: 1;\n  }\n"]))),A=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(F,{target:"_blank",href:this.props.targetUrl},d.a.createElement(I,{src:"/img/beehiiv-logo.png"}))}}]),n}(s.Component);A.defaultProps={targetUrl:"https://www.beehiiv.com"};var T,P=A,R=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(_,null,d.a.createElement(O,null,d.a.createElement(C,null,d.a.createElement(k,null,"Not found"),d.a.createElement(j,null,"Oops. We can't find what you're looking for."))),d.a.createElement(P,null))}}]),n}(s.Component),N=n(44),L=n(108),M=n(109),B=n(2),U=n.n(B),D=n(40),z=n.n(D),H=n(31),q=n.n(H),V=n(17),W=n(41),G=n.n(W),J=n(25),Q=w.a.div(T||(T=Object(E.a)(["\n  font-size: 42px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n  color: ",";\n"])),(function(e){return e.color?e.color:"#000"})),Y=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(Q,{color:this.props.color},d.a.createElement(J.Dot,null,"."),d.a.createElement(J.Dot,null,"."),d.a.createElement(J.Dot,null,"."))}}]),n}(s.Component);Y.defaultProps={color:"#000"};var K,X,Z,$,ee,te,ne,ae,oe,re=Y,ie=d.a.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor"},d.a.createElement("path",{d:"M9.5,18.2c-0.4,0.4-1,0.4-1.4,0l-3.8-3.8C4,14,4,13.4,4.3,13s1-0.4,1.4,0l3.1,3.1l8.6-8.6c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4 L9.5,18.2z"})),ce=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement("div",{className:this.props.className},ie)}}]),n}(s.Component),le=n(18),ue={"Content-Type":"application/json",Accept:"application/json"},se=n(33),de=function(e){var t=e.name,n=e.category,a=e.action,o=e.label,r=void 0===o?window.location.href:o,i=e.value,c=void 0===i?0:i,l=e.data,u=void 0===l?{}:l;if("undefined"!==typeof window.dataLayer){var s=new Date;window.dataLayer.push({event:t,eventProps:Object(le.a)({category:n,action:a,label:r,value:c,timestamp:s.toISOString()},u)})}},pe=w.a.form(K||(K=Object(E.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n"]))),me=w.a.div(X||(X=Object(E.a)(["\n  width: 100%;\n"]))),he=w.a.label(Z||(Z=Object(E.a)(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n"]))),be=w.a.input($||($=Object(E.a)(["\n  -webkit-text-size-adjust: 100%;\n  tab-size: 4;\n  box-sizing: border-box;\n  border: 0 solid #e5e7eb;\n  font-family: ",";\n  margin: 0;\n  appearance: none;\n  background-color: rgba(255, 255, 255);\n  border-color: ",";\n  border-width: 2px;\n  display: block;\n  font-weight: 300;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  padding-left: 1.25rem;\n  padding-right: 1.25rem;\n  color: #000;\n  width: 100%;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 6px;\n  border-bottom-left-radius: 6px;\n\n  :focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.borderColor?e.borderColor:"rgb(61, 0, 223)"})),fe=w.a.div(ee||(ee=Object(E.a)(["\n  margin-top: 0;\n"]))),ge=w.a.div(te||(te=Object(E.a)(["\n  margin-top: 4px;\n"]))),ve=w.a.button(ne||(ne=Object(E.a)(["\n  white-space: pre;\n  appearance: button;\n  -webkit-text-size-adjust: 100%;\n  tab-size: 4;\n  box-sizing: border-box;\n  border: 0 solid #e5e7eb;\n  margin: 0;\n  font-family: ",";\n  background-color: ",";\n  color: ",";\n  border-color: transparent;\n  border-width: 1px;\n  cursor: pointer;\n  display: block;\n  font-weight: 500;\n  height: 100%;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  min-width: 100px;\n  transition-property: background-color, border-color, color, fill, stroke,\n    opacity, box-shadow, transform, filter, backdrop-filter,\n    -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 0.2s;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  padding: 0 1rem;\n\n  :disabled {\n    opacity: 0.7;\n    cursor: default;\n  }\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.backgroundColor?e.backgroundColor:"rgb(61, 0, 223)"}),(function(e){return e.textColor?e.textColor:"#000"})),Se=w.a.p(ae||(ae=Object(E.a)(["\n  font-family: ",";\n  color: #ef4444;\n  font-size: 12px;\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"})),ye=Object(w.a)(ce)(oe||(oe=Object(E.a)(["\n  color: ",";\n  fill: ",";\n  width: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: -5px;\n"])),(function(e){return e.color?e.color:"#FFF"}),(function(e){return e.color?e.color:"#FFF"})),xe=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t,n=e.target,o=n.value,r=n.name;a.updateState((t={},Object(V.a)(t,r,o),Object(V.a)(t,"error",null),t))},a.updateState=function(e){var t=Object.assign({},a.state,e);a.setState(t)},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state,n=t.captchaInteractionNeeded,o=t.captchaToken,r=t.captchaLoading,i=a.props.captchaEnabled;if(i&&n)a.updateState({captchaInteractionChallengeShowing:!0});else if(i&&!o&&r)a.updateState({isSubmitting:!0,captchaPrematurelySubmitted:!0});else{var c=a.props.successRedirectUrl,l=function(t){var n=a.props[t],o=function(t){if(null==t)return null;try{return decodeURIComponent(t)}catch(e){return t}};return Array.isArray(n)?o(n[0]):o(n)},u={external_embed_id:a.props.embedId,publication_id:a.props.publicationId,email:a.state.email,captcha_token:a.state.captchaToken,utm_source:l("utmSource"),utm_medium:l("utmMedium"),utm_campaign:l("utmCampaign"),referrer:l("referrer"),slim:a.props.isSlim,user_agent:a.props.userAgent};Object.keys(u).forEach((function(e){return null==u[e]&&delete u[e]})),!u.email||u.email&&""===u.email.trim()||(a.updateState({isSubmitting:!0}),function(e){var t=localStorage.getItem("pxcookie");return se.post("/api/submit",e,{headers:Object(le.a)(Object(le.a)({},ue),t?{"x-px-cookies":t}:{})})}(u).then((function(e){var t,n;if(a.updateState({isSubmitted:!0}),de({name:"submittedEmail",category:"conversion",action:"submittedEmail",label:"embedded form",data:{email:a.state.email,utm_source:a.props.utmSource,utm_medium:a.props.utmMedium,utm_campaign:a.props.utmCampaign}}),c&&(null===(t=window)||void 0===t||null===(n=t.parent)||void 0===n?void 0:n.location)){var o=new URL(c),r=a.props.removeEmailFromRedirectUrl,i=e.data.subscription_id||null;r&&i?o.searchParams.set("sub_id",i):o.searchParams.set("email",a.state.email),window.parent.location.href=o.href}else{(window.top||window.parent||window).postMessage({type:"BEEHIIV_SUBSCRIBER_FORM_SUBMITTED",email:a.state.email,externalEmbedId:a.props.embedId},"*")}})).catch((function(e){if(403!==U()(e,"response","status")){var t=U()(e,"response","data","message")||"Something went wrong";a.updateState({error:t})}})).finally((function(){a.updateState({isSubmitting:!1})})))}},a.handleSubmitOnSuccessfulCaptchaInteraction=function(e){a.updateState({captchaToken:e,captchaPrematurelySubmitted:!1,captchaLoading:!1,captchaInteractionNeeded:!1}),setTimeout((function(){a.updateState({captchaInteractionChallengeShowing:!1})}),1e3)},a.handleResubmitWhenTokenGenerated=function(e){a.updateState({captchaToken:e,captchaPrematurelySubmitted:!1,captchaLoading:!1,captchaInteractionNeeded:!1}),setTimeout((function(){a.updateState({captchaInteractionChallengeShowing:!1})}),1e3)},a.handleSetToken=function(e){a.updateState({captchaToken:e,captchaLoading:!1})},a.handleResetCaptcha=function(){a.updateState({captchaToken:""}),window.turnstile.reset(a.props.embedId)},a.beehiivLink=function(){var e=a.props,t=e.embedId,n=e.publicationId;return"https://beehiiv.com?utm_source=external_embed&utm_content=".concat(t,"&publication_id=").concat(n)},a.isLocked=function(){return!!a.state.isSubmitted},a.renderForm=function(){var e=a.props,t=e.inputPlaceholder,n=e.buttonText,o=e.successMessageText,r=e.config,i=e.captchaEnabled,c=e.embedId,l=e.isSlim,u=a.state,s=u.isSubmitting,p=u.isSubmitted,m=u.error,h=u.captchaInteractionChallengeShowing,b=u.captchaToken,f=u.captchaInteractionNeeded,g=U()(r,"button_color"),v=U()(r,"button_text_color"),S=U()(r,"body_font"),y=U()(r,"text_color"),x=U()(r,"button_font"),E=a.isLocked(),w=i&&!b,_=h&&l;return o&&p?d.a.createElement(j,{textColor:y,fontFamily:S},o):d.a.createElement(d.a.Fragment,null,!_&&d.a.createElement(pe,{onSubmit:a.handleSubmit,captchaLoading:w},d.a.createElement(me,null,d.a.createElement(he,{htmlFor:"email"},"Email"),d.a.createElement(be,{borderColor:g,fontFamily:x,autoComplete:"email",placeholder:t||"Enter your email",onChange:a.handleChange,onFocus:function(){f&&a.updateState({captchaInteractionChallengeShowing:!0})},value:a.state.email,disabled:E,type:"email",name:"email",required:!0})),d.a.createElement(fe,null,d.a.createElement(ve,{backgroundColor:g,fontFamily:x,textColor:v,type:"submit",disabled:E},p?d.a.createElement(ye,{color:v}):s?d.a.createElement(re,{color:v}):n))),m&&d.a.createElement(Se,{fontFamily:S},m),i&&d.a.createElement(ge,null,d.a.createElement(G.a,{widgetId:c,sitekey:"0x4AAAAAAAEd9Y5m2ti6x_A8",appearance:"interaction-only",style:{margin:_?"-12px":""},onLoad:function(){a.updateState({captchaLoading:!0})},onTimeout:function(){return a.handleResetCaptcha()},onExpire:function(){return a.handleResetCaptcha()},theme:"auto",size:"normal",onBeforeInteractive:function(){a.updateState({captchaInteractionNeeded:!0})},onVerify:function(e){var t=a.state,n=t.captchaPrematurelySubmitted;t.captchaInteractionNeeded&&e?a.handleSubmitOnSuccessfulCaptchaInteraction(e):n&&e?a.handleResubmitWhenTokenGenerated(e):a.handleSetToken(e)}})))},a.state={isSubmitting:!1,isSubmitted:!1,email:"",error:null,captchaToken:"",captchaInteractionNeeded:!1,captchaLoading:!1,captchaPrematurelySubmitted:!1,captchaInteractionChallengeShowing:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.description,a=e.config,o=e.isSlim,r=e.isBeehiivBranded,i=U()(a,"background_color"),c=U()(a,"text_color"),l=U()(a,"header_font"),u=U()(a,"body_font");return o?this.renderForm():d.a.createElement(_,{backgroundColor:i},d.a.createElement(O,null,d.a.createElement(C,null,d.a.createElement(k,{textColor:c,fontFamily:l},t),d.a.createElement(j,{textColor:c,fontFamily:u},n)),this.renderForm()),r?d.a.createElement(P,{targetUrl:this.beehiivLink()}):null)}}]),n}(s.Component);xe.defaultProps={isSlim:!1};var Ee=xe,we=n(33),_e=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).setupMutationObserver=function(){var e=document.body;a.observer=new MutationObserver((function(e){var t,n=Object(N.a)(e);try{for(n.s();!(t=n.n()).done;){var a,o=t.value;if("attributes"===o.type&&"px-captcha-modal"===(null===(a=o.target)||void 0===a?void 0:a.id)){var r=o.target.contentDocument;Array.from(r.getElementsByClassName("px-captcha-message")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(r.getElementsByClassName("px-captcha-header")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(r.getElementsByClassName("px-captcha-report")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(r.getElementsByClassName("px-captcha-refid")).forEach((function(e){return e.setAttribute("style","display:none")})),Array.from(r.getElementsByClassName("px-captcha-container")).forEach((function(e){e.setAttribute("style","height:50px; width: 100%; top: 0; left: 0; margin-top: 0; margin-left: 0;")}))}}}catch(i){n.e(i)}finally{n.f()}})),a.observer.observe(e,{attributes:!0,childList:!0,subtree:!0})},a.addHumanScriptToHead=function(e){"true"===window.env.REACT_APP_HUMAN_ENABLED&&(window.env.REACT_APP_HUMAN_RESPONSE_DOMAIN&&(a.humanResponseDomainScript=document.createElement("script"),a.humanResponseDomainScript.innerHTML='\n          window._pxCustomAbrDomains = ["'.concat(window.env.REACT_APP_HUMAN_RESPONSE_DOMAIN,'"];\n        '),document.head.appendChild(a.humanResponseDomainScript)),a.humanCookieStorageScript=document.createElement("script"),a.humanCookieStorageScript.textContent="\n        window.".concat(window.env.REACT_APP_HUMAN_APP_ID,'_asyncInit = function (px) {\n          px.Events.on(\'risk\', function (risk, name) {\n            localStorage.setItem("pxcookie", risk + "=" + name);\n          });\n        };\n      '),document.head.appendChild(a.humanCookieStorageScript),a.humanScript=document.createElement("script"),a.humanScript.src=window.env.REACT_APP_HUMAN_URL,a.humanScript.async=!0,document.head.appendChild(a.humanScript),e&&(a.humanScript.onload=function(){window["_"+window._pxAppId]={challenge:{view:{texSize:12},translation:{default:{btn:"Press & Hold to confirm you're human"}}}}}),a.captchaScript=document.createElement("script"),a.captchaScript.innerHTML='\n          window._pxOnCaptchaSuccess = function (isValid) {\n          console.log("Captcha success", isValid);\n        };\n      ',document.head.appendChild(a.captchaScript))},a.removeHumanScriptFromHead=function(){a.humanCookieStorageScript&&document.head.removeChild(a.humanCookieStorageScript),a.humanScript&&document.head.removeChild(a.humanScript),a.captchaScript&&document.head.removeChild(a.captchaScript),a.humanResponseDomainScript&&document.head.removeChild(a.humanResponseDomainScript)},a.fetchExternalEmbed=function(){var e,t=a.props.match.params.embedId;a.updateState({isLoading:!0}),(e=t,we.get("/api/embeds/".concat(e),{headers:ue})).then((function(e){var t=U()(e,"data"),n=U()(t,"publication_id"),o=U()(t,"header"),r=U()(t,"description"),i=U()(t,"input_placeholder"),c=U()(t,"button_text"),l=U()(t,"success_message_text"),u=U()(t,"success_redirect_url"),s=U()(t,"config"),d=U()(t,"captcha_enabled"),p=U()(t,"beehiiv_branded"),m=U()(t,"remove_email_from_redirect_url"),h=Object.assign({},a.state.config,s),b=a.fontsToLoad(h);a.updateState({publicationId:n,header:o,description:r,inputPlaceholder:i,buttonText:c,successMessageText:l,successRedirectUrl:u,config:h,requiredFonts:b,captchaEnabled:d,isBeehiivBranded:p,removeEmailFromRedirectUrl:m})})).catch((function(e){var t=U()(e,"response","status"),n=U()(e,"response","data","message")||"Something went wrong";a.updateState({isNotFound:404===t,error:n})})).finally((function(){a.updateState({isLoading:!1})}))},a.updateState=function(e){var t=Object.assign({},a.state,e);a.setState(t)},a.fontsToLoad=function(e){var t=U()(e,"header_font"),n=U()(e,"body_font"),a=U()(e,"button_font"),o=[];return t&&"Open Sans"!==t&&!o.includes(t)&&o.push(t),n&&"Open Sans"!==n&&!o.includes(n)&&o.push(n),a&&"Open Sans"!==a&&!o.includes(a)&&o.push(a),o},a.state={isLoading:!1,isNotFound:!1,error:null,publicationId:null,header:null,description:null,inputPlaceholder:null,buttonText:null,successMessageText:null,successRedirectUrl:null,captchaEnabled:!1,config:{body_font:"Poppins",button_font:"Open Sans",header_font:"Poppins",button_color:"#62FF2B",background_color:"#62ECFF",text_color:"#000",button_text_color:"#000"},requiredFonts:[],isBeehiivBranded:!1,removeEmailFromRedirectUrl:!1},a.humanResponseDomainScript=null,a.humanScript=null,a.humanCookieStorageScript=null,a.observer=null,a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=!!q.a.parse(e,{ignoreQueryPrefix:!0}).slim;this.fetchExternalEmbed(),this.addHumanScriptToHead(t),t&&this.setupMutationObserver()}},{key:"componentWillUnmount",value:function(){this.removeHumanScriptFromHead(),this.observer&&this.observer.disconnect()}},{key:"render",value:function(){var e,t,n=this.props,a=n.location.search,o=n.match.params.embedId,r=q.a.parse(a,{ignoreQueryPrefix:!0}),i=!!r.slim,c=null===r||void 0===r?void 0:r.utm_source,l=null===r||void 0===r?void 0:r.utm_campaign,u=null===r||void 0===r?void 0:r.utm_medium,s=null===r||void 0===r?void 0:r.referrer,p=null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent,m=this.state,h=m.isLoading,b=m.isNotFound,f=m.publicationId,g=m.header,v=m.description,S=m.inputPlaceholder,y=m.buttonText,x=m.successMessageText,E=m.successRedirectUrl,w=m.config,_=m.requiredFonts,O=m.captchaEnabled,C=m.isBeehiivBranded,k=m.removeEmailFromRedirectUrl;if(b)return d.a.createElement(L.a,{to:"/not-found"});if(h)return null;var j=_.map((function(e){return{font:e,weights:[400,700]}}));return d.a.createElement(d.a.Fragment,null,j.length>0&&d.a.createElement(z.a,{fonts:j}),d.a.createElement(Ee,{embedId:o,publicationId:f,header:g,description:v,inputPlaceholder:S,buttonText:y,successMessageText:x,successRedirectUrl:E,config:w,isSlim:i,utmSource:c,utmMedium:u,utmCampaign:l,referrer:s,userAgent:p,captchaEnabled:O,isBeehiivBranded:C,removeEmailFromRedirectUrl:k}))}}]),n}(s.Component),Oe=Object(M.a)(_e),Ce=Object(x.a)(),ke=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(y.a,{history:Ce},d.a.createElement(v.a,null,d.a.createElement(S.a,{exact:!0,path:"/not-found",component:R}),d.a.createElement(S.a,{exact:!0,path:"/:embedId",component:Oe}),d.a.createElement(S.a,{component:R}))))}}]),n}(s.Component);m.a.render(d.a.createElement(ke,null),document.getElementById("root"))},49:function(e,t,n){e.exports=n(105)},66:function(e,t){}},[[49,1,2]]]);
//# sourceMappingURL=main.7276d47b.chunk.js.map