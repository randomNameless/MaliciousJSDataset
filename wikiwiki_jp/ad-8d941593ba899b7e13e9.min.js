(()=>{"use strict";var t="referrerDomain";var e="wikifqData";function i(t,i,s){try{var r=sessionStorage.getItem(e),a=r?JSON.parse(r):{};a[t]=a[t]||{frequency:0,lastShown:0,intervalStart:s},a[t].frequency=i,a[t].lastShown=Date.now(),a[t].intervalStart=s,sessionStorage.setItem(e,JSON.stringify(a))}catch(t){console.error("Session storage is not accessible:",t)}}class s{constructor(t,e,i){if(this.cookieName=t,this.lifetimeSec=e,this.targetReferers=["https://www.google.com","https://www.google.co.jp","https://www.yahoo.co.jp"],this.data=null,void 0!==i)for(const t of i)this.targetReferers.push(t);this.reload()}trim(t){return t.replace(/^\s+|\s+$/g,"")}cookies(){var t=document.cookie;if(!t)return{};var e={},i=t.split(";");for(const t of i){var s=t.split("=");s.length>=2&&(e[this.trim(s[0])]=this.trim(s[1]))}return e}startSession(){this.data={search:1,visit:1,total:1,action:0},this.save()}isOrganicIncomingVisit(){for(const t of this.targetReferers)if(-1!==document.referrer.indexOf(t))return!0;return!1}reload(){if(void 0===this.cookies()[this.cookieName])this.isOrganicIncomingVisit()?this.startSession():this.data=null;else try{var t=this.cookies()[this.cookieName];this.data=JSON.parse(t),"object"!=typeof this.data||isNaN(this.data.search)||isNaN(this.data.visit)||isNaN(this.data.total)||isNaN(this.data.action)?this.startSession():(this.data.total++,this.isOrganicIncomingVisit()?(this.data.visit=1,this.data.search++):this.data.visit++,this.save())}catch(t){this.startSession()}}save(){var t=new Date;t.setTime(t.getTime()+1e3*this.lifetimeSec),document.cookie=this.cookieName+"="+JSON.stringify(this.data)+"; path=/; expires="+t.toUTCString()}isOrganicIncomingSession(){return null!==this.data}invokableNullObject(){var t={invoke:function(){return t}};return t}static new(t,e,i){return new s(t,e,i)}invoke(t){return this.isOrganicIncomingSession()?t(this.data)?(this.data.action++,this.save(),this.invokableNullObject()):this:this.invokableNullObject()}}window.recordReferrerDomain=function(){var e,i,s=document.referrer;if(s&&!s.includes(window.location.hostname)){var r=(e=s,(i=document.createElement("a")).href=e,i.hostname),a=sessionStorage.getItem(t);return a||sessionStorage.setItem(t,r),a||r}return sessionStorage.getItem(t)||null},window.createWikiFq=function(){var t=new Map;function s(s,r,a,n){if(t.has(s))return t.get(s);var o=function(t){try{var i=sessionStorage.getItem(e);return i&&JSON.parse(i)[t]||{frequency:0,lastShown:0,intervalStart:0}}catch(t){return console.error("Session storage is not accessible:",t),null}}(s);if(!o)return t.set(s,!1),!1;var c=Date.now(),h=60*a*1e3;c-o.intervalStart>h&&(o.frequency=0,o.intervalStart=c);var l,u=o.frequency<r&&(l=n,Math.random()<l);return i(s,u?o.frequency+1:o.frequency,o.intervalStart),t.set(s,u),u}return{checkWikifqDisplay:function(t,e,i,r){return s(t,e,i,r)}}},window.OrganicTracking=s})();
//# sourceMappingURL=ad-8d941593ba899b7e13e9.min.js.map