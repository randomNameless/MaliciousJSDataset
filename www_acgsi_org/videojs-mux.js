/*!
 * videojs-mux
 * @version 4.20.3
 * @copyright 2024 Mux, Inc.
 */
!function(){!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("video.js"));else{var a="object"==typeof exports?t(require("video.js")):t(e.videojs);for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,(function(e){return function(){var t={48:function(e,t,a){var r;r="undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{},e.exports=r},855:function(t){"use strict";t.exports=e}},a={};function r(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";r.r(i),r.d(i,{register:function(){return Ea}});var e=r(48),t=r.n(e),a=r(855),n=r.n(a),o=Object.create,s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,l=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,p=function(e,t){return function(){return e&&(t=e(e=0)),t}},h=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},_=function(e,t,a){return a=null!=e?o(l(e)):{},function(e,t,a,r){if(t&&"object"==typeof t||"function"==typeof t)for(var i,n=d(t),o=0,l=n.length;o<l;o++)i=n[o],!c.call(e,i)&&i!==a&&s(e,i,{get:function(e){return t[e]}.bind(null,i),enumerable:!(r=u(t,i))||r.enumerable});return e}(!t&&e&&e.__esModule?a:s(a,"default",{value:e,enumerable:!0}),e)},f=h((function(e,t){var a;a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=a}));function m(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):m(e,t)}var v=p((function(){v()}));function y(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var g=p((function(){})),b=h((function(e,t){var a=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=a.call(e));e.length;){var r=e.shift(),i=t(r);if(i)return i;r.childNodes&&r.childNodes.length&&(e=a.call(r.childNodes).concat(e))}}})),w=h((function(e,t){function a(e,t){if(!m(this,a))return new a(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}v(),t.exports=a,a.prototype.nodeType=8,a.prototype.nodeName="#comment",a.prototype.toString=function(){return"[object Comment]"}})),T=h((function(e,t){function a(e,t){if(!m(this,a))return new a(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}v(),t.exports=a,a.prototype.type="DOMTextNode",a.prototype.nodeType=3,a.prototype.nodeName="#text",a.prototype.toString=function(){return this.data},a.prototype.replaceData=function(e,t,a){var r=this.data,i=r.substring(0,e),n=r.substring(e+t,r.length);this.data=i+a+n,this.length=this.data.length}})),x=h((function(e,t){t.exports=function(e){var t=this,a=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[a];if(r)return r.forEach((function(a){e.currentTarget=t,"function"==typeof a?a(e):a.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),k=h((function(e,t){t.exports=function(e,t){var a=this;a.listeners||(a.listeners={}),a.listeners[e]||(a.listeners[e]=[]),-1===a.listeners[e].indexOf(t)&&a.listeners[e].push(t)}})),E=h((function(e,t){t.exports=function(e,t){var a=this;if(a.listeners&&a.listeners[e]){var r=a.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}})),D=h((function(e,t){g(),t.exports=r;var a=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){switch(e.nodeType){case 3:return o(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],s=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(s=s.toLowerCase()),t.push("<"+s+function(e){var t=[];for(var a in e)i(e,a)&&t.push({name:a,value:e[a]});for(var r in e._attributes)for(var o in e._attributes[r]){var s=e._attributes[r][o],u=(s.prefix?s.prefix+":":"")+o;t.push({name:u,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?n(t):""}(e)+function(e){var t=e.dataset,a=[];for(var r in t)a.push({name:"data-"+r,value:t[r]});return a.length?n(a):""}(e)),a.indexOf(s)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(r)):e.textContent||e.innerText?t.push(o(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+s+">")),t.join("")}(e)}}function i(e,t){var a=y(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===a||"boolean"===a||"number"===a)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function n(e){var t=[];return e.forEach((function(e){var a=e.name,r=e.value;"style"===a&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(a){var r=e[a];a=a.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=a+":"+r+";"})),t}(r)),t.push(a+'="'+function(e){return o(e).replace(/"/g,"&quot;")}(r)+'"')})),t.length?" "+t.join(" "):""}function o(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),q=h((function(e,t){v();var a=b(),r=x(),i=k(),n=E(),o=D(),s="http://www.w3.org/1999/xhtml";function u(e,t,a){if(!m(this,u))return new u(e);var r=void 0===a?s:a||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=u,u.prototype.type="DOMElement",u.prototype.nodeType=1,u.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},u.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[a]=e,e.parentNode=this,t},u.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},u.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=null==t?-1:this.childNodes.indexOf(t);return a>-1?this.childNodes.splice(a,0,e):this.childNodes.push(e),e.parentNode=this,e},u.prototype.setAttributeNS=function(e,t,a){var r=null,i=t,n=t.indexOf(":");(n>-1&&(r=t.substr(0,n),i=t.substr(n+1)),"INPUT"===this.tagName&&"type"===t)?this.type=a:(this._attributes[e]||(this._attributes[e]={}))[i]={value:a,prefix:r}},u.prototype.getAttributeNS=function(e,t){var a=this._attributes[e],r=a&&a[t]&&a[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},u.prototype.removeAttributeNS=function(e,t){var a=this._attributes[e];a&&delete a[t]},u.prototype.hasAttributeNS=function(e,t){var a=this._attributes[e];return!!a&&t in a},u.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},u.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},u.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},u.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},u.prototype.removeEventListener=n,u.prototype.addEventListener=i,u.prototype.dispatchEvent=r,u.prototype.focus=function(){},u.prototype.toString=function(){return o(this)},u.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return a(this,(function(e){if(1===e.nodeType){var a=(e.className||"").split(" ");t.every((function(e){return-1!==a.indexOf(e)}))&&r.push(e)}})),r},u.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return a(this.childNodes,(function(a){1===a.nodeType&&("*"===e||a.tagName.toLowerCase()===e)&&t.push(a)})),t},u.prototype.contains=function(e){return a(this,(function(t){return e===t}))||!1}})),A=h((function(e,t){v();var a=q();function r(e){if(!m(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=a.prototype.appendChild,r.prototype.replaceChild=a.prototype.replaceChild,r.prototype.removeChild=a.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),S=h((function(e,t){function a(e){}t.exports=a,a.prototype.initEvent=function(e,t,a){this.type=e,this.bubbles=t,this.cancelable=a},a.prototype.preventDefault=function(){}})),O=h((function(e,t){v();var a=b(),r=w(),i=T(),n=q(),o=A(),s=S(),u=x(),d=k(),l=E();function c(){if(!m(this,c))return new c;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=c;var p=c.prototype;p.createTextNode=function(e){return new i(e,this)},p.createElementNS=function(e,t){var a=null===e?null:String(e);return new n(t,this,a)},p.createElement=function(e){return new n(e,this)},p.createDocumentFragment=function(){return new o(this)},p.createEvent=function(e){return new s(e)},p.createComment=function(e){return new r(e,this)},p.getElementById=function(e){return e=String(e),a(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},p.getElementsByClassName=n.prototype.getElementsByClassName,p.getElementsByTagName=n.prototype.getElementsByTagName,p.contains=n.prototype.contains,p.removeEventListener=l,p.addEventListener=d,p.dispatchEvent=u})),P=h((function(e,t){var a=O();t.exports=new a})),R=h((function(e,t){var a,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},i=P();"undefined"!=typeof document?a=document:(a=r["__GLOBAL_DOCUMENT_CACHE@4"])||(a=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=a}));function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function I(e,t){if(e){if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}return n}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=_(f()),C=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},H=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},M=function(e){if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=H()),e.muxId;var t;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},B=function(e){var t;e&&void 0!==e.nodeName?e=M(t=e):t=document.querySelector(e);var a=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,a]};function U(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=0,V=1,W=2,G=3,Q=4,J=function(e){var t,a,r,i,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],u=(t=console.trace).bind.apply(t,U(s)),d=(a=console.info).bind.apply(a,U(s)),l=(r=console.debug).bind.apply(r,U(s)),c=(i=console.warn).bind.apply(i,U(s)),p=(n=console.error).bind.apply(n,U(s)),h=o;return{trace:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(h>F))return u.apply(void 0,U(t))},debug:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(h>V))return l.apply(void 0,U(t))},info:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(h>W))return d.apply(void 0,U(t))},warn:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(h>G))return c.apply(void 0,U(t))},error:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(h>Q))return p.apply(void 0,U(t))},get level(){return h},set level(e){e!==this.level&&(h=null!=e?e:o)}}}("[mux]"),z=_(f());function K(){return"1"===(z.default.doNotTrack||z.default.navigator&&z.default.navigator.doNotTrack)}var Y=_(f()),X={now:function(){var e=Y.default.performance,t=e&&e.timing,a=t&&t.navigationStart,r="number"==typeof a&&"function"==typeof e.now?a+e.now():Date.now();return Math.round(r)}};function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){if(!m(e,t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,a){return t&&ee(e.prototype,t),a&&ee(e,a),e}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,a){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(a||e):i.value}},ie(e,t,a||e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?$(e):t}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=re(e);if(t){var i=re(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return oe(this,a)}}v(),g();var ue=function(e){return de(e)[0]},de=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,a=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return a&&(t=(a.match(/[^\.]+\.[^\.]+$/)||[])[0]),[a,t]},le=_(f()),ce={exists:function(){var e=le.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=le.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=le.default.performance,t=e&&e.timing;return t&&t.navigationStart}};function pe(e,t,a){a=void 0===a?1:a,e[t]=e[t]||0,e[t]+=a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){ae(e,t,a[t])}))}return e}function _e(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}var fe=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],me=["x-cdn","content-type"].concat(fe);function ve(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var a=e.split(": "),r=a.shift();r&&(me.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=a.join(": "))}})),t}function ye(e){if(e){var t=fe.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var ge=function(e){var t={};for(var a in e){var r=e[a];if(-1!==r["DATA-ID"].search("io.litix.data."))t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE}return t},be=function(e){if(!e)return{};var t=ce.navigationStart(),a=e.loading,r=a?a.start:e.trequest,i=a?a.first:e.tfirst,n=a?a.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+i),responseEnd:Math.round(t+n)}},we=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return ve(e.getAllResponseHeaders())},Te=function(e,t){if(!e||!e.requestEndDate)return{};var a,r=ue(e.url),i=e.url,n=e.bytesLoaded,o=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),u=new Date(e.requestEndDate).getTime(),d=isNaN(e.duration)?0:e.duration,l="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return l.length>0&&(a=ve(l[l.length-1]._responseHeaders||"")),{requestStart:o,requestResponseStart:s,requestResponseEnd:u,requestBytesLoaded:n,requestResponseHeaders:a,requestMediaDuration:d,requestHostname:r,requestUrl:i,requestId:a?ye(a):void 0}},xe=function(e,t){var a=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:a,renditionWidth:r[a].width||null,renditionHeight:r[a].height||null,renditionBitrate:r[a].bandwidth}:{}},ke=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},Ee=function(e){try{var t,a;return null===(a=e.getVersion)||void 0===a||null===(t=a.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0]}catch(e){return!1}},De=0,qe=function(){function e(){Z(this,e),ae(this,"_listeners",void 0)}return te(e,[{key:"on",value:function(e,t,a){return t._eventEmitterGuid=t._eventEmitterGuid||++De,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],a&&(t=t.bind(a)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var a=this._listeners&&this._listeners[e];a&&a.forEach((function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&a.splice(r,1)}))}},{key:"one",value:function(e,t,a){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++De;var i=function(){r.off(e,i),t.apply(a||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var a=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],i=this._listeners[e]||[],n=this._listeners["after"+e]||[],o=function(t,r){(t=t.slice()).forEach((function(t){t.call(a,{type:e},r)}))};o(r,t),o(i,t),o(n,t)}}}]),e}(),Ae=qe,Se=_(f()),Oe=function(){function e(t){var a=this;Z(this,e),ae(this,"_playbackHeartbeatInterval",void 0),ae(this,"_playheadShouldBeProgressing",void 0),ae(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){a._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?a._stopPlaybackHeartbeatInterval():a._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==a._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,r){null!==a._playbackHeartbeatInterval&&(Se.default.clearInterval(a._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),a._playbackHeartbeatInterval=null)}))}return te(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=Se.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(Se.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),Pe=function e(t){var a=this;Z(this,e),ae(this,"viewErrored",void 0),t.on("viewinit",(function(){a.viewErrored=!1})),t.on("error",(function(e,r){try{var i=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});i&&(t.data.player_error_code=i.player_error_code||r.player_error_code,t.data.player_error_message=i.player_error_message||r.player_error_message,t.data.player_error_context=i.player_error_context||r.player_error_context,t.data.player_error_severity=i.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=i.player_error_business_exception||r.player_error_business_exception,a.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),a.viewErrored=!0}})),t.on("aftererror",(function(){var e,a,r,i,n;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(a=t.data)||void 0===a||delete a.player_error_message,null===(r=t.data)||void 0===r||delete r.player_error_context,null===(i=t.data)||void 0===i||delete i.player_error_severity,null===(n=t.data)||void 0===n||delete n.player_error_business_exception}))},Re=function(){function e(t){Z(this,e),ae(this,"_watchTimeTrackerLastCheckedTime",void 0),ae(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return te(e,[{key:"_updateWatchTime",value:function(e,t){var a=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=a),pe(this.pm.data,"view_watch_time",a-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=a}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),Ne=function(){function e(t){var a=this;Z(this,e),ae(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),ae(this,"_lastTime",void 0),ae(this,"_isAdPlaying",void 0),ae(this,"_callbackUpdatePlaybackTime",void 0),ae(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=X.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("adplaying",(function(){a._isAdPlaying=!0})),t.on("adended",(function(){a._isAdPlaying=!1})),t.on("adpause",(function(){a._isAdPlaying=!1})),t.on("adbreakstart",(function(){a._isAdPlaying=!1})),t.on("adbreakend",(function(){a._isAdPlaying=!1})),t.on("adplay",(function(){a._isAdPlaying=!1})),t.on("viewinit",(function(){a._playbackTimeTrackerLastPlayheadPosition=-1,a._lastTime=X.now(),a._isAdPlaying=!1,a._callbackUpdatePlaybackTime=null}))}return te(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=X.now(),a=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?a=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(a=t-this._lastTime),a>0&&a<=1e3&&pe(this.pm.data,"view_content_playback_time",a),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),Ie=function(){function e(t){Z(this,e),ae(this,"pm",void 0),this.pm=t;var a=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",a),t.on("playbackheartbeatend",a),t.on("timeupdate",a),t.on("destroy",(function(){t.off("timeupdate",a)}))}return te(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var a=this,r=function(){a.pm.currentFragmentPDT&&a.pm.currentFragmentStart&&(a.pm.data.player_program_time=a.pm.currentFragmentPDT+a.pm.data.player_playhead_time-a.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();void 0!==i&&(this.pm.data.player_playhead_time=i,r(),this._updateMaxPlayheadPosition())}}}]),e}(),Le=3e5,je=function e(t){if(Z(this,e),!t.disableRebufferTracking){var a,r=function(e,t){i(t),a=void 0},i=function(e){if(a){var r=e.viewer_time-a;pe(t.data,"view_rebuffer_duration",r),a=e.viewer_time,t.data.view_rebuffer_duration>Le&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(Le,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){a||(pe(t.data,"view_rebuffer_count",1),a=i.viewer_time,t.one("rebufferend",r))})),t.on("viewinit",(function(){a=void 0,t.off("rebufferend",r)}))}},Ce=function(){function e(t){var a=this;Z(this,e),ae(this,"_lastCheckedTime",void 0),ae(this,"_lastPlayheadTime",void 0),ae(this,"_lastPlayheadTimeUpdatedTime",void 0),ae(this,"_rebuffering",void 0),ae(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){a._cleanupRebufferTracker(null,{viewer_time:X.now()})})))}return te(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var a=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&a>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&i-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r}))}a?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),He=Ce,Me=function(){function e(t){var a=this;Z(this,e),ae(this,"NAVIGATION_START",void 0),ae(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var i=function(e,i){var n=i.viewer_time;("playing"===e.type&&void 0===t.data.view_time_to_first_frame||"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||a._inPrerollPosition()))&&a.calculateTimeToFirstFrame(n||X.now(),r)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}return te(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),Be=function e(t){var a=this;Z(this,e),ae(this,"_lastPlayerHeight",void 0),ae(this,"_lastPlayerWidth",void 0),ae(this,"_lastPlayheadPosition",void 0),ae(this,"_lastSourceHeight",void 0),ae(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){a._lastPlayheadPosition=-1}));["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(e){t.on(e,(function(){if(a._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&a._lastPlayerWidth>=0&&a._lastSourceWidth>0&&a._lastPlayerHeight>=0&&a._lastSourceHeight>0){var e=t.data.player_playhead_time-a._lastPlayheadPosition;if(e<0)return void(a._lastPlayheadPosition=-1);var r=Math.min(a._lastPlayerWidth/a._lastSourceWidth,a._lastPlayerHeight/a._lastSourceHeight),i=Math.max(0,r-1),n=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,n),pe(t.data,"view_total_content_playback_time",e),pe(t.data,"view_total_upscaling",i*e),pe(t.data,"view_total_downscaling",n*e)}a._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(e){t.on(e,(function(){a._lastPlayheadPosition=t.data.player_playhead_time,a._lastPlayerWidth=t.data.player_width,a._lastPlayerHeight=t.data.player_height,a._lastSourceWidth=t.data.video_source_width,a._lastSourceHeight=t.data.video_source_height}))}))},Ue=function e(t){var a=this;Z(this,e),ae(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var e=X.now(),i=(t.data.viewer_time||e)-(r||e);pe(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),a.isSeeking=!1,r=-1};t.on("seeking",(function(e,n){Object.assign(t.data,n),a.isSeeking&&n.viewer_time-r<=2e3?r=n.viewer_time:(a.isSeeking&&i(),a.isSeeking=!0,r=n.viewer_time,pe(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){a.isSeeking&&(i(),t.send("seeked")),a.isSeeking=!1,r=-1}))},Fe=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},Ve=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],We=function(){function e(t){var a=this;Z(this,e),ae(this,"_adHasPlayed",void 0),ae(this,"_adRequests",void 0),ae(this,"_adResponses",void 0),ae(this,"_currentAdRequestNumber",void 0),ae(this,"_currentAdResponseNumber",void 0),ae(this,"_prerollPlayTime",void 0),ae(this,"_wouldBeNewAdPlay",void 0),ae(this,"isAdBreak",void 0),ae(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){a.isAdBreak=!1,a._currentAdRequestNumber=0,a._currentAdResponseNumber=0,a._adRequests=[],a._adResponses=[],a._adHasPlayed=!1,a._wouldBeNewAdPlay=!0,a._prerollPlayTime=void 0})),Ve.forEach((function(e){return t.on(e,a._updateAdData.bind(a))}));var r=function(){a.isAdBreak=!1};t.on("adbreakstart",(function(){a.isAdBreak=!0})),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdRequestNumber++},r),Fe(a._adRequests,r),pe(t.data,"view_ad_request_count"),a.inPrerollPosition()&&(t.data.view_preroll_requested=!0,a._adHasPlayed||pe(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdResponseNumber++},r),Fe(a._adResponses,r);var i=a.findAdRequest(r.ad_request_id);i&&pe(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,r){a._adHasPlayed=!0,a._wouldBeNewAdPlay&&(a._wouldBeNewAdPlay=!1,pe(t.data,"view_ad_played_count")),a.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,a._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-a._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),a._prerollPlayTime=r.viewer_time)})),t.on("adplaying",(function(e,r){a.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==a._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-a._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-a._prerollPlayTime)})),t.on("adclicked",(function(e,r){a._wouldBeNewAdPlay||pe(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,r){a._wouldBeNewAdPlay||pe(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){a._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){a._wouldBeNewAdPlay=!0}))}return te(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var a=L(de(t.ad_tag_url),2),r=a[0],i=a[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var n=L(de(t.ad_asset_url),2),o=n[0],s=n[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),Ge=_(f()),Qe=function e(t){Z(this,e);var a,r,i=function(){t.disableRebufferTracking||a&&(pe(t.data,"view_waiting_rebuffer_duration",X.now()-a),a=!1,Ge.default.clearInterval(r))},n=!1,o=function(){n=!1,i()};t.on("waiting",(function(){n&&(t.disableRebufferTracking||(pe(t.data,"view_waiting_rebuffer_count",1),a=X.now(),r=Ge.default.setInterval((function(){if(a){var e=X.now();pe(t.data,"view_waiting_rebuffer_duration",e-a),a=e}}),250)))})),t.on("playing",(function(){i(),n=!0})),t.on("pause",o),t.on("seeking",o)},Je=function e(t){var a=this;Z(this,e),ae(this,"lastWallClockTime",void 0);var r=function(){a.lastWallClockTime=X.now(),t.on("before*",i)},i=function(e){var r=X.now(),i=a.lastWallClockTime;a.lastWallClockTime=r,r-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",r)}))},ze=_(f()),Ke=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t};function t(a){function r(t,i,n){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(n=e({path:"/"},r.defaults,n)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*n.expires),n.expires=s}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(e){}return i=a.write?a.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,l=0;l<u.length;l++){var c=u[l].split("="),p=c.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var h=c[0].replace(d,decodeURIComponent);if(p=a.read?a.read(p,h):a(p,h)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===h){o=p;break}t||(o[h]=p)}catch(e){}}return o}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,a){r(t,"",e(a,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}(),Ye="muxData",Xe=function(){var e;try{e=(Ke.get(Ye)||"").split("&").reduce((function(e,t){var a=L(t.split("="),2),r=a[0],i=a[1],n=+i,o=i&&n==i?n:i;return e[r]=o,e}),{})}catch(t){e={}}return e},$e=function(e){try{Ke.set(Ye,(t=e,Object.entries(t).map((function(e){var t=L(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join("&")),{expires:365})}catch(e){}var t},Ze=function(){var e=Xe();return e.mux_viewer_id=e.mux_viewer_id||C(),e.msn=e.msn||Math.random(),$e(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}};function et(e,t){var a=t.beaconCollectionDomain,r=t.beaconDomain;if(a)return"https://"+a;var i=r||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}var tt=_(f()),at=function(){var e;switch(rt()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},rt=function(){var e=tt.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};at.getConnectionFromAPI=rt;var it=at,nt=st({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),ot=st({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function st(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}function ut(e){var t={},a={};return Object.keys(e).forEach((function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var n=r.split("_"),o=n[0],s=nt[o];s||(J.info("Data key word `"+n[0]+"` not expected in "+r),s=o+"_"),n.splice(1).forEach((function(e){"url"===e&&(i=!0),ot[e]?s+=ot[e]:Number(e)&&Math.floor(Number(e))===Number(e)?s+=e:(J.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")})),i?a[s]=e[r]:t[s]=e[r]}})),Object.assign(t,a)}var dt=_(f()),lt={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},ct=["hb","requestcompleted","requestfailed","requestcanceled"],pt="https://img.litix.io",ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||pt,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},lt,t)};ht.prototype.queueEvent=function(e,t){var a=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(a),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},ht.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},ht.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),dt.default.clearTimeout(this._sendTimeout)},ht.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],ut({mux_view_message:"event queue truncated"}));var a=this._createPayload(t);ft(this._beaconUrl,a,!0,(function(){}))},ht.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var a=this._createPayload(t),r=X.now();ft(this._beaconUrl,a,!1,(function(a,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,J.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=X.now()-r,e._postInFlight=!1}))}},ht.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},ht.prototype._startBeaconSending=function(){var e=this;dt.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=dt.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},ht.prototype._createPayload=function(e){var t=this,a={transmission_timestamp:Math.round(X.now())};this._roundTripTime&&(a.rtt_ms=Math.round(this._roundTripTime));var r,i,n,o=function(){r=JSON.stringify({metadata:a,events:i||e}),n=r.length/1024},s=function(){return n<=t._options.maxPayloadKBSize};return o(),s()||(J.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),i=e.filter((function(e){return-1===ct.indexOf(e.e)})),o()),s()||(J.info("Payload size still too big ("+n+" kb). Cropping fields.."),i.forEach((function(e){for(var t in e){var a=e[t];"string"==typeof a&&a.length>51200&&(e[t]=a.substring(0,51200))}})),o()),r};var _t=function(e){return e.length<=57344},ft=function(e,t,a,r){if(a&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))r();else if(dt.default.fetch)dt.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:_t(t)}).then((function(e){return r(null,e.ok?null:"Error")})).catch((function(e){return r(null,e)}));else{if(dt.default.XMLHttpRequest){var i=new dt.default.XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return r(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}r()}},mt=ht,vt=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],yt=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],gt=["ad_id","ad_creative_id","ad_universal_id"],bt=["viewstart","error","ended","viewend"],wt=function(){function e(t,a){var r,i,n,o,s,u,d,l,c,p,h,_,f,m,v,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Z(this,e),ae(this,"mux",void 0),ae(this,"envKey",void 0),ae(this,"options",void 0),ae(this,"eventQueue",void 0),ae(this,"sampleRate",void 0),ae(this,"disableCookies",void 0),ae(this,"respectDoNotTrack",void 0),ae(this,"previousBeaconData",void 0),ae(this,"lastEventTime",void 0),ae(this,"rateLimited",void 0),ae(this,"pageLevelData",void 0),ae(this,"viewerData",void 0),this.mux=t,this.envKey=a,this.options=y,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new mt(et(this.envKey,this.options)),this.sampleRate=null!==(f=this.options.sampleRate)&&void 0!==f?f:1,this.disableCookies=null!==(m=this.options.disableCookies)&&void 0!==m&&m,this.respectDoNotTrack=null!==(v=this.options.respectDoNotTrack)&&void 0!==v&&v,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(r=this.options.platform)||void 0===r?void 0:r.name,viewer_application_version:null===(i=this.options.platform)||void 0===i?void 0:i.version,viewer_application_engine:null===(n=this.options.platform)||void 0===n?void 0:n.layout,viewer_device_name:null===(o=this.options.platform)||void 0===o?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:null===(s=this.options.platform)||void 0===s?void 0:s.manufacturer,viewer_os_family:null===(d=this.options.platform)||void 0===d||null===(u=d.os)||void 0===u?void 0:u.family,viewer_os_architecture:null===(c=this.options.platform)||void 0===c||null===(l=c.os)||void 0===l?void 0:l.architecture,viewer_os_version:null===(h=this.options.platform)||void 0===h||null===(p=h.os)||void 0===p?void 0:p.version,viewer_connection_type:it(),page_url:null===ze.default||void 0===ze.default||null===(_=ze.default.location)||void 0===_?void 0:_.href},this.viewerData=this.disableCookies?{}:Ze()}return te(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&K())return J.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return J.error("A data object was expected in send() but was not provided");var a=this.disableCookies?{}:function(){var e=Xe(),t=X.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=C(),e.sst=t),e.sex=t+15e5,$e(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),r=_e(he({},this.pageLevelData,t,a,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i,n=(null!==(i=r.mux_sample_number)&&void 0!==i?i:0)>=this.sampleRate,o=ut(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),n)return J.info("Not sending event due to sample rate restriction",e,r,o);if(this.envKey||J.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,o),!this.rateLimited)if(J.info("Sending event",e,r,o),this.rateLimited=!this.eventQueue.queueEvent(e,o),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):bt.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",o=ut(r),this.eventQueue.queueEvent(r.event,o),J.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var a=this,r={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=he({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var n=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=L(t,2),o=i[0],s=i[1];a.previousBeaconData&&(s!==a.previousBeaconData[o]||vt.indexOf(o)>-1||a.objectHasChanged(n,o,s,a.previousBeaconData[o])||a.eventRequiresKey(e,o))&&(r[o]=s,a.previousBeaconData[o]=s)}))}return r}},{key:"objectHasChanged",value:function(e,t,a,r){return!(!e||0!==t.indexOf("request_"))&&("request_response_headers"===t||"object"!=typeof a||"object"!=typeof r||Object.keys(a||{}).length!==Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||gt.includes(t)&&yt.includes(e))}}]),e}(),Tt=function e(t){Z(this,e);var a=0,r=0,i=0,n=0,o=0,s=0,u=0;t.on("requestcompleted",(function(e,s){var u,d,l=s.request_start,c=s.request_response_start,p=s.request_response_end,h=s.request_bytes_loaded;if(n++,c?(u=c-(null!=l?l:0),d=(null!=p?p:0)-c):d=(null!=p?p:0)-(null!=l?l:0),d>0&&h&&h>0){var _=h/d*8e3;o++,r+=h,i+=d,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,_),t.data.view_average_request_throughput=r/i*8e3,t.data.view_request_count=n,u>0&&(a+=u,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,u),t.data.view_average_request_latency=a/o)}})),t.on("requestfailed",(function(e,a){n++,s++,t.data.view_request_count=n,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,a){n++,u++,t.data.view_request_count=n,t.data.view_request_canceled_count=u}))},xt=function e(t){var a=this;Z(this,e),ae(this,"_lastEventTime",void 0),t.on("before*",(function(e,r){var i=r.viewer_time,n=X.now(),o=a._lastEventTime;if(a._lastEventTime=n,o&&n-o>36e5){var s=Object.keys(t.data).reduce((function(e,a){return 0===a.indexOf("video_")?Object.assign(e,ae({},a,t.data[a])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var u=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing=u,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))},kt=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],Et=new Set(["requestcompleted","requestfailed","requestcanceled"]),Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(a,e);var t=se(a);function a(e,r,i){var n;Z(this,a),ae($(n=t.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),ae($(n),"NAVIGATION_START",void 0),ae($(n),"_destroyed",void 0),ae($(n),"_heartBeatTimeout",void 0),ae($(n),"adTracker",void 0),ae($(n),"dashjs",void 0),ae($(n),"data",void 0),ae($(n),"disablePlayheadRebufferTracking",void 0),ae($(n),"disableRebufferTracking",void 0),ae($(n),"errorTracker",void 0),ae($(n),"errorTranslator",void 0),ae($(n),"emitTranslator",void 0),ae($(n),"getAdData",void 0),ae($(n),"getPlayheadTime",void 0),ae($(n),"getStateData",void 0),ae($(n),"stateDataTranslator",void 0),ae($(n),"hlsjs",void 0),ae($(n),"id",void 0),ae($(n),"longResumeTracker",void 0),ae($(n),"minimumRebufferDuration",void 0),ae($(n),"mux",void 0),ae($(n),"playbackEventDispatcher",void 0),ae($(n),"playbackHeartbeat",void 0),ae($(n),"playbackHeartbeatTime",void 0),ae($(n),"playheadTime",void 0),ae($(n),"seekingTracker",void 0),ae($(n),"sustainedRebufferThreshold",void 0),ae($(n),"watchTimeTracker",void 0),ae($(n),"currentFragmentPDT",void 0),ae($(n),"currentFragmentStart",void 0),n.DOM_CONTENT_LOADED_EVENT_END=ce.domContentLoadedEventEnd(),n.NAVIGATION_START=ce.navigationStart();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e},emitTranslator:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t},stateDataTranslator:function(e){return e}};n.mux=e,n.id=r,null!=i&&i.beaconDomain&&n.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(i=Object.assign(o,i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),J.level=i.debug?V:G,n.getPlayheadTime=i.getPlayheadTime,n.getStateData=i.getStateData||function(){return{}},n.getAdData=i.getAdData||function(){},n.minimumRebufferDuration=i.minimumRebufferDuration,n.sustainedRebufferThreshold=i.sustainedRebufferThreshold,n.playbackHeartbeatTime=i.playbackHeartbeatTime,n.disableRebufferTracking=i.disableRebufferTracking,n.disableRebufferTracking&&n.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),n.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,n.errorTranslator=i.errorTranslator,n.emitTranslator=i.emitTranslator,n.stateDataTranslator=i.stateDataTranslator,n.playbackEventDispatcher=new wt(e,i.data.env_key,i),n.data={player_instance_id:C(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain||i.beaconDomain},n.data.view_sequence_number=1,n.data.player_sequence_number=1;var s=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind($(n));if(n.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)})),n.on("videochange",(function(e,t){this._resetView(t)})),n.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),n.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),n.on("destroy",n.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var u=function(){var e=void 0!==n.data.view_start;n.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&n.mux.WINDOW_HIDDEN&&(n.data.player_is_paused||n.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var d=function(e){e.persisted||n.destroy()};window.addEventListener("pagehide",d,!1),n.on("destroy",(function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",d)}))}n.on("playerready",(function(e,t){Object.assign(this.data,t)})),kt.forEach((function(e){n.on(e,(function(t,a){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,a),this._sanitizeData()})),n.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),n.on("viewend",(function(e,t){Object.assign(n.data,t)}));return n.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),n.longResumeTracker=new xt($(n)),n.errorTracker=new Pe($(n)),new Je($(n)),n.seekingTracker=new Ue($(n)),n.playheadTime=new Ie($(n)),n.playbackHeartbeat=new Oe($(n)),new Be($(n)),n.watchTimeTracker=new Re($(n)),new Ne($(n)),n.adTracker=new We($(n)),new He($(n)),new je($(n)),new Me($(n)),new Qe($(n)),new Tt($(n)),i.hlsjs&&n.addHLSJS(i),i.dashjs&&n.addDashJS(i),n.emit("viewinit",i.data),n}return te(a,[{key:"emit",value:function(e,t){var r,i=Object.assign({viewer_time:this.mux.utils.now()},t),n=[e,i];if(this.emitTranslator)try{n=this.emitTranslator(e,i)}catch(e){this.mux.log.warn("Exception in emit translator callback.",e)}null!=n&&n.length&&(r=ie(re(a.prototype),"emit",this)).call.apply(r,[this].concat(U(n)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var a=L(de(t.video_source_url),2),r=a[0],i=a[1];t.video_source_domain=i,t.video_source_hostname=r}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,Et.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){var e=this.getStateData();if("function"==typeof this.stateDataTranslator)try{e=this.stateDataTranslator(e)}catch(e){this.mux.log.warn("Exception in stateDataTranslator translator callback.",e)}Object.assign(this.data,e),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var a=parseInt(e.data[t],10);e.data[t]=isNaN(a)?void 0:a}));["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var a=e.data[t].toLowerCase();(0===a.indexOf("data:")||0===a.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=C(),a=function(){t===e.data.view_id&&pe(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",a):a()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,a){var r=arguments.length>4?arguments[4]:void 0,i=e.log,n=e.utils.secondsToMs,o=function(e){var t,a=parseInt(r.version);return 1===a&&null!==e.programDateTime&&(t=e.programDateTime),0===a&&null!==e.pdt&&(t=e.pdt),t};if(ce.exists()){var s=function(a,r){return e.emit(t,a,r)},u=function(e,t){var a=t.levels,r=t.audioTracks,i=t.url,n=t.stats,o=t.networkDetails,u=t.sessionData,d={},l={};a.forEach((function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),r.forEach((function(e,t){l[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var c=be(n),p=c.bytesLoaded,h=c.requestStart,_=c.responseStart,f=c.responseEnd;s("requestcompleted",_e(he({},ge(u)),{request_event_type:e,request_bytes_loaded:p,request_start:h,request_response_start:_,request_response_end:f,request_type:"manifest",request_hostname:ue(i),request_response_headers:we(o),request_rendition_lists:{media:d,audio:l,video:{}}}))};a.on(r.Events.MANIFEST_LOADED,u);var d=function(e,t){var a=t.details,r=t.level,i=t.networkDetails,u=t.stats,d=be(u),l=d.bytesLoaded,c=d.requestStart,p=d.responseStart,h=d.responseEnd,_=a.fragments[a.fragments.length-1],f=o(_)+n(_.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:p,request_response_end:h,request_current_level:r,request_type:"manifest",request_hostname:ue(a.url),request_response_headers:we(i),video_holdback:a.holdBack&&n(a.holdBack),video_part_holdback:a.partHoldBack&&n(a.partHoldBack),video_part_target_duration:a.partTarget&&n(a.partTarget),video_target_duration:a.targetduration&&n(a.targetduration),video_source_is_live:a.live,player_manifest_newest_program_time:isNaN(f)?void 0:f})};a.on(r.Events.LEVEL_LOADED,d);var l=function(e,t){var a=t.details,r=t.networkDetails,i=t.stats,n=be(i),o=n.bytesLoaded,u=n.requestStart,d=n.responseStart,l=n.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:u,request_response_start:d,request_response_end:l,request_type:"manifest",request_hostname:ue(a.url),request_response_headers:we(r)})};a.on(r.Events.AUDIO_TRACK_LOADED,l);var c=function(e,t){var r=t.stats,i=t.networkDetails,n=t.frag;r=r||n.stats;var o=be(r),u=o.bytesLoaded,d=o.requestStart,l=o.responseStart,c=o.responseEnd,p=i?we(i):void 0,h={request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:l,request_response_end:c,request_hostname:i?ue(i.responseURL):void 0,request_id:p?ye(p):void 0,request_response_headers:p,request_media_duration:n.duration,request_url:null==i?void 0:i.responseURL};"main"===n.type?(h.request_type="media",h.request_current_level=n.level,h.request_video_width=(a.levels[n.level]||{}).width,h.request_video_height=(a.levels[n.level]||{}).height,h.request_labeled_bitrate=(a.levels[n.level]||{}).bitrate):h.request_type=n.type,s("requestcompleted",h)};a.on(r.Events.FRAG_LOADED,c);var p=function(e,t){var a=t.frag,r=a.start,i={currentFragmentPDT:o(a),currentFragmentStart:n(r)};s("fragmentchange",i)};a.on(r.Events.FRAG_CHANGED,p);var h=function(e,t){var a=t.type,i=t.details,n=t.response,o=t.fatal,u=t.frag,d=t.networkDetails,l=(null==u?void 0:u.url)||t.url||"",c=d?we(d):void 0;if((i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:l,request_hostname:ue(l),request_id:c?ye(c):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==n?void 0:n.code,request_error_text:null==n?void 0:n.text}),o){var p,h="".concat(l?"url: ".concat(l,"\n"):"")+"".concat(n&&(n.code||n.text)?"response: ".concat(n.code,", ").concat(n.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(p=t.err)||void 0===p?void 0:p.message,"\n"):"");s("error",{player_error_code:a,player_error_message:i,player_error_context:h})}};a.on(r.Events.ERROR,h);var _=function(e,t){var a=t.frag,r=a&&a._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:ue(r)})};a.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,_);var f=function(e,t){var r=t.level,n=a.levels[r];if(n&&n.attrs&&n.attrs.BANDWIDTH){var o,u=n.attrs.BANDWIDTH,d=parseFloat(n.attrs["FRAME-RATE"]);isNaN(d)||(o=d),u?s("renditionchange",{video_source_fps:o,video_source_bitrate:u,video_source_width:n.width,video_source_height:n.height,video_source_rendition_name:n.name,video_source_codec:null==n?void 0:n.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};a.on(r.Events.LEVEL_SWITCHED,f),a._stopMuxMonitor=function(){a.off(r.Events.MANIFEST_LOADED,u),a.off(r.Events.LEVEL_LOADED,d),a.off(r.Events.AUDIO_TRACK_LOADED,l),a.off(r.Events.FRAG_LOADED,c),a.off(r.Events.FRAG_CHANGED,p),a.off(r.Events.ERROR,h),a.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,_),a.off(r.Events.LEVEL_SWITCHED,f),a.off(r.Events.DESTROYING,a._stopMuxMonitor),delete a._stopMuxMonitor},a.on(r.Events.DESTROYING,a._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,a){var r=e.log;if(a&&a.on){var i=Ee(a),n=function(a,r){return e.emit(t,a,r)},o=function(e){var t=e.type,a=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:ue(a),request_url:a})};a.on("manifestLoaded",o);var s={},u=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},d=function(e){var t=e.type,a=e.fragmentModel,r=e.chunk,i=u(a);l({type:t,request:i,chunk:r})},l=function(e){var t=e.type,r=e.chunk,i=e.request,o=(r||{}).mediaInfo||{},u=o.type,d=o.bitrateList,l={};(d=d||[]).forEach((function(e,t){l[t]={},l[t].width=e.width,l[t].height=e.height,l[t].bitrate=e.bandwidth,l[t].attrs={}})),"video"===u?s.video=l:"audio"===u?s.audio=l:s.media=l;var c=Te(i,a),p=c.requestStart,h=c.requestResponseStart,_=c.requestResponseEnd,f=c.requestResponseHeaders,m=c.requestMediaDuration,v=c.requestHostname,y=c.requestUrl,g=c.requestId;n("requestcompleted",{request_event_type:t,request_start:p,request_response_start:h,request_response_end:_,request_bytes_loaded:-1,request_type:u+"_init",request_response_headers:f,request_hostname:v,request_id:g,request_url:y,request_media_duration:m,request_rendition_lists:s})};i>=4?a.on("initFragmentLoaded",l):a.on("initFragmentLoaded",d);var c=function(e){var t=e.type,a=e.fragmentModel,r=e.chunk,i=u(a);p({type:t,request:i,chunk:r})},p=function(e){var t=e.type,r=e.chunk,i=e.request,o=r||{},s=o.mediaInfo,u=o.start,d=(s||{}).type,l=Te(i,a),c=l.requestStart,p=l.requestResponseStart,h=l.requestResponseEnd,_=l.requestBytesLoaded,f=l.requestResponseHeaders,m=l.requestMediaDuration,v=l.requestHostname,y=l.requestUrl,g=l.requestId,b=xe(d,a),w=b.currentLevel,T=b.renditionWidth,x=b.renditionHeight,k=b.renditionBitrate;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:p,request_response_end:h,request_bytes_loaded:_,request_type:d,request_response_headers:f,request_hostname:v,request_id:g,request_url:y,request_media_start_time:u,request_media_duration:m,request_current_level:w,request_labeled_bitrate:k,request_video_width:T,request_video_height:x})};i>=4?a.on("mediaFragmentLoaded",p):a.on("mediaFragmentLoaded",c);var h={video:void 0,audio:void 0,totalBitrate:void 0},_=function(){if(h.video&&"number"==typeof h.video.bitrate){if(!h.video.width||!h.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=h.video.bitrate;if(h.audio&&"number"==typeof h.audio.bitrate&&(e+=h.audio.bitrate),e!==h.totalBitrate)return h.totalBitrate=e,{video_source_bitrate:e,video_source_height:h.video.height,video_source_width:h.video.width,video_source_codec:ke(h.video.codec)}}},f=function(e,t,i){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=a.getBitrateInfoListFor(o).find((function(t){return t.qualityIndex===e.newQuality}));if(!s||"number"!=typeof s.bitrate)return void r.warn("missing bitrate info for ".concat(o));h[o]=_e(he({},s),{codec:a.getCurrentTrackFor(o).codec});var u=_();u&&n("renditionchange",u)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};a.on("qualityChangeRendered",f);var m=function(e){var t=e.request,a=e.mediaType;n("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:a,request_hostname:ue(t.url)})};a.on("fragmentLoadingAbandoned",m);var v=function(e){var t,a,r=e.error,i=(null==r||null===(t=r.data)||void 0===t?void 0:t.request)||{},o=(null==r||null===(a=r.data)||void 0===a?void 0:a.response)||{};27===(null==r?void 0:r.code)&&n("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:ue(i.url),request_type:i.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");n("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};a.on("error",v),a._stopMuxMonitor=function(){a.off("manifestLoaded",o),a.off("initFragmentLoaded",l),a.off("mediaFragmentLoaded",p),a.off("qualityChangeRendered",f),a.off("error",v),a.off("fragmentLoadingAbandoned",m),delete a._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),a}(Ae),qt=Dt,At=_(R());var St=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],Ot={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};var Pt,Rt=_(f());Rt.default&&Rt.default.WeakMap&&(Pt=new WeakMap);var Nt="#EXT-X-TARGETDURATION",It="#EXT-X-PART-INF",Lt="#EXT-X-SERVER-CONTROL",jt="#EXTINF",Ct="#EXT-X-PROGRAM-DATE-TIME",Ht="#EXT-X-VERSION",Mt="#EXT-X-SESSION-DATA",Bt=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};Bt.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},Bt.prototype.processLine=function(e){var t=e.indexOf(":"),a=Jt(e,t),r=a[0],i=2===a.length?Vt(a[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case Nt:if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case It:Ut(this.manifest,a),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case Lt:Ut(this.manifest,a),this.setHoldBack();break;case jt:0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case Ct:var n=i,o=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=o;break;case Ht:Ut(this.manifest,a);break;case Mt:var s=zt(a[1]),u=ge(s);Object.assign(this.manifest.sessionData,u)}},Bt.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,a=e.targetDuration,r=e.partTargetDuration;if(t){var i="holdBack",n="partHoldBack",o=a&&3*a,s=r&&2*r;a&&!t.hasOwnProperty(i)&&(t[i]=o),o&&t[i]<o&&(t[i]=o),r&&!t.hasOwnProperty(n)&&(t[n]=3*r),r&&t[n]<s&&(t[n]=s)}};var Ut=function(e,t){var a,r=Ft(t[0].replace("#EXT-X-",""));Qt(t[1])?(a={},a=Object.assign(Gt(t[1]),a)):a=Vt(t[1]),e[r]=a},Ft=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},Vt=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},Wt=function(e){var t={},a=e.split("=");a.length>1&&(t[Ft(a[0])]=Vt(a[1]));return t},Gt=function(e){for(var t=e.split(","),a={},r=0;t.length>r;r++){var i=t[r],n=Wt(i);a=Object.assign(n,a)}return a},Qt=function(e){return e.indexOf("=")>-1},Jt=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},zt=function(e){var t={};if(e){var a=e.search(",");return[e.slice(0,a),e.slice(a+1)].forEach((function(e,a){for(var r=e.replace(/['"]+/g,"").split("="),i=0;i<r.length;i++)"DATA-ID"===r[i]&&(t["DATA-ID"]=r[1-i]),"VALUE"===r[i]&&(t.VALUE=r[1-i])})),{data:t}}},Kt=Bt,Yt={safeCall:function(e,t,a,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,a)}catch(e){J.info("safeCall error",e)}return i},safeIncrement:pe,getComputedStyle:function(e,t){return e&&t&&Rt.default&&"function"==typeof Rt.default.getComputedStyle?(Pt&&Pt.has(e)&&(a=Pt.get(e)),a||(a=Rt.default.getComputedStyle(e,null),Pt&&Pt.set(e,a)),a.getPropertyValue(t)):"";var a},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:ve,cdnHeadersToRequestId:ye,extractHostnameAndDomain:de,extractHostname:ue,manifestParser:Kt,generateShortID:H,generateUUID:C,now:X.now,findMediaElement:B},Xt={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},$t={},Zt=function(e){var t=arguments;"string"==typeof e?Zt.hasOwnProperty(e)?j.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),Zt[e].apply(null,t)}),0):J.warn("`"+e+"` is an unknown task"):"function"==typeof e?j.default.setTimeout((function(){e(Zt)}),0):J.warn("`"+e+"` is invalid.")},ea={loaded:X.now(),NAME:"mux-embed",VERSION:"5.4.3",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,a){var r=L(B(t),3),i=r[0],n=r[1],o=r[2],s=e.log,u=e.utils.getComputedStyle,d=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+n+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+n+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners"));var l={getPlayheadTime:function(){return d(i.currentTime)},getStateData:function(){var e,t,a=(null===(e=this.getPlayheadTime)||void 0===e?void 0:e.call(this))||d(i.currentTime),r=this.hlsjs&&this.hlsjs.url,n=this.dashjs&&"function"==typeof this.dashjs.getSource&&this.dashjs.getSource(),o={player_is_paused:i.paused,player_width:parseInt(u(i,"width")),player_height:parseInt(u(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:At.default&&!!(At.default.fullscreenElement||At.default.webkitFullscreenElement||At.default.mozFullScreenElement||At.default.msFullscreenElement),video_poster_url:i.poster,video_source_url:r||n||i.currentSrc,video_source_duration:d(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null==i||null===(t=i.getVideoPlaybackQuality)||void 0===t?void 0:t.call(i).droppedVideoFrames};if(i.getStartDate&&a>0){var s=i.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var l=s.getTime();if(o.player_program_time=l+a,i.seekable.length>0){var c=l+i.seekable.end(i.seekable.length-1);o.player_live_edge_program_time=c}}}return o}};(a=Object.assign({automaticErrorTracking:!0},a,l)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},a.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,a){e.emit(n,t,a)},i.mux.updateData=function(e){i.mux.emit("hb",e)};var c=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.destroy=c,i.mux.swapElement=c,i.mux.emit=c,i.mux.addHLSJS=c,i.mux.addDashJS=c,i.mux.removeHLSJS=c,i.mux.removeDashJS=c,i.mux.updateData=c,i.mux.setEmitTranslator=c,i.mux.setStateDataTranslator=c,i.mux.setGetPlayheadTime=c,i.mux.deleted=!0,e.emit(n,"destroy")},i.mux.swapElement=function(t){var a=L(B(t),3),r=a[0],n=a[1],o=a[2];return r?"video"!==o&&"audio"!==o?e.log.error("The element of `"+n+"` was not a media element."):(r.muxId=i.muxId,delete i.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(r.mux.listeners).forEach((function(e){i.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)})),r.mux.swapElement=i.mux.swapElement,r.mux.destroy=i.mux.destroy,delete i.mux,void(i=r)):e.log.error("No element was found with the `"+n+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(n,t)},i.mux.addDashJS=function(t){e.addDashJS(n,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(n)},i.mux.removeDashJS=function(){e.removeDashJS(n)},i.mux.setEmitTranslator=function(t){e.setEmitTranslator(n,t)},i.mux.setStateDataTranslator=function(t){e.setStateDataTranslator(n,t)},i.mux.setGetPlayheadTime=function(t){t||(t=a.getPlayheadTime),e.setGetPlayheadTime(n,t)},e.init(n,a),e.emit(n,"playerready"),i.paused||(e.emit(n,"play"),i.readyState>2&&e.emit(n,"playing")),i.mux.listeners={},St.forEach((function(t){"error"===t&&!a.automaticErrorTracking||(i.mux.listeners[t]=function(){var a={};if("error"===t){if(!i.error||1===i.error.code)return;a.player_error_code=i.error.code,a.player_error_message=Ot[i.error.code]||i.error.message}e.emit(n,t,a)},i.addEventListener(t,i.mux.listeners[t],!1))}))}(Zt,e,t)},destroyMonitor:function(e){var t=L(B(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():J.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var a=M(e);$t[a]?$t[a].addHLSJS(t):J.error("A monitor for `"+a+"` has not been initialized.")},addDashJS:function(e,t){var a=M(e);$t[a]?$t[a].addDashJS(t):J.error("A monitor for `"+a+"` has not been initialized.")},removeHLSJS:function(e){var t=M(e);$t[t]?$t[t].removeHLSJS():J.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=M(e);$t[t]?$t[t].removeDashJS():J.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){K()&&t&&t.respectDoNotTrack&&J.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var a=M(e);$t[a]=new qt(Zt,a,t)},emit:function(e,t,a){var r=M(e);$t[r]?($t[r].emit(t,a),"destroy"===t&&delete $t[r]):J.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var a=M(e);$t[a]?$t[a].emit("hb",t):J.error("A monitor for `"+a+"` has not been initialized.")},setEmitTranslator:function(e,t){var a=M(e);$t[a]?$t[a].emitTranslator=t:J.error("A monitor for `"+a+"` has not been initialized.")},setStateDataTranslator:function(e,t){var a=M(e);$t[a]?$t[a].stateDataTranslator=t:J.error("A monitor for `"+a+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var a=M(e);$t[a]?$t[a].getPlayheadTime=t:J.error("A monitor for `"+a+"` has not been initialized.")},checkDoNotTrack:K,log:J,utils:Yt,events:Xt,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Zt,ea),void 0!==j.default&&"function"==typeof j.default.addEventListener&&j.default.addEventListener("pagehide",(function(e){e.persisted||(Zt.WINDOW_UNLOADING=!0)}),!1);var ta=Zt;
/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/var aa=ta.utils.secondsToMs;function ra(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return{}},n=!1;e.on("adstart",(function(){n=!0})),e.on("adend",(function(){n=!1})),e.on("adserror",(function(){n=!1}));var o=function(){var r=aa(t.currentTime()),o=function a(){var o=ta.utils.now(),s=aa(t.currentTime());if(n){if(s>r){var u=i();u.viewer_time=o-Math.max(0,s-r),t.off("timeupdate",a),e.mux.emit("adplaying",u)}}else t.off("timeupdate",a)};t.on("timeupdate",o);var s=function e(){t.off("timeupdate",o),a.forEach((function(a){t.off(a,e)}))};a.forEach((function(e){t.on(e,s)}))};r.forEach((function(e){t.on(e,o)}))}function ia(e){if("string"!=typeof e)return!1;var t=e.split(".").map((function(e){return parseInt(e)})),a=t[0],r=t[1];return a>2||2===a&&r>=3}var na=ta.utils.manifestParser;function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return sa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var ua=ta.utils,da=ua.assign,la=ua.secondsToMs;function ca(e,t,a){var r=0;return function(){var i,n=t.readyState;if(n>=2){if(r=r||ta.utils.now(),4!==n)return;var o=e(),s=o.mux.utils.extractHostnameAndDomain,u=o.mux.utils.headersStringToObject,d=ta.utils.now(),l=oa(s(t.responseURL),1)[0],c="arraybuffer"===t.responseType?t.response.byteLength:t.responseText.length,p=u(t.getAllResponseHeaders?t.getAllResponseHeaders():""),h=function(e){var t=e["content-type"];return t?t.match(/^audio\/mpegurl/i)?"manifest":t.match(/^audio.*/i)?"audio":t.match(/^video.*/)?"video":t.match(/^application\/x-mpegurl/i)||t.match(/^application\/vnd.apple.mpegurl/i)||t.match(/^application\/dash+xml/i)?"manifest":"unknown":"unknown"}(p);if(t.status>=200&&t.status<300){var _={request_start:a,request_response_start:r,request_response_end:d,request_bytes_loaded:c,request_hostname:l,request_url:t.responseURL,request_response_headers:p,request_type:h};if("manifest"===h){var f,m,v,y,g,b,w,T=(i=t.responseText,new na(i));if(T){f=T.partTargetDuration,m=T.targetDuration,v=T.segments;var x=T.serverControl;y=x.partHoldBack,g=x.holdBack,w=T.sessionData;var k=v[v.length-1];k&&k.dateTimeObject&&(b=k.dateTimeObject.getTime()+la(k.duration)),_=da(_,{video_holdback:g&&la(g),video_part_holdback:y&&la(y),video_part_target_duration:f&&la(f),video_target_duration:m&&la(m),player_manifest_newest_program_time:b}),w&&(_=da(_,w))}}o.mux.emit("requestcompleted",_)}else{var E={request_hostname:oa(s(t.responseURL),1)[0],request_url:t.responseURL,request_type:h};o.mux.emit("requestfailed",E)}}}}function pa(e,t){var a,r=function(t){return function(a){var r=ta.utils.now();try{t(a)}catch(e){}try{a.onreadystatechange=function(t,a,r){var i=ca(e,t,a);return function(){try{i()}catch(e){}try{r()}catch(e){}}}(a,r,a.onreadystatechange||function(){})}catch(e){}}};"function"==typeof(null==t?void 0:t.onRequest)?t.onRequest((function(e){return e.beforeSend=r(e.beforeSend||function(){}),e})):t.beforeRequest=(a=t.beforeRequest||function(e){return e},function(e){var t=a(e);return t?(t.beforeSend=r(t.beforeSend||function(){}),t):e})}var ha=function(e){var t,a=function(e){for(var t,a=e.textTracks(),r=0;r<a.length;r++)"segment-metadata"===a[r].label&&(t=a[r]);return t}(e);a&&a.on&&a.on("cuechange",(function(){try{var a=e.tech({IWillNotUseThisInPlugins:!0}),r=(a.vhs||a.hls).playlists.media().attributes.BANDWIDTH;t!==r&&e.mux.emit("renditionchange",{video_source_bitrate:r}),t=r}catch(t){e.mux&&e.mux.log&&e.mux.log.warn&&e.mux.log.warn("Cannot retrieve BANDWIDTH information from player: ".concat(t))}}))};function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return fa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var ma=new Map;var va,ya=ta.log,ga=ta.utils.assign,ba=ta.utils.safeCall,wa=ta.utils.getComputedStyle,Ta=ta.utils.secondsToMs,xa=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"];function ka(e){var a=e;return function(e){var r,i;if(a.IS_IE8)return!1;var n=this,o=n.id(),s=(null===(r=n.tech)||void 0===r||null===(i=r.call(n,!0))||void 0===i?void 0:i.el())||n.tag,u=va&&(va.get(s)||va.get(n.el()));(e=ga({automaticErrorTracking:!0},e)).data=ga({player_software_name:"Video.js",player_software_version:a.VERSION||"< 4.11",player_mux_plugin_name:"videojs-mux",player_mux_plugin_version:"4.20.3",player_init_time:u},e.data),e.getPlayheadTime=function(){return Ta(n.currentTime())},e.getStateData=function(){var e=ba(n,"videoHeight"),t=ba(n,"videoWidth");if(void 0===t||void 0===e){var a=n.el().firstChild;a&&"VIDEO"===a.nodeName.toUpperCase()&&(e=a.videoHeight,t=a.videoWidth)}return{player_is_paused:ba(n,"paused"),player_is_fullscreen:ba(n,"isFullscreen"),player_autoplay_on:!!ba(n,"autoplay"),player_preload_on:ba(n,"preload"),player_width:parseInt(wa(n.el(),"width"),10),player_height:parseInt(wa(n.el(),"height"),10),player_language_code:ba(n,"language"),video_poster_url:ba(n,"poster"),video_source_url:ba(n,"currentSrc"),video_source_mime_type:ba(n,"currentType")&&ba(n,"currentType").toLowerCase(),video_source_duration:Ta(ba(n,"duration")||0),video_source_is_live:n.duration()===1/0,video_source_height:e,video_source_width:t}},n.mux=function(){ya.error("[videojs-mux] The plugin was initialized more than once.")},n.mux.emit=function(e,t){ta.emit(o,e,t)},n.mux.updateData=function(e){n.mux.emit("hb",e)},n.mux.addHLSJS=function(e){ta.addHLSJS(o,e)},n.mux.log=ya,n.mux.utils=ta.utils,ta.init(o,e);var d=!1,l=function(){d||n.mux.emit("playerready"),d=!0};n.ready((function(){n.addClass("vjs-mux"),t().setTimeout(l,0)}));var c=!1;n.one("play",l),xa.forEach((function(t){("error"!==t||e.automaticErrorTracking)&&n.on(t,(function(){if(!c){var e={};if("error"===t){var a=ba(n,"error");if(a){if(1===a.code)return;e={player_error_code:a.code,player_error_message:a.message,player_error_context:a.status}}}n.mux.emit(t,e)}}))}));var p=!1;n.on("play",(function(){p=!0})),n.on("pause",(function(){p=!1})),n.on("adstart",(function(){c=!0,p&&n.mux.emit("pause"),n.mux.emit("adbreakstart")})),n.on("adend",(function(){n.mux.emit("adbreakend"),c=!1,ba(n,"paused")||(n.mux.emit("play"),p=!0,n.onceux&&n.mux.emit("playing"))})),n.ima&&function(e){var t,a,r,i,n,o,s=function(t){var a="function"==typeof(t=t||{}).getAdData?t.getAdData():{},r="function"==typeof t.getAd?t.getAd():{},i="function"==typeof r.getMediaUrl?r.getMediaUrl():a.mediaUrl,n=null==a?void 0:a.adId,o=null==a?void 0:a.creativeId,s=null==a?void 0:a.universalAdIdValue,u=e.ima.settings||{},d={};return i&&(d.ad_asset_url=i),u.adTagUrl&&(d.ad_tag_url=u.adTagUrl),n&&(d.ad_id=n),o&&(d.ad_creative_id=o),s&&(d.ad_universal_id=s),d};try{var u=window.google.ima.AdEvent.Type;t=u.LOADED,a=u.STARTED,r=u.COMPLETE,i=u.PAUSED,n=u.RESUMED,o=u.SKIPPED}catch(e){t="loaded",a="start",r="complete",i="pause",n="resume",o="skip"}var d=0;e.mux.triggerAdRequest=function(){d++,e.mux.emit("adrequest",s())},e.on("adsready",(function(){var u=e.ima.addEventListener||function(){};u(t,(function(t){var a=s(t);d>0&&(d--,e.mux.emit("adresponse",a)),e.mux.emit("adplay",a)})),u(a,(function(t){var a=s(t);e.mux.emit("adplaying",a)})),u(n,(function(t){var a=s(t);e.mux.emit("adplay",a),e.mux.emit("adplaying",a)})),u(i,(function(t){var a=s(t);e.mux.emit("adpause",a)})),u(r,(function(t){var a=s(t);e.mux.emit("adended",a)})),u(o,(function(t){var a=s(t);e.mux.emit("adended",a)})),e.on("adserror",(function(){d>0&&(d--,e.mux.emit("adresponse")),e.mux.emit("aderror")}))}))}(n),n.onceux&&function(e){ra(e,e,["onceux-linearad-pause","onceux-linearad-skipped","onceux-linearad-complete","adserror"],["adstart","onceux-linearad-resume"]),e.on("adstart",(function(){e.mux.emit("adplay")})),e.on("onceux-linearad-start",(function(t){t.linearAd&&t.linearAd.index>0&&(e.mux.emit("adplay"),e.mux.emit("adplaying"))})),e.on("onceux-linearad-resume",(function(){e.mux.emit("adplay")})),e.on("onceux-linearad-pause",(function(){e.mux.emit("adpause")})),e.on("onceux-linearad-complete",(function(){e.mux.emit("adended")})),e.on("onceux-linearad-skipped",(function(){e.mux.emit("adended")}))}(n),n.ima3&&"function"==typeof n.ima3.ready&&function(e){var t=function(){var t=e.ima3.currentAd,a=e.ima3.settings,r={};return t&&(r.ad_asset_url=t.mediaUrl),a&&(r.ad_tag_url=a.serverUrl),r};if(ia(e.ima3.version)){var a=0,r=function(){a>0&&(a--,e.mux.emit("adresponse",t()))};e.on("ads-request",(function(){a++,e.mux.emit("adrequest",t())})),e.on("ads-load",(function(){r(),e.mux.emit("adplay",t())})),e.on("adserror",(function(){r(),e.mux.emit("aderror")})),e.on("ads-play",(function(){e.mux.emit("adplay",t())})),e.on("ads-pause",(function(){e.mux.emit("adpause",t())})),e.on("ads-ad-ended",(function(){e.mux.emit("adended",t())}))}e.ima3.ready((function(){e.ima3.adPlayer?(ia(e.ima3.version)||(e.ima3.adPlayer.on("play",(function(){e.mux.emit("adplay")})),e.ima3.adPlayer.on("pause",(function(){e.mux.emit("adpause")})),e.ima3.adPlayer.on("ended",(function(){e.mux.emit("adended")}))),ra(e,e.ima3.adPlayer,["pause","ended","adserror"],["play"],t)):(e.mux.log("Legacy IMA3 plugin found, ad events may not track correctly."),e.on("ads-ad-started",(function(){e.mux.emit("adplaying",t())})),e.on("ads-play",(function(){e.mux.emit("adplaying",t())})))}))}(n),n.FreeWheelPlugin&&n.FreeWheelPlugin.VERSION&&function(e){var t=function(t){var a=e.FreeWheelPlugin,r={};switch(t){case"adplay":case"adplaying":case"adpause":r.ad_asset_url=e.currentSrc()}return a&&(r.ad_tag_url="html5"===a.tech.toLowerCase()?a.settings.Html5.serverUrl:a.settings.Flash.serverUrl),r};e.on("ads-request",(function(){e.mux.emit("adrequest",t("adrequest"))})),e.on("ads-load",(function(){e.mux.emit("adresponse",t("adresponse"))})),e.on("adserror",(function(){e.mux.emit("aderror")})),e.on("ads-ad-started",(function(){e.mux.emit("adplay",t("adplay")),e.mux.emit("adplaying",t("adplaying"))})),e.on("ads-play",(function(){e.mux.emit("adplay",t("adplay")),e.mux.emit("adplaying",t("adplaying"))})),e.on("ads-pause",(function(){e.mux.emit("adpause",t("adpause"))})),e.on("ads-ad-ended",(function(){e.mux.emit("adended",t("adended"))})),e.on("adend",(function(){e.mux.emit("play")}))}(n),n.on("dispose",(function(){n.mux.emit("destroy"),va.delete(n)}))}}function Ea(e){(e.registerPlugin||e.plugin||function(){ta.log.error("No valid method to register videojs plugin available.")})("mux",ka(e)),function(e){if(!ma.get(e)&&(ma.set(e,"video.js ".concat(e.VERSION," initialized")),"function"==typeof e.getTech))for(var t=(e.getTech("Html5")||{}).sourceHandlers,a=e.Vhs||e.Hls,r=function(r){var i=t[r],n=i.handleSource;i.handleSource=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a&&a.xhr&&pa((function(){return e(r.el())}),a.xhr);var o=n(t,r,i);if(o&&"function"==typeof o.xhr)try{var s=_a(e.VERSION.split("."),2),u=s[0],d=s[1];u=parseInt(u),d=parseInt(d);var l=u>=7&&d>=4?o.player().id():o.player_.el_.parentNode.id;ha(e(l))}catch(e){}return o}},i=0;i<t.length;i++)r(i)}(e)}va="undefined"!=typeof WeakMap?new WeakMap:new Map,n().hook&&n().hook("beforesetup",(function(e,t){return va.set(e,ta.utils.now()),t})),Ea(n())}(),i}()}))}();