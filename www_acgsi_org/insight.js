function getQueryParams(A){var C={};var H=A.split("?")[1];if(H){var G=H.split("&");for(var B=0;B<G.length;B++){var F=G[B].split("=");if(F.length===2){var D=decodeURIComponent(F[0]);var E=decodeURIComponent(F[1]);C[D]=E}}}return C}function openHelp(A){openNewWindow(A,"Help")}function openNewWindow(B,A){if(B&&A){window.open(B,A)}}var workspaceWindowHandle=null;function getWorkspaceWindow(B){if(!B){B=workspaceUrl}if(!workspaceWindowHandle||workspaceWindowHandle.closed){workspaceWindowHandle=window.open("","Workspace","resizable=yes,scrollbars=no,location=yes,status=no,toolbar=yes,menubar=no");var A=workspaceWindowHandle.location.href.indexOf(B);if(A<0){workspaceWindowHandle.location.href=B}}if(workspaceWindowHandle){setMainWindowToWorkspace(window)}return workspaceWindowHandle}function focusWorkspaceWindow(){getWorkspaceWindow().focus()}function openRecentlyCreatedPresentation(D,E){if((E!=true)&&(!workspaceWindowHandle||workspaceWindowHandle.closed)){var A=function(){openRecentlyCreatedPresentation(D,true)};messageUser("The presentation has been created, please click Ok to open it in the Workspace.",D,A)}else{var B=getWorkspaceWindow();if(B.workspaceInitialized==true){setTimeout(function(){focusWorkspaceWindow();B.requestFetchAddPresentationToWorkspace()},2000)}else{var C=D;setTimeout(function(){openRecentlyCreatedPresentation(C,true)},500)}}}function openPresentationInWorkspace(B,D){if(B){var A=getWorkspaceWindow();if(A&&A.workspaceInitialized===true){setTimeout(function(){focusWorkspaceWindow();A.slidesPanel.open();var F=A.slidesPanel.requestSlides(B);if(F===-1){console.log("Presentations select list not ready, size: "+A.slidesPanel.mPresentationsList.length);var I=A.slidesPanel;var H=B;setTimeout(function(){I.requestSlides(H)},3000)}if(D){var G=$(D);setTimeout(function(){ElementEffects.blinkColor(G,3,120)},1000)}},1000)}else{var E=B;var C=D;setTimeout(function(){openPresentationInWorkspace(E,C)},500)}}}function setMainWindowToWorkspace(A){if(workspaceWindowHandle){workspaceWindowHandle.mainLunaWindow=A}}function addImageToWorkspace(I,H,F,E){if(I){var A=null;var G=null;if(typeof F!="undefined"){A=F}else{if(typeof addImageToWorkspaceUrl!="undefined"){A=addImageToWorkspaceUrl}}A=jshAppendParameter(A,"mid",I,true);sMgid=jshGetAfterLastSlashFromUrl(window.location.href);if(jshIsNumeric(sMgid)){A=jshAppendParameter(A,"mgid",sMgid,true)}else{var K=window.location.href;var D=getQueryParams(K);if(D.qvq){var C=getQuickViewFieldValueMap(D.qvq);if(C.mgid){A=jshAppendParameter(A,"mgid",C.mgid,false)}}}var J={success:workspaceActionResponse,failure:actionResponse,argument:H,timeout:15000};var B=YAHOO.util.Connect.asyncRequest("POST",A,J,null);if(typeof E!="undefined"){G=E}else{if(typeof workspaceUrl!="undefined"){G=workspaceUrl}}getWorkspaceWindow(G)}}function addImageToDefaultGroup(A,B){if(A){var D=addImageToDefaultGroupUrl;D=jshAppendParameter(D,"mid",A,true);var C=false;var F={success:defaultGroupActionResponse,failure:actionResponse,argument:[B,C],timeout:60000};var E=YAHOO.util.Connect.asyncRequest("POST",D,F,null)}}function addBookPageToDefaultGroup(B,A,D,C){if(B){var E=addPageToDefaultGroupUrl;E=jshAppendParameter(E,"mid",B,true);E=jshAppendParameter(E,"pageId",A,true);var G={success:defaultPageGroupActionResponse,failure:actionResponse,argument:{parent:D,errMsgTarget:C},timeout:10000};var F=YAHOO.util.Connect.asyncRequest("POST",E,G,null)}}function addImageToGroup(A,F,E,B){if(A&&F){var D=null;if(typeof E!="undefined"){D=E}else{if(typeof addImageToGroupUrl!="undefined"){D=addImageToGroupUrl}}D=jshAppendParameter(D,"mid",A);D=jshAppendParameter(D,"mgid",F,true);var C=true;var H={success:defaultGroupActionResponse,failure:actionResponse,argument:[B,C],timeout:10000};var G=YAHOO.util.Connect.asyncRequest("POST",D,H,null)}}function addSearchResultToGroup(B,J,K,H,F,L,E,G,A){if(B){var C=addSearchResultToGroupUrl;C=jshAppendParameter(C,"mgid",B,true);C=jshAppendParameter(C,"q",K,true);C=jshAppendParameter(C,"os",F,true);C=jshAppendParameter(C,"pgs",L,true);if(H){C=jshAppendParameter(C,"sort",H,true)}if(A){C=jshAppendParameter(C,"defaultCollectionList",A,true)}if(E&&E.equal("checked")){C=jshAppendParameter(C,"fullTextSearch",E,true)}var I=jshGetPathFromUrl(window.location.href);C=jshAppendParameter(C,"searchUrl",I,true);var M={success:groupActionResponse,failure:actionResponse,argument:G,timeout:10000};var D=YAHOO.util.Connect.asyncRequest("POST",C,M,null)}else{alert(J)}}function changeDefaultGroup(B){if(B){var A=changeDefaultGroupUrl;A=jshAppendParameter(A,"mgid",B);var D={success:changeDefaultGroupActionResponse,failure:function(E){}};var C=YAHOO.util.Connect.asyncRequest("POST",A,D,null)}}function deleteGroup(B){if(B){var A=deleteGroupUrl;A=jshAppendParameter(A,"mgid",B);var D={success:deleteGroupActionResponse,failure:function(E){}};var C=YAHOO.util.Connect.asyncRequest("POST",A,D,null)}}function deletePresentation(A){if(A){var B=deletePresentationUrl;B=jshAppendParameter(B,"pid",A);var D={success:reloadWindow,failure:reloadWindow};var C=YAHOO.util.Connect.asyncRequest("POST",B,D,null)}}function reloadWindow(){window.location.reload()}function deleteFolder(C){if(C){var A=deleteFolderUrl;A=jshAppendParameter(A,"fid",C);var D={success:function(E){},failure:function(E){}};var B=YAHOO.util.Connect.asyncRequest("POST",A,D,null)}}function workspaceActionResponse(C){var A=workspaceWindowHandle;if(A&&A.requestAddedImages){A.requestAddedImages()}if(C){var B=C.argument;setTimeout(function(){ElementEffects.blinkOpacity(B,3,120)},500)}}function groupActionResponse(A){if(A){setTimeout(function(){var B=$(".addSearchResultToGroupButton");B.each(function(C,D){$(D).effect("highlight",{color:"yellow"},300)});showAlertBox(A.argument,5000)},500)}}function defaultGroupActionResponse(A){if(A&&A.responseText){var B=jshEvalJSON(A.responseText);if(B&&(B.statusCode!=1)){messageUser(B.message,A.argument[0])}else{if(A.argument[0]){ElementEffects.blinkOpacity(A.argument[0],3,120)}if(A.argument[1]||!A.argument[0]){showAlertBox(B.message,5000)}if(typeof imagesPanel!=="undefined"&&(imagesPanel.getDefaultMediaGroupId()>0)){imagesPanel.requestImages(imagesPanel.getDefaultMediaGroupId())}}}}function defaultPageGroupActionResponse(B){if(B&&B.responseText){var E=JSON.parse(B.responseText);if(E&&E.statusCode!==1){var A=B.argument.errMsgTarget;var C=B.argument.parent;var D=E.message;if(A){$(A).text(D)}else{if(C){messageUser(D,$(C))}}}else{ElementEffects.blinkBorder($(B.argument.parent),3,120);if(typeof imagesPanel!=="undefined"&&imagesPanel.getDefaultMediaGroupId()>0){imagesPanel.requestImages(imagesPanel.getDefaultMediaGroupId())}}}}function deleteGroupActionResponse(A){window.location.reload()}function changeDefaultGroupActionResponse(A){window.location.reload()}function actionResponse(A){if(A&&A.responseText){var B=parseResponse(A.responseText);messageUser(B.message,A.argument)}}function parseResponse(responseText){return eval("("+responseText+")")}function messageUser(I,H,G){if(I!=null&&typeof I!=="string"){I=I.message}if(I){I=I.replace(/\n/g,"<br />");var A=$("#MessageToUserContainer");if(!A.length){A=$(window.parent.document.getElementById("MessageToUserContainer"))}if(!A[0].initialized){A.css("position","absolute");A[0].mMessageHeader=$("<em>").appendTo(A);A[0].mMessageContainer=$("<p>").appendTo(A);A[0].mMessageButton=$("<a>",{href:"javascript:void(0);",css:{zIndex:99999}}).appendTo(A);var F=G;A[0].mMessageButton.on("click",function(){A[0].mMessageButton.blur();if(F){F()}});A[0].mMessageButton.on("blur",function(){A.toggle()});A[0].appendChild(A[0].mMessageHeader[0]);A[0].appendChild(A[0].mMessageContainer[0]);A[0].appendChild(A[0].mMessageButton[0]);A[0].mMessageHeader.text("Message:");A[0].mMessageButton.text("ok");A[0].initialized=true}A[0].mMessageContainer.html(I);A.show();A.css("visibility","visible");var B={left:0,top:0},E=$(window).width(),D=$(window).height();if(H){B=H.offset();E=$(H).width();D=$(H).height()}var C=[0,0];C[0]=(E>A.width()?E-A.width():0)/2+B.left;C[1]=(D>A.height()?D-A.height():0)/2+B.top;A.css({left:C[0]+"px",top:C[1]+"px"});A[0].mMessageButton.focus()}}function closeMessageUser(){var A=$("#MessageToUserContainer");A.hide()}function clearTitleText(B,A){if(B.value==A){B.value=""}}function addElement(A,B){A[A.length]=B}function wireUpFolders(B,A){for(i=1;i<A.length;i++){myId=A[i][0];parentId=A[i][1];addElement(getParentFolder(parentId,B),B["id"+myId])}}function getParentFolder(B,A){return(A["id"+B]!=null)?A["id"+B]:A.id0}function debug(B){var A=$("#debugger");if(A.length>0){A.val(B)}}function goBack(A){document.location.href=A}function redirectToLogin(C,A){if(C&&!A){var B=loginAddMediaToDefaultGroupUrl;B=B+"/"+C;document.location.href=B}else{if(C&&A){var B=jshGetCleanUrl(loginAddPageToDefaultGroupUrl);B=B+"/"+C;B=jshAppendParameter(B,"pageId",A);document.location.href=B}}}function constructQuickViewUrl(P,J,M,C){var E=[];if(J){if(!P){P=window.location.href}var R=getQueryParams(P);var I=jshGetCleanUrl(P);var Q="";var K="";var A="";var N="";var S="";var T=/.*\/[0-9]+\/?$/;var G=/.*\/what|where|when|who\/?\??.*$/;if(I.match(G)){var H=new RegExp(/\/what|where|when|who\/?\??.*$/);var B=H.exec(I);if(B&&(B.index>0)){A=I.substring(B.index,I.length)}}else{if((I.match(T))||R.mgid){if(R.mgid){N=R.mgid}else{if(I.charAt(I.length-1)=="/"){I=I.substring(0,I.length-1)}N=I.substring(I.lastIndexOf("/")+1,I.length)}}else{if(I.indexOf("/myMedia")>0){S=true}}}if(A){if(A.charAt(0)!="/"){A="/"+encodeURIComponent(A)}else{A="/"+encodeURIComponent(A.substring(1))}E.push("w4s:"+A)}if(R.q){var K=R.q;var F=K.indexOf("LIMIT:");if(F>0){K=K.substring(0,F)}E.push("q:"+encodeURIComponent(K))}if(R.sort){E.push("sort:"+encodeURIComponent(R.sort))}if(N){E.push("mgid:"+N)}else{if(S){E.push("myMedia:true")}else{if(R.cic){E.push("lc:"+R.cic)}}}var D=new URL(J);var O=D.search;var U=J.substring(0,J.indexOf(O));var L=U.lastIndexOf(":");if(L>0&&L>U.lastIndexOf("/")){J=U.substring(0,L)+":"+encodeURIComponent(U.substring(L+1))+O}J=jshAppendParameter(J,"qvq",E.join(";"),false);if(M>=0){J=jshAppendParameter(J,"mi",M,false)}if(C>=0){J=jshAppendParameter(J,"trs",C,false)}return J}}function constructQuickViewQuery(C){var B="";var D=getQueryParams(C);if(D.qvq){var A=getQuickViewFieldValueMap(D.qvq);if(A.w4s){B=A.w4s}if(A.q){B=jshAppendParameter(B,"q",encodeURIComponent(A.q.replace(/\+/g," ")),false)}if(A.sort){B=jshAppendParameter(B,"sort",A.sort,false)}if(A.mgid){B=jshAppendParameter(B,"mgid",A.mgid,false)}if(A.myMedia){B=jshAppendParameter(B,"myMedia",A.myMedia,false)}if(A.lc){B=jshAppendParameter(B,"lc",A.lc,false)}}if(D.sort){B=jshAppendParameter(B,"sort",D.sort,false)}return B}function getQuickViewFieldValueMap(B){var C={};if(B){var D=B.split(";");var A;for(var E=0;E<D.length;E++){if(D[E]){A=D[E].split(":");if(A.length===2){C[A[0]]=A[1]}}}}return C}function constructQuickViewThumbnailUrl(I,H,E,J,K,D,F){var G="";var A=getQuickViewFieldValueMap(K.qvq);if(A){if(A.mgid){if(I.charAt(I.length-1)!="/"){I+="/"}G=I+A.mgid;if(A.sort){G=jshAppendParameter(G,"sort",A.sort,false)}}else{if(A.q){G=E;if(A.w4s){G+=A.w4s}G=jshAppendParameter(G,"q",A.q,false);if(A.sort){G=jshAppendParameter(G,"sort",A.sort,false)}}else{if(A.lc){G=H;if(A.w4s){G+=A.w4s}var B="LIMIT: "+A.lc;G=jshAppendParameter(G,"q",B,false);if(A.sort){G=jshAppendParameter(G,"sort",A.sort,false)}}else{if(A.myMedia&&A.myMedia=="true"){G=J}}}}if(G.length>0){var C=D;if(F>0){C=D-(D%F)}G=jshAppendParameter(G,"os",C,false)}}return G}function getQuickViewMediaGroupId(B){if(!B){B=window.location.href}var C=getQueryParams(B);if(C.qvq){var A=getQuickViewFieldValueMap(C.qvq);if(A.mgid){return A.mgid}}return null}function constructReturnToSourceUrl(D){var C=jshGetCleanUrl(D);var B=getQueryParams(D);for(var A in B){if(B[A]){if((A.toLowerCase()!="embedded")&&(A.toLowerCase()!="fromwidgetcreator")&&(A.toLowerCase()!="widgetformat")&&(A.toLowerCase()!="controls")){C=jshAppendParameter(C,A,B[A])}}}return C}function getScrollTop(){if(document.documentElement.scrollTop){return document.documentElement.scrollTop}return document.body.scrollTop}function scrollHandler(){var A=document.getElementById("waitMessageContainer");A.style.top=getScrollTop()}function showNotify(B){var A=document.getElementById("waitMessageContainer");A.style.display="block";A.style.visibility="visible";if(A.currentStyle&&A.currentStyle.position=="absolute"){A.style.top=getScrollTop();window.onscroll=scrollHandler}A.innerHTML=B}function hideNotify(){var A=document.getElementById("waitMessageContainer");A.style.display="none";A.style.visibility="hidden";window.onscroll=null}function loadMessage(A){window.setTimeout("showNotify('"+A+"');",1000);window.setTimeout("hideNotify();",10000);return true}function exportMedia(D,C,A){if(D){var B=exportMediaUrl;B=jshAppendParameter(B,"mediaId",D);B=jshAppendParameter(B,"xres",C);B=jshAppendParameter(B,"rand",Math.random());var E={success:function(F){},failure:function(F){}};recordEvent(A,"Image Export",B,C);location.href=B}}function exportMediaGroup(B,D,A){if(B){var C=exportMediaGroupUrl;C=jshAppendParameter(C,"mgid",B);C=jshAppendParameter(C,"xres",D);var E={success:function(F){},failure:function(F){}};recordEvent(A,"Group Export",C,D);location.href=C}}function addTinyUrl(A){if(A){var B=addTinyUrlUrl;B=jshAppendParameter(B,"mappedUrl",encodeURIComponent(A));var D={success:addTinyUrlActionResponse,failure:function(E){}};var C=YAHOO.util.Connect.asyncRequest("POST",B,D,null)}}function addTinyUrlActionResponse(A){if(A&&A.responseText){var B=$.parseJSON(A.responseText);if(B&&(B.statusCode!=1)){messageUser(B.message,$(A.argument))}else{if(B.message!=null){shareThis.setUrl(shareThis.getBaseUrl()+"/s/"+B.message);shareThis.setTinyUrl(shareThis.getBaseUrl()+"/s/"+B.message);shareThis.constructShareWidget()}}}}function getIIIFUrl(D,A){if(D&&A){var C=A;C=jshAppendParameter(C,"mappedUrl",encodeURIComponent(D));try{var F=document.getElementsByClassName("pageTitleContainer")[0].getElementsByTagName("h1")[0].innerText;C=jshAppendParameter(C,"label",F)}catch(B){}var G={success:getIIIFUrlActionResponse,failure:function(H){}};var E=YAHOO.util.Connect.asyncRequest("POST",C,G,null)}}function getIIIFUrlActionResponse(A){if(A&&A.responseText){var B=jshEvalJSON(A.responseText);if(B&&(B.statusCode!=1)){messageUser(B.message,$(A.argument))}else{if(B.message!=null){shareThis.setIIIFUrl(B.message);shareThis.showIIIF()}}}}function resizeImage(A,C,B){if(B&&B>0){if(A.width>B){A.height=parseInt(A.height*B/A.width);A.width=B}}if(C&&C>0){if(A.height>C){A.width=parseInt(A.width*C/A.height);A.height=C}}A.style.position="static";A.style.visibility="visible"}function replaceImage(C){var A=document.getElementById(C);var B=new Image();B.src=A.src;B.id=A.id;B.onerror=A.onerror;B.alt=A.alt;B.border=A.border;B.id=A.id;A.parentNode.replaceChild(B,A)}function validateFeaturedMediaDisplayed(){var B=document.getElementsByClassName("resolution0");for(k=0;k<B.length;k++){var A=$(B[k]).getElementsBySelector("a img");if(A[0].width==0){replaceImage(A[0].id)}}}function recordEvent(A,C,B,D){if(A&&typeof (_gaq)!=="undefined"){_gaq.push(["_trackEvent",C,B,document.title,D])}}function constructRelatedSearchLink(E,G,D,F,A){var B=document.createElement("a");var C=jshReverseString(searchValues[i].strip()).unescapeHTML();B.href=E+"?q="+G.replace(" ","")+'="'+encodeURIComponent(C)+'"'+(A!=null?"&sort="+A:"");B.appendChild(F);return B}function setThumbnailLimit(B){if(B){var A=$("#ThumbnailContainer");if(B.mState=="1"){A.removeClass("thumbnailLimitLarge").addClass("thumbnailLimitMedium")}else{if(B.mState=="0"){A.removeClass("thumbnailLimitMedium").addClass("thumbnailLimitLarge")}}}}function toggleRefine(){if(collapsibleContainer){var A=$("#ThumbnailContainer");if(collapsibleContainer.mState=="1"){collapsibleContainer.mCollapseButton.click();A.removeClass("thumbnailLimitMedium").addClass("thumbnailLimitLarge")}else{if(collapsibleContainer.mState=="0"){collapsibleContainer.mMiddleViewButton.click();A.removeClass("thumbnailLimitLarge").addClass("thumbnailLimitMedium")}}setThumbnailLimit(collapsibleContainer)}}function renderRefineButton(){if(collapsibleContainer){var B=document.getElementsByClassName("refineButtonContainer");var A=document.getElementsByClassName("facetsGutter");if(collapsibleContainer.mState=="1"){B[0].style.display="none";A[0].style.display=""}else{if(collapsibleContainer.mState=="0"){B[0].style.display="block";A[0].style.display="none"}}}}function showAlertBox(G,D){var E=$("#AlertBoxContainer");var B=$("#MainNav");if(!E.length){E=$(window.parent.document).find("#AlertBoxContainer")}if(!B.length){B=$(window.parent.document).find("#MainNav")}if(E.length){var F,C;if(B.length){F=B.position();C=B.width()}else{var A=jshGetWindowSize();F={top:0,left:0};C=A[0]}if(G){E.html(G)}E.removeClass("alert-box-hidden");E.css("top",F.top+"px");E.css("left",C/2-E.width()/2+"px")}if(D&&D>0){setTimeout(function(){hideAlertBox()},D)}}function hideAlertBox(){var A=$("#AlertBoxContainer");if(!A.length){A=$(window.parent.document).find("#AlertBoxContainer")}if(A.length){A.addClass("alert-box-hidden")}}function checkAllImgs(){var A=document.getElementsByClassName("thumbnailItem");for(i=0;i<A.length;i++){if(A[i]){checkLongImg(A[i])}}}function checkLongImg(B){var E=$("#collapsibleContainerID");if(E.length>0){var D=E.width();var A=$(B).width();var C=(13+18)*2;if($(window).width()-D<A+C){$(B).closest("div.thumbnailItem").addClass("ultraWide")}}}function openInUv(){window.name="DetailView";if(parent.shareThis.mIIIFUrl){var A=parent.shareThis.mIIIFUrl.replace(/(^\w+:|^)/,"");var B=window.open("/uv/index.html?manifestUrl="+encodeURIComponent(A),"_blank");B.focus()}}function toggleAnnotType(C,B){var A=toggleAnnotEditUrl;A=jshAppendParameter(A,"collectionLevelAnnotEdit",(C.checked?"1":"0"));A=jshAppendParameter(A,"lc",B);var E={success:toggleAnnotTypeResponse,failure:function(F){},argument:C};var D=YAHOO.util.Connect.asyncRequest("POST",A,E,null)}function toggleAnnotTypeResponse(B){if(B&&B.responseText){var C=JSON.parse(B.responseText);if(typeof C.isCollectionLevelAnnotEdit!=="undefined"){if(C.title){var A=document.getElementById("AnnotationType");if(A){A.title=C.title}}}}}function activeCatId(B,A){B.href=jshAppendParameter(B.href,"c",A);return true}function parseCaptionFields(F){for(var E=0;E<F.length;E++){if(F[E].hasOwnProperty("field")){var G=F[E].field;var B=F[E].value;if(G.fieldName.startsWith("_luna_media_custom_caption_")){if(G.fieldName.startsWith("_luna_media_custom_caption_src_")){var H=G.fieldName.substring("_luna_media_custom_caption_src_".length);captionSrc[H]=B}else{if(G.fieldName.startsWith("_luna_media_custom_caption_label_")){var H=G.fieldName.substring("_luna_media_custom_caption_label_".length);captionLabel[H]=B}}}}}for(key in captionLabel){var C=captionLabel[key];var A=captionSrc[key];if(C&&A){var D=document.createElement("TRACK");D.label=C;D.srclang=key;D.src=A.replace(/(^\w+:|^)\/\//,"//");D.kind="captions";document.getElementById("video-id").appendChild(D);subtitlesEnabled=true}}}function showAnnot(){var A=document.getElementById("Workspace");var B=A.getElementsByTagName("iframe")[0];B.contentWindow.annotLayerClicked();if(typeof (B.contentWindow.toggle)=="function"){B.contentWindow.toggle()}}function toggleAnnotationState(B){var A=document.getElementById("Workspace");var C=A.getElementsByTagName("iframe")[0];C.contentWindow.annotLayerClicked();if(typeof (C.contentWindow.toggle)=="function"){if(!$("#Workspace").is(":visible")){$("#Workspace").on("showWorkspace",function(){C.contentWindow.toggleAnnotationState(B)})}else{C.contentWindow.toggleAnnotationState(B)}}}function showAnnotControls(){var A=document.getElementById("Workspace");var B=A.getElementsByTagName("iframe")[0];B.contentWindow.showAnnotLayer()}function hideAnnotControls(){var A=document.getElementById("Workspace");var B=A.getElementsByTagName("iframe")[0];B.contentWindow.hideAnnotLayer()}function showAnnotLayer(){jQuery(".mirador-osd-annotations-layer").removeClass("hidden")}function hideAnnotLayer(){jQuery(".mirador-osd-annotations-layer").addClass("hidden")}function annotLayerMouseOut(){jQuery(".mirador-osd-annotations-layer").addClass("hidden")}function annotLayerClicked(){jQuery(".mirador-osd-annotations-layer").click()}function bindEvent(C,A,B){if(C.addEventListener){C.addEventListener(A,B,false)}else{if(C.attachEvent){C.attachEvent("on"+A,B)}}}function toggleTranscript(){var C=document.querySelector("#Container");var D=document.querySelector("#VideoJsTranscript");var A=document.querySelector("#showTranscriptBtn");var B=document.querySelector("#closeTranscriptBtn");if(D.classList.contains("hide")){C.classList.add("leftSide");D.classList.add("rightSide");D.classList.remove("hide");A.classList.add("hide");B.classList.remove("hide")}else{C.classList.remove("leftSide");D.classList.remove("rightSide");D.classList.add("hide");A.classList.remove("hide");B.classList.add("hide")}}function changeView(B){var A=new URLSearchParams(window.location.search);A.set("annotView",B);A.set("os",0);window.location.search=A.toString()}function showMarkers(A){jQuery(A).closest(".mediaContainer").find(".marker").show();if(typeof positionMarker=="function"){jQuery(A).closest(".mediaContainer").find(".marker").each(function(){positionMarker(this)})}}function escapeSelector(A){return A.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}function freezeOSD(A){A.gestureSettingsMouse.dragToPan=false;A.gestureSettingsMouse.clickToZoom=false;A.gestureSettingsMouse.scrollToZoom=false}function unfreezeOSD(A){A.gestureSettingsMouse.dragToPan=true;A.gestureSettingsMouse.clickToZoom=true;A.gestureSettingsMouse.scrollToZoom=true}function exitEditMode(A){$(".drawToolButtons").removeClass("show");$(".drawToolButtons").removeClass("selected");if(A==null){}else{A.setDrawingEnabled(false);unfreezeOSD(A.viewer);A.isDrawing=false;A.cancelSelected();$(".annoClose").addClass("hide");$(".annoClose").removeClass("show");$(".annoOpen").addClass("show");$(".annoOpen").removeClass("hide")}}var PPosition={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(B,A,C){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(B,A,C)}this.xcomp=A;this.ycomp=C;this.offset=$(B).cumulativeOffset();return(C>=this.offset[1]&&C<this.offset[1]+B.offsetHeight&&A>=this.offset[0]&&A<this.offset[0]+B.offsetWidth)},withinIncludingScrolloffsets:function(B,A,D){var C=B.cumulativeScrollOffset();this.xcomp=A+C[0]-this.deltaX;this.ycomp=D+C[1]-this.deltaY;this.offset=B.cumulativeScrollOffset();return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+B.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+B.offsetWidth)},overlap:function(B,A){if(!B){return 0}if(B=="vertical"){return((this.offset[1]+A.offsetHeight)-this.ycomp)/A.offsetHeight}if(B=="horizontal"){return((this.offset[0]+A.offsetWidth)-this.xcomp)/A.offsetWidth}}};