function CollapsibleContainer(C,B,A){this.mTitle=C;this.mContainer=null;this.mHeader=null;this.mBody=null;this.mFooter=null;this.mCollapseButton=null;this.mMiddleViewButton=null;this.mExpandButton=null;this.mAnimating=false;this.mOptions=B;this.mPostToggleFunction;this.mState="1";this.mOldOverflowValue=null;this.mOldHeightValue=null;this.mOldWidthValue=null;this.mToggleEvent=A;this.HEADER_CLASSNAME="header";this.BODY_CLASSNAME="body";this.FOOTER_CLASSNAME="footer";this.COLLAPSED_CLASSNAME="collapsed";this.TABLE_CLASSNAME="mediaInfoCollapsed";this.FULLY_EXPANDED_CLASSNAME="fullExpanded";this.BUTTON_COLLAPSED="collapseButton";this.BUTTON_MIDDLE_STATE="middleStateButton";this.BUTTON_EXPANDED="expandedButton";this.ANIMATION_GRAIN=15;this.ANIMATION_PERCENTAGE_GRAIN=0.15;this.ANIMATION_SLEEP=50;this.DEFAULT_CLASS_NAME="collapsibleContainer";this.DEFAULT_BODY_CONTENT="Loading...";this.OPTION_CLASS_NAME="className";this.OPTION_INITIAL_BODY_CONTENT="initialBodyContent";this.OPTION_NO_ANIMATE_COLLAPSE="noAnimateCollapse";this.OPTION_COLLAPSE_VERTICALLY="collapseVertically";this.OPTION_OVERFLOW_EXPAND="overflowExpand";this.OPTION_INITIAL_STATE="initialState";this.OPTION_MAX_STATES="maxStates";this.OPTION_HALF_WIDTH="halfWidth";this.OPTION_NO_INFO="noInfo";this.COLLAPSED_WIDTH=17;this.init=CollapsibleContainer_Init;this.render=CollapsibleContainer_Render;this.associate=CollapsibleContainer_Associate;this.wrap=CollapsibleContainer_Wrap;this.toggleState=CollapsibleContainer_ToggleState;this.collapse=CollapsibleContainer_Collapse;this.isCollapsed=CollapsibleContainer_IsCollapsed;this.isVerticalCollapse=CollapsibleContainer_IsVerticalCollapse;this.animateCollapse=CollapsibleContainer_AnimateCollapse;this.animateHorizontalCollapse=CollapsibleContainer_AnimateHorizontalCollapse;this.animateVerticalCollapse=CollapsibleContainer_AnimateVerticalCollapse;this.addContent=CollapsibleContainer_AddContent;this.append=CollapsibleContainer_Append;this.insert=CollapsibleContainer_Insert;this.set=CollapsibleContainer_Set;this.clearContent=CollapsibleContainer_ClearContent;this.addField=CollapsibleContainer_AddField;this.addValue=CollapsibleContainer_AddValue;this.insertBefore=CollapsibleContainer_InsertBefore;this.insertAfter=CollapsibleContainer_InsertAfter;this.addToGroup=CollapsibleContainer_AddFieldValueToGroup;this.mTransaction=null}function CollapsibleContainer_Init(B){if(B){if(!this.mContainer){this.mContainer=document.createElement("div")}if(!this.mHeader){this.mHeader=document.createElement("div")}if(!this.mBody){this.mBody=document.createElement("div")}var A='<a href="javascript:var collapseOrExpand;" title="Click to Expand or Collapse">&nbsp;</a>';this.mHeader.innerHTML='<div class="fll"><h1>'+this.mTitle+'</h1></div><div class="fr">'+A+"</div>";if(!this.mBody.innerHTML){this.mBody.innerHTML=((this.mOptions[this.OPTION_INITIAL_BODY_CONTENT]==null)?this.DEFAULT_BODY_CONTENT:this.mOptions[this.OPTION_INITIAL_BODY_CONTENT])}this.mContainer.appendChild(this.mHeader);this.mContainer.appendChild(this.mBody)}this.mState=this.mOptions[this.OPTION_INITIAL_STATE];this.mContainer.className=((this.mOptions[this.OPTION_CLASS_NAME]==null)?this.DEFAULT_CLASS_NAME:this.mOptions[this.OPTION_CLASS_NAME]);this.mHeader.className=this.HEADER_CLASSNAME;this.mBody.className=this.BODY_CLASSNAME;if(this.mState=="0"){$(this.mContainer).addClassName("containerCollapsed");$(this.mHeader).addClassName("headerCollapsed");$(this.mBody).addClassName("bodyCollapsed");if($(this.mFooter)){$(this.mFooter).addClassName("footerCollapsed")}if(this.mOptions[this.OPTION_MAX_STATES]=="2"){$(this.mContainer).addClassName("twoStateContainerCollapsed");$(this.mHeader).addClassName("headerCollapseTwoState")}}if(this.mCollapseButton=$(this.mHeader).select("div")[3]){this.mCollapseButton.collapsibleContainer=this;this.mCollapseButton.onclick=Static_CollapsibleContainer_Toggle}if(this.mMiddleViewButton=$(this.mHeader).select("div")[2]){this.mMiddleViewButton.collapsibleContainer=this;this.mMiddleViewButton.onclick=Static_CollapsibleContainer_Toggle}if(this.mExpandButton=$(this.mHeader).select("div")[1]){this.mExpandButton.collapsibleContainer=this;this.mExpandButton.onclick=Static_CollapsibleContainer_Toggle}this.mHeader.collapsibleContainer=this;this.mBody.collapsibleContainer=this;this.mContainer.collapsibleContainer=this;if(this.mOptions[this.OPTION_MAX_STATES]=="2"){switch(this.mOptions[this.OPTION_INITIAL_STATE]){case"0":this.collapse(true,this.mOptions[this.OPTION_INITIAL_STATE]);break;case"1":this.collapse(false,this.mOptions[this.OPTION_INITIAL_STATE]);break;default:this.collapse(false,this.mOptions[this.OPTION_INITIAL_STATE]);break}}else{if(this.mOptions[this.OPTION_MAX_STATES]=="3"){switch(this.mOptions[this.OPTION_INITIAL_STATE]){case"0":this.collapse(true,this.mOptions[this.OPTION_INITIAL_STATE]);break;case"1":this.collapse(false,this.mOptions[this.OPTION_INITIAL_STATE]);break;case"2":this.collapse(false,this.mOptions[this.OPTION_INITIAL_STATE]);break;default:this.collapse(false,this.mOptions[this.OPTION_INITIAL_STATE]);break}}}$(this.mHeader).on("touchend",function(){if($(this.closest("."+this.collapsibleContainer.DEFAULT_CLASS_NAME)).hasClass("opened")){$(this.closest("."+this.collapsibleContainer.DEFAULT_CLASS_NAME)).toggleClass("opened")}})}function CollapsibleContainer_Render(A){if(A){this.mContainer=A;this.init(true)}}function CollapsibleContainer_Associate(A){if(A){if(!(A.mCollapseButton&&A.mCollapseButton.collapsibleContainer)){this.mContainer=A;this.mHeader=$(this.mContainer).select("."+this.HEADER_CLASSNAME)[0];this.mBody=$(this.mContainer).select("."+this.BODY_CLASSNAME)[0];this.mFooter=$(this.mContainer).select("."+this.FOOTER_CLASSNAME)[0];this.init(false)}}}function CollapsibleContainer_Wrap(A){if(A&&(!A.collapsibleContainer)){A=$(A);var B=$(A.up());this.mContainer=document.createElement("div");this.mBody=A;B.appendChild(this.mContainer);B.removeChild(A);this.init(true)}}function CollapsibleContainer_ClearContent(){this.mBody.innerHTML=""}function CollapsibleContainer_Append(A){this.addContent(A,false)}function CollapsibleContainer_Insert(A){this.addContent(A,true)}function CollapsibleContainer_InsertBefore(B,A){if(A==null){return }if(!this.mBody.contains(A)){return }A.parentNode.insertBefore(B,A)}function CollapsibleContainer_InsertAfter(B,A){if(A==null){return }if(!this.mBody.contains(A)){return }A.parentNode.insertBefore(B,A.nextSibling)}function CollapsibleContainer_Set(A){if(A){this.clearContent();this.addContent(A,false)}}function CollapsibleContainer_AddContent(A,B){if(A){if(A.innerHTML){if(B&&(this.mBody.childNodes.length>0)){this.mBody.insertBefore(A,this.mBody.childNodes[0])}else{this.mBody.appendChild(A)}}else{if(B){this.mBody.innerHTML=A+this.mBody.innerHTML}else{this.mBody.innerHTML+=A}}}}function CollapsibleContainer_IsCollapsed(){return((this.mOldOverflowValue==null||this.mOldOverflowValue=="")&&(this.mOldWidthValue==null||this.mOldWidthValue=="")&&(this.mOldHeightValue==null||this.mOldHeightValue==""))}function CollapsibleContainer_IsVerticalCollapse(){return this.mOptions[this.OPTION_COLLAPSE_VERTICALLY]}function CollapsibleContainer_ToggleState(A){this.mState=A;this.collapse(this.isCollapsed());if(this.mToggleEvent){this.mToggleEvent.fire()}}function CollapsibleContainer_Collapse(F){this.mHeader.blur();this.yOrginalContainer=$(this.mContainer).getHeight();if(jshIsNonEmptyTrim($(this.mContainer).getStyle("border-top-width"))){this.yOrginalContainer-=parseInt($(this.mContainer).getStyle("border-top-width").indexOf("p"))}if(jshIsNonEmptyTrim($(this.mContainer).getStyle("border-bottom-width"))){this.yOrginalContainer-=parseInt($(this.mContainer).getStyle("border-bottom-width").indexOf("p"))}if(this.mState=="0"){this.mOldOverflowValue=this.mContainer.style.overflow;this.mOldHeightValue=this.mContainer.style.height;this.mOldWidthValue=this.mContainer.style.width;this.mContainer.style.overflow="hidden";this.mHeader.onclick=Static_CollapsibleContainer_Toggle;if(this.mOptions[this.OPTION_NO_ANIMATE_COLLAPSE]){if(this.isVerticalCollapse()){this.mContainer.style.width="48px";this.mHeader.style.margin="0 0 0 -119px";this.mHeader.style.height=(this.yOrginalContainer)+"px";this.mContainer.style.height=(this.yOrginalContainer)+"px";this.mBody.style.width="1px"}else{this.mContainer.style.height=$(this.mHeader).getHeight()+"px"}$(this.mHeader).addClassName(this.COLLAPSED_CLASSNAME);if(this.mOptions[this.OPTION_MAX_STATES]=="2"){$(this.mContainer).addClassName("twoStateContainerCollapsed");$(this.mHeader).addClassName("headerCollapseTwoState")}$(this.mContainer).show();if(this.mMiddleViewButton!=null){$(this.mMiddleViewButton).show()}if(this.mCollapseButton!=null){$(this.mCollapseButton).hide()}if(this.mExpandButton!=null){$(this.mExpandButton).hide()}}else{this.animateCollapse()}}else{if(this.mState=="1"){$(this.mContainer).removeClassName("containerCollapsed");$(this.mHeader).removeClassName("headerCollapsed");$(this.mHeader).removeClassName(this.FULLY_EXPANDED_CLASSNAME);$(this.mBody).removeClassName("bodyCollapsed");if($(this.mFooter)){$(this.mFooter).removeClassName("footerCollapsed")}if(this.mOptions[this.OPTION_MAX_STATES]=="2"){$(this.mContainer).removeClassName("twoStateContainerCollapsed");$(this.mHeader).removeClassName("headerCollapseTwoState")}$(this.mContainer).show();if(this.mMiddleViewButton!=null){$(this.mMiddleViewButton).hide()}if(this.mCollapseButton!=null){$(this.mCollapseButton).show()}if(this.mExpandButton!=null){$(this.mExpandButton).show()}this.mOldOverflowValue=this.mContainer.style.overflow;this.mOldHeightValue=this.mContainer.style.height;this.mOldWidthValue=this.mContainer.style.width;this.mHeader.className=this.HEADER_CLASSNAME;this.mHeader.onclick=null;if(this.isVerticalCollapse()){this.mContainer.style.overflow=this.mOldOverflowValue;this.mContainer.style.overflow="visible";this.mBody.style.display="";this.mBody.style.visibility="visible";this.mHeader.style.height="48px";this.mHeader.style.margin="0 0 0 0";this.mBody.style.width="";var A=275;if(this.mOptions[this.OPTION_HALF_WIDTH]==true){A=145}if($(this.mBody).getWidth()>A){this.mContainer.style.width=A+"px"}else{this.mContainer.style.width=A+"px"}this.mContainer.style.height="100%"}else{this.mContainer.style.height=this.mOldHeightValue;this.mContainer.style.width=this.mOldWidthValue}if(this.mCollapseButton!=null){this.mCollapseButton.className=""}this.mOldOverflowValue=null;this.mOldHeightValue=null;this.mOldWidthValue=null}else{if(this.mState=="2"){if(this.isVerticalCollapse()){this.mContainer.style.height="100%";this.mBody.style.width=""}else{this.mContainer.style.height=this.mOldHeightValue;this.mContainer.style.width=this.mOldWidthValue}$(this.mContainer).removeClassName("containerCollapsed");$(this.mHeader).removeClassName("headerCollapsed");$(this.mBody).removeClassName("bodyCollapsed");if($(this.mFooter)){$(this.mFooter).removeClassName("footerCollapsed")}$(this.mContainer).show();if(this.mMiddleViewButton!=null){$(this.mMiddleViewButton).show()}if(this.mCollapseButton!=null){$(this.mCollapseButton).show()}if(this.mExpandButton!=null){$(this.mExpandButton).hide()}this.mOldOverflowValue=this.mContainer.style.overflow;this.mOldHeightValue=this.mContainer.style.height;this.mOldWidthValue=this.mContainer.style.width;this.mHeader.className=this.HEADER_CLASSNAME;$(this.mHeader).addClassName(this.FULLY_EXPANDED_CLASSNAME);this.mContainer.style.overflow=this.mOldOverflowValue;this.mBody.style.display="";this.mBody.style.visibility="visible";var E=$(window).width();this.mBody.style.width="100%";this.mHeader.onclick=null;if(this.isVerticalCollapse()){this.yStarting=$(this.mHeader).getHeight()+"px";this.mContainer.style.width=this.mOldWidthValue;this.mContainer.style.overflow="visible";if(this.mOptions[this.OPTION_NO_INFO]=="true"){this.mContainer.style.width="200px";this.mHeader.style.height="48px";this.mHeader.style.width="200px"}else{this.mContainer.style.width=((E/2)-15)+"px";this.mHeader.style.height="48px"}var D=new Array();D=$(this.mContainer).find(".valueFieldDisplayNameTD");var B=new Array();B=$(this.mContainer).find(".valueValueTD");for(var C=0;C<B.length;C++){B[C].style.width=((E/2)-$(D[0]).getWidth()-3)+"px"}this.mContainer.style.width=((E/2)-15)+"px";this.mHeader.style.margin="0 0 0 0";this.mContainer.style.height="100%";this.mBody.style.width="100%"}else{this.mContainer.style.height=this.mOldHeightValue;this.mContainer.style.width=this.mOldWidthValue}this.mCollapseButton.className="";this.mOldOverflowValue=null;this.mOldHeightValue=null;this.mOldWidthValue=null}}}}function Static_CollapsibleContainer_Toggle(E){var C=jshGetSourceElement(E);C=$(C).closest("div")[0];if(C&&C.collapsibleContainer){E.stopPropagation();if(!C.collapsibleContainer.mAnimating){var B=1;var A=C.children;if(A[0].id==C.collapsibleContainer.BUTTON_COLLAPSED){B=0}if(A[0].id==C.collapsibleContainer.BUTTON_MIDDLE_STATE){B=1}if(A[0].id==C.collapsibleContainer.BUTTON_EXPANDED){B=2}var D=setCollapseStateUrl;D=jshAppendParameter(D,"ccType",C.collapsibleContainer.mOptions[C.collapsibleContainer.OPTION_MAX_STATES],true);D=jshAppendParameter(D,"ccState",B,true);var F={success:function(G){},failure:function(G){}};C.collapsibleContainer.mTransaction=YAHOO.util.Connect.asyncRequest("GET",D,F,null);C.collapsibleContainer.toggleState(B);if(C.collapsibleContainer.mPostToggleFunction){C.collapsibleContainer.mPostToggleFunction(C.collapsibleContainer)}}}}function CollapsibleContainer_AnimateCollapse(){if(this.isVerticalCollapse()){this.xStarting=$(this.mContainer).getWidth();this.yStarting=$(this.mHeader).getHeight();this.xEndingSize=$(this.mHeader).getHeight();this.yEndingSize=$(this.mContainer).getHeight();this.headerWidth=$(this.mHeader).getWidth();this.yOrginalContainer=$(this.mContainer).getHeight();if(jshIsNonEmptyTrim($(this.mContainer).getStyle("border-top-width"))){this.yOrginalContainer-=parseInt($(this.mContainer).getStyle("border-top-width"))}if(jshIsNonEmptyTrim($(this.mContainer).getStyle("border-bottom-width"))){this.yOrginalContainer-=parseInt($(this.mContainer).getStyle("border-bottom-width"))}this.animateVerticalCollapse()}else{this.yEndingSize=$(this.mHeader).getHeight();this.yStarting=$(this.mContainer).getHeight();this.animateHorizontalCollapse()}return }function CollapsibleContainer_AnimateVerticalCollapse(){this.mHeader.blur();this.mAnimating=true;var F=$(this.mHeader).select("h1")[0];F.style.display="none";this.mBody.style.visibility="hidden";this.mCollapseButton.style.visibility="hidden";this.mContainer.overflow="hidden";var C=$(this.mContainer).getWidth();var B=$(this.mHeader).getHeight();var D=$(this.mContainer).getHeight();var E=(Math.abs(this.xEndingSize-this.xStarting)*this.ANIMATION_PERCENTAGE_GRAIN);var I=(Math.abs(this.yEndingSize-this.yStarting)*this.ANIMATION_PERCENTAGE_GRAIN);var H=Math.round(Math.abs(C-E));var G=Math.round(B+I);if((H<this.xEndingSize)||(G>this.yEndingSize)){H=this.xEndingSize;G=this.yEndingSize}this.mContainer.style.width=H+"px";this.mHeader.style.height=G+"px";this.mContainer.style.height=D;this.mContainer.scrollLeft=this.mContainer.scrollWidth;if((H==this.xEndingSize)||(G==this.yEndingSize)){F.style.display="";this.mCollapseButton.style.visibility="";this.mOldHeightValue=$(this.mHeader).getHeight()+"px";this.mHeader.style.width=this.xStarting+"px";this.mHeader.style.height=G+"px";this.mContainer.style.height=(this.yOrginalContainer)+"px";this.mContainer.scrollLeft=this.mContainer.scrollWidth;this.mAnimating=false;$(this.mHeader).addClassName(this.COLLAPSED_CLASSNAME);if(this.mToggleEvent){this.mToggleEvent.fire()}}else{var A=this;setTimeout(function(){A.animateVerticalCollapse()},this.ANIMATION_SLEEP)}}function CollapsibleContainer_AnimateHorizontalCollapse(){this.mAnimating=true;this.mCollapseButton.style.visibility="hidden";this.mBody.style.display="none";var C=$(this.mContainer).getHeight();var B=Math.abs((this.yEndingSize-this.yStarting)*this.ANIMATION_PERCENTAGE_GRAIN);var A=Math.round(Math.abs(C-B));if(A<this.yEndingSize){A=this.yEndingSize}this.mContainer.style.height=A+"px";if(A==this.yEndingSize){this.mAnimating=false;this.mCollapseButton.style.visibility="";$(this.mHeader).addClassName(this.COLLAPSED_CLASSNAME);if(this.mToggleEvent){this.mToggleEvent.fire()}}else{var D=this;setTimeout(function(){D.animateHorizontalCollapse()},this.ANIMATION_SLEEP)}}function CollapsibleContainer_AddField(C){var B=document.createElement("div");B.innerHTML='<div class="clsb collapsible_Record " style=""><div role="heading" class="valueFieldDisplayNameTD">'+C+"</div></div>";var A=this.mBody.getElementsByClassName("metaGroup");if(A.length>0){this.insertBefore(B.firstElementChild,A[0])}else{this.append(B.firstElementChild)}}function CollapsibleContainer_AddValue(C){var A=document.createElement("div");A.innerHTML='<div class="clsb collapsible_Record " style=""><div class="valueValueTD"><div style="word-wrap: break-word" class="singleValueValue">'+C+"</div></div></div>";var B=this.mBody.getElementsByClassName("metaGroup");if(B.length>0){this.insertBefore(A.firstElementChild,B[0])}else{this.append(A.firstElementChild)}}function CollapsibleContainer_AddFieldValueToGroup(G,E,C,A){var D=document.createElement("div");var B=document.createElement("div");var F=this.mBody.getElementsByClassName(C);D.innerHTML='<div class="clsb collapsible_'+A+'" style="display:none;"><div role="heading" class="valueFieldDisplayNameTD">'+G+"</div></div>";B.innerHTML='<div class="clsb collapsible_'+A+' " style="display:none;"><div class="valueValueTD"><div style="word-wrap: break-word" class="singleValueValue">'+E+"</div></div></div>";if(F.length>0){F[0].style.display="";this.insertAfter(B.firstElementChild,F[0]);this.insertAfter(D.firstElementChild,F[0])}};