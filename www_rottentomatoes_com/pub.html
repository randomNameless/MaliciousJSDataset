<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pub.html</title>
</head>
<body>

<script>
/* HouseHold ImplementationValidator LegacyLayer SignalsAutoInsertion SignalsBsc SignalsIds SignalsTvp SignalsVlp */
(()=>{var Lt=Object.defineProperty,Ne=Object.defineProperties,Le=Object.getOwnPropertyDescriptor,Fe=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Nt=(n,t,e)=>t in n?Lt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Et=(n,t)=>{for(var e in t||(t={}))Qe.call(t,e)&&Nt(n,e,t[e]);if(le)for(var e of le(t))Ge.call(t,e)&&Nt(n,e,t[e]);return n},Ft=(n,t)=>Ne(n,Fe(t)),i=(n,t)=>Lt(n,"name",{value:t,configurable:!0});var s=(n,t,e,r)=>{for(var o=r>1?void 0:r?Le(t,e):t,l=n.length-1,g;l>=0;l--)(g=n[l])&&(o=(r?g(t,e,o):g(o))||o);return r&&o&&Lt(t,e,o),o};var a=(n,t,e)=>(Nt(n,typeof t!="symbol"?t+"":t,e),e);var S=(n,t,e)=>new Promise((r,o)=>{var l=f=>{try{p(e.next(f))}catch(h){o(h)}},g=f=>{try{p(e.throw(f))}catch(h){o(h)}},p=f=>f.done?r(f.value):Promise.resolve(f.value).then(l,g);p((e=e.apply(n,t)).next())});var u={"2620":{adServerId:1391,customTracking:{}}};var Qt={queueAdRequest:n=>{var t;try{(t=n.callback)==null||t.call(n),n.callback=null}catch(e){}},defineSlot:(n,t)=>{},adRendered:(n,t)=>{},adRemoved:n=>{},getTargeting:n=>({}),addEventListener:(n,t)=>{},removeEventListener:(n,t)=>{},toggleDebugMode:()=>{console.log("%c[UT-DEBUG]%c Debug mode is not available for this tag.","color: red","color: intial")},_debugScriptLoaded:()=>{},onSlotVisibleForTime:(n,t,e)=>{}};var Gt=class Gt{constructor(){a(this,"isEntryModule",!0)}};i(Gt,"EntryModule");var v=Gt;var vt=class vt{constructor(t){a(this,"_error");a(this,"_message","unknown");a(this,"_trace",[]);if(t instanceof vt)return t;t instanceof Error&&(this._error=t,this._message=t.message)}get error(){return this._error}get message(){return this._message}get trace(){return this._trace}addToTrace(t){this.trace.unshift(t)}};i(vt,"TracedError");var lt=vt;var Bt=class Bt{constructor(t,e){a(this,"window");a(this,"dvtag");a(this,"modules",new Map);a(this,"errorHandlers",[]);a(this,"errors",[]);var r;this.window=e,this.window.dvtag=(r=this.window.dvtag)!=null?r:{},this.dvtag=this.window.dvtag,this.dvtag._core=this;for(let[o,l]of Object.entries(Qt))this.dvtag[o]=l;for(let o of t)this.createModule(o);for(let o of this.modules.values())this.applyModuleDecoration(o);for(let o of this.modules.values())this.applyErrorDecoration(o);for(let o of this.modules.values())this.applyPluginDecoration(o);for(let o of this.modules.values())this.applyApiDecoration(o);for(let o of this.modules.values())this.applyExecuteDecoration(o)}get moduleList(){return[...this.modules.keys()].map(t=>t.name)}get entryModuleList(){return[...this.modules.entries()].filter(([t,e])=>e instanceof v).map(([t,e])=>t.name)}get(t){return this.getModule(t).gateway}getByName(t){let e=[...this.modules.keys()].find(r=>r.name===t);return e!=null?this.get(e):null}getModule(t){let e=this.modules.get(t);if(e==null)throw new Error(`module not in core: ${t.name}`);return e}createModule(t){if(t.prototype.moduleConfig==null)throw new Error(`not a module: ${t.name}`);let e=new t;e.core=this,e.gateway={module:e},this.modules.set(t,e)}applyModuleDecoration(t){var o,l,g,p,f,h;let e=t.constructor.prototype.moduleConfig,r=t.constructor.name;for(let{method:R}of e){let x=t[R].bind(t),j=(g=(l=(o=this.dvtag._hooks)==null?void 0:o.interceptModule)==null?void 0:l[r])==null?void 0:g[R],E=j==null?x:j.bind(t),tt=(h=(f=(p=this.dvtag._hooks)==null?void 0:p.inspectModule)==null?void 0:f[r])==null?void 0:h[R],kt=tt==null?E:(...pt)=>{let at=E(...pt);return tt(pt,at),at},ke=i((...pt)=>{let at;try{at=kt(...pt)}catch(ht){throw this.traceMethodError(t,R,pt,ht)}return at instanceof Promise?at.then(ht=>ht,ht=>{throw this.traceMethodError(t,R,pt,ht)}):at},"traced");t.gateway[R]=ke}if(t.plugins!=null){t.pluginFunctions={};for(let R of Object.keys(t.plugins)){t.pluginFunctions[R]=[];let x=t.pluginFunctions[R];t.plugins[R]=(...j)=>{let E=[];for(let tt of x)try{E.push(tt(...j))}catch(kt){this.tracePluginError(t,R,kt)}return E}}}}traceMethodError(t,e,r,o){let l=new lt(o);return l.addToTrace(`${t.constructor.name}.${e}(${r.map(g=>typeof g).join(",")})`),l}traceExecuteError(t){let e=new lt(t);return e.addToTrace("@execute"),this.handleSevereError(e),e}tracePluginError(t,e,r){let o=new lt(r);return o.addToTrace(`@plugin(${t.constructor.name}, '${e}')`),this.handleSevereError(o),o}traceApiError(t,e){let r=new lt(e);return r.addToTrace(`@api('${t}')`),this.handleSevereError(r),r}handleSevereError(t){for(let e of this.errorHandlers)try{e(t)}catch(r){}this.errors.length>10||this.errors.push({message:t.message,trace:t.trace})}applyErrorDecoration(t){var r;let e=(r=t.constructor.prototype.errorConfig)!=null?r:[];for(let{method:o}of e)this.errorHandlers.push(t.gateway[o])}applyPluginDecoration(t){var r;let e=(r=t.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:o,category:l,method:g}of e)this.getModule(o).pluginFunctions[l].push(t.gateway[g])}applyApiDecoration(t){var r;let e=(r=t.constructor.prototype.apiConfig)!=null?r:[];for(let{api:o,method:l}of e)Object.defineProperty(this.dvtag,o,{value:(...g)=>{var p,f;try{return t.gateway[l](...g)}catch(h){return this.traceApiError(o,h),(f=(p=Qt)[o])==null?void 0:f.call(p,...g)}},writable:!1})}applyExecuteDecoration(t){return S(this,null,function*(){var r;let e=(r=t.constructor.prototype.executeConfig)!=null?r:[];for(let{method:o}of e)try{yield t.gateway[o]()}catch(l){this.traceExecuteError(l)}})}};i(Bt,"Core");var St=Bt;var jt=[],Vt=jt;var c=i(n=>{let t=n.prototype,e=Object.getOwnPropertyNames(t).filter(r=>{var o;return r!=="constructor"&&((o=Object.getOwnPropertyDescriptor(t,r))==null?void 0:o.value)instanceof Function});t.moduleConfig=e.map(r=>({method:r})),jt.push(n)},"moduleClass"),I=i(n=>t=>{},"attachModule"),b=i((n,t)=>{var e;n.executeConfig=(e=n.executeConfig)!=null?e:[],n.executeConfig.push({method:t})},"executeMethod"),m=i((n,t)=>(e,r)=>{var o;e.pluginConfig=(o=e.pluginConfig)!=null?o:[],e.pluginConfig.push({PluggableClass:n,category:t,method:r})},"pluginMethod"),J=i(n=>(t,e)=>{var r;t.apiConfig=(r=t.apiConfig)!=null?r:[],t.apiConfig.push({api:n,method:e})},"apiMethod"),ue=i((n,t)=>{var e;n.errorConfig=(e=n.errorConfig)!=null?e:[],n.errorConfig.push({method:t})},"errorMethod");var mt=i(n=>{if(n==null)return[];let t=de(n);return t!=null?[t]:Array.isArray(n)?n.map(de).filter(e=>e!=null):[]},"parseSlotSizes"),de=i(n=>{if(n==null)return null;if(typeof n=="string")return{label:n};if(Array.isArray(n)){if(n.length===1&&typeof n[0]=="string")return{label:n[0]};if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")return{width:n[0],height:n[1]}}if(typeof n=="object"){let{label:t,width:e,height:r}=n;if(typeof e=="number"&&typeof r=="number")return{width:e,height:r};if(typeof t=="string")return{label:t}}return null},"parseSlotSize");var ge=i(n=>{try{return n.getSizes()}catch(t){return[]}},"getGptSlotSizesSafe");var bt=i(n=>{let t=n.split("/").map(o=>o.trim()).filter(o=>o.length>0);if(t.length<2)return;let e=t[0].split(",",1)[0],r=Number(e);return Number.isNaN(r)?void 0:`${r}`},"getNetworkCodeFromAdUnit");var Pt=i((n,t)=>{let e=n.getAdUnitPath(),r=bt(e);return{id:e,network:r,sizes:mt(ge(n)),position:n.getTargeting(t)[0]}},"gptSlotToAdUnit");var wt=i((n,t)=>({getTargeting:e=>[...new Set([...t(e),...n.getTargeting(e)])],setTargeting:(e,r)=>{n.setTargeting(e,r)}}),"gptSlotToTargetable");var Kt="dvp_spos";var V=class{_getAdServers(){try{return u}catch(t){return{}}}isAdServerConfigured(t){return t!=null&&t in this._getAdServers()}getAdServerConfig(t){var e;return t==null||!this.isAdServerConfigured(t)?{}:(e=this._getAdServers()[t])!=null?e:{}}getAdServerCustomTracking(t){var e;return t==null||!this.isAdServerConfigured(t)?{}:(e=this._getAdServers()[t].customTracking)!=null?e:{}}getAdServerId(t){if(!(t==null||!this.isAdServerConfigured(t)))return this._getAdServers()[t].adServerId}getAdPositionKey(t){var e,r;return t==null?Kt:(r=(e=this._getAdServers()[t])==null?void 0:e.adPositionKey)!=null?r:Kt}};i(V,"AdServers"),V=s([c],V);var xt,je=new Uint8Array(16);function zt(){if(!xt&&(xt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xt(je)}i(zt,"rng");var P=[];for(let n=0;n<256;++n)P.push((n+256).toString(16).slice(1));function ce(n,t=0){return P[n[t+0]]+P[n[t+1]]+P[n[t+2]]+P[n[t+3]]+"-"+P[n[t+4]]+P[n[t+5]]+"-"+P[n[t+6]]+P[n[t+7]]+"-"+P[n[t+8]]+P[n[t+9]]+"-"+P[n[t+10]]+P[n[t+11]]+P[n[t+12]]+P[n[t+13]]+P[n[t+14]]+P[n[t+15]]}i(ce,"unsafeStringify");var Ve=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yt={randomUUID:Ve};function Ke(n,t,e){if(Yt.randomUUID&&!t&&!n)return Yt.randomUUID();n=n||{};let r=n.random||(n.rng||zt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(let o=0;o<16;++o)t[e+o]=r[o];return t}return ce(r)}i(Ke,"v4");var $t=Ke;var et=i(()=>$t(),"uuid");var Ht=class Ht{constructor(t,e,r,o,l){this._slotStore=t;this.source=e;this.elementId=r;this.adUnit=o;this._targetable=l;a(this,"uuid");a(this,"creationTime");a(this,"_variables",new Map);a(this,"_targeting",{});a(this,"_flushedTargeting",{});this.uuid=et(),this.creationTime=Date.now()}setVariable(t,e){this._variables.set(t,e)}getVariable(t){return this._variables.get(t)}hasVariable(t){return this._variables.has(t)}clearVariable(t){this._variables.delete(t)}getUptTargetingKeys(){return[...new Set([...Object.keys(this._targeting),...this._slotStore.getUptPageTargetingKeys()])]}getUptTargetingForKey(t){var e;return[...new Set([...(e=this._targeting[t])!=null?e:[],...this._slotStore.getUptPageTargetingForKey(t)])]}getUptTargeting(){let t={};for(let e of this.getUptTargetingKeys())t[e]=this.getUptTargetingForKey(e);return t}setUptSlotTargeting(t){for(let[e,r]of Object.entries(t))this._targeting[e]=[...new Set(r)],this.flushUptTargetingToAdServer(e)}addUptSlotTargeting(t){var e;for(let[r,o]of Object.entries(t))this._targeting[r]=[...new Set([...(e=this._targeting[r])!=null?e:[],...o])],this.flushUptTargetingToAdServer(r)}getAdServerTargeting(t){var e,r;return(r=(e=this._targetable)==null?void 0:e.getTargeting(t))!=null?r:[]}flushUptTargetingToAdServer(t){var o;if(this._targetable==null)return;let e=(o=this._flushedTargeting[t])!=null?o:[],r=this.getUptTargetingForKey(t);(e.length!==r.length||r.sort().some((l,g)=>e[g]!==l))&&(this._targetable.setTargeting(t,this.getUptTargetingForKey(t)),this._flushedTargeting[t]=r)}forceFlushAllUptTargetingToAdServer(){this._targetable!=null&&(this._flushedTargeting={},this.getUptTargetingKeys().forEach(t=>this.flushUptTargetingToAdServer(t)))}validateAdServerTargeting(){let t=2;for(let e of this.getUptTargetingKeys()){let r=this.getUptTargetingForKey(e),o=this.getAdServerTargeting(e);if(r.length>o.length||r.some(l=>!o.includes(l)))return 0;o.length>r.length&&(t=1)}return t}};i(Ht,"Slot");var Tt=Ht;var T=class{constructor(){a(this,"plugins",{slotDiscovered:(t,e)=>[],slotDestroyed:t=>[]});a(this,"_slots",{});a(this,"_pageTargeting",{})}getSlot(t,e){var r;return(r=this._slots[t])==null?void 0:r[e]}getSlots(t){var e;if(t==null){let r=[];for(let o of Object.values(this._slots))r.push(...Object.values(o));return r}return Object.values((e=this._slots[t])!=null?e:{})}createSlot(t,e,r,o,l,g){var h,R;let p=this.getSlot(t,r);p!=null&&this.plugins.slotDestroyed(p);let f=new Tt(this,t,r,o,l);(R=(h=this._slots)[t])!=null||(h[t]={}),this._slots[t][r]=f;for(let x of Object.keys(this._pageTargeting))f.flushUptTargetingToAdServer(x);return g==null||g(f),this.plugins.slotDiscovered(f,e),f}getUptPageTargetingKeys(){return Object.keys(this._pageTargeting)}getUptPageTargetingForKey(t){var e;return(e=this._pageTargeting[t])!=null?e:[]}getUptPageTargeting(){let t={};for(let[e,r]of Object.entries(this._pageTargeting))t[e]=[...r];return t}setUptPageTargeting(t){for(let[e,r]of Object.entries(t))this._pageTargeting[e]=[...new Set(r)];this._flushUptPageTargetingToAdServer(Object.keys(t))}addUptPageTargeting(t){var e;for(let[r,o]of Object.entries(t))this._pageTargeting[r]=[...new Set([...(e=this._pageTargeting[r])!=null?e:[],...o])];this._flushUptPageTargetingToAdServer(Object.keys(t))}_flushUptPageTargetingToAdServer(t){for(let e of Object.values(this._slots))for(let r of Object.values(e))for(let o of t)r==null||r.flushUptTargetingToAdServer(o)}};i(T,"SlotStore"),T=s([c],T);var ze=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],Ye=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],pe=i((n,t)=>{for(let[e,r]of n)t=t.replace(e,r);return t},"replaceByRules"),me=i(n=>{let t=pe(ze,n);return pe(Ye,t)},"normalizeUrl");var fe=i(n=>n.split("?",1)[0].split("#",1)[0],"stripUrlQuery");var he=i((n,t)=>{try{let e=new URLSearchParams(n),r=e.get("ctx"),o=e.get("cmp");if(r!=null&&o!=null)return{ctx:r,cmp:o,prefetch:t,legacy:!0}}catch(e){}return null},"parseInfo"),Se=i(n=>{var t;return n.pathname!=="/signals/pub.js"?null:(t=he(n.search,!0))!=null?t:he(n.hash.substring(1),!1)},"parseLegacyPagetagUrl");var $e=1e3,He=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,_=class{constructor(){a(this,"visit");a(this,"tagInfo");a(this,"plugins",{newVisit:t=>[]});a(this,"_normalizeUrl",me)}_initialize(){this.getTagInfo(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var t;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(e){}(t=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"})}return this.tagInfo}_parseTagInfo(){let t=this.getCurrentScriptSrc();if(t==null)return null;let e=new URL(t,"https://pub.doubleverify.com"),r=e.pathname,o=He.exec(r);if(o!=null){let[,l,g]=o;return{ctx:l,cmp:g}}return Se(e)}getCurrentScriptSrc(){var t,e;return(e=(t=this.core.window.document.currentScript)==null?void 0:t.getAttribute("src"))!=null?e:null}updateVisit(t=!0){let e=this.getStrippedPageUrl();return(this.visit==null||this.visit.strippedUrl!==e)&&(this.visit={strippedUrl:e,normalizedUrl:this._normalizeUrl(this.core.window.location.href),uuid:et()},t&&this.plugins.newVisit(this.visit)),this.visit}getVisit(){var t;return(t=this.visit)!=null?t:this.updateVisit(!1)}getStrippedPageUrl(){return fe(this.core.window.location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}_installNavigationListener(){let{window:t}=this.core,e=i(()=>this.updateVisit(!0),"cb");t.navigation!=null?t.navigation.addEventListener("navigatesuccess",e):setInterval(e,$e)}};i(_,"Context"),s([b],_.prototype,"_initialize",1),_=s([c],_);var Wt=class Wt{constructor(){a(this,"pending",[]);a(this,"flushing",!1)}push(t){this.pending.push(t),this.flush()}flush(){return S(this,null,function*(){var e;if(this.flushing)return;this.flushing=!0;let t=this.pending.shift();for(;t!=null;){try{yield t.promise}catch(r){}try{(e=t.callback)==null||e.call(t)}catch(r){}t=this.pending.shift()}this.flushing=!1})}};i(Wt,"AsyncQueue");var Ct=Wt;var A=class{constructor(){a(this,"plugins",{adRequestQueued:t=>[],adRequestTimedOut:t=>[],adRequestBeforeRelease:t=>[],adRequestCompleted:t=>[]});a(this,"queue",new Ct);a(this,"adRequestCounter",0)}_queueAdRequest(t={}){var l,g;let e={index:this.adRequestCounter++,status:"queued",timeoutValue:(l=t.timeout)!=null?l:0,onDvtagReadyCalled:(g=t.timestamp)!=null?g:0,waitingStarted:new Date().getTime(),internal:t.internal};this.core.get(_).updateVisit(),this.plugins.adRequestQueued(e);let r=t.callback;r===void 0?t.callback=()=>{}:r===null?e.status="tag-timeout":t.callback=()=>{e.status="queue-timeout",e.callbackCalled=new Date().getTime(),t.callback=null,this.plugins.adRequestTimedOut(e);try{r()}catch(p){}};let o=i(()=>{if(t.callback!=null){t.callback=null,e.status="success",e.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(e);try{r==null||r()}catch(p){}}else this.plugins.adRequestBeforeRelease(e);e.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(e)},"onAsyncOperationsCompleted");this.queue.push({callback:o,adRequest:e})}delayAdRequests(t){this.queue.push({promise:t})}};i(A,"AdRequestQueue"),s([J("queueAdRequest")],A.prototype,"_queueAdRequest",1),A=s([c],A);var K=class{getShortCommitId(){return"9c3218b"}getBuildTimestamp(){return 1733378429520}getAuthToken(){return"rgLxyQNBRj45eDR1o0f1U0xOd67Mjbqwt2d1mw8BAnilPYhIunRHTk6rAZMzVYMngTjxW2bS3h1Az0B59W895jqLQ5CuQawlwUMczjXLRWRCIcnWaFvJ2GwIvM0nGxkgPz0d9bfU9GpeuX2eiFFt0OM="}};i(K,"DefinedVariables"),K=s([c],K);var D=class{constructor(){a(this,"cache",{})}_performFetchJson(t,e){return S(this,null,function*(){let r=t;if(e!=null&&e.authToken){let g=this.core.get(K).getAuthToken(),p=new URL(t);p.searchParams.set("token",g),r=p.href}let o=yield this.core.window.fetch(r);return{json:yield o.json(),headers:o.headers}})}fetchJson(t,e){return S(this,null,function*(){let r=this.cache[t];return r==null&&(r=this._performFetchJson(t,e).then(o=>o.json),this.cache[t]=r),r})}};i(D,"Fetch"),D=s([c],D);var Rt=["BSC","ABS","CCT","CBS"],Xt=["IDS"],At=["VLP","TVP"],Xe=[...Rt,...Xt,...At],ci=[...Rt,...Xt,...At].filter(n=>n!=="CCT"),Te=i(n=>Xe.includes(n.toUpperCase()),"isSignal"),Re=i(n=>At.includes(n.toUpperCase()),"isSlotSignal"),Ae=i(n=>Xt.includes(n.toUpperCase()),"isUserSignal"),ye=i(n=>Rt.includes(n.toUpperCase()),"isPageSignal");var Ut=i(n=>n==null?"":`@${n}`,"getPositionSuffix");var Je=/^(\d+)x(\d+)$/,_e=i(n=>n==="all"?[]:n.split(",").map(t=>{let e=t.match(Je);return e==null?{label:t}:{width:parseInt(e[1],10),height:parseInt(e[2],10)}}),"stringToSlotSizes"),Jt=i(n=>n.length===0?"all":n.map(({width:t,height:e,label:r})=>r!=null?r:`${t}x${e}`).join(","),"slotSizesToString"),Ee=i(n=>n==null?"":n.length>0&&n.every(({label:r})=>r==null)?Jt(n):"","slotSizesToStringIfSpecific");var Ze="https://pub.doubleverify.com/dvtag/signals/",M=class{_getBaseUrl(t){let e=this.core.get(_),{ctx:r,cmp:o}=e.getTagInfo(),l=e.getNormalizedPageUrl();try{l=new URL(l).origin}catch(p){}let g=new URL(t,Ze);return g.searchParams.set("ctx",r),g.searchParams.set("cmp",o),g.searchParams.set("url",l),g}getUserTargetingUrl(t){let e=this._getBaseUrl("ids/pub.json");return t.includes("IDS")&&e.searchParams.set("ids","1"),e.href}getPageTargetingUrl(t,e){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",e),t.includes("BSC")&&r.searchParams.set("bsc","1"),t.includes("ABS")&&r.searchParams.set("abs","1"),t.includes("CBS")&&r.searchParams.set("cbs","1"),t.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(t,e){var l;let r=this._getBaseUrl("vlp/pub.json");t.includes("VLP")&&r.searchParams.set("vlp","1"),t.includes("TVP")&&r.searchParams.set("tvp","1");let o=0;for(let g of e){let{id:p,position:f,sizes:h}=(l=g.adUnit)!=null?l:{},R=p+Ut(f);r.searchParams.set(`slot-${o++}-${R}`,Ee(h))}return r.href}};i(M,"SignalsUrlBuilder"),M=s([c],M);var rt=class{constructor(){a(this,"cache",{})}_fetchFreshSignals(t,e){return S(this,null,function*(){if(!e.some(ye))return{};let r=this.core.get(M).getPageTargetingUrl(e,t),o;try{o=yield this.core.get(D).fetchJson(r,{authToken:!0})}catch(l){return{}}return o instanceof Object?o:{}})}fetchSignals(t,e=3){return S(this,null,function*(){let r=this.core.get(_),o=r.getNormalizedPageUrl(),l=r.getStrippedPageUrl();this.cache[l]==null&&(this.cache[l]=this._fetchFreshSignals(o,t));let g=yield this.cache[l];return this.core.get(_).getStrippedPageUrl()!==l&&e>0?this.fetchSignals(t,e-1):g})}};i(rt,"PageSignals"),rt=s([c],rt);var nt=class{constructor(){a(this,"cache",{});a(this,"pendingSlots",[]);a(this,"pendingBulkRequest",null)}_scheduleBulkRequest(t){return S(this,null,function*(){yield Promise.resolve();let e=this.core.get(M).getSlotTargetingUrl(t,this.pendingSlots);this.pendingSlots=[],this.pendingBulkRequest=null;let r;try{r=yield this.core.get(D).fetchJson(e,{authToken:!0})}catch(o){return[]}return r})}_fetchFreshSignals(t,e){return S(this,null,function*(){if(!e.some(Re))return{};let r=this.pendingSlots.push(t)-1;this.pendingBulkRequest==null&&(this.pendingBulkRequest=this._scheduleBulkRequest(e));let l=(yield this.pendingBulkRequest)[r];return l instanceof Object?l:{}})}_getCacheKey(t){var p,f;let{id:e,position:r,sizes:o}=(p=t.adUnit)!=null?p:{},l=e+Ut(r),g=(f=o==null?void 0:o.map(h=>{var R;return(R=h.label)!=null?R:`${h.width}x${h.height}`}).sort().join(","))!=null?f:"";return`${l}#${g}`}fetchSignals(t,e){return S(this,null,function*(){let r=this._getCacheKey(t);return this.cache[r]==null&&(this.cache[r]=this._fetchFreshSignals(t,e)),this.cache[r]})}};i(nt,"SlotSignals"),nt=s([c],nt);var ot=class{constructor(){a(this,"cache")}_fetchFreshSignals(t){return S(this,null,function*(){if(!t.some(Ae))return{};let e=this.core.get(M).getUserTargetingUrl(t),r;try{r=yield this.core.get(D).fetchJson(e,{authToken:!0})}catch(o){return{}}return r instanceof Object?r:{}})}fetchSignals(t){return S(this,null,function*(){return this.cache==null&&(this.cache=this._fetchFreshSignals(t)),this.cache})}};i(ot,"UserSignals"),ot=s([c],ot);var y=class{constructor(){a(this,"plugins",{getEnabledSignals:()=>[],userTargetingUpdated:t=>[],pageTargetingUpdated:t=>[],slotTargetingUpdated:(t,e)=>[]});a(this,"dataForMigrationTracking",{userTargeting:{},pageTargeting:{},slotTargeting:new Map})}getEnabledSignals(){return this.plugins.getEnabledSignals()}getDataForMigrationTracking(){return this.dataForMigrationTracking}_initialize(){this.getUserTargeting(),this.getPageTargeting()}_onAdRequestQueued(){this.getPageTargeting()}_onSlotDiscovered(t){this.getSlotTargeting(t)}getUserTargeting(){return S(this,null,function*(){let t=this._fetchUserTargeting();return this.core.get(A).delayAdRequests(t),t})}getPageTargeting(){return S(this,null,function*(){let t=this._fetchPageTargeting();return this.core.get(A).delayAdRequests(t),t})}getSlotTargeting(t){return S(this,null,function*(){let e=this._fetchSlotTargeting(t);return this.core.get(A).delayAdRequests(e),e})}_fetchUserTargeting(){return S(this,null,function*(){let t=this.core.get(T),e=yield this.core.get(ot).fetchSignals(this.getEnabledSignals());return t.setUptPageTargeting(e),this.dataForMigrationTracking.userTargeting=e,this.plugins.userTargetingUpdated(e),e})}_fetchPageTargeting(){return S(this,null,function*(){let t=this.core.get(T),e=yield this.core.get(rt).fetchSignals(this.getEnabledSignals());return t.setUptPageTargeting(e),this.dataForMigrationTracking.pageTargeting=e,this.plugins.pageTargetingUpdated(e),e})}_fetchSlotTargeting(t){return S(this,null,function*(){let e=yield this.core.get(nt).fetchSignals(t,this.getEnabledSignals());return t.setUptSlotTargeting(e),this.dataForMigrationTracking.slotTargeting.set(t,e),this.plugins.slotTargetingUpdated(t,e),e})}};i(y,"Signals"),s([b],y.prototype,"_initialize",1),s([m(A,"adRequestQueued")],y.prototype,"_onAdRequestQueued",1),s([m(T,"slotDiscovered")],y.prototype,"_onSlotDiscovered",1),y=s([c],y);var k=class{constructor(){a(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){return this.getPq().PTS}setApi(t){let e=this.getPq();e!=null&&(e.init=()=>{},e.loadSignals=t.loadSignals,e.loadSignalsForSlots=t.loadSignalsForSlots,e.getTargeting=t.getTargeting)}_pushToDvtagCmd(...t){var e;this.core.dvtag.cmd=(e=this.core.dvtag.cmd)!=null?e:[],this.core.dvtag.cmd.push(...t)}_initialize(){var r,o;this.core.window.PQ=(r=this.core.window.PQ)!=null?r:{};let t=this.core.window.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(o=t.PTS)!=null?o:{};let e=t.cmd;return t.cmd={push:l=>this._pushToDvtagCmd(l)},Array.isArray(e)&&this._pushToDvtagCmd(...e),t}};i(k,"LegacyPq"),k=s([c],k);var ve=i(n=>{var r,o,l;let t=et(),e={id:(o=(r=n.adUnitPath)!=null?r:n.invCode)!=null?o:n.tagId,sizes:mt(_e((l=n.sizes)!=null?l:"all")),position:n.position};return{elementId:t,adUnit:e}},"parseLegacyAdUnit");var be=i((n,t)=>{var o;let e=(o=n.IDS)==null?void 0:o[0];if(e==null)return;let r=parseInt(e);isNaN(r)||(t.IDS=r)},"setUserTargetingOnPts"),Pe=i((n,t)=>{for(let e of Rt)n[e]!=null&&(t[e]=n[e])},"setPageTargetingOnPts"),we=i((n,t,e)=>{var p,f,h,R,x,j;let{adUnit:r}=n;if((r==null?void 0:r.id)==null)return;let o=r.id,l=Jt((p=r.sizes)!=null?p:[]),g=r.position;for(let E of At){let tt=t[E];tt!=null&&((f=e[E])!=null||(e[E]={}),(R=(h=e[E])[o])!=null||(h[o]={}),e[E][o][l]=tt[0],g!=null&&((j=(x=e[E][o])[g])!=null||(x[g]={}),e[E][o][g][l]=tt[0]))}},"setSlotTargetingOnPts");var tr="legacy-api",xe="gpt",z=class extends v{_initialize(){this.core.get(k).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}_setUserTargetingOnPts(t){let e=this.core.get(k).getPts();be(t,e)}_setPageTargetingOnPts(t){let e=this.core.get(k).getPts();Pe(t,e)}_setSlotTargetingOnPts(t,e){let r=this.core.get(k).getPts();we(t,e,r)}loadSignals(t,e){return S(this,null,function*(){yield this._onDvtagReady("loadSignals",e)})}loadSignalsForSlots(t,e,r){return S(this,null,function*(){let o=this.core.get(y),l=this.core.get(T);for(let p of t){let f=p.getSlotElementId(),h=l.getSlot(xe,f);if(h==null){let R=this.core.get(V).getAdPositionKey(p.getAdUnitPath());h=l.createSlot(xe,0,f,Pt(p,R),wt(p,x=>this._getPubAdsTargeting(x)))}o.getSlotTargeting(h)}let g=typeof e=="function"?e:r;yield this._onDvtagReady("loadSignalsForSlots",g)})}getTargeting(t,e){return S(this,null,function*(){var g;let r=this.core.get(y),o=this.core.get(T);for(let p of(g=t.adUnits)!=null?g:[]){let{elementId:f,adUnit:h}=ve(p),R=o.createSlot(tr,0,f,h);r.getSlotTargeting(R)}let l=i(()=>e==null?void 0:e(void 0,this.core.get(k).getPts()),"callback");yield this._onDvtagReady("getTargeting",l)})}_getPubAdsTargeting(t){var e,r,o;return(o=(r=(e=this.core.window.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e).getTargeting(t))!=null?o:[]}_onDvtagReady(t,e){return S(this,null,function*(){yield new Promise(r=>{this.core.window.dvtag.queueAdRequest({callback:()=>{try{e==null||e()}catch(o){}r()},timestamp:new Date().getTime(),timeout:750,internal:!0})})})}};i(z,"LegacyLayer"),s([b],z.prototype,"_initialize",1),s([m(y,"userTargetingUpdated")],z.prototype,"_setUserTargetingOnPts",1),s([m(y,"pageTargetingUpdated")],z.prototype,"_setPageTargetingOnPts",1),s([m(y,"slotTargetingUpdated")],z.prototype,"_setSlotTargetingOnPts",1),z=s([c],z);var ut=class extends v{_getEnabledSignals(){return"IDS"}};i(ut,"SignalsIds"),s([m(y,"getEnabledSignals")],ut.prototype,"_getEnabledSignals",1),ut=s([c],ut);var dt=class extends v{_getEnabledSignals(){return"BSC"}};i(dt,"SignalsBsc"),s([m(y,"getEnabledSignals")],dt.prototype,"_getEnabledSignals",1),dt=s([c],dt);var gt=class extends v{_getEnabledSignals(){return"VLP"}};i(gt,"SignalsVlp"),s([m(y,"getEnabledSignals")],gt.prototype,"_getEnabledSignals",1),gt=s([c],gt);var ct=class extends v{_getEnabledSignals(){return"TVP"}};i(ct,"SignalsTvp"),s([m(y,"getEnabledSignals")],ct.prototype,"_getEnabledSignals",1),ct=s([c],ct);var Zt=class Zt{set(t,e){t.setVariable(this,e)}get(t){return t.getVariable(this)}getOrDefault(t,e){return t.hasVariable(this)?this.get(t):(this.set(t,e),e)}getOrDefaultFromFunction(t,e){if(t.hasVariable(this))return this.get(t);let r=e();return this.set(t,r),r}delete(t){t.clearVariable(this)}};i(Zt,"SlotVariable");var Q=Zt;var C=class{getWindow(){return this.core.window}getDocument(){return this.getWindow().document}getUserAgent(){var t,e;return(e=(t=this.getWindow().navigator)==null?void 0:t.userAgent)!=null?e:""}getPageUrl(){var t,e;return(e=(t=this.getWindow().location)==null?void 0:t.href)!=null?e:""}getHostname(){return new URL(this.getPageUrl()).hostname}getNavigator(){return this.getWindow().navigator}getPerformance(){var t;return(t=this.getWindow().performance)!=null?t:{}}getPerformanceTimeMs(){var t,e,r;return Math.floor((r=(e=(t=this.getPerformance()).now)==null?void 0:e.call(t))!=null?r:null)}isInQuirksMode(){return this.getDocument().compatMode==="BackCompat"}};i(C,"Environment"),C=s([c],C);var Ce=i((n,t=!0)=>{let e=document.createElement("script");return e.setAttribute("src",n),t&&e.setAttribute("async",""),e},"createScriptElement");var te=i(n=>{try{return n&&(n.contentDocument||n.contentWindow&&n.contentWindow.document||frames&&frames[n.name]&&frames[n.name].document)}catch(t){return null}},"getIframeDocument");var Ue=i((n,t)=>{try{if(te(n)===null)return!0;if(n.src===""||n.src==="about:blank")return!1;let e=new URL(n.src),r=new URL(t.location.href);return e.origin!==r.origin}catch(e){return!0}},"isCrossOriginIframe");var er="google_ads_iframe_",Oe=i(n=>{if(n==null)return null;let t=n.querySelectorAll(`iframe[id^="${er}"]`);return t.length===1?t[0]:null},"lookupGptIframe");var qe=i((n,t)=>{var p;let e=n.document.getElementById(t);if(e==null)return{element:null};let r=Oe(e);if(r==null)return{element:e};if(Ue(r,n))return{element:r};let l=te(r),g=(p=l==null?void 0:l.body)!=null?p:null;return g==null?{element:r}:{element:g,parentIframe:r}},"getGptAdContainer");var it=class{constructor(){a(this,"_getGptAdContainer",qe)}getAdContainer(t){let e=this.core.get(C).getWindow();return t.source==="gpt"?this._getGptAdContainer(e,t.elementId):{element:e.document.getElementById(t.elementId)}}};i(it,"AdLocator"),it=s([c],it);var U=class{constructor(){a(this,"adEmpty",new Q);a(this,"adRequestInFlight",new Q);a(this,"nonEmptyAdResponses",new Q);a(this,"plugins",{adRequested:t=>[],adRequestedOrInferred:t=>[],adRendered:(t,e,r)=>[],adRemoved:t=>[]})}setAdRequested(t){this.adRequestInFlight.set(t,!0),this.plugins.adRequested(t),this.plugins.adRequestedOrInferred(t)}setAdRendered(t,e){this.adRequestInFlight.get(t)!==!0&&this.plugins.adRequestedOrInferred(t),this.setAdRemoved(t),this.adEmpty.set(t,!1),this.adRequestInFlight.set(t,!1),e!=null&&this.nonEmptyAdResponses.set(t,this.nonEmptyAdResponses.getOrDefault(t,0)+1);let r=this.core.get(it).getAdContainer(t);this.plugins.adRendered(t,e,r)}setAdRemoved(t){this.adEmpty.get(t)===!1&&(this.adEmpty.set(t,!0),this.plugins.adRemoved(t))}getNonEmptyAdRenderedCount(t){return this.nonEmptyAdResponses.getOrDefault(t,0)}};i(U,"AdServerHub"),U=s([c],U);var Y=class{getPubAds(){var e,r;let t=this.core.get(C).getWindow();try{return(r=(e=t.googletag)==null?void 0:e.pubads)==null?void 0:r.call(e)}catch(o){return}}onPubAdsReady(t){var o,l,g,p;let e=this.core.get(C).getWindow();e.googletag=(o=e.googletag)!=null?o:{},e.googletag.cmd=(l=e.googletag.cmd)!=null?l:[];let r=this.getPubAds();if(r!=null)t(r);else try{(p=(g=e.googletag.cmd)==null?void 0:g.push)==null||p.call(g,()=>{r=this.getPubAds(),r!=null&&t(r)})}catch(f){}}};i(Y,"GoogletagPubAds"),Y=s([c],Y);var O=class{constructor(){a(this,"gptReference",new Q);a(this,"plugins",{slotDiscovered:(t,e)=>[],slotDestroyed:t=>[]});a(this,"_gptSlotToTargetable",wt)}_scanForSlots(){this.core.get(Y).onPubAdsReady(t=>{t.getSlots().map(e=>this.maybeDiscoverSlot(e,0))})}maybeDiscoverSlot(t,e){let r=this.core.get(T).getSlot("gpt",t.getSlotElementId());return r==null||this.gptReference.get(r)!==t?this._createSlot(t,e):r}_createSlot(t,e){let r=t.getSlotElementId(),o=t.getAdUnitPath(),l=bt(o),g=this.core.get(V).getAdPositionKey(l),p=Pt(t,g),f=this._gptSlotToTargetable(t,R=>{var x,j,E;return(E=(j=(x=this.core.window.googletag)==null?void 0:x.pubads)==null?void 0:j.call(x).getTargeting(R))!=null?E:[]});return this.core.get(T).createSlot("gpt",e,r,p,f,R=>this.gptReference.set(R,t))}_onSlotDiscovered(t,e){t.source==="gpt"&&this.plugins.slotDiscovered(t,e)}_onSlotDestroyed(t){t.source==="gpt"&&this.plugins.slotDestroyed(t)}};i(O,"GoogletagSlots"),s([b,m(A,"adRequestQueued")],O.prototype,"_scanForSlots",1),s([m(T,"slotDiscovered")],O.prototype,"_onSlotDiscovered",1),s([m(T,"slotDestroyed")],O.prototype,"_onSlotDestroyed",1),O=s([c],O);var $=class{constructor(){a(this,"plugins",{adRemoved:t=>[]})}_monitorAdRemoval(t){if(t.source!=="gpt")return;let e=this.core.get(C).getDocument().getElementById(t.elementId);if(e==null)return;new MutationObserver(o=>{let l=o.length,g=[...o].reverse(),p=0,f=e.children.length;for(let h of g){if(f===0){this.plugins.adRemoved(t);break}if(p===l-1)break;let R=h.removedNodes.length-h.addedNodes.length;f+=R,p++}}).observe(e,{childList:!0})}_onSlotDestroyed(t){this.plugins.adRemoved(t)}};i($,"GoogletagAdRemoved"),s([m(O,"slotDiscovered")],$.prototype,"_monitorAdRemoval",1),s([m(O,"slotDestroyed")],$.prototype,"_onSlotDestroyed",1),$=s([c],$);var qt=i(n=>{if(typeof n=="string"||Array.isArray(n)&&n.length===2&&n.every(t=>typeof t=="number"))return n},"cleanSizeInput");var q=i(n=>{if(typeof n=="string")return n;if(typeof n=="number")return`${n}`},"cleanStringInput");var H=class{constructor(){a(this,"plugins",{adRequested:t=>[],adRendered:(t,e)=>[]})}_initialize(){this.core.get(Y).onPubAdsReady(t=>{t.addEventListener("slotRequested",e=>{let r=this.core.get(O).maybeDiscoverSlot(e.slot,1);this.plugins.adRequested(r)}),t.addEventListener("slotRenderEnded",e=>{let r=this.core.get(O).maybeDiscoverSlot(e.slot,2);if(e.isEmpty){this.plugins.adRendered(r,null);return}let o={advertiserId:q(e.advertiserId),campaignId:q(e.campaignId),creativeId:q(e.creativeId),lineItemId:q(e.lineItemId),renderedSize:qt(e.size)};this.plugins.adRendered(r,o)})})}};i(H,"GoogletagEvents"),s([b],H.prototype,"_initialize",1),H=s([c],H);var G=class{_onAdRequested(t){this.core.get(U).setAdRequested(t)}_onAdRendered(t,e){this.core.get(U).setAdRendered(t,e)}_onAdRemoved(t){this.core.get(U).setAdRemoved(t)}};i(G,"Googletag"),s([m(H,"adRequested")],G.prototype,"_onAdRequested",1),s([m(H,"adRendered")],G.prototype,"_onAdRendered",1),s([m($,"adRemoved")],G.prototype,"_onAdRemoved",1),G=s([c],G);var st=i(()=>{var n,t,e;return Math.floor((e=(t=(n=window.performance)==null?void 0:n.now)==null?void 0:t.call(n))!=null?e:Date.now())},"perfNowOrDateNow");var re=class re{constructor(){a(this,"_firstQueuedAdRequest",1/0);a(this,"_lastQueuedAdRequest",-1/0);a(this,"_firstReleasedAdRequest",1/0);a(this,"_lastReleasedAdRequest",-1/0);a(this,"_lastReleasedAdRequestTime",null);a(this,"_hasBeenSuccessful",!1)}setAdRequestQueued(t){this._firstQueuedAdRequest=Math.min(this._firstQueuedAdRequest,t),this._lastQueuedAdRequest=Math.max(this._lastQueuedAdRequest,t)}setAdRequestReleased(t){this._firstReleasedAdRequest=Math.min(this._firstReleasedAdRequest,t),this._lastReleasedAdRequest=Math.max(this._lastReleasedAdRequest,t),this._lastReleasedAdRequestTime=st()}getLastQueuedAdRequest(){return Number.isFinite(this._lastQueuedAdRequest)?this._lastQueuedAdRequest:null}getLastReleasedAdRequest(){return Number.isFinite(this._lastReleasedAdRequest)?this._lastReleasedAdRequest:null}getLastReleasedAdRequestTime(){return this._lastReleasedAdRequestTime}getLastSuccessfulAdRequest(){let t=Math.max(this._firstQueuedAdRequest,this._firstReleasedAdRequest),e=Math.min(this._lastQueuedAdRequest,this._lastReleasedAdRequest);return e<t?null:e}getPreviouslySuccessful(){return this._hasBeenSuccessful}markAdServerAdRequest(){this.getLastSuccessfulAdRequest()!=null&&(this._hasBeenSuccessful=!0),this._firstQueuedAdRequest=1/0,this._lastQueuedAdRequest=-1/0,this._firstReleasedAdRequest=1/0,this._lastReleasedAdRequest=-1/0,this._lastReleasedAdRequestTime=null}};i(re,"SlotAdRequestTracker");var It=re;var Dt=(g=>(g.UNKNOWN="UNKNOWN",g.SEEN="SEEN",g.NOT_READY="NOT_READY",g.POSSIBLE_TIMEOUT="POSSIBLE_TIMEOUT",g.PREV_READY="PREV_READY",g.READY="READY",g))(Dt||{});var ne="dv_upt_slot_ready",rr=["https://securepubads.g.doubleclick.net/gampad/ads?","https://pagead2.googlesyndication.com/gampad/ads?"],nr=750,w=class{constructor(){a(this,"plugins",{onSlotRequested:()=>[],onSlotRequestValidated:()=>[]});a(this,"validateAdRequests",!1);a(this,"lastAdRequestQueued",null);a(this,"lastAdRequestReleased",null);a(this,"state",{adRequestTracker:new Q,triggered:new Q})}_getSlotAdRequestTracker(t){return this.state.adRequestTracker.getOrDefaultFromFunction(t,()=>new It)}_onAdRequestQueued({index:t}){this.lastAdRequestQueued=t;for(let e of this.core.get(T).getSlots())this._getSlotAdRequestTracker(e).setAdRequestQueued(t),this.state.triggered.set(e,!1)}_onAdRequestBeforeRelease({index:t}){this.lastAdRequestReleased=t;for(let e of this.core.get(T).getSlots())this._getSlotAdRequestTracker(e).setAdRequestReleased(t),this.validateAdRequests&&e.setUptSlotTargeting({[ne]:["1"]})}_onSlotDiscovered(t,e){e===0&&this.lastAdRequestQueued!=null&&this._getSlotAdRequestTracker(t).setAdRequestQueued(this.lastAdRequestQueued)}_determineReadyState(t){let e=this._getSlotAdRequestTracker(t),r=e.getLastQueuedAdRequest(),o=e.getLastSuccessfulAdRequest(),l=e.getPreviouslySuccessful();return o!=null?"READY":l?"PREV_READY":r!=null?"NOT_READY":Date.now()-t.creationTime>nr?"SEEN":"UNKNOWN"}getSlotReadyStateOnAdServerAdRequest(t){let e=this._determineReadyState(t);if(e==="READY"){if(this.state.triggered.get(t)===!0)return{readyState:"PREV_READY"};this.state.triggered.set(t,!0);let r=this._getSlotAdRequestTracker(t).getLastReleasedAdRequestTime();return{readyState:e,readyFor:st()-r}}return{readyState:e}}_onSlotRequested(t){let{readyState:e,readyFor:r}=this.getSlotReadyStateOnAdServerAdRequest(t);this._getSlotAdRequestTracker(t).markAdServerAdRequest(),this.validateAdRequests&&t.setUptSlotTargeting({[ne]:["0"]}),this.plugins.onSlotRequested(t,e,r)}enableAdRequestValidation(){if(!this.validateAdRequests)try{let t=this._processResourceRequest.bind(this);new PerformanceObserver(r=>r.getEntries().forEach(t)).observe({type:"resource"}),this.validateAdRequests=!0}catch(t){}}_processResourceRequest(t){var e,r,o;try{if(rr.every(p=>!t.name.startsWith(p)))return;let g=(r=(e=new URL(t.name).searchParams.get("prev_scp"))==null?void 0:e.split("|"))!=null?r:[];for(let p of g){let h=((o=new URLSearchParams(p).get(ne))==null?void 0:o[0])==="1";this.plugins.onSlotRequestValidated(h)}}catch(l){}}};i(w,"SlotReadinessTracker"),s([m(A,"adRequestQueued")],w.prototype,"_onAdRequestQueued",1),s([m(A,"adRequestBeforeRelease"),m(A,"adRequestTimedOut")],w.prototype,"_onAdRequestBeforeRelease",1),s([m(T,"slotDiscovered")],w.prototype,"_onSlotDiscovered",1),s([m(U,"adRequested")],w.prototype,"_onSlotRequested",1),w=s([c],w);var oe="__dvtag_debug_mode",Ie="1",N=class{constructor(){a(this,"enabled",!1);a(this,"debugScriptLoaded",i(t=>{},"debugScriptLoaded"));a(this,"debugScriptLoadedPromise",new Promise(t=>{this.debugScriptLoaded=t}))}_initialize(){try{this.enabled=window===window.top&&this.core.window.sessionStorage.getItem(oe)===Ie}catch(t){}this.enabled&&(this.core.get(A).delayAdRequests(this.debugScriptLoadedPromise),this._loadDebugScript())}_toggleDebugMode(){return S(this,null,function*(){this.enabled?this.core.window.sessionStorage.removeItem(oe):this.core.window.sessionStorage.setItem(oe,Ie),this.core.window.location.reload()})}_onDebugScriptLoaded(){this.debugScriptLoaded(void 0)}_loadDebugScript(){return S(this,null,function*(){let{ctx:t,cmp:e}=this.core.get(_).getTagInfo(),{document:r}=this.core.window,o=Ce(`https://pub.doubleverify.com/dvtag/${t}/${e}/debug.js`,!0);r.readyState==="loading"&&(yield new Promise(l=>r.addEventListener("DOMContentLoaded",()=>l(void 0)))),r.head.appendChild(o)})}_onAdRequestEvent(t){var e;(e=window.dvtagDebug)==null||e.adRequestEvent(t)}};i(N,"DebugScriptLoader"),s([b],N.prototype,"_initialize",1),s([J("toggleDebugMode")],N.prototype,"_toggleDebugMode",1),s([J("_debugScriptLoaded")],N.prototype,"_onDebugScriptLoaded",1),s([m(A,"adRequestQueued"),m(A,"adRequestBeforeRelease"),m(A,"adRequestTimedOut")],N.prototype,"_onAdRequestEvent",1),N=s([I(w),c],N);var ie="qt_loaded",Mt="pts_pid",De="pts_sid";var se=i(n=>[...new Set(n.filter(Te).map(t=>t.toLowerCase()))],"getGreenlightSignal");var W=class extends v{_autoInsertPageId(t){this.core.get(T).setUptPageTargeting({[Mt]:[t.uuid]})}_autoInsertSlotId(t){t.setUptSlotTargeting({[De]:[t.uuid]})}_autoInsertGlobalTargeting(t){this.core.get(T).addUptPageTargeting({[ie]:se(Object.keys(t))})}_autoInsertSlotTargeting(t,e){t.addUptSlotTargeting({[ie]:se(Object.keys(e))})}};i(W,"SignalsAutoInsertion"),s([m(_,"newVisit")],W.prototype,"_autoInsertPageId",1),s([m(T,"slotDiscovered")],W.prototype,"_autoInsertSlotId",1),s([m(y,"userTargetingUpdated"),m(y,"pageTargetingUpdated")],W.prototype,"_autoInsertGlobalTargeting",1),s([m(y,"slotTargetingUpdated")],W.prototype,"_autoInsertSlotTargeting",1),W=s([c,I(G),I(N)],W);var or="https://vtrk.doubleverify.com",Me="dvtag",ir=1,sr=1,L=class{constructor(){a(this,"sharedDataPoints")}_onAdRequestCompleted(t){if(t.index!==0)return;let{timeoutValue:e,onDvtagReadyCalled:r,callbackCalled:o}=t,l=o!=null?o-r:e;this.fireEvent("ad-request",{cd111:t.status,cm106:t.index,cm107:l,cd112:t.internal?"legacy":"modern"},{sampleInterval:sr})}_handleError(t){this.fireEvent("log",{cd111:"error",cd112:t.message,cd113:t.trace.join("=>")},{sampleInterval:ir})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let t=this.core.get(_),e=this.core.get(K),r=this.core.get(C),{ctx:o,cmp:l,legacy:g}=t.getTagInfo(),p=r.getHostname(),f=t.getVisitUuid(),h=e.getShortCommitId();this.sharedDataPoints={cd102:h,cd103:"",cd107:f,cd109:g?"legacy":"modern",cd108:"",cd105:o,cd106:l,cd104:p}}return this.sharedDataPoints}fireEvent(t,e,{sampleInterval:r=1,trackerUuid:o=et(),spoofWrapperId:l=!1}={}){if(Math.random()>=1/r)return;e=Ft(Et(Et({},e),this._getSharedDataPoints()),{cd101:t,cm101:r});let g=Ft(Et({ec:Me,ea:e.cd101,ctx:l?Me:e.cd105,cmp:e.cd106},e),{cid:o,t:"event",v:1,z:o,cd160:o}),p=new URL(or);for(let[f,h]of Object.entries(g))h!=null&&p.searchParams.set(f,`${h}`);this._sendBeacon(p.href)}_sendBeacon(t){try{typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(t):new Image().src=t}catch(e){}}};i(L,"Events"),s([m(A,"adRequestCompleted")],L.prototype,"_onAdRequestCompleted",1),s([ue],L.prototype,"_handleError",1),L=s([c],L);var ar=Mt,B=class{constructor(){a(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){for(let t of this.core.get(T).getSlots())t.getAdServerTargeting(ar).length===0&&(t.forceFlushAllUptTargetingToAdServer(),this.restoreCount+=1)}};i(B,"TargetingRestorer"),s([m(A,"adRequestQueued")],B.prototype,"_restoreTargeting",1),B=s([c],B);var ae=class ae{constructor(){a(this,"total",0);a(this,"dataPoints",0)}push(t){return this.total+=t,this.dataPoints+=1,this}get(){return this.total/this.dataPoints}getRounded(){return Math.round(this.get())}};i(ae,"Average");var _t=ae;var lr="implcheck",ur=1e-4,dr=5e3,gr=5,F=class{constructor(){a(this,"enabled",!1);a(this,"totalInternalAdRequestQueuedCount",0);a(this,"totalAdRequestsCompletedCount",0);a(this,"totalSlotsRequestedCount",0);a(this,"totalSlotsRequestedOkCount",0);a(this,"totalTimeoutCount",0);a(this,"trackersSent",0);a(this,"totalValidatedAdServerRequests",{ok:0,notOk:0});a(this,"lastOnDvtagReadyCall",NaN);a(this,"slotReqAvgTimeSinceCall",new _t);a(this,"slotReqAvgTimeSinceDone",new _t);a(this,"batch",null)}isDebugForceEnabled(){return!1}_initialize(){this.enabled=this.core.get(F).isDebugForceEnabled()||Math.random()<ur,this.enabled&&this.core.get(w).enableAdRequestValidation()}_onAdRequestQueued(t){this.enabled&&(this.lastOnDvtagReadyCall=st(),t.internal&&(this.totalInternalAdRequestQueuedCount+=1))}_onAdRequestCompleted(t){this.enabled&&(this.totalAdRequestsCompletedCount+=1,(t.status==="tag-timeout"||t.status==="queue-timeout")&&(this.totalTimeoutCount+=1))}_onSlotRequested(t,e,r){if(!this.enabled)return;let o=this._getOrStartBatch();this.totalSlotsRequestedCount+=1,e==="READY"&&(this.totalSlotsRequestedOkCount+=1),o.slots[e].push(t.elementId),r!=null&&(this.slotReqAvgTimeSinceDone.push(r),this.slotReqAvgTimeSinceCall.push(st()-this.lastOnDvtagReadyCall));let l=t.validateAdServerTargeting();l===1?o.targeting.extendedCount+=1:l===0&&(o.targeting.reducedCount+=1)}_onSlotRequestValidated(t){t?this.totalValidatedAdServerRequests.ok+=1:this.totalValidatedAdServerRequests.notOk+=1}_sendTracker(){let t=this.core.get(B).getRestoreCount(),{slots:e,targeting:r,start:o}=this._getOrStartBatch(),l={cd110:e.READY.join(),cd111:e.PREV_READY.join(),cd112:e.SEEN.join(),cd113:e.NOT_READY.join(),cd114:e.UNKNOWN.join(),cd115:e.POSSIBLE_TIMEOUT.join(),cm106:this.trackersSent,cm107:o,cm109:this.totalTimeoutCount,cm110:this.slotReqAvgTimeSinceCall.getRounded(),cm111:this.slotReqAvgTimeSinceDone.getRounded(),cm112:this.totalSlotsRequestedOkCount,cm113:this.totalValidatedAdServerRequests.ok,cm114:this.totalValidatedAdServerRequests.notOk,cm115:t,cm116:this.totalAdRequestsCompletedCount,cm117:this.totalInternalAdRequestQueuedCount,cm118:this.totalSlotsRequestedCount,cm119:r.reducedCount,cm120:r.extendedCount};this.core.get(L).fireEvent(lr,l),this.batch=null,this.trackersSent+=1,this.trackersSent>=gr&&(this.enabled=!1)}_getOrStartBatch(){return this.batch==null&&(this.batch={start:st(),slots:Object.fromEntries(Object.values(Dt).map(t=>[t,[]])),targeting:{extendedCount:0,reducedCount:0}},setTimeout(()=>this._sendTracker(),dr)),this.batch}};i(F,"ImplementationValidator"),s([b],F.prototype,"_initialize",1),s([m(A,"adRequestQueued")],F.prototype,"_onAdRequestQueued",1),s([m(A,"adRequestCompleted")],F.prototype,"_onAdRequestCompleted",1),s([m(w,"onSlotRequested")],F.prototype,"_onSlotRequested",1),s([m(w,"onSlotRequestValidated")],F.prototype,"_onSlotRequestValidated",1),F=s([c],F);var X=class{_defineSlot(t,e={}){if(typeof t!="string"||e==null||typeof e!="object")return;let r={id:q(e.id),network:q(e.network),sizes:e.sizes!=null?mt(e.sizes):void 0,position:q(e.position)};this.core.get(T).createSlot("custom",0,t,r)}_adRendered(t,e){if(typeof t!="string"||e==null||typeof e!="object")return;let r=this.core.get(T).getSlot("custom",t);if(r==null)return;let o={advertiserId:q(e.advertiserId),campaignId:q(e.campaignId),creativeId:q(e.creativeId),lineItemId:q(e.lineItemId),renderedSize:qt(e.renderedSize)};this.core.get(U).setAdRendered(r,o)}_adRemoved(t){if(typeof t!="string")return;let e=this.core.get(T).getSlot("custom",t);e!=null&&this.core.get(U).setAdRemoved(e)}_getTargeting(t){let e=this.core.get(T);if(typeof t!="string")return e.getUptPageTargeting();let r=e.getSlot("custom",t);return r==null?e.getUptPageTargeting():r.getUptTargeting()}};i(X,"CustomAdServer"),s([J("defineSlot")],X.prototype,"_defineSlot",1),s([J("getTargeting")],X.prototype,"_getTargeting",1),X=s([c],X);var Z=class{constructor(){a(this,"initialized",!1);a(this,"size",0)}_initialize(){return S(this,null,function*(){if(yield Promise.resolve(),this.initialized)return;this.initialized=!0,this.core.dvtag.cmd instanceof Array||(this.core.dvtag.cmd=[]);let t=this.core.dvtag.cmd;this.core.dvtag.cmd={push:(...e)=>{for(let r of e)try{r()}catch(o){}return this.size+=e.length,this.size}},this.core.dvtag.cmd.push(...t)})}};i(Z,"CommandBuffer"),s([b],Z.prototype,"_initialize",1),Z=s([c],Z);var ft=class{};i(ft,"HouseHold"),ft=s([c,I(A),I(Z),I(L),I(X),I(B)],ft);if(window.dvtag==null||window.dvtag._core==null)try{new St(Vt,window)}catch(n){}})();

</script>

</body>
</html>
