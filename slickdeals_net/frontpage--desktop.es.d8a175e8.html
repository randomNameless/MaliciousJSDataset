<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>frontpage--desktop.es.d8a175e8.html</title>
</head>
<body>

<script>
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function e(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function t(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))}globalThis.durangoConfiguration={adBlockEndpoints:{endpoints:["/scripts/sd/ads/gpt.min.js"]},breakpoints:{mobile:{name:"mobile",minimum:0,maximum:768},tablet:{name:"tablet",minimum:768,maximum:1024},desktop:{name:"desktop",minimum:1024,maximum:65536}},metricsReporter:{maxRequestsPerBatch:100,batchFireTimeout:3e3,endpointUrl:"/ad-stats/1/ad-events"},whitelist:{firstParty:["slickdeals.net","slickdealscdn.com"]}};var n={capture:!0,once:!0,passive:!0},i=function(){return"interactive"===document.readyState||"complete"===document.readyState},r=function(e,t){return!(!function(e){return document.readyState===e}(e)&&!i()||(t(e),0))},a=function(){return new Promise((function(e){r("domready",e)||document.addEventListener("DOMContentLoaded",(function(){e("domready")}),n)}))},o=function(){return new Promise((function(e){r("load",e)||window.addEventListener("load",(function(){e("load")}),n)}))},s={};Object.defineProperties(s,{state:{get:function(){return document.readyState}},loading:{get:function(){return new Promise((function(e){r("loading",e)||document.addEventListener("readystatechange",(function(){"loading"===document.readyState&&e("loading")}),n)}))}},interactive:{get:function(){return new Promise((function(e){r("interactive",e)||document.addEventListener("readystatechange",(function(){"interactive"===document.readyState&&e("interactive")}),n)}))}},complete:{get:function(){return new Promise((function(e){r("complete",e)||document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&e("complete")}),n)}))}},window:{get:function(){return o()}},load:{get:function(){return o()}},domready:{get:function(){return a()}},dom:{get:function(){return a()}},ready:{get:function(){return i()}}});var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var d=l((function(e,t){e.exports=function(){function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var t="undefined"!=typeof window,n=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=t&&"IntersectionObserver"in window,r=t&&"classList"in document.createElement("p"),a=t&&window.devicePixelRatio>1,o={elements_selector:"IMG",container:n||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!1,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},s=function(t){return e({},o,t)},c=function(e,t){var n,i=new e(t);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:i}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:i})}window.dispatchEvent(n)},l=function(e,t){return e.getAttribute("data-"+t)},d=function(e,t,n){var i="data-"+t;null!==n?e.setAttribute(i,n):e.removeAttribute(i)},u=function(e){return l(e,"ll-status")},p=function(e,t){return d(e,"ll-status",t)},h=function(e){return p(e,null)},f=function(e){return null===u(e)},g=function(e){return"native"===u(e)},m=function(e,t,n,i){e&&(void 0===i?void 0===n?e(t):e(t,n):e(t,n,i))},y=function(e,t){r?e.classList.add(t):e.className+=(e.className?" ":"")+t},v=function(e,t){r?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},b=function(e){return e.llTempImage},w=function(e,t){if(t){var n=t._observer;n&&n.unobserve(e)}},S=function(e,t){e&&(e.loadingCount+=t)},A=function(e,t){e&&(e.toLoadCount=t)},_=function(e){for(var t,n=[],i=0;t=e.children[i];i+=1)"SOURCE"===t.tagName&&n.push(t);return n},E=function(e,t,n){n&&e.setAttribute(t,n)},C=function(e,t){e.removeAttribute(t)},k=function(e){return!!e.llOriginalAttrs},T=function(e){if(!k(e)){var t={};t.src=e.getAttribute("src"),t.srcset=e.getAttribute("srcset"),t.sizes=e.getAttribute("sizes"),e.llOriginalAttrs=t}},P=function(e){if(k(e)){var t=e.llOriginalAttrs;E(e,"src",t.src),E(e,"srcset",t.srcset),E(e,"sizes",t.sizes)}},D=function(e,t){E(e,"sizes",l(e,t.data_sizes)),E(e,"srcset",l(e,t.data_srcset)),E(e,"src",l(e,t.data_src))},x=function(e){C(e,"src"),C(e,"srcset"),C(e,"sizes")},O=function(e,t){var n=e.parentNode;n&&"PICTURE"===n.tagName&&_(n).forEach(t)},I=function(e,t){_(e).forEach(t)},R={IMG:function(e,t){O(e,(function(e){T(e),D(e,t)})),T(e),D(e,t)},IFRAME:function(e,t){E(e,"src",l(e,t.data_src))},VIDEO:function(e,t){I(e,(function(e){E(e,"src",l(e,t.data_src))})),E(e,"poster",l(e,t.data_poster)),E(e,"src",l(e,t.data_src)),e.load()}},j=function(e,t){var n=R[e.tagName];n&&n(e,t)},M=function(e,t,n){S(n,1),y(e,t.class_loading),p(e,"loading"),m(t.callback_loading,e,n)},L={IMG:function(e,t){d(e,t.data_src,null),d(e,t.data_srcset,null),d(e,t.data_sizes,null),O(e,(function(e){d(e,t.data_srcset,null),d(e,t.data_sizes,null)}))},IFRAME:function(e,t){d(e,t.data_src,null)},VIDEO:function(e,t){d(e,t.data_src,null),d(e,t.data_poster,null),I(e,(function(e){d(e,t.data_src,null)}))}},F=function(e,t){d(e,t.data_bg_multi,null),d(e,t.data_bg_multi_hidpi,null)},N=function(e,t){var n=L[e.tagName];n?n(e,t):function(e,t){d(e,t.data_bg,null),d(e,t.data_bg_hidpi,null)}(e,t)},B=["IMG","IFRAME","VIDEO"],U=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||m(e.callback_finish,t)},z=function(e,t,n){e.addEventListener(t,n),e.llEvLisnrs[t]=n},V=function(e,t,n){e.removeEventListener(t,n)},$=function(e){return!!e.llEvLisnrs},H=function(e){if($(e)){var t=e.llEvLisnrs;for(var n in t){var i=t[n];V(e,n,i)}delete e.llEvLisnrs}},J=function(e,t,n){!function(e){delete e.llTempImage}(e),S(n,-1),function(e){e&&(e.toLoadCount-=1)}(n),v(e,t.class_loading),t.unobserve_completed&&w(e,n)},q=function(e,t,n){var i=b(e)||e;$(i)||function(e,t,n){$(e)||(e.llEvLisnrs={});var i="VIDEO"===e.tagName?"loadeddata":"load";z(e,i,t),z(e,"error",n)}(i,(function(r){!function(e,t,n,i){var r=g(t);J(t,n,i),y(t,n.class_loaded),p(t,"loaded"),N(t,n),m(n.callback_loaded,t,i),r||U(n,i)}(0,e,t,n),H(i)}),(function(r){!function(e,t,n,i){var r=g(t);J(t,n,i),y(t,n.class_error),p(t,"error"),m(n.callback_error,t,i),r||U(n,i)}(0,e,t,n),H(i)}))},W=function(e,t,n){!function(e){e.llTempImage=document.createElement("IMG")}(e),q(e,t,n),function(e,t,n){var i=l(e,t.data_bg),r=l(e,t.data_bg_hidpi),o=a&&r?r:i;o&&(e.style.backgroundImage='url("'.concat(o,'")'),b(e).setAttribute("src",o),M(e,t,n))}(e,t,n),function(e,t,n){var i=l(e,t.data_bg_multi),r=l(e,t.data_bg_multi_hidpi),o=a&&r?r:i;o&&(e.style.backgroundImage=o,function(e,t,n){y(e,t.class_applied),p(e,"applied"),F(e,t),t.unobserve_completed&&w(e,t),m(t.callback_applied,e,n)}(e,t,n))}(e,t,n)},G=function(e,t,n){!function(e){return B.indexOf(e.tagName)>-1}(e)?W(e,t,n):function(e,t,n){q(e,t,n),j(e,t),M(e,t,n)}(e,t,n)},Q=["IMG","IFRAME"],K=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},Y=function(e,t,n){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?function(e,t,n,i){m(n.callback_enter,e,t,i),function(e,t,n){t.unobserve_entered&&w(e,n)}(e,n,i),function(e){return!f(e)}(e)||G(e,n,i)}(e.target,e,t,n):function(e,t,n,i){f(e)||(function(e,t,n,i){n.cancel_on_exit&&function(e){return"loading"===u(e)}(e)&&"IMG"===e.tagName&&(H(e),function(e){O(e,(function(e){x(e)})),x(e)}(e),function(e){O(e,(function(e){P(e)})),P(e)}(e),v(e,n.class_loading),S(i,-1),h(e),m(n.callback_cancel,e,t,i))}(e,t,n,i),m(n.callback_exit,e,t,i))}(e.target,e,t,n)}))},X=function(e){return Array.prototype.slice.call(e)},Z=function(e){return e.container.querySelectorAll(e.elements_selector)},ee=function(e){return function(e){return"error"===u(e)}(e)},te=function(e,t){return function(e){return X(e).filter(f)}(e||Z(t))},ne=function(e,n){var r=s(e);this._settings=r,this.loadingCount=0,function(e,t){i&&!K(e)&&(t._observer=new IntersectionObserver((function(n){Y(n,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))}(r,this),function(e,n){t&&window.addEventListener("online",(function(){!function(e,t){var n;(n=Z(e),X(n).filter(ee)).forEach((function(t){v(t,e.class_error),h(t)})),t.update()}(e,n)}))}(r,this),this.update(n)};return ne.prototype={update:function(e){var t,r,a=this._settings,o=te(e,a);A(this,o.length),!n&&i?K(a)?function(e,t,n){e.forEach((function(e){-1!==Q.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),function(e,t,n){q(e,t,n),j(e,t),N(e,t),p(e,"native")}(e,t,n))})),A(n,0)}(o,a,this):(r=o,function(e){e.disconnect()}(t=this._observer),function(e,t){t.forEach((function(t){e.observe(t)}))}(t,r)):this.loadAll(o)},destroy:function(){this._observer&&this._observer.disconnect(),Z(this._settings).forEach((function(e){delete e.llOriginalAttrs})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,n=this._settings;te(e,n).forEach((function(e){G(e,n,t)}))}},ne.load=function(e,t){var n=s(t);G(e,n)},ne.resetStatus=function(e){h(e)},t&&function(e,t){if(t)if(t.length)for(var n,i=0;n=t[i];i+=1)c(e,n);else c(e,t)}(ne,window.lazyLoadOptions),ne}()}));class u{static isEnabled(){return!1}static disable(){u.loggingEnabled=!1}static enable(){u.loggingEnabled=!0}static log(...e){u.parser(window.console.log,...e)}static debug(...e){u.parser(window.console.debug,...e)}static warn(...e){u.parser(window.console.warn,...e)}static error(...e){const[t,n]=e;!0===n&&window.console.error(t)}static trace(){}static callback(e){}static group(e="",...t){}static table(e){}static parser(e,...t){}}u.loggingEnabled=!0;const p={defaultImageFallback:"/images/blank.gif",debug:!1};class h{constructor(e=p){this.options={},this.options.defaultImageFallback=e.defaultImageFallback||p.defaultImageFallback,this.options.debug=e.debug||p.debug,s.domready.then(this.init.bind(this))}init(){this.getLazyLoad().update()}getLazyLoad(){return this.lazyLoad||this.createLazyLoadInstance(),this.lazyLoad}setObserver(e){void 0===this.mutationObserver&&(this.mutationObserver=new window.MutationObserver((e=>this.checkForDomUpdate(e)))),this.mutationObserver.observe(e,{childList:!0,subtree:!0})}createLazyLoadInstance(){let e={data_src:"lazy-src",data_srcset:"lazy-srcset",data_sizes:"lazy-sizes",callback_enter:this.handleEmptyImageSrc.bind(this),callback_error:this.setFallbackImage.bind(this)};this.options.debug&&(e={...e,callback_enter:e=>{this.handleEmptyImageSrc(e),u.log("🔑 ENTERED",e.getAttribute("alt"))},callback_loaded:e=>u.log("👍 LOADED",e.getAttribute("alt")),callback_error:e=>{this.setFallbackImage(e),u.log("💀 FAILED - Using Fallback",e.getAttribute("alt"))},callback_finish:()=>u.log("✔️ FINISHED",document.documentElement.getAttribute("alt"))}),this.lazyLoad=new d(e)}checkForDomUpdate(e){Object.values(e).forEach((e=>{"childList"===e.type&&this.getLazyLoad().update()}))}handleEmptyImageSrc(e){""!==e.src&&e.src!==window.location.href||this.setFallbackImage(e)}setFallbackImage(e){"lazyFallback"in e.dataset?e.setAttribute("src",e.dataset.lazyFallback):e.setAttribute("src",this.options.defaultImageFallback)}}var f;!function(e){e[e.Singleton=0]="Singleton",e[e.Factory=1]="Factory"}(f||(f={}));const g=e=>"string"==typeof e&&e.length>0;class m{static register({key:e,constructor:t,dependencies:n={},scope:i}){m.registered[e]={module:t,dependencies:n,scope:i},m.constructors[e]=t,m.dependencies[e]={},Object.entries(n).forEach((([t,n])=>{m.dependencies[e][t]=m.normalizeDependency(n)}))}static normalizeDependency(e){return"string"!=typeof(t=e)&&"number"!=typeof t||!(t in f)?e:[e];var t}static createDependency(e,t,n){return{[e]:n?[t,n]:[t]}}static getDependencyValues(e,t){return e in t?Object.entries(t[e]).map((([e,t])=>({name:e,scope:t[0],parameters:t[1]}))):[]}static getDependencyScope(e,t){return t[e]&&Array.isArray(t[e])||u.error(`Scope requested for invalid dependency: ${e}`),m.getDependencyScopeValue(t[e])}static getDependencyScopeValue(e){return e[0]}static getDependencyParameters(e,t){return Array.isArray(t[e])?m.getDependencyParameterValue(t[e]):{}}static getDependencyParameterValue(e){return e[1]}static get(e,t){const n=m.normalizeDependency(t);return m.getDependencyScopeValue(n)===f.Singleton?m.getInstance(e,m.getDependencyParameterValue(n)):m.invoke(e,m.getDependencies(e),m.getDependencyParameterValue(n))}static getDependencies(e){const t=[];return m.getDependencyValues(e,m.dependencies).forEach((e=>{e.scope===f.Factory?t.push(m.resolve(e.name,e.parameters)):t.push(m.getInstance(e.name,e.parameters))})),t}static resolve(e,t={}){if(m.depth+=1,m.depth>=5)return void u.error("Maximum recursion level of 5 reached");if(!m.dependencies[e]||!m.constructors[e])return void u.error(`Dependency not properly configured: ${e}`);const n=[];return m.getDependencyValues(e,m.dependencies).forEach((t=>{const i=m.registered[e];i.scope!==f.Factory?i.scope!==f.Singleton?t.scope!==f.Factory?n.push(m.getInstance(t.name,t.parameters)):n.push(m.resolve(t.name,t.parameters)):n.push(m.getInstance(t.name,t.parameters)):n.push(m.resolve(t.name,t.parameters))})),m.depth-=1,m.invoke(e,n,t)}static invoke(e,t,n){return Array.isArray(n)?new(m.getConstructor(e))(...t,...n):new(m.getConstructor(e))(...t,n)}static getConstructor(e){return m.constructors[e]}static getInstance(e,t){return m.instances[e]||(m.instances[e]=m.resolve(e,t)),m.instances[e]}static isDefinedAsSingleton(e){return m.registered[e].scope===f.Singleton}}m.registered={},m.constructors={},m.dependencies={},m.instances={},m.depth=0;const y=e=>"object"==typeof e;function v(e,t){if("string"!=typeof(n=e)&&void 0!==n.scope)return t=>{const{key:n,scope:i,dependencies:r}=e;m.register({key:n,dependencies:r,scope:i,constructor:t})};var n;if((e=>"string"==typeof e)(e))return n=>{m.register({key:e,dependencies:y(t)?t:{},constructor:n})};throw u.error(`Invalid signatures provided for the register call first arg: ${e} second arg: ${t}`),new Error("invalid signatures provided for the register call")}const b=(e,t)=>function(...n){let i=[...n];return n.length===e.length&&(i=n.slice(0,n.length-t.length)),e.call(this,...i,...t)},w=e=>(t,n,i)=>{const r=i.value,a=Object.keys(e).map((t=>m.get(t,e[t])));return i.value=b(r,a),i};var S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function _(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))}function E(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function C(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function T(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function P(e){return this instanceof P?(this.v=e,this):new P(e)}function D(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){a.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof P?Promise.resolve(e.value.v).then(c,l):d(a[0][2],e)}(r[e](t))}catch(e){d(a[0][3],e)}}function c(e){s("next",e)}function l(e){s("throw",e)}function d(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=C(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}function O(e){return"function"==typeof e}function I(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var R=I((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function j(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var M=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,i,r;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=C(a),s=o.next();!s.done;s=o.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else a.remove(this);var c=this.initialTeardown;if(O(c))try{c()}catch(e){r=e instanceof R?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var d=C(l),u=d.next();!u.done;u=d.next()){var p=u.value;try{N(p)}catch(e){r=null!=r?r:[],e instanceof R?r=T(T([],k(r)),k(e.errors)):r.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}if(r)throw new R(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)N(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&j(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&j(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),L=M.EMPTY;function F(e){return e instanceof M||e&&"closed"in e&&O(e.remove)&&O(e.add)&&O(e.unsubscribe)}function N(e){O(e)?e():e.unsubscribe()}var B={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},U={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=U.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,T([e,t],k(n))):setTimeout.apply(void 0,T([e,t],k(n)))},clearTimeout:function(e){var t=U.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function z(e){U.setTimeout((function(){var t=B.onUnhandledError;if(!t)throw e;t(e)}))}function V(){}var $=null;function H(e){if(B.useDeprecatedSynchronousErrorHandling){var t=!$;if(t&&($={errorThrown:!1,error:null}),e(),t){var n=$,i=n.errorThrown,r=n.error;if($=null,i)throw r}}else e()}var J=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,F(t)&&t.add(n)):n.destination=Y,n}return A(t,e),t.create=function(e,t,n){return new Q(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(M),q=Function.prototype.bind;function W(e,t){return q.call(e,t)}var G=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){K(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){K(e)}else K(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){K(e)}},e}(),Q=function(e){function t(t,n,i){var r,a,o=e.call(this)||this;O(t)||!t?r={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:o&&B.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},r={next:t.next&&W(t.next,a),error:t.error&&W(t.error,a),complete:t.complete&&W(t.complete,a)}):r=t;return o.destination=new G(r),o}return A(t,e),t}(J);function K(e){z(e)}var Y={closed:!0,next:V,error:function(e){throw e},complete:V},X="function"==typeof Symbol&&Symbol.observable||"@@observable";function Z(e){return e}function ee(e){return 0===e.length?Z:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var te=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i,r=this,a=(i=e)&&i instanceof J||function(e){return e&&O(e.next)&&O(e.error)&&O(e.complete)}(i)&&F(i)?e:new Q(e,t,n);return H((function(){var e=r,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?r._subscribe(a):r._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=ne(t))((function(t,i){var r=new Q({next:function(t){try{e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[X]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ee(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ne(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function ne(e){var t;return null!==(t=null!=e?e:B.Promise)&&void 0!==t?t:Promise}function ie(e){return function(t){if(function(e){return O(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var re=function(e){function t(t,n,i,r,a,o){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return A(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(J),ae=I((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),oe=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return A(t,e),t.prototype.lift=function(e){var t=new se(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new ae},t.prototype.next=function(e){var t=this;H((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var r=C(t.currentObservers),a=r.next();!a.done;a=r.next()){a.value.next(e)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;H((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;H((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,r=n.isStopped,a=n.observers;return i||r?L:(this.currentObservers=null,a.push(e),new M((function(){t.currentObservers=null,j(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,r=t.isStopped;n?e.error(i):r&&e.complete()},t.prototype.asObservable=function(){var e=new te;return e.source=this,e},t.create=function(e,t){return new se(e,t)},t}(te),se=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return A(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:L},t}(oe),ce={now:function(){return(ce.delegate||Date).now()},delegate:void 0},le=function(e){function t(t,n,i){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===i&&(i=ce);var r=e.call(this)||this;return r._bufferSize=t,r._windowTime=n,r._timestampProvider=i,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=n===1/0,r._bufferSize=Math.max(1,t),r._windowTime=Math.max(1,n),r}return A(t,e),t.prototype.next=function(t){var n=this,i=n.isStopped,r=n._buffer,a=n._infiniteTimeWindow,o=n._timestampProvider,s=n._windowTime;i||(r.push(t),!a&&r.push(o.now()+s)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,i=this._buffer.slice(),r=0;r<i.length&&!e.closed;r+=n?1:2)e.next(i[r]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,i=e._buffer,r=e._infiniteTimeWindow,a=(r?1:2)*t;if(t<1/0&&a<i.length&&i.splice(0,i.length-a),!r){for(var o=n.now(),s=0,c=1;c<i.length&&i[c]<=o;c+=2)s=c;s&&i.splice(0,s+1)}},t}(oe);var de="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ue(e){if(e instanceof te)return e;if(null!=e){if(function(e){return O(e[X])}(e))return o=e,new te((function(e){var t=o[X]();if(O(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((a=e)&&"number"==typeof a.length&&"function"!=typeof a)return r=e,new te((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(O(null==(i=e)?void 0:i.then))return n=e,new te((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,z)}));if(function(e){return Symbol.asyncIterator&&O(null==e?void 0:e[Symbol.asyncIterator])}(e))return pe(e);if(function(e){return O(null==e?void 0:e[de])}(e))return t=e,new te((function(e){var n,i;try{for(var r=C(t),a=r.next();!a.done;a=r.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return O(null==e?void 0:e.getReader)}(e))return pe(function(e){return D(this,arguments,(function(){var t,n,i;return E(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,P(t.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,P(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,P(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,i,r,a,o;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function pe(e){return new te((function(t){(function(e,t){var n,i,r,a;return _(this,void 0,void 0,(function(){var o,s;return E(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=x(e),c.label=1;case 1:return[4,n.next()];case 2:if((i=c.sent()).done)return[3,4];if(o=i.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),r={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function he(e,t,n){return i=function(){return e()?t:n},new te((function(e){ue(i()).subscribe(e)}));var i}function fe(e,t){return ie((function(n,i){var r,a,o,s=0;n.subscribe(new re(i,(function(n){return e.call(t,n,s++)&&i.next(n)}),r,a,o))}))}const ge=e=>{if("constructor"in e&&e.constructor!==Function)return ge(Object.getPrototypeOf(e).constructor);const t=Object.getPrototypeOf(e);return t===Function.prototype?null:t},me=(e,t="")=>{u.group(t,u.table.bind(null,e))},ye=({initialState:e,moduleName:t,stateChangeCallback:n,isLoggingEnabled:i})=>{let r,a=e;return i&&me(a,`Added state for ${t}`),"function"==typeof n&&(r=new oe,r.subscribe(n)),{getState:()=>Object.freeze(a),setState:e=>{let n;void 0!==r&&(n={...a}),a=((e,t,n,i)=>{const r={...e,...t};return i&&me(e,`Updated state for ${n})`),r})(a,e,t,i),void 0!==r&&r.next(((e,t)=>{const n={added:{},removed:{},changed:{},unchanged:{}},i=Object.keys(e),r=Object.keys(t),a=(s=r,[...(o=i).filter((e=>!s.includes(e))),...s.filter((e=>!o.includes(e)))]);var o,s;const c=((e,t)=>e.filter((e=>t.includes(e))))(i,r);return a.forEach((i=>{i in e?n.removed[i]=e[i]:n.added[i]=t[i]})),c.forEach((i=>{e[i]===t[i]?n.unchanged[i]=e[i]:n.changed[i]={newValue:t[i],originalValue:e[i]}})),n})(n,e))}}},ve=e=>function(t){const{prototype:n}=t;return n.initState=function(t,n=!1){const i={initialState:t,moduleName:e,isLoggingEnabled:n};var r;"object"==typeof(r=this)&&"onStateChange"in r&&(i.stateChangeCallback=this.onStateChange.bind(this));const{getState:a,setState:o}=ye(i);this.getState=a,this.setState=o},t};var be=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const we=!1,Se=!0;let Ae=class{constructor(e){this.elements=e.elements instanceof HTMLElement?[e.elements]:e.elements,this.classNames=e.classNames,this.defaultVisibility=e.defaultVisibility??we,this.enableVisibilityToggling=e.enableVisibilityToggling??Se,this.init()}init(){const e={isVisible:this.defaultVisibility};this.initState(e),this.classNames.base&&this.elements.forEach((e=>{e.classList.add(this.classNames.base)})),this.getState().isVisible&&this.elements.forEach((e=>{e.classList.add(this.classNames.visible)}))}toggleVisibility(){this.enableVisibilityToggling&&(this.setState({isVisible:!this.getState().isVisible}),this.elements.forEach((e=>{e.classList.toggle(this.classNames.visible,this.getState().isVisible)})))}getVisibilityState(){const{isVisible:e}=this.getState();return e}};Ae=be([ve("TargetStrategy"),v("TargetStrategy")],Ae);var _e=Ae,Ee=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Ce=!0,ke=!1,Te=null;let Pe=class{constructor(e){this.element=e.element,this.classNames=e.classNames,this.defaultVisibility=e.defaultVisibility??Ce,this.enableVisibilityToggling=e.enableVisibilityToggling??ke,e.additionalTriggers?this.additionalTriggers=e.additionalTriggers instanceof HTMLElement?[e.additionalTriggers]:e.additionalTriggers:this.additionalTriggers=Te,this.init()}init(){const e={isVisible:this.defaultVisibility};this.initState(e),this.enableVisibilityToggling&&(this.classNames.base&&this.element.classList.add(this.classNames.base),this.getState().isVisible&&this.element.classList.add(this.classNames.visible)),this.initAdditionalTriggerEventListeners()}destroy(){this.additionalTriggers&&this.additionalTriggers.forEach((e=>{e.removeEventListener("click",this.element.click)}))}initAdditionalTriggerEventListeners(){this.additionalTriggers&&this.additionalTriggers.forEach((e=>e.addEventListener("click",(()=>this.element.click()))))}toggleVisibility(){this.enableVisibilityToggling&&(this.setState({isVisible:!this.getState().isVisible}),this.element.classList.toggle(this.classNames.visible,this.getState().isVisible))}getTriggerElement(){return this.element}getVisibilityState(){return this.getState().isVisible}};Pe=Ee([ve("TriggerStrategy"),v("TriggerStrategy")],Pe);var De=Pe;const xe=e=>e instanceof HTMLElement,Oe=e=>e instanceof DocumentFragment,Ie=e=>"object"==typeof e?"init"in e&&"isElementAvailable"in e&&"getElement"in e:"function"==typeof e&&("init"in e.prototype&&"isElementAvailable"in e.prototype&&"getElement"in e.prototype);class Re{static add(e,t,n){Re.addComponent(e,t,n)}static remove(e,t){if(void 0===t)Re.removeComponent(e);else{const i=Re.getComponents(e);let r;"object"==typeof(n=t)&&"registerable"in n&&n.registerable?r=Object.keys(i).filter((e=>i[e]===t)):"string"==typeof t&&(r=t),delete i[r],Re.setComponents(e,i)}var n}static get(e,t){return"string"==typeof t?Re.getComponent(e,t):Re.getComponents(e)}static removeComponent(e){Re.registry.delete(e)}static getComponents(e){return Re.registry.get(e)}static getComponent(e,t){return Re.registry.get(e)[t]}static setComponents(e,t){Re.registry.set(e,t)}static addComponent(e,t,n){const i=Re.getComponents(e);i?Re.setComponents(e,{...i,[t]:n}):Re.setComponents(e,{[t]:n})}}Re.registry=new Map;const je=new Map;function Me(e){return t=>{je.set(t,e)}}const Le=e=>{const t=[];let n=e.constructor;for(;n;)t.push(n),n=ge(n);return t.some((e=>je.has(e)))};function Fe(e){let t;"function"==typeof e?t=e:"constructor"in e&&(t=e.constructor);return{...(e=>{const t=ge(e);return t?Fe(t):{}})(t),...je.get(t)}}const Ne=(e,t)=>({...Fe(e),...t});function Be(e){return Object.defineProperty(e.prototype,"registerable",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e}var Ue,ze=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Ve="CallbackQueue";let $e=Ue=class{constructor(){this.queue=new Map}add(e,t,n){const i=Ue.buildKey(e,t);this.queue.has(i)||this.queue.set(i,new Set),this.queue.get(i).add(n)}remove(e,t,n){const i=Ue.buildKey(e,t);return!!this.queue.has(i)&&this.queue.get(i).delete(n)}async fire(e,t,n){const i=Ue.buildKey(e,t);this.queue.has(i)&&this.queue.get(i).forEach((async e=>{await e.call(n)}))}static buildKey(e,t){return`${e}:${t}`}};$e=Ue=ze([v(Ve)],$e);class He extends Error{constructor(e,t){super(`Failed while awaiting property '${e}' for ${t}ms`)}}const Je=async(e,t,n=10,i=50)=>new Promise(((r,a)=>{e in t&&t[e]&&r(t[e]);let o=0;const s=setInterval((()=>{e in t&&t[e]?(clearInterval(s),r(t[e])):(o+=1,o>n&&(clearInterval(s),a(new He(e,o*n))))}),i)}));window.bpHydration=window.bpHydration||[];const qe={},We=e=>"string"==typeof e;function Ge(e,t){t.forEach(((t,n)=>{var i;(i=e,Array.isArray(i)&&i.length&&i.every(We))?m.resolve(e[n],t[e[n]]):We(e)?m.resolve(e,t):u.warn(`Invalid hydration key: ${e}`)}))}function Qe(e){Object.keys(e).forEach((t=>{t in qe?qe[t].push(e[t]):qe[t]=[e[t]]}))}window.bpHydration.forEach(Qe),window.bpHydration.push=Qe;var Ke,Ye,Xe=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};(Ye||(Ye={})).Wrapper="blueprint";const Ze={...m.createDependency(Ve,f.Singleton)},et={fromHydrationQueue:!0,fromDom:!1,fromMutation:!1};let tt=Ke=class{constructor(e,t={}){this.options=t,this._isInitialized=!1,"object"!=typeof e&&(this.options=Le(this)?Ne(this,t):t,Object.freeze(this.options),s.domready.then(this.init.bind(this)).then(this.registerElement.bind(this,e)).then(this.processInitQueue.bind(this)).then(this.initComplete.bind(this)))}init(){this._isInitialized=!1}async processInitQueue(e){await e.fire(this.constructor.name,"init",this)}initComplete(){this._isInitialized=!0}destroy(e){}async isInitialized(){try{return await Je("_isInitialized",this),!0}catch(e){return!1}}registerElement(e){this.element&&Re.add(this.element,e,this)}static addToInitQueue(e,t,n){n.add(e,"init",t)}static async instantiate(e,t=et){if(await s.domready,t.fromHydrationQueue){const t=function(e=""){return e&&e in qe&&Array.isArray(qe[e])?qe[e]:e?[]:qe}(e);Ge(e,t)}if(t.fromDom){const t=document.querySelectorAll(`[data-blueprint="${e}"]`);Ke.instantiateFromDataAttributes(t)}if(t.fromMutation){const t={subtree:!0,childList:!0};new MutationObserver((t=>{const n=[];t.forEach((t=>{t.addedNodes.forEach((t=>{if(!xe(t))return;if((t.dataset.blueprint||"").toLowerCase()===e.toLowerCase())return void n.push(t);t.querySelectorAll(`[data-blueprint="${e}"]`).forEach((e=>{n.push(e)}))}))})),n.length&&Ke.instantiateFromDataAttributes(n)})).observe(document,t)}}async isElementAvailable(){try{return await Je("element",this),!0}catch(e){return!1}}getElement(){return this.element}static instantiateFromDataAttributes(e){e.forEach((e=>{if(e.dataset.blueprint){const t=m.getConstructor(e.dataset.blueprint);void 0!==t&&t.createFromDataAttributes(e)}}))}static generateComponentId(e,t){return e.endsWith(`-${t}`)?e:`${e}-${t}`}static async loadElement(e,t){if(await s.domready,"object"==typeof t.element&&t.element instanceof HTMLElement)return t.element;if("string"!=typeof t.id)return;let n;return n=document.getElementById(t.id),n||(n=document.getElementById(Ke.generateComponentId(t.id,e))),n}};Xe([w(Ze)],tt.prototype,"processInitQueue",null),Xe([w(Ze)],tt,"addToInitQueue",null),tt=Ke=Xe([Be],tt);var nt=tt;function it(e,t){if(!t.match(/^[a-z0-9]+$/i))throw new TypeError("Invalid modifier provided — Modifier must contain only alphanumeric characters");return e.includes("--")?e:`${e}--${t}`}function rt(e,t){if(!t.match(/^[a-z0-9]+$/i))throw new TypeError("Invalid subclass provided — Subclass must contain only alphanumeric characters");return e.includes("_")?e:`${e}_${t}`}
/*!
 * dashify <https://github.com/jonschlinkert/dashify>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */const at=e=>e[0].toUpperCase()+e.substring(1),ot=e=>((e,t)=>{if("string"!=typeof e)throw new TypeError("expected a string");return e.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\W/g,(e=>/[À-ž]/.test(e)?e:"-")).replace(/^-+|-+$/g,"").replace(/-{2,}/g,(e=>t&&t.condense?"-":e)).toLowerCase()})(e);var st;function ct(e){return null!==e.offsetParent}!function(e){e.Next="next",e.Previous="previous"}(st||(st={}));function lt(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}const dt=e=>!!e.parentNode;var ut;!function(e){e.Anonymous="anonymous",e.UseCredentials="use-credentials"}(ut||(ut={}));const pt="bp-c-icon";class ht extends nt{static createElement(e){const[,t,n]=/^([a-zA-Z]+)(?:--([a-z]+))?$/.exec(e.name);if(!t)throw new Error(`Icon name is not valid: ${e.name}`);const i=[pt];n?i.push(ht.buildIconClassName(t),it(pt,n)):i.push(ht.buildIconClassName(e.name));const r=document.createElement("span");return r.classList.add(...i,...e.classNames??[]),r}static buildIconClassName(e){return`bp-i-${e}`}}var ft;!function(e){e.Default="bp-u-animation",e.Flip="bp-u-animation_flip",e.Grow="bp-u-animation_grow"}(ft||(ft={}));var gt,mt=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const yt=null,vt=!0,bt=null;let wt=gt=class{constructor(e){this.element=e.element,this.inactiveIcon=ht.createElement({name:e.inactiveIconName}),this.activeIcon=e.activeIconName?ht.createElement({name:e.activeIconName}):yt,this.defaultState=e.defaultState??vt,this.animation=e.animation??bt,this.shouldRemoveIcon=!0===e.shouldRemoveIcon,this.init()}static create(e){return new gt(e)}init(){const e={isActive:this.defaultState};this.initState(e),this.populateIconContainer(),this.animation&&this.handleAnimation()}destroy(){this.shouldRemoveIcon&&lt(this.element)}toggleIcon(){this.setState({isActive:!this.getState().isActive}),this.animation?this.handleAnimation():this.populateIconContainer()}handleAnimation(){const e=it(this.animation,"active");this.element.classList.contains(this.animation)||this.element.classList.add(ft.Default,this.animation),this.element.classList.toggle(e,this.getState().isActive)}populateIconContainer(){const e=lt(this.element);this.animation?e.appendChild(this.inactiveIcon):e.appendChild(this.getState().isActive?this.activeIcon:this.inactiveIcon)}};wt=gt=mt([ve("IconStrategy"),v("IconStrategy")],wt);var St=wt;function At(e){const{prototype:t}=e;return t.subscribe=function(e,t=""){void 0===this.observers&&(this.observers=new Map),this.observers.set(e,t)},t.notify=function(e,t=""){this.observers&&this.observers.forEach(((n,i)=>{""!==t&&""!==n&&n!==t||i(e,t)}))},e}var _t,Et=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};var Ct,kt;!function(e){e.Default="bp-c-visibilityToggle",e.Visible="bp-c-visibilityToggle--visible",e.Indicator="bp-c-visibilityToggle_indicator"}(Ct||(Ct={})),function(e){e.Toggled="visibilityToggled"}(kt||(kt={}));let Tt=_t=class{constructor(e){this.triggerStrategy=e.triggerStrategy,this.targetStrategy=e.targetStrategy,this.indicatorStrategy=e.indicatorStrategy,this.stopPropagation=e.stopPropagation||!1,this.toggleVisibility=this.toggleVisibility.bind(this),this.init()}static create(e){return new _t(e)}init(){this.triggerStrategy.getTriggerElement().addEventListener("click",this.toggleVisibility)}destroy(){this.triggerStrategy.getTriggerElement().removeEventListener("click",this.toggleVisibility),this.triggerStrategy.destroy(),this.indicatorStrategy&&this.indicatorStrategy.destroy()}toggleVisibility(e){this.stopPropagation&&e.stopPropagation(),this.triggerStrategy.toggleVisibility(),this.targetStrategy.toggleVisibility(),this.indicatorStrategy&&"function"==typeof this.indicatorStrategy.toggleIcon&&this.indicatorStrategy.toggleIcon();const t={triggerVisibility:this.triggerStrategy.getVisibilityState(),targetVisibility:this.targetStrategy.getVisibilityState()};this.notify(t,kt.Toggled)}};Tt=_t=Et([v("VisibilityToggle"),At],Tt);var Pt,Dt=Tt;!function(e){e.Default="bp-c-link",e.JavaScript="js-link"}(Pt||(Pt={}));var xt,Ot;!function(e){e.Default="bp-c-button",e.JavaScript="js-button"}(xt||(xt={})),function(e){e.unstyled="unstyled",e.primary="primary",e.secondary="secondary",e.buy="buy",e.dealAlert="dealAlert",e.primaryText="primaryText",e.secondaryText="secondaryText",e.xlarge="xlarge",e.large="large",e.small="small",e.link="link",e.block="block",e.inline="inline",e.disabled="disabled"}(Ot||(Ot={}));class It extends nt{async init(){if(super.init(),void 0===this.element&&(this.element=await nt.loadElement("Button",this.options)),void 0===this.element)throw new Error("Button element is undefined")}static createElement(e="",t){const n=document.createElement("button");return n.classList.add(xt.Default),e&&n.append(document.createTextNode(e)),t.forEach((e=>{Ot[e]&&n.classList.add(it(xt.Default,Ot[e]))})),n}}nt.instantiate("Button");var Rt=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let jt=class{static redirect(e){window.location.assign(e)}static open(e){window.open(e)}static redirectAsPost(e,t){const n=new DocumentFragment;Object.entries(t).forEach((([e,t])=>{const i=document.createElement("input");i.type="hidden",i.name=e,i.value=t,n.appendChild(i)}));const i=document.createElement("form");i.appendChild(n),i.action=e,i.method="post",document.body.appendChild(i),i.submit()}};jt=Rt([v("Redirector")],jt);var Mt,Lt=jt;!function(e){e.MobileWeb="Mobile3",e.WebView="App WebView",e.Classic="Classic",e.Redesign="Redesign",e.Extension="Extension"}(Mt||(Mt={}));const Ft=async e=>{try{const t=await class{static get(e){return new Promise(((t,n)=>{Object.prototype.hasOwnProperty.call(window.dataLayer,e)||n(new Error(`Invalid property name (${e}) specified.`)),t(window.dataLayer[e])}))}}.get("visitor"),{layout:n}=t;return n===e}catch(e){return u.error(e),!1}};var Nt=l((function(e,t){function n(e,t={}){if("string"!=typeof e)throw new Error("`keyPath` must be a string.");return(e||"").split(t.separator||".").filter((e=>e))}function i(e,t){return Array.isArray(e)?e.slice():n(e,t)}function r(e,t={}){if(!Array.isArray(e))throw new Error("`components` must be an array.");return i(e||[]).join(t.separator||".")}function a(e,t={separator:"."}){return i(e,t)[0]}function o(e,t,n={separator:"."}){return e=i(e,n),t=i(t,n),!(e.length>t.length)&&!e.some(((e,n)=>e!==t[n]))}e.exports=t=function e(t){if(!(this instanceof e))return new e(t);Object.defineProperty(this,"result",{get:function(){return t}}),this.keyPaths=function(e={}){"number"!=typeof e.depth&&(e.depth=1/0),e.separator=e.separator||".";const n=[],i=(t,a=[],o=0)=>o>e.depth||o>0&&e.tester&&!e.tester(r(a,e),t)||!t||"object"!=typeof t||!0!==e.allowArrays&&Array.isArray(t)?[]:[].concat(...Object.keys(t).map((s=>{if("object"==typeof t[s]&&null!==t[s]){if(n.findIndex((e=>e===t[s]))>-1)return[];n.push(t[s])}const c=a.concat([s]);return[r(c,e)].concat(...i(t[s],c,o+1))})));return i(t)},this.get=function(e,n={separator:"."}){return i(e,n).reduce(((e,t)=>(e||{})[t]),t)},this.get.all=function(e,n={separator:"."}){const r=function(e,t){if(0==t.length)return e;Array.isArray(e)||(e=[e]);let n=e.map((e=>{let n=e[t[0]];return Array.isArray(n)||(n=[n]),n})).reduce(((e,t)=>e.concat(t)),[]);return r(n,t.slice(1))};return r(t,i(e,n))},this.getAll=this.get.all,this.set=function(e,n,r={separator:"."}){e=i(e,r);let a=t;for(let t=0;t<e.length-1;t++)["__proto__","constructor","prototype"].includes(e[t])||(a=a[e[t]]=a[e[t]]||{});return e.length>0&&(a[e[e.length-1]]=n),this},this.exists=function(e,n={separator:"."}){const[r]=i(e,n).reduce((([e,t],n)=>[e&&"object"==typeof t&&n in t,(t||{})[n]]),[!0,t]);return r}},t.components=n,t.join=r,t.depth=function(e,t={separator:"."}){return i(e,t).length},t.append=function(e,t,n={separator:"."}){return r(i(e,n).concat(i(t,n)),n)},t.last=function(e,t={separator:"."}){let n=i(e,t);return n[n.length-1]},t.eatLast=function(e,t={separator:"."}){return r(i(e,t).slice(0,-1),t)},t.first=a,t.eatFirst=function(e,t,n={separator:"."}){if("object"==typeof t&&(n=t,t=void 0),t||(t=a(e,n)),e=i(e,n),!o(t=i(t,n),e,n))throw new Error("`eat` is not with key path.");for(;t.length>0&&e[0]===t[0];)e=e.slice(1),t=t.slice(1);return r(e,n)},t.within=o,t.is=function(e,t,n={separator:"."}){return e=i(e,n),t=i(t,n),e.length===t.length&&e.every(((e,n)=>e===t[n]))}}));Nt.components,Nt.join,Nt.depth,Nt.append,Nt.last,Nt.eatLast,Nt.first,Nt.eatFirst,Nt.within,Nt.is;class Bt{static set(e,t){Bt.loadConfig(),void 0===Nt(Bt.config).get(e)?Nt(Bt.config).set(e,t):u.warn(`Attempted to modify an immutable config path: ${e}`)}static get(e){return Bt.loadConfig(),Nt(Bt.config).get(e)}static loadConfig(){void 0===Bt.config&&(Bt.config=globalThis.durangoConfiguration,void 0===Bt.config&&(Bt.config={},u.warn("Unable to load Configuration object from globalThis['durangoConfiguration']")))}static getConfig(){return Bt.loadConfig(),Bt.config}static reset(){Bt.config=void 0}}class Ut extends Error{constructor(e){super(`Unable to determine breakpoint for provided width: ${e}`)}}const zt=()=>(e=>{const t=Bt.get("breakpoints"),n=Object.values(t).find((t=>e>=t.minimum&&e<t.maximum&&t));if(!n)throw new Ut(e);return n})(document.body.offsetWidth);var Vt;!function(e){e.Desktop="desktop",e.Tablet="tablet",e.Mobile="mobile"}(Vt||(Vt={}));const $t=()=>(e=>{const{[e]:t}=Bt.get("breakpoints");return t})(Vt.Mobile),Ht=()=>{return e=$t(),zt()===e;var e};var Jt,qt=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Wt="LinkableButton";let Gt=Jt=class extends It{constructor(e){super(Wt,e)}async init(){this.element=await nt.loadElement(Wt,this.options),super.init(),this.element.addEventListener("click",this.handleClick.bind(this))}handleClick(){this.activateDoubleLink()}getDoubleLinkableOptions(){return{foregroundUrl:this.getIsPopup()?this.getHref2():this.getHref(),backgroundUrl:this.getIsPopup()?this.getHref():this.getHref2()}}getIsPopup(){return this.options.popup||this.element.dataset.popup}getHref(){return this.options.href||this.element.dataset.href}getHref2(){return this.options.href2||this.element.dataset.href2}static createElement(e="",t){const n=It.createElement(e,t);return n.classList.add("bp-c-linkableButton"),n}static createFromDataAttributes(e){const t={element:e,href:e.dataset.href??"",popup:e.dataset.popup||!1,href2:e.dataset.href2??""};return new Jt(t)}};Gt=Jt=qt([v(Wt),e=>{const{prototype:t}=e;t.activateDoubleLink=async function(){const{foregroundUrl:e,backgroundUrl:t}="function"==typeof this.getDoubleLinkableOptions?this.getDoubleLinkableOptions():this.options.doubleLinkableOptions;if((await(async()=>Ft(Mt.MobileWeb))()||Ht())&&t&&e)return Lt.open(e),void Lt.redirect(t);t&&Lt.open(t),e&&Lt.redirect(e)}},Me({href:"",popup:!1,href2:""})],Gt),nt.instantiate(Wt,{fromDom:!0,fromMutation:!0,fromHydrationQueue:!1});var Qt,Kt=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Yt="ContentModule",Xt="js-contentModule_trigger",Zt="js-contentModule_target";let en=Qt=class extends nt{constructor(e){super(Yt,e)}static create(e){return new Qt(e)}async init(){super.init(),this.element=await nt.loadElement(Yt,this.options),this.initVisibilityToggle()}initVisibilityToggle(){this.triggerElement=this.element.querySelector(`.${Xt}`),this.targetElements=Array.from(this.element.querySelectorAll(`.${Zt}`));const e=new De({classNames:{base:Ct.Default,visible:Ct.Visible},element:this.triggerElement}),t=new _e({classNames:{base:Ct.Default,visible:Ct.Visible},elements:this.targetElements}),n=this.element.querySelector(`.${Ct.Indicator}`),i=new St({element:n,inactiveIconName:"arrowDown--xsmall",animation:ft.Flip,defaultState:!1});this.visibilityToggle=new Dt({triggerStrategy:e,targetStrategy:t,indicatorStrategy:i})}};en=Qt=Kt([v(Yt)],en),nt.instantiate(Yt);class tn{constructor(e,t,n){this.postId=e,this.vote=t,this.forumId=n,this.voteTypeId="1"}setVoteTypeId(e){this.voteTypeId=e}getPostId(){return this.postId}getVote(){return this.vote}getVoteTypeId(){return this.voteTypeId}getForumId(){return this.forumId}}var nn,rn=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const an="VotingThumbs",on="/forums/sdthreadrate_ajax.php";let sn=nn=class extends nt{constructor(e){super(an,e)}async init(){super.init(),void 0===this.element&&(this.element=await nt.loadElement(an,this.options)),this.element&&(this.element.addEventListener("click",this.handleThumbsClick.bind(this)),this.element.addEventListener("vote",this.handleVote.bind(this)))}async registerVote(e){const t=await fetch(on,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(nn.getData(e)).toString()}),n=await t.json();if(200!==t.status){const e=new CustomEvent("voteError",{detail:n});document.dispatchEvent(e)}else{const e=new CustomEvent("vote",{detail:{vote:n.htmlbit["@attributes"].voted>0?"up":"down"}});this.element.dispatchEvent(e)}return t}handleThumbsClick(e){e.stopPropagation(),e.preventDefault();const t=new tn(this.getPostId(),this.getVote(e.target),this.getForumId());if("1"===t.getVote())this.registerVote(t);else{const n=new CustomEvent("showVoteWidget",{detail:{dealVote:t,clickTarget:e.currentTarget,votingThumbs:this}});document.dispatchEvent(n)}}handleVote(e){"up"===e.detail.vote?(this.element.classList.remove(it("bp-c-votingThumbs","down")),this.element.classList.add(it("bp-c-votingThumbs","up"))):"down"===e.detail.vote&&(this.element.classList.remove(it("bp-c-votingThumbs","up")),this.element.classList.add(it("bp-c-votingThumbs","down")))}static getData(e){return{postid:e.getPostId(),vote:e.getVote(),votetypeid:e.getVoteTypeId(),securitytoken:window.SECURITYTOKEN,response_type:"json",controltype:"modern",do:"sdthreadratevote",ajax:"1",where_from:on}}getForumId(){return this.element.dataset.forumId}getPostId(){return this.element.dataset.postId}getVote(e){return e.closest(`#${this.element.id} > [data-vote]`).dataset.vote}};sn=nn=rn([v(an)],sn),nt.instantiate(an);var cn=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let ln=class extends nt{};var dn;ln=cn([v("RatingStars")],ln),nt.instantiate("RatingStars"),function(e){e.Default="bp-c-image",e.JavaScript="js-image"}(dn||(dn={}));const un=(e,t)=>{let n;return function(...i){clearTimeout(n),n=setTimeout((()=>t.apply(this,i)),e)}};var pn=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const hn="IntervalQueue";let fn=class{constructor(){this.inactive=new Map,this.intervals=new Map,this.callbacks=new Map,this.delays=new Map,this.intervalCount=0,this.registeredCount=0}add({callback:e,delay:t}){const n=(i=this.registeredCount,`${Date.now()}_${i}`);var i;return this.callbacks.has(n)||(this.registeredCount+=1,this.callbacks.set(n,e),this.delays.has(t)||this.delays.set(t,[]),this.delays.get(t).push(n),this.start(t)),n}start(e){this.intervals.has(e)||this.intervals.set(e,window.setInterval(this.process.bind(this,e),e))}process(e){this.delays.get(e).length<1||(this.intervalCount+=1,this.delays.get(e).forEach((e=>{this.callbacks.get(e)(this.intervalCount)})))}remove(e){if(!this.callbacks.has(e))return;let t;this.delays.forEach(((n,i,r)=>{n.includes(e)&&(t=i,r.set(i,n.filter((t=>t!==e))))})),this.inactive.set(e,{delay:t,callback:this.callbacks.get(e)}),this.callbacks.delete(e)}restart(e){if(!this.inactive.has(e))return;const t=this.inactive.get(e);this.callbacks.set(e,t.callback),this.delays.get(t.delay).push(e)}};fn=pn([v({key:hn,scope:f.Singleton})],fn);var gn=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const mn="AutoPlayableController",yn=it("bp-u-autoplayable_indicator","active"),vn=it("bp-u-autoplayable_content","active");class bn{constructor(e,t){this.cycling=e,this.queueKey=t}isCycling(){return this.cycling}getQueueKey(){return this.queueKey}}const wn={...m.createDependency(hn,f.Singleton)};let Sn=class{constructor(e){this.intervalQueue=e}start({elements:e,container:t,options:n}){const i=e.values().next().value,r=e.keys().next().value;if(this.setupInitialActiveTab({container:t,firstContent:i,firstIndicator:r,options:n}),r&&"number"!=typeof r&&this.bindIndicators({elements:e,container:t,options:n}),n&&!1===n.autoplay)return new bn(!1);if(n&&!1===n.cycleContent)return new bn(!1);let a=5e3,o=this.defaultTransitionCallback(t,n);return n&&(a=n.delay||a,o=n.transitionCallback?n.transitionCallback({elements:e,container:t,options:n}):o),new bn(!0,this.intervalQueue.add({delay:a,callback:o}))}stop(e){this.intervalQueue.remove(e)}restart(e){this.intervalQueue.restart(e)}setupInitialActiveTab({firstIndicator:e,firstContent:t,container:n,options:i}){n.querySelector(`.${vn}`)||(t.classList.add(vn),i.selectorSuffix&&t.classList.add(`${vn}-${i.selectorSuffix}`)),e&&"number"!=typeof e&&(n.querySelector(`.${yn}`)||(e.classList.add(yn),i.selectorSuffix&&e.classList.add(`${yn}-${i.selectorSuffix}`)))}bindIndicators({elements:e,container:t,options:n}){e.forEach(((i,r)=>{r.addEventListener("click",function(i){let r,a;n.selectorSuffix?(r=t.querySelector(`.${yn}-${n.selectorSuffix}`),a=t.querySelector(`.${vn}-${n.selectorSuffix}`)):(r=t.querySelector(`.${yn}`),a=t.querySelector(`.${vn}`));let o=i.target;for(;o.tagName.toLowerCase()!==r.tagName.toLowerCase();)o=o.parentElement;const s=e.get(o);this.changeActiveContent([s,a],[o,r],n)}.bind(this))}))}defaultTransitionCallback(e,t){return n=>{let i,r,a,o;return t.selectorSuffix?(o=e.querySelector(`.${yn}-${t.selectorSuffix}`),a=e.querySelector(`.${vn}-${t.selectorSuffix}`)):(o=e.querySelector(`.${yn}`),a=e.querySelector(`.${vn}`)),a&&(i=a.nextElementSibling,i||(i=a.parentElement.firstElementChild)),o&&(r=o.nextElementSibling,r||(r=o.parentElement.firstElementChild)),this.changeActiveContent([a,i],[o,r],t),{count:n}}}changeActiveContent(e,t,n){e.forEach((e=>{e&&(e.classList.toggle(vn),n.selectorSuffix&&e.classList.toggle(`${vn}-${n.selectorSuffix}`))})),t.forEach((e=>{e&&(e.classList.toggle(yn),n.selectorSuffix&&e.classList.toggle(`${yn}-${n.selectorSuffix}`))}))}};Sn=gn([v(mn,wn)],Sn);var An=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const _n={...m.createDependency(mn,f.Singleton)};class En{constructor(e,t,n,i){this.element=e,this.options=t,this.transitionCallback=n,this.intervalQueueKey=i}registerAutoplay(e,t){const n=this.buildElementsMap(),i={...this.options,transitionCallback:e},r=t.start({elements:n,options:i,container:this.element});r.isCycling()&&(this.intervalQueueKey=r.getQueueKey())}startAutoplay(e){this.intervalQueueKey&&e.restart(this.intervalQueueKey)}stopAutoplay(e){this.intervalQueueKey&&e.stop(this.intervalQueueKey)}buildElementsMap(){const e=new Map,t=this.element.querySelectorAll(".bp-u-autoplayable_indicator"),n=this.element.querySelectorAll(".bp-u-autoplayable_content");for(let i=0;i<n.length;i+=1)e.set(t[i]||i+1,n[i]);return e}}An([w(_n)],En.prototype,"registerAutoplay",null),An([w(_n)],En.prototype,"startAutoplay",null),An([w(_n)],En.prototype,"stopAutoplay",null);var Cn,kn=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Tn="CardCarousel";var Pn;!function(e){e.Default="bp-c-cardCarousel",e.JavaScript="js-cardCarousel",e.Track="js-cardCarousel_track",e.TrackInner="js-cardCarousel_trackInner",e.PreviousButton="js-cardCarousel_btn--prev",e.NextButton="js-cardCarousel_btn--next",e.Hide="hide",e.Disable="disable"}(Pn||(Pn={}));let Dn=Cn=class extends nt{constructor(e={autoplayOptions:{autoplay:!0,cycleContent:!0,delay:8e3}}){super(Tn,e),this.options=e;this.initState({currentPage:0,pagePositions:["0%"]})}static create(e={}){return new Cn(e)}async init(){super.init(),this.transitionCallback=this.autoplayableTransition.bind(this),this.element=await nt.loadElement(Tn,this.options),this.track=this.element.querySelector(`.${Pn.Track}`),this.trackInner=this.element.querySelector(`.${Pn.TrackInner}`),this.cards=this.trackInner.children;for(const e of this.cards)e.classList.add("bp-u-autoplayable_content");this.nextButton=this.element.querySelector(`.${Pn.NextButton}`),this.previousButton=this.element.querySelector(`.${Pn.PreviousButton}`),this.nextButton.addEventListener("click",this.nextSlides.bind(this)),this.previousButton.addEventListener("click",this.prevSlides.bind(this)),this.setPagePositions(),this.resizeObserver=new ResizeObserver(un(100,this.resizeSlides.bind(this))),this.resizeObserver.observe(this.track),this.resizeObserver.observe(this.trackInner),this.element.addEventListener("mouseenter",this.stopAutoplay.bind(this)),this.element.addEventListener("mouseleave",this.startAutoplay.bind(this))}static createFromDataAttributes(e){const t=JSON.parse(e.dataset.autoplayoptions),n={id:e.id,autoplayOptions:t};return new Cn(n)}async moveSlides(e,t){let n=this.getState().currentPage+t;const{pagePositions:i}=this.getState();n<0?n=i.length-1:n>=i.length&&(n=0),this.setState({currentPage:n}),this.track.style.transform=`translateX(-${i[n]}px)`,this.previousButton.classList.toggle(Pn.Disable,0===n),this.nextButton.classList.toggle(Pn.Disable,n>=i.length-1)}autoplayableTransition(){return e=>(this.moveSlides(this.element,1),e)}async nextSlides(){this.moveSlides(this.element,1)}async prevSlides(){this.moveSlides(this.element,-1)}async setPagePositions(){const e=[0],t=this.track.offsetWidth;for(let n=0;n<this.cards.length;n+=1){const i=this.cards[n];i.offsetLeft+i.offsetWidth-e[e.length-1]>t?n<this.cards.length-1?e.push(i.offsetLeft):e.push(this.trackInner.offsetWidth-t):n>=this.cards.length-1&&(e[e.length-1]=this.trackInner.offsetWidth-t)}const{currentPage:n}=this.getState();this.setState({pagePositions:e,currentPage:n>=e.length?e.length-1:n});const i=e.length<2;this.nextButton.classList.toggle(Pn.Hide,i),this.previousButton.classList.toggle(Pn.Hide,i)}async resizeSlides(){this.setPagePositions(),this.moveSlides(this.element,0)}};var xn,On,In,Rn,jn;Dn=Cn=kn([ve(Tn),v(Tn),function({transitionCallback:e}={}){return t=>{const{prototype:n}=t;n.stopAutoplay=function(){this.autoPlayableDecorator.stopAutoplay()},n.startAutoplay=function(){this.autoPlayableDecorator.startAutoplay()},n.registerAutoplay=function(){const t=new En(this.element,this.options.autoplayOptions,this.intervalQueueKey);this.autoPlayableDecorator=t,this.autoPlayableDecorator.registerAutoplay(this.transitionCallback||e)},nt.addToInitQueue(t.name,n.registerAutoplay)}}()],Dn),nt.instantiate(Tn,{fromHydrationQueue:!0,fromDom:!0,fromMutation:!0}),function(e){e.Default="bp-c-card",e.JavaScript="js-card",e.Header="bp-c-card_header",e.JavaScriptHeader="js-card_header"}(xn||(xn={})),(On||(On={})).Default="bp-c-paragraph",(In||(In={})).Class="class",(Rn||(Rn={})).ClassName="className",(jn||(jn={})).OnClick="onClick";const Mn={[In.Class]:Rn.ClassName},Ln=(e,t)=>{for(const[n,i]of Object.entries(t)){if(Object.values(In).includes(n))throw new Error(`Using reserved attribute name "${In[at(n)]}". Please use "${Mn[n]}" instead.`);if(n===Rn.ClassName&&"string"==typeof i){i.split(" ").forEach((t=>e.classList.add(t)))}else if(n===jn.OnClick){if("function"!=typeof i)throw new Error(`Value for onClick event listener is not of type "function". Passed type: "${typeof i}"`);e.addEventListener("click",i)}else"string"==typeof i&&e.setAttribute(n,i)}return e};window.hydrationQueue=window.hydrationQueue||[];const Fn={},Nn=e=>{Object.keys(e).forEach((t=>{t in Fn?Fn[t].push(e[t]):Fn[t]=[e[t]]}))};var Bn;window.hydrationQueue.forEach(Nn),window.hydrationQueue=[],window.hydrationQueue.push=Nn,(Bn||(Bn={})).CatalogItem="catalogItem";const Un=new Set,zn=new Set,Vn=new Set,$n=new Set,Hn=e=>{var t;(g(t=e)&&t.length&&t in Fn&&Array.isArray(Fn[t])?Fn[t]:null==t?Fn:[]).forEach((t=>{"id"in t?$n.has(t.id)||(m.resolve(e,t),$n.add(t.id)):m.resolve(e,t)}))},Jn=e=>{e.forEach((e=>{if(e.dataset[Bn.CatalogItem]){const t=m.getConstructor(e.dataset[Bn.CatalogItem]);void 0===t?u.error(`Attempt to hydrate unknown catalog item '${t}' from data attributes`):Ie(t)&&t.createFromDataAttributes(e)}}))},qn=(e,t=document)=>{const n=t.querySelectorAll(`[data-${ot(Bn.CatalogItem)}="${e}"]`);Jn(n)},Wn=e=>{const t=[];e.forEach((e=>{e.addedNodes.forEach((e=>{if(!xe(e))return;const n=e.dataset[Bn.CatalogItem];g(n)&&Un.has(n)&&t.push(e);e.querySelectorAll(`[data-${Bn.CatalogItem}]`).forEach((e=>{const n=e,i=n.dataset[Bn.CatalogItem];g(i)&&Un.has(i)&&t.push(n)}))}))})),t.length&&Jn(t)};s.domready.then((()=>{var e;new MutationObserver(Wn).observe(document,{subtree:!0,childList:!0}),g(e)?Hn(e):e||Vn.forEach(Hn),((e,t)=>{g(e)?qn(e,t):e||zn.forEach((e=>{qn(e,t)}))})()}));const Gn={fromHydrationQueue:!0,fromDom:!1,fromMutation:!1},Qn=new Map,Kn=e=>Qn.has(e),Yn=(e,t,n={})=>{const i={...n,instantiate:{...Gn,..."instantiate"in n?n.instantiate:{}},name:t};Kn(e)||(Qn.set(e,i),i.instantiate.fromHydrationQueue&&(e=>{Vn.add(e)})(t),i.instantiate.fromDom&&(e=>{zn.add(e)})(t),i.instantiate.fromMutation&&(e=>{Un.add(e)})(t))},Xn=e=>Kn(e)?(e=>Kn(e)?Qn.get(e):(u.error(`Configuration requested for un-registered module '${e.name}'`),null))(e).name:(u.error(`Module name requested for un-registered module '${e.name}'`),null),Zn=(e,t)=>n=>{Yn(n,e,{...t})};var ei=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const ti={...m.createDependency(Ve,f.Singleton)};let ni=class{constructor(e={}){this.options=e,this.hasBeenInitialized=!1,this.options=Le(this)?Ne(this,e):e,Object.freeze(this.options),s.domready.then(this.init.bind(this)).then(this.registerElement.bind(this,Xn(this.constructor))).then(this.processInitQueue.bind(this)).then(this.initComplete.bind(this))}init(){this.hasBeenInitialized=!1}async processInitQueue(e){await e.fire(this.constructor.name,"init",this)}initComplete(){this.hasBeenInitialized=!0}destroy(e){}async isInitialized(){try{return await Je("hasBeenInitialized",this),!0}catch(e){return!1}}registerElement(e){this.element&&Re.add(this.element,e,this)}static addToInitQueue(e,t,n){n.add(e,"init",t)}async isElementAvailable(){try{return await Je("element",this),!0}catch(e){return!1}}getElement(){return this.element}static async loadElement(e,t){if(await s.domready,"object"==typeof t.element&&t.element instanceof HTMLElement)return t.element;if("string"!=typeof t.id)return;return document.getElementById(t.id)}};ei([w(ti)],ni.prototype,"processInitQueue",null),ei([w(ti)],ni,"addToInitQueue",null),ni=ei([Be],ni);var ii=ni;class ri extends ii{static parseJsx(e,t,...n){const i=t||{};if("string"==typeof e)return ri.createHtmlElement(e,i,...n);const r=new e(i?.options);if("createElement"in r){const e=Ln(r.createElement(i),i);return n?ri.handleChildren(e,...n):e}}static createHtmlElement(e,t,...n){let i;return i="fragment"===e?document.createDocumentFragment():document.createElement(e),n&&(i=ri.handleChildren(i,...n)),t&&(i=Ln(i,t)),i}static handleChildren(e,...t){return t.forEach((t=>{Array.isArray(t)?t.forEach((t=>ri.handleChild(e,t))):ri.handleChild(e,t)})),e}static handleChild(e,t){if(xe(t)||Oe(t))e.appendChild(t);else if("string"!=typeof t)"number"==typeof t&&e.appendChild(document.createTextNode(t.toString(10)));else{const n=document.createTextNode(t);e.appendChild(n)}}}var ai,oi,si;!function(e){e.Class="class"}(ai||(ai={})),function(e){e.ClassName="className"}(oi||(oi={})),function(e){e.OnClick="onClick"}(si||(si={}));const ci={[ai.Class]:oi.ClassName};class li extends nt{static parseJsx(e,t,...n){if("string"==typeof e)return li.createHtmlElement(e,t,...n);const i=new e(t?.options);if("createElement"in i){const e=i.createElement(t);if(n)return li.handleChildren(e,...n)}}static createHtmlElement(e,t,...n){let i;return i="fragment"===e?document.createDocumentFragment():document.createElement(e),n&&(i=li.handleChildren(i,...n)),t&&(i=((e,t)=>{for(const[n,i]of Object.entries(t)){if(Object.values(ai).includes(n))throw new Error(`Using reserved attribute name "${ai[at(n)]}". Please use "${ci[n]}" instead.`);if(n===oi.ClassName)i.split(" ").forEach((t=>e.classList.add(t)));else if(n===si.OnClick){if("function"!=typeof i)throw new Error(`Value for onClick event listener is not of type "function". Passed type: "${typeof i}"`);e.addEventListener("click",i)}else"string"==typeof i&&e.setAttribute(n,i)}return e})(i,t)),i}static handleChildren(e,...t){return t.forEach((t=>{Array.isArray(t)?t.forEach((t=>li.handleChild(e,t))):li.handleChild(e,t)})),e}static handleChild(e,t){if(xe(t)||Oe(t))e.appendChild(t);else if("string"!=typeof t)"number"==typeof t&&e.appendChild(document.createTextNode(t.toString(10)));else{const n=document.createTextNode(t);e.appendChild(n)}}}var di;!function(e){e[e.Day=0]="Day",e[e.Hour=1]="Hour",e[e.Minute=2]="Minute",e[e.Second=3]="Second"}(di||(di={}));const ui={[di.Second]:1e3,[di.Minute]:6e4,[di.Hour]:36e5,[di.Day]:864e5};function pi(e,t,n){return new Date(e.getTime()+n*ui[t])}function hi(e){return"number"!=typeof e&&("+"===e[0]||"-"===e[0])}function fi(e,t=di.Second){if(e instanceof Date)return e;if(hi(e)){const i=hi(n=e)?parseInt(n.substr(1),10):(u.error(`Invalid relative time string provided: ${n}`),0);if("+"===e[0])return pi(new Date,t,i);if("-"===e[0])return function(e,t,n){return pi(e,t,-1*n)}(new Date,t,i)}else if("number"==typeof e)return new Date(1e3*e);var n;const i=new Date(e);return Number.isNaN(i.getTime())&&u.error(`Invalid date string provided: ${e}`),i}function gi(e){return function(e,t){const n=fi(e),i=fi(t);return Math.floor(i.getTime()-n.getTime())}(new Date,e)}var mi,yi=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const vi="CountdownTimer";var bi;!function(e){e.JavaScript="js-countdownTimer",e.Default="bp-c-countdownTimer"}(bi||(bi={}));const wi={...m.createDependency(hn,f.Singleton)};var Si;!function(e){e.Days="days",e.Hours="hours",e.Minutes="minutes",e.Seconds="seconds"}(Si||(Si={}));let Ai=mi=class extends ri{constructor(e,t={}){if(super(t),this.unitElements={days:null,hours:null,minutes:null,seconds:null},void 0===e)return;this.intervalQueue=e;const n={endTime:mi.createEndDate(t.endTime),duration:{duration:null,days:null,hours:null,minutes:null,seconds:null},endText:t.endText};this.initState(n)}async init(){super.init(),this.element=await ri.loadElement(vi,this.options),this.element&&(this.options.tiny||(this.unitElements.days=this.element.querySelector('[data-unit="days"]'),this.unitElements.hours=this.element.querySelector('[data-unit="hours"]')),this.unitElements.minutes=this.element.querySelector('[data-unit="minutes"]'),this.unitElements.seconds=this.element.querySelector('[data-unit="seconds"]'),window.addEventListener("resize",this.onResize.bind(this)),ct(this.element)&&this.startTimer())}createElement(e){const t=`df${Math.floor(1e3*Math.random())}${Math.floor(1e3*Math.random())}-${vi}`;let n="";return e.tiny||(n=li.parseJsx("fragment",null,li.parseJsx("dt",{className:"bp-c-countdownTimer_label bp-c-countdownTimer_label--days"},"Days"),li.parseJsx("dd",{className:"bp-c-countdownTimer_count bp-c-countdownTimer_count--days","data-unit":"days"},"000"),li.parseJsx("dt",{className:"bp-c-countdownTimer_label bp-c-countdownTimer_label--hours"},"Hours"),li.parseJsx("dd",{className:"bp-c-countdownTimer_count bp-c-countdownTimer_count--hours","data-unit":"hours"},"00"))),li.parseJsx("div",{id:t,className:"bp-c-countdownTimer js-button","data-end-time":e.endTime,"data-tiny":e.tiny?"true":"","data-catalog-item":vi,"data-catalogItem":vi},li.parseJsx("dl",{className:"bp-c-descriptionList bp-c-descriptionList--unstyled bp-c-countdownTimer_units"},n,li.parseJsx("dt",{className:"bp-c-countdownTimer_label bp-c-countdownTimer_label--minutes"},"Minutes"),li.parseJsx("dd",{className:"bp-c-countdownTimer_count bp-c-countdownTimer_count--minutes","data-unit":"minutes"},"00"),li.parseJsx("dt",{className:"bp-c-countdownTimer_label bp-c-countdownTimer_label--seconds"},"Seconds"),li.parseJsx("dd",{className:"bp-c-countdownTimer_count bp-c-countdownTimer_count--seconds","data-unit":"seconds"},"00")))}startTimer(){this.queueKey=this.intervalQueue.add({callback:this.update.bind(this),delay:1e3}),this.isTimerActive=!0}stopTimer(){this.intervalQueue.remove(this.queueKey),this.isTimerActive=!1}onResize(){const{duration:e}=this.getState();ct(this.element)&&!this.isTimerActive&&e.seconds?this.startTimer():!ct(this.element)&&this.isTimerActive&&this.stopTimer()}update(){const e=function(e){let t=0,n=0,i=0,r=0;return e>0&&(t=Math.floor(e/ui[di.Day]),n=Math.floor((e-t*ui[di.Day])/ui[di.Hour]),i=Math.floor((e-t*ui[di.Day]-n*ui[di.Hour])/ui[di.Minute]),r=Math.floor((e-t*ui[di.Day]-n*ui[di.Hour]-i*ui[di.Minute])/ui[di.Second])),{duration:e,days:t,hours:n,minutes:i,seconds:r}}(gi(this.getState().endTime)),{duration:t}=this.getState();null===t.duration?this.setAsActive():e.duration<=1e3&&(this.options.tiny||(e.days=0,e.hours=0),e.minutes=0,e.seconds=0,this.stopTimer(),this.displayEndText()),t.days===e.days||this.options.tiny||this.updateDays(e.days),t.hours===e.hours||this.options.tiny||this.updateHours(e.hours),t.minutes!==e.minutes&&this.updateMinutes(e.minutes),t.seconds!==e.seconds&&this.updateSeconds(e.seconds),this.setState({duration:e})}displayEndText(){if(this.getState().endText){const e=this.element.querySelector("dl"),t=document.createElement("span"),n=document.createTextNode(this.getState().endText);t.classList.add(rt(bi.Default,"endText")),t.appendChild(n),e.replaceWith(t)}}updateUnitElement(e,t){this.options.tiny?this.unitElements[e].textContent=t.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}):this.unitElements[e].textContent=t.toString()}updateDays(e){this.updateUnitElement(Si.Days,e)}updateHours(e){this.updateUnitElement(Si.Hours,e)}updateMinutes(e){this.updateUnitElement(Si.Minutes,e)}updateSeconds(e){this.updateUnitElement(Si.Seconds,e)}setAsActive(){this.element.classList.remove(it(bi.Default,"inactive"))}static createEndDate(e){return fi(e,di.Second)}static createFromDataAttributes(e){const t={id:e.id,endTime:e.dataset.endTime,tiny:!!e.dataset.tiny};return new mi(m.get(hn,f.Singleton),t)}};Ai=mi=yi([ve(vi),v(vi,wi),Me({endTime:0,endText:"",tiny:!1}),Zn(vi,{instantiate:{fromHydrationQueue:!0,fromDom:!0,fromMutation:!0}})],Ai);var _i;const Ei="DealAlertButton";let Ci=_i=class extends nt{constructor(e){super(Ei,e),this.state=e.isAdded?"success":"ready"}static create(e){return new _i(e)}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield nt.loadElement(Ei,this.options),this.element.addEventListener("click",this.onClick.bind(this))}))}onClick(){return t(this,void 0,void 0,(function*(){if("ready"!==this.state)return;this.setStatePending();const e=Object.assign(Object.assign({do:"addByCriteriaId",ajax:"1"},this.options.dealAlert),{securitytoken:this.options.securityToken});let t;try{const n=yield fetch("/forums/sddealalerts_ajax.php",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});t=yield n.json()}catch(e){return void this.clearState()}if(t.success)this.setStateSuccess();else if(t.doLogin){const e=new URLSearchParams({action_source:this.options.dealAlert.source,url:window.location.pathname+window.location.search});window.location.href=`/forums/register.php?${e}`}else this.clearState()}))}clearState(){this.state="ready",this.element.disabled=!1,this.element.classList.remove(it("bp-p-dealAlertButton","pending"),it("bp-p-dealAlertButton","success"))}setStatePending(){this.clearState(),this.state="pending",this.element.disabled=!0,this.element.classList.add(it("bp-p-dealAlertButton","pending"))}setStateSuccess(){this.clearState(),this.state="success",this.element.disabled=!0,this.element.classList.add(it("bp-p-dealAlertButton","success"));this.element.getElementsByClassName(it("js-dealAlertButton","content"))[0].textContent="Alert Added"}};var ki;Ci=_i=e([v(Ei)],Ci),nt.instantiate(Ei);const Ti="InlineResponse",Pi="bp-p-inlineResponse_form",Di="bp-p-inlineResponse_form--hide",xi="bp-p-inlineResponse_success",Oi="bp-p-inlineResponse_error",Ii="bp-p-inlineResponse_response--show",Ri="bp-p-inlineResponse_errorMessage";let ji=ki=class extends ii{constructor(e){super(e)}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield ii.loadElement(Ti,this.options),this.form=this.element.querySelector(`.${Pi}`),this.errorElement=this.element.querySelector(`.${Oi}`),this.errorMessageElement=this.element.querySelector(`.${Ri}`),this.successElement=this.element.querySelector(`.${xi}`),this.form.addEventListener("submit",this.submitForm.bind(this))}))}submitForm(e){return t(this,void 0,void 0,(function*(){e.preventDefault();const t=(n=this.form.elements,[].reduce.call(n,((e,t)=>{const n=Object.assign({},e);var i,r;return(r=t).name&&r.value&&(e=>!["checkbox","radio"].includes(e.type)||e.checked)(t)&&((e=>"checkbox"===e.type)(t)?n[t.name]=(e[t.name]||[]).concat(t.value):(e=>e.options&&e.multiple)(t)?n[t.name]=(i=t,[].reduce.call(i,((e,t)=>t.selected?e.concat(t.value):e),[])):n[t.name]=t.value),n}),{}));var n;const i=this.form.getAttribute("action"),r=this.form.getAttribute("method");let a;try{const e=yield fetch(i,{method:r,credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});a=yield e.json()}catch(e){return void this.showMessage(this.errorElement)}a.success?this.showMessage(this.successElement):this.showMessage(this.errorElement),a.errors&&(this.errorMessageElement.innerHTML=a.errors.join("<br />"))}))}showMessage(e){return t(this,void 0,void 0,(function*(){this.form.classList.add(Di),e.classList.add(Ii)}))}static createFromDataAttributes(e){const t={id:e.id,action:e.dataset.action,method:e.dataset.method};return new ki(t)}};ji=ki=e([v(Ti),Zn(Ti,{instantiate:{fromDom:!0,fromMutation:!0,fromHydrationQueue:!1}})],ji);var Mi,Li=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let Fi=Mi=class{static getNamespacedEvent(e,t){return`blueprint:${e}:${t}`}static register(e,t){const n=Mi.getNamespacedEvent(e,t);Mi.events.has(n)||(Mi.events.add(n),Mi.listeners.set(n,[]))}static fire(e,t,n){const i=Mi.getNamespacedEvent(e,t);if(!Mi.events.has(i))throw Error(`Unable to fire event that has not been registered: ${t} in ${e} namespace`);const r=Mi.listeners.get(i),a=Mi.createMediatorEvent(i,n);r.forEach((e=>e(a)))}static addListener(e,t,n){const i=Mi.getNamespacedEvent(e,t);Mi.listeners.get(i).push(n)}static removeListener(e,t,n){const i=Mi.getNamespacedEvent(e,t),r=Mi.listeners.get(i).filter((e=>e!==n));Mi.listeners.set(i,r)}static createMediatorEvent(e,t){return new CustomEvent(e,{detail:t||null})}};Fi.events=new Set,Fi.listeners=new Map,Fi=Mi=Li([v("Mediator")],Fi);var Ni=Fi;function Bi(e,t){return n=>{const{prototype:i}=n;return t.forEach((t=>Ni.register(e,t))),i.mediate=function(t,n={}){Ni.fire(e,t,n)},n}}const Ui="HolidaySeoBlock";var zi,Vi,$i;!function(e){e.Default="bp-r-holidaySeoBlock",e.JavaScript="js-holidaySeoBlock",e.Text="bp-r-holidaySeoBlock_readMoreText",e.TextMore="bp-r-holidaySeoBlock_readMoreText--show",e.Button="bp-r-holidaySeoBlock_readMore",e.ButtonShow="bp-r-holidaySeoBlock_readMore--show"}(zi||(zi={})),function(e){e.Default="Read More",e.On="Read Less"}(Vi||(Vi={})),($i||($i={})).Click="click";let Hi=class extends nt{constructor(e){super(Ui,e),this.options=e,this.readMoreOnClick=()=>{const e=this.readMoreButton.childNodes[0];this.text.classList.toggle(zi.TextMore),e.nodeValue!==Vi.Default?e.nodeValue=Vi.Default:e.nodeValue=Vi.On}}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield nt.loadElement(Ui,this.options),this.text=this.element.querySelector(`.${zi.Text}`),this.readMoreButton=this.element.querySelector(`.${zi.Button}`),this.readMoreButton.addEventListener($i.Click,this.readMoreOnClick.bind(this))}))}};Hi=e([v(Ui),Bi(Ui,Object.values($i))],Hi),nt.instantiate(Ui);var Ji=l((function(e,t){
/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */
e.exports=function(){function e(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var t=Object.hasOwnProperty,n=Object.setPrototypeOf,i=Object.isFrozen,r=Object.getPrototypeOf,a=Object.getOwnPropertyDescriptor,o=Object.freeze,s=Object.seal,c=Object.create,l="undefined"!=typeof Reflect&&Reflect,d=l.apply,u=l.construct;d||(d=function(e,t,n){return e.apply(t,n)}),o||(o=function(e){return e}),s||(s=function(e){return e}),u||(u=function(t,n){return new(Function.prototype.bind.apply(t,[null].concat(e(n))))});var p=A(Array.prototype.forEach),h=A(Array.prototype.pop),f=A(Array.prototype.push),g=A(String.prototype.toLowerCase),m=A(String.prototype.match),y=A(String.prototype.replace),v=A(String.prototype.indexOf),b=A(String.prototype.trim),w=A(RegExp.prototype.test),S=_(TypeError);function A(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return d(e,t,i)}}function _(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return u(e,n)}}function E(e,t){n&&n(e,null);for(var r=t.length;r--;){var a=t[r];if("string"==typeof a){var o=g(a);o!==a&&(i(t)||(t[r]=o),a=o)}e[a]=!0}return e}function C(e){var n=c(null),i=void 0;for(i in e)d(t,e,[i])&&(n[i]=e[i]);return n}function k(e,t){for(;null!==e;){var n=a(e,t);if(n){if(n.get)return A(n.get);if("function"==typeof n.value)return A(n.value)}e=r(e)}function i(e){return console.warn("fallback value for",e),null}return i}var T=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),x=o(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),I=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R=o(["#text"]),j=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),M=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),N=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),B=s(/<%[\s\S]*|[\s\S]*%>/gm),U=s(/^data-[\-\w.\u00B7-\uFFFF]/),z=s(/^aria-[\-\w]+$/),V=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=s(/^(?:\w+script|data):/i),H=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function q(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var W=function(){return"undefined"==typeof window?null:window},G=function(e,t){if("object"!==(void 0===e?"undefined":J(e))||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(),t=function(e){return Q(e)};if(t.version="2.3.1",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n=e.document,i=e.document,r=e.DocumentFragment,a=e.HTMLTemplateElement,s=e.Node,c=e.Element,l=e.NodeFilter,d=e.NamedNodeMap,u=void 0===d?e.NamedNodeMap||e.MozNamedAttrMap:d,A=e.Text,_=e.Comment,K=e.DOMParser,Y=e.trustedTypes,X=c.prototype,Z=k(X,"cloneNode"),ee=k(X,"nextSibling"),te=k(X,"childNodes"),ne=k(X,"parentNode");if("function"==typeof a){var ie=i.createElement("template");ie.content&&ie.content.ownerDocument&&(i=ie.content.ownerDocument)}var re=G(Y,n),ae=re&&Fe?re.createHTML(""):"",oe=i,se=oe.implementation,ce=oe.createNodeIterator,le=oe.createDocumentFragment,de=oe.getElementsByTagName,ue=n.importNode,pe={};try{pe=C(i).documentMode?i.documentMode:{}}catch(e){}var he={};t.isSupported="function"==typeof ne&&se&&void 0!==se.createHTMLDocument&&9!==pe;var fe=N,ge=B,me=U,ye=z,ve=$,be=H,we=V,Se=null,Ae=E({},[].concat(q(T),q(P),q(D),q(O),q(R))),_e=null,Ee=E({},[].concat(q(j),q(M),q(L),q(F))),Ce=null,ke=null,Te=!0,Pe=!0,De=!1,xe=!1,Oe=!1,Ie=!1,Re=!1,je=!1,Me=!1,Le=!0,Fe=!1,Ne=!0,Be=!0,Ue=!1,ze={},Ve=null,$e=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),He=null,Je=E({},["audio","video","img","source","image","track"]),qe=null,We=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml",Ye=Ke,Xe=!1,Ze=null,et=i.createElement("form"),tt=function(e){Ze&&Ze===e||(e&&"object"===(void 0===e?"undefined":J(e))||(e={}),e=C(e),Se="ALLOWED_TAGS"in e?E({},e.ALLOWED_TAGS):Ae,_e="ALLOWED_ATTR"in e?E({},e.ALLOWED_ATTR):Ee,qe="ADD_URI_SAFE_ATTR"in e?E(C(We),e.ADD_URI_SAFE_ATTR):We,He="ADD_DATA_URI_TAGS"in e?E(C(Je),e.ADD_DATA_URI_TAGS):Je,Ve="FORBID_CONTENTS"in e?E({},e.FORBID_CONTENTS):$e,Ce="FORBID_TAGS"in e?E({},e.FORBID_TAGS):{},ke="FORBID_ATTR"in e?E({},e.FORBID_ATTR):{},ze="USE_PROFILES"in e&&e.USE_PROFILES,Te=!1!==e.ALLOW_ARIA_ATTR,Pe=!1!==e.ALLOW_DATA_ATTR,De=e.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=e.SAFE_FOR_TEMPLATES||!1,Oe=e.WHOLE_DOCUMENT||!1,je=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,Le=!1!==e.RETURN_DOM_IMPORT,Fe=e.RETURN_TRUSTED_TYPE||!1,Re=e.FORCE_BODY||!1,Ne=!1!==e.SANITIZE_DOM,Be=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||we,Ye=e.NAMESPACE||Ke,xe&&(Pe=!1),Me&&(je=!0),ze&&(Se=E({},[].concat(q(R))),_e=[],!0===ze.html&&(E(Se,T),E(_e,j)),!0===ze.svg&&(E(Se,P),E(_e,M),E(_e,F)),!0===ze.svgFilters&&(E(Se,D),E(_e,M),E(_e,F)),!0===ze.mathMl&&(E(Se,O),E(_e,L),E(_e,F))),e.ADD_TAGS&&(Se===Ae&&(Se=C(Se)),E(Se,e.ADD_TAGS)),e.ADD_ATTR&&(_e===Ee&&(_e=C(_e)),E(_e,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&E(qe,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Ve===$e&&(Ve=C(Ve)),E(Ve,e.FORBID_CONTENTS)),Be&&(Se["#text"]=!0),Oe&&E(Se,["html","head","body"]),Se.table&&(E(Se,["tbody"]),delete Ce.tbody),o&&o(e),Ze=e)},nt=E({},["mi","mo","mn","ms","mtext"]),it=E({},["foreignobject","desc","title","annotation-xml"]),rt=E({},P);E(rt,D),E(rt,x);var at=E({},O);E(at,I);var ot=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:Ke,tagName:"template"});var n=g(e.tagName),i=g(t.tagName);if(e.namespaceURI===Qe)return t.namespaceURI===Ke?"svg"===n:t.namespaceURI===Ge?"svg"===n&&("annotation-xml"===i||nt[i]):Boolean(rt[n]);if(e.namespaceURI===Ge)return t.namespaceURI===Ke?"math"===n:t.namespaceURI===Qe?"math"===n&&it[i]:Boolean(at[n]);if(e.namespaceURI===Ke){if(t.namespaceURI===Qe&&!it[i])return!1;if(t.namespaceURI===Ge&&!nt[i])return!1;var r=E({},["title","style","font","a","script"]);return!at[n]&&(r[n]||!rt[n])}return!1},st=function(e){f(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ae}catch(t){e.remove()}}},ct=function(e,n){try{f(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(e){f(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!_e[e])if(je||Me)try{st(n)}catch(e){}else try{n.setAttribute(e,"")}catch(e){}},lt=function(e){var t=void 0,n=void 0;if(Re)e="<remove></remove>"+e;else{var r=m(e,/^[\r\n\t ]+/);n=r&&r[0]}var a=re?re.createHTML(e):e;if(Ye===Ke)try{t=(new K).parseFromString(a,"text/html")}catch(e){}if(!t||!t.documentElement){t=se.createDocument(Ye,"template",null);try{t.documentElement.innerHTML=Xe?"":a}catch(e){}}var o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),Ye===Ke?de.call(t,Oe?"html":"body")[0]:Oe?t.documentElement:o},dt=function(e){return ce.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ut=function(e){return!(e instanceof A||e instanceof _||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof u&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},pt=function(e){return"object"===(void 0===s?"undefined":J(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":J(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ht=function(e,n,i){he[e]&&p(he[e],(function(e){e.call(t,n,i,Ze)}))},ft=function(e){var n=void 0;if(ht("beforeSanitizeElements",e,null),ut(e))return st(e),!0;if(m(e.nodeName,/[\u0080-\uFFFF]/))return st(e),!0;var i=g(e.nodeName);if(ht("uponSanitizeElement",e,{tagName:i,allowedTags:Se}),!pt(e.firstElementChild)&&(!pt(e.content)||!pt(e.content.firstElementChild))&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return st(e),!0;if("select"===i&&w(/<template/i,e.innerHTML))return st(e),!0;if(!Se[i]||Ce[i]){if(Be&&!Ve[i]){var r=ne(e)||e.parentNode,a=te(e)||e.childNodes;if(a&&r)for(var o=a.length-1;o>=0;--o)r.insertBefore(Z(a[o],!0),ee(e))}return st(e),!0}return e instanceof c&&!ot(e)?(st(e),!0):"noscript"!==i&&"noembed"!==i||!w(/<\/no(script|embed)/i,e.innerHTML)?(xe&&3===e.nodeType&&(n=e.textContent,n=y(n,fe," "),n=y(n,ge," "),e.textContent!==n&&(f(t.removed,{element:e.cloneNode()}),e.textContent=n)),ht("afterSanitizeElements",e,null),!1):(st(e),!0)},gt=function(e,t,n){if(Ne&&("id"===t||"name"===t)&&(n in i||n in et))return!1;if(Pe&&!ke[t]&&w(me,t));else if(Te&&w(ye,t));else{if(!_e[t]||ke[t])return!1;if(qe[t]);else if(w(we,y(n,be,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(n,"data:")||!He[e])if(De&&!w(ve,y(n,be,"")));else if(n)return!1}return!0},mt=function(e){var n=void 0,i=void 0,r=void 0,a=void 0;ht("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(a=o.length;a--;){var c=n=o[a],l=c.name,d=c.namespaceURI;if(i=b(n.value),r=g(l),s.attrName=r,s.attrValue=i,s.keepAttr=!0,s.forceKeepAttr=void 0,ht("uponSanitizeAttribute",e,s),i=s.attrValue,!s.forceKeepAttr&&(ct(l,e),s.keepAttr))if(w(/\/>/i,i))ct(l,e);else{xe&&(i=y(i,fe," "),i=y(i,ge," "));var u=e.nodeName.toLowerCase();if(gt(u,r,i))try{d?e.setAttributeNS(d,l,i):e.setAttribute(l,i),h(t.removed)}catch(e){}}}ht("afterSanitizeAttributes",e,null)}},yt=function e(t){var n=void 0,i=dt(t);for(ht("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)ht("uponSanitizeShadowNode",n,null),ft(n)||(n.content instanceof r&&e(n.content),mt(n));ht("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(i,a){var o=void 0,c=void 0,l=void 0,d=void 0,u=void 0;if((Xe=!i)&&(i="\x3c!--\x3e"),"string"!=typeof i&&!pt(i)){if("function"!=typeof i.toString)throw S("toString is not a function");if("string"!=typeof(i=i.toString()))throw S("dirty is not a string, aborting")}if(!t.isSupported){if("object"===J(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof i)return e.toStaticHTML(i);if(pt(i))return e.toStaticHTML(i.outerHTML)}return i}if(Ie||tt(a),t.removed=[],"string"==typeof i&&(Ue=!1),Ue);else if(i instanceof s)1===(c=(o=lt("\x3c!----\x3e")).ownerDocument.importNode(i,!0)).nodeType&&"BODY"===c.nodeName||"HTML"===c.nodeName?o=c:o.appendChild(c);else{if(!je&&!xe&&!Oe&&-1===i.indexOf("<"))return re&&Fe?re.createHTML(i):i;if(!(o=lt(i)))return je?null:ae}o&&Re&&st(o.firstChild);for(var p=dt(Ue?i:o);l=p.nextNode();)3===l.nodeType&&l===d||ft(l)||(l.content instanceof r&&yt(l.content),mt(l),d=l);if(d=null,Ue)return i;if(je){if(Me)for(u=le.call(o.ownerDocument);o.firstChild;)u.appendChild(o.firstChild);else u=o;return Le&&(u=ue.call(n,u,!0)),u}var h=Oe?o.outerHTML:o.innerHTML;return xe&&(h=y(h,fe," "),h=y(h,ge," ")),re&&Fe?re.createHTML(h):h},t.setConfig=function(e){tt(e),Ie=!0},t.clearConfig=function(){Ze=null,Ie=!1},t.isValidAttribute=function(e,t,n){Ze||tt({});var i=g(e),r=g(t);return gt(i,r,n)},t.addHook=function(e,t){"function"==typeof t&&(he[e]=he[e]||[],f(he[e],t))},t.removeHook=function(e){he[e]&&h(he[e])},t.removeHooks=function(e){he[e]&&(he[e]=[])},t.removeAllHooks=function(){he={}},t}return Q()}()}));const qi="CashbackOffersWidget";var Wi;!function(e){e.Default="bp-r-cashbackOffersWidget",e.JavaScript="js-cashbackOffersWidget",e.Invisible="bp-r-cashbackOffersWidget--invisible"}(Wi||(Wi={}));let Gi=class extends ii{constructor(e){super(e),this.options=e}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield ii.loadElement(qi,this.options),this.fetchTiles()}))}fetchTiles(){return t(this,void 0,void 0,(function*(){try{const e=yield fetch("/cashback/cashback-offers-widget",{method:"GET",headers:{"Content-Type":"text/html"}});if(!e.ok)throw new Error(e.statusText);const t=Ji.sanitize(yield e.text(),{RETURN_DOM_FRAGMENT:!0,USE_PROFILES:{html:!0}});this.element.appendChild(t),this.element.classList.remove(Wi.Invisible)}catch(e){u.error(e)}}))}};Gi=e([v(qi),Zn(qi)],Gi);var Qi=l((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},r.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!=typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(i.read||i)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(r[l]=c,e===l)break}catch(e){}}return e?r[e]:r}}return r.set=a,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){a(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))},e.exports=n()}));class Ki{constructor(e,t){this.cookieHandler=e,this.cookie=t,this.cookie.attributes={path:"/",...this.cookie.attributes}}setCookie({name:e,value:t}){const n=this.readCombinedCookie();this.cookie.serializers?.[e]?n[e]=this.cookie.serializers[e].serialize(t):(null==t&&u.warn(`${e} cookie value is nullish and will be set as an empty string`),n[e]=String(t??"")),this.writeCombinedCookie(n)}removeCookie(e){const t=this.readCombinedCookie();delete t[e],this.writeCombinedCookie(t)}getCookie(e){const t=this.readCombinedCookie()[e];return{name:e,value:this.cookie.serializers?.[e]?.deserialize(t)??t}}readCombinedCookie(){const e={};return this.cookieHandler.get(this.cookie.name)?.split("&").forEach((t=>{const[n,i]=t.split("=");e[n]=decodeURIComponent(i)})),e}writeCombinedCookie(e){this.cookieHandler.set(this.cookie.name,Ki.getEncodedData(e),this.cookie.attributes)}static getEncodedData(e){return Object.entries(e).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}}const Yi=e=>e.replace(/[&=;%]/g,encodeURIComponent);class Xi{deserialize(e){const t={};return e?(e.split("&").forEach((e=>{const[n,i]=e.split("="),r=decodeURIComponent(i),[a,o]=r.substr(1).split(",");t[decodeURIComponent(n)]={entryPoint:a,startPage:o,state:r.substr(0,1)}})),t):t}serialize(e){return Object.entries(e).map((([e,t])=>{const n=Yi(e),i=(e=>{const{state:t,entryPoint:n,startPage:i}=e;return`${t}${n.replace(/[,%]/g,encodeURIComponent)},${i}`})(t);return`${n}=${Yi(i)}`})).join("&")}}var Zi;!function(e){e.MobileWeb="Mobile3",e.WebView="App WebView",e.Classic="Classic",e.Redesign="Redesign",e.Extension="Extension"}(Zi||(Zi={}));var er=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const tr="CookieService";var nr,ir;!function(e){e.Persistent="sd_p",e.Session="sd_s"}(nr||(nr={})),function(e){e[e.OneYear=365]="OneYear"}(ir||(ir={}));let rr=class{constructor(){this.cookieHandler=Qi.withConverter({read:e=>e,write:e=>e});const e=class{static get(e){if(!Object.prototype.hasOwnProperty.call(window.dataLayer,e))throw new Error(`Invalid property name (${e}) specified.`);return window.dataLayer[e]}}.get("traffic");this.domain=e.cookieDomain??`.${window.location.hostname}`}getPersistent(){return this.persistentCookie||(this.persistentCookie=new Ki(this.cookieHandler,{name:nr.Persistent,attributes:{expires:ir.OneYear,domain:this.domain}})),this.persistentCookie}getSession(){return this.sessionCookie||(this.sessionCookie=new Ki(this.cookieHandler,{name:nr.Session,serializers:{funnel:new Xi},attributes:{domain:this.domain}})),this.sessionCookie}getCookie(e){return{name:e,value:this.cookieHandler.get(e)}}setCookie(e){"string"==typeof e.value&&this.cookieHandler.set(e.name,e.value,{domain:this.domain})}};rr=er([v(tr)],rr);var ar=rr;const or=(e,t)=>{let n=!0;return function(...i){n&&(t.apply(this,i),n=!1,setTimeout((()=>{n=!0}),e))}};var sr=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let cr=class{constructor(){this.showables=new Map,this.triggers=new Map,this.handleClick=or(50,(function(e){if(Date.now()-this.lastShowTimestamp<50)return;const t=this.getState().current;if(t){const n=this.showables.get(t);n.isVisible()&&!0!==n.getState().handleClick&&xe(e.target)&&Ie(n)&&(n.getElement().contains(e.target)||(this.showables.get(t)._hide(),this.hideOverlay(),this.setState({current:null,last:this.getState().current})))}}));this.initState({current:null,last:null}),this.init()}async init(){await s.domready,document.addEventListener("click",this.handleClick.bind(this))}setOverlay(e){void 0===this.overlay&&(this.overlay=e)}register(e,t){const n=Symbol("ShowableController");return this.showables.set(n,e),this.triggers.set(n,t),n}async requestShow(e,t=!1){if(!this.showables.has(e))throw new Error(`Requested Showable does not exist: ${String(e)}`);this.lastShowTimestamp=Date.now(),void 0!==this.overlay&&(t&&!this.overlay.isVisible()?this.showOverlay():!t&&this.overlay.isVisible()&&this.hideOverlay());const n=this.getState().current,i=this.showables.get(e);try{await i._show(),this.setState({current:e})}catch{u.warn("Unable to set Showable as visible")}if(n&&n!==e){this.setState({last:n});this.showables.get(n)._hide()}}async requestHide(e){if(!this.showables.has(e))throw new Error(`Requested Showable does not exist: ${String(e)}`);this.showables.get(e)._hide(),this.setState({current:null,last:this.getState().current}),this.hideOverlay()}hideOverlay(){void 0!==this.overlay&&(this.hideOverlayTimeoutId=window.setTimeout((()=>this.overlay.hide()),100))}cancelHideOverlay(){window.clearTimeout(this.hideOverlayTimeoutId)}showOverlay(){this.cancelHideOverlay(),void 0!==this.overlay&&this.overlay.show()}};cr=sr([ve("ShowableController")],cr);var lr,dr,ur=cr;let pr;!function(e){e.Default="df-u-showable",e.Visible="df-u-showable--visible"}(lr||(lr={})),function(e){e.ShowRequest="showRequest",e.Show="show",e.Shown="shown",e.HideRequest="hideRequest",e.Hide="hide",e.Hidden="hidden"}(dr||(dr={}));const hr=e=>t=>{const{prototype:n}=t,i=void 0!==e;if(void 0===pr&&(pr=new ur),void 0!==e)if(m.isDefinedAsSingleton(e)){const t=m.get(e,f.Singleton);pr.setOverlay(t)}else u.error("OverlayInterface module provided is not properly configured as a singleton instance");ve(t.name);const r=(e,t,n={})=>{(e=>"object"==typeof e&&"mediate"in e)(e)&&Ie(e)&&e.mediate(t,{...n,element:e.getElement()})};return n.show=async function(e=!1){try{await this.isInitialized()}catch{u.error("Showable initialization failed")}return r(this,dr.ShowRequest),pr.requestShow(this._showableId,"boolean"==typeof e?e:i)},n.hide=async function(){return r(this,dr.HideRequest),pr.requestHide(this._showableId)},n.isVisible=function(){return this.getState().isVisible},n._show=async function(){if(void 0===this.setState)throw new Error("State not yet initialized");this.preshow&&this.preshow(),r(this,dr.Show),this.setState({isVisible:!0}),await this.isElementAvailable(),this.element.classList.add(lr.Visible),r(this,dr.Shown)},n._hide=function(){if(void 0===this.setState)throw new Error("State not yet initialized");r(this,dr.Hide),this.prehide&&this.prehide(),this.setState({isVisible:!1}),this.element.classList.remove(lr.Visible),r(this,dr.Hidden)},n._initShowable=function(){this._showableId=pr.register(this,this.triggerElement||null)},ii.addToInitQueue(t.name,n._initShowable),t};var fr,gr=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const mr="Overlay";var yr,vr;!function(e){e.Default="bp-c-overlay",e.JavaScript="js-overlay"}(yr||(yr={})),function(e){e.Click="click",e.Hide="hide"}(vr||(vr={}));let br=fr=class extends nt{constructor(e){super(mr,e);this.initState({isVisible:!1})}async init(){super.init(),this.options.id?this.element=await nt.loadElement(mr,this.options):this.element=fr.createElement(),this.injectIntoDom(),this.element.addEventListener("click",this.handleClick.bind(this))}isVisible(){return!!this.getState().isVisible}show(){this.setState({isVisible:!0}),this.element.classList.add(it(yr.Default,"visible"))}hide(){this.setState({isVisible:!1}),this.mediate(vr.Hide),this.element.classList.remove(it(yr.Default,"visible"))}handleClick(){this.mediate(vr.Click)}injectIntoDom(){this.element.parentNode||document.body.appendChild(this.element)}static createElement(){const e=document.createElement("div");return e.classList.add(yr.Default,yr.JavaScript),e}};br=fr=gr([ve(mr),Me({id:""}),Bi(mr,Object.values(vr)),v({key:mr,scope:f.Singleton})],br),nt.instantiate(mr);const wr=(e,t)=>{const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)};var Sr;!function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(Sr||(Sr={}));const Ar=({target:e,orbiter:t,position:n})=>{const{style:i}=t,{height:r,width:a,top:o,left:s}=e.getBoundingClientRect(),{height:c,width:l,top:d,left:u}=(e=>{const{style:t}=e;t.top="0px",t.left="0px",t.bottom="auto",t.right="auto",t.visibility="hidden",t.opacity="1",t.display="block",t.transform="none",t.transition="none";const n=e.getBoundingClientRect();return n.height=e.clientHeight,n.width=e.clientWidth,t.removeProperty("top"),t.removeProperty("left"),t.removeProperty("bottom"),t.removeProperty("right"),t.removeProperty("visibility"),t.removeProperty("opacity"),t.removeProperty("display"),t.removeProperty("transform"),t.removeProperty("transition"),n})(t),p=window.getComputedStyle(t);if(n.includes(Sr.Top)){const e=parseInt(p.marginBottom.replace("px",""),10);let t;t=d>0?o-c-e-d:o-c+window.scrollY-e,i.top=`${t}px`}else{const e=parseInt(p.marginTop.replace("px",""),10);i.top=`${o+r-d+e}px`}i.bottom="auto",n.includes(Sr.Left)?i.left=s-u+"px":i.left=s+a-l+"px",i.right="auto"},_r=e=>{(e=>{const t=window.getComputedStyle(e).getPropertyValue("position");return["fixed","absolute","relative"].includes(t)})(e)||(e.style.position="relative")};var Er,Cr,kr=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.Trigger="trigger",e.Body="body"}(Cr||(Cr={}));const Tr=`Popup-BlueprintWrapper-${Math.floor(Math.random()*Math.floor(9999))}`;var Pr,Dr;!function(e){e.Click="click",e.Hover="mouseover"}(Pr||(Pr={})),function(e){e.Default="bp-c-popup",e.JavaScript="js-popup",e.Content="bp-c-popup_content",e.JavaScriptContent="js-popup_content"}(Dr||(Dr={}));let xr=Er=class extends nt{constructor(e){super("Popup",e);this.handleTrigger=this.handleTrigger.bind(this),this.initState({visible:!1})}async init(){super.init(),this.element||await this.initElement(),this.element&&(this.options.anchorType===Cr.Trigger&&(this.options.triggerId||this.options.triggerElement)?this.initTriggerElement(!dt(this.element)):dt(this.element)||document.body.appendChild(this.element)),this.options.changeParentToBody&&this.handleBodyInjection()}handleBodyInjection(){let e=document.getElementById(Tr);e||(e=document.createElement("div"),e.setAttribute("id",Tr),e.classList.add(Ye.Wrapper),document.body.appendChild(e)),e.appendChild(this.element)}destroy(e=!1){super.destroy(),this.triggerElement.removeEventListener(this.options.triggerEvent,this.handleTrigger),e&&this.element.parentNode.removeChild(this.element)}async initElement(){var e;this.options.id?this.element=await nt.loadElement("Popup",this.options):("string"==typeof(e=this.options.content)||e instanceof HTMLElement||e instanceof Text||e instanceof DocumentFragment)&&(this.element=Er.createElement({content:this.options.content}))}async initTriggerElement(e=!1){this.options.triggerElement&&this.options.triggerElement instanceof HTMLElement?this.triggerElement=this.options.triggerElement:this.triggerElement=document.getElementById(this.options.triggerId),this.options.triggerEvent===Pr.Click?this.triggerElement.addEventListener(this.options.triggerEvent,this.handleTrigger):this.initHoverEventListeners(),e&&this.triggerElement.appendChild(this.element)}handleTrigger(){this.isVisible()||(this.options.anchorType===Cr.Trigger&&Ar({target:this.triggerElement,orbiter:this.element,position:this.options.position}),this.show(this.options.overlay))}prehide(){this.toggleTrigger(!1)}toggleTrigger(e){const t=Re.get(this.triggerElement);t&&Object.values(t).forEach((t=>{"toggle"in t&&t.toggle(e)}))}initHoverEventListeners(){[this.triggerElement,this.element].forEach((e=>{let t,n;e.addEventListener("mouseenter",(()=>{"function"==typeof n&&(n(),n=null),t=wr(this.handleTrigger,this.options.delay)})),e.addEventListener("mouseleave",(()=>{"function"==typeof t&&(t(),t=null),n=wr(this.hide.bind(this),this.options.delay)}))}))}static getContentContainer(e){const t=document.createElement("div");return t.classList.add(Dr.Content,Dr.JavaScriptContent),"string"==typeof e?t.appendChild(document.createTextNode(e)):t.appendChild(e),t}static createElement(e){const t=document.createElement("div");return t.classList.add(Dr.Default,Dr.JavaScript,"blueprint"),e.id&&(t.id=e.id),t.appendChild(Er.getContentContainer(e.content)),t}};xr=Er=kr([hr(mr),ve("Popup"),Bi("Popup",Object.values(dr)),v("Popup"),Me({triggerEvent:Pr.Click,position:[Sr.Bottom,Sr.Left],anchorType:Cr.Trigger,delay:250,changeParentToBody:!1})],xr),nt.instantiate("Popup");var Or,Ir,Rr=xr,jr=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.Default="bp-c-modal",e.JavaScript="js-modal",e.Content="bp-c-modal_content",e.JavaScriptContent="js-modal_content",e.CloseButton="bp-c-modal_closeButton",e.FixedPosition="bp-c-modal--fixed"}(Ir||(Ir={}));let Mr=Or=class extends Rr{constructor(e){super({...e,overlay:!0,anchorType:Cr.Body})}async init(){if(this.element=Or.createElement({content:this.options.content,isFixed:this.options.isFixed}),this.options.closeButton){const e=It.createElement("",[Ot.unstyled]);e.classList.add(Ir.CloseButton),e.setAttribute("aria-label","Close Modal"),e.appendChild(ht.createElement({name:"close"})),e.addEventListener("click",this.hide.bind(this)),this.element.prepend(e)}super.init()}static createElement(e){const t=Rr.createElement(e);return t.classList.add(Ir.Default,Ir.JavaScript),t.classList.add(lr.Default),e.isFixed&&t.classList.add(Ir.FixedPosition),t.querySelector(`.${Dr.JavaScriptContent}`).classList.add(Ir.Content,Ir.JavaScriptContent),t}};Mr=Or=jr([hr(mr),Me({isFixed:!1})],Mr);var Lr,Fr,Nr=Mr,Br=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.QOS0="qos0",e.QOS1="qos1"}(Fr||(Fr={}));const Ur={QOS1:`bp:qos:${Fr.QOS1}`},zr="JobSubscriber";let Vr=Lr=class{static create(){return new Lr}async subscribe(e,t,n){document.addEventListener(e,(e=>{n(e.detail.job)})),t===Fr.QOS1&&document.dispatchEvent(new CustomEvent(Ur.QOS1,{detail:{topic:e}}))}};Vr=Lr=Br([v({key:zr,scope:f.Singleton})],Vr);const $r=e=>{const t={};return e.forEach(((e,n)=>{t[n]=e})),JSON.stringify(t)};var Hr;!function(e){e[e.EverySession=0]="EverySession",e[e.EveryWeek=604800]="EveryWeek"}(Hr||(Hr={}));const Jr=e=>`bp:topic:${e}`;class qr{constructor({topic:e,schedule:t,durable:n,jobKey:i,expiration:r}){this.topic=e,this.schedule=t,this.durable=n,this.jobKey=i,this.expiration=r}getTopic(){return this.topic}getJobKey(){return this.jobKey}getCriteria(){const e={jobKey:this.jobKey,topic:this.topic,schedule:this.schedule,timesSeen:this.timesSeen,durable:this.durable,lastExecution:Math.floor((this.lastExecution||new Date).valueOf()/1e3)};return this.expiration&&(e.expiration=Math.floor(this.expiration.valueOf()/1e3)),e}hydrateFromCriteria({jobKey:e,topic:t,expiration:n,schedule:i,lastExecution:r,timesSeen:a,durable:o}){return this.topic=t,this.jobKey=e,this.schedule=i,this.durable=o,this.timesSeen=a,this.lastExecution=new Date(1e3*r),n&&(this.expiration=new Date(1e3*n)),this}isDurable(){return this.durable}isDuplicate(e){return this.getJobKey()===e.getJobKey()}isPlayable(){const e=this.schedule[0];if(e.executionFrequency===Hr.EverySession)return e.replays<=this.timesSeen&&(this.timesSeen=1,this.schedule.length>1&&this.schedule.shift()),!0;this.lastExecution.valueOf()+1e3*e.executionFrequency<(new Date).valueOf()&&(this.timesSeen=1,this.schedule.length>1&&this.schedule.shift());return!(this.schedule[0].replays<this.timesSeen)}addPlay(){"number"!=typeof this.timesSeen&&(this.timesSeen=0),this.lastExecution=new Date,this.timesSeen+=1}}var Wr,Gr=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Qr="CookieJobStorageDriver";let Kr=Wr=class{constructor(e){this.cookieService=e}static create(e){return new Wr(e)}retrieveJobsByTopic(e){return this.convertCriteriaToJobs(e)}retrieveAllJobs(){return this.convertCriteriaToJobs()}persistJob(e){const t=this.deriveJobCriteriaFromCookie();t.has(e.getTopic())||t.set(e.getTopic(),[]);const n=t.get(e.getTopic()).filter((t=>t.jobKey!==e.getJobKey()));return n.push(e.getCriteria()),t.set(e.getTopic(),n),this.cookieService.setCookie({name:"bp_job_queue",value:$r(t)}),this}deriveJobCriteriaFromCookie(){const e=this.cookieService.getCookie("bp_job_queue").value;return"string"==typeof e?(e=>{const t=JSON.parse(e),n=new Map;return Object.keys(t).forEach((e=>{n.set(e,t[e])})),n})(e):new Map}convertCriteriaToJobs(e){const t=this.deriveJobCriteriaFromCookie(),n=[],i=[];return e?(t.has(e)||t.set(e,[]),t.get(e).forEach((e=>n.push(e)))):t.forEach((e=>{e.forEach((e=>n.push(e)))})),n.forEach((e=>{i.push(new qr({topic:e.topic,durable:e.durable,schedule:e.schedule}).hydrateFromCriteria(e))})),i}};Kr=Wr=Gr([v({key:Qr,scope:f.Singleton,dependencies:{...m.createDependency(tr,f.Singleton)}})],Kr);var Yr=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Xr=e=>new CustomEvent(e.getTopic(),{detail:{job:e}});let Zr=class{constructor(e){this.jobStorage=e,document.addEventListener(Ur.QOS1,this.dispatchJobsForTopic.bind(this))}dispatchJob(e){document.dispatchEvent(Xr(e)),e.addPlay(),e.isDurable()&&this.jobStorage.persistJob(e)}async dispatchJobsForTopic(e){const{topic:t}=e.detail;this.jobStorage.retrieveJobsByTopic(t).forEach(this.handleJob.bind(this))}handleJob(e){e.isPlayable()&&(document.dispatchEvent(Xr(e)),e.addPlay(),e.isDurable()&&this.jobStorage.persistJob(e))}};Zr=Yr([v({key:"JobDispatcher",scope:f.Singleton,dependencies:{...m.createDependency(Qr,f.Singleton)}})],Zr);var ea,ta=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let na=ea=class{constructor(e,t){this.jobStorage=e,this.dispatcher=t}static create({jobStorage:e,dispatcher:t}){return new ea(e,t)}add(e){this.jobStorage.retrieveJobsByTopic(e.getTopic()).filter((t=>e.isDuplicate(t))).length>0||(this.dispatcher.dispatchJob(e),e.isDurable()&&this.jobStorage.persistJob(e))}};na=ea=ta([v({key:"JobRegistry",scope:f.Singleton,dependencies:{...m.createDependency(Qr,f.Singleton),...m.createDependency("JobDispatcher",f.Singleton)}})],na);class ia{static isAffiliateRequestsBlocked(){return ia.areRequestsBlocked(["https://go.redirectingat.com","https://www.pntrs.com"])}}ia.areRequestsBlocked=e=>t(void 0,void 0,void 0,(function*(){let t=!1;for(let n=0;n<e.length&&!t;n+=1){const i=e[n];try{yield fetch(i,{method:"HEAD",mode:"no-cors"}),t=!1}catch(e){t=!0}}return t}));var ra;!function(e){e.Default="bp-p-interstitialSuccess",e.Javascript="js-interstitialSuccess",e.CountdownValue="bp-p-interstitialSuccess_infoCountdownValue"}(ra||(ra={}));class aa extends li{constructor(){super("CashbackInterstitialSuccess")}createElement(e){const{merchantStoreLogo:t,merchantLink:n,cashbackRate:i}=e,r=n.replace(/&amp;/g,"&");let a=3;const o=setInterval((()=>{a<0?(clearInterval(o),Lt.redirect(r)):document.querySelector(`.${ra.CountdownValue}`).innerHTML=`${a}`,a-=1}),1e3);this.interstitialContainerStylesOverride();const s=[ra.Default,ra.Javascript].join(" ");return li.parseJsx("div",{className:s},li.parseJsx("img",{src:"/image-pool/sd-branding/sd-logo-full-blueberry.svg",className:"bp-p-interstitialSuccess_logo"}),li.parseJsx("img",{src:t,alt:"Store logo",className:"bp-p-interstitialSuccess_storeLogo"}),li.parseJsx("div",{className:"bp-p-interstitialSuccess_subhead"},"Congratulations! You're about to get paid to shop."),li.parseJsx("div",{className:"bp-p-interstitialSuccess_headline"},i," Cashback Activating"),li.parseJsx("img",{src:"/image-pool/loyalty/no-extension/CoinDropAnimation.gif",className:"bp-p-interstitialSuccess_img"}),li.parseJsx("div",{className:"bp-p-interstitialSuccess_info"},li.parseJsx("p",{className:"bp-p-interstitialSuccess_infoCountdown"},"Redirecting in ",li.parseJsx("span",{className:ra.CountdownValue},"3")," seconds...")))}interstitialContainerStylesOverride(){const e=document.createElement("style");e.id="styleBlockOverride";e.innerHTML="\n      .bp-c-popup {\n        position: fixed !important;\n        top: 0 !important;\n        right: 0 !important;\n        bottom: 0 !important;\n        left: 0 !important;\n        width: 100% !important;\n        max-width: 100% !important;\n        height: 100% !important;\n        max-height: 100vh !important;\n        border-radius: 0 !important;\n        transform: translate(0, 0) !important;\n      }\n    ",document.body.append(e)}}var oa,sa;!function(e){e.Default="bp-p-cashbackInterstitialFailure",e.Javascript="js-cashbackInterstitialFailure",e.ReturnButton="bp-p-interstitialFailure_button",e.ProceedLink="bp-p-interstitialFailure_proceedLink"}(oa||(oa={})),function(e){e.CloseButton="returnToDealDetailsFromInterstitial",e.ProceedButton="proceedLinkFromInterstitial"}(sa||(sa={}));class ca extends li{constructor(){super("CashbackInterstitialFailure")}createElement(e){const{merchantStoreLogo:t,merchantLink:n,cashbackRate:i}=e,r=n.replace(/&amp;/g,"&");return this.interstitialContainerStylesOverride(),li.parseJsx("div",{className:"bp-p-interstitialFailure js-interstitialFailure"},li.parseJsx("img",{src:"/image-pool/sd-branding/sd-logo-full-blueberry.svg",className:"bp-p-interstitialFailure_logo"}),li.parseJsx("img",{src:t,alt:"Store logo",className:"bp-p-interstitialFailure_storeLogo"}),li.parseJsx("div",{className:"bp-p-interstitialFailure_subhead"},"Oh no! Adblock Detected."),li.parseJsx("div",{className:"bp-p-interstitialFailure_headline"},i," Cashback Blocked"),li.parseJsx("img",{className:"bp-p-interstitialFailure_img",src:"/image-pool/loyalty/no-extension/AlertIcon.svg",alt:""}),li.parseJsx("div",{className:"bp-p-interstitialFailure_info"},li.parseJsx("p",null,"Pause your Adblock Extension to get your Deal and Cashback"),li.parseJsx("button",{className:oa.ReturnButton},"Return to Deal Thread"),li.parseJsx("button",{className:oa.ProceedLink,"data-href":r},"Proceed without Cashback")))}interstitialContainerStylesOverride(){const e=document.createElement("style");e.id="styleBlockOverride";e.innerHTML="\n      .bp-c-popup {\n        position: fixed !important;\n        top: 0 !important;\n        right: 0 !important;\n        bottom: 0 !important;\n        left: 0 !important;\n        width: 100% !important;\n        max-width: 100% !important;\n        height: 100% !important;\n        max-height: 100vh !important;\n        border-radius: 0 !important;\n        transform: translate(0, 0) !important;\n      }\n    ",document.body.append(e)}}var la;!function(e){e.Default="bp-p-interstitialSuccess",e.Javascript="js-interstitialSuccess",e.Checkbox="bp-p-interstitialSuccess_checkbox",e.CountdownValue="bp-p-interstitialSuccess_infoCountdownValue"}(la||(la={}));class da extends li{constructor(){super("CashbackInterstitialSuccess")}createElement(e){const{outclickStoreId:t,outclickStoreSlug:n}=e,i=`/images/slickdeals/storelogo/128x128/${t}.png`,r=`/rewards/${n}/terms/`;this.interstitialContainerStylesOverride();const a=[la.Default,la.Javascript].join(" ");return li.parseJsx("div",{className:a},li.parseJsx("img",{src:"/image-pool/sd-branding/sd-logo-full-blueberry.svg",className:"bp-p-interstitialSuccess_logo"}),li.parseJsx("img",{src:i,alt:"Store logo",className:"bp-p-interstitialSuccess_storeLogo"}),li.parseJsx("img",{className:"bp-p-interstitialSuccess_slicky",src:"https://slickdeals.net/lp/wp-content/uploads/rewards/slicky-cashback-activating.svg",alt:"Slicky Cashback Activating"}),li.parseJsx("div",{className:"bp-p-interstitialSuccess_mainInfo"},li.parseJsx("div",{className:"bp-p-interstitialSuccess_heading"},"Cashback Activated"),li.parseJsx("div",{className:"bp-p-interstitialSuccess_subheading"},"Congratulations! You're about to get paid to shop."),li.parseJsx("a",{className:"bp-p-interstitialSuccess_terms",href:r,"data-role":"cashbackInterstitialStoreTerms",target:"_blank"},"SEE TERMS AND CONDITIONS"),li.parseJsx("p",{className:"bp-p-interstitialSuccess_countdown"},"Redirecting in ",li.parseJsx("span",{className:la.CountdownValue},"3")," seconds...")),li.parseJsx("div",{className:"bp-p-interstitialSuccess_footer"},li.parseJsx("input",{className:"bp-p-interstitialSuccess_checkbox","data-role":"disableCashbackInterstitialCheckbox",type:"checkbox"}),li.parseJsx("p",{className:"bp-p-interstitialSuccess_checkboxMessage"},"Ok, got it! No need to notify me for now.")))}interstitialContainerStylesOverride(){const e=document.createElement("style");e.id="styleBlockOverride";e.innerHTML="\n      .bp-c-popup {\n        position: fixed !important;\n        top: 0 !important;\n        right: 0 !important;\n        bottom: 0 !important;\n        left: 0 !important;\n        width: 100% !important;\n        max-width: 100% !important;\n        height: 100% !important;\n        max-height: 100vh !important;\n        border-radius: 0 !important;\n        transform: translate(0, 0) !important;\n      }\n    ",document.body.append(e)}}var ua,pa,ha;!function(e){e.Default="bp-p-cashbackInterstitialFailure",e.Javascript="js-cashbackInterstitialFailure",e.ReturnButton="bp-p-interstitialFailure_button",e.ProceedLink="bp-p-interstitialFailure_proceedLink",e.Checkbox="bp-p-interstitialFailure_checkbox"}(ua||(ua={})),function(e){e.CloseButton="returnToDealDetailsFromInterstitial",e.ProceedButton="proceedLinkFromInterstitial"}(pa||(pa={}));class fa extends li{constructor(){super("CashbackInterstitialFailure")}createElement(e){const{outclickHref:t}=e,n=t.replace(/&amp;/g,"&");return this.interstitialContainerStylesOverride(),li.parseJsx("div",{className:"bp-p-interstitialFailure js-interstitialFailure"},li.parseJsx("img",{src:"/image-pool/sd-branding/sd-logo-full-blueberry.svg",className:"bp-p-interstitialFailure_logo"}),li.parseJsx("img",{className:"bp-p-interstitialFailure_slicky",src:"https://slickdeals.net/lp/wp-content/uploads/rewards/slicky-cashback-blocked.svg"}),li.parseJsx("div",{className:"bp-p-interstitialFailure_main"},li.parseJsx("div",{className:"bp-p-interstitialFailure_heading"},"Cashback Blocked"),li.parseJsx("div",{className:"bp-p-interstitialFailure_subheading--desktop"},"Oh no! Adblock Detected."),li.parseJsx("p",{className:"bp-p-interstitialFailure_adBlockMessage"},"With an ad block on, Slickdeals doesn't know who you are in order to give you Cashback Rewards."),li.parseJsx("p",{className:"bp-p-interstitialFailure_adBlockFaqMessage--mobile"},"It's an easy fix! Simply whitelist Slickdeals as the destination merchant."),li.parseJsx("p",{className:"bp-p-interstitialFailure_adBlockFaqMessage--desktop"},"It's an easy fix! Simply whitelist Slickdeals as the destination merchant. Every ad block is different. For specific details on your ad block or if you're still receiving this ad block after whitelisting, ",li.parseJsx("a",{className:"bp-p-interstitialFailure_adBlockFaqLink","data-role":"cashbackAdblockFaqDesktop",href:"https://help.slickdeals.net/hc/en-us/articles/1260800863609-How-to-Guarantee-Cashback-is-Tracked-when-Running-Ad-Blockers",target:"_blank"},"click here"),".")),li.parseJsx("div",{className:"bp-p-interstitialFailure_info"},li.parseJsx("button",{className:ua.ReturnButton},"Go Back"),li.parseJsx("button",{className:ua.ProceedLink,"data-href":n},"Proceed without Cashback")),li.parseJsx("p",{className:"bp-p-interstitialFailure_adBlockFaqMessage--mobile"},"Every ad block is different. For specific details on your ad block or if you're still receiving this ad block after whitelisting, ",li.parseJsx("a",{className:"bp-p-interstitialFailure_adBlockFaqLink","data-role":"cashbackAdblockFaqMobile",href:"https://help.slickdeals.net/hc/en-us/articles/1260800863609-How-to-Guarantee-Cashback-is-Tracked-when-Running-Ad-Blockers",target:"_blank"},"click here"),"."),li.parseJsx("div",{className:"bp-p-interstitialFailure_footer"},li.parseJsx("input",{className:"bp-p-interstitialFailure_checkbox","data-role":"disableAdblockInterstitialCheckbox",type:"checkbox"}),li.parseJsx("p",{className:"bp-p-interstitialFailure_checkboxMessage"},"Don't show this message again.")))}interstitialContainerStylesOverride(){const e=document.createElement("style");e.id="styleBlockOverride";e.innerHTML="\n      .bp-c-popup {\n        position: fixed !important;\n        top: 0 !important;\n        right: 0 !important;\n        bottom: 0 !important;\n        left: 0 !important;\n        width: 100% !important;\n        max-width: 100% !important;\n        height: 100% !important;\n        max-height: 100vh !important;\n        border-radius: 0 !important;\n        transform: translate(0, 0) !important;\n      }\n    ",document.body.append(e)}}let ga=ha=class{constructor(){this.isRewardsForAllFlow=!1}initInterstitialModalContext(e,n,i=!1){var r,a;return t(this,void 0,void 0,(function*(){if(this.data=e,this.heap=n,this.element=li.parseJsx("div",null),this.isRewardsForAllFlow=i,this.isRewardsForAllFlow)!this.data.disableAdblockSetting&&(null===(r=this.data)||void 0===r?void 0:r.isUsingAdblock)?this.failureState():this.data.disableActivatedSetting||this.successState();else{if((null===(a=this.data)||void 0===a?void 0:a.isUsingAdblock)||(yield ia.isAffiliateRequestsBlocked()))return this.failureState(),this.element;this.successState()}return this.element}))}successState(){this.fireHeapEvent("Success"),this.isRewardsForAllFlow?this.isRewardsForAllFlow&&!this.data.disableActivatedSetting&&this.refreshContext(li.parseJsx(da,Object.assign({},this.data))):this.refreshContext(li.parseJsx(aa,Object.assign({},this.data)))}failureState(){this.fireHeapEvent("Failure"),this.isRewardsForAllFlow?this.isRewardsForAllFlow&&!this.data.disableAdblockSetting&&(this.refreshContext(li.parseJsx(fa,Object.assign({},this.data))),ha.registerAdblockShown(this.data)):this.refreshContext(li.parseJsx(ca,Object.assign({},this.data)))}refreshContext(e){lt(this.element),this.element.append(e)}fireHeapEvent(e){return t(this,void 0,void 0,(function*(){try{yield this.heap.track(`Rewards For All - ${e} Interstitial - Impression`)}catch(e){u.warn("Error firing heap event")}}))}static registerAdblockShown(e){fetch("/cashback/ajax/adblock-shown/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.outclickHref,threadId:e.threadId,storeId:e.outclickStoreId})}).then((e=>e.json())).catch((e=>console.log("Error",e)))}};ga=ha=e([v("CashbackActivatorInterstitialContextService")],ga);let ma=class{track(e,t){return this.wrap((n=>n.track(e,t)))}wrap(e){return t(this,void 0,void 0,(function*(){try{const t=window.heap;return e(t)}catch(e){throw u.error(`Heap error: ${e.message}`),e}}))}};ma=e([v({key:"Heap",scope:f.Singleton})],ma);var ya=ma;const va=Jr("userJoinedLoyalty"),ba=m.get("JobRegistry",f.Singleton),wa=e=>fetch("/cashback/join/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:e})}).then((e=>t(void 0,void 0,void 0,(function*(){const t=yield e.json();return(null==e?void 0:e.ok)?((()=>{const e=new qr({topic:va,durable:!1,schedule:[{replays:1,executionFrequency:Hr.EverySession}]});ba.add(e)})(),t):{isLoyaltyUser:!1}})))).catch((()=>({isLoyaltyUser:!1})));var Sa;var Aa;(Aa||(Aa={})).LoadingImage="js-buttonLoaderImage";const _a=t(void 0,void 0,void 0,(function*(){try{const e=yield fetch("https://static.slickdealscdn.com/image-pool/icons/loadingDots.svg");return yield e.text()}catch(e){return u.error("ButtonLoader preload failed",e),null}}));let Ea=Sa=class{static showLoader(e){return t(this,void 0,void 0,(function*(){e.disabled=!0;const t=yield _a;if(t)try{const n=window.getComputedStyle(e),{position:i}=n;if("absolute"===i)return void u.error("ButtonLoader error: absolute positioned buttons not supported");"fixed"!==i&&"sticky"!==i&&(e.style.position="relative");let r=n.color;if(r.startsWith("rgb")&&(r=`#${r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)$/).slice(1).map(((e,t)=>(3===t?Math.round(255*parseFloat(e)):parseFloat(e)).toString(16).padStart(2,"0").replace("NaN",""))).join("")}`),!r||!r.startsWith("#"))return void u.error(`ButtonLoader error: invalid fillColor: ${r}`);e.style.color="transparent";const a=Sa.createLoadingImage(t,n.fontSize,r);e.appendChild(a)}catch(e){u.debug("ButtonLoader failed to show loading state",e)}else u.error("ButtonLoader error: no loading image")}))}static createLoadingImage(e,t,n){const i=`${Math.round(300*parseInt(t,10)/109)}px`,r=document.createElement("object");return r.classList.add(Aa.LoadingImage),r.style.height=t,r.style.width=i,r.style.position="absolute",r.style.left="50%",r.style.top="50%",r.style.transform="translate(-50%,-50%)",r.innerHTML=e,r.querySelectorAll("circle").forEach((e=>e.setAttribute("fill",n))),r}static showContents(e){const t=e.querySelector(`.${Aa.LoadingImage}`);t&&t.remove(),e.getAttribute("style")&&e.setAttribute("style",""),e.disabled=!1}};Ea=Sa=e([v({key:"ButtonLoader",scope:f.Singleton})],Ea);var Ca,ka=Ea;const Ta="CashbackTagActivationModal";var Pa;!function(e){e.Default="bp-p-cashbackTagActivationModal",e.HeaderText="bp-p-cashbackTagActivationModal_headerText",e.BodyText="bp-p-cashbackTagActivationModal_bodyText",e.CtaButton="bp-p-cashbackTagActivationModal_ctaButton",e.LearnMoreLink="bp-p-cashbackTagActivationModal_learnMoreLink",e.CloseButton="bp-p-cashbackTagActivationModal_closeButton",e.RemindMeLaterButton="bp-p-cashbackTagActivationModal_remindMeLaterButton",e.ContainerOverride="bp-p-cashbackTagActivationModal_containerOverride",e.HeroImage="bp-p-cashbackTagActivationModal_heroImage",e.ActivatedImage="bp-p-cashbackTagActivationModal_activatedImage"}(Pa||(Pa={}));const Da=Object.assign(Object.assign(Object.assign({},m.createDependency(tr,f.Singleton)),m.createDependency("Heap",f.Singleton)),m.createDependency(zr,f.Singleton));let xa=Ca=class extends ii{constructor(e,t,n,i){super(i),this.cookieService=e,this.heap=t,this.subscriber=n,this.options=i,this.isActivated=!1}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield ii.loadElement(Ta,this.options),this.modal=new Nr({content:this.element,closeButton:!1,isFixed:!0}),this.ctaButton=this.element.querySelector(`.${Pa.CtaButton}`),this.ctaButton.addEventListener("click",this.onCtaClick.bind(this));this.element.querySelector(`.${Pa.CloseButton}`).addEventListener("click",(()=>this.hide()));this.element.querySelector(`.${Pa.RemindMeLaterButton}`).addEventListener("click",this.onRemindMeLater.bind(this)),this.subscriber.subscribe(va,Fr.QOS0,this.onLoyaltyJoined.bind(this))}))}show(){return t(this,void 0,void 0,(function*(){if(this.isActivated||this.cookieService.getPersistent().getCookie(this.options.hideCookieName).value)return;yield this.modal.show(!0);this.element.closest(`.${Ir.Default}`).classList.add(Pa.ContainerOverride),this.trackImpression()}))}hide(){this.modal.hide()}onCtaClick(){return t(this,void 0,void 0,(function*(){if(this.isActivated)this.hide();else if(this.options.isLoggedIn)yield ka.showLoader(this.ctaButton),yield wa("CashbackTagActivationModal"),ka.showContents(this.ctaButton);else{const e=new URLSearchParams({action_source:Ta,eor:"0",url:window.location.pathname+window.location.search});Lt.redirect(`/forums/register.php?${e}`)}}))}onLoyaltyJoined(){this.isActivated=!0;const e=this.element.querySelector(`.${Pa.HeroImage}`);e.src="/image-pool/loyalty/rewards-for-all/slickySuccessStars.svg",e.classList.add(Pa.ActivatedImage);this.element.querySelector(`.${Pa.HeaderText}`).textContent="Hooray! Cashback Activated.";this.element.querySelector(`.${Pa.BodyText}`).textContent="Shop like usual. Rake in your Points, redeemable for PayPal credit and more. Keep an eye out for an email with more details coming soon.",this.ctaButton.textContent="Keep Shopping";this.element.querySelector(`.${Pa.LearnMoreLink}`).remove();this.element.querySelector(`.${Pa.RemindMeLaterButton}`).remove()}onRemindMeLater(){this.hide(),this.cookieService.getPersistent().setCookie({name:this.options.hideCookieName,value:1})}trackImpression(){this.heap.track("Cashback Tag Activation Modal - Impression").catch((()=>{}))}static createFromDataAttributes(e){const t={id:e.id,isLoggedIn:"1"===e.dataset.isLoggedIn,hideCookieName:e.dataset.hideCookieName};return new Ca(new ar,new ya,m.get(zr,f.Singleton),t)}};xa=Ca=e([v(Ta,Da),Zn(Ta,{instantiate:{fromDom:!0,fromMutation:!0,fromHydrationQueue:!1}})],xa);var Oa,Ia=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};var Ra;!function(e){e.Default="bp-c-tooltip",e.Orbiting="bp-c-tooltip--orbiting",e.JavaScript="js-tooltip"}(Ra||(Ra={}));var ja,Ma;!function(e){e.ExtraSmall="xsmall",e.Small="small",e.Default="",e.Large="large"}(ja||(ja={})),function(e){e.BottomLeft="bottomLeft",e.BottomCenter="bottomCenter",e.BottomRight="bottomRight",e.TopLeft="topLeft",e.TopCenter="topCenter",e.TopRight="topRight"}(Ma||(Ma={}));const La={size:ja.Default,showOnInit:!1},Fa=e=>{return"object"==typeof e&&(t=e,n=["triggerElement","triggerId","size","contents"],i=Object.keys(t),r=n,i.some((e=>r.includes(e))));var t,n,i,r};let Na=Oa=class extends nt{constructor(e,t=La){super("Tooltip",t),xe(e)?this.triggerElement=e:Fa(e)&&(this.options=e,xe(e.triggerElement)?this.triggerElement=e.triggerElement:"string"==typeof e.triggerId?this.triggerElement=document.getElementById(e.triggerId):u.warn("Trigger element not provided for Tooltip initialization"));this.initState({isVisible:!1})}init(){if(super.init(),this.element=Oa.createElement(this.options),this.anchorTo=this.options.anchorTo||this.triggerElement,void 0===this.anchorTo)throw new Error(`please define an anchor point for the tooltip using trigger: ${this.options.triggerId}`);void 0!==this.anchorTo&&((this.options.appendTo||this.anchorTo).appendChild(this.element),_r(this.anchorTo),this.anchorTo.addEventListener("mouseover",this.handleShow.bind(this)),this.anchorTo.addEventListener("mouseout",this.handleHide.bind(this))),this.options.appendTo&&this.options.appendTo!==this.anchorTo&&this.element.classList.add(Ra.Orbiting),this.options.showOnInit&&this.handleShow();const e=ht.createElement({name:"close"});e.addEventListener("click",(()=>{this.hide(),this.element.classList.add(it(Ra.Default,"hidden"))})),this.element.prepend(e)}destroy(e){e&&this.element.remove()}positionTooltip(){if(!this.options.appendTo||this.options.appendTo===this.anchorTo)return;Ar({target:this.anchorTo,orbiter:this.element,position:this.options.positionAppendTo});const e=window.innerWidth-this.element.getClientRects()[0].x;e<400?(this.element.style.maxWidth=e-12+"px",this.element.style.minWidth="0px"):(this.element.style.removeProperty("max-width"),this.element.style.removeProperty("min-width"))}show(){this.element.classList.add(it(Ra.Default,"visible")),this.element.classList.remove(it(Ra.Default,"hidden")),this.positionTooltip(),this.setState({isVisible:!0})}hide(){this.element.classList.remove(it(Ra.Default,"visible")),this.setState({isVisible:!1})}handleShow(){this.getState().isVisible||this.show(),window.clearTimeout(this.hideTimeout)}handleHide(){this.hideTimeout=window.setTimeout(this.hide.bind(this),250)}static createFromDataAttributes(e){const t=((e,t)=>{const n={};for(const r in e.dataset)if("string"==typeof r&&r.startsWith(t)){n[(i=r.replace(t,""),i[0].toLowerCase()+i.substring(1))]=e.dataset[r]}var i;return n})(e,"tooltip");return new Oa(e,t)}static createElement(e={}){const t=document.createElement("div");t.classList.add(Ra.Default),e.modifiers?.size&&t.classList.add(it(Ra.Default,e.modifiers.size)),e.modifiers?.position?t.classList.add(it(Ra.Default,e.modifiers.position)):t.classList.add(it(Ra.Default,Ma.BottomLeft));let{contents:n}=e;"string"==typeof n&&(n=document.createTextNode(n));const i=document.createElement("div");return i.classList.add(rt(Ra.Default,"content")),i.appendChild(n),t.appendChild(i),t}};Na=Oa=Ia([ve("Tooltip"),v("Tooltip"),Me({positionAppendTo:[Sr.Top,Sr.Left]})],Na);var Ba,Ua=Na;nt.instantiate("Tooltip",{fromHydrationQueue:!0,fromDom:!0,fromMutation:!0});class za{static getData(e){return t(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{window.immediateFetch.getData(e,t)}catch(e){n()}}))}))}static hasKey(e){return window.immediateFetch.hasKey(e)}static addCallback(e,t){window.immediateFetch.addCallback(e,t)}}const Va="JustForYouCarouselWrapper";var $a;!function(e){e.Default="bp-p-justForYouCarouselWrapper",e.Javascript="js-justForYouCarouselWrapper",e.CarouselContainer="js-justForYouCarouselWrapper_carouselContainer",e.TooltipContainer="js-justForYouCarouselWrapper_Tooltip"}($a||($a={}));let Ha=Ba=class extends ii{constructor(e){super(e)}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield ii.loadElement(Va,this.options),new Ua({triggerElement:this.element.querySelector(`.${$a.TooltipContainer}`),contents:"Recommendations based on deals you've viewed on Slickdeals",modifiers:{position:Ma.TopCenter}}),yield this.loadDeals()}))}loadDeals(){return t(this,void 0,void 0,(function*(){let e;try{e=yield Ba.getServerRenderedHtml()}catch(e){u.error(e),this.element.remove()}e.html?this.injectHtml(e):this.element.remove()}))}injectHtml(e){var t;this.element.querySelector(`.${$a.CarouselContainer}`).appendChild((t=e.html,Ji.sanitize(t,{RETURN_DOM_FRAGMENT:!0,ADD_ATTR:["form"],USE_PROFILES:{html:!0}}))),this.element.classList.remove(it($a.Default,"invisible")),this.element.classList.add(it($a.Default,"visible"))}static getServerRenderedHtml(){return t(this,void 0,void 0,(function*(){if(!za.hasKey(Ba.immediateFetchKey))return{html:"",renderPlaceholder:!1};try{const e=yield za.getData(Ba.immediateFetchKey);return JSON.parse(e)}catch(e){throw Error("Failed to fetch JFY carousel")}}))}};Ha.immediateFetchKey="jfyCarousel",Ha=Ba=e([Zn(Va),v(Va)],Ha);var Ja,qa;!function(e){e.Default="bp-c-label",e.JavaScript="js-label"}(Ja||(Ja={})),function(e){e.DealCard="dealCard",e.New="new",e.ForYou="forYou",e.Personalized="personalized",e.Expired="expired",e.Promoted="promoted",e.Frontpage="frontpage",e.Popular="popular"}(qa||(qa={}));class Wa extends li{constructor(){super("Label")}createElement(e){let t=[Ja.Default,Ja.JavaScript];return e?.classNames&&(t=[...t,...e.classNames]),e?.modifiers&&e.modifiers.forEach((e=>t.push(it(Ja.Default,e)))),li.parseJsx("span",{className:t.join(" ")})}}var Ga=window&&window.__decorate||function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};var Qa;!function(e){e.Personalized="personalized",e.New="new",e.Expired="expired",e.Promoted="promoted",e.Popular="popular",e.Frontpage="frontpage"}(Qa||(Qa={}));const Ka={[Qa.New]:10,[Qa.Personalized]:20,[Qa.Promoted]:30,[Qa.Expired]:40,[Qa.Popular]:50,[Qa.Frontpage]:60};var Ya;!function(e){e.Personalized="labelPersonalized",e.New="labelNew",e.Expired="labelExpired",e.Promoted="labelPromoted",e.Popular="labelPopular",e.Frontpage="labelFrontpage"}(Ya||(Ya={}));let Xa=class{getLabel(e){const t=this.getLabelOptions(e);if(!t.length)return;const n=this.calculateLabelType(t);if(n===Qa.New){const t=Number(e.dataset.postedAt);if(!1===this.canShowNewLabel(t))return}const i=[qa[at(n)]]??[];return li.parseJsx(Wa,{modifiers:i},n)}calculateLabelType(e){return e.reduce(((e,t)=>{if(Ka[t]>Ka[e])return t}))}getLabelOptions(e){return Object.keys(e.dataset).filter((t=>!!t.startsWith("label")&&"1"===e.dataset[t])).map((e=>{const t=e.replace("label","");return Qa[t]}))}canShowNewLabel(e){const t=document.cookie.split("; ").find((e=>e.startsWith("lastfpvisit2")));let n;return t&&(n=Number(t.split("=").pop())),n||(n=0),n<e}};Xa=Ga([v({key:"DealCardLabelService",scope:f.Singleton})],Xa);var Za=Xa;var eo,to;!function(e){e.Default="bp-p-cashbackTag",e.TooltipContentWrapper="bp-c-tooltip_contentWrapper",e.JavaScript="js-cashbackTag"}(eo||(eo={})),function(e){e.FoldedEdge="foldedEdge",e.FlatLeft="flatLeft"}(to||(to={}));class no extends nt{static onClick(){const e=document.querySelector(`.${Pa.Default}`);if(!e)return;const t=Re.get(e,Ta);t&&t.show()}static createElement(e,t={}){const n=document.createElement("span");n.dataset.role="cashbackTag",n.classList.add(eo.Default),n.style.display="none",t.modifiers&&t.modifiers.length&&t.modifiers.forEach((e=>{n.classList.add(it(eo.Default,e))}));const i=document.createTextNode(`${e}`);if(n.appendChild(i),t.useCashbackActivationModal)n.addEventListener("click",no.onClick);else if(t.tooltip){let e=t.tooltip;"string"==typeof t.tooltip&&(e=document.createTextNode(t.tooltip));const i=document.createElement("div");i.classList.add(`${eo.TooltipContentWrapper}`),i.appendChild(e),new Ua(n,{appendTo:document.body,contents:i,positionAppendTo:[Sr.Bottom,Sr.Left],modifiers:{size:t.tooltipModifiers.size||ja.Default,position:t.tooltipModifiers.position||Ma.TopLeft}})}return n}}const io="ButtonPopup";var ro;!function(e){e.Default="bp-p-buttonPopup",e.JavaScript="js-buttonPopup",e.VotingThumbs="bp-p-buttonPopup--votingThumbs"}(ro||(ro={}));let ao=class extends nt{constructor(e){super(io,e),this.addAnimation=({target:e})=>e.classList.add(it(ft.Grow,"active")),this.removeAnimation=({target:e})=>e.classList.remove(it(ft.Grow,"active"))}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield nt.loadElement(io,this.options),this.initPopup();this.element.querySelectorAll("button").forEach((e=>{e.classList.add(ft.Grow),e.addEventListener("click",this.handleClick.bind(this)),e.addEventListener("mouseenter",this.addAnimation),e.addEventListener("mouseleave",this.removeAnimation)}))}))}initPopup(){this.popup=new Rr({id:this.options.id,position:this.options.position,triggerId:this.options.triggerId,triggerEvent:this.options.triggerEvent,anchorType:Cr.Trigger,changeParentToBody:!0})}handleClick({target:e,currentTarget:t}){let n;if(this.popup.hide(),t&&t instanceof HTMLButtonElement)n=t;else{if(!(e.parentElement instanceof HTMLButtonElement))return void u.error("Cannot find button element of buttonPopup child - target");n=e.parentElement}const i=n.dataset.targetIdentifier;i||u.error("A Button Popup Item must have a 'target-identifier' data attribute set on it"),this.notify({buttonIdentifier:i})}};ao=e([At,v(io)],ao);var oo,so=ao;nt.instantiate(io);const co="VotingThumbsPopup";var lo,uo;!function(e){e.UpVote="upVote",e.DownVote="downVote"}(lo||(lo={})),function(e){e.Default="bp-p-votingThumbsPopup",e.UpVote="bp-p-votingThumbsPopup_upVote",e.DownVote="bp-p-votingThumbsPopup_downVote",e.JavaScript="js-votingThumbsPopup",e.Icon="js-votingThumbsPopup_icon",e.VoteCount="js-votingThumbsPopup_voteCount",e.DarkMode="bp-s-darkMode"}(uo||(uo={}));let po=oo=class extends nt{constructor(e){super(co,e)}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){e.init.call(this),this.element=yield nt.loadElement(co,this.options);const t={voteCount:parseInt(this.options.voteCount,10),voteType:this.options.voteType};this.initState(t),this.initButtonPopup(),this.voteCountElement=this.element.querySelector(`.${uo.VoteCount}`);const n=this.element.dataset.votingType;n&&this.handleVoteType(n),this.element.addEventListener("userVoted",this.handleUserVoted.bind(this))}))}handleUserVoted(e){this.handleVoteType(e.detail.voteType)}handleVoteType(e){let t;"up"===e&&(t=lo.UpVote),"down"===e&&(t=lo.DownVote),t&&(this.setState({voteType:t}),this.updateIcon(),this.updateVoteCountStyles())}static createFromDataAttributes(e){const t={id:e.id,buttonPopupId:`${e.dataset.votingthumbspopupButtonpopupid}-Popup`,voteCount:Number(e.dataset.votingthumbspopupVotecount),postId:Number(e.dataset.votingthumbspopupPostid),actionSource:`${e.dataset.votingthumbspopupActionsource}`,securityToken:e.dataset.votingthumbspopupSecuritytoken};return new oo(t)}initButtonPopup(){const e=document.getElementById(this.options.buttonPopupId);e.classList.add(ro.VotingThumbs),this.element.classList.contains(uo.DarkMode)&&e.classList.add(uo.DarkMode),this.buttonPopup=new so({id:this.options.buttonPopupId,triggerId:this.element.id,position:[Sr.Top,Sr.Left],triggerEvent:Pr.Hover}),this.buttonPopup.subscribe((({buttonIdentifier:e})=>this.doVote(e)))}doVote(e){return t(this,void 0,void 0,(function*(){if(e!==this.getState().voteType)try{yield this.sendVote(e),this.resetVoteCount(),this.setState({voteType:e}),this.updateIcon(),this.updateVoteCount()}catch(e){}}))}updateIcon(){const e=this.element.querySelector(`.${uo.Icon}`);let t;if(this.getState().voteType===lo.UpVote)t=ht.createElement({name:"thumbUp",classNames:[uo.UpVote]});else{if(this.getState().voteType!==lo.DownVote)return;t=ht.createElement({name:"thumbDown",classNames:[uo.DownVote]})}lt(e),e.appendChild(t)}updateVoteCount(){let{voteCount:e}=this.getState();if(this.getState().voteType===lo.UpVote)e+=1;else{if(this.getState().voteType!==lo.DownVote)return;e-=1}this.updateVoteCountStyles(),this.setState({voteCount:e}),this.voteCountElement.textContent=this.getState().voteCount.toString()}updateVoteCountStyles(){if(this.getState().voteType===lo.UpVote)return this.voteCountElement.classList.contains(uo.DownVote)&&this.voteCountElement.classList.remove(uo.DownVote),void this.voteCountElement.classList.add(uo.UpVote);this.voteCountElement.classList.contains(uo.UpVote)&&this.voteCountElement.classList.remove(uo.UpVote),this.voteCountElement.classList.add(uo.DownVote)}resetVoteCount(){let{voteCount:e}=this.getState();if(this.getState().voteType===lo.UpVote)e-=1;else{if(this.getState().voteType!==lo.DownVote)return;e+=1}this.setState({voteCount:e})}sendVote(e){var n;return t(this,void 0,void 0,(function*(){const t=e===lo.UpVote?"1":"-1",i=e===lo.UpVote?"1":"0",r=new URLSearchParams({ajax:"1",controltype:"modern",postid:this.options.postId.toString(),vote:t,votetypeid:i,securitytoken:this.options.securityToken,where_from:"/forums/sdthreadrate_ajax.php",do:"sdthreadratevote",action_source:this.options.actionSource}),a=yield fetch("/forums/sdthreadrate_ajax.php",{method:"POST",body:r}),o=yield a.text(),s=(new DOMParser).parseFromString(o,"application/xml"),c=s.querySelector("dologin");if(c){const e=new URLSearchParams;e.set("action_source",null!==(n=this.options.actionSource)&&void 0!==n?n:"Thread Vote"),window.location.href="/forums/register.php?"+e.toString()}const l=s.querySelector("error")||s.querySelector('[voteError="1"]');if(200!==a.status||l||c)throw new Error("Vote submission error")}))}};var ho;po=oo=e([At,ve(co),v(co)],po),nt.instantiate(co,{fromDom:!0,fromMutation:!0,fromHydrationQueue:!1});var fo,go;!function(e){e.Default="bp-p-dealCard",e.CashbackContainer="js-dealCard_cashbackContainer"}(fo||(fo={})),function(e){e.PostedAt="postedAt"}(go||(go={}));const mo=Jr("DealCard_impressions");let yo=ho=class extends ii{constructor(e,t,n,i){super(i),this.labelService=e,this.registry=t,this.subscriber=n,this.options=i}init(){const e=Object.create(null,{init:{get:()=>super.init}});return t(this,void 0,void 0,(function*(){this.element=yield ii.loadElement("DealCard",this.options),e.init.call(this),this.registry.add(new qr({topic:mo,durable:!1,jobKey:`${this.options.threadId}_${this.options.page}_${this.options.moduleId}_${this.options.indexInModule}`,schedule:[{replays:1,executionFrequency:Hr.EverySession}]})),this.initHeader(),this.options.thirdPartyPixel&&(void 0===window.merchantPixelTrackingControllerReady?document.addEventListener("merchantPixelTrackingControllerReady",(()=>{this.fireTrackingPixelEvent()}),!0):this.fireTrackingPixelEvent())}))}fireTrackingPixelEvent(){const e=new CustomEvent("thirdPartyPixelTrackingEvent",{detail:{merchant:this.options.thirdPartyPixel}});document.dispatchEvent(e)}injectCashbackOffer(e,t){if(this.element.querySelector(`.${eo.Default}`))return;const n=this.element.querySelector(`.${fo.CashbackContainer}`);if(!n)return;const i=no.createElement(e,{modifiers:[to.FlatLeft],useCashbackActivationModal:!0});t&&i.classList.add(`${eo.Default}--${t}`),n.append(i),i.style.display=""}initHeader(){let e=this.element.querySelector(`.${xn.JavaScriptHeader}`);if(!e){const t=document.createElement("header");t.classList.add(xn.JavaScriptHeader,xn.Header),this.element.prepend(t),e=t}const t=this.labelService.getLabel(this.element);t&&e.appendChild(t)}static createFromDataAttributes(e){const t={id:e.id,threadId:e.dataset.threadId,moduleId:e.dataset.moduleId,indexInModule:e.dataset.indexInModule,page:e.dataset.page,cashbackOffer:e.dataset.cashbackOffer,storeId:parseInt(e.dataset.storeId,10),thirdPartyPixel:e.dataset.thirdPartyPixel};return new ho(new Za,m.get("JobRegistry",f.Singleton),m.get(zr,f.Singleton),t)}};yo=ho=e([v("DealCard"),Zn("DealCard",{instantiate:{fromDom:!0,fromMutation:!0,fromHydrationQueue:!1}})],yo);const vo=m.get(zr,f.Singleton);let bo,wo=[];
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var So;!function(e){!function(t){var n="object"==typeof c?c:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=r(e);function r(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===n.Reflect?n.Reflect=e:i=r(n.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,o={__proto__:[]}instanceof Array,s=!a&&!o,c={create:a?function(){return ie(Object.create(null))}:o?function(){return ie({__proto__:null})}:function(){return ie({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,h=new(d||"function"!=typeof WeakMap?ne():WeakMap);function f(e,t,n,i){if(M(n)){if(!H(e))throw new TypeError;if(!q(t))throw new TypeError;return E(e,t)}if(!H(e))throw new TypeError;if(!N(t))throw new TypeError;if(!N(i)&&!M(i)&&!L(i))throw new TypeError;return L(i)&&(i=void 0),C(e,t,n=$(n),i)}function g(e,t){function n(n,i){if(!N(n))throw new TypeError;if(!M(i)&&!W(i))throw new TypeError;O(e,t,n,i)}return n}function m(e,t,n,i){if(!N(n))throw new TypeError;return M(i)||(i=$(i)),O(e,t,n,i)}function y(e,t,n){if(!N(t))throw new TypeError;return M(n)||(n=$(n)),T(e,t,n)}function v(e,t,n){if(!N(t))throw new TypeError;return M(n)||(n=$(n)),P(e,t,n)}function b(e,t,n){if(!N(t))throw new TypeError;return M(n)||(n=$(n)),D(e,t,n)}function w(e,t,n){if(!N(t))throw new TypeError;return M(n)||(n=$(n)),x(e,t,n)}function S(e,t){if(!N(e))throw new TypeError;return M(t)||(t=$(t)),I(e,t)}function A(e,t){if(!N(e))throw new TypeError;return M(t)||(t=$(t)),R(e,t)}function _(e,t,n){if(!N(t))throw new TypeError;M(n)||(n=$(n));var i=k(t,n,!1);if(M(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=h.get(t);return r.delete(n),r.size>0||h.delete(t),!0}function E(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!M(i)&&!L(i)){if(!q(i))throw new TypeError;t=i}}return t}function C(e,t,n,i){for(var r=e.length-1;r>=0;--r){var a=(0,e[r])(t,n,i);if(!M(a)&&!L(a)){if(!N(a))throw new TypeError;i=a}}return i}function k(e,t,n){var i=h.get(e);if(M(i)){if(!n)return;i=new u,h.set(e,i)}var r=i.get(t);if(M(r)){if(!n)return;r=new u,i.set(t,r)}return r}function T(e,t,n){if(P(e,t,n))return!0;var i=Z(t);return!L(i)&&T(e,i,n)}function P(e,t,n){var i=k(t,n,!1);return!M(i)&&z(i.has(e))}function D(e,t,n){if(P(e,t,n))return x(e,t,n);var i=Z(t);return L(i)?void 0:D(e,i,n)}function x(e,t,n){var i=k(t,n,!1);if(!M(i))return i.get(e)}function O(e,t,n,i){k(n,i,!0).set(e,t)}function I(e,t){var n=R(e,t),i=Z(e);if(null===i)return n;var r=I(i,t);if(r.length<=0)return n;if(n.length<=0)return r;for(var a=new p,o=[],s=0,c=n;s<c.length;s++){var l=c[s];a.has(l)||(a.add(l),o.push(l))}for(var d=0,u=r;d<u.length;d++){l=u[d];a.has(l)||(a.add(l),o.push(l))}return o}function R(e,t){var n=[],i=k(e,t,!1);if(M(i))return n;for(var r=Q(i.keys()),a=0;;){var o=Y(r);if(!o)return n.length=a,n;var s=K(o);try{n[a]=s}catch(e){try{X(r)}finally{throw e}}a++}}function j(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function M(e){return void 0===e}function L(e){return null===e}function F(e){return"symbol"==typeof e}function N(e){return"object"==typeof e?null!==e:"function"==typeof e}function B(e,t){switch(j(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=G(e,i);if(void 0!==r){var a=r.call(e,n);if(N(a))throw new TypeError;return a}return U(e,"default"===n?"number":n)}function U(e,t){if("string"===t){var n=e.toString;if(J(n))if(!N(r=n.call(e)))return r;if(J(i=e.valueOf))if(!N(r=i.call(e)))return r}else{var i;if(J(i=e.valueOf))if(!N(r=i.call(e)))return r;var r,a=e.toString;if(J(a))if(!N(r=a.call(e)))return r}throw new TypeError}function z(e){return!!e}function V(e){return""+e}function $(e){var t=B(e,3);return F(t)?t:V(t)}function H(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function J(e){return"function"==typeof e}function q(e){return"function"==typeof e}function W(e){switch(j(e)){case 3:case 4:return!0;default:return!1}}function G(e,t){var n=e[t];if(null!=n){if(!J(n))throw new TypeError;return n}}function Q(e){var t=G(e,r);if(!J(t))throw new TypeError;var n=t.call(e);if(!N(n))throw new TypeError;return n}function K(e){return e.value}function Y(e){var t=e.next();return!t.done&&t}function X(e){var t=e.return;t&&t.call(e)}function Z(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,a)},t.prototype.entries=function(){return new n(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function a(e,t){return t}function o(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}()}function ne(){var e=16,n=c.create(),i=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var e;do{e="@@WeakMap@@"+l()}while(c.has(n,e));return n[e]=!0,e}function a(e,n){if(!t.call(e,i)){if(!n)return;Object.defineProperty(e,i,{value:c.create()})}return e[i]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e)}function l(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<e;++i){var r=t[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",f),e("metadata",g),e("defineMetadata",m),e("hasMetadata",y),e("hasOwnMetadata",v),e("getMetadata",b),e("getOwnMetadata",w),e("getMetadataKeys",S),e("getOwnMetadataKeys",A),e("deleteMetadata",_)}(i)}()}(So||(So={}));var Ao=["inject","multi_inject","name","unmanaged","named","optional"],_o="Request",Eo="Singleton",Co="Transient",ko="ConstantValue",To="Constructor",Po="DynamicValue",Do="Factory",xo="Function",Oo="Instance",Io="Invalid",Ro="Provider",jo="ClassProperty",Mo="ConstructorArgument",Lo="Variable",Fo=0;function No(){return Fo++}var Bo=function(){function e(e,t){this.id=No(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=Io,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===Eo&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),Uo="No matching bindings found for serviceIdentifier:",zo="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Vo=function(e,t){return"onDeactivation() error in class "+e+": "+t},$o=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata("inversify:paramtypes",e),userGeneratedMetadata:Reflect.getMetadata("inversify:tagged",e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata("inversify:tagged_props",e)||[]},e}(),Ho=2,Jo=0,qo=1;function Wo(e){return e instanceof RangeError||"Maximum call stack size exceeded"===e.message}function Go(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function Qo(e,t,n){var i="",r=n(e,t);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(e){var t="Object";null!==e.implementationType&&(t=Xo(e.implementationType)),i=i+"\n "+t,e.constraint.metaData&&(i=i+" - "+e.constraint.metaData)}))),i}function Ko(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||Ko(e.parentRequest,t))}function Yo(e){e.childRequests.forEach((function(e){if(Ko(e,e.serviceIdentifier)){var t=function(e){return function e(t,n){void 0===n&&(n=[]);var i=Go(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(e);throw new Error("Circular dependency found: "+t)}Yo(e)}))}function Xo(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var Zo=function(){function e(e){this.id=No(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),es=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return"named"===this.key?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}(),ts=function(e,t){this.parentContext=e,this.rootRequest=t},ns=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),is=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),rs=function(){function e(e,t,n,i){this.id=No(),this.type=e,this.serviceIdentifier=n;var r="symbol"==typeof t?t.toString().slice(7,-1):t;this.name=new is(r||""),this.identifier=t,this.metadata=new Array;var a=null;"string"==typeof i?a=new es("named",i):i instanceof es&&(a=i),null!==a&&this.metadata.push(a)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag("multi_inject")},e.prototype.matchesArray=function(e){return this.matchesTag("multi_inject")(e)},e.prototype.isNamed=function(){return this.hasTag("named")},e.prototype.isTagged=function(){return this.metadata.some((function(e){return Ao.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag("optional")(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return"named"===e.key}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return Ao.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag("named")(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var i=0,r=t.metadata;i<r.length;i++){var a=r[i];if(a.key===e&&a.value===n)return!0}return!1}},e}(),as=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};function os(e,t,n,i){var r=e.getConstructorMetadata(n),a=r.compilerGeneratedMetadata;if(void 0===a)throw new Error("Missing required @injectable annotation in: "+t+".");var o=r.userGeneratedMetadata,s=Object.keys(o),c=0===n.length&&s.length>0,l=s.length>n.length,d=function(e,t,n,i,r){for(var a=[],o=0;o<r;o++){var s=ss(o,e,t,n,i);null!==s&&a.push(s)}return a}(i,t,a,o,c||l?s.length:n.length),u=ls(e,n,t);return as(as([],d,!0),u,!0)}function ss(e,t,n,i,r){var a=r[e.toString()]||[],o=us(a),s=!0!==o.unmanaged,c=i[e],l=o.inject||o.multiInject;if((c=l||c)instanceof ns&&(c=c.unwrap()),s){if(!t&&(c===Object||c===Function||void 0===c))throw new Error("Missing required @inject or @multiInject annotation in: argument "+e+" in class "+n+".");var d=new rs(Mo,o.targetName,c);return d.metadata=a,d}return null}function cs(e,t,n,i){var r=e||t;if(void 0===r){var a="Missing required @injectable annotation in: for property "+String(n)+" in class "+i+".";throw new Error(a)}return r}function ls(e,t,n){for(var i=e.getPropertiesMetadata(t),r=[],a=Object.getOwnPropertySymbols(i),o=0,s=Object.keys(i).concat(a);o<s.length;o++){var c=s[o],l=i[c],d=us(l),u=d.targetName||c,p=cs(d.inject,d.multiInject,c,n),h=new rs(jo,u,p);h.metadata=l,r.push(h)}var f=Object.getPrototypeOf(t.prototype).constructor;if(f!==Object){var g=ls(e,f,n);r=as(as([],r,!0),g,!0)}return r}function ds(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var i=os(e,Xo(n),n,!0),r=i.map((function(e){return e.metadata.filter((function(e){return"unmanaged"===e.key}))})),a=[].concat.apply([],r).length,o=i.length-a;return o>0?o:ds(e,n)}return 0}function us(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t.inject,multiInject:t.multi_inject,targetName:t.name,unmanaged:t.unmanaged}}var ps=function(){function e(e,t,n,i,r){this.id=No(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=r,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,i){var r=new e(t,this.parentContext,this,n,i);return this.childRequests.push(r),r},e}();function hs(e){return e._bindingDictionary}function fs(e,t,n,i,r){var a=ms(n.container,r.serviceIdentifier),o=[];return a.length===Jo&&n.container.options.autoBindInjectable&&"function"==typeof r.serviceIdentifier&&e.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(r.serviceIdentifier).toSelf(),a=ms(n.container,r.serviceIdentifier)),o=t?a:a.filter((function(e){var t=new ps(e.serviceIdentifier,n,i,e,r);return e.constraint(t)})),function(e,t,n,i){switch(t.length){case Jo:if(n.isOptional())return t;var r=Go(e),a=Uo;throw a+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",i=t.getNamedTag(),r=t.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e}(r,n),a+=Qo(i,r,ms),new Error(a);case qo:return t;case Ho:default:if(n.isArray())return t;a="Ambiguous match found for serviceIdentifier: "+(r=Go(e));throw a+=Qo(i,r,ms),new Error(a)}}(r.serviceIdentifier,o,r,n.container),o}function gs(e,t,n,i,r,a){var o,s;if(null===r){o=fs(e,t,i,null,a),s=new ps(n,i,null,o,a);var c=new ts(i,s);i.addPlan(c)}else o=fs(e,t,i,r,a),s=r.addChildRequest(a.serviceIdentifier,o,a);o.forEach((function(t){var n=null;if(a.isArray())n=s.addChildRequest(t.serviceIdentifier,t,a);else{if(t.cache)return;n=s}if(t.type===Oo&&null!==t.implementationType){var r=function(e,t){return os(e,Xo(t),t,!1)}(e,t.implementationType);if(!i.container.options.skipBaseClassChecks){var o=ds(e,t.implementationType);if(r.length<o){var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."}(Xo(t.implementationType));throw new Error(c)}}r.forEach((function(t){gs(e,!1,t.serviceIdentifier,i,n,t)}))}}))}function ms(e,t){var n=[],i=hs(e);return i.hasKey(t)?n=i.get(t):null!==e.parent&&(n=ms(e.parent,t)),n}function ys(e,t,n,i,r,a,o,s){void 0===s&&(s=!1);var c=new Zo(t),l=function(e,t,n,i,r,a){var o=new es(e?"multi_inject":"inject",n),s=new rs(t,i,n,o);if(void 0!==r){var c=new es(r,a);s.metadata.push(c)}return s}(n,i,r,"",a,o);try{return gs(e,s,r,c,null,l),c}catch(e){throw Wo(e)&&Yo(c.plan.rootRequest),e}}function vs(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function bs(e){return!!vs(e)||Array.isArray(e)&&e.some(vs)}var ws,Ss=window&&window.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))},As=window&&window.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},_s=function(e,t,n){e.has(t.id)||e.set(t.id,n)},Es=function(e,t){e.cache=t,e.activated=!0,vs(t)&&Cs(e,t)},Cs=function(e,t){return Ss(void 0,void 0,void 0,(function(){var n,i;return As(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t];case 1:return n=r.sent(),e.cache=n,[3,3];case 2:throw i=r.sent(),e.cache=null,e.activated=!1,i;case 3:return[2]}}))}))};!function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(ws||(ws={}));var ks=window&&window.__assign||function(){return(ks=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ts=window&&window.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))},Ps=window&&window.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ds=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};function xs(e,t,n){var i;if(t.length>0){var r=function(e,t){return e.reduce((function(e,n){var i=t(n);return n.target.type===Mo?e.constructorInjections.push(i):(e.propertyRequests.push(n),e.propertyInjections.push(i)),e.isAsync||(e.isAsync=bs(i)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),a=ks(ks({},r),{constr:e});i=r.isAsync?function(e){return Ts(this,void 0,void 0,(function(){var t,n;return Ps(this,(function(i){switch(i.label){case 0:return[4,Is(e.constructorInjections)];case 1:return t=i.sent(),[4,Is(e.propertyInjections)];case 2:return n=i.sent(),[2,Os(ks(ks({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(a):Os(a)}else i=new e;return i}function Os(e){var t,n=new((t=e.constr).bind.apply(t,Ds([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,i){var r=t.target.identifier,a=e.propertyInjections[i];n[r]=a})),n}function Is(e){return Ts(this,void 0,void 0,(function(){var t,n,i,r;return Ps(this,(function(a){for(t=[],n=0,i=e;n<i.length;n++)r=i[n],Array.isArray(r)?t.push(Promise.all(r)):t.push(r);return[2,Promise.all(t)]}))}))}function Rs(e,t){var n=function(e,t){var n,i;if(Reflect.hasMetadata("post_construct",e)){var r=Reflect.getMetadata("post_construct",e);try{return null===(i=(n=t)[r.value])||void 0===i?void 0:i.call(n)}catch(t){throw new Error((a=e.name,o=t.message,"@postConstruct error in class "+a+": "+o))}}var a,o}(e,t);return vs(n)?n.then((function(){return t})):t}function js(e,t){e.scope!==Eo&&function(e,t){var n="Class cannot be instantiated in "+(e.scope===_o?"request":"transient")+" scope.";if("function"==typeof e.onDeactivation)throw new Error(Vo(t.name,n));if(Reflect.hasMetadata("pre_destroy",t))throw new Error("@preDestroy error in class "+t.name+": "+n)}(e,t)}var Ms=window&&window.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))},Ls=window&&window.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Fs=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,i=t.childRequests,r=t.target&&t.target.isArray(),a=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(r&&a)return i.map((function(t){return Fs(e)(t)}));if(!t.target.isOptional()||0!==n.length){var o=n[0];return zs(e,t,o)}}},Ns=function(e,t){var n=function(e){switch(e.type){case Do:return{factory:e.factory,factoryType:ws.Factory};case Ro:return{factory:e.provider,factoryType:ws.Provider};case Po:return{factory:e.dynamicValue,factoryType:ws.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}}(e);return function(e,t){try{return e()}catch(e){throw Wo(e)&&(e=t()),e}}((function(){return n.factory.bind(e)(t)}),(function(){return new Error((e=n.factoryType,i=t.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+e+"' bindings. Please investigate bindings withservice identifier '"+i+"'."));var e,i}))},Bs=function(e,t,n){var i,r=t.childRequests;switch(function(e){var t=null;switch(e.type){case ko:case xo:t=e.cache;break;case To:case Oo:t=e.implementationType;break;case Po:t=e.dynamicValue;break;case Ro:t=e.provider;break;case Do:t=e.factory}if(null===t){var n=Go(e.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case ko:case xo:i=n.cache;break;case To:i=n.implementationType;break;case Oo:i=function(e,t,n,i){js(e,t);var r=xs(t,n,i);return vs(r)?r.then((function(e){return Rs(t,e)})):Rs(t,r)}(n,n.implementationType,r,Fs(e));break;default:i=Ns(n,t.parentContext)}return i},Us=function(e,t,n){var i=function(e,t){return t.scope===Eo&&t.activated?t.cache:t.scope===_o&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==i||function(e,t,n){t.scope===Eo&&Es(t,n),t.scope===_o&&_s(e,t,n)}(e,t,i=n()),i},zs=function(e,t,n){return Us(e,n,(function(){var i=Bs(e,t,n);return i=vs(i)?i.then((function(e){return Vs(t,n,e)})):Vs(t,n,i)}))};function Vs(e,t,n){var i,r=$s(e.parentContext,t,n),a=Ws(e.parentContext.container),o=a.next();do{i=o.value;var s=e.parentContext,c=e.serviceIdentifier,l=qs(i,c);r=vs(r)?Js(l,s,r):Hs(l,s,r),o=a.next()}while(!0!==o.done&&!hs(i).hasKey(e.serviceIdentifier));return r}var $s=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},Hs=function(e,t,n){for(var i=e.next();!i.done;){if(vs(n=i.value(t,n)))return Js(e,t,n);i=e.next()}return n},Js=function(e,t,n){return Ms(void 0,void 0,void 0,(function(){var i,r;return Ls(this,(function(a){switch(a.label){case 0:return[4,n];case 1:i=a.sent(),r=e.next(),a.label=2;case 2:return r.done?[3,4]:[4,r.value(t,i)];case 3:return i=a.sent(),r=e.next(),[3,2];case 4:return[2,i]}}))}))},qs=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},Ws=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};var Gs=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||Gs(n,t))},Qs=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new es(e,t),n}},Ks=Qs("named"),Ys=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var i=t.bindings[0].implementationType;return e===i}return!1}},Xs=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new Zs(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=Ks(e),new Zs(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&(null!==e.target&&!e.target.isNamed()&&!e.target.isTagged())},new Zs(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=Qs(e)(t),new Zs(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&Ys(e)(t.parentRequest)},new Zs(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Ks(e)(t.parentRequest)},new Zs(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Qs(e)(t)(n.parentRequest)},new Zs(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&Gs(t,Ys(e))},new Zs(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!Gs(t,Ys(e))},new Zs(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Gs(t,Ks(e))},new Zs(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!Gs(t,Ks(e))},new Zs(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Gs(n,Qs(e)(t))},new Zs(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!Gs(n,Qs(e)(t))},new Zs(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&Gs(t,e)},new Zs(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!Gs(t,e)},new Zs(this._binding)},e}(),Zs=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new Xs(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new Xs(this._binding)},e}(),ec=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Xs(this._binding),this._bindingOnSyntax=new Zs(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),tc=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=_o,new ec(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=Eo,new ec(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=Co,new ec(this._binding)},e}(),nc=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Xs(this._binding),this._bindingOnSyntax=new Zs(this._binding),this._bindingInSyntax=new tc(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),ic=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=Oo,this._binding.implementationType=e,new nc(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=ko,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Eo,new ec(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=Po,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new nc(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=To,this._binding.implementationType=e,this._binding.scope=Eo,new ec(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=Do,this._binding.factory=e,this._binding.scope=Eo,new ec(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=xo,this._binding.scope=Eo,t},e.prototype.toAutoFactory=function(e){return this._binding.type=Do,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=Eo,new ec(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=Do,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new ec(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=Ro,this._binding.provider=e,this._binding.scope=Eo,new ec(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),rc=function(){function e(){}return e.of=function(t,n,i,r,a){var o=new e;return o.bindings=t,o.middleware=n,o.deactivations=r,o.activations=i,o.moduleActivationStore=a,o},e}();var ac=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error("NULL argument");if(null==t)throw new Error("NULL argument");var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error("NULL argument");var t=this._map.get(e);if(void 0!==t)return t;throw new Error("Key Not Found")},e.prototype.remove=function(e){if(null==e)throw new Error("NULL argument");if(!this._map.delete(e))throw new Error("Key Not Found")},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,i){var r=e.hasKey(n)?e.get(n):void 0;if(void 0!==r){var a=i.filter((function(e){return!r.some((function(t){return e===t}))}));t._setValue(n,a)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(i,r){for(var a=[],o=0,s=i;o<s.length;o++){var c=s[o];e(c)?n.push(c):a.push(c)}t._setValue(r,a)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error("NULL argument");return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,"object"==typeof(i=e)&&null!==i&&"clone"in i&&"function"==typeof i.clone?e.clone():e);var i}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),oc=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new ac,onDeactivations:new ac}},e}(),sc=window&&window.__assign||function(){return(sc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},cc=window&&window.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))},lc=window&&window.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},dc=window&&window.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},uc=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=Co;else if(t.defaultScope!==Eo&&t.defaultScope!==Co&&t.defaultScope!==_o)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=No(),this._bindingDictionary=new ac,this._snapshots=[],this._middleware=null,this._activations=new ac,this._deactivations=new ac,this.parent=null,this._metadataReader=new $o,this._moduleActivationStore=new oc}return e.merge=function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=new e,o=dc([t,n],i,!0).map((function(e){return hs(e)})),s=hs(a);function c(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return o.forEach((function(e){c(e,s)})),a},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=e;i<r.length;i++){var a=r[i],o=n(a.id);a.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cc(this,void 0,void 0,(function(){var t,n,i,r,a;return lc(this,(function(o){switch(o.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,i=e,o.label=1;case 1:return n<i.length?(r=i[n],a=t(r.id),[4,r.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cc(this,void 0,void 0,(function(){var t,n,i,r;return lc(this,(function(a){switch(a.label){case 0:t=0,n=e,a.label=1;case 1:return t<n.length?(i=n[t],r=this._removeModuleBindings(i.id),[4,this._deactivateSingletonsAsync(r)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(i.id),a.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||Co,n=new Bo(e,t);return this._bindingDictionary.add(e,n),new ic(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return cc(this,void 0,void 0,(function(){return lc(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return cc(this,void 0,void 0,(function(){var t;return lc(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new ac},e.prototype.unbindAllAsync=function(){return cc(this,void 0,void 0,(function(){var e,t=this;return lc(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,i){e.push(t._deactivateSingletonsAsync(i))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new ac,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,"named",t)},e.prototype.isBoundTagged=function(e,t,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e),a=function(e,t,n,i){var r=new rs(Lo,"",t,new es(n,i)),a=new Zo(e);return new ps(t,a,null,[],r)}(this,e,t,n);i=r.some((function(e){return e.constraint(a)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,t,n)),i},e.prototype.snapshot=function(){this._snapshots.push(rc.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return cc(this,void 0,void 0,(function(){var t;return lc(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var i=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(i)},e.prototype.getTaggedAsync=function(e,t,n){return cc(this,void 0,void 0,(function(){var i;return lc(this,(function(r){return i=this._getNotAllArgs(e,!1,t,n),[2,this._get(i)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,"named",t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,"named",t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var i=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(i)},e.prototype.getAllTaggedAsync=function(e,t,n){var i=this._getNotAllArgs(e,!0,t,n);return this._getAll(i)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,"named",t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,"named",t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){if(Reflect.hasMetadata("pre_destroy",e))return t[Reflect.getMetadata("pre_destroy",e).value]()},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,i=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var r=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(vs(r))return this._handleDeactivationError(r.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,i)})),i)}var a=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,i);if(vs(a))return this._handleDeactivationError(a,i)}catch(e){throw new Error(Vo(i.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return cc(this,void 0,void 0,(function(){var n;return lc(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(Vo(t.name,n.message));case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,i=t.next();i.value;){var r=i.value(e);if(vs(r))return r.then((function(){return n._deactivateContainerAsync(e,t)}));i=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return cc(this,void 0,void 0,(function(){var n;return lc(this,(function(i){switch(i.label){case 0:n=t.next(),i.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return i.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(i){var r=e.rebind(i);return t(r,n),r}},i=function(t){return function(n,i){e._moduleActivationStore.addActivation(t,n,i),e.onActivation(n,i)}},r=function(t){return function(n,i){e._moduleActivationStore.addDeactivation(t,n,i),e.onDeactivation(n,i)}};return function(a){return{bindFunction:(o=a,function(n){var i=e.bind(n);return t(i,o),i}),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:i(a),onDeactivationFunction:r(a),rebindFunction:n(a),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}};var o}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=sc(sc({},e),{contextInterceptor:function(e){return e},targetType:Lo});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(bs(t))throw new Error("You are attempting to construct '"+e.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,i){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:i}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=ys(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return function(e){return Fs(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n))}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return vs(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(vs(this._deactivateIfSingleton(i)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return cc(this,void 0,void 0,(function(){var t=this;return lc(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return cc(this,void 0,void 0,(function(){return lc(this,(function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("Could not unbind serviceIdentifier: "+Go(e))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var i=this;if("function"==typeof e.onDeactivation){var r=e.onDeactivation(t);if(vs(r))return r.then((function(){return i._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return cc(this,void 0,void 0,(function(){return lc(this,(function(i){switch(i.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return i.sent(),[2]}}))}))},e}(),pc=function(e){this.id=No(),this.registry=e};function hc(e,t,n,i){!function(e){if(void 0!==e)throw new Error(zo)}(t),gc("inversify:tagged",e,n.toString(),i)}function fc(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,i=e;n<i.length;n++){var r=i[n];if(t.has(r))return r;t.add(r)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error("Metadata key was used more than once in a parameter: "+n.toString())}else t=[e];return t}function gc(e,t,n,i){var r=fc(i),a={};Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var o=a[n];if(void 0===o)o=[];else for(var s=function(e){if(r.some((function(t){return t.key===e.key})))throw new Error("Metadata key was used more than once in a parameter: "+e.key.toString())},c=0,l=o;c<l.length;c++){s(l[c])}o.push.apply(o,r),a[n]=o,Reflect.defineMetadata(e,a,t)}function mc(e){return function(t,n,i){"number"==typeof i?hc(t,n,i,e):function(e,t,n){if(void 0!==e.prototype)throw new Error(zo);gc("inversify:tagged_props",e.constructor,t,n)}(t,n,e)}}function yc(){return function(e){if(Reflect.hasOwnMetadata("inversify:paramtypes",e))throw new Error("Cannot apply @injectable decorator multiple times.");var t=Reflect.getMetadata("design:paramtypes",e)||[];return Reflect.defineMetadata("inversify:paramtypes",t,e),e}}var vc,bc=(vc="inject",function(e){return function(t,n,i){if(void 0===e){var r="function"==typeof t?t.name:t.constructor.name;throw new Error(function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."}(r))}return mc(new es(vc,e))(t,n,i)}});var wc=l((function(e,t){e.exports=function(){function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function t(n,i){function r(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({},i,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in a)a[s]&&(o+="; "+s,!0!==a[s]&&(o+="="+a[s].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+o}}function a(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],i={},r=0;r<t.length;r++){var a=t[r].split("="),o=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(i[s]=n.read(o,s),e===s)break}catch(e){}}return e?i[e]:i}}return Object.create({set:r,get:a,remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}return t({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()})),Sc=Object.defineProperty,Ac=(e,t)=>Sc(e,"name",{value:t,configurable:!0}),_c=(e,t,n)=>(((e,t,n)=>{t in e?Sc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Ec=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Cc=(e,t,n)=>(Ec(e,t,"read from private field"),n?n.call(e):t.get(e)),kc=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Tc=(e,t,n,i)=>(Ec(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Pc=class{constructor(e){this.providers=e.providers,this.units=e.units}};Ac(Pc,"AdUnitConfig");var Dc,xc,Oc=Pc,Ic=Ac((e=>"object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).every((e=>"string"==typeof e))),"isAdUnitProviders"),Rc=Ac((e=>"object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.entries(e).every((([e,t])=>"string"==typeof e&&"string"==typeof t))),"isProvidersConfig"),jc=Ac((e=>Array.isArray(e)&&e.every((e=>Array.isArray(e)&&(e.every((e=>Number.isInteger(e)))&&e.length%2==0||e.every((e=>"string"==typeof e&&"fluid"===e)))))),"isAdSizes");(xc=Dc||(Dc={})).Mobile="mobile",xc.Desktop="desktop";var Mc,Lc,Fc,Nc,Bc=Ac((e=>Array.isArray(e)&&e.every((e=>Object.values(Dc).includes(e)))),"isBreakpointTypes");(Lc=Mc||(Mc={})).RefreshBiddingStarted="refreshBiddingStarted",Lc.RefreshBiddingCompleted="refreshBiddingCompleted",Lc.RefreshAdUnitPopulated="refreshAdUnitPopulated",Lc.DynamicBiddingStarted="dynamicBiddingStarted",Lc.DynamicBiddingCompleted="dynamicBiddingCompleted",Lc.DynamicAdUnitPopulated="dynamicAdUnitPopulated",Lc.AdUnitViewable="adUnitViewable",(Nc=Fc||(Fc={})).AdblockDetected="adblockDetected",Nc.ProcessingStarted="processingStarted",Nc.BiddingStarted="biddingStarted",Nc.BiddingCompleted="biddingCompleted",Nc.AdUnitPopulated="adUnitPopulated",Nc.ReinitializeBiddingStarted="reinitializeBiddingStarted",Nc.ReinitializeBiddingCompleted="reinitializeBiddingCompleted",Nc.ReinitializeAdUnitPopulated="reinitializeAdUnitPopulated";var Uc={...Mc,...Fc},zc=[Uc.RefreshBiddingStarted,Uc.RefreshBiddingCompleted,Uc.RefreshAdUnitPopulated,Uc.DynamicBiddingStarted,Uc.DynamicBiddingCompleted,Uc.DynamicAdUnitPopulated,Uc.AdUnitViewable],Vc=[Uc.AdblockDetected,Uc.ProcessingStarted,Uc.BiddingStarted,Uc.BiddingCompleted,Uc.AdUnitPopulated,Uc.ReinitializeBiddingStarted,Uc.ReinitializeBiddingCompleted,Uc.ReinitializeAdUnitPopulated],$c=[Uc.RefreshBiddingStarted,Uc.RefreshBiddingCompleted,Uc.RefreshAdUnitPopulated],Hc=[Uc.DynamicBiddingStarted,Uc.DynamicBiddingCompleted,Uc.DynamicAdUnitPopulated],Jc=[Uc.ReinitializeBiddingStarted,Uc.ReinitializeBiddingCompleted,Uc.ReinitializeAdUnitPopulated],qc=Ac((e=>Array.isArray(e)&&e.every((e=>Vc.includes(e)))),"isPageMetrics"),Wc=Ac((e=>Array.isArray(e)&&e.every((e=>zc.includes(e)))),"isAdMetrics"),Gc=Ac((e=>Array.isArray(e)&&e.every((e=>$c.includes(e)))),"isRefreshMetrics"),Qc=Ac((e=>Array.isArray(e)&&e.every((e=>Hc.includes(e)))),"isDynamicMetrics"),Kc=Ac((e=>Array.isArray(e)&&e.every((e=>Jc.includes(e)))),"isReinitializeMetrics"),Yc=Ac((e=>"providers"in e&&"breakpoints"in e&&"metrics"in e&&"object"==typeof e),"isDefaultOptions"),Xc=class{constructor(e){e.name&&(this.name=e.name),e.sizes&&(this.sizes=e.sizes),e.providers&&(this.providers=e.providers),e.breakpoints&&(this.breakpoints=e.breakpoints),e.metrics&&(this.metrics=e.metrics),e.dynamic&&(this.dynamic=e.dynamic)}};Ac(Xc,"AdUnit");var Zc=Xc,el=class{static transformFromData(e,t,n,i){const{sizes:r,dynamic:a}=t,o=t.providers??i.providers,s=i.providers===o,c=Object.keys(o),l=t.breakpoints??i.breakpoints,d=i.breakpoints===l,u=t.metrics??i.metrics,p=i.metrics===u;if(!r)throw new Error('Must specify "sizes" property in ad units config.');if(!jc(r))throw new Error(`\n        Invalid "sizes" property ("${JSON.stringify(t.sizes)}") supplied to ad unit "${e}" in ad units config.\n        \n"sizes" property must be an array with dual paired, integer values which specify the width/height of an ad slot (e.g. [[200, 400], [100, 200]]), or the string 'fluid'\n      `);if(!Ic(o))throw new Error(`\n        Invalid "providers" property ("${JSON.stringify(t.providers)}") supplied to ${s?"defaults":`ad unit "${e}"`} in ad units config.\n        \n"providers" property must be an object of valid ad providers (e.g. { "provider1": { data: 0 } }).\n      `);if(c.forEach((t=>{if(!n[t]){if(!s)throw new Error(`Provider "${t}" defined in provider data in ad "${e}" is not defined in ad unit config.`);throw new Error(`Default Provider "${t}" defined in provider data is not defined in ad unit config.`)}})),!Bc(l))throw new Error(`\n        Invalid "breakpoints" property ("${JSON.stringify(t.breakpoints)}") supplied to ${d?"defaults":`ad unit "${e}"`} in ad units config.\n        \n"breakpoints" property must be an array of valid breakpoints (e.g. ["breakpoint1", "breakpoint2"]).'\n      `);if(u&&!Wc(u))throw new Error(`\n        Invalid "metrics" property ("${JSON.stringify(t.metrics)}") supplied to ${p?"defaults":`ad unit "${e}"`} in ad units config.\n        \n"metrics" property must be an array of valid metrics (e.g. ["metric1", "metric2"]).\n      `);if(a&&"boolean"!=typeof a)throw new Error(`\n        Invalid "dynamic" property ("${JSON.stringify(t.dynamic)}") supplied to ad unit "${e}" in ad units config.\n        \n"dynamic" property must be a boolean.\n      `);return new Zc({name:e,sizes:r,providers:o,breakpoints:l,metrics:u,dynamic:a})}};Ac(el,"AdUnitTransformer");var tl=el;Ac(class{static transformFromJson(e){const{providers:t,defaults:n,units:i}=e;if(!t)throw new Error('Must specify "providers" property in ad units config.');if(!Rc(t))throw new Error(`\n        Invalid "providers" property ("${JSON.stringify(t)}") in ad units config.\n        \n"providers" property must be an object of valid ad providers and connectors (e.g. { "provider1": "ProviderConnector1", "provider2": "ProviderConnector2" }).\n      `);if(!n)throw new Error('Must specify "defaults" property in ad unit config.');if(!Yc(n))throw new Error(`\n        Invalid "defaults" property ("${JSON.stringify(n)}") in ad units config.\n        \n"defaults" property must by an object with the following properties: refresh, providers, breakpoints, metric\n      `);if(!i)throw new Error('Must specify "units" property in ad units config.');const r=Object.entries(i).map((([e,i])=>tl.transformFromData(e,i,t,n)));return new Oc({providers:t,units:r})}},"AdUnitConfigTransformer");var nl=class{constructor(e){this.rules=e.rules,this.pages=e.pages}};Ac(nl,"OverridesConfig");var il=nl,rl=class{constructor(e){this.name=e.name,this.ruleset=e.ruleset}};Ac(rl,"Rule");var al=rl,ol=Ac((e=>"object"==typeof e&&null!==e&&"rule"in e&&"string"==typeof e.rule&&"match"in e&&"boolean"==typeof e.match),"isRuleDefinition"),sl=class{static transformFromData(e,t){if(!t.ruleset)throw new Error(`Must specify "ruleset" property for rule "${e}" in overrides config.`);if(!(Symbol.iterator in Object(t.ruleset)))throw new Error(`The "ruleset" property for rule "${e}" in overrides config must be an array.`);const n=Array.from(t.ruleset).map((t=>{if(!ol(t))throw new Error(`\n          Invalid rule definition supplied: ("${JSON.stringify(t)}") supplied to ruleset for rule "${e}" in overrides config.\n          \na rule definition must be an object with a "rule" and "match" property (e.g. { "rule": "isCookied", "match": false }).\n        `);return t}));return new al({name:e,ruleset:n})}};Ac(sl,"RuleTransformer");var cl=sl,ll=Ac((e=>"object"==typeof e&&null!==e&&"rate"in e&&"number"==typeof e.rate&&"limit"in e&&"number"==typeof e.limit),"isPageRefresh"),dl=class{constructor(e){this.name=e.name,this.placement=e.placement,e.unit&&(this.unit=e.unit),e.overrides&&(this.overrides=e.overrides)}};Ac(dl,"Ad");var ul=dl,pl=class{constructor(e){this.name=e.name,e.configurations&&(this.configurations=e.configurations),e.tests&&(this.tests=e.tests)}};Ac(pl,"AdOverride");var hl=pl,fl=class{constructor(e){this.name=e.name,this.rules=e.rules}};Ac(fl,"Configuration");var gl=fl,ml=class{constructor(e){this.name=e.name,e.sizes&&(this.sizes=e.sizes),e.providers&&(this.providers=e.providers),e.breakpoints&&(this.breakpoints=e.breakpoints),e.metrics&&(this.metrics=e.metrics),e.dynamic&&(this.dynamic=e.dynamic)}};Ac(ml,"AdUnitOverride");var yl=ml,vl=class{static transformFromOverrides(e,t){const{sizes:n,providers:i,breakpoints:r,metrics:a,dynamic:o}=t;if(n&&!jc(n))throw new Error(`\n        Invalid "sizes" property: ("${JSON.stringify(n)}") supplied to ad unit "${e}" in overrides config.\n        \n"sizes" property must be an array with dual paired, integer values which specify the width/height of an ad slot (e.g. [[200, 400], [100, 200]]), or the string 'fluid'\n      `);if(i&&!Ic(i))throw new Error(`\n        Invalid "providers" property: ("${JSON.stringify(i)}") supplied to ad unit "${e}" in overrides config.\n        \n"providers" property must be an array of valid ad providers (e.g. ["provider1", "provider2"]).\n      `);if(r&&!Bc(t.breakpoints))throw new Error(`\n        Invalid "breakpoints" property: ("${JSON.stringify(r)}") supplied to ad unit "${e}" in overrides config.\n        \n"breakpoints" property must be an array of valid breakpoints (e.g. ["breakpoint1", "breakpoint2"]).\n      `);if(a&&!Wc(a))throw new Error(`\n        Invalid "metrics" property: ("${JSON.stringify(a)}") supplied to ad unit "${e}" in overrides config.\n        \n"metrics" property must be an array of valid metrics (e.g. ["metric1", "metric2"]).\n      `);if(o&&"boolean"!=typeof o)throw new Error(`\n        Invalid "dynamic" property ("${JSON.stringify(o)}") found in production config.\n        \n"dynamic" property must be a boolean.\n      `);return new yl({name:e,sizes:n,providers:i,breakpoints:r,metrics:a,dynamic:o})}};Ac(vl,"AdUnitOverrideTransformer");var bl=vl,wl=class{static transformFromData(e,t){if(!t.rules)throw new Error(`Must specify "rules" property for configuration "${e}" in overrides config.`);if(0===Object.keys(t.rules).length)throw new Error(`"rules" property for configuration "${e}" in overrides config must not be empty.`);if(Object.keys(t.rules).length>1)throw new Error(`"rules" property for configuration "${e}" in overrides config should only have 1 entry.`);const n=Object.entries(t.rules).map((([e,t])=>bl.transformFromOverrides(e,t)));return new gl({name:e,rules:n})}};Ac(wl,"ConfigurationTransformer");var Sl=wl,Al=class{constructor(e){this.name=e.name,this.variants=e.variants}};Ac(Al,"AbTest");var _l=Al,El=class{static transformFromData(e,t){if(!t.variants)throw new Error(`Must specify "variants" property for ab test "${e}" in overrides config.`);if(0===Object.keys(t.variants).length)throw new Error(`"variants" property for ab test "${e}" in overrides config must not be empty.`);const n=Object.entries(t.variants).map((([e,t])=>bl.transformFromOverrides(e,t)));return new _l({name:e,variants:n})}};Ac(El,"AbTestTransformer");var Cl=El,kl=class{static transformFromData(e,t){const{unit:n,placement:i,overrides:r}=t;if(!n)throw new Error(`Must specify "unit" property for ad "${e}" in page slots config.`);if("string"!=typeof n)throw new Error(`\n        Invalid "unit" property for ad "${e}" in page slots config.\n        \n"unit" property must be a string (e.g. "testUnit").\n      `);if(!i)throw new Error(`Must specify "placement" property for ad "${e}" in page slots config.`);if("string"!=typeof i)throw new Error(`\n        Invalid "placement" property for ad "${e}" in page slots config.\n        \n"placement" property must be a string (e.g. "300BTF1").\n      `);if(r){const{breakpoints:t,metrics:n,providers:i,dynamic:a}=r;if(t&&!Bc(t))throw new Error(`\n          Invalid "breakpoints" property ("${JSON.stringify(t)}") supplied to to ad "${e}" in page slots config.\n          \n"breakpoints" property must be an array of valid breakpoints (e.g. ["breakpoint1", "breakpoint2"]).'\n        `);if(n&&!Wc(n))throw new Error(`\n          Invalid "metrics" property ("${JSON.stringify(n)}") supplied to ad "${e}" in page slots config.\n          \n"metrics" property must be an array of valid metrics (e.g. ["metric1", "metric2"]).\n        `);if(i&&!Ic(i))throw new Error(`\n          Invalid "providers" property ("${JSON.stringify(i)}") supplied to ad "${e}" in page slots config.\n          \n"providers" property must be an object of valid ad providers (e.g. { "provider1": { data: 0 } }).\n        `);if(a&&"boolean"!=typeof a)throw new Error(`\n          Invalid "dynamic" property ("${JSON.stringify(a)}") supplied to ad "${e}" in page slots config.\n          \n"dynamic" property must be a boolean.\n        `)}return new ul({name:e,unit:n,placement:i,overrides:r})}static transformFromOverrides(e,t){const n=Object.entries(t?.configurations).map((([e,t])=>Sl.transformFromData(e,t))),i=Object.entries(t?.tests).map((([e,t])=>Cl.transformFromData(e,t)));if(!t.configurations&&!t.tests)throw new Error(`Must specify at least one of "configurations" or "tests" properties for ad "${e}" in overrides config.`);return new hl({name:e,configurations:n,tests:i})}};Ac(kl,"AdTransformer");var Tl=kl,Pl=Ac((e=>"metrics"in e&&"refresh"in e&&"object"==typeof e),"isDefaultOptions"),Dl=class{constructor(e){this.name=e.name,this.ads=e.ads,e.metrics&&(this.metrics=e.metrics),e.refresh&&(this.refresh=e.refresh)}};Ac(Dl,"Page");var xl=Dl,Ol=class{constructor(e){this.name=e.name,this.ads=e.adOverrides}};Ac(Ol,"PageOverride");var Il=Ol,Rl=class{static transformFromData(e,t,n){const{ads:i}=t,r=t.metrics??n.metrics,a=n.metrics===r,o=t.refresh??n.refresh,s=n.refresh===o;if(!i)throw new Error(`Must specify "ads" property for page "${e}" in page slots config.`);const c=Object.entries(i).map((([e,t])=>Tl.transformFromData(e,t)));if(!qc(r))throw new Error(`\n        Invalid "metrics" property ("${JSON.stringify(r)}") supplied to ${a?"defaults":`page "${e}"`} in page slots config.\n        \n"metrics" property must be an array of valid metrics (e.g. ["metric1", "metric2"]).\n      `);if(!ll(o))throw new Error(`\n        Invalid "refresh" property ("${JSON.stringify(o)}") supplied to ${s?"defaults":`page "${e}"`} in page slots config.\n        \n"refresh" property must be an object with the following properties: { "rate", "limit" }(e.g. { "rate": 30, "limit": 10 }).\n      `);return new xl({name:e,ads:c,metrics:r,refresh:o})}static transformFromOverrides(e,t){if(!t.ads)throw new Error(`Must specify "ads" property for page "${e}" in overrides config.`);const n=Object.entries(t.ads).map((([e,t])=>Tl.transformFromOverrides(e,t)));return new Il({name:e,adOverrides:n})}};Ac(Rl,"PageTransformer");var jl=Rl;Ac(class{static transformFromJson(e){if(!e.rules)throw new Error('Must specify "rules" property in overrides config.');const t=Object.entries(e.rules).map((([e,t])=>cl.transformFromData(e,t)));if(!e.pages)throw new Error('Must specify "pages" property in overrides config.');const n=Object.entries(e.pages).map((([e,t])=>jl.transformFromOverrides(e,t)));return new il({rules:t,pages:n})}},"OverridesConfigTransformer");var Ml=class{constructor(e){this.pages=e.pages}};Ac(Ml,"PageSlotsConfig");var Ll=Ml;Ac(class{static transformFromJson(e){const{defaults:t,pages:n}=e;if(!t)throw new Error('Must specify "defaults" property in page slots config.');if(!Pl(t))throw new Error(`\n        Invalid "defaults" property ("${JSON.stringify(t)}") in page slots config.\n        \n"defaults" property must by an object with the following properties: metrics, refresh\n      `);if(!n)throw new Error('Must specify "pages" property in page slots config.');const i=Object.entries(n).map((([e,n])=>jl.transformFromData(e,n,t)));return new Ll({pages:i})}},"PageSlotsConfigTransformer");var Fl=class{constructor(e){this.plugins=e.plugins}};Ac(Fl,"PluginsConfig");var Nl=Fl,Bl=class{constructor(e){this.name=e.name,this.connector=e.connector,this.data=e.data}getJsonFormat(){return{[this.name]:{connector:this.connector,data:{...this.data}}}}};Ac(Bl,"Plugin");var Ul=Bl,zl=class{static transformFromData(e,t){const{connector:n,data:i}=t;if(!n)throw new Error(`Must specify "connector" property for plugin "${e}" in plugins config.`);if("string"!=typeof n)throw new Error(`Invalid "connector" property ("${JSON.stringify(n)}") supplied to plugin "${e}" in plugins config.`);if("object"!=typeof i)throw new Error(`\n        Invalid "data" property supplied to plugin "${e}" in plugins config.\n        \n"data" property must be an object containing plugin information (e.g. { ... data: { pluginData: 'testInfo' } })\n      `);if(0===Object.keys(i).length)throw new Error(`Must specify data for plugin "${e}". It cannot be an empty object.`);return new Ul({name:e,connector:n,data:i})}};Ac(zl,"PluginTransformer");var Vl=zl;Ac(class{static transformFromJson(e){if(!e.plugins)throw new Error('Must specify "plugins" property in plugins config.');const t=Object.entries(e.plugins).map((([e,t])=>Vl.transformFromData(e,t)));return new Nl({plugins:t})}},"PluginsConfigTransformer");var $l=class{constructor(e){this.name=e.name,this.metrics=e.metrics,this.refresh=e.refresh,this.ads=e.ads,e.plugins&&(this.plugins=e.plugins)}toJson(){const e={},t={};return this.ads.forEach((t=>{const n=t.getJsonFormat(),i=Object.keys(n)[0];e[i]=n[i]})),this.plugins&&this.plugins.forEach((e=>{const n=e.getJsonFormat(),i=Object.keys(n)[0];t[i]=n[i]})),JSON.stringify({metrics:this.metrics,plugins:t,ads:e},null,2)}};Ac($l,"ProductionConfig");var Hl=$l,Jl=class{constructor(e,t){this.name=t.name,this.placement=t.placement,this.sizes=e.sizes,e.breakpoints&&(this.breakpoints=e.breakpoints),t?.overrides?.breakpoints&&(this.breakpoints=t.overrides.breakpoints),e.metrics&&(this.metrics=e.metrics),t?.overrides?.metrics&&(this.metrics=t.overrides.metrics),e.providers&&(this.providers=e.providers),t?.overrides?.providers&&(this.providers=t.overrides.providers),e.dynamic&&(this.dynamic=e.dynamic),t?.overrides?.dynamic&&(this.dynamic=t.overrides.dynamic)}getJsonFormat(){return{[this.name]:{placement:this.placement,sizes:this.sizes,breakpoints:this.breakpoints,metrics:this.metrics,providers:this.providers,dynamic:this.dynamic}}}};Ac(Jl,"ProductionAdSlot");var ql=Jl,Wl=class{static transformFromData(e,t){const n=e.units.find((e=>e.name===t.unit));if(!n)throw new Error(`Ad unit "${t.unit}" is not defined in ad unit config.`);return new ql(n,t)}static transformFromJson(e,t){const{placement:n,sizes:i,providers:r,breakpoints:a,metrics:o,dynamic:s}=t;if(!i)throw new Error('Must specify "sizes" property in production config.');if(!jc(i))throw new Error(`\n        Invalid "sizes" property: ("${JSON.stringify(i)}") found in production config.\n        \n"sizes" property must be an array of arrays with dual paired, integer values which specify the width/height of an ad slot (e.g. [[200, 400], [100, 200]]), or the string 'fluid'\n      `);if(!r)throw new Error('Must specify "providers" property in production config.');if(!Ic(r))throw new Error(`\n        Invalid "providers" property ("${JSON.stringify(r)}") found in production config.\n        \n"providers" property must be an object of valid ad providers (e.g. { "provider1": { data: 0 } }).\n      `);if(!a)throw new Error('Must specify "breakpoints" property in production config.');if(!Bc(a))throw new Error(`\n        Invalid "breakpoints" property ("${JSON.stringify(a)}") found in production config.\n        \n"breakpoints" property must be an array of valid breakpoints (e.g. ["breakpoint1", "breakpoint2"]).\n      `);if(o&&!Wc(o))throw new Error(`\n        Invalid "metrics" property ("${JSON.stringify(o)}") found in production config.\n        \n"metrics" property must be an array of valid metrics (e.g. ["metric1", "metric2"]).\n      `);if(s&&"boolean"!=typeof s)throw new Error(`\n        Invalid "dynamic" property ("${JSON.stringify(s)}") found in production config.\n        \n"dynamic" property must be a boolean.\n      `);const c=new Zc({name:e,sizes:i,providers:r,breakpoints:a,metrics:o,dynamic:s});if(!n)throw new Error('"placement" property not found in production config!');if("string"!=typeof t.placement)throw new Error(`\n        Invalid "placement" property for ad "${e}" in production config!\n        \n"placement" property must be a string (e.g. "300BTF1").\n      `);const l=new ul({name:e,placement:n});return new ql(c,l)}};Ac(Wl,"ProductionAdSlotTransformer");var Gl=Wl,Ql=class{static transformFromEntities(e){const t=e.page.ads.map((t=>Gl.transformFromData(e.adUnitConfig,t))),n=e?.pluginsConfig?.plugins;return new Hl({name:e.page.name,metrics:e.page.metrics,refresh:e.page.refresh,ads:t,plugins:n})}static transformFromJson(e){const{metrics:t,refresh:n,ads:i,plugins:r}=e;if(!e.metrics)throw new Error('"metrics" property not found in production config!');if(!qc(t))throw new Error(`\n        Invalid "metrics" property ("${JSON.stringify(t)}") found in production config.\n        \n"metrics" property must be an array of valid metrics (e.g. ["metric1", "metric2"]).\n      `);if(!n)throw new Error('"refresh" property not found in production config!');if(!ll(n))throw new Error(`\n        Invalid "refresh" property ("${JSON.stringify(n)}") found in production config.\n        \n"refresh" property must be a number (e.g. 60).\n      `);if(!i)throw new Error('"ads" property not found in production config!');const a=Object.entries(i).map((([e,t])=>Gl.transformFromJson(e,t)));if(!r)throw new Error('"plugins" property not found in production config!');const o=Object.entries(r).map((([e,t])=>Vl.transformFromData(e,t)));return new Hl({name:"productionConfig",metrics:t,refresh:n,ads:a,plugins:o})}static transformFromOverrides(e,t,n){e.ads.forEach((e=>{const i=t.ads.find((t=>t.name===e.name));i&&(i.configurations&&i.configurations.forEach((t=>{t.rules.forEach((i=>{const{name:r}=t;if(n.get(r)||n.set(r,new Map),n.get(r)?.get(e.name))throw new Error(`\n                Configuration override "${r}" already has an entry for adSlot "${e.name}"!\n                \nplease check your overrides config to make sure you are not overriding your own overrides!!\n              `);n.get(r)?.set(e.name,i)}))})),i.tests&&i.tests.forEach((t=>{t.variants.forEach((i=>{const r=`${t.name}-${i.name}`;if(n.get(r)||n.set(r,new Map),n.get(r)?.get(e.name))throw new Error(`\n                AbTest override "${r}" already has an entry for adSlot "${e.name}"!\n                \nplease check your overrides config to make sure you are not overriding your own overrides!!\n              `);n.get(r)?.set(e.name,i)}))})))}))}};Ac(Ql,"ProductionConfigTransformer");var Kl,Yl,Xl=Ql;(Yl=Kl||(Kl={})).DynamicAdEvent="slickdeals:ads:dynamicAdEvent",Yl.ReplaceAdEvent="slickdeals:ads:replaceAdEvent",Yl.DestroyAdsEvent="slickdeals:ads:destroyAdsEvent",Yl.ReinitializeAdsEvent="slickdeals:ads:reinitializeAdsEvent",Yl.AdStackInitialized="slickdeals:ads:adStackInitialized",Yl.InitializeAdEvent="slickdeals:ads:initializeAdEvent",Yl.AdLoaderReadiness="slickdeals:ads:adLoaderReadiness",Yl.AdStackConfigurationData="slickdeals:ads:adStackConfigurationData",Yl.AdRefreshTimerStart="slickdeals:ads:adRefreshTimerStart",Yl.UserInitiateRefresh="slickdeals:ads:userInitiateRefresh";var Zl,ed=Ac((async(e,t,n=10,i=50)=>new Promise(((r,a)=>{e in t&&t[e]&&r(t[e]);let o=0;const s=setInterval((()=>{e in t&&t[e]?(clearInterval(s),r(t[e])):(o+=1,o>n&&(clearInterval(s),a(new td(e,o*n))))}),i)}))),"awaitProperty"),td=(Zl=class extends Error{constructor(e,t){super(`Failed while awaiting property '${e}' for ${t}ms`)}},Ac(Zl,"AwaitedPropertyTimeoutError"),Zl),nd=class e{static set(t,n){e.loadConfig(),void 0===Nt(e.config).get(t)?Nt(e.config).set(t,n):console.warn(`Attempted to modify an immutable config path: ${t}`)}static get(t){return e.loadConfig(),Nt(e.config).get(t)}static loadConfig(){void 0===e.config&&(e.config=globalThis.durangoConfiguration,void 0===e.config&&(e.config={},console.warn("Unable to load Configuration object from globalThis['durangoConfiguration']")))}static getConfig(){return e.loadConfig(),e.config}static reset(){e.config=void 0}};Ac(nd,"ConfigurationLoader");var id,rd,ad=nd,od=Ac((e=>{const t=ad.get("breakpoints"),n=Object.values(t).find((t=>e>=t.minimum&&e<t.maximum&&t));if(!n)throw new cd(e);return n}),"getBreakpoint"),sd=Ac((()=>{const e=document.body.offsetWidth;return od(e)}),"getCurrentBreakpoint"),cd=(id=class extends Error{constructor(e){super(`Unable to determine breakpoint for provided width: ${e}`)}},Ac(id,"UnmatchedBreakpointError"),id),ld=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};"BroadcastChannel"in globalThis||console.error("Unable to access the BroadcastChannel API");var dd,ud,pd=(Ac(rd=class{constructor(e){this.channelName=e,this.broadcastChannel=new window.BroadcastChannel(this.channelName)}postMessage(e){void 0===this.postingChannel&&(this.postingChannel=new window.BroadcastChannel(this.channelName)),this.postingChannel.postMessage(e)}addEventListener(e,t,n){this.broadcastChannel.addEventListener(e,t,n)}close(){this.broadcastChannel.close()}},"BroadcastChannel"),rd);pd=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),(dd=0,ud=bc("ChannelName"),function(e,t){ud(e,t,dd)}),ld("design:type",Function),ld("design:paramtypes",[String])],pd);var hd,fd={get:e=>window.dataLayer[e]},gd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},md=(Ac(hd=class{constructor(e){this.subject=e}notify(e){this.subject.next(e)}subscribe(e){return this.subject.subscribe(e)}static unsubscribe(e){e.unsubscribe()}getObservable(){return this.subject.asObservable()}},"Observable"),hd);md=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),function(e,t){return function(n,i){t(n,i,e)}}(0,(function(e,t,n){hc(e,t,n,new es("unmanaged",!0))})),gd("design:type",Function),gd("design:paramtypes",[void 0===oe?Object:oe])],md);var yd=class e{static debug(...t){return e.parser(console.debug,...t)}static error(...t){return e.parser(console.error,...t)}static log(...t){return e.parser(console.log,...t)}static warn(...t){return e.parser(console.warn,...t)}static parser(t,...n){if(e.isEnabled)return t(...n)}static setIsEnabled(t){e.isEnabled=t}};Ac(yd,"Logger"),_c(yd,"isEnabled",!1);var vd,bd,wd,Sd,Ad,_d,Ed,Cd,kd,Td=yd,Pd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Dd=(Ac(vd=class extends md{constructor(){super(new le)}},"ReplayObservable"),vd);Dd=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),Pd("design:type",Function),Pd("design:paramtypes",[])],Dd);var xd=class{constructor(e,t){kc(this,bd,void 0),kc(this,wd,void 0),kc(this,Sd,void 0),kc(this,Ad,void 0),kc(this,_d,void 0),kc(this,Ed,void 0),kc(this,Cd,void 0),kc(this,kd,void 0),Tc(this,Cd,t),Tc(this,kd,e),Tc(this,_d,!1),Tc(this,Ed,!1),this.start()}start(){Cc(this,bd)&&window.clearInterval(Cc(this,bd)),Cc(this,_d)&&Tc(this,_d,!1),Cc(this,Ed)&&Tc(this,Ed,!1),Tc(this,Ad,Cc(this,Cd)),Tc(this,Sd,Cc(this,Cd)),Tc(this,wd,Date.now()),Tc(this,bd,window.setInterval((()=>{Cc(this,kd).call(this),Tc(this,wd,Date.now())}),Cc(this,Ad)))}pause(){Cc(this,_d)||Cc(this,Ed)||(Tc(this,_d,!0),Tc(this,Sd,Cc(this,Ad)-(Date.now()-Cc(this,wd))),window.clearInterval(Cc(this,bd)))}resume(){Cc(this,Sd)&&!Cc(this,Ed)&&(Cc(this,_d)&&Tc(this,_d,!1),Tc(this,Ad,Cc(this,Sd)),Tc(this,wd,Date.now()),Tc(this,bd,window.setTimeout((()=>{Cc(this,kd).call(this),Tc(this,wd,Date.now()),Tc(this,Ad,Cc(this,Cd)),Tc(this,bd,window.setInterval((()=>{Cc(this,kd).call(this),Tc(this,wd,Date.now())}),Cc(this,Ad)))}),Cc(this,Ad))))}reset(e){if(!Cc(this,bd))return;Cc(this,_d)&&Tc(this,_d,!1),window.clearInterval(Cc(this,bd));const t=Cc(this,Ad)-(Date.now()-Cc(this,wd));Tc(this,Ad,e>t?e:t),Tc(this,wd,Date.now()),Tc(this,bd,window.setTimeout((()=>{Cc(this,kd).call(this),Tc(this,wd,Date.now()),Tc(this,Ad,Cc(this,Cd)),Tc(this,bd,window.setInterval((()=>{Cc(this,kd).call(this),Tc(this,wd,Date.now())}),Cc(this,Ad)))}),Cc(this,Ad)))}stop(){Cc(this,bd)&&(window.clearInterval(Cc(this,bd)),Tc(this,Ed,!0))}getRemainingTime(){return Cc(this,Ad)-(Date.now()-Cc(this,wd))}};bd=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,_d=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,kd=new WeakMap,Ac(xd,"IntervalTimer");var Od=xd,Id=new pc((e=>{e("BroadcastChannel").to(pd),e("ReplayObservable").to(Dd),e("ReplaySubject<AdPlatformEvent>").to(le)})),Rd=Ac((e=>"string"==typeof e&&Object.values(Uc).includes(e)),"isEventType"),jd=Ac((e=>"object"==typeof e&&"adUnitId"in e),"isAdEventObject"),Md=class e{static create(t,n,i){let r,a={},o="";const s=sd();if(void 0!==i&&(e.isAdEventType(t)?a=e.transformToAdEventData(i):e.isPageEventType(t)&&(a=e.transformToPageEventData(i))),Gc([t])?o=Uc.RefreshBiddingStarted:Qc([t])?o=Uc.DynamicBiddingStarted:Kc([t])&&(o=Uc.ReinitializeBiddingStarted),o){r=performance.measure("fetchAdDuration",o).duration}else r=performance.now();return{event:t,timestamp:Date.now(),platform:"modern",eventRuntime:r,breakpoint:s.name,pageName:n,...a}}static isPageEventType(e){return Vc.includes(e)}static isAdEventType(e){return zc.includes(e)}static transformToAdEventData(e){let t="";e.adUnitId&&"string"==typeof e.adUnitId&&(t=e.adUnitId);const n={adUnitId:t};return e.provider&&(n.provider=e.provider),e.adPath&&(n.adPath=e.adPath),n}static transformToPageEventData(e){const t={};return e.numberOfAds&&(t.numberOfAds=e.numberOfAds),t}};Ac(Md,"AdEvent");var Ld,Fd=Md,Nd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Bd=function(e,t){return function(n,i){t(n,i,e)}},Ud=(Ac(Ld=class{constructor(e,t){this.observable=e,this.channel=t,this.channel.addEventListener("message",(e=>{this.observable.notify(e.data)}))}registerPageName(e){this.pageName=e}async fire(e,t){const n=Fd.create(e,this.pageName,t);this.channel.postMessage(n)}subscribe(e,t){let n,i;return Rd(e)?(n=e,i=t):i=e,he((()=>void 0===n),this.observable.getObservable(),this.observable.getObservable().pipe(fe((e=>e.event===n)))).subscribe(i)}},"AdEventManager"),Ld);Ud=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),Bd(0,bc("ReplayObservable")),Bd(1,bc("BroadcastChannel")),Nd("design:type",Function),Nd("design:paramtypes",[void 0===Dd?Object:Dd,void 0===pd?Object:pd])],Ud);var zd,Vd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$d=Ac((e=>"object"==typeof e&&"endpoints"in e),"isConfigurationOptions"),Hd=(Ac(zd=class{constructor(e){this.eventManager=e,this.endpoints=new Set;const t=ad.get("adBlockEndpoints");$d(t)&&(t.endpoints.forEach((e=>{this.endpoints.add(e)})),this.detectAdblock())}async detectAdblock(){await this.isAdBlocked()&&await this.eventManager.fire(Uc.AdblockDetected)}async isAdBlocked(){let e=!1;for(const t of this.endpoints.values()){if(e)break;try{await fetch(t,{method:"HEAD",mode:"no-cors"}),e=!1}catch(t){e=!0}}return e}},"AdblockDetect"),zd);Hd=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),function(e,t){return function(n,i){t(n,i,e)}}(0,bc("AdEventManager")),Vd("design:type",Function),Vd("design:paramtypes",[void 0===Ud?Object:Ud])],Hd);var Jd,qd=(Ac(Jd=class{static loadConfig(){if(this.config)return this.config;const e=document.getElementById("productionConfig");if(!e)throw new Error("config not loaded, script tag not found!");const t=Xl.transformFromJson(JSON.parse(e.textContent));return this.config=t,t}},"AdConfigurationLoader"),Jd);qd=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc()],qd);var Wd,Gd,Qd,Kd,Yd,Xd=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};(Gd=Wd||(Wd={})).Providers="providers",Gd.Plugins="plugins",Gd.Features="features",(Kd=Qd||(Qd={})).Refresh="refresh",Kd.Sticky="sticky",Kd.Events="events";var Zd=(Ac(Yd=class{constructor(){_c(this,"providers",new Map),_c(this,"plugins",new Map),_c(this,"features",new Map),Object.values(Qd).forEach((e=>{this.features.set(e,!0)}))}init(){const e=document.getElementById("featureFlags");if(void 0!==e){const t=JSON.parse(e.textContent);Yd.initFeature(Wd.Providers,this.providers,t),Yd.initFeature(Wd.Plugins,this.plugins,t),Yd.initFeature(Wd.Features,this.features,t)}}static initFeature(e,t,n){e in n&&Object.entries(n[e]).forEach((([e,n])=>{t.set(e,n)}))}getEnabledProviders(){return Yd.getEnabledFlags(this.providers)}getEnabledPlugins(){return Yd.getEnabledFlags(this.plugins)}getEnabledFeatures(){return Yd.getEnabledFlags(this.features)}static getEnabledFlags(e){const t=[];return e.forEach(((e,n)=>{e&&t.push(n)})),t}isProviderEnabled(e){return!!this.providers.has(e)&&this.providers.get(e)}isPluginEnabled(e){return!!this.plugins.has(e)&&this.plugins.get(e)}isFeatureEnabled(e){return!this.features.has(e)||this.features.get(e)}},"FeatureFlagLoader"),Yd);Zd=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),Xd("design:type",Function),Xd("design:paramtypes",[])],Zd);var eu,tu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},nu=(Ac(eu=class{constructor(e){this.eventManager=e,this.adUnits=new Map}init(e){this.loadAdUnits(e.ads)}getAdUnits(){return this.adUnits}registerAd(e,t){this.adUnits.has(e.name)||t&&t instanceof HTMLElement&&this.adUnits.set(e.name,t)}replaceAd(e,t){this.adUnits.has(e.name)&&t&&t instanceof HTMLElement&&this.adUnits.set(e.name,t)}clearAds(){this.adUnits.clear()}loadAdUnits(e){e.forEach((e=>{if(e.dynamic)return;const t=document.getElementById(e.name);t&&t instanceof HTMLElement&&this.adUnits.set(e.name,t)}))}},"AdUnitManager"),eu);nu=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),function(e,t){return function(n,i){t(n,i,e)}}(0,bc("AdEventManager")),tu("design:type",Function),tu("design:paramtypes",[void 0===Ud?Object:Ud])],nu);var iu,ru=Ac((e=>void 0!==e.init),"hasInit"),au=Ac((e=>void 0!==e.start),"hasStart"),ou=Ac((e=>void 0!==e.stop),"hasStop"),su=Ac((e=>void 0!==e.destroy),"hasDestroy"),cu=Ac((e=>void 0!==e&&(ru(e)&&au(e))),"isPluginAdapter"),lu=Ac((e=>!!cu(e)&&(ou(e)&&su(e))),"isDestroyablePlugin"),du=(Ac(iu=class{constructor(){_c(this,"pluginAdapters",new Map)}init(e,t){t.forEach((t=>{const n=Uu.get(t);cu(n)&&(n.init(e),this.pluginAdapters.set(t,n))}))}start(){this.pluginAdapters.forEach((e=>{cu(e)&&e.start()}))}stop(e){e.forEach((e=>{const t=this.pluginAdapters.get(e);lu(t)&&t.stop()}))}destroy(e){e?e.forEach((e=>{const t=this.pluginAdapters.get(e);lu(t)&&(t.destroy(),this.pluginAdapters.delete(e))})):this.pluginAdapters.forEach(((e,t)=>{lu(e)&&(e.destroy(),this.pluginAdapters.delete(t))}))}},"PluginManager"),iu);du=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc()],du);var uu,pu=Ac((e=>void 0!==e.init),"hasInit"),hu=Ac((e=>void 0!==e.initAdUnit),"hasInitAdUnit"),fu=Ac((e=>void 0!==e.start),"hasStart"),gu=Ac((e=>void 0!==e.unload),"hasUnload"),mu=Ac((e=>void 0!==e.destroy),"hasDestroy"),yu=Ac((e=>!!e&&(pu(e)&&hu(e)&&fu(e)&&gu(e)&&mu(e))),"isProviderAdapter"),vu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},bu=(Ac(uu=class{constructor(e){this.eventManager=e,this.adSlots=new Map,this.providerAdapters=new Map}async init(e,t){e.ads.forEach((e=>{const t=sd().name,n=e.breakpoints;e.dynamic||(n.includes(t)||"tablet"===t&&n.includes("desktop"))&&this.adSlots.set(e.name,e)}));const n=t.map((async e=>{const t=Uu.get(e);if(!yu(t))return;await t.init()&&this.providerAdapters.set(e,t)}));await Promise.all(n),this.initAdUnits(this.adSlots)}initAdUnits(e){e.forEach((e=>{Object.entries(e.providers).forEach((([t,n])=>{const i=this.providerAdapters.get(t);i&&i.initAdUnit(e,n)}))}))}registerAd(e){this.adSlots.get(e.name)||(this.adSlots.set(e.name,e),Object.entries(e.providers).forEach((([t,n])=>{const i=this.providerAdapters.get(t);i&&(i.initAdUnit(e,n),i.start(e.name))})))}replaceAd(e){this.adSlots.get(e.name)&&(this.adSlots.set(e.name,e),Object.entries(e.providers).forEach((([t,n])=>{const i=this.providerAdapters.get(t);i&&(i.initAdUnit(e,n),i.start(e.name))})))}clearAds(){this.adSlots.clear()}start(e){Array.from(e.keys()).forEach((e=>{const t=this.adSlots.get(e);t&&Object.keys(t.providers).forEach((t=>{const n=this.providerAdapters.get(t);n&&n.start(e)}))}))}refresh(e){const t=this.adSlots.get(e);t&&Object.keys(t.providers).forEach((t=>{const n=this.providerAdapters.get(t);n&&n.start(e,!0)}))}refreshAllAds(){this.adSlots.forEach((e=>{Object.keys(e.providers).forEach((t=>{const n=this.providerAdapters.get(t);n&&n.start(e.name,!0)}))}))}unload(e){const t=this.adSlots.get(e);t&&Object.keys(t.providers).forEach((t=>{const n=this.providerAdapters.get(t);n&&n.unload(e)}))}destroy(e){const t=this.adSlots.get(e);t&&Object.keys(t.providers).forEach((t=>{const n=this.providerAdapters.get(t);n&&n.destroy(e)}))}},"ProviderManager"),uu);bu=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),function(e,t){return function(n,i){t(n,i,e)}}(0,bc("AdEventManager")),vu("design:type",Function),vu("design:paramtypes",[void 0===Ud?Object:Ud])],bu);var wu,Su,Au,_u,Eu,Cu=Ac((()=>(void 0===window.isAdDebugEnabled&&(window.isAdDebugEnabled=!!window.location?.host?.endsWith(".dev")),window.isAdDebugEnabled)),"isAdDebugSwitchEnabled"),ku=Ac(((e,...t)=>{Td.setIsEnabled(Cu()),Td.debug(`Ad Stack debug: ${e}`,...t)}),"printDebug"),Tu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pu=function(e,t){return function(n,i){t(n,i,e)}};(Su=wu||(wu={}))[Su.HalfVisible=.5]="HalfVisible",Su[Su.NonVisible=0]="NonVisible",(_u=Au||(Au={})).Control="control",_u.Mobile="mobile",_u.Test="test";var Du=(Ac(Eu=class{constructor(e,t,n){this.adUnitManager=e,this.providerManager=t,this.eventManager=n,this.adTimers=new Map,this.visibleAds=new Set,this.viewableAds=new Set,this.scrolledPastAds=new Set,this.refreshStrategy="",this.refreshQueued=!1}init(e){this.currentBreakpoint=sd().name,this.registerAdUnits(e.ads),this.adRefreshTimer=e.refresh.rate,this.adRefreshLimit=e.refresh.limit,this.currentRefreshes=0,this.globalRefreshCooldown=10,this.configureRefreshStrategy(this.refreshStrategy)}setRefreshStrategy(e){this.refreshStrategy=e}configureRefreshStrategy(e){this.registerObservers(),"mobile"!==this.currentBreakpoint&&e!==Au.Mobile&&document.addEventListener(Kl.AdRefreshTimerStart,(()=>{this.refreshInterval=new Od(this.handleRefreshInterval.bind(this),1e3*this.adRefreshTimer)}),{once:!0}),Au.Test!==e&&Au.Mobile!==e||document.addEventListener(Kl.UserInitiateRefresh,(()=>this.userInitiateRefresh()))}registerAd(e,t){this.refreshStrategy&&(this.adUnits.has(e.name)||this.adUnits.set(e.name,t),this.adTimers.has(e.name)||this.adTimers.set(e.name,{refreshes:0,lastRefresh:Date.now()}),this.observer.observe(t))}replaceAd(e,t){this.refreshStrategy&&this.adUnits.has(e.name)&&(this.adUnits.set(e.name,t),this.observer.observe(t))}clearAds(){this.observer?.disconnect(),this.adUnits.clear(),this.adTimers.clear(),this.visibleAds.clear(),this.currentRefreshes=0,this.clearAdTimer()}clearAdTimer(){this.refreshInterval&&this.refreshInterval.stop()}reinitializeAdTimer(){this.refreshInterval&&this.refreshInterval.start()}registerAdUnits(e){this.adUnits=new Map(this.adUnitManager.getAdUnits());const t=Date.now();e.forEach((e=>{this.adTimers.set(e.name,{refreshes:0,lastRefresh:t})}))}registerObservers(){const e={root:null,rootMargin:"0px",threshold:[wu.NonVisible,wu.HalfVisible]};this.observer=new IntersectionObserver(this.adIntersectionCallback.bind(this),e),this.adUnits.forEach((e=>{this.observer.observe(e)}))}refreshAd(e){const t=this.adTimers.get(e);if(t){const e=Date.now();if(e-t.lastRefresh<1e3*this.globalRefreshCooldown)return!1;t.lastRefresh=e,t.refreshes+=1}return this.refreshStrategy===Au.Mobile?performance.mark(Uc.DynamicBiddingStarted):performance.mark(Uc.RefreshBiddingStarted),this.providerManager.refresh(e),!0}handleRefreshInterval(){"hidden"!==document.visibilityState&&(ku("handleRefreshInterval",{currentRefreshes:this.currentRefreshes}),this.visibleAds.forEach((e=>{this.refreshAd(e)})),this.currentRefreshes+=1,this.currentRefreshes>=this.adRefreshLimit&&this.refreshInterval.stop())}userInitiateRefresh(){if(ku("userInitiateRefresh request received..."),this.refreshInterval?.getRemainingTime()>1e3*(this.adRefreshTimer-this.globalRefreshCooldown)){const e=Math.round(this.adRefreshTimer-this.refreshInterval.getRemainingTime()/1e3);return void ku(`Refresh occurred ${e} seconds ago. Skip!`)}if(this.refreshQueued)return void ku("The ads are already scheduled to refresh in ~ 2 seconds. Skip!");this.refreshQueued=!0;const e=this.refreshStrategy===Au.Mobile?10:2e3;ku(`Scheduled new refresh in ${e/1e3} seconds.`),window.setTimeout((()=>{this.viewableAds.forEach((e=>{if(this.refreshStrategy===Au.Mobile){if(!this.scrolledPastAds.has(e))return;this.refreshAd(e)&&this.scrolledPastAds.delete(e)}else this.refreshAd(e)})),this.refreshQueued=!1,ku("The ads are now refreshing...")}),e),this.refreshInterval?.reset(1e3*this.adRefreshTimer)}adIntersectionCallback(e){e.forEach((e=>{const t=e.target,n=t.dataset.adContainerId||t.id||"";this.adTimers.get(n)&&(e.isIntersecting?(this.visibleAds.add(n),e.intersectionRatio>=wu.HalfVisible&&this.viewableAds.add(n),e.intersectionRatio<=wu.HalfVisible&&this.viewableAds.delete(n)):(this.visibleAds.has(n)&&e.boundingClientRect.y<0&&this.refreshStrategy===Au.Mobile&&this.scrolledPastAds.add(n),this.visibleAds.delete(n),this.viewableAds.delete(n)))}))}resetRefreshTimer(e){this.refreshInterval&&this.refreshInterval.reset(e)}},"AdRefreshManager"),Eu);Du=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),Pu(0,bc("AdUnitManager")),Pu(1,bc("ProviderManager")),Pu(2,bc("AdEventManager")),Tu("design:type",Function),Tu("design:paramtypes",[void 0===nu?Object:nu,void 0===bu?Object:bu,void 0===Ud?Object:Ud])],Du);var xu,Ou=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Iu=function(e,t){return function(n,i){t(n,i,e)}},Ru=(Ac(xu=class{constructor(e,t,n,i,r,a,o){this.adUnitManager=e,this.providerManager=t,this.pluginManager=n,this.eventManager=i,this.featureFlags=r,this.adblockDetect=a,this.adRefreshManager=o;try{this.loadAdConfig()}catch(e){return void console.warn(e.message)}this.eventManager.fire(Uc.ProcessingStarted),this.featureFlags.init(),this.adUnitManager.init(this.config)}init(){this.providerManager.init(this.config,this.featureFlags.getEnabledProviders()).then((()=>{this.initAdUnits()})),this.adRefreshManager.init(this.config),this.pluginManager.init(this.config,this.featureFlags.getEnabledPlugins()),this.initDynamicAdListener(),this.initAdReplacementListener(),this.initAdDestructionListener(),this.initAdReinitializationListener();const e=new Event(Kl.AdStackInitialized);document.dispatchEvent(e)}loadAdConfig(){this.config=qd.loadConfig()}initAdUnits(){const e=this.adUnitManager.getAdUnits();this.providerManager.start(e),this.pluginManager.start()}initDynamicAdListener(){document.addEventListener(Kl.DynamicAdEvent,(e=>{const t=e.detail,n=e.target,i=t?.config?t.config:this.config.ads.find((e=>e.name===t.id));i&&(this.adUnitManager.registerAd(i,n),this.providerManager.registerAd(i),this.adRefreshManager.registerAd(i,n))}))}initAdReplacementListener(){document.addEventListener(Kl.ReplaceAdEvent,(e=>{const t=e.detail,n=e.target,i=t.config;i&&(this.adUnitManager.replaceAd(i,n),this.providerManager.replaceAd(i),this.adRefreshManager.replaceAd(i,n))}))}initAdDestructionListener(){document.addEventListener(Kl.DestroyAdsEvent,(()=>{this.adUnitManager.clearAds(),this.providerManager.clearAds(),this.adRefreshManager.clearAds()}))}initAdReinitializationListener(){document.addEventListener(Kl.ReinitializeAdsEvent,(e=>{const t=this.adUnitManager.getAdUnits();if(this.adRefreshManager.reinitializeAdTimer(),t.size>0)return;const n=e.detail;n.ads&&n.ads.forEach((e=>{const t=document.getElementById(e.id),n=e.config;t&&n&&(this.adUnitManager.registerAd(n,t),this.providerManager.registerAd(n),this.adRefreshManager.registerAd(n,t))}))}))}},"AdController"),xu);Ru=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),Iu(0,bc("AdUnitManager")),Iu(1,bc("ProviderManager")),Iu(2,bc("PluginManager")),Iu(3,bc("AdEventManager")),Iu(4,bc("FeatureFlagLoader")),Iu(5,bc("AdblockDetect")),Iu(6,bc("AdRefreshManager")),Ou("design:type",Function),Ou("design:paramtypes",[void 0===nu?Object:nu,void 0===bu?Object:bu,void 0===du?Object:du,void 0===Ud?Object:Ud,void 0===Zd?Object:Zd,void 0===Hd?Object:Hd,void 0===Du?Object:Du])],Ru);var ju,Mu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Lu=Ac((e=>"object"==typeof e&&"maxRequestsPerBatch"in e&&"batchFireTimeout"in e&&"endpointUrl"in e),"isConfigurationOptions"),Fu=(Ac(ju=class{constructor(e){this.eventManager=e,this.batchRequestQueue=[],this.startedPageEvents=new Map,this.startedAdEvents=new Map}init(e){const t=ad.get("metricsReporter");Lu(t)&&(this.options=t,this.csrfToken=e,this.subscriber=this.start())}modifyRequestHeaders(e){this.modifyHeadersCallback=e}onEvent(e){clearTimeout(this.batchRequestTimer),this.batchRequestQueue.push(e),this.batchRequestQueue.length!==this.options.maxRequestsPerBatch?this.batchRequestTimer=setTimeout((()=>{this.report(this.batchRequestQueue)}),this.options.batchFireTimeout):this.report(this.batchRequestQueue)}async report(e){if(!this.csrfToken)return;const t=new Headers({"Content-Type":"application/json","Csrf-Token":this.csrfToken}),n=await fetch(this.options.endpointUrl,{method:"POST",headers:"function"==typeof this.modifyHeadersCallback?this.modifyHeadersCallback(t):t,body:JSON.stringify(e)});if(200!==n.status)return;this.batchRequestQueue=[];const i=await n.json();this.csrfToken=i.token}stop(){this.subscriber&&(md.unsubscribe(this.subscriber),this.subscriber=null)}start(){return this.subscriber?this.subscriber:this.eventManager.subscribe(this.onEvent.bind(this))}handleStartedEvents(e){Fd.isPageEventType(e.event)?this.startedPageEvents.set(e.event,e.timestamp):jd(e)&&(this.startedAdEvents.get(e.event)?this.startedAdEvents.get(e.event)?.set(e.event,e.timestamp):this.startedAdEvents.set(e.adUnitId,new Map([[e.event,e.timestamp]])))}},"MetricsReporter"),ju);Fu=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),function(e,t){return function(n,i){t(n,i,e)}}(0,bc("AdEventManager")),Mu("design:type",Function),Mu("design:paramtypes",[void 0===Ud?Object:Ud])],Fu);var Nu=new pc((e=>{e("AdblockDetect").to(Hd).inSingletonScope(),e("AdConfigurationLoader").to(qd).inSingletonScope(),e("AdController").to(Ru).inSingletonScope(),e("AdEventManager").to(Ud).inSingletonScope(),e("AdRefreshManager").to(Du).inSingletonScope(),e("AdUnitManager").to(nu).inSingletonScope(),e("ChannelName").toConstantValue("durango.adPlatform"),e("FeatureFlagLoader").to(Zd).inSingletonScope(),e("MetricsReporter").to(Fu).inSingletonScope(),e("PluginManager").to(du).inSingletonScope(),e("ProviderManager").to(bu).inSingletonScope()})),Bu=new uc;Bu.load(Id),Bu.load(Nu);var Uu=Bu,zu=class e{constructor(){_c(this,"refreshTargetingCount",1)}async init(e,t,n){return!!await this.awaitGlobals()&&(this.setGeneralTargeting(e,t,n),!0)}setGeneralTargeting(e,t,n){if(t&&this.setTargeting("env",t),n){const e=JSON.parse(n).targeting;Object.entries(e).forEach((([t,n])=>{e.forEach((()=>{this.setTargeting(n[0],n[1])}))}))}}clearAd(){this.googleTag.pubads().clear()}defineSlot(e,t,n){const i=this.googleTag.defineSlot(e,t,n);return null!==i&&(i.setTargeting("refresh",this.refreshTargetingCount),i.addService(this.googleTag.pubads())),i}destroySlots(){this.googleTag.destroySlots()}enableServices(){e.servicesEnabled||(this.googleTag.enableServices(),e.servicesEnabled=!0)}enableSingleRequest(){this.googleTag.pubads().enableSingleRequest()}pushCommand(e){this.googleTag.cmd.push(e)}refreshAds(e){this.googleTag.pubads().refresh(e)}setPrivacySettings(e){this.googleTag.pubads().setPrivacySettings(e)}displayAd(e){this.googleTag.display(e)}disableInitialLoad(){this.googleTag.pubads().disableInitialLoad()}enableLazyLoad(e={fetchMarginPercent:100,renderMarginPercent:50,mobileScaling:2}){ku("enableLazyLoad",e),this.googleTag.pubads().enableLazyLoad(e)}setTargeting(e,t){this.googleTag.pubads().setTargeting(e,t)}addEventListener(e,t){this.googleTag.pubads().addEventListener(e,t)}removeEventListener(e,t){this.googleTag.pubads().removeEventListener(e,t)}setPublisherProvidedId(e){this.googleTag.pubads().setPublisherProvidedId(e)}async awaitGlobals(){if(!this.googleTag)try{await ed("googletag",window,80),await ed("defineSlot",window.googletag,80),this.googleTag=window.googletag}catch(e){return Td.error("Unable to initialize window.googletag",e),!1}return!0}};Ac(zu,"GooglePublisherTag"),_c(zu,"servicesEnabled",!1);var Vu,$u=zu,Hu=(Ac(Vu=class{constructor(){_c(this,"iFrameName","__uspapiLocator")}init(e){window.__uspapi=this.getUspApi()}start(){this.ensureIFrame(),window.addEventListener("message",this.handleUspApiMessage,!1)}static checkForOptOutPreference(){return-1!==document.cookie.indexOf("opt_out_pixel")||!0===navigator.globalPrivacyControl}static debugInfoConsole(e,...t){-1!==window.location.search.indexOf("debugUSPAPI")&&console.info.apply(window,["__uspapi: ",e].concat(t))}static getUSPData(e,t){if(Vu.debugInfoConsole("getUSPData version and callback: ",e,t),null!==e&&e!==Vu.API_VERSION)return void t(null,!1);const n={version:Vu.API_VERSION,uspString:Vu.checkForOptOutPreference()?Vu.OPTED_OUT:Vu.getUSPNormalString()};Vu.debugInfoConsole(Vu.checkForOptOutPreference()?"opted out":"opted in",n),t(n,!0)}static getUSPNormalString(){return fd.get("visitor").isCaliforniaIP?[Vu.API_VERSION,"YN-"].join(""):Vu.NORMAL}ensureIFrame(){if(!window.frames[this.iFrameName])if(document.body){const e=document.createElement("iframe");e.style.cssText="display: none",e.name=this.iFrameName,document.body.appendChild(e)}else setTimeout(this.ensureIFrame,5)}getUspApi(){if(window.__uspapi)try{if(window.__uspapi("__uspapi"))return window.__uspapi}catch(e){return window.__uspapi}return this.uspapi}handleUspApiMessage(e){const t=e&&e.data&&e.data.__uspapiCall;t&&window.__uspapi(t.command,t.version,((n,i)=>{const r={__uspapiReturn:{returnValue:n,success:i,callId:t.callId}};Vu.debugInfoConsole("Posting message: ",r),null!==e.source&&(e.source instanceof MessagePort||e.source instanceof ServiceWorker||e.source.postMessage(r,"*"))}))}uspapi(e,...t){Vu.debugInfoConsole("__uspapi call: ",e),Vu.debugInfoConsole("__uspapi args: ",t);try{if("getUSPData"===e)return Vu.getUSPData.apply(null,t),{getUSPData:Vu.getUSPData,__uspapi:()=>!0}}catch(e){console.error("__uspapi: invalid command:",e)}return{__uspapi:()=>!1}}},"CcpaPluginAdapter"),_c(Vu,"API_VERSION",1),_c(Vu,"OPTED_OUT",[Vu.API_VERSION,"YY-"].join("")),_c(Vu,"NORMAL",[Vu.API_VERSION,"---"].join("")),Vu);Hu=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc()],Hu);var Ju,qu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Wu=function(e,t){return function(n,i){t(n,i,e)}},Gu="gptCommonProvider",Qu=(Ac(Ju=class{constructor(e,t){this.eventManager=e,this.adUnitManager=t,this.PARALLEL_TIMEOUT=2e3,this.adUnitSlots=new Map,this.biddingDetails=new Map,this.adsDestroyed=!1,this.refreshTargetingCount=2,this.slotLevelTargeting=new Map,this.adUnitSlotsSize=0,this.googlePublisherTag=new $u,this.adUnits=this.adUnitManager.getAdUnits()}async init(e,t,n){if(!await this.googlePublisherTag.init(e,t,n))return!1;this.initialAdUnitPopulatedCallback("slotRenderEnded"),document.addEventListener("initialSlotRenderEnded",this.adUnitPopulatedCallback.bind(this,"slotRenderEnded")),document.addEventListener(Kl.DestroyAdsEvent,(()=>{this.adsDestroyed=!0,this.resetAds()}));const i=fd.get("visitor");return Hu.checkForOptOutPreference()||(0===i.userId?this.googlePublisherTag.setPublisherProvidedId(this.getAuuidCookie()):i.emailHashes?.[1]&&this.googlePublisherTag.setPublisherProvidedId(i.emailHashes[1])),this.googlePublisherTag.pushCommand((()=>{this.googlePublisherTag.disableInitialLoad(),this.googlePublisherTag.setPrivacySettings({restrictDataProcessing:Hu.checkForOptOutPreference()})})),this.googlePublisherTag.addEventListener("impressionViewable",(e=>{this.eventManager.fire(Uc.AdUnitViewable,{adUnitId:e.slot.getSlotElementId()})})),!0}initAdUnit(e){const t=this.adUnits.get(e.name),n=this.adUnitSlots.get(e.name);if(this.adUnitSlotsSize>this.adUnitSlots.size&&(this.adUnitSlotsSize=0),this.addPositionToAdSlots(),t&&!n){const t=this.googlePublisherTag.defineSlot(e.placement,e.sizes,e.name);this.adUnitSlots.set(e.name,{name:e.name,placement:e.placement,slot:t,providers:[],dynamic:e.dynamic}),this.addPositionToAdSlots()}}setAdUnitProvider(e,t){const n=this.adUnitSlots.get(e.name);n&&t&&!n.providers.includes(t)&&n.providers.push(t)}startBiddingProcess(e,t,n){const i=this.adUnitSlots.get(e);if(i)if(t){if(!this.biddingDetails.has(e)){const n=new Map;i.providers.forEach((e=>n.set(e,!1))),this.biddingDetails.set(e,{providers:n,timeoutId:window.setTimeout((()=>{ku("refreshing ads: timeout occurred; fetching ads..."),this.fetchAds(t,i)}),this.PARALLEL_TIMEOUT)})}n()}else Ju.requestBidsQueue.push(n),2===Ju.requestBidsQueue.length&&(ku("initial ads: dequeue all providers"),this.dequeue(i),Ju.initialAdsTimeoutId=window.setTimeout((()=>{ku("initial ads: timeout occurred; fetching ads..."),this.fetchAds(t)}),this.PARALLEL_TIMEOUT))}bidsCompleteHandler(e,t,n){if(!n)return;const i=this.adUnitSlots.get(n);if(i){if(e){if(!this.biddingDetails.has(n))return;const r=this.biddingDetails.get(n);if(!r)return;return r.providers.set(t,!0),void(Array.from(r.providers.values()).includes(!1)?this.biddingDetails.set(n,r):(window.clearTimeout(r.timeoutId),this.fetchAds(e,i),this.biddingDetails.delete(n)))}Ju.prebidBidsReceived&&Ju.amazonBidsReceived&&(window.clearTimeout(Ju.initialAdsTimeoutId),i.dynamic?this.fetchAds(!0,i):this.fetchAds(e))}}dequeue(e){e.dynamic?performance.mark(Uc.DynamicBiddingStarted):this.adsDestroyed?performance.mark(Uc.ReinitializeBiddingStarted):this.eventManager.fire(Uc.BiddingStarted),Ju.requestBidsQueue.forEach((e=>e()))}fetchAds(e,t){let n=null;e&&!t?.dynamic&&"mobile"!==window.adRefreshStrategy?n=Uc.RefreshBiddingCompleted:(t?.dynamic||e&&"mobile"===window.adRefreshStrategy)&&(n=Uc.DynamicBiddingCompleted),ku("fetchAds",{slotName:t?.name,eventName:n,refresh:e,gptAdSlot:t}),n&&t?this.eventManager.fire(n,{adUnitId:t.name}):this.adsDestroyed?this.eventManager.fire(Uc.ReinitializeBiddingCompleted):this.eventManager.fire(Uc.BiddingCompleted),this.addPositionToAdSlots(),this.googlePublisherTag.pushCommand((()=>{if(e&&t){if(this.slotLevelTargeting.has(t.name)){let e=this.slotLevelTargeting.get(t.name).refresh;this.slotLevelTargeting.set(t.name,{refresh:++e}),t.slot.setTargeting("refresh",e)}else this.slotLevelTargeting.set(t.name,{refresh:this.refreshTargetingCount}),t.slot.setTargeting("refresh",this.refreshTargetingCount);ku(`refresh setTargeting for ${t.name}`,this.slotLevelTargeting.get(t.name)),this.googlePublisherTag.refreshAds([t.slot])}else this.googlePublisherTag.enableSingleRequest(),window.b2b868LazyLoadPercent?this.googlePublisherTag.enableLazyLoad({fetchMarginPercent:100,renderMarginPercent:window.b2b868LazyLoadPercent,mobileScaling:2}):ku("lazyLoad disabled"),googletag.pubads().addEventListener("slotRequested",(e=>{ku(`fetched ${e.slot.getSlotElementId()}`)})),googletag.pubads().addEventListener("slotOnload",(e=>{ku(`rendered ${e.slot.getSlotElementId()}`)})),this.googlePublisherTag.enableServices(),Array.from(this.adUnitSlots.keys()).forEach((e=>this.googlePublisherTag.displayAd(e))),this.googlePublisherTag.refreshAds(),document.dispatchEvent(new Event(Kl.AdRefreshTimerStart));this.resetBidProperties()}))}addPositionToAdSlots(){if(this.adUnitSlots.size<=this.adUnitSlotsSize||!this.isFrontpageMobileWeb())return;let e=1;for(const t of this.adUnitSlots.values())this.slotLevelTargeting.set(t.name,{position:e}),t.slot.setTargeting("position",e),e++;this.adUnitSlotsSize=this.adUnitSlots.size}initialAdUnitPopulatedCallback(e){const t=Ac((()=>{this.googlePublisherTag.removeEventListener(e,t),this.eventManager.fire(Uc.AdUnitPopulated),setTimeout((()=>{document.dispatchEvent(new Event("initialSlotRenderEnded"))}),this.PARALLEL_TIMEOUT)}),"onSlotRenderEnded");this.googlePublisherTag.addEventListener(e,t)}adUnitPopulatedCallback(e){const t=Ac((n=>{let i;this.adsDestroyed&&this.googlePublisherTag.removeEventListener(e,t),i=this.isFrontpageMobileWeb()&&!this.adsDestroyed?Uc.DynamicAdUnitPopulated:this.adsDestroyed?Uc.ReinitializeAdUnitPopulated:Uc.RefreshAdUnitPopulated,this.eventManager.fire(i,{adUnitId:n.slot.getSlotElementId()}),this.adsDestroyed&&(setTimeout((()=>{document.dispatchEvent(new Event("initialSlotRenderEnded"))}),this.PARALLEL_TIMEOUT),this.adsDestroyed=!1)}),"onSlotRenderEnded");this.googlePublisherTag.addEventListener(e,t)}isFrontpageMobileWeb(){const e=fd.get("page");return"Frontpage"===e.section&&"Mobile Web"===e.layout}getAuuidCookie(){return wc.get("auuid")??""}resetAds(){this.adUnitSlots.clear(),this.googlePublisherTag.destroySlots(),this.googlePublisherTag.clearAd(),this.resetBidProperties()}resetBidProperties(){Ju.requestBidsQueue=[],Ju.amazonBidsRequested=!1,Ju.amazonBidsReceived=!1,Ju.prebidBidsRequested=!1,Ju.prebidBidsReceived=!1}},"GptCommonProvider"),_c(Ju,"prebidBidsRequested",!1),_c(Ju,"prebidBidsReceived",!1),_c(Ju,"amazonBidsRequested",!1),_c(Ju,"amazonBidsReceived",!1),_c(Ju,"requestBidsQueue",[]),Ju);Qu=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),Wu(0,bc("AdEventManager")),Wu(1,bc("AdUnitManager")),qu("design:type",Function),qu("design:paramtypes",[void 0===Ud?Object:Ud,void 0===nu?Object:nu])],Qu);var Ku,Yu={pubID:"3097",adServer:"googletag",bidTimeout:2e3,signals:{ortb2:{site:{cat:["473"],cattax:7,privacypolicy:1}}}},Xu={Auto:{sectioncat:1,pagecat:1},"Auto Electronic Accessories":{sectioncat:1,pagecat:1},"Auto Parts":{sectioncat:32,pagecat:32},"Auto Parts & Supplies":{sectioncat:32,pagecat:32},"Auto Detailing & Car Care":{sectioncat:1,pagecat:1},"Auto Detailing":{sectioncat:1,pagecat:1},"Auto Tools":{sectioncat:1,pagecat:1},"Automotive Tools":{sectioncat:1,pagecat:1},Gas:{sectioncat:1,pagecat:1},"Oil Change":{sectioncat:1,pagecat:1},"Motor Oil":{sectioncat:1,pagecat:1},"Motorcycle Accessories":{sectioncat:1,pagecat:1},"Motorcycle Gear & Accessories":{sectioncat:1,pagecat:1},Wheels:{sectioncat:1,pagecat:1},"Wheels & Tires":{sectioncat:1,pagecat:1},Finance:{sectioncat:391,pagecat:391},"Babies & Kids":{sectioncat:482,pagecat:482},Chidren:{sectioncat:482,pagecat:482},Babies:{sectioncat:482,pagecat:482},"Baby Toys & Books":{sectioncat:482,pagecat:482},"Baby Toys":{sectioncat:482,pagecat:482},"Car Seats":{sectioncat:482,pagecat:482},Carseat:{sectioncat:482,pagecat:482},Nursery:{sectioncat:482,pagecat:482},Strollers:{sectioncat:482,pagecat:482},Stroller:{sectioncat:482,pagecat:482},Kids:{sectioncat:482,pagecat:482},"Educational Toys":{sectioncat:482,pagecat:482},"Kids Games & Books":{sectioncat:482,pagecat:482},"Kids Game":{sectioncat:482,pagecat:482},"Kids Toys":{sectioncat:482,pagecat:482},"Diapers & Wipes":{sectioncat:479,pagecat:479},Diapers:{sectioncat:479,pagecat:479},"Bags & Luggage":{sectioncat:552,pagecat:552},Bags:{sectioncat:552,pagecat:552},Backpacks:{sectioncat:552,pagecat:552},"Duffel Bags":{sectioncat:552,pagecat:552},"Duffle Bags":{sectioncat:552,pagecat:552},"Laptop Bags":{sectioncat:552,pagecat:552},"Laptop Bag":{sectioncat:552,pagecat:552},Luggage:{sectioncat:552,pagecat:552},"Luggage Bags":{sectioncat:552,pagecat:552},"Formula & Baby Food":{sectioncat:479,pagecat:479},"Baby Formula":{sectioncat:479,pagecat:479},"Books & Magazines":{sectioncat:42,pagecat:42},"Books Magazines":{sectioncat:42,pagecat:42},Books:{sectioncat:42,pagecat:42},Magazines:{sectioncat:42,pagecat:42},Magazine:{sectioncat:42,pagecat:42},Ebooks:{sectioncat:42,pagecat:42},Ebook:{sectioncat:42,pagecat:42},Textbooks:{sectioncat:42,pagecat:42},"Clothing & Accessories":{sectioncat:552,pagecat:552},Apparel:{sectioncat:552,pagecat:552},"Babies & Kids Clothes & Accessories":{sectioncat:552,pagecat:575},"Babies And Kids":{sectioncat:552,pagecat:575},"Baby & Infant Clothes":{sectioncat:552,pagecat:575},"Baby Clothes":{sectioncat:552,pagecat:575},"Kids Clothes":{sectioncat:552,pagecat:575},Jewelry:{sectioncat:552,pagecat:565},Diamond:{sectioncat:552,pagecat:565},Diamonds:{sectioncat:552,pagecat:565},"Earrings, Bracelets & Rings":{sectioncat:552,pagecat:565},Earrings:{sectioncat:552,pagecat:565},Necklaces:{sectioncat:552,pagecat:565},Mens:{sectioncat:552,pagecat:582},"Men's Clothing & Accessories":{sectioncat:552,pagecat:582},"Big Tall":{sectioncat:552,pagecat:582},"Big & Tall":{sectioncat:552,pagecat:582},"Mens Accessories":{sectioncat:552,pagecat:580},"Men's Accessories":{sectioncat:552,pagecat:580},"Mens Athletic Wear":{sectioncat:552,pagecat:587},"Men's Activewear":{sectioncat:552,pagecat:587},"Mens Apparel":{sectioncat:552,pagecat:582},"Men's Apparel":{sectioncat:552,pagecat:582},"Mens Jeans":{sectioncat:552,pagecat:582},"Men's Jeans":{sectioncat:552,pagecat:582},"Mens Outerwear":{sectioncat:552,pagecat:586},"Men's Outerwear":{sectioncat:552,pagecat:586},"Men's Pajamas & Loungewear":{sectioncat:552,pagecat:588},"Mens Pajamas":{sectioncat:552,pagecat:588},"Mens Pants":{sectioncat:552,pagecat:582},"Men's Pants & Shorts":{sectioncat:552,pagecat:582},"Mens Shirt":{sectioncat:552,pagecat:582},"Men's Shirts":{sectioncat:552,pagecat:582},"Mens Underwear":{sectioncat:552,pagecat:588},"Men's Underwear & Socks":{sectioncat:552,pagecat:588},"Young Mens":{sectioncat:552,pagecat:582},Shoes:{sectioncat:552,pagecat:552},"Athletic Shoes":{sectioncat:552,pagecat:552},"Baby & Kids Shoes":{sectioncat:552,pagecat:575},"Kids Shoes":{sectioncat:552,pagecat:575},Boots:{sectioncat:552,pagecat:552},"Mens Shoes":{sectioncat:552,pagecat:589},"Men's Shoes":{sectioncat:552,pagecat:589},Sunglasses:{sectioncat:552,pagecat:552},"Womens Shoes":{sectioncat:552,pagecat:552},"Women's Shoes":{sectioncat:552,pagecat:552},Watches:{sectioncat:552,pagecat:552},"Mens Watches":{sectioncat:552,pagecat:581},"Men's Watches":{sectioncat:552,pagecat:581},"Womens Watches":{sectioncat:552,pagecat:565},"Women's Watches":{sectioncat:552,pagecat:565},"Women's Clothing & Accessories":{sectioncat:552,pagecat:566},Womens:{sectioncat:552,pagecat:566},"Designer Brands":{sectioncat:552,pagecat:576},"Handbags & Purses":{sectioncat:552,pagecat:563},Handbags:{sectioncat:552,pagecat:563},"Juniors Apparel":{sectioncat:552,pagecat:566},Juniors:{sectioncat:552,pagecat:566},Maternity:{sectioncat:552,pagecat:566},"Plus Size Clothing":{sectioncat:552,pagecat:566},"Plus Size":{sectioncat:552,pagecat:566},"Womens Accessories":{sectioncat:552,pagecat:561},"Women's Accessories":{sectioncat:552,pagecat:561},"Womens Activewear":{sectioncat:552,pagecat:572},"Women's Activewear":{sectioncat:552,pagecat:572},"Womens Apparel":{sectioncat:552,pagecat:566},"Women's Apparel":{sectioncat:552,pagecat:566},"Womens Dresses":{sectioncat:552,pagecat:566},"Women's Dresses & Skirts":{sectioncat:552,pagecat:566},"Womens Outerwear":{sectioncat:552,pagecat:571},"Women's Outerwear":{sectioncat:552,pagecat:571},"Womens Pajamas":{sectioncat:552,pagecat:570},"Women's Pajamas & Loungewear":{sectioncat:552,pagecat:570},"Womens Pants":{sectioncat:552,pagecat:566},"Women's Pants & Shorts":{sectioncat:552,pagecat:566},"Womens Shirts":{sectioncat:552,pagecat:566},"Women's Shirts":{sectioncat:552,pagecat:566},"Womens Lingerie":{sectioncat:552,pagecat:570},"Women's Underwear & Socks":{sectioncat:552,pagecat:570},"Credit Cards":{sectioncat:405,pagecat:406},"Credit Card Offers":{sectioncat:405,pagecat:406},Computers:{sectioncat:599,pagecat:599},"Computer Deals":{sectioncat:599,pagecat:599},"Computer Accessories":{sectioncat:599,pagecat:601},"Computer Speakers":{sectioncat:599,pagecat:601},Keyboards:{sectioncat:599,pagecat:601},Keyboard:{sectioncat:599,pagecat:601},Mice:{sectioncat:599,pagecat:601},Mouse:{sectioncat:599,pagecat:601},Webcams:{sectioncat:599,pagecat:601},Webcam:{sectioncat:599,pagecat:601},"Computer Networking":{sectioncat:599,pagecat:600},Networking:{sectioncat:599,pagecat:600},Modems:{sectioncat:599,pagecat:600},Modem:{sectioncat:599,pagecat:600},Routers:{sectioncat:599,pagecat:600},Router:{sectioncat:599,pagecat:600},Switches:{sectioncat:599,pagecat:600},Switch:{sectioncat:599,pagecat:600},Wireless:{sectioncat:599,pagecat:600},"Wireless Router":{sectioncat:599,pagecat:600},"Computer Parts":{sectioncat:599,pagecat:599},CPUs:{sectioncat:599,pagecat:599},Processor:{sectioncat:599,pagecat:599},"Computer Cases":{sectioncat:599,pagecat:599},"Computer Case Deals":{sectioncat:599,pagecat:599},"Computer Fans & Coolers":{sectioncat:599,pagecat:599},"Computer Fans Coolers":{sectioncat:599,pagecat:599},"Hard Drives":{sectioncat:599,pagecat:599},Drives:{sectioncat:599,pagecat:599},"3.5-INCH":{sectioncat:599,pagecat:599},"External Hard Drives":{sectioncat:599,pagecat:599},"External Drive":{sectioncat:599,pagecat:599},"Portable Hard Drives":{sectioncat:599,pagecat:599},"Portable Hard Drive":{sectioncat:599,pagecat:599},"Solid State Drives (SSD)":{sectioncat:599,pagecat:599},Ssd:{sectioncat:599,pagecat:599},Memory:{sectioncat:599,pagecat:599},Motherboards:{sectioncat:599,pagecat:599},Motherboard:{sectioncat:599,pagecat:599},"Power Supplies":{sectioncat:599,pagecat:599},"Power Supply":{sectioncat:599,pagecat:599},"Video Cards":{sectioncat:599,pagecat:599},"Video Card":{sectioncat:599,pagecat:599},"Desktop Computers":{sectioncat:599,pagecat:617},Desktop:{sectioncat:599,pagecat:617},"Flash Storage":{sectioncat:599,pagecat:601},"SD Cards & Micro SD Cards":{sectioncat:599,pagecat:601},Microsd:{sectioncat:599,pagecat:601},"USB Flash Drives":{sectioncat:599,pagecat:601},"Flash Drive":{sectioncat:599,pagecat:601},"Internet & Websites":{sectioncat:599,pagecat:619},Internet:{sectioncat:599,pagecat:619},VPNS:{sectioncat:599,pagecat:602},"Vpn Service":{sectioncat:599,pagecat:602},Laptops:{sectioncat:599,pagecat:630},"Laptop Deals":{sectioncat:599,pagecat:630},Monitors:{sectioncat:599,pagecat:601},"Monitor Deals":{sectioncat:599,pagecat:601},"Gaming Monitors":{sectioncat:599,pagecat:601},"Gaming Monitor":{sectioncat:599,pagecat:601},Printers:{sectioncat:599,pagecat:601},Printer:{sectioncat:599,pagecat:601},"3D Printers":{sectioncat:599,pagecat:601},"3d Printer":{sectioncat:599,pagecat:601},"All In One Printers":{sectioncat:599,pagecat:601},"Ink and Toner":{sectioncat:599,pagecat:601},"Ink Cartridge":{sectioncat:599,pagecat:601},"Inkjet Printers":{sectioncat:599,pagecat:601},"Inkjet Printer":{sectioncat:599,pagecat:601},"Laser Printers":{sectioncat:599,pagecat:601},"Laser Printer":{sectioncat:599,pagecat:601},"Servers & NAS":{sectioncat:599,pagecat:616},Servers:{sectioncat:599,pagecat:616},Software:{sectioncat:599,pagecat:602},"Antivirus Software":{sectioncat:599,pagecat:608},Antivirus:{sectioncat:599,pagecat:608},Apps:{sectioncat:599,pagecat:602},"Windows Software":{sectioncat:599,pagecat:602},Windows:{sectioncat:599,pagecat:602},"Tablets & eReaders":{sectioncat:632,pagecat:636},Tablets:{sectioncat:632,pagecat:636},Education:{sectioncat:132,pagecat:132},"Student Discounts":{sectioncat:132,pagecat:132},Entertainment:{sectioncat:"JLBCU7",pagecat:"JLBCU7"},Anime:{sectioncat:"JLBCU7",pagecat:"JLBCU7"},"Games, Board Games & Card Games":{sectioncat:269,pagecat:270},Movies:{sectioncat:324,pagecat:324},"Blu-ray & 4K Blu-ray":{sectioncat:"JLBCU7",pagecat:"JLBCU7"},DVD:{sectioncat:"JLBCU7",pagecat:"JLBCU7"},"Digital Movie Download & Streaming":{sectioncat:324,pagecat:324},"Movie Rentals":{sectioncat:324,pagecat:324},"Star Wars":{sectioncat:324,pagecat:324},Music:{sectioncat:338,pagecat:338},"Digital Music Download & Streaming":{sectioncat:338,pagecat:338},"Musical Instruments":{sectioncat:338,pagecat:338},Guitars:{sectioncat:338,pagecat:338},"Vinyl & LPs":{sectioncat:338,pagecat:338},"Streaming Services":{sectioncat:"JLBCU7",pagecat:"JLBCU7"},"TV Series & TV Shows":{sectioncat:640,pagecat:640},"Tickets & Admission":{sectioncat:150,pagecat:150},"Financial Tools & Services":{sectioncat:410,pagecat:410},"Financial Tools":{sectioncat:410,pagecat:410},"Flowers & Gifts":{sectioncat:476,pagecat:476},"Flowers Gifts":{sectioncat:476,pagecat:476},"Cigars, Cigarettes & E-Cigs":{sectioncat:476,pagecat:260},"Cigars Cigarettes E Cigs":{sectioncat:476,pagecat:260},Costumes:{sectioncat:476,pagecat:202},"Gift Baskets":{sectioncat:476,pagecat:476},"Gift Basket":{sectioncat:476,pagecat:476},"Gift Cards":{sectioncat:476,pagecat:476},"Gift Card":{sectioncat:476,pagecat:476},"Greeting Cards & Invitations":{sectioncat:476,pagecat:476},Gift:{sectioncat:476,pagecat:476},"Party Supplies":{sectioncat:476,pagecat:161},"Personalized Gifts":{sectioncat:476,pagecat:476},Grocery:{sectioncat:477,pagecat:477},"Baking and Cooking":{sectioncat:477,pagecat:216},Baking:{sectioncat:477,pagecat:216},"Breakfast Foods":{sectioncat:477,pagecat:210},Breakfast:{sectioncat:477,pagecat:210},"Candy, Chocolate & Gum":{sectioncat:477,pagecat:477},Candy:{sectioncat:477,pagecat:477},"Cleaning Supplies":{sectioncat:477,pagecat:477},"Kitchen & Bathroom Cleaning Supplies":{sectioncat:477,pagecat:477},"Bathroom Cleaner":{sectioncat:477,pagecat:477},Laundery:{sectioncat:477,pagecat:477},"Laundery Detergent":{sectioncat:477,pagecat:477},Condiments:{sectioncat:477,pagecat:477},Condiment:{sectioncat:477,pagecat:477},Dairy:{sectioncat:477,pagecat:210},Dessert:{sectioncat:477,pagecat:217},"Drinks & Beverages":{sectioncat:477,pagecat:477},Drink:{sectioncat:477,pagecat:477},Alcohol:{sectioncat:477,pagecat:211},Coffee:{sectioncat:477,pagecat:210},"Coffee & Espresso":{sectioncat:477,pagecat:210},"Energy Drinks & Sports Drinks":{sectioncat:477,pagecat:210},"Energy Drink":{sectioncat:477,pagecat:210},"Soda & Soft Drinks":{sectioncat:477,pagecat:210},Soda:{sectioncat:477,pagecat:210},Tea:{sectioncat:477,pagecat:210},Water:{sectioncat:477,pagecat:210},"Health Food":{sectioncat:477,pagecat:210},"Household Goods":{sectioncat:477,pagecat:477},"Household Items":{sectioncat:477,pagecat:477},"Facial Tissue":{sectioncat:477,pagecat:477},"Paper Towels":{sectioncat:477,pagecat:477},"Toilet Paper":{sectioncat:477,pagecat:477},"Meal Prep & Food Containers":{sectioncat:477,pagecat:477},"Meal Prep Food Containers":{sectioncat:477,pagecat:477},"Meat, Fish, & Poultry":{sectioncat:477,pagecat:210},Meat:{sectioncat:477,pagecat:210},"Deli & Cold Cuts":{sectioncat:477,pagecat:210},Deli:{sectioncat:477,pagecat:210},"Hot Dogs":{sectioncat:477,pagecat:210},"Hot Dog":{sectioncat:477,pagecat:210},Pasta:{sectioncat:477,pagecat:210},"Rice & Grains":{sectioncat:477,pagecat:210},Rice:{sectioncat:477,pagecat:210},"Snacks, Nuts & Chips":{sectioncat:477,pagecat:210},Snacks:{sectioncat:477,pagecat:210},"Soups, Sauces, Packaged Meals & Canned Goods":{sectioncat:477,pagecat:210},"Soups Sauces Canned Goods":{sectioncat:477,pagecat:210},"Health & Beauty":{sectioncat:552,pagecat:553},Beauty:{sectioncat:552,pagecat:553},"Contacts & Glasses":{sectioncat:479,pagecat:479},"Contacts Glasses":{sectioncat:479,pagecat:479},"Face Masks & Gloves":{sectioncat:479,pagecat:479},"Face Mask":{sectioncat:479,pagecat:479},"Fitness & Wellness":{sectioncat:483,pagecat:225},Supplement:{sectioncat:225,pagecat:225},"Fragrances, Cologne & Perfume":{sectioncat:553,pagecat:558},"Fragrance Cologne Perfume":{sectioncat:553,pagecat:558},"Hand Sanitizer":{sectioncat:479,pagecat:479},Makeup:{sectioncat:553,pagecat:555},"Massage & Spa":{sectioncat:671,pagecat:671},"Massage And Spa":{sectioncat:671,pagecat:671},"Personal Care":{sectioncat:590,pagecat:590},"Body Wash, Bar Soap & Hand Soap":{sectioncat:590,pagecat:591},"Body Wash":{sectioncat:590,pagecat:591},"Protein Powder & Shakes":{sectioncat:223,pagecat:229},"Protein Powder":{sectioncat:223,pagecat:229},"Razors & Shaving Supplies":{sectioncat:590,pagecat:594},Razor:{sectioncat:590,pagecat:594},"Shampoo & Hair Care":{sectioncat:553,pagecat:554},Shampoo:{sectioncat:553,pagecat:554},"Skin Care":{sectioncat:553,pagecat:559},Supplements:{sectioncat:223,pagecat:229},"Toothpaste, Toothbrushes & Oral Care":{sectioncat:590,pagecat:593},Toothbrush:{sectioncat:590,pagecat:593},Vitamins:{sectioncat:590,pagecat:593},Hobbies:{sectioncat:239,pagecat:239},"Arts & Crafts":{sectioncat:239,pagecat:248},Crafts:{sectioncat:239,pagecat:248},Collectibles:{sectioncat:239,pagecat:261},Drones:{sectioncat:239,pagecat:638},"Home & Home Improvement":{sectioncat:274,pagecat:274},Home:{sectioncat:274,pagecat:274},"Bed & Bath":{sectioncat:274,pagecat:274},Bed:{sectioncat:274,pagecat:274},"Sheets & Bedding":{sectioncat:274,pagecat:274},Sheets:{sectioncat:274,pagecat:274},"Shower Curtains":{sectioncat:274,pagecat:274},"Shower Curtain":{sectioncat:274,pagecat:274},Towels:{sectioncat:274,pagecat:274},"Building & Remodeling Supplies":{sectioncat:274,pagecat:276},Remodeling:{sectioncat:274,pagecat:276},Furniture:{sectioncat:274,pagecat:274},"Furniture Deals":{sectioncat:274,pagecat:274},"Bedroom Furniture":{sectioncat:274,pagecat:274},"Dining Room Furniture":{sectioncat:274,pagecat:274},"Family Room Furniture":{sectioncat:274,pagecat:274},"Home Office Furniture":{sectioncat:274,pagecat:274},"Living Room Furniture":{sectioncat:274,pagecat:274},"Living Room":{sectioncat:274,pagecat:274},"Outdoor & Patio Furniture":{sectioncat:274,pagecat:285},"Outdoor Furniture":{sectioncat:274,pagecat:285},Garage:{sectioncat:274,pagecat:274},"Gardening & Outdoor":{sectioncat:274,pagecat:275},Gardening:{sectioncat:274,pagecat:275},"Fire Pits":{sectioncat:274,pagecat:285},Fire:{sectioncat:274,pagecat:285},"Garden & Outdoor Tools":{sectioncat:274,pagecat:275},"Garden Tools":{sectioncat:274,pagecat:275},Generators:{sectioncat:274,pagecat:274},Griddles:{sectioncat:274,pagecat:274},"Grills & Grilling Accessories":{sectioncat:274,pagecat:274},Grill:{sectioncat:274,pagecat:274},"Outdoor Heaters":{sectioncat:274,pagecat:274},"Outdoor Heater":{sectioncat:274,pagecat:274},"Patio & Pool":{sectioncat:274,pagecat:274},"Patio And Pool":{sectioncat:274,pagecat:274},"Pest Control":{sectioncat:274,pagecat:274},"Plants and Supplies":{sectioncat:274,pagecat:275},Plants:{sectioncat:274,pagecat:275},"Snow Blowers & Leaf Blowers":{sectioncat:274,pagecat:274},"Snow Blower":{sectioncat:274,pagecat:274},"Trimmers, Edgers & Lawn Mowers":{sectioncat:274,pagecat:274},Trimmer:{sectioncat:274,pagecat:274},"Home Automation":{sectioncat:274,pagecat:277},"Home Decor":{sectioncat:274,pagecat:283},Art:{sectioncat:274,pagecat:283},"Candles & Home Fragrances":{sectioncat:274,pagecat:274},Candle:{sectioncat:274,pagecat:274},Clocks:{sectioncat:274,pagecat:274},Clock:{sectioncat:274,pagecat:274},"Decorative Pillows & Blankets":{sectioncat:274,pagecat:283},"Decorative Pillows And Blankets":{sectioncat:274,pagecat:283},"Holiday Decor":{sectioncat:274,pagecat:283},"Holiday Decorations":{sectioncat:274,pagecat:283},"Indoor Plants":{sectioncat:274,pagecat:274},"Lamps and Shades":{sectioncat:274,pagecat:274},"Lamp and Shades":{sectioncat:274,pagecat:274},Mirrors:{sectioncat:274,pagecat:274},"Pictures & Frames":{sectioncat:274,pagecat:283},"Pictures And Frames":{sectioncat:274,pagecat:283},Rugs:{sectioncat:274,pagecat:274},"Wall Decor":{sectioncat:274,pagecat:283},"Window Treatments":{sectioncat:274,pagecat:274},"Home Security & Safety":{sectioncat:274,pagecat:281},"Kitchenware & Cookware":{sectioncat:274,pagecat:274},Kitchenware:{sectioncat:274,pagecat:274},"Dinnerware & Bakeware":{sectioncat:274,pagecat:274},Dinnerware:{sectioncat:274,pagecat:274},Utensils:{sectioncat:274,pagecat:274},"Large Appliances":{sectioncat:274,pagecat:278},Appliance:{sectioncat:274,pagecat:278},"Air Conditioners":{sectioncat:274,pagecat:274},Dishwashers:{sectioncat:274,pagecat:278},Dishwasher:{sectioncat:274,pagecat:278},"Refrigerators & Freezers":{sectioncat:274,pagecat:278},Refrigerator:{sectioncat:274,pagecat:278},Stoves:{sectioncat:274,pagecat:278},Stove:{sectioncat:274,pagecat:278},"Vacuums, Carpet Cleaners & Floor Cleaners":{sectioncat:274,pagecat:274},Vacuum:{sectioncat:274,pagecat:274},"Washers & Dryers":{sectioncat:274,pagecat:278},"Washing Machine":{sectioncat:274,pagecat:278},Lighting:{sectioncat:274,pagecat:274},"Small Appliances":{sectioncat:274,pagecat:278},"Air Fryers & Deep Fryers":{sectioncat:274,pagecat:278},"Air Fryer":{sectioncat:274,pagecat:278},"Blenders & Juicers":{sectioncat:274,pagecat:278},Blender:{sectioncat:274,pagecat:278},"Coffee Makers, Espresso Machines & Tea Kettles":{sectioncat:274,pagecat:278},"Coffee Maker":{sectioncat:274,pagecat:278},Fans:{sectioncat:274,pagecat:274},Fan:{sectioncat:274,pagecat:274},Microwaves:{sectioncat:274,pagecat:278},Microwave:{sectioncat:274,pagecat:278},Mixers:{sectioncat:274,pagecat:278},Mixer:{sectioncat:274,pagecat:278},"Precision Cookers":{sectioncat:274,pagecat:278},"Precision Cooker":{sectioncat:274,pagecat:278},"Pressure Cookers":{sectioncat:274,pagecat:278},"Pressure Cooker":{sectioncat:274,pagecat:278},"Rice Cookers":{sectioncat:274,pagecat:278},"Rice Cooker":{sectioncat:274,pagecat:278},"Slow Cookers":{sectioncat:274,pagecat:278},"Slow Cooker":{sectioncat:274,pagecat:278},"Space Heaters":{sectioncat:274,pagecat:274},"Space Heater":{sectioncat:274,pagecat:274},"Toasters & Toaster Ovens":{sectioncat:274,pagecat:278},Toaster:{sectioncat:274,pagecat:278},"Storage & Cleaning":{sectioncat:274,pagecat:274},Cleaning:{sectioncat:274,pagecat:274},Tools:{sectioncat:274,pagecat:274},"Drills & Power Tools":{sectioncat:274,pagecat:274},Drill:{sectioncat:274,pagecat:274},"Extension cords":{sectioncat:274,pagecat:274},Flashlights:{sectioncat:274,pagecat:274},Flashlight:{sectioncat:274,pagecat:274},"Hand Tools":{sectioncat:274,pagecat:274},"Hand Tool":{sectioncat:274,pagecat:274},Ladders:{sectioncat:274,pagecat:274},"Saws & Chainsaws":{sectioncat:274,pagecat:274},Chainsaw:{sectioncat:274,pagecat:274},"Tool Boxes & Tool Chests":{sectioncat:274,pagecat:274},"Tool Box":{sectioncat:274,pagecat:274},"Tool Sets":{sectioncat:274,pagecat:274},"Tool Set":{sectioncat:274,pagecat:274},Occasions:{sectioncat:481,pagecat:478},"Office & School Supplies":{sectioncat:479,pagecat:479},Office:{sectioncat:479,pagecat:479},"Blank Media":{sectioncat:479,pagecat:479},Media:{sectioncat:479,pagecat:479},"Office Furniture":{sectioncat:479,pagecat:479},Paper:{sectioncat:479,pagecat:479},"Pencils, Pens & Markers":{sectioncat:479,pagecat:479},Other:{sectioncat:473,pagecat:473},Pets:{sectioncat:422,pagecat:422},"Pet Care & Supplies":{sectioncat:422,pagecat:431},"Pet Care":{sectioncat:422,pagecat:431},"Pet Food":{sectioncat:422,pagecat:431},"Cat Food & Treats":{sectioncat:422,pagecat:424},"Cat Food":{sectioncat:422,pagecat:424},"Dog Food & Treats":{sectioncat:422,pagecat:425},"Dog Food And Treats":{sectioncat:422,pagecat:425},"Pet Toys":{sectioncat:422,pagecat:431},"Pet Toy":{sectioncat:422,pagecat:431},Restaurants:{sectioncat:210,pagecat:210},Restaurant:{sectioncat:210,pagecat:210},"Delivery & Take Out":{sectioncat:210,pagecat:218},"Delivery Out":{sectioncat:210,pagecat:218},"Fast Food":{sectioncat:210,pagecat:218},"Fast Food Coupons":{sectioncat:210,pagecat:218},Pizza:{sectioncat:210,pagecat:218},Services:{sectioncat:473,pagecat:473},"Daily Deals & Flash Sales":{sectioncat:473,pagecat:481},"Daily Deals And Flash Sales":{sectioncat:473,pagecat:481},"Dating Services":{sectioncat:186,pagecat:188},"Delivery Services":{sectioncat:473,pagecat:473},Memberships:{sectioncat:473,pagecat:473},Membership:{sectioncat:473,pagecat:473},"Online Services":{sectioncat:473,pagecat:473},"Phone Services":{sectioncat:391,pagecat:420},"Printing Services":{sectioncat:473,pagecat:473},"TV & Internet Providers":{sectioncat:417,pagecat:419},"TV And Internet Providers":{sectioncat:417,pagecat:419},"Tax Services":{sectioncat:391,pagecat:415},"Web Hosting & Domains":{sectioncat:619,pagecat:622},"Web Hosting And Domains":{sectioncat:619,pagecat:622},"Sporting Goods":{sectioncat:483,pagecat:483},Sport:{sectioncat:483,pagecat:483},"Bicycles & Bike Accessories":{sectioncat:483,pagecat:492},Bicycles:{sectioncat:483,pagecat:492},Ebikes:{sectioncat:483,pagecat:492},Ebike:{sectioncat:483,pagecat:492},"Mountain Bikes":{sectioncat:483,pagecat:492},"Mountain Bike":{sectioncat:483,pagecat:492},"Exercise Equipment":{sectioncat:483,pagecat:551},Golf:{sectioncat:483,pagecat:512},"Golf Clubs & Equipment":{sectioncat:483,pagecat:512},"Golf Clubs":{sectioncat:483,pagecat:512},Outdoors:{sectioncat:483,pagecat:483},Camping:{sectioncat:677,pagecat:677},Coolers:{sectioncat:483,pagecat:483},Fishing:{sectioncat:483,pagecat:483},Hiking:{sectioncat:483,pagecat:483},Hunting:{sectioncat:483,pagecat:514},Scooters:{sectioncat:483,pagecat:29},Scooter:{sectioncat:483,pagecat:29},"Ski & Snowboard":{sectioncat:498,pagecat:504},"Ski And Snowboard":{sectioncat:498,pagecat:504},"Sports Equipment":{sectioncat:483,pagecat:551},"Surf & Skate":{sectioncat:498,pagecat:506},"Surf And Skate":{sectioncat:498,pagecat:506},"Water Bottles":{sectioncat:483,pagecat:483},"Water Bottle":{sectioncat:483,pagecat:483},"Tech & Electronics":{sectioncat:632,pagecat:632},Tech:{sectioncat:632,pagecat:632},"Audio / Video":{sectioncat:632,pagecat:634},Audio:{sectioncat:632,pagecat:634},"Blu-ray & DVD Players":{sectioncat:632,pagecat:634},"Bluray Player":{sectioncat:632,pagecat:634},"Bluetooth Speakers & Smart Speakers":{sectioncat:632,pagecat:634},"Bluetooth Speaker":{sectioncat:632,pagecat:634},"Headphones, Headsets & Earbuds":{sectioncat:632,pagecat:637},Headphone:{sectioncat:632,pagecat:637},"Home Audio":{sectioncat:632,pagecat:634},"Home Theater":{sectioncat:632,pagecat:634},"Home Theater System":{sectioncat:632,pagecat:634},"Media Players":{sectioncat:632,pagecat:634},"Media Player":{sectioncat:632,pagecat:634},Receivers:{sectioncat:632,pagecat:634},Receiver:{sectioncat:632,pagecat:634},"Sound Bars":{sectioncat:632,pagecat:634},Soundbar:{sectioncat:632,pagecat:634},Speakers:{sectioncat:632,pagecat:634},Cameras:{sectioncat:632,pagecat:633},Photo:{sectioncat:632,pagecat:633},"Camera Accessories":{sectioncat:632,pagecat:633},"Camera Lenses":{sectioncat:632,pagecat:633},Lens:{sectioncat:632,pagecat:633},DSLR:{sectioncat:632,pagecat:633},"Dslr Camera Deals":{sectioncat:632,pagecat:633},"Dash Cams & Action Cams":{sectioncat:632,pagecat:633},"Dash Cam":{sectioncat:632,pagecat:633},Mirrorless:{sectioncat:632,pagecat:633},"Photo Prints":{sectioncat:632,pagecat:255},"Photo Prints And Services":{sectioncat:632,pagecat:255},"Security Cameras":{sectioncat:632,pagecat:633},Tripods:{sectioncat:632,pagecat:633},Tripod:{sectioncat:632,pagecat:633},GPS:{sectioncat:632,pagecat:637},Gps:{sectioncat:632,pagecat:637},Phones:{sectioncat:632,pagecat:635},Phone:{sectioncat:632,pagecat:635},"Cell Phone Plans & Services":{sectioncat:632,pagecat:635},"Cellphone Providers":{sectioncat:632,pagecat:635},"Cell Phones":{sectioncat:632,pagecat:635},"Cell Phone Deals":{sectioncat:632,pagecat:635},"Phone Accessories":{sectioncat:632,pagecat:635},"Prepaid Phones & Refill Cards":{sectioncat:632,pagecat:635},"Prepaid Phones":{sectioncat:632,pagecat:635},Smartphones:{sectioncat:632,pagecat:635},Smartphone:{sectioncat:632,pagecat:635},Projectors:{sectioncat:632,pagecat:634},Projector:{sectioncat:632,pagecat:634},"Smart Watches & Wearables":{sectioncat:632,pagecat:637},"Smart Watch":{sectioncat:632,pagecat:637},TV:{sectioncat:632,pagecat:634},"Tv Deals":{sectioncat:632,pagecat:634},"4K TVs":{sectioncat:632,pagecat:634},"8K TVs":{sectioncat:632,pagecat:634},HDTV:{sectioncat:632,pagecat:634},"LED TVs":{sectioncat:632,pagecat:634},"OLED TVs":{sectioncat:632,pagecat:634},"QLED TVs":{sectioncat:632,pagecat:634},"Smart TVs":{sectioncat:632,pagecat:634},"TV Accessories":{sectioncat:632,pagecat:634},"TV Mounts":{sectioncat:632,pagecat:634},"Tech Accessories":{sectioncat:632,pagecat:632},Accessories:{sectioncat:632,pagecat:632},Batteries:{sectioncat:632,pagecat:632},Cables:{sectioncat:632,pagecat:632},Cable:{sectioncat:632,pagecat:632},"Chargers & Power Banks":{sectioncat:632,pagecat:632},Chargers:{sectioncat:632,pagecat:632},"Phone & Tablet Cases":{sectioncat:632,pagecat:635},"Phone Case":{sectioncat:632,pagecat:635},"Portable Power Stations":{sectioncat:632,pagecat:632},"Portable Power Station":{sectioncat:632,pagecat:632},"Remote Controls":{sectioncat:632,pagecat:632},"Remote Control":{sectioncat:632,pagecat:632},"Uninterruptible Power Supply (UPS), Surge Protectors & Powerstrips":{sectioncat:632,pagecat:632},"Power Strip":{sectioncat:632,pagecat:632},"Travel & Vacations":{sectioncat:653,pagecat:653},"Travel Deals":{sectioncat:653,pagecat:653},"Car Rentals":{sectioncat:653,pagecat:41},Cruises:{sectioncat:653,pagecat:678},Flights:{sectioncat:653,pagecat:672},Airfares:{sectioncat:653,pagecat:672},Hotels:{sectioncat:653,pagecat:668},Hotel:{sectioncat:653,pagecat:668},"RV & Camper Van Rentals":{sectioncat:653,pagecat:41},"Rv And Camper Van Rentals":{sectioncat:653,pagecat:41},"Theme Parks & Attractions":{sectioncat:53,pagecat:151},"Theme Parks And Attractions":{sectioncat:53,pagecat:151},"Tours & Travel Packages":{sectioncat:653,pagecat:153},Tour:{sectioncat:653,pagecat:153},"Vacation Rentals":{sectioncat:653,pagecat:653},"Video Games":{sectioncat:680,pagecat:680},"Video Game Deals":{sectioncat:680,pagecat:680},"3DS":{sectioncat:680,pagecat:681},"3ds":{sectioncat:680,pagecat:681},"App Games":{sectioncat:680,pagecat:683},Arcade:{sectioncat:680,pagecat:680},"Computer & PC":{sectioncat:680,pagecat:684},"Pc Game":{sectioncat:680,pagecat:684},"Digital Game Downloads":{sectioncat:680,pagecat:680},"Digital Games":{sectioncat:680,pagecat:680},"Nintendo Switch":{sectioncat:680,pagecat:681},PS3:{sectioncat:680,pagecat:681},"Ps3 Game":{sectioncat:680,pagecat:681},PS4:{sectioncat:680,pagecat:681},"Ps4 Deals":{sectioncat:680,pagecat:681},PS5:{sectioncat:680,pagecat:681},"Ps5 Deals":{sectioncat:680,pagecat:681},"VR (Virtual Reality) Headsets, Games & Accessories":{sectioncat:680,pagecat:639},"Virtual Reality":{sectioncat:680,pagecat:639},"Video Game Accessories":{sectioncat:680,pagecat:680},"Game Accessories":{sectioncat:680,pagecat:680},"Video Game Consoles":{sectioncat:680,pagecat:681},Console:{sectioncat:680,pagecat:681},"Video Game Memberships":{sectioncat:680,pagecat:680},"Game Memberships":{sectioncat:680,pagecat:680},"Wii & Wii U":{sectioncat:680,pagecat:681},"Wii U Games":{sectioncat:680,pagecat:681},"Xbox 360":{sectioncat:680,pagecat:681},"Xbox Games":{sectioncat:680,pagecat:681},"Xbox One":{sectioncat:680,pagecat:681},"Xbox One Deals":{sectioncat:680,pagecat:681},"Xbox Series X and Series S":{sectioncat:680,pagecat:681},"Xbox Series X":{sectioncat:680,pagecat:681}},Zu=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ep=function(e,t){return function(n,i){t(n,i,e)}},tp=(Ac(Ku=class{constructor(e,t){this.gptCommonProvider=e,this.adUnitManager=t,this.adUnits=new Map,this.amazonAdUnits=new Array,this.units=this.adUnitManager.getAdUnits()}async init(){if(!await this.awaitGlobals())return!1;const e=this.getConf();return this.sg=e.signals,this.apsTag.init(e),document.addEventListener(Kl.DestroyAdsEvent,this.resetAds.bind(this)),!0}initAdUnit(e){if(!this.units.get(e.name))return;this.gptCommonProvider.initAdUnit(e),this.gptCommonProvider.setAdUnitProvider(e,this);const t={slotID:e.name,slotName:e.placement,sizes:e.sizes,dynamic:e.dynamic};this.adUnits.set(e.name,t),this.amazonAdUnits.push(t)}start(e,t=!1){const n=this.adUnits.get(e);n&&this.adUnits.has(e)&&this.gptCommonProvider.startBiddingProcess(n.slotID,t,(()=>{if(!Qu.amazonBidsRequested||t){const i=t||n.dynamic?[n]:this.amazonAdUnits;this.apsTag.fetchBids({slots:i,sg:this.sg},(()=>{this.gptCommonProvider.googlePublisherTag.pushCommand((()=>{this.apsTag.setDisplayBids(),Qu.amazonBidsReceived=!0,this.gptCommonProvider.bidsCompleteHandler(t,this,n.slotID)}))})),ku(`${e}: bids request sent to amazon...`,{slots:i}),Qu.amazonBidsRequested=!0}}))}getConf(){const e=fd.get("page")?.pageGroup,t=Yu;if("Deal Details"===e){const e=fd.get("product")?.category.split("|")[0].trim();this.handleCaseExtraSignalsConfig(e)}else if("category"===e){const e=fd.get("page")?.pageName.split("/");let t=e[e.length-2].trim();t=this.cleanCategoryName(t),this.handleCaseExtraSignalsConfig(t)}return t}cleanCategoryName(e){if(-1===e.indexOf("-"))return e.charAt(0).toUpperCase()+e.slice(1);{let t=e.split("-");return t=t.map((e=>e.charAt(0).toUpperCase()+e.slice(1))),t.join(" ")}}handleCaseExtraSignalsConfig(e){e&&Xu[e]&&this.addExtraSignalsConfig(this.getExtraSignalsConfig(e))}addExtraSignalsConfig(e){const t={sectioncat:[e.sectioncat.toString()],pagecat:[e.pagecat.toString()]};Object.assign(Yu.signals.ortb2.site,t)}getExtraSignalsConfig(e){return Xu[e]}unload(e){}destroy(e){}async awaitGlobals(){if(!this.apsTag)try{this.apsTag=await ed("apstag",window,80)}catch(e){return Td.error("Unable to initialize window.apstag",e),!1}return!0}resetAds(){this.adUnits.clear(),this.amazonAdUnits=[]}},"AmazonProviderAdapter"),Ku);tp=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),ep(0,bc(Gu)),ep(1,bc("AdUnitManager")),Zu("design:type",Function),Zu("design:paramtypes",[void 0===Qu?Object:Qu,void 0===nu?Object:nu])],tp);var np,ip={useBidCache:!0,enableTIDs:!0,disableAjaxTimeout:!0,userSync:{filterSettings:{iframe:{filter:"include",bidders:["openx","criteo","ix","appnexus","pubmatic","triplelift"]}},syncsPerBidder:50,iframeEnabled:!0,syncDelay:3e3,syncEnabled:!0,pixelEnabled:!0,userIds:[{name:"identityLink",params:{pid:"101"},storage:{type:"html5",name:"idl_env",expires:15,refreshInSeconds:1800}},{name:"id5Id",params:{partner:913,pd:(()=>{if("undefined"==typeof window)return"";const e=window.dataLayer?.visitor?.emailHashes??null;return null!==e&&Array.isArray(e)&&e.length>=3?`1-${e[2]}`:""})()},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}]},maxRequestsPerOrigin:4,consentManagement:{usp:{cmpApi:"iab",timeout:8e3}},sizeConfig:[{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_300x250"],sizesSupported:[[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_728x90"],sizesSupported:[[728,90]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_shield_160x600"],sizesSupported:[[160,600]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_300x250_300x600"],sizesSupported:[[300,250],[300,600]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_shield_728x90"],sizesSupported:[[728,90]]},{mediaQuery:"(min-width: 0px)",labels:["mweb_320x50_300x250_300x100"],sizesSupported:[[320,50],[300,250],[300,100]]},{mediaQuery:"(min-width: 0px)",labels:["mweb_320x50"],sizesSupported:[[320,50]]},{mediaQuery:"(min-width: 0px)",labels:["sharethrough"],sizesSupported:[[0,0]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_160x600"],sizesSupported:[[160,600]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_160x600"],sizesSupported:[[160,600]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_shield_300x250"],sizesSupported:[[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_728x90_970x250_468x60"],sizesSupported:[[728,90],[970,250],[468,60]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_728x90_970x250"],sizesSupported:[[728,90],[970,250]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_shield_160x600"],sizesSupported:[[160,600]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_shield_728x90"],sizesSupported:[[728,90]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_728x90"],sizesSupported:[[728,90]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_300x250"],sizesSupported:[[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["classic_desktop_300x600_300x250"],sizesSupported:[[300,600],[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_160x600_300x250_300x600"],sizesSupported:[[160,600],[300,250],[300,600]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_728x90_468x60"],sizesSupported:[[728,90],[468,60]]},{mediaQuery:"(min-width: 0px)",labels:["mweb_320x50_300x250"],sizesSupported:[[320,50],[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_728x90_970x250"],sizesSupported:[[728,90],[970,250]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_shield_300x250"],sizesSupported:[[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_728x90_970x250_468x60"],sizesSupported:[[728,90],[970,250],[468,60]]},{mediaQuery:"(min-width: 0px)",labels:["redesign_desktop_300x600_300x250"],sizesSupported:[[300,600],[300,250]]},{mediaQuery:"(min-width: 0px)",labels:["mweb_300x250"],sizesSupported:[[300,250]]}],timeoutBuffer:400,priceGranularity:{buckets:[{max:3,cap:"False",increment:.01,min:0},{max:8,cap:"False",increment:.05,min:3},{max:50,cap:"False",increment:.5,min:8},{max:100,cap:"True",increment:1,min:50}],precision:"2"}},rp=[{provider:"atsAnalytics",options:{pid:"101",host:"https://analytics.rlcdn.com"}}],ap={standard:{storageAllowed:!0}},op=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},sp=function(e,t){return function(n,i){t(n,i,e)}},cp=(Ac(np=class{constructor(e,t){this.gptCommonProvider=e,this.adUnitManager=t,this.PREBID_TIMEOUT=1500,this.adUnits=new Map,this.prebidAdUnits=new Array,this.adUnitCodes=new Array,this.units=this.adUnitManager.getAdUnits()}async init(){return!!await this.awaitGlobals()&&(this.pbjs.que.push((()=>{this.pbjs.setConfig(ip),this.pbjs.enableAnalytics(rp),this.pbjs.bidderSettings=ap})),document.addEventListener(Kl.DestroyAdsEvent,this.resetAds.bind(this)),!0)}initAdUnit(e,t){if(!this.units.get(e.name))return;this.gptCommonProvider.initAdUnit(e),this.gptCommonProvider.setAdUnitProvider(e,this);const n={code:e.placement,mediaTypes:t.mediaTypes,bids:t.bids,dynamic:e.dynamic};this.adUnits.set(e.name,n),t.bids&&!this.prebidAdUnits.some((e=>e.code===n.code))&&(this.prebidAdUnits.push(n),this.adUnitCodes.push(e.placement))}start(e,t=!1){const n=this.adUnits.get(e);n&&this.adUnits.has(e)&&this.gptCommonProvider.startBiddingProcess(e,t,(()=>{this.pbjs.que.push((()=>{if(!Qu.prebidBidsRequested||t){t||n.dynamic?n.dynamic&&this.pbjs.addAdUnits(this.prebidAdUnits.find((e=>e.code===n.code))):this.pbjs.addAdUnits(this.prebidAdUnits);const i=t||n.dynamic?[n.code]:this.adUnitCodes;this.pbjs.requestBids({adUnitCodes:i,bidsBackHandler:()=>{this.gptCommonProvider.googlePublisherTag.pushCommand((()=>{this.pbjs.setTargetingForGPTAsync(),Qu.prebidBidsReceived=!0,this.gptCommonProvider.bidsCompleteHandler(t,this,e)}))},timeout:this.PREBID_TIMEOUT}),ku(`${e}: bids request sent to prebid`,{adUnitCodes:i}),Qu.prebidBidsRequested=!0}}))}))}unload(e){}destroy(e){}async awaitGlobals(){if(!this.pbjs)try{await ed("pbjs",window,80),this.pbjs=window.pbjs}catch(e){return Td.error("Unable to initialize window.pbjs",e),!1}return!0}resetAds(){this.pbjs.removeAdUnit(),this.adUnits.clear(),this.prebidAdUnits=[],this.adUnitCodes=[]}},"PrebidProviderAdapter"),np);cp=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}([yc(),sp(0,bc(Gu)),sp(1,bc("AdUnitManager")),op("design:type",Function),op("design:paramtypes",[void 0===Qu?Object:Qu,void 0===nu?Object:nu])],cp),Ac((()=>{Uu.bind("AmazonProviderAdapter").to(tp).inSingletonScope(),Uu.bind("PrebidProviderAdapter").to(cp).inSingletonScope(),Uu.bind(Gu).to(Qu).inSingletonScope(),Uu.bind("CcpaPluginAdapter").to(Hu)}),"bindProvidersAndPlugins")();var lp=Ac((async(e,t,n)=>{n?.beforeInitCallback?.();const i=Uu.get(Gu),r=qd.loadConfig(),a=Uu.get("MetricsReporter");await i.init(!0,t.envValue,t.segments),r.ads.forEach((e=>{i.initAdUnit(e)})),e.init(),a.init(t.csrfToken),n?.afterInitCallback?.()}),"startAds"),dp=Ac((e=>{e?.beforeInitCallback?.();const t=Uu.get("AdEventManager");try{let{pageGroup:e}=fd.get("page");const{pageName:n}=fd.get("page");"Forums:ForumList"===n?e="forumIndex":n.includes("Forums:The Deals:")&&(e="forumDisplay"),t.registerPageName(e)}catch(e){Td.error("Unable to initialize DataLayer",e)}const n=Uu.get("AdController");e?.afterInitCallback?.(),document.addEventListener(Kl.AdStackConfigurationData,(e=>{const t=e.detail;if(t.refreshStrategy){Uu.get("AdRefreshManager").setRefreshStrategy(t.refreshStrategy)}lp(n,t)})),document.dispatchEvent(new Event(Kl.AdLoaderReadiness)),pp(),hp()}),"init"),up=Ac((()=>{const e=qd.loadConfig();Uu.get("AdUnitManager").init(e),Object.values(e.ads).forEach((e=>{e.providers&&Object.entries(e.providers).forEach((([t,n])=>{const i=Uu.get(t);i&&i.initAdUnit(e,n)}))})),Object.values(e.ads).forEach((e=>{e.providers&&Object.entries(e.providers).forEach((([t])=>{const n=Uu.get(t);n&&n.start(e.name,!1)}))}))}),"reinitializeAds"),pp=Ac((()=>{document.addEventListener("slickdeals:core:mobileWebTabSwitch",(()=>{const e=new CustomEvent(Kl.DestroyAdsEvent,{bubbles:!0});document.dispatchEvent(e),up()}))}),"initAdsOnTabNavigation"),hp=Ac((()=>{document.addEventListener("slickdeals:core:dynamicAdUnit",(e=>{const t=e.detail,n=qd.loadConfig(),i=new CustomEvent("slickdeals:ads:dynamicAdEvent",{bubbles:!0,detail:{id:t.id,config:n.ads.find((e=>e.name===t.id))}}),r=document.getElementById(t.id)?.parentElement;r&&r.id!==t.id&&!r.dataset.adContainerId&&(r.dataset.adContainerId=t.id),r?.dispatchEvent(i)}))}),"initDynamicAds"),fp=Ac((()=>{"Mobile Web"===fd.get("page").layout?s.domready.then((()=>dp())):dp()}),"initAdStack"),gp=Ac((()=>({initAdStack:fp})),"useAdsCore");let mp;class yp{constructor(){this.initializeAdRefreshOnUpscroll=()=>{var e;window.addEventListener("scroll",(()=>{this.isUpscroll=document.body.getBoundingClientRect().top>this.scrollPosition,this.scrollPosition=document.body.getBoundingClientRect().top})),e=()=>{this.isUpscroll&&document.dispatchEvent(new Event(Kl.UserInitiateRefresh))},"onscrollend"in window?document.onscrollend=e:document.onscroll=()=>{clearTimeout(mp),mp=setTimeout(e,100)}},this.isUpscroll=!1,this.scrollPosition=0}}for(var vp,bp=[],wp=0;wp<256;++wp)bp.push((wp+256).toString(16).slice(1));var Sp=new Uint8Array(16);function Ap(){if(!vp&&!(vp="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vp(Sp)}var _p={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ep(e,t,n){if(_p.randomUUID&&!t&&!e)return _p.randomUUID();var i=(e=e||{}).random||(e.rng||Ap)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return function(e,t=0){return(bp[e[t+0]]+bp[e[t+1]]+bp[e[t+2]]+bp[e[t+3]]+"-"+bp[e[t+4]]+bp[e[t+5]]+"-"+bp[e[t+6]]+bp[e[t+7]]+"-"+bp[e[t+8]]+bp[e[t+9]]+"-"+bp[e[t+10]]+bp[e[t+11]]+bp[e[t+12]]+bp[e[t+13]]+bp[e[t+14]]+bp[e[t+15]]).toLowerCase()}(i)}function Cp(e){(class{clientData={priorEventId:"",clientUuid:"",anonymousUuid:"",sessionUuid:"",userId:0,device:{deviceType:"",experience:"",userAgent:""}};eventQueue=[];static getInstance(){return window.sdEventTracker??=new this}init({client:e}){return this.initState(e),this.initEventQueue(),this.scrubAndReplaceCurrentUrl(e.url),this.initClickParamInjector(),this}getPriorEventId(){return this.clientData.priorEventId}initState({dataLayer:e,url:t,device:n}){const{footStepEventId:i,clientUuid:r,anonymousUuid:a,sessionUuid:o,userId:s,experience:c,deviceType:l}=function({reporting:e,visitor:t,traffic:n}){return{footStepEventId:e.footStepEventId,clientUuid:e.clientID,anonymousUuid:e.auuid,sessionUuid:e.sessionID,userId:t.userId,experience:t.experience,deviceType:n.deviceSegment.length>0?n.deviceSegment[0].toUpperCase()+n.deviceSegment.slice(1):"Unknown"}}(e),{priorEventId:d}=function(e){return{priorEventId:new URL(e,"https://event-tracker.slickdeals.net").searchParams.get("peid")}}(t);this.clientData.priorEventId=i||d||"",this.clientData.clientUuid=r,this.clientData.anonymousUuid=a,this.clientData.sessionUuid=o,this.clientData.userId=s,this.clientData.device.deviceType=l,this.clientData.device.experience=c,this.clientData.device.userAgent=n.userAgent}initEventQueue(){this.eventQueue.push=(...e)=>(this.processQueue(e),0),this.processQueue(this.eventQueue)}scrubAndReplaceCurrentUrl(e){const t=new URL(e);t.searchParams.delete("peid"),window.history.replaceState(void 0,"",t)}injectPriorEventUuid(e){if(e.target instanceof HTMLAnchorElement){const t=e.target;if(t.href&&!t.getAttribute("href")?.startsWith("javascript")&&!t.getAttribute("href")?.startsWith("#")){const e=new URL(t.href);e.hostname==location.hostname&&(e.searchParams.set("peid",this.clientData.priorEventId),t.href=e.toString())}}}initClickParamInjector(){document.body.addEventListener("mousedown",this.injectPriorEventUuid.bind(this)),document.body.addEventListener("touchstart",this.injectPriorEventUuid.bind(this))}processQueue(e){return this.sendEvents(e.map((e=>this.buildQueuedEvent(e))))}trackEvent(e){this.eventQueue.push({event:e,queuedAt:Date.now()})}async sendEvents(e){if(0!==e.length)try{await fetch("https://cwogzftn.usw.stape.io",{method:"POST",mode:"no-cors",body:JSON.stringify(e)})}catch(e){console.error(e)}}buildQueuedEvent({event:e,queuedAt:t}){const n=Ep(),i={..."function"==typeof e?e({clientData:this.clientData}):e,event_time:t,event_uuid:n,prior_event_uuid:this.clientData.priorEventId||n,client_uuid:this.clientData.clientUuid,anonymous_uuid:this.clientData.anonymousUuid,session_uuid:this.clientData.sessionUuid,attribution_uuid:"",user_id:this.clientData.userId,device:{device_type:this.clientData.device.deviceType,experience:this.clientData.device.experience,useragent:this.clientData.device.userAgent}};return this.clientData.priorEventId=n,i}}).getInstance().init(e)}const kp="Frontpage";gp().initAdStack(),Cp({client:{dataLayer:window.dataLayer,url:window.location.href,device:{userAgent:window.navigator.userAgent}}}),vo.subscribe(mo,Fr.QOS1,(e=>{const t=e.getJobKey().split("_");var n;n=t,Array.isArray(n)&&4===n.length&&n.every((e=>"string"==typeof e))&&(wo.push({threadId:t[0],page:t[1],moduleId:t[2],indexInModule:t[3]}),bo&&clearTimeout(bo),bo=setTimeout((()=>{wo=[]}),200))})),s.domready.then((()=>t(void 0,void 0,void 0,(function*(){const e=new h;(new yp).initializeAdRefreshOnUpscroll();[document.querySelector('[data-module-name*="Frontpage Slickdeals"]'),document.querySelector('[data-module-name="Deals You May Have Missed"]'),document.querySelector('[data-module-name*="Best Cashback Offers"]'),document.querySelector(`.${$a.Javascript}`)].forEach((t=>{null!==t&&e.setObserver(t)}))}))));export{kp as name};
//# sourceMappingURL=frontpage--desktop.es.d8a175e8.js.map

</script>

</body>
</html>
