import{a}from"../../chunk-AEEBJP5X.js";import{a as c}from"../../chunk-2QPOFOOR.js";import{d as l,e as h}from"../../chunk-2DNXUWM5.js";import"../../chunk-EDKSZH7L.js";var i=class d extends l{static attachTo(e){return new d(e)}constructor(e){super(e),this.name_="header",this.navOpenClass="nav-open",this.leftColFirst5=[]}start(){if(this.navTrigger=this.root_.querySelector(".new-header__navtrigger"),this.navTrigger&&this.navTrigger.addEventListener("click",()=>{a.callTealiumLink({businessEventType:"userAction",componentPath:"header.1.navigation1.burger",componentResultState:"open",componentName:"burger-menu-icon",elementTagName:"label",eventType:"mousedown",targetUrl:window.ui?.pageinfo?.home}),this.openNavigation()}),this.leftCol=document.querySelector(".left-col"),this.leftCol){let t=this.leftCol.dataset.teasers;if(t){let s=this.addExcludeIdsParam(t),n=this.leftCol.getElementsByClassName("teasers")[0];this.showLeftColumnTeasers(s,n)}}this.subscribe("newnav:closeNavLayer",()=>{this.closeNavigation()});let e=this.root_.querySelectorAll("[data-component-path]");a.bindTrackingClickHandler([...e])}addExcludeIdsParam(e){let t="",s=window.ui.duplication;return s?.usedContentIds&&(t=`${e.indexOf("?")>0?"&":"?"}excludeIds=${s.usedContentIds.join(",")}`),e+t}showLeftColumnTeasers(e,t){if(!e||!t){this.log("Not url or container");return}if(!c.matches("tablet"))return;let s="";h.getJSON(e,{}).then(n=>{this.log("Received leftcol teasers");let u=n.teasers.top;for(let r of u)if(s+=r.teaser,this.leftColFirst5.length<=4){let o=parseInt(r.teaserId)||0;o>0?this.leftColFirst5.push(o):this.publish("sentry:log",{error:"TeaserId is not a number. URL: "+e,module:"header"})}t.innerHTML=s,this.publish("general:newContent",t),this.publish("mod:dynInit",t)}).catch(n=>{this.logUnknownError(n,!0)}).finally(()=>{this.leftColumnReady()})}leftColumnReady(){try{this.subscribeOnce("infinitescroll:pingInfScroll",()=>{this.publish("newheader:leftColReady",this.leftColFirst5.join(","))}),this.publish("newheader:leftColReady",this.leftColFirst5.join(","))}catch(e){this.logUnknownError(e,!0)}}openNavigation(){document.body.classList.contains(this.navOpenClass)||(this.publish("nav:opening"),this.navTrigger?.tagName.toLowerCase())}closeNavigation(){document.body.classList.contains(this.navOpenClass)&&(document.body.classList.remove(this.navOpenClass),document.documentElement.classList.remove(this.navOpenClass))}};export{i as default};
//# sourceMappingURL=header.js.map
