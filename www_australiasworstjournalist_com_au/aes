!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker/index",[],t):"object"==typeof exports?exports.AES=t():e.AES=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var o=n(2),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o);function r(e,t){"function"==typeof requestIdleCallback?requestIdleCallback(e,{timeout:t||1e3}):setTimeout(e,0)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1?arguments[1]:void 0;return t=t||"",e?u(--e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t}function c(e,t){for(var n in t)e[n]=t[n];return e}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){return"undefined"!=typeof Promise&&e instanceof Promise}var f=function(e){var t=Object.prototype.toString.call(e);if("[object String]"===t&&e||"[object Number]"===t||"[object Boolean]"===t)return e;if("[object Object]"===t||"[object Array]"===t)try{return i()(e)}catch(e){}},l=function(e){var t={};for(var n in e){var o=e[n];void 0!==o&&(t[n]=f(o))}return t},d=function(e){var t=[];for(var n in e){var o=f(e[n]);void 0!==o&&t.push("".concat(n,"=").concat(encodeURIComponent(o)))}return t.join("&")};function p(e){return(e.requiredFields||[]).concat(["pid"]).some((function(t){return void 0===e[t]}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;"undefined"!=typeof console&&console.warn("[AES] 日志解析报错，埋点将被丢弃 => ".concat(e),t)}function h(e){this._queue=[],this._reqQueue=[],this._plugins={},this._subscribers={onConfigUpdated:[]},this._config={sdk_version:"3.3.4",pv_id:u(),timezone_offset:(new Date).getTimezoneOffset()},e&&(this._config=c(this._config,e))}h.prototype={constructor:h,_sendAll:function(){if(this._queue.length){var e,t=this._config.maxUrlLength||3e4,n=this._getSendConfig();try{e=this._processData(this._queue,n)}catch(e){}if(e&&e.length<t)return this._queue=[],void this.send(e);for(var o,i=[];this._queue.length;){i.push(this._queue.shift());try{o=this._processData(i,n)}catch(e){var r=i.pop();g(e.message,r);continue}if(o.length>t){i.length>1&&(this._queue.unshift(i.pop()),o=this._processData(i,n));break}}o&&this.send(o),this._queue.length&&this._sendAll()}},_send:function(e,t){if(!1===t){var n;try{n=this._processData([e])}catch(t){g(t.message,e)}n&&this.send(n)}else this._queue.push(e),r(this._sendAll.bind(this))},_getSendConfig:function(){var e={},t=this._config;for(var n in t)"requiredFields"!==n&&"maxUrlLength"!==n&&"queueGlobalName"!==n&&"debug"!==n&&0!==n.indexOf("plugin")&&""!==t[n]&&null!==t[n]&&void 0!==t[n]&&(e[n]=f(t[n]));return e},_processData:function(e,t){t=t||this._getSendConfig();var n=d(t);return n+="&msg="+encodeURIComponent(e.map((function(e){return d(e)})).join("|"))},setConfig:function(e,t){var n=this,o={};void 0!==t?o[e]=t:o=e;var i=!function e(t,n){if(void 0===t||void 0===n)return!1;if(!a(t)||!a(n))return!1;for(var o in t)if(a(t[o])){if(!e(t[o],n[o]))return!1}else if(t[o]!==n[o])return!1;return!0}(o,this._config),r=function(){if(i){for(var e in o)a(o[e])?n._config[e]=c(n._config[e]||{},o[e]):n._config[e]=o[e];n._execSubscribe("onConfigUpdated",[o,n._config])}};this._reqQueue.length?(r(),p(this._config)||(this._reqQueue.forEach((function(e){n._send.apply(n,e)})),this._reqQueue=[])):(i&&this._sendAll(),r())},getConfig:function(e){return e?this._config[e]:this._config},updatePVID:function(){this.setConfig("pv_id",u())},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&(t.ts=t.ts||(new Date).getTime(),t.type=e,this._print("[AES] log",e,t),t=l(t),p(this._config)?this._reqQueue.push([t,n.combo]):this._send(t,n.combo))},before:function(e,t){var n=this;return function(){var o=arguments,i=t.apply(n,o);s(i)?i.then((function(t){e.apply(n,t||o)})):e.apply(n,i||o)}},after:function(e,t){var n=this;return function(){var o=arguments;e.apply(n,o),t.apply(n,o)}},use:function(e,t){var n=this;return"[object Array]"===Object.prototype.toString.call(e)?e.map((function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=e[0],o=e[1];return n._plugins[t]||(n._plugins[t]=new t(n,o))}return n._plugins[e]||(n._plugins[e]=new e(n))})):this._plugins[e]||(this._plugins[e]=new e(this,t))},_print:function(){this._config.debug&&"undefined"!=typeof console&&console.log.apply(console,arguments)},onConfigUpdated:function(e){this._subscribers.onConfigUpdated&&this._subscribers.onConfigUpdated.push(e)},_execSubscribe:function(e,t){this._subscribers[e]&&this._subscribers[e].forEach((function(e){e.apply(this,t)}))}};var _,v=h,y=function(){try{if(window.xr){var e=Array.from(xr.global.recordingContexts.keys());if(e.length>0){var t=xr.global.recordingContexts.get(e[0]);if(t.appKey&&t.recordingId&&t.isRecording)return{appKey:t.appKey,recordingId:t.recordingId}}}}catch(e){}},b=location.href.indexOf("aes_debug")>-1;function m(e){var t=this;this._offlineQueue=[];var n=function(){if(window.goldlog&&goldlog.spm_ab)return goldlog.spm_ab;var e,t=document.querySelector('meta[name="spm-id"]')||document.querySelector('meta[name="data-spm"]');if(t&&(e=t.content)&&-1!==e.indexOf("."))return e.split(".");var n=document.body&&document.body.getAttribute("data-spm");return e&&n?[e,n]:[]}(),o={title:document.title,spm_a:n[0],spm_b:n[1],hash:location.hash,dpi:window.devicePixelRatio,sr:"".concat(window.screen.width,"x").concat(window.screen.height),platform:"web",language:navigator.language,debug:b,queueGlobalName:"AES_QUEUE"},i=document.querySelector('meta[name="aes-config"]');if(i)try{var u=i.getAttribute("content");u&&u.split("&").forEach((function(e){var t=e.split("="),n=t[0],i=decodeURIComponent(t[1]);if(-1!==n.indexOf(".")){var r=n.split(".")[0],u=n.split(".")[1];o[r]||(o[r]={}),o[r][u]=i}else o[n]=i}))}catch(e){}window.AES_CONFIG&&(o=c(o,AES_CONFIG)),e&&(o=c(o,e)),v.call(this,o),window.addEventListener("hashchange",(function(){t.setConfig("hash",location.hash)}));var a=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(a){var s=function(){t.setConfig({downlink:a.downlink,net_type:a.effectiveType}),navigator.onLine&&t._offlineQueue.length&&(t._offlineQueue.forEach((function(e){r((function(){t.send(e)}))})),t._offlineQueue=[])};s(),a.addEventListener("change",s)}try{var f=function(){var e=document.querySelector("title");e&&new MutationObserver((function(){t.setConfig("title",document.title)})).observe(e,{childList:!0,characterData:!0,subtree:!0})};document.querySelector("title")?f():document.addEventListener("DOMContentLoaded",f)}catch(e){}var l=o.queueGlobalName;"[object Array]"===Object.prototype.toString.call(window[l])?window[l].forEach((function(e){"function"==typeof e?e(t):t[e.action].apply(t,e.arguments)})):window[l]=[];var d=window[l].push;window[l].push=function(e){"function"==typeof e?e(t):t[e.action].apply(t,e.arguments),Array.prototype.push!==d&&d(e)}}m.prototype=((_=function(){}).prototype=v.prototype,new _),m.prototype.constructor=m,m.prototype.log=function(){var e;if(window.goldlog){var t=goldlog.spm_ab;t&&(this.getConfig("spm_a")!==t[0]&&((e||(e={})).spm_a=t[0]),this.getConfig("spm_b")!==t[1]&&((e||(e={})).spm_b=t[1]))}var n=location.href;n!==this.getConfig("origin_url")&&(e||(e={}),e.origin_url=location.href);var o=y();if(o){var i=o.appKey+","+o.recordingId;this.getConfig("xreplay_id")!==i&&((e||(e={})).xreplay_id=i)}e&&this.setConfig(e),v.prototype.log.apply(this,arguments)},m.prototype.send=function(e){if(navigator.onLine){var t,n=["/aes.1.1","EXP",e,"POST"];null!==(t=window.goldlog)&&void 0!==t&&t.record?(goldlog.record.apply(goldlog,n),this._print("[AES] send",n)):(window.goldlog_queue||(window.goldlog_queue=[]),goldlog_queue.push({action:"goldlog.record",arguments:n}),"undefined"!=typeof console&&console.warn("[AES] 未监测到Aplus SDK"))}else this._offlineQueue.length>500&&this._offlineQueue.shift(),this._offlineQueue.push(e)};t.default=m}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-pv/index",[],t):"object"==typeof exports?exports.AESPluginPV=t():e.AESPluginPV=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n in t)e[n]=t[n];return e}n.r(t);t.default=function(e,t){var n,r,i=null===(n=document)||void 0===n?void 0:n.referrer,u=!0,a=o(o({},e.getConfig("plugin_pv")),t),d=a.autoPV,l=void 0===d||d,f=a.autoLeave,c=void 0===f||f,p=a.enableHistory,s=a.enableHash,v=a.getPageId;function y(t){var n,o=location.href;null!==(n=t)&&void 0!==n&&n.page_id||!v||((t=t||{}).page_id=v(o)),t&&e.setConfig(t),u?u=!1:e.updatePVID(),e.log("pv",{p1:window!==window.parent,p2:i}),i=o}function g(){e.log("leave")}return l&&(y(),p?function(e){var t,n;window.addEventListener("popstate",e);var o=null===(t=window.history)||void 0===t?void 0:t.pushState;o&&(history.pushState=function(){o.apply(this,arguments),e()});var r=null===(n=window.history)||void 0===n?void 0:n.replaceState;r&&(history.replaceState=function(t,n,o){var i=null===history.state;r.apply(this,arguments),i&&0===(null==t?void 0:t.idx)&&!o||e()})}((function(){y()})):s&&(r=function(){y()},window.addEventListener("hashchange",r))),c&&window.addEventListener("beforeunload",g),{sendPV:y,sendLeave:g,switchPage:y}}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-jserror/index",[],n):"object"==typeof exports?exports.AESPluginJSError=n():e.AESPluginJSError=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e,n){for(var t in n)e[t]=n[t];return e}t.r(n);var o=/\n\s+at\s+/;function i(e){if(e)return e.length<10001?e:e.substr(0,9997)+"..."}function a(e,n,t,r,o){return"string"==typeof e?{message:e,filename:n,lineno:t,colno:r,stack:null==o?void 0:o.stack,name:null==o?void 0:o.name,type:"error"}:"object"==typeof e?{stack:(null===(i=e.error)||void 0===i?void 0:i.stack)||e.stack,message:e.message,lineno:e.lineno||e.line||e.lineNumber,colno:e.colno||e.column||e.columnNumber,name:(null===(a=e.error)||void 0===a?void 0:a.name)||e.name,type:e.type,filename:e.filename||e.fileName}:void 0;var i,a}function l(e){if("string"==typeof e.reason)return{message:e.reason,type:e.type};var n=e.reason;return n.type=e.type,n}function c(e){if("string"==typeof e)try{var n=e.split("\n").map((function(e){return e.replace(/^\s+(at)?\s*/,"")})).filter((function(e){return!!e}));if(e.match(o)&&(n=n.slice(1)),n.join("^").length<=1e5)return n.join("^");try{for(var t=!1;n.join("^").length>1e5;)if(2===n.length)n.splice(1,1),t=!0;else if(1===n.length){var r=n[0];n[0]="".concat(r.substr(0,997),"...").concat(r.substr(-1e3,1e3))}else n.splice(n.length-2),t=!0;if(n.length>1&&t){var i=n.pop();return n.join("^")+"^...^"+i}return 1===n.length&&t?n[0]+"^...":n.join("^")}catch(e){return n.join("^")}}catch(e){}}var s=function(e){var n;if("object"==typeof(n="unhandledrejection"===(null==e?void 0:e.type)?l.apply(null,arguments):a.apply(null,arguments))){n.filename||(n.filename=n.sourceURL||n.fileName),"number"!=typeof n.lineno&&(n.lineno=n.line||n.lineNumber,n.colno=n.column||n.columnNumber);try{if("string"==typeof n.stack&&("number"!=typeof n.lineno||"string"!=typeof n.filename)&&n.stack&&n.stack.match(o)){var t,r=null===(t=n.stack.split("\n").slice(1,2))||void 0===t?void 0:t[0];if(r){var s=r.match(/^\s+at\s+[^\(]+\(([^\)]+?):(\d+):(\d+)\)$/)||r.match(/^\s+at\s+(.+)?:(\d+):(\d+)$/);s&&(n.filename=s[1],n.lineno=s[2],n.colno=s[3])}}}catch(e){}try{if(!n.filename&&"string"==typeof n.stack){var u=n.stack.match(/@([^\n]+?):(\d+):(\d+)$/);u&&(n.filename=u[1])}}catch(e){}var f={lineno:n.lineno,colno:n.colno,filename:i(n.filename),message:n.message,stack:c(n.stack),error_type:n.name,error_code:n.type};return f}};var u=function(e){try{if("unhandledrejection"===e.type){var n=this._config.plugin_js_error_processPromiseRejectReason;if("function"==typeof n){var t=n(e.reason);if(!t)return}}}catch(e){}try{var r=arguments,o=s.apply(null,r);if("object"!=typeof o)return;var i=o.message,a=void 0===i?"":i,l=o.filename,c=o.lineno,u=o.colno,f=o.stack,p=o.error_type,d=o.error_code,m=this._config.ignoreList;if(m&&m.some((function(n){if("string"==typeof n)return n===a;if("function"==typeof n)try{return n(a,o,"object"==typeof e?e:r)}catch(e){}else if(n instanceof RegExp)return n.test(a)})))return;this._aes.log("js_error",{message:a,url:l,lineno:c,colno:u,stack:f,error_type:p,error_code:d})}catch(e){}};n.default=function(e,n){this._config=r(r({},e.getConfig("plugin_jserror")),n),this._aes=e;var t=u.bind(this);return!this._config.disable_error&&window.addEventListener("error",t),!this._config.disable_unhandled_rejection&&window.addEventListener("unhandledrejection",t),{sendError:t}}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-api/index",[],t):"object"==typeof exports?exports.AESPluginAPI=t():e.AESPluginAPI=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t,n){e.exports=!n(6)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=n(9)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(15),o=n(16),i=n(18),s=Object.defineProperty;t.f=n(0)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports=n(8)},function(e,t,n){var r=n(1),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){n(10);var r=n(1).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(11);r(r.S+r.F*!n(0),"Object",{defineProperty:n(5).f})},function(e,t,n){var r=n(4),o=n(1),i=n(12),s=n(14),a=n(20),u=function(e,t,n){var c,f,p,d=e&u.F,l=e&u.G,y=e&u.S,v=e&u.P,h=e&u.B,g=e&u.W,m=l?o:o[t]||(o[t]={}),b=m.prototype,w=l?r:y?r[t]:(r[t]||{}).prototype;for(c in l&&(n=t),n)(f=!d&&w&&void 0!==w[c])&&a(m,c)||(p=f?w[c]:n[c],m[c]=l&&"function"!=typeof w[c]?n[c]:h&&f?i(p,r):g&&w[c]==p?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):v&&"function"==typeof p?i(Function.call,p):p,v&&((m.virtual||(m.virtual={}))[c]=p,e&u.R&&b&&!b[c]&&s(b,c,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(13);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(5),o=n(19);e.exports=n(0)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(0)&&!n(6)((function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2),o=n(4).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";n.r(t);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if("string"==typeof e&&e)return e.length>t&&(e=e.substr(0,t-3)+"..."),e}var o=function(e,t,n){var o=e.url,i=e.success,s=e.msg,a=e.status,u=e.code,c=e.duration,f=e.traceId,p=e.params,d=e.body,l=e.response,y=e.headers,v=e.rtype,h=e.method,g=n.ignoreList,m=n.sendResponseOnSuccess;g&&g.some((function(t){if("string"==typeof t)return t===o;if("function"==typeof t)try{return t(o,e)}catch(e){}else if(t instanceof RegExp)return t.test(o)}))||t.log("api",{url:o,method:"string"==typeof h?h.toUpperCase():void 0,success:i,msg:r(s,200),status:a,code:u,duration:c,trace_id:f,params:p,body:r(d,1e4),response:!i||m?r(l,1e4):void 0,headers:y,rtype:v,plugin_version:"3.1.3"})};function i(e,t){return(void 0===t||t>=200&&t<300)&&(void 0!==e.success?!0===e.success||"true"===e.success:void 0!==e.isSuccess?!0===e.isSuccess||"true"===e.isSuccess:void 0!==e.isOk?!0===e.isOk||"true"===e.isOk:void 0!==e.ok?!0===e.ok||"true"===e.ok:isNaN(e.status)?!!isNaN(e.code)||200==e.code:200==e.status)}function s(e){return e.code||e.errorCode||e.errCode}function a(e){return e.msg||e.message||e.errMsg||e.errorMessage||e.errorMsg}function u(e,t){if(t=t.toUpperCase(),e&&("POST"===t||"PUT"===t)){if("string"==typeof e)return e;if(window.FormData&&e instanceof FormData){var n=[];return e.forEach((function(e,t){n.push("".concat(t,"=").concat("string"==typeof e?e:Object.prototype.toString.call(e)))})),n.join("&")}return window.URLSearchParams&&e instanceof URLSearchParams?e.toString():window.Request&&e instanceof Request?e.clone().text():Object.prototype.toString.call(e)}}function c(e,t,n,r){var o,u=e;if("string"==typeof u)try{u=JSON.parse(e)}catch(e){}if(o="[object Object]"===Object.prototype.toString.call(u)?{msg:a(u),code:s(u),success:i(u,t)}:{success:void 0===t||t>=200&&t<300},"function"==typeof r.parseResponse)try{var c=r.parseResponse(u,t,n)||{};for(var f in c)o[f]=c[f]}catch(e){}return o}function f(e){return!e||-1!==e.indexOf("api=")&&-1!==e.indexOf("v=")&&-1!==e.indexOf("jsv=")||-1!==e.indexOf(".mmstat.com")||e.match(/\.(js|css|png|jpg|gif|jpeg|webp|ico|svg)(\?.*)?$/)}function p(e){return"undefined"!=typeof Promise&&e instanceof Promise}function d(e,t){for(var n in t)e[n]=t[n];return e}function l(e){if(window.Headers&&e instanceof Headers){var t={};return e.forEach((function(e,n){t[n]=e})),t}if("[object Object]"===Object.prototype.toString.call(e))return e}function y(e,t){var n,r;if(t.originResponse)return e;if("jsonp"===t.method)return e.text();var o=null===(n=e.headers)||void 0===n||null===(r=n.get)||void 0===r?void 0:r.call(n,"content-type");return o&&-1===o.toLowerCase().indexOf("json")&&-1===o.toLowerCase().indexOf("text")?"[".concat(o,"]"):e.text()}var v=function(e,t){if(!("function"!=typeof window.fetch||window.fetch&&window.fetch.polyfill)){var n=window.fetch;window.fetch=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("HEAD"===i.method||"no-cors"===i.mode)return n.apply(window,arguments);var s="object"==typeof r?r.url||r.href:r;if(f(s))return n.apply(window,arguments);var a,v,h=s.split("?"),g=h[0],m=h[1],b=i.method||r.method||"GET";try{v=l(i.headers||r.headers)}catch(e){}try{p(a=u(i.body||r,b))&&a.then((function(e){a=e})).catch((function(){}))}catch(e){}var w=(new Date).getTime();return n.apply(window,arguments).then((function(n){try{if("[object Response]"!==Object.prototype.toString.call(n))return n;var r,s=(new Date).getTime()-w,u=n.clone?n.clone():n,f=u.status;u.headers.has("eagleeye-traceid")?r=u.headers.get("eagleeye-traceid"):u.headers.has("x-eagleeye-id")&&(r=u.headers.get("x-eagleeye-id"));var l=function(n){!1!==(u=c(n,f,{type:"fetch",params:m,url:g,body:i.body},t)).success&&t.disable_send_on_success||o(d({url:g,method:b,status:f,duration:s,traceId:r,params:m,headers:v,body:a,response:n,rtype:"fetch"},u),e,t)},h=y(u,i);p(h)?h.then(l).catch((function(){})):l(h)}catch(e){}return n}),(function(n){var r=(new Date).getTime()-w,i=c("",-1,{type:"fetch",params:m,url:g},t);throw o(d({url:g,method:b,success:!1,msg:n.message,status:-1,duration:r,params:m,body:a,headers:v,rtype:"fetch"},i),e,t),n}))}}};var h=function(e,t){if("function"==typeof window.XMLHttpRequest&&window.addEventListener){var n=window.XMLHttpRequest,r=n.prototype,i=r.open,s=r.send,a=r.setRequestHeader,p="_aesApi".concat(Math.random());n.prototype.open=function(e,t){i.apply(this,arguments),this[p]={method:e,url:t}},n.prototype.setRequestHeader=function(e,t){a.apply(this,arguments),this[p]&&(this[p].headers||(this[p].headers={}),this[p].headers[e]=t)},n.prototype.send=function(n){if(s.apply(this,arguments),this[p])try{var r=this[p],i=r.url,a=r.method,l=void 0===a?"GET":a,y=r.headers;delete this[p];var v=i?i.href||i:"";if(f(v))return;var h,g=v.split("?"),m=this,b=0,w=g[1],x=(new Date).getTime();i=g[0];try{h=u(n,l)}catch(e){}var j=function(){var r,s,a;b=m.status||b;var u,f=(new Date).getTime()-x;try{var p=m.getAllResponseHeaders();-1!==p.indexOf("eagleeye-traceid")?u=m.getResponseHeader("eagleeye-traceid"):-1!==p.indexOf("x-eagleeye-id")&&(u=m.getResponseHeader("x-eagleeye-id"))}catch(e){}var v=function(r){var s=c(r||"",b,{type:"xhr",params:w,url:i,body:n},t);s.success&&t.disable_send_on_success||o(d({url:i,method:l,status:b,duration:f,traceId:u,params:w,headers:y,body:h,response:r,rtype:"xhr"},s),e,t)},g=m.responseType||"text";"text"===g||"json"===g?v(m.response):"blob"!==g||"application/json"!==(null===(r=m.response)||void 0===r?void 0:r.type)&&"text/plain"!==(null===(s=m.response)||void 0===s?void 0:s.type)||null===(a=m.response)||void 0===a||!a.text?v(m.response?Object.prototype.toString.call(m.response):void 0):m.response.text().then(v).catch((function(){}))};void 0!==m.onloadend?(m.addEventListener("abort",(function(e){b=-2})),m.addEventListener("timeout",(function(e){b=-3})),m.addEventListener("loadend",j)):m.addEventListener("readystatechange",(function(){4===m.readyState&&j()}))}catch(e){}}}},g=n(7),m=n.n(g),b=n(3),w=n.n(b);function x(e,t,n,r,i){try{var s=t.ret;s instanceof Array&&(s=s.join(","));var a={};if("function"==typeof i.parseResponse)try{a=i.parseResponse(t,"",{type:"mtop",params:e.data,url:e.api})||{}}catch(e){}var u=void 0===a.success?-1===s.indexOf("SUCCESS"):!a.success;if(u||!i.disable_send_on_success){var c,f=t.responseHeaders,p=null===(c=t.stat)||void 0===c?void 0:c.eagleEyeTraceId;if(!p&&f){var l,y=null===(l=f.match)||void 0===l?void 0:l.call(f,/(x-eagleeye-id|eagleeye-traceid):\s*([a-z0-9]+)/);y&&(p=y[2])}var v,h,g=t.responseStatusCode||t.code;if(!g&&f){var b,w=null===(b=f.match)||void 0===b?void 0:b.call(f,/status:\s*(\d+)/);w&&(g=w[1])}if(s){var x=s.split("::");v=x[0],h=x[1]}o(d({url:e.api,success:!u,method:e.type||"GET",msg:h,status:g,code:v,duration:n,traceId:p,params:e.data,response:m()(t),rtype:"mtop"},a),r,i)}}catch(e){console.warn("[AES] plugin-api",e)}}var j=function(e,t){return function(n,r,o){var i=(new Date).getTime();return r||o?e(n,(function(e){t(n,e,(new Date).getTime()-i),r&&r(e)}),(function(e){t(n,e,(new Date).getTime()-i),o&&o(e)})):e(n).then((function(e){return t(n,e,(new Date).getTime()-i),e}),(function(e){throw t(n,e,(new Date).getTime()-i),e}))}},O=[];function _(e,t){var n;O.push([e,t]),window.lib||(window.lib={});var r,o=function(t){if(t.__hooked__)return t;var n=j(t,(function(t,n,r){O.forEach((function(o){e._plugin_api_hookMR||x(t,n,r,o[0],o[1])}))}));return n.__hooked__=!0,n};null!==(n=lib.mtop)&&void 0!==n&&n.request?lib.mtop.request=o(lib.mtop.request):w()(lib,"mtop",{configurable:!0,set:function(e){var t;(r=e).request?r.request=o(r.request):w()(r,"request",{configurable:!0,set:function(e){t=o(e)},get:function(){return t}})},get:function(){return r}})}function S(e,t,n){return t._plugin_api_hookMR=1,j(e,(function(e,r,o){x(e,r,o,t,n)}))}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t=d(d({},e.getConfig("plugin_api")),t),r=n.disableHook,i=n.disableHookFetch,s=n.disableHookXHR,a=n.disableHookMtop;return!0!==r&&(!0!==i&&v(e,t),!0!==s&&h(e,t),!0!==a&&_(e,t)),{sendApi:function(n){o(n,e,t)},hookMtopRequest:function(n){return S(n,e,t)}}}}]).default}));!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-resourceError/index",[],r):"object"==typeof exports?exports.AESPluginResourceError=r():e.AESPluginResourceError=r()}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return a}));var n,o=function(e){for(var r=[],t=window,n=document,o=0,i=e.length;o<i;o++){var u=e[o];if(u===t||u===n)break;if(u.id){r.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?r.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):r.push(u.nodeName)}return r.reverse().join(" ")},i=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return o(e);for(var r=[],t=e;t;)r.push(t),t=t.parentNode;return o(r)},u=function(e){return e.filter((function(e){return!["xmlhttprequest","fetch"].includes(e.initiatorType)&&"number"==typeof e.responseStatus&&e.responseStatus>200})).map((function(e){return{src:e.name,type:e.initiatorType,status:e.responseStatus}}))},s=function(){var e;return null!==(e=window.performance)&&void 0!==e&&e.getEntriesByType?u(performance.getEntriesByType("resource")):[]},c=function(e){var r;if(null!==(r=window.performance)&&void 0!==r&&r.getEntriesByName){var t=performance.getEntriesByName(e)[0];if(t&&"number"==typeof t.responseStatus&&0!==t.responseStatus)return t.responseStatus}},f=(n=document.createElement("a"),function(e){return n.href=e,n.href});function a(e){var r,t,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=a.ignoreList||(null===(r=e.getConfig("plugin_resourceError"))||void 0===r?void 0:r.ignoreList)||[];l.push((function(e){return!e||-1!==e.indexOf(".mmstat.com")}));var p=function(r){var t,n;e.log("resource_error",{p1:null===(t=r.src)||void 0===t?void 0:t.substring(0,1e4),p2:r.type,p3:r.status,p4:r.src!==r.originSrc?null===(n=r.originSrc)||void 0===n?void 0:n.substring(0,1e4):void 0,p5:r.selector})},d=function(e,r){return!l.some((function(t){if("string"==typeof t)return t===e;if("function"==typeof t)try{return t(e,r)}catch(e){var n,o;null===(n=window.console)||void 0===n||null===(o=n.warn)||void 0===o||o.call(n,"[AES] check ignore resource failed",e)}else if(t instanceof RegExp)return t.test(e)}))};if(s().forEach((function(e){d(e.src)&&p(e)})),window.addEventListener("error",(function(e){if(!(e instanceof ErrorEvent)){var r,t,n=e.target,o=n.src||n.href,u=(null==n?void 0:n.getAttribute("src"))||(null==n?void 0:n.getAttribute("href"));"undefined"!=typeof SVGAnimatedString&&o instanceof SVGAnimatedString&&(o=f(u)),d(o,e)&&p({src:o,originSrc:u,type:null===(r=n.tagName)||void 0===r?void 0:r.toLowerCase(),selector:i(e.path||(null===(t=e.composedPath)||void 0===t?void 0:t.call(e))||n),status:c(o)})}}),!0),null!==(t=window.PerformanceObserver)&&void 0!==t&&null!==(n=t.supportedEntryTypes)&&void 0!==n&&null!==(o=n.includes)&&void 0!==o&&o.call(n,"resource")){var v=new PerformanceObserver((function(e){u(e.getEntries().filter((function(e){return"iframe"===e.initiatorType&&d(e.name)}))).forEach(p)}));v.observe({entryTypes:["resource"]})}return{sendError:p}}}]).default}));!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-perf/index",[],n):"object"==typeof exports?exports.AESPluginPerf=n():t.AESPluginPerf=n()}(window,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=84)}([function(t,n,e){var r=e(25)("wks"),o=e(17),i=e(2).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,n){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n,e){var r=e(10),o=e(33),i=e(20),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){t.exports=!e(12)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(3),o=e(13);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(36),o=e(22);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=e(48)},function(t,n,e){var r=e(2),o=e(1),i=e(32),u=e(6),a=e(5),c=function(t,n,e){var f,s,l,p=t&c.F,v=t&c.G,d=t&c.S,y=t&c.P,m=t&c.B,h=t&c.W,g=v?o:o[n]||(o[n]={}),b=g.prototype,w=v?r:d?r[n]:(r[n]||{}).prototype;for(f in v&&(e=n),e)(s=!p&&w&&void 0!==w[f])&&a(g,f)||(l=s?w[f]:e[f],g[f]=v&&"function"!=typeof w[f]?e[f]:m&&s?i(l,r):h&&w[f]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((g.virtual||(g.virtual={}))[f]=l,t&c.R&&b&&!b[f]&&u(b,f,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){t.exports={}},function(t,n,e){var r=e(35),o=e(26);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n){t.exports=!0},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(22);t.exports=function(t){return Object(r(t))}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(25)("keys"),o=e(17);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o=e(2),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,n){return i[t]||(i[t]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:e(16)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(3).f,o=e(5),i=e(0)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){n.f=e(0)},function(t,n,e){var r=e(2),o=e(1),i=e(16),u=e(29),a=e(3).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||a(n,t,{value:u.f(t)})}},function(t,n,e){t.exports=e(54)},function(t,n,e){var r=e(50);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){t.exports=!e(4)&&!e(12)((function(){return 7!=Object.defineProperty(e(34)("div"),"a",{get:function(){return 7}}).a}))},function(t,n,e){var r=e(11),o=e(2).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){var r=e(5),o=e(7),i=e(52)(!1),u=e(24)("IE_PROTO");t.exports=function(t,n){var e,a=o(t),c=0,f=[];for(e in a)e!=u&&r(a,e)&&f.push(e);for(;n.length>c;)r(a,e=n[c++])&&(~i(f,e)||f.push(e));return f}},function(t,n,e){var r=e(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(56)(!0);e(39)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})}))},function(t,n,e){"use strict";var r=e(16),o=e(9),i=e(40),u=e(6),a=e(14),c=e(57),f=e(28),s=e(60),l=e(0)("iterator"),p=!([].keys&&"next"in[].keys()),v=function(){return this};t.exports=function(t,n,e,d,y,m,h){c(e,n,d);var g,b,w,S=function(t){if(!p&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},x=n+" Iterator",E="values"==y,T=!1,O=t.prototype,_=O[l]||O["@@iterator"]||y&&O[y],L=_||S(y),P=y?E?S("entries"):L:void 0,k="Array"==n&&O.entries||_;if(k&&(w=s(k.call(new t)))!==Object.prototype&&w.next&&(f(w,x,!0),r||"function"==typeof w[l]||u(w,l,v)),E&&_&&"values"!==_.name&&(T=!0,L=function(){return _.call(this)}),r&&!h||!p&&!T&&O[l]||u(O,l,L),a[n]=L,a[x]=v,y)if(g={values:E?L:S("values"),keys:m?L:S("keys"),entries:P},h)for(b in g)b in O||i(O,b,g[b]);else o(o.P+o.F*(p||T),n,g);return g}},function(t,n,e){t.exports=e(6)},function(t,n,e){var r=e(10),o=e(58),i=e(26),u=e(24)("IE_PROTO"),a=function(){},c=function(){var t,n=e(34)("iframe"),r=i.length;for(n.style.display="none",e(59).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,n){var e;return null!==t?(a.prototype=r(t),e=new a,a.prototype=null,e[u]=t):e=c(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(21);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){var r=e(35),o=e(26).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n,e){t.exports=e(55)},function(t,n,e){t.exports=e(68)},function(t,n,e){t.exports=e(77)},function(t,n,e){t.exports=e(82)},function(t,n,e){e(49),t.exports=e(1).Object.assign},function(t,n,e){var r=e(9);r(r.S+r.F,"Object",{assign:e(51)})},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,e){"use strict";var r=e(4),o=e(15),i=e(27),u=e(18),a=e(19),c=e(36),f=Object.assign;t.exports=!f||e(12)((function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach((function(t){n[t]=t})),7!=f({},t)[e]||Object.keys(f({},n)).join("")!=r}))?function(t,n){for(var e=a(t),f=arguments.length,s=1,l=i.f,p=u.f;f>s;)for(var v,d=c(arguments[s++]),y=l?o(d).concat(l(d)):o(d),m=y.length,h=0;m>h;)v=y[h++],r&&!p.call(d,v)||(e[v]=d[v]);return e}:f},function(t,n,e){var r=e(7),o=e(37),i=e(53);t.exports=function(t){return function(n,e,u){var a,c=r(n),f=o(c.length),s=i(u,f);if(t&&e!=e){for(;f>s;)if((a=c[s++])!=a)return!0}else for(;f>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return(t=r(t))<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(1),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,n,e){e(38),e(61),t.exports=e(1).Array.from},function(t,n,e){var r=e(23),o=e(22);t.exports=function(t){return function(n,e){var i,u,a=String(o(n)),c=r(e),f=a.length;return c<0||c>=f?t?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===f||(u=a.charCodeAt(c+1))<56320||u>57343?t?a.charAt(c):i:t?a.slice(c,c+2):u-56320+(i-55296<<10)+65536}}},function(t,n,e){"use strict";var r=e(41),o=e(13),i=e(28),u={};e(6)(u,e(0)("iterator"),(function(){return this})),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n,e){var r=e(3),o=e(10),i=e(15);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),a=u.length,c=0;a>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(2).document;t.exports=r&&r.documentElement},function(t,n,e){var r=e(5),o=e(19),i=e(24)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){"use strict";var r=e(32),o=e(9),i=e(19),u=e(62),a=e(63),c=e(37),f=e(64),s=e(65);o(o.S+o.F*!e(67)((function(t){Array.from(t)})),"Array",{from:function(t){var n,e,o,l,p=i(t),v="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,m=void 0!==y,h=0,g=s(p);if(m&&(y=r(y,d>2?arguments[2]:void 0,2)),null==g||v==Array&&a(g))for(e=new v(n=c(p.length));n>h;h++)f(e,h,m?y(p[h],h):p[h]);else for(l=g.call(p),e=new v;!(o=l.next()).done;h++)f(e,h,m?u(l,y,[o.value,h],!0):o.value);return e.length=h,e}})},function(t,n,e){var r=e(10);t.exports=function(t,n,e,o){try{return o?n(r(e)[0],e[1]):n(e)}catch(n){var i=t.return;throw void 0!==i&&r(i.call(t)),n}}},function(t,n,e){var r=e(14),o=e(0)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,n,e){"use strict";var r=e(3),o=e(13);t.exports=function(t,n,e){n in t?r.f(t,n,o(0,e)):t[n]=e}},function(t,n,e){var r=e(66),o=e(0)("iterator"),i=e(14);t.exports=e(1).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,n,e){var r=e(21),o=e(0)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var n,e,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?e:i?r(n):"Object"==(u=r(n))&&"function"==typeof n.callee?"Arguments":u}},function(t,n,e){var r=e(0)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var e=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:e=!0}},i[r]=function(){return u},t(i)}catch(t){}return e}},function(t,n,e){e(69),e(74),e(75),e(76),t.exports=e(1).Symbol},function(t,n,e){"use strict";var r=e(2),o=e(5),i=e(4),u=e(9),a=e(40),c=e(70).KEY,f=e(12),s=e(25),l=e(28),p=e(17),v=e(0),d=e(29),y=e(30),m=e(71),h=e(42),g=e(10),b=e(11),w=e(19),S=e(7),x=e(20),E=e(13),T=e(41),O=e(72),_=e(73),L=e(27),P=e(3),k=e(15),j=_.f,M=P.f,A=O.f,C=r.Symbol,N=r.JSON,R=N&&N.stringify,I=v("_hidden"),F=v("toPrimitive"),q={}.propertyIsEnumerable,H=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),z=Object.prototype,G="function"==typeof C&&!!L.f,J=r.QObject,V=!J||!J.prototype||!J.prototype.findChild,U=i&&f((function(){return 7!=T(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(t,n,e){var r=j(z,n);r&&delete z[n],M(t,n,e),r&&t!==z&&M(z,n,r)}:M,X=function(t){var n=D[t]=T(C.prototype);return n._k=t,n},K=G&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},B=function(t,n,e){return t===z&&B(W,n,e),g(t),n=x(n,!0),g(e),o(D,n)?(e.enumerable?(o(t,I)&&t[I][n]&&(t[I][n]=!1),e=T(e,{enumerable:E(0,!1)})):(o(t,I)||M(t,I,E(1,{})),t[I][n]=!0),U(t,n,e)):M(t,n,e)},Y=function(t,n){g(t);for(var e,r=m(n=S(n)),o=0,i=r.length;i>o;)B(t,e=r[o++],n[e]);return t},Q=function(t){var n=q.call(this,t=x(t,!0));return!(this===z&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,I)&&this[I][t])||n)},$=function(t,n){if(t=S(t),n=x(n,!0),t!==z||!o(D,n)||o(W,n)){var e=j(t,n);return!e||!o(D,n)||o(t,I)&&t[I][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=A(S(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==I||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===z,r=A(e?W:S(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(z,n)||i.push(D[n]);return i};G||(a((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===z&&n.call(W,e),o(this,I)&&o(this[I],t)&&(this[I][t]=!1),U(this,t,E(1,e))};return i&&V&&U(z,t,{configurable:!0,set:n}),X(t)}).prototype,"toString",(function(){return this._k})),_.f=$,P.f=B,e(43).f=O.f=Z,e(18).f=Q,L.f=tt,i&&!e(16)&&a(z,"propertyIsEnumerable",Q,!0),d.f=function(t){return X(v(t))}),u(u.G+u.W+u.F*!G,{Symbol:C});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)v(nt[et++]);for(var rt=k(v.store),ot=0;rt.length>ot;)y(rt[ot++]);u(u.S+u.F*!G,"Symbol",{for:function(t){return o(H,t+="")?H[t]:H[t]=C(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var n in H)if(H[n]===t)return n},useSetter:function(){V=!0},useSimple:function(){V=!1}}),u(u.S+u.F*!G,"Object",{create:function(t,n){return void 0===n?T(t):Y(T(t),n)},defineProperty:B,defineProperties:Y,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var it=f((function(){L.f(1)}));u(u.S+u.F*it,"Object",{getOwnPropertySymbols:function(t){return L.f(w(t))}}),N&&u(u.S+u.F*(!G||f((function(){var t=C();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))}))),"JSON",{stringify:function(t){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(e=n=r[1],(b(n)||void 0!==t)&&!K(t))return h(n)||(n=function(t,n){if("function"==typeof e&&(n=e.call(this,t,n)),!K(n))return n}),r[1]=n,R.apply(N,r)}}),C.prototype[F]||e(6)(C.prototype,F,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){var r=e(17)("meta"),o=e(11),i=e(5),u=e(3).f,a=0,c=Object.isExtensible||function(){return!0},f=!e(12)((function(){return c(Object.preventExtensions({}))})),s=function(t){u(t,r,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},getWeak:function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},onFreeze:function(t){return f&&l.NEED&&c(t)&&!i(t,r)&&s(t),t}}},function(t,n,e){var r=e(15),o=e(27),i=e(18);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,a=e(t),c=i.f,f=0;a.length>f;)c.call(t,u=a[f++])&&n.push(u);return n}},function(t,n,e){var r=e(7),o=e(43).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return u.slice()}}(t):o(r(t))}},function(t,n,e){var r=e(18),o=e(13),i=e(7),u=e(20),a=e(5),c=e(33),f=Object.getOwnPropertyDescriptor;n.f=e(4)?f:function(t,n){if(t=i(t),n=u(n,!0),c)try{return f(t,n)}catch(t){}if(a(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n){},function(t,n,e){e(30)("asyncIterator")},function(t,n,e){e(30)("observable")},function(t,n,e){e(38),e(78),t.exports=e(29).f("iterator")},function(t,n,e){e(79);for(var r=e(2),o=e(6),i=e(14),u=e(0)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var f=a[c],s=r[f],l=s&&s.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},function(t,n,e){"use strict";var r=e(80),o=e(81),i=e(14),u=e(7);t.exports=e(39)(Array,"Array",(function(t,n){this._t=u(t),this._i=0,this._k=n}),(function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):o(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){t.exports=function(){}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){e(83),t.exports=e(1).Array.isArray},function(t,n,e){var r=e(9);r(r.S,"Array",{isArray:e(42)})},function(t,n,e){"use strict";e.r(n);var r=e(8),o=e.n(r),i=e(31),u=e.n(i),a=function(t,n){var e=t.entryType,r=t.name,o=t.startTime,i=t.duration,u=t.detail,a=t.c1,c=t.c2,f=t.c3,s=t.c4,l=t.c5,p=t.c6,v=t.c7,d=t.c8,y=t.c9,m=t.c10;n.log("usertiming",{p1:o,p2:i,p3:e,p4:r,p5:u,c1:a,c2:c,c3:f,c4:s,c5:l,c6:p,c7:v,c8:d,c9:y,c10:m})},c=function(t,n,e){var r;n.log("elementtiming",{p1:t.startTime,p2:t.identifier,p3:t.name,p4:t.url,p5:null===(r=t.element)||void 0===r?void 0:r.tagName,p6:t.naturalHeight,p7:t.naturalWidth})},f=function(t,n,e){if("function"==typeof window.fetch&&e&&0!==e.length)try{var r=t.getConfig("pv_id"),o=t.getConfig("pid"),i={__topic__:"resourcetiming",__logs__:[{pid:o,name:r,resource:encodeURIComponent(u()(e.slice(0,200)))}]};if(!o||!r)return;var a=u()(i);fetch("https://aes.cn-wulanchabu.log.aliyuncs.com/logstores/aes-resourcetiming/track",{method:"POST",body:a,headers:{"Content-Type":"application/json","x-log-apiversion":"0.6.0","x-log-bodyrawsize":a.length}}).catch((function(t){var n,e;null===(n=window.console)||void 0===n||null===(e=n.warn)||void 0===e||e.call(n,"[AES] send resource timing failed",t)}))}catch(t){var c,f;null===(c=window.console)||void 0===c||null===(f=c.warn)||void 0===f||f.call(c,"[AES] send resource timing failed",t)}},s=(new Date).getTime(),l=function(){var t,n,e,r;return null!==(t=window)&&void 0!==t&&null!==(n=t.performance)&&void 0!==n&&n.now?performance.now():null!==(e=window)&&void 0!==e&&null!==(r=e.performance)&&void 0!==r&&r.timing?(new Date).getTime()-performance.timing.navigationStart:(new Date).getTime()-s};var p=function(t,n){var e=[],r=function(t){return e.concat([]).reverse().find((function(n){return n.name==="".concat(t)}))};return{mark:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var i=o()({name:n+"",entryType:"mark",startTime:l(),duration:0},r);return e.push(i),a(i,t),i}catch(t){console.error("Failed to execute 'mark' on 'Performance': ",t)}},measure:function(n,e,i){try{var u;if("object"==typeof e){if(void 0===e.start&&void 0===e.end)throw new Error("at least one of its 'start' or 'end' properties must be present");if(void 0!==e.start&&void 0!==e.end&&void 0!==e.duration)throw new Error("it must not have all of its 'start', 'duration', and 'end' properties defined");var c="number"==typeof e.start?e.start:"string"==typeof e.start?r(e.start).startTime:null,f="number"==typeof e.end?e.end:"string"==typeof e.end?r(e.end).startTime:null,s=e.duration;"number"!=typeof s&&(s=(f||l())-(c||0)),"number"!=typeof c&&(c=f-s),u=o()(o()({},e),{name:n+"",entryType:"measure",startTime:c,duration:s})}else{var p=void 0===e?null:r(e),v=void 0===i?null:r(i);u={name:n+"",entryType:"measure",startTime:(p=p||{startTime:0}).startTime,duration:((null==v?void 0:v.startTime)||l())-p.startTime}}return a(u,t),u}catch(t){var d,y;null===(d=window)||void 0===d||null===(y=d.console)||void 0===y||y.error("Failed to execute 'measure' on 'Performance'",t)}},markWithEntry:function(n){return a(o()({entryType:"mark",duration:0},n),t),n},measureWithEntry:function(n){return a(o()({entryType:"measure"},n),t),n}}},v=function(t,n){for(var e in n)t[e]=n[e];return t};function d(){try{performance.measure.apply(performance,arguments)}catch(t){}}function y(){try{performance.mark.apply(performance,arguments)}catch(t){}}function m(){var t,n;null===(t=window.console)||void 0===t||null===(n=t.log)||void 0===n||n.apply(console,arguments)}var h={hasHookRequest:!1,requestStackSize:0,listeners:[],runListeners:function(){var t=this;this.listeners.forEach((function(n){return n(t.requestStackSize)}))},hook:function(t){var n,e,r,o,i=this;if(window.fetch&&null!==(n=window)&&void 0!==n&&null!==(e=n.Response)&&void 0!==e&&null!==(r=e.prototype)&&void 0!==r&&r.blob){var u=window.fetch;window.fetch=function(n){var e,r,o,a;t&&i.listeners.length&&(e=null===(o=window.performance)||void 0===o||null===(a=o.now)||void 0===a?void 0:a.call(o),r="MCP fetch: "+("string"==typeof n?n:n.url));return i.requestStackSize++,i.runListeners(),u.apply(window,arguments).then((function(t){try{t.clone().blob().then((function(t){i.requestStackSize--,i.runListeners(),r&&d(r,{start:e})}))}catch(t){}return t}),(function(t){try{i.requestStackSize--,i.runListeners(),r&&d(r,{start:e})}catch(t){}throw t}))}}if(t){o="_aesMCP".concat(Math.random());var a=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,n){var e,r;a.apply(this,arguments),i.listeners.length&&(this[o]={name:"MCP XHR: "+n,start:null===(e=window.performance)||void 0===e||null===(r=e.now)||void 0===r?void 0:r.call(e)})}}var c=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){c.apply(this,arguments),i.requestStackSize++,i.runListeners();var t=this;t.addEventListener("readystatechange",(function(){4===t.readyState&&(i.requestStackSize--,i.runListeners(),t[o]&&(d(t[o].name,{start:t[o].start}),delete t[o]))}))}},addEventListener:function(t,n){this.hasHookRequest||(this.hook(n),this.hasHookRequest=!0),this.listeners.push(t)},removeEventListener:function(t){this.listeners=this.listeners.filter((function(n){return n!==t}))}};function g(t,n){var e=this,r=n.debug;this.assetsStack=0,this.debug=r,this.observer=function(){1!==e.end&&t(h.requestStackSize+e.assetsStack<1)}}function b(t){this.inputTypes=["click","keypress","wheel"],this.eventHandler=t}function w(t){var n,e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!window.PerformanceLongTaskTiming||!window.MutationObserver||null===(n=window)||void 0===n||null===(e=n.performance)||void 0===e||!e.now)return{abort:function(){}};var u,a,c,f,s,l,p,h=o.start,w="complete"===document.readyState,S=function(){document.hidden&&(i&&m("[AES] perf","页面离开，MCP停止采集"),E())},x=function(){u&&clearTimeout(u),u=setTimeout((function(){if(s&&w&&s.done&&(!p||p.done)){var n=(r||performance.now())-h;E(),t(v({name:"aes-mcp",startTime:n,_start:h,c1:h>0?0:1},o)),i&&(d("MCP",{start:h,duration:n}),y("MCP test over"))}}),100)},E=function(){u&&clearTimeout(u),u=null,[a,f,c,s,l,p].forEach((function(t){var n,e;null===(n=t)||void 0===n||null===(e=n.disconnect)||void 0===e||e.call(n),t=null})),S&&window.removeEventListener("visibilitychange",S),S=null,0===h&&window.removeEventListener("load",T)},T=function(){(s=new g((function(t){s.done=t,x()}),{debug:i})).observe(),(a=new MutationObserver((function(t,n){r=performance.now(),null==t||t.forEach((function(t){var n;"childList"===t.type&&(null==t||null===(n=t.addedNodes)||void 0===n||n.forEach((function(t){(("SCRIPT"===t.tagName||"IMG"===t.tagName)&&t.src||"LINK"===t.tagName&&"stylesheet"===t.rel&&t.href)&&s&&s.observe(t)})))})),i&&y("MCP mutation",{startTime:r})}))).observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0}),window.LayoutShiftAttribution&&(f=new PerformanceObserver((function(){r=performance.now(),x()}))).observe({entryTypes:["layout-shift"]}),(c=new PerformanceObserver((function(t){t.getEntries().some((function(t){t.duration>50&&x()}))}))).observe({entryTypes:["longtask"]}),o.observer&&(p=new o.observer((function(t){p.done=t,x()}),{debug:i})).observe(),(l=new b((function(){i&&m("[AES] perf","用户输入，MCP停止采集"),E()}))).observe(),window.addEventListener("visibilitychange",S),x()};return w?isNaN(h)&&(h=performance.now()):(isNaN(h)&&(h=0),window.addEventListener("load",(function(){w=!0,x()}))),i&&y("MCP test start"),T(),{abort:E}}g.prototype.observe=function(t){var n=this;if(t){var e,r,o,i;if(this.debug)e="MCP assets: ".concat(t.src||t.href),r=null===(o=window.performance)||void 0===o||null===(i=o.now)||void 0===i?void 0:i.call(o);this.assetsStack++;var u=function(){n.assetsStack--,n.observer(),e&&d(e,{start:r})};return t.addEventListener("load",u),t.addEventListener("error",u),void this.observer()}return h.addEventListener(this.observer,this.debug),this},g.prototype.disconnect=function(){this.end=1,h.removeEventListener(this.observer)},b.prototype.observe=function(){var t=this;this.inputTypes.forEach((function(n){window.addEventListener(n,t.eventHandler,!0)}))},b.prototype.disconnect=function(){var t=this;this.inputTypes.forEach((function(n){window.removeEventListener(n,t.eventHandler,!0)}))};var S=function(){var t,n;if((null===(t=window.performance)||void 0===t||null===(n=t.timing)||void 0===n?void 0:n.loadEventEnd)>0){var e={};for(var r in performance.timing)"number"==typeof performance.timing[r]&&performance.timing[r]>0&&(e[r]=Math.max(performance.timing[r]-performance.timing.navigationStart,0));return e}},x=e(44),E=e.n(x),T=e(45),O=e.n(T),_=e(46),L=e.n(_),P=e(47),k=e.n(P);function j(t,n){var e=void 0!==O.a&&t[L.a]||t["@@iterator"];if(!e){if(k()(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return M(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return E()(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return M(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}function M(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var A=function(t){function n(r){document.hidden&&(t(),document.removeEventListener("visibilitychange",n),window.removeEventListener("beforeunload",e))}function e(){t(),document.removeEventListener("visibilitychange",n)}window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",n)},C=function(t){"complete"===document.readyState?setTimeout(t):window.addEventListener("load",(function(){return setTimeout(t)}))};function N(t,n){for(var e in n)t[e]=n[e];return t}function R(t,n){var e,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==(e=window.PerformanceObserver)&&void 0!==e&&null!==(r=e.supportedEntryTypes)&&void 0!==r&&null!==(o=r.includes)&&void 0!==o&&o.call(r,t)){var u=!1!==i.buffered,a=new PerformanceObserver((function(t){var e,r=j(t.getEntries());try{for(r.s();!(e=r.n()).done;){var o=e.value;n(o)}}catch(t){r.e(t)}finally{r.f()}}));try{a.observe({type:t,buffered:u})}catch(n){a.observe({entryTypes:[t]})}return a}}function I(t){var n,e,r,o,i=R("paint",(function(t){"first-paint"===t.name?n=t:"first-contentful-paint"===t.name&&(e=t)})),u=R("largest-contentful-paint",(function(t){r=t})),a=function(){var a,c;null==i||null===(a=i.disconnect)||void 0===a||a.call(i),null==u||null===(c=u.disconnect)||void 0===c||c.call(u),!n&&!e||o||(t({fp:n,fcp:e,lcp:r}),o=!0)};!function(t){["keydown","click"].forEach((function(n){var e;window.addEventListener(n,e=function(){t(),window.removeEventListener(n,e,!0)},!0)}))}(a),A(a)}function F(t){var n,e=function(t){var n,e,r;if(null===(n=window.PerformanceObserver)||void 0===n||null===(e=n.supportedEntryTypes)||void 0===e||null===(r=e.includes)||void 0===r||!r.call(e,"layout-shift"))return function(){};var o=0,i=0,u=[],a=R("layout-shift",(function(n){if(!n.hadRecentInput){var e=u[0],r=u[u.length-1];i&&n.startTime-r.startTime<1e3&&n.startTime-e.startTime<5e3?(i+=n.value,u.push(n)):(i=n.value,u=[n]),i>o&&(o=i,t({times:u.length,value:o}))}}));return t({times:0,value:o}),function(){null==a||a.disconnect()}}((function(t){n=t}));A((function(){n&&t(n),e&&e()}))}n.default=function(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e=N(N({},t.getConfig()),e)).plugin_perf_resourceTimingThreshhold||8e3,o=e.plugin_perf_resourceTimingSampling||.01;C((function(){var i=S();i&&i.responseEnd>=i.responseStart&&i.loadEventEnd>=i.responseEnd&&t.log("perf",i),e.plugin_perf_enableResourceTiming&&i.loadEventEnd-i.navigationStart>r&&Math.random()<=o&&setTimeout((function(){var e,r;n||f(t,0,null===(e=window.performance)||void 0===e||null===(r=e.getEntries)||void 0===r?void 0:r.call(e))}),1e3)})),I((function(n){var e,r,o,i=n.lcp;t.log("paint",{p1:null===(e=n.fp)||void 0===e?void 0:e.startTime,p2:null===(r=n.fcp)||void 0===r?void 0:r.startTime,p3:null==i?void 0:i.startTime,p4:null==i||null===(o=i.element)||void 0===o?void 0:o.tagName,p5:null==i?void 0:i.url})}));var i=e.plugin_perf_enableUserTimingObserve;i&&(R("mark",(function(n){a(n,t)})),R("measure",(function(n){a(n,t)})));var u={};R("element",(function(n){u[n.identifier]||(u[n.identifier]=1,c(n,t))})),F((function(n){t.log("cls",{p1:n.value,p2:n.times})}));var s=p(t,e),l=s.mark,v=s.measure,d=s.markWithEntry,y=s.measureWithEntry;return{mark:l,measure:v,markWithEntry:d,measureWithEntry:y,markOnMCP:function(i,u){var a,c;n||(null===(a=window.performance)||void 0===a||null===(c=a.addEventListener)||void 0===c||c.call(a,"resourcetimingbufferfull",(function(){var t,n;"complete"===document.readyState&&(null===(t=window.performance)||void 0===t||null===(n=t.clearResourceTimings)||void 0===n||n.call(t))})));return n=!0,w((function(n){var u=n.startTime,a=n._start;if(d(n),i&&i({startTime:u}),e.plugin_perf_enableResourceTiming&&u>r&&Math.random()<=o){var c,s,l=null===(c=window.performance)||void 0===c||null===(s=c.getEntries)||void 0===s?void 0:s.call(c);l&&f(t,0,l.filter((function(t){return t.startTime>=a&&t.startTime<=a+u})))}}),u,t.getConfig("debug"))}}}}]).default}));!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-autolog/index",[],e):"object"==typeof exports?exports.AESPluginAutolog=e():t.AESPluginAutolog=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n=function(t,e){return s({click:"all",exposure:"manual",autoLoad:!0,autologProps:["data-autolog"],containerProps:["data-autolog-container"]},s((t.getConfig?o(t.getConfig("plugin_autolog")):{})||{},e||{}))},o=function(t){if(!t)return t;var e={};for(var r in t){void 0!==t[r]&&(e[r]=t[r])}return e},i=function(t,e){var r=[];if(e&&e.length>0&&(r=e.slice()),t&&t.length>0)for(var n=0;n<t.length;n++)r.push(t[n]);return r};function a(t,e){var r=t||{};for(var n in e)r[n]=e[n];return r}function s(t,e){var r=a({},t);return a(r,e)}function u(t){if("object"!=typeof t)return[];var e=[];for(var r in t)e.push(r);return e}function c(t,e){for(var r={},n={},o=0;o<e.length;o++){var i=e[o];i&&(n[i]=!0)}for(var a in t)n[a]||(r[a]=t[a]);return r}var l=/(^[\s　*]+)|([\s　：:~-]+$)|([(（]\d+[)）])/gm,f=function(t){return t.innerText||t.title||t.defaultValue},d=function(t){return t?/^[+-]?[\d,]+(\.\d+)?$/.test(t)?"[NUMBER]":t.substr(0,30):""};function h(t){for(var e,r=(e=t,"[object Array]"===Object.prototype.toString.call(e)?t:[t]),n=r.length,o=0;o<n;o++){var i=r[o];if(f(i)){var a=f(p(i));if(!a)continue;return d(a.replace(l,""))}}return""}function p(t){if(!!t.querySelector(".badge")){var e=t.cloneNode(!0),r=document.createElement("div");return r.appendChild(e),r.removeChild(e),(Array.prototype.slice.apply(e.querySelectorAll(".badge"))||[]).forEach((function(t){var e;return null==(e=t.parentElement)?void 0:e.removeChild(t)})),e}return t}var g=["button","checkbox","link","menuitem","radio","tab","combobox","search"];function v(t){var e=t.getAttribute("role");return e&&g.indexOf(e)>-1?e:""}function _(t){for(var e=[],r=[],n=[],o=t,i=!1,a=function(){var t=o.tagName,a="string"==typeof t?t.toLocaleLowerCase():o instanceof HTMLFormElement?"form":"unknown";if(n.push(a),e.push(o),!i){var s=o.getAttribute("id");if(s&&o!==document.body&&o!==document.documentElement&&(r.push('/*[@id="'+s+'"]'),i=!0),o.parentElement){var u=Array.prototype.slice.apply(o.parentElement.children).filter((function(t){return t.tagName.toLocaleLowerCase()===a}));u.length>1&&(a=a+"["+(u.indexOf(o)+1)+"]")}i||r.push(a)}o=o.parentElement};o;)a();return{reversedXPathArray:r,reversedDOMArray:e,xpath:m(r),reversedTagNameArray:n}}function m(t){return"/"+[].concat(t).reverse().join("/")}var E=function(t,e,r,n){y(t,e.name,!0);var i=s(e,{config:o(r)});t.registry[n?"unshift":"push"](i),w(t)},y=function(t,e,r){e&&(t.registry=!0===e?[]:t.registry.filter((function(t){return t.name!==e})),!r&&w(t))},w=function(t){var e=[],r=[];t.registry.forEach((function(t){if(t.prioritizedRules){var n=e.concat(t.prioritizedRules);e=n.map((function(e){return s(e,{plugin:t})}))}if(t.rules){var o=r.concat(t.rules);r=o.map((function(e){return s(e,{plugin:t})}))}})),t.ruleList=e.concat(r)},b=function(t,e){return s(e?function(t,e){var r=e.reversedDOMArray,n=e.reversedXPathArray,o=e.reversedTagNameArray,i=r.indexOf(t);if(-1!==i){var a=i+1,s=n.slice(0,a);return{reversedDOMArray:r.slice(0,a),reversedTagNameArray:o.slice(0,a),reversedXPathArray:s,xpath:m(s)}}return _(t)}(t,e):_(t),{tagName:t.tagName.toLowerCase()})},A=function(t,e,r,n){var i,a=function t(e,r){for(var n=r.source,i=r.logType,a=r.isRestarted,u=r.isByManual,l=e.ruleList.length,f={feature:"",text:"",xpath:"",container:"",target:n},d=s({source:n,logType:i,isByManual:u},{info:b(n),utils:{getFeature:v,getText:h}}),p=0;p<l;p++){var g=e.ruleList[p];try{var _=g.selector,m=g.action,E=g.plugin;d.config=s(E.defaultConfig,E.config);var y=_(d,e);if(y){d.target=y,f.target=y,y!==n&&y&&(d.info=b(y));var w="function"==typeof m?m(d,e):m;if(w){var A=w.__break,O=c(w,["__continue","__restart","__break"]);if(A){f.feature="";break}if(w.__restart){if(!a)return t(e,{source:y,logType:i,isRestarted:!0,isByManual:u});console.error("[aes-autolog] 已经重新执行过规则。请检查规则逻辑"),console.error(g)}if(f.feature=O.feature||f.feature||v(y),f.text=O.text||f.text||h(y)||O.placeholder||"",f.xpath=O.xpath||f.xpath||d.info.xpath,f.container=O.container||f.container||"",f.extra=O.extra?s(f.extra,o(O.extra)):f.extra,w.__continue)continue}else f.feature=f.feature||v(y),f.text=f.text||h(y),f.xpath=f.xpath||d.info.xpath;break}}catch(t){console.error("[aes-autolog] 规则执行出错",g),console.error(t)}}return f}(t,{source:e,logType:r,isByManual:n}),u=a.target,l=a.extra,f=c(a,["target","extra"]);if(!!f.feature){var d=s(o(l),s(o(f),{className:u.getAttribute("class")||"",selector:"",logtype:r})),p=t.getConfig();return i=p.formatResult,"[object Function]"===Object.prototype.toString.call(i)?p.formatResult(d):d}},O=function(){return(new Date).valueOf()},T=window&&"ontouchstart"in window,x=function(t){for(var e in t.registeredListeners){var r=e,n=t.registeredListeners[r];n&&t.target.removeEventListener(r,n)}},M=function(t){return t.EXP_CONFIG_CHANGE="EXP_CONFIG_CHANGE",t.DOM_CHANGE="DOM_CHANGE",t.DOM_REMOVE="DOM_REMOVE",t.EXP_WATCH_CHANGE="EXP_WATCH_CHANGE",t.DOM_DURATION_END="DOM_DURATION_END",t}({}),P=function(t){return t[t.INIT=0]="INIT",t[t.IN_VIEW=1]="IN_VIEW",t[t.OUT_VIEW=2]="OUT_VIEW",t}({}),L=function(t){return t[t.INIT=0]="INIT",t[t.REPORTED=1]="REPORTED",t}({}),S=function(t){return t[t.WAITTING=0]="WAITTING",t[t.LISTENING=1]="LISTENING",t[t.REPORTED=2]="REPORTED",t}({}),N=function(t){return"number"==typeof t};var C=function(){var t;return!(null==(t=window.__AES_AUTOLOG_EXP__)||null==(t=t.globalConfig)||!t.debug)},I=function(){var t;return!(!window.IntersectionObserver||null!=(t=window.__AES_AUTOLOG_EXP__)&&t.testOldIO)};function D(){var t=(new Date).getTime();return"xxxxxxxxxxxx4x".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:3&r|8).toString(16)}))}function R(t){return t&&t.getAttribute?t.getAttribute("autolog-exp-hash"):null}var U=function(t){var e={};return t&&("function"==typeof t.getBoundingClientRect&&(e=t.getBoundingClientRect()),N(e.x)||N(e.left)&&(e.x=e.left),N(e.y)||N(e.top)&&(e.y=e.top),N(e.width)||(e.width=t.offsetWidth),N(e.height)||(e.height=t.offsetHeight),e.size=e.width*e.height),e},G=function(t,e){return e.x>=t.pLeftTop[0]&&e.x<=t.pRightBottom[0]&&e.y>=t.pLeftTop[1]&&e.y<=t.pRightBottom[1]};function k(t){var e=[];if(t&&"function"==typeof document.querySelector){var r=document.querySelector(t);if(r){var n=U(r)||{};if(N(n.x)&&N(n.y)&&N(n.width)&&N(n.height)){var o=n;e.push({pLeftTop:[o.x,o.y],pRightTop:[o.x+o.width,o.y],pLeftBottom:[o.x,o.y+o.height],pRightBottom:[o.x+o.width,o.y+o.height]})}}}var i=document.documentElement,a=document.body,s=i.clientWidth||a.offsetWidth||0,u=i.clientHeight||a.offsetHeight||0;return e.push({pLeftTop:[0,0],pRightTop:[s,0],pLeftBottom:[0,u],pRightBottom:[s,u]}),e}function W(t){var e,r,n,o,i,a,s,u,c,l,f=t.rootPositions,d=t.elemPosition;if(f&&f.length)for(var h=0;h<f.length;h++){var p=f[h];if(!p)return!1;if((n=void 0,o=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=void 0,a=0,s=G(e=p,r=d),u=G(e,{x:r.x+r.width,y:r.y}),c=G(e,{x:r.x,y:r.y+r.height}),l=G(e,{x:r.x+r.width,y:r.y+r.height}),n=0,s&&l&&(n=r.size/r.size),(a=n)>0?a:(o=0,i=0,s&&u&&!c&&!l?(o=r.width,i=e.pLeftBottom[1]-r.y):!s&&u&&!c&&l?(o=r.width+r.x,i=r.y):!s&&!u&&c&&l?(o=r.width,i=r.height+r.y):s&&!u&&c&&!l&&(o=e.pRightTop[0]-r.x,i=r.y),(a=r.size>0?Math.abs(o*i)/r.size:0)>0?a:a=function(){var t=0,n=0;return!s||u||c||l?s||!u||c||l?s||u||!c||l?s||u||c||!l||(t=e.pLeftTop[0]-r.x,n=e.pLeftTop[1]-r.y):(t=e.pRightTop[0]-r.x,n=e.pRightTop[1]-r.y):(t=e.pLeftBottom[0]-r.x,n=e.pLeftBottom[1]-r.y):(t=e.pRightBottom[0]-r.x,n=e.pRightBottom[1]-r.y),r.size>0?Math.abs(t*n)/r.size:0}()))<t.targetRate)return!1}return!0}function H(){var t;if(null!=(t=window.__AES_AUTOLOG_EXP__)&&null!=(t=t.globalConfig)&&t.debug)for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n]}function X(t){console.error("[tracker-plugin-autolog-exposure]",t)}var B=function(t){var e,r=this;this.isThrottleWatch=null==(e=t.isThrottleWatch)||e,this._observer=window.__AES_AUTOLOG_EXP__.mutationObserver,this._removeElementHashs=[],this._removing=!1,this._looptimes=0,this._oldWatching=!1,this.windowStatus="focus",this._eventMap={},this._throttleHandlerDomChange=function(t,e,r){var n,o,i,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:+new Date,n=null,a=t.apply(o,i),n||(o=i=null)},c=function(){var c=+new Date;s||!1!==r.leading||(s=c);var l=e-(c-s);return o=this,i=arguments,l<=0||l>e?(n&&(clearTimeout(n),n=null),s=c,a=t.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(n),s=0,n=o=i=null},c}((function(t){r.domChangeHandler(t)}),200)};B.prototype.initObserver=function(t,e){var r=this,n=["IFRAME","BODY","OBJECT","SCRIPT","NOSCRIPT","LINK","STYLE"],o=["class","style"],a=function(t){return"characterData"===t.type||"attributes"===t.type&&t.attributeName&&o.indexOf(t.attributeName)>-1?[t.target]:"childList"!==t.type?[]:void 0},s=function(t,r){var o,i=(null==(o=window.__AES_AUTOLOG_EXP__)||null==(o=o.globalConfig)?void 0:o.ignoreAttrs)||[];if(t&&t.length>0){var a=t.filter((function(t){return!(n.indexOf(t.nodeName)>-1)&&!i.some((function(e){return function(t,e){if(e(t))return!0;for(var r=t.parentNode;r;){if(e(r))return!0;r=r.parentNode}return!1}(t,(function(t){var r=t;return!!r&&!!r.getAttribute&&!!r.getAttribute(e)}))}))}));a.length&&e(a,r)}},u=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(o&&(n.indexOf(o.nodeName)<0&&1===o.nodeType)){var i=R(o);i&&r._removeElementHashs.push(i)}}r._removing||(r._removing=!0,setTimeout((function(){r._removeElementHashs.length&&window.__AES_AUTOLOG_EXP__&&window.__AES_AUTOLOG_EXP__.pubSub.publish(M.DOM_REMOVE,r._removeElementHashs),r._removeElementHashs=[],r._removing=!1}),200))};this._observer||(this._observer=new t((function(t){if(t&&t.length>0)for(var e=0;e<t.length;e++){var r=t[e];if(r){var n=i(r.addedNodes||[]);n=i(a(r),n),s(n,r),r.removedNodes.length&&u(i(r.removedNodes))}}})),window.__AES_AUTOLOG_EXP__.mutationObserver=this._observer);this._observer.observe(document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),H("init MutationObserver success!")},B.prototype.domChangeHandler=function(t){window.__AES_AUTOLOG_EXP__&&window.__AES_AUTOLOG_EXP__.pubSub.publish(M.DOM_CHANGE,t)},B.prototype.onFocusHandler=function(){this.windowStatus="focus",this._oldWatching||this.oldWatchDOMChange()},B.prototype.onBlurHandler=function(){this.windowStatus="blur"},B.prototype.onVisibilityChange=function(){"visible"===document.visibilityState?this.onFocusHandler():"hidden"===document.visibilityState&&this.onBlurHandler()},B.prototype.addEvent=function(t,e,r,n){this._eventMap[e]=r,t.addEventListener(e,r,n)},B.prototype.removeEvent=function(t,e,r){var n=this._eventMap[e];n&&(t.removeEventListener(e,n,r),delete this._eventMap[e])},B.prototype.addAllListener=function(){this.oldWatchDOMChange(),window.WindVane&&(this.addEvent(document,"WV.Event.APP.Active",this.onFocusHandler.bind(this),!1),this.addEvent(document,"WV.Event.APP.Background",this.onBlurHandler.bind(this),!1)),"hidden"in document?this.addEvent(window,"visibilitychange",this.onVisibilityChange.bind(this)):(this.addEvent(window,"focus",this.onFocusHandler.bind(this)),this.addEvent(window,"blur",this.onBlurHandler.bind(this)))},B.prototype.removeAllListener=function(){window.WindVane&&(this.removeEvent(document,"WV.Event.APP.Active",!1),this.removeEvent(document,"WV.Event.APP.Background",!1)),"hidden"in document?this.removeEvent(window,"visibilitychange"):(this.removeEvent(window,"focus"),this.removeEvent(window,"blur"))},B.prototype.scrollHandler=function(){this._throttleHandlerDomChange({type:"polling"})},B.prototype.oldWatchDOMChange=function(){var t=this;this._loopTimer=setTimeout((function(){if(clearTimeout(t._loopTimer),"blur"!==t.windowStatus){var e,r;t._looptimes++,t._oldWatching=!0,t.domChangeHandler({type:"polling"});var n=null==(e=window.__AES_AUTOLOG_EXP__)?void 0:e.dispatcher;null!=n&&null!=(r=n.listenerMap)&&r.size&&t.oldWatchDOMChange()}else t._oldWatching=!1}),1e3)},B.prototype.start=function(){var t,e=window.MutationObserver,r=this;(function(){var t;return!(!window.MutationObserver||null!=(t=window.__AES_AUTOLOG_EXP__)&&t.testOldMO)})()?this.initObserver(e,(function(){r._throttleHandlerDomChange({type:"mob"})})):null!=(t=window.__AES_AUTOLOG_EXP__.globalConfig)&&t.disabledPolling?H("当前浏览器版本不支持曝光监听"):(this.domChangeHandler({type:"init"}),this.addAllListener());I()||(this.addEvent(window,"touchmove",this.scrollHandler.bind(this),{passive:!0}),this.addEvent(window,"scroll",this.scrollHandler.bind(this),{passive:!0}),this.addEvent(window,"resize",this.scrollHandler.bind(this),{passive:!0}))},B.prototype.stop=function(){this._loopTimer&&(clearTimeout(this._loopTimer),this._loopTimer=null),this._observer?(this._observer.takeRecords(),this._observer.disconnect()):this.removeAllListener(),I()||(this.removeEvent(window,"touchmove",{passive:!0}),this.removeEvent(window,"scroll",{passive:!0}),this.removeEvent(window,"resize",{passive:!0}))};var V=function(){this._data={},this.size=0};V.prototype.set=function(t,e){this._data&&(this._data[t]=e,this.size++)},V.prototype.get=function(t){if(this._data)return this._data[t]},V.prototype.delete=function(t){this._data&&(delete this._data[t],this.size--)},V.prototype.has=function(t){return!!this._data&&void 0!==this._data[t]},V.prototype.forEach=function(t){var e=this._data||{};for(var r in e){var n=e&&e[r];n&&t(n,r)}},V.prototype.clear=function(){this._data={}};var F={every:!1,duration:200,threshold:.5},z=function(t){this.config=s(F,t),this.status=S.WAITTING,this.token=function(t){var e,r,n="";t.selectorFunc?n=t.selectorFunc.name||"selectorFunc":t.selector&&(n=t.selector,t.rootSelector&&(n+=t.rootSelector+"_"));var o=(null==(e=window.__AES_AUTOLOG_EXP__)||null==(e=e.cacheSelectorNameMap)?void 0:e[n])||0;return r=n+"_exp_"+(o+1),window.__AES_AUTOLOG_EXP__.cacheSelectorNameMap[n]=o+1,r}(t),this.observerNameMap=new V};z.prototype.needReport=function(t){return!(!this.config.every||!C())||!((e=t)&&e.getAttribute("autolog-exp-reported")===""+L.REPORTED);var e},z.prototype.onExposure=function(t){var e=t.element;"function"==typeof this.config.onExposure&&this.config.onExposure({element:e,config:this.config}),this.changeStatus(S.REPORTED)},z.prototype.getElements=function(){var t=this.config;if(t.selectorFunc)return i(t.selectorFunc());if(t.selector){var e=(t.rootSelector?document.querySelector(t.rootSelector):document)||document;return i(e.querySelectorAll(t.selector))}return[]},z.prototype.changeStatus=function(t){this.status=t};var j=function(t){this.dom=t.element,this.id=t.id,this.listenerMap=new V,this.everyListenerMap=new V,this.observerMap=new V,this.durationList=[],this.durationTaskMap=new V,this.status=P.INIT,this.reportStatus=L.INIT,this.dom.setAttribute("autolog-exp-hash",this.id)};j.prototype.addListener=function(t){this.listenerMap.set(t.token,t),t.config.every&&C()&&this.everyListenerMap.set(t.token,t)},j.prototype.needReport=function(){return!(!this.dom||0===this.listenerMap.size)&&(this.listenerMap.size>0||this.everyListenerMap.size>0)},j.prototype.watch=function(t){I()?this.intersectionWatch():this.watchByPolling(t)},j.prototype.watchByPolling=function(t){this.checkIsInView(t)&&this.exposureStart({isPolling:!0})},j.prototype.isInWatch=function(t){return this.observerMap.has(t)},j.prototype.intersectionWatch=function(){var t=this,e=window.__AES_AUTOLOG_EXP__.dispatcher;this.listenerMap.size&&this.listenerMap.forEach((function(r){var n=e.getIObserver(r.config),o=n.name,i=n.observer;t.isInWatch(o)||(i.observe(t.dom),t.observerMap.set(o,r.token)),r.observerNameMap.set(o,o)}))},j.prototype.isInView=function(t){var e=t.rootPositions,r=t.rate,n=t.elemPosition;return this.status===P.IN_VIEW&&W({rootPositions:e,elemPosition:n,targetRate:r||.5})},j.prototype.IOhandleDurationTask=function(t){if(t)for(var e=this.durationList,r=0;r<e.length;r++){var n=e[r];if(n&&n.flag===t){if(!(this.status===P.IN_VIEW)){this.exposureLeave();break}this.handleReport(n.listener)}}},j.prototype.checkIsInView=function(t){var e=U(this.dom),r=[];this.listenerMap.forEach((function(t){return r.push(t)}));for(var n=t,o=0;o<r.length;o++){var i=r[o];if(i){var a=i.config,s=null==a?void 0:a.rootSelector;if(s&&(n=k(s)),W({rootPositions:n,elemPosition:e,targetRate:a.threshold||.5}))return!0}}return!1},j.prototype.oldhandleDurationTask=function(t){if(t)for(var e=k(),r=U(this.dom),n=this.durationList,o=0;o<n.length;o++){var i=n[o];if(i&&i.flag===t){var a=e,s=i.listener.config,u=null==s?void 0:s.rootSelector;if(u&&(a=k(u)),!this.isInView({rootPositions:a,rate:null==s?void 0:s.threshold,elemPosition:r})){this.exposureLeave();break}this.handleReport(i.listener)}}},j.prototype.handleDurationTask=function(t){this.status!==P.OUT_VIEW&&(this.dom&&!function(t){for(var e;t&&"HTML"!==t.tagName&&"none"!==(e=t.style.display);)t=t.parentNode;return"none"===e}(this.dom)?(I()?this.IOhandleDurationTask(t):this.oldhandleDurationTask(t),this.durationList=this.durationList.filter((function(e){return e.flag!==t}))):this.exposureLeave())},j.prototype.handleReport=function(t){var e;this.reportStatus!==L.REPORTED&&(this.reportStatus=L.REPORTED,(e=this.dom)&&e.setAttribute("autolog-exp-reported",""+L.REPORTED)),t.onExposure({element:this.dom}),t.config.every&&C()||this.listenerMap.delete(t.token)},j.prototype.exposureStart=function(t){var e=this,r=t.observerName,n=t.isPolling;if((n||r)&&this.needReport()){var o=+new Date;this.status=P.IN_VIEW,this.listenerMap.forEach((function(t){var i=t.config.duration;if(i){if(n||r&&t.observerNameMap.has(r)){var a=o+"_"+r+"_"+i;if(!e.durationTaskMap.has(a)){var s=setTimeout((function(){e.handleDurationTask(a)}),i);e.durationTaskMap.set(a,{flag:a,timer:s})}e.durationList.push({listener:t,flag:a})}}else e.handleReport(t)}))}},j.prototype.exposureLeave=function(){this.status=P.OUT_VIEW,this.durationTaskMap.forEach((function(t){t&&clearTimeout(t)})),this.durationList=[],this.durationTaskMap.clear()};var q=window.IntersectionObserver,Y=function(){this.watchElemetMap=new V,this.listenerMap=new V,this.observerMap=new V,this.isThrottling=!1,this._watchTimes=0,this._domChangeTimes=0,this._configChangeTimes=0,q&&this.observerMap.set("io_base",this.createIObserver({},"io_base")),this.start()};function K(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}Y.prototype.updateElementSub=function(t){var e=this,r=t.type;if("PAUSED"!==this.status){var n=0;this.listenerMap.forEach((function(t){for(var r=t.getElements(),o=0;o<r.length;o++){var i=r[o];if(i){var a=void 0;if(t.needReport(i)){a=R(i);var s=e.watchElemetMap.get(a);if(s)s.listenerMap.has(t.token)||(s.addListener(t),n++);else{a=a||D();var u=new j({id:a,element:i});n++,u.addListener(t),e.watchElemetMap.set(a,u)}}}}})),"polling"!==r&&0===n||window.__AES_AUTOLOG_EXP__&&window.__AES_AUTOLOG_EXP__.pubSub.publish(M.EXP_WATCH_CHANGE)}},Y.prototype.watchDom=function(){var t,e,r,n,o=this,i=this;t=function(){i.domWatcher||(i.domWatcher=new B({isThrottleWatch:!0}),o.listenerMap.size&&i.domWatcher.start())},r=0,n=function(){0===r&&t(),r++},"complete"===document.readyState&&n(),document.addEventListener&&(e=function(){document.removeEventListener("DOMContentLoaded",e,!1),n()},document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",n,!1))},Y.prototype.start=function(){this.watchDom(),this.status="WATCHING",window.__AES_AUTOLOG_EXP__&&(window.__AES_AUTOLOG_EXP__.pubSub.subscribe(M.EXP_CONFIG_CHANGE,this.handleConfigChange.bind(this)),window.__AES_AUTOLOG_EXP__.pubSub.subscribe(M.EXP_WATCH_CHANGE,this.onWatchMapChange.bind(this)),window.__AES_AUTOLOG_EXP__.pubSub.subscribe(M.DOM_CHANGE,this.handleDOMChange.bind(this)),window.__AES_AUTOLOG_EXP__.pubSub.subscribe(M.DOM_REMOVE,this.handleDOMRemove.bind(this)))},Y.prototype.handleDOMRemove=function(t,e){var r=this;try{e.forEach((function(t){var e=r.watchElemetMap.get(t);e&&r.clearWatchElement(e,t)}))}catch(t){X(t)}},Y.prototype.handleDOMChange=function(t,e){H("domChange",{info:e}),this.updateElementSub(e),this._domChangeTimes++},Y.prototype.handleConfigChange=function(){this.reset(),this.updateElementSub({type:"config"}),this._configChangeTimes++},Y.prototype.clearWatchElement=function(t,e){var r=this;t&&(t.dom&&t.observerMap.forEach((function(e){var n=r.observerMap.get(e);n&&n.unobserve(t.dom)})),this.watchElemetMap.delete(e))},Y.prototype.cleanupWatchElement=function(t,e){return!t.needReport()&&(this.clearWatchElement(t,e),!0)},Y.prototype.onWatchMapChange=function(){var t=this;if(!this.isThrottling){this.isThrottling=!0;var e=setTimeout((function(){clearTimeout(e);var r=k();t.watchElemetMap.forEach((function(e,n){t.cleanupWatchElement(e,n)||(t._watchTimes++,e.watch(r))})),t.isThrottling=!1}),50)}},Y.prototype.handleDomExposureChange=function(t,e){var r=t.target.getAttribute("autolog-exp-hash");if(r){var n=this.watchElemetMap.get(r);if(n&&t.target===n.dom)(void 0===t.isIntersecting?t.intersectionRatio>=.5:t.isIntersecting)?n.exposureStart({observerName:e}):n.status===P.IN_VIEW&&n.exposureLeave()}},Y.prototype.createIObserver=function(t,e){var r=this;return new q((function(t){t.forEach((function(t){r.handleDomExposureChange(t,e)}))}),s({root:null,rootMargin:"0px",threshold:.5},t))},Y.prototype.clearWatch=function(){this.watchElemetMap.clear(),q&&this.clearIObserver()},Y.prototype.clearIObserver=function(){this.observerMap.forEach((function(t){t.disconnect()}))},Y.prototype.getIObserver=function(t){var e,r=.5===t.threshold?"io_base":"io_v_"+t.threshold;if("io_base"!==r){var n=this.observerMap.get(r);if(n)e=n;else{var o=this.createIObserver({threshold:t.threshold},r);this.observerMap.set(r,o),e=o}}else e=this.observerMap.get(r);return{name:r,observer:e}},Y.prototype.reset=function(){this.domWatcher&&this.domWatcher.stop(),this.clearIObserver(),this.watchElemetMap.forEach((function(t){t.dom&&(t.dom.removeAttribute("autolog-exp-hash"),t.dom.removeAttribute("autolog-exp-reported"))})),this.watchElemetMap.clear(),this.domWatcher&&this.domWatcher.start()},Y.prototype.pauseAll=function(){"PAUSED"!==this.status&&(this.clearWatch(),this.status="PAUSED")},Y.prototype.restart=function(){this.status="WATCHING",window.__AES_AUTOLOG_EXP__&&window.__AES_AUTOLOG_EXP__.pubSub.publish(M.EXP_CONFIG_CHANGE)},Y.prototype.getStatus=function(){return this.status},Y.prototype.addExposureListener=function(t){var e=this;if(function(t){return t.selectorFunc?"function"==typeof t.selectorFunc||(X("config.selectorFunc 类型应该为函数"),!1):!!t.selector||(X("config.selector 和 config.selectorFunc必须有一个"),!1)}(t)){var r=new z(t);return this.listenerMap.set(r.token,r),this.isAddThrottling||(this.isAddThrottling=!0,setTimeout((function(){e.isAddThrottling=!1,window.__AES_AUTOLOG_EXP__&&window.__AES_AUTOLOG_EXP__.pubSub.publish(M.EXP_CONFIG_CHANGE)}),30)),r.token}},Y.prototype.removeExposureListener=function(t){var e=this;this.listenerMap.has(t)&&(this.listenerMap.delete(t),this.watchElemetMap.forEach((function(r,n){r.listenerMap.has(t)&&r.listenerMap.delete(t),r.listenerMap.size||(r.dom&&r.observerMap.forEach((function(t){var n=e.observerMap.get(t);n&&n.unobserve(r.dom)})),e.watchElemetMap.delete(n))})))};var Q=function(){this.handlerMap=new V};Q.prototype.subscribe=function(t,e){if(K(e)){var r=this.handlerMap.get(t);r?r.push(e):this.handlerMap.set(t,[e])}},Q.prototype.unsubscribe=function(t,e){if(K(e)){var r=this.handlerMap.get(t);if(!r)return this;if(r.length&&e)for(var n=0;n<r.length;n++){var o=r[n];o&&e.toString()===o.toString()&&r.splice(n,1)}else this.handlerMap.delete(t)}},Q.prototype.subscribeOnce=function(t,e){var r=this;if(K(e)){return this.subscribe.call(this,t,(function n(){r.unsubscribe.call(r,t,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];e.apply(r,i)})),this}},Q.prototype.publish=function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return window.queueMicrotask?window.queueMicrotask((function(){var r=e.handlerMap.get(t)||[];r.length>0&&r.forEach((function(r){"function"==typeof r&&r.apply(e,[t].concat(n))}))})):setTimeout((function(){var r=e.handlerMap.get(t)||[];r.length>0&&r.forEach((function(r){"function"==typeof r&&r.apply(e,[t].concat(n))}))}),0),this},Q.prototype.clearAllSubscriptions=function(){this.handlerMap.clear()},function(t){if(window.__AES_AUTOLOG_EXP__&&window.__AES_AUTOLOG_EXP__.dispatcher)H("already inited");else{window.__AES_AUTOLOG_EXP__={globalConfig:t,cacheSelectorNameMap:{},pubSub:new Q};var e=new Y;window.__AES_AUTOLOG_EXP__.dispatcher=e}}();var $=function(t){var e;if(null!=(e=window.__AES_AUTOLOG_EXP__)&&e.dispatcher)return window.__AES_AUTOLOG_EXP__.dispatcher.addExposureListener(t)},J=function(t){if(window.URLSearchParams)return function(t){var e=window.URLSearchParams,r={};try{new e(t).forEach((function(t,e){r[e]=t}))}catch(t){console.error(t)}return r}(t);var e={};try{if("string"!=typeof t||0===t.length)return e;for(var r=t.split("&"),n=r.length,o=0;o<n;++o){var i,a,s,u,c=r[o]||"",l=c.indexOf("=");l>=0?(i=c.substr(0,l),a=c.substr(l+1)):(i=c,a=""),s=decodeURIComponent(i),u=decodeURIComponent(a),e[s]=u}}catch(t){console.error(t)}return e},Z=function(t,e){return t.exp===e||t.exposure===e},tt=function(t){t.expToken&&(!function(t){var e;if(null!=(e=window.__AES_AUTOLOG_EXP__)&&e.dispatcher)window.__AES_AUTOLOG_EXP__.dispatcher.removeExposureListener(t)}(t.expToken),t.expToken=void 0)},et=function(t,e){var r,n;return window.getComputedStyle?null==t||null==(r=t._config)||!r.pid||(null!=(n=window.__aes_plugin_autolog_listen)&&n[t._config.pid]&&e?(console.warn("[aes-autolog] pid("+t._config.pid+") 已被载入，请勿重复载入"),!1):((window.__aes_plugin_autolog_listen=window.__aes_plugin_autolog_listen||{})[t._config.pid]=e,!0)):(console.warn("[aes-autolog] 在当前环境下无法使用"),!1)},rt=["button","checkbox","link","menuitem","radio","tab","combobox","search"],nt=function(t,e){var r=e.autologProps.map((function(r){var n=t.getAttribute(r);if(n)return e.autologPropsHandler(n,r)})).filter(Boolean)[0]||{};return!!u(r).length?r:void 0},ot={name:"builtin",prioritizedRules:[{selector:function(t){var e=t.info,r=t.source,n=t.config,o=n.containerProps;if(o&&0!==o.length){var i=e.reversedDOMArray.filter((function(t){return o.map((function(e){return t.getAttribute(e)})).filter(Boolean)[0]}))[0];if(i){var a=nt(i,n);if(a&&"false"!==a.whole)return i}return r}},action:function(t){var e,r,n=t.target,o=t.config,i=t.source,a=t.info,s=t.logType;if(n!==i)e=n;else{var u=a.reversedDOMArray;e=u.filter((function(t){return o.containerProps.map((function(e){return t.getAttribute(e)})).filter(Boolean)[0]}))[0]}if((e&&(r=o.containerProps.map((function(t){return e&&e.getAttribute(t)})).filter(Boolean)[0]||""),"EXP"===s&&e&&e===i)&&!nt(e,o))return{container:r,feature:"custom",text:r,xpath:a.xpath,__continue:!1};return{container:r,__continue:!0}}},{selector:function(t,e){var r=t.info,n=t.config,o=t.source,i=t.isByManual,a=r.reversedDOMArray.slice(0,5).filter((function(t){return n.autologProps.map((function(e){return t.getAttribute(e)})).filter(Boolean)[0]}))[0];if(!a&&!i){var s=e.getConfig(),u=(n.autologProps.map((function(t){var e=o.getAttribute(t);if(e)return n.autologPropsHandler(e,t)})).filter(Boolean)[0]||{}).clk;if("all"!==s.click||"false"==u)return o}if(o!==a&&a){var c=nt(a,n);if("false"===(null==c?void 0:c.whole))return}return a},action:function(t,e){var r=t.source,n=t.target,o=t.config,i=t.logType,a=t.isByManual;if(r===n){var s=!0,c=o.autologProps.map((function(t){var e=n.getAttribute(t);if(e)return o.autologPropsHandler(e,t)})).filter(Boolean)[0],l=c||{},f=l.feature,d=l.text,h=l.xpath,p=l.clk,g=l.extra;if("CLK"===i&&!a){var v=e.getConfig();"false"===p?s=!1:"auto"===v.click?s=!!c:"manual"===v.click&&(s="true"===p)}return s?{feature:f||"custom",text:d,xpath:h,extra:g&&u(g).length>0?g:void 0,__continue:!d&&!f}:{__break:!0}}return{__restart:!0}}}],rules:[{selector:function(t){var e=t.info,r=t.source;if("img"===e.tagName)return r},action:function(t){var e=t.target,r=t.info,n=e.alt,o=r.reversedTagNameArray.indexOf("a");if(-1!==o)return{feature:"link",text:n};var i=-1!==o?"link":"image";return"pointer"===getComputedStyle(e).cursor&&(i="icon-button"),{feature:i,text:n}}},{selector:function(t){var e=t.info,r=t.source;if("area"===e.tagName)return r;var n=e.reversedTagNameArray.indexOf("a");return-1!==n?e.reversedDOMArray[n]:void 0},action:{feature:"link"}},{selector:function(t){var e=t.info,r=e.reversedTagNameArray.indexOf("button");if(-1!==r)return e.reversedDOMArray[r]},action:{feature:"button"}},{selector:function(t){var e=t.info,r=t.source;if("icon"===e.tagName)return r;var n=e.reversedTagNameArray.indexOf("svg");return-1!==n?e.reversedDOMArray[n]:void 0},action:function(t){var e=t.target;if("pointer"===getComputedStyle(e).cursor)return{feature:"icon-button",placeholder:"ICON_BUTTON"}}},{selector:function(t){var e=t.info,r=t.source,n=e.tagName;if("input"===n||"textarea"===n)return r},action:function(t){var e=t.target,r=t.info,n=e,o=n.type,i=n.value,a=n.placeholder,s={feature:""};return"text"!==o&&"password"!==o||(s.placeholder=a||""),"submit"===o||"button"===o?(s.feature="button",i&&(s.text=i)):s.feature=o||r.tagName,s}},{selector:function(t){var e=t.info,r=e.reversedTagNameArray.indexOf("label");if(-1!==r)return e.reversedDOMArray[r]},action:function(t){var e=t.target.getElementsByTagName("input")[0];if(e){var r=e.type;if("checkbox"===r||"radio"===r)return{feature:r}}}},{selector:function(t){var e=t.info,r=t.source;if("select"===e.tagName)return r},action:function(t){var e=t.target;return{feature:t.info.tagName,placeholder:e.placeholder}}},{selector:function(t){var e=t.source,r=e.getAttribute("role");if(r&&rt.indexOf(r)>-1)return e},action:function(t){var e=t.target.getAttribute("role");if(e&&rt.indexOf(e)>-1)return{feature:e}}},{selector:function(t){var e=t.source;if(e.getAttribute("data-spm-click"))return e},action:{feature:"custom",__continue:!0}},{selector:function(t){var e=t.source;if("pointer"===getComputedStyle(e).cursor)return e},action:{feature:"clickable"}}],defaultConfig:{containerProps:["data-autolog-container"],autologProps:["data-autolog","data-xux-log"],autologPropsHandler:function(t){var e=J(t),r=e.feature,n=e.text,o=e.xpath,i=e.clk,a=e.exp,s=e.whole;return{feature:r,text:n,xpath:o,exp:a,clk:i,extra:c(e,["feature","text","xpath","clk","exp","exposure","whole"]),whole:s}}}},it="START_LOAD_TO_AUTOLOG",at="IN_AEM_CONTAINER",st="PLUGIN_START",ut="START_LOAD_TO_AUTOLOG_FROM_PLUGIN",ct="READY_TO_LOAD_BY_AUTOLOG",lt="READY_TO_LOAD_BY_AUTOLOG_TO_PLUGIN",ft=function(t){if("string"!=typeof t)return!1;return/^https:\/\/(dev\.)?g\.alicdn\.com\/aes\/tracker-plugin-adata\/\d+\.\d+\.\d+\/(plugin-)?renderer\.js/.test(t)},dt=function(t){var e=t.self,r=t.target,n=t.onMessage,o=function(t,e,r){var n=function(t){t.data&&"object"==typeof t.data&&1===t.data._aes_adata_msg_flag_&&setTimeout((function(){r(t.data,t)}),0)};return t.addEventListener("message",n,!1),{send:function(t,r){var n="function"==typeof e?e():e;n&&n.postMessage(s(t,{_aes_adata_msg_flag_:1}),r||"*")},destroy:function(){t.removeEventListener("message",n,!1)}}}(e,r,(function(t,e){n(t,e)})),i=o.send;return{send:function(t,e){i(t,e)},destroy:o.destroy}};!function(){try{if(window.parent&&window!==window.parent){window._aes_autolog_adata_loader_=!0;var t=dt({self:window,target:window.parent,onMessage:function(e,r){if(e.type===at)t&&t.send({type:ct},r&&r.origin);else if(e.type===it){var n=e.payload&&e.payload.adataScriptUrl;if(n&&ft(n)){window._aes_autolog_adata_plugin_version="3";var o=document.createElement("script");o.src=n,document.body.appendChild(o)}t&&t.destroy(),t=null}}})}}catch(t){console.error(t)}}(),function(){try{var t=dt({self:window,target:function(){var t=document.getElementById("aesAdataPluginIframe");return t&&t.contentWindow},onMessage:function(e,r){if(e.type===st)t&&t.send({type:lt},r&&r.origin);else if(e.type===ut){if(window._aes_autolog_adata_plugin_loader_)return;var n=e.payload&&e.payload.adataScriptUrl;if(n&&ft(n)){window._aes_autolog_adata_plugin_loader_=!0,window._aes_autolog_adata_plugin_version="3";var o=document.createElement("script");o.src=n,document.body.appendChild(o)}t&&t.destroy(),t=null}}}),e=dt({self:window,target:window,onMessage:function(t,r){"AES_ADATA_PLUGIN_LOAD"===t.type&&(e&&e.send({type:"HAS_AES_AUTOLOG_TO_PLUGIN"},r&&r.origin),e&&e.destroy(),e=null)}})}catch(t){console.error(t)}}();e.default=function(t,e){void 0===e&&(e={});var r={registry:[],ruleList:[],target:document,registeredListeners:{},getConfig:function(){return n(t,e)},getConfigByKey:function(r){return function(t,e,r){return n(t,e)[r]}(t,e,r)}};window.AES_ADATA_INSTANCE_PUSH_QUEUE=window.AES_ADATA_INSTANCE_PUSH_QUEUE||[],window.AES_ADATA_INSTANCE_PUSH_QUEUE.push((function(){return t}));var o=function(){var t=r.getConfigByKey("targetSelector"),e=t?document.querySelector(t):document;r.target=e||document},a=function(){var e=r.getConfig();o(),et(t,!0)&&(function(t,e){var r=t.target,n=t.registeredListeners;if(x(t),T){var o,i=function(t){var e=t.touches,r=t.changedTouches;if(!(e&&1!==e.length||r&&1!==r.length)){var n=r[0],i=n.pageX,a=n.pageY;o={time:O(),pageX:i,pageY:a}}},a=function(t){var r=t.changedTouches;if((!r||1===r.length)&&o){var n=r[0],i=n.pageX,a=n.pageY,s=O()-o.time,u=o.pageX-i|0,c=o.pageY-a|0;s<500&&u*u+c*c<36&&e(t),o=void 0}};r.addEventListener("touchstart",i),r.addEventListener("touchend",a),n.touchstart=i,n.touchend=a}else r.addEventListener("mousedown",e),n.mousedown=e}(r,(function(n){if(!1!==e.click&&n.target&&n.target instanceof Element){var o=A(r,n.target,"CLK");o&&o.feature&&(e.debug&&(console.warn("[aes-autolog] 发送AES点击日志",o),window.validLog(o,"2.0"),window.validNewLog(o,n.target,t.getConfig())),e.dryRun||t.log("autolog",o))}})),function(t,e){var r,n;tt(t);var o,a,s=t.getConfig(),u=t.getConfigByKey("exposureSelector");!1!==s.exposure&&(t.expToken||(t.expToken=$("function"!=typeof u?{selectorFunc:function(){var e=s.autologProps,r=void 0===e?[]:e,n=s.containerProps,o=void 0===n?[]:n;if(!r.length&&!o.length)return[];var a=[],u=r.map((function(t){return"["+t+"]"})).join(","),c=r.length?i(t.target.querySelectorAll(u)):[];if(o.length){var l=o.map((function(t){return"["+t+"]"})).join(",");i(t.target.querySelectorAll(l)).forEach((function(t){if(t.getAttribute&&r.length){var e=r.map((function(e){return t.getAttribute(e)})).filter(Boolean)[0];"auto"!==s.exposure||e||a.push(t)}}))}return c.forEach((function(t){if(t.getAttribute&&r.length){var e=r.map((function(e){return t.getAttribute(e)})).filter(Boolean)[0],n=e?J(e):{};"auto"!==s.exposure||Z(n,"false")?"manual"===s.exposure&&Z(n,"true")&&a.push(t):a.push(t)}})),a},duration:(null==(r=s.exposureProps)?void 0:r.duration)||300,threshold:(null==(n=s.exposureProps)?void 0:n.areaThreshold)||.5,onExposure:function(t){var r=t.element;e(r)}}:{selectorFunc:function(){try{return u()||[]}catch(t){return console.error(t),[]}},duration:(null==(o=s.exposureProps)?void 0:o.duration)||300,threshold:(null==(a=s.exposureProps)?void 0:a.areaThreshold)||.5,onExposure:function(t){var r=t.element;e(r)}})))}(r,(function(n){if(n&&n instanceof Element){var o=A(r,n,"EXP");o&&o.feature&&(e.debug&&(console.warn("[aes-autolog] 发送AES曝光日志",o),window.validNewLog(o,n,t.getConfig())),e.dryRun||t.log("autolog",o))}})))};return function(){o();var t=r.getConfig();E(r,ot,{autologProps:t.autologProps,autologPropsHandler:t.autologPropsHandler,containerProps:t.containerProps}),!1===t.autoLoad||!1===t.click&&!1===t.exposure||a()}(),{addPlugin:function(t,e,n){E(r,t,e,n)},removePlugin:function(t,e){y(r,t,e)},start:a,stop:function(){et(t,!1)&&(x(r),tt(r))},autolog:function(e){void 0===e&&(e={});var n=r.getConfig(),o=e,i=o.target,a=o.feature,u=o.text,l=o.logType,f=void 0===l?"CLK":l,d=c(e,["target","feature","text","logType"]);if(!(i&&i instanceof Element))return console.error('Parameter "target" is not an Element!'),!1;var h=A(r,i,f,!0);if(h){var p=s(h,s({feature:a||h.feature,text:u||h.text},d));p&&p.feature&&(n.debug&&(console.warn("[aes-autolog] 发送AES日志",p),window.validLog(p,"2.0")),n.dryRun||t.log("autolog",p))}}}}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-longtask/index",[],t):"object"==typeof exports?exports.AESPluginLongTask=t():e.AESPluginLongTask=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var i=function(e){for(var t=[],n=window,i=document,o=0,r=e.length;o<r;o++){var u=e[o];if(u===n||u===i)break;if(u.id){t.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?t.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):t.push(u.nodeName)}return t.reverse().join(" ")},o=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return i(e);for(var t=[],n=e;n;)t.push(n),n=n.parentNode;return i(t)},r=void 0!==document.hidden?{hidden:"hidden",visibilityChange:"visibilitychange"}:void 0!==document.webkitHidden?{hidden:"webkitHidden",visibilityChange:"webkitvisibilitychange"}:void 0!==document.msHidden?{hidden:"msHidden",visibilityChange:"msvisibilitychange"}:void 0,u=!!r;function a(e,t){if(window.PerformanceLongTaskTiming){var n;["pointerdown","touchstart","mousedown","keydown","mouseover"].forEach((function(e){document.addEventListener(e,(function(e){var t;n=(null===(t=e.composedPath)||void 0===t?void 0:t.call(e))||e.path||e.target}),{capture:!0,passive:!0})}));var i,a,d,c=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){var i,r;i=function(){e.log("longtask",{startTime:t.startTime,duration:t.duration,xpath:n&&o(n)})},"function"==typeof requestIdleCallback?requestIdleCallback(i,{timeout:r||1e3}):setTimeout(i,0)}))}));c.observe({entryTypes:["longtask"]}),i=function(e){e?setTimeout((function(){c.observe({entryTypes:["longtask"]})}),100):c.disconnect()},u&&document.addEventListener(r.visibilityChange,d=function(e){a&&document.removeEventListener(r.visibilityChange,d),i(!document[r.hidden])})}}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-eventTiming/index",[],n):"object"==typeof exports?exports.AESPluginEventTiming=n():e.AESPluginEventTiming=n()}(window,(function(){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var i=function(e){for(var n=[],t=window,i=document,r=0,o=e.length;r<o;r++){var u=e[r];if(u===t||u===i)break;if(u.id){n.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?n.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):n.push(u.nodeName)}return n.reverse().join(" ")},r=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return i(e);for(var n=[],t=e;t;)n.push(t),t=t.parentNode;return i(n)},o=void 0!==document.hidden?{hidden:"hidden",visibilityChange:"visibilitychange"}:void 0!==document.webkitHidden?{hidden:"webkitHidden",visibilityChange:"webkitvisibilitychange"}:void 0!==document.msHidden?{hidden:"msHidden",visibilityChange:"msvisibilitychange"}:void 0,u=!!o;n.default=function(e,n){var t,i;if(window.PerformanceEventTiming){var c,d,a,s,f=function(n,t){var i,o;i=function(){e.log("eventTiming",{p1:n.startTime,p2:n.duration,p3:n.target&&r(n.target),p4:n.name,p5:n.processingStart,p6:n.processingEnd,p7:t?"1":"0"})},"function"==typeof requestIdleCallback?requestIdleCallback(i,{timeout:o||1e3}):setTimeout(i,0)},l=new PerformanceObserver((function(e){var n=e.getEntries().filter((function(e){return void 0!==e.interactionId&&e.processingStart&&e.processingEnd&&e.processingEnd-e.processingStart>1})),t=n.filter((function(e){return 0!==e.interactionId})).reduce((function(e,n){var t=n.interactionId;return e[t]||(e[t]=[]),e[t].push(n),e}),{});for(var i in t)f(t[i][t[i].length-1]);n.filter((function(e){return 0===e.interactionId})).forEach((function(e){f(e)}))}));try{l.observe({type:"event",durationThreshold:100})}catch(e){}null!==(t=window.PerformanceObserver)&&void 0!==t&&null!==(i=t.supportedEntryTypes)&&void 0!==i&&i.includes("first-input")&&(c=new PerformanceObserver((function(e,n){f(e.getEntries()[0],!0),n.disconnect(),c=null}))).observe({type:"first-input",buffered:!0}),d=function(e){e?setTimeout((function(){try{l.observe({type:"event",durationThreshold:100})}catch(e){}}),100):(c&&c.disconnect(),l&&l.disconnect())},u&&document.addEventListener(o.visibilityChange,s=function(e){a&&document.removeEventListener(o.visibilityChange,s),d(!document[o.hidden])})}}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-animFluency/index",[],n):"object"==typeof exports?exports.AESPluginAnimFluency=n():e.AESPluginAnimFluency=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return c}));var r=function(e){for(var n=[],t=window,r=document,i=r.body,a=0,o=e.length;a<o;a++){var u=e[a];if(u===i||u===r||u===t)break;if(u.id){n.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?n.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):n.push(u.nodeName)}return n.reverse().join(" ")},i=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return r(e);for(var n=[],t=e;t;)n.push(t),t=t.parentNode;return r(n)},a=function(e,n){"function"==typeof requestIdleCallback?requestIdleCallback(e,{timeout:n||1e3}):setTimeout(e,0)},o=function(e){return e.reduce((function(e,n){return e+n}),0)/e.length},u=window.requestAnimationFrame||window.webkitRequestAnimationFrame,f=window.cancelAnimationFrame||window.webkitCancelAnimationFrame;function c(e,n){var t={},r=Math.random(),c="__aesTrans_"+r,l="__aesAnim_"+r,d=function(e,n){if(u&&!t[e]){var r;t[e]=u((function i(){var a=window.performance&&performance.now?performance.now():(new Date).getTime();if(!r)return r=a,void(t[e]=u(i));n&&n(a-r),r=a,t[e]=u(i)}))}};document.addEventListener("transitionstart",(function(n){if(n&&n.target&&n.path){var r=n.target;if(!r[c]){var u;r[c]=1;var l=Math.random(),s=(new Date).getTime(),m=n.propertyName,p=[];d(l,(function(e){p.length>1e3&&p.shift(),p.push(e)}));var v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r&&r.removeEventListener("transitionend",u),t[l]&&f(t[l]),delete t[l],p.length&&a((function(){var t=i(n.path||r),a=isNaN(n.elapsedTime)?(new Date).getTime()-s:1e3*n.elapsedTime,u=Math.floor(a/(1e3/60));e.log("animFluency",{xpath:t,animType:"transition",animName:m,rate:(u-p.length)/u,fps:1e3/o(p)})}))},g=setTimeout((function(){v()}),1100);r&&r.addEventListener&&r.addEventListener("transitionend",u=function(e){clearTimeout(g),v(e)})}}})),document.addEventListener("animationstart",(function(n){if(n&&n.target&&n.path){var r=n.target;if(!r[l]){var u;r[l]=1;var c=Math.random(),s=(new Date).getTime(),m=n.animationName,p=[];d(c,(function(e){p.length>1e3&&p.shift(),p.push(e)}));var v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r&&r.removeEventListener("animationend",u),t[c]&&f(t[c]),delete t[c],p.length&&a((function(){var t=i(n.path||r),a=isNaN(n.elapsedTime)?(new Date).getTime()-s:1e3*n.elapsedTime,u=Math.floor(a/(1e3/60));e.log("animFluency",{xpath:t,animType:"animation",animName:m,rate:(u-p.length)/u,fps:1e3/o(p)})}))},g=setTimeout((function(){v()}),1100);r&&r.addEventListener&&r.addEventListener("animationend",u=function(e){clearTimeout(g),v(e)})}}}))}}]).default}));