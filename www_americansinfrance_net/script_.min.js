function TrackRadar(t,i,e){this.apiUrl=t,this.trackingDomain=i,this.cookieDomain=e||document.domain;var a=this;this.dispatchCustomEvent=function(t,i){t=new CustomEvent(t,{detail:i});document.dispatchEvent(t)},this._setCookie=function(t,i,e){var n=new Date,e=(i=encodeURIComponent(i),n.setTime(n.getTime()+24*e*60*60*1e3),"expires="+n.toUTCString());document.cookie=t+"="+i+"; "+e+"; domain=."+a.cookieDomain+"; path=/; SameSite=None; Secure"},this._getCookie=function(t){t+="=";for(var i=document.cookie.split(";"),e=0;e<i.length;e++){for(var n=i[e];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null},this._getArgument=function(t){if(t=new RegExp("[?&]"+encodeURIComponent(t)+"=([^#&]*)").exec(location.search||location.hash))return decodeURIComponent(t[1])},this._ajaxRequest=function(t,i,e){try{var n=new(window.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");n.open(e?"POST":"GET",t,1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){3<n.readyState&&i&&i(n.responseText,n)},n.send(JSON.stringify(e))}catch(t){window.console&&console.log(t)}},this._loadVar=function(t,i){var e=this._getCookie(t);return e||((e=i(t))?this._setCookie(t,e,180):e=null),e},this._s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},this._uuid=function(){return this._s4()+this._s4()+"-"+this._s4()+"-"+this._s4()+"-"+this._s4()+"-"+this._s4()+this._s4()+this._s4()},this._visitData={tr_referrer:this._loadVar("tr_referrer",function(t){return a._getArgument("proxy_referrer")||document.referrer}),tr_uri:this._loadVar("tr_uri",function(t){return document.location.href}),tr_track_id:this._loadVar("tr_track_id",function(t){return a._getArgument("tap_s")||a._getArgument("tap_x")}),tr_visit_id:this._loadVar("tr_visit_id",function(t){return a._getArgument("visit_id")})},this._trackVisit=function(){var t={event_type:"visit",event_data:{domain:this.trackingDomain,uri:this._visitData.tr_uri,referrer:this._visitData.tr_referrer||""}};this._visitData.tr_track_id&&(t.event_data.track_id=this._visitData.tr_track_id),this._ajaxRequest(this.apiUrl,function(t){(t=JSON.parse(t)).visit_id?(a._setCookie("tr_visit_id",t.visit_id,180),a._visitData.tr_visit_id=t.visit_id,a.dispatchCustomEvent("XHRDataEvent",a._visitData)):window.console&&console.log(t)},t)},this._trackPageView=function(i,e){var t={event_type:"view",event_data:{uuid:e||this._uuid(),uri:window.location.href,page:window.location.pathname,page_args:window.location.search+window.location.hash,user_id:i||"",visit_id:this._visitData.tr_visit_id}};this._ajaxRequest(this.apiUrl,function(t){(t=JSON.parse(t)).visit_id?a._setCookie("tr_visit_id",t.visit_id,180):(a._visitData.tr_visit_id=null,a.trackPageView(i,e))},t)},this.trackPageView=function(t,i){this._visitData.tr_visit_id?this.dispatchCustomEvent("XHRDataEvent",this._visitData):this._trackVisit()}}var splitDomain=document.domain.split("."),domain=3===splitDomain.length?splitDomain.slice(1).join("."):document.domain,subdomain=document.domain.startsWith("app-")&&!document.domain.startsWith("app-prod")?["app-dev",domain].join("."):domain;function getApiResource(){return"https://track.".concat(domain)+"/trevent"}var tracking=new TrackRadar(getApiResource(),subdomain,domain);tracking.trackPageView();